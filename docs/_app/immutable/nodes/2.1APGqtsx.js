import{s as ws,p as Aa,k as nr,i as pn,O as Fc,P as T_,Q as Pl,R as S_,x as Dl,n as ra,c as $c,S as _s,T as ys,f as ui,U as P2,V as zl,u as jc,g as Wc,a as Yc,D as If,A as Xc,e as ar,d as lr,W as Dp,y as z2,X as C_,Y as I_,Z as Bf,_ as L2,b as vs,$ as Pp,j as xs,v as Jt,F as R2,l as jn,a0 as ap,a1 as nl,a2 as zp,r as B_,t as Il,h as Bl,a3 as ox,a4 as F2,m as C0,a5 as z1,o as Bu,a6 as O2,a7 as ax,a8 as Lp,w as N2,a9 as V2}from"../chunks/scheduler.5eeauvpB.js";import{S as io,i as ro,a as tr,c as G0,t as Ci,g as q0,b as ea,d as Ca,m as ta,e as na,f as U2}from"../chunks/index.nJ64X6DF.js";import{w as Su,r as Vg}from"../chunks/index.cSiU3nbh.js";function I0(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function Oc(e,n){const a={},d={},w={$$scope:1};let M=e.length;for(;M--;){const P=e[M],c=n[M];if(c){for(const U in P)U in c||(d[U]=1);for(const U in c)w[U]||(a[U]=c[U],w[U]=1);e[M]=c}else for(const U in P)w[U]=1}for(const P in d)P in a||(a[P]=void 0);return a}function lp(e){return typeof e=="object"&&e!==null?e:{}}function gf(e){return Object.entries(e).filter(([n,a])=>n!==""&&a).map(([n])=>n).join(" ")}const Q2=/^[a-z]+(?::(?:preventDefault|stopPropagation|passive|nonpassive|capture|once|self))+$/,B4=/^[^$]+(?:\$(?:preventDefault|stopPropagation|passive|nonpassive|capture|once|self))+$/;function D_(e){let n,a=[];e.$on=(w,M)=>{let P=w,c=()=>{};return n?c=n(P,M):a.push([P,M]),P.match(Q2)&&console&&console.warn('Event modifiers in SMUI now use "$" instead of ":", so that all events can be bound with modifiers. Please update your event binding: ',P),()=>{c()}};function d(w){const M=e.$$.callbacks[w.type];M&&M.slice().forEach(P=>P.call(this,w))}return w=>{const M=[],P={};n=(c,U)=>{let O=c,j=U,W=!1;const J=O.match(Q2),ae=O.match(B4),be=J||ae;if(O.match(/^SMUI:\w+:/)){const Ce=O.split(":");let je="";for(let Qe=0;Qe<Ce.length;Qe++)je+=Qe===Ce.length-1?":"+Ce[Qe]:Ce[Qe].split("-").map(nt=>nt.slice(0,1).toUpperCase()+nt.slice(1)).join("");console.warn(`The event ${O.split("$")[0]} has been renamed to ${je.split("$")[0]}.`),O=je}if(be){const Ce=O.split(J?":":"$");O=Ce[0];const je=Ce.slice(1).reduce((Qe,nt)=>(Qe[nt]=!0,Qe),{});je.passive&&(W=W||{},W.passive=!0),je.nonpassive&&(W=W||{},W.passive=!1),je.capture&&(W=W||{},W.capture=!0),je.once&&(W=W||{},W.once=!0),je.preventDefault&&(j=D4(j)),je.stopPropagation&&(j=P4(j)),je.stopImmediatePropagation&&(j=z4(j)),je.self&&(j=L4(w,j)),je.trusted&&(j=R4(j))}const Ze=G2(w,O,j,W),xe=()=>{Ze();const Ce=M.indexOf(xe);Ce>-1&&M.splice(Ce,1)};return M.push(xe),O in P||(P[O]=G2(w,O,d)),xe};for(let c=0;c<a.length;c++)n(a[c][0],a[c][1]);return{destroy:()=>{for(let c=0;c<M.length;c++)M[c]();for(let c of Object.entries(P))c[1]()}}}}function G2(e,n,a,d){return e.addEventListener(n,a,d),()=>e.removeEventListener(n,a,d)}function D4(e){return function(n){return n.preventDefault(),e.call(this,n)}}function P4(e){return function(n){return n.stopPropagation(),e.call(this,n)}}function z4(e){return function(n){return n.stopImmediatePropagation(),e.call(this,n)}}function L4(e,n){return function(a){if(a.target===e)return n.call(this,a)}}function R4(e){return function(n){if(n.isTrusted)return e.call(this,n)}}function hm(e,n){let a=[];if(n)for(let d=0;d<n.length;d++){const w=n[d],M=Array.isArray(w)?w[0]:w;Array.isArray(w)&&w.length>1?a.push(M(e,w[1])):a.push(M(e))}return{update(d){if((d&&d.length||0)!=a.length)throw new Error("You must not change the length of an actions array.");if(d)for(let w=0;w<d.length;w++){const M=a[w];if(M&&M.update){const P=d[w];Array.isArray(P)&&P.length>1?M.update(P[1]):M.update()}}},destroy(){for(let d=0;d<a.length;d++){const w=a[d];w&&w.destroy&&w.destroy()}}}}function F4(e){let n=e[1],a,d,w=e[1]&&Ug(e);return{c(){w&&w.c(),a=Aa()},l(M){w&&w.l(M),a=Aa()},m(M,P){w&&w.m(M,P),nr(M,a,P),d=!0},p(M,P){M[1]?n?ws(n,M[1])?(w.d(1),w=Ug(M),n=M[1],w.c(),w.m(a.parentNode,a)):w.p(M,P):(w=Ug(M),n=M[1],w.c(),w.m(a.parentNode,a)):n&&(w.d(1),w=null,n=M[1])},i(M){d||(Ci(w,M),d=!0)},o(M){tr(w,M),d=!1},d(M){M&&pn(a),w&&w.d(M)}}}function O4(e){let n=e[1],a,d=e[1]&&Qg(e);return{c(){d&&d.c(),a=Aa()},l(w){d&&d.l(w),a=Aa()},m(w,M){d&&d.m(w,M),nr(w,a,M)},p(w,M){w[1]?n?ws(n,w[1])?(d.d(1),d=Qg(w),n=w[1],d.c(),d.m(a.parentNode,a)):d.p(w,M):(d=Qg(w),n=w[1],d.c(),d.m(a.parentNode,a)):n&&(d.d(1),d=null,n=w[1])},i:ra,o:ra,d(w){w&&pn(a),d&&d.d(w)}}}function N4(e){let n,a,d,w,M;const P=e[8].default,c=$c(P,e,e[7],null);let U=[e[5]],O={};for(let j=0;j<U.length;j+=1)O=Pl(O,U[j]);return{c(){n=_s("svg"),c&&c.c(),this.h()},l(j){n=ys(j,"svg",{});var W=ui(n);c&&c.l(W),W.forEach(pn),this.h()},h(){P2(n,O)},m(j,W){nr(j,n,W),c&&c.m(n,null),e[9](n),d=!0,w||(M=[zl(a=hm.call(null,n,e[0])),zl(e[4].call(null,n))],w=!0)},p(j,W){c&&c.p&&(!d||W&128)&&jc(c,P,j,j[7],d?Yc(P,j[7],W,null):Wc(j[7]),null),P2(n,O=Oc(U,[W&32&&j[5]])),a&&If(a.update)&&W&1&&a.update.call(null,j[0])},i(j){d||(Ci(c,j),d=!0)},o(j){tr(c,j),d=!1},d(j){j&&pn(n),c&&c.d(j),e[9](null),w=!1,Xc(M)}}}function Ug(e){let n,a,d,w,M;const P=e[8].default,c=$c(P,e,e[7],null);let U=[e[5]],O={};for(let j=0;j<U.length;j+=1)O=Pl(O,U[j]);return{c(){n=ar(e[1]),c&&c.c(),this.h()},l(j){n=lr(j,(e[1]||"null").toUpperCase(),{});var W=ui(n);c&&c.l(W),W.forEach(pn),this.h()},h(){Dp(e[1])(n,O)},m(j,W){nr(j,n,W),c&&c.m(n,null),e[11](n),d=!0,w||(M=[zl(a=hm.call(null,n,e[0])),zl(e[4].call(null,n))],w=!0)},p(j,W){c&&c.p&&(!d||W&128)&&jc(c,P,j,j[7],d?Yc(P,j[7],W,null):Wc(j[7]),null),Dp(j[1])(n,O=Oc(U,[W&32&&j[5]])),a&&If(a.update)&&W&1&&a.update.call(null,j[0])},i(j){d||(Ci(c,j),d=!0)},o(j){tr(c,j),d=!1},d(j){j&&pn(n),c&&c.d(j),e[11](null),w=!1,Xc(M)}}}function Qg(e){let n,a,d,w,M=[e[5]],P={};for(let c=0;c<M.length;c+=1)P=Pl(P,M[c]);return{c(){n=ar(e[1]),this.h()},l(c){n=lr(c,(e[1]||"null").toUpperCase(),{}),ui(n).forEach(pn),this.h()},h(){Dp(e[1])(n,P)},m(c,U){nr(c,n,U),e[10](n),d||(w=[zl(a=hm.call(null,n,e[0])),zl(e[4].call(null,n))],d=!0)},p(c,U){Dp(c[1])(n,P=Oc(M,[U&32&&c[5]])),a&&If(a.update)&&U&1&&a.update.call(null,c[0])},d(c){c&&pn(n),e[10](null),d=!1,Xc(w)}}}function V4(e){let n,a,d,w;const M=[N4,O4,F4],P=[];function c(U,O){return U[1]==="svg"?0:U[3]?1:2}return n=c(e),a=P[n]=M[n](e),{c(){a.c(),d=Aa()},l(U){a.l(U),d=Aa()},m(U,O){P[n].m(U,O),nr(U,d,O),w=!0},p(U,[O]){let j=n;n=c(U),n===j?P[n].p(U,O):(q0(),tr(P[j],1,1,()=>{P[j]=null}),G0(),a=P[n],a?a.p(U,O):(a=P[n]=M[n](U),a.c()),Ci(a,1),a.m(d.parentNode,d))},i(U){w||(Ci(a),w=!0)},o(U){tr(a),w=!1},d(U){U&&pn(d),P[n].d(U)}}}function U4(e,n,a){let d;const w=["use","tag","getElement"];let M=Fc(n,w),{$$slots:P={},$$scope:c}=n,{use:U=[]}=n,{tag:O}=n;const j=D_(T_());let W;function J(){return W}function ae(xe){Dl[xe?"unshift":"push"](()=>{W=xe,a(2,W)})}function be(xe){Dl[xe?"unshift":"push"](()=>{W=xe,a(2,W)})}function Ze(xe){Dl[xe?"unshift":"push"](()=>{W=xe,a(2,W)})}return e.$$set=xe=>{n=Pl(Pl({},n),S_(xe)),a(5,M=Fc(n,w)),"use"in xe&&a(0,U=xe.use),"tag"in xe&&a(1,O=xe.tag),"$$scope"in xe&&a(7,c=xe.$$scope)},e.$$.update=()=>{e.$$.dirty&2&&a(3,d=["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr"].indexOf(O)>-1)},[U,O,W,d,j,M,J,c,P,ae,be,Ze]}class lx extends io{constructor(n){super(),ro(this,n,U4,V4,ws,{use:0,tag:1,getElement:6})}get getElement(){return this.$$.ctx[6]}}function Q4(e){let n;const a=e[11].default,d=$c(a,e,e[13],null);return{c(){d&&d.c()},l(w){d&&d.l(w)},m(w,M){d&&d.m(w,M),n=!0},p(w,M){d&&d.p&&(!n||M&8192)&&jc(d,a,w,w[13],n?Yc(a,w[13],M,null):Wc(w[13]),null)},i(w){n||(Ci(d,w),n=!0)},o(w){tr(d,w),n=!1},d(w){d&&d.d(w)}}}function G4(e){let n,a,d;const w=[{tag:e[3]},{use:[e[8],...e[0]]},{class:gf({[e[1]]:!0,[e[6]]:!0,...e[5]})},e[7],e[9]];var M=e[2];function P(c,U){let O={$$slots:{default:[Q4]},$$scope:{ctx:c}};if(U!==void 0&&U&1003)O=Oc(w,[U&8&&{tag:c[3]},U&257&&{use:[c[8],...c[0]]},U&98&&{class:gf({[c[1]]:!0,[c[6]]:!0,...c[5]})},U&128&&lp(c[7]),U&512&&lp(c[9])]);else for(let j=0;j<w.length;j+=1)O=Pl(O,w[j]);return{props:O}}return M&&(n=z2(M,P(e)),e[12](n)),{c(){n&&ea(n.$$.fragment),a=Aa()},l(c){n&&Ca(n.$$.fragment,c),a=Aa()},m(c,U){n&&ta(n,c,U),nr(c,a,U),d=!0},p(c,[U]){if(U&4&&M!==(M=c[2])){if(n){q0();const O=n;tr(O.$$.fragment,1,0,()=>{na(O,1)}),G0()}M?(n=z2(M,P(c,U)),c[12](n),ea(n.$$.fragment),Ci(n.$$.fragment,1),ta(n,a.parentNode,a)):n=null}else if(M){const O=U&1003?Oc(w,[U&8&&{tag:c[3]},U&257&&{use:[c[8],...c[0]]},U&98&&{class:gf({[c[1]]:!0,[c[6]]:!0,...c[5]})},U&128&&lp(c[7]),U&512&&lp(c[9])]):{};U&8192&&(O.$$scope={dirty:U,ctx:c}),n.$set(O)}},i(c){d||(n&&Ci(n.$$.fragment,c),d=!0)},o(c){n&&tr(n.$$.fragment,c),d=!1},d(c){c&&pn(a),e[12](null),n&&na(n,c)}}}const Cu={component:lx,tag:"div",class:"",classMap:{},contexts:{},props:{}};function q4(e,n,a){const d=["use","class","component","tag","getElement"];let w=Fc(n,d),{$$slots:M={},$$scope:P}=n,{use:c=[]}=n,{class:U=""}=n,O;const j=Cu.class,W={},J=[],ae=Cu.contexts,be=Cu.props;let{component:Ze=Cu.component}=n,{tag:xe=Ze===lx?Cu.tag:void 0}=n;Object.entries(Cu.classMap).forEach(([nt,it])=>{const xt=C_(it);xt&&"subscribe"in xt&&J.push(xt.subscribe(Ft=>{a(5,W[nt]=Ft,W)}))});const Ce=D_(T_());for(let nt in ae)ae.hasOwnProperty(nt)&&I_(nt,ae[nt]);Bf(()=>{for(const nt of J)nt()});function je(){return O.getElement()}function Qe(nt){Dl[nt?"unshift":"push"](()=>{O=nt,a(4,O)})}return e.$$set=nt=>{n=Pl(Pl({},n),S_(nt)),a(9,w=Fc(n,d)),"use"in nt&&a(0,c=nt.use),"class"in nt&&a(1,U=nt.class),"component"in nt&&a(2,Ze=nt.component),"tag"in nt&&a(3,xe=nt.tag),"$$scope"in nt&&a(13,P=nt.$$scope)},[c,U,Ze,xe,O,W,j,be,Ce,w,je,M,Qe,P]}class Z4 extends io{constructor(n){super(),ro(this,n,q4,G4,ws,{use:0,class:1,component:2,tag:3,getElement:10})}get getElement(){return this.$$.ctx[10]}}const q2=Object.assign({},Cu);function Z0(e){return new Proxy(Z4,{construct:function(n,a){return Object.assign(Cu,q2,e),new n(...a)},get:function(n,a){return Object.assign(Cu,q2,e),n[a]}})}Z0({class:"mdc-deprecated-list-item__text",tag:"span"});Z0({class:"mdc-deprecated-list-item__primary-text",tag:"span"});Z0({class:"mdc-deprecated-list-item__secondary-text",tag:"span"});function H4(e){let n,a,d,w,M,P;const c=e[8].default,U=$c(c,e,e[7],null);let O=[{class:a=gf({[e[1]]:!0,"mdc-deprecated-list-item__graphic":!0,"mdc-menu__selection-group-icon":e[4]})},e[5]],j={};for(let W=0;W<O.length;W+=1)j=Pl(j,O[W]);return{c(){n=ar("span"),U&&U.c(),this.h()},l(W){n=lr(W,"SPAN",{class:!0});var J=ui(n);U&&U.l(J),J.forEach(pn),this.h()},h(){L2(n,j)},m(W,J){nr(W,n,J),U&&U.m(n,null),e[9](n),w=!0,M||(P=[zl(d=hm.call(null,n,e[0])),zl(e[3].call(null,n))],M=!0)},p(W,[J]){U&&U.p&&(!w||J&128)&&jc(U,c,W,W[7],w?Yc(c,W[7],J,null):Wc(W[7]),null),L2(n,j=Oc(O,[(!w||J&2&&a!==(a=gf({[W[1]]:!0,"mdc-deprecated-list-item__graphic":!0,"mdc-menu__selection-group-icon":W[4]})))&&{class:a},J&32&&W[5]])),d&&If(d.update)&&J&1&&d.update.call(null,W[0])},i(W){w||(Ci(U,W),w=!0)},o(W){tr(U,W),w=!1},d(W){W&&pn(n),U&&U.d(W),e[9](null),M=!1,Xc(P)}}}function $4(e,n,a){const d=["use","class","getElement"];let w=Fc(n,d),{$$slots:M={},$$scope:P}=n;const c=D_(T_());let{use:U=[]}=n,{class:O=""}=n,j,W=C_("SMUI:list:graphic:menu-selection-group");function J(){return j}function ae(be){Dl[be?"unshift":"push"](()=>{j=be,a(2,j)})}return e.$$set=be=>{n=Pl(Pl({},n),S_(be)),a(5,w=Fc(n,d)),"use"in be&&a(0,U=be.use),"class"in be&&a(1,O=be.class),"$$scope"in be&&a(7,P=be.$$scope)},[U,O,j,c,W,w,J,P,M,ae]}class j4 extends io{constructor(n){super(),ro(this,n,$4,H4,ws,{use:0,class:1,getElement:6})}get getElement(){return this.$$.ctx[6]}}Z0({class:"mdc-deprecated-list-item__meta",tag:"span"});Z0({class:"mdc-deprecated-list-group",tag:"div"});Z0({class:"mdc-deprecated-list-group__subheader",tag:"h3"});Z0({class:"mdc-menu__selection-group-icon",component:j4});const Rp=["pd","mpd","mntd","rel_pd","rel_mpd","rel_mntd"],Fp={pd:"phylodiversity",mpd:"mean pairwise phylogenetic distance",mntd:"mean nearest-taxon phylogenetic distance"};function W4(e){if(!e||!Rp.includes(e))return;const a=650;let d=new Array(a),w=[0,1];const M=Z2[1]/a;let P;switch(e){case"mntd":P=hx;break;case"mpd":P=cx;break;default:case"pd":P=ux}let c=P.d,U=P.b,O=P.e,j=P.c,W=P.modelHigh,J=P.modelLow,ae=P.minY,be=P.maxY,Ze=2;for(let xe=0;xe<a;xe++){let Ce=(xe+Ze)*M;d[xe]={x:Ce,high:W({x:Ce,b:U.high,c:j.high,d:c.high,e:O.high}),low:J({x:Ce,b:U.low,c:j.low,d:c.low,e:O.low})}}return w=[ae,be],{confidence:d,yAxis:w,xAxis:Z2,xAxisLabel:"Tree Size",yAxisLabel:P.yAxisLabel}}const Z2=[0,650],ux={b:{low:-.931227328236421,high:-.850415384226551},c:{low:139.306047949838,high:436.895903091284},d:{low:19162.375584044,high:12915.6022684778},e:{low:327.846953673696,high:161.518693290759},minY:0,maxY:5e3,yAxisLabel:"Phylodiversity (pd)",modelHigh:({x:e,b:n,c:a,d,e:w})=>a+(d-a)/(1+Math.exp(n*(Math.log(e)+Math.log(w)))),modelLow:({x:e,b:n,c:a,d,e:w})=>a+(d-a)/(1+Math.exp(n*(Math.log(e)+Math.log(w))))},cx={b:{low:-.694118805220058,high:.438483491772355},c:{low:62.1579404827569,high:291.293982442487},d:{low:333.919579385655,high:465.531774320664},e:{low:2.95718871003758,high:4.49962992132698},minY:0,maxY:500,yAxisLabel:"Mean pairwise phylogenetic distance (mpd)",modelHigh:({x:e,b:n,c:a,d,e:w})=>a+(d-a)/(1+Math.exp(n*(Math.log(e)+Math.log(w)))),modelLow:({x:e,b:n,c:a,d,e:w})=>a+(d-a)/(1+Math.exp(n*(Math.log(e)+Math.log(w))))},hx={b:{low:.201425689862832,high:.67160099325109},c:{low:-54.3817056624714,high:2.24604817474376},d:{low:226.214892066078,high:738.112935166842},e:{low:12.7584223154993,high:3.26410875351594},minY:0,maxY:150,yAxisLabel:"Mean nearest-taxon phylogenetic distance (mntd)",modelHigh:({x:e,b:n,c:a,d,e:w})=>a+(d-a)/(1+Math.exp(n*(Math.log(e)+Math.log(w)))),modelLow:({x:e,b:n,c:a,d,e:w})=>a+(d-a)/(1+Math.exp(n*(Math.log(e)+Math.log10(w))))};function Y4(e,n,a){let d;switch(e){case"mntd":d=hx;break;case"mpd":d=cx;break;default:case"pd":d=ux}let w=d.d,M=d.b,P=d.e,c=d.c,U=d.modelHigh,O=d.modelLow,j=U({x:a,b:M.high,c:c.high,d:w.high,e:P.high}),W=O({x:a,b:M.low,c:c.low,d:w.low,e:P.low}),J=j-W;return(n-W)*J/(d.maxY-d.minY)}function Op(e,n,a="blBluCyWt"){return fx[a](e,n)}function Cr(e,n,a){return a*(n-e)+e}const fx={orGrBlu:function(n,a){return[[-1,"#ddddddcc"],[n,"#F9A825cc","Very low"],[Cr(n,a,.35),"#e8f4c4cc"],[Cr(n,a,.5),"#00E676cc","Expected"],[Cr(n,a,.75),"#3d9ab8cc"],[Cr(n,a,.85),"#318ab5cc"],[a,"#2a4e9bcc","Very high"]]},blGr:function(n,a){return[[-1,"#ddddddcc"],[n,"#000000","Very low"],[a,"#00ff00","Very high"]]},blBluCyWt:function(n,a){return[[-1,"#ddddddcc","Missing"],[n,"#000000cc","Very low"],[Cr(n,a,.5),"#0000ffcc","Expected"],[Cr(n,a,.75),"#00ffffcc"],[a,"#ffffffcc","Very high"]]},rdYlGr:function(n,a){return[[-1,"#ddddddcc","Missing"],[n,"#fd5533cc","Very low"],[Cr(n,a,.5),"#f8f611cc","Normal"],[a,"#4eb87bcc","Very high"]]},"*mgYlGr":function(n,a){return[[-1,"#ddddddcc","Missing"],[n,"#F15C8Ecc","Very low"],[Cr(n,a,.5),"#f8f611cc","Normal"],[a,"#4eb87bcc","Very high"]]},grYlRd:function(n,a){return[[-1,"#ddddddcc","Missing"],[n,"#00ff33cc","Very low biodiversity"],[Cr(n,a,.5),"#ffff33cc","Normal biodiversity"],[a,"#ff3300cc","Very high biodiversity"]]},"*census":function(n,a){return[[-1,"#ddddddcc","Missing"],[n,"#efd100cc","Very low biodiversity"],[Cr(n,a,.5),"#4eb87bcc","Normal biodiversity"],[a,"#007fc4cc","Very high biodiversity"]]},seqseq:function(n,a){return[[-1,"#ddddddcc","Missing"],[n,"#de4fa6cc","Very low biodiversity"],[Cr(n,a,.5),"#4fadd0cc","Normal biodiversity"],[a,"#2a1a8acc","Very high biodiversity"]]},"*parula":function(n,a){return[[-1,"#ddddddcc"],[n,"#352a87cc","Very low"],[Cr(n,a,.167),"#0469dfcc"],[Cr(n,a,.33),"#06a0cbcc"],[Cr(n,a,.5),"#1fb2accc","Expected"],[Cr(n,a,.667),"#a3bd6acc"],[Cr(n,a,.833),"#fcc336cc"],[a,"#f8f611cc","Very high"]]},"*parula_flip":function(n,a){return[[-1,"#ddddddcc"],[n,"#f8f611cc","Very low"],[Cr(n,a,.167),"#fcc336cc"],[Cr(n,a,.33),"#a3bd6acc"],[Cr(n,a,.5),"#1fb2accc","Expected"],[Cr(n,a,.667),"#06a0cbcc"],[Cr(n,a,.833),"#0469dfcc"],[a,"#352a87cc","Very high"]]},"*ibm":function(n,a){return[[-1,"#ddddddcc"],[n,"#648FFFcc","Very low"],[Cr(n,a,.25),"#785EF0cc"],[Cr(n,a,.5),"#DC267Fcc","Expected"],[Cr(n,a,.75),"#FE6100cc"],[a,"#FFB000cc","Very high"]]},"*ibm_flip":function(n,a){return[[-1,"#ddddddcc"],[n,"#FFB000cc","Very low"],[Cr(n,a,.25),"#FE6100cc"],[Cr(n,a,.5),"#DC267Fcc","Expected"],[Cr(n,a,.75),"#785EF0cc"],[a,"#648FFFcc","Very high"]]}};function H2(e,n,a){const d=e.slice();return d[9]=n[a],d}function X4(e,n,a){const d=e.slice();return d[9]=n[a],d}function K4(e){let n,a;return{c(){n=ar("option"),a=Il(e[9]),this.h()},l(d){n=lr(d,"OPTION",{});var w=ui(n);a=Bl(w,e[9]),w.forEach(pn),this.h()},h(){n.__value=e[9],ox(n,n.__value)},m(d,w){nr(d,n,w),jn(n,a)},p:ra,d(d){d&&pn(n)}}}function $2(e){let n,a=e[9]+"",d;return{c(){n=ar("option"),d=Il(a),this.h()},l(w){n=lr(w,"OPTION",{});var M=ui(n);d=Bl(M,a),M.forEach(pn),this.h()},h(){n.__value=e[9],ox(n,n.__value)},m(w,M){nr(w,n,M),jn(n,d)},p:ra,d(w){w&&pn(n)}}}function J4(e){let n,a,d,w="Metric",M,P,c,U,O,j="Palette",W,J,ae,be,Ze=I0(Rp),xe=[];for(let Qe=0;Qe<Ze.length;Qe+=1)xe[Qe]=K4(X4(e,Ze,Qe));let Ce=I0(e[4]),je=[];for(let Qe=0;Qe<Ce.length;Qe+=1)je[Qe]=$2(H2(e,Ce,Qe));return{c(){n=ar("div"),a=ar("div"),d=ar("h4"),d.textContent=w,M=vs(),P=ar("select");for(let Qe=0;Qe<xe.length;Qe+=1)xe[Qe].c();c=vs(),U=ar("div"),O=ar("h4"),O.textContent=j,W=vs(),J=ar("select");for(let Qe=0;Qe<je.length;Qe+=1)je[Qe].c();this.h()},l(Qe){n=lr(Qe,"DIV",{class:!0});var nt=ui(n);a=lr(nt,"DIV",{class:!0});var it=ui(a);d=lr(it,"H4",{class:!0,"data-svelte-h":!0}),Pp(d)!=="svelte-1wtuo56"&&(d.textContent=w),M=xs(it),P=lr(it,"SELECT",{label:!0});var xt=ui(P);for(let nn=0;nn<xe.length;nn+=1)xe[nn].l(xt);xt.forEach(pn),it.forEach(pn),c=xs(nt),U=lr(nt,"DIV",{class:!0});var Ft=ui(U);O=lr(Ft,"H4",{class:!0,"data-svelte-h":!0}),Pp(O)!=="svelte-16skbun"&&(O.textContent=j),W=xs(Ft),J=lr(Ft,"SELECT",{label:!0});var It=ui(J);for(let nn=0;nn<je.length;nn+=1)je[nn].l(It);It.forEach(pn),Ft.forEach(pn),nt.forEach(pn),this.h()},h(){Jt(d,"class","svelte-kizido"),Jt(P,"label","Diversity Metric"),e[2]===void 0&&R2(()=>e[5].call(P)),Jt(a,"class","control-item svelte-kizido"),Jt(O,"class","svelte-kizido"),Jt(J,"label","Color Scheme"),e[3]===void 0&&R2(()=>e[7].call(J)),Jt(U,"class","control-item svelte-kizido"),Jt(n,"class","controls svelte-kizido")},m(Qe,nt){nr(Qe,n,nt),jn(n,a),jn(a,d),jn(a,M),jn(a,P);for(let it=0;it<xe.length;it+=1)xe[it]&&xe[it].m(P,null);ap(P,e[2],!0),jn(n,c),jn(n,U),jn(U,O),jn(U,W),jn(U,J);for(let it=0;it<je.length;it+=1)je[it]&&je[it].m(J,null);ap(J,e[3],!0),ae||(be=[nl(P,"change",e[5]),nl(P,"change",e[6]),nl(J,"change",e[7]),nl(J,"change",e[8])],ae=!0)},p(Qe,[nt]){if(nt&4&&ap(P,Qe[2]),nt&16){Ce=I0(Qe[4]);let it;for(it=0;it<Ce.length;it+=1){const xt=H2(Qe,Ce,it);je[it]?je[it].p(xt,nt):(je[it]=$2(xt),je[it].c(),je[it].m(J,null))}for(;it<je.length;it+=1)je[it].d(1);je.length=Ce.length}nt&24&&ap(J,Qe[3])},i:ra,o:ra,d(Qe){Qe&&pn(n),zp(xe,Qe),zp(je,Qe),ae=!1,Xc(be)}}}function e5(e,n,a){let{updateMetricLayer:d}=n,{updateColorScheme:w}=n,M,P;const c=Object.keys(fx);B_(()=>{d(M),w(P)});function U(){M=F2(this),a(2,M)}const O=()=>d(M);function j(){P=F2(this),a(3,P),a(4,c)}const W=()=>w(P);return e.$$set=J=>{"updateMetricLayer"in J&&a(0,d=J.updateMetricLayer),"updateColorScheme"in J&&a(1,w=J.updateColorScheme)},[d,w,M,P,c,U,O,j,W]}class t5 extends io{constructor(n){super(),ro(this,n,e5,J4,ws,{updateMetricLayer:0,updateColorScheme:1})}}function j2(e,n,a){const d=e.slice();return d[5]=n[a],d}function W2(e){let n,a=`${e[5][2]} ${Fp[e[0]]??""}`,d;return{c(){n=ar("span"),d=Il(a),this.h()},l(w){n=lr(w,"SPAN",{class:!0});var M=ui(n);d=Bl(M,a),M.forEach(pn),this.h()},h(){Jt(n,"class","svelte-1av6wyf")},m(w,M){nr(w,n,M),jn(n,d)},p(w,M){M&3&&a!==(a=`${w[5][2]} ${Fp[w[0]]??""}`)&&C0(d,a)},d(w){w&&pn(n)}}}function Y2(e){let n,a=e[5][2]&&W2(e);return{c(){a&&a.c(),n=Aa()},l(d){a&&a.l(d),n=Aa()},m(d,w){a&&a.m(d,w),nr(d,n,w)},p(d,w){d[5][2]?a?a.p(d,w):(a=W2(d),a.c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null)},d(d){d&&pn(n),a&&a.d(d)}}}function n5(e){let n,a,d,w,M,P=I0(e[1]),c=[];for(let U=0;U<P.length;U+=1)c[U]=Y2(j2(e,P,U));return{c(){n=ar("div"),a=ar("div"),w=vs(),M=ar("div");for(let U=0;U<c.length;U+=1)c[U].c();this.h()},l(U){n=lr(U,"DIV",{class:!0});var O=ui(n);a=lr(O,"DIV",{class:!0,style:!0}),ui(a).forEach(pn),w=xs(O),M=lr(O,"DIV",{class:!0});var j=ui(M);for(let W=0;W<c.length;W+=1)c[W].l(j);j.forEach(pn),O.forEach(pn),this.h()},h(){Jt(a,"class","gradient svelte-1av6wyf"),Jt(a,"style",d=`background-image: ${e[2]}`),Jt(M,"class","label-container svelte-1av6wyf"),Jt(n,"class","legend-container svelte-1av6wyf")},m(U,O){nr(U,n,O),jn(n,a),jn(n,w),jn(n,M);for(let j=0;j<c.length;j+=1)c[j]&&c[j].m(M,null)},p(U,[O]){if(O&4&&d!==(d=`background-image: ${U[2]}`)&&Jt(a,"style",d),O&3){P=I0(U[1]);let j;for(j=0;j<P.length;j+=1){const W=j2(U,P,j);c[j]?c[j].p(W,O):(c[j]=Y2(W),c[j].c(),c[j].m(M,null))}for(;j<c.length;j+=1)c[j].d(1);c.length=P.length}},i:ra,o:ra,d(U){U&&pn(n),zp(c,U)}}}function i5(e,n,a){let d=Op(),w,{colorScheme:M}=n,{metric:P}=n;function c(U){let O=`url("/phast/SVG/ticks.svg"), linear-gradient(${U.map(j=>j[1]).flat().reverse()})`;return console.log(O),O}return e.$$set=U=>{"colorScheme"in U&&a(3,M=U.colorScheme),"metric"in U&&a(0,P=U.metric)},e.$$.update=()=>{e.$$.dirty&8&&a(1,d=Op(0,1,M).slice(1)),e.$$.dirty&2&&a(2,w=c(d))},[P,d,w,M]}class r5 extends io{constructor(n){super(),ro(this,n,i5,n5,ws,{colorScheme:3,metric:0})}}function vp(e,n){return e==null||n==null?NaN:e<n?-1:e>n?1:e>=n?0:NaN}function A5(e,n){return e==null||n==null?NaN:n<e?-1:n>e?1:n>=e?0:NaN}function dx(e){let n,a,d;e.length!==2?(n=vp,a=(c,U)=>vp(e(c),U),d=(c,U)=>e(c)-U):(n=e===vp||e===A5?e:s5,a=e,d=e);function w(c,U,O=0,j=c.length){if(O<j){if(n(U,U)!==0)return j;do{const W=O+j>>>1;a(c[W],U)<0?O=W+1:j=W}while(O<j)}return O}function M(c,U,O=0,j=c.length){if(O<j){if(n(U,U)!==0)return j;do{const W=O+j>>>1;a(c[W],U)<=0?O=W+1:j=W}while(O<j)}return O}function P(c,U,O=0,j=c.length){const W=w(c,U,O,j-1);return W>O&&d(c[W-1],U)>-d(c[W],U)?W-1:W}return{left:w,center:P,right:M}}function s5(){return 0}function o5(e){return e===null?NaN:+e}const a5=dx(vp),l5=a5.right;dx(o5).center;function X2(e,n){let a,d;if(n===void 0)for(const w of e)w!=null&&(a===void 0?w>=w&&(a=d=w):(a>w&&(a=w),d<w&&(d=w)));else{let w=-1;for(let M of e)(M=n(M,++w,e))!=null&&(a===void 0?M>=M&&(a=d=M):(a>M&&(a=M),d<M&&(d=M)))}return[a,d]}const u5=Math.sqrt(50),c5=Math.sqrt(10),h5=Math.sqrt(2);function Np(e,n,a){const d=(n-e)/Math.max(0,a),w=Math.floor(Math.log10(d)),M=d/Math.pow(10,w),P=M>=u5?10:M>=c5?5:M>=h5?2:1;let c,U,O;return w<0?(O=Math.pow(10,-w)/P,c=Math.round(e*O),U=Math.round(n*O),c/O<e&&++c,U/O>n&&--U,O=-O):(O=Math.pow(10,w)*P,c=Math.round(e/O),U=Math.round(n/O),c*O<e&&++c,U*O>n&&--U),U<c&&.5<=a&&a<2?Np(e,n,a*2):[c,U,O]}function f5(e,n,a){if(n=+n,e=+e,a=+a,!(a>0))return[];if(e===n)return[e];const d=n<e,[w,M,P]=d?Np(n,e,a):Np(e,n,a);if(!(M>=w))return[];const c=M-w+1,U=new Array(c);if(d)if(P<0)for(let O=0;O<c;++O)U[O]=(M-O)/-P;else for(let O=0;O<c;++O)U[O]=(M-O)*P;else if(P<0)for(let O=0;O<c;++O)U[O]=(w+O)/-P;else for(let O=0;O<c;++O)U[O]=(w+O)*P;return U}function L1(e,n,a){return n=+n,e=+e,a=+a,Np(e,n,a)[2]}function d5(e,n,a){n=+n,e=+e,a=+a;const d=n<e,w=d?L1(n,e,a):L1(e,n,a);return(d?-1:1)*(w<0?1/-w:w)}function p5(e){return e}var Gg=1,qg=2,R1=3,cf=4,K2=1e-6;function m5(e){return"translate("+e+",0)"}function g5(e){return"translate(0,"+e+")"}function _5(e){return n=>+e(n)}function y5(e,n){return n=Math.max(0,e.bandwidth()-n*2)/2,e.round()&&(n=Math.round(n)),a=>+e(a)+n}function v5(){return!this.__axis}function px(e,n){var a=[],d=null,w=null,M=6,P=6,c=3,U=typeof window<"u"&&window.devicePixelRatio>1?0:.5,O=e===Gg||e===cf?-1:1,j=e===cf||e===qg?"x":"y",W=e===Gg||e===R1?m5:g5;function J(ae){var be=d??(n.ticks?n.ticks.apply(n,a):n.domain()),Ze=w??(n.tickFormat?n.tickFormat.apply(n,a):p5),xe=Math.max(M,0)+c,Ce=n.range(),je=+Ce[0]+U,Qe=+Ce[Ce.length-1]+U,nt=(n.bandwidth?y5:_5)(n.copy(),U),it=ae.selection?ae.selection():ae,xt=it.selectAll(".domain").data([null]),Ft=it.selectAll(".tick").data(be,n).order(),It=Ft.exit(),nn=Ft.enter().append("g").attr("class","tick"),Zt=Ft.select("line"),At=Ft.select("text");xt=xt.merge(xt.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),Ft=Ft.merge(nn),Zt=Zt.merge(nn.append("line").attr("stroke","currentColor").attr(j+"2",O*M)),At=At.merge(nn.append("text").attr("fill","currentColor").attr(j,O*xe).attr("dy",e===Gg?"0em":e===R1?"0.71em":"0.32em")),ae!==it&&(xt=xt.transition(ae),Ft=Ft.transition(ae),Zt=Zt.transition(ae),At=At.transition(ae),It=It.transition(ae).attr("opacity",K2).attr("transform",function(bt){return isFinite(bt=nt(bt))?W(bt+U):this.getAttribute("transform")}),nn.attr("opacity",K2).attr("transform",function(bt){var kt=this.parentNode.__axis;return W((kt&&isFinite(kt=kt(bt))?kt:nt(bt))+U)})),It.remove(),xt.attr("d",e===cf||e===qg?P?"M"+O*P+","+je+"H"+U+"V"+Qe+"H"+O*P:"M"+U+","+je+"V"+Qe:P?"M"+je+","+O*P+"V"+U+"H"+Qe+"V"+O*P:"M"+je+","+U+"H"+Qe),Ft.attr("opacity",1).attr("transform",function(bt){return W(nt(bt)+U)}),Zt.attr(j+"2",O*M),At.attr(j,O*xe).text(Ze),it.filter(v5).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===qg?"start":e===cf?"end":"middle"),it.each(function(){this.__axis=nt})}return J.scale=function(ae){return arguments.length?(n=ae,J):n},J.ticks=function(){return a=Array.from(arguments),J},J.tickArguments=function(ae){return arguments.length?(a=ae==null?[]:Array.from(ae),J):a.slice()},J.tickValues=function(ae){return arguments.length?(d=ae==null?null:Array.from(ae),J):d&&d.slice()},J.tickFormat=function(ae){return arguments.length?(w=ae,J):w},J.tickSize=function(ae){return arguments.length?(M=P=+ae,J):M},J.tickSizeInner=function(ae){return arguments.length?(M=+ae,J):M},J.tickSizeOuter=function(ae){return arguments.length?(P=+ae,J):P},J.tickPadding=function(ae){return arguments.length?(c=+ae,J):c},J.offset=function(ae){return arguments.length?(U=+ae,J):U},J}function x5(e){return px(R1,e)}function w5(e){return px(cf,e)}var b5={value:()=>{}};function mx(){for(var e=0,n=arguments.length,a={},d;e<n;++e){if(!(d=arguments[e]+"")||d in a||/[\s.]/.test(d))throw new Error("illegal type: "+d);a[d]=[]}return new xp(a)}function xp(e){this._=e}function k5(e,n){return e.trim().split(/^|\s+/).map(function(a){var d="",w=a.indexOf(".");if(w>=0&&(d=a.slice(w+1),a=a.slice(0,w)),a&&!n.hasOwnProperty(a))throw new Error("unknown type: "+a);return{type:a,name:d}})}xp.prototype=mx.prototype={constructor:xp,on:function(e,n){var a=this._,d=k5(e+"",a),w,M=-1,P=d.length;if(arguments.length<2){for(;++M<P;)if((w=(e=d[M]).type)&&(w=E5(a[w],e.name)))return w;return}if(n!=null&&typeof n!="function")throw new Error("invalid callback: "+n);for(;++M<P;)if(w=(e=d[M]).type)a[w]=J2(a[w],e.name,n);else if(n==null)for(w in a)a[w]=J2(a[w],e.name,null);return this},copy:function(){var e={},n=this._;for(var a in n)e[a]=n[a].slice();return new xp(e)},call:function(e,n){if((w=arguments.length-2)>0)for(var a=new Array(w),d=0,w,M;d<w;++d)a[d]=arguments[d+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(M=this._[e],d=0,w=M.length;d<w;++d)M[d].value.apply(n,a)},apply:function(e,n,a){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var d=this._[e],w=0,M=d.length;w<M;++w)d[w].value.apply(n,a)}};function E5(e,n){for(var a=0,d=e.length,w;a<d;++a)if((w=e[a]).name===n)return w.value}function J2(e,n,a){for(var d=0,w=e.length;d<w;++d)if(e[d].name===n){e[d]=b5,e=e.slice(0,d).concat(e.slice(d+1));break}return a!=null&&e.push({name:n,value:a}),e}var F1="http://www.w3.org/1999/xhtml";const ey={svg:"http://www.w3.org/2000/svg",xhtml:F1,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function fm(e){var n=e+="",a=n.indexOf(":");return a>=0&&(n=e.slice(0,a))!=="xmlns"&&(e=e.slice(a+1)),ey.hasOwnProperty(n)?{space:ey[n],local:e}:e}function M5(e){return function(){var n=this.ownerDocument,a=this.namespaceURI;return a===F1&&n.documentElement.namespaceURI===F1?n.createElement(e):n.createElementNS(a,e)}}function T5(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function gx(e){var n=fm(e);return(n.local?T5:M5)(n)}function S5(){}function P_(e){return e==null?S5:function(){return this.querySelector(e)}}function C5(e){typeof e!="function"&&(e=P_(e));for(var n=this._groups,a=n.length,d=new Array(a),w=0;w<a;++w)for(var M=n[w],P=M.length,c=d[w]=new Array(P),U,O,j=0;j<P;++j)(U=M[j])&&(O=e.call(U,U.__data__,j,M))&&("__data__"in U&&(O.__data__=U.__data__),c[j]=O);return new Da(d,this._parents)}function I5(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function B5(){return[]}function _x(e){return e==null?B5:function(){return this.querySelectorAll(e)}}function D5(e){return function(){return I5(e.apply(this,arguments))}}function P5(e){typeof e=="function"?e=D5(e):e=_x(e);for(var n=this._groups,a=n.length,d=[],w=[],M=0;M<a;++M)for(var P=n[M],c=P.length,U,O=0;O<c;++O)(U=P[O])&&(d.push(e.call(U,U.__data__,O,P)),w.push(U));return new Da(d,w)}function yx(e){return function(){return this.matches(e)}}function vx(e){return function(n){return n.matches(e)}}var z5=Array.prototype.find;function L5(e){return function(){return z5.call(this.children,e)}}function R5(){return this.firstElementChild}function F5(e){return this.select(e==null?R5:L5(typeof e=="function"?e:vx(e)))}var O5=Array.prototype.filter;function N5(){return Array.from(this.children)}function V5(e){return function(){return O5.call(this.children,e)}}function U5(e){return this.selectAll(e==null?N5:V5(typeof e=="function"?e:vx(e)))}function Q5(e){typeof e!="function"&&(e=yx(e));for(var n=this._groups,a=n.length,d=new Array(a),w=0;w<a;++w)for(var M=n[w],P=M.length,c=d[w]=[],U,O=0;O<P;++O)(U=M[O])&&e.call(U,U.__data__,O,M)&&c.push(U);return new Da(d,this._parents)}function xx(e){return new Array(e.length)}function G5(){return new Da(this._enter||this._groups.map(xx),this._parents)}function Vp(e,n){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=n}Vp.prototype={constructor:Vp,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,n){return this._parent.insertBefore(e,n)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function q5(e){return function(){return e}}function Z5(e,n,a,d,w,M){for(var P=0,c,U=n.length,O=M.length;P<O;++P)(c=n[P])?(c.__data__=M[P],d[P]=c):a[P]=new Vp(e,M[P]);for(;P<U;++P)(c=n[P])&&(w[P]=c)}function H5(e,n,a,d,w,M,P){var c,U,O=new Map,j=n.length,W=M.length,J=new Array(j),ae;for(c=0;c<j;++c)(U=n[c])&&(J[c]=ae=P.call(U,U.__data__,c,n)+"",O.has(ae)?w[c]=U:O.set(ae,U));for(c=0;c<W;++c)ae=P.call(e,M[c],c,M)+"",(U=O.get(ae))?(d[c]=U,U.__data__=M[c],O.delete(ae)):a[c]=new Vp(e,M[c]);for(c=0;c<j;++c)(U=n[c])&&O.get(J[c])===U&&(w[c]=U)}function $5(e){return e.__data__}function j5(e,n){if(!arguments.length)return Array.from(this,$5);var a=n?H5:Z5,d=this._parents,w=this._groups;typeof e!="function"&&(e=q5(e));for(var M=w.length,P=new Array(M),c=new Array(M),U=new Array(M),O=0;O<M;++O){var j=d[O],W=w[O],J=W.length,ae=W5(e.call(j,j&&j.__data__,O,d)),be=ae.length,Ze=c[O]=new Array(be),xe=P[O]=new Array(be),Ce=U[O]=new Array(J);a(j,W,Ze,xe,Ce,ae,n);for(var je=0,Qe=0,nt,it;je<be;++je)if(nt=Ze[je]){for(je>=Qe&&(Qe=je+1);!(it=xe[Qe])&&++Qe<be;);nt._next=it||null}}return P=new Da(P,d),P._enter=c,P._exit=U,P}function W5(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Y5(){return new Da(this._exit||this._groups.map(xx),this._parents)}function X5(e,n,a){var d=this.enter(),w=this,M=this.exit();return typeof e=="function"?(d=e(d),d&&(d=d.selection())):d=d.append(e+""),n!=null&&(w=n(w),w&&(w=w.selection())),a==null?M.remove():a(M),d&&w?d.merge(w).order():w}function K5(e){for(var n=e.selection?e.selection():e,a=this._groups,d=n._groups,w=a.length,M=d.length,P=Math.min(w,M),c=new Array(w),U=0;U<P;++U)for(var O=a[U],j=d[U],W=O.length,J=c[U]=new Array(W),ae,be=0;be<W;++be)(ae=O[be]||j[be])&&(J[be]=ae);for(;U<w;++U)c[U]=a[U];return new Da(c,this._parents)}function J5(){for(var e=this._groups,n=-1,a=e.length;++n<a;)for(var d=e[n],w=d.length-1,M=d[w],P;--w>=0;)(P=d[w])&&(M&&P.compareDocumentPosition(M)^4&&M.parentNode.insertBefore(P,M),M=P);return this}function e8(e){e||(e=t8);function n(W,J){return W&&J?e(W.__data__,J.__data__):!W-!J}for(var a=this._groups,d=a.length,w=new Array(d),M=0;M<d;++M){for(var P=a[M],c=P.length,U=w[M]=new Array(c),O,j=0;j<c;++j)(O=P[j])&&(U[j]=O);U.sort(n)}return new Da(w,this._parents).order()}function t8(e,n){return e<n?-1:e>n?1:e>=n?0:NaN}function n8(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function i8(){return Array.from(this)}function r8(){for(var e=this._groups,n=0,a=e.length;n<a;++n)for(var d=e[n],w=0,M=d.length;w<M;++w){var P=d[w];if(P)return P}return null}function A8(){let e=0;for(const n of this)++e;return e}function s8(){return!this.node()}function o8(e){for(var n=this._groups,a=0,d=n.length;a<d;++a)for(var w=n[a],M=0,P=w.length,c;M<P;++M)(c=w[M])&&e.call(c,c.__data__,M,w);return this}function a8(e){return function(){this.removeAttribute(e)}}function l8(e){return function(){this.removeAttributeNS(e.space,e.local)}}function u8(e,n){return function(){this.setAttribute(e,n)}}function c8(e,n){return function(){this.setAttributeNS(e.space,e.local,n)}}function h8(e,n){return function(){var a=n.apply(this,arguments);a==null?this.removeAttribute(e):this.setAttribute(e,a)}}function f8(e,n){return function(){var a=n.apply(this,arguments);a==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,a)}}function d8(e,n){var a=fm(e);if(arguments.length<2){var d=this.node();return a.local?d.getAttributeNS(a.space,a.local):d.getAttribute(a)}return this.each((n==null?a.local?l8:a8:typeof n=="function"?a.local?f8:h8:a.local?c8:u8)(a,n))}function wx(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function p8(e){return function(){this.style.removeProperty(e)}}function m8(e,n,a){return function(){this.style.setProperty(e,n,a)}}function g8(e,n,a){return function(){var d=n.apply(this,arguments);d==null?this.style.removeProperty(e):this.style.setProperty(e,d,a)}}function _8(e,n,a){return arguments.length>1?this.each((n==null?p8:typeof n=="function"?g8:m8)(e,n,a??"")):Nc(this.node(),e)}function Nc(e,n){return e.style.getPropertyValue(n)||wx(e).getComputedStyle(e,null).getPropertyValue(n)}function y8(e){return function(){delete this[e]}}function v8(e,n){return function(){this[e]=n}}function x8(e,n){return function(){var a=n.apply(this,arguments);a==null?delete this[e]:this[e]=a}}function w8(e,n){return arguments.length>1?this.each((n==null?y8:typeof n=="function"?x8:v8)(e,n)):this.node()[e]}function bx(e){return e.trim().split(/^|\s+/)}function z_(e){return e.classList||new kx(e)}function kx(e){this._node=e,this._names=bx(e.getAttribute("class")||"")}kx.prototype={add:function(e){var n=this._names.indexOf(e);n<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var n=this._names.indexOf(e);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Ex(e,n){for(var a=z_(e),d=-1,w=n.length;++d<w;)a.add(n[d])}function Mx(e,n){for(var a=z_(e),d=-1,w=n.length;++d<w;)a.remove(n[d])}function b8(e){return function(){Ex(this,e)}}function k8(e){return function(){Mx(this,e)}}function E8(e,n){return function(){(n.apply(this,arguments)?Ex:Mx)(this,e)}}function M8(e,n){var a=bx(e+"");if(arguments.length<2){for(var d=z_(this.node()),w=-1,M=a.length;++w<M;)if(!d.contains(a[w]))return!1;return!0}return this.each((typeof n=="function"?E8:n?b8:k8)(a,n))}function T8(){this.textContent=""}function S8(e){return function(){this.textContent=e}}function C8(e){return function(){var n=e.apply(this,arguments);this.textContent=n??""}}function I8(e){return arguments.length?this.each(e==null?T8:(typeof e=="function"?C8:S8)(e)):this.node().textContent}function B8(){this.innerHTML=""}function D8(e){return function(){this.innerHTML=e}}function P8(e){return function(){var n=e.apply(this,arguments);this.innerHTML=n??""}}function z8(e){return arguments.length?this.each(e==null?B8:(typeof e=="function"?P8:D8)(e)):this.node().innerHTML}function L8(){this.nextSibling&&this.parentNode.appendChild(this)}function R8(){return this.each(L8)}function F8(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function O8(){return this.each(F8)}function N8(e){var n=typeof e=="function"?e:gx(e);return this.select(function(){return this.appendChild(n.apply(this,arguments))})}function V8(){return null}function U8(e,n){var a=typeof e=="function"?e:gx(e),d=n==null?V8:typeof n=="function"?n:P_(n);return this.select(function(){return this.insertBefore(a.apply(this,arguments),d.apply(this,arguments)||null)})}function Q8(){var e=this.parentNode;e&&e.removeChild(this)}function G8(){return this.each(Q8)}function q8(){var e=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(e,this.nextSibling):e}function Z8(){var e=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(e,this.nextSibling):e}function H8(e){return this.select(e?Z8:q8)}function $8(e){return arguments.length?this.property("__data__",e):this.node().__data__}function j8(e){return function(n){e.call(this,n,this.__data__)}}function W8(e){return e.trim().split(/^|\s+/).map(function(n){var a="",d=n.indexOf(".");return d>=0&&(a=n.slice(d+1),n=n.slice(0,d)),{type:n,name:a}})}function Y8(e){return function(){var n=this.__on;if(n){for(var a=0,d=-1,w=n.length,M;a<w;++a)M=n[a],(!e.type||M.type===e.type)&&M.name===e.name?this.removeEventListener(M.type,M.listener,M.options):n[++d]=M;++d?n.length=d:delete this.__on}}}function X8(e,n,a){return function(){var d=this.__on,w,M=j8(n);if(d){for(var P=0,c=d.length;P<c;++P)if((w=d[P]).type===e.type&&w.name===e.name){this.removeEventListener(w.type,w.listener,w.options),this.addEventListener(w.type,w.listener=M,w.options=a),w.value=n;return}}this.addEventListener(e.type,M,a),w={type:e.type,name:e.name,value:n,listener:M,options:a},d?d.push(w):this.__on=[w]}}function K8(e,n,a){var d=W8(e+""),w,M=d.length,P;if(arguments.length<2){var c=this.node().__on;if(c){for(var U=0,O=c.length,j;U<O;++U)for(w=0,j=c[U];w<M;++w)if((P=d[w]).type===j.type&&P.name===j.name)return j.value}return}for(c=n?X8:Y8,w=0;w<M;++w)this.each(c(d[w],n,a));return this}function Tx(e,n,a){var d=wx(e),w=d.CustomEvent;typeof w=="function"?w=new w(n,a):(w=d.document.createEvent("Event"),a?(w.initEvent(n,a.bubbles,a.cancelable),w.detail=a.detail):w.initEvent(n,!1,!1)),e.dispatchEvent(w)}function J8(e,n){return function(){return Tx(this,e,n)}}function e6(e,n){return function(){return Tx(this,e,n.apply(this,arguments))}}function t6(e,n){return this.each((typeof n=="function"?e6:J8)(e,n))}function*n6(){for(var e=this._groups,n=0,a=e.length;n<a;++n)for(var d=e[n],w=0,M=d.length,P;w<M;++w)(P=d[w])&&(yield P)}var Sx=[null];function Da(e,n){this._groups=e,this._parents=n}function Df(){return new Da([[document.documentElement]],Sx)}function i6(){return this}Da.prototype=Df.prototype={constructor:Da,select:C5,selectAll:P5,selectChild:F5,selectChildren:U5,filter:Q5,data:j5,enter:G5,exit:Y5,join:X5,merge:K5,selection:i6,order:J5,sort:e8,call:n8,nodes:i8,node:r8,size:A8,empty:s8,each:o8,attr:d8,style:_8,property:w8,classed:M8,text:I8,html:z8,raise:R8,lower:O8,append:N8,insert:U8,remove:G8,clone:H8,datum:$8,on:K8,dispatch:t6,[Symbol.iterator]:n6};function Zg(e){return typeof e=="string"?new Da([[document.querySelector(e)]],[document.documentElement]):new Da([[e]],Sx)}function L_(e,n,a){e.prototype=n.prototype=a,a.constructor=e}function Cx(e,n){var a=Object.create(e.prototype);for(var d in n)a[d]=n[d];return a}function Pf(){}var _f=.7,Up=1/_f,zc="\\s*([+-]?\\d+)\\s*",yf="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Jl="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",r6=/^#([0-9a-f]{3,8})$/,A6=new RegExp(`^rgb\\(${zc},${zc},${zc}\\)$`),s6=new RegExp(`^rgb\\(${Jl},${Jl},${Jl}\\)$`),o6=new RegExp(`^rgba\\(${zc},${zc},${zc},${yf}\\)$`),a6=new RegExp(`^rgba\\(${Jl},${Jl},${Jl},${yf}\\)$`),l6=new RegExp(`^hsl\\(${yf},${Jl},${Jl}\\)$`),u6=new RegExp(`^hsla\\(${yf},${Jl},${Jl},${yf}\\)$`),ty={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};L_(Pf,L0,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:ny,formatHex:ny,formatHex8:c6,formatHsl:h6,formatRgb:iy,toString:iy});function ny(){return this.rgb().formatHex()}function c6(){return this.rgb().formatHex8()}function h6(){return Ix(this).formatHsl()}function iy(){return this.rgb().formatRgb()}function L0(e){var n,a;return e=(e+"").trim().toLowerCase(),(n=r6.exec(e))?(a=n[1].length,n=parseInt(n[1],16),a===6?ry(n):a===3?new ia(n>>8&15|n>>4&240,n>>4&15|n&240,(n&15)<<4|n&15,1):a===8?up(n>>24&255,n>>16&255,n>>8&255,(n&255)/255):a===4?up(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|n&240,((n&15)<<4|n&15)/255):null):(n=A6.exec(e))?new ia(n[1],n[2],n[3],1):(n=s6.exec(e))?new ia(n[1]*255/100,n[2]*255/100,n[3]*255/100,1):(n=o6.exec(e))?up(n[1],n[2],n[3],n[4]):(n=a6.exec(e))?up(n[1]*255/100,n[2]*255/100,n[3]*255/100,n[4]):(n=l6.exec(e))?oy(n[1],n[2]/100,n[3]/100,1):(n=u6.exec(e))?oy(n[1],n[2]/100,n[3]/100,n[4]):ty.hasOwnProperty(e)?ry(ty[e]):e==="transparent"?new ia(NaN,NaN,NaN,0):null}function ry(e){return new ia(e>>16&255,e>>8&255,e&255,1)}function up(e,n,a,d){return d<=0&&(e=n=a=NaN),new ia(e,n,a,d)}function f6(e){return e instanceof Pf||(e=L0(e)),e?(e=e.rgb(),new ia(e.r,e.g,e.b,e.opacity)):new ia}function O1(e,n,a,d){return arguments.length===1?f6(e):new ia(e,n,a,d??1)}function ia(e,n,a,d){this.r=+e,this.g=+n,this.b=+a,this.opacity=+d}L_(ia,O1,Cx(Pf,{brighter(e){return e=e==null?Up:Math.pow(Up,e),new ia(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?_f:Math.pow(_f,e),new ia(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ia(B0(this.r),B0(this.g),B0(this.b),Qp(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ay,formatHex:Ay,formatHex8:d6,formatRgb:sy,toString:sy}));function Ay(){return`#${S0(this.r)}${S0(this.g)}${S0(this.b)}`}function d6(){return`#${S0(this.r)}${S0(this.g)}${S0(this.b)}${S0((isNaN(this.opacity)?1:this.opacity)*255)}`}function sy(){const e=Qp(this.opacity);return`${e===1?"rgb(":"rgba("}${B0(this.r)}, ${B0(this.g)}, ${B0(this.b)}${e===1?")":`, ${e})`}`}function Qp(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function B0(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function S0(e){return e=B0(e),(e<16?"0":"")+e.toString(16)}function oy(e,n,a,d){return d<=0?e=n=a=NaN:a<=0||a>=1?e=n=NaN:n<=0&&(e=NaN),new Cl(e,n,a,d)}function Ix(e){if(e instanceof Cl)return new Cl(e.h,e.s,e.l,e.opacity);if(e instanceof Pf||(e=L0(e)),!e)return new Cl;if(e instanceof Cl)return e;e=e.rgb();var n=e.r/255,a=e.g/255,d=e.b/255,w=Math.min(n,a,d),M=Math.max(n,a,d),P=NaN,c=M-w,U=(M+w)/2;return c?(n===M?P=(a-d)/c+(a<d)*6:a===M?P=(d-n)/c+2:P=(n-a)/c+4,c/=U<.5?M+w:2-M-w,P*=60):c=U>0&&U<1?0:P,new Cl(P,c,U,e.opacity)}function p6(e,n,a,d){return arguments.length===1?Ix(e):new Cl(e,n,a,d??1)}function Cl(e,n,a,d){this.h=+e,this.s=+n,this.l=+a,this.opacity=+d}L_(Cl,p6,Cx(Pf,{brighter(e){return e=e==null?Up:Math.pow(Up,e),new Cl(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?_f:Math.pow(_f,e),new Cl(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,n=isNaN(e)||isNaN(this.s)?0:this.s,a=this.l,d=a+(a<.5?a:1-a)*n,w=2*a-d;return new ia(Hg(e>=240?e-240:e+120,w,d),Hg(e,w,d),Hg(e<120?e+240:e-120,w,d),this.opacity)},clamp(){return new Cl(ay(this.h),cp(this.s),cp(this.l),Qp(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Qp(this.opacity);return`${e===1?"hsl(":"hsla("}${ay(this.h)}, ${cp(this.s)*100}%, ${cp(this.l)*100}%${e===1?")":`, ${e})`}`}}));function ay(e){return e=(e||0)%360,e<0?e+360:e}function cp(e){return Math.max(0,Math.min(1,e||0))}function Hg(e,n,a){return(e<60?n+(a-n)*e/60:e<180?a:e<240?n+(a-n)*(240-e)/60:n)*255}const R_=e=>()=>e;function m6(e,n){return function(a){return e+a*n}}function g6(e,n,a){return e=Math.pow(e,a),n=Math.pow(n,a)-e,a=1/a,function(d){return Math.pow(e+d*n,a)}}function _6(e){return(e=+e)==1?Bx:function(n,a){return a-n?g6(n,a,e):R_(isNaN(n)?a:n)}}function Bx(e,n){var a=n-e;return a?m6(e,a):R_(isNaN(e)?n:e)}const Gp=function e(n){var a=_6(n);function d(w,M){var P=a((w=O1(w)).r,(M=O1(M)).r),c=a(w.g,M.g),U=a(w.b,M.b),O=Bx(w.opacity,M.opacity);return function(j){return w.r=P(j),w.g=c(j),w.b=U(j),w.opacity=O(j),w+""}}return d.gamma=e,d}(1);function y6(e,n){n||(n=[]);var a=e?Math.min(n.length,e.length):0,d=n.slice(),w;return function(M){for(w=0;w<a;++w)d[w]=e[w]*(1-M)+n[w]*M;return d}}function v6(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function x6(e,n){var a=n?n.length:0,d=e?Math.min(a,e.length):0,w=new Array(d),M=new Array(a),P;for(P=0;P<d;++P)w[P]=F_(e[P],n[P]);for(;P<a;++P)M[P]=n[P];return function(c){for(P=0;P<d;++P)M[P]=w[P](c);return M}}function w6(e,n){var a=new Date;return e=+e,n=+n,function(d){return a.setTime(e*(1-d)+n*d),a}}function Tl(e,n){return e=+e,n=+n,function(a){return e*(1-a)+n*a}}function b6(e,n){var a={},d={},w;(e===null||typeof e!="object")&&(e={}),(n===null||typeof n!="object")&&(n={});for(w in n)w in e?a[w]=F_(e[w],n[w]):d[w]=n[w];return function(M){for(w in a)d[w]=a[w](M);return d}}var N1=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,$g=new RegExp(N1.source,"g");function k6(e){return function(){return e}}function E6(e){return function(n){return e(n)+""}}function Dx(e,n){var a=N1.lastIndex=$g.lastIndex=0,d,w,M,P=-1,c=[],U=[];for(e=e+"",n=n+"";(d=N1.exec(e))&&(w=$g.exec(n));)(M=w.index)>a&&(M=n.slice(a,M),c[P]?c[P]+=M:c[++P]=M),(d=d[0])===(w=w[0])?c[P]?c[P]+=w:c[++P]=w:(c[++P]=null,U.push({i:P,x:Tl(d,w)})),a=$g.lastIndex;return a<n.length&&(M=n.slice(a),c[P]?c[P]+=M:c[++P]=M),c.length<2?U[0]?E6(U[0].x):k6(n):(n=U.length,function(O){for(var j=0,W;j<n;++j)c[(W=U[j]).i]=W.x(O);return c.join("")})}function F_(e,n){var a=typeof n,d;return n==null||a==="boolean"?R_(n):(a==="number"?Tl:a==="string"?(d=L0(n))?(n=d,Gp):Dx:n instanceof L0?Gp:n instanceof Date?w6:v6(n)?y6:Array.isArray(n)?x6:typeof n.valueOf!="function"&&typeof n.toString!="function"||isNaN(n)?b6:Tl)(e,n)}function M6(e,n){return e=+e,n=+n,function(a){return Math.round(e*(1-a)+n*a)}}var ly=180/Math.PI,V1={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Px(e,n,a,d,w,M){var P,c,U;return(P=Math.sqrt(e*e+n*n))&&(e/=P,n/=P),(U=e*a+n*d)&&(a-=e*U,d-=n*U),(c=Math.sqrt(a*a+d*d))&&(a/=c,d/=c,U/=c),e*d<n*a&&(e=-e,n=-n,U=-U,P=-P),{translateX:w,translateY:M,rotate:Math.atan2(n,e)*ly,skewX:Math.atan(U)*ly,scaleX:P,scaleY:c}}var hp;function T6(e){const n=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return n.isIdentity?V1:Px(n.a,n.b,n.c,n.d,n.e,n.f)}function S6(e){return e==null||(hp||(hp=document.createElementNS("http://www.w3.org/2000/svg","g")),hp.setAttribute("transform",e),!(e=hp.transform.baseVal.consolidate()))?V1:(e=e.matrix,Px(e.a,e.b,e.c,e.d,e.e,e.f))}function zx(e,n,a,d){function w(O){return O.length?O.pop()+" ":""}function M(O,j,W,J,ae,be){if(O!==W||j!==J){var Ze=ae.push("translate(",null,n,null,a);be.push({i:Ze-4,x:Tl(O,W)},{i:Ze-2,x:Tl(j,J)})}else(W||J)&&ae.push("translate("+W+n+J+a)}function P(O,j,W,J){O!==j?(O-j>180?j+=360:j-O>180&&(O+=360),J.push({i:W.push(w(W)+"rotate(",null,d)-2,x:Tl(O,j)})):j&&W.push(w(W)+"rotate("+j+d)}function c(O,j,W,J){O!==j?J.push({i:W.push(w(W)+"skewX(",null,d)-2,x:Tl(O,j)}):j&&W.push(w(W)+"skewX("+j+d)}function U(O,j,W,J,ae,be){if(O!==W||j!==J){var Ze=ae.push(w(ae)+"scale(",null,",",null,")");be.push({i:Ze-4,x:Tl(O,W)},{i:Ze-2,x:Tl(j,J)})}else(W!==1||J!==1)&&ae.push(w(ae)+"scale("+W+","+J+")")}return function(O,j){var W=[],J=[];return O=e(O),j=e(j),M(O.translateX,O.translateY,j.translateX,j.translateY,W,J),P(O.rotate,j.rotate,W,J),c(O.skewX,j.skewX,W,J),U(O.scaleX,O.scaleY,j.scaleX,j.scaleY,W,J),O=j=null,function(ae){for(var be=-1,Ze=J.length,xe;++be<Ze;)W[(xe=J[be]).i]=xe.x(ae);return W.join("")}}}var C6=zx(T6,"px, ","px)","deg)"),I6=zx(S6,", ",")",")"),Vc=0,hf=0,nf=0,Lx=1e3,qp,ff,Zp=0,R0=0,dm=0,vf=typeof performance=="object"&&performance.now?performance:Date,Rx=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function O_(){return R0||(Rx(B6),R0=vf.now()+dm)}function B6(){R0=0}function Hp(){this._call=this._time=this._next=null}Hp.prototype=Fx.prototype={constructor:Hp,restart:function(e,n,a){if(typeof e!="function")throw new TypeError("callback is not a function");a=(a==null?O_():+a)+(n==null?0:+n),!this._next&&ff!==this&&(ff?ff._next=this:qp=this,ff=this),this._call=e,this._time=a,U1()},stop:function(){this._call&&(this._call=null,this._time=1/0,U1())}};function Fx(e,n,a){var d=new Hp;return d.restart(e,n,a),d}function D6(){O_(),++Vc;for(var e=qp,n;e;)(n=R0-e._time)>=0&&e._call.call(void 0,n),e=e._next;--Vc}function uy(){R0=(Zp=vf.now())+dm,Vc=hf=0;try{D6()}finally{Vc=0,z6(),R0=0}}function P6(){var e=vf.now(),n=e-Zp;n>Lx&&(dm-=n,Zp=e)}function z6(){for(var e,n=qp,a,d=1/0;n;)n._call?(d>n._time&&(d=n._time),e=n,n=n._next):(a=n._next,n._next=null,n=e?e._next=a:qp=a);ff=e,U1(d)}function U1(e){if(!Vc){hf&&(hf=clearTimeout(hf));var n=e-R0;n>24?(e<1/0&&(hf=setTimeout(uy,e-vf.now()-dm)),nf&&(nf=clearInterval(nf))):(nf||(Zp=vf.now(),nf=setInterval(P6,Lx)),Vc=1,Rx(uy))}}function cy(e,n,a){var d=new Hp;return n=n==null?0:+n,d.restart(w=>{d.stop(),e(w+n)},n,a),d}var L6=mx("start","end","cancel","interrupt"),R6=[],Ox=0,hy=1,Q1=2,wp=3,fy=4,G1=5,bp=6;function pm(e,n,a,d,w,M){var P=e.__transition;if(!P)e.__transition={};else if(a in P)return;F6(e,a,{name:n,index:d,group:w,on:L6,tween:R6,time:M.time,delay:M.delay,duration:M.duration,ease:M.ease,timer:null,state:Ox})}function N_(e,n){var a=Ll(e,n);if(a.state>Ox)throw new Error("too late; already scheduled");return a}function iu(e,n){var a=Ll(e,n);if(a.state>wp)throw new Error("too late; already running");return a}function Ll(e,n){var a=e.__transition;if(!a||!(a=a[n]))throw new Error("transition not found");return a}function F6(e,n,a){var d=e.__transition,w;d[n]=a,a.timer=Fx(M,0,a.time);function M(O){a.state=hy,a.timer.restart(P,a.delay,a.time),a.delay<=O&&P(O-a.delay)}function P(O){var j,W,J,ae;if(a.state!==hy)return U();for(j in d)if(ae=d[j],ae.name===a.name){if(ae.state===wp)return cy(P);ae.state===fy?(ae.state=bp,ae.timer.stop(),ae.on.call("interrupt",e,e.__data__,ae.index,ae.group),delete d[j]):+j<n&&(ae.state=bp,ae.timer.stop(),ae.on.call("cancel",e,e.__data__,ae.index,ae.group),delete d[j])}if(cy(function(){a.state===wp&&(a.state=fy,a.timer.restart(c,a.delay,a.time),c(O))}),a.state=Q1,a.on.call("start",e,e.__data__,a.index,a.group),a.state===Q1){for(a.state=wp,w=new Array(J=a.tween.length),j=0,W=-1;j<J;++j)(ae=a.tween[j].value.call(e,e.__data__,a.index,a.group))&&(w[++W]=ae);w.length=W+1}}function c(O){for(var j=O<a.duration?a.ease.call(null,O/a.duration):(a.timer.restart(U),a.state=G1,1),W=-1,J=w.length;++W<J;)w[W].call(e,j);a.state===G1&&(a.on.call("end",e,e.__data__,a.index,a.group),U())}function U(){a.state=bp,a.timer.stop(),delete d[n];for(var O in d)return;delete e.__transition}}function O6(e,n){var a=e.__transition,d,w,M=!0,P;if(a){n=n==null?null:n+"";for(P in a){if((d=a[P]).name!==n){M=!1;continue}w=d.state>Q1&&d.state<G1,d.state=bp,d.timer.stop(),d.on.call(w?"interrupt":"cancel",e,e.__data__,d.index,d.group),delete a[P]}M&&delete e.__transition}}function N6(e){return this.each(function(){O6(this,e)})}function V6(e,n){var a,d;return function(){var w=iu(this,e),M=w.tween;if(M!==a){d=a=M;for(var P=0,c=d.length;P<c;++P)if(d[P].name===n){d=d.slice(),d.splice(P,1);break}}w.tween=d}}function U6(e,n,a){var d,w;if(typeof a!="function")throw new Error;return function(){var M=iu(this,e),P=M.tween;if(P!==d){w=(d=P).slice();for(var c={name:n,value:a},U=0,O=w.length;U<O;++U)if(w[U].name===n){w[U]=c;break}U===O&&w.push(c)}M.tween=w}}function Q6(e,n){var a=this._id;if(e+="",arguments.length<2){for(var d=Ll(this.node(),a).tween,w=0,M=d.length,P;w<M;++w)if((P=d[w]).name===e)return P.value;return null}return this.each((n==null?V6:U6)(a,e,n))}function V_(e,n,a){var d=e._id;return e.each(function(){var w=iu(this,d);(w.value||(w.value={}))[n]=a.apply(this,arguments)}),function(w){return Ll(w,d).value[n]}}function Nx(e,n){var a;return(typeof n=="number"?Tl:n instanceof L0?Gp:(a=L0(n))?(n=a,Gp):Dx)(e,n)}function G6(e){return function(){this.removeAttribute(e)}}function q6(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Z6(e,n,a){var d,w=a+"",M;return function(){var P=this.getAttribute(e);return P===w?null:P===d?M:M=n(d=P,a)}}function H6(e,n,a){var d,w=a+"",M;return function(){var P=this.getAttributeNS(e.space,e.local);return P===w?null:P===d?M:M=n(d=P,a)}}function $6(e,n,a){var d,w,M;return function(){var P,c=a(this),U;return c==null?void this.removeAttribute(e):(P=this.getAttribute(e),U=c+"",P===U?null:P===d&&U===w?M:(w=U,M=n(d=P,c)))}}function j6(e,n,a){var d,w,M;return function(){var P,c=a(this),U;return c==null?void this.removeAttributeNS(e.space,e.local):(P=this.getAttributeNS(e.space,e.local),U=c+"",P===U?null:P===d&&U===w?M:(w=U,M=n(d=P,c)))}}function W6(e,n){var a=fm(e),d=a==="transform"?I6:Nx;return this.attrTween(e,typeof n=="function"?(a.local?j6:$6)(a,d,V_(this,"attr."+e,n)):n==null?(a.local?q6:G6)(a):(a.local?H6:Z6)(a,d,n))}function Y6(e,n){return function(a){this.setAttribute(e,n.call(this,a))}}function X6(e,n){return function(a){this.setAttributeNS(e.space,e.local,n.call(this,a))}}function K6(e,n){var a,d;function w(){var M=n.apply(this,arguments);return M!==d&&(a=(d=M)&&X6(e,M)),a}return w._value=n,w}function J6(e,n){var a,d;function w(){var M=n.apply(this,arguments);return M!==d&&(a=(d=M)&&Y6(e,M)),a}return w._value=n,w}function ek(e,n){var a="attr."+e;if(arguments.length<2)return(a=this.tween(a))&&a._value;if(n==null)return this.tween(a,null);if(typeof n!="function")throw new Error;var d=fm(e);return this.tween(a,(d.local?K6:J6)(d,n))}function tk(e,n){return function(){N_(this,e).delay=+n.apply(this,arguments)}}function nk(e,n){return n=+n,function(){N_(this,e).delay=n}}function ik(e){var n=this._id;return arguments.length?this.each((typeof e=="function"?tk:nk)(n,e)):Ll(this.node(),n).delay}function rk(e,n){return function(){iu(this,e).duration=+n.apply(this,arguments)}}function Ak(e,n){return n=+n,function(){iu(this,e).duration=n}}function sk(e){var n=this._id;return arguments.length?this.each((typeof e=="function"?rk:Ak)(n,e)):Ll(this.node(),n).duration}function ok(e,n){if(typeof n!="function")throw new Error;return function(){iu(this,e).ease=n}}function ak(e){var n=this._id;return arguments.length?this.each(ok(n,e)):Ll(this.node(),n).ease}function lk(e,n){return function(){var a=n.apply(this,arguments);if(typeof a!="function")throw new Error;iu(this,e).ease=a}}function uk(e){if(typeof e!="function")throw new Error;return this.each(lk(this._id,e))}function ck(e){typeof e!="function"&&(e=yx(e));for(var n=this._groups,a=n.length,d=new Array(a),w=0;w<a;++w)for(var M=n[w],P=M.length,c=d[w]=[],U,O=0;O<P;++O)(U=M[O])&&e.call(U,U.__data__,O,M)&&c.push(U);return new Pu(d,this._parents,this._name,this._id)}function hk(e){if(e._id!==this._id)throw new Error;for(var n=this._groups,a=e._groups,d=n.length,w=a.length,M=Math.min(d,w),P=new Array(d),c=0;c<M;++c)for(var U=n[c],O=a[c],j=U.length,W=P[c]=new Array(j),J,ae=0;ae<j;++ae)(J=U[ae]||O[ae])&&(W[ae]=J);for(;c<d;++c)P[c]=n[c];return new Pu(P,this._parents,this._name,this._id)}function fk(e){return(e+"").trim().split(/^|\s+/).every(function(n){var a=n.indexOf(".");return a>=0&&(n=n.slice(0,a)),!n||n==="start"})}function dk(e,n,a){var d,w,M=fk(n)?N_:iu;return function(){var P=M(this,e),c=P.on;c!==d&&(w=(d=c).copy()).on(n,a),P.on=w}}function pk(e,n){var a=this._id;return arguments.length<2?Ll(this.node(),a).on.on(e):this.each(dk(a,e,n))}function mk(e){return function(){var n=this.parentNode;for(var a in this.__transition)if(+a!==e)return;n&&n.removeChild(this)}}function gk(){return this.on("end.remove",mk(this._id))}function _k(e){var n=this._name,a=this._id;typeof e!="function"&&(e=P_(e));for(var d=this._groups,w=d.length,M=new Array(w),P=0;P<w;++P)for(var c=d[P],U=c.length,O=M[P]=new Array(U),j,W,J=0;J<U;++J)(j=c[J])&&(W=e.call(j,j.__data__,J,c))&&("__data__"in j&&(W.__data__=j.__data__),O[J]=W,pm(O[J],n,a,J,O,Ll(j,a)));return new Pu(M,this._parents,n,a)}function yk(e){var n=this._name,a=this._id;typeof e!="function"&&(e=_x(e));for(var d=this._groups,w=d.length,M=[],P=[],c=0;c<w;++c)for(var U=d[c],O=U.length,j,W=0;W<O;++W)if(j=U[W]){for(var J=e.call(j,j.__data__,W,U),ae,be=Ll(j,a),Ze=0,xe=J.length;Ze<xe;++Ze)(ae=J[Ze])&&pm(ae,n,a,Ze,J,be);M.push(J),P.push(j)}return new Pu(M,P,n,a)}var vk=Df.prototype.constructor;function xk(){return new vk(this._groups,this._parents)}function wk(e,n){var a,d,w;return function(){var M=Nc(this,e),P=(this.style.removeProperty(e),Nc(this,e));return M===P?null:M===a&&P===d?w:w=n(a=M,d=P)}}function Vx(e){return function(){this.style.removeProperty(e)}}function bk(e,n,a){var d,w=a+"",M;return function(){var P=Nc(this,e);return P===w?null:P===d?M:M=n(d=P,a)}}function kk(e,n,a){var d,w,M;return function(){var P=Nc(this,e),c=a(this),U=c+"";return c==null&&(U=c=(this.style.removeProperty(e),Nc(this,e))),P===U?null:P===d&&U===w?M:(w=U,M=n(d=P,c))}}function Ek(e,n){var a,d,w,M="style."+n,P="end."+M,c;return function(){var U=iu(this,e),O=U.on,j=U.value[M]==null?c||(c=Vx(n)):void 0;(O!==a||w!==j)&&(d=(a=O).copy()).on(P,w=j),U.on=d}}function Mk(e,n,a){var d=(e+="")=="transform"?C6:Nx;return n==null?this.styleTween(e,wk(e,d)).on("end.style."+e,Vx(e)):typeof n=="function"?this.styleTween(e,kk(e,d,V_(this,"style."+e,n))).each(Ek(this._id,e)):this.styleTween(e,bk(e,d,n),a).on("end.style."+e,null)}function Tk(e,n,a){return function(d){this.style.setProperty(e,n.call(this,d),a)}}function Sk(e,n,a){var d,w;function M(){var P=n.apply(this,arguments);return P!==w&&(d=(w=P)&&Tk(e,P,a)),d}return M._value=n,M}function Ck(e,n,a){var d="style."+(e+="");if(arguments.length<2)return(d=this.tween(d))&&d._value;if(n==null)return this.tween(d,null);if(typeof n!="function")throw new Error;return this.tween(d,Sk(e,n,a??""))}function Ik(e){return function(){this.textContent=e}}function Bk(e){return function(){var n=e(this);this.textContent=n??""}}function Dk(e){return this.tween("text",typeof e=="function"?Bk(V_(this,"text",e)):Ik(e==null?"":e+""))}function Pk(e){return function(n){this.textContent=e.call(this,n)}}function zk(e){var n,a;function d(){var w=e.apply(this,arguments);return w!==a&&(n=(a=w)&&Pk(w)),n}return d._value=e,d}function Lk(e){var n="text";if(arguments.length<1)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;return this.tween(n,zk(e))}function Rk(){for(var e=this._name,n=this._id,a=Ux(),d=this._groups,w=d.length,M=0;M<w;++M)for(var P=d[M],c=P.length,U,O=0;O<c;++O)if(U=P[O]){var j=Ll(U,n);pm(U,e,a,O,P,{time:j.time+j.delay+j.duration,delay:0,duration:j.duration,ease:j.ease})}return new Pu(d,this._parents,e,a)}function Fk(){var e,n,a=this,d=a._id,w=a.size();return new Promise(function(M,P){var c={value:P},U={value:function(){--w===0&&M()}};a.each(function(){var O=iu(this,d),j=O.on;j!==e&&(n=(e=j).copy(),n._.cancel.push(c),n._.interrupt.push(c),n._.end.push(U)),O.on=n}),w===0&&M()})}var Ok=0;function Pu(e,n,a,d){this._groups=e,this._parents=n,this._name=a,this._id=d}function Ux(){return++Ok}var ku=Df.prototype;Pu.prototype={constructor:Pu,select:_k,selectAll:yk,selectChild:ku.selectChild,selectChildren:ku.selectChildren,filter:ck,merge:hk,selection:xk,transition:Rk,call:ku.call,nodes:ku.nodes,node:ku.node,size:ku.size,empty:ku.empty,each:ku.each,on:pk,attr:W6,attrTween:ek,style:Mk,styleTween:Ck,text:Dk,textTween:Lk,remove:gk,tween:Q6,delay:ik,duration:sk,ease:ak,easeVarying:uk,end:Fk,[Symbol.iterator]:ku[Symbol.iterator]};function Nk(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Vk={time:null,delay:0,duration:250,ease:Nk};function Uk(e,n){for(var a;!(a=e.__transition)||!(a=a[n]);)if(!(e=e.parentNode))throw new Error(`transition ${n} not found`);return a}function Qk(e){var n,a;e instanceof Pu?(n=e._id,e=e._name):(n=Ux(),(a=Vk).time=O_(),e=e==null?null:e+"");for(var d=this._groups,w=d.length,M=0;M<w;++M)for(var P=d[M],c=P.length,U,O=0;O<c;++O)(U=P[O])&&pm(U,e,n,O,P,a||Uk(U,n));return new Pu(d,this._parents,e,n)}Df.prototype.interrupt=N6;Df.prototype.transition=Qk;const q1=Math.PI,Z1=2*q1,M0=1e-6,Gk=Z1-M0;function Qx(e){this._+=e[0];for(let n=1,a=e.length;n<a;++n)this._+=arguments[n]+e[n]}function qk(e){let n=Math.floor(e);if(!(n>=0))throw new Error(`invalid digits: ${e}`);if(n>15)return Qx;const a=10**n;return function(d){this._+=d[0];for(let w=1,M=d.length;w<M;++w)this._+=Math.round(arguments[w]*a)/a+d[w]}}let Zk=class{constructor(n){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=n==null?Qx:qk(n)}moveTo(n,a){this._append`M${this._x0=this._x1=+n},${this._y0=this._y1=+a}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(n,a){this._append`L${this._x1=+n},${this._y1=+a}`}quadraticCurveTo(n,a,d,w){this._append`Q${+n},${+a},${this._x1=+d},${this._y1=+w}`}bezierCurveTo(n,a,d,w,M,P){this._append`C${+n},${+a},${+d},${+w},${this._x1=+M},${this._y1=+P}`}arcTo(n,a,d,w,M){if(n=+n,a=+a,d=+d,w=+w,M=+M,M<0)throw new Error(`negative radius: ${M}`);let P=this._x1,c=this._y1,U=d-n,O=w-a,j=P-n,W=c-a,J=j*j+W*W;if(this._x1===null)this._append`M${this._x1=n},${this._y1=a}`;else if(J>M0)if(!(Math.abs(W*U-O*j)>M0)||!M)this._append`L${this._x1=n},${this._y1=a}`;else{let ae=d-P,be=w-c,Ze=U*U+O*O,xe=ae*ae+be*be,Ce=Math.sqrt(Ze),je=Math.sqrt(J),Qe=M*Math.tan((q1-Math.acos((Ze+J-xe)/(2*Ce*je)))/2),nt=Qe/je,it=Qe/Ce;Math.abs(nt-1)>M0&&this._append`L${n+nt*j},${a+nt*W}`,this._append`A${M},${M},0,0,${+(W*ae>j*be)},${this._x1=n+it*U},${this._y1=a+it*O}`}}arc(n,a,d,w,M,P){if(n=+n,a=+a,d=+d,P=!!P,d<0)throw new Error(`negative radius: ${d}`);let c=d*Math.cos(w),U=d*Math.sin(w),O=n+c,j=a+U,W=1^P,J=P?w-M:M-w;this._x1===null?this._append`M${O},${j}`:(Math.abs(this._x1-O)>M0||Math.abs(this._y1-j)>M0)&&this._append`L${O},${j}`,d&&(J<0&&(J=J%Z1+Z1),J>Gk?this._append`A${d},${d},0,1,${W},${n-c},${a-U}A${d},${d},0,1,${W},${this._x1=O},${this._y1=j}`:J>M0&&this._append`A${d},${d},0,${+(J>=q1)},${W},${this._x1=n+d*Math.cos(M)},${this._y1=a+d*Math.sin(M)}`)}rect(n,a,d,w){this._append`M${this._x0=this._x1=+n},${this._y0=this._y1=+a}h${d=+d}v${+w}h${-d}Z`}toString(){return this._}};function Hk(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function $p(e,n){if((a=(e=n?e.toExponential(n-1):e.toExponential()).indexOf("e"))<0)return null;var a,d=e.slice(0,a);return[d.length>1?d[0]+d.slice(2):d,+e.slice(a+1)]}function Uc(e){return e=$p(Math.abs(e)),e?e[1]:NaN}function $k(e,n){return function(a,d){for(var w=a.length,M=[],P=0,c=e[0],U=0;w>0&&c>0&&(U+c+1>d&&(c=Math.max(1,d-U)),M.push(a.substring(w-=c,w+c)),!((U+=c+1)>d));)c=e[P=(P+1)%e.length];return M.reverse().join(n)}}function jk(e){return function(n){return n.replace(/[0-9]/g,function(a){return e[+a]})}}var Wk=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function jp(e){if(!(n=Wk.exec(e)))throw new Error("invalid format: "+e);var n;return new U_({fill:n[1],align:n[2],sign:n[3],symbol:n[4],zero:n[5],width:n[6],comma:n[7],precision:n[8]&&n[8].slice(1),trim:n[9],type:n[10]})}jp.prototype=U_.prototype;function U_(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}U_.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Yk(e){e:for(var n=e.length,a=1,d=-1,w;a<n;++a)switch(e[a]){case".":d=w=a;break;case"0":d===0&&(d=a),w=a;break;default:if(!+e[a])break e;d>0&&(d=0);break}return d>0?e.slice(0,d)+e.slice(w+1):e}var Gx;function Xk(e,n){var a=$p(e,n);if(!a)return e+"";var d=a[0],w=a[1],M=w-(Gx=Math.max(-8,Math.min(8,Math.floor(w/3)))*3)+1,P=d.length;return M===P?d:M>P?d+new Array(M-P+1).join("0"):M>0?d.slice(0,M)+"."+d.slice(M):"0."+new Array(1-M).join("0")+$p(e,Math.max(0,n+M-1))[0]}function dy(e,n){var a=$p(e,n);if(!a)return e+"";var d=a[0],w=a[1];return w<0?"0."+new Array(-w).join("0")+d:d.length>w+1?d.slice(0,w+1)+"."+d.slice(w+1):d+new Array(w-d.length+2).join("0")}const py={"%":(e,n)=>(e*100).toFixed(n),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Hk,e:(e,n)=>e.toExponential(n),f:(e,n)=>e.toFixed(n),g:(e,n)=>e.toPrecision(n),o:e=>Math.round(e).toString(8),p:(e,n)=>dy(e*100,n),r:dy,s:Xk,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function my(e){return e}var gy=Array.prototype.map,_y=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Kk(e){var n=e.grouping===void 0||e.thousands===void 0?my:$k(gy.call(e.grouping,Number),e.thousands+""),a=e.currency===void 0?"":e.currency[0]+"",d=e.currency===void 0?"":e.currency[1]+"",w=e.decimal===void 0?".":e.decimal+"",M=e.numerals===void 0?my:jk(gy.call(e.numerals,String)),P=e.percent===void 0?"%":e.percent+"",c=e.minus===void 0?"":e.minus+"",U=e.nan===void 0?"NaN":e.nan+"";function O(W){W=jp(W);var J=W.fill,ae=W.align,be=W.sign,Ze=W.symbol,xe=W.zero,Ce=W.width,je=W.comma,Qe=W.precision,nt=W.trim,it=W.type;it==="n"?(je=!0,it="g"):py[it]||(Qe===void 0&&(Qe=12),nt=!0,it="g"),(xe||J==="0"&&ae==="=")&&(xe=!0,J="0",ae="=");var xt=Ze==="$"?a:Ze==="#"&&/[boxX]/.test(it)?"0"+it.toLowerCase():"",Ft=Ze==="$"?d:/[%p]/.test(it)?P:"",It=py[it],nn=/[defgprs%]/.test(it);Qe=Qe===void 0?6:/[gprs]/.test(it)?Math.max(1,Math.min(21,Qe)):Math.max(0,Math.min(20,Qe));function Zt(At){var bt=xt,kt=Ft,De,at,lt;if(it==="c")kt=It(At)+kt,At="";else{At=+At;var Tt=At<0||1/At<0;if(At=isNaN(At)?U:It(Math.abs(At),Qe),nt&&(At=Yk(At)),Tt&&+At==0&&be!=="+"&&(Tt=!1),bt=(Tt?be==="("?be:c:be==="-"||be==="("?"":be)+bt,kt=(it==="s"?_y[8+Gx/3]:"")+kt+(Tt&&be==="("?")":""),nn){for(De=-1,at=At.length;++De<at;)if(lt=At.charCodeAt(De),48>lt||lt>57){kt=(lt===46?w+At.slice(De+1):At.slice(De))+kt,At=At.slice(0,De);break}}}je&&!xe&&(At=n(At,1/0));var Ot=bt.length+At.length+kt.length,Gt=Ot<Ce?new Array(Ce-Ot+1).join(J):"";switch(je&&xe&&(At=n(Gt+At,Gt.length?Ce-kt.length:1/0),Gt=""),ae){case"<":At=bt+At+kt+Gt;break;case"=":At=bt+Gt+At+kt;break;case"^":At=Gt.slice(0,Ot=Gt.length>>1)+bt+At+kt+Gt.slice(Ot);break;default:At=Gt+bt+At+kt;break}return M(At)}return Zt.toString=function(){return W+""},Zt}function j(W,J){var ae=O((W=jp(W),W.type="f",W)),be=Math.max(-8,Math.min(8,Math.floor(Uc(J)/3)))*3,Ze=Math.pow(10,-be),xe=_y[8+be/3];return function(Ce){return ae(Ze*Ce)+xe}}return{format:O,formatPrefix:j}}var fp,qx,Zx;Jk({thousands:",",grouping:[3],currency:["$",""]});function Jk(e){return fp=Kk(e),qx=fp.format,Zx=fp.formatPrefix,fp}function eE(e){return Math.max(0,-Uc(Math.abs(e)))}function tE(e,n){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Uc(n)/3)))*3-Uc(Math.abs(e)))}function nE(e,n){return e=Math.abs(e),n=Math.abs(n)-e,Math.max(0,Uc(n)-Uc(e))+1}function iE(e,n){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(n).domain(e);break}return this}function rE(e){return function(){return e}}function AE(e){return+e}var yy=[0,1];function Bc(e){return e}function H1(e,n){return(n-=e=+e)?function(a){return(a-e)/n}:rE(isNaN(n)?NaN:.5)}function sE(e,n){var a;return e>n&&(a=e,e=n,n=a),function(d){return Math.max(e,Math.min(n,d))}}function oE(e,n,a){var d=e[0],w=e[1],M=n[0],P=n[1];return w<d?(d=H1(w,d),M=a(P,M)):(d=H1(d,w),M=a(M,P)),function(c){return M(d(c))}}function aE(e,n,a){var d=Math.min(e.length,n.length)-1,w=new Array(d),M=new Array(d),P=-1;for(e[d]<e[0]&&(e=e.slice().reverse(),n=n.slice().reverse());++P<d;)w[P]=H1(e[P],e[P+1]),M[P]=a(n[P],n[P+1]);return function(c){var U=l5(e,c,1,d)-1;return M[U](w[U](c))}}function lE(e,n){return n.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function uE(){var e=yy,n=yy,a=F_,d,w,M,P=Bc,c,U,O;function j(){var J=Math.min(e.length,n.length);return P!==Bc&&(P=sE(e[0],e[J-1])),c=J>2?aE:oE,U=O=null,W}function W(J){return J==null||isNaN(J=+J)?M:(U||(U=c(e.map(d),n,a)))(d(P(J)))}return W.invert=function(J){return P(w((O||(O=c(n,e.map(d),Tl)))(J)))},W.domain=function(J){return arguments.length?(e=Array.from(J,AE),j()):e.slice()},W.range=function(J){return arguments.length?(n=Array.from(J),j()):n.slice()},W.rangeRound=function(J){return n=Array.from(J),a=M6,j()},W.clamp=function(J){return arguments.length?(P=J?!0:Bc,j()):P!==Bc},W.interpolate=function(J){return arguments.length?(a=J,j()):a},W.unknown=function(J){return arguments.length?(M=J,W):M},function(J,ae){return d=J,w=ae,j()}}function cE(){return uE()(Bc,Bc)}function hE(e,n,a,d){var w=d5(e,n,a),M;switch(d=jp(d??",f"),d.type){case"s":{var P=Math.max(Math.abs(e),Math.abs(n));return d.precision==null&&!isNaN(M=tE(w,P))&&(d.precision=M),Zx(d,P)}case"":case"e":case"g":case"p":case"r":{d.precision==null&&!isNaN(M=nE(w,Math.max(Math.abs(e),Math.abs(n))))&&(d.precision=M-(d.type==="e"));break}case"f":case"%":{d.precision==null&&!isNaN(M=eE(w))&&(d.precision=M-(d.type==="%")*2);break}}return qx(d)}function fE(e){var n=e.domain;return e.ticks=function(a){var d=n();return f5(d[0],d[d.length-1],a??10)},e.tickFormat=function(a,d){var w=n();return hE(w[0],w[w.length-1],a??10,d)},e.nice=function(a){a==null&&(a=10);var d=n(),w=0,M=d.length-1,P=d[w],c=d[M],U,O,j=10;for(c<P&&(O=P,P=c,c=O,O=w,w=M,M=O);j-- >0;){if(O=L1(P,c,a),O===U)return d[w]=P,d[M]=c,n(d);if(O>0)P=Math.floor(P/O)*O,c=Math.ceil(c/O)*O;else if(O<0)P=Math.ceil(P*O)/O,c=Math.floor(c*O)/O;else break;U=O}return e},e}function $1(){var e=cE();return e.copy=function(){return lE(e,$1())},iE.apply(e,arguments),fE(e)}function gs(e){return function(){return e}}function Hx(e){let n=3;return e.digits=function(a){if(!arguments.length)return n;if(a==null)n=null;else{const d=Math.floor(a);if(!(d>=0))throw new RangeError(`invalid digits: ${a}`);n=d}return e},()=>new Zk(n)}function $x(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function jx(e){this._context=e}jx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,n){switch(e=+e,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break;case 1:this._point=2;default:this._context.lineTo(e,n);break}}};function Wx(e){return new jx(e)}function Yx(e){return e[0]}function Xx(e){return e[1]}function Cc(e,n){var a=gs(!0),d=null,w=Wx,M=null,P=Hx(c);e=typeof e=="function"?e:e===void 0?Yx:gs(e),n=typeof n=="function"?n:n===void 0?Xx:gs(n);function c(U){var O,j=(U=$x(U)).length,W,J=!1,ae;for(d==null&&(M=w(ae=P())),O=0;O<=j;++O)!(O<j&&a(W=U[O],O,U))===J&&((J=!J)?M.lineStart():M.lineEnd()),J&&M.point(+e(W,O,U),+n(W,O,U));if(ae)return M=null,ae+""||null}return c.x=function(U){return arguments.length?(e=typeof U=="function"?U:gs(+U),c):e},c.y=function(U){return arguments.length?(n=typeof U=="function"?U:gs(+U),c):n},c.defined=function(U){return arguments.length?(a=typeof U=="function"?U:gs(!!U),c):a},c.curve=function(U){return arguments.length?(w=U,d!=null&&(M=w(d)),c):w},c.context=function(U){return arguments.length?(U==null?d=M=null:M=w(d=U),c):d},c}function dE(e,n,a){var d=null,w=gs(!0),M=null,P=Wx,c=null,U=Hx(O);e=typeof e=="function"?e:e===void 0?Yx:gs(+e),n=typeof n=="function"?n:gs(n===void 0?0:+n),a=typeof a=="function"?a:a===void 0?Xx:gs(+a);function O(W){var J,ae,be,Ze=(W=$x(W)).length,xe,Ce=!1,je,Qe=new Array(Ze),nt=new Array(Ze);for(M==null&&(c=P(je=U())),J=0;J<=Ze;++J){if(!(J<Ze&&w(xe=W[J],J,W))===Ce)if(Ce=!Ce)ae=J,c.areaStart(),c.lineStart();else{for(c.lineEnd(),c.lineStart(),be=J-1;be>=ae;--be)c.point(Qe[be],nt[be]);c.lineEnd(),c.areaEnd()}Ce&&(Qe[J]=+e(xe,J,W),nt[J]=+n(xe,J,W),c.point(d?+d(xe,J,W):Qe[J],a?+a(xe,J,W):nt[J]))}if(je)return c=null,je+""||null}function j(){return Cc().defined(w).curve(P).context(M)}return O.x=function(W){return arguments.length?(e=typeof W=="function"?W:gs(+W),d=null,O):e},O.x0=function(W){return arguments.length?(e=typeof W=="function"?W:gs(+W),O):e},O.x1=function(W){return arguments.length?(d=W==null?null:typeof W=="function"?W:gs(+W),O):d},O.y=function(W){return arguments.length?(n=typeof W=="function"?W:gs(+W),a=null,O):n},O.y0=function(W){return arguments.length?(n=typeof W=="function"?W:gs(+W),O):n},O.y1=function(W){return arguments.length?(a=W==null?null:typeof W=="function"?W:gs(+W),O):a},O.lineX0=O.lineY0=function(){return j().x(e).y(n)},O.lineY1=function(){return j().x(e).y(a)},O.lineX1=function(){return j().x(d).y(n)},O.defined=function(W){return arguments.length?(w=typeof W=="function"?W:gs(!!W),O):w},O.curve=function(W){return arguments.length?(P=W,M!=null&&(c=P(M)),O):P},O.context=function(W){return arguments.length?(W==null?M=c=null:c=P(M=W),O):M},O}function vy(e,n,a){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+n)/6,(e._y0+4*e._y1+a)/6)}function Kx(e){this._context=e}Kx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:vy(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,n){switch(e=+e,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:vy(this,e,n);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=n}};function pE(e){return new Kx(e)}function df(e,n,a){this.k=e,this.x=n,this.y=a}df.prototype={constructor:df,scale:function(e){return e===1?this:new df(this.k*e,this.x,this.y)},translate:function(e,n){return e===0&n===0?this:new df(this.k,this.x+this.k*e,this.y+this.k*n)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};df.prototype;function xy(e,n,a){const d=e.slice();return d[30]=n[a],d[32]=a,d}function wy(e){let n,a,d=Fp[e[5]]+"",w,M,P,c,U,O,j,W,J,ae,be,Ze,xe,Ce,je,Qe,nt,it,xt,Ft,It,nn,Zt=I0(e[0]),At=[];for(let bt=0;bt<Zt.length;bt+=1)At[bt]=by(xy(e,Zt,bt));return{c(){n=ar("div"),a=ar("h2"),w=Il(d),M=Il(" by tree size"),P=vs(),c=_s("svg"),U=_s("g"),j=_s("g"),J=_s("path"),be=_s("path"),xe=_s("path"),je=_s("g");for(let bt=0;bt<At.length;bt+=1)At[bt].c();Qe=_s("text"),nt=Il(e[11]),Ft=_s("text"),It=Il(e[12]),this.h()},l(bt){n=lr(bt,"DIV",{class:!0});var kt=ui(n);a=lr(kt,"H2",{class:!0});var De=ui(a);w=Bl(De,d),M=Bl(De," by tree size"),De.forEach(pn),P=xs(kt),c=ys(kt,"svg",{id:!0,viewBox:!0,class:!0});var at=ui(c);U=ys(at,"g",{class:!0,transform:!0}),ui(U).forEach(pn),j=ys(at,"g",{class:!0,transform:!0}),ui(j).forEach(pn),J=ys(at,"path",{class:!0,fill:!0,stroke:!0,"stroke-width":!0,d:!0}),ui(J).forEach(pn),be=ys(at,"path",{class:!0,fill:!0,stroke:!0,"stroke-width":!0,d:!0}),ui(be).forEach(pn),xe=ys(at,"path",{class:!0,fill:!0,stroke:!0,"stroke-width":!0,d:!0}),ui(xe).forEach(pn),je=ys(at,"g",{class:!0,fill:!0,stroke:!0,"stroke-width":!0});var lt=ui(je);for(let Gt=0;Gt<At.length;Gt+=1)At[Gt].l(lt);lt.forEach(pn),Qe=ys(at,"text",{class:!0,"text-anchor":!0,x:!0,y:!0});var Tt=ui(Qe);nt=Bl(Tt,e[11]),Tt.forEach(pn),Ft=ys(at,"text",{class:!0,"text-anchor":!0,transform:!0,x:!0,y:!0});var Ot=ui(Ft);It=Bl(Ot,e[12]),Ot.forEach(pn),at.forEach(pn),kt.forEach(pn),this.h()},h(){Jt(a,"class","svelte-1dkuhva"),Jt(U,"class","scale x svelte-1dkuhva"),Jt(U,"transform",O="translate(0,"+(e[2]-e[3])+")"),Jt(j,"class","scale y svelte-1dkuhva"),Jt(j,"transform",W="translate("+e[4]+",0)"),Jt(J,"class","area"),Jt(J,"fill","#cccccc44"),Jt(J,"stroke","currentColor"),Jt(J,"stroke-width","0"),Jt(J,"d",ae=e[14](e[10])),Jt(be,"class","line"),Jt(be,"fill","none"),Jt(be,"stroke","blue"),Jt(be,"stroke-width","1.5"),Jt(be,"d",Ze=e[15](e[10])),Jt(xe,"class","line"),Jt(xe,"fill","none"),Jt(xe,"stroke","red"),Jt(xe,"stroke-width","1.5"),Jt(xe,"d",Ce=e[16](e[10])),Jt(je,"class","point"),Jt(je,"fill","white"),Jt(je,"stroke","currentColor"),Jt(je,"stroke-width","1.5"),Jt(Qe,"class","axis-label svelte-1dkuhva"),Jt(Qe,"text-anchor","center"),Jt(Qe,"x",it=e[1]/2),Jt(Qe,"y",xt=e[2]+12),Jt(Ft,"class","axis-label svelte-1dkuhva"),Jt(Ft,"text-anchor","center"),Jt(Ft,"transform","rotate(-90)"),Jt(Ft,"x",e[13]),Jt(Ft,"y",-10),Jt(c,"id","viz"),Jt(c,"viewBox",nn=`0 0 ${e[1]} ${e[2]}`),Jt(c,"class","svelte-1dkuhva"),Jt(n,"class","graph-container svelte-1dkuhva")},m(bt,kt){nr(bt,n,kt),jn(n,a),jn(a,w),jn(a,M),jn(n,P),jn(n,c),jn(c,U),e[22](U),jn(c,j),e[23](j),jn(c,J),jn(c,be),jn(c,xe),jn(c,je);for(let De=0;De<At.length;De+=1)At[De]&&At[De].m(je,null);jn(c,Qe),jn(Qe,nt),jn(c,Ft),jn(Ft,It)},p(bt,kt){if(kt[0]&32&&d!==(d=Fp[bt[5]]+"")&&C0(w,d),kt[0]&12&&O!==(O="translate(0,"+(bt[2]-bt[3])+")")&&Jt(U,"transform",O),kt[0]&16&&W!==(W="translate("+bt[4]+",0)")&&Jt(j,"transform",W),kt[0]&1024&&ae!==(ae=bt[14](bt[10]))&&Jt(J,"d",ae),kt[0]&1024&&Ze!==(Ze=bt[15](bt[10]))&&Jt(be,"d",Ze),kt[0]&1024&&Ce!==(Ce=bt[16](bt[10]))&&Jt(xe,"d",Ce),kt[0]&769){Zt=I0(bt[0]);let De;for(De=0;De<Zt.length;De+=1){const at=xy(bt,Zt,De);At[De]?At[De].p(at,kt):(At[De]=by(at),At[De].c(),At[De].m(je,null))}for(;De<At.length;De+=1)At[De].d(1);At.length=Zt.length}kt[0]&2048&&C0(nt,bt[11]),kt[0]&2&&it!==(it=bt[1]/2)&&Jt(Qe,"x",it),kt[0]&4&&xt!==(xt=bt[2]+12)&&Jt(Qe,"y",xt),kt[0]&4096&&C0(It,bt[12]),kt[0]&8192&&Jt(Ft,"x",bt[13]),kt[0]&6&&nn!==(nn=`0 0 ${bt[1]} ${bt[2]}`)&&Jt(c,"viewBox",nn)},d(bt){bt&&pn(n),e[22](null),e[23](null),zp(At,bt)}}}function by(e){let n,a,d;return{c(){n=_s("circle"),this.h()},l(w){n=ys(w,"circle",{key:!0,cx:!0,cy:!0,r:!0,fill:!0,class:!0}),ui(n).forEach(pn),this.h()},h(){Jt(n,"key",e[32]),Jt(n,"cx",a=e[8](e[30][0])),Jt(n,"cy",d=e[9](e[30][1])),Jt(n,"r","5"),Jt(n,"fill","white"),Jt(n,"class","svelte-1dkuhva")},m(w,M){nr(w,n,M)},p(w,M){M[0]&257&&a!==(a=w[8](w[30][0]))&&Jt(n,"cx",a),M[0]&513&&d!==(d=w[9](w[30][1]))&&Jt(n,"cy",d)},d(w){w&&pn(n)}}}function mE(e){let n,a=e[10]&&e[5]&&wy(e);return{c(){a&&a.c(),n=Aa()},l(d){a&&a.l(d),n=Aa()},m(d,w){a&&a.m(d,w),nr(d,n,w)},p(d,w){d[10]&&d[5]?a?a.p(d,w):(a=wy(d),a.c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null)},i:ra,o:ra,d(d){d&&pn(n),a&&a.d(d)}}}function gE(e,n,a){let{data:d}=n,{point:w}=n,{width:M=640}=n,{height:P=400}=n,{marginTop:c=20}=n,{marginRight:U=20}=n,{marginBottom:O=30}=n,{marginLeft:j=40}=n,{metric:W}=n,J,ae,be=null,Ze=[0,10],xe=[0,10],Ce="",je="",Qe=0,nt,it,xt;function Ft(De){xt=W4(De),console.log(xt),a(10,be=xt.confidence),a(20,Ze=xt.yAxis),a(21,xe=xt.xAxis),a(11,Ce=xt.xAxisLabel),a(12,je=xt.yAxisLabel),a(13,Qe=It(je))}function It(De){return console.log("label length:",De.length),-1*(P/2)-De.length*2.5}const nn=dE().x(De=>nt(De.x)).y0(De=>it(De.low)).y1(De=>it(De.high));Cc(De=>nt(De.x),De=>it(De.y));const Zt=Cc(De=>nt(De.x),De=>it(De.low)),At=Cc(De=>nt(De.x),De=>it(De.high));Cc(De=>nt(De.x),De=>it(De.y)).curve(pE);function bt(De){Dl[De?"unshift":"push"](()=>{J=De,a(6,J)})}function kt(De){Dl[De?"unshift":"push"](()=>{ae=De,a(7,ae)})}return e.$$set=De=>{"data"in De&&a(17,d=De.data),"point"in De&&a(0,w=De.point),"width"in De&&a(1,M=De.width),"height"in De&&a(2,P=De.height),"marginTop"in De&&a(18,c=De.marginTop),"marginRight"in De&&a(19,U=De.marginRight),"marginBottom"in De&&a(3,O=De.marginBottom),"marginLeft"in De&&a(4,j=De.marginLeft),"metric"in De&&a(5,W=De.metric)},e.$$.update=()=>{e.$$.dirty[0]&32&&(xt=Ft(W)),e.$$.dirty[0]&2621458&&a(8,nt=$1(X2(xe),[j,M-U])),e.$$.dirty[0]&1310732&&a(9,it=$1(X2(Ze),[P-O,c])),e.$$.dirty[0]&768&&Cc((De,at)=>nt(at),it),e.$$.dirty[0]&640&&Zg(ae).call(w5(it)),e.$$.dirty[0]&320&&Zg(J).call(x5(nt)),e.$$.dirty[0]&6&&Zg("svg").append("div").classed("svg-container",!0).append("svg").attr("preserveAspectRatio","xMinYMin meet").attr("viewBox",`0 0 ${M} ${P}`).classed("svg-content-responsive",!0),e.$$.dirty[0]&33&&console.log("relative:",Y4(W,w[0][1],w[0][0]))},[w,M,P,O,j,W,J,ae,nt,it,be,Ce,je,Qe,nn,Zt,At,d,c,U,Ze,xe,bt,kt]}class _E extends io{constructor(n){super(),ro(this,n,gE,mE,ws,{data:17,point:0,width:1,height:2,marginTop:18,marginRight:19,marginBottom:3,marginLeft:4,metric:5},null,[-1,-1])}}function Jx(e,n){return e<n?-1:e>n?1:e>=n?0:NaN}function ew(e){let n=e,a=e;e.length===1&&(n=(P,c)=>e(P)-c,a=yE(e));function d(P,c,U,O){for(U==null&&(U=0),O==null&&(O=P.length);U<O;){const j=U+O>>>1;a(P[j],c)<0?U=j+1:O=j}return U}function w(P,c,U,O){for(U==null&&(U=0),O==null&&(O=P.length);U<O;){const j=U+O>>>1;a(P[j],c)>0?O=j:U=j+1}return U}function M(P,c,U,O){U==null&&(U=0),O==null&&(O=P.length);const j=d(P,c,U,O-1);return j>U&&n(P[j-1],c)>-n(P[j],c)?j-1:j}return{left:d,center:M,right:w}}function yE(e){return(n,a)=>Jx(e(n),a)}function vE(e){return e===null?NaN:+e}const xE=ew(Jx),wE=xE.right;ew(vE).center;var j1=Math.sqrt(50),W1=Math.sqrt(10),Y1=Math.sqrt(2);function bE(e,n,a){var d,w=-1,M,P,c;if(n=+n,e=+e,a=+a,e===n&&a>0)return[e];if((d=n<e)&&(M=e,e=n,n=M),(c=tw(e,n,a))===0||!isFinite(c))return[];if(c>0){let U=Math.round(e/c),O=Math.round(n/c);for(U*c<e&&++U,O*c>n&&--O,P=new Array(M=O-U+1);++w<M;)P[w]=(U+w)*c}else{c=-c;let U=Math.round(e*c),O=Math.round(n*c);for(U/c<e&&++U,O/c>n&&--O,P=new Array(M=O-U+1);++w<M;)P[w]=(U+w)/c}return d&&P.reverse(),P}function tw(e,n,a){var d=(n-e)/Math.max(0,a),w=Math.floor(Math.log(d)/Math.LN10),M=d/Math.pow(10,w);return w>=0?(M>=j1?10:M>=W1?5:M>=Y1?2:1)*Math.pow(10,w):-Math.pow(10,-w)/(M>=j1?10:M>=W1?5:M>=Y1?2:1)}function kE(e,n,a){var d=Math.abs(n-e)/Math.max(0,a),w=Math.pow(10,Math.floor(Math.log(d)/Math.LN10)),M=d/w;return M>=j1?w*=10:M>=W1?w*=5:M>=Y1&&(w*=2),n<e?-w:w}function EE(e,n){let a;if(n===void 0)for(const d of e)d!=null&&(a<d||a===void 0&&d>=d)&&(a=d);else{let d=-1;for(let w of e)(w=n(w,++d,e))!=null&&(a<w||a===void 0&&w>=w)&&(a=w)}return a}var jg=Array.prototype.slice;function ME(e){return e}var kp=1,Wg=2,ky=3,dp=4,Ey=1e-6;function TE(e){return"translate("+e+",0)"}function SE(e){return"translate(0,"+e+")"}function CE(e){return n=>+e(n)}function IE(e,n){return n=Math.max(0,e.bandwidth()-n*2)/2,e.round()&&(n=Math.round(n)),a=>+e(a)+n}function BE(){return!this.__axis}function DE(e,n){var a=[],d=null,w=null,M=6,P=6,c=3,U=typeof window<"u"&&window.devicePixelRatio>1?0:.5,O=e===kp||e===dp?-1:1,j=e===dp||e===Wg?"x":"y",W=e===kp||e===ky?TE:SE;function J(ae){var be=d??(n.ticks?n.ticks.apply(n,a):n.domain()),Ze=w??(n.tickFormat?n.tickFormat.apply(n,a):ME),xe=Math.max(M,0)+c,Ce=n.range(),je=+Ce[0]+U,Qe=+Ce[Ce.length-1]+U,nt=(n.bandwidth?IE:CE)(n.copy(),U),it=ae.selection?ae.selection():ae,xt=it.selectAll(".domain").data([null]),Ft=it.selectAll(".tick").data(be,n).order(),It=Ft.exit(),nn=Ft.enter().append("g").attr("class","tick"),Zt=Ft.select("line"),At=Ft.select("text");xt=xt.merge(xt.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),Ft=Ft.merge(nn),Zt=Zt.merge(nn.append("line").attr("stroke","currentColor").attr(j+"2",O*M)),At=At.merge(nn.append("text").attr("fill","currentColor").attr(j,O*xe).attr("dy",e===kp?"0em":e===ky?"0.71em":"0.32em")),ae!==it&&(xt=xt.transition(ae),Ft=Ft.transition(ae),Zt=Zt.transition(ae),At=At.transition(ae),It=It.transition(ae).attr("opacity",Ey).attr("transform",function(bt){return isFinite(bt=nt(bt))?W(bt+U):this.getAttribute("transform")}),nn.attr("opacity",Ey).attr("transform",function(bt){var kt=this.parentNode.__axis;return W((kt&&isFinite(kt=kt(bt))?kt:nt(bt))+U)})),It.remove(),xt.attr("d",e===dp||e===Wg?P?"M"+O*P+","+je+"H"+U+"V"+Qe+"H"+O*P:"M"+U+","+je+"V"+Qe:P?"M"+je+","+O*P+"V"+U+"H"+Qe+"V"+O*P:"M"+je+","+U+"H"+Qe),Ft.attr("opacity",1).attr("transform",function(bt){return W(nt(bt)+U)}),Zt.attr(j+"2",O*M),At.attr(j,O*xe).text(Ze),it.filter(BE).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===Wg?"start":e===dp?"end":"middle"),it.each(function(){this.__axis=nt})}return J.scale=function(ae){return arguments.length?(n=ae,J):n},J.ticks=function(){return a=jg.call(arguments),J},J.tickArguments=function(ae){return arguments.length?(a=ae==null?[]:jg.call(ae),J):a.slice()},J.tickValues=function(ae){return arguments.length?(d=ae==null?null:jg.call(ae),J):d&&d.slice()},J.tickFormat=function(ae){return arguments.length?(w=ae,J):w},J.tickSize=function(ae){return arguments.length?(M=P=+ae,J):M},J.tickSizeInner=function(ae){return arguments.length?(M=+ae,J):M},J.tickSizeOuter=function(ae){return arguments.length?(P=+ae,J):P},J.tickPadding=function(ae){return arguments.length?(c=+ae,J):c},J.offset=function(ae){return arguments.length?(U=+ae,J):U},J}function PE(e){return DE(kp,e)}var zE={value:()=>{}};function mm(){for(var e=0,n=arguments.length,a={},d;e<n;++e){if(!(d=arguments[e]+"")||d in a||/[\s.]/.test(d))throw new Error("illegal type: "+d);a[d]=[]}return new Ep(a)}function Ep(e){this._=e}function LE(e,n){return e.trim().split(/^|\s+/).map(function(a){var d="",w=a.indexOf(".");if(w>=0&&(d=a.slice(w+1),a=a.slice(0,w)),a&&!n.hasOwnProperty(a))throw new Error("unknown type: "+a);return{type:a,name:d}})}Ep.prototype=mm.prototype={constructor:Ep,on:function(e,n){var a=this._,d=LE(e+"",a),w,M=-1,P=d.length;if(arguments.length<2){for(;++M<P;)if((w=(e=d[M]).type)&&(w=RE(a[w],e.name)))return w;return}if(n!=null&&typeof n!="function")throw new Error("invalid callback: "+n);for(;++M<P;)if(w=(e=d[M]).type)a[w]=My(a[w],e.name,n);else if(n==null)for(w in a)a[w]=My(a[w],e.name,null);return this},copy:function(){var e={},n=this._;for(var a in n)e[a]=n[a].slice();return new Ep(e)},call:function(e,n){if((w=arguments.length-2)>0)for(var a=new Array(w),d=0,w,M;d<w;++d)a[d]=arguments[d+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(M=this._[e],d=0,w=M.length;d<w;++d)M[d].value.apply(n,a)},apply:function(e,n,a){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var d=this._[e],w=0,M=d.length;w<M;++w)d[w].value.apply(n,a)}};function RE(e,n){for(var a=0,d=e.length,w;a<d;++a)if((w=e[a]).name===n)return w.value}function My(e,n,a){for(var d=0,w=e.length;d<w;++d)if(e[d].name===n){e[d]=zE,e=e.slice(0,d).concat(e.slice(d+1));break}return a!=null&&e.push({name:n,value:a}),e}var X1="http://www.w3.org/1999/xhtml";const Ty={svg:"http://www.w3.org/2000/svg",xhtml:X1,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function gm(e){var n=e+="",a=n.indexOf(":");return a>=0&&(n=e.slice(0,a))!=="xmlns"&&(e=e.slice(a+1)),Ty.hasOwnProperty(n)?{space:Ty[n],local:e}:e}function FE(e){return function(){var n=this.ownerDocument,a=this.namespaceURI;return a===X1&&n.documentElement.namespaceURI===X1?n.createElement(e):n.createElementNS(a,e)}}function OE(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Q_(e){var n=gm(e);return(n.local?OE:FE)(n)}function NE(){}function G_(e){return e==null?NE:function(){return this.querySelector(e)}}function VE(e){typeof e!="function"&&(e=G_(e));for(var n=this._groups,a=n.length,d=new Array(a),w=0;w<a;++w)for(var M=n[w],P=M.length,c=d[w]=new Array(P),U,O,j=0;j<P;++j)(U=M[j])&&(O=e.call(U,U.__data__,j,M))&&("__data__"in U&&(O.__data__=U.__data__),c[j]=O);return new sa(d,this._parents)}function nw(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function UE(){return[]}function iw(e){return e==null?UE:function(){return this.querySelectorAll(e)}}function QE(e){return function(){var n=e.apply(this,arguments);return n==null?[]:nw(n)}}function GE(e){typeof e=="function"?e=QE(e):e=iw(e);for(var n=this._groups,a=n.length,d=[],w=[],M=0;M<a;++M)for(var P=n[M],c=P.length,U,O=0;O<c;++O)(U=P[O])&&(d.push(e.call(U,U.__data__,O,P)),w.push(U));return new sa(d,w)}function rw(e){return function(){return this.matches(e)}}function Aw(e){return function(n){return n.matches(e)}}var qE=Array.prototype.find;function ZE(e){return function(){return qE.call(this.children,e)}}function HE(){return this.firstElementChild}function $E(e){return this.select(e==null?HE:ZE(typeof e=="function"?e:Aw(e)))}var jE=Array.prototype.filter;function WE(){return this.children}function YE(e){return function(){return jE.call(this.children,e)}}function XE(e){return this.selectAll(e==null?WE:YE(typeof e=="function"?e:Aw(e)))}function KE(e){typeof e!="function"&&(e=rw(e));for(var n=this._groups,a=n.length,d=new Array(a),w=0;w<a;++w)for(var M=n[w],P=M.length,c=d[w]=[],U,O=0;O<P;++O)(U=M[O])&&e.call(U,U.__data__,O,M)&&c.push(U);return new sa(d,this._parents)}function sw(e){return new Array(e.length)}function JE(){return new sa(this._enter||this._groups.map(sw),this._parents)}function Wp(e,n){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=n}Wp.prototype={constructor:Wp,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,n){return this._parent.insertBefore(e,n)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function eM(e){return function(){return e}}function tM(e,n,a,d,w,M){for(var P=0,c,U=n.length,O=M.length;P<O;++P)(c=n[P])?(c.__data__=M[P],d[P]=c):a[P]=new Wp(e,M[P]);for(;P<U;++P)(c=n[P])&&(w[P]=c)}function nM(e,n,a,d,w,M,P){var c,U,O=new Map,j=n.length,W=M.length,J=new Array(j),ae;for(c=0;c<j;++c)(U=n[c])&&(J[c]=ae=P.call(U,U.__data__,c,n)+"",O.has(ae)?w[c]=U:O.set(ae,U));for(c=0;c<W;++c)ae=P.call(e,M[c],c,M)+"",(U=O.get(ae))?(d[c]=U,U.__data__=M[c],O.delete(ae)):a[c]=new Wp(e,M[c]);for(c=0;c<j;++c)(U=n[c])&&O.get(J[c])===U&&(w[c]=U)}function iM(e){return e.__data__}function rM(e,n){if(!arguments.length)return Array.from(this,iM);var a=n?nM:tM,d=this._parents,w=this._groups;typeof e!="function"&&(e=eM(e));for(var M=w.length,P=new Array(M),c=new Array(M),U=new Array(M),O=0;O<M;++O){var j=d[O],W=w[O],J=W.length,ae=nw(e.call(j,j&&j.__data__,O,d)),be=ae.length,Ze=c[O]=new Array(be),xe=P[O]=new Array(be),Ce=U[O]=new Array(J);a(j,W,Ze,xe,Ce,ae,n);for(var je=0,Qe=0,nt,it;je<be;++je)if(nt=Ze[je]){for(je>=Qe&&(Qe=je+1);!(it=xe[Qe])&&++Qe<be;);nt._next=it||null}}return P=new sa(P,d),P._enter=c,P._exit=U,P}function AM(){return new sa(this._exit||this._groups.map(sw),this._parents)}function sM(e,n,a){var d=this.enter(),w=this,M=this.exit();return d=typeof e=="function"?e(d):d.append(e+""),n!=null&&(w=n(w)),a==null?M.remove():a(M),d&&w?d.merge(w).order():w}function oM(e){if(!(e instanceof sa))throw new Error("invalid merge");for(var n=this._groups,a=e._groups,d=n.length,w=a.length,M=Math.min(d,w),P=new Array(d),c=0;c<M;++c)for(var U=n[c],O=a[c],j=U.length,W=P[c]=new Array(j),J,ae=0;ae<j;++ae)(J=U[ae]||O[ae])&&(W[ae]=J);for(;c<d;++c)P[c]=n[c];return new sa(P,this._parents)}function aM(){for(var e=this._groups,n=-1,a=e.length;++n<a;)for(var d=e[n],w=d.length-1,M=d[w],P;--w>=0;)(P=d[w])&&(M&&P.compareDocumentPosition(M)^4&&M.parentNode.insertBefore(P,M),M=P);return this}function lM(e){e||(e=uM);function n(W,J){return W&&J?e(W.__data__,J.__data__):!W-!J}for(var a=this._groups,d=a.length,w=new Array(d),M=0;M<d;++M){for(var P=a[M],c=P.length,U=w[M]=new Array(c),O,j=0;j<c;++j)(O=P[j])&&(U[j]=O);U.sort(n)}return new sa(w,this._parents).order()}function uM(e,n){return e<n?-1:e>n?1:e>=n?0:NaN}function cM(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function hM(){return Array.from(this)}function fM(){for(var e=this._groups,n=0,a=e.length;n<a;++n)for(var d=e[n],w=0,M=d.length;w<M;++w){var P=d[w];if(P)return P}return null}function dM(){let e=0;for(const n of this)++e;return e}function pM(){return!this.node()}function mM(e){for(var n=this._groups,a=0,d=n.length;a<d;++a)for(var w=n[a],M=0,P=w.length,c;M<P;++M)(c=w[M])&&e.call(c,c.__data__,M,w);return this}function gM(e){return function(){this.removeAttribute(e)}}function _M(e){return function(){this.removeAttributeNS(e.space,e.local)}}function yM(e,n){return function(){this.setAttribute(e,n)}}function vM(e,n){return function(){this.setAttributeNS(e.space,e.local,n)}}function xM(e,n){return function(){var a=n.apply(this,arguments);a==null?this.removeAttribute(e):this.setAttribute(e,a)}}function wM(e,n){return function(){var a=n.apply(this,arguments);a==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,a)}}function bM(e,n){var a=gm(e);if(arguments.length<2){var d=this.node();return a.local?d.getAttributeNS(a.space,a.local):d.getAttribute(a)}return this.each((n==null?a.local?_M:gM:typeof n=="function"?a.local?wM:xM:a.local?vM:yM)(a,n))}function ow(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function kM(e){return function(){this.style.removeProperty(e)}}function EM(e,n,a){return function(){this.style.setProperty(e,n,a)}}function MM(e,n,a){return function(){var d=n.apply(this,arguments);d==null?this.style.removeProperty(e):this.style.setProperty(e,d,a)}}function TM(e,n,a){return arguments.length>1?this.each((n==null?kM:typeof n=="function"?MM:EM)(e,n,a??"")):Qc(this.node(),e)}function Qc(e,n){return e.style.getPropertyValue(n)||ow(e).getComputedStyle(e,null).getPropertyValue(n)}function SM(e){return function(){delete this[e]}}function CM(e,n){return function(){this[e]=n}}function IM(e,n){return function(){var a=n.apply(this,arguments);a==null?delete this[e]:this[e]=a}}function BM(e,n){return arguments.length>1?this.each((n==null?SM:typeof n=="function"?IM:CM)(e,n)):this.node()[e]}function aw(e){return e.trim().split(/^|\s+/)}function q_(e){return e.classList||new lw(e)}function lw(e){this._node=e,this._names=aw(e.getAttribute("class")||"")}lw.prototype={add:function(e){var n=this._names.indexOf(e);n<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var n=this._names.indexOf(e);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function uw(e,n){for(var a=q_(e),d=-1,w=n.length;++d<w;)a.add(n[d])}function cw(e,n){for(var a=q_(e),d=-1,w=n.length;++d<w;)a.remove(n[d])}function DM(e){return function(){uw(this,e)}}function PM(e){return function(){cw(this,e)}}function zM(e,n){return function(){(n.apply(this,arguments)?uw:cw)(this,e)}}function LM(e,n){var a=aw(e+"");if(arguments.length<2){for(var d=q_(this.node()),w=-1,M=a.length;++w<M;)if(!d.contains(a[w]))return!1;return!0}return this.each((typeof n=="function"?zM:n?DM:PM)(a,n))}function RM(){this.textContent=""}function FM(e){return function(){this.textContent=e}}function OM(e){return function(){var n=e.apply(this,arguments);this.textContent=n??""}}function NM(e){return arguments.length?this.each(e==null?RM:(typeof e=="function"?OM:FM)(e)):this.node().textContent}function VM(){this.innerHTML=""}function UM(e){return function(){this.innerHTML=e}}function QM(e){return function(){var n=e.apply(this,arguments);this.innerHTML=n??""}}function GM(e){return arguments.length?this.each(e==null?VM:(typeof e=="function"?QM:UM)(e)):this.node().innerHTML}function qM(){this.nextSibling&&this.parentNode.appendChild(this)}function ZM(){return this.each(qM)}function HM(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function $M(){return this.each(HM)}function jM(e){var n=typeof e=="function"?e:Q_(e);return this.select(function(){return this.appendChild(n.apply(this,arguments))})}function WM(){return null}function YM(e,n){var a=typeof e=="function"?e:Q_(e),d=n==null?WM:typeof n=="function"?n:G_(n);return this.select(function(){return this.insertBefore(a.apply(this,arguments),d.apply(this,arguments)||null)})}function XM(){var e=this.parentNode;e&&e.removeChild(this)}function KM(){return this.each(XM)}function JM(){var e=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(e,this.nextSibling):e}function eT(){var e=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(e,this.nextSibling):e}function tT(e){return this.select(e?eT:JM)}function nT(e){return arguments.length?this.property("__data__",e):this.node().__data__}function iT(e){return function(n){e.call(this,n,this.__data__)}}function rT(e){return e.trim().split(/^|\s+/).map(function(n){var a="",d=n.indexOf(".");return d>=0&&(a=n.slice(d+1),n=n.slice(0,d)),{type:n,name:a}})}function AT(e){return function(){var n=this.__on;if(n){for(var a=0,d=-1,w=n.length,M;a<w;++a)M=n[a],(!e.type||M.type===e.type)&&M.name===e.name?this.removeEventListener(M.type,M.listener,M.options):n[++d]=M;++d?n.length=d:delete this.__on}}}function sT(e,n,a){return function(){var d=this.__on,w,M=iT(n);if(d){for(var P=0,c=d.length;P<c;++P)if((w=d[P]).type===e.type&&w.name===e.name){this.removeEventListener(w.type,w.listener,w.options),this.addEventListener(w.type,w.listener=M,w.options=a),w.value=n;return}}this.addEventListener(e.type,M,a),w={type:e.type,name:e.name,value:n,listener:M,options:a},d?d.push(w):this.__on=[w]}}function oT(e,n,a){var d=rT(e+""),w,M=d.length,P;if(arguments.length<2){var c=this.node().__on;if(c){for(var U=0,O=c.length,j;U<O;++U)for(w=0,j=c[U];w<M;++w)if((P=d[w]).type===j.type&&P.name===j.name)return j.value}return}for(c=n?sT:AT,w=0;w<M;++w)this.each(c(d[w],n,a));return this}function hw(e,n,a){var d=ow(e),w=d.CustomEvent;typeof w=="function"?w=new w(n,a):(w=d.document.createEvent("Event"),a?(w.initEvent(n,a.bubbles,a.cancelable),w.detail=a.detail):w.initEvent(n,!1,!1)),e.dispatchEvent(w)}function aT(e,n){return function(){return hw(this,e,n)}}function lT(e,n){return function(){return hw(this,e,n.apply(this,arguments))}}function uT(e,n){return this.each((typeof n=="function"?lT:aT)(e,n))}function*cT(){for(var e=this._groups,n=0,a=e.length;n<a;++n)for(var d=e[n],w=0,M=d.length,P;w<M;++w)(P=d[w])&&(yield P)}var fw=[null];function sa(e,n){this._groups=e,this._parents=n}function zf(){return new sa([[document.documentElement]],fw)}function hT(){return this}sa.prototype=zf.prototype={constructor:sa,select:VE,selectAll:GE,selectChild:$E,selectChildren:XE,filter:KE,data:rM,enter:JE,exit:AM,join:sM,merge:oM,selection:hT,order:aM,sort:lM,call:cM,nodes:hM,node:fM,size:dM,empty:pM,each:mM,attr:bM,style:TM,property:BM,classed:LM,text:NM,html:GM,raise:ZM,lower:$M,append:jM,insert:YM,remove:KM,clone:tT,datum:nT,on:oT,dispatch:uT,[Symbol.iterator]:cT};function Gr(e){return typeof e=="string"?new sa([[document.querySelector(e)]],[document.documentElement]):new sa([[e]],fw)}function fT(e){return Gr(Q_(e).call(document.documentElement))}function dT(e){let n;for(;n=e.sourceEvent;)e=n;return e}function Tu(e,n){if(e=dT(e),n===void 0&&(n=e.currentTarget),n){var a=n.ownerSVGElement||n;if(a.createSVGPoint){var d=a.createSVGPoint();return d.x=e.clientX,d.y=e.clientY,d=d.matrixTransform(n.getScreenCTM().inverse()),[d.x,d.y]}if(n.getBoundingClientRect){var w=n.getBoundingClientRect();return[e.clientX-w.left-n.clientLeft,e.clientY-w.top-n.clientTop]}}return[e.pageX,e.pageY]}function K1(e){e.preventDefault(),e.stopImmediatePropagation()}function dw(e){var n=e.document.documentElement,a=Gr(e).on("dragstart.drag",K1,!0);"onselectstart"in n?a.on("selectstart.drag",K1,!0):(n.__noselect=n.style.MozUserSelect,n.style.MozUserSelect="none")}function pw(e,n){var a=e.document.documentElement,d=Gr(e).on("dragstart.drag",null);n&&(d.on("click.drag",K1,!0),setTimeout(function(){d.on("click.drag",null)},0)),"onselectstart"in a?d.on("selectstart.drag",null):(a.style.MozUserSelect=a.__noselect,delete a.__noselect)}function Z_(e,n,a){e.prototype=n.prototype=a,a.constructor=e}function mw(e,n){var a=Object.create(e.prototype);for(var d in n)a[d]=n[d];return a}function Lf(){}var xf=.7,Yp=1/xf,Lc="\\s*([+-]?\\d+)\\s*",wf="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",eu="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",pT=/^#([0-9a-f]{3,8})$/,mT=new RegExp("^rgb\\("+[Lc,Lc,Lc]+"\\)$"),gT=new RegExp("^rgb\\("+[eu,eu,eu]+"\\)$"),_T=new RegExp("^rgba\\("+[Lc,Lc,Lc,wf]+"\\)$"),yT=new RegExp("^rgba\\("+[eu,eu,eu,wf]+"\\)$"),vT=new RegExp("^hsl\\("+[wf,eu,eu]+"\\)$"),xT=new RegExp("^hsla\\("+[wf,eu,eu,wf]+"\\)$"),Sy={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Z_(Lf,F0,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:Cy,formatHex:Cy,formatHsl:wT,formatRgb:Iy,toString:Iy});function Cy(){return this.rgb().formatHex()}function wT(){return gw(this).formatHsl()}function Iy(){return this.rgb().formatRgb()}function F0(e){var n,a;return e=(e+"").trim().toLowerCase(),(n=pT.exec(e))?(a=n[1].length,n=parseInt(n[1],16),a===6?By(n):a===3?new Ia(n>>8&15|n>>4&240,n>>4&15|n&240,(n&15)<<4|n&15,1):a===8?pp(n>>24&255,n>>16&255,n>>8&255,(n&255)/255):a===4?pp(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|n&240,((n&15)<<4|n&15)/255):null):(n=mT.exec(e))?new Ia(n[1],n[2],n[3],1):(n=gT.exec(e))?new Ia(n[1]*255/100,n[2]*255/100,n[3]*255/100,1):(n=_T.exec(e))?pp(n[1],n[2],n[3],n[4]):(n=yT.exec(e))?pp(n[1]*255/100,n[2]*255/100,n[3]*255/100,n[4]):(n=vT.exec(e))?zy(n[1],n[2]/100,n[3]/100,1):(n=xT.exec(e))?zy(n[1],n[2]/100,n[3]/100,n[4]):Sy.hasOwnProperty(e)?By(Sy[e]):e==="transparent"?new Ia(NaN,NaN,NaN,0):null}function By(e){return new Ia(e>>16&255,e>>8&255,e&255,1)}function pp(e,n,a,d){return d<=0&&(e=n=a=NaN),new Ia(e,n,a,d)}function bT(e){return e instanceof Lf||(e=F0(e)),e?(e=e.rgb(),new Ia(e.r,e.g,e.b,e.opacity)):new Ia}function J1(e,n,a,d){return arguments.length===1?bT(e):new Ia(e,n,a,d??1)}function Ia(e,n,a,d){this.r=+e,this.g=+n,this.b=+a,this.opacity=+d}Z_(Ia,J1,mw(Lf,{brighter:function(e){return e=e==null?Yp:Math.pow(Yp,e),new Ia(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=e==null?xf:Math.pow(xf,e),new Ia(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Dy,formatHex:Dy,formatRgb:Py,toString:Py}));function Dy(){return"#"+Yg(this.r)+Yg(this.g)+Yg(this.b)}function Py(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(e===1?")":", "+e+")")}function Yg(e){return e=Math.max(0,Math.min(255,Math.round(e)||0)),(e<16?"0":"")+e.toString(16)}function zy(e,n,a,d){return d<=0?e=n=a=NaN:a<=0||a>=1?e=n=NaN:n<=0&&(e=NaN),new Kl(e,n,a,d)}function gw(e){if(e instanceof Kl)return new Kl(e.h,e.s,e.l,e.opacity);if(e instanceof Lf||(e=F0(e)),!e)return new Kl;if(e instanceof Kl)return e;e=e.rgb();var n=e.r/255,a=e.g/255,d=e.b/255,w=Math.min(n,a,d),M=Math.max(n,a,d),P=NaN,c=M-w,U=(M+w)/2;return c?(n===M?P=(a-d)/c+(a<d)*6:a===M?P=(d-n)/c+2:P=(n-a)/c+4,c/=U<.5?M+w:2-M-w,P*=60):c=U>0&&U<1?0:P,new Kl(P,c,U,e.opacity)}function kT(e,n,a,d){return arguments.length===1?gw(e):new Kl(e,n,a,d??1)}function Kl(e,n,a,d){this.h=+e,this.s=+n,this.l=+a,this.opacity=+d}Z_(Kl,kT,mw(Lf,{brighter:function(e){return e=e==null?Yp:Math.pow(Yp,e),new Kl(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=e==null?xf:Math.pow(xf,e),new Kl(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+(this.h<0)*360,n=isNaN(e)||isNaN(this.s)?0:this.s,a=this.l,d=a+(a<.5?a:1-a)*n,w=2*a-d;return new Ia(Xg(e>=240?e-240:e+120,w,d),Xg(e,w,d),Xg(e<120?e+240:e-120,w,d),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(e===1?")":", "+e+")")}}));function Xg(e,n,a){return(e<60?n+(a-n)*e/60:e<180?a:e<240?n+(a-n)*(240-e)/60:n)*255}const H_=e=>()=>e;function ET(e,n){return function(a){return e+a*n}}function MT(e,n,a){return e=Math.pow(e,a),n=Math.pow(n,a)-e,a=1/a,function(d){return Math.pow(e+d*n,a)}}function TT(e){return(e=+e)==1?_w:function(n,a){return a-n?MT(n,a,e):H_(isNaN(n)?a:n)}}function _w(e,n){var a=n-e;return a?ET(e,a):H_(isNaN(e)?n:e)}const Xp=function e(n){var a=TT(n);function d(w,M){var P=a((w=J1(w)).r,(M=J1(M)).r),c=a(w.g,M.g),U=a(w.b,M.b),O=_w(w.opacity,M.opacity);return function(j){return w.r=P(j),w.g=c(j),w.b=U(j),w.opacity=O(j),w+""}}return d.gamma=e,d}(1);function ST(e,n){n||(n=[]);var a=e?Math.min(n.length,e.length):0,d=n.slice(),w;return function(M){for(w=0;w<a;++w)d[w]=e[w]*(1-M)+n[w]*M;return d}}function CT(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function IT(e,n){var a=n?n.length:0,d=e?Math.min(a,e.length):0,w=new Array(d),M=new Array(a),P;for(P=0;P<d;++P)w[P]=_m(e[P],n[P]);for(;P<a;++P)M[P]=n[P];return function(c){for(P=0;P<d;++P)M[P]=w[P](c);return M}}function BT(e,n){var a=new Date;return e=+e,n=+n,function(d){return a.setTime(e*(1-d)+n*d),a}}function Sl(e,n){return e=+e,n=+n,function(a){return e*(1-a)+n*a}}function DT(e,n){var a={},d={},w;(e===null||typeof e!="object")&&(e={}),(n===null||typeof n!="object")&&(n={});for(w in n)w in e?a[w]=_m(e[w],n[w]):d[w]=n[w];return function(M){for(w in a)d[w]=a[w](M);return d}}var e_=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Kg=new RegExp(e_.source,"g");function PT(e){return function(){return e}}function zT(e){return function(n){return e(n)+""}}function yw(e,n){var a=e_.lastIndex=Kg.lastIndex=0,d,w,M,P=-1,c=[],U=[];for(e=e+"",n=n+"";(d=e_.exec(e))&&(w=Kg.exec(n));)(M=w.index)>a&&(M=n.slice(a,M),c[P]?c[P]+=M:c[++P]=M),(d=d[0])===(w=w[0])?c[P]?c[P]+=w:c[++P]=w:(c[++P]=null,U.push({i:P,x:Sl(d,w)})),a=Kg.lastIndex;return a<n.length&&(M=n.slice(a),c[P]?c[P]+=M:c[++P]=M),c.length<2?U[0]?zT(U[0].x):PT(n):(n=U.length,function(O){for(var j=0,W;j<n;++j)c[(W=U[j]).i]=W.x(O);return c.join("")})}function _m(e,n){var a=typeof n,d;return n==null||a==="boolean"?H_(n):(a==="number"?Sl:a==="string"?(d=F0(n))?(n=d,Xp):yw:n instanceof F0?Xp:n instanceof Date?BT:CT(n)?ST:Array.isArray(n)?IT:typeof n.valueOf!="function"&&typeof n.toString!="function"||isNaN(n)?DT:Sl)(e,n)}function LT(e,n){return e=+e,n=+n,function(a){return Math.round(e*(1-a)+n*a)}}var Ly=180/Math.PI,t_={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function vw(e,n,a,d,w,M){var P,c,U;return(P=Math.sqrt(e*e+n*n))&&(e/=P,n/=P),(U=e*a+n*d)&&(a-=e*U,d-=n*U),(c=Math.sqrt(a*a+d*d))&&(a/=c,d/=c,U/=c),e*d<n*a&&(e=-e,n=-n,U=-U,P=-P),{translateX:w,translateY:M,rotate:Math.atan2(n,e)*Ly,skewX:Math.atan(U)*Ly,scaleX:P,scaleY:c}}var mp;function RT(e){const n=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return n.isIdentity?t_:vw(n.a,n.b,n.c,n.d,n.e,n.f)}function FT(e){return e==null||(mp||(mp=document.createElementNS("http://www.w3.org/2000/svg","g")),mp.setAttribute("transform",e),!(e=mp.transform.baseVal.consolidate()))?t_:(e=e.matrix,vw(e.a,e.b,e.c,e.d,e.e,e.f))}function xw(e,n,a,d){function w(O){return O.length?O.pop()+" ":""}function M(O,j,W,J,ae,be){if(O!==W||j!==J){var Ze=ae.push("translate(",null,n,null,a);be.push({i:Ze-4,x:Sl(O,W)},{i:Ze-2,x:Sl(j,J)})}else(W||J)&&ae.push("translate("+W+n+J+a)}function P(O,j,W,J){O!==j?(O-j>180?j+=360:j-O>180&&(O+=360),J.push({i:W.push(w(W)+"rotate(",null,d)-2,x:Sl(O,j)})):j&&W.push(w(W)+"rotate("+j+d)}function c(O,j,W,J){O!==j?J.push({i:W.push(w(W)+"skewX(",null,d)-2,x:Sl(O,j)}):j&&W.push(w(W)+"skewX("+j+d)}function U(O,j,W,J,ae,be){if(O!==W||j!==J){var Ze=ae.push(w(ae)+"scale(",null,",",null,")");be.push({i:Ze-4,x:Sl(O,W)},{i:Ze-2,x:Sl(j,J)})}else(W!==1||J!==1)&&ae.push(w(ae)+"scale("+W+","+J+")")}return function(O,j){var W=[],J=[];return O=e(O),j=e(j),M(O.translateX,O.translateY,j.translateX,j.translateY,W,J),P(O.rotate,j.rotate,W,J),c(O.skewX,j.skewX,W,J),U(O.scaleX,O.scaleY,j.scaleX,j.scaleY,W,J),O=j=null,function(ae){for(var be=-1,Ze=J.length,xe;++be<Ze;)W[(xe=J[be]).i]=xe.x(ae);return W.join("")}}}var OT=xw(RT,"px, ","px)","deg)"),NT=xw(FT,", ",")",")"),VT=1e-12;function Ry(e){return((e=Math.exp(e))+1/e)/2}function UT(e){return((e=Math.exp(e))-1/e)/2}function QT(e){return((e=Math.exp(2*e))-1)/(e+1)}const GT=function e(n,a,d){function w(M,P){var c=M[0],U=M[1],O=M[2],j=P[0],W=P[1],J=P[2],ae=j-c,be=W-U,Ze=ae*ae+be*be,xe,Ce;if(Ze<VT)Ce=Math.log(J/O)/n,xe=function(Ft){return[c+Ft*ae,U+Ft*be,O*Math.exp(n*Ft*Ce)]};else{var je=Math.sqrt(Ze),Qe=(J*J-O*O+d*Ze)/(2*O*a*je),nt=(J*J-O*O-d*Ze)/(2*J*a*je),it=Math.log(Math.sqrt(Qe*Qe+1)-Qe),xt=Math.log(Math.sqrt(nt*nt+1)-nt);Ce=(xt-it)/n,xe=function(Ft){var It=Ft*Ce,nn=Ry(it),Zt=O/(a*je)*(nn*QT(n*It+it)-UT(it));return[c+Zt*ae,U+Zt*be,O*nn/Ry(n*It+it)]}}return xe.duration=Ce*1e3*n/Math.SQRT2,xe}return w.rho=function(M){var P=Math.max(.001,+M),c=P*P,U=c*c;return e(P,c,U)},w}(Math.SQRT2,2,4);var Gc=0,pf=0,rf=0,ww=1e3,Kp,mf,Jp=0,O0=0,ym=0,bf=typeof performance=="object"&&performance.now?performance:Date,bw=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function $_(){return O0||(bw(qT),O0=bf.now()+ym)}function qT(){O0=0}function em(){this._call=this._time=this._next=null}em.prototype=kw.prototype={constructor:em,restart:function(e,n,a){if(typeof e!="function")throw new TypeError("callback is not a function");a=(a==null?$_():+a)+(n==null?0:+n),!this._next&&mf!==this&&(mf?mf._next=this:Kp=this,mf=this),this._call=e,this._time=a,n_()},stop:function(){this._call&&(this._call=null,this._time=1/0,n_())}};function kw(e,n,a){var d=new em;return d.restart(e,n,a),d}function ZT(){$_(),++Gc;for(var e=Kp,n;e;)(n=O0-e._time)>=0&&e._call.call(null,n),e=e._next;--Gc}function Fy(){O0=(Jp=bf.now())+ym,Gc=pf=0;try{ZT()}finally{Gc=0,$T(),O0=0}}function HT(){var e=bf.now(),n=e-Jp;n>ww&&(ym-=n,Jp=e)}function $T(){for(var e,n=Kp,a,d=1/0;n;)n._call?(d>n._time&&(d=n._time),e=n,n=n._next):(a=n._next,n._next=null,n=e?e._next=a:Kp=a);mf=e,n_(d)}function n_(e){if(!Gc){pf&&(pf=clearTimeout(pf));var n=e-O0;n>24?(e<1/0&&(pf=setTimeout(Fy,e-bf.now()-ym)),rf&&(rf=clearInterval(rf))):(rf||(Jp=bf.now(),rf=setInterval(HT,ww)),Gc=1,bw(Fy))}}function Oy(e,n,a){var d=new em;return n=n==null?0:+n,d.restart(w=>{d.stop(),e(w+n)},n,a),d}var jT=mm("start","end","cancel","interrupt"),WT=[],Ew=0,Ny=1,i_=2,Mp=3,Vy=4,r_=5,Tp=6;function vm(e,n,a,d,w,M){var P=e.__transition;if(!P)e.__transition={};else if(a in P)return;YT(e,a,{name:n,index:d,group:w,on:jT,tween:WT,time:M.time,delay:M.delay,duration:M.duration,ease:M.ease,timer:null,state:Ew})}function j_(e,n){var a=Rl(e,n);if(a.state>Ew)throw new Error("too late; already scheduled");return a}function ru(e,n){var a=Rl(e,n);if(a.state>Mp)throw new Error("too late; already running");return a}function Rl(e,n){var a=e.__transition;if(!a||!(a=a[n]))throw new Error("transition not found");return a}function YT(e,n,a){var d=e.__transition,w;d[n]=a,a.timer=kw(M,0,a.time);function M(O){a.state=Ny,a.timer.restart(P,a.delay,a.time),a.delay<=O&&P(O-a.delay)}function P(O){var j,W,J,ae;if(a.state!==Ny)return U();for(j in d)if(ae=d[j],ae.name===a.name){if(ae.state===Mp)return Oy(P);ae.state===Vy?(ae.state=Tp,ae.timer.stop(),ae.on.call("interrupt",e,e.__data__,ae.index,ae.group),delete d[j]):+j<n&&(ae.state=Tp,ae.timer.stop(),ae.on.call("cancel",e,e.__data__,ae.index,ae.group),delete d[j])}if(Oy(function(){a.state===Mp&&(a.state=Vy,a.timer.restart(c,a.delay,a.time),c(O))}),a.state=i_,a.on.call("start",e,e.__data__,a.index,a.group),a.state===i_){for(a.state=Mp,w=new Array(J=a.tween.length),j=0,W=-1;j<J;++j)(ae=a.tween[j].value.call(e,e.__data__,a.index,a.group))&&(w[++W]=ae);w.length=W+1}}function c(O){for(var j=O<a.duration?a.ease.call(null,O/a.duration):(a.timer.restart(U),a.state=r_,1),W=-1,J=w.length;++W<J;)w[W].call(e,j);a.state===r_&&(a.on.call("end",e,e.__data__,a.index,a.group),U())}function U(){a.state=Tp,a.timer.stop(),delete d[n];for(var O in d)return;delete e.__transition}}function Rc(e,n){var a=e.__transition,d,w,M=!0,P;if(a){n=n==null?null:n+"";for(P in a){if((d=a[P]).name!==n){M=!1;continue}w=d.state>i_&&d.state<r_,d.state=Tp,d.timer.stop(),d.on.call(w?"interrupt":"cancel",e,e.__data__,d.index,d.group),delete a[P]}M&&delete e.__transition}}function XT(e){return this.each(function(){Rc(this,e)})}function KT(e,n){var a,d;return function(){var w=ru(this,e),M=w.tween;if(M!==a){d=a=M;for(var P=0,c=d.length;P<c;++P)if(d[P].name===n){d=d.slice(),d.splice(P,1);break}}w.tween=d}}function JT(e,n,a){var d,w;if(typeof a!="function")throw new Error;return function(){var M=ru(this,e),P=M.tween;if(P!==d){w=(d=P).slice();for(var c={name:n,value:a},U=0,O=w.length;U<O;++U)if(w[U].name===n){w[U]=c;break}U===O&&w.push(c)}M.tween=w}}function eS(e,n){var a=this._id;if(e+="",arguments.length<2){for(var d=Rl(this.node(),a).tween,w=0,M=d.length,P;w<M;++w)if((P=d[w]).name===e)return P.value;return null}return this.each((n==null?KT:JT)(a,e,n))}function W_(e,n,a){var d=e._id;return e.each(function(){var w=ru(this,d);(w.value||(w.value={}))[n]=a.apply(this,arguments)}),function(w){return Rl(w,d).value[n]}}function Mw(e,n){var a;return(typeof n=="number"?Sl:n instanceof F0?Xp:(a=F0(n))?(n=a,Xp):yw)(e,n)}function tS(e){return function(){this.removeAttribute(e)}}function nS(e){return function(){this.removeAttributeNS(e.space,e.local)}}function iS(e,n,a){var d,w=a+"",M;return function(){var P=this.getAttribute(e);return P===w?null:P===d?M:M=n(d=P,a)}}function rS(e,n,a){var d,w=a+"",M;return function(){var P=this.getAttributeNS(e.space,e.local);return P===w?null:P===d?M:M=n(d=P,a)}}function AS(e,n,a){var d,w,M;return function(){var P,c=a(this),U;return c==null?void this.removeAttribute(e):(P=this.getAttribute(e),U=c+"",P===U?null:P===d&&U===w?M:(w=U,M=n(d=P,c)))}}function sS(e,n,a){var d,w,M;return function(){var P,c=a(this),U;return c==null?void this.removeAttributeNS(e.space,e.local):(P=this.getAttributeNS(e.space,e.local),U=c+"",P===U?null:P===d&&U===w?M:(w=U,M=n(d=P,c)))}}function oS(e,n){var a=gm(e),d=a==="transform"?NT:Mw;return this.attrTween(e,typeof n=="function"?(a.local?sS:AS)(a,d,W_(this,"attr."+e,n)):n==null?(a.local?nS:tS)(a):(a.local?rS:iS)(a,d,n))}function aS(e,n){return function(a){this.setAttribute(e,n.call(this,a))}}function lS(e,n){return function(a){this.setAttributeNS(e.space,e.local,n.call(this,a))}}function uS(e,n){var a,d;function w(){var M=n.apply(this,arguments);return M!==d&&(a=(d=M)&&lS(e,M)),a}return w._value=n,w}function cS(e,n){var a,d;function w(){var M=n.apply(this,arguments);return M!==d&&(a=(d=M)&&aS(e,M)),a}return w._value=n,w}function hS(e,n){var a="attr."+e;if(arguments.length<2)return(a=this.tween(a))&&a._value;if(n==null)return this.tween(a,null);if(typeof n!="function")throw new Error;var d=gm(e);return this.tween(a,(d.local?uS:cS)(d,n))}function fS(e,n){return function(){j_(this,e).delay=+n.apply(this,arguments)}}function dS(e,n){return n=+n,function(){j_(this,e).delay=n}}function pS(e){var n=this._id;return arguments.length?this.each((typeof e=="function"?fS:dS)(n,e)):Rl(this.node(),n).delay}function mS(e,n){return function(){ru(this,e).duration=+n.apply(this,arguments)}}function gS(e,n){return n=+n,function(){ru(this,e).duration=n}}function _S(e){var n=this._id;return arguments.length?this.each((typeof e=="function"?mS:gS)(n,e)):Rl(this.node(),n).duration}function yS(e,n){if(typeof n!="function")throw new Error;return function(){ru(this,e).ease=n}}function vS(e){var n=this._id;return arguments.length?this.each(yS(n,e)):Rl(this.node(),n).ease}function xS(e,n){return function(){var a=n.apply(this,arguments);if(typeof a!="function")throw new Error;ru(this,e).ease=a}}function wS(e){if(typeof e!="function")throw new Error;return this.each(xS(this._id,e))}function bS(e){typeof e!="function"&&(e=rw(e));for(var n=this._groups,a=n.length,d=new Array(a),w=0;w<a;++w)for(var M=n[w],P=M.length,c=d[w]=[],U,O=0;O<P;++O)(U=M[O])&&e.call(U,U.__data__,O,M)&&c.push(U);return new zu(d,this._parents,this._name,this._id)}function kS(e){if(e._id!==this._id)throw new Error;for(var n=this._groups,a=e._groups,d=n.length,w=a.length,M=Math.min(d,w),P=new Array(d),c=0;c<M;++c)for(var U=n[c],O=a[c],j=U.length,W=P[c]=new Array(j),J,ae=0;ae<j;++ae)(J=U[ae]||O[ae])&&(W[ae]=J);for(;c<d;++c)P[c]=n[c];return new zu(P,this._parents,this._name,this._id)}function ES(e){return(e+"").trim().split(/^|\s+/).every(function(n){var a=n.indexOf(".");return a>=0&&(n=n.slice(0,a)),!n||n==="start"})}function MS(e,n,a){var d,w,M=ES(n)?j_:ru;return function(){var P=M(this,e),c=P.on;c!==d&&(w=(d=c).copy()).on(n,a),P.on=w}}function TS(e,n){var a=this._id;return arguments.length<2?Rl(this.node(),a).on.on(e):this.each(MS(a,e,n))}function SS(e){return function(){var n=this.parentNode;for(var a in this.__transition)if(+a!==e)return;n&&n.removeChild(this)}}function CS(){return this.on("end.remove",SS(this._id))}function IS(e){var n=this._name,a=this._id;typeof e!="function"&&(e=G_(e));for(var d=this._groups,w=d.length,M=new Array(w),P=0;P<w;++P)for(var c=d[P],U=c.length,O=M[P]=new Array(U),j,W,J=0;J<U;++J)(j=c[J])&&(W=e.call(j,j.__data__,J,c))&&("__data__"in j&&(W.__data__=j.__data__),O[J]=W,vm(O[J],n,a,J,O,Rl(j,a)));return new zu(M,this._parents,n,a)}function BS(e){var n=this._name,a=this._id;typeof e!="function"&&(e=iw(e));for(var d=this._groups,w=d.length,M=[],P=[],c=0;c<w;++c)for(var U=d[c],O=U.length,j,W=0;W<O;++W)if(j=U[W]){for(var J=e.call(j,j.__data__,W,U),ae,be=Rl(j,a),Ze=0,xe=J.length;Ze<xe;++Ze)(ae=J[Ze])&&vm(ae,n,a,Ze,J,be);M.push(J),P.push(j)}return new zu(M,P,n,a)}var DS=zf.prototype.constructor;function PS(){return new DS(this._groups,this._parents)}function zS(e,n){var a,d,w;return function(){var M=Qc(this,e),P=(this.style.removeProperty(e),Qc(this,e));return M===P?null:M===a&&P===d?w:w=n(a=M,d=P)}}function Tw(e){return function(){this.style.removeProperty(e)}}function LS(e,n,a){var d,w=a+"",M;return function(){var P=Qc(this,e);return P===w?null:P===d?M:M=n(d=P,a)}}function RS(e,n,a){var d,w,M;return function(){var P=Qc(this,e),c=a(this),U=c+"";return c==null&&(U=c=(this.style.removeProperty(e),Qc(this,e))),P===U?null:P===d&&U===w?M:(w=U,M=n(d=P,c))}}function FS(e,n){var a,d,w,M="style."+n,P="end."+M,c;return function(){var U=ru(this,e),O=U.on,j=U.value[M]==null?c||(c=Tw(n)):void 0;(O!==a||w!==j)&&(d=(a=O).copy()).on(P,w=j),U.on=d}}function OS(e,n,a){var d=(e+="")=="transform"?OT:Mw;return n==null?this.styleTween(e,zS(e,d)).on("end.style."+e,Tw(e)):typeof n=="function"?this.styleTween(e,RS(e,d,W_(this,"style."+e,n))).each(FS(this._id,e)):this.styleTween(e,LS(e,d,n),a).on("end.style."+e,null)}function NS(e,n,a){return function(d){this.style.setProperty(e,n.call(this,d),a)}}function VS(e,n,a){var d,w;function M(){var P=n.apply(this,arguments);return P!==w&&(d=(w=P)&&NS(e,P,a)),d}return M._value=n,M}function US(e,n,a){var d="style."+(e+="");if(arguments.length<2)return(d=this.tween(d))&&d._value;if(n==null)return this.tween(d,null);if(typeof n!="function")throw new Error;return this.tween(d,VS(e,n,a??""))}function QS(e){return function(){this.textContent=e}}function GS(e){return function(){var n=e(this);this.textContent=n??""}}function qS(e){return this.tween("text",typeof e=="function"?GS(W_(this,"text",e)):QS(e==null?"":e+""))}function ZS(e){return function(n){this.textContent=e.call(this,n)}}function HS(e){var n,a;function d(){var w=e.apply(this,arguments);return w!==a&&(n=(a=w)&&ZS(w)),n}return d._value=e,d}function $S(e){var n="text";if(arguments.length<1)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;return this.tween(n,HS(e))}function jS(){for(var e=this._name,n=this._id,a=Sw(),d=this._groups,w=d.length,M=0;M<w;++M)for(var P=d[M],c=P.length,U,O=0;O<c;++O)if(U=P[O]){var j=Rl(U,n);vm(U,e,a,O,P,{time:j.time+j.delay+j.duration,delay:0,duration:j.duration,ease:j.ease})}return new zu(d,this._parents,e,a)}function WS(){var e,n,a=this,d=a._id,w=a.size();return new Promise(function(M,P){var c={value:P},U={value:function(){--w===0&&M()}};a.each(function(){var O=ru(this,d),j=O.on;j!==e&&(n=(e=j).copy(),n._.cancel.push(c),n._.interrupt.push(c),n._.end.push(U)),O.on=n}),w===0&&M()})}var YS=0;function zu(e,n,a,d){this._groups=e,this._parents=n,this._name=a,this._id=d}function Sw(){return++YS}var E0=zf.prototype;zu.prototype={constructor:zu,select:IS,selectAll:BS,filter:bS,merge:kS,selection:PS,transition:jS,call:E0.call,nodes:E0.nodes,node:E0.node,size:E0.size,empty:E0.empty,each:E0.each,on:TS,attr:oS,attrTween:hS,style:OS,styleTween:US,text:qS,textTween:$S,remove:CS,tween:eS,delay:pS,duration:_S,ease:vS,easeVarying:wS,end:WS,[Symbol.iterator]:E0[Symbol.iterator]};function XS(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var KS={time:null,delay:0,duration:250,ease:XS};function JS(e,n){for(var a;!(a=e.__transition)||!(a=a[n]);)if(!(e=e.parentNode))throw new Error(`transition ${n} not found`);return a}function eC(e){var n,a;e instanceof zu?(n=e._id,e=e._name):(n=Sw(),(a=KS).time=$_(),e=e==null?null:e+"");for(var d=this._groups,w=d.length,M=0;M<w;++M)for(var P=d[M],c=P.length,U,O=0;O<c;++O)(U=P[O])&&vm(U,e,n,O,P,a||JS(U,n));return new zu(d,this._parents,e,n)}zf.prototype.interrupt=XT;zf.prototype.transition=eC;const Jg=e=>()=>e;function tC(e,{sourceEvent:n,target:a,selection:d,mode:w,dispatch:M}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:a,enumerable:!0,configurable:!0},selection:{value:d,enumerable:!0,configurable:!0},mode:{value:w,enumerable:!0,configurable:!0},_:{value:M}})}function nC(e){e.stopImmediatePropagation()}function e1(e){e.preventDefault(),e.stopImmediatePropagation()}var Uy={name:"drag"},t1={name:"space"},Ec={name:"handle"},Mc={name:"center"};const{abs:Qy,max:Js,min:eo}=Math;function Gy(e){return[+e[0],+e[1]]}function A_(e){return[Gy(e[0]),Gy(e[1])]}var n1={name:"x",handles:["w","e"].map(kf),input:function(e,n){return e==null?null:[[+e[0],n[0][1]],[+e[1],n[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},i1={name:"y",handles:["n","s"].map(kf),input:function(e,n){return e==null?null:[[n[0][0],+e[0]],[n[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},iC={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(kf),input:function(e){return e==null?null:A_(e)},output:function(e){return e}},Eu={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},qy={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},Zy={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},rC={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},AC={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function kf(e){return{type:e}}function sC(e){return!e.ctrlKey&&!e.button}function oC(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function aC(){return navigator.maxTouchPoints||"ontouchstart"in this}function r1(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function lC(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function uC(){return cC(iC)}function cC(e){var n=oC,a=sC,d=aC,w=!0,M=mm("start","brush","end"),P=6,c;function U(xe){var Ce=xe.property("__brush",Ze).selectAll(".overlay").data([kf("overlay")]);Ce.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Eu.overlay).merge(Ce).each(function(){var Qe=r1(this).extent;Gr(this).attr("x",Qe[0][0]).attr("y",Qe[0][1]).attr("width",Qe[1][0]-Qe[0][0]).attr("height",Qe[1][1]-Qe[0][1])}),xe.selectAll(".selection").data([kf("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Eu.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var je=xe.selectAll(".handle").data(e.handles,function(Qe){return Qe.type});je.exit().remove(),je.enter().append("rect").attr("class",function(Qe){return"handle handle--"+Qe.type}).attr("cursor",function(Qe){return Eu[Qe.type]}),xe.each(O).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",J).filter(d).on("touchstart.brush",J).on("touchmove.brush",ae).on("touchend.brush touchcancel.brush",be).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}U.move=function(xe,Ce){xe.tween?xe.on("start.brush",function(je){j(this,arguments).beforestart().start(je)}).on("interrupt.brush end.brush",function(je){j(this,arguments).end(je)}).tween("brush",function(){var je=this,Qe=je.__brush,nt=j(je,arguments),it=Qe.selection,xt=e.input(typeof Ce=="function"?Ce.apply(this,arguments):Ce,Qe.extent),Ft=_m(it,xt);function It(nn){Qe.selection=nn===1&&xt===null?null:Ft(nn),O.call(je),nt.brush()}return it!==null&&xt!==null?It:It(1)}):xe.each(function(){var je=this,Qe=arguments,nt=je.__brush,it=e.input(typeof Ce=="function"?Ce.apply(je,Qe):Ce,nt.extent),xt=j(je,Qe).beforestart();Rc(je),nt.selection=it===null?null:it,O.call(je),xt.start().brush().end()})},U.clear=function(xe){U.move(xe,null)};function O(){var xe=Gr(this),Ce=r1(this).selection;Ce?(xe.selectAll(".selection").style("display",null).attr("x",Ce[0][0]).attr("y",Ce[0][1]).attr("width",Ce[1][0]-Ce[0][0]).attr("height",Ce[1][1]-Ce[0][1]),xe.selectAll(".handle").style("display",null).attr("x",function(je){return je.type[je.type.length-1]==="e"?Ce[1][0]-P/2:Ce[0][0]-P/2}).attr("y",function(je){return je.type[0]==="s"?Ce[1][1]-P/2:Ce[0][1]-P/2}).attr("width",function(je){return je.type==="n"||je.type==="s"?Ce[1][0]-Ce[0][0]+P:P}).attr("height",function(je){return je.type==="e"||je.type==="w"?Ce[1][1]-Ce[0][1]+P:P})):xe.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function j(xe,Ce,je){var Qe=xe.__brush.emitter;return Qe&&(!je||!Qe.clean)?Qe:new W(xe,Ce,je)}function W(xe,Ce,je){this.that=xe,this.args=Ce,this.state=xe.__brush,this.active=0,this.clean=je}W.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(xe,Ce){return this.starting?(this.starting=!1,this.emit("start",xe,Ce)):this.emit("brush",xe),this},brush:function(xe,Ce){return this.emit("brush",xe,Ce),this},end:function(xe,Ce){return--this.active===0&&(delete this.state.emitter,this.emit("end",xe,Ce)),this},emit:function(xe,Ce,je){var Qe=Gr(this.that).datum();M.call(xe,this.that,new tC(xe,{sourceEvent:Ce,target:U,selection:e.output(this.state.selection),mode:je,dispatch:M}),Qe)}};function J(xe){if(c&&!xe.touches||!a.apply(this,arguments))return;var Ce=this,je=xe.target.__data__.type,Qe=(w&&xe.metaKey?je="overlay":je)==="selection"?Uy:w&&xe.altKey?Mc:Ec,nt=e===i1?null:rC[je],it=e===n1?null:AC[je],xt=r1(Ce),Ft=xt.extent,It=xt.selection,nn=Ft[0][0],Zt,At,bt=Ft[0][1],kt,De,at=Ft[1][0],lt,Tt,Ot=Ft[1][1],Gt,_n,hn=0,vn=0,Dn,Qn=nt&&it&&w&&xe.shiftKey,di,xi,Ct=Array.from(xe.touches||[xe],un=>{const Jn=un.identifier;return un=Tu(un,Ce),un.point0=un.slice(),un.identifier=Jn,un});if(je==="overlay"){It&&(Dn=!0);const un=[Ct[0],Ct[1]||Ct[0]];xt.selection=It=[[Zt=e===i1?nn:eo(un[0][0],un[1][0]),kt=e===n1?bt:eo(un[0][1],un[1][1])],[lt=e===i1?at:Js(un[0][0],un[1][0]),Gt=e===n1?Ot:Js(un[0][1],un[1][1])]],Ct.length>1&&Ii()}else Zt=It[0][0],kt=It[0][1],lt=It[1][0],Gt=It[1][1];At=Zt,De=kt,Tt=lt,_n=Gt;var xn=Gr(Ce).attr("pointer-events","none"),Bt=xn.selectAll(".overlay").attr("cursor",Eu[je]);Rc(Ce);var En=j(Ce,arguments,!0).beforestart();if(xe.touches)En.moved=Lt,En.ended=Pn;else{var Gn=Gr(xe.view).on("mousemove.brush",Lt,!0).on("mouseup.brush",Pn,!0);w&&Gn.on("keydown.brush",qi,!0).on("keyup.brush",Ar,!0),dw(xe.view)}O.call(Ce),En.start(xe,Qe.name);function Lt(un){for(const Jn of un.changedTouches||[un])for(const uA of Ct)uA.identifier===Jn.identifier&&(uA.cur=Tu(Jn,Ce));if(Qn&&!di&&!xi&&Ct.length===1){const Jn=Ct[0];Qy(Jn.cur[0]-Jn[0])>Qy(Jn.cur[1]-Jn[1])?xi=!0:di=!0}for(const Jn of Ct)Jn.cur&&(Jn[0]=Jn.cur[0],Jn[1]=Jn.cur[1]);Dn=!0,e1(un),Ii(un)}function Ii(un){const Jn=Ct[0],uA=Jn.point0;var pt;switch(hn=Jn[0]-uA[0],vn=Jn[1]-uA[1],Qe){case t1:case Uy:{nt&&(hn=Js(nn-Zt,eo(at-lt,hn)),At=Zt+hn,Tt=lt+hn),it&&(vn=Js(bt-kt,eo(Ot-Gt,vn)),De=kt+vn,_n=Gt+vn);break}case Ec:{Ct[1]?(nt&&(At=Js(nn,eo(at,Ct[0][0])),Tt=Js(nn,eo(at,Ct[1][0])),nt=1),it&&(De=Js(bt,eo(Ot,Ct[0][1])),_n=Js(bt,eo(Ot,Ct[1][1])),it=1)):(nt<0?(hn=Js(nn-Zt,eo(at-Zt,hn)),At=Zt+hn,Tt=lt):nt>0&&(hn=Js(nn-lt,eo(at-lt,hn)),At=Zt,Tt=lt+hn),it<0?(vn=Js(bt-kt,eo(Ot-kt,vn)),De=kt+vn,_n=Gt):it>0&&(vn=Js(bt-Gt,eo(Ot-Gt,vn)),De=kt,_n=Gt+vn));break}case Mc:{nt&&(At=Js(nn,eo(at,Zt-hn*nt)),Tt=Js(nn,eo(at,lt+hn*nt))),it&&(De=Js(bt,eo(Ot,kt-vn*it)),_n=Js(bt,eo(Ot,Gt+vn*it)));break}}Tt<At&&(nt*=-1,pt=Zt,Zt=lt,lt=pt,pt=At,At=Tt,Tt=pt,je in qy&&Bt.attr("cursor",Eu[je=qy[je]])),_n<De&&(it*=-1,pt=kt,kt=Gt,Gt=pt,pt=De,De=_n,_n=pt,je in Zy&&Bt.attr("cursor",Eu[je=Zy[je]])),xt.selection&&(It=xt.selection),di&&(At=It[0][0],Tt=It[1][0]),xi&&(De=It[0][1],_n=It[1][1]),(It[0][0]!==At||It[0][1]!==De||It[1][0]!==Tt||It[1][1]!==_n)&&(xt.selection=[[At,De],[Tt,_n]],O.call(Ce),En.brush(un,Qe.name))}function Pn(un){if(nC(un),un.touches){if(un.touches.length)return;c&&clearTimeout(c),c=setTimeout(function(){c=null},500)}else pw(un.view,Dn),Gn.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);xn.attr("pointer-events","all"),Bt.attr("cursor",Eu.overlay),xt.selection&&(It=xt.selection),lC(It)&&(xt.selection=null,O.call(Ce)),En.end(un,Qe.name)}function qi(un){switch(un.keyCode){case 16:{Qn=nt&&it;break}case 18:{Qe===Ec&&(nt&&(lt=Tt-hn*nt,Zt=At+hn*nt),it&&(Gt=_n-vn*it,kt=De+vn*it),Qe=Mc,Ii());break}case 32:{(Qe===Ec||Qe===Mc)&&(nt<0?lt=Tt-hn:nt>0&&(Zt=At-hn),it<0?Gt=_n-vn:it>0&&(kt=De-vn),Qe=t1,Bt.attr("cursor",Eu.selection),Ii());break}default:return}e1(un)}function Ar(un){switch(un.keyCode){case 16:{Qn&&(di=xi=Qn=!1,Ii());break}case 18:{Qe===Mc&&(nt<0?lt=Tt:nt>0&&(Zt=At),it<0?Gt=_n:it>0&&(kt=De),Qe=Ec,Ii());break}case 32:{Qe===t1&&(un.altKey?(nt&&(lt=Tt-hn*nt,Zt=At+hn*nt),it&&(Gt=_n-vn*it,kt=De+vn*it),Qe=Mc):(nt<0?lt=Tt:nt>0&&(Zt=At),it<0?Gt=_n:it>0&&(kt=De),Qe=Ec),Bt.attr("cursor",Eu[je]),Ii());break}default:return}e1(un)}}function ae(xe){j(this,arguments).moved(xe)}function be(xe){j(this,arguments).ended(xe)}function Ze(){var xe=this.__brush||{selection:null};return xe.extent=A_(n.apply(this,arguments)),xe.dim=e,xe}return U.extent=function(xe){return arguments.length?(n=typeof xe=="function"?xe:Jg(A_(xe)),U):n},U.filter=function(xe){return arguments.length?(a=typeof xe=="function"?xe:Jg(!!xe),U):a},U.touchable=function(xe){return arguments.length?(d=typeof xe=="function"?xe:Jg(!!xe),U):d},U.handleSize=function(xe){return arguments.length?(P=+xe,U):P},U.keyModifiers=function(xe){return arguments.length?(w=!!xe,U):w},U.on=function(){var xe=M.on.apply(M,arguments);return xe===M?U:xe},U}const s_=Math.PI,o_=2*s_,T0=1e-6,hC=o_-T0;function a_(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Cw(){return new a_}a_.prototype=Cw.prototype={constructor:a_,moveTo:function(e,n){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+n)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,n){this._+="L"+(this._x1=+e)+","+(this._y1=+n)},quadraticCurveTo:function(e,n,a,d){this._+="Q"+ +e+","+ +n+","+(this._x1=+a)+","+(this._y1=+d)},bezierCurveTo:function(e,n,a,d,w,M){this._+="C"+ +e+","+ +n+","+ +a+","+ +d+","+(this._x1=+w)+","+(this._y1=+M)},arcTo:function(e,n,a,d,w){e=+e,n=+n,a=+a,d=+d,w=+w;var M=this._x1,P=this._y1,c=a-e,U=d-n,O=M-e,j=P-n,W=O*O+j*j;if(w<0)throw new Error("negative radius: "+w);if(this._x1===null)this._+="M"+(this._x1=e)+","+(this._y1=n);else if(W>T0)if(!(Math.abs(j*c-U*O)>T0)||!w)this._+="L"+(this._x1=e)+","+(this._y1=n);else{var J=a-M,ae=d-P,be=c*c+U*U,Ze=J*J+ae*ae,xe=Math.sqrt(be),Ce=Math.sqrt(W),je=w*Math.tan((s_-Math.acos((be+W-Ze)/(2*xe*Ce)))/2),Qe=je/Ce,nt=je/xe;Math.abs(Qe-1)>T0&&(this._+="L"+(e+Qe*O)+","+(n+Qe*j)),this._+="A"+w+","+w+",0,0,"+ +(j*J>O*ae)+","+(this._x1=e+nt*c)+","+(this._y1=n+nt*U)}},arc:function(e,n,a,d,w,M){e=+e,n=+n,a=+a,M=!!M;var P=a*Math.cos(d),c=a*Math.sin(d),U=e+P,O=n+c,j=1^M,W=M?d-w:w-d;if(a<0)throw new Error("negative radius: "+a);this._x1===null?this._+="M"+U+","+O:(Math.abs(this._x1-U)>T0||Math.abs(this._y1-O)>T0)&&(this._+="L"+U+","+O),a&&(W<0&&(W=W%o_+o_),W>hC?this._+="A"+a+","+a+",0,1,"+j+","+(e-P)+","+(n-c)+"A"+a+","+a+",0,1,"+j+","+(this._x1=U)+","+(this._y1=O):W>T0&&(this._+="A"+a+","+a+",0,"+ +(W>=s_)+","+j+","+(this._x1=e+a*Math.cos(w))+","+(this._y1=n+a*Math.sin(w))))},rect:function(e,n,a,d){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+n)+"h"+ +a+"v"+ +d+"h"+-a+"Z"},toString:function(){return this._}};function fC(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function tm(e,n){if((a=(e=n?e.toExponential(n-1):e.toExponential()).indexOf("e"))<0)return null;var a,d=e.slice(0,a);return[d.length>1?d[0]+d.slice(2):d,+e.slice(a+1)]}function qc(e){return e=tm(Math.abs(e)),e?e[1]:NaN}function dC(e,n){return function(a,d){for(var w=a.length,M=[],P=0,c=e[0],U=0;w>0&&c>0&&(U+c+1>d&&(c=Math.max(1,d-U)),M.push(a.substring(w-=c,w+c)),!((U+=c+1)>d));)c=e[P=(P+1)%e.length];return M.reverse().join(n)}}function pC(e){return function(n){return n.replace(/[0-9]/g,function(a){return e[+a]})}}var mC=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function nm(e){if(!(n=mC.exec(e)))throw new Error("invalid format: "+e);var n;return new Y_({fill:n[1],align:n[2],sign:n[3],symbol:n[4],zero:n[5],width:n[6],comma:n[7],precision:n[8]&&n[8].slice(1),trim:n[9],type:n[10]})}nm.prototype=Y_.prototype;function Y_(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Y_.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function gC(e){e:for(var n=e.length,a=1,d=-1,w;a<n;++a)switch(e[a]){case".":d=w=a;break;case"0":d===0&&(d=a),w=a;break;default:if(!+e[a])break e;d>0&&(d=0);break}return d>0?e.slice(0,d)+e.slice(w+1):e}var Iw;function _C(e,n){var a=tm(e,n);if(!a)return e+"";var d=a[0],w=a[1],M=w-(Iw=Math.max(-8,Math.min(8,Math.floor(w/3)))*3)+1,P=d.length;return M===P?d:M>P?d+new Array(M-P+1).join("0"):M>0?d.slice(0,M)+"."+d.slice(M):"0."+new Array(1-M).join("0")+tm(e,Math.max(0,n+M-1))[0]}function Hy(e,n){var a=tm(e,n);if(!a)return e+"";var d=a[0],w=a[1];return w<0?"0."+new Array(-w).join("0")+d:d.length>w+1?d.slice(0,w+1)+"."+d.slice(w+1):d+new Array(w-d.length+2).join("0")}const $y={"%":(e,n)=>(e*100).toFixed(n),b:e=>Math.round(e).toString(2),c:e=>e+"",d:fC,e:(e,n)=>e.toExponential(n),f:(e,n)=>e.toFixed(n),g:(e,n)=>e.toPrecision(n),o:e=>Math.round(e).toString(8),p:(e,n)=>Hy(e*100,n),r:Hy,s:_C,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function jy(e){return e}var Wy=Array.prototype.map,Yy=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function yC(e){var n=e.grouping===void 0||e.thousands===void 0?jy:dC(Wy.call(e.grouping,Number),e.thousands+""),a=e.currency===void 0?"":e.currency[0]+"",d=e.currency===void 0?"":e.currency[1]+"",w=e.decimal===void 0?".":e.decimal+"",M=e.numerals===void 0?jy:pC(Wy.call(e.numerals,String)),P=e.percent===void 0?"%":e.percent+"",c=e.minus===void 0?"":e.minus+"",U=e.nan===void 0?"NaN":e.nan+"";function O(W){W=nm(W);var J=W.fill,ae=W.align,be=W.sign,Ze=W.symbol,xe=W.zero,Ce=W.width,je=W.comma,Qe=W.precision,nt=W.trim,it=W.type;it==="n"?(je=!0,it="g"):$y[it]||(Qe===void 0&&(Qe=12),nt=!0,it="g"),(xe||J==="0"&&ae==="=")&&(xe=!0,J="0",ae="=");var xt=Ze==="$"?a:Ze==="#"&&/[boxX]/.test(it)?"0"+it.toLowerCase():"",Ft=Ze==="$"?d:/[%p]/.test(it)?P:"",It=$y[it],nn=/[defgprs%]/.test(it);Qe=Qe===void 0?6:/[gprs]/.test(it)?Math.max(1,Math.min(21,Qe)):Math.max(0,Math.min(20,Qe));function Zt(At){var bt=xt,kt=Ft,De,at,lt;if(it==="c")kt=It(At)+kt,At="";else{At=+At;var Tt=At<0||1/At<0;if(At=isNaN(At)?U:It(Math.abs(At),Qe),nt&&(At=gC(At)),Tt&&+At==0&&be!=="+"&&(Tt=!1),bt=(Tt?be==="("?be:c:be==="-"||be==="("?"":be)+bt,kt=(it==="s"?Yy[8+Iw/3]:"")+kt+(Tt&&be==="("?")":""),nn){for(De=-1,at=At.length;++De<at;)if(lt=At.charCodeAt(De),48>lt||lt>57){kt=(lt===46?w+At.slice(De+1):At.slice(De))+kt,At=At.slice(0,De);break}}}je&&!xe&&(At=n(At,1/0));var Ot=bt.length+At.length+kt.length,Gt=Ot<Ce?new Array(Ce-Ot+1).join(J):"";switch(je&&xe&&(At=n(Gt+At,Gt.length?Ce-kt.length:1/0),Gt=""),ae){case"<":At=bt+At+kt+Gt;break;case"=":At=bt+Gt+At+kt;break;case"^":At=Gt.slice(0,Ot=Gt.length>>1)+bt+At+kt+Gt.slice(Ot);break;default:At=Gt+bt+At+kt;break}return M(At)}return Zt.toString=function(){return W+""},Zt}function j(W,J){var ae=O((W=nm(W),W.type="f",W)),be=Math.max(-8,Math.min(8,Math.floor(qc(J)/3)))*3,Ze=Math.pow(10,-be),xe=Yy[8+be/3];return function(Ce){return ae(Ze*Ce)+xe}}return{format:O,formatPrefix:j}}var gp,X_,Bw;vC({thousands:",",grouping:[3],currency:["$",""]});function vC(e){return gp=yC(e),X_=gp.format,Bw=gp.formatPrefix,gp}function xC(e){return Math.max(0,-qc(Math.abs(e)))}function wC(e,n){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(qc(n)/3)))*3-qc(Math.abs(e)))}function bC(e,n){return e=Math.abs(e),n=Math.abs(n)-e,Math.max(0,qc(n)-qc(e))+1}function kC(e){var n=0,a=e.children,d=a&&a.length;if(!d)n=1;else for(;--d>=0;)n+=a[d].value;e.value=n}function EC(){return this.eachAfter(kC)}function MC(e,n){let a=-1;for(const d of this)e.call(n,d,++a,this);return this}function TC(e,n){for(var a=this,d=[a],w,M,P=-1;a=d.pop();)if(e.call(n,a,++P,this),w=a.children)for(M=w.length-1;M>=0;--M)d.push(w[M]);return this}function SC(e,n){for(var a=this,d=[a],w=[],M,P,c,U=-1;a=d.pop();)if(w.push(a),M=a.children)for(P=0,c=M.length;P<c;++P)d.push(M[P]);for(;a=w.pop();)e.call(n,a,++U,this);return this}function CC(e,n){let a=-1;for(const d of this)if(e.call(n,d,++a,this))return d}function IC(e){return this.eachAfter(function(n){for(var a=+e(n.data)||0,d=n.children,w=d&&d.length;--w>=0;)a+=d[w].value;n.value=a})}function BC(e){return this.eachBefore(function(n){n.children&&n.children.sort(e)})}function DC(e){for(var n=this,a=PC(n,e),d=[n];n!==a;)n=n.parent,d.push(n);for(var w=d.length;e!==a;)d.splice(w,0,e),e=e.parent;return d}function PC(e,n){if(e===n)return e;var a=e.ancestors(),d=n.ancestors(),w=null;for(e=a.pop(),n=d.pop();e===n;)w=e,e=a.pop(),n=d.pop();return w}function zC(){for(var e=this,n=[e];e=e.parent;)n.push(e);return n}function LC(){return Array.from(this)}function RC(){var e=[];return this.eachBefore(function(n){n.children||e.push(n)}),e}function FC(){var e=this,n=[];return e.each(function(a){a!==e&&n.push({source:a.parent,target:a})}),n}function*OC(){var e=this,n,a=[e],d,w,M;do for(n=a.reverse(),a=[];e=n.pop();)if(yield e,d=e.children)for(w=0,M=d.length;w<M;++w)a.push(d[w]);while(a.length)}function D0(e,n){e instanceof Map?(e=[void 0,e],n===void 0&&(n=UC)):n===void 0&&(n=VC);for(var a=new im(e),d,w=[a],M,P,c,U;d=w.pop();)if((P=n(d.data))&&(U=(P=Array.from(P)).length))for(d.children=P,c=U-1;c>=0;--c)w.push(M=P[c]=new im(P[c])),M.parent=d,M.depth=d.depth+1;return a.eachBefore(GC)}function NC(){return D0(this).eachBefore(QC)}function VC(e){return e.children}function UC(e){return Array.isArray(e)?e[1]:null}function QC(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function GC(e){var n=0;do e.height=n;while((e=e.parent)&&e.height<++n)}function im(e){this.data=e,this.depth=this.height=0,this.parent=null}im.prototype=D0.prototype={constructor:im,count:EC,each:MC,eachAfter:SC,eachBefore:TC,find:CC,sum:IC,sort:BC,path:DC,ancestors:zC,descendants:LC,leaves:RC,links:FC,copy:NC,[Symbol.iterator]:OC};function qC(e,n){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(n).domain(e);break}return this}function ZC(e){return function(){return e}}function HC(e){return+e}var Xy=[0,1];function Dc(e){return e}function l_(e,n){return(n-=e=+e)?function(a){return(a-e)/n}:ZC(isNaN(n)?NaN:.5)}function $C(e,n){var a;return e>n&&(a=e,e=n,n=a),function(d){return Math.max(e,Math.min(n,d))}}function jC(e,n,a){var d=e[0],w=e[1],M=n[0],P=n[1];return w<d?(d=l_(w,d),M=a(P,M)):(d=l_(d,w),M=a(M,P)),function(c){return M(d(c))}}function WC(e,n,a){var d=Math.min(e.length,n.length)-1,w=new Array(d),M=new Array(d),P=-1;for(e[d]<e[0]&&(e=e.slice().reverse(),n=n.slice().reverse());++P<d;)w[P]=l_(e[P],e[P+1]),M[P]=a(n[P],n[P+1]);return function(c){var U=wE(e,c,1,d)-1;return M[U](w[U](c))}}function YC(e,n){return n.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function XC(){var e=Xy,n=Xy,a=_m,d,w,M,P=Dc,c,U,O;function j(){var J=Math.min(e.length,n.length);return P!==Dc&&(P=$C(e[0],e[J-1])),c=J>2?WC:jC,U=O=null,W}function W(J){return J==null||isNaN(J=+J)?M:(U||(U=c(e.map(d),n,a)))(d(P(J)))}return W.invert=function(J){return P(w((O||(O=c(n,e.map(d),Sl)))(J)))},W.domain=function(J){return arguments.length?(e=Array.from(J,HC),j()):e.slice()},W.range=function(J){return arguments.length?(n=Array.from(J),j()):n.slice()},W.rangeRound=function(J){return n=Array.from(J),a=LT,j()},W.clamp=function(J){return arguments.length?(P=J?!0:Dc,j()):P!==Dc},W.interpolate=function(J){return arguments.length?(a=J,j()):a},W.unknown=function(J){return arguments.length?(M=J,W):M},function(J,ae){return d=J,w=ae,j()}}function KC(){return XC()(Dc,Dc)}function JC(e,n,a,d){var w=kE(e,n,a),M;switch(d=nm(d??",f"),d.type){case"s":{var P=Math.max(Math.abs(e),Math.abs(n));return d.precision==null&&!isNaN(M=wC(w,P))&&(d.precision=M),Bw(d,P)}case"":case"e":case"g":case"p":case"r":{d.precision==null&&!isNaN(M=bC(w,Math.max(Math.abs(e),Math.abs(n))))&&(d.precision=M-(d.type==="e"));break}case"f":case"%":{d.precision==null&&!isNaN(M=xC(w))&&(d.precision=M-(d.type==="%")*2);break}}return X_(d)}function eI(e){var n=e.domain;return e.ticks=function(a){var d=n();return bE(d[0],d[d.length-1],a??10)},e.tickFormat=function(a,d){var w=n();return JC(w[0],w[w.length-1],a??10,d)},e.nice=function(a){a==null&&(a=10);var d=n(),w=0,M=d.length-1,P=d[w],c=d[M],U,O,j=10;for(c<P&&(O=P,P=c,c=O,O=w,w=M,M=O);j-- >0;){if(O=tw(P,c,a),O===U)return d[w]=P,d[M]=c,n(d);if(O>0)P=Math.floor(P/O)*O,c=Math.ceil(c/O)*O;else if(O<0)P=Math.ceil(P*O)/O,c=Math.floor(c*O)/O;else break;U=O}return e},e}function Dw(){var e=KC();return e.copy=function(){return YC(e,Dw())},qC.apply(e,arguments),eI(e)}var A1=new Date,s1=new Date;function Lu(e,n,a,d){function w(M){return e(M=arguments.length===0?new Date:new Date(+M)),M}return w.floor=function(M){return e(M=new Date(+M)),M},w.ceil=function(M){return e(M=new Date(M-1)),n(M,1),e(M),M},w.round=function(M){var P=w(M),c=w.ceil(M);return M-P<c-M?P:c},w.offset=function(M,P){return n(M=new Date(+M),P==null?1:Math.floor(P)),M},w.range=function(M,P,c){var U=[],O;if(M=w.ceil(M),c=c==null?1:Math.floor(c),!(M<P)||!(c>0))return U;do U.push(O=new Date(+M)),n(M,c),e(M);while(O<M&&M<P);return U},w.filter=function(M){return Lu(function(P){if(P>=P)for(;e(P),!M(P);)P.setTime(P-1)},function(P,c){if(P>=P)if(c<0)for(;++c<=0;)for(;n(P,-1),!M(P););else for(;--c>=0;)for(;n(P,1),!M(P););})},a&&(w.count=function(M,P){return A1.setTime(+M),s1.setTime(+P),e(A1),e(s1),Math.floor(a(A1,s1))},w.every=function(M){return M=Math.floor(M),!isFinite(M)||!(M>0)?null:M>1?w.filter(d?function(P){return d(P)%M===0}:function(P){return w.count(0,P)%M===0}):w}),w}const tI=1e3,K_=tI*60,nI=K_*60,J_=nI*24,Pw=J_*7;var e2=Lu(e=>e.setHours(0,0,0,0),(e,n)=>e.setDate(e.getDate()+n),(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*K_)/J_,e=>e.getDate()-1);e2.range;function H0(e){return Lu(function(n){n.setDate(n.getDate()-(n.getDay()+7-e)%7),n.setHours(0,0,0,0)},function(n,a){n.setDate(n.getDate()+a*7)},function(n,a){return(a-n-(a.getTimezoneOffset()-n.getTimezoneOffset())*K_)/Pw})}var zw=H0(0),rm=H0(1),iI=H0(2),rI=H0(3),Zc=H0(4),AI=H0(5),sI=H0(6);zw.range;rm.range;iI.range;rI.range;Zc.range;AI.range;sI.range;var N0=Lu(function(e){e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,n){e.setFullYear(e.getFullYear()+n)},function(e,n){return n.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()});N0.every=function(e){return!isFinite(e=Math.floor(e))||!(e>0)?null:Lu(function(n){n.setFullYear(Math.floor(n.getFullYear()/e)*e),n.setMonth(0,1),n.setHours(0,0,0,0)},function(n,a){n.setFullYear(n.getFullYear()+a*e)})};N0.range;var t2=Lu(function(e){e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCDate(e.getUTCDate()+n)},function(e,n){return(n-e)/J_},function(e){return e.getUTCDate()-1});t2.range;function $0(e){return Lu(function(n){n.setUTCDate(n.getUTCDate()-(n.getUTCDay()+7-e)%7),n.setUTCHours(0,0,0,0)},function(n,a){n.setUTCDate(n.getUTCDate()+a*7)},function(n,a){return(a-n)/Pw})}var Lw=$0(0),Am=$0(1),oI=$0(2),aI=$0(3),Hc=$0(4),lI=$0(5),uI=$0(6);Lw.range;Am.range;oI.range;aI.range;Hc.range;lI.range;uI.range;var V0=Lu(function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n)},function(e,n){return n.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()});V0.every=function(e){return!isFinite(e=Math.floor(e))||!(e>0)?null:Lu(function(n){n.setUTCFullYear(Math.floor(n.getUTCFullYear()/e)*e),n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)},function(n,a){n.setUTCFullYear(n.getUTCFullYear()+a*e)})};V0.range;function o1(e){if(0<=e.y&&e.y<100){var n=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return n.setFullYear(e.y),n}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function a1(e){if(0<=e.y&&e.y<100){var n=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return n.setUTCFullYear(e.y),n}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Af(e,n,a){return{y:e,m:n,d:a,H:0,M:0,S:0,L:0}}function cI(e){var n=e.dateTime,a=e.date,d=e.time,w=e.periods,M=e.days,P=e.shortDays,c=e.months,U=e.shortMonths,O=sf(w),j=of(w),W=sf(M),J=of(M),ae=sf(P),be=of(P),Ze=sf(c),xe=of(c),Ce=sf(U),je=of(U),Qe={a:Tt,A:Ot,b:Gt,B:_n,c:null,d:iv,e:iv,f:zI,g:qI,G:HI,H:BI,I:DI,j:PI,L:Rw,m:LI,M:RI,p:hn,q:vn,Q:sv,s:ov,S:FI,u:OI,U:NI,V:VI,w:UI,W:QI,x:null,X:null,y:GI,Y:ZI,Z:$I,"%":Av},nt={a:Dn,A:Qn,b:di,B:xi,c:null,d:rv,e:rv,f:XI,g:oB,G:lB,H:jI,I:WI,j:YI,L:Ow,m:KI,M:JI,p:Ct,q:xn,Q:sv,s:ov,S:eB,u:tB,U:nB,V:iB,w:rB,W:AB,x:null,X:null,y:sB,Y:aB,Z:uB,"%":Av},it={a:Zt,A:At,b:bt,B:kt,c:De,d:tv,e:tv,f:TI,g:ev,G:Jy,H:nv,I:nv,j:bI,L:MI,m:wI,M:kI,p:nn,q:xI,Q:CI,s:II,S:EI,u:mI,U:gI,V:_I,w:pI,W:yI,x:at,X:lt,y:ev,Y:Jy,Z:vI,"%":SI};Qe.x=xt(a,Qe),Qe.X=xt(d,Qe),Qe.c=xt(n,Qe),nt.x=xt(a,nt),nt.X=xt(d,nt),nt.c=xt(n,nt);function xt(Bt,En){return function(Gn){var Lt=[],Ii=-1,Pn=0,qi=Bt.length,Ar,un,Jn;for(Gn instanceof Date||(Gn=new Date(+Gn));++Ii<qi;)Bt.charCodeAt(Ii)===37&&(Lt.push(Bt.slice(Pn,Ii)),(un=Ky[Ar=Bt.charAt(++Ii)])!=null?Ar=Bt.charAt(++Ii):un=Ar==="e"?" ":"0",(Jn=En[Ar])&&(Ar=Jn(Gn,un)),Lt.push(Ar),Pn=Ii+1);return Lt.push(Bt.slice(Pn,Ii)),Lt.join("")}}function Ft(Bt,En){return function(Gn){var Lt=Af(1900,void 0,1),Ii=It(Lt,Bt,Gn+="",0),Pn,qi;if(Ii!=Gn.length)return null;if("Q"in Lt)return new Date(Lt.Q);if("s"in Lt)return new Date(Lt.s*1e3+("L"in Lt?Lt.L:0));if(En&&!("Z"in Lt)&&(Lt.Z=0),"p"in Lt&&(Lt.H=Lt.H%12+Lt.p*12),Lt.m===void 0&&(Lt.m="q"in Lt?Lt.q:0),"V"in Lt){if(Lt.V<1||Lt.V>53)return null;"w"in Lt||(Lt.w=1),"Z"in Lt?(Pn=a1(Af(Lt.y,0,1)),qi=Pn.getUTCDay(),Pn=qi>4||qi===0?Am.ceil(Pn):Am(Pn),Pn=t2.offset(Pn,(Lt.V-1)*7),Lt.y=Pn.getUTCFullYear(),Lt.m=Pn.getUTCMonth(),Lt.d=Pn.getUTCDate()+(Lt.w+6)%7):(Pn=o1(Af(Lt.y,0,1)),qi=Pn.getDay(),Pn=qi>4||qi===0?rm.ceil(Pn):rm(Pn),Pn=e2.offset(Pn,(Lt.V-1)*7),Lt.y=Pn.getFullYear(),Lt.m=Pn.getMonth(),Lt.d=Pn.getDate()+(Lt.w+6)%7)}else("W"in Lt||"U"in Lt)&&("w"in Lt||(Lt.w="u"in Lt?Lt.u%7:"W"in Lt?1:0),qi="Z"in Lt?a1(Af(Lt.y,0,1)).getUTCDay():o1(Af(Lt.y,0,1)).getDay(),Lt.m=0,Lt.d="W"in Lt?(Lt.w+6)%7+Lt.W*7-(qi+5)%7:Lt.w+Lt.U*7-(qi+6)%7);return"Z"in Lt?(Lt.H+=Lt.Z/100|0,Lt.M+=Lt.Z%100,a1(Lt)):o1(Lt)}}function It(Bt,En,Gn,Lt){for(var Ii=0,Pn=En.length,qi=Gn.length,Ar,un;Ii<Pn;){if(Lt>=qi)return-1;if(Ar=En.charCodeAt(Ii++),Ar===37){if(Ar=En.charAt(Ii++),un=it[Ar in Ky?En.charAt(Ii++):Ar],!un||(Lt=un(Bt,Gn,Lt))<0)return-1}else if(Ar!=Gn.charCodeAt(Lt++))return-1}return Lt}function nn(Bt,En,Gn){var Lt=O.exec(En.slice(Gn));return Lt?(Bt.p=j.get(Lt[0].toLowerCase()),Gn+Lt[0].length):-1}function Zt(Bt,En,Gn){var Lt=ae.exec(En.slice(Gn));return Lt?(Bt.w=be.get(Lt[0].toLowerCase()),Gn+Lt[0].length):-1}function At(Bt,En,Gn){var Lt=W.exec(En.slice(Gn));return Lt?(Bt.w=J.get(Lt[0].toLowerCase()),Gn+Lt[0].length):-1}function bt(Bt,En,Gn){var Lt=Ce.exec(En.slice(Gn));return Lt?(Bt.m=je.get(Lt[0].toLowerCase()),Gn+Lt[0].length):-1}function kt(Bt,En,Gn){var Lt=Ze.exec(En.slice(Gn));return Lt?(Bt.m=xe.get(Lt[0].toLowerCase()),Gn+Lt[0].length):-1}function De(Bt,En,Gn){return It(Bt,n,En,Gn)}function at(Bt,En,Gn){return It(Bt,a,En,Gn)}function lt(Bt,En,Gn){return It(Bt,d,En,Gn)}function Tt(Bt){return P[Bt.getDay()]}function Ot(Bt){return M[Bt.getDay()]}function Gt(Bt){return U[Bt.getMonth()]}function _n(Bt){return c[Bt.getMonth()]}function hn(Bt){return w[+(Bt.getHours()>=12)]}function vn(Bt){return 1+~~(Bt.getMonth()/3)}function Dn(Bt){return P[Bt.getUTCDay()]}function Qn(Bt){return M[Bt.getUTCDay()]}function di(Bt){return U[Bt.getUTCMonth()]}function xi(Bt){return c[Bt.getUTCMonth()]}function Ct(Bt){return w[+(Bt.getUTCHours()>=12)]}function xn(Bt){return 1+~~(Bt.getUTCMonth()/3)}return{format:function(Bt){var En=xt(Bt+="",Qe);return En.toString=function(){return Bt},En},parse:function(Bt){var En=Ft(Bt+="",!1);return En.toString=function(){return Bt},En},utcFormat:function(Bt){var En=xt(Bt+="",nt);return En.toString=function(){return Bt},En},utcParse:function(Bt){var En=Ft(Bt+="",!0);return En.toString=function(){return Bt},En}}}var Ky={"-":"",_:" ",0:"0"},bs=/^\s*\d+/,hI=/^%/,fI=/[\\^$*+?|[\]().{}]/g;function rr(e,n,a){var d=e<0?"-":"",w=(d?-e:e)+"",M=w.length;return d+(M<a?new Array(a-M+1).join(n)+w:w)}function dI(e){return e.replace(fI,"\\$&")}function sf(e){return new RegExp("^(?:"+e.map(dI).join("|")+")","i")}function of(e){return new Map(e.map((n,a)=>[n.toLowerCase(),a]))}function pI(e,n,a){var d=bs.exec(n.slice(a,a+1));return d?(e.w=+d[0],a+d[0].length):-1}function mI(e,n,a){var d=bs.exec(n.slice(a,a+1));return d?(e.u=+d[0],a+d[0].length):-1}function gI(e,n,a){var d=bs.exec(n.slice(a,a+2));return d?(e.U=+d[0],a+d[0].length):-1}function _I(e,n,a){var d=bs.exec(n.slice(a,a+2));return d?(e.V=+d[0],a+d[0].length):-1}function yI(e,n,a){var d=bs.exec(n.slice(a,a+2));return d?(e.W=+d[0],a+d[0].length):-1}function Jy(e,n,a){var d=bs.exec(n.slice(a,a+4));return d?(e.y=+d[0],a+d[0].length):-1}function ev(e,n,a){var d=bs.exec(n.slice(a,a+2));return d?(e.y=+d[0]+(+d[0]>68?1900:2e3),a+d[0].length):-1}function vI(e,n,a){var d=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(n.slice(a,a+6));return d?(e.Z=d[1]?0:-(d[2]+(d[3]||"00")),a+d[0].length):-1}function xI(e,n,a){var d=bs.exec(n.slice(a,a+1));return d?(e.q=d[0]*3-3,a+d[0].length):-1}function wI(e,n,a){var d=bs.exec(n.slice(a,a+2));return d?(e.m=d[0]-1,a+d[0].length):-1}function tv(e,n,a){var d=bs.exec(n.slice(a,a+2));return d?(e.d=+d[0],a+d[0].length):-1}function bI(e,n,a){var d=bs.exec(n.slice(a,a+3));return d?(e.m=0,e.d=+d[0],a+d[0].length):-1}function nv(e,n,a){var d=bs.exec(n.slice(a,a+2));return d?(e.H=+d[0],a+d[0].length):-1}function kI(e,n,a){var d=bs.exec(n.slice(a,a+2));return d?(e.M=+d[0],a+d[0].length):-1}function EI(e,n,a){var d=bs.exec(n.slice(a,a+2));return d?(e.S=+d[0],a+d[0].length):-1}function MI(e,n,a){var d=bs.exec(n.slice(a,a+3));return d?(e.L=+d[0],a+d[0].length):-1}function TI(e,n,a){var d=bs.exec(n.slice(a,a+6));return d?(e.L=Math.floor(d[0]/1e3),a+d[0].length):-1}function SI(e,n,a){var d=hI.exec(n.slice(a,a+1));return d?a+d[0].length:-1}function CI(e,n,a){var d=bs.exec(n.slice(a));return d?(e.Q=+d[0],a+d[0].length):-1}function II(e,n,a){var d=bs.exec(n.slice(a));return d?(e.s=+d[0],a+d[0].length):-1}function iv(e,n){return rr(e.getDate(),n,2)}function BI(e,n){return rr(e.getHours(),n,2)}function DI(e,n){return rr(e.getHours()%12||12,n,2)}function PI(e,n){return rr(1+e2.count(N0(e),e),n,3)}function Rw(e,n){return rr(e.getMilliseconds(),n,3)}function zI(e,n){return Rw(e,n)+"000"}function LI(e,n){return rr(e.getMonth()+1,n,2)}function RI(e,n){return rr(e.getMinutes(),n,2)}function FI(e,n){return rr(e.getSeconds(),n,2)}function OI(e){var n=e.getDay();return n===0?7:n}function NI(e,n){return rr(zw.count(N0(e)-1,e),n,2)}function Fw(e){var n=e.getDay();return n>=4||n===0?Zc(e):Zc.ceil(e)}function VI(e,n){return e=Fw(e),rr(Zc.count(N0(e),e)+(N0(e).getDay()===4),n,2)}function UI(e){return e.getDay()}function QI(e,n){return rr(rm.count(N0(e)-1,e),n,2)}function GI(e,n){return rr(e.getFullYear()%100,n,2)}function qI(e,n){return e=Fw(e),rr(e.getFullYear()%100,n,2)}function ZI(e,n){return rr(e.getFullYear()%1e4,n,4)}function HI(e,n){var a=e.getDay();return e=a>=4||a===0?Zc(e):Zc.ceil(e),rr(e.getFullYear()%1e4,n,4)}function $I(e){var n=e.getTimezoneOffset();return(n>0?"-":(n*=-1,"+"))+rr(n/60|0,"0",2)+rr(n%60,"0",2)}function rv(e,n){return rr(e.getUTCDate(),n,2)}function jI(e,n){return rr(e.getUTCHours(),n,2)}function WI(e,n){return rr(e.getUTCHours()%12||12,n,2)}function YI(e,n){return rr(1+t2.count(V0(e),e),n,3)}function Ow(e,n){return rr(e.getUTCMilliseconds(),n,3)}function XI(e,n){return Ow(e,n)+"000"}function KI(e,n){return rr(e.getUTCMonth()+1,n,2)}function JI(e,n){return rr(e.getUTCMinutes(),n,2)}function eB(e,n){return rr(e.getUTCSeconds(),n,2)}function tB(e){var n=e.getUTCDay();return n===0?7:n}function nB(e,n){return rr(Lw.count(V0(e)-1,e),n,2)}function Nw(e){var n=e.getUTCDay();return n>=4||n===0?Hc(e):Hc.ceil(e)}function iB(e,n){return e=Nw(e),rr(Hc.count(V0(e),e)+(V0(e).getUTCDay()===4),n,2)}function rB(e){return e.getUTCDay()}function AB(e,n){return rr(Am.count(V0(e)-1,e),n,2)}function sB(e,n){return rr(e.getUTCFullYear()%100,n,2)}function oB(e,n){return e=Nw(e),rr(e.getUTCFullYear()%100,n,2)}function aB(e,n){return rr(e.getUTCFullYear()%1e4,n,4)}function lB(e,n){var a=e.getUTCDay();return e=a>=4||a===0?Hc(e):Hc.ceil(e),rr(e.getUTCFullYear()%1e4,n,4)}function uB(){return"+0000"}function Av(){return"%"}function sv(e){return+e}function ov(e){return Math.floor(+e/1e3)}var Tc,Vw;cB({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function cB(e){return Tc=cI(e),Tc.format,Vw=Tc.parse,Tc.utcFormat,Tc.utcParse,Tc}function Sc(e){return function(){return e}}function hB(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Uw(e){this._context=e}Uw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,n){switch(e=+e,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break;case 1:this._point=2;default:this._context.lineTo(e,n);break}}};function fB(e){return new Uw(e)}function dB(e){return e[0]}function pB(e){return e[1]}function u_(e,n){var a=Sc(!0),d=null,w=fB,M=null;e=typeof e=="function"?e:e===void 0?dB:Sc(e),n=typeof n=="function"?n:n===void 0?pB:Sc(n);function P(c){var U,O=(c=hB(c)).length,j,W=!1,J;for(d==null&&(M=w(J=Cw())),U=0;U<=O;++U)!(U<O&&a(j=c[U],U,c))===W&&((W=!W)?M.lineStart():M.lineEnd()),W&&M.point(+e(j,U,c),+n(j,U,c));if(J)return M=null,J+""||null}return P.x=function(c){return arguments.length?(e=typeof c=="function"?c:Sc(+c),P):e},P.y=function(c){return arguments.length?(n=typeof c=="function"?c:Sc(+c),P):n},P.defined=function(c){return arguments.length?(a=typeof c=="function"?c:Sc(!!c),P):a},P.curve=function(c){return arguments.length?(w=c,d!=null&&(M=w(d)),P):w},P.context=function(c){return arguments.length?(c==null?d=M=null:M=w(d=c),P):d},P}function av(e,n,a){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+n)/6,(e._y0+4*e._y1+a)/6)}function Qw(e){this._context=e}Qw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:av(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,n){switch(e=+e,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:av(this,e,n);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=n}};function lv(e){return new Qw(e)}function Gw(e,n){this._context=e,this._t=n}Gw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,n){switch(e=+e,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,n),this._context.lineTo(e,n);else{var a=this._x*(1-this._t)+e*this._t;this._context.lineTo(a,this._y),this._context.lineTo(a,n)}break}}this._x=e,this._y=n}};function mB(e){return new Gw(e,0)}const _p=e=>()=>e;function gB(e,{sourceEvent:n,target:a,transform:d,dispatch:w}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:a,enumerable:!0,configurable:!0},transform:{value:d,enumerable:!0,configurable:!0},_:{value:w}})}function Iu(e,n,a){this.k=e,this.x=n,this.y=a}Iu.prototype={constructor:Iu,scale:function(e){return e===1?this:new Iu(this.k*e,this.x,this.y)},translate:function(e,n){return e===0&n===0?this:new Iu(this.k,this.x+this.k*e,this.y+this.k*n)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var qw=new Iu(1,0,0);Iu.prototype;function l1(e){e.stopImmediatePropagation()}function af(e){e.preventDefault(),e.stopImmediatePropagation()}function _B(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function yB(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function uv(){return this.__zoom||qw}function vB(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function xB(){return navigator.maxTouchPoints||"ontouchstart"in this}function wB(e,n,a){var d=e.invertX(n[0][0])-a[0][0],w=e.invertX(n[1][0])-a[1][0],M=e.invertY(n[0][1])-a[0][1],P=e.invertY(n[1][1])-a[1][1];return e.translate(w>d?(d+w)/2:Math.min(0,d)||Math.max(0,w),P>M?(M+P)/2:Math.min(0,M)||Math.max(0,P))}function bB(){var e=_B,n=yB,a=wB,d=vB,w=xB,M=[0,1/0],P=[[-1/0,-1/0],[1/0,1/0]],c=250,U=GT,O=mm("start","zoom","end"),j,W,J,ae=500,be=150,Ze=0,xe=10;function Ce(De){De.property("__zoom",uv).on("wheel.zoom",It).on("mousedown.zoom",nn).on("dblclick.zoom",Zt).filter(w).on("touchstart.zoom",At).on("touchmove.zoom",bt).on("touchend.zoom touchcancel.zoom",kt).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}Ce.transform=function(De,at,lt,Tt){var Ot=De.selection?De.selection():De;Ot.property("__zoom",uv),De!==Ot?it(De,at,lt,Tt):Ot.interrupt().each(function(){xt(this,arguments).event(Tt).start().zoom(null,typeof at=="function"?at.apply(this,arguments):at).end()})},Ce.scaleBy=function(De,at,lt,Tt){Ce.scaleTo(De,function(){var Ot=this.__zoom.k,Gt=typeof at=="function"?at.apply(this,arguments):at;return Ot*Gt},lt,Tt)},Ce.scaleTo=function(De,at,lt,Tt){Ce.transform(De,function(){var Ot=n.apply(this,arguments),Gt=this.__zoom,_n=lt==null?nt(Ot):typeof lt=="function"?lt.apply(this,arguments):lt,hn=Gt.invert(_n),vn=typeof at=="function"?at.apply(this,arguments):at;return a(Qe(je(Gt,vn),_n,hn),Ot,P)},lt,Tt)},Ce.translateBy=function(De,at,lt,Tt){Ce.transform(De,function(){return a(this.__zoom.translate(typeof at=="function"?at.apply(this,arguments):at,typeof lt=="function"?lt.apply(this,arguments):lt),n.apply(this,arguments),P)},null,Tt)},Ce.translateTo=function(De,at,lt,Tt,Ot){Ce.transform(De,function(){var Gt=n.apply(this,arguments),_n=this.__zoom,hn=Tt==null?nt(Gt):typeof Tt=="function"?Tt.apply(this,arguments):Tt;return a(qw.translate(hn[0],hn[1]).scale(_n.k).translate(typeof at=="function"?-at.apply(this,arguments):-at,typeof lt=="function"?-lt.apply(this,arguments):-lt),Gt,P)},Tt,Ot)};function je(De,at){return at=Math.max(M[0],Math.min(M[1],at)),at===De.k?De:new Iu(at,De.x,De.y)}function Qe(De,at,lt){var Tt=at[0]-lt[0]*De.k,Ot=at[1]-lt[1]*De.k;return Tt===De.x&&Ot===De.y?De:new Iu(De.k,Tt,Ot)}function nt(De){return[(+De[0][0]+ +De[1][0])/2,(+De[0][1]+ +De[1][1])/2]}function it(De,at,lt,Tt){De.on("start.zoom",function(){xt(this,arguments).event(Tt).start()}).on("interrupt.zoom end.zoom",function(){xt(this,arguments).event(Tt).end()}).tween("zoom",function(){var Ot=this,Gt=arguments,_n=xt(Ot,Gt).event(Tt),hn=n.apply(Ot,Gt),vn=lt==null?nt(hn):typeof lt=="function"?lt.apply(Ot,Gt):lt,Dn=Math.max(hn[1][0]-hn[0][0],hn[1][1]-hn[0][1]),Qn=Ot.__zoom,di=typeof at=="function"?at.apply(Ot,Gt):at,xi=U(Qn.invert(vn).concat(Dn/Qn.k),di.invert(vn).concat(Dn/di.k));return function(Ct){if(Ct===1)Ct=di;else{var xn=xi(Ct),Bt=Dn/xn[2];Ct=new Iu(Bt,vn[0]-xn[0]*Bt,vn[1]-xn[1]*Bt)}_n.zoom(null,Ct)}})}function xt(De,at,lt){return!lt&&De.__zooming||new Ft(De,at)}function Ft(De,at){this.that=De,this.args=at,this.active=0,this.sourceEvent=null,this.extent=n.apply(De,at),this.taps=0}Ft.prototype={event:function(De){return De&&(this.sourceEvent=De),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(De,at){return this.mouse&&De!=="mouse"&&(this.mouse[1]=at.invert(this.mouse[0])),this.touch0&&De!=="touch"&&(this.touch0[1]=at.invert(this.touch0[0])),this.touch1&&De!=="touch"&&(this.touch1[1]=at.invert(this.touch1[0])),this.that.__zoom=at,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(De){var at=Gr(this.that).datum();O.call(De,this.that,new gB(De,{sourceEvent:this.sourceEvent,target:Ce,type:De,transform:this.that.__zoom,dispatch:O}),at)}};function It(De,...at){if(!e.apply(this,arguments))return;var lt=xt(this,at).event(De),Tt=this.__zoom,Ot=Math.max(M[0],Math.min(M[1],Tt.k*Math.pow(2,d.apply(this,arguments)))),Gt=Tu(De);if(lt.wheel)(lt.mouse[0][0]!==Gt[0]||lt.mouse[0][1]!==Gt[1])&&(lt.mouse[1]=Tt.invert(lt.mouse[0]=Gt)),clearTimeout(lt.wheel);else{if(Tt.k===Ot)return;lt.mouse=[Gt,Tt.invert(Gt)],Rc(this),lt.start()}af(De),lt.wheel=setTimeout(_n,be),lt.zoom("mouse",a(Qe(je(Tt,Ot),lt.mouse[0],lt.mouse[1]),lt.extent,P));function _n(){lt.wheel=null,lt.end()}}function nn(De,...at){if(J||!e.apply(this,arguments))return;var lt=xt(this,at,!0).event(De),Tt=Gr(De.view).on("mousemove.zoom",vn,!0).on("mouseup.zoom",Dn,!0),Ot=Tu(De,Gt),Gt=De.currentTarget,_n=De.clientX,hn=De.clientY;dw(De.view),l1(De),lt.mouse=[Ot,this.__zoom.invert(Ot)],Rc(this),lt.start();function vn(Qn){if(af(Qn),!lt.moved){var di=Qn.clientX-_n,xi=Qn.clientY-hn;lt.moved=di*di+xi*xi>Ze}lt.event(Qn).zoom("mouse",a(Qe(lt.that.__zoom,lt.mouse[0]=Tu(Qn,Gt),lt.mouse[1]),lt.extent,P))}function Dn(Qn){Tt.on("mousemove.zoom mouseup.zoom",null),pw(Qn.view,lt.moved),af(Qn),lt.event(Qn).end()}}function Zt(De,...at){if(e.apply(this,arguments)){var lt=this.__zoom,Tt=Tu(De.changedTouches?De.changedTouches[0]:De,this),Ot=lt.invert(Tt),Gt=lt.k*(De.shiftKey?.5:2),_n=a(Qe(je(lt,Gt),Tt,Ot),n.apply(this,at),P);af(De),c>0?Gr(this).transition().duration(c).call(it,_n,Tt,De):Gr(this).call(Ce.transform,_n,Tt,De)}}function At(De,...at){if(e.apply(this,arguments)){var lt=De.touches,Tt=lt.length,Ot=xt(this,at,De.changedTouches.length===Tt).event(De),Gt,_n,hn,vn;for(l1(De),_n=0;_n<Tt;++_n)hn=lt[_n],vn=Tu(hn,this),vn=[vn,this.__zoom.invert(vn),hn.identifier],Ot.touch0?!Ot.touch1&&Ot.touch0[2]!==vn[2]&&(Ot.touch1=vn,Ot.taps=0):(Ot.touch0=vn,Gt=!0,Ot.taps=1+!!j);j&&(j=clearTimeout(j)),Gt&&(Ot.taps<2&&(W=vn[0],j=setTimeout(function(){j=null},ae)),Rc(this),Ot.start())}}function bt(De,...at){if(this.__zooming){var lt=xt(this,at).event(De),Tt=De.changedTouches,Ot=Tt.length,Gt,_n,hn,vn;for(af(De),Gt=0;Gt<Ot;++Gt)_n=Tt[Gt],hn=Tu(_n,this),lt.touch0&&lt.touch0[2]===_n.identifier?lt.touch0[0]=hn:lt.touch1&&lt.touch1[2]===_n.identifier&&(lt.touch1[0]=hn);if(_n=lt.that.__zoom,lt.touch1){var Dn=lt.touch0[0],Qn=lt.touch0[1],di=lt.touch1[0],xi=lt.touch1[1],Ct=(Ct=di[0]-Dn[0])*Ct+(Ct=di[1]-Dn[1])*Ct,xn=(xn=xi[0]-Qn[0])*xn+(xn=xi[1]-Qn[1])*xn;_n=je(_n,Math.sqrt(Ct/xn)),hn=[(Dn[0]+di[0])/2,(Dn[1]+di[1])/2],vn=[(Qn[0]+xi[0])/2,(Qn[1]+xi[1])/2]}else if(lt.touch0)hn=lt.touch0[0],vn=lt.touch0[1];else return;lt.zoom("touch",a(Qe(_n,hn,vn),lt.extent,P))}}function kt(De,...at){if(this.__zooming){var lt=xt(this,at).event(De),Tt=De.changedTouches,Ot=Tt.length,Gt,_n;for(l1(De),J&&clearTimeout(J),J=setTimeout(function(){J=null},ae),Gt=0;Gt<Ot;++Gt)_n=Tt[Gt],lt.touch0&&lt.touch0[2]===_n.identifier?delete lt.touch0:lt.touch1&&lt.touch1[2]===_n.identifier&&delete lt.touch1;if(lt.touch1&&!lt.touch0&&(lt.touch0=lt.touch1,delete lt.touch1),lt.touch0)lt.touch0[1]=this.__zoom.invert(lt.touch0[0]);else if(lt.end(),lt.taps===2&&(_n=Tu(_n,this),Math.hypot(W[0]-_n[0],W[1]-_n[1])<xe)){var hn=Gr(this).on("dblclick.zoom");hn&&hn.apply(this,arguments)}}}return Ce.wheelDelta=function(De){return arguments.length?(d=typeof De=="function"?De:_p(+De),Ce):d},Ce.filter=function(De){return arguments.length?(e=typeof De=="function"?De:_p(!!De),Ce):e},Ce.touchable=function(De){return arguments.length?(w=typeof De=="function"?De:_p(!!De),Ce):w},Ce.extent=function(De){return arguments.length?(n=typeof De=="function"?De:_p([[+De[0][0],+De[0][1]],[+De[1][0],+De[1][1]]]),Ce):n},Ce.scaleExtent=function(De){return arguments.length?(M[0]=+De[0],M[1]=+De[1],Ce):[M[0],M[1]]},Ce.translateExtent=function(De){return arguments.length?(P[0][0]=+De[0][0],P[1][0]=+De[1][0],P[0][1]=+De[0][1],P[1][1]=+De[1][1],Ce):[[P[0][0],P[0][1]],[P[1][0],P[1][1]]]},Ce.constrain=function(De){return arguments.length?(a=De,Ce):a},Ce.duration=function(De){return arguments.length?(c=+De,Ce):c},Ce.interpolate=function(De){return arguments.length?(U=De,Ce):U},Ce.on=function(){var De=O.on.apply(O,arguments);return De===O?Ce:De},Ce.clickDistance=function(De){return arguments.length?(Ze=(De=+De)*De,Ce):Math.sqrt(Ze)},Ce.tapDistance=function(De){return arguments.length?(xe=+De,Ce):xe},Ce}var Zw="1.13.6",cv=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||Function("return this")()||{},xm=Array.prototype,n2=Object.prototype,hv=typeof Symbol<"u"?Symbol.prototype:null,kB=xm.push,Rf=xm.slice,Ef=n2.toString,EB=n2.hasOwnProperty,Hw=typeof ArrayBuffer<"u",MB=typeof DataView<"u",TB=Array.isArray,fv=Object.keys,dv=Object.create,pv=Hw&&ArrayBuffer.isView,SB=isNaN,CB=isFinite,$w=!{toString:null}.propertyIsEnumerable("toString"),mv=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],IB=Math.pow(2,53)-1;function oa(e,n){return n=n==null?e.length-1:+n,function(){for(var a=Math.max(arguments.length-n,0),d=Array(a),w=0;w<a;w++)d[w]=arguments[w+n];switch(n){case 0:return e.call(this,d);case 1:return e.call(this,arguments[0],d);case 2:return e.call(this,arguments[0],arguments[1],d)}var M=Array(n+1);for(w=0;w<n;w++)M[w]=arguments[w];return M[n]=d,e.apply(this,M)}}function j0(e){var n=typeof e;return n==="function"||n==="object"&&!!e}function BB(e){return e===null}function U0(e){return e===void 0}function jw(e){return e===!0||e===!1||Ef.call(e)==="[object Boolean]"}function DB(e){return!!(e&&e.nodeType===1)}function Ao(e){var n="[object "+e+"]";return function(a){return Ef.call(a)===n}}const wm=Ao("String"),Ww=Ao("Number"),PB=Ao("Date"),zB=Ao("RegExp"),LB=Ao("Error"),Yw=Ao("Symbol"),Xw=Ao("ArrayBuffer");var Kw=Ao("Function"),RB=cv.document&&cv.document.childNodes;typeof/./!="function"&&typeof Int8Array!="object"&&typeof RB!="function"&&(Kw=function(e){return typeof e=="function"||!1});const no=Kw,Jw=Ao("Object");var eb=MB&&Jw(new DataView(new ArrayBuffer(8))),i2=typeof Map<"u"&&Jw(new Map),FB=Ao("DataView");function OB(e){return e!=null&&no(e.getInt8)&&Xw(e.buffer)}const sm=eb?OB:FB,W0=TB||Ao("Array");function Ku(e,n){return e!=null&&EB.call(e,n)}var c_=Ao("Arguments");(function(){c_(arguments)||(c_=function(e){return Ku(e,"callee")})})();const r2=c_;function NB(e){return!Yw(e)&&CB(e)&&!isNaN(parseFloat(e))}function tb(e){return Ww(e)&&SB(e)}function nb(e){return function(){return e}}function ib(e){return function(n){var a=e(n);return typeof a=="number"&&a>=0&&a<=IB}}function rb(e){return function(n){return n==null?void 0:n[e]}}const om=rb("byteLength"),VB=ib(om);var UB=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;function QB(e){return pv?pv(e)&&!sm(e):VB(e)&&UB.test(Ef.call(e))}const Ab=Hw?QB:nb(!1),aa=rb("length");function GB(e){for(var n={},a=e.length,d=0;d<a;++d)n[e[d]]=!0;return{contains:function(w){return n[w]===!0},push:function(w){return n[w]=!0,e.push(w)}}}function sb(e,n){n=GB(n);var a=mv.length,d=e.constructor,w=no(d)&&d.prototype||n2,M="constructor";for(Ku(e,M)&&!n.contains(M)&&n.push(M);a--;)M=mv[a],M in e&&e[M]!==w[M]&&!n.contains(M)&&n.push(M)}function RA(e){if(!j0(e))return[];if(fv)return fv(e);var n=[];for(var a in e)Ku(e,a)&&n.push(a);return $w&&sb(e,n),n}function qB(e){if(e==null)return!0;var n=aa(e);return typeof n=="number"&&(W0(e)||wm(e)||r2(e))?n===0:aa(RA(e))===0}function ob(e,n){var a=RA(n),d=a.length;if(e==null)return!d;for(var w=Object(e),M=0;M<d;M++){var P=a[M];if(n[P]!==w[P]||!(P in w))return!1}return!0}function hr(e){if(e instanceof hr)return e;if(!(this instanceof hr))return new hr(e);this._wrapped=e}hr.VERSION=Zw;hr.prototype.value=function(){return this._wrapped};hr.prototype.valueOf=hr.prototype.toJSON=hr.prototype.value;hr.prototype.toString=function(){return String(this._wrapped)};function gv(e){return new Uint8Array(e.buffer||e,e.byteOffset||0,om(e))}var _v="[object DataView]";function h_(e,n,a,d){if(e===n)return e!==0||1/e===1/n;if(e==null||n==null)return!1;if(e!==e)return n!==n;var w=typeof e;return w!=="function"&&w!=="object"&&typeof n!="object"?!1:ab(e,n,a,d)}function ab(e,n,a,d){e instanceof hr&&(e=e._wrapped),n instanceof hr&&(n=n._wrapped);var w=Ef.call(e);if(w!==Ef.call(n))return!1;if(eb&&w=="[object Object]"&&sm(e)){if(!sm(n))return!1;w=_v}switch(w){case"[object RegExp]":case"[object String]":return""+e==""+n;case"[object Number]":return+e!=+e?+n!=+n:+e==0?1/+e===1/n:+e==+n;case"[object Date]":case"[object Boolean]":return+e==+n;case"[object Symbol]":return hv.valueOf.call(e)===hv.valueOf.call(n);case"[object ArrayBuffer]":case _v:return ab(gv(e),gv(n),a,d)}var M=w==="[object Array]";if(!M&&Ab(e)){var P=om(e);if(P!==om(n))return!1;if(e.buffer===n.buffer&&e.byteOffset===n.byteOffset)return!0;M=!0}if(!M){if(typeof e!="object"||typeof n!="object")return!1;var c=e.constructor,U=n.constructor;if(c!==U&&!(no(c)&&c instanceof c&&no(U)&&U instanceof U)&&"constructor"in e&&"constructor"in n)return!1}a=a||[],d=d||[];for(var O=a.length;O--;)if(a[O]===e)return d[O]===n;if(a.push(e),d.push(n),M){if(O=e.length,O!==n.length)return!1;for(;O--;)if(!h_(e[O],n[O],a,d))return!1}else{var j=RA(e),W;if(O=j.length,RA(n).length!==O)return!1;for(;O--;)if(W=j[O],!(Ku(n,W)&&h_(e[W],n[W],a,d)))return!1}return a.pop(),d.pop(),!0}function ZB(e,n){return h_(e,n)}function Ff(e){if(!j0(e))return[];var n=[];for(var a in e)n.push(a);return $w&&sb(e,n),n}function A2(e){var n=aa(e);return function(a){if(a==null)return!1;var d=Ff(a);if(aa(d))return!1;for(var w=0;w<n;w++)if(!no(a[e[w]]))return!1;return e!==cb||!no(a[s2])}}var s2="forEach",lb="has",o2=["clear","delete"],ub=["get",lb,"set"],HB=o2.concat(s2,ub),cb=o2.concat(ub),$B=["add"].concat(o2,s2,lb);const jB=i2?A2(HB):Ao("Map"),WB=i2?A2(cb):Ao("WeakMap"),YB=i2?A2($B):Ao("Set"),XB=Ao("WeakSet");function Y0(e){for(var n=RA(e),a=n.length,d=Array(a),w=0;w<a;w++)d[w]=e[n[w]];return d}function KB(e){for(var n=RA(e),a=n.length,d=Array(a),w=0;w<a;w++)d[w]=[n[w],e[n[w]]];return d}function hb(e){for(var n={},a=RA(e),d=0,w=a.length;d<w;d++)n[e[a[d]]]=a[d];return n}function f_(e){var n=[];for(var a in e)no(e[a])&&n.push(a);return n.sort()}function a2(e,n){return function(a){var d=arguments.length;if(n&&(a=Object(a)),d<2||a==null)return a;for(var w=1;w<d;w++)for(var M=arguments[w],P=e(M),c=P.length,U=0;U<c;U++){var O=P[U];(!n||a[O]===void 0)&&(a[O]=M[O])}return a}}const Fl=a2(Ff),Mf=a2(RA),l2=a2(Ff,!0);function JB(){return function(){}}function fb(e){if(!j0(e))return{};if(dv)return dv(e);var n=JB();n.prototype=e;var a=new n;return n.prototype=null,a}function eD(e,n){var a=fb(e);return n&&Mf(a,n),a}function db(e){return j0(e)?W0(e)?e.slice():Fl({},e):e}function tD(e,n){return n(e),e}function pb(e){return W0(e)?e:[e]}hr.toPath=pb;function Of(e){return hr.toPath(e)}function u2(e,n){for(var a=n.length,d=0;d<a;d++){if(e==null)return;e=e[n[d]]}return a?e:void 0}function mb(e,n,a){var d=u2(e,Of(n));return U0(d)?a:d}function bm(e,n){n=Of(n);for(var a=n.length,d=0;d<a;d++){var w=n[d];if(!Ku(e,w))return!1;e=e[w]}return!!a}function c2(e){return e}function Tf(e){return e=Mf({},e),function(n){return ob(n,e)}}function h2(e){return e=Of(e),function(n){return u2(n,e)}}function Nf(e,n,a){if(n===void 0)return e;switch(a??3){case 1:return function(d){return e.call(n,d)};case 3:return function(d,w,M){return e.call(n,d,w,M)};case 4:return function(d,w,M,P){return e.call(n,d,w,M,P)}}return function(){return e.apply(n,arguments)}}function gb(e,n,a){return e==null?c2:no(e)?Nf(e,n,a):j0(e)&&!W0(e)?Tf(e):h2(e)}function f2(e,n){return gb(e,n,1/0)}hr.iteratee=f2;function ua(e,n,a){return hr.iteratee!==f2?hr.iteratee(e,n):gb(e,n,a)}function _b(e,n,a){n=ua(n,a);for(var d=RA(e),w=d.length,M={},P=0;P<w;P++){var c=d[P];M[c]=n(e[c],c,e)}return M}function yb(){}function nD(e){return e==null?yb:function(n){return mb(e,n)}}function iD(e,n,a){var d=Array(Math.max(0,e));n=Nf(n,a,1);for(var w=0;w<e;w++)d[w]=n(w);return d}function d_(e,n){return n==null&&(n=e,e=0),e+Math.floor(Math.random()*(n-e+1))}const Sf=Date.now||function(){return new Date().getTime()};function vb(e){var n=function(M){return e[M]},a="(?:"+RA(e).join("|")+")",d=RegExp(a),w=RegExp(a,"g");return function(M){return M=M==null?"":""+M,d.test(M)?M.replace(w,n):M}}const xb={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},rD=vb(xb),AD=hb(xb),sD=vb(AD),oD=hr.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var u1=/(.)^/,aD={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},lD=/\\|'|\r|\n|\u2028|\u2029/g;function uD(e){return"\\"+aD[e]}var cD=/^\s*(\w|\$)+\s*$/;function hD(e,n,a){!n&&a&&(n=a),n=l2({},n,hr.templateSettings);var d=RegExp([(n.escape||u1).source,(n.interpolate||u1).source,(n.evaluate||u1).source].join("|")+"|$","g"),w=0,M="__p+='";e.replace(d,function(O,j,W,J,ae){return M+=e.slice(w,ae).replace(lD,uD),w=ae+O.length,j?M+=`'+
((__t=(`+j+`))==null?'':_.escape(__t))+
'`:W?M+=`'+
((__t=(`+W+`))==null?'':__t)+
'`:J&&(M+=`';
`+J+`
__p+='`),O}),M+=`';
`;var P=n.variable;if(P){if(!cD.test(P))throw new Error("variable is not a bare identifier: "+P)}else M=`with(obj||{}){
`+M+`}
`,P="obj";M=`var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};
`+M+`return __p;
`;var c;try{c=new Function(P,"_",M)}catch(O){throw O.source=M,O}var U=function(O){return c.call(this,O,hr)};return U.source="function("+P+`){
`+M+"}",U}function fD(e,n,a){n=Of(n);var d=n.length;if(!d)return no(a)?a.call(e):a;for(var w=0;w<d;w++){var M=e==null?void 0:e[n[w]];M===void 0&&(M=a,w=d),e=no(M)?M.call(e):M}return e}var dD=0;function pD(e){var n=++dD+"";return e?e+n:n}function mD(e){var n=hr(e);return n._chain=!0,n}function wb(e,n,a,d,w){if(!(d instanceof n))return e.apply(a,w);var M=fb(e.prototype),P=e.apply(M,w);return j0(P)?P:M}var nu=oa(function(e,n){var a=nu.placeholder,d=function(){for(var w=0,M=n.length,P=Array(M),c=0;c<M;c++)P[c]=n[c]===a?arguments[w++]:n[c];for(;w<arguments.length;)P.push(arguments[w++]);return wb(e,d,this,this,P)};return d});nu.placeholder=hr;const bb=oa(function(e,n,a){if(!no(e))throw new TypeError("Bind must be called on a function");var d=oa(function(w){return wb(e,d,n,this,a.concat(w))});return d}),Pa=ib(aa);function X0(e,n,a,d){if(d=d||[],!n&&n!==0)n=1/0;else if(n<=0)return d.concat(e);for(var w=d.length,M=0,P=aa(e);M<P;M++){var c=e[M];if(Pa(c)&&(W0(c)||r2(c)))if(n>1)X0(c,n-1,a,d),w=d.length;else for(var U=0,O=c.length;U<O;)d[w++]=c[U++];else a||(d[w++]=c)}return d}const gD=oa(function(e,n){n=X0(n,!1,!1);var a=n.length;if(a<1)throw new Error("bindAll must be passed function names");for(;a--;){var d=n[a];e[d]=bb(e[d],e)}return e});function _D(e,n){var a=function(d){var w=a.cache,M=""+(n?n.apply(this,arguments):d);return Ku(w,M)||(w[M]=e.apply(this,arguments)),w[M]};return a.cache={},a}const kb=oa(function(e,n,a){return setTimeout(function(){return e.apply(null,a)},n)}),yD=nu(kb,hr,1);function vD(e,n,a){var d,w,M,P,c=0;a||(a={});var U=function(){c=a.leading===!1?0:Sf(),d=null,P=e.apply(w,M),d||(w=M=null)},O=function(){var j=Sf();!c&&a.leading===!1&&(c=j);var W=n-(j-c);return w=this,M=arguments,W<=0||W>n?(d&&(clearTimeout(d),d=null),c=j,P=e.apply(w,M),d||(w=M=null)):!d&&a.trailing!==!1&&(d=setTimeout(U,W)),P};return O.cancel=function(){clearTimeout(d),c=0,d=w=M=null},O}function xD(e,n,a){var d,w,M,P,c,U=function(){var j=Sf()-w;n>j?d=setTimeout(U,n-j):(d=null,a||(P=e.apply(c,M)),d||(M=c=null))},O=oa(function(j){return c=this,M=j,w=Sf(),d||(d=setTimeout(U,n),a&&(P=e.apply(c,M))),P});return O.cancel=function(){clearTimeout(d),d=M=c=null},O}function wD(e,n){return nu(n,e)}function d2(e){return function(){return!e.apply(this,arguments)}}function bD(){var e=arguments,n=e.length-1;return function(){for(var a=n,d=e[n].apply(this,arguments);a--;)d=e[a].call(this,d);return d}}function kD(e,n){return function(){if(--e<1)return n.apply(this,arguments)}}function Eb(e,n){var a;return function(){return--e>0&&(a=n.apply(this,arguments)),e<=1&&(n=null),a}}const ED=nu(Eb,2);function Mb(e,n,a){n=ua(n,a);for(var d=RA(e),w,M=0,P=d.length;M<P;M++)if(w=d[M],n(e[w],w,e))return w}function Tb(e){return function(n,a,d){a=ua(a,d);for(var w=aa(n),M=e>0?0:w-1;M>=0&&M<w;M+=e)if(a(n[M],M,n))return M;return-1}}const p2=Tb(1),Sb=Tb(-1);function Cb(e,n,a,d){a=ua(a,d,1);for(var w=a(n),M=0,P=aa(e);M<P;){var c=Math.floor((M+P)/2);a(e[c])<w?M=c+1:P=c}return M}function Ib(e,n,a){return function(d,w,M){var P=0,c=aa(d);if(typeof M=="number")e>0?P=M>=0?M:Math.max(M+c,P):c=M>=0?Math.min(M+1,c):M+c+1;else if(a&&M&&c)return M=a(d,w),d[M]===w?M:-1;if(w!==w)return M=n(Rf.call(d,P,c),tb),M>=0?M+P:-1;for(M=e>0?P:c-1;M>=0&&M<c;M+=e)if(d[M]===w)return M;return-1}}const Bb=Ib(1,p2,Cb),MD=Ib(-1,Sb);function p_(e,n,a){var d=Pa(e)?p2:Mb,w=d(e,n,a);if(w!==void 0&&w!==-1)return e[w]}function TD(e,n){return p_(e,Tf(n))}function la(e,n,a){n=Nf(n,a);var d,w;if(Pa(e))for(d=0,w=e.length;d<w;d++)n(e[d],d,e);else{var M=RA(e);for(d=0,w=M.length;d<w;d++)n(e[M[d]],M[d],e)}return e}function Mo(e,n,a){n=ua(n,a);for(var d=!Pa(e)&&RA(e),w=(d||e).length,M=Array(w),P=0;P<w;P++){var c=d?d[P]:P;M[P]=n(e[c],c,e)}return M}function Db(e){var n=function(a,d,w,M){var P=!Pa(a)&&RA(a),c=(P||a).length,U=e>0?0:c-1;for(M||(w=a[P?P[U]:U],U+=e);U>=0&&U<c;U+=e){var O=P?P[U]:U;w=d(w,a[O],O,a)}return w};return function(a,d,w,M){var P=arguments.length>=3;return n(a,Nf(d,M,4),w,P)}}const c1=Db(1),yv=Db(-1);function Ba(e,n,a){var d=[];return n=ua(n,a),la(e,function(w,M,P){n(w,M,P)&&d.push(w)}),d}function Pb(e,n,a){return Ba(e,d2(ua(n)),a)}function m_(e,n,a){n=ua(n,a);for(var d=!Pa(e)&&RA(e),w=(d||e).length,M=0;M<w;M++){var P=d?d[M]:M;if(!n(e[P],P,e))return!1}return!0}function am(e,n,a){n=ua(n,a);for(var d=!Pa(e)&&RA(e),w=(d||e).length,M=0;M<w;M++){var P=d?d[M]:M;if(n(e[P],P,e))return!0}return!1}function tu(e,n,a,d){return Pa(e)||(e=Y0(e)),(typeof a!="number"||d)&&(a=0),Bb(e,n,a)>=0}const SD=oa(function(e,n,a){var d,w;return no(n)?w=n:(n=Of(n),d=n.slice(0,-1),n=n[n.length-1]),Mo(e,function(M){var P=w;if(!P){if(d&&d.length&&(M=u2(M,d)),M==null)return;P=M[n]}return P==null?P:P.apply(M,a)})});function km(e,n){return Mo(e,h2(n))}function CD(e,n){return Ba(e,Tf(n))}function m2(e,n,a){var d=-1/0,w=-1/0,M,P;if(n==null||typeof n=="number"&&typeof e[0]!="object"&&e!=null){e=Pa(e)?e:Y0(e);for(var c=0,U=e.length;c<U;c++)M=e[c],M!=null&&M>d&&(d=M)}else n=ua(n,a),la(e,function(O,j,W){P=n(O,j,W),(P>w||P===-1/0&&d===-1/0)&&(d=O,w=P)});return d}function zb(e,n,a){var d=1/0,w=1/0,M,P;if(n==null||typeof n=="number"&&typeof e[0]!="object"&&e!=null){e=Pa(e)?e:Y0(e);for(var c=0,U=e.length;c<U;c++)M=e[c],M!=null&&M<d&&(d=M)}else n=ua(n,a),la(e,function(O,j,W){P=n(O,j,W),(P<w||P===1/0&&d===1/0)&&(d=O,w=P)});return d}var ID=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function Lb(e){return e?W0(e)?Rf.call(e):wm(e)?e.match(ID):Pa(e)?Mo(e,c2):Y0(e):[]}function Rb(e,n,a){if(n==null||a)return Pa(e)||(e=Y0(e)),e[d_(e.length-1)];var d=Lb(e),w=aa(d);n=Math.max(Math.min(n,w),0);for(var M=w-1,P=0;P<n;P++){var c=d_(P,M),U=d[P];d[P]=d[c],d[c]=U}return d.slice(0,n)}function BD(e){return Rb(e,1/0)}function Fb(e,n,a){var d=0;return n=ua(n,a),km(Mo(e,function(w,M,P){return{value:w,index:d++,criteria:n(w,M,P)}}).sort(function(w,M){var P=w.criteria,c=M.criteria;if(P!==c){if(P>c||P===void 0)return 1;if(P<c||c===void 0)return-1}return w.index-M.index}),"value")}function Em(e,n){return function(a,d,w){var M=n?[[],[]]:{};return d=ua(d,w),la(a,function(P,c){var U=d(P,c,a);e(M,P,U)}),M}}const DD=Em(function(e,n,a){Ku(e,a)?e[a].push(n):e[a]=[n]}),PD=Em(function(e,n,a){e[a]=n}),zD=Em(function(e,n,a){Ku(e,a)?e[a]++:e[a]=1}),LD=Em(function(e,n,a){e[a?0:1].push(n)},!0);function RD(e){return e==null?0:Pa(e)?e.length:RA(e).length}function FD(e,n,a){return n in a}const g2=oa(function(e,n){var a={},d=n[0];if(e==null)return a;no(d)?(n.length>1&&(d=Nf(d,n[1])),n=Ff(e)):(d=FD,n=X0(n,!1,!1),e=Object(e));for(var w=0,M=n.length;w<M;w++){var P=n[w],c=e[P];d(c,P,e)&&(a[P]=c)}return a}),OD=oa(function(e,n){var a=n[0],d;return no(a)?(a=d2(a),n.length>1&&(d=n[1])):(n=Mo(X0(n,!1,!1),String),a=function(w,M){return!tu(n,M)}),g2(e,a,d)});function Ob(e,n,a){return Rf.call(e,0,Math.max(0,e.length-(n==null||a?1:n)))}function h1(e,n,a){return e==null||e.length<1?n==null||a?void 0:[]:n==null||a?e[0]:Ob(e,e.length-n)}function P0(e,n,a){return Rf.call(e,n==null||a?1:n)}function ND(e,n,a){return e==null||e.length<1?n==null||a?void 0:[]:n==null||a?e[e.length-1]:P0(e,Math.max(0,e.length-n))}function Nb(e){return Ba(e,Boolean)}function VD(e,n){return X0(e,n,!1)}const Vb=oa(function(e,n){return n=X0(n,!0,!0),Ba(e,function(a){return!tu(n,a)})}),UD=oa(function(e,n){return Vb(e,n)});function g_(e,n,a,d){jw(n)||(d=a,a=n,n=!1),a!=null&&(a=ua(a,d));for(var w=[],M=[],P=0,c=aa(e);P<c;P++){var U=e[P],O=a?a(U,P,e):U;n&&!a?((!P||M!==O)&&w.push(U),M=O):a?tu(M,O)||(M.push(O),w.push(U)):tu(w,U)||w.push(U)}return w}const Ub=oa(function(e){return g_(X0(e,!0,!0))});function Qb(e){for(var n=[],a=arguments.length,d=0,w=aa(e);d<w;d++){var M=e[d];if(!tu(n,M)){var P;for(P=1;P<a&&tu(arguments[P],M);P++);P===a&&n.push(M)}}return n}function __(e){for(var n=e&&m2(e,aa).length||0,a=Array(n),d=0;d<n;d++)a[d]=km(e,d);return a}const QD=oa(__);function Sp(e,n){for(var a={},d=0,w=aa(e);d<w;d++)n?a[e[d]]=n[d]:a[e[d][0]]=e[d][1];return a}function GD(e,n,a){n==null&&(n=e||0,e=0),a||(a=n<e?-1:1);for(var d=Math.max(Math.ceil((n-e)/a),0),w=Array(d),M=0;M<d;M++,e+=a)w[M]=e;return w}function qD(e,n){if(n==null||n<1)return[];for(var a=[],d=0,w=e.length;d<w;)a.push(Rf.call(e,d,d+=n));return a}function _2(e,n){return e._chain?hr(n).chain():n}function Gb(e){return la(f_(e),function(n){var a=hr[n]=e[n];hr.prototype[n]=function(){var d=[this._wrapped];return kB.apply(d,arguments),_2(this,a.apply(hr,d))}}),hr}la(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var n=xm[e];hr.prototype[e]=function(){var a=this._wrapped;return a!=null&&(n.apply(a,arguments),(e==="shift"||e==="splice")&&a.length===0&&delete a[0]),_2(this,a)}});la(["concat","join","slice"],function(e){var n=xm[e];hr.prototype[e]=function(){var a=this._wrapped;return a!=null&&(a=n.apply(a,arguments)),_2(this,a)}});const ZD=Object.freeze(Object.defineProperty({__proto__:null,VERSION:Zw,after:kD,all:m_,allKeys:Ff,any:am,assign:Mf,before:Eb,bind:bb,bindAll:gD,chain:mD,chunk:qD,clone:db,collect:Mo,compact:Nb,compose:bD,constant:nb,contains:tu,countBy:zD,create:eD,debounce:xD,default:hr,defaults:l2,defer:yD,delay:kb,detect:p_,difference:Vb,drop:P0,each:la,escape:rD,every:m_,extend:Fl,extendOwn:Mf,filter:Ba,find:p_,findIndex:p2,findKey:Mb,findLastIndex:Sb,findWhere:TD,first:h1,flatten:VD,foldl:c1,foldr:yv,forEach:la,functions:f_,get:mb,groupBy:DD,has:bm,head:h1,identity:c2,include:tu,includes:tu,indexBy:PD,indexOf:Bb,initial:Ob,inject:c1,intersection:Qb,invert:hb,invoke:SD,isArguments:r2,isArray:W0,isArrayBuffer:Xw,isBoolean:jw,isDataView:sm,isDate:PB,isElement:DB,isEmpty:qB,isEqual:ZB,isError:LB,isFinite:NB,isFunction:no,isMap:jB,isMatch:ob,isNaN:tb,isNull:BB,isNumber:Ww,isObject:j0,isRegExp:zB,isSet:YB,isString:wm,isSymbol:Yw,isTypedArray:Ab,isUndefined:U0,isWeakMap:WB,isWeakSet:XB,iteratee:f2,keys:RA,last:ND,lastIndexOf:MD,map:Mo,mapObject:_b,matcher:Tf,matches:Tf,max:m2,memoize:_D,methods:f_,min:zb,mixin:Gb,negate:d2,noop:yb,now:Sf,object:Sp,omit:OD,once:ED,pairs:KB,partial:nu,partition:LD,pick:g2,pluck:km,property:h2,propertyOf:nD,random:d_,range:GD,reduce:c1,reduceRight:yv,reject:Pb,rest:P0,restArguments:oa,result:fD,sample:Rb,select:Ba,shuffle:BD,size:RD,some:am,sortBy:Fb,sortedIndex:Cb,tail:P0,take:h1,tap:tD,template:hD,templateSettings:oD,throttle:vD,times:iD,toArray:Lb,toPath:pb,transpose:__,unescape:sD,union:Ub,uniq:g_,unique:g_,uniqueId:pD,unzip:__,values:Y0,where:CD,without:UD,wrap:wD,zip:QD},Symbol.toStringTag,{value:"Module"}));var vv=Gb(ZD);vv._=vv;var HD=function(e,n){var a;return parseString(e,function(d,w){a=w["nex:nexml"].trees[0].tree.map(function(M){var P=M.node.map(W=>W.$),c=P.reduce(function(W,J){return J.edges=[],J.name=J.id,W[J.id]=J,W},{}),U=P.filter(W=>W.root),O=U>0?U[0].id:P[0].id;c[O].name="root",M.edge.map(W=>W.$).forEach(function(W){c[W.source].edges.push(W)});function j(W,J){if(W.edges){var ae=km(W.edges,"target");W.children=Y0(g2(c,ae)),W.children.forEach(function(be,Ze){be.attribute=W.edges[Ze].length||""}),W.children.forEach(j),W.annotation=""}}return j(c[O]),c[O]})}),a};function $D(e,n,a,d){let w=this.nodes.descendants();if(e.parent&&w.indexOf(e)>=0){let P=e.parent.children.indexOf(e),c={name:a,parent:e.parent,attribute:d?d[2]:null,original_child_order:e.original_child_order},U={name:n,parent:c,attribute:d?d[1]:null,original_child_order:2};c.children=[e,U],e.parent.children[P]=c,e.parent=c,e.attribute=d?d[0]:null,e.original_child_order=1}return this}function jD(e,n){return e.children?e.children.push(n):e.children=[n],e}function WD(e,n){return{data:{name:e,attribute:n?n[1]:null},parent:""}}function YD(e){let n=this.nodes.descendants();if(typeof e!="number")return this.deleteANode(n.indexOf(e));if(e>0&&e<n.length){let a=n[e];if(a.parent){let d=a.parent.children.indexOf(a);d>=0&&(n.splice(e,1),a.children&&a.children.forEach(function(w){w.original_child_order=a.parent.children.length,a.parent.children.push(w),w.parent=a.parent}),a.parent.children.length>2?a.parent.children.splice(d,1):a.parent.parent?(a.parent.parent.children[a.parent.parent.children.indexOf(a.parent)]=a.parent.children[1-d],a.parent.children[1-d].parent=a.parent.parent,n.splice(n.indexOf(a.parent),1)):(n.splice(0,1),n.parent=null,delete n.data.attribute,delete n.data.annotation,delete n.data.original_child_order,n.name="root",n.data.name="root"))}}return this}function XD(){return Ba(this.nodes.descendants(),e=>!bm(e,"children"))}function KD(){return Ba(this.nodes.descendants(),e=>bm(e,"children"))}function JD(){return this.nodes}function eP(){return this.nodes}function tP(e){return Ba(this.nodes.descendants(),n=>n.data.name==e)[0]}function nP(e){la(this.nodes.descendants(),function(n){n.data&&n.data.name in e&&(n.annotations=e[n.data.name])})}function Wr(e){return!bm(e,"children")}function iP(e,n){return this.nodes.each(function(a){e in a&&(n&&(a[n]=a[e]),delete a[e])}),this}function rP(e){e||this.nodes.each(n=>{Wr(n)||(n[this.selection_attribute_name]=!1,n.data.traits||(n.data.traits={}),n.data.traits[this.selection_attribute_name]=n[this.selection_attribute_name])})}function qb(e,n,a){let d=[];function w(M){Wr(M)?n&&M!=e&&d.push(M):(a&&M!=e&&d.push(M),M.children.forEach(w))}return w(e),d}const AP=Object.freeze(Object.defineProperty({__proto__:null,addChild:jD,assignAttributes:nP,clearInternalNodes:rP,createNode:WD,deleteANode:YD,getInternals:KD,getNodeByName:tP,getNodes:eP,getRootNode:JD,getTips:XD,graftANode:$D,isLeafNode:Wr,selectAllDescendants:qb,updateKeyName:iP},Symbol.toStringTag,{value:"Module"}));function Cf(e,n={}){const a=/^-?\d+(\.\d+)?$/;let d=n.left_delimiter||"{",w=n.right_delimiter||"}",M=[];function P(){let Qe={name:null},nt=M[M.length-1];"children"in nt||(nt.children=[]),M.push(Qe),nt.children.push(M[M.length-1]),M[M.length-1].original_child_order=nt.children.length}function c(){let Qe=M.pop();Qe.name=j,"children"in Qe?Qe.bootstrap_values=j:Qe.name=j,Qe.attribute=W,d=="["&&J.includes("&&NHX")?J.split(":").slice(1).forEach(nt=>{const[it,xt]=nt.split("=");Qe[it]=a.test(xt)?+xt:xt}):Qe.annotation=J,j="",W="",J=""}function U(Qe){return{json:null,error:"Unexpected '"+e[Qe]+"' in '"+e.substring(Qe-20,Qe+1)+"[ERROR HERE]"+e.substring(Qe+1,Qe+20)+"'"}}let O=0,j="",W="",J="",ae=null,be={"'":1,'"':1},Ze={name:"root"};M.push(Ze);for(var xe=/\s/,Ce=0;Ce<e.length;Ce++)try{var je=e[Ce];switch(O){case 0:{je=="("&&(P(),O=1);break}case 1:case 3:{if(je==":")O=3;else if(je==","||je==")")try{c(),O=1,je==","&&P()}catch{return U(Ce)}else if(je=="("){if(j.length>0)return U(Ce);P()}else if(je in be){if(O==1&&j.length===0&&W.length===0&&J.length===0){O=2,ae=je;continue}return U(Ce)}else if(je==d){if(J.length)return U(Ce);O=4}else if(O==3)W+=je;else{if(xe.test(je))continue;if(je==";"){Ce=e.length;break}j+=je}break}case 2:{if(je==ae){if(Ce<e.length-1&&e[Ce+1]==ae){Ce++,j+=ae;continue}ae=0,O=1;continue}else j+=je;break}case 4:{if(je==w)O=3;else{if(je==d)return U(Ce);J+=je}break}}}catch{return U(Ce)}return M.length!=1?U(e.length-1):{json:Ze,error:null}}function sP(e,n){let a=this;e||(e=M=>"");function d(M){if(M.notshown)return;if(Wr(M)||(w.push("("),M.children.forEach(function(c,U){U&&w.push(","),d(c)}),w.push(")")),M.data.name!=="root"){const c=M.data.name.replaceAll("'","''");/\W/.test(c)?w.push("'"+c+"'"):w.push(c)}w.push(e(M));let P=a.branch_length_accessor(M);P!==void 0&&w.push(":"+P)}let w=[];return e=e||"",d(n||this.nodes),w.join("")+";"}function oP(e){let n=e,a=n.toUpperCase().indexOf("BEGIN DATA;"),d=n.slice(a);if(d.length<2)return"";a=d.toUpperCase().indexOf("END;");let w=d.slice(0,a);d=Mo(w.split(";"),U=>U.trim());let M=Ba(d,U=>U.toUpperCase().startsWith("DIMENSION"));M=M[0].split(" "),M=Sp(Mo(P0(M),U=>U.split("=")));let P=Ba(d,U=>U.toUpperCase().startsWith("FORMAT"));P=P[0].split(" "),P=Sp(Mo(P0(P),U=>U.split("="))),P.symbols=Pb(P.symbols.split(""),U=>U=='"');let c=Ba(d,U=>U.toUpperCase().startsWith("MATRIX"));return c=c[0].split(`
`),c=Sp(Mo(P0(c),U=>Nb(U.split(" ")))),c=_b(c,(U,O)=>U=="?"?P.symbols:Array(U)),{dimensions:M,format:P,matrix:c}}function aP(e,n,a){la(e.getTips(),d=>{d.data.test=a.matrix[d.data.name]})}function Zb(e){let n=e,a=n.toUpperCase().indexOf("BEGIN TREES;"),d=n.slice(a);if(d.length<2)return"";a=d.toUpperCase().indexOf("END;");let M=d.slice(0,a).split(`
`);return M=Ba(M,P=>P.trim().toUpperCase().startsWith("TREE")),Cf(M[0])}const lP=Object.freeze(Object.defineProperty({__proto__:null,default:Zb,loadAnnotations:aP,parseAnnotations:oP},Symbol.toStringTag,{value:"Module"}));function y_(e){var n={};if(e.nodeType==1){if(e.attributes.length>0){n["@attributes"]={};for(var a=0;a<e.attributes.length;a++){var d=e.attributes.item(a);n["@attributes"][d.nodeName]=d.nodeValue}}}else e.nodeType==3&&(n=e.nodeValue);if(e.hasChildNodes()&&e.childNodes.length===1&&e.childNodes[0].nodeType===3)n=e.childNodes[0].nodeValue;else if(e.hasChildNodes())for(var w=0;w<e.childNodes.length;w++){var M=e.childNodes.item(w),P=M.nodeName;if(typeof n[P]>"u")n[P]=y_(M);else{if(typeof n[P].push>"u"){var c=n[P];n[P]=[],n[P].push(c)}n[P].push(y_(M))}}return n}var Hb=function(e,n){function a(w,M){w.clade&&(w.clade.forEach(a),w.children=w.clade,delete w.clade),w.annotation=1,w.attribute="0.01",w.branch_length&&(w.attribute=w.branch_length),w.taxonomy&&(w.name=w.taxonomy.scientific_name),w.annotation=""}var d;return e=y_(e),d=e.phyloxml.phylogeny.clade,d.name="root",a(d),{json:d,error:null}};function uP(e,n){n.left_delimiter="[",n.right_delimiter="]";const a=Cf(e,n);function d(w){if(w.annotation){w.beast={};const P=w.annotation.split(/=|,|{|}/).filter(c=>c);for(var M=0;M<P.length;M+=2){let c=P[M].replace(/&|%/g,"");/[a-df-zA-DF-Z]+/.test(P[M+2])?w.beast[c]=+P[M+1]:(w.beast[c]=[+P[M+1],+P[M+2]],M++)}}w.annotation=void 0,w.children&&w.children.forEach(d)}return d(a.json),a}var f1={nexml:HD,phyloxml:Hb,nexus:Zb,nwk:Cf,nhx:Cf,beast:uP};function cP(){let n=this.getTips(),a=Mo(n,d=>({name:d.data.name,length:parseFloat(d.data.attribute)}));return a=Fb(a,d=>-d.length),a}function hP(e,n){function a(w,M){if(M.mp=[[0,0],[!1,!1]],Wr(M))M.mp[1][0]=M.mp[1][1]=M[w]||!1,M.mp[0][0]=M.mp[1][0]?1:0,M.mp[0][1]=1-M.mp[0][0];else{M.children.forEach(d);var P=M.children.reduce(function(U,O){return O.mp[0][0]+U},0),c=M.children.reduce(function(U,O){return O.mp[0][1]+U},0);M[w]?(M.mp[0][0]=c+1,M.mp[1][0]=!0,M.mp[0][1]=c,M.mp[1][1]=!0):(P<c+1?(M.mp[0][0]=P,M.mp[1][0]=!1):(M.mp[0][0]=c+1,M.mp[1][0]=!0),c<P+1?(M.mp[0][1]=c,M.mp[1][1]=!0):(M.mp[0][1]=P+1,M.mp[1][1]=!1))}}const d=nu(a,n);d(this.nodes),this.nodes.each(w=>{w.parent?w.mp=w.mp[1][w.parent.mp?1:0]:w.mp=w.mp[1][w.mp[0][0]<w.mp[0][1]?0:1]}),this.display.modifySelection((w,M)=>Wr(w.target)?w.target[n]:w.target.mp)}var Ic=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function $b(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function fP(e){if(e.__esModule)return e;var n=e.default;if(typeof n=="function"){var a=function d(){return this instanceof d?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};a.prototype=n.prototype}else a={};return Object.defineProperty(a,"__esModule",{value:!0}),Object.keys(e).forEach(function(d){var w=Object.getOwnPropertyDescriptor(e,d);Object.defineProperty(a,d,w.get?w:{enumerable:!0,get:function(){return e[d]}})}),a}var lm={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */lm.exports;(function(e,n){(function(){var a,d="4.17.21",w=200,M="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",P="Expected a function",c="Invalid `variable` option passed into `_.template`",U="__lodash_hash_undefined__",O=500,j="__lodash_placeholder__",W=1,J=2,ae=4,be=1,Ze=2,xe=1,Ce=2,je=4,Qe=8,nt=16,it=32,xt=64,Ft=128,It=256,nn=512,Zt=30,At="...",bt=800,kt=16,De=1,at=2,lt=3,Tt=1/0,Ot=9007199254740991,Gt=17976931348623157e292,_n=NaN,hn=4294967295,vn=hn-1,Dn=hn>>>1,Qn=[["ary",Ft],["bind",xe],["bindKey",Ce],["curry",Qe],["curryRight",nt],["flip",nn],["partial",it],["partialRight",xt],["rearg",It]],di="[object Arguments]",xi="[object Array]",Ct="[object AsyncFunction]",xn="[object Boolean]",Bt="[object Date]",En="[object DOMException]",Gn="[object Error]",Lt="[object Function]",Ii="[object GeneratorFunction]",Pn="[object Map]",qi="[object Number]",Ar="[object Null]",un="[object Object]",Jn="[object Promise]",uA="[object Proxy]",pt="[object RegExp]",ei="[object Set]",_r="[object String]",pi="[object Symbol]",qn="[object Undefined]",Br="[object WeakMap]",So="[object WeakSet]",cA="[object ArrayBuffer]",FA="[object DataView]",is="[object Float32Array]",rs="[object Float64Array]",Es="[object Int8Array]",Nt="[object Int16Array]",bA="[object Int32Array]",Wi="[object Uint8Array]",Ms="[object Uint8ClampedArray]",hA="[object Uint16Array]",Ut="[object Uint32Array]",Zn=/\b__p \+= '';/g,zn=/\b(__p \+=) '' \+/g,br=/(__e\(.*?\)|\b__t\)) \+\n'';/g,OA=/&(?:amp|lt|gt|quot|#39);/g,On=/[&<>"']/g,st=RegExp(OA.source),ze=RegExp(On.source),oe=/<%-([\s\S]+?)%>/g,de=/<%([\s\S]+?)%>/g,we=/<%=([\s\S]+?)%>/g,Le=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Fe=/^\w*$/,tt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ye=/[\\^$.*+?()[\]{}|]/g,Oe=RegExp(Ye.source),Ke=/^\s+/,yt=/\s/,se=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,_e=/\{\n\/\* \[wrapped with (.+)\] \*/,We=/,? & /,dt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,t=/[()=,{}\[\]\/\s]/,K=/\\(\\)?/g,St=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Qt=/\w*$/,en=/^[-+]0x[0-9a-f]+$/i,Pt=/^0b[01]+$/i,Ht=/^\[object .+?Constructor\]$/,Bn=/^0o[0-7]+$/i,$t=/^(?:0|[1-9]\d*)$/,sn=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,oi=/($^)/,Dr=/['\n\r\u2028\u2029\\]/g,so="\\ud800-\\udfff",kr="\\u0300-\\u036f",yr="\\ufe20-\\ufe2f",oA="\\u20d0-\\u20ff",ti=kr+yr+oA,kA="\\u2700-\\u27bf",Ln="a-z\\xdf-\\xf6\\xf8-\\xff",He="\\xac\\xb1\\xd7\\xf7",Xt="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Te="\\u2000-\\u206f",kn=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Er="A-Z\\xc0-\\xd6\\xd8-\\xde",ca="\\ufe0e\\ufe0f",oo=He+Xt+Te+kn,Be="[']",mi="["+so+"]",ye="["+oo+"]",Zi="["+ti+"]",ha="\\d+",EA="["+kA+"]",za="["+Ln+"]",As="[^"+so+oo+ha+kA+Ln+Er+"]",La="\\ud83c[\\udffb-\\udfff]",Co="(?:"+Zi+"|"+La+")",Yr="[^"+so+"]",Hi="(?:\\ud83c[\\udde6-\\uddff]){2}",Pr="[\\ud800-\\udbff][\\udc00-\\udfff]",Yi="["+Er+"]",Qs="\\u200d",rl="(?:"+za+"|"+As+")",Ol="(?:"+Yi+"|"+As+")",fa="(?:"+Be+"(?:d|ll|m|re|s|t|ve))?",Ra="(?:"+Be+"(?:D|LL|M|RE|S|T|VE))?",$i=Co+"?",Fa="["+ca+"]?",Ri="(?:"+Qs+"(?:"+[Yr,Hi,Pr].join("|")+")"+Fa+$i+")*",Oa="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",da="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Al=Fa+$i+Ri,sl="(?:"+[EA,Hi,Pr].join("|")+")"+Al,pa="(?:"+[Yr+Zi+"?",Zi,Hi,Pr,mi].join("|")+")",Io=RegExp(Be,"g"),Ts=RegExp(Zi,"g"),Gs=RegExp(La+"(?="+La+")|"+pa+Al,"g"),fA=RegExp([Yi+"?"+za+"+"+fa+"(?="+[ye,Yi,"$"].join("|")+")",Ol+"+"+Ra+"(?="+[ye,Yi+rl,"$"].join("|")+")",Yi+"?"+rl+"+"+fa,Yi+"+"+Ra,da,Oa,ha,sl].join("|"),"g"),ma=RegExp("["+Qs+so+ti+ca+"]"),ao=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Bo=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ga=-1,Ti={};Ti[is]=Ti[rs]=Ti[Es]=Ti[Nt]=Ti[bA]=Ti[Wi]=Ti[Ms]=Ti[hA]=Ti[Ut]=!0,Ti[di]=Ti[xi]=Ti[cA]=Ti[xn]=Ti[FA]=Ti[Bt]=Ti[Gn]=Ti[Lt]=Ti[Pn]=Ti[qi]=Ti[un]=Ti[pt]=Ti[ei]=Ti[_r]=Ti[Br]=!1;var Rn={};Rn[di]=Rn[xi]=Rn[cA]=Rn[FA]=Rn[xn]=Rn[Bt]=Rn[is]=Rn[rs]=Rn[Es]=Rn[Nt]=Rn[bA]=Rn[Pn]=Rn[qi]=Rn[un]=Rn[pt]=Rn[ei]=Rn[_r]=Rn[pi]=Rn[Wi]=Rn[Ms]=Rn[hA]=Rn[Ut]=!0,Rn[Gn]=Rn[Lt]=Rn[Br]=!1;var Hn={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},gi={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},fr={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Fi={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},qs=parseFloat,Do=parseInt,ss=typeof Ic=="object"&&Ic&&Ic.Object===Object&&Ic,Po=typeof self=="object"&&self&&self.Object===Object&&self,Xi=ss||Po||Function("return this")(),lo=n&&!n.nodeType&&n,NA=lo&&!0&&e&&!e.nodeType&&e,os=NA&&NA.exports===lo,zr=os&&ss.process,dr=function(){try{var ot=NA&&NA.require&&NA.require("util").types;return ot||zr&&zr.binding&&zr.binding("util")}catch{}}(),_a=dr&&dr.isArrayBuffer,VA=dr&&dr.isDate,as=dr&&dr.isMap,Ss=dr&&dr.isRegExp,ol=dr&&dr.isSet,Na=dr&&dr.isTypedArray;function Xr(ot,vt,mt){switch(mt.length){case 0:return ot.call(vt);case 1:return ot.call(vt,mt[0]);case 2:return ot.call(vt,mt[0],mt[1]);case 3:return ot.call(vt,mt[0],mt[1],mt[2])}return ot.apply(vt,mt)}function su(ot,vt,mt,An){for(var Fn=-1,wi=ot==null?0:ot.length;++Fn<wi;){var sr=ot[Fn];vt(An,sr,mt(sr),ot)}return An}function aA(ot,vt){for(var mt=-1,An=ot==null?0:ot.length;++mt<An&&vt(ot[mt],mt,ot)!==!1;);return ot}function Cs(ot,vt){for(var mt=ot==null?0:ot.length;mt--&&vt(ot[mt],mt,ot)!==!1;);return ot}function Va(ot,vt){for(var mt=-1,An=ot==null?0:ot.length;++mt<An;)if(!vt(ot[mt],mt,ot))return!1;return!0}function UA(ot,vt){for(var mt=-1,An=ot==null?0:ot.length,Fn=0,wi=[];++mt<An;){var sr=ot[mt];vt(sr,mt,ot)&&(wi[Fn++]=sr)}return wi}function ls(ot,vt){var mt=ot==null?0:ot.length;return!!mt&&Zs(ot,vt,0)>-1}function Is(ot,vt,mt){for(var An=-1,Fn=ot==null?0:ot.length;++An<Fn;)if(mt(vt,ot[An]))return!0;return!1}function Ki(ot,vt){for(var mt=-1,An=ot==null?0:ot.length,Fn=Array(An);++mt<An;)Fn[mt]=vt(ot[mt],mt,ot);return Fn}function QA(ot,vt){for(var mt=-1,An=vt.length,Fn=ot.length;++mt<An;)ot[Fn+mt]=vt[mt];return ot}function us(ot,vt,mt,An){var Fn=-1,wi=ot==null?0:ot.length;for(An&&wi&&(mt=ot[++Fn]);++Fn<wi;)mt=vt(mt,ot[Fn],Fn,ot);return mt}function zo(ot,vt,mt,An){var Fn=ot==null?0:ot.length;for(An&&Fn&&(mt=ot[--Fn]);Fn--;)mt=vt(mt,ot[Fn],Fn,ot);return mt}function Lr(ot,vt){for(var mt=-1,An=ot==null?0:ot.length;++mt<An;)if(vt(ot[mt],mt,ot))return!0;return!1}var Lo=Bi("length");function Ro(ot){return ot.split("")}function al(ot){return ot.match(dt)||[]}function ai(ot,vt,mt){var An;return mt(ot,function(Fn,wi,sr){if(vt(Fn,wi,sr))return An=wi,!1}),An}function Qi(ot,vt,mt,An){for(var Fn=ot.length,wi=mt+(An?1:-1);An?wi--:++wi<Fn;)if(vt(ot[wi],wi,ot))return wi;return-1}function Zs(ot,vt,mt){return vt===vt?Di(ot,vt,mt):Qi(ot,dA,mt)}function ni(ot,vt,mt,An){for(var Fn=mt-1,wi=ot.length;++Fn<wi;)if(An(ot[Fn],vt))return Fn;return-1}function dA(ot){return ot!==ot}function Ji(ot,vt){var mt=ot==null?0:ot.length;return mt?Hs(ot,vt)/mt:_n}function Bi(ot){return function(vt){return vt==null?a:vt[ot]}}function pA(ot){return function(vt){return ot==null?a:ot[vt]}}function ll(ot,vt,mt,An,Fn){return Fn(ot,function(wi,sr,Oi){mt=An?(An=!1,wi):vt(mt,wi,sr,Oi)}),mt}function Ua(ot,vt){var mt=ot.length;for(ot.sort(vt);mt--;)ot[mt]=ot[mt].value;return ot}function Hs(ot,vt){for(var mt,An=-1,Fn=ot.length;++An<Fn;){var wi=vt(ot[An]);wi!==a&&(mt=mt===a?wi:mt+wi)}return mt}function $s(ot,vt){for(var mt=-1,An=Array(ot);++mt<ot;)An[mt]=vt(mt);return An}function Fo(ot,vt){return Ki(vt,function(mt){return[mt,ot[mt]]})}function Si(ot){return ot&&ot.slice(0,Zr(ot)+1).replace(Ke,"")}function Kr(ot){return function(vt){return ot(vt)}}function js(ot,vt){return Ki(vt,function(mt){return ot[mt]})}function cs(ot,vt){return ot.has(vt)}function Ws(ot,vt){for(var mt=-1,An=ot.length;++mt<An&&Zs(vt,ot[mt],0)>-1;);return mt}function Nl(ot,vt){for(var mt=ot.length;mt--&&Zs(vt,ot[mt],0)>-1;);return mt}function qr(ot,vt){for(var mt=ot.length,An=0;mt--;)ot[mt]===vt&&++An;return An}var Mr=pA(Hn),Jr=pA(gi);function Oo(ot){return"\\"+Fi[ot]}function Bs(ot,vt){return ot==null?a:ot[vt]}function uo(ot){return ma.test(ot)}function Qa(ot){return ao.test(ot)}function Rr(ot){for(var vt,mt=[];!(vt=ot.next()).done;)mt.push(vt.value);return mt}function Tr(ot){var vt=-1,mt=Array(ot.size);return ot.forEach(function(An,Fn){mt[++vt]=[Fn,An]}),mt}function mA(ot,vt){return function(mt){return ot(vt(mt))}}function GA(ot,vt){for(var mt=-1,An=ot.length,Fn=0,wi=[];++mt<An;){var sr=ot[mt];(sr===vt||sr===j)&&(ot[mt]=j,wi[Fn++]=mt)}return wi}function _i(ot){var vt=-1,mt=Array(ot.size);return ot.forEach(function(An){mt[++vt]=An}),mt}function qA(ot){var vt=-1,mt=Array(ot.size);return ot.forEach(function(An){mt[++vt]=[An,An]}),mt}function Di(ot,vt,mt){for(var An=mt-1,Fn=ot.length;++An<Fn;)if(ot[An]===vt)return An;return-1}function co(ot,vt,mt){for(var An=mt+1;An--;)if(ot[An]===vt)return An;return An}function gA(ot){return uo(ot)?No(ot):Lo(ot)}function Fr(ot){return uo(ot)?Ga(ot):Ro(ot)}function Zr(ot){for(var vt=ot.length;vt--&&yt.test(ot.charAt(vt)););return vt}var ZA=pA(fr);function No(ot){for(var vt=Gs.lastIndex=0;Gs.test(ot);)++vt;return vt}function Ga(ot){return ot.match(Gs)||[]}function ul(ot){return ot.match(fA)||[]}var Ys=function ot(vt){vt=vt==null?Xi:_A.defaults(Xi.Object(),vt,_A.pick(Xi,Bo));var mt=vt.Array,An=vt.Date,Fn=vt.Error,wi=vt.Function,sr=vt.Math,Oi=vt.Object,HA=vt.RegExp,qa=vt.String,er=vt.TypeError,eA=mt.prototype,MA=wi.prototype,tA=Oi.prototype,TA=vt["__core-js_shared__"],Za=MA.toString,Ei=tA.hasOwnProperty,Vl=0,ya=function(){var _=/[^.]+$/.exec(TA&&TA.keys&&TA.keys.IE_PROTO||"");return _?"Symbol(src)_1."+_:""}(),yA=tA.toString,hs=Za.call(Oi),on=Xi._,SA=HA("^"+Za.call(Ei).replace(Ye,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),CA=os?vt.Buffer:a,vA=vt.Symbol,va=vt.Uint8Array,Kt=CA?CA.allocUnsafe:a,Vo=mA(Oi.getPrototypeOf,Oi),Ha=Oi.create,Ds=tA.propertyIsEnumerable,ho=eA.splice,$a=vA?vA.isConcatSpreadable:a,fo=vA?vA.iterator:a,Ps=vA?vA.toStringTag:a,or=function(){try{var _=pu(Oi,"defineProperty");return _({},"",{}),_}catch{}}(),cl=vt.clearTimeout!==Xi.clearTimeout&&vt.clearTimeout,hl=An&&An.now!==Xi.Date.now&&An.now,fl=vt.setTimeout!==Xi.setTimeout&&vt.setTimeout,po=sr.ceil,Or=sr.floor,$A=Oi.getOwnPropertySymbols,Uo=CA?CA.isBuffer:a,ja=vt.isFinite,Qo=eA.join,Wa=mA(Oi.keys,Oi),ii=sr.max,Ni=sr.min,Pi=An.now,Vr=vt.parseInt,Tn=sr.random,IA=eA.reverse,Ya=pu(vt,"DataView"),fs=pu(vt,"Map"),xa=pu(vt,"Promise"),pr=pu(vt,"Set"),Hr=pu(vt,"WeakMap"),ct=pu(Oi,"create"),wt=Hr&&new Hr,jA={},Go=wl(Ya),qo=wl(fs),Mi=wl(xa),WA=wl(pr),Vi=wl(Hr),p=vA?vA.prototype:a,y=p?p.valueOf:a,v=p?p.toString:a;function x(_){if(Re(_)&&!o(_)&&!(_ instanceof H)){if(_ instanceof N)return _;if(Ei.call(_,"__wrapped__"))return Th(_)}return new N(_)}var R=function(){function _(){}return function(S){if(!Ie(S))return{};if(Ha)return Ha(S);_.prototype=S;var G=new _;return _.prototype=a,G}}();function V(){}function N(_,S){this.__wrapped__=_,this.__actions__=[],this.__chain__=!!S,this.__index__=0,this.__values__=a}x.templateSettings={escape:oe,evaluate:de,interpolate:we,variable:"",imports:{_:x}},x.prototype=V.prototype,x.prototype.constructor=x,N.prototype=R(V.prototype),N.prototype.constructor=N;function H(_){this.__wrapped__=_,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=hn,this.__views__=[]}function te(){var _=new H(this.__wrapped__);return _.__actions__=ms(this.__actions__),_.__dir__=this.__dir__,_.__filtered__=this.__filtered__,_.__iteratees__=ms(this.__iteratees__),_.__takeCount__=this.__takeCount__,_.__views__=ms(this.__views__),_}function le(){if(this.__filtered__){var _=new H(this);_.__dir__=-1,_.__filtered__=!0}else _=this.clone(),_.__dir__*=-1;return _}function pe(){var _=this.__wrapped__.value(),S=this.__dir__,G=o(_),ee=S<0,he=G?_.length:0,ke=$m(0,he,this.__views__),$e=ke.start,Je=ke.end,ut=Je-$e,Dt=ee?Je:$e-1,zt=this.__iteratees__,Vt=zt.length,yn=0,In=Ni(ut,this.__takeCount__);if(!G||!ee&&he==ut&&In==ut)return oh(_,this.__actions__);var Yn=[];e:for(;ut--&&yn<In;){Dt+=S;for(var ki=-1,Xn=_[Dt];++ki<Vt;){var Li=zt[ki],Gi=Li.iteratee,Ta=Li.type,Eo=Gi(Xn);if(Ta==at)Xn=Eo;else if(!Eo){if(Ta==De)continue e;break e}}Yn[yn++]=Xn}return Yn}H.prototype=R(V.prototype),H.prototype.constructor=H;function Ge(_){var S=-1,G=_==null?0:_.length;for(this.clear();++S<G;){var ee=_[S];this.set(ee[0],ee[1])}}function Ee(){this.__data__=ct?ct(null):{},this.size=0}function Se(_){var S=this.has(_)&&delete this.__data__[_];return this.size-=S?1:0,S}function C(_){var S=this.__data__;if(ct){var G=S[_];return G===U?a:G}return Ei.call(S,_)?S[_]:a}function i(_){var S=this.__data__;return ct?S[_]!==a:Ei.call(S,_)}function h(_,S){var G=this.__data__;return this.size+=this.has(_)?0:1,G[_]=ct&&S===a?U:S,this}Ge.prototype.clear=Ee,Ge.prototype.delete=Se,Ge.prototype.get=C,Ge.prototype.has=i,Ge.prototype.set=h;function b(_){var S=-1,G=_==null?0:_.length;for(this.clear();++S<G;){var ee=_[S];this.set(ee[0],ee[1])}}function E(){this.__data__=[],this.size=0}function B(_){var S=this.__data__,G=_t(S,_);if(G<0)return!1;var ee=S.length-1;return G==ee?S.pop():ho.call(S,G,1),--this.size,!0}function F(_){var S=this.__data__,G=_t(S,_);return G<0?a:S[G][1]}function A(_){return _t(this.__data__,_)>-1}function s(_,S){var G=this.__data__,ee=_t(G,_);return ee<0?(++this.size,G.push([_,S])):G[ee][1]=S,this}b.prototype.clear=E,b.prototype.delete=B,b.prototype.get=F,b.prototype.has=A,b.prototype.set=s;function l(_){var S=-1,G=_==null?0:_.length;for(this.clear();++S<G;){var ee=_[S];this.set(ee[0],ee[1])}}function f(){this.size=0,this.__data__={hash:new Ge,map:new(fs||b),string:new Ge}}function m(_){var S=hc(this,_).delete(_);return this.size-=S?1:0,S}function k(_){return hc(this,_).get(_)}function I(_){return hc(this,_).has(_)}function D(_,S){var G=hc(this,_),ee=G.size;return G.set(_,S),this.size+=G.size==ee?0:1,this}l.prototype.clear=f,l.prototype.delete=m,l.prototype.get=k,l.prototype.has=I,l.prototype.set=D;function Q(_){var S=-1,G=_==null?0:_.length;for(this.__data__=new l;++S<G;)this.add(_[S])}function Z(_){return this.__data__.set(_,U),this}function X(_){return this.__data__.has(_)}Q.prototype.add=Q.prototype.push=Z,Q.prototype.has=X;function ie(_){var S=this.__data__=new b(_);this.size=S.size}function Ae(){this.__data__=new b,this.size=0}function ce(_){var S=this.__data__,G=S.delete(_);return this.size=S.size,G}function fe(_){return this.__data__.get(_)}function ve(_){return this.__data__.has(_)}function Ne(_,S){var G=this.__data__;if(G instanceof b){var ee=G.__data__;if(!fs||ee.length<w-1)return ee.push([_,S]),this.size=++G.size,this;G=this.__data__=new l(ee)}return G.set(_,S),this.size=G.size,this}ie.prototype.clear=Ae,ie.prototype.delete=ce,ie.prototype.get=fe,ie.prototype.has=ve,ie.prototype.set=Ne;function qe(_,S){var G=o(_),ee=!G&&vu(_),he=!G&&!ee&&z(_),ke=!G&&!ee&&!he&&gn(_),$e=G||ee||he||ke,Je=$e?$s(_.length,qa):[],ut=Je.length;for(var Dt in _)(S||Ei.call(_,Dt))&&!($e&&(Dt=="length"||he&&(Dt=="offset"||Dt=="parent")||ke&&(Dt=="buffer"||Dt=="byteLength"||Dt=="byteOffset")||xl(Dt,ut)))&&Je.push(Dt);return Je}function Pe(_){var S=_.length;return S?_[Ou(0,S-1)]:a}function Ve(_,S){return d0(ms(_),fn(S,0,_.length))}function Ue(_){return d0(ms(_))}function Mt(_,S,G){(G!==a&&!wo(_[S],G)||G===a&&!(S in _))&&Yt(_,S,G)}function ht(_,S,G){var ee=_[S];(!(Ei.call(_,S)&&wo(ee,G))||G===a&&!(S in _))&&Yt(_,S,G)}function _t(_,S){for(var G=_.length;G--;)if(wo(_[G][0],S))return G;return-1}function gt(_,S,G,ee){return bi(_,function(he,ke,$e){S(ee,he,G(he),$e)}),ee}function Mn(_,S){return _&&Ka(S,wr(S),_)}function cn(_,S){return _&&Ka(S,Vs(S),_)}function Yt(_,S,G){S=="__proto__"&&or?or(_,S,{configurable:!0,enumerable:!0,value:G,writable:!0}):_[S]=G}function tn(_,S){for(var G=-1,ee=S.length,he=mt(ee),ke=_==null;++G<ee;)he[G]=ke?a:ts(_,S[G]);return he}function fn(_,S,G){return _===_&&(G!==a&&(_=_<=G?_:G),S!==a&&(_=_>=S?_:S)),_}function an(_,S,G,ee,he,ke){var $e,Je=S&W,ut=S&J,Dt=S&ae;if(G&&($e=he?G(_,ee,he,ke):G(_)),$e!==a)return $e;if(!Ie(_))return _;var zt=o(_);if(zt){if($e=Wm(_),!Je)return ms(_,$e)}else{var Vt=PA(_),yn=Vt==Lt||Vt==Ii;if(z(_))return hh(_,Je);if(Vt==un||Vt==di||yn&&!he){if($e=ut||yn?{}:rd(_),!Je)return ut?Gm(_,cn($e,_)):Uu(_,Mn($e,_))}else{if(!Rn[Vt])return he?_:{};$e=h0(_,Vt,Je)}}ke||(ke=new ie);var In=ke.get(_);if(In)return In;ke.set(_,$e),Wt(_)?_.forEach(function(Xn){$e.add(an(Xn,S,G,Xn,_,ke))}):et(_)&&_.forEach(function(Xn,Li){$e.set(Li,an(Xn,S,G,Li,_,ke))});var Yn=Dt?ut?mh:Zl:ut?Vs:wr,ki=zt?a:Yn(_);return aA(ki||_,function(Xn,Li){ki&&(Li=Xn,Xn=_[Li]),ht($e,Li,an(Xn,S,G,Li,_,ke))}),$e}function Wn(_){var S=wr(_);return function(G){return bn(G,_,S)}}function bn(_,S,G){var ee=G.length;if(_==null)return!ee;for(_=Oi(_);ee--;){var he=G[ee],ke=S[he],$e=_[he];if($e===a&&!(he in _)||!ke($e))return!1}return!0}function Nn(_,S,G){if(typeof _!="function")throw new er(P);return f0(function(){_.apply(a,G)},S)}function zi(_,S,G,ee){var he=-1,ke=ls,$e=!0,Je=_.length,ut=[],Dt=S.length;if(!Je)return ut;G&&(S=Ki(S,Kr(G))),ee?(ke=Is,$e=!1):S.length>=w&&(ke=cs,$e=!1,S=new Q(S));e:for(;++he<Je;){var zt=_[he],Vt=G==null?zt:G(zt);if(zt=ee||zt!==0?zt:0,$e&&Vt===Vt){for(var yn=Dt;yn--;)if(S[yn]===Vt)continue e;ut.push(zt)}else ke(S,Vt,ee)||ut.push(zt)}return ut}var bi=fh(DA),mo=fh(vr,!0);function Zo(_,S){var G=!0;return bi(_,function(ee,he,ke){return G=!!S(ee,he,ke),G}),G}function go(_,S,G){for(var ee=-1,he=_.length;++ee<he;){var ke=_[ee],$e=S(ke);if($e!=null&&(Je===a?$e===$e&&!mn($e):G($e,Je)))var Je=$e,ut=ke}return ut}function dl(_,S,G,ee){var he=_.length;for(G=Cn(G),G<0&&(G=-G>he?0:he+G),ee=ee===a||ee>he?he:Cn(ee),ee<0&&(ee+=he),ee=G>ee?0:xA(ee);G<ee;)_[G++]=S;return _}function pl(_,S){var G=[];return bi(_,function(ee,he,ke){S(ee,he,ke)&&G.push(ee)}),G}function Ui(_,S,G,ee,he){var ke=-1,$e=_.length;for(G||(G=Ym),he||(he=[]);++ke<$e;){var Je=_[ke];S>0&&G(Je)?S>1?Ui(Je,S-1,G,ee,he):QA(he,Je):ee||(he[he.length]=Je)}return he}var nA=s0(),BA=s0(!0);function DA(_,S){return _&&nA(_,S,wr)}function vr(_,S){return _&&BA(_,S,wr)}function Nr(_,S){return UA(S,function(G){return me(_[G])})}function $r(_,S){S=Gl(S,_);for(var G=0,ee=S.length;_!=null&&G<ee;)_=_[fi(S[G++])];return G&&G==ee?_:a}function Sr(_,S,G){var ee=S(_);return o(_)?ee:QA(ee,G(_))}function Ur(_){return _==null?_===a?qn:Ar:Ps&&Ps in Oi(_)?Hm(_):od(_)}function Ul(_,S){return _>S}function J0(_,S){return _!=null&&Ei.call(_,S)}function ec(_,S){return _!=null&&S in Oi(_)}function eh(_,S,G){return _>=Ni(S,G)&&_<ii(S,G)}function ou(_,S,G){for(var ee=G?Is:ls,he=_[0].length,ke=_.length,$e=ke,Je=mt(ke),ut=1/0,Dt=[];$e--;){var zt=_[$e];$e&&S&&(zt=Ki(zt,Kr(S))),ut=Ni(zt.length,ut),Je[$e]=!G&&(S||he>=120&&zt.length>=120)?new Q($e&&zt):a}zt=_[0];var Vt=-1,yn=Je[0];e:for(;++Vt<he&&Dt.length<ut;){var In=zt[Vt],Yn=S?S(In):In;if(In=G||In!==0?In:0,!(yn?cs(yn,Yn):ee(Dt,Yn,G))){for($e=ke;--$e;){var ki=Je[$e];if(!(ki?cs(ki,Yn):ee(_[$e],Yn,G)))continue e}yn&&yn.push(Yn),Dt.push(In)}}return Dt}function Ho(_,S,G,ee){return DA(_,function(he,ke,$e){S(ee,G(he),ke,$e)}),ee}function _o(_,S,G){S=Gl(S,_),_=ld(_,S);var ee=_==null?_:_[fi(vo(S))];return ee==null?a:Xr(ee,_,G)}function yo(_){return Re(_)&&Ur(_)==di}function Xs(_){return Re(_)&&Ur(_)==cA}function $o(_){return Re(_)&&Ur(_)==Bt}function ml(_,S,G,ee,he){return _===S?!0:_==null||S==null||!Re(_)&&!Re(S)?_!==_&&S!==S:wa(_,S,G,ee,ml,he)}function wa(_,S,G,ee,he,ke){var $e=o(_),Je=o(S),ut=$e?xi:PA(_),Dt=Je?xi:PA(S);ut=ut==di?un:ut,Dt=Dt==di?un:Dt;var zt=ut==un,Vt=Dt==un,yn=ut==Dt;if(yn&&z(_)){if(!z(S))return!1;$e=!0,zt=!1}if(yn&&!zt)return ke||(ke=new ie),$e||gn(_)?id(_,S,G,ee,he,ke):ql(_,S,ut,G,ee,he,ke);if(!(G&be)){var In=zt&&Ei.call(_,"__wrapped__"),Yn=Vt&&Ei.call(S,"__wrapped__");if(In||Yn){var ki=In?_.value():_,Xn=Yn?S.value():S;return ke||(ke=new ie),he(ki,Xn,G,ee,ke)}}return yn?(ke||(ke=new ie),Zm(_,S,G,ee,he,ke)):!1}function zm(_){return Re(_)&&PA(_)==Pn}function tc(_,S,G,ee){var he=G.length,ke=he,$e=!ee;if(_==null)return!ke;for(_=Oi(_);he--;){var Je=G[he];if($e&&Je[2]?Je[1]!==_[Je[0]]:!(Je[0]in _))return!1}for(;++he<ke;){Je=G[he];var ut=Je[0],Dt=_[ut],zt=Je[1];if($e&&Je[2]){if(Dt===a&&!(ut in _))return!1}else{var Vt=new ie;if(ee)var yn=ee(Dt,zt,ut,_,S,Vt);if(!(yn===a?ml(zt,Dt,be|Ze,ee,Vt):yn))return!1}}return!0}function Qr(_){if(!Ie(_)||sd(_))return!1;var S=me(_)?SA:Ht;return S.test(wl(_))}function th(_){return Re(_)&&Ur(_)==pt}function Qf(_){return Re(_)&&PA(_)==ei}function au(_){return Re(_)&&Me(_.length)&&!!Ti[Ur(_)]}function Ql(_){return typeof _=="function"?_:_==null?Xo:typeof _=="object"?o(_)?qf(_[0],_[1]):ih(_):B2(_)}function Ru(_){if(!Hu(_))return Wa(_);var S=[];for(var G in Oi(_))Ei.call(_,G)&&G!="constructor"&&S.push(G);return S}function nh(_){if(!Ie(_))return Jm(_);var S=Hu(_),G=[];for(var ee in _)ee=="constructor"&&(S||!Ei.call(_,ee))||G.push(ee);return G}function nc(_,S){return _<S}function Gf(_,S){var G=-1,ee=u(_)?mt(_.length):[];return bi(_,function(he,ke,$e){ee[++G]=S(he,ke,$e)}),ee}function ih(_){var S=_h(_);return S.length==1&&S[0][2]?kh(S[0][0],S[0][1]):function(G){return G===_||tc(G,_,S)}}function qf(_,S){return vh(_)&&bh(S)?kh(fi(_),S):function(G){var ee=ts(G,_);return ee===a&&ee===S?xu(G,_):ml(S,ee,be|Ze)}}function Fu(_,S,G,ee,he){_!==S&&nA(S,function(ke,$e){if(he||(he=new ie),Ie(ke))Lm(_,S,$e,G,Fu,ee,he);else{var Je=ee?ee(dc(_,$e),ke,$e+"",_,S,he):a;Je===a&&(Je=ke),Mt(_,$e,Je)}},Vs)}function Lm(_,S,G,ee,he,ke,$e){var Je=dc(_,G),ut=dc(S,G),Dt=$e.get(ut);if(Dt){Mt(_,G,Dt);return}var zt=ke?ke(Je,ut,G+"",_,S,$e):a,Vt=zt===a;if(Vt){var yn=o(ut),In=!yn&&z(ut),Yn=!yn&&!In&&gn(ut);zt=ut,yn||In||Yn?o(Je)?zt=Je:g(Je)?zt=ms(Je):In?(Vt=!1,zt=hh(ut,!0)):Yn?(Vt=!1,zt=jf(ut,!0)):zt=[]:jt(ut)||vu(ut)?(zt=Je,vu(Je)?zt=XA(Je):(!Ie(Je)||me(Je))&&(zt=rd(ut))):Vt=!1}Vt&&($e.set(ut,zt),he(zt,ut,ee,ke,$e),$e.delete(ut)),Mt(_,G,zt)}function ic(_,S){var G=_.length;if(G)return S+=S<0?G:0,xl(S,G)?_[S]:a}function rh(_,S,G){S.length?S=Ki(S,function(ke){return o(ke)?function($e){return $r($e,ke.length===1?ke[0]:ke)}:ke}):S=[Xo];var ee=-1;S=Ki(S,Kr(Vn()));var he=Gf(_,function(ke,$e,Je){var ut=Ki(S,function(Dt){return Dt(ke)});return{criteria:ut,index:++ee,value:ke}});return Ua(he,function(ke,$e){return Qm(ke,$e,G)})}function Zf(_,S){return lu(_,S,function(G,ee){return xu(_,ee)})}function lu(_,S,G){for(var ee=-1,he=S.length,ke={};++ee<he;){var $e=S[ee],Je=$r(_,$e);G(Je,$e)&&cu(ke,Gl($e,_),Je)}return ke}function Rm(_){return function(S){return $r(S,_)}}function uu(_,S,G,ee){var he=ee?ni:Zs,ke=-1,$e=S.length,Je=_;for(_===S&&(S=ms(S)),G&&(Je=Ki(_,Kr(G)));++ke<$e;)for(var ut=0,Dt=S[ke],zt=G?G(Dt):Dt;(ut=he(Je,zt,ut,ee))>-1;)Je!==_&&ho.call(Je,ut,1),ho.call(_,ut,1);return _}function e0(_,S){for(var G=_?S.length:0,ee=G-1;G--;){var he=S[G];if(G==ee||he!==ke){var ke=he;xl(he)?ho.call(_,he,1):i0(_,he)}}return _}function Ou(_,S){return _+Or(Tn()*(S-_+1))}function Hf(_,S,G,ee){for(var he=-1,ke=ii(po((S-_)/(G||1)),0),$e=mt(ke);ke--;)$e[ee?ke:++he]=_,_+=G;return $e}function rc(_,S){var G="";if(!_||S<1||S>Ot)return G;do S%2&&(G+=_),S=Or(S/2),S&&(_+=_);while(S);return G}function yi(_,S){return mu(ad(_,S,Xo),_+"")}function ds(_){return Pe(Yo(_))}function Nu(_,S){var G=Yo(_);return d0(G,fn(S,0,G.length))}function cu(_,S,G,ee){if(!Ie(_))return _;S=Gl(S,_);for(var he=-1,ke=S.length,$e=ke-1,Je=_;Je!=null&&++he<ke;){var ut=fi(S[he]),Dt=G;if(ut==="__proto__"||ut==="constructor"||ut==="prototype")return _;if(he!=$e){var zt=Je[ut];Dt=ee?ee(zt,ut,Je):a,Dt===a&&(Dt=Ie(zt)?zt:xl(S[he+1])?[]:{})}ht(Je,ut,Dt),Je=Je[ut]}return _}var Ah=wt?function(_,S){return wt.set(_,S),_}:Xo,t0=or?function(_,S){return or(_,"toString",{configurable:!0,enumerable:!1,value:zg(S),writable:!0})}:Xo;function Fm(_){return d0(Yo(_))}function zs(_,S,G){var ee=-1,he=_.length;S<0&&(S=-S>he?0:he+S),G=G>he?he:G,G<0&&(G+=he),he=S>G?0:G-S>>>0,S>>>=0;for(var ke=mt(he);++ee<he;)ke[ee]=_[ee+S];return ke}function Om(_,S){var G;return bi(_,function(ee,he,ke){return G=S(ee,he,ke),!G}),!!G}function n0(_,S,G){var ee=0,he=_==null?ee:_.length;if(typeof S=="number"&&S===S&&he<=Dn){for(;ee<he;){var ke=ee+he>>>1,$e=_[ke];$e!==null&&!mn($e)&&(G?$e<=S:$e<S)?ee=ke+1:he=ke}return he}return Ac(_,S,Xo,G)}function Ac(_,S,G,ee){var he=0,ke=_==null?0:_.length;if(ke===0)return 0;S=G(S);for(var $e=S!==S,Je=S===null,ut=mn(S),Dt=S===a;he<ke;){var zt=Or((he+ke)/2),Vt=G(_[zt]),yn=Vt!==a,In=Vt===null,Yn=Vt===Vt,ki=mn(Vt);if($e)var Xn=ee||Yn;else Dt?Xn=Yn&&(ee||yn):Je?Xn=Yn&&yn&&(ee||!In):ut?Xn=Yn&&yn&&!In&&(ee||!ki):In||ki?Xn=!1:Xn=ee?Vt<=S:Vt<S;Xn?he=zt+1:ke=zt}return Ni(ke,vn)}function sh(_,S){for(var G=-1,ee=_.length,he=0,ke=[];++G<ee;){var $e=_[G],Je=S?S($e):$e;if(!G||!wo(Je,ut)){var ut=Je;ke[he++]=$e===0?0:$e}}return ke}function $f(_){return typeof _=="number"?_:mn(_)?_n:+_}function Ls(_){if(typeof _=="string")return _;if(o(_))return Ki(_,Ls)+"";if(mn(_))return v?v.call(_):"";var S=_+"";return S=="0"&&1/_==-Tt?"-0":S}function gl(_,S,G){var ee=-1,he=ls,ke=_.length,$e=!0,Je=[],ut=Je;if(G)$e=!1,he=Is;else if(ke>=w){var Dt=S?null:ed(_);if(Dt)return _i(Dt);$e=!1,he=cs,ut=new Q}else ut=S?[]:Je;e:for(;++ee<ke;){var zt=_[ee],Vt=S?S(zt):zt;if(zt=G||zt!==0?zt:0,$e&&Vt===Vt){for(var yn=ut.length;yn--;)if(ut[yn]===Vt)continue e;S&&ut.push(Vt),Je.push(zt)}else he(ut,Vt,G)||(ut!==Je&&ut.push(Vt),Je.push(zt))}return Je}function i0(_,S){return S=Gl(S,_),_=ld(_,S),_==null||delete _[fi(vo(S))]}function Vu(_,S,G,ee){return cu(_,S,G($r(_,S)),ee)}function ps(_,S,G,ee){for(var he=_.length,ke=ee?he:-1;(ee?ke--:++ke<he)&&S(_[ke],ke,_););return G?zs(_,ee?0:ke,ee?ke+1:he):zs(_,ee?ke+1:0,ee?he:ke)}function oh(_,S){var G=_;return G instanceof H&&(G=G.value()),us(S,function(ee,he){return he.func.apply(he.thisArg,QA([ee],he.args))},G)}function ah(_,S,G){var ee=_.length;if(ee<2)return ee?gl(_[0]):[];for(var he=-1,ke=mt(ee);++he<ee;)for(var $e=_[he],Je=-1;++Je<ee;)Je!=he&&(ke[he]=zi(ke[he]||$e,_[Je],S,G));return gl(Ui(ke,1),S,G)}function lh(_,S,G){for(var ee=-1,he=_.length,ke=S.length,$e={};++ee<he;){var Je=ee<ke?S[ee]:a;G($e,_[ee],Je)}return $e}function uh(_){return g(_)?_:[]}function ch(_){return typeof _=="function"?_:Xo}function Gl(_,S){return o(_)?_:vh(_,S)?[_]:Mh($n(_))}var Nm=yi;function Xa(_,S,G){var ee=_.length;return G=G===a?ee:G,!S&&G>=ee?_:zs(_,S,G)}var r0=cl||function(_){return Xi.clearTimeout(_)};function hh(_,S){if(S)return _.slice();var G=_.length,ee=Kt?Kt(G):new _.constructor(G);return _.copy(ee),ee}function _l(_){var S=new _.constructor(_.byteLength);return new va(S).set(new va(_)),S}function A0(_,S){var G=S?_l(_.buffer):_.buffer;return new _.constructor(G,_.byteOffset,_.byteLength)}function Vm(_){var S=new _.constructor(_.source,Qt.exec(_));return S.lastIndex=_.lastIndex,S}function Um(_){return y?Oi(y.call(_)):{}}function jf(_,S){var G=S?_l(_.buffer):_.buffer;return new _.constructor(G,_.byteOffset,_.length)}function Wf(_,S){if(_!==S){var G=_!==a,ee=_===null,he=_===_,ke=mn(_),$e=S!==a,Je=S===null,ut=S===S,Dt=mn(S);if(!Je&&!Dt&&!ke&&_>S||ke&&$e&&ut&&!Je&&!Dt||ee&&$e&&ut||!G&&ut||!he)return 1;if(!ee&&!ke&&!Dt&&_<S||Dt&&G&&he&&!ee&&!ke||Je&&G&&he||!$e&&he||!ut)return-1}return 0}function Qm(_,S,G){for(var ee=-1,he=_.criteria,ke=S.criteria,$e=he.length,Je=G.length;++ee<$e;){var ut=Wf(he[ee],ke[ee]);if(ut){if(ee>=Je)return ut;var Dt=G[ee];return ut*(Dt=="desc"?-1:1)}}return _.index-S.index}function Yf(_,S,G,ee){for(var he=-1,ke=_.length,$e=G.length,Je=-1,ut=S.length,Dt=ii(ke-$e,0),zt=mt(ut+Dt),Vt=!ee;++Je<ut;)zt[Je]=S[Je];for(;++he<$e;)(Vt||he<ke)&&(zt[G[he]]=_[he]);for(;Dt--;)zt[Je++]=_[he++];return zt}function Xf(_,S,G,ee){for(var he=-1,ke=_.length,$e=-1,Je=G.length,ut=-1,Dt=S.length,zt=ii(ke-Je,0),Vt=mt(zt+Dt),yn=!ee;++he<zt;)Vt[he]=_[he];for(var In=he;++ut<Dt;)Vt[In+ut]=S[ut];for(;++$e<Je;)(yn||he<ke)&&(Vt[In+G[$e]]=_[he++]);return Vt}function ms(_,S){var G=-1,ee=_.length;for(S||(S=mt(ee));++G<ee;)S[G]=_[G];return S}function Ka(_,S,G,ee){var he=!G;G||(G={});for(var ke=-1,$e=S.length;++ke<$e;){var Je=S[ke],ut=ee?ee(G[Je],_[Je],Je,G,_):a;ut===a&&(ut=_[Je]),he?Yt(G,Je,ut):ht(G,Je,ut)}return G}function Uu(_,S){return Ka(_,c0(_),S)}function Gm(_,S){return Ka(_,Zu(_),S)}function xr(_,S){return function(G,ee){var he=o(G)?su:gt,ke=S?S():{};return he(G,_,Vn(ee,2),ke)}}function yl(_){return yi(function(S,G){var ee=-1,he=G.length,ke=he>1?G[he-1]:a,$e=he>2?G[2]:a;for(ke=_.length>3&&typeof ke=="function"?(he--,ke):a,$e&&Rs(G[0],G[1],$e)&&(ke=he<3?a:ke,he=1),S=Oi(S);++ee<he;){var Je=G[ee];Je&&_(S,Je,ee,ke)}return S})}function fh(_,S){return function(G,ee){if(G==null)return G;if(!u(G))return _(G,ee);for(var he=G.length,ke=S?he:-1,$e=Oi(G);(S?ke--:++ke<he)&&ee($e[ke],ke,$e)!==!1;);return G}}function s0(_){return function(S,G,ee){for(var he=-1,ke=Oi(S),$e=ee(S),Je=$e.length;Je--;){var ut=$e[_?Je:++he];if(G(ke[ut],ut,ke)===!1)break}return S}}function sc(_,S,G){var ee=S&xe,he=Gu(_);function ke(){var $e=this&&this!==Xi&&this instanceof ke?he:_;return $e.apply(ee?G:this,arguments)}return ke}function Qu(_){return function(S){S=$n(S);var G=uo(S)?Fr(S):a,ee=G?G[0]:S.charAt(0),he=G?Xa(G,1).join(""):S.slice(1);return ee[_]()+he}}function hu(_){return function(S){return us(C2(S2(S).replace(Io,"")),_,"")}}function Gu(_){return function(){var S=arguments;switch(S.length){case 0:return new _;case 1:return new _(S[0]);case 2:return new _(S[0],S[1]);case 3:return new _(S[0],S[1],S[2]);case 4:return new _(S[0],S[1],S[2],S[3]);case 5:return new _(S[0],S[1],S[2],S[3],S[4]);case 6:return new _(S[0],S[1],S[2],S[3],S[4],S[5]);case 7:return new _(S[0],S[1],S[2],S[3],S[4],S[5],S[6])}var G=R(_.prototype),ee=_.apply(G,S);return Ie(ee)?ee:G}}function o0(_,S,G){var ee=Gu(_);function he(){for(var ke=arguments.length,$e=mt(ke),Je=ke,ut=du(he);Je--;)$e[Je]=arguments[Je];var Dt=ke<3&&$e[0]!==ut&&$e[ke-1]!==ut?[]:GA($e,ut);if(ke-=Dt.length,ke<G)return uc(_,S,a0,he.placeholder,a,$e,Dt,a,a,G-ke);var zt=this&&this!==Xi&&this instanceof he?ee:_;return Xr(zt,this,$e)}return he}function oc(_){return function(S,G,ee){var he=Oi(S);if(!u(S)){var ke=Vn(G,3);S=wr(S),G=function(Je){return ke(he[Je],Je,he)}}var $e=_(S,G,ee);return $e>-1?he[ke?S[$e]:$e]:a}}function ac(_){return Ja(function(S){var G=S.length,ee=G,he=N.prototype.thru;for(_&&S.reverse();ee--;){var ke=S[ee];if(typeof ke!="function")throw new er(P);if(he&&!$e&&cc(ke)=="wrapper")var $e=new N([],!0)}for(ee=$e?ee:G;++ee<G;){ke=S[ee];var Je=cc(ke),ut=Je=="wrapper"?gh(ke):a;ut&&xh(ut[0])&&ut[1]==(Ft|Qe|it|It)&&!ut[4].length&&ut[9]==1?$e=$e[cc(ut[0])].apply($e,ut[3]):$e=ke.length==1&&xh(ke)?$e[Je]():$e.thru(ke)}return function(){var Dt=arguments,zt=Dt[0];if($e&&Dt.length==1&&o(zt))return $e.plant(zt).value();for(var Vt=0,yn=G?S[Vt].apply(this,Dt):zt;++Vt<G;)yn=S[Vt].call(this,yn);return yn}})}function a0(_,S,G,ee,he,ke,$e,Je,ut,Dt){var zt=S&Ft,Vt=S&xe,yn=S&Ce,In=S&(Qe|nt),Yn=S&nn,ki=yn?a:Gu(_);function Xn(){for(var Li=arguments.length,Gi=mt(Li),Ta=Li;Ta--;)Gi[Ta]=arguments[Ta];if(In)var Eo=du(Xn),Sa=qr(Gi,Eo);if(ee&&(Gi=Yf(Gi,ee,he,In)),ke&&(Gi=Xf(Gi,ke,$e,In)),Li-=Sa,In&&Li<Dt){var wA=GA(Gi,Eo);return uc(_,S,a0,Xn.placeholder,G,Gi,wA,Je,ut,Dt-Li)}var Ml=Vt?G:this,bu=yn?Ml[_]:_;return Li=Gi.length,Je?Gi=eg(Gi,Je):Yn&&Li>1&&Gi.reverse(),zt&&ut<Li&&(Gi.length=ut),this&&this!==Xi&&this instanceof Xn&&(bu=ki||Gu(bu)),bu.apply(Ml,Gi)}return Xn}function Kf(_,S){return function(G,ee){return Ho(G,_,S(ee),{})}}function l0(_,S){return function(G,ee){var he;if(G===a&&ee===a)return S;if(G!==a&&(he=G),ee!==a){if(he===a)return ee;typeof G=="string"||typeof ee=="string"?(G=Ls(G),ee=Ls(ee)):(G=$f(G),ee=$f(ee)),he=_(G,ee)}return he}}function fu(_){return Ja(function(S){return S=Ki(S,Kr(Vn())),yi(function(G){var ee=this;return _(S,function(he){return Xr(he,ee,G)})})})}function lc(_,S){S=S===a?" ":Ls(S);var G=S.length;if(G<2)return G?rc(S,_):S;var ee=rc(S,po(_/gA(S)));return uo(S)?Xa(Fr(ee),0,_).join(""):ee.slice(0,_)}function dh(_,S,G,ee){var he=S&xe,ke=Gu(_);function $e(){for(var Je=-1,ut=arguments.length,Dt=-1,zt=ee.length,Vt=mt(zt+ut),yn=this&&this!==Xi&&this instanceof $e?ke:_;++Dt<zt;)Vt[Dt]=ee[Dt];for(;ut--;)Vt[Dt++]=arguments[++Je];return Xr(yn,he?G:this,Vt)}return $e}function Jf(_){return function(S,G,ee){return ee&&typeof ee!="number"&&Rs(S,G,ee)&&(G=ee=a),S=ir(S),G===a?(G=S,S=0):G=ir(G),ee=ee===a?S<G?1:-1:ir(ee),Hf(S,G,ee,_)}}function qu(_){return function(S,G){return typeof S=="string"&&typeof G=="string"||(S=gr(S),G=gr(G)),_(S,G)}}function uc(_,S,G,ee,he,ke,$e,Je,ut,Dt){var zt=S&Qe,Vt=zt?$e:a,yn=zt?a:$e,In=zt?ke:a,Yn=zt?a:ke;S|=zt?it:xt,S&=~(zt?xt:it),S&je||(S&=~(xe|Ce));var ki=[_,S,he,In,Vt,Yn,yn,Je,ut,Dt],Xn=G.apply(a,ki);return xh(_)&&ud(Xn,ki),Xn.placeholder=ee,jr(Xn,_,S)}function u0(_){var S=sr[_];return function(G,ee){if(G=gr(G),ee=ee==null?0:Ni(Cn(ee),292),ee&&ja(G)){var he=($n(G)+"e").split("e"),ke=S(he[0]+"e"+(+he[1]+ee));return he=($n(ke)+"e").split("e"),+(he[0]+"e"+(+he[1]-ee))}return S(G)}}var ed=pr&&1/_i(new pr([,-0]))[1]==Tt?function(_){return new pr(_)}:Fg;function ph(_){return function(S){var G=PA(S);return G==Pn?Tr(S):G==ei?qA(S):Fo(S,_(S))}}function vl(_,S,G,ee,he,ke,$e,Je){var ut=S&Ce;if(!ut&&typeof _!="function")throw new er(P);var Dt=ee?ee.length:0;if(Dt||(S&=~(it|xt),ee=he=a),$e=$e===a?$e:ii(Cn($e),0),Je=Je===a?Je:Cn(Je),Dt-=he?he.length:0,S&xt){var zt=ee,Vt=he;ee=he=a}var yn=ut?a:gh(_),In=[_,S,G,ee,he,zt,Vt,ke,$e,Je];if(yn&&fc(In,yn),_=In[0],S=In[1],G=In[2],ee=In[3],he=In[4],Je=In[9]=In[9]===a?ut?0:_.length:ii(In[9]-Dt,0),!Je&&S&(Qe|nt)&&(S&=~(Qe|nt)),!S||S==xe)var Yn=sc(_,S,G);else S==Qe||S==nt?Yn=o0(_,S,Je):(S==it||S==(xe|it))&&!he.length?Yn=dh(_,S,G,ee):Yn=a0.apply(a,In);var ki=yn?Ah:ud;return jr(ki(Yn,In),_,S)}function td(_,S,G,ee){return _===a||wo(_,tA[G])&&!Ei.call(ee,G)?S:_}function nd(_,S,G,ee,he,ke){return Ie(_)&&Ie(S)&&(ke.set(S,_),Fu(_,S,a,nd,ke),ke.delete(S)),_}function qm(_){return jt(_)?a:_}function id(_,S,G,ee,he,ke){var $e=G&be,Je=_.length,ut=S.length;if(Je!=ut&&!($e&&ut>Je))return!1;var Dt=ke.get(_),zt=ke.get(S);if(Dt&&zt)return Dt==S&&zt==_;var Vt=-1,yn=!0,In=G&Ze?new Q:a;for(ke.set(_,S),ke.set(S,_);++Vt<Je;){var Yn=_[Vt],ki=S[Vt];if(ee)var Xn=$e?ee(ki,Yn,Vt,S,_,ke):ee(Yn,ki,Vt,_,S,ke);if(Xn!==a){if(Xn)continue;yn=!1;break}if(In){if(!Lr(S,function(Li,Gi){if(!cs(In,Gi)&&(Yn===Li||he(Yn,Li,G,ee,ke)))return In.push(Gi)})){yn=!1;break}}else if(!(Yn===ki||he(Yn,ki,G,ee,ke))){yn=!1;break}}return ke.delete(_),ke.delete(S),yn}function ql(_,S,G,ee,he,ke,$e){switch(G){case FA:if(_.byteLength!=S.byteLength||_.byteOffset!=S.byteOffset)return!1;_=_.buffer,S=S.buffer;case cA:return!(_.byteLength!=S.byteLength||!ke(new va(_),new va(S)));case xn:case Bt:case qi:return wo(+_,+S);case Gn:return _.name==S.name&&_.message==S.message;case pt:case _r:return _==S+"";case Pn:var Je=Tr;case ei:var ut=ee&be;if(Je||(Je=_i),_.size!=S.size&&!ut)return!1;var Dt=$e.get(_);if(Dt)return Dt==S;ee|=Ze,$e.set(_,S);var zt=id(Je(_),Je(S),ee,he,ke,$e);return $e.delete(_),zt;case pi:if(y)return y.call(_)==y.call(S)}return!1}function Zm(_,S,G,ee,he,ke){var $e=G&be,Je=Zl(_),ut=Je.length,Dt=Zl(S),zt=Dt.length;if(ut!=zt&&!$e)return!1;for(var Vt=ut;Vt--;){var yn=Je[Vt];if(!($e?yn in S:Ei.call(S,yn)))return!1}var In=ke.get(_),Yn=ke.get(S);if(In&&Yn)return In==S&&Yn==_;var ki=!0;ke.set(_,S),ke.set(S,_);for(var Xn=$e;++Vt<ut;){yn=Je[Vt];var Li=_[yn],Gi=S[yn];if(ee)var Ta=$e?ee(Gi,Li,yn,S,_,ke):ee(Li,Gi,yn,_,S,ke);if(!(Ta===a?Li===Gi||he(Li,Gi,G,ee,ke):Ta)){ki=!1;break}Xn||(Xn=yn=="constructor")}if(ki&&!Xn){var Eo=_.constructor,Sa=S.constructor;Eo!=Sa&&"constructor"in _&&"constructor"in S&&!(typeof Eo=="function"&&Eo instanceof Eo&&typeof Sa=="function"&&Sa instanceof Sa)&&(ki=!1)}return ke.delete(_),ke.delete(S),ki}function Ja(_){return mu(ad(_,a,gu),_+"")}function Zl(_){return Sr(_,wr,c0)}function mh(_){return Sr(_,Vs,Zu)}var gh=wt?function(_){return wt.get(_)}:Fg;function cc(_){for(var S=_.name+"",G=jA[S],ee=Ei.call(jA,S)?G.length:0;ee--;){var he=G[ee],ke=he.func;if(ke==null||ke==_)return he.name}return S}function du(_){var S=Ei.call(x,"placeholder")?x:_;return S.placeholder}function Vn(){var _=x.iteratee||Lg;return _=_===Lg?Ql:_,arguments.length?_(arguments[0],arguments[1]):_}function hc(_,S){var G=_.__data__;return Xm(S)?G[typeof S=="string"?"string":"hash"]:G.map}function _h(_){for(var S=wr(_),G=S.length;G--;){var ee=S[G],he=_[ee];S[G]=[ee,he,bh(he)]}return S}function pu(_,S){var G=Bs(_,S);return Qr(G)?G:a}function Hm(_){var S=Ei.call(_,Ps),G=_[Ps];try{_[Ps]=a;var ee=!0}catch{}var he=yA.call(_);return ee&&(S?_[Ps]=G:delete _[Ps]),he}var c0=$A?function(_){return _==null?[]:(_=Oi(_),UA($A(_),function(S){return Ds.call(_,S)}))}:Og,Zu=$A?function(_){for(var S=[];_;)QA(S,c0(_)),_=Vo(_);return S}:Og,PA=Ur;(Ya&&PA(new Ya(new ArrayBuffer(1)))!=FA||fs&&PA(new fs)!=Pn||xa&&PA(xa.resolve())!=Jn||pr&&PA(new pr)!=ei||Hr&&PA(new Hr)!=Br)&&(PA=function(_){var S=Ur(_),G=S==un?_.constructor:a,ee=G?wl(G):"";if(ee)switch(ee){case Go:return FA;case qo:return Pn;case Mi:return Jn;case WA:return ei;case Vi:return Br}return S});function $m(_,S,G){for(var ee=-1,he=G.length;++ee<he;){var ke=G[ee],$e=ke.size;switch(ke.type){case"drop":_+=$e;break;case"dropRight":S-=$e;break;case"take":S=Ni(S,_+$e);break;case"takeRight":_=ii(_,S-$e);break}}return{start:_,end:S}}function jm(_){var S=_.match(_e);return S?S[1].split(We):[]}function yh(_,S,G){S=Gl(S,_);for(var ee=-1,he=S.length,ke=!1;++ee<he;){var $e=fi(S[ee]);if(!(ke=_!=null&&G(_,$e)))break;_=_[$e]}return ke||++ee!=he?ke:(he=_==null?0:_.length,!!he&&Me(he)&&xl($e,he)&&(o(_)||vu(_)))}function Wm(_){var S=_.length,G=new _.constructor(S);return S&&typeof _[0]=="string"&&Ei.call(_,"index")&&(G.index=_.index,G.input=_.input),G}function rd(_){return typeof _.constructor=="function"&&!Hu(_)?R(Vo(_)):{}}function h0(_,S,G){var ee=_.constructor;switch(S){case cA:return _l(_);case xn:case Bt:return new ee(+_);case FA:return A0(_,G);case is:case rs:case Es:case Nt:case bA:case Wi:case Ms:case hA:case Ut:return jf(_,G);case Pn:return new ee;case qi:case _r:return new ee(_);case pt:return Vm(_);case ei:return new ee;case pi:return Um(_)}}function Ad(_,S){var G=S.length;if(!G)return _;var ee=G-1;return S[ee]=(G>1?"& ":"")+S[ee],S=S.join(G>2?", ":" "),_.replace(se,`{
/* [wrapped with `+S+`] */
`)}function Ym(_){return o(_)||vu(_)||!!($a&&_&&_[$a])}function xl(_,S){var G=typeof _;return S=S??Ot,!!S&&(G=="number"||G!="symbol"&&$t.test(_))&&_>-1&&_%1==0&&_<S}function Rs(_,S,G){if(!Ie(G))return!1;var ee=typeof S;return(ee=="number"?u(G)&&xl(S,G.length):ee=="string"&&S in G)?wo(G[S],_):!1}function vh(_,S){if(o(_))return!1;var G=typeof _;return G=="number"||G=="symbol"||G=="boolean"||_==null||mn(_)?!0:Fe.test(_)||!Le.test(_)||S!=null&&_ in Oi(S)}function Xm(_){var S=typeof _;return S=="string"||S=="number"||S=="symbol"||S=="boolean"?_!=="__proto__":_===null}function xh(_){var S=cc(_),G=x[S];if(typeof G!="function"||!(S in H.prototype))return!1;if(_===G)return!0;var ee=gh(G);return!!ee&&_===ee[0]}function sd(_){return!!ya&&ya in _}var wh=TA?me:Ng;function Hu(_){var S=_&&_.constructor,G=typeof S=="function"&&S.prototype||tA;return _===G}function bh(_){return _===_&&!Ie(_)}function kh(_,S){return function(G){return G==null?!1:G[_]===S&&(S!==a||_ in Oi(G))}}function Km(_){var S=Xu(_,function(ee){return G.size===O&&G.clear(),ee}),G=S.cache;return S}function fc(_,S){var G=_[1],ee=S[1],he=G|ee,ke=he<(xe|Ce|Ft),$e=ee==Ft&&G==Qe||ee==Ft&&G==It&&_[7].length<=S[8]||ee==(Ft|It)&&S[7].length<=S[8]&&G==Qe;if(!(ke||$e))return _;ee&xe&&(_[2]=S[2],he|=G&xe?0:je);var Je=S[3];if(Je){var ut=_[3];_[3]=ut?Yf(ut,Je,S[4]):Je,_[4]=ut?GA(_[3],j):S[4]}return Je=S[5],Je&&(ut=_[5],_[5]=ut?Xf(ut,Je,S[6]):Je,_[6]=ut?GA(_[5],j):S[6]),Je=S[7],Je&&(_[7]=Je),ee&Ft&&(_[8]=_[8]==null?S[8]:Ni(_[8],S[8])),_[9]==null&&(_[9]=S[9]),_[0]=S[0],_[1]=he,_}function Jm(_){var S=[];if(_!=null)for(var G in Oi(_))S.push(G);return S}function od(_){return yA.call(_)}function ad(_,S,G){return S=ii(S===a?_.length-1:S,0),function(){for(var ee=arguments,he=-1,ke=ii(ee.length-S,0),$e=mt(ke);++he<ke;)$e[he]=ee[S+he];he=-1;for(var Je=mt(S+1);++he<S;)Je[he]=ee[he];return Je[S]=G($e),Xr(_,this,Je)}}function ld(_,S){return S.length<2?_:$r(_,zs(S,0,-1))}function eg(_,S){for(var G=_.length,ee=Ni(S.length,G),he=ms(_);ee--;){var ke=S[ee];_[ee]=xl(ke,G)?he[ke]:a}return _}function dc(_,S){if(!(S==="constructor"&&typeof _[S]=="function")&&S!="__proto__")return _[S]}var ud=Eh(Ah),f0=fl||function(_,S){return Xi.setTimeout(_,S)},mu=Eh(t0);function jr(_,S,G){var ee=S+"";return mu(_,Ad(ee,cd(jm(ee),G)))}function Eh(_){var S=0,G=0;return function(){var ee=Pi(),he=kt-(ee-G);if(G=ee,he>0){if(++S>=bt)return arguments[0]}else S=0;return _.apply(a,arguments)}}function d0(_,S){var G=-1,ee=_.length,he=ee-1;for(S=S===a?ee:S;++G<S;){var ke=Ou(G,he),$e=_[ke];_[ke]=_[G],_[G]=$e}return _.length=S,_}var Mh=Km(function(_){var S=[];return _.charCodeAt(0)===46&&S.push(""),_.replace(tt,function(G,ee,he,ke){S.push(he?ke.replace(K,"$1"):ee||G)}),S});function fi(_){if(typeof _=="string"||mn(_))return _;var S=_+"";return S=="0"&&1/_==-Tt?"-0":S}function wl(_){if(_!=null){try{return Za.call(_)}catch{}try{return _+""}catch{}}return""}function cd(_,S){return aA(Qn,function(G){var ee="_."+G[0];S&G[1]&&!ls(_,ee)&&_.push(ee)}),_.sort()}function Th(_){if(_ instanceof H)return _.clone();var S=new N(_.__wrapped__,_.__chain__);return S.__actions__=ms(_.__actions__),S.__index__=_.__index__,S.__values__=_.__values__,S}function bl(_,S,G){(G?Rs(_,S,G):S===a)?S=1:S=ii(Cn(S),0);var ee=_==null?0:_.length;if(!ee||S<1)return[];for(var he=0,ke=0,$e=mt(po(ee/S));he<ee;)$e[ke++]=zs(_,he,he+=S);return $e}function $u(_){for(var S=-1,G=_==null?0:_.length,ee=0,he=[];++S<G;){var ke=_[S];ke&&(he[ee++]=ke)}return he}function hd(){var _=arguments.length;if(!_)return[];for(var S=mt(_-1),G=arguments[0],ee=_;ee--;)S[ee-1]=arguments[ee];return QA(o(G)?ms(G):[G],Ui(S,1))}var tg=yi(function(_,S){return g(_)?zi(_,Ui(S,1,g,!0)):[]}),ng=yi(function(_,S){var G=vo(S);return g(G)&&(G=a),g(_)?zi(_,Ui(S,1,g,!0),Vn(G,2)):[]}),ig=yi(function(_,S){var G=vo(S);return g(G)&&(G=a),g(_)?zi(_,Ui(S,1,g,!0),a,G):[]});function rg(_,S,G){var ee=_==null?0:_.length;return ee?(S=G||S===a?1:Cn(S),zs(_,S<0?0:S,ee)):[]}function Ag(_,S,G){var ee=_==null?0:_.length;return ee?(S=G||S===a?1:Cn(S),S=ee-S,zs(_,0,S<0?0:S)):[]}function sg(_,S){return _&&_.length?ps(_,Vn(S,3),!0,!0):[]}function og(_,S){return _&&_.length?ps(_,Vn(S,3),!0):[]}function ag(_,S,G,ee){var he=_==null?0:_.length;return he?(G&&typeof G!="number"&&Rs(_,S,G)&&(G=0,ee=he),dl(_,S,G,ee)):[]}function fd(_,S,G){var ee=_==null?0:_.length;if(!ee)return-1;var he=G==null?0:Cn(G);return he<0&&(he=ii(ee+he,0)),Qi(_,Vn(S,3),he)}function p0(_,S,G){var ee=_==null?0:_.length;if(!ee)return-1;var he=ee-1;return G!==a&&(he=Cn(G),he=G<0?ii(ee+he,0):Ni(he,ee-1)),Qi(_,Vn(S,3),he,!0)}function gu(_){var S=_==null?0:_.length;return S?Ui(_,1):[]}function dd(_){var S=_==null?0:_.length;return S?Ui(_,Tt):[]}function Sh(_,S){var G=_==null?0:_.length;return G?(S=S===a?1:Cn(S),Ui(_,S)):[]}function Ch(_){for(var S=-1,G=_==null?0:_.length,ee={};++S<G;){var he=_[S];ee[he[0]]=he[1]}return ee}function pd(_){return _&&_.length?_[0]:a}function lg(_,S,G){var ee=_==null?0:_.length;if(!ee)return-1;var he=G==null?0:Cn(G);return he<0&&(he=ii(ee+he,0)),Zs(_,S,he)}function ug(_){var S=_==null?0:_.length;return S?zs(_,0,-1):[]}var md=yi(function(_){var S=Ki(_,uh);return S.length&&S[0]===_[0]?ou(S):[]}),gd=yi(function(_){var S=vo(_),G=Ki(_,uh);return S===vo(G)?S=a:G.pop(),G.length&&G[0]===_[0]?ou(G,Vn(S,2)):[]}),Fs=yi(function(_){var S=vo(_),G=Ki(_,uh);return S=typeof S=="function"?S:a,S&&G.pop(),G.length&&G[0]===_[0]?ou(G,a,S):[]});function Ih(_,S){return _==null?"":Qo.call(_,S)}function vo(_){var S=_==null?0:_.length;return S?_[S-1]:a}function Hl(_,S,G){var ee=_==null?0:_.length;if(!ee)return-1;var he=ee;return G!==a&&(he=Cn(G),he=he<0?ii(ee+he,0):Ni(he,ee-1)),S===S?co(_,S,he):Qi(_,dA,he,!0)}function m0(_,S){return _&&_.length?ic(_,Cn(S)):a}var g0=yi(_u);function _u(_,S){return _&&_.length&&S&&S.length?uu(_,S):_}function pc(_,S,G){return _&&_.length&&S&&S.length?uu(_,S,Vn(G,2)):_}function mc(_,S,G){return _&&_.length&&S&&S.length?uu(_,S,a,G):_}var cg=Ja(function(_,S){var G=_==null?0:_.length,ee=tn(_,S);return e0(_,Ki(S,function(he){return xl(he,G)?+he:he}).sort(Wf)),ee});function _d(_,S){var G=[];if(!(_&&_.length))return G;var ee=-1,he=[],ke=_.length;for(S=Vn(S,3);++ee<ke;){var $e=_[ee];S($e,ee,_)&&(G.push($e),he.push(ee))}return e0(_,he),G}function gc(_){return _==null?_:IA.call(_)}function hg(_,S,G){var ee=_==null?0:_.length;return ee?(G&&typeof G!="number"&&Rs(_,S,G)?(S=0,G=ee):(S=S==null?0:Cn(S),G=G===a?ee:Cn(G)),zs(_,S,G)):[]}function yd(_,S){return n0(_,S)}function vd(_,S,G){return Ac(_,S,Vn(G,2))}function Bh(_,S){var G=_==null?0:_.length;if(G){var ee=n0(_,S);if(ee<G&&wo(_[ee],S))return ee}return-1}function Dh(_,S){return n0(_,S,!0)}function fg(_,S,G){return Ac(_,S,Vn(G,2),!0)}function dg(_,S){var G=_==null?0:_.length;if(G){var ee=n0(_,S,!0)-1;if(wo(_[ee],S))return ee}return-1}function xd(_){return _&&_.length?sh(_):[]}function _0(_,S){return _&&_.length?sh(_,Vn(S,2)):[]}function el(_){var S=_==null?0:_.length;return S?zs(_,1,S):[]}function $l(_,S,G){return _&&_.length?(S=G||S===a?1:Cn(S),zs(_,0,S<0?0:S)):[]}function wd(_,S,G){var ee=_==null?0:_.length;return ee?(S=G||S===a?1:Cn(S),S=ee-S,zs(_,S<0?0:S,ee)):[]}function Ph(_,S){return _&&_.length?ps(_,Vn(S,3),!1,!0):[]}function pg(_,S){return _&&_.length?ps(_,Vn(S,3)):[]}var mg=yi(function(_){return gl(Ui(_,1,g,!0))}),_c=yi(function(_){var S=vo(_);return g(S)&&(S=a),gl(Ui(_,1,g,!0),Vn(S,2))}),zh=yi(function(_){var S=vo(_);return S=typeof S=="function"?S:a,gl(Ui(_,1,g,!0),a,S)});function gg(_){return _&&_.length?gl(_):[]}function Lh(_,S){return _&&_.length?gl(_,Vn(S,2)):[]}function Rh(_,S){return S=typeof S=="function"?S:a,_&&_.length?gl(_,a,S):[]}function jl(_){if(!(_&&_.length))return[];var S=0;return _=UA(_,function(G){if(g(G))return S=ii(G.length,S),!0}),$s(S,function(G){return Ki(_,Bi(G))})}function Fh(_,S){if(!(_&&_.length))return[];var G=jl(_);return S==null?G:Ki(G,function(ee){return Xr(S,a,ee)})}var bd=yi(function(_,S){return g(_)?zi(_,S):[]}),Oh=yi(function(_){return ah(UA(_,g))}),kd=yi(function(_){var S=vo(_);return g(S)&&(S=a),ah(UA(_,g),Vn(S,2))}),yc=yi(function(_){var S=vo(_);return S=typeof S=="function"?S:a,ah(UA(_,g),a,S)}),Ed=yi(jl);function _g(_,S){return lh(_||[],S||[],ht)}function yg(_,S){return lh(_||[],S||[],cu)}var Md=yi(function(_){var S=_.length,G=S>1?_[S-1]:a;return G=typeof G=="function"?(_.pop(),G):a,Fh(_,G)});function Td(_){var S=x(_);return S.__chain__=!0,S}function vg(_,S){return S(_),_}function vc(_,S){return S(_)}var xg=Ja(function(_){var S=_.length,G=S?_[0]:0,ee=this.__wrapped__,he=function(ke){return tn(ke,_)};return S>1||this.__actions__.length||!(ee instanceof H)||!xl(G)?this.thru(he):(ee=ee.slice(G,+G+(S?1:0)),ee.__actions__.push({func:vc,args:[he],thisArg:a}),new N(ee,this.__chain__).thru(function(ke){return S&&!ke.length&&ke.push(a),ke}))});function Nh(){return Td(this)}function Wl(){return new N(this.value(),this.__chain__)}function Sd(){this.__values__===a&&(this.__values__=YA(this.value()));var _=this.__index__>=this.__values__.length,S=_?a:this.__values__[this.__index__++];return{done:_,value:S}}function Cd(){return this}function Id(_){for(var S,G=this;G instanceof V;){var ee=Th(G);ee.__index__=0,ee.__values__=a,S?he.__wrapped__=ee:S=ee;var he=ee;G=G.__wrapped__}return he.__wrapped__=_,S}function Bd(){var _=this.__wrapped__;if(_ instanceof H){var S=_;return this.__actions__.length&&(S=new H(this)),S=S.reverse(),S.__actions__.push({func:vc,args:[gc],thisArg:a}),new N(S,this.__chain__)}return this.thru(gc)}function Dd(){return oh(this.__wrapped__,this.__actions__)}var Pd=xr(function(_,S,G){Ei.call(_,G)?++_[G]:Yt(_,G,1)});function Vh(_,S,G){var ee=o(_)?Va:Zo;return G&&Rs(_,S,G)&&(S=a),ee(_,Vn(S,3))}function xc(_,S){var G=o(_)?UA:pl;return G(_,Vn(S,3))}var zd=oc(fd),Uh=oc(p0);function Ld(_,S){return Ui(wc(_,S),1)}function xo(_,S){return Ui(wc(_,S),Tt)}function y0(_,S,G){return G=G===a?1:Cn(G),Ui(wc(_,S),G)}function Qh(_,S){var G=o(_)?aA:bi;return G(_,Vn(S,3))}function Gh(_,S){var G=o(_)?Cs:mo;return G(_,Vn(S,3))}var Rd=xr(function(_,S,G){Ei.call(_,G)?_[G].push(S):Yt(_,G,[S])});function Fd(_,S,G,ee){_=u(_)?_:Yo(_),G=G&&!ee?Cn(G):0;var he=_.length;return G<0&&(G=ii(he+G,0)),Rt(_)?G<=he&&_.indexOf(S,G)>-1:!!he&&Zs(_,S,G)>-1}var Od=yi(function(_,S,G){var ee=-1,he=typeof S=="function",ke=u(_)?mt(_.length):[];return bi(_,function($e){ke[++ee]=he?Xr(S,$e,G):_o($e,S,G)}),ke}),Nd=xr(function(_,S,G){Yt(_,G,S)});function wc(_,S){var G=o(_)?Ki:Gf;return G(_,Vn(S,3))}function Vd(_,S,G,ee){return _==null?[]:(o(S)||(S=S==null?[]:[S]),G=ee?a:G,o(G)||(G=G==null?[]:[G]),rh(_,S,G))}var Yl=xr(function(_,S,G){_[G?0:1].push(S)},function(){return[[],[]]});function Ud(_,S,G){var ee=o(_)?us:ll,he=arguments.length<3;return ee(_,Vn(S,4),G,he,bi)}function Qd(_,S,G){var ee=o(_)?zo:ll,he=arguments.length<3;return ee(_,Vn(S,4),G,he,mo)}function Gd(_,S){var G=o(_)?UA:pl;return G(_,w0(Vn(S,3)))}function qd(_){var S=o(_)?Pe:ds;return S(_)}function wg(_,S,G){(G?Rs(_,S,G):S===a)?S=1:S=Cn(S);var ee=o(_)?Ve:Nu;return ee(_,S)}function bg(_){var S=o(_)?Ue:Fm;return S(_)}function Zd(_){if(_==null)return 0;if(u(_))return Rt(_)?gA(_):_.length;var S=PA(_);return S==Pn||S==ei?_.size:Ru(_).length}function ju(_,S,G){var ee=o(_)?Lr:Om;return G&&Rs(_,S,G)&&(S=a),ee(_,Vn(S,3))}var Hd=yi(function(_,S){if(_==null)return[];var G=S.length;return G>1&&Rs(_,S[0],S[1])?S=[]:G>2&&Rs(S[0],S[1],S[2])&&(S=[S[0]]),rh(_,Ui(S,1),[])}),yu=hl||function(){return Xi.Date.now()};function $d(_,S){if(typeof S!="function")throw new er(P);return _=Cn(_),function(){if(--_<1)return S.apply(this,arguments)}}function v0(_,S,G){return S=G?a:S,S=_&&S==null?_.length:S,vl(_,Ft,a,a,a,a,S)}function x0(_,S){var G;if(typeof S!="function")throw new er(P);return _=Cn(_),function(){return--_>0&&(G=S.apply(this,arguments)),_<=1&&(S=a),G}}var Wu=yi(function(_,S,G){var ee=xe;if(G.length){var he=GA(G,du(Wu));ee|=it}return vl(_,ee,S,G,he)}),jd=yi(function(_,S,G){var ee=xe|Ce;if(G.length){var he=GA(G,du(jd));ee|=it}return vl(S,ee,_,G,he)});function Wd(_,S,G){S=G?a:S;var ee=vl(_,Qe,a,a,a,a,a,S);return ee.placeholder=Wd.placeholder,ee}function Yd(_,S,G){S=G?a:S;var ee=vl(_,nt,a,a,a,a,a,S);return ee.placeholder=Yd.placeholder,ee}function Xd(_,S,G){var ee,he,ke,$e,Je,ut,Dt=0,zt=!1,Vt=!1,yn=!0;if(typeof _!="function")throw new er(P);S=gr(S)||0,Ie(G)&&(zt=!!G.leading,Vt="maxWait"in G,ke=Vt?ii(gr(G.maxWait)||0,S):ke,yn="trailing"in G?!!G.trailing:yn);function In(wA){var Ml=ee,bu=he;return ee=he=a,Dt=wA,$e=_.apply(bu,Ml),$e}function Yn(wA){return Dt=wA,Je=f0(Li,S),zt?In(wA):$e}function ki(wA){var Ml=wA-ut,bu=wA-Dt,D2=S-Ml;return Vt?Ni(D2,ke-bu):D2}function Xn(wA){var Ml=wA-ut,bu=wA-Dt;return ut===a||Ml>=S||Ml<0||Vt&&bu>=ke}function Li(){var wA=yu();if(Xn(wA))return Gi(wA);Je=f0(Li,ki(wA))}function Gi(wA){return Je=a,yn&&ee?In(wA):(ee=he=a,$e)}function Ta(){Je!==a&&r0(Je),Dt=0,ee=ut=he=Je=a}function Eo(){return Je===a?$e:Gi(yu())}function Sa(){var wA=yu(),Ml=Xn(wA);if(ee=arguments,he=this,ut=wA,Ml){if(Je===a)return Yn(ut);if(Vt)return r0(Je),Je=f0(Li,S),In(ut)}return Je===a&&(Je=f0(Li,S)),$e}return Sa.cancel=Ta,Sa.flush=Eo,Sa}var Yu=yi(function(_,S){return Nn(_,1,S)}),zA=yi(function(_,S,G){return Nn(_,gr(S)||0,G)});function Xl(_){return vl(_,nn)}function Xu(_,S){if(typeof _!="function"||S!=null&&typeof S!="function")throw new er(P);var G=function(){var ee=arguments,he=S?S.apply(this,ee):ee[0],ke=G.cache;if(ke.has(he))return ke.get(he);var $e=_.apply(this,ee);return G.cache=ke.set(he,$e)||ke,$e};return G.cache=new(Xu.Cache||l),G}Xu.Cache=l;function w0(_){if(typeof _!="function")throw new er(P);return function(){var S=arguments;switch(S.length){case 0:return!_.call(this);case 1:return!_.call(this,S[0]);case 2:return!_.call(this,S[0],S[1]);case 3:return!_.call(this,S[0],S[1],S[2])}return!_.apply(this,S)}}function Kd(_){return x0(2,_)}var qh=Nm(function(_,S){S=S.length==1&&o(S[0])?Ki(S[0],Kr(Vn())):Ki(Ui(S,1),Kr(Vn()));var G=S.length;return yi(function(ee){for(var he=-1,ke=Ni(ee.length,G);++he<ke;)ee[he]=S[he].call(this,ee[he]);return Xr(_,this,ee)})}),Zh=yi(function(_,S){var G=GA(S,du(Zh));return vl(_,it,a,S,G)}),Hh=yi(function(_,S){var G=GA(S,du(Hh));return vl(_,xt,a,S,G)}),Jd=Ja(function(_,S){return vl(_,It,a,a,a,S)});function kg(_,S){if(typeof _!="function")throw new er(P);return S=S===a?S:Cn(S),yi(_,S)}function ep(_,S){if(typeof _!="function")throw new er(P);return S=S==null?0:ii(Cn(S),0),yi(function(G){var ee=G[S],he=Xa(G,0,S);return ee&&QA(he,ee),Xr(_,this,he)})}function $h(_,S,G){var ee=!0,he=!0;if(typeof _!="function")throw new er(P);return Ie(G)&&(ee="leading"in G?!!G.leading:ee,he="trailing"in G?!!G.trailing:he),Xd(_,S,{leading:ee,maxWait:S,trailing:he})}function jh(_){return v0(_,1)}function tp(_,S){return Zh(ch(S),_)}function b0(){if(!arguments.length)return[];var _=arguments[0];return o(_)?_:[_]}function Wh(_){return an(_,ae)}function np(_,S){return S=typeof S=="function"?S:a,an(_,ae,S)}function Yh(_){return an(_,W|ae)}function bc(_,S){return S=typeof S=="function"?S:a,an(_,W|ae,S)}function k0(_,S){return S==null||bn(_,S,wr(S))}function wo(_,S){return _===S||_!==_&&S!==S}var Xh=qu(Ul),Kh=qu(function(_,S){return _>=S}),vu=yo(function(){return arguments}())?yo:function(_){return Re(_)&&Ei.call(_,"callee")&&!Ds.call(_,"callee")},o=mt.isArray,r=_a?Kr(_a):Xs;function u(_){return _!=null&&Me(_.length)&&!me(_)}function g(_){return Re(_)&&u(_)}function T(_){return _===!0||_===!1||Re(_)&&Ur(_)==xn}var z=Uo||Ng,L=VA?Kr(VA):$o;function q(_){return Re(_)&&_.nodeType===1&&!jt(_)}function $(_){if(_==null)return!0;if(u(_)&&(o(_)||typeof _=="string"||typeof _.splice=="function"||z(_)||gn(_)||vu(_)))return!_.length;var S=PA(_);if(S==Pn||S==ei)return!_.size;if(Hu(_))return!Ru(_).length;for(var G in _)if(Ei.call(_,G))return!1;return!0}function Y(_,S){return ml(_,S)}function ne(_,S,G){G=typeof G=="function"?G:a;var ee=G?G(_,S):a;return ee===a?ml(_,S,a,G):!!ee}function re(_){if(!Re(_))return!1;var S=Ur(_);return S==Gn||S==En||typeof _.message=="string"&&typeof _.name=="string"&&!jt(_)}function ue(_){return typeof _=="number"&&ja(_)}function me(_){if(!Ie(_))return!1;var S=Ur(_);return S==Lt||S==Ii||S==Ct||S==uA}function ge(_){return typeof _=="number"&&_==Cn(_)}function Me(_){return typeof _=="number"&&_>-1&&_%1==0&&_<=Ot}function Ie(_){var S=typeof _;return _!=null&&(S=="object"||S=="function")}function Re(_){return _!=null&&typeof _=="object"}var et=as?Kr(as):zm;function Xe(_,S){return _===S||tc(_,S,_h(S))}function rt(_,S,G){return G=typeof G=="function"?G:a,tc(_,S,_h(S),G)}function ft(_){return rn(_)&&_!=+_}function Et(_){if(wh(_))throw new Fn(M);return Qr(_)}function ln(_){return _===null}function wn(_){return _==null}function rn(_){return typeof _=="number"||Re(_)&&Ur(_)==qi}function jt(_){if(!Re(_)||Ur(_)!=un)return!1;var S=Vo(_);if(S===null)return!0;var G=Ei.call(S,"constructor")&&S.constructor;return typeof G=="function"&&G instanceof G&&Za.call(G)==hs}var qt=Ss?Kr(Ss):th;function dn(_){return ge(_)&&_>=-Ot&&_<=Ot}var Wt=ol?Kr(ol):Qf;function Rt(_){return typeof _=="string"||!o(_)&&Re(_)&&Ur(_)==_r}function mn(_){return typeof _=="symbol"||Re(_)&&Ur(_)==pi}var gn=Na?Kr(Na):au;function li(_){return _===a}function cr(_){return Re(_)&&PA(_)==Br}function mr(_){return Re(_)&&Ur(_)==So}var iA=qu(nc),Ks=qu(function(_,S){return _<=S});function YA(_){if(!_)return[];if(u(_))return Rt(_)?Fr(_):ms(_);if(fo&&_[fo])return Rr(_[fo]());var S=PA(_),G=S==Pn?Tr:S==ei?_i:Yo;return G(_)}function ir(_){if(!_)return _===0?_:0;if(_=gr(_),_===Tt||_===-Tt){var S=_<0?-1:1;return S*Gt}return _===_?_:0}function Cn(_){var S=ir(_),G=S%1;return S===S?G?S-G:S:0}function xA(_){return _?fn(Cn(_),0,hn):0}function gr(_){if(typeof _=="number")return _;if(mn(_))return _n;if(Ie(_)){var S=typeof _.valueOf=="function"?_.valueOf():_;_=Ie(S)?S+"":S}if(typeof _!="string")return _===0?_:+_;_=Si(_);var G=Pt.test(_);return G||Bn.test(_)?Do(_.slice(2),G?2:8):en.test(_)?_n:+_}function XA(_){return Ka(_,Vs(_))}function rA(_){return _?fn(Cn(_),-Ot,Ot):_===0?_:0}function $n(_){return _==null?"":Ls(_)}var KA=yl(function(_,S){if(Hu(S)||u(S)){Ka(S,wr(S),_);return}for(var G in S)Ei.call(S,G)&&ht(_,G,S[G])}),JA=yl(function(_,S){Ka(S,Vs(S),_)}),lA=yl(function(_,S,G,ee){Ka(S,Vs(S),_,ee)}),Os=yl(function(_,S,G,ee){Ka(S,wr(S),_,ee)}),Ns=Ja(tn);function AA(_,S){var G=R(_);return S==null?G:Mn(G,S)}var ci=yi(function(_,S){_=Oi(_);var G=-1,ee=S.length,he=ee>2?S[2]:a;for(he&&Rs(S[0],S[1],he)&&(ee=1);++G<ee;)for(var ke=S[G],$e=Vs(ke),Je=-1,ut=$e.length;++Je<ut;){var Dt=$e[Je],zt=_[Dt];(zt===a||wo(zt,tA[Dt])&&!Ei.call(_,Dt))&&(_[Dt]=ke[Dt])}return _}),es=yi(function(_){return _.push(a,nd),Xr(Ap,a,_)});function LA(_,S){return ai(_,Vn(S,3),DA)}function sA(_,S){return ai(_,Vn(S,3),vr)}function jo(_,S){return _==null?_:nA(_,Vn(S,3),Vs)}function ba(_,S){return _==null?_:BA(_,Vn(S,3),Vs)}function ka(_,S){return _&&DA(_,Vn(S,3))}function kl(_,S){return _&&vr(_,Vn(S,3))}function Wo(_){return _==null?[]:Nr(_,wr(_))}function bo(_){return _==null?[]:Nr(_,Vs(_))}function ts(_,S,G){var ee=_==null?a:$r(_,S);return ee===a?G:ee}function El(_,S){return _!=null&&yh(_,S,J0)}function xu(_,S){return _!=null&&yh(_,S,ec)}var ip=Kf(function(_,S,G){S!=null&&typeof S.toString!="function"&&(S=yA.call(S)),_[S]=G},zg(Xo)),Jh=Kf(function(_,S,G){S!=null&&typeof S.toString!="function"&&(S=yA.call(S)),Ei.call(_,S)?_[S].push(G):_[S]=[G]},Vn),ef=yi(_o);function wr(_){return u(_)?qe(_):Ru(_)}function Vs(_){return u(_)?qe(_,!0):nh(_)}function rp(_,S){var G={};return S=Vn(S,3),DA(_,function(ee,he,ke){Yt(G,S(ee,he,ke),ee)}),G}function Eg(_,S){var G={};return S=Vn(S,3),DA(_,function(ee,he,ke){Yt(G,he,S(ee,he,ke))}),G}var Mg=yl(function(_,S,G){Fu(_,S,G)}),Ap=yl(function(_,S,G,ee){Fu(_,S,G,ee)}),Tg=Ja(function(_,S){var G={};if(_==null)return G;var ee=!1;S=Ki(S,function(ke){return ke=Gl(ke,_),ee||(ee=ke.length>1),ke}),Ka(_,mh(_),G),ee&&(G=an(G,W|J|ae,qm));for(var he=S.length;he--;)i0(G,S[he]);return G});function Sg(_,S){return sp(_,w0(Vn(S)))}var Cg=Ja(function(_,S){return _==null?{}:Zf(_,S)});function sp(_,S){if(_==null)return{};var G=Ki(mh(_),function(ee){return[ee]});return S=Vn(S),lu(_,G,function(ee,he){return S(ee,he[0])})}function Ig(_,S,G){S=Gl(S,_);var ee=-1,he=S.length;for(he||(he=1,_=a);++ee<he;){var ke=_==null?a:_[fi(S[ee])];ke===a&&(ee=he,ke=G),_=me(ke)?ke.call(_):ke}return _}function Ea(_,S,G){return _==null?_:cu(_,S,G)}function kc(_,S,G,ee){return ee=typeof ee=="function"?ee:a,_==null?_:cu(_,S,G,ee)}var tf=ph(wr),op=ph(Vs);function Bg(_,S,G){var ee=o(_),he=ee||z(_)||gn(_);if(S=Vn(S,4),G==null){var ke=_&&_.constructor;he?G=ee?new ke:[]:Ie(_)?G=me(ke)?R(Vo(_)):{}:G={}}return(he?aA:DA)(_,function($e,Je,ut){return S(G,$e,Je,ut)}),G}function Dg(_,S){return _==null?!0:i0(_,S)}function ns(_,S,G){return _==null?_:Vu(_,S,ch(G))}function ko(_,S,G,ee){return ee=typeof ee=="function"?ee:a,_==null?_:Vu(_,S,ch(G),ee)}function Yo(_){return _==null?[]:js(_,wr(_))}function Ma(_){return _==null?[]:js(_,Vs(_))}function wu(_,S,G){return G===a&&(G=S,S=a),G!==a&&(G=gr(G),G=G===G?G:0),S!==a&&(S=gr(S),S=S===S?S:0),fn(gr(_),S,G)}function tl(_,S,G){return S=ir(S),G===a?(G=S,S=0):G=ir(G),_=gr(_),eh(_,S,G)}function y3(_,S,G){if(G&&typeof G!="boolean"&&Rs(_,S,G)&&(S=G=a),G===a&&(typeof S=="boolean"?(G=S,S=a):typeof _=="boolean"&&(G=_,_=a)),_===a&&S===a?(_=0,S=1):(_=ir(_),S===a?(S=_,_=0):S=ir(S)),_>S){var ee=_;_=S,S=ee}if(G||_%1||S%1){var he=Tn();return Ni(_+he*(S-_+qs("1e-"+((he+"").length-1))),S)}return Ou(_,S)}var v3=hu(function(_,S,G){return S=S.toLowerCase(),_+(G?T2(S):S)});function T2(_){return Pg($n(_).toLowerCase())}function S2(_){return _=$n(_),_&&_.replace(sn,Mr).replace(Ts,"")}function x3(_,S,G){_=$n(_),S=Ls(S);var ee=_.length;G=G===a?ee:fn(Cn(G),0,ee);var he=G;return G-=S.length,G>=0&&_.slice(G,he)==S}function w3(_){return _=$n(_),_&&ze.test(_)?_.replace(On,Jr):_}function b3(_){return _=$n(_),_&&Oe.test(_)?_.replace(Ye,"\\$&"):_}var k3=hu(function(_,S,G){return _+(G?"-":"")+S.toLowerCase()}),E3=hu(function(_,S,G){return _+(G?" ":"")+S.toLowerCase()}),M3=Qu("toLowerCase");function T3(_,S,G){_=$n(_),S=Cn(S);var ee=S?gA(_):0;if(!S||ee>=S)return _;var he=(S-ee)/2;return lc(Or(he),G)+_+lc(po(he),G)}function S3(_,S,G){_=$n(_),S=Cn(S);var ee=S?gA(_):0;return S&&ee<S?_+lc(S-ee,G):_}function C3(_,S,G){_=$n(_),S=Cn(S);var ee=S?gA(_):0;return S&&ee<S?lc(S-ee,G)+_:_}function I3(_,S,G){return G||S==null?S=0:S&&(S=+S),Vr($n(_).replace(Ke,""),S||0)}function B3(_,S,G){return(G?Rs(_,S,G):S===a)?S=1:S=Cn(S),rc($n(_),S)}function D3(){var _=arguments,S=$n(_[0]);return _.length<3?S:S.replace(_[1],_[2])}var P3=hu(function(_,S,G){return _+(G?"_":"")+S.toLowerCase()});function z3(_,S,G){return G&&typeof G!="number"&&Rs(_,S,G)&&(S=G=a),G=G===a?hn:G>>>0,G?(_=$n(_),_&&(typeof S=="string"||S!=null&&!qt(S))&&(S=Ls(S),!S&&uo(_))?Xa(Fr(_),0,G):_.split(S,G)):[]}var L3=hu(function(_,S,G){return _+(G?" ":"")+Pg(S)});function R3(_,S,G){return _=$n(_),G=G==null?0:fn(Cn(G),0,_.length),S=Ls(S),_.slice(G,G+S.length)==S}function F3(_,S,G){var ee=x.templateSettings;G&&Rs(_,S,G)&&(S=a),_=$n(_),S=lA({},S,ee,td);var he=lA({},S.imports,ee.imports,td),ke=wr(he),$e=js(he,ke),Je,ut,Dt=0,zt=S.interpolate||oi,Vt="__p += '",yn=HA((S.escape||oi).source+"|"+zt.source+"|"+(zt===we?St:oi).source+"|"+(S.evaluate||oi).source+"|$","g"),In="//# sourceURL="+(Ei.call(S,"sourceURL")?(S.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++ga+"]")+`
`;_.replace(yn,function(Xn,Li,Gi,Ta,Eo,Sa){return Gi||(Gi=Ta),Vt+=_.slice(Dt,Sa).replace(Dr,Oo),Li&&(Je=!0,Vt+=`' +
__e(`+Li+`) +
'`),Eo&&(ut=!0,Vt+=`';
`+Eo+`;
__p += '`),Gi&&(Vt+=`' +
((__t = (`+Gi+`)) == null ? '' : __t) +
'`),Dt=Sa+Xn.length,Xn}),Vt+=`';
`;var Yn=Ei.call(S,"variable")&&S.variable;if(!Yn)Vt=`with (obj) {
`+Vt+`
}
`;else if(t.test(Yn))throw new Fn(c);Vt=(ut?Vt.replace(Zn,""):Vt).replace(zn,"$1").replace(br,"$1;"),Vt="function("+(Yn||"obj")+`) {
`+(Yn?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Je?", __e = _.escape":"")+(ut?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Vt+`return __p
}`;var ki=I2(function(){return wi(ke,In+"return "+Vt).apply(a,$e)});if(ki.source=Vt,re(ki))throw ki;return ki}function O3(_){return $n(_).toLowerCase()}function N3(_){return $n(_).toUpperCase()}function V3(_,S,G){if(_=$n(_),_&&(G||S===a))return Si(_);if(!_||!(S=Ls(S)))return _;var ee=Fr(_),he=Fr(S),ke=Ws(ee,he),$e=Nl(ee,he)+1;return Xa(ee,ke,$e).join("")}function U3(_,S,G){if(_=$n(_),_&&(G||S===a))return _.slice(0,Zr(_)+1);if(!_||!(S=Ls(S)))return _;var ee=Fr(_),he=Nl(ee,Fr(S))+1;return Xa(ee,0,he).join("")}function Q3(_,S,G){if(_=$n(_),_&&(G||S===a))return _.replace(Ke,"");if(!_||!(S=Ls(S)))return _;var ee=Fr(_),he=Ws(ee,Fr(S));return Xa(ee,he).join("")}function G3(_,S){var G=Zt,ee=At;if(Ie(S)){var he="separator"in S?S.separator:he;G="length"in S?Cn(S.length):G,ee="omission"in S?Ls(S.omission):ee}_=$n(_);var ke=_.length;if(uo(_)){var $e=Fr(_);ke=$e.length}if(G>=ke)return _;var Je=G-gA(ee);if(Je<1)return ee;var ut=$e?Xa($e,0,Je).join(""):_.slice(0,Je);if(he===a)return ut+ee;if($e&&(Je+=ut.length-Je),qt(he)){if(_.slice(Je).search(he)){var Dt,zt=ut;for(he.global||(he=HA(he.source,$n(Qt.exec(he))+"g")),he.lastIndex=0;Dt=he.exec(zt);)var Vt=Dt.index;ut=ut.slice(0,Vt===a?Je:Vt)}}else if(_.indexOf(Ls(he),Je)!=Je){var yn=ut.lastIndexOf(he);yn>-1&&(ut=ut.slice(0,yn))}return ut+ee}function q3(_){return _=$n(_),_&&st.test(_)?_.replace(OA,ZA):_}var Z3=hu(function(_,S,G){return _+(G?" ":"")+S.toUpperCase()}),Pg=Qu("toUpperCase");function C2(_,S,G){return _=$n(_),S=G?a:S,S===a?Qa(_)?ul(_):al(_):_.match(S)||[]}var I2=yi(function(_,S){try{return Xr(_,a,S)}catch(G){return re(G)?G:new Fn(G)}}),H3=Ja(function(_,S){return aA(S,function(G){G=fi(G),Yt(_,G,Wu(_[G],_))}),_});function $3(_){var S=_==null?0:_.length,G=Vn();return _=S?Ki(_,function(ee){if(typeof ee[1]!="function")throw new er(P);return[G(ee[0]),ee[1]]}):[],yi(function(ee){for(var he=-1;++he<S;){var ke=_[he];if(Xr(ke[0],this,ee))return Xr(ke[1],this,ee)}})}function j3(_){return Wn(an(_,W))}function zg(_){return function(){return _}}function W3(_,S){return _==null||_!==_?S:_}var Y3=ac(),X3=ac(!0);function Xo(_){return _}function Lg(_){return Ql(typeof _=="function"?_:an(_,W))}function K3(_){return ih(an(_,W))}function J3(_,S){return qf(_,an(S,W))}var e4=yi(function(_,S){return function(G){return _o(G,_,S)}}),t4=yi(function(_,S){return function(G){return _o(_,G,S)}});function Rg(_,S,G){var ee=wr(S),he=Nr(S,ee);G==null&&!(Ie(S)&&(he.length||!ee.length))&&(G=S,S=_,_=this,he=Nr(S,wr(S)));var ke=!(Ie(G)&&"chain"in G)||!!G.chain,$e=me(_);return aA(he,function(Je){var ut=S[Je];_[Je]=ut,$e&&(_.prototype[Je]=function(){var Dt=this.__chain__;if(ke||Dt){var zt=_(this.__wrapped__),Vt=zt.__actions__=ms(this.__actions__);return Vt.push({func:ut,args:arguments,thisArg:_}),zt.__chain__=Dt,zt}return ut.apply(_,QA([this.value()],arguments))})}),_}function n4(){return Xi._===this&&(Xi._=on),this}function Fg(){}function i4(_){return _=Cn(_),yi(function(S){return ic(S,_)})}var r4=fu(Ki),A4=fu(Va),s4=fu(Lr);function B2(_){return vh(_)?Bi(fi(_)):Rm(_)}function o4(_){return function(S){return _==null?a:$r(_,S)}}var a4=Jf(),l4=Jf(!0);function Og(){return[]}function Ng(){return!1}function u4(){return{}}function c4(){return""}function h4(){return!0}function f4(_,S){if(_=Cn(_),_<1||_>Ot)return[];var G=hn,ee=Ni(_,hn);S=Vn(S),_-=hn;for(var he=$s(ee,S);++G<_;)S(G);return he}function d4(_){return o(_)?Ki(_,fi):mn(_)?[_]:ms(Mh($n(_)))}function p4(_){var S=++Vl;return $n(_)+S}var m4=l0(function(_,S){return _+S},0),g4=u0("ceil"),_4=l0(function(_,S){return _/S},1),y4=u0("floor");function v4(_){return _&&_.length?go(_,Xo,Ul):a}function x4(_,S){return _&&_.length?go(_,Vn(S,2),Ul):a}function w4(_){return Ji(_,Xo)}function b4(_,S){return Ji(_,Vn(S,2))}function k4(_){return _&&_.length?go(_,Xo,nc):a}function E4(_,S){return _&&_.length?go(_,Vn(S,2),nc):a}var M4=l0(function(_,S){return _*S},1),T4=u0("round"),S4=l0(function(_,S){return _-S},0);function C4(_){return _&&_.length?Hs(_,Xo):0}function I4(_,S){return _&&_.length?Hs(_,Vn(S,2)):0}return x.after=$d,x.ary=v0,x.assign=KA,x.assignIn=JA,x.assignInWith=lA,x.assignWith=Os,x.at=Ns,x.before=x0,x.bind=Wu,x.bindAll=H3,x.bindKey=jd,x.castArray=b0,x.chain=Td,x.chunk=bl,x.compact=$u,x.concat=hd,x.cond=$3,x.conforms=j3,x.constant=zg,x.countBy=Pd,x.create=AA,x.curry=Wd,x.curryRight=Yd,x.debounce=Xd,x.defaults=ci,x.defaultsDeep=es,x.defer=Yu,x.delay=zA,x.difference=tg,x.differenceBy=ng,x.differenceWith=ig,x.drop=rg,x.dropRight=Ag,x.dropRightWhile=sg,x.dropWhile=og,x.fill=ag,x.filter=xc,x.flatMap=Ld,x.flatMapDeep=xo,x.flatMapDepth=y0,x.flatten=gu,x.flattenDeep=dd,x.flattenDepth=Sh,x.flip=Xl,x.flow=Y3,x.flowRight=X3,x.fromPairs=Ch,x.functions=Wo,x.functionsIn=bo,x.groupBy=Rd,x.initial=ug,x.intersection=md,x.intersectionBy=gd,x.intersectionWith=Fs,x.invert=ip,x.invertBy=Jh,x.invokeMap=Od,x.iteratee=Lg,x.keyBy=Nd,x.keys=wr,x.keysIn=Vs,x.map=wc,x.mapKeys=rp,x.mapValues=Eg,x.matches=K3,x.matchesProperty=J3,x.memoize=Xu,x.merge=Mg,x.mergeWith=Ap,x.method=e4,x.methodOf=t4,x.mixin=Rg,x.negate=w0,x.nthArg=i4,x.omit=Tg,x.omitBy=Sg,x.once=Kd,x.orderBy=Vd,x.over=r4,x.overArgs=qh,x.overEvery=A4,x.overSome=s4,x.partial=Zh,x.partialRight=Hh,x.partition=Yl,x.pick=Cg,x.pickBy=sp,x.property=B2,x.propertyOf=o4,x.pull=g0,x.pullAll=_u,x.pullAllBy=pc,x.pullAllWith=mc,x.pullAt=cg,x.range=a4,x.rangeRight=l4,x.rearg=Jd,x.reject=Gd,x.remove=_d,x.rest=kg,x.reverse=gc,x.sampleSize=wg,x.set=Ea,x.setWith=kc,x.shuffle=bg,x.slice=hg,x.sortBy=Hd,x.sortedUniq=xd,x.sortedUniqBy=_0,x.split=z3,x.spread=ep,x.tail=el,x.take=$l,x.takeRight=wd,x.takeRightWhile=Ph,x.takeWhile=pg,x.tap=vg,x.throttle=$h,x.thru=vc,x.toArray=YA,x.toPairs=tf,x.toPairsIn=op,x.toPath=d4,x.toPlainObject=XA,x.transform=Bg,x.unary=jh,x.union=mg,x.unionBy=_c,x.unionWith=zh,x.uniq=gg,x.uniqBy=Lh,x.uniqWith=Rh,x.unset=Dg,x.unzip=jl,x.unzipWith=Fh,x.update=ns,x.updateWith=ko,x.values=Yo,x.valuesIn=Ma,x.without=bd,x.words=C2,x.wrap=tp,x.xor=Oh,x.xorBy=kd,x.xorWith=yc,x.zip=Ed,x.zipObject=_g,x.zipObjectDeep=yg,x.zipWith=Md,x.entries=tf,x.entriesIn=op,x.extend=JA,x.extendWith=lA,Rg(x,x),x.add=m4,x.attempt=I2,x.camelCase=v3,x.capitalize=T2,x.ceil=g4,x.clamp=wu,x.clone=Wh,x.cloneDeep=Yh,x.cloneDeepWith=bc,x.cloneWith=np,x.conformsTo=k0,x.deburr=S2,x.defaultTo=W3,x.divide=_4,x.endsWith=x3,x.eq=wo,x.escape=w3,x.escapeRegExp=b3,x.every=Vh,x.find=zd,x.findIndex=fd,x.findKey=LA,x.findLast=Uh,x.findLastIndex=p0,x.findLastKey=sA,x.floor=y4,x.forEach=Qh,x.forEachRight=Gh,x.forIn=jo,x.forInRight=ba,x.forOwn=ka,x.forOwnRight=kl,x.get=ts,x.gt=Xh,x.gte=Kh,x.has=El,x.hasIn=xu,x.head=pd,x.identity=Xo,x.includes=Fd,x.indexOf=lg,x.inRange=tl,x.invoke=ef,x.isArguments=vu,x.isArray=o,x.isArrayBuffer=r,x.isArrayLike=u,x.isArrayLikeObject=g,x.isBoolean=T,x.isBuffer=z,x.isDate=L,x.isElement=q,x.isEmpty=$,x.isEqual=Y,x.isEqualWith=ne,x.isError=re,x.isFinite=ue,x.isFunction=me,x.isInteger=ge,x.isLength=Me,x.isMap=et,x.isMatch=Xe,x.isMatchWith=rt,x.isNaN=ft,x.isNative=Et,x.isNil=wn,x.isNull=ln,x.isNumber=rn,x.isObject=Ie,x.isObjectLike=Re,x.isPlainObject=jt,x.isRegExp=qt,x.isSafeInteger=dn,x.isSet=Wt,x.isString=Rt,x.isSymbol=mn,x.isTypedArray=gn,x.isUndefined=li,x.isWeakMap=cr,x.isWeakSet=mr,x.join=Ih,x.kebabCase=k3,x.last=vo,x.lastIndexOf=Hl,x.lowerCase=E3,x.lowerFirst=M3,x.lt=iA,x.lte=Ks,x.max=v4,x.maxBy=x4,x.mean=w4,x.meanBy=b4,x.min=k4,x.minBy=E4,x.stubArray=Og,x.stubFalse=Ng,x.stubObject=u4,x.stubString=c4,x.stubTrue=h4,x.multiply=M4,x.nth=m0,x.noConflict=n4,x.noop=Fg,x.now=yu,x.pad=T3,x.padEnd=S3,x.padStart=C3,x.parseInt=I3,x.random=y3,x.reduce=Ud,x.reduceRight=Qd,x.repeat=B3,x.replace=D3,x.result=Ig,x.round=T4,x.runInContext=ot,x.sample=qd,x.size=Zd,x.snakeCase=P3,x.some=ju,x.sortedIndex=yd,x.sortedIndexBy=vd,x.sortedIndexOf=Bh,x.sortedLastIndex=Dh,x.sortedLastIndexBy=fg,x.sortedLastIndexOf=dg,x.startCase=L3,x.startsWith=R3,x.subtract=S4,x.sum=C4,x.sumBy=I4,x.template=F3,x.times=f4,x.toFinite=ir,x.toInteger=Cn,x.toLength=xA,x.toLower=O3,x.toNumber=gr,x.toSafeInteger=rA,x.toString=$n,x.toUpper=N3,x.trim=V3,x.trimEnd=U3,x.trimStart=Q3,x.truncate=G3,x.unescape=q3,x.uniqueId=p4,x.upperCase=Z3,x.upperFirst=Pg,x.each=Qh,x.eachRight=Gh,x.first=pd,Rg(x,function(){var _={};return DA(x,function(S,G){Ei.call(x.prototype,G)||(_[G]=S)}),_}(),{chain:!1}),x.VERSION=d,aA(["bind","bindKey","curry","curryRight","partial","partialRight"],function(_){x[_].placeholder=x}),aA(["drop","take"],function(_,S){H.prototype[_]=function(G){G=G===a?1:ii(Cn(G),0);var ee=this.__filtered__&&!S?new H(this):this.clone();return ee.__filtered__?ee.__takeCount__=Ni(G,ee.__takeCount__):ee.__views__.push({size:Ni(G,hn),type:_+(ee.__dir__<0?"Right":"")}),ee},H.prototype[_+"Right"]=function(G){return this.reverse()[_](G).reverse()}}),aA(["filter","map","takeWhile"],function(_,S){var G=S+1,ee=G==De||G==lt;H.prototype[_]=function(he){var ke=this.clone();return ke.__iteratees__.push({iteratee:Vn(he,3),type:G}),ke.__filtered__=ke.__filtered__||ee,ke}}),aA(["head","last"],function(_,S){var G="take"+(S?"Right":"");H.prototype[_]=function(){return this[G](1).value()[0]}}),aA(["initial","tail"],function(_,S){var G="drop"+(S?"":"Right");H.prototype[_]=function(){return this.__filtered__?new H(this):this[G](1)}}),H.prototype.compact=function(){return this.filter(Xo)},H.prototype.find=function(_){return this.filter(_).head()},H.prototype.findLast=function(_){return this.reverse().find(_)},H.prototype.invokeMap=yi(function(_,S){return typeof _=="function"?new H(this):this.map(function(G){return _o(G,_,S)})}),H.prototype.reject=function(_){return this.filter(w0(Vn(_)))},H.prototype.slice=function(_,S){_=Cn(_);var G=this;return G.__filtered__&&(_>0||S<0)?new H(G):(_<0?G=G.takeRight(-_):_&&(G=G.drop(_)),S!==a&&(S=Cn(S),G=S<0?G.dropRight(-S):G.take(S-_)),G)},H.prototype.takeRightWhile=function(_){return this.reverse().takeWhile(_).reverse()},H.prototype.toArray=function(){return this.take(hn)},DA(H.prototype,function(_,S){var G=/^(?:filter|find|map|reject)|While$/.test(S),ee=/^(?:head|last)$/.test(S),he=x[ee?"take"+(S=="last"?"Right":""):S],ke=ee||/^find/.test(S);he&&(x.prototype[S]=function(){var $e=this.__wrapped__,Je=ee?[1]:arguments,ut=$e instanceof H,Dt=Je[0],zt=ut||o($e),Vt=function(Li){var Gi=he.apply(x,QA([Li],Je));return ee&&yn?Gi[0]:Gi};zt&&G&&typeof Dt=="function"&&Dt.length!=1&&(ut=zt=!1);var yn=this.__chain__,In=!!this.__actions__.length,Yn=ke&&!yn,ki=ut&&!In;if(!ke&&zt){$e=ki?$e:new H(this);var Xn=_.apply($e,Je);return Xn.__actions__.push({func:vc,args:[Vt],thisArg:a}),new N(Xn,yn)}return Yn&&ki?_.apply(this,Je):(Xn=this.thru(Vt),Yn?ee?Xn.value()[0]:Xn.value():Xn)})}),aA(["pop","push","shift","sort","splice","unshift"],function(_){var S=eA[_],G=/^(?:push|sort|unshift)$/.test(_)?"tap":"thru",ee=/^(?:pop|shift)$/.test(_);x.prototype[_]=function(){var he=arguments;if(ee&&!this.__chain__){var ke=this.value();return S.apply(o(ke)?ke:[],he)}return this[G](function($e){return S.apply(o($e)?$e:[],he)})}}),DA(H.prototype,function(_,S){var G=x[S];if(G){var ee=G.name+"";Ei.call(jA,ee)||(jA[ee]=[]),jA[ee].push({name:S,func:G})}}),jA[a0(a,Ce).name]=[{name:"wrapper",func:a}],H.prototype.clone=te,H.prototype.reverse=le,H.prototype.value=pe,x.prototype.at=xg,x.prototype.chain=Nh,x.prototype.commit=Wl,x.prototype.next=Sd,x.prototype.plant=Id,x.prototype.reverse=Bd,x.prototype.toJSON=x.prototype.valueOf=x.prototype.value=Dd,x.prototype.first=x.prototype.head,fo&&(x.prototype[fo]=Cd),x},_A=Ys();NA?((NA.exports=_A)._=_A,lo._=_A):Xi._=_A}).call(Ic)})(lm,lm.exports);var dP=lm.exports;function jb(e,n,a){let d=[e],w=[],M,P,c;for(;e=d.pop();)if(!(a&&a(e))&&(w.push(e),M=e.children,M))for(P=0,c=M.length;P<c;++P)d.push(M[P]);for(;e=w.pop();)n(e);return e}function pP(e,n,a){let d=[e],w,M;for(;e=d.pop();)if(!(a&&a(e))&&(n(e),w=e.children,w))for(M=w.length-1;M>=0;--M)d.push(w[M]);return e}function mP(e,n,a){let d,w=[e],M,P,c;do for(d=w.reverse(),w=[];e=d.pop();)if(!(a&&a(e))&&(n(e),M=e.children,M))for(P=0,c=M.length;P<c;++P)w.push(M[P]);while(w.length);return e}function gP(e){return jb(e,function(d){d.children&&(d.children[0].data.multiway_parent=d,d.children[1].data.multiway_parent=d.parent)}),dP.map(e.descendants(),d=>{let w=d.data.multiway_parent,M="unknown";return w&&(M=w.data.name),{source:d.data.multiway_parent,target:d,name:M}})}function _P(){let e=this.branch_length;return e?m_(this.nodes.descendants(),function(n){return!n.parent||!U0(e(n))}):!1}function yP(){let e=this.branch_length;return Mo(this.nodes.descendants(),n=>e(n))}function v_(e,n){let a=e.data;if("attribute"in a&&a.attribute&&a.attribute.length){n>0&&(a.attribute=String(n));let d=parseFloat(a.attribute);if(!isNaN(d))return Math.max(0,d)}if(a.name=="root")return 0;console.warn("Undefined branch length at "+a.name+"!")}function vP(e){return arguments.length?(this.branch_length_accessor=e||v_,this):this.branch_length_accessor}function xP(e){let n=this.branch_length,a=Mo(this.nodes.descendants(),function(P){return n(P)?n(P):null});const d=m2(a),w=zb(a);let M=function(P){return(P-w)/(d-w)};return la(this.nodes.descendants(),P=>{let c=n(P);c&&n(P,M(c))}),this}function wP(e){let n=this.branch_length;return la(this.nodes.descendants(),a=>{let d=n(a);d&&n(a,e(d))}),this}function bP(e){return arguments.length?(this.nodeLabel=e,this):this.nodeLabel}function kP(e,n){if(!(e instanceof D0))throw new Error("node needs to be an instance of a d3.hierarchy node!");let a=this.nodes.copy();if(n=n!==void 0?n:.5,e.parent){var d=D0({name:"new_root"});d.children=[e.copy()],d.data.__mapped_bl=void 0,a.each(O=>{O.data.__mapped_bl=this.branch_length_accessor(O)}),this.setBranchLength(O=>O.data.__mapped_bl);let M=e,P=e.parent,c=void 0,U=e.data.__mapped_bl===void 0?void 0:e.data.__mapped_bl*n;c=P.data.__mapped_bl,P.data.__mapped_bl=e.data.__mapped_bl===void 0?void 0:e.data.__mapped_bl-U,e.data.__mapped_bl=U;var w;if(P.parent){for(d.children.push(P);P.parent;){w=P.children.indexOf(M),P.parent.parent?P.children.splice(w,1,P.parent):P.children.splice(w,1);let O=P.parent.data.__mapped_bl;O!==void 0&&(P.parent.data.__mapped_bl=c,c=O),M=P,P=P.parent}w=P.children.indexOf(M),P.children.splice(w,1)}else w=P.children.indexOf(M),P.children.splice(w,1),c=P.data.__mapped_bl,M=d;if(P.children.length==1)c&&(P.children[0].data.__mapped_bl+=c),M.children=M.children.concat(P.children);else{let O=new D0({name:"__reroot_top_clade",__mapped_bl:c});Mf(d.children[0],e),O.data.__mapped_bl=c,O.children=P.children.map(function(j){return j.parent=O,j}),O.parent=M,M.children.push(O)}}if(this.update(d),this.traverse_and_compute(M=>{la(M.children,P=>{P.parent=M})},"pre-order"),!U0(this.display)){let M=this.display.options;Gr(this.display.container).select("svg").remove();let P=this.display.selection_attribute_name;delete this.display;let c=this.render(M);c.selectionLabel(P),c.update(),Gr(c.container).node().appendChild(c.show()),Gr(this.display.container).dispatch("reroot")}return this}function EP(e,n){if(e=e||"attribute",n=n||"y_scaled","parent"in this){let a=parseFloat(this[e]);this[n]=this.parent[n]+(isNaN(a)?.1:a)}else this[n]=0;return this[n]}function MP(e){let n=[];for(;e;)n.push(e),e=e.parent;return n}const TP=Object.freeze(Object.defineProperty({__proto__:null,pathToRoot:MP,reroot:kP,rootpath:EP},Symbol.toStringTag,{value:"Module"}));function Du(e){return e.y}function z0(e){return e.x}function um(e,n,a){return{x:a+e*Math.sin(n),y:a+e*Math.cos(n)}}function xv(e,n,a,d,w,M){e.radius=n*(e.radius+a),e.angle=2*Math.PI*e.x*w[0]/M[0];let P=um(e.radius,e.angle,d);return e.x=P.x,e.y=P.y,e}function wv(e,n){var a=um(n[0].radius,n[0].angle,e),d=um(n[0].radius,n[1].angle,e);return"M "+Du(a)+","+z0(a)+" A "+n[0].radius+","+n[0].radius+" 0,0, "+(n[1].angle>n[0].angle?1:0)+" "+Du(d)+","+z0(d)+" L "+Du(n[1])+","+z0(n[1])}function SP(e,n,a){var d=um(e.target.radius+(e.source.radius-e.target.radius)*n,e.target.angle,a);return{x:Du(d),y:z0(d)}}var bv=u_().x(function(e){return Du(e)}).y(function(e){return z0(e)}).curve(mB);function kv(e,n){return{x:Du(e.target)+(Du(e.source)-Du(e.target))*n,y:z0(e.target)}}function y2(e){return e.tag||!1}function v2(e,n){return e[n]||!1}const Ir={"tree-container":"phylotree-container","tree-scale-bar":"tree-scale-bar",node:"node","internal-node":"internal-node","tagged-node":"node-tagged","selected-node":"node-selected","collapsed-node":"node-collapsed","root-node":"root-node",branch:"branch","selected-branch":"branch-selected","tagged-branch":"branch-tagged","tree-selection-brush":"tree-selection-brush","branch-tracer":"branch-tracer",clade:"clade",node_text:"phylotree-node-text"};function CP(e){return arguments.length?(this.options["internal-names"]=e,this):this.options["internal-names"]}function IP(e){return arguments.length?(this.options["is-radial"]=e,this):this.options["is-radial"]}function BP(e){return arguments.length?(this.options["align-tips"]=e,this):this.options["align-tips"]}function DP(e){return this.options["draw-size-bubbles"]&&this.options["bubble-styler"]?this.options["bubble-styler"](e):this.options["draw-size-bubbles"]?this.relative_nodeSpan(e)*this.scales[0]*.25:0}function PP(e){return this.options["is-radial"]?[(e.text_align=="end"?-1:1)*(this.radius_pad_for_bubbles-e.radius),0]:this.options["right-to-left"]?[this.right_most_leaf-e.screen_x,0]:[this.right_most_leaf-e.screen_x,0]}function zP(e){return arguments.length?(this.layout_listener_handler=e,this):this.layout_listener_handler}function LP(e){return arguments.length?(this.selection_attribute_name=e,this.syncEdgeLabels(),this):this.selection_attribute_name}function Cp(e){return arguments.length?(typeof e=="string"&&e=="equal"?Cp=function(n){return 1}:Cp=e,this):Cp}var x_={all:e=>!0,none:e=>!1,"all-leaf-nodes":e=>Wr(e.target),"all-internal-nodes":e=>!Wr(e.target)};function RP(e){return e?(this.selectionCallback=e,this):this.selectionCallback}const FP=Object.freeze(Object.defineProperty({__proto__:null,alignTips:BP,css_classes:Ir,internalNames:CP,layoutHandler:zP,nodeBubbleSize:DP,get nodeSpan(){return Cp},predefined_selecters:x_,radial:IP,selectionCallback:RP,selectionLabel:LP,shiftTip:PP},Symbol.toStringTag,{value:"Module"}));function OP(e){return this.radial()?[(e.text_align=="end"?-1:1)*(this.radius_pad_for_bubbles-e.radius),0]:this.options["right-to-left"]?[this.right_most_leaf-e.screen_x,0]:[this.right_most_leaf-e.screen_x,0]}function NP(e,n,a){e=Gr(e);var d=Wr(n);d&&(e=e.attr("data-node-name",n.data.name));var w=e.selectAll("text").data([n]),M=e.selectAll("line");if(d||this.showInternalName(n)&&!Q0(n))if(w=w.enter().append("text").classed(this.css_classes.node_text,!0).merge(w).on("click",c=>{this.handle_node_click(n,c)}).attr("dy",c=>this.shown_font_size*.33).text(c=>this.options["show-labels"]?this._nodeLabel(c):"").style("font-size",c=>this.ensure_size_is_in_px(this.shown_font_size)),this.radial()?w=w.attr("transform",c=>this.d3PhylotreeSvgRotate(c.text_angle)+this.d3PhylotreeSvgTranslate(this.alignTips()?this.shiftTip(c):null)).attr("text-anchor",c=>c.text_align):w=w.attr("text-anchor","start").attr("transform",c=>this.options.layout=="right-to-left"?this.d3PhylotreeSvgTranslate([-20,0]):this.d3PhylotreeSvgTranslate(this.alignTips()?this.shiftTip(c):null)),this.alignTips()?(M=M.data([n]),a?M=M.enter().append("line").classed(this.css_classes["branch-tracer"],!0).merge(M).attr("x1",c=>(c.text_align=="end"?-1:1)*this.nodeBubbleSize(n)).attr("x2",0).attr("y1",0).attr("y2",0).attr("x2",c=>this.options.layout=="right-to-left"?c.screen_x:this.shiftTip(c)[0]).attr("transform",c=>this.d3PhylotreeSvgRotate(c.text_angle)).attr("x2",c=>this.options.layout=="right-to-left"?c.screen_x:this.shiftTip(c)[0]).attr("transform",c=>this.d3PhylotreeSvgRotate(c.text_angle)):(M=M.enter().append("line").classed(this.css_classes["branch-tracer"],!0).merge(M).attr("x1",c=>(c.text_align=="end"?-1:1)*this.nodeBubbleSize(n)).attr("y2",0).attr("y1",0).attr("x2",c=>this.shiftTip(c)[0]),M.attr("transform",c=>this.d3PhylotreeSvgRotate(c.text_angle)))):M.remove(),this.options["draw-size-bubbles"]){var P=this.nodeBubbleSize(n);e.selectAll("circle").data([P]).enter().append("circle").attr("r",function(U){return U}),this.shown_font_size>=5&&(w=w.attr("dx",U=>(U.text_align=="end"?-1:1)*((this.alignTips()?0:P)+this.shown_font_size*.33)))}else this.shown_font_size>=5&&(w=w.attr("dx",c=>(c.text_align=="end"?-1:1)*this.shown_font_size*.33));if(!d){let c=e.selectAll("circle").data([n]).enter().append("circle"),U=this.node_circle_size()(n);U>0?c.merge(c).attr("r",O=>Math.min(this.shown_font_size*.75,U)).on("click",O=>{this.handle_node_click(n,O)}):c.remove()}return this.node_styler&&this.node_styler(e,n),n}function VP(){let e=this.phylotree.nodes.descendants();for(let n=e.length-1;n>=0;n-=1)Wr(e[n])?e[n].hasHiddenNodes=e[n].notshown:e[n].hasHiddenNodes=e[n].children.reduce(function(a,d){return d.notshown||a},!1);return this}function UP(e){const n=this.internalNames();return n?typeof n=="function"?n(e):n:!1}function QP(e){return arguments.length?(typeof e=="string"&&e=="equal"?this.nodeSpan=function(n){return 1}:this.nodeSpan=e,this):this.nodeSpan}function GP(e){let n=Ir[Wr(e)?"node":"internal-node"];return y2(e)&&(n+=" "+Ir["tagged-node"]),v2(e,this.selection_attribute_name)&&(n+=" "+Ir["selected-node"]),e.parent||(n+=" "+Ir["root-node"]),(Q0(e)||x2(e))&&(n+=" "+Ir["collapsed-node"]),n}function w_(e){return!(e.hidden||e.notshown)}function Wb(e){return e.notshown}function x2(e){return e.hasHiddenNodes||!1}function Q0(e){return e.collapsed||!1}function Yb(e){return[e.node,e["internal-node"],e["collapsed-node"],e["tagged-node"],e["root-node"]].reduce(function(n,a,d,w){return n+="g."+a+(d<w.length-1?",":"")},"")}function qP(e,n){this.phylotree.clearInternalNodes(n);for(var a=this.phylotree.nodes.descendants().length-1;a>=0;a--){var d=this.phylotree.nodes.descendants()[a];Wr(d)||v2(d,this.selection_attribute_name)||(d[this.selection_attribute_name]=e(d.children))}this.modifySelection((w,M)=>Wr(w.target)?w.target[this.selection_attribute_name]:w.target[this.selection_attribute_name])}function Xb(e){return e=e.data,Wr(e)?e.name||"":this.showInternalName(e)?e.name:""}function ZP(e){return arguments.length?(this._nodeLabel=e||Xb,this.update(),this):this._nodeLabel}const HP=Object.freeze(Object.defineProperty({__proto__:null,defNodeLabel:Xb,drawNode:NP,hasHiddenNodes:x2,internalLabel:qP,isNodeCollapsed:Q0,nodeCssSelectors:Yb,nodeLabel:ZP,nodeNotshown:Wb,nodeSpan:QP,nodeVisible:w_,reclassNode:GP,shiftTip:OP,showInternalName:UP,updateHasHiddenNodes:VP},Symbol.toStringTag,{value:"Module"}));function Kb(e){return[e.clade].reduce(function(n,a,d,w){return n+="path."+a+(d<w.length-1?",":"")},"")}function $P(e){let n=this.svg.selectAll("."+this.css_classes["tree-container"]);var a=0;let d=n.selectAll(Kb(this.css_classes)).data(this.phylotree.nodes.descendants().filter(Q0),function(P){return P.id||(P.id=++a)}),w=function(){},M=void 0;this.radial()?(w=u_().curve(lv).y(function(P){return P[0]}).x(function(P){return P[1]}),M=function(P,c,U,O,j){return c?[U.screen_y+(P[0]-O)/50,U.screen_x+(P[1]-j)/50]:[U.screen_y,U.screen_x]}):(w=u_().y(function(P){return P[0]}).x(function(P){return P[1]}).curve(lv),M=function(P,c,U,O,j){return c?[U.screen_y+(P[0]-O)/50,U.screen_x+(P[1]-j)/50]:[U.screen_y,U.screen_x]}),d.exit().each(function(P){P.collapsed_clade=null}).remove(),e?d.enter().insert("path",":first-child").attr("class",this.css_classes.clade).merge(d).attr("d",function(P){if(P.collapsed_clade)return P.collapsed_clade;let c=P.collapsed[0][0],U=P.collapsed[0][1];return w(P.collapsed.map(function(O,j){return M(O,j,P,c,U)}))}).attr("d",function(P){return P.collapsed_clade=w(P.collapsed)}):d.enter().insert("path",":first-child").attr("class",this.css_classes.clade).merge(d).attr("d",function(P){return P.collapsed_clade?P.collapsed_clade:P.collapsed_clade=w(P.collapsed)})}const jP=Object.freeze(Object.defineProperty({__proto__:null,cladeCssSelectors:Kb,updateCollapsedClades:$P},Symbol.toStringTag,{value:"Module"}));function WP(e,n,a){e=Gr(e),e=e.attr("class",P=>this.reclassEdge(P)).on("click",P=>{this.modifySelection([n.target],this.selection_attribute_name),this.update()});let d=this.draw_branch([n.source,n.target]);a&&e.datum().existing_path&&(e=e.attr("d",function(P){return P.existing_path})),e=e.attr("d",d),n.existing_path=d;var w=this.phylotree.branch_length_accessor(n.target);if(w!==void 0){var M=e.selectAll("title");M.empty()&&(M=e.append("title")),M.text("Length = "+w)}else e.selectAll("title").remove();return this.edge_styler&&this.edge_styler(e,n,a),this.phylotree}function YP(e){let n=Ir.branch;return y2(e)&&(n+=" "+Ir["tagged-branch"]),v2(e,this.selection_attribute_name)&&(n+=" "+Ir["selected-branch"]),n}function XP(){this.links.forEach(e=>{e.target.data.annotation&&(e.target[e.target.data.annotation]=e.target.data.annotation)})}function KP(){if(this.links.forEach(e=>{e[this.selection_attribute_name]=e.target[this.selection_attribute_name]||!1,e.tag=e.target.tag||!1}),this.countHandler()){let e={};e[this.selection_attribute_name]=this.links.reduce((n,a)=>n+(a[this.selection_attribute_name]?1:0),0),e.tagged=this.links.reduce(function(n,a){return n+(y2(a)?1:0)},0),this.countUpdate(this,e,this.countHandler())}}function b_(e){return!(e.target.hidden||e.target.notshown)}function k_(e){return[e.branch,e["selected-branch"],e["tagged-branch"]].reduce(function(n,a,d,w){return n+="path."+a+(d<w.length-1?",":"")},"")}function JP(e,n){return this.edge_placer(e,n)}const ez=Object.freeze(Object.defineProperty({__proto__:null,drawEdge:WP,edgeCssSelectors:k_,edgeVisible:b_,initializeEdgeLabels:XP,placeAlongAnEdge:JP,reclassEdge:YP,syncEdgeLabels:KP},Symbol.toStringTag,{value:"Module"}));let Mm="phylotree.event";function tz(e){if(e.collapsed){e.collapsed=!1;let n=function(a){Wr(a)||a.collapsed||a.children.forEach(n),a.hidden=!1};n(e)}else e.collapsed=!0;return this.placenodes(),this}function nz(e,n,a){let d=this.size;if(this.radial()){let w=this.pad_width(),M=this.options["top-bottom-spacing"]!="fit-to-size"?this.pad_height():0;d=[d[1]+2*w,d[0]+2*w+M],n&&n.selectAll("."+Ir["tree-container"]).attr("transform","translate ("+w+","+(w+M)+")")}else d=[d[0]+(this.options["top-bottom-spacing"]!="fit-to-size"?this.pad_height():0),d[1]+(this.options["left-right-spacing"]!="fit-to-size"?this.pad_width():0)];return n&&(a&&(n=n.transition(100)),n.attr("height",d[0]).attr("width",d[1])),this.size=d,d}function iz(e,n){n=n||"y_scaled",n in this&&(this[n]*=e)}function E_(e){var n=new CustomEvent(Mm,{detail:["refresh",e]});document.dispatchEvent(n)}function Jb(e,n){var a=new CustomEvent(Mm,{detail:["countUpdate",n,e.countHandler()]});document.dispatchEvent(a)}function rz(e){var n=new CustomEvent(Mm,{detail:["layout",e,e.layoutHandler()]});document.dispatchEvent(n)}function e3(e){switch(e.detail[0]){case"refresh":e.detail[1].refresh();break;case"countUpdate":e.detail[2](e.detail[1]);break;case"layout":e.detail[2](e.detail[1])}return!0}function t3(){document.addEventListener(Mm,e3,!1)}function Az(e){return e&&(e[0]!==null||e[1]!==null)?"translate ("+(e[0]!==null?e[0]:0)+","+(e[1]!==null?e[1]:0)+") ":""}function sz(e){return e!==null?"rotate ("+e+") ":""}const oz=Object.freeze(Object.defineProperty({__proto__:null,countUpdate:Jb,d3PhylotreeAddEventListener:t3,d3PhylotreeEventListener:e3,d3PhylotreeSvgRotate:sz,d3PhylotreeSvgTranslate:Az,d3PhylotreeTriggerLayout:rz,rescale:iz,resizeSvg:nz,toggleCollapse:tz,triggerRefresh:E_},Symbol.toStringTag,{value:"Module"}));let Ev="d3_layout_phylotree_context_menu";function az(e,n,a,d,w){let M=Gr(n).select("#"+Ev);if(M.empty()&&(M=Gr(n).append("div").attr("id",Ev).attr("class","dropdown-menu").attr("role","menu")),M.selectAll("a").remove(),M.selectAll("h6").remove(),M.selectAll("div").remove(),e){if(!am([!!e.menu_items,d.hide,d.selectable,d.collapsible])||!d["show-menu"])return;Wr(e)||(d.collapsible&&(M.append("a").attr("class","dropdown-item").attr("tabindex","-1").text(Q0(e)?"Expand Subtree":"Collapse Subtree").on("click",O=>{M.style("display","none"),this.toggleCollapse(e).update()}),d.selectable&&(M.append("div").attr("class","dropdown-divider"),M.append("h6").attr("class","dropdown-header").text("Toggle selection"))),d.selectable&&(M.append("a").attr("class","dropdown-item").attr("tabindex","-1").text("All descendant branches").on("click",function(O){M.style("display","none"),a.modifySelection(a.selectAllDescendants(e,!0,!0))}),M.append("a").attr("class","dropdown-item").attr("tabindex","-1").text("All terminal branches").on("click",function(O){M.style("display","none"),a.modifySelection(a.selectAllDescendants(e,!0,!1))}),M.append("a").attr("class","dropdown-item").attr("tabindex","-1").text("All internal branches").on("click",function(O){M.style("display","none"),a.modifySelection(a.selectAllDescendants(e,!1,!0))}))),e.parent&&(d.selectable&&(M.append("a").attr("class","dropdown-item").attr("tabindex","-1").text("Incident branch").on("click",function(O){M.style("display","none"),a.modifySelection([e])}),M.append("a").attr("class","dropdown-item").attr("tabindex","-1").text("Path to root").on("click",O=>{M.style("display","none"),this.modifySelection(this.phylotree.pathToRoot(e))}),(d.reroot||d.hide)&&M.append("div").attr("class","dropdown-divider")),d.reroot&&M.append("a").attr("class","dropdown-item").attr("tabindex","-1").text("Reroot on this node").on("click",O=>{M.style("display","none"),this.phylotree.reroot(e),this.update()}),d.hide&&M.append("a").attr("class","dropdown-item").attr("tabindex","-1").text("Hide this "+(Wr(e)?"node":"subtree")).on("click",O=>{M.style("display","none"),this.modifySelection([e],"notshown",!0,!0).updateHasHiddenNodes().update()})),x2(e)&&M.append("a").attr("class","dropdown-item").attr("tabindex","-1").text("Show all descendant nodes").on("click",function(O){M.style("display","none"),a.modifySelection(a.selectAllDescendants(e,!0,!0),"notshown",!0,!0,"false").updateHasHiddenNodes().update()});var P=[];if("menu_items"in e&&typeof e.menu_items=="object"&&e.menu_items.forEach(function(O){O.length==3&&(!O[2]||O[2](e))&&P.push([O[0],O[1]])}),P.length){const O=[d.hide,d.selectable,d.collapsible];am(O)&&M.append("div").attr("class","dropdown-divider"),P.forEach(function(j){M.append("a").attr("class","dropdown-item").attr("tabindex","-1").text(j[0](e)).on("click",nu(j[1],e))})}let U=document.querySelector(n).getBoundingClientRect();M.style("position","absolute").style("left",""+(w.clientX-U.x+12)+"px").style("top",""+(w.clientY-U.y)+"px").style("display","block")}else M.style("display","none")}function lz(e,n,a,d){"menu_items"in e||(e.menu_items=[]),e.menu_items.some(function(w){return w[0]==n&&w[1]==a&&w[2]==d})||e.menu_items.push([n,a,d])}function uz(e,n,a,d,w){if(n=n||this.selection_attribute_name,w=w||"toggle",this.options["restricted-selectable"].length)if(tu(RA(x_),e))e=x_[e];else return;if((this.options["restricted-selectable"]||this.options.selectable)&&!this.options["binary-selectable"]){var M=!1;typeof e=="function"?this.links.forEach(function(c){let U=e(c);c[n]=c[n]||!1,c[n]!=U&&(c[n]=U,M=!0,c.target[n]=U)}):(e.forEach(function(c){var U;switch(w){case"true":U=!0;break;case"false":U=!1;break;default:U=!c[n];break}c[n]!=U&&(c[n]=U,M=!0)}),this.links.forEach(function(c){c[n]=c.target[n]}));var P;M&&(d||E_(this),this.countHandler&&(P={},P[n]=this.links.reduce(function(c,U){return c+(U[n]?1:0)},0),Jb(this,P,this.countHandler)),a&&this.placenodes())}else this.options["binary-selectable"]&&(typeof e=="function"?this.links.forEach(function(c){var U=e(c);c[n]=c[n]||!1,c[n]!=U&&(c[n]=U,M=!0,c.target[n]=U),this.options["attribute-list"].forEach(function(O){O!=n&&c[n]===!0&&(c[O]=!1,c.target[O]=!1)})}):(e.forEach(function(c){var U;U=!c[n],c[n]!=U&&(c[n]=U,M=!0)}),this.links.forEach(function(c){c[n]=c.target[n],this.options["attribute-list"].forEach(function(U){U!=n&&c[n]!==!0&&(c[U]=!1,c.target[U]=!1)})})),M&&(d||E_(this),this.countHandler()&&(P={},P[n]=this.links.reduce(function(c,U){return c+(U[n]?1:0)},0),this.countUpdate(this,P,this.countHandler())),a&&this.placenodes()));return this.selectionCallback&&n!="tag"&&this.selectionCallback(this.getSelection()),this.refresh(),this.update(),this}function cz(){return this.nodes.filter(e=>e[this.selection_attribute_name])}function hz(e,n,a){let d=[];function w(M){Wr(M)?n&&M!=e&&d.push(M):(a&&M!=e&&d.push(M),M.children.forEach(w))}return w(e),d}function fz(e){return e?(this.selectionCallback=e,this):this.selectionCallback}const dz=Object.freeze(Object.defineProperty({__proto__:null,addCustomMenu:lz,getSelection:cz,modifySelection:uz,nodeDropdownMenu:az,selectAllDescendants:hz,selectionCallback:fz},Symbol.toStringTag,{value:"Module"}));function Mv(e){return function(){return e}}class K0{constructor(n,a={}){this.css_classes=Ir,this.phylotree=n,this.container=a.container,this.separation=function(w,M){return 0},this._nodeLabel=this.defNodeLabel,this.svg=null,this.selectionCallback=null,this.scales=[1,1],this.size=[1,1],this.fixed_width=[14,30],this.scale_bar_font_size=12,this.draw_branch=bv,this.draw_scale_bar=null,this.edge_placer=kv,this.count_listener_handler=function(){},this.layout_listener_handler=function(){},this.node_styler=void 0,this.edge_styler=void 0,this.selection_attribute_name="selected",this.right_most_leaf=0,this.label_width=0,this.radial_center=0,this.radius=1,this.radius_pad_for_bubbles=0,this.rescale_nodeSpan=1,this.relative_nodeSpan=function(w){return this.nodeSpan(w)/this.rescale_nodeSpan};let d={layout:"left-to-right",logger:console,branches:"step",scaling:!0,bootstrap:!1,"color-fill":!0,"font-size":14,"internal-names":!1,selectable:!0,"restricted-selectable":!1,collapsible:!0,"left-right-spacing":"fixed-step","top-bottom-spacing":"fixed-step","left-offset":0,"show-scale":"top","draw-size-bubbles":!1,"bubble-styler":this.radius_pad_for_bubbles,"binary-selectable":!1,"is-radial":!1,"attribute-list":[],"max-radius":768,"annular-limit":.38196601125010515,compression:.2,"align-tips":!1,"maximum-per-node-spacing":100,"minimum-per-node-spacing":2,"maximum-per-level-spacing":100,"minimum-per-level-spacing":10,node_circle_size:Mv(3),transitions:null,brush:!0,reroot:!0,hide:!0,"label-nodes-with-name":!1,zoom:!1,"show-menu":!0,"show-labels":!0,"node-styler":null,"edge-styler":null,"node-span":null};this.ensure_size_is_in_px=function(w){return typeof w=="number"?w+"px":w},this.options=l2(a,d),this.font_size=this.options["font-size"],this.offsets=[0,this.font_size/2],this.shown_font_size=this.font_size,this.width=this.options.width||800,this.height=this.options.height||600,this.node_styler=this.options["node-styler"],this.edge_styler=this.options["edge-styler"],this.nodeSpan=this.options["node-span"],this.nodeSpan||(this.nodeSpan=function(w){return 1}),this.rescale_nodeSpan=this.phylotree.nodes.children.map(w=>{if(Wr(w)||this.showInternalName(w))return this.nodeSpan(w)}).reduce(function(w,M){return Math.min(M,w||1e200)},null)||1,this.initialize_svg(this.container),this.links=this.phylotree.nodes.links(),this.initializeEdgeLabels(),this.update(),t3()}pad_height(){return this.draw_scale_bar?this.scale_bar_font_size+25:0}pad_width(){this.label_width=this._label_width(this.shown_font_size);const n=this.options["show-labels"]?this.label_width:0;return this.offsets[1]+this.options["left-offset"]+n}collapse_node(n){Q0(n)||(n.collapsed=!0)}set_size(n){if(!arguments.length)return this.size;let a=n;return this.options["top-bottom-spacing"]!="fixed-step"&&(this.size[0]=a[0]),this.options["left-right-spacing"]!="fixed-step"&&(this.size[1]=a[1]),this}initialize_svg(n){return this.svg!==n&&(Gr(n).select("svg").remove(),this.svg=fT("svg").attr("width",this.width).attr("height",this.height),this.set_size([this.height,this.width]),this.css_classes["tree-container"]=="phylotree-container"&&(this.svg.selectAll("*").remove(),this.svg.append("defs")),Gr(this.container).on("click",a=>{this.handle_node_click(null)},!0)),this}update_layout(n,a){a&&(this.nodes=D0(n),this.nodes.each(function(d){d.id=null})),this.update(),this.syncEdgeLabels()}update(n){var a=this;this.placenodes(),n=this.transitions(n);let d=0,w=this.svg.selectAll("."+Ir["tree-container"]).data([0]);if(w=w.enter().append("g").attr("class",Ir["tree-container"]).merge(w).attr("transform",O=>this.d3PhylotreeSvgTranslate([this.offsets[1]+this.options["left-offset"],this.pad_height()])),this.draw_scale_bar){let O=this.svg.selectAll("."+Ir["tree-scale-bar"]).data([0]);O.enter().append("g").attr("class",Ir["tree-scale-bar"]).style("font-size",this.ensure_size_is_in_px(this.scale_bar_font_size)).merge(O).attr("transform",j=>this.d3PhylotreeSvgTranslate([this.offsets[1]+this.options["left-offset"],this.pad_height()-10])).call(this.draw_scale_bar),O.selectAll("text").style("text-anchor","end")}else this.svg.selectAll("."+Ir["tree-scale-bar"]).remove();w=this.svg.selectAll("."+Ir["tree-container"]).data([0]),this.updateCollapsedClades(n);let M=w.selectAll(k_(Ir)).data(this.links.filter(b_),O=>O.target.id||(O.target.id=++d));M.exit().remove(),M=M.enter().insert("path",":first-child").merge(M).each(function(O){a.drawEdge(this,O,n)});let P=w.selectAll(Yb(Ir)).data(this.phylotree.nodes.descendants().filter(w_),O=>O.id||(O.id=++d));if(P.exit().remove(),P=P.enter().append("g").attr("class",this.reclassNode).merge(P).attr("transform",O=>{const j=this.options.layout=="right-to-left"&&Wr(O);return O.screen_x=Du(O),O.screen_y=z0(O),this.d3PhylotreeSvgTranslate([j?0:O.screen_x,O.screen_y])}).each(function(O){a.drawNode(this,O,n)}).attr("transform",O=>{if(!U0(O.screen_x)&&!U0(O.screen_y))return"translate("+O.screen_x+","+O.screen_y+")"}),this.options["label-nodes-with-name"]&&(P=P.attr("id",O=>"node-"+O.name)),this.resizeSvg(this.phylotree,this.svg,n),this.options.brush){var c=w.selectAll("."+Ir["tree-selection-brush"]).data([0]).enter().insert("g",":first-child").attr("class",Ir["tree-selection-brush"]),U=uC().on("brush",(O,j)=>{var W=O.selection,J=this.links.filter(b_),ae=J.filter((be,Ze)=>be.source.screen_x>=W[0][0]&&be.source.screen_x<=W[1][0]&&be.source.screen_y>=W[0][1]&&be.source.screen_y<=W[1][1]&&be.target.screen_x>=W[0][0]&&be.target.screen_x<=W[1][0]&&be.target.screen_y>=W[0][1]&&be.target.screen_y<=W[1][1]).map(be=>be.target);this.modifySelection(this.phylotree.links.map(be=>be.target),"tag",!1,ae.length>0,"false"),this.modifySelection(ae,"tag",!1,!1,"true")}).on("end",()=>{});c.call(U)}if(this.syncEdgeLabels(),this.options.zoom){let O=bB().scaleExtent([.1,10]).on("zoom",j=>{Gr("."+Ir["tree-container"]).attr("transform",W=>j.transform),Gr("."+Ir["tree-scale-bar"]).attr("transform",W=>{let J=j.transform;return J.y-=10,J})});this.svg.call(O)}return this}_handle_single_node_layout(n){let a=this.nodeSpan(n)/this.rescale_nodeSpan;this.x=n.x=this.x+this.separation(this.last_node,n)+(this.last_span+a)*.5,this._extents[1][1]=Math.max(this._extents[1][1],n.y),this._extents[1][0]=Math.min(this._extents[1][0],n.y-a*.5),this.is_under_collapsed_parent?this._extents[0][1]=Math.max(this._extents[0][1],this.save_x+(n.x-this.save_x)*this.options.compression+this.save_span+(a*.5+this.separation(this.last_node,n))*this.options.compression):this._extents[0][1]=Math.max(this._extents[0][1],this.x+a*.5+this.separation(this.last_node,n)),this.last_node=n,this.last_span=a}tree_layout(n){if(Wb(n))return;let a=Wr(n);n.text_angle=null,n.text_align=null,n.radius=null,n.angle=null;let d=!1;if(n.parent)if(this.do_scaling){if(d)return 0;if(n.y=this.phylotree.branch_length_accessor(n),typeof n.y>"u")return d=!0,0;n.y+=n.parent.y}else n.y=a?this.max_depth:n.depth;else this.x=0,n.y=0,this.last_node=null,this.last_span=0,this._extents=[[0,0],[0,0]];if(a&&this._handle_single_node_layout(n),!a)if(Q0(n)&&!this.is_under_collapsed_parent){if(this.save_x=this.x,this.save_span=this.last_span*.5,this.is_under_collapsed_parent=!0,this.process_internal_node(n),this.is_under_collapsed_parent=!1,typeof n.x=="number"){n.x=this.save_x+(n.x-this.save_x)*this.options.compression+this.save_span,n.collapsed=[[n.x,n.y]];var w=M=>{M.hidden=!0,Wr(M)?(this.x=M.x=this.save_x+(M.x-this.save_x)*this.options.compression+this.save_span,n.collapsed.push([M.x,M.y])):M.children.map(w)};this.x=this.save_x,w(n),n.collapsed.splice(1,0,[this.save_x,n.y]),n.collapsed.push([this.x,n.y]),n.collapsed.push([n.x,n.y]),n.hidden=!1}}else this.process_internal_node(n);return n.x}process_internal_node(n){let a=0;if(this.showInternalName(n)){let d=n.children.length/2>>0,w=0,M=!1;for(let P=0;P<n.children.length;P++)typeof this.tree_layout(n.children[P])=="number"&&w++,w>=d&&!M&&(this._handle_single_node_layout(n),M=!0);w==0?(n.notshown=!0,n.x=void 0):M||this._handle_single_node_layout(n)}else n.x=n.children.map(this.tree_layout.bind(this)).reduce((d,w)=>typeof w=="number"?d+w:(a+=1,d),0),a==n.children.length?(n.notshown=!0,n.x=void 0):n.x/=n.children.length-a}do_lr(n){if(this.radial()&&n&&(this.offsets[1]=0),this.options["left-right-spacing"]=="fixed-step")this.size[1]=this.max_depth*this.fixed_width[1],this.scales[1]=(this.size[1]-this.offsets[1]-this.options["left-offset"])/this._extents[1][1],this.label_width=this._label_width(this.shown_font_size),this.radial()&&(this.label_width*=2);else{this.label_width=this._label_width(this.shown_font_size),n=!0;let a=this.size[1]-this.offsets[1]-this.options["left-offset"];a*.5<this.label_width&&(this.shown_font_size*=a*.5/this.label_width,this.label_width=a*.5),this.scales[1]=(this.size[1]-this.offsets[1]-this.options["left-offset"]-this.label_width)/this._extents[1][1]}}placenodes(){this._extents=[[0,0],[0,0]],this.x=0,this.last_span=0,this.last_node=null,this.last_span=0,this.save_x=this.x,this.save_span=this.last_span*.5,this.do_scaling=this.options.scaling;let n=!1;this.is_under_collapsed_parent=!1,this.max_depth=1,this.phylotree.nodes.x=this.tree_layout(this.phylotree.nodes,this.do_scaling),this.max_depth=EE(this.phylotree.nodes.descendants(),d=>d.depth),this.do_scaling&&n&&(this.do_scaling=!1,this.phylotree.nodes.x=this.tree_layout(this.phylotree.nodes));let a=!1;if(this.draw_scale_bar=this.options["show-scale"]&&this.do_scaling,this.offsets[1]=Math.max(this.font_size,-this._extents[1][0]*this.fixed_width[0]),this.options["top-bottom-spacing"]=="fixed-step"?(this.size[0]=this._extents[0][1]*this.fixed_width[0],this.scales[0]=this.fixed_width[0]):(this.scales[0]=(this.size[0]-this.pad_height())/this._extents[0][1],a=!0),this.shown_font_size=Math.min(this.font_size,this.scales[0]),this.radial()){this.draw_branch=nu(wv,this.radial_center),this.edge_placer=SP;let d=null,w=null,M=null,P=0,c=this._extents[0][1]*this.scales[0],U=function(J,ae,be,Ze,xe){return xe=xe||0,Math.sqrt((ae-J)*(ae-J)+2*(J+xe)*(ae+xe)*(1-Math.cos(be-Ze)))},O=0;this.phylotree.nodes.each(J=>{let ae=J.x*this.scales[0];J.angle=2*Math.PI*ae/c,J.text_angle=J.angle-Math.PI/2,J.text_angle=J.text_angle>0&&J.text_angle<Math.PI,J.text_align=J.text_angle?"end":"start",J.text_angle=(J.text_angle?180:0)+J.angle*180/Math.PI}),this.do_lr(a),this.phylotree.nodes.each(J=>{J.radius=J.y*this.scales[1]/this.size[1],O=Math.max(J.radius,O)});let j=0;this.phylotree.nodes.each(J=>{if(!J.children){let ae=J.x*this.scales[0];if(d!==null){let be=ae-w,Ze=U(J.radius,M,J.angle,d,j),xe=Ze>0?be/Ze:10*this.options["max-radius"];if(xe>this.options["max-radius"]){let Ce=be/this.options["max-radius"],je=J.radius+M,Qe=J.radius*M-(Ce*Ce-(M-J.radius)*(M-J.radius))/2/(1-Math.cos(d-J.angle)),nt=Math.sqrt(je*je-4*Qe);j=Math.min(this.options["annular-limit"]*O,(-je+nt)/2),P=this.options["max-radius"]}else P=Math.max(P,xe)}d=J.angle,w=ae,M=J.radius}}),this.radius=Math.min(this.options["max-radius"],Math.max(c/2/Math.PI,P)),a&&(this.radius=Math.min(this.radius,(Math.min(c,this._extents[1][1]*this.scales[1])-this.label_width)*.5-this.radius*j)),this.radial_center=this.radius_pad_for_bubbles=this.radius,this.draw_branch=nu(wv,this.radial_center);let W=1;j&&(W=O/(O+j),this.radius*=W),this.phylotree.nodes.each(J=>{if(xv(J,this.radius,j,this.radial_center,this.scales,this.size),O=Math.max(O,J.radius),this.options["draw-size-bubbles"]?this.radius_pad_for_bubbles=Math.max(this.radius_pad_for_bubbles,J.radius+this.nodeBubbleSize(J)):this.radius_pad_for_bubbles=Math.max(this.radius_pad_for_bubbles,J.radius),J.collapsed){J.collapsed=J.collapsed.map(be=>{let Ze={};return Ze.x=be[0],Ze.y=be[1],Ze=xv(Ze,this.radius,j,this.radial_center,this.scales,this.size),[Ze.x,Ze.y]});let ae=J.collapsed[1];J.collapsed=J.collapsed.filter(function(be,Ze){return Ze<3||Ze>J.collapsed.length-4?!0:Math.sqrt(Math.pow(be[0]-ae[0],2)+Math.pow(be[1]-ae[1],2))>3?(ae=be,!0):!1})}}),this.size[0]=this.radial_center+this.radius/W,this.size[1]=this.radial_center+this.radius/W}else this.do_lr(),this.draw_branch=bv,this.edge_placer=kv,this.right_most_leaf=0,this.phylotree.nodes.each(d=>{if(d.x*=this.scales[0],d.y*=this.scales[1]*.8,this.options.layout=="right-to-left"&&(d.y=this._extents[1][1]*this.scales[1]-d.y),Wr(d)&&(this.right_most_leaf=Math.max(this.right_most_leaf,d.y+this.nodeBubbleSize(d))),d.collapsed){d.collapsed.forEach(M=>{M[0]*=this.scales[0],M[1]*=this.scales[1]*.8});let w=d.collapsed[1][0];d.collapsed=d.collapsed.filter(function(M,P){return P<3||P>d.collapsed.length-4?!0:M[0]-w>3?(w=M[0],!0):!1})}});if(this.draw_scale_bar){let d,w;if(this.radial()){if(w=Math.min(this.radius/5,50),d=Math.pow(10,Math.ceil(Math.log(this._extents[1][1]*w/this.radius)/Math.log(10))),w=d*(this.radius/this._extents[1][1]),w<30){let c=Math.ceil(30/w);w*=c,d*=c}}else d=this._extents[1][1],w=this.size[1]-this.offsets[1]-this.options["left-offset"]-this.shown_font_size;let M=Dw().domain([0,d]).range([0,w]),P=X_(".2f");if(this.draw_scale_bar=PE().scale(M).tickFormat(function(c){return c===0?"":P(c)}),this.radial())this.draw_scale_bar.tickValues([d]);else{let c=function(O,j){return j?Math.round(O*(j=Math.pow(10,j)))/j:Math.round(O)},U=M.ticks();U=U.length>1?U[1]:U[0],this.draw_scale_bar.ticks(Math.min(10,c(w/(this.shown_font_size*P(U).length*2),0)))}}else this.draw_scale_bar=null;return this}spacing_x(n,a){return arguments.length?(this.fixed_width[0]!=n&&n>=this.options["minimum-per-node-spacing"]&&n<=this.options["maximum-per-node-spacing"]&&(this.fixed_width[0]=n,a||this.placenodes()),this):this.fixed_width[0]}spacing_y(n,a){return arguments.length?(this.fixed_width[1]!=n&&n>=this.options["minimum-per-level-spacing"]&&n<=this.options["maximum-per-level-spacing"]&&(this.fixed_width[1]=n,a||this.placenodes()),this):this.fixed_width[1]}_label_width(n){n=n||this.shown_font_size;let a=0;return this.phylotree.nodes.descendants().filter(w_).forEach(d=>{let w=12+this._nodeLabel(d).length*n*.8;d.angle!==null&&(w*=Math.max(Math.abs(Math.cos(d.angle)),Math.abs(Math.sin(d.angle)))),a=Math.max(w,a)}),a}font_size(n){return arguments.length?(this.font_size=n===void 0?12:n,this):this.font_size}scale_bar_font_size(n){return arguments.length?(this.scale_bar_font_size=n===void 0?12:n,this):this.scale_bar_font_size}node_circle_size(n,a){return arguments.length?(this.options.node_circle_size=Mv(n===void 0?3:n),this):this.options.node_circle_size}css(n){if(arguments.length===0)return this.css_classes;if(arguments.length>2){var a={};return a[n[0]]=n[1],this.css(a)}for(var d in Ir)d in n&&n[d]!=Ir[d]&&(Ir[d]=n[d]);return this}transitions(n){return n!==void 0?n:this.options.transitions!==null?this.options.transitions:this.phylotree.nodes.descendants().length<=300}css_classes(n,a){if(!arguments.length)return this.css_classes;let d=!1;for(var w in Ir)w in n&&n[w]!=this.css_classes[w]&&(d=!0,this.css_classes[w]=n[w]);return a&&d&&this.layout(),this}layout(n){return this.svg?(this.svg.selectAll("."+this.css_classes["tree-container"]+",."+this.css_classes["tree-scale-bar"]+",."+this.css_classes["tree-selection-brush"]),this.d3PhylotreeTriggerLayout(this),this.update()):(this.d3PhylotreeTriggerLayout(this),this)}handle_node_click(n,a){this.nodeDropdownMenu(n,this.container,this,this.options,a)}refresh(){if(this.svg){let a=this.svg.selectAll("."+this.css_classes["tree-container"]).selectAll(k_(this.css_classes)).attr("class",this.reclassEdge.bind(this));this.edge_styler&&a.each(d=>{this.edge_styler(Gr(this),d)})}return this}countHandler(n){return arguments.length?(this.count_listener_handler=n,this):this.count_listener_handler}style_nodes(n){return arguments.length?(this.node_styler=n,this):this.node_styler}style_edges(n){return arguments.length?(this.edge_styler=n.bind(this),this):this.edge_styler}itemSelected(n,a){return n[a]||!1}show(){return this.svg.node()}}Fl(K0.prototype,jP);Fl(K0.prototype,HP);Fl(K0.prototype,ez);Fl(K0.prototype,oz);Fl(K0.prototype,dz);Fl(K0.prototype,FP);function pz(e,n,a){return this.nodes.sum(function(d){return d.value}).sort(e),this.display&&(this.display.update_layout(this.nodes),this.display.update()),this}function mz(e){var n;return e=e.map(function(a){return typeof a=="string"?a:a.data.name}),this.traverse_and_compute(function(a){a.children?a.parent?(a.data.mrca=Ub(...a.descendants().map(d=>d.data.mrca)),!n&&a.data.mrca.length==e.length&&(n=a)):n||(n=a):a.data.mrca=Qb([a.data.name],e)}),n}let ks=class{constructor(e,n={}){this.newick_string="",this.nodes=[],this.links=[],this.parsed_tags=[],this.partitions=[],this.branch_length_accessor=v_,this.branch_length=v_,this.logger=n.logger||console,this.selection_attribute_name="selected";var a=n.type||void 0,d=[],w=this;if(wm(a))a in f1?d=f1[a](e,n):w.logger.error("type "+a+" not in registry! Available types are "+RA(f1));else if(no(a))try{d=a(e,n)}catch{w.logger.error("Could not parse custom format!")}else e.name=="root"?d={json:e,error:null}:typeof e!="string"?d=e:e.contentType=="application/xml"?d=Hb(e):(this.newick_string=e,d=Cf(e,n));if(!d.json)w.nodes=[];else{w.nodes=D0(d.json);let M={};w.nodes.each(P=>{P.data.annotation&&(M[P.data.annotation]=!0)}),w.parsed_tags=Object.keys(M)}return w.links=w.nodes.links(),this.hasBranchLengths()||(console.warn("Phylotree User Warning : NO BRANCH LENGTHS DETECTED, SETTING ALL LENGTHS TO 1"),this.setBranchLength(M=>1)),w}json(e){var n=0;this.traverse_and_compute(function(d){d.json_export_index=n++},e);var a=new Array(n);return n=0,this.traverse_and_compute(function(d){let w=db(d);delete w.json_export_index,d.parent&&(w.parent=d.parent.json_export_index),d.children&&(w.children=Mo(d.children,function(M){return M.json_export_index})),a[n++]=w},e),this.traverse_and_compute(function(d){delete d.json_export_index},e),JSON.stringify(a)}traverse_and_compute(e,n,a,d){n=n||"post-order";function w(c){U0(c)||jb(c,e,d)}function M(c){pP(c,e,d)}function P(c){mP(c,e,d)}return n=="pre-order"?n=M:n=="in-order"?n=P:n=w,n(a||this.nodes),this}get_parsed_tags(){return this.parsed_tags}update(e){this.nodes=e}render(e){return this.display=new K0(this,e),this.display}};ks.prototype.isLeafNode=Wr;ks.prototype.selectAllDescendants=qb;ks.prototype.mrca=mz;ks.prototype.hasBranchLengths=_P;ks.prototype.getBranchLengths=yP;ks.prototype.branchName=bP;ks.prototype.normalizeBranchLengths=xP;ks.prototype.scaleBranchLengths=wP;ks.prototype.getNewick=sP;ks.prototype.resortChildren=pz;ks.prototype.setBranchLength=vP;ks.prototype.maxParsimony=hP;ks.prototype.getTipLengths=cP;ks.prototype.leftChildRightSibling=gP;Fl(ks.prototype,AP);Fl(ks.prototype,TP);Fl(ks.prototype,lP);Vw("%Y%m%d");function gz(e){let n;return{c(){n=ar("div"),this.h()},l(a){n=lr(a,"DIV",{id:!0,class:!0}),ui(n).forEach(pn),this.h()},h(){Jt(n,"id","tree_container"),Jt(n,"class","svelte-1v05lyv")},m(a,d){nr(a,n,d),e[1](n)},p:ra,i:ra,o:ra,d(a){a&&pn(n),e[1](null)}}}function _z(e,n,a){let d;B_(()=>{let c="(((EELA:0.150276,CONGERA:0.213019):0.230956,(EELB:0.263487,CONGERB:0.202633):0.246917):0.094785,((CAVEFISH:0.451027,(GOLDFISH:0.340495,ZEBRAFISH:0.390163):0.220565):0.067778,((((((NSAM:0.008113,NARG:0.014065):0.052991,SPUN:0.061003,(SMIC:0.027806,SDIA:0.015298,SXAN:0.046873):0.046977):0.009822,(NAUR:0.081298,(SSPI:0.023876,STIE:0.013652):0.058179):0.091775):0.073346,(MVIO:0.012271,MBER:0.039798):0.178835):0.147992,((BFNKILLIFISH:0.317455,(ONIL:0.029217,XCAU:0.084388):0.201166):0.055908,THORNYHEAD:0.252481):0.061905):0.157214,LAMPFISH:0.717196,((SCABBARDA:0.189684,SCABBARDB:0.362015):0.282263,((VIPERFISH:0.318217,BLACKDRAGON:0.109912):0.123642,LOOSEJAW:0.3971):0.287152):0.140663):0.206729):0.222485,(COELACANTH:0.558103,((CLAWEDFROG:0.441842,SALAMANDER:0.299607):0.135307,((CHAMELEON:0.771665,((PIGEON:0.150909,CHICKEN:0.172733):0.082163,ZEBRAFINCH:0.099172):0.272338):0.014055,((BOVINE:0.167569,DOLPHIN:0.15745):0.104783,ELEPHANT:0.166557):0.367205):0.050892):0.114731):0.295021)",U=new ks(c),O=U.render({height:1e3,width:1e3,"left-right-spacing":"fit-to-size","top-bottom-spacing":"fit-to-size","is-radial":!1,container:"#tree_container"});console.log(O);let j=U.display.show();j.setAttribute("viewBox","0 0 1000 1000"),j.setAttribute("width","100%"),j.setAttribute("height","100%"),console.log(j),d.appendChild(j)});function w(M){Dl[M?"unshift":"push"](()=>{d=M,a(0,d)})}return[d,w]}class yz extends io{constructor(n){super(),ro(this,n,_z,gz,ws,{})}}function Tv(e){let n,a,d=`${e[0].hex}`,w,M,P,c=`${e[0].latlng.lat}, ${e[0].latlng.lng}`,U,O,j,W=e[0].properties[e[1]]+"",J;return{c(){n=ar("div"),a=ar("h1"),w=Il(d),M=vs(),P=ar("h3"),U=Il(c),O=vs(),j=ar("span"),J=Il(W),this.h()},l(ae){n=lr(ae,"DIV",{});var be=ui(n);a=lr(be,"H1",{class:!0});var Ze=ui(a);w=Bl(Ze,d),Ze.forEach(pn),M=xs(be),P=lr(be,"H3",{});var xe=ui(P);U=Bl(xe,c),xe.forEach(pn),O=xs(be),j=lr(be,"SPAN",{});var Ce=ui(j);J=Bl(Ce,W),Ce.forEach(pn),be.forEach(pn),this.h()},h(){Jt(a,"class","svelte-n398cs")},m(ae,be){nr(ae,n,be),jn(n,a),jn(a,w),jn(n,M),jn(n,P),jn(P,U),jn(n,O),jn(n,j),jn(j,J)},p(ae,be){be&1&&d!==(d=`${ae[0].hex}`)&&C0(w,d),be&1&&c!==(c=`${ae[0].latlng.lat}, ${ae[0].latlng.lng}`)&&C0(U,c),be&3&&W!==(W=ae[0].properties[ae[1]]+"")&&C0(J,W)},d(ae){ae&&pn(n)}}}function Sv(e){let n,a="Click on a hexagon to see data";return{c(){n=ar("h3"),n.textContent=a},l(d){n=lr(d,"H3",{"data-svelte-h":!0}),Pp(n)!=="svelte-k06cu4"&&(n.textContent=a)},m(d,w){nr(d,n,w)},d(d){d&&pn(n)}}}function Cv(e){let n,a,d,w;return n=new _E({props:{metric:e[1],point:[[e[0].properties.tree_sizes,e[0].properties[e[1]]]]}}),d=new yz({}),{c(){ea(n.$$.fragment),a=vs(),ea(d.$$.fragment)},l(M){Ca(n.$$.fragment,M),a=xs(M),Ca(d.$$.fragment,M)},m(M,P){ta(n,M,P),nr(M,a,P),ta(d,M,P),w=!0},p(M,P){const c={};P&2&&(c.metric=M[1]),P&3&&(c.point=[[M[0].properties.tree_sizes,M[0].properties[M[1]]]]),n.$set(c)},i(M){w||(Ci(n.$$.fragment,M),Ci(d.$$.fragment,M),w=!0)},o(M){tr(n.$$.fragment,M),tr(d.$$.fragment,M),w=!1},d(M){M&&pn(a),na(n,M),na(d,M)}}}function vz(e){let n,a,d,w,M,P,c="x",U,O,j,W,J=e[0].properties&&Tv(e),ae=(!e[0]||!e[0].properties)&&Sv(),be=e[0].properties&&Cv(e);return{c(){n=ar("div"),a=ar("div"),J&&J.c(),d=vs(),ae&&ae.c(),w=vs(),M=ar("div"),P=ar("button"),P.textContent=c,U=vs(),be&&be.c(),this.h()},l(Ze){n=lr(Ze,"DIV",{class:!0});var xe=ui(n);a=lr(xe,"DIV",{class:!0});var Ce=ui(a);J&&J.l(Ce),d=xs(Ce),ae&&ae.l(Ce),w=xs(Ce),M=lr(Ce,"DIV",{class:!0});var je=ui(M);P=lr(je,"BUTTON",{class:!0,"data-svelte-h":!0}),Pp(P)!=="svelte-18oet5b"&&(P.textContent=c),je.forEach(pn),Ce.forEach(pn),U=xs(xe),be&&be.l(xe),xe.forEach(pn),this.h()},h(){Jt(P,"class","svelte-n398cs"),Jt(M,"class","close svelte-n398cs"),Jt(a,"class","header svelte-n398cs"),Jt(n,"class",z1("modal")+" svelte-n398cs")},m(Ze,xe){nr(Ze,n,xe),jn(n,a),J&&J.m(a,null),jn(a,d),ae&&ae.m(a,null),jn(a,w),jn(a,M),jn(M,P),jn(n,U),be&&be.m(n,null),O=!0,j||(W=nl(P,"click",e[3]),j=!0)},p(Ze,[xe]){Ze[0].properties?J?J.p(Ze,xe):(J=Tv(Ze),J.c(),J.m(a,d)):J&&(J.d(1),J=null),!Ze[0]||!Ze[0].properties?ae||(ae=Sv(),ae.c(),ae.m(a,w)):ae&&(ae.d(1),ae=null),Ze[0].properties?be?(be.p(Ze,xe),xe&1&&Ci(be,1)):(be=Cv(Ze),be.c(),Ci(be,1),be.m(n,null)):be&&(q0(),tr(be,1,1,()=>{be=null}),G0())},i(Ze){O||(Ci(be),O=!0)},o(Ze){tr(be),O=!1},d(Ze){Ze&&pn(n),J&&J.d(),ae&&ae.d(),be&&be.d(),j=!1,W()}}}function xz(e,n,a){let{selectionData:d}=n,{metric:w}=n,{updateData:M}=n;const P=()=>M(null);return e.$$set=c=>{"selectionData"in c&&a(0,d=c.selectionData),"metric"in c&&a(1,w=c.metric),"updateData"in c&&a(2,M=c.updateData)},[d,w,M,P]}class wz extends io{constructor(n){super(),ro(this,n,xz,vz,ws,{selectionData:0,metric:1,updateData:2})}}const w2=Symbol.for("svelte-maplibre");function Vf(){return C_(w2)}function bz(e){let n=new WeakMap;return a=>{var P;let d=n.get(a.originalEvent);if(d!==void 0)return d;let M=(P=a.target.queryRenderedFeatures(a.point).find(c=>{var U;return(U=e.get(c.layer.id))==null?void 0:U.interactive}))==null?void 0:P.layer.id;return n.set(a.originalEvent,M),M}}function kz(){let e=new Map;return I_(w2,{map:Su(null),source:Vg(null),layer:Vg(null),popupTarget:Vg(null),cluster:Su(),loadedImages:Su(new Set),minzoom:Su(0),maxzoom:Su(24),layerEvent:Su(null),layerInfo:e,eventTopMost:bz(e)})}function Iv(e){return{subscribe:e.subscribe}}function Ez({key:e,setPopupTarget:n=!1,setCluster:a=!1,setMouseEvent:d=!1}){let w=Vf(),M=Su(null),P=Iv(M),c={...w,[e]:Iv(M)};if(n&&(c.popupTarget=P),d){let U=Su(null);c.layerEvent=U,w.layerEvent=U}return a&&(c.cluster=Su()),I_(w2,c),{...w,self:M}}function Mz(){return Ez({key:"popupTarget",setPopupTarget:!0,setMouseEvent:!0})}var n3={exports:{}};(function(e,n){(function(a,d){e.exports=d()})(Ic,function(){var a,d,w;function M(c,U){if(!a)a=U;else if(!d)d=U;else{var O="var sharedChunk = {}; ("+a+")(sharedChunk); ("+d+")(sharedChunk);",j={};a(j),w=U(j),typeof window<"u"&&(w.workerUrl=window.URL.createObjectURL(new Blob([O],{type:"text/javascript"})))}}M(["exports"],function(c){function U(o,r,u,g){return new(u||(u=Promise))(function(T,z){function L(Y){try{$(g.next(Y))}catch(ne){z(ne)}}function q(Y){try{$(g.throw(Y))}catch(ne){z(ne)}}function $(Y){var ne;Y.done?T(Y.value):(ne=Y.value,ne instanceof u?ne:new u(function(re){re(ne)})).then(L,q)}$((g=g.apply(o,r||[])).next())})}function O(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}typeof SuppressedError=="function"&&SuppressedError;var j=W;function W(o,r){this.x=o,this.y=r}W.prototype={clone:function(){return new W(this.x,this.y)},add:function(o){return this.clone()._add(o)},sub:function(o){return this.clone()._sub(o)},multByPoint:function(o){return this.clone()._multByPoint(o)},divByPoint:function(o){return this.clone()._divByPoint(o)},mult:function(o){return this.clone()._mult(o)},div:function(o){return this.clone()._div(o)},rotate:function(o){return this.clone()._rotate(o)},rotateAround:function(o,r){return this.clone()._rotateAround(o,r)},matMult:function(o){return this.clone()._matMult(o)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(o){return this.x===o.x&&this.y===o.y},dist:function(o){return Math.sqrt(this.distSqr(o))},distSqr:function(o){var r=o.x-this.x,u=o.y-this.y;return r*r+u*u},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(o){return Math.atan2(this.y-o.y,this.x-o.x)},angleWith:function(o){return this.angleWithSep(o.x,o.y)},angleWithSep:function(o,r){return Math.atan2(this.x*r-this.y*o,this.x*o+this.y*r)},_matMult:function(o){var r=o[2]*this.x+o[3]*this.y;return this.x=o[0]*this.x+o[1]*this.y,this.y=r,this},_add:function(o){return this.x+=o.x,this.y+=o.y,this},_sub:function(o){return this.x-=o.x,this.y-=o.y,this},_mult:function(o){return this.x*=o,this.y*=o,this},_div:function(o){return this.x/=o,this.y/=o,this},_multByPoint:function(o){return this.x*=o.x,this.y*=o.y,this},_divByPoint:function(o){return this.x/=o.x,this.y/=o.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var o=this.y;return this.y=this.x,this.x=-o,this},_rotate:function(o){var r=Math.cos(o),u=Math.sin(o),g=u*this.x+r*this.y;return this.x=r*this.x-u*this.y,this.y=g,this},_rotateAround:function(o,r){var u=Math.cos(o),g=Math.sin(o),T=r.y+g*(this.x-r.x)+u*(this.y-r.y);return this.x=r.x+u*(this.x-r.x)-g*(this.y-r.y),this.y=T,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},W.convert=function(o){return o instanceof W?o:Array.isArray(o)?new W(o[0],o[1]):o};var J=O(j),ae=be;function be(o,r,u,g){this.cx=3*o,this.bx=3*(u-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*r,this.by=3*(g-r)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=r,this.p2x=u,this.p2y=g}be.prototype={sampleCurveX:function(o){return((this.ax*o+this.bx)*o+this.cx)*o},sampleCurveY:function(o){return((this.ay*o+this.by)*o+this.cy)*o},sampleCurveDerivativeX:function(o){return(3*this.ax*o+2*this.bx)*o+this.cx},solveCurveX:function(o,r){if(r===void 0&&(r=1e-6),o<0)return 0;if(o>1)return 1;for(var u=o,g=0;g<8;g++){var T=this.sampleCurveX(u)-o;if(Math.abs(T)<r)return u;var z=this.sampleCurveDerivativeX(u);if(Math.abs(z)<1e-6)break;u-=T/z}var L=0,q=1;for(u=o,g=0;g<20&&(T=this.sampleCurveX(u),!(Math.abs(T-o)<r));g++)o>T?L=u:q=u,u=.5*(q-L)+L;return u},solve:function(o,r){return this.sampleCurveY(this.solveCurveX(o,r))}};var Ze=O(ae);let xe,Ce;function je(){return xe==null&&(xe=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),xe}function Qe(){if(Ce==null&&(Ce=!1,je())){const r=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(r){for(let g=0;g<5*5;g++){const T=4*g;r.fillStyle=`rgb(${T},${T+1},${T+2})`,r.fillRect(g%5,Math.floor(g/5),1,1)}const u=r.getImageData(0,0,5,5).data;for(let g=0;g<5*5*4;g++)if(g%4!=3&&u[g]!==g){Ce=!0;break}}}return Ce||!1}function nt(o,r,u,g){const T=new Ze(o,r,u,g);return function(z){return T.solve(z)}}const it=nt(.25,.1,.25,1);function xt(o,r,u){return Math.min(u,Math.max(r,o))}function Ft(o,r,u){const g=u-r,T=((o-r)%g+g)%g+r;return T===r?u:T}function It(o,...r){for(const u of r)for(const g in u)o[g]=u[g];return o}let nn=1;function Zt(o,r,u){const g={};for(const T in o)g[T]=r.call(u||this,o[T],T,o);return g}function At(o,r,u){const g={};for(const T in o)r.call(u||this,o[T],T,o)&&(g[T]=o[T]);return g}function bt(o){return Array.isArray(o)?o.map(bt):typeof o=="object"&&o?Zt(o,bt):o}const kt={};function De(o){kt[o]||(typeof console<"u"&&console.warn(o),kt[o]=!0)}function at(o,r,u){return(u.y-o.y)*(r.x-o.x)>(r.y-o.y)*(u.x-o.x)}function lt(o){let r=0;for(let u,g,T=0,z=o.length,L=z-1;T<z;L=T++)u=o[T],g=o[L],r+=(g.x-u.x)*(u.y+g.y);return r}function Tt(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}let Ot=null;function Gt(o){return typeof ImageBitmap<"u"&&o instanceof ImageBitmap}const _n="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function hn(o,r,u,g,T){return U(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const z=new VideoFrame(o,{timestamp:0});try{const L=z==null?void 0:z.format;if(!L||!L.startsWith("BGR")&&!L.startsWith("RGB"))throw new Error(`Unrecognized format ${L}`);const q=L.startsWith("BGR"),$=new Uint8ClampedArray(g*T*4);if(yield z.copyTo($,function(Y,ne,re,ue,me){const ge=4*Math.max(-ne,0),Me=(Math.max(0,re)-re)*ue*4+ge,Ie=4*ue,Re=Math.max(0,ne),et=Math.max(0,re);return{rect:{x:Re,y:et,width:Math.min(Y.width,ne+ue)-Re,height:Math.min(Y.height,re+me)-et},layout:[{offset:Me,stride:Ie}]}}(o,r,u,g,T)),q)for(let Y=0;Y<$.length;Y+=4){const ne=$[Y];$[Y]=$[Y+2],$[Y+2]=ne}return $}finally{z.close()}})}let vn,Dn,Qn,di;const xi={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(o){const r=requestAnimationFrame(o);return{cancel:()=>cancelAnimationFrame(r)}},getImageData(o,r=0){return this.getImageCanvasContext(o).getImageData(-r,-r,o.width+2*r,o.height+2*r)},getImageCanvasContext(o){const r=window.document.createElement("canvas"),u=r.getContext("2d",{willReadFrequently:!0});if(!u)throw new Error("failed to create canvas 2d context");return r.width=o.width,r.height=o.height,u.drawImage(o,0,0,o.width,o.height),u},resolveURL:o=>(Qn||(Qn=document.createElement("a")),Qn.href=o,Qn.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(di==null&&(di=matchMedia("(prefers-reduced-motion: reduce)")),di.matches)}},Ct={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};class xn extends Error{constructor(r,u,g,T){super(`AJAXError: ${u} (${r}): ${g}`),this.status=r,this.statusText=u,this.url=g,this.body=T}}const Bt=Tt()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href,En=o=>Ct.REGISTERED_PROTOCOLS[o.substring(0,o.indexOf("://"))];function Gn(o,r){const u=new AbortController,g=new Request(o.url,{method:o.method||"GET",body:o.body,credentials:o.credentials,headers:o.headers,cache:o.cache,referrer:Bt(),signal:u.signal});let T=!1,z=!1;return o.type==="json"&&g.headers.set("Accept","application/json"),z||fetch(g).then(L=>L.ok?(q=>{(o.type==="arrayBuffer"||o.type==="image"?q.arrayBuffer():o.type==="json"?q.json():q.text()).then($=>{z||(T=!0,r(null,$,q.headers.get("Cache-Control"),q.headers.get("Expires")))}).catch($=>{z||r(new Error($.message))})})(L):L.blob().then(q=>r(new xn(L.status,L.statusText,o.url,q)))).catch(L=>{L.code!==20&&r(new Error(L.message))}),{cancel:()=>{z=!0,T||u.abort()}}}const Lt=function(o,r){if(/:\/\//.test(o.url)&&!/^https?:|^file:/.test(o.url)){if(Tt()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",o,r);if(!Tt())return(En(o.url)||Gn)(o,r)}if(!(/^file:/.test(u=o.url)||/^file:/.test(Bt())&&!/^\w+:/.test(u))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return Gn(o,r);if(Tt()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",o,r,void 0,!0)}var u;return function(g,T){const z=new XMLHttpRequest;z.open(g.method||"GET",g.url,!0),g.type!=="arrayBuffer"&&g.type!=="image"||(z.responseType="arraybuffer");for(const L in g.headers)z.setRequestHeader(L,g.headers[L]);return g.type==="json"&&(z.responseType="text",z.setRequestHeader("Accept","application/json")),z.withCredentials=g.credentials==="include",z.onerror=()=>{T(new Error(z.statusText))},z.onload=()=>{if((z.status>=200&&z.status<300||z.status===0)&&z.response!==null){let L=z.response;if(g.type==="json")try{L=JSON.parse(z.response)}catch(q){return T(q)}T(null,L,z.getResponseHeader("Cache-Control"),z.getResponseHeader("Expires"))}else{const L=new Blob([z.response],{type:z.getResponseHeader("Content-Type")});T(new xn(z.status,z.statusText,g.url,L))}},z.send(g.body),{cancel:()=>z.abort()}}(o,r)},Ii=function(o,r){return Lt(It(o,{type:"arrayBuffer"}),r)};function Pn(o){if(!o||o.indexOf("://")<=0||o.indexOf("data:image/")===0||o.indexOf("blob:")===0)return!0;const r=new URL(o),u=window.location;return r.protocol===u.protocol&&r.host===u.host}function qi(o,r,u){u[o]&&u[o].indexOf(r)!==-1||(u[o]=u[o]||[],u[o].push(r))}function Ar(o,r,u){if(u&&u[o]){const g=u[o].indexOf(r);g!==-1&&u[o].splice(g,1)}}class un{constructor(r,u={}){It(this,u),this.type=r}}class Jn extends un{constructor(r,u={}){super("error",It({error:r},u))}}class uA{on(r,u){return this._listeners=this._listeners||{},qi(r,u,this._listeners),this}off(r,u){return Ar(r,u,this._listeners),Ar(r,u,this._oneTimeListeners),this}once(r,u){return u?(this._oneTimeListeners=this._oneTimeListeners||{},qi(r,u,this._oneTimeListeners),this):new Promise(g=>this.once(r,g))}fire(r,u){typeof r=="string"&&(r=new un(r,u||{}));const g=r.type;if(this.listens(g)){r.target=this;const T=this._listeners&&this._listeners[g]?this._listeners[g].slice():[];for(const q of T)q.call(this,r);const z=this._oneTimeListeners&&this._oneTimeListeners[g]?this._oneTimeListeners[g].slice():[];for(const q of z)Ar(g,q,this._oneTimeListeners),q.call(this,r);const L=this._eventedParent;L&&(It(r,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),L.fire(r))}else r instanceof Jn&&console.error(r.error);return this}listens(r){return this._listeners&&this._listeners[r]&&this._listeners[r].length>0||this._oneTimeListeners&&this._oneTimeListeners[r]&&this._oneTimeListeners[r].length>0||this._eventedParent&&this._eventedParent.listens(r)}setEventedParent(r,u){return this._eventedParent=r,this._eventedParentData=u,this}}var pt={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const ei=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function _r(o,r){const u={};for(const g in o)g!=="ref"&&(u[g]=o[g]);return ei.forEach(g=>{g in r&&(u[g]=r[g])}),u}function pi(o,r){if(Array.isArray(o)){if(!Array.isArray(r)||o.length!==r.length)return!1;for(let u=0;u<o.length;u++)if(!pi(o[u],r[u]))return!1;return!0}if(typeof o=="object"&&o!==null&&r!==null){if(typeof r!="object"||Object.keys(o).length!==Object.keys(r).length)return!1;for(const u in o)if(!pi(o[u],r[u]))return!1;return!0}return o===r}const qn={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Br(o,r,u){u.push({command:qn.addSource,args:[o,r[o]]})}function So(o,r,u){r.push({command:qn.removeSource,args:[o]}),u[o]=!0}function cA(o,r,u,g){So(o,u,g),Br(o,r,u)}function FA(o,r,u){let g;for(g in o[u])if(Object.prototype.hasOwnProperty.call(o[u],g)&&g!=="data"&&!pi(o[u][g],r[u][g]))return!1;for(g in r[u])if(Object.prototype.hasOwnProperty.call(r[u],g)&&g!=="data"&&!pi(o[u][g],r[u][g]))return!1;return!0}function is(o,r,u,g,T,z){let L;for(L in r=r||{},o=o||{})Object.prototype.hasOwnProperty.call(o,L)&&(pi(o[L],r[L])||u.push({command:z,args:[g,L,r[L],T]}));for(L in r)Object.prototype.hasOwnProperty.call(r,L)&&!Object.prototype.hasOwnProperty.call(o,L)&&(pi(o[L],r[L])||u.push({command:z,args:[g,L,r[L],T]}))}function rs(o){return o.id}function Es(o,r){return o[r.id]=r,o}class Nt{constructor(r,u,g,T){this.message=(r?`${r}: `:"")+g,T&&(this.identifier=T),u!=null&&u.__line__&&(this.line=u.__line__)}}function bA(o,...r){for(const u of r)for(const g in u)o[g]=u[g];return o}class Wi extends Error{constructor(r,u){super(u),this.message=u,this.key=r}}class Ms{constructor(r,u=[]){this.parent=r,this.bindings={};for(const[g,T]of u)this.bindings[g]=T}concat(r){return new Ms(this,r)}get(r){if(this.bindings[r])return this.bindings[r];if(this.parent)return this.parent.get(r);throw new Error(`${r} not found in scope.`)}has(r){return!!this.bindings[r]||!!this.parent&&this.parent.has(r)}}const hA={kind:"null"},Ut={kind:"number"},Zn={kind:"string"},zn={kind:"boolean"},br={kind:"color"},OA={kind:"object"},On={kind:"value"},st={kind:"collator"},ze={kind:"formatted"},oe={kind:"padding"},de={kind:"resolvedImage"},we={kind:"variableAnchorOffsetCollection"};function Le(o,r){return{kind:"array",itemType:o,N:r}}function Fe(o){if(o.kind==="array"){const r=Fe(o.itemType);return typeof o.N=="number"?`array<${r}, ${o.N}>`:o.itemType.kind==="value"?"array":`array<${r}>`}return o.kind}const tt=[hA,Ut,Zn,zn,br,ze,OA,Le(On),oe,de,we];function Ye(o,r){if(r.kind==="error")return null;if(o.kind==="array"){if(r.kind==="array"&&(r.N===0&&r.itemType.kind==="value"||!Ye(o.itemType,r.itemType))&&(typeof o.N!="number"||o.N===r.N))return null}else{if(o.kind===r.kind)return null;if(o.kind==="value"){for(const u of tt)if(!Ye(u,r))return null}}return`Expected ${Fe(o)} but found ${Fe(r)} instead.`}function Oe(o,r){return r.some(u=>u.kind===o.kind)}function Ke(o,r){return r.some(u=>u==="null"?o===null:u==="array"?Array.isArray(o):u==="object"?o&&!Array.isArray(o)&&typeof o=="object":u===typeof o)}function yt(o,r){return o.kind==="array"&&r.kind==="array"?o.itemType.kind===r.itemType.kind&&typeof o.N=="number":o.kind===r.kind}const se=.96422,_e=.82521,We=4/29,dt=6/29,t=3*dt*dt,K=dt*dt*dt,St=Math.PI/180,Qt=180/Math.PI;function en(o){return(o%=360)<0&&(o+=360),o}function Pt([o,r,u,g]){let T,z;const L=Bn((.2225045*(o=Ht(o))+.7168786*(r=Ht(r))+.0606169*(u=Ht(u)))/1);o===r&&r===u?T=z=L:(T=Bn((.4360747*o+.3850649*r+.1430804*u)/se),z=Bn((.0139322*o+.0971045*r+.7141733*u)/_e));const q=116*L-16;return[q<0?0:q,500*(T-L),200*(L-z),g]}function Ht(o){return o<=.04045?o/12.92:Math.pow((o+.055)/1.055,2.4)}function Bn(o){return o>K?Math.pow(o,1/3):o/t+We}function $t([o,r,u,g]){let T=(o+16)/116,z=isNaN(r)?T:T+r/500,L=isNaN(u)?T:T-u/200;return T=1*oi(T),z=se*oi(z),L=_e*oi(L),[sn(3.1338561*z-1.6168667*T-.4906146*L),sn(-.9787684*z+1.9161415*T+.033454*L),sn(.0719453*z-.2289914*T+1.4052427*L),g]}function sn(o){return(o=o<=.00304?12.92*o:1.055*Math.pow(o,1/2.4)-.055)<0?0:o>1?1:o}function oi(o){return o>dt?o*o*o:t*(o-We)}function Dr(o){return parseInt(o.padEnd(2,o),16)/255}function so(o,r){return kr(r?o/100:o,0,1)}function kr(o,r,u){return Math.min(Math.max(r,o),u)}function yr(o){return!o.some(Number.isNaN)}const oA={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class ti{constructor(r,u,g,T=1,z=!0){this.r=r,this.g=u,this.b=g,this.a=T,z||(this.r*=T,this.g*=T,this.b*=T,T||this.overwriteGetter("rgb",[r,u,g,T]))}static parse(r){if(r instanceof ti)return r;if(typeof r!="string")return;const u=function(g){if((g=g.toLowerCase().trim())==="transparent")return[0,0,0,0];const T=oA[g];if(T){const[L,q,$]=T;return[L/255,q/255,$/255,1]}if(g.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(g)){const L=g.length<6?1:2;let q=1;return[Dr(g.slice(q,q+=L)),Dr(g.slice(q,q+=L)),Dr(g.slice(q,q+=L)),Dr(g.slice(q,q+L)||"ff")]}if(g.startsWith("rgb")){const L=g.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(L){const[q,$,Y,ne,re,ue,me,ge,Me,Ie,Re,et]=L,Xe=[ne||" ",me||" ",Ie].join("");if(Xe==="  "||Xe==="  /"||Xe===",,"||Xe===",,,"){const rt=[Y,ue,Me].join(""),ft=rt==="%%%"?100:rt===""?255:0;if(ft){const Et=[kr(+$/ft,0,1),kr(+re/ft,0,1),kr(+ge/ft,0,1),Re?so(+Re,et):1];if(yr(Et))return Et}}return}}const z=g.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(z){const[L,q,$,Y,ne,re,ue,me,ge]=z,Me=[$||" ",ne||" ",ue].join("");if(Me==="  "||Me==="  /"||Me===",,"||Me===",,,"){const Ie=[+q,kr(+Y,0,100),kr(+re,0,100),me?so(+me,ge):1];if(yr(Ie))return function([Re,et,Xe,rt]){function ft(Et){const ln=(Et+Re/30)%12,wn=et*Math.min(Xe,1-Xe);return Xe-wn*Math.max(-1,Math.min(ln-3,9-ln,1))}return Re=en(Re),et/=100,Xe/=100,[ft(0),ft(8),ft(4),rt]}(Ie)}}}(r);return u?new ti(...u,!1):void 0}get rgb(){const{r,g:u,b:g,a:T}=this,z=T||1/0;return this.overwriteGetter("rgb",[r/z,u/z,g/z,T])}get hcl(){return this.overwriteGetter("hcl",function(r){const[u,g,T,z]=Pt(r),L=Math.sqrt(g*g+T*T);return[Math.round(1e4*L)?en(Math.atan2(T,g)*Qt):NaN,L,u,z]}(this.rgb))}get lab(){return this.overwriteGetter("lab",Pt(this.rgb))}overwriteGetter(r,u){return Object.defineProperty(this,r,{value:u}),u}toString(){const[r,u,g,T]=this.rgb;return`rgba(${[r,u,g].map(z=>Math.round(255*z)).join(",")},${T})`}}ti.black=new ti(0,0,0,1),ti.white=new ti(1,1,1,1),ti.transparent=new ti(0,0,0,0),ti.red=new ti(1,0,0,1);class kA{constructor(r,u,g){this.sensitivity=r?u?"variant":"case":u?"accent":"base",this.locale=g,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(r,u){return this.collator.compare(r,u)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Ln{constructor(r,u,g,T,z){this.text=r,this.image=u,this.scale=g,this.fontStack=T,this.textColor=z}}class He{constructor(r){this.sections=r}static fromString(r){return new He([new Ln(r,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(r=>r.text.length!==0||r.image&&r.image.name.length!==0)}static factory(r){return r instanceof He?r:He.fromString(r)}toString(){return this.sections.length===0?"":this.sections.map(r=>r.text).join("")}}class Xt{constructor(r){this.values=r.slice()}static parse(r){if(r instanceof Xt)return r;if(typeof r=="number")return new Xt([r,r,r,r]);if(Array.isArray(r)&&!(r.length<1||r.length>4)){for(const u of r)if(typeof u!="number")return;switch(r.length){case 1:r=[r[0],r[0],r[0],r[0]];break;case 2:r=[r[0],r[1],r[0],r[1]];break;case 3:r=[r[0],r[1],r[2],r[1]]}return new Xt(r)}}toString(){return JSON.stringify(this.values)}}const Te=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class kn{constructor(r){this.values=r.slice()}static parse(r){if(r instanceof kn)return r;if(Array.isArray(r)&&!(r.length<1)&&r.length%2==0){for(let u=0;u<r.length;u+=2){const g=r[u],T=r[u+1];if(typeof g!="string"||!Te.has(g)||!Array.isArray(T)||T.length!==2||typeof T[0]!="number"||typeof T[1]!="number")return}return new kn(r)}}toString(){return JSON.stringify(this.values)}}class Er{constructor(r){this.name=r.name,this.available=r.available}toString(){return this.name}static fromString(r){return r?new Er({name:r,available:!1}):null}}function ca(o,r,u,g){return typeof o=="number"&&o>=0&&o<=255&&typeof r=="number"&&r>=0&&r<=255&&typeof u=="number"&&u>=0&&u<=255?g===void 0||typeof g=="number"&&g>=0&&g<=1?null:`Invalid rgba value [${[o,r,u,g].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof g=="number"?[o,r,u,g]:[o,r,u]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function oo(o){if(o===null||typeof o=="string"||typeof o=="boolean"||typeof o=="number"||o instanceof ti||o instanceof kA||o instanceof He||o instanceof Xt||o instanceof kn||o instanceof Er)return!0;if(Array.isArray(o)){for(const r of o)if(!oo(r))return!1;return!0}if(typeof o=="object"){for(const r in o)if(!oo(o[r]))return!1;return!0}return!1}function Be(o){if(o===null)return hA;if(typeof o=="string")return Zn;if(typeof o=="boolean")return zn;if(typeof o=="number")return Ut;if(o instanceof ti)return br;if(o instanceof kA)return st;if(o instanceof He)return ze;if(o instanceof Xt)return oe;if(o instanceof kn)return we;if(o instanceof Er)return de;if(Array.isArray(o)){const r=o.length;let u;for(const g of o){const T=Be(g);if(u){if(u===T)continue;u=On;break}u=T}return Le(u||On,r)}return OA}function mi(o){const r=typeof o;return o===null?"":r==="string"||r==="number"||r==="boolean"?String(o):o instanceof ti||o instanceof He||o instanceof Xt||o instanceof kn||o instanceof Er?o.toString():JSON.stringify(o)}class ye{constructor(r,u){this.type=r,this.value=u}static parse(r,u){if(r.length!==2)return u.error(`'literal' expression requires exactly one argument, but found ${r.length-1} instead.`);if(!oo(r[1]))return u.error("invalid value");const g=r[1];let T=Be(g);const z=u.expectedType;return T.kind!=="array"||T.N!==0||!z||z.kind!=="array"||typeof z.N=="number"&&z.N!==0||(T=z),new ye(T,g)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class Zi{constructor(r){this.name="ExpressionEvaluationError",this.message=r}toJSON(){return this.message}}const ha={string:Zn,number:Ut,boolean:zn,object:OA};class EA{constructor(r,u){this.type=r,this.args=u}static parse(r,u){if(r.length<2)return u.error("Expected at least one argument.");let g,T=1;const z=r[0];if(z==="array"){let q,$;if(r.length>2){const Y=r[1];if(typeof Y!="string"||!(Y in ha)||Y==="object")return u.error('The item type argument of "array" must be one of string, number, boolean',1);q=ha[Y],T++}else q=On;if(r.length>3){if(r[2]!==null&&(typeof r[2]!="number"||r[2]<0||r[2]!==Math.floor(r[2])))return u.error('The length argument to "array" must be a positive integer literal',2);$=r[2],T++}g=Le(q,$)}else{if(!ha[z])throw new Error(`Types doesn't contain name = ${z}`);g=ha[z]}const L=[];for(;T<r.length;T++){const q=u.parse(r[T],T,On);if(!q)return null;L.push(q)}return new EA(g,L)}evaluate(r){for(let u=0;u<this.args.length;u++){const g=this.args[u].evaluate(r);if(!Ye(this.type,Be(g)))return g;if(u===this.args.length-1)throw new Zi(`Expected value to be of type ${Fe(this.type)}, but found ${Fe(Be(g))} instead.`)}throw new Error}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}const za={"to-boolean":zn,"to-color":br,"to-number":Ut,"to-string":Zn};class As{constructor(r,u){this.type=r,this.args=u}static parse(r,u){if(r.length<2)return u.error("Expected at least one argument.");const g=r[0];if(!za[g])throw new Error(`Can't parse ${g} as it is not part of the known types`);if((g==="to-boolean"||g==="to-string")&&r.length!==2)return u.error("Expected one argument.");const T=za[g],z=[];for(let L=1;L<r.length;L++){const q=u.parse(r[L],L,On);if(!q)return null;z.push(q)}return new As(T,z)}evaluate(r){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(r);case"color":{let u,g;for(const T of this.args){if(u=T.evaluate(r),g=null,u instanceof ti)return u;if(typeof u=="string"){const z=r.parseColor(u);if(z)return z}else if(Array.isArray(u)&&(g=u.length<3||u.length>4?`Invalid rbga value ${JSON.stringify(u)}: expected an array containing either three or four numeric values.`:ca(u[0],u[1],u[2],u[3]),!g))return new ti(u[0]/255,u[1]/255,u[2]/255,u[3])}throw new Zi(g||`Could not parse color from value '${typeof u=="string"?u:JSON.stringify(u)}'`)}case"padding":{let u;for(const g of this.args){u=g.evaluate(r);const T=Xt.parse(u);if(T)return T}throw new Zi(`Could not parse padding from value '${typeof u=="string"?u:JSON.stringify(u)}'`)}case"variableAnchorOffsetCollection":{let u;for(const g of this.args){u=g.evaluate(r);const T=kn.parse(u);if(T)return T}throw new Zi(`Could not parse variableAnchorOffsetCollection from value '${typeof u=="string"?u:JSON.stringify(u)}'`)}case"number":{let u=null;for(const g of this.args){if(u=g.evaluate(r),u===null)return 0;const T=Number(u);if(!isNaN(T))return T}throw new Zi(`Could not convert ${JSON.stringify(u)} to number.`)}case"formatted":return He.fromString(mi(this.args[0].evaluate(r)));case"resolvedImage":return Er.fromString(mi(this.args[0].evaluate(r)));default:return mi(this.args[0].evaluate(r))}}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}const La=["Unknown","Point","LineString","Polygon"];class Co{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?La[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(r){let u=this._parseColorCache[r];return u||(u=this._parseColorCache[r]=ti.parse(r)),u}}class Yr{constructor(r,u,g=[],T,z=new Ms,L=[]){this.registry=r,this.path=g,this.key=g.map(q=>`[${q}]`).join(""),this.scope=z,this.errors=L,this.expectedType=T,this._isConstant=u}parse(r,u,g,T,z={}){return u?this.concat(u,g,T)._parse(r,z):this._parse(r,z)}_parse(r,u){function g(T,z,L){return L==="assert"?new EA(z,[T]):L==="coerce"?new As(z,[T]):T}if(r!==null&&typeof r!="string"&&typeof r!="boolean"&&typeof r!="number"||(r=["literal",r]),Array.isArray(r)){if(r.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const T=r[0];if(typeof T!="string")return this.error(`Expression name must be a string, but found ${typeof T} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const z=this.registry[T];if(z){let L=z.parse(r,this);if(!L)return null;if(this.expectedType){const q=this.expectedType,$=L.type;if(q.kind!=="string"&&q.kind!=="number"&&q.kind!=="boolean"&&q.kind!=="object"&&q.kind!=="array"||$.kind!=="value")if(q.kind!=="color"&&q.kind!=="formatted"&&q.kind!=="resolvedImage"||$.kind!=="value"&&$.kind!=="string")if(q.kind!=="padding"||$.kind!=="value"&&$.kind!=="number"&&$.kind!=="array")if(q.kind!=="variableAnchorOffsetCollection"||$.kind!=="value"&&$.kind!=="array"){if(this.checkSubtype(q,$))return null}else L=g(L,q,u.typeAnnotation||"coerce");else L=g(L,q,u.typeAnnotation||"coerce");else L=g(L,q,u.typeAnnotation||"coerce");else L=g(L,q,u.typeAnnotation||"assert")}if(!(L instanceof ye)&&L.type.kind!=="resolvedImage"&&this._isConstant(L)){const q=new Co;try{L=new ye(L.type,L.evaluate(q))}catch($){return this.error($.message),null}}return L}return this.error(`Unknown expression "${T}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(r===void 0?"'undefined' value invalid. Use null instead.":typeof r=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof r} instead.`)}concat(r,u,g){const T=typeof r=="number"?this.path.concat(r):this.path,z=g?this.scope.concat(g):this.scope;return new Yr(this.registry,this._isConstant,T,u||null,z,this.errors)}error(r,...u){const g=`${this.key}${u.map(T=>`[${T}]`).join("")}`;this.errors.push(new Wi(g,r))}checkSubtype(r,u){const g=Ye(r,u);return g&&this.error(g),g}}class Hi{constructor(r,u,g){this.type=st,this.locale=g,this.caseSensitive=r,this.diacriticSensitive=u}static parse(r,u){if(r.length!==2)return u.error("Expected one argument.");const g=r[1];if(typeof g!="object"||Array.isArray(g))return u.error("Collator options argument must be an object.");const T=u.parse(g["case-sensitive"]!==void 0&&g["case-sensitive"],1,zn);if(!T)return null;const z=u.parse(g["diacritic-sensitive"]!==void 0&&g["diacritic-sensitive"],1,zn);if(!z)return null;let L=null;return g.locale&&(L=u.parse(g.locale,1,Zn),!L)?null:new Hi(T,z,L)}evaluate(r){return new kA(this.caseSensitive.evaluate(r),this.diacriticSensitive.evaluate(r),this.locale?this.locale.evaluate(r):null)}eachChild(r){r(this.caseSensitive),r(this.diacriticSensitive),this.locale&&r(this.locale)}outputDefined(){return!1}}const Pr=8192;function Yi(o,r){o[0]=Math.min(o[0],r[0]),o[1]=Math.min(o[1],r[1]),o[2]=Math.max(o[2],r[0]),o[3]=Math.max(o[3],r[1])}function Qs(o,r){return!(o[0]<=r[0]||o[2]>=r[2]||o[1]<=r[1]||o[3]>=r[3])}function rl(o,r){const u=(180+o[0])/360,g=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o[1]*Math.PI/360)))/360,T=Math.pow(2,r.z);return[Math.round(u*T*Pr),Math.round(g*T*Pr)]}function Ol(o,r,u){const g=o[0]-r[0],T=o[1]-r[1],z=o[0]-u[0],L=o[1]-u[1];return g*L-z*T==0&&g*z<=0&&T*L<=0}function fa(o,r){let u=!1;for(let L=0,q=r.length;L<q;L++){const $=r[L];for(let Y=0,ne=$.length;Y<ne-1;Y++){if(Ol(o,$[Y],$[Y+1]))return!1;(T=$[Y])[1]>(g=o)[1]!=(z=$[Y+1])[1]>g[1]&&g[0]<(z[0]-T[0])*(g[1]-T[1])/(z[1]-T[1])+T[0]&&(u=!u)}}var g,T,z;return u}function Ra(o,r){for(let u=0;u<r.length;u++)if(fa(o,r[u]))return!0;return!1}function $i(o,r,u,g){const T=g[0]-u[0],z=g[1]-u[1],L=(o[0]-u[0])*z-T*(o[1]-u[1]),q=(r[0]-u[0])*z-T*(r[1]-u[1]);return L>0&&q<0||L<0&&q>0}function Fa(o,r,u){for(const Y of u)for(let ne=0;ne<Y.length-1;++ne)if((q=[(L=Y[ne+1])[0]-(z=Y[ne])[0],L[1]-z[1]])[0]*($=[(T=r)[0]-(g=o)[0],T[1]-g[1]])[1]-q[1]*$[0]!=0&&$i(g,T,z,L)&&$i(z,L,g,T))return!0;var g,T,z,L,q,$;return!1}function Ri(o,r){for(let u=0;u<o.length;++u)if(!fa(o[u],r))return!1;for(let u=0;u<o.length-1;++u)if(Fa(o[u],o[u+1],r))return!1;return!0}function Oa(o,r){for(let u=0;u<r.length;u++)if(Ri(o,r[u]))return!0;return!1}function da(o,r,u){const g=[];for(let T=0;T<o.length;T++){const z=[];for(let L=0;L<o[T].length;L++){const q=rl(o[T][L],u);Yi(r,q),z.push(q)}g.push(z)}return g}function Al(o,r,u){const g=[];for(let T=0;T<o.length;T++){const z=da(o[T],r,u);g.push(z)}return g}function sl(o,r,u,g){if(o[0]<u[0]||o[0]>u[2]){const T=.5*g;let z=o[0]-u[0]>T?-g:u[0]-o[0]>T?g:0;z===0&&(z=o[0]-u[2]>T?-g:u[2]-o[0]>T?g:0),o[0]+=z}Yi(r,o)}function pa(o,r,u,g){const T=Math.pow(2,g.z)*Pr,z=[g.x*Pr,g.y*Pr],L=[];for(const q of o)for(const $ of q){const Y=[$.x+z[0],$.y+z[1]];sl(Y,r,u,T),L.push(Y)}return L}function Io(o,r,u,g){const T=Math.pow(2,g.z)*Pr,z=[g.x*Pr,g.y*Pr],L=[];for(const $ of o){const Y=[];for(const ne of $){const re=[ne.x+z[0],ne.y+z[1]];Yi(r,re),Y.push(re)}L.push(Y)}if(r[2]-r[0]<=T/2){(q=r)[0]=q[1]=1/0,q[2]=q[3]=-1/0;for(const $ of L)for(const Y of $)sl(Y,r,u,T)}var q;return L}class Ts{constructor(r,u){this.type=zn,this.geojson=r,this.geometries=u}static parse(r,u){if(r.length!==2)return u.error(`'within' expression requires exactly one argument, but found ${r.length-1} instead.`);if(oo(r[1])){const g=r[1];if(g.type==="FeatureCollection")for(let T=0;T<g.features.length;++T){const z=g.features[T].geometry.type;if(z==="Polygon"||z==="MultiPolygon")return new Ts(g,g.features[T].geometry)}else if(g.type==="Feature"){const T=g.geometry.type;if(T==="Polygon"||T==="MultiPolygon")return new Ts(g,g.geometry)}else if(g.type==="Polygon"||g.type==="MultiPolygon")return new Ts(g,g)}return u.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(r){if(r.geometry()!=null&&r.canonicalID()!=null){if(r.geometryType()==="Point")return function(u,g){const T=[1/0,1/0,-1/0,-1/0],z=[1/0,1/0,-1/0,-1/0],L=u.canonicalID();if(g.type==="Polygon"){const q=da(g.coordinates,z,L),$=pa(u.geometry(),T,z,L);if(!Qs(T,z))return!1;for(const Y of $)if(!fa(Y,q))return!1}if(g.type==="MultiPolygon"){const q=Al(g.coordinates,z,L),$=pa(u.geometry(),T,z,L);if(!Qs(T,z))return!1;for(const Y of $)if(!Ra(Y,q))return!1}return!0}(r,this.geometries);if(r.geometryType()==="LineString")return function(u,g){const T=[1/0,1/0,-1/0,-1/0],z=[1/0,1/0,-1/0,-1/0],L=u.canonicalID();if(g.type==="Polygon"){const q=da(g.coordinates,z,L),$=Io(u.geometry(),T,z,L);if(!Qs(T,z))return!1;for(const Y of $)if(!Ri(Y,q))return!1}if(g.type==="MultiPolygon"){const q=Al(g.coordinates,z,L),$=Io(u.geometry(),T,z,L);if(!Qs(T,z))return!1;for(const Y of $)if(!Oa(Y,q))return!1}return!0}(r,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class Gs{constructor(r,u){this.type=u.type,this.name=r,this.boundExpression=u}static parse(r,u){if(r.length!==2||typeof r[1]!="string")return u.error("'var' expression requires exactly one string literal argument.");const g=r[1];return u.scope.has(g)?new Gs(g,u.scope.get(g)):u.error(`Unknown variable "${g}". Make sure "${g}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(r){return this.boundExpression.evaluate(r)}eachChild(){}outputDefined(){return!1}}class fA{constructor(r,u,g,T){this.name=r,this.type=u,this._evaluate=g,this.args=T}evaluate(r){return this._evaluate(r,this.args)}eachChild(r){this.args.forEach(r)}outputDefined(){return!1}static parse(r,u){const g=r[0],T=fA.definitions[g];if(!T)return u.error(`Unknown expression "${g}". If you wanted a literal array, use ["literal", [...]].`,0);const z=Array.isArray(T)?T[0]:T.type,L=Array.isArray(T)?[[T[1],T[2]]]:T.overloads,q=L.filter(([Y])=>!Array.isArray(Y)||Y.length===r.length-1);let $=null;for(const[Y,ne]of q){$=new Yr(u.registry,ma,u.path,null,u.scope);const re=[];let ue=!1;for(let me=1;me<r.length;me++){const ge=r[me],Me=Array.isArray(Y)?Y[me-1]:Y.type,Ie=$.parse(ge,1+re.length,Me);if(!Ie){ue=!0;break}re.push(Ie)}if(!ue)if(Array.isArray(Y)&&Y.length!==re.length)$.error(`Expected ${Y.length} arguments, but found ${re.length} instead.`);else{for(let me=0;me<re.length;me++){const ge=Array.isArray(Y)?Y[me]:Y.type,Me=re[me];$.concat(me+1).checkSubtype(ge,Me.type)}if($.errors.length===0)return new fA(g,z,ne,re)}}if(q.length===1)u.errors.push(...$.errors);else{const Y=(q.length?q:L).map(([re])=>{return ue=re,Array.isArray(ue)?`(${ue.map(Fe).join(", ")})`:`(${Fe(ue.type)}...)`;var ue}).join(" | "),ne=[];for(let re=1;re<r.length;re++){const ue=u.parse(r[re],1+ne.length);if(!ue)return null;ne.push(Fe(ue.type))}u.error(`Expected arguments of type ${Y}, but found (${ne.join(", ")}) instead.`)}return null}static register(r,u){fA.definitions=u;for(const g in u)r[g]=fA}}function ma(o){if(o instanceof Gs)return ma(o.boundExpression);if(o instanceof fA&&o.name==="error"||o instanceof Hi||o instanceof Ts)return!1;const r=o instanceof As||o instanceof EA;let u=!0;return o.eachChild(g=>{u=r?u&&ma(g):u&&g instanceof ye}),!!u&&ao(o)&&ga(o,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function ao(o){if(o instanceof fA&&(o.name==="get"&&o.args.length===1||o.name==="feature-state"||o.name==="has"&&o.args.length===1||o.name==="properties"||o.name==="geometry-type"||o.name==="id"||/^filter-/.test(o.name))||o instanceof Ts)return!1;let r=!0;return o.eachChild(u=>{r&&!ao(u)&&(r=!1)}),r}function Bo(o){if(o instanceof fA&&o.name==="feature-state")return!1;let r=!0;return o.eachChild(u=>{r&&!Bo(u)&&(r=!1)}),r}function ga(o,r){if(o instanceof fA&&r.indexOf(o.name)>=0)return!1;let u=!0;return o.eachChild(g=>{u&&!ga(g,r)&&(u=!1)}),u}function Ti(o,r){const u=o.length-1;let g,T,z=0,L=u,q=0;for(;z<=L;)if(q=Math.floor((z+L)/2),g=o[q],T=o[q+1],g<=r){if(q===u||r<T)return q;z=q+1}else{if(!(g>r))throw new Zi("Input is not a number.");L=q-1}return 0}class Rn{constructor(r,u,g){this.type=r,this.input=u,this.labels=[],this.outputs=[];for(const[T,z]of g)this.labels.push(T),this.outputs.push(z)}static parse(r,u){if(r.length-1<4)return u.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if((r.length-1)%2!=0)return u.error("Expected an even number of arguments.");const g=u.parse(r[1],1,Ut);if(!g)return null;const T=[];let z=null;u.expectedType&&u.expectedType.kind!=="value"&&(z=u.expectedType);for(let L=1;L<r.length;L+=2){const q=L===1?-1/0:r[L],$=r[L+1],Y=L,ne=L+1;if(typeof q!="number")return u.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Y);if(T.length&&T[T.length-1][0]>=q)return u.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',Y);const re=u.parse($,ne,z);if(!re)return null;z=z||re.type,T.push([q,re])}return new Rn(z,g,T)}evaluate(r){const u=this.labels,g=this.outputs;if(u.length===1)return g[0].evaluate(r);const T=this.input.evaluate(r);if(T<=u[0])return g[0].evaluate(r);const z=u.length;return T>=u[z-1]?g[z-1].evaluate(r):g[Ti(u,T)].evaluate(r)}eachChild(r){r(this.input);for(const u of this.outputs)r(u)}outputDefined(){return this.outputs.every(r=>r.outputDefined())}}function Hn(o,r,u){return o+u*(r-o)}function gi(o,r,u){return o.map((g,T)=>Hn(g,r[T],u))}const fr={number:Hn,color:function(o,r,u,g="rgb"){switch(g){case"rgb":{const[T,z,L,q]=gi(o.rgb,r.rgb,u);return new ti(T,z,L,q,!1)}case"hcl":{const[T,z,L,q]=o.hcl,[$,Y,ne,re]=r.hcl;let ue,me;if(isNaN(T)||isNaN($))isNaN(T)?isNaN($)?ue=NaN:(ue=$,L!==1&&L!==0||(me=Y)):(ue=T,ne!==1&&ne!==0||(me=z));else{let et=$-T;$>T&&et>180?et-=360:$<T&&T-$>180&&(et+=360),ue=T+u*et}const[ge,Me,Ie,Re]=function([et,Xe,rt,ft]){return et=isNaN(et)?0:et*St,$t([rt,Math.cos(et)*Xe,Math.sin(et)*Xe,ft])}([ue,me??Hn(z,Y,u),Hn(L,ne,u),Hn(q,re,u)]);return new ti(ge,Me,Ie,Re,!1)}case"lab":{const[T,z,L,q]=$t(gi(o.lab,r.lab,u));return new ti(T,z,L,q,!1)}}},array:gi,padding:function(o,r,u){return new Xt(gi(o.values,r.values,u))},variableAnchorOffsetCollection:function(o,r,u){const g=o.values,T=r.values;if(g.length!==T.length)throw new Zi(`Cannot interpolate values of different length. from: ${o.toString()}, to: ${r.toString()}`);const z=[];for(let L=0;L<g.length;L+=2){if(g[L]!==T[L])throw new Zi(`Cannot interpolate values containing mismatched anchors. from[${L}]: ${g[L]}, to[${L}]: ${T[L]}`);z.push(g[L]);const[q,$]=g[L+1],[Y,ne]=T[L+1];z.push([Hn(q,Y,u),Hn($,ne,u)])}return new kn(z)}};class Fi{constructor(r,u,g,T,z){this.type=r,this.operator=u,this.interpolation=g,this.input=T,this.labels=[],this.outputs=[];for(const[L,q]of z)this.labels.push(L),this.outputs.push(q)}static interpolationFactor(r,u,g,T){let z=0;if(r.name==="exponential")z=qs(u,r.base,g,T);else if(r.name==="linear")z=qs(u,1,g,T);else if(r.name==="cubic-bezier"){const L=r.controlPoints;z=new Ze(L[0],L[1],L[2],L[3]).solve(qs(u,1,g,T))}return z}static parse(r,u){let[g,T,z,...L]=r;if(!Array.isArray(T)||T.length===0)return u.error("Expected an interpolation type expression.",1);if(T[0]==="linear")T={name:"linear"};else if(T[0]==="exponential"){const Y=T[1];if(typeof Y!="number")return u.error("Exponential interpolation requires a numeric base.",1,1);T={name:"exponential",base:Y}}else{if(T[0]!=="cubic-bezier")return u.error(`Unknown interpolation type ${String(T[0])}`,1,0);{const Y=T.slice(1);if(Y.length!==4||Y.some(ne=>typeof ne!="number"||ne<0||ne>1))return u.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);T={name:"cubic-bezier",controlPoints:Y}}}if(r.length-1<4)return u.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if((r.length-1)%2!=0)return u.error("Expected an even number of arguments.");if(z=u.parse(z,2,Ut),!z)return null;const q=[];let $=null;g==="interpolate-hcl"||g==="interpolate-lab"?$=br:u.expectedType&&u.expectedType.kind!=="value"&&($=u.expectedType);for(let Y=0;Y<L.length;Y+=2){const ne=L[Y],re=L[Y+1],ue=Y+3,me=Y+4;if(typeof ne!="number")return u.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ue);if(q.length&&q[q.length-1][0]>=ne)return u.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',ue);const ge=u.parse(re,me,$);if(!ge)return null;$=$||ge.type,q.push([ne,ge])}return yt($,Ut)||yt($,br)||yt($,oe)||yt($,we)||yt($,Le(Ut))?new Fi($,g,T,z,q):u.error(`Type ${Fe($)} is not interpolatable.`)}evaluate(r){const u=this.labels,g=this.outputs;if(u.length===1)return g[0].evaluate(r);const T=this.input.evaluate(r);if(T<=u[0])return g[0].evaluate(r);const z=u.length;if(T>=u[z-1])return g[z-1].evaluate(r);const L=Ti(u,T),q=Fi.interpolationFactor(this.interpolation,T,u[L],u[L+1]),$=g[L].evaluate(r),Y=g[L+1].evaluate(r);switch(this.operator){case"interpolate":return fr[this.type.kind]($,Y,q);case"interpolate-hcl":return fr.color($,Y,q,"hcl");case"interpolate-lab":return fr.color($,Y,q,"lab")}}eachChild(r){r(this.input);for(const u of this.outputs)r(u)}outputDefined(){return this.outputs.every(r=>r.outputDefined())}}function qs(o,r,u,g){const T=g-u,z=o-u;return T===0?0:r===1?z/T:(Math.pow(r,z)-1)/(Math.pow(r,T)-1)}class Do{constructor(r,u){this.type=r,this.args=u}static parse(r,u){if(r.length<2)return u.error("Expectected at least one argument.");let g=null;const T=u.expectedType;T&&T.kind!=="value"&&(g=T);const z=[];for(const q of r.slice(1)){const $=u.parse(q,1+z.length,g,void 0,{typeAnnotation:"omit"});if(!$)return null;g=g||$.type,z.push($)}if(!g)throw new Error("No output type");const L=T&&z.some(q=>Ye(T,q.type));return new Do(L?On:g,z)}evaluate(r){let u,g=null,T=0;for(const z of this.args)if(T++,g=z.evaluate(r),g&&g instanceof Er&&!g.available&&(u||(u=g.name),g=null,T===this.args.length&&(g=u)),g!==null)break;return g}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}class ss{constructor(r,u){this.type=u.type,this.bindings=[].concat(r),this.result=u}evaluate(r){return this.result.evaluate(r)}eachChild(r){for(const u of this.bindings)r(u[1]);r(this.result)}static parse(r,u){if(r.length<4)return u.error(`Expected at least 3 arguments, but found ${r.length-1} instead.`);const g=[];for(let z=1;z<r.length-1;z+=2){const L=r[z];if(typeof L!="string")return u.error(`Expected string, but found ${typeof L} instead.`,z);if(/[^a-zA-Z0-9_]/.test(L))return u.error("Variable names must contain only alphanumeric characters or '_'.",z);const q=u.parse(r[z+1],z+1);if(!q)return null;g.push([L,q])}const T=u.parse(r[r.length-1],r.length-1,u.expectedType,g);return T?new ss(g,T):null}outputDefined(){return this.result.outputDefined()}}class Po{constructor(r,u,g){this.type=r,this.index=u,this.input=g}static parse(r,u){if(r.length!==3)return u.error(`Expected 2 arguments, but found ${r.length-1} instead.`);const g=u.parse(r[1],1,Ut),T=u.parse(r[2],2,Le(u.expectedType||On));return g&&T?new Po(T.type.itemType,g,T):null}evaluate(r){const u=this.index.evaluate(r),g=this.input.evaluate(r);if(u<0)throw new Zi(`Array index out of bounds: ${u} < 0.`);if(u>=g.length)throw new Zi(`Array index out of bounds: ${u} > ${g.length-1}.`);if(u!==Math.floor(u))throw new Zi(`Array index must be an integer, but found ${u} instead.`);return g[u]}eachChild(r){r(this.index),r(this.input)}outputDefined(){return!1}}class Xi{constructor(r,u){this.type=zn,this.needle=r,this.haystack=u}static parse(r,u){if(r.length!==3)return u.error(`Expected 2 arguments, but found ${r.length-1} instead.`);const g=u.parse(r[1],1,On),T=u.parse(r[2],2,On);return g&&T?Oe(g.type,[zn,Zn,Ut,hA,On])?new Xi(g,T):u.error(`Expected first argument to be of type boolean, string, number or null, but found ${Fe(g.type)} instead`):null}evaluate(r){const u=this.needle.evaluate(r),g=this.haystack.evaluate(r);if(!g)return!1;if(!Ke(u,["boolean","string","number","null"]))throw new Zi(`Expected first argument to be of type boolean, string, number or null, but found ${Fe(Be(u))} instead.`);if(!Ke(g,["string","array"]))throw new Zi(`Expected second argument to be of type array or string, but found ${Fe(Be(g))} instead.`);return g.indexOf(u)>=0}eachChild(r){r(this.needle),r(this.haystack)}outputDefined(){return!0}}class lo{constructor(r,u,g){this.type=Ut,this.needle=r,this.haystack=u,this.fromIndex=g}static parse(r,u){if(r.length<=2||r.length>=5)return u.error(`Expected 3 or 4 arguments, but found ${r.length-1} instead.`);const g=u.parse(r[1],1,On),T=u.parse(r[2],2,On);if(!g||!T)return null;if(!Oe(g.type,[zn,Zn,Ut,hA,On]))return u.error(`Expected first argument to be of type boolean, string, number or null, but found ${Fe(g.type)} instead`);if(r.length===4){const z=u.parse(r[3],3,Ut);return z?new lo(g,T,z):null}return new lo(g,T)}evaluate(r){const u=this.needle.evaluate(r),g=this.haystack.evaluate(r);if(!Ke(u,["boolean","string","number","null"]))throw new Zi(`Expected first argument to be of type boolean, string, number or null, but found ${Fe(Be(u))} instead.`);if(!Ke(g,["string","array"]))throw new Zi(`Expected second argument to be of type array or string, but found ${Fe(Be(g))} instead.`);if(this.fromIndex){const T=this.fromIndex.evaluate(r);return g.indexOf(u,T)}return g.indexOf(u)}eachChild(r){r(this.needle),r(this.haystack),this.fromIndex&&r(this.fromIndex)}outputDefined(){return!1}}class NA{constructor(r,u,g,T,z,L){this.inputType=r,this.type=u,this.input=g,this.cases=T,this.outputs=z,this.otherwise=L}static parse(r,u){if(r.length<5)return u.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if(r.length%2!=1)return u.error("Expected an even number of arguments.");let g,T;u.expectedType&&u.expectedType.kind!=="value"&&(T=u.expectedType);const z={},L=[];for(let Y=2;Y<r.length-1;Y+=2){let ne=r[Y];const re=r[Y+1];Array.isArray(ne)||(ne=[ne]);const ue=u.concat(Y);if(ne.length===0)return ue.error("Expected at least one branch label.");for(const ge of ne){if(typeof ge!="number"&&typeof ge!="string")return ue.error("Branch labels must be numbers or strings.");if(typeof ge=="number"&&Math.abs(ge)>Number.MAX_SAFE_INTEGER)return ue.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof ge=="number"&&Math.floor(ge)!==ge)return ue.error("Numeric branch labels must be integer values.");if(g){if(ue.checkSubtype(g,Be(ge)))return null}else g=Be(ge);if(z[String(ge)]!==void 0)return ue.error("Branch labels must be unique.");z[String(ge)]=L.length}const me=u.parse(re,Y,T);if(!me)return null;T=T||me.type,L.push(me)}const q=u.parse(r[1],1,On);if(!q)return null;const $=u.parse(r[r.length-1],r.length-1,T);return $?q.type.kind!=="value"&&u.concat(1).checkSubtype(g,q.type)?null:new NA(g,T,q,z,L,$):null}evaluate(r){const u=this.input.evaluate(r);return(Be(u)===this.inputType&&this.outputs[this.cases[u]]||this.otherwise).evaluate(r)}eachChild(r){r(this.input),this.outputs.forEach(r),r(this.otherwise)}outputDefined(){return this.outputs.every(r=>r.outputDefined())&&this.otherwise.outputDefined()}}class os{constructor(r,u,g){this.type=r,this.branches=u,this.otherwise=g}static parse(r,u){if(r.length<4)return u.error(`Expected at least 3 arguments, but found only ${r.length-1}.`);if(r.length%2!=0)return u.error("Expected an odd number of arguments.");let g;u.expectedType&&u.expectedType.kind!=="value"&&(g=u.expectedType);const T=[];for(let L=1;L<r.length-1;L+=2){const q=u.parse(r[L],L,zn);if(!q)return null;const $=u.parse(r[L+1],L+1,g);if(!$)return null;T.push([q,$]),g=g||$.type}const z=u.parse(r[r.length-1],r.length-1,g);if(!z)return null;if(!g)throw new Error("Can't infer output type");return new os(g,T,z)}evaluate(r){for(const[u,g]of this.branches)if(u.evaluate(r))return g.evaluate(r);return this.otherwise.evaluate(r)}eachChild(r){for(const[u,g]of this.branches)r(u),r(g);r(this.otherwise)}outputDefined(){return this.branches.every(([r,u])=>u.outputDefined())&&this.otherwise.outputDefined()}}class zr{constructor(r,u,g,T){this.type=r,this.input=u,this.beginIndex=g,this.endIndex=T}static parse(r,u){if(r.length<=2||r.length>=5)return u.error(`Expected 3 or 4 arguments, but found ${r.length-1} instead.`);const g=u.parse(r[1],1,On),T=u.parse(r[2],2,Ut);if(!g||!T)return null;if(!Oe(g.type,[Le(On),Zn,On]))return u.error(`Expected first argument to be of type array or string, but found ${Fe(g.type)} instead`);if(r.length===4){const z=u.parse(r[3],3,Ut);return z?new zr(g.type,g,T,z):null}return new zr(g.type,g,T)}evaluate(r){const u=this.input.evaluate(r),g=this.beginIndex.evaluate(r);if(!Ke(u,["string","array"]))throw new Zi(`Expected first argument to be of type array or string, but found ${Fe(Be(u))} instead.`);if(this.endIndex){const T=this.endIndex.evaluate(r);return u.slice(g,T)}return u.slice(g)}eachChild(r){r(this.input),r(this.beginIndex),this.endIndex&&r(this.endIndex)}outputDefined(){return!1}}function dr(o,r){return o==="=="||o==="!="?r.kind==="boolean"||r.kind==="string"||r.kind==="number"||r.kind==="null"||r.kind==="value":r.kind==="string"||r.kind==="number"||r.kind==="value"}function _a(o,r,u,g){return g.compare(r,u)===0}function VA(o,r,u){const g=o!=="=="&&o!=="!=";return class i3{constructor(z,L,q){this.type=zn,this.lhs=z,this.rhs=L,this.collator=q,this.hasUntypedArgument=z.type.kind==="value"||L.type.kind==="value"}static parse(z,L){if(z.length!==3&&z.length!==4)return L.error("Expected two or three arguments.");const q=z[0];let $=L.parse(z[1],1,On);if(!$)return null;if(!dr(q,$.type))return L.concat(1).error(`"${q}" comparisons are not supported for type '${Fe($.type)}'.`);let Y=L.parse(z[2],2,On);if(!Y)return null;if(!dr(q,Y.type))return L.concat(2).error(`"${q}" comparisons are not supported for type '${Fe(Y.type)}'.`);if($.type.kind!==Y.type.kind&&$.type.kind!=="value"&&Y.type.kind!=="value")return L.error(`Cannot compare types '${Fe($.type)}' and '${Fe(Y.type)}'.`);g&&($.type.kind==="value"&&Y.type.kind!=="value"?$=new EA(Y.type,[$]):$.type.kind!=="value"&&Y.type.kind==="value"&&(Y=new EA($.type,[Y])));let ne=null;if(z.length===4){if($.type.kind!=="string"&&Y.type.kind!=="string"&&$.type.kind!=="value"&&Y.type.kind!=="value")return L.error("Cannot use collator to compare non-string types.");if(ne=L.parse(z[3],3,st),!ne)return null}return new i3($,Y,ne)}evaluate(z){const L=this.lhs.evaluate(z),q=this.rhs.evaluate(z);if(g&&this.hasUntypedArgument){const $=Be(L),Y=Be(q);if($.kind!==Y.kind||$.kind!=="string"&&$.kind!=="number")throw new Zi(`Expected arguments for "${o}" to be (string, string) or (number, number), but found (${$.kind}, ${Y.kind}) instead.`)}if(this.collator&&!g&&this.hasUntypedArgument){const $=Be(L),Y=Be(q);if($.kind!=="string"||Y.kind!=="string")return r(z,L,q)}return this.collator?u(z,L,q,this.collator.evaluate(z)):r(z,L,q)}eachChild(z){z(this.lhs),z(this.rhs),this.collator&&z(this.collator)}outputDefined(){return!0}}}const as=VA("==",function(o,r,u){return r===u},_a),Ss=VA("!=",function(o,r,u){return r!==u},function(o,r,u,g){return!_a(0,r,u,g)}),ol=VA("<",function(o,r,u){return r<u},function(o,r,u,g){return g.compare(r,u)<0}),Na=VA(">",function(o,r,u){return r>u},function(o,r,u,g){return g.compare(r,u)>0}),Xr=VA("<=",function(o,r,u){return r<=u},function(o,r,u,g){return g.compare(r,u)<=0}),su=VA(">=",function(o,r,u){return r>=u},function(o,r,u,g){return g.compare(r,u)>=0});class aA{constructor(r,u,g,T,z){this.type=Zn,this.number=r,this.locale=u,this.currency=g,this.minFractionDigits=T,this.maxFractionDigits=z}static parse(r,u){if(r.length!==3)return u.error("Expected two arguments.");const g=u.parse(r[1],1,Ut);if(!g)return null;const T=r[2];if(typeof T!="object"||Array.isArray(T))return u.error("NumberFormat options argument must be an object.");let z=null;if(T.locale&&(z=u.parse(T.locale,1,Zn),!z))return null;let L=null;if(T.currency&&(L=u.parse(T.currency,1,Zn),!L))return null;let q=null;if(T["min-fraction-digits"]&&(q=u.parse(T["min-fraction-digits"],1,Ut),!q))return null;let $=null;return T["max-fraction-digits"]&&($=u.parse(T["max-fraction-digits"],1,Ut),!$)?null:new aA(g,z,L,q,$)}evaluate(r){return new Intl.NumberFormat(this.locale?this.locale.evaluate(r):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(r):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(r):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(r):void 0}).format(this.number.evaluate(r))}eachChild(r){r(this.number),this.locale&&r(this.locale),this.currency&&r(this.currency),this.minFractionDigits&&r(this.minFractionDigits),this.maxFractionDigits&&r(this.maxFractionDigits)}outputDefined(){return!1}}class Cs{constructor(r){this.type=ze,this.sections=r}static parse(r,u){if(r.length<2)return u.error("Expected at least one argument.");const g=r[1];if(!Array.isArray(g)&&typeof g=="object")return u.error("First argument must be an image or text section.");const T=[];let z=!1;for(let L=1;L<=r.length-1;++L){const q=r[L];if(z&&typeof q=="object"&&!Array.isArray(q)){z=!1;let $=null;if(q["font-scale"]&&($=u.parse(q["font-scale"],1,Ut),!$))return null;let Y=null;if(q["text-font"]&&(Y=u.parse(q["text-font"],1,Le(Zn)),!Y))return null;let ne=null;if(q["text-color"]&&(ne=u.parse(q["text-color"],1,br),!ne))return null;const re=T[T.length-1];re.scale=$,re.font=Y,re.textColor=ne}else{const $=u.parse(r[L],1,On);if(!$)return null;const Y=$.type.kind;if(Y!=="string"&&Y!=="value"&&Y!=="null"&&Y!=="resolvedImage")return u.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");z=!0,T.push({content:$,scale:null,font:null,textColor:null})}}return new Cs(T)}evaluate(r){return new He(this.sections.map(u=>{const g=u.content.evaluate(r);return Be(g)===de?new Ln("",g,null,null,null):new Ln(mi(g),null,u.scale?u.scale.evaluate(r):null,u.font?u.font.evaluate(r).join(","):null,u.textColor?u.textColor.evaluate(r):null)}))}eachChild(r){for(const u of this.sections)r(u.content),u.scale&&r(u.scale),u.font&&r(u.font),u.textColor&&r(u.textColor)}outputDefined(){return!1}}class Va{constructor(r){this.type=de,this.input=r}static parse(r,u){if(r.length!==2)return u.error("Expected two arguments.");const g=u.parse(r[1],1,Zn);return g?new Va(g):u.error("No image name provided.")}evaluate(r){const u=this.input.evaluate(r),g=Er.fromString(u);return g&&r.availableImages&&(g.available=r.availableImages.indexOf(u)>-1),g}eachChild(r){r(this.input)}outputDefined(){return!1}}class UA{constructor(r){this.type=Ut,this.input=r}static parse(r,u){if(r.length!==2)return u.error(`Expected 1 argument, but found ${r.length-1} instead.`);const g=u.parse(r[1],1);return g?g.type.kind!=="array"&&g.type.kind!=="string"&&g.type.kind!=="value"?u.error(`Expected argument of type string or array, but found ${Fe(g.type)} instead.`):new UA(g):null}evaluate(r){const u=this.input.evaluate(r);if(typeof u=="string"||Array.isArray(u))return u.length;throw new Zi(`Expected value to be of type string or array, but found ${Fe(Be(u))} instead.`)}eachChild(r){r(this.input)}outputDefined(){return!1}}const ls={"==":as,"!=":Ss,">":Na,"<":ol,">=":su,"<=":Xr,array:EA,at:Po,boolean:EA,case:os,coalesce:Do,collator:Hi,format:Cs,image:Va,in:Xi,"index-of":lo,interpolate:Fi,"interpolate-hcl":Fi,"interpolate-lab":Fi,length:UA,let:ss,literal:ye,match:NA,number:EA,"number-format":aA,object:EA,slice:zr,step:Rn,string:EA,"to-boolean":As,"to-color":As,"to-number":As,"to-string":As,var:Gs,within:Ts};function Is(o,[r,u,g,T]){r=r.evaluate(o),u=u.evaluate(o),g=g.evaluate(o);const z=T?T.evaluate(o):1,L=ca(r,u,g,z);if(L)throw new Zi(L);return new ti(r/255,u/255,g/255,z,!1)}function Ki(o,r){return o in r}function QA(o,r){const u=r[o];return u===void 0?null:u}function us(o){return{type:o}}function zo(o){return{result:"success",value:o}}function Lr(o){return{result:"error",value:o}}function Lo(o){return o["property-type"]==="data-driven"||o["property-type"]==="cross-faded-data-driven"}function Ro(o){return!!o.expression&&o.expression.parameters.indexOf("zoom")>-1}function al(o){return!!o.expression&&o.expression.interpolated}function ai(o){return o instanceof Number?"number":o instanceof String?"string":o instanceof Boolean?"boolean":Array.isArray(o)?"array":o===null?"null":typeof o}function Qi(o){return typeof o=="object"&&o!==null&&!Array.isArray(o)}function Zs(o){return o}function ni(o,r){const u=r.type==="color",g=o.stops&&typeof o.stops[0][0]=="object",T=g||!(g||o.property!==void 0),z=o.type||(al(r)?"exponential":"interval");if(u||r.type==="padding"){const ne=u?ti.parse:Xt.parse;(o=bA({},o)).stops&&(o.stops=o.stops.map(re=>[re[0],ne(re[1])])),o.default=ne(o.default?o.default:r.default)}if(o.colorSpace&&(L=o.colorSpace)!=="rgb"&&L!=="hcl"&&L!=="lab")throw new Error(`Unknown color space: "${o.colorSpace}"`);var L;let q,$,Y;if(z==="exponential")q=pA;else if(z==="interval")q=Bi;else if(z==="categorical"){q=Ji,$=Object.create(null);for(const ne of o.stops)$[ne[0]]=ne[1];Y=typeof o.stops[0][0]}else{if(z!=="identity")throw new Error(`Unknown function type "${z}"`);q=ll}if(g){const ne={},re=[];for(let ge=0;ge<o.stops.length;ge++){const Me=o.stops[ge],Ie=Me[0].zoom;ne[Ie]===void 0&&(ne[Ie]={zoom:Ie,type:o.type,property:o.property,default:o.default,stops:[]},re.push(Ie)),ne[Ie].stops.push([Me[0].value,Me[1]])}const ue=[];for(const ge of re)ue.push([ne[ge].zoom,ni(ne[ge],r)]);const me={name:"linear"};return{kind:"composite",interpolationType:me,interpolationFactor:Fi.interpolationFactor.bind(void 0,me),zoomStops:ue.map(ge=>ge[0]),evaluate:({zoom:ge},Me)=>pA({stops:ue,base:o.base},r,ge).evaluate(ge,Me)}}if(T){const ne=z==="exponential"?{name:"exponential",base:o.base!==void 0?o.base:1}:null;return{kind:"camera",interpolationType:ne,interpolationFactor:Fi.interpolationFactor.bind(void 0,ne),zoomStops:o.stops.map(re=>re[0]),evaluate:({zoom:re})=>q(o,r,re,$,Y)}}return{kind:"source",evaluate(ne,re){const ue=re&&re.properties?re.properties[o.property]:void 0;return ue===void 0?dA(o.default,r.default):q(o,r,ue,$,Y)}}}function dA(o,r,u){return o!==void 0?o:r!==void 0?r:u!==void 0?u:void 0}function Ji(o,r,u,g,T){return dA(typeof u===T?g[u]:void 0,o.default,r.default)}function Bi(o,r,u){if(ai(u)!=="number")return dA(o.default,r.default);const g=o.stops.length;if(g===1||u<=o.stops[0][0])return o.stops[0][1];if(u>=o.stops[g-1][0])return o.stops[g-1][1];const T=Ti(o.stops.map(z=>z[0]),u);return o.stops[T][1]}function pA(o,r,u){const g=o.base!==void 0?o.base:1;if(ai(u)!=="number")return dA(o.default,r.default);const T=o.stops.length;if(T===1||u<=o.stops[0][0])return o.stops[0][1];if(u>=o.stops[T-1][0])return o.stops[T-1][1];const z=Ti(o.stops.map(ne=>ne[0]),u),L=function(ne,re,ue,me){const ge=me-ue,Me=ne-ue;return ge===0?0:re===1?Me/ge:(Math.pow(re,Me)-1)/(Math.pow(re,ge)-1)}(u,g,o.stops[z][0],o.stops[z+1][0]),q=o.stops[z][1],$=o.stops[z+1][1],Y=fr[r.type]||Zs;return typeof q.evaluate=="function"?{evaluate(...ne){const re=q.evaluate.apply(void 0,ne),ue=$.evaluate.apply(void 0,ne);if(re!==void 0&&ue!==void 0)return Y(re,ue,L,o.colorSpace)}}:Y(q,$,L,o.colorSpace)}function ll(o,r,u){switch(r.type){case"color":u=ti.parse(u);break;case"formatted":u=He.fromString(u.toString());break;case"resolvedImage":u=Er.fromString(u.toString());break;case"padding":u=Xt.parse(u);break;default:ai(u)===r.type||r.type==="enum"&&r.values[u]||(u=void 0)}return dA(u,o.default,r.default)}fA.register(ls,{error:[{kind:"error"},[Zn],(o,[r])=>{throw new Zi(r.evaluate(o))}],typeof:[Zn,[On],(o,[r])=>Fe(Be(r.evaluate(o)))],"to-rgba":[Le(Ut,4),[br],(o,[r])=>{const[u,g,T,z]=r.evaluate(o).rgb;return[255*u,255*g,255*T,z]}],rgb:[br,[Ut,Ut,Ut],Is],rgba:[br,[Ut,Ut,Ut,Ut],Is],has:{type:zn,overloads:[[[Zn],(o,[r])=>Ki(r.evaluate(o),o.properties())],[[Zn,OA],(o,[r,u])=>Ki(r.evaluate(o),u.evaluate(o))]]},get:{type:On,overloads:[[[Zn],(o,[r])=>QA(r.evaluate(o),o.properties())],[[Zn,OA],(o,[r,u])=>QA(r.evaluate(o),u.evaluate(o))]]},"feature-state":[On,[Zn],(o,[r])=>QA(r.evaluate(o),o.featureState||{})],properties:[OA,[],o=>o.properties()],"geometry-type":[Zn,[],o=>o.geometryType()],id:[On,[],o=>o.id()],zoom:[Ut,[],o=>o.globals.zoom],"heatmap-density":[Ut,[],o=>o.globals.heatmapDensity||0],"line-progress":[Ut,[],o=>o.globals.lineProgress||0],accumulated:[On,[],o=>o.globals.accumulated===void 0?null:o.globals.accumulated],"+":[Ut,us(Ut),(o,r)=>{let u=0;for(const g of r)u+=g.evaluate(o);return u}],"*":[Ut,us(Ut),(o,r)=>{let u=1;for(const g of r)u*=g.evaluate(o);return u}],"-":{type:Ut,overloads:[[[Ut,Ut],(o,[r,u])=>r.evaluate(o)-u.evaluate(o)],[[Ut],(o,[r])=>-r.evaluate(o)]]},"/":[Ut,[Ut,Ut],(o,[r,u])=>r.evaluate(o)/u.evaluate(o)],"%":[Ut,[Ut,Ut],(o,[r,u])=>r.evaluate(o)%u.evaluate(o)],ln2:[Ut,[],()=>Math.LN2],pi:[Ut,[],()=>Math.PI],e:[Ut,[],()=>Math.E],"^":[Ut,[Ut,Ut],(o,[r,u])=>Math.pow(r.evaluate(o),u.evaluate(o))],sqrt:[Ut,[Ut],(o,[r])=>Math.sqrt(r.evaluate(o))],log10:[Ut,[Ut],(o,[r])=>Math.log(r.evaluate(o))/Math.LN10],ln:[Ut,[Ut],(o,[r])=>Math.log(r.evaluate(o))],log2:[Ut,[Ut],(o,[r])=>Math.log(r.evaluate(o))/Math.LN2],sin:[Ut,[Ut],(o,[r])=>Math.sin(r.evaluate(o))],cos:[Ut,[Ut],(o,[r])=>Math.cos(r.evaluate(o))],tan:[Ut,[Ut],(o,[r])=>Math.tan(r.evaluate(o))],asin:[Ut,[Ut],(o,[r])=>Math.asin(r.evaluate(o))],acos:[Ut,[Ut],(o,[r])=>Math.acos(r.evaluate(o))],atan:[Ut,[Ut],(o,[r])=>Math.atan(r.evaluate(o))],min:[Ut,us(Ut),(o,r)=>Math.min(...r.map(u=>u.evaluate(o)))],max:[Ut,us(Ut),(o,r)=>Math.max(...r.map(u=>u.evaluate(o)))],abs:[Ut,[Ut],(o,[r])=>Math.abs(r.evaluate(o))],round:[Ut,[Ut],(o,[r])=>{const u=r.evaluate(o);return u<0?-Math.round(-u):Math.round(u)}],floor:[Ut,[Ut],(o,[r])=>Math.floor(r.evaluate(o))],ceil:[Ut,[Ut],(o,[r])=>Math.ceil(r.evaluate(o))],"filter-==":[zn,[Zn,On],(o,[r,u])=>o.properties()[r.value]===u.value],"filter-id-==":[zn,[On],(o,[r])=>o.id()===r.value],"filter-type-==":[zn,[Zn],(o,[r])=>o.geometryType()===r.value],"filter-<":[zn,[Zn,On],(o,[r,u])=>{const g=o.properties()[r.value],T=u.value;return typeof g==typeof T&&g<T}],"filter-id-<":[zn,[On],(o,[r])=>{const u=o.id(),g=r.value;return typeof u==typeof g&&u<g}],"filter->":[zn,[Zn,On],(o,[r,u])=>{const g=o.properties()[r.value],T=u.value;return typeof g==typeof T&&g>T}],"filter-id->":[zn,[On],(o,[r])=>{const u=o.id(),g=r.value;return typeof u==typeof g&&u>g}],"filter-<=":[zn,[Zn,On],(o,[r,u])=>{const g=o.properties()[r.value],T=u.value;return typeof g==typeof T&&g<=T}],"filter-id-<=":[zn,[On],(o,[r])=>{const u=o.id(),g=r.value;return typeof u==typeof g&&u<=g}],"filter->=":[zn,[Zn,On],(o,[r,u])=>{const g=o.properties()[r.value],T=u.value;return typeof g==typeof T&&g>=T}],"filter-id->=":[zn,[On],(o,[r])=>{const u=o.id(),g=r.value;return typeof u==typeof g&&u>=g}],"filter-has":[zn,[On],(o,[r])=>r.value in o.properties()],"filter-has-id":[zn,[],o=>o.id()!==null&&o.id()!==void 0],"filter-type-in":[zn,[Le(Zn)],(o,[r])=>r.value.indexOf(o.geometryType())>=0],"filter-id-in":[zn,[Le(On)],(o,[r])=>r.value.indexOf(o.id())>=0],"filter-in-small":[zn,[Zn,Le(On)],(o,[r,u])=>u.value.indexOf(o.properties()[r.value])>=0],"filter-in-large":[zn,[Zn,Le(On)],(o,[r,u])=>function(g,T,z,L){for(;z<=L;){const q=z+L>>1;if(T[q]===g)return!0;T[q]>g?L=q-1:z=q+1}return!1}(o.properties()[r.value],u.value,0,u.value.length-1)],all:{type:zn,overloads:[[[zn,zn],(o,[r,u])=>r.evaluate(o)&&u.evaluate(o)],[us(zn),(o,r)=>{for(const u of r)if(!u.evaluate(o))return!1;return!0}]]},any:{type:zn,overloads:[[[zn,zn],(o,[r,u])=>r.evaluate(o)||u.evaluate(o)],[us(zn),(o,r)=>{for(const u of r)if(u.evaluate(o))return!0;return!1}]]},"!":[zn,[zn],(o,[r])=>!r.evaluate(o)],"is-supported-script":[zn,[Zn],(o,[r])=>{const u=o.globals&&o.globals.isSupportedScript;return!u||u(r.evaluate(o))}],upcase:[Zn,[Zn],(o,[r])=>r.evaluate(o).toUpperCase()],downcase:[Zn,[Zn],(o,[r])=>r.evaluate(o).toLowerCase()],concat:[Zn,us(On),(o,r)=>r.map(u=>mi(u.evaluate(o))).join("")],"resolved-locale":[Zn,[st],(o,[r])=>r.evaluate(o).resolvedLocale()]});class Ua{constructor(r,u){var g;this.expression=r,this._warningHistory={},this._evaluator=new Co,this._defaultValue=u?(g=u).type==="color"&&Qi(g.default)?new ti(0,0,0,0):g.type==="color"?ti.parse(g.default)||null:g.type==="padding"?Xt.parse(g.default)||null:g.type==="variableAnchorOffsetCollection"?kn.parse(g.default)||null:g.default===void 0?null:g.default:null,this._enumValues=u&&u.type==="enum"?u.values:null}evaluateWithoutErrorHandling(r,u,g,T,z,L){return this._evaluator.globals=r,this._evaluator.feature=u,this._evaluator.featureState=g,this._evaluator.canonical=T,this._evaluator.availableImages=z||null,this._evaluator.formattedSection=L,this.expression.evaluate(this._evaluator)}evaluate(r,u,g,T,z,L){this._evaluator.globals=r,this._evaluator.feature=u||null,this._evaluator.featureState=g||null,this._evaluator.canonical=T,this._evaluator.availableImages=z||null,this._evaluator.formattedSection=L||null;try{const q=this.expression.evaluate(this._evaluator);if(q==null||typeof q=="number"&&q!=q)return this._defaultValue;if(this._enumValues&&!(q in this._enumValues))throw new Zi(`Expected value to be one of ${Object.keys(this._enumValues).map($=>JSON.stringify($)).join(", ")}, but found ${JSON.stringify(q)} instead.`);return q}catch(q){return this._warningHistory[q.message]||(this._warningHistory[q.message]=!0,typeof console<"u"&&console.warn(q.message)),this._defaultValue}}}function Hs(o){return Array.isArray(o)&&o.length>0&&typeof o[0]=="string"&&o[0]in ls}function $s(o,r){const u=new Yr(ls,ma,[],r?function(T){const z={color:br,string:Zn,number:Ut,enum:Zn,boolean:zn,formatted:ze,padding:oe,resolvedImage:de,variableAnchorOffsetCollection:we};return T.type==="array"?Le(z[T.value]||On,T.length):z[T.type]}(r):void 0),g=u.parse(o,void 0,void 0,void 0,r&&r.type==="string"?{typeAnnotation:"coerce"}:void 0);return g?zo(new Ua(g,r)):Lr(u.errors)}class Fo{constructor(r,u){this.kind=r,this._styleExpression=u,this.isStateDependent=r!=="constant"&&!Bo(u.expression)}evaluateWithoutErrorHandling(r,u,g,T,z,L){return this._styleExpression.evaluateWithoutErrorHandling(r,u,g,T,z,L)}evaluate(r,u,g,T,z,L){return this._styleExpression.evaluate(r,u,g,T,z,L)}}class Si{constructor(r,u,g,T){this.kind=r,this.zoomStops=g,this._styleExpression=u,this.isStateDependent=r!=="camera"&&!Bo(u.expression),this.interpolationType=T}evaluateWithoutErrorHandling(r,u,g,T,z,L){return this._styleExpression.evaluateWithoutErrorHandling(r,u,g,T,z,L)}evaluate(r,u,g,T,z,L){return this._styleExpression.evaluate(r,u,g,T,z,L)}interpolationFactor(r,u,g){return this.interpolationType?Fi.interpolationFactor(this.interpolationType,r,u,g):0}}function Kr(o,r){const u=$s(o,r);if(u.result==="error")return u;const g=u.value.expression,T=ao(g);if(!T&&!Lo(r))return Lr([new Wi("","data expressions not supported")]);const z=ga(g,["zoom"]);if(!z&&!Ro(r))return Lr([new Wi("","zoom expressions not supported")]);const L=cs(g);return L||z?L instanceof Wi?Lr([L]):L instanceof Fi&&!al(r)?Lr([new Wi("",'"interpolate" expressions cannot be used with this property')]):zo(L?new Si(T?"camera":"composite",u.value,L.labels,L instanceof Fi?L.interpolation:void 0):new Fo(T?"constant":"source",u.value)):Lr([new Wi("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class js{constructor(r,u){this._parameters=r,this._specification=u,bA(this,ni(this._parameters,this._specification))}static deserialize(r){return new js(r._parameters,r._specification)}static serialize(r){return{_parameters:r._parameters,_specification:r._specification}}}function cs(o){let r=null;if(o instanceof ss)r=cs(o.result);else if(o instanceof Do){for(const u of o.args)if(r=cs(u),r)break}else(o instanceof Rn||o instanceof Fi)&&o.input instanceof fA&&o.input.name==="zoom"&&(r=o);return r instanceof Wi||o.eachChild(u=>{const g=cs(u);g instanceof Wi?r=g:!r&&g?r=new Wi("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):r&&g&&r!==g&&(r=new Wi("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),r}function Ws(o){if(o===!0||o===!1)return!0;if(!Array.isArray(o)||o.length===0)return!1;switch(o[0]){case"has":return o.length>=2&&o[1]!=="$id"&&o[1]!=="$type";case"in":return o.length>=3&&(typeof o[1]!="string"||Array.isArray(o[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return o.length!==3||Array.isArray(o[1])||Array.isArray(o[2]);case"any":case"all":for(const r of o.slice(1))if(!Ws(r)&&typeof r!="boolean")return!1;return!0;default:return!0}}const Nl={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function qr(o){if(o==null)return{filter:()=>!0,needGeometry:!1};Ws(o)||(o=Oo(o));const r=$s(o,Nl);if(r.result==="error")throw new Error(r.value.map(u=>`${u.key}: ${u.message}`).join(", "));return{filter:(u,g,T)=>r.value.evaluate(u,g,{},T),needGeometry:Jr(o)}}function Mr(o,r){return o<r?-1:o>r?1:0}function Jr(o){if(!Array.isArray(o))return!1;if(o[0]==="within")return!0;for(let r=1;r<o.length;r++)if(Jr(o[r]))return!0;return!1}function Oo(o){if(!o)return!0;const r=o[0];return o.length<=1?r!=="any":r==="=="?Bs(o[1],o[2],"=="):r==="!="?Rr(Bs(o[1],o[2],"==")):r==="<"||r===">"||r==="<="||r===">="?Bs(o[1],o[2],r):r==="any"?(u=o.slice(1),["any"].concat(u.map(Oo))):r==="all"?["all"].concat(o.slice(1).map(Oo)):r==="none"?["all"].concat(o.slice(1).map(Oo).map(Rr)):r==="in"?uo(o[1],o.slice(2)):r==="!in"?Rr(uo(o[1],o.slice(2))):r==="has"?Qa(o[1]):r==="!has"?Rr(Qa(o[1])):r!=="within"||o;var u}function Bs(o,r,u){switch(o){case"$type":return[`filter-type-${u}`,r];case"$id":return[`filter-id-${u}`,r];default:return[`filter-${u}`,o,r]}}function uo(o,r){if(r.length===0)return!1;switch(o){case"$type":return["filter-type-in",["literal",r]];case"$id":return["filter-id-in",["literal",r]];default:return r.length>200&&!r.some(u=>typeof u!=typeof r[0])?["filter-in-large",o,["literal",r.sort(Mr)]]:["filter-in-small",o,["literal",r]]}}function Qa(o){switch(o){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",o]}}function Rr(o){return["!",o]}function Tr(o){const r=typeof o;if(r==="number"||r==="boolean"||r==="string"||o==null)return JSON.stringify(o);if(Array.isArray(o)){let T="[";for(const z of o)T+=`${Tr(z)},`;return`${T}]`}const u=Object.keys(o).sort();let g="{";for(let T=0;T<u.length;T++)g+=`${JSON.stringify(u[T])}:${Tr(o[u[T]])},`;return`${g}}`}function mA(o){let r="";for(const u of ei)r+=`/${Tr(o[u])}`;return r}function GA(o){const r=o.value;return r?[new Nt(o.key,r,"constants have been deprecated as of v8")]:[]}function _i(o){return o instanceof Number||o instanceof String||o instanceof Boolean?o.valueOf():o}function qA(o){if(Array.isArray(o))return o.map(qA);if(o instanceof Object&&!(o instanceof Number||o instanceof String||o instanceof Boolean)){const r={};for(const u in o)r[u]=qA(o[u]);return r}return _i(o)}function Di(o){const r=o.key,u=o.value,g=o.valueSpec||{},T=o.objectElementValidators||{},z=o.style,L=o.styleSpec,q=o.validateSpec;let $=[];const Y=ai(u);if(Y!=="object")return[new Nt(r,u,`object expected, ${Y} found`)];for(const ne in u){const re=ne.split(".")[0],ue=g[re]||g["*"];let me;if(T[re])me=T[re];else if(g[re])me=q;else if(T["*"])me=T["*"];else{if(!g["*"]){$.push(new Nt(r,u[ne],`unknown property "${ne}"`));continue}me=q}$=$.concat(me({key:(r&&`${r}.`)+ne,value:u[ne],valueSpec:ue,style:z,styleSpec:L,object:u,objectKey:ne,validateSpec:q},u))}for(const ne in g)T[ne]||g[ne].required&&g[ne].default===void 0&&u[ne]===void 0&&$.push(new Nt(r,u,`missing required property "${ne}"`));return $}function co(o){const r=o.value,u=o.valueSpec,g=o.style,T=o.styleSpec,z=o.key,L=o.arrayElementValidator||o.validateSpec;if(ai(r)!=="array")return[new Nt(z,r,`array expected, ${ai(r)} found`)];if(u.length&&r.length!==u.length)return[new Nt(z,r,`array length ${u.length} expected, length ${r.length} found`)];if(u["min-length"]&&r.length<u["min-length"])return[new Nt(z,r,`array length at least ${u["min-length"]} expected, length ${r.length} found`)];let q={type:u.value,values:u.values};T.$version<7&&(q.function=u.function),ai(u.value)==="object"&&(q=u.value);let $=[];for(let Y=0;Y<r.length;Y++)$=$.concat(L({array:r,arrayIndex:Y,value:r[Y],valueSpec:q,validateSpec:o.validateSpec,style:g,styleSpec:T,key:`${z}[${Y}]`}));return $}function gA(o){const r=o.key,u=o.value,g=o.valueSpec;let T=ai(u);return T==="number"&&u!=u&&(T="NaN"),T!=="number"?[new Nt(r,u,`number expected, ${T} found`)]:"minimum"in g&&u<g.minimum?[new Nt(r,u,`${u} is less than the minimum value ${g.minimum}`)]:"maximum"in g&&u>g.maximum?[new Nt(r,u,`${u} is greater than the maximum value ${g.maximum}`)]:[]}function Fr(o){const r=o.valueSpec,u=_i(o.value.type);let g,T,z,L={};const q=u!=="categorical"&&o.value.property===void 0,$=!q,Y=ai(o.value.stops)==="array"&&ai(o.value.stops[0])==="array"&&ai(o.value.stops[0][0])==="object",ne=Di({key:o.key,value:o.value,valueSpec:o.styleSpec.function,validateSpec:o.validateSpec,style:o.style,styleSpec:o.styleSpec,objectElementValidators:{stops:function(me){if(u==="identity")return[new Nt(me.key,me.value,'identity function may not have a "stops" property')];let ge=[];const Me=me.value;return ge=ge.concat(co({key:me.key,value:Me,valueSpec:me.valueSpec,validateSpec:me.validateSpec,style:me.style,styleSpec:me.styleSpec,arrayElementValidator:re})),ai(Me)==="array"&&Me.length===0&&ge.push(new Nt(me.key,Me,"array must have at least one stop")),ge},default:function(me){return me.validateSpec({key:me.key,value:me.value,valueSpec:r,validateSpec:me.validateSpec,style:me.style,styleSpec:me.styleSpec})}}});return u==="identity"&&q&&ne.push(new Nt(o.key,o.value,'missing required property "property"')),u==="identity"||o.value.stops||ne.push(new Nt(o.key,o.value,'missing required property "stops"')),u==="exponential"&&o.valueSpec.expression&&!al(o.valueSpec)&&ne.push(new Nt(o.key,o.value,"exponential functions not supported")),o.styleSpec.$version>=8&&($&&!Lo(o.valueSpec)?ne.push(new Nt(o.key,o.value,"property functions not supported")):q&&!Ro(o.valueSpec)&&ne.push(new Nt(o.key,o.value,"zoom functions not supported"))),u!=="categorical"&&!Y||o.value.property!==void 0||ne.push(new Nt(o.key,o.value,'"property" property is required')),ne;function re(me){let ge=[];const Me=me.value,Ie=me.key;if(ai(Me)!=="array")return[new Nt(Ie,Me,`array expected, ${ai(Me)} found`)];if(Me.length!==2)return[new Nt(Ie,Me,`array length 2 expected, length ${Me.length} found`)];if(Y){if(ai(Me[0])!=="object")return[new Nt(Ie,Me,`object expected, ${ai(Me[0])} found`)];if(Me[0].zoom===void 0)return[new Nt(Ie,Me,"object stop key must have zoom")];if(Me[0].value===void 0)return[new Nt(Ie,Me,"object stop key must have value")];if(z&&z>_i(Me[0].zoom))return[new Nt(Ie,Me[0].zoom,"stop zoom values must appear in ascending order")];_i(Me[0].zoom)!==z&&(z=_i(Me[0].zoom),T=void 0,L={}),ge=ge.concat(Di({key:`${Ie}[0]`,value:Me[0],valueSpec:{zoom:{}},validateSpec:me.validateSpec,style:me.style,styleSpec:me.styleSpec,objectElementValidators:{zoom:gA,value:ue}}))}else ge=ge.concat(ue({key:`${Ie}[0]`,value:Me[0],valueSpec:{},validateSpec:me.validateSpec,style:me.style,styleSpec:me.styleSpec},Me));return Hs(qA(Me[1]))?ge.concat([new Nt(`${Ie}[1]`,Me[1],"expressions are not allowed in function stops.")]):ge.concat(me.validateSpec({key:`${Ie}[1]`,value:Me[1],valueSpec:r,validateSpec:me.validateSpec,style:me.style,styleSpec:me.styleSpec}))}function ue(me,ge){const Me=ai(me.value),Ie=_i(me.value),Re=me.value!==null?me.value:ge;if(g){if(Me!==g)return[new Nt(me.key,Re,`${Me} stop domain type must match previous stop domain type ${g}`)]}else g=Me;if(Me!=="number"&&Me!=="string"&&Me!=="boolean")return[new Nt(me.key,Re,"stop domain value must be a number, string, or boolean")];if(Me!=="number"&&u!=="categorical"){let et=`number expected, ${Me} found`;return Lo(r)&&u===void 0&&(et+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Nt(me.key,Re,et)]}return u!=="categorical"||Me!=="number"||isFinite(Ie)&&Math.floor(Ie)===Ie?u!=="categorical"&&Me==="number"&&T!==void 0&&Ie<T?[new Nt(me.key,Re,"stop domain values must appear in ascending order")]:(T=Ie,u==="categorical"&&Ie in L?[new Nt(me.key,Re,"stop domain values must be unique")]:(L[Ie]=!0,[])):[new Nt(me.key,Re,`integer expected, found ${Ie}`)]}}function Zr(o){const r=(o.expressionContext==="property"?Kr:$s)(qA(o.value),o.valueSpec);if(r.result==="error")return r.value.map(g=>new Nt(`${o.key}${g.key}`,o.value,g.message));const u=r.value.expression||r.value._styleExpression.expression;if(o.expressionContext==="property"&&o.propertyKey==="text-font"&&!u.outputDefined())return[new Nt(o.key,o.value,`Invalid data expression for "${o.propertyKey}". Output values must be contained as literals within the expression.`)];if(o.expressionContext==="property"&&o.propertyType==="layout"&&!Bo(u))return[new Nt(o.key,o.value,'"feature-state" data expressions are not supported with layout properties.')];if(o.expressionContext==="filter"&&!Bo(u))return[new Nt(o.key,o.value,'"feature-state" data expressions are not supported with filters.')];if(o.expressionContext&&o.expressionContext.indexOf("cluster")===0){if(!ga(u,["zoom","feature-state"]))return[new Nt(o.key,o.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(o.expressionContext==="cluster-initial"&&!ao(u))return[new Nt(o.key,o.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function ZA(o){const r=o.key,u=o.value,g=o.valueSpec,T=[];return Array.isArray(g.values)?g.values.indexOf(_i(u))===-1&&T.push(new Nt(r,u,`expected one of [${g.values.join(", ")}], ${JSON.stringify(u)} found`)):Object.keys(g.values).indexOf(_i(u))===-1&&T.push(new Nt(r,u,`expected one of [${Object.keys(g.values).join(", ")}], ${JSON.stringify(u)} found`)),T}function No(o){return Ws(qA(o.value))?Zr(bA({},o,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Ga(o)}function Ga(o){const r=o.value,u=o.key;if(ai(r)!=="array")return[new Nt(u,r,`array expected, ${ai(r)} found`)];const g=o.styleSpec;let T,z=[];if(r.length<1)return[new Nt(u,r,"filter array must have at least 1 element")];switch(z=z.concat(ZA({key:`${u}[0]`,value:r[0],valueSpec:g.filter_operator,style:o.style,styleSpec:o.styleSpec})),_i(r[0])){case"<":case"<=":case">":case">=":r.length>=2&&_i(r[1])==="$type"&&z.push(new Nt(u,r,`"$type" cannot be use with operator "${r[0]}"`));case"==":case"!=":r.length!==3&&z.push(new Nt(u,r,`filter array for operator "${r[0]}" must have 3 elements`));case"in":case"!in":r.length>=2&&(T=ai(r[1]),T!=="string"&&z.push(new Nt(`${u}[1]`,r[1],`string expected, ${T} found`)));for(let L=2;L<r.length;L++)T=ai(r[L]),_i(r[1])==="$type"?z=z.concat(ZA({key:`${u}[${L}]`,value:r[L],valueSpec:g.geometry_type,style:o.style,styleSpec:o.styleSpec})):T!=="string"&&T!=="number"&&T!=="boolean"&&z.push(new Nt(`${u}[${L}]`,r[L],`string, number, or boolean expected, ${T} found`));break;case"any":case"all":case"none":for(let L=1;L<r.length;L++)z=z.concat(Ga({key:`${u}[${L}]`,value:r[L],style:o.style,styleSpec:o.styleSpec}));break;case"has":case"!has":T=ai(r[1]),r.length!==2?z.push(new Nt(u,r,`filter array for "${r[0]}" operator must have 2 elements`)):T!=="string"&&z.push(new Nt(`${u}[1]`,r[1],`string expected, ${T} found`));break;case"within":T=ai(r[1]),r.length!==2?z.push(new Nt(u,r,`filter array for "${r[0]}" operator must have 2 elements`)):T!=="object"&&z.push(new Nt(`${u}[1]`,r[1],`object expected, ${T} found`))}return z}function ul(o,r){const u=o.key,g=o.validateSpec,T=o.style,z=o.styleSpec,L=o.value,q=o.objectKey,$=z[`${r}_${o.layerType}`];if(!$)return[];const Y=q.match(/^(.*)-transition$/);if(r==="paint"&&Y&&$[Y[1]]&&$[Y[1]].transition)return g({key:u,value:L,valueSpec:z.transition,style:T,styleSpec:z});const ne=o.valueSpec||$[q];if(!ne)return[new Nt(u,L,`unknown property "${q}"`)];let re;if(ai(L)==="string"&&Lo(ne)&&!ne.tokens&&(re=/^{([^}]+)}$/.exec(L)))return[new Nt(u,L,`"${q}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(re[1])} }\`.`)];const ue=[];return o.layerType==="symbol"&&(q==="text-field"&&T&&!T.glyphs&&ue.push(new Nt(u,L,'use of "text-field" requires a style "glyphs" property')),q==="text-font"&&Qi(qA(L))&&_i(L.type)==="identity"&&ue.push(new Nt(u,L,'"text-font" does not support identity functions'))),ue.concat(g({key:o.key,value:L,valueSpec:ne,style:T,styleSpec:z,expressionContext:"property",propertyType:r,propertyKey:q}))}function Ys(o){return ul(o,"paint")}function _A(o){return ul(o,"layout")}function ot(o){let r=[];const u=o.value,g=o.key,T=o.style,z=o.styleSpec;u.type||u.ref||r.push(new Nt(g,u,'either "type" or "ref" is required'));let L=_i(u.type);const q=_i(u.ref);if(u.id){const $=_i(u.id);for(let Y=0;Y<o.arrayIndex;Y++){const ne=T.layers[Y];_i(ne.id)===$&&r.push(new Nt(g,u.id,`duplicate layer id "${u.id}", previously used at line ${ne.id.__line__}`))}}if("ref"in u){let $;["type","source","source-layer","filter","layout"].forEach(Y=>{Y in u&&r.push(new Nt(g,u[Y],`"${Y}" is prohibited for ref layers`))}),T.layers.forEach(Y=>{_i(Y.id)===q&&($=Y)}),$?$.ref?r.push(new Nt(g,u.ref,"ref cannot reference another ref layer")):L=_i($.type):r.push(new Nt(g,u.ref,`ref layer "${q}" not found`))}else if(L!=="background")if(u.source){const $=T.sources&&T.sources[u.source],Y=$&&_i($.type);$?Y==="vector"&&L==="raster"?r.push(new Nt(g,u.source,`layer "${u.id}" requires a raster source`)):Y!=="raster-dem"&&L==="hillshade"?r.push(new Nt(g,u.source,`layer "${u.id}" requires a raster-dem source`)):Y==="raster"&&L!=="raster"?r.push(new Nt(g,u.source,`layer "${u.id}" requires a vector source`)):Y!=="vector"||u["source-layer"]?Y==="raster-dem"&&L!=="hillshade"?r.push(new Nt(g,u.source,"raster-dem source can only be used with layer type 'hillshade'.")):L!=="line"||!u.paint||!u.paint["line-gradient"]||Y==="geojson"&&$.lineMetrics||r.push(new Nt(g,u,`layer "${u.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):r.push(new Nt(g,u,`layer "${u.id}" must specify a "source-layer"`)):r.push(new Nt(g,u.source,`source "${u.source}" not found`))}else r.push(new Nt(g,u,'missing required property "source"'));return r=r.concat(Di({key:g,value:u,valueSpec:z.layer,style:o.style,styleSpec:o.styleSpec,validateSpec:o.validateSpec,objectElementValidators:{"*":()=>[],type:()=>o.validateSpec({key:`${g}.type`,value:u.type,valueSpec:z.layer.type,style:o.style,styleSpec:o.styleSpec,validateSpec:o.validateSpec,object:u,objectKey:"type"}),filter:No,layout:$=>Di({layer:u,key:$.key,value:$.value,style:$.style,styleSpec:$.styleSpec,validateSpec:$.validateSpec,objectElementValidators:{"*":Y=>_A(bA({layerType:L},Y))}}),paint:$=>Di({layer:u,key:$.key,value:$.value,style:$.style,styleSpec:$.styleSpec,validateSpec:$.validateSpec,objectElementValidators:{"*":Y=>Ys(bA({layerType:L},Y))}})}})),r}function vt(o){const r=o.value,u=o.key,g=ai(r);return g!=="string"?[new Nt(u,r,`string expected, ${g} found`)]:[]}const mt={promoteId:function({key:o,value:r}){if(ai(r)==="string")return vt({key:o,value:r});{const u=[];for(const g in r)u.push(...vt({key:`${o}.${g}`,value:r[g]}));return u}}};function An(o){const r=o.value,u=o.key,g=o.styleSpec,T=o.style,z=o.validateSpec;if(!r.type)return[new Nt(u,r,'"type" is required')];const L=_i(r.type);let q;switch(L){case"vector":case"raster":return q=Di({key:u,value:r,valueSpec:g[`source_${L.replace("-","_")}`],style:o.style,styleSpec:g,objectElementValidators:mt,validateSpec:z}),q;case"raster-dem":return q=function($){var Y;const ne=(Y=$.sourceName)!==null&&Y!==void 0?Y:"",re=$.value,ue=$.styleSpec,me=ue.source_raster_dem,ge=$.style;let Me=[];const Ie=ai(re);if(re===void 0)return Me;if(Ie!=="object")return Me.push(new Nt("source_raster_dem",re,`object expected, ${Ie} found`)),Me;const Re=_i(re.encoding)==="custom",et=["redFactor","greenFactor","blueFactor","baseShift"],Xe=$.value.encoding?`"${$.value.encoding}"`:"Default";for(const rt in re)!Re&&et.includes(rt)?Me.push(new Nt(rt,re[rt],`In "${ne}": "${rt}" is only valid when "encoding" is set to "custom". ${Xe} encoding found`)):me[rt]?Me=Me.concat($.validateSpec({key:rt,value:re[rt],valueSpec:me[rt],validateSpec:$.validateSpec,style:ge,styleSpec:ue})):Me.push(new Nt(rt,re[rt],`unknown property "${rt}"`));return Me}({sourceName:u,value:r,style:o.style,styleSpec:g,validateSpec:z}),q;case"geojson":if(q=Di({key:u,value:r,valueSpec:g.source_geojson,style:T,styleSpec:g,validateSpec:z,objectElementValidators:mt}),r.cluster)for(const $ in r.clusterProperties){const[Y,ne]=r.clusterProperties[$],re=typeof Y=="string"?[Y,["accumulated"],["get",$]]:Y;q.push(...Zr({key:`${u}.${$}.map`,value:ne,validateSpec:z,expressionContext:"cluster-map"})),q.push(...Zr({key:`${u}.${$}.reduce`,value:re,validateSpec:z,expressionContext:"cluster-reduce"}))}return q;case"video":return Di({key:u,value:r,valueSpec:g.source_video,style:T,validateSpec:z,styleSpec:g});case"image":return Di({key:u,value:r,valueSpec:g.source_image,style:T,validateSpec:z,styleSpec:g});case"canvas":return[new Nt(u,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return ZA({key:`${u}.type`,value:r.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:T,validateSpec:z,styleSpec:g})}}function Fn(o){const r=o.value,u=o.styleSpec,g=u.light,T=o.style;let z=[];const L=ai(r);if(r===void 0)return z;if(L!=="object")return z=z.concat([new Nt("light",r,`object expected, ${L} found`)]),z;for(const q in r){const $=q.match(/^(.*)-transition$/);z=z.concat($&&g[$[1]]&&g[$[1]].transition?o.validateSpec({key:q,value:r[q],valueSpec:u.transition,validateSpec:o.validateSpec,style:T,styleSpec:u}):g[q]?o.validateSpec({key:q,value:r[q],valueSpec:g[q],validateSpec:o.validateSpec,style:T,styleSpec:u}):[new Nt(q,r[q],`unknown property "${q}"`)])}return z}function wi(o){const r=o.value,u=o.styleSpec,g=u.terrain,T=o.style;let z=[];const L=ai(r);if(r===void 0)return z;if(L!=="object")return z=z.concat([new Nt("terrain",r,`object expected, ${L} found`)]),z;for(const q in r)z=z.concat(g[q]?o.validateSpec({key:q,value:r[q],valueSpec:g[q],validateSpec:o.validateSpec,style:T,styleSpec:u}):[new Nt(q,r[q],`unknown property "${q}"`)]);return z}function sr(o){let r=[];const u=o.value,g=o.key;if(Array.isArray(u)){const T=[],z=[];for(const L in u)u[L].id&&T.includes(u[L].id)&&r.push(new Nt(g,u,`all the sprites' ids must be unique, but ${u[L].id} is duplicated`)),T.push(u[L].id),u[L].url&&z.includes(u[L].url)&&r.push(new Nt(g,u,`all the sprites' URLs must be unique, but ${u[L].url} is duplicated`)),z.push(u[L].url),r=r.concat(Di({key:`${g}[${L}]`,value:u[L],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:o.validateSpec}));return r}return vt({key:g,value:u})}const Oi={"*":()=>[],array:co,boolean:function(o){const r=o.value,u=o.key,g=ai(r);return g!=="boolean"?[new Nt(u,r,`boolean expected, ${g} found`)]:[]},number:gA,color:function(o){const r=o.key,u=o.value,g=ai(u);return g!=="string"?[new Nt(r,u,`color expected, ${g} found`)]:ti.parse(String(u))?[]:[new Nt(r,u,`color expected, "${u}" found`)]},constants:GA,enum:ZA,filter:No,function:Fr,layer:ot,object:Di,source:An,light:Fn,terrain:wi,string:vt,formatted:function(o){return vt(o).length===0?[]:Zr(o)},resolvedImage:function(o){return vt(o).length===0?[]:Zr(o)},padding:function(o){const r=o.key,u=o.value;if(ai(u)==="array"){if(u.length<1||u.length>4)return[new Nt(r,u,`padding requires 1 to 4 values; ${u.length} values found`)];const g={type:"number"};let T=[];for(let z=0;z<u.length;z++)T=T.concat(o.validateSpec({key:`${r}[${z}]`,value:u[z],validateSpec:o.validateSpec,valueSpec:g}));return T}return gA({key:r,value:u,valueSpec:{}})},variableAnchorOffsetCollection:function(o){const r=o.key,u=o.value,g=ai(u),T=o.styleSpec;if(g!=="array"||u.length<1||u.length%2!=0)return[new Nt(r,u,"variableAnchorOffsetCollection requires a non-empty array of even length")];let z=[];for(let L=0;L<u.length;L+=2)z=z.concat(ZA({key:`${r}[${L}]`,value:u[L],valueSpec:T.layout_symbol["text-anchor"]})),z=z.concat(co({key:`${r}[${L+1}]`,value:u[L+1],valueSpec:{length:2,value:"number"},validateSpec:o.validateSpec,style:o.style,styleSpec:T}));return z},sprite:sr};function HA(o){const r=o.value,u=o.valueSpec,g=o.styleSpec;return o.validateSpec=HA,u.expression&&Qi(_i(r))?Fr(o):u.expression&&Hs(qA(r))?Zr(o):u.type&&Oi[u.type]?Oi[u.type](o):Di(bA({},o,{valueSpec:u.type?g[u.type]:u}))}function qa(o){const r=o.value,u=o.key,g=vt(o);return g.length||(r.indexOf("{fontstack}")===-1&&g.push(new Nt(u,r,'"glyphs" url must include a "{fontstack}" token')),r.indexOf("{range}")===-1&&g.push(new Nt(u,r,'"glyphs" url must include a "{range}" token'))),g}function er(o,r=pt){let u=[];return u=u.concat(HA({key:"",value:o,valueSpec:r.$root,styleSpec:r,style:o,validateSpec:HA,objectElementValidators:{glyphs:qa,"*":()=>[]}})),o.constants&&(u=u.concat(GA({key:"constants",value:o.constants,style:o,styleSpec:r,validateSpec:HA}))),MA(u)}function eA(o){return function(r){return o({...r,validateSpec:HA})}}function MA(o){return[].concat(o).sort((r,u)=>r.line-u.line)}function tA(o){return function(...r){return MA(o.apply(this,r))}}er.source=tA(eA(An)),er.sprite=tA(eA(sr)),er.glyphs=tA(eA(qa)),er.light=tA(eA(Fn)),er.terrain=tA(eA(wi)),er.layer=tA(eA(ot)),er.filter=tA(eA(No)),er.paintProperty=tA(eA(Ys)),er.layoutProperty=tA(eA(_A));const TA=er,Za=TA.light,Ei=TA.paintProperty,Vl=TA.layoutProperty;function ya(o,r){let u=!1;if(r&&r.length)for(const g of r)o.fire(new Jn(new Error(g.message))),u=!0;return u}class yA{constructor(r,u,g){const T=this.cells=[];if(r instanceof ArrayBuffer){this.arrayBuffer=r;const L=new Int32Array(this.arrayBuffer);r=L[0],this.d=(u=L[1])+2*(g=L[2]);for(let $=0;$<this.d*this.d;$++){const Y=L[3+$],ne=L[3+$+1];T.push(Y===ne?null:L.subarray(Y,ne))}const q=L[3+T.length+1];this.keys=L.subarray(L[3+T.length],q),this.bboxes=L.subarray(q),this.insert=this._insertReadonly}else{this.d=u+2*g;for(let L=0;L<this.d*this.d;L++)T.push([]);this.keys=[],this.bboxes=[]}this.n=u,this.extent=r,this.padding=g,this.scale=u/r,this.uid=0;const z=g/u*r;this.min=-z,this.max=r+z}insert(r,u,g,T,z){this._forEachCell(u,g,T,z,this._insertCell,this.uid++,void 0,void 0),this.keys.push(r),this.bboxes.push(u),this.bboxes.push(g),this.bboxes.push(T),this.bboxes.push(z)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(r,u,g,T,z,L){this.cells[z].push(L)}query(r,u,g,T,z){const L=this.min,q=this.max;if(r<=L&&u<=L&&q<=g&&q<=T&&!z)return Array.prototype.slice.call(this.keys);{const $=[];return this._forEachCell(r,u,g,T,this._queryCell,$,{},z),$}}_queryCell(r,u,g,T,z,L,q,$){const Y=this.cells[z];if(Y!==null){const ne=this.keys,re=this.bboxes;for(let ue=0;ue<Y.length;ue++){const me=Y[ue];if(q[me]===void 0){const ge=4*me;($?$(re[ge+0],re[ge+1],re[ge+2],re[ge+3]):r<=re[ge+2]&&u<=re[ge+3]&&g>=re[ge+0]&&T>=re[ge+1])?(q[me]=!0,L.push(ne[me])):q[me]=!1}}}}_forEachCell(r,u,g,T,z,L,q,$){const Y=this._convertToCellCoord(r),ne=this._convertToCellCoord(u),re=this._convertToCellCoord(g),ue=this._convertToCellCoord(T);for(let me=Y;me<=re;me++)for(let ge=ne;ge<=ue;ge++){const Me=this.d*ge+me;if((!$||$(this._convertFromCellCoord(me),this._convertFromCellCoord(ge),this._convertFromCellCoord(me+1),this._convertFromCellCoord(ge+1)))&&z.call(this,r,u,g,T,Me,L,q,$))return}}_convertFromCellCoord(r){return(r-this.padding)/this.scale}_convertToCellCoord(r){return Math.max(0,Math.min(this.d-1,Math.floor(r*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const r=this.cells,u=3+this.cells.length+1+1;let g=0;for(let L=0;L<this.cells.length;L++)g+=this.cells[L].length;const T=new Int32Array(u+g+this.keys.length+this.bboxes.length);T[0]=this.extent,T[1]=this.n,T[2]=this.padding;let z=u;for(let L=0;L<r.length;L++){const q=r[L];T[3+L]=z,T.set(q,z),z+=q.length}return T[3+r.length]=z,T.set(this.keys,z),z+=this.keys.length,T[3+r.length+1]=z,T.set(this.bboxes,z),z+=this.bboxes.length,T.buffer}static serialize(r,u){const g=r.toArrayBuffer();return u&&u.push(g),{buffer:g}}static deserialize(r){return new yA(r.buffer)}}const hs={};function on(o,r,u={}){if(hs[o])throw new Error(`${o} is already registered.`);Object.defineProperty(r,"_classRegistryKey",{value:o,writeable:!1}),hs[o]={klass:r,omit:u.omit||[],shallow:u.shallow||[]}}on("Object",Object),on("TransferableGridIndex",yA),on("Color",ti),on("Error",Error),on("AJAXError",xn),on("ResolvedImage",Er),on("StylePropertyFunction",js),on("StyleExpression",Ua,{omit:["_evaluator"]}),on("ZoomDependentExpression",Si),on("ZoomConstantExpression",Fo),on("CompoundExpression",fA,{omit:["_evaluate"]});for(const o in ls)ls[o]._classRegistryKey||on(`Expression_${o}`,ls[o]);function SA(o){return o&&typeof ArrayBuffer<"u"&&(o instanceof ArrayBuffer||o.constructor&&o.constructor.name==="ArrayBuffer")}function CA(o,r){if(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||o instanceof Blob)return o;if(SA(o)||Gt(o))return r&&r.push(o),o;if(ArrayBuffer.isView(o)){const u=o;return r&&r.push(u.buffer),u}if(o instanceof ImageData)return r&&r.push(o.data.buffer),o;if(Array.isArray(o)){const u=[];for(const g of o)u.push(CA(g,r));return u}if(typeof o=="object"){const u=o.constructor,g=u._classRegistryKey;if(!g)throw new Error("can't serialize object of unregistered class");if(!hs[g])throw new Error(`${g} is not registered.`);const T=u.serialize?u.serialize(o,r):{};if(u.serialize){if(r&&T===r[r.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const z in o){if(!o.hasOwnProperty(z)||hs[g].omit.indexOf(z)>=0)continue;const L=o[z];T[z]=hs[g].shallow.indexOf(z)>=0?L:CA(L,r)}o instanceof Error&&(T.message=o.message)}if(T.$name)throw new Error("$name property is reserved for worker serialization logic.");return g!=="Object"&&(T.$name=g),T}throw new Error("can't serialize object of type "+typeof o)}function vA(o){if(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||o instanceof Blob||SA(o)||Gt(o)||ArrayBuffer.isView(o)||o instanceof ImageData)return o;if(Array.isArray(o))return o.map(vA);if(typeof o=="object"){const r=o.$name||"Object";if(!hs[r])throw new Error(`can't deserialize unregistered class ${r}`);const{klass:u}=hs[r];if(!u)throw new Error(`can't deserialize unregistered class ${r}`);if(u.deserialize)return u.deserialize(o);const g=Object.create(u.prototype);for(const T of Object.keys(o)){if(T==="$name")continue;const z=o[T];g[T]=hs[r].shallow.indexOf(T)>=0?z:vA(z)}return g}throw new Error("can't deserialize object of type "+typeof o)}class va{constructor(){this.first=!0}update(r,u){const g=Math.floor(r);return this.first?(this.first=!1,this.lastIntegerZoom=g,this.lastIntegerZoomTime=0,this.lastZoom=r,this.lastFloorZoom=g,!0):(this.lastFloorZoom>g?(this.lastIntegerZoom=g+1,this.lastIntegerZoomTime=u):this.lastFloorZoom<g&&(this.lastIntegerZoom=g,this.lastIntegerZoomTime=u),r!==this.lastZoom&&(this.lastZoom=r,this.lastFloorZoom=g,!0))}}const Kt={"Latin-1 Supplement":o=>o>=128&&o<=255,Arabic:o=>o>=1536&&o<=1791,"Arabic Supplement":o=>o>=1872&&o<=1919,"Arabic Extended-A":o=>o>=2208&&o<=2303,"Hangul Jamo":o=>o>=4352&&o<=4607,"Unified Canadian Aboriginal Syllabics":o=>o>=5120&&o<=5759,Khmer:o=>o>=6016&&o<=6143,"Unified Canadian Aboriginal Syllabics Extended":o=>o>=6320&&o<=6399,"General Punctuation":o=>o>=8192&&o<=8303,"Letterlike Symbols":o=>o>=8448&&o<=8527,"Number Forms":o=>o>=8528&&o<=8591,"Miscellaneous Technical":o=>o>=8960&&o<=9215,"Control Pictures":o=>o>=9216&&o<=9279,"Optical Character Recognition":o=>o>=9280&&o<=9311,"Enclosed Alphanumerics":o=>o>=9312&&o<=9471,"Geometric Shapes":o=>o>=9632&&o<=9727,"Miscellaneous Symbols":o=>o>=9728&&o<=9983,"Miscellaneous Symbols and Arrows":o=>o>=11008&&o<=11263,"CJK Radicals Supplement":o=>o>=11904&&o<=12031,"Kangxi Radicals":o=>o>=12032&&o<=12255,"Ideographic Description Characters":o=>o>=12272&&o<=12287,"CJK Symbols and Punctuation":o=>o>=12288&&o<=12351,Hiragana:o=>o>=12352&&o<=12447,Katakana:o=>o>=12448&&o<=12543,Bopomofo:o=>o>=12544&&o<=12591,"Hangul Compatibility Jamo":o=>o>=12592&&o<=12687,Kanbun:o=>o>=12688&&o<=12703,"Bopomofo Extended":o=>o>=12704&&o<=12735,"CJK Strokes":o=>o>=12736&&o<=12783,"Katakana Phonetic Extensions":o=>o>=12784&&o<=12799,"Enclosed CJK Letters and Months":o=>o>=12800&&o<=13055,"CJK Compatibility":o=>o>=13056&&o<=13311,"CJK Unified Ideographs Extension A":o=>o>=13312&&o<=19903,"Yijing Hexagram Symbols":o=>o>=19904&&o<=19967,"CJK Unified Ideographs":o=>o>=19968&&o<=40959,"Yi Syllables":o=>o>=40960&&o<=42127,"Yi Radicals":o=>o>=42128&&o<=42191,"Hangul Jamo Extended-A":o=>o>=43360&&o<=43391,"Hangul Syllables":o=>o>=44032&&o<=55215,"Hangul Jamo Extended-B":o=>o>=55216&&o<=55295,"Private Use Area":o=>o>=57344&&o<=63743,"CJK Compatibility Ideographs":o=>o>=63744&&o<=64255,"Arabic Presentation Forms-A":o=>o>=64336&&o<=65023,"Vertical Forms":o=>o>=65040&&o<=65055,"CJK Compatibility Forms":o=>o>=65072&&o<=65103,"Small Form Variants":o=>o>=65104&&o<=65135,"Arabic Presentation Forms-B":o=>o>=65136&&o<=65279,"Halfwidth and Fullwidth Forms":o=>o>=65280&&o<=65519};function Vo(o){for(const r of o)if(ho(r.charCodeAt(0)))return!0;return!1}function Ha(o){for(const r of o)if(!Ds(r.charCodeAt(0)))return!1;return!0}function Ds(o){return!(Kt.Arabic(o)||Kt["Arabic Supplement"](o)||Kt["Arabic Extended-A"](o)||Kt["Arabic Presentation Forms-A"](o)||Kt["Arabic Presentation Forms-B"](o))}function ho(o){return!(o!==746&&o!==747&&(o<4352||!(Kt["Bopomofo Extended"](o)||Kt.Bopomofo(o)||Kt["CJK Compatibility Forms"](o)&&!(o>=65097&&o<=65103)||Kt["CJK Compatibility Ideographs"](o)||Kt["CJK Compatibility"](o)||Kt["CJK Radicals Supplement"](o)||Kt["CJK Strokes"](o)||!(!Kt["CJK Symbols and Punctuation"](o)||o>=12296&&o<=12305||o>=12308&&o<=12319||o===12336)||Kt["CJK Unified Ideographs Extension A"](o)||Kt["CJK Unified Ideographs"](o)||Kt["Enclosed CJK Letters and Months"](o)||Kt["Hangul Compatibility Jamo"](o)||Kt["Hangul Jamo Extended-A"](o)||Kt["Hangul Jamo Extended-B"](o)||Kt["Hangul Jamo"](o)||Kt["Hangul Syllables"](o)||Kt.Hiragana(o)||Kt["Ideographic Description Characters"](o)||Kt.Kanbun(o)||Kt["Kangxi Radicals"](o)||Kt["Katakana Phonetic Extensions"](o)||Kt.Katakana(o)&&o!==12540||!(!Kt["Halfwidth and Fullwidth Forms"](o)||o===65288||o===65289||o===65293||o>=65306&&o<=65310||o===65339||o===65341||o===65343||o>=65371&&o<=65503||o===65507||o>=65512&&o<=65519)||!(!Kt["Small Form Variants"](o)||o>=65112&&o<=65118||o>=65123&&o<=65126)||Kt["Unified Canadian Aboriginal Syllabics"](o)||Kt["Unified Canadian Aboriginal Syllabics Extended"](o)||Kt["Vertical Forms"](o)||Kt["Yijing Hexagram Symbols"](o)||Kt["Yi Syllables"](o)||Kt["Yi Radicals"](o))))}function $a(o){return!(ho(o)||function(r){return!!(Kt["Latin-1 Supplement"](r)&&(r===167||r===169||r===174||r===177||r===188||r===189||r===190||r===215||r===247)||Kt["General Punctuation"](r)&&(r===8214||r===8224||r===8225||r===8240||r===8241||r===8251||r===8252||r===8258||r===8263||r===8264||r===8265||r===8273)||Kt["Letterlike Symbols"](r)||Kt["Number Forms"](r)||Kt["Miscellaneous Technical"](r)&&(r>=8960&&r<=8967||r>=8972&&r<=8991||r>=8996&&r<=9e3||r===9003||r>=9085&&r<=9114||r>=9150&&r<=9165||r===9167||r>=9169&&r<=9179||r>=9186&&r<=9215)||Kt["Control Pictures"](r)&&r!==9251||Kt["Optical Character Recognition"](r)||Kt["Enclosed Alphanumerics"](r)||Kt["Geometric Shapes"](r)||Kt["Miscellaneous Symbols"](r)&&!(r>=9754&&r<=9759)||Kt["Miscellaneous Symbols and Arrows"](r)&&(r>=11026&&r<=11055||r>=11088&&r<=11097||r>=11192&&r<=11243)||Kt["CJK Symbols and Punctuation"](r)||Kt.Katakana(r)||Kt["Private Use Area"](r)||Kt["CJK Compatibility Forms"](r)||Kt["Small Form Variants"](r)||Kt["Halfwidth and Fullwidth Forms"](r)||r===8734||r===8756||r===8757||r>=9984&&r<=10087||r>=10102&&r<=10131||r===65532||r===65533)}(o))}function fo(o){return o>=1424&&o<=2303||Kt["Arabic Presentation Forms-A"](o)||Kt["Arabic Presentation Forms-B"](o)}function Ps(o,r){return!(!r&&fo(o)||o>=2304&&o<=3583||o>=3840&&o<=4255||Kt.Khmer(o))}function or(o){for(const r of o)if(fo(r.charCodeAt(0)))return!0;return!1}const cl="deferred",hl="loading",fl="loaded";let po=null,Or="unavailable",$A=null;const Uo=function(o){o&&typeof o=="string"&&o.indexOf("NetworkError")>-1&&(Or="error"),po&&po(o)};function ja(){Qo.fire(new un("pluginStateChange",{pluginStatus:Or,pluginURL:$A}))}const Qo=new uA,Wa=function(){return Or},ii=function(){if(Or!==cl||!$A)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Or=hl,ja(),$A&&Ii({url:$A},o=>{o?Uo(o):(Or=fl,ja())})},Ni={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Or===fl||Ni.applyArabicShaping!=null,isLoading:()=>Or===hl,setState(o){if(!Tt())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");Or=o.pluginStatus,$A=o.pluginURL},isParsed(){if(!Tt())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return Ni.applyArabicShaping!=null&&Ni.processBidirectionalText!=null&&Ni.processStyledBidirectionalText!=null},getPluginURL(){if(!Tt())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return $A}};class Pi{constructor(r,u){this.zoom=r,u?(this.now=u.now,this.fadeDuration=u.fadeDuration,this.zoomHistory=u.zoomHistory,this.transition=u.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new va,this.transition={})}isSupportedScript(r){return function(u,g){for(const T of u)if(!Ps(T.charCodeAt(0),g))return!1;return!0}(r,Ni.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const r=this.zoom,u=r-Math.floor(r),g=this.crossFadingFactor();return r>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:u+(1-u)*g}:{fromScale:.5,toScale:1,t:1-(1-g)*u}}}class Vr{constructor(r,u){this.property=r,this.value=u,this.expression=function(g,T){if(Qi(g))return new js(g,T);if(Hs(g)){const z=Kr(g,T);if(z.result==="error")throw new Error(z.value.map(L=>`${L.key}: ${L.message}`).join(", "));return z.value}{let z=g;return T.type==="color"&&typeof g=="string"?z=ti.parse(g):T.type!=="padding"||typeof g!="number"&&!Array.isArray(g)?T.type==="variableAnchorOffsetCollection"&&Array.isArray(g)&&(z=kn.parse(g)):z=Xt.parse(g),{kind:"constant",evaluate:()=>z}}}(u===void 0?r.specification.default:u,r.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(r,u,g){return this.property.possiblyEvaluate(this,r,u,g)}}class Tn{constructor(r){this.property=r,this.value=new Vr(r,void 0)}transitioned(r,u){return new Ya(this.property,this.value,u,It({},r.transition,this.transition),r.now)}untransitioned(){return new Ya(this.property,this.value,null,{},0)}}class IA{constructor(r){this._properties=r,this._values=Object.create(r.defaultTransitionablePropertyValues)}getValue(r){return bt(this._values[r].value.value)}setValue(r,u){Object.prototype.hasOwnProperty.call(this._values,r)||(this._values[r]=new Tn(this._values[r].property)),this._values[r].value=new Vr(this._values[r].property,u===null?void 0:bt(u))}getTransition(r){return bt(this._values[r].transition)}setTransition(r,u){Object.prototype.hasOwnProperty.call(this._values,r)||(this._values[r]=new Tn(this._values[r].property)),this._values[r].transition=bt(u)||void 0}serialize(){const r={};for(const u of Object.keys(this._values)){const g=this.getValue(u);g!==void 0&&(r[u]=g);const T=this.getTransition(u);T!==void 0&&(r[`${u}-transition`]=T)}return r}transitioned(r,u){const g=new fs(this._properties);for(const T of Object.keys(this._values))g._values[T]=this._values[T].transitioned(r,u._values[T]);return g}untransitioned(){const r=new fs(this._properties);for(const u of Object.keys(this._values))r._values[u]=this._values[u].untransitioned();return r}}class Ya{constructor(r,u,g,T,z){this.property=r,this.value=u,this.begin=z+T.delay||0,this.end=this.begin+T.duration||0,r.specification.transition&&(T.delay||T.duration)&&(this.prior=g)}possiblyEvaluate(r,u,g){const T=r.now||0,z=this.value.possiblyEvaluate(r,u,g),L=this.prior;if(L){if(T>this.end)return this.prior=null,z;if(this.value.isDataDriven())return this.prior=null,z;if(T<this.begin)return L.possiblyEvaluate(r,u,g);{const q=(T-this.begin)/(this.end-this.begin);return this.property.interpolate(L.possiblyEvaluate(r,u,g),z,function($){if($<=0)return 0;if($>=1)return 1;const Y=$*$,ne=Y*$;return 4*($<.5?ne:3*($-Y)+ne-.75)}(q))}}return z}}class fs{constructor(r){this._properties=r,this._values=Object.create(r.defaultTransitioningPropertyValues)}possiblyEvaluate(r,u,g){const T=new Hr(this._properties);for(const z of Object.keys(this._values))T._values[z]=this._values[z].possiblyEvaluate(r,u,g);return T}hasTransition(){for(const r of Object.keys(this._values))if(this._values[r].prior)return!0;return!1}}class xa{constructor(r){this._properties=r,this._values=Object.create(r.defaultPropertyValues)}hasValue(r){return this._values[r].value!==void 0}getValue(r){return bt(this._values[r].value)}setValue(r,u){this._values[r]=new Vr(this._values[r].property,u===null?void 0:bt(u))}serialize(){const r={};for(const u of Object.keys(this._values)){const g=this.getValue(u);g!==void 0&&(r[u]=g)}return r}possiblyEvaluate(r,u,g){const T=new Hr(this._properties);for(const z of Object.keys(this._values))T._values[z]=this._values[z].possiblyEvaluate(r,u,g);return T}}class pr{constructor(r,u,g){this.property=r,this.value=u,this.parameters=g}isConstant(){return this.value.kind==="constant"}constantOr(r){return this.value.kind==="constant"?this.value.value:r}evaluate(r,u,g,T){return this.property.evaluate(this.value,this.parameters,r,u,g,T)}}class Hr{constructor(r){this._properties=r,this._values=Object.create(r.defaultPossiblyEvaluatedValues)}get(r){return this._values[r]}}class ct{constructor(r){this.specification=r}possiblyEvaluate(r,u){if(r.isDataDriven())throw new Error("Value should not be data driven");return r.expression.evaluate(u)}interpolate(r,u,g){const T=fr[this.specification.type];return T?T(r,u,g):r}}class wt{constructor(r,u){this.specification=r,this.overrides=u}possiblyEvaluate(r,u,g,T){return new pr(this,r.expression.kind==="constant"||r.expression.kind==="camera"?{kind:"constant",value:r.expression.evaluate(u,null,{},g,T)}:r.expression,u)}interpolate(r,u,g){if(r.value.kind!=="constant"||u.value.kind!=="constant")return r;if(r.value.value===void 0||u.value.value===void 0)return new pr(this,{kind:"constant",value:void 0},r.parameters);const T=fr[this.specification.type];if(T){const z=T(r.value.value,u.value.value,g);return new pr(this,{kind:"constant",value:z},r.parameters)}return r}evaluate(r,u,g,T,z,L){return r.kind==="constant"?r.value:r.evaluate(u,g,T,z,L)}}class jA extends wt{possiblyEvaluate(r,u,g,T){if(r.value===void 0)return new pr(this,{kind:"constant",value:void 0},u);if(r.expression.kind==="constant"){const z=r.expression.evaluate(u,null,{},g,T),L=r.property.specification.type==="resolvedImage"&&typeof z!="string"?z.name:z,q=this._calculate(L,L,L,u);return new pr(this,{kind:"constant",value:q},u)}if(r.expression.kind==="camera"){const z=this._calculate(r.expression.evaluate({zoom:u.zoom-1}),r.expression.evaluate({zoom:u.zoom}),r.expression.evaluate({zoom:u.zoom+1}),u);return new pr(this,{kind:"constant",value:z},u)}return new pr(this,r.expression,u)}evaluate(r,u,g,T,z,L){if(r.kind==="source"){const q=r.evaluate(u,g,T,z,L);return this._calculate(q,q,q,u)}return r.kind==="composite"?this._calculate(r.evaluate({zoom:Math.floor(u.zoom)-1},g,T),r.evaluate({zoom:Math.floor(u.zoom)},g,T),r.evaluate({zoom:Math.floor(u.zoom)+1},g,T),u):r.value}_calculate(r,u,g,T){return T.zoom>T.zoomHistory.lastIntegerZoom?{from:r,to:u}:{from:g,to:u}}interpolate(r){return r}}class Go{constructor(r){this.specification=r}possiblyEvaluate(r,u,g,T){if(r.value!==void 0){if(r.expression.kind==="constant"){const z=r.expression.evaluate(u,null,{},g,T);return this._calculate(z,z,z,u)}return this._calculate(r.expression.evaluate(new Pi(Math.floor(u.zoom-1),u)),r.expression.evaluate(new Pi(Math.floor(u.zoom),u)),r.expression.evaluate(new Pi(Math.floor(u.zoom+1),u)),u)}}_calculate(r,u,g,T){return T.zoom>T.zoomHistory.lastIntegerZoom?{from:r,to:u}:{from:g,to:u}}interpolate(r){return r}}class qo{constructor(r){this.specification=r}possiblyEvaluate(r,u,g,T){return!!r.expression.evaluate(u,null,{},g,T)}interpolate(){return!1}}class Mi{constructor(r){this.properties=r,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const u in r){const g=r[u];g.specification.overridable&&this.overridableProperties.push(u);const T=this.defaultPropertyValues[u]=new Vr(g,void 0),z=this.defaultTransitionablePropertyValues[u]=new Tn(g);this.defaultTransitioningPropertyValues[u]=z.untransitioned(),this.defaultPossiblyEvaluatedValues[u]=T.possiblyEvaluate({})}}}on("DataDrivenProperty",wt),on("DataConstantProperty",ct),on("CrossFadedDataDrivenProperty",jA),on("CrossFadedProperty",Go),on("ColorRampProperty",qo);const WA="-transition";class Vi extends uA{constructor(r,u){if(super(),this.id=r.id,this.type=r.type,this._featureFilter={filter:()=>!0,needGeometry:!1},r.type!=="custom"&&(this.metadata=r.metadata,this.minzoom=r.minzoom,this.maxzoom=r.maxzoom,r.type!=="background"&&(this.source=r.source,this.sourceLayer=r["source-layer"],this.filter=r.filter),u.layout&&(this._unevaluatedLayout=new xa(u.layout)),u.paint)){this._transitionablePaint=new IA(u.paint);for(const g in r.paint)this.setPaintProperty(g,r.paint[g],{validate:!1});for(const g in r.layout)this.setLayoutProperty(g,r.layout[g],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Hr(u.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(r){return r==="visibility"?this.visibility:this._unevaluatedLayout.getValue(r)}setLayoutProperty(r,u,g={}){u!=null&&this._validate(Vl,`layers.${this.id}.layout.${r}`,r,u,g)||(r!=="visibility"?this._unevaluatedLayout.setValue(r,u):this.visibility=u)}getPaintProperty(r){return r.endsWith(WA)?this._transitionablePaint.getTransition(r.slice(0,-11)):this._transitionablePaint.getValue(r)}setPaintProperty(r,u,g={}){if(u!=null&&this._validate(Ei,`layers.${this.id}.paint.${r}`,r,u,g))return!1;if(r.endsWith(WA))return this._transitionablePaint.setTransition(r.slice(0,-11),u||void 0),!1;{const T=this._transitionablePaint._values[r],z=T.property.specification["property-type"]==="cross-faded-data-driven",L=T.value.isDataDriven(),q=T.value;this._transitionablePaint.setValue(r,u),this._handleSpecialPaintPropertyUpdate(r);const $=this._transitionablePaint._values[r].value;return $.isDataDriven()||L||z||this._handleOverridablePaintPropertyUpdate(r,q,$)}}_handleSpecialPaintPropertyUpdate(r){}_handleOverridablePaintPropertyUpdate(r,u,g){return!1}isHidden(r){return!!(this.minzoom&&r<this.minzoom)||!!(this.maxzoom&&r>=this.maxzoom)||this.visibility==="none"}updateTransitions(r){this._transitioningPaint=this._transitionablePaint.transitioned(r,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(r,u){r.getCrossfadeParameters&&(this._crossfadeParameters=r.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(r,void 0,u)),this.paint=this._transitioningPaint.possiblyEvaluate(r,void 0,u)}serialize(){const r={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(r.layout=r.layout||{},r.layout.visibility=this.visibility),At(r,(u,g)=>!(u===void 0||g==="layout"&&!Object.keys(u).length||g==="paint"&&!Object.keys(u).length))}_validate(r,u,g,T,z={}){return(!z||z.validate!==!1)&&ya(this,r.call(TA,{key:u,layerType:this.type,objectKey:g,value:T,styleSpec:pt,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const r in this.paint._values){const u=this.paint.get(r);if(u instanceof pr&&Lo(u.property.specification)&&(u.value.kind==="source"||u.value.kind==="composite")&&u.value.isStateDependent)return!0}return!1}}const p={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class y{constructor(r,u){this._structArray=r,this._pos1=u*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class v{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(r,u){return r._trim(),u&&(r.isTransferred=!0,u.push(r.arrayBuffer)),{length:r.length,arrayBuffer:r.arrayBuffer}}static deserialize(r){const u=Object.create(this.prototype);return u.arrayBuffer=r.arrayBuffer,u.length=r.length,u.capacity=r.arrayBuffer.byteLength/u.bytesPerElement,u._refreshViews(),u}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(r){this.reserve(r),this.length=r}reserve(r){if(r>this.capacity){this.capacity=Math.max(r,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const u=this.uint8;this._refreshViews(),u&&this.uint8.set(u)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function x(o,r=1){let u=0,g=0;return{members:o.map(T=>{const z=p[T.type].BYTES_PER_ELEMENT,L=u=R(u,Math.max(r,z)),q=T.components||1;return g=Math.max(g,z),u+=z*q,{name:T.name,type:T.type,components:q,offset:L}}),size:R(u,Math.max(g,r)),alignment:r}}function R(o,r){return Math.ceil(o/r)*r}class V extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,u){const g=this.length;return this.resize(g+1),this.emplace(g,r,u)}emplace(r,u,g){const T=2*r;return this.int16[T+0]=u,this.int16[T+1]=g,r}}V.prototype.bytesPerElement=4,on("StructArrayLayout2i4",V);class N extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,u,g){const T=this.length;return this.resize(T+1),this.emplace(T,r,u,g)}emplace(r,u,g,T){const z=3*r;return this.int16[z+0]=u,this.int16[z+1]=g,this.int16[z+2]=T,r}}N.prototype.bytesPerElement=6,on("StructArrayLayout3i6",N);class H extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,u,g,T){const z=this.length;return this.resize(z+1),this.emplace(z,r,u,g,T)}emplace(r,u,g,T,z){const L=4*r;return this.int16[L+0]=u,this.int16[L+1]=g,this.int16[L+2]=T,this.int16[L+3]=z,r}}H.prototype.bytesPerElement=8,on("StructArrayLayout4i8",H);class te extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,u,g,T,z,L){const q=this.length;return this.resize(q+1),this.emplace(q,r,u,g,T,z,L)}emplace(r,u,g,T,z,L,q){const $=6*r;return this.int16[$+0]=u,this.int16[$+1]=g,this.int16[$+2]=T,this.int16[$+3]=z,this.int16[$+4]=L,this.int16[$+5]=q,r}}te.prototype.bytesPerElement=12,on("StructArrayLayout2i4i12",te);class le extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,u,g,T,z,L){const q=this.length;return this.resize(q+1),this.emplace(q,r,u,g,T,z,L)}emplace(r,u,g,T,z,L,q){const $=4*r,Y=8*r;return this.int16[$+0]=u,this.int16[$+1]=g,this.uint8[Y+4]=T,this.uint8[Y+5]=z,this.uint8[Y+6]=L,this.uint8[Y+7]=q,r}}le.prototype.bytesPerElement=8,on("StructArrayLayout2i4ub8",le);class pe extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,u){const g=this.length;return this.resize(g+1),this.emplace(g,r,u)}emplace(r,u,g){const T=2*r;return this.float32[T+0]=u,this.float32[T+1]=g,r}}pe.prototype.bytesPerElement=8,on("StructArrayLayout2f8",pe);class Ge extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,u,g,T,z,L,q,$,Y,ne){const re=this.length;return this.resize(re+1),this.emplace(re,r,u,g,T,z,L,q,$,Y,ne)}emplace(r,u,g,T,z,L,q,$,Y,ne,re){const ue=10*r;return this.uint16[ue+0]=u,this.uint16[ue+1]=g,this.uint16[ue+2]=T,this.uint16[ue+3]=z,this.uint16[ue+4]=L,this.uint16[ue+5]=q,this.uint16[ue+6]=$,this.uint16[ue+7]=Y,this.uint16[ue+8]=ne,this.uint16[ue+9]=re,r}}Ge.prototype.bytesPerElement=20,on("StructArrayLayout10ui20",Ge);class Ee extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,u,g,T,z,L,q,$,Y,ne,re,ue){const me=this.length;return this.resize(me+1),this.emplace(me,r,u,g,T,z,L,q,$,Y,ne,re,ue)}emplace(r,u,g,T,z,L,q,$,Y,ne,re,ue,me){const ge=12*r;return this.int16[ge+0]=u,this.int16[ge+1]=g,this.int16[ge+2]=T,this.int16[ge+3]=z,this.uint16[ge+4]=L,this.uint16[ge+5]=q,this.uint16[ge+6]=$,this.uint16[ge+7]=Y,this.int16[ge+8]=ne,this.int16[ge+9]=re,this.int16[ge+10]=ue,this.int16[ge+11]=me,r}}Ee.prototype.bytesPerElement=24,on("StructArrayLayout4i4ui4i24",Ee);class Se extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,u,g){const T=this.length;return this.resize(T+1),this.emplace(T,r,u,g)}emplace(r,u,g,T){const z=3*r;return this.float32[z+0]=u,this.float32[z+1]=g,this.float32[z+2]=T,r}}Se.prototype.bytesPerElement=12,on("StructArrayLayout3f12",Se);class C extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(r){const u=this.length;return this.resize(u+1),this.emplace(u,r)}emplace(r,u){return this.uint32[1*r+0]=u,r}}C.prototype.bytesPerElement=4,on("StructArrayLayout1ul4",C);class i extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,u,g,T,z,L,q,$,Y){const ne=this.length;return this.resize(ne+1),this.emplace(ne,r,u,g,T,z,L,q,$,Y)}emplace(r,u,g,T,z,L,q,$,Y,ne){const re=10*r,ue=5*r;return this.int16[re+0]=u,this.int16[re+1]=g,this.int16[re+2]=T,this.int16[re+3]=z,this.int16[re+4]=L,this.int16[re+5]=q,this.uint32[ue+3]=$,this.uint16[re+8]=Y,this.uint16[re+9]=ne,r}}i.prototype.bytesPerElement=20,on("StructArrayLayout6i1ul2ui20",i);class h extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,u,g,T,z,L){const q=this.length;return this.resize(q+1),this.emplace(q,r,u,g,T,z,L)}emplace(r,u,g,T,z,L,q){const $=6*r;return this.int16[$+0]=u,this.int16[$+1]=g,this.int16[$+2]=T,this.int16[$+3]=z,this.int16[$+4]=L,this.int16[$+5]=q,r}}h.prototype.bytesPerElement=12,on("StructArrayLayout2i2i2i12",h);class b extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,u,g,T,z){const L=this.length;return this.resize(L+1),this.emplace(L,r,u,g,T,z)}emplace(r,u,g,T,z,L){const q=4*r,$=8*r;return this.float32[q+0]=u,this.float32[q+1]=g,this.float32[q+2]=T,this.int16[$+6]=z,this.int16[$+7]=L,r}}b.prototype.bytesPerElement=16,on("StructArrayLayout2f1f2i16",b);class E extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,u,g,T){const z=this.length;return this.resize(z+1),this.emplace(z,r,u,g,T)}emplace(r,u,g,T,z){const L=12*r,q=3*r;return this.uint8[L+0]=u,this.uint8[L+1]=g,this.float32[q+1]=T,this.float32[q+2]=z,r}}E.prototype.bytesPerElement=12,on("StructArrayLayout2ub2f12",E);class B extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,u,g){const T=this.length;return this.resize(T+1),this.emplace(T,r,u,g)}emplace(r,u,g,T){const z=3*r;return this.uint16[z+0]=u,this.uint16[z+1]=g,this.uint16[z+2]=T,r}}B.prototype.bytesPerElement=6,on("StructArrayLayout3ui6",B);class F extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,u,g,T,z,L,q,$,Y,ne,re,ue,me,ge,Me,Ie,Re){const et=this.length;return this.resize(et+1),this.emplace(et,r,u,g,T,z,L,q,$,Y,ne,re,ue,me,ge,Me,Ie,Re)}emplace(r,u,g,T,z,L,q,$,Y,ne,re,ue,me,ge,Me,Ie,Re,et){const Xe=24*r,rt=12*r,ft=48*r;return this.int16[Xe+0]=u,this.int16[Xe+1]=g,this.uint16[Xe+2]=T,this.uint16[Xe+3]=z,this.uint32[rt+2]=L,this.uint32[rt+3]=q,this.uint32[rt+4]=$,this.uint16[Xe+10]=Y,this.uint16[Xe+11]=ne,this.uint16[Xe+12]=re,this.float32[rt+7]=ue,this.float32[rt+8]=me,this.uint8[ft+36]=ge,this.uint8[ft+37]=Me,this.uint8[ft+38]=Ie,this.uint32[rt+10]=Re,this.int16[Xe+22]=et,r}}F.prototype.bytesPerElement=48,on("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",F);class A extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,u,g,T,z,L,q,$,Y,ne,re,ue,me,ge,Me,Ie,Re,et,Xe,rt,ft,Et,ln,wn,rn,jt,qt,dn){const Wt=this.length;return this.resize(Wt+1),this.emplace(Wt,r,u,g,T,z,L,q,$,Y,ne,re,ue,me,ge,Me,Ie,Re,et,Xe,rt,ft,Et,ln,wn,rn,jt,qt,dn)}emplace(r,u,g,T,z,L,q,$,Y,ne,re,ue,me,ge,Me,Ie,Re,et,Xe,rt,ft,Et,ln,wn,rn,jt,qt,dn,Wt){const Rt=32*r,mn=16*r;return this.int16[Rt+0]=u,this.int16[Rt+1]=g,this.int16[Rt+2]=T,this.int16[Rt+3]=z,this.int16[Rt+4]=L,this.int16[Rt+5]=q,this.int16[Rt+6]=$,this.int16[Rt+7]=Y,this.uint16[Rt+8]=ne,this.uint16[Rt+9]=re,this.uint16[Rt+10]=ue,this.uint16[Rt+11]=me,this.uint16[Rt+12]=ge,this.uint16[Rt+13]=Me,this.uint16[Rt+14]=Ie,this.uint16[Rt+15]=Re,this.uint16[Rt+16]=et,this.uint16[Rt+17]=Xe,this.uint16[Rt+18]=rt,this.uint16[Rt+19]=ft,this.uint16[Rt+20]=Et,this.uint16[Rt+21]=ln,this.uint16[Rt+22]=wn,this.uint32[mn+12]=rn,this.float32[mn+13]=jt,this.float32[mn+14]=qt,this.uint16[Rt+30]=dn,this.uint16[Rt+31]=Wt,r}}A.prototype.bytesPerElement=64,on("StructArrayLayout8i15ui1ul2f2ui64",A);class s extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r){const u=this.length;return this.resize(u+1),this.emplace(u,r)}emplace(r,u){return this.float32[1*r+0]=u,r}}s.prototype.bytesPerElement=4,on("StructArrayLayout1f4",s);class l extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,u,g){const T=this.length;return this.resize(T+1),this.emplace(T,r,u,g)}emplace(r,u,g,T){const z=3*r;return this.uint16[6*r+0]=u,this.float32[z+1]=g,this.float32[z+2]=T,r}}l.prototype.bytesPerElement=12,on("StructArrayLayout1ui2f12",l);class f extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,u,g){const T=this.length;return this.resize(T+1),this.emplace(T,r,u,g)}emplace(r,u,g,T){const z=4*r;return this.uint32[2*r+0]=u,this.uint16[z+2]=g,this.uint16[z+3]=T,r}}f.prototype.bytesPerElement=8,on("StructArrayLayout1ul2ui8",f);class m extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,u){const g=this.length;return this.resize(g+1),this.emplace(g,r,u)}emplace(r,u,g){const T=2*r;return this.uint16[T+0]=u,this.uint16[T+1]=g,r}}m.prototype.bytesPerElement=4,on("StructArrayLayout2ui4",m);class k extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r){const u=this.length;return this.resize(u+1),this.emplace(u,r)}emplace(r,u){return this.uint16[1*r+0]=u,r}}k.prototype.bytesPerElement=2,on("StructArrayLayout1ui2",k);class I extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,u,g,T){const z=this.length;return this.resize(z+1),this.emplace(z,r,u,g,T)}emplace(r,u,g,T,z){const L=4*r;return this.float32[L+0]=u,this.float32[L+1]=g,this.float32[L+2]=T,this.float32[L+3]=z,r}}I.prototype.bytesPerElement=16,on("StructArrayLayout4f16",I);class D extends y{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new J(this.anchorPointX,this.anchorPointY)}}D.prototype.size=20;class Q extends i{get(r){return new D(this,r)}}on("CollisionBoxArray",Q);class Z extends y{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(r){this._structArray.uint8[this._pos1+37]=r}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(r){this._structArray.uint8[this._pos1+38]=r}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(r){this._structArray.uint32[this._pos4+10]=r}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Z.prototype.size=48;class X extends F{get(r){return new Z(this,r)}}on("PlacedSymbolArray",X);class ie extends y{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(r){this._structArray.uint32[this._pos4+12]=r}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}ie.prototype.size=64;class Ae extends A{get(r){return new ie(this,r)}}on("SymbolInstanceArray",Ae);class ce extends s{getoffsetX(r){return this.float32[1*r+0]}}on("GlyphOffsetArray",ce);class fe extends N{getx(r){return this.int16[3*r+0]}gety(r){return this.int16[3*r+1]}gettileUnitDistanceFromAnchor(r){return this.int16[3*r+2]}}on("SymbolLineVertexArray",fe);class ve extends y{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}ve.prototype.size=12;class Ne extends l{get(r){return new ve(this,r)}}on("TextAnchorOffsetArray",Ne);class qe extends y{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}qe.prototype.size=8;class Pe extends f{get(r){return new qe(this,r)}}on("FeatureIndexArray",Pe);class Ve extends V{}class Ue extends V{}class Mt extends V{}class ht extends te{}class _t extends le{}class gt extends pe{}class Mn extends Ge{}class cn extends Ee{}class Yt extends Se{}class tn extends C{}class fn extends h{}class an extends E{}class Wn extends B{}class bn extends m{}const Nn=x([{name:"a_pos",components:2,type:"Int16"}],4),{members:zi}=Nn;class bi{constructor(r=[]){this.segments=r}prepareSegment(r,u,g,T){let z=this.segments[this.segments.length-1];return r>bi.MAX_VERTEX_ARRAY_LENGTH&&De(`Max vertices per segment is ${bi.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${r}`),(!z||z.vertexLength+r>bi.MAX_VERTEX_ARRAY_LENGTH||z.sortKey!==T)&&(z={vertexOffset:u.length,primitiveOffset:g.length,vertexLength:0,primitiveLength:0},T!==void 0&&(z.sortKey=T),this.segments.push(z)),z}get(){return this.segments}destroy(){for(const r of this.segments)for(const u in r.vaos)r.vaos[u].destroy()}static simpleSegment(r,u,g,T){return new bi([{vertexOffset:r,primitiveOffset:u,vertexLength:g,primitiveLength:T,vaos:{},sortKey:0}])}}function mo(o,r){return 256*(o=xt(Math.floor(o),0,255))+xt(Math.floor(r),0,255)}bi.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,on("SegmentVector",bi);const Zo=x([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var go={exports:{}},dl={exports:{}};dl.exports=function(o,r){var u,g,T,z,L,q,$,Y;for(g=o.length-(u=3&o.length),T=r,L=3432918353,q=461845907,Y=0;Y<g;)$=255&o.charCodeAt(Y)|(255&o.charCodeAt(++Y))<<8|(255&o.charCodeAt(++Y))<<16|(255&o.charCodeAt(++Y))<<24,++Y,T=27492+(65535&(z=5*(65535&(T=(T^=$=(65535&($=($=(65535&$)*L+((($>>>16)*L&65535)<<16)&4294967295)<<15|$>>>17))*q+((($>>>16)*q&65535)<<16)&4294967295)<<13|T>>>19))+((5*(T>>>16)&65535)<<16)&4294967295))+((58964+(z>>>16)&65535)<<16);switch($=0,u){case 3:$^=(255&o.charCodeAt(Y+2))<<16;case 2:$^=(255&o.charCodeAt(Y+1))<<8;case 1:T^=$=(65535&($=($=(65535&($^=255&o.charCodeAt(Y)))*L+((($>>>16)*L&65535)<<16)&4294967295)<<15|$>>>17))*q+((($>>>16)*q&65535)<<16)&4294967295}return T^=o.length,T=2246822507*(65535&(T^=T>>>16))+((2246822507*(T>>>16)&65535)<<16)&4294967295,T=3266489909*(65535&(T^=T>>>13))+((3266489909*(T>>>16)&65535)<<16)&4294967295,(T^=T>>>16)>>>0};var pl=dl.exports,Ui={exports:{}};Ui.exports=function(o,r){for(var u,g=o.length,T=r^g,z=0;g>=4;)u=1540483477*(65535&(u=255&o.charCodeAt(z)|(255&o.charCodeAt(++z))<<8|(255&o.charCodeAt(++z))<<16|(255&o.charCodeAt(++z))<<24))+((1540483477*(u>>>16)&65535)<<16),T=1540483477*(65535&T)+((1540483477*(T>>>16)&65535)<<16)^(u=1540483477*(65535&(u^=u>>>24))+((1540483477*(u>>>16)&65535)<<16)),g-=4,++z;switch(g){case 3:T^=(255&o.charCodeAt(z+2))<<16;case 2:T^=(255&o.charCodeAt(z+1))<<8;case 1:T=1540483477*(65535&(T^=255&o.charCodeAt(z)))+((1540483477*(T>>>16)&65535)<<16)}return T=1540483477*(65535&(T^=T>>>13))+((1540483477*(T>>>16)&65535)<<16),(T^=T>>>15)>>>0};var nA=pl,BA=Ui.exports;go.exports=nA,go.exports.murmur3=nA,go.exports.murmur2=BA;var DA=O(go.exports);class vr{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(r,u,g,T){this.ids.push(Nr(r)),this.positions.push(u,g,T)}getPositions(r){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const u=Nr(r);let g=0,T=this.ids.length-1;for(;g<T;){const L=g+T>>1;this.ids[L]>=u?T=L:g=L+1}const z=[];for(;this.ids[g]===u;)z.push({index:this.positions[3*g],start:this.positions[3*g+1],end:this.positions[3*g+2]}),g++;return z}static serialize(r,u){const g=new Float64Array(r.ids),T=new Uint32Array(r.positions);return $r(g,T,0,g.length-1),u&&u.push(g.buffer,T.buffer),{ids:g,positions:T}}static deserialize(r){const u=new vr;return u.ids=r.ids,u.positions=r.positions,u.indexed=!0,u}}function Nr(o){const r=+o;return!isNaN(r)&&r<=Number.MAX_SAFE_INTEGER?r:DA(String(o))}function $r(o,r,u,g){for(;u<g;){const T=o[u+g>>1];let z=u-1,L=g+1;for(;;){do z++;while(o[z]<T);do L--;while(o[L]>T);if(z>=L)break;Sr(o,z,L),Sr(r,3*z,3*L),Sr(r,3*z+1,3*L+1),Sr(r,3*z+2,3*L+2)}L-u<g-L?($r(o,r,u,L),u=L+1):($r(o,r,L+1,g),g=L)}}function Sr(o,r,u){const g=o[r];o[r]=o[u],o[u]=g}on("FeaturePositionMap",vr);class Ur{constructor(r,u){this.gl=r.gl,this.location=u}}class Ul extends Ur{constructor(r,u){super(r,u),this.current=0}set(r){this.current!==r&&(this.current=r,this.gl.uniform1f(this.location,r))}}class J0 extends Ur{constructor(r,u){super(r,u),this.current=[0,0,0,0]}set(r){r[0]===this.current[0]&&r[1]===this.current[1]&&r[2]===this.current[2]&&r[3]===this.current[3]||(this.current=r,this.gl.uniform4f(this.location,r[0],r[1],r[2],r[3]))}}class ec extends Ur{constructor(r,u){super(r,u),this.current=ti.transparent}set(r){r.r===this.current.r&&r.g===this.current.g&&r.b===this.current.b&&r.a===this.current.a||(this.current=r,this.gl.uniform4f(this.location,r.r,r.g,r.b,r.a))}}const eh=new Float32Array(16);function ou(o){return[mo(255*o.r,255*o.g),mo(255*o.b,255*o.a)]}class Ho{constructor(r,u,g){this.value=r,this.uniformNames=u.map(T=>`u_${T}`),this.type=g}setUniform(r,u,g){r.set(g.constantOr(this.value))}getBinding(r,u,g){return this.type==="color"?new ec(r,u):new Ul(r,u)}}class _o{constructor(r,u){this.uniformNames=u.map(g=>`u_${g}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(r,u){this.pixelRatioFrom=u.pixelRatio,this.pixelRatioTo=r.pixelRatio,this.patternFrom=u.tlbr,this.patternTo=r.tlbr}setUniform(r,u,g,T){const z=T==="u_pattern_to"?this.patternTo:T==="u_pattern_from"?this.patternFrom:T==="u_pixel_ratio_to"?this.pixelRatioTo:T==="u_pixel_ratio_from"?this.pixelRatioFrom:null;z&&r.set(z)}getBinding(r,u,g){return g.substr(0,9)==="u_pattern"?new J0(r,u):new Ul(r,u)}}class yo{constructor(r,u,g,T){this.expression=r,this.type=g,this.maxValue=0,this.paintVertexAttributes=u.map(z=>({name:`a_${z}`,type:"Float32",components:g==="color"?2:1,offset:0})),this.paintVertexArray=new T}populatePaintArray(r,u,g,T,z){const L=this.paintVertexArray.length,q=this.expression.evaluate(new Pi(0),u,{},T,[],z);this.paintVertexArray.resize(r),this._setPaintValue(L,r,q)}updatePaintArray(r,u,g,T){const z=this.expression.evaluate({zoom:0},g,T);this._setPaintValue(r,u,z)}_setPaintValue(r,u,g){if(this.type==="color"){const T=ou(g);for(let z=r;z<u;z++)this.paintVertexArray.emplace(z,T[0],T[1])}else{for(let T=r;T<u;T++)this.paintVertexArray.emplace(T,g);this.maxValue=Math.max(this.maxValue,Math.abs(g))}}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Xs{constructor(r,u,g,T,z,L){this.expression=r,this.uniformNames=u.map(q=>`u_${q}_t`),this.type=g,this.useIntegerZoom=T,this.zoom=z,this.maxValue=0,this.paintVertexAttributes=u.map(q=>({name:`a_${q}`,type:"Float32",components:g==="color"?4:2,offset:0})),this.paintVertexArray=new L}populatePaintArray(r,u,g,T,z){const L=this.expression.evaluate(new Pi(this.zoom),u,{},T,[],z),q=this.expression.evaluate(new Pi(this.zoom+1),u,{},T,[],z),$=this.paintVertexArray.length;this.paintVertexArray.resize(r),this._setPaintValue($,r,L,q)}updatePaintArray(r,u,g,T){const z=this.expression.evaluate({zoom:this.zoom},g,T),L=this.expression.evaluate({zoom:this.zoom+1},g,T);this._setPaintValue(r,u,z,L)}_setPaintValue(r,u,g,T){if(this.type==="color"){const z=ou(g),L=ou(T);for(let q=r;q<u;q++)this.paintVertexArray.emplace(q,z[0],z[1],L[0],L[1])}else{for(let z=r;z<u;z++)this.paintVertexArray.emplace(z,g,T);this.maxValue=Math.max(this.maxValue,Math.abs(g),Math.abs(T))}}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(r,u){const g=this.useIntegerZoom?Math.floor(u.zoom):u.zoom,T=xt(this.expression.interpolationFactor(g,this.zoom,this.zoom+1),0,1);r.set(T)}getBinding(r,u,g){return new Ul(r,u)}}class $o{constructor(r,u,g,T,z,L){this.expression=r,this.type=u,this.useIntegerZoom=g,this.zoom=T,this.layerId=L,this.zoomInPaintVertexArray=new z,this.zoomOutPaintVertexArray=new z}populatePaintArray(r,u,g){const T=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(r),this.zoomOutPaintVertexArray.resize(r),this._setPaintValues(T,r,u.patterns&&u.patterns[this.layerId],g)}updatePaintArray(r,u,g,T,z){this._setPaintValues(r,u,g.patterns&&g.patterns[this.layerId],z)}_setPaintValues(r,u,g,T){if(!T||!g)return;const{min:z,mid:L,max:q}=g,$=T[z],Y=T[L],ne=T[q];if($&&Y&&ne)for(let re=r;re<u;re++)this.zoomInPaintVertexArray.emplace(re,Y.tl[0],Y.tl[1],Y.br[0],Y.br[1],$.tl[0],$.tl[1],$.br[0],$.br[1],Y.pixelRatio,$.pixelRatio),this.zoomOutPaintVertexArray.emplace(re,Y.tl[0],Y.tl[1],Y.br[0],Y.br[1],ne.tl[0],ne.tl[1],ne.br[0],ne.br[1],Y.pixelRatio,ne.pixelRatio)}upload(r){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=r.createVertexBuffer(this.zoomInPaintVertexArray,Zo.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=r.createVertexBuffer(this.zoomOutPaintVertexArray,Zo.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class ml{constructor(r,u,g){this.binders={},this._buffers=[];const T=[];for(const z in r.paint._values){if(!g(z))continue;const L=r.paint.get(z);if(!(L instanceof pr&&Lo(L.property.specification)))continue;const q=zm(z,r.type),$=L.value,Y=L.property.specification.type,ne=L.property.useIntegerZoom,re=L.property.specification["property-type"],ue=re==="cross-faded"||re==="cross-faded-data-driven";if($.kind==="constant")this.binders[z]=ue?new _o($.value,q):new Ho($.value,q,Y),T.push(`/u_${z}`);else if($.kind==="source"||ue){const me=tc(z,Y,"source");this.binders[z]=ue?new $o($,Y,ne,u,me,r.id):new yo($,q,Y,me),T.push(`/a_${z}`)}else{const me=tc(z,Y,"composite");this.binders[z]=new Xs($,q,Y,ne,u,me),T.push(`/z_${z}`)}}this.cacheKey=T.sort().join("")}getMaxValue(r){const u=this.binders[r];return u instanceof yo||u instanceof Xs?u.maxValue:0}populatePaintArrays(r,u,g,T,z){for(const L in this.binders){const q=this.binders[L];(q instanceof yo||q instanceof Xs||q instanceof $o)&&q.populatePaintArray(r,u,g,T,z)}}setConstantPatternPositions(r,u){for(const g in this.binders){const T=this.binders[g];T instanceof _o&&T.setConstantPatternPositions(r,u)}}updatePaintArrays(r,u,g,T,z){let L=!1;for(const q in r){const $=u.getPositions(q);for(const Y of $){const ne=g.feature(Y.index);for(const re in this.binders){const ue=this.binders[re];if((ue instanceof yo||ue instanceof Xs||ue instanceof $o)&&ue.expression.isStateDependent===!0){const me=T.paint.get(re);ue.expression=me.value,ue.updatePaintArray(Y.start,Y.end,ne,r[q],z),L=!0}}}}return L}defines(){const r=[];for(const u in this.binders){const g=this.binders[u];(g instanceof Ho||g instanceof _o)&&r.push(...g.uniformNames.map(T=>`#define HAS_UNIFORM_${T}`))}return r}getBinderAttributes(){const r=[];for(const u in this.binders){const g=this.binders[u];if(g instanceof yo||g instanceof Xs)for(let T=0;T<g.paintVertexAttributes.length;T++)r.push(g.paintVertexAttributes[T].name);else if(g instanceof $o)for(let T=0;T<Zo.members.length;T++)r.push(Zo.members[T].name)}return r}getBinderUniforms(){const r=[];for(const u in this.binders){const g=this.binders[u];if(g instanceof Ho||g instanceof _o||g instanceof Xs)for(const T of g.uniformNames)r.push(T)}return r}getPaintVertexBuffers(){return this._buffers}getUniforms(r,u){const g=[];for(const T in this.binders){const z=this.binders[T];if(z instanceof Ho||z instanceof _o||z instanceof Xs){for(const L of z.uniformNames)if(u[L]){const q=z.getBinding(r,u[L],L);g.push({name:L,property:T,binding:q})}}}return g}setUniforms(r,u,g,T){for(const{name:z,property:L,binding:q}of u)this.binders[L].setUniform(q,T,g.get(L),z)}updatePaintBuffers(r){this._buffers=[];for(const u in this.binders){const g=this.binders[u];if(r&&g instanceof $o){const T=r.fromScale===2?g.zoomInPaintVertexBuffer:g.zoomOutPaintVertexBuffer;T&&this._buffers.push(T)}else(g instanceof yo||g instanceof Xs)&&g.paintVertexBuffer&&this._buffers.push(g.paintVertexBuffer)}}upload(r){for(const u in this.binders){const g=this.binders[u];(g instanceof yo||g instanceof Xs||g instanceof $o)&&g.upload(r)}this.updatePaintBuffers()}destroy(){for(const r in this.binders){const u=this.binders[r];(u instanceof yo||u instanceof Xs||u instanceof $o)&&u.destroy()}}}class wa{constructor(r,u,g=()=>!0){this.programConfigurations={};for(const T of r)this.programConfigurations[T.id]=new ml(T,u,g);this.needsUpload=!1,this._featureMap=new vr,this._bufferOffset=0}populatePaintArrays(r,u,g,T,z,L){for(const q in this.programConfigurations)this.programConfigurations[q].populatePaintArrays(r,u,T,z,L);u.id!==void 0&&this._featureMap.add(u.id,g,this._bufferOffset,r),this._bufferOffset=r,this.needsUpload=!0}updatePaintArrays(r,u,g,T){for(const z of g)this.needsUpload=this.programConfigurations[z.id].updatePaintArrays(r,this._featureMap,u,z,T)||this.needsUpload}get(r){return this.programConfigurations[r]}upload(r){if(this.needsUpload){for(const u in this.programConfigurations)this.programConfigurations[u].upload(r);this.needsUpload=!1}}destroy(){for(const r in this.programConfigurations)this.programConfigurations[r].destroy()}}function zm(o,r){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[o]||[o.replace(`${r}-`,"").replace(/-/g,"_")]}function tc(o,r,u){const g={color:{source:pe,composite:I},number:{source:s,composite:pe}},T=function(z){return{"line-pattern":{source:Mn,composite:Mn},"fill-pattern":{source:Mn,composite:Mn},"fill-extrusion-pattern":{source:Mn,composite:Mn}}[z]}(o);return T&&T[u]||g[r][u]}on("ConstantBinder",Ho),on("CrossFadedConstantBinder",_o),on("SourceExpressionBinder",yo),on("CrossFadedCompositeBinder",$o),on("CompositeExpressionBinder",Xs),on("ProgramConfiguration",ml,{omit:["_buffers"]}),on("ProgramConfigurationSet",wa);const Qr=8192,th=Math.pow(2,14)-1,Qf=-th-1;function au(o){const r=Qr/o.extent,u=o.loadGeometry();for(let g=0;g<u.length;g++){const T=u[g];for(let z=0;z<T.length;z++){const L=T[z],q=Math.round(L.x*r),$=Math.round(L.y*r);L.x=xt(q,Qf,th),L.y=xt($,Qf,th),(q<L.x||q>L.x+1||$<L.y||$>L.y+1)&&De("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return u}function Ql(o,r){return{type:o.type,id:o.id,properties:o.properties,geometry:r?au(o):[]}}function Ru(o,r,u,g,T){o.emplaceBack(2*r+(g+1)/2,2*u+(T+1)/2)}class nh{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(u=>u.id),this.index=r.index,this.hasPattern=!1,this.layoutVertexArray=new Ue,this.indexArray=new Wn,this.segments=new bi,this.programConfigurations=new wa(r.layers,r.zoom),this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(r,u,g){const T=this.layers[0],z=[];let L=null,q=!1;T.type==="circle"&&(L=T.layout.get("circle-sort-key"),q=!L.isConstant());for(const{feature:$,id:Y,index:ne,sourceLayerIndex:re}of r){const ue=this.layers[0]._featureFilter.needGeometry,me=Ql($,ue);if(!this.layers[0]._featureFilter.filter(new Pi(this.zoom),me,g))continue;const ge=q?L.evaluate(me,{},g):void 0,Me={id:Y,properties:$.properties,type:$.type,sourceLayerIndex:re,index:ne,geometry:ue?me.geometry:au($),patterns:{},sortKey:ge};z.push(Me)}q&&z.sort(($,Y)=>$.sortKey-Y.sortKey);for(const $ of z){const{geometry:Y,index:ne,sourceLayerIndex:re}=$,ue=r[ne].feature;this.addFeature($,Y,ne,g),u.featureIndex.insert(ue,Y,ne,re,this.index)}}update(r,u,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,u,this.stateDependentLayers,g)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,zi),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(r,u,g,T){for(const z of u)for(const L of z){const q=L.x,$=L.y;if(q<0||q>=Qr||$<0||$>=Qr)continue;const Y=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,r.sortKey),ne=Y.vertexLength;Ru(this.layoutVertexArray,q,$,-1,-1),Ru(this.layoutVertexArray,q,$,1,-1),Ru(this.layoutVertexArray,q,$,1,1),Ru(this.layoutVertexArray,q,$,-1,1),this.indexArray.emplaceBack(ne,ne+1,ne+2),this.indexArray.emplaceBack(ne,ne+3,ne+2),Y.vertexLength+=4,Y.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,g,{},T)}}function nc(o,r){for(let u=0;u<o.length;u++)if(lu(r,o[u]))return!0;for(let u=0;u<r.length;u++)if(lu(o,r[u]))return!0;return!!Fu(o,r)}function Gf(o,r,u){return!!lu(o,r)||!!ic(r,o,u)}function ih(o,r){if(o.length===1)return Zf(r,o[0]);for(let u=0;u<r.length;u++){const g=r[u];for(let T=0;T<g.length;T++)if(lu(o,g[T]))return!0}for(let u=0;u<o.length;u++)if(Zf(r,o[u]))return!0;for(let u=0;u<r.length;u++)if(Fu(o,r[u]))return!0;return!1}function qf(o,r,u){if(o.length>1){if(Fu(o,r))return!0;for(let g=0;g<r.length;g++)if(ic(r[g],o,u))return!0}for(let g=0;g<o.length;g++)if(ic(o[g],r,u))return!0;return!1}function Fu(o,r){if(o.length===0||r.length===0)return!1;for(let u=0;u<o.length-1;u++){const g=o[u],T=o[u+1];for(let z=0;z<r.length-1;z++)if(Lm(g,T,r[z],r[z+1]))return!0}return!1}function Lm(o,r,u,g){return at(o,u,g)!==at(r,u,g)&&at(o,r,u)!==at(o,r,g)}function ic(o,r,u){const g=u*u;if(r.length===1)return o.distSqr(r[0])<g;for(let T=1;T<r.length;T++)if(rh(o,r[T-1],r[T])<g)return!0;return!1}function rh(o,r,u){const g=r.distSqr(u);if(g===0)return o.distSqr(r);const T=((o.x-r.x)*(u.x-r.x)+(o.y-r.y)*(u.y-r.y))/g;return o.distSqr(T<0?r:T>1?u:u.sub(r)._mult(T)._add(r))}function Zf(o,r){let u,g,T,z=!1;for(let L=0;L<o.length;L++){u=o[L];for(let q=0,$=u.length-1;q<u.length;$=q++)g=u[q],T=u[$],g.y>r.y!=T.y>r.y&&r.x<(T.x-g.x)*(r.y-g.y)/(T.y-g.y)+g.x&&(z=!z)}return z}function lu(o,r){let u=!1;for(let g=0,T=o.length-1;g<o.length;T=g++){const z=o[g],L=o[T];z.y>r.y!=L.y>r.y&&r.x<(L.x-z.x)*(r.y-z.y)/(L.y-z.y)+z.x&&(u=!u)}return u}function Rm(o,r,u){const g=u[0],T=u[2];if(o.x<g.x&&r.x<g.x||o.x>T.x&&r.x>T.x||o.y<g.y&&r.y<g.y||o.y>T.y&&r.y>T.y)return!1;const z=at(o,r,u[0]);return z!==at(o,r,u[1])||z!==at(o,r,u[2])||z!==at(o,r,u[3])}function uu(o,r,u){const g=r.paint.get(o).value;return g.kind==="constant"?g.value:u.programConfigurations.get(r.id).getMaxValue(o)}function e0(o){return Math.sqrt(o[0]*o[0]+o[1]*o[1])}function Ou(o,r,u,g,T){if(!r[0]&&!r[1])return o;const z=J.convert(r)._mult(T);u==="viewport"&&z._rotate(-g);const L=[];for(let q=0;q<o.length;q++)L.push(o[q].sub(z));return L}let Hf,rc;on("CircleBucket",nh,{omit:["layers"]});var yi={get paint(){return rc=rc||new Mi({"circle-radius":new wt(pt.paint_circle["circle-radius"]),"circle-color":new wt(pt.paint_circle["circle-color"]),"circle-blur":new wt(pt.paint_circle["circle-blur"]),"circle-opacity":new wt(pt.paint_circle["circle-opacity"]),"circle-translate":new ct(pt.paint_circle["circle-translate"]),"circle-translate-anchor":new ct(pt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new ct(pt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new ct(pt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new wt(pt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new wt(pt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new wt(pt.paint_circle["circle-stroke-opacity"])})},get layout(){return Hf=Hf||new Mi({"circle-sort-key":new wt(pt.layout_circle["circle-sort-key"])})}},ds=1e-6,Nu=typeof Float32Array<"u"?Float32Array:Array;function cu(o){return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}function Ah(o,r,u){var g=r[0],T=r[1],z=r[2],L=r[3],q=r[4],$=r[5],Y=r[6],ne=r[7],re=r[8],ue=r[9],me=r[10],ge=r[11],Me=r[12],Ie=r[13],Re=r[14],et=r[15],Xe=u[0],rt=u[1],ft=u[2],Et=u[3];return o[0]=Xe*g+rt*q+ft*re+Et*Me,o[1]=Xe*T+rt*$+ft*ue+Et*Ie,o[2]=Xe*z+rt*Y+ft*me+Et*Re,o[3]=Xe*L+rt*ne+ft*ge+Et*et,o[4]=(Xe=u[4])*g+(rt=u[5])*q+(ft=u[6])*re+(Et=u[7])*Me,o[5]=Xe*T+rt*$+ft*ue+Et*Ie,o[6]=Xe*z+rt*Y+ft*me+Et*Re,o[7]=Xe*L+rt*ne+ft*ge+Et*et,o[8]=(Xe=u[8])*g+(rt=u[9])*q+(ft=u[10])*re+(Et=u[11])*Me,o[9]=Xe*T+rt*$+ft*ue+Et*Ie,o[10]=Xe*z+rt*Y+ft*me+Et*Re,o[11]=Xe*L+rt*ne+ft*ge+Et*et,o[12]=(Xe=u[12])*g+(rt=u[13])*q+(ft=u[14])*re+(Et=u[15])*Me,o[13]=Xe*T+rt*$+ft*ue+Et*Ie,o[14]=Xe*z+rt*Y+ft*me+Et*Re,o[15]=Xe*L+rt*ne+ft*ge+Et*et,o}Math.hypot||(Math.hypot=function(){for(var o=0,r=arguments.length;r--;)o+=arguments[r]*arguments[r];return Math.sqrt(o)});var t0,Fm=Ah;function zs(o,r,u){var g=r[0],T=r[1],z=r[2],L=r[3];return o[0]=u[0]*g+u[4]*T+u[8]*z+u[12]*L,o[1]=u[1]*g+u[5]*T+u[9]*z+u[13]*L,o[2]=u[2]*g+u[6]*T+u[10]*z+u[14]*L,o[3]=u[3]*g+u[7]*T+u[11]*z+u[15]*L,o}t0=new Nu(4),Nu!=Float32Array&&(t0[0]=0,t0[1]=0,t0[2]=0,t0[3]=0);class Om extends Vi{constructor(r){super(r,yi)}createBucket(r){return new nh(r)}queryRadius(r){const u=r;return uu("circle-radius",this,u)+uu("circle-stroke-width",this,u)+e0(this.paint.get("circle-translate"))}queryIntersectsFeature(r,u,g,T,z,L,q,$){const Y=Ou(r,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),L.angle,q),ne=this.paint.get("circle-radius").evaluate(u,g)+this.paint.get("circle-stroke-width").evaluate(u,g),re=this.paint.get("circle-pitch-alignment")==="map",ue=re?Y:function(ge,Me){return ge.map(Ie=>n0(Ie,Me))}(Y,$),me=re?ne*q:ne;for(const ge of T)for(const Me of ge){const Ie=re?Me:n0(Me,$);let Re=me;const et=zs([],[Me.x,Me.y,0,1],$);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Re*=et[3]/L.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Re*=L.cameraToCenterDistance/et[3]),Gf(ue,Ie,Re))return!0}return!1}}function n0(o,r){const u=zs([],[o.x,o.y,0,1],r);return new J(u[0]/u[3],u[1]/u[3])}class Ac extends nh{}let sh;on("HeatmapBucket",Ac,{omit:["layers"]});var $f={get paint(){return sh=sh||new Mi({"heatmap-radius":new wt(pt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new wt(pt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new ct(pt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new qo(pt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new ct(pt.paint_heatmap["heatmap-opacity"])})}};function Ls(o,{width:r,height:u},g,T){if(T){if(T instanceof Uint8ClampedArray)T=new Uint8Array(T.buffer);else if(T.length!==r*u*g)throw new RangeError(`mismatched image size. expected: ${T.length} but got: ${r*u*g}`)}else T=new Uint8Array(r*u*g);return o.width=r,o.height=u,o.data=T,o}function gl(o,{width:r,height:u},g){if(r===o.width&&u===o.height)return;const T=Ls({},{width:r,height:u},g);i0(o,T,{x:0,y:0},{x:0,y:0},{width:Math.min(o.width,r),height:Math.min(o.height,u)},g),o.width=r,o.height=u,o.data=T.data}function i0(o,r,u,g,T,z){if(T.width===0||T.height===0)return r;if(T.width>o.width||T.height>o.height||u.x>o.width-T.width||u.y>o.height-T.height)throw new RangeError("out of range source coordinates for image copy");if(T.width>r.width||T.height>r.height||g.x>r.width-T.width||g.y>r.height-T.height)throw new RangeError("out of range destination coordinates for image copy");const L=o.data,q=r.data;if(L===q)throw new Error("srcData equals dstData, so image is already copied");for(let $=0;$<T.height;$++){const Y=((u.y+$)*o.width+u.x)*z,ne=((g.y+$)*r.width+g.x)*z;for(let re=0;re<T.width*z;re++)q[ne+re]=L[Y+re]}return r}class Vu{constructor(r,u){Ls(this,r,1,u)}resize(r){gl(this,r,1)}clone(){return new Vu({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(r,u,g,T,z){i0(r,u,g,T,z,1)}}class ps{constructor(r,u){Ls(this,r,4,u)}resize(r){gl(this,r,4)}replace(r,u){u?this.data.set(r):this.data=r instanceof Uint8ClampedArray?new Uint8Array(r.buffer):r}clone(){return new ps({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(r,u,g,T,z){i0(r,u,g,T,z,4)}}function oh(o){const r={},u=o.resolution||256,g=o.clips?o.clips.length:1,T=o.image||new ps({width:u,height:g});if(Math.log(u)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${u}`);const z=(L,q,$)=>{r[o.evaluationKey]=$;const Y=o.expression.evaluate(r);T.data[L+q+0]=Math.floor(255*Y.r/Y.a),T.data[L+q+1]=Math.floor(255*Y.g/Y.a),T.data[L+q+2]=Math.floor(255*Y.b/Y.a),T.data[L+q+3]=Math.floor(255*Y.a)};if(o.clips)for(let L=0,q=0;L<g;++L,q+=4*u)for(let $=0,Y=0;$<u;$++,Y+=4){const ne=$/(u-1),{start:re,end:ue}=o.clips[L];z(q,Y,re*(1-ne)+ue*ne)}else for(let L=0,q=0;L<u;L++,q+=4)z(0,q,L/(u-1));return T}on("AlphaImage",Vu),on("RGBAImage",ps);class ah extends Vi{createBucket(r){return new Ac(r)}constructor(r){super(r,$f),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(r){r==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=oh({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let lh;var uh={get paint(){return lh=lh||new Mi({"hillshade-illumination-direction":new ct(pt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new ct(pt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new ct(pt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new ct(pt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new ct(pt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new ct(pt.paint_hillshade["hillshade-accent-color"])})}};class ch extends Vi{constructor(r){super(r,uh)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const Gl=x([{name:"a_pos",components:2,type:"Int16"}],4),{members:Nm}=Gl;var Xa={exports:{}};function r0(o,r,u){u=u||2;var g,T,z,L,q,$,Y,ne=r&&r.length,re=ne?r[0]*u:o.length,ue=hh(o,0,re,u,!0),me=[];if(!ue||ue.next===ue.prev)return me;if(ne&&(ue=function(Me,Ie,Re,et){var Xe,rt,ft,Et=[];for(Xe=0,rt=Ie.length;Xe<rt;Xe++)(ft=hh(Me,Ie[Xe]*et,Xe<rt-1?Ie[Xe+1]*et:Me.length,et,!1))===ft.next&&(ft.steiner=!0),Et.push(Ka(ft));for(Et.sort(Qm),Xe=0;Xe<Et.length;Xe++)Re=Yf(Et[Xe],Re);return Re}(o,r,ue,u)),o.length>80*u){g=z=o[0],T=L=o[1];for(var ge=u;ge<re;ge+=u)(q=o[ge])<g&&(g=q),($=o[ge+1])<T&&(T=$),q>z&&(z=q),$>L&&(L=$);Y=(Y=Math.max(z-g,L-T))!==0?32767/Y:0}return A0(ue,me,u,g,T,Y,0),me}function hh(o,r,u,g,T){var z,L;if(T===ac(o,r,u,g)>0)for(z=r;z<u;z+=g)L=Gu(z,o[z],o[z+1],L);else for(z=u-g;z>=r;z-=g)L=Gu(z,o[z],o[z+1],L);return L&&yl(L,L.next)&&(o0(L),L=L.next),L}function _l(o,r){if(!o)return o;r||(r=o);var u,g=o;do if(u=!1,g.steiner||!yl(g,g.next)&&xr(g.prev,g,g.next)!==0)g=g.next;else{if(o0(g),(g=r=g.prev)===g.next)break;u=!0}while(u||g!==r);return r}function A0(o,r,u,g,T,z,L){if(o){!L&&z&&function(ne,re,ue,me){var ge=ne;do ge.z===0&&(ge.z=ms(ge.x,ge.y,re,ue,me)),ge.prevZ=ge.prev,ge.nextZ=ge.next,ge=ge.next;while(ge!==ne);ge.prevZ.nextZ=null,ge.prevZ=null,function(Me){var Ie,Re,et,Xe,rt,ft,Et,ln,wn=1;do{for(Re=Me,Me=null,rt=null,ft=0;Re;){for(ft++,et=Re,Et=0,Ie=0;Ie<wn&&(Et++,et=et.nextZ);Ie++);for(ln=wn;Et>0||ln>0&&et;)Et!==0&&(ln===0||!et||Re.z<=et.z)?(Xe=Re,Re=Re.nextZ,Et--):(Xe=et,et=et.nextZ,ln--),rt?rt.nextZ=Xe:Me=Xe,Xe.prevZ=rt,rt=Xe;Re=et}rt.nextZ=null,wn*=2}while(ft>1)}(ge)}(o,g,T,z);for(var q,$,Y=o;o.prev!==o.next;)if(q=o.prev,$=o.next,z?Um(o,g,T,z):Vm(o))r.push(q.i/u|0),r.push(o.i/u|0),r.push($.i/u|0),o0(o),o=$.next,Y=$.next;else if((o=$)===Y){L?L===1?A0(o=jf(_l(o),r,u),r,u,g,T,z,2):L===2&&Wf(o,r,u,g,T,z):A0(_l(o),r,u,g,T,z,1);break}}}function Vm(o){var r=o.prev,u=o,g=o.next;if(xr(r,u,g)>=0)return!1;for(var T=r.x,z=u.x,L=g.x,q=r.y,$=u.y,Y=g.y,ne=T<z?T<L?T:L:z<L?z:L,re=q<$?q<Y?q:Y:$<Y?$:Y,ue=T>z?T>L?T:L:z>L?z:L,me=q>$?q>Y?q:Y:$>Y?$:Y,ge=g.next;ge!==r;){if(ge.x>=ne&&ge.x<=ue&&ge.y>=re&&ge.y<=me&&Uu(T,q,z,$,L,Y,ge.x,ge.y)&&xr(ge.prev,ge,ge.next)>=0)return!1;ge=ge.next}return!0}function Um(o,r,u,g){var T=o.prev,z=o,L=o.next;if(xr(T,z,L)>=0)return!1;for(var q=T.x,$=z.x,Y=L.x,ne=T.y,re=z.y,ue=L.y,me=q<$?q<Y?q:Y:$<Y?$:Y,ge=ne<re?ne<ue?ne:ue:re<ue?re:ue,Me=q>$?q>Y?q:Y:$>Y?$:Y,Ie=ne>re?ne>ue?ne:ue:re>ue?re:ue,Re=ms(me,ge,r,u,g),et=ms(Me,Ie,r,u,g),Xe=o.prevZ,rt=o.nextZ;Xe&&Xe.z>=Re&&rt&&rt.z<=et;){if(Xe.x>=me&&Xe.x<=Me&&Xe.y>=ge&&Xe.y<=Ie&&Xe!==T&&Xe!==L&&Uu(q,ne,$,re,Y,ue,Xe.x,Xe.y)&&xr(Xe.prev,Xe,Xe.next)>=0||(Xe=Xe.prevZ,rt.x>=me&&rt.x<=Me&&rt.y>=ge&&rt.y<=Ie&&rt!==T&&rt!==L&&Uu(q,ne,$,re,Y,ue,rt.x,rt.y)&&xr(rt.prev,rt,rt.next)>=0))return!1;rt=rt.nextZ}for(;Xe&&Xe.z>=Re;){if(Xe.x>=me&&Xe.x<=Me&&Xe.y>=ge&&Xe.y<=Ie&&Xe!==T&&Xe!==L&&Uu(q,ne,$,re,Y,ue,Xe.x,Xe.y)&&xr(Xe.prev,Xe,Xe.next)>=0)return!1;Xe=Xe.prevZ}for(;rt&&rt.z<=et;){if(rt.x>=me&&rt.x<=Me&&rt.y>=ge&&rt.y<=Ie&&rt!==T&&rt!==L&&Uu(q,ne,$,re,Y,ue,rt.x,rt.y)&&xr(rt.prev,rt,rt.next)>=0)return!1;rt=rt.nextZ}return!0}function jf(o,r,u){var g=o;do{var T=g.prev,z=g.next.next;!yl(T,z)&&fh(T,g,g.next,z)&&Qu(T,z)&&Qu(z,T)&&(r.push(T.i/u|0),r.push(g.i/u|0),r.push(z.i/u|0),o0(g),o0(g.next),g=o=z),g=g.next}while(g!==o);return _l(g)}function Wf(o,r,u,g,T,z){var L=o;do{for(var q=L.next.next;q!==L.prev;){if(L.i!==q.i&&Gm(L,q)){var $=hu(L,q);return L=_l(L,L.next),$=_l($,$.next),A0(L,r,u,g,T,z,0),void A0($,r,u,g,T,z,0)}q=q.next}L=L.next}while(L!==o)}function Qm(o,r){return o.x-r.x}function Yf(o,r){var u=function(T,z){var L,q=z,$=T.x,Y=T.y,ne=-1/0;do{if(Y<=q.y&&Y>=q.next.y&&q.next.y!==q.y){var re=q.x+(Y-q.y)*(q.next.x-q.x)/(q.next.y-q.y);if(re<=$&&re>ne&&(ne=re,L=q.x<q.next.x?q:q.next,re===$))return L}q=q.next}while(q!==z);if(!L)return null;var ue,me=L,ge=L.x,Me=L.y,Ie=1/0;q=L;do $>=q.x&&q.x>=ge&&$!==q.x&&Uu(Y<Me?$:ne,Y,ge,Me,Y<Me?ne:$,Y,q.x,q.y)&&(ue=Math.abs(Y-q.y)/($-q.x),Qu(q,T)&&(ue<Ie||ue===Ie&&(q.x>L.x||q.x===L.x&&Xf(L,q)))&&(L=q,Ie=ue)),q=q.next;while(q!==me);return L}(o,r);if(!u)return r;var g=hu(u,o);return _l(g,g.next),_l(u,u.next)}function Xf(o,r){return xr(o.prev,o,r.prev)<0&&xr(r.next,o,o.next)<0}function ms(o,r,u,g,T){return(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=(o-u)*T|0)|o<<8))|o<<4))|o<<2))|o<<1))|(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=(r-g)*T|0)|r<<8))|r<<4))|r<<2))|r<<1))<<1}function Ka(o){var r=o,u=o;do(r.x<u.x||r.x===u.x&&r.y<u.y)&&(u=r),r=r.next;while(r!==o);return u}function Uu(o,r,u,g,T,z,L,q){return(T-L)*(r-q)>=(o-L)*(z-q)&&(o-L)*(g-q)>=(u-L)*(r-q)&&(u-L)*(z-q)>=(T-L)*(g-q)}function Gm(o,r){return o.next.i!==r.i&&o.prev.i!==r.i&&!function(u,g){var T=u;do{if(T.i!==u.i&&T.next.i!==u.i&&T.i!==g.i&&T.next.i!==g.i&&fh(T,T.next,u,g))return!0;T=T.next}while(T!==u);return!1}(o,r)&&(Qu(o,r)&&Qu(r,o)&&function(u,g){var T=u,z=!1,L=(u.x+g.x)/2,q=(u.y+g.y)/2;do T.y>q!=T.next.y>q&&T.next.y!==T.y&&L<(T.next.x-T.x)*(q-T.y)/(T.next.y-T.y)+T.x&&(z=!z),T=T.next;while(T!==u);return z}(o,r)&&(xr(o.prev,o,r.prev)||xr(o,r.prev,r))||yl(o,r)&&xr(o.prev,o,o.next)>0&&xr(r.prev,r,r.next)>0)}function xr(o,r,u){return(r.y-o.y)*(u.x-r.x)-(r.x-o.x)*(u.y-r.y)}function yl(o,r){return o.x===r.x&&o.y===r.y}function fh(o,r,u,g){var T=sc(xr(o,r,u)),z=sc(xr(o,r,g)),L=sc(xr(u,g,o)),q=sc(xr(u,g,r));return T!==z&&L!==q||!(T!==0||!s0(o,u,r))||!(z!==0||!s0(o,g,r))||!(L!==0||!s0(u,o,g))||!(q!==0||!s0(u,r,g))}function s0(o,r,u){return r.x<=Math.max(o.x,u.x)&&r.x>=Math.min(o.x,u.x)&&r.y<=Math.max(o.y,u.y)&&r.y>=Math.min(o.y,u.y)}function sc(o){return o>0?1:o<0?-1:0}function Qu(o,r){return xr(o.prev,o,o.next)<0?xr(o,r,o.next)>=0&&xr(o,o.prev,r)>=0:xr(o,r,o.prev)<0||xr(o,o.next,r)<0}function hu(o,r){var u=new oc(o.i,o.x,o.y),g=new oc(r.i,r.x,r.y),T=o.next,z=r.prev;return o.next=r,r.prev=o,u.next=T,T.prev=u,g.next=u,u.prev=g,z.next=g,g.prev=z,g}function Gu(o,r,u,g){var T=new oc(o,r,u);return g?(T.next=g.next,T.prev=g,g.next.prev=T,g.next=T):(T.prev=T,T.next=T),T}function o0(o){o.next.prev=o.prev,o.prev.next=o.next,o.prevZ&&(o.prevZ.nextZ=o.nextZ),o.nextZ&&(o.nextZ.prevZ=o.prevZ)}function oc(o,r,u){this.i=o,this.x=r,this.y=u,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function ac(o,r,u,g){for(var T=0,z=r,L=u-g;z<u;z+=g)T+=(o[L]-o[z])*(o[z+1]+o[L+1]),L=z;return T}Xa.exports=r0,Xa.exports.default=r0,r0.deviation=function(o,r,u,g){var T=r&&r.length,z=Math.abs(ac(o,0,T?r[0]*u:o.length,u));if(T)for(var L=0,q=r.length;L<q;L++)z-=Math.abs(ac(o,r[L]*u,L<q-1?r[L+1]*u:o.length,u));var $=0;for(L=0;L<g.length;L+=3){var Y=g[L]*u,ne=g[L+1]*u,re=g[L+2]*u;$+=Math.abs((o[Y]-o[re])*(o[ne+1]-o[Y+1])-(o[Y]-o[ne])*(o[re+1]-o[Y+1]))}return z===0&&$===0?0:Math.abs(($-z)/z)},r0.flatten=function(o){for(var r=o[0][0].length,u={vertices:[],holes:[],dimensions:r},g=0,T=0;T<o.length;T++){for(var z=0;z<o[T].length;z++)for(var L=0;L<r;L++)u.vertices.push(o[T][z][L]);T>0&&u.holes.push(g+=o[T-1].length)}return u};var a0=O(Xa.exports);function Kf(o,r,u,g,T){l0(o,r,u||0,g||o.length-1,T||lc)}function l0(o,r,u,g,T){for(;g>u;){if(g-u>600){var z=g-u+1,L=r-u+1,q=Math.log(z),$=.5*Math.exp(2*q/3),Y=.5*Math.sqrt(q*$*(z-$)/z)*(L-z/2<0?-1:1);l0(o,r,Math.max(u,Math.floor(r-L*$/z+Y)),Math.min(g,Math.floor(r+(z-L)*$/z+Y)),T)}var ne=o[r],re=u,ue=g;for(fu(o,u,r),T(o[g],ne)>0&&fu(o,u,g);re<ue;){for(fu(o,re,ue),re++,ue--;T(o[re],ne)<0;)re++;for(;T(o[ue],ne)>0;)ue--}T(o[u],ne)===0?fu(o,u,ue):fu(o,++ue,g),ue<=r&&(u=ue+1),r<=ue&&(g=ue-1)}}function fu(o,r,u){var g=o[r];o[r]=o[u],o[u]=g}function lc(o,r){return o<r?-1:o>r?1:0}function dh(o,r){const u=o.length;if(u<=1)return[o];const g=[];let T,z;for(let L=0;L<u;L++){const q=lt(o[L]);q!==0&&(o[L].area=Math.abs(q),z===void 0&&(z=q<0),z===q<0?(T&&g.push(T),T=[o[L]]):T.push(o[L]))}if(T&&g.push(T),r>1)for(let L=0;L<g.length;L++)g[L].length<=r||(Kf(g[L],r,1,g[L].length-1,Jf),g[L]=g[L].slice(0,r));return g}function Jf(o,r){return r.area-o.area}function qu(o,r,u){const g=u.patternDependencies;let T=!1;for(const z of r){const L=z.paint.get(`${o}-pattern`);L.isConstant()||(T=!0);const q=L.constantOr(null);q&&(T=!0,g[q.to]=!0,g[q.from]=!0)}return T}function uc(o,r,u,g,T){const z=T.patternDependencies;for(const L of r){const q=L.paint.get(`${o}-pattern`).value;if(q.kind!=="constant"){let $=q.evaluate({zoom:g-1},u,{},T.availableImages),Y=q.evaluate({zoom:g},u,{},T.availableImages),ne=q.evaluate({zoom:g+1},u,{},T.availableImages);$=$&&$.name?$.name:$,Y=Y&&Y.name?Y.name:Y,ne=ne&&ne.name?ne.name:ne,z[$]=!0,z[Y]=!0,z[ne]=!0,u.patterns[L.id]={min:$,mid:Y,max:ne}}}return u}class u0{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(u=>u.id),this.index=r.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Mt,this.indexArray=new Wn,this.indexArray2=new bn,this.programConfigurations=new wa(r.layers,r.zoom),this.segments=new bi,this.segments2=new bi,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(r,u,g){this.hasPattern=qu("fill",this.layers,u);const T=this.layers[0].layout.get("fill-sort-key"),z=!T.isConstant(),L=[];for(const{feature:q,id:$,index:Y,sourceLayerIndex:ne}of r){const re=this.layers[0]._featureFilter.needGeometry,ue=Ql(q,re);if(!this.layers[0]._featureFilter.filter(new Pi(this.zoom),ue,g))continue;const me=z?T.evaluate(ue,{},g,u.availableImages):void 0,ge={id:$,properties:q.properties,type:q.type,sourceLayerIndex:ne,index:Y,geometry:re?ue.geometry:au(q),patterns:{},sortKey:me};L.push(ge)}z&&L.sort((q,$)=>q.sortKey-$.sortKey);for(const q of L){const{geometry:$,index:Y,sourceLayerIndex:ne}=q;if(this.hasPattern){const re=uc("fill",this.layers,q,this.zoom,u);this.patternFeatures.push(re)}else this.addFeature(q,$,Y,g,{});u.featureIndex.insert(r[Y].feature,$,Y,ne,this.index)}}update(r,u,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,u,this.stateDependentLayers,g)}addFeatures(r,u,g){for(const T of this.patternFeatures)this.addFeature(T,T.geometry,T.index,u,g)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,Nm),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.indexBuffer2=r.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(r,u,g,T,z){for(const L of dh(u,500)){let q=0;for(const me of L)q+=me.length;const $=this.segments.prepareSegment(q,this.layoutVertexArray,this.indexArray),Y=$.vertexLength,ne=[],re=[];for(const me of L){if(me.length===0)continue;me!==L[0]&&re.push(ne.length/2);const ge=this.segments2.prepareSegment(me.length,this.layoutVertexArray,this.indexArray2),Me=ge.vertexLength;this.layoutVertexArray.emplaceBack(me[0].x,me[0].y),this.indexArray2.emplaceBack(Me+me.length-1,Me),ne.push(me[0].x),ne.push(me[0].y);for(let Ie=1;Ie<me.length;Ie++)this.layoutVertexArray.emplaceBack(me[Ie].x,me[Ie].y),this.indexArray2.emplaceBack(Me+Ie-1,Me+Ie),ne.push(me[Ie].x),ne.push(me[Ie].y);ge.vertexLength+=me.length,ge.primitiveLength+=me.length}const ue=a0(ne,re);for(let me=0;me<ue.length;me+=3)this.indexArray.emplaceBack(Y+ue[me],Y+ue[me+1],Y+ue[me+2]);$.vertexLength+=q,$.primitiveLength+=ue.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,g,z,T)}}let ed,ph;on("FillBucket",u0,{omit:["layers","patternFeatures"]});var vl={get paint(){return ph=ph||new Mi({"fill-antialias":new ct(pt.paint_fill["fill-antialias"]),"fill-opacity":new wt(pt.paint_fill["fill-opacity"]),"fill-color":new wt(pt.paint_fill["fill-color"]),"fill-outline-color":new wt(pt.paint_fill["fill-outline-color"]),"fill-translate":new ct(pt.paint_fill["fill-translate"]),"fill-translate-anchor":new ct(pt.paint_fill["fill-translate-anchor"]),"fill-pattern":new jA(pt.paint_fill["fill-pattern"])})},get layout(){return ed=ed||new Mi({"fill-sort-key":new wt(pt.layout_fill["fill-sort-key"])})}};class td extends Vi{constructor(r){super(r,vl)}recalculate(r,u){super.recalculate(r,u);const g=this.paint._values["fill-outline-color"];g.value.kind==="constant"&&g.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(r){return new u0(r)}queryRadius(){return e0(this.paint.get("fill-translate"))}queryIntersectsFeature(r,u,g,T,z,L,q){return ih(Ou(r,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),L.angle,q),T)}isTileClipped(){return!0}}const nd=x([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),qm=x([{name:"a_centroid",components:2,type:"Int16"}],4),{members:id}=nd;var ql={},Zm=j,Ja=Zl;function Zl(o,r,u,g,T){this.properties={},this.extent=u,this.type=0,this._pbf=o,this._geometry=-1,this._keys=g,this._values=T,o.readFields(mh,this,r)}function mh(o,r,u){o==1?r.id=u.readVarint():o==2?function(g,T){for(var z=g.readVarint()+g.pos;g.pos<z;){var L=T._keys[g.readVarint()],q=T._values[g.readVarint()];T.properties[L]=q}}(u,r):o==3?r.type=u.readVarint():o==4&&(r._geometry=u.pos)}function gh(o){for(var r,u,g=0,T=0,z=o.length,L=z-1;T<z;L=T++)g+=((u=o[L]).x-(r=o[T]).x)*(r.y+u.y);return g}Zl.types=["Unknown","Point","LineString","Polygon"],Zl.prototype.loadGeometry=function(){var o=this._pbf;o.pos=this._geometry;for(var r,u=o.readVarint()+o.pos,g=1,T=0,z=0,L=0,q=[];o.pos<u;){if(T<=0){var $=o.readVarint();g=7&$,T=$>>3}if(T--,g===1||g===2)z+=o.readSVarint(),L+=o.readSVarint(),g===1&&(r&&q.push(r),r=[]),r.push(new Zm(z,L));else{if(g!==7)throw new Error("unknown command "+g);r&&r.push(r[0].clone())}}return r&&q.push(r),q},Zl.prototype.bbox=function(){var o=this._pbf;o.pos=this._geometry;for(var r=o.readVarint()+o.pos,u=1,g=0,T=0,z=0,L=1/0,q=-1/0,$=1/0,Y=-1/0;o.pos<r;){if(g<=0){var ne=o.readVarint();u=7&ne,g=ne>>3}if(g--,u===1||u===2)(T+=o.readSVarint())<L&&(L=T),T>q&&(q=T),(z+=o.readSVarint())<$&&($=z),z>Y&&(Y=z);else if(u!==7)throw new Error("unknown command "+u)}return[L,$,q,Y]},Zl.prototype.toGeoJSON=function(o,r,u){var g,T,z=this.extent*Math.pow(2,u),L=this.extent*o,q=this.extent*r,$=this.loadGeometry(),Y=Zl.types[this.type];function ne(me){for(var ge=0;ge<me.length;ge++){var Me=me[ge];me[ge]=[360*(Me.x+L)/z-180,360/Math.PI*Math.atan(Math.exp((180-360*(Me.y+q)/z)*Math.PI/180))-90]}}switch(this.type){case 1:var re=[];for(g=0;g<$.length;g++)re[g]=$[g][0];ne($=re);break;case 2:for(g=0;g<$.length;g++)ne($[g]);break;case 3:for($=function(me){var ge=me.length;if(ge<=1)return[me];for(var Me,Ie,Re=[],et=0;et<ge;et++){var Xe=gh(me[et]);Xe!==0&&(Ie===void 0&&(Ie=Xe<0),Ie===Xe<0?(Me&&Re.push(Me),Me=[me[et]]):Me.push(me[et]))}return Me&&Re.push(Me),Re}($),g=0;g<$.length;g++)for(T=0;T<$[g].length;T++)ne($[g][T])}$.length===1?$=$[0]:Y="Multi"+Y;var ue={type:"Feature",geometry:{type:Y,coordinates:$},properties:this.properties};return"id"in this&&(ue.id=this.id),ue};var cc=Ja,du=Vn;function Vn(o,r){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=o,this._keys=[],this._values=[],this._features=[],o.readFields(hc,this,r),this.length=this._features.length}function hc(o,r,u){o===15?r.version=u.readVarint():o===1?r.name=u.readString():o===5?r.extent=u.readVarint():o===2?r._features.push(u.pos):o===3?r._keys.push(u.readString()):o===4&&r._values.push(function(g){for(var T=null,z=g.readVarint()+g.pos;g.pos<z;){var L=g.readVarint()>>3;T=L===1?g.readString():L===2?g.readFloat():L===3?g.readDouble():L===4?g.readVarint64():L===5?g.readVarint():L===6?g.readSVarint():L===7?g.readBoolean():null}return T}(u))}Vn.prototype.feature=function(o){if(o<0||o>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[o];var r=this._pbf.readVarint()+this._pbf.pos;return new cc(this._pbf,r,this.extent,this._keys,this._values)};var _h=du;function pu(o,r,u){if(o===3){var g=new _h(u,u.readVarint()+u.pos);g.length&&(r[g.name]=g)}}ql.VectorTile=function(o,r){this.layers=o.readFields(pu,{},r)},ql.VectorTileFeature=Ja,ql.VectorTileLayer=du;const Hm=ql.VectorTileFeature.types,c0=Math.pow(2,13);function Zu(o,r,u,g,T,z,L,q){o.emplaceBack(r,u,2*Math.floor(g*c0)+L,T*c0*2,z*c0*2,Math.round(q))}class PA{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(u=>u.id),this.index=r.index,this.hasPattern=!1,this.layoutVertexArray=new ht,this.centroidVertexArray=new Ve,this.indexArray=new Wn,this.programConfigurations=new wa(r.layers,r.zoom),this.segments=new bi,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(r,u,g){this.features=[],this.hasPattern=qu("fill-extrusion",this.layers,u);for(const{feature:T,id:z,index:L,sourceLayerIndex:q}of r){const $=this.layers[0]._featureFilter.needGeometry,Y=Ql(T,$);if(!this.layers[0]._featureFilter.filter(new Pi(this.zoom),Y,g))continue;const ne={id:z,sourceLayerIndex:q,index:L,geometry:$?Y.geometry:au(T),properties:T.properties,type:T.type,patterns:{}};this.hasPattern?this.features.push(uc("fill-extrusion",this.layers,ne,this.zoom,u)):this.addFeature(ne,ne.geometry,L,g,{}),u.featureIndex.insert(T,ne.geometry,L,q,this.index,!0)}}addFeatures(r,u,g){for(const T of this.features){const{geometry:z}=T;this.addFeature(T,z,T.index,u,g)}}update(r,u,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,u,this.stateDependentLayers,g)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,id),this.centroidVertexBuffer=r.createVertexBuffer(this.centroidVertexArray,qm.members,!0),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(r,u,g,T,z){const L={x:0,y:0,vertexCount:0};for(const q of dh(u,500)){let $=0;for(const ge of q)$+=ge.length;let Y=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const ge of q){if(ge.length===0||jm(ge))continue;let Me=0;for(let Ie=0;Ie<ge.length;Ie++){const Re=ge[Ie];if(Ie>=1){const et=ge[Ie-1];if(!$m(Re,et)){Y.vertexLength+4>bi.MAX_VERTEX_ARRAY_LENGTH&&(Y=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const Xe=Re.sub(et)._perp()._unit(),rt=et.dist(Re);Me+rt>32768&&(Me=0),Zu(this.layoutVertexArray,Re.x,Re.y,Xe.x,Xe.y,0,0,Me),Zu(this.layoutVertexArray,Re.x,Re.y,Xe.x,Xe.y,0,1,Me),L.x+=2*Re.x,L.y+=2*Re.y,L.vertexCount+=2,Me+=rt,Zu(this.layoutVertexArray,et.x,et.y,Xe.x,Xe.y,0,0,Me),Zu(this.layoutVertexArray,et.x,et.y,Xe.x,Xe.y,0,1,Me),L.x+=2*et.x,L.y+=2*et.y,L.vertexCount+=2;const ft=Y.vertexLength;this.indexArray.emplaceBack(ft,ft+2,ft+1),this.indexArray.emplaceBack(ft+1,ft+2,ft+3),Y.vertexLength+=4,Y.primitiveLength+=2}}}}if(Y.vertexLength+$>bi.MAX_VERTEX_ARRAY_LENGTH&&(Y=this.segments.prepareSegment($,this.layoutVertexArray,this.indexArray)),Hm[r.type]!=="Polygon")continue;const ne=[],re=[],ue=Y.vertexLength;for(const ge of q)if(ge.length!==0){ge!==q[0]&&re.push(ne.length/2);for(let Me=0;Me<ge.length;Me++){const Ie=ge[Me];Zu(this.layoutVertexArray,Ie.x,Ie.y,0,0,1,1,0),L.x+=Ie.x,L.y+=Ie.y,L.vertexCount+=1,ne.push(Ie.x),ne.push(Ie.y)}}const me=a0(ne,re);for(let ge=0;ge<me.length;ge+=3)this.indexArray.emplaceBack(ue+me[ge],ue+me[ge+2],ue+me[ge+1]);Y.primitiveLength+=me.length/3,Y.vertexLength+=$}for(let q=0;q<L.vertexCount;q++)this.centroidVertexArray.emplaceBack(Math.floor(L.x/L.vertexCount),Math.floor(L.y/L.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,g,z,T)}}function $m(o,r){return o.x===r.x&&(o.x<0||o.x>Qr)||o.y===r.y&&(o.y<0||o.y>Qr)}function jm(o){return o.every(r=>r.x<0)||o.every(r=>r.x>Qr)||o.every(r=>r.y<0)||o.every(r=>r.y>Qr)}let yh;on("FillExtrusionBucket",PA,{omit:["layers","features"]});var Wm={get paint(){return yh=yh||new Mi({"fill-extrusion-opacity":new ct(pt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new wt(pt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new ct(pt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new ct(pt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new jA(pt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new wt(pt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new wt(pt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new ct(pt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class rd extends Vi{constructor(r){super(r,Wm)}createBucket(r){return new PA(r)}queryRadius(){return e0(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(r,u,g,T,z,L,q,$){const Y=Ou(r,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),L.angle,q),ne=this.paint.get("fill-extrusion-height").evaluate(u,g),re=this.paint.get("fill-extrusion-base").evaluate(u,g),ue=function(ge,Me,Ie,Re){const et=[];for(const Xe of ge){const rt=[Xe.x,Xe.y,0,1];zs(rt,rt,Me),et.push(new J(rt[0]/rt[3],rt[1]/rt[3]))}return et}(Y,$),me=function(ge,Me,Ie,Re){const et=[],Xe=[],rt=Re[8]*Me,ft=Re[9]*Me,Et=Re[10]*Me,ln=Re[11]*Me,wn=Re[8]*Ie,rn=Re[9]*Ie,jt=Re[10]*Ie,qt=Re[11]*Ie;for(const dn of ge){const Wt=[],Rt=[];for(const mn of dn){const gn=mn.x,li=mn.y,cr=Re[0]*gn+Re[4]*li+Re[12],mr=Re[1]*gn+Re[5]*li+Re[13],iA=Re[2]*gn+Re[6]*li+Re[14],Ks=Re[3]*gn+Re[7]*li+Re[15],YA=iA+Et,ir=Ks+ln,Cn=cr+wn,xA=mr+rn,gr=iA+jt,XA=Ks+qt,rA=new J((cr+rt)/ir,(mr+ft)/ir);rA.z=YA/ir,Wt.push(rA);const $n=new J(Cn/XA,xA/XA);$n.z=gr/XA,Rt.push($n)}et.push(Wt),Xe.push(Rt)}return[et,Xe]}(T,re,ne,$);return function(ge,Me,Ie){let Re=1/0;ih(Ie,Me)&&(Re=Ad(Ie,Me[0]));for(let et=0;et<Me.length;et++){const Xe=Me[et],rt=ge[et];for(let ft=0;ft<Xe.length-1;ft++){const Et=Xe[ft],ln=[Et,Xe[ft+1],rt[ft+1],rt[ft],Et];nc(Ie,ln)&&(Re=Math.min(Re,Ad(Ie,ln)))}}return Re!==1/0&&Re}(me[0],me[1],ue)}}function h0(o,r){return o.x*r.x+o.y*r.y}function Ad(o,r){if(o.length===1){let u=0;const g=r[u++];let T;for(;!T||g.equals(T);)if(T=r[u++],!T)return 1/0;for(;u<r.length;u++){const z=r[u],L=o[0],q=T.sub(g),$=z.sub(g),Y=L.sub(g),ne=h0(q,q),re=h0(q,$),ue=h0($,$),me=h0(Y,q),ge=h0(Y,$),Me=ne*ue-re*re,Ie=(ue*me-re*ge)/Me,Re=(ne*ge-re*me)/Me,et=g.z*(1-Ie-Re)+T.z*Ie+z.z*Re;if(isFinite(et))return et}return 1/0}{let u=1/0;for(const g of r)u=Math.min(u,g.z);return u}}const Ym=x([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:xl}=Ym,Rs=x([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:vh}=Rs,Xm=ql.VectorTileFeature.types,xh=Math.cos(Math.PI/180*37.5),sd=Math.pow(2,14)/.5;class wh{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(u=>u.id),this.index=r.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(u=>{this.gradients[u.id]={}}),this.layoutVertexArray=new _t,this.layoutVertexArray2=new gt,this.indexArray=new Wn,this.programConfigurations=new wa(r.layers,r.zoom),this.segments=new bi,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(r,u,g){this.hasPattern=qu("line",this.layers,u);const T=this.layers[0].layout.get("line-sort-key"),z=!T.isConstant(),L=[];for(const{feature:q,id:$,index:Y,sourceLayerIndex:ne}of r){const re=this.layers[0]._featureFilter.needGeometry,ue=Ql(q,re);if(!this.layers[0]._featureFilter.filter(new Pi(this.zoom),ue,g))continue;const me=z?T.evaluate(ue,{},g):void 0,ge={id:$,properties:q.properties,type:q.type,sourceLayerIndex:ne,index:Y,geometry:re?ue.geometry:au(q),patterns:{},sortKey:me};L.push(ge)}z&&L.sort((q,$)=>q.sortKey-$.sortKey);for(const q of L){const{geometry:$,index:Y,sourceLayerIndex:ne}=q;if(this.hasPattern){const re=uc("line",this.layers,q,this.zoom,u);this.patternFeatures.push(re)}else this.addFeature(q,$,Y,g,{});u.featureIndex.insert(r[Y].feature,$,Y,ne,this.index)}}update(r,u,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,u,this.stateDependentLayers,g)}addFeatures(r,u,g){for(const T of this.patternFeatures)this.addFeature(T,T.geometry,T.index,u,g)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=r.createVertexBuffer(this.layoutVertexArray2,vh)),this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,xl),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(r){if(r.properties&&Object.prototype.hasOwnProperty.call(r.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(r.properties,"mapbox_clip_end"))return{start:+r.properties.mapbox_clip_start,end:+r.properties.mapbox_clip_end}}addFeature(r,u,g,T,z){const L=this.layers[0].layout,q=L.get("line-join").evaluate(r,{}),$=L.get("line-cap"),Y=L.get("line-miter-limit"),ne=L.get("line-round-limit");this.lineClips=this.lineFeatureClips(r);for(const re of u)this.addLine(re,r,q,$,Y,ne);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,g,z,T)}addLine(r,u,g,T,z,L){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Re=0;Re<r.length-1;Re++)this.totalDistance+=r[Re].dist(r[Re+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const q=Xm[u.type]==="Polygon";let $=r.length;for(;$>=2&&r[$-1].equals(r[$-2]);)$--;let Y=0;for(;Y<$-1&&r[Y].equals(r[Y+1]);)Y++;if($<(q?3:2))return;g==="bevel"&&(z=1.05);const ne=this.overscaling<=16?15*Qr/(512*this.overscaling):0,re=this.segments.prepareSegment(10*$,this.layoutVertexArray,this.indexArray);let ue,me,ge,Me,Ie;this.e1=this.e2=-1,q&&(ue=r[$-2],Ie=r[Y].sub(ue)._unit()._perp());for(let Re=Y;Re<$;Re++){if(ge=Re===$-1?q?r[Y+1]:void 0:r[Re+1],ge&&r[Re].equals(ge))continue;Ie&&(Me=Ie),ue&&(me=ue),ue=r[Re],Ie=ge?ge.sub(ue)._unit()._perp():Me,Me=Me||Ie;let et=Me.add(Ie);et.x===0&&et.y===0||et._unit();const Xe=Me.x*Ie.x+Me.y*Ie.y,rt=et.x*Ie.x+et.y*Ie.y,ft=rt!==0?1/rt:1/0,Et=2*Math.sqrt(2-2*rt),ln=rt<xh&&me&&ge,wn=Me.x*Ie.y-Me.y*Ie.x>0;if(ln&&Re>Y){const qt=ue.dist(me);if(qt>2*ne){const dn=ue.sub(ue.sub(me)._mult(ne/qt)._round());this.updateDistance(me,dn),this.addCurrentVertex(dn,Me,0,0,re),me=dn}}const rn=me&&ge;let jt=rn?g:q?"butt":T;if(rn&&jt==="round"&&(ft<L?jt="miter":ft<=2&&(jt="fakeround")),jt==="miter"&&ft>z&&(jt="bevel"),jt==="bevel"&&(ft>2&&(jt="flipbevel"),ft<z&&(jt="miter")),me&&this.updateDistance(me,ue),jt==="miter")et._mult(ft),this.addCurrentVertex(ue,et,0,0,re);else if(jt==="flipbevel"){if(ft>100)et=Ie.mult(-1);else{const qt=ft*Me.add(Ie).mag()/Me.sub(Ie).mag();et._perp()._mult(qt*(wn?-1:1))}this.addCurrentVertex(ue,et,0,0,re),this.addCurrentVertex(ue,et.mult(-1),0,0,re)}else if(jt==="bevel"||jt==="fakeround"){const qt=-Math.sqrt(ft*ft-1),dn=wn?qt:0,Wt=wn?0:qt;if(me&&this.addCurrentVertex(ue,Me,dn,Wt,re),jt==="fakeround"){const Rt=Math.round(180*Et/Math.PI/20);for(let mn=1;mn<Rt;mn++){let gn=mn/Rt;if(gn!==.5){const cr=gn-.5;gn+=gn*cr*(gn-1)*((1.0904+Xe*(Xe*(3.55645-1.43519*Xe)-3.2452))*cr*cr+(.848013+Xe*(.215638*Xe-1.06021)))}const li=Ie.sub(Me)._mult(gn)._add(Me)._unit()._mult(wn?-1:1);this.addHalfVertex(ue,li.x,li.y,!1,wn,0,re)}}ge&&this.addCurrentVertex(ue,Ie,-dn,-Wt,re)}else if(jt==="butt")this.addCurrentVertex(ue,et,0,0,re);else if(jt==="square"){const qt=me?1:-1;this.addCurrentVertex(ue,et,qt,qt,re)}else jt==="round"&&(me&&(this.addCurrentVertex(ue,Me,0,0,re),this.addCurrentVertex(ue,Me,1,1,re,!0)),ge&&(this.addCurrentVertex(ue,Ie,-1,-1,re,!0),this.addCurrentVertex(ue,Ie,0,0,re)));if(ln&&Re<$-1){const qt=ue.dist(ge);if(qt>2*ne){const dn=ue.add(ge.sub(ue)._mult(ne/qt)._round());this.updateDistance(ue,dn),this.addCurrentVertex(dn,Ie,0,0,re),ue=dn}}}}addCurrentVertex(r,u,g,T,z,L=!1){const q=u.y*T-u.x,$=-u.y-u.x*T;this.addHalfVertex(r,u.x+u.y*g,u.y-u.x*g,L,!1,g,z),this.addHalfVertex(r,q,$,L,!0,-T,z),this.distance>sd/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(r,u,g,T,z,L))}addHalfVertex({x:r,y:u},g,T,z,L,q,$){const Y=.5*(this.lineClips?this.scaledDistance*(sd-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((r<<1)+(z?1:0),(u<<1)+(L?1:0),Math.round(63*g)+128,Math.round(63*T)+128,1+(q===0?0:q<0?-1:1)|(63&Y)<<2,Y>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const ne=$.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,ne),$.primitiveLength++),L?this.e2=ne:this.e1=ne}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(r,u){this.distance+=r.dist(u),this.updateScaledDistance()}}let Hu,bh;on("LineBucket",wh,{omit:["layers","patternFeatures"]});var kh={get paint(){return bh=bh||new Mi({"line-opacity":new wt(pt.paint_line["line-opacity"]),"line-color":new wt(pt.paint_line["line-color"]),"line-translate":new ct(pt.paint_line["line-translate"]),"line-translate-anchor":new ct(pt.paint_line["line-translate-anchor"]),"line-width":new wt(pt.paint_line["line-width"]),"line-gap-width":new wt(pt.paint_line["line-gap-width"]),"line-offset":new wt(pt.paint_line["line-offset"]),"line-blur":new wt(pt.paint_line["line-blur"]),"line-dasharray":new Go(pt.paint_line["line-dasharray"]),"line-pattern":new jA(pt.paint_line["line-pattern"]),"line-gradient":new qo(pt.paint_line["line-gradient"])})},get layout(){return Hu=Hu||new Mi({"line-cap":new ct(pt.layout_line["line-cap"]),"line-join":new wt(pt.layout_line["line-join"]),"line-miter-limit":new ct(pt.layout_line["line-miter-limit"]),"line-round-limit":new ct(pt.layout_line["line-round-limit"]),"line-sort-key":new wt(pt.layout_line["line-sort-key"])})}};class Km extends wt{possiblyEvaluate(r,u){return u=new Pi(Math.floor(u.zoom),{now:u.now,fadeDuration:u.fadeDuration,zoomHistory:u.zoomHistory,transition:u.transition}),super.possiblyEvaluate(r,u)}evaluate(r,u,g,T){return u=It({},u,{zoom:Math.floor(u.zoom)}),super.evaluate(r,u,g,T)}}let fc;class Jm extends Vi{constructor(r){super(r,kh),this.gradientVersion=0,fc||(fc=new Km(kh.paint.properties["line-width"].specification),fc.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(r){if(r==="line-gradient"){const u=this.gradientExpression();this.stepInterpolant=!!function(g){return g._styleExpression!==void 0}(u)&&u._styleExpression.expression instanceof Rn,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(r,u){super.recalculate(r,u),this.paint._values["line-floorwidth"]=fc.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,r)}createBucket(r){return new wh(r)}queryRadius(r){const u=r,g=od(uu("line-width",this,u),uu("line-gap-width",this,u)),T=uu("line-offset",this,u);return g/2+Math.abs(T)+e0(this.paint.get("line-translate"))}queryIntersectsFeature(r,u,g,T,z,L,q){const $=Ou(r,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),L.angle,q),Y=q/2*od(this.paint.get("line-width").evaluate(u,g),this.paint.get("line-gap-width").evaluate(u,g)),ne=this.paint.get("line-offset").evaluate(u,g);return ne&&(T=function(re,ue){const me=[];for(let ge=0;ge<re.length;ge++){const Me=re[ge],Ie=[];for(let Re=0;Re<Me.length;Re++){const et=Me[Re-1],Xe=Me[Re],rt=Me[Re+1],ft=Re===0?new J(0,0):Xe.sub(et)._unit()._perp(),Et=Re===Me.length-1?new J(0,0):rt.sub(Xe)._unit()._perp(),ln=ft._add(Et)._unit(),wn=ln.x*Et.x+ln.y*Et.y;wn!==0&&ln._mult(1/wn),Ie.push(ln._mult(ue)._add(Xe))}me.push(Ie)}return me}(T,ne*q)),function(re,ue,me){for(let ge=0;ge<ue.length;ge++){const Me=ue[ge];if(re.length>=3){for(let Ie=0;Ie<Me.length;Ie++)if(lu(re,Me[Ie]))return!0}if(qf(re,Me,me))return!0}return!1}($,T,Y)}isTileClipped(){return!0}}function od(o,r){return r>0?r+2*o:o}const ad=x([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),ld=x([{name:"a_projected_pos",components:3,type:"Float32"}],4);x([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const eg=x([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);x([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const dc=x([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),ud=x([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function f0(o,r,u){return o.sections.forEach(g=>{g.text=function(T,z,L){const q=z.layout.get("text-transform").evaluate(L,{});return q==="uppercase"?T=T.toLocaleUpperCase():q==="lowercase"&&(T=T.toLocaleLowerCase()),Ni.applyArabicShaping&&(T=Ni.applyArabicShaping(T)),T}(g.text,r,u)}),o}x([{name:"triangle",components:3,type:"Uint16"}]),x([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),x([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),x([{type:"Float32",name:"offsetX"}]),x([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),x([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const mu={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var jr=24,Eh=fi,d0=function(o,r,u,g,T){var z,L,q=8*T-g-1,$=(1<<q)-1,Y=$>>1,ne=-7,re=u?T-1:0,ue=u?-1:1,me=o[r+re];for(re+=ue,z=me&(1<<-ne)-1,me>>=-ne,ne+=q;ne>0;z=256*z+o[r+re],re+=ue,ne-=8);for(L=z&(1<<-ne)-1,z>>=-ne,ne+=g;ne>0;L=256*L+o[r+re],re+=ue,ne-=8);if(z===0)z=1-Y;else{if(z===$)return L?NaN:1/0*(me?-1:1);L+=Math.pow(2,g),z-=Y}return(me?-1:1)*L*Math.pow(2,z-g)},Mh=function(o,r,u,g,T,z){var L,q,$,Y=8*z-T-1,ne=(1<<Y)-1,re=ne>>1,ue=T===23?Math.pow(2,-24)-Math.pow(2,-77):0,me=g?0:z-1,ge=g?1:-1,Me=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(q=isNaN(r)?1:0,L=ne):(L=Math.floor(Math.log(r)/Math.LN2),r*($=Math.pow(2,-L))<1&&(L--,$*=2),(r+=L+re>=1?ue/$:ue*Math.pow(2,1-re))*$>=2&&(L++,$/=2),L+re>=ne?(q=0,L=ne):L+re>=1?(q=(r*$-1)*Math.pow(2,T),L+=re):(q=r*Math.pow(2,re-1)*Math.pow(2,T),L=0));T>=8;o[u+me]=255&q,me+=ge,q/=256,T-=8);for(L=L<<T|q,Y+=T;Y>0;o[u+me]=255&L,me+=ge,L/=256,Y-=8);o[u+me-ge]|=128*Me};function fi(o){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(o)?o:new Uint8Array(o||0),this.pos=0,this.type=0,this.length=this.buf.length}fi.Varint=0,fi.Fixed64=1,fi.Bytes=2,fi.Fixed32=5;var wl=4294967296,cd=1/wl,Th=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function bl(o){return o.type===fi.Bytes?o.readVarint()+o.pos:o.pos+1}function $u(o,r,u){return u?4294967296*r+(o>>>0):4294967296*(r>>>0)+(o>>>0)}function hd(o,r,u){var g=r<=16383?1:r<=2097151?2:r<=268435455?3:Math.floor(Math.log(r)/(7*Math.LN2));u.realloc(g);for(var T=u.pos-1;T>=o;T--)u.buf[T+g]=u.buf[T]}function tg(o,r){for(var u=0;u<o.length;u++)r.writeVarint(o[u])}function ng(o,r){for(var u=0;u<o.length;u++)r.writeSVarint(o[u])}function ig(o,r){for(var u=0;u<o.length;u++)r.writeFloat(o[u])}function rg(o,r){for(var u=0;u<o.length;u++)r.writeDouble(o[u])}function Ag(o,r){for(var u=0;u<o.length;u++)r.writeBoolean(o[u])}function sg(o,r){for(var u=0;u<o.length;u++)r.writeFixed32(o[u])}function og(o,r){for(var u=0;u<o.length;u++)r.writeSFixed32(o[u])}function ag(o,r){for(var u=0;u<o.length;u++)r.writeFixed64(o[u])}function fd(o,r){for(var u=0;u<o.length;u++)r.writeSFixed64(o[u])}function p0(o,r){return(o[r]|o[r+1]<<8|o[r+2]<<16)+16777216*o[r+3]}function gu(o,r,u){o[u]=r,o[u+1]=r>>>8,o[u+2]=r>>>16,o[u+3]=r>>>24}function dd(o,r){return(o[r]|o[r+1]<<8|o[r+2]<<16)+(o[r+3]<<24)}fi.prototype={destroy:function(){this.buf=null},readFields:function(o,r,u){for(u=u||this.length;this.pos<u;){var g=this.readVarint(),T=g>>3,z=this.pos;this.type=7&g,o(T,r,this),this.pos===z&&this.skip(g)}return r},readMessage:function(o,r){return this.readFields(o,r,this.readVarint()+this.pos)},readFixed32:function(){var o=p0(this.buf,this.pos);return this.pos+=4,o},readSFixed32:function(){var o=dd(this.buf,this.pos);return this.pos+=4,o},readFixed64:function(){var o=p0(this.buf,this.pos)+p0(this.buf,this.pos+4)*wl;return this.pos+=8,o},readSFixed64:function(){var o=p0(this.buf,this.pos)+dd(this.buf,this.pos+4)*wl;return this.pos+=8,o},readFloat:function(){var o=d0(this.buf,this.pos,!0,23,4);return this.pos+=4,o},readDouble:function(){var o=d0(this.buf,this.pos,!0,52,8);return this.pos+=8,o},readVarint:function(o){var r,u,g=this.buf;return r=127&(u=g[this.pos++]),u<128?r:(r|=(127&(u=g[this.pos++]))<<7,u<128?r:(r|=(127&(u=g[this.pos++]))<<14,u<128?r:(r|=(127&(u=g[this.pos++]))<<21,u<128?r:function(T,z,L){var q,$,Y=L.buf;if(q=(112&($=Y[L.pos++]))>>4,$<128||(q|=(127&($=Y[L.pos++]))<<3,$<128)||(q|=(127&($=Y[L.pos++]))<<10,$<128)||(q|=(127&($=Y[L.pos++]))<<17,$<128)||(q|=(127&($=Y[L.pos++]))<<24,$<128)||(q|=(1&($=Y[L.pos++]))<<31,$<128))return $u(T,q,z);throw new Error("Expected varint not more than 10 bytes")}(r|=(15&(u=g[this.pos]))<<28,o,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var o=this.readVarint();return o%2==1?(o+1)/-2:o/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var o=this.readVarint()+this.pos,r=this.pos;return this.pos=o,o-r>=12&&Th?function(u,g,T){return Th.decode(u.subarray(g,T))}(this.buf,r,o):function(u,g,T){for(var z="",L=g;L<T;){var q,$,Y,ne=u[L],re=null,ue=ne>239?4:ne>223?3:ne>191?2:1;if(L+ue>T)break;ue===1?ne<128&&(re=ne):ue===2?(192&(q=u[L+1]))==128&&(re=(31&ne)<<6|63&q)<=127&&(re=null):ue===3?($=u[L+2],(192&(q=u[L+1]))==128&&(192&$)==128&&((re=(15&ne)<<12|(63&q)<<6|63&$)<=2047||re>=55296&&re<=57343)&&(re=null)):ue===4&&($=u[L+2],Y=u[L+3],(192&(q=u[L+1]))==128&&(192&$)==128&&(192&Y)==128&&((re=(15&ne)<<18|(63&q)<<12|(63&$)<<6|63&Y)<=65535||re>=1114112)&&(re=null)),re===null?(re=65533,ue=1):re>65535&&(re-=65536,z+=String.fromCharCode(re>>>10&1023|55296),re=56320|1023&re),z+=String.fromCharCode(re),L+=ue}return z}(this.buf,r,o)},readBytes:function(){var o=this.readVarint()+this.pos,r=this.buf.subarray(this.pos,o);return this.pos=o,r},readPackedVarint:function(o,r){if(this.type!==fi.Bytes)return o.push(this.readVarint(r));var u=bl(this);for(o=o||[];this.pos<u;)o.push(this.readVarint(r));return o},readPackedSVarint:function(o){if(this.type!==fi.Bytes)return o.push(this.readSVarint());var r=bl(this);for(o=o||[];this.pos<r;)o.push(this.readSVarint());return o},readPackedBoolean:function(o){if(this.type!==fi.Bytes)return o.push(this.readBoolean());var r=bl(this);for(o=o||[];this.pos<r;)o.push(this.readBoolean());return o},readPackedFloat:function(o){if(this.type!==fi.Bytes)return o.push(this.readFloat());var r=bl(this);for(o=o||[];this.pos<r;)o.push(this.readFloat());return o},readPackedDouble:function(o){if(this.type!==fi.Bytes)return o.push(this.readDouble());var r=bl(this);for(o=o||[];this.pos<r;)o.push(this.readDouble());return o},readPackedFixed32:function(o){if(this.type!==fi.Bytes)return o.push(this.readFixed32());var r=bl(this);for(o=o||[];this.pos<r;)o.push(this.readFixed32());return o},readPackedSFixed32:function(o){if(this.type!==fi.Bytes)return o.push(this.readSFixed32());var r=bl(this);for(o=o||[];this.pos<r;)o.push(this.readSFixed32());return o},readPackedFixed64:function(o){if(this.type!==fi.Bytes)return o.push(this.readFixed64());var r=bl(this);for(o=o||[];this.pos<r;)o.push(this.readFixed64());return o},readPackedSFixed64:function(o){if(this.type!==fi.Bytes)return o.push(this.readSFixed64());var r=bl(this);for(o=o||[];this.pos<r;)o.push(this.readSFixed64());return o},skip:function(o){var r=7&o;if(r===fi.Varint)for(;this.buf[this.pos++]>127;);else if(r===fi.Bytes)this.pos=this.readVarint()+this.pos;else if(r===fi.Fixed32)this.pos+=4;else{if(r!==fi.Fixed64)throw new Error("Unimplemented type: "+r);this.pos+=8}},writeTag:function(o,r){this.writeVarint(o<<3|r)},realloc:function(o){for(var r=this.length||16;r<this.pos+o;)r*=2;if(r!==this.length){var u=new Uint8Array(r);u.set(this.buf),this.buf=u,this.length=r}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(o){this.realloc(4),gu(this.buf,o,this.pos),this.pos+=4},writeSFixed32:function(o){this.realloc(4),gu(this.buf,o,this.pos),this.pos+=4},writeFixed64:function(o){this.realloc(8),gu(this.buf,-1&o,this.pos),gu(this.buf,Math.floor(o*cd),this.pos+4),this.pos+=8},writeSFixed64:function(o){this.realloc(8),gu(this.buf,-1&o,this.pos),gu(this.buf,Math.floor(o*cd),this.pos+4),this.pos+=8},writeVarint:function(o){(o=+o||0)>268435455||o<0?function(r,u){var g,T;if(r>=0?(g=r%4294967296|0,T=r/4294967296|0):(T=~(-r/4294967296),4294967295^(g=~(-r%4294967296))?g=g+1|0:(g=0,T=T+1|0)),r>=18446744073709552e3||r<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");u.realloc(10),function(z,L,q){q.buf[q.pos++]=127&z|128,z>>>=7,q.buf[q.pos++]=127&z|128,z>>>=7,q.buf[q.pos++]=127&z|128,z>>>=7,q.buf[q.pos++]=127&z|128,q.buf[q.pos]=127&(z>>>=7)}(g,0,u),function(z,L){var q=(7&z)<<4;L.buf[L.pos++]|=q|((z>>>=3)?128:0),z&&(L.buf[L.pos++]=127&z|((z>>>=7)?128:0),z&&(L.buf[L.pos++]=127&z|((z>>>=7)?128:0),z&&(L.buf[L.pos++]=127&z|((z>>>=7)?128:0),z&&(L.buf[L.pos++]=127&z|((z>>>=7)?128:0),z&&(L.buf[L.pos++]=127&z)))))}(T,u)}(o,this):(this.realloc(4),this.buf[this.pos++]=127&o|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=o>>>7&127))))},writeSVarint:function(o){this.writeVarint(o<0?2*-o-1:2*o)},writeBoolean:function(o){this.writeVarint(!!o)},writeString:function(o){o=String(o),this.realloc(4*o.length),this.pos++;var r=this.pos;this.pos=function(g,T,z){for(var L,q,$=0;$<T.length;$++){if((L=T.charCodeAt($))>55295&&L<57344){if(!q){L>56319||$+1===T.length?(g[z++]=239,g[z++]=191,g[z++]=189):q=L;continue}if(L<56320){g[z++]=239,g[z++]=191,g[z++]=189,q=L;continue}L=q-55296<<10|L-56320|65536,q=null}else q&&(g[z++]=239,g[z++]=191,g[z++]=189,q=null);L<128?g[z++]=L:(L<2048?g[z++]=L>>6|192:(L<65536?g[z++]=L>>12|224:(g[z++]=L>>18|240,g[z++]=L>>12&63|128),g[z++]=L>>6&63|128),g[z++]=63&L|128)}return z}(this.buf,o,this.pos);var u=this.pos-r;u>=128&&hd(r,u,this),this.pos=r-1,this.writeVarint(u),this.pos+=u},writeFloat:function(o){this.realloc(4),Mh(this.buf,o,this.pos,!0,23,4),this.pos+=4},writeDouble:function(o){this.realloc(8),Mh(this.buf,o,this.pos,!0,52,8),this.pos+=8},writeBytes:function(o){var r=o.length;this.writeVarint(r),this.realloc(r);for(var u=0;u<r;u++)this.buf[this.pos++]=o[u]},writeRawMessage:function(o,r){this.pos++;var u=this.pos;o(r,this);var g=this.pos-u;g>=128&&hd(u,g,this),this.pos=u-1,this.writeVarint(g),this.pos+=g},writeMessage:function(o,r,u){this.writeTag(o,fi.Bytes),this.writeRawMessage(r,u)},writePackedVarint:function(o,r){r.length&&this.writeMessage(o,tg,r)},writePackedSVarint:function(o,r){r.length&&this.writeMessage(o,ng,r)},writePackedBoolean:function(o,r){r.length&&this.writeMessage(o,Ag,r)},writePackedFloat:function(o,r){r.length&&this.writeMessage(o,ig,r)},writePackedDouble:function(o,r){r.length&&this.writeMessage(o,rg,r)},writePackedFixed32:function(o,r){r.length&&this.writeMessage(o,sg,r)},writePackedSFixed32:function(o,r){r.length&&this.writeMessage(o,og,r)},writePackedFixed64:function(o,r){r.length&&this.writeMessage(o,ag,r)},writePackedSFixed64:function(o,r){r.length&&this.writeMessage(o,fd,r)},writeBytesField:function(o,r){this.writeTag(o,fi.Bytes),this.writeBytes(r)},writeFixed32Field:function(o,r){this.writeTag(o,fi.Fixed32),this.writeFixed32(r)},writeSFixed32Field:function(o,r){this.writeTag(o,fi.Fixed32),this.writeSFixed32(r)},writeFixed64Field:function(o,r){this.writeTag(o,fi.Fixed64),this.writeFixed64(r)},writeSFixed64Field:function(o,r){this.writeTag(o,fi.Fixed64),this.writeSFixed64(r)},writeVarintField:function(o,r){this.writeTag(o,fi.Varint),this.writeVarint(r)},writeSVarintField:function(o,r){this.writeTag(o,fi.Varint),this.writeSVarint(r)},writeStringField:function(o,r){this.writeTag(o,fi.Bytes),this.writeString(r)},writeFloatField:function(o,r){this.writeTag(o,fi.Fixed32),this.writeFloat(r)},writeDoubleField:function(o,r){this.writeTag(o,fi.Fixed64),this.writeDouble(r)},writeBooleanField:function(o,r){this.writeVarintField(o,!!r)}};var Sh=O(Eh);const Ch=3;function pd(o,r,u){o===1&&u.readMessage(lg,r)}function lg(o,r,u){if(o===3){const{id:g,bitmap:T,width:z,height:L,left:q,top:$,advance:Y}=u.readMessage(ug,{});r.push({id:g,bitmap:new Vu({width:z+2*Ch,height:L+2*Ch},T),metrics:{width:z,height:L,left:q,top:$,advance:Y}})}}function ug(o,r,u){o===1?r.id=u.readVarint():o===2?r.bitmap=u.readBytes():o===3?r.width=u.readVarint():o===4?r.height=u.readVarint():o===5?r.left=u.readSVarint():o===6?r.top=u.readSVarint():o===7&&(r.advance=u.readVarint())}const md=Ch;function gd(o){let r=0,u=0;for(const L of o)r+=L.w*L.h,u=Math.max(u,L.w);o.sort((L,q)=>q.h-L.h);const g=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(r/.95)),u),h:1/0}];let T=0,z=0;for(const L of o)for(let q=g.length-1;q>=0;q--){const $=g[q];if(!(L.w>$.w||L.h>$.h)){if(L.x=$.x,L.y=$.y,z=Math.max(z,L.y+L.h),T=Math.max(T,L.x+L.w),L.w===$.w&&L.h===$.h){const Y=g.pop();q<g.length&&(g[q]=Y)}else L.h===$.h?($.x+=L.w,$.w-=L.w):L.w===$.w?($.y+=L.h,$.h-=L.h):(g.push({x:$.x+L.w,y:$.y,w:$.w-L.w,h:L.h}),$.y+=L.h,$.h-=L.h);break}}return{w:T,h:z,fill:r/(T*z)||0}}const Fs=1;class Ih{constructor(r,{pixelRatio:u,version:g,stretchX:T,stretchY:z,content:L}){this.paddedRect=r,this.pixelRatio=u,this.stretchX=T,this.stretchY=z,this.content=L,this.version=g}get tl(){return[this.paddedRect.x+Fs,this.paddedRect.y+Fs]}get br(){return[this.paddedRect.x+this.paddedRect.w-Fs,this.paddedRect.y+this.paddedRect.h-Fs]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*Fs)/this.pixelRatio,(this.paddedRect.h-2*Fs)/this.pixelRatio]}}class vo{constructor(r,u){const g={},T={};this.haveRenderCallbacks=[];const z=[];this.addImages(r,g,z),this.addImages(u,T,z);const{w:L,h:q}=gd(z),$=new ps({width:L||1,height:q||1});for(const Y in r){const ne=r[Y],re=g[Y].paddedRect;ps.copy(ne.data,$,{x:0,y:0},{x:re.x+Fs,y:re.y+Fs},ne.data)}for(const Y in u){const ne=u[Y],re=T[Y].paddedRect,ue=re.x+Fs,me=re.y+Fs,ge=ne.data.width,Me=ne.data.height;ps.copy(ne.data,$,{x:0,y:0},{x:ue,y:me},ne.data),ps.copy(ne.data,$,{x:0,y:Me-1},{x:ue,y:me-1},{width:ge,height:1}),ps.copy(ne.data,$,{x:0,y:0},{x:ue,y:me+Me},{width:ge,height:1}),ps.copy(ne.data,$,{x:ge-1,y:0},{x:ue-1,y:me},{width:1,height:Me}),ps.copy(ne.data,$,{x:0,y:0},{x:ue+ge,y:me},{width:1,height:Me})}this.image=$,this.iconPositions=g,this.patternPositions=T}addImages(r,u,g){for(const T in r){const z=r[T],L={x:0,y:0,w:z.data.width+2*Fs,h:z.data.height+2*Fs};g.push(L),u[T]=new Ih(L,z),z.hasRenderCallback&&this.haveRenderCallbacks.push(T)}}patchUpdatedImages(r,u){r.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const g in r.updatedImages)this.patchUpdatedImage(this.iconPositions[g],r.getImage(g),u),this.patchUpdatedImage(this.patternPositions[g],r.getImage(g),u)}patchUpdatedImage(r,u,g){if(!r||!u||r.version===u.version)return;r.version=u.version;const[T,z]=r.tl;g.update(u.data,void 0,{x:T,y:z})}}var Hl;on("ImagePosition",Ih),on("ImageAtlas",vo),c.ai=void 0,(Hl=c.ai||(c.ai={}))[Hl.none=0]="none",Hl[Hl.horizontal=1]="horizontal",Hl[Hl.vertical=2]="vertical",Hl[Hl.horizontalOnly=3]="horizontalOnly";const m0=-17;class g0{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(r,u){const g=new g0;return g.scale=r||1,g.fontStack=u,g}static forImage(r){const u=new g0;return u.imageName=r,u}}class _u{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(r,u){const g=new _u;for(let T=0;T<r.sections.length;T++){const z=r.sections[T];z.image?g.addImageSection(z):g.addTextSection(z,u)}return g}length(){return this.text.length}getSection(r){return this.sections[this.sectionIndex[r]]}getSectionIndex(r){return this.sectionIndex[r]}getCharCode(r){return this.text.charCodeAt(r)}verticalizePunctuation(){this.text=function(r){let u="";for(let g=0;g<r.length;g++){const T=r.charCodeAt(g+1)||null,z=r.charCodeAt(g-1)||null;u+=T&&$a(T)&&!mu[r[g+1]]||z&&$a(z)&&!mu[r[g-1]]||!mu[r[g]]?r[g]:mu[r[g]]}return u}(this.text)}trim(){let r=0;for(let g=0;g<this.text.length&&mc[this.text.charCodeAt(g)];g++)r++;let u=this.text.length;for(let g=this.text.length-1;g>=0&&g>=r&&mc[this.text.charCodeAt(g)];g--)u--;this.text=this.text.substring(r,u),this.sectionIndex=this.sectionIndex.slice(r,u)}substring(r,u){const g=new _u;return g.text=this.text.substring(r,u),g.sectionIndex=this.sectionIndex.slice(r,u),g.sections=this.sections,g}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((r,u)=>Math.max(r,this.sections[u].scale),0)}addTextSection(r,u){this.text+=r.text,this.sections.push(g0.forText(r.scale,r.fontStack||u));const g=this.sections.length-1;for(let T=0;T<r.text.length;++T)this.sectionIndex.push(g)}addImageSection(r){const u=r.image?r.image.name:"";if(u.length===0)return void De("Can't add FormattedSection with an empty image.");const g=this.getNextImageSectionCharCode();g?(this.text+=String.fromCharCode(g),this.sections.push(g0.forImage(u)),this.sectionIndex.push(this.sections.length-1)):De("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function pc(o,r,u,g,T,z,L,q,$,Y,ne,re,ue,me,ge,Me){const Ie=_u.fromFeature(o,T);let Re;re===c.ai.vertical&&Ie.verticalizePunctuation();const{processBidirectionalText:et,processStyledBidirectionalText:Xe}=Ni;if(et&&Ie.sections.length===1){Re=[];const Et=et(Ie.toString(),Bh(Ie,Y,z,r,g,me,ge));for(const ln of Et){const wn=new _u;wn.text=ln,wn.sections=Ie.sections;for(let rn=0;rn<ln.length;rn++)wn.sectionIndex.push(0);Re.push(wn)}}else if(Xe){Re=[];const Et=Xe(Ie.text,Ie.sectionIndex,Bh(Ie,Y,z,r,g,me,ge));for(const ln of Et){const wn=new _u;wn.text=ln[0],wn.sectionIndex=ln[1],wn.sections=Ie.sections,Re.push(wn)}}else Re=function(Et,ln){const wn=[],rn=Et.text;let jt=0;for(const qt of ln)wn.push(Et.substring(jt,qt)),jt=qt;return jt<rn.length&&wn.push(Et.substring(jt,rn.length)),wn}(Ie,Bh(Ie,Y,z,r,g,me,ge));const rt=[],ft={positionedLines:rt,text:Ie.toString(),top:ne[1],bottom:ne[1],left:ne[0],right:ne[0],writingMode:re,iconsInText:!1,verticalizable:!1};return function(Et,ln,wn,rn,jt,qt,dn,Wt,Rt,mn,gn,li){let cr=0,mr=m0,iA=0,Ks=0;const YA=Wt==="right"?1:Wt==="left"?0:.5;let ir=0;for(const rA of jt){rA.trim();const $n=rA.getMaxScale(),KA=($n-1)*jr,JA={positionedGlyphs:[],lineOffset:0};Et.positionedLines[ir]=JA;const lA=JA.positionedGlyphs;let Os=0;if(!rA.length()){mr+=qt,++ir;continue}for(let AA=0;AA<rA.length();AA++){const ci=rA.getSection(AA),es=rA.getSectionIndex(AA),LA=rA.getCharCode(AA);let sA=0,jo=null,ba=null,ka=null,kl=jr;const Wo=!(Rt===c.ai.horizontal||!gn&&!ho(LA)||gn&&(mc[LA]||(Cn=LA,Kt.Arabic(Cn)||Kt["Arabic Supplement"](Cn)||Kt["Arabic Extended-A"](Cn)||Kt["Arabic Presentation Forms-A"](Cn)||Kt["Arabic Presentation Forms-B"](Cn))));if(ci.imageName){const bo=rn[ci.imageName];if(!bo)continue;ka=ci.imageName,Et.iconsInText=Et.iconsInText||!0,ba=bo.paddedRect;const ts=bo.displaySize;ci.scale=ci.scale*jr/li,jo={width:ts[0],height:ts[1],left:Fs,top:-md,advance:Wo?ts[1]:ts[0]},sA=KA+(jr-ts[1]*ci.scale),kl=jo.advance;const El=Wo?ts[0]*ci.scale-jr*$n:ts[1]*ci.scale-jr*$n;El>0&&El>Os&&(Os=El)}else{const bo=wn[ci.fontStack],ts=bo&&bo[LA];if(ts&&ts.rect)ba=ts.rect,jo=ts.metrics;else{const El=ln[ci.fontStack],xu=El&&El[LA];if(!xu)continue;jo=xu.metrics}sA=($n-ci.scale)*jr}Wo?(Et.verticalizable=!0,lA.push({glyph:LA,imageName:ka,x:cr,y:mr+sA,vertical:Wo,scale:ci.scale,fontStack:ci.fontStack,sectionIndex:es,metrics:jo,rect:ba}),cr+=kl*ci.scale+mn):(lA.push({glyph:LA,imageName:ka,x:cr,y:mr+sA,vertical:Wo,scale:ci.scale,fontStack:ci.fontStack,sectionIndex:es,metrics:jo,rect:ba}),cr+=jo.advance*ci.scale+mn)}lA.length!==0&&(iA=Math.max(cr-mn,iA),fg(lA,0,lA.length-1,YA,Os)),cr=0;const Ns=qt*$n+Os;JA.lineOffset=Math.max(Os,KA),mr+=Ns,Ks=Math.max(Ns,Ks),++ir}var Cn;const xA=mr-m0,{horizontalAlign:gr,verticalAlign:XA}=Dh(dn);(function(rA,$n,KA,JA,lA,Os,Ns,AA,ci){const es=($n-KA)*lA;let LA=0;LA=Os!==Ns?-AA*JA-m0:(-JA*ci+.5)*Ns;for(const sA of rA)for(const jo of sA.positionedGlyphs)jo.x+=es,jo.y+=LA})(Et.positionedLines,YA,gr,XA,iA,Ks,qt,xA,jt.length),Et.top+=-XA*xA,Et.bottom=Et.top+xA,Et.left+=-gr*iA,Et.right=Et.left+iA}(ft,r,u,g,Re,L,q,$,re,Y,ue,Me),!function(Et){for(const ln of Et)if(ln.positionedGlyphs.length!==0)return!1;return!0}(rt)&&ft}const mc={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},cg={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function _d(o,r,u,g,T,z){if(r.imageName){const L=g[r.imageName];return L?L.displaySize[0]*r.scale*jr/z+T:0}{const L=u[r.fontStack],q=L&&L[o];return q?q.metrics.advance*r.scale+T:0}}function gc(o,r,u,g){const T=Math.pow(o-r,2);return g?o<r?T/2:2*T:T+Math.abs(u)*u}function hg(o,r,u){let g=0;return o===10&&(g-=1e4),u&&(g+=150),o!==40&&o!==65288||(g+=50),r!==41&&r!==65289||(g+=50),g}function yd(o,r,u,g,T,z){let L=null,q=gc(r,u,T,z);for(const $ of g){const Y=gc(r-$.x,u,T,z)+$.badness;Y<=q&&(L=$,q=Y)}return{index:o,x:r,priorBreak:L,badness:q}}function vd(o){return o?vd(o.priorBreak).concat(o.index):[]}function Bh(o,r,u,g,T,z,L){if(z!=="point")return[];if(!o)return[];const q=[],$=function(ue,me,ge,Me,Ie,Re){let et=0;for(let Xe=0;Xe<ue.length();Xe++){const rt=ue.getSection(Xe);et+=_d(ue.getCharCode(Xe),rt,Me,Ie,me,Re)}return et/Math.max(1,Math.ceil(et/ge))}(o,r,u,g,T,L),Y=o.text.indexOf("")>=0;let ne=0;for(let ue=0;ue<o.length();ue++){const me=o.getSection(ue),ge=o.getCharCode(ue);if(mc[ge]||(ne+=_d(ge,me,g,T,r,L)),ue<o.length()-1){const Me=!((re=ge)<11904||!(Kt["Bopomofo Extended"](re)||Kt.Bopomofo(re)||Kt["CJK Compatibility Forms"](re)||Kt["CJK Compatibility Ideographs"](re)||Kt["CJK Compatibility"](re)||Kt["CJK Radicals Supplement"](re)||Kt["CJK Strokes"](re)||Kt["CJK Symbols and Punctuation"](re)||Kt["CJK Unified Ideographs Extension A"](re)||Kt["CJK Unified Ideographs"](re)||Kt["Enclosed CJK Letters and Months"](re)||Kt["Halfwidth and Fullwidth Forms"](re)||Kt.Hiragana(re)||Kt["Ideographic Description Characters"](re)||Kt["Kangxi Radicals"](re)||Kt["Katakana Phonetic Extensions"](re)||Kt.Katakana(re)||Kt["Vertical Forms"](re)||Kt["Yi Radicals"](re)||Kt["Yi Syllables"](re)));(cg[ge]||Me||me.imageName)&&q.push(yd(ue+1,ne,$,q,hg(ge,o.getCharCode(ue+1),Me&&Y),!1))}}var re;return vd(yd(o.length(),ne,$,q,0,!0))}function Dh(o){let r=.5,u=.5;switch(o){case"right":case"top-right":case"bottom-right":r=1;break;case"left":case"top-left":case"bottom-left":r=0}switch(o){case"bottom":case"bottom-right":case"bottom-left":u=1;break;case"top":case"top-right":case"top-left":u=0}return{horizontalAlign:r,verticalAlign:u}}function fg(o,r,u,g,T){if(!g&&!T)return;const z=o[u],L=(o[u].x+z.metrics.advance*z.scale)*g;for(let q=r;q<=u;q++)o[q].x-=L,o[q].y+=T}function dg(o,r,u){const{horizontalAlign:g,verticalAlign:T}=Dh(u),z=r[0]-o.displaySize[0]*g,L=r[1]-o.displaySize[1]*T;return{image:o,top:L,bottom:L+o.displaySize[1],left:z,right:z+o.displaySize[0]}}function xd(o,r,u,g,T,z){const L=o.image;let q;if(L.content){const Ie=L.content,Re=L.pixelRatio||1;q=[Ie[0]/Re,Ie[1]/Re,L.displaySize[0]-Ie[2]/Re,L.displaySize[1]-Ie[3]/Re]}const $=r.left*z,Y=r.right*z;let ne,re,ue,me;u==="width"||u==="both"?(me=T[0]+$-g[3],re=T[0]+Y+g[1]):(me=T[0]+($+Y-L.displaySize[0])/2,re=me+L.displaySize[0]);const ge=r.top*z,Me=r.bottom*z;return u==="height"||u==="both"?(ne=T[1]+ge-g[0],ue=T[1]+Me+g[2]):(ne=T[1]+(ge+Me-L.displaySize[1])/2,ue=ne+L.displaySize[1]),{image:L,top:ne,right:re,bottom:ue,left:me,collisionPadding:q}}const _0=255,el=128,$l=_0*el;function wd(o,r){const{expression:u}=r;if(u.kind==="constant")return{kind:"constant",layoutSize:u.evaluate(new Pi(o+1))};if(u.kind==="source")return{kind:"source"};{const{zoomStops:g,interpolationType:T}=u;let z=0;for(;z<g.length&&g[z]<=o;)z++;z=Math.max(0,z-1);let L=z;for(;L<g.length&&g[L]<o+1;)L++;L=Math.min(g.length-1,L);const q=g[z],$=g[L];return u.kind==="composite"?{kind:"composite",minZoom:q,maxZoom:$,interpolationType:T}:{kind:"camera",minZoom:q,maxZoom:$,minSize:u.evaluate(new Pi(q)),maxSize:u.evaluate(new Pi($)),interpolationType:T}}}function Ph(o,r,u){let g="never";const T=o.get(r);return T?g=T:o.get(u)&&(g="always"),g}const pg=ql.VectorTileFeature.types,mg=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function _c(o,r,u,g,T,z,L,q,$,Y,ne,re,ue){const me=q?Math.min($l,Math.round(q[0])):0,ge=q?Math.min($l,Math.round(q[1])):0;o.emplaceBack(r,u,Math.round(32*g),Math.round(32*T),z,L,(me<<1)+($?1:0),ge,16*Y,16*ne,256*re,256*ue)}function zh(o,r,u){o.emplaceBack(r.x,r.y,u),o.emplaceBack(r.x,r.y,u),o.emplaceBack(r.x,r.y,u),o.emplaceBack(r.x,r.y,u)}function gg(o){for(const r of o.sections)if(or(r.text))return!0;return!1}class Lh{constructor(r){this.layoutVertexArray=new cn,this.indexArray=new Wn,this.programConfigurations=r,this.segments=new bi,this.dynamicLayoutVertexArray=new Yt,this.opacityVertexArray=new tn,this.hasVisibleVertices=!1,this.placedSymbolArray=new X}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(r,u,g,T){this.isEmpty()||(g&&(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,ad.members),this.indexBuffer=r.createIndexBuffer(this.indexArray,u),this.dynamicLayoutVertexBuffer=r.createVertexBuffer(this.dynamicLayoutVertexArray,ld.members,!0),this.opacityVertexBuffer=r.createVertexBuffer(this.opacityVertexArray,mg,!0),this.opacityVertexBuffer.itemSize=1),(g||T)&&this.programConfigurations.upload(r))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}on("SymbolBuffers",Lh);class Rh{constructor(r,u,g){this.layoutVertexArray=new r,this.layoutAttributes=u,this.indexArray=new g,this.segments=new bi,this.collisionVertexArray=new an}upload(r){this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=r.createVertexBuffer(this.collisionVertexArray,eg.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}on("CollisionBuffers",Rh);class jl{constructor(r){this.collisionBoxArray=r.collisionBoxArray,this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(L=>L.id),this.index=r.index,this.pixelRatio=r.pixelRatio,this.sourceLayerIndex=r.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=cu([]),this.placementViewportMatrix=cu([]);const u=this.layers[0]._unevaluatedLayout._values;this.textSizeData=wd(this.zoom,u["text-size"]),this.iconSizeData=wd(this.zoom,u["icon-size"]);const g=this.layers[0].layout,T=g.get("symbol-sort-key"),z=g.get("symbol-z-order");this.canOverlap=Ph(g,"text-overlap","text-allow-overlap")!=="never"||Ph(g,"icon-overlap","icon-allow-overlap")!=="never"||g.get("text-ignore-placement")||g.get("icon-ignore-placement"),this.sortFeaturesByKey=z!=="viewport-y"&&!T.isConstant(),this.sortFeaturesByY=(z==="viewport-y"||z==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,g.get("symbol-placement")==="point"&&(this.writingModes=g.get("text-writing-mode").map(L=>c.ai[L])),this.stateDependentLayerIds=this.layers.filter(L=>L.isStateDependent()).map(L=>L.id),this.sourceID=r.sourceID}createArrays(){this.text=new Lh(new wa(this.layers,this.zoom,r=>/^text/.test(r))),this.icon=new Lh(new wa(this.layers,this.zoom,r=>/^icon/.test(r))),this.glyphOffsetArray=new ce,this.lineVertexArray=new fe,this.symbolInstances=new Ae,this.textAnchorOffsets=new Ne}calculateGlyphDependencies(r,u,g,T,z){for(let L=0;L<r.length;L++)if(u[r.charCodeAt(L)]=!0,(g||T)&&z){const q=mu[r.charAt(L)];q&&(u[q.charCodeAt(0)]=!0)}}populate(r,u,g){const T=this.layers[0],z=T.layout,L=z.get("text-font"),q=z.get("text-field"),$=z.get("icon-image"),Y=(q.value.kind!=="constant"||q.value.value instanceof He&&!q.value.value.isEmpty()||q.value.value.toString().length>0)&&(L.value.kind!=="constant"||L.value.value.length>0),ne=$.value.kind!=="constant"||!!$.value.value||Object.keys($.parameters).length>0,re=z.get("symbol-sort-key");if(this.features=[],!Y&&!ne)return;const ue=u.iconDependencies,me=u.glyphDependencies,ge=u.availableImages,Me=new Pi(this.zoom);for(const{feature:Ie,id:Re,index:et,sourceLayerIndex:Xe}of r){const rt=T._featureFilter.needGeometry,ft=Ql(Ie,rt);if(!T._featureFilter.filter(Me,ft,g))continue;let Et,ln;if(rt||(ft.geometry=au(Ie)),Y){const rn=T.getValueAndResolveTokens("text-field",ft,g,ge),jt=He.factory(rn);gg(jt)&&(this.hasRTLText=!0),(!this.hasRTLText||Wa()==="unavailable"||this.hasRTLText&&Ni.isParsed())&&(Et=f0(jt,T,ft))}if(ne){const rn=T.getValueAndResolveTokens("icon-image",ft,g,ge);ln=rn instanceof Er?rn:Er.fromString(rn)}if(!Et&&!ln)continue;const wn=this.sortFeaturesByKey?re.evaluate(ft,{},g):void 0;if(this.features.push({id:Re,text:Et,icon:ln,index:et,sourceLayerIndex:Xe,geometry:ft.geometry,properties:Ie.properties,type:pg[Ie.type],sortKey:wn}),ln&&(ue[ln.name]=!0),Et){const rn=L.evaluate(ft,{},g).join(","),jt=z.get("text-rotation-alignment")!=="viewport"&&z.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(c.ai.vertical)>=0;for(const qt of Et.sections)if(qt.image)ue[qt.image.name]=!0;else{const dn=Vo(Et.toString()),Wt=qt.fontStack||rn,Rt=me[Wt]=me[Wt]||{};this.calculateGlyphDependencies(qt.text,Rt,jt,this.allowVerticalPlacement,dn)}}}z.get("symbol-placement")==="line"&&(this.features=function(Ie){const Re={},et={},Xe=[];let rt=0;function ft(rn){Xe.push(Ie[rn]),rt++}function Et(rn,jt,qt){const dn=et[rn];return delete et[rn],et[jt]=dn,Xe[dn].geometry[0].pop(),Xe[dn].geometry[0]=Xe[dn].geometry[0].concat(qt[0]),dn}function ln(rn,jt,qt){const dn=Re[jt];return delete Re[jt],Re[rn]=dn,Xe[dn].geometry[0].shift(),Xe[dn].geometry[0]=qt[0].concat(Xe[dn].geometry[0]),dn}function wn(rn,jt,qt){const dn=qt?jt[0][jt[0].length-1]:jt[0][0];return`${rn}:${dn.x}:${dn.y}`}for(let rn=0;rn<Ie.length;rn++){const jt=Ie[rn],qt=jt.geometry,dn=jt.text?jt.text.toString():null;if(!dn){ft(rn);continue}const Wt=wn(dn,qt),Rt=wn(dn,qt,!0);if(Wt in et&&Rt in Re&&et[Wt]!==Re[Rt]){const mn=ln(Wt,Rt,qt),gn=Et(Wt,Rt,Xe[mn].geometry);delete Re[Wt],delete et[Rt],et[wn(dn,Xe[gn].geometry,!0)]=gn,Xe[mn].geometry=null}else Wt in et?Et(Wt,Rt,qt):Rt in Re?ln(Wt,Rt,qt):(ft(rn),Re[Wt]=rt-1,et[Rt]=rt-1)}return Xe.filter(rn=>rn.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Ie,Re)=>Ie.sortKey-Re.sortKey)}update(r,u,g){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(r,u,this.layers,g),this.icon.programConfigurations.updatePaintArrays(r,u,this.layers,g))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(r){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(r),this.iconCollisionBox.upload(r)),this.text.upload(r,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(r,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(r,u){const g=this.lineVertexArray.length;if(r.segment!==void 0){let T=r.dist(u[r.segment+1]),z=r.dist(u[r.segment]);const L={};for(let q=r.segment+1;q<u.length;q++)L[q]={x:u[q].x,y:u[q].y,tileUnitDistanceFromAnchor:T},q<u.length-1&&(T+=u[q+1].dist(u[q]));for(let q=r.segment||0;q>=0;q--)L[q]={x:u[q].x,y:u[q].y,tileUnitDistanceFromAnchor:z},q>0&&(z+=u[q-1].dist(u[q]));for(let q=0;q<u.length;q++){const $=L[q];this.lineVertexArray.emplaceBack($.x,$.y,$.tileUnitDistanceFromAnchor)}}return{lineStartIndex:g,lineLength:this.lineVertexArray.length-g}}addSymbols(r,u,g,T,z,L,q,$,Y,ne,re,ue){const me=r.indexArray,ge=r.layoutVertexArray,Me=r.segments.prepareSegment(4*u.length,ge,me,this.canOverlap?L.sortKey:void 0),Ie=this.glyphOffsetArray.length,Re=Me.vertexLength,et=this.allowVerticalPlacement&&q===c.ai.vertical?Math.PI/2:0,Xe=L.text&&L.text.sections;for(let rt=0;rt<u.length;rt++){const{tl:ft,tr:Et,bl:ln,br:wn,tex:rn,pixelOffsetTL:jt,pixelOffsetBR:qt,minFontScaleX:dn,minFontScaleY:Wt,glyphOffset:Rt,isSDF:mn,sectionIndex:gn}=u[rt],li=Me.vertexLength,cr=Rt[1];_c(ge,$.x,$.y,ft.x,cr+ft.y,rn.x,rn.y,g,mn,jt.x,jt.y,dn,Wt),_c(ge,$.x,$.y,Et.x,cr+Et.y,rn.x+rn.w,rn.y,g,mn,qt.x,jt.y,dn,Wt),_c(ge,$.x,$.y,ln.x,cr+ln.y,rn.x,rn.y+rn.h,g,mn,jt.x,qt.y,dn,Wt),_c(ge,$.x,$.y,wn.x,cr+wn.y,rn.x+rn.w,rn.y+rn.h,g,mn,qt.x,qt.y,dn,Wt),zh(r.dynamicLayoutVertexArray,$,et),me.emplaceBack(li,li+1,li+2),me.emplaceBack(li+1,li+2,li+3),Me.vertexLength+=4,Me.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Rt[0]),rt!==u.length-1&&gn===u[rt+1].sectionIndex||r.programConfigurations.populatePaintArrays(ge.length,L,L.index,{},ue,Xe&&Xe[gn])}r.placedSymbolArray.emplaceBack($.x,$.y,Ie,this.glyphOffsetArray.length-Ie,Re,Y,ne,$.segment,g?g[0]:0,g?g[1]:0,T[0],T[1],q,0,!1,0,re)}_addCollisionDebugVertex(r,u,g,T,z,L){return u.emplaceBack(0,0),r.emplaceBack(g.x,g.y,T,z,Math.round(L.x),Math.round(L.y))}addCollisionDebugVertices(r,u,g,T,z,L,q){const $=z.segments.prepareSegment(4,z.layoutVertexArray,z.indexArray),Y=$.vertexLength,ne=z.layoutVertexArray,re=z.collisionVertexArray,ue=q.anchorX,me=q.anchorY;this._addCollisionDebugVertex(ne,re,L,ue,me,new J(r,u)),this._addCollisionDebugVertex(ne,re,L,ue,me,new J(g,u)),this._addCollisionDebugVertex(ne,re,L,ue,me,new J(g,T)),this._addCollisionDebugVertex(ne,re,L,ue,me,new J(r,T)),$.vertexLength+=4;const ge=z.indexArray;ge.emplaceBack(Y,Y+1),ge.emplaceBack(Y+1,Y+2),ge.emplaceBack(Y+2,Y+3),ge.emplaceBack(Y+3,Y),$.primitiveLength+=4}addDebugCollisionBoxes(r,u,g,T){for(let z=r;z<u;z++){const L=this.collisionBoxArray.get(z);this.addCollisionDebugVertices(L.x1,L.y1,L.x2,L.y2,T?this.textCollisionBox:this.iconCollisionBox,L.anchorPoint,g)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Rh(fn,dc.members,bn),this.iconCollisionBox=new Rh(fn,dc.members,bn);for(let r=0;r<this.symbolInstances.length;r++){const u=this.symbolInstances.get(r);this.addDebugCollisionBoxes(u.textBoxStartIndex,u.textBoxEndIndex,u,!0),this.addDebugCollisionBoxes(u.verticalTextBoxStartIndex,u.verticalTextBoxEndIndex,u,!0),this.addDebugCollisionBoxes(u.iconBoxStartIndex,u.iconBoxEndIndex,u,!1),this.addDebugCollisionBoxes(u.verticalIconBoxStartIndex,u.verticalIconBoxEndIndex,u,!1)}}_deserializeCollisionBoxesForSymbol(r,u,g,T,z,L,q,$,Y){const ne={};for(let re=u;re<g;re++){const ue=r.get(re);ne.textBox={x1:ue.x1,y1:ue.y1,x2:ue.x2,y2:ue.y2,anchorPointX:ue.anchorPointX,anchorPointY:ue.anchorPointY},ne.textFeatureIndex=ue.featureIndex;break}for(let re=T;re<z;re++){const ue=r.get(re);ne.verticalTextBox={x1:ue.x1,y1:ue.y1,x2:ue.x2,y2:ue.y2,anchorPointX:ue.anchorPointX,anchorPointY:ue.anchorPointY},ne.verticalTextFeatureIndex=ue.featureIndex;break}for(let re=L;re<q;re++){const ue=r.get(re);ne.iconBox={x1:ue.x1,y1:ue.y1,x2:ue.x2,y2:ue.y2,anchorPointX:ue.anchorPointX,anchorPointY:ue.anchorPointY},ne.iconFeatureIndex=ue.featureIndex;break}for(let re=$;re<Y;re++){const ue=r.get(re);ne.verticalIconBox={x1:ue.x1,y1:ue.y1,x2:ue.x2,y2:ue.y2,anchorPointX:ue.anchorPointX,anchorPointY:ue.anchorPointY},ne.verticalIconFeatureIndex=ue.featureIndex;break}return ne}deserializeCollisionBoxes(r){this.collisionArrays=[];for(let u=0;u<this.symbolInstances.length;u++){const g=this.symbolInstances.get(u);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(r,g.textBoxStartIndex,g.textBoxEndIndex,g.verticalTextBoxStartIndex,g.verticalTextBoxEndIndex,g.iconBoxStartIndex,g.iconBoxEndIndex,g.verticalIconBoxStartIndex,g.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(r,u){const g=r.placedSymbolArray.get(u),T=g.vertexStartIndex+4*g.numGlyphs;for(let z=g.vertexStartIndex;z<T;z+=4)r.indexArray.emplaceBack(z,z+1,z+2),r.indexArray.emplaceBack(z+1,z+2,z+3)}getSortedSymbolIndexes(r){if(this.sortedAngle===r&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const u=Math.sin(r),g=Math.cos(r),T=[],z=[],L=[];for(let q=0;q<this.symbolInstances.length;++q){L.push(q);const $=this.symbolInstances.get(q);T.push(0|Math.round(u*$.anchorX+g*$.anchorY)),z.push($.featureIndex)}return L.sort((q,$)=>T[q]-T[$]||z[$]-z[q]),L}addToSortKeyRanges(r,u){const g=this.sortKeyRanges[this.sortKeyRanges.length-1];g&&g.sortKey===u?g.symbolInstanceEnd=r+1:this.sortKeyRanges.push({sortKey:u,symbolInstanceStart:r,symbolInstanceEnd:r+1})}sortFeatures(r){if(this.sortFeaturesByY&&this.sortedAngle!==r&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(r),this.sortedAngle=r,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const u of this.symbolInstanceIndexes){const g=this.symbolInstances.get(u);this.featureSortOrder.push(g.featureIndex),[g.rightJustifiedTextSymbolIndex,g.centerJustifiedTextSymbolIndex,g.leftJustifiedTextSymbolIndex].forEach((T,z,L)=>{T>=0&&L.indexOf(T)===z&&this.addIndicesForPlacedSymbol(this.text,T)}),g.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,g.verticalPlacedTextSymbolIndex),g.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,g.placedIconSymbolIndex),g.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,g.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let Fh,bd;on("SymbolBucket",jl,{omit:["layers","collisionBoxArray","features","compareText"]}),jl.MAX_GLYPHS=65535,jl.addDynamicAttributes=zh;var Oh={get paint(){return bd=bd||new Mi({"icon-opacity":new wt(pt.paint_symbol["icon-opacity"]),"icon-color":new wt(pt.paint_symbol["icon-color"]),"icon-halo-color":new wt(pt.paint_symbol["icon-halo-color"]),"icon-halo-width":new wt(pt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new wt(pt.paint_symbol["icon-halo-blur"]),"icon-translate":new ct(pt.paint_symbol["icon-translate"]),"icon-translate-anchor":new ct(pt.paint_symbol["icon-translate-anchor"]),"text-opacity":new wt(pt.paint_symbol["text-opacity"]),"text-color":new wt(pt.paint_symbol["text-color"],{runtimeType:br,getOverride:o=>o.textColor,hasOverride:o=>!!o.textColor}),"text-halo-color":new wt(pt.paint_symbol["text-halo-color"]),"text-halo-width":new wt(pt.paint_symbol["text-halo-width"]),"text-halo-blur":new wt(pt.paint_symbol["text-halo-blur"]),"text-translate":new ct(pt.paint_symbol["text-translate"]),"text-translate-anchor":new ct(pt.paint_symbol["text-translate-anchor"])})},get layout(){return Fh=Fh||new Mi({"symbol-placement":new ct(pt.layout_symbol["symbol-placement"]),"symbol-spacing":new ct(pt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new ct(pt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new wt(pt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new ct(pt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new ct(pt.layout_symbol["icon-allow-overlap"]),"icon-overlap":new ct(pt.layout_symbol["icon-overlap"]),"icon-ignore-placement":new ct(pt.layout_symbol["icon-ignore-placement"]),"icon-optional":new ct(pt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new ct(pt.layout_symbol["icon-rotation-alignment"]),"icon-size":new wt(pt.layout_symbol["icon-size"]),"icon-text-fit":new ct(pt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new ct(pt.layout_symbol["icon-text-fit-padding"]),"icon-image":new wt(pt.layout_symbol["icon-image"]),"icon-rotate":new wt(pt.layout_symbol["icon-rotate"]),"icon-padding":new wt(pt.layout_symbol["icon-padding"]),"icon-keep-upright":new ct(pt.layout_symbol["icon-keep-upright"]),"icon-offset":new wt(pt.layout_symbol["icon-offset"]),"icon-anchor":new wt(pt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new ct(pt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new ct(pt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new ct(pt.layout_symbol["text-rotation-alignment"]),"text-field":new wt(pt.layout_symbol["text-field"]),"text-font":new wt(pt.layout_symbol["text-font"]),"text-size":new wt(pt.layout_symbol["text-size"]),"text-max-width":new wt(pt.layout_symbol["text-max-width"]),"text-line-height":new ct(pt.layout_symbol["text-line-height"]),"text-letter-spacing":new wt(pt.layout_symbol["text-letter-spacing"]),"text-justify":new wt(pt.layout_symbol["text-justify"]),"text-radial-offset":new wt(pt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new ct(pt.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new wt(pt.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new wt(pt.layout_symbol["text-anchor"]),"text-max-angle":new ct(pt.layout_symbol["text-max-angle"]),"text-writing-mode":new ct(pt.layout_symbol["text-writing-mode"]),"text-rotate":new wt(pt.layout_symbol["text-rotate"]),"text-padding":new ct(pt.layout_symbol["text-padding"]),"text-keep-upright":new ct(pt.layout_symbol["text-keep-upright"]),"text-transform":new wt(pt.layout_symbol["text-transform"]),"text-offset":new wt(pt.layout_symbol["text-offset"]),"text-allow-overlap":new ct(pt.layout_symbol["text-allow-overlap"]),"text-overlap":new ct(pt.layout_symbol["text-overlap"]),"text-ignore-placement":new ct(pt.layout_symbol["text-ignore-placement"]),"text-optional":new ct(pt.layout_symbol["text-optional"])})}};class kd{constructor(r){if(r.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=r.property.overrides?r.property.overrides.runtimeType:hA,this.defaultValue=r}evaluate(r){if(r.formattedSection){const u=this.defaultValue.property.overrides;if(u&&u.hasOverride(r.formattedSection))return u.getOverride(r.formattedSection)}return r.feature&&r.featureState?this.defaultValue.evaluate(r.feature,r.featureState):this.defaultValue.property.specification.default}eachChild(r){this.defaultValue.isConstant()||r(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}on("FormatSectionOverride",kd,{omit:["defaultValue"]});class yc extends Vi{constructor(r){super(r,Oh)}recalculate(r,u){if(super.recalculate(r,u),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const g=this.layout.get("text-writing-mode");if(g){const T=[];for(const z of g)T.indexOf(z)<0&&T.push(z);this.layout._values["text-writing-mode"]=T}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(r,u,g,T){const z=this.layout.get(r).evaluate(u,{},g,T),L=this._unevaluatedLayout._values[r];return L.isDataDriven()||Hs(L.value)||!z?z:function(q,$){return $.replace(/{([^{}]+)}/g,(Y,ne)=>q&&ne in q?String(q[ne]):"")}(u.properties,z)}createBucket(r){return new jl(r)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const r of Oh.paint.overridableProperties){if(!yc.hasPaintOverride(this.layout,r))continue;const u=this.paint.get(r),g=new kd(u),T=new Ua(g,u.property.specification);let z=null;z=u.value.kind==="constant"||u.value.kind==="source"?new Fo("source",T):new Si("composite",T,u.value.zoomStops),this.paint._values[r]=new pr(u.property,z,u.parameters)}}_handleOverridablePaintPropertyUpdate(r,u,g){return!(!this.layout||u.isDataDriven()||g.isDataDriven())&&yc.hasPaintOverride(this.layout,r)}static hasPaintOverride(r,u){const g=r.get("text-field"),T=Oh.paint.properties[u];let z=!1;const L=q=>{for(const $ of q)if(T.overrides&&T.overrides.hasOverride($))return void(z=!0)};if(g.value.kind==="constant"&&g.value.value instanceof He)L(g.value.value.sections);else if(g.value.kind==="source"){const q=Y=>{z||(Y instanceof ye&&Be(Y.value)===ze?L(Y.value.sections):Y instanceof Cs?L(Y.sections):Y.eachChild(q))},$=g.value;$._styleExpression&&q($._styleExpression.expression)}return z}}let Ed;var _g={get paint(){return Ed=Ed||new Mi({"background-color":new ct(pt.paint_background["background-color"]),"background-pattern":new Go(pt.paint_background["background-pattern"]),"background-opacity":new ct(pt.paint_background["background-opacity"])})}};class yg extends Vi{constructor(r){super(r,_g)}}let Md;var Td={get paint(){return Md=Md||new Mi({"raster-opacity":new ct(pt.paint_raster["raster-opacity"]),"raster-hue-rotate":new ct(pt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new ct(pt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new ct(pt.paint_raster["raster-brightness-max"]),"raster-saturation":new ct(pt.paint_raster["raster-saturation"]),"raster-contrast":new ct(pt.paint_raster["raster-contrast"]),"raster-resampling":new ct(pt.paint_raster["raster-resampling"]),"raster-fade-duration":new ct(pt.paint_raster["raster-fade-duration"])})}};class vg extends Vi{constructor(r){super(r,Td)}}class vc extends Vi{constructor(r){super(r,{}),this.onAdd=u=>{this.implementation.onAdd&&this.implementation.onAdd(u,u.painter.context.gl)},this.onRemove=u=>{this.implementation.onRemove&&this.implementation.onRemove(u,u.painter.context.gl)},this.implementation=r}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class xg{constructor(r){this._callback=r,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const Nh=63710088e-1;class Wl{constructor(r,u){if(isNaN(r)||isNaN(u))throw new Error(`Invalid LngLat object: (${r}, ${u})`);if(this.lng=+r,this.lat=+u,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Wl(Ft(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(r){const u=Math.PI/180,g=this.lat*u,T=r.lat*u,z=Math.sin(g)*Math.sin(T)+Math.cos(g)*Math.cos(T)*Math.cos((r.lng-this.lng)*u);return Nh*Math.acos(Math.min(z,1))}static convert(r){if(r instanceof Wl)return r;if(Array.isArray(r)&&(r.length===2||r.length===3))return new Wl(Number(r[0]),Number(r[1]));if(!Array.isArray(r)&&typeof r=="object"&&r!==null)return new Wl(Number("lng"in r?r.lng:r.lon),Number(r.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const Sd=2*Math.PI*Nh;function Cd(o){return Sd*Math.cos(o*Math.PI/180)}function Id(o){return(180+o)/360}function Bd(o){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o*Math.PI/360)))/360}function Dd(o,r){return o/Cd(r)}function Pd(o){return 360*o-180}function Vh(o){return 360/Math.PI*Math.atan(Math.exp((180-360*o)*Math.PI/180))-90}class xc{constructor(r,u,g=0){this.x=+r,this.y=+u,this.z=+g}static fromLngLat(r,u=0){const g=Wl.convert(r);return new xc(Id(g.lng),Bd(g.lat),Dd(u,g.lat))}toLngLat(){return new Wl(Pd(this.x),Vh(this.y))}toAltitude(){return this.z*Cd(Vh(this.y))}meterInMercatorCoordinateUnits(){return 1/Sd*(r=Vh(this.y),1/Math.cos(r*Math.PI/180));var r}}function zd(o,r,u){var g=2*Math.PI*6378137/256/Math.pow(2,u);return[o*g-2*Math.PI*6378137/2,r*g-2*Math.PI*6378137/2]}class Uh{constructor(r,u,g){if(r<0||r>25||g<0||g>=Math.pow(2,r)||u<0||u>=Math.pow(2,r))throw new Error(`x=${u}, y=${g}, z=${r} outside of bounds. 0<=x<${Math.pow(2,r)}, 0<=y<${Math.pow(2,r)} 0<=z<=25 `);this.z=r,this.x=u,this.y=g,this.key=y0(0,r,r,u,g)}equals(r){return this.z===r.z&&this.x===r.x&&this.y===r.y}url(r,u,g){const T=(L=this.y,q=this.z,$=zd(256*(z=this.x),256*(L=Math.pow(2,q)-L-1),q),Y=zd(256*(z+1),256*(L+1),q),$[0]+","+$[1]+","+Y[0]+","+Y[1]);var z,L,q,$,Y;const ne=function(re,ue,me){let ge,Me="";for(let Ie=re;Ie>0;Ie--)ge=1<<Ie-1,Me+=(ue&ge?1:0)+(me&ge?2:0);return Me}(this.z,this.x,this.y);return r[(this.x+this.y)%r.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(g==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,u>1?"@2x":"").replace(/{quadkey}/g,ne).replace(/{bbox-epsg-3857}/g,T)}isChildOf(r){const u=this.z-r.z;return u>0&&r.x===this.x>>u&&r.y===this.y>>u}getTilePoint(r){const u=Math.pow(2,this.z);return new J((r.x*u-this.x)*Qr,(r.y*u-this.y)*Qr)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Ld{constructor(r,u){this.wrap=r,this.canonical=u,this.key=y0(r,u.z,u.z,u.x,u.y)}}class xo{constructor(r,u,g,T,z){if(r<g)throw new Error(`overscaledZ should be >= z; overscaledZ = ${r}; z = ${g}`);this.overscaledZ=r,this.wrap=u,this.canonical=new Uh(g,+T,+z),this.key=y0(u,r,g,T,z)}clone(){return new xo(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(r){return this.overscaledZ===r.overscaledZ&&this.wrap===r.wrap&&this.canonical.equals(r.canonical)}scaledTo(r){if(r>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${r}; overscaledZ = ${this.overscaledZ}`);const u=this.canonical.z-r;return r>this.canonical.z?new xo(r,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new xo(r,this.wrap,r,this.canonical.x>>u,this.canonical.y>>u)}calculateScaledKey(r,u){if(r>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${r}; overscaledZ = ${this.overscaledZ}`);const g=this.canonical.z-r;return r>this.canonical.z?y0(this.wrap*+u,r,this.canonical.z,this.canonical.x,this.canonical.y):y0(this.wrap*+u,r,r,this.canonical.x>>g,this.canonical.y>>g)}isChildOf(r){if(r.wrap!==this.wrap)return!1;const u=this.canonical.z-r.canonical.z;return r.overscaledZ===0||r.overscaledZ<this.overscaledZ&&r.canonical.x===this.canonical.x>>u&&r.canonical.y===this.canonical.y>>u}children(r){if(this.overscaledZ>=r)return[new xo(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const u=this.canonical.z+1,g=2*this.canonical.x,T=2*this.canonical.y;return[new xo(u,this.wrap,u,g,T),new xo(u,this.wrap,u,g+1,T),new xo(u,this.wrap,u,g,T+1),new xo(u,this.wrap,u,g+1,T+1)]}isLessThan(r){return this.wrap<r.wrap||!(this.wrap>r.wrap)&&(this.overscaledZ<r.overscaledZ||!(this.overscaledZ>r.overscaledZ)&&(this.canonical.x<r.canonical.x||!(this.canonical.x>r.canonical.x)&&this.canonical.y<r.canonical.y))}wrapped(){return new xo(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(r){return new xo(this.overscaledZ,r,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Ld(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(r){return this.canonical.getTilePoint(new xc(r.x-this.wrap,r.y))}}function y0(o,r,u,g,T){(o*=2)<0&&(o=-1*o-1);const z=1<<u;return(z*z*o+z*T+g).toString(36)+u.toString(36)+r.toString(36)}on("CanonicalTileID",Uh),on("OverscaledTileID",xo,{omit:["posMatrix"]});class Qh{constructor(r,u,g,T=1,z=1,L=1,q=0){if(this.uid=r,u.height!==u.width)throw new RangeError("DEM tiles must be square");if(g&&!["mapbox","terrarium","custom"].includes(g))return void De(`"${g}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=u.height;const $=this.dim=u.height-2;switch(this.data=new Uint32Array(u.data.buffer),g){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=T,this.greenFactor=z,this.blueFactor=L,this.baseShift=q;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let Y=0;Y<$;Y++)this.data[this._idx(-1,Y)]=this.data[this._idx(0,Y)],this.data[this._idx($,Y)]=this.data[this._idx($-1,Y)],this.data[this._idx(Y,-1)]=this.data[this._idx(Y,0)],this.data[this._idx(Y,$)]=this.data[this._idx(Y,$-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx($,-1)]=this.data[this._idx($-1,0)],this.data[this._idx(-1,$)]=this.data[this._idx(0,$-1)],this.data[this._idx($,$)]=this.data[this._idx($-1,$-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let Y=0;Y<$;Y++)for(let ne=0;ne<$;ne++){const re=this.get(Y,ne);re>this.max&&(this.max=re),re<this.min&&(this.min=re)}}get(r,u){const g=new Uint8Array(this.data.buffer),T=4*this._idx(r,u);return this.unpack(g[T],g[T+1],g[T+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(r,u){if(r<-1||r>=this.dim+1||u<-1||u>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(u+1)*this.stride+(r+1)}unpack(r,u,g){return r*this.redFactor+u*this.greenFactor+g*this.blueFactor-this.baseShift}getPixels(){return new ps({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(r,u,g){if(this.dim!==r.dim)throw new Error("dem dimension mismatch");let T=u*this.dim,z=u*this.dim+this.dim,L=g*this.dim,q=g*this.dim+this.dim;switch(u){case-1:T=z-1;break;case 1:z=T+1}switch(g){case-1:L=q-1;break;case 1:q=L+1}const $=-u*this.dim,Y=-g*this.dim;for(let ne=L;ne<q;ne++)for(let re=T;re<z;re++)this.data[this._idx(re,ne)]=r.data[this._idx(re+$,ne+Y)]}}on("DEMData",Qh);class Gh{constructor(r){this._stringToNumber={},this._numberToString=[];for(let u=0;u<r.length;u++){const g=r[u];this._stringToNumber[g]=u,this._numberToString[u]=g}}encode(r){return this._stringToNumber[r]}decode(r){if(r>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${r} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[r]}}class Rd{constructor(r,u,g,T,z){this.type="Feature",this._vectorTileFeature=r,r._z=u,r._x=g,r._y=T,this.properties=r.properties,this.id=z}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(r){this._geometry=r}toJSON(){const r={geometry:this.geometry};for(const u in this)u!=="_geometry"&&u!=="_vectorTileFeature"&&(r[u]=this[u]);return r}}class Fd{constructor(r,u){this.tileID=r,this.x=r.canonical.x,this.y=r.canonical.y,this.z=r.canonical.z,this.grid=new yA(Qr,16,0),this.grid3D=new yA(Qr,16,0),this.featureIndexArray=new Pe,this.promoteId=u}insert(r,u,g,T,z,L){const q=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(g,T,z);const $=L?this.grid3D:this.grid;for(let Y=0;Y<u.length;Y++){const ne=u[Y],re=[1/0,1/0,-1/0,-1/0];for(let ue=0;ue<ne.length;ue++){const me=ne[ue];re[0]=Math.min(re[0],me.x),re[1]=Math.min(re[1],me.y),re[2]=Math.max(re[2],me.x),re[3]=Math.max(re[3],me.y)}re[0]<Qr&&re[1]<Qr&&re[2]>=0&&re[3]>=0&&$.insert(q,re[0],re[1],re[2],re[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new ql.VectorTile(new Sh(this.rawTileData)).layers,this.sourceLayerCoder=new Gh(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(r,u,g,T){this.loadVTLayers();const z=r.params||{},L=Qr/r.tileSize/r.scale,q=qr(z.filter),$=r.queryGeometry,Y=r.queryPadding*L,ne=Nd($),re=this.grid.query(ne.minX-Y,ne.minY-Y,ne.maxX+Y,ne.maxY+Y),ue=Nd(r.cameraQueryGeometry),me=this.grid3D.query(ue.minX-Y,ue.minY-Y,ue.maxX+Y,ue.maxY+Y,(Ie,Re,et,Xe)=>function(rt,ft,Et,ln,wn){for(const jt of rt)if(ft<=jt.x&&Et<=jt.y&&ln>=jt.x&&wn>=jt.y)return!0;const rn=[new J(ft,Et),new J(ft,wn),new J(ln,wn),new J(ln,Et)];if(rt.length>2){for(const jt of rn)if(lu(rt,jt))return!0}for(let jt=0;jt<rt.length-1;jt++)if(Rm(rt[jt],rt[jt+1],rn))return!0;return!1}(r.cameraQueryGeometry,Ie-Y,Re-Y,et+Y,Xe+Y));for(const Ie of me)re.push(Ie);re.sort(wc);const ge={};let Me;for(let Ie=0;Ie<re.length;Ie++){const Re=re[Ie];if(Re===Me)continue;Me=Re;const et=this.featureIndexArray.get(Re);let Xe=null;this.loadMatchingFeature(ge,et.bucketIndex,et.sourceLayerIndex,et.featureIndex,q,z.layers,z.availableImages,u,g,T,(rt,ft,Et)=>(Xe||(Xe=au(rt)),ft.queryIntersectsFeature($,rt,Et,Xe,this.z,r.transform,L,r.pixelPosMatrix)))}return ge}loadMatchingFeature(r,u,g,T,z,L,q,$,Y,ne,re){const ue=this.bucketLayerIDs[u];if(L&&!function(Ie,Re){for(let et=0;et<Ie.length;et++)if(Re.indexOf(Ie[et])>=0)return!0;return!1}(L,ue))return;const me=this.sourceLayerCoder.decode(g),ge=this.vtLayers[me].feature(T);if(z.needGeometry){const Ie=Ql(ge,!0);if(!z.filter(new Pi(this.tileID.overscaledZ),Ie,this.tileID.canonical))return}else if(!z.filter(new Pi(this.tileID.overscaledZ),ge))return;const Me=this.getId(ge,me);for(let Ie=0;Ie<ue.length;Ie++){const Re=ue[Ie];if(L&&L.indexOf(Re)<0)continue;const et=$[Re];if(!et)continue;let Xe={};Me&&ne&&(Xe=ne.getState(et.sourceLayer||"_geojsonTileLayer",Me));const rt=It({},Y[Re]);rt.paint=Od(rt.paint,et.paint,ge,Xe,q),rt.layout=Od(rt.layout,et.layout,ge,Xe,q);const ft=!re||re(ge,et,Xe);if(!ft)continue;const Et=new Rd(ge,this.z,this.x,this.y,Me);Et.layer=rt;let ln=r[Re];ln===void 0&&(ln=r[Re]=[]),ln.push({featureIndex:T,feature:Et,intersectionZ:ft})}}lookupSymbolFeatures(r,u,g,T,z,L,q,$){const Y={};this.loadVTLayers();const ne=qr(z);for(const re of r)this.loadMatchingFeature(Y,g,T,re,ne,L,q,$,u);return Y}hasLayer(r){for(const u of this.bucketLayerIDs)for(const g of u)if(r===g)return!0;return!1}getId(r,u){let g=r.id;return this.promoteId&&(g=r.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[u]],typeof g=="boolean"&&(g=Number(g))),g}}function Od(o,r,u,g,T){return Zt(o,(z,L)=>{const q=r instanceof Hr?r.get(L):null;return q&&q.evaluate?q.evaluate(u,g,T):q})}function Nd(o){let r=1/0,u=1/0,g=-1/0,T=-1/0;for(const z of o)r=Math.min(r,z.x),u=Math.min(u,z.y),g=Math.max(g,z.x),T=Math.max(T,z.y);return{minX:r,minY:u,maxX:g,maxY:T}}function wc(o,r){return r-o}function Vd(o,r,u,g,T){const z=[];for(let L=0;L<o.length;L++){const q=o[L];let $;for(let Y=0;Y<q.length-1;Y++){let ne=q[Y],re=q[Y+1];ne.x<r&&re.x<r||(ne.x<r?ne=new J(r,ne.y+(r-ne.x)/(re.x-ne.x)*(re.y-ne.y))._round():re.x<r&&(re=new J(r,ne.y+(r-ne.x)/(re.x-ne.x)*(re.y-ne.y))._round()),ne.y<u&&re.y<u||(ne.y<u?ne=new J(ne.x+(u-ne.y)/(re.y-ne.y)*(re.x-ne.x),u)._round():re.y<u&&(re=new J(ne.x+(u-ne.y)/(re.y-ne.y)*(re.x-ne.x),u)._round()),ne.x>=g&&re.x>=g||(ne.x>=g?ne=new J(g,ne.y+(g-ne.x)/(re.x-ne.x)*(re.y-ne.y))._round():re.x>=g&&(re=new J(g,ne.y+(g-ne.x)/(re.x-ne.x)*(re.y-ne.y))._round()),ne.y>=T&&re.y>=T||(ne.y>=T?ne=new J(ne.x+(T-ne.y)/(re.y-ne.y)*(re.x-ne.x),T)._round():re.y>=T&&(re=new J(ne.x+(T-ne.y)/(re.y-ne.y)*(re.x-ne.x),T)._round()),$&&ne.equals($[$.length-1])||($=[ne],z.push($)),$.push(re)))))}}return z}on("FeatureIndex",Fd,{omit:["rawTileData","sourceLayerCoder"]});class Yl extends J{constructor(r,u,g,T){super(r,u),this.angle=g,T!==void 0&&(this.segment=T)}clone(){return new Yl(this.x,this.y,this.angle,this.segment)}}function Ud(o,r,u,g,T){if(r.segment===void 0||u===0)return!0;let z=r,L=r.segment+1,q=0;for(;q>-u/2;){if(L--,L<0)return!1;q-=o[L].dist(z),z=o[L]}q+=o[L].dist(o[L+1]),L++;const $=[];let Y=0;for(;q<u/2;){const ne=o[L],re=o[L+1];if(!re)return!1;let ue=o[L-1].angleTo(ne)-ne.angleTo(re);for(ue=Math.abs((ue+3*Math.PI)%(2*Math.PI)-Math.PI),$.push({distance:q,angleDelta:ue}),Y+=ue;q-$[0].distance>g;)Y-=$.shift().angleDelta;if(Y>T)return!1;L++,q+=ne.dist(re)}return!0}function Qd(o){let r=0;for(let u=0;u<o.length-1;u++)r+=o[u].dist(o[u+1]);return r}function Gd(o,r,u){return o?.6*r*u:0}function qd(o,r){return Math.max(o?o.right-o.left:0,r?r.right-r.left:0)}function wg(o,r,u,g,T,z){const L=Gd(u,T,z),q=qd(u,g)*z;let $=0;const Y=Qd(o)/2;for(let ne=0;ne<o.length-1;ne++){const re=o[ne],ue=o[ne+1],me=re.dist(ue);if($+me>Y){const ge=(Y-$)/me,Me=fr.number(re.x,ue.x,ge),Ie=fr.number(re.y,ue.y,ge),Re=new Yl(Me,Ie,ue.angleTo(re),ne);return Re._round(),!L||Ud(o,Re,q,L,r)?Re:void 0}$+=me}}function bg(o,r,u,g,T,z,L,q,$){const Y=Gd(g,z,L),ne=qd(g,T),re=ne*L,ue=o[0].x===0||o[0].x===$||o[0].y===0||o[0].y===$;return r-re<r/4&&(r=re+r/4),Zd(o,ue?r/2*q%r:(ne/2+2*z)*L*q%r,r,Y,u,re,ue,!1,$)}function Zd(o,r,u,g,T,z,L,q,$){const Y=z/2,ne=Qd(o);let re=0,ue=r-u,me=[];for(let ge=0;ge<o.length-1;ge++){const Me=o[ge],Ie=o[ge+1],Re=Me.dist(Ie),et=Ie.angleTo(Me);for(;ue+u<re+Re;){ue+=u;const Xe=(ue-re)/Re,rt=fr.number(Me.x,Ie.x,Xe),ft=fr.number(Me.y,Ie.y,Xe);if(rt>=0&&rt<$&&ft>=0&&ft<$&&ue-Y>=0&&ue+Y<=ne){const Et=new Yl(rt,ft,et,ge);Et._round(),g&&!Ud(o,Et,z,g,T)||me.push(Et)}}re+=Re}return q||me.length||L||(me=Zd(o,re/2,u,g,T,z,L,!0,$)),me}on("Anchor",Yl);const ju=Fs;function Hd(o,r,u,g){const T=[],z=o.image,L=z.pixelRatio,q=z.paddedRect.w-2*ju,$=z.paddedRect.h-2*ju,Y=o.right-o.left,ne=o.bottom-o.top,re=z.stretchX||[[0,q]],ue=z.stretchY||[[0,$]],me=(qt,dn)=>qt+dn[1]-dn[0],ge=re.reduce(me,0),Me=ue.reduce(me,0),Ie=q-ge,Re=$-Me;let et=0,Xe=ge,rt=0,ft=Me,Et=0,ln=Ie,wn=0,rn=Re;if(z.content&&g){const qt=z.content;et=yu(re,0,qt[0]),rt=yu(ue,0,qt[1]),Xe=yu(re,qt[0],qt[2]),ft=yu(ue,qt[1],qt[3]),Et=qt[0]-et,wn=qt[1]-rt,ln=qt[2]-qt[0]-Xe,rn=qt[3]-qt[1]-ft}const jt=(qt,dn,Wt,Rt)=>{const mn=v0(qt.stretch-et,Xe,Y,o.left),gn=x0(qt.fixed-Et,ln,qt.stretch,ge),li=v0(dn.stretch-rt,ft,ne,o.top),cr=x0(dn.fixed-wn,rn,dn.stretch,Me),mr=v0(Wt.stretch-et,Xe,Y,o.left),iA=x0(Wt.fixed-Et,ln,Wt.stretch,ge),Ks=v0(Rt.stretch-rt,ft,ne,o.top),YA=x0(Rt.fixed-wn,rn,Rt.stretch,Me),ir=new J(mn,li),Cn=new J(mr,li),xA=new J(mr,Ks),gr=new J(mn,Ks),XA=new J(gn/L,cr/L),rA=new J(iA/L,YA/L),$n=r*Math.PI/180;if($n){const lA=Math.sin($n),Os=Math.cos($n),Ns=[Os,-lA,lA,Os];ir._matMult(Ns),Cn._matMult(Ns),gr._matMult(Ns),xA._matMult(Ns)}const KA=qt.stretch+qt.fixed,JA=dn.stretch+dn.fixed;return{tl:ir,tr:Cn,bl:gr,br:xA,tex:{x:z.paddedRect.x+ju+KA,y:z.paddedRect.y+ju+JA,w:Wt.stretch+Wt.fixed-KA,h:Rt.stretch+Rt.fixed-JA},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:XA,pixelOffsetBR:rA,minFontScaleX:ln/L/Y,minFontScaleY:rn/L/ne,isSDF:u}};if(g&&(z.stretchX||z.stretchY)){const qt=$d(re,Ie,ge),dn=$d(ue,Re,Me);for(let Wt=0;Wt<qt.length-1;Wt++){const Rt=qt[Wt],mn=qt[Wt+1];for(let gn=0;gn<dn.length-1;gn++)T.push(jt(Rt,dn[gn],mn,dn[gn+1]))}}else T.push(jt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:q+1},{fixed:0,stretch:$+1}));return T}function yu(o,r,u){let g=0;for(const T of o)g+=Math.max(r,Math.min(u,T[1]))-Math.max(r,Math.min(u,T[0]));return g}function $d(o,r,u){const g=[{fixed:-ju,stretch:0}];for(const[T,z]of o){const L=g[g.length-1];g.push({fixed:T-L.stretch,stretch:L.stretch}),g.push({fixed:T-L.stretch,stretch:L.stretch+(z-T)})}return g.push({fixed:r+ju,stretch:u}),g}function v0(o,r,u,g){return o/r*u+g}function x0(o,r,u,g){return o-r*u/g}class Wu{constructor(r,u,g,T,z,L,q,$,Y,ne){if(this.boxStartIndex=r.length,Y){let re=L.top,ue=L.bottom;const me=L.collisionPadding;me&&(re-=me[1],ue+=me[3]);let ge=ue-re;ge>0&&(ge=Math.max(10,ge),this.circleDiameter=ge)}else{let re=L.top*q-$[0],ue=L.bottom*q+$[2],me=L.left*q-$[3],ge=L.right*q+$[1];const Me=L.collisionPadding;if(Me&&(me-=Me[0]*q,re-=Me[1]*q,ge+=Me[2]*q,ue+=Me[3]*q),ne){const Ie=new J(me,re),Re=new J(ge,re),et=new J(me,ue),Xe=new J(ge,ue),rt=ne*Math.PI/180;Ie._rotate(rt),Re._rotate(rt),et._rotate(rt),Xe._rotate(rt),me=Math.min(Ie.x,Re.x,et.x,Xe.x),ge=Math.max(Ie.x,Re.x,et.x,Xe.x),re=Math.min(Ie.y,Re.y,et.y,Xe.y),ue=Math.max(Ie.y,Re.y,et.y,Xe.y)}r.emplaceBack(u.x,u.y,me,re,ge,ue,g,T,z)}this.boxEndIndex=r.length}}class jd{constructor(r=[],u=Wd){if(this.data=r,this.length=this.data.length,this.compare=u,this.length>0)for(let g=(this.length>>1)-1;g>=0;g--)this._down(g)}push(r){this.data.push(r),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const r=this.data[0],u=this.data.pop();return this.length--,this.length>0&&(this.data[0]=u,this._down(0)),r}peek(){return this.data[0]}_up(r){const{data:u,compare:g}=this,T=u[r];for(;r>0;){const z=r-1>>1,L=u[z];if(g(T,L)>=0)break;u[r]=L,r=z}u[r]=T}_down(r){const{data:u,compare:g}=this,T=this.length>>1,z=u[r];for(;r<T;){let L=1+(r<<1),q=u[L];const $=L+1;if($<this.length&&g(u[$],q)<0&&(L=$,q=u[$]),g(q,z)>=0)break;u[r]=q,r=L}u[r]=z}}function Wd(o,r){return o<r?-1:o>r?1:0}function Yd(o,r=1,u=!1){let g=1/0,T=1/0,z=-1/0,L=-1/0;const q=o[0];for(let me=0;me<q.length;me++){const ge=q[me];(!me||ge.x<g)&&(g=ge.x),(!me||ge.y<T)&&(T=ge.y),(!me||ge.x>z)&&(z=ge.x),(!me||ge.y>L)&&(L=ge.y)}const $=Math.min(z-g,L-T);let Y=$/2;const ne=new jd([],Xd);if($===0)return new J(g,T);for(let me=g;me<z;me+=$)for(let ge=T;ge<L;ge+=$)ne.push(new Yu(me+Y,ge+Y,Y,o));let re=function(me){let ge=0,Me=0,Ie=0;const Re=me[0];for(let et=0,Xe=Re.length,rt=Xe-1;et<Xe;rt=et++){const ft=Re[et],Et=Re[rt],ln=ft.x*Et.y-Et.x*ft.y;Me+=(ft.x+Et.x)*ln,Ie+=(ft.y+Et.y)*ln,ge+=3*ln}return new Yu(Me/ge,Ie/ge,0,me)}(o),ue=ne.length;for(;ne.length;){const me=ne.pop();(me.d>re.d||!re.d)&&(re=me,u&&console.log("found best %d after %d probes",Math.round(1e4*me.d)/1e4,ue)),me.max-re.d<=r||(Y=me.h/2,ne.push(new Yu(me.p.x-Y,me.p.y-Y,Y,o)),ne.push(new Yu(me.p.x+Y,me.p.y-Y,Y,o)),ne.push(new Yu(me.p.x-Y,me.p.y+Y,Y,o)),ne.push(new Yu(me.p.x+Y,me.p.y+Y,Y,o)),ue+=4)}return u&&(console.log(`num probes: ${ue}`),console.log(`best distance: ${re.d}`)),re.p}function Xd(o,r){return r.max-o.max}function Yu(o,r,u,g){this.p=new J(o,r),this.h=u,this.d=function(T,z){let L=!1,q=1/0;for(let $=0;$<z.length;$++){const Y=z[$];for(let ne=0,re=Y.length,ue=re-1;ne<re;ue=ne++){const me=Y[ne],ge=Y[ue];me.y>T.y!=ge.y>T.y&&T.x<(ge.x-me.x)*(T.y-me.y)/(ge.y-me.y)+me.x&&(L=!L),q=Math.min(q,rh(T,me,ge))}}return(L?1:-1)*Math.sqrt(q)}(this.p,g),this.max=this.d+this.h*Math.SQRT2}var zA;c.aq=void 0,(zA=c.aq||(c.aq={}))[zA.center=1]="center",zA[zA.left=2]="left",zA[zA.right=3]="right",zA[zA.top=4]="top",zA[zA.bottom=5]="bottom",zA[zA["top-left"]=6]="top-left",zA[zA["top-right"]=7]="top-right",zA[zA["bottom-left"]=8]="bottom-left",zA[zA["bottom-right"]=9]="bottom-right";const Xl=7,Xu=Number.POSITIVE_INFINITY;function w0(o,r){return r[1]!==Xu?function(u,g,T){let z=0,L=0;switch(g=Math.abs(g),T=Math.abs(T),u){case"top-right":case"top-left":case"top":L=T-Xl;break;case"bottom-right":case"bottom-left":case"bottom":L=-T+Xl}switch(u){case"top-right":case"bottom-right":case"right":z=-g;break;case"top-left":case"bottom-left":case"left":z=g}return[z,L]}(o,r[0],r[1]):function(u,g){let T=0,z=0;g<0&&(g=0);const L=g/Math.SQRT2;switch(u){case"top-right":case"top-left":z=L-Xl;break;case"bottom-right":case"bottom-left":z=-L+Xl;break;case"bottom":z=-g+Xl;break;case"top":z=g-Xl}switch(u){case"top-right":case"bottom-right":T=-L;break;case"top-left":case"bottom-left":T=L;break;case"left":T=g;break;case"right":T=-g}return[T,z]}(o,r[0])}function Kd(o,r,u){var g;const T=o.layout,z=(g=T.get("text-variable-anchor-offset"))===null||g===void 0?void 0:g.evaluate(r,{},u);if(z){const q=z.values,$=[];for(let Y=0;Y<q.length;Y+=2){const ne=$[Y]=q[Y],re=q[Y+1].map(ue=>ue*jr);ne.startsWith("top")?re[1]-=Xl:ne.startsWith("bottom")&&(re[1]+=Xl),$[Y+1]=re}return new kn($)}const L=T.get("text-variable-anchor");if(L){let q;q=o._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[T.get("text-radial-offset").evaluate(r,{},u)*jr,Xu]:T.get("text-offset").evaluate(r,{},u).map(Y=>Y*jr);const $=[];for(const Y of L)$.push(Y,w0(Y,q));return new kn($)}return null}function qh(o){switch(o){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Zh(o,r,u,g,T,z,L,q,$,Y,ne){let re=z.textMaxSize.evaluate(r,{});re===void 0&&(re=L);const ue=o.layers[0].layout,me=ue.get("icon-offset").evaluate(r,{},ne),ge=Jd(u.horizontal),Me=L/24,Ie=o.tilePixelRatio*Me,Re=o.tilePixelRatio*re/24,et=o.tilePixelRatio*q,Xe=o.tilePixelRatio*ue.get("symbol-spacing"),rt=ue.get("text-padding")*o.tilePixelRatio,ft=function(Rt,mn,gn,li=1){const cr=Rt.get("icon-padding").evaluate(mn,{},gn),mr=cr&&cr.values;return[mr[0]*li,mr[1]*li,mr[2]*li,mr[3]*li]}(ue,r,ne,o.tilePixelRatio),Et=ue.get("text-max-angle")/180*Math.PI,ln=ue.get("text-rotation-alignment")!=="viewport"&&ue.get("symbol-placement")!=="point",wn=ue.get("icon-rotation-alignment")==="map"&&ue.get("symbol-placement")!=="point",rn=ue.get("symbol-placement"),jt=Xe/2,qt=ue.get("icon-text-fit");let dn;g&&qt!=="none"&&(o.allowVerticalPlacement&&u.vertical&&(dn=xd(g,u.vertical,qt,ue.get("icon-text-fit-padding"),me,Me)),ge&&(g=xd(g,ge,qt,ue.get("icon-text-fit-padding"),me,Me)));const Wt=(Rt,mn)=>{mn.x<0||mn.x>=Qr||mn.y<0||mn.y>=Qr||function(gn,li,cr,mr,iA,Ks,YA,ir,Cn,xA,gr,XA,rA,$n,KA,JA,lA,Os,Ns,AA,ci,es,LA,sA,jo){const ba=gn.addToLineVertexArray(li,cr);let ka,kl,Wo,bo,ts=0,El=0,xu=0,ip=0,Jh=-1,ef=-1;const wr={};let Vs=DA("");if(gn.allowVerticalPlacement&&mr.vertical){const ns=ir.layout.get("text-rotate").evaluate(ci,{},sA)+90;Wo=new Wu(Cn,li,xA,gr,XA,mr.vertical,rA,$n,KA,ns),YA&&(bo=new Wu(Cn,li,xA,gr,XA,YA,lA,Os,KA,ns))}if(iA){const ns=ir.layout.get("icon-rotate").evaluate(ci,{}),ko=ir.layout.get("icon-text-fit")!=="none",Yo=Hd(iA,ns,LA,ko),Ma=YA?Hd(YA,ns,LA,ko):void 0;kl=new Wu(Cn,li,xA,gr,XA,iA,lA,Os,!1,ns),ts=4*Yo.length;const wu=gn.iconSizeData;let tl=null;wu.kind==="source"?(tl=[el*ir.layout.get("icon-size").evaluate(ci,{})],tl[0]>$l&&De(`${gn.layerIds[0]}: Value for "icon-size" is >= ${_0}. Reduce your "icon-size".`)):wu.kind==="composite"&&(tl=[el*es.compositeIconSizes[0].evaluate(ci,{},sA),el*es.compositeIconSizes[1].evaluate(ci,{},sA)],(tl[0]>$l||tl[1]>$l)&&De(`${gn.layerIds[0]}: Value for "icon-size" is >= ${_0}. Reduce your "icon-size".`)),gn.addSymbols(gn.icon,Yo,tl,AA,Ns,ci,c.ai.none,li,ba.lineStartIndex,ba.lineLength,-1,sA),Jh=gn.icon.placedSymbolArray.length-1,Ma&&(El=4*Ma.length,gn.addSymbols(gn.icon,Ma,tl,AA,Ns,ci,c.ai.vertical,li,ba.lineStartIndex,ba.lineLength,-1,sA),ef=gn.icon.placedSymbolArray.length-1)}const rp=Object.keys(mr.horizontal);for(const ns of rp){const ko=mr.horizontal[ns];if(!ka){Vs=DA(ko.text);const Ma=ir.layout.get("text-rotate").evaluate(ci,{},sA);ka=new Wu(Cn,li,xA,gr,XA,ko,rA,$n,KA,Ma)}const Yo=ko.positionedLines.length===1;if(xu+=Hh(gn,li,ko,Ks,ir,KA,ci,JA,ba,mr.vertical?c.ai.horizontal:c.ai.horizontalOnly,Yo?rp:[ns],wr,Jh,es,sA),Yo)break}mr.vertical&&(ip+=Hh(gn,li,mr.vertical,Ks,ir,KA,ci,JA,ba,c.ai.vertical,["vertical"],wr,ef,es,sA));const Eg=ka?ka.boxStartIndex:gn.collisionBoxArray.length,Mg=ka?ka.boxEndIndex:gn.collisionBoxArray.length,Ap=Wo?Wo.boxStartIndex:gn.collisionBoxArray.length,Tg=Wo?Wo.boxEndIndex:gn.collisionBoxArray.length,Sg=kl?kl.boxStartIndex:gn.collisionBoxArray.length,Cg=kl?kl.boxEndIndex:gn.collisionBoxArray.length,sp=bo?bo.boxStartIndex:gn.collisionBoxArray.length,Ig=bo?bo.boxEndIndex:gn.collisionBoxArray.length;let Ea=-1;const kc=(ns,ko)=>ns&&ns.circleDiameter?Math.max(ns.circleDiameter,ko):ko;Ea=kc(ka,Ea),Ea=kc(Wo,Ea),Ea=kc(kl,Ea),Ea=kc(bo,Ea);const tf=Ea>-1?1:0;tf&&(Ea*=jo/jr),gn.glyphOffsetArray.length>=jl.MAX_GLYPHS&&De("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),ci.sortKey!==void 0&&gn.addToSortKeyRanges(gn.symbolInstances.length,ci.sortKey);const op=Kd(ir,ci,sA),[Bg,Dg]=function(ns,ko){const Yo=ns.length,Ma=ko==null?void 0:ko.values;if((Ma==null?void 0:Ma.length)>0)for(let wu=0;wu<Ma.length;wu+=2){const tl=Ma[wu+1];ns.emplaceBack(c.aq[Ma[wu]],tl[0],tl[1])}return[Yo,ns.length]}(gn.textAnchorOffsets,op);gn.symbolInstances.emplaceBack(li.x,li.y,wr.right>=0?wr.right:-1,wr.center>=0?wr.center:-1,wr.left>=0?wr.left:-1,wr.vertical||-1,Jh,ef,Vs,Eg,Mg,Ap,Tg,Sg,Cg,sp,Ig,xA,xu,ip,ts,El,tf,0,rA,Ea,Bg,Dg)}(o,mn,Rt,u,g,T,dn,o.layers[0],o.collisionBoxArray,r.index,r.sourceLayerIndex,o.index,Ie,[rt,rt,rt,rt],ln,$,et,ft,wn,me,r,z,Y,ne,L)};if(rn==="line")for(const Rt of Vd(r.geometry,0,0,Qr,Qr)){const mn=bg(Rt,Xe,Et,u.vertical||ge,g,24,Re,o.overscaling,Qr);for(const gn of mn)ge&&kg(o,ge.text,jt,gn)||Wt(Rt,gn)}else if(rn==="line-center"){for(const Rt of r.geometry)if(Rt.length>1){const mn=wg(Rt,Et,u.vertical||ge,g,24,Re);mn&&Wt(Rt,mn)}}else if(r.type==="Polygon")for(const Rt of dh(r.geometry,0)){const mn=Yd(Rt,16);Wt(Rt[0],new Yl(mn.x,mn.y,0))}else if(r.type==="LineString")for(const Rt of r.geometry)Wt(Rt,new Yl(Rt[0].x,Rt[0].y,0));else if(r.type==="Point")for(const Rt of r.geometry)for(const mn of Rt)Wt([mn],new Yl(mn.x,mn.y,0))}function Hh(o,r,u,g,T,z,L,q,$,Y,ne,re,ue,me,ge){const Me=function(et,Xe,rt,ft,Et,ln,wn,rn){const jt=ft.layout.get("text-rotate").evaluate(ln,{})*Math.PI/180,qt=[];for(const dn of Xe.positionedLines)for(const Wt of dn.positionedGlyphs){if(!Wt.rect)continue;const Rt=Wt.rect||{};let mn=md+1,gn=!0,li=1,cr=0;const mr=(Et||rn)&&Wt.vertical,iA=Wt.metrics.advance*Wt.scale/2;if(rn&&Xe.verticalizable&&(cr=dn.lineOffset/2-(Wt.imageName?-(jr-Wt.metrics.width*Wt.scale)/2:(Wt.scale-1)*jr)),Wt.imageName){const AA=wn[Wt.imageName];gn=AA.sdf,li=AA.pixelRatio,mn=Fs/li}const Ks=Et?[Wt.x+iA,Wt.y]:[0,0];let YA=Et?[0,0]:[Wt.x+iA+rt[0],Wt.y+rt[1]-cr],ir=[0,0];mr&&(ir=YA,YA=[0,0]);const Cn=Wt.metrics.isDoubleResolution?2:1,xA=(Wt.metrics.left-mn)*Wt.scale-iA+YA[0],gr=(-Wt.metrics.top-mn)*Wt.scale+YA[1],XA=xA+Rt.w/Cn*Wt.scale/li,rA=gr+Rt.h/Cn*Wt.scale/li,$n=new J(xA,gr),KA=new J(XA,gr),JA=new J(xA,rA),lA=new J(XA,rA);if(mr){const AA=new J(-iA,iA-m0),ci=-Math.PI/2,es=jr/2-iA,LA=new J(5-m0-es,-(Wt.imageName?es:0)),sA=new J(...ir);$n._rotateAround(ci,AA)._add(LA)._add(sA),KA._rotateAround(ci,AA)._add(LA)._add(sA),JA._rotateAround(ci,AA)._add(LA)._add(sA),lA._rotateAround(ci,AA)._add(LA)._add(sA)}if(jt){const AA=Math.sin(jt),ci=Math.cos(jt),es=[ci,-AA,AA,ci];$n._matMult(es),KA._matMult(es),JA._matMult(es),lA._matMult(es)}const Os=new J(0,0),Ns=new J(0,0);qt.push({tl:$n,tr:KA,bl:JA,br:lA,tex:Rt,writingMode:Xe.writingMode,glyphOffset:Ks,sectionIndex:Wt.sectionIndex,isSDF:gn,pixelOffsetTL:Os,pixelOffsetBR:Ns,minFontScaleX:0,minFontScaleY:0})}return qt}(0,u,q,T,z,L,g,o.allowVerticalPlacement),Ie=o.textSizeData;let Re=null;Ie.kind==="source"?(Re=[el*T.layout.get("text-size").evaluate(L,{})],Re[0]>$l&&De(`${o.layerIds[0]}: Value for "text-size" is >= ${_0}. Reduce your "text-size".`)):Ie.kind==="composite"&&(Re=[el*me.compositeTextSizes[0].evaluate(L,{},ge),el*me.compositeTextSizes[1].evaluate(L,{},ge)],(Re[0]>$l||Re[1]>$l)&&De(`${o.layerIds[0]}: Value for "text-size" is >= ${_0}. Reduce your "text-size".`)),o.addSymbols(o.text,Me,Re,q,z,L,Y,r,$.lineStartIndex,$.lineLength,ue,ge);for(const et of ne)re[et]=o.text.placedSymbolArray.length-1;return 4*Me.length}function Jd(o){for(const r in o)return o[r];return null}function kg(o,r,u,g){const T=o.compareText;if(r in T){const z=T[r];for(let L=z.length-1;L>=0;L--)if(g.dist(z[L])<u)return!0}else T[r]=[];return T[r].push(g),!1}const ep=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class $h{static from(r){if(!(r instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[u,g]=new Uint8Array(r,0,2);if(u!==219)throw new Error("Data does not appear to be in a KDBush format.");const T=g>>4;if(T!==1)throw new Error(`Got v${T} data when expected v1.`);const z=ep[15&g];if(!z)throw new Error("Unrecognized array type.");const[L]=new Uint16Array(r,2,1),[q]=new Uint32Array(r,4,1);return new $h(q,L,z,r)}constructor(r,u=64,g=Float64Array,T){if(isNaN(r)||r<0)throw new Error(`Unpexpected numItems value: ${r}.`);this.numItems=+r,this.nodeSize=Math.min(Math.max(+u,2),65535),this.ArrayType=g,this.IndexArrayType=r<65536?Uint16Array:Uint32Array;const z=ep.indexOf(this.ArrayType),L=2*r*this.ArrayType.BYTES_PER_ELEMENT,q=r*this.IndexArrayType.BYTES_PER_ELEMENT,$=(8-q%8)%8;if(z<0)throw new Error(`Unexpected typed array class: ${g}.`);T&&T instanceof ArrayBuffer?(this.data=T,this.ids=new this.IndexArrayType(this.data,8,r),this.coords=new this.ArrayType(this.data,8+q+$,2*r),this._pos=2*r,this._finished=!0):(this.data=new ArrayBuffer(8+L+q+$),this.ids=new this.IndexArrayType(this.data,8,r),this.coords=new this.ArrayType(this.data,8+q+$,2*r),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+z]),new Uint16Array(this.data,2,1)[0]=u,new Uint32Array(this.data,4,1)[0]=r)}add(r,u){const g=this._pos>>1;return this.ids[g]=g,this.coords[this._pos++]=r,this.coords[this._pos++]=u,g}finish(){const r=this._pos>>1;if(r!==this.numItems)throw new Error(`Added ${r} items when expected ${this.numItems}.`);return jh(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(r,u,g,T){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:z,coords:L,nodeSize:q}=this,$=[0,z.length-1,0],Y=[];for(;$.length;){const ne=$.pop()||0,re=$.pop()||0,ue=$.pop()||0;if(re-ue<=q){for(let Ie=ue;Ie<=re;Ie++){const Re=L[2*Ie],et=L[2*Ie+1];Re>=r&&Re<=g&&et>=u&&et<=T&&Y.push(z[Ie])}continue}const me=ue+re>>1,ge=L[2*me],Me=L[2*me+1];ge>=r&&ge<=g&&Me>=u&&Me<=T&&Y.push(z[me]),(ne===0?r<=ge:u<=Me)&&($.push(ue),$.push(me-1),$.push(1-ne)),(ne===0?g>=ge:T>=Me)&&($.push(me+1),$.push(re),$.push(1-ne))}return Y}within(r,u,g){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:T,coords:z,nodeSize:L}=this,q=[0,T.length-1,0],$=[],Y=g*g;for(;q.length;){const ne=q.pop()||0,re=q.pop()||0,ue=q.pop()||0;if(re-ue<=L){for(let Ie=ue;Ie<=re;Ie++)np(z[2*Ie],z[2*Ie+1],r,u)<=Y&&$.push(T[Ie]);continue}const me=ue+re>>1,ge=z[2*me],Me=z[2*me+1];np(ge,Me,r,u)<=Y&&$.push(T[me]),(ne===0?r-g<=ge:u-g<=Me)&&(q.push(ue),q.push(me-1),q.push(1-ne)),(ne===0?r+g>=ge:u+g>=Me)&&(q.push(me+1),q.push(re),q.push(1-ne))}return $}}function jh(o,r,u,g,T,z){if(T-g<=u)return;const L=g+T>>1;tp(o,r,L,g,T,z),jh(o,r,u,g,L-1,1-z),jh(o,r,u,L+1,T,1-z)}function tp(o,r,u,g,T,z){for(;T>g;){if(T-g>600){const Y=T-g+1,ne=u-g+1,re=Math.log(Y),ue=.5*Math.exp(2*re/3),me=.5*Math.sqrt(re*ue*(Y-ue)/Y)*(ne-Y/2<0?-1:1);tp(o,r,u,Math.max(g,Math.floor(u-ne*ue/Y+me)),Math.min(T,Math.floor(u+(Y-ne)*ue/Y+me)),z)}const L=r[2*u+z];let q=g,$=T;for(b0(o,r,g,u),r[2*T+z]>L&&b0(o,r,g,T);q<$;){for(b0(o,r,q,$),q++,$--;r[2*q+z]<L;)q++;for(;r[2*$+z]>L;)$--}r[2*g+z]===L?b0(o,r,g,$):($++,b0(o,r,$,T)),$<=u&&(g=$+1),u<=$&&(T=$-1)}}function b0(o,r,u,g){Wh(o,u,g),Wh(r,2*u,2*g),Wh(r,2*u+1,2*g+1)}function Wh(o,r,u){const g=o[r];o[r]=o[u],o[u]=g}function np(o,r,u,g){const T=o-u,z=r-g;return T*T+z*z}var Yh;c.bh=void 0,(Yh=c.bh||(c.bh={})).create="create",Yh.load="load",Yh.fullLoad="fullLoad";let bc=null,k0=[];const wo=1e3/60,Xh="loadTime",Kh="fullLoadTime",vu={mark(o){performance.mark(o)},frame(o){const r=o;bc!=null&&k0.push(r-bc),bc=r},clearMetrics(){bc=null,k0=[],performance.clearMeasures(Xh),performance.clearMeasures(Kh);for(const o in c.bh)performance.clearMarks(c.bh[o])},getPerformanceMetrics(){performance.measure(Xh,c.bh.create,c.bh.load),performance.measure(Kh,c.bh.create,c.bh.fullLoad);const o=performance.getEntriesByName(Xh)[0].duration,r=performance.getEntriesByName(Kh)[0].duration,u=k0.length,g=1/(k0.reduce((z,L)=>z+L,0)/u/1e3),T=k0.filter(z=>z>wo).reduce((z,L)=>z+(L-wo)/wo,0);return{loadTime:o,fullLoadTime:r,fps:g,percentDroppedFrames:T/(u+T)*100,totalFrames:u}}};c.$=function(o,r,u){var g,T,z,L,q,$,Y,ne,re,ue,me,ge,Me=u[0],Ie=u[1],Re=u[2];return r===o?(o[12]=r[0]*Me+r[4]*Ie+r[8]*Re+r[12],o[13]=r[1]*Me+r[5]*Ie+r[9]*Re+r[13],o[14]=r[2]*Me+r[6]*Ie+r[10]*Re+r[14],o[15]=r[3]*Me+r[7]*Ie+r[11]*Re+r[15]):(T=r[1],z=r[2],L=r[3],q=r[4],$=r[5],Y=r[6],ne=r[7],re=r[8],ue=r[9],me=r[10],ge=r[11],o[0]=g=r[0],o[1]=T,o[2]=z,o[3]=L,o[4]=q,o[5]=$,o[6]=Y,o[7]=ne,o[8]=re,o[9]=ue,o[10]=me,o[11]=ge,o[12]=g*Me+q*Ie+re*Re+r[12],o[13]=T*Me+$*Ie+ue*Re+r[13],o[14]=z*Me+Y*Ie+me*Re+r[14],o[15]=L*Me+ne*Ie+ge*Re+r[15]),o},c.A=Nu,c.B=fr,c.C=class{constructor(o,r,u){this.receive=g=>{const T=g.data,z=T.id;if(z&&(!T.targetMapId||this.mapId===T.targetMapId))if(T.type==="<cancel>"){delete this.tasks[z];const L=this.cancelCallbacks[z];delete this.cancelCallbacks[z],L&&L()}else Tt()||T.mustQueue?(this.tasks[z]=T,this.taskQueue.push(z),this.invoker.trigger()):this.processTask(z,T)},this.process=()=>{if(!this.taskQueue.length)return;const g=this.taskQueue.shift(),T=this.tasks[g];delete this.tasks[g],this.taskQueue.length&&this.invoker.trigger(),T&&this.processTask(g,T)},this.target=o,this.parent=r,this.mapId=u,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},this.invoker=new xg(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=Tt()?o:window}send(o,r,u,g,T=!1){const z=Math.round(1e18*Math.random()).toString(36).substring(0,10);u&&(this.callbacks[z]=u);const L=[],q={id:z,type:o,hasCallback:!!u,targetMapId:g,mustQueue:T,sourceMapId:this.mapId,data:CA(r,L)};return this.target.postMessage(q,{transfer:L}),{cancel:()=>{u&&delete this.callbacks[z],this.target.postMessage({id:z,type:"<cancel>",targetMapId:g,sourceMapId:this.mapId})}}}processTask(o,r){if(r.type==="<response>"){const u=this.callbacks[o];delete this.callbacks[o],u&&(r.error?u(vA(r.error)):u(null,vA(r.data)))}else{let u=!1;const g=[],T=r.hasCallback?(q,$)=>{u=!0,delete this.cancelCallbacks[o];const Y={id:o,type:"<response>",sourceMapId:this.mapId,error:q?CA(q):null,data:CA($,g)};this.target.postMessage(Y,{transfer:g})}:q=>{u=!0};let z=null;const L=vA(r.data);if(this.parent[r.type])z=this.parent[r.type](r.sourceMapId,L,T);else if("getWorkerSource"in this.parent){const q=r.type.split(".");z=this.parent.getWorkerSource(r.sourceMapId,q[0],L.source)[q[1]](L,T)}else T(new Error(`Could not find function ${r.type}`));!u&&z&&z.cancel&&(this.cancelCallbacks[o]=z.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},c.D=ct,c.E=uA,c.F=function(o,r){const u={};for(let g=0;g<r.length;g++){const T=r[g];T in o&&(u[T]=o[T])}return u},c.G=Id,c.H=Bd,c.I=Ih,c.J=je,c.K=Qe,c.L=Wl,c.M=hn,c.N=Qr,c.O=xo,c.P=J,c.Q=x,c.R=ps,c.S=bi,c.T=IA,c.U=xc,c.V=class extends H{},c.W=Uh,c.X=function(o,r){const u=window.document.createElement("video");u.muted=!0,u.onloadstart=function(){r(null,u)};for(let g=0;g<o.length;g++){const T=window.document.createElement("source");Pn(o[g])||(u.crossOrigin="Anonymous"),T.src=o[g],u.appendChild(T)}return{cancel:()=>{}}},c.Y=Nt,c.Z=function(){var o=new Nu(16);return Nu!=Float32Array&&(o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=0,o[12]=0,o[13]=0,o[14]=0),o[0]=1,o[5]=1,o[10]=1,o[15]=1,o},c._=U,c.a=Gt,c.a$=class extends k{},c.a0=function(o,r,u){var g=u[0],T=u[1],z=u[2];return o[0]=r[0]*g,o[1]=r[1]*g,o[2]=r[2]*g,o[3]=r[3]*g,o[4]=r[4]*T,o[5]=r[5]*T,o[6]=r[6]*T,o[7]=r[7]*T,o[8]=r[8]*z,o[9]=r[9]*z,o[10]=r[10]*z,o[11]=r[11]*z,o[12]=r[12],o[13]=r[13],o[14]=r[14],o[15]=r[15],o},c.a1=Ah,c.a2=function(){return nn++},c.a3=Q,c.a4=jl,c.a5=function(){Ni.isLoading()||Ni.isLoaded()||Wa()!=="deferred"||ii()},c.a6=qr,c.a7=Ql,c.a8=Pi,c.a9=Rd,c.aA=Uo,c.aB=function(o){o=o.slice();const r=Object.create(null);for(let u=0;u<o.length;u++)r[o[u].id]=o[u];for(let u=0;u<o.length;u++)"ref"in o[u]&&(o[u]=_r(o[u],r[o[u].ref]));return o},c.aC=function(o){if(o.type==="custom")return new vc(o);switch(o.type){case"background":return new yg(o);case"circle":return new Om(o);case"fill":return new td(o);case"fill-extrusion":return new rd(o);case"heatmap":return new ah(o);case"hillshade":return new ch(o);case"line":return new Jm(o);case"raster":return new vg(o);case"symbol":return new yc(o)}},c.aD=bt,c.aE=function(o,r){if(!o)return[{command:qn.setStyle,args:[r]}];let u=[];try{if(!pi(o.version,r.version))return[{command:qn.setStyle,args:[r]}];pi(o.center,r.center)||u.push({command:qn.setCenter,args:[r.center]}),pi(o.zoom,r.zoom)||u.push({command:qn.setZoom,args:[r.zoom]}),pi(o.bearing,r.bearing)||u.push({command:qn.setBearing,args:[r.bearing]}),pi(o.pitch,r.pitch)||u.push({command:qn.setPitch,args:[r.pitch]}),pi(o.sprite,r.sprite)||u.push({command:qn.setSprite,args:[r.sprite]}),pi(o.glyphs,r.glyphs)||u.push({command:qn.setGlyphs,args:[r.glyphs]}),pi(o.transition,r.transition)||u.push({command:qn.setTransition,args:[r.transition]}),pi(o.light,r.light)||u.push({command:qn.setLight,args:[r.light]});const g={},T=[];(function(L,q,$,Y){let ne;for(ne in q=q||{},L=L||{})Object.prototype.hasOwnProperty.call(L,ne)&&(Object.prototype.hasOwnProperty.call(q,ne)||So(ne,$,Y));for(ne in q)Object.prototype.hasOwnProperty.call(q,ne)&&(Object.prototype.hasOwnProperty.call(L,ne)?pi(L[ne],q[ne])||(L[ne].type==="geojson"&&q[ne].type==="geojson"&&FA(L,q,ne)?$.push({command:qn.setGeoJSONSourceData,args:[ne,q[ne].data]}):cA(ne,q,$,Y)):Br(ne,q,$))})(o.sources,r.sources,T,g);const z=[];o.layers&&o.layers.forEach(L=>{g[L.source]?u.push({command:qn.removeLayer,args:[L.id]}):z.push(L)}),u=u.concat(T),function(L,q,$){q=q||[];const Y=(L=L||[]).map(rs),ne=q.map(rs),re=L.reduce(Es,{}),ue=q.reduce(Es,{}),me=Y.slice(),ge=Object.create(null);let Me,Ie,Re,et,Xe,rt,ft;for(Me=0,Ie=0;Me<Y.length;Me++)Re=Y[Me],Object.prototype.hasOwnProperty.call(ue,Re)?Ie++:($.push({command:qn.removeLayer,args:[Re]}),me.splice(me.indexOf(Re,Ie),1));for(Me=0,Ie=0;Me<ne.length;Me++)Re=ne[ne.length-1-Me],me[me.length-1-Me]!==Re&&(Object.prototype.hasOwnProperty.call(re,Re)?($.push({command:qn.removeLayer,args:[Re]}),me.splice(me.lastIndexOf(Re,me.length-Ie),1)):Ie++,rt=me[me.length-Me],$.push({command:qn.addLayer,args:[ue[Re],rt]}),me.splice(me.length-Me,0,Re),ge[Re]=!0);for(Me=0;Me<ne.length;Me++)if(Re=ne[Me],et=re[Re],Xe=ue[Re],!ge[Re]&&!pi(et,Xe))if(pi(et.source,Xe.source)&&pi(et["source-layer"],Xe["source-layer"])&&pi(et.type,Xe.type)){for(ft in is(et.layout,Xe.layout,$,Re,null,qn.setLayoutProperty),is(et.paint,Xe.paint,$,Re,null,qn.setPaintProperty),pi(et.filter,Xe.filter)||$.push({command:qn.setFilter,args:[Re,Xe.filter]}),pi(et.minzoom,Xe.minzoom)&&pi(et.maxzoom,Xe.maxzoom)||$.push({command:qn.setLayerZoomRange,args:[Re,Xe.minzoom,Xe.maxzoom]}),et)Object.prototype.hasOwnProperty.call(et,ft)&&ft!=="layout"&&ft!=="paint"&&ft!=="filter"&&ft!=="metadata"&&ft!=="minzoom"&&ft!=="maxzoom"&&(ft.indexOf("paint.")===0?is(et[ft],Xe[ft],$,Re,ft.slice(6),qn.setPaintProperty):pi(et[ft],Xe[ft])||$.push({command:qn.setLayerProperty,args:[Re,ft,Xe[ft]]}));for(ft in Xe)Object.prototype.hasOwnProperty.call(Xe,ft)&&!Object.prototype.hasOwnProperty.call(et,ft)&&ft!=="layout"&&ft!=="paint"&&ft!=="filter"&&ft!=="metadata"&&ft!=="minzoom"&&ft!=="maxzoom"&&(ft.indexOf("paint.")===0?is(et[ft],Xe[ft],$,Re,ft.slice(6),qn.setPaintProperty):pi(et[ft],Xe[ft])||$.push({command:qn.setLayerProperty,args:[Re,ft,Xe[ft]]}))}else $.push({command:qn.removeLayer,args:[Re]}),rt=me[me.lastIndexOf(Re)+1],$.push({command:qn.addLayer,args:[Xe,rt]})}(z,r.layers,u)}catch(g){console.warn("Unable to compute style diff:",g),u=[{command:qn.setStyle,args:[r]}]}return u},c.aF=function(o){const r=[],u=o.id;return u===void 0&&r.push({message:`layers.${u}: missing required property "id"`}),o.render===void 0&&r.push({message:`layers.${u}: missing required method "render"`}),o.renderingMode&&o.renderingMode!=="2d"&&o.renderingMode!=="3d"&&r.push({message:`layers.${u}: property "renderingMode" must be either "2d" or "3d"`}),r},c.aG=function o(r,u){if(Array.isArray(r)){if(!Array.isArray(u)||r.length!==u.length)return!1;for(let g=0;g<r.length;g++)if(!o(r[g],u[g]))return!1;return!0}if(typeof r=="object"&&r!==null&&u!==null){if(typeof u!="object"||Object.keys(r).length!==Object.keys(u).length)return!1;for(const g in r)if(!o(r[g],u[g]))return!1;return!0}return r===u},c.aH=Zt,c.aI=At,c.aJ=Qo,c.aK=function(o){return o({pluginStatus:Or,pluginURL:$A}),Qo.on("pluginStateChange",o),o},c.aL=class extends Ur{constructor(o,r){super(o,r),this.current=0}set(o){this.current!==o&&(this.current=o,this.gl.uniform1i(this.location,o))}},c.aM=Ul,c.aN=class extends Ur{constructor(o,r){super(o,r),this.current=eh}set(o){if(o[12]!==this.current[12]||o[0]!==this.current[0])return this.current=o,void this.gl.uniformMatrix4fv(this.location,!1,o);for(let r=1;r<16;r++)if(o[r]!==this.current[r]){this.current=o,this.gl.uniformMatrix4fv(this.location,!1,o);break}}},c.aO=J0,c.aP=class extends Ur{constructor(o,r){super(o,r),this.current=[0,0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]&&o[2]===this.current[2]||(this.current=o,this.gl.uniform3f(this.location,o[0],o[1],o[2]))}},c.aQ=class extends Ur{constructor(o,r){super(o,r),this.current=[0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]||(this.current=o,this.gl.uniform2f(this.location,o[0],o[1]))}},c.aR=ec,c.aS=function(o,r,u,g,T,z,L){var q=1/(r-u),$=1/(g-T),Y=1/(z-L);return o[0]=-2*q,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=-2*$,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=2*Y,o[11]=0,o[12]=(r+u)*q,o[13]=(T+g)*$,o[14]=(L+z)*Y,o[15]=1,o},c.aT=ti,c.aU=Fm,c.aV=class extends b{},c.aW=ud,c.aX=class extends B{},c.aY=function(o){return o<=1?1:Math.pow(2,Math.ceil(Math.log(o)/Math.LN2))},c.aZ=oh,c.a_=Ve,c.aa=function(o){const r={};if(o.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(u,g,T,z)=>{const L=T||z;return r[g]=!L||L.toLowerCase(),""}),r["max-age"]){const u=parseInt(r["max-age"],10);isNaN(u)?delete r["max-age"]:r["max-age"]=u}return r},c.ab=function(o,r){const u=[];for(const g in o)g in r||u.push(g);return u},c.ac=function(o){if(Ot==null){const r=o.navigator?o.navigator.userAgent:null;Ot=!!o.safari||!(!r||!(/\b(iPad|iPhone|iPod)\b/.test(r)||r.match("Safari")&&!r.match("Chrome")))}return Ot},c.ad=xt,c.ae=function(o,r,u){var g=Math.sin(u),T=Math.cos(u),z=r[0],L=r[1],q=r[2],$=r[3],Y=r[4],ne=r[5],re=r[6],ue=r[7];return r!==o&&(o[8]=r[8],o[9]=r[9],o[10]=r[10],o[11]=r[11],o[12]=r[12],o[13]=r[13],o[14]=r[14],o[15]=r[15]),o[0]=z*T+Y*g,o[1]=L*T+ne*g,o[2]=q*T+re*g,o[3]=$*T+ue*g,o[4]=Y*T-z*g,o[5]=ne*T-L*g,o[6]=re*T-q*g,o[7]=ue*T-$*g,o},c.af=function(o){var r=new Nu(16);return r[0]=o[0],r[1]=o[1],r[2]=o[2],r[3]=o[3],r[4]=o[4],r[5]=o[5],r[6]=o[6],r[7]=o[7],r[8]=o[8],r[9]=o[9],r[10]=o[10],r[11]=o[11],r[12]=o[12],r[13]=o[13],r[14]=o[14],r[15]=o[15],r},c.ag=zs,c.ah=function(o,r){let u=0,g=0;if(o.kind==="constant")g=o.layoutSize;else if(o.kind!=="source"){const{interpolationType:T,minZoom:z,maxZoom:L}=o,q=T?xt(Fi.interpolationFactor(T,r,z,L),0,1):0;o.kind==="camera"?g=fr.number(o.minSize,o.maxSize,q):u=q}return{uSizeT:u,uSize:g}},c.aj=function(o,{uSize:r,uSizeT:u},{lowerSize:g,upperSize:T}){return o.kind==="source"?g/el:o.kind==="composite"?fr.number(g/el,T/el,u):r},c.ak=zh,c.al=function(o,r,u,g){const T=r.y-o.y,z=r.x-o.x,L=g.y-u.y,q=g.x-u.x,$=L*z-q*T;if($===0)return null;const Y=(q*(o.y-u.y)-L*(o.x-u.x))/$;return new J(o.x+Y*z,o.y+Y*T)},c.am=Vd,c.an=nc,c.ao=cu,c.ap=jr,c.ar=Ph,c.as=function(o,r){var u=r[0],g=r[1],T=r[2],z=r[3],L=r[4],q=r[5],$=r[6],Y=r[7],ne=r[8],re=r[9],ue=r[10],me=r[11],ge=r[12],Me=r[13],Ie=r[14],Re=r[15],et=u*q-g*L,Xe=u*$-T*L,rt=u*Y-z*L,ft=g*$-T*q,Et=g*Y-z*q,ln=T*Y-z*$,wn=ne*Me-re*ge,rn=ne*Ie-ue*ge,jt=ne*Re-me*ge,qt=re*Ie-ue*Me,dn=re*Re-me*Me,Wt=ue*Re-me*Ie,Rt=et*Wt-Xe*dn+rt*qt+ft*jt-Et*rn+ln*wn;return Rt?(o[0]=(q*Wt-$*dn+Y*qt)*(Rt=1/Rt),o[1]=(T*dn-g*Wt-z*qt)*Rt,o[2]=(Me*ln-Ie*Et+Re*ft)*Rt,o[3]=(ue*Et-re*ln-me*ft)*Rt,o[4]=($*jt-L*Wt-Y*rn)*Rt,o[5]=(u*Wt-T*jt+z*rn)*Rt,o[6]=(Ie*rt-ge*ln-Re*Xe)*Rt,o[7]=(ne*ln-ue*rt+me*Xe)*Rt,o[8]=(L*dn-q*jt+Y*wn)*Rt,o[9]=(g*jt-u*dn-z*wn)*Rt,o[10]=(ge*Et-Me*rt+Re*et)*Rt,o[11]=(re*rt-ne*Et-me*et)*Rt,o[12]=(q*rn-L*qt-$*wn)*Rt,o[13]=(u*qt-g*rn+T*wn)*Rt,o[14]=(Me*Xe-ge*ft-Ie*et)*Rt,o[15]=(ne*ft-re*Xe+ue*et)*Rt,o):null},c.at=qh,c.au=Dh,c.av=$h,c.aw=function(){const o={},r=pt.$version;for(const u in pt.$root){const g=pt.$root[u];if(g.required){let T=null;T=u==="version"?r:g.type==="array"?[]:{},T!=null&&(o[u]=T)}}return o},c.ax=qn,c.ay=va,c.az=Bt,c.b=function(o,r){const u=new Blob([new Uint8Array(o)],{type:"image/png"});createImageBitmap(u).then(g=>{r(null,g)}).catch(g=>{r(new Error(`Could not load image because of ${g.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})},c.b0=Wn,c.b1=function(o,r){var u=o[0],g=o[1],T=o[2],z=o[3],L=o[4],q=o[5],$=o[6],Y=o[7],ne=o[8],re=o[9],ue=o[10],me=o[11],ge=o[12],Me=o[13],Ie=o[14],Re=o[15],et=r[0],Xe=r[1],rt=r[2],ft=r[3],Et=r[4],ln=r[5],wn=r[6],rn=r[7],jt=r[8],qt=r[9],dn=r[10],Wt=r[11],Rt=r[12],mn=r[13],gn=r[14],li=r[15];return Math.abs(u-et)<=ds*Math.max(1,Math.abs(u),Math.abs(et))&&Math.abs(g-Xe)<=ds*Math.max(1,Math.abs(g),Math.abs(Xe))&&Math.abs(T-rt)<=ds*Math.max(1,Math.abs(T),Math.abs(rt))&&Math.abs(z-ft)<=ds*Math.max(1,Math.abs(z),Math.abs(ft))&&Math.abs(L-Et)<=ds*Math.max(1,Math.abs(L),Math.abs(Et))&&Math.abs(q-ln)<=ds*Math.max(1,Math.abs(q),Math.abs(ln))&&Math.abs($-wn)<=ds*Math.max(1,Math.abs($),Math.abs(wn))&&Math.abs(Y-rn)<=ds*Math.max(1,Math.abs(Y),Math.abs(rn))&&Math.abs(ne-jt)<=ds*Math.max(1,Math.abs(ne),Math.abs(jt))&&Math.abs(re-qt)<=ds*Math.max(1,Math.abs(re),Math.abs(qt))&&Math.abs(ue-dn)<=ds*Math.max(1,Math.abs(ue),Math.abs(dn))&&Math.abs(me-Wt)<=ds*Math.max(1,Math.abs(me),Math.abs(Wt))&&Math.abs(ge-Rt)<=ds*Math.max(1,Math.abs(ge),Math.abs(Rt))&&Math.abs(Me-mn)<=ds*Math.max(1,Math.abs(Me),Math.abs(mn))&&Math.abs(Ie-gn)<=ds*Math.max(1,Math.abs(Ie),Math.abs(gn))&&Math.abs(Re-li)<=ds*Math.max(1,Math.abs(Re),Math.abs(li))},c.b2=function(o,r){return o[0]=r[0],o[1]=r[1],o[2]=r[2],o[3]=r[3],o[4]=r[4],o[5]=r[5],o[6]=r[6],o[7]=r[7],o[8]=r[8],o[9]=r[9],o[10]=r[10],o[11]=r[11],o[12]=r[12],o[13]=r[13],o[14]=r[14],o[15]=r[15],o},c.b3=function(o,r,u){return o[0]=r[0]*u[0],o[1]=r[1]*u[1],o[2]=r[2]*u[2],o[3]=r[3]*u[3],o},c.b4=function(o,r){return o[0]*r[0]+o[1]*r[1]+o[2]*r[2]+o[3]*r[3]},c.b5=Ft,c.b6=Ld,c.b7=Dd,c.b8=function(o,r,u,g,T){var z,L=1/Math.tan(r/2);return o[0]=L/u,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=L,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=-1,o[12]=0,o[13]=0,o[15]=0,T!=null&&T!==1/0?(o[10]=(T+g)*(z=1/(g-T)),o[14]=2*T*g*z):(o[10]=-1,o[14]=-2*g),o},c.b9=function(o,r,u){var g=Math.sin(u),T=Math.cos(u),z=r[4],L=r[5],q=r[6],$=r[7],Y=r[8],ne=r[9],re=r[10],ue=r[11];return r!==o&&(o[0]=r[0],o[1]=r[1],o[2]=r[2],o[3]=r[3],o[12]=r[12],o[13]=r[13],o[14]=r[14],o[15]=r[15]),o[4]=z*T+Y*g,o[5]=L*T+ne*g,o[6]=q*T+re*g,o[7]=$*T+ue*g,o[8]=Y*T-z*g,o[9]=ne*T-L*g,o[10]=re*T-q*g,o[11]=ue*T-$*g,o},c.bA=j,c.bB=Eh,c.bC=$s,c.bD=Ni,c.ba=nt,c.bb=it,c.bc=function(o,r){return o[0]=r[0],o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=r[1],o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=r[2],o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o},c.bd=class extends N{},c.be=Nh,c.bf=Pd,c.bg=vu,c.bi=xn,c.bj=function(o,r,u=!1){if(Or===cl||Or===hl||Or===fl)throw new Error("setRTLTextPlugin cannot be called multiple times.");$A=xi.resolveURL(o),Or=cl,po=r,ja(),u||ii()},c.bk=Wa,c.bl=function(o,r){const u={};for(let T=0;T<o.length;T++){const z=r&&r[o[T].id]||mA(o[T]);r&&(r[o[T].id]=z);let L=u[z];L||(L=u[z]=[]),L.push(o[T])}const g=[];for(const T in u)g.push(u[T]);return g},c.bm=on,c.bn=Gh,c.bo=Fd,c.bp=vo,c.bq=function(o){o.bucket.createArrays(),o.bucket.tilePixelRatio=Qr/(512*o.bucket.overscaling),o.bucket.compareText={},o.bucket.iconsNeedLinear=!1;const r=o.bucket.layers[0],u=r.layout,g=r._unevaluatedLayout._values,T={layoutIconSize:g["icon-size"].possiblyEvaluate(new Pi(o.bucket.zoom+1),o.canonical),layoutTextSize:g["text-size"].possiblyEvaluate(new Pi(o.bucket.zoom+1),o.canonical),textMaxSize:g["text-size"].possiblyEvaluate(new Pi(18))};if(o.bucket.textSizeData.kind==="composite"){const{minZoom:Y,maxZoom:ne}=o.bucket.textSizeData;T.compositeTextSizes=[g["text-size"].possiblyEvaluate(new Pi(Y),o.canonical),g["text-size"].possiblyEvaluate(new Pi(ne),o.canonical)]}if(o.bucket.iconSizeData.kind==="composite"){const{minZoom:Y,maxZoom:ne}=o.bucket.iconSizeData;T.compositeIconSizes=[g["icon-size"].possiblyEvaluate(new Pi(Y),o.canonical),g["icon-size"].possiblyEvaluate(new Pi(ne),o.canonical)]}const z=u.get("text-line-height")*jr,L=u.get("text-rotation-alignment")!=="viewport"&&u.get("symbol-placement")!=="point",q=u.get("text-keep-upright"),$=u.get("text-size");for(const Y of o.bucket.features){const ne=u.get("text-font").evaluate(Y,{},o.canonical).join(","),re=$.evaluate(Y,{},o.canonical),ue=T.layoutTextSize.evaluate(Y,{},o.canonical),me=T.layoutIconSize.evaluate(Y,{},o.canonical),ge={horizontal:{},vertical:void 0},Me=Y.text;let Ie,Re=[0,0];if(Me){const rt=Me.toString(),ft=u.get("text-letter-spacing").evaluate(Y,{},o.canonical)*jr,Et=Ha(rt)?ft:0,ln=u.get("text-anchor").evaluate(Y,{},o.canonical),wn=Kd(r,Y,o.canonical);if(!wn){const Wt=u.get("text-radial-offset").evaluate(Y,{},o.canonical);Re=Wt?w0(ln,[Wt*jr,Xu]):u.get("text-offset").evaluate(Y,{},o.canonical).map(Rt=>Rt*jr)}let rn=L?"center":u.get("text-justify").evaluate(Y,{},o.canonical);const jt=u.get("symbol-placement"),qt=jt==="point"?u.get("text-max-width").evaluate(Y,{},o.canonical)*jr:0,dn=()=>{o.bucket.allowVerticalPlacement&&Vo(rt)&&(ge.vertical=pc(Me,o.glyphMap,o.glyphPositions,o.imagePositions,ne,qt,z,ln,"left",Et,Re,c.ai.vertical,!0,jt,ue,re))};if(!L&&wn){const Wt=new Set;if(rn==="auto")for(let mn=0;mn<wn.values.length;mn+=2)Wt.add(qh(wn.values[mn]));else Wt.add(rn);let Rt=!1;for(const mn of Wt)if(!ge.horizontal[mn])if(Rt)ge.horizontal[mn]=ge.horizontal[0];else{const gn=pc(Me,o.glyphMap,o.glyphPositions,o.imagePositions,ne,qt,z,"center",mn,Et,Re,c.ai.horizontal,!1,jt,ue,re);gn&&(ge.horizontal[mn]=gn,Rt=gn.positionedLines.length===1)}dn()}else{rn==="auto"&&(rn=qh(ln));const Wt=pc(Me,o.glyphMap,o.glyphPositions,o.imagePositions,ne,qt,z,ln,rn,Et,Re,c.ai.horizontal,!1,jt,ue,re);Wt&&(ge.horizontal[rn]=Wt),dn(),Vo(rt)&&L&&q&&(ge.vertical=pc(Me,o.glyphMap,o.glyphPositions,o.imagePositions,ne,qt,z,ln,rn,Et,Re,c.ai.vertical,!1,jt,ue,re))}}let et=!1;if(Y.icon&&Y.icon.name){const rt=o.imageMap[Y.icon.name];rt&&(Ie=dg(o.imagePositions[Y.icon.name],u.get("icon-offset").evaluate(Y,{},o.canonical),u.get("icon-anchor").evaluate(Y,{},o.canonical)),et=!!rt.sdf,o.bucket.sdfIcons===void 0?o.bucket.sdfIcons=et:o.bucket.sdfIcons!==et&&De("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(rt.pixelRatio!==o.bucket.pixelRatio||u.get("icon-rotate").constantOr(1)!==0)&&(o.bucket.iconsNeedLinear=!0))}const Xe=Jd(ge.horizontal)||ge.vertical;o.bucket.iconsInText=!!Xe&&Xe.iconsInText,(Xe||Ie)&&Zh(o.bucket,Y,ge,Ie,o.imageMap,T,ue,me,Re,et,o.canonical)}o.showCollisionBoxes&&o.bucket.generateCollisionDebugBuffers()},c.br=wh,c.bs=u0,c.bt=PA,c.bu=class{constructor(o){this._marks={start:[o.url,"start"].join("#"),end:[o.url,"end"].join("#"),measure:o.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let o=performance.getEntriesByName(this._marks.measure);return o.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),o=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),o}},c.bv=Sh,c.bw=ql,c.bx=function(o,r,u,g,T){return U(this,void 0,void 0,function*(){if(Qe())try{return yield hn(o,r,u,g,T)}catch{}return function(z,L,q,$,Y){const ne=z.width,re=z.height;vn&&Dn||(vn=new OffscreenCanvas(ne,re),Dn=vn.getContext("2d",{willReadFrequently:!0})),vn.width=ne,vn.height=re,Dn.drawImage(z,0,0,ne,re);const ue=Dn.getImageData(L,q,$,Y);return Dn.clearRect(0,0,ne,re),ue.data}(o,r,u,g,T)})},c.by=Qh,c.bz=O,c.c=Ct,c.d=function(o,r){const u=new Image;u.onload=()=>{r(null,u),URL.revokeObjectURL(u.src),u.onload=null,window.requestAnimationFrame(()=>{u.src=_n})},u.onerror=()=>r(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const g=new Blob([new Uint8Array(o)],{type:"image/png"});u.src=o.byteLength?URL.createObjectURL(g):_n},c.e=It,c.f=function(o,r){return Lt(It(o,{type:"json"}),r)},c.g=En,c.h=xi,c.i=Tt,c.j=Jn,c.k=un,c.l=Ii,c.m=Lt,c.n=function(o){return new Sh(o).readFields(pd,[])},c.o=function(o,r,u){if(!o.length)return u(null,[]);let g=o.length;const T=new Array(o.length);let z=null;o.forEach((L,q)=>{r(L,($,Y)=>{$&&(z=$),T[q]=Y,--g==0&&u(z,T)})})},c.p=gd,c.q=Vu,c.r=Mi,c.s=Pn,c.t=Za,c.u=Kt,c.v=pt,c.w=De,c.x=ya,c.y=TA,c.z=function([o,r,u]){return r+=90,r*=Math.PI/180,u*=Math.PI/180,{x:o*Math.cos(r)*Math.sin(u),y:o*Math.sin(r)*Math.sin(u),z:o*Math.cos(u)}}}),M(["./shared"],function(c){class U{constructor(oe){this.keyCache={},oe&&this.replace(oe)}replace(oe){this._layerConfigs={},this._layers={},this.update(oe,[])}update(oe,de){for(const Le of oe){this._layerConfigs[Le.id]=Le;const Fe=this._layers[Le.id]=c.aC(Le);Fe._featureFilter=c.a6(Fe.filter),this.keyCache[Le.id]&&delete this.keyCache[Le.id]}for(const Le of de)delete this.keyCache[Le],delete this._layerConfigs[Le],delete this._layers[Le];this.familiesBySource={};const we=c.bl(Object.values(this._layerConfigs),this.keyCache);for(const Le of we){const Fe=Le.map(se=>this._layers[se.id]),tt=Fe[0];if(tt.visibility==="none")continue;const Ye=tt.source||"";let Oe=this.familiesBySource[Ye];Oe||(Oe=this.familiesBySource[Ye]={});const Ke=tt.sourceLayer||"_geojsonTileLayer";let yt=Oe[Ke];yt||(yt=Oe[Ke]=[]),yt.push(Fe)}}}class O{constructor(oe){const de={},we=[];for(const Ye in oe){const Oe=oe[Ye],Ke=de[Ye]={};for(const yt in Oe){const se=Oe[+yt];if(!se||se.bitmap.width===0||se.bitmap.height===0)continue;const _e={x:0,y:0,w:se.bitmap.width+2,h:se.bitmap.height+2};we.push(_e),Ke[yt]={rect:_e,metrics:se.metrics}}}const{w:Le,h:Fe}=c.p(we),tt=new c.q({width:Le||1,height:Fe||1});for(const Ye in oe){const Oe=oe[Ye];for(const Ke in Oe){const yt=Oe[+Ke];if(!yt||yt.bitmap.width===0||yt.bitmap.height===0)continue;const se=de[Ye][Ke].rect;c.q.copy(yt.bitmap,tt,{x:0,y:0},{x:se.x+1,y:se.y+1},yt.bitmap)}}this.image=tt,this.positions=de}}c.bm("GlyphAtlas",O);class j{constructor(oe){this.tileID=new c.O(oe.tileID.overscaledZ,oe.tileID.wrap,oe.tileID.canonical.z,oe.tileID.canonical.x,oe.tileID.canonical.y),this.uid=oe.uid,this.zoom=oe.zoom,this.pixelRatio=oe.pixelRatio,this.tileSize=oe.tileSize,this.source=oe.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=oe.showCollisionBoxes,this.collectResourceTiming=!!oe.collectResourceTiming,this.returnDependencies=!!oe.returnDependencies,this.promoteId=oe.promoteId,this.inFlightDependencies=[],this.dependencySentinel=-1}parse(oe,de,we,Le,Fe){this.status="parsing",this.data=oe,this.collisionBoxArray=new c.a3;const tt=new c.bn(Object.keys(oe.layers).sort()),Ye=new c.bo(this.tileID,this.promoteId);Ye.bucketLayerIDs=[];const Oe={},Ke={featureIndex:Ye,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:we},yt=de.familiesBySource[this.source];for(const Pt in yt){const Ht=oe.layers[Pt];if(!Ht)continue;Ht.version===1&&c.w(`Vector tile source "${this.source}" layer "${Pt}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Bn=tt.encode(Pt),$t=[];for(let sn=0;sn<Ht.length;sn++){const oi=Ht.feature(sn),Dr=Ye.getId(oi,Pt);$t.push({feature:oi,id:Dr,index:sn,sourceLayerIndex:Bn})}for(const sn of yt[Pt]){const oi=sn[0];oi.source!==this.source&&c.w(`layer.source = ${oi.source} does not equal this.source = ${this.source}`),oi.minzoom&&this.zoom<Math.floor(oi.minzoom)||oi.maxzoom&&this.zoom>=oi.maxzoom||oi.visibility!=="none"&&(W(sn,this.zoom,we),(Oe[oi.id]=oi.createBucket({index:Ye.bucketLayerIDs.length,layers:sn,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Bn,sourceID:this.source})).populate($t,Ke,this.tileID.canonical),Ye.bucketLayerIDs.push(sn.map(Dr=>Dr.id)))}}let se,_e,We,dt;const t=c.aH(Ke.glyphDependencies,Pt=>Object.keys(Pt).map(Number));this.inFlightDependencies.forEach(Pt=>Pt==null?void 0:Pt.cancel()),this.inFlightDependencies=[];const K=++this.dependencySentinel;Object.keys(t).length?this.inFlightDependencies.push(Le.send("getGlyphs",{uid:this.uid,stacks:t,source:this.source,tileID:this.tileID,type:"glyphs"},(Pt,Ht)=>{K===this.dependencySentinel&&(se||(se=Pt,_e=Ht,en.call(this)))})):_e={};const St=Object.keys(Ke.iconDependencies);St.length?this.inFlightDependencies.push(Le.send("getImages",{icons:St,source:this.source,tileID:this.tileID,type:"icons"},(Pt,Ht)=>{K===this.dependencySentinel&&(se||(se=Pt,We=Ht,en.call(this)))})):We={};const Qt=Object.keys(Ke.patternDependencies);function en(){if(se)return Fe(se);if(_e&&We&&dt){const Pt=new O(_e),Ht=new c.bp(We,dt);for(const Bn in Oe){const $t=Oe[Bn];$t instanceof c.a4?(W($t.layers,this.zoom,we),c.bq({bucket:$t,glyphMap:_e,glyphPositions:Pt.positions,imageMap:We,imagePositions:Ht.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):$t.hasPattern&&($t instanceof c.br||$t instanceof c.bs||$t instanceof c.bt)&&(W($t.layers,this.zoom,we),$t.addFeatures(Ke,this.tileID.canonical,Ht.patternPositions))}this.status="done",Fe(null,{buckets:Object.values(Oe).filter(Bn=>!Bn.isEmpty()),featureIndex:Ye,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Pt.image,imageAtlas:Ht,glyphMap:this.returnDependencies?_e:null,iconMap:this.returnDependencies?We:null,glyphPositions:this.returnDependencies?Pt.positions:null})}}Qt.length?this.inFlightDependencies.push(Le.send("getImages",{icons:Qt,source:this.source,tileID:this.tileID,type:"patterns"},(Pt,Ht)=>{K===this.dependencySentinel&&(se||(se=Pt,dt=Ht,en.call(this)))})):dt={},en.call(this)}}function W(ze,oe,de){const we=new c.a8(oe);for(const Le of ze)Le.recalculate(we,de)}function J(ze,oe){const de=c.l(ze.request,(we,Le,Fe,tt)=>{if(we)oe(we);else if(Le)try{const Ye=new c.bw.VectorTile(new c.bv(Le));oe(null,{vectorTile:Ye,rawData:Le,cacheControl:Fe,expires:tt})}catch(Ye){const Oe=new Uint8Array(Le);let Ke=`Unable to parse the tile at ${ze.request.url}, `;Ke+=Oe[0]===31&&Oe[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${Ye.messge}`,oe(new Error(Ke))}});return()=>{de.cancel(),oe()}}class ae{constructor(oe,de,we,Le){this.actor=oe,this.layerIndex=de,this.availableImages=we,this.loadVectorData=Le||J,this.fetching={},this.loading={},this.loaded={}}loadTile(oe,de){const we=oe.uid;this.loading||(this.loading={});const Le=!!(oe&&oe.request&&oe.request.collectResourceTiming)&&new c.bu(oe.request),Fe=this.loading[we]=new j(oe);Fe.abort=this.loadVectorData(oe,(tt,Ye)=>{if(delete this.loading[we],tt||!Ye)return Fe.status="done",this.loaded[we]=Fe,de(tt);const Oe=Ye.rawData,Ke={};Ye.expires&&(Ke.expires=Ye.expires),Ye.cacheControl&&(Ke.cacheControl=Ye.cacheControl);const yt={};if(Le){const se=Le.finish();se&&(yt.resourceTiming=JSON.parse(JSON.stringify(se)))}Fe.vectorTile=Ye.vectorTile,Fe.parse(Ye.vectorTile,this.layerIndex,this.availableImages,this.actor,(se,_e)=>{if(delete this.fetching[we],se||!_e)return de(se);de(null,c.e({rawTileData:Oe.slice(0)},_e,Ke,yt))}),this.loaded=this.loaded||{},this.loaded[we]=Fe,this.fetching[we]={rawTileData:Oe,cacheControl:Ke,resourceTiming:yt}})}reloadTile(oe,de){const we=this.loaded,Le=oe.uid;if(we&&we[Le]){const Fe=we[Le];Fe.showCollisionBoxes=oe.showCollisionBoxes,Fe.status==="parsing"?Fe.parse(Fe.vectorTile,this.layerIndex,this.availableImages,this.actor,(tt,Ye)=>{if(tt||!Ye)return de(tt,Ye);let Oe;if(this.fetching[Le]){const{rawTileData:Ke,cacheControl:yt,resourceTiming:se}=this.fetching[Le];delete this.fetching[Le],Oe=c.e({rawTileData:Ke.slice(0)},Ye,yt,se)}else Oe=Ye;de(null,Oe)}):Fe.status==="done"&&(Fe.vectorTile?Fe.parse(Fe.vectorTile,this.layerIndex,this.availableImages,this.actor,de):de())}}abortTile(oe,de){const we=this.loading,Le=oe.uid;we&&we[Le]&&we[Le].abort&&(we[Le].abort(),delete we[Le]),de()}removeTile(oe,de){const we=this.loaded,Le=oe.uid;we&&we[Le]&&delete we[Le],de()}}class be{constructor(){this.loaded={}}loadTile(oe,de){return c._(this,void 0,void 0,function*(){const{uid:we,encoding:Le,rawImageData:Fe,redFactor:tt,greenFactor:Ye,blueFactor:Oe,baseShift:Ke}=oe,yt=Fe.width+2,se=Fe.height+2,_e=c.a(Fe)?new c.R({width:yt,height:se},yield c.bx(Fe,-1,-1,yt,se)):Fe,We=new c.by(we,_e,Le,tt,Ye,Oe,Ke);this.loaded=this.loaded||{},this.loaded[we]=We,de(null,We)})}removeTile(oe){const de=this.loaded,we=oe.uid;de&&de[we]&&delete de[we]}}function Ze(ze,oe){if(ze.length!==0){xe(ze[0],oe);for(var de=1;de<ze.length;de++)xe(ze[de],!oe)}}function xe(ze,oe){for(var de=0,we=0,Le=0,Fe=ze.length,tt=Fe-1;Le<Fe;tt=Le++){var Ye=(ze[Le][0]-ze[tt][0])*(ze[tt][1]+ze[Le][1]),Oe=de+Ye;we+=Math.abs(de)>=Math.abs(Ye)?de-Oe+Ye:Ye-Oe+de,de=Oe}de+we>=0!=!!oe&&ze.reverse()}var Ce=c.bz(function ze(oe,de){var we,Le=oe&&oe.type;if(Le==="FeatureCollection")for(we=0;we<oe.features.length;we++)ze(oe.features[we],de);else if(Le==="GeometryCollection")for(we=0;we<oe.geometries.length;we++)ze(oe.geometries[we],de);else if(Le==="Feature")ze(oe.geometry,de);else if(Le==="Polygon")Ze(oe.coordinates,de);else if(Le==="MultiPolygon")for(we=0;we<oe.coordinates.length;we++)Ze(oe.coordinates[we],de);return oe});const je=c.bw.VectorTileFeature.prototype.toGeoJSON;var Qe={exports:{}},nt=c.bA,it=c.bw.VectorTileFeature,xt=Ft;function Ft(ze,oe){this.options=oe||{},this.features=ze,this.length=ze.length}function It(ze,oe){this.id=typeof ze.id=="number"?ze.id:void 0,this.type=ze.type,this.rawGeometry=ze.type===1?[ze.geometry]:ze.geometry,this.properties=ze.tags,this.extent=oe||4096}Ft.prototype.feature=function(ze){return new It(this.features[ze],this.options.extent)},It.prototype.loadGeometry=function(){var ze=this.rawGeometry;this.geometry=[];for(var oe=0;oe<ze.length;oe++){for(var de=ze[oe],we=[],Le=0;Le<de.length;Le++)we.push(new nt(de[Le][0],de[Le][1]));this.geometry.push(we)}return this.geometry},It.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var ze=this.geometry,oe=1/0,de=-1/0,we=1/0,Le=-1/0,Fe=0;Fe<ze.length;Fe++)for(var tt=ze[Fe],Ye=0;Ye<tt.length;Ye++){var Oe=tt[Ye];oe=Math.min(oe,Oe.x),de=Math.max(de,Oe.x),we=Math.min(we,Oe.y),Le=Math.max(Le,Oe.y)}return[oe,we,de,Le]},It.prototype.toGeoJSON=it.prototype.toGeoJSON;var nn=c.bB,Zt=xt;function At(ze){var oe=new nn;return function(de,we){for(var Le in de.layers)we.writeMessage(3,bt,de.layers[Le])}(ze,oe),oe.finish()}function bt(ze,oe){var de;oe.writeVarintField(15,ze.version||1),oe.writeStringField(1,ze.name||""),oe.writeVarintField(5,ze.extent||4096);var we={keys:[],values:[],keycache:{},valuecache:{}};for(de=0;de<ze.length;de++)we.feature=ze.feature(de),oe.writeMessage(2,kt,we);var Le=we.keys;for(de=0;de<Le.length;de++)oe.writeStringField(3,Le[de]);var Fe=we.values;for(de=0;de<Fe.length;de++)oe.writeMessage(4,Ot,Fe[de])}function kt(ze,oe){var de=ze.feature;de.id!==void 0&&oe.writeVarintField(1,de.id),oe.writeMessage(2,De,ze),oe.writeVarintField(3,de.type),oe.writeMessage(4,Tt,de)}function De(ze,oe){var de=ze.feature,we=ze.keys,Le=ze.values,Fe=ze.keycache,tt=ze.valuecache;for(var Ye in de.properties){var Oe=de.properties[Ye],Ke=Fe[Ye];if(Oe!==null){Ke===void 0&&(we.push(Ye),Fe[Ye]=Ke=we.length-1),oe.writeVarint(Ke);var yt=typeof Oe;yt!=="string"&&yt!=="boolean"&&yt!=="number"&&(Oe=JSON.stringify(Oe));var se=yt+":"+Oe,_e=tt[se];_e===void 0&&(Le.push(Oe),tt[se]=_e=Le.length-1),oe.writeVarint(_e)}}}function at(ze,oe){return(oe<<3)+(7&ze)}function lt(ze){return ze<<1^ze>>31}function Tt(ze,oe){for(var de=ze.loadGeometry(),we=ze.type,Le=0,Fe=0,tt=de.length,Ye=0;Ye<tt;Ye++){var Oe=de[Ye],Ke=1;we===1&&(Ke=Oe.length),oe.writeVarint(at(1,Ke));for(var yt=we===3?Oe.length-1:Oe.length,se=0;se<yt;se++){se===1&&we!==1&&oe.writeVarint(at(2,yt-1));var _e=Oe[se].x-Le,We=Oe[se].y-Fe;oe.writeVarint(lt(_e)),oe.writeVarint(lt(We)),Le+=_e,Fe+=We}we===3&&oe.writeVarint(at(7,1))}}function Ot(ze,oe){var de=typeof ze;de==="string"?oe.writeStringField(1,ze):de==="boolean"?oe.writeBooleanField(7,ze):de==="number"&&(ze%1!=0?oe.writeDoubleField(3,ze):ze<0?oe.writeSVarintField(6,ze):oe.writeVarintField(5,ze))}Qe.exports=At,Qe.exports.fromVectorTileJs=At,Qe.exports.fromGeojsonVt=function(ze,oe){oe=oe||{};var de={};for(var we in ze)de[we]=new Zt(ze[we].features,oe),de[we].name=we,de[we].version=oe.version,de[we].extent=oe.extent;return At({layers:de})},Qe.exports.GeoJSONWrapper=Zt;var Gt=c.bz(Qe.exports);const _n={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:ze=>ze},hn=Math.fround||(vn=new Float32Array(1),ze=>(vn[0]=+ze,vn[0]));var vn;const Dn=3,Qn=5,di=6;class xi{constructor(oe){this.options=Object.assign(Object.create(_n),oe),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(oe){const{log:de,minZoom:we,maxZoom:Le}=this.options;de&&console.time("total time");const Fe=`prepare ${oe.length} points`;de&&console.time(Fe),this.points=oe;const tt=[];for(let Oe=0;Oe<oe.length;Oe++){const Ke=oe[Oe];if(!Ke.geometry)continue;const[yt,se]=Ke.geometry.coordinates,_e=hn(Bt(yt)),We=hn(En(se));tt.push(_e,We,1/0,Oe,-1,1),this.options.reduce&&tt.push(0)}let Ye=this.trees[Le+1]=this._createTree(tt);de&&console.timeEnd(Fe);for(let Oe=Le;Oe>=we;Oe--){const Ke=+Date.now();Ye=this.trees[Oe]=this._createTree(this._cluster(Ye,Oe)),de&&console.log("z%d: %d clusters in %dms",Oe,Ye.numItems,+Date.now()-Ke)}return de&&console.timeEnd("total time"),this}getClusters(oe,de){let we=((oe[0]+180)%360+360)%360-180;const Le=Math.max(-90,Math.min(90,oe[1]));let Fe=oe[2]===180?180:((oe[2]+180)%360+360)%360-180;const tt=Math.max(-90,Math.min(90,oe[3]));if(oe[2]-oe[0]>=360)we=-180,Fe=180;else if(we>Fe){const se=this.getClusters([we,Le,180,tt],de),_e=this.getClusters([-180,Le,Fe,tt],de);return se.concat(_e)}const Ye=this.trees[this._limitZoom(de)],Oe=Ye.range(Bt(we),En(tt),Bt(Fe),En(Le)),Ke=Ye.data,yt=[];for(const se of Oe){const _e=this.stride*se;yt.push(Ke[_e+Qn]>1?Ct(Ke,_e,this.clusterProps):this.points[Ke[_e+Dn]])}return yt}getChildren(oe){const de=this._getOriginId(oe),we=this._getOriginZoom(oe),Le="No cluster with the specified id.",Fe=this.trees[we];if(!Fe)throw new Error(Le);const tt=Fe.data;if(de*this.stride>=tt.length)throw new Error(Le);const Ye=this.options.radius/(this.options.extent*Math.pow(2,we-1)),Oe=Fe.within(tt[de*this.stride],tt[de*this.stride+1],Ye),Ke=[];for(const yt of Oe){const se=yt*this.stride;tt[se+4]===oe&&Ke.push(tt[se+Qn]>1?Ct(tt,se,this.clusterProps):this.points[tt[se+Dn]])}if(Ke.length===0)throw new Error(Le);return Ke}getLeaves(oe,de,we){const Le=[];return this._appendLeaves(Le,oe,de=de||10,we=we||0,0),Le}getTile(oe,de,we){const Le=this.trees[this._limitZoom(oe)],Fe=Math.pow(2,oe),{extent:tt,radius:Ye}=this.options,Oe=Ye/tt,Ke=(we-Oe)/Fe,yt=(we+1+Oe)/Fe,se={features:[]};return this._addTileFeatures(Le.range((de-Oe)/Fe,Ke,(de+1+Oe)/Fe,yt),Le.data,de,we,Fe,se),de===0&&this._addTileFeatures(Le.range(1-Oe/Fe,Ke,1,yt),Le.data,Fe,we,Fe,se),de===Fe-1&&this._addTileFeatures(Le.range(0,Ke,Oe/Fe,yt),Le.data,-1,we,Fe,se),se.features.length?se:null}getClusterExpansionZoom(oe){let de=this._getOriginZoom(oe)-1;for(;de<=this.options.maxZoom;){const we=this.getChildren(oe);if(de++,we.length!==1)break;oe=we[0].properties.cluster_id}return de}_appendLeaves(oe,de,we,Le,Fe){const tt=this.getChildren(de);for(const Ye of tt){const Oe=Ye.properties;if(Oe&&Oe.cluster?Fe+Oe.point_count<=Le?Fe+=Oe.point_count:Fe=this._appendLeaves(oe,Oe.cluster_id,we,Le,Fe):Fe<Le?Fe++:oe.push(Ye),oe.length===we)break}return Fe}_createTree(oe){const de=new c.av(oe.length/this.stride|0,this.options.nodeSize,Float32Array);for(let we=0;we<oe.length;we+=this.stride)de.add(oe[we],oe[we+1]);return de.finish(),de.data=oe,de}_addTileFeatures(oe,de,we,Le,Fe,tt){for(const Ye of oe){const Oe=Ye*this.stride,Ke=de[Oe+Qn]>1;let yt,se,_e;if(Ke)yt=xn(de,Oe,this.clusterProps),se=de[Oe],_e=de[Oe+1];else{const t=this.points[de[Oe+Dn]];yt=t.properties;const[K,St]=t.geometry.coordinates;se=Bt(K),_e=En(St)}const We={type:1,geometry:[[Math.round(this.options.extent*(se*Fe-we)),Math.round(this.options.extent*(_e*Fe-Le))]],tags:yt};let dt;dt=Ke||this.options.generateId?de[Oe+Dn]:this.points[de[Oe+Dn]].id,dt!==void 0&&(We.id=dt),tt.features.push(We)}}_limitZoom(oe){return Math.max(this.options.minZoom,Math.min(Math.floor(+oe),this.options.maxZoom+1))}_cluster(oe,de){const{radius:we,extent:Le,reduce:Fe,minPoints:tt}=this.options,Ye=we/(Le*Math.pow(2,de)),Oe=oe.data,Ke=[],yt=this.stride;for(let se=0;se<Oe.length;se+=yt){if(Oe[se+2]<=de)continue;Oe[se+2]=de;const _e=Oe[se],We=Oe[se+1],dt=oe.within(Oe[se],Oe[se+1],Ye),t=Oe[se+Qn];let K=t;for(const St of dt){const Qt=St*yt;Oe[Qt+2]>de&&(K+=Oe[Qt+Qn])}if(K>t&&K>=tt){let St,Qt=_e*t,en=We*t,Pt=-1;const Ht=((se/yt|0)<<5)+(de+1)+this.points.length;for(const Bn of dt){const $t=Bn*yt;if(Oe[$t+2]<=de)continue;Oe[$t+2]=de;const sn=Oe[$t+Qn];Qt+=Oe[$t]*sn,en+=Oe[$t+1]*sn,Oe[$t+4]=Ht,Fe&&(St||(St=this._map(Oe,se,!0),Pt=this.clusterProps.length,this.clusterProps.push(St)),Fe(St,this._map(Oe,$t)))}Oe[se+4]=Ht,Ke.push(Qt/K,en/K,1/0,Ht,-1,K),Fe&&Ke.push(Pt)}else{for(let St=0;St<yt;St++)Ke.push(Oe[se+St]);if(K>1)for(const St of dt){const Qt=St*yt;if(!(Oe[Qt+2]<=de)){Oe[Qt+2]=de;for(let en=0;en<yt;en++)Ke.push(Oe[Qt+en])}}}}return Ke}_getOriginId(oe){return oe-this.points.length>>5}_getOriginZoom(oe){return(oe-this.points.length)%32}_map(oe,de,we){if(oe[de+Qn]>1){const tt=this.clusterProps[oe[de+di]];return we?Object.assign({},tt):tt}const Le=this.points[oe[de+Dn]].properties,Fe=this.options.map(Le);return we&&Fe===Le?Object.assign({},Fe):Fe}}function Ct(ze,oe,de){return{type:"Feature",id:ze[oe+Dn],properties:xn(ze,oe,de),geometry:{type:"Point",coordinates:[(we=ze[oe],360*(we-.5)),Gn(ze[oe+1])]}};var we}function xn(ze,oe,de){const we=ze[oe+Qn],Le=we>=1e4?`${Math.round(we/1e3)}k`:we>=1e3?Math.round(we/100)/10+"k":we,Fe=ze[oe+di],tt=Fe===-1?{}:Object.assign({},de[Fe]);return Object.assign(tt,{cluster:!0,cluster_id:ze[oe+Dn],point_count:we,point_count_abbreviated:Le})}function Bt(ze){return ze/360+.5}function En(ze){const oe=Math.sin(ze*Math.PI/180),de=.5-.25*Math.log((1+oe)/(1-oe))/Math.PI;return de<0?0:de>1?1:de}function Gn(ze){const oe=(180-360*ze)*Math.PI/180;return 360*Math.atan(Math.exp(oe))/Math.PI-90}function Lt(ze,oe,de,we){for(var Le,Fe=we,tt=de-oe>>1,Ye=de-oe,Oe=ze[oe],Ke=ze[oe+1],yt=ze[de],se=ze[de+1],_e=oe+3;_e<de;_e+=3){var We=Ii(ze[_e],ze[_e+1],Oe,Ke,yt,se);if(We>Fe)Le=_e,Fe=We;else if(We===Fe){var dt=Math.abs(_e-tt);dt<Ye&&(Le=_e,Ye=dt)}}Fe>we&&(Le-oe>3&&Lt(ze,oe,Le,we),ze[Le+2]=Fe,de-Le>3&&Lt(ze,Le,de,we))}function Ii(ze,oe,de,we,Le,Fe){var tt=Le-de,Ye=Fe-we;if(tt!==0||Ye!==0){var Oe=((ze-de)*tt+(oe-we)*Ye)/(tt*tt+Ye*Ye);Oe>1?(de=Le,we=Fe):Oe>0&&(de+=tt*Oe,we+=Ye*Oe)}return(tt=ze-de)*tt+(Ye=oe-we)*Ye}function Pn(ze,oe,de,we){var Le={id:ze===void 0?null:ze,type:oe,geometry:de,tags:we,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(Fe){var tt=Fe.geometry,Ye=Fe.type;if(Ye==="Point"||Ye==="MultiPoint"||Ye==="LineString")qi(Fe,tt);else if(Ye==="Polygon"||Ye==="MultiLineString")for(var Oe=0;Oe<tt.length;Oe++)qi(Fe,tt[Oe]);else if(Ye==="MultiPolygon")for(Oe=0;Oe<tt.length;Oe++)for(var Ke=0;Ke<tt[Oe].length;Ke++)qi(Fe,tt[Oe][Ke])}(Le),Le}function qi(ze,oe){for(var de=0;de<oe.length;de+=3)ze.minX=Math.min(ze.minX,oe[de]),ze.minY=Math.min(ze.minY,oe[de+1]),ze.maxX=Math.max(ze.maxX,oe[de]),ze.maxY=Math.max(ze.maxY,oe[de+1])}function Ar(ze,oe,de,we){if(oe.geometry){var Le=oe.geometry.coordinates,Fe=oe.geometry.type,tt=Math.pow(de.tolerance/((1<<de.maxZoom)*de.extent),2),Ye=[],Oe=oe.id;if(de.promoteId?Oe=oe.properties[de.promoteId]:de.generateId&&(Oe=we||0),Fe==="Point")un(Le,Ye);else if(Fe==="MultiPoint")for(var Ke=0;Ke<Le.length;Ke++)un(Le[Ke],Ye);else if(Fe==="LineString")Jn(Le,Ye,tt,!1);else if(Fe==="MultiLineString"){if(de.lineMetrics){for(Ke=0;Ke<Le.length;Ke++)Jn(Le[Ke],Ye=[],tt,!1),ze.push(Pn(Oe,"LineString",Ye,oe.properties));return}uA(Le,Ye,tt,!1)}else if(Fe==="Polygon")uA(Le,Ye,tt,!0);else{if(Fe!=="MultiPolygon"){if(Fe==="GeometryCollection"){for(Ke=0;Ke<oe.geometry.geometries.length;Ke++)Ar(ze,{id:Oe,geometry:oe.geometry.geometries[Ke],properties:oe.properties},de,we);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Ke=0;Ke<Le.length;Ke++){var yt=[];uA(Le[Ke],yt,tt,!0),Ye.push(yt)}}ze.push(Pn(Oe,Fe,Ye,oe.properties))}}function un(ze,oe){oe.push(pt(ze[0])),oe.push(ei(ze[1])),oe.push(0)}function Jn(ze,oe,de,we){for(var Le,Fe,tt=0,Ye=0;Ye<ze.length;Ye++){var Oe=pt(ze[Ye][0]),Ke=ei(ze[Ye][1]);oe.push(Oe),oe.push(Ke),oe.push(0),Ye>0&&(tt+=we?(Le*Ke-Oe*Fe)/2:Math.sqrt(Math.pow(Oe-Le,2)+Math.pow(Ke-Fe,2))),Le=Oe,Fe=Ke}var yt=oe.length-3;oe[2]=1,Lt(oe,0,yt,de),oe[yt+2]=1,oe.size=Math.abs(tt),oe.start=0,oe.end=oe.size}function uA(ze,oe,de,we){for(var Le=0;Le<ze.length;Le++){var Fe=[];Jn(ze[Le],Fe,de,we),oe.push(Fe)}}function pt(ze){return ze/360+.5}function ei(ze){var oe=Math.sin(ze*Math.PI/180),de=.5-.25*Math.log((1+oe)/(1-oe))/Math.PI;return de<0?0:de>1?1:de}function _r(ze,oe,de,we,Le,Fe,tt,Ye){if(we/=oe,Fe>=(de/=oe)&&tt<we)return ze;if(tt<de||Fe>=we)return null;for(var Oe=[],Ke=0;Ke<ze.length;Ke++){var yt=ze[Ke],se=yt.geometry,_e=yt.type,We=Le===0?yt.minX:yt.minY,dt=Le===0?yt.maxX:yt.maxY;if(We>=de&&dt<we)Oe.push(yt);else if(!(dt<de||We>=we)){var t=[];if(_e==="Point"||_e==="MultiPoint")pi(se,t,de,we,Le);else if(_e==="LineString")qn(se,t,de,we,Le,!1,Ye.lineMetrics);else if(_e==="MultiLineString")So(se,t,de,we,Le,!1);else if(_e==="Polygon")So(se,t,de,we,Le,!0);else if(_e==="MultiPolygon")for(var K=0;K<se.length;K++){var St=[];So(se[K],St,de,we,Le,!0),St.length&&t.push(St)}if(t.length){if(Ye.lineMetrics&&_e==="LineString"){for(K=0;K<t.length;K++)Oe.push(Pn(yt.id,_e,t[K],yt.tags));continue}_e!=="LineString"&&_e!=="MultiLineString"||(t.length===1?(_e="LineString",t=t[0]):_e="MultiLineString"),_e!=="Point"&&_e!=="MultiPoint"||(_e=t.length===3?"Point":"MultiPoint"),Oe.push(Pn(yt.id,_e,t,yt.tags))}}}return Oe.length?Oe:null}function pi(ze,oe,de,we,Le){for(var Fe=0;Fe<ze.length;Fe+=3){var tt=ze[Fe+Le];tt>=de&&tt<=we&&(oe.push(ze[Fe]),oe.push(ze[Fe+1]),oe.push(ze[Fe+2]))}}function qn(ze,oe,de,we,Le,Fe,tt){for(var Ye,Oe,Ke=Br(ze),yt=Le===0?FA:is,se=ze.start,_e=0;_e<ze.length-3;_e+=3){var We=ze[_e],dt=ze[_e+1],t=ze[_e+2],K=ze[_e+3],St=ze[_e+4],Qt=Le===0?We:dt,en=Le===0?K:St,Pt=!1;tt&&(Ye=Math.sqrt(Math.pow(We-K,2)+Math.pow(dt-St,2))),Qt<de?en>de&&(Oe=yt(Ke,We,dt,K,St,de),tt&&(Ke.start=se+Ye*Oe)):Qt>we?en<we&&(Oe=yt(Ke,We,dt,K,St,we),tt&&(Ke.start=se+Ye*Oe)):cA(Ke,We,dt,t),en<de&&Qt>=de&&(Oe=yt(Ke,We,dt,K,St,de),Pt=!0),en>we&&Qt<=we&&(Oe=yt(Ke,We,dt,K,St,we),Pt=!0),!Fe&&Pt&&(tt&&(Ke.end=se+Ye*Oe),oe.push(Ke),Ke=Br(ze)),tt&&(se+=Ye)}var Ht=ze.length-3;We=ze[Ht],dt=ze[Ht+1],t=ze[Ht+2],(Qt=Le===0?We:dt)>=de&&Qt<=we&&cA(Ke,We,dt,t),Ht=Ke.length-3,Fe&&Ht>=3&&(Ke[Ht]!==Ke[0]||Ke[Ht+1]!==Ke[1])&&cA(Ke,Ke[0],Ke[1],Ke[2]),Ke.length&&oe.push(Ke)}function Br(ze){var oe=[];return oe.size=ze.size,oe.start=ze.start,oe.end=ze.end,oe}function So(ze,oe,de,we,Le,Fe){for(var tt=0;tt<ze.length;tt++)qn(ze[tt],oe,de,we,Le,Fe,!1)}function cA(ze,oe,de,we){ze.push(oe),ze.push(de),ze.push(we)}function FA(ze,oe,de,we,Le,Fe){var tt=(Fe-oe)/(we-oe);return ze.push(Fe),ze.push(de+(Le-de)*tt),ze.push(1),tt}function is(ze,oe,de,we,Le,Fe){var tt=(Fe-de)/(Le-de);return ze.push(oe+(we-oe)*tt),ze.push(Fe),ze.push(1),tt}function rs(ze,oe){for(var de=[],we=0;we<ze.length;we++){var Le,Fe=ze[we],tt=Fe.type;if(tt==="Point"||tt==="MultiPoint"||tt==="LineString")Le=Es(Fe.geometry,oe);else if(tt==="MultiLineString"||tt==="Polygon"){Le=[];for(var Ye=0;Ye<Fe.geometry.length;Ye++)Le.push(Es(Fe.geometry[Ye],oe))}else if(tt==="MultiPolygon")for(Le=[],Ye=0;Ye<Fe.geometry.length;Ye++){for(var Oe=[],Ke=0;Ke<Fe.geometry[Ye].length;Ke++)Oe.push(Es(Fe.geometry[Ye][Ke],oe));Le.push(Oe)}de.push(Pn(Fe.id,tt,Le,Fe.tags))}return de}function Es(ze,oe){var de=[];de.size=ze.size,ze.start!==void 0&&(de.start=ze.start,de.end=ze.end);for(var we=0;we<ze.length;we+=3)de.push(ze[we]+oe,ze[we+1],ze[we+2]);return de}function Nt(ze,oe){if(ze.transformed)return ze;var de,we,Le,Fe=1<<ze.z,tt=ze.x,Ye=ze.y;for(de=0;de<ze.features.length;de++){var Oe=ze.features[de],Ke=Oe.geometry,yt=Oe.type;if(Oe.geometry=[],yt===1)for(we=0;we<Ke.length;we+=2)Oe.geometry.push(bA(Ke[we],Ke[we+1],oe,Fe,tt,Ye));else for(we=0;we<Ke.length;we++){var se=[];for(Le=0;Le<Ke[we].length;Le+=2)se.push(bA(Ke[we][Le],Ke[we][Le+1],oe,Fe,tt,Ye));Oe.geometry.push(se)}}return ze.transformed=!0,ze}function bA(ze,oe,de,we,Le,Fe){return[Math.round(de*(ze*we-Le)),Math.round(de*(oe*we-Fe))]}function Wi(ze,oe,de,we,Le){for(var Fe=oe===Le.maxZoom?0:Le.tolerance/((1<<oe)*Le.extent),tt={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:de,y:we,z:oe,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Ye=0;Ye<ze.length;Ye++){tt.numFeatures++,Ms(tt,ze[Ye],Fe,Le);var Oe=ze[Ye].minX,Ke=ze[Ye].minY,yt=ze[Ye].maxX,se=ze[Ye].maxY;Oe<tt.minX&&(tt.minX=Oe),Ke<tt.minY&&(tt.minY=Ke),yt>tt.maxX&&(tt.maxX=yt),se>tt.maxY&&(tt.maxY=se)}return tt}function Ms(ze,oe,de,we){var Le=oe.geometry,Fe=oe.type,tt=[];if(Fe==="Point"||Fe==="MultiPoint")for(var Ye=0;Ye<Le.length;Ye+=3)tt.push(Le[Ye]),tt.push(Le[Ye+1]),ze.numPoints++,ze.numSimplified++;else if(Fe==="LineString")hA(tt,Le,ze,de,!1,!1);else if(Fe==="MultiLineString"||Fe==="Polygon")for(Ye=0;Ye<Le.length;Ye++)hA(tt,Le[Ye],ze,de,Fe==="Polygon",Ye===0);else if(Fe==="MultiPolygon")for(var Oe=0;Oe<Le.length;Oe++){var Ke=Le[Oe];for(Ye=0;Ye<Ke.length;Ye++)hA(tt,Ke[Ye],ze,de,!0,Ye===0)}if(tt.length){var yt=oe.tags||null;if(Fe==="LineString"&&we.lineMetrics){for(var se in yt={},oe.tags)yt[se]=oe.tags[se];yt.mapbox_clip_start=Le.start/Le.size,yt.mapbox_clip_end=Le.end/Le.size}var _e={geometry:tt,type:Fe==="Polygon"||Fe==="MultiPolygon"?3:Fe==="LineString"||Fe==="MultiLineString"?2:1,tags:yt};oe.id!==null&&(_e.id=oe.id),ze.features.push(_e)}}function hA(ze,oe,de,we,Le,Fe){var tt=we*we;if(we>0&&oe.size<(Le?tt:we))de.numPoints+=oe.length/3;else{for(var Ye=[],Oe=0;Oe<oe.length;Oe+=3)(we===0||oe[Oe+2]>tt)&&(de.numSimplified++,Ye.push(oe[Oe]),Ye.push(oe[Oe+1])),de.numPoints++;Le&&function(Ke,yt){for(var se=0,_e=0,We=Ke.length,dt=We-2;_e<We;dt=_e,_e+=2)se+=(Ke[_e]-Ke[dt])*(Ke[_e+1]+Ke[dt+1]);if(se>0===yt)for(_e=0,We=Ke.length;_e<We/2;_e+=2){var t=Ke[_e],K=Ke[_e+1];Ke[_e]=Ke[We-2-_e],Ke[_e+1]=Ke[We-1-_e],Ke[We-2-_e]=t,Ke[We-1-_e]=K}}(Ye,Fe),ze.push(Ye)}}function Ut(ze,oe){var de=(oe=this.options=function(Le,Fe){for(var tt in Fe)Le[tt]=Fe[tt];return Le}(Object.create(this.options),oe)).debug;if(de&&console.time("preprocess data"),oe.maxZoom<0||oe.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(oe.promoteId&&oe.generateId)throw new Error("promoteId and generateId cannot be used together.");var we=function(Le,Fe){var tt=[];if(Le.type==="FeatureCollection")for(var Ye=0;Ye<Le.features.length;Ye++)Ar(tt,Le.features[Ye],Fe,Ye);else Ar(tt,Le.type==="Feature"?Le:{geometry:Le},Fe);return tt}(ze,oe);this.tiles={},this.tileCoords=[],de&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",oe.indexMaxZoom,oe.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),we=function(Le,Fe){var tt=Fe.buffer/Fe.extent,Ye=Le,Oe=_r(Le,1,-1-tt,tt,0,-1,2,Fe),Ke=_r(Le,1,1-tt,2+tt,0,-1,2,Fe);return(Oe||Ke)&&(Ye=_r(Le,1,-tt,1+tt,0,-1,2,Fe)||[],Oe&&(Ye=rs(Oe,1).concat(Ye)),Ke&&(Ye=Ye.concat(rs(Ke,-1)))),Ye}(we,oe),we.length&&this.splitTile(we,0,0,0),de&&(we.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Zn(ze,oe,de){return 32*((1<<ze)*de+oe)+ze}function zn(ze,oe){return oe?ze.properties[oe]:ze.id}function br(ze,oe){if(ze==null)return!0;if(ze.type==="Feature")return zn(ze,oe)!=null;if(ze.type==="FeatureCollection"){const de=new Set;for(const we of ze.features){const Le=zn(we,oe);if(Le==null||de.has(Le))return!1;de.add(Le)}return!0}return!1}function OA(ze,oe){const de=new Map;if(ze!=null)if(ze.type==="Feature")de.set(zn(ze,oe),ze);else for(const we of ze.features)de.set(zn(we,oe),we);return de}Ut.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Ut.prototype.splitTile=function(ze,oe,de,we,Le,Fe,tt){for(var Ye=[ze,oe,de,we],Oe=this.options,Ke=Oe.debug;Ye.length;){we=Ye.pop(),de=Ye.pop(),oe=Ye.pop(),ze=Ye.pop();var yt=1<<oe,se=Zn(oe,de,we),_e=this.tiles[se];if(!_e&&(Ke>1&&console.time("creation"),_e=this.tiles[se]=Wi(ze,oe,de,we,Oe),this.tileCoords.push({z:oe,x:de,y:we}),Ke)){Ke>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",oe,de,we,_e.numFeatures,_e.numPoints,_e.numSimplified),console.timeEnd("creation"));var We="z"+oe;this.stats[We]=(this.stats[We]||0)+1,this.total++}if(_e.source=ze,Le){if(oe===Oe.maxZoom||oe===Le)continue;var dt=1<<Le-oe;if(de!==Math.floor(Fe/dt)||we!==Math.floor(tt/dt))continue}else if(oe===Oe.indexMaxZoom||_e.numPoints<=Oe.indexMaxPoints)continue;if(_e.source=null,ze.length!==0){Ke>1&&console.time("clipping");var t,K,St,Qt,en,Pt,Ht=.5*Oe.buffer/Oe.extent,Bn=.5-Ht,$t=.5+Ht,sn=1+Ht;t=K=St=Qt=null,en=_r(ze,yt,de-Ht,de+$t,0,_e.minX,_e.maxX,Oe),Pt=_r(ze,yt,de+Bn,de+sn,0,_e.minX,_e.maxX,Oe),ze=null,en&&(t=_r(en,yt,we-Ht,we+$t,1,_e.minY,_e.maxY,Oe),K=_r(en,yt,we+Bn,we+sn,1,_e.minY,_e.maxY,Oe),en=null),Pt&&(St=_r(Pt,yt,we-Ht,we+$t,1,_e.minY,_e.maxY,Oe),Qt=_r(Pt,yt,we+Bn,we+sn,1,_e.minY,_e.maxY,Oe),Pt=null),Ke>1&&console.timeEnd("clipping"),Ye.push(t||[],oe+1,2*de,2*we),Ye.push(K||[],oe+1,2*de,2*we+1),Ye.push(St||[],oe+1,2*de+1,2*we),Ye.push(Qt||[],oe+1,2*de+1,2*we+1)}}},Ut.prototype.getTile=function(ze,oe,de){var we=this.options,Le=we.extent,Fe=we.debug;if(ze<0||ze>24)return null;var tt=1<<ze,Ye=Zn(ze,oe=(oe%tt+tt)%tt,de);if(this.tiles[Ye])return Nt(this.tiles[Ye],Le);Fe>1&&console.log("drilling down to z%d-%d-%d",ze,oe,de);for(var Oe,Ke=ze,yt=oe,se=de;!Oe&&Ke>0;)Ke--,yt=Math.floor(yt/2),se=Math.floor(se/2),Oe=this.tiles[Zn(Ke,yt,se)];return Oe&&Oe.source?(Fe>1&&console.log("found parent tile z%d-%d-%d",Ke,yt,se),Fe>1&&console.time("drilling down"),this.splitTile(Oe.source,Ke,yt,se,ze,oe,de),Fe>1&&console.timeEnd("drilling down"),this.tiles[Ye]?Nt(this.tiles[Ye],Le):null):null};class On extends ae{constructor(oe,de,we,Le){super(oe,de,we),this._dataUpdateable=new Map,this.loadGeoJSON=(Fe,tt)=>{const{promoteId:Ye}=Fe;if(Fe.request)return c.f(Fe.request,(Oe,Ke,yt,se)=>{this._dataUpdateable=br(Ke,Ye)?OA(Ke,Ye):void 0,tt(Oe,Ke,yt,se)});if(typeof Fe.data=="string")try{const Oe=JSON.parse(Fe.data);this._dataUpdateable=br(Oe,Ye)?OA(Oe,Ye):void 0,tt(null,Oe)}catch{tt(new Error(`Input data given to '${Fe.source}' is not a valid GeoJSON object.`))}else Fe.dataDiff?this._dataUpdateable?(function(Oe,Ke,yt){var se,_e,We,dt;if(Ke.removeAll&&Oe.clear(),Ke.remove)for(const t of Ke.remove)Oe.delete(t);if(Ke.add)for(const t of Ke.add){const K=zn(t,yt);K!=null&&Oe.set(K,t)}if(Ke.update)for(const t of Ke.update){let K=Oe.get(t.id);if(K==null)continue;const St=!t.removeAllProperties&&(((se=t.removeProperties)===null||se===void 0?void 0:se.length)>0||((_e=t.addOrUpdateProperties)===null||_e===void 0?void 0:_e.length)>0);if((t.newGeometry||t.removeAllProperties||St)&&(K=Object.assign({},K),Oe.set(t.id,K),St&&(K.properties=Object.assign({},K.properties))),t.newGeometry&&(K.geometry=t.newGeometry),t.removeAllProperties)K.properties={};else if(((We=t.removeProperties)===null||We===void 0?void 0:We.length)>0)for(const Qt of t.removeProperties)Object.prototype.hasOwnProperty.call(K.properties,Qt)&&delete K.properties[Qt];if(((dt=t.addOrUpdateProperties)===null||dt===void 0?void 0:dt.length)>0)for(const{key:Qt,value:en}of t.addOrUpdateProperties)K.properties[Qt]=en}}(this._dataUpdateable,Fe.dataDiff,Ye),tt(null,{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())})):tt(new Error(`Cannot update existing geojson data in ${Fe.source}`)):tt(new Error(`Input data given to '${Fe.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}},this.loadVectorData=this.loadGeoJSONTile,Le&&(this.loadGeoJSON=Le)}loadGeoJSONTile(oe,de){const we=oe.tileID.canonical;if(!this._geoJSONIndex)return de(null,null);const Le=this._geoJSONIndex.getTile(we.z,we.x,we.y);if(!Le)return de(null,null);const Fe=new class{constructor(Ye){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=c.N,this.length=Ye.length,this._features=Ye}feature(Ye){return new class{constructor(Oe){this._feature=Oe,this.extent=c.N,this.type=Oe.type,this.properties=Oe.tags,"id"in Oe&&!isNaN(Oe.id)&&(this.id=parseInt(Oe.id,10))}loadGeometry(){if(this._feature.type===1){const Oe=[];for(const Ke of this._feature.geometry)Oe.push([new c.P(Ke[0],Ke[1])]);return Oe}{const Oe=[];for(const Ke of this._feature.geometry){const yt=[];for(const se of Ke)yt.push(new c.P(se[0],se[1]));Oe.push(yt)}return Oe}}toGeoJSON(Oe,Ke,yt){return je.call(this,Oe,Ke,yt)}}(this._features[Ye])}}(Le.features);let tt=Gt(Fe);tt.byteOffset===0&&tt.byteLength===tt.buffer.byteLength||(tt=new Uint8Array(tt)),de(null,{vectorTile:Fe,rawData:tt.buffer})}loadData(oe,de){var we;(we=this._pendingRequest)===null||we===void 0||we.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const Le=!!(oe&&oe.request&&oe.request.collectResourceTiming)&&new c.bu(oe.request);this._pendingCallback=de,this._pendingRequest=this.loadGeoJSON(oe,(Fe,tt)=>{if(delete this._pendingCallback,delete this._pendingRequest,Fe||!tt)return de(Fe);if(typeof tt!="object")return de(new Error(`Input data given to '${oe.source}' is not a valid GeoJSON object.`));{Ce(tt,!0);try{if(oe.filter){const Oe=c.bC(oe.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Oe.result==="error")throw new Error(Oe.value.map(yt=>`${yt.key}: ${yt.message}`).join(", "));tt={type:"FeatureCollection",features:tt.features.filter(yt=>Oe.value.evaluate({zoom:0},yt))}}this._geoJSONIndex=oe.cluster?new xi(function({superclusterOptions:Oe,clusterProperties:Ke}){if(!Ke||!Oe)return Oe;const yt={},se={},_e={accumulated:null,zoom:0},We={properties:null},dt=Object.keys(Ke);for(const t of dt){const[K,St]=Ke[t],Qt=c.bC(St),en=c.bC(typeof K=="string"?[K,["accumulated"],["get",t]]:K);yt[t]=Qt.value,se[t]=en.value}return Oe.map=t=>{We.properties=t;const K={};for(const St of dt)K[St]=yt[St].evaluate(_e,We);return K},Oe.reduce=(t,K)=>{We.properties=K;for(const St of dt)_e.accumulated=t[St],t[St]=se[St].evaluate(_e,We)},Oe}(oe)).load(tt.features):function(Oe,Ke){return new Ut(Oe,Ke)}(tt,oe.geojsonVtOptions)}catch(Oe){return de(Oe)}this.loaded={};const Ye={};if(Le){const Oe=Le.finish();Oe&&(Ye.resourceTiming={},Ye.resourceTiming[oe.source]=JSON.parse(JSON.stringify(Oe)))}de(null,Ye)}})}reloadTile(oe,de){const we=this.loaded;return we&&we[oe.uid]?super.reloadTile(oe,de):this.loadTile(oe,de)}removeSource(oe,de){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),de()}getClusterExpansionZoom(oe,de){try{de(null,this._geoJSONIndex.getClusterExpansionZoom(oe.clusterId))}catch(we){de(we)}}getClusterChildren(oe,de){try{de(null,this._geoJSONIndex.getChildren(oe.clusterId))}catch(we){de(we)}}getClusterLeaves(oe,de){try{de(null,this._geoJSONIndex.getLeaves(oe.clusterId,oe.limit,oe.offset))}catch(we){de(we)}}}class st{constructor(oe){this.self=oe,this.actor=new c.C(oe,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:ae,geojson:On},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(de,we)=>{if(this.workerSourceTypes[de])throw new Error(`Worker source with name "${de}" already registered.`);this.workerSourceTypes[de]=we},this.self.registerRTLTextPlugin=de=>{if(c.bD.isParsed())throw new Error("RTL text plugin already registered.");c.bD.applyArabicShaping=de.applyArabicShaping,c.bD.processBidirectionalText=de.processBidirectionalText,c.bD.processStyledBidirectionalText=de.processStyledBidirectionalText}}setReferrer(oe,de){this.referrer=de}setImages(oe,de,we){this.availableImages[oe]=de;for(const Le in this.workerSources[oe]){const Fe=this.workerSources[oe][Le];for(const tt in Fe)Fe[tt].availableImages=de}we()}setLayers(oe,de,we){this.getLayerIndex(oe).replace(de),we()}updateLayers(oe,de,we){this.getLayerIndex(oe).update(de.layers,de.removedIds),we()}loadTile(oe,de,we){this.getWorkerSource(oe,de.type,de.source).loadTile(de,we)}loadDEMTile(oe,de,we){this.getDEMWorkerSource(oe,de.source).loadTile(de,we)}reloadTile(oe,de,we){this.getWorkerSource(oe,de.type,de.source).reloadTile(de,we)}abortTile(oe,de,we){this.getWorkerSource(oe,de.type,de.source).abortTile(de,we)}removeTile(oe,de,we){this.getWorkerSource(oe,de.type,de.source).removeTile(de,we)}removeDEMTile(oe,de){this.getDEMWorkerSource(oe,de.source).removeTile(de)}removeSource(oe,de,we){if(!this.workerSources[oe]||!this.workerSources[oe][de.type]||!this.workerSources[oe][de.type][de.source])return;const Le=this.workerSources[oe][de.type][de.source];delete this.workerSources[oe][de.type][de.source],Le.removeSource!==void 0?Le.removeSource(de,we):we()}loadWorkerSource(oe,de,we){try{this.self.importScripts(de.url),we()}catch(Le){we(Le.toString())}}syncRTLPluginState(oe,de,we){try{c.bD.setState(de);const Le=c.bD.getPluginURL();if(c.bD.isLoaded()&&!c.bD.isParsed()&&Le!=null){this.self.importScripts(Le);const Fe=c.bD.isParsed();we(Fe?void 0:new Error(`RTL Text Plugin failed to import scripts from ${Le}`),Fe)}}catch(Le){we(Le.toString())}}getAvailableImages(oe){let de=this.availableImages[oe];return de||(de=[]),de}getLayerIndex(oe){let de=this.layerIndexes[oe];return de||(de=this.layerIndexes[oe]=new U),de}getWorkerSource(oe,de,we){return this.workerSources[oe]||(this.workerSources[oe]={}),this.workerSources[oe][de]||(this.workerSources[oe][de]={}),this.workerSources[oe][de][we]||(this.workerSources[oe][de][we]=new this.workerSourceTypes[de]({send:(Le,Fe,tt)=>{this.actor.send(Le,Fe,tt,oe)}},this.getLayerIndex(oe),this.getAvailableImages(oe))),this.workerSources[oe][de][we]}getDEMWorkerSource(oe,de){return this.demWorkerSources[oe]||(this.demWorkerSources[oe]={}),this.demWorkerSources[oe][de]||(this.demWorkerSources[oe][de]=new be),this.demWorkerSources[oe][de]}}return c.i()&&(self.worker=new st(self)),st}),M(["./shared"],function(c){var U="3.6.2";class O{static testProp(i){if(!O.docStyle)return i[0];for(let h=0;h<i.length;h++)if(i[h]in O.docStyle)return i[h];return i[0]}static create(i,h,b){const E=window.document.createElement(i);return h!==void 0&&(E.className=h),b&&b.appendChild(E),E}static createNS(i,h){return window.document.createElementNS(i,h)}static disableDrag(){O.docStyle&&O.selectProp&&(O.userSelect=O.docStyle[O.selectProp],O.docStyle[O.selectProp]="none")}static enableDrag(){O.docStyle&&O.selectProp&&(O.docStyle[O.selectProp]=O.userSelect)}static setTransform(i,h){i.style[O.transformProp]=h}static addEventListener(i,h,b,E={}){i.addEventListener(h,b,"passive"in E?E:E.capture)}static removeEventListener(i,h,b,E={}){i.removeEventListener(h,b,"passive"in E?E:E.capture)}static suppressClickInternal(i){i.preventDefault(),i.stopPropagation(),window.removeEventListener("click",O.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",O.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",O.suppressClickInternal,!0)},0)}static mousePos(i,h){const b=i.getBoundingClientRect();return new c.P(h.clientX-b.left-i.clientLeft,h.clientY-b.top-i.clientTop)}static touchPos(i,h){const b=i.getBoundingClientRect(),E=[];for(let B=0;B<h.length;B++)E.push(new c.P(h[B].clientX-b.left-i.clientLeft,h[B].clientY-b.top-i.clientTop));return E}static mouseButton(i){return i.button}static remove(i){i.parentNode&&i.parentNode.removeChild(i)}}O.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,O.selectProp=O.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),O.transformProp=O.testProp(["transform","WebkitTransform"]);const j={supported:!1,testSupport:function(C){!ae&&J&&(be?Ze(C):W=C)}};let W,J,ae=!1,be=!1;function Ze(C){const i=C.createTexture();C.bindTexture(C.TEXTURE_2D,i);try{if(C.texImage2D(C.TEXTURE_2D,0,C.RGBA,C.RGBA,C.UNSIGNED_BYTE,J),C.isContextLost())return;j.supported=!0}catch{}C.deleteTexture(i),ae=!0}var xe,Ce;typeof document<"u"&&(J=document.createElement("img"),J.onload=function(){W&&Ze(W),W=null,be=!0},J.onerror=function(){ae=!0,W=null},J.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(C){let i,h,b,E;C.resetRequestQueue=()=>{i=[],h=0,b=0,E={}},C.addThrottleControl=l=>{const f=b++;return E[f]=l,f},C.removeThrottleControl=l=>{delete E[l],A()},C.getImage=(l,f,m=!0)=>{j.supported&&(l.headers||(l.headers={}),l.headers.accept="image/webp,*/*");const k={requestParameters:l,supportImageRefresh:m,callback:f,cancelled:!1,completed:!1,cancel:()=>{k.completed||k.cancelled||(k.cancelled=!0,k.innerRequest&&(k.innerRequest.cancel(),h--),A())}};return i.push(k),A(),k};const B=l=>{const{requestParameters:f,supportImageRefresh:m,callback:k}=l;return c.e(f,{type:"image"}),(m!==!1||c.i()||c.g(f.url)||f.headers&&!Object.keys(f.headers).reduce((I,D)=>I&&D==="accept",!0)?c.m:s)(f,(I,D,Q,Z)=>{F(l,k,I,D,Q,Z)})},F=(l,f,m,k,I,D)=>{m?f(m):k instanceof HTMLImageElement||c.a(k)?f(null,k):k&&((Q,Z)=>{typeof createImageBitmap=="function"?c.b(Q,Z):c.d(Q,Z)})(k,(Q,Z)=>{Q!=null?f(Q):Z!=null&&f(null,Z,{cacheControl:I,expires:D})}),l.cancelled||(l.completed=!0,h--,A())},A=()=>{const l=(()=>{const f=Object.keys(E);let m=!1;if(f.length>0){for(const k of f)if(m=E[k](),m)break}return m})()?c.c.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:c.c.MAX_PARALLEL_IMAGE_REQUESTS;for(let f=h;f<l&&i.length>0;f++){const m=i.shift();if(m.cancelled){f--;continue}const k=B(m);h++,m.innerRequest=k}},s=(l,f)=>{const m=new Image,k=l.url;let I=!1;const D=l.credentials;return D&&D==="include"?m.crossOrigin="use-credentials":(D&&D==="same-origin"||!c.s(k))&&(m.crossOrigin="anonymous"),m.fetchPriority="high",m.onload=()=>{f(null,m),m.onerror=m.onload=null},m.onerror=()=>{I||f(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")),m.onerror=m.onload=null},m.src=k,{cancel:()=>{I=!0,m.src=""}}}}(xe||(xe={})),xe.resetRequestQueue(),function(C){C.Glyphs="Glyphs",C.Image="Image",C.Source="Source",C.SpriteImage="SpriteImage",C.SpriteJSON="SpriteJSON",C.Style="Style",C.Tile="Tile",C.Unknown="Unknown"}(Ce||(Ce={}));class je{constructor(i){this._transformRequestFn=i}transformRequest(i,h){return this._transformRequestFn&&this._transformRequestFn(i,h)||{url:i}}normalizeSpriteURL(i,h,b){const E=function(B){const F=B.match(Qe);if(!F)throw new Error(`Unable to parse URL "${B}"`);return{protocol:F[1],authority:F[2],path:F[3]||"/",params:F[4]?F[4].split("&"):[]}}(i);return E.path+=`${h}${b}`,function(B){const F=B.params.length?`?${B.params.join("&")}`:"";return`${B.protocol}://${B.authority}${B.path}${F}`}(E)}setTransformRequest(i){this._transformRequestFn=i}}const Qe=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function nt(C){var i=new c.A(3);return i[0]=C[0],i[1]=C[1],i[2]=C[2],i}var it,xt=function(C,i,h){return C[0]=i[0]-h[0],C[1]=i[1]-h[1],C[2]=i[2]-h[2],C};it=new c.A(3),c.A!=Float32Array&&(it[0]=0,it[1]=0,it[2]=0);var Ft=function(C){var i=C[0],h=C[1];return i*i+h*h};function It(C){const i=[];if(typeof C=="string")i.push({id:"default",url:C});else if(C&&C.length>0){const h=[];for(const{id:b,url:E}of C){const B=`${b}${E}`;h.indexOf(B)===-1&&(h.push(B),i.push({id:b,url:E}))}}return i}function nn(C,i,h,b,E){if(b)return void C(b);if(E!==Object.values(i).length||E!==Object.values(h).length)return;const B={};for(const F in i){B[F]={};const A=c.h.getImageCanvasContext(h[F]),s=i[F];for(const l in s){const{width:f,height:m,x:k,y:I,sdf:D,pixelRatio:Q,stretchX:Z,stretchY:X,content:ie}=s[l];B[F][l]={data:null,pixelRatio:Q,sdf:D,stretchX:Z,stretchY:X,content:ie,spriteData:{width:f,height:m,x:k,y:I,context:A}}}}C(null,B)}(function(){var C=new c.A(2);c.A!=Float32Array&&(C[0]=0,C[1]=0)})();class Zt{constructor(i,h,b,E){this.context=i,this.format=b,this.texture=i.gl.createTexture(),this.update(h,E)}update(i,h,b){const{width:E,height:B}=i,F=!(this.size&&this.size[0]===E&&this.size[1]===B||b),{context:A}=this,{gl:s}=A;if(this.useMipmap=!!(h&&h.useMipmap),s.bindTexture(s.TEXTURE_2D,this.texture),A.pixelStoreUnpackFlipY.set(!1),A.pixelStoreUnpack.set(1),A.pixelStoreUnpackPremultiplyAlpha.set(this.format===s.RGBA&&(!h||h.premultiply!==!1)),F)this.size=[E,B],i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||c.a(i)?s.texImage2D(s.TEXTURE_2D,0,this.format,this.format,s.UNSIGNED_BYTE,i):s.texImage2D(s.TEXTURE_2D,0,this.format,E,B,0,this.format,s.UNSIGNED_BYTE,i.data);else{const{x:l,y:f}=b||{x:0,y:0};i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||c.a(i)?s.texSubImage2D(s.TEXTURE_2D,0,l,f,s.RGBA,s.UNSIGNED_BYTE,i):s.texSubImage2D(s.TEXTURE_2D,0,l,f,E,B,s.RGBA,s.UNSIGNED_BYTE,i.data)}this.useMipmap&&this.isSizePowerOfTwo()&&s.generateMipmap(s.TEXTURE_2D)}bind(i,h,b){const{context:E}=this,{gl:B}=E;B.bindTexture(B.TEXTURE_2D,this.texture),b!==B.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(b=B.LINEAR),i!==this.filter&&(B.texParameteri(B.TEXTURE_2D,B.TEXTURE_MAG_FILTER,i),B.texParameteri(B.TEXTURE_2D,B.TEXTURE_MIN_FILTER,b||i),this.filter=i),h!==this.wrap&&(B.texParameteri(B.TEXTURE_2D,B.TEXTURE_WRAP_S,h),B.texParameteri(B.TEXTURE_2D,B.TEXTURE_WRAP_T,h),this.wrap=h)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:i}=this.context;i.deleteTexture(this.texture),this.texture=null}}function At(C){const{userImage:i}=C;return!!(i&&i.render&&i.render())&&(C.data.replace(new Uint8Array(i.data.buffer)),!0)}class bt extends c.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new c.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(i){if(this.loaded!==i&&(this.loaded=i,i)){for(const{ids:h,callback:b}of this.requestors)this._notify(h,b);this.requestors=[]}}getImage(i){const h=this.images[i];if(h&&!h.data&&h.spriteData){const b=h.spriteData;h.data=new c.R({width:b.width,height:b.height},b.context.getImageData(b.x,b.y,b.width,b.height).data),h.spriteData=null}return h}addImage(i,h){if(this.images[i])throw new Error(`Image id ${i} already exist, use updateImage instead`);this._validate(i,h)&&(this.images[i]=h)}_validate(i,h){let b=!0;const E=h.data||h.spriteData;return this._validateStretch(h.stretchX,E&&E.width)||(this.fire(new c.j(new Error(`Image "${i}" has invalid "stretchX" value`))),b=!1),this._validateStretch(h.stretchY,E&&E.height)||(this.fire(new c.j(new Error(`Image "${i}" has invalid "stretchY" value`))),b=!1),this._validateContent(h.content,h)||(this.fire(new c.j(new Error(`Image "${i}" has invalid "content" value`))),b=!1),b}_validateStretch(i,h){if(!i)return!0;let b=0;for(const E of i){if(E[0]<b||E[1]<E[0]||h<E[1])return!1;b=E[1]}return!0}_validateContent(i,h){if(!i)return!0;if(i.length!==4)return!1;const b=h.spriteData,E=b&&b.width||h.data.width,B=b&&b.height||h.data.height;return!(i[0]<0||E<i[0]||i[1]<0||B<i[1]||i[2]<0||E<i[2]||i[3]<0||B<i[3]||i[2]<i[0]||i[3]<i[1])}updateImage(i,h,b=!0){const E=this.getImage(i);if(b&&(E.data.width!==h.data.width||E.data.height!==h.data.height))throw new Error(`size mismatch between old image (${E.data.width}x${E.data.height}) and new image (${h.data.width}x${h.data.height}).`);h.version=E.version+1,this.images[i]=h,this.updatedImages[i]=!0}removeImage(i){const h=this.images[i];delete this.images[i],delete this.patterns[i],h.userImage&&h.userImage.onRemove&&h.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(i,h){let b=!0;if(!this.isLoaded())for(const E of i)this.images[E]||(b=!1);this.isLoaded()||b?this._notify(i,h):this.requestors.push({ids:i,callback:h})}_notify(i,h){const b={};for(const E of i){let B=this.getImage(E);B||(this.fire(new c.k("styleimagemissing",{id:E})),B=this.getImage(E)),B?b[E]={data:B.data.clone(),pixelRatio:B.pixelRatio,sdf:B.sdf,version:B.version,stretchX:B.stretchX,stretchY:B.stretchY,content:B.content,hasRenderCallback:!!(B.userImage&&B.userImage.render)}:c.w(`Image "${E}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}h(null,b)}getPixelSize(){const{width:i,height:h}=this.atlasImage;return{width:i,height:h}}getPattern(i){const h=this.patterns[i],b=this.getImage(i);if(!b)return null;if(h&&h.position.version===b.version)return h.position;if(h)h.position.version=b.version;else{const E={w:b.data.width+2,h:b.data.height+2,x:0,y:0},B=new c.I(E,b);this.patterns[i]={bin:E,position:B}}return this._updatePatternAtlas(),this.patterns[i].position}bind(i){const h=i.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new Zt(i,this.atlasImage,h.RGBA),this.atlasTexture.bind(h.LINEAR,h.CLAMP_TO_EDGE)}_updatePatternAtlas(){const i=[];for(const B in this.patterns)i.push(this.patterns[B].bin);const{w:h,h:b}=c.p(i),E=this.atlasImage;E.resize({width:h||1,height:b||1});for(const B in this.patterns){const{bin:F}=this.patterns[B],A=F.x+1,s=F.y+1,l=this.getImage(B).data,f=l.width,m=l.height;c.R.copy(l,E,{x:0,y:0},{x:A,y:s},{width:f,height:m}),c.R.copy(l,E,{x:0,y:m-1},{x:A,y:s-1},{width:f,height:1}),c.R.copy(l,E,{x:0,y:0},{x:A,y:s+m},{width:f,height:1}),c.R.copy(l,E,{x:f-1,y:0},{x:A-1,y:s},{width:1,height:m}),c.R.copy(l,E,{x:0,y:0},{x:A+f,y:s},{width:1,height:m})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(i){for(const h of i){if(this.callbackDispatchedThisFrame[h])continue;this.callbackDispatchedThisFrame[h]=!0;const b=this.getImage(h);b||c.w(`Image with ID: "${h}" was not found`),At(b)&&this.updateImage(h,b)}}}const kt=1e20;function De(C,i,h,b,E,B,F,A,s){for(let l=i;l<i+b;l++)at(C,h*B+l,B,E,F,A,s);for(let l=h;l<h+E;l++)at(C,l*B+i,1,b,F,A,s)}function at(C,i,h,b,E,B,F){B[0]=0,F[0]=-kt,F[1]=kt,E[0]=C[i];for(let A=1,s=0,l=0;A<b;A++){E[A]=C[i+A*h];const f=A*A;do{const m=B[s];l=(E[A]-E[m]+f-m*m)/(A-m)/2}while(l<=F[s]&&--s>-1);s++,B[s]=A,F[s]=l,F[s+1]=kt}for(let A=0,s=0;A<b;A++){for(;F[s+1]<A;)s++;const l=B[s],f=A-l;C[i+A*h]=E[l]+f*f}}class lt{constructor(i,h){this.requestManager=i,this.localIdeographFontFamily=h,this.entries={}}setURL(i){this.url=i}getGlyphs(i,h){const b=[];for(const E in i)for(const B of i[E])b.push({stack:E,id:B});c.o(b,({stack:E,id:B},F)=>{let A=this.entries[E];A||(A=this.entries[E]={glyphs:{},requests:{},ranges:{}});let s=A.glyphs[B];if(s!==void 0)return void F(null,{stack:E,id:B,glyph:s});if(s=this._tinySDF(A,E,B),s)return A.glyphs[B]=s,void F(null,{stack:E,id:B,glyph:s});const l=Math.floor(B/256);if(256*l>65535)return void F(new Error("glyphs > 65535 not supported"));if(A.ranges[l])return void F(null,{stack:E,id:B,glyph:s});if(!this.url)return void F(new Error("glyphsUrl is not set"));let f=A.requests[l];f||(f=A.requests[l]=[],lt.loadGlyphRange(E,l,this.url,this.requestManager,(m,k)=>{if(k){for(const I in k)this._doesCharSupportLocalGlyph(+I)||(A.glyphs[+I]=k[+I]);A.ranges[l]=!0}for(const I of f)I(m,k);delete A.requests[l]})),f.push((m,k)=>{m?F(m):k&&F(null,{stack:E,id:B,glyph:k[B]||null})})},(E,B)=>{if(E)h(E);else if(B){const F={};for(const{stack:A,id:s,glyph:l}of B)(F[A]||(F[A]={}))[s]=l&&{id:l.id,bitmap:l.bitmap.clone(),metrics:l.metrics};h(null,F)}})}_doesCharSupportLocalGlyph(i){return!!this.localIdeographFontFamily&&(c.u["CJK Unified Ideographs"](i)||c.u["Hangul Syllables"](i)||c.u.Hiragana(i)||c.u.Katakana(i))}_tinySDF(i,h,b){const E=this.localIdeographFontFamily;if(!E||!this._doesCharSupportLocalGlyph(b))return;let B=i.tinySDF;if(!B){let A="400";/bold/i.test(h)?A="900":/medium/i.test(h)?A="500":/light/i.test(h)&&(A="200"),B=i.tinySDF=new lt.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:E,fontWeight:A})}const F=B.draw(String.fromCharCode(b));return{id:b,bitmap:new c.q({width:F.width||60,height:F.height||60},F.data),metrics:{width:F.glyphWidth/2||24,height:F.glyphHeight/2||24,left:F.glyphLeft/2+.5||0,top:F.glyphTop/2-27.5||-8,advance:F.glyphAdvance/2||24,isDoubleResolution:!0}}}}lt.loadGlyphRange=function(C,i,h,b,E){const B=256*i,F=B+255,A=b.transformRequest(h.replace("{fontstack}",C).replace("{range}",`${B}-${F}`),Ce.Glyphs);c.l(A,(s,l)=>{if(s)E(s);else if(l){const f={};for(const m of c.n(l))f[m.id]=m;E(null,f)}})},lt.TinySDF=class{constructor({fontSize:C=24,buffer:i=3,radius:h=8,cutoff:b=.25,fontFamily:E="sans-serif",fontWeight:B="normal",fontStyle:F="normal"}={}){this.buffer=i,this.cutoff=b,this.radius=h;const A=this.size=C+4*i,s=this._createCanvas(A),l=this.ctx=s.getContext("2d",{willReadFrequently:!0});l.font=`${F} ${B} ${C}px ${E}`,l.textBaseline="alphabetic",l.textAlign="left",l.fillStyle="black",this.gridOuter=new Float64Array(A*A),this.gridInner=new Float64Array(A*A),this.f=new Float64Array(A),this.z=new Float64Array(A+1),this.v=new Uint16Array(A)}_createCanvas(C){const i=document.createElement("canvas");return i.width=i.height=C,i}draw(C){const{width:i,actualBoundingBoxAscent:h,actualBoundingBoxDescent:b,actualBoundingBoxLeft:E,actualBoundingBoxRight:B}=this.ctx.measureText(C),F=Math.ceil(h),A=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(B-E))),s=Math.min(this.size-this.buffer,F+Math.ceil(b)),l=A+2*this.buffer,f=s+2*this.buffer,m=Math.max(l*f,0),k=new Uint8ClampedArray(m),I={data:k,width:l,height:f,glyphWidth:A,glyphHeight:s,glyphTop:F,glyphLeft:0,glyphAdvance:i};if(A===0||s===0)return I;const{ctx:D,buffer:Q,gridInner:Z,gridOuter:X}=this;D.clearRect(Q,Q,A,s),D.fillText(C,Q,Q+F);const ie=D.getImageData(Q,Q,A,s);X.fill(kt,0,m),Z.fill(0,0,m);for(let Ae=0;Ae<s;Ae++)for(let ce=0;ce<A;ce++){const fe=ie.data[4*(Ae*A+ce)+3]/255;if(fe===0)continue;const ve=(Ae+Q)*l+ce+Q;if(fe===1)X[ve]=0,Z[ve]=kt;else{const Ne=.5-fe;X[ve]=Ne>0?Ne*Ne:0,Z[ve]=Ne<0?Ne*Ne:0}}De(X,0,0,l,f,l,this.f,this.v,this.z),De(Z,Q,Q,A,s,l,this.f,this.v,this.z);for(let Ae=0;Ae<m;Ae++){const ce=Math.sqrt(X[Ae])-Math.sqrt(Z[Ae]);k[Ae]=Math.round(255-255*(ce/this.radius+this.cutoff))}return I}};class Tt{constructor(){this.specification=c.v.light.position}possiblyEvaluate(i,h){return c.z(i.expression.evaluate(h))}interpolate(i,h,b){return{x:c.B.number(i.x,h.x,b),y:c.B.number(i.y,h.y,b),z:c.B.number(i.z,h.z,b)}}}let Ot;class Gt extends c.E{constructor(i){super(),Ot=Ot||new c.r({anchor:new c.D(c.v.light.anchor),position:new Tt,color:new c.D(c.v.light.color),intensity:new c.D(c.v.light.intensity)}),this._transitionable=new c.T(Ot),this.setLight(i),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(i,h={}){if(!this._validate(c.t,i,h))for(const b in i){const E=i[b];b.endsWith("-transition")?this._transitionable.setTransition(b.slice(0,-11),E):this._transitionable.setValue(b,E)}}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}_validate(i,h,b){return(!b||b.validate!==!1)&&c.x(this,i.call(c.y,c.e({value:h,style:{glyphs:!0,sprite:!0},styleSpec:c.v})))}}class _n{constructor(i,h){this.width=i,this.height=h,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(i,h){const b=i.join(",")+String(h);return this.dashEntry[b]||(this.dashEntry[b]=this.addDash(i,h)),this.dashEntry[b]}getDashRanges(i,h,b){const E=[];let B=i.length%2==1?-i[i.length-1]*b:0,F=i[0]*b,A=!0;E.push({left:B,right:F,isDash:A,zeroLength:i[0]===0});let s=i[0];for(let l=1;l<i.length;l++){A=!A;const f=i[l];B=s*b,s+=f,F=s*b,E.push({left:B,right:F,isDash:A,zeroLength:f===0})}return E}addRoundDash(i,h,b){const E=h/2;for(let B=-b;B<=b;B++){const F=this.width*(this.nextRow+b+B);let A=0,s=i[A];for(let l=0;l<this.width;l++){l/s.right>1&&(s=i[++A]);const f=Math.abs(l-s.left),m=Math.abs(l-s.right),k=Math.min(f,m);let I;const D=B/b*(E+1);if(s.isDash){const Q=E-Math.abs(D);I=Math.sqrt(k*k+Q*Q)}else I=E-Math.sqrt(k*k+D*D);this.data[F+l]=Math.max(0,Math.min(255,I+128))}}}addRegularDash(i){for(let A=i.length-1;A>=0;--A){const s=i[A],l=i[A+1];s.zeroLength?i.splice(A,1):l&&l.isDash===s.isDash&&(l.left=s.left,i.splice(A,1))}const h=i[0],b=i[i.length-1];h.isDash===b.isDash&&(h.left=b.left-this.width,b.right=h.right+this.width);const E=this.width*this.nextRow;let B=0,F=i[B];for(let A=0;A<this.width;A++){A/F.right>1&&(F=i[++B]);const s=Math.abs(A-F.left),l=Math.abs(A-F.right),f=Math.min(s,l);this.data[E+A]=Math.max(0,Math.min(255,(F.isDash?f:-f)+128))}}addDash(i,h){const b=h?7:0,E=2*b+1;if(this.nextRow+E>this.height)return c.w("LineAtlas out of space"),null;let B=0;for(let A=0;A<i.length;A++)B+=i[A];if(B!==0){const A=this.width/B,s=this.getDashRanges(i,this.width,A);h?this.addRoundDash(s,A,b):this.addRegularDash(s)}const F={y:(this.nextRow+b+.5)/this.height,height:2*b/this.height,width:B};return this.nextRow+=E,this.dirty=!0,F}bind(i){const h=i.gl;this.texture?(h.bindTexture(h.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,h.texSubImage2D(h.TEXTURE_2D,0,0,0,this.width,this.height,h.ALPHA,h.UNSIGNED_BYTE,this.data))):(this.texture=h.createTexture(),h.bindTexture(h.TEXTURE_2D,this.texture),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,h.REPEAT),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,h.REPEAT),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,h.LINEAR),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,h.LINEAR),h.texImage2D(h.TEXTURE_2D,0,h.ALPHA,this.width,this.height,0,h.ALPHA,h.UNSIGNED_BYTE,this.data))}}class hn{constructor(i,h,b){this.workerPool=i,this.actors=[],this.currentActor=0,this.id=b;const E=this.workerPool.acquire(b);for(let B=0;B<E.length;B++){const F=new c.C(E[B],h,b);F.name=`Worker ${B}`,this.actors.push(F)}if(!this.actors.length)throw new Error("No actors found")}broadcast(i,h,b){c.o(this.actors,(E,B)=>{E.send(i,h,B)},b=b||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(i=!0){this.actors.forEach(h=>{h.remove()}),this.actors=[],i&&this.workerPool.release(this.id)}}function vn(C,i,h){const b=function(E,B){if(E)return h(E);if(B){const F=c.F(c.e(B,C),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);B.vector_layers&&(F.vectorLayers=B.vector_layers,F.vectorLayerIds=F.vectorLayers.map(A=>A.id)),h(null,F)}};return C.url?c.f(i.transformRequest(C.url,Ce.Source),b):c.h.frame(()=>b(null,C))}class Dn{constructor(i,h){i&&(h?this.setSouthWest(i).setNorthEast(h):Array.isArray(i)&&(i.length===4?this.setSouthWest([i[0],i[1]]).setNorthEast([i[2],i[3]]):this.setSouthWest(i[0]).setNorthEast(i[1])))}setNorthEast(i){return this._ne=i instanceof c.L?new c.L(i.lng,i.lat):c.L.convert(i),this}setSouthWest(i){return this._sw=i instanceof c.L?new c.L(i.lng,i.lat):c.L.convert(i),this}extend(i){const h=this._sw,b=this._ne;let E,B;if(i instanceof c.L)E=i,B=i;else{if(!(i instanceof Dn))return Array.isArray(i)?i.length===4||i.every(Array.isArray)?this.extend(Dn.convert(i)):this.extend(c.L.convert(i)):i&&("lng"in i||"lon"in i)&&"lat"in i?this.extend(c.L.convert(i)):this;if(E=i._sw,B=i._ne,!E||!B)return this}return h||b?(h.lng=Math.min(E.lng,h.lng),h.lat=Math.min(E.lat,h.lat),b.lng=Math.max(B.lng,b.lng),b.lat=Math.max(B.lat,b.lat)):(this._sw=new c.L(E.lng,E.lat),this._ne=new c.L(B.lng,B.lat)),this}getCenter(){return new c.L((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new c.L(this.getWest(),this.getNorth())}getSouthEast(){return new c.L(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(i){const{lng:h,lat:b}=c.L.convert(i);let E=this._sw.lng<=h&&h<=this._ne.lng;return this._sw.lng>this._ne.lng&&(E=this._sw.lng>=h&&h>=this._ne.lng),this._sw.lat<=b&&b<=this._ne.lat&&E}static convert(i){return i instanceof Dn?i:i&&new Dn(i)}static fromLngLat(i,h=0){const b=360*h/40075017,E=b/Math.cos(Math.PI/180*i.lat);return new Dn(new c.L(i.lng-E,i.lat-b),new c.L(i.lng+E,i.lat+b))}}class Qn{constructor(i,h,b){this.bounds=Dn.convert(this.validateBounds(i)),this.minzoom=h||0,this.maxzoom=b||24}validateBounds(i){return Array.isArray(i)&&i.length===4?[Math.max(-180,i[0]),Math.max(-90,i[1]),Math.min(180,i[2]),Math.min(90,i[3])]:[-180,-90,180,90]}contains(i){const h=Math.pow(2,i.z),b=Math.floor(c.G(this.bounds.getWest())*h),E=Math.floor(c.H(this.bounds.getNorth())*h),B=Math.ceil(c.G(this.bounds.getEast())*h),F=Math.ceil(c.H(this.bounds.getSouth())*h);return i.x>=b&&i.x<B&&i.y>=E&&i.y<F}}class di extends c.E{constructor(i,h,b,E){if(super(),this.load=()=>{this._loaded=!1,this.fire(new c.k("dataloading",{dataType:"source"})),this._tileJSONRequest=vn(this._options,this.map._requestManager,(B,F)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),B?this.fire(new c.j(B)):F&&(c.e(this,F),F.bounds&&(this.tileBounds=new Qn(F.bounds,this.minzoom,this.maxzoom)),this.fire(new c.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new c.k("data",{dataType:"source",sourceDataType:"content"})))})},this.serialize=()=>c.e({},this._options),this.id=i,this.dispatcher=b,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,c.e(this,c.F(h,["url","scheme","tileSize","promoteId"])),this._options=c.e({type:"vector"},h),this._collectResourceTiming=h.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(E)}loaded(){return this._loaded}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}onAdd(i){this.map=i,this.load()}setSourceProperty(i){this._tileJSONRequest&&this._tileJSONRequest.cancel(),i(),this.load()}setTiles(i){return this.setSourceProperty(()=>{this._options.tiles=i}),this}setUrl(i){return this.setSourceProperty(()=>{this.url=i,this._options.url=i}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}loadTile(i,h){const b=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),E={request:this.map._requestManager.transformRequest(b,Ce.Tile),uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,tileSize:this.tileSize*i.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function B(F,A){return delete i.request,i.aborted?h(null):F&&F.status!==404?h(F):(A&&A.resourceTiming&&(i.resourceTiming=A.resourceTiming),this.map._refreshExpiredTiles&&A&&i.setExpiryData(A),i.loadVectorData(A,this.map.painter),h(null),void(i.reloadCallback&&(this.loadTile(i,i.reloadCallback),i.reloadCallback=null)))}E.request.collectResourceTiming=this._collectResourceTiming,i.actor&&i.state!=="expired"?i.state==="loading"?i.reloadCallback=h:i.request=i.actor.send("reloadTile",E,B.bind(this)):(i.actor=this.dispatcher.getActor(),i.request=i.actor.send("loadTile",E,B.bind(this)))}abortTile(i){i.request&&(i.request.cancel(),delete i.request),i.actor&&i.actor.send("abortTile",{uid:i.uid,type:this.type,source:this.id},void 0)}unloadTile(i){i.unloadVectorData(),i.actor&&i.actor.send("removeTile",{uid:i.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class xi extends c.E{constructor(i,h,b,E){super(),this.id=i,this.dispatcher=b,this.setEventedParent(E),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=c.e({type:"raster"},h),c.e(this,c.F(h,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new c.k("dataloading",{dataType:"source"})),this._tileJSONRequest=vn(this._options,this.map._requestManager,(i,h)=>{this._tileJSONRequest=null,this._loaded=!0,i?this.fire(new c.j(i)):h&&(c.e(this,h),h.bounds&&(this.tileBounds=new Qn(h.bounds,this.minzoom,this.maxzoom)),this.fire(new c.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new c.k("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(i){this.map=i,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}setSourceProperty(i){this._tileJSONRequest&&this._tileJSONRequest.cancel(),i(),this.load()}setTiles(i){return this.setSourceProperty(()=>{this._options.tiles=i}),this}serialize(){return c.e({},this._options)}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}loadTile(i,h){const b=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);i.request=xe.getImage(this.map._requestManager.transformRequest(b,Ce.Tile),(E,B,F)=>{if(delete i.request,i.aborted)i.state="unloaded",h(null);else if(E)i.state="errored",h(E);else if(B){this.map._refreshExpiredTiles&&F&&i.setExpiryData(F);const A=this.map.painter.context,s=A.gl;i.texture=this.map.painter.getTileTexture(B.width),i.texture?i.texture.update(B,{useMipmap:!0}):(i.texture=new Zt(A,B,s.RGBA,{useMipmap:!0}),i.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE,s.LINEAR_MIPMAP_NEAREST),A.extTextureFilterAnisotropic&&s.texParameterf(s.TEXTURE_2D,A.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,A.extTextureFilterAnisotropicMax)),i.state="loaded",h(null)}},this.map._refreshExpiredTiles)}abortTile(i,h){i.request&&(i.request.cancel(),delete i.request),h()}unloadTile(i,h){i.texture&&this.map.painter.saveTileTexture(i.texture),h()}hasTransition(){return!1}}class Ct extends xi{constructor(i,h,b,E){super(i,h,b,E),this.type="raster-dem",this.maxzoom=22,this._options=c.e({type:"raster-dem"},h),this.encoding=h.encoding||"mapbox",this.redFactor=h.redFactor,this.greenFactor=h.greenFactor,this.blueFactor=h.blueFactor,this.baseShift=h.baseShift}loadTile(i,h){const b=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),E=this.map._requestManager.transformRequest(b,Ce.Tile);function B(F,A){F&&(i.state="errored",h(F)),A&&(i.dem=A,i.needsHillshadePrepare=!0,i.needsTerrainPrepare=!0,i.state="loaded",h(null))}i.neighboringTiles=this._getNeighboringTiles(i.tileID),i.request=xe.getImage(E,(F,A,s)=>c._(this,void 0,void 0,function*(){if(delete i.request,i.aborted)i.state="unloaded",h(null);else if(F)i.state="errored",h(F);else if(A){this.map._refreshExpiredTiles&&i.setExpiryData(s);const l=c.a(A)&&c.J()?A:yield function(m){return c._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&c.K()){const k=m.width+2,I=m.height+2;try{return new c.R({width:k,height:I},yield c.M(m,-1,-1,k,I))}catch{}}return c.h.getImageData(m,1)})}(A),f={uid:i.uid,coord:i.tileID,source:this.id,rawImageData:l,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};i.actor&&i.state!=="expired"||(i.actor=this.dispatcher.getActor(),i.actor.send("loadDEMTile",f,B))}}),this.map._refreshExpiredTiles)}_getNeighboringTiles(i){const h=i.canonical,b=Math.pow(2,h.z),E=(h.x-1+b)%b,B=h.x===0?i.wrap-1:i.wrap,F=(h.x+1+b)%b,A=h.x+1===b?i.wrap+1:i.wrap,s={};return s[new c.O(i.overscaledZ,B,h.z,E,h.y).key]={backfilled:!1},s[new c.O(i.overscaledZ,A,h.z,F,h.y).key]={backfilled:!1},h.y>0&&(s[new c.O(i.overscaledZ,B,h.z,E,h.y-1).key]={backfilled:!1},s[new c.O(i.overscaledZ,i.wrap,h.z,h.x,h.y-1).key]={backfilled:!1},s[new c.O(i.overscaledZ,A,h.z,F,h.y-1).key]={backfilled:!1}),h.y+1<b&&(s[new c.O(i.overscaledZ,B,h.z,E,h.y+1).key]={backfilled:!1},s[new c.O(i.overscaledZ,i.wrap,h.z,h.x,h.y+1).key]={backfilled:!1},s[new c.O(i.overscaledZ,A,h.z,F,h.y+1).key]={backfilled:!1}),s}unloadTile(i){i.demTexture&&this.map.painter.saveTileTexture(i.demTexture),i.fbo&&(i.fbo.destroy(),delete i.fbo),i.dem&&delete i.dem,delete i.neighboringTiles,i.state="unloaded",i.actor&&i.actor.send("removeDEMTile",{uid:i.uid,source:this.id})}}class xn extends c.E{constructor(i,h,b,E){super(),this.load=()=>{this._updateWorkerData()},this.serialize=()=>c.e({},this._options,{type:this.type,data:this._data}),this.id=i,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=b.getActor(),this.setEventedParent(E),this._data=h.data,this._options=c.e({},h),this._collectResourceTiming=h.collectResourceTiming,h.maxzoom!==void 0&&(this.maxzoom=h.maxzoom),h.type&&(this.type=h.type),h.attribution&&(this.attribution=h.attribution),this.promoteId=h.promoteId;const B=c.N/this.tileSize;this.workerOptions=c.e({source:this.id,cluster:h.cluster||!1,geojsonVtOptions:{buffer:(h.buffer!==void 0?h.buffer:128)*B,tolerance:(h.tolerance!==void 0?h.tolerance:.375)*B,extent:c.N,maxZoom:this.maxzoom,lineMetrics:h.lineMetrics||!1,generateId:h.generateId||!1},superclusterOptions:{maxZoom:h.clusterMaxZoom!==void 0?h.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,h.clusterMinPoints||2),extent:c.N,radius:(h.clusterRadius||50)*B,log:!1,generateId:h.generateId||!1},clusterProperties:h.clusterProperties,filter:h.filter},h.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}onAdd(i){this.map=i,this.load()}setData(i){return this._data=i,this._updateWorkerData(),this}updateData(i){return this._updateWorkerData(i),this}setClusterOptions(i){return this.workerOptions.cluster=i.cluster,i&&(i.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=i.clusterRadius),i.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=i.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(i,h){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:i,source:this.id},h),this}getClusterChildren(i,h){return this.actor.send("geojson.getClusterChildren",{clusterId:i,source:this.id},h),this}getClusterLeaves(i,h,b,E){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:i,limit:h,offset:b},E),this}_updateWorkerData(i){const h=c.e({},this.workerOptions);i?h.dataDiff=i:typeof this._data=="string"?(h.request=this.map._requestManager.transformRequest(c.h.resolveURL(this._data),Ce.Source),h.request.collectResourceTiming=this._collectResourceTiming):h.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new c.k("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,h,(b,E)=>{if(this._pendingLoads--,this._removed||E&&E.abandoned)return void this.fire(new c.k("dataabort",{dataType:"source"}));let B=null;if(E&&E.resourceTiming&&E.resourceTiming[this.id]&&(B=E.resourceTiming[this.id].slice(0)),b)return void this.fire(new c.j(b));const F={dataType:"source"};this._collectResourceTiming&&B&&B.length>0&&c.e(F,{resourceTiming:B}),this.fire(new c.k("data",Object.assign(Object.assign({},F),{sourceDataType:"metadata"}))),this.fire(new c.k("data",Object.assign(Object.assign({},F),{sourceDataType:"content"})))})}loaded(){return this._pendingLoads===0}loadTile(i,h){const b=i.actor?"reloadTile":"loadTile";i.actor=this.actor;const E={type:this.type,uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};i.request=this.actor.send(b,E,(B,F)=>(delete i.request,i.unloadVectorData(),i.aborted?h(null):B?h(B):(i.loadVectorData(F,this.map.painter,b==="reloadTile"),h(null))))}abortTile(i){i.request&&(i.request.cancel(),delete i.request),i.aborted=!0}unloadTile(i){i.unloadVectorData(),this.actor.send("removeTile",{uid:i.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}hasTransition(){return!1}}var Bt=c.Q([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class En extends c.E{constructor(i,h,b,E){super(),this.load=(B,F)=>{this._loaded=!1,this.fire(new c.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=xe.getImage(this.map._requestManager.transformRequest(this.url,Ce.Image),(A,s)=>{this._request=null,this._loaded=!0,A?this.fire(new c.j(A)):s&&(this.image=s,B&&(this.coordinates=B),F&&F(),this._finishLoading())})},this.prepare=()=>{if(Object.keys(this.tiles).length===0||!this.image)return;const B=this.map.painter.context,F=B.gl;this.boundsBuffer||(this.boundsBuffer=B.createVertexBuffer(this._boundsArray,Bt.members)),this.boundsSegments||(this.boundsSegments=c.S.simpleSegment(0,0,4,2)),this.texture||(this.texture=new Zt(B,this.image,F.RGBA),this.texture.bind(F.LINEAR,F.CLAMP_TO_EDGE));let A=!1;for(const s in this.tiles){const l=this.tiles[s];l.state!=="loaded"&&(l.state="loaded",l.texture=this.texture,A=!0)}A&&this.fire(new c.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"image",url:this.options.url,coordinates:this.coordinates}),this.id=i,this.dispatcher=b,this.coordinates=h.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(E),this.options=h}loaded(){return this._loaded}updateImage(i){return i.url?(this._request&&(this._request.cancel(),this._request=null),this.options.url=i.url,this.load(i.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new c.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(i){this.map=i,this.load()}onRemove(){this._request&&(this._request.cancel(),this._request=null)}setCoordinates(i){this.coordinates=i;const h=i.map(c.U.fromLngLat);this.tileID=function(E){let B=1/0,F=1/0,A=-1/0,s=-1/0;for(const k of E)B=Math.min(B,k.x),F=Math.min(F,k.y),A=Math.max(A,k.x),s=Math.max(s,k.y);const l=Math.max(A-B,s-F),f=Math.max(0,Math.floor(-Math.log(l)/Math.LN2)),m=Math.pow(2,f);return new c.W(f,Math.floor((B+A)/2*m),Math.floor((F+s)/2*m))}(h),this.minzoom=this.maxzoom=this.tileID.z;const b=h.map(E=>this.tileID.getTilePoint(E)._round());return this._boundsArray=new c.V,this._boundsArray.emplaceBack(b[0].x,b[0].y,0,0),this._boundsArray.emplaceBack(b[1].x,b[1].y,c.N,0),this._boundsArray.emplaceBack(b[3].x,b[3].y,0,c.N),this._boundsArray.emplaceBack(b[2].x,b[2].y,c.N,c.N),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new c.k("data",{dataType:"source",sourceDataType:"content"})),this}loadTile(i,h){this.tileID&&this.tileID.equals(i.tileID.canonical)?(this.tiles[String(i.tileID.wrap)]=i,i.buckets={},h(null)):(i.state="errored",h(null))}hasTransition(){return!1}}class Gn extends En{constructor(i,h,b,E){super(i,h,b,E),this.load=()=>{this._loaded=!1;const B=this.options;this.urls=[];for(const F of B.urls)this.urls.push(this.map._requestManager.transformRequest(F,Ce.Source).url);c.X(this.urls,(F,A)=>{this._loaded=!0,F?this.fire(new c.j(F)):A&&(this.video=A,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})},this.prepare=()=>{if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const B=this.map.painter.context,F=B.gl;this.boundsBuffer||(this.boundsBuffer=B.createVertexBuffer(this._boundsArray,Bt.members)),this.boundsSegments||(this.boundsSegments=c.S.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(F.LINEAR,F.CLAMP_TO_EDGE),F.texSubImage2D(F.TEXTURE_2D,0,0,0,F.RGBA,F.UNSIGNED_BYTE,this.video)):(this.texture=new Zt(B,this.video,F.RGBA),this.texture.bind(F.LINEAR,F.CLAMP_TO_EDGE));let A=!1;for(const s in this.tiles){const l=this.tiles[s];l.state!=="loaded"&&(l.state="loaded",l.texture=this.texture,A=!0)}A&&this.fire(new c.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"video",urls:this.urls,coordinates:this.coordinates}),this.roundZoom=!0,this.type="video",this.options=h}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(i){if(this.video){const h=this.video.seekable;i<h.start(0)||i>h.end(0)?this.fire(new c.j(new c.Y(`sources.${this.id}`,null,`Playback for this video can be set only between the ${h.start(0)} and ${h.end(0)}-second mark.`))):this.video.currentTime=i}}getVideo(){return this.video}onAdd(i){this.map||(this.map=i,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}hasTransition(){return this.video&&!this.video.paused}}class Lt extends En{constructor(i,h,b,E){super(i,h,b,E),this.load=()=>{this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new c.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},this.prepare=()=>{let B=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,B=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,B=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const F=this.map.painter.context,A=F.gl;this.boundsBuffer||(this.boundsBuffer=F.createVertexBuffer(this._boundsArray,Bt.members)),this.boundsSegments||(this.boundsSegments=c.S.simpleSegment(0,0,4,2)),this.texture?(B||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new Zt(F,this.canvas,A.RGBA,{premultiply:!0});let s=!1;for(const l in this.tiles){const f=this.tiles[l];f.state!=="loaded"&&(f.state="loaded",f.texture=this.texture,s=!0)}s&&this.fire(new c.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"canvas",coordinates:this.coordinates}),h.coordinates?Array.isArray(h.coordinates)&&h.coordinates.length===4&&!h.coordinates.some(B=>!Array.isArray(B)||B.length!==2||B.some(F=>typeof F!="number"))||this.fire(new c.j(new c.Y(`sources.${i}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new c.j(new c.Y(`sources.${i}`,null,'missing required property "coordinates"'))),h.animate&&typeof h.animate!="boolean"&&this.fire(new c.j(new c.Y(`sources.${i}`,null,'optional "animate" property must be a boolean value'))),h.canvas?typeof h.canvas=="string"||h.canvas instanceof HTMLCanvasElement||this.fire(new c.j(new c.Y(`sources.${i}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new c.j(new c.Y(`sources.${i}`,null,'missing required property "canvas"'))),this.options=h,this.animate=h.animate===void 0||h.animate}getCanvas(){return this.canvas}onAdd(i){this.map=i,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const i of[this.canvas.width,this.canvas.height])if(isNaN(i)||i<=0)return!0;return!1}}const Ii={},Pn=C=>{switch(C){case"geojson":return xn;case"image":return En;case"raster":return xi;case"raster-dem":return Ct;case"vector":return di;case"video":return Gn;case"canvas":return Lt}return Ii[C]};function qi(C,i){const h=c.Z();return c.$(h,h,[1,1,0]),c.a0(h,h,[.5*C.width,.5*C.height,1]),c.a1(h,h,C.calculatePosMatrix(i.toUnwrapped()))}function Ar(C,i,h,b,E,B){const F=function(m,k,I){if(m)for(const D of m){const Q=k[D];if(Q&&Q.source===I&&Q.type==="fill-extrusion")return!0}else for(const D in k){const Q=k[D];if(Q.source===I&&Q.type==="fill-extrusion")return!0}return!1}(E&&E.layers,i,C.id),A=B.maxPitchScaleFactor(),s=C.tilesIn(b,A,F);s.sort(un);const l=[];for(const m of s)l.push({wrappedTileID:m.tileID.wrapped().key,queryResults:m.tile.queryRenderedFeatures(i,h,C._state,m.queryGeometry,m.cameraQueryGeometry,m.scale,E,B,A,qi(C.transform,m.tileID))});const f=function(m){const k={},I={};for(const D of m){const Q=D.queryResults,Z=D.wrappedTileID,X=I[Z]=I[Z]||{};for(const ie in Q){const Ae=Q[ie],ce=X[ie]=X[ie]||{},fe=k[ie]=k[ie]||[];for(const ve of Ae)ce[ve.featureIndex]||(ce[ve.featureIndex]=!0,fe.push(ve))}}return k}(l);for(const m in f)f[m].forEach(k=>{const I=k.feature,D=C.getFeatureState(I.layer["source-layer"],I.id);I.source=I.layer.source,I.layer["source-layer"]&&(I.sourceLayer=I.layer["source-layer"]),I.state=D});return f}function un(C,i){const h=C.tileID,b=i.tileID;return h.overscaledZ-b.overscaledZ||h.canonical.y-b.canonical.y||h.wrap-b.wrap||h.canonical.x-b.canonical.x}class Jn{constructor(i,h){this.timeAdded=0,this.fadeEndTime=0,this.tileID=i,this.uid=c.a2(),this.uses=0,this.tileSize=h,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(i){const h=i+this.timeAdded;h<this.fadeEndTime||(this.fadeEndTime=h)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(i){this.demTexture&&i.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(i,h,b){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",i){i.featureIndex&&(this.latestFeatureIndex=i.featureIndex,i.rawTileData?(this.latestRawTileData=i.rawTileData,this.latestFeatureIndex.rawTileData=i.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=i.collisionBoxArray,this.buckets=function(E,B){const F={};if(!B)return F;for(const A of E){const s=A.layerIds.map(l=>B.getLayer(l)).filter(Boolean);if(s.length!==0){A.layers=s,A.stateDependentLayerIds&&(A.stateDependentLayers=A.stateDependentLayerIds.map(l=>s.filter(f=>f.id===l)[0]));for(const l of s)F[l.id]=A}}return F}(i.buckets,h.style),this.hasSymbolBuckets=!1;for(const E in this.buckets){const B=this.buckets[E];if(B instanceof c.a4){if(this.hasSymbolBuckets=!0,!b)break;B.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const E in this.buckets){const B=this.buckets[E];if(B instanceof c.a4&&B.hasRTLText){this.hasRTLText=!0,c.a5();break}}this.queryPadding=0;for(const E in this.buckets){const B=this.buckets[E];this.queryPadding=Math.max(this.queryPadding,h.style.getLayer(E).queryRadius(B))}i.imageAtlas&&(this.imageAtlas=i.imageAtlas),i.glyphAtlasImage&&(this.glyphAtlasImage=i.glyphAtlasImage)}else this.collisionBoxArray=new c.a3}unloadVectorData(){for(const i in this.buckets)this.buckets[i].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(i){return this.buckets[i.id]}upload(i){for(const b in this.buckets){const E=this.buckets[b];E.uploadPending()&&E.upload(i)}const h=i.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Zt(i,this.imageAtlas.image,h.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Zt(i,this.glyphAtlasImage,h.ALPHA),this.glyphAtlasImage=null)}prepare(i){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(i,this.imageAtlasTexture)}queryRenderedFeatures(i,h,b,E,B,F,A,s,l,f){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:E,cameraQueryGeometry:B,scale:F,tileSize:this.tileSize,pixelPosMatrix:f,transform:s,params:A,queryPadding:this.queryPadding*l},i,h,b):{}}querySourceFeatures(i,h){const b=this.latestFeatureIndex;if(!b||!b.rawTileData)return;const E=b.loadVTLayers(),B=h&&h.sourceLayer?h.sourceLayer:"",F=E._geojsonTileLayer||E[B];if(!F)return;const A=c.a6(h&&h.filter),{z:s,x:l,y:f}=this.tileID.canonical,m={z:s,x:l,y:f};for(let k=0;k<F.length;k++){const I=F.feature(k);if(A.needGeometry){const Z=c.a7(I,!0);if(!A.filter(new c.a8(this.tileID.overscaledZ),Z,this.tileID.canonical))continue}else if(!A.filter(new c.a8(this.tileID.overscaledZ),I))continue;const D=b.getId(I,B),Q=new c.a9(I,s,l,f,D);Q.tile=m,i.push(Q)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(i){const h=this.expirationTime;if(i.cacheControl){const b=c.aa(i.cacheControl);b["max-age"]&&(this.expirationTime=Date.now()+1e3*b["max-age"])}else i.expires&&(this.expirationTime=new Date(i.expires).getTime());if(this.expirationTime){const b=Date.now();let E=!1;if(this.expirationTime>b)E=!1;else if(h)if(this.expirationTime<h)E=!0;else{const B=this.expirationTime-h;B?this.expirationTime=b+Math.max(B,3e4):E=!0}else E=!0;E?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(i,h){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(i).length===0)return;const b=this.latestFeatureIndex.loadVTLayers();for(const E in this.buckets){if(!h.style.hasLayer(E))continue;const B=this.buckets[E],F=B.layers[0].sourceLayer||"_geojsonTileLayer",A=b[F],s=i[F];if(!A||!s||Object.keys(s).length===0)continue;B.update(s,A,this.imageAtlas&&this.imageAtlas.patternPositions||{});const l=h&&h.style&&h.style.getLayer(E);l&&(this.queryPadding=Math.max(this.queryPadding,l.queryRadius(B)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<c.h.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(i){this.symbolFadeHoldUntil=c.h.now()+i}setDependencies(i,h){const b={};for(const E of h)b[E]=!0;this.dependencies[i]=b}hasDependency(i,h){for(const b of i){const E=this.dependencies[b];if(E){for(const B of h)if(E[B])return!0}}return!1}}class uA{constructor(i,h){this.max=i,this.onRemove=h,this.reset()}reset(){for(const i in this.data)for(const h of this.data[i])h.timeout&&clearTimeout(h.timeout),this.onRemove(h.value);return this.data={},this.order=[],this}add(i,h,b){const E=i.wrapped().key;this.data[E]===void 0&&(this.data[E]=[]);const B={value:h,timeout:void 0};if(b!==void 0&&(B.timeout=setTimeout(()=>{this.remove(i,B)},b)),this.data[E].push(B),this.order.push(E),this.order.length>this.max){const F=this._getAndRemoveByKey(this.order[0]);F&&this.onRemove(F)}return this}has(i){return i.wrapped().key in this.data}getAndRemove(i){return this.has(i)?this._getAndRemoveByKey(i.wrapped().key):null}_getAndRemoveByKey(i){const h=this.data[i].shift();return h.timeout&&clearTimeout(h.timeout),this.data[i].length===0&&delete this.data[i],this.order.splice(this.order.indexOf(i),1),h.value}getByKey(i){const h=this.data[i];return h?h[0].value:null}get(i){return this.has(i)?this.data[i.wrapped().key][0].value:null}remove(i,h){if(!this.has(i))return this;const b=i.wrapped().key,E=h===void 0?0:this.data[b].indexOf(h),B=this.data[b][E];return this.data[b].splice(E,1),B.timeout&&clearTimeout(B.timeout),this.data[b].length===0&&delete this.data[b],this.onRemove(B.value),this.order.splice(this.order.indexOf(b),1),this}setMaxSize(i){for(this.max=i;this.order.length>this.max;){const h=this._getAndRemoveByKey(this.order[0]);h&&this.onRemove(h)}return this}filter(i){const h=[];for(const b in this.data)for(const E of this.data[b])i(E.value)||h.push(E);for(const b of h)this.remove(b.value.tileID,b)}}class pt{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(i,h,b){const E=String(h);if(this.stateChanges[i]=this.stateChanges[i]||{},this.stateChanges[i][E]=this.stateChanges[i][E]||{},c.e(this.stateChanges[i][E],b),this.deletedStates[i]===null){this.deletedStates[i]={};for(const B in this.state[i])B!==E&&(this.deletedStates[i][B]=null)}else if(this.deletedStates[i]&&this.deletedStates[i][E]===null){this.deletedStates[i][E]={};for(const B in this.state[i][E])b[B]||(this.deletedStates[i][E][B]=null)}else for(const B in b)this.deletedStates[i]&&this.deletedStates[i][E]&&this.deletedStates[i][E][B]===null&&delete this.deletedStates[i][E][B]}removeFeatureState(i,h,b){if(this.deletedStates[i]===null)return;const E=String(h);if(this.deletedStates[i]=this.deletedStates[i]||{},b&&h!==void 0)this.deletedStates[i][E]!==null&&(this.deletedStates[i][E]=this.deletedStates[i][E]||{},this.deletedStates[i][E][b]=null);else if(h!==void 0)if(this.stateChanges[i]&&this.stateChanges[i][E])for(b in this.deletedStates[i][E]={},this.stateChanges[i][E])this.deletedStates[i][E][b]=null;else this.deletedStates[i][E]=null;else this.deletedStates[i]=null}getState(i,h){const b=String(h),E=c.e({},(this.state[i]||{})[b],(this.stateChanges[i]||{})[b]);if(this.deletedStates[i]===null)return{};if(this.deletedStates[i]){const B=this.deletedStates[i][h];if(B===null)return{};for(const F in B)delete E[F]}return E}initializeTileState(i,h){i.setFeatureState(this.state,h)}coalesceChanges(i,h){const b={};for(const E in this.stateChanges){this.state[E]=this.state[E]||{};const B={};for(const F in this.stateChanges[E])this.state[E][F]||(this.state[E][F]={}),c.e(this.state[E][F],this.stateChanges[E][F]),B[F]=this.state[E][F];b[E]=B}for(const E in this.deletedStates){this.state[E]=this.state[E]||{};const B={};if(this.deletedStates[E]===null)for(const F in this.state[E])B[F]={},this.state[E][F]={};else for(const F in this.deletedStates[E]){if(this.deletedStates[E][F]===null)this.state[E][F]={};else for(const A of Object.keys(this.deletedStates[E][F]))delete this.state[E][F][A];B[F]=this.state[E][F]}b[E]=b[E]||{},c.e(b[E],B)}if(this.stateChanges={},this.deletedStates={},Object.keys(b).length!==0)for(const E in i)i[E].setFeatureState(b,h)}}class ei extends c.E{constructor(i,h,b){super(),this.id=i,this.dispatcher=b,this.on("data",E=>{E.dataType==="source"&&E.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&E.dataType==="source"&&E.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((E,B,F,A)=>{const s=new(Pn(B.type))(E,B,F,A);if(s.id!==E)throw new Error(`Expected Source id to be ${E} instead of ${s.id}`);return s})(i,h,b,this),this._tiles={},this._cache=new uA(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new pt,this._didEmitContent=!1,this._updated=!1}onAdd(i){this.map=i,this._maxTileCacheSize=i?i._maxTileCacheSize:null,this._maxTileCacheZoomLevels=i?i._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(i)}onRemove(i){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(i)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const i in this._tiles){const h=this._tiles[i];if(h.state!=="loaded"&&h.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const i=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,i&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(i,h){return this._source.loadTile(i,h)}_unloadTile(i){if(this._source.unloadTile)return this._source.unloadTile(i,()=>{})}_abortTile(i){this._source.abortTile&&this._source.abortTile(i,()=>{}),this._source.fire(new c.k("dataabort",{tile:i,coord:i.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(i){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const h in this._tiles){const b=this._tiles[h];b.upload(i),b.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(i=>i.tileID).sort(_r).map(i=>i.key)}getRenderableIds(i){const h=[];for(const b in this._tiles)this._isIdRenderable(b,i)&&h.push(this._tiles[b]);return i?h.sort((b,E)=>{const B=b.tileID,F=E.tileID,A=new c.P(B.canonical.x,B.canonical.y)._rotate(this.transform.angle),s=new c.P(F.canonical.x,F.canonical.y)._rotate(this.transform.angle);return B.overscaledZ-F.overscaledZ||s.y-A.y||s.x-A.x}).map(b=>b.tileID.key):h.map(b=>b.tileID).sort(_r).map(b=>b.key)}hasRenderableParent(i){const h=this.findLoadedParent(i,0);return!!h&&this._isIdRenderable(h.tileID.key)}_isIdRenderable(i,h){return this._tiles[i]&&this._tiles[i].hasData()&&!this._coveredTiles[i]&&(h||!this._tiles[i].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const i in this._tiles)this._tiles[i].state!=="errored"&&this._reloadTile(i,"reloading")}}_reloadTile(i,h){const b=this._tiles[i];b&&(b.state!=="loading"&&(b.state=h),this._loadTile(b,this._tileLoaded.bind(this,b,i,h)))}_tileLoaded(i,h,b,E){if(E)return i.state="errored",void(E.status!==404?this._source.fire(new c.j(E,{tile:i})):this.update(this.transform,this.terrain));i.timeAdded=c.h.now(),b==="expired"&&(i.refreshedUponExpiration=!0),this._setTileReloadTimer(h,i),this.getSource().type==="raster-dem"&&i.dem&&this._backfillDEM(i),this._state.initializeTileState(i,this.map?this.map.painter:null),i.aborted||this._source.fire(new c.k("data",{dataType:"source",tile:i,coord:i.tileID}))}_backfillDEM(i){const h=this.getRenderableIds();for(let E=0;E<h.length;E++){const B=h[E];if(i.neighboringTiles&&i.neighboringTiles[B]){const F=this.getTileByID(B);b(i,F),b(F,i)}}function b(E,B){E.needsHillshadePrepare=!0,E.needsTerrainPrepare=!0;let F=B.tileID.canonical.x-E.tileID.canonical.x;const A=B.tileID.canonical.y-E.tileID.canonical.y,s=Math.pow(2,E.tileID.canonical.z),l=B.tileID.key;F===0&&A===0||Math.abs(A)>1||(Math.abs(F)>1&&(Math.abs(F+s)===1?F+=s:Math.abs(F-s)===1&&(F-=s)),B.dem&&E.dem&&(E.dem.backfillBorder(B.dem,F,A),E.neighboringTiles&&E.neighboringTiles[l]&&(E.neighboringTiles[l].backfilled=!0)))}}getTile(i){return this.getTileByID(i.key)}getTileByID(i){return this._tiles[i]}_retainLoadedChildren(i,h,b,E){for(const B in this._tiles){let F=this._tiles[B];if(E[B]||!F.hasData()||F.tileID.overscaledZ<=h||F.tileID.overscaledZ>b)continue;let A=F.tileID;for(;F&&F.tileID.overscaledZ>h+1;){const l=F.tileID.scaledTo(F.tileID.overscaledZ-1);F=this._tiles[l.key],F&&F.hasData()&&(A=l)}let s=A;for(;s.overscaledZ>h;)if(s=s.scaledTo(s.overscaledZ-1),i[s.key]){E[A.key]=A;break}}}findLoadedParent(i,h){if(i.key in this._loadedParentTiles){const b=this._loadedParentTiles[i.key];return b&&b.tileID.overscaledZ>=h?b:null}for(let b=i.overscaledZ-1;b>=h;b--){const E=i.scaledTo(b),B=this._getLoadedTile(E);if(B)return B}}_getLoadedTile(i){const h=this._tiles[i.key];return h&&h.hasData()?h:this._cache.getByKey(i.wrapped().key)}updateCacheSize(i){const h=Math.ceil(i.width/this._source.tileSize)+1,b=Math.ceil(i.height/this._source.tileSize)+1,E=Math.floor(h*b*(this._maxTileCacheZoomLevels===null?c.c.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),B=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,E):E;this._cache.setMaxSize(B)}handleWrapJump(i){const h=Math.round((i-(this._prevLng===void 0?i:this._prevLng))/360);if(this._prevLng=i,h){const b={};for(const E in this._tiles){const B=this._tiles[E];B.tileID=B.tileID.unwrapTo(B.tileID.wrap+h),b[B.tileID.key]=B}this._tiles=b;for(const E in this._timers)clearTimeout(this._timers[E]),delete this._timers[E];for(const E in this._tiles)this._setTileReloadTimer(E,this._tiles[E])}}update(i,h){if(this.transform=i,this.terrain=h,!this._sourceLoaded||this._paused)return;let b;this.updateCacheSize(i),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?b=i.getVisibleUnwrappedCoordinates(this._source.tileID).map(f=>new c.O(f.canonical.z,f.wrap,f.canonical.z,f.canonical.x,f.canonical.y)):(b=i.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:h}),this._source.hasTile&&(b=b.filter(f=>this._source.hasTile(f)))):b=[];const E=i.coveringZoomLevel(this._source),B=Math.max(E-ei.maxOverzooming,this._source.minzoom),F=Math.max(E+ei.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const f={};for(const m of b)if(m.canonical.z>this._source.minzoom){const k=m.scaledTo(m.canonical.z-1);f[k.key]=k;const I=m.scaledTo(Math.max(this._source.minzoom,Math.min(m.canonical.z,5)));f[I.key]=I}b=b.concat(Object.values(f))}const A=b.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,A&&this.fire(new c.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const s=this._updateRetainedTiles(b,E);if(pi(this._source.type)){const f={},m={},k=Object.keys(s),I=c.h.now();for(const D of k){const Q=s[D],Z=this._tiles[D];if(!Z||Z.fadeEndTime!==0&&Z.fadeEndTime<=I)continue;const X=this.findLoadedParent(Q,B);X&&(this._addTile(X.tileID),f[X.tileID.key]=X.tileID),m[D]=Q}this._retainLoadedChildren(m,E,F,s);for(const D in f)s[D]||(this._coveredTiles[D]=!0,s[D]=f[D]);if(h){const D={},Q={};for(const Z of b)this._tiles[Z.key].hasData()?D[Z.key]=Z:Q[Z.key]=Z;for(const Z in Q){const X=Q[Z].children(this._source.maxzoom);this._tiles[X[0].key]&&this._tiles[X[1].key]&&this._tiles[X[2].key]&&this._tiles[X[3].key]&&(D[X[0].key]=s[X[0].key]=X[0],D[X[1].key]=s[X[1].key]=X[1],D[X[2].key]=s[X[2].key]=X[2],D[X[3].key]=s[X[3].key]=X[3],delete Q[Z])}for(const Z in Q){const X=this.findLoadedParent(Q[Z],this._source.minzoom);if(X){D[X.tileID.key]=s[X.tileID.key]=X.tileID;for(const ie in D)D[ie].isChildOf(X.tileID)&&delete D[ie]}}for(const Z in this._tiles)D[Z]||(this._coveredTiles[Z]=!0)}}for(const f in s)this._tiles[f].clearFadeHold();const l=c.ab(this._tiles,s);for(const f of l){const m=this._tiles[f];m.hasSymbolBuckets&&!m.holdingForFade()?m.setHoldDuration(this.map._fadeDuration):m.hasSymbolBuckets&&!m.symbolFadeFinished()||this._removeTile(f)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const i in this._tiles)this._tiles[i].holdingForFade()&&this._removeTile(i)}_updateRetainedTiles(i,h){const b={},E={},B=Math.max(h-ei.maxOverzooming,this._source.minzoom),F=Math.max(h+ei.maxUnderzooming,this._source.minzoom),A={};for(const s of i){const l=this._addTile(s);b[s.key]=s,l.hasData()||h<this._source.maxzoom&&(A[s.key]=s)}this._retainLoadedChildren(A,h,F,b);for(const s of i){let l=this._tiles[s.key];if(l.hasData())continue;if(h+1>this._source.maxzoom){const m=s.children(this._source.maxzoom)[0],k=this.getTile(m);if(k&&k.hasData()){b[m.key]=m;continue}}else{const m=s.children(this._source.maxzoom);if(b[m[0].key]&&b[m[1].key]&&b[m[2].key]&&b[m[3].key])continue}let f=l.wasRequested();for(let m=s.overscaledZ-1;m>=B;--m){const k=s.scaledTo(m);if(E[k.key])break;if(E[k.key]=!0,l=this.getTile(k),!l&&f&&(l=this._addTile(k)),l){const I=l.hasData();if((f||I)&&(b[k.key]=k),f=l.wasRequested(),I)break}}}return b}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const i in this._tiles){const h=[];let b,E=this._tiles[i].tileID;for(;E.overscaledZ>0;){if(E.key in this._loadedParentTiles){b=this._loadedParentTiles[E.key];break}h.push(E.key);const B=E.scaledTo(E.overscaledZ-1);if(b=this._getLoadedTile(B),b)break;E=B}for(const B of h)this._loadedParentTiles[B]=b}}_addTile(i){let h=this._tiles[i.key];if(h)return h;h=this._cache.getAndRemove(i),h&&(this._setTileReloadTimer(i.key,h),h.tileID=i,this._state.initializeTileState(h,this.map?this.map.painter:null),this._cacheTimers[i.key]&&(clearTimeout(this._cacheTimers[i.key]),delete this._cacheTimers[i.key],this._setTileReloadTimer(i.key,h)));const b=h;return h||(h=new Jn(i,this._source.tileSize*i.overscaleFactor()),this._loadTile(h,this._tileLoaded.bind(this,h,i.key,h.state))),h.uses++,this._tiles[i.key]=h,b||this._source.fire(new c.k("dataloading",{tile:h,coord:h.tileID,dataType:"source"})),h}_setTileReloadTimer(i,h){i in this._timers&&(clearTimeout(this._timers[i]),delete this._timers[i]);const b=h.getExpiryTimeout();b&&(this._timers[i]=setTimeout(()=>{this._reloadTile(i,"expired"),delete this._timers[i]},b))}_removeTile(i){const h=this._tiles[i];h&&(h.uses--,delete this._tiles[i],this._timers[i]&&(clearTimeout(this._timers[i]),delete this._timers[i]),h.uses>0||(h.hasData()&&h.state!=="reloading"?this._cache.add(h.tileID,h,h.getExpiryTimeout()):(h.aborted=!0,this._abortTile(h),this._unloadTile(h))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const i in this._tiles)this._removeTile(i);this._cache.reset()}tilesIn(i,h,b){const E=[],B=this.transform;if(!B)return E;const F=b?B.getCameraQueryGeometry(i):i,A=i.map(D=>B.pointCoordinate(D,this.terrain)),s=F.map(D=>B.pointCoordinate(D,this.terrain)),l=this.getIds();let f=1/0,m=1/0,k=-1/0,I=-1/0;for(const D of s)f=Math.min(f,D.x),m=Math.min(m,D.y),k=Math.max(k,D.x),I=Math.max(I,D.y);for(let D=0;D<l.length;D++){const Q=this._tiles[l[D]];if(Q.holdingForFade())continue;const Z=Q.tileID,X=Math.pow(2,B.zoom-Q.tileID.overscaledZ),ie=h*Q.queryPadding*c.N/Q.tileSize/X,Ae=[Z.getTilePoint(new c.U(f,m)),Z.getTilePoint(new c.U(k,I))];if(Ae[0].x-ie<c.N&&Ae[0].y-ie<c.N&&Ae[1].x+ie>=0&&Ae[1].y+ie>=0){const ce=A.map(ve=>Z.getTilePoint(ve)),fe=s.map(ve=>Z.getTilePoint(ve));E.push({tile:Q,tileID:Z,queryGeometry:ce,cameraQueryGeometry:fe,scale:X})}}return E}getVisibleCoordinates(i){const h=this.getRenderableIds(i).map(b=>this._tiles[b].tileID);for(const b of h)b.posMatrix=this.transform.calculatePosMatrix(b.toUnwrapped());return h}hasTransition(){if(this._source.hasTransition())return!0;if(pi(this._source.type)){const i=c.h.now();for(const h in this._tiles)if(this._tiles[h].fadeEndTime>=i)return!0}return!1}setFeatureState(i,h,b){this._state.updateState(i=i||"_geojsonTileLayer",h,b)}removeFeatureState(i,h,b){this._state.removeFeatureState(i=i||"_geojsonTileLayer",h,b)}getFeatureState(i,h){return this._state.getState(i=i||"_geojsonTileLayer",h)}setDependencies(i,h,b){const E=this._tiles[i];E&&E.setDependencies(h,b)}reloadTilesForDependencies(i,h){for(const b in this._tiles)this._tiles[b].hasDependency(i,h)&&this._reloadTile(b,"reloading");this._cache.filter(b=>!b.hasDependency(i,h))}}function _r(C,i){const h=Math.abs(2*C.wrap)-+(C.wrap<0),b=Math.abs(2*i.wrap)-+(i.wrap<0);return C.overscaledZ-i.overscaledZ||b-h||i.canonical.y-C.canonical.y||i.canonical.x-C.canonical.x}function pi(C){return C==="raster"||C==="image"||C==="video"}ei.maxOverzooming=10,ei.maxUnderzooming=3;const qn="mapboxgl_preloaded_worker_pool";class Br{constructor(){this.active={}}acquire(i){if(!this.workers)for(this.workers=[];this.workers.length<Br.workerCount;)this.workers.push(new Worker(c.c.WORKER_URL));return this.active[i]=!0,this.workers.slice()}release(i){delete this.active[i],this.numActive()===0&&(this.workers.forEach(h=>{h.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[qn]}numActive(){return Object.keys(this.active).length}}const So=Math.floor(c.h.hardwareConcurrency/2);let cA;function FA(){return cA||(cA=new Br),cA}Br.workerCount=c.ac(globalThis)?Math.max(Math.min(So,3),1):1;class is{constructor(i,h){this.reset(i,h)}reset(i,h){this.points=i||[],this._distances=[0];for(let b=1;b<this.points.length;b++)this._distances[b]=this._distances[b-1]+this.points[b].dist(this.points[b-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(h||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(i){if(this.points.length===1)return this.points[0];i=c.ad(i,0,1);let h=1,b=this._distances[h];const E=i*this.paddedLength+this.padding;for(;b<E&&h<this._distances.length;)b=this._distances[++h];const B=h-1,F=this._distances[B],A=b-F,s=A>0?(E-F)/A:0;return this.points[B].mult(1-s).add(this.points[h].mult(s))}}function rs(C,i){let h=!0;return C==="always"||C!=="never"&&i!=="never"||(h=!1),h}class Es{constructor(i,h,b){const E=this.boxCells=[],B=this.circleCells=[];this.xCellCount=Math.ceil(i/b),this.yCellCount=Math.ceil(h/b);for(let F=0;F<this.xCellCount*this.yCellCount;F++)E.push([]),B.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=i,this.height=h,this.xScale=this.xCellCount/i,this.yScale=this.yCellCount/h,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(i,h,b,E,B){this._forEachCell(h,b,E,B,this._insertBoxCell,this.boxUid++),this.boxKeys.push(i),this.bboxes.push(h),this.bboxes.push(b),this.bboxes.push(E),this.bboxes.push(B)}insertCircle(i,h,b,E){this._forEachCell(h-E,b-E,h+E,b+E,this._insertCircleCell,this.circleUid++),this.circleKeys.push(i),this.circles.push(h),this.circles.push(b),this.circles.push(E)}_insertBoxCell(i,h,b,E,B,F){this.boxCells[B].push(F)}_insertCircleCell(i,h,b,E,B,F){this.circleCells[B].push(F)}_query(i,h,b,E,B,F,A){if(b<0||i>this.width||E<0||h>this.height)return[];const s=[];if(i<=0&&h<=0&&this.width<=b&&this.height<=E){if(B)return[{key:null,x1:i,y1:h,x2:b,y2:E}];for(let l=0;l<this.boxKeys.length;l++)s.push({key:this.boxKeys[l],x1:this.bboxes[4*l],y1:this.bboxes[4*l+1],x2:this.bboxes[4*l+2],y2:this.bboxes[4*l+3]});for(let l=0;l<this.circleKeys.length;l++){const f=this.circles[3*l],m=this.circles[3*l+1],k=this.circles[3*l+2];s.push({key:this.circleKeys[l],x1:f-k,y1:m-k,x2:f+k,y2:m+k})}}else this._forEachCell(i,h,b,E,this._queryCell,s,{hitTest:B,overlapMode:F,seenUids:{box:{},circle:{}}},A);return s}query(i,h,b,E){return this._query(i,h,b,E,!1,null)}hitTest(i,h,b,E,B,F){return this._query(i,h,b,E,!0,B,F).length>0}hitTestCircle(i,h,b,E,B){const F=i-b,A=i+b,s=h-b,l=h+b;if(A<0||F>this.width||l<0||s>this.height)return!1;const f=[];return this._forEachCell(F,s,A,l,this._queryCellCircle,f,{hitTest:!0,overlapMode:E,circle:{x:i,y:h,radius:b},seenUids:{box:{},circle:{}}},B),f.length>0}_queryCell(i,h,b,E,B,F,A,s){const{seenUids:l,hitTest:f,overlapMode:m}=A,k=this.boxCells[B];if(k!==null){const D=this.bboxes;for(const Q of k)if(!l.box[Q]){l.box[Q]=!0;const Z=4*Q,X=this.boxKeys[Q];if(i<=D[Z+2]&&h<=D[Z+3]&&b>=D[Z+0]&&E>=D[Z+1]&&(!s||s(X))&&(!f||!rs(m,X.overlapMode))&&(F.push({key:X,x1:D[Z],y1:D[Z+1],x2:D[Z+2],y2:D[Z+3]}),f))return!0}}const I=this.circleCells[B];if(I!==null){const D=this.circles;for(const Q of I)if(!l.circle[Q]){l.circle[Q]=!0;const Z=3*Q,X=this.circleKeys[Q];if(this._circleAndRectCollide(D[Z],D[Z+1],D[Z+2],i,h,b,E)&&(!s||s(X))&&(!f||!rs(m,X.overlapMode))){const ie=D[Z],Ae=D[Z+1],ce=D[Z+2];if(F.push({key:X,x1:ie-ce,y1:Ae-ce,x2:ie+ce,y2:Ae+ce}),f)return!0}}}return!1}_queryCellCircle(i,h,b,E,B,F,A,s){const{circle:l,seenUids:f,overlapMode:m}=A,k=this.boxCells[B];if(k!==null){const D=this.bboxes;for(const Q of k)if(!f.box[Q]){f.box[Q]=!0;const Z=4*Q,X=this.boxKeys[Q];if(this._circleAndRectCollide(l.x,l.y,l.radius,D[Z+0],D[Z+1],D[Z+2],D[Z+3])&&(!s||s(X))&&!rs(m,X.overlapMode))return F.push(!0),!0}}const I=this.circleCells[B];if(I!==null){const D=this.circles;for(const Q of I)if(!f.circle[Q]){f.circle[Q]=!0;const Z=3*Q,X=this.circleKeys[Q];if(this._circlesCollide(D[Z],D[Z+1],D[Z+2],l.x,l.y,l.radius)&&(!s||s(X))&&!rs(m,X.overlapMode))return F.push(!0),!0}}}_forEachCell(i,h,b,E,B,F,A,s){const l=this._convertToXCellCoord(i),f=this._convertToYCellCoord(h),m=this._convertToXCellCoord(b),k=this._convertToYCellCoord(E);for(let I=l;I<=m;I++)for(let D=f;D<=k;D++)if(B.call(this,i,h,b,E,this.xCellCount*D+I,F,A,s))return}_convertToXCellCoord(i){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(i*this.xScale)))}_convertToYCellCoord(i){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(i*this.yScale)))}_circlesCollide(i,h,b,E,B,F){const A=E-i,s=B-h,l=b+F;return l*l>A*A+s*s}_circleAndRectCollide(i,h,b,E,B,F,A){const s=(F-E)/2,l=Math.abs(i-(E+s));if(l>s+b)return!1;const f=(A-B)/2,m=Math.abs(h-(B+f));if(m>f+b)return!1;if(l<=s||m<=f)return!0;const k=l-s,I=m-f;return k*k+I*I<=b*b}}function Nt(C,i,h,b,E){const B=c.Z();return i?(c.a0(B,B,[1/E,1/E,1]),h||c.ae(B,B,b.angle)):c.a1(B,b.labelPlaneMatrix,C),B}function bA(C,i,h,b,E){if(i){const B=c.af(C);return c.a0(B,B,[E,E,1]),h||c.ae(B,B,-b.angle),B}return b.glCoordMatrix}function Wi(C,i,h){let b;h?(b=[C.x,C.y,h(C.x,C.y),1],c.ag(b,b,i)):(b=[C.x,C.y,0,1],Le(b,b,i));const E=b[3];return{point:new c.P(b[0]/E,b[1]/E),signedDistanceFromCamera:E}}function Ms(C,i){return .5+C/i*.5}function hA(C,i){const h=C[0]/C[3],b=C[1]/C[3];return h>=-i[0]&&h<=i[0]&&b>=-i[1]&&b<=i[1]}function Ut(C,i,h,b,E,B,F,A,s,l){const f=b?C.textSizeData:C.iconSizeData,m=c.ah(f,h.transform.zoom),k=[256/h.width*2+1,256/h.height*2+1],I=b?C.text.dynamicLayoutVertexArray:C.icon.dynamicLayoutVertexArray;I.clear();const D=C.lineVertexArray,Q=b?C.text.placedSymbolArray:C.icon.placedSymbolArray,Z=h.transform.width/h.transform.height;let X=!1;for(let ie=0;ie<Q.length;ie++){const Ae=Q.get(ie);if(Ae.hidden||Ae.writingMode===c.ai.vertical&&!X){we(Ae.numGlyphs,I);continue}let ce;if(X=!1,l?(ce=[Ae.anchorX,Ae.anchorY,l(Ae.anchorX,Ae.anchorY),1],c.ag(ce,ce,i)):(ce=[Ae.anchorX,Ae.anchorY,0,1],Le(ce,ce,i)),!hA(ce,k)){we(Ae.numGlyphs,I);continue}const fe=Ms(h.transform.cameraToCenterDistance,ce[3]),ve=c.aj(f,m,Ae),Ne=F?ve/fe:ve*fe,qe=new c.P(Ae.anchorX,Ae.anchorY),Pe=Wi(qe,E,l).point,Ve={projections:{},offsets:{}},Ue=br(Ae,Ne,!1,A,i,E,B,C.glyphOffsetArray,D,I,Pe,qe,Ve,Z,s,l);X=Ue.useVertical,(Ue.notEnoughRoom||X||Ue.needsFlipping&&br(Ae,Ne,!0,A,i,E,B,C.glyphOffsetArray,D,I,Pe,qe,Ve,Z,s,l).notEnoughRoom)&&we(Ae.numGlyphs,I)}b?C.text.dynamicLayoutVertexBuffer.updateData(I):C.icon.dynamicLayoutVertexBuffer.updateData(I)}function Zn(C,i,h,b,E,B,F,A,s,l,f,m,k){const I=A.glyphStartIndex+A.numGlyphs,D=A.lineStartIndex,Q=A.lineStartIndex+A.lineLength,Z=i.getoffsetX(A.glyphStartIndex),X=i.getoffsetX(I-1),ie=oe(C*Z,h,b,E,B,F,A.segment,D,Q,s,l,f,m,k);if(!ie)return null;const Ae=oe(C*X,h,b,E,B,F,A.segment,D,Q,s,l,f,m,k);return Ae?{first:ie,last:Ae}:null}function zn(C,i,h,b){return C===c.ai.horizontal&&Math.abs(h.y-i.y)>Math.abs(h.x-i.x)*b?{useVertical:!0}:(C===c.ai.vertical?i.y<h.y:i.x>h.x)?{needsFlipping:!0}:null}function br(C,i,h,b,E,B,F,A,s,l,f,m,k,I,D,Q){const Z=i/24,X=C.lineOffsetX*Z,ie=C.lineOffsetY*Z;let Ae;if(C.numGlyphs>1){const ce=C.glyphStartIndex+C.numGlyphs,fe=C.lineStartIndex,ve=C.lineStartIndex+C.lineLength,Ne=Zn(Z,A,X,ie,h,f,m,C,s,B,k,D,Q);if(!Ne)return{notEnoughRoom:!0};const qe=Wi(Ne.first.point,F,Q).point,Pe=Wi(Ne.last.point,F,Q).point;if(b&&!h){const Ve=zn(C.writingMode,qe,Pe,I);if(Ve)return Ve}Ae=[Ne.first];for(let Ve=C.glyphStartIndex+1;Ve<ce-1;Ve++)Ae.push(oe(Z*A.getoffsetX(Ve),X,ie,h,f,m,C.segment,fe,ve,s,B,k,D,Q));Ae.push(Ne.last)}else{if(b&&!h){const fe=Wi(m,E,Q).point,ve=C.lineStartIndex+C.segment+1,Ne=new c.P(s.getx(ve),s.gety(ve)),qe=Wi(Ne,E,Q),Pe=qe.signedDistanceFromCamera>0?qe.point:OA(m,Ne,fe,1,E,Q),Ve=zn(C.writingMode,fe,Pe,I);if(Ve)return Ve}const ce=oe(Z*A.getoffsetX(C.glyphStartIndex),X,ie,h,f,m,C.segment,C.lineStartIndex,C.lineStartIndex+C.lineLength,s,B,k,D,Q);if(!ce)return{notEnoughRoom:!0};Ae=[ce]}for(const ce of Ae)c.ak(l,ce.point,ce.angle);return{}}function OA(C,i,h,b,E,B){const F=Wi(C.add(C.sub(i)._unit()),E,B).point,A=h.sub(F);return h.add(A._mult(b/A.mag()))}function On(C,i){const{projectionCache:h,lineVertexArray:b,labelPlaneMatrix:E,tileAnchorPoint:B,distanceFromAnchor:F,getElevation:A,previousVertex:s,direction:l,absOffsetX:f}=i;if(h.projections[C])return h.projections[C];const m=new c.P(b.getx(C),b.gety(C)),k=Wi(m,E,A);if(k.signedDistanceFromCamera>0)return h.projections[C]=k.point,k.point;const I=C-l;return OA(F===0?B:new c.P(b.getx(I),b.gety(I)),m,s,f-F+1,E,A)}function st(C,i,h){return C._unit()._perp()._mult(i*h)}function ze(C,i,h,b,E,B,F,A){const{projectionCache:s,direction:l}=A;if(s.offsets[C])return s.offsets[C];const f=h.add(i);if(C+l<b||C+l>=E)return s.offsets[C]=f,f;const m=On(C+l,A),k=st(m.sub(h),F,l),I=h.add(k),D=m.add(k);return s.offsets[C]=c.al(B,f,I,D)||f,s.offsets[C]}function oe(C,i,h,b,E,B,F,A,s,l,f,m,k,I){const D=b?C-i:C+i;let Q=D>0?1:-1,Z=0;b&&(Q*=-1,Z=Math.PI),Q<0&&(Z+=Math.PI);let X,ie,Ae=Q>0?A+F:A+F+1,ce=E,fe=E,ve=0,Ne=0;const qe=Math.abs(D),Pe=[];let Ve;for(;ve+Ne<=qe;){if(Ae+=Q,Ae<A||Ae>=s)return null;ve+=Ne,fe=ce,ie=X;const ht={projectionCache:m,lineVertexArray:l,labelPlaneMatrix:f,tileAnchorPoint:B,distanceFromAnchor:ve,getElevation:I,previousVertex:fe,direction:Q,absOffsetX:qe};if(ce=On(Ae,ht),h===0)Pe.push(fe),Ve=ce.sub(fe);else{let _t;const gt=ce.sub(fe);_t=gt.mag()===0?st(On(Ae+Q,ht).sub(ce),h,Q):st(gt,h,Q),ie||(ie=fe.add(_t)),X=ze(Ae,_t,ce,A,s,ie,h,ht),Pe.push(ie),Ve=X.sub(ie)}Ne=Ve.mag()}const Ue=Ve._mult((qe-ve)/Ne)._add(ie||fe),Mt=Z+Math.atan2(ce.y-fe.y,ce.x-fe.x);return Pe.push(Ue),{point:Ue,angle:k?Mt:0,path:Pe}}const de=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function we(C,i){for(let h=0;h<C;h++){const b=i.length;i.resize(b+4),i.float32.set(de,3*b)}}function Le(C,i,h){const b=i[0],E=i[1];return C[0]=h[0]*b+h[4]*E+h[12],C[1]=h[1]*b+h[5]*E+h[13],C[3]=h[3]*b+h[7]*E+h[15],C}const Fe=100;class tt{constructor(i,h=new Es(i.width+200,i.height+200,25),b=new Es(i.width+200,i.height+200,25)){this.transform=i,this.grid=h,this.ignoredGrid=b,this.pitchfactor=Math.cos(i._pitch)*i.cameraToCenterDistance,this.screenRightBoundary=i.width+Fe,this.screenBottomBoundary=i.height+Fe,this.gridRightBoundary=i.width+200,this.gridBottomBoundary=i.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(i,h,b,E,B,F){const A=this.projectAndGetPerspectiveRatio(E,i.anchorPointX,i.anchorPointY,F),s=b*A.perspectiveRatio,l=i.x1*s+A.point.x,f=i.y1*s+A.point.y,m=i.x2*s+A.point.x,k=i.y2*s+A.point.y;return!this.isInsideGrid(l,f,m,k)||h!=="always"&&this.grid.hitTest(l,f,m,k,h,B)||A.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[l,f,m,k],offscreen:this.isOffscreen(l,f,m,k)}}placeCollisionCircles(i,h,b,E,B,F,A,s,l,f,m,k,I,D){const Q=[],Z=new c.P(h.anchorX,h.anchorY),X=Wi(Z,F,D),ie=Ms(this.transform.cameraToCenterDistance,X.signedDistanceFromCamera),Ae=(f?B/ie:B*ie)/c.ap,ce=Wi(Z,A,D).point,fe=Zn(Ae,E,h.lineOffsetX*Ae,h.lineOffsetY*Ae,!1,ce,Z,h,b,A,{projections:{},offsets:{}},!1,D);let ve=!1,Ne=!1,qe=!0;if(fe){const Pe=.5*k*ie+I,Ve=new c.P(-100,-100),Ue=new c.P(this.screenRightBoundary,this.screenBottomBoundary),Mt=new is,ht=fe.first,_t=fe.last;let gt=[];for(let Yt=ht.path.length-1;Yt>=1;Yt--)gt.push(ht.path[Yt]);for(let Yt=1;Yt<_t.path.length;Yt++)gt.push(_t.path[Yt]);const Mn=2.5*Pe;if(s){const Yt=gt.map(tn=>Wi(tn,s,D));gt=Yt.some(tn=>tn.signedDistanceFromCamera<=0)?[]:Yt.map(tn=>tn.point)}let cn=[];if(gt.length>0){const Yt=gt[0].clone(),tn=gt[0].clone();for(let fn=1;fn<gt.length;fn++)Yt.x=Math.min(Yt.x,gt[fn].x),Yt.y=Math.min(Yt.y,gt[fn].y),tn.x=Math.max(tn.x,gt[fn].x),tn.y=Math.max(tn.y,gt[fn].y);cn=Yt.x>=Ve.x&&tn.x<=Ue.x&&Yt.y>=Ve.y&&tn.y<=Ue.y?[gt]:tn.x<Ve.x||Yt.x>Ue.x||tn.y<Ve.y||Yt.y>Ue.y?[]:c.am([gt],Ve.x,Ve.y,Ue.x,Ue.y)}for(const Yt of cn){Mt.reset(Yt,.25*Pe);let tn=0;tn=Mt.length<=.5*Pe?1:Math.ceil(Mt.paddedLength/Mn)+1;for(let fn=0;fn<tn;fn++){const an=fn/Math.max(tn-1,1),Wn=Mt.lerp(an),bn=Wn.x+Fe,Nn=Wn.y+Fe;Q.push(bn,Nn,Pe,0);const zi=bn-Pe,bi=Nn-Pe,mo=bn+Pe,Zo=Nn+Pe;if(qe=qe&&this.isOffscreen(zi,bi,mo,Zo),Ne=Ne||this.isInsideGrid(zi,bi,mo,Zo),i!=="always"&&this.grid.hitTestCircle(bn,Nn,Pe,i,m)&&(ve=!0,!l))return{circles:[],offscreen:!1,collisionDetected:ve}}}}return{circles:!l&&ve||!Ne||ie<this.perspectiveRatioCutoff?[]:Q,offscreen:qe,collisionDetected:ve}}queryRenderedSymbols(i){if(i.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const h=[];let b=1/0,E=1/0,B=-1/0,F=-1/0;for(const f of i){const m=new c.P(f.x+Fe,f.y+Fe);b=Math.min(b,m.x),E=Math.min(E,m.y),B=Math.max(B,m.x),F=Math.max(F,m.y),h.push(m)}const A=this.grid.query(b,E,B,F).concat(this.ignoredGrid.query(b,E,B,F)),s={},l={};for(const f of A){const m=f.key;if(s[m.bucketInstanceId]===void 0&&(s[m.bucketInstanceId]={}),s[m.bucketInstanceId][m.featureIndex])continue;const k=[new c.P(f.x1,f.y1),new c.P(f.x2,f.y1),new c.P(f.x2,f.y2),new c.P(f.x1,f.y2)];c.an(h,k)&&(s[m.bucketInstanceId][m.featureIndex]=!0,l[m.bucketInstanceId]===void 0&&(l[m.bucketInstanceId]=[]),l[m.bucketInstanceId].push(m.featureIndex))}return l}insertCollisionBox(i,h,b,E,B,F){(b?this.ignoredGrid:this.grid).insert({bucketInstanceId:E,featureIndex:B,collisionGroupID:F,overlapMode:h},i[0],i[1],i[2],i[3])}insertCollisionCircles(i,h,b,E,B,F){const A=b?this.ignoredGrid:this.grid,s={bucketInstanceId:E,featureIndex:B,collisionGroupID:F,overlapMode:h};for(let l=0;l<i.length;l+=4)A.insertCircle(s,i[l],i[l+1],i[l+2])}projectAndGetPerspectiveRatio(i,h,b,E){let B;return E?(B=[h,b,E(h,b),1],c.ag(B,B,i)):(B=[h,b,0,1],Le(B,B,i)),{point:new c.P((B[0]/B[3]+1)/2*this.transform.width+Fe,(-B[1]/B[3]+1)/2*this.transform.height+Fe),perspectiveRatio:.5+this.transform.cameraToCenterDistance/B[3]*.5}}isOffscreen(i,h,b,E){return b<Fe||i>=this.screenRightBoundary||E<Fe||h>this.screenBottomBoundary}isInsideGrid(i,h,b,E){return b>=0&&i<this.gridRightBoundary&&E>=0&&h<this.gridBottomBoundary}getViewportMatrix(){const i=c.ao([]);return c.$(i,i,[-100,-100,0]),i}}function Ye(C,i,h){return i*(c.N/(C.tileSize*Math.pow(2,h-C.tileID.overscaledZ)))}class Oe{constructor(i,h,b,E){this.opacity=i?Math.max(0,Math.min(1,i.opacity+(i.placed?h:-h))):E&&b?1:0,this.placed=b}isHidden(){return this.opacity===0&&!this.placed}}class Ke{constructor(i,h,b,E,B){this.text=new Oe(i?i.text:null,h,b,B),this.icon=new Oe(i?i.icon:null,h,E,B)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class yt{constructor(i,h,b){this.text=i,this.icon=h,this.skipFade=b}}class se{constructor(){this.invProjMatrix=c.Z(),this.viewportMatrix=c.Z(),this.circles=[]}}class _e{constructor(i,h,b,E,B){this.bucketInstanceId=i,this.featureIndex=h,this.sourceLayerIndex=b,this.bucketIndex=E,this.tileID=B}}class We{constructor(i){this.crossSourceCollisions=i,this.maxGroupID=0,this.collisionGroups={}}get(i){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[i]){const h=++this.maxGroupID;this.collisionGroups[i]={ID:h,predicate:b=>b.collisionGroupID===h}}return this.collisionGroups[i]}}function dt(C,i,h,b,E){const{horizontalAlign:B,verticalAlign:F}=c.au(C);return new c.P(-(B-.5)*i+b[0]*E,-(F-.5)*h+b[1]*E)}function t(C,i,h,b,E,B){const{x1:F,x2:A,y1:s,y2:l,anchorPointX:f,anchorPointY:m}=C,k=new c.P(i,h);return b&&k._rotate(E?B:-B),{x1:F+k.x,y1:s+k.y,x2:A+k.x,y2:l+k.y,anchorPointX:f,anchorPointY:m}}class K{constructor(i,h,b,E,B){this.transform=i.clone(),this.terrain=h,this.collisionIndex=new tt(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=b,this.retainedQueryData={},this.collisionGroups=new We(E),this.collisionCircleArrays={},this.prevPlacement=B,B&&(B.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(i,h,b,E){const B=b.getBucket(h),F=b.latestFeatureIndex;if(!B||!F||h.id!==B.layerIds[0])return;const A=b.collisionBoxArray,s=B.layers[0].layout,l=Math.pow(2,this.transform.zoom-b.tileID.overscaledZ),f=b.tileSize/c.N,m=this.transform.calculatePosMatrix(b.tileID.toUnwrapped()),k=s.get("text-pitch-alignment")==="map",I=s.get("text-rotation-alignment")==="map",D=Ye(b,1,this.transform.zoom),Q=Nt(m,k,I,this.transform,D);let Z=null;if(k){const ie=bA(m,k,I,this.transform,D);Z=c.a1([],this.transform.labelPlaneMatrix,ie)}this.retainedQueryData[B.bucketInstanceId]=new _e(B.bucketInstanceId,F,B.sourceLayerIndex,B.index,b.tileID);const X={bucket:B,layout:s,posMatrix:m,textLabelPlaneMatrix:Q,labelToScreenMatrix:Z,scale:l,textPixelRatio:f,holdingForFade:b.holdingForFade(),collisionBoxArray:A,partiallyEvaluatedTextSize:c.ah(B.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(B.sourceID)};if(E)for(const ie of B.sortKeyRanges){const{sortKey:Ae,symbolInstanceStart:ce,symbolInstanceEnd:fe}=ie;i.push({sortKey:Ae,symbolInstanceStart:ce,symbolInstanceEnd:fe,parameters:X})}else i.push({symbolInstanceStart:0,symbolInstanceEnd:B.symbolInstances.length,parameters:X})}attemptAnchorPlacement(i,h,b,E,B,F,A,s,l,f,m,k,I,D,Q,Z){const X=c.aq[i.textAnchor],ie=[i.textOffset0,i.textOffset1],Ae=dt(X,b,E,ie,B),ce=this.collisionIndex.placeCollisionBox(t(h,Ae.x,Ae.y,F,A,this.transform.angle),m,s,l,f.predicate,Z);if((!Q||this.collisionIndex.placeCollisionBox(t(Q,Ae.x,Ae.y,F,A,this.transform.angle),m,s,l,f.predicate,Z).box.length!==0)&&ce.box.length>0){let fe;if(this.prevPlacement&&this.prevPlacement.variableOffsets[k.crossTileID]&&this.prevPlacement.placements[k.crossTileID]&&this.prevPlacement.placements[k.crossTileID].text&&(fe=this.prevPlacement.variableOffsets[k.crossTileID].anchor),k.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[k.crossTileID]={textOffset:ie,width:b,height:E,anchor:X,textBoxScale:B,prevAnchor:fe},this.markUsedJustification(I,X,k,D),I.allowVerticalPlacement&&(this.markUsedOrientation(I,D,k),this.placedOrientations[k.crossTileID]=D),{shift:Ae,placedGlyphBoxes:ce}}}placeLayerBucketPart(i,h,b){const{bucket:E,layout:B,posMatrix:F,textLabelPlaneMatrix:A,labelToScreenMatrix:s,textPixelRatio:l,holdingForFade:f,collisionBoxArray:m,partiallyEvaluatedTextSize:k,collisionGroup:I}=i.parameters,D=B.get("text-optional"),Q=B.get("icon-optional"),Z=c.ar(B,"text-overlap","text-allow-overlap"),X=Z==="always",ie=c.ar(B,"icon-overlap","icon-allow-overlap"),Ae=ie==="always",ce=B.get("text-rotation-alignment")==="map",fe=B.get("text-pitch-alignment")==="map",ve=B.get("icon-text-fit")!=="none",Ne=B.get("symbol-z-order")==="viewport-y",qe=X&&(Ae||!E.hasIconData()||Q),Pe=Ae&&(X||!E.hasTextData()||D);!E.collisionArrays&&m&&E.deserializeCollisionBoxes(m);const Ve=this.retainedQueryData[E.bucketInstanceId].tileID,Ue=this.terrain?(ht,_t)=>this.terrain.getElevation(Ve,ht,_t):null,Mt=(ht,_t)=>{var gt,Mn;if(h[ht.crossTileID])return;if(f)return void(this.placements[ht.crossTileID]=new yt(!1,!1,!1));let cn=!1,Yt=!1,tn=!0,fn=null,an={box:null,offscreen:null},Wn={box:null,offscreen:null},bn=null,Nn=null,zi=null,bi=0,mo=0,Zo=0;_t.textFeatureIndex?bi=_t.textFeatureIndex:ht.useRuntimeCollisionCircles&&(bi=ht.featureIndex),_t.verticalTextFeatureIndex&&(mo=_t.verticalTextFeatureIndex);const go=_t.textBox;if(go){const Ui=vr=>{let Nr=c.ai.horizontal;if(E.allowVerticalPlacement&&!vr&&this.prevPlacement){const $r=this.prevPlacement.placedOrientations[ht.crossTileID];$r&&(this.placedOrientations[ht.crossTileID]=$r,Nr=$r,this.markUsedOrientation(E,Nr,ht))}return Nr},nA=(vr,Nr)=>{if(E.allowVerticalPlacement&&ht.numVerticalGlyphVertices>0&&_t.verticalTextBox){for(const $r of E.writingModes)if($r===c.ai.vertical?(an=Nr(),Wn=an):an=vr(),an&&an.box&&an.box.length)break}else an=vr()},BA=ht.textAnchorOffsetStartIndex,DA=ht.textAnchorOffsetEndIndex;if(DA===BA){const vr=(Nr,$r)=>{const Sr=this.collisionIndex.placeCollisionBox(Nr,Z,l,F,I.predicate,Ue);return Sr&&Sr.box&&Sr.box.length&&(this.markUsedOrientation(E,$r,ht),this.placedOrientations[ht.crossTileID]=$r),Sr};nA(()=>vr(go,c.ai.horizontal),()=>{const Nr=_t.verticalTextBox;return E.allowVerticalPlacement&&ht.numVerticalGlyphVertices>0&&Nr?vr(Nr,c.ai.vertical):{box:null,offscreen:null}}),Ui(an&&an.box&&an.box.length)}else{let vr=c.aq[(Mn=(gt=this.prevPlacement)===null||gt===void 0?void 0:gt.variableOffsets[ht.crossTileID])===null||Mn===void 0?void 0:Mn.anchor];const Nr=(Sr,Ur,Ul)=>{const J0=Sr.x2-Sr.x1,ec=Sr.y2-Sr.y1,eh=ht.textBoxScale,ou=ve&&ie==="never"?Ur:null;let Ho={box:[],offscreen:!1},_o=Z==="never"?1:2,yo="never";vr&&_o++;for(let Xs=0;Xs<_o;Xs++){for(let $o=BA;$o<DA;$o++){const ml=E.textAnchorOffsets.get($o);if(vr&&ml.textAnchor!==vr)continue;const wa=this.attemptAnchorPlacement(ml,Sr,J0,ec,eh,ce,fe,l,F,I,yo,ht,E,Ul,ou,Ue);if(wa&&(Ho=wa.placedGlyphBoxes,Ho&&Ho.box&&Ho.box.length))return cn=!0,fn=wa.shift,Ho}vr?vr=null:yo=Z}return Ho};nA(()=>Nr(go,_t.iconBox,c.ai.horizontal),()=>{const Sr=_t.verticalTextBox;return E.allowVerticalPlacement&&!(an&&an.box&&an.box.length)&&ht.numVerticalGlyphVertices>0&&Sr?Nr(Sr,_t.verticalIconBox,c.ai.vertical):{box:null,offscreen:null}}),an&&(cn=an.box,tn=an.offscreen);const $r=Ui(an&&an.box);if(!cn&&this.prevPlacement){const Sr=this.prevPlacement.variableOffsets[ht.crossTileID];Sr&&(this.variableOffsets[ht.crossTileID]=Sr,this.markUsedJustification(E,Sr.anchor,ht,$r))}}}if(bn=an,cn=bn&&bn.box&&bn.box.length>0,tn=bn&&bn.offscreen,ht.useRuntimeCollisionCircles){const Ui=E.text.placedSymbolArray.get(ht.centerJustifiedTextSymbolIndex),nA=c.aj(E.textSizeData,k,Ui),BA=B.get("text-padding");Nn=this.collisionIndex.placeCollisionCircles(Z,Ui,E.lineVertexArray,E.glyphOffsetArray,nA,F,A,s,b,fe,I.predicate,ht.collisionCircleDiameter,BA,Ue),Nn.circles.length&&Nn.collisionDetected&&!b&&c.w("Collisions detected, but collision boxes are not shown"),cn=X||Nn.circles.length>0&&!Nn.collisionDetected,tn=tn&&Nn.offscreen}if(_t.iconFeatureIndex&&(Zo=_t.iconFeatureIndex),_t.iconBox){const Ui=nA=>{const BA=ve&&fn?t(nA,fn.x,fn.y,ce,fe,this.transform.angle):nA;return this.collisionIndex.placeCollisionBox(BA,ie,l,F,I.predicate,Ue)};Wn&&Wn.box&&Wn.box.length&&_t.verticalIconBox?(zi=Ui(_t.verticalIconBox),Yt=zi.box.length>0):(zi=Ui(_t.iconBox),Yt=zi.box.length>0),tn=tn&&zi.offscreen}const dl=D||ht.numHorizontalGlyphVertices===0&&ht.numVerticalGlyphVertices===0,pl=Q||ht.numIconVertices===0;if(dl||pl?pl?dl||(Yt=Yt&&cn):cn=Yt&&cn:Yt=cn=Yt&&cn,cn&&bn&&bn.box&&this.collisionIndex.insertCollisionBox(bn.box,Z,B.get("text-ignore-placement"),E.bucketInstanceId,Wn&&Wn.box&&mo?mo:bi,I.ID),Yt&&zi&&this.collisionIndex.insertCollisionBox(zi.box,ie,B.get("icon-ignore-placement"),E.bucketInstanceId,Zo,I.ID),Nn&&(cn&&this.collisionIndex.insertCollisionCircles(Nn.circles,Z,B.get("text-ignore-placement"),E.bucketInstanceId,bi,I.ID),b)){const Ui=E.bucketInstanceId;let nA=this.collisionCircleArrays[Ui];nA===void 0&&(nA=this.collisionCircleArrays[Ui]=new se);for(let BA=0;BA<Nn.circles.length;BA+=4)nA.circles.push(Nn.circles[BA+0]),nA.circles.push(Nn.circles[BA+1]),nA.circles.push(Nn.circles[BA+2]),nA.circles.push(Nn.collisionDetected?1:0)}if(ht.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(E.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[ht.crossTileID]=new yt(cn||qe,Yt||Pe,tn||E.justReloaded),h[ht.crossTileID]=!0};if(Ne){if(i.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const ht=E.getSortedSymbolIndexes(this.transform.angle);for(let _t=ht.length-1;_t>=0;--_t){const gt=ht[_t];Mt(E.symbolInstances.get(gt),E.collisionArrays[gt])}}else for(let ht=i.symbolInstanceStart;ht<i.symbolInstanceEnd;ht++)Mt(E.symbolInstances.get(ht),E.collisionArrays[ht]);if(b&&E.bucketInstanceId in this.collisionCircleArrays){const ht=this.collisionCircleArrays[E.bucketInstanceId];c.as(ht.invProjMatrix,F),ht.viewportMatrix=this.collisionIndex.getViewportMatrix()}E.justReloaded=!1}markUsedJustification(i,h,b,E){let B;B=E===c.ai.vertical?b.verticalPlacedTextSymbolIndex:{left:b.leftJustifiedTextSymbolIndex,center:b.centerJustifiedTextSymbolIndex,right:b.rightJustifiedTextSymbolIndex}[c.at(h)];const F=[b.leftJustifiedTextSymbolIndex,b.centerJustifiedTextSymbolIndex,b.rightJustifiedTextSymbolIndex,b.verticalPlacedTextSymbolIndex];for(const A of F)A>=0&&(i.text.placedSymbolArray.get(A).crossTileID=B>=0&&A!==B?0:b.crossTileID)}markUsedOrientation(i,h,b){const E=h===c.ai.horizontal||h===c.ai.horizontalOnly?h:0,B=h===c.ai.vertical?h:0,F=[b.leftJustifiedTextSymbolIndex,b.centerJustifiedTextSymbolIndex,b.rightJustifiedTextSymbolIndex];for(const A of F)i.text.placedSymbolArray.get(A).placedOrientation=E;b.verticalPlacedTextSymbolIndex&&(i.text.placedSymbolArray.get(b.verticalPlacedTextSymbolIndex).placedOrientation=B)}commit(i){this.commitTime=i,this.zoomAtLastRecencyCheck=this.transform.zoom;const h=this.prevPlacement;let b=!1;this.prevZoomAdjustment=h?h.zoomAdjustment(this.transform.zoom):0;const E=h?h.symbolFadeChange(i):1,B=h?h.opacities:{},F=h?h.variableOffsets:{},A=h?h.placedOrientations:{};for(const s in this.placements){const l=this.placements[s],f=B[s];f?(this.opacities[s]=new Ke(f,E,l.text,l.icon),b=b||l.text!==f.text.placed||l.icon!==f.icon.placed):(this.opacities[s]=new Ke(null,E,l.text,l.icon,l.skipFade),b=b||l.text||l.icon)}for(const s in B){const l=B[s];if(!this.opacities[s]){const f=new Ke(l,E,!1,!1);f.isHidden()||(this.opacities[s]=f,b=b||l.text.placed||l.icon.placed)}}for(const s in F)this.variableOffsets[s]||!this.opacities[s]||this.opacities[s].isHidden()||(this.variableOffsets[s]=F[s]);for(const s in A)this.placedOrientations[s]||!this.opacities[s]||this.opacities[s].isHidden()||(this.placedOrientations[s]=A[s]);if(h&&h.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");b?this.lastPlacementChangeTime=i:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=h?h.lastPlacementChangeTime:i)}updateLayerOpacities(i,h){const b={};for(const E of h){const B=E.getBucket(i);B&&E.latestFeatureIndex&&i.id===B.layerIds[0]&&this.updateBucketOpacities(B,b,E.collisionBoxArray)}}updateBucketOpacities(i,h,b){i.hasTextData()&&(i.text.opacityVertexArray.clear(),i.text.hasVisibleVertices=!1),i.hasIconData()&&(i.icon.opacityVertexArray.clear(),i.icon.hasVisibleVertices=!1),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexArray.clear(),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexArray.clear();const E=i.layers[0],B=E.layout,F=new Ke(null,0,!1,!1,!0),A=B.get("text-allow-overlap"),s=B.get("icon-allow-overlap"),l=E._unevaluatedLayout.hasValue("text-variable-anchor")||E._unevaluatedLayout.hasValue("text-variable-anchor-offset"),f=B.get("text-rotation-alignment")==="map",m=B.get("text-pitch-alignment")==="map",k=B.get("icon-text-fit")!=="none",I=new Ke(null,0,A&&(s||!i.hasIconData()||B.get("icon-optional")),s&&(A||!i.hasTextData()||B.get("text-optional")),!0);!i.collisionArrays&&b&&(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData())&&i.deserializeCollisionBoxes(b);const D=(Q,Z,X)=>{for(let ie=0;ie<Z/4;ie++)Q.opacityVertexArray.emplaceBack(X);Q.hasVisibleVertices=Q.hasVisibleVertices||X!==Dr};for(let Q=0;Q<i.symbolInstances.length;Q++){const Z=i.symbolInstances.get(Q),{numHorizontalGlyphVertices:X,numVerticalGlyphVertices:ie,crossTileID:Ae}=Z;let ce=this.opacities[Ae];h[Ae]?ce=F:ce||(ce=I,this.opacities[Ae]=ce),h[Ae]=!0;const fe=Z.numIconVertices>0,ve=this.placedOrientations[Z.crossTileID],Ne=ve===c.ai.vertical,qe=ve===c.ai.horizontal||ve===c.ai.horizontalOnly;if(X>0||ie>0){const Pe=oi(ce.text);D(i.text,X,Ne?Dr:Pe),D(i.text,ie,qe?Dr:Pe);const Ve=ce.text.isHidden();[Z.rightJustifiedTextSymbolIndex,Z.centerJustifiedTextSymbolIndex,Z.leftJustifiedTextSymbolIndex].forEach(ht=>{ht>=0&&(i.text.placedSymbolArray.get(ht).hidden=Ve||Ne?1:0)}),Z.verticalPlacedTextSymbolIndex>=0&&(i.text.placedSymbolArray.get(Z.verticalPlacedTextSymbolIndex).hidden=Ve||qe?1:0);const Ue=this.variableOffsets[Z.crossTileID];Ue&&this.markUsedJustification(i,Ue.anchor,Z,ve);const Mt=this.placedOrientations[Z.crossTileID];Mt&&(this.markUsedJustification(i,"left",Z,Mt),this.markUsedOrientation(i,Mt,Z))}if(fe){const Pe=oi(ce.icon),Ve=!(k&&Z.verticalPlacedIconSymbolIndex&&Ne);Z.placedIconSymbolIndex>=0&&(D(i.icon,Z.numIconVertices,Ve?Pe:Dr),i.icon.placedSymbolArray.get(Z.placedIconSymbolIndex).hidden=ce.icon.isHidden()),Z.verticalPlacedIconSymbolIndex>=0&&(D(i.icon,Z.numVerticalIconVertices,Ve?Dr:Pe),i.icon.placedSymbolArray.get(Z.verticalPlacedIconSymbolIndex).hidden=ce.icon.isHidden())}if(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData()){const Pe=i.collisionArrays[Q];if(Pe){let Ve=new c.P(0,0);if(Pe.textBox||Pe.verticalTextBox){let Mt=!0;if(l){const ht=this.variableOffsets[Ae];ht?(Ve=dt(ht.anchor,ht.width,ht.height,ht.textOffset,ht.textBoxScale),f&&Ve._rotate(m?this.transform.angle:-this.transform.angle)):Mt=!1}Pe.textBox&&St(i.textCollisionBox.collisionVertexArray,ce.text.placed,!Mt||Ne,Ve.x,Ve.y),Pe.verticalTextBox&&St(i.textCollisionBox.collisionVertexArray,ce.text.placed,!Mt||qe,Ve.x,Ve.y)}const Ue=!!(!qe&&Pe.verticalIconBox);Pe.iconBox&&St(i.iconCollisionBox.collisionVertexArray,ce.icon.placed,Ue,k?Ve.x:0,k?Ve.y:0),Pe.verticalIconBox&&St(i.iconCollisionBox.collisionVertexArray,ce.icon.placed,!Ue,k?Ve.x:0,k?Ve.y:0)}}}if(i.sortFeatures(this.transform.angle),this.retainedQueryData[i.bucketInstanceId]&&(this.retainedQueryData[i.bucketInstanceId].featureSortOrder=i.featureSortOrder),i.hasTextData()&&i.text.opacityVertexBuffer&&i.text.opacityVertexBuffer.updateData(i.text.opacityVertexArray),i.hasIconData()&&i.icon.opacityVertexBuffer&&i.icon.opacityVertexBuffer.updateData(i.icon.opacityVertexArray),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexBuffer&&i.iconCollisionBox.collisionVertexBuffer.updateData(i.iconCollisionBox.collisionVertexArray),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexBuffer&&i.textCollisionBox.collisionVertexBuffer.updateData(i.textCollisionBox.collisionVertexArray),i.text.opacityVertexArray.length!==i.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${i.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${i.text.layoutVertexArray.length}) / 4`);if(i.icon.opacityVertexArray.length!==i.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${i.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${i.icon.layoutVertexArray.length}) / 4`);if(i.bucketInstanceId in this.collisionCircleArrays){const Q=this.collisionCircleArrays[i.bucketInstanceId];i.placementInvProjMatrix=Q.invProjMatrix,i.placementViewportMatrix=Q.viewportMatrix,i.collisionCircleArray=Q.circles,delete this.collisionCircleArrays[i.bucketInstanceId]}}symbolFadeChange(i){return this.fadeDuration===0?1:(i-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(i){return Math.max(0,(this.transform.zoom-i)/1.5)}hasTransitions(i){return this.stale||i-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(i,h){const b=this.zoomAtLastRecencyCheck===h?1-this.zoomAdjustment(h):1;return this.zoomAtLastRecencyCheck=h,this.commitTime+this.fadeDuration*b>i}setStale(){this.stale=!0}}function St(C,i,h,b,E){C.emplaceBack(i?1:0,h?1:0,b||0,E||0),C.emplaceBack(i?1:0,h?1:0,b||0,E||0),C.emplaceBack(i?1:0,h?1:0,b||0,E||0),C.emplaceBack(i?1:0,h?1:0,b||0,E||0)}const Qt=Math.pow(2,25),en=Math.pow(2,24),Pt=Math.pow(2,17),Ht=Math.pow(2,16),Bn=Math.pow(2,9),$t=Math.pow(2,8),sn=Math.pow(2,1);function oi(C){if(C.opacity===0&&!C.placed)return 0;if(C.opacity===1&&C.placed)return 4294967295;const i=C.placed?1:0,h=Math.floor(127*C.opacity);return h*Qt+i*en+h*Pt+i*Ht+h*Bn+i*$t+h*sn+i}const Dr=0;class so{constructor(i){this._sortAcrossTiles=i.layout.get("symbol-z-order")!=="viewport-y"&&!i.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(i,h,b,E,B){const F=this._bucketParts;for(;this._currentTileIndex<i.length;)if(h.getBucketParts(F,E,i[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,B())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,F.sort((A,s)=>A.sortKey-s.sortKey));this._currentPartIndex<F.length;)if(h.placeLayerBucketPart(F[this._currentPartIndex],this._seenCrossTileIDs,b),this._currentPartIndex++,B())return!0;return!1}}class kr{constructor(i,h,b,E,B,F,A,s){this.placement=new K(i,h,F,A,s),this._currentPlacementIndex=b.length-1,this._forceFullPlacement=E,this._showCollisionBoxes=B,this._done=!1}isDone(){return this._done}continuePlacement(i,h,b){const E=c.h.now(),B=()=>!this._forceFullPlacement&&c.h.now()-E>2;for(;this._currentPlacementIndex>=0;){const F=h[i[this._currentPlacementIndex]],A=this.placement.collisionIndex.transform.zoom;if(F.type==="symbol"&&(!F.minzoom||F.minzoom<=A)&&(!F.maxzoom||F.maxzoom>A)){if(this._inProgressLayer||(this._inProgressLayer=new so(F)),this._inProgressLayer.continuePlacement(b[F.source],this.placement,this._showCollisionBoxes,F,B))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(i){return this.placement.commit(i),this.placement}}const yr=512/c.N/2;class oA{constructor(i,h,b){this.tileID=i,this.bucketInstanceId=b,this._symbolsByKey={};const E=new Map;for(let B=0;B<h.length;B++){const F=h.get(B),A=F.key,s=E.get(A);s?s.push(F):E.set(A,[F])}for(const[B,F]of E){const A={positions:F.map(s=>({x:Math.floor(s.anchorX*yr),y:Math.floor(s.anchorY*yr)})),crossTileIDs:F.map(s=>s.crossTileID)};if(A.positions.length>128){const s=new c.av(A.positions.length,16,Uint16Array);for(const{x:l,y:f}of A.positions)s.add(l,f);s.finish(),delete A.positions,A.index=s}this._symbolsByKey[B]=A}}getScaledCoordinates(i,h){const{x:b,y:E,z:B}=this.tileID.canonical,{x:F,y:A,z:s}=h.canonical,l=yr/Math.pow(2,s-B),f=(A*c.N+i.anchorY)*l,m=E*c.N*yr;return{x:Math.floor((F*c.N+i.anchorX)*l-b*c.N*yr),y:Math.floor(f-m)}}findMatches(i,h,b){const E=this.tileID.canonical.z<h.canonical.z?1:Math.pow(2,this.tileID.canonical.z-h.canonical.z);for(let B=0;B<i.length;B++){const F=i.get(B);if(F.crossTileID)continue;const A=this._symbolsByKey[F.key];if(!A)continue;const s=this.getScaledCoordinates(F,h);if(A.index){const l=A.index.range(s.x-E,s.y-E,s.x+E,s.y+E).sort();for(const f of l){const m=A.crossTileIDs[f];if(!b[m]){b[m]=!0,F.crossTileID=m;break}}}else if(A.positions)for(let l=0;l<A.positions.length;l++){const f=A.positions[l],m=A.crossTileIDs[l];if(Math.abs(f.x-s.x)<=E&&Math.abs(f.y-s.y)<=E&&!b[m]){b[m]=!0,F.crossTileID=m;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:i})=>i)}}class ti{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class kA{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(i){const h=Math.round((i-this.lng)/360);if(h!==0)for(const b in this.indexes){const E=this.indexes[b],B={};for(const F in E){const A=E[F];A.tileID=A.tileID.unwrapTo(A.tileID.wrap+h),B[A.tileID.key]=A}this.indexes[b]=B}this.lng=i}addBucket(i,h,b){if(this.indexes[i.overscaledZ]&&this.indexes[i.overscaledZ][i.key]){if(this.indexes[i.overscaledZ][i.key].bucketInstanceId===h.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(i.overscaledZ,this.indexes[i.overscaledZ][i.key])}for(let B=0;B<h.symbolInstances.length;B++)h.symbolInstances.get(B).crossTileID=0;this.usedCrossTileIDs[i.overscaledZ]||(this.usedCrossTileIDs[i.overscaledZ]={});const E=this.usedCrossTileIDs[i.overscaledZ];for(const B in this.indexes){const F=this.indexes[B];if(Number(B)>i.overscaledZ)for(const A in F){const s=F[A];s.tileID.isChildOf(i)&&s.findMatches(h.symbolInstances,i,E)}else{const A=F[i.scaledTo(Number(B)).key];A&&A.findMatches(h.symbolInstances,i,E)}}for(let B=0;B<h.symbolInstances.length;B++){const F=h.symbolInstances.get(B);F.crossTileID||(F.crossTileID=b.generate(),E[F.crossTileID]=!0)}return this.indexes[i.overscaledZ]===void 0&&(this.indexes[i.overscaledZ]={}),this.indexes[i.overscaledZ][i.key]=new oA(i,h.symbolInstances,h.bucketInstanceId),!0}removeBucketCrossTileIDs(i,h){for(const b of h.getCrossTileIDsLists())for(const E of b)delete this.usedCrossTileIDs[i][E]}removeStaleBuckets(i){let h=!1;for(const b in this.indexes){const E=this.indexes[b];for(const B in E)i[E[B].bucketInstanceId]||(this.removeBucketCrossTileIDs(b,E[B]),delete E[B],h=!0)}return h}}class Ln{constructor(){this.layerIndexes={},this.crossTileIDs=new ti,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(i,h,b){let E=this.layerIndexes[i.id];E===void 0&&(E=this.layerIndexes[i.id]=new kA);let B=!1;const F={};E.handleWrapJump(b);for(const A of h){const s=A.getBucket(i);s&&i.id===s.layerIds[0]&&(s.bucketInstanceId||(s.bucketInstanceId=++this.maxBucketInstanceId),E.addBucket(A.tileID,s,this.crossTileIDs)&&(B=!0),F[s.bucketInstanceId]=!0)}return E.removeStaleBuckets(F)&&(B=!0),B}pruneUnusedLayers(i){const h={};i.forEach(b=>{h[b]=!0});for(const b in this.layerIndexes)h[b]||delete this.layerIndexes[b]}}const He=(C,i)=>c.x(C,i&&i.filter(h=>h.identifier!=="source.canvas")),Xt=c.F(c.ax,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setGlyphs","setSprite"]),Te=c.F(c.ax,["setCenter","setZoom","setBearing","setPitch"]),kn=c.aw();class Er extends c.E{constructor(i,h={}){super(),this.map=i,this.dispatcher=new hn(FA(),this,i._getMapId()),this.imageManager=new bt,this.imageManager.setEventedParent(this),this.glyphManager=new lt(i._requestManager,h.localIdeographFontFamily),this.lineAtlas=new _n(256,512),this.crossTileSymbolIndex=new Ln,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new c.ay,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",c.az());const b=this;this._rtlTextPluginCallback=Er.registerForPluginStateChange(E=>{b.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:E.pluginStatus,pluginURL:E.pluginURL},(B,F)=>{if(c.aA(B),F&&F.every(A=>A))for(const A in b.sourceCaches){const s=b.sourceCaches[A].getSource().type;s!=="vector"&&s!=="geojson"||b.sourceCaches[A].reload()}})}),this.on("data",E=>{if(E.dataType!=="source"||E.sourceDataType!=="metadata")return;const B=this.sourceCaches[E.sourceId];if(!B)return;const F=B.getSource();if(F&&F.vectorLayerIds)for(const A in this._layers){const s=this._layers[A];s.source===F.id&&this._validateLayer(s)}})}loadURL(i,h={},b){this.fire(new c.k("dataloading",{dataType:"style"})),h.validate=typeof h.validate!="boolean"||h.validate;const E=this.map._requestManager.transformRequest(i,Ce.Style);this._request=c.f(E,(B,F)=>{this._request=null,B?this.fire(new c.j(B)):F&&this._load(F,h,b)})}loadJSON(i,h={},b){this.fire(new c.k("dataloading",{dataType:"style"})),this._request=c.h.frame(()=>{this._request=null,h.validate=h.validate!==!1,this._load(i,h,b)})}loadEmpty(){this.fire(new c.k("dataloading",{dataType:"style"})),this._load(kn,{validate:!1})}_load(i,h,b){var E;const B=h.transformStyle?h.transformStyle(b,i):i;if(!h.validate||!He(this,c.y(B))){this._loaded=!0,this.stylesheet=B;for(const F in B.sources)this.addSource(F,B.sources[F],{validate:!1});B.sprite?this._loadSprite(B.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(B.glyphs),this._createLayers(),this.light=new Gt(this.stylesheet.light),this.map.setTerrain((E=this.stylesheet.terrain)!==null&&E!==void 0?E:null),this.fire(new c.k("data",{dataType:"style"})),this.fire(new c.k("style.load"))}}_createLayers(){const i=c.aB(this.stylesheet.layers);this.dispatcher.broadcast("setLayers",i),this._order=i.map(h=>h.id),this._layers={},this._serializedLayers=null;for(const h of i){const b=c.aC(h);b.setEventedParent(this,{layer:{id:h.id}}),this._layers[h.id]=b}}_loadSprite(i,h=!1,b=void 0){this.imageManager.setLoaded(!1),this._spriteRequest=function(E,B,F,A){const s=It(E),l=s.length,f=F>1?"@2x":"",m={},k={},I={};for(const{id:D,url:Q}of s){const Z=B.transformRequest(B.normalizeSpriteURL(Q,f,".json"),Ce.SpriteJSON),X=`${D}_${Z.url}`;m[X]=c.f(Z,(ce,fe)=>{delete m[X],k[D]=fe,nn(A,k,I,ce,l)});const ie=B.transformRequest(B.normalizeSpriteURL(Q,f,".png"),Ce.SpriteImage),Ae=`${D}_${ie.url}`;m[Ae]=xe.getImage(ie,(ce,fe)=>{delete m[Ae],I[D]=fe,nn(A,k,I,ce,l)})}return{cancel(){for(const D of Object.values(m))D.cancel()}}}(i,this.map._requestManager,this.map.getPixelRatio(),(E,B)=>{if(this._spriteRequest=null,E)this.fire(new c.j(E));else if(B)for(const F in B){this._spritesImagesIds[F]=[];const A=this._spritesImagesIds[F]?this._spritesImagesIds[F].filter(s=>!(s in B)):[];for(const s of A)this.imageManager.removeImage(s),this._changedImages[s]=!0;for(const s in B[F]){const l=F==="default"?s:`${F}:${s}`;this._spritesImagesIds[F].push(l),l in this.imageManager.images?this.imageManager.updateImage(l,B[F][s],!1):this.imageManager.addImage(l,B[F][s]),h&&(this._changedImages[l]=!0)}}this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),h&&(this._changed=!0),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new c.k("data",{dataType:"style"})),b&&b(E)})}_unloadSprite(){for(const i of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(i),this._changedImages[i]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new c.k("data",{dataType:"style"}))}_validateLayer(i){const h=this.sourceCaches[i.source];if(!h)return;const b=i.sourceLayer;if(!b)return;const E=h.getSource();(E.type==="geojson"||E.vectorLayerIds&&E.vectorLayerIds.indexOf(b)===-1)&&this.fire(new c.j(new Error(`Source layer "${b}" does not exist on source "${E.id}" as specified by style layer "${i.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const i in this.sourceCaches)if(!this.sourceCaches[i].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(i){const h=this._serializedAllLayers();if(!i||i.length===0)return Object.values(h);const b=[];for(const E of i)h[E]&&b.push(h[E]);return b}_serializedAllLayers(){let i=this._serializedLayers;if(i)return i;i=this._serializedLayers={};const h=Object.keys(this._layers);for(const b of h){const E=this._layers[b];E.type!=="custom"&&(i[b]=E.serialize())}return i}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const i in this.sourceCaches)if(this.sourceCaches[i].hasTransition())return!0;for(const i in this._layers)if(this._layers[i].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(i){if(!this._loaded)return;const h=this._changed;if(this._changed){const E=Object.keys(this._updatedLayers),B=Object.keys(this._removedLayers);(E.length||B.length)&&this._updateWorkerLayers(E,B);for(const F in this._updatedSources){const A=this._updatedSources[F];if(A==="reload")this._reloadSource(F);else{if(A!=="clear")throw new Error(`Invalid action ${A}`);this._clearSource(F)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const F in this._updatedPaintProps)this._layers[F].updateTransitions(i);this.light.updateTransitions(i),this._resetUpdates()}const b={};for(const E in this.sourceCaches){const B=this.sourceCaches[E];b[E]=B.used,B.used=!1}for(const E of this._order){const B=this._layers[E];B.recalculate(i,this._availableImages),!B.isHidden(i.zoom)&&B.source&&(this.sourceCaches[B.source].used=!0)}for(const E in b){const B=this.sourceCaches[E];b[E]!==B.used&&B.fire(new c.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:E}))}this.light.recalculate(i),this.z=i.zoom,h&&this.fire(new c.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const i=Object.keys(this._changedImages);if(i.length){for(const h in this.sourceCaches)this.sourceCaches[h].reloadTilesForDependencies(["icons","patterns"],i);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const i in this.sourceCaches)this.sourceCaches[i].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(i,h){this.dispatcher.broadcast("updateLayers",{layers:this._serializeByIds(i),removedIds:h})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(i,h={}){this._checkLoaded();const b=this.serialize();if(i=h.transformStyle?h.transformStyle(b,i):i,He(this,c.y(i)))return!1;(i=c.aD(i)).layers=c.aB(i.layers);const E=c.aE(b,i).filter(F=>!(F.command in Te));if(E.length===0)return!1;const B=E.filter(F=>!(F.command in Xt));if(B.length>0)throw new Error(`Unimplemented: ${B.map(F=>F.command).join(", ")}.`);for(const F of E)F.command!=="setTransition"&&this[F.command].apply(this,F.args);return this.stylesheet=i,this._serializedLayers=null,!0}addImage(i,h){if(this.getImage(i))return this.fire(new c.j(new Error(`An image named "${i}" already exists.`)));this.imageManager.addImage(i,h),this._afterImageUpdated(i)}updateImage(i,h){this.imageManager.updateImage(i,h)}getImage(i){return this.imageManager.getImage(i)}removeImage(i){if(!this.getImage(i))return this.fire(new c.j(new Error(`An image named "${i}" does not exist.`)));this.imageManager.removeImage(i),this._afterImageUpdated(i)}_afterImageUpdated(i){this._availableImages=this.imageManager.listImages(),this._changedImages[i]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new c.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(i,h,b={}){if(this._checkLoaded(),this.sourceCaches[i]!==void 0)throw new Error(`Source "${i}" already exists.`);if(!h.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(h).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(h.type)>=0&&this._validate(c.y.source,`sources.${i}`,h,null,b))return;this.map&&this.map._collectResourceTiming&&(h.collectResourceTiming=!0);const E=this.sourceCaches[i]=new ei(i,h,this.dispatcher);E.style=this,E.setEventedParent(this,()=>({isSourceLoaded:E.loaded(),source:E.serialize(),sourceId:i})),E.onAdd(this.map),this._changed=!0}removeSource(i){if(this._checkLoaded(),this.sourceCaches[i]===void 0)throw new Error("There is no source with this ID");for(const b in this._layers)if(this._layers[b].source===i)return this.fire(new c.j(new Error(`Source "${i}" cannot be removed while layer "${b}" is using it.`)));const h=this.sourceCaches[i];delete this.sourceCaches[i],delete this._updatedSources[i],h.fire(new c.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:i})),h.setEventedParent(null),h.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(i,h){if(this._checkLoaded(),this.sourceCaches[i]===void 0)throw new Error(`There is no source with this ID=${i}`);const b=this.sourceCaches[i].getSource();if(b.type!=="geojson")throw new Error(`geojsonSource.type is ${b.type}, which is !== 'geojson`);b.setData(h),this._changed=!0}getSource(i){return this.sourceCaches[i]&&this.sourceCaches[i].getSource()}addLayer(i,h,b={}){this._checkLoaded();const E=i.id;if(this.getLayer(E))return void this.fire(new c.j(new Error(`Layer "${E}" already exists on this map.`)));let B;if(i.type==="custom"){if(He(this,c.aF(i)))return;B=c.aC(i)}else{if("source"in i&&typeof i.source=="object"&&(this.addSource(E,i.source),i=c.aD(i),i=c.e(i,{source:E})),this._validate(c.y.layer,`layers.${E}`,i,{arrayIndex:-1},b))return;B=c.aC(i),this._validateLayer(B),B.setEventedParent(this,{layer:{id:E}})}const F=h?this._order.indexOf(h):this._order.length;if(h&&F===-1)this.fire(new c.j(new Error(`Cannot add layer "${E}" before non-existing layer "${h}".`)));else{if(this._order.splice(F,0,E),this._layerOrderChanged=!0,this._layers[E]=B,this._removedLayers[E]&&B.source&&B.type!=="custom"){const A=this._removedLayers[E];delete this._removedLayers[E],A.type!==B.type?this._updatedSources[B.source]="clear":(this._updatedSources[B.source]="reload",this.sourceCaches[B.source].pause())}this._updateLayer(B),B.onAdd&&B.onAdd(this.map)}}moveLayer(i,h){if(this._checkLoaded(),this._changed=!0,!this._layers[i])return void this.fire(new c.j(new Error(`The layer '${i}' does not exist in the map's style and cannot be moved.`)));if(i===h)return;const b=this._order.indexOf(i);this._order.splice(b,1);const E=h?this._order.indexOf(h):this._order.length;h&&E===-1?this.fire(new c.j(new Error(`Cannot move layer "${i}" before non-existing layer "${h}".`))):(this._order.splice(E,0,i),this._layerOrderChanged=!0)}removeLayer(i){this._checkLoaded();const h=this._layers[i];if(!h)return void this.fire(new c.j(new Error(`Cannot remove non-existing layer "${i}".`)));h.setEventedParent(null);const b=this._order.indexOf(i);this._order.splice(b,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[i]=h,delete this._layers[i],this._serializedLayers&&delete this._serializedLayers[i],delete this._updatedLayers[i],delete this._updatedPaintProps[i],h.onRemove&&h.onRemove(this.map)}getLayer(i){return this._layers[i]}getLayersOrder(){return[...this._order]}hasLayer(i){return i in this._layers}setLayerZoomRange(i,h,b){this._checkLoaded();const E=this.getLayer(i);E?E.minzoom===h&&E.maxzoom===b||(h!=null&&(E.minzoom=h),b!=null&&(E.maxzoom=b),this._updateLayer(E)):this.fire(new c.j(new Error(`Cannot set the zoom range of non-existing layer "${i}".`)))}setFilter(i,h,b={}){this._checkLoaded();const E=this.getLayer(i);if(E){if(!c.aG(E.filter,h))return h==null?(E.filter=void 0,void this._updateLayer(E)):void(this._validate(c.y.filter,`layers.${E.id}.filter`,h,null,b)||(E.filter=c.aD(h),this._updateLayer(E)))}else this.fire(new c.j(new Error(`Cannot filter non-existing layer "${i}".`)))}getFilter(i){return c.aD(this.getLayer(i).filter)}setLayoutProperty(i,h,b,E={}){this._checkLoaded();const B=this.getLayer(i);B?c.aG(B.getLayoutProperty(h),b)||(B.setLayoutProperty(h,b,E),this._updateLayer(B)):this.fire(new c.j(new Error(`Cannot style non-existing layer "${i}".`)))}getLayoutProperty(i,h){const b=this.getLayer(i);if(b)return b.getLayoutProperty(h);this.fire(new c.j(new Error(`Cannot get style of non-existing layer "${i}".`)))}setPaintProperty(i,h,b,E={}){this._checkLoaded();const B=this.getLayer(i);B?c.aG(B.getPaintProperty(h),b)||(B.setPaintProperty(h,b,E)&&this._updateLayer(B),this._changed=!0,this._updatedPaintProps[i]=!0):this.fire(new c.j(new Error(`Cannot style non-existing layer "${i}".`)))}getPaintProperty(i,h){return this.getLayer(i).getPaintProperty(h)}setFeatureState(i,h){this._checkLoaded();const b=i.source,E=i.sourceLayer,B=this.sourceCaches[b];if(B===void 0)return void this.fire(new c.j(new Error(`The source '${b}' does not exist in the map's style.`)));const F=B.getSource().type;F==="geojson"&&E?this.fire(new c.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):F!=="vector"||E?(i.id===void 0&&this.fire(new c.j(new Error("The feature id parameter must be provided."))),B.setFeatureState(E,i.id,h)):this.fire(new c.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(i,h){this._checkLoaded();const b=i.source,E=this.sourceCaches[b];if(E===void 0)return void this.fire(new c.j(new Error(`The source '${b}' does not exist in the map's style.`)));const B=E.getSource().type,F=B==="vector"?i.sourceLayer:void 0;B!=="vector"||F?h&&typeof i.id!="string"&&typeof i.id!="number"?this.fire(new c.j(new Error("A feature id is required to remove its specific state property."))):E.removeFeatureState(F,i.id,h):this.fire(new c.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(i){this._checkLoaded();const h=i.source,b=i.sourceLayer,E=this.sourceCaches[h];if(E!==void 0)return E.getSource().type!=="vector"||b?(i.id===void 0&&this.fire(new c.j(new Error("The feature id parameter must be provided."))),E.getFeatureState(b,i.id)):void this.fire(new c.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new c.j(new Error(`The source '${h}' does not exist in the map's style.`)))}getTransition(){return c.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const i=c.aH(this.sourceCaches,B=>B.serialize()),h=this._serializeByIds(this._order),b=this.map.getTerrain()||void 0,E=this.stylesheet;return c.aI({version:E.version,name:E.name,metadata:E.metadata,light:E.light,center:E.center,zoom:E.zoom,bearing:E.bearing,pitch:E.pitch,sprite:E.sprite,glyphs:E.glyphs,transition:E.transition,sources:i,layers:h,terrain:b},B=>B!==void 0)}_updateLayer(i){this._updatedLayers[i.id]=!0,i.source&&!this._updatedSources[i.source]&&this.sourceCaches[i.source].getSource().type!=="raster"&&(this._updatedSources[i.source]="reload",this.sourceCaches[i.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(i){const h=F=>this._layers[F].type==="fill-extrusion",b={},E=[];for(let F=this._order.length-1;F>=0;F--){const A=this._order[F];if(h(A)){b[A]=F;for(const s of i){const l=s[A];if(l)for(const f of l)E.push(f)}}}E.sort((F,A)=>A.intersectionZ-F.intersectionZ);const B=[];for(let F=this._order.length-1;F>=0;F--){const A=this._order[F];if(h(A))for(let s=E.length-1;s>=0;s--){const l=E[s].feature;if(b[l.layer.id]<F)break;B.push(l),E.pop()}else for(const s of i){const l=s[A];if(l)for(const f of l)B.push(f.feature)}}return B}queryRenderedFeatures(i,h,b){h&&h.filter&&this._validate(c.y.filter,"queryRenderedFeatures.filter",h.filter,null,h);const E={};if(h&&h.layers){if(!Array.isArray(h.layers))return this.fire(new c.j(new Error("parameters.layers must be an Array."))),[];for(const A of h.layers){const s=this._layers[A];if(!s)return this.fire(new c.j(new Error(`The layer '${A}' does not exist in the map's style and cannot be queried for features.`))),[];E[s.source]=!0}}const B=[];h.availableImages=this._availableImages;const F=this._serializedAllLayers();for(const A in this.sourceCaches)h.layers&&!E[A]||B.push(Ar(this.sourceCaches[A],this._layers,F,i,h,b));return this.placement&&B.push(function(A,s,l,f,m,k,I){const D={},Q=k.queryRenderedSymbols(f),Z=[];for(const X of Object.keys(Q).map(Number))Z.push(I[X]);Z.sort(un);for(const X of Z){const ie=X.featureIndex.lookupSymbolFeatures(Q[X.bucketInstanceId],s,X.bucketIndex,X.sourceLayerIndex,m.filter,m.layers,m.availableImages,A);for(const Ae in ie){const ce=D[Ae]=D[Ae]||[],fe=ie[Ae];fe.sort((ve,Ne)=>{const qe=X.featureSortOrder;if(qe){const Pe=qe.indexOf(ve.featureIndex);return qe.indexOf(Ne.featureIndex)-Pe}return Ne.featureIndex-ve.featureIndex});for(const ve of fe)ce.push(ve)}}for(const X in D)D[X].forEach(ie=>{const Ae=ie.feature,ce=l[A[X].source].getFeatureState(Ae.layer["source-layer"],Ae.id);Ae.source=Ae.layer.source,Ae.layer["source-layer"]&&(Ae.sourceLayer=Ae.layer["source-layer"]),Ae.state=ce});return D}(this._layers,F,this.sourceCaches,i,h,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(B)}querySourceFeatures(i,h){h&&h.filter&&this._validate(c.y.filter,"querySourceFeatures.filter",h.filter,null,h);const b=this.sourceCaches[i];return b?function(E,B){const F=E.getRenderableIds().map(l=>E.getTileByID(l)),A=[],s={};for(let l=0;l<F.length;l++){const f=F[l],m=f.tileID.canonical.key;s[m]||(s[m]=!0,f.querySourceFeatures(A,B))}return A}(b,h):[]}addSourceType(i,h,b){return Pn(i)?b(new Error(`A source type called "${i}" already exists.`)):(((E,B)=>{Ii[E]=B})(i,h),h.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:i,url:h.workerSourceURL},b):b(null,null))}getLight(){return this.light.getLight()}setLight(i,h={}){this._checkLoaded();const b=this.light.getLight();let E=!1;for(const F in i)if(!c.aG(i[F],b[F])){E=!0;break}if(!E)return;const B={now:c.h.now(),transition:c.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(i,h),this.light.updateTransitions(B)}_validate(i,h,b,E,B={}){return(!B||B.validate!==!1)&&He(this,i.call(c.y,c.e({key:h,style:this.serialize(),value:b,styleSpec:c.v},E)))}_remove(i=!0){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),c.aJ.off("pluginStateChange",this._rtlTextPluginCallback);for(const h in this._layers)this._layers[h].setEventedParent(null);for(const h in this.sourceCaches){const b=this.sourceCaches[h];b.setEventedParent(null),b.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove(i)}_clearSource(i){this.sourceCaches[i].clearTiles()}_reloadSource(i){this.sourceCaches[i].resume(),this.sourceCaches[i].reload()}_updateSources(i){for(const h in this.sourceCaches)this.sourceCaches[h].update(i,this.map.terrain)}_generateCollisionBoxes(){for(const i in this.sourceCaches)this._reloadSource(i)}_updatePlacement(i,h,b,E,B=!1){let F=!1,A=!1;const s={};for(const l of this._order){const f=this._layers[l];if(f.type!=="symbol")continue;if(!s[f.source]){const k=this.sourceCaches[f.source];s[f.source]=k.getRenderableIds(!0).map(I=>k.getTileByID(I)).sort((I,D)=>D.tileID.overscaledZ-I.tileID.overscaledZ||(I.tileID.isLessThan(D.tileID)?-1:1))}const m=this.crossTileSymbolIndex.addLayer(f,s[f.source],i.center.lng);F=F||m}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((B=B||this._layerOrderChanged||b===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(c.h.now(),i.zoom))&&(this.pauseablePlacement=new kr(i,this.map.terrain,this._order,B,h,b,E,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,s),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(c.h.now()),A=!0),F&&this.pauseablePlacement.placement.setStale()),A||F)for(const l of this._order){const f=this._layers[l];f.type==="symbol"&&this.placement.updateLayerOpacities(f,s[f.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(c.h.now())}_releaseSymbolFadeTiles(){for(const i in this.sourceCaches)this.sourceCaches[i].releaseSymbolFadeTiles()}getImages(i,h,b){this.imageManager.getImages(h.icons,b),this._updateTilesForChangedImages();const E=this.sourceCaches[h.source];E&&E.setDependencies(h.tileID.key,h.type,h.icons)}getGlyphs(i,h,b){this.glyphManager.getGlyphs(h.stacks,b);const E=this.sourceCaches[h.source];E&&E.setDependencies(h.tileID.key,h.type,[""])}getResource(i,h,b){return c.m(h,b)}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(i,h={}){this._checkLoaded(),i&&this._validate(c.y.glyphs,"glyphs",i,null,h)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=i,this.glyphManager.entries={},this.glyphManager.setURL(i))}addSprite(i,h,b={},E){this._checkLoaded();const B=[{id:i,url:h}],F=[...It(this.stylesheet.sprite),...B];this._validate(c.y.sprite,"sprite",F,null,b)||(this.stylesheet.sprite=F,this._loadSprite(B,!0,E))}removeSprite(i){this._checkLoaded();const h=It(this.stylesheet.sprite);if(h.find(b=>b.id===i)){if(this._spritesImagesIds[i])for(const b of this._spritesImagesIds[i])this.imageManager.removeImage(b),this._changedImages[b]=!0;h.splice(h.findIndex(b=>b.id===i),1),this.stylesheet.sprite=h.length>0?h:void 0,delete this._spritesImagesIds[i],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new c.k("data",{dataType:"style"}))}else this.fire(new c.j(new Error(`Sprite "${i}" doesn't exists on this map.`)))}getSprite(){return It(this.stylesheet.sprite)}setSprite(i,h={},b){this._checkLoaded(),i&&this._validate(c.y.sprite,"sprite",i,null,h)||(this.stylesheet.sprite=i,i?this._loadSprite(i,!0,b):(this._unloadSprite(),b&&b(null)))}}Er.registerForPluginStateChange=c.aK;var ca=c.Q([{name:"a_pos",type:"Int16",components:2}]),oo="attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_depth;void main() {float extent=8192.0;float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/extent;gl_Position=u_matrix*vec4(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}";const Be={prelude:mi(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:mi(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:mi(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:mi(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:mi("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:mi(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:mi(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:mi("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:mi("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:mi("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:mi(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:mi(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:mi(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:mi(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:mi(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:mi(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:mi(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:mi(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:mi(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:mi(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:mi(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:mi(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:mi(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:mi(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:mi(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:mi(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:mi("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",oo),terrainDepth:mi("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",oo),terrainCoords:mi("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",oo)};function mi(C,i){const h=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,b=i.match(/attribute ([\w]+) ([\w]+)/g),E=C.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),B=i.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),F=B?B.concat(E):E,A={};return{fragmentSource:C=C.replace(h,(s,l,f,m,k)=>(A[k]=!0,l==="define"?`
#ifndef HAS_UNIFORM_u_${k}
varying ${f} ${m} ${k};
#else
uniform ${f} ${m} u_${k};
#endif
`:`
#ifdef HAS_UNIFORM_u_${k}
    ${f} ${m} ${k} = u_${k};
#endif
`)),vertexSource:i=i.replace(h,(s,l,f,m,k)=>{const I=m==="float"?"vec2":"vec4",D=k.match(/color/)?"color":I;return A[k]?l==="define"?`
#ifndef HAS_UNIFORM_u_${k}
uniform lowp float u_${k}_t;
attribute ${f} ${I} a_${k};
varying ${f} ${m} ${k};
#else
uniform ${f} ${m} u_${k};
#endif
`:D==="vec4"?`
#ifndef HAS_UNIFORM_u_${k}
    ${k} = a_${k};
#else
    ${f} ${m} ${k} = u_${k};
#endif
`:`
#ifndef HAS_UNIFORM_u_${k}
    ${k} = unpack_mix_${D}(a_${k}, u_${k}_t);
#else
    ${f} ${m} ${k} = u_${k};
#endif
`:l==="define"?`
#ifndef HAS_UNIFORM_u_${k}
uniform lowp float u_${k}_t;
attribute ${f} ${I} a_${k};
#else
uniform ${f} ${m} u_${k};
#endif
`:D==="vec4"?`
#ifndef HAS_UNIFORM_u_${k}
    ${f} ${m} ${k} = a_${k};
#else
    ${f} ${m} ${k} = u_${k};
#endif
`:`
#ifndef HAS_UNIFORM_u_${k}
    ${f} ${m} ${k} = unpack_mix_${D}(a_${k}, u_${k}_t);
#else
    ${f} ${m} ${k} = u_${k};
#endif
`}),staticAttributes:b,staticUniforms:F}}class ye{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(i,h,b,E,B,F,A,s,l){this.context=i;let f=this.boundPaintVertexBuffers.length!==E.length;for(let m=0;!f&&m<E.length;m++)this.boundPaintVertexBuffers[m]!==E[m]&&(f=!0);!this.vao||this.boundProgram!==h||this.boundLayoutVertexBuffer!==b||f||this.boundIndexBuffer!==B||this.boundVertexOffset!==F||this.boundDynamicVertexBuffer!==A||this.boundDynamicVertexBuffer2!==s||this.boundDynamicVertexBuffer3!==l?this.freshBind(h,b,E,B,F,A,s,l):(i.bindVertexArray.set(this.vao),A&&A.bind(),B&&B.dynamicDraw&&B.bind(),s&&s.bind(),l&&l.bind())}freshBind(i,h,b,E,B,F,A,s){const l=i.numAttributes,f=this.context,m=f.gl;this.vao&&this.destroy(),this.vao=f.createVertexArray(),f.bindVertexArray.set(this.vao),this.boundProgram=i,this.boundLayoutVertexBuffer=h,this.boundPaintVertexBuffers=b,this.boundIndexBuffer=E,this.boundVertexOffset=B,this.boundDynamicVertexBuffer=F,this.boundDynamicVertexBuffer2=A,this.boundDynamicVertexBuffer3=s,h.enableAttributes(m,i);for(const k of b)k.enableAttributes(m,i);F&&F.enableAttributes(m,i),A&&A.enableAttributes(m,i),s&&s.enableAttributes(m,i),h.bind(),h.setVertexAttribPointers(m,i,B);for(const k of b)k.bind(),k.setVertexAttribPointers(m,i,B);F&&(F.bind(),F.setVertexAttribPointers(m,i,B)),E&&E.bind(),A&&(A.bind(),A.setVertexAttribPointers(m,i,B)),s&&(s.bind(),s.setVertexAttribPointers(m,i,B)),f.currentNumAttributes=l}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}function Zi(C){const i=[];for(let h=0;h<C.length;h++){if(C[h]===null)continue;const b=C[h].split(" ");i.push(b.pop())}return i}class ha{constructor(i,h,b,E,B,F){const A=i.gl;this.program=A.createProgram();const s=Zi(h.staticAttributes),l=b?b.getBinderAttributes():[],f=s.concat(l),m=Be.prelude.staticUniforms?Zi(Be.prelude.staticUniforms):[],k=h.staticUniforms?Zi(h.staticUniforms):[],I=b?b.getBinderUniforms():[],D=m.concat(k).concat(I),Q=[];for(const ve of D)Q.indexOf(ve)<0&&Q.push(ve);const Z=b?b.defines():[];B&&Z.push("#define OVERDRAW_INSPECTOR;"),F&&Z.push("#define TERRAIN3D;");const X=Z.concat(Be.prelude.fragmentSource,h.fragmentSource).join(`
`),ie=Z.concat(Be.prelude.vertexSource,h.vertexSource).join(`
`),Ae=A.createShader(A.FRAGMENT_SHADER);if(A.isContextLost())return void(this.failedToCreate=!0);if(A.shaderSource(Ae,X),A.compileShader(Ae),!A.getShaderParameter(Ae,A.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${A.getShaderInfoLog(Ae)}`);A.attachShader(this.program,Ae);const ce=A.createShader(A.VERTEX_SHADER);if(A.isContextLost())return void(this.failedToCreate=!0);if(A.shaderSource(ce,ie),A.compileShader(ce),!A.getShaderParameter(ce,A.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${A.getShaderInfoLog(ce)}`);A.attachShader(this.program,ce),this.attributes={};const fe={};this.numAttributes=f.length;for(let ve=0;ve<this.numAttributes;ve++)f[ve]&&(A.bindAttribLocation(this.program,ve,f[ve]),this.attributes[f[ve]]=ve);if(A.linkProgram(this.program),!A.getProgramParameter(this.program,A.LINK_STATUS))throw new Error(`Program failed to link: ${A.getProgramInfoLog(this.program)}`);A.deleteShader(ce),A.deleteShader(Ae);for(let ve=0;ve<Q.length;ve++){const Ne=Q[ve];if(Ne&&!fe[Ne]){const qe=A.getUniformLocation(this.program,Ne);qe&&(fe[Ne]=qe)}}this.fixedUniforms=E(i,fe),this.terrainUniforms=((ve,Ne)=>({u_depth:new c.aL(ve,Ne.u_depth),u_terrain:new c.aL(ve,Ne.u_terrain),u_terrain_dim:new c.aM(ve,Ne.u_terrain_dim),u_terrain_matrix:new c.aN(ve,Ne.u_terrain_matrix),u_terrain_unpack:new c.aO(ve,Ne.u_terrain_unpack),u_terrain_exaggeration:new c.aM(ve,Ne.u_terrain_exaggeration)}))(i,fe),this.binderUniforms=b?b.getUniforms(i,fe):[]}draw(i,h,b,E,B,F,A,s,l,f,m,k,I,D,Q,Z,X,ie){const Ae=i.gl;if(this.failedToCreate)return;if(i.program.set(this.program),i.setDepthMode(b),i.setStencilMode(E),i.setColorMode(B),i.setCullFace(F),s){i.activeTexture.set(Ae.TEXTURE2),Ae.bindTexture(Ae.TEXTURE_2D,s.depthTexture),i.activeTexture.set(Ae.TEXTURE3),Ae.bindTexture(Ae.TEXTURE_2D,s.texture);for(const fe in this.terrainUniforms)this.terrainUniforms[fe].set(s[fe])}for(const fe in this.fixedUniforms)this.fixedUniforms[fe].set(A[fe]);Q&&Q.setUniforms(i,this.binderUniforms,I,{zoom:D});let ce=0;switch(h){case Ae.LINES:ce=2;break;case Ae.TRIANGLES:ce=3;break;case Ae.LINE_STRIP:ce=1}for(const fe of k.get()){const ve=fe.vaos||(fe.vaos={});(ve[l]||(ve[l]=new ye)).bind(i,this,f,Q?Q.getPaintVertexBuffers():[],m,fe.vertexOffset,Z,X,ie),Ae.drawElements(h,fe.primitiveLength*ce,Ae.UNSIGNED_SHORT,fe.primitiveOffset*ce*2)}}}function EA(C,i,h){const b=1/Ye(h,1,i.transform.tileZoom),E=Math.pow(2,h.tileID.overscaledZ),B=h.tileSize*Math.pow(2,i.transform.tileZoom)/E,F=B*(h.tileID.canonical.x+h.tileID.wrap*E),A=B*h.tileID.canonical.y;return{u_image:0,u_texsize:h.imageAtlasTexture.size,u_scale:[b,C.fromScale,C.toScale],u_fade:C.t,u_pixel_coord_upper:[F>>16,A>>16],u_pixel_coord_lower:[65535&F,65535&A]}}const za=(C,i,h,b)=>{const E=i.style.light,B=E.properties.get("position"),F=[B.x,B.y,B.z],A=function(){var l=new c.A(9);return c.A!=Float32Array&&(l[1]=0,l[2]=0,l[3]=0,l[5]=0,l[6]=0,l[7]=0),l[0]=1,l[4]=1,l[8]=1,l}();E.properties.get("anchor")==="viewport"&&function(l,f){var m=Math.sin(f),k=Math.cos(f);l[0]=k,l[1]=m,l[2]=0,l[3]=-m,l[4]=k,l[5]=0,l[6]=0,l[7]=0,l[8]=1}(A,-i.transform.angle),function(l,f,m){var k=f[0],I=f[1],D=f[2];l[0]=k*m[0]+I*m[3]+D*m[6],l[1]=k*m[1]+I*m[4]+D*m[7],l[2]=k*m[2]+I*m[5]+D*m[8]}(F,F,A);const s=E.properties.get("color");return{u_matrix:C,u_lightpos:F,u_lightintensity:E.properties.get("intensity"),u_lightcolor:[s.r,s.g,s.b],u_vertical_gradient:+h,u_opacity:b}},As=(C,i,h,b,E,B,F)=>c.e(za(C,i,h,b),EA(B,i,F),{u_height_factor:-Math.pow(2,E.overscaledZ)/F.tileSize/8}),La=C=>({u_matrix:C}),Co=(C,i,h,b)=>c.e(La(C),EA(h,i,b)),Yr=(C,i)=>({u_matrix:C,u_world:i}),Hi=(C,i,h,b,E)=>c.e(Co(C,i,h,b),{u_world:E}),Pr=(C,i,h,b)=>{const E=C.transform;let B,F;if(b.paint.get("circle-pitch-alignment")==="map"){const A=Ye(h,1,E.zoom);B=!0,F=[A,A]}else B=!1,F=E.pixelsToGLUnits;return{u_camera_to_center_distance:E.cameraToCenterDistance,u_scale_with_map:+(b.paint.get("circle-pitch-scale")==="map"),u_matrix:C.translatePosMatrix(i.posMatrix,h,b.paint.get("circle-translate"),b.paint.get("circle-translate-anchor")),u_pitch_with_map:+B,u_device_pixel_ratio:C.pixelRatio,u_extrude_scale:F}},Yi=(C,i,h)=>{const b=Ye(h,1,i.zoom),E=Math.pow(2,i.zoom-h.tileID.overscaledZ),B=h.tileID.overscaleFactor();return{u_matrix:C,u_camera_to_center_distance:i.cameraToCenterDistance,u_pixels_to_tile_units:b,u_extrude_scale:[i.pixelsToGLUnits[0]/(b*E),i.pixelsToGLUnits[1]/(b*E)],u_overscale_factor:B}},Qs=(C,i,h=1)=>({u_matrix:C,u_color:i,u_overlay:0,u_overlay_scale:h}),rl=C=>({u_matrix:C}),Ol=(C,i,h,b)=>({u_matrix:C,u_extrude_scale:Ye(i,1,h),u_intensity:b});function fa(C,i){const h=Math.pow(2,i.canonical.z),b=i.canonical.y;return[new c.U(0,b/h).toLngLat().lat,new c.U(0,(b+1)/h).toLngLat().lat]}const Ra=(C,i,h,b)=>{const E=C.transform;return{u_matrix:da(C,i,h,b),u_ratio:1/Ye(i,1,E.zoom),u_device_pixel_ratio:C.pixelRatio,u_units_to_pixels:[1/E.pixelsToGLUnits[0],1/E.pixelsToGLUnits[1]]}},$i=(C,i,h,b,E)=>c.e(Ra(C,i,h,E),{u_image:0,u_image_height:b}),Fa=(C,i,h,b,E)=>{const B=C.transform,F=Oa(i,B);return{u_matrix:da(C,i,h,E),u_texsize:i.imageAtlasTexture.size,u_ratio:1/Ye(i,1,B.zoom),u_device_pixel_ratio:C.pixelRatio,u_image:0,u_scale:[F,b.fromScale,b.toScale],u_fade:b.t,u_units_to_pixels:[1/B.pixelsToGLUnits[0],1/B.pixelsToGLUnits[1]]}},Ri=(C,i,h,b,E,B)=>{const F=C.lineAtlas,A=Oa(i,C.transform),s=h.layout.get("line-cap")==="round",l=F.getDash(b.from,s),f=F.getDash(b.to,s),m=l.width*E.fromScale,k=f.width*E.toScale;return c.e(Ra(C,i,h,B),{u_patternscale_a:[A/m,-l.height/2],u_patternscale_b:[A/k,-f.height/2],u_sdfgamma:F.width/(256*Math.min(m,k)*C.pixelRatio)/2,u_image:0,u_tex_y_a:l.y,u_tex_y_b:f.y,u_mix:E.t})};function Oa(C,i){return 1/Ye(C,1,i.tileZoom)}function da(C,i,h,b){return C.translatePosMatrix(b?b.posMatrix:i.tileID.posMatrix,i,h.paint.get("line-translate"),h.paint.get("line-translate-anchor"))}const Al=(C,i,h,b,E)=>{return{u_matrix:C,u_tl_parent:i,u_scale_parent:h,u_buffer_scale:1,u_fade_t:b.mix,u_opacity:b.opacity*E.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:E.paint.get("raster-brightness-min"),u_brightness_high:E.paint.get("raster-brightness-max"),u_saturation_factor:(F=E.paint.get("raster-saturation"),F>0?1-1/(1.001-F):-F),u_contrast_factor:(B=E.paint.get("raster-contrast"),B>0?1/(1-B):1+B),u_spin_weights:sl(E.paint.get("raster-hue-rotate"))};var B,F};function sl(C){C*=Math.PI/180;const i=Math.sin(C),h=Math.cos(C);return[(2*h+1)/3,(-Math.sqrt(3)*i-h+1)/3,(Math.sqrt(3)*i-h+1)/3]}const pa=(C,i,h,b,E,B,F,A,s,l)=>{const f=E.transform;return{u_is_size_zoom_constant:+(C==="constant"||C==="source"),u_is_size_feature_constant:+(C==="constant"||C==="camera"),u_size_t:i?i.uSizeT:0,u_size:i?i.uSize:0,u_camera_to_center_distance:f.cameraToCenterDistance,u_pitch:f.pitch/360*2*Math.PI,u_rotate_symbol:+h,u_aspect_ratio:f.width/f.height,u_fade_change:E.options.fadeDuration?E.symbolFadeChange:1,u_matrix:B,u_label_plane_matrix:F,u_coord_matrix:A,u_is_text:+s,u_pitch_with_map:+b,u_texsize:l,u_texture:0}},Io=(C,i,h,b,E,B,F,A,s,l,f)=>{const m=E.transform;return c.e(pa(C,i,h,b,E,B,F,A,s,l),{u_gamma_scale:b?Math.cos(m._pitch)*m.cameraToCenterDistance:1,u_device_pixel_ratio:E.pixelRatio,u_is_halo:+f})},Ts=(C,i,h,b,E,B,F,A,s,l)=>c.e(Io(C,i,h,b,E,B,F,A,!0,s,!0),{u_texsize_icon:l,u_texture_icon:1}),Gs=(C,i,h)=>({u_matrix:C,u_opacity:i,u_color:h}),fA=(C,i,h,b,E,B)=>c.e(function(F,A,s,l){const f=s.imageManager.getPattern(F.from.toString()),m=s.imageManager.getPattern(F.to.toString()),{width:k,height:I}=s.imageManager.getPixelSize(),D=Math.pow(2,l.tileID.overscaledZ),Q=l.tileSize*Math.pow(2,s.transform.tileZoom)/D,Z=Q*(l.tileID.canonical.x+l.tileID.wrap*D),X=Q*l.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:f.tl,u_pattern_br_a:f.br,u_pattern_tl_b:m.tl,u_pattern_br_b:m.br,u_texsize:[k,I],u_mix:A.t,u_pattern_size_a:f.displaySize,u_pattern_size_b:m.displaySize,u_scale_a:A.fromScale,u_scale_b:A.toScale,u_tile_units_to_pixels:1/Ye(l,1,s.transform.tileZoom),u_pixel_coord_upper:[Z>>16,X>>16],u_pixel_coord_lower:[65535&Z,65535&X]}}(b,B,h,E),{u_matrix:C,u_opacity:i}),ma={fillExtrusion:(C,i)=>({u_matrix:new c.aN(C,i.u_matrix),u_lightpos:new c.aP(C,i.u_lightpos),u_lightintensity:new c.aM(C,i.u_lightintensity),u_lightcolor:new c.aP(C,i.u_lightcolor),u_vertical_gradient:new c.aM(C,i.u_vertical_gradient),u_opacity:new c.aM(C,i.u_opacity)}),fillExtrusionPattern:(C,i)=>({u_matrix:new c.aN(C,i.u_matrix),u_lightpos:new c.aP(C,i.u_lightpos),u_lightintensity:new c.aM(C,i.u_lightintensity),u_lightcolor:new c.aP(C,i.u_lightcolor),u_vertical_gradient:new c.aM(C,i.u_vertical_gradient),u_height_factor:new c.aM(C,i.u_height_factor),u_image:new c.aL(C,i.u_image),u_texsize:new c.aQ(C,i.u_texsize),u_pixel_coord_upper:new c.aQ(C,i.u_pixel_coord_upper),u_pixel_coord_lower:new c.aQ(C,i.u_pixel_coord_lower),u_scale:new c.aP(C,i.u_scale),u_fade:new c.aM(C,i.u_fade),u_opacity:new c.aM(C,i.u_opacity)}),fill:(C,i)=>({u_matrix:new c.aN(C,i.u_matrix)}),fillPattern:(C,i)=>({u_matrix:new c.aN(C,i.u_matrix),u_image:new c.aL(C,i.u_image),u_texsize:new c.aQ(C,i.u_texsize),u_pixel_coord_upper:new c.aQ(C,i.u_pixel_coord_upper),u_pixel_coord_lower:new c.aQ(C,i.u_pixel_coord_lower),u_scale:new c.aP(C,i.u_scale),u_fade:new c.aM(C,i.u_fade)}),fillOutline:(C,i)=>({u_matrix:new c.aN(C,i.u_matrix),u_world:new c.aQ(C,i.u_world)}),fillOutlinePattern:(C,i)=>({u_matrix:new c.aN(C,i.u_matrix),u_world:new c.aQ(C,i.u_world),u_image:new c.aL(C,i.u_image),u_texsize:new c.aQ(C,i.u_texsize),u_pixel_coord_upper:new c.aQ(C,i.u_pixel_coord_upper),u_pixel_coord_lower:new c.aQ(C,i.u_pixel_coord_lower),u_scale:new c.aP(C,i.u_scale),u_fade:new c.aM(C,i.u_fade)}),circle:(C,i)=>({u_camera_to_center_distance:new c.aM(C,i.u_camera_to_center_distance),u_scale_with_map:new c.aL(C,i.u_scale_with_map),u_pitch_with_map:new c.aL(C,i.u_pitch_with_map),u_extrude_scale:new c.aQ(C,i.u_extrude_scale),u_device_pixel_ratio:new c.aM(C,i.u_device_pixel_ratio),u_matrix:new c.aN(C,i.u_matrix)}),collisionBox:(C,i)=>({u_matrix:new c.aN(C,i.u_matrix),u_camera_to_center_distance:new c.aM(C,i.u_camera_to_center_distance),u_pixels_to_tile_units:new c.aM(C,i.u_pixels_to_tile_units),u_extrude_scale:new c.aQ(C,i.u_extrude_scale),u_overscale_factor:new c.aM(C,i.u_overscale_factor)}),collisionCircle:(C,i)=>({u_matrix:new c.aN(C,i.u_matrix),u_inv_matrix:new c.aN(C,i.u_inv_matrix),u_camera_to_center_distance:new c.aM(C,i.u_camera_to_center_distance),u_viewport_size:new c.aQ(C,i.u_viewport_size)}),debug:(C,i)=>({u_color:new c.aR(C,i.u_color),u_matrix:new c.aN(C,i.u_matrix),u_overlay:new c.aL(C,i.u_overlay),u_overlay_scale:new c.aM(C,i.u_overlay_scale)}),clippingMask:(C,i)=>({u_matrix:new c.aN(C,i.u_matrix)}),heatmap:(C,i)=>({u_extrude_scale:new c.aM(C,i.u_extrude_scale),u_intensity:new c.aM(C,i.u_intensity),u_matrix:new c.aN(C,i.u_matrix)}),heatmapTexture:(C,i)=>({u_matrix:new c.aN(C,i.u_matrix),u_world:new c.aQ(C,i.u_world),u_image:new c.aL(C,i.u_image),u_color_ramp:new c.aL(C,i.u_color_ramp),u_opacity:new c.aM(C,i.u_opacity)}),hillshade:(C,i)=>({u_matrix:new c.aN(C,i.u_matrix),u_image:new c.aL(C,i.u_image),u_latrange:new c.aQ(C,i.u_latrange),u_light:new c.aQ(C,i.u_light),u_shadow:new c.aR(C,i.u_shadow),u_highlight:new c.aR(C,i.u_highlight),u_accent:new c.aR(C,i.u_accent)}),hillshadePrepare:(C,i)=>({u_matrix:new c.aN(C,i.u_matrix),u_image:new c.aL(C,i.u_image),u_dimension:new c.aQ(C,i.u_dimension),u_zoom:new c.aM(C,i.u_zoom),u_unpack:new c.aO(C,i.u_unpack)}),line:(C,i)=>({u_matrix:new c.aN(C,i.u_matrix),u_ratio:new c.aM(C,i.u_ratio),u_device_pixel_ratio:new c.aM(C,i.u_device_pixel_ratio),u_units_to_pixels:new c.aQ(C,i.u_units_to_pixels)}),lineGradient:(C,i)=>({u_matrix:new c.aN(C,i.u_matrix),u_ratio:new c.aM(C,i.u_ratio),u_device_pixel_ratio:new c.aM(C,i.u_device_pixel_ratio),u_units_to_pixels:new c.aQ(C,i.u_units_to_pixels),u_image:new c.aL(C,i.u_image),u_image_height:new c.aM(C,i.u_image_height)}),linePattern:(C,i)=>({u_matrix:new c.aN(C,i.u_matrix),u_texsize:new c.aQ(C,i.u_texsize),u_ratio:new c.aM(C,i.u_ratio),u_device_pixel_ratio:new c.aM(C,i.u_device_pixel_ratio),u_image:new c.aL(C,i.u_image),u_units_to_pixels:new c.aQ(C,i.u_units_to_pixels),u_scale:new c.aP(C,i.u_scale),u_fade:new c.aM(C,i.u_fade)}),lineSDF:(C,i)=>({u_matrix:new c.aN(C,i.u_matrix),u_ratio:new c.aM(C,i.u_ratio),u_device_pixel_ratio:new c.aM(C,i.u_device_pixel_ratio),u_units_to_pixels:new c.aQ(C,i.u_units_to_pixels),u_patternscale_a:new c.aQ(C,i.u_patternscale_a),u_patternscale_b:new c.aQ(C,i.u_patternscale_b),u_sdfgamma:new c.aM(C,i.u_sdfgamma),u_image:new c.aL(C,i.u_image),u_tex_y_a:new c.aM(C,i.u_tex_y_a),u_tex_y_b:new c.aM(C,i.u_tex_y_b),u_mix:new c.aM(C,i.u_mix)}),raster:(C,i)=>({u_matrix:new c.aN(C,i.u_matrix),u_tl_parent:new c.aQ(C,i.u_tl_parent),u_scale_parent:new c.aM(C,i.u_scale_parent),u_buffer_scale:new c.aM(C,i.u_buffer_scale),u_fade_t:new c.aM(C,i.u_fade_t),u_opacity:new c.aM(C,i.u_opacity),u_image0:new c.aL(C,i.u_image0),u_image1:new c.aL(C,i.u_image1),u_brightness_low:new c.aM(C,i.u_brightness_low),u_brightness_high:new c.aM(C,i.u_brightness_high),u_saturation_factor:new c.aM(C,i.u_saturation_factor),u_contrast_factor:new c.aM(C,i.u_contrast_factor),u_spin_weights:new c.aP(C,i.u_spin_weights)}),symbolIcon:(C,i)=>({u_is_size_zoom_constant:new c.aL(C,i.u_is_size_zoom_constant),u_is_size_feature_constant:new c.aL(C,i.u_is_size_feature_constant),u_size_t:new c.aM(C,i.u_size_t),u_size:new c.aM(C,i.u_size),u_camera_to_center_distance:new c.aM(C,i.u_camera_to_center_distance),u_pitch:new c.aM(C,i.u_pitch),u_rotate_symbol:new c.aL(C,i.u_rotate_symbol),u_aspect_ratio:new c.aM(C,i.u_aspect_ratio),u_fade_change:new c.aM(C,i.u_fade_change),u_matrix:new c.aN(C,i.u_matrix),u_label_plane_matrix:new c.aN(C,i.u_label_plane_matrix),u_coord_matrix:new c.aN(C,i.u_coord_matrix),u_is_text:new c.aL(C,i.u_is_text),u_pitch_with_map:new c.aL(C,i.u_pitch_with_map),u_texsize:new c.aQ(C,i.u_texsize),u_texture:new c.aL(C,i.u_texture)}),symbolSDF:(C,i)=>({u_is_size_zoom_constant:new c.aL(C,i.u_is_size_zoom_constant),u_is_size_feature_constant:new c.aL(C,i.u_is_size_feature_constant),u_size_t:new c.aM(C,i.u_size_t),u_size:new c.aM(C,i.u_size),u_camera_to_center_distance:new c.aM(C,i.u_camera_to_center_distance),u_pitch:new c.aM(C,i.u_pitch),u_rotate_symbol:new c.aL(C,i.u_rotate_symbol),u_aspect_ratio:new c.aM(C,i.u_aspect_ratio),u_fade_change:new c.aM(C,i.u_fade_change),u_matrix:new c.aN(C,i.u_matrix),u_label_plane_matrix:new c.aN(C,i.u_label_plane_matrix),u_coord_matrix:new c.aN(C,i.u_coord_matrix),u_is_text:new c.aL(C,i.u_is_text),u_pitch_with_map:new c.aL(C,i.u_pitch_with_map),u_texsize:new c.aQ(C,i.u_texsize),u_texture:new c.aL(C,i.u_texture),u_gamma_scale:new c.aM(C,i.u_gamma_scale),u_device_pixel_ratio:new c.aM(C,i.u_device_pixel_ratio),u_is_halo:new c.aL(C,i.u_is_halo)}),symbolTextAndIcon:(C,i)=>({u_is_size_zoom_constant:new c.aL(C,i.u_is_size_zoom_constant),u_is_size_feature_constant:new c.aL(C,i.u_is_size_feature_constant),u_size_t:new c.aM(C,i.u_size_t),u_size:new c.aM(C,i.u_size),u_camera_to_center_distance:new c.aM(C,i.u_camera_to_center_distance),u_pitch:new c.aM(C,i.u_pitch),u_rotate_symbol:new c.aL(C,i.u_rotate_symbol),u_aspect_ratio:new c.aM(C,i.u_aspect_ratio),u_fade_change:new c.aM(C,i.u_fade_change),u_matrix:new c.aN(C,i.u_matrix),u_label_plane_matrix:new c.aN(C,i.u_label_plane_matrix),u_coord_matrix:new c.aN(C,i.u_coord_matrix),u_is_text:new c.aL(C,i.u_is_text),u_pitch_with_map:new c.aL(C,i.u_pitch_with_map),u_texsize:new c.aQ(C,i.u_texsize),u_texsize_icon:new c.aQ(C,i.u_texsize_icon),u_texture:new c.aL(C,i.u_texture),u_texture_icon:new c.aL(C,i.u_texture_icon),u_gamma_scale:new c.aM(C,i.u_gamma_scale),u_device_pixel_ratio:new c.aM(C,i.u_device_pixel_ratio),u_is_halo:new c.aL(C,i.u_is_halo)}),background:(C,i)=>({u_matrix:new c.aN(C,i.u_matrix),u_opacity:new c.aM(C,i.u_opacity),u_color:new c.aR(C,i.u_color)}),backgroundPattern:(C,i)=>({u_matrix:new c.aN(C,i.u_matrix),u_opacity:new c.aM(C,i.u_opacity),u_image:new c.aL(C,i.u_image),u_pattern_tl_a:new c.aQ(C,i.u_pattern_tl_a),u_pattern_br_a:new c.aQ(C,i.u_pattern_br_a),u_pattern_tl_b:new c.aQ(C,i.u_pattern_tl_b),u_pattern_br_b:new c.aQ(C,i.u_pattern_br_b),u_texsize:new c.aQ(C,i.u_texsize),u_mix:new c.aM(C,i.u_mix),u_pattern_size_a:new c.aQ(C,i.u_pattern_size_a),u_pattern_size_b:new c.aQ(C,i.u_pattern_size_b),u_scale_a:new c.aM(C,i.u_scale_a),u_scale_b:new c.aM(C,i.u_scale_b),u_pixel_coord_upper:new c.aQ(C,i.u_pixel_coord_upper),u_pixel_coord_lower:new c.aQ(C,i.u_pixel_coord_lower),u_tile_units_to_pixels:new c.aM(C,i.u_tile_units_to_pixels)}),terrain:(C,i)=>({u_matrix:new c.aN(C,i.u_matrix),u_texture:new c.aL(C,i.u_texture),u_ele_delta:new c.aM(C,i.u_ele_delta)}),terrainDepth:(C,i)=>({u_matrix:new c.aN(C,i.u_matrix),u_ele_delta:new c.aM(C,i.u_ele_delta)}),terrainCoords:(C,i)=>({u_matrix:new c.aN(C,i.u_matrix),u_texture:new c.aL(C,i.u_texture),u_terrain_coords_id:new c.aM(C,i.u_terrain_coords_id),u_ele_delta:new c.aM(C,i.u_ele_delta)})};class ao{constructor(i,h,b){this.context=i;const E=i.gl;this.buffer=E.createBuffer(),this.dynamicDraw=!!b,this.context.unbindVAO(),i.bindElementBuffer.set(this.buffer),E.bufferData(E.ELEMENT_ARRAY_BUFFER,h.arrayBuffer,this.dynamicDraw?E.DYNAMIC_DRAW:E.STATIC_DRAW),this.dynamicDraw||delete h.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(i){const h=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),h.bufferSubData(h.ELEMENT_ARRAY_BUFFER,0,i.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Bo={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class ga{constructor(i,h,b,E){this.length=h.length,this.attributes=b,this.itemSize=h.bytesPerElement,this.dynamicDraw=E,this.context=i;const B=i.gl;this.buffer=B.createBuffer(),i.bindVertexBuffer.set(this.buffer),B.bufferData(B.ARRAY_BUFFER,h.arrayBuffer,this.dynamicDraw?B.DYNAMIC_DRAW:B.STATIC_DRAW),this.dynamicDraw||delete h.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(i){if(i.length!==this.length)throw new Error(`Length of new data is ${i.length}, which doesn't match current length of ${this.length}`);const h=this.context.gl;this.bind(),h.bufferSubData(h.ARRAY_BUFFER,0,i.arrayBuffer)}enableAttributes(i,h){for(let b=0;b<this.attributes.length;b++){const E=h.attributes[this.attributes[b].name];E!==void 0&&i.enableVertexAttribArray(E)}}setVertexAttribPointers(i,h,b){for(let E=0;E<this.attributes.length;E++){const B=this.attributes[E],F=h.attributes[B.name];F!==void 0&&i.vertexAttribPointer(F,B.components,i[Bo[B.type]],!1,this.itemSize,B.offset+this.itemSize*(b||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Ti=new WeakMap;function Rn(C){var i;if(Ti.has(C))return Ti.get(C);{const h=(i=C.getParameter(C.VERSION))===null||i===void 0?void 0:i.startsWith("WebGL 2.0");return Ti.set(C,h),h}}class Hn{constructor(i){this.gl=i.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(i){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class gi extends Hn{getDefault(){return c.aT.transparent}set(i){const h=this.current;(i.r!==h.r||i.g!==h.g||i.b!==h.b||i.a!==h.a||this.dirty)&&(this.gl.clearColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class fr extends Hn{getDefault(){return 1}set(i){(i!==this.current||this.dirty)&&(this.gl.clearDepth(i),this.current=i,this.dirty=!1)}}class Fi extends Hn{getDefault(){return 0}set(i){(i!==this.current||this.dirty)&&(this.gl.clearStencil(i),this.current=i,this.dirty=!1)}}class qs extends Hn{getDefault(){return[!0,!0,!0,!0]}set(i){const h=this.current;(i[0]!==h[0]||i[1]!==h[1]||i[2]!==h[2]||i[3]!==h[3]||this.dirty)&&(this.gl.colorMask(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class Do extends Hn{getDefault(){return!0}set(i){(i!==this.current||this.dirty)&&(this.gl.depthMask(i),this.current=i,this.dirty=!1)}}class ss extends Hn{getDefault(){return 255}set(i){(i!==this.current||this.dirty)&&(this.gl.stencilMask(i),this.current=i,this.dirty=!1)}}class Po extends Hn{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(i){const h=this.current;(i.func!==h.func||i.ref!==h.ref||i.mask!==h.mask||this.dirty)&&(this.gl.stencilFunc(i.func,i.ref,i.mask),this.current=i,this.dirty=!1)}}class Xi extends Hn{getDefault(){const i=this.gl;return[i.KEEP,i.KEEP,i.KEEP]}set(i){const h=this.current;(i[0]!==h[0]||i[1]!==h[1]||i[2]!==h[2]||this.dirty)&&(this.gl.stencilOp(i[0],i[1],i[2]),this.current=i,this.dirty=!1)}}class lo extends Hn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const h=this.gl;i?h.enable(h.STENCIL_TEST):h.disable(h.STENCIL_TEST),this.current=i,this.dirty=!1}}class NA extends Hn{getDefault(){return[0,1]}set(i){const h=this.current;(i[0]!==h[0]||i[1]!==h[1]||this.dirty)&&(this.gl.depthRange(i[0],i[1]),this.current=i,this.dirty=!1)}}class os extends Hn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const h=this.gl;i?h.enable(h.DEPTH_TEST):h.disable(h.DEPTH_TEST),this.current=i,this.dirty=!1}}class zr extends Hn{getDefault(){return this.gl.LESS}set(i){(i!==this.current||this.dirty)&&(this.gl.depthFunc(i),this.current=i,this.dirty=!1)}}class dr extends Hn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const h=this.gl;i?h.enable(h.BLEND):h.disable(h.BLEND),this.current=i,this.dirty=!1}}class _a extends Hn{getDefault(){const i=this.gl;return[i.ONE,i.ZERO]}set(i){const h=this.current;(i[0]!==h[0]||i[1]!==h[1]||this.dirty)&&(this.gl.blendFunc(i[0],i[1]),this.current=i,this.dirty=!1)}}class VA extends Hn{getDefault(){return c.aT.transparent}set(i){const h=this.current;(i.r!==h.r||i.g!==h.g||i.b!==h.b||i.a!==h.a||this.dirty)&&(this.gl.blendColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class as extends Hn{getDefault(){return this.gl.FUNC_ADD}set(i){(i!==this.current||this.dirty)&&(this.gl.blendEquation(i),this.current=i,this.dirty=!1)}}class Ss extends Hn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const h=this.gl;i?h.enable(h.CULL_FACE):h.disable(h.CULL_FACE),this.current=i,this.dirty=!1}}class ol extends Hn{getDefault(){return this.gl.BACK}set(i){(i!==this.current||this.dirty)&&(this.gl.cullFace(i),this.current=i,this.dirty=!1)}}class Na extends Hn{getDefault(){return this.gl.CCW}set(i){(i!==this.current||this.dirty)&&(this.gl.frontFace(i),this.current=i,this.dirty=!1)}}class Xr extends Hn{getDefault(){return null}set(i){(i!==this.current||this.dirty)&&(this.gl.useProgram(i),this.current=i,this.dirty=!1)}}class su extends Hn{getDefault(){return this.gl.TEXTURE0}set(i){(i!==this.current||this.dirty)&&(this.gl.activeTexture(i),this.current=i,this.dirty=!1)}}class aA extends Hn{getDefault(){const i=this.gl;return[0,0,i.drawingBufferWidth,i.drawingBufferHeight]}set(i){const h=this.current;(i[0]!==h[0]||i[1]!==h[1]||i[2]!==h[2]||i[3]!==h[3]||this.dirty)&&(this.gl.viewport(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class Cs extends Hn{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const h=this.gl;h.bindFramebuffer(h.FRAMEBUFFER,i),this.current=i,this.dirty=!1}}class Va extends Hn{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const h=this.gl;h.bindRenderbuffer(h.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class UA extends Hn{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const h=this.gl;h.bindTexture(h.TEXTURE_2D,i),this.current=i,this.dirty=!1}}class ls extends Hn{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const h=this.gl;h.bindBuffer(h.ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class Is extends Hn{getDefault(){return null}set(i){const h=this.gl;h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class Ki extends Hn{getDefault(){return null}set(i){var h;if(i===this.current&&!this.dirty)return;const b=this.gl;Rn(b)?b.bindVertexArray(i):(h=b.getExtension("OES_vertex_array_object"))===null||h===void 0||h.bindVertexArrayOES(i),this.current=i,this.dirty=!1}}class QA extends Hn{getDefault(){return 4}set(i){if(i===this.current&&!this.dirty)return;const h=this.gl;h.pixelStorei(h.UNPACK_ALIGNMENT,i),this.current=i,this.dirty=!1}}class us extends Hn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const h=this.gl;h.pixelStorei(h.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i),this.current=i,this.dirty=!1}}class zo extends Hn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const h=this.gl;h.pixelStorei(h.UNPACK_FLIP_Y_WEBGL,i),this.current=i,this.dirty=!1}}class Lr extends Hn{constructor(i,h){super(i),this.context=i,this.parent=h}getDefault(){return null}}class Lo extends Lr{setDirty(){this.dirty=!0}set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const h=this.gl;h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,i,0),this.current=i,this.dirty=!1}}class Ro extends Lr{set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const h=this.gl;h.framebufferRenderbuffer(h.FRAMEBUFFER,h.DEPTH_ATTACHMENT,h.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class al extends Lr{set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const h=this.gl;h.framebufferRenderbuffer(h.FRAMEBUFFER,h.DEPTH_STENCIL_ATTACHMENT,h.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class ai{constructor(i,h,b,E,B){this.context=i,this.width=h,this.height=b;const F=i.gl,A=this.framebuffer=F.createFramebuffer();if(this.colorAttachment=new Lo(i,A),E)this.depthAttachment=B?new al(i,A):new Ro(i,A);else if(B)throw new Error("Stencil cannot be setted without depth");if(F.checkFramebufferStatus(F.FRAMEBUFFER)!==F.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const i=this.context.gl,h=this.colorAttachment.get();if(h&&i.deleteTexture(h),this.depthAttachment){const b=this.depthAttachment.get();b&&i.deleteRenderbuffer(b)}i.deleteFramebuffer(this.framebuffer)}}class Qi{constructor(i,h,b){this.blendFunction=i,this.blendColor=h,this.mask=b}}Qi.Replace=[1,0],Qi.disabled=new Qi(Qi.Replace,c.aT.transparent,[!1,!1,!1,!1]),Qi.unblended=new Qi(Qi.Replace,c.aT.transparent,[!0,!0,!0,!0]),Qi.alphaBlended=new Qi([1,771],c.aT.transparent,[!0,!0,!0,!0]);class Zs{constructor(i){var h,b;if(this.gl=i,this.clearColor=new gi(this),this.clearDepth=new fr(this),this.clearStencil=new Fi(this),this.colorMask=new qs(this),this.depthMask=new Do(this),this.stencilMask=new ss(this),this.stencilFunc=new Po(this),this.stencilOp=new Xi(this),this.stencilTest=new lo(this),this.depthRange=new NA(this),this.depthTest=new os(this),this.depthFunc=new zr(this),this.blend=new dr(this),this.blendFunc=new _a(this),this.blendColor=new VA(this),this.blendEquation=new as(this),this.cullFace=new Ss(this),this.cullFaceSide=new ol(this),this.frontFace=new Na(this),this.program=new Xr(this),this.activeTexture=new su(this),this.viewport=new aA(this),this.bindFramebuffer=new Cs(this),this.bindRenderbuffer=new Va(this),this.bindTexture=new UA(this),this.bindVertexBuffer=new ls(this),this.bindElementBuffer=new Is(this),this.bindVertexArray=new Ki(this),this.pixelStoreUnpack=new QA(this),this.pixelStoreUnpackPremultiplyAlpha=new us(this),this.pixelStoreUnpackFlipY=new zo(this),this.extTextureFilterAnisotropic=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=i.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE),Rn(i)){this.HALF_FLOAT=i.HALF_FLOAT;const E=i.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(h=i.RGBA16F)!==null&&h!==void 0?h:E==null?void 0:E.RGBA16F_EXT,this.RGB16F=(b=i.RGB16F)!==null&&b!==void 0?b:E==null?void 0:E.RGB16F_EXT,i.getExtension("EXT_color_buffer_float")}else{i.getExtension("EXT_color_buffer_half_float"),i.getExtension("OES_texture_half_float_linear");const E=i.getExtension("OES_texture_half_float");this.HALF_FLOAT=E==null?void 0:E.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(i,h){return new ao(this,i,h)}createVertexBuffer(i,h,b){return new ga(this,i,h,b)}createRenderbuffer(i,h,b){const E=this.gl,B=E.createRenderbuffer();return this.bindRenderbuffer.set(B),E.renderbufferStorage(E.RENDERBUFFER,i,h,b),this.bindRenderbuffer.set(null),B}createFramebuffer(i,h,b,E){return new ai(this,i,h,b,E)}clear({color:i,depth:h,stencil:b}){const E=this.gl;let B=0;i&&(B|=E.COLOR_BUFFER_BIT,this.clearColor.set(i),this.colorMask.set([!0,!0,!0,!0])),h!==void 0&&(B|=E.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(h),this.depthMask.set(!0)),b!==void 0&&(B|=E.STENCIL_BUFFER_BIT,this.clearStencil.set(b),this.stencilMask.set(255)),E.clear(B)}setCullFace(i){i.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(i.mode),this.frontFace.set(i.frontFace))}setDepthMode(i){i.func!==this.gl.ALWAYS||i.mask?(this.depthTest.set(!0),this.depthFunc.set(i.func),this.depthMask.set(i.mask),this.depthRange.set(i.range)):this.depthTest.set(!1)}setStencilMode(i){i.test.func!==this.gl.ALWAYS||i.mask?(this.stencilTest.set(!0),this.stencilMask.set(i.mask),this.stencilOp.set([i.fail,i.depthFail,i.pass]),this.stencilFunc.set({func:i.test.func,ref:i.ref,mask:i.test.mask})):this.stencilTest.set(!1)}setColorMode(i){c.aG(i.blendFunction,Qi.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(i.blendFunction),this.blendColor.set(i.blendColor)),this.colorMask.set(i.mask)}createVertexArray(){var i;return Rn(this.gl)?this.gl.createVertexArray():(i=this.gl.getExtension("OES_vertex_array_object"))===null||i===void 0?void 0:i.createVertexArrayOES()}deleteVertexArray(i){var h;return Rn(this.gl)?this.gl.deleteVertexArray(i):(h=this.gl.getExtension("OES_vertex_array_object"))===null||h===void 0?void 0:h.deleteVertexArrayOES(i)}unbindVAO(){this.bindVertexArray.set(null)}}class ni{constructor(i,h,b){this.func=i,this.mask=h,this.range=b}}ni.ReadOnly=!1,ni.ReadWrite=!0,ni.disabled=new ni(519,ni.ReadOnly,[0,1]);const dA=7680;class Ji{constructor(i,h,b,E,B,F){this.test=i,this.ref=h,this.mask=b,this.fail=E,this.depthFail=B,this.pass=F}}Ji.disabled=new Ji({func:519,mask:0},0,0,dA,dA,dA);class Bi{constructor(i,h,b){this.enable=i,this.mode=h,this.frontFace=b}}let pA;function ll(C,i,h,b,E,B,F){const A=C.context,s=A.gl,l=C.useProgram("collisionBox"),f=[];let m=0,k=0;for(let Ae=0;Ae<b.length;Ae++){const ce=b[Ae],fe=i.getTile(ce),ve=fe.getBucket(h);if(!ve)continue;let Ne=ce.posMatrix;E[0]===0&&E[1]===0||(Ne=C.translatePosMatrix(ce.posMatrix,fe,E,B));const qe=F?ve.textCollisionBox:ve.iconCollisionBox,Pe=ve.collisionCircleArray;if(Pe.length>0){const Ve=c.Z(),Ue=Ne;c.aU(Ve,ve.placementInvProjMatrix,C.transform.glCoordMatrix),c.aU(Ve,Ve,ve.placementViewportMatrix),f.push({circleArray:Pe,circleOffset:k,transform:Ue,invTransform:Ve,coord:ce}),m+=Pe.length/4,k=m}qe&&l.draw(A,s.LINES,ni.disabled,Ji.disabled,C.colorModeForRenderPass(),Bi.disabled,Yi(Ne,C.transform,fe),C.style.map.terrain&&C.style.map.terrain.getTerrainData(ce),h.id,qe.layoutVertexBuffer,qe.indexBuffer,qe.segments,null,C.transform.zoom,null,null,qe.collisionVertexBuffer)}if(!F||!f.length)return;const I=C.useProgram("collisionCircle"),D=new c.aV;D.resize(4*m),D._trim();let Q=0;for(const Ae of f)for(let ce=0;ce<Ae.circleArray.length/4;ce++){const fe=4*ce,ve=Ae.circleArray[fe+0],Ne=Ae.circleArray[fe+1],qe=Ae.circleArray[fe+2],Pe=Ae.circleArray[fe+3];D.emplace(Q++,ve,Ne,qe,Pe,0),D.emplace(Q++,ve,Ne,qe,Pe,1),D.emplace(Q++,ve,Ne,qe,Pe,2),D.emplace(Q++,ve,Ne,qe,Pe,3)}(!pA||pA.length<2*m)&&(pA=function(Ae){const ce=2*Ae,fe=new c.aX;fe.resize(ce),fe._trim();for(let ve=0;ve<ce;ve++){const Ne=6*ve;fe.uint16[Ne+0]=4*ve+0,fe.uint16[Ne+1]=4*ve+1,fe.uint16[Ne+2]=4*ve+2,fe.uint16[Ne+3]=4*ve+2,fe.uint16[Ne+4]=4*ve+3,fe.uint16[Ne+5]=4*ve+0}return fe}(m));const Z=A.createIndexBuffer(pA,!0),X=A.createVertexBuffer(D,c.aW.members,!0);for(const Ae of f){const ce={u_matrix:Ae.transform,u_inv_matrix:Ae.invTransform,u_camera_to_center_distance:(ie=C.transform).cameraToCenterDistance,u_viewport_size:[ie.width,ie.height]};I.draw(A,s.TRIANGLES,ni.disabled,Ji.disabled,C.colorModeForRenderPass(),Bi.disabled,ce,C.style.map.terrain&&C.style.map.terrain.getTerrainData(Ae.coord),h.id,X,Z,c.S.simpleSegment(0,2*Ae.circleOffset,Ae.circleArray.length,Ae.circleArray.length/2),null,C.transform.zoom,null,null,null)}var ie;X.destroy(),Z.destroy()}Bi.disabled=new Bi(!1,1029,2305),Bi.backCCW=new Bi(!0,1029,2305);const Ua=c.ao(new Float32Array(16));function Hs(C,i,h,b,E,B){const{horizontalAlign:F,verticalAlign:A}=c.au(C);return new c.P((-(F-.5)*i/E+b[0])*B,(-(A-.5)*h/E+b[1])*B)}function $s(C,i,h,b,E,B,F,A,s,l,f){const m=C.text.placedSymbolArray,k=C.text.dynamicLayoutVertexArray,I=C.icon.dynamicLayoutVertexArray,D={};k.clear();for(let Q=0;Q<m.length;Q++){const Z=m.get(Q),X=Z.hidden||!Z.crossTileID||C.allowVerticalPlacement&&!Z.placedOrientation?null:b[Z.crossTileID];if(X){const ie=new c.P(Z.anchorX,Z.anchorY),Ae=Wi(ie,h?F:B,f),ce=Ms(E.cameraToCenterDistance,Ae.signedDistanceFromCamera);let fe=c.aj(C.textSizeData,s,Z)*ce/c.ap;h&&(fe*=C.tilePixelRatio/A);const{width:ve,height:Ne,anchor:qe,textOffset:Pe,textBoxScale:Ve}=X,Ue=Hs(qe,ve,Ne,Pe,Ve,fe),Mt=h?Wi(ie.add(Ue),B,f).point:Ae.point.add(i?Ue.rotate(-E.angle):Ue),ht=C.allowVerticalPlacement&&Z.placedOrientation===c.ai.vertical?Math.PI/2:0;for(let _t=0;_t<Z.numGlyphs;_t++)c.ak(k,Mt,ht);l&&Z.associatedIconIndex>=0&&(D[Z.associatedIconIndex]={shiftedAnchor:Mt,angle:ht})}else we(Z.numGlyphs,k)}if(l){I.clear();const Q=C.icon.placedSymbolArray;for(let Z=0;Z<Q.length;Z++){const X=Q.get(Z);if(X.hidden)we(X.numGlyphs,I);else{const ie=D[Z];if(ie)for(let Ae=0;Ae<X.numGlyphs;Ae++)c.ak(I,ie.shiftedAnchor,ie.angle);else we(X.numGlyphs,I)}}C.icon.dynamicLayoutVertexBuffer.updateData(I)}C.text.dynamicLayoutVertexBuffer.updateData(k)}function Fo(C,i,h){return h.iconsInText&&i?"symbolTextAndIcon":C?"symbolSDF":"symbolIcon"}function Si(C,i,h,b,E,B,F,A,s,l,f,m){const k=C.context,I=k.gl,D=C.transform,Q=A==="map",Z=s==="map",X=A!=="viewport"&&h.layout.get("symbol-placement")!=="point",ie=Q&&!Z&&!X,Ae=!h.layout.get("symbol-sort-key").isConstant();let ce=!1;const fe=C.depthModeForSublayer(0,ni.ReadOnly),ve=h._unevaluatedLayout.hasValue("text-variable-anchor")||h._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Ne=[];for(const qe of b){const Pe=i.getTile(qe),Ve=Pe.getBucket(h);if(!Ve)continue;const Ue=E?Ve.text:Ve.icon;if(!Ue||!Ue.segments.get().length||!Ue.hasVisibleVertices)continue;const Mt=Ue.programConfigurations.get(h.id),ht=E||Ve.sdfIcons,_t=E?Ve.textSizeData:Ve.iconSizeData,gt=Z||D.pitch!==0,Mn=C.useProgram(Fo(ht,E,Ve),Mt),cn=c.ah(_t,D.zoom),Yt=C.style.map.terrain&&C.style.map.terrain.getTerrainData(qe);let tn,fn,an,Wn,bn=[0,0],Nn=null;if(E)fn=Pe.glyphAtlasTexture,an=I.LINEAR,tn=Pe.glyphAtlasTexture.size,Ve.iconsInText&&(bn=Pe.imageAtlasTexture.size,Nn=Pe.imageAtlasTexture,Wn=gt||C.options.rotating||C.options.zooming||_t.kind==="composite"||_t.kind==="camera"?I.LINEAR:I.NEAREST);else{const vr=h.layout.get("icon-size").constantOr(0)!==1||Ve.iconsNeedLinear;fn=Pe.imageAtlasTexture,an=ht||C.options.rotating||C.options.zooming||vr||gt?I.LINEAR:I.NEAREST,tn=Pe.imageAtlasTexture.size}const zi=Ye(Pe,1,C.transform.zoom),bi=Nt(qe.posMatrix,Z,Q,C.transform,zi),mo=bA(qe.posMatrix,Z,Q,C.transform,zi),Zo=ve&&Ve.hasTextData(),go=h.layout.get("icon-text-fit")!=="none"&&Zo&&Ve.hasIconData();if(X){const vr=C.style.map.terrain?($r,Sr)=>C.style.map.terrain.getElevation(qe,$r,Sr):null,Nr=h.layout.get("text-rotation-alignment")==="map";Ut(Ve,qe.posMatrix,C,E,bi,mo,Z,l,Nr,vr)}const dl=C.translatePosMatrix(qe.posMatrix,Pe,B,F),pl=X||E&&ve||go?Ua:bi,Ui=C.translatePosMatrix(mo,Pe,B,F,!0),nA=ht&&h.paint.get(E?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let BA;BA=ht?Ve.iconsInText?Ts(_t.kind,cn,ie,Z,C,dl,pl,Ui,tn,bn):Io(_t.kind,cn,ie,Z,C,dl,pl,Ui,E,tn,!0):pa(_t.kind,cn,ie,Z,C,dl,pl,Ui,E,tn);const DA={program:Mn,buffers:Ue,uniformValues:BA,atlasTexture:fn,atlasTextureIcon:Nn,atlasInterpolation:an,atlasInterpolationIcon:Wn,isSDF:ht,hasHalo:nA};if(Ae&&Ve.canOverlap){ce=!0;const vr=Ue.segments.get();for(const Nr of vr)Ne.push({segments:new c.S([Nr]),sortKey:Nr.sortKey,state:DA,terrainData:Yt})}else Ne.push({segments:Ue.segments,sortKey:0,state:DA,terrainData:Yt})}ce&&Ne.sort((qe,Pe)=>qe.sortKey-Pe.sortKey);for(const qe of Ne){const Pe=qe.state;if(k.activeTexture.set(I.TEXTURE0),Pe.atlasTexture.bind(Pe.atlasInterpolation,I.CLAMP_TO_EDGE),Pe.atlasTextureIcon&&(k.activeTexture.set(I.TEXTURE1),Pe.atlasTextureIcon&&Pe.atlasTextureIcon.bind(Pe.atlasInterpolationIcon,I.CLAMP_TO_EDGE)),Pe.isSDF){const Ve=Pe.uniformValues;Pe.hasHalo&&(Ve.u_is_halo=1,Kr(Pe.buffers,qe.segments,h,C,Pe.program,fe,f,m,Ve,qe.terrainData)),Ve.u_is_halo=0}Kr(Pe.buffers,qe.segments,h,C,Pe.program,fe,f,m,Pe.uniformValues,qe.terrainData)}}function Kr(C,i,h,b,E,B,F,A,s,l){const f=b.context;E.draw(f,f.gl.TRIANGLES,B,F,A,Bi.disabled,s,l,h.id,C.layoutVertexBuffer,C.indexBuffer,i,h.paint,b.transform.zoom,C.programConfigurations.get(h.id),C.dynamicLayoutVertexBuffer,C.opacityVertexBuffer)}function js(C,i,h,b,E){if(!h||!b||!b.imageAtlas)return;const B=b.imageAtlas.patternPositions;let F=B[h.to.toString()],A=B[h.from.toString()];if(!F&&A&&(F=A),!A&&F&&(A=F),!F||!A){const s=E.getPaintProperty(i);F=B[s],A=B[s]}F&&A&&C.setConstantPatternPositions(F,A)}function cs(C,i,h,b,E,B,F){const A=C.context.gl,s="fill-pattern",l=h.paint.get(s),f=l&&l.constantOr(1),m=h.getCrossfadeParameters();let k,I,D,Q,Z;F?(I=f&&!h.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",k=A.LINES):(I=f?"fillPattern":"fill",k=A.TRIANGLES);const X=l.constantOr(null);for(const ie of b){const Ae=i.getTile(ie);if(f&&!Ae.patternsLoaded())continue;const ce=Ae.getBucket(h);if(!ce)continue;const fe=ce.programConfigurations.get(h.id),ve=C.useProgram(I,fe),Ne=C.style.map.terrain&&C.style.map.terrain.getTerrainData(ie);f&&(C.context.activeTexture.set(A.TEXTURE0),Ae.imageAtlasTexture.bind(A.LINEAR,A.CLAMP_TO_EDGE),fe.updatePaintBuffers(m)),js(fe,s,X,Ae,h);const qe=Ne?ie:null,Pe=C.translatePosMatrix(qe?qe.posMatrix:ie.posMatrix,Ae,h.paint.get("fill-translate"),h.paint.get("fill-translate-anchor"));if(F){Q=ce.indexBuffer2,Z=ce.segments2;const Ve=[A.drawingBufferWidth,A.drawingBufferHeight];D=I==="fillOutlinePattern"&&f?Hi(Pe,C,m,Ae,Ve):Yr(Pe,Ve)}else Q=ce.indexBuffer,Z=ce.segments,D=f?Co(Pe,C,m,Ae):La(Pe);ve.draw(C.context,k,E,C.stencilModeForClipping(ie),B,Bi.disabled,D,Ne,h.id,ce.layoutVertexBuffer,Q,Z,h.paint,C.transform.zoom,fe)}}function Ws(C,i,h,b,E,B,F){const A=C.context,s=A.gl,l="fill-extrusion-pattern",f=h.paint.get(l),m=f.constantOr(1),k=h.getCrossfadeParameters(),I=h.paint.get("fill-extrusion-opacity"),D=f.constantOr(null);for(const Q of b){const Z=i.getTile(Q),X=Z.getBucket(h);if(!X)continue;const ie=C.style.map.terrain&&C.style.map.terrain.getTerrainData(Q),Ae=X.programConfigurations.get(h.id),ce=C.useProgram(m?"fillExtrusionPattern":"fillExtrusion",Ae);m&&(C.context.activeTexture.set(s.TEXTURE0),Z.imageAtlasTexture.bind(s.LINEAR,s.CLAMP_TO_EDGE),Ae.updatePaintBuffers(k)),js(Ae,l,D,Z,h);const fe=C.translatePosMatrix(Q.posMatrix,Z,h.paint.get("fill-extrusion-translate"),h.paint.get("fill-extrusion-translate-anchor")),ve=h.paint.get("fill-extrusion-vertical-gradient"),Ne=m?As(fe,C,ve,I,Q,k,Z):za(fe,C,ve,I);ce.draw(A,A.gl.TRIANGLES,E,B,F,Bi.backCCW,Ne,ie,h.id,X.layoutVertexBuffer,X.indexBuffer,X.segments,h.paint,C.transform.zoom,Ae,C.style.map.terrain&&X.centroidVertexBuffer)}}function Nl(C,i,h,b,E,B,F){const A=C.context,s=A.gl,l=h.fbo;if(!l)return;const f=C.useProgram("hillshade"),m=C.style.map.terrain&&C.style.map.terrain.getTerrainData(i);A.activeTexture.set(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,l.colorAttachment.get()),f.draw(A,s.TRIANGLES,E,B,F,Bi.disabled,((k,I,D,Q)=>{const Z=D.paint.get("hillshade-shadow-color"),X=D.paint.get("hillshade-highlight-color"),ie=D.paint.get("hillshade-accent-color");let Ae=D.paint.get("hillshade-illumination-direction")*(Math.PI/180);D.paint.get("hillshade-illumination-anchor")==="viewport"&&(Ae-=k.transform.angle);const ce=!k.options.moving;return{u_matrix:Q?Q.posMatrix:k.transform.calculatePosMatrix(I.tileID.toUnwrapped(),ce),u_image:0,u_latrange:fa(0,I.tileID),u_light:[D.paint.get("hillshade-exaggeration"),Ae],u_shadow:Z,u_highlight:X,u_accent:ie}})(C,h,b,m?i:null),m,b.id,C.rasterBoundsBuffer,C.quadTriangleIndexBuffer,C.rasterBoundsSegments)}function qr(C,i,h,b,E,B){const F=C.context,A=F.gl,s=i.dem;if(s&&s.data){const l=s.dim,f=s.stride,m=s.getPixels();if(F.activeTexture.set(A.TEXTURE1),F.pixelStoreUnpackPremultiplyAlpha.set(!1),i.demTexture=i.demTexture||C.getTileTexture(f),i.demTexture){const I=i.demTexture;I.update(m,{premultiply:!1}),I.bind(A.NEAREST,A.CLAMP_TO_EDGE)}else i.demTexture=new Zt(F,m,A.RGBA,{premultiply:!1}),i.demTexture.bind(A.NEAREST,A.CLAMP_TO_EDGE);F.activeTexture.set(A.TEXTURE0);let k=i.fbo;if(!k){const I=new Zt(F,{width:l,height:l,data:null},A.RGBA);I.bind(A.LINEAR,A.CLAMP_TO_EDGE),k=i.fbo=F.createFramebuffer(l,l,!0,!1),k.colorAttachment.set(I.texture)}F.bindFramebuffer.set(k.framebuffer),F.viewport.set([0,0,l,l]),C.useProgram("hillshadePrepare").draw(F,A.TRIANGLES,b,E,B,Bi.disabled,((I,D)=>{const Q=D.stride,Z=c.Z();return c.aS(Z,0,c.N,-c.N,0,0,1),c.$(Z,Z,[0,-c.N,0]),{u_matrix:Z,u_image:1,u_dimension:[Q,Q],u_zoom:I.overscaledZ,u_unpack:D.getUnpackVector()}})(i.tileID,s),null,h.id,C.rasterBoundsBuffer,C.quadTriangleIndexBuffer,C.rasterBoundsSegments),i.needsHillshadePrepare=!1}}function Mr(C,i,h,b,E,B){const F=b.paint.get("raster-fade-duration");if(!B&&F>0){const A=c.h.now(),s=(A-C.timeAdded)/F,l=i?(A-i.timeAdded)/F:-1,f=h.getSource(),m=E.coveringZoomLevel({tileSize:f.tileSize,roundZoom:f.roundZoom}),k=!i||Math.abs(i.tileID.overscaledZ-m)>Math.abs(C.tileID.overscaledZ-m),I=k&&C.refreshedUponExpiration?1:c.ad(k?s:1-l,0,1);return C.refreshedUponExpiration&&s>=1&&(C.refreshedUponExpiration=!1),i?{opacity:1,mix:1-I}:{opacity:I,mix:0}}return{opacity:1,mix:0}}const Jr=new c.aT(1,0,0,1),Oo=new c.aT(0,1,0,1),Bs=new c.aT(0,0,1,1),uo=new c.aT(1,0,1,1),Qa=new c.aT(0,1,1,1);function Rr(C,i,h,b){mA(C,0,i+h/2,C.transform.width,h,b)}function Tr(C,i,h,b){mA(C,i-h/2,0,h,C.transform.height,b)}function mA(C,i,h,b,E,B){const F=C.context,A=F.gl;A.enable(A.SCISSOR_TEST),A.scissor(i*C.pixelRatio,h*C.pixelRatio,b*C.pixelRatio,E*C.pixelRatio),F.clear({color:B}),A.disable(A.SCISSOR_TEST)}function GA(C,i,h){const b=C.context,E=b.gl,B=h.posMatrix,F=C.useProgram("debug"),A=ni.disabled,s=Ji.disabled,l=C.colorModeForRenderPass(),f="$debug",m=C.style.map.terrain&&C.style.map.terrain.getTerrainData(h);b.activeTexture.set(E.TEXTURE0);const k=i.getTileByID(h.key).latestRawTileData,I=Math.floor((k&&k.byteLength||0)/1024),D=i.getTile(h).tileSize,Q=512/Math.min(D,512)*(h.overscaledZ/C.transform.zoom)*.5;let Z=h.canonical.toString();h.overscaledZ!==h.canonical.z&&(Z+=` => ${h.overscaledZ}`),function(X,ie){X.initDebugOverlayCanvas();const Ae=X.debugOverlayCanvas,ce=X.context.gl,fe=X.debugOverlayCanvas.getContext("2d");fe.clearRect(0,0,Ae.width,Ae.height),fe.shadowColor="white",fe.shadowBlur=2,fe.lineWidth=1.5,fe.strokeStyle="white",fe.textBaseline="top",fe.font="bold 36px Open Sans, sans-serif",fe.fillText(ie,5,5),fe.strokeText(ie,5,5),X.debugOverlayTexture.update(Ae),X.debugOverlayTexture.bind(ce.LINEAR,ce.CLAMP_TO_EDGE)}(C,`${Z} ${I}kB`),F.draw(b,E.TRIANGLES,A,s,Qi.alphaBlended,Bi.disabled,Qs(B,c.aT.transparent,Q),null,f,C.debugBuffer,C.quadTriangleIndexBuffer,C.debugSegments),F.draw(b,E.LINE_STRIP,A,s,l,Bi.disabled,Qs(B,c.aT.red),m,f,C.debugBuffer,C.tileBorderIndexBuffer,C.debugSegments)}function _i(C,i,h){const b=C.context,E=b.gl,B=C.colorModeForRenderPass(),F=new ni(E.LEQUAL,ni.ReadWrite,C.depthRangeFor3D),A=C.useProgram("terrain"),s=i.getTerrainMesh();b.bindFramebuffer.set(null),b.viewport.set([0,0,C.width,C.height]);for(const l of h){const f=C.renderToTexture.getTexture(l),m=i.getTerrainData(l.tileID);b.activeTexture.set(E.TEXTURE0),E.bindTexture(E.TEXTURE_2D,f.texture);const k={u_matrix:C.transform.calculatePosMatrix(l.tileID.toUnwrapped()),u_texture:0,u_ele_delta:i.getMeshFrameDelta(C.transform.zoom)};A.draw(b,E.TRIANGLES,F,Ji.disabled,B,Bi.backCCW,k,m,"terrain",s.vertexBuffer,s.indexBuffer,s.segments)}}class qA{constructor(i,h){this.context=new Zs(i),this.transform=h,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:c.Z(),renderTime:0},this.setup(),this.numSublayers=ei.maxUnderzooming+ei.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Ln}resize(i,h,b){if(this.width=Math.floor(i*b),this.height=Math.floor(h*b),this.pixelRatio=b,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const E of this.style._order)this.style._layers[E].resize()}setup(){const i=this.context,h=new c.a_;h.emplaceBack(0,0),h.emplaceBack(c.N,0),h.emplaceBack(0,c.N),h.emplaceBack(c.N,c.N),this.tileExtentBuffer=i.createVertexBuffer(h,ca.members),this.tileExtentSegments=c.S.simpleSegment(0,0,4,2);const b=new c.a_;b.emplaceBack(0,0),b.emplaceBack(c.N,0),b.emplaceBack(0,c.N),b.emplaceBack(c.N,c.N),this.debugBuffer=i.createVertexBuffer(b,ca.members),this.debugSegments=c.S.simpleSegment(0,0,4,5);const E=new c.V;E.emplaceBack(0,0,0,0),E.emplaceBack(c.N,0,c.N,0),E.emplaceBack(0,c.N,0,c.N),E.emplaceBack(c.N,c.N,c.N,c.N),this.rasterBoundsBuffer=i.createVertexBuffer(E,Bt.members),this.rasterBoundsSegments=c.S.simpleSegment(0,0,4,2);const B=new c.a_;B.emplaceBack(0,0),B.emplaceBack(1,0),B.emplaceBack(0,1),B.emplaceBack(1,1),this.viewportBuffer=i.createVertexBuffer(B,ca.members),this.viewportSegments=c.S.simpleSegment(0,0,4,2);const F=new c.a$;F.emplaceBack(0),F.emplaceBack(1),F.emplaceBack(3),F.emplaceBack(2),F.emplaceBack(0),this.tileBorderIndexBuffer=i.createIndexBuffer(F);const A=new c.b0;A.emplaceBack(0,1,2),A.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=i.createIndexBuffer(A);const s=this.context.gl;this.stencilClearMode=new Ji({func:s.ALWAYS,mask:0},0,255,s.ZERO,s.ZERO,s.ZERO)}clearStencil(){const i=this.context,h=i.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const b=c.Z();c.aS(b,0,this.width,this.height,0,0,1),c.a0(b,b,[h.drawingBufferWidth,h.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(i,h.TRIANGLES,ni.disabled,this.stencilClearMode,Qi.disabled,Bi.disabled,rl(b),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(i,h){if(this.currentStencilSource===i.source||!i.isTileClipped()||!h||!h.length)return;this.currentStencilSource=i.source;const b=this.context,E=b.gl;this.nextStencilID+h.length>256&&this.clearStencil(),b.setColorMode(Qi.disabled),b.setDepthMode(ni.disabled);const B=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const F of h){const A=this._tileClippingMaskIDs[F.key]=this.nextStencilID++,s=this.style.map.terrain&&this.style.map.terrain.getTerrainData(F);B.draw(b,E.TRIANGLES,ni.disabled,new Ji({func:E.ALWAYS,mask:0},A,255,E.KEEP,E.KEEP,E.REPLACE),Qi.disabled,Bi.disabled,rl(F.posMatrix),s,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const i=this.nextStencilID++,h=this.context.gl;return new Ji({func:h.NOTEQUAL,mask:255},i,255,h.KEEP,h.KEEP,h.REPLACE)}stencilModeForClipping(i){const h=this.context.gl;return new Ji({func:h.EQUAL,mask:255},this._tileClippingMaskIDs[i.key],0,h.KEEP,h.KEEP,h.REPLACE)}stencilConfigForOverlap(i){const h=this.context.gl,b=i.sort((F,A)=>A.overscaledZ-F.overscaledZ),E=b[b.length-1].overscaledZ,B=b[0].overscaledZ-E+1;if(B>1){this.currentStencilSource=void 0,this.nextStencilID+B>256&&this.clearStencil();const F={};for(let A=0;A<B;A++)F[A+E]=new Ji({func:h.GEQUAL,mask:255},A+this.nextStencilID,255,h.KEEP,h.KEEP,h.REPLACE);return this.nextStencilID+=B,[F,b]}return[{[E]:Ji.disabled},b]}colorModeForRenderPass(){const i=this.context.gl;return this._showOverdrawInspector?new Qi([i.CONSTANT_COLOR,i.ONE],new c.aT(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Qi.unblended:Qi.alphaBlended}depthModeForSublayer(i,h,b){if(!this.opaquePassEnabledForLayer())return ni.disabled;const E=1-((1+this.currentLayer)*this.numSublayers+i)*this.depthEpsilon;return new ni(b||this.context.gl.LEQUAL,h,[E,E])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(i,h){this.style=i,this.options=h,this.lineAtlas=i.lineAtlas,this.imageManager=i.imageManager,this.glyphManager=i.glyphManager,this.symbolFadeChange=i.placement.symbolFadeChange(c.h.now()),this.imageManager.beginFrame();const b=this.style._order,E=this.style.sourceCaches,B={},F={},A={};for(const s in E){const l=E[s];l.used&&l.prepare(this.context),B[s]=l.getVisibleCoordinates(),F[s]=B[s].slice().reverse(),A[s]=l.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let s=0;s<b.length;s++)if(this.style._layers[b[s]].is3D()){this.opaquePassCutoff=s;break}if(this.renderToTexture){this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0;const s=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!c.b1(this.terrainFacilitator.matrix,this.transform.projMatrix)||s.length)&&(c.b2(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(l,f){const m=l.context,k=m.gl,I=Qi.unblended,D=new ni(k.LEQUAL,ni.ReadWrite,[0,1]),Q=f.getTerrainMesh(),Z=f.sourceCache.getRenderableTiles(),X=l.useProgram("terrainDepth");m.bindFramebuffer.set(f.getFramebuffer("depth").framebuffer),m.viewport.set([0,0,l.width/devicePixelRatio,l.height/devicePixelRatio]),m.clear({color:c.aT.transparent,depth:1});for(const ie of Z){const Ae=f.getTerrainData(ie.tileID),ce={u_matrix:l.transform.calculatePosMatrix(ie.tileID.toUnwrapped()),u_ele_delta:f.getMeshFrameDelta(l.transform.zoom)};X.draw(m,k.TRIANGLES,D,Ji.disabled,I,Bi.backCCW,ce,Ae,"terrain",Q.vertexBuffer,Q.indexBuffer,Q.segments)}m.bindFramebuffer.set(null),m.viewport.set([0,0,l.width,l.height])}(this,this.style.map.terrain),function(l,f){const m=l.context,k=m.gl,I=Qi.unblended,D=new ni(k.LEQUAL,ni.ReadWrite,[0,1]),Q=f.getTerrainMesh(),Z=f.getCoordsTexture(),X=f.sourceCache.getRenderableTiles(),ie=l.useProgram("terrainCoords");m.bindFramebuffer.set(f.getFramebuffer("coords").framebuffer),m.viewport.set([0,0,l.width/devicePixelRatio,l.height/devicePixelRatio]),m.clear({color:c.aT.transparent,depth:1}),f.coordsIndex=[];for(const Ae of X){const ce=f.getTerrainData(Ae.tileID);m.activeTexture.set(k.TEXTURE0),k.bindTexture(k.TEXTURE_2D,Z.texture);const fe={u_matrix:l.transform.calculatePosMatrix(Ae.tileID.toUnwrapped()),u_terrain_coords_id:(255-f.coordsIndex.length)/255,u_texture:0,u_ele_delta:f.getMeshFrameDelta(l.transform.zoom)};ie.draw(m,k.TRIANGLES,D,Ji.disabled,I,Bi.backCCW,fe,ce,"terrain",Q.vertexBuffer,Q.indexBuffer,Q.segments),f.coordsIndex.push(Ae.tileID.key)}m.bindFramebuffer.set(null),m.viewport.set([0,0,l.width,l.height])}(this,this.style.map.terrain))}this.renderPass="offscreen";for(const s of b){const l=this.style._layers[s];if(!l.hasOffscreenPass()||l.isHidden(this.transform.zoom))continue;const f=F[l.source];(l.type==="custom"||f.length)&&this.renderLayer(this,E[l.source],l,f)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:h.showOverdrawInspector?c.aT.black:c.aT.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=h.showOverdrawInspector,this.depthRangeFor3D=[0,1-(i._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=b.length-1;this.currentLayer>=0;this.currentLayer--){const s=this.style._layers[b[this.currentLayer]],l=E[s.source],f=B[s.source];this._renderTileClippingMasks(s,f),this.renderLayer(this,l,s,f)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<b.length;this.currentLayer++){const s=this.style._layers[b[this.currentLayer]],l=E[s.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(s))continue;const f=(s.type==="symbol"?A:F)[s.source];this._renderTileClippingMasks(s,B[s.source]),this.renderLayer(this,l,s,f)}if(this.options.showTileBoundaries){const s=function(l,f){let m=null;const k=Object.values(l._layers).flatMap(Z=>Z.source&&!Z.isHidden(f)?[l.sourceCaches[Z.source]]:[]),I=k.filter(Z=>Z.getSource().type==="vector"),D=k.filter(Z=>Z.getSource().type!=="vector"),Q=Z=>{(!m||m.getSource().maxzoom<Z.getSource().maxzoom)&&(m=Z)};return I.forEach(Z=>Q(Z)),m||D.forEach(Z=>Q(Z)),m}(this.style,this.transform.zoom);s&&function(l,f,m){for(let k=0;k<m.length;k++)GA(l,f,m[k])}(this,s,s.getVisibleCoordinates())}this.options.showPadding&&function(s){const l=s.transform.padding;Rr(s,s.transform.height-(l.top||0),3,Jr),Rr(s,l.bottom||0,3,Oo),Tr(s,l.left||0,3,Bs),Tr(s,s.transform.width-(l.right||0),3,uo);const f=s.transform.centerPoint;(function(m,k,I,D){mA(m,k-1,I-10,2,20,D),mA(m,k-10,I-1,20,2,D)})(s,f.x,s.transform.height-f.y,Qa)}(this),this.context.setDefault()}renderLayer(i,h,b,E){if(!b.isHidden(this.transform.zoom)&&(b.type==="background"||b.type==="custom"||(E||[]).length))switch(this.id=b.id,b.type){case"symbol":(function(B,F,A,s,l){if(B.renderPass!=="translucent")return;const f=Ji.disabled,m=B.colorModeForRenderPass();(A._unevaluatedLayout.hasValue("text-variable-anchor")||A._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(k,I,D,Q,Z,X,ie){const Ae=I.transform,ce=Z==="map",fe=X==="map";for(const ve of k){const Ne=Q.getTile(ve),qe=Ne.getBucket(D);if(!qe||!qe.text||!qe.text.segments.get().length)continue;const Pe=c.ah(qe.textSizeData,Ae.zoom),Ve=Ye(Ne,1,I.transform.zoom),Ue=Nt(ve.posMatrix,fe,ce,I.transform,Ve),Mt=D.layout.get("icon-text-fit")!=="none"&&qe.hasIconData();if(Pe){const ht=Math.pow(2,Ae.zoom-Ne.tileID.overscaledZ);$s(qe,ce,fe,ie,Ae,Ue,ve.posMatrix,ht,Pe,Mt,I.style.map.terrain?(_t,gt)=>I.style.map.terrain.getElevation(ve,_t,gt):null)}}}(s,B,A,F,A.layout.get("text-rotation-alignment"),A.layout.get("text-pitch-alignment"),l),A.paint.get("icon-opacity").constantOr(1)!==0&&Si(B,F,A,s,!1,A.paint.get("icon-translate"),A.paint.get("icon-translate-anchor"),A.layout.get("icon-rotation-alignment"),A.layout.get("icon-pitch-alignment"),A.layout.get("icon-keep-upright"),f,m),A.paint.get("text-opacity").constantOr(1)!==0&&Si(B,F,A,s,!0,A.paint.get("text-translate"),A.paint.get("text-translate-anchor"),A.layout.get("text-rotation-alignment"),A.layout.get("text-pitch-alignment"),A.layout.get("text-keep-upright"),f,m),F.map.showCollisionBoxes&&(ll(B,F,A,s,A.paint.get("text-translate"),A.paint.get("text-translate-anchor"),!0),ll(B,F,A,s,A.paint.get("icon-translate"),A.paint.get("icon-translate-anchor"),!1))})(i,h,b,E,this.style.placement.variableOffsets);break;case"circle":(function(B,F,A,s){if(B.renderPass!=="translucent")return;const l=A.paint.get("circle-opacity"),f=A.paint.get("circle-stroke-width"),m=A.paint.get("circle-stroke-opacity"),k=!A.layout.get("circle-sort-key").isConstant();if(l.constantOr(1)===0&&(f.constantOr(1)===0||m.constantOr(1)===0))return;const I=B.context,D=I.gl,Q=B.depthModeForSublayer(0,ni.ReadOnly),Z=Ji.disabled,X=B.colorModeForRenderPass(),ie=[];for(let Ae=0;Ae<s.length;Ae++){const ce=s[Ae],fe=F.getTile(ce),ve=fe.getBucket(A);if(!ve)continue;const Ne=ve.programConfigurations.get(A.id),qe=B.useProgram("circle",Ne),Pe=ve.layoutVertexBuffer,Ve=ve.indexBuffer,Ue=B.style.map.terrain&&B.style.map.terrain.getTerrainData(ce),Mt={programConfiguration:Ne,program:qe,layoutVertexBuffer:Pe,indexBuffer:Ve,uniformValues:Pr(B,ce,fe,A),terrainData:Ue};if(k){const ht=ve.segments.get();for(const _t of ht)ie.push({segments:new c.S([_t]),sortKey:_t.sortKey,state:Mt})}else ie.push({segments:ve.segments,sortKey:0,state:Mt})}k&&ie.sort((Ae,ce)=>Ae.sortKey-ce.sortKey);for(const Ae of ie){const{programConfiguration:ce,program:fe,layoutVertexBuffer:ve,indexBuffer:Ne,uniformValues:qe,terrainData:Pe}=Ae.state;fe.draw(I,D.TRIANGLES,Q,Z,X,Bi.disabled,qe,Pe,A.id,ve,Ne,Ae.segments,A.paint,B.transform.zoom,ce)}})(i,h,b,E);break;case"heatmap":(function(B,F,A,s){if(A.paint.get("heatmap-opacity")!==0)if(B.renderPass==="offscreen"){const l=B.context,f=l.gl,m=Ji.disabled,k=new Qi([f.ONE,f.ONE],c.aT.transparent,[!0,!0,!0,!0]);(function(I,D,Q){const Z=I.gl;I.activeTexture.set(Z.TEXTURE1),I.viewport.set([0,0,D.width/4,D.height/4]);let X=Q.heatmapFbo;if(X)Z.bindTexture(Z.TEXTURE_2D,X.colorAttachment.get()),I.bindFramebuffer.set(X.framebuffer);else{const ie=Z.createTexture();Z.bindTexture(Z.TEXTURE_2D,ie),Z.texParameteri(Z.TEXTURE_2D,Z.TEXTURE_WRAP_S,Z.CLAMP_TO_EDGE),Z.texParameteri(Z.TEXTURE_2D,Z.TEXTURE_WRAP_T,Z.CLAMP_TO_EDGE),Z.texParameteri(Z.TEXTURE_2D,Z.TEXTURE_MIN_FILTER,Z.LINEAR),Z.texParameteri(Z.TEXTURE_2D,Z.TEXTURE_MAG_FILTER,Z.LINEAR),X=Q.heatmapFbo=I.createFramebuffer(D.width/4,D.height/4,!1,!1),function(Ae,ce,fe,ve){var Ne,qe;const Pe=Ae.gl,Ve=(Ne=Ae.HALF_FLOAT)!==null&&Ne!==void 0?Ne:Pe.UNSIGNED_BYTE,Ue=(qe=Ae.RGBA16F)!==null&&qe!==void 0?qe:Pe.RGBA;Pe.texImage2D(Pe.TEXTURE_2D,0,Ue,ce.width/4,ce.height/4,0,Pe.RGBA,Ve,null),ve.colorAttachment.set(fe)}(I,D,ie,X)}})(l,B,A),l.clear({color:c.aT.transparent});for(let I=0;I<s.length;I++){const D=s[I];if(F.hasRenderableParent(D))continue;const Q=F.getTile(D),Z=Q.getBucket(A);if(!Z)continue;const X=Z.programConfigurations.get(A.id),ie=B.useProgram("heatmap",X),{zoom:Ae}=B.transform;ie.draw(l,f.TRIANGLES,ni.disabled,m,k,Bi.disabled,Ol(D.posMatrix,Q,Ae,A.paint.get("heatmap-intensity")),null,A.id,Z.layoutVertexBuffer,Z.indexBuffer,Z.segments,A.paint,B.transform.zoom,X)}l.viewport.set([0,0,B.width,B.height])}else B.renderPass==="translucent"&&(B.context.setColorMode(B.colorModeForRenderPass()),function(l,f){const m=l.context,k=m.gl,I=f.heatmapFbo;if(!I)return;m.activeTexture.set(k.TEXTURE0),k.bindTexture(k.TEXTURE_2D,I.colorAttachment.get()),m.activeTexture.set(k.TEXTURE1);let D=f.colorRampTexture;D||(D=f.colorRampTexture=new Zt(m,f.colorRamp,k.RGBA)),D.bind(k.LINEAR,k.CLAMP_TO_EDGE),l.useProgram("heatmapTexture").draw(m,k.TRIANGLES,ni.disabled,Ji.disabled,l.colorModeForRenderPass(),Bi.disabled,((Q,Z,X,ie)=>{const Ae=c.Z();c.aS(Ae,0,Q.width,Q.height,0,0,1);const ce=Q.context.gl;return{u_matrix:Ae,u_world:[ce.drawingBufferWidth,ce.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Z.paint.get("heatmap-opacity")}})(l,f),null,f.id,l.viewportBuffer,l.quadTriangleIndexBuffer,l.viewportSegments,f.paint,l.transform.zoom)}(B,A))})(i,h,b,E);break;case"line":(function(B,F,A,s){if(B.renderPass!=="translucent")return;const l=A.paint.get("line-opacity"),f=A.paint.get("line-width");if(l.constantOr(1)===0||f.constantOr(1)===0)return;const m=B.depthModeForSublayer(0,ni.ReadOnly),k=B.colorModeForRenderPass(),I=A.paint.get("line-dasharray"),D=A.paint.get("line-pattern"),Q=D.constantOr(1),Z=A.paint.get("line-gradient"),X=A.getCrossfadeParameters(),ie=Q?"linePattern":I?"lineSDF":Z?"lineGradient":"line",Ae=B.context,ce=Ae.gl;let fe=!0;for(const ve of s){const Ne=F.getTile(ve);if(Q&&!Ne.patternsLoaded())continue;const qe=Ne.getBucket(A);if(!qe)continue;const Pe=qe.programConfigurations.get(A.id),Ve=B.context.program.get(),Ue=B.useProgram(ie,Pe),Mt=fe||Ue.program!==Ve,ht=B.style.map.terrain&&B.style.map.terrain.getTerrainData(ve),_t=D.constantOr(null);if(_t&&Ne.imageAtlas){const cn=Ne.imageAtlas,Yt=cn.patternPositions[_t.to.toString()],tn=cn.patternPositions[_t.from.toString()];Yt&&tn&&Pe.setConstantPatternPositions(Yt,tn)}const gt=ht?ve:null,Mn=Q?Fa(B,Ne,A,X,gt):I?Ri(B,Ne,A,I,X,gt):Z?$i(B,Ne,A,qe.lineClipsArray.length,gt):Ra(B,Ne,A,gt);if(Q)Ae.activeTexture.set(ce.TEXTURE0),Ne.imageAtlasTexture.bind(ce.LINEAR,ce.CLAMP_TO_EDGE),Pe.updatePaintBuffers(X);else if(I&&(Mt||B.lineAtlas.dirty))Ae.activeTexture.set(ce.TEXTURE0),B.lineAtlas.bind(Ae);else if(Z){const cn=qe.gradients[A.id];let Yt=cn.texture;if(A.gradientVersion!==cn.version){let tn=256;if(A.stepInterpolant){const fn=F.getSource().maxzoom,an=ve.canonical.z===fn?Math.ceil(1<<B.transform.maxZoom-ve.canonical.z):1;tn=c.ad(c.aY(qe.maxLineLength/c.N*1024*an),256,Ae.maxTextureSize)}cn.gradient=c.aZ({expression:A.gradientExpression(),evaluationKey:"lineProgress",resolution:tn,image:cn.gradient||void 0,clips:qe.lineClipsArray}),cn.texture?cn.texture.update(cn.gradient):cn.texture=new Zt(Ae,cn.gradient,ce.RGBA),cn.version=A.gradientVersion,Yt=cn.texture}Ae.activeTexture.set(ce.TEXTURE0),Yt.bind(A.stepInterpolant?ce.NEAREST:ce.LINEAR,ce.CLAMP_TO_EDGE)}Ue.draw(Ae,ce.TRIANGLES,m,B.stencilModeForClipping(ve),k,Bi.disabled,Mn,ht,A.id,qe.layoutVertexBuffer,qe.indexBuffer,qe.segments,A.paint,B.transform.zoom,Pe,qe.layoutVertexBuffer2),fe=!1}})(i,h,b,E);break;case"fill":(function(B,F,A,s){const l=A.paint.get("fill-color"),f=A.paint.get("fill-opacity");if(f.constantOr(1)===0)return;const m=B.colorModeForRenderPass(),k=A.paint.get("fill-pattern"),I=B.opaquePassEnabledForLayer()&&!k.constantOr(1)&&l.constantOr(c.aT.transparent).a===1&&f.constantOr(0)===1?"opaque":"translucent";if(B.renderPass===I){const D=B.depthModeForSublayer(1,B.renderPass==="opaque"?ni.ReadWrite:ni.ReadOnly);cs(B,F,A,s,D,m,!1)}if(B.renderPass==="translucent"&&A.paint.get("fill-antialias")){const D=B.depthModeForSublayer(A.getPaintProperty("fill-outline-color")?2:0,ni.ReadOnly);cs(B,F,A,s,D,m,!0)}})(i,h,b,E);break;case"fill-extrusion":(function(B,F,A,s){const l=A.paint.get("fill-extrusion-opacity");if(l!==0&&B.renderPass==="translucent"){const f=new ni(B.context.gl.LEQUAL,ni.ReadWrite,B.depthRangeFor3D);if(l!==1||A.paint.get("fill-extrusion-pattern").constantOr(1))Ws(B,F,A,s,f,Ji.disabled,Qi.disabled),Ws(B,F,A,s,f,B.stencilModeFor3D(),B.colorModeForRenderPass());else{const m=B.colorModeForRenderPass();Ws(B,F,A,s,f,Ji.disabled,m)}}})(i,h,b,E);break;case"hillshade":(function(B,F,A,s){if(B.renderPass!=="offscreen"&&B.renderPass!=="translucent")return;const l=B.context,f=B.depthModeForSublayer(0,ni.ReadOnly),m=B.colorModeForRenderPass(),[k,I]=B.renderPass==="translucent"?B.stencilConfigForOverlap(s):[{},s];for(const D of I){const Q=F.getTile(D);Q.needsHillshadePrepare!==void 0&&Q.needsHillshadePrepare&&B.renderPass==="offscreen"?qr(B,Q,A,f,Ji.disabled,m):B.renderPass==="translucent"&&Nl(B,D,Q,A,f,k[D.overscaledZ],m)}l.viewport.set([0,0,B.width,B.height])})(i,h,b,E);break;case"raster":(function(B,F,A,s){if(B.renderPass!=="translucent"||A.paint.get("raster-opacity")===0||!s.length)return;const l=B.context,f=l.gl,m=F.getSource(),k=B.useProgram("raster"),I=B.colorModeForRenderPass(),[D,Q]=m instanceof En?[{},s]:B.stencilConfigForOverlap(s),Z=Q[Q.length-1].overscaledZ,X=!B.options.moving;for(const ie of Q){const Ae=B.depthModeForSublayer(ie.overscaledZ-Z,A.paint.get("raster-opacity")===1?ni.ReadWrite:ni.ReadOnly,f.LESS),ce=F.getTile(ie);ce.registerFadeDuration(A.paint.get("raster-fade-duration"));const fe=F.findLoadedParent(ie,0),ve=Mr(ce,fe,F,A,B.transform,B.style.map.terrain);let Ne,qe;const Pe=A.paint.get("raster-resampling")==="nearest"?f.NEAREST:f.LINEAR;l.activeTexture.set(f.TEXTURE0),ce.texture.bind(Pe,f.CLAMP_TO_EDGE,f.LINEAR_MIPMAP_NEAREST),l.activeTexture.set(f.TEXTURE1),fe?(fe.texture.bind(Pe,f.CLAMP_TO_EDGE,f.LINEAR_MIPMAP_NEAREST),Ne=Math.pow(2,fe.tileID.overscaledZ-ce.tileID.overscaledZ),qe=[ce.tileID.canonical.x*Ne%1,ce.tileID.canonical.y*Ne%1]):ce.texture.bind(Pe,f.CLAMP_TO_EDGE,f.LINEAR_MIPMAP_NEAREST);const Ve=B.style.map.terrain&&B.style.map.terrain.getTerrainData(ie),Ue=Ve?ie:null,Mt=Ue?Ue.posMatrix:B.transform.calculatePosMatrix(ie.toUnwrapped(),X),ht=Al(Mt,qe||[0,0],Ne||1,ve,A);m instanceof En?k.draw(l,f.TRIANGLES,Ae,Ji.disabled,I,Bi.disabled,ht,Ve,A.id,m.boundsBuffer,B.quadTriangleIndexBuffer,m.boundsSegments):k.draw(l,f.TRIANGLES,Ae,D[ie.overscaledZ],I,Bi.disabled,ht,Ve,A.id,B.rasterBoundsBuffer,B.quadTriangleIndexBuffer,B.rasterBoundsSegments)}})(i,h,b,E);break;case"background":(function(B,F,A,s){const l=A.paint.get("background-color"),f=A.paint.get("background-opacity");if(f===0)return;const m=B.context,k=m.gl,I=B.transform,D=I.tileSize,Q=A.paint.get("background-pattern");if(B.isPatternMissing(Q))return;const Z=!Q&&l.a===1&&f===1&&B.opaquePassEnabledForLayer()?"opaque":"translucent";if(B.renderPass!==Z)return;const X=Ji.disabled,ie=B.depthModeForSublayer(0,Z==="opaque"?ni.ReadWrite:ni.ReadOnly),Ae=B.colorModeForRenderPass(),ce=B.useProgram(Q?"backgroundPattern":"background"),fe=s||I.coveringTiles({tileSize:D,terrain:B.style.map.terrain});Q&&(m.activeTexture.set(k.TEXTURE0),B.imageManager.bind(B.context));const ve=A.getCrossfadeParameters();for(const Ne of fe){const qe=s?Ne.posMatrix:B.transform.calculatePosMatrix(Ne.toUnwrapped()),Pe=Q?fA(qe,f,B,Q,{tileID:Ne,tileSize:D},ve):Gs(qe,f,l),Ve=B.style.map.terrain&&B.style.map.terrain.getTerrainData(Ne);ce.draw(m,k.TRIANGLES,ie,X,Ae,Bi.disabled,Pe,Ve,A.id,B.tileExtentBuffer,B.quadTriangleIndexBuffer,B.tileExtentSegments)}})(i,0,b,E);break;case"custom":(function(B,F,A){const s=B.context,l=A.implementation;if(B.renderPass==="offscreen"){const f=l.prerender;f&&(B.setCustomLayerDefaults(),s.setColorMode(B.colorModeForRenderPass()),f.call(l,s.gl,B.transform.customLayerMatrix()),s.setDirty(),B.setBaseState())}else if(B.renderPass==="translucent"){B.setCustomLayerDefaults(),s.setColorMode(B.colorModeForRenderPass()),s.setStencilMode(Ji.disabled);const f=l.renderingMode==="3d"?new ni(B.context.gl.LEQUAL,ni.ReadWrite,B.depthRangeFor3D):B.depthModeForSublayer(0,ni.ReadOnly);s.setDepthMode(f),l.render(s.gl,B.transform.customLayerMatrix()),s.setDirty(),B.setBaseState(),s.bindFramebuffer.set(null)}})(i,0,b)}}translatePosMatrix(i,h,b,E,B){if(!b[0]&&!b[1])return i;const F=B?E==="map"?this.transform.angle:0:E==="viewport"?-this.transform.angle:0;if(F){const l=Math.sin(F),f=Math.cos(F);b=[b[0]*f-b[1]*l,b[0]*l+b[1]*f]}const A=[B?b[0]:Ye(h,b[0],this.transform.zoom),B?b[1]:Ye(h,b[1],this.transform.zoom),0],s=new Float32Array(16);return c.$(s,i,A),s}saveTileTexture(i){const h=this._tileTextures[i.size[0]];h?h.push(i):this._tileTextures[i.size[0]]=[i]}getTileTexture(i){const h=this._tileTextures[i];return h&&h.length>0?h.pop():null}isPatternMissing(i){if(!i)return!1;if(!i.from||!i.to)return!0;const h=this.imageManager.getPattern(i.from.toString()),b=this.imageManager.getPattern(i.to.toString());return!h||!b}useProgram(i,h){this.cache=this.cache||{};const b=i+(h?h.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[b]||(this.cache[b]=new ha(this.context,Be[i],h,ma[i],this._showOverdrawInspector,this.style.map.terrain)),this.cache[b]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const i=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(i.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new Zt(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:i,drawingBufferHeight:h}=this.context.gl;return this.width!==i||this.height!==h}}class Di{constructor(i,h){this.points=i,this.planes=h}static fromInvProjectionMatrix(i,h,b){const E=Math.pow(2,b),B=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(A=>{const s=1/(A=c.ag([],A,i))[3]/h*E;return c.b3(A,A,[s,s,1/A[3],s])}),F=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(A=>{const s=function(k,I){var D=I[0],Q=I[1],Z=I[2],X=D*D+Q*Q+Z*Z;return X>0&&(X=1/Math.sqrt(X)),k[0]=I[0]*X,k[1]=I[1]*X,k[2]=I[2]*X,k}([],function(k,I,D){var Q=I[0],Z=I[1],X=I[2],ie=D[0],Ae=D[1],ce=D[2];return k[0]=Z*ce-X*Ae,k[1]=X*ie-Q*ce,k[2]=Q*Ae-Z*ie,k}([],xt([],B[A[0]],B[A[1]]),xt([],B[A[2]],B[A[1]]))),l=-((f=s)[0]*(m=B[A[1]])[0]+f[1]*m[1]+f[2]*m[2]);var f,m;return s.concat(l)});return new Di(B,F)}}class co{constructor(i,h){this.min=i,this.max=h,this.center=function(b,E,B){return b[0]=.5*E[0],b[1]=.5*E[1],b[2]=.5*E[2],b}([],function(b,E,B){return b[0]=E[0]+B[0],b[1]=E[1]+B[1],b[2]=E[2]+B[2],b}([],this.min,this.max))}quadrant(i){const h=[i%2==0,i<2],b=nt(this.min),E=nt(this.max);for(let B=0;B<h.length;B++)b[B]=h[B]?this.min[B]:this.center[B],E[B]=h[B]?this.center[B]:this.max[B];return E[2]=this.max[2],new co(b,E)}distanceX(i){return Math.max(Math.min(this.max[0],i[0]),this.min[0])-i[0]}distanceY(i){return Math.max(Math.min(this.max[1],i[1]),this.min[1])-i[1]}intersects(i){const h=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let b=!0;for(let E=0;E<i.planes.length;E++){const B=i.planes[E];let F=0;for(let A=0;A<h.length;A++)c.b4(B,h[A])>=0&&F++;if(F===0)return 0;F!==h.length&&(b=!1)}if(b)return 2;for(let E=0;E<3;E++){let B=Number.MAX_VALUE,F=-Number.MAX_VALUE;for(let A=0;A<i.points.length;A++){const s=i.points[A][E]-this.min[E];B=Math.min(B,s),F=Math.max(F,s)}if(F<0||B>this.max[E]-this.min[E])return 0}return 1}}class gA{constructor(i=0,h=0,b=0,E=0){if(isNaN(i)||i<0||isNaN(h)||h<0||isNaN(b)||b<0||isNaN(E)||E<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=i,this.bottom=h,this.left=b,this.right=E}interpolate(i,h,b){return h.top!=null&&i.top!=null&&(this.top=c.B.number(i.top,h.top,b)),h.bottom!=null&&i.bottom!=null&&(this.bottom=c.B.number(i.bottom,h.bottom,b)),h.left!=null&&i.left!=null&&(this.left=c.B.number(i.left,h.left,b)),h.right!=null&&i.right!=null&&(this.right=c.B.number(i.right,h.right,b)),this}getCenter(i,h){const b=c.ad((this.left+i-this.right)/2,0,i),E=c.ad((this.top+h-this.bottom)/2,0,h);return new c.P(b,E)}equals(i){return this.top===i.top&&this.bottom===i.bottom&&this.left===i.left&&this.right===i.right}clone(){return new gA(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class Fr{constructor(i,h,b,E,B){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=B===void 0||!!B,this._minZoom=i||0,this._maxZoom=h||22,this._minPitch=b??0,this._maxPitch=E??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new c.L(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new gA,this._posMatrixCache={},this._alignedPosMatrixCache={},this._minEleveationForCurrentTile=0}clone(){const i=new Fr(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return i.apply(this),i}apply(i){this.tileSize=i.tileSize,this.latRange=i.latRange,this.width=i.width,this.height=i.height,this._center=i._center,this._elevation=i._elevation,this._minEleveationForCurrentTile=i._minEleveationForCurrentTile,this.zoom=i.zoom,this.angle=i.angle,this._fov=i._fov,this._pitch=i._pitch,this._unmodified=i._unmodified,this._edgeInsets=i._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(i){this._minZoom!==i&&(this._minZoom=i,this.zoom=Math.max(this.zoom,i))}get maxZoom(){return this._maxZoom}set maxZoom(i){this._maxZoom!==i&&(this._maxZoom=i,this.zoom=Math.min(this.zoom,i))}get minPitch(){return this._minPitch}set minPitch(i){this._minPitch!==i&&(this._minPitch=i,this.pitch=Math.max(this.pitch,i))}get maxPitch(){return this._maxPitch}set maxPitch(i){this._maxPitch!==i&&(this._maxPitch=i,this.pitch=Math.min(this.pitch,i))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(i){i===void 0?i=!0:i===null&&(i=!1),this._renderWorldCopies=i}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new c.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(i){const h=-c.b5(i,-180,180)*Math.PI/180;this.angle!==h&&(this._unmodified=!1,this.angle=h,this._calcMatrices(),this.rotationMatrix=function(){var b=new c.A(4);return c.A!=Float32Array&&(b[1]=0,b[2]=0),b[0]=1,b[3]=1,b}(),function(b,E,B){var F=E[0],A=E[1],s=E[2],l=E[3],f=Math.sin(B),m=Math.cos(B);b[0]=F*m+s*f,b[1]=A*m+l*f,b[2]=F*-f+s*m,b[3]=A*-f+l*m}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(i){const h=c.ad(i,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==h&&(this._unmodified=!1,this._pitch=h,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(i){i=Math.max(.01,Math.min(60,i)),this._fov!==i&&(this._unmodified=!1,this._fov=i/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(i){const h=Math.min(Math.max(i,this.minZoom),this.maxZoom);this._zoom!==h&&(this._unmodified=!1,this._zoom=h,this.tileZoom=Math.max(0,Math.floor(h)),this.scale=this.zoomScale(h),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(i){i.lat===this._center.lat&&i.lng===this._center.lng||(this._unmodified=!1,this._center=i,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(i){i!==this._elevation&&(this._elevation=i,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(i){this._edgeInsets.equals(i)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,i,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(i){return this._edgeInsets.equals(i)}interpolatePadding(i,h,b){this._unmodified=!1,this._edgeInsets.interpolate(i,h,b),this._constrain(),this._calcMatrices()}coveringZoomLevel(i){const h=(i.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/i.tileSize));return Math.max(0,h)}getVisibleUnwrappedCoordinates(i){const h=[new c.b6(0,i)];if(this._renderWorldCopies){const b=this.pointCoordinate(new c.P(0,0)),E=this.pointCoordinate(new c.P(this.width,0)),B=this.pointCoordinate(new c.P(this.width,this.height)),F=this.pointCoordinate(new c.P(0,this.height)),A=Math.floor(Math.min(b.x,E.x,B.x,F.x)),s=Math.floor(Math.max(b.x,E.x,B.x,F.x)),l=1;for(let f=A-l;f<=s+l;f++)f!==0&&h.push(new c.b6(f,i))}return h}coveringTiles(i){var h,b;let E=this.coveringZoomLevel(i);const B=E;if(i.minzoom!==void 0&&E<i.minzoom)return[];i.maxzoom!==void 0&&E>i.maxzoom&&(E=i.maxzoom);const F=this.pointCoordinate(this.getCameraPoint()),A=c.U.fromLngLat(this.center),s=Math.pow(2,E),l=[s*F.x,s*F.y,0],f=[s*A.x,s*A.y,0],m=Di.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,E);let k=i.minzoom||0;!i.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(k=E);const I=i.terrain?2/Math.min(this.tileSize,i.tileSize)*this.tileSize:3,D=Ae=>({aabb:new co([Ae*s,0,0],[(Ae+1)*s,s,0]),zoom:0,x:0,y:0,wrap:Ae,fullyVisible:!1}),Q=[],Z=[],X=E,ie=i.reparseOverscaled?B:E;if(this._renderWorldCopies)for(let Ae=1;Ae<=3;Ae++)Q.push(D(-Ae)),Q.push(D(Ae));for(Q.push(D(0));Q.length>0;){const Ae=Q.pop(),ce=Ae.x,fe=Ae.y;let ve=Ae.fullyVisible;if(!ve){const Ue=Ae.aabb.intersects(m);if(Ue===0)continue;ve=Ue===2}const Ne=i.terrain?l:f,qe=Ae.aabb.distanceX(Ne),Pe=Ae.aabb.distanceY(Ne),Ve=Math.max(Math.abs(qe),Math.abs(Pe));if(Ae.zoom===X||Ve>I+(1<<X-Ae.zoom)-2&&Ae.zoom>=k){const Ue=X-Ae.zoom,Mt=l[0]-.5-(ce<<Ue),ht=l[1]-.5-(fe<<Ue);Z.push({tileID:new c.O(Ae.zoom===X?ie:Ae.zoom,Ae.wrap,Ae.zoom,ce,fe),distanceSq:Ft([f[0]-.5-ce,f[1]-.5-fe]),tileDistanceToCamera:Math.sqrt(Mt*Mt+ht*ht)})}else for(let Ue=0;Ue<4;Ue++){const Mt=(ce<<1)+Ue%2,ht=(fe<<1)+(Ue>>1),_t=Ae.zoom+1;let gt=Ae.aabb.quadrant(Ue);if(i.terrain){const Mn=new c.O(_t,Ae.wrap,_t,Mt,ht),cn=i.terrain.getMinMaxElevation(Mn),Yt=(h=cn.minElevation)!==null&&h!==void 0?h:this.elevation,tn=(b=cn.maxElevation)!==null&&b!==void 0?b:this.elevation;gt=new co([gt.min[0],gt.min[1],Yt],[gt.max[0],gt.max[1],tn])}Q.push({aabb:gt,zoom:_t,x:Mt,y:ht,wrap:Ae.wrap,fullyVisible:ve})}}return Z.sort((Ae,ce)=>Ae.distanceSq-ce.distanceSq).map(Ae=>Ae.tileID)}resize(i,h){this.width=i,this.height=h,this.pixelsToGLUnits=[2/i,-2/h],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(i){return Math.pow(2,i)}scaleZoom(i){return Math.log(i)/Math.LN2}project(i){const h=c.ad(i.lat,-this.maxValidLatitude,this.maxValidLatitude);return new c.P(c.G(i.lng)*this.worldSize,c.H(h)*this.worldSize)}unproject(i){return new c.U(i.x/this.worldSize,i.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(i){const h=this.pointLocation(this.centerPoint,i),b=i.getElevationForLngLatZoom(h,this.tileZoom);if(!(this.elevation-b))return;const E=this.getCameraPosition(),B=c.U.fromLngLat(E.lngLat,E.altitude),F=c.U.fromLngLat(h,b),A=B.x-F.x,s=B.y-F.y,l=B.z-F.z,f=Math.sqrt(A*A+s*s+l*l),m=this.scaleZoom(this.cameraToCenterDistance/f/this.tileSize);this._elevation=b,this._center=h,this.zoom=m}setLocationAtPoint(i,h){const b=this.pointCoordinate(h),E=this.pointCoordinate(this.centerPoint),B=this.locationCoordinate(i),F=new c.U(B.x-(b.x-E.x),B.y-(b.y-E.y));this.center=this.coordinateLocation(F),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(i,h){return h?this.coordinatePoint(this.locationCoordinate(i),h.getElevationForLngLatZoom(i,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(i))}pointLocation(i,h){return this.coordinateLocation(this.pointCoordinate(i,h))}locationCoordinate(i){return c.U.fromLngLat(i)}coordinateLocation(i){return i&&i.toLngLat()}pointCoordinate(i,h){if(h){const k=h.pointCoordinate(i);if(k!=null)return k}const b=[i.x,i.y,0,1],E=[i.x,i.y,1,1];c.ag(b,b,this.pixelMatrixInverse),c.ag(E,E,this.pixelMatrixInverse);const B=b[3],F=E[3],A=b[1]/B,s=E[1]/F,l=b[2]/B,f=E[2]/F,m=l===f?0:(0-l)/(f-l);return new c.U(c.B.number(b[0]/B,E[0]/F,m)/this.worldSize,c.B.number(A,s,m)/this.worldSize)}coordinatePoint(i,h=0,b=this.pixelMatrix){const E=[i.x*this.worldSize,i.y*this.worldSize,h,1];return c.ag(E,E,b),new c.P(E[0]/E[3],E[1]/E[3])}getBounds(){const i=Math.max(0,this.height/2-this.getHorizon());return new Dn().extend(this.pointLocation(new c.P(0,i))).extend(this.pointLocation(new c.P(this.width,i))).extend(this.pointLocation(new c.P(this.width,this.height))).extend(this.pointLocation(new c.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new Dn([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(i){i?(this.lngRange=[i.getWest(),i.getEast()],this.latRange=[i.getSouth(),i.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(i,h=!1){const b=i.key,E=h?this._alignedPosMatrixCache:this._posMatrixCache;if(E[b])return E[b];const B=i.canonical,F=this.worldSize/this.zoomScale(B.z),A=B.x+Math.pow(2,B.z)*i.wrap,s=c.ao(new Float64Array(16));return c.$(s,s,[A*F,B.y*F,0]),c.a0(s,s,[F/c.N,F/c.N,1]),c.a1(s,h?this.alignedProjMatrix:this.projMatrix,s),E[b]=new Float32Array(s),E[b]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let i,h,b,E,B=-90,F=90,A=-180,s=180;const l=this.size,f=this._unmodified;if(this.latRange){const I=this.latRange;B=c.H(I[1])*this.worldSize,F=c.H(I[0])*this.worldSize,i=F-B<l.y?l.y/(F-B):0}if(this.lngRange){const I=this.lngRange;A=c.b5(c.G(I[0])*this.worldSize,0,this.worldSize),s=c.b5(c.G(I[1])*this.worldSize,0,this.worldSize),s<A&&(s+=this.worldSize),h=s-A<l.x?l.x/(s-A):0}const m=this.point,k=Math.max(h||0,i||0);if(k)return this.center=this.unproject(new c.P(h?(s+A)/2:m.x,i?(F+B)/2:m.y)),this.zoom+=this.scaleZoom(k),this._unmodified=f,void(this._constraining=!1);if(this.latRange){const I=m.y,D=l.y/2;I-D<B&&(E=B+D),I+D>F&&(E=F-D)}if(this.lngRange){const I=(A+s)/2,D=c.b5(m.x,I-this.worldSize/2,I+this.worldSize/2),Q=l.x/2;D-Q<A&&(b=A+Q),D+Q>s&&(b=s-Q)}b===void 0&&E===void 0||(this.center=this.unproject(new c.P(b!==void 0?b:m.x,E!==void 0?E:m.y)).wrap()),this._unmodified=f,this._constraining=!1}_calcMatrices(){if(!this.height)return;const i=this.centerOffset,h=this.point.x,b=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=c.b7(1,this.center.lat)*this.worldSize;let E=c.ao(new Float64Array(16));c.a0(E,E,[this.width/2,-this.height/2,1]),c.$(E,E,[1,-1,0]),this.labelPlaneMatrix=E,E=c.ao(new Float64Array(16)),c.a0(E,E,[1,-1,1]),c.$(E,E,[-1,-1,0]),c.a0(E,E,[2/this.width,2/this.height,1]),this.glCoordMatrix=E;const B=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),F=Math.min(this.elevation,this._minEleveationForCurrentTile),A=B-F*this._pixelPerMeter/Math.cos(this._pitch),s=F<0?A:B,l=Math.PI/2+this._pitch,f=this._fov*(.5+i.y/this.height),m=Math.sin(f)*s/Math.sin(c.ad(Math.PI-l-f,.01,Math.PI-.01)),k=this.getHorizon(),I=2*Math.atan(k/this.cameraToCenterDistance)*(.5+i.y/(2*k)),D=Math.sin(I)*s/Math.sin(c.ad(Math.PI-l-I,.01,Math.PI-.01)),Q=Math.min(m,D),Z=1.01*(Math.cos(Math.PI/2-this._pitch)*Q+s),X=this.height/50;E=new Float64Array(16),c.b8(E,this._fov,this.width/this.height,X,Z),E[8]=2*-i.x/this.width,E[9]=2*i.y/this.height,c.a0(E,E,[1,-1,1]),c.$(E,E,[0,0,-this.cameraToCenterDistance]),c.b9(E,E,this._pitch),c.ae(E,E,this.angle),c.$(E,E,[-h,-b,0]),this.mercatorMatrix=c.a0([],E,[this.worldSize,this.worldSize,this.worldSize]),c.a0(E,E,[1,1,this._pixelPerMeter]),this.pixelMatrix=c.a1(new Float64Array(16),this.labelPlaneMatrix,E),c.$(E,E,[0,0,-this.elevation]),this.projMatrix=E,this.invProjMatrix=c.as([],E),this.pixelMatrix3D=c.a1(new Float64Array(16),this.labelPlaneMatrix,E);const ie=this.width%2/2,Ae=this.height%2/2,ce=Math.cos(this.angle),fe=Math.sin(this.angle),ve=h-Math.round(h)+ce*ie+fe*Ae,Ne=b-Math.round(b)+ce*Ae+fe*ie,qe=new Float64Array(E);if(c.$(qe,qe,[ve>.5?ve-1:ve,Ne>.5?Ne-1:Ne,0]),this.alignedProjMatrix=qe,E=c.as(new Float64Array(16),this.pixelMatrix),!E)throw new Error("failed to invert matrix");this.pixelMatrixInverse=E,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const i=this.pointCoordinate(new c.P(0,0)),h=[i.x*this.worldSize,i.y*this.worldSize,0,1];return c.ag(h,h,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const i=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new c.P(0,i))}getCameraQueryGeometry(i){const h=this.getCameraPoint();if(i.length===1)return[i[0],h];{let b=h.x,E=h.y,B=h.x,F=h.y;for(const A of i)b=Math.min(b,A.x),E=Math.min(E,A.y),B=Math.max(B,A.x),F=Math.max(F,A.y);return[new c.P(b,E),new c.P(B,E),new c.P(B,F),new c.P(b,F),new c.P(b,E)]}}}function Zr(C,i){let h,b=!1,E=null,B=null;const F=()=>{E=null,b&&(C.apply(B,h),E=setTimeout(F,i),b=!1)};return(...A)=>(b=!0,B=this,h=A,E||F(),E)}class ZA{constructor(i){this._getCurrentHash=()=>{const h=window.location.hash.replace("#","");if(this._hashName){let b;return h.split("&").map(E=>E.split("=")).forEach(E=>{E[0]===this._hashName&&(b=E)}),(b&&b[1]||"").split("/")}return h.split("/")},this._onHashChange=()=>{const h=this._getCurrentHash();if(h.length>=3&&!h.some(b=>isNaN(b))){const b=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(h[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+h[2],+h[1]],zoom:+h[0],bearing:b,pitch:+(h[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const h=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,h)}catch{}},this._updateHash=Zr(this._updateHashUnthrottled,300),this._hashName=i&&encodeURIComponent(i)}addTo(i){return this._map=i,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(i){const h=this._map.getCenter(),b=Math.round(100*this._map.getZoom())/100,E=Math.ceil((b*Math.LN2+Math.log(512/360/.5))/Math.LN10),B=Math.pow(10,E),F=Math.round(h.lng*B)/B,A=Math.round(h.lat*B)/B,s=this._map.getBearing(),l=this._map.getPitch();let f="";if(f+=i?`/${F}/${A}/${b}`:`${b}/${A}/${F}`,(s||l)&&(f+="/"+Math.round(10*s)/10),l&&(f+=`/${Math.round(l)}`),this._hashName){const m=this._hashName;let k=!1;const I=window.location.hash.slice(1).split("&").map(D=>{const Q=D.split("=")[0];return Q===m?(k=!0,`${Q}=${f}`):D}).filter(D=>D);return k||I.push(`${m}=${f}`),`#${I.join("&")}`}return`#${f}`}}const No={linearity:.3,easing:c.ba(0,0,.3,1)},Ga=c.e({deceleration:2500,maxSpeed:1400},No),ul=c.e({deceleration:20,maxSpeed:1400},No),Ys=c.e({deceleration:1e3,maxSpeed:360},No),_A=c.e({deceleration:1e3,maxSpeed:90},No);class ot{constructor(i){this._map=i,this.clear()}clear(){this._inertiaBuffer=[]}record(i){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:c.h.now(),settings:i})}_drainInertiaBuffer(){const i=this._inertiaBuffer,h=c.h.now();for(;i.length>0&&h-i[0].time>160;)i.shift()}_onMoveEnd(i){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const h={zoom:0,bearing:0,pitch:0,pan:new c.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:B}of this._inertiaBuffer)h.zoom+=B.zoomDelta||0,h.bearing+=B.bearingDelta||0,h.pitch+=B.pitchDelta||0,B.panDelta&&h.pan._add(B.panDelta),B.around&&(h.around=B.around),B.pinchAround&&(h.pinchAround=B.pinchAround);const b=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,E={};if(h.pan.mag()){const B=mt(h.pan.mag(),b,c.e({},Ga,i||{}));E.offset=h.pan.mult(B.amount/h.pan.mag()),E.center=this._map.transform.center,vt(E,B)}if(h.zoom){const B=mt(h.zoom,b,ul);E.zoom=this._map.transform.zoom+B.amount,vt(E,B)}if(h.bearing){const B=mt(h.bearing,b,Ys);E.bearing=this._map.transform.bearing+c.ad(B.amount,-179,179),vt(E,B)}if(h.pitch){const B=mt(h.pitch,b,_A);E.pitch=this._map.transform.pitch+B.amount,vt(E,B)}if(E.zoom||E.bearing){const B=h.pinchAround===void 0?h.around:h.pinchAround;E.around=B?this._map.unproject(B):this._map.getCenter()}return this.clear(),c.e(E,{noMoveStart:!0})}}function vt(C,i){(!C.duration||C.duration<i.duration)&&(C.duration=i.duration,C.easing=i.easing)}function mt(C,i,h){const{maxSpeed:b,linearity:E,deceleration:B}=h,F=c.ad(C*E/(i/1e3),-b,b),A=Math.abs(F)/(B*E);return{easing:h.easing,duration:1e3*A,amount:F*(A/2)}}class An extends c.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,h,b,E={}){const B=O.mousePos(h.getCanvasContainer(),b),F=h.unproject(B);super(i,c.e({point:B,lngLat:F,originalEvent:b},E)),this._defaultPrevented=!1,this.target=h}}class Fn extends c.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,h,b){const E=i==="touchend"?b.changedTouches:b.touches,B=O.touchPos(h.getCanvasContainer(),E),F=B.map(s=>h.unproject(s)),A=B.reduce((s,l,f,m)=>s.add(l.div(m.length)),new c.P(0,0));super(i,{points:B,point:A,lngLats:F,lngLat:h.unproject(A),originalEvent:b}),this._defaultPrevented=!1}}class wi extends c.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,h,b){super(i,{originalEvent:b}),this._defaultPrevented=!1}}class sr{constructor(i,h){this._map=i,this._clickTolerance=h.clickTolerance}reset(){delete this._mousedownPos}wheel(i){return this._firePreventable(new wi(i.type,this._map,i))}mousedown(i,h){return this._mousedownPos=h,this._firePreventable(new An(i.type,this._map,i))}mouseup(i){this._map.fire(new An(i.type,this._map,i))}click(i,h){this._mousedownPos&&this._mousedownPos.dist(h)>=this._clickTolerance||this._map.fire(new An(i.type,this._map,i))}dblclick(i){return this._firePreventable(new An(i.type,this._map,i))}mouseover(i){this._map.fire(new An(i.type,this._map,i))}mouseout(i){this._map.fire(new An(i.type,this._map,i))}touchstart(i){return this._firePreventable(new Fn(i.type,this._map,i))}touchmove(i){this._map.fire(new Fn(i.type,this._map,i))}touchend(i){this._map.fire(new Fn(i.type,this._map,i))}touchcancel(i){this._map.fire(new Fn(i.type,this._map,i))}_firePreventable(i){if(this._map.fire(i),i.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Oi{constructor(i){this._map=i}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(i){this._map.fire(new An(i.type,this._map,i))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new An("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(i){this._delayContextMenu?this._contextMenuEvent=i:this._ignoreContextMenu||this._map.fire(new An(i.type,this._map,i)),this._map.listens("contextmenu")&&i.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class HA{constructor(i){this._map=i}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(i){return this.transform.pointLocation(c.P.convert(i),this._map.terrain)}}class qa{constructor(i,h){this._map=i,this._tr=new HA(i),this._el=i.getCanvasContainer(),this._container=i.getContainer(),this._clickTolerance=h.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(i,h){this.isEnabled()&&i.shiftKey&&i.button===0&&(O.disableDrag(),this._startPos=this._lastPos=h,this._active=!0)}mousemoveWindow(i,h){if(!this._active)return;const b=h;if(this._lastPos.equals(b)||!this._box&&b.dist(this._startPos)<this._clickTolerance)return;const E=this._startPos;this._lastPos=b,this._box||(this._box=O.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",i));const B=Math.min(E.x,b.x),F=Math.max(E.x,b.x),A=Math.min(E.y,b.y),s=Math.max(E.y,b.y);O.setTransform(this._box,`translate(${B}px,${A}px)`),this._box.style.width=F-B+"px",this._box.style.height=s-A+"px"}mouseupWindow(i,h){if(!this._active||i.button!==0)return;const b=this._startPos,E=h;if(this.reset(),O.suppressClick(),b.x!==E.x||b.y!==E.y)return this._map.fire(new c.k("boxzoomend",{originalEvent:i})),{cameraAnimation:B=>B.fitScreenCoordinates(b,E,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",i)}keydown(i){this._active&&i.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",i))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(O.remove(this._box),this._box=null),O.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(i,h){return this._map.fire(new c.k(i,{originalEvent:h}))}}function er(C,i){if(C.length!==i.length)throw new Error(`The number of touches and points are not equal - touches ${C.length}, points ${i.length}`);const h={};for(let b=0;b<C.length;b++)h[C[b].identifier]=i[b];return h}class eA{constructor(i){this.reset(),this.numTouches=i.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(i,h,b){(this.centroid||b.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=i.timeStamp),b.length===this.numTouches&&(this.centroid=function(E){const B=new c.P(0,0);for(const F of E)B._add(F);return B.div(E.length)}(h),this.touches=er(b,h)))}touchmove(i,h,b){if(this.aborted||!this.centroid)return;const E=er(b,h);for(const B in this.touches){const F=E[B];(!F||F.dist(this.touches[B])>30)&&(this.aborted=!0)}}touchend(i,h,b){if((!this.centroid||i.timeStamp-this.startTime>500)&&(this.aborted=!0),b.length===0){const E=!this.aborted&&this.centroid;if(this.reset(),E)return E}}}class MA{constructor(i){this.singleTap=new eA(i),this.numTaps=i.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(i,h,b){this.singleTap.touchstart(i,h,b)}touchmove(i,h,b){this.singleTap.touchmove(i,h,b)}touchend(i,h,b){const E=this.singleTap.touchend(i,h,b);if(E){const B=i.timeStamp-this.lastTime<500,F=!this.lastTap||this.lastTap.dist(E)<30;if(B&&F||this.reset(),this.count++,this.lastTime=i.timeStamp,this.lastTap=E,this.count===this.numTaps)return this.reset(),E}}}class tA{constructor(i){this._tr=new HA(i),this._zoomIn=new MA({numTouches:1,numTaps:2}),this._zoomOut=new MA({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(i,h,b){this._zoomIn.touchstart(i,h,b),this._zoomOut.touchstart(i,h,b)}touchmove(i,h,b){this._zoomIn.touchmove(i,h,b),this._zoomOut.touchmove(i,h,b)}touchend(i,h,b){const E=this._zoomIn.touchend(i,h,b),B=this._zoomOut.touchend(i,h,b),F=this._tr;return E?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:A=>A.easeTo({duration:300,zoom:F.zoom+1,around:F.unproject(E)},{originalEvent:i})}):B?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:A=>A.easeTo({duration:300,zoom:F.zoom-1,around:F.unproject(B)},{originalEvent:i})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class TA{constructor(i){this._enabled=!!i.enable,this._moveStateManager=i.moveStateManager,this._clickTolerance=i.clickTolerance||1,this._moveFunction=i.move,this._activateOnStart=!!i.activateOnStart,i.assignEvents(this),this.reset()}reset(i){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(i)}_move(...i){const h=this._moveFunction(...i);if(h.bearingDelta||h.pitchDelta||h.around||h.panDelta)return this._active=!0,h}dragStart(i,h){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(i)&&(this._moveStateManager.startMove(i),this._lastPoint=h.length?h[0]:h,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(i,h){if(!this.isEnabled())return;const b=this._lastPoint;if(!b)return;if(i.preventDefault(),!this._moveStateManager.isValidMoveEvent(i))return void this.reset(i);const E=h.length?h[0]:h;return!this._moved&&E.dist(b)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=E,this._move(b,E))}dragEnd(i){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(i)&&(this._moved&&O.suppressClick(),this.reset(i))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Za={0:1,2:2};class Ei{constructor(i){this._correctEvent=i.checkCorrectEvent}startMove(i){const h=O.mouseButton(i);this._eventButton=h}endMove(i){delete this._eventButton}isValidStartEvent(i){return this._correctEvent(i)}isValidMoveEvent(i){return!function(h,b){const E=Za[b];return h.buttons===void 0||(h.buttons&E)!==E}(i,this._eventButton)}isValidEndEvent(i){return O.mouseButton(i)===this._eventButton}}class Vl{constructor(){this._firstTouch=void 0}_isOneFingerTouch(i){return i.targetTouches.length===1}_isSameTouchEvent(i){return i.targetTouches[0].identifier===this._firstTouch}startMove(i){this._firstTouch=i.targetTouches[0].identifier}endMove(i){delete this._firstTouch}isValidStartEvent(i){return this._isOneFingerTouch(i)}isValidMoveEvent(i){return this._isOneFingerTouch(i)&&this._isSameTouchEvent(i)}isValidEndEvent(i){return this._isOneFingerTouch(i)&&this._isSameTouchEvent(i)}}const ya=C=>{C.mousedown=C.dragStart,C.mousemoveWindow=C.dragMove,C.mouseup=C.dragEnd,C.contextmenu=function(i){i.preventDefault()}},yA=({enable:C,clickTolerance:i,bearingDegreesPerPixelMoved:h=.8})=>{const b=new Ei({checkCorrectEvent:E=>O.mouseButton(E)===0&&E.ctrlKey||O.mouseButton(E)===2});return new TA({clickTolerance:i,move:(E,B)=>({bearingDelta:(B.x-E.x)*h}),moveStateManager:b,enable:C,assignEvents:ya})},hs=({enable:C,clickTolerance:i,pitchDegreesPerPixelMoved:h=-.5})=>{const b=new Ei({checkCorrectEvent:E=>O.mouseButton(E)===0&&E.ctrlKey||O.mouseButton(E)===2});return new TA({clickTolerance:i,move:(E,B)=>({pitchDelta:(B.y-E.y)*h}),moveStateManager:b,enable:C,assignEvents:ya})};class on{constructor(i,h){this._minTouches=i.cooperativeGestures?2:1,this._clickTolerance=i.clickTolerance||1,this._map=h,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new c.P(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(i,h,b){return this._calculateTransform(i,h,b)}touchmove(i,h,b){if(this._map._cooperativeGestures&&(this._minTouches===2&&b.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(i,!1,b.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(b.length<this._minTouches))return i.preventDefault(),this._calculateTransform(i,h,b)}touchend(i,h,b){this._calculateTransform(i,h,b),this._active&&b.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(i,h,b){b.length>0&&(this._active=!0);const E=er(b,h),B=new c.P(0,0),F=new c.P(0,0);let A=0;for(const l in E){const f=E[l],m=this._touches[l];m&&(B._add(f),F._add(f.sub(m)),A++,E[l]=f)}if(this._touches=E,A<this._minTouches||!F.mag())return;const s=F.div(A);return this._sum._add(s),this._sum.mag()<this._clickTolerance?void 0:{around:B.div(A),panDelta:s}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class SA{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(i,h,b){this._firstTwoTouches||b.length<2||(this._firstTwoTouches=[b[0].identifier,b[1].identifier],this._start([h[0],h[1]]))}touchmove(i,h,b){if(!this._firstTwoTouches)return;i.preventDefault();const[E,B]=this._firstTwoTouches,F=CA(b,h,E),A=CA(b,h,B);if(!F||!A)return;const s=this._aroundCenter?null:F.add(A).div(2);return this._move([F,A],s,i)}touchend(i,h,b){if(!this._firstTwoTouches)return;const[E,B]=this._firstTwoTouches,F=CA(b,h,E),A=CA(b,h,B);F&&A||(this._active&&O.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(i){this._enabled=!0,this._aroundCenter=!!i&&i.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function CA(C,i,h){for(let b=0;b<C.length;b++)if(C[b].identifier===h)return i[b]}function vA(C,i){return Math.log(C/i)/Math.LN2}class va extends SA{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(i){this._startDistance=this._distance=i[0].dist(i[1])}_move(i,h){const b=this._distance;if(this._distance=i[0].dist(i[1]),this._active||!(Math.abs(vA(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:vA(this._distance,b),pinchAround:h}}}function Kt(C,i){return 180*C.angleWith(i)/Math.PI}class Vo extends SA{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(i){this._startVector=this._vector=i[0].sub(i[1]),this._minDiameter=i[0].dist(i[1])}_move(i,h){const b=this._vector;if(this._vector=i[0].sub(i[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Kt(this._vector,b),pinchAround:h}}_isBelowThreshold(i){this._minDiameter=Math.min(this._minDiameter,i.mag());const h=25/(Math.PI*this._minDiameter)*360,b=Kt(i,this._startVector);return Math.abs(b)<h}}function Ha(C){return Math.abs(C.y)>Math.abs(C.x)}class Ds extends SA{constructor(i){super(),this._map=i}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(i,h,b){super.touchstart(i,h,b),this._currentTouchCount=b.length}_start(i){this._lastPoints=i,Ha(i[0].sub(i[1]))&&(this._valid=!1)}_move(i,h,b){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const E=i[0].sub(this._lastPoints[0]),B=i[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(E,B,b.timeStamp),this._valid?(this._lastPoints=i,this._active=!0,{pitchDelta:(E.y+B.y)/2*-.5}):void 0}gestureBeginsVertically(i,h,b){if(this._valid!==void 0)return this._valid;const E=i.mag()>=2,B=h.mag()>=2;if(!E&&!B)return;if(!E||!B)return this._firstMove===void 0&&(this._firstMove=b),b-this._firstMove<100&&void 0;const F=i.y>0==h.y>0;return Ha(i)&&Ha(h)&&F}}const ho={panStep:100,bearingStep:15,pitchStep:10};class $a{constructor(i){this._tr=new HA(i);const h=ho;this._panStep=h.panStep,this._bearingStep=h.bearingStep,this._pitchStep=h.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(i){if(i.altKey||i.ctrlKey||i.metaKey)return;let h=0,b=0,E=0,B=0,F=0;switch(i.keyCode){case 61:case 107:case 171:case 187:h=1;break;case 189:case 109:case 173:h=-1;break;case 37:i.shiftKey?b=-1:(i.preventDefault(),B=-1);break;case 39:i.shiftKey?b=1:(i.preventDefault(),B=1);break;case 38:i.shiftKey?E=1:(i.preventDefault(),F=-1);break;case 40:i.shiftKey?E=-1:(i.preventDefault(),F=1);break;default:return}return this._rotationDisabled&&(b=0,E=0),{cameraAnimation:A=>{const s=this._tr;A.easeTo({duration:300,easeId:"keyboardHandler",easing:fo,zoom:h?Math.round(s.zoom)+h*(i.shiftKey?2:1):s.zoom,bearing:s.bearing+b*this._bearingStep,pitch:s.pitch+E*this._pitchStep,offset:[-B*this._panStep,-F*this._panStep],center:s.center},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function fo(C){return C*(2-C)}const Ps=4.000244140625;class or{constructor(i,h){this._onTimeout=b=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(b)},this._map=i,this._tr=new HA(i),this._el=i.getCanvasContainer(),this._triggerRenderFrame=h,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(i){this._defaultZoomRate=i}setWheelZoomRate(i){this._wheelZoomRate=i}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(i){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!i&&i.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(i){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!i[this._map._metaKey])return;i.preventDefault()}let h=i.deltaMode===WheelEvent.DOM_DELTA_LINE?40*i.deltaY:i.deltaY;const b=c.h.now(),E=b-(this._lastWheelEventTime||0);this._lastWheelEventTime=b,h!==0&&h%Ps==0?this._type="wheel":h!==0&&Math.abs(h)<4?this._type="trackpad":E>400?(this._type=null,this._lastValue=h,this._timeout=setTimeout(this._onTimeout,40,i)):this._type||(this._type=Math.abs(E*h)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,h+=this._lastValue)),i.shiftKey&&h&&(h/=4),this._type&&(this._lastWheelEvent=i,this._delta-=h,this._active||this._start(i)),i.preventDefault()}_start(i){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const h=O.mousePos(this._el,i),b=this._tr;this._around=c.L.convert(this._aroundCenter?b.center:b.unproject(h)),this._aroundPoint=b.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const i=this._tr.transform;if(this._delta!==0){const A=this._type==="wheel"&&Math.abs(this._delta)>Ps?this._wheelZoomRate:this._defaultZoomRate;let s=2/(1+Math.exp(-Math.abs(this._delta*A)));this._delta<0&&s!==0&&(s=1/s);const l=typeof this._targetZoom=="number"?i.zoomScale(this._targetZoom):i.scale;this._targetZoom=Math.min(i.maxZoom,Math.max(i.minZoom,i.scaleZoom(l*s))),this._type==="wheel"&&(this._startZoom=i.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const h=typeof this._targetZoom=="number"?this._targetZoom:i.zoom,b=this._startZoom,E=this._easing;let B,F=!1;if(this._type==="wheel"&&b&&E){const A=Math.min((c.h.now()-this._lastWheelEventTime)/200,1),s=E(A);B=c.B.number(b,h,s),A<1?this._frameId||(this._frameId=!0):F=!0}else B=h,F=!0;return this._active=!0,F&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!F,zoomDelta:B-i.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(i){let h=c.bb;if(this._prevEase){const b=this._prevEase,E=(c.h.now()-b.start)/b.duration,B=b.easing(E+.01)-b.easing(E),F=.27/Math.sqrt(B*B+1e-4)*.01,A=Math.sqrt(.0729-F*F);h=c.ba(F,A,.25,1)}return this._prevEase={start:c.h.now(),duration:i,easing:h},h}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class cl{constructor(i,h){this._clickZoom=i,this._tapZoom=h}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class hl{constructor(i){this._tr=new HA(i),this.reset()}reset(){this._active=!1}dblclick(i,h){return i.preventDefault(),{cameraAnimation:b=>{b.easeTo({duration:300,zoom:this._tr.zoom+(i.shiftKey?-1:1),around:this._tr.unproject(h)},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class fl{constructor(){this._tap=new MA({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(i,h,b){if(!this._swipePoint)if(this._tapTime){const E=h[0],B=i.timeStamp-this._tapTime<500,F=this._tapPoint.dist(E)<30;B&&F?b.length>0&&(this._swipePoint=E,this._swipeTouch=b[0].identifier):this.reset()}else this._tap.touchstart(i,h,b)}touchmove(i,h,b){if(this._tapTime){if(this._swipePoint){if(b[0].identifier!==this._swipeTouch)return;const E=h[0],B=E.y-this._swipePoint.y;return this._swipePoint=E,i.preventDefault(),this._active=!0,{zoomDelta:B/128}}}else this._tap.touchmove(i,h,b)}touchend(i,h,b){if(this._tapTime)this._swipePoint&&b.length===0&&this.reset();else{const E=this._tap.touchend(i,h,b);E&&(this._tapTime=i.timeStamp,this._tapPoint=E)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class po{constructor(i,h,b){this._el=i,this._mousePan=h,this._touchPan=b}enable(i){this._inertiaOptions=i||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Or{constructor(i,h,b){this._pitchWithRotate=i.pitchWithRotate,this._mouseRotate=h,this._mousePitch=b}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class $A{constructor(i,h,b,E){this._el=i,this._touchZoom=h,this._touchRotate=b,this._tapDragZoom=E,this._rotationDisabled=!1,this._enabled=!0}enable(i){this._touchZoom.enable(i),this._rotationDisabled||this._touchRotate.enable(i),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Uo=C=>C.zoom||C.drag||C.pitch||C.rotate;class ja extends c.k{}function Qo(C){return C.panDelta&&C.panDelta.mag()||C.zoomDelta||C.bearingDelta||C.pitchDelta}class Wa{constructor(i,h){this.handleWindowEvent=E=>{this.handleEvent(E,`${E.type}Window`)},this.handleEvent=(E,B)=>{if(E.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const F=E.type==="renderFrame"?void 0:E,A={needsRenderFrame:!1},s={},l={},f=E.touches,m=f?this._getMapTouches(f):void 0,k=m?O.touchPos(this._el,m):O.mousePos(this._el,E);for(const{handlerName:Q,handler:Z,allowed:X}of this._handlers){if(!Z.isEnabled())continue;let ie;this._blockedByActive(l,X,Q)?Z.reset():Z[B||E.type]&&(ie=Z[B||E.type](E,k,m),this.mergeHandlerResult(A,s,ie,Q,F),ie&&ie.needsRenderFrame&&this._triggerRenderFrame()),(ie||Z.isActive())&&(l[Q]=Z)}const I={};for(const Q in this._previousActiveHandlers)l[Q]||(I[Q]=F);this._previousActiveHandlers=l,(Object.keys(I).length||Qo(A))&&(this._changes.push([A,s,I]),this._triggerRenderFrame()),(Object.keys(l).length||Qo(A))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:D}=A;D&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],D(this._map))},this._map=i,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new ot(i),this._bearingSnap=h.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(h);const b=this._el;this._listeners=[[b,"touchstart",{passive:!0}],[b,"touchmove",{passive:!1}],[b,"touchend",void 0],[b,"touchcancel",void 0],[b,"mousedown",void 0],[b,"mousemove",void 0],[b,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[b,"mouseover",void 0],[b,"mouseout",void 0],[b,"dblclick",void 0],[b,"click",void 0],[b,"keydown",{capture:!1}],[b,"keyup",void 0],[b,"wheel",{passive:!1}],[b,"contextmenu",void 0],[window,"blur",void 0]];for(const[E,B,F]of this._listeners)O.addEventListener(E,B,E===document?this.handleWindowEvent:this.handleEvent,F)}destroy(){for(const[i,h,b]of this._listeners)O.removeEventListener(i,h,i===document?this.handleWindowEvent:this.handleEvent,b)}_addDefaultHandlers(i){const h=this._map,b=h.getCanvasContainer();this._add("mapEvent",new sr(h,i));const E=h.boxZoom=new qa(h,i);this._add("boxZoom",E),i.interactive&&i.boxZoom&&E.enable();const B=new tA(h),F=new hl(h);h.doubleClickZoom=new cl(F,B),this._add("tapZoom",B),this._add("clickZoom",F),i.interactive&&i.doubleClickZoom&&h.doubleClickZoom.enable();const A=new fl;this._add("tapDragZoom",A);const s=h.touchPitch=new Ds(h);this._add("touchPitch",s),i.interactive&&i.touchPitch&&h.touchPitch.enable(i.touchPitch);const l=yA(i),f=hs(i);h.dragRotate=new Or(i,l,f),this._add("mouseRotate",l,["mousePitch"]),this._add("mousePitch",f,["mouseRotate"]),i.interactive&&i.dragRotate&&h.dragRotate.enable();const m=(({enable:X,clickTolerance:ie})=>{const Ae=new Ei({checkCorrectEvent:ce=>O.mouseButton(ce)===0&&!ce.ctrlKey});return new TA({clickTolerance:ie,move:(ce,fe)=>({around:fe,panDelta:fe.sub(ce)}),activateOnStart:!0,moveStateManager:Ae,enable:X,assignEvents:ya})})(i),k=new on(i,h);h.dragPan=new po(b,m,k),this._add("mousePan",m),this._add("touchPan",k,["touchZoom","touchRotate"]),i.interactive&&i.dragPan&&h.dragPan.enable(i.dragPan);const I=new Vo,D=new va;h.touchZoomRotate=new $A(b,D,I,A),this._add("touchRotate",I,["touchPan","touchZoom"]),this._add("touchZoom",D,["touchPan","touchRotate"]),i.interactive&&i.touchZoomRotate&&h.touchZoomRotate.enable(i.touchZoomRotate);const Q=h.scrollZoom=new or(h,()=>this._triggerRenderFrame());this._add("scrollZoom",Q,["mousePan"]),i.interactive&&i.scrollZoom&&h.scrollZoom.enable(i.scrollZoom);const Z=h.keyboard=new $a(h);this._add("keyboard",Z),i.interactive&&i.keyboard&&h.keyboard.enable(),this._add("blockableMapEvent",new Oi(h))}_add(i,h,b){this._handlers.push({handlerName:i,handler:h,allowed:b}),this._handlersById[i]=h}stop(i){if(!this._updatingCamera){for(const{handler:h}of this._handlers)h.reset();this._inertia.clear(),this._fireEvents({},{},i),this._changes=[]}}isActive(){for(const{handler:i}of this._handlers)if(i.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Uo(this._eventsInProgress)||this.isZooming()}_blockedByActive(i,h,b){for(const E in i)if(E!==b&&(!h||h.indexOf(E)<0))return!0;return!1}_getMapTouches(i){const h=[];for(const b of i)this._el.contains(b.target)&&h.push(b);return h}mergeHandlerResult(i,h,b,E,B){if(!b)return;c.e(i,b);const F={handlerName:E,originalEvent:b.originalEvent||B};b.zoomDelta!==void 0&&(h.zoom=F),b.panDelta!==void 0&&(h.drag=F),b.pitchDelta!==void 0&&(h.pitch=F),b.bearingDelta!==void 0&&(h.rotate=F)}_applyChanges(){const i={},h={},b={};for(const[E,B,F]of this._changes)E.panDelta&&(i.panDelta=(i.panDelta||new c.P(0,0))._add(E.panDelta)),E.zoomDelta&&(i.zoomDelta=(i.zoomDelta||0)+E.zoomDelta),E.bearingDelta&&(i.bearingDelta=(i.bearingDelta||0)+E.bearingDelta),E.pitchDelta&&(i.pitchDelta=(i.pitchDelta||0)+E.pitchDelta),E.around!==void 0&&(i.around=E.around),E.pinchAround!==void 0&&(i.pinchAround=E.pinchAround),E.noInertia&&(i.noInertia=E.noInertia),c.e(h,B),c.e(b,F);this._updateMapTransform(i,h,b),this._changes=[]}_updateMapTransform(i,h,b){const E=this._map,B=E._getTransformForUpdate(),F=E.terrain;if(!(Qo(i)||F&&this._terrainMovement))return this._fireEvents(h,b,!0);let{panDelta:A,zoomDelta:s,bearingDelta:l,pitchDelta:f,around:m,pinchAround:k}=i;k!==void 0&&(m=k),E._stop(!0),m=m||E.transform.centerPoint;const I=B.pointLocation(A?m.sub(A):m);l&&(B.bearing+=l),f&&(B.pitch+=f),s&&(B.zoom+=s),F?this._terrainMovement||!h.drag&&!h.zoom?h.drag&&this._terrainMovement?B.center=B.pointLocation(B.centerPoint.sub(A)):B.setLocationAtPoint(I,m):(this._terrainMovement=!0,this._map._elevationFreeze=!0,B.setLocationAtPoint(I,m),this._map.once("moveend",()=>{this._map._elevationFreeze=!1,this._terrainMovement=!1,B.recalculateZoom(E.terrain)})):B.setLocationAtPoint(I,m),E._applyUpdatedTransform(B),this._map._update(),i.noInertia||this._inertia.record(i),this._fireEvents(h,b,!0)}_fireEvents(i,h,b){const E=Uo(this._eventsInProgress),B=Uo(i),F={};for(const f in i){const{originalEvent:m}=i[f];this._eventsInProgress[f]||(F[`${f}start`]=m),this._eventsInProgress[f]=i[f]}!E&&B&&this._fireEvent("movestart",B.originalEvent);for(const f in F)this._fireEvent(f,F[f]);B&&this._fireEvent("move",B.originalEvent);for(const f in i){const{originalEvent:m}=i[f];this._fireEvent(f,m)}const A={};let s;for(const f in this._eventsInProgress){const{handlerName:m,originalEvent:k}=this._eventsInProgress[f];this._handlersById[m].isActive()||(delete this._eventsInProgress[f],s=h[m]||k,A[`${f}end`]=s)}for(const f in A)this._fireEvent(f,A[f]);const l=Uo(this._eventsInProgress);if(b&&(E||B)&&!l){this._updatingCamera=!0;const f=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),m=k=>k!==0&&-this._bearingSnap<k&&k<this._bearingSnap;!f||!f.essential&&c.h.prefersReducedMotion?(this._map.fire(new c.k("moveend",{originalEvent:s})),m(this._map.getBearing())&&this._map.resetNorth()):(m(f.bearing||this._map.getBearing())&&(f.bearing=0),f.freezeElevation=!0,this._map.easeTo(f,{originalEvent:s})),this._updatingCamera=!1}}_fireEvent(i,h){this._map.fire(new c.k(i,h?{originalEvent:h}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(i=>{delete this._frameId,this.handleEvent(new ja("renderFrame",{timeStamp:i})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class ii extends c.E{constructor(i,h){super(),this._renderFrameCallback=()=>{const b=Math.min((c.h.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(b)),b<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=i,this._bearingSnap=h.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new c.L(this.transform.center.lng,this.transform.center.lat)}setCenter(i,h){return this.jumpTo({center:i},h)}panBy(i,h,b){return i=c.P.convert(i).mult(-1),this.panTo(this.transform.center,c.e({offset:i},h),b)}panTo(i,h,b){return this.easeTo(c.e({center:i},h),b)}getZoom(){return this.transform.zoom}setZoom(i,h){return this.jumpTo({zoom:i},h),this}zoomTo(i,h,b){return this.easeTo(c.e({zoom:i},h),b)}zoomIn(i,h){return this.zoomTo(this.getZoom()+1,i,h),this}zoomOut(i,h){return this.zoomTo(this.getZoom()-1,i,h),this}getBearing(){return this.transform.bearing}setBearing(i,h){return this.jumpTo({bearing:i},h),this}getPadding(){return this.transform.padding}setPadding(i,h){return this.jumpTo({padding:i},h),this}rotateTo(i,h,b){return this.easeTo(c.e({bearing:i},h),b)}resetNorth(i,h){return this.rotateTo(0,c.e({duration:1e3},i),h),this}resetNorthPitch(i,h){return this.easeTo(c.e({bearing:0,pitch:0,duration:1e3},i),h),this}snapToNorth(i,h){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(i,h):this}getPitch(){return this.transform.pitch}setPitch(i,h){return this.jumpTo({pitch:i},h),this}cameraForBounds(i,h){i=Dn.convert(i);const b=h&&h.bearing||0;return this._cameraForBoxAndBearing(i.getNorthWest(),i.getSouthEast(),b,h)}_cameraForBoxAndBearing(i,h,b,E){const B={top:0,bottom:0,right:0,left:0};if(typeof(E=c.e({padding:B,offset:[0,0],maxZoom:this.transform.maxZoom},E)).padding=="number"){const fe=E.padding;E.padding={top:fe,bottom:fe,right:fe,left:fe}}E.padding=c.e(B,E.padding);const F=this.transform,A=F.padding,s=F.project(c.L.convert(i)),l=F.project(c.L.convert(h)),f=s.rotate(-b*Math.PI/180),m=l.rotate(-b*Math.PI/180),k=new c.P(Math.max(f.x,m.x),Math.max(f.y,m.y)),I=new c.P(Math.min(f.x,m.x),Math.min(f.y,m.y)),D=k.sub(I),Q=(F.width-(A.left+A.right+E.padding.left+E.padding.right))/D.x,Z=(F.height-(A.top+A.bottom+E.padding.top+E.padding.bottom))/D.y;if(Z<0||Q<0)return void c.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const X=Math.min(F.scaleZoom(F.scale*Math.min(Q,Z)),E.maxZoom),ie=c.P.convert(E.offset),Ae=new c.P((E.padding.left-E.padding.right)/2,(E.padding.top-E.padding.bottom)/2).rotate(b*Math.PI/180),ce=ie.add(Ae).mult(F.scale/F.zoomScale(X));return{center:F.unproject(s.add(l).div(2).sub(ce)),zoom:X,bearing:b}}fitBounds(i,h,b){return this._fitInternal(this.cameraForBounds(i,h),h,b)}fitScreenCoordinates(i,h,b,E,B){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(c.P.convert(i)),this.transform.pointLocation(c.P.convert(h)),b,E),E,B)}_fitInternal(i,h,b){return i?(delete(h=c.e(i,h)).padding,h.linear?this.easeTo(h,b):this.flyTo(h,b)):this}jumpTo(i,h){this.stop();const b=this._getTransformForUpdate();let E=!1,B=!1,F=!1;return"zoom"in i&&b.zoom!==+i.zoom&&(E=!0,b.zoom=+i.zoom),i.center!==void 0&&(b.center=c.L.convert(i.center)),"bearing"in i&&b.bearing!==+i.bearing&&(B=!0,b.bearing=+i.bearing),"pitch"in i&&b.pitch!==+i.pitch&&(F=!0,b.pitch=+i.pitch),i.padding==null||b.isPaddingEqual(i.padding)||(b.padding=i.padding),this._applyUpdatedTransform(b),this.fire(new c.k("movestart",h)).fire(new c.k("move",h)),E&&this.fire(new c.k("zoomstart",h)).fire(new c.k("zoom",h)).fire(new c.k("zoomend",h)),B&&this.fire(new c.k("rotatestart",h)).fire(new c.k("rotate",h)).fire(new c.k("rotateend",h)),F&&this.fire(new c.k("pitchstart",h)).fire(new c.k("pitch",h)).fire(new c.k("pitchend",h)),this.fire(new c.k("moveend",h))}calculateCameraOptionsFromTo(i,h,b,E=0){const B=c.U.fromLngLat(i,h),F=c.U.fromLngLat(b,E),A=F.x-B.x,s=F.y-B.y,l=F.z-B.z,f=Math.hypot(A,s,l);if(f===0)throw new Error("Can't calculate camera options with same From and To");const m=Math.hypot(A,s),k=this.transform.scaleZoom(this.transform.cameraToCenterDistance/f/this.transform.tileSize),I=180*Math.atan2(A,-s)/Math.PI;let D=180*Math.acos(m/f)/Math.PI;return D=l<0?90-D:90+D,{center:F.toLngLat(),zoom:k,pitch:D,bearing:I}}easeTo(i,h){this._stop(!1,i.easeId),((i=c.e({offset:[0,0],duration:500,easing:c.bb},i)).animate===!1||!i.essential&&c.h.prefersReducedMotion)&&(i.duration=0);const b=this._getTransformForUpdate(),E=this.getZoom(),B=this.getBearing(),F=this.getPitch(),A=this.getPadding(),s="zoom"in i?+i.zoom:E,l="bearing"in i?this._normalizeBearing(i.bearing,B):B,f="pitch"in i?+i.pitch:F,m="padding"in i?i.padding:b.padding,k=c.P.convert(i.offset);let I=b.centerPoint.add(k);const D=b.pointLocation(I),Q=c.L.convert(i.center||D);this._normalizeCenter(Q);const Z=b.project(D),X=b.project(Q).sub(Z),ie=b.zoomScale(s-E);let Ae,ce;i.around&&(Ae=c.L.convert(i.around),ce=b.locationPoint(Ae));const fe={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||s!==E,this._rotating=this._rotating||B!==l,this._pitching=this._pitching||f!==F,this._padding=!b.isPaddingEqual(m),this._easeId=i.easeId,this._prepareEase(h,i.noMoveStart,fe),this.terrain&&this._prepareElevation(Q),this._ease(ve=>{if(this._zooming&&(b.zoom=c.B.number(E,s,ve)),this._rotating&&(b.bearing=c.B.number(B,l,ve)),this._pitching&&(b.pitch=c.B.number(F,f,ve)),this._padding&&(b.interpolatePadding(A,m,ve),I=b.centerPoint.add(k)),this.terrain&&!i.freezeElevation&&this._updateElevation(ve),Ae)b.setLocationAtPoint(Ae,ce);else{const Ne=b.zoomScale(b.zoom-E),qe=s>E?Math.min(2,ie):Math.max(.5,ie),Pe=Math.pow(qe,1-ve),Ve=b.unproject(Z.add(X.mult(ve*Pe)).mult(Ne));b.setLocationAtPoint(b.renderWorldCopies?Ve.wrap():Ve,I)}this._applyUpdatedTransform(b),this._fireMoveEvents(h)},ve=>{this.terrain&&this._finalizeElevation(),this._afterEase(h,ve)},i),this}_prepareEase(i,h,b={}){this._moving=!0,h||b.moving||this.fire(new c.k("movestart",i)),this._zooming&&!b.zooming&&this.fire(new c.k("zoomstart",i)),this._rotating&&!b.rotating&&this.fire(new c.k("rotatestart",i)),this._pitching&&!b.pitching&&this.fire(new c.k("pitchstart",i))}_prepareElevation(i){this._elevationCenter=i,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(i,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(i){this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const h=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(i<1&&h!==this._elevationTarget){const b=this._elevationTarget-this._elevationStart;this._elevationStart+=i*(b-(h-(b*i+this._elevationStart))/(1-i)),this._elevationTarget=h}this.transform.elevation=c.B.number(this._elevationStart,this._elevationTarget,i)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(i){if(!this.transformCameraUpdate)return;const h=i.clone(),{center:b,zoom:E,pitch:B,bearing:F,elevation:A}=this.transformCameraUpdate(h);b&&(h.center=b),E!==void 0&&(h.zoom=E),B!==void 0&&(h.pitch=B),F!==void 0&&(h.bearing=F),A!==void 0&&(h.elevation=A),this.transform.apply(h)}_fireMoveEvents(i){this.fire(new c.k("move",i)),this._zooming&&this.fire(new c.k("zoom",i)),this._rotating&&this.fire(new c.k("rotate",i)),this._pitching&&this.fire(new c.k("pitch",i))}_afterEase(i,h){if(this._easeId&&h&&this._easeId===h)return;delete this._easeId;const b=this._zooming,E=this._rotating,B=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,b&&this.fire(new c.k("zoomend",i)),E&&this.fire(new c.k("rotateend",i)),B&&this.fire(new c.k("pitchend",i)),this.fire(new c.k("moveend",i))}flyTo(i,h){if(!i.essential&&c.h.prefersReducedMotion){const gt=c.F(i,["center","zoom","bearing","pitch","around"]);return this.jumpTo(gt,h)}this.stop(),i=c.e({offset:[0,0],speed:1.2,curve:1.42,easing:c.bb},i);const b=this._getTransformForUpdate(),E=this.getZoom(),B=this.getBearing(),F=this.getPitch(),A=this.getPadding(),s="zoom"in i?c.ad(+i.zoom,b.minZoom,b.maxZoom):E,l="bearing"in i?this._normalizeBearing(i.bearing,B):B,f="pitch"in i?+i.pitch:F,m="padding"in i?i.padding:b.padding,k=b.zoomScale(s-E),I=c.P.convert(i.offset);let D=b.centerPoint.add(I);const Q=b.pointLocation(D),Z=c.L.convert(i.center||Q);this._normalizeCenter(Z);const X=b.project(Q),ie=b.project(Z).sub(X);let Ae=i.curve;const ce=Math.max(b.width,b.height),fe=ce/k,ve=ie.mag();if("minZoom"in i){const gt=c.ad(Math.min(i.minZoom,E,s),b.minZoom,b.maxZoom),Mn=ce/b.zoomScale(gt-E);Ae=Math.sqrt(Mn/ve*2)}const Ne=Ae*Ae;function qe(gt){const Mn=(fe*fe-ce*ce+(gt?-1:1)*Ne*Ne*ve*ve)/(2*(gt?fe:ce)*Ne*ve);return Math.log(Math.sqrt(Mn*Mn+1)-Mn)}function Pe(gt){return(Math.exp(gt)-Math.exp(-gt))/2}function Ve(gt){return(Math.exp(gt)+Math.exp(-gt))/2}const Ue=qe(!1);let Mt=function(gt){return Ve(Ue)/Ve(Ue+Ae*gt)},ht=function(gt){return ce*((Ve(Ue)*(Pe(Mn=Ue+Ae*gt)/Ve(Mn))-Pe(Ue))/Ne)/ve;var Mn},_t=(qe(!0)-Ue)/Ae;if(Math.abs(ve)<1e-6||!isFinite(_t)){if(Math.abs(ce-fe)<1e-6)return this.easeTo(i,h);const gt=fe<ce?-1:1;_t=Math.abs(Math.log(fe/ce))/Ae,ht=function(){return 0},Mt=function(Mn){return Math.exp(gt*Ae*Mn)}}return i.duration="duration"in i?+i.duration:1e3*_t/("screenSpeed"in i?+i.screenSpeed/Ae:+i.speed),i.maxDuration&&i.duration>i.maxDuration&&(i.duration=0),this._zooming=!0,this._rotating=B!==l,this._pitching=f!==F,this._padding=!b.isPaddingEqual(m),this._prepareEase(h,!1),this.terrain&&this._prepareElevation(Z),this._ease(gt=>{const Mn=gt*_t,cn=1/Mt(Mn);b.zoom=gt===1?s:E+b.scaleZoom(cn),this._rotating&&(b.bearing=c.B.number(B,l,gt)),this._pitching&&(b.pitch=c.B.number(F,f,gt)),this._padding&&(b.interpolatePadding(A,m,gt),D=b.centerPoint.add(I)),this.terrain&&!i.freezeElevation&&this._updateElevation(gt);const Yt=gt===1?Z:b.unproject(X.add(ie.mult(ht(Mn))).mult(cn));b.setLocationAtPoint(b.renderWorldCopies?Yt.wrap():Yt,D),this._applyUpdatedTransform(b),this._fireMoveEvents(h)},()=>{this.terrain&&this._finalizeElevation(),this._afterEase(h)},i),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(i,h){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const b=this._onEaseEnd;delete this._onEaseEnd,b.call(this,h)}if(!i){const b=this.handlers;b&&b.stop(!1)}return this}_ease(i,h,b){b.animate===!1||b.duration===0?(i(1),h()):(this._easeStart=c.h.now(),this._easeOptions=b,this._onEaseFrame=i,this._onEaseEnd=h,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(i,h){i=c.b5(i,-180,180);const b=Math.abs(i-h);return Math.abs(i-360-h)<b&&(i-=360),Math.abs(i+360-h)<b&&(i+=360),i}_normalizeCenter(i){const h=this.transform;if(!h.renderWorldCopies||h.lngRange)return;const b=i.lng-h.center.lng;i.lng+=b>180?-360:b<-180?360:0}queryTerrainElevation(i){return this.terrain?this.terrain.getElevationForLngLatZoom(c.L.convert(i),this.transform.tileZoom)-this.transform.elevation:null}}class Ni{constructor(i={}){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=h=>{!h||h.sourceDataType!=="metadata"&&h.sourceDataType!=="visibility"&&h.dataType!=="style"&&h.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=i}getDefaultPosition(){return"bottom-right"}onAdd(i){return this._map=i,this._compact=this.options&&this.options.compact,this._container=O.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=O.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=O.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){O.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(i,h){const b=this._map._getUIString(`AttributionControl.${h}`);i.title=b,i.setAttribute("aria-label",b)}_updateAttributions(){if(!this._map.style)return;let i=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?i=i.concat(this.options.customAttribution.map(E=>typeof E!="string"?"":E)):typeof this.options.customAttribution=="string"&&i.push(this.options.customAttribution)),this._map.style.stylesheet){const E=this._map.style.stylesheet;this.styleOwner=E.owner,this.styleId=E.id}const h=this._map.style.sourceCaches;for(const E in h){const B=h[E];if(B.used||B.usedForTerrain){const F=B.getSource();F.attribution&&i.indexOf(F.attribution)<0&&i.push(F.attribution)}}i=i.filter(E=>String(E).trim()),i.sort((E,B)=>E.length-B.length),i=i.filter((E,B)=>{for(let F=B+1;F<i.length;F++)if(i[F].indexOf(E)>=0)return!1;return!0});const b=i.join(" | ");b!==this._attribHTML&&(this._attribHTML=b,i.length?(this._innerContainer.innerHTML=b,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Pi{constructor(i={}){this._updateCompact=()=>{const h=this._container.children;if(h.length){const b=h[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&b.classList.add("maplibregl-compact"):b.classList.remove("maplibregl-compact")}},this.options=i}getDefaultPosition(){return"bottom-left"}onAdd(i){this._map=i,this._compact=this.options&&this.options.compact,this._container=O.create("div","maplibregl-ctrl");const h=O.create("a","maplibregl-ctrl-logo");return h.target="_blank",h.rel="noopener nofollow",h.href="https://maplibre.org/",h.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),h.setAttribute("rel","noopener nofollow"),this._container.appendChild(h),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){O.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Vr{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(i){const h=++this._id;return this._queue.push({callback:i,id:h,cancelled:!1}),h}remove(i){const h=this._currentlyRunning,b=h?this._queue.concat(h):this._queue;for(const E of b)if(E.id===i)return void(E.cancelled=!0)}run(i=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const h=this._currentlyRunning=this._queue;this._queue=[];for(const b of h)if(!b.cancelled&&(b.callback(i),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const Tn={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"};var IA=c.Q([{name:"a_pos3d",type:"Int16",components:3}]);class Ya extends c.E{constructor(i){super(),this.sourceCache=i,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,i.usedForTerrain=!0,i.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(i,h){this.sourceCache.update(i,h),this._renderableTilesKeys=[];const b={};for(const E of i.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:h}))b[E.key]=!0,this._renderableTilesKeys.push(E.key),this._tiles[E.key]||(E.posMatrix=new Float64Array(16),c.aS(E.posMatrix,0,c.N,0,c.N,0,1),this._tiles[E.key]=new Jn(E,this.tileSize));for(const E in this._tiles)b[E]||delete this._tiles[E]}freeRtt(i){for(const h in this._tiles){const b=this._tiles[h];(!i||b.tileID.equals(i)||b.tileID.isChildOf(i)||i.isChildOf(b.tileID))&&(b.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(i=>this.getTileByID(i))}getTileByID(i){return this._tiles[i]}getTerrainCoords(i){const h={};for(const b of this._renderableTilesKeys){const E=this._tiles[b].tileID;if(E.canonical.equals(i.canonical)){const B=i.clone();B.posMatrix=new Float64Array(16),c.aS(B.posMatrix,0,c.N,0,c.N,0,1),h[b]=B}else if(E.canonical.isChildOf(i.canonical)){const B=i.clone();B.posMatrix=new Float64Array(16);const F=E.canonical.z-i.canonical.z,A=E.canonical.x-(E.canonical.x>>F<<F),s=E.canonical.y-(E.canonical.y>>F<<F),l=c.N>>F;c.aS(B.posMatrix,0,l,0,l,0,1),c.$(B.posMatrix,B.posMatrix,[-A*l,-s*l,0]),h[b]=B}else if(i.canonical.isChildOf(E.canonical)){const B=i.clone();B.posMatrix=new Float64Array(16);const F=i.canonical.z-E.canonical.z,A=i.canonical.x-(i.canonical.x>>F<<F),s=i.canonical.y-(i.canonical.y>>F<<F),l=c.N>>F;c.aS(B.posMatrix,0,c.N,0,c.N,0,1),c.$(B.posMatrix,B.posMatrix,[A*l,s*l,0]),c.a0(B.posMatrix,B.posMatrix,[1/2**F,1/2**F,0]),h[b]=B}}return h}getSourceTile(i,h){const b=this.sourceCache._source;let E=i.overscaledZ-this.deltaZoom;if(E>b.maxzoom&&(E=b.maxzoom),E<b.minzoom)return null;this._sourceTileCache[i.key]||(this._sourceTileCache[i.key]=i.scaledTo(E).key);let B=this.sourceCache.getTileByID(this._sourceTileCache[i.key]);if((!B||!B.dem)&&h)for(;E>=b.minzoom&&(!B||!B.dem);)B=this.sourceCache.getTileByID(i.scaledTo(E--).key);return B}tilesAfterTime(i=Date.now()){return Object.values(this._tiles).filter(h=>h.timeAdded>=i)}}class fs{constructor(i,h,b){this.painter=i,this.sourceCache=new Ya(h),this.options=b,this.exaggeration=typeof b.exaggeration=="number"?b.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(i,h,b,E=c.N){var B;if(!(h>=0&&h<E&&b>=0&&b<E))return 0;const F=this.getTerrainData(i),A=(B=F.tile)===null||B===void 0?void 0:B.dem;if(!A)return 0;const s=function(D,Q,Z){var X=Q[0],ie=Q[1];return D[0]=Z[0]*X+Z[4]*ie+Z[12],D[1]=Z[1]*X+Z[5]*ie+Z[13],D}([],[h/E*c.N,b/E*c.N],F.u_terrain_matrix),l=[s[0]*A.dim,s[1]*A.dim],f=Math.floor(l[0]),m=Math.floor(l[1]),k=l[0]-f,I=l[1]-m;return A.get(f,m)*(1-k)*(1-I)+A.get(f+1,m)*k*(1-I)+A.get(f,m+1)*(1-k)*I+A.get(f+1,m+1)*k*I}getElevationForLngLatZoom(i,h){const{tileID:b,mercatorX:E,mercatorY:B}=this._getOverscaledTileIDFromLngLatZoom(i,h);return this.getElevation(b,E%c.N,B%c.N,c.N)}getElevation(i,h,b,E=c.N){return this.getDEMElevation(i,h,b,E)*this.exaggeration}getTerrainData(i){if(!this._emptyDemTexture){const E=this.painter.context,B=new c.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new Zt(E,B,E.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new Zt(E,new c.R({width:1,height:1}),E.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(E.gl.NEAREST,E.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=c.ao([])}const h=this.sourceCache.getSourceTile(i,!0);if(h&&h.dem&&(!h.demTexture||h.needsTerrainPrepare)){const E=this.painter.context;h.demTexture=this.painter.getTileTexture(h.dem.stride),h.demTexture?h.demTexture.update(h.dem.getPixels(),{premultiply:!1}):h.demTexture=new Zt(E,h.dem.getPixels(),E.gl.RGBA,{premultiply:!1}),h.demTexture.bind(E.gl.NEAREST,E.gl.CLAMP_TO_EDGE),h.needsTerrainPrepare=!1}const b=h&&h+h.tileID.key+i.key;if(b&&!this._demMatrixCache[b]){const E=this.sourceCache.sourceCache._source.maxzoom;let B=i.canonical.z-h.tileID.canonical.z;i.overscaledZ>i.canonical.z&&(i.canonical.z>=E?B=i.canonical.z-E:c.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const F=i.canonical.x-(i.canonical.x>>B<<B),A=i.canonical.y-(i.canonical.y>>B<<B),s=c.bc(new Float64Array(16),[1/(c.N<<B),1/(c.N<<B),0]);c.$(s,s,[F*c.N,A*c.N,0]),this._demMatrixCache[i.key]={matrix:s,coord:i}}return{u_depth:2,u_terrain:3,u_terrain_dim:h&&h.dem&&h.dem.dim||1,u_terrain_matrix:b?this._demMatrixCache[i.key].matrix:this._emptyDemMatrix,u_terrain_unpack:h&&h.dem&&h.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(h&&h.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:h}}getFramebuffer(i){const h=this.painter,b=h.width/devicePixelRatio,E=h.height/devicePixelRatio;return!this._fbo||this._fbo.width===b&&this._fbo.height===E||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new Zt(h.context,{width:b,height:E,data:null},h.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(h.context.gl.NEAREST,h.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new Zt(h.context,{width:b,height:E,data:null},h.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(h.context.gl.NEAREST,h.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=h.context.createFramebuffer(b,E,!0,!1),this._fbo.depthAttachment.set(h.context.createRenderbuffer(h.context.gl.DEPTH_COMPONENT16,b,E))),this._fbo.colorAttachment.set(i==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const i=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const h=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let B=0,F=0;B<this._coordsTextureSize;B++)for(let A=0;A<this._coordsTextureSize;A++,F+=4)h[F+0]=255&A,h[F+1]=255&B,h[F+2]=A>>8<<4|B>>8,h[F+3]=0;const b=new c.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(h.buffer)),E=new Zt(i,b,i.gl.RGBA,{premultiply:!1});return E.bind(i.gl.NEAREST,i.gl.CLAMP_TO_EDGE),this._coordsTexture=E,E}pointCoordinate(i){const h=new Uint8Array(4),b=this.painter.context,E=b.gl;b.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),E.readPixels(i.x,this.painter.height/devicePixelRatio-i.y-1,1,1,E.RGBA,E.UNSIGNED_BYTE,h),b.bindFramebuffer.set(null);const B=h[0]+(h[2]>>4<<8),F=h[1]+((15&h[2])<<8),A=this.coordsIndex[255-h[3]],s=A&&this.sourceCache.getTileByID(A);if(!s)return null;const l=this._coordsTextureSize,f=(1<<s.tileID.canonical.z)*l;return new c.U(this._allowMercatorOverflow(i,(s.tileID.canonical.x*l+B)/f),(s.tileID.canonical.y*l+F)/f,this.getElevation(s.tileID,B,F,l))}getTerrainMesh(){if(this._mesh)return this._mesh;const i=this.painter.context,h=new c.bd,b=new c.b0,E=this.meshSize,B=c.N/E,F=E*E;for(let m=0;m<=E;m++)for(let k=0;k<=E;k++)h.emplaceBack(k*B,m*B,0);for(let m=0;m<F;m+=E+1)for(let k=0;k<E;k++)b.emplaceBack(k+m,E+k+m+1,E+k+m+2),b.emplaceBack(k+m,E+k+m+2,k+m+1);const A=h.length,s=A+2*(E+1);for(const m of[0,1])for(let k=0;k<=E;k++)for(const I of[0,1])h.emplaceBack(k*B,m*c.N,I);for(let m=0;m<2*E;m+=2)b.emplaceBack(s+m,s+m+1,s+m+3),b.emplaceBack(s+m,s+m+3,s+m+2),b.emplaceBack(A+m,A+m+3,A+m+1),b.emplaceBack(A+m,A+m+2,A+m+3);const l=h.length,f=l+2*(E+1);for(const m of[0,1])for(let k=0;k<=E;k++)for(const I of[0,1])h.emplaceBack(m*c.N,k*B,I);for(let m=0;m<2*E;m+=2)b.emplaceBack(l+m,l+m+1,l+m+3),b.emplaceBack(l+m,l+m+3,l+m+2),b.emplaceBack(f+m,f+m+3,f+m+1),b.emplaceBack(f+m,f+m+2,f+m+3);return this._mesh={indexBuffer:i.createIndexBuffer(b),vertexBuffer:i.createVertexBuffer(h,IA.members),segments:c.S.simpleSegment(0,0,h.length,b.length)},this._mesh}getMeshFrameDelta(i){return 2*Math.PI*c.be/Math.pow(2,i)/5}getMinTileElevationForLngLatZoom(i,h){var b;const{tileID:E}=this._getOverscaledTileIDFromLngLatZoom(i,h);return(b=this.getMinMaxElevation(E).minElevation)!==null&&b!==void 0?b:0}getMinMaxElevation(i){const h=this.getTerrainData(i).tile,b={minElevation:null,maxElevation:null};return h&&h.dem&&(b.minElevation=h.dem.min*this.exaggeration,b.maxElevation=h.dem.max*this.exaggeration),b}_getOverscaledTileIDFromLngLatZoom(i,h){const b=c.U.fromLngLat(i.wrap()),E=(1<<h)*c.N,B=b.x*E,F=b.y*E,A=Math.floor(B/c.N),s=Math.floor(F/c.N);return{tileID:new c.O(h,0,h,A,s),mercatorX:B,mercatorY:F}}_allowMercatorOverflow(i,h){const b=i.x<this.painter.width/2;let E=c.bf(h);const B=this.painter.transform.center.lng;return b&&Math.sign(E)>0&&Math.sign(B)<0||!b&&Math.sign(E)<0&&Math.sign(B)>0?(E=360*Math.sign(B)+E,c.G(E)):h}}class xa{constructor(i,h,b){this._context=i,this._size=h,this._tileSize=b,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const i of this._objects)i.texture.destroy(),i.fbo.destroy()}_createObject(i){const h=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),b=new Zt(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return b.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),h.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),h.colorAttachment.set(b.texture),{id:i,fbo:h,texture:b,stamp:-1,inUse:!1}}getObjectForId(i){return this._objects[i]}useObject(i){i.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(h=>i.id!==h),this._recentlyUsed.push(i.id)}stampObject(i){i.stamp=++this._stamp}getOrCreateFreeObject(){for(const h of this._recentlyUsed)if(!this._objects[h].inUse)return this._objects[h];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const i=this._createObject(this._objects.length);return this._objects.push(i),i}freeObject(i){i.inUse=!1}freeAllObjects(){for(const i of this._objects)this.freeObject(i)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(i=>!i.inUse)===!1}}const pr={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class Hr{constructor(i,h){this.painter=i,this.terrain=h,this.pool=new xa(i.context,30,h.sourceCache.tileSize*h.qualityFactor)}destruct(){this.pool.destruct()}getTexture(i){return this.pool.getObjectForId(i.rtt[this._stacks.length-1].id).texture}prepareForRender(i,h){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=i._order.filter(b=>!i._layers[b].isHidden(h)),this._coordsDescendingInv={};for(const b in i.sourceCaches){this._coordsDescendingInv[b]={};const E=i.sourceCaches[b].getVisibleCoordinates();for(const B of E){const F=this.terrain.sourceCache.getTerrainCoords(B);for(const A in F)this._coordsDescendingInv[b][A]||(this._coordsDescendingInv[b][A]=[]),this._coordsDescendingInv[b][A].push(F[A])}}this._coordsDescendingInvStr={};for(const b of i._order){const E=i._layers[b],B=E.source;if(pr[E.type]&&!this._coordsDescendingInvStr[B]){this._coordsDescendingInvStr[B]={};for(const F in this._coordsDescendingInv[B])this._coordsDescendingInvStr[B][F]=this._coordsDescendingInv[B][F].map(A=>A.key).sort().join()}}for(const b of this._renderableTiles)for(const E in this._coordsDescendingInvStr){const B=this._coordsDescendingInvStr[E][b.tileID.key];B&&B!==b.rttCoords[E]&&(b.rtt=[])}}renderLayer(i){if(i.isHidden(this.painter.transform.zoom))return!1;const h=i.type,b=this.painter,E=this._renderableLayerIds[this._renderableLayerIds.length-1]===i.id;if(pr[h]&&(this._prevType&&pr[this._prevType]||this._stacks.push([]),this._prevType=h,this._stacks[this._stacks.length-1].push(i.id),!E))return!0;if(pr[this._prevType]||pr[h]&&E){this._prevType=h;const B=this._stacks.length-1,F=this._stacks[B]||[];for(const A of this._renderableTiles){if(this.pool.isFull()&&(_i(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(A),A.rtt[B]){const l=this.pool.getObjectForId(A.rtt[B].id);if(l.stamp===A.rtt[B].stamp){this.pool.useObject(l);continue}}const s=this.pool.getOrCreateFreeObject();this.pool.useObject(s),this.pool.stampObject(s),A.rtt[B]={id:s.id,stamp:s.stamp},b.context.bindFramebuffer.set(s.fbo.framebuffer),b.context.clear({color:c.aT.transparent,stencil:0}),b.currentStencilSource=void 0;for(let l=0;l<F.length;l++){const f=b.style._layers[F[l]],m=f.source?this._coordsDescendingInv[f.source][A.tileID.key]:[A.tileID];b.context.viewport.set([0,0,s.fbo.width,s.fbo.height]),b._renderTileClippingMasks(f,m),b.renderLayer(b,b.style.sourceCaches[f.source],f,m),f.source&&(A.rttCoords[f.source]=this._coordsDescendingInvStr[f.source][A.tileID.key])}}return _i(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),pr[h]}return!1}}const ct=U,wt={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:c.c.MAX_TILE_CACHE_ZOOM_LEVELS,localIdeographFontFamily:"sans-serif",transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,validateStyle:!0,maxCanvasSize:[4096,4096]},jA=C=>{C.touchstart=C.dragStart,C.touchmoveWindow=C.dragMove,C.touchend=C.dragEnd},Go={showCompass:!0,showZoom:!0,visualizePitch:!1};class qo{constructor(i,h,b=!1){this.mousedown=F=>{this.startMouse(c.e({},F,{ctrlKey:!0,preventDefault:()=>F.preventDefault()}),O.mousePos(this.element,F)),O.addEventListener(window,"mousemove",this.mousemove),O.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=F=>{this.moveMouse(F,O.mousePos(this.element,F))},this.mouseup=F=>{this.mouseRotate.dragEnd(F),this.mousePitch&&this.mousePitch.dragEnd(F),this.offTemp()},this.touchstart=F=>{F.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=O.touchPos(this.element,F.targetTouches)[0],this.startTouch(F,this._startPos),O.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),O.addEventListener(window,"touchend",this.touchend))},this.touchmove=F=>{F.targetTouches.length!==1?this.reset():(this._lastPos=O.touchPos(this.element,F.targetTouches)[0],this.moveTouch(F,this._lastPos))},this.touchend=F=>{F.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const E=i.dragRotate._mouseRotate.getClickTolerance(),B=i.dragRotate._mousePitch.getClickTolerance();this.element=h,this.mouseRotate=yA({clickTolerance:E,enable:!0}),this.touchRotate=(({enable:F,clickTolerance:A,bearingDegreesPerPixelMoved:s=.8})=>{const l=new Vl;return new TA({clickTolerance:A,move:(f,m)=>({bearingDelta:(m.x-f.x)*s}),moveStateManager:l,enable:F,assignEvents:jA})})({clickTolerance:E,enable:!0}),this.map=i,b&&(this.mousePitch=hs({clickTolerance:B,enable:!0}),this.touchPitch=(({enable:F,clickTolerance:A,pitchDegreesPerPixelMoved:s=-.5})=>{const l=new Vl;return new TA({clickTolerance:A,move:(f,m)=>({pitchDelta:(m.y-f.y)*s}),moveStateManager:l,enable:F,assignEvents:jA})})({clickTolerance:B,enable:!0})),O.addEventListener(h,"mousedown",this.mousedown),O.addEventListener(h,"touchstart",this.touchstart,{passive:!1}),O.addEventListener(h,"touchcancel",this.reset)}startMouse(i,h){this.mouseRotate.dragStart(i,h),this.mousePitch&&this.mousePitch.dragStart(i,h),O.disableDrag()}startTouch(i,h){this.touchRotate.dragStart(i,h),this.touchPitch&&this.touchPitch.dragStart(i,h),O.disableDrag()}moveMouse(i,h){const b=this.map,{bearingDelta:E}=this.mouseRotate.dragMove(i,h)||{};if(E&&b.setBearing(b.getBearing()+E),this.mousePitch){const{pitchDelta:B}=this.mousePitch.dragMove(i,h)||{};B&&b.setPitch(b.getPitch()+B)}}moveTouch(i,h){const b=this.map,{bearingDelta:E}=this.touchRotate.dragMove(i,h)||{};if(E&&b.setBearing(b.getBearing()+E),this.touchPitch){const{pitchDelta:B}=this.touchPitch.dragMove(i,h)||{};B&&b.setPitch(b.getPitch()+B)}}off(){const i=this.element;O.removeEventListener(i,"mousedown",this.mousedown),O.removeEventListener(i,"touchstart",this.touchstart,{passive:!1}),O.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),O.removeEventListener(window,"touchend",this.touchend),O.removeEventListener(i,"touchcancel",this.reset),this.offTemp()}offTemp(){O.enableDrag(),O.removeEventListener(window,"mousemove",this.mousemove),O.removeEventListener(window,"mouseup",this.mouseup),O.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),O.removeEventListener(window,"touchend",this.touchend)}}let Mi;function WA(C,i,h){if(C=new c.L(C.lng,C.lat),i){const b=new c.L(C.lng-360,C.lat),E=new c.L(C.lng+360,C.lat),B=h.locationPoint(C).distSqr(i);h.locationPoint(b).distSqr(i)<B?C=b:h.locationPoint(E).distSqr(i)<B&&(C=E)}for(;Math.abs(C.lng-h.center.lng)>180;){const b=h.locationPoint(C);if(b.x>=0&&b.y>=0&&b.x<=h.width&&b.y<=h.height)break;C.lng>h.center.lng?C.lng-=360:C.lng+=360}return C}const Vi={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function p(C,i,h){const b=C.classList;for(const E in Vi)b.remove(`maplibregl-${h}-anchor-${E}`);b.add(`maplibregl-${h}-anchor-${i}`)}class y extends c.E{constructor(i){if(super(),this._onKeyPress=h=>{const b=h.code,E=h.charCode||h.keyCode;b!=="Space"&&b!=="Enter"&&E!==32&&E!==13||this.togglePopup()},this._onMapClick=h=>{const b=h.originalEvent.target,E=this._element;this._popup&&(b===E||E.contains(b))&&this.togglePopup()},this._update=h=>{if(!this._map)return;const b=this._map.loaded()&&!this._map.isMoving();((h==null?void 0:h.type)==="terrain"||(h==null?void 0:h.type)==="render"&&!b)&&this._map.once("render",this._update),this._map.transform.renderWorldCopies&&(this._lngLat=WA(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let E="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?E=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(E=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let B="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?B="rotateX(0deg)":this._pitchAlignment==="map"&&(B=`rotateX(${this._map.getPitch()}deg)`),h&&h.type!=="moveend"||(this._pos=this._pos.round()),O.setTransform(this._element,`${Vi[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${B} ${E}`),this._map.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{const F=this._map.unproject(this._pos),A=40075016686e-3*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=F.distanceTo(this._lngLat)>20*A?"0.2":"1.0",this._opacityTimeout=null},100))},this._onMove=h=>{if(!this._isDragging){const b=this._clickTolerance||this._map._clickTolerance;this._isDragging=h.point.dist(this._pointerdownPos)>=b}this._isDragging&&(this._pos=h.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new c.k("dragstart"))),this.fire(new c.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new c.k("dragend")),this._state="inactive"},this._addDragHandler=h=>{this._element.contains(h.originalEvent.target)&&(h.preventDefault(),this._positionDelta=h.point.sub(this._pos).add(this._offset),this._pointerdownPos=h.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=i&&i.anchor||"center",this._color=i&&i.color||"#3FB1CE",this._scale=i&&i.scale||1,this._draggable=i&&i.draggable||!1,this._clickTolerance=i&&i.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=i&&i.rotation||0,this._rotationAlignment=i&&i.rotationAlignment||"auto",this._pitchAlignment=i&&i.pitchAlignment&&i.pitchAlignment!=="auto"?i.pitchAlignment:this._rotationAlignment,i&&i.element)this._element=i.element,this._offset=c.P.convert(i&&i.offset||[0,0]);else{this._defaultMarker=!0,this._element=O.create("div"),this._element.setAttribute("aria-label","Map marker");const h=O.createNS("http://www.w3.org/2000/svg","svg"),b=41,E=27;h.setAttributeNS(null,"display","block"),h.setAttributeNS(null,"height",`${b}px`),h.setAttributeNS(null,"width",`${E}px`),h.setAttributeNS(null,"viewBox",`0 0 ${E} ${b}`);const B=O.createNS("http://www.w3.org/2000/svg","g");B.setAttributeNS(null,"stroke","none"),B.setAttributeNS(null,"stroke-width","1"),B.setAttributeNS(null,"fill","none"),B.setAttributeNS(null,"fill-rule","evenodd");const F=O.createNS("http://www.w3.org/2000/svg","g");F.setAttributeNS(null,"fill-rule","nonzero");const A=O.createNS("http://www.w3.org/2000/svg","g");A.setAttributeNS(null,"transform","translate(3.0, 29.0)"),A.setAttributeNS(null,"fill","#000000");const s=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const X of s){const ie=O.createNS("http://www.w3.org/2000/svg","ellipse");ie.setAttributeNS(null,"opacity","0.04"),ie.setAttributeNS(null,"cx","10.5"),ie.setAttributeNS(null,"cy","5.80029008"),ie.setAttributeNS(null,"rx",X.rx),ie.setAttributeNS(null,"ry",X.ry),A.appendChild(ie)}const l=O.createNS("http://www.w3.org/2000/svg","g");l.setAttributeNS(null,"fill",this._color);const f=O.createNS("http://www.w3.org/2000/svg","path");f.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),l.appendChild(f);const m=O.createNS("http://www.w3.org/2000/svg","g");m.setAttributeNS(null,"opacity","0.25"),m.setAttributeNS(null,"fill","#000000");const k=O.createNS("http://www.w3.org/2000/svg","path");k.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),m.appendChild(k);const I=O.createNS("http://www.w3.org/2000/svg","g");I.setAttributeNS(null,"transform","translate(6.0, 7.0)"),I.setAttributeNS(null,"fill","#FFFFFF");const D=O.createNS("http://www.w3.org/2000/svg","g");D.setAttributeNS(null,"transform","translate(8.0, 8.0)");const Q=O.createNS("http://www.w3.org/2000/svg","circle");Q.setAttributeNS(null,"fill","#000000"),Q.setAttributeNS(null,"opacity","0.25"),Q.setAttributeNS(null,"cx","5.5"),Q.setAttributeNS(null,"cy","5.5"),Q.setAttributeNS(null,"r","5.4999962");const Z=O.createNS("http://www.w3.org/2000/svg","circle");Z.setAttributeNS(null,"fill","#FFFFFF"),Z.setAttributeNS(null,"cx","5.5"),Z.setAttributeNS(null,"cy","5.5"),Z.setAttributeNS(null,"r","5.4999962"),D.appendChild(Q),D.appendChild(Z),F.appendChild(A),F.appendChild(l),F.appendChild(m),F.appendChild(I),F.appendChild(D),h.appendChild(F),h.setAttributeNS(null,"height",b*this._scale+"px"),h.setAttributeNS(null,"width",E*this._scale+"px"),this._element.appendChild(h),this._offset=c.P.convert(i&&i.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",h=>{h.preventDefault()}),this._element.addEventListener("mousedown",h=>{h.preventDefault()}),p(this._element,this._anchor,"marker"),i&&i.className)for(const h of i.className.split(" "))this._element.classList.add(h);this._popup=null}addTo(i){return this.remove(),this._map=i,i.getCanvasContainer().appendChild(this._element),i.on("move",this._update),i.on("moveend",this._update),i.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),O.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(i){return this._lngLat=c.L.convert(i),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(i){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),i){if(!("offset"in i.options)){const E=Math.abs(13.5)/Math.SQRT2;i.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[E,-1*(38.1-13.5+E)],"bottom-right":[-E,-1*(38.1-13.5+E)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=i,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}getPopup(){return this._popup}togglePopup(){const i=this._popup;return i?(i.isOpen()?i.remove():i.addTo(this._map),this):this}getOffset(){return this._offset}setOffset(i){return this._offset=c.P.convert(i),this._update(),this}addClassName(i){this._element.classList.add(i)}removeClassName(i){this._element.classList.remove(i)}toggleClassName(i){return this._element.classList.toggle(i)}setDraggable(i){return this._draggable=!!i,this._map&&(i?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(i){return this._rotation=i||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(i){return this._rotationAlignment=i||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(i){return this._pitchAlignment=i&&i!=="auto"?i:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const v={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let x=0,R=!1;const V={maxWidth:100,unit:"metric"};function N(C,i,h){const b=h&&h.maxWidth||100,E=C._container.clientHeight/2,B=C.unproject([0,E]),F=C.unproject([b,E]),A=B.distanceTo(F);if(h&&h.unit==="imperial"){const s=3.2808*A;s>5280?H(i,b,s/5280,C._getUIString("ScaleControl.Miles")):H(i,b,s,C._getUIString("ScaleControl.Feet"))}else h&&h.unit==="nautical"?H(i,b,A/1852,C._getUIString("ScaleControl.NauticalMiles")):A>=1e3?H(i,b,A/1e3,C._getUIString("ScaleControl.Kilometers")):H(i,b,A,C._getUIString("ScaleControl.Meters"))}function H(C,i,h,b){const E=function(B){const F=Math.pow(10,`${Math.floor(B)}`.length-1);let A=B/F;return A=A>=10?10:A>=5?5:A>=3?3:A>=2?2:A>=1?1:function(s){const l=Math.pow(10,Math.ceil(-Math.log(s)/Math.LN10));return Math.round(s*l)/l}(A),F*A}(h);C.style.width=i*(E/h)+"px",C.innerHTML=`${E}&nbsp;${b}`}const te={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},le=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function pe(C){if(C){if(typeof C=="number"){const i=Math.round(Math.abs(C)/Math.SQRT2);return{center:new c.P(0,0),top:new c.P(0,C),"top-left":new c.P(i,i),"top-right":new c.P(-i,i),bottom:new c.P(0,-C),"bottom-left":new c.P(i,-i),"bottom-right":new c.P(-i,-i),left:new c.P(C,0),right:new c.P(-C,0)}}if(C instanceof c.P||Array.isArray(C)){const i=c.P.convert(C);return{center:i,top:i,"top-left":i,"top-right":i,bottom:i,"bottom-left":i,"bottom-right":i,left:i,right:i}}return{center:c.P.convert(C.center||[0,0]),top:c.P.convert(C.top||[0,0]),"top-left":c.P.convert(C["top-left"]||[0,0]),"top-right":c.P.convert(C["top-right"]||[0,0]),bottom:c.P.convert(C.bottom||[0,0]),"bottom-left":c.P.convert(C["bottom-left"]||[0,0]),"bottom-right":c.P.convert(C["bottom-right"]||[0,0]),left:c.P.convert(C.left||[0,0]),right:c.P.convert(C.right||[0,0])}}return pe(new c.P(0,0))}const Ge={extend:(C,...i)=>c.e(C,...i),run(C){C()},logToElement(C,i=!1,h="log"){const b=window.document.getElementById(h);b&&(i&&(b.innerHTML=""),b.innerHTML+=`<br>${C}`)}},Ee=U;class Se{static get version(){return Ee}static get workerCount(){return Br.workerCount}static set workerCount(i){Br.workerCount=i}static get maxParallelImageRequests(){return c.c.MAX_PARALLEL_IMAGE_REQUESTS}static set maxParallelImageRequests(i){c.c.MAX_PARALLEL_IMAGE_REQUESTS=i}static get workerUrl(){return c.c.WORKER_URL}static set workerUrl(i){c.c.WORKER_URL=i}static addProtocol(i,h){c.c.REGISTERED_PROTOCOLS[i]=h}static removeProtocol(i){delete c.c.REGISTERED_PROTOCOLS[i]}}return Se.Map=class extends ii{constructor(C){if(c.bg.mark(c.bh.create),(C=c.e({},wt,C)).minZoom!=null&&C.maxZoom!=null&&C.minZoom>C.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(C.minPitch!=null&&C.maxPitch!=null&&C.minPitch>C.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(C.minPitch!=null&&C.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(C.maxPitch!=null&&C.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Fr(C.minZoom,C.maxZoom,C.minPitch,C.maxPitch,C.renderWorldCopies),{bearingSnap:C.bearingSnap}),this._cooperativeGesturesOnWheel=i=>{this._onCooperativeGesture(i,i[this._metaKey],1)},this._contextLost=i=>{i.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new c.k("webglcontextlost",{originalEvent:i}))},this._contextRestored=i=>{this._setupPainter(),this.resize(),this._update(),this.fire(new c.k("webglcontextrestored",{originalEvent:i}))},this._onMapScroll=i=>{if(i.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=C.interactive,this._cooperativeGestures=C.cooperativeGestures,this._metaKey=navigator.platform.indexOf("Mac")===0?"metaKey":"ctrlKey",this._maxTileCacheSize=C.maxTileCacheSize,this._maxTileCacheZoomLevels=C.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=C.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=C.preserveDrawingBuffer,this._antialias=C.antialias,this._trackResize=C.trackResize,this._bearingSnap=C.bearingSnap,this._refreshExpiredTiles=C.refreshExpiredTiles,this._fadeDuration=C.fadeDuration,this._crossSourceCollisions=C.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=C.collectResourceTiming,this._renderTaskQueue=new Vr,this._controls=[],this._mapId=c.a2(),this._locale=c.e({},Tn,C.locale),this._clickTolerance=C.clickTolerance,this._overridePixelRatio=C.pixelRatio,this._maxCanvasSize=C.maxCanvasSize,this.transformCameraUpdate=C.transformCameraUpdate,this._imageQueueHandle=xe.addThrottleControl(()=>this.isMoving()),this._requestManager=new je(C.transformRequest),typeof C.container=="string"){if(this._container=document.getElementById(C.container),!this._container)throw new Error(`Container '${C.container}' not found.`)}else{if(!(C.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=C.container}if(C.maxBounds&&this.setMaxBounds(C.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let i=!1;const h=Zr(b=>{this._trackResize&&!this._removed&&this.resize(b)._update()},50);this._resizeObserver=new ResizeObserver(b=>{i?h(b):i=!0}),this._resizeObserver.observe(this._container)}this.handlers=new Wa(this,C),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=C.hash&&new ZA(typeof C.hash=="string"&&C.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:C.center,zoom:C.zoom,bearing:C.bearing,pitch:C.pitch}),C.bounds&&(this.resize(),this.fitBounds(C.bounds,c.e({},C.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=C.localIdeographFontFamily,this._validateStyle=C.validateStyle,C.style&&this.setStyle(C.style,{localIdeographFontFamily:C.localIdeographFontFamily}),C.attributionControl&&this.addControl(new Ni({customAttribution:C.customAttribution})),C.maplibreLogo&&this.addControl(new Pi,C.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",i=>{this._update(i.dataType==="style"),this.fire(new c.k(`${i.dataType}data`,i))}),this.on("dataloading",i=>{this.fire(new c.k(`${i.dataType}dataloading`,i))}),this.on("dataabort",i=>{this.fire(new c.k("sourcedataabort",i))})}_getMapId(){return this._mapId}addControl(C,i){if(i===void 0&&(i=C.getDefaultPosition?C.getDefaultPosition():"top-right"),!C||!C.onAdd)return this.fire(new c.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const h=C.onAdd(this);this._controls.push(C);const b=this._controlPositions[i];return i.indexOf("bottom")!==-1?b.insertBefore(h,b.firstChild):b.appendChild(h),this}removeControl(C){if(!C||!C.onRemove)return this.fire(new c.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const i=this._controls.indexOf(C);return i>-1&&this._controls.splice(i,1),C.onRemove(this),this}hasControl(C){return this._controls.indexOf(C)>-1}calculateCameraOptionsFromTo(C,i,h,b){return b==null&&this.terrain&&(b=this.terrain.getElevationForLngLatZoom(h,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(C,i,h,b)}resize(C){var i;const h=this._containerDimensions(),b=h[0],E=h[1],B=this._getClampedPixelRatio(b,E);if(this._resizeCanvas(b,E,B),this.painter.resize(b,E,B),this.painter.overLimit()){const A=this.painter.context.gl;this._maxCanvasSize=[A.drawingBufferWidth,A.drawingBufferHeight];const s=this._getClampedPixelRatio(b,E);this._resizeCanvas(b,E,s),this.painter.resize(b,E,s)}this.transform.resize(b,E),(i=this._requestedCameraState)===null||i===void 0||i.resize(b,E);const F=!this._moving;return F&&(this.stop(),this.fire(new c.k("movestart",C)).fire(new c.k("move",C))),this.fire(new c.k("resize",C)),F&&this.fire(new c.k("moveend",C)),this}_getClampedPixelRatio(C,i){const{0:h,1:b}=this._maxCanvasSize,E=this.getPixelRatio(),B=C*E,F=i*E;return Math.min(B>h?h/B:1,F>b?b/F:1)*E}getPixelRatio(){var C;return(C=this._overridePixelRatio)!==null&&C!==void 0?C:devicePixelRatio}setPixelRatio(C){this._overridePixelRatio=C,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(C){return this.transform.setMaxBounds(Dn.convert(C)),this._update()}setMinZoom(C){if((C=C??-2)>=-2&&C<=this.transform.maxZoom)return this.transform.minZoom=C,this._update(),this.getZoom()<C&&this.setZoom(C),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(C){if((C=C??22)>=this.transform.minZoom)return this.transform.maxZoom=C,this._update(),this.getZoom()>C&&this.setZoom(C),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(C){if((C=C??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(C>=0&&C<=this.transform.maxPitch)return this.transform.minPitch=C,this._update(),this.getPitch()<C&&this.setPitch(C),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(C){if((C=C??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(C>=this.transform.minPitch)return this.transform.maxPitch=C,this._update(),this.getPitch()>C&&this.setPitch(C),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(C){return this.transform.renderWorldCopies=C,this._update()}getCooperativeGestures(){return this._cooperativeGestures}setCooperativeGestures(C){return this._cooperativeGestures=C,this._cooperativeGestures?this._setupCooperativeGestures():this._destroyCooperativeGestures(),this}project(C){return this.transform.locationPoint(c.L.convert(C),this.style&&this.terrain)}unproject(C){return this.transform.pointLocation(c.P.convert(C),this.terrain)}isMoving(){var C;return this._moving||((C=this.handlers)===null||C===void 0?void 0:C.isMoving())}isZooming(){var C;return this._zooming||((C=this.handlers)===null||C===void 0?void 0:C.isZooming())}isRotating(){var C;return this._rotating||((C=this.handlers)===null||C===void 0?void 0:C.isRotating())}_createDelegatedListener(C,i,h){if(C==="mouseenter"||C==="mouseover"){let b=!1;return{layer:i,listener:h,delegates:{mousemove:B=>{const F=this.getLayer(i)?this.queryRenderedFeatures(B.point,{layers:[i]}):[];F.length?b||(b=!0,h.call(this,new An(C,this,B.originalEvent,{features:F}))):b=!1},mouseout:()=>{b=!1}}}}if(C==="mouseleave"||C==="mouseout"){let b=!1;return{layer:i,listener:h,delegates:{mousemove:F=>{(this.getLayer(i)?this.queryRenderedFeatures(F.point,{layers:[i]}):[]).length?b=!0:b&&(b=!1,h.call(this,new An(C,this,F.originalEvent)))},mouseout:F=>{b&&(b=!1,h.call(this,new An(C,this,F.originalEvent)))}}}}{const b=E=>{const B=this.getLayer(i)?this.queryRenderedFeatures(E.point,{layers:[i]}):[];B.length&&(E.features=B,h.call(this,E),delete E.features)};return{layer:i,listener:h,delegates:{[C]:b}}}}on(C,i,h){if(h===void 0)return super.on(C,i);const b=this._createDelegatedListener(C,i,h);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[C]=this._delegatedListeners[C]||[],this._delegatedListeners[C].push(b);for(const E in b.delegates)this.on(E,b.delegates[E]);return this}once(C,i,h){if(h===void 0)return super.once(C,i);const b=this._createDelegatedListener(C,i,h);for(const E in b.delegates)this.once(E,b.delegates[E]);return this}off(C,i,h){return h===void 0?super.off(C,i):(this._delegatedListeners&&this._delegatedListeners[C]&&(b=>{const E=this._delegatedListeners[C];for(let B=0;B<E.length;B++){const F=E[B];if(F.layer===i&&F.listener===h){for(const A in F.delegates)this.off(A,F.delegates[A]);return E.splice(B,1),this}}})(),this)}queryRenderedFeatures(C,i){if(!this.style)return[];let h;const b=C instanceof c.P||Array.isArray(C),E=b?C:[[0,0],[this.transform.width,this.transform.height]];if(i=i||(b?{}:C)||{},E instanceof c.P||typeof E[0]=="number")h=[c.P.convert(E)];else{const B=c.P.convert(E[0]),F=c.P.convert(E[1]);h=[B,new c.P(F.x,B.y),F,new c.P(B.x,F.y),B]}return this.style.queryRenderedFeatures(h,i,this.transform)}querySourceFeatures(C,i){return this.style.querySourceFeatures(C,i)}setStyle(C,i){return(i=c.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},i)).diff!==!1&&i.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&C?(this._diffStyle(C,i),this):(this._localIdeographFontFamily=i.localIdeographFontFamily,this._updateStyle(C,i))}setTransformRequest(C){return this._requestManager.setTransformRequest(C),this}_getUIString(C){const i=this._locale[C];if(i==null)throw new Error(`Missing UI string '${C}'`);return i}_updateStyle(C,i){if(i.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(C,i));const h=this.style&&i.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!C)),C?(this.style=new Er(this,i||{}),this.style.setEventedParent(this,{style:this.style}),typeof C=="string"?this.style.loadURL(C,i,h):this.style.loadJSON(C,i,h),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Er(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(C,i){if(typeof C=="string"){const h=this._requestManager.transformRequest(C,Ce.Style);c.f(h,(b,E)=>{b?this.fire(new c.j(b)):E&&this._updateDiff(E,i)})}else typeof C=="object"&&this._updateDiff(C,i)}_updateDiff(C,i){try{this.style.setState(C,i)&&this._update(!0)}catch(h){c.w(`Unable to perform style diff: ${h.message||h.error||h}.  Rebuilding the style from scratch.`),this._updateStyle(C,i)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():c.w("There is no style added to the map.")}addSource(C,i){return this._lazyInitEmptyStyle(),this.style.addSource(C,i),this._update(!0)}isSourceLoaded(C){const i=this.style&&this.style.sourceCaches[C];if(i!==void 0)return i.loaded();this.fire(new c.j(new Error(`There is no source with ID '${C}'`)))}setTerrain(C){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),C){const i=this.style.sourceCaches[C.source];if(!i)throw new Error(`cannot load terrain, because there exists no source with ID: ${C.source}`);for(const h in this.style._layers){const b=this.style._layers[h];b.type==="hillshade"&&b.source===C.source&&c.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new fs(this.painter,i,C),this.painter.renderToTexture=new Hr(this.painter,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=h=>{h.dataType==="style"?this.terrain.sourceCache.freeRtt():h.dataType==="source"&&h.tile&&(h.sourceId!==C.source||this._elevationFreeze||(this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(h.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0;return this.fire(new c.k("terrain",{terrain:C})),this}getTerrain(){var C,i;return(i=(C=this.terrain)===null||C===void 0?void 0:C.options)!==null&&i!==void 0?i:null}areTilesLoaded(){const C=this.style&&this.style.sourceCaches;for(const i in C){const h=C[i]._tiles;for(const b in h){const E=h[b];if(E.state!=="loaded"&&E.state!=="errored")return!1}}return!0}addSourceType(C,i,h){return this._lazyInitEmptyStyle(),this.style.addSourceType(C,i,h)}removeSource(C){return this.style.removeSource(C),this._update(!0)}getSource(C){return this.style.getSource(C)}addImage(C,i,h={}){const{pixelRatio:b=1,sdf:E=!1,stretchX:B,stretchY:F,content:A}=h;if(this._lazyInitEmptyStyle(),!(i instanceof HTMLImageElement||c.a(i))){if(i.width===void 0||i.height===void 0)return this.fire(new c.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:s,height:l,data:f}=i,m=i;return this.style.addImage(C,{data:new c.R({width:s,height:l},new Uint8Array(f)),pixelRatio:b,stretchX:B,stretchY:F,content:A,sdf:E,version:0,userImage:m}),m.onAdd&&m.onAdd(this,C),this}}{const{width:s,height:l,data:f}=c.h.getImageData(i);this.style.addImage(C,{data:new c.R({width:s,height:l},f),pixelRatio:b,stretchX:B,stretchY:F,content:A,sdf:E,version:0})}}updateImage(C,i){const h=this.style.getImage(C);if(!h)return this.fire(new c.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const b=i instanceof HTMLImageElement||c.a(i)?c.h.getImageData(i):i,{width:E,height:B,data:F}=b;if(E===void 0||B===void 0)return this.fire(new c.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(E!==h.data.width||B!==h.data.height)return this.fire(new c.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const A=!(i instanceof HTMLImageElement||c.a(i));return h.data.replace(F,A),this.style.updateImage(C,h),this}getImage(C){return this.style.getImage(C)}hasImage(C){return C?!!this.style.getImage(C):(this.fire(new c.j(new Error("Missing required image id"))),!1)}removeImage(C){this.style.removeImage(C)}loadImage(C,i){xe.getImage(this._requestManager.transformRequest(C,Ce.Image),i)}listImages(){return this.style.listImages()}addLayer(C,i){return this._lazyInitEmptyStyle(),this.style.addLayer(C,i),this._update(!0)}moveLayer(C,i){return this.style.moveLayer(C,i),this._update(!0)}removeLayer(C){return this.style.removeLayer(C),this._update(!0)}getLayer(C){return this.style.getLayer(C)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(C,i,h){return this.style.setLayerZoomRange(C,i,h),this._update(!0)}setFilter(C,i,h={}){return this.style.setFilter(C,i,h),this._update(!0)}getFilter(C){return this.style.getFilter(C)}setPaintProperty(C,i,h,b={}){return this.style.setPaintProperty(C,i,h,b),this._update(!0)}getPaintProperty(C,i){return this.style.getPaintProperty(C,i)}setLayoutProperty(C,i,h,b={}){return this.style.setLayoutProperty(C,i,h,b),this._update(!0)}getLayoutProperty(C,i){return this.style.getLayoutProperty(C,i)}setGlyphs(C,i={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(C,i),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(C,i,h={}){return this._lazyInitEmptyStyle(),this.style.addSprite(C,i,h,b=>{b||this._update(!0)}),this}removeSprite(C){return this._lazyInitEmptyStyle(),this.style.removeSprite(C),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(C,i={}){return this._lazyInitEmptyStyle(),this.style.setSprite(C,i,h=>{h||this._update(!0)}),this}setLight(C,i={}){return this._lazyInitEmptyStyle(),this.style.setLight(C,i),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(C,i){return this.style.setFeatureState(C,i),this._update()}removeFeatureState(C,i){return this.style.removeFeatureState(C,i),this._update()}getFeatureState(C){return this.style.getFeatureState(C)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let C=0,i=0;return this._container&&(C=this._container.clientWidth||400,i=this._container.clientHeight||300),[C,i]}_setupContainer(){const C=this._container;C.classList.add("maplibregl-map");const i=this._canvasContainer=O.create("div","maplibregl-canvas-container",C);this._interactive&&i.classList.add("maplibregl-interactive"),this._canvas=O.create("canvas","maplibregl-canvas",i),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const h=this._containerDimensions(),b=this._getClampedPixelRatio(h[0],h[1]);this._resizeCanvas(h[0],h[1],b);const E=this._controlContainer=O.create("div","maplibregl-control-container",C),B=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(F=>{B[F]=O.create("div",`maplibregl-ctrl-${F} `,E)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_setupCooperativeGestures(){this._cooperativeGesturesScreen=O.create("div","maplibregl-cooperative-gesture-screen",this._container);let C=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";navigator.platform.indexOf("Mac")===0&&(C=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use  + scroll to zoom the map"),this._cooperativeGesturesScreen.innerHTML=`
            <div class="maplibregl-desktop-message">${C}</div>
            <div class="maplibregl-mobile-message">${typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>
        `,this._cooperativeGesturesScreen.setAttribute("aria-hidden","true"),this._canvasContainer.addEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.add("maplibregl-cooperative-gestures")}_destroyCooperativeGestures(){O.remove(this._cooperativeGesturesScreen),this._canvasContainer.removeEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.remove("maplibregl-cooperative-gestures")}_resizeCanvas(C,i,h){this._canvas.width=Math.floor(h*C),this._canvas.height=Math.floor(h*i),this._canvas.style.width=`${C}px`,this._canvas.style.height=`${i}px`}_setupPainter(){const C={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let i=null;this._canvas.addEventListener("webglcontextcreationerror",b=>{i={requestedAttributes:C},b&&(i.statusMessage=b.statusMessage,i.type=b.type)},{once:!0});const h=this._canvas.getContext("webgl2",C)||this._canvas.getContext("webgl",C);if(!h){const b="Failed to initialize WebGL";throw i?(i.message=b,new Error(JSON.stringify(i))):new Error(b)}this.painter=new qA(h,this.transform),j.testSupport(h)}_onCooperativeGesture(C,i,h){return!i&&h<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(C){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||C,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(C){return this._update(),this._renderTaskQueue.add(C)}_cancelRenderFrame(C){this._renderTaskQueue.remove(C)}_render(C){const i=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(C),this._removed)return;let h=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const E=this.transform.zoom,B=c.h.now();this.style.zoomHistory.update(E,B);const F=new c.a8(E,{now:B,fadeDuration:i,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),A=F.crossFadingFactor();A===1&&A===this._crossFadingFactor||(h=!0,this._crossFadingFactor=A),this.style.update(F)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,i,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:i,showPadding:this.showPadding}),this.fire(new c.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,c.bg.mark(c.bh.load),this.fire(new c.k("load"))),this.style&&(this.style.hasTransitions()||h)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const b=this._sourcesDirty||this._styleDirty||this._placementDirty;return b||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new c.k("idle")),!this._loaded||this._fullyLoaded||b||(this._fullyLoaded=!0,c.bg.mark(c.bh.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){var C;this._hash&&this._hash.remove();for(const h of this._controls)h.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),xe.removeThrottleControl(this._imageQueueHandle),(C=this._resizeObserver)===null||C===void 0||C.disconnect();const i=this.painter.context.gl.getExtension("WEBGL_lose_context");i&&i.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),O.remove(this._canvasContainer),O.remove(this._controlContainer),this._cooperativeGestures&&this._destroyCooperativeGestures(),this._container.classList.remove("maplibregl-map"),c.bg.clearMetrics(),this._removed=!0,this.fire(new c.k("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=c.h.frame(C=>{c.bg.frame(C),this._frame=null,this._render(C)}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(C){this._showTileBoundaries!==C&&(this._showTileBoundaries=C,this._update())}get showPadding(){return!!this._showPadding}set showPadding(C){this._showPadding!==C&&(this._showPadding=C,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(C){this._showCollisionBoxes!==C&&(this._showCollisionBoxes=C,C?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(C){this._showOverdrawInspector!==C&&(this._showOverdrawInspector=C,this._update())}get repaint(){return!!this._repaint}set repaint(C){this._repaint!==C&&(this._repaint=C,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(C){this._vertices=C,this._update()}get version(){return ct}getCameraTargetElevation(){return this.transform.elevation}},Se.NavigationControl=class{constructor(C){this._updateZoomButtons=()=>{const i=this._map.getZoom(),h=i===this._map.getMaxZoom(),b=i===this._map.getMinZoom();this._zoomInButton.disabled=h,this._zoomOutButton.disabled=b,this._zoomInButton.setAttribute("aria-disabled",h.toString()),this._zoomOutButton.setAttribute("aria-disabled",b.toString())},this._rotateCompassArrow=()=>{const i=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=i},this._setButtonTitle=(i,h)=>{const b=this._map._getUIString(`NavigationControl.${h}`);i.title=b,i.setAttribute("aria-label",b)},this.options=c.e({},Go,C),this._container=O.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",i=>i.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",i=>this._map.zoomIn({},{originalEvent:i})),O.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",i=>this._map.zoomOut({},{originalEvent:i})),O.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",i=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:i}):this._map.resetNorth({},{originalEvent:i})}),this._compassIcon=O.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(C){return this._map=C,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new qo(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){O.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(C,i){const h=O.create("button",C,this._container);return h.type="button",h.addEventListener("click",i),h}},Se.GeolocateControl=class extends c.E{constructor(C){super(),this._onSuccess=i=>{if(this._map){if(this._isOutOfMapMaxBounds(i))return this._setErrorState(),this.fire(new c.k("outofmaxbounds",i)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=i,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(i),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(i),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new c.k("geolocate",i)),this._finish()}},this._updateCamera=i=>{const h=new c.L(i.coords.longitude,i.coords.latitude),b=i.coords.accuracy,E=this._map.getBearing(),B=c.e({bearing:E},this.options.fitBoundsOptions),F=Dn.fromLngLat(h,b);this._map.fitBounds(F,B,{geolocateSource:!0})},this._updateMarker=i=>{if(i){const h=new c.L(i.coords.longitude,i.coords.latitude);this._accuracyCircleMarker.setLngLat(h).addTo(this._map),this._userLocationDotMarker.setLngLat(h).addTo(this._map),this._accuracy=i.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=i=>{if(this._map){if(this.options.trackUserLocation)if(i.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const h=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=h,this._geolocateButton.setAttribute("aria-label",h),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(i.code===3&&R)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new c.k("error",i)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=i=>{if(this._map){if(this._container.addEventListener("contextmenu",h=>h.preventDefault()),this._geolocateButton=O.create("button","maplibregl-ctrl-geolocate",this._container),O.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",i===!1){c.w("Geolocation support is not available so the GeolocateControl will be disabled.");const h=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=h,this._geolocateButton.setAttribute("aria-label",h)}else{const h=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=h,this._geolocateButton.setAttribute("aria-label",h)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=O.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new y({element:this._dotElement}),this._circleElement=O.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new y({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",h=>{h.geolocateSource||this._watchState!=="ACTIVE_LOCK"||h.originalEvent&&h.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new c.k("trackuserlocationend")))})}},this.options=c.e({},v,C)}onAdd(C){return this._map=C,this._container=O.create("div","maplibregl-ctrl maplibregl-ctrl-group"),function(i,h=!1){Mi===void 0||h?window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(b=>{Mi=b.state!=="denied",i(Mi)}).catch(()=>{Mi=!!window.navigator.geolocation,i(Mi)}):(Mi=!!window.navigator.geolocation,i(Mi)):i(Mi)}(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),O.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,x=0,R=!1}_isOutOfMapMaxBounds(C){const i=this._map.getMaxBounds(),h=C.coords;return i&&(h.longitude<i.getWest()||h.longitude>i.getEast()||h.latitude<i.getSouth()||h.latitude>i.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const C=this._map.getBounds(),i=C.getSouthEast(),h=C.getNorthEast(),b=i.distanceTo(h),E=Math.ceil(this._accuracy/(b/this._map._container.clientHeight)*2);this._circleElement.style.width=`${E}px`,this._circleElement.style.height=`${E}px`}trigger(){if(!this._setup)return c.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new c.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":x--,R=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new c.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new c.k("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let C;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),x++,x>1?(C={maximumAge:6e5,timeout:0},R=!0):(C=this.options.positionOptions,R=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,C)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},Se.AttributionControl=Ni,Se.LogoControl=Pi,Se.ScaleControl=class{constructor(C){this._onMove=()=>{N(this._map,this._container,this.options)},this.setUnit=i=>{this.options.unit=i,N(this._map,this._container,this.options)},this.options=c.e({},V,C)}getDefaultPosition(){return"bottom-left"}onAdd(C){return this._map=C,this._container=O.create("div","maplibregl-ctrl maplibregl-ctrl-scale",C.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){O.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},Se.FullscreenControl=class extends c.E{constructor(C={}){super(),this._onFullscreenChange=()=>{(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,C&&C.container&&(C.container instanceof HTMLElement?this._container=C.container:c.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(C){return this._map=C,this._container||(this._container=this._map.getContainer()),this._controlContainer=O.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){O.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const C=this._fullscreenButton=O.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);O.create("span","maplibregl-ctrl-icon",C).setAttribute("aria-hidden","true"),C.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const C=this._getTitle();this._fullscreenButton.setAttribute("aria-label",C),this._fullscreenButton.title=C}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new c.k("fullscreenstart")),this._map._cooperativeGestures&&(this._prevCooperativeGestures=this._map._cooperativeGestures,this._map.setCooperativeGestures())):(this.fire(new c.k("fullscreenend")),this._prevCooperativeGestures&&(this._map.setCooperativeGestures(this._prevCooperativeGestures),delete this._prevCooperativeGestures))}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},Se.TerrainControl=class{constructor(C){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))},this.options=C}onAdd(C){return this._map=C,this._container=O.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=O.create("button","maplibregl-ctrl-terrain",this._container),O.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){O.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},Se.Popup=class extends c.E{constructor(C){super(),this.remove=()=>(this._content&&O.remove(this._content),this._container&&(O.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new c.k("close")),this),this._onMouseUp=i=>{this._update(i.point)},this._onMouseMove=i=>{this._update(i.point)},this._onDrag=i=>{this._update(i.point)},this._update=i=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=O.create("div","maplibregl-popup",this._map.getContainer()),this._tip=O.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const F of this.options.className.split(" "))this._container.classList.add(F);this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=WA(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!i)return;const h=this._pos=this._trackPointer&&i?i:this._map.project(this._lngLat);let b=this.options.anchor;const E=pe(this.options.offset);if(!b){const F=this._container.offsetWidth,A=this._container.offsetHeight;let s;s=h.y+E.bottom.y<A?["top"]:h.y>this._map.transform.height-A?["bottom"]:[],h.x<F/2?s.push("left"):h.x>this._map.transform.width-F/2&&s.push("right"),b=s.length===0?"bottom":s.join("-")}const B=h.add(E[b]).round();O.setTransform(this._container,`${Vi[b]} translate(${B.x}px,${B.y}px)`),p(this._container,b,"popup")},this._onClose=()=>{this.remove()},this.options=c.e(Object.create(te),C)}addTo(C){return this._map&&this.remove(),this._map=C,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new c.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(C){return this._lngLat=c.L.convert(C),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(C){return this.setDOMContent(document.createTextNode(C))}setHTML(C){const i=document.createDocumentFragment(),h=document.createElement("body");let b;for(h.innerHTML=C;b=h.firstChild,b;)i.appendChild(b);return this.setDOMContent(i)}getMaxWidth(){var C;return(C=this._container)===null||C===void 0?void 0:C.style.maxWidth}setMaxWidth(C){return this.options.maxWidth=C,this._update(),this}setDOMContent(C){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=O.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(C),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(C){this._container&&this._container.classList.add(C)}removeClassName(C){this._container&&this._container.classList.remove(C)}setOffset(C){return this.options.offset=C,this._update(),this}toggleClassName(C){if(this._container)return this._container.classList.toggle(C)}_createCloseButton(){this.options.closeButton&&(this._closeButton=O.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const C=this._container.querySelector(le);C&&C.focus()}},Se.Marker=y,Se.Style=Er,Se.LngLat=c.L,Se.LngLatBounds=Dn,Se.Point=c.P,Se.MercatorCoordinate=c.U,Se.Evented=c.E,Se.AJAXError=c.bi,Se.config=c.c,Se.CanvasSource=Lt,Se.GeoJSONSource=xn,Se.ImageSource=En,Se.RasterDEMTileSource=Ct,Se.RasterTileSource=xi,Se.VectorTileSource=di,Se.VideoSource=Gn,Se.setRTLTextPlugin=c.bj,Se.getRTLTextPluginStatus=c.bk,Se.prewarm=function(){FA().acquire(qn)},Se.clearPrewarmedResources=function(){const C=cA;C&&(C.isPreloaded()&&C.numActive()===1?(C.release(qn),cA=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},Ge.extend(Se,{isSafari:c.ac,getPerformanceMetrics:c.bg.getPerformanceMetrics}),Se});var P=w;return P})})(n3);var Tz=n3.exports;const Kc=$b(Tz);var Sz=Cz;function Cz(e){var n,a,d;if(e){if(Array.isArray(e)){for(n=[],a=e.length,d=0;d<a;d++){var w=e[d];w!=null&&n.push(w)}return n}if(typeof e=="object"){n={};var M=Object.keys(e);for(a=M.length,d=0;d<a;d++){var P=M[d],c=e[P];c!=null&&(n[P]=c)}return n}}}function Iz(e,n,a){let d;const{map:w}=Vf();Bu(e,w,U=>a(4,d=U));let{position:M="top-left"}=n,{container:P=void 0}=n,c=null;return Bf(()=>{d!=null&&d.loaded()&&c&&d.removeControl(c)}),e.$$set=U=>{"position"in U&&a(1,M=U.position),"container"in U&&a(2,P=U.container)},e.$$.update=()=>{if(e.$$.dirty&30&&d&&!c){let U;typeof P=="string"?U=document.querySelector(P)??void 0:U=P,a(3,c=new Kc.FullscreenControl({container:U})),d.addControl(c,M)}},[w,M,P,c,d]}class Bz extends io{constructor(n){super(),ro(this,n,Iz,null,ws,{position:1,container:2})}}function Dz(e,n,a){let d;const{map:w}=Vf();Bu(e,w,J=>a(8,d=J));let{position:M="top-left"}=n,{positionOptions:P=void 0}=n,{fitBoundsOptions:c=void 0}=n,{trackUserLocation:U=!1}=n,{showAccuracyCircle:O=!0}=n,{showUserLocation:j=!0}=n,W=null;return Bf(()=>{d!=null&&d.loaded()&&W&&d.removeControl(W)}),e.$$set=J=>{"position"in J&&a(1,M=J.position),"positionOptions"in J&&a(2,P=J.positionOptions),"fitBoundsOptions"in J&&a(3,c=J.fitBoundsOptions),"trackUserLocation"in J&&a(4,U=J.trackUserLocation),"showAccuracyCircle"in J&&a(5,O=J.showAccuracyCircle),"showUserLocation"in J&&a(6,j=J.showUserLocation)},e.$$.update=()=>{e.$$.dirty&510&&d&&!W&&(a(7,W=new Kc.GeolocateControl({positionOptions:P,fitBoundsOptions:c,trackUserLocation:U,showAccuracyCircle:O,showUserLocation:j})),d.addControl(W,M))},[w,M,P,c,U,O,j,W,d]}class Pz extends io{constructor(n){super(),ro(this,n,Dz,null,ws,{position:1,positionOptions:2,fitBoundsOptions:3,trackUserLocation:4,showAccuracyCircle:5,showUserLocation:6})}}function zz(e){let n=e.getCenter(),a=Math.round(e.getZoom()*100)/100,d=Math.ceil((a*Math.LN2+Math.log(512/360/.5))/Math.LN10),w=Math.pow(10,d),M=Math.round(n.lat*w)/w,P=Math.round(n.lng*w)/w,c=`${a}/${M}/${P}`,U=e.getBearing(),O=e.getPitch();return(U||O)&&(c+=`/${Math.round(U*10)/10}`),O&&(c+=`/${Math.round(O)}`),`#${c}`}function Lz(e){return e.replace("#","").split("/").map(parseFloat)}var yp=b2;function b2(e,n){return e===n||e!==e&&n!==n?!0:typeof e!=typeof n||{}.toString.call(e)!={}.toString.call(n)||e!==Object(e)||!e?!1:Array.isArray(e)?Bv(e,n):{}.toString.call(e)=="[object Set]"?Bv(Array.from(e),Array.from(n)):{}.toString.call(e)=="[object Object]"?Fz(e,n):Rz(e,n)}function Rz(e,n){return e.toString()===n.toString()}function Bv(e,n){var a=e.length;if(a!=n.length)return!1;for(var d=0;d<a;d++)if(!b2(e[d],n[d]))return!1;return!0}function Fz(e,n){var a=Object.keys(e),d=a.length;if(d!=Object.keys(n).length)return!1;for(var w=0;w<d;w++){var M=a[w];if(!(n.hasOwnProperty(M)&&b2(e[M],n[M])))return!1}return!0}function Oz(e,n,a){let d;const{map:w}=Vf();Bu(e,w,j=>a(6,d=j));let{position:M="top-left"}=n,{showCompass:P=!0}=n,{showZoom:c=!0}=n,{visualizePitch:U=!1}=n,O=null;return Bf(()=>{d!=null&&d.loaded()&&O&&d.removeControl(O)}),e.$$set=j=>{"position"in j&&a(1,M=j.position),"showCompass"in j&&a(2,P=j.showCompass),"showZoom"in j&&a(3,c=j.showZoom),"visualizePitch"in j&&a(4,U=j.visualizePitch)},e.$$.update=()=>{e.$$.dirty&126&&d&&!O&&(a(5,O=new Kc.NavigationControl({showCompass:P,showZoom:c,visualizePitch:U})),d.addControl(O,M))},[w,M,P,c,U,O,d]}class Nz extends io{constructor(n){super(),ro(this,n,Oz,null,ws,{position:1,showCompass:2,showZoom:3,visualizePitch:4})}}function Vz(e,n,a){let d;const{map:w}=Vf();Bu(e,w,O=>a(5,d=O));let{position:M="bottom-left"}=n,{maxWidth:P=void 0}=n,{unit:c="metric"}=n,U=null;return Bf(()=>{d!=null&&d.loaded()&&U&&d.removeControl(U)}),e.$$set=O=>{"position"in O&&a(1,M=O.position),"maxWidth"in O&&a(2,P=O.maxWidth),"unit"in O&&a(3,c=O.unit)},e.$$.update=()=>{e.$$.dirty&62&&d&&!U&&(a(4,U=new Kc.ScaleControl({maxWidth:P,unit:c})),d.addControl(U,M))},[w,M,P,c,U,d]}class Uz extends io{constructor(n){super(),ro(this,n,Vz,null,ws,{position:1,maxWidth:2,unit:3})}}const Qz=e=>({map:e[0]&8,loadedImages:e[0]&16,allImagesLoaded:e[0]&32}),Dv=e=>({map:e[3],loadedImages:e[4],allImagesLoaded:e[5]});function Pv(e){let n,a,d=e[2]&&zv(e);const w=e[34].default,M=$c(w,e,e[33],Dv);return{c(){d&&d.c(),n=vs(),M&&M.c()},l(P){d&&d.l(P),n=xs(P),M&&M.l(P)},m(P,c){d&&d.m(P,c),nr(P,n,c),M&&M.m(P,c),a=!0},p(P,c){P[2]?d?(d.p(P,c),c[0]&4&&Ci(d,1)):(d=zv(P),d.c(),Ci(d,1),d.m(n.parentNode,n)):d&&(q0(),tr(d,1,1,()=>{d=null}),G0()),M&&M.p&&(!a||c[0]&56|c[1]&4)&&jc(M,w,P,P[33],a?Yc(w,P[33],c,Qz):Wc(P[33]),Dv)},i(P){a||(Ci(d),Ci(M,P),a=!0)},o(P){tr(d),tr(M,P),a=!1},d(P){P&&pn(n),d&&d.d(P),M&&M.d(P)}}}function zv(e){let n,a,d,w,M,P,c,U;return n=new Nz({props:{position:e[6]}}),d=new Pz({props:{position:e[6],fitBoundsOptions:{maxZoom:12}}}),M=new Bz({props:{position:e[6]}}),c=new Uz({props:{position:e[6]}}),{c(){ea(n.$$.fragment),a=vs(),ea(d.$$.fragment),w=vs(),ea(M.$$.fragment),P=vs(),ea(c.$$.fragment)},l(O){Ca(n.$$.fragment,O),a=xs(O),Ca(d.$$.fragment,O),w=xs(O),Ca(M.$$.fragment,O),P=xs(O),Ca(c.$$.fragment,O)},m(O,j){ta(n,O,j),nr(O,a,j),ta(d,O,j),nr(O,w,j),ta(M,O,j),nr(O,P,j),ta(c,O,j),U=!0},p(O,j){const W={};j[0]&64&&(W.position=O[6]),n.$set(W);const J={};j[0]&64&&(J.position=O[6]),d.$set(J);const ae={};j[0]&64&&(ae.position=O[6]),M.$set(ae);const be={};j[0]&64&&(be.position=O[6]),c.$set(be)},i(O){U||(Ci(n.$$.fragment,O),Ci(d.$$.fragment,O),Ci(M.$$.fragment,O),Ci(c.$$.fragment,O),U=!0)},o(O){tr(n.$$.fragment,O),tr(d.$$.fragment,O),tr(M.$$.fragment,O),tr(c.$$.fragment,O),U=!1},d(O){O&&(pn(a),pn(w),pn(P)),na(n,O),na(d,O),na(M,O),na(c,O)}}}function Gz(e){let n,a,d,w,M,P=e[3]&&e[0]&&Pv(e);return{c(){n=ar("div"),P&&P.c(),this.h()},l(c){n=lr(c,"DIV",{class:!0});var U=ui(n);P&&P.l(U),U.forEach(pn),this.h()},h(){Jt(n,"class",a=z1(e[1])+" svelte-p00lfq"),O2(n,"expand-map",!e[1])},m(c,U){nr(c,n,U),P&&P.m(n,null),d=!0,w||(M=zl(e[9].call(null,n)),w=!0)},p(c,U){c[3]&&c[0]?P?(P.p(c,U),U[0]&9&&Ci(P,1)):(P=Pv(c),P.c(),Ci(P,1),P.m(n,null)):P&&(q0(),tr(P,1,1,()=>{P=null}),G0()),(!d||U[0]&2&&a!==(a=z1(c[1])+" svelte-p00lfq"))&&Jt(n,"class",a),(!d||U[0]&2)&&O2(n,"expand-map",!c[1])},i(c){d||(Ci(P),d=!0)},o(c){tr(P),d=!1},d(c){c&&pn(n),P&&P.d(),w=!1,M()}}}function qz(e,n,a){let d,w,M,P,{$$slots:c={},$$scope:U}=n,{map:O=null}=n,{class:j=void 0}=n,{style:W}=n,{diffStyleUpdates:J=!1}=n,{center:ae=void 0}=n,{zoom:be=void 0}=n,{pitch:Ze=0}=n,{bearing:xe=0}=n,{bounds:Ce=void 0}=n,{hash:je=!1}=n,{loaded:Qe=!1}=n,{minZoom:nt=0}=n,{maxZoom:it=22}=n,{zoomOnDoubleClick:xt=!0}=n,{interactive:Ft=!0}=n,{attributionControl:It=!0}=n,{cooperativeGestures:nn=!1}=n,{preserveDrawingBuffer:Zt=!1}=n,{maxBounds:At=void 0}=n,{images:bt=[]}=n,{standardControls:kt=!1}=n,{filterLayers:De=void 0}=n,{transformRequest:at=void 0}=n;const lt=ax(),{map:Tt,loadedImages:Ot}=kz();Bu(e,Tt,Ct=>a(3,M=Ct)),Bu(e,Ot,Ct=>a(4,P=Ct));let Gt=new Set;function _n(Ct){M!=null&&M.loaded()&&("url"in Ct?(Gt.add(Ct.id),M.loadImage(Ct.url,(xn,Bt)=>{Gt.delete(Ct.id),xn?lt("error",xn):Bt&&(M==null||M.addImage(Ct.id,Bt,Ct.options),P.add(Ct.id),Ot.set(P))})):(M.addImage(Ct.id,Ct.data,Ct.options),P.add(Ct.id),Ot.set(P)))}let hn,vn,Dn,Qn;function di(Ct){if(je){let xn=Lz(window.location.hash);xn.length>=3&&(a(11,be=xn[0]),a(10,ae=[xn[2],xn[1]])),xn.length==5&&(a(15,xe=xn[3]),a(14,Ze=xn[4]))}return Lp(Tt,M=new Kc.Map(Sz({container:Ct,style:W,center:ae,zoom:be,pitch:Ze,bearing:xe,minZoom:nt,maxZoom:it,interactive:Ft,preserveDrawingBuffer:Zt,maxBounds:At,bounds:Ce,attributionControl:It,transformRequest:at,cooperativeGestures:nn})),M),M.on("load",xn=>{a(0,Qe=!0),lt("load",M)}),M.on("error",xn=>lt("error",{...xn,map:M})),M.on("movestart",xn=>lt("movestart",{...xn,map:M})),M.on("moveend",xn=>{if(a(10,ae=xn.target.getCenter()),a(11,be=xn.target.getZoom()),a(12,Ce=xn.target.getBounds()),lt("moveend",{...xn,map:M}),je){let Bt=window.location.href.replace(/(#.+)?$/,zz(M));window.history.replaceState(window.history.state,"",Bt)}}),M.on("zoomstart",xn=>lt("zoomstart",{...xn,map:M})),M.on("zoom",xn=>{a(11,be=xn.target.getZoom()),lt("zoom",{...xn,map:M})}),M.on("zoomend",xn=>{a(11,be=xn.target.getZoom()),lt("zoomend",{...xn,map:M})}),M.on("style.load",()=>{if(M){const xn=M.getStyle();if(a(30,hn=xn.layers.map(Bt=>Bt.id)),a(31,vn=Object.keys(xn.sources)),Qn)for(const[Bt,En]of Object.entries(Qn))M.addSource(Bt,En);if(Dn)for(const Bt of Dn)M.addLayer(Bt)}}),M.on("styledata",xn=>{if(M&&De){const Bt=M.getStyle().layers;if(Bt)for(let En of Bt)De(En)||M.setLayoutProperty(En.id,"visibility","none")}lt("styledata",{...xn,map:M})}),{destroy(){a(0,Qe=!1),M==null||M.remove(),Lp(Tt,M=null,M)}}}let xi=W;return e.$$set=Ct=>{"map"in Ct&&a(13,O=Ct.map),"class"in Ct&&a(1,j=Ct.class),"style"in Ct&&a(16,W=Ct.style),"diffStyleUpdates"in Ct&&a(17,J=Ct.diffStyleUpdates),"center"in Ct&&a(10,ae=Ct.center),"zoom"in Ct&&a(11,be=Ct.zoom),"pitch"in Ct&&a(14,Ze=Ct.pitch),"bearing"in Ct&&a(15,xe=Ct.bearing),"bounds"in Ct&&a(12,Ce=Ct.bounds),"hash"in Ct&&a(18,je=Ct.hash),"loaded"in Ct&&a(0,Qe=Ct.loaded),"minZoom"in Ct&&a(19,nt=Ct.minZoom),"maxZoom"in Ct&&a(20,it=Ct.maxZoom),"zoomOnDoubleClick"in Ct&&a(21,xt=Ct.zoomOnDoubleClick),"interactive"in Ct&&a(22,Ft=Ct.interactive),"attributionControl"in Ct&&a(23,It=Ct.attributionControl),"cooperativeGestures"in Ct&&a(24,nn=Ct.cooperativeGestures),"preserveDrawingBuffer"in Ct&&a(25,Zt=Ct.preserveDrawingBuffer),"maxBounds"in Ct&&a(26,At=Ct.maxBounds),"images"in Ct&&a(27,bt=Ct.images),"standardControls"in Ct&&a(2,kt=Ct.standardControls),"filterLayers"in Ct&&a(28,De=Ct.filterLayers),"transformRequest"in Ct&&a(29,at=Ct.transformRequest),"$$scope"in Ct&&a(33,U=Ct.$$scope)},e.$$.update=()=>{if(e.$$.dirty[0]&4&&a(6,d=typeof kt=="boolean"?void 0:kt),e.$$.dirty[0]&8&&a(13,O=M),e.$$.dirty[0]&134217737&&Qe&&M!=null&&M.loaded())for(let Ct of bt)!Gt.has(Ct.id)&&!M.hasImage(Ct.id)&&_n(Ct);if(e.$$.dirty[0]&134217744&&a(5,w=bt.every(Ct=>P.has(Ct.id))),e.$$.dirty[0]&1073938440|e.$$.dirty[1]&3&&M&&!yp(W,xi)){const Ct=M.getStyle();if(hn&&(Dn=Ct.layers.filter(xn=>!hn.includes(xn.id))),vn){const xn=Object.keys(Ct.sources).filter(Bt=>!vn.includes(Bt));Qn={};for(const Bt of xn)Qn[Bt]=Ct.sources[Bt]}a(32,xi=W),M.setStyle(W,{diff:J})}e.$$.dirty[0]&1032&&ae&&!yp(ae,M==null?void 0:M.getCenter())&&(M==null||M.panTo(ae)),e.$$.dirty[0]&2056&&be&&!yp(be,M==null?void 0:M.getZoom())&&(M==null||M.zoomTo(be)),e.$$.dirty[0]&4104&&Ce&&!yp(Ce,M==null?void 0:M.getBounds())&&(M==null||M.fitBounds(Ce)),e.$$.dirty[0]&2097160&&(xt?M==null||M.doubleClickZoom.enable():M==null||M.doubleClickZoom.disable())},[Qe,j,kt,M,P,w,d,Tt,Ot,di,ae,be,Ce,O,Ze,xe,W,J,je,nt,it,xt,Ft,It,nn,Zt,At,bt,De,at,hn,vn,xi,U,c]}class Zz extends io{constructor(n){super(),ro(this,n,qz,Gz,ws,{map:13,class:1,style:16,diffStyleUpdates:17,center:10,zoom:11,pitch:14,bearing:15,bounds:12,hash:18,loaded:0,minZoom:19,maxZoom:20,zoomOnDoubleClick:21,interactive:22,attributionControl:23,cooperativeGestures:24,preserveDrawingBuffer:25,maxBounds:26,images:27,standardControls:2,filterLayers:28,transformRequest:29},null,[-1,-1])}}function Hz(e){let n,a,d,w,M,P,c;const U=e[17].default,O=$c(U,e,e[16],null);return{c(){n=ar("div"),O&&O.c(),this.h()},l(j){n=lr(j,"DIV",{tabindex:!0,role:!0});var W=ui(n);O&&O.l(W),W.forEach(pn),this.h()},h(){Jt(n,"tabindex",a=e[1]?0:void 0),Jt(n,"role",d=e[1]?"button":void 0),N2(n,"z-index",e[2])},m(j,W){nr(j,n,W),O&&O.m(n,null),M=!0,P||(c=[zl(e[6].call(null,n)),zl(w=$z.call(null,n,e[0])),nl(n,"click",e[18]),nl(n,"dblclick",e[19]),nl(n,"contextmenu",e[20]),nl(n,"mouseenter",e[21]),nl(n,"mouseleave",e[22]),nl(n,"mousemove",e[23]),nl(n,"keydown",e[7])],P=!0)},p(j,[W]){O&&O.p&&(!M||W&65536)&&jc(O,U,j,j[16],M?Yc(U,j[16],W,null):Wc(j[16]),null),(!M||W&2&&a!==(a=j[1]?0:void 0))&&Jt(n,"tabindex",a),(!M||W&2&&d!==(d=j[1]?"button":void 0))&&Jt(n,"role",d),w&&If(w.update)&&W&1&&w.update.call(null,j[0]),W&4&&N2(n,"z-index",j[2])},i(j){M||(Ci(O,j),M=!0)},o(j){tr(O,j),M=!1},d(j){j&&pn(n),O&&O.d(j),P=!1,Xc(c)}}}function $z(e,n){const a=e.className;function d(w){w?e.className=`${a} ${w}`:e.className=a}return d(n),{update:d}}function jz(e,n,a){let d,w,M,{$$slots:P={},$$scope:c}=n,{lngLat:U}=n,{class:O=void 0}=n,{interactive:j=!0}=n,{asButton:W=!1}=n,{draggable:J=!1}=n,{feature:ae=null}=n,{offset:be=void 0}=n,{zIndex:Ze=void 0}=n,{rotation:xe=0}=n;const Ce=ax(),{map:je,layerEvent:Qe,self:nt}=Mz();Bu(e,je,at=>a(25,M=at)),Bu(e,Qe,at=>a(24,d=at)),Bu(e,nt,at=>a(15,w=at));function it(at){Lp(nt,w=new Kc.Marker({element:at,rotation:xe,draggable:J,offset:be}).setLngLat(U).addTo(M),w);const lt=()=>It("dragstart"),Tt=()=>{xt(),It("drag")},Ot=()=>{xt(),It("dragend")};return J&&(w.on("dragstart",lt),w.on("drag",Tt),w.on("dragend",Ot)),{destroy(){J&&(w==null||w.off("dragstart",lt),w==null||w.off("drag",Tt),w==null||w.off("dragend",Ot)),w==null||w.remove()}}}function xt(){let at=w==null?void 0:w.getLngLat();at&&(Array.isArray(U)?a(9,U=[at.lng,at.lat]):U&&"lon"in U?a(9,U={lon:at.lng,lat:at.lat}):a(9,U=at))}function Ft(at){at.key===" "&&(at.preventDefault(),at.stopPropagation(),It("click"))}function It(at){if(!j)return;let lt=w==null?void 0:w.getLngLat();if(!lt)return;const Tt=[lt.lng,lt.lat];let Ot={map:M,marker:w,lngLat:Tt,features:[{type:"Feature",properties:(ae==null?void 0:ae.properties)??{},geometry:{type:"Point",coordinates:Tt}}]};Lp(Qe,d={...Ot,layerType:"marker",type:at},d),Ce(at,Ot)}const nn=()=>It("click"),Zt=()=>It("dblclick"),At=()=>It("contextmenu"),bt=at=>{It("mouseenter")},kt=()=>{It("mouseleave")},De=()=>It("mousemove");return e.$$set=at=>{"lngLat"in at&&a(9,U=at.lngLat),"class"in at&&a(0,O=at.class),"interactive"in at&&a(10,j=at.interactive),"asButton"in at&&a(1,W=at.asButton),"draggable"in at&&a(11,J=at.draggable),"feature"in at&&a(12,ae=at.feature),"offset"in at&&a(13,be=at.offset),"zIndex"in at&&a(2,Ze=at.zIndex),"rotation"in at&&a(14,xe=at.rotation),"$$scope"in at&&a(16,c=at.$$scope)},e.$$.update=()=>{e.$$.dirty&33280&&(w==null||w.setLngLat(U)),e.$$.dirty&40960&&(w==null||w.setOffset(be??[0,0])),e.$$.dirty&49152&&(w==null||w.setRotation(xe))},[O,W,Ze,je,Qe,nt,it,Ft,It,U,j,J,ae,be,xe,w,c,P,nn,Zt,At,bt,kt,De]}class Wz extends io{constructor(n){super(),ro(this,n,jz,Hz,ws,{lngLat:9,class:0,interactive:10,asButton:1,draggable:11,feature:12,offset:13,zIndex:2,rotation:14})}}var Uf=Uint8Array,r3=Uint16Array,Yz=Int32Array,Xz=new Uf([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Kz=new Uf([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),A3=function(e,n){for(var a=new r3(31),d=0;d<31;++d)a[d]=n+=1<<e[d-1];for(var w=new Yz(a[30]),d=1;d<30;++d)for(var M=a[d];M<a[d+1];++M)w[M]=M-a[d]<<5|d;return{b:a,r:w}},s3=A3(Xz,2),Jz=s3.b,e7=s3.r;Jz[28]=258,e7[258]=28;A3(Kz,0);var t7=new r3(32768);for(ur=0;ur<32768;++ur)Mu=(ur&43690)>>1|(ur&21845)<<1,Mu=(Mu&52428)>>2|(Mu&13107)<<2,Mu=(Mu&61680)>>4|(Mu&3855)<<4,t7[ur]=((Mu&65280)>>8|(Mu&255)<<8)>>1;var Mu,ur,Tm=new Uf(288);for(ur=0;ur<144;++ur)Tm[ur]=8;var ur;for(ur=144;ur<256;++ur)Tm[ur]=9;var ur;for(ur=256;ur<280;++ur)Tm[ur]=7;var ur;for(ur=280;ur<288;++ur)Tm[ur]=8;var ur,n7=new Uf(32);for(ur=0;ur<32;++ur)n7[ur]=5;var ur,i7=new Uf(0),r7=typeof TextDecoder<"u"&&new TextDecoder,A7=0;try{r7.decode(i7,{stream:!0}),A7=1}catch{}var Sm={exports:{}},s7=a7,o7={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"};function a7(e){if(!e||!e.type)return null;var n=o7[e.type];if(!n)return null;if(n==="geometry")return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:e}]};if(n==="feature")return{type:"FeatureCollection",features:[e]};if(n==="featurecollection")return e}function Ip(e){switch(e&&e.type||null){case"FeatureCollection":return e.features=e.features.reduce(function(n,a){return n.concat(Ip(a))},[]),e;case"Feature":return e.geometry?Ip(e.geometry).map(function(n){var a={type:"Feature",properties:JSON.parse(JSON.stringify(e.properties)),geometry:n};return e.id!==void 0&&(a.id=e.id),a}):[e];case"MultiPoint":return e.coordinates.map(function(n){return{type:"Point",coordinates:n}});case"MultiPolygon":return e.coordinates.map(function(n){return{type:"Polygon",coordinates:n}});case"MultiLineString":return e.coordinates.map(function(n){return{type:"LineString",coordinates:n}});case"GeometryCollection":return e.geometries.map(Ip).reduce(function(n,a){return n.concat(a)},[]);case"Point":case"Polygon":case"LineString":return[e]}}const l7=Object.freeze(Object.defineProperty({__proto__:null,default:Ip},Symbol.toStringTag,{value:"Module"})),u7=fP(l7);var c7=function(n){return a(n);function a(d){return Array.isArray(d)&&d.length&&typeof d[0]=="number"?[d]:d.reduce(function(w,M){return Array.isArray(M)&&Array.isArray(M[0])?w.concat(a(M)):(w.push(M),w)},[])}},h7=s7,Bp=u7,f7=c7;Bp instanceof Function||(Bp=Bp.default);var d7=function(e){if(!e)return[];var n=Bp(h7(e)),a=[];return n.features.forEach(function(d){d.geometry&&(a=a.concat(f7(d.geometry.coordinates)))}),a};function Jc(e){return Object.prototype.toString.call(e)}function p7(e){return Jc(e)==="[object Date]"}function m7(e){return Jc(e)==="[object RegExp]"}function g7(e){return Jc(e)==="[object Error]"}function _7(e){return Jc(e)==="[object Boolean]"}function y7(e){return Jc(e)==="[object Number]"}function v7(e){return Jc(e)==="[object String]"}var o3=Array.isArray||function(n){return Object.prototype.toString.call(n)==="[object Array]"};function Cm(e,n){if(e.forEach)return e.forEach(n);for(var a=0;a<e.length;a++)n(e[a],a,e)}var x7=Object.keys||function(n){var a=[];for(var d in n)a.push(d);return a},w7=Object.prototype.propertyIsEnumerable,Lv=Object.getOwnPropertySymbols;function Im(e){var n=x7(e);if(Lv)for(var a=Lv(e),d=0;d<a.length;d++)w7.call(e,a[d])&&n.push(a[d]);return n}var Bm=Object.prototype.hasOwnProperty||function(e,n){return n in e};function a3(e){if(typeof e=="object"&&e!==null){var n;if(o3(e))n=[];else if(p7(e))n=new Date(e.getTime?e.getTime():e);else if(m7(e))n=new RegExp(e);else if(g7(e))n={message:e.message};else if(_7(e)||y7(e)||v7(e))n=Object(e);else if(Object.create&&Object.getPrototypeOf)n=Object.create(Object.getPrototypeOf(e));else if(e.constructor===Object)n={};else{var a=e.constructor&&e.constructor.prototype||e.__proto__||{},d=function(){};d.prototype=a,n=new d}return Cm(Im(e),function(w){n[w]=e[w]}),n}return e}function l3(e,n,a){var d=[],w=[],M=!0;return function P(c){var U=a?a3(c):c,O={},j=!0,W={node:U,node_:c,path:[].concat(d),parent:w[w.length-1],parents:w,key:d[d.length-1],isRoot:d.length===0,level:d.length,circular:null,update:function(be,Ze){W.isRoot||(W.parent.node[W.key]=be),W.node=be,Ze&&(j=!1)},delete:function(be){delete W.parent.node[W.key],be&&(j=!1)},remove:function(be){o3(W.parent.node)?W.parent.node.splice(W.key,1):delete W.parent.node[W.key],be&&(j=!1)},keys:null,before:function(be){O.before=be},after:function(be){O.after=be},pre:function(be){O.pre=be},post:function(be){O.post=be},stop:function(){M=!1},block:function(){j=!1}};if(!M)return W;function J(){if(typeof W.node=="object"&&W.node!==null){(!W.keys||W.node_!==W.node)&&(W.keys=Im(W.node)),W.isLeaf=W.keys.length===0;for(var be=0;be<w.length;be++)if(w[be].node_===c){W.circular=w[be];break}}else W.isLeaf=!0,W.keys=null;W.notLeaf=!W.isLeaf,W.notRoot=!W.isRoot}J();var ae=n.call(W,W.node);return ae!==void 0&&W.update&&W.update(ae),O.before&&O.before.call(W,W.node),j&&(typeof W.node=="object"&&W.node!==null&&!W.circular&&(w.push(W),J(),Cm(W.keys,function(be,Ze){d.push(be),O.pre&&O.pre.call(W,W.node[be],be);var xe=P(W.node[be]);a&&Bm.call(W.node,be)&&(W.node[be]=xe.node),xe.isLast=Ze===W.keys.length-1,xe.isFirst=Ze===0,O.post&&O.post.call(W,xe),d.pop()}),w.pop()),O.after&&O.after.call(W,W.node)),W}(e).node}function il(e){this.value=e}il.prototype.get=function(e){for(var n=this.value,a=0;a<e.length;a++){var d=e[a];if(!n||!Bm.call(n,d))return;n=n[d]}return n};il.prototype.has=function(e){for(var n=this.value,a=0;a<e.length;a++){var d=e[a];if(!n||!Bm.call(n,d))return!1;n=n[d]}return!0};il.prototype.set=function(e,n){for(var a=this.value,d=0;d<e.length-1;d++){var w=e[d];Bm.call(a,w)||(a[w]={}),a=a[w]}return a[e[d]]=n,n};il.prototype.map=function(e){return l3(this.value,e,!0)};il.prototype.forEach=function(e){return this.value=l3(this.value,e,!1),this.value};il.prototype.reduce=function(e,n){var a=arguments.length===1,d=a?this.value:n;return this.forEach(function(w){(!this.isRoot||!a)&&(d=e.call(this,d,w))}),d};il.prototype.paths=function(){var e=[];return this.forEach(function(){e.push(this.path)}),e};il.prototype.nodes=function(){var e=[];return this.forEach(function(){e.push(this.node)}),e};il.prototype.clone=function(){var e=[],n=[];return function a(d){for(var w=0;w<e.length;w++)if(e[w]===d)return n[w];if(typeof d=="object"&&d!==null){var M=a3(d);return e.push(d),n.push(M),Cm(Im(d),function(P){M[P]=a(d[P])}),e.pop(),n.pop(),M}return d}(this.value)};function u3(e){return new il(e)}Cm(Im(il.prototype),function(e){u3[e]=function(n){var a=[].slice.call(arguments,1),d=new il(n);return d[e].apply(d,a)}});var b7=u3,k7=To;function To(e){if(!(this instanceof To))return new To(e);this._bbox=e||[1/0,1/0,-1/0,-1/0],this._valid=!!e}To.prototype.include=function(e){return this._valid=!0,this._bbox[0]=Math.min(this._bbox[0],e[0]),this._bbox[1]=Math.min(this._bbox[1],e[1]),this._bbox[2]=Math.max(this._bbox[2],e[0]),this._bbox[3]=Math.max(this._bbox[3],e[1]),this};To.prototype.equals=function(e){var n;return e instanceof To?n=e.bbox():n=e,this._bbox[0]==n[0]&&this._bbox[1]==n[1]&&this._bbox[2]==n[2]&&this._bbox[3]==n[3]};To.prototype.center=function(e){return this._valid?[(this._bbox[0]+this._bbox[2])/2,(this._bbox[1]+this._bbox[3])/2]:null};To.prototype.union=function(e){this._valid=!0;var n;return e instanceof To?n=e.bbox():n=e,this._bbox[0]=Math.min(this._bbox[0],n[0]),this._bbox[1]=Math.min(this._bbox[1],n[1]),this._bbox[2]=Math.max(this._bbox[2],n[2]),this._bbox[3]=Math.max(this._bbox[3],n[3]),this};To.prototype.bbox=function(){return this._valid?this._bbox:null};To.prototype.contains=function(e){if(!e)return this._fastContains();if(!this._valid)return null;var n=e[0],a=e[1];return this._bbox[0]<=n&&this._bbox[1]<=a&&this._bbox[2]>=n&&this._bbox[3]>=a};To.prototype.intersect=function(e){if(!this._valid)return null;var n;return e instanceof To?n=e.bbox():n=e,!(this._bbox[0]>n[2]||this._bbox[2]<n[0]||this._bbox[3]<n[1]||this._bbox[1]>n[3])};To.prototype._fastContains=function(){if(!this._valid)return new Function("return null;");var e="return "+this._bbox[0]+"<= ll[0] &&"+this._bbox[1]+"<= ll[1] &&"+this._bbox[2]+">= ll[0] &&"+this._bbox[3]+">= ll[1]";return new Function("ll",e)};To.prototype.polygon=function(){return this._valid?{type:"Polygon",coordinates:[[[this._bbox[0],this._bbox[1]],[this._bbox[2],this._bbox[1]],[this._bbox[2],this._bbox[3]],[this._bbox[0],this._bbox[3]],[this._bbox[0],this._bbox[1]]]]}:null};var E7=d7,M7=b7,T7=k7,c3={features:["FeatureCollection"],coordinates:["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],geometry:["Feature"],geometries:["GeometryCollection"]},S7=Object.keys(c3);Sm.exports=function(e){return k2(e).bbox()};Sm.exports.polygon=function(e){return k2(e).polygon()};Sm.exports.bboxify=function(e){return M7(e).map(function(n){if(n){var a=S7.some(function(d){return n[d]?c3[d].indexOf(n.type)!==-1:!1});a&&(n.bbox=k2(n).bbox(),this.update(n))}})};function k2(e){for(var n=T7(),a=E7(e),d=0;d<a.length;d++)n.include(a[d]);return n}var C7=Sm.exports;const I7=$b(C7);var Jo=function(e){e=e||{};var n=typeof e<"u"?e:{},a={},d;for(d in n)n.hasOwnProperty(d)&&(a[d]=n[d]);var w="";function M(se){return n.locateFile?n.locateFile(se,w):w+se}var P;typeof document<"u"&&document.currentScript&&(w=document.currentScript.src),w.indexOf("blob:")!==0?w=w.substr(0,w.lastIndexOf("/")+1):w="",P=function(_e,We,dt){var t=new XMLHttpRequest;t.open("GET",_e,!0),t.responseType="arraybuffer",t.onload=function(){if(t.status==200||t.status==0&&t.response){We(t.response);return}var St=br(_e);if(St){We(St.buffer);return}dt()},t.onerror=dt,t.send(null)};var c=n.print||console.log.bind(console),U=n.printErr||console.warn.bind(console);for(d in a)a.hasOwnProperty(d)&&(n[d]=a[d]);a=null,n.arguments&&n.arguments;var O=0,j=function(se){O=se},W=function(){return O},J=8;function ae(se,_e,We,dt){switch(We=We||"i8",We.charAt(We.length-1)==="*"&&(We="i32"),We){case"i1":bt[se>>0]=_e;break;case"i8":bt[se>>0]=_e;break;case"i16":De[se>>1]=_e;break;case"i32":at[se>>2]=_e;break;case"i64":Br=[_e>>>0,(qn=_e,+Ii(qn)>=1?qn>0?(Ar(+qi(qn/4294967296),4294967295)|0)>>>0:~~+Pn((qn-+(~~qn>>>0))/4294967296)>>>0:0)],at[se>>2]=Br[0],at[se+4>>2]=Br[1];break;case"float":lt[se>>2]=_e;break;case"double":Tt[se>>3]=_e;break;default:yt("invalid type for setValue: "+We)}}function be(se,_e,We){switch(_e=_e||"i8",_e.charAt(_e.length-1)==="*"&&(_e="i32"),_e){case"i1":return bt[se>>0];case"i8":return bt[se>>0];case"i16":return De[se>>1];case"i32":return at[se>>2];case"i64":return at[se>>2];case"float":return lt[se>>2];case"double":return Tt[se>>3];default:yt("invalid type for getValue: "+_e)}return null}var Ze=!1;function xe(se,_e){se||yt("Assertion failed: "+_e)}function Ce(se){var _e=n["_"+se];return xe(_e,"Cannot call unknown function "+se+", make sure it is exported"),_e}function je(se,_e,We,dt,t){var K={string:function(sn){var oi=0;if(sn!=null&&sn!==0){var Dr=(sn.length<<2)+1;oi=oe(Dr),It(sn,oi,Dr)}return oi},array:function(sn){var oi=oe(sn.length);return nn(sn,oi),oi}};function St(sn){return _e==="string"?xt(sn):_e==="boolean"?!!sn:sn}var Qt=Ce(se),en=[],Pt=0;if(dt)for(var Ht=0;Ht<dt.length;Ht++){var Bn=K[We[Ht]];Bn?(Pt===0&&(Pt=we()),en[Ht]=Bn(dt[Ht])):en[Ht]=dt[Ht]}var $t=Qt.apply(null,en);return $t=St($t),Pt!==0&&de(Pt),$t}function Qe(se,_e,We,dt){We=We||[];var t=We.every(function(St){return St==="number"}),K=_e!=="string";return K&&t&&!dt?Ce(se):function(){return je(se,_e,We,arguments)}}var nt=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function it(se,_e,We){for(var dt=_e+We,t=_e;se[t]&&!(t>=dt);)++t;if(t-_e>16&&se.subarray&&nt)return nt.decode(se.subarray(_e,t));for(var K="";_e<t;){var St=se[_e++];if(!(St&128)){K+=String.fromCharCode(St);continue}var Qt=se[_e++]&63;if((St&224)==192){K+=String.fromCharCode((St&31)<<6|Qt);continue}var en=se[_e++]&63;if((St&240)==224?St=(St&15)<<12|Qt<<6|en:St=(St&7)<<18|Qt<<12|en<<6|se[_e++]&63,St<65536)K+=String.fromCharCode(St);else{var Pt=St-65536;K+=String.fromCharCode(55296|Pt>>10,56320|Pt&1023)}}return K}function xt(se,_e){return se?it(kt,se,_e):""}function Ft(se,_e,We,dt){if(!(dt>0))return 0;for(var t=We,K=We+dt-1,St=0;St<se.length;++St){var Qt=se.charCodeAt(St);if(Qt>=55296&&Qt<=57343){var en=se.charCodeAt(++St);Qt=65536+((Qt&1023)<<10)|en&1023}if(Qt<=127){if(We>=K)break;_e[We++]=Qt}else if(Qt<=2047){if(We+1>=K)break;_e[We++]=192|Qt>>6,_e[We++]=128|Qt&63}else if(Qt<=65535){if(We+2>=K)break;_e[We++]=224|Qt>>12,_e[We++]=128|Qt>>6&63,_e[We++]=128|Qt&63}else{if(We+3>=K)break;_e[We++]=240|Qt>>18,_e[We++]=128|Qt>>12&63,_e[We++]=128|Qt>>6&63,_e[We++]=128|Qt&63}}return _e[We]=0,We-t}function It(se,_e,We){return Ft(se,kt,_e,We)}typeof TextDecoder<"u"&&new TextDecoder("utf-16le");function nn(se,_e){bt.set(se,_e)}function Zt(se,_e){return se%_e>0&&(se+=_e-se%_e),se}var At,bt,kt,De,at,lt,Tt;function Ot(se){At=se,n.HEAP8=bt=new Int8Array(se),n.HEAP16=De=new Int16Array(se),n.HEAP32=at=new Int32Array(se),n.HEAPU8=kt=new Uint8Array(se),n.HEAPU16=new Uint16Array(se),n.HEAPU32=new Uint32Array(se),n.HEAPF32=lt=new Float32Array(se),n.HEAPF64=Tt=new Float64Array(se)}var Gt=5267040,_n=24128,hn=n.TOTAL_MEMORY||33554432;n.buffer?At=n.buffer:At=new ArrayBuffer(hn),hn=At.byteLength,Ot(At),at[_n>>2]=Gt;function vn(se){for(;se.length>0;){var _e=se.shift();if(typeof _e=="function"){_e();continue}var We=_e.func;typeof We=="number"?_e.arg===void 0?n.dynCall_v(We):n.dynCall_vi(We,_e.arg):We(_e.arg===void 0?null:_e.arg)}}var Dn=[],Qn=[],di=[],xi=[];function Ct(){if(n.preRun)for(typeof n.preRun=="function"&&(n.preRun=[n.preRun]);n.preRun.length;)Gn(n.preRun.shift());vn(Dn)}function xn(){vn(Qn)}function Bt(){vn(di)}function En(){if(n.postRun)for(typeof n.postRun=="function"&&(n.postRun=[n.postRun]);n.postRun.length;)Lt(n.postRun.shift());vn(xi)}function Gn(se){Dn.unshift(se)}function Lt(se){xi.unshift(se)}var Ii=Math.abs,Pn=Math.ceil,qi=Math.floor,Ar=Math.min,un=0,Jn=null;function uA(se){un++,n.monitorRunDependencies&&n.monitorRunDependencies(un)}function pt(se){if(un--,n.monitorRunDependencies&&n.monitorRunDependencies(un),un==0&&Jn){var _e=Jn;Jn=null,_e()}}n.preloadedImages={},n.preloadedAudios={};var ei=null,_r="data:application/octet-stream;base64,";function pi(se){return String.prototype.startsWith?se.startsWith(_r):se.indexOf(_r)===0}var qn,Br;ei="data:application/octet-stream;base64,AAAAAAAAAAAAAAAAAQAAAAIAAAADAAAABAAAAAUAAAAGAAAAAQAAAAQAAAADAAAABgAAAAUAAAACAAAAAAAAAAIAAAADAAAAAQAAAAQAAAAGAAAAAAAAAAUAAAADAAAABgAAAAQAAAAFAAAAAAAAAAEAAAACAAAABAAAAAUAAAAGAAAAAAAAAAIAAAADAAAAAQAAAAUAAAACAAAAAAAAAAEAAAADAAAABgAAAAQAAAAGAAAAAAAAAAUAAAACAAAAAQAAAAQAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAIAAAADAAAAAAAAAAAAAAACAAAAAAAAAAEAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAYAAAAAAAAABQAAAAAAAAAAAAAABAAAAAUAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAYAAAAAAAAABgAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAgAAAAMAAAAEAAAABQAAAAYAAAABAAAAAgAAAAMAAAAEAAAABQAAAAYAAAAAAAAAAgAAAAMAAAAEAAAABQAAAAYAAAAAAAAAAQAAAAMAAAAEAAAABQAAAAYAAAAAAAAAAQAAAAIAAAAEAAAABQAAAAYAAAAAAAAAAQAAAAIAAAADAAAABQAAAAYAAAAAAAAAAQAAAAIAAAADAAAABAAAAAYAAAAAAAAAAQAAAAIAAAADAAAABAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAgAAAAIAAAAAAAAAAAAAAAYAAAAAAAAAAwAAAAIAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAFAAAABAAAAAAAAAABAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAYAAAAAAAAABAAAAAAAAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAgAAAAQAAAADAAAACAAAAAEAAAAHAAAABgAAAAkAAAAAAAAAAwAAAAIAAAACAAAABgAAAAoAAAALAAAAAAAAAAEAAAAFAAAAAwAAAA0AAAABAAAABwAAAAQAAAAMAAAAAAAAAAQAAAB/AAAADwAAAAgAAAADAAAAAAAAAAwAAAAFAAAAAgAAABIAAAAKAAAACAAAAAAAAAAQAAAABgAAAA4AAAALAAAAEQAAAAEAAAAJAAAAAgAAAAcAAAAVAAAACQAAABMAAAADAAAADQAAAAEAAAAIAAAABQAAABYAAAAQAAAABAAAAAAAAAAPAAAACQAAABMAAAAOAAAAFAAAAAEAAAAHAAAABgAAAAoAAAALAAAAGAAAABcAAAAFAAAAAgAAABIAAAALAAAAEQAAABcAAAAZAAAAAgAAAAYAAAAKAAAADAAAABwAAAANAAAAGgAAAAQAAAAPAAAAAwAAAA0AAAAaAAAAFQAAAB0AAAADAAAADAAAAAcAAAAOAAAAfwAAABEAAAAbAAAACQAAABQAAAAGAAAADwAAABYAAAAcAAAAHwAAAAQAAAAIAAAADAAAABAAAAASAAAAIQAAAB4AAAAIAAAABQAAABYAAAARAAAACwAAAA4AAAAGAAAAIwAAABkAAAAbAAAAEgAAABgAAAAeAAAAIAAAAAUAAAAKAAAAEAAAABMAAAAiAAAAFAAAACQAAAAHAAAAFQAAAAkAAAAUAAAADgAAABMAAAAJAAAAKAAAABsAAAAkAAAAFQAAACYAAAATAAAAIgAAAA0AAAAdAAAABwAAABYAAAAQAAAAKQAAACEAAAAPAAAACAAAAB8AAAAXAAAAGAAAAAsAAAAKAAAAJwAAACUAAAAZAAAAGAAAAH8AAAAgAAAAJQAAAAoAAAAXAAAAEgAAABkAAAAXAAAAEQAAAAsAAAAtAAAAJwAAACMAAAAaAAAAKgAAAB0AAAArAAAADAAAABwAAAANAAAAGwAAACgAAAAjAAAALgAAAA4AAAAUAAAAEQAAABwAAAAfAAAAKgAAACwAAAAMAAAADwAAABoAAAAdAAAAKwAAACYAAAAvAAAADQAAABoAAAAVAAAAHgAAACAAAAAwAAAAMgAAABAAAAASAAAAIQAAAB8AAAApAAAALAAAADUAAAAPAAAAFgAAABwAAAAgAAAAHgAAABgAAAASAAAANAAAADIAAAAlAAAAIQAAAB4AAAAxAAAAMAAAABYAAAAQAAAAKQAAACIAAAATAAAAJgAAABUAAAA2AAAAJAAAADMAAAAjAAAALgAAAC0AAAA4AAAAEQAAABsAAAAZAAAAJAAAABQAAAAiAAAAEwAAADcAAAAoAAAANgAAACUAAAAnAAAANAAAADkAAAAYAAAAFwAAACAAAAAmAAAAfwAAACIAAAAzAAAAHQAAAC8AAAAVAAAAJwAAACUAAAAZAAAAFwAAADsAAAA5AAAALQAAACgAAAAbAAAAJAAAABQAAAA8AAAALgAAADcAAAApAAAAMQAAADUAAAA9AAAAFgAAACEAAAAfAAAAKgAAADoAAAArAAAAPgAAABwAAAAsAAAAGgAAACsAAAA+AAAALwAAAEAAAAAaAAAAKgAAAB0AAAAsAAAANQAAADoAAABBAAAAHAAAAB8AAAAqAAAALQAAACcAAAAjAAAAGQAAAD8AAAA7AAAAOAAAAC4AAAA8AAAAOAAAAEQAAAAbAAAAKAAAACMAAAAvAAAAJgAAACsAAAAdAAAARQAAADMAAABAAAAAMAAAADEAAAAeAAAAIQAAAEMAAABCAAAAMgAAADEAAAB/AAAAPQAAAEIAAAAhAAAAMAAAACkAAAAyAAAAMAAAACAAAAAeAAAARgAAAEMAAAA0AAAAMwAAAEUAAAA2AAAARwAAACYAAAAvAAAAIgAAADQAAAA5AAAARgAAAEoAAAAgAAAAJQAAADIAAAA1AAAAPQAAAEEAAABLAAAAHwAAACkAAAAsAAAANgAAAEcAAAA3AAAASQAAACIAAAAzAAAAJAAAADcAAAAoAAAANgAAACQAAABIAAAAPAAAAEkAAAA4AAAARAAAAD8AAABNAAAAIwAAAC4AAAAtAAAAOQAAADsAAABKAAAATgAAACUAAAAnAAAANAAAADoAAAB/AAAAPgAAAEwAAAAsAAAAQQAAACoAAAA7AAAAPwAAAE4AAABPAAAAJwAAAC0AAAA5AAAAPAAAAEgAAABEAAAAUAAAACgAAAA3AAAALgAAAD0AAAA1AAAAMQAAACkAAABRAAAASwAAAEIAAAA+AAAAKwAAADoAAAAqAAAAUgAAAEAAAABMAAAAPwAAAH8AAAA4AAAALQAAAE8AAAA7AAAATQAAAEAAAAAvAAAAPgAAACsAAABUAAAARQAAAFIAAABBAAAAOgAAADUAAAAsAAAAVgAAAEwAAABLAAAAQgAAAEMAAABRAAAAVQAAADEAAAAwAAAAPQAAAEMAAABCAAAAMgAAADAAAABXAAAAVQAAAEYAAABEAAAAOAAAADwAAAAuAAAAWgAAAE0AAABQAAAARQAAADMAAABAAAAALwAAAFkAAABHAAAAVAAAAEYAAABDAAAANAAAADIAAABTAAAAVwAAAEoAAABHAAAAWQAAAEkAAABbAAAAMwAAAEUAAAA2AAAASAAAAH8AAABJAAAANwAAAFAAAAA8AAAAWAAAAEkAAABbAAAASAAAAFgAAAA2AAAARwAAADcAAABKAAAATgAAAFMAAABcAAAANAAAADkAAABGAAAASwAAAEEAAAA9AAAANQAAAF4AAABWAAAAUQAAAEwAAABWAAAAUgAAAGAAAAA6AAAAQQAAAD4AAABNAAAAPwAAAEQAAAA4AAAAXQAAAE8AAABaAAAATgAAAEoAAAA7AAAAOQAAAF8AAABcAAAATwAAAE8AAABOAAAAPwAAADsAAABdAAAAXwAAAE0AAABQAAAARAAAAEgAAAA8AAAAYwAAAFoAAABYAAAAUQAAAFUAAABeAAAAZQAAAD0AAABCAAAASwAAAFIAAABgAAAAVAAAAGIAAAA+AAAATAAAAEAAAABTAAAAfwAAAEoAAABGAAAAZAAAAFcAAABcAAAAVAAAAEUAAABSAAAAQAAAAGEAAABZAAAAYgAAAFUAAABXAAAAZQAAAGYAAABCAAAAQwAAAFEAAABWAAAATAAAAEsAAABBAAAAaAAAAGAAAABeAAAAVwAAAFMAAABmAAAAZAAAAEMAAABGAAAAVQAAAFgAAABIAAAAWwAAAEkAAABjAAAAUAAAAGkAAABZAAAAYQAAAFsAAABnAAAARQAAAFQAAABHAAAAWgAAAE0AAABQAAAARAAAAGoAAABdAAAAYwAAAFsAAABJAAAAWQAAAEcAAABpAAAAWAAAAGcAAABcAAAAUwAAAE4AAABKAAAAbAAAAGQAAABfAAAAXQAAAE8AAABaAAAATQAAAG0AAABfAAAAagAAAF4AAABWAAAAUQAAAEsAAABrAAAAaAAAAGUAAABfAAAAXAAAAE8AAABOAAAAbQAAAGwAAABdAAAAYAAAAGgAAABiAAAAbgAAAEwAAABWAAAAUgAAAGEAAAB/AAAAYgAAAFQAAABnAAAAWQAAAG8AAABiAAAAbgAAAGEAAABvAAAAUgAAAGAAAABUAAAAYwAAAFAAAABpAAAAWAAAAGoAAABaAAAAcQAAAGQAAABmAAAAUwAAAFcAAABsAAAAcgAAAFwAAABlAAAAZgAAAGsAAABwAAAAUQAAAFUAAABeAAAAZgAAAGUAAABXAAAAVQAAAHIAAABwAAAAZAAAAGcAAABbAAAAYQAAAFkAAAB0AAAAaQAAAG8AAABoAAAAawAAAG4AAABzAAAAVgAAAF4AAABgAAAAaQAAAFgAAABnAAAAWwAAAHEAAABjAAAAdAAAAGoAAABdAAAAYwAAAFoAAAB1AAAAbQAAAHEAAABrAAAAfwAAAGUAAABeAAAAcwAAAGgAAABwAAAAbAAAAGQAAABfAAAAXAAAAHYAAAByAAAAbQAAAG0AAABsAAAAXQAAAF8AAAB1AAAAdgAAAGoAAABuAAAAYgAAAGgAAABgAAAAdwAAAG8AAABzAAAAbwAAAGEAAABuAAAAYgAAAHQAAABnAAAAdwAAAHAAAABrAAAAZgAAAGUAAAB4AAAAcwAAAHIAAABxAAAAYwAAAHQAAABpAAAAdQAAAGoAAAB5AAAAcgAAAHAAAABkAAAAZgAAAHYAAAB4AAAAbAAAAHMAAABuAAAAawAAAGgAAAB4AAAAdwAAAHAAAAB0AAAAZwAAAHcAAABvAAAAcQAAAGkAAAB5AAAAdQAAAH8AAABtAAAAdgAAAHEAAAB5AAAAagAAAHYAAAB4AAAAbAAAAHIAAAB1AAAAeQAAAG0AAAB3AAAAbwAAAHMAAABuAAAAeQAAAHQAAAB4AAAAeAAAAHMAAAByAAAAcAAAAHkAAAB3AAAAdgAAAHkAAAB0AAAAeAAAAHcAAAB1AAAAcQAAAHYAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAABAAAABQAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAACAAAABQAAAAEAAAAAAAAA/////wEAAAAAAAAAAwAAAAQAAAACAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAFAAAAAQAAAAAAAAAAAAAAAQAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAADAAAAAAAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAADAAAABQAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAEAAAABQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAABAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAQAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAADAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAAAAAABAAAAAwAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAADAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAUAAAABAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAABAAAAAUAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAIAAAAFAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAD/////AQAAAAAAAAADAAAABAAAAAIAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAUAAAABAAAAAAAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAAAAAAEAAAD//////////wEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAADAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAACAAAAAAAAAAAAAAABAAAAAgAAAAYAAAAEAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAcAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAKAAAAAgAAAAAAAAAAAAAAAQAAAAEAAAAFAAAABgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACgAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAACAAAAAAAAAAAAAAABAAAAAwAAAAcAAAAGAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAABwAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAGAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAADgAAAAIAAAAAAAAAAAAAAAEAAAAAAAAACQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACgAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAMAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAIAAAAAAAAAAAAAAAEAAAAEAAAACAAAAAoAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAALAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAACQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAGAAAAAgAAAAAAAAAAAAAAAQAAAAsAAAAPAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAOAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAIAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAABQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAgAAAAAAAAAAAAAAAQAAAAwAAAAQAAAADAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAoAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAJAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAPAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAADwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAACAAAAAAAAAAAAAAABAAAACgAAABMAAAAIAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEQAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEQAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAA8AAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAQAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAACQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAIAAAAAAAAAAAAAAAEAAAANAAAAEQAAAA0AAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAARAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAEQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAA0AAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAACAAAAAAAAAAAAAAABAAAADgAAABIAAAAPAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAADwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABIAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAASAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABIAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAATAAAAAgAAAAAAAAAAAAAAAQAAAP//////////EwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEgAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAASAAAAAAAAABgAAAAAAAAAIQAAAAAAAAAeAAAAAAAAACAAAAADAAAAMQAAAAEAAAAwAAAAAwAAADIAAAADAAAACAAAAAAAAAAFAAAABQAAAAoAAAAFAAAAFgAAAAAAAAAQAAAAAAAAABIAAAAAAAAAKQAAAAEAAAAhAAAAAAAAAB4AAAAAAAAABAAAAAAAAAAAAAAABQAAAAIAAAAFAAAADwAAAAEAAAAIAAAAAAAAAAUAAAAFAAAAHwAAAAEAAAAWAAAAAAAAABAAAAAAAAAAAgAAAAAAAAAGAAAAAAAAAA4AAAAAAAAACgAAAAAAAAALAAAAAAAAABEAAAADAAAAGAAAAAEAAAAXAAAAAwAAABkAAAADAAAAAAAAAAAAAAABAAAABQAAAAkAAAAFAAAABQAAAAAAAAACAAAAAAAAAAYAAAAAAAAAEgAAAAEAAAAKAAAAAAAAAAsAAAAAAAAABAAAAAEAAAADAAAABQAAAAcAAAAFAAAACAAAAAEAAAAAAAAAAAAAAAEAAAAFAAAAEAAAAAEAAAAFAAAAAAAAAAIAAAAAAAAABwAAAAAAAAAVAAAAAAAAACYAAAAAAAAACQAAAAAAAAATAAAAAAAAACIAAAADAAAADgAAAAEAAAAUAAAAAwAAACQAAAADAAAAAwAAAAAAAAANAAAABQAAAB0AAAAFAAAAAQAAAAAAAAAHAAAAAAAAABUAAAAAAAAABgAAAAEAAAAJAAAAAAAAABMAAAAAAAAABAAAAAIAAAAMAAAABQAAABoAAAAFAAAAAAAAAAEAAAADAAAAAAAAAA0AAAAFAAAAAgAAAAEAAAABAAAAAAAAAAcAAAAAAAAAGgAAAAAAAAAqAAAAAAAAADoAAAAAAAAAHQAAAAAAAAArAAAAAAAAAD4AAAADAAAAJgAAAAEAAAAvAAAAAwAAAEAAAAADAAAADAAAAAAAAAAcAAAABQAAACwAAAAFAAAADQAAAAAAAAAaAAAAAAAAACoAAAAAAAAAFQAAAAEAAAAdAAAAAAAAACsAAAAAAAAABAAAAAMAAAAPAAAABQAAAB8AAAAFAAAAAwAAAAEAAAAMAAAAAAAAABwAAAAFAAAABwAAAAEAAAANAAAAAAAAABoAAAAAAAAAHwAAAAAAAAApAAAAAAAAADEAAAAAAAAALAAAAAAAAAA1AAAAAAAAAD0AAAADAAAAOgAAAAEAAABBAAAAAwAAAEsAAAADAAAADwAAAAAAAAAWAAAABQAAACEAAAAFAAAAHAAAAAAAAAAfAAAAAAAAACkAAAAAAAAAKgAAAAEAAAAsAAAAAAAAADUAAAAAAAAABAAAAAQAAAAIAAAABQAAABAAAAAFAAAADAAAAAEAAAAPAAAAAAAAABYAAAAFAAAAGgAAAAEAAAAcAAAAAAAAAB8AAAAAAAAAMgAAAAAAAAAwAAAAAAAAADEAAAADAAAAIAAAAAAAAAAeAAAAAwAAACEAAAADAAAAGAAAAAMAAAASAAAAAwAAABAAAAADAAAARgAAAAAAAABDAAAAAAAAAEIAAAADAAAANAAAAAMAAAAyAAAAAAAAADAAAAAAAAAAJQAAAAMAAAAgAAAAAAAAAB4AAAADAAAAUwAAAAAAAABXAAAAAwAAAFUAAAADAAAASgAAAAMAAABGAAAAAAAAAEMAAAAAAAAAOQAAAAEAAAA0AAAAAwAAADIAAAAAAAAAGQAAAAAAAAAXAAAAAAAAABgAAAADAAAAEQAAAAAAAAALAAAAAwAAAAoAAAADAAAADgAAAAMAAAAGAAAAAwAAAAIAAAADAAAALQAAAAAAAAAnAAAAAAAAACUAAAADAAAAIwAAAAMAAAAZAAAAAAAAABcAAAAAAAAAGwAAAAMAAAARAAAAAAAAAAsAAAADAAAAPwAAAAAAAAA7AAAAAwAAADkAAAADAAAAOAAAAAMAAAAtAAAAAAAAACcAAAAAAAAALgAAAAMAAAAjAAAAAwAAABkAAAAAAAAAJAAAAAAAAAAUAAAAAAAAAA4AAAADAAAAIgAAAAAAAAATAAAAAwAAAAkAAAADAAAAJgAAAAMAAAAVAAAAAwAAAAcAAAADAAAANwAAAAAAAAAoAAAAAAAAABsAAAADAAAANgAAAAMAAAAkAAAAAAAAABQAAAAAAAAAMwAAAAMAAAAiAAAAAAAAABMAAAADAAAASAAAAAAAAAA8AAAAAwAAAC4AAAADAAAASQAAAAMAAAA3AAAAAAAAACgAAAAAAAAARwAAAAMAAAA2AAAAAwAAACQAAAAAAAAAQAAAAAAAAAAvAAAAAAAAACYAAAADAAAAPgAAAAAAAAArAAAAAwAAAB0AAAADAAAAOgAAAAMAAAAqAAAAAwAAABoAAAADAAAAVAAAAAAAAABFAAAAAAAAADMAAAADAAAAUgAAAAMAAABAAAAAAAAAAC8AAAAAAAAATAAAAAMAAAA+AAAAAAAAACsAAAADAAAAYQAAAAAAAABZAAAAAwAAAEcAAAADAAAAYgAAAAMAAABUAAAAAAAAAEUAAAAAAAAAYAAAAAMAAABSAAAAAwAAAEAAAAAAAAAASwAAAAAAAABBAAAAAAAAADoAAAADAAAAPQAAAAAAAAA1AAAAAwAAACwAAAADAAAAMQAAAAMAAAApAAAAAwAAAB8AAAADAAAAXgAAAAAAAABWAAAAAAAAAEwAAAADAAAAUQAAAAMAAABLAAAAAAAAAEEAAAAAAAAAQgAAAAMAAAA9AAAAAAAAADUAAAADAAAAawAAAAAAAABoAAAAAwAAAGAAAAADAAAAZQAAAAMAAABeAAAAAAAAAFYAAAAAAAAAVQAAAAMAAABRAAAAAwAAAEsAAAAAAAAAOQAAAAAAAAA7AAAAAAAAAD8AAAADAAAASgAAAAAAAABOAAAAAwAAAE8AAAADAAAAUwAAAAMAAABcAAAAAwAAAF8AAAADAAAAJQAAAAAAAAAnAAAAAwAAAC0AAAADAAAANAAAAAAAAAA5AAAAAAAAADsAAAAAAAAARgAAAAMAAABKAAAAAAAAAE4AAAADAAAAGAAAAAAAAAAXAAAAAwAAABkAAAADAAAAIAAAAAMAAAAlAAAAAAAAACcAAAADAAAAMgAAAAMAAAA0AAAAAAAAADkAAAAAAAAALgAAAAAAAAA8AAAAAAAAAEgAAAADAAAAOAAAAAAAAABEAAAAAwAAAFAAAAADAAAAPwAAAAMAAABNAAAAAwAAAFoAAAADAAAAGwAAAAAAAAAoAAAAAwAAADcAAAADAAAAIwAAAAAAAAAuAAAAAAAAADwAAAAAAAAALQAAAAMAAAA4AAAAAAAAAEQAAAADAAAADgAAAAAAAAAUAAAAAwAAACQAAAADAAAAEQAAAAMAAAAbAAAAAAAAACgAAAADAAAAGQAAAAMAAAAjAAAAAAAAAC4AAAAAAAAARwAAAAAAAABZAAAAAAAAAGEAAAADAAAASQAAAAAAAABbAAAAAwAAAGcAAAADAAAASAAAAAMAAABYAAAAAwAAAGkAAAADAAAAMwAAAAAAAABFAAAAAwAAAFQAAAADAAAANgAAAAAAAABHAAAAAAAAAFkAAAAAAAAANwAAAAMAAABJAAAAAAAAAFsAAAADAAAAJgAAAAAAAAAvAAAAAwAAAEAAAAADAAAAIgAAAAMAAAAzAAAAAAAAAEUAAAADAAAAJAAAAAMAAAA2AAAAAAAAAEcAAAAAAAAAYAAAAAAAAABoAAAAAAAAAGsAAAADAAAAYgAAAAAAAABuAAAAAwAAAHMAAAADAAAAYQAAAAMAAABvAAAAAwAAAHcAAAADAAAATAAAAAAAAABWAAAAAwAAAF4AAAADAAAAUgAAAAAAAABgAAAAAAAAAGgAAAAAAAAAVAAAAAMAAABiAAAAAAAAAG4AAAADAAAAOgAAAAAAAABBAAAAAwAAAEsAAAADAAAAPgAAAAMAAABMAAAAAAAAAFYAAAADAAAAQAAAAAMAAABSAAAAAAAAAGAAAAAAAAAAVQAAAAAAAABXAAAAAAAAAFMAAAADAAAAZQAAAAAAAABmAAAAAwAAAGQAAAADAAAAawAAAAMAAABwAAAAAwAAAHIAAAADAAAAQgAAAAAAAABDAAAAAwAAAEYAAAADAAAAUQAAAAAAAABVAAAAAAAAAFcAAAAAAAAAXgAAAAMAAABlAAAAAAAAAGYAAAADAAAAMQAAAAAAAAAwAAAAAwAAADIAAAADAAAAPQAAAAMAAABCAAAAAAAAAEMAAAADAAAASwAAAAMAAABRAAAAAAAAAFUAAAAAAAAAXwAAAAAAAABcAAAAAAAAAFMAAAAAAAAATwAAAAAAAABOAAAAAAAAAEoAAAADAAAAPwAAAAEAAAA7AAAAAwAAADkAAAADAAAAbQAAAAAAAABsAAAAAAAAAGQAAAAFAAAAXQAAAAEAAABfAAAAAAAAAFwAAAAAAAAATQAAAAEAAABPAAAAAAAAAE4AAAAAAAAAdQAAAAQAAAB2AAAABQAAAHIAAAAFAAAAagAAAAEAAABtAAAAAAAAAGwAAAAAAAAAWgAAAAEAAABdAAAAAQAAAF8AAAAAAAAAWgAAAAAAAABNAAAAAAAAAD8AAAAAAAAAUAAAAAAAAABEAAAAAAAAADgAAAADAAAASAAAAAEAAAA8AAAAAwAAAC4AAAADAAAAagAAAAAAAABdAAAAAAAAAE8AAAAFAAAAYwAAAAEAAABaAAAAAAAAAE0AAAAAAAAAWAAAAAEAAABQAAAAAAAAAEQAAAAAAAAAdQAAAAMAAABtAAAABQAAAF8AAAAFAAAAcQAAAAEAAABqAAAAAAAAAF0AAAAAAAAAaQAAAAEAAABjAAAAAQAAAFoAAAAAAAAAaQAAAAAAAABYAAAAAAAAAEgAAAAAAAAAZwAAAAAAAABbAAAAAAAAAEkAAAADAAAAYQAAAAEAAABZAAAAAwAAAEcAAAADAAAAcQAAAAAAAABjAAAAAAAAAFAAAAAFAAAAdAAAAAEAAABpAAAAAAAAAFgAAAAAAAAAbwAAAAEAAABnAAAAAAAAAFsAAAAAAAAAdQAAAAIAAABqAAAABQAAAFoAAAAFAAAAeQAAAAEAAABxAAAAAAAAAGMAAAAAAAAAdwAAAAEAAAB0AAAAAQAAAGkAAAAAAAAAdwAAAAAAAABvAAAAAAAAAGEAAAAAAAAAcwAAAAAAAABuAAAAAAAAAGIAAAADAAAAawAAAAEAAABoAAAAAwAAAGAAAAADAAAAeQAAAAAAAAB0AAAAAAAAAGcAAAAFAAAAeAAAAAEAAAB3AAAAAAAAAG8AAAAAAAAAcAAAAAEAAABzAAAAAAAAAG4AAAAAAAAAdQAAAAEAAABxAAAABQAAAGkAAAAFAAAAdgAAAAEAAAB5AAAAAAAAAHQAAAAAAAAAcgAAAAEAAAB4AAAAAQAAAHcAAAAAAAAAcgAAAAAAAABwAAAAAAAAAGsAAAAAAAAAZAAAAAAAAABmAAAAAAAAAGUAAAADAAAAUwAAAAEAAABXAAAAAwAAAFUAAAADAAAAdgAAAAAAAAB4AAAAAAAAAHMAAAAFAAAAbAAAAAEAAAByAAAAAAAAAHAAAAAAAAAAXAAAAAEAAABkAAAAAAAAAGYAAAAAAAAAdQAAAAAAAAB5AAAABQAAAHcAAAAFAAAAbQAAAAEAAAB2AAAAAAAAAHgAAAAAAAAAXwAAAAEAAABsAAAAAQAAAHIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAGAAAAAgAAAAUAAAABAAAABAAAAAAAAAAAAAAABQAAAAMAAAABAAAABgAAAAQAAAACAAAAAAAAAH6iBfbytuk/Gq6akm/58z/Xrm0Liez0P5doSdOpSwRAWs602ULg8D/dT7Rcbo/1v1N1RQHFNOM/g9Snx7HW3L8HWsP8Q3jfP6VwOLosutk/9rjk1YQcxj+gnmKMsNn6P/HDeuPFY+M/YHwDjqKhB0Ci19/fCVrbP4UxKkDWOP6/pvljWa09tL9wi7wrQXjnv/Z6yLImkM2/3yTlOzY14D+m+WNZrT20PzwKVQnrQwNA9nrIsiaQzT/g40rFrRQFwPa45NWEHMa/kbslHEZq97/xw3rjxWPjv4cLC2SMBci/otff3wla27+rKF5oIAv0P1N1RQHFNOO/iDJPGyWHBUAHWsP8Q3jfvwQf/by16gXAfqIF9vK26b8XrO0Vh0r+v9eubQuJ7PS/BxLrA0ZZ479azrTZQuDwv1MK1EuItPw/yscgV9Z6FkAwHBR2WjQMQJNRzXsQ5vY/GlUHVJYKF0DONuFv2lMNQNCGZ28QJfk/0WUwoIL36D8ggDOMQuATQNqMOeAy/wZAWFYOYM+M2z/LWC4uH3oSQDE+LyTsMgRAkJzhRGWFGEDd4soovCQQQKqk0DJMEP8/rGmNdwOLBUAW2X/9xCbjP4hu3dcqJhNAzuYItRvdB0CgzW3zJW/sPxotm/Y2TxRAQAk9XmdDDEC1Kx9MKgT3P1M+NctcghZAFVqcLlb0C0Bgzd3sB2b2P77mZDPUWhZAFROHJpUGCEDAfma5CxXtPz1DWq/zYxRAmhYY5824F0DOuQKWSbAOQNCMqrvu3fs/L6DR22K2wT9nAAxPBU8RQGiN6mW43AFAZhu25b633D8c1YgmzowSQNM25BRKWARArGS08/lNxD+LFssHwmMRQLC5aNcxBgJABL9HT0WRF0CjCmJmOGEOQHsuaVzMP/s/TWJCaGGwBUCeu1PAPLzjP9nqN9DZOBNAKE4JcydbCkCGtbd1qjPzP8dgm9U8jhVAtPeKTkVwDkCeCLss5l37P401XMPLmBdAFd29VMVQDUBg0yA55h75Pz6odcYLCRdApBM4rBrkAkDyAVWgQxbRP4XDMnK20hFAymLlF7EmzD8GUgo9XBHlP3lbK7T9COc/k+OhPthhy7+YGEpnrOvCPzBFhLs15u4/epbqB6H4uz9IuuLF5svev6lzLKY31es/CaQ0envF5z8ZY0xlUADXv7zaz7HYEuI/CfbK1sn16T8uAQfWwxLWPzKn/YuFN94/5KdbC1AFu793fyCSnlfvPzK2y4doAMY/NRg5t1/X6b/shq4QJaHDP5yNIAKPOeI/vpn7BSE30r/X4YQrO6nrv78Ziv/Thto/DqJ1Y6+y5z9l51NaxFrlv8QlA65HOLS/86dxiEc96z+Hj0+LFjneP6LzBZ8LTc2/DaJ1Y6+y579l51NaxFrlP8QlA65HOLQ/8qdxiEc967+Jj0+LFjnev6LzBZ8LTc0/1qdbC1AFuz93fyCSnlfvvzK2y4doAMa/NRg5t1/X6T/vhq4QJaHDv5yNIAKPOeK/wJn7BSE30j/W4YQrO6nrP78Ziv/Thtq/CaQ0envF578XY0xlUADXP7zaz7HYEuK/CvbK1sn16b8rAQfWwxLWvzKn/YuFN96/zWLlF7EmzL8GUgo9XBHlv3lbK7T9COe/kOOhPthhyz+cGEpnrOvCvzBFhLs15u6/c5bqB6H4u79IuuLF5sveP6lzLKY31eu/AQAAAP////8HAAAA/////zEAAAD/////VwEAAP////9hCQAA/////6dBAAD/////kcsBAP/////3kAwA/////8H2VwAAAAAAAAAAAAAAAAACAAAA/////w4AAAD/////YgAAAP////+uAgAA/////8ISAAD/////ToMAAP////8ilwMA/////+4hGQD/////gu2vAAAAAAAAAAAAAAAAAAAAAAACAAAA//////////8BAAAAAwAAAP//////////////////////////////////////////////////////////////////////////AQAAAAAAAAACAAAA////////////////AwAAAP//////////////////////////////////////////////////////////////////////////AQAAAAAAAAACAAAA////////////////AwAAAP//////////////////////////////////////////////////////////////////////////AQAAAAAAAAACAAAA////////////////AwAAAP//////////////////////////////////////////////////////////AgAAAP//////////AQAAAAAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD/////////////////////AQAAAP///////////////wIAAAD///////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP///////////////////////////////wIAAAD///////////////8BAAAA/////////////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAABAAAA//////////8CAAAA//////////////////////////////////////////////////////////8DAAAA////////////////AgAAAAAAAAABAAAA//////////////////////////////////////////////////////////////////////////8DAAAA////////////////AgAAAAAAAAABAAAA//////////////////////////////////////////////////////////////////////////8DAAAA////////////////AgAAAAAAAAABAAAA//////////////////////////////////////////////////////////////////////////8DAAAAAQAAAP//////////AgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAACAAAAAAAAAAIAAAABAAAAAQAAAAIAAAACAAAAAAAAAAUAAAAFAAAAAAAAAAIAAAACAAAAAwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAgAAAAEAAAACAAAAAgAAAAIAAAAAAAAABQAAAAYAAAAAAAAAAgAAAAIAAAADAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAgAAAAAAAAACAAAAAQAAAAMAAAACAAAAAgAAAAAAAAAFAAAABwAAAAAAAAACAAAAAgAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAACAAAAAAAAAAIAAAABAAAABAAAAAIAAAACAAAAAAAAAAUAAAAIAAAAAAAAAAIAAAACAAAAAwAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAIAAAAAAAAAAgAAAAEAAAAAAAAAAgAAAAIAAAAAAAAABQAAAAkAAAAAAAAAAgAAAAIAAAADAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAgAAAAIAAAAAAAAAAwAAAA4AAAACAAAAAAAAAAIAAAADAAAAAAAAAAAAAAACAAAAAgAAAAMAAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAACAAAAAgAAAAAAAAADAAAACgAAAAIAAAAAAAAAAgAAAAMAAAABAAAAAAAAAAIAAAACAAAAAwAAAAcAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAIAAAACAAAAAAAAAAMAAAALAAAAAgAAAAAAAAACAAAAAwAAAAIAAAAAAAAAAgAAAAIAAAADAAAACAAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAgAAAAIAAAAAAAAAAwAAAAwAAAACAAAAAAAAAAIAAAADAAAAAwAAAAAAAAACAAAAAgAAAAMAAAAJAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAACAAAAAgAAAAAAAAADAAAADQAAAAIAAAAAAAAAAgAAAAMAAAAEAAAAAAAAAAIAAAACAAAAAwAAAAoAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAIAAAACAAAAAAAAAAMAAAAGAAAAAgAAAAAAAAACAAAAAwAAAA8AAAAAAAAAAgAAAAIAAAADAAAACwAAAAAAAAAAAAAAAAAAAAAAAAAGAAAAAgAAAAIAAAAAAAAAAwAAAAcAAAACAAAAAAAAAAIAAAADAAAAEAAAAAAAAAACAAAAAgAAAAMAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAACAAAAAgAAAAAAAAADAAAACAAAAAIAAAAAAAAAAgAAAAMAAAARAAAAAAAAAAIAAAACAAAAAwAAAA0AAAAAAAAAAAAAAAAAAAAAAAAACAAAAAIAAAACAAAAAAAAAAMAAAAJAAAAAgAAAAAAAAACAAAAAwAAABIAAAAAAAAAAgAAAAIAAAADAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAJAAAAAgAAAAIAAAAAAAAAAwAAAAUAAAACAAAAAAAAAAIAAAADAAAAEwAAAAAAAAACAAAAAgAAAAMAAAAPAAAAAAAAAAAAAAAAAAAAAAAAABAAAAACAAAAAAAAAAIAAAABAAAAEwAAAAIAAAACAAAAAAAAAAUAAAAKAAAAAAAAAAIAAAACAAAAAwAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEQAAAAIAAAAAAAAAAgAAAAEAAAAPAAAAAgAAAAIAAAAAAAAABQAAAAsAAAAAAAAAAgAAAAIAAAADAAAAEQAAAAAAAAAAAAAAAAAAAAAAAAASAAAAAgAAAAAAAAACAAAAAQAAABAAAAACAAAAAgAAAAAAAAAFAAAADAAAAAAAAAACAAAAAgAAAAMAAAASAAAAAAAAAAAAAAAAAAAAAAAAABMAAAACAAAAAAAAAAIAAAABAAAAEQAAAAIAAAACAAAAAAAAAAUAAAANAAAAAAAAAAIAAAACAAAAAwAAABMAAAAAAAAAAAAAAAAAAAAAAAAADwAAAAIAAAAAAAAAAgAAAAEAAAASAAAAAgAAAAIAAAAAAAAABQAAAA4AAAAAAAAAAgAAAAIAAAADAAAAAgAAAAEAAAAAAAAAAQAAAAIAAAAAAAAAAAAAAAIAAAABAAAAAAAAAAEAAAACAAAAAQAAAAAAAAACAAAAAAAAAAUAAAAEAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAFAAAABAAAAAAAAAABAAAABQAAAAQAAAAAAAAABQAAAAAAAAACAAAAAQAAAAAAAAABAAAAAgAAAAAAAAAAAAAAAgAAAAEAAAAAAAAAAQAAAAIAAAABAAAAAAAAAAIAAAACAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAAEAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAFAAAABAAAAAAAAAABAAAABQAAAAQAAAAAAAAABQAAAAUAAAAAAAAAAQAAAAAAAAAAAAAAOgehWlKfUEEz1zLi+JsiQa2og3wcMfVAWCbHorc0yEDi+Yn/Y6mbQJ11/mfsnG9At6bnG4UQQkBvMCQWKqUUQJVmwwswmOc/3hVgVBL3uj//qqOEOdGOPw/WDN4gnGE/H3ANkCUgND+AA8btKgAHPwTXBqJVSdo+XfRQAqsKrj4fc+zLYbSPQklEmCZHv2FCUP+uDso1NEKYtPhwphUHQptxnyFXYdpB7CddZAMmrkGAt1AxSTqBQUibBVdTsFNBSuX3MV+AJkFocv82SLf5QAqmgj7AY81A23VDSEnLoEDGEJVSeDFzQDYrqvBk70VA8U157pcRGUBWfEF+ZKbsP7KBdLHZTpFAqKYk69AqekDbeGY41MdjQD8AZzHK501A1vcrrjubNkD5LnquvBYhQCbiRRD71QlAqt72EbOH8z8Eu+jL1YbdP4uaox/xUcY/abedg1XfsD+BsUdzJ4KZP5wE9YFySIM/rW1kAKMpbT+rZFthVRhWPy4PKlXIs0A/qMZLlwDnMEHByqEF0I0ZQQYSFD8lUQNBPpY+dFs07UAH8BZImBPWQN9RY0I0sMBA2T7kLfc6qUByFYvfhBKTQMq+0Mis1XxA0XQbeQXMZUBJJ5aEGXpQQP7/SY0a6ThAaMD92b/UIkAs8s8yqXoMQNIegOvCk/U/aOi7NZJP4D8AAAAA/////wAAAAAAAAAAAAAAAAAAAAAAAAAA/////////////////////////////////////wAAAAD/////AAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAA/////wAAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAP////8AAAAABQAAAAAAAAAAAAAAAAAAAAAAAAD/////BQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAA/////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP////////////////////////////////////8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/////////////////////////////////////AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAABQAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/////////////////////////////////////wAAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAQAAAAAAAAABAAAAAAAAAAUAAAABAAAAAQAAAAAAAAAAAAAAAQAAAAEAAAAAAAAAAQAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAEAAQAAAQEAAAAAAAEAAAABAAAAAQABAAAAAAAAAAAAAAAAAAAAAAcAAAAHAAAAAQAAAAIAAAAEAAAAAwAAAAAAAAAAAAAABwAAAAMAAAABAAAAAgAAAAUAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAAAAAACAAAAAQAAAAMAAAAOAAAABgAAAAsAAAACAAAABwAAAAEAAAAYAAAABQAAAAoAAAABAAAABgAAAAAAAAAmAAAABwAAAAwAAAADAAAACAAAAAIAAAAxAAAACQAAAA4AAAAAAAAABQAAAAQAAAA6AAAACAAAAA0AAAAEAAAACQAAAAMAAAA/AAAACwAAAAYAAAAPAAAACgAAABAAAABIAAAADAAAAAcAAAAQAAAACwAAABEAAABTAAAACgAAAAUAAAATAAAADgAAAA8AAABhAAAADQAAAAgAAAARAAAADAAAABIAAABrAAAADgAAAAkAAAASAAAADQAAABMAAAB1AAAADwAAABMAAAARAAAAEgAAABAAAAAGAAAAAgAAAAMAAAAFAAAABAAAAAAAAAAAAAAAAAAAAAYAAAACAAAAAwAAAAEAAAAFAAAABAAAAAAAAAAAAAAABwAAAAUAAAADAAAABAAAAAEAAAAAAAAAAgAAAAAAAAACAAAAAwAAAAEAAAAFAAAABAAAAAYAAAAAAAAAAAAAAGFsZ29zLmMAaDNOZWlnaGJvclJvdGF0aW9ucwBjb29yZGlqay5jAF91cEFwN0NoZWNrZWQAX3VwQXA3ckNoZWNrZWQAZGlyZWN0ZWRFZGdlLmMAZGlyZWN0ZWRFZGdlVG9Cb3VuZGFyeQBhZGphY2VudEZhY2VEaXJbdG1wRmlqay5mYWNlXVtmaWprLmZhY2VdID09IEtJAGZhY2VpamsuYwBfZmFjZUlqa1BlbnRUb0NlbGxCb3VuZGFyeQBhZGphY2VudEZhY2VEaXJbY2VudGVySUpLLmZhY2VdW2ZhY2UyXSA9PSBLSQBfZmFjZUlqa1RvQ2VsbEJvdW5kYXJ5AGgzSW5kZXguYwBjb21wYWN0Q2VsbHMAbGF0TG5nVG9DZWxsAGNlbGxUb0NoaWxkUG9zAHZhbGlkYXRlQ2hpbGRQb3MAbGF0TG5nLmMAY2VsbEFyZWFSYWRzMgBwb2x5Z29uLT5uZXh0ID09IE5VTEwAbGlua2VkR2VvLmMAYWRkTmV3TGlua2VkUG9seWdvbgBuZXh0ICE9IE5VTEwAbG9vcCAhPSBOVUxMAGFkZE5ld0xpbmtlZExvb3AAcG9seWdvbi0+Zmlyc3QgPT0gTlVMTABhZGRMaW5rZWRMb29wAGNvb3JkICE9IE5VTEwAYWRkTGlua2VkQ29vcmQAbG9vcC0+Zmlyc3QgPT0gTlVMTABpbm5lckxvb3BzICE9IE5VTEwAbm9ybWFsaXplTXVsdGlQb2x5Z29uAGJib3hlcyAhPSBOVUxMAGNhbmRpZGF0ZXMgIT0gTlVMTABmaW5kUG9seWdvbkZvckhvbGUAY2FuZGlkYXRlQkJveGVzICE9IE5VTEwAcmV2RGlyICE9IElOVkFMSURfRElHSVQAbG9jYWxpai5jAGNlbGxUb0xvY2FsSWprAGJhc2VDZWxsICE9IG9yaWdpbkJhc2VDZWxsACEob3JpZ2luT25QZW50ICYmIGluZGV4T25QZW50KQBiYXNlQ2VsbCA9PSBvcmlnaW5CYXNlQ2VsbABiYXNlQ2VsbCAhPSBJTlZBTElEX0JBU0VfQ0VMTABsb2NhbElqa1RvQ2VsbAAhX2lzQmFzZUNlbGxQZW50YWdvbihiYXNlQ2VsbCkAYmFzZUNlbGxSb3RhdGlvbnMgPj0gMABncmlkUGF0aENlbGxzADAAdmVydGV4LmMAY2VsbFRvVmVydGV4AGdyYXBoLT5idWNrZXRzICE9IE5VTEwAdmVydGV4R3JhcGguYwBpbml0VmVydGV4R3JhcGgAbm9kZSAhPSBOVUxMAGFkZFZlcnRleE5vZGU=";var So=24144;function cA(se){return se}function FA(se){var _e=/\b__Z[\w\d_]+/g;return se.replace(_e,function(We){var dt=We;return We===dt?We:dt+" ["+We+"]"})}function is(){var se=new Error;if(!se.stack){try{throw new Error(0)}catch(_e){se=_e}if(!se.stack)return"(no stack trace available)"}return se.stack.toString()}function rs(){var se=is();return n.extraStackTrace&&(se+=`
`+n.extraStackTrace()),FA(se)}function Es(se,_e,We,dt){yt("Assertion failed: "+xt(se)+", at: "+[_e?xt(_e):"unknown filename",We,dt?xt(dt):"unknown function"])}function Nt(){return bt.length}function bA(se,_e,We){kt.set(kt.subarray(_e,_e+We),se)}function Wi(se){return n.___errno_location&&(at[n.___errno_location()>>2]=se),se}function Ms(se){yt("OOM")}function hA(se){try{var _e=new ArrayBuffer(se);return _e.byteLength!=se?void 0:(new Int8Array(_e).set(bt),ze(_e),Ot(_e),1)}catch{}}function Ut(se){var _e=Nt(),We=16777216,dt=2147483648-We;if(se>dt)return!1;for(var t=16777216,K=Math.max(_e,t);K<se;)K<=536870912?K=Zt(2*K,We):K=Math.min(Zt((3*K+2147483648)/4,We),dt);var St=hA(K);return!!St}var Zn=typeof atob=="function"?atob:function(se){var _e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",We="",dt,t,K,St,Qt,en,Pt,Ht=0;se=se.replace(/[^A-Za-z0-9\+\/\=]/g,"");do St=_e.indexOf(se.charAt(Ht++)),Qt=_e.indexOf(se.charAt(Ht++)),en=_e.indexOf(se.charAt(Ht++)),Pt=_e.indexOf(se.charAt(Ht++)),dt=St<<2|Qt>>4,t=(Qt&15)<<4|en>>2,K=(en&3)<<6|Pt,We=We+String.fromCharCode(dt),en!==64&&(We=We+String.fromCharCode(t)),Pt!==64&&(We=We+String.fromCharCode(K));while(Ht<se.length);return We};function zn(se){try{for(var _e=Zn(se),We=new Uint8Array(_e.length),dt=0;dt<_e.length;++dt)We[dt]=_e.charCodeAt(dt);return We}catch{throw new Error("Converting base64 string to bytes failed.")}}function br(se){if(pi(se))return zn(se.slice(_r.length))}var OA={Math,Int8Array,Int32Array,Uint8Array,Float32Array,Float64Array},On={a:yt,b:j,c:W,d:Es,e:Wi,f:Nt,g:bA,h:Ut,i:Ms,j:cA,k:FA,l:hA,m:is,n:rs,o:So,p:_n},st=function(se,_e,We){"almost asm";var dt=new se.Int8Array(We),t=new se.Int32Array(We);new se.Uint8Array(We),new se.Float32Array(We);var K=new se.Float64Array(We),St=_e.o|0,Qt=_e.p|0,en=se.Math.floor,Pt=se.Math.abs,Ht=se.Math.sqrt,Bn=se.Math.pow,$t=se.Math.cos,sn=se.Math.sin,oi=se.Math.tan,Dr=se.Math.acos,so=se.Math.asin,kr=se.Math.atan,yr=se.Math.atan2,oA=se.Math.ceil,ti=se.Math.imul,kA=se.Math.min,Ln=se.Math.max,He=se.Math.clz32,Xt=_e.b,Te=_e.c,kn=_e.d,Er=_e.e,ca=_e.f,oo=_e.g,Be=_e.h,mi=_e.i,ye=24160;function Zi(A){return dt=new Int8Array(A),t=new Int32Array(A),K=new Float64Array(A),We=A,!0}function ha(A){A=A|0;var s=0;return s=ye,ye=ye+A|0,ye=ye+15&-16,s|0}function EA(){return ye|0}function za(A){A=A|0,ye=A}function As(A,s){A=A|0,ye=A}function La(A,s){A=A|0,s=s|0;var l=0,f=0,m=0;return(A|0)<0?(s=2,s|0):(A|0)>13780509?(s=qa(15,s)|0,s|0):(l=((A|0)<0)<<31>>31,m=te(A|0,l|0,3,0)|0,f=Te()|0,l=v(A|0,l|0,1,0)|0,l=te(m|0,f|0,l|0,Te()|0)|0,l=v(l|0,Te()|0,1,0)|0,A=Te()|0,t[s>>2]=l,t[s+4>>2]=A,s=0,s|0)}function Co(A,s,l,f){return A=A|0,s=s|0,l=l|0,f=f|0,Yr(A,s,l,f,0)|0}function Yr(A,s,l,f,m){A=A|0,s=s|0,l=l|0,f=f|0,m=m|0;var k=0,I=0,D=0,Q=0,Z=0;if(Q=ye,ye=ye+16|0,I=Q,!(Hi(A,s,l,f,m)|0))return f=0,ye=Q,f|0;do if((l|0)>=0){if((l|0)>13780509){if(k=qa(15,I)|0,k|0)break;D=I,I=t[D>>2]|0,D=t[D+4>>2]|0}else k=((l|0)<0)<<31>>31,Z=te(l|0,k|0,3,0)|0,D=Te()|0,k=v(l|0,k|0,1,0)|0,k=te(Z|0,D|0,k|0,Te()|0)|0,k=v(k|0,Te()|0,1,0)|0,D=Te()|0,t[I>>2]=k,t[I+4>>2]=D,I=k;if(E(f|0,0,I<<3|0)|0,m|0){E(m|0,0,I<<2|0)|0,k=Pr(A,s,l,f,m,I,D,0)|0;break}k=y(I,4)|0,k?(Z=Pr(A,s,l,f,k,I,D,0)|0,p(k),k=Z):k=13}else k=2;while(!1);return Z=k,ye=Q,Z|0}function Hi(A,s,l,f,m){A=A|0,s=s|0,l=l|0,f=f|0,m=m|0;var k=0,I=0,D=0,Q=0,Z=0,X=0,ie=0,Ae=0,ce=0,fe=0,ve=0;if(ve=ye,ye=ye+16|0,ce=ve,fe=ve+8|0,Ae=ce,t[Ae>>2]=A,t[Ae+4>>2]=s,(l|0)<0)return fe=2,ye=ve,fe|0;if(k=f,t[k>>2]=A,t[k+4>>2]=s,k=(m|0)!=0,k&&(t[m>>2]=0),Si(A,s)|0)return fe=9,ye=ve,fe|0;t[fe>>2]=0;e:do if((l|0)>=1)if(k)for(X=1,Z=0,ie=0,Ae=1,k=A;;){if(!(Z|ie)){if(k=Yi(k,s,4,fe,ce)|0,k|0)break e;if(s=ce,k=t[s>>2]|0,s=t[s+4>>2]|0,Si(k,s)|0){k=9;break e}}if(k=Yi(k,s,t[22384+(ie<<2)>>2]|0,fe,ce)|0,k|0)break e;if(s=ce,k=t[s>>2]|0,s=t[s+4>>2]|0,A=f+(X<<3)|0,t[A>>2]=k,t[A+4>>2]=s,t[m+(X<<2)>>2]=Ae,A=Z+1|0,I=(A|0)==(Ae|0),D=ie+1|0,Q=(D|0)==6,Si(k,s)|0){k=9;break e}if(Ae=Ae+(Q&I&1)|0,(Ae|0)>(l|0)){k=0;break}else X=X+1|0,Z=I?0:A,ie=I?Q?0:D:ie}else for(X=1,Z=0,ie=0,Ae=1,k=A;;){if(!(Z|ie)){if(k=Yi(k,s,4,fe,ce)|0,k|0)break e;if(s=ce,k=t[s>>2]|0,s=t[s+4>>2]|0,Si(k,s)|0){k=9;break e}}if(k=Yi(k,s,t[22384+(ie<<2)>>2]|0,fe,ce)|0,k|0)break e;if(s=ce,k=t[s>>2]|0,s=t[s+4>>2]|0,A=f+(X<<3)|0,t[A>>2]=k,t[A+4>>2]=s,A=Z+1|0,I=(A|0)==(Ae|0),D=ie+1|0,Q=(D|0)==6,Si(k,s)|0){k=9;break e}if(Ae=Ae+(Q&I&1)|0,(Ae|0)>(l|0)){k=0;break}else X=X+1|0,Z=I?0:A,ie=I?Q?0:D:ie}else k=0;while(!1);return fe=k,ye=ve,fe|0}function Pr(A,s,l,f,m,k,I,D){A=A|0,s=s|0,l=l|0,f=f|0,m=m|0,k=k|0,I=I|0,D=D|0;var Q=0,Z=0,X=0,ie=0,Ae=0,ce=0,fe=0,ve=0,Ne=0,qe=0;if(ve=ye,ye=ye+16|0,ce=ve+8|0,fe=ve,Q=pe(A|0,s|0,k|0,I|0)|0,X=Te()|0,ie=f+(Q<<3)|0,Ne=ie,qe=t[Ne>>2]|0,Ne=t[Ne+4>>2]|0,Z=(qe|0)==(A|0)&(Ne|0)==(s|0),!((qe|0)==0&(Ne|0)==0|Z))do Q=v(Q|0,X|0,1,0)|0,Q=le(Q|0,Te()|0,k|0,I|0)|0,X=Te()|0,ie=f+(Q<<3)|0,qe=ie,Ne=t[qe>>2]|0,qe=t[qe+4>>2]|0,Z=(Ne|0)==(A|0)&(qe|0)==(s|0);while(!((Ne|0)==0&(qe|0)==0|Z));if(Q=m+(Q<<2)|0,Z&&(t[Q>>2]|0)<=(D|0)||(qe=ie,t[qe>>2]=A,t[qe+4>>2]=s,t[Q>>2]=D,(D|0)>=(l|0)))return qe=0,ye=ve,qe|0;switch(Z=D+1|0,t[ce>>2]=0,Q=Yi(A,s,2,ce,fe)|0,Q|0){case 9:{Ae=9;break}case 0:{Q=fe,Q=Pr(t[Q>>2]|0,t[Q+4>>2]|0,l,f,m,k,I,Z)|0,Q||(Ae=9);break}}e:do if((Ae|0)==9){switch(t[ce>>2]=0,Q=Yi(A,s,3,ce,fe)|0,Q|0){case 9:break;case 0:{if(Q=fe,Q=Pr(t[Q>>2]|0,t[Q+4>>2]|0,l,f,m,k,I,Z)|0,Q|0)break e;break}default:break e}switch(t[ce>>2]=0,Q=Yi(A,s,1,ce,fe)|0,Q|0){case 9:break;case 0:{if(Q=fe,Q=Pr(t[Q>>2]|0,t[Q+4>>2]|0,l,f,m,k,I,Z)|0,Q|0)break e;break}default:break e}switch(t[ce>>2]=0,Q=Yi(A,s,5,ce,fe)|0,Q|0){case 9:break;case 0:{if(Q=fe,Q=Pr(t[Q>>2]|0,t[Q+4>>2]|0,l,f,m,k,I,Z)|0,Q|0)break e;break}default:break e}switch(t[ce>>2]=0,Q=Yi(A,s,4,ce,fe)|0,Q|0){case 9:break;case 0:{if(Q=fe,Q=Pr(t[Q>>2]|0,t[Q+4>>2]|0,l,f,m,k,I,Z)|0,Q|0)break e;break}default:break e}switch(t[ce>>2]=0,Q=Yi(A,s,6,ce,fe)|0,Q|0){case 9:break;case 0:{if(Q=fe,Q=Pr(t[Q>>2]|0,t[Q+4>>2]|0,l,f,m,k,I,Z)|0,Q|0)break e;break}default:break e}return qe=0,ye=ve,qe|0}while(!1);return qe=Q,ye=ve,qe|0}function Yi(A,s,l,f,m){A=A|0,s=s|0,l=l|0,f=f|0,m=m|0;var k=0,I=0,D=0,Q=0,Z=0,X=0,ie=0,Ae=0,ce=0,fe=0;if(l>>>0>6)return m=1,m|0;if(ie=(t[f>>2]|0)%6|0,t[f>>2]=ie,(ie|0)>0){k=0;do l=as(l)|0,k=k+1|0;while((k|0)<(t[f>>2]|0))}if(ie=Ee(A|0,s|0,45)|0,Te()|0,X=ie&127,X>>>0>121)return m=5,m|0;Q=Jr(A,s)|0,k=Ee(A|0,s|0,52)|0,Te()|0,k=k&15;e:do if(!k)Z=8;else{for(;;){if(I=(15-k|0)*3|0,D=Ee(A|0,s|0,I|0)|0,Te()|0,D=D&7,(D|0)==7){s=5;break}if(fe=(Tr(k)|0)==0,k=k+-1|0,Ae=Se(7,0,I|0)|0,s=s&~(Te()|0),ce=Se(t[(fe?432:16)+(D*28|0)+(l<<2)>>2]|0,0,I|0)|0,I=Te()|0,l=t[(fe?640:224)+(D*28|0)+(l<<2)>>2]|0,A=ce|A&~Ae,s=I|s,!l){l=0;break e}if(!k){Z=8;break e}}return s|0}while(!1);(Z|0)==8&&(fe=t[848+(X*28|0)+(l<<2)>>2]|0,ce=Se(fe|0,0,45)|0,A=ce|A,s=Te()|0|s&-1040385,l=t[4272+(X*28|0)+(l<<2)>>2]|0,(fe&127|0)==127&&(fe=Se(t[848+(X*28|0)+20>>2]|0,0,45)|0,s=Te()|0|s&-1040385,l=t[4272+(X*28|0)+20>>2]|0,A=Bs(fe|A,s)|0,s=Te()|0,t[f>>2]=(t[f>>2]|0)+1)),D=Ee(A|0,s|0,45)|0,Te()|0,D=D&127;e:do if(Ri(D)|0){t:do if((Jr(A,s)|0)==1){if((X|0)!=(D|0))if(Io(D,t[7696+(X*28|0)>>2]|0)|0){A=Qa(A,s)|0,I=1,s=Te()|0;break}else kn(23313,22416,436,22424);switch(Q|0){case 3:{A=Bs(A,s)|0,s=Te()|0,t[f>>2]=(t[f>>2]|0)+1,I=0;break t}case 5:{A=Qa(A,s)|0,s=Te()|0,t[f>>2]=(t[f>>2]|0)+5,I=0;break t}case 0:return fe=9,fe|0;default:return fe=1,fe|0}}else I=0;while(!1);if((l|0)>0){k=0;do A=Oo(A,s)|0,s=Te()|0,k=k+1|0;while((k|0)!=(l|0))}if((X|0)!=(D|0)){if(!(Oa(D)|0)){if((I|0)!=0|(Jr(A,s)|0)!=5)break;t[f>>2]=(t[f>>2]|0)+1;break}switch(ie&127){case 8:case 118:break e}(Jr(A,s)|0)!=3&&(t[f>>2]=(t[f>>2]|0)+1)}}else if((l|0)>0){k=0;do A=Bs(A,s)|0,s=Te()|0,k=k+1|0;while((k|0)!=(l|0))}while(!1);return t[f>>2]=((t[f>>2]|0)+l|0)%6|0,fe=m,t[fe>>2]=A,t[fe+4>>2]=s,fe=0,fe|0}function Qs(A,s,l,f){A=A|0,s=s|0,l=l|0,f=f|0;var m=0,k=0,I=0,D=0,Q=0,Z=0;for(D=ye,ye=ye+16|0,k=D,I=D+8|0,m=(Si(A,s)|0)==0,m=m?1:2;;){if(t[I>>2]=0,Z=(Yi(A,s,m,I,k)|0)==0,Q=k,Z&((t[Q>>2]|0)==(l|0)?(t[Q+4>>2]|0)==(f|0):0)){A=4;break}if(m=m+1|0,m>>>0>=7){m=7,A=4;break}}return(A|0)==4?(ye=D,m|0):0}function rl(A,s,l,f){A=A|0,s=s|0,l=l|0,f=f|0;var m=0,k=0,I=0,D=0,Q=0,Z=0,X=0,ie=0,Ae=0,ce=0,fe=0;if(fe=ye,ye=ye+16|0,Ae=fe,ce=fe+8|0,ie=Ae,t[ie>>2]=A,t[ie+4>>2]=s,!l)return ce=f,t[ce>>2]=A,t[ce+4>>2]=s,ce=0,ye=fe,ce|0;t[ce>>2]=0;e:do if(Si(A,s)|0)A=9;else{if(k=(l|0)>0,k){m=0,ie=A;do{if(A=Yi(ie,s,4,ce,Ae)|0,A|0)break e;if(s=Ae,ie=t[s>>2]|0,s=t[s+4>>2]|0,m=m+1|0,Si(ie,s)|0){A=9;break e}}while((m|0)<(l|0));if(X=f,t[X>>2]=ie,t[X+4>>2]=s,X=l+-1|0,k){Z=0,A=1;do{if(m=22384+(Z<<2)|0,(Z|0)==5)for(I=t[m>>2]|0,k=0,m=A;;){if(A=Ae,A=Yi(t[A>>2]|0,t[A+4>>2]|0,I,ce,Ae)|0,A|0)break e;if((k|0)!=(X|0))if(Q=Ae,D=t[Q>>2]|0,Q=t[Q+4>>2]|0,A=f+(m<<3)|0,t[A>>2]=D,t[A+4>>2]=Q,!(Si(D,Q)|0))A=m+1|0;else{A=9;break e}else A=m;if(k=k+1|0,(k|0)>=(l|0))break;m=A}else for(I=Ae,Q=t[m>>2]|0,D=0,m=A,k=t[I>>2]|0,I=t[I+4>>2]|0;;){if(A=Yi(k,I,Q,ce,Ae)|0,A|0)break e;if(I=Ae,k=t[I>>2]|0,I=t[I+4>>2]|0,A=f+(m<<3)|0,t[A>>2]=k,t[A+4>>2]=I,A=m+1|0,Si(k,I)|0){A=9;break e}if(D=D+1|0,(D|0)>=(l|0))break;m=A}Z=Z+1|0}while(Z>>>0<6);A=Ae,I=ie,m=t[A>>2]|0,k=s,A=t[A+4>>2]|0}else I=ie,m=ie,k=s,A=s}else I=f,t[I>>2]=A,t[I+4>>2]=s,I=A,m=A,k=s,A=s;A=(I|0)==(m|0)&(k|0)==(A|0)?0:9}while(!1);return ce=A,ye=fe,ce|0}function Ol(A,s,l,f){A=A|0,s=s|0,l=l|0,f=f|0;var m=0,k=0,I=0,D=0,Q=0,Z=0;if(D=ye,ye=ye+48|0,m=D+16|0,k=D+8|0,I=D,l|0)return I=15,ye=D,I|0;if(Z=A,Q=t[Z+4>>2]|0,l=k,t[l>>2]=t[Z>>2],t[l+4>>2]=Q,$a(k,m),s=ga(m,s,I)|0,!s){if(l=t[k>>2]|0,k=t[A+8>>2]|0,(k|0)>0){m=t[A+12>>2]|0,s=0;do l=(t[m+(s<<3)>>2]|0)+l|0,s=s+1|0;while((s|0)<(k|0))}s=I,m=t[s>>2]|0,s=t[s+4>>2]|0,k=((l|0)<0)<<31>>31,(s|0)<(k|0)|(s|0)==(k|0)&m>>>0<l>>>0?(s=I,t[s>>2]=l,t[s+4>>2]=k,s=k):l=m,Q=v(l|0,s|0,12,0)|0,Z=Te()|0,s=I,t[s>>2]=Q,t[s+4>>2]=Z,s=f,t[s>>2]=Q,t[s+4>>2]=Z,s=0}return Z=s,ye=D,Z|0}function fa(A,s,l,f,m,k,I){A=A|0,s=s|0,l=l|0,f=f|0,m=m|0,k=k|0,I=I|0;var D=0,Q=0,Z=0,X=0,ie=0,Ae=0,ce=0,fe=0,ve=0,Ne=0,qe=0,Pe=0,Ve=0,Ue=0,Mt=0,ht=0,_t=0,gt=0,Mn=0,cn=0,Yt=0,tn=0,fn=0,an=0,Wn=0,bn=0,Nn=0,zi=0,bi=0;if(Wn=ye,ye=ye+64|0,Yt=Wn+48|0,tn=Wn+32|0,fn=Wn+24|0,Mt=Wn+8|0,ht=Wn,Q=t[A>>2]|0,(Q|0)<=0)return an=0,ye=Wn,an|0;for(_t=A+4|0,gt=Yt+8|0,Mn=tn+8|0,cn=Mt+8|0,D=0,Ve=0;;){Z=t[_t>>2]|0,Pe=Z+(Ve<<4)|0,t[Yt>>2]=t[Pe>>2],t[Yt+4>>2]=t[Pe+4>>2],t[Yt+8>>2]=t[Pe+8>>2],t[Yt+12>>2]=t[Pe+12>>2],(Ve|0)==(Q+-1|0)?(t[tn>>2]=t[Z>>2],t[tn+4>>2]=t[Z+4>>2],t[tn+8>>2]=t[Z+8>>2],t[tn+12>>2]=t[Z+12>>2]):(Pe=Z+(Ve+1<<4)|0,t[tn>>2]=t[Pe>>2],t[tn+4>>2]=t[Pe+4>>2],t[tn+8>>2]=t[Pe+8>>2],t[tn+12>>2]=t[Pe+12>>2]),Q=Ti(Yt,tn,f,fn)|0;e:do if(Q)Z=0,D=Q;else if(Z=fn,Q=t[Z>>2]|0,Z=t[Z+4>>2]|0,(Z|0)>0|(Z|0)==0&Q>>>0>0){qe=0,Pe=0;t:for(;;){if(bi=+K[Yt>>3],Ne=x(Q|0,Z|0,qe|0,Pe|0)|0,zi=+(Ne>>>0)+4294967296*+(Te()|0),bn=+(Q>>>0)+4294967296*+(Z|0),Nn=+(qe>>>0)+4294967296*+(Pe|0),K[Mt>>3]=bi*zi/bn+ +K[tn>>3]*Nn/bn,K[cn>>3]=+K[gt>>3]*zi/bn+ +K[Mn>>3]*Nn/bn,Q=mA(Mt,f,ht)|0,Q|0){D=Q;break}Ne=ht,ve=t[Ne>>2]|0,Ne=t[Ne+4>>2]|0,Ae=pe(ve|0,Ne|0,s|0,l|0)|0,X=Te()|0,Q=I+(Ae<<3)|0,ie=Q,Z=t[ie>>2]|0,ie=t[ie+4>>2]|0;n:do if((Z|0)==0&(ie|0)==0)Ue=Q,an=16;else for(ce=0,fe=0;;){if((ce|0)>(l|0)|(ce|0)==(l|0)&fe>>>0>s>>>0){D=1;break t}if((Z|0)==(ve|0)&(ie|0)==(Ne|0))break n;if(Q=v(Ae|0,X|0,1,0)|0,Ae=le(Q|0,Te()|0,s|0,l|0)|0,X=Te()|0,fe=v(fe|0,ce|0,1,0)|0,ce=Te()|0,Q=I+(Ae<<3)|0,ie=Q,Z=t[ie>>2]|0,ie=t[ie+4>>2]|0,(Z|0)==0&(ie|0)==0){Ue=Q,an=16;break}}while(!1);if((an|0)==16&&(an=0,!((ve|0)==0&(Ne|0)==0))&&(fe=Ue,t[fe>>2]=ve,t[fe+4>>2]=Ne,fe=k+(t[m>>2]<<3)|0,t[fe>>2]=ve,t[fe+4>>2]=Ne,fe=m,fe=v(t[fe>>2]|0,t[fe+4>>2]|0,1,0)|0,ve=Te()|0,Ne=m,t[Ne>>2]=fe,t[Ne+4>>2]=ve),qe=v(qe|0,Pe|0,1,0)|0,Pe=Te()|0,Z=fn,Q=t[Z>>2]|0,Z=t[Z+4>>2]|0,!((Z|0)>(Pe|0)|(Z|0)==(Pe|0)&Q>>>0>qe>>>0)){Z=1;break e}}Z=0}else Z=1;while(!1);if(Ve=Ve+1|0,!Z){an=21;break}if(Q=t[A>>2]|0,(Ve|0)>=(Q|0)){D=0,an=21;break}}return(an|0)==21?(ye=Wn,D|0):0}function Ra(A,s,l,f){A=A|0,s=s|0,l=l|0,f=f|0;var m=0,k=0,I=0,D=0,Q=0,Z=0,X=0,ie=0,Ae=0,ce=0,fe=0,ve=0,Ne=0,qe=0,Pe=0,Ve=0,Ue=0,Mt=0,ht=0,_t=0,gt=0,Mn=0,cn=0,Yt=0,tn=0,fn=0,an=0,Wn=0,bn=0,Nn=0,zi=0;if(zi=ye,ye=ye+112|0,an=zi+80|0,Q=zi+72|0,Wn=zi,bn=zi+56|0,l|0)return Nn=15,ye=zi,Nn|0;if(Z=A+8|0,Nn=Vi((t[Z>>2]<<5)+32|0)|0,!Nn)return Nn=13,ye=zi,Nn|0;if(fo(A,Nn),tn=A,fn=t[tn+4>>2]|0,l=Q,t[l>>2]=t[tn>>2],t[l+4>>2]=fn,$a(Q,an),l=ga(an,s,Wn)|0,l)tn=0,fn=0;else{if(l=t[Q>>2]|0,k=t[Z>>2]|0,(k|0)>0){I=t[A+12>>2]|0,m=0;do l=(t[I+(m<<3)>>2]|0)+l|0,m=m+1|0;while((m|0)!=(k|0));m=l}else m=l;l=Wn,k=t[l>>2]|0,l=t[l+4>>2]|0,I=((m|0)<0)<<31>>31,(l|0)<(I|0)|(l|0)==(I|0)&k>>>0<m>>>0?(l=Wn,t[l>>2]=m,t[l+4>>2]=I,l=I):m=k,tn=v(m|0,l|0,12,0)|0,fn=Te()|0,l=Wn,t[l>>2]=tn,t[l+4>>2]=fn,l=0}if(l|0)return p(Nn),Nn=l,ye=zi,Nn|0;if(m=y(tn,8)|0,!m)return p(Nn),Nn=13,ye=zi,Nn|0;if(D=y(tn,8)|0,!D)return p(Nn),p(m),Nn=13,ye=zi,Nn|0;cn=an,t[cn>>2]=0,t[cn+4>>2]=0,cn=A,Yt=t[cn+4>>2]|0,l=Q,t[l>>2]=t[cn>>2],t[l+4>>2]=Yt,l=fa(Q,tn,fn,s,an,m,D)|0;e:do if(l)p(m),p(D),p(Nn);else{t:do if((t[Z>>2]|0)>0){for(I=A+12|0,k=0;l=fa((t[I>>2]|0)+(k<<3)|0,tn,fn,s,an,m,D)|0,k=k+1|0,!(l|0);)if((k|0)>=(t[Z>>2]|0))break t;p(m),p(D),p(Nn);break e}while(!1);(fn|0)>0|(fn|0)==0&tn>>>0>0&&E(D|0,0,tn<<3|0)|0,Yt=an,cn=t[Yt+4>>2]|0;t:do if((cn|0)>0|(cn|0)==0&(t[Yt>>2]|0)>>>0>0){_t=m,gt=D,Mn=m,cn=D,Yt=m,l=m,Ue=m,Mt=D,ht=D,m=D;n:for(;;){for(Ne=0,qe=0,Pe=0,Ve=0,k=0,I=0;;){D=Wn,Q=D+56|0;do t[D>>2]=0,D=D+4|0;while((D|0)<(Q|0));if(s=_t+(Ne<<3)|0,Z=t[s>>2]|0,s=t[s+4>>2]|0,Hi(Z,s,1,Wn,0)|0){D=Wn,Q=D+56|0;do t[D>>2]=0,D=D+4|0;while((D|0)<(Q|0));D=y(7,4)|0,D|0&&(Pr(Z,s,1,Wn,D,7,0,0)|0,p(D))}for(ve=0;;){fe=Wn+(ve<<3)|0,ce=t[fe>>2]|0,fe=t[fe+4>>2]|0;i:do if((ce|0)==0&(fe|0)==0)D=k,Q=I;else{if(X=pe(ce|0,fe|0,tn|0,fn|0)|0,Z=Te()|0,D=f+(X<<3)|0,s=D,Q=t[s>>2]|0,s=t[s+4>>2]|0,!((Q|0)==0&(s|0)==0)){ie=0,Ae=0;do{if((ie|0)>(fn|0)|(ie|0)==(fn|0)&Ae>>>0>tn>>>0)break n;if((Q|0)==(ce|0)&(s|0)==(fe|0)){D=k,Q=I;break i}D=v(X|0,Z|0,1,0)|0,X=le(D|0,Te()|0,tn|0,fn|0)|0,Z=Te()|0,Ae=v(Ae|0,ie|0,1,0)|0,ie=Te()|0,D=f+(X<<3)|0,s=D,Q=t[s>>2]|0,s=t[s+4>>2]|0}while(!((Q|0)==0&(s|0)==0))}(ce|0)==0&(fe|0)==0?(D=k,Q=I):(qA(ce,fe,bn)|0,Ps(A,Nn,bn)|0&&(Ae=v(k|0,I|0,1,0)|0,I=Te()|0,ie=D,t[ie>>2]=ce,t[ie+4>>2]=fe,k=gt+(k<<3)|0,t[k>>2]=ce,t[k+4>>2]=fe,k=Ae),D=k,Q=I)}while(!1);if(ve=ve+1|0,ve>>>0>=7)break;k=D,I=Q}if(Ne=v(Ne|0,qe|0,1,0)|0,qe=Te()|0,Pe=v(Pe|0,Ve|0,1,0)|0,Ve=Te()|0,I=an,k=t[I>>2]|0,I=t[I+4>>2]|0,(Ve|0)<(I|0)|(Ve|0)==(I|0)&Pe>>>0<k>>>0)k=D,I=Q;else break}if((I|0)>0|(I|0)==0&k>>>0>0){k=0,I=0;do Ve=_t+(k<<3)|0,t[Ve>>2]=0,t[Ve+4>>2]=0,k=v(k|0,I|0,1,0)|0,I=Te()|0,Ve=an,Pe=t[Ve+4>>2]|0;while((I|0)<(Pe|0)|((I|0)==(Pe|0)?k>>>0<(t[Ve>>2]|0)>>>0:0))}if(Ve=an,t[Ve>>2]=D,t[Ve+4>>2]=Q,(Q|0)>0|(Q|0)==0&D>>>0>0)ve=m,Ne=ht,qe=Yt,Pe=Mt,Ve=gt,m=Ue,ht=l,Mt=Mn,Ue=ve,l=Ne,Yt=cn,cn=qe,Mn=Pe,gt=_t,_t=Ve;else break t}p(Mn),p(cn),p(Nn),l=1;break e}else l=D;while(!1);p(Nn),p(m),p(l),l=0}while(!1);return Nn=l,ye=zi,Nn|0}function $i(A,s,l){A=A|0,s=s|0,l=l|0;var f=0,m=0,k=0,I=0,D=0,Q=0,Z=0,X=0;if(X=ye,ye=ye+176|0,Q=X,(s|0)<1)return xa(l,0,0),Z=0,ye=X,Z|0;for(D=A,D=Ee(t[D>>2]|0,t[D+4>>2]|0,52)|0,Te()|0,xa(l,(s|0)>6?s:6,D&15),D=0;f=A+(D<<3)|0,f=Di(t[f>>2]|0,t[f+4>>2]|0,Q)|0,!(f|0);){if(f=t[Q>>2]|0,(f|0)>0){I=0;do k=Q+8+(I<<4)|0,I=I+1|0,f=Q+8+(((I|0)%(f|0)|0)<<4)|0,m=jA(l,f,k)|0,m?ct(l,m)|0:wt(l,k,f)|0,f=t[Q>>2]|0;while((I|0)<(f|0))}if(D=D+1|0,(D|0)>=(s|0)){f=0,Z=13;break}}return(Z|0)==13?(ye=X,f|0):(pr(l),Z=f,ye=X,Z|0)}function Fa(A,s,l){A=A|0,s=s|0,l=l|0;var f=0,m=0,k=0,I=0;if(k=ye,ye=ye+32|0,f=k,m=k+16|0,A=$i(A,s,m)|0,A|0)return l=A,ye=k,l|0;if(t[l>>2]=0,t[l+4>>2]=0,t[l+8>>2]=0,A=Hr(m)|0,A|0)do{s=Vl(l)|0;do ya(s,A)|0,I=A+16|0,t[f>>2]=t[I>>2],t[f+4>>2]=t[I+4>>2],t[f+8>>2]=t[I+8>>2],t[f+12>>2]=t[I+12>>2],ct(m,A)|0,A=Go(m,f)|0;while(A|0);A=Hr(m)|0}while(A|0);return pr(m),A=hs(l)|0,A?(yA(l),I=A,ye=k,I|0):(I=0,ye=k,I|0)}function Ri(A){return A=A|0,A>>>0>121?(A=0,A|0):(A=t[7696+(A*28|0)+16>>2]|0,A|0)}function Oa(A){return A=A|0,(A|0)==4|(A|0)==117|0}function da(A){return A=A|0,t[11120+((t[A>>2]|0)*216|0)+((t[A+4>>2]|0)*72|0)+((t[A+8>>2]|0)*24|0)+(t[A+12>>2]<<3)>>2]|0}function Al(A){return A=A|0,t[11120+((t[A>>2]|0)*216|0)+((t[A+4>>2]|0)*72|0)+((t[A+8>>2]|0)*24|0)+(t[A+12>>2]<<3)+4>>2]|0}function sl(A,s){A=A|0,s=s|0,A=7696+(A*28|0)|0,t[s>>2]=t[A>>2],t[s+4>>2]=t[A+4>>2],t[s+8>>2]=t[A+8>>2],t[s+12>>2]=t[A+12>>2]}function pa(A,s){A=A|0,s=s|0;var l=0,f=0;if(s>>>0>20)return s=-1,s|0;do if((t[11120+(s*216|0)>>2]|0)!=(A|0))if((t[11120+(s*216|0)+8>>2]|0)!=(A|0))if((t[11120+(s*216|0)+16>>2]|0)!=(A|0))if((t[11120+(s*216|0)+24>>2]|0)!=(A|0))if((t[11120+(s*216|0)+32>>2]|0)!=(A|0))if((t[11120+(s*216|0)+40>>2]|0)!=(A|0))if((t[11120+(s*216|0)+48>>2]|0)!=(A|0))if((t[11120+(s*216|0)+56>>2]|0)!=(A|0))if((t[11120+(s*216|0)+64>>2]|0)!=(A|0))if((t[11120+(s*216|0)+72>>2]|0)!=(A|0))if((t[11120+(s*216|0)+80>>2]|0)!=(A|0))if((t[11120+(s*216|0)+88>>2]|0)!=(A|0))if((t[11120+(s*216|0)+96>>2]|0)!=(A|0))if((t[11120+(s*216|0)+104>>2]|0)!=(A|0))if((t[11120+(s*216|0)+112>>2]|0)!=(A|0))if((t[11120+(s*216|0)+120>>2]|0)!=(A|0))if((t[11120+(s*216|0)+128>>2]|0)!=(A|0))if((t[11120+(s*216|0)+136>>2]|0)==(A|0))A=2,l=1,f=2;else{if((t[11120+(s*216|0)+144>>2]|0)==(A|0)){A=0,l=2,f=0;break}if((t[11120+(s*216|0)+152>>2]|0)==(A|0)){A=0,l=2,f=1;break}if((t[11120+(s*216|0)+160>>2]|0)==(A|0)){A=0,l=2,f=2;break}if((t[11120+(s*216|0)+168>>2]|0)==(A|0)){A=1,l=2,f=0;break}if((t[11120+(s*216|0)+176>>2]|0)==(A|0)){A=1,l=2,f=1;break}if((t[11120+(s*216|0)+184>>2]|0)==(A|0)){A=1,l=2,f=2;break}if((t[11120+(s*216|0)+192>>2]|0)==(A|0)){A=2,l=2,f=0;break}if((t[11120+(s*216|0)+200>>2]|0)==(A|0)){A=2,l=2,f=1;break}if((t[11120+(s*216|0)+208>>2]|0)==(A|0)){A=2,l=2,f=2;break}else A=-1;return A|0}else A=2,l=1,f=1;else A=2,l=1,f=0;else A=1,l=1,f=2;else A=1,l=1,f=1;else A=1,l=1,f=0;else A=0,l=1,f=2;else A=0,l=1,f=1;else A=0,l=1,f=0;else A=2,l=0,f=2;else A=2,l=0,f=1;else A=2,l=0,f=0;else A=1,l=0,f=2;else A=1,l=0,f=1;else A=1,l=0,f=0;else A=0,l=0,f=2;else A=0,l=0,f=1;else A=0,l=0,f=0;while(!1);return s=t[11120+(s*216|0)+(l*72|0)+(A*24|0)+(f<<3)+4>>2]|0,s|0}function Io(A,s){return A=A|0,s=s|0,(t[7696+(A*28|0)+20>>2]|0)==(s|0)?(s=1,s|0):(s=(t[7696+(A*28|0)+24>>2]|0)==(s|0),s|0)}function Ts(A,s){return A=A|0,s=s|0,t[848+(A*28|0)+(s<<2)>>2]|0}function Gs(A,s){return A=A|0,s=s|0,(t[848+(A*28|0)>>2]|0)==(s|0)?(s=0,s|0):(t[848+(A*28|0)+4>>2]|0)==(s|0)?(s=1,s|0):(t[848+(A*28|0)+8>>2]|0)==(s|0)?(s=2,s|0):(t[848+(A*28|0)+12>>2]|0)==(s|0)?(s=3,s|0):(t[848+(A*28|0)+16>>2]|0)==(s|0)?(s=4,s|0):(t[848+(A*28|0)+20>>2]|0)==(s|0)?(s=5,s|0):((t[848+(A*28|0)+24>>2]|0)==(s|0)?6:7)|0}function fA(){return 122}function ma(A){A=A|0;var s=0,l=0,f=0;s=0;do Se(s|0,0,45)|0,f=Te()|0|134225919,l=A+(s<<3)|0,t[l>>2]=-1,t[l+4>>2]=f,s=s+1|0;while((s|0)!=122);return 0}function ao(A){return A=A|0,+K[A+16>>3]<+K[A+24>>3]|0}function Bo(A,s){A=A|0,s=s|0;var l=0,f=0,m=0;return l=+K[s>>3],!(l>=+K[A+8>>3])||!(l<=+K[A>>3])?(s=0,s|0):(f=+K[A+16>>3],l=+K[A+24>>3],m=+K[s+8>>3],s=m>=l,A=m<=f&1,f<l?s&&(A=1):s||(A=0),s=(A|0)!=0,s|0)}function ga(A,s,l){A=A|0,s=s|0,l=l|0;var f=0,m=0,k=0,I=0,D=0,Q=0,Z=0,X=0,ie=0,Ae=0,ce=0,fe=0,ve=0,Ne=0;fe=ye,ye=ye+288|0,X=fe+264|0,ie=fe+96|0,Z=fe,D=Z,Q=D+96|0;do t[D>>2]=0,D=D+4|0;while((D|0)<(Q|0));return s=Zr(s,Z)|0,s|0?(ce=s,ye=fe,ce|0):(Q=Z,Z=t[Q>>2]|0,Q=t[Q+4>>2]|0,qA(Z,Q,X)|0,Di(Z,Q,ie)|0,I=+vt(X,ie+8|0),K[X>>3]=+K[A>>3],Q=X+8|0,K[Q>>3]=+K[A+16>>3],K[ie>>3]=+K[A+8>>3],Z=ie+8|0,K[Z>>3]=+K[A+24>>3],m=+vt(X,ie),Ne=+K[Q>>3]-+K[Z>>3],k=+Pt(+Ne),ve=+K[X>>3]-+K[ie>>3],f=+Pt(+ve),!(Ne==0|ve==0)&&(Ne=+C(+k,+f),Ne=+oA(+(m*m/+i(+(Ne/+i(+k,+f)),3)/(I*(I*2.59807621135)*.8))),K[St>>3]=Ne,Ae=~~Ne>>>0,ce=+Pt(Ne)>=1?Ne>0?~~+kA(+en(Ne/4294967296),4294967295)>>>0:~~+oA((Ne-+(~~Ne>>>0))/4294967296)>>>0:0,(t[St+4>>2]&2146435072|0)!=2146435072)?(ie=(Ae|0)==0&(ce|0)==0,s=l,t[s>>2]=ie?1:Ae,t[s+4>>2]=ie?0:ce,s=0):s=1,ce=s,ye=fe,ce|0)}function Ti(A,s,l,f){A=A|0,s=s|0,l=l|0,f=f|0;var m=0,k=0,I=0,D=0,Q=0,Z=0,X=0;Z=ye,ye=ye+288|0,I=Z+264|0,D=Z+96|0,Q=Z,m=Q,k=m+96|0;do t[m>>2]=0,m=m+4|0;while((m|0)<(k|0));return l=Zr(l,Q)|0,l|0?(f=l,ye=Z,f|0):(l=Q,m=t[l>>2]|0,l=t[l+4>>2]|0,qA(m,l,I)|0,Di(m,l,D)|0,X=+vt(I,D+8|0),X=+oA(+(+vt(A,s)/(X*2))),K[St>>3]=X,l=~~X>>>0,m=+Pt(X)>=1?X>0?~~+kA(+en(X/4294967296),4294967295)>>>0:~~+oA((X-+(~~X>>>0))/4294967296)>>>0:0,(t[St+4>>2]&2146435072|0)==2146435072?(f=1,ye=Z,f|0):(Q=(l|0)==0&(m|0)==0,t[f>>2]=Q?1:l,t[f+4>>2]=Q?0:m,f=0,ye=Z,f|0))}function Rn(A,s,l,f){A=A|0,s=s|0,l=l|0,f=f|0,t[A>>2]=s,t[A+4>>2]=l,t[A+8>>2]=f}function Hn(A,s){A=A|0,s=s|0;var l=0,f=0,m=0,k=0,I=0,D=0,Q=0,Z=0,X=0,ie=0,Ae=0;ie=s+8|0,t[ie>>2]=0,Q=+K[A>>3],I=+Pt(+Q),Z=+K[A+8>>3],D=+Pt(+Z)/.8660254037844386,I=I+D*.5,l=~~I,A=~~D,I=I-+(l|0),D=D-+(A|0);do if(I<.5)if(I<.3333333333333333)if(t[s>>2]=l,D<(I+1)*.5){t[s+4>>2]=A;break}else{A=A+1|0,t[s+4>>2]=A;break}else if(Ae=1-I,A=(!(D<Ae)&1)+A|0,t[s+4>>2]=A,Ae<=D&D<I*2){l=l+1|0,t[s>>2]=l;break}else{t[s>>2]=l;break}else{if(!(I<.6666666666666666))if(l=l+1|0,t[s>>2]=l,D<I*.5){t[s+4>>2]=A;break}else{A=A+1|0,t[s+4>>2]=A;break}if(D<1-I){if(t[s+4>>2]=A,I*2+-1<D){t[s>>2]=l;break}}else A=A+1|0,t[s+4>>2]=A;l=l+1|0,t[s>>2]=l}while(!1);do if(Q<0)if(A&1){X=(A+1|0)/2|0,X=x(l|0,((l|0)<0)<<31>>31|0,X|0,((X|0)<0)<<31>>31|0)|0,l=~~(+(l|0)-((+(X>>>0)+4294967296*+(Te()|0))*2+1)),t[s>>2]=l;break}else{X=(A|0)/2|0,X=x(l|0,((l|0)<0)<<31>>31|0,X|0,((X|0)<0)<<31>>31|0)|0,l=~~(+(l|0)-(+(X>>>0)+4294967296*+(Te()|0))*2),t[s>>2]=l;break}while(!1);X=s+4|0,Z<0&&(l=l-((A<<1|1|0)/2|0)|0,t[s>>2]=l,A=0-A|0,t[X>>2]=A),f=A-l|0,(l|0)<0?(m=0-l|0,t[X>>2]=f,t[ie>>2]=m,t[s>>2]=0,A=f,l=0):m=0,(A|0)<0&&(l=l-A|0,t[s>>2]=l,m=m-A|0,t[ie>>2]=m,t[X>>2]=0,A=0),k=l-m|0,f=A-m|0,(m|0)<0&&(t[s>>2]=k,t[X>>2]=f,t[ie>>2]=0,A=f,l=k,m=0),f=(A|0)<(l|0)?A:l,f=(m|0)<(f|0)?m:f,!((f|0)<=0)&&(t[s>>2]=l-f,t[X>>2]=A-f,t[ie>>2]=m-f)}function gi(A){A=A|0;var s=0,l=0,f=0,m=0,k=0,I=0;s=t[A>>2]|0,I=A+4|0,l=t[I>>2]|0,(s|0)<0&&(l=l-s|0,t[I>>2]=l,k=A+8|0,t[k>>2]=(t[k>>2]|0)-s,t[A>>2]=0,s=0),(l|0)<0?(s=s-l|0,t[A>>2]=s,k=A+8|0,m=(t[k>>2]|0)-l|0,t[k>>2]=m,t[I>>2]=0,l=0):(m=A+8|0,k=m,m=t[m>>2]|0),(m|0)<0&&(s=s-m|0,t[A>>2]=s,l=l-m|0,t[I>>2]=l,t[k>>2]=0,m=0),f=(l|0)<(s|0)?l:s,f=(m|0)<(f|0)?m:f,!((f|0)<=0)&&(t[A>>2]=s-f,t[I>>2]=l-f,t[k>>2]=m-f)}function fr(A,s){A=A|0,s=s|0;var l=0,f=0;f=t[A+8>>2]|0,l=+((t[A+4>>2]|0)-f|0),K[s>>3]=+((t[A>>2]|0)-f|0)-l*.5,K[s+8>>3]=l*.8660254037844386}function Fi(A,s,l){A=A|0,s=s|0,l=l|0,t[l>>2]=(t[s>>2]|0)+(t[A>>2]|0),t[l+4>>2]=(t[s+4>>2]|0)+(t[A+4>>2]|0),t[l+8>>2]=(t[s+8>>2]|0)+(t[A+8>>2]|0)}function qs(A,s,l){A=A|0,s=s|0,l=l|0,t[l>>2]=(t[A>>2]|0)-(t[s>>2]|0),t[l+4>>2]=(t[A+4>>2]|0)-(t[s+4>>2]|0),t[l+8>>2]=(t[A+8>>2]|0)-(t[s+8>>2]|0)}function Do(A,s){A=A|0,s=s|0;var l=0,f=0;l=ti(t[A>>2]|0,s)|0,t[A>>2]=l,l=A+4|0,f=ti(t[l>>2]|0,s)|0,t[l>>2]=f,A=A+8|0,s=ti(t[A>>2]|0,s)|0,t[A>>2]=s}function ss(A){A=A|0;var s=0,l=0,f=0,m=0,k=0,I=0,D=0;I=t[A>>2]|0,D=(I|0)<0,f=(t[A+4>>2]|0)-(D?I:0)|0,k=(f|0)<0,m=(k?0-f|0:0)+((t[A+8>>2]|0)-(D?I:0))|0,l=(m|0)<0,A=l?0:m,s=(k?0:f)-(l?m:0)|0,m=(D?0:I)-(k?f:0)-(l?m:0)|0,l=(s|0)<(m|0)?s:m,l=(A|0)<(l|0)?A:l,f=(l|0)>0,A=A-(f?l:0)|0,s=s-(f?l:0)|0;e:do switch(m-(f?l:0)|0){case 0:switch(s|0){case 0:return D=A|0?(A|0)==1?1:7:0,D|0;case 1:return D=A|0?(A|0)==1?3:7:2,D|0;default:break e}case 1:switch(s|0){case 0:return D=A|0?(A|0)==1?5:7:4,D|0;case 1:{if(!A)A=6;else break e;return A|0}default:break e}}while(!1);return D=7,D|0}function Po(A){A=A|0;var s=0,l=0,f=0,m=0,k=0,I=0,D=0;I=A+8|0,m=t[I>>2]|0,k=(t[A>>2]|0)-m|0,D=A+4|0,m=(t[D>>2]|0)-m|0;do if(k>>>0>715827881|m>>>0>715827881){if(l=(k|0)>0,l){if((2147483647-k|0)<(k|0)||(2147483647-(k<<1)|0)<(k|0))return D=1,D|0}else if((-2147483648-k|0)>(k|0)||(-2147483648-(k<<1)|0)>(k|0))return D=1,D|0;if(s=k*3|0,(m|0)>0){if((2147483647-m|0)<(m|0))return D=1,D|0}else if((-2147483648-m|0)>(m|0))return D=1,D|0;if(f=m<<1,(k|0)>-1){if((s|-2147483648|0)>=(m|0))return D=1,D|0}else if((s^-2147483648|0)<(m|0))return D=1,D|0;if(l){if((2147483647-k|0)<(f|0))s=1;else{l=f;break}return s|0}else{if((-2147483648-k|0)>(f|0))s=1;else{l=f;break}return s|0}}else l=m<<1,s=k*3|0;while(!1);f=WA(+(s-m|0)/7)|0,t[A>>2]=f,m=WA(+(l+k|0)/7)|0,t[D>>2]=m,t[I>>2]=0,l=(m|0)<(f|0),s=l?f:m,l=l?m:f;do if((l|0)<0){if((s|0)>0){if((s|-2147483648|0)<(l|0)&((l|0)!=-2147483648&(2147483647-s|0)>=(l|0)))break;kn(23313,22444,355,22455)}if((l|0)==-2147483648|(-2147483648-s|0)>(l|0)&&kn(23313,22444,355,22455),(s|0)>-1){if((s|-2147483648|0)<(l|0))break;kn(23313,22444,355,22455)}else{if((s^-2147483648|0)>=(l|0))break;kn(23313,22444,355,22455)}}while(!1);return s=m-f|0,(f|0)<0?(l=0-f|0,t[D>>2]=s,t[I>>2]=l,t[A>>2]=0,f=0):(s=m,l=0),(s|0)<0&&(f=f-s|0,t[A>>2]=f,l=l-s|0,t[I>>2]=l,t[D>>2]=0,s=0),k=f-l|0,m=s-l|0,(l|0)<0?(t[A>>2]=k,t[D>>2]=m,t[I>>2]=0,s=m,m=k,l=0):m=f,f=(s|0)<(m|0)?s:m,f=(l|0)<(f|0)?l:f,(f|0)<=0?(D=0,D|0):(t[A>>2]=m-f,t[D>>2]=s-f,t[I>>2]=l-f,D=0,D|0)}function Xi(A){A=A|0;var s=0,l=0,f=0,m=0,k=0,I=0,D=0;I=A+8|0,m=t[I>>2]|0,k=(t[A>>2]|0)-m|0,D=A+4|0,m=(t[D>>2]|0)-m|0;do if(k>>>0>715827881|m>>>0>715827881){if(l=(k|0)>0,l){if((2147483647-k|0)<(k|0))return D=1,D|0}else if((-2147483648-k|0)>(k|0))return D=1,D|0;if(s=k<<1,(m|0)>0){if((2147483647-m|0)<(m|0)||(2147483647-(m<<1)|0)<(m|0))return D=1,D|0}else if((-2147483648-m|0)>(m|0)||(-2147483648-(m<<1)|0)>(m|0))return D=1,D|0;if(f=m*3|0,l){if((2147483647-s|0)<(m|0))return D=1,D|0}else if((-2147483648-s|0)>(m|0))return D=1,D|0;if((m|0)>-1){if((f|-2147483648|0)<(k|0)){l=f;break}else s=1;return s|0}else{if((f^-2147483648|0)<(k|0))s=1;else{l=f;break}return s|0}}else l=m*3|0,s=k<<1;while(!1);f=WA(+(s+m|0)/7)|0,t[A>>2]=f,m=WA(+(l-k|0)/7)|0,t[D>>2]=m,t[I>>2]=0,l=(m|0)<(f|0),s=l?f:m,l=l?m:f;do if((l|0)<0){if((s|0)>0){if((s|-2147483648|0)<(l|0)&((l|0)!=-2147483648&(2147483647-s|0)>=(l|0)))break;kn(23313,22444,404,22469)}if((l|0)==-2147483648|(-2147483648-s|0)>(l|0)&&kn(23313,22444,404,22469),(s|0)>-1){if((s|-2147483648|0)<(l|0))break;kn(23313,22444,404,22469)}else{if((s^-2147483648|0)>=(l|0))break;kn(23313,22444,404,22469)}}while(!1);return s=m-f|0,(f|0)<0?(l=0-f|0,t[D>>2]=s,t[I>>2]=l,t[A>>2]=0,f=0):(s=m,l=0),(s|0)<0&&(f=f-s|0,t[A>>2]=f,l=l-s|0,t[I>>2]=l,t[D>>2]=0,s=0),k=f-l|0,m=s-l|0,(l|0)<0?(t[A>>2]=k,t[D>>2]=m,t[I>>2]=0,s=m,m=k,l=0):m=f,f=(s|0)<(m|0)?s:m,f=(l|0)<(f|0)?l:f,(f|0)<=0?(D=0,D|0):(t[A>>2]=m-f,t[D>>2]=s-f,t[I>>2]=l-f,D=0,D|0)}function lo(A){A=A|0;var s=0,l=0,f=0,m=0,k=0,I=0,D=0;I=A+8|0,l=t[I>>2]|0,s=(t[A>>2]|0)-l|0,D=A+4|0,l=(t[D>>2]|0)-l|0,f=WA(+((s*3|0)-l|0)/7)|0,t[A>>2]=f,s=WA(+((l<<1)+s|0)/7)|0,t[D>>2]=s,t[I>>2]=0,l=s-f|0,(f|0)<0?(k=0-f|0,t[D>>2]=l,t[I>>2]=k,t[A>>2]=0,s=l,f=0,l=k):l=0,(s|0)<0&&(f=f-s|0,t[A>>2]=f,l=l-s|0,t[I>>2]=l,t[D>>2]=0,s=0),k=f-l|0,m=s-l|0,(l|0)<0?(t[A>>2]=k,t[D>>2]=m,t[I>>2]=0,s=m,m=k,l=0):m=f,f=(s|0)<(m|0)?s:m,f=(l|0)<(f|0)?l:f,!((f|0)<=0)&&(t[A>>2]=m-f,t[D>>2]=s-f,t[I>>2]=l-f)}function NA(A){A=A|0;var s=0,l=0,f=0,m=0,k=0,I=0,D=0;I=A+8|0,l=t[I>>2]|0,s=(t[A>>2]|0)-l|0,D=A+4|0,l=(t[D>>2]|0)-l|0,f=WA(+((s<<1)+l|0)/7)|0,t[A>>2]=f,s=WA(+((l*3|0)-s|0)/7)|0,t[D>>2]=s,t[I>>2]=0,l=s-f|0,(f|0)<0?(k=0-f|0,t[D>>2]=l,t[I>>2]=k,t[A>>2]=0,s=l,f=0,l=k):l=0,(s|0)<0&&(f=f-s|0,t[A>>2]=f,l=l-s|0,t[I>>2]=l,t[D>>2]=0,s=0),k=f-l|0,m=s-l|0,(l|0)<0?(t[A>>2]=k,t[D>>2]=m,t[I>>2]=0,s=m,m=k,l=0):m=f,f=(s|0)<(m|0)?s:m,f=(l|0)<(f|0)?l:f,!((f|0)<=0)&&(t[A>>2]=m-f,t[D>>2]=s-f,t[I>>2]=l-f)}function os(A){A=A|0;var s=0,l=0,f=0,m=0,k=0,I=0,D=0;s=t[A>>2]|0,I=A+4|0,l=t[I>>2]|0,D=A+8|0,f=t[D>>2]|0,m=l+(s*3|0)|0,t[A>>2]=m,l=f+(l*3|0)|0,t[I>>2]=l,s=(f*3|0)+s|0,t[D>>2]=s,f=l-m|0,(m|0)<0?(s=s-m|0,t[I>>2]=f,t[D>>2]=s,t[A>>2]=0,l=f,f=0):f=m,(l|0)<0&&(f=f-l|0,t[A>>2]=f,s=s-l|0,t[D>>2]=s,t[I>>2]=0,l=0),k=f-s|0,m=l-s|0,(s|0)<0?(t[A>>2]=k,t[I>>2]=m,t[D>>2]=0,f=k,s=0):m=l,l=(m|0)<(f|0)?m:f,l=(s|0)<(l|0)?s:l,!((l|0)<=0)&&(t[A>>2]=f-l,t[I>>2]=m-l,t[D>>2]=s-l)}function zr(A){A=A|0;var s=0,l=0,f=0,m=0,k=0,I=0,D=0;m=t[A>>2]|0,I=A+4|0,s=t[I>>2]|0,D=A+8|0,l=t[D>>2]|0,f=(s*3|0)+m|0,m=l+(m*3|0)|0,t[A>>2]=m,t[I>>2]=f,s=(l*3|0)+s|0,t[D>>2]=s,l=f-m|0,(m|0)<0?(s=s-m|0,t[I>>2]=l,t[D>>2]=s,t[A>>2]=0,m=0):l=f,(l|0)<0&&(m=m-l|0,t[A>>2]=m,s=s-l|0,t[D>>2]=s,t[I>>2]=0,l=0),k=m-s|0,f=l-s|0,(s|0)<0?(t[A>>2]=k,t[I>>2]=f,t[D>>2]=0,m=k,s=0):f=l,l=(f|0)<(m|0)?f:m,l=(s|0)<(l|0)?s:l,!((l|0)<=0)&&(t[A>>2]=m-l,t[I>>2]=f-l,t[D>>2]=s-l)}function dr(A,s){A=A|0,s=s|0;var l=0,f=0,m=0,k=0,I=0,D=0;(s+-1|0)>>>0>=6||(m=(t[15440+(s*12|0)>>2]|0)+(t[A>>2]|0)|0,t[A>>2]=m,D=A+4|0,f=(t[15440+(s*12|0)+4>>2]|0)+(t[D>>2]|0)|0,t[D>>2]=f,I=A+8|0,s=(t[15440+(s*12|0)+8>>2]|0)+(t[I>>2]|0)|0,t[I>>2]=s,l=f-m|0,(m|0)<0?(s=s-m|0,t[D>>2]=l,t[I>>2]=s,t[A>>2]=0,f=0):(l=f,f=m),(l|0)<0&&(f=f-l|0,t[A>>2]=f,s=s-l|0,t[I>>2]=s,t[D>>2]=0,l=0),k=f-s|0,m=l-s|0,(s|0)<0?(t[A>>2]=k,t[D>>2]=m,t[I>>2]=0,f=k,s=0):m=l,l=(m|0)<(f|0)?m:f,l=(s|0)<(l|0)?s:l,!((l|0)<=0)&&(t[A>>2]=f-l,t[D>>2]=m-l,t[I>>2]=s-l))}function _a(A){A=A|0;var s=0,l=0,f=0,m=0,k=0,I=0,D=0;m=t[A>>2]|0,I=A+4|0,s=t[I>>2]|0,D=A+8|0,l=t[D>>2]|0,f=s+m|0,m=l+m|0,t[A>>2]=m,t[I>>2]=f,s=l+s|0,t[D>>2]=s,l=f-m|0,(m|0)<0?(s=s-m|0,t[I>>2]=l,t[D>>2]=s,t[A>>2]=0,f=0):(l=f,f=m),(l|0)<0&&(f=f-l|0,t[A>>2]=f,s=s-l|0,t[D>>2]=s,t[I>>2]=0,l=0),k=f-s|0,m=l-s|0,(s|0)<0?(t[A>>2]=k,t[I>>2]=m,t[D>>2]=0,f=k,s=0):m=l,l=(m|0)<(f|0)?m:f,l=(s|0)<(l|0)?s:l,!((l|0)<=0)&&(t[A>>2]=f-l,t[I>>2]=m-l,t[D>>2]=s-l)}function VA(A){A=A|0;var s=0,l=0,f=0,m=0,k=0,I=0,D=0;s=t[A>>2]|0,I=A+4|0,f=t[I>>2]|0,D=A+8|0,l=t[D>>2]|0,m=f+s|0,t[A>>2]=m,f=l+f|0,t[I>>2]=f,s=l+s|0,t[D>>2]=s,l=f-m|0,(m|0)<0?(s=s-m|0,t[I>>2]=l,t[D>>2]=s,t[A>>2]=0,f=0):(l=f,f=m),(l|0)<0&&(f=f-l|0,t[A>>2]=f,s=s-l|0,t[D>>2]=s,t[I>>2]=0,l=0),k=f-s|0,m=l-s|0,(s|0)<0?(t[A>>2]=k,t[I>>2]=m,t[D>>2]=0,f=k,s=0):m=l,l=(m|0)<(f|0)?m:f,l=(s|0)<(l|0)?s:l,!((l|0)<=0)&&(t[A>>2]=f-l,t[I>>2]=m-l,t[D>>2]=s-l)}function as(A){switch(A=A|0,A|0){case 1:{A=5;break}case 5:{A=4;break}case 4:{A=6;break}case 6:{A=2;break}case 2:{A=3;break}case 3:{A=1;break}}return A|0}function Ss(A){switch(A=A|0,A|0){case 1:{A=3;break}case 3:{A=2;break}case 2:{A=6;break}case 6:{A=4;break}case 4:{A=5;break}case 5:{A=1;break}}return A|0}function ol(A){A=A|0;var s=0,l=0,f=0,m=0,k=0,I=0,D=0;s=t[A>>2]|0,I=A+4|0,l=t[I>>2]|0,D=A+8|0,f=t[D>>2]|0,m=l+(s<<1)|0,t[A>>2]=m,l=f+(l<<1)|0,t[I>>2]=l,s=(f<<1)+s|0,t[D>>2]=s,f=l-m|0,(m|0)<0?(s=s-m|0,t[I>>2]=f,t[D>>2]=s,t[A>>2]=0,l=f,f=0):f=m,(l|0)<0&&(f=f-l|0,t[A>>2]=f,s=s-l|0,t[D>>2]=s,t[I>>2]=0,l=0),k=f-s|0,m=l-s|0,(s|0)<0?(t[A>>2]=k,t[I>>2]=m,t[D>>2]=0,f=k,s=0):m=l,l=(m|0)<(f|0)?m:f,l=(s|0)<(l|0)?s:l,!((l|0)<=0)&&(t[A>>2]=f-l,t[I>>2]=m-l,t[D>>2]=s-l)}function Na(A){A=A|0;var s=0,l=0,f=0,m=0,k=0,I=0,D=0;m=t[A>>2]|0,I=A+4|0,s=t[I>>2]|0,D=A+8|0,l=t[D>>2]|0,f=(s<<1)+m|0,m=l+(m<<1)|0,t[A>>2]=m,t[I>>2]=f,s=(l<<1)+s|0,t[D>>2]=s,l=f-m|0,(m|0)<0?(s=s-m|0,t[I>>2]=l,t[D>>2]=s,t[A>>2]=0,m=0):l=f,(l|0)<0&&(m=m-l|0,t[A>>2]=m,s=s-l|0,t[D>>2]=s,t[I>>2]=0,l=0),k=m-s|0,f=l-s|0,(s|0)<0?(t[A>>2]=k,t[I>>2]=f,t[D>>2]=0,m=k,s=0):f=l,l=(f|0)<(m|0)?f:m,l=(s|0)<(l|0)?s:l,!((l|0)<=0)&&(t[A>>2]=m-l,t[I>>2]=f-l,t[D>>2]=s-l)}function Xr(A,s){A=A|0,s=s|0;var l=0,f=0,m=0,k=0,I=0,D=0;return I=(t[A>>2]|0)-(t[s>>2]|0)|0,D=(I|0)<0,f=(t[A+4>>2]|0)-(t[s+4>>2]|0)-(D?I:0)|0,k=(f|0)<0,m=(D?0-I|0:0)+(t[A+8>>2]|0)-(t[s+8>>2]|0)+(k?0-f|0:0)|0,A=(m|0)<0,s=A?0:m,l=(k?0:f)-(A?m:0)|0,m=(D?0:I)-(k?f:0)-(A?m:0)|0,A=(l|0)<(m|0)?l:m,A=(s|0)<(A|0)?s:A,f=(A|0)>0,s=s-(f?A:0)|0,l=l-(f?A:0)|0,A=m-(f?A:0)|0,A=(A|0)>-1?A:0-A|0,l=(l|0)>-1?l:0-l|0,s=(s|0)>-1?s:0-s|0,s=(l|0)>(s|0)?l:s,((A|0)>(s|0)?A:s)|0}function su(A,s){A=A|0,s=s|0;var l=0;l=t[A+8>>2]|0,t[s>>2]=(t[A>>2]|0)-l,t[s+4>>2]=(t[A+4>>2]|0)-l}function aA(A,s){A=A|0,s=s|0;var l=0,f=0,m=0,k=0,I=0,D=0;f=t[A>>2]|0,t[s>>2]=f,m=t[A+4>>2]|0,I=s+4|0,t[I>>2]=m,D=s+8|0,t[D>>2]=0,l=(m|0)<(f|0),A=l?f:m,l=l?m:f;do if((l|0)<0){if((A|0)>0){if((A|-2147483648|0)<(l|0)&((l|0)!=-2147483648&(2147483647-A|0)>=(l|0)))break;return A=1,A|0}if((l|0)==-2147483648|(-2147483648-A|0)>(l|0))return s=1,s|0;if((A|0)>-1){if((A|-2147483648|0)<(l|0))break;return A=1,A|0}else{if((A^-2147483648|0)<(l|0))A=1;else break;return A|0}}while(!1);return A=m-f|0,(f|0)<0?(l=0-f|0,t[I>>2]=A,t[D>>2]=l,t[s>>2]=0,f=0):(A=m,l=0),(A|0)<0&&(f=f-A|0,t[s>>2]=f,l=l-A|0,t[D>>2]=l,t[I>>2]=0,A=0),k=f-l|0,m=A-l|0,(l|0)<0?(t[s>>2]=k,t[I>>2]=m,t[D>>2]=0,A=m,m=k,l=0):m=f,f=(A|0)<(m|0)?A:m,f=(l|0)<(f|0)?l:f,(f|0)<=0?(s=0,s|0):(t[s>>2]=m-f,t[I>>2]=A-f,t[D>>2]=l-f,s=0,s|0)}function Cs(A){A=A|0;var s=0,l=0,f=0,m=0;s=A+8|0,m=t[s>>2]|0,l=m-(t[A>>2]|0)|0,t[A>>2]=l,f=A+4|0,A=(t[f>>2]|0)-m|0,t[f>>2]=A,t[s>>2]=0-(A+l)}function Va(A){A=A|0;var s=0,l=0,f=0,m=0,k=0,I=0,D=0;l=t[A>>2]|0,s=0-l|0,t[A>>2]=s,I=A+8|0,t[I>>2]=0,D=A+4|0,f=t[D>>2]|0,m=f+l|0,(l|0)>0?(t[D>>2]=m,t[I>>2]=l,t[A>>2]=0,s=0,f=m):l=0,(f|0)<0?(k=s-f|0,t[A>>2]=k,l=l-f|0,t[I>>2]=l,t[D>>2]=0,m=k-l|0,s=0-l|0,(l|0)<0?(t[A>>2]=m,t[D>>2]=s,t[I>>2]=0,f=s,l=0):(f=0,m=k)):m=s,s=(f|0)<(m|0)?f:m,s=(l|0)<(s|0)?l:s,!((s|0)<=0)&&(t[A>>2]=m-s,t[D>>2]=f-s,t[I>>2]=l-s)}function UA(A,s,l,f,m){A=A|0,s=s|0,l=l|0,f=f|0,m=m|0;var k=0,I=0,D=0,Q=0,Z=0,X=0,ie=0;if(ie=ye,ye=ye+64|0,X=ie,D=ie+56|0,!(!0&(s&2013265920|0)==134217728&(!0&(f&2013265920|0)==134217728)))return m=5,ye=ie,m|0;if((A|0)==(l|0)&(s|0)==(f|0))return t[m>>2]=0,m=0,ye=ie,m|0;if(I=Ee(A|0,s|0,52)|0,Te()|0,I=I&15,Z=Ee(l|0,f|0,52)|0,Te()|0,(I|0)!=(Z&15|0))return m=12,ye=ie,m|0;if(k=I+-1|0,I>>>0>1){$s(A,s,k,X)|0,$s(l,f,k,D)|0,Z=X,Q=t[Z>>2]|0,Z=t[Z+4>>2]|0;e:do if((Q|0)==(t[D>>2]|0)&&(Z|0)==(t[D+4>>2]|0)){I=(I^15)*3|0,k=Ee(A|0,s|0,I|0)|0,Te()|0,k=k&7,I=Ee(l|0,f|0,I|0)|0,Te()|0,I=I&7;do if((k|0)==0|(I|0)==0)t[m>>2]=1,k=0;else if((k|0)==7)k=5;else{if((k|0)==1|(I|0)==1&&Si(Q,Z)|0){k=5;break}if((t[15536+(k<<2)>>2]|0)!=(I|0)&&(t[15568+(k<<2)>>2]|0)!=(I|0))break e;t[m>>2]=1,k=0}while(!1);return m=k,ye=ie,m|0}while(!1)}k=X,I=k+56|0;do t[k>>2]=0,k=k+4|0;while((k|0)<(I|0));return Co(A,s,1,X)|0,s=X,!((t[s>>2]|0)==(l|0)&&(t[s+4>>2]|0)==(f|0))&&(s=X+8|0,!((t[s>>2]|0)==(l|0)&&(t[s+4>>2]|0)==(f|0)))&&(s=X+16|0,!((t[s>>2]|0)==(l|0)&&(t[s+4>>2]|0)==(f|0)))&&(s=X+24|0,!((t[s>>2]|0)==(l|0)&&(t[s+4>>2]|0)==(f|0)))&&(s=X+32|0,!((t[s>>2]|0)==(l|0)&&(t[s+4>>2]|0)==(f|0)))&&(s=X+40|0,!((t[s>>2]|0)==(l|0)&&(t[s+4>>2]|0)==(f|0)))?(k=X+48|0,k=((t[k>>2]|0)==(l|0)?(t[k+4>>2]|0)==(f|0):0)&1):k=1,t[m>>2]=k,m=0,ye=ie,m|0}function ls(A,s,l,f,m){return A=A|0,s=s|0,l=l|0,f=f|0,m=m|0,l=Qs(A,s,l,f)|0,(l|0)==7?(m=11,m|0):(f=Se(l|0,0,56)|0,s=s&-2130706433|(Te()|0)|268435456,t[m>>2]=A|f,t[m+4>>2]=s,m=0,m|0)}function Is(A,s,l){return A=A|0,s=s|0,l=l|0,!0&(s&2013265920|0)==268435456?(t[l>>2]=A,t[l+4>>2]=s&-2130706433|134217728,l=0,l|0):(l=6,l|0)}function Ki(A,s,l){A=A|0,s=s|0,l=l|0;var f=0,m=0,k=0;return m=ye,ye=ye+16|0,f=m,t[f>>2]=0,!0&(s&2013265920|0)==268435456?(k=Ee(A|0,s|0,56)|0,Te()|0,f=Yi(A,s&-2130706433|134217728,k&7,f,l)|0,ye=m,f|0):(f=6,ye=m,f|0)}function QA(A,s){A=A|0,s=s|0;var l=0;switch(l=Ee(A|0,s|0,56)|0,Te()|0,l&7){case 0:case 7:return l=0,l|0}return l=s&-2130706433|134217728,!(!0&(s&2013265920|0)==268435456)||!0&(s&117440512|0)==16777216&(Si(A,l)|0)!=0?(l=0,l|0):(l=Hs(A,l)|0,l|0)}function us(A,s,l){A=A|0,s=s|0,l=l|0;var f=0,m=0,k=0,I=0;return m=ye,ye=ye+16|0,f=m,!0&(s&2013265920|0)==268435456?(k=s&-2130706433|134217728,I=l,t[I>>2]=A,t[I+4>>2]=k,t[f>>2]=0,s=Ee(A|0,s|0,56)|0,Te()|0,f=Yi(A,k,s&7,f,l+8|0)|0,ye=m,f|0):(f=6,ye=m,f|0)}function zo(A,s,l){A=A|0,s=s|0,l=l|0;var f=0,m=0;return m=(Si(A,s)|0)==0,s=s&-2130706433,f=l,t[f>>2]=m?A:0,t[f+4>>2]=m?s|285212672:0,f=l+8|0,t[f>>2]=A,t[f+4>>2]=s|301989888,f=l+16|0,t[f>>2]=A,t[f+4>>2]=s|318767104,f=l+24|0,t[f>>2]=A,t[f+4>>2]=s|335544320,f=l+32|0,t[f>>2]=A,t[f+4>>2]=s|352321536,l=l+40|0,t[l>>2]=A,t[l+4>>2]=s|369098752,0}function Lr(A,s,l){A=A|0,s=s|0,l=l|0;var f=0,m=0,k=0,I=0;return I=ye,ye=ye+16|0,m=I,k=s&-2130706433|134217728,!0&(s&2013265920|0)==268435456?(f=Ee(A|0,s|0,56)|0,Te()|0,f=Pi(A,k,f&7)|0,(f|0)==-1?(t[l>>2]=0,k=6,ye=I,k|0):(_i(A,k,m)|0&&kn(23313,22484,282,22499),s=Ee(A|0,s|0,52)|0,Te()|0,s=s&15,Si(A,k)|0?Zs(m,s,f,2,l):Bi(m,s,f,2,l),k=0,ye=I,k|0)):(k=6,ye=I,k|0)}function Lo(A,s,l){A=A|0,s=s|0,l=l|0;var f=0,m=0;f=ye,ye=ye+16|0,m=f,Ro(A,s,l,m),Hn(m,l+4|0),ye=f}function Ro(A,s,l,f){A=A|0,s=s|0,l=l|0,f=f|0;var m=0,k=0,I=0,D=0,Q=0;if(D=ye,ye=ye+16|0,Q=D,al(A,l,Q),k=+Dr(+(1-+K[Q>>3]*.5)),k<1e-16){t[f>>2]=0,t[f+4>>2]=0,t[f+8>>2]=0,t[f+12>>2]=0,ye=D;return}if(Q=t[l>>2]|0,m=+K[15920+(Q*24|0)>>3],m=+Ys(m-+Ys(+An(15600+(Q<<4)|0,A))),Tr(s)|0?I=+Ys(m+-.3334731722518321):I=m,m=+oi(+k)/.381966011250105,(s|0)>0){A=0;do m=m*2.6457513110645907,A=A+1|0;while((A|0)!=(s|0))}k=+$t(+I)*m,K[f>>3]=k,I=+sn(+I)*m,K[f+8>>3]=I,ye=D}function al(A,s,l){A=A|0,s=s|0,l=l|0;var f=0,m=0,k=0;if(k=ye,ye=ye+32|0,m=k,Ni(A,m),t[s>>2]=0,K[l>>3]=5,f=+ii(16400,m),f<+K[l>>3]&&(t[s>>2]=0,K[l>>3]=f),f=+ii(16424,m),f<+K[l>>3]&&(t[s>>2]=1,K[l>>3]=f),f=+ii(16448,m),f<+K[l>>3]&&(t[s>>2]=2,K[l>>3]=f),f=+ii(16472,m),f<+K[l>>3]&&(t[s>>2]=3,K[l>>3]=f),f=+ii(16496,m),f<+K[l>>3]&&(t[s>>2]=4,K[l>>3]=f),f=+ii(16520,m),f<+K[l>>3]&&(t[s>>2]=5,K[l>>3]=f),f=+ii(16544,m),f<+K[l>>3]&&(t[s>>2]=6,K[l>>3]=f),f=+ii(16568,m),f<+K[l>>3]&&(t[s>>2]=7,K[l>>3]=f),f=+ii(16592,m),f<+K[l>>3]&&(t[s>>2]=8,K[l>>3]=f),f=+ii(16616,m),f<+K[l>>3]&&(t[s>>2]=9,K[l>>3]=f),f=+ii(16640,m),f<+K[l>>3]&&(t[s>>2]=10,K[l>>3]=f),f=+ii(16664,m),f<+K[l>>3]&&(t[s>>2]=11,K[l>>3]=f),f=+ii(16688,m),f<+K[l>>3]&&(t[s>>2]=12,K[l>>3]=f),f=+ii(16712,m),f<+K[l>>3]&&(t[s>>2]=13,K[l>>3]=f),f=+ii(16736,m),f<+K[l>>3]&&(t[s>>2]=14,K[l>>3]=f),f=+ii(16760,m),f<+K[l>>3]&&(t[s>>2]=15,K[l>>3]=f),f=+ii(16784,m),f<+K[l>>3]&&(t[s>>2]=16,K[l>>3]=f),f=+ii(16808,m),f<+K[l>>3]&&(t[s>>2]=17,K[l>>3]=f),f=+ii(16832,m),f<+K[l>>3]&&(t[s>>2]=18,K[l>>3]=f),f=+ii(16856,m),!(f<+K[l>>3])){ye=k;return}t[s>>2]=19,K[l>>3]=f,ye=k}function ai(A,s,l,f,m){A=A|0,s=s|0,l=l|0,f=f|0,m=m|0;var k=0,I=0;if(k=+ja(A),k<1e-16){s=15600+(s<<4)|0,t[m>>2]=t[s>>2],t[m+4>>2]=t[s+4>>2],t[m+8>>2]=t[s+8>>2],t[m+12>>2]=t[s+12>>2];return}if(I=+yr(+ +K[A+8>>3],+ +K[A>>3]),(l|0)>0){A=0;do k=k/2.6457513110645907,A=A+1|0;while((A|0)!=(l|0))}f?(k=k/3,l=(Tr(l)|0)==0,k=+kr(+((l?k:k/2.6457513110645907)*.381966011250105))):(k=+kr(+(k*.381966011250105)),Tr(l)|0&&(I=+Ys(I+.3334731722518321))),Fn(15600+(s<<4)|0,+Ys(+K[15920+(s*24|0)>>3]-I),k,m)}function Qi(A,s,l){A=A|0,s=s|0,l=l|0;var f=0,m=0;f=ye,ye=ye+16|0,m=f,fr(A+4|0,m),ai(m,t[A>>2]|0,s,0,l),ye=f}function Zs(A,s,l,f,m){A=A|0,s=s|0,l=l|0,f=f|0,m=m|0;var k=0,I=0,D=0,Q=0,Z=0,X=0,ie=0,Ae=0,ce=0,fe=0,ve=0,Ne=0,qe=0,Pe=0,Ve=0,Ue=0,Mt=0,ht=0,_t=0,gt=0,Mn=0,cn=0,Yt=0,tn=0,fn=0,an=0,Wn=0,bn=0;if(an=ye,ye=ye+272|0,k=an+256|0,Pe=an+240|0,Yt=an,tn=an+224|0,fn=an+208|0,Ve=an+176|0,Ue=an+160|0,Mt=an+192|0,ht=an+144|0,_t=an+128|0,gt=an+112|0,Mn=an+96|0,cn=an+80|0,t[k>>2]=s,t[Pe>>2]=t[A>>2],t[Pe+4>>2]=t[A+4>>2],t[Pe+8>>2]=t[A+8>>2],t[Pe+12>>2]=t[A+12>>2],ni(Pe,k,Yt),t[m>>2]=0,Pe=f+l+((f|0)==5&1)|0,(Pe|0)<=(l|0)){ye=an;return}Q=t[k>>2]|0,Z=tn+4|0,X=Ve+4|0,ie=l+5|0,Ae=16880+(Q<<2)|0,ce=16960+(Q<<2)|0,fe=_t+8|0,ve=gt+8|0,Ne=Mn+8|0,qe=fn+4|0,D=l;e:for(;;){I=Yt+(((D|0)%5|0)<<4)|0,t[fn>>2]=t[I>>2],t[fn+4>>2]=t[I+4>>2],t[fn+8>>2]=t[I+8>>2],t[fn+12>>2]=t[I+12>>2];do;while((dA(fn,Q,0,1)|0)==2);if((D|0)>(l|0)&(Tr(s)|0)!=0){if(t[Ve>>2]=t[fn>>2],t[Ve+4>>2]=t[fn+4>>2],t[Ve+8>>2]=t[fn+8>>2],t[Ve+12>>2]=t[fn+12>>2],fr(Z,Ue),f=t[Ve>>2]|0,k=t[17040+(f*80|0)+(t[tn>>2]<<2)>>2]|0,t[Ve>>2]=t[18640+(f*80|0)+(k*20|0)>>2],I=t[18640+(f*80|0)+(k*20|0)+16>>2]|0,(I|0)>0){A=0;do _a(X),A=A+1|0;while((A|0)<(I|0))}switch(I=18640+(f*80|0)+(k*20|0)+4|0,t[Mt>>2]=t[I>>2],t[Mt+4>>2]=t[I+4>>2],t[Mt+8>>2]=t[I+8>>2],Do(Mt,(t[Ae>>2]|0)*3|0),Fi(X,Mt,X),gi(X),fr(X,ht),Wn=+(t[ce>>2]|0),K[_t>>3]=Wn*3,K[fe>>3]=0,bn=Wn*-1.5,K[gt>>3]=bn,K[ve>>3]=Wn*2.598076211353316,K[Mn>>3]=bn,K[Ne>>3]=Wn*-2.598076211353316,t[17040+((t[Ve>>2]|0)*80|0)+(t[fn>>2]<<2)>>2]|0){case 1:{A=gt,f=_t;break}case 3:{A=Mn,f=gt;break}case 2:{A=_t,f=Mn;break}default:{A=12;break e}}Qo(Ue,ht,f,A,cn),ai(cn,t[Ve>>2]|0,Q,1,m+8+(t[m>>2]<<4)|0),t[m>>2]=(t[m>>2]|0)+1}if((D|0)<(ie|0)&&(fr(qe,Ve),ai(Ve,t[fn>>2]|0,Q,1,m+8+(t[m>>2]<<4)|0),t[m>>2]=(t[m>>2]|0)+1),t[tn>>2]=t[fn>>2],t[tn+4>>2]=t[fn+4>>2],t[tn+8>>2]=t[fn+8>>2],t[tn+12>>2]=t[fn+12>>2],D=D+1|0,(D|0)>=(Pe|0)){A=3;break}}if((A|0)==3){ye=an;return}else(A|0)==12&&kn(22522,22569,571,22579)}function ni(A,s,l){A=A|0,s=s|0,l=l|0;var f=0,m=0,k=0,I=0,D=0,Q=0;Q=ye,ye=ye+128|0,f=Q+64|0,m=Q,k=f,I=20240,D=k+60|0;do t[k>>2]=t[I>>2],k=k+4|0,I=I+4|0;while((k|0)<(D|0));k=m,I=20304,D=k+60|0;do t[k>>2]=t[I>>2],k=k+4|0,I=I+4|0;while((k|0)<(D|0));D=(Tr(t[s>>2]|0)|0)==0,f=D?f:m,m=A+4|0,ol(m),Na(m),Tr(t[s>>2]|0)|0&&(zr(m),t[s>>2]=(t[s>>2]|0)+1),t[l>>2]=t[A>>2],s=l+4|0,Fi(m,f,s),gi(s),t[l+16>>2]=t[A>>2],s=l+20|0,Fi(m,f+12|0,s),gi(s),t[l+32>>2]=t[A>>2],s=l+36|0,Fi(m,f+24|0,s),gi(s),t[l+48>>2]=t[A>>2],s=l+52|0,Fi(m,f+36|0,s),gi(s),t[l+64>>2]=t[A>>2],l=l+68|0,Fi(m,f+48|0,l),gi(l),ye=Q}function dA(A,s,l,f){A=A|0,s=s|0,l=l|0,f=f|0;var m=0,k=0,I=0,D=0,Q=0,Z=0,X=0,ie=0,Ae=0,ce=0,fe=0;if(fe=ye,ye=ye+32|0,Ae=fe+12|0,D=fe,ce=A+4|0,ie=t[16960+(s<<2)>>2]|0,X=(f|0)!=0,ie=X?ie*3|0:ie,m=t[ce>>2]|0,Z=A+8|0,I=t[Z>>2]|0,X){if(k=A+12|0,f=t[k>>2]|0,m=I+m+f|0,(m|0)==(ie|0))return ce=1,ye=fe,ce|0;Q=k}else Q=A+12|0,f=t[Q>>2]|0,m=I+m+f|0;if((m|0)<=(ie|0))return ce=0,ye=fe,ce|0;do if((f|0)>0){if(f=t[A>>2]|0,(I|0)>0){k=18640+(f*80|0)+60|0,f=A;break}f=18640+(f*80|0)+40|0,l?(Rn(Ae,ie,0,0),qs(ce,Ae,D),VA(D),Fi(D,Ae,ce),k=f,f=A):(k=f,f=A)}else k=18640+((t[A>>2]|0)*80|0)+20|0,f=A;while(!1);if(t[f>>2]=t[k>>2],m=k+16|0,(t[m>>2]|0)>0){f=0;do _a(ce),f=f+1|0;while((f|0)<(t[m>>2]|0))}return A=k+4|0,t[Ae>>2]=t[A>>2],t[Ae+4>>2]=t[A+4>>2],t[Ae+8>>2]=t[A+8>>2],s=t[16880+(s<<2)>>2]|0,Do(Ae,X?s*3|0:s),Fi(ce,Ae,ce),gi(ce),X?f=((t[Z>>2]|0)+(t[ce>>2]|0)+(t[Q>>2]|0)|0)==(ie|0)?1:2:f=2,ce=f,ye=fe,ce|0}function Ji(A,s){A=A|0,s=s|0;var l=0;do l=dA(A,s,0,1)|0;while((l|0)==2);return l|0}function Bi(A,s,l,f,m){A=A|0,s=s|0,l=l|0,f=f|0,m=m|0;var k=0,I=0,D=0,Q=0,Z=0,X=0,ie=0,Ae=0,ce=0,fe=0,ve=0,Ne=0,qe=0,Pe=0,Ve=0,Ue=0,Mt=0,ht=0,_t=0,gt=0,Mn=0,cn=0,Yt=0;if(Mn=ye,ye=ye+240|0,k=Mn+224|0,Mt=Mn+208|0,ht=Mn,_t=Mn+192|0,gt=Mn+176|0,Ne=Mn+160|0,qe=Mn+144|0,Pe=Mn+128|0,Ve=Mn+112|0,Ue=Mn+96|0,t[k>>2]=s,t[Mt>>2]=t[A>>2],t[Mt+4>>2]=t[A+4>>2],t[Mt+8>>2]=t[A+8>>2],t[Mt+12>>2]=t[A+12>>2],pA(Mt,k,ht),t[m>>2]=0,ve=f+l+((f|0)==6&1)|0,(ve|0)<=(l|0)){ye=Mn;return}Q=t[k>>2]|0,Z=l+6|0,X=16960+(Q<<2)|0,ie=qe+8|0,Ae=Pe+8|0,ce=Ve+8|0,fe=_t+4|0,I=0,D=l,f=-1;e:for(;;){if(k=(D|0)%6|0,A=ht+(k<<4)|0,t[_t>>2]=t[A>>2],t[_t+4>>2]=t[A+4>>2],t[_t+8>>2]=t[A+8>>2],t[_t+12>>2]=t[A+12>>2],A=I,I=dA(_t,Q,0,1)|0,(D|0)>(l|0)&(Tr(s)|0)!=0&&(A|0)!=1&&(t[_t>>2]|0)!=(f|0)){switch(fr(ht+(((k+5|0)%6|0)<<4)+4|0,gt),fr(ht+(k<<4)+4|0,Ne),cn=+(t[X>>2]|0),K[qe>>3]=cn*3,K[ie>>3]=0,Yt=cn*-1.5,K[Pe>>3]=Yt,K[Ae>>3]=cn*2.598076211353316,K[Ve>>3]=Yt,K[ce>>3]=cn*-2.598076211353316,k=t[Mt>>2]|0,t[17040+(k*80|0)+(((f|0)==(k|0)?t[_t>>2]|0:f)<<2)>>2]|0){case 1:{A=Pe,f=qe;break}case 3:{A=Ve,f=Pe;break}case 2:{A=qe,f=Ve;break}default:{A=8;break e}}Qo(gt,Ne,f,A,Ue),!(Wa(gt,Ue)|0)&&!(Wa(Ne,Ue)|0)&&(ai(Ue,t[Mt>>2]|0,Q,1,m+8+(t[m>>2]<<4)|0),t[m>>2]=(t[m>>2]|0)+1)}if((D|0)<(Z|0)&&(fr(fe,gt),ai(gt,t[_t>>2]|0,Q,1,m+8+(t[m>>2]<<4)|0),t[m>>2]=(t[m>>2]|0)+1),D=D+1|0,(D|0)>=(ve|0)){A=3;break}else f=t[_t>>2]|0}if((A|0)==3){ye=Mn;return}else(A|0)==8&&kn(22606,22569,736,22651)}function pA(A,s,l){A=A|0,s=s|0,l=l|0;var f=0,m=0,k=0,I=0,D=0,Q=0;Q=ye,ye=ye+160|0,f=Q+80|0,m=Q,k=f,I=20368,D=k+72|0;do t[k>>2]=t[I>>2],k=k+4|0,I=I+4|0;while((k|0)<(D|0));k=m,I=20448,D=k+72|0;do t[k>>2]=t[I>>2],k=k+4|0,I=I+4|0;while((k|0)<(D|0));D=(Tr(t[s>>2]|0)|0)==0,f=D?f:m,m=A+4|0,ol(m),Na(m),Tr(t[s>>2]|0)|0&&(zr(m),t[s>>2]=(t[s>>2]|0)+1),t[l>>2]=t[A>>2],s=l+4|0,Fi(m,f,s),gi(s),t[l+16>>2]=t[A>>2],s=l+20|0,Fi(m,f+12|0,s),gi(s),t[l+32>>2]=t[A>>2],s=l+36|0,Fi(m,f+24|0,s),gi(s),t[l+48>>2]=t[A>>2],s=l+52|0,Fi(m,f+36|0,s),gi(s),t[l+64>>2]=t[A>>2],s=l+68|0,Fi(m,f+48|0,s),gi(s),t[l+80>>2]=t[A>>2],l=l+84|0,Fi(m,f+60|0,l),gi(l),ye=Q}function ll(A,s){return A=A|0,s=s|0,s=Ee(A|0,s|0,52)|0,Te()|0,s&15|0}function Ua(A,s){return A=A|0,s=s|0,s=Ee(A|0,s|0,45)|0,Te()|0,s&127|0}function Hs(A,s){A=A|0,s=s|0;var l=0,f=0,m=0,k=0,I=0,D=0;if(!(!0&(s&-16777216|0)==134217728)||(I=Ee(A|0,s|0,45)|0,Te()|0,I=I&127,I>>>0>121))return s=0,s|0;l=Ee(A|0,s|0,52)|0,Te()|0,l=l&15;do if(l|0){for(m=1,f=0;;){if(k=Ee(A|0,s|0,(15-m|0)*3|0)|0,Te()|0,k=k&7,(k|0)!=0&(f^1))if((k|0)==1&(Ri(I)|0)!=0){D=0,f=13;break}else f=1;if((k|0)==7){D=0,f=13;break}if(m>>>0<l>>>0)m=m+1|0;else{f=9;break}}if((f|0)==9){if((l|0)==15)D=1;else break;return D|0}else if((f|0)==13)return D|0}while(!1);for(;;){if(D=Ee(A|0,s|0,(14-l|0)*3|0)|0,Te()|0,!((D&7|0)==7&!0)){D=0,f=13;break}if(l>>>0<14)l=l+1|0;else{D=1,f=13;break}}return(f|0)==13?D|0:0}function $s(A,s,l,f){A=A|0,s=s|0,l=l|0,f=f|0;var m=0,k=0;if(k=Ee(A|0,s|0,52)|0,Te()|0,k=k&15,l>>>0>15)return f=4,f|0;if((k|0)<(l|0))return f=12,f|0;if((k|0)==(l|0))return t[f>>2]=A,t[f+4>>2]=s,f=0,f|0;if(m=Se(l|0,0,52)|0,m=m|A,A=Te()|0|s&-15728641,(k|0)>(l|0))do s=Se(7,0,(14-l|0)*3|0)|0,l=l+1|0,m=s|m,A=Te()|0|A;while((l|0)<(k|0));return t[f>>2]=m,t[f+4>>2]=A,f=0,f|0}function Fo(A,s,l,f){A=A|0,s=s|0,l=l|0,f=f|0;var m=0,k=0,I=0;if(k=Ee(A|0,s|0,52)|0,Te()|0,k=k&15,!((l|0)<16&(k|0)<=(l|0)))return f=4,f|0;m=l-k|0,l=Ee(A|0,s|0,45)|0,Te()|0;e:do if(!(Ri(l&127)|0))l=Ds(7,0,m,((m|0)<0)<<31>>31)|0,m=Te()|0;else{t:do if(k|0){for(l=1;I=Se(7,0,(15-l|0)*3|0)|0,!!((I&A|0)==0&((Te()|0)&s|0)==0);)if(l>>>0<k>>>0)l=l+1|0;else break t;l=Ds(7,0,m,((m|0)<0)<<31>>31)|0,m=Te()|0;break e}while(!1);l=Ds(7,0,m,((m|0)<0)<<31>>31)|0,l=te(l|0,Te()|0,5,0)|0,l=v(l|0,Te()|0,-5,-1)|0,l=N(l|0,Te()|0,6,0)|0,l=v(l|0,Te()|0,1,0)|0,m=Te()|0}while(!1);return I=f,t[I>>2]=l,t[I+4>>2]=m,I=0,I|0}function Si(A,s){A=A|0,s=s|0;var l=0,f=0,m=0;if(m=Ee(A|0,s|0,45)|0,Te()|0,!(Ri(m&127)|0))return m=0,m|0;m=Ee(A|0,s|0,52)|0,Te()|0,m=m&15;e:do if(!m)l=0;else for(f=1;;){if(l=Ee(A|0,s|0,(15-f|0)*3|0)|0,Te()|0,l=l&7,l|0)break e;if(f>>>0<m>>>0)f=f+1|0;else{l=0;break}}while(!1);return m=(l|0)==0&1,m|0}function Kr(A,s,l,f){A=A|0,s=s|0,l=l|0,f=f|0;var m=0,k=0,I=0,D=0;if(I=ye,ye=ye+16|0,k=I,Ga(k,A,s,l),s=k,A=t[s>>2]|0,s=t[s+4>>2]|0,(A|0)==0&(s|0)==0)return ye=I,0;m=0,l=0;do D=f+(m<<3)|0,t[D>>2]=A,t[D+4>>2]=s,m=v(m|0,l|0,1,0)|0,l=Te()|0,ul(k),D=k,A=t[D>>2]|0,s=t[D+4>>2]|0;while(!((A|0)==0&(s|0)==0));return ye=I,0}function js(A,s,l,f){return A=A|0,s=s|0,l=l|0,f=f|0,(f|0)<(l|0)?(l=s,f=A,Xt(l|0),f|0):(l=Se(-1,-1,((f-l|0)*3|0)+3|0)|0,f=Se(~l|0,~(Te()|0)|0,(15-f|0)*3|0)|0,l=~(Te()|0)&s,f=~f&A,Xt(l|0),f|0)}function cs(A,s,l,f){A=A|0,s=s|0,l=l|0,f=f|0;var m=0;return m=Ee(A|0,s|0,52)|0,Te()|0,m=m&15,(l|0)<16&(m|0)<=(l|0)?((m|0)<(l|0)&&(m=Se(-1,-1,((l+-1-m|0)*3|0)+3|0)|0,m=Se(~m|0,~(Te()|0)|0,(15-l|0)*3|0)|0,s=~(Te()|0)&s,A=~m&A),m=Se(l|0,0,52)|0,l=s&-15728641|(Te()|0),t[f>>2]=A|m,t[f+4>>2]=l,f=0,f|0):(f=4,f|0)}function Ws(A,s,l,f){A=A|0,s=s|0,l=l|0,f=f|0;var m=0,k=0,I=0,D=0,Q=0,Z=0,X=0,ie=0,Ae=0,ce=0,fe=0,ve=0,Ne=0,qe=0,Pe=0,Ve=0,Ue=0,Mt=0,ht=0,_t=0,gt=0;if((l|0)==0&(f|0)==0)return _t=0,_t|0;if(m=A,k=t[m>>2]|0,m=t[m+4>>2]|0,!0&(m&15728640|0)==0){if(!((f|0)>0|(f|0)==0&l>>>0>0)||(_t=s,t[_t>>2]=k,t[_t+4>>2]=m,(l|0)==1&(f|0)==0))return _t=0,_t|0;m=1;do Mt=A+(m<<3)|0,ht=t[Mt+4>>2]|0,_t=s+(m<<3)|0,t[_t>>2]=t[Mt>>2],t[_t+4>>2]=ht,m=m+1|0;while(0<(f|0)|(f|0)==0&m>>>0<l>>>0);return m=0,m|0}if(Ue=l<<3,ht=Vi(Ue)|0,!ht)return _t=13,_t|0;if(b(ht|0,A|0,Ue|0)|0,Mt=y(l,8)|0,!Mt)return p(ht),_t=13,_t|0;e:do if(l|0){t:for(;;){m=ht,qe=t[m>>2]|0,m=t[m+4>>2]|0,Pe=Ee(qe|0,m|0,52)|0,Te()|0,Pe=Pe&15,Ve=Pe+-1|0,Ne=(l|0)>0;n:do if((Pe|0)!=0&Ne){if(ce=((l|0)<0)<<31>>31,fe=Se(Ve|0,0,52)|0,ve=Te()|0,Ve>>>0>15){if(!((qe|0)==0&(m|0)==0)){_t=17;break t}for(k=0;;){if(k=k+1|0,(k|0)>=(l|0))break n;if(f=ht+(k<<3)|0,ve=t[f>>2]|0,f=t[f+4>>2]|0,!((ve|0)==0&(f|0)==0)){m=f,_t=17;break t}}}for(k=0,A=qe,f=m;;){if(!((A|0)==0&(f|0)==0)){if(!(!0&(f&117440512|0)==0)){_t=22;break t}if(D=Ee(A|0,f|0,52)|0,Te()|0,D=D&15,(D|0)<(Ve|0)){m=12,_t=28;break t}if((D|0)!=(Ve|0)&&(A=A|fe,f=f&-15728641|ve,D>>>0>=Pe>>>0)){I=Ve;do Ae=Se(7,0,(14-I|0)*3|0)|0,I=I+1|0,A=Ae|A,f=Te()|0|f;while(I>>>0<D>>>0)}if(I=pe(A|0,f|0,l|0,ce|0)|0,Te()|0,Z=Mt+(I<<3)|0,D=Z,Q=t[D>>2]|0,D=t[D+4>>2]|0,(Q|0)==0&(D|0)==0)I=Z;else for(Ae=0;;){if((Ae|0)>(l|0)){_t=32;break t}if((Q|0)==(A|0)&(D&-117440513|0)==(f|0)){X=Ee(Q|0,D|0,56)|0,Te()|0,X=X&7,ie=X+1|0,gt=Ee(Q|0,D|0,45)|0,Te()|0;i:do if(!(Ri(gt&127)|0))D=7;else{if(Q=Ee(Q|0,D|0,52)|0,Te()|0,Q=Q&15,!Q){D=6;break}for(D=1;;){if(gt=Se(7,0,(15-D|0)*3|0)|0,!((gt&A|0)==0&((Te()|0)&f|0)==0)){D=7;break i}if(D>>>0<Q>>>0)D=D+1|0;else{D=6;break}}}while(!1);if((X+2|0)>>>0>D>>>0){_t=42;break t}gt=Se(ie|0,0,56)|0,f=Te()|0|f&-117440513,ie=Z,t[ie>>2]=0,t[ie+4>>2]=0,A=gt|A}else I=(I+1|0)%(l|0)|0;if(Z=Mt+(I<<3)|0,D=Z,Q=t[D>>2]|0,D=t[D+4>>2]|0,(Q|0)==0&(D|0)==0){I=Z;break}else Ae=Ae+1|0}gt=I,t[gt>>2]=A,t[gt+4>>2]=f}if(k=k+1|0,(k|0)>=(l|0))break n;f=ht+(k<<3)|0,A=t[f>>2]|0,f=t[f+4>>2]|0}}while(!1);if((l+5|0)>>>0<11){_t=85;break}if(ve=y((l|0)/6|0,8)|0,!ve){_t=49;break}n:do if(Ne){Ae=0,ie=0;do{if(D=Mt+(Ae<<3)|0,f=D,k=t[f>>2]|0,f=t[f+4>>2]|0,!((k|0)==0&(f|0)==0)){Q=Ee(k|0,f|0,56)|0,Te()|0,Q=Q&7,A=Q+1|0,Z=f&-117440513,gt=Ee(k|0,f|0,45)|0,Te()|0;i:do if(Ri(gt&127)|0){if(X=Ee(k|0,f|0,52)|0,Te()|0,X=X&15,X|0)for(I=1;;){if(gt=Se(7,0,(15-I|0)*3|0)|0,!((k&gt|0)==0&(Z&(Te()|0)|0)==0))break i;if(I>>>0<X>>>0)I=I+1|0;else break}f=Se(A|0,0,56)|0,k=f|k,f=Te()|0|Z,A=D,t[A>>2]=k,t[A+4>>2]=f,A=Q+2|0}while(!1);(A|0)==7&&(gt=ve+(ie<<3)|0,t[gt>>2]=k,t[gt+4>>2]=f&-117440513,ie=ie+1|0)}Ae=Ae+1|0}while((Ae|0)!=(l|0));if(Ne){if(Ae=((l|0)<0)<<31>>31,ce=Se(Ve|0,0,52)|0,fe=Te()|0,Ve>>>0>15){if(!((qe|0)==0&(m|0)==0)){m=4,_t=84;break t}for(m=0;;){if(m=m+1|0,(m|0)>=(l|0)){k=0,m=ie;break n}if(gt=ht+(m<<3)|0,!((t[gt>>2]|0)==0&(t[gt+4>>2]|0)==0)){m=4,_t=84;break t}}}for(X=0,k=0,Z=qe;;){do if(!((Z|0)==0&(m|0)==0)){if(D=Ee(Z|0,m|0,52)|0,Te()|0,D=D&15,(D|0)<(Ve|0)){m=12,_t=84;break t}do if((D|0)==(Ve|0))f=Z,D=m;else{if(f=Z|ce,A=m&-15728641|fe,D>>>0<Pe>>>0){D=A;break}I=Ve;do gt=Se(7,0,(14-I|0)*3|0)|0,I=I+1|0,f=gt|f,A=Te()|0|A;while(I>>>0<D>>>0);D=A}while(!1);for(I=pe(f|0,D|0,l|0,Ae|0)|0,Te()|0,A=0;;){if((A|0)>(l|0)){_t=77;break t}if(gt=Mt+(I<<3)|0,Q=t[gt+4>>2]|0,(Q&-117440513|0)==(D|0)&&(t[gt>>2]|0)==(f|0)){_t=79;break}if(I=(I+1|0)%(l|0)|0,gt=Mt+(I<<3)|0,(t[gt>>2]|0)==(f|0)&&(t[gt+4>>2]|0)==(D|0))break;A=A+1|0}if((_t|0)==79&&(_t=0,!0&(Q&117440512|0)==100663296))break;gt=s+(k<<3)|0,t[gt>>2]=Z,t[gt+4>>2]=m,k=k+1|0}while(!1);if(m=X+1|0,(m|0)>=(l|0)){m=ie;break n}gt=ht+(m<<3)|0,X=m,Z=t[gt>>2]|0,m=t[gt+4>>2]|0}}else k=0,m=ie}else k=0,m=0;while(!1);if(E(Mt|0,0,Ue|0)|0,b(ht|0,ve|0,m<<3|0)|0,p(ve),m)s=s+(k<<3)|0,l=m;else break e}if((_t|0)==17)!0&(m&117440512|0)==0?(m=4,_t=28):_t=22;else if((_t|0)==32)kn(23313,22674,362,22684);else{if((_t|0)==42)return p(ht),p(Mt),gt=10,gt|0;if((_t|0)==49)return p(ht),p(Mt),gt=13,gt|0;if((_t|0)==77)kn(23313,22674,462,22684);else{if((_t|0)==84)return p(ve),p(ht),p(Mt),gt=m,gt|0;if((_t|0)==85){b(s|0,ht|0,l<<3|0)|0;break}}}if((_t|0)==22)return p(ht),p(Mt),gt=5,gt|0;if((_t|0)==28)return p(ht),p(Mt),gt=m,gt|0}while(!1);return p(ht),p(Mt),gt=0,gt|0}function Nl(A,s,l,f,m,k,I){A=A|0,s=s|0,l=l|0,f=f|0,m=m|0,k=k|0,I=I|0;var D=0,Q=0,Z=0,X=0,ie=0,Ae=0,ce=0,fe=0,ve=0;if(ve=ye,ye=ye+16|0,fe=ve,!((l|0)>0|(l|0)==0&s>>>0>0))return fe=0,ye=ve,fe|0;if((I|0)>=16)return fe=12,ye=ve,fe|0;Ae=0,ce=0,ie=0,D=0;e:for(;;){if(Z=A+(Ae<<3)|0,Q=t[Z>>2]|0,Z=t[Z+4>>2]|0,X=Ee(Q|0,Z|0,52)|0,Te()|0,(X&15|0)>(I|0)){D=12,Q=11;break}if(Ga(fe,Q,Z,I),X=fe,Z=t[X>>2]|0,X=t[X+4>>2]|0,(Z|0)==0&(X|0)==0)Q=ie;else{Q=ie;do{if(!((D|0)<(k|0)|(D|0)==(k|0)&Q>>>0<m>>>0)){Q=10;break e}ie=f+(Q<<3)|0,t[ie>>2]=Z,t[ie+4>>2]=X,Q=v(Q|0,D|0,1,0)|0,D=Te()|0,ul(fe),ie=fe,Z=t[ie>>2]|0,X=t[ie+4>>2]|0}while(!((Z|0)==0&(X|0)==0))}if(Ae=v(Ae|0,ce|0,1,0)|0,ce=Te()|0,(ce|0)<(l|0)|(ce|0)==(l|0)&Ae>>>0<s>>>0)ie=Q;else{D=0,Q=11;break}}return(Q|0)==10?(fe=14,ye=ve,fe|0):(Q|0)==11?(ye=ve,D|0):0}function qr(A,s,l,f,m){A=A|0,s=s|0,l=l|0,f=f|0,m=m|0;var k=0,I=0,D=0,Q=0,Z=0,X=0,ie=0,Ae=0;Ae=ye,ye=ye+16|0,ie=Ae;e:do if((l|0)>0|(l|0)==0&s>>>0>0){for(Z=0,I=0,k=0,X=0;;){if(Q=A+(Z<<3)|0,D=t[Q>>2]|0,Q=t[Q+4>>2]|0,!((D|0)==0&(Q|0)==0)&&(Q=(Fo(D,Q,f,ie)|0)==0,D=ie,I=v(t[D>>2]|0,t[D+4>>2]|0,I|0,k|0)|0,k=Te()|0,!Q)){k=12;break}if(Z=v(Z|0,X|0,1,0)|0,X=Te()|0,!((X|0)<(l|0)|(X|0)==(l|0)&Z>>>0<s>>>0))break e}return ye=Ae,k|0}else I=0,k=0;while(!1);return t[m>>2]=I,t[m+4>>2]=k,m=0,ye=Ae,m|0}function Mr(A,s){return A=A|0,s=s|0,s=Ee(A|0,s|0,52)|0,Te()|0,s&1|0}function Jr(A,s){A=A|0,s=s|0;var l=0,f=0,m=0;if(m=Ee(A|0,s|0,52)|0,Te()|0,m=m&15,!m)return m=0,m|0;for(f=1;;){if(l=Ee(A|0,s|0,(15-f|0)*3|0)|0,Te()|0,l=l&7,l|0){f=5;break}if(f>>>0<m>>>0)f=f+1|0;else{l=0,f=5;break}}return(f|0)==5?l|0:0}function Oo(A,s){A=A|0,s=s|0;var l=0,f=0,m=0,k=0,I=0,D=0,Q=0;if(Q=Ee(A|0,s|0,52)|0,Te()|0,Q=Q&15,!Q)return D=s,Q=A,Xt(D|0),Q|0;for(D=1,l=0;;){k=(15-D|0)*3|0,f=Se(7,0,k|0)|0,m=Te()|0,I=Ee(A|0,s|0,k|0)|0,Te()|0,k=Se(as(I&7)|0,0,k|0)|0,I=Te()|0,A=k|A&~f,s=I|s&~m;e:do if(!l)if((k&f|0)==0&(I&m|0)==0)l=0;else if(f=Ee(A|0,s|0,52)|0,Te()|0,f=f&15,!f)l=1;else{l=1;t:for(;;){switch(I=Ee(A|0,s|0,(15-l|0)*3|0)|0,Te()|0,I&7){case 1:break t;case 0:break;default:{l=1;break e}}if(l>>>0<f>>>0)l=l+1|0;else{l=1;break e}}for(l=1;;)if(I=(15-l|0)*3|0,m=Ee(A|0,s|0,I|0)|0,Te()|0,k=Se(7,0,I|0)|0,s=s&~(Te()|0),I=Se(as(m&7)|0,0,I|0)|0,A=A&~k|I,s=s|(Te()|0),l>>>0<f>>>0)l=l+1|0;else{l=1;break}}while(!1);if(D>>>0<Q>>>0)D=D+1|0;else break}return Xt(s|0),A|0}function Bs(A,s){A=A|0,s=s|0;var l=0,f=0,m=0,k=0,I=0;if(f=Ee(A|0,s|0,52)|0,Te()|0,f=f&15,!f)return l=s,f=A,Xt(l|0),f|0;for(l=1;k=(15-l|0)*3|0,I=Ee(A|0,s|0,k|0)|0,Te()|0,m=Se(7,0,k|0)|0,s=s&~(Te()|0),k=Se(as(I&7)|0,0,k|0)|0,A=k|A&~m,s=Te()|0|s,l>>>0<f>>>0;)l=l+1|0;return Xt(s|0),A|0}function uo(A,s){A=A|0,s=s|0;var l=0,f=0,m=0,k=0,I=0,D=0,Q=0;if(Q=Ee(A|0,s|0,52)|0,Te()|0,Q=Q&15,!Q)return D=s,Q=A,Xt(D|0),Q|0;for(D=1,l=0;;){k=(15-D|0)*3|0,f=Se(7,0,k|0)|0,m=Te()|0,I=Ee(A|0,s|0,k|0)|0,Te()|0,k=Se(Ss(I&7)|0,0,k|0)|0,I=Te()|0,A=k|A&~f,s=I|s&~m;e:do if(!l)if((k&f|0)==0&(I&m|0)==0)l=0;else if(f=Ee(A|0,s|0,52)|0,Te()|0,f=f&15,!f)l=1;else{l=1;t:for(;;){switch(I=Ee(A|0,s|0,(15-l|0)*3|0)|0,Te()|0,I&7){case 1:break t;case 0:break;default:{l=1;break e}}if(l>>>0<f>>>0)l=l+1|0;else{l=1;break e}}for(l=1;;)if(m=(15-l|0)*3|0,k=Se(7,0,m|0)|0,I=s&~(Te()|0),s=Ee(A|0,s|0,m|0)|0,Te()|0,s=Se(Ss(s&7)|0,0,m|0)|0,A=A&~k|s,s=I|(Te()|0),l>>>0<f>>>0)l=l+1|0;else{l=1;break}}while(!1);if(D>>>0<Q>>>0)D=D+1|0;else break}return Xt(s|0),A|0}function Qa(A,s){A=A|0,s=s|0;var l=0,f=0,m=0,k=0,I=0;if(f=Ee(A|0,s|0,52)|0,Te()|0,f=f&15,!f)return l=s,f=A,Xt(l|0),f|0;for(l=1;I=(15-l|0)*3|0,k=Se(7,0,I|0)|0,m=s&~(Te()|0),s=Ee(A|0,s|0,I|0)|0,Te()|0,s=Se(Ss(s&7)|0,0,I|0)|0,A=s|A&~k,s=Te()|0|m,l>>>0<f>>>0;)l=l+1|0;return Xt(s|0),A|0}function Rr(A,s){A=A|0,s=s|0;var l=0,f=0,m=0,k=0,I=0,D=0,Q=0,Z=0,X=0;if(Q=ye,ye=ye+64|0,D=Q+40|0,f=Q+24|0,m=Q+12|0,k=Q,Se(s|0,0,52)|0,l=Te()|0|134225919,!s)return(t[A+4>>2]|0)>2||(t[A+8>>2]|0)>2||(t[A+12>>2]|0)>2?(I=0,D=0,Xt(I|0),ye=Q,D|0):(Se(da(A)|0,0,45)|0,I=Te()|0|l,D=-1,Xt(I|0),ye=Q,D|0);if(t[D>>2]=t[A>>2],t[D+4>>2]=t[A+4>>2],t[D+8>>2]=t[A+8>>2],t[D+12>>2]=t[A+12>>2],I=D+4|0,(s|0)>0)for(A=-1;t[f>>2]=t[I>>2],t[f+4>>2]=t[I+4>>2],t[f+8>>2]=t[I+8>>2],s&1?(lo(I),t[m>>2]=t[I>>2],t[m+4>>2]=t[I+4>>2],t[m+8>>2]=t[I+8>>2],os(m)):(NA(I),t[m>>2]=t[I>>2],t[m+4>>2]=t[I+4>>2],t[m+8>>2]=t[I+8>>2],zr(m)),qs(f,m,k),gi(k),X=(15-s|0)*3|0,Z=Se(7,0,X|0)|0,l=l&~(Te()|0),X=Se(ss(k)|0,0,X|0)|0,A=X|A&~Z,l=Te()|0|l,(s|0)>1;)s=s+-1|0;else A=-1;e:do if((t[I>>2]|0)<=2&&(t[D+8>>2]|0)<=2&&(t[D+12>>2]|0)<=2){if(f=da(D)|0,s=Se(f|0,0,45)|0,s=s|A,A=Te()|0|l&-1040385,k=Al(D)|0,!(Ri(f)|0)){if((k|0)<=0)break;for(m=0;;){if(f=Ee(s|0,A|0,52)|0,Te()|0,f=f&15,f)for(l=1;X=(15-l|0)*3|0,D=Ee(s|0,A|0,X|0)|0,Te()|0,Z=Se(7,0,X|0)|0,A=A&~(Te()|0),X=Se(as(D&7)|0,0,X|0)|0,s=s&~Z|X,A=A|(Te()|0),l>>>0<f>>>0;)l=l+1|0;if(m=m+1|0,(m|0)==(k|0))break e}}m=Ee(s|0,A|0,52)|0,Te()|0,m=m&15;t:do if(m){l=1;n:for(;;){switch(X=Ee(s|0,A|0,(15-l|0)*3|0)|0,Te()|0,X&7){case 1:break n;case 0:break;default:break t}if(l>>>0<m>>>0)l=l+1|0;else break t}if(Io(f,t[D>>2]|0)|0)for(l=1;D=(15-l|0)*3|0,Z=Se(7,0,D|0)|0,X=A&~(Te()|0),A=Ee(s|0,A|0,D|0)|0,Te()|0,A=Se(Ss(A&7)|0,0,D|0)|0,s=s&~Z|A,A=X|(Te()|0),l>>>0<m>>>0;)l=l+1|0;else for(l=1;X=(15-l|0)*3|0,D=Ee(s|0,A|0,X|0)|0,Te()|0,Z=Se(7,0,X|0)|0,A=A&~(Te()|0),X=Se(as(D&7)|0,0,X|0)|0,s=s&~Z|X,A=A|(Te()|0),l>>>0<m>>>0;)l=l+1|0}while(!1);if((k|0)>0){l=0;do s=Oo(s,A)|0,A=Te()|0,l=l+1|0;while((l|0)!=(k|0))}}else s=0,A=0;while(!1);return Z=A,X=s,Xt(Z|0),ye=Q,X|0}function Tr(A){return A=A|0,(A|0)%2|0|0}function mA(A,s,l){A=A|0,s=s|0,l=l|0;var f=0,m=0;return m=ye,ye=ye+16|0,f=m,s>>>0>15?(f=4,ye=m,f|0):(t[A+4>>2]&2146435072|0)==2146435072||(t[A+8+4>>2]&2146435072|0)==2146435072?(f=3,ye=m,f|0):(Lo(A,s,f),s=Rr(f,s)|0,f=Te()|0,t[l>>2]=s,t[l+4>>2]=f,(s|0)==0&(f|0)==0&&kn(23313,22674,786,22697),f=0,ye=m,f|0)}function GA(A,s,l){A=A|0,s=s|0,l=l|0;var f=0,m=0,k=0,I=0;if(m=l+4|0,k=Ee(A|0,s|0,52)|0,Te()|0,k=k&15,I=Ee(A|0,s|0,45)|0,Te()|0,f=(k|0)==0,Ri(I&127)|0){if(f)return I=1,I|0;f=1}else{if(f)return I=0,I|0;!(t[m>>2]|0)&&!(t[l+8>>2]|0)?f=(t[l+12>>2]|0)!=0&1:f=1}for(l=1;l&1?os(m):zr(m),I=Ee(A|0,s|0,(15-l|0)*3|0)|0,Te()|0,dr(m,I&7),l>>>0<k>>>0;)l=l+1|0;return f|0}function _i(A,s,l){A=A|0,s=s|0,l=l|0;var f=0,m=0,k=0,I=0,D=0,Q=0,Z=0,X=0;if(X=ye,ye=ye+16|0,Q=X,Z=Ee(A|0,s|0,45)|0,Te()|0,Z=Z&127,Z>>>0>121)return t[l>>2]=0,t[l+4>>2]=0,t[l+8>>2]=0,t[l+12>>2]=0,Z=5,ye=X,Z|0;e:do if(Ri(Z)|0&&(k=Ee(A|0,s|0,52)|0,Te()|0,k=k&15,(k|0)!=0)){f=1;t:for(;;){switch(D=Ee(A|0,s|0,(15-f|0)*3|0)|0,Te()|0,D&7){case 5:break t;case 0:break;default:{f=s;break e}}if(f>>>0<k>>>0)f=f+1|0;else{f=s;break e}}for(m=1,f=s;s=(15-m|0)*3|0,I=Se(7,0,s|0)|0,D=f&~(Te()|0),f=Ee(A|0,f|0,s|0)|0,Te()|0,f=Se(Ss(f&7)|0,0,s|0)|0,A=A&~I|f,f=D|(Te()|0),m>>>0<k>>>0;)m=m+1|0}else f=s;while(!1);if(D=7696+(Z*28|0)|0,t[l>>2]=t[D>>2],t[l+4>>2]=t[D+4>>2],t[l+8>>2]=t[D+8>>2],t[l+12>>2]=t[D+12>>2],!(GA(A,f,l)|0))return Z=0,ye=X,Z|0;if(I=l+4|0,t[Q>>2]=t[I>>2],t[Q+4>>2]=t[I+4>>2],t[Q+8>>2]=t[I+8>>2],k=Ee(A|0,f|0,52)|0,Te()|0,D=k&15,k&1?(zr(I),k=D+1|0):k=D,!(Ri(Z)|0))f=0;else{e:do if(!D)f=0;else for(s=1;;){if(m=Ee(A|0,f|0,(15-s|0)*3|0)|0,Te()|0,m=m&7,m|0){f=m;break e}if(s>>>0<D>>>0)s=s+1|0;else{f=0;break}}while(!1);f=(f|0)==4&1}if(!(dA(l,k,f,0)|0))(k|0)!=(D|0)&&(t[I>>2]=t[Q>>2],t[I+4>>2]=t[Q+4>>2],t[I+8>>2]=t[Q+8>>2]);else{if(Ri(Z)|0)do;while(dA(l,k,0,0)|0);(k|0)!=(D|0)&&NA(I)}return Z=0,ye=X,Z|0}function qA(A,s,l){A=A|0,s=s|0,l=l|0;var f=0,m=0,k=0;return k=ye,ye=ye+16|0,f=k,m=_i(A,s,f)|0,m|0?(ye=k,m|0):(m=Ee(A|0,s|0,52)|0,Te()|0,Qi(f,m&15,l),m=0,ye=k,m|0)}function Di(A,s,l){A=A|0,s=s|0,l=l|0;var f=0,m=0,k=0,I=0,D=0;if(I=ye,ye=ye+16|0,k=I,f=_i(A,s,k)|0,f|0)return k=f,ye=I,k|0;f=Ee(A|0,s|0,45)|0,Te()|0,f=(Ri(f&127)|0)==0,m=Ee(A|0,s|0,52)|0,Te()|0,m=m&15;e:do if(!f){if(m|0)for(f=1;;){if(D=Se(7,0,(15-f|0)*3|0)|0,!((D&A|0)==0&((Te()|0)&s|0)==0))break e;if(f>>>0<m>>>0)f=f+1|0;else break}return Zs(k,m,0,5,l),D=0,ye=I,D|0}while(!1);return Bi(k,m,0,6,l),D=0,ye=I,D|0}function co(A,s,l){A=A|0,s=s|0,l=l|0;var f=0,m=0,k=0;if(m=Ee(A|0,s|0,45)|0,Te()|0,!(Ri(m&127)|0))return m=2,t[l>>2]=m,0;if(m=Ee(A|0,s|0,52)|0,Te()|0,m=m&15,!m)return m=5,t[l>>2]=m,0;for(f=1;;){if(k=Se(7,0,(15-f|0)*3|0)|0,!((k&A|0)==0&((Te()|0)&s|0)==0)){f=2,A=6;break}if(f>>>0<m>>>0)f=f+1|0;else{f=5,A=6;break}}return(A|0)==6&&(t[l>>2]=f),0}function gA(A,s,l){A=A|0,s=s|0,l=l|0;var f=0,m=0,k=0,I=0,D=0,Q=0,Z=0,X=0,ie=0;ie=ye,ye=ye+128|0,Z=ie+112|0,k=ie+96|0,X=ie,m=Ee(A|0,s|0,52)|0,Te()|0,D=m&15,t[Z>>2]=D,I=Ee(A|0,s|0,45)|0,Te()|0,I=I&127;e:do if(Ri(I)|0){if(D|0)for(f=1;;){if(Q=Se(7,0,(15-f|0)*3|0)|0,!((Q&A|0)==0&((Te()|0)&s|0)==0)){m=0;break e}if(f>>>0<D>>>0)f=f+1|0;else break}if(m&1)m=1;else return Q=Se(D+1|0,0,52)|0,X=Te()|0|s&-15728641,Z=Se(7,0,(14-D|0)*3|0)|0,X=gA((Q|A)&~Z,X&~(Te()|0),l)|0,ye=ie,X|0}else m=0;while(!1);if(f=_i(A,s,k)|0,!f){m?(ni(k,Z,X),Q=5):(pA(k,Z,X),Q=6);e:do if(Ri(I)|0)if(!D)A=5;else for(f=1;;){if(I=Se(7,0,(15-f|0)*3|0)|0,!((I&A|0)==0&((Te()|0)&s|0)==0)){A=2;break e}if(f>>>0<D>>>0)f=f+1|0;else{A=5;break}}else A=2;while(!1);E(l|0,-1,A<<2|0)|0;e:do if(m)for(k=0;;){if(I=X+(k<<4)|0,Ji(I,t[Z>>2]|0)|0,I=t[I>>2]|0,D=t[l>>2]|0,(D|0)==-1|(D|0)==(I|0))f=l;else{m=0;do{if(m=m+1|0,m>>>0>=A>>>0){f=1;break e}f=l+(m<<2)|0,D=t[f>>2]|0}while(!((D|0)==-1|(D|0)==(I|0)))}if(t[f>>2]=I,k=k+1|0,k>>>0>=Q>>>0){f=0;break}}else for(k=0;;){if(I=X+(k<<4)|0,dA(I,t[Z>>2]|0,0,1)|0,I=t[I>>2]|0,D=t[l>>2]|0,(D|0)==-1|(D|0)==(I|0))f=l;else{m=0;do{if(m=m+1|0,m>>>0>=A>>>0){f=1;break e}f=l+(m<<2)|0,D=t[f>>2]|0}while(!((D|0)==-1|(D|0)==(I|0)))}if(t[f>>2]=I,k=k+1|0,k>>>0>=Q>>>0){f=0;break}}while(!1)}return X=f,ye=ie,X|0}function Fr(){return 12}function Zr(A,s){A=A|0,s=s|0;var l=0,f=0,m=0,k=0,I=0,D=0,Q=0;if(A>>>0>15)return D=4,D|0;if(Se(A|0,0,52)|0,D=Te()|0|134225919,!A){l=0,f=0;do Ri(f)|0&&(Se(f|0,0,45)|0,I=D|(Te()|0),A=s+(l<<3)|0,t[A>>2]=-1,t[A+4>>2]=I,l=l+1|0),f=f+1|0;while((f|0)!=122);return l=0,l|0}l=0,I=0;do{if(Ri(I)|0){for(Se(I|0,0,45)|0,f=1,m=-1,k=D|(Te()|0);Q=Se(7,0,(15-f|0)*3|0)|0,m=m&~Q,k=k&~(Te()|0),(f|0)!=(A|0);)f=f+1|0;Q=s+(l<<3)|0,t[Q>>2]=m,t[Q+4>>2]=k,l=l+1|0}I=I+1|0}while((I|0)!=122);return l=0,l|0}function ZA(A,s,l,f){A=A|0,s=s|0,l=l|0,f=f|0;var m=0,k=0,I=0,D=0,Q=0,Z=0,X=0,ie=0,Ae=0,ce=0,fe=0,ve=0,Ne=0,qe=0,Pe=0;if(Pe=ye,ye=ye+16|0,Ne=Pe,qe=Ee(A|0,s|0,52)|0,Te()|0,qe=qe&15,l>>>0>15)return qe=4,ye=Pe,qe|0;if((qe|0)<(l|0))return qe=12,ye=Pe,qe|0;if((qe|0)!=(l|0))if(k=Se(l|0,0,52)|0,k=k|A,D=Te()|0|s&-15728641,(qe|0)>(l|0)){Q=l;do ve=Se(7,0,(14-Q|0)*3|0)|0,Q=Q+1|0,k=ve|k,D=Te()|0|D;while((Q|0)<(qe|0));ve=k}else ve=k;else ve=A,D=s;fe=Ee(ve|0,D|0,45)|0,Te()|0;e:do if(Ri(fe&127)|0){if(Q=Ee(ve|0,D|0,52)|0,Te()|0,Q=Q&15,Q|0)for(k=1;;){if(fe=Se(7,0,(15-k|0)*3|0)|0,!((fe&ve|0)==0&((Te()|0)&D|0)==0)){Z=33;break e}if(k>>>0<Q>>>0)k=k+1|0;else break}if(fe=f,t[fe>>2]=0,t[fe+4>>2]=0,(qe|0)>(l|0)){for(fe=s&-15728641,ce=qe;;){if(Ae=ce,ce=ce+-1|0,ce>>>0>15|(qe|0)<(ce|0)){Z=19;break}if((qe|0)!=(ce|0))if(k=Se(ce|0,0,52)|0,k=k|A,Q=Te()|0|fe,(qe|0)<(Ae|0))ie=k;else{Z=ce;do ie=Se(7,0,(14-Z|0)*3|0)|0,Z=Z+1|0,k=ie|k,Q=Te()|0|Q;while((Z|0)<(qe|0));ie=k}else ie=A,Q=s;if(X=Ee(ie|0,Q|0,45)|0,Te()|0,!(Ri(X&127)|0))k=0;else{X=Ee(ie|0,Q|0,52)|0,Te()|0,X=X&15;t:do if(!X)k=0;else for(Z=1;;){if(k=Ee(ie|0,Q|0,(15-Z|0)*3|0)|0,Te()|0,k=k&7,k|0)break t;if(Z>>>0<X>>>0)Z=Z+1|0;else{k=0;break}}while(!1);k=(k|0)==0&1}if(Q=Ee(A|0,s|0,(15-Ae|0)*3|0)|0,Te()|0,Q=Q&7,(Q|0)==7){m=5,Z=42;break}if(k=(k|0)!=0,(Q|0)==1&k){m=5,Z=42;break}if(ie=Q+(((Q|0)!=0&k)<<31>>31)|0,ie|0&&(Z=qe-Ae|0,Z=Ds(7,0,Z,((Z|0)<0)<<31>>31)|0,X=Te()|0,k?(k=te(Z|0,X|0,5,0)|0,k=v(k|0,Te()|0,-5,-1)|0,k=N(k|0,Te()|0,6,0)|0,k=v(k|0,Te()|0,1,0)|0,Q=Te()|0):(k=Z,Q=X),Ae=ie+-1|0,Ae=te(Z|0,X|0,Ae|0,((Ae|0)<0)<<31>>31|0)|0,Ae=v(k|0,Q|0,Ae|0,Te()|0)|0,ie=Te()|0,X=f,X=v(Ae|0,ie|0,t[X>>2]|0,t[X+4>>2]|0)|0,ie=Te()|0,Ae=f,t[Ae>>2]=X,t[Ae+4>>2]=ie),(ce|0)<=(l|0)){Z=37;break}}if((Z|0)==19)kn(23313,22674,1099,22710);else if((Z|0)==37){I=f,m=t[I+4>>2]|0,I=t[I>>2]|0;break}else if((Z|0)==42)return ye=Pe,m|0}else m=0,I=0}else Z=33;while(!1);e:do if((Z|0)==33)if(fe=f,t[fe>>2]=0,t[fe+4>>2]=0,(qe|0)>(l|0)){for(k=qe;;){if(m=Ee(A|0,s|0,(15-k|0)*3|0)|0,Te()|0,m=m&7,(m|0)==7){m=5;break}if(I=qe-k|0,I=Ds(7,0,I,((I|0)<0)<<31>>31)|0,m=te(I|0,Te()|0,m|0,0)|0,I=Te()|0,fe=f,I=v(t[fe>>2]|0,t[fe+4>>2]|0,m|0,I|0)|0,m=Te()|0,fe=f,t[fe>>2]=I,t[fe+4>>2]=m,k=k+-1|0,(k|0)<=(l|0))break e}return ye=Pe,m|0}else m=0,I=0;while(!1);return Fo(ve,D,qe,Ne)|0&&kn(23313,22674,1063,22725),qe=Ne,Ne=t[qe+4>>2]|0,((m|0)>-1|(m|0)==-1&I>>>0>4294967295)&((Ne|0)>(m|0)|((Ne|0)==(m|0)?(t[qe>>2]|0)>>>0>I>>>0:0))?(qe=0,ye=Pe,qe|0):(kn(23313,22674,1139,22710),0)}function No(A,s,l,f,m,k){A=A|0,s=s|0,l=l|0,f=f|0,m=m|0,k=k|0;var I=0,D=0,Q=0,Z=0,X=0,ie=0,Ae=0,ce=0,fe=0,ve=0;if(ie=ye,ye=ye+16|0,I=ie,m>>>0>15)return k=4,ye=ie,k|0;if(D=Ee(l|0,f|0,52)|0,Te()|0,D=D&15,(D|0)>(m|0))return k=12,ye=ie,k|0;if(Fo(l,f,m,I)|0&&kn(23313,22674,1063,22725),X=I,Z=t[X+4>>2]|0,!(((s|0)>-1|(s|0)==-1&A>>>0>4294967295)&((Z|0)>(s|0)|((Z|0)==(s|0)?(t[X>>2]|0)>>>0>A>>>0:0))))return k=2,ye=ie,k|0;X=m-D|0,m=Se(m|0,0,52)|0,Q=Te()|0|f&-15728641,Z=k,t[Z>>2]=m|l,t[Z+4>>2]=Q,Z=Ee(l|0,f|0,45)|0,Te()|0;e:do if(Ri(Z&127)|0){if(D|0)for(I=1;;){if(Z=Se(7,0,(15-I|0)*3|0)|0,!((Z&l|0)==0&((Te()|0)&f|0)==0))break e;if(I>>>0<D>>>0)I=I+1|0;else break}if((X|0)<1)return k=0,ye=ie,k|0;for(Z=D^15,f=-1,Q=1,I=1;;){D=X-Q|0,D=Ds(7,0,D,((D|0)<0)<<31>>31)|0,l=Te()|0;do if(I)if(I=te(D|0,l|0,5,0)|0,I=v(I|0,Te()|0,-5,-1)|0,I=N(I|0,Te()|0,6,0)|0,m=Te()|0,(s|0)>(m|0)|(s|0)==(m|0)&A>>>0>I>>>0){s=v(A|0,s|0,-1,-1)|0,s=x(s|0,Te()|0,I|0,m|0)|0,I=Te()|0,Ae=k,fe=t[Ae>>2]|0,Ae=t[Ae+4>>2]|0,ve=(Z+f|0)*3|0,ce=Se(7,0,ve|0)|0,Ae=Ae&~(Te()|0),f=N(s|0,I|0,D|0,l|0)|0,A=Te()|0,m=v(f|0,A|0,2,0)|0,ve=Se(m|0,Te()|0,ve|0)|0,Ae=Te()|0|Ae,m=k,t[m>>2]=ve|fe&~ce,t[m+4>>2]=Ae,A=te(f|0,A|0,D|0,l|0)|0,A=x(s|0,I|0,A|0,Te()|0)|0,I=0,s=Te()|0;break}else{ve=k,ce=t[ve>>2]|0,ve=t[ve+4>>2]|0,fe=Se(7,0,(Z+f|0)*3|0)|0,ve=ve&~(Te()|0),I=k,t[I>>2]=ce&~fe,t[I+4>>2]=ve,I=1;break}else ce=k,m=t[ce>>2]|0,ce=t[ce+4>>2]|0,f=(Z+f|0)*3|0,Ae=Se(7,0,f|0)|0,ce=ce&~(Te()|0),ve=N(A|0,s|0,D|0,l|0)|0,I=Te()|0,f=Se(ve|0,I|0,f|0)|0,ce=Te()|0|ce,fe=k,t[fe>>2]=f|m&~Ae,t[fe+4>>2]=ce,I=te(ve|0,I|0,D|0,l|0)|0,A=x(A|0,s|0,I|0,Te()|0)|0,I=0,s=Te()|0;while(!1);if((X|0)>(Q|0))f=~Q,Q=Q+1|0;else{s=0;break}}return ye=ie,s|0}while(!1);if((X|0)<1)return ve=0,ye=ie,ve|0;for(m=D^15,I=1;;)if(fe=X-I|0,fe=Ds(7,0,fe,((fe|0)<0)<<31>>31)|0,ve=Te()|0,Q=k,l=t[Q>>2]|0,Q=t[Q+4>>2]|0,D=(m-I|0)*3|0,f=Se(7,0,D|0)|0,Q=Q&~(Te()|0),Ae=N(A|0,s|0,fe|0,ve|0)|0,ce=Te()|0,D=Se(Ae|0,ce|0,D|0)|0,Q=Te()|0|Q,Z=k,t[Z>>2]=D|l&~f,t[Z+4>>2]=Q,ve=te(Ae|0,ce|0,fe|0,ve|0)|0,A=x(A|0,s|0,ve|0,Te()|0)|0,s=Te()|0,(X|0)<=(I|0)){s=0;break}else I=I+1|0;return ye=ie,s|0}function Ga(A,s,l,f){A=A|0,s=s|0,l=l|0,f=f|0;var m=0,k=0;m=Ee(s|0,l|0,52)|0,Te()|0,m=m&15,(s|0)==0&(l|0)==0|((f|0)>15|(m|0)>(f|0))?(f=-1,m=-1,s=0,l=0):(k=js(s,l,m+1|0,f)|0,l=(Te()|0)&-15728641,s=Se(f|0,0,52)|0,s=k|s,l=l|(Te()|0),k=(Si(s,l)|0)==0,f=k?-1:f),k=A,t[k>>2]=s,t[k+4>>2]=l,t[A+8>>2]=m,t[A+12>>2]=f}function ul(A){A=A|0;var s=0,l=0,f=0,m=0,k=0,I=0,D=0,Q=0,Z=0;if(l=A,s=t[l>>2]|0,l=t[l+4>>2]|0,!((s|0)==0&(l|0)==0)&&(f=Ee(s|0,l|0,52)|0,Te()|0,f=f&15,D=Se(1,0,(f^15)*3|0)|0,s=v(D|0,Te()|0,s|0,l|0)|0,l=Te()|0,D=A,t[D>>2]=s,t[D+4>>2]=l,D=A+8|0,I=t[D>>2]|0,!((f|0)<(I|0)))){for(Q=A+12|0,k=f;;){if((k|0)==(I|0)){f=5;break}if(Z=(k|0)==(t[Q>>2]|0),m=(15-k|0)*3|0,f=Ee(s|0,l|0,m|0)|0,Te()|0,f=f&7,Z&((f|0)==1&!0)){f=7;break}if(!((f|0)==7&!0)){f=10;break}if(Z=Se(1,0,m|0)|0,s=v(s|0,l|0,Z|0,Te()|0)|0,l=Te()|0,Z=A,t[Z>>2]=s,t[Z+4>>2]=l,(k|0)>(I|0))k=k+-1|0;else{f=10;break}}if((f|0)==5){Z=A,t[Z>>2]=0,t[Z+4>>2]=0,t[D>>2]=-1,t[Q>>2]=-1;return}else if((f|0)==7){I=Se(1,0,m|0)|0,I=v(s|0,l|0,I|0,Te()|0)|0,D=Te()|0,Z=A,t[Z>>2]=I,t[Z+4>>2]=D,t[Q>>2]=k+-1;return}else if((f|0)==10)return}}function Ys(A){A=+A;var s=0;return s=A<0?A+6.283185307179586:A,+(A>=6.283185307179586?s+-6.283185307179586:s)}function _A(A,s){return A=A|0,s=s|0,+Pt(+(+K[A>>3]-+K[s>>3]))<17453292519943298e-27?(s=+Pt(+(+K[A+8>>3]-+K[s+8>>3]))<17453292519943298e-27,s|0):(s=0,s|0)}function ot(A,s){A=A|0,s=s|0;var l=0,f=0,m=0,k=0;return m=+K[s>>3],f=+K[A>>3],k=+sn(+((m-f)*.5)),l=+sn(+((+K[s+8>>3]-+K[A+8>>3])*.5)),l=k*k+l*(+$t(+m)*+$t(+f)*l),+(+yr(+ +Ht(+l),+ +Ht(+(1-l)))*2)}function vt(A,s){A=A|0,s=s|0;var l=0,f=0,m=0,k=0;return m=+K[s>>3],f=+K[A>>3],k=+sn(+((m-f)*.5)),l=+sn(+((+K[s+8>>3]-+K[A+8>>3])*.5)),l=k*k+l*(+$t(+m)*+$t(+f)*l),+(+yr(+ +Ht(+l),+ +Ht(+(1-l)))*2*6371.007180918475)}function mt(A,s){A=A|0,s=s|0;var l=0,f=0,m=0,k=0;return m=+K[s>>3],f=+K[A>>3],k=+sn(+((m-f)*.5)),l=+sn(+((+K[s+8>>3]-+K[A+8>>3])*.5)),l=k*k+l*(+$t(+m)*+$t(+f)*l),+(+yr(+ +Ht(+l),+ +Ht(+(1-l)))*2*6371.007180918475*1e3)}function An(A,s){A=A|0,s=s|0;var l=0,f=0,m=0,k=0,I=0;return k=+K[s>>3],f=+$t(+k),m=+K[s+8>>3]-+K[A+8>>3],I=f*+sn(+m),l=+K[A>>3],+ +yr(+I,+(+sn(+k)*+$t(+l)-+$t(+m)*(f*+sn(+l))))}function Fn(A,s,l,f){A=A|0,s=+s,l=+l,f=f|0;var m=0,k=0,I=0,D=0;if(l<1e-16){t[f>>2]=t[A>>2],t[f+4>>2]=t[A+4>>2],t[f+8>>2]=t[A+8>>2],t[f+12>>2]=t[A+12>>2];return}k=s<0?s+6.283185307179586:s,k=s>=6.283185307179586?k+-6.283185307179586:k;do if(k<1e-16)s=+K[A>>3]+l,K[f>>3]=s,m=f;else{if(m=+Pt(+(k+-3.141592653589793))<1e-16,s=+K[A>>3],m){s=s-l,K[f>>3]=s,m=f;break}if(I=+$t(+l),l=+sn(+l),s=I*+sn(+s)+ +$t(+k)*(l*+$t(+s)),s=s>1?1:s,s=+so(+(s<-1?-1:s)),K[f>>3]=s,+Pt(+(s+-1.5707963267948966))<1e-16){K[f>>3]=1.5707963267948966,K[f+8>>3]=0;return}if(+Pt(+(s+1.5707963267948966))<1e-16){K[f>>3]=-1.5707963267948966,K[f+8>>3]=0;return}if(D=+$t(+s),k=l*+sn(+k)/D,l=+K[A>>3],s=(I-+sn(+s)*+sn(+l))/+$t(+l)/D,I=k>1?1:k,s=s>1?1:s,s=+K[A+8>>3]+ +yr(+(I<-1?-1:I),+(s<-1?-1:s)),s>3.141592653589793)do s=s+-6.283185307179586;while(s>3.141592653589793);if(s<-3.141592653589793)do s=s+6.283185307179586;while(s<-3.141592653589793);K[f+8>>3]=s;return}while(!1);if(+Pt(+(s+-1.5707963267948966))<1e-16){K[m>>3]=1.5707963267948966,K[f+8>>3]=0;return}if(+Pt(+(s+1.5707963267948966))<1e-16){K[m>>3]=-1.5707963267948966,K[f+8>>3]=0;return}if(s=+K[A+8>>3],s>3.141592653589793)do s=s+-6.283185307179586;while(s>3.141592653589793);if(s<-3.141592653589793)do s=s+6.283185307179586;while(s<-3.141592653589793);K[f+8>>3]=s}function wi(A,s){return A=A|0,s=s|0,A>>>0>15?(s=4,s|0):(K[s>>3]=+K[20528+(A<<3)>>3],s=0,s|0)}function sr(A,s){return A=A|0,s=s|0,A>>>0>15?(s=4,s|0):(K[s>>3]=+K[20656+(A<<3)>>3],s=0,s|0)}function Oi(A,s){return A=A|0,s=s|0,A>>>0>15?(s=4,s|0):(K[s>>3]=+K[20784+(A<<3)>>3],s=0,s|0)}function HA(A,s){return A=A|0,s=s|0,A>>>0>15?(s=4,s|0):(K[s>>3]=+K[20912+(A<<3)>>3],s=0,s|0)}function qa(A,s){A=A|0,s=s|0;var l=0;return A>>>0>15?(s=4,s|0):(l=Ds(7,0,A,((A|0)<0)<<31>>31)|0,l=te(l|0,Te()|0,120,0)|0,A=Te()|0,t[s>>2]=l|2,t[s+4>>2]=A,s=0,s|0)}function er(A,s,l){A=A|0,s=s|0,l=l|0;var f=0,m=0,k=0,I=0,D=0,Q=0,Z=0,X=0,ie=0,Ae=0;return Ae=+K[s>>3],X=+K[A>>3],Q=+sn(+((Ae-X)*.5)),k=+K[s+8>>3],Z=+K[A+8>>3],I=+sn(+((k-Z)*.5)),D=+$t(+X),ie=+$t(+Ae),I=Q*Q+I*(ie*D*I),I=+yr(+ +Ht(+I),+ +Ht(+(1-I)))*2,Q=+K[l>>3],Ae=+sn(+((Q-Ae)*.5)),f=+K[l+8>>3],k=+sn(+((f-k)*.5)),m=+$t(+Q),k=Ae*Ae+k*(ie*m*k),k=+yr(+ +Ht(+k),+ +Ht(+(1-k)))*2,Q=+sn(+((X-Q)*.5)),f=+sn(+((Z-f)*.5)),f=Q*Q+f*(D*m*f),f=+yr(+ +Ht(+f),+ +Ht(+(1-f)))*2,m=(I+k+f)*.5,+(+kr(+ +Ht(+(+oi(+(m*.5))*+oi(+((m-I)*.5))*+oi(+((m-k)*.5))*+oi(+((m-f)*.5)))))*4)}function eA(A,s,l){A=A|0,s=s|0,l=l|0;var f=0,m=0,k=0,I=0,D=0;if(D=ye,ye=ye+192|0,k=D+168|0,I=D,m=qA(A,s,k)|0,m|0)return l=m,ye=D,l|0;if(Di(A,s,I)|0&&kn(23313,22742,386,22751),s=t[I>>2]|0,(s|0)>0){if(f=+er(I+8|0,I+8+(((s|0)!=1&1)<<4)|0,k)+0,(s|0)!=1){A=1;do m=A,A=A+1|0,f=f+ +er(I+8+(m<<4)|0,I+8+(((A|0)%(s|0)|0)<<4)|0,k);while((A|0)<(s|0))}}else f=0;return K[l>>3]=f,l=0,ye=D,l|0}function MA(A,s,l){return A=A|0,s=s|0,l=l|0,A=eA(A,s,l)|0,A|0||(K[l>>3]=+K[l>>3]*6371.007180918475*6371.007180918475),A|0}function tA(A,s,l){return A=A|0,s=s|0,l=l|0,A=eA(A,s,l)|0,A|0||(K[l>>3]=+K[l>>3]*6371.007180918475*6371.007180918475*1e3*1e3),A|0}function TA(A,s,l){A=A|0,s=s|0,l=l|0;var f=0,m=0,k=0,I=0,D=0,Q=0,Z=0,X=0;if(D=ye,ye=ye+176|0,I=D,A=Lr(A,s,I)|0,A|0)return I=A,ye=D,I|0;if(K[l>>3]=0,A=t[I>>2]|0,(A|0)<=1)return I=0,ye=D,I|0;s=A+-1|0,A=0,f=+K[I+8>>3],m=+K[I+16>>3],k=0;do A=A+1|0,Z=f,f=+K[I+8+(A<<4)>>3],X=+sn(+((f-Z)*.5)),Q=m,m=+K[I+8+(A<<4)+8>>3],Q=+sn(+((m-Q)*.5)),Q=X*X+Q*(+$t(+f)*+$t(+Z)*Q),k=k+ +yr(+ +Ht(+Q),+ +Ht(+(1-Q)))*2;while((A|0)<(s|0));return K[l>>3]=k,I=0,ye=D,I|0}function Za(A,s,l){A=A|0,s=s|0,l=l|0;var f=0,m=0,k=0,I=0,D=0,Q=0,Z=0,X=0;if(D=ye,ye=ye+176|0,I=D,A=Lr(A,s,I)|0,A|0)return I=A,k=+K[l>>3],k=k*6371.007180918475,K[l>>3]=k,ye=D,I|0;if(K[l>>3]=0,A=t[I>>2]|0,(A|0)<=1)return I=0,k=0,k=k*6371.007180918475,K[l>>3]=k,ye=D,I|0;s=A+-1|0,A=0,f=+K[I+8>>3],m=+K[I+16>>3],k=0;do A=A+1|0,Z=f,f=+K[I+8+(A<<4)>>3],X=+sn(+((f-Z)*.5)),Q=m,m=+K[I+8+(A<<4)+8>>3],Q=+sn(+((m-Q)*.5)),Q=X*X+Q*(+$t(+Z)*+$t(+f)*Q),k=k+ +yr(+ +Ht(+Q),+ +Ht(+(1-Q)))*2;while((A|0)!=(s|0));return K[l>>3]=k,I=0,X=k,X=X*6371.007180918475,K[l>>3]=X,ye=D,I|0}function Ei(A,s,l){A=A|0,s=s|0,l=l|0;var f=0,m=0,k=0,I=0,D=0,Q=0,Z=0,X=0;if(D=ye,ye=ye+176|0,I=D,A=Lr(A,s,I)|0,A|0)return I=A,k=+K[l>>3],k=k*6371.007180918475,k=k*1e3,K[l>>3]=k,ye=D,I|0;if(K[l>>3]=0,A=t[I>>2]|0,(A|0)<=1)return I=0,k=0,k=k*6371.007180918475,k=k*1e3,K[l>>3]=k,ye=D,I|0;s=A+-1|0,A=0,f=+K[I+8>>3],m=+K[I+16>>3],k=0;do A=A+1|0,Z=f,f=+K[I+8+(A<<4)>>3],X=+sn(+((f-Z)*.5)),Q=m,m=+K[I+8+(A<<4)+8>>3],Q=+sn(+((m-Q)*.5)),Q=X*X+Q*(+$t(+Z)*+$t(+f)*Q),k=k+ +yr(+ +Ht(+Q),+ +Ht(+(1-Q)))*2;while((A|0)!=(s|0));return K[l>>3]=k,I=0,X=k,X=X*6371.007180918475,X=X*1e3,K[l>>3]=X,ye=D,I|0}function Vl(A){A=A|0;var s=0,l=0,f=0;return s=y(1,12)|0,s||kn(22832,22787,49,22845),l=A+4|0,f=t[l>>2]|0,f|0?(f=f+8|0,t[f>>2]=s,t[l>>2]=s,s|0):(t[A>>2]|0&&kn(22862,22787,61,22885),f=A,t[f>>2]=s,t[l>>2]=s,s|0)}function ya(A,s){A=A|0,s=s|0;var l=0,f=0;return f=Vi(24)|0,f||kn(22899,22787,78,22913),t[f>>2]=t[s>>2],t[f+4>>2]=t[s+4>>2],t[f+8>>2]=t[s+8>>2],t[f+12>>2]=t[s+12>>2],t[f+16>>2]=0,s=A+4|0,l=t[s>>2]|0,l|0?(t[l+16>>2]=f,t[s>>2]=f,f|0):(t[A>>2]|0&&kn(22928,22787,82,22913),t[A>>2]=f,t[s>>2]=f,f|0)}function yA(A){A=A|0;var s=0,l=0,f=0,m=0;if(A)for(f=1;;){if(s=t[A>>2]|0,s|0)do{if(l=t[s>>2]|0,l|0)do m=l,l=t[l+16>>2]|0,p(m);while(l|0);m=s,s=t[s+8>>2]|0,p(m)}while(s|0);if(s=A,A=t[A+8>>2]|0,f||p(s),A)f=0;else break}}function hs(A){A=A|0;var s=0,l=0,f=0,m=0,k=0,I=0,D=0,Q=0,Z=0,X=0,ie=0,Ae=0,ce=0,fe=0,ve=0,Ne=0,qe=0,Pe=0,Ve=0,Ue=0,Mt=0,ht=0,_t=0,gt=0,Mn=0,cn=0,Yt=0,tn=0,fn=0,an=0,Wn=0,bn=0;if(m=A+8|0,t[m>>2]|0)return bn=1,bn|0;if(f=t[A>>2]|0,!f)return bn=0,bn|0;s=f,l=0;do l=l+1|0,s=t[s+8>>2]|0;while(s|0);if(l>>>0<2)return bn=0,bn|0;an=Vi(l<<2)|0,an||kn(22948,22787,317,22967),fn=Vi(l<<5)|0,fn||kn(22989,22787,321,22967),t[A>>2]=0,ht=A+4|0,t[ht>>2]=0,t[m>>2]=0,l=0,tn=0,Mt=0,ie=0;e:for(;;){if(X=t[f>>2]|0,X){k=0,I=X;do{if(Q=+K[I+8>>3],s=I,I=t[I+16>>2]|0,Z=(I|0)==0,m=Z?X:I,D=+K[m+8>>3],+Pt(+(Q-D))>3.141592653589793){bn=14;break}k=k+(D-Q)*(+K[s>>3]+ +K[m>>3])}while(!Z);if((bn|0)==14){bn=0,k=0,s=X;do Ue=+K[s+8>>3],Yt=s+16|0,cn=t[Yt>>2]|0,cn=cn|0?cn:X,Ve=+K[cn+8>>3],k=k+(+K[s>>3]+ +K[cn>>3])*((Ve<0?Ve+6.283185307179586:Ve)-(Ue<0?Ue+6.283185307179586:Ue)),s=t[(s|0?Yt:f)>>2]|0;while(s|0)}k>0?(t[an+(tn<<2)>>2]=f,tn=tn+1|0,m=Mt,s=ie):bn=19}else bn=19;if((bn|0)==19){bn=0;do if(l){if(s=l+8|0,t[s>>2]|0){bn=21;break e}if(l=y(1,12)|0,!l){bn=23;break e}t[s>>2]=l,m=l+4|0,I=l,s=ie}else if(ie){m=ht,I=ie+8|0,s=f,l=A;break}else if(t[A>>2]|0){bn=27;break e}else{m=ht,I=A,s=f,l=A;break}while(!1);if(t[I>>2]=f,t[m>>2]=f,I=fn+(Mt<<5)|0,Z=t[f>>2]|0,Z){for(X=fn+(Mt<<5)+8|0,K[X>>3]=17976931348623157e292,ie=fn+(Mt<<5)+24|0,K[ie>>3]=17976931348623157e292,K[I>>3]=-17976931348623157e292,Ae=fn+(Mt<<5)+16|0,K[Ae>>3]=-17976931348623157e292,qe=17976931348623157e292,Pe=-17976931348623157e292,m=0,ce=Z,Q=17976931348623157e292,ve=17976931348623157e292,Ne=-17976931348623157e292,D=-17976931348623157e292;k=+K[ce>>3],Ue=+K[ce+8>>3],ce=t[ce+16>>2]|0,fe=(ce|0)==0,Ve=+K[(fe?Z:ce)+8>>3],k<Q&&(K[X>>3]=k,Q=k),Ue<ve&&(K[ie>>3]=Ue,ve=Ue),k>Ne?K[I>>3]=k:k=Ne,Ue>D&&(K[Ae>>3]=Ue,D=Ue),qe=Ue>0&Ue<qe?Ue:qe,Pe=Ue<0&Ue>Pe?Ue:Pe,m=m|+Pt(+(Ue-Ve))>3.141592653589793,!fe;)Ne=k;m&&(K[Ae>>3]=Pe,K[ie>>3]=qe)}else t[I>>2]=0,t[I+4>>2]=0,t[I+8>>2]=0,t[I+12>>2]=0,t[I+16>>2]=0,t[I+20>>2]=0,t[I+24>>2]=0,t[I+28>>2]=0;m=Mt+1|0}if(Yt=f+8|0,f=t[Yt>>2]|0,t[Yt>>2]=0,f)Mt=m,ie=s;else{bn=45;break}}if((bn|0)==21)kn(22765,22787,35,22799);else if((bn|0)==23)kn(22819,22787,37,22799);else if((bn|0)==27)kn(22862,22787,61,22885);else if((bn|0)==45){e:do if((tn|0)>0){for(Yt=(m|0)==0,Mn=m<<2,cn=(A|0)==0,gt=0,s=0;;){if(_t=t[an+(gt<<2)>>2]|0,Yt)bn=73;else{if(Mt=Vi(Mn)|0,!Mt){bn=50;break}if(ht=Vi(Mn)|0,!ht){bn=52;break}t:do if(cn)l=0;else{for(m=0,l=0,I=A;f=fn+(m<<5)|0,on(t[I>>2]|0,f,t[_t>>2]|0)|0?(t[Mt+(l<<2)>>2]=I,t[ht+(l<<2)>>2]=f,fe=l+1|0):fe=l,I=t[I+8>>2]|0,I;)m=m+1|0,l=fe;if((fe|0)>0)if(f=t[Mt>>2]|0,(fe|0)==1)l=f;else for(Ae=0,ce=-1,l=f,ie=f;;){for(Z=t[ie>>2]|0,f=0,I=0;m=t[t[Mt+(I<<2)>>2]>>2]|0,(m|0)==(Z|0)?X=f:X=f+((on(m,t[ht+(I<<2)>>2]|0,t[Z>>2]|0)|0)&1)|0,I=I+1|0,(I|0)!=(fe|0);)f=X;if(m=(X|0)>(ce|0),l=m?ie:l,f=Ae+1|0,(f|0)==(fe|0))break t;Ae=f,ce=m?X:ce,ie=t[Mt+(f<<2)>>2]|0}else l=0}while(!1);if(p(Mt),p(ht),l){if(m=l+4|0,f=t[m>>2]|0,f)l=f+8|0;else if(t[l>>2]|0){bn=70;break}t[l>>2]=_t,t[m>>2]=_t}else bn=73}if((bn|0)==73){if(bn=0,s=t[_t>>2]|0,s|0)do ht=s,s=t[s+16>>2]|0,p(ht);while(s|0);p(_t),s=1}if(gt=gt+1|0,(gt|0)>=(tn|0)){Wn=s;break e}}(bn|0)==50?kn(23004,22787,249,23023):(bn|0)==52?kn(23042,22787,252,23023):(bn|0)==70&&kn(22862,22787,61,22885)}else Wn=0;while(!1);return p(an),p(fn),bn=Wn,bn|0}return 0}function on(A,s,l){A=A|0,s=s|0,l=l|0;var f=0,m=0,k=0,I=0,D=0,Q=0,Z=0,X=0;if(!(Bo(s,l)|0)||(s=ao(s)|0,f=+K[l>>3],m=+K[l+8>>3],m=s&m<0?m+6.283185307179586:m,A=t[A>>2]|0,!A))return A=0,A|0;if(s){s=0,Z=m,l=A;e:for(;;){for(;I=+K[l>>3],m=+K[l+8>>3],l=l+16|0,X=t[l>>2]|0,X=X|0?X:A,k=+K[X>>3],D=+K[X+8>>3],I>k?(Q=I,I=D):(Q=k,k=I,I=m,m=D),f=f==k|f==Q?f+2220446049250313e-31:f,!!(f<k|f>Q);)if(l=t[l>>2]|0,!l){l=22;break e}if(D=I<0?I+6.283185307179586:I,I=m<0?m+6.283185307179586:m,Z=D==Z|I==Z?Z+-2220446049250313e-31:Z,Q=D+(I-D)*((f-k)/(Q-k)),(Q<0?Q+6.283185307179586:Q)>Z&&(s=s^1),l=t[l>>2]|0,!l){l=22;break}}if((l|0)==22)return s|0}else{s=0,Z=m,l=A;e:for(;;){for(;I=+K[l>>3],m=+K[l+8>>3],l=l+16|0,X=t[l>>2]|0,X=X|0?X:A,k=+K[X>>3],D=+K[X+8>>3],I>k?(Q=I,I=D):(Q=k,k=I,I=m,m=D),f=f==k|f==Q?f+2220446049250313e-31:f,!!(f<k|f>Q);)if(l=t[l>>2]|0,!l){l=22;break e}if(Z=I==Z|m==Z?Z+-2220446049250313e-31:Z,I+(m-I)*((f-k)/(Q-k))>Z&&(s=s^1),l=t[l>>2]|0,!l){l=22;break}}if((l|0)==22)return s|0}return 0}function SA(A,s,l,f,m){A=A|0,s=s|0,l=l|0,f=f|0,m=m|0;var k=0,I=0,D=0,Q=0,Z=0,X=0,ie=0,Ae=0,ce=0,fe=0,ve=0,Ne=0,qe=0,Pe=0;if(Pe=ye,ye=ye+32|0,qe=Pe+16|0,Ne=Pe,k=Ee(A|0,s|0,52)|0,Te()|0,k=k&15,ce=Ee(l|0,f|0,52)|0,Te()|0,(k|0)!=(ce&15|0))return qe=12,ye=Pe,qe|0;if(Z=Ee(A|0,s|0,45)|0,Te()|0,Z=Z&127,X=Ee(l|0,f|0,45)|0,Te()|0,X=X&127,Z>>>0>121|X>>>0>121)return qe=5,ye=Pe,qe|0;if(ce=(Z|0)!=(X|0),ce){if(D=Gs(Z,X)|0,(D|0)==7)return qe=1,ye=Pe,qe|0;Q=Gs(X,Z)|0,(Q|0)==7?kn(23066,23090,161,23100):(fe=D,I=Q)}else fe=0,I=0;ie=Ri(Z)|0,Ae=Ri(X)|0,t[qe>>2]=0,t[qe+4>>2]=0,t[qe+8>>2]=0,t[qe+12>>2]=0;do if(fe){if(X=t[4272+(Z*28|0)+(fe<<2)>>2]|0,D=(X|0)>0,Ae)if(D){Z=0,Q=l,D=f;do Q=uo(Q,D)|0,D=Te()|0,I=Ss(I)|0,(I|0)==1&&(I=Ss(1)|0),Z=Z+1|0;while((Z|0)!=(X|0));X=I,Z=Q,Q=D}else X=I,Z=l,Q=f;else if(D){Z=0,Q=l,D=f;do Q=Qa(Q,D)|0,D=Te()|0,I=Ss(I)|0,Z=Z+1|0;while((Z|0)!=(X|0));X=I,Z=Q,Q=D}else X=I,Z=l,Q=f;if(GA(Z,Q,qe)|0,ce||kn(23115,23090,191,23100),D=(ie|0)!=0,I=(Ae|0)!=0,D&I&&kn(23142,23090,192,23100),D){if(I=Jr(A,s)|0,(I|0)==7){k=5;break}if(dt[21872+(I*7|0)+fe>>0]|0){k=1;break}Q=t[21040+(I*28|0)+(fe<<2)>>2]|0,Z=Q}else if(I){if(I=Jr(Z,Q)|0,(I|0)==7){k=5;break}if(dt[21872+(I*7|0)+X>>0]|0){k=1;break}Z=0,Q=t[21040+(X*28|0)+(I<<2)>>2]|0}else Z=0,Q=0;if((Z|Q|0)<0)k=5;else{if((Q|0)>0){D=qe+4|0,I=0;do VA(D),I=I+1|0;while((I|0)!=(Q|0))}if(t[Ne>>2]=0,t[Ne+4>>2]=0,t[Ne+8>>2]=0,dr(Ne,fe),k|0)for(;Tr(k)|0?os(Ne):zr(Ne),(k|0)>1;)k=k+-1|0;if((Z|0)>0){k=0;do VA(Ne),k=k+1|0;while((k|0)!=(Z|0))}ve=qe+4|0,Fi(ve,Ne,ve),gi(ve),ve=51}}else if(GA(l,f,qe)|0,(ie|0)!=0&(Ae|0)!=0)if((X|0)!=(Z|0)&&kn(23173,23090,261,23100),I=Jr(A,s)|0,k=Jr(l,f)|0,(I|0)==7|(k|0)==7)k=5;else if(dt[21872+(I*7|0)+k>>0]|0)k=1;else if(I=t[21040+(I*28|0)+(k<<2)>>2]|0,(I|0)>0){D=qe+4|0,k=0;do VA(D),k=k+1|0;while((k|0)!=(I|0));ve=51}else ve=51;else ve=51;while(!1);return(ve|0)==51&&(k=qe+4|0,t[m>>2]=t[k>>2],t[m+4>>2]=t[k+4>>2],t[m+8>>2]=t[k+8>>2],k=0),qe=k,ye=Pe,qe|0}function CA(A,s,l,f){A=A|0,s=s|0,l=l|0,f=f|0;var m=0,k=0,I=0,D=0,Q=0,Z=0,X=0,ie=0,Ae=0,ce=0,fe=0,ve=0,Ne=0,qe=0,Pe=0,Ve=0;if(ve=ye,ye=ye+48|0,Z=ve+36|0,I=ve+24|0,D=ve+12|0,Q=ve,m=Ee(A|0,s|0,52)|0,Te()|0,m=m&15,Ae=Ee(A|0,s|0,45)|0,Te()|0,Ae=Ae&127,Ae>>>0>121)return f=5,ye=ve,f|0;if(X=Ri(Ae)|0,Se(m|0,0,52)|0,Ne=Te()|0|134225919,k=f,t[k>>2]=-1,t[k+4>>2]=Ne,!m)return m=ss(l)|0,(m|0)==7||(m=Ts(Ae,m)|0,(m|0)==127)?(Ne=1,ye=ve,Ne|0):(ce=Se(m|0,0,45)|0,fe=Te()|0,Ae=f,fe=t[Ae+4>>2]&-1040385|fe,Ne=f,t[Ne>>2]=t[Ae>>2]|ce,t[Ne+4>>2]=fe,Ne=0,ye=ve,Ne|0);for(t[Z>>2]=t[l>>2],t[Z+4>>2]=t[l+4>>2],t[Z+8>>2]=t[l+8>>2],l=m;;){if(k=l,l=l+-1|0,t[I>>2]=t[Z>>2],t[I+4>>2]=t[Z+4>>2],t[I+8>>2]=t[Z+8>>2],Tr(k)|0){if(m=Po(Z)|0,m|0){l=13;break}t[D>>2]=t[Z>>2],t[D+4>>2]=t[Z+4>>2],t[D+8>>2]=t[Z+8>>2],os(D)}else{if(m=Xi(Z)|0,m|0){l=13;break}t[D>>2]=t[Z>>2],t[D+4>>2]=t[Z+4>>2],t[D+8>>2]=t[Z+8>>2],zr(D)}if(qs(I,D,Q),gi(Q),m=f,Pe=t[m>>2]|0,m=t[m+4>>2]|0,Ve=(15-k|0)*3|0,qe=Se(7,0,Ve|0)|0,m=m&~(Te()|0),Ve=Se(ss(Q)|0,0,Ve|0)|0,m=Te()|0|m,Ne=f,t[Ne>>2]=Ve|Pe&~qe,t[Ne+4>>2]=m,(k|0)<=1){l=14;break}}e:do if((l|0)!=13&&(l|0)==14)if((t[Z>>2]|0)<=1&&(t[Z+4>>2]|0)<=1&&(t[Z+8>>2]|0)<=1){l=ss(Z)|0,m=Ts(Ae,l)|0,(m|0)==127?Q=0:Q=Ri(m)|0;t:do if(l){if(X){if(m=Jr(A,s)|0,(m|0)==7){m=5;break e}if(k=t[21248+(m*28|0)+(l<<2)>>2]|0,(k|0)>0){m=l,l=0;do m=as(m)|0,l=l+1|0;while((l|0)!=(k|0))}else m=l;if((m|0)==1){m=9;break e}l=Ts(Ae,m)|0,(l|0)==127&&kn(23200,23090,411,23230),Ri(l)|0?kn(23245,23090,412,23230):(fe=l,ce=k,ie=m)}else fe=m,ce=0,ie=l;if(D=t[4272+(Ae*28|0)+(ie<<2)>>2]|0,(D|0)<=-1&&kn(23276,23090,419,23230),!Q){if((ce|0)<0){m=5;break e}if(ce|0){k=f,m=0,l=t[k>>2]|0,k=t[k+4>>2]|0;do l=Bs(l,k)|0,k=Te()|0,Ve=f,t[Ve>>2]=l,t[Ve+4>>2]=k,m=m+1|0;while((m|0)<(ce|0))}if((D|0)<=0){m=fe,l=58;break}for(k=f,m=0,l=t[k>>2]|0,k=t[k+4>>2]|0;;)if(l=Bs(l,k)|0,k=Te()|0,Ve=f,t[Ve>>2]=l,t[Ve+4>>2]=k,m=m+1|0,(m|0)==(D|0)){m=fe,l=58;break t}}if(I=Gs(fe,Ae)|0,(I|0)==7&&kn(23066,23090,428,23230),m=f,l=t[m>>2]|0,m=t[m+4>>2]|0,(D|0)>0){k=0;do l=Bs(l,m)|0,m=Te()|0,Ve=f,t[Ve>>2]=l,t[Ve+4>>2]=m,k=k+1|0;while((k|0)!=(D|0))}if(m=Jr(l,m)|0,(m|0)==7&&kn(23313,23090,440,23230),l=Oa(fe)|0,l=t[(l?21664:21456)+(I*28|0)+(m<<2)>>2]|0,(l|0)<0&&kn(23313,23090,454,23230),!l)m=fe,l=58;else{I=f,m=0,k=t[I>>2]|0,I=t[I+4>>2]|0;do k=Oo(k,I)|0,I=Te()|0,Ve=f,t[Ve>>2]=k,t[Ve+4>>2]=I,m=m+1|0;while((m|0)<(l|0));m=fe,l=58}}else if((X|0)!=0&(Q|0)!=0){if(l=Jr(A,s)|0,k=f,k=Jr(t[k>>2]|0,t[k+4>>2]|0)|0,(l|0)==7|(k|0)==7){m=5;break e}if(k=t[21248+(l*28|0)+(k<<2)>>2]|0,(k|0)<0){m=5;break e}if(!k)l=59;else{D=f,l=0,I=t[D>>2]|0,D=t[D+4>>2]|0;do I=Bs(I,D)|0,D=Te()|0,Ve=f,t[Ve>>2]=I,t[Ve+4>>2]=D,l=l+1|0;while((l|0)<(k|0));l=58}}else l=58;while(!1);if((l|0)==58&&Q&&(l=59),(l|0)==59&&(Ve=f,(Jr(t[Ve>>2]|0,t[Ve+4>>2]|0)|0)==1)){m=9;break}Ve=f,qe=t[Ve>>2]|0,Ve=t[Ve+4>>2]&-1040385,Pe=Se(m|0,0,45)|0,Ve=Ve|(Te()|0),m=f,t[m>>2]=qe|Pe,t[m+4>>2]=Ve,m=0}else m=1;while(!1);return Ve=m,ye=ve,Ve|0}function vA(A,s,l,f,m,k){A=A|0,s=s|0,l=l|0,f=f|0,m=m|0,k=k|0;var I=0,D=0;return D=ye,ye=ye+16|0,I=D,m?A=15:(A=SA(A,s,l,f,I)|0,A||(su(I,k),A=0)),ye=D,A|0}function va(A,s,l,f,m){A=A|0,s=s|0,l=l|0,f=f|0,m=m|0;var k=0,I=0;return I=ye,ye=ye+16|0,k=I,f?l=15:(l=aA(l,k)|0,l||(l=CA(A,s,k,m)|0)),ye=I,l|0}function Kt(A,s,l,f,m){A=A|0,s=s|0,l=l|0,f=f|0,m=m|0;var k=0,I=0,D=0,Q=0;return Q=ye,ye=ye+32|0,I=Q+12|0,D=Q,k=SA(A,s,A,s,I)|0,k|0?(D=k,ye=Q,D|0):(A=SA(A,s,l,f,D)|0,A|0?(D=A,ye=Q,D|0):(I=Xr(I,D)|0,D=m,t[D>>2]=I,t[D+4>>2]=((I|0)<0)<<31>>31,D=0,ye=Q,D|0))}function Vo(A,s,l,f,m){A=A|0,s=s|0,l=l|0,f=f|0,m=m|0;var k=0,I=0,D=0,Q=0;return Q=ye,ye=ye+32|0,I=Q+12|0,D=Q,k=SA(A,s,A,s,I)|0,!k&&(k=SA(A,s,l,f,D)|0,!k)?(f=Xr(I,D)|0,f=v(f|0,((f|0)<0)<<31>>31|0,1,0)|0,I=Te()|0,D=m,t[D>>2]=f,t[D+4>>2]=I,D=0,ye=Q,D|0):(D=k,ye=Q,D|0)}function Ha(A,s,l,f,m){A=A|0,s=s|0,l=l|0,f=f|0,m=m|0;var k=0,I=0,D=0,Q=0,Z=0,X=0,ie=0,Ae=0,ce=0,fe=0,ve=0,Ne=0,qe=0,Pe=0,Ve=0,Ue=0,Mt=0,ht=0,_t=0,gt=0;if(_t=ye,ye=ye+48|0,I=_t+24|0,D=_t+12|0,ht=_t,k=SA(A,s,A,s,I)|0,!k&&(k=SA(A,s,l,f,D)|0,!k)){Ue=Xr(I,D)|0,Mt=((Ue|0)<0)<<31>>31,t[I>>2]=0,t[I+4>>2]=0,t[I+8>>2]=0,t[D>>2]=0,t[D+4>>2]=0,t[D+8>>2]=0,SA(A,s,A,s,I)|0&&kn(23313,23090,691,23299),SA(A,s,l,f,D)|0&&kn(23313,23090,696,23299),Cs(I),Cs(D),Ue?(ie=t[I>>2]|0,fe=+(Ue|0),qe=I+4|0,Ae=t[qe>>2]|0,Pe=I+8|0,ce=t[Pe>>2]|0,Ve=I,f=ie,k=Ae,l=ce,ve=+((t[D>>2]|0)-ie|0)/fe,Ne=+((t[D+4>>2]|0)-Ae|0)/fe,fe=+((t[D+8>>2]|0)-ce|0)/fe):(k=I+4|0,l=I+8|0,qe=k,Pe=l,Ve=I,f=t[I>>2]|0,k=t[k>>2]|0,l=t[l>>2]|0,ve=0,Ne=0,fe=0),t[ht>>2]=f,ce=ht+4|0,t[ce>>2]=k,Ae=ht+8|0,t[Ae>>2]=l;e:do if((Ue|0)<0)k=0;else for(X=0,ie=0,k=f;;){Z=+(ie>>>0)+4294967296*+(X|0),gt=ve*Z+ +(k|0),Q=Ne*Z+ +(t[qe>>2]|0),Z=fe*Z+ +(t[Pe>>2]|0),l=~~+h(+gt),I=~~+h(+Q),k=~~+h(+Z),gt=+Pt(+(+(l|0)-gt)),Q=+Pt(+(+(I|0)-Q)),Z=+Pt(+(+(k|0)-Z));do if(gt>Q&gt>Z)l=0-(I+k)|0,f=I;else if(D=0-l|0,Q>Z){f=D-k|0;break}else{f=I,k=D-I|0;break}while(!1);if(t[ht>>2]=l,t[ce>>2]=f,t[Ae>>2]=k,Va(ht),k=CA(A,s,ht,m+(ie<<3)|0)|0,k|0)break e;if(!((X|0)<(Mt|0)|(X|0)==(Mt|0)&ie>>>0<Ue>>>0)){k=0;break e}k=v(ie|0,X|0,1,0)|0,D=Te()|0,X=D,ie=k,k=t[Ve>>2]|0}while(!1);return ht=k,ye=_t,ht|0}return ht=k,ye=_t,ht|0}function Ds(A,s,l,f){A=A|0,s=s|0,l=l|0,f=f|0;var m=0,k=0,I=0;if((l|0)==0&(f|0)==0)return m=0,k=1,Xt(m|0),k|0;k=A,m=s,A=1,s=0;do I=(l&1|0)==0&!0,A=te((I?1:k)|0,(I?0:m)|0,A|0,s|0)|0,s=Te()|0,l=Ge(l|0,f|0,1)|0,f=Te()|0,k=te(k|0,m|0,k|0,m|0)|0,m=Te()|0;while(!((l|0)==0&(f|0)==0));return Xt(s|0),A|0}function ho(A,s,l){A=A|0,s=s|0,l=l|0;var f=0,m=0,k=0,I=0,D=0,Q=0,Z=0,X=0,ie=0,Ae=0;if(!(Bo(s,l)|0)||(s=ao(s)|0,f=+K[l>>3],m=+K[l+8>>3],m=s&m<0?m+6.283185307179586:m,Ae=t[A>>2]|0,(Ae|0)<=0))return Ae=0,Ae|0;if(ie=t[A+4>>2]|0,s){s=0,X=m,l=-1,A=0;e:for(;;){for(Z=A;I=+K[ie+(Z<<4)>>3],m=+K[ie+(Z<<4)+8>>3],A=(l+2|0)%(Ae|0)|0,k=+K[ie+(A<<4)>>3],D=+K[ie+(A<<4)+8>>3],I>k?(Q=I,I=D):(Q=k,k=I,I=m,m=D),f=f==k|f==Q?f+2220446049250313e-31:f,!!(f<k|f>Q);)if(l=Z+1|0,(l|0)>=(Ae|0)){l=22;break e}else A=Z,Z=l,l=A;if(D=I<0?I+6.283185307179586:I,I=m<0?m+6.283185307179586:m,X=D==X|I==X?X+-2220446049250313e-31:X,Q=D+(I-D)*((f-k)/(Q-k)),(Q<0?Q+6.283185307179586:Q)>X&&(s=s^1),A=Z+1|0,(A|0)>=(Ae|0)){l=22;break}else l=Z}if((l|0)==22)return s|0}else{s=0,X=m,l=-1,A=0;e:for(;;){for(Z=A;I=+K[ie+(Z<<4)>>3],m=+K[ie+(Z<<4)+8>>3],A=(l+2|0)%(Ae|0)|0,k=+K[ie+(A<<4)>>3],D=+K[ie+(A<<4)+8>>3],I>k?(Q=I,I=D):(Q=k,k=I,I=m,m=D),f=f==k|f==Q?f+2220446049250313e-31:f,!!(f<k|f>Q);)if(l=Z+1|0,(l|0)>=(Ae|0)){l=22;break e}else A=Z,Z=l,l=A;if(X=I==X|m==X?X+-2220446049250313e-31:X,I+(m-I)*((f-k)/(Q-k))>X&&(s=s^1),A=Z+1|0,(A|0)>=(Ae|0)){l=22;break}else l=Z}if((l|0)==22)return s|0}return 0}function $a(A,s){A=A|0,s=s|0;var l=0,f=0,m=0,k=0,I=0,D=0,Q=0,Z=0,X=0,ie=0,Ae=0,ce=0,fe=0,ve=0,Ne=0,qe=0,Pe=0;if(fe=t[A>>2]|0,!fe){t[s>>2]=0,t[s+4>>2]=0,t[s+8>>2]=0,t[s+12>>2]=0,t[s+16>>2]=0,t[s+20>>2]=0,t[s+24>>2]=0,t[s+28>>2]=0;return}if(ve=s+8|0,K[ve>>3]=17976931348623157e292,Ne=s+24|0,K[Ne>>3]=17976931348623157e292,K[s>>3]=-17976931348623157e292,qe=s+16|0,K[qe>>3]=-17976931348623157e292,!((fe|0)<=0)){for(Ae=t[A+4>>2]|0,Z=17976931348623157e292,X=-17976931348623157e292,ie=0,A=-1,k=17976931348623157e292,I=17976931348623157e292,Q=-17976931348623157e292,f=-17976931348623157e292,ce=0;l=+K[Ae+(ce<<4)>>3],D=+K[Ae+(ce<<4)+8>>3],A=A+2|0,m=+K[Ae+(((A|0)==(fe|0)?0:A)<<4)+8>>3],l<k&&(K[ve>>3]=l,k=l),D<I&&(K[Ne>>3]=D,I=D),l>Q?K[s>>3]=l:l=Q,D>f&&(K[qe>>3]=D,f=D),Z=D>0&D<Z?D:Z,X=D<0&D>X?D:X,ie=ie|+Pt(+(D-m))>3.141592653589793,A=ce+1|0,(A|0)!=(fe|0);)Pe=ce,Q=l,ce=A,A=Pe;ie&&(K[qe>>3]=X,K[Ne>>3]=Z)}}function fo(A,s){A=A|0,s=s|0;var l=0,f=0,m=0,k=0,I=0,D=0,Q=0,Z=0,X=0,ie=0,Ae=0,ce=0,fe=0,ve=0,Ne=0,qe=0,Pe=0,Ve=0,Ue=0,Mt=0,ht=0,_t=0;if(fe=t[A>>2]|0,fe){if(ve=s+8|0,K[ve>>3]=17976931348623157e292,Ne=s+24|0,K[Ne>>3]=17976931348623157e292,K[s>>3]=-17976931348623157e292,qe=s+16|0,K[qe>>3]=-17976931348623157e292,(fe|0)>0){for(m=t[A+4>>2]|0,Ae=17976931348623157e292,ce=-17976931348623157e292,f=0,l=-1,Q=17976931348623157e292,Z=17976931348623157e292,ie=-17976931348623157e292,I=-17976931348623157e292,Pe=0;k=+K[m+(Pe<<4)>>3],X=+K[m+(Pe<<4)+8>>3],ht=l+2|0,D=+K[m+(((ht|0)==(fe|0)?0:ht)<<4)+8>>3],k<Q&&(K[ve>>3]=k,Q=k),X<Z&&(K[Ne>>3]=X,Z=X),k>ie?K[s>>3]=k:k=ie,X>I&&(K[qe>>3]=X,I=X),Ae=X>0&X<Ae?X:Ae,ce=X<0&X>ce?X:ce,f=f|+Pt(+(X-D))>3.141592653589793,l=Pe+1|0,(l|0)!=(fe|0);)ht=Pe,ie=k,Pe=l,l=ht;f&&(K[qe>>3]=ce,K[Ne>>3]=Ae)}}else t[s>>2]=0,t[s+4>>2]=0,t[s+8>>2]=0,t[s+12>>2]=0,t[s+16>>2]=0,t[s+20>>2]=0,t[s+24>>2]=0,t[s+28>>2]=0;if(ht=A+8|0,l=t[ht>>2]|0,!((l|0)<=0)){Mt=A+12|0,Ue=0;do if(m=t[Mt>>2]|0,f=Ue,Ue=Ue+1|0,Ne=s+(Ue<<5)|0,qe=t[m+(f<<3)>>2]|0,qe){if(Pe=s+(Ue<<5)+8|0,K[Pe>>3]=17976931348623157e292,A=s+(Ue<<5)+24|0,K[A>>3]=17976931348623157e292,K[Ne>>3]=-17976931348623157e292,Ve=s+(Ue<<5)+16|0,K[Ve>>3]=-17976931348623157e292,(qe|0)>0){for(fe=t[m+(f<<3)+4>>2]|0,Ae=17976931348623157e292,ce=-17976931348623157e292,m=0,f=-1,ve=0,Q=17976931348623157e292,Z=17976931348623157e292,X=-17976931348623157e292,I=-17976931348623157e292;k=+K[fe+(ve<<4)>>3],ie=+K[fe+(ve<<4)+8>>3],f=f+2|0,D=+K[fe+(((f|0)==(qe|0)?0:f)<<4)+8>>3],k<Q&&(K[Pe>>3]=k,Q=k),ie<Z&&(K[A>>3]=ie,Z=ie),k>X?K[Ne>>3]=k:k=X,ie>I&&(K[Ve>>3]=ie,I=ie),Ae=ie>0&ie<Ae?ie:Ae,ce=ie<0&ie>ce?ie:ce,m=m|+Pt(+(ie-D))>3.141592653589793,f=ve+1|0,(f|0)!=(qe|0);)_t=ve,ve=f,X=k,f=_t;m&&(K[Ve>>3]=ce,K[A>>3]=Ae)}}else t[Ne>>2]=0,t[Ne+4>>2]=0,t[Ne+8>>2]=0,t[Ne+12>>2]=0,t[Ne+16>>2]=0,t[Ne+20>>2]=0,t[Ne+24>>2]=0,t[Ne+28>>2]=0,l=t[ht>>2]|0;while((Ue|0)<(l|0))}}function Ps(A,s,l){A=A|0,s=s|0,l=l|0;var f=0,m=0,k=0;if(!(ho(A,s,l)|0))return m=0,m|0;if(m=A+8|0,(t[m>>2]|0)<=0)return m=1,m|0;for(f=A+12|0,A=0;;){if(k=A,A=A+1|0,ho((t[f>>2]|0)+(k<<3)|0,s+(A<<5)|0,l)|0){A=0,f=6;break}if((A|0)>=(t[m>>2]|0)){A=1,f=6;break}}return(f|0)==6?A|0:0}function or(){return 8}function cl(){return 16}function hl(){return 168}function fl(){return 8}function po(){return 16}function Or(){return 12}function $A(){return 8}function Uo(A){return A=A|0,+(+((t[A>>2]|0)>>>0)+4294967296*+(t[A+4>>2]|0))}function ja(A){A=A|0;var s=0,l=0;return l=+K[A>>3],s=+K[A+8>>3],+ +Ht(+(l*l+s*s))}function Qo(A,s,l,f,m){A=A|0,s=s|0,l=l|0,f=f|0,m=m|0;var k=0,I=0,D=0,Q=0,Z=0,X=0,ie=0,Ae=0;Z=+K[A>>3],Q=+K[s>>3]-Z,D=+K[A+8>>3],I=+K[s+8>>3]-D,ie=+K[l>>3],k=+K[f>>3]-ie,Ae=+K[l+8>>3],X=+K[f+8>>3]-Ae,k=(k*(D-Ae)-(Z-ie)*X)/(Q*X-I*k),K[m>>3]=Z+Q*k,K[m+8>>3]=D+I*k}function Wa(A,s){return A=A|0,s=s|0,+Pt(+(+K[A>>3]-+K[s>>3]))<11920928955078125e-23?(s=+Pt(+(+K[A+8>>3]-+K[s+8>>3]))<11920928955078125e-23,s|0):(s=0,s|0)}function ii(A,s){A=A|0,s=s|0;var l=0,f=0,m=0;return m=+K[A>>3]-+K[s>>3],f=+K[A+8>>3]-+K[s+8>>3],l=+K[A+16>>3]-+K[s+16>>3],+(m*m+f*f+l*l)}function Ni(A,s){A=A|0,s=s|0;var l=0,f=0,m=0;l=+K[A>>3],f=+$t(+l),l=+sn(+l),K[s+16>>3]=l,l=+K[A+8>>3],m=f*+$t(+l),K[s>>3]=m,l=f*+sn(+l),K[s+8>>3]=l}function Pi(A,s,l){A=A|0,s=s|0,l=l|0;var f=0,m=0,k=0;if(k=ye,ye=ye+16|0,m=k,f=Si(A,s)|0,(l+-1|0)>>>0>5||(f=(f|0)!=0,(l|0)==1&f))return m=-1,ye=k,m|0;do if(Vr(A,s,m)|0)f=-1;else if(f){f=((t[21936+(l<<2)>>2]|0)+5-(t[m>>2]|0)|0)%5|0;break}else{f=((t[21968+(l<<2)>>2]|0)+6-(t[m>>2]|0)|0)%6|0;break}while(!1);return m=f,ye=k,m|0}function Vr(A,s,l){A=A|0,s=s|0,l=l|0;var f=0,m=0,k=0,I=0,D=0,Q=0,Z=0;if(Z=ye,ye=ye+32|0,I=Z+16|0,D=Z,f=_i(A,s,I)|0,f|0)return l=f,ye=Z,l|0;k=Ua(A,s)|0,Q=Jr(A,s)|0,sl(k,D),f=pa(k,t[I>>2]|0)|0;e:do if(Ri(k)|0){do switch(k|0){case 4:{A=0;break}case 14:{A=1;break}case 24:{A=2;break}case 38:{A=3;break}case 49:{A=4;break}case 58:{A=5;break}case 63:{A=6;break}case 72:{A=7;break}case 83:{A=8;break}case 97:{A=9;break}case 107:{A=10;break}case 117:{A=11;break}default:{f=1;break e}}while(!1);if(m=t[22e3+(A*24|0)+8>>2]|0,s=t[22e3+(A*24|0)+16>>2]|0,A=t[I>>2]|0,(A|0)!=(t[D>>2]|0)&&(D=Oa(k)|0,A=t[I>>2]|0,D|(A|0)==(s|0)&&(f=(f+1|0)%6|0)),(Q|0)==3&(A|0)==(s|0)){f=(f+5|0)%6|0,m=22;break}(Q|0)==5&(A|0)==(m|0)&&(f=(f+1|0)%6|0),m=22}else m=22;while(!1);return(m|0)==22&&(t[l>>2]=f,f=0),l=f,ye=Z,l|0}function Tn(A,s,l,f){A=A|0,s=s|0,l=l|0,f=f|0;var m=0,k=0,I=0,D=0,Q=0,Z=0,X=0,ie=0,Ae=0,ce=0,fe=0,ve=0,Ne=0,qe=0,Pe=0,Ve=0;if(Ve=ye,ye=ye+32|0,Pe=Ve+24|0,Ne=Ve+20|0,fe=Ve+8|0,ce=Ve+16|0,Ae=Ve,Q=(Si(A,s)|0)==0,Q=Q?6:5,X=Ee(A|0,s|0,52)|0,Te()|0,X=X&15,Q>>>0<=l>>>0)return f=2,ye=Ve,f|0;ie=(X|0)==0,!ie&&(ve=Se(7,0,(X^15)*3|0)|0,(ve&A|0)==0&((Te()|0)&s|0)==0)?m=l:k=4;e:do if((k|0)==4){if(m=(Si(A,s)|0)!=0,((m?4:5)|0)<(l|0)||Vr(A,s,Pe)|0||(k=(t[Pe>>2]|0)+l|0,m?m=22288+(((k|0)%5|0)<<2)|0:m=22320+(((k|0)%6|0)<<2)|0,ve=t[m>>2]|0,(ve|0)==7))return f=1,ye=Ve,f|0;t[Ne>>2]=0,m=Yi(A,s,ve,Ne,fe)|0;do if(!m){if(D=fe,Z=t[D>>2]|0,D=t[D+4>>2]|0,I=D>>>0<s>>>0|(D|0)==(s|0)&Z>>>0<A>>>0,k=I?Z:A,I=I?D:s,!ie&&(ie=Se(7,0,(X^15)*3|0)|0,(Z&ie|0)==0&(D&(Te()|0)|0)==0))m=l;else{if(D=(l+-1+Q|0)%(Q|0)|0,m=Si(A,s)|0,(D|0)<0&&kn(23313,23315,245,23324),Q=(m|0)!=0,((Q?4:5)|0)<(D|0)&&kn(23313,23315,245,23324),Vr(A,s,Pe)|0&&kn(23313,23315,245,23324),m=(t[Pe>>2]|0)+D|0,Q?m=22288+(((m|0)%5|0)<<2)|0:m=22320+(((m|0)%6|0)<<2)|0,D=t[m>>2]|0,(D|0)==7&&kn(23313,23315,245,23324),t[ce>>2]=0,m=Yi(A,s,D,ce,Ae)|0,m|0)break;Z=Ae,Q=t[Z>>2]|0,Z=t[Z+4>>2]|0;do if(Z>>>0<I>>>0|(Z|0)==(I|0)&Q>>>0<k>>>0){if(Si(Q,Z)|0?k=Qs(Q,Z,A,s)|0:k=t[22384+((((t[ce>>2]|0)+(t[22352+(D<<2)>>2]|0)|0)%6|0)<<2)>>2]|0,m=Si(Q,Z)|0,(k+-1|0)>>>0>5){m=-1,k=Q,I=Z;break}if(m=(m|0)!=0,(k|0)==1&m){m=-1,k=Q,I=Z;break}do if(Vr(Q,Z,Pe)|0)m=-1;else if(m){m=((t[21936+(k<<2)>>2]|0)+5-(t[Pe>>2]|0)|0)%5|0;break}else{m=((t[21968+(k<<2)>>2]|0)+6-(t[Pe>>2]|0)|0)%6|0;break}while(!1);k=Q,I=Z}else m=l;while(!1);D=fe,Z=t[D>>2]|0,D=t[D+4>>2]|0}if((k|0)==(Z|0)&(I|0)==(D|0)){if(Q=(Si(Z,D)|0)!=0,Q?A=Qs(Z,D,A,s)|0:A=t[22384+((((t[Ne>>2]|0)+(t[22352+(ve<<2)>>2]|0)|0)%6|0)<<2)>>2]|0,m=Si(Z,D)|0,(A+-1|0)>>>0<=5&&(qe=(m|0)!=0,!((A|0)==1&qe)))do if(Vr(Z,D,Pe)|0)m=-1;else if(qe){m=((t[21936+(A<<2)>>2]|0)+5-(t[Pe>>2]|0)|0)%5|0;break}else{m=((t[21968+(A<<2)>>2]|0)+6-(t[Pe>>2]|0)|0)%6|0;break}while(!1);else m=-1;m=m+1|0,m=(m|0)==6|Q&(m|0)==5?0:m}s=I,A=k;break e}while(!1);return f=m,ye=Ve,f|0}while(!1);return qe=Se(m|0,0,56)|0,Pe=Te()|0|s&-2130706433|536870912,t[f>>2]=qe|A,t[f+4>>2]=Pe,f=0,ye=Ve,f|0}function IA(A,s,l){A=A|0,s=s|0,l=l|0;var f=0,m=0,k=0;return k=(Si(A,s)|0)==0,f=Tn(A,s,0,l)|0,m=(f|0)==0,k?!m||(f=Tn(A,s,1,l+8|0)|0,f|0)||(f=Tn(A,s,2,l+16|0)|0,f|0)||(f=Tn(A,s,3,l+24|0)|0,f|0)||(f=Tn(A,s,4,l+32|0)|0,f)?(k=f,k|0):Tn(A,s,5,l+40|0)|0:!m||(f=Tn(A,s,1,l+8|0)|0,f|0)||(f=Tn(A,s,2,l+16|0)|0,f|0)||(f=Tn(A,s,3,l+24|0)|0,f|0)||(f=Tn(A,s,4,l+32|0)|0,f|0)?(k=f,k|0):(k=l+40|0,t[k>>2]=0,t[k+4>>2]=0,k=0,k|0)}function Ya(A,s,l){A=A|0,s=s|0,l=l|0;var f=0,m=0,k=0,I=0,D=0,Q=0;return Q=ye,ye=ye+192|0,m=Q,k=Q+168|0,I=Ee(A|0,s|0,56)|0,Te()|0,I=I&7,D=s&-2130706433|134217728,f=_i(A,D,k)|0,f|0?(D=f,ye=Q,D|0):(s=Ee(A|0,s|0,52)|0,Te()|0,s=s&15,Si(A,D)|0?Zs(k,s,I,1,m):Bi(k,s,I,1,m),D=m+8|0,t[l>>2]=t[D>>2],t[l+4>>2]=t[D+4>>2],t[l+8>>2]=t[D+8>>2],t[l+12>>2]=t[D+12>>2],D=0,ye=Q,D|0)}function fs(A,s){A=A|0,s=s|0;var l=0,f=0,m=0,k=0;return m=ye,ye=ye+16|0,l=m,!(!0&(s&2013265920|0)==536870912)||(f=s&-2130706433|134217728,!(Hs(A,f)|0))?(f=0,ye=m,f|0):(k=Ee(A|0,s|0,56)|0,Te()|0,k=(Tn(A,f,k&7,l)|0)==0,f=l,f=k&((t[f>>2]|0)==(A|0)?(t[f+4>>2]|0)==(s|0):0)&1,ye=m,f|0)}function xa(A,s,l){A=A|0,s=s|0,l=l|0;var f=0;(s|0)>0?(f=y(s,4)|0,t[A>>2]=f,f||kn(23337,23360,40,23374)):t[A>>2]=0,t[A+4>>2]=s,t[A+8>>2]=0,t[A+12>>2]=l}function pr(A){A=A|0;var s=0,l=0,f=0,m=0,k=0,I=0,D=0;m=A+4|0,k=A+12|0,I=A+8|0;e:for(;;){for(l=t[m>>2]|0,s=0;;){if((s|0)>=(l|0))break e;if(f=t[A>>2]|0,D=t[f+(s<<2)>>2]|0,!D)s=s+1|0;else break}s=f+(~~(+Pt(+(+Bn(10,+ +(15-(t[k>>2]|0)|0))*(+K[D>>3]+ +K[D+8>>3])))%+(l|0))>>>0<<2)|0,l=t[s>>2]|0;t:do if(l|0){if(f=D+32|0,(l|0)==(D|0))t[s>>2]=t[f>>2];else{if(l=l+32|0,s=t[l>>2]|0,!s)break;for(;(s|0)!=(D|0);)if(l=s+32|0,s=t[l>>2]|0,!s)break t;t[l>>2]=t[f>>2]}p(D),t[I>>2]=(t[I>>2]|0)+-1}while(!1)}p(t[A>>2]|0)}function Hr(A){A=A|0;var s=0,l=0,f=0;for(f=t[A+4>>2]|0,l=0;;){if((l|0)>=(f|0)){s=0,l=4;break}if(s=t[(t[A>>2]|0)+(l<<2)>>2]|0,!s)l=l+1|0;else{l=4;break}}return(l|0)==4?s|0:0}function ct(A,s){A=A|0,s=s|0;var l=0,f=0,m=0,k=0;if(l=~~(+Pt(+(+Bn(10,+ +(15-(t[A+12>>2]|0)|0))*(+K[s>>3]+ +K[s+8>>3])))%+(t[A+4>>2]|0))>>>0,l=(t[A>>2]|0)+(l<<2)|0,f=t[l>>2]|0,!f)return k=1,k|0;k=s+32|0;do if((f|0)!=(s|0)){if(l=t[f+32>>2]|0,!l)return k=1,k|0;for(m=l;;){if((m|0)==(s|0)){m=8;break}if(l=t[m+32>>2]|0,l)f=m,m=l;else{l=1,m=10;break}}if((m|0)==8){t[f+32>>2]=t[k>>2];break}else if((m|0)==10)return l|0}else t[l>>2]=t[k>>2];while(!1);return p(s),k=A+8|0,t[k>>2]=(t[k>>2]|0)+-1,k=0,k|0}function wt(A,s,l){A=A|0,s=s|0,l=l|0;var f=0,m=0,k=0,I=0;k=Vi(40)|0,k||kn(23390,23360,98,23403),t[k>>2]=t[s>>2],t[k+4>>2]=t[s+4>>2],t[k+8>>2]=t[s+8>>2],t[k+12>>2]=t[s+12>>2],m=k+16|0,t[m>>2]=t[l>>2],t[m+4>>2]=t[l+4>>2],t[m+8>>2]=t[l+8>>2],t[m+12>>2]=t[l+12>>2],t[k+32>>2]=0,m=~~(+Pt(+(+Bn(10,+ +(15-(t[A+12>>2]|0)|0))*(+K[s>>3]+ +K[s+8>>3])))%+(t[A+4>>2]|0))>>>0,m=(t[A>>2]|0)+(m<<2)|0,f=t[m>>2]|0;do if(!f)t[m>>2]=k;else{for(;!(_A(f,s)|0&&_A(f+16|0,l)|0);)if(m=t[f+32>>2]|0,f=m|0?m:f,!(t[f+32>>2]|0)){I=10;break}if((I|0)==10){t[f+32>>2]=k;break}return p(k),I=f,I|0}while(!1);return I=A+8|0,t[I>>2]=(t[I>>2]|0)+1,I=k,I|0}function jA(A,s,l){A=A|0,s=s|0,l=l|0;var f=0,m=0;if(m=~~(+Pt(+(+Bn(10,+ +(15-(t[A+12>>2]|0)|0))*(+K[s>>3]+ +K[s+8>>3])))%+(t[A+4>>2]|0))>>>0,m=t[(t[A>>2]|0)+(m<<2)>>2]|0,!m)return l=0,l|0;if(!l){for(A=m;;){if(_A(A,s)|0){f=10;break}if(A=t[A+32>>2]|0,!A){A=0,f=10;break}}if((f|0)==10)return A|0}for(A=m;;){if(_A(A,s)|0&&_A(A+16|0,l)|0){f=10;break}if(A=t[A+32>>2]|0,!A){A=0,f=10;break}}return(f|0)==10?A|0:0}function Go(A,s){A=A|0,s=s|0;var l=0;if(l=~~(+Pt(+(+Bn(10,+ +(15-(t[A+12>>2]|0)|0))*(+K[s>>3]+ +K[s+8>>3])))%+(t[A+4>>2]|0))>>>0,A=t[(t[A>>2]|0)+(l<<2)>>2]|0,!A)return l=0,l|0;for(;;){if(_A(A,s)|0){s=5;break}if(A=t[A+32>>2]|0,!A){A=0,s=5;break}}return(s|0)==5?A|0:0}function qo(){return 23424}function Mi(A){return A=+A,+ +B(+A)}function WA(A){return A=+A,~~+Mi(A)|0}function Vi(A){A=A|0;var s=0,l=0,f=0,m=0,k=0,I=0,D=0,Q=0,Z=0,X=0,ie=0,Ae=0,ce=0,fe=0,ve=0,Ne=0,qe=0,Pe=0,Ve=0,Ue=0,Mt=0;Mt=ye,ye=ye+16|0,Ae=Mt;do if(A>>>0<245){if(Z=A>>>0<11?16:A+11&-8,A=Z>>>3,ie=t[5857]|0,l=ie>>>A,l&3|0)return s=(l&1^1)+A|0,A=23468+(s<<1<<2)|0,l=A+8|0,f=t[l>>2]|0,m=f+8|0,k=t[m>>2]|0,(k|0)==(A|0)?t[5857]=ie&~(1<<s):(t[k+12>>2]=A,t[l>>2]=k),Ue=s<<3,t[f+4>>2]=Ue|3,Ue=f+Ue+4|0,t[Ue>>2]=t[Ue>>2]|1,Ue=m,ye=Mt,Ue|0;if(X=t[5859]|0,Z>>>0>X>>>0){if(l|0)return s=2<<A,s=l<<A&(s|0-s),s=(s&0-s)+-1|0,D=s>>>12&16,s=s>>>D,l=s>>>5&8,s=s>>>l,k=s>>>2&4,s=s>>>k,A=s>>>1&2,s=s>>>A,f=s>>>1&1,f=(l|D|k|A|f)+(s>>>f)|0,s=23468+(f<<1<<2)|0,A=s+8|0,k=t[A>>2]|0,D=k+8|0,l=t[D>>2]|0,(l|0)==(s|0)?(A=ie&~(1<<f),t[5857]=A):(t[l+12>>2]=s,t[A>>2]=l,A=ie),Ue=f<<3,I=Ue-Z|0,t[k+4>>2]=Z|3,m=k+Z|0,t[m+4>>2]=I|1,t[k+Ue>>2]=I,X|0&&(f=t[5862]|0,s=X>>>3,l=23468+(s<<1<<2)|0,s=1<<s,A&s?(A=l+8|0,s=t[A>>2]|0):(t[5857]=A|s,s=l,A=l+8|0),t[A>>2]=f,t[s+12>>2]=f,t[f+8>>2]=s,t[f+12>>2]=l),t[5859]=I,t[5862]=m,Ue=D,ye=Mt,Ue|0;if(k=t[5858]|0,k){for(l=(k&0-k)+-1|0,m=l>>>12&16,l=l>>>m,f=l>>>5&8,l=l>>>f,I=l>>>2&4,l=l>>>I,D=l>>>1&2,l=l>>>D,Q=l>>>1&1,Q=t[23732+((f|m|I|D|Q)+(l>>>Q)<<2)>>2]|0,l=Q,D=Q,Q=(t[Q+4>>2]&-8)-Z|0;A=t[l+16>>2]|0,!(!A&&(A=t[l+20>>2]|0,!A));)I=(t[A+4>>2]&-8)-Z|0,m=I>>>0<Q>>>0,l=A,D=m?A:D,Q=m?I:Q;if(I=D+Z|0,I>>>0>D>>>0){m=t[D+24>>2]|0,s=t[D+12>>2]|0;do if((s|0)==(D|0)){if(A=D+20|0,s=t[A>>2]|0,!s&&(A=D+16|0,s=t[A>>2]|0,!s)){l=0;break}for(;;)if(f=s+20|0,l=t[f>>2]|0,l)s=l,A=f;else if(f=s+16|0,l=t[f>>2]|0,l)s=l,A=f;else break;t[A>>2]=0,l=s}else l=t[D+8>>2]|0,t[l+12>>2]=s,t[s+8>>2]=l,l=s;while(!1);do if(m|0){if(s=t[D+28>>2]|0,A=23732+(s<<2)|0,(D|0)==(t[A>>2]|0)){if(t[A>>2]=l,!l){t[5858]=k&~(1<<s);break}}else if(Ue=m+16|0,t[((t[Ue>>2]|0)==(D|0)?Ue:m+20|0)>>2]=l,!l)break;t[l+24>>2]=m,s=t[D+16>>2]|0,s|0&&(t[l+16>>2]=s,t[s+24>>2]=l),s=t[D+20>>2]|0,s|0&&(t[l+20>>2]=s,t[s+24>>2]=l)}while(!1);return Q>>>0<16?(Ue=Q+Z|0,t[D+4>>2]=Ue|3,Ue=D+Ue+4|0,t[Ue>>2]=t[Ue>>2]|1):(t[D+4>>2]=Z|3,t[I+4>>2]=Q|1,t[I+Q>>2]=Q,X|0&&(f=t[5862]|0,s=X>>>3,l=23468+(s<<1<<2)|0,s=1<<s,s&ie?(A=l+8|0,s=t[A>>2]|0):(t[5857]=s|ie,s=l,A=l+8|0),t[A>>2]=f,t[s+12>>2]=f,t[f+8>>2]=s,t[f+12>>2]=l),t[5859]=Q,t[5862]=I),Ue=D+8|0,ye=Mt,Ue|0}else ie=Z}else ie=Z}else ie=Z}else if(A>>>0<=4294967231)if(A=A+11|0,Z=A&-8,f=t[5858]|0,f){m=0-Z|0,A=A>>>8,A?Z>>>0>16777215?Q=31:(ie=(A+1048320|0)>>>16&8,ve=A<<ie,D=(ve+520192|0)>>>16&4,ve=ve<<D,Q=(ve+245760|0)>>>16&2,Q=14-(D|ie|Q)+(ve<<Q>>>15)|0,Q=Z>>>(Q+7|0)&1|Q<<1):Q=0,l=t[23732+(Q<<2)>>2]|0;e:do if(!l)l=0,A=0,ve=61;else for(A=0,D=Z<<((Q|0)==31?0:25-(Q>>>1)|0),k=0;;){if(I=(t[l+4>>2]&-8)-Z|0,I>>>0<m>>>0)if(I)A=l,m=I;else{A=l,m=0,ve=65;break e}if(ve=t[l+20>>2]|0,l=t[l+16+(D>>>31<<2)>>2]|0,k=(ve|0)==0|(ve|0)==(l|0)?k:ve,l)D=D<<1;else{l=k,ve=61;break}}while(!1);if((ve|0)==61){if((l|0)==0&(A|0)==0){if(A=2<<Q,A=(A|0-A)&f,!A){ie=Z;break}ie=(A&0-A)+-1|0,I=ie>>>12&16,ie=ie>>>I,k=ie>>>5&8,ie=ie>>>k,D=ie>>>2&4,ie=ie>>>D,Q=ie>>>1&2,ie=ie>>>Q,l=ie>>>1&1,A=0,l=t[23732+((k|I|D|Q|l)+(ie>>>l)<<2)>>2]|0}l?ve=65:(D=A,I=m)}if((ve|0)==65)for(k=l;;)if(ie=(t[k+4>>2]&-8)-Z|0,l=ie>>>0<m>>>0,m=l?ie:m,A=l?k:A,l=t[k+16>>2]|0,l||(l=t[k+20>>2]|0),l)k=l;else{D=A,I=m;break}if(D|0&&I>>>0<((t[5859]|0)-Z|0)>>>0&&(X=D+Z|0,X>>>0>D>>>0)){k=t[D+24>>2]|0,s=t[D+12>>2]|0;do if((s|0)==(D|0)){if(A=D+20|0,s=t[A>>2]|0,!s&&(A=D+16|0,s=t[A>>2]|0,!s)){s=0;break}for(;;)if(m=s+20|0,l=t[m>>2]|0,l)s=l,A=m;else if(m=s+16|0,l=t[m>>2]|0,l)s=l,A=m;else break;t[A>>2]=0}else Ue=t[D+8>>2]|0,t[Ue+12>>2]=s,t[s+8>>2]=Ue;while(!1);do if(k){if(A=t[D+28>>2]|0,l=23732+(A<<2)|0,(D|0)==(t[l>>2]|0)){if(t[l>>2]=s,!s){f=f&~(1<<A),t[5858]=f;break}}else if(Ue=k+16|0,t[((t[Ue>>2]|0)==(D|0)?Ue:k+20|0)>>2]=s,!s)break;t[s+24>>2]=k,A=t[D+16>>2]|0,A|0&&(t[s+16>>2]=A,t[A+24>>2]=s),A=t[D+20>>2]|0,A&&(t[s+20>>2]=A,t[A+24>>2]=s)}while(!1);e:do if(I>>>0<16)Ue=I+Z|0,t[D+4>>2]=Ue|3,Ue=D+Ue+4|0,t[Ue>>2]=t[Ue>>2]|1;else{if(t[D+4>>2]=Z|3,t[X+4>>2]=I|1,t[X+I>>2]=I,s=I>>>3,I>>>0<256){l=23468+(s<<1<<2)|0,A=t[5857]|0,s=1<<s,A&s?(A=l+8|0,s=t[A>>2]|0):(t[5857]=A|s,s=l,A=l+8|0),t[A>>2]=X,t[s+12>>2]=X,t[X+8>>2]=s,t[X+12>>2]=l;break}if(s=I>>>8,s?I>>>0>16777215?l=31:(Ve=(s+1048320|0)>>>16&8,Ue=s<<Ve,Pe=(Ue+520192|0)>>>16&4,Ue=Ue<<Pe,l=(Ue+245760|0)>>>16&2,l=14-(Pe|Ve|l)+(Ue<<l>>>15)|0,l=I>>>(l+7|0)&1|l<<1):l=0,s=23732+(l<<2)|0,t[X+28>>2]=l,A=X+16|0,t[A+4>>2]=0,t[A>>2]=0,A=1<<l,!(f&A)){t[5858]=f|A,t[s>>2]=X,t[X+24>>2]=s,t[X+12>>2]=X,t[X+8>>2]=X;break}s=t[s>>2]|0;t:do if((t[s+4>>2]&-8|0)!=(I|0)){for(f=I<<((l|0)==31?0:25-(l>>>1)|0);l=s+16+(f>>>31<<2)|0,A=t[l>>2]|0,!!A;)if((t[A+4>>2]&-8|0)==(I|0)){s=A;break t}else f=f<<1,s=A;t[l>>2]=X,t[X+24>>2]=s,t[X+12>>2]=X,t[X+8>>2]=X;break e}while(!1);Ve=s+8|0,Ue=t[Ve>>2]|0,t[Ue+12>>2]=X,t[Ve>>2]=X,t[X+8>>2]=Ue,t[X+12>>2]=s,t[X+24>>2]=0}while(!1);return Ue=D+8|0,ye=Mt,Ue|0}else ie=Z}else ie=Z;else ie=-1;while(!1);if(l=t[5859]|0,l>>>0>=ie>>>0)return s=l-ie|0,A=t[5862]|0,s>>>0>15?(Ue=A+ie|0,t[5862]=Ue,t[5859]=s,t[Ue+4>>2]=s|1,t[A+l>>2]=s,t[A+4>>2]=ie|3):(t[5859]=0,t[5862]=0,t[A+4>>2]=l|3,Ue=A+l+4|0,t[Ue>>2]=t[Ue>>2]|1),Ue=A+8|0,ye=Mt,Ue|0;if(I=t[5860]|0,I>>>0>ie>>>0)return Pe=I-ie|0,t[5860]=Pe,Ue=t[5863]|0,Ve=Ue+ie|0,t[5863]=Ve,t[Ve+4>>2]=Pe|1,t[Ue+4>>2]=ie|3,Ue=Ue+8|0,ye=Mt,Ue|0;if(t[5975]|0?A=t[5977]|0:(t[5977]=4096,t[5976]=4096,t[5978]=-1,t[5979]=-1,t[5980]=0,t[5968]=0,t[5975]=Ae&-16^1431655768,A=4096),D=ie+48|0,Q=ie+47|0,k=A+Q|0,m=0-A|0,Z=k&m,Z>>>0<=ie>>>0||(A=t[5967]|0,A|0&&(X=t[5965]|0,Ae=X+Z|0,Ae>>>0<=X>>>0|Ae>>>0>A>>>0)))return Ue=0,ye=Mt,Ue|0;e:do if(t[5968]&4)s=0,ve=143;else{l=t[5863]|0;t:do if(l){for(f=23876;Ae=t[f>>2]|0,!(Ae>>>0<=l>>>0&&(Ae+(t[f+4>>2]|0)|0)>>>0>l>>>0);)if(A=t[f+8>>2]|0,A)f=A;else{ve=128;break t}if(s=k-I&m,s>>>0<2147483647)if(A=F(s|0)|0,(A|0)==((t[f>>2]|0)+(t[f+4>>2]|0)|0)){if((A|0)!=-1){I=s,k=A,ve=145;break e}}else f=A,ve=136;else s=0}else ve=128;while(!1);do if((ve|0)==128)if(l=F(0)|0,(l|0)!=-1&&(s=l,ce=t[5976]|0,fe=ce+-1|0,s=(fe&s|0?(fe+s&0-ce)-s|0:0)+Z|0,ce=t[5965]|0,fe=s+ce|0,s>>>0>ie>>>0&s>>>0<2147483647)){if(Ae=t[5967]|0,Ae|0&&fe>>>0<=ce>>>0|fe>>>0>Ae>>>0){s=0;break}if(A=F(s|0)|0,(A|0)==(l|0)){I=s,k=l,ve=145;break e}else f=A,ve=136}else s=0;while(!1);do if((ve|0)==136){if(l=0-s|0,!(D>>>0>s>>>0&(s>>>0<2147483647&(f|0)!=-1)))if((f|0)==-1){s=0;break}else{I=s,k=f,ve=145;break e}if(A=t[5977]|0,A=Q-s+A&0-A,A>>>0>=2147483647){I=s,k=f,ve=145;break e}if((F(A|0)|0)==-1){F(l|0)|0,s=0;break}else{I=A+s|0,k=f,ve=145;break e}}while(!1);t[5968]=t[5968]|4,ve=143}while(!1);if((ve|0)==143&&Z>>>0<2147483647&&(Pe=F(Z|0)|0,fe=F(0)|0,Ne=fe-Pe|0,qe=Ne>>>0>(ie+40|0)>>>0,!((Pe|0)==-1|qe^1|Pe>>>0<fe>>>0&((Pe|0)!=-1&(fe|0)!=-1)^1))&&(I=qe?Ne:s,k=Pe,ve=145),(ve|0)==145){s=(t[5965]|0)+I|0,t[5965]=s,s>>>0>(t[5966]|0)>>>0&&(t[5966]=s),Q=t[5863]|0;e:do if(Q){for(s=23876;;){if(A=t[s>>2]|0,l=t[s+4>>2]|0,(k|0)==(A+l|0)){ve=154;break}if(f=t[s+8>>2]|0,f)s=f;else break}if((ve|0)==154&&(Ve=s+4|0,(t[s+12>>2]&8|0)==0)&&k>>>0>Q>>>0&A>>>0<=Q>>>0){t[Ve>>2]=l+I,Ue=(t[5860]|0)+I|0,Pe=Q+8|0,Pe=Pe&7|0?0-Pe&7:0,Ve=Q+Pe|0,Pe=Ue-Pe|0,t[5863]=Ve,t[5860]=Pe,t[Ve+4>>2]=Pe|1,t[Q+Ue+4>>2]=40,t[5864]=t[5979];break}for(k>>>0<(t[5861]|0)>>>0&&(t[5861]=k),l=k+I|0,s=23876;;){if((t[s>>2]|0)==(l|0)){ve=162;break}if(A=t[s+8>>2]|0,A)s=A;else break}if((ve|0)==162&&!(t[s+12>>2]&8|0)){t[s>>2]=k,X=s+4|0,t[X>>2]=(t[X>>2]|0)+I,X=k+8|0,X=k+(X&7|0?0-X&7:0)|0,s=l+8|0,s=l+(s&7|0?0-s&7:0)|0,Z=X+ie|0,D=s-X-ie|0,t[X+4>>2]=ie|3;t:do if((Q|0)==(s|0))Ue=(t[5860]|0)+D|0,t[5860]=Ue,t[5863]=Z,t[Z+4>>2]=Ue|1;else{if((t[5862]|0)==(s|0)){Ue=(t[5859]|0)+D|0,t[5859]=Ue,t[5862]=Z,t[Z+4>>2]=Ue|1,t[Z+Ue>>2]=Ue;break}if(A=t[s+4>>2]|0,(A&3|0)==1){I=A&-8,f=A>>>3;n:do if(A>>>0<256)if(A=t[s+8>>2]|0,l=t[s+12>>2]|0,(l|0)==(A|0)){t[5857]=t[5857]&~(1<<f);break}else{t[A+12>>2]=l,t[l+8>>2]=A;break}else{k=t[s+24>>2]|0,A=t[s+12>>2]|0;do if((A|0)==(s|0)){if(l=s+16|0,f=l+4|0,A=t[f>>2]|0,A)l=f;else if(A=t[l>>2]|0,!A){A=0;break}for(;;)if(m=A+20|0,f=t[m>>2]|0,f)A=f,l=m;else if(m=A+16|0,f=t[m>>2]|0,f)A=f,l=m;else break;t[l>>2]=0}else Ue=t[s+8>>2]|0,t[Ue+12>>2]=A,t[A+8>>2]=Ue;while(!1);if(!k)break;l=t[s+28>>2]|0,f=23732+(l<<2)|0;do if((t[f>>2]|0)!=(s|0)){if(Ue=k+16|0,t[((t[Ue>>2]|0)==(s|0)?Ue:k+20|0)>>2]=A,!A)break n}else{if(t[f>>2]=A,A|0)break;t[5858]=t[5858]&~(1<<l);break n}while(!1);if(t[A+24>>2]=k,l=s+16|0,f=t[l>>2]|0,f|0&&(t[A+16>>2]=f,t[f+24>>2]=A),l=t[l+4>>2]|0,!l)break;t[A+20>>2]=l,t[l+24>>2]=A}while(!1);s=s+I|0,m=I+D|0}else m=D;if(s=s+4|0,t[s>>2]=t[s>>2]&-2,t[Z+4>>2]=m|1,t[Z+m>>2]=m,s=m>>>3,m>>>0<256){l=23468+(s<<1<<2)|0,A=t[5857]|0,s=1<<s,A&s?(A=l+8|0,s=t[A>>2]|0):(t[5857]=A|s,s=l,A=l+8|0),t[A>>2]=Z,t[s+12>>2]=Z,t[Z+8>>2]=s,t[Z+12>>2]=l;break}s=m>>>8;do if(!s)f=0;else{if(m>>>0>16777215){f=31;break}Ve=(s+1048320|0)>>>16&8,Ue=s<<Ve,Pe=(Ue+520192|0)>>>16&4,Ue=Ue<<Pe,f=(Ue+245760|0)>>>16&2,f=14-(Pe|Ve|f)+(Ue<<f>>>15)|0,f=m>>>(f+7|0)&1|f<<1}while(!1);if(s=23732+(f<<2)|0,t[Z+28>>2]=f,A=Z+16|0,t[A+4>>2]=0,t[A>>2]=0,A=t[5858]|0,l=1<<f,!(A&l)){t[5858]=A|l,t[s>>2]=Z,t[Z+24>>2]=s,t[Z+12>>2]=Z,t[Z+8>>2]=Z;break}s=t[s>>2]|0;n:do if((t[s+4>>2]&-8|0)!=(m|0)){for(f=m<<((f|0)==31?0:25-(f>>>1)|0);l=s+16+(f>>>31<<2)|0,A=t[l>>2]|0,!!A;)if((t[A+4>>2]&-8|0)==(m|0)){s=A;break n}else f=f<<1,s=A;t[l>>2]=Z,t[Z+24>>2]=s,t[Z+12>>2]=Z,t[Z+8>>2]=Z;break t}while(!1);Ve=s+8|0,Ue=t[Ve>>2]|0,t[Ue+12>>2]=Z,t[Ve>>2]=Z,t[Z+8>>2]=Ue,t[Z+12>>2]=s,t[Z+24>>2]=0}while(!1);return Ue=X+8|0,ye=Mt,Ue|0}for(s=23876;A=t[s>>2]|0,!(A>>>0<=Q>>>0&&(Ue=A+(t[s+4>>2]|0)|0,Ue>>>0>Q>>>0));)s=t[s+8>>2]|0;m=Ue+-47|0,A=m+8|0,A=m+(A&7|0?0-A&7:0)|0,m=Q+16|0,A=A>>>0<m>>>0?Q:A,s=A+8|0,l=I+-40|0,Pe=k+8|0,Pe=Pe&7|0?0-Pe&7:0,Ve=k+Pe|0,Pe=l-Pe|0,t[5863]=Ve,t[5860]=Pe,t[Ve+4>>2]=Pe|1,t[k+l+4>>2]=40,t[5864]=t[5979],l=A+4|0,t[l>>2]=27,t[s>>2]=t[5969],t[s+4>>2]=t[5970],t[s+8>>2]=t[5971],t[s+12>>2]=t[5972],t[5969]=k,t[5970]=I,t[5972]=0,t[5971]=s,s=A+24|0;do Ve=s,s=s+4|0,t[s>>2]=7;while((Ve+8|0)>>>0<Ue>>>0);if((A|0)!=(Q|0)){if(k=A-Q|0,t[l>>2]=t[l>>2]&-2,t[Q+4>>2]=k|1,t[A>>2]=k,s=k>>>3,k>>>0<256){l=23468+(s<<1<<2)|0,A=t[5857]|0,s=1<<s,A&s?(A=l+8|0,s=t[A>>2]|0):(t[5857]=A|s,s=l,A=l+8|0),t[A>>2]=Q,t[s+12>>2]=Q,t[Q+8>>2]=s,t[Q+12>>2]=l;break}if(s=k>>>8,s?k>>>0>16777215?f=31:(Ve=(s+1048320|0)>>>16&8,Ue=s<<Ve,Pe=(Ue+520192|0)>>>16&4,Ue=Ue<<Pe,f=(Ue+245760|0)>>>16&2,f=14-(Pe|Ve|f)+(Ue<<f>>>15)|0,f=k>>>(f+7|0)&1|f<<1):f=0,l=23732+(f<<2)|0,t[Q+28>>2]=f,t[Q+20>>2]=0,t[m>>2]=0,s=t[5858]|0,A=1<<f,!(s&A)){t[5858]=s|A,t[l>>2]=Q,t[Q+24>>2]=l,t[Q+12>>2]=Q,t[Q+8>>2]=Q;break}s=t[l>>2]|0;t:do if((t[s+4>>2]&-8|0)!=(k|0)){for(f=k<<((f|0)==31?0:25-(f>>>1)|0);l=s+16+(f>>>31<<2)|0,A=t[l>>2]|0,!!A;)if((t[A+4>>2]&-8|0)==(k|0)){s=A;break t}else f=f<<1,s=A;t[l>>2]=Q,t[Q+24>>2]=s,t[Q+12>>2]=Q,t[Q+8>>2]=Q;break e}while(!1);Ve=s+8|0,Ue=t[Ve>>2]|0,t[Ue+12>>2]=Q,t[Ve>>2]=Q,t[Q+8>>2]=Ue,t[Q+12>>2]=s,t[Q+24>>2]=0}}else Ue=t[5861]|0,(Ue|0)==0|k>>>0<Ue>>>0&&(t[5861]=k),t[5969]=k,t[5970]=I,t[5972]=0,t[5866]=t[5975],t[5865]=-1,t[5870]=23468,t[5869]=23468,t[5872]=23476,t[5871]=23476,t[5874]=23484,t[5873]=23484,t[5876]=23492,t[5875]=23492,t[5878]=23500,t[5877]=23500,t[5880]=23508,t[5879]=23508,t[5882]=23516,t[5881]=23516,t[5884]=23524,t[5883]=23524,t[5886]=23532,t[5885]=23532,t[5888]=23540,t[5887]=23540,t[5890]=23548,t[5889]=23548,t[5892]=23556,t[5891]=23556,t[5894]=23564,t[5893]=23564,t[5896]=23572,t[5895]=23572,t[5898]=23580,t[5897]=23580,t[5900]=23588,t[5899]=23588,t[5902]=23596,t[5901]=23596,t[5904]=23604,t[5903]=23604,t[5906]=23612,t[5905]=23612,t[5908]=23620,t[5907]=23620,t[5910]=23628,t[5909]=23628,t[5912]=23636,t[5911]=23636,t[5914]=23644,t[5913]=23644,t[5916]=23652,t[5915]=23652,t[5918]=23660,t[5917]=23660,t[5920]=23668,t[5919]=23668,t[5922]=23676,t[5921]=23676,t[5924]=23684,t[5923]=23684,t[5926]=23692,t[5925]=23692,t[5928]=23700,t[5927]=23700,t[5930]=23708,t[5929]=23708,t[5932]=23716,t[5931]=23716,Ue=I+-40|0,Pe=k+8|0,Pe=Pe&7|0?0-Pe&7:0,Ve=k+Pe|0,Pe=Ue-Pe|0,t[5863]=Ve,t[5860]=Pe,t[Ve+4>>2]=Pe|1,t[k+Ue+4>>2]=40,t[5864]=t[5979];while(!1);if(s=t[5860]|0,s>>>0>ie>>>0)return Pe=s-ie|0,t[5860]=Pe,Ue=t[5863]|0,Ve=Ue+ie|0,t[5863]=Ve,t[Ve+4>>2]=Pe|1,t[Ue+4>>2]=ie|3,Ue=Ue+8|0,ye=Mt,Ue|0}return Ue=qo()|0,t[Ue>>2]=12,Ue=0,ye=Mt,Ue|0}function p(A){A=A|0;var s=0,l=0,f=0,m=0,k=0,I=0,D=0,Q=0;if(A){l=A+-8|0,m=t[5861]|0,A=t[A+-4>>2]|0,s=A&-8,Q=l+s|0;do if(A&1)D=l,I=l;else{if(f=t[l>>2]|0,!(A&3)||(I=l+(0-f)|0,k=f+s|0,I>>>0<m>>>0))return;if((t[5862]|0)==(I|0)){if(A=Q+4|0,s=t[A>>2]|0,(s&3|0)!=3){D=I,s=k;break}t[5859]=k,t[A>>2]=s&-2,t[I+4>>2]=k|1,t[I+k>>2]=k;return}if(l=f>>>3,f>>>0<256)if(A=t[I+8>>2]|0,s=t[I+12>>2]|0,(s|0)==(A|0)){t[5857]=t[5857]&~(1<<l),D=I,s=k;break}else{t[A+12>>2]=s,t[s+8>>2]=A,D=I,s=k;break}m=t[I+24>>2]|0,A=t[I+12>>2]|0;do if((A|0)==(I|0)){if(s=I+16|0,l=s+4|0,A=t[l>>2]|0,A)s=l;else if(A=t[s>>2]|0,!A){A=0;break}for(;;)if(f=A+20|0,l=t[f>>2]|0,l)A=l,s=f;else if(f=A+16|0,l=t[f>>2]|0,l)A=l,s=f;else break;t[s>>2]=0}else D=t[I+8>>2]|0,t[D+12>>2]=A,t[A+8>>2]=D;while(!1);if(m){if(s=t[I+28>>2]|0,l=23732+(s<<2)|0,(t[l>>2]|0)==(I|0)){if(t[l>>2]=A,!A){t[5858]=t[5858]&~(1<<s),D=I,s=k;break}}else if(D=m+16|0,t[((t[D>>2]|0)==(I|0)?D:m+20|0)>>2]=A,!A){D=I,s=k;break}t[A+24>>2]=m,s=I+16|0,l=t[s>>2]|0,l|0&&(t[A+16>>2]=l,t[l+24>>2]=A),s=t[s+4>>2]|0,s?(t[A+20>>2]=s,t[s+24>>2]=A,D=I,s=k):(D=I,s=k)}else D=I,s=k}while(!1);if(!(I>>>0>=Q>>>0)&&(A=Q+4|0,f=t[A>>2]|0,!!(f&1))){if(f&2)t[A>>2]=f&-2,t[D+4>>2]=s|1,t[I+s>>2]=s,m=s;else{if((t[5863]|0)==(Q|0)){if(Q=(t[5860]|0)+s|0,t[5860]=Q,t[5863]=D,t[D+4>>2]=Q|1,(D|0)!=(t[5862]|0))return;t[5862]=0,t[5859]=0;return}if((t[5862]|0)==(Q|0)){Q=(t[5859]|0)+s|0,t[5859]=Q,t[5862]=I,t[D+4>>2]=Q|1,t[I+Q>>2]=Q;return}m=(f&-8)+s|0,l=f>>>3;do if(f>>>0<256)if(s=t[Q+8>>2]|0,A=t[Q+12>>2]|0,(A|0)==(s|0)){t[5857]=t[5857]&~(1<<l);break}else{t[s+12>>2]=A,t[A+8>>2]=s;break}else{k=t[Q+24>>2]|0,A=t[Q+12>>2]|0;do if((A|0)==(Q|0)){if(s=Q+16|0,l=s+4|0,A=t[l>>2]|0,A)s=l;else if(A=t[s>>2]|0,!A){l=0;break}for(;;)if(f=A+20|0,l=t[f>>2]|0,l)A=l,s=f;else if(f=A+16|0,l=t[f>>2]|0,l)A=l,s=f;else break;t[s>>2]=0,l=A}else l=t[Q+8>>2]|0,t[l+12>>2]=A,t[A+8>>2]=l,l=A;while(!1);if(k|0){if(A=t[Q+28>>2]|0,s=23732+(A<<2)|0,(t[s>>2]|0)==(Q|0)){if(t[s>>2]=l,!l){t[5858]=t[5858]&~(1<<A);break}}else if(f=k+16|0,t[((t[f>>2]|0)==(Q|0)?f:k+20|0)>>2]=l,!l)break;t[l+24>>2]=k,A=Q+16|0,s=t[A>>2]|0,s|0&&(t[l+16>>2]=s,t[s+24>>2]=l),A=t[A+4>>2]|0,A|0&&(t[l+20>>2]=A,t[A+24>>2]=l)}}while(!1);if(t[D+4>>2]=m|1,t[I+m>>2]=m,(D|0)==(t[5862]|0)){t[5859]=m;return}}if(A=m>>>3,m>>>0<256){l=23468+(A<<1<<2)|0,s=t[5857]|0,A=1<<A,s&A?(s=l+8|0,A=t[s>>2]|0):(t[5857]=s|A,A=l,s=l+8|0),t[s>>2]=D,t[A+12>>2]=D,t[D+8>>2]=A,t[D+12>>2]=l;return}A=m>>>8,A?m>>>0>16777215?f=31:(I=(A+1048320|0)>>>16&8,Q=A<<I,k=(Q+520192|0)>>>16&4,Q=Q<<k,f=(Q+245760|0)>>>16&2,f=14-(k|I|f)+(Q<<f>>>15)|0,f=m>>>(f+7|0)&1|f<<1):f=0,A=23732+(f<<2)|0,t[D+28>>2]=f,t[D+20>>2]=0,t[D+16>>2]=0,s=t[5858]|0,l=1<<f;e:do if(!(s&l))t[5858]=s|l,t[A>>2]=D,t[D+24>>2]=A,t[D+12>>2]=D,t[D+8>>2]=D;else{A=t[A>>2]|0;t:do if((t[A+4>>2]&-8|0)!=(m|0)){for(f=m<<((f|0)==31?0:25-(f>>>1)|0);l=A+16+(f>>>31<<2)|0,s=t[l>>2]|0,!!s;)if((t[s+4>>2]&-8|0)==(m|0)){A=s;break t}else f=f<<1,A=s;t[l>>2]=D,t[D+24>>2]=A,t[D+12>>2]=D,t[D+8>>2]=D;break e}while(!1);I=A+8|0,Q=t[I>>2]|0,t[Q+12>>2]=D,t[I>>2]=D,t[D+8>>2]=Q,t[D+12>>2]=A,t[D+24>>2]=0}while(!1);if(Q=(t[5865]|0)+-1|0,t[5865]=Q,!(Q|0)){for(A=23884;A=t[A>>2]|0,A;)A=A+8|0;t[5865]=-1}}}}function y(A,s){A=A|0,s=s|0;var l=0;return A?(l=ti(s,A)|0,(s|A)>>>0>65535&&(l=((l>>>0)/(A>>>0)|0|0)==(s|0)?l:-1)):l=0,A=Vi(l)|0,!A||!(t[A+-4>>2]&3)||E(A|0,0,l|0)|0,A|0}function v(A,s,l,f){return A=A|0,s=s|0,l=l|0,f=f|0,l=A+l>>>0,Xt(s+f+(l>>>0<A>>>0|0)>>>0|0),l|0|0}function x(A,s,l,f){return A=A|0,s=s|0,l=l|0,f=f|0,f=s-f-(l>>>0>A>>>0|0)>>>0,Xt(f|0),A-l>>>0|0|0}function R(A){return A=A|0,(A?31-(He(A^A-1)|0)|0:32)|0}function V(A,s,l,f,m){A=A|0,s=s|0,l=l|0,f=f|0,m=m|0;var k=0,I=0,D=0,Q=0,Z=0,X=0,ie=0,Ae=0,ce=0,fe=0;if(X=A,Q=s,Z=Q,I=l,Ae=f,D=Ae,!Z)return k=(m|0)!=0,D?k?(t[m>>2]=A|0,t[m+4>>2]=s&0,Ae=0,m=0,Xt(Ae|0),m|0):(Ae=0,m=0,Xt(Ae|0),m|0):(k&&(t[m>>2]=(X>>>0)%(I>>>0),t[m+4>>2]=0),Ae=0,m=(X>>>0)/(I>>>0)>>>0,Xt(Ae|0),m|0);k=(D|0)==0;do if(I){if(!k){if(k=(He(D|0)|0)-(He(Z|0)|0)|0,k>>>0<=31){ie=k+1|0,D=31-k|0,s=k-31>>31,I=ie,A=X>>>(ie>>>0)&s|Z<<D,s=Z>>>(ie>>>0)&s,k=0,D=X<<D;break}return m?(t[m>>2]=A|0,t[m+4>>2]=Q|s&0,Ae=0,m=0,Xt(Ae|0),m|0):(Ae=0,m=0,Xt(Ae|0),m|0)}if(k=I-1|0,k&I|0){D=(He(I|0)|0)+33-(He(Z|0)|0)|0,fe=64-D|0,ie=32-D|0,Q=ie>>31,ce=D-32|0,s=ce>>31,I=D,A=ie-1>>31&Z>>>(ce>>>0)|(Z<<ie|X>>>(D>>>0))&s,s=s&Z>>>(D>>>0),k=X<<fe&Q,D=(Z<<fe|X>>>(ce>>>0))&Q|X<<ie&D-33>>31;break}return m|0&&(t[m>>2]=k&X,t[m+4>>2]=0),(I|0)==1?(ce=Q|s&0,fe=A|0|0,Xt(ce|0),fe|0):(fe=R(I|0)|0,ce=Z>>>(fe>>>0)|0,fe=Z<<32-fe|X>>>(fe>>>0)|0,Xt(ce|0),fe|0)}else{if(k)return m|0&&(t[m>>2]=(Z>>>0)%(I>>>0),t[m+4>>2]=0),ce=0,fe=(Z>>>0)/(I>>>0)>>>0,Xt(ce|0),fe|0;if(!X)return m|0&&(t[m>>2]=0,t[m+4>>2]=(Z>>>0)%(D>>>0)),ce=0,fe=(Z>>>0)/(D>>>0)>>>0,Xt(ce|0),fe|0;if(k=D-1|0,!(k&D))return m|0&&(t[m>>2]=A|0,t[m+4>>2]=k&Z|s&0),ce=0,fe=Z>>>((R(D|0)|0)>>>0),Xt(ce|0),fe|0;if(k=(He(D|0)|0)-(He(Z|0)|0)|0,k>>>0<=30){s=k+1|0,D=31-k|0,I=s,A=Z<<D|X>>>(s>>>0),s=Z>>>(s>>>0),k=0,D=X<<D;break}return m?(t[m>>2]=A|0,t[m+4>>2]=Q|s&0,ce=0,fe=0,Xt(ce|0),fe|0):(ce=0,fe=0,Xt(ce|0),fe|0)}while(!1);if(!I)Z=D,Q=0,D=0;else{ie=l|0|0,X=Ae|f&0,Z=v(ie|0,X|0,-1,-1)|0,l=Te()|0,Q=D,D=0;do f=Q,Q=k>>>31|Q<<1,k=D|k<<1,f=A<<1|f>>>31|0,Ae=A>>>31|s<<1|0,x(Z|0,l|0,f|0,Ae|0)|0,fe=Te()|0,ce=fe>>31|((fe|0)<0?-1:0)<<1,D=ce&1,A=x(f|0,Ae|0,ce&ie|0,(((fe|0)<0?-1:0)>>31|((fe|0)<0?-1:0)<<1)&X|0)|0,s=Te()|0,I=I-1|0;while(I|0);Z=Q,Q=0}return I=0,m|0&&(t[m>>2]=A,t[m+4>>2]=s),ce=(k|0)>>>31|(Z|I)<<1|(I<<1|k>>>31)&0|Q,fe=(k<<1|0)&-2|D,Xt(ce|0),fe|0}function N(A,s,l,f){A=A|0,s=s|0,l=l|0,f=f|0;var m=0,k=0,I=0,D=0,Q=0,Z=0;return Z=s>>31|((s|0)<0?-1:0)<<1,Q=((s|0)<0?-1:0)>>31|((s|0)<0?-1:0)<<1,k=f>>31|((f|0)<0?-1:0)<<1,m=((f|0)<0?-1:0)>>31|((f|0)<0?-1:0)<<1,D=x(Z^A|0,Q^s|0,Z|0,Q|0)|0,I=Te()|0,A=k^Z,s=m^Q,x((V(D,I,x(k^l|0,m^f|0,k|0,m|0)|0,Te()|0,0)|0)^A|0,(Te()|0)^s|0,A|0,s|0)|0}function H(A,s){A=A|0,s=s|0;var l=0,f=0,m=0,k=0;return k=A&65535,m=s&65535,l=ti(m,k)|0,f=A>>>16,A=(l>>>16)+(ti(m,f)|0)|0,m=s>>>16,s=ti(m,k)|0,Xt((A>>>16)+(ti(m,f)|0)+(((A&65535)+s|0)>>>16)|0),A+s<<16|l&65535|0|0}function te(A,s,l,f){A=A|0,s=s|0,l=l|0,f=f|0;var m=0,k=0;return m=A,k=l,l=H(m,k)|0,A=Te()|0,Xt((ti(s,k)|0)+(ti(f,m)|0)+A|A&0|0),l|0|0|0}function le(A,s,l,f){A=A|0,s=s|0,l=l|0,f=f|0;var m=0,k=0,I=0,D=0,Q=0,Z=0;return m=ye,ye=ye+16|0,D=m|0,I=s>>31|((s|0)<0?-1:0)<<1,k=((s|0)<0?-1:0)>>31|((s|0)<0?-1:0)<<1,Z=f>>31|((f|0)<0?-1:0)<<1,Q=((f|0)<0?-1:0)>>31|((f|0)<0?-1:0)<<1,A=x(I^A|0,k^s|0,I|0,k|0)|0,s=Te()|0,V(A,s,x(Z^l|0,Q^f|0,Z|0,Q|0)|0,Te()|0,D)|0,f=x(t[D>>2]^I|0,t[D+4>>2]^k|0,I|0,k|0)|0,l=Te()|0,ye=m,Xt(l|0),f|0}function pe(A,s,l,f){A=A|0,s=s|0,l=l|0,f=f|0;var m=0,k=0;return k=ye,ye=ye+16|0,m=k|0,V(A,s,l,f,m)|0,ye=k,Xt(t[m+4>>2]|0),t[m>>2]|0|0}function Ge(A,s,l){return A=A|0,s=s|0,l=l|0,(l|0)<32?(Xt(s>>l|0),A>>>l|(s&(1<<l)-1)<<32-l):(Xt(((s|0)<0?-1:0)|0),s>>l-32|0)}function Ee(A,s,l){return A=A|0,s=s|0,l=l|0,(l|0)<32?(Xt(s>>>l|0),A>>>l|(s&(1<<l)-1)<<32-l):(Xt(0),s>>>l-32|0)}function Se(A,s,l){return A=A|0,s=s|0,l=l|0,(l|0)<32?(Xt(s<<l|(A&(1<<l)-1<<32-l)>>>32-l|0),A<<l):(Xt(A<<l-32|0),0)}function C(A,s){return A=+A,s=+s,A!=A?+s:s!=s?+A:+Ln(+A,+s)}function i(A,s){return A=+A,s=+s,A!=A?+s:s!=s?+A:+kA(+A,+s)}function h(A){return A=+A,A>=0?+en(A+.5):+oA(A-.5)}function b(A,s,l){A=A|0,s=s|0,l=l|0;var f=0,m=0,k=0;if((l|0)>=8192)return oo(A|0,s|0,l|0)|0,A|0;if(k=A|0,m=A+l|0,(A&3)==(s&3)){for(;A&3;){if(!l)return k|0;dt[A>>0]=dt[s>>0]|0,A=A+1|0,s=s+1|0,l=l-1|0}for(l=m&-4|0,f=l-64|0;(A|0)<=(f|0);)t[A>>2]=t[s>>2],t[A+4>>2]=t[s+4>>2],t[A+8>>2]=t[s+8>>2],t[A+12>>2]=t[s+12>>2],t[A+16>>2]=t[s+16>>2],t[A+20>>2]=t[s+20>>2],t[A+24>>2]=t[s+24>>2],t[A+28>>2]=t[s+28>>2],t[A+32>>2]=t[s+32>>2],t[A+36>>2]=t[s+36>>2],t[A+40>>2]=t[s+40>>2],t[A+44>>2]=t[s+44>>2],t[A+48>>2]=t[s+48>>2],t[A+52>>2]=t[s+52>>2],t[A+56>>2]=t[s+56>>2],t[A+60>>2]=t[s+60>>2],A=A+64|0,s=s+64|0;for(;(A|0)<(l|0);)t[A>>2]=t[s>>2],A=A+4|0,s=s+4|0}else for(l=m-4|0;(A|0)<(l|0);)dt[A>>0]=dt[s>>0]|0,dt[A+1>>0]=dt[s+1>>0]|0,dt[A+2>>0]=dt[s+2>>0]|0,dt[A+3>>0]=dt[s+3>>0]|0,A=A+4|0,s=s+4|0;for(;(A|0)<(m|0);)dt[A>>0]=dt[s>>0]|0,A=A+1|0,s=s+1|0;return k|0}function E(A,s,l){A=A|0,s=s|0,l=l|0;var f=0,m=0,k=0,I=0;if(k=A+l|0,s=s&255,(l|0)>=67){for(;A&3;)dt[A>>0]=s,A=A+1|0;for(f=k&-4|0,I=s|s<<8|s<<16|s<<24,m=f-64|0;(A|0)<=(m|0);)t[A>>2]=I,t[A+4>>2]=I,t[A+8>>2]=I,t[A+12>>2]=I,t[A+16>>2]=I,t[A+20>>2]=I,t[A+24>>2]=I,t[A+28>>2]=I,t[A+32>>2]=I,t[A+36>>2]=I,t[A+40>>2]=I,t[A+44>>2]=I,t[A+48>>2]=I,t[A+52>>2]=I,t[A+56>>2]=I,t[A+60>>2]=I,A=A+64|0;for(;(A|0)<(f|0);)t[A>>2]=I,A=A+4|0}for(;(A|0)<(k|0);)dt[A>>0]=s,A=A+1|0;return k-l|0}function B(A){return A=+A,A>=0?+en(A+.5):+oA(A-.5)}function F(A){A=A|0;var s=0,l=0,f=0;return f=ca()|0,l=t[Qt>>2]|0,s=l+A|0,(A|0)>0&(s|0)<(l|0)|(s|0)<0?(mi(s|0)|0,Er(12),-1):(s|0)>(f|0)&&!(Be(s|0)|0)?(Er(12),-1):(t[Qt>>2]=s,l|0)}return{___divdi3:N,___muldi3:te,___remdi3:le,___uremdi3:pe,_areNeighborCells:UA,_bitshift64Ashr:Ge,_bitshift64Lshr:Ee,_bitshift64Shl:Se,_calloc:y,_cellAreaKm2:MA,_cellAreaM2:tA,_cellAreaRads2:eA,_cellToBoundary:Di,_cellToCenterChild:cs,_cellToChildPos:ZA,_cellToChildren:Kr,_cellToChildrenSize:Fo,_cellToLatLng:qA,_cellToLocalIj:vA,_cellToParent:$s,_cellToVertex:Tn,_cellToVertexes:IA,_cellsToDirectedEdge:ls,_cellsToLinkedMultiPolygon:Fa,_childPosToCell:No,_compactCells:Ws,_destroyLinkedMultiPolygon:yA,_directedEdgeToBoundary:Lr,_directedEdgeToCells:us,_edgeLengthKm:Za,_edgeLengthM:Ei,_edgeLengthRads:TA,_emscripten_replace_memory:Zi,_free:p,_getBaseCellNumber:Ua,_getDirectedEdgeDestination:Ki,_getDirectedEdgeOrigin:Is,_getHexagonAreaAvgKm2:wi,_getHexagonAreaAvgM2:sr,_getHexagonEdgeLengthAvgKm:Oi,_getHexagonEdgeLengthAvgM:HA,_getIcosahedronFaces:gA,_getNumCells:qa,_getPentagons:Zr,_getRes0Cells:ma,_getResolution:ll,_greatCircleDistanceKm:vt,_greatCircleDistanceM:mt,_greatCircleDistanceRads:ot,_gridDisk:Co,_gridDiskDistances:Yr,_gridDistance:Kt,_gridPathCells:Ha,_gridPathCellsSize:Vo,_gridRingUnsafe:rl,_i64Add:v,_i64Subtract:x,_isPentagon:Si,_isResClassIII:Mr,_isValidCell:Hs,_isValidDirectedEdge:QA,_isValidVertex:fs,_latLngToCell:mA,_llvm_maxnum_f64:C,_llvm_minnum_f64:i,_llvm_round_f64:h,_localIjToCell:va,_malloc:Vi,_maxFaceCount:co,_maxGridDiskSize:La,_maxPolygonToCellsSize:Ol,_memcpy:b,_memset:E,_originToDirectedEdges:zo,_pentagonCount:Fr,_polygonToCells:Ra,_readInt64AsDoubleFromPointer:Uo,_res0CellCount:fA,_round:B,_sbrk:F,_sizeOfCellBoundary:hl,_sizeOfCoordIJ:$A,_sizeOfGeoLoop:fl,_sizeOfGeoPolygon:po,_sizeOfH3Index:or,_sizeOfLatLng:cl,_sizeOfLinkedGeoPolygon:Or,_uncompactCells:Nl,_uncompactCellsSize:qr,_vertexToLatLng:Ya,establishStackSpace:As,stackAlloc:ha,stackRestore:za,stackSave:EA}}(OA,On,At);n.___divdi3=st.___divdi3,n.___muldi3=st.___muldi3,n.___remdi3=st.___remdi3,n.___uremdi3=st.___uremdi3,n._areNeighborCells=st._areNeighborCells,n._bitshift64Ashr=st._bitshift64Ashr,n._bitshift64Lshr=st._bitshift64Lshr,n._bitshift64Shl=st._bitshift64Shl,n._calloc=st._calloc,n._cellAreaKm2=st._cellAreaKm2,n._cellAreaM2=st._cellAreaM2,n._cellAreaRads2=st._cellAreaRads2,n._cellToBoundary=st._cellToBoundary,n._cellToCenterChild=st._cellToCenterChild,n._cellToChildPos=st._cellToChildPos,n._cellToChildren=st._cellToChildren,n._cellToChildrenSize=st._cellToChildrenSize,n._cellToLatLng=st._cellToLatLng,n._cellToLocalIj=st._cellToLocalIj,n._cellToParent=st._cellToParent,n._cellToVertex=st._cellToVertex,n._cellToVertexes=st._cellToVertexes,n._cellsToDirectedEdge=st._cellsToDirectedEdge,n._cellsToLinkedMultiPolygon=st._cellsToLinkedMultiPolygon,n._childPosToCell=st._childPosToCell,n._compactCells=st._compactCells,n._destroyLinkedMultiPolygon=st._destroyLinkedMultiPolygon,n._directedEdgeToBoundary=st._directedEdgeToBoundary,n._directedEdgeToCells=st._directedEdgeToCells,n._edgeLengthKm=st._edgeLengthKm,n._edgeLengthM=st._edgeLengthM,n._edgeLengthRads=st._edgeLengthRads;var ze=n._emscripten_replace_memory=st._emscripten_replace_memory;n._free=st._free,n._getBaseCellNumber=st._getBaseCellNumber,n._getDirectedEdgeDestination=st._getDirectedEdgeDestination,n._getDirectedEdgeOrigin=st._getDirectedEdgeOrigin,n._getHexagonAreaAvgKm2=st._getHexagonAreaAvgKm2,n._getHexagonAreaAvgM2=st._getHexagonAreaAvgM2,n._getHexagonEdgeLengthAvgKm=st._getHexagonEdgeLengthAvgKm,n._getHexagonEdgeLengthAvgM=st._getHexagonEdgeLengthAvgM,n._getIcosahedronFaces=st._getIcosahedronFaces,n._getNumCells=st._getNumCells,n._getPentagons=st._getPentagons,n._getRes0Cells=st._getRes0Cells,n._getResolution=st._getResolution,n._greatCircleDistanceKm=st._greatCircleDistanceKm,n._greatCircleDistanceM=st._greatCircleDistanceM,n._greatCircleDistanceRads=st._greatCircleDistanceRads,n._gridDisk=st._gridDisk,n._gridDiskDistances=st._gridDiskDistances,n._gridDistance=st._gridDistance,n._gridPathCells=st._gridPathCells,n._gridPathCellsSize=st._gridPathCellsSize,n._gridRingUnsafe=st._gridRingUnsafe,n._i64Add=st._i64Add,n._i64Subtract=st._i64Subtract,n._isPentagon=st._isPentagon,n._isResClassIII=st._isResClassIII,n._isValidCell=st._isValidCell,n._isValidDirectedEdge=st._isValidDirectedEdge,n._isValidVertex=st._isValidVertex,n._latLngToCell=st._latLngToCell,n._llvm_maxnum_f64=st._llvm_maxnum_f64,n._llvm_minnum_f64=st._llvm_minnum_f64,n._llvm_round_f64=st._llvm_round_f64,n._localIjToCell=st._localIjToCell,n._malloc=st._malloc,n._maxFaceCount=st._maxFaceCount,n._maxGridDiskSize=st._maxGridDiskSize,n._maxPolygonToCellsSize=st._maxPolygonToCellsSize,n._memcpy=st._memcpy,n._memset=st._memset,n._originToDirectedEdges=st._originToDirectedEdges,n._pentagonCount=st._pentagonCount,n._polygonToCells=st._polygonToCells,n._readInt64AsDoubleFromPointer=st._readInt64AsDoubleFromPointer,n._res0CellCount=st._res0CellCount,n._round=st._round,n._sbrk=st._sbrk,n._sizeOfCellBoundary=st._sizeOfCellBoundary,n._sizeOfCoordIJ=st._sizeOfCoordIJ,n._sizeOfGeoLoop=st._sizeOfGeoLoop,n._sizeOfGeoPolygon=st._sizeOfGeoPolygon,n._sizeOfH3Index=st._sizeOfH3Index,n._sizeOfLatLng=st._sizeOfLatLng,n._sizeOfLinkedGeoPolygon=st._sizeOfLinkedGeoPolygon,n._uncompactCells=st._uncompactCells,n._uncompactCellsSize=st._uncompactCellsSize,n._vertexToLatLng=st._vertexToLatLng,n.establishStackSpace=st.establishStackSpace;var oe=n.stackAlloc=st.stackAlloc,de=n.stackRestore=st.stackRestore,we=n.stackSave=st.stackSave;if(n.asm=st,n.cwrap=Qe,n.setValue=ae,n.getValue=be,ei){pi(ei)||(ei=M(ei));{uA();var Le=function(se){se.byteLength&&(se=new Uint8Array(se)),kt.set(se,J),n.memoryInitializerRequest&&delete n.memoryInitializerRequest.response,pt()},Fe=function(){P(ei,Le,function(){throw"could not load memory initializer "+ei})},tt=br(ei);if(tt)Le(tt.buffer);else if(n.memoryInitializerRequest){var Ye=function(){var se=n.memoryInitializerRequest,_e=se.response;if(se.status!==200&&se.status!==0){var We=br(n.memoryInitializerRequestURL);if(We)_e=We.buffer;else{console.warn("a problem seems to have happened with Module.memoryInitializerRequest, status: "+se.status+", retrying "+ei),Fe();return}}Le(_e)};n.memoryInitializerRequest.response?setTimeout(Ye,0):n.memoryInitializerRequest.addEventListener("load",Ye)}else Fe()}}var Oe;Jn=function se(){Oe||Ke(),Oe||(Jn=se)};function Ke(se){if(un>0||(Ct(),un>0))return;function _e(){Oe||(Oe=!0,!Ze&&(xn(),Bt(),n.onRuntimeInitialized&&n.onRuntimeInitialized(),En()))}n.setStatus?(n.setStatus("Running..."),setTimeout(function(){setTimeout(function(){n.setStatus("")},1),_e()},1)):_e()}n.run=Ke;function yt(se){throw n.onAbort&&n.onAbort(se),se+="",c(se),U(se),Ze=!0,"abort("+se+"). Build with -s ASSERTIONS=1 for more info."}if(n.abort=yt,n.preInit)for(typeof n.preInit=="function"&&(n.preInit=[n.preInit]);n.preInit.length>0;)n.preInit.pop()();return Ke(),e}(typeof Jo=="object"?Jo:{}),hi="number",Kn=hi,lf=hi,ri=hi,Ai=hi,to=hi,Sn=hi,B7=[["sizeOfH3Index",hi],["sizeOfLatLng",hi],["sizeOfCellBoundary",hi],["sizeOfGeoLoop",hi],["sizeOfGeoPolygon",hi],["sizeOfLinkedGeoPolygon",hi],["sizeOfCoordIJ",hi],["readInt64AsDoubleFromPointer",hi],["isValidCell",lf,[ri,Ai]],["latLngToCell",Kn,[hi,hi,to,Sn]],["cellToLatLng",Kn,[ri,Ai,Sn]],["cellToBoundary",Kn,[ri,Ai,Sn]],["maxGridDiskSize",Kn,[hi,Sn]],["gridDisk",Kn,[ri,Ai,hi,Sn]],["gridDiskDistances",Kn,[ri,Ai,hi,Sn,Sn]],["gridRingUnsafe",Kn,[ri,Ai,hi,Sn]],["maxPolygonToCellsSize",Kn,[Sn,to,hi,Sn]],["polygonToCells",Kn,[Sn,to,hi,Sn]],["cellsToLinkedMultiPolygon",Kn,[Sn,hi,Sn]],["destroyLinkedMultiPolygon",null,[Sn]],["compactCells",Kn,[Sn,Sn,hi,hi]],["uncompactCells",Kn,[Sn,hi,hi,Sn,hi,to]],["uncompactCellsSize",Kn,[Sn,hi,hi,to,Sn]],["isPentagon",lf,[ri,Ai]],["isResClassIII",lf,[ri,Ai]],["getBaseCellNumber",hi,[ri,Ai]],["getResolution",hi,[ri,Ai]],["maxFaceCount",Kn,[ri,Ai,Sn]],["getIcosahedronFaces",Kn,[ri,Ai,Sn]],["cellToParent",Kn,[ri,Ai,to,Sn]],["cellToChildren",Kn,[ri,Ai,to,Sn]],["cellToCenterChild",Kn,[ri,Ai,to,Sn]],["cellToChildrenSize",Kn,[ri,Ai,to,Sn]],["cellToChildPos",Kn,[ri,Ai,to,Sn]],["childPosToCell",Kn,[hi,hi,ri,Ai,to,Sn]],["areNeighborCells",Kn,[ri,Ai,ri,Ai,Sn]],["cellsToDirectedEdge",Kn,[ri,Ai,ri,Ai,Sn]],["getDirectedEdgeOrigin",Kn,[ri,Ai,Sn]],["getDirectedEdgeDestination",Kn,[ri,Ai,Sn]],["isValidDirectedEdge",lf,[ri,Ai]],["directedEdgeToCells",Kn,[ri,Ai,Sn]],["originToDirectedEdges",Kn,[ri,Ai,Sn]],["directedEdgeToBoundary",Kn,[ri,Ai,Sn]],["gridDistance",Kn,[ri,Ai,ri,Ai,Sn]],["gridPathCells",Kn,[ri,Ai,ri,Ai,Sn]],["gridPathCellsSize",Kn,[ri,Ai,ri,Ai,Sn]],["cellToLocalIj",Kn,[ri,Ai,ri,Ai,hi,Sn]],["localIjToCell",Kn,[ri,Ai,Sn,hi,Sn]],["getHexagonAreaAvgM2",Kn,[to,Sn]],["getHexagonAreaAvgKm2",Kn,[to,Sn]],["getHexagonEdgeLengthAvgM",Kn,[to,Sn]],["getHexagonEdgeLengthAvgKm",Kn,[to,Sn]],["greatCircleDistanceM",hi,[Sn,Sn]],["greatCircleDistanceKm",hi,[Sn,Sn]],["greatCircleDistanceRads",hi,[Sn,Sn]],["cellAreaM2",Kn,[ri,Ai,Sn]],["cellAreaKm2",Kn,[ri,Ai,Sn]],["cellAreaRads2",Kn,[ri,Ai,Sn]],["edgeLengthM",Kn,[ri,Ai,Sn]],["edgeLengthKm",Kn,[ri,Ai,Sn]],["edgeLengthRads",Kn,[ri,Ai,Sn]],["getNumCells",Kn,[to,Sn]],["getRes0Cells",Kn,[Sn]],["res0CellCount",hi],["getPentagons",Kn,[hi,Sn]],["pentagonCount",hi],["cellToVertex",Kn,[ri,Ai,hi,Sn]],["cellToVertexes",Kn,[ri,Ai,Sn]],["vertexToLatLng",Kn,[ri,Ai,Sn]],["isValidVertex",lf,[ri,Ai]]],D7=0,P7=1,z7=2,L7=3,R7=4,F7=5,O7=6,N7=7,V7=8,U7=9,Q7=10,G7=11,q7=12,Z7=13,H7=14,$7=15,Us={};Us[D7]="Success";Us[P7]="The operation failed but a more specific error is not available";Us[z7]="Argument was outside of acceptable range";Us[L7]="Latitude or longitude arguments were outside of acceptable range";Us[R7]="Resolution argument was outside of acceptable range";Us[F7]="Cell argument was not valid";Us[O7]="Directed edge argument was not valid";Us[N7]="Undirected edge argument was not valid";Us[V7]="Vertex argument was not valid";Us[U7]="Pentagon distortion was encountered";Us[Q7]="Duplicate input";Us[G7]="Cell arguments were not neighbors";Us[q7]="Cell arguments had incompatible resolutions";Us[Z7]="Memory allocation failed";Us[H7]="Bounds of provided memory were insufficient";Us[$7]="Mode or flags argument was not valid";var j7=1e3,W7=1001,h3=1002,Dm={};Dm[j7]="Unknown unit";Dm[W7]="Array length out of bounds";Dm[h3]="Got unexpected null value for H3 index";var Y7="Unknown error";function f3(e,n,a){var d=a&&"value"in a,w=new Error((e[n]||Y7)+" (code: "+n+(d?", value: "+a.value:"")+")");return w.code=n,w}function X7(e,n){var a=arguments.length===2?{value:n}:{};return f3(Us,e,a)}function K7(e,n){var a=arguments.length===2?{value:n}:{};return f3(Dm,e,a)}function d3(e){if(e!==0)throw X7(e)}var Au={};B7.forEach(function(n){Au[n[0]]=Jo.cwrap.apply(Jo,n)});var Pc=16,J7=4,p3=8,M_=Au.sizeOfH3Index(),m3=Au.sizeOfLatLng();Au.sizeOfCellBoundary();Au.sizeOfGeoPolygon();Au.sizeOfGeoLoop();Au.sizeOfLinkedGeoPolygon();Au.sizeOfCoordIJ();function eL(e){if(!e)throw K7(h3);return e}var tL=/[^0-9a-fA-F]/;function nL(e){if(Array.isArray(e)&&e.length===2&&Number.isInteger(e[0])&&Number.isInteger(e[1]))return e;if(typeof e!="string"||tL.test(e))return[0,0];var n=parseInt(e.substring(0,e.length-8),Pc),a=parseInt(e.substring(e.length-8),Pc);return[a,n]}function Rv(e){if(e>=0)return e.toString(Pc);e=e&2147483647;var n=g3(8,e.toString(Pc)),a=(parseInt(n[0],Pc)+8).toString(Pc);return n=a+n.substring(1),n}function iL(e,n){return Rv(n)+g3(8,Rv(e))}function g3(e,n){for(var a=e-n.length,d="",w=0;w<a;w++)d+="0";return d=d+n,d}function rL(e,n){n===void 0&&(n=0);var a=Jo.getValue(e+M_*n,"i32"),d=Jo.getValue(e+M_*n+J7,"i32");return d?iL(a,d):null}function Fv(e){return lL(Jo.getValue(e,"double"))}function AL(e){return[Fv(e),Fv(e+p3)]}function sL(e,n,a){var d=Jo._malloc(m3);Jo.HEAPF64.set([e,n].map(aL),d/p3);var w=Jo._malloc(M_);try{return d3(Au.latLngToCell(d,a,w)),eL(rL(w))}finally{Jo._free(w),Jo._free(d)}}function oL(e){var n=Jo._malloc(m3),a=nL(e),d=a[0],w=a[1];try{return d3(Au.cellToLatLng(d,w,n)),AL(n)}finally{Jo._free(n)}}function aL(e){return e*Math.PI/180}function lL(e){return e*180/Math.PI}var uL={exports:{}},d1,Ov;function cL(){return Ov||(Ov=1,d1=function(n){return function a(d){return arguments.length===0||d!=null&&d["@@functional/placeholder"]===!0?a:n.apply(this,arguments)}}),d1}var p1,Nv;function hL(){if(Nv)return p1;Nv=1;var e=cL();return p1=e(function(a){return a===null?"Null":a===void 0?"Undefined":Object.prototype.toString.call(a).slice(8,-1)}),p1}var m1,Vv;function E2(){if(Vv)return m1;Vv=1;function e(n){var a=typeof n;return!!n&&(a=="object"||a=="function")}return m1=e,m1}var g1,Uv;function fL(){if(Uv)return g1;Uv=1;var e=E2();function n(a){return e(a)?a:Object(a)}return g1=n,g1}var _1,Qv;function dL(){if(Qv)return _1;Qv=1;var e=fL();function n(a){return function(d,w,M){for(var P=e(d),c=M(d),U=c.length,O=a?U:-1;a?O--:++O<U;){var j=c[O];if(w(P[j],j,P)===!1)break}return d}}return _1=n,_1}var y1,Gv;function pL(){if(Gv)return y1;Gv=1;var e=dL(),n=e();return y1=n,y1}var v1,qv;function mL(){if(qv)return v1;qv=1;function e(n){return function(a){return a==null?void 0:a[n]}}return v1=e,v1}var x1,Zv;function gL(){if(Zv)return x1;Zv=1;var e=mL(),n=e("length");return x1=n,x1}var w1,Hv;function M2(){if(Hv)return w1;Hv=1;var e=9007199254740991;function n(a){return typeof a=="number"&&a>-1&&a%1==0&&a<=e}return w1=n,w1}var b1,$v;function _L(){if($v)return b1;$v=1;var e=gL(),n=M2();function a(d){return d!=null&&n(e(d))}return b1=a,b1}var k1,jv;function Pm(){if(jv)return k1;jv=1;function e(n){return!!n&&typeof n=="object"}return k1=e,k1}var E1,Wv;function _3(){if(Wv)return E1;Wv=1;var e=_L(),n=Pm(),a=Object.prototype,d=a.hasOwnProperty,w=a.propertyIsEnumerable;function M(P){return n(P)&&e(P)&&d.call(P,"callee")&&!w.call(P,"callee")}return E1=M,E1}var M1,Yv;function yL(){if(Yv)return M1;Yv=1;var e=E2(),n="[object Function]",a=Object.prototype,d=a.toString;function w(M){return e(M)&&d.call(M)==n}return M1=w,M1}var T1,Xv;function vL(){if(Xv)return T1;Xv=1;var e=yL(),n=Pm(),a=/^\[object .+?Constructor\]$/,d=Object.prototype,w=Function.prototype.toString,M=d.hasOwnProperty,P=RegExp("^"+w.call(M).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function c(U){return U==null?!1:e(U)?P.test(w.call(U)):n(U)&&a.test(U)}return T1=c,T1}var S1,Kv;function xL(){if(Kv)return S1;Kv=1;var e=vL();function n(a,d){var w=a==null?void 0:a[d];return e(w)?w:void 0}return S1=n,S1}var C1,Jv;function wL(){if(Jv)return C1;Jv=1;var e=xL(),n=M2(),a=Pm(),d="[object Array]",w=Object.prototype,M=w.toString,P=e(Array,"isArray"),c=P||function(U){return a(U)&&n(U.length)&&M.call(U)==d};return C1=c,C1}var I1,ex;function bL(){if(ex)return I1;ex=1;var e=/^\d+$/,n=9007199254740991;function a(d,w){return d=typeof d=="number"||e.test(d)?+d:-1,w=w??n,d>-1&&d%1==0&&d<w}return I1=a,I1}var B1,tx;function kL(){if(tx)return B1;tx=1;var e=_3(),n=wL(),a=bL(),d=M2(),w=E2(),M=Object.prototype,P=M.hasOwnProperty;function c(U){if(U==null)return[];w(U)||(U=Object(U));var O=U.length;O=O&&d(O)&&(n(U)||e(U))&&O||0;for(var j=U.constructor,W=-1,J=typeof j=="function"&&j.prototype===U,ae=Array(O),be=O>0;++W<O;)ae[W]=W+"";for(var Ze in U)!(be&&a(Ze,O))&&!(Ze=="constructor"&&(J||!P.call(U,Ze)))&&ae.push(Ze);return ae}return B1=c,B1}var D1,nx;function EL(){if(nx)return D1;nx=1;var e=pL(),n=kL();function a(d,w){return e(d,w,n)}return D1=a,D1}var P1,ix;function ML(){if(ix)return P1;ix=1;var e=EL(),n=_3(),a=Pm(),d="[object Object]",w=Object.prototype,M=w.hasOwnProperty,P=w.toString;function c(U){var O;if(!(a(U)&&P.call(U)==d&&!n(U))||!M.call(U,"constructor")&&(O=U.constructor,typeof O=="function"&&!(O instanceof O)))return!1;var j;return e(U,function(W,J){j=J}),j===void 0||M.call(U,j)}return P1=c,P1}(function(e){e.exports=function(n){var a={};function d(w){if(a[w])return a[w].exports;var M=a[w]={exports:{},id:w,loaded:!1};return n[w].call(M.exports,M,M.exports,d),M.loaded=!0,M.exports}return d.m=n,d.c=a,d.p="/lib/",d(0)}([function(n,a,d){n.exports=d(1)},function(n,a,d){Object.defineProperty(a,"__esModule",{value:!0}),a.union=d(2).default,a.any=d(12).default,a.nil=d(14).default,a.mapOf=d(16).default,a.arrayOf=d(18).default,a.record=d(20).default,a.optional=d(23).default,a.validate=d(25).default,a.deferred=d(26).default,a.createValidator=d(4).default,a.isValid=d(28).default},function(n,a,d){Object.defineProperty(a,"__esModule",{value:!0}),a.default=c;var w=d(3),M=P(w);function P(U){return U&&U.__esModule?U:{default:U}}function c(){for(var U=arguments.length,O=Array(U),j=0;j<U;j++)O[j]=arguments[j];return new M.default(O)}},function(n,a,d){var w=function(){function j(W,J){for(var ae=0;ae<J.length;ae++){var be=J[ae];be.enumerable=be.enumerable||!1,be.configurable=!0,"value"in be&&(be.writable=!0),Object.defineProperty(W,be.key,be)}}return function(W,J,ae){return J&&j(W.prototype,J),ae&&j(W,ae),W}}();Object.defineProperty(a,"__esModule",{value:!0});var M=d(4),P=c(M);d(5),d(6);function c(j){return j&&j.__esModule?j:{default:j}}function U(j,W){if(!(j instanceof W))throw new TypeError("Cannot call a class as a function")}var O=function(){function j(W){U(this,j),this.validators=[];var J=!0,ae=!1,be=void 0;try{for(var Ze=W[Symbol.iterator](),xe;!(J=(xe=Ze.next()).done);J=!0){var Ce=xe.value;this.validators.push((0,P.default)(Ce))}}catch(je){ae=!0,be=je}finally{try{!J&&Ze.return&&Ze.return()}finally{if(ae)throw be}}}return w(j,[{key:"isValid",value:function(J){var ae=!0,be=!1,Ze=void 0;try{for(var xe=this.validators[Symbol.iterator](),Ce;!(ae=(Ce=xe.next()).done);ae=!0){var je=Ce.value;if(je.isValid(J))return!0}}catch(Qe){be=!0,Ze=Qe}finally{try{!ae&&xe.return&&xe.return()}finally{if(be)throw Ze}}return!1}},{key:"getValidationResult",value:function(J){if(this.isValid(J))return{isValid:"true"};var ae=this._getValidationDetails(J);return{isValid:"false",message:`Value doesn't match any of the expected variants.
Value: `+JSON.stringify(J)+`
Details: 
`+ae.message,score:ae.score}}},{key:"_getValidationDetails",value:function(J){var ae=[],be=!0,Ze=!1,xe=void 0;try{for(var Ce=this.validators[Symbol.iterator](),je;!(be=(je=Ce.next()).done);be=!0){var Qe=je.value;ae.push(Qe.getValidationResult(J))}}catch(it){Ze=!0,xe=it}finally{try{!be&&Ce.return&&Ce.return()}finally{if(Ze)throw xe}}ae.sort(function(it,xt){return it.score<xt.score?1:it.score>xt.score?-1:0}),ae.length>3&&(ae.length=3);var nt=ae.map(function(it){return it.message}).join(`
`);return{message:nt,score:ae[0].score}}}]),j}();a.default=O},function(n,a,d){Object.defineProperty(a,"__esModule",{value:!0}),a.default=Ze,d(5);var w=d(7),M=ae(w),P=d(9),c=ae(P),U=d(10),O=ae(U),j=d(3);ae(j);var W=d(11),J=ae(W);function ae(xe){return xe&&xe.__esModule?xe:{default:xe}}function be(xe){return xe&&typeof Symbol<"u"&&xe.constructor===Symbol?"symbol":typeof xe}function Ze(xe){if(xe==null)throw Error("Null cannot be a valid validation descriptor");if(xe===String)return M.default;if(xe===Number)return c.default;if(xe===Boolean)return O.default;if((typeof xe>"u"?"undefined":be(xe))==="object"&&xe&&typeof xe.isValid=="function"&&typeof xe.getValidationResult=="function")return xe;if(typeof xe=="string"||typeof xe=="number"||typeof xe=="boolean")return new J.default(xe);throw new Error("Can't recognize this descriptor: "+xe)}},function(n,a,d){d(6)},function(n,a){},function(n,a,d){Object.defineProperty(a,"__esModule",{value:!0});var w=d(8),M=P(w);d(6),d(5);function P(U){return U&&U.__esModule?U:{default:U}}var c={isValid:function(O){return typeof O=="string"},getValidationResult:function(O){return c.isValid(O)?{isValid:"true"}:{isValid:"false",message:"String expected, "+(0,M.default)(O)+" given.",score:0}}};a.default=c},function(n,a){n.exports=hL()},function(n,a,d){Object.defineProperty(a,"__esModule",{value:!0});var w=d(8),M=P(w);d(6),d(5);function P(U){return U&&U.__esModule?U:{default:U}}var c={isValid:function(O){return typeof O=="number"},getValidationResult:function(O){return c.isValid(O)?{isValid:"true"}:{isValid:"false",message:"Number expected. '"+(0,M.default)(O)+"' given.",score:0}}};a.default=c},function(n,a,d){Object.defineProperty(a,"__esModule",{value:!0});var w=d(8),M=P(w);d(6),d(5);function P(U){return U&&U.__esModule?U:{default:U}}var c={isValid:function(O){return typeof O=="boolean"},getValidationResult:function(O){return c.isValid(O)?{isValid:"true"}:{isValid:"false",message:"Boolean expected. "+(0,M.default)(O)+" given.",score:0}}};a.default=c},function(n,a,d){var w=function(){function O(j,W){for(var J=0;J<W.length;J++){var ae=W[J];ae.enumerable=ae.enumerable||!1,ae.configurable=!0,"value"in ae&&(ae.writable=!0),Object.defineProperty(j,ae.key,ae)}}return function(j,W,J){return W&&O(j.prototype,W),J&&O(j,J),j}}();Object.defineProperty(a,"__esModule",{value:!0});var M=d(4);P(M),d(5),d(6);function P(O){return O&&O.__esModule?O:{default:O}}function c(O,j){if(!(O instanceof j))throw new TypeError("Cannot call a class as a function")}var U=function(){function O(j){c(this,O),this.expectedValue=j}return w(O,[{key:"isValid",value:function(W){return W===this.expectedValue}},{key:"getValidationResult",value:function(W){return this.isValid(W)?{isValid:"true"}:{isValid:"false",message:"Expected: "+JSON.stringify(this.expectedValue)+". Given: "+W,score:0}}}]),O}();a.default=U},function(n,a,d){Object.defineProperty(a,"__esModule",{value:!0});var w=d(13),M=P(w);function P(c){return c&&c.__esModule?c:{default:c}}a.default=M.default},function(n,a,d){Object.defineProperty(a,"__esModule",{value:!0});var w=d(8);M(w),d(6),d(5);function M(c){return c&&c.__esModule?c:{default:c}}var P={isValid:function(U){return!0},getValidationResult:function(U){return{isValid:"true"}}};a.default=P},function(n,a,d){Object.defineProperty(a,"__esModule",{value:!0});var w=d(15),M=P(w);function P(c){return c&&c.__esModule?c:{default:c}}a.default=M.default},function(n,a,d){Object.defineProperty(a,"__esModule",{value:!0});var w=d(8),M=P(w);d(6),d(5);function P(U){return U&&U.__esModule?U:{default:U}}var c={isValid:function(O){return O==null},getValidationResult:function(O){return c.isValid(O)?{isValid:"true"}:{isValid:"false",message:"Null expected. "+(0,M.default)(O)+" given.",score:0}}};a.default=c},function(n,a,d){Object.defineProperty(a,"__esModule",{value:!0}),a.default=c;var w=d(17),M=P(w);function P(U){return U&&U.__esModule?U:{default:U}}function c(U){return new M.default(U)}},function(n,a,d){var w=function(){function ae(be,Ze){for(var xe=0;xe<Ze.length;xe++){var Ce=Ze[xe];Ce.enumerable=Ce.enumerable||!1,Ce.configurable=!0,"value"in Ce&&(Ce.writable=!0),Object.defineProperty(be,Ce.key,Ce)}}return function(be,Ze,xe){return Ze&&ae(be.prototype,Ze),xe&&ae(be,xe),be}}();Object.defineProperty(a,"__esModule",{value:!0});var M=d(8),P=O(M),c=d(4),U=O(c);d(6),d(5);function O(ae){return ae&&ae.__esModule?ae:{default:ae}}function j(ae,be){if(!(ae instanceof be))throw new TypeError("Cannot call a class as a function")}function W(ae){return ae&&typeof Symbol<"u"&&ae.constructor===Symbol?"symbol":typeof ae}var J=function(){function ae(be){j(this,ae),this.validator=(0,U.default)(be)}return w(ae,[{key:"isValid",value:function(Ze){if(!((typeof Ze>"u"?"undefined":W(Ze))==="object"&&Ze))return!1;var xe=Object.keys(Ze),Ce=!0,je=!1,Qe=void 0;try{for(var nt=xe[Symbol.iterator](),it;!(Ce=(it=nt.next()).done);Ce=!0){var xt=it.value,Ft=Ze[xt];if(this.validator.isValid(Ft)===!1)return!1}}catch(It){je=!0,Qe=It}finally{try{!Ce&&nt.return&&nt.return()}finally{if(je)throw Qe}}return!0}},{key:"getValidationResult",value:function(Ze){if(!((typeof Ze>"u"?"undefined":W(Ze))==="object"&&Ze))return{isValid:"false",message:"Object expected. "+(0,P.default)(Ze)+" given.",score:0};var xe=Object.keys(Ze),Ce=!0,je=!1,Qe=void 0;try{for(var nt=xe[Symbol.iterator](),it;!(Ce=(it=nt.next()).done);Ce=!0){var xt=it.value,Ft=Ze[xt],It=this.validator.getValidationResult(Ft);if(It.isValid==="false")return{isValid:"false",message:"Validation failed for key '"+xt+"': "+It.message,score:1}}}catch(nn){je=!0,Qe=nn}finally{try{!Ce&&nt.return&&nt.return()}finally{if(je)throw Qe}}return{isValid:"true"}}}]),ae}();a.default=J},function(n,a,d){Object.defineProperty(a,"__esModule",{value:!0}),a.default=c;var w=d(19),M=P(w);function P(U){return U&&U.__esModule?U:{default:U}}function c(U){return new M.default(U)}},function(n,a,d){var w=function(){function J(ae,be){for(var Ze=0;Ze<be.length;Ze++){var xe=be[Ze];xe.enumerable=xe.enumerable||!1,xe.configurable=!0,"value"in xe&&(xe.writable=!0),Object.defineProperty(ae,xe.key,xe)}}return function(ae,be,Ze){return be&&J(ae.prototype,be),Ze&&J(ae,Ze),ae}}();Object.defineProperty(a,"__esModule",{value:!0});var M=d(8),P=O(M),c=d(4),U=O(c);d(6),d(5);function O(J){return J&&J.__esModule?J:{default:J}}function j(J,ae){if(!(J instanceof ae))throw new TypeError("Cannot call a class as a function")}var W=function(){function J(ae){j(this,J),this.validator=(0,U.default)(ae)}return w(J,[{key:"isValid",value:function(be){if(!Array.isArray(be))return!1;var Ze=!0,xe=!1,Ce=void 0;try{for(var je=be[Symbol.iterator](),Qe;!(Ze=(Qe=je.next()).done);Ze=!0){var nt=Qe.value;if(this.validator.isValid(nt)===!1)return!1}}catch(it){xe=!0,Ce=it}finally{try{!Ze&&je.return&&je.return()}finally{if(xe)throw Ce}}return!0}},{key:"getValidationResult",value:function(be){if(!Array.isArray(be))return{isValid:"false",message:"Array expected. "+(0,P.default)(be)+" given.",score:0};for(var Ze=0;Ze<be.length;Ze++){var xe=be[Ze],Ce=this.validator.getValidationResult(xe);if(Ce.isValid==="false")return{isValid:"false",message:"Validation failed on item #"+Ze+": "+Ce.message,score:1}}return{isValid:"true"}}}]),J}();a.default=W},function(n,a,d){Object.defineProperty(a,"__esModule",{value:!0}),a.default=c;var w=d(21),M=P(w);function P(U){return U&&U.__esModule?U:{default:U}}function c(U){return new M.default(U)}},function(n,a,d){var w=function(){function Ze(xe,Ce){for(var je=0;je<Ce.length;je++){var Qe=Ce[je];Qe.enumerable=Qe.enumerable||!1,Qe.configurable=!0,"value"in Qe&&(Qe.writable=!0),Object.defineProperty(xe,Qe.key,Qe)}}return function(xe,Ce,je){return Ce&&Ze(xe.prototype,Ce),je&&Ze(xe,je),xe}}();Object.defineProperty(a,"__esModule",{value:!0});var M=d(8),P=W(M),c=d(22),U=W(c),O=d(4),j=W(O);d(5),d(6);function W(Ze){return Ze&&Ze.__esModule?Ze:{default:Ze}}function J(Ze,xe){if(!(Ze instanceof xe))throw new TypeError("Cannot call a class as a function")}function ae(Ze){return Ze&&typeof Symbol<"u"&&Ze.constructor===Symbol?"symbol":typeof Ze}var be=function(){function Ze(xe){if(J(this,Ze),!((typeof xe>"u"?"undefined":ae(xe))==="object"&&xe&&(0,U.default)(xe)))throw Error("A record must be defined by an object.");this.shape={};var Ce=!0,je=!1,Qe=void 0;try{for(var nt=Object.getOwnPropertyNames(xe)[Symbol.iterator](),it;!(Ce=(it=nt.next()).done);Ce=!0){var xt=it.value;try{this.shape[xt]=(0,j.default)(xe[xt])}catch(nn){var Ft=xt,It=nn.stack;throw nn.originalStack?(It=nn.originalStack,Ft+="."+nn.propertyName,nn.propertyName=Ft):nn.originalStack=nn.stack,nn.stack="Error defining prop '"+Ft+"': "+nn.originalStack,nn}}}catch(nn){je=!0,Qe=nn}finally{try{!Ce&&nt.return&&nt.return()}finally{if(je)throw Qe}}}return w(Ze,[{key:"isValid",value:function(Ce){if(!((typeof Ce>"u"?"undefined":ae(Ce))==="object"&&Ce))return!1;var je=!0,Qe=!1,nt=void 0;try{for(var it=Object.keys(this.shape)[Symbol.iterator](),xt;!(je=(xt=it.next()).done);je=!0){var Ft=xt.value,It=this.shape[Ft];if(It.isValid(Ce[Ft])===!1)return!1}}catch(nn){Qe=!0,nt=nn}finally{try{!je&&it.return&&it.return()}finally{if(Qe)throw nt}}return!0}},{key:"getValidationResult",value:function(Ce){if(!((typeof Ce>"u"?"undefined":ae(Ce))==="object"&&Ce))return{isValid:"false",message:"Object expected, "+(0,P.default)(Ce)+" given.",score:0};var je=0,Qe=!0,nt=!1,it=void 0;try{for(var xt=Object.keys(this.shape)[Symbol.iterator](),Ft;!(Qe=(Ft=xt.next()).done);Qe=!0){var It=Ft.value,nn=this.shape[It],Zt=nn.getValidationResult(Ce[It]);if(Zt.isValid==="false")return{isValid:"false",message:"Error validating prop "+It+`:
 `+Zt.message,score:1+je};je++}}catch(At){nt=!0,it=At}finally{try{!Qe&&xt.return&&xt.return()}finally{if(nt)throw it}}return{isValid:"true"}}}]),Ze}();a.default=be},function(n,a){n.exports=ML()},function(n,a,d){Object.defineProperty(a,"__esModule",{value:!0}),a.default=c;var w=d(24),M=P(w);function P(U){return U&&U.__esModule?U:{default:U}}function c(U){return new M.default(U)}},function(n,a,d){var w=function(){function j(W,J){for(var ae=0;ae<J.length;ae++){var be=J[ae];be.enumerable=be.enumerable||!1,be.configurable=!0,"value"in be&&(be.writable=!0),Object.defineProperty(W,be.key,be)}}return function(W,J,ae){return J&&j(W.prototype,J),ae&&j(W,ae),W}}();Object.defineProperty(a,"__esModule",{value:!0});var M=d(4),P=c(M);d(6),d(5);function c(j){return j&&j.__esModule?j:{default:j}}function U(j,W){if(!(j instanceof W))throw new TypeError("Cannot call a class as a function")}var O=function(){function j(W){U(this,j),this.validator=(0,P.default)(W)}return w(j,[{key:"isValid",value:function(J){return J?this.validator.isValid(J):!0}},{key:"getValidationResult",value:function(J){return J?this.validator.getValidationResult(J):{isValid:"true"}}}]),j}();a.default=O},function(n,a,d){Object.defineProperty(a,"__esModule",{value:!0}),a.default=c;var w=d(4),M=P(w);function P(U){return U&&U.__esModule?U:{default:U}}function c(U,O){var j=(0,M.default)(U),W=j.getValidationResult(O);if(W.isValid==="false")throw Error(W.message);return O}},function(n,a,d){Object.defineProperty(a,"__esModule",{value:!0}),a.default=c;var w=d(27),M=P(w);function P(U){return U&&U.__esModule?U:{default:U}}function c(U){return new M.default(U)}},function(n,a,d){var w=function(){function W(J,ae){for(var be=0;be<ae.length;be++){var Ze=ae[be];Ze.enumerable=Ze.enumerable||!1,Ze.configurable=!0,"value"in Ze&&(Ze.writable=!0),Object.defineProperty(J,Ze.key,Ze)}}return function(J,ae,be){return ae&&W(J.prototype,ae),be&&W(J,be),J}}();Object.defineProperty(a,"__esModule",{value:!0});var M=d(8),P=U(M),c=d(4);U(c),d(6),d(5);function U(W){return W&&W.__esModule?W:{default:W}}function O(W,J){if(!(W instanceof J))throw new TypeError("Cannot call a class as a function")}var j=function(){function W(J){if(O(this,W),typeof J!="function")throw Error("Deferred validator only accepts a function. "+(0,P.default)(J)+" given");this.deferredValidator=J}return w(W,[{key:"isValid",value:function(ae){return this._getValidator().isValid(ae)}},{key:"getValidationResult",value:function(ae){return this._getValidator().getValidationResult(ae)}},{key:"_getValidator",value:function(){return this.validator||(this.validator=this.deferredValidator()),this.validator}}]),W}();a.default=j},function(n,a,d){Object.defineProperty(a,"__esModule",{value:!0}),a.default=c;var w=d(4),M=P(w);function P(U){return U&&U.__esModule?U:{default:U}}function c(U,O){var j=(0,M.default)(U);return j.isValid(O)}}])})(uL);var cm=function(e){e=e||{};var n=typeof e<"u"?e:{},a={},d;for(d in n)n.hasOwnProperty(d)&&(a[d]=n[d]);var w="";function M(se){return n.locateFile?n.locateFile(se,w):w+se}var P;document.currentScript&&(w=document.currentScript.src),w.indexOf("blob:")!==0?w=w.substr(0,w.lastIndexOf("/")+1):w="",P=function(_e,We,dt){var t=new XMLHttpRequest;t.open("GET",_e,!0),t.responseType="arraybuffer",t.onload=function(){if(t.status==200||t.status==0&&t.response){We(t.response);return}var St=br(_e);if(St){We(St.buffer);return}dt()},t.onerror=dt,t.send(null)};var c=n.print||console.log.bind(console),U=n.printErr||console.warn.bind(console);for(d in a)a.hasOwnProperty(d)&&(n[d]=a[d]);a=null,n.arguments&&n.arguments;var O=0,j=function(se){O=se},W=function(){return O},J=8;function ae(se,_e,We,dt){switch(We=We||"i8",We.charAt(We.length-1)==="*"&&(We="i32"),We){case"i1":bt[se>>0]=_e;break;case"i8":bt[se>>0]=_e;break;case"i16":De[se>>1]=_e;break;case"i32":at[se>>2]=_e;break;case"i64":Br=[_e>>>0,(qn=_e,+Ii(qn)>=1?qn>0?(Ar(+qi(qn/4294967296),4294967295)|0)>>>0:~~+Pn((qn-+(~~qn>>>0))/4294967296)>>>0:0)],at[se>>2]=Br[0],at[se+4>>2]=Br[1];break;case"float":lt[se>>2]=_e;break;case"double":Tt[se>>3]=_e;break;default:yt("invalid type for setValue: "+We)}}function be(se,_e,We){switch(_e=_e||"i8",_e.charAt(_e.length-1)==="*"&&(_e="i32"),_e){case"i1":return bt[se>>0];case"i8":return bt[se>>0];case"i16":return De[se>>1];case"i32":return at[se>>2];case"i64":return at[se>>2];case"float":return lt[se>>2];case"double":return Tt[se>>3];default:yt("invalid type for getValue: "+_e)}return null}var Ze=!1;function xe(se,_e){se||yt("Assertion failed: "+_e)}function Ce(se){var _e=n["_"+se];return xe(_e,"Cannot call unknown function "+se+", make sure it is exported"),_e}function je(se,_e,We,dt,t){var K={string:function(sn){var oi=0;if(sn!=null&&sn!==0){var Dr=(sn.length<<2)+1;oi=oe(Dr),It(sn,oi,Dr)}return oi},array:function(sn){var oi=oe(sn.length);return nn(sn,oi),oi}};function St(sn){return _e==="string"?xt(sn):_e==="boolean"?!!sn:sn}var Qt=Ce(se),en=[],Pt=0;if(dt)for(var Ht=0;Ht<dt.length;Ht++){var Bn=K[We[Ht]];Bn?(Pt===0&&(Pt=we()),en[Ht]=Bn(dt[Ht])):en[Ht]=dt[Ht]}var $t=Qt.apply(null,en);return $t=St($t),Pt!==0&&de(Pt),$t}function Qe(se,_e,We,dt){We=We||[];var t=We.every(function(St){return St==="number"}),K=_e!=="string";return K&&t&&!dt?Ce(se):function(){return je(se,_e,We,arguments)}}var nt=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function it(se,_e,We){for(var dt=_e+We,t=_e;se[t]&&!(t>=dt);)++t;if(t-_e>16&&se.subarray&&nt)return nt.decode(se.subarray(_e,t));for(var K="";_e<t;){var St=se[_e++];if(!(St&128)){K+=String.fromCharCode(St);continue}var Qt=se[_e++]&63;if((St&224)==192){K+=String.fromCharCode((St&31)<<6|Qt);continue}var en=se[_e++]&63;if((St&240)==224?St=(St&15)<<12|Qt<<6|en:St=(St&7)<<18|Qt<<12|en<<6|se[_e++]&63,St<65536)K+=String.fromCharCode(St);else{var Pt=St-65536;K+=String.fromCharCode(55296|Pt>>10,56320|Pt&1023)}}return K}function xt(se,_e){return se?it(kt,se,_e):""}function Ft(se,_e,We,dt){if(!(dt>0))return 0;for(var t=We,K=We+dt-1,St=0;St<se.length;++St){var Qt=se.charCodeAt(St);if(Qt>=55296&&Qt<=57343){var en=se.charCodeAt(++St);Qt=65536+((Qt&1023)<<10)|en&1023}if(Qt<=127){if(We>=K)break;_e[We++]=Qt}else if(Qt<=2047){if(We+1>=K)break;_e[We++]=192|Qt>>6,_e[We++]=128|Qt&63}else if(Qt<=65535){if(We+2>=K)break;_e[We++]=224|Qt>>12,_e[We++]=128|Qt>>6&63,_e[We++]=128|Qt&63}else{if(We+3>=K)break;_e[We++]=240|Qt>>18,_e[We++]=128|Qt>>12&63,_e[We++]=128|Qt>>6&63,_e[We++]=128|Qt&63}}return _e[We]=0,We-t}function It(se,_e,We){return Ft(se,kt,_e,We)}typeof TextDecoder<"u"&&new TextDecoder("utf-16le");function nn(se,_e){bt.set(se,_e)}function Zt(se,_e){return se%_e>0&&(se+=_e-se%_e),se}var At,bt,kt,De,at,lt,Tt;function Ot(se){At=se,n.HEAP8=bt=new Int8Array(se),n.HEAP16=De=new Int16Array(se),n.HEAP32=at=new Int32Array(se),n.HEAPU8=kt=new Uint8Array(se),n.HEAPU16=new Uint16Array(se),n.HEAPU32=new Uint32Array(se),n.HEAPF32=lt=new Float32Array(se),n.HEAPF64=Tt=new Float64Array(se)}var Gt=5266928,_n=24016,hn=n.TOTAL_MEMORY||33554432;n.buffer?At=n.buffer:At=new ArrayBuffer(hn),hn=At.byteLength,Ot(At),at[_n>>2]=Gt;function vn(se){for(;se.length>0;){var _e=se.shift();if(typeof _e=="function"){_e();continue}var We=_e.func;typeof We=="number"?_e.arg===void 0?n.dynCall_v(We):n.dynCall_vi(We,_e.arg):We(_e.arg===void 0?null:_e.arg)}}var Dn=[],Qn=[],di=[],xi=[];function Ct(){if(n.preRun)for(typeof n.preRun=="function"&&(n.preRun=[n.preRun]);n.preRun.length;)Gn(n.preRun.shift());vn(Dn)}function xn(){vn(Qn)}function Bt(){vn(di)}function En(){if(n.postRun)for(typeof n.postRun=="function"&&(n.postRun=[n.postRun]);n.postRun.length;)Lt(n.postRun.shift());vn(xi)}function Gn(se){Dn.unshift(se)}function Lt(se){xi.unshift(se)}var Ii=Math.abs,Pn=Math.ceil,qi=Math.floor,Ar=Math.min,un=0,Jn=null;function uA(se){un++,n.monitorRunDependencies&&n.monitorRunDependencies(un)}function pt(se){if(un--,n.monitorRunDependencies&&n.monitorRunDependencies(un),un==0&&Jn){var _e=Jn;Jn=null,_e()}}n.preloadedImages={},n.preloadedAudios={};var ei=null,_r="data:application/octet-stream;base64,";function pi(se){return String.prototype.startsWith?se.startsWith(_r):se.indexOf(_r)===0}var qn,Br;ei="data:application/octet-stream;base64,AAAAAAAAAAACAAAAAwAAAAEAAAAFAAAABAAAAAYAAAAAAAAAAAAAAAAAAAABAAAAAgAAAAMAAAAEAAAABQAAAAYAAAABAAAABAAAAAMAAAAGAAAABQAAAAIAAAAAAAAAAgAAAAMAAAABAAAABAAAAAYAAAAAAAAABQAAAAMAAAAGAAAABAAAAAUAAAAAAAAAAQAAAAIAAAAEAAAABQAAAAYAAAAAAAAAAgAAAAMAAAABAAAABQAAAAIAAAAAAAAAAQAAAAMAAAAGAAAABAAAAAYAAAAAAAAABQAAAAIAAAABAAAABAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAgAAAAMAAAAAAAAAAAAAAAIAAAAAAAAAAQAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAEAAAABgAAAAAAAAAFAAAAAAAAAAAAAAAEAAAABQAAAAAAAAAAAAAAAAAAAAIAAAAAAAAABgAAAAAAAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAACAAAAAwAAAAQAAAAFAAAABgAAAAEAAAACAAAAAwAAAAQAAAAFAAAABgAAAAAAAAACAAAAAwAAAAQAAAAFAAAABgAAAAAAAAABAAAAAwAAAAQAAAAFAAAABgAAAAAAAAABAAAAAgAAAAQAAAAFAAAABgAAAAAAAAABAAAAAgAAAAMAAAAFAAAABgAAAAAAAAABAAAAAgAAAAMAAAAEAAAABgAAAAAAAAABAAAAAgAAAAMAAAAEAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAADAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAACAAAAAgAAAAAAAAAAAAAABgAAAAAAAAADAAAAAgAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAUAAAAEAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAAAAAAABgAAAAAAAAAEAAAAAAAAAAYAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAUAAAACAAAABAAAAAMAAAAIAAAAAQAAAAcAAAAGAAAACQAAAAAAAAADAAAAAgAAAAIAAAAGAAAACgAAAAsAAAAAAAAAAQAAAAUAAAADAAAADQAAAAEAAAAHAAAABAAAAAwAAAAAAAAABAAAAH8AAAAPAAAACAAAAAMAAAAAAAAADAAAAAUAAAACAAAAEgAAAAoAAAAIAAAAAAAAABAAAAAGAAAADgAAAAsAAAARAAAAAQAAAAkAAAACAAAABwAAABUAAAAJAAAAEwAAAAMAAAANAAAAAQAAAAgAAAAFAAAAFgAAABAAAAAEAAAAAAAAAA8AAAAJAAAAEwAAAA4AAAAUAAAAAQAAAAcAAAAGAAAACgAAAAsAAAAYAAAAFwAAAAUAAAACAAAAEgAAAAsAAAARAAAAFwAAABkAAAACAAAABgAAAAoAAAAMAAAAHAAAAA0AAAAaAAAABAAAAA8AAAADAAAADQAAABoAAAAVAAAAHQAAAAMAAAAMAAAABwAAAA4AAAB/AAAAEQAAABsAAAAJAAAAFAAAAAYAAAAPAAAAFgAAABwAAAAfAAAABAAAAAgAAAAMAAAAEAAAABIAAAAhAAAAHgAAAAgAAAAFAAAAFgAAABEAAAALAAAADgAAAAYAAAAjAAAAGQAAABsAAAASAAAAGAAAAB4AAAAgAAAABQAAAAoAAAAQAAAAEwAAACIAAAAUAAAAJAAAAAcAAAAVAAAACQAAABQAAAAOAAAAEwAAAAkAAAAoAAAAGwAAACQAAAAVAAAAJgAAABMAAAAiAAAADQAAAB0AAAAHAAAAFgAAABAAAAApAAAAIQAAAA8AAAAIAAAAHwAAABcAAAAYAAAACwAAAAoAAAAnAAAAJQAAABkAAAAYAAAAfwAAACAAAAAlAAAACgAAABcAAAASAAAAGQAAABcAAAARAAAACwAAAC0AAAAnAAAAIwAAABoAAAAqAAAAHQAAACsAAAAMAAAAHAAAAA0AAAAbAAAAKAAAACMAAAAuAAAADgAAABQAAAARAAAAHAAAAB8AAAAqAAAALAAAAAwAAAAPAAAAGgAAAB0AAAArAAAAJgAAAC8AAAANAAAAGgAAABUAAAAeAAAAIAAAADAAAAAyAAAAEAAAABIAAAAhAAAAHwAAACkAAAAsAAAANQAAAA8AAAAWAAAAHAAAACAAAAAeAAAAGAAAABIAAAA0AAAAMgAAACUAAAAhAAAAHgAAADEAAAAwAAAAFgAAABAAAAApAAAAIgAAABMAAAAmAAAAFQAAADYAAAAkAAAAMwAAACMAAAAuAAAALQAAADgAAAARAAAAGwAAABkAAAAkAAAAFAAAACIAAAATAAAANwAAACgAAAA2AAAAJQAAACcAAAA0AAAAOQAAABgAAAAXAAAAIAAAACYAAAB/AAAAIgAAADMAAAAdAAAALwAAABUAAAAnAAAAJQAAABkAAAAXAAAAOwAAADkAAAAtAAAAKAAAABsAAAAkAAAAFAAAADwAAAAuAAAANwAAACkAAAAxAAAANQAAAD0AAAAWAAAAIQAAAB8AAAAqAAAAOgAAACsAAAA+AAAAHAAAACwAAAAaAAAAKwAAAD4AAAAvAAAAQAAAABoAAAAqAAAAHQAAACwAAAA1AAAAOgAAAEEAAAAcAAAAHwAAACoAAAAtAAAAJwAAACMAAAAZAAAAPwAAADsAAAA4AAAALgAAADwAAAA4AAAARAAAABsAAAAoAAAAIwAAAC8AAAAmAAAAKwAAAB0AAABFAAAAMwAAAEAAAAAwAAAAMQAAAB4AAAAhAAAAQwAAAEIAAAAyAAAAMQAAAH8AAAA9AAAAQgAAACEAAAAwAAAAKQAAADIAAAAwAAAAIAAAAB4AAABGAAAAQwAAADQAAAAzAAAARQAAADYAAABHAAAAJgAAAC8AAAAiAAAANAAAADkAAABGAAAASgAAACAAAAAlAAAAMgAAADUAAAA9AAAAQQAAAEsAAAAfAAAAKQAAACwAAAA2AAAARwAAADcAAABJAAAAIgAAADMAAAAkAAAANwAAACgAAAA2AAAAJAAAAEgAAAA8AAAASQAAADgAAABEAAAAPwAAAE0AAAAjAAAALgAAAC0AAAA5AAAAOwAAAEoAAABOAAAAJQAAACcAAAA0AAAAOgAAAH8AAAA+AAAATAAAACwAAABBAAAAKgAAADsAAAA/AAAATgAAAE8AAAAnAAAALQAAADkAAAA8AAAASAAAAEQAAABQAAAAKAAAADcAAAAuAAAAPQAAADUAAAAxAAAAKQAAAFEAAABLAAAAQgAAAD4AAAArAAAAOgAAACoAAABSAAAAQAAAAEwAAAA/AAAAfwAAADgAAAAtAAAATwAAADsAAABNAAAAQAAAAC8AAAA+AAAAKwAAAFQAAABFAAAAUgAAAEEAAAA6AAAANQAAACwAAABWAAAATAAAAEsAAABCAAAAQwAAAFEAAABVAAAAMQAAADAAAAA9AAAAQwAAAEIAAAAyAAAAMAAAAFcAAABVAAAARgAAAEQAAAA4AAAAPAAAAC4AAABaAAAATQAAAFAAAABFAAAAMwAAAEAAAAAvAAAAWQAAAEcAAABUAAAARgAAAEMAAAA0AAAAMgAAAFMAAABXAAAASgAAAEcAAABZAAAASQAAAFsAAAAzAAAARQAAADYAAABIAAAAfwAAAEkAAAA3AAAAUAAAADwAAABYAAAASQAAAFsAAABIAAAAWAAAADYAAABHAAAANwAAAEoAAABOAAAAUwAAAFwAAAA0AAAAOQAAAEYAAABLAAAAQQAAAD0AAAA1AAAAXgAAAFYAAABRAAAATAAAAFYAAABSAAAAYAAAADoAAABBAAAAPgAAAE0AAAA/AAAARAAAADgAAABdAAAATwAAAFoAAABOAAAASgAAADsAAAA5AAAAXwAAAFwAAABPAAAATwAAAE4AAAA/AAAAOwAAAF0AAABfAAAATQAAAFAAAABEAAAASAAAADwAAABjAAAAWgAAAFgAAABRAAAAVQAAAF4AAABlAAAAPQAAAEIAAABLAAAAUgAAAGAAAABUAAAAYgAAAD4AAABMAAAAQAAAAFMAAAB/AAAASgAAAEYAAABkAAAAVwAAAFwAAABUAAAARQAAAFIAAABAAAAAYQAAAFkAAABiAAAAVQAAAFcAAABlAAAAZgAAAEIAAABDAAAAUQAAAFYAAABMAAAASwAAAEEAAABoAAAAYAAAAF4AAABXAAAAUwAAAGYAAABkAAAAQwAAAEYAAABVAAAAWAAAAEgAAABbAAAASQAAAGMAAABQAAAAaQAAAFkAAABhAAAAWwAAAGcAAABFAAAAVAAAAEcAAABaAAAATQAAAFAAAABEAAAAagAAAF0AAABjAAAAWwAAAEkAAABZAAAARwAAAGkAAABYAAAAZwAAAFwAAABTAAAATgAAAEoAAABsAAAAZAAAAF8AAABdAAAATwAAAFoAAABNAAAAbQAAAF8AAABqAAAAXgAAAFYAAABRAAAASwAAAGsAAABoAAAAZQAAAF8AAABcAAAATwAAAE4AAABtAAAAbAAAAF0AAABgAAAAaAAAAGIAAABuAAAATAAAAFYAAABSAAAAYQAAAH8AAABiAAAAVAAAAGcAAABZAAAAbwAAAGIAAABuAAAAYQAAAG8AAABSAAAAYAAAAFQAAABjAAAAUAAAAGkAAABYAAAAagAAAFoAAABxAAAAZAAAAGYAAABTAAAAVwAAAGwAAAByAAAAXAAAAGUAAABmAAAAawAAAHAAAABRAAAAVQAAAF4AAABmAAAAZQAAAFcAAABVAAAAcgAAAHAAAABkAAAAZwAAAFsAAABhAAAAWQAAAHQAAABpAAAAbwAAAGgAAABrAAAAbgAAAHMAAABWAAAAXgAAAGAAAABpAAAAWAAAAGcAAABbAAAAcQAAAGMAAAB0AAAAagAAAF0AAABjAAAAWgAAAHUAAABtAAAAcQAAAGsAAAB/AAAAZQAAAF4AAABzAAAAaAAAAHAAAABsAAAAZAAAAF8AAABcAAAAdgAAAHIAAABtAAAAbQAAAGwAAABdAAAAXwAAAHUAAAB2AAAAagAAAG4AAABiAAAAaAAAAGAAAAB3AAAAbwAAAHMAAABvAAAAYQAAAG4AAABiAAAAdAAAAGcAAAB3AAAAcAAAAGsAAABmAAAAZQAAAHgAAABzAAAAcgAAAHEAAABjAAAAdAAAAGkAAAB1AAAAagAAAHkAAAByAAAAcAAAAGQAAABmAAAAdgAAAHgAAABsAAAAcwAAAG4AAABrAAAAaAAAAHgAAAB3AAAAcAAAAHQAAABnAAAAdwAAAG8AAABxAAAAaQAAAHkAAAB1AAAAfwAAAG0AAAB2AAAAcQAAAHkAAABqAAAAdgAAAHgAAABsAAAAcgAAAHUAAAB5AAAAbQAAAHcAAABvAAAAcwAAAG4AAAB5AAAAdAAAAHgAAAB4AAAAcwAAAHIAAABwAAAAeQAAAHcAAAB2AAAAeQAAAHQAAAB4AAAAdwAAAHUAAABxAAAAdgAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAEAAAAFAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAIAAAAFAAAAAQAAAAAAAAD/////AQAAAAAAAAADAAAABAAAAAIAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAUAAAABAAAAAAAAAAAAAAABAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAAFAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAQAAAAFAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAADAAAAAAAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAABAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAADAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAADAAAABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAAAAAAAAAAABAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAMAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAQAAAAMAAAABAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAMAAAABAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAADAAAABQAAAAEAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAEAAAABQAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAgAAAAUAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAMAAAABAAAAAAAAAAEAAAAAAAAABQAAAAAAAAAAAAAABQAAAAUAAAAAAAAAAAAAAP////8BAAAAAAAAAAMAAAAEAAAAAgAAAAAAAAAAAAAAAQAAAAAAAAAAAAAABQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABAAAABQAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAQAAAP//////////AQAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAMAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAIAAAAAAAAAAAAAAAEAAAACAAAABgAAAAQAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAABwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABgAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAoAAAACAAAAAAAAAAAAAAABAAAAAQAAAAUAAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAIAAAAAAAAAAAAAAAEAAAADAAAABwAAAAYAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAHAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAABAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAOAAAAAgAAAAAAAAAAAAAAAQAAAAAAAAAJAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAwAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAgAAAAAAAAAAAAAAAQAAAAQAAAAIAAAACgAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAsAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAJAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAACAAAAAAAAAAAAAAABAAAACwAAAA8AAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACQAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAA4AAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAgAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAFAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAACAAAAAAAAAAAAAAABAAAADAAAABAAAAAMAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAACgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAA8AAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAPAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAEAAAAKAAAAEwAAAAgAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACQAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAADwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAJAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA0AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAgAAAAAAAAAAAAAAAQAAAA0AAAARAAAADQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABEAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAATAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABMAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACQAAAAIAAAAAAAAAAAAAAAEAAAAOAAAAEgAAAA8AAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAPAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAABIAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAATAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAASAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABMAAAACAAAAAAAAAAAAAAABAAAA//////////8TAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABMAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAASAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABIAAAAAAAAAGAAAAAAAAAAhAAAAAAAAAB4AAAAAAAAAIAAAAAMAAAAxAAAAAQAAADAAAAADAAAAMgAAAAMAAAAIAAAAAAAAAAUAAAAFAAAACgAAAAUAAAAWAAAAAAAAABAAAAAAAAAAEgAAAAAAAAApAAAAAQAAACEAAAAAAAAAHgAAAAAAAAAEAAAAAAAAAAAAAAAFAAAAAgAAAAUAAAAPAAAAAQAAAAgAAAAAAAAABQAAAAUAAAAfAAAAAQAAABYAAAAAAAAAEAAAAAAAAAACAAAAAAAAAAYAAAAAAAAADgAAAAAAAAAKAAAAAAAAAAsAAAAAAAAAEQAAAAMAAAAYAAAAAQAAABcAAAADAAAAGQAAAAMAAAAAAAAAAAAAAAEAAAAFAAAACQAAAAUAAAAFAAAAAAAAAAIAAAAAAAAABgAAAAAAAAASAAAAAQAAAAoAAAAAAAAACwAAAAAAAAAEAAAAAQAAAAMAAAAFAAAABwAAAAUAAAAIAAAAAQAAAAAAAAAAAAAAAQAAAAUAAAAQAAAAAQAAAAUAAAAAAAAAAgAAAAAAAAAHAAAAAAAAABUAAAAAAAAAJgAAAAAAAAAJAAAAAAAAABMAAAAAAAAAIgAAAAMAAAAOAAAAAQAAABQAAAADAAAAJAAAAAMAAAADAAAAAAAAAA0AAAAFAAAAHQAAAAUAAAABAAAAAAAAAAcAAAAAAAAAFQAAAAAAAAAGAAAAAQAAAAkAAAAAAAAAEwAAAAAAAAAEAAAAAgAAAAwAAAAFAAAAGgAAAAUAAAAAAAAAAQAAAAMAAAAAAAAADQAAAAUAAAACAAAAAQAAAAEAAAAAAAAABwAAAAAAAAAaAAAAAAAAACoAAAAAAAAAOgAAAAAAAAAdAAAAAAAAACsAAAAAAAAAPgAAAAMAAAAmAAAAAQAAAC8AAAADAAAAQAAAAAMAAAAMAAAAAAAAABwAAAAFAAAALAAAAAUAAAANAAAAAAAAABoAAAAAAAAAKgAAAAAAAAAVAAAAAQAAAB0AAAAAAAAAKwAAAAAAAAAEAAAAAwAAAA8AAAAFAAAAHwAAAAUAAAADAAAAAQAAAAwAAAAAAAAAHAAAAAUAAAAHAAAAAQAAAA0AAAAAAAAAGgAAAAAAAAAfAAAAAAAAACkAAAAAAAAAMQAAAAAAAAAsAAAAAAAAADUAAAAAAAAAPQAAAAMAAAA6AAAAAQAAAEEAAAADAAAASwAAAAMAAAAPAAAAAAAAABYAAAAFAAAAIQAAAAUAAAAcAAAAAAAAAB8AAAAAAAAAKQAAAAAAAAAqAAAAAQAAACwAAAAAAAAANQAAAAAAAAAEAAAABAAAAAgAAAAFAAAAEAAAAAUAAAAMAAAAAQAAAA8AAAAAAAAAFgAAAAUAAAAaAAAAAQAAABwAAAAAAAAAHwAAAAAAAAAyAAAAAAAAADAAAAAAAAAAMQAAAAMAAAAgAAAAAAAAAB4AAAADAAAAIQAAAAMAAAAYAAAAAwAAABIAAAADAAAAEAAAAAMAAABGAAAAAAAAAEMAAAAAAAAAQgAAAAMAAAA0AAAAAwAAADIAAAAAAAAAMAAAAAAAAAAlAAAAAwAAACAAAAAAAAAAHgAAAAMAAABTAAAAAAAAAFcAAAADAAAAVQAAAAMAAABKAAAAAwAAAEYAAAAAAAAAQwAAAAAAAAA5AAAAAQAAADQAAAADAAAAMgAAAAAAAAAZAAAAAAAAABcAAAAAAAAAGAAAAAMAAAARAAAAAAAAAAsAAAADAAAACgAAAAMAAAAOAAAAAwAAAAYAAAADAAAAAgAAAAMAAAAtAAAAAAAAACcAAAAAAAAAJQAAAAMAAAAjAAAAAwAAABkAAAAAAAAAFwAAAAAAAAAbAAAAAwAAABEAAAAAAAAACwAAAAMAAAA/AAAAAAAAADsAAAADAAAAOQAAAAMAAAA4AAAAAwAAAC0AAAAAAAAAJwAAAAAAAAAuAAAAAwAAACMAAAADAAAAGQAAAAAAAAAkAAAAAAAAABQAAAAAAAAADgAAAAMAAAAiAAAAAAAAABMAAAADAAAACQAAAAMAAAAmAAAAAwAAABUAAAADAAAABwAAAAMAAAA3AAAAAAAAACgAAAAAAAAAGwAAAAMAAAA2AAAAAwAAACQAAAAAAAAAFAAAAAAAAAAzAAAAAwAAACIAAAAAAAAAEwAAAAMAAABIAAAAAAAAADwAAAADAAAALgAAAAMAAABJAAAAAwAAADcAAAAAAAAAKAAAAAAAAABHAAAAAwAAADYAAAADAAAAJAAAAAAAAABAAAAAAAAAAC8AAAAAAAAAJgAAAAMAAAA+AAAAAAAAACsAAAADAAAAHQAAAAMAAAA6AAAAAwAAACoAAAADAAAAGgAAAAMAAABUAAAAAAAAAEUAAAAAAAAAMwAAAAMAAABSAAAAAwAAAEAAAAAAAAAALwAAAAAAAABMAAAAAwAAAD4AAAAAAAAAKwAAAAMAAABhAAAAAAAAAFkAAAADAAAARwAAAAMAAABiAAAAAwAAAFQAAAAAAAAARQAAAAAAAABgAAAAAwAAAFIAAAADAAAAQAAAAAAAAABLAAAAAAAAAEEAAAAAAAAAOgAAAAMAAAA9AAAAAAAAADUAAAADAAAALAAAAAMAAAAxAAAAAwAAACkAAAADAAAAHwAAAAMAAABeAAAAAAAAAFYAAAAAAAAATAAAAAMAAABRAAAAAwAAAEsAAAAAAAAAQQAAAAAAAABCAAAAAwAAAD0AAAAAAAAANQAAAAMAAABrAAAAAAAAAGgAAAADAAAAYAAAAAMAAABlAAAAAwAAAF4AAAAAAAAAVgAAAAAAAABVAAAAAwAAAFEAAAADAAAASwAAAAAAAAA5AAAAAAAAADsAAAAAAAAAPwAAAAMAAABKAAAAAAAAAE4AAAADAAAATwAAAAMAAABTAAAAAwAAAFwAAAADAAAAXwAAAAMAAAAlAAAAAAAAACcAAAADAAAALQAAAAMAAAA0AAAAAAAAADkAAAAAAAAAOwAAAAAAAABGAAAAAwAAAEoAAAAAAAAATgAAAAMAAAAYAAAAAAAAABcAAAADAAAAGQAAAAMAAAAgAAAAAwAAACUAAAAAAAAAJwAAAAMAAAAyAAAAAwAAADQAAAAAAAAAOQAAAAAAAAAuAAAAAAAAADwAAAAAAAAASAAAAAMAAAA4AAAAAAAAAEQAAAADAAAAUAAAAAMAAAA/AAAAAwAAAE0AAAADAAAAWgAAAAMAAAAbAAAAAAAAACgAAAADAAAANwAAAAMAAAAjAAAAAAAAAC4AAAAAAAAAPAAAAAAAAAAtAAAAAwAAADgAAAAAAAAARAAAAAMAAAAOAAAAAAAAABQAAAADAAAAJAAAAAMAAAARAAAAAwAAABsAAAAAAAAAKAAAAAMAAAAZAAAAAwAAACMAAAAAAAAALgAAAAAAAABHAAAAAAAAAFkAAAAAAAAAYQAAAAMAAABJAAAAAAAAAFsAAAADAAAAZwAAAAMAAABIAAAAAwAAAFgAAAADAAAAaQAAAAMAAAAzAAAAAAAAAEUAAAADAAAAVAAAAAMAAAA2AAAAAAAAAEcAAAAAAAAAWQAAAAAAAAA3AAAAAwAAAEkAAAAAAAAAWwAAAAMAAAAmAAAAAAAAAC8AAAADAAAAQAAAAAMAAAAiAAAAAwAAADMAAAAAAAAARQAAAAMAAAAkAAAAAwAAADYAAAAAAAAARwAAAAAAAABgAAAAAAAAAGgAAAAAAAAAawAAAAMAAABiAAAAAAAAAG4AAAADAAAAcwAAAAMAAABhAAAAAwAAAG8AAAADAAAAdwAAAAMAAABMAAAAAAAAAFYAAAADAAAAXgAAAAMAAABSAAAAAAAAAGAAAAAAAAAAaAAAAAAAAABUAAAAAwAAAGIAAAAAAAAAbgAAAAMAAAA6AAAAAAAAAEEAAAADAAAASwAAAAMAAAA+AAAAAwAAAEwAAAAAAAAAVgAAAAMAAABAAAAAAwAAAFIAAAAAAAAAYAAAAAAAAABVAAAAAAAAAFcAAAAAAAAAUwAAAAMAAABlAAAAAAAAAGYAAAADAAAAZAAAAAMAAABrAAAAAwAAAHAAAAADAAAAcgAAAAMAAABCAAAAAAAAAEMAAAADAAAARgAAAAMAAABRAAAAAAAAAFUAAAAAAAAAVwAAAAAAAABeAAAAAwAAAGUAAAAAAAAAZgAAAAMAAAAxAAAAAAAAADAAAAADAAAAMgAAAAMAAAA9AAAAAwAAAEIAAAAAAAAAQwAAAAMAAABLAAAAAwAAAFEAAAAAAAAAVQAAAAAAAABfAAAAAAAAAFwAAAAAAAAAUwAAAAAAAABPAAAAAAAAAE4AAAAAAAAASgAAAAMAAAA/AAAAAQAAADsAAAADAAAAOQAAAAMAAABtAAAAAAAAAGwAAAAAAAAAZAAAAAUAAABdAAAAAQAAAF8AAAAAAAAAXAAAAAAAAABNAAAAAQAAAE8AAAAAAAAATgAAAAAAAAB1AAAABAAAAHYAAAAFAAAAcgAAAAUAAABqAAAAAQAAAG0AAAAAAAAAbAAAAAAAAABaAAAAAQAAAF0AAAABAAAAXwAAAAAAAABaAAAAAAAAAE0AAAAAAAAAPwAAAAAAAABQAAAAAAAAAEQAAAAAAAAAOAAAAAMAAABIAAAAAQAAADwAAAADAAAALgAAAAMAAABqAAAAAAAAAF0AAAAAAAAATwAAAAUAAABjAAAAAQAAAFoAAAAAAAAATQAAAAAAAABYAAAAAQAAAFAAAAAAAAAARAAAAAAAAAB1AAAAAwAAAG0AAAAFAAAAXwAAAAUAAABxAAAAAQAAAGoAAAAAAAAAXQAAAAAAAABpAAAAAQAAAGMAAAABAAAAWgAAAAAAAABpAAAAAAAAAFgAAAAAAAAASAAAAAAAAABnAAAAAAAAAFsAAAAAAAAASQAAAAMAAABhAAAAAQAAAFkAAAADAAAARwAAAAMAAABxAAAAAAAAAGMAAAAAAAAAUAAAAAUAAAB0AAAAAQAAAGkAAAAAAAAAWAAAAAAAAABvAAAAAQAAAGcAAAAAAAAAWwAAAAAAAAB1AAAAAgAAAGoAAAAFAAAAWgAAAAUAAAB5AAAAAQAAAHEAAAAAAAAAYwAAAAAAAAB3AAAAAQAAAHQAAAABAAAAaQAAAAAAAAB3AAAAAAAAAG8AAAAAAAAAYQAAAAAAAABzAAAAAAAAAG4AAAAAAAAAYgAAAAMAAABrAAAAAQAAAGgAAAADAAAAYAAAAAMAAAB5AAAAAAAAAHQAAAAAAAAAZwAAAAUAAAB4AAAAAQAAAHcAAAAAAAAAbwAAAAAAAABwAAAAAQAAAHMAAAAAAAAAbgAAAAAAAAB1AAAAAQAAAHEAAAAFAAAAaQAAAAUAAAB2AAAAAQAAAHkAAAAAAAAAdAAAAAAAAAByAAAAAQAAAHgAAAABAAAAdwAAAAAAAAByAAAAAAAAAHAAAAAAAAAAawAAAAAAAABkAAAAAAAAAGYAAAAAAAAAZQAAAAMAAABTAAAAAQAAAFcAAAADAAAAVQAAAAMAAAB2AAAAAAAAAHgAAAAAAAAAcwAAAAUAAABsAAAAAQAAAHIAAAAAAAAAcAAAAAAAAABcAAAAAQAAAGQAAAAAAAAAZgAAAAAAAAB1AAAAAAAAAHkAAAAFAAAAdwAAAAUAAABtAAAAAQAAAHYAAAAAAAAAeAAAAAAAAABfAAAAAQAAAGwAAAABAAAAcgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAEAAAABAAAAAAAAAAAAAAABAAAAAAAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAB+ogX28rbpPxqumpJv+fM/165tC4ns9D+XaEnTqUsEQFrOtNlC4PA/3U+0XG6P9b9TdUUBxTTjP4PUp8ex1ty/B1rD/EN43z+lcDi6LLrZP/a45NWEHMY/oJ5ijLDZ+j/xw3rjxWPjP2B8A46ioQdAotff3wla2z+FMSpA1jj+v6b5Y1mtPbS/cIu8K0F457/2esiyJpDNv98k5Ts2NeA/pvljWa09tD88ClUJ60MDQPZ6yLImkM0/4ONKxa0UBcD2uOTVhBzGv5G7JRxGave/8cN648Vj47+HCwtkjAXIv6LX398JWtu/qyheaCAL9D9TdUUBxTTjv4gyTxslhwVAB1rD/EN4378EH/28teoFwH6iBfbytum/F6ztFYdK/r/Xrm0Liez0vwcS6wNGWeO/Ws602ULg8L9TCtRLiLT8P8pi5RexJsw/BlIKPVwR5T95Wyu0/QjnP5PjoT7YYcu/mBhKZ6zrwj8wRYS7NebuP3qW6geh+Ls/SLrixebL3r+pcyymN9XrPwmkNHp7xec/GWNMZVAA17+82s+x2BLiPwn2ytbJ9ek/LgEH1sMS1j8yp/2LhTfeP+SnWwtQBbu/d38gkp5X7z8ytsuHaADGPzUYObdf1+m/7IauECWhwz+cjSACjzniP76Z+wUhN9K/1+GEKzup67+/GYr/04baPw6idWOvsuc/ZedTWsRa5b/EJQOuRzi0v/OncYhHPes/h49PixY53j+i8wWfC03Nvw2idWOvsue/ZedTWsRa5T/EJQOuRzi0P/KncYhHPeu/iY9PixY53r+i8wWfC03NP9anWwtQBbs/d38gkp5X778ytsuHaADGvzUYObdf1+k/74auECWhw7+cjSACjzniv8CZ+wUhN9I/1uGEKzup6z+/GYr/04bavwmkNHp7xee/F2NMZVAA1z+82s+x2BLivwr2ytbJ9em/KwEH1sMS1r8yp/2LhTfev81i5RexJsy/BlIKPVwR5b95Wyu0/Qjnv5DjoT7YYcs/nBhKZ6zrwr8wRYS7Nebuv3OW6geh+Lu/SLrixebL3j+pcyymN9Xrv8rHIFfWehZAMBwUdlo0DECTUc17EOb2PxpVB1SWChdAzjbhb9pTDUDQhmdvECX5P9FlMKCC9+g/IIAzjELgE0DajDngMv8GQFhWDmDPjNs/y1guLh96EkAxPi8k7DIEQJCc4URlhRhA3eLKKLwkEECqpNAyTBD/P6xpjXcDiwVAFtl//cQm4z+Ibt3XKiYTQM7mCLUb3QdAoM1t8yVv7D8aLZv2Nk8UQEAJPV5nQwxAtSsfTCoE9z9TPjXLXIIWQBVanC5W9AtAYM3d7Adm9j++5mQz1FoWQBUThyaVBghAwH5muQsV7T89Q1qv82MUQJoWGOfNuBdAzrkClkmwDkDQjKq77t37Py+g0dtitsE/ZwAMTwVPEUBojepluNwBQGYbtuW+t9w/HNWIJs6MEkDTNuQUSlgEQKxktPP5TcQ/ixbLB8JjEUCwuWjXMQYCQAS/R09FkRdAowpiZjhhDkB7LmlczD/7P01iQmhhsAVAnrtTwDy84z/Z6jfQ2TgTQChOCXMnWwpAhrW3daoz8z/HYJvVPI4VQLT3ik5FcA5Angi7LOZd+z+NNVzDy5gXQBXdvVTFUA1AYNMgOeYe+T8+qHXGCwkXQKQTOKwa5AJA8gFVoEMW0T+FwzJyttIRQAEAAAD/////BwAAAP////8xAAAA/////1cBAAD/////YQkAAP////+nQQAA/////5HLAQD/////95AMAP/////B9lcAAAAAAAAAAAAAAAAAAgAAAP////8OAAAA/////2IAAAD/////rgIAAP/////CEgAA/////06DAAD/////IpcDAP/////uIRkA/////4LtrwAAAAAAAAAAAAAAAAAAAAAAAgAAAP//////////AQAAAAMAAAD//////////////////////////////////////////////////////////////////////////wEAAAAAAAAAAgAAAP///////////////wMAAAD//////////////////////////////////////////////////////////////////////////wEAAAAAAAAAAgAAAP///////////////wMAAAD//////////////////////////////////////////////////////////////////////////wEAAAAAAAAAAgAAAP///////////////wMAAAD//////////////////////////////////////////////////////////wIAAAD//////////wEAAAAAAAAA/////////////////////wMAAAD/////////////////////////////////////////////////////AwAAAP////////////////////8AAAAA/////////////////////wEAAAD///////////////8CAAAA////////////////////////////////AwAAAP////////////////////8AAAAA////////////////AgAAAAEAAAD/////////////////////////////////////////////////////AwAAAP////////////////////8AAAAA////////////////AgAAAAEAAAD/////////////////////////////////////////////////////AwAAAP////////////////////8AAAAA////////////////AgAAAAEAAAD/////////////////////////////////////////////////////AwAAAP////////////////////8AAAAA////////////////AgAAAAEAAAD/////////////////////////////////////////////////////AQAAAAIAAAD///////////////8AAAAA/////////////////////wMAAAD/////////////////////////////////////////////////////AQAAAAIAAAD///////////////8AAAAA/////////////////////wMAAAD/////////////////////////////////////////////////////AQAAAAIAAAD///////////////8AAAAA/////////////////////wMAAAD/////////////////////////////////////////////////////AQAAAAIAAAD///////////////8AAAAA/////////////////////wMAAAD///////////////////////////////8CAAAA////////////////AQAAAP////////////////////8AAAAA/////////////////////wMAAAD/////////////////////////////////////////////////////AwAAAP////////////////////8AAAAAAQAAAP//////////AgAAAP//////////////////////////////////////////////////////////AwAAAP///////////////wIAAAAAAAAAAQAAAP//////////////////////////////////////////////////////////////////////////AwAAAP///////////////wIAAAAAAAAAAQAAAP//////////////////////////////////////////////////////////////////////////AwAAAP///////////////wIAAAAAAAAAAQAAAP//////////////////////////////////////////////////////////////////////////AwAAAAEAAAD//////////wIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAgAAAAAAAAACAAAAAQAAAAEAAAACAAAAAgAAAAAAAAAFAAAABQAAAAAAAAACAAAAAgAAAAMAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAIAAAABAAAAAgAAAAIAAAACAAAAAAAAAAUAAAAGAAAAAAAAAAIAAAACAAAAAwAAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAIAAAAAAAAAAgAAAAEAAAADAAAAAgAAAAIAAAAAAAAABQAAAAcAAAAAAAAAAgAAAAIAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAgAAAAAAAAACAAAAAQAAAAQAAAACAAAAAgAAAAAAAAAFAAAACAAAAAAAAAACAAAAAgAAAAMAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAACAAAAAAAAAAIAAAABAAAAAAAAAAIAAAACAAAAAAAAAAUAAAAJAAAAAAAAAAIAAAACAAAAAwAAAAUAAAAAAAAAAAAAAAAAAAAAAAAACgAAAAIAAAACAAAAAAAAAAMAAAAOAAAAAgAAAAAAAAACAAAAAwAAAAAAAAAAAAAAAgAAAAIAAAADAAAABgAAAAAAAAAAAAAAAAAAAAAAAAALAAAAAgAAAAIAAAAAAAAAAwAAAAoAAAACAAAAAAAAAAIAAAADAAAAAQAAAAAAAAACAAAAAgAAAAMAAAAHAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAACAAAAAgAAAAAAAAADAAAACwAAAAIAAAAAAAAAAgAAAAMAAAACAAAAAAAAAAIAAAACAAAAAwAAAAgAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAIAAAACAAAAAAAAAAMAAAAMAAAAAgAAAAAAAAACAAAAAwAAAAMAAAAAAAAAAgAAAAIAAAADAAAACQAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAgAAAAIAAAAAAAAAAwAAAA0AAAACAAAAAAAAAAIAAAADAAAABAAAAAAAAAACAAAAAgAAAAMAAAAKAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAACAAAAAgAAAAAAAAADAAAABgAAAAIAAAAAAAAAAgAAAAMAAAAPAAAAAAAAAAIAAAACAAAAAwAAAAsAAAAAAAAAAAAAAAAAAAAAAAAABgAAAAIAAAACAAAAAAAAAAMAAAAHAAAAAgAAAAAAAAACAAAAAwAAABAAAAAAAAAAAgAAAAIAAAADAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAgAAAAIAAAAAAAAAAwAAAAgAAAACAAAAAAAAAAIAAAADAAAAEQAAAAAAAAACAAAAAgAAAAMAAAANAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAACAAAAAgAAAAAAAAADAAAACQAAAAIAAAAAAAAAAgAAAAMAAAASAAAAAAAAAAIAAAACAAAAAwAAAA4AAAAAAAAAAAAAAAAAAAAAAAAACQAAAAIAAAACAAAAAAAAAAMAAAAFAAAAAgAAAAAAAAACAAAAAwAAABMAAAAAAAAAAgAAAAIAAAADAAAADwAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAgAAAAAAAAACAAAAAQAAABMAAAACAAAAAgAAAAAAAAAFAAAACgAAAAAAAAACAAAAAgAAAAMAAAAQAAAAAAAAAAAAAAAAAAAAAAAAABEAAAACAAAAAAAAAAIAAAABAAAADwAAAAIAAAACAAAAAAAAAAUAAAALAAAAAAAAAAIAAAACAAAAAwAAABEAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAIAAAAAAAAAAgAAAAEAAAAQAAAAAgAAAAIAAAAAAAAABQAAAAwAAAAAAAAAAgAAAAIAAAADAAAAEgAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAgAAAAAAAAACAAAAAQAAABEAAAACAAAAAgAAAAAAAAAFAAAADQAAAAAAAAACAAAAAgAAAAMAAAATAAAAAAAAAAAAAAAAAAAAAAAAAA8AAAACAAAAAAAAAAIAAAABAAAAEgAAAAIAAAACAAAAAAAAAAUAAAAOAAAAAAAAAAIAAAACAAAAAwAAAAIAAAABAAAAAAAAAAEAAAACAAAAAAAAAAAAAAACAAAAAQAAAAAAAAABAAAAAgAAAAEAAAAAAAAAAgAAAAAAAAAFAAAABAAAAAAAAAABAAAABQAAAAAAAAAAAAAABQAAAAQAAAAAAAAAAQAAAAUAAAAEAAAAAAAAAAUAAAAAAAAAAgAAAAEAAAAAAAAAAQAAAAIAAAAAAAAAAAAAAAIAAAABAAAAAAAAAAEAAAACAAAAAQAAAAAAAAACAAAAAgAAAAAAAAABAAAAAAAAAAAAAAAFAAAABAAAAAAAAAABAAAABQAAAAAAAAAAAAAABQAAAAQAAAAAAAAAAQAAAAUAAAAEAAAAAAAAAAUAAAAFAAAAAAAAAAEAAAAAAAAAAAAAAMuhRbbsNlBBYqHW9OmHIkF9XBuqnS31QAK37uYhNMhAOSo3UUupm0DC+6pc6JxvQHV9eseEEEJAzURsCyqlFEB8BQ4NMJjnPyy3tBoS97o/xawXQznRjj89J2K2CZxhP6vX43RIIDQ/S8isgygEBz+LvFHQkmzaPjFFFO7wMq4+AADMLkTtjkIAAOgkJqxhQgAAU7B0MjRCAADwpBcVB0IAAACYP2HaQQAAAIn/Ja5BzczM4Eg6gUHNzMxMU7BTQTMzMzNfgCZBAAAAAEi3+UAAAAAAwGPNQDMzMzMzy6BAmpmZmZkxc0AzMzMzM/NFQDMzMzMzMxlAzczMzMzM7D+ygXSx2U6RQKimJOvQKnpA23hmONTHY0A/AGcxyudNQNb3K647mzZA+S56rrwWIUAm4kUQ+9UJQKre9hGzh/M/BLvoy9WG3T+LmqMf8VHGP2m3nYNV37A/gbFHcyeCmT+cBPWBckiDP61tZACjKW0/q2RbYVUYVj8uDypVyLNAP6jGS5cA5zBBwcqhBdCNGUEGEhQ/JVEDQT6WPnRbNO1AB/AWSJgT1kDfUWNCNLDAQNk+5C33OqlAchWL34QSk0DKvtDIrNV8QNF0G3kFzGVASSeWhBl6UED+/0mNGuk4QGjA/dm/1CJALPLPMql6DEDSHoDrwpP1P2jouzWST+A/egAAAAAAAABKAwAAAAAAAPoWAAAAAAAAyqAAAAAAAAB6ZQQAAAAAAErGHgAAAAAA+mvXAAAAAADK8+MFAAAAAHqqOykAAAAASqmhIAEAAAD6oGvkBwAAAMpm8T43AAAAes+ZuIIBAABKrDQMkwoAAPq1cFUFSgAAyvkUViUGAgAAAAAAAwAAAAYAAAACAAAABQAAAAEAAAAEAAAAAAAAAAAAAAAFAAAAAwAAAAEAAAAGAAAABAAAAAIAAAAAAAAAAAAAAP////8AAAAAAAAAAAAAAAAAAAAAAAAAAP////////////////////////////////////8AAAAA/////wAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAP////8AAAAAAAAAAAEAAAABAAAAAAAAAAAAAAD/////AAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAA/////wUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAP////8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/////////////////////////////////////AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/////////////////////////////////////wAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAUAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP////////////////////////////////////8AAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAABAAAAAAAAAAAAAAABAAAAAQAAAAEAAAAAAAAAAQAAAAAAAAAFAAAAAQAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAAAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEBAAAAAAABAAEAAAEBAAAAAAABAAAAAQAAAAEAAQAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAAAAAACAAAAAQAAAAMAAAAOAAAABgAAAAsAAAACAAAABwAAAAEAAAAYAAAABQAAAAoAAAABAAAABgAAAAAAAAAmAAAABwAAAAwAAAADAAAACAAAAAIAAAAxAAAACQAAAA4AAAAAAAAABQAAAAQAAAA6AAAACAAAAA0AAAAEAAAACQAAAAMAAAA/AAAACwAAAAYAAAAPAAAACgAAABAAAABIAAAADAAAAAcAAAAQAAAACwAAABEAAABTAAAACgAAAAUAAAATAAAADgAAAA8AAABhAAAADQAAAAgAAAARAAAADAAAABIAAABrAAAADgAAAAkAAAASAAAADQAAABMAAAB1AAAADwAAABMAAAARAAAAEgAAABAAAAAHAAAABwAAAAEAAAACAAAABAAAAAMAAAAAAAAAAAAAAAcAAAADAAAAAQAAAAIAAAAFAAAABAAAAAAAAAAAAAAAYWxnb3MuYwBfcG9seWZpbGxJbnRlcm5hbABhZGphY2VudEZhY2VEaXJbdG1wRmlqay5mYWNlXVtmaWprLmZhY2VdID09IEtJAGZhY2VpamsuYwBfZmFjZUlqa1BlbnRUb0dlb0JvdW5kYXJ5AGFkamFjZW50RmFjZURpcltjZW50ZXJJSksuZmFjZV1bZmFjZTJdID09IEtJAF9mYWNlSWprVG9HZW9Cb3VuZGFyeQBwb2x5Z29uLT5uZXh0ID09IE5VTEwAbGlua2VkR2VvLmMAYWRkTmV3TGlua2VkUG9seWdvbgBuZXh0ICE9IE5VTEwAbG9vcCAhPSBOVUxMAGFkZE5ld0xpbmtlZExvb3AAcG9seWdvbi0+Zmlyc3QgPT0gTlVMTABhZGRMaW5rZWRMb29wAGNvb3JkICE9IE5VTEwAYWRkTGlua2VkQ29vcmQAbG9vcC0+Zmlyc3QgPT0gTlVMTABpbm5lckxvb3BzICE9IE5VTEwAbm9ybWFsaXplTXVsdGlQb2x5Z29uAGJib3hlcyAhPSBOVUxMAGNhbmRpZGF0ZXMgIT0gTlVMTABmaW5kUG9seWdvbkZvckhvbGUAY2FuZGlkYXRlQkJveGVzICE9IE5VTEwAcmV2RGlyICE9IElOVkFMSURfRElHSVQAbG9jYWxpai5jAGgzVG9Mb2NhbElqawBiYXNlQ2VsbCAhPSBvcmlnaW5CYXNlQ2VsbAAhKG9yaWdpbk9uUGVudCAmJiBpbmRleE9uUGVudCkAcGVudGFnb25Sb3RhdGlvbnMgPj0gMABkaXJlY3Rpb25Sb3RhdGlvbnMgPj0gMABiYXNlQ2VsbCA9PSBvcmlnaW5CYXNlQ2VsbABiYXNlQ2VsbCAhPSBJTlZBTElEX0JBU0VfQ0VMTABsb2NhbElqa1RvSDMAIV9pc0Jhc2VDZWxsUGVudGFnb24oYmFzZUNlbGwpAGJhc2VDZWxsUm90YXRpb25zID49IDAAd2l0aGluUGVudGFnb25Sb3RhdGlvbnMgPj0gMABncmFwaC0+YnVja2V0cyAhPSBOVUxMAHZlcnRleEdyYXBoLmMAaW5pdFZlcnRleEdyYXBoAG5vZGUgIT0gTlVMTABhZGRWZXJ0ZXhOb2Rl";var So=24032;function cA(se){return se}function FA(se){var _e=/\b__Z[\w\d_]+/g;return se.replace(_e,function(We){var dt=We;return We===dt?We:dt+" ["+We+"]"})}function is(){var se=new Error;if(!se.stack){try{throw new Error(0)}catch(_e){se=_e}if(!se.stack)return"(no stack trace available)"}return se.stack.toString()}function rs(){var se=is();return n.extraStackTrace&&(se+=`
`+n.extraStackTrace()),FA(se)}function Es(se,_e,We,dt){yt("Assertion failed: "+xt(se)+", at: "+[_e?xt(_e):"unknown filename",We,dt?xt(dt):"unknown function"])}function Nt(){return bt.length}function bA(se,_e,We){kt.set(kt.subarray(_e,_e+We),se)}function Wi(se){return n.___errno_location&&(at[n.___errno_location()>>2]=se),se}function Ms(se){yt("OOM")}function hA(se){try{var _e=new ArrayBuffer(se);return _e.byteLength!=se?void 0:(new Int8Array(_e).set(bt),ze(_e),Ot(_e),1)}catch{}}function Ut(se){var _e=Nt(),We=16777216,dt=2147483648-We;if(se>dt)return!1;for(var t=16777216,K=Math.max(_e,t);K<se;)K<=536870912?K=Zt(2*K,We):K=Math.min(Zt((3*K+2147483648)/4,We),dt);var St=hA(K);return!!St}var Zn=typeof atob=="function"?atob:function(se){var _e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",We="",dt,t,K,St,Qt,en,Pt,Ht=0;se=se.replace(/[^A-Za-z0-9\+\/\=]/g,"");do St=_e.indexOf(se.charAt(Ht++)),Qt=_e.indexOf(se.charAt(Ht++)),en=_e.indexOf(se.charAt(Ht++)),Pt=_e.indexOf(se.charAt(Ht++)),dt=St<<2|Qt>>4,t=(Qt&15)<<4|en>>2,K=(en&3)<<6|Pt,We=We+String.fromCharCode(dt),en!==64&&(We=We+String.fromCharCode(t)),Pt!==64&&(We=We+String.fromCharCode(K));while(Ht<se.length);return We};function zn(se){try{for(var _e=Zn(se),We=new Uint8Array(_e.length),dt=0;dt<_e.length;++dt)We[dt]=_e.charCodeAt(dt);return We}catch{throw new Error("Converting base64 string to bytes failed.")}}function br(se){if(pi(se))return zn(se.slice(_r.length))}var OA={Math,Int8Array,Int32Array,Uint8Array,Float32Array,Float64Array},On={a:yt,b:j,c:W,d:Es,e:Wi,f:Nt,g:bA,h:Ut,i:Ms,j:cA,k:FA,l:hA,m:is,n:rs,o:So,p:_n},st=function(se,_e,We){"almost asm";var dt=new se.Int8Array(We),t=new se.Int32Array(We);new se.Uint8Array(We),new se.Float32Array(We);var K=new se.Float64Array(We),St=_e.p|0,Qt=se.Math.floor,en=se.Math.abs,Pt=se.Math.sqrt,Ht=se.Math.pow,Bn=se.Math.cos,$t=se.Math.sin,sn=se.Math.tan,oi=se.Math.acos,Dr=se.Math.asin,so=se.Math.atan,kr=se.Math.atan2,yr=se.Math.ceil,oA=se.Math.imul,ti=se.Math.min,kA=se.Math.clz32,Ln=_e.b,He=_e.c,Xt=_e.d,Te=_e.e,kn=_e.f,Er=_e.g,ca=_e.h,oo=_e.i,Be=24048;function mi(p){return dt=new Int8Array(p),t=new Int32Array(p),K=new Float64Array(p),We=p,!0}function ye(p){p=p|0;var y=0;return y=Be,Be=Be+p|0,Be=Be+15&-16,y|0}function Zi(){return Be|0}function ha(p){p=p|0,Be=p}function EA(p,y){p=p|0,Be=p}function za(p){return p=p|0,(oA(p*3|0,p+1|0)|0)+1|0}function As(p,y,v,x){p=p|0,y=y|0,v=v|0,x=x|0;var R=0,V=0;Co(p,y,v,x,0)|0&&(V=(oA(v*3|0,v+1|0)|0)+1|0,Mi(x|0,0,V<<3|0)|0,R=IA(V,4)|0,R&&(Yr(p,y,v,x,R,V,0),Tn(R)))}function La(p,y,v,x,R){p=p|0,y=y|0,v=v|0,x=x|0,R=R|0;var V=0;if(Co(p,y,v,x,R)|0){if(V=(oA(v*3|0,v+1|0)|0)+1|0,Mi(x|0,0,V<<3|0)|0,R|0){Mi(R|0,0,V<<2|0)|0,Yr(p,y,v,x,R,V,0);return}R=IA(V,4)|0,R&&(Yr(p,y,v,x,R,V,0),Tn(R))}}function Co(p,y,v,x,R){p=p|0,y=y|0,v=v|0,x=x|0,R=R|0;var V=0,N=0,H=0,te=0,le=0,pe=0,Ge=0,Ee=0,Se=0;if(Se=Be,Be=Be+16|0,Ee=Se,V=x,t[V>>2]=p,t[V+4>>2]=y,V=(R|0)!=0,V&&(t[R>>2]=0),Mr(p,y)|0)return Ee=1,Be=Se,Ee|0;t[Ee>>2]=0;e:do if((v|0)>=1)if(V)for(le=0,pe=1,Ge=1,N=0,V=p;;){if(!(N|le)){if(V=Hi(V,y,4,Ee)|0,y=He()|0,(V|0)==0&(y|0)==0){V=2;break e}if(Mr(V,y)|0){V=1;break e}}if(V=Hi(V,y,t[16+(le<<2)>>2]|0,Ee)|0,y=He()|0,(V|0)==0&(y|0)==0){V=2;break e}if(p=x+(Ge<<3)|0,t[p>>2]=V,t[p+4>>2]=y,t[R+(Ge<<2)>>2]=pe,N=N+1|0,p=(N|0)==(pe|0),H=le+1|0,te=(H|0)==6,Mr(V,y)|0){V=1;break e}if(pe=pe+(te&p&1)|0,(pe|0)>(v|0)){V=0;break}else le=p?te?0:H:le,Ge=Ge+1|0,N=p?0:N}else for(le=0,pe=1,Ge=1,N=0,V=p;;){if(!(N|le)){if(V=Hi(V,y,4,Ee)|0,y=He()|0,(V|0)==0&(y|0)==0){V=2;break e}if(Mr(V,y)|0){V=1;break e}}if(V=Hi(V,y,t[16+(le<<2)>>2]|0,Ee)|0,y=He()|0,(V|0)==0&(y|0)==0){V=2;break e}if(p=x+(Ge<<3)|0,t[p>>2]=V,t[p+4>>2]=y,N=N+1|0,p=(N|0)==(pe|0),H=le+1|0,te=(H|0)==6,Mr(V,y)|0){V=1;break e}if(pe=pe+(te&p&1)|0,(pe|0)>(v|0)){V=0;break}else le=p?te?0:H:le,Ge=Ge+1|0,N=p?0:N}else V=0;while(!1);return Ee=V,Be=Se,Ee|0}function Yr(p,y,v,x,R,V,N){p=p|0,y=y|0,v=v|0,x=x|0,R=R|0,V=V|0,N=N|0;var H=0,te=0,le=0,pe=0,Ge=0,Ee=0,Se=0;if(Ge=Be,Be=Be+16|0,pe=Ge,(p|0)==0&(y|0)==0){Be=Ge;return}if(H=Hr(p|0,y|0,V|0,((V|0)<0)<<31>>31|0)|0,He()|0,te=x+(H<<3)|0,Ee=te,Se=t[Ee>>2]|0,Ee=t[Ee+4>>2]|0,le=(Se|0)==(p|0)&(Ee|0)==(y|0),!((Se|0)==0&(Ee|0)==0|le))do H=(H+1|0)%(V|0)|0,te=x+(H<<3)|0,Se=te,Ee=t[Se>>2]|0,Se=t[Se+4>>2]|0,le=(Ee|0)==(p|0)&(Se|0)==(y|0);while(!((Ee|0)==0&(Se|0)==0|le));if(H=R+(H<<2)|0,le&&(t[H>>2]|0)<=(N|0)){Be=Ge;return}if(Se=te,t[Se>>2]=p,t[Se+4>>2]=y,t[H>>2]=N,(N|0)>=(v|0)){Be=Ge;return}Se=N+1|0,t[pe>>2]=0,Ee=Hi(p,y,2,pe)|0,Yr(Ee,He()|0,v,x,R,V,Se),t[pe>>2]=0,Ee=Hi(p,y,3,pe)|0,Yr(Ee,He()|0,v,x,R,V,Se),t[pe>>2]=0,Ee=Hi(p,y,1,pe)|0,Yr(Ee,He()|0,v,x,R,V,Se),t[pe>>2]=0,Ee=Hi(p,y,5,pe)|0,Yr(Ee,He()|0,v,x,R,V,Se),t[pe>>2]=0,Ee=Hi(p,y,4,pe)|0,Yr(Ee,He()|0,v,x,R,V,Se),t[pe>>2]=0,Ee=Hi(p,y,6,pe)|0,Yr(Ee,He()|0,v,x,R,V,Se),Be=Ge}function Hi(p,y,v,x){p=p|0,y=y|0,v=v|0,x=x|0;var R=0,V=0,N=0,H=0,te=0,le=0,pe=0,Ge=0,Ee=0,Se=0;if((t[x>>2]|0)>0){R=0;do v=zr(v)|0,R=R+1|0;while((R|0)<(t[x>>2]|0))}H=ct(p|0,y|0,45)|0,He()|0,te=H&127,V=Rr(p,y)|0,R=ct(p|0,y|0,52)|0,He()|0,R=R&15;e:do if(!R)N=6;else for(;;){if(Ge=(15-R|0)*3|0,Ee=ct(p|0,y|0,Ge|0)|0,He()|0,Ee=Ee&7,Se=(Di(R)|0)==0,R=R+-1|0,pe=wt(7,0,Ge|0)|0,y=y&~(He()|0),Ge=wt(t[(Se?464:48)+(Ee*28|0)+(v<<2)>>2]|0,0,Ge|0)|0,le=He()|0,v=t[(Se?672:256)+(Ee*28|0)+(v<<2)>>2]|0,p=Ge|p&~pe,y=le|y,!v){v=0;break e}if(!R){N=6;break}}while(!1);(N|0)==6&&(Se=t[880+(te*28|0)+(v<<2)>>2]|0,Ee=wt(Se|0,0,45)|0,p=Ee|p,y=He()|0|y&-1040385,v=t[4304+(te*28|0)+(v<<2)>>2]|0,(Se&127|0)==127&&(Se=wt(t[880+(te*28|0)+20>>2]|0,0,45)|0,y=He()|0|y&-1040385,v=t[4304+(te*28|0)+20>>2]|0,p=mA(Se|p,y)|0,y=He()|0,t[x>>2]=(t[x>>2]|0)+1)),N=ct(p|0,y|0,45)|0,He()|0,N=N&127;e:do if($i(N)|0){t:do if((Rr(p,y)|0)==1){if((te|0)!=(N|0))if(sl(N,t[7728+(te*28|0)>>2]|0)|0){p=_i(p,y)|0,V=1,y=He()|0;break}else{p=mA(p,y)|0,V=1,y=He()|0;break}switch(V|0){case 5:{p=_i(p,y)|0,y=He()|0,t[x>>2]=(t[x>>2]|0)+5,V=0;break t}case 3:{p=mA(p,y)|0,y=He()|0,t[x>>2]=(t[x>>2]|0)+1,V=0;break t}default:return Ee=0,Se=0,Ln(Ee|0),Se|0}}else V=0;while(!1);if((v|0)>0){R=0;do p=Tr(p,y)|0,y=He()|0,R=R+1|0;while((R|0)!=(v|0))}if((te|0)!=(N|0)){if(!(Fa(N)|0)){if((V|0)!=0|(Rr(p,y)|0)!=5)break;t[x>>2]=(t[x>>2]|0)+1;break}switch(H&127){case 8:case 118:break e}(Rr(p,y)|0)!=3&&(t[x>>2]=(t[x>>2]|0)+1)}}else if((v|0)>0){R=0;do p=mA(p,y)|0,y=He()|0,R=R+1|0;while((R|0)!=(v|0))}while(!1);return t[x>>2]=((t[x>>2]|0)+v|0)%6|0,Ee=y,Se=p,Ln(Ee|0),Se|0}function Pr(p,y,v,x){p=p|0,y=y|0,v=v|0,x=x|0;var R=0,V=0,N=0,H=0,te=0,le=0,pe=0,Ge=0;if(Ge=Be,Be=Be+16|0,pe=Ge,!v)return pe=x,t[pe>>2]=p,t[pe+4>>2]=y,pe=0,Be=Ge,pe|0;t[pe>>2]=0;e:do if(Mr(p,y)|0)p=1;else{if(V=(v|0)>0,V){R=0,le=p;do{if(le=Hi(le,y,4,pe)|0,y=He()|0,(le|0)==0&(y|0)==0){p=2;break e}if(R=R+1|0,Mr(le,y)|0){p=1;break e}}while((R|0)<(v|0));if(te=x,t[te>>2]=le,t[te+4>>2]=y,te=v+-1|0,V){V=0,N=1,R=le,p=y;do{if(R=Hi(R,p,2,pe)|0,p=He()|0,(R|0)==0&(p|0)==0){p=2;break e}if(H=x+(N<<3)|0,t[H>>2]=R,t[H+4>>2]=p,N=N+1|0,Mr(R,p)|0){p=1;break e}V=V+1|0}while((V|0)<(v|0));H=0,V=N;do{if(R=Hi(R,p,3,pe)|0,p=He()|0,(R|0)==0&(p|0)==0){p=2;break e}if(N=x+(V<<3)|0,t[N>>2]=R,t[N+4>>2]=p,V=V+1|0,Mr(R,p)|0){p=1;break e}H=H+1|0}while((H|0)<(v|0));N=0;do{if(R=Hi(R,p,1,pe)|0,p=He()|0,(R|0)==0&(p|0)==0){p=2;break e}if(H=x+(V<<3)|0,t[H>>2]=R,t[H+4>>2]=p,V=V+1|0,Mr(R,p)|0){p=1;break e}N=N+1|0}while((N|0)<(v|0));N=0;do{if(R=Hi(R,p,5,pe)|0,p=He()|0,(R|0)==0&(p|0)==0){p=2;break e}if(H=x+(V<<3)|0,t[H>>2]=R,t[H+4>>2]=p,V=V+1|0,Mr(R,p)|0){p=1;break e}N=N+1|0}while((N|0)<(v|0));N=0;do{if(R=Hi(R,p,4,pe)|0,p=He()|0,(R|0)==0&(p|0)==0){p=2;break e}if(H=x+(V<<3)|0,t[H>>2]=R,t[H+4>>2]=p,V=V+1|0,Mr(R,p)|0){p=1;break e}N=N+1|0}while((N|0)<(v|0));for(N=0;;){if(R=Hi(R,p,6,pe)|0,p=He()|0,(R|0)==0&(p|0)==0){p=2;break e}if((N|0)!=(te|0))if(H=x+(V<<3)|0,t[H>>2]=R,t[H+4>>2]=p,!(Mr(R,p)|0))V=V+1|0;else{p=1;break e}if(N=N+1|0,(N|0)>=(v|0)){N=le,V=y;break}}}else N=le,R=le,V=y,p=y}else N=x,t[N>>2]=p,t[N+4>>2]=y,N=p,R=p,V=y,p=y;p=((N|0)!=(R|0)|(V|0)!=(p|0))&1}while(!1);return pe=p,Be=Ge,pe|0}function Yi(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0,N=0,H=0;if(V=Be,Be=Be+48|0,R=V+8|0,x=V,H=p,N=t[H+4>>2]|0,v=x,t[v>>2]=t[H>>2],t[v+4>>2]=N,on(x,R),R=ao(R,y)|0,y=t[x>>2]|0,x=t[p+8>>2]|0,(x|0)<=0)return H=y,N=(R|0)<(H|0),H=N?H:R,H=H+12|0,Be=V,H|0;v=t[p+12>>2]|0,p=0;do y=(t[v+(p<<3)>>2]|0)+y|0,p=p+1|0;while((p|0)<(x|0));return H=(R|0)<(y|0),H=H?y:R,H=H+12|0,Be=V,H|0}function Qs(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,V=0,N=0,H=0,te=0;if(H=Be,Be=Be+48|0,x=H+8|0,R=H,!(rl(p,y,v)|0)){Be=H;return}if(te=p,V=t[te+4>>2]|0,N=R,t[N>>2]=t[te>>2],t[N+4>>2]=V,on(R,x),N=ao(x,y)|0,y=t[R>>2]|0,V=t[p+8>>2]|0,(V|0)>0){R=t[p+12>>2]|0,x=0;do y=(t[R+(x<<3)>>2]|0)+y|0,x=x+1|0;while((x|0)!=(V|0))}if(y=(N|0)<(y|0)?y:N,(y|0)<=-12){Be=H;return}te=y+11|0,Mi(v|0,0,(((te|0)>0?te:0)<<3)+8|0)|0,Be=H}function rl(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,V=0,N=0,H=0,te=0,le=0,pe=0,Ge=0,Ee=0,Se=0,C=0,i=0,h=0,b=0,E=0,B=0,F=0,A=0,s=0,l=0,f=0,m=0,k=0,I=0,D=0,Q=0,Z=0,X=0,ie=0;if(ie=Be,Be=Be+112|0,D=ie+80|0,te=ie+72|0,Q=ie,Z=ie+56|0,le=p+8|0,X=Vr((t[le>>2]<<5)+32|0)|0,X||Xt(22848,22448,800,22456),SA(p,X),V=p,x=t[V+4>>2]|0,H=te,t[H>>2]=t[V>>2],t[H+4>>2]=x,on(te,D),H=ao(D,y)|0,x=t[te>>2]|0,V=t[le>>2]|0,(V|0)>0){N=t[p+12>>2]|0,R=0;do x=(t[N+(R<<3)>>2]|0)+x|0,R=R+1|0;while((R|0)!=(V|0))}if(H=(H|0)<(x|0)?x:H,I=H+12|0,R=IA(I,8)|0,pe=IA(I,8)|0,t[D>>2]=0,m=p,k=t[m+4>>2]|0,x=te,t[x>>2]=t[m>>2],t[x+4>>2]=k,x=Ol(te,I,y,D,R,pe)|0,x|0)return Tn(R),Tn(pe),Tn(X),X=x,Be=ie,X|0;e:do if((t[le>>2]|0)>0){for(V=p+12|0,x=0;N=Ol((t[V>>2]|0)+(x<<3)|0,I,y,D,R,pe)|0,x=x+1|0,!(N|0);)if((x|0)>=(t[le>>2]|0))break e;return Tn(R),Tn(pe),Tn(X),X=N,Be=ie,X|0}while(!1);(H|0)>-12&&Mi(pe|0,0,((I|0)>1?I:1)<<3|0)|0;e:do if((t[D>>2]|0)>0){k=((I|0)<0)<<31>>31,F=R,A=pe,s=R,l=R,f=pe,m=R,x=R,h=R,b=pe,E=pe,B=pe,R=pe;t:for(;;){for(i=t[D>>2]|0,Se=0,C=0,V=0;;){N=Q,H=N+56|0;do t[N>>2]=0,N=N+4|0;while((N|0)<(H|0));if(y=F+(Se<<3)|0,te=t[y>>2]|0,y=t[y+4>>2]|0,Co(te,y,1,Q,0)|0){N=Q,H=N+56|0;do t[N>>2]=0,N=N+4|0;while((N|0)<(H|0));N=IA(7,4)|0,N|0&&(Yr(te,y,1,Q,N,7,0),Tn(N))}Ee=0;do{Ge=Q+(Ee<<3)|0,pe=t[Ge>>2]|0,Ge=t[Ge+4>>2]|0;n:do if(!((pe|0)==0&(Ge|0)==0)){if(te=Hr(pe|0,Ge|0,I|0,k|0)|0,He()|0,N=v+(te<<3)|0,H=N,y=t[H>>2]|0,H=t[H+4>>2]|0,!((y|0)==0&(H|0)==0))for(le=0;;){if((le|0)>(I|0))break t;if((y|0)==(pe|0)&(H|0)==(Ge|0))break n;if(te=(te+1|0)%(I|0)|0,N=v+(te<<3)|0,H=N,y=t[H>>2]|0,H=t[H+4>>2]|0,(y|0)==0&(H|0)==0)break;le=le+1|0}(pe|0)==0&(Ge|0)==0||(Zr(pe,Ge,Z),CA(p,X,Z)|0&&(le=N,t[le>>2]=pe,t[le+4>>2]=Ge,le=A+(V<<3)|0,t[le>>2]=pe,t[le+4>>2]=Ge,V=V+1|0))}while(!1);Ee=Ee+1|0}while(Ee>>>0<7);if(C=C+1|0,(C|0)>=(i|0))break;Se=Se+1|0}if((i|0)>0&&Mi(s|0,0,i<<3|0)|0,t[D>>2]=V,(V|0)>0)pe=R,Ge=B,Ee=m,Se=E,C=b,i=A,R=h,B=x,E=l,b=s,h=pe,x=Ge,m=f,f=Ee,l=Se,s=C,A=F,F=i;else break e}return Tn(l),Tn(f),Tn(X),X=-1,Be=ie,X|0}else x=pe;while(!1);return Tn(X),Tn(R),Tn(x),X=0,Be=ie,X|0}function Ol(p,y,v,x,R,V){p=p|0,y=y|0,v=v|0,x=x|0,R=R|0,V=V|0;var N=0,H=0,te=0,le=0,pe=0,Ge=0,Ee=0,Se=0,C=0,i=0,h=0,b=0,E=0,B=0,F=0,A=0,s=0,l=0,f=0,m=0,k=0,I=0,D=0;if(k=Be,Be=Be+48|0,s=k+32|0,l=k+16|0,f=k,N=t[p>>2]|0,(N|0)<=0)return m=0,Be=k,m|0;b=p+4|0,E=s+8|0,B=l+8|0,F=f+8|0,A=((y|0)<0)<<31>>31,h=0;e:for(;;){H=t[b>>2]|0,C=H+(h<<4)|0,t[s>>2]=t[C>>2],t[s+4>>2]=t[C+4>>2],t[s+8>>2]=t[C+8>>2],t[s+12>>2]=t[C+12>>2],(h|0)==(N+-1|0)?(t[l>>2]=t[H>>2],t[l+4>>2]=t[H+4>>2],t[l+8>>2]=t[H+8>>2],t[l+12>>2]=t[H+12>>2]):(C=H+(h+1<<4)|0,t[l>>2]=t[C>>2],t[l+4>>2]=t[C+4>>2],t[l+8>>2]=t[C+8>>2],t[l+12>>2]=t[C+12>>2]),C=Bo(s,l,v)|0;t:do if((C|0)>0){i=+(C|0),Se=0;n:for(;;){D=+(C-Se|0),I=+(Se|0),K[f>>3]=+K[s>>3]*D/i+ +K[l>>3]*I/i,K[F>>3]=+K[E>>3]*D/i+ +K[B>>3]*I/i,Ge=co(f,v)|0,Ee=He()|0,H=Hr(Ge|0,Ee|0,y|0,A|0)|0,He()|0,N=V+(H<<3)|0,te=N,le=t[te>>2]|0,te=t[te+4>>2]|0;i:do if((le|0)==0&(te|0)==0)m=14;else for(pe=0;;){if((pe|0)>(y|0)){N=1;break i}if((le|0)==(Ge|0)&(te|0)==(Ee|0)){N=7;break i}if(H=(H+1|0)%(y|0)|0,N=V+(H<<3)|0,te=N,le=t[te>>2]|0,te=t[te+4>>2]|0,(le|0)==0&(te|0)==0){m=14;break}else pe=pe+1|0}while(!1);switch((m|0)==14&&(m=0,(Ge|0)==0&(Ee|0)==0?N=7:(t[N>>2]=Ge,t[N+4>>2]=Ee,N=t[x>>2]|0,pe=R+(N<<3)|0,t[pe>>2]=Ge,t[pe+4>>2]=Ee,t[x>>2]=N+1,N=0)),N&7){case 7:case 0:break;default:break n}if(Se=Se+1|0,(C|0)<=(Se|0)){m=8;break t}}if(N|0){N=-1,m=20;break e}}else m=8;while(!1);if((m|0)==8&&(m=0),h=h+1|0,N=t[p>>2]|0,(h|0)>=(N|0)){N=0,m=20;break}}return(m|0)==20?(Be=k,N|0):0}function fa(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,V=0,N=0,H=0,te=0,le=0;if(le=Be,Be=Be+176|0,te=le,(y|0)<1){po(v,0,0),Be=le;return}N=p,N=ct(t[N>>2]|0,t[N+4>>2]|0,52)|0,He()|0,po(v,(y|0)>6?y:6,N&15),N=0;do{if(x=p+(N<<3)|0,ZA(t[x>>2]|0,t[x+4>>2]|0,te),x=t[te>>2]|0,(x|0)>0){H=0;do V=te+8+(H<<4)|0,H=H+1|0,x=te+8+(((H|0)%(x|0)|0)<<4)|0,R=Qo(v,x,V)|0,R?Uo(v,R)|0:ja(v,V,x)|0,x=t[te>>2]|0;while((H|0)<(x|0))}N=N+1|0}while((N|0)!=(y|0));Be=le}function Ra(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,V=0,N=0;if(V=Be,Be=Be+32|0,x=V,R=V+16|0,fa(p,y,R),t[v>>2]=0,t[v+4>>2]=0,t[v+8>>2]=0,p=$A(R)|0,!p){er(v)|0,Or(R),Be=V;return}do{y=Oi(v)|0;do HA(y,p)|0,N=p+16|0,t[x>>2]=t[N>>2],t[x+4>>2]=t[N+4>>2],t[x+8>>2]=t[N+8>>2],t[x+12>>2]=t[N+12>>2],Uo(R,p)|0,p=Wa(R,x)|0;while(p|0);p=$A(R)|0}while(p|0);er(v)|0,Or(R),Be=V}function $i(p){return p=p|0,t[7728+(p*28|0)+16>>2]|0}function Fa(p){return p=p|0,(p|0)==4|(p|0)==117|0}function Ri(p){return p=p|0,t[11152+((t[p>>2]|0)*216|0)+((t[p+4>>2]|0)*72|0)+((t[p+8>>2]|0)*24|0)+(t[p+12>>2]<<3)>>2]|0}function Oa(p){return p=p|0,t[11152+((t[p>>2]|0)*216|0)+((t[p+4>>2]|0)*72|0)+((t[p+8>>2]|0)*24|0)+(t[p+12>>2]<<3)+4>>2]|0}function da(p,y){p=p|0,y=y|0,p=7728+(p*28|0)|0,t[y>>2]=t[p>>2],t[y+4>>2]=t[p+4>>2],t[y+8>>2]=t[p+8>>2],t[y+12>>2]=t[p+12>>2]}function Al(p,y){p=p|0,y=y|0;var v=0,x=0;if(y>>>0>20)return y=-1,y|0;do if((t[11152+(y*216|0)>>2]|0)!=(p|0))if((t[11152+(y*216|0)+8>>2]|0)!=(p|0))if((t[11152+(y*216|0)+16>>2]|0)!=(p|0))if((t[11152+(y*216|0)+24>>2]|0)!=(p|0))if((t[11152+(y*216|0)+32>>2]|0)!=(p|0))if((t[11152+(y*216|0)+40>>2]|0)!=(p|0))if((t[11152+(y*216|0)+48>>2]|0)!=(p|0))if((t[11152+(y*216|0)+56>>2]|0)!=(p|0))if((t[11152+(y*216|0)+64>>2]|0)!=(p|0))if((t[11152+(y*216|0)+72>>2]|0)!=(p|0))if((t[11152+(y*216|0)+80>>2]|0)!=(p|0))if((t[11152+(y*216|0)+88>>2]|0)!=(p|0))if((t[11152+(y*216|0)+96>>2]|0)!=(p|0))if((t[11152+(y*216|0)+104>>2]|0)!=(p|0))if((t[11152+(y*216|0)+112>>2]|0)!=(p|0))if((t[11152+(y*216|0)+120>>2]|0)!=(p|0))if((t[11152+(y*216|0)+128>>2]|0)!=(p|0))if((t[11152+(y*216|0)+136>>2]|0)==(p|0))p=2,v=1,x=2;else{if((t[11152+(y*216|0)+144>>2]|0)==(p|0)){p=0,v=2,x=0;break}if((t[11152+(y*216|0)+152>>2]|0)==(p|0)){p=0,v=2,x=1;break}if((t[11152+(y*216|0)+160>>2]|0)==(p|0)){p=0,v=2,x=2;break}if((t[11152+(y*216|0)+168>>2]|0)==(p|0)){p=1,v=2,x=0;break}if((t[11152+(y*216|0)+176>>2]|0)==(p|0)){p=1,v=2,x=1;break}if((t[11152+(y*216|0)+184>>2]|0)==(p|0)){p=1,v=2,x=2;break}if((t[11152+(y*216|0)+192>>2]|0)==(p|0)){p=2,v=2,x=0;break}if((t[11152+(y*216|0)+200>>2]|0)==(p|0)){p=2,v=2,x=1;break}if((t[11152+(y*216|0)+208>>2]|0)==(p|0)){p=2,v=2,x=2;break}else p=-1;return p|0}else p=2,v=1,x=1;else p=2,v=1,x=0;else p=1,v=1,x=2;else p=1,v=1,x=1;else p=1,v=1,x=0;else p=0,v=1,x=2;else p=0,v=1,x=1;else p=0,v=1,x=0;else p=2,v=0,x=2;else p=2,v=0,x=1;else p=2,v=0,x=0;else p=1,v=0,x=2;else p=1,v=0,x=1;else p=1,v=0,x=0;else p=0,v=0,x=2;else p=0,v=0,x=1;else p=0,v=0,x=0;while(!1);return y=t[11152+(y*216|0)+(v*72|0)+(p*24|0)+(x<<3)+4>>2]|0,y|0}function sl(p,y){return p=p|0,y=y|0,(t[7728+(p*28|0)+20>>2]|0)==(y|0)?(y=1,y|0):(y=(t[7728+(p*28|0)+24>>2]|0)==(y|0),y|0)}function pa(p,y){return p=p|0,y=y|0,t[880+(p*28|0)+(y<<2)>>2]|0}function Io(p,y){return p=p|0,y=y|0,(t[880+(p*28|0)>>2]|0)==(y|0)?(y=0,y|0):(t[880+(p*28|0)+4>>2]|0)==(y|0)?(y=1,y|0):(t[880+(p*28|0)+8>>2]|0)==(y|0)?(y=2,y|0):(t[880+(p*28|0)+12>>2]|0)==(y|0)?(y=3,y|0):(t[880+(p*28|0)+16>>2]|0)==(y|0)?(y=4,y|0):(t[880+(p*28|0)+20>>2]|0)==(y|0)?(y=5,y|0):((t[880+(p*28|0)+24>>2]|0)==(y|0)?6:7)|0}function Ts(){return 122}function Gs(p){p=p|0;var y=0,v=0,x=0;y=0;do wt(y|0,0,45)|0,x=He()|0|134225919,v=p+(y<<3)|0,t[v>>2]=-1,t[v+4>>2]=x,y=y+1|0;while((y|0)!=122)}function fA(p){return p=p|0,+K[p+16>>3]<+K[p+24>>3]|0}function ma(p,y){p=p|0,y=y|0;var v=0,x=0,R=0;return v=+K[y>>3],!(v>=+K[p+8>>3])||!(v<=+K[p>>3])?(y=0,y|0):(x=+K[p+16>>3],v=+K[p+24>>3],R=+K[y+8>>3],y=R>=v,p=R<=x&1,x<v?y&&(p=1):y||(p=0),y=(p|0)!=0,y|0)}function ao(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0,N=0,H=0,te=0,le=0;N=Be,Be=Be+288|0,v=N+264|0,x=N+96|0,R=N,V=R,H=V+96|0;do t[V>>2]=0,V=V+4|0;while((V|0)<(H|0));return Ys(y,R),V=R,H=t[V>>2]|0,V=t[V+4>>2]|0,Zr(H,V,v),ZA(H,V,x),te=+Ro(v,x+8|0),K[v>>3]=+K[p>>3],V=v+8|0,K[V>>3]=+K[p+16>>3],K[x>>3]=+K[p+8>>3],H=x+8|0,K[H>>3]=+K[p+24>>3],le=+Ro(v,x),H=~~+yr(+(le*le/+jA(+ +en(+((+K[V>>3]-+K[H>>3])/(+K[v>>3]-+K[x>>3]))),3)/(te*(te*2.59807621135)*.8))),Be=N,(H|0?H:1)|0}function Bo(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,V=0,N=0,H=0,te=0,le=0;H=Be,Be=Be+288|0,x=H+264|0,R=H+96|0,V=H,N=V,te=N+96|0;do t[N>>2]=0,N=N+4|0;while((N|0)<(te|0));return Ys(v,V),te=V,N=t[te>>2]|0,te=t[te+4>>2]|0,Zr(N,te,x),ZA(N,te,R),le=+Ro(x,R+8|0),te=~~+yr(+(+Ro(p,y)/(le*2))),Be=H,(te|0?te:1)|0}function ga(p,y,v,x){p=p|0,y=y|0,v=v|0,x=x|0,t[p>>2]=y,t[p+4>>2]=v,t[p+8>>2]=x}function Ti(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0,N=0,H=0,te=0,le=0,pe=0,Ge=0,Ee=0;Ge=y+8|0,t[Ge>>2]=0,te=+K[p>>3],N=+en(+te),le=+K[p+8>>3],H=+en(+le)/.8660254037844386,N=N+H*.5,v=~~N,p=~~H,N=N-+(v|0),H=H-+(p|0);do if(N<.5)if(N<.3333333333333333)if(t[y>>2]=v,H<(N+1)*.5){t[y+4>>2]=p;break}else{p=p+1|0,t[y+4>>2]=p;break}else if(Ee=1-N,p=(!(H<Ee)&1)+p|0,t[y+4>>2]=p,Ee<=H&H<N*2){v=v+1|0,t[y>>2]=v;break}else{t[y>>2]=v;break}else{if(!(N<.6666666666666666))if(v=v+1|0,t[y>>2]=v,H<N*.5){t[y+4>>2]=p;break}else{p=p+1|0,t[y+4>>2]=p;break}if(H<1-N){if(t[y+4>>2]=p,N*2+-1<H){t[y>>2]=v;break}}else p=p+1|0,t[y+4>>2]=p;v=v+1|0,t[y>>2]=v}while(!1);do if(te<0)if(p&1){pe=(p+1|0)/2|0,pe=fs(v|0,((v|0)<0)<<31>>31|0,pe|0,((pe|0)<0)<<31>>31|0)|0,v=~~(+(v|0)-((+(pe>>>0)+4294967296*+(He()|0))*2+1)),t[y>>2]=v;break}else{pe=(p|0)/2|0,pe=fs(v|0,((v|0)<0)<<31>>31|0,pe|0,((pe|0)<0)<<31>>31|0)|0,v=~~(+(v|0)-(+(pe>>>0)+4294967296*+(He()|0))*2),t[y>>2]=v;break}while(!1);pe=y+4|0,le<0&&(v=v-((p<<1|1|0)/2|0)|0,t[y>>2]=v,p=0-p|0,t[pe>>2]=p),x=p-v|0,(v|0)<0?(R=0-v|0,t[pe>>2]=x,t[Ge>>2]=R,t[y>>2]=0,p=x,v=0):R=0,(p|0)<0&&(v=v-p|0,t[y>>2]=v,R=R-p|0,t[Ge>>2]=R,t[pe>>2]=0,p=0),V=v-R|0,x=p-R|0,(R|0)<0&&(t[y>>2]=V,t[pe>>2]=x,t[Ge>>2]=0,p=x,v=V,R=0),x=(p|0)<(v|0)?p:v,x=(R|0)<(x|0)?R:x,!((x|0)<=0)&&(t[y>>2]=v-x,t[pe>>2]=p-x,t[Ge>>2]=R-x)}function Rn(p){p=p|0;var y=0,v=0,x=0,R=0,V=0,N=0;y=t[p>>2]|0,N=p+4|0,v=t[N>>2]|0,(y|0)<0&&(v=v-y|0,t[N>>2]=v,V=p+8|0,t[V>>2]=(t[V>>2]|0)-y,t[p>>2]=0,y=0),(v|0)<0?(y=y-v|0,t[p>>2]=y,V=p+8|0,R=(t[V>>2]|0)-v|0,t[V>>2]=R,t[N>>2]=0,v=0):(R=p+8|0,V=R,R=t[R>>2]|0),(R|0)<0&&(y=y-R|0,t[p>>2]=y,v=v-R|0,t[N>>2]=v,t[V>>2]=0,R=0),x=(v|0)<(y|0)?v:y,x=(R|0)<(x|0)?R:x,!((x|0)<=0)&&(t[p>>2]=y-x,t[N>>2]=v-x,t[V>>2]=R-x)}function Hn(p,y){p=p|0,y=y|0;var v=0,x=0;x=t[p+8>>2]|0,v=+((t[p+4>>2]|0)-x|0),K[y>>3]=+((t[p>>2]|0)-x|0)-v*.5,K[y+8>>3]=v*.8660254037844386}function gi(p,y,v){p=p|0,y=y|0,v=v|0,t[v>>2]=(t[y>>2]|0)+(t[p>>2]|0),t[v+4>>2]=(t[y+4>>2]|0)+(t[p+4>>2]|0),t[v+8>>2]=(t[y+8>>2]|0)+(t[p+8>>2]|0)}function fr(p,y,v){p=p|0,y=y|0,v=v|0,t[v>>2]=(t[p>>2]|0)-(t[y>>2]|0),t[v+4>>2]=(t[p+4>>2]|0)-(t[y+4>>2]|0),t[v+8>>2]=(t[p+8>>2]|0)-(t[y+8>>2]|0)}function Fi(p,y){p=p|0,y=y|0;var v=0,x=0;v=oA(t[p>>2]|0,y)|0,t[p>>2]=v,v=p+4|0,x=oA(t[v>>2]|0,y)|0,t[v>>2]=x,p=p+8|0,y=oA(t[p>>2]|0,y)|0,t[p>>2]=y}function qs(p){p=p|0;var y=0,v=0,x=0,R=0,V=0,N=0,H=0;N=t[p>>2]|0,H=(N|0)<0,x=(t[p+4>>2]|0)-(H?N:0)|0,V=(x|0)<0,R=(V?0-x|0:0)+((t[p+8>>2]|0)-(H?N:0))|0,v=(R|0)<0,p=v?0:R,y=(V?0:x)-(v?R:0)|0,R=(H?0:N)-(V?x:0)-(v?R:0)|0,v=(y|0)<(R|0)?y:R,v=(p|0)<(v|0)?p:v,x=(v|0)>0,p=p-(x?v:0)|0,y=y-(x?v:0)|0;e:do switch(R-(x?v:0)|0){case 0:switch(y|0){case 0:return H=p|0?(p|0)==1?1:7:0,H|0;case 1:return H=p|0?(p|0)==1?3:7:2,H|0;default:break e}case 1:switch(y|0){case 0:return H=p|0?(p|0)==1?5:7:4,H|0;case 1:{if(!p)p=6;else break e;return p|0}default:break e}}while(!1);return H=7,H|0}function Do(p){p=p|0;var y=0,v=0,x=0,R=0,V=0,N=0,H=0;N=p+8|0,v=t[N>>2]|0,y=(t[p>>2]|0)-v|0,H=p+4|0,v=(t[H>>2]|0)-v|0,x=Pi(+((y*3|0)-v|0)/7)|0,t[p>>2]=x,y=Pi(+((v<<1)+y|0)/7)|0,t[H>>2]=y,t[N>>2]=0,v=y-x|0,(x|0)<0?(V=0-x|0,t[H>>2]=v,t[N>>2]=V,t[p>>2]=0,y=v,x=0,v=V):v=0,(y|0)<0&&(x=x-y|0,t[p>>2]=x,v=v-y|0,t[N>>2]=v,t[H>>2]=0,y=0),V=x-v|0,R=y-v|0,(v|0)<0?(t[p>>2]=V,t[H>>2]=R,t[N>>2]=0,y=R,R=V,v=0):R=x,x=(y|0)<(R|0)?y:R,x=(v|0)<(x|0)?v:x,!((x|0)<=0)&&(t[p>>2]=R-x,t[H>>2]=y-x,t[N>>2]=v-x)}function ss(p){p=p|0;var y=0,v=0,x=0,R=0,V=0,N=0,H=0;N=p+8|0,v=t[N>>2]|0,y=(t[p>>2]|0)-v|0,H=p+4|0,v=(t[H>>2]|0)-v|0,x=Pi(+((y<<1)+v|0)/7)|0,t[p>>2]=x,y=Pi(+((v*3|0)-y|0)/7)|0,t[H>>2]=y,t[N>>2]=0,v=y-x|0,(x|0)<0?(V=0-x|0,t[H>>2]=v,t[N>>2]=V,t[p>>2]=0,y=v,x=0,v=V):v=0,(y|0)<0&&(x=x-y|0,t[p>>2]=x,v=v-y|0,t[N>>2]=v,t[H>>2]=0,y=0),V=x-v|0,R=y-v|0,(v|0)<0?(t[p>>2]=V,t[H>>2]=R,t[N>>2]=0,y=R,R=V,v=0):R=x,x=(y|0)<(R|0)?y:R,x=(v|0)<(x|0)?v:x,!((x|0)<=0)&&(t[p>>2]=R-x,t[H>>2]=y-x,t[N>>2]=v-x)}function Po(p){p=p|0;var y=0,v=0,x=0,R=0,V=0,N=0,H=0;y=t[p>>2]|0,N=p+4|0,v=t[N>>2]|0,H=p+8|0,x=t[H>>2]|0,R=v+(y*3|0)|0,t[p>>2]=R,v=x+(v*3|0)|0,t[N>>2]=v,y=(x*3|0)+y|0,t[H>>2]=y,x=v-R|0,(R|0)<0?(y=y-R|0,t[N>>2]=x,t[H>>2]=y,t[p>>2]=0,v=x,x=0):x=R,(v|0)<0&&(x=x-v|0,t[p>>2]=x,y=y-v|0,t[H>>2]=y,t[N>>2]=0,v=0),V=x-y|0,R=v-y|0,(y|0)<0?(t[p>>2]=V,t[N>>2]=R,t[H>>2]=0,x=V,y=0):R=v,v=(R|0)<(x|0)?R:x,v=(y|0)<(v|0)?y:v,!((v|0)<=0)&&(t[p>>2]=x-v,t[N>>2]=R-v,t[H>>2]=y-v)}function Xi(p){p=p|0;var y=0,v=0,x=0,R=0,V=0,N=0,H=0;R=t[p>>2]|0,N=p+4|0,y=t[N>>2]|0,H=p+8|0,v=t[H>>2]|0,x=(y*3|0)+R|0,R=v+(R*3|0)|0,t[p>>2]=R,t[N>>2]=x,y=(v*3|0)+y|0,t[H>>2]=y,v=x-R|0,(R|0)<0?(y=y-R|0,t[N>>2]=v,t[H>>2]=y,t[p>>2]=0,R=0):v=x,(v|0)<0&&(R=R-v|0,t[p>>2]=R,y=y-v|0,t[H>>2]=y,t[N>>2]=0,v=0),V=R-y|0,x=v-y|0,(y|0)<0?(t[p>>2]=V,t[N>>2]=x,t[H>>2]=0,R=V,y=0):x=v,v=(x|0)<(R|0)?x:R,v=(y|0)<(v|0)?y:v,!((v|0)<=0)&&(t[p>>2]=R-v,t[N>>2]=x-v,t[H>>2]=y-v)}function lo(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0,N=0,H=0;(y+-1|0)>>>0>=6||(R=(t[15472+(y*12|0)>>2]|0)+(t[p>>2]|0)|0,t[p>>2]=R,H=p+4|0,x=(t[15472+(y*12|0)+4>>2]|0)+(t[H>>2]|0)|0,t[H>>2]=x,N=p+8|0,y=(t[15472+(y*12|0)+8>>2]|0)+(t[N>>2]|0)|0,t[N>>2]=y,v=x-R|0,(R|0)<0?(y=y-R|0,t[H>>2]=v,t[N>>2]=y,t[p>>2]=0,x=0):(v=x,x=R),(v|0)<0&&(x=x-v|0,t[p>>2]=x,y=y-v|0,t[N>>2]=y,t[H>>2]=0,v=0),V=x-y|0,R=v-y|0,(y|0)<0?(t[p>>2]=V,t[H>>2]=R,t[N>>2]=0,x=V,y=0):R=v,v=(R|0)<(x|0)?R:x,v=(y|0)<(v|0)?y:v,!((v|0)<=0)&&(t[p>>2]=x-v,t[H>>2]=R-v,t[N>>2]=y-v))}function NA(p){p=p|0;var y=0,v=0,x=0,R=0,V=0,N=0,H=0;R=t[p>>2]|0,N=p+4|0,y=t[N>>2]|0,H=p+8|0,v=t[H>>2]|0,x=y+R|0,R=v+R|0,t[p>>2]=R,t[N>>2]=x,y=v+y|0,t[H>>2]=y,v=x-R|0,(R|0)<0?(y=y-R|0,t[N>>2]=v,t[H>>2]=y,t[p>>2]=0,x=0):(v=x,x=R),(v|0)<0&&(x=x-v|0,t[p>>2]=x,y=y-v|0,t[H>>2]=y,t[N>>2]=0,v=0),V=x-y|0,R=v-y|0,(y|0)<0?(t[p>>2]=V,t[N>>2]=R,t[H>>2]=0,x=V,y=0):R=v,v=(R|0)<(x|0)?R:x,v=(y|0)<(v|0)?y:v,!((v|0)<=0)&&(t[p>>2]=x-v,t[N>>2]=R-v,t[H>>2]=y-v)}function os(p){p=p|0;var y=0,v=0,x=0,R=0,V=0,N=0,H=0;y=t[p>>2]|0,N=p+4|0,x=t[N>>2]|0,H=p+8|0,v=t[H>>2]|0,R=x+y|0,t[p>>2]=R,x=v+x|0,t[N>>2]=x,y=v+y|0,t[H>>2]=y,v=x-R|0,(R|0)<0?(y=y-R|0,t[N>>2]=v,t[H>>2]=y,t[p>>2]=0,x=0):(v=x,x=R),(v|0)<0&&(x=x-v|0,t[p>>2]=x,y=y-v|0,t[H>>2]=y,t[N>>2]=0,v=0),V=x-y|0,R=v-y|0,(y|0)<0?(t[p>>2]=V,t[N>>2]=R,t[H>>2]=0,x=V,y=0):R=v,v=(R|0)<(x|0)?R:x,v=(y|0)<(v|0)?y:v,!((v|0)<=0)&&(t[p>>2]=x-v,t[N>>2]=R-v,t[H>>2]=y-v)}function zr(p){switch(p=p|0,p|0){case 1:{p=5;break}case 5:{p=4;break}case 4:{p=6;break}case 6:{p=2;break}case 2:{p=3;break}case 3:{p=1;break}}return p|0}function dr(p){switch(p=p|0,p|0){case 1:{p=3;break}case 3:{p=2;break}case 2:{p=6;break}case 6:{p=4;break}case 4:{p=5;break}case 5:{p=1;break}}return p|0}function _a(p){p=p|0;var y=0,v=0,x=0,R=0,V=0,N=0,H=0;y=t[p>>2]|0,N=p+4|0,v=t[N>>2]|0,H=p+8|0,x=t[H>>2]|0,R=v+(y<<1)|0,t[p>>2]=R,v=x+(v<<1)|0,t[N>>2]=v,y=(x<<1)+y|0,t[H>>2]=y,x=v-R|0,(R|0)<0?(y=y-R|0,t[N>>2]=x,t[H>>2]=y,t[p>>2]=0,v=x,x=0):x=R,(v|0)<0&&(x=x-v|0,t[p>>2]=x,y=y-v|0,t[H>>2]=y,t[N>>2]=0,v=0),V=x-y|0,R=v-y|0,(y|0)<0?(t[p>>2]=V,t[N>>2]=R,t[H>>2]=0,x=V,y=0):R=v,v=(R|0)<(x|0)?R:x,v=(y|0)<(v|0)?y:v,!((v|0)<=0)&&(t[p>>2]=x-v,t[N>>2]=R-v,t[H>>2]=y-v)}function VA(p){p=p|0;var y=0,v=0,x=0,R=0,V=0,N=0,H=0;R=t[p>>2]|0,N=p+4|0,y=t[N>>2]|0,H=p+8|0,v=t[H>>2]|0,x=(y<<1)+R|0,R=v+(R<<1)|0,t[p>>2]=R,t[N>>2]=x,y=(v<<1)+y|0,t[H>>2]=y,v=x-R|0,(R|0)<0?(y=y-R|0,t[N>>2]=v,t[H>>2]=y,t[p>>2]=0,R=0):v=x,(v|0)<0&&(R=R-v|0,t[p>>2]=R,y=y-v|0,t[H>>2]=y,t[N>>2]=0,v=0),V=R-y|0,x=v-y|0,(y|0)<0?(t[p>>2]=V,t[N>>2]=x,t[H>>2]=0,R=V,y=0):x=v,v=(x|0)<(R|0)?x:R,v=(y|0)<(v|0)?y:v,!((v|0)<=0)&&(t[p>>2]=R-v,t[N>>2]=x-v,t[H>>2]=y-v)}function as(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0,N=0,H=0;return N=(t[p>>2]|0)-(t[y>>2]|0)|0,H=(N|0)<0,x=(t[p+4>>2]|0)-(t[y+4>>2]|0)-(H?N:0)|0,V=(x|0)<0,R=(H?0-N|0:0)+(t[p+8>>2]|0)-(t[y+8>>2]|0)+(V?0-x|0:0)|0,p=(R|0)<0,y=p?0:R,v=(V?0:x)-(p?R:0)|0,R=(H?0:N)-(V?x:0)-(p?R:0)|0,p=(v|0)<(R|0)?v:R,p=(y|0)<(p|0)?y:p,x=(p|0)>0,y=y-(x?p:0)|0,v=v-(x?p:0)|0,p=R-(x?p:0)|0,p=(p|0)>-1?p:0-p|0,v=(v|0)>-1?v:0-v|0,y=(y|0)>-1?y:0-y|0,y=(v|0)>(y|0)?v:y,((p|0)>(y|0)?p:y)|0}function Ss(p,y){p=p|0,y=y|0;var v=0;v=t[p+8>>2]|0,t[y>>2]=(t[p>>2]|0)-v,t[y+4>>2]=(t[p+4>>2]|0)-v}function ol(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0,N=0,H=0;x=t[p>>2]|0,t[y>>2]=x,p=t[p+4>>2]|0,N=y+4|0,t[N>>2]=p,H=y+8|0,t[H>>2]=0,v=p-x|0,(x|0)<0?(p=0-x|0,t[N>>2]=v,t[H>>2]=p,t[y>>2]=0,x=0):(v=p,p=0),(v|0)<0&&(x=x-v|0,t[y>>2]=x,p=p-v|0,t[H>>2]=p,t[N>>2]=0,v=0),V=x-p|0,R=v-p|0,(p|0)<0?(t[y>>2]=V,t[N>>2]=R,t[H>>2]=0,v=R,R=V,p=0):R=x,x=(v|0)<(R|0)?v:R,x=(p|0)<(x|0)?p:x,!((x|0)<=0)&&(t[y>>2]=R-x,t[N>>2]=v-x,t[H>>2]=p-x)}function Na(p){p=p|0;var y=0,v=0,x=0,R=0;y=p+8|0,R=t[y>>2]|0,v=R-(t[p>>2]|0)|0,t[p>>2]=v,x=p+4|0,p=(t[x>>2]|0)-R|0,t[x>>2]=p,t[y>>2]=0-(p+v)}function Xr(p){p=p|0;var y=0,v=0,x=0,R=0,V=0,N=0,H=0;v=t[p>>2]|0,y=0-v|0,t[p>>2]=y,N=p+8|0,t[N>>2]=0,H=p+4|0,x=t[H>>2]|0,R=x+v|0,(v|0)>0?(t[H>>2]=R,t[N>>2]=v,t[p>>2]=0,y=0,x=R):v=0,(x|0)<0?(V=y-x|0,t[p>>2]=V,v=v-x|0,t[N>>2]=v,t[H>>2]=0,R=V-v|0,y=0-v|0,(v|0)<0?(t[p>>2]=R,t[H>>2]=y,t[N>>2]=0,x=y,v=0):(x=0,R=V)):R=y,y=(x|0)<(R|0)?x:R,y=(v|0)<(y|0)?v:y,!((y|0)<=0)&&(t[p>>2]=R-y,t[H>>2]=x-y,t[N>>2]=v-y)}function su(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0;x=Be,Be=Be+16|0,R=x,aA(p,y,v,R),Ti(R,v+4|0),Be=x}function aA(p,y,v,x){p=p|0,y=y|0,v=v|0,x=x|0;var R=0,V=0,N=0,H=0,te=0;if(te=Be,Be=Be+32|0,V=te,cl(p,V),t[v>>2]=0,R=+or(15888,V),N=+or(15912,V),N<R&&(t[v>>2]=1,R=N),N=+or(15936,V),N<R&&(t[v>>2]=2,R=N),N=+or(15960,V),N<R&&(t[v>>2]=3,R=N),N=+or(15984,V),N<R&&(t[v>>2]=4,R=N),N=+or(16008,V),N<R&&(t[v>>2]=5,R=N),N=+or(16032,V),N<R&&(t[v>>2]=6,R=N),N=+or(16056,V),N<R&&(t[v>>2]=7,R=N),N=+or(16080,V),N<R&&(t[v>>2]=8,R=N),N=+or(16104,V),N<R&&(t[v>>2]=9,R=N),N=+or(16128,V),N<R&&(t[v>>2]=10,R=N),N=+or(16152,V),N<R&&(t[v>>2]=11,R=N),N=+or(16176,V),N<R&&(t[v>>2]=12,R=N),N=+or(16200,V),N<R&&(t[v>>2]=13,R=N),N=+or(16224,V),N<R&&(t[v>>2]=14,R=N),N=+or(16248,V),N<R&&(t[v>>2]=15,R=N),N=+or(16272,V),N<R&&(t[v>>2]=16,R=N),N=+or(16296,V),N<R&&(t[v>>2]=17,R=N),N=+or(16320,V),N<R&&(t[v>>2]=18,R=N),N=+or(16344,V),N<R&&(t[v>>2]=19,R=N),N=+oi(+(1-R*.5)),N<1e-16){t[x>>2]=0,t[x+4>>2]=0,t[x+8>>2]=0,t[x+12>>2]=0,Be=te;return}if(v=t[v>>2]|0,R=+K[16368+(v*24|0)>>3],R=+zo(R-+zo(+ai(15568+(v<<4)|0,p))),Di(y)|0?H=+zo(R+-.3334731722518321):H=R,R=+sn(+N)/.381966011250105,(y|0)>0){V=0;do R=R*2.6457513110645907,V=V+1|0;while((V|0)!=(y|0))}N=+Bn(+H)*R,K[x>>3]=N,H=+$t(+H)*R,K[x+8>>3]=H,Be=te}function Cs(p,y,v,x,R){p=p|0,y=y|0,v=v|0,x=x|0,R=R|0;var V=0,N=0;if(V=+$a(p),V<1e-16){y=15568+(y<<4)|0,t[R>>2]=t[y>>2],t[R+4>>2]=t[y+4>>2],t[R+8>>2]=t[y+8>>2],t[R+12>>2]=t[y+12>>2];return}if(N=+kr(+ +K[p+8>>3],+ +K[p>>3]),(v|0)>0){p=0;do V=V/2.6457513110645907,p=p+1|0;while((p|0)!=(v|0))}x?(V=V/3,v=(Di(v)|0)==0,V=+so(+((v?V:V/2.6457513110645907)*.381966011250105))):(V=+so(+(V*.381966011250105)),Di(v)|0&&(N=+zo(N+.3334731722518321))),Qi(15568+(y<<4)|0,+zo(+K[16368+(y*24|0)>>3]-N),V,R)}function Va(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0;x=Be,Be=Be+16|0,R=x,Hn(p+4|0,R),Cs(R,t[p>>2]|0,y,0,v),Be=x}function UA(p,y,v,x,R){p=p|0,y=y|0,v=v|0,x=x|0,R=R|0;var V=0,N=0,H=0,te=0,le=0,pe=0,Ge=0,Ee=0,Se=0,C=0,i=0,h=0,b=0,E=0,B=0,F=0,A=0,s=0,l=0,f=0,m=0,k=0,I=0,D=0,Q=0,Z=0,X=0,ie=0;if(Z=Be,Be=Be+272|0,V=Z+256|0,E=Z+240|0,I=Z,D=Z+224|0,Q=Z+208|0,B=Z+176|0,F=Z+160|0,A=Z+192|0,s=Z+144|0,l=Z+128|0,f=Z+112|0,m=Z+96|0,k=Z+80|0,t[V>>2]=y,t[E>>2]=t[p>>2],t[E+4>>2]=t[p+4>>2],t[E+8>>2]=t[p+8>>2],t[E+12>>2]=t[p+12>>2],ls(E,V,I),t[R>>2]=0,E=x+v+((x|0)==5&1)|0,(E|0)<=(v|0)){Be=Z;return}te=t[V>>2]|0,le=D+4|0,pe=B+4|0,Ge=v+5|0,Ee=16848+(te<<2)|0,Se=16928+(te<<2)|0,C=l+8|0,i=f+8|0,h=m+8|0,b=Q+4|0,H=v;e:for(;;){N=I+(((H|0)%5|0)<<4)|0,t[Q>>2]=t[N>>2],t[Q+4>>2]=t[N+4>>2],t[Q+8>>2]=t[N+8>>2],t[Q+12>>2]=t[N+12>>2];do;while((Is(Q,te,0,1)|0)==2);if((H|0)>(v|0)&(Di(y)|0)!=0){if(t[B>>2]=t[Q>>2],t[B+4>>2]=t[Q+4>>2],t[B+8>>2]=t[Q+8>>2],t[B+12>>2]=t[Q+12>>2],Hn(le,F),x=t[B>>2]|0,V=t[17008+(x*80|0)+(t[D>>2]<<2)>>2]|0,t[B>>2]=t[18608+(x*80|0)+(V*20|0)>>2],N=t[18608+(x*80|0)+(V*20|0)+16>>2]|0,(N|0)>0){p=0;do NA(pe),p=p+1|0;while((p|0)<(N|0))}switch(N=18608+(x*80|0)+(V*20|0)+4|0,t[A>>2]=t[N>>2],t[A+4>>2]=t[N+4>>2],t[A+8>>2]=t[N+8>>2],Fi(A,(t[Ee>>2]|0)*3|0),gi(pe,A,pe),Rn(pe),Hn(pe,s),X=+(t[Se>>2]|0),K[l>>3]=X*3,K[C>>3]=0,ie=X*-1.5,K[f>>3]=ie,K[i>>3]=X*2.598076211353316,K[m>>3]=ie,K[h>>3]=X*-2.598076211353316,t[17008+((t[B>>2]|0)*80|0)+(t[Q>>2]<<2)>>2]|0){case 1:{p=f,x=l;break}case 3:{p=m,x=f;break}case 2:{p=l,x=m;break}default:{p=12;break e}}fo(F,s,x,p,k),Cs(k,t[B>>2]|0,te,1,R+8+(t[R>>2]<<4)|0),t[R>>2]=(t[R>>2]|0)+1}if((H|0)<(Ge|0)&&(Hn(b,B),Cs(B,t[Q>>2]|0,te,1,R+8+(t[R>>2]<<4)|0),t[R>>2]=(t[R>>2]|0)+1),t[D>>2]=t[Q>>2],t[D+4>>2]=t[Q+4>>2],t[D+8>>2]=t[Q+8>>2],t[D+12>>2]=t[Q+12>>2],H=H+1|0,(H|0)>=(E|0)){p=3;break}}if((p|0)==3){Be=Z;return}else(p|0)==12&&Xt(22474,22521,581,22531)}function ls(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,V=0,N=0,H=0,te=0;te=Be,Be=Be+128|0,x=te+64|0,R=te,V=x,N=20208,H=V+60|0;do t[V>>2]=t[N>>2],V=V+4|0,N=N+4|0;while((V|0)<(H|0));V=R,N=20272,H=V+60|0;do t[V>>2]=t[N>>2],V=V+4|0,N=N+4|0;while((V|0)<(H|0));H=(Di(t[y>>2]|0)|0)==0,x=H?x:R,R=p+4|0,_a(R),VA(R),Di(t[y>>2]|0)|0&&(Xi(R),t[y>>2]=(t[y>>2]|0)+1),t[v>>2]=t[p>>2],y=v+4|0,gi(R,x,y),Rn(y),t[v+16>>2]=t[p>>2],y=v+20|0,gi(R,x+12|0,y),Rn(y),t[v+32>>2]=t[p>>2],y=v+36|0,gi(R,x+24|0,y),Rn(y),t[v+48>>2]=t[p>>2],y=v+52|0,gi(R,x+36|0,y),Rn(y),t[v+64>>2]=t[p>>2],v=v+68|0,gi(R,x+48|0,v),Rn(v),Be=te}function Is(p,y,v,x){p=p|0,y=y|0,v=v|0,x=x|0;var R=0,V=0,N=0,H=0,te=0,le=0,pe=0,Ge=0,Ee=0,Se=0,C=0;if(C=Be,Be=Be+32|0,Ee=C+12|0,H=C,Se=p+4|0,Ge=t[16928+(y<<2)>>2]|0,pe=(x|0)!=0,Ge=pe?Ge*3|0:Ge,R=t[Se>>2]|0,le=p+8|0,N=t[le>>2]|0,pe){if(V=p+12|0,x=t[V>>2]|0,R=N+R+x|0,(R|0)==(Ge|0))return Se=1,Be=C,Se|0;te=V}else te=p+12|0,x=t[te>>2]|0,R=N+R+x|0;if((R|0)<=(Ge|0))return Se=0,Be=C,Se|0;do if((x|0)>0){if(x=t[p>>2]|0,(N|0)>0){V=18608+(x*80|0)+60|0,x=p;break}x=18608+(x*80|0)+40|0,v?(ga(Ee,Ge,0,0),fr(Se,Ee,H),os(H),gi(H,Ee,Se),V=x,x=p):(V=x,x=p)}else V=18608+((t[p>>2]|0)*80|0)+20|0,x=p;while(!1);if(t[x>>2]=t[V>>2],R=V+16|0,(t[R>>2]|0)>0){x=0;do NA(Se),x=x+1|0;while((x|0)<(t[R>>2]|0))}return p=V+4|0,t[Ee>>2]=t[p>>2],t[Ee+4>>2]=t[p+4>>2],t[Ee+8>>2]=t[p+8>>2],y=t[16848+(y<<2)>>2]|0,Fi(Ee,pe?y*3|0:y),gi(Se,Ee,Se),Rn(Se),pe?x=((t[le>>2]|0)+(t[Se>>2]|0)+(t[te>>2]|0)|0)==(Ge|0)?1:2:x=2,Se=x,Be=C,Se|0}function Ki(p,y){p=p|0,y=y|0;var v=0;do v=Is(p,y,0,1)|0;while((v|0)==2);return v|0}function QA(p,y,v,x,R){p=p|0,y=y|0,v=v|0,x=x|0,R=R|0;var V=0,N=0,H=0,te=0,le=0,pe=0,Ge=0,Ee=0,Se=0,C=0,i=0,h=0,b=0,E=0,B=0,F=0,A=0,s=0,l=0,f=0,m=0,k=0,I=0;if(m=Be,Be=Be+240|0,V=m+224|0,A=m+208|0,s=m,l=m+192|0,f=m+176|0,h=m+160|0,b=m+144|0,E=m+128|0,B=m+112|0,F=m+96|0,t[V>>2]=y,t[A>>2]=t[p>>2],t[A+4>>2]=t[p+4>>2],t[A+8>>2]=t[p+8>>2],t[A+12>>2]=t[p+12>>2],us(A,V,s),t[R>>2]=0,i=x+v+((x|0)==6&1)|0,(i|0)<=(v|0)){Be=m;return}te=t[V>>2]|0,le=v+6|0,pe=16928+(te<<2)|0,Ge=b+8|0,Ee=E+8|0,Se=B+8|0,C=l+4|0,N=0,H=v,x=-1;e:for(;;){if(V=(H|0)%6|0,p=s+(V<<4)|0,t[l>>2]=t[p>>2],t[l+4>>2]=t[p+4>>2],t[l+8>>2]=t[p+8>>2],t[l+12>>2]=t[p+12>>2],p=N,N=Is(l,te,0,1)|0,(H|0)>(v|0)&(Di(y)|0)!=0&&(p|0)!=1&&(t[l>>2]|0)!=(x|0)){switch(Hn(s+(((V+5|0)%6|0)<<4)+4|0,f),Hn(s+(V<<4)+4|0,h),k=+(t[pe>>2]|0),K[b>>3]=k*3,K[Ge>>3]=0,I=k*-1.5,K[E>>3]=I,K[Ee>>3]=k*2.598076211353316,K[B>>3]=I,K[Se>>3]=k*-2.598076211353316,V=t[A>>2]|0,t[17008+(V*80|0)+(((x|0)==(V|0)?t[l>>2]|0:x)<<2)>>2]|0){case 1:{p=E,x=b;break}case 3:{p=B,x=E;break}case 2:{p=b,x=B;break}default:{p=8;break e}}fo(f,h,x,p,F),!(Ps(f,F)|0)&&!(Ps(h,F)|0)&&(Cs(F,t[A>>2]|0,te,1,R+8+(t[R>>2]<<4)|0),t[R>>2]=(t[R>>2]|0)+1)}if((H|0)<(le|0)&&(Hn(C,f),Cs(f,t[l>>2]|0,te,1,R+8+(t[R>>2]<<4)|0),t[R>>2]=(t[R>>2]|0)+1),H=H+1|0,(H|0)>=(i|0)){p=3;break}else x=t[l>>2]|0}if((p|0)==3){Be=m;return}else(p|0)==8&&Xt(22557,22521,746,22602)}function us(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,V=0,N=0,H=0,te=0;te=Be,Be=Be+160|0,x=te+80|0,R=te,V=x,N=20336,H=V+72|0;do t[V>>2]=t[N>>2],V=V+4|0,N=N+4|0;while((V|0)<(H|0));V=R,N=20416,H=V+72|0;do t[V>>2]=t[N>>2],V=V+4|0,N=N+4|0;while((V|0)<(H|0));H=(Di(t[y>>2]|0)|0)==0,x=H?x:R,R=p+4|0,_a(R),VA(R),Di(t[y>>2]|0)|0&&(Xi(R),t[y>>2]=(t[y>>2]|0)+1),t[v>>2]=t[p>>2],y=v+4|0,gi(R,x,y),Rn(y),t[v+16>>2]=t[p>>2],y=v+20|0,gi(R,x+12|0,y),Rn(y),t[v+32>>2]=t[p>>2],y=v+36|0,gi(R,x+24|0,y),Rn(y),t[v+48>>2]=t[p>>2],y=v+52|0,gi(R,x+36|0,y),Rn(y),t[v+64>>2]=t[p>>2],y=v+68|0,gi(R,x+48|0,y),Rn(y),t[v+80>>2]=t[p>>2],v=v+84|0,gi(R,x+60|0,v),Rn(v),Be=te}function zo(p){p=+p;var y=0;return y=p<0?p+6.283185307179586:p,+(p>=6.283185307179586?y+-6.283185307179586:y)}function Lr(p,y){return p=p|0,y=y|0,+en(+(+K[p>>3]-+K[y>>3]))<17453292519943298e-27?(y=+en(+(+K[p+8>>3]-+K[y+8>>3]))<17453292519943298e-27,y|0):(y=0,y|0)}function Lo(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0;return R=+K[y>>3],x=+K[p>>3],V=+$t(+((R-x)*.5)),v=+$t(+((+K[y+8>>3]-+K[p+8>>3])*.5)),v=V*V+v*(+Bn(+R)*+Bn(+x)*v),+(+kr(+ +Pt(+v),+ +Pt(+(1-v)))*2)}function Ro(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0;return R=+K[y>>3],x=+K[p>>3],V=+$t(+((R-x)*.5)),v=+$t(+((+K[y+8>>3]-+K[p+8>>3])*.5)),v=V*V+v*(+Bn(+R)*+Bn(+x)*v),+(+kr(+ +Pt(+v),+ +Pt(+(1-v)))*2*6371.007180918475)}function al(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0;return R=+K[y>>3],x=+K[p>>3],V=+$t(+((R-x)*.5)),v=+$t(+((+K[y+8>>3]-+K[p+8>>3])*.5)),v=V*V+v*(+Bn(+R)*+Bn(+x)*v),+(+kr(+ +Pt(+v),+ +Pt(+(1-v)))*2*6371.007180918475*1e3)}function ai(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0,N=0;return V=+K[y>>3],x=+Bn(+V),R=+K[y+8>>3]-+K[p+8>>3],N=x*+$t(+R),v=+K[p>>3],+ +kr(+N,+(+$t(+V)*+Bn(+v)-+Bn(+R)*(x*+$t(+v))))}function Qi(p,y,v,x){p=p|0,y=+y,v=+v,x=x|0;var R=0,V=0,N=0,H=0;if(v<1e-16){t[x>>2]=t[p>>2],t[x+4>>2]=t[p+4>>2],t[x+8>>2]=t[p+8>>2],t[x+12>>2]=t[p+12>>2];return}V=y<0?y+6.283185307179586:y,V=y>=6.283185307179586?V+-6.283185307179586:V;do if(V<1e-16)y=+K[p>>3]+v,K[x>>3]=y,R=x;else{if(R=+en(+(V+-3.141592653589793))<1e-16,y=+K[p>>3],R){y=y-v,K[x>>3]=y,R=x;break}if(N=+Bn(+v),v=+$t(+v),y=N*+$t(+y)+ +Bn(+V)*(v*+Bn(+y)),y=y>1?1:y,y=+Dr(+(y<-1?-1:y)),K[x>>3]=y,+en(+(y+-1.5707963267948966))<1e-16){K[x>>3]=1.5707963267948966,K[x+8>>3]=0;return}if(+en(+(y+1.5707963267948966))<1e-16){K[x>>3]=-1.5707963267948966,K[x+8>>3]=0;return}if(H=+Bn(+y),V=v*+$t(+V)/H,v=+K[p>>3],y=(N-+$t(+y)*+$t(+v))/+Bn(+v)/H,N=V>1?1:V,y=y>1?1:y,y=+K[p+8>>3]+ +kr(+(N<-1?-1:N),+(y<-1?-1:y)),y>3.141592653589793)do y=y+-6.283185307179586;while(y>3.141592653589793);if(y<-3.141592653589793)do y=y+6.283185307179586;while(y<-3.141592653589793);K[x+8>>3]=y;return}while(!1);if(+en(+(y+-1.5707963267948966))<1e-16){K[R>>3]=1.5707963267948966,K[x+8>>3]=0;return}if(+en(+(y+1.5707963267948966))<1e-16){K[R>>3]=-1.5707963267948966,K[x+8>>3]=0;return}if(y=+K[p+8>>3],y>3.141592653589793)do y=y+-6.283185307179586;while(y>3.141592653589793);if(y<-3.141592653589793)do y=y+6.283185307179586;while(y<-3.141592653589793);K[x+8>>3]=y}function Zs(p){return p=p|0,+ +K[20496+(p<<3)>>3]}function ni(p){return p=p|0,+ +K[20624+(p<<3)>>3]}function dA(p){return p=p|0,+ +K[20752+(p<<3)>>3]}function Ji(p){return p=p|0,+ +K[20880+(p<<3)>>3]}function Bi(p){p=p|0;var y=0;return y=21008+(p<<3)|0,p=t[y>>2]|0,Ln(t[y+4>>2]|0),p|0}function pA(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,V=0,N=0,H=0,te=0,le=0,pe=0,Ge=0,Ee=0;return Ee=+K[y>>3],pe=+K[p>>3],te=+$t(+((Ee-pe)*.5)),V=+K[y+8>>3],le=+K[p+8>>3],N=+$t(+((V-le)*.5)),H=+Bn(+pe),Ge=+Bn(+Ee),N=te*te+N*(Ge*H*N),N=+kr(+ +Pt(+N),+ +Pt(+(1-N)))*2,te=+K[v>>3],Ee=+$t(+((te-Ee)*.5)),x=+K[v+8>>3],V=+$t(+((x-V)*.5)),R=+Bn(+te),V=Ee*Ee+V*(Ge*R*V),V=+kr(+ +Pt(+V),+ +Pt(+(1-V)))*2,te=+$t(+((pe-te)*.5)),x=+$t(+((le-x)*.5)),x=te*te+x*(H*R*x),x=+kr(+ +Pt(+x),+ +Pt(+(1-x)))*2,R=(N+V+x)*.5,+(+so(+ +Pt(+(+sn(+(R*.5))*+sn(+((R-N)*.5))*+sn(+((R-V)*.5))*+sn(+((R-x)*.5)))))*4)}function ll(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0,N=0;if(V=Be,Be=Be+192|0,x=V+168|0,R=V,Zr(p,y,x),ZA(p,y,R),y=t[R>>2]|0,(y|0)<=0)return v=0,Be=V,+v;if(v=+pA(R+8|0,R+8+(((y|0)!=1&1)<<4)|0,x)+0,(y|0)==1)return Be=V,+v;p=1;do N=p,p=p+1|0,v=v+ +pA(R+8+(N<<4)|0,R+8+(((p|0)%(y|0)|0)<<4)|0,x);while((p|0)<(y|0));return Be=V,+v}function Ua(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0,N=0;if(V=Be,Be=Be+192|0,x=V+168|0,R=V,Zr(p,y,x),ZA(p,y,R),y=t[R>>2]|0,(y|0)>0){if(v=+pA(R+8|0,R+8+(((y|0)!=1&1)<<4)|0,x)+0,(y|0)!=1){p=1;do N=p,p=p+1|0,v=v+ +pA(R+8+(N<<4)|0,R+8+(((p|0)%(y|0)|0)<<4)|0,x);while((p|0)<(y|0))}}else v=0;return Be=V,+(v*6371.007180918475*6371.007180918475)}function Hs(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0,N=0;if(V=Be,Be=Be+192|0,x=V+168|0,R=V,Zr(p,y,x),ZA(p,y,R),y=t[R>>2]|0,(y|0)>0){if(v=+pA(R+8|0,R+8+(((y|0)!=1&1)<<4)|0,x)+0,(y|0)!=1){p=1;do N=p,p=p+1|0,v=v+ +pA(R+8+(N<<4)|0,R+8+(((p|0)%(y|0)|0)<<4)|0,x);while((p|0)<(y|0))}}else v=0;return Be=V,+(v*6371.007180918475*6371.007180918475*1e3*1e3)}function $s(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0,N=0,H=0,te=0,le=0;if(N=Be,Be=Be+176|0,V=N,sr(p,y,V),p=t[V>>2]|0,(p|0)<=1)return R=0,Be=N,+R;y=p+-1|0,p=0,v=0,x=+K[V+8>>3],R=+K[V+16>>3];do p=p+1|0,te=x,x=+K[V+8+(p<<4)>>3],le=+$t(+((x-te)*.5)),H=R,R=+K[V+8+(p<<4)+8>>3],H=+$t(+((R-H)*.5)),H=le*le+H*(+Bn(+x)*+Bn(+te)*H),v=v+ +kr(+ +Pt(+H),+ +Pt(+(1-H)))*2;while((p|0)<(y|0));return Be=N,+v}function Fo(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0,N=0,H=0,te=0,le=0;if(N=Be,Be=Be+176|0,V=N,sr(p,y,V),p=t[V>>2]|0,(p|0)<=1)return R=0,Be=N,+R;y=p+-1|0,p=0,v=0,x=+K[V+8>>3],R=+K[V+16>>3];do p=p+1|0,te=x,x=+K[V+8+(p<<4)>>3],le=+$t(+((x-te)*.5)),H=R,R=+K[V+8+(p<<4)+8>>3],H=+$t(+((R-H)*.5)),H=le*le+H*(+Bn(+te)*+Bn(+x)*H),v=v+ +kr(+ +Pt(+H),+ +Pt(+(1-H)))*2;while((p|0)!=(y|0));return le=v*6371.007180918475,Be=N,+le}function Si(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0,N=0,H=0,te=0,le=0;if(N=Be,Be=Be+176|0,V=N,sr(p,y,V),p=t[V>>2]|0,(p|0)<=1)return R=0,Be=N,+R;y=p+-1|0,p=0,v=0,x=+K[V+8>>3],R=+K[V+16>>3];do p=p+1|0,te=x,x=+K[V+8+(p<<4)>>3],le=+$t(+((x-te)*.5)),H=R,R=+K[V+8+(p<<4)+8>>3],H=+$t(+((R-H)*.5)),H=le*le+H*(+Bn(+te)*+Bn(+x)*H),v=v+ +kr(+ +Pt(+H),+ +Pt(+(1-H)))*2;while((p|0)!=(y|0));return le=v*6371.007180918475*1e3,Be=N,+le}function Kr(p,y){return p=p|0,y=y|0,y=ct(p|0,y|0,52)|0,He()|0,y&15|0}function js(p,y){return p=p|0,y=y|0,y=ct(p|0,y|0,45)|0,He()|0,y&127|0}function cs(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0,N=0,H=0;if(!(!0&(y&-16777216|0)==134217728)||(N=ct(p|0,y|0,45)|0,He()|0,N=N&127,N>>>0>121))return y=0,y|0;v=ct(p|0,y|0,52)|0,He()|0,v=v&15;do if(v|0){for(R=1,x=0;;){if(V=ct(p|0,y|0,(15-R|0)*3|0)|0,He()|0,V=V&7,(V|0)!=0&(x^1))if((V|0)==1&($i(N)|0)!=0){H=0,x=13;break}else x=1;if((V|0)==7){H=0,x=13;break}if(R>>>0<v>>>0)R=R+1|0;else{x=9;break}}if((x|0)==9){if((v|0)==15)H=1;else break;return H|0}else if((x|0)==13)return H|0}while(!1);for(;;){if(H=ct(p|0,y|0,(14-v|0)*3|0)|0,He()|0,!((H&7|0)==7&!0)){H=0,x=13;break}if(v>>>0<14)v=v+1|0;else{H=1,x=13;break}}return(x|0)==13?H|0:0}function Ws(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0;if(x=ct(p|0,y|0,52)|0,He()|0,x=x&15,(x|0)>=(v|0)){if((x|0)!=(v|0))if(v>>>0<=15){if(R=wt(v|0,0,52)|0,p=R|p,y=He()|0|y&-15728641,(x|0)>(v|0))do R=wt(7,0,(14-v|0)*3|0)|0,v=v+1|0,p=R|p,y=He()|0|y;while((v|0)<(x|0))}else y=0,p=0}else y=0,p=0;return Ln(y|0),p|0}function Nl(p,y,v){return p=p|0,y=y|0,v=v|0,p=ct(p|0,y|0,52)|0,He()|0,p=p&15,(v|0)<16&(p|0)<=(v|0)?(v=yA(7,v-p|0)|0,v|0):(v=0,v|0)}function qr(p,y,v,x){p=p|0,y=y|0,v=v|0,x=x|0;var R=0,V=0,N=0,H=0,te=0,le=0,pe=0;if(N=ct(p|0,y|0,52)|0,He()|0,N=N&15,!!((v|0)<16&(N|0)<=(v|0))){if((N|0)==(v|0)){v=x,t[v>>2]=p,t[v+4>>2]=y;return}if(te=yA(7,v-N|0)|0,le=(te|0)/7|0,H=ct(p|0,y|0,45)|0,He()|0,!($i(H&127)|0))V=0;else{e:do if(!N)R=0;else for(V=1;;){if(R=ct(p|0,y|0,(15-V|0)*3|0)|0,He()|0,R=R&7,R|0)break e;if(V>>>0<N>>>0)V=V+1|0;else{R=0;break}}while(!1);V=(R|0)==0}if(pe=wt(N+1|0,0,52)|0,R=He()|0|y&-15728641,H=(14-N|0)*3|0,y=wt(7,0,H|0)|0,y=(pe|p)&~y,N=R&~(He()|0),qr(y,N,v,x),R=x+(le<<3)|0,!V){pe=wt(1,0,H|0)|0,qr(pe|y,He()|0|N,v,R),pe=R+(le<<3)|0,te=wt(2,0,H|0)|0,qr(te|y,He()|0|N,v,pe),pe=pe+(le<<3)|0,te=wt(3,0,H|0)|0,qr(te|y,He()|0|N,v,pe),pe=pe+(le<<3)|0,te=wt(4,0,H|0)|0,qr(te|y,He()|0|N,v,pe),pe=pe+(le<<3)|0,te=wt(5,0,H|0)|0,qr(te|y,He()|0|N,v,pe),te=wt(6,0,H|0)|0,qr(te|y,He()|0|N,v,pe+(le<<3)|0);return}V=R+(le<<3)|0,(te|0)>6&&(te=R+8|0,pe=(V>>>0>te>>>0?V:te)+-1+(0-R)|0,Mi(R|0,0,pe+8&-8|0)|0,R=te+(pe>>>3<<3)|0),pe=wt(2,0,H|0)|0,qr(pe|y,He()|0|N,v,R),pe=R+(le<<3)|0,te=wt(3,0,H|0)|0,qr(te|y,He()|0|N,v,pe),pe=pe+(le<<3)|0,te=wt(4,0,H|0)|0,qr(te|y,He()|0|N,v,pe),pe=pe+(le<<3)|0,te=wt(5,0,H|0)|0,qr(te|y,He()|0|N,v,pe),te=wt(6,0,H|0)|0,qr(te|y,He()|0|N,v,pe+(le<<3)|0)}}function Mr(p,y){p=p|0,y=y|0;var v=0,x=0,R=0;if(R=ct(p|0,y|0,45)|0,He()|0,!($i(R&127)|0))return R=0,R|0;R=ct(p|0,y|0,52)|0,He()|0,R=R&15;e:do if(!R)v=0;else for(x=1;;){if(v=ct(p|0,y|0,(15-x|0)*3|0)|0,He()|0,v=v&7,v|0)break e;if(x>>>0<R>>>0)x=x+1|0;else{v=0;break}}while(!1);return R=(v|0)==0&1,R|0}function Jr(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0;if(x=ct(p|0,y|0,52)|0,He()|0,x=x&15,(v|0)<16&(x|0)<=(v|0)){if((x|0)!=(v|0)&&(R=wt(v|0,0,52)|0,p=R|p,y=He()|0|y&-15728641,(x|0)<(v|0)))do R=wt(7,0,(14-x|0)*3|0)|0,x=x+1|0,p=p&~R,y=y&~(He()|0);while((x|0)<(v|0))}else y=0,p=0;return Ln(y|0),p|0}function Oo(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,V=0,N=0,H=0,te=0,le=0,pe=0,Ge=0,Ee=0,Se=0,C=0,i=0,h=0,b=0,E=0,B=0,F=0,A=0,s=0,l=0,f=0;if(!v)return l=0,l|0;if(R=p,x=t[R>>2]|0,R=t[R+4>>2]|0,!0&(R&15728640|0)==0){if((v|0)<=0||(l=y,t[l>>2]=x,t[l+4>>2]=R,(v|0)==1))return l=0,l|0;x=1;do A=p+(x<<3)|0,s=t[A+4>>2]|0,l=y+(x<<3)|0,t[l>>2]=t[A>>2],t[l+4>>2]=s,x=x+1|0;while((x|0)!=(v|0));return x=0,x|0}if(A=v<<3,s=Vr(A)|0,!s)return l=-3,l|0;if(qo(s|0,p|0,A|0)|0,F=IA(v,8)|0,!F)return Tn(s),l=-3,l|0;x=v;e:for(;;){N=s,pe=t[N>>2]|0,N=t[N+4>>2]|0,E=ct(pe|0,N|0,52)|0,He()|0,E=E&15,B=E+-1|0,b=(x|0)>0;t:do if(b){if(h=((x|0)<0)<<31>>31,C=wt(B|0,0,52)|0,i=He()|0,B>>>0>15)for(R=0,p=pe,v=N;;){if(!((p|0)==0&(v|0)==0)){if(V=ct(p|0,v|0,52)|0,He()|0,V=V&15,H=(V|0)<(B|0),V=(V|0)==(B|0),le=H?0:V?p:0,p=H?0:V?v:0,v=Hr(le|0,p|0,x|0,h|0)|0,He()|0,V=F+(v<<3)|0,H=V,te=t[H>>2]|0,H=t[H+4>>2]|0,(te|0)==0&(H|0)==0)v=le;else for(C=0,Se=v,Ee=H,v=le;;){if((C|0)>(x|0)){l=41;break e}if((te|0)==(v|0)&(Ee&-117440513|0)==(p|0)){le=ct(te|0,Ee|0,56)|0,He()|0,le=le&7,Ge=le+1|0,i=ct(te|0,Ee|0,45)|0,He()|0;n:do if(!($i(i&127)|0))H=7;else{if(te=ct(te|0,Ee|0,52)|0,He()|0,te=te&15,!te){H=6;break}for(H=1;;){if(i=wt(7,0,(15-H|0)*3|0)|0,!((i&v|0)==0&((He()|0)&p|0)==0)){H=7;break n}if(H>>>0<te>>>0)H=H+1|0;else{H=6;break}}}while(!1);if((le+2|0)>>>0>H>>>0){l=51;break e}i=wt(Ge|0,0,56)|0,p=He()|0|p&-117440513,H=V,t[H>>2]=0,t[H+4>>2]=0,H=Se,v=i|v}else H=(Se+1|0)%(x|0)|0;if(V=F+(H<<3)|0,Ee=V,te=t[Ee>>2]|0,Ee=t[Ee+4>>2]|0,(te|0)==0&(Ee|0)==0)break;C=C+1|0,Se=H}i=V,t[i>>2]=v,t[i+4>>2]=p}if(R=R+1|0,(R|0)>=(x|0))break t;v=s+(R<<3)|0,p=t[v>>2]|0,v=t[v+4>>2]|0}for(R=0,p=pe,v=N;;){if(!((p|0)==0&(v|0)==0)){if(H=ct(p|0,v|0,52)|0,He()|0,H=H&15,(H|0)>=(B|0)){if((H|0)!=(B|0)&&(p=p|C,v=v&-15728641|i,H>>>0>=E>>>0)){V=B;do Se=wt(7,0,(14-V|0)*3|0)|0,V=V+1|0,p=Se|p,v=He()|0|v;while(V>>>0<H>>>0)}}else p=0,v=0;if(H=Hr(p|0,v|0,x|0,h|0)|0,He()|0,V=F+(H<<3)|0,te=V,le=t[te>>2]|0,te=t[te+4>>2]|0,!((le|0)==0&(te|0)==0))for(Se=0;;){if((Se|0)>(x|0)){l=41;break e}if((le|0)==(p|0)&(te&-117440513|0)==(v|0)){Ge=ct(le|0,te|0,56)|0,He()|0,Ge=Ge&7,Ee=Ge+1|0,f=ct(le|0,te|0,45)|0,He()|0;n:do if(!($i(f&127)|0))te=7;else{if(le=ct(le|0,te|0,52)|0,He()|0,le=le&15,!le){te=6;break}for(te=1;;){if(f=wt(7,0,(15-te|0)*3|0)|0,!((f&p|0)==0&((He()|0)&v|0)==0)){te=7;break n}if(te>>>0<le>>>0)te=te+1|0;else{te=6;break}}}while(!1);if((Ge+2|0)>>>0>te>>>0){l=51;break e}f=wt(Ee|0,0,56)|0,v=He()|0|v&-117440513,Ee=V,t[Ee>>2]=0,t[Ee+4>>2]=0,p=f|p}else H=(H+1|0)%(x|0)|0;if(V=F+(H<<3)|0,te=V,le=t[te>>2]|0,te=t[te+4>>2]|0,(le|0)==0&(te|0)==0)break;Se=Se+1|0}f=V,t[f>>2]=p,t[f+4>>2]=v}if(R=R+1|0,(R|0)>=(x|0))break t;v=s+(R<<3)|0,p=t[v>>2]|0,v=t[v+4>>2]|0}}while(!1);if((x+5|0)>>>0<11){l=99;break}if(i=IA((x|0)/6|0,8)|0,!i){l=58;break}t:do if(b){Se=0,Ee=0;do{if(H=F+(Se<<3)|0,p=H,R=t[p>>2]|0,p=t[p+4>>2]|0,!((R|0)==0&(p|0)==0)){te=ct(R|0,p|0,56)|0,He()|0,te=te&7,v=te+1|0,le=p&-117440513,f=ct(R|0,p|0,45)|0,He()|0;n:do if($i(f&127)|0){if(Ge=ct(R|0,p|0,52)|0,He()|0,Ge=Ge&15,Ge|0)for(V=1;;){if(f=wt(7,0,(15-V|0)*3|0)|0,!((R&f|0)==0&(le&(He()|0)|0)==0))break n;if(V>>>0<Ge>>>0)V=V+1|0;else break}p=wt(v|0,0,56)|0,R=p|R,p=He()|0|le,v=H,t[v>>2]=R,t[v+4>>2]=p,v=te+2|0}while(!1);(v|0)==7&&(f=i+(Ee<<3)|0,t[f>>2]=R,t[f+4>>2]=p&-117440513,Ee=Ee+1|0)}Se=Se+1|0}while((Se|0)!=(x|0));if(b){if(C=((x|0)<0)<<31>>31,Ge=wt(B|0,0,52)|0,Se=He()|0,B>>>0>15)for(p=0,R=0;;){do if(!((pe|0)==0&(N|0)==0)){for(te=ct(pe|0,N|0,52)|0,He()|0,te=te&15,V=(te|0)<(B|0),te=(te|0)==(B|0),H=V?0:te?pe:0,te=V?0:te?N:0,V=Hr(H|0,te|0,x|0,C|0)|0,He()|0,v=0;;){if((v|0)>(x|0)){l=98;break e}if(f=F+(V<<3)|0,le=t[f+4>>2]|0,(le&-117440513|0)==(te|0)&&(t[f>>2]|0)==(H|0)){l=70;break}if(V=(V+1|0)%(x|0)|0,f=F+(V<<3)|0,(t[f>>2]|0)==(H|0)&&(t[f+4>>2]|0)==(te|0))break;v=v+1|0}if((l|0)==70&&(l=0,!0&(le&117440512|0)==100663296))break;f=y+(R<<3)|0,t[f>>2]=pe,t[f+4>>2]=N,R=R+1|0}while(!1);if(p=p+1|0,(p|0)>=(x|0)){x=Ee;break t}N=s+(p<<3)|0,pe=t[N>>2]|0,N=t[N+4>>2]|0}for(p=0,R=0;;){do if(!((pe|0)==0&(N|0)==0)){if(te=ct(pe|0,N|0,52)|0,He()|0,te=te&15,(te|0)>=(B|0))if((te|0)!=(B|0))if(v=pe|Ge,V=N&-15728641|Se,te>>>0<E>>>0)te=V;else{H=B;do f=wt(7,0,(14-H|0)*3|0)|0,H=H+1|0,v=f|v,V=He()|0|V;while(H>>>0<te>>>0);te=V}else v=pe,te=N;else v=0,te=0;for(H=Hr(v|0,te|0,x|0,C|0)|0,He()|0,V=0;;){if((V|0)>(x|0)){l=98;break e}if(f=F+(H<<3)|0,le=t[f+4>>2]|0,(le&-117440513|0)==(te|0)&&(t[f>>2]|0)==(v|0)){l=93;break}if(H=(H+1|0)%(x|0)|0,f=F+(H<<3)|0,(t[f>>2]|0)==(v|0)&&(t[f+4>>2]|0)==(te|0))break;V=V+1|0}if((l|0)==93&&(l=0,!0&(le&117440512|0)==100663296))break;f=y+(R<<3)|0,t[f>>2]=pe,t[f+4>>2]=N,R=R+1|0}while(!1);if(p=p+1|0,(p|0)>=(x|0)){x=Ee;break t}N=s+(p<<3)|0,pe=t[N>>2]|0,N=t[N+4>>2]|0}}else R=0,x=Ee}else R=0,x=0;while(!1);if(Mi(F|0,0,A|0)|0,qo(s|0,i|0,x<<3|0)|0,Tn(i),x)y=y+(R<<3)|0;else break}return(l|0)==41?(Tn(s),Tn(F),f=-1,f|0):(l|0)==51?(Tn(s),Tn(F),f=-2,f|0):(l|0)==58?(Tn(s),Tn(F),f=-3,f|0):(l|0)==98?(Tn(i),Tn(s),Tn(F),f=-1,f|0):((l|0)==99&&qo(y|0,s|0,x<<3|0)|0,Tn(s),Tn(F),f=0,f|0)}function Bs(p,y,v,x,R){p=p|0,y=y|0,v=v|0,x=x|0,R=R|0;var V=0,N=0,H=0,te=0,le=0,pe=0;if((y|0)<=0)return R=0,R|0;if((R|0)>=16){for(V=0;;){if(pe=p+(V<<3)|0,!((t[pe>>2]|0)==0&(t[pe+4>>2]|0)==0)){V=14;break}if(V=V+1|0,(V|0)>=(y|0)){N=0,V=16;break}}if((V|0)==14)return((x|0)>0?-2:-1)|0;if((V|0)==16)return N|0}V=0,pe=0;e:for(;;){le=p+(pe<<3)|0,H=le,N=t[H>>2]|0,H=t[H+4>>2]|0;do if(!((N|0)==0&(H|0)==0)){if((V|0)>=(x|0)){N=-1,V=16;break e}if(te=ct(N|0,H|0,52)|0,He()|0,te=te&15,(te|0)>(R|0)){N=-2,V=16;break e}if((te|0)==(R|0)){le=v+(V<<3)|0,t[le>>2]=N,t[le+4>>2]=H,V=V+1|0;break}if(N=(yA(7,R-te|0)|0)+V|0,(N|0)>(x|0)){N=-1,V=16;break e}qr(t[le>>2]|0,t[le+4>>2]|0,R,v+(V<<3)|0),V=N}while(!1);if(pe=pe+1|0,(pe|0)>=(y|0)){N=0,V=16;break}}return(V|0)==16?N|0:0}function uo(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,V=0,N=0;if((y|0)<=0)return v=0,v|0;if((v|0)>=16){for(x=0;;){if(N=p+(x<<3)|0,!((t[N>>2]|0)==0&(t[N+4>>2]|0)==0)){x=-1,R=13;break}if(x=x+1|0,(x|0)>=(y|0)){x=0,R=13;break}}if((R|0)==13)return x|0}x=0,N=0;e:for(;;){R=p+(N<<3)|0,V=t[R>>2]|0,R=t[R+4>>2]|0;do if(!((V|0)==0&(R|0)==0)){if(R=ct(V|0,R|0,52)|0,He()|0,R=R&15,(R|0)>(v|0)){x=-1,R=13;break e}if((R|0)==(v|0)){x=x+1|0;break}else{x=(yA(7,v-R|0)|0)+x|0;break}}while(!1);if(N=N+1|0,(N|0)>=(y|0)){R=13;break}}return(R|0)==13?x|0:0}function Qa(p,y){return p=p|0,y=y|0,y=ct(p|0,y|0,52)|0,He()|0,y&1|0}function Rr(p,y){p=p|0,y=y|0;var v=0,x=0,R=0;if(R=ct(p|0,y|0,52)|0,He()|0,R=R&15,!R)return R=0,R|0;for(x=1;;){if(v=ct(p|0,y|0,(15-x|0)*3|0)|0,He()|0,v=v&7,v|0){x=5;break}if(x>>>0<R>>>0)x=x+1|0;else{v=0,x=5;break}}return(x|0)==5?v|0:0}function Tr(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0,N=0,H=0,te=0;if(te=ct(p|0,y|0,52)|0,He()|0,te=te&15,!te)return H=y,te=p,Ln(H|0),te|0;for(H=1,v=0;;){V=(15-H|0)*3|0,x=wt(7,0,V|0)|0,R=He()|0,N=ct(p|0,y|0,V|0)|0,He()|0,V=wt(zr(N&7)|0,0,V|0)|0,N=He()|0,p=V|p&~x,y=N|y&~R;e:do if(!v)if((V&x|0)==0&(N&R|0)==0)v=0;else if(x=ct(p|0,y|0,52)|0,He()|0,x=x&15,!x)v=1;else{v=1;t:for(;;){switch(N=ct(p|0,y|0,(15-v|0)*3|0)|0,He()|0,N&7){case 1:break t;case 0:break;default:{v=1;break e}}if(v>>>0<x>>>0)v=v+1|0;else{v=1;break e}}for(v=1;;)if(N=(15-v|0)*3|0,R=ct(p|0,y|0,N|0)|0,He()|0,V=wt(7,0,N|0)|0,y=y&~(He()|0),N=wt(zr(R&7)|0,0,N|0)|0,p=p&~V|N,y=y|(He()|0),v>>>0<x>>>0)v=v+1|0;else{v=1;break}}while(!1);if(H>>>0<te>>>0)H=H+1|0;else break}return Ln(y|0),p|0}function mA(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0,N=0;if(x=ct(p|0,y|0,52)|0,He()|0,x=x&15,!x)return v=y,x=p,Ln(v|0),x|0;for(v=1;V=(15-v|0)*3|0,N=ct(p|0,y|0,V|0)|0,He()|0,R=wt(7,0,V|0)|0,y=y&~(He()|0),V=wt(zr(N&7)|0,0,V|0)|0,p=V|p&~R,y=He()|0|y,v>>>0<x>>>0;)v=v+1|0;return Ln(y|0),p|0}function GA(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0,N=0,H=0,te=0;if(te=ct(p|0,y|0,52)|0,He()|0,te=te&15,!te)return H=y,te=p,Ln(H|0),te|0;for(H=1,v=0;;){V=(15-H|0)*3|0,x=wt(7,0,V|0)|0,R=He()|0,N=ct(p|0,y|0,V|0)|0,He()|0,V=wt(dr(N&7)|0,0,V|0)|0,N=He()|0,p=V|p&~x,y=N|y&~R;e:do if(!v)if((V&x|0)==0&(N&R|0)==0)v=0;else if(x=ct(p|0,y|0,52)|0,He()|0,x=x&15,!x)v=1;else{v=1;t:for(;;){switch(N=ct(p|0,y|0,(15-v|0)*3|0)|0,He()|0,N&7){case 1:break t;case 0:break;default:{v=1;break e}}if(v>>>0<x>>>0)v=v+1|0;else{v=1;break e}}for(v=1;;)if(R=(15-v|0)*3|0,V=wt(7,0,R|0)|0,N=y&~(He()|0),y=ct(p|0,y|0,R|0)|0,He()|0,y=wt(dr(y&7)|0,0,R|0)|0,p=p&~V|y,y=N|(He()|0),v>>>0<x>>>0)v=v+1|0;else{v=1;break}}while(!1);if(H>>>0<te>>>0)H=H+1|0;else break}return Ln(y|0),p|0}function _i(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0,N=0;if(x=ct(p|0,y|0,52)|0,He()|0,x=x&15,!x)return v=y,x=p,Ln(v|0),x|0;for(v=1;N=(15-v|0)*3|0,V=wt(7,0,N|0)|0,R=y&~(He()|0),y=ct(p|0,y|0,N|0)|0,He()|0,y=wt(dr(y&7)|0,0,N|0)|0,p=y|p&~V,y=He()|0|R,v>>>0<x>>>0;)v=v+1|0;return Ln(y|0),p|0}function qA(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0,N=0,H=0,te=0,le=0,pe=0;if(te=Be,Be=Be+64|0,H=te+40|0,x=te+24|0,R=te+12|0,V=te,wt(y|0,0,52)|0,v=He()|0|134225919,!y)return(t[p+4>>2]|0)>2||(t[p+8>>2]|0)>2||(t[p+12>>2]|0)>2?(N=0,H=0,Ln(N|0),Be=te,H|0):(wt(Ri(p)|0,0,45)|0,N=He()|0|v,H=-1,Ln(N|0),Be=te,H|0);if(t[H>>2]=t[p>>2],t[H+4>>2]=t[p+4>>2],t[H+8>>2]=t[p+8>>2],t[H+12>>2]=t[p+12>>2],N=H+4|0,(y|0)>0)for(p=-1;t[x>>2]=t[N>>2],t[x+4>>2]=t[N+4>>2],t[x+8>>2]=t[N+8>>2],y&1?(Do(N),t[R>>2]=t[N>>2],t[R+4>>2]=t[N+4>>2],t[R+8>>2]=t[N+8>>2],Po(R)):(ss(N),t[R>>2]=t[N>>2],t[R+4>>2]=t[N+4>>2],t[R+8>>2]=t[N+8>>2],Xi(R)),fr(x,R,V),Rn(V),pe=(15-y|0)*3|0,le=wt(7,0,pe|0)|0,v=v&~(He()|0),pe=wt(qs(V)|0,0,pe|0)|0,p=pe|p&~le,v=He()|0|v,(y|0)>1;)y=y+-1|0;else p=-1;e:do if((t[N>>2]|0)<=2&&(t[H+8>>2]|0)<=2&&(t[H+12>>2]|0)<=2){if(x=Ri(H)|0,y=wt(x|0,0,45)|0,y=y|p,p=He()|0|v&-1040385,V=Oa(H)|0,!($i(x)|0)){if((V|0)<=0)break;for(R=0;;){if(x=ct(y|0,p|0,52)|0,He()|0,x=x&15,x)for(v=1;pe=(15-v|0)*3|0,H=ct(y|0,p|0,pe|0)|0,He()|0,le=wt(7,0,pe|0)|0,p=p&~(He()|0),pe=wt(zr(H&7)|0,0,pe|0)|0,y=y&~le|pe,p=p|(He()|0),v>>>0<x>>>0;)v=v+1|0;if(R=R+1|0,(R|0)==(V|0))break e}}R=ct(y|0,p|0,52)|0,He()|0,R=R&15;t:do if(R){v=1;n:for(;;){switch(pe=ct(y|0,p|0,(15-v|0)*3|0)|0,He()|0,pe&7){case 1:break n;case 0:break;default:break t}if(v>>>0<R>>>0)v=v+1|0;else break t}if(sl(x,t[H>>2]|0)|0)for(v=1;H=(15-v|0)*3|0,le=wt(7,0,H|0)|0,pe=p&~(He()|0),p=ct(y|0,p|0,H|0)|0,He()|0,p=wt(dr(p&7)|0,0,H|0)|0,y=y&~le|p,p=pe|(He()|0),v>>>0<R>>>0;)v=v+1|0;else for(v=1;pe=(15-v|0)*3|0,H=ct(y|0,p|0,pe|0)|0,He()|0,le=wt(7,0,pe|0)|0,p=p&~(He()|0),pe=wt(zr(H&7)|0,0,pe|0)|0,y=y&~le|pe,p=p|(He()|0),v>>>0<R>>>0;)v=v+1|0}while(!1);if((V|0)>0){v=0;do y=Tr(y,p)|0,p=He()|0,v=v+1|0;while((v|0)!=(V|0))}}else y=0,p=0;while(!1);return le=p,pe=y,Ln(le|0),Be=te,pe|0}function Di(p){return p=p|0,(p|0)%2|0|0}function co(p,y){p=p|0,y=y|0;var v=0,x=0;return x=Be,Be=Be+16|0,v=x,y>>>0<=15&&(t[p+4>>2]&2146435072|0)!=2146435072&&(t[p+8+4>>2]&2146435072|0)!=2146435072?(su(p,y,v),y=qA(v,y)|0,p=He()|0):(p=0,y=0),Ln(p|0),Be=x,y|0}function gA(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,V=0,N=0;if(R=v+4|0,V=ct(p|0,y|0,52)|0,He()|0,V=V&15,N=ct(p|0,y|0,45)|0,He()|0,x=(V|0)==0,$i(N&127)|0){if(x)return N=1,N|0;x=1}else{if(x)return N=0,N|0;!(t[R>>2]|0)&&!(t[v+8>>2]|0)?x=(t[v+12>>2]|0)!=0&1:x=1}for(v=1;v&1?Po(R):Xi(R),N=ct(p|0,y|0,(15-v|0)*3|0)|0,He()|0,lo(R,N&7),v>>>0<V>>>0;)v=v+1|0;return x|0}function Fr(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,V=0,N=0,H=0,te=0,le=0,pe=0;pe=Be,Be=Be+16|0,te=pe,le=ct(p|0,y|0,45)|0,He()|0,le=le&127;e:do if($i(le)|0&&(V=ct(p|0,y|0,52)|0,He()|0,V=V&15,(V|0)!=0)){x=1;t:for(;;){switch(H=ct(p|0,y|0,(15-x|0)*3|0)|0,He()|0,H&7){case 5:break t;case 0:break;default:{x=y;break e}}if(x>>>0<V>>>0)x=x+1|0;else{x=y;break e}}for(R=1,x=y;y=(15-R|0)*3|0,N=wt(7,0,y|0)|0,H=x&~(He()|0),x=ct(p|0,x|0,y|0)|0,He()|0,x=wt(dr(x&7)|0,0,y|0)|0,p=p&~N|x,x=H|(He()|0),R>>>0<V>>>0;)R=R+1|0}else x=y;while(!1);if(H=7728+(le*28|0)|0,t[v>>2]=t[H>>2],t[v+4>>2]=t[H+4>>2],t[v+8>>2]=t[H+8>>2],t[v+12>>2]=t[H+12>>2],!(gA(p,x,v)|0)){Be=pe;return}if(N=v+4|0,t[te>>2]=t[N>>2],t[te+4>>2]=t[N+4>>2],t[te+8>>2]=t[N+8>>2],V=ct(p|0,x|0,52)|0,He()|0,H=V&15,V&1?(Xi(N),V=H+1|0):V=H,!($i(le)|0))x=0;else{e:do if(!H)x=0;else for(y=1;;){if(R=ct(p|0,x|0,(15-y|0)*3|0)|0,He()|0,R=R&7,R|0){x=R;break e}if(y>>>0<H>>>0)y=y+1|0;else{x=0;break}}while(!1);x=(x|0)==4&1}if(!(Is(v,V,x,0)|0))(V|0)!=(H|0)&&(t[N>>2]=t[te>>2],t[N+4>>2]=t[te+4>>2],t[N+8>>2]=t[te+8>>2]);else{if($i(le)|0)do;while(Is(v,V,0,0)|0);(V|0)!=(H|0)&&ss(N)}Be=pe}function Zr(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0;x=Be,Be=Be+16|0,R=x,Fr(p,y,R),y=ct(p|0,y|0,52)|0,He()|0,Va(R,y&15,v),Be=x}function ZA(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,V=0,N=0,H=0;N=Be,Be=Be+16|0,V=N,Fr(p,y,V),x=ct(p|0,y|0,45)|0,He()|0,x=($i(x&127)|0)==0,R=ct(p|0,y|0,52)|0,He()|0,R=R&15;e:do if(!x){if(R|0)for(x=1;;){if(H=wt(7,0,(15-x|0)*3|0)|0,!((H&p|0)==0&((He()|0)&y|0)==0))break e;if(x>>>0<R>>>0)x=x+1|0;else break}UA(V,R,0,5,v),Be=N;return}while(!1);QA(V,R,0,6,v),Be=N}function No(p,y){p=p|0,y=y|0;var v=0,x=0,R=0;if(x=ct(p|0,y|0,45)|0,He()|0,!($i(x&127)|0))return x=2,x|0;if(x=ct(p|0,y|0,52)|0,He()|0,x=x&15,!x)return x=5,x|0;for(v=1;;){if(R=wt(7,0,(15-v|0)*3|0)|0,!((R&p|0)==0&((He()|0)&y|0)==0)){v=2,p=6;break}if(v>>>0<x>>>0)v=v+1|0;else{v=5,p=6;break}}return(p|0)==6?v|0:0}function Ga(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,V=0,N=0,H=0,te=0,le=0,pe=0,Ge=0;Ge=Be,Be=Be+128|0,le=Ge+112|0,V=Ge+96|0,pe=Ge,R=ct(p|0,y|0,52)|0,He()|0,H=R&15,t[le>>2]=H,N=ct(p|0,y|0,45)|0,He()|0,N=N&127;e:do if($i(N)|0){if(H|0)for(x=1;;){if(te=wt(7,0,(15-x|0)*3|0)|0,!((te&p|0)==0&((He()|0)&y|0)==0)){R=0;break e}if(x>>>0<H>>>0)x=x+1|0;else break}if(R&1)R=1;else{te=wt(H+1|0,0,52)|0,pe=He()|0|y&-15728641,le=wt(7,0,(14-H|0)*3|0)|0,Ga((te|p)&~le,pe&~(He()|0),v),Be=Ge;return}}else R=0;while(!1);Fr(p,y,V),R?(ls(V,le,pe),te=5):(us(V,le,pe),te=6);e:do if($i(N)|0)if(!H)x=20;else for(x=1;;){if(N=wt(7,0,(15-x|0)*3|0)|0,!((N&p|0)==0&((He()|0)&y|0)==0)){x=8;break e}if(x>>>0<H>>>0)x=x+1|0;else{x=20;break}}else x=8;while(!1);if(Mi(v|0,-1,x|0)|0,R){R=0;do{for(V=pe+(R<<4)|0,Ki(V,t[le>>2]|0)|0,V=t[V>>2]|0,x=0;N=v+(x<<2)|0,H=t[N>>2]|0,!((H|0)==-1|(H|0)==(V|0));)x=x+1|0;t[N>>2]=V,R=R+1|0}while((R|0)!=(te|0))}else{R=0;do{for(V=pe+(R<<4)|0,Is(V,t[le>>2]|0,0,1)|0,V=t[V>>2]|0,x=0;N=v+(x<<2)|0,H=t[N>>2]|0,!((H|0)==-1|(H|0)==(V|0));)x=x+1|0;t[N>>2]=V,R=R+1|0}while((R|0)!=(te|0))}Be=Ge}function ul(){return 12}function Ys(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0,N=0,H=0,te=0;if(wt(p|0,0,52)|0,H=He()|0|134225919,(p|0)<1){x=0,v=0;do $i(x)|0&&(wt(x|0,0,45)|0,N=H|(He()|0),p=y+(v<<3)|0,t[p>>2]=-1,t[p+4>>2]=N,v=v+1|0),x=x+1|0;while((x|0)!=122);return}N=0,v=0;do{if($i(N)|0){for(wt(N|0,0,45)|0,x=1,R=-1,V=H|(He()|0);te=wt(7,0,(15-x|0)*3|0)|0,R=R&~te,V=V&~(He()|0),(x|0)!=(p|0);)x=x+1|0;te=y+(v<<3)|0,t[te>>2]=R,t[te+4>>2]=V,v=v+1|0}N=N+1|0}while((N|0)!=122)}function _A(p,y,v,x){p=p|0,y=y|0,v=v|0,x=x|0;var R=0,V=0,N=0,H=0,te=0,le=0;if(H=Be,Be=Be+64|0,N=H,(p|0)==(v|0)&(y|0)==(x|0)|(!1|(y&2013265920|0)!=134217728|(!1|(x&2013265920|0)!=134217728))||(R=ct(p|0,y|0,52)|0,He()|0,R=R&15,V=ct(v|0,x|0,52)|0,He()|0,(R|0)!=(V&15|0)))return N=0,Be=H,N|0;if(V=R+-1|0,R>>>0>1&&(le=Ws(p,y,V)|0,te=He()|0,V=Ws(v,x,V)|0,(le|0)==(V|0)&(te|0)==(He()|0))&&(V=(R^15)*3|0,R=ct(p|0,y|0,V|0)|0,He()|0,R=R&7,V=ct(v|0,x|0,V|0)|0,He()|0,V=V&7,(R|0)==0|(V|0)==0||(t[21136+(R<<2)>>2]|0)==(V|0)||(t[21168+(R<<2)>>2]|0)==(V|0)))return le=1,Be=H,le|0;R=N,V=R+56|0;do t[R>>2]=0,R=R+4|0;while((R|0)<(V|0));return As(p,y,1,N),le=N,!((t[le>>2]|0)==(v|0)&&(t[le+4>>2]|0)==(x|0))&&(le=N+8|0,!((t[le>>2]|0)==(v|0)&&(t[le+4>>2]|0)==(x|0)))&&(le=N+16|0,!((t[le>>2]|0)==(v|0)&&(t[le+4>>2]|0)==(x|0)))&&(le=N+24|0,!((t[le>>2]|0)==(v|0)&&(t[le+4>>2]|0)==(x|0)))&&(le=N+32|0,!((t[le>>2]|0)==(v|0)&&(t[le+4>>2]|0)==(x|0)))&&(le=N+40|0,!((t[le>>2]|0)==(v|0)&&(t[le+4>>2]|0)==(x|0)))?(R=N+48|0,R=((t[R>>2]|0)==(v|0)?(t[R+4>>2]|0)==(x|0):0)&1):R=1,le=R,Be=H,le|0}function ot(p,y,v,x){p=p|0,y=y|0,v=v|0,x=x|0;var R=0,V=0,N=0,H=0,te=0,le=0,pe=0;if(le=Be,Be=Be+16|0,N=le,!(_A(p,y,v,x)|0))return H=0,te=0,Ln(H|0),Be=le,te|0;for(H=y&-2130706433,R=(Mr(p,y)|0)==0,R=R?1:2;t[N>>2]=0,pe=Hi(p,y,R,N)|0,V=R+1|0,!((pe|0)==(v|0)&(He()|0)==(x|0));)if(V>>>0<7)R=V;else{R=0,p=0,te=6;break}return(te|0)==6?(Ln(R|0),Be=le,p|0):(pe=wt(R|0,0,56)|0,te=H|(He()|0)|268435456,pe=p|pe,Ln(te|0),Be=le,pe|0)}function vt(p,y){p=p|0,y=y|0;var v=0;return v=!0&(y&2013265920|0)==268435456,Ln((v?y&-2130706433|134217728:0)|0),(v?p:0)|0}function mt(p,y){p=p|0,y=y|0;var v=0,x=0,R=0;return x=Be,Be=Be+16|0,v=x,!0&(y&2013265920|0)==268435456?(R=ct(p|0,y|0,56)|0,He()|0,t[v>>2]=0,v=Hi(p,y&-2130706433|134217728,R&7,v)|0,y=He()|0,Ln(y|0),Be=x,v|0):(y=0,v=0,Ln(y|0),Be=x,v|0)}function An(p,y){p=p|0,y=y|0;var v=0;if(!(!0&(y&2013265920|0)==268435456))return v=0,v|0;switch(v=ct(p|0,y|0,56)|0,He()|0,v&7){case 0:case 7:return v=0,v|0}return v=y&-2130706433|134217728,!0&(y&117440512|0)==16777216&(Mr(p,v)|0)!=0?(v=0,v|0):(v=cs(p,v)|0,v|0)}function Fn(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,V=0,N=0,H=0;V=Be,Be=Be+16|0,x=V,N=!0&(y&2013265920|0)==268435456,R=y&-2130706433|134217728,H=v,t[H>>2]=N?p:0,t[H+4>>2]=N?R:0,N?(y=ct(p|0,y|0,56)|0,He()|0,t[x>>2]=0,p=Hi(p,R,y&7,x)|0,y=He()|0):(p=0,y=0),H=v+8|0,t[H>>2]=p,t[H+4>>2]=y,Be=V}function wi(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0;R=(Mr(p,y)|0)==0,y=y&-2130706433,x=v,t[x>>2]=R?p:0,t[x+4>>2]=R?y|285212672:0,x=v+8|0,t[x>>2]=p,t[x+4>>2]=y|301989888,x=v+16|0,t[x>>2]=p,t[x+4>>2]=y|318767104,x=v+24|0,t[x>>2]=p,t[x+4>>2]=y|335544320,x=v+32|0,t[x>>2]=p,t[x+4>>2]=y|352321536,v=v+40|0,t[v>>2]=p,t[v+4>>2]=y|369098752}function sr(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,V=0,N=0,H=0;if(N=Be,Be=Be+16|0,V=N,x=ct(p|0,y|0,56)|0,He()|0,H=!0&(y&2013265920|0)==268435456,R=H?p:0,p=H?y&-2130706433|134217728:0,y=fl(R,p,x&7)|0,(y|0)==-1){t[v>>2]=0,Be=N;return}Fr(R,p,V),x=ct(R|0,p|0,52)|0,He()|0,x=x&15,Mr(R,p)|0?UA(V,x,y,2,v):QA(V,x,y,2,v),Be=N}function Oi(p){p=p|0;var y=0,v=0,x=0;return y=IA(1,12)|0,y||Xt(22691,22646,49,22704),v=p+4|0,x=t[v>>2]|0,x|0?(x=x+8|0,t[x>>2]=y,t[v>>2]=y,y|0):(t[p>>2]|0&&Xt(22721,22646,61,22744),x=p,t[x>>2]=y,t[v>>2]=y,y|0)}function HA(p,y){p=p|0,y=y|0;var v=0,x=0;return x=Vr(24)|0,x||Xt(22758,22646,78,22772),t[x>>2]=t[y>>2],t[x+4>>2]=t[y+4>>2],t[x+8>>2]=t[y+8>>2],t[x+12>>2]=t[y+12>>2],t[x+16>>2]=0,y=p+4|0,v=t[y>>2]|0,v|0?(t[v+16>>2]=x,t[y>>2]=x,x|0):(t[p>>2]|0&&Xt(22787,22646,82,22772),t[p>>2]=x,t[y>>2]=x,x|0)}function qa(p){p=p|0;var y=0,v=0,x=0,R=0;if(p)for(x=1;;){if(y=t[p>>2]|0,y|0)do{if(v=t[y>>2]|0,v|0)do R=v,v=t[v+16>>2]|0,Tn(R);while(v|0);R=y,y=t[y+8>>2]|0,Tn(R)}while(y|0);if(y=p,p=t[p+8>>2]|0,x||Tn(y),p)x=0;else break}}function er(p){p=p|0;var y=0,v=0,x=0,R=0,V=0,N=0,H=0,te=0,le=0,pe=0,Ge=0,Ee=0,Se=0,C=0,i=0,h=0,b=0,E=0,B=0,F=0,A=0,s=0,l=0,f=0,m=0,k=0,I=0,D=0,Q=0,Z=0,X=0,ie=0;if(R=p+8|0,t[R>>2]|0)return ie=1,ie|0;if(x=t[p>>2]|0,!x)return ie=0,ie|0;y=x,v=0;do v=v+1|0,y=t[y+8>>2]|0;while(y|0);if(v>>>0<2)return ie=0,ie|0;Z=Vr(v<<2)|0,Z||Xt(22807,22646,317,22826),Q=Vr(v<<5)|0,Q||Xt(22848,22646,321,22826),t[p>>2]=0,s=p+4|0,t[s>>2]=0,t[R>>2]=0,v=0,D=0,A=0,Ge=0;e:for(;;){if(pe=t[x>>2]|0,pe){V=0,N=pe;do{if(te=+K[N+8>>3],y=N,N=t[N+16>>2]|0,le=(N|0)==0,R=le?pe:N,H=+K[R+8>>3],+en(+(te-H))>3.141592653589793){ie=14;break}V=V+(H-te)*(+K[y>>3]+ +K[R>>3])}while(!le);if((ie|0)==14){ie=0,V=0,y=pe;do F=+K[y+8>>3],I=y+16|0,k=t[I>>2]|0,k=k|0?k:pe,B=+K[k+8>>3],V=V+(+K[y>>3]+ +K[k>>3])*((B<0?B+6.283185307179586:B)-(F<0?F+6.283185307179586:F)),y=t[(y|0?I:x)>>2]|0;while(y|0)}V>0?(t[Z+(D<<2)>>2]=x,D=D+1|0,R=A,y=Ge):ie=19}else ie=19;if((ie|0)==19){ie=0;do if(v){if(y=v+8|0,t[y>>2]|0){ie=21;break e}if(v=IA(1,12)|0,!v){ie=23;break e}t[y>>2]=v,R=v+4|0,N=v,y=Ge}else if(Ge){R=s,N=Ge+8|0,y=x,v=p;break}else if(t[p>>2]|0){ie=27;break e}else{R=s,N=p,y=x,v=p;break}while(!1);if(t[N>>2]=x,t[R>>2]=x,N=Q+(A<<5)|0,le=t[x>>2]|0,le){for(pe=Q+(A<<5)+8|0,K[pe>>3]=17976931348623157e292,Ge=Q+(A<<5)+24|0,K[Ge>>3]=17976931348623157e292,K[N>>3]=-17976931348623157e292,Ee=Q+(A<<5)+16|0,K[Ee>>3]=-17976931348623157e292,b=17976931348623157e292,E=-17976931348623157e292,R=0,Se=le,te=17976931348623157e292,i=17976931348623157e292,h=-17976931348623157e292,H=-17976931348623157e292;V=+K[Se>>3],F=+K[Se+8>>3],Se=t[Se+16>>2]|0,C=(Se|0)==0,B=+K[(C?le:Se)+8>>3],V<te&&(K[pe>>3]=V,te=V),F<i&&(K[Ge>>3]=F,i=F),V>h?K[N>>3]=V:V=h,F>H&&(K[Ee>>3]=F,H=F),b=F>0&F<b?F:b,E=F<0&F>E?F:E,R=R|+en(+(F-B))>3.141592653589793,!C;)h=V;R&&(K[Ee>>3]=E,K[Ge>>3]=b)}else t[N>>2]=0,t[N+4>>2]=0,t[N+8>>2]=0,t[N+12>>2]=0,t[N+16>>2]=0,t[N+20>>2]=0,t[N+24>>2]=0,t[N+28>>2]=0;R=A+1|0}if(I=x+8|0,x=t[I>>2]|0,t[I>>2]=0,x)A=R,Ge=y;else{ie=45;break}}if((ie|0)==21)Xt(22624,22646,35,22658);else if((ie|0)==23)Xt(22678,22646,37,22658);else if((ie|0)==27)Xt(22721,22646,61,22744);else if((ie|0)==45){e:do if((D|0)>0){for(I=(R|0)==0,m=R<<2,k=(p|0)==0,f=0,y=0;;){if(l=t[Z+(f<<2)>>2]|0,I)ie=73;else{if(A=Vr(m)|0,!A){ie=50;break}if(s=Vr(m)|0,!s){ie=52;break}t:do if(k)v=0;else{for(R=0,v=0,N=p;x=Q+(R<<5)|0,eA(t[N>>2]|0,x,t[l>>2]|0)|0?(t[A+(v<<2)>>2]=N,t[s+(v<<2)>>2]=x,C=v+1|0):C=v,N=t[N+8>>2]|0,N;)R=R+1|0,v=C;if((C|0)>0)if(x=t[A>>2]|0,(C|0)==1)v=x;else for(Ee=0,Se=-1,v=x,Ge=x;;){for(le=t[Ge>>2]|0,x=0,N=0;R=t[t[A+(N<<2)>>2]>>2]|0,(R|0)==(le|0)?pe=x:pe=x+((eA(R,t[s+(N<<2)>>2]|0,t[le>>2]|0)|0)&1)|0,N=N+1|0,(N|0)!=(C|0);)x=pe;if(R=(pe|0)>(Se|0),v=R?Ge:v,x=Ee+1|0,(x|0)==(C|0))break t;Ee=x,Se=R?pe:Se,Ge=t[A+(x<<2)>>2]|0}else v=0}while(!1);if(Tn(A),Tn(s),v){if(R=v+4|0,x=t[R>>2]|0,x)v=x+8|0;else if(t[v>>2]|0){ie=70;break}t[v>>2]=l,t[R>>2]=l}else ie=73}if((ie|0)==73){if(ie=0,y=t[l>>2]|0,y|0)do s=y,y=t[y+16>>2]|0,Tn(s);while(y|0);Tn(l),y=2}if(f=f+1|0,(f|0)>=(D|0)){X=y;break e}}(ie|0)==50?Xt(22863,22646,249,22882):(ie|0)==52?Xt(22901,22646,252,22882):(ie|0)==70&&Xt(22721,22646,61,22744)}else X=0;while(!1);return Tn(Z),Tn(Q),ie=X,ie|0}return 0}function eA(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,V=0,N=0,H=0,te=0,le=0,pe=0;if(!(ma(y,v)|0)||(y=fA(y)|0,le=+K[v>>3],x=+K[v+8>>3],x=y&x<0?x+6.283185307179586:x,p=t[p>>2]|0,!p))return p=0,p|0;if(y){y=0,v=p;e:for(;;){for(;N=+K[v>>3],te=+K[v+8>>3],v=v+16|0,pe=t[v>>2]|0,pe=pe|0?pe:p,V=+K[pe>>3],R=+K[pe+8>>3],N>V?(H=N,N=te):(H=V,V=N,N=R,R=te),!!(le<V|le>H);)if(v=t[v>>2]|0,!v){v=22;break e}if(te=R<0?R+6.283185307179586:R,N=N<0?N+6.283185307179586:N,x=N==x|te==x?x+-2220446049250313e-31:x,te=te+(le-V)/(H-V)*(N-te),(te<0?te+6.283185307179586:te)>x&&(y=y^1),v=t[v>>2]|0,!v){v=22;break}}if((v|0)==22)return y|0}else{y=0,v=p;e:for(;;){for(;N=+K[v>>3],te=+K[v+8>>3],v=v+16|0,pe=t[v>>2]|0,pe=pe|0?pe:p,V=+K[pe>>3],R=+K[pe+8>>3],N>V?(H=N,N=te):(H=V,V=N,N=R,R=te),!!(le<V|le>H);)if(v=t[v>>2]|0,!v){v=22;break e}if(x=N==x|R==x?x+-2220446049250313e-31:x,R+(le-V)/(H-V)*(N-R)>x&&(y=y^1),v=t[v>>2]|0,!v){v=22;break}}if((v|0)==22)return y|0}return 0}function MA(p,y,v,x,R){p=p|0,y=y|0,v=v|0,x=x|0,R=R|0;var V=0,N=0,H=0,te=0,le=0,pe=0,Ge=0,Ee=0,Se=0,C=0,i=0,h=0,b=0,E=0;if(E=Be,Be=Be+32|0,b=E+16|0,h=E,V=ct(p|0,y|0,52)|0,He()|0,V=V&15,Se=ct(v|0,x|0,52)|0,He()|0,(V|0)!=(Se&15|0))return b=1,Be=E,b|0;if(le=ct(p|0,y|0,45)|0,He()|0,le=le&127,pe=ct(v|0,x|0,45)|0,He()|0,pe=pe&127,Se=(le|0)!=(pe|0),Se){if(H=Io(le,pe)|0,(H|0)==7)return b=2,Be=E,b|0;te=Io(pe,le)|0,(te|0)==7?Xt(22925,22949,151,22959):(C=H,N=te)}else C=0,N=0;Ge=$i(le)|0,Ee=$i(pe)|0,t[b>>2]=0,t[b+4>>2]=0,t[b+8>>2]=0,t[b+12>>2]=0;do if(C){if(pe=t[4304+(le*28|0)+(C<<2)>>2]|0,H=(pe|0)>0,Ee)if(H){le=0,te=v,H=x;do te=GA(te,H)|0,H=He()|0,N=dr(N)|0,(N|0)==1&&(N=dr(1)|0),le=le+1|0;while((le|0)!=(pe|0));pe=N,le=te,te=H}else pe=N,le=v,te=x;else if(H){le=0,te=v,H=x;do te=_i(te,H)|0,H=He()|0,N=dr(N)|0,le=le+1|0;while((le|0)!=(pe|0));pe=N,le=te,te=H}else pe=N,le=v,te=x;if(gA(le,te,b)|0,Se||Xt(22972,22949,181,22959),H=(Ge|0)!=0,N=(Ee|0)!=0,H&N&&Xt(22999,22949,182,22959),H){if(N=Rr(p,y)|0,dt[22032+(N*7|0)+C>>0]|0){V=3;break}te=t[21200+(N*28|0)+(C<<2)>>2]|0,le=te,i=26}else if(N){if(N=Rr(le,te)|0,dt[22032+(N*7|0)+pe>>0]|0){V=4;break}le=0,te=t[21200+(pe*28|0)+(N<<2)>>2]|0,i=26}else N=0;if((i|0)==26)if((te|0)<=-1&&Xt(23030,22949,212,22959),(le|0)<=-1&&Xt(23053,22949,213,22959),(te|0)>0){H=b+4|0,N=0;do os(H),N=N+1|0;while((N|0)!=(te|0));N=le}else N=le;if(t[h>>2]=0,t[h+4>>2]=0,t[h+8>>2]=0,lo(h,C),V|0)for(;Di(V)|0?Po(h):Xi(h),(V|0)>1;)V=V+-1|0;if((N|0)>0){V=0;do os(h),V=V+1|0;while((V|0)!=(N|0))}i=b+4|0,gi(i,h,i),Rn(i),i=50}else if(gA(v,x,b)|0,(Ge|0)!=0&(Ee|0)!=0)if((pe|0)!=(le|0)&&Xt(23077,22949,243,22959),N=Rr(p,y)|0,V=Rr(v,x)|0,dt[22032+(N*7|0)+V>>0]|0)V=5;else if(N=t[21200+(N*28|0)+(V<<2)>>2]|0,(N|0)>0){H=b+4|0,V=0;do os(H),V=V+1|0;while((V|0)!=(N|0));i=50}else i=50;else i=50;while(!1);return(i|0)==50&&(V=b+4|0,t[R>>2]=t[V>>2],t[R+4>>2]=t[V+4>>2],t[R+8>>2]=t[V+8>>2],V=0),b=V,Be=E,b|0}function tA(p,y,v,x){p=p|0,y=y|0,v=v|0,x=x|0;var R=0,V=0,N=0,H=0,te=0,le=0,pe=0,Ge=0,Ee=0,Se=0,C=0,i=0,h=0,b=0,E=0;if(C=Be,Be=Be+48|0,N=C+36|0,H=C+24|0,te=C+12|0,le=C,V=ct(p|0,y|0,52)|0,He()|0,V=V&15,Ee=ct(p|0,y|0,45)|0,He()|0,Ee=Ee&127,pe=$i(Ee)|0,wt(V|0,0,52)|0,h=He()|0|134225919,i=x,t[i>>2]=-1,t[i+4>>2]=h,!V)return(t[v>>2]|0)>1||(t[v+4>>2]|0)>1||(t[v+8>>2]|0)>1||(R=pa(Ee,qs(v)|0)|0,(R|0)==127)?(h=1,Be=C,h|0):(Se=wt(R|0,0,45)|0,i=He()|0,Ee=x,i=t[Ee+4>>2]&-1040385|i,h=x,t[h>>2]=t[Ee>>2]|Se,t[h+4>>2]=i,h=0,Be=C,h|0);for(t[N>>2]=t[v>>2],t[N+4>>2]=t[v+4>>2],t[N+8>>2]=t[v+8>>2];t[H>>2]=t[N>>2],t[H+4>>2]=t[N+4>>2],t[H+8>>2]=t[N+8>>2],Di(V)|0?(Do(N),t[te>>2]=t[N>>2],t[te+4>>2]=t[N+4>>2],t[te+8>>2]=t[N+8>>2],Po(te)):(ss(N),t[te>>2]=t[N>>2],t[te+4>>2]=t[N+4>>2],t[te+8>>2]=t[N+8>>2],Xi(te)),fr(H,te,le),Rn(le),i=x,b=t[i>>2]|0,i=t[i+4>>2]|0,E=(15-V|0)*3|0,v=wt(7,0,E|0)|0,i=i&~(He()|0),E=wt(qs(le)|0,0,E|0)|0,i=He()|0|i,h=x,t[h>>2]=E|b&~v,t[h+4>>2]=i,(V|0)>1;)V=V+-1|0;e:do if((t[N>>2]|0)<=1&&(t[N+4>>2]|0)<=1&&(t[N+8>>2]|0)<=1){V=qs(N)|0,H=pa(Ee,V)|0,(H|0)==127?le=0:le=$i(H)|0;t:do if(V){if(pe){if(N=21408+((Rr(p,y)|0)*28|0)+(V<<2)|0,N=t[N>>2]|0,(N|0)>0){v=0;do V=zr(V)|0,v=v+1|0;while((v|0)!=(N|0))}if((V|0)==1){R=3;break e}v=pa(Ee,V)|0,(v|0)==127&&Xt(23104,22949,376,23134),$i(v)|0?Xt(23147,22949,377,23134):(Se=N,Ge=V,R=v)}else Se=0,Ge=V,R=H;if(te=t[4304+(Ee*28|0)+(Ge<<2)>>2]|0,(te|0)<=-1&&Xt(23178,22949,384,23134),!le){if((Se|0)<=-1&&Xt(23030,22949,417,23134),Se|0){N=x,V=0,v=t[N>>2]|0,N=t[N+4>>2]|0;do v=mA(v,N)|0,N=He()|0,E=x,t[E>>2]=v,t[E+4>>2]=N,V=V+1|0;while((V|0)<(Se|0))}if((te|0)<=0){V=54;break}for(N=x,V=0,v=t[N>>2]|0,N=t[N+4>>2]|0;;)if(v=mA(v,N)|0,N=He()|0,E=x,t[E>>2]=v,t[E+4>>2]=N,V=V+1|0,(V|0)==(te|0)){V=54;break t}}if(H=Io(R,Ee)|0,(H|0)==7&&Xt(22925,22949,393,23134),V=x,v=t[V>>2]|0,V=t[V+4>>2]|0,(te|0)>0){N=0;do v=mA(v,V)|0,V=He()|0,E=x,t[E>>2]=v,t[E+4>>2]=V,N=N+1|0;while((N|0)!=(te|0))}if(v=Rr(v,V)|0,E=Fa(R)|0,v=t[(E?21824:21616)+(H*28|0)+(v<<2)>>2]|0,(v|0)<=-1&&Xt(23030,22949,412,23134),!v)V=54;else{H=x,V=0,N=t[H>>2]|0,H=t[H+4>>2]|0;do N=Tr(N,H)|0,H=He()|0,E=x,t[E>>2]=N,t[E+4>>2]=H,V=V+1|0;while((V|0)<(v|0));V=54}}else if((pe|0)!=0&(le|0)!=0)if(E=Rr(p,y)|0,V=x,V=21408+(E*28|0)+((Rr(t[V>>2]|0,t[V+4>>2]|0)|0)<<2)|0,V=t[V>>2]|0,(V|0)<=-1&&Xt(23201,22949,433,23134),!V)R=H,V=55;else{N=x,R=0,v=t[N>>2]|0,N=t[N+4>>2]|0;do v=mA(v,N)|0,N=He()|0,E=x,t[E>>2]=v,t[E+4>>2]=N,R=R+1|0;while((R|0)<(V|0));R=H,V=54}else R=H,V=54;while(!1);if((V|0)==54&&le&&(V=55),(V|0)==55&&(E=x,(Rr(t[E>>2]|0,t[E+4>>2]|0)|0)==1)){R=4;break}E=x,h=t[E>>2]|0,E=t[E+4>>2]&-1040385,b=wt(R|0,0,45)|0,E=E|(He()|0),R=x,t[R>>2]=h|b,t[R+4>>2]=E,R=0}else R=2;while(!1);return E=R,Be=C,E|0}function TA(p,y,v,x,R){p=p|0,y=y|0,v=v|0,x=x|0,R=R|0;var V=0,N=0;return N=Be,Be=Be+16|0,V=N,p=MA(p,y,v,x,V)|0,p||(Ss(V,R),p=0),Be=N,p|0}function Za(p,y,v,x){p=p|0,y=y|0,v=v|0,x=x|0;var R=0,V=0;return R=Be,Be=Be+16|0,V=R,ol(v,V),x=tA(p,y,V,x)|0,Be=R,x|0}function Ei(p,y,v,x){p=p|0,y=y|0,v=v|0,x=x|0;var R=0,V=0,N=0;return N=Be,Be=Be+32|0,R=N+12|0,V=N,!(MA(p,y,p,y,R)|0)&&!(MA(p,y,v,x,V)|0)?p=as(R,V)|0:p=-1,Be=N,p|0}function Vl(p,y,v,x){p=p|0,y=y|0,v=v|0,x=x|0;var R=0,V=0,N=0;return N=Be,Be=Be+32|0,R=N+12|0,V=N,!(MA(p,y,p,y,R)|0)&&!(MA(p,y,v,x,V)|0)?p=as(R,V)|0:p=-1,Be=N,(p>>>31^1)+p|0}function ya(p,y,v,x,R){p=p|0,y=y|0,v=v|0,x=x|0,R=R|0;var V=0,N=0,H=0,te=0,le=0,pe=0,Ge=0,Ee=0,Se=0,C=0,i=0,h=0,b=0,E=0,B=0,F=0,A=0,s=0;if(A=Be,Be=Be+48|0,V=A+24|0,N=A+12|0,F=A,!(MA(p,y,p,y,V)|0)&&!(MA(p,y,v,x,N)|0)){if(B=as(V,N)|0,(B|0)<0)return F=B,Be=A,F|0;for(t[V>>2]=0,t[V+4>>2]=0,t[V+8>>2]=0,t[N>>2]=0,t[N+4>>2]=0,t[N+8>>2]=0,MA(p,y,p,y,V)|0,MA(p,y,v,x,N)|0,Na(V),Na(N),B?(pe=t[V>>2]|0,Se=+(B|0),h=V+4|0,Ge=t[h>>2]|0,b=V+8|0,Ee=t[b>>2]|0,E=V,v=pe,x=Ge,V=Ee,C=+((t[N>>2]|0)-pe|0)/Se,i=+((t[N+4>>2]|0)-Ge|0)/Se,Se=+((t[N+8>>2]|0)-Ee|0)/Se):(x=V+4|0,Ee=V+8|0,h=x,b=Ee,E=V,v=t[V>>2]|0,x=t[x>>2]|0,V=t[Ee>>2]|0,C=0,i=0,Se=0),t[F>>2]=v,Ee=F+4|0,t[Ee>>2]=x,Ge=F+8|0,t[Ge>>2]=V,pe=0;;){te=+(pe|0),s=C*te+ +(v|0),H=i*te+ +(t[h>>2]|0),te=Se*te+ +(t[b>>2]|0),x=~~+Go(+s),N=~~+Go(+H),v=~~+Go(+te),s=+en(+(+(x|0)-s)),H=+en(+(+(N|0)-H)),te=+en(+(+(v|0)-te));do if(s>H&s>te)x=0-(N+v)|0,V=N;else if(le=0-x|0,H>te){V=le-v|0;break}else{V=N,v=le-N|0;break}while(!1);if(t[F>>2]=x,t[Ee>>2]=V,t[Ge>>2]=v,Xr(F),tA(p,y,F,R+(pe<<3)|0)|0,(pe|0)==(B|0))break;pe=pe+1|0,v=t[E>>2]|0}return F=0,Be=A,F|0}return F=-1,Be=A,F|0}function yA(p,y){p=p|0,y=y|0;var v=0;if(!y)return v=1,v|0;v=p,p=1;do p=oA(y&1|0?v:1,p)|0,y=y>>1,v=oA(v,v)|0;while(y|0);return p|0}function hs(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,V=0,N=0,H=0,te=0,le=0,pe=0,Ge=0,Ee=0;if(!(ma(y,v)|0)||(y=fA(y)|0,Ee=+K[v>>3],x=+K[v+8>>3],x=y&x<0?x+6.283185307179586:x,Ge=t[p>>2]|0,(Ge|0)<=0))return Ge=0,Ge|0;if(pe=t[p+4>>2]|0,y){y=0,v=-1,p=0;e:for(;;){for(le=p;N=+K[pe+(le<<4)>>3],te=+K[pe+(le<<4)+8>>3],p=(v+2|0)%(Ge|0)|0,V=+K[pe+(p<<4)>>3],R=+K[pe+(p<<4)+8>>3],N>V?(H=N,N=te):(H=V,V=N,N=R,R=te),!!(Ee<V|Ee>H);)if(v=le+1|0,(v|0)<(Ge|0))p=le,le=v,v=p;else{v=22;break e}if(te=R<0?R+6.283185307179586:R,N=N<0?N+6.283185307179586:N,x=N==x|te==x?x+-2220446049250313e-31:x,te=te+(Ee-V)/(H-V)*(N-te),(te<0?te+6.283185307179586:te)>x&&(y=y^1),p=le+1|0,(p|0)>=(Ge|0)){v=22;break}else v=le}if((v|0)==22)return y|0}else{y=0,v=-1,p=0;e:for(;;){for(le=p;N=+K[pe+(le<<4)>>3],te=+K[pe+(le<<4)+8>>3],p=(v+2|0)%(Ge|0)|0,V=+K[pe+(p<<4)>>3],R=+K[pe+(p<<4)+8>>3],N>V?(H=N,N=te):(H=V,V=N,N=R,R=te),!!(Ee<V|Ee>H);)if(v=le+1|0,(v|0)<(Ge|0))p=le,le=v,v=p;else{v=22;break e}if(x=N==x|R==x?x+-2220446049250313e-31:x,R+(Ee-V)/(H-V)*(N-R)>x&&(y=y^1),p=le+1|0,(p|0)>=(Ge|0)){v=22;break}else v=le}if((v|0)==22)return y|0}return 0}function on(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0,N=0,H=0,te=0,le=0,pe=0,Ge=0,Ee=0,Se=0,C=0,i=0,h=0,b=0,E=0;if(C=t[p>>2]|0,!C){t[y>>2]=0,t[y+4>>2]=0,t[y+8>>2]=0,t[y+12>>2]=0,t[y+16>>2]=0,t[y+20>>2]=0,t[y+24>>2]=0,t[y+28>>2]=0;return}if(i=y+8|0,K[i>>3]=17976931348623157e292,h=y+24|0,K[h>>3]=17976931348623157e292,K[y>>3]=-17976931348623157e292,b=y+16|0,K[b>>3]=-17976931348623157e292,!((C|0)<=0)){for(Ee=t[p+4>>2]|0,le=17976931348623157e292,pe=-17976931348623157e292,Ge=0,p=-1,V=17976931348623157e292,N=17976931348623157e292,te=-17976931348623157e292,x=-17976931348623157e292,Se=0;v=+K[Ee+(Se<<4)>>3],H=+K[Ee+(Se<<4)+8>>3],p=p+2|0,R=+K[Ee+(((p|0)==(C|0)?0:p)<<4)+8>>3],v<V&&(K[i>>3]=v,V=v),H<N&&(K[h>>3]=H,N=H),v>te?K[y>>3]=v:v=te,H>x&&(K[b>>3]=H,x=H),le=H>0&H<le?H:le,pe=H<0&H>pe?H:pe,Ge=Ge|+en(+(H-R))>3.141592653589793,p=Se+1|0,(p|0)!=(C|0);)E=Se,te=v,Se=p,p=E;Ge&&(K[b>>3]=pe,K[h>>3]=le)}}function SA(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0,N=0,H=0,te=0,le=0,pe=0,Ge=0,Ee=0,Se=0,C=0,i=0,h=0,b=0,E=0,B=0,F=0,A=0,s=0,l=0;if(C=t[p>>2]|0,C){if(i=y+8|0,K[i>>3]=17976931348623157e292,h=y+24|0,K[h>>3]=17976931348623157e292,K[y>>3]=-17976931348623157e292,b=y+16|0,K[b>>3]=-17976931348623157e292,(C|0)>0){for(R=t[p+4>>2]|0,Ee=17976931348623157e292,Se=-17976931348623157e292,x=0,v=-1,te=17976931348623157e292,le=17976931348623157e292,Ge=-17976931348623157e292,N=-17976931348623157e292,E=0;V=+K[R+(E<<4)>>3],pe=+K[R+(E<<4)+8>>3],s=v+2|0,H=+K[R+(((s|0)==(C|0)?0:s)<<4)+8>>3],V<te&&(K[i>>3]=V,te=V),pe<le&&(K[h>>3]=pe,le=pe),V>Ge?K[y>>3]=V:V=Ge,pe>N&&(K[b>>3]=pe,N=pe),Ee=pe>0&pe<Ee?pe:Ee,Se=pe<0&pe>Se?pe:Se,x=x|+en(+(pe-H))>3.141592653589793,v=E+1|0,(v|0)!=(C|0);)s=E,Ge=V,E=v,v=s;x&&(K[b>>3]=Se,K[h>>3]=Ee)}}else t[y>>2]=0,t[y+4>>2]=0,t[y+8>>2]=0,t[y+12>>2]=0,t[y+16>>2]=0,t[y+20>>2]=0,t[y+24>>2]=0,t[y+28>>2]=0;if(s=p+8|0,v=t[s>>2]|0,!((v|0)<=0)){A=p+12|0,F=0;do if(R=t[A>>2]|0,x=F,F=F+1|0,h=y+(F<<5)|0,b=t[R+(x<<3)>>2]|0,b){if(E=y+(F<<5)+8|0,K[E>>3]=17976931348623157e292,p=y+(F<<5)+24|0,K[p>>3]=17976931348623157e292,K[h>>3]=-17976931348623157e292,B=y+(F<<5)+16|0,K[B>>3]=-17976931348623157e292,(b|0)>0){for(C=t[R+(x<<3)+4>>2]|0,Ee=17976931348623157e292,Se=-17976931348623157e292,R=0,x=-1,i=0,te=17976931348623157e292,le=17976931348623157e292,pe=-17976931348623157e292,N=-17976931348623157e292;V=+K[C+(i<<4)>>3],Ge=+K[C+(i<<4)+8>>3],x=x+2|0,H=+K[C+(((x|0)==(b|0)?0:x)<<4)+8>>3],V<te&&(K[E>>3]=V,te=V),Ge<le&&(K[p>>3]=Ge,le=Ge),V>pe?K[h>>3]=V:V=pe,Ge>N&&(K[B>>3]=Ge,N=Ge),Ee=Ge>0&Ge<Ee?Ge:Ee,Se=Ge<0&Ge>Se?Ge:Se,R=R|+en(+(Ge-H))>3.141592653589793,x=i+1|0,(x|0)!=(b|0);)l=i,i=x,pe=V,x=l;R&&(K[B>>3]=Se,K[p>>3]=Ee)}}else t[h>>2]=0,t[h+4>>2]=0,t[h+8>>2]=0,t[h+12>>2]=0,t[h+16>>2]=0,t[h+20>>2]=0,t[h+24>>2]=0,t[h+28>>2]=0,v=t[s>>2]|0;while((F|0)<(v|0))}}function CA(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,V=0;if(!(hs(p,y,v)|0))return R=0,R|0;if(R=p+8|0,(t[R>>2]|0)<=0)return R=1,R|0;for(x=p+12|0,p=0;;){if(V=p,p=p+1|0,hs((t[x>>2]|0)+(V<<3)|0,y+(p<<5)|0,v)|0){p=0,x=6;break}if((p|0)>=(t[R>>2]|0)){p=1,x=6;break}}return(x|0)==6?p|0:0}function vA(){return 8}function va(){return 16}function Kt(){return 168}function Vo(){return 8}function Ha(){return 16}function Ds(){return 12}function ho(){return 8}function $a(p){p=p|0;var y=0,v=0;return v=+K[p>>3],y=+K[p+8>>3],+ +Pt(+(v*v+y*y))}function fo(p,y,v,x,R){p=p|0,y=y|0,v=v|0,x=x|0,R=R|0;var V=0,N=0,H=0,te=0,le=0,pe=0,Ge=0,Ee=0;le=+K[p>>3],te=+K[y>>3]-le,H=+K[p+8>>3],N=+K[y+8>>3]-H,Ge=+K[v>>3],V=+K[x>>3]-Ge,Ee=+K[v+8>>3],pe=+K[x+8>>3]-Ee,V=(V*(H-Ee)-(le-Ge)*pe)/(te*pe-N*V),K[R>>3]=le+te*V,K[R+8>>3]=H+N*V}function Ps(p,y){return p=p|0,y=y|0,+K[p>>3]!=+K[y>>3]?(y=0,y|0):(y=+K[p+8>>3]==+K[y+8>>3],y|0)}function or(p,y){p=p|0,y=y|0;var v=0,x=0,R=0;return R=+K[p>>3]-+K[y>>3],x=+K[p+8>>3]-+K[y+8>>3],v=+K[p+16>>3]-+K[y+16>>3],+(R*R+x*x+v*v)}function cl(p,y){p=p|0,y=y|0;var v=0,x=0,R=0;v=+K[p>>3],x=+Bn(+v),v=+$t(+v),K[y+16>>3]=v,v=+K[p+8>>3],R=x*+Bn(+v),K[y>>3]=R,v=x*+$t(+v),K[y+8>>3]=v}function hl(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0,N=0,H=0,te=0,le=0;if(le=Be,Be=Be+32|0,R=le+16|0,V=le,Fr(p,y,R),N=js(p,y)|0,te=Rr(p,y)|0,da(N,V),y=Al(N,t[R>>2]|0)|0,!($i(N)|0))return te=y,Be=le,te|0;do switch(N|0){case 4:{p=0,v=14;break}case 14:{p=1,v=14;break}case 24:{p=2,v=14;break}case 38:{p=3,v=14;break}case 49:{p=4,v=14;break}case 58:{p=5,v=14;break}case 63:{p=6,v=14;break}case 72:{p=7,v=14;break}case 83:{p=8,v=14;break}case 97:{p=9,v=14;break}case 107:{p=10,v=14;break}case 117:{p=11,v=14;break}default:H=0,x=0}while(!1);return(v|0)==14&&(H=t[22096+(p*24|0)+8>>2]|0,x=t[22096+(p*24|0)+16>>2]|0),p=t[R>>2]|0,(p|0)!=(t[V>>2]|0)&&(N=Fa(N)|0,p=t[R>>2]|0,N|(p|0)==(x|0)&&(y=(y+1|0)%6|0)),(te|0)==3&(p|0)==(x|0)?(te=(y+5|0)%6|0,Be=le,te|0):(te|0)==5&(p|0)==(H|0)?(te=(y+1|0)%6|0,Be=le,te|0):(te=y,Be=le,te|0)}function fl(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0;return x=Mr(p,y)|0,(v+-1|0)>>>0>5||(R=(x|0)!=0,(v|0)==1&R)?(v=-1,v|0):(x=hl(p,y)|0,R?(v=(5-x+(t[22384+(v<<2)>>2]|0)|0)%5|0,v|0):(v=(6-x+(t[22416+(v<<2)>>2]|0)|0)%6|0,v|0))}function po(p,y,v){p=p|0,y=y|0,v=v|0;var x=0;(y|0)>0?(x=IA(y,4)|0,t[p>>2]=x,x||Xt(23230,23253,40,23267)):t[p>>2]=0,t[p+4>>2]=y,t[p+8>>2]=0,t[p+12>>2]=v}function Or(p){p=p|0;var y=0,v=0,x=0,R=0,V=0,N=0,H=0;R=p+4|0,V=p+12|0,N=p+8|0;e:for(;;){for(v=t[R>>2]|0,y=0;;){if((y|0)>=(v|0))break e;if(x=t[p>>2]|0,H=t[x+(y<<2)>>2]|0,!H)y=y+1|0;else break}y=x+(~~(+en(+(+Ht(10,+ +(15-(t[V>>2]|0)|0))*(+K[H>>3]+ +K[H+8>>3])))%+(v|0))>>>0<<2)|0,v=t[y>>2]|0;t:do if(v|0){if(x=H+32|0,(v|0)==(H|0))t[y>>2]=t[x>>2];else{if(v=v+32|0,y=t[v>>2]|0,!y)break;for(;(y|0)!=(H|0);)if(v=y+32|0,y=t[v>>2]|0,!y)break t;t[v>>2]=t[x>>2]}Tn(H),t[N>>2]=(t[N>>2]|0)+-1}while(!1)}Tn(t[p>>2]|0)}function $A(p){p=p|0;var y=0,v=0,x=0;for(x=t[p+4>>2]|0,v=0;;){if((v|0)>=(x|0)){y=0,v=4;break}if(y=t[(t[p>>2]|0)+(v<<2)>>2]|0,!y)v=v+1|0;else{v=4;break}}return(v|0)==4?y|0:0}function Uo(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0;if(v=~~(+en(+(+Ht(10,+ +(15-(t[p+12>>2]|0)|0))*(+K[y>>3]+ +K[y+8>>3])))%+(t[p+4>>2]|0))>>>0,v=(t[p>>2]|0)+(v<<2)|0,x=t[v>>2]|0,!x)return V=1,V|0;V=y+32|0;do if((x|0)!=(y|0)){if(v=t[x+32>>2]|0,!v)return V=1,V|0;for(R=v;;){if((R|0)==(y|0)){R=8;break}if(v=t[R+32>>2]|0,v)x=R,R=v;else{v=1,R=10;break}}if((R|0)==8){t[x+32>>2]=t[V>>2];break}else if((R|0)==10)return v|0}else t[v>>2]=t[V>>2];while(!1);return Tn(y),V=p+8|0,t[V>>2]=(t[V>>2]|0)+-1,V=0,V|0}function ja(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,V=0,N=0;V=Vr(40)|0,V||Xt(23283,23253,98,23296),t[V>>2]=t[y>>2],t[V+4>>2]=t[y+4>>2],t[V+8>>2]=t[y+8>>2],t[V+12>>2]=t[y+12>>2],R=V+16|0,t[R>>2]=t[v>>2],t[R+4>>2]=t[v+4>>2],t[R+8>>2]=t[v+8>>2],t[R+12>>2]=t[v+12>>2],t[V+32>>2]=0,R=~~(+en(+(+Ht(10,+ +(15-(t[p+12>>2]|0)|0))*(+K[y>>3]+ +K[y+8>>3])))%+(t[p+4>>2]|0))>>>0,R=(t[p>>2]|0)+(R<<2)|0,x=t[R>>2]|0;do if(!x)t[R>>2]=V;else{for(;!(Lr(x,y)|0&&Lr(x+16|0,v)|0);)if(R=t[x+32>>2]|0,x=R|0?R:x,!(t[x+32>>2]|0)){N=10;break}if((N|0)==10){t[x+32>>2]=V;break}return Tn(V),N=x,N|0}while(!1);return N=p+8|0,t[N>>2]=(t[N>>2]|0)+1,N=V,N|0}function Qo(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0;if(R=~~(+en(+(+Ht(10,+ +(15-(t[p+12>>2]|0)|0))*(+K[y>>3]+ +K[y+8>>3])))%+(t[p+4>>2]|0))>>>0,R=t[(t[p>>2]|0)+(R<<2)>>2]|0,!R)return v=0,v|0;if(!v){for(p=R;;){if(Lr(p,y)|0){x=10;break}if(p=t[p+32>>2]|0,!p){p=0,x=10;break}}if((x|0)==10)return p|0}for(p=R;;){if(Lr(p,y)|0&&Lr(p+16|0,v)|0){x=10;break}if(p=t[p+32>>2]|0,!p){p=0,x=10;break}}return(x|0)==10?p|0:0}function Wa(p,y){p=p|0,y=y|0;var v=0;if(v=~~(+en(+(+Ht(10,+ +(15-(t[p+12>>2]|0)|0))*(+K[y>>3]+ +K[y+8>>3])))%+(t[p+4>>2]|0))>>>0,p=t[(t[p>>2]|0)+(v<<2)>>2]|0,!p)return v=0,v|0;for(;;){if(Lr(p,y)|0){y=5;break}if(p=t[p+32>>2]|0,!p){p=0,y=5;break}}return(y|0)==5?p|0:0}function ii(){return 23312}function Ni(p){return p=+p,+ +WA(+p)}function Pi(p){return p=+p,~~+Ni(p)|0}function Vr(p){p=p|0;var y=0,v=0,x=0,R=0,V=0,N=0,H=0,te=0,le=0,pe=0,Ge=0,Ee=0,Se=0,C=0,i=0,h=0,b=0,E=0,B=0,F=0,A=0;A=Be,Be=Be+16|0,Ee=A;do if(p>>>0<245){if(le=p>>>0<11?16:p+11&-8,p=le>>>3,Ge=t[5829]|0,v=Ge>>>p,v&3|0)return y=(v&1^1)+p|0,p=23356+(y<<1<<2)|0,v=p+8|0,x=t[v>>2]|0,R=x+8|0,V=t[R>>2]|0,(V|0)==(p|0)?t[5829]=Ge&~(1<<y):(t[V+12>>2]=p,t[v>>2]=V),F=y<<3,t[x+4>>2]=F|3,F=x+F+4|0,t[F>>2]=t[F>>2]|1,F=R,Be=A,F|0;if(pe=t[5831]|0,le>>>0>pe>>>0){if(v|0)return y=2<<p,y=v<<p&(y|0-y),y=(y&0-y)+-1|0,H=y>>>12&16,y=y>>>H,v=y>>>5&8,y=y>>>v,V=y>>>2&4,y=y>>>V,p=y>>>1&2,y=y>>>p,x=y>>>1&1,x=(v|H|V|p|x)+(y>>>x)|0,y=23356+(x<<1<<2)|0,p=y+8|0,V=t[p>>2]|0,H=V+8|0,v=t[H>>2]|0,(v|0)==(y|0)?(p=Ge&~(1<<x),t[5829]=p):(t[v+12>>2]=y,t[p>>2]=v,p=Ge),F=x<<3,N=F-le|0,t[V+4>>2]=le|3,R=V+le|0,t[R+4>>2]=N|1,t[V+F>>2]=N,pe|0&&(x=t[5834]|0,y=pe>>>3,v=23356+(y<<1<<2)|0,y=1<<y,p&y?(p=v+8|0,y=t[p>>2]|0):(t[5829]=p|y,y=v,p=v+8|0),t[p>>2]=x,t[y+12>>2]=x,t[x+8>>2]=y,t[x+12>>2]=v),t[5831]=N,t[5834]=R,F=H,Be=A,F|0;if(V=t[5830]|0,V){for(v=(V&0-V)+-1|0,R=v>>>12&16,v=v>>>R,x=v>>>5&8,v=v>>>x,N=v>>>2&4,v=v>>>N,H=v>>>1&2,v=v>>>H,te=v>>>1&1,te=t[23620+((x|R|N|H|te)+(v>>>te)<<2)>>2]|0,v=te,H=te,te=(t[te+4>>2]&-8)-le|0;p=t[v+16>>2]|0,!(!p&&(p=t[v+20>>2]|0,!p));)N=(t[p+4>>2]&-8)-le|0,R=N>>>0<te>>>0,v=p,H=R?p:H,te=R?N:te;if(N=H+le|0,N>>>0>H>>>0){R=t[H+24>>2]|0,y=t[H+12>>2]|0;do if((y|0)==(H|0)){if(p=H+20|0,y=t[p>>2]|0,!y&&(p=H+16|0,y=t[p>>2]|0,!y)){v=0;break}for(;;)if(x=y+20|0,v=t[x>>2]|0,v)y=v,p=x;else if(x=y+16|0,v=t[x>>2]|0,v)y=v,p=x;else break;t[p>>2]=0,v=y}else v=t[H+8>>2]|0,t[v+12>>2]=y,t[y+8>>2]=v,v=y;while(!1);do if(R|0){if(y=t[H+28>>2]|0,p=23620+(y<<2)|0,(H|0)==(t[p>>2]|0)){if(t[p>>2]=v,!v){t[5830]=V&~(1<<y);break}}else if(F=R+16|0,t[((t[F>>2]|0)==(H|0)?F:R+20|0)>>2]=v,!v)break;t[v+24>>2]=R,y=t[H+16>>2]|0,y|0&&(t[v+16>>2]=y,t[y+24>>2]=v),y=t[H+20>>2]|0,y|0&&(t[v+20>>2]=y,t[y+24>>2]=v)}while(!1);return te>>>0<16?(F=te+le|0,t[H+4>>2]=F|3,F=H+F+4|0,t[F>>2]=t[F>>2]|1):(t[H+4>>2]=le|3,t[N+4>>2]=te|1,t[N+te>>2]=te,pe|0&&(x=t[5834]|0,y=pe>>>3,v=23356+(y<<1<<2)|0,y=1<<y,y&Ge?(p=v+8|0,y=t[p>>2]|0):(t[5829]=y|Ge,y=v,p=v+8|0),t[p>>2]=x,t[y+12>>2]=x,t[x+8>>2]=y,t[x+12>>2]=v),t[5831]=te,t[5834]=N),F=H+8|0,Be=A,F|0}else Ge=le}else Ge=le}else Ge=le}else if(p>>>0<=4294967231)if(p=p+11|0,le=p&-8,x=t[5830]|0,x){R=0-le|0,p=p>>>8,p?le>>>0>16777215?te=31:(Ge=(p+1048320|0)>>>16&8,i=p<<Ge,H=(i+520192|0)>>>16&4,i=i<<H,te=(i+245760|0)>>>16&2,te=14-(H|Ge|te)+(i<<te>>>15)|0,te=le>>>(te+7|0)&1|te<<1):te=0,v=t[23620+(te<<2)>>2]|0;e:do if(!v)v=0,p=0,i=61;else for(p=0,H=le<<((te|0)==31?0:25-(te>>>1)|0),V=0;;){if(N=(t[v+4>>2]&-8)-le|0,N>>>0<R>>>0)if(N)p=v,R=N;else{p=v,R=0,i=65;break e}if(i=t[v+20>>2]|0,v=t[v+16+(H>>>31<<2)>>2]|0,V=(i|0)==0|(i|0)==(v|0)?V:i,v)H=H<<1;else{v=V,i=61;break}}while(!1);if((i|0)==61){if((v|0)==0&(p|0)==0){if(p=2<<te,p=(p|0-p)&x,!p){Ge=le;break}Ge=(p&0-p)+-1|0,N=Ge>>>12&16,Ge=Ge>>>N,V=Ge>>>5&8,Ge=Ge>>>V,H=Ge>>>2&4,Ge=Ge>>>H,te=Ge>>>1&2,Ge=Ge>>>te,v=Ge>>>1&1,p=0,v=t[23620+((V|N|H|te|v)+(Ge>>>v)<<2)>>2]|0}v?i=65:(H=p,N=R)}if((i|0)==65)for(V=v;;)if(Ge=(t[V+4>>2]&-8)-le|0,v=Ge>>>0<R>>>0,R=v?Ge:R,p=v?V:p,v=t[V+16>>2]|0,v||(v=t[V+20>>2]|0),v)V=v;else{H=p,N=R;break}if(H|0&&N>>>0<((t[5831]|0)-le|0)>>>0&&(pe=H+le|0,pe>>>0>H>>>0)){V=t[H+24>>2]|0,y=t[H+12>>2]|0;do if((y|0)==(H|0)){if(p=H+20|0,y=t[p>>2]|0,!y&&(p=H+16|0,y=t[p>>2]|0,!y)){y=0;break}for(;;)if(R=y+20|0,v=t[R>>2]|0,v)y=v,p=R;else if(R=y+16|0,v=t[R>>2]|0,v)y=v,p=R;else break;t[p>>2]=0}else F=t[H+8>>2]|0,t[F+12>>2]=y,t[y+8>>2]=F;while(!1);do if(V){if(p=t[H+28>>2]|0,v=23620+(p<<2)|0,(H|0)==(t[v>>2]|0)){if(t[v>>2]=y,!y){x=x&~(1<<p),t[5830]=x;break}}else if(F=V+16|0,t[((t[F>>2]|0)==(H|0)?F:V+20|0)>>2]=y,!y)break;t[y+24>>2]=V,p=t[H+16>>2]|0,p|0&&(t[y+16>>2]=p,t[p+24>>2]=y),p=t[H+20>>2]|0,p&&(t[y+20>>2]=p,t[p+24>>2]=y)}while(!1);e:do if(N>>>0<16)F=N+le|0,t[H+4>>2]=F|3,F=H+F+4|0,t[F>>2]=t[F>>2]|1;else{if(t[H+4>>2]=le|3,t[pe+4>>2]=N|1,t[pe+N>>2]=N,y=N>>>3,N>>>0<256){v=23356+(y<<1<<2)|0,p=t[5829]|0,y=1<<y,p&y?(p=v+8|0,y=t[p>>2]|0):(t[5829]=p|y,y=v,p=v+8|0),t[p>>2]=pe,t[y+12>>2]=pe,t[pe+8>>2]=y,t[pe+12>>2]=v;break}if(y=N>>>8,y?N>>>0>16777215?v=31:(B=(y+1048320|0)>>>16&8,F=y<<B,E=(F+520192|0)>>>16&4,F=F<<E,v=(F+245760|0)>>>16&2,v=14-(E|B|v)+(F<<v>>>15)|0,v=N>>>(v+7|0)&1|v<<1):v=0,y=23620+(v<<2)|0,t[pe+28>>2]=v,p=pe+16|0,t[p+4>>2]=0,t[p>>2]=0,p=1<<v,!(x&p)){t[5830]=x|p,t[y>>2]=pe,t[pe+24>>2]=y,t[pe+12>>2]=pe,t[pe+8>>2]=pe;break}y=t[y>>2]|0;t:do if((t[y+4>>2]&-8|0)!=(N|0)){for(x=N<<((v|0)==31?0:25-(v>>>1)|0);v=y+16+(x>>>31<<2)|0,p=t[v>>2]|0,!!p;)if((t[p+4>>2]&-8|0)==(N|0)){y=p;break t}else x=x<<1,y=p;t[v>>2]=pe,t[pe+24>>2]=y,t[pe+12>>2]=pe,t[pe+8>>2]=pe;break e}while(!1);B=y+8|0,F=t[B>>2]|0,t[F+12>>2]=pe,t[B>>2]=pe,t[pe+8>>2]=F,t[pe+12>>2]=y,t[pe+24>>2]=0}while(!1);return F=H+8|0,Be=A,F|0}else Ge=le}else Ge=le;else Ge=-1;while(!1);if(v=t[5831]|0,v>>>0>=Ge>>>0)return y=v-Ge|0,p=t[5834]|0,y>>>0>15?(F=p+Ge|0,t[5834]=F,t[5831]=y,t[F+4>>2]=y|1,t[p+v>>2]=y,t[p+4>>2]=Ge|3):(t[5831]=0,t[5834]=0,t[p+4>>2]=v|3,F=p+v+4|0,t[F>>2]=t[F>>2]|1),F=p+8|0,Be=A,F|0;if(N=t[5832]|0,N>>>0>Ge>>>0)return E=N-Ge|0,t[5832]=E,F=t[5835]|0,B=F+Ge|0,t[5835]=B,t[B+4>>2]=E|1,t[F+4>>2]=Ge|3,F=F+8|0,Be=A,F|0;if(t[5947]|0?p=t[5949]|0:(t[5949]=4096,t[5948]=4096,t[5950]=-1,t[5951]=-1,t[5952]=0,t[5940]=0,t[5947]=Ee&-16^1431655768,p=4096),H=Ge+48|0,te=Ge+47|0,V=p+te|0,R=0-p|0,le=V&R,le>>>0<=Ge>>>0||(p=t[5939]|0,p|0&&(pe=t[5937]|0,Ee=pe+le|0,Ee>>>0<=pe>>>0|Ee>>>0>p>>>0)))return F=0,Be=A,F|0;e:do if(t[5940]&4)y=0,i=143;else{v=t[5835]|0;t:do if(v){for(x=23764;Ee=t[x>>2]|0,!(Ee>>>0<=v>>>0&&(Ee+(t[x+4>>2]|0)|0)>>>0>v>>>0);)if(p=t[x+8>>2]|0,p)x=p;else{i=128;break t}if(y=V-N&R,y>>>0<2147483647)if(p=Vi(y|0)|0,(p|0)==((t[x>>2]|0)+(t[x+4>>2]|0)|0)){if((p|0)!=-1){N=y,V=p,i=145;break e}}else x=p,i=136;else y=0}else i=128;while(!1);do if((i|0)==128)if(v=Vi(0)|0,(v|0)!=-1&&(y=v,Se=t[5948]|0,C=Se+-1|0,y=(C&y|0?(C+y&0-Se)-y|0:0)+le|0,Se=t[5937]|0,C=y+Se|0,y>>>0>Ge>>>0&y>>>0<2147483647)){if(Ee=t[5939]|0,Ee|0&&C>>>0<=Se>>>0|C>>>0>Ee>>>0){y=0;break}if(p=Vi(y|0)|0,(p|0)==(v|0)){N=y,V=v,i=145;break e}else x=p,i=136}else y=0;while(!1);do if((i|0)==136){if(v=0-y|0,!(H>>>0>y>>>0&(y>>>0<2147483647&(x|0)!=-1)))if((x|0)==-1){y=0;break}else{N=y,V=x,i=145;break e}if(p=t[5949]|0,p=te-y+p&0-p,p>>>0>=2147483647){N=y,V=x,i=145;break e}if((Vi(p|0)|0)==-1){Vi(v|0)|0,y=0;break}else{N=p+y|0,V=x,i=145;break e}}while(!1);t[5940]=t[5940]|4,i=143}while(!1);if((i|0)==143&&le>>>0<2147483647&&(E=Vi(le|0)|0,C=Vi(0)|0,h=C-E|0,b=h>>>0>(Ge+40|0)>>>0,!((E|0)==-1|b^1|E>>>0<C>>>0&((E|0)!=-1&(C|0)!=-1)^1))&&(N=b?h:y,V=E,i=145),(i|0)==145){y=(t[5937]|0)+N|0,t[5937]=y,y>>>0>(t[5938]|0)>>>0&&(t[5938]=y),te=t[5835]|0;e:do if(te){for(y=23764;;){if(p=t[y>>2]|0,v=t[y+4>>2]|0,(V|0)==(p+v|0)){i=154;break}if(x=t[y+8>>2]|0,x)y=x;else break}if((i|0)==154&&(B=y+4|0,(t[y+12>>2]&8|0)==0)&&V>>>0>te>>>0&p>>>0<=te>>>0){t[B>>2]=v+N,F=(t[5832]|0)+N|0,E=te+8|0,E=E&7|0?0-E&7:0,B=te+E|0,E=F-E|0,t[5835]=B,t[5832]=E,t[B+4>>2]=E|1,t[te+F+4>>2]=40,t[5836]=t[5951];break}for(V>>>0<(t[5833]|0)>>>0&&(t[5833]=V),v=V+N|0,y=23764;;){if((t[y>>2]|0)==(v|0)){i=162;break}if(p=t[y+8>>2]|0,p)y=p;else break}if((i|0)==162&&!(t[y+12>>2]&8|0)){t[y>>2]=V,pe=y+4|0,t[pe>>2]=(t[pe>>2]|0)+N,pe=V+8|0,pe=V+(pe&7|0?0-pe&7:0)|0,y=v+8|0,y=v+(y&7|0?0-y&7:0)|0,le=pe+Ge|0,H=y-pe-Ge|0,t[pe+4>>2]=Ge|3;t:do if((te|0)==(y|0))F=(t[5832]|0)+H|0,t[5832]=F,t[5835]=le,t[le+4>>2]=F|1;else{if((t[5834]|0)==(y|0)){F=(t[5831]|0)+H|0,t[5831]=F,t[5834]=le,t[le+4>>2]=F|1,t[le+F>>2]=F;break}if(p=t[y+4>>2]|0,(p&3|0)==1){N=p&-8,x=p>>>3;n:do if(p>>>0<256)if(p=t[y+8>>2]|0,v=t[y+12>>2]|0,(v|0)==(p|0)){t[5829]=t[5829]&~(1<<x);break}else{t[p+12>>2]=v,t[v+8>>2]=p;break}else{V=t[y+24>>2]|0,p=t[y+12>>2]|0;do if((p|0)==(y|0)){if(v=y+16|0,x=v+4|0,p=t[x>>2]|0,p)v=x;else if(p=t[v>>2]|0,!p){p=0;break}for(;;)if(R=p+20|0,x=t[R>>2]|0,x)p=x,v=R;else if(R=p+16|0,x=t[R>>2]|0,x)p=x,v=R;else break;t[v>>2]=0}else F=t[y+8>>2]|0,t[F+12>>2]=p,t[p+8>>2]=F;while(!1);if(!V)break;v=t[y+28>>2]|0,x=23620+(v<<2)|0;do if((t[x>>2]|0)!=(y|0)){if(F=V+16|0,t[((t[F>>2]|0)==(y|0)?F:V+20|0)>>2]=p,!p)break n}else{if(t[x>>2]=p,p|0)break;t[5830]=t[5830]&~(1<<v);break n}while(!1);if(t[p+24>>2]=V,v=y+16|0,x=t[v>>2]|0,x|0&&(t[p+16>>2]=x,t[x+24>>2]=p),v=t[v+4>>2]|0,!v)break;t[p+20>>2]=v,t[v+24>>2]=p}while(!1);y=y+N|0,R=N+H|0}else R=H;if(y=y+4|0,t[y>>2]=t[y>>2]&-2,t[le+4>>2]=R|1,t[le+R>>2]=R,y=R>>>3,R>>>0<256){v=23356+(y<<1<<2)|0,p=t[5829]|0,y=1<<y,p&y?(p=v+8|0,y=t[p>>2]|0):(t[5829]=p|y,y=v,p=v+8|0),t[p>>2]=le,t[y+12>>2]=le,t[le+8>>2]=y,t[le+12>>2]=v;break}y=R>>>8;do if(!y)x=0;else{if(R>>>0>16777215){x=31;break}B=(y+1048320|0)>>>16&8,F=y<<B,E=(F+520192|0)>>>16&4,F=F<<E,x=(F+245760|0)>>>16&2,x=14-(E|B|x)+(F<<x>>>15)|0,x=R>>>(x+7|0)&1|x<<1}while(!1);if(y=23620+(x<<2)|0,t[le+28>>2]=x,p=le+16|0,t[p+4>>2]=0,t[p>>2]=0,p=t[5830]|0,v=1<<x,!(p&v)){t[5830]=p|v,t[y>>2]=le,t[le+24>>2]=y,t[le+12>>2]=le,t[le+8>>2]=le;break}y=t[y>>2]|0;n:do if((t[y+4>>2]&-8|0)!=(R|0)){for(x=R<<((x|0)==31?0:25-(x>>>1)|0);v=y+16+(x>>>31<<2)|0,p=t[v>>2]|0,!!p;)if((t[p+4>>2]&-8|0)==(R|0)){y=p;break n}else x=x<<1,y=p;t[v>>2]=le,t[le+24>>2]=y,t[le+12>>2]=le,t[le+8>>2]=le;break t}while(!1);B=y+8|0,F=t[B>>2]|0,t[F+12>>2]=le,t[B>>2]=le,t[le+8>>2]=F,t[le+12>>2]=y,t[le+24>>2]=0}while(!1);return F=pe+8|0,Be=A,F|0}for(y=23764;p=t[y>>2]|0,!(p>>>0<=te>>>0&&(F=p+(t[y+4>>2]|0)|0,F>>>0>te>>>0));)y=t[y+8>>2]|0;R=F+-47|0,p=R+8|0,p=R+(p&7|0?0-p&7:0)|0,R=te+16|0,p=p>>>0<R>>>0?te:p,y=p+8|0,v=N+-40|0,E=V+8|0,E=E&7|0?0-E&7:0,B=V+E|0,E=v-E|0,t[5835]=B,t[5832]=E,t[B+4>>2]=E|1,t[V+v+4>>2]=40,t[5836]=t[5951],v=p+4|0,t[v>>2]=27,t[y>>2]=t[5941],t[y+4>>2]=t[5942],t[y+8>>2]=t[5943],t[y+12>>2]=t[5944],t[5941]=V,t[5942]=N,t[5944]=0,t[5943]=y,y=p+24|0;do B=y,y=y+4|0,t[y>>2]=7;while((B+8|0)>>>0<F>>>0);if((p|0)!=(te|0)){if(V=p-te|0,t[v>>2]=t[v>>2]&-2,t[te+4>>2]=V|1,t[p>>2]=V,y=V>>>3,V>>>0<256){v=23356+(y<<1<<2)|0,p=t[5829]|0,y=1<<y,p&y?(p=v+8|0,y=t[p>>2]|0):(t[5829]=p|y,y=v,p=v+8|0),t[p>>2]=te,t[y+12>>2]=te,t[te+8>>2]=y,t[te+12>>2]=v;break}if(y=V>>>8,y?V>>>0>16777215?x=31:(B=(y+1048320|0)>>>16&8,F=y<<B,E=(F+520192|0)>>>16&4,F=F<<E,x=(F+245760|0)>>>16&2,x=14-(E|B|x)+(F<<x>>>15)|0,x=V>>>(x+7|0)&1|x<<1):x=0,v=23620+(x<<2)|0,t[te+28>>2]=x,t[te+20>>2]=0,t[R>>2]=0,y=t[5830]|0,p=1<<x,!(y&p)){t[5830]=y|p,t[v>>2]=te,t[te+24>>2]=v,t[te+12>>2]=te,t[te+8>>2]=te;break}y=t[v>>2]|0;t:do if((t[y+4>>2]&-8|0)!=(V|0)){for(x=V<<((x|0)==31?0:25-(x>>>1)|0);v=y+16+(x>>>31<<2)|0,p=t[v>>2]|0,!!p;)if((t[p+4>>2]&-8|0)==(V|0)){y=p;break t}else x=x<<1,y=p;t[v>>2]=te,t[te+24>>2]=y,t[te+12>>2]=te,t[te+8>>2]=te;break e}while(!1);B=y+8|0,F=t[B>>2]|0,t[F+12>>2]=te,t[B>>2]=te,t[te+8>>2]=F,t[te+12>>2]=y,t[te+24>>2]=0}}else F=t[5833]|0,(F|0)==0|V>>>0<F>>>0&&(t[5833]=V),t[5941]=V,t[5942]=N,t[5944]=0,t[5838]=t[5947],t[5837]=-1,t[5842]=23356,t[5841]=23356,t[5844]=23364,t[5843]=23364,t[5846]=23372,t[5845]=23372,t[5848]=23380,t[5847]=23380,t[5850]=23388,t[5849]=23388,t[5852]=23396,t[5851]=23396,t[5854]=23404,t[5853]=23404,t[5856]=23412,t[5855]=23412,t[5858]=23420,t[5857]=23420,t[5860]=23428,t[5859]=23428,t[5862]=23436,t[5861]=23436,t[5864]=23444,t[5863]=23444,t[5866]=23452,t[5865]=23452,t[5868]=23460,t[5867]=23460,t[5870]=23468,t[5869]=23468,t[5872]=23476,t[5871]=23476,t[5874]=23484,t[5873]=23484,t[5876]=23492,t[5875]=23492,t[5878]=23500,t[5877]=23500,t[5880]=23508,t[5879]=23508,t[5882]=23516,t[5881]=23516,t[5884]=23524,t[5883]=23524,t[5886]=23532,t[5885]=23532,t[5888]=23540,t[5887]=23540,t[5890]=23548,t[5889]=23548,t[5892]=23556,t[5891]=23556,t[5894]=23564,t[5893]=23564,t[5896]=23572,t[5895]=23572,t[5898]=23580,t[5897]=23580,t[5900]=23588,t[5899]=23588,t[5902]=23596,t[5901]=23596,t[5904]=23604,t[5903]=23604,F=N+-40|0,E=V+8|0,E=E&7|0?0-E&7:0,B=V+E|0,E=F-E|0,t[5835]=B,t[5832]=E,t[B+4>>2]=E|1,t[V+F+4>>2]=40,t[5836]=t[5951];while(!1);if(y=t[5832]|0,y>>>0>Ge>>>0)return E=y-Ge|0,t[5832]=E,F=t[5835]|0,B=F+Ge|0,t[5835]=B,t[B+4>>2]=E|1,t[F+4>>2]=Ge|3,F=F+8|0,Be=A,F|0}return F=ii()|0,t[F>>2]=12,F=0,Be=A,F|0}function Tn(p){p=p|0;var y=0,v=0,x=0,R=0,V=0,N=0,H=0,te=0;if(p){v=p+-8|0,R=t[5833]|0,p=t[p+-4>>2]|0,y=p&-8,te=v+y|0;do if(p&1)H=v,N=v;else{if(x=t[v>>2]|0,!(p&3)||(N=v+(0-x)|0,V=x+y|0,N>>>0<R>>>0))return;if((t[5834]|0)==(N|0)){if(p=te+4|0,y=t[p>>2]|0,(y&3|0)!=3){H=N,y=V;break}t[5831]=V,t[p>>2]=y&-2,t[N+4>>2]=V|1,t[N+V>>2]=V;return}if(v=x>>>3,x>>>0<256)if(p=t[N+8>>2]|0,y=t[N+12>>2]|0,(y|0)==(p|0)){t[5829]=t[5829]&~(1<<v),H=N,y=V;break}else{t[p+12>>2]=y,t[y+8>>2]=p,H=N,y=V;break}R=t[N+24>>2]|0,p=t[N+12>>2]|0;do if((p|0)==(N|0)){if(y=N+16|0,v=y+4|0,p=t[v>>2]|0,p)y=v;else if(p=t[y>>2]|0,!p){p=0;break}for(;;)if(x=p+20|0,v=t[x>>2]|0,v)p=v,y=x;else if(x=p+16|0,v=t[x>>2]|0,v)p=v,y=x;else break;t[y>>2]=0}else H=t[N+8>>2]|0,t[H+12>>2]=p,t[p+8>>2]=H;while(!1);if(R){if(y=t[N+28>>2]|0,v=23620+(y<<2)|0,(t[v>>2]|0)==(N|0)){if(t[v>>2]=p,!p){t[5830]=t[5830]&~(1<<y),H=N,y=V;break}}else if(H=R+16|0,t[((t[H>>2]|0)==(N|0)?H:R+20|0)>>2]=p,!p){H=N,y=V;break}t[p+24>>2]=R,y=N+16|0,v=t[y>>2]|0,v|0&&(t[p+16>>2]=v,t[v+24>>2]=p),y=t[y+4>>2]|0,y?(t[p+20>>2]=y,t[y+24>>2]=p,H=N,y=V):(H=N,y=V)}else H=N,y=V}while(!1);if(!(N>>>0>=te>>>0)&&(p=te+4|0,x=t[p>>2]|0,!!(x&1))){if(x&2)t[p>>2]=x&-2,t[H+4>>2]=y|1,t[N+y>>2]=y,R=y;else{if((t[5835]|0)==(te|0)){if(te=(t[5832]|0)+y|0,t[5832]=te,t[5835]=H,t[H+4>>2]=te|1,(H|0)!=(t[5834]|0))return;t[5834]=0,t[5831]=0;return}if((t[5834]|0)==(te|0)){te=(t[5831]|0)+y|0,t[5831]=te,t[5834]=N,t[H+4>>2]=te|1,t[N+te>>2]=te;return}R=(x&-8)+y|0,v=x>>>3;do if(x>>>0<256)if(y=t[te+8>>2]|0,p=t[te+12>>2]|0,(p|0)==(y|0)){t[5829]=t[5829]&~(1<<v);break}else{t[y+12>>2]=p,t[p+8>>2]=y;break}else{V=t[te+24>>2]|0,p=t[te+12>>2]|0;do if((p|0)==(te|0)){if(y=te+16|0,v=y+4|0,p=t[v>>2]|0,p)y=v;else if(p=t[y>>2]|0,!p){v=0;break}for(;;)if(x=p+20|0,v=t[x>>2]|0,v)p=v,y=x;else if(x=p+16|0,v=t[x>>2]|0,v)p=v,y=x;else break;t[y>>2]=0,v=p}else v=t[te+8>>2]|0,t[v+12>>2]=p,t[p+8>>2]=v,v=p;while(!1);if(V|0){if(p=t[te+28>>2]|0,y=23620+(p<<2)|0,(t[y>>2]|0)==(te|0)){if(t[y>>2]=v,!v){t[5830]=t[5830]&~(1<<p);break}}else if(x=V+16|0,t[((t[x>>2]|0)==(te|0)?x:V+20|0)>>2]=v,!v)break;t[v+24>>2]=V,p=te+16|0,y=t[p>>2]|0,y|0&&(t[v+16>>2]=y,t[y+24>>2]=v),p=t[p+4>>2]|0,p|0&&(t[v+20>>2]=p,t[p+24>>2]=v)}}while(!1);if(t[H+4>>2]=R|1,t[N+R>>2]=R,(H|0)==(t[5834]|0)){t[5831]=R;return}}if(p=R>>>3,R>>>0<256){v=23356+(p<<1<<2)|0,y=t[5829]|0,p=1<<p,y&p?(y=v+8|0,p=t[y>>2]|0):(t[5829]=y|p,p=v,y=v+8|0),t[y>>2]=H,t[p+12>>2]=H,t[H+8>>2]=p,t[H+12>>2]=v;return}p=R>>>8,p?R>>>0>16777215?x=31:(N=(p+1048320|0)>>>16&8,te=p<<N,V=(te+520192|0)>>>16&4,te=te<<V,x=(te+245760|0)>>>16&2,x=14-(V|N|x)+(te<<x>>>15)|0,x=R>>>(x+7|0)&1|x<<1):x=0,p=23620+(x<<2)|0,t[H+28>>2]=x,t[H+20>>2]=0,t[H+16>>2]=0,y=t[5830]|0,v=1<<x;e:do if(!(y&v))t[5830]=y|v,t[p>>2]=H,t[H+24>>2]=p,t[H+12>>2]=H,t[H+8>>2]=H;else{p=t[p>>2]|0;t:do if((t[p+4>>2]&-8|0)!=(R|0)){for(x=R<<((x|0)==31?0:25-(x>>>1)|0);v=p+16+(x>>>31<<2)|0,y=t[v>>2]|0,!!y;)if((t[y+4>>2]&-8|0)==(R|0)){p=y;break t}else x=x<<1,p=y;t[v>>2]=H,t[H+24>>2]=p,t[H+12>>2]=H,t[H+8>>2]=H;break e}while(!1);N=p+8|0,te=t[N>>2]|0,t[te+12>>2]=H,t[N>>2]=H,t[H+8>>2]=te,t[H+12>>2]=p,t[H+24>>2]=0}while(!1);if(te=(t[5837]|0)+-1|0,t[5837]=te,!(te|0)){for(p=23772;p=t[p>>2]|0,p;)p=p+8|0;t[5837]=-1}}}}function IA(p,y){p=p|0,y=y|0;var v=0;return p?(v=oA(y,p)|0,(y|p)>>>0>65535&&(v=((v>>>0)/(p>>>0)|0|0)==(y|0)?v:-1)):v=0,p=Vr(v)|0,!p||!(t[p+-4>>2]&3)||Mi(p|0,0,v|0)|0,p|0}function Ya(p,y,v,x){return p=p|0,y=y|0,v=v|0,x=x|0,v=p+v>>>0,Ln(y+x+(v>>>0<p>>>0|0)>>>0|0),v|0|0}function fs(p,y,v,x){return p=p|0,y=y|0,v=v|0,x=x|0,x=y-x-(v>>>0>p>>>0|0)>>>0,Ln(x|0),p-v>>>0|0|0}function xa(p){return p=p|0,(p?31-(kA(p^p-1)|0)|0:32)|0}function pr(p,y,v,x,R){p=p|0,y=y|0,v=v|0,x=x|0,R=R|0;var V=0,N=0,H=0,te=0,le=0,pe=0,Ge=0,Ee=0,Se=0,C=0;if(pe=p,te=y,le=te,N=v,Ee=x,H=Ee,!le)return V=(R|0)!=0,H?V?(t[R>>2]=p|0,t[R+4>>2]=y&0,Ee=0,R=0,Ln(Ee|0),R|0):(Ee=0,R=0,Ln(Ee|0),R|0):(V&&(t[R>>2]=(pe>>>0)%(N>>>0),t[R+4>>2]=0),Ee=0,R=(pe>>>0)/(N>>>0)>>>0,Ln(Ee|0),R|0);V=(H|0)==0;do if(N){if(!V){if(V=(kA(H|0)|0)-(kA(le|0)|0)|0,V>>>0<=31){Ge=V+1|0,H=31-V|0,y=V-31>>31,N=Ge,p=pe>>>(Ge>>>0)&y|le<<H,y=le>>>(Ge>>>0)&y,V=0,H=pe<<H;break}return R?(t[R>>2]=p|0,t[R+4>>2]=te|y&0,Ee=0,R=0,Ln(Ee|0),R|0):(Ee=0,R=0,Ln(Ee|0),R|0)}if(V=N-1|0,V&N|0){H=(kA(N|0)|0)+33-(kA(le|0)|0)|0,C=64-H|0,Ge=32-H|0,te=Ge>>31,Se=H-32|0,y=Se>>31,N=H,p=Ge-1>>31&le>>>(Se>>>0)|(le<<Ge|pe>>>(H>>>0))&y,y=y&le>>>(H>>>0),V=pe<<C&te,H=(le<<C|pe>>>(Se>>>0))&te|pe<<Ge&H-33>>31;break}return R|0&&(t[R>>2]=V&pe,t[R+4>>2]=0),(N|0)==1?(Se=te|y&0,C=p|0|0,Ln(Se|0),C|0):(C=xa(N|0)|0,Se=le>>>(C>>>0)|0,C=le<<32-C|pe>>>(C>>>0)|0,Ln(Se|0),C|0)}else{if(V)return R|0&&(t[R>>2]=(le>>>0)%(N>>>0),t[R+4>>2]=0),Se=0,C=(le>>>0)/(N>>>0)>>>0,Ln(Se|0),C|0;if(!pe)return R|0&&(t[R>>2]=0,t[R+4>>2]=(le>>>0)%(H>>>0)),Se=0,C=(le>>>0)/(H>>>0)>>>0,Ln(Se|0),C|0;if(V=H-1|0,!(V&H))return R|0&&(t[R>>2]=p|0,t[R+4>>2]=V&le|y&0),Se=0,C=le>>>((xa(H|0)|0)>>>0),Ln(Se|0),C|0;if(V=(kA(H|0)|0)-(kA(le|0)|0)|0,V>>>0<=30){y=V+1|0,H=31-V|0,N=y,p=le<<H|pe>>>(y>>>0),y=le>>>(y>>>0),V=0,H=pe<<H;break}return R?(t[R>>2]=p|0,t[R+4>>2]=te|y&0,Se=0,C=0,Ln(Se|0),C|0):(Se=0,C=0,Ln(Se|0),C|0)}while(!1);if(!N)le=H,te=0,H=0;else{Ge=v|0|0,pe=Ee|x&0,le=Ya(Ge|0,pe|0,-1,-1)|0,v=He()|0,te=H,H=0;do x=te,te=V>>>31|te<<1,V=H|V<<1,x=p<<1|x>>>31|0,Ee=p>>>31|y<<1|0,fs(le|0,v|0,x|0,Ee|0)|0,C=He()|0,Se=C>>31|((C|0)<0?-1:0)<<1,H=Se&1,p=fs(x|0,Ee|0,Se&Ge|0,(((C|0)<0?-1:0)>>31|((C|0)<0?-1:0)<<1)&pe|0)|0,y=He()|0,N=N-1|0;while(N|0);le=te,te=0}return N=0,R|0&&(t[R>>2]=p,t[R+4>>2]=y),Se=(V|0)>>>31|(le|N)<<1|(N<<1|V>>>31)&0|te,C=(V<<1|0)&-2|H,Ln(Se|0),C|0}function Hr(p,y,v,x){p=p|0,y=y|0,v=v|0,x=x|0;var R=0,V=0;return V=Be,Be=Be+16|0,R=V|0,pr(p,y,v,x,R)|0,Be=V,Ln(t[R+4>>2]|0),t[R>>2]|0|0}function ct(p,y,v){return p=p|0,y=y|0,v=v|0,(v|0)<32?(Ln(y>>>v|0),p>>>v|(y&(1<<v)-1)<<32-v):(Ln(0),y>>>v-32|0)}function wt(p,y,v){return p=p|0,y=y|0,v=v|0,(v|0)<32?(Ln(y<<v|(p&(1<<v)-1<<32-v)>>>32-v|0),p<<v):(Ln(p<<v-32|0),0)}function jA(p,y){return p=+p,y=+y,p!=p?+y:y!=y?+p:+ti(+p,+y)}function Go(p){return p=+p,p>=0?+Qt(p+.5):+yr(p-.5)}function qo(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,V=0;if((v|0)>=8192)return Er(p|0,y|0,v|0)|0,p|0;if(V=p|0,R=p+v|0,(p&3)==(y&3)){for(;p&3;){if(!v)return V|0;dt[p>>0]=dt[y>>0]|0,p=p+1|0,y=y+1|0,v=v-1|0}for(v=R&-4|0,x=v-64|0;(p|0)<=(x|0);)t[p>>2]=t[y>>2],t[p+4>>2]=t[y+4>>2],t[p+8>>2]=t[y+8>>2],t[p+12>>2]=t[y+12>>2],t[p+16>>2]=t[y+16>>2],t[p+20>>2]=t[y+20>>2],t[p+24>>2]=t[y+24>>2],t[p+28>>2]=t[y+28>>2],t[p+32>>2]=t[y+32>>2],t[p+36>>2]=t[y+36>>2],t[p+40>>2]=t[y+40>>2],t[p+44>>2]=t[y+44>>2],t[p+48>>2]=t[y+48>>2],t[p+52>>2]=t[y+52>>2],t[p+56>>2]=t[y+56>>2],t[p+60>>2]=t[y+60>>2],p=p+64|0,y=y+64|0;for(;(p|0)<(v|0);)t[p>>2]=t[y>>2],p=p+4|0,y=y+4|0}else for(v=R-4|0;(p|0)<(v|0);)dt[p>>0]=dt[y>>0]|0,dt[p+1>>0]=dt[y+1>>0]|0,dt[p+2>>0]=dt[y+2>>0]|0,dt[p+3>>0]=dt[y+3>>0]|0,p=p+4|0,y=y+4|0;for(;(p|0)<(R|0);)dt[p>>0]=dt[y>>0]|0,p=p+1|0,y=y+1|0;return V|0}function Mi(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,V=0,N=0;if(V=p+v|0,y=y&255,(v|0)>=67){for(;p&3;)dt[p>>0]=y,p=p+1|0;for(x=V&-4|0,N=y|y<<8|y<<16|y<<24,R=x-64|0;(p|0)<=(R|0);)t[p>>2]=N,t[p+4>>2]=N,t[p+8>>2]=N,t[p+12>>2]=N,t[p+16>>2]=N,t[p+20>>2]=N,t[p+24>>2]=N,t[p+28>>2]=N,t[p+32>>2]=N,t[p+36>>2]=N,t[p+40>>2]=N,t[p+44>>2]=N,t[p+48>>2]=N,t[p+52>>2]=N,t[p+56>>2]=N,t[p+60>>2]=N,p=p+64|0;for(;(p|0)<(x|0);)t[p>>2]=N,p=p+4|0}for(;(p|0)<(V|0);)dt[p>>0]=y,p=p+1|0;return V-v|0}function WA(p){return p=+p,p>=0?+Qt(p+.5):+yr(p-.5)}function Vi(p){p=p|0;var y=0,v=0,x=0;return x=kn()|0,v=t[St>>2]|0,y=v+p|0,(p|0)>0&(y|0)<(v|0)|(y|0)<0?(oo(y|0)|0,Te(12),-1):(y|0)>(x|0)&&!(ca(y|0)|0)?(Te(12),-1):(t[St>>2]=y,v|0)}return{___uremdi3:Hr,_bitshift64Lshr:ct,_bitshift64Shl:wt,_calloc:IA,_cellAreaKm2:Ua,_cellAreaM2:Hs,_cellAreaRads2:ll,_compact:Oo,_destroyLinkedPolygon:qa,_edgeLengthKm:dA,_edgeLengthM:Ji,_emscripten_replace_memory:mi,_exactEdgeLengthKm:Fo,_exactEdgeLengthM:Si,_exactEdgeLengthRads:$s,_experimentalH3ToLocalIj:TA,_experimentalLocalIjToH3:Za,_free:Tn,_geoToH3:co,_getDestinationH3IndexFromUnidirectionalEdge:mt,_getH3IndexesFromUnidirectionalEdge:Fn,_getH3UnidirectionalEdge:ot,_getH3UnidirectionalEdgeBoundary:sr,_getH3UnidirectionalEdgesFromHexagon:wi,_getOriginH3IndexFromUnidirectionalEdge:vt,_getPentagonIndexes:Ys,_getRes0Indexes:Gs,_h3Distance:Ei,_h3GetBaseCell:js,_h3GetFaces:Ga,_h3GetResolution:Kr,_h3IndexesAreNeighbors:_A,_h3IsPentagon:Mr,_h3IsResClassIII:Qa,_h3IsValid:cs,_h3Line:ya,_h3LineSize:Vl,_h3SetToLinkedGeo:Ra,_h3ToCenterChild:Jr,_h3ToChildren:qr,_h3ToGeo:Zr,_h3ToGeoBoundary:ZA,_h3ToParent:Ws,_h3UnidirectionalEdgeIsValid:An,_hexAreaKm2:Zs,_hexAreaM2:ni,_hexRing:Pr,_i64Subtract:fs,_kRing:As,_kRingDistances:La,_llvm_minnum_f64:jA,_llvm_round_f64:Go,_malloc:Vr,_maxFaceCount:No,_maxH3ToChildrenSize:Nl,_maxKringSize:za,_maxPolyfillSize:Yi,_maxUncompactSize:uo,_memcpy:qo,_memset:Mi,_numHexagons:Bi,_pentagonIndexCount:ul,_pointDistKm:Ro,_pointDistM:al,_pointDistRads:Lo,_polyfill:Qs,_res0IndexCount:Ts,_round:WA,_sbrk:Vi,_sizeOfCoordIJ:ho,_sizeOfGeoBoundary:Kt,_sizeOfGeoCoord:va,_sizeOfGeoPolygon:Ha,_sizeOfGeofence:Vo,_sizeOfH3Index:vA,_sizeOfLinkedGeoPolygon:Ds,_uncompact:Bs,establishStackSpace:EA,stackAlloc:ye,stackRestore:ha,stackSave:Zi}}(OA,On,At);n.___uremdi3=st.___uremdi3,n._bitshift64Lshr=st._bitshift64Lshr,n._bitshift64Shl=st._bitshift64Shl,n._calloc=st._calloc,n._cellAreaKm2=st._cellAreaKm2,n._cellAreaM2=st._cellAreaM2,n._cellAreaRads2=st._cellAreaRads2,n._compact=st._compact,n._destroyLinkedPolygon=st._destroyLinkedPolygon,n._edgeLengthKm=st._edgeLengthKm,n._edgeLengthM=st._edgeLengthM;var ze=n._emscripten_replace_memory=st._emscripten_replace_memory;n._exactEdgeLengthKm=st._exactEdgeLengthKm,n._exactEdgeLengthM=st._exactEdgeLengthM,n._exactEdgeLengthRads=st._exactEdgeLengthRads,n._experimentalH3ToLocalIj=st._experimentalH3ToLocalIj,n._experimentalLocalIjToH3=st._experimentalLocalIjToH3,n._free=st._free,n._geoToH3=st._geoToH3,n._getDestinationH3IndexFromUnidirectionalEdge=st._getDestinationH3IndexFromUnidirectionalEdge,n._getH3IndexesFromUnidirectionalEdge=st._getH3IndexesFromUnidirectionalEdge,n._getH3UnidirectionalEdge=st._getH3UnidirectionalEdge,n._getH3UnidirectionalEdgeBoundary=st._getH3UnidirectionalEdgeBoundary,n._getH3UnidirectionalEdgesFromHexagon=st._getH3UnidirectionalEdgesFromHexagon,n._getOriginH3IndexFromUnidirectionalEdge=st._getOriginH3IndexFromUnidirectionalEdge,n._getPentagonIndexes=st._getPentagonIndexes,n._getRes0Indexes=st._getRes0Indexes,n._h3Distance=st._h3Distance,n._h3GetBaseCell=st._h3GetBaseCell,n._h3GetFaces=st._h3GetFaces,n._h3GetResolution=st._h3GetResolution,n._h3IndexesAreNeighbors=st._h3IndexesAreNeighbors,n._h3IsPentagon=st._h3IsPentagon,n._h3IsResClassIII=st._h3IsResClassIII,n._h3IsValid=st._h3IsValid,n._h3Line=st._h3Line,n._h3LineSize=st._h3LineSize,n._h3SetToLinkedGeo=st._h3SetToLinkedGeo,n._h3ToCenterChild=st._h3ToCenterChild,n._h3ToChildren=st._h3ToChildren,n._h3ToGeo=st._h3ToGeo,n._h3ToGeoBoundary=st._h3ToGeoBoundary,n._h3ToParent=st._h3ToParent,n._h3UnidirectionalEdgeIsValid=st._h3UnidirectionalEdgeIsValid,n._hexAreaKm2=st._hexAreaKm2,n._hexAreaM2=st._hexAreaM2,n._hexRing=st._hexRing,n._i64Subtract=st._i64Subtract,n._kRing=st._kRing,n._kRingDistances=st._kRingDistances,n._llvm_minnum_f64=st._llvm_minnum_f64,n._llvm_round_f64=st._llvm_round_f64,n._malloc=st._malloc,n._maxFaceCount=st._maxFaceCount,n._maxH3ToChildrenSize=st._maxH3ToChildrenSize,n._maxKringSize=st._maxKringSize,n._maxPolyfillSize=st._maxPolyfillSize,n._maxUncompactSize=st._maxUncompactSize,n._memcpy=st._memcpy,n._memset=st._memset,n._numHexagons=st._numHexagons,n._pentagonIndexCount=st._pentagonIndexCount,n._pointDistKm=st._pointDistKm,n._pointDistM=st._pointDistM,n._pointDistRads=st._pointDistRads,n._polyfill=st._polyfill,n._res0IndexCount=st._res0IndexCount,n._round=st._round,n._sbrk=st._sbrk,n._sizeOfCoordIJ=st._sizeOfCoordIJ,n._sizeOfGeoBoundary=st._sizeOfGeoBoundary,n._sizeOfGeoCoord=st._sizeOfGeoCoord,n._sizeOfGeoPolygon=st._sizeOfGeoPolygon,n._sizeOfGeofence=st._sizeOfGeofence,n._sizeOfH3Index=st._sizeOfH3Index,n._sizeOfLinkedGeoPolygon=st._sizeOfLinkedGeoPolygon,n._uncompact=st._uncompact,n.establishStackSpace=st.establishStackSpace;var oe=n.stackAlloc=st.stackAlloc,de=n.stackRestore=st.stackRestore,we=n.stackSave=st.stackSave;if(n.asm=st,n.cwrap=Qe,n.setValue=ae,n.getValue=be,n.getTempRet0=W,ei){pi(ei)||(ei=M(ei));{uA();var Le=function(se){se.byteLength&&(se=new Uint8Array(se)),kt.set(se,J),n.memoryInitializerRequest&&delete n.memoryInitializerRequest.response,pt()},Fe=function(){P(ei,Le,function(){throw"could not load memory initializer "+ei})},tt=br(ei);if(tt)Le(tt.buffer);else if(n.memoryInitializerRequest){var Ye=function(){var se=n.memoryInitializerRequest,_e=se.response;if(se.status!==200&&se.status!==0){var We=br(n.memoryInitializerRequestURL);if(We)_e=We.buffer;else{console.warn("a problem seems to have happened with Module.memoryInitializerRequest, status: "+se.status+", retrying "+ei),Fe();return}}Le(_e)};n.memoryInitializerRequest.response?setTimeout(Ye,0):n.memoryInitializerRequest.addEventListener("load",Ye)}else Fe()}}var Oe;Jn=function se(){Oe||Ke(),Oe||(Jn=se)};function Ke(se){if(un>0||(Ct(),un>0))return;function _e(){Oe||(Oe=!0,!Ze&&(xn(),Bt(),n.onRuntimeInitialized&&n.onRuntimeInitialized(),En()))}n.setStatus?(n.setStatus("Running..."),setTimeout(function(){setTimeout(function(){n.setStatus("")},1),_e()},1)):_e()}n.run=Ke;function yt(se){throw n.onAbort&&n.onAbort(se),se+="",c(se),U(se),Ze=!0,"abort("+se+"). Build with -s ASSERTIONS=1 for more info."}if(n.abort=yt,n.preInit)for(typeof n.preInit=="function"&&(n.preInit=[n.preInit]);n.preInit.length>0;)n.preInit.pop()();return Ke(),e}(typeof cm=="object"?cm:{}),Un="number",uf=Un,si=Un,vi=Un,Ko=Un,ji=Un,TL=[["sizeOfH3Index",Un],["sizeOfGeoCoord",Un],["sizeOfGeoBoundary",Un],["sizeOfGeoPolygon",Un],["sizeOfGeofence",Un],["sizeOfLinkedGeoPolygon",Un],["sizeOfCoordIJ",Un],["h3IsValid",uf,[si,vi]],["geoToH3",si,[Un,Un,Ko]],["h3ToGeo",null,[si,vi,ji]],["h3ToGeoBoundary",null,[si,vi,ji]],["maxKringSize",Un,[Un]],["kRing",null,[si,vi,Un,ji]],["kRingDistances",null,[si,vi,Un,ji,ji]],["hexRing",null,[si,vi,Un,ji]],["maxPolyfillSize",Un,[ji,Ko]],["polyfill",null,[ji,Ko,ji]],["h3SetToLinkedGeo",null,[ji,Un,ji]],["destroyLinkedPolygon",null,[ji]],["compact",Un,[ji,ji,Un]],["uncompact",Un,[ji,Un,ji,Un,Ko]],["maxUncompactSize",Un,[ji,Un,Ko]],["h3IsPentagon",uf,[si,vi]],["h3IsResClassIII",uf,[si,vi]],["h3GetBaseCell",Un,[si,vi]],["h3GetResolution",Un,[si,vi]],["maxFaceCount",Un,[si,vi]],["h3GetFaces",null,[si,vi,ji]],["h3ToParent",si,[si,vi,Ko]],["h3ToChildren",null,[si,vi,Ko,ji]],["h3ToCenterChild",si,[si,vi,Ko]],["maxH3ToChildrenSize",Un,[si,vi,Ko]],["h3IndexesAreNeighbors",uf,[si,vi,si,vi]],["getH3UnidirectionalEdge",si,[si,vi,si,vi]],["getOriginH3IndexFromUnidirectionalEdge",si,[si,vi]],["getDestinationH3IndexFromUnidirectionalEdge",si,[si,vi]],["h3UnidirectionalEdgeIsValid",uf,[si,vi]],["getH3IndexesFromUnidirectionalEdge",null,[si,vi,ji]],["getH3UnidirectionalEdgesFromHexagon",null,[si,vi,ji]],["getH3UnidirectionalEdgeBoundary",null,[si,vi,ji]],["h3Distance",Un,[si,vi,si,vi]],["h3Line",Un,[si,vi,si,vi,ji]],["h3LineSize",Un,[si,vi,si,vi]],["experimentalH3ToLocalIj",Un,[si,vi,si,vi,ji]],["experimentalLocalIjToH3",Un,[si,vi,ji,ji]],["hexAreaM2",Un,[Ko]],["hexAreaKm2",Un,[Ko]],["edgeLengthM",Un,[Ko]],["edgeLengthKm",Un,[Ko]],["pointDistM",Un,[ji,ji]],["pointDistKm",Un,[ji,ji]],["pointDistRads",Un,[ji,ji]],["cellAreaM2",Un,[si,vi]],["cellAreaKm2",Un,[si,vi]],["cellAreaRads2",Un,[si,vi]],["exactEdgeLengthM",Un,[si,vi]],["exactEdgeLengthKm",Un,[si,vi]],["exactEdgeLengthRads",Un,[si,vi]],["numHexagons",Un,[Ko]],["getRes0Indexes",null,[ji]],["res0IndexCount",Un],["getPentagonIndexes",null,[Un,ji]],["pentagonIndexCount",Un]],Ju={};TL.forEach(function(n){Ju[n[0]]=cm.cwrap.apply(cm,n)});Ju.sizeOfH3Index();Ju.sizeOfGeoCoord();Ju.sizeOfGeoBoundary();Ju.sizeOfGeoPolygon();Ju.sizeOfGeofence();Ju.sizeOfLinkedGeoPolygon();Ju.sizeOfCoordIJ();function rx(e){let n,a,d={lngLat:e[4],class:"hex-marker",$$slots:{default:[SL]},$$scope:{ctx:e}};return n=new Wz({props:d}),e[11](n),{c(){ea(n.$$.fragment)},l(w){Ca(n.$$.fragment,w)},m(w,M){ta(n,w,M),a=!0},p(w,M){const P={};M&16&&(P.lngLat=w[4]),M&134217728&&(P.$$scope={dirty:M,ctx:w}),n.$set(P)},i(w){a||(Ci(n.$$.fragment,w),a=!0)},o(w){tr(n.$$.fragment,w),a=!1},d(w){e[11](null),na(n,w)}}}function SL(e){let n,a,d,w,M,P,c,U;return{c(){n=_s("svg"),a=_s("defs"),d=_s("style"),w=Il(`.fill {\r
                    fill: #000;\r
                    stroke: solid 1px red;\r
                }\r
                .stroke {\r
                    stroke: #fff;\r
                }\r
            `),M=_s("g"),P=_s("g"),c=_s("path"),U=_s("path"),this.h()},l(O){n=ys(O,"svg",{class:!0,id:!0,"data-name":!0,xmlns:!0,viewBox:!0});var j=ui(n);a=ys(j,"defs",{});var W=ui(a);d=ys(W,"style",{});var J=ui(d);w=Bl(J,`.fill {\r
                    fill: #000;\r
                    stroke: solid 1px red;\r
                }\r
                .stroke {\r
                    stroke: #fff;\r
                }\r
            `),J.forEach(pn),W.forEach(pn),M=ys(j,"g",{id:!0,"data-name":!0});var ae=ui(M);P=ys(ae,"g",{});var be=ui(P);c=ys(be,"path",{class:!0,d:!0}),ui(c).forEach(pn),U=ys(be,"path",{d:!0}),ui(U).forEach(pn),be.forEach(pn),ae.forEach(pn),j.forEach(pn),this.h()},h(){Jt(c,"class","fill"),Jt(c,"d","m35.23,60.88c-1.81,0-3.43-.93-4.33-2.5L2.68,9.5c-.9-1.57-.9-3.44,0-5,.9-1.57,2.52-2.5,4.33-2.5h56.44c1.81,0,3.43.93,4.33,2.5.9,1.56.9,3.43,0,5l-28.22,48.88c-.9,1.57-2.52,2.5-4.33,2.5Z"),Jt(U,"d","m63.45,4c1.56,0,2.34,1.05,2.6,1.5.26.45.78,1.65,0,3l-28.22,48.88c-.78,1.35-2.08,1.5-2.6,1.5s-1.82-.15-2.6-1.5L4.41,8.5c-.78-1.35-.26-2.55,0-3,.26-.45,1.03-1.5,2.6-1.5h56.44m0-4H7.01C1.62,0-1.75,5.83.95,10.5l28.22,48.88c1.35,2.33,3.7,3.5,6.06,3.5s4.72-1.17,6.06-3.5l28.22-48.88c2.69-4.67-.67-10.5-6.06-10.5h0Z"),Jt(M,"id","Layer_1-2"),Jt(M,"data-name","Layer 1"),Jt(n,"class","marker-svg"),Jt(n,"id","Layer_2"),Jt(n,"data-name","Layer 2"),Jt(n,"xmlns","http://www.w3.org/2000/svg"),Jt(n,"viewBox","0 0 70.46 62.88")},m(O,j){nr(O,n,j),jn(n,a),jn(a,d),jn(d,w),jn(n,M),jn(M,P),jn(P,c),jn(P,U)},p:ra,d(O){O&&pn(n)}}}function CL(e){var w;let n,a,d=((w=e[0])==null?void 0:w.hex)&&rx(e);return{c(){d&&d.c(),n=Aa()},l(M){d&&d.l(M),n=Aa()},m(M,P){d&&d.m(M,P),nr(M,n,P),a=!0},p(M,P){var c;(c=M[0])!=null&&c.hex?d?(d.p(M,P),P&1&&Ci(d,1)):(d=rx(M),d.c(),Ci(d,1),d.m(n.parentNode,n)):d&&(q0(),tr(d,1,1,()=>{d=null}),G0())},i(M){a||(Ci(d),a=!0)},o(M){tr(d),a=!1},d(M){M&&pn(n),d&&d.d(M)}}}function IL(e){let n,a,d,w;function M(U){e[12](U)}function P(U){e[13](U)}let c={style:"https://basemaps.cartocdn.com/gl/"+e[6]+"-gl-style/style.json",standardControls:!0,center:e[5],zoom:4,$$slots:{default:[CL]},$$scope:{ctx:e}};return e[1]!==void 0&&(c.map=e[1]),e[2]!==void 0&&(c.loaded=e[2]),n=new Zz({props:c}),Dl.push(()=>U2(n,"map",M)),Dl.push(()=>U2(n,"loaded",P)),{c(){ea(n.$$.fragment)},l(U){Ca(n.$$.fragment,U)},m(U,O){ta(n,U,O),w=!0},p(U,[O]){const j={};O&134217753&&(j.$$scope={dirty:O,ctx:U}),!a&&O&2&&(a=!0,j.map=U[1],V2(()=>a=!1)),!d&&O&4&&(d=!0,j.loaded=U[2],V2(()=>d=!1)),n.$set(j)},i(U){w||(Ci(n.$$.fragment,U),w=!0)},o(U){tr(n.$$.fragment,U),w=!1},d(U){na(n,U)}}}let Ax=6;const BL=500;function DL(e,n,a){const d=[-119.449444,37.166111];let{metric:w}=n,{colorScheme:M}=n,{selectionData:P}=n,c,U=!1,O,j,W=[-119.449444,37.166111];function J(At){console.log(At),c.moveLayer(`hex-${At}`,"place_hamlet"),setTimeout(()=>{ae([`hex-${At}`])},BL/4),c.setPaintProperty(`hex-${At}`,"fill-opacity",1)}function ae(At=[]){let bt=c.getStyle().layers.filter(kt=>kt.source==="hexlayer"&&!At.includes(kt.id));for(let kt of bt)c.setPaintProperty(kt.id,"fill-opacity",0)}function be(At){let bt=c.getStyle().layers.filter(kt=>kt.source==="hexlayer");for(let kt of bt){let De=kt.id.split("-")[1],at=nt(De,At,!0);console.log("palette:",at),c.setPaintProperty(kt.id,"fill-color",at)}}let Ze,xe,Ce,je,Qe=Op(0,5e3,M);function nt(At,bt,kt=!0){if(!(!Ce||!je))if(console.log("generating for ",At),kt){Qe=Op(je[At],Ce[At],bt),console.log(Qe),Qe.length;let De=Qe.map((at,lt)=>[at[0],at[1]]);return De=De.flat(),console.log(De),["interpolate",["linear"],["get",At],...De]}else return["step",["get",At],"#ccc",0,"#fc4e2a",600,"#00E676",1300,"#2a4e9b"]}let{update:it}=n;B_(()=>{fetch(`/phast/CA_hexbinned@${Ax}_birds_fct.json`).then(At=>At.json()).then(At=>xe=At).then(()=>{var De,at;Ce=(De=xe.properties)==null?void 0:De.maxes,je=(at=xe.properties)==null?void 0:at.mins;let bt=c.getStyle().layers[71].id;console.log(c),a(1,c.doubleClickZoom._clickZoom._enabled=!1,c),a(1,c.doubleClickZoom._tapZoom._enabled=!1,c),c.addSource("hexlayer",{type:"geojson",data:xe});for(let lt of Rp){let Tt=`hex-${lt}`;c.addLayer({id:Tt,type:"fill",source:"hexlayer",layout:{},paint:{"fill-color":nt(lt,M,!0),"fill-opacity":.75,"fill-color-transition":{duration:500,delay:0}}},bt),console.log("added layer for ",lt)}let kt=`hex-${Rp[0]}`;c.on("click",kt,lt=>{console.log(lt);let Tt=sL(lt.lngLat.lat,lt.lngLat.lng,Ax);if(Tt===(P==null?void 0:P.hex)){it(null);return}console.log(c.getStyle().layers);let Ot=oL(Tt);a(4,W={lng:Ot[1],lat:Ot[0]}),console.log(Tt),it({latlng:lt.lngLat,hex:Tt,properties:lt.features[0].properties})}),c.on("mouseenter",kt,()=>{c.getCanvas().style.cursor="pointer"}),c.on("mouseleave",kt,()=>{c.getCanvas().style.cursor=""}),c.on("load",()=>{xt()}),setTimeout(()=>{a(1,c._canvas.style.filter="none",c),U||xt()},3e3)})});function xt(){let At=I7(xe);Ze=window.innerWidth/3,c.fitBounds(At,{padding:{top:50,left:10,bottom:50,right:Ze}}),a(1,c._canvas.style.filter="none",c)}let Ft="positron";function It(At){Dl[At?"unshift":"push"](()=>{j=At,a(3,j)})}function nn(At){c=At,a(1,c)}function Zt(At){U=At,a(2,U)}return e.$$set=At=>{"metric"in At&&a(7,w=At.metric),"colorScheme"in At&&a(8,M=At.colorScheme),"selectionData"in At&&a(0,P=At.selectionData),"update"in At&&a(9,it=At.update)},e.$$.update=()=>{e.$$.dirty&1030&&c&&U&&(a(10,O=c.getStyle().layers.filter(At=>At["source-layer"]==="place")),console.log(O)),e.$$.dirty&134&&c&&U&&J(w),e.$$.dirty&262&&c&&U&&be(M)},[P,c,U,j,W,d,Ft,w,M,it,O,It,nn,Zt]}let PL=class extends io{constructor(n){super(),ro(this,n,DL,IL,ws,{metric:7,colorScheme:8,selectionData:0,update:9})}};function sx(e){let n,a;return n=new wz({props:{selectionData:e[0],metric:e[1],updateData:e[3]}}),{c(){ea(n.$$.fragment)},l(d){Ca(n.$$.fragment,d)},m(d,w){ta(n,d,w),a=!0},p(d,w){const M={};w&1&&(M.selectionData=d[0]),w&2&&(M.metric=d[1]),n.$set(M)},i(d){a||(Ci(n.$$.fragment,d),a=!0)},o(d){tr(n.$$.fragment,d),a=!1},d(d){na(n,d)}}}function zL(e){let n,a,d,w,M,P,c,U;n=new PL({props:{update:e[3],metric:e[1],colorScheme:e[2],selectionData:e[0]}});let O=e[0]&&sx(e);return M=new t5({props:{updateMetricLayer:e[4],updateColorScheme:e[5]}}),c=new r5({props:{colorScheme:e[2],metric:e[1]}}),{c(){ea(n.$$.fragment),a=vs(),O&&O.c(),d=vs(),w=ar("div"),ea(M.$$.fragment),P=vs(),ea(c.$$.fragment),this.h()},l(j){Ca(n.$$.fragment,j),a=xs(j),O&&O.l(j),d=xs(j),w=lr(j,"DIV",{class:!0});var W=ui(w);Ca(M.$$.fragment,W),P=xs(W),Ca(c.$$.fragment,W),W.forEach(pn),this.h()},h(){Jt(w,"class","control-container svelte-c2izy0")},m(j,W){ta(n,j,W),nr(j,a,W),O&&O.m(j,W),nr(j,d,W),nr(j,w,W),ta(M,w,null),jn(w,P),ta(c,w,null),U=!0},p(j,[W]){const J={};W&2&&(J.metric=j[1]),W&4&&(J.colorScheme=j[2]),W&1&&(J.selectionData=j[0]),n.$set(J),j[0]?O?(O.p(j,W),W&1&&Ci(O,1)):(O=sx(j),O.c(),Ci(O,1),O.m(d.parentNode,d)):O&&(q0(),tr(O,1,1,()=>{O=null}),G0());const ae={};W&4&&(ae.colorScheme=j[2]),W&2&&(ae.metric=j[1]),c.$set(ae)},i(j){U||(Ci(n.$$.fragment,j),Ci(O),Ci(M.$$.fragment,j),Ci(c.$$.fragment,j),U=!0)},o(j){tr(n.$$.fragment,j),tr(O),tr(M.$$.fragment,j),tr(c.$$.fragment,j),U=!1},d(j){j&&(pn(a),pn(d),pn(w)),na(n,j),O&&O.d(j),na(M),na(c)}}}function LL(e,n,a){let d=null;function w(O){console.log("updating!!"),a(0,d=O)}let M="pd";function P(O){a(1,M=O)}let c="blBluCyWt";function U(O){a(2,c=O)}return[d,M,c,w,P,U]}class UL extends io{constructor(n){super(),ro(this,n,LL,zL,ws,{})}}export{UL as component};
