import{s as ho,p as eA,k as qr,i as Qi,O as n0,P as b2,Q as jl,R as S2,x as Sl,n as Oo,c as f0,S as fa,T as da,f as Vn,U as Fv,V as Wl,u as d0,g as p0,a as g0,D as rd,A as m0,e as Sr,d as Cr,W as lg,y as Ov,X as C2,Y as k2,Z as sd,_ as Nv,b as ea,$ as hu,j as ta,v as ki,F as Vv,l as un,a0 as Fp,a1 as Jo,a2 as ug,r as jg,t as UA,h as GA,a3 as Dw,a4 as Uv,m as Yh,a5 as C1,o as Qu,a6 as Gv,a7 as Lw,a8 as hg,w as Qv,a9 as qv}from"../chunks/scheduler.5eeauvpB.js";import{S as No,i as Vo,a as Qr,c as ph,t as _r,g as gh,b as vA,d as QA,m as yA,e as xA,f as Hv}from"../chunks/index.nJ64X6DF.js";import{w as Vu,r as k_}from"../chunks/index.cSiU3nbh.js";function $h(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function r0(e,t){const n={},l={},m={$$scope:1};let g=e.length;for(;g--;){const P=e[g],u=t[g];if(u){for(const Q in P)Q in u||(l[Q]=1);for(const Q in u)m[Q]||(n[Q]=u[Q],m[Q]=1);e[g]=u}else for(const Q in P)m[Q]=1}for(const P in l)P in n||(n[P]=void 0);return n}function Op(e){return typeof e=="object"&&e!==null?e:{}}function Vf(e){return Object.entries(e).filter(([t,n])=>t!==""&&n).map(([t])=>t).join(" ")}const Zv=/^[a-z]+(?::(?:preventDefault|stopPropagation|passive|nonpassive|capture|once|self))+$/,_8=/^[^$]+(?:\$(?:preventDefault|stopPropagation|passive|nonpassive|capture|once|self))+$/;function E2(e){let t,n=[];e.$on=(m,g)=>{let P=m,u=()=>{};return t?u=t(P,g):n.push([P,g]),P.match(Zv)&&console&&console.warn('Event modifiers in SMUI now use "$" instead of ":", so that all events can be bound with modifiers. Please update your event binding: ',P),()=>{u()}};function l(m){const g=e.$$.callbacks[m.type];g&&g.slice().forEach(P=>P.call(this,m))}return m=>{const g=[],P={};t=(u,Q)=>{let O=u,re=Q,ee=!1;const ce=O.match(Zv),le=O.match(_8),je=ce||le;if(O.match(/^SMUI:\w+:/)){const Ke=O.split(":");let xt="";for(let gt=0;gt<Ke.length;gt++)xt+=gt===Ke.length-1?":"+Ke[gt]:Ke[gt].split("-").map(Mt=>Mt.slice(0,1).toUpperCase()+Mt.slice(1)).join("");console.warn(`The event ${O.split("$")[0]} has been renamed to ${xt.split("$")[0]}.`),O=xt}if(je){const Ke=O.split(ce?":":"$");O=Ke[0];const xt=Ke.slice(1).reduce((gt,Mt)=>(gt[Mt]=!0,gt),{});xt.passive&&(ee=ee||{},ee.passive=!0),xt.nonpassive&&(ee=ee||{},ee.passive=!1),xt.capture&&(ee=ee||{},ee.capture=!0),xt.once&&(ee=ee||{},ee.once=!0),xt.preventDefault&&(re=v8(re)),xt.stopPropagation&&(re=y8(re)),xt.stopImmediatePropagation&&(re=x8(re)),xt.self&&(re=w8(m,re)),xt.trusted&&(re=b8(re))}const Je=jv(m,O,re,ee),Xe=()=>{Je();const Ke=g.indexOf(Xe);Ke>-1&&g.splice(Ke,1)};return g.push(Xe),O in P||(P[O]=jv(m,O,l)),Xe};for(let u=0;u<n.length;u++)t(n[u][0],n[u][1]);return{destroy:()=>{for(let u=0;u<g.length;u++)g[u]();for(let u of Object.entries(P))u[1]()}}}}function jv(e,t,n,l){return e.addEventListener(t,n,l),()=>e.removeEventListener(t,n,l)}function v8(e){return function(t){return t.preventDefault(),e.call(this,t)}}function y8(e){return function(t){return t.stopPropagation(),e.call(this,t)}}function x8(e){return function(t){return t.stopImmediatePropagation(),e.call(this,t)}}function w8(e,t){return function(n){if(n.target===e)return t.call(this,n)}}function b8(e){return function(t){if(t.isTrusted)return e.call(this,t)}}function Wg(e,t){let n=[];if(t)for(let l=0;l<t.length;l++){const m=t[l],g=Array.isArray(m)?m[0]:m;Array.isArray(m)&&m.length>1?n.push(g(e,m[1])):n.push(g(e))}return{update(l){if((l&&l.length||0)!=n.length)throw new Error("You must not change the length of an actions array.");if(l)for(let m=0;m<l.length;m++){const g=n[m];if(g&&g.update){const P=l[m];Array.isArray(P)&&P.length>1?g.update(P[1]):g.update()}}},destroy(){for(let l=0;l<n.length;l++){const m=n[l];m&&m.destroy&&m.destroy()}}}}function S8(e){let t=e[1],n,l,m=e[1]&&E_(e);return{c(){m&&m.c(),n=eA()},l(g){m&&m.l(g),n=eA()},m(g,P){m&&m.m(g,P),qr(g,n,P),l=!0},p(g,P){g[1]?t?ho(t,g[1])?(m.d(1),m=E_(g),t=g[1],m.c(),m.m(n.parentNode,n)):m.p(g,P):(m=E_(g),t=g[1],m.c(),m.m(n.parentNode,n)):t&&(m.d(1),m=null,t=g[1])},i(g){l||(_r(m,g),l=!0)},o(g){Qr(m,g),l=!1},d(g){g&&Qi(n),m&&m.d(g)}}}function C8(e){let t=e[1],n,l=e[1]&&I_(e);return{c(){l&&l.c(),n=eA()},l(m){l&&l.l(m),n=eA()},m(m,g){l&&l.m(m,g),qr(m,n,g)},p(m,g){m[1]?t?ho(t,m[1])?(l.d(1),l=I_(m),t=m[1],l.c(),l.m(n.parentNode,n)):l.p(m,g):(l=I_(m),t=m[1],l.c(),l.m(n.parentNode,n)):t&&(l.d(1),l=null,t=m[1])},i:Oo,o:Oo,d(m){m&&Qi(n),l&&l.d(m)}}}function k8(e){let t,n,l,m,g;const P=e[8].default,u=f0(P,e,e[7],null);let Q=[e[5]],O={};for(let re=0;re<Q.length;re+=1)O=jl(O,Q[re]);return{c(){t=fa("svg"),u&&u.c(),this.h()},l(re){t=da(re,"svg",{});var ee=Vn(t);u&&u.l(ee),ee.forEach(Qi),this.h()},h(){Fv(t,O)},m(re,ee){qr(re,t,ee),u&&u.m(t,null),e[9](t),l=!0,m||(g=[Wl(n=Wg.call(null,t,e[0])),Wl(e[4].call(null,t))],m=!0)},p(re,ee){u&&u.p&&(!l||ee&128)&&d0(u,P,re,re[7],l?g0(P,re[7],ee,null):p0(re[7]),null),Fv(t,O=r0(Q,[ee&32&&re[5]])),n&&rd(n.update)&&ee&1&&n.update.call(null,re[0])},i(re){l||(_r(u,re),l=!0)},o(re){Qr(u,re),l=!1},d(re){re&&Qi(t),u&&u.d(re),e[9](null),m=!1,m0(g)}}}function E_(e){let t,n,l,m,g;const P=e[8].default,u=f0(P,e,e[7],null);let Q=[e[5]],O={};for(let re=0;re<Q.length;re+=1)O=jl(O,Q[re]);return{c(){t=Sr(e[1]),u&&u.c(),this.h()},l(re){t=Cr(re,(e[1]||"null").toUpperCase(),{});var ee=Vn(t);u&&u.l(ee),ee.forEach(Qi),this.h()},h(){lg(e[1])(t,O)},m(re,ee){qr(re,t,ee),u&&u.m(t,null),e[11](t),l=!0,m||(g=[Wl(n=Wg.call(null,t,e[0])),Wl(e[4].call(null,t))],m=!0)},p(re,ee){u&&u.p&&(!l||ee&128)&&d0(u,P,re,re[7],l?g0(P,re[7],ee,null):p0(re[7]),null),lg(re[1])(t,O=r0(Q,[ee&32&&re[5]])),n&&rd(n.update)&&ee&1&&n.update.call(null,re[0])},i(re){l||(_r(u,re),l=!0)},o(re){Qr(u,re),l=!1},d(re){re&&Qi(t),u&&u.d(re),e[11](null),m=!1,m0(g)}}}function I_(e){let t,n,l,m,g=[e[5]],P={};for(let u=0;u<g.length;u+=1)P=jl(P,g[u]);return{c(){t=Sr(e[1]),this.h()},l(u){t=Cr(u,(e[1]||"null").toUpperCase(),{}),Vn(t).forEach(Qi),this.h()},h(){lg(e[1])(t,P)},m(u,Q){qr(u,t,Q),e[10](t),l||(m=[Wl(n=Wg.call(null,t,e[0])),Wl(e[4].call(null,t))],l=!0)},p(u,Q){lg(u[1])(t,P=r0(g,[Q&32&&u[5]])),n&&rd(n.update)&&Q&1&&n.update.call(null,u[0])},d(u){u&&Qi(t),e[10](null),l=!1,m0(m)}}}function E8(e){let t,n,l,m;const g=[k8,C8,S8],P=[];function u(Q,O){return Q[1]==="svg"?0:Q[3]?1:2}return t=u(e),n=P[t]=g[t](e),{c(){n.c(),l=eA()},l(Q){n.l(Q),l=eA()},m(Q,O){P[t].m(Q,O),qr(Q,l,O),m=!0},p(Q,[O]){let re=t;t=u(Q),t===re?P[t].p(Q,O):(gh(),Qr(P[re],1,1,()=>{P[re]=null}),ph(),n=P[t],n?n.p(Q,O):(n=P[t]=g[t](Q),n.c()),_r(n,1),n.m(l.parentNode,l))},i(Q){m||(_r(n),m=!0)},o(Q){Qr(n),m=!1},d(Q){Q&&Qi(l),P[t].d(Q)}}}function I8(e,t,n){let l;const m=["use","tag","getElement"];let g=n0(t,m),{$$slots:P={},$$scope:u}=t,{use:Q=[]}=t,{tag:O}=t;const re=E2(b2());let ee;function ce(){return ee}function le(Xe){Sl[Xe?"unshift":"push"](()=>{ee=Xe,n(2,ee)})}function je(Xe){Sl[Xe?"unshift":"push"](()=>{ee=Xe,n(2,ee)})}function Je(Xe){Sl[Xe?"unshift":"push"](()=>{ee=Xe,n(2,ee)})}return e.$$set=Xe=>{t=jl(jl({},t),S2(Xe)),n(5,g=n0(t,m)),"use"in Xe&&n(0,Q=Xe.use),"tag"in Xe&&n(1,O=Xe.tag),"$$scope"in Xe&&n(7,u=Xe.$$scope)},e.$$.update=()=>{e.$$.dirty&2&&n(3,l=["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr"].indexOf(O)>-1)},[Q,O,ee,l,re,g,ce,u,P,le,je,Je]}class zw extends No{constructor(t){super(),Vo(this,t,I8,E8,ho,{use:0,tag:1,getElement:6})}get getElement(){return this.$$.ctx[6]}}function M8(e){let t;const n=e[11].default,l=f0(n,e,e[13],null);return{c(){l&&l.c()},l(m){l&&l.l(m)},m(m,g){l&&l.m(m,g),t=!0},p(m,g){l&&l.p&&(!t||g&8192)&&d0(l,n,m,m[13],t?g0(n,m[13],g,null):p0(m[13]),null)},i(m){t||(_r(l,m),t=!0)},o(m){Qr(l,m),t=!1},d(m){l&&l.d(m)}}}function T8(e){let t,n,l;const m=[{tag:e[3]},{use:[e[8],...e[0]]},{class:Vf({[e[1]]:!0,[e[6]]:!0,...e[5]})},e[7],e[9]];var g=e[2];function P(u,Q){let O={$$slots:{default:[M8]},$$scope:{ctx:u}};if(Q!==void 0&&Q&1003)O=r0(m,[Q&8&&{tag:u[3]},Q&257&&{use:[u[8],...u[0]]},Q&98&&{class:Vf({[u[1]]:!0,[u[6]]:!0,...u[5]})},Q&128&&Op(u[7]),Q&512&&Op(u[9])]);else for(let re=0;re<m.length;re+=1)O=jl(O,m[re]);return{props:O}}return g&&(t=Ov(g,P(e)),e[12](t)),{c(){t&&vA(t.$$.fragment),n=eA()},l(u){t&&QA(t.$$.fragment,u),n=eA()},m(u,Q){t&&yA(t,u,Q),qr(u,n,Q),l=!0},p(u,[Q]){if(Q&4&&g!==(g=u[2])){if(t){gh();const O=t;Qr(O.$$.fragment,1,0,()=>{xA(O,1)}),ph()}g?(t=Ov(g,P(u,Q)),u[12](t),vA(t.$$.fragment),_r(t.$$.fragment,1),yA(t,n.parentNode,n)):t=null}else if(g){const O=Q&1003?r0(m,[Q&8&&{tag:u[3]},Q&257&&{use:[u[8],...u[0]]},Q&98&&{class:Vf({[u[1]]:!0,[u[6]]:!0,...u[5]})},Q&128&&Op(u[7]),Q&512&&Op(u[9])]):{};Q&8192&&(O.$$scope={dirty:Q,ctx:u}),t.$set(O)}},i(u){l||(t&&_r(t.$$.fragment,u),l=!0)},o(u){t&&Qr(t.$$.fragment,u),l=!1},d(u){u&&Qi(n),e[12](null),t&&xA(t,u)}}}const Uu={component:zw,tag:"div",class:"",classMap:{},contexts:{},props:{}};function P8(e,t,n){const l=["use","class","component","tag","getElement"];let m=n0(t,l),{$$slots:g={},$$scope:P}=t,{use:u=[]}=t,{class:Q=""}=t,O;const re=Uu.class,ee={},ce=[],le=Uu.contexts,je=Uu.props;let{component:Je=Uu.component}=t,{tag:Xe=Je===zw?Uu.tag:void 0}=t;Object.entries(Uu.classMap).forEach(([Mt,Ct])=>{const Te=C2(Ct);Te&&"subscribe"in Te&&ce.push(Te.subscribe(Ai=>{n(5,ee[Mt]=Ai,ee)}))});const Ke=E2(b2());for(let Mt in le)le.hasOwnProperty(Mt)&&k2(Mt,le[Mt]);sd(()=>{for(const Mt of ce)Mt()});function xt(){return O.getElement()}function gt(Mt){Sl[Mt?"unshift":"push"](()=>{O=Mt,n(4,O)})}return e.$$set=Mt=>{t=jl(jl({},t),S2(Mt)),n(9,m=n0(t,l)),"use"in Mt&&n(0,u=Mt.use),"class"in Mt&&n(1,Q=Mt.class),"component"in Mt&&n(2,Je=Mt.component),"tag"in Mt&&n(3,Xe=Mt.tag),"$$scope"in Mt&&n(13,P=Mt.$$scope)},[u,Q,Je,Xe,O,ee,re,je,Ke,m,xt,g,gt,P]}class B8 extends No{constructor(t){super(),Vo(this,t,P8,T8,ho,{use:0,class:1,component:2,tag:3,getElement:10})}get getElement(){return this.$$.ctx[10]}}const Wv=Object.assign({},Uu);function lc(e){return new Proxy(B8,{construct:function(t,n){return Object.assign(Uu,Wv,e),new t(...n)},get:function(t,n){return Object.assign(Uu,Wv,e),t[n]}})}lc({class:"mdc-deprecated-list-item__text",tag:"span"});lc({class:"mdc-deprecated-list-item__primary-text",tag:"span"});lc({class:"mdc-deprecated-list-item__secondary-text",tag:"span"});function D8(e){let t,n,l,m,g,P;const u=e[8].default,Q=f0(u,e,e[7],null);let O=[{class:n=Vf({[e[1]]:!0,"mdc-deprecated-list-item__graphic":!0,"mdc-menu__selection-group-icon":e[4]})},e[5]],re={};for(let ee=0;ee<O.length;ee+=1)re=jl(re,O[ee]);return{c(){t=Sr("span"),Q&&Q.c(),this.h()},l(ee){t=Cr(ee,"SPAN",{class:!0});var ce=Vn(t);Q&&Q.l(ce),ce.forEach(Qi),this.h()},h(){Nv(t,re)},m(ee,ce){qr(ee,t,ce),Q&&Q.m(t,null),e[9](t),m=!0,g||(P=[Wl(l=Wg.call(null,t,e[0])),Wl(e[3].call(null,t))],g=!0)},p(ee,[ce]){Q&&Q.p&&(!m||ce&128)&&d0(Q,u,ee,ee[7],m?g0(u,ee[7],ce,null):p0(ee[7]),null),Nv(t,re=r0(O,[(!m||ce&2&&n!==(n=Vf({[ee[1]]:!0,"mdc-deprecated-list-item__graphic":!0,"mdc-menu__selection-group-icon":ee[4]})))&&{class:n},ce&32&&ee[5]])),l&&rd(l.update)&&ce&1&&l.update.call(null,ee[0])},i(ee){m||(_r(Q,ee),m=!0)},o(ee){Qr(Q,ee),m=!1},d(ee){ee&&Qi(t),Q&&Q.d(ee),e[9](null),g=!1,m0(P)}}}function L8(e,t,n){const l=["use","class","getElement"];let m=n0(t,l),{$$slots:g={},$$scope:P}=t;const u=E2(b2());let{use:Q=[]}=t,{class:O=""}=t,re,ee=C2("SMUI:list:graphic:menu-selection-group");function ce(){return re}function le(je){Sl[je?"unshift":"push"](()=>{re=je,n(2,re)})}return e.$$set=je=>{t=jl(jl({},t),S2(je)),n(5,m=n0(t,l)),"use"in je&&n(0,Q=je.use),"class"in je&&n(1,O=je.class),"$$scope"in je&&n(7,P=je.$$scope)},[Q,O,re,u,ee,m,ce,P,g,le]}class z8 extends No{constructor(t){super(),Vo(this,t,L8,D8,ho,{use:0,class:1,getElement:6})}get getElement(){return this.$$.ctx[6]}}lc({class:"mdc-deprecated-list-item__meta",tag:"span"});lc({class:"mdc-deprecated-list-group",tag:"div"});lc({class:"mdc-deprecated-list-group__subheader",tag:"h3"});lc({class:"mdc-menu__selection-group-icon",component:z8});const cg=["pd","mpd","mntd","rel_pd","rel_mpd","rel_mntd","tree_sizes"],fg={pd:"phylodiversity",mpd:"mean pairwise phylogenetic distance",mntd:"mean nearest-taxon phylogenetic distance"};function R8(e){if(!e||!cg.includes(e))return;const n=650;let l=new Array(n),m=[0,1];const g=Yv[1]/n;let P;switch(e){case"mntd":case"rel_mntd":P=Jc.mntd;break;case"mpd":case"rel_mpd":P=Jc.mpd;break;default:case"pd":P=Jc.pd}let u=P.d,Q=P.b,O=P.e,re=P.c,ee=P.modelHigh,ce=P.modelLow,le=P.minY,je=P.maxY,Je=2;for(let Xe=0;Xe<n;Xe++){let Ke=(Xe+Je)*g;l[Xe]={x:Ke,high:ee({x:Ke,b:Q.high,c:re.high,d:u.high,e:O.high}),low:ce({x:Ke,b:Q.low,c:re.low,d:u.low,e:O.low})}}return m=[le,je],{confidence:l,yAxis:m,xAxis:Yv,xAxisLabel:"Tree Size",yAxisLabel:P.yAxisLabel}}const Yv=[0,150],Jc={pd:{b:{low:-.7043,high:-.6657},c:{low:23.0845,high:240.3973},d:{low:19970.5549,high:19686.1185},e:{low:3792.2577,high:4198.5041},minY:100,maxY:5e3,yAxisLabel:"Phylodiversity (pd)",modelHigh:({x:e,b:t,c:n,d:l,e:m})=>n+(l-n)/(1+Math.exp(t*(Math.log(e)-Math.log(m)))),modelLow:({x:e,b:t,c:n,d:l,e:m})=>n+(l-n)/(1+Math.exp(t*(Math.log(e)-Math.log(m))))},mpd:{b:{low:-.6143,high:.4445},c:{low:6.3176,high:97.3052},d:{low:102.0496,high:150.1521},e:{low:1.9251,high:2.2335},minY:0,maxY:200,yAxisLabel:"Mean pairwise phylogenetic distance (mpd)",modelHigh:({x:e,b:t,c:n,d:l,e:m})=>n+(l-n)/(1+Math.exp(t*(Math.log(e)-Math.log(m)))),modelLow:({x:e,b:t,c:n,d:l,e:m})=>n+(l-n)/(1+Math.exp(t*(Math.log(e)-Math.log(m))))},mntd:{b:{low:.9954,high:.8694},c:{low:6.054,high:5.1347},d:{low:33.1945,high:185.9164},e:{low:52.3284,high:7.0013},minY:0,maxY:150,yAxisLabel:"Mean nearest-taxon phylogenetic distance (mntd)",modelHigh:({x:e,b:t,c:n,d:l,e:m})=>n+(l-n)/(1+Math.exp(t*(Math.log(e)-Math.log(m)))),modelLow:({x:e,b:t,c:n,d:l,e:m})=>n+(l-n)/(1+Math.exp(t*(Math.log(e)-Math.log(m))))}};function k1(e,t,n){if(t==-1)return 0;let l;switch(e){case"mntd":case"rel_mntd":l=Jc.mntd;break;case"mpd":case"rel_mpd":l=Jc.mpd;break;default:case"pd":l=Jc.pd}let m=l.d,g=l.b,P=l.e,u=l.c,Q=l.modelHigh,O=l.modelLow;Q({x:n,b:g.high,c:u.high,d:m.high,e:P.high});let re=O({x:n,b:g.low,c:u.low,d:m.low,e:P.low});return t-re}function dg(e,t,n="*ibm_flip"){return I2[n](e,t)}function F8(e="*ibm_flip"){let t=I2[e](0,1),n=[];for(let l of t)n.push(l[1]);return n}function Ts(e,t,n){return n*(t-e)+e}const I2={"*ibm_flip":function(t,n){return[[-1,"#ddddddcc"],[t,"#FFB000cc","Very low"],[Ts(t,n,.25),"#FE6100cc"],[Ts(t,n,.5),"#DC267Fcc","Expected"],[Ts(t,n,.75),"#785EF0cc"],[n,"#648FFFcc","Very high"]]},orGrBlu:function(t,n){return[[-1,"#ddddddcc"],[t,"#F9A825cc","Very low"],[Ts(t,n,.35),"#e8f4c4cc"],[Ts(t,n,.5),"#00E676cc","Expected"],[Ts(t,n,.75),"#3d9ab8cc"],[Ts(t,n,.85),"#318ab5cc"],[n,"#2a4e9bcc","Very high"]]},blGr:function(t,n){return[[-1,"#ddddddcc"],[t,"#000000","Very low"],[n,"#00ff00","Very high"]]},blBluCyWt:function(t,n){return[[-1,"#ddddddcc","Missing"],[t,"#000000cc","Very low"],[Ts(t,n,.5),"#0000ffcc","Expected"],[Ts(t,n,.75),"#00ffffcc"],[n,"#ffffffcc","Very high"]]},rdYlGr:function(t,n){return[[-1,"#ddddddcc","Missing"],[t,"#fd5533cc","Very low"],[Ts(t,n,.5),"#f8f611cc","Normal"],[n,"#4eb87bcc","Very high"]]},"*mgYlGr":function(t,n){return[[-1,"#ddddddcc","Missing"],[t,"#F15C8Ecc","Very low"],[Ts(t,n,.5),"#f8f611cc","Normal"],[n,"#4eb87bcc","Very high"]]},grYlRd:function(t,n){return[[-1,"#ddddddcc","Missing"],[t,"#00ff33cc","Very low biodiversity"],[Ts(t,n,.5),"#ffff33cc","Normal biodiversity"],[n,"#ff3300cc","Very high biodiversity"]]},"*census":function(t,n){return[[-1,"#ddddddcc","Missing"],[t,"#efd100cc","Very low biodiversity"],[Ts(t,n,.5),"#4eb87bcc","Normal biodiversity"],[n,"#007fc4cc","Very high biodiversity"]]},seqseq:function(t,n){return[[-1,"#ddddddcc","Missing"],[t,"#de4fa6cc","Very low biodiversity"],[Ts(t,n,.5),"#4fadd0cc","Normal biodiversity"],[n,"#2a1a8acc","Very high biodiversity"]]},"*parula":function(t,n){return[[-1,"#ddddddcc"],[t,"#352a87cc","Very low"],[Ts(t,n,.167),"#0469dfcc"],[Ts(t,n,.33),"#06a0cbcc"],[Ts(t,n,.5),"#1fb2accc","Expected"],[Ts(t,n,.667),"#a3bd6acc"],[Ts(t,n,.833),"#fcc336cc"],[n,"#f8f611cc","Very high"]]},"*parula_flip":function(t,n){return[[-1,"#ddddddcc"],[t,"#f8f611cc","Very low"],[Ts(t,n,.167),"#fcc336cc"],[Ts(t,n,.33),"#a3bd6acc"],[Ts(t,n,.5),"#1fb2accc","Expected"],[Ts(t,n,.667),"#06a0cbcc"],[Ts(t,n,.833),"#0469dfcc"],[n,"#352a87cc","Very high"]]},"*ibm":function(t,n){return[[-1,"#ddddddcc"],[t,"#648FFFcc","Very low"],[Ts(t,n,.25),"#785EF0cc"],[Ts(t,n,.5),"#DC267Fcc","Expected"],[Ts(t,n,.75),"#FE6100cc"],[n,"#FFB000cc","Very high"]]}};function $v(e,t,n){const l=e.slice();return l[18]=t[n],l}function O8(e,t,n){const l=e.slice();return l[18]=t[n],l}function N8(e){let t,n;return{c(){t=Sr("option"),n=UA(e[18]),this.h()},l(l){t=Cr(l,"OPTION",{});var m=Vn(t);n=GA(m,e[18]),m.forEach(Qi),this.h()},h(){t.__value=e[18],Dw(t,t.__value)},m(l,m){qr(l,t,m),un(t,n)},p:Oo,d(l){l&&Qi(t)}}}function Xv(e){let t,n=e[18]+"",l;return{c(){t=Sr("option"),l=UA(n),this.h()},l(m){t=Cr(m,"OPTION",{});var g=Vn(t);l=GA(g,n),g.forEach(Qi),this.h()},h(){t.__value=e[18],Dw(t,t.__value)},m(m,g){qr(m,t,g),un(t,l)},p:Oo,d(m){m&&Qi(t)}}}function V8(e){let t,n,l,m="Metric",g,P,u,Q,O,re="Palette",ee,ce,le,je,Je,Xe="Show county lines?",Ke,xt,gt,Mt,Ct,Te="Draw Mode?",Ai,ii,xi="Draw Polygon",gi,qt,di="Reset",mi,vt,Ut=$h(cg),rt=[];for(let Lt=0;Lt<Ut.length;Lt+=1)rt[Lt]=N8(O8(e,Ut,Lt));let Ft=$h(e[8]),ui=[];for(let Lt=0;Lt<Ft.length;Lt+=1)ui[Lt]=Xv($v(e,Ft,Lt));return{c(){t=Sr("div"),n=Sr("div"),l=Sr("h4"),l.textContent=m,g=ea(),P=Sr("select");for(let Lt=0;Lt<rt.length;Lt+=1)rt[Lt].c();u=ea(),Q=Sr("div"),O=Sr("h4"),O.textContent=re,ee=ea(),ce=Sr("select");for(let Lt=0;Lt<ui.length;Lt+=1)ui[Lt].c();le=ea(),je=Sr("div"),Je=Sr("h4"),Je.textContent=Xe,Ke=ea(),xt=Sr("input"),gt=ea(),Mt=Sr("div"),Ct=Sr("h4"),Ct.textContent=Te,Ai=ea(),ii=Sr("button"),ii.textContent=xi,gi=ea(),qt=Sr("button"),qt.textContent=di,this.h()},l(Lt){t=Cr(Lt,"DIV",{class:!0});var Yt=Vn(t);n=Cr(Yt,"DIV",{class:!0});var oi=Vn(n);l=Cr(oi,"H4",{class:!0,"data-svelte-h":!0}),hu(l)!=="svelte-1wtuo56"&&(l.textContent=m),g=ta(oi),P=Cr(oi,"SELECT",{label:!0});var yi=Vn(P);for(let fi=0;fi<rt.length;fi+=1)rt[fi].l(yi);yi.forEach(Qi),oi.forEach(Qi),u=ta(Yt),Q=Cr(Yt,"DIV",{class:!0});var Pi=Vn(Q);O=Cr(Pi,"H4",{class:!0,"data-svelte-h":!0}),hu(O)!=="svelte-16skbun"&&(O.textContent=re),ee=ta(Pi),ce=Cr(Pi,"SELECT",{label:!0});var dn=Vn(ce);for(let fi=0;fi<ui.length;fi+=1)ui[fi].l(dn);dn.forEach(Qi),Pi.forEach(Qi),le=ta(Yt),je=Cr(Yt,"DIV",{class:!0});var sn=Vn(je);Je=Cr(sn,"H4",{class:!0,"data-svelte-h":!0}),hu(Je)!=="svelte-tf6nwt"&&(Je.textContent=Xe),Ke=ta(sn),xt=Cr(sn,"INPUT",{type:!0}),sn.forEach(Qi),gt=ta(Yt),Mt=Cr(Yt,"DIV",{class:!0});var Bn=Vn(Mt);Ct=Cr(Bn,"H4",{class:!0,"data-svelte-h":!0}),hu(Ct)!=="svelte-hi5xw8"&&(Ct.textContent=Te),Ai=ta(Bn),ii=Cr(Bn,"BUTTON",{"data-svelte-h":!0}),hu(ii)!=="svelte-o8r62u"&&(ii.textContent=xi),gi=ta(Bn),qt=Cr(Bn,"BUTTON",{"data-svelte-h":!0}),hu(qt)!=="svelte-2y01av"&&(qt.textContent=di),Bn.forEach(Qi),Yt.forEach(Qi),this.h()},h(){ki(l,"class","svelte-kizido"),ki(P,"label","Diversity Metric"),e[5]===void 0&&Vv(()=>e[10].call(P)),ki(n,"class","control-item svelte-kizido"),ki(O,"class","svelte-kizido"),ki(ce,"label","Color Scheme"),e[6]===void 0&&Vv(()=>e[12].call(ce)),ki(Q,"class","control-item svelte-kizido"),ki(Je,"class","svelte-kizido"),ki(xt,"type","checkbox"),ki(je,"class","control-item svelte-kizido"),ki(Ct,"class","svelte-kizido"),ki(Mt,"class","control-item svelte-kizido"),ki(t,"class","controls svelte-kizido")},m(Lt,Yt){qr(Lt,t,Yt),un(t,n),un(n,l),un(n,g),un(n,P);for(let oi=0;oi<rt.length;oi+=1)rt[oi]&&rt[oi].m(P,null);Fp(P,e[5],!0),un(t,u),un(t,Q),un(Q,O),un(Q,ee),un(Q,ce);for(let oi=0;oi<ui.length;oi+=1)ui[oi]&&ui[oi].m(ce,null);Fp(ce,e[6],!0),un(t,le),un(t,je),un(je,Je),un(je,Ke),un(je,xt),xt.checked=e[7],un(t,gt),un(t,Mt),un(Mt,Ct),un(Mt,Ai),un(Mt,ii),un(Mt,gi),un(Mt,qt),mi||(vt=[Jo(P,"change",e[10]),Jo(P,"change",e[11]),Jo(ce,"change",e[12]),Jo(ce,"change",e[13]),Jo(xt,"change",e[14]),Jo(xt,"change",e[15]),Jo(ii,"click",e[16]),Jo(qt,"click",e[17])],mi=!0)},p(Lt,[Yt]){if(Yt&32&&Fp(P,Lt[5]),Yt&256){Ft=$h(Lt[8]);let oi;for(oi=0;oi<Ft.length;oi+=1){const yi=$v(Lt,Ft,oi);ui[oi]?ui[oi].p(yi,Yt):(ui[oi]=Xv(yi),ui[oi].c(),ui[oi].m(ce,null))}for(;oi<ui.length;oi+=1)ui[oi].d(1);ui.length=Ft.length}Yt&320&&Fp(ce,Lt[6]),Yt&128&&(xt.checked=Lt[7])},i:Oo,o:Oo,d(Lt){Lt&&Qi(t),ug(rt,Lt),ug(ui,Lt),mi=!1,m0(vt)}}}function U8(e,t,n){let{updateMetricLayer:l}=t,{updateColorScheme:m}=t,{updateShowCounties:g}=t,{updateDrawing:P}=t,{updateDrawnPath:u}=t,{isDrawing:Q}=t,O,re,ee;const ce=Object.keys(I2);jg(()=>{l(O),m(re)});function le(){O=Uv(this),n(5,O)}const je=()=>l(O);function Je(){re=Uv(this),n(6,re),n(8,ce)}const Xe=()=>m(re);function Ke(){ee=this.checked,n(7,ee)}const xt=()=>g(ee),gt=()=>P(!0),Mt=()=>u(null);return e.$$set=Ct=>{"updateMetricLayer"in Ct&&n(0,l=Ct.updateMetricLayer),"updateColorScheme"in Ct&&n(1,m=Ct.updateColorScheme),"updateShowCounties"in Ct&&n(2,g=Ct.updateShowCounties),"updateDrawing"in Ct&&n(3,P=Ct.updateDrawing),"updateDrawnPath"in Ct&&n(4,u=Ct.updateDrawnPath),"isDrawing"in Ct&&n(9,Q=Ct.isDrawing)},[l,m,g,P,u,O,re,ee,ce,Q,le,je,Je,Xe,Ke,xt,gt,Mt]}class G8 extends No{constructor(t){super(),Vo(this,t,U8,V8,ho,{updateMetricLayer:0,updateColorScheme:1,updateShowCounties:2,updateDrawing:3,updateDrawnPath:4,isDrawing:9})}}var hh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Rw(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function M2(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function l(){return this instanceof l?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(l){var m=Object.getOwnPropertyDescriptor(e,l);Object.defineProperty(n,l,m.get?m:{enumerable:!0,get:function(){return e[l]}})}),n}function Q8(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Fw={exports:{}};const q8={},H8=Object.freeze(Object.defineProperty({__proto__:null,default:q8},Symbol.toStringTag,{value:"Module"})),Kv=M2(H8);var Np={exports:{}},Jv;function Z8(){return Jv||(Jv=1,function(e,t){(function(n,l){l(t)})(hh,function(n){var l=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,81,2,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,9,5351,0,7,14,13835,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,983,6,110,6,6,9,4759,9,787719,239],m=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,4026,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,757,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],g="‌‍·̀-ͯ·҃-֑҇-ׇֽֿׁׂׅׄؐ-ًؚ-٩ٰۖ-ۜ۟-۪ۤۧۨ-ۭ۰-۹ܑܰ-݊ަ-ް߀-߉߫-߽߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛࢘-࢟࣊-ࣣ࣡-ःऺ-़ा-ॏ॑-ॗॢॣ०-९ঁ-ঃ়া-ৄেৈো-্ৗৢৣ০-৯৾ਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣ૦-૯ૺ-૿ଁ-ଃ଼ା-ୄେୈୋ-୍୕-ୗୢୣ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఀ-ఄ఼ా-ౄె-ైొ-్ౕౖౢౣ౦-౯ಁ-ಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣ೦-೯ೳഀ-ഃ഻഼ാ-ൄെ-ൈൊ-്ൗൢൣ൦-൯ඁ-ඃ්ා-ුූෘ-ෟ෦-෯ෲෳัิ-ฺ็-๎๐-๙ັິ-ຼ່-໎໐-໙༘༙༠-༩༹༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှ၀-၉ၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟፩-፱ᜒ-᜕ᜲ-᜴ᝒᝓᝲᝳ឴-៓៝០-៩᠋-᠍᠏-᠙ᢩᤠ-ᤫᤰ-᤻᥆-᥏᧐-᧚ᨗ-ᨛᩕ-ᩞ᩠-᩿᩼-᪉᪐-᪙᪰-᪽ᪿ-ᫎᬀ-ᬄ᬴-᭄᭐-᭙᭫-᭳ᮀ-ᮂᮡ-ᮭ᮰-᮹᯦-᯳ᰤ-᰷᱀-᱉᱐-᱙᳐-᳔᳒-᳨᳭᳴᳷-᳹᷀-᷿‌‍‿⁀⁔⃐-⃥⃜⃡-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯・꘠-꘩꙯ꙴ-꙽ꚞꚟ꛰꛱ꠂ꠆ꠋꠣ-ꠧ꠬ꢀꢁꢴ-ꣅ꣐-꣙꣠-꣱ꣿ-꤉ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀꧐-꧙ꧥ꧰-꧹ꨩ-ꨶꩃꩌꩍ꩐-꩙ꩻ-ꩽꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꫫ-ꫯꫵ꫶ꯣ-ꯪ꯬꯭꯰-꯹ﬞ︀-️︠-︯︳︴﹍-﹏０-９＿･",P="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙՠ-ֈא-תׯ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࡠ-ࡪࡰ-ࢇࢉ-ࢎࢠ-ࣉऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱৼਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡૹଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘ-ౚౝౠౡಀಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೝೞೠೡೱೲഄ-ഌഎ-ഐഒ-ഺഽൎൔ-ൖൟ-ൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄຆ-ຊຌ-ຣລວ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏽᏸ-ᏽᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜑᜟ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡸᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭌᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᲀ-ᲈᲐ-ᲺᲽ-Ჿᳩ-ᳬᳮ-ᳳᳵᳶᳺᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕ℘-ℝℤΩℨK-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞ々-〇〡-〩〱-〵〸-〼ぁ-ゖ゛-ゟァ-ヺー-ヿㄅ-ㄯㄱ-ㆎㆠ-ㆿㇰ-ㇿ㐀-䶿一-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꟊꟐꟑꟓꟕ-ꟙꟲ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꣽꣾꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭩꭰ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",u={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},Q="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",O={5:Q,"5module":Q+" export import",6:Q+" const class extends export import super"},re=/^in(stanceof)?$/,ee=new RegExp("["+P+"]"),ce=new RegExp("["+P+g+"]");function le(M,te){for(var Be=65536,Ye=0;Ye<te.length;Ye+=2){if(Be+=te[Ye],Be>M)return!1;if(Be+=te[Ye+1],Be>=M)return!0}return!1}function je(M,te){return M<65?M===36:M<91?!0:M<97?M===95:M<123?!0:M<=65535?M>=170&&ee.test(String.fromCharCode(M)):te===!1?!1:le(M,m)}function Je(M,te){return M<48?M===36:M<58?!0:M<65?!1:M<91?!0:M<97?M===95:M<123?!0:M<=65535?M>=170&&ce.test(String.fromCharCode(M)):te===!1?!1:le(M,m)||le(M,l)}var Xe=function(te,Be){Be===void 0&&(Be={}),this.label=te,this.keyword=Be.keyword,this.beforeExpr=!!Be.beforeExpr,this.startsExpr=!!Be.startsExpr,this.isLoop=!!Be.isLoop,this.isAssign=!!Be.isAssign,this.prefix=!!Be.prefix,this.postfix=!!Be.postfix,this.binop=Be.binop||null,this.updateContext=null};function Ke(M,te){return new Xe(M,{beforeExpr:!0,binop:te})}var xt={beforeExpr:!0},gt={startsExpr:!0},Mt={};function Ct(M,te){return te===void 0&&(te={}),te.keyword=M,Mt[M]=new Xe(M,te)}var Te={num:new Xe("num",gt),regexp:new Xe("regexp",gt),string:new Xe("string",gt),name:new Xe("name",gt),privateId:new Xe("privateId",gt),eof:new Xe("eof"),bracketL:new Xe("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new Xe("]"),braceL:new Xe("{",{beforeExpr:!0,startsExpr:!0}),braceR:new Xe("}"),parenL:new Xe("(",{beforeExpr:!0,startsExpr:!0}),parenR:new Xe(")"),comma:new Xe(",",xt),semi:new Xe(";",xt),colon:new Xe(":",xt),dot:new Xe("."),question:new Xe("?",xt),questionDot:new Xe("?."),arrow:new Xe("=>",xt),template:new Xe("template"),invalidTemplate:new Xe("invalidTemplate"),ellipsis:new Xe("...",xt),backQuote:new Xe("`",gt),dollarBraceL:new Xe("${",{beforeExpr:!0,startsExpr:!0}),eq:new Xe("=",{beforeExpr:!0,isAssign:!0}),assign:new Xe("_=",{beforeExpr:!0,isAssign:!0}),incDec:new Xe("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new Xe("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:Ke("||",1),logicalAND:Ke("&&",2),bitwiseOR:Ke("|",3),bitwiseXOR:Ke("^",4),bitwiseAND:Ke("&",5),equality:Ke("==/!=/===/!==",6),relational:Ke("</>/<=/>=",7),bitShift:Ke("<</>>/>>>",8),plusMin:new Xe("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:Ke("%",10),star:Ke("*",10),slash:Ke("/",10),starstar:new Xe("**",{beforeExpr:!0}),coalesce:Ke("??",1),_break:Ct("break"),_case:Ct("case",xt),_catch:Ct("catch"),_continue:Ct("continue"),_debugger:Ct("debugger"),_default:Ct("default",xt),_do:Ct("do",{isLoop:!0,beforeExpr:!0}),_else:Ct("else",xt),_finally:Ct("finally"),_for:Ct("for",{isLoop:!0}),_function:Ct("function",gt),_if:Ct("if"),_return:Ct("return",xt),_switch:Ct("switch"),_throw:Ct("throw",xt),_try:Ct("try"),_var:Ct("var"),_const:Ct("const"),_while:Ct("while",{isLoop:!0}),_with:Ct("with"),_new:Ct("new",{beforeExpr:!0,startsExpr:!0}),_this:Ct("this",gt),_super:Ct("super",gt),_class:Ct("class",gt),_extends:Ct("extends",xt),_export:Ct("export"),_import:Ct("import",gt),_null:Ct("null",gt),_true:Ct("true",gt),_false:Ct("false",gt),_in:Ct("in",{beforeExpr:!0,binop:7}),_instanceof:Ct("instanceof",{beforeExpr:!0,binop:7}),_typeof:Ct("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:Ct("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:Ct("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},Ai=/\r\n?|\n|\u2028|\u2029/,ii=new RegExp(Ai.source,"g");function xi(M){return M===10||M===13||M===8232||M===8233}function gi(M,te,Be){Be===void 0&&(Be=M.length);for(var Ye=te;Ye<Be;Ye++){var dt=M.charCodeAt(Ye);if(xi(dt))return Ye<Be-1&&dt===13&&M.charCodeAt(Ye+1)===10?Ye+2:Ye+1}return-1}var qt=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,di=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,mi=Object.prototype,vt=mi.hasOwnProperty,Ut=mi.toString,rt=Object.hasOwn||function(M,te){return vt.call(M,te)},Ft=Array.isArray||function(M){return Ut.call(M)==="[object Array]"},ui=Object.create(null);function Lt(M){return ui[M]||(ui[M]=new RegExp("^(?:"+M.replace(/ /g,"|")+")$"))}function Yt(M){return M<=65535?String.fromCharCode(M):(M-=65536,String.fromCharCode((M>>10)+55296,(M&1023)+56320))}var oi=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,yi=function(te,Be){this.line=te,this.column=Be};yi.prototype.offset=function(te){return new yi(this.line,this.column+te)};var Pi=function(te,Be,Ye){this.start=Be,this.end=Ye,te.sourceFile!==null&&(this.source=te.sourceFile)};function dn(M,te){for(var Be=1,Ye=0;;){var dt=gi(M,Ye,te);if(dt<0)return new yi(Be,te-Ye);++Be,Ye=dt}}var sn={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},Bn=!1;function fi(M){var te={};for(var Be in sn)te[Be]=M&&rt(M,Be)?M[Be]:sn[Be];if(te.ecmaVersion==="latest"?te.ecmaVersion=1e8:te.ecmaVersion==null?(!Bn&&typeof console=="object"&&console.warn&&(Bn=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),te.ecmaVersion=11):te.ecmaVersion>=2015&&(te.ecmaVersion-=2009),te.allowReserved==null&&(te.allowReserved=te.ecmaVersion<5),(!M||M.allowHashBang==null)&&(te.allowHashBang=te.ecmaVersion>=14),Ft(te.onToken)){var Ye=te.onToken;te.onToken=function(dt){return Ye.push(dt)}}return Ft(te.onComment)&&(te.onComment=$i(te,te.onComment)),te}function $i(M,te){return function(Be,Ye,dt,Qt,ti,Ii){var zi={type:Be?"Block":"Line",value:Ye,start:dt,end:Qt};M.locations&&(zi.loc=new Pi(this,ti,Ii)),M.ranges&&(zi.range=[dt,Qt]),te.push(zi)}}var li=1,Li=2,Ji=4,wi=8,ir=16,kn=32,vr=64,Or=128,Gi=256,zn=li|Li|Gi;function Cs(M,te){return Li|(M?Ji:0)|(te?wi:0)}var Kt=0,cn=1,fr=2,vn=3,Dn=4,pn=5,f=function(te,Be,Ye){this.options=te=fi(te),this.sourceFile=te.sourceFile,this.keywords=Lt(O[te.ecmaVersion>=6?6:te.sourceType==="module"?"5module":5]);var dt="";te.allowReserved!==!0&&(dt=u[te.ecmaVersion>=6?6:te.ecmaVersion===5?5:3],te.sourceType==="module"&&(dt+=" await")),this.reservedWords=Lt(dt);var Qt=(dt?dt+" ":"")+u.strict;this.reservedWordsStrict=Lt(Qt),this.reservedWordsStrictBind=Lt(Qt+" "+u.strictBind),this.input=String(Be),this.containsEsc=!1,Ye?(this.pos=Ye,this.lineStart=this.input.lastIndexOf(`
`,Ye-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(Ai).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=Te.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=te.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&te.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(li),this.regexpState=null,this.privateNameStack=[]},w={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};f.prototype.parse=function(){var te=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(te)},w.inFunction.get=function(){return(this.currentVarScope().flags&Li)>0},w.inGenerator.get=function(){return(this.currentVarScope().flags&wi)>0&&!this.currentVarScope().inClassFieldInit},w.inAsync.get=function(){return(this.currentVarScope().flags&Ji)>0&&!this.currentVarScope().inClassFieldInit},w.canAwait.get=function(){for(var M=this.scopeStack.length-1;M>=0;M--){var te=this.scopeStack[M];if(te.inClassFieldInit||te.flags&Gi)return!1;if(te.flags&Li)return(te.flags&Ji)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction},w.allowSuper.get=function(){var M=this.currentThisScope(),te=M.flags,Be=M.inClassFieldInit;return(te&vr)>0||Be||this.options.allowSuperOutsideMethod},w.allowDirectSuper.get=function(){return(this.currentThisScope().flags&Or)>0},w.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())},w.allowNewDotTarget.get=function(){var M=this.currentThisScope(),te=M.flags,Be=M.inClassFieldInit;return(te&(Li|Gi))>0||Be},w.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&Gi)>0},f.extend=function(){for(var te=[],Be=arguments.length;Be--;)te[Be]=arguments[Be];for(var Ye=this,dt=0;dt<te.length;dt++)Ye=te[dt](Ye);return Ye},f.parse=function(te,Be){return new this(Be,te).parse()},f.parseExpressionAt=function(te,Be,Ye){var dt=new this(Ye,te,Be);return dt.nextToken(),dt.parseExpression()},f.tokenizer=function(te,Be){return new this(Be,te)},Object.defineProperties(f.prototype,w);var B=f.prototype,U=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;B.strictDirective=function(M){if(this.options.ecmaVersion<5)return!1;for(;;){di.lastIndex=M,M+=di.exec(this.input)[0].length;var te=U.exec(this.input.slice(M));if(!te)return!1;if((te[1]||te[2])==="use strict"){di.lastIndex=M+te[0].length;var Be=di.exec(this.input),Ye=Be.index+Be[0].length,dt=this.input.charAt(Ye);return dt===";"||dt==="}"||Ai.test(Be[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(dt)||dt==="!"&&this.input.charAt(Ye+1)==="=")}M+=te[0].length,di.lastIndex=M,M+=di.exec(this.input)[0].length,this.input[M]===";"&&M++}},B.eat=function(M){return this.type===M?(this.next(),!0):!1},B.isContextual=function(M){return this.type===Te.name&&this.value===M&&!this.containsEsc},B.eatContextual=function(M){return this.isContextual(M)?(this.next(),!0):!1},B.expectContextual=function(M){this.eatContextual(M)||this.unexpected()},B.canInsertSemicolon=function(){return this.type===Te.eof||this.type===Te.braceR||Ai.test(this.input.slice(this.lastTokEnd,this.start))},B.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},B.semicolon=function(){!this.eat(Te.semi)&&!this.insertSemicolon()&&this.unexpected()},B.afterTrailingComma=function(M,te){if(this.type===M)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),te||this.next(),!0},B.expect=function(M){this.eat(M)||this.unexpected()},B.unexpected=function(M){this.raise(M??this.start,"Unexpected token")};var Z=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};B.checkPatternErrors=function(M,te){if(M){M.trailingComma>-1&&this.raiseRecoverable(M.trailingComma,"Comma is not permitted after the rest element");var Be=te?M.parenthesizedAssign:M.parenthesizedBind;Be>-1&&this.raiseRecoverable(Be,te?"Assigning to rvalue":"Parenthesized pattern")}},B.checkExpressionErrors=function(M,te){if(!M)return!1;var Be=M.shorthandAssign,Ye=M.doubleProto;if(!te)return Be>=0||Ye>=0;Be>=0&&this.raise(Be,"Shorthand property assignments are valid only in destructuring patterns"),Ye>=0&&this.raiseRecoverable(Ye,"Redefinition of __proto__ property")},B.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},B.isSimpleAssignTarget=function(M){return M.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(M.expression):M.type==="Identifier"||M.type==="MemberExpression"};var K=f.prototype;K.parseTopLevel=function(M){var te=Object.create(null);for(M.body||(M.body=[]);this.type!==Te.eof;){var Be=this.parseStatement(null,!0,te);M.body.push(Be)}if(this.inModule)for(var Ye=0,dt=Object.keys(this.undefinedExports);Ye<dt.length;Ye+=1){var Qt=dt[Ye];this.raiseRecoverable(this.undefinedExports[Qt].start,"Export '"+Qt+"' is not defined")}return this.adaptDirectivePrologue(M.body),this.next(),M.sourceType=this.options.sourceType,this.finishNode(M,"Program")};var se={kind:"loop"},oe={kind:"switch"};K.isLet=function(M){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;di.lastIndex=this.pos;var te=di.exec(this.input),Be=this.pos+te[0].length,Ye=this.input.charCodeAt(Be);if(Ye===91||Ye===92)return!0;if(M)return!1;if(Ye===123||Ye>55295&&Ye<56320)return!0;if(je(Ye,!0)){for(var dt=Be+1;Je(Ye=this.input.charCodeAt(dt),!0);)++dt;if(Ye===92||Ye>55295&&Ye<56320)return!0;var Qt=this.input.slice(Be,dt);if(!re.test(Qt))return!0}return!1},K.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;di.lastIndex=this.pos;var M=di.exec(this.input),te=this.pos+M[0].length,Be;return!Ai.test(this.input.slice(this.pos,te))&&this.input.slice(te,te+8)==="function"&&(te+8===this.input.length||!(Je(Be=this.input.charCodeAt(te+8))||Be>55295&&Be<56320))},K.parseStatement=function(M,te,Be){var Ye=this.type,dt=this.startNode(),Qt;switch(this.isLet(M)&&(Ye=Te._var,Qt="let"),Ye){case Te._break:case Te._continue:return this.parseBreakContinueStatement(dt,Ye.keyword);case Te._debugger:return this.parseDebuggerStatement(dt);case Te._do:return this.parseDoStatement(dt);case Te._for:return this.parseForStatement(dt);case Te._function:return M&&(this.strict||M!=="if"&&M!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(dt,!1,!M);case Te._class:return M&&this.unexpected(),this.parseClass(dt,!0);case Te._if:return this.parseIfStatement(dt);case Te._return:return this.parseReturnStatement(dt);case Te._switch:return this.parseSwitchStatement(dt);case Te._throw:return this.parseThrowStatement(dt);case Te._try:return this.parseTryStatement(dt);case Te._const:case Te._var:return Qt=Qt||this.value,M&&Qt!=="var"&&this.unexpected(),this.parseVarStatement(dt,Qt);case Te._while:return this.parseWhileStatement(dt);case Te._with:return this.parseWithStatement(dt);case Te.braceL:return this.parseBlock(!0,dt);case Te.semi:return this.parseEmptyStatement(dt);case Te._export:case Te._import:if(this.options.ecmaVersion>10&&Ye===Te._import){di.lastIndex=this.pos;var ti=di.exec(this.input),Ii=this.pos+ti[0].length,zi=this.input.charCodeAt(Ii);if(zi===40||zi===46)return this.parseExpressionStatement(dt,this.parseExpression())}return this.options.allowImportExportEverywhere||(te||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),Ye===Te._import?this.parseImport(dt):this.parseExport(dt,Be);default:if(this.isAsyncFunction())return M&&this.unexpected(),this.next(),this.parseFunctionStatement(dt,!0,!M);var En=this.value,Ln=this.parseExpression();return Ye===Te.name&&Ln.type==="Identifier"&&this.eat(Te.colon)?this.parseLabeledStatement(dt,En,Ln,M):this.parseExpressionStatement(dt,Ln)}},K.parseBreakContinueStatement=function(M,te){var Be=te==="break";this.next(),this.eat(Te.semi)||this.insertSemicolon()?M.label=null:this.type!==Te.name?this.unexpected():(M.label=this.parseIdent(),this.semicolon());for(var Ye=0;Ye<this.labels.length;++Ye){var dt=this.labels[Ye];if((M.label==null||dt.name===M.label.name)&&(dt.kind!=null&&(Be||dt.kind==="loop")||M.label&&Be))break}return Ye===this.labels.length&&this.raise(M.start,"Unsyntactic "+te),this.finishNode(M,Be?"BreakStatement":"ContinueStatement")},K.parseDebuggerStatement=function(M){return this.next(),this.semicolon(),this.finishNode(M,"DebuggerStatement")},K.parseDoStatement=function(M){return this.next(),this.labels.push(se),M.body=this.parseStatement("do"),this.labels.pop(),this.expect(Te._while),M.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(Te.semi):this.semicolon(),this.finishNode(M,"DoWhileStatement")},K.parseForStatement=function(M){this.next();var te=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(se),this.enterScope(0),this.expect(Te.parenL),this.type===Te.semi)return te>-1&&this.unexpected(te),this.parseFor(M,null);var Be=this.isLet();if(this.type===Te._var||this.type===Te._const||Be){var Ye=this.startNode(),dt=Be?"let":this.value;return this.next(),this.parseVar(Ye,!0,dt),this.finishNode(Ye,"VariableDeclaration"),(this.type===Te._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&Ye.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===Te._in?te>-1&&this.unexpected(te):M.await=te>-1),this.parseForIn(M,Ye)):(te>-1&&this.unexpected(te),this.parseFor(M,Ye))}var Qt=this.isContextual("let"),ti=!1,Ii=new Z,zi=this.parseExpression(te>-1?"await":!0,Ii);return this.type===Te._in||(ti=this.options.ecmaVersion>=6&&this.isContextual("of"))?(this.options.ecmaVersion>=9&&(this.type===Te._in?te>-1&&this.unexpected(te):M.await=te>-1),Qt&&ti&&this.raise(zi.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(zi,!1,Ii),this.checkLValPattern(zi),this.parseForIn(M,zi)):(this.checkExpressionErrors(Ii,!0),te>-1&&this.unexpected(te),this.parseFor(M,zi))},K.parseFunctionStatement=function(M,te,Be){return this.next(),this.parseFunction(M,ye|(Be?0:Me),!1,te)},K.parseIfStatement=function(M){return this.next(),M.test=this.parseParenExpression(),M.consequent=this.parseStatement("if"),M.alternate=this.eat(Te._else)?this.parseStatement("if"):null,this.finishNode(M,"IfStatement")},K.parseReturnStatement=function(M){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(Te.semi)||this.insertSemicolon()?M.argument=null:(M.argument=this.parseExpression(),this.semicolon()),this.finishNode(M,"ReturnStatement")},K.parseSwitchStatement=function(M){this.next(),M.discriminant=this.parseParenExpression(),M.cases=[],this.expect(Te.braceL),this.labels.push(oe),this.enterScope(0);for(var te,Be=!1;this.type!==Te.braceR;)if(this.type===Te._case||this.type===Te._default){var Ye=this.type===Te._case;te&&this.finishNode(te,"SwitchCase"),M.cases.push(te=this.startNode()),te.consequent=[],this.next(),Ye?te.test=this.parseExpression():(Be&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),Be=!0,te.test=null),this.expect(Te.colon)}else te||this.unexpected(),te.consequent.push(this.parseStatement(null));return this.exitScope(),te&&this.finishNode(te,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(M,"SwitchStatement")},K.parseThrowStatement=function(M){return this.next(),Ai.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),M.argument=this.parseExpression(),this.semicolon(),this.finishNode(M,"ThrowStatement")};var fe=[];K.parseCatchClauseParam=function(){var M=this.parseBindingAtom(),te=M.type==="Identifier";return this.enterScope(te?kn:0),this.checkLValPattern(M,te?Dn:fr),this.expect(Te.parenR),M},K.parseTryStatement=function(M){if(this.next(),M.block=this.parseBlock(),M.handler=null,this.type===Te._catch){var te=this.startNode();this.next(),this.eat(Te.parenL)?te.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),te.param=null,this.enterScope(0)),te.body=this.parseBlock(!1),this.exitScope(),M.handler=this.finishNode(te,"CatchClause")}return M.finalizer=this.eat(Te._finally)?this.parseBlock():null,!M.handler&&!M.finalizer&&this.raise(M.start,"Missing catch or finally clause"),this.finishNode(M,"TryStatement")},K.parseVarStatement=function(M,te,Be){return this.next(),this.parseVar(M,!1,te,Be),this.semicolon(),this.finishNode(M,"VariableDeclaration")},K.parseWhileStatement=function(M){return this.next(),M.test=this.parseParenExpression(),this.labels.push(se),M.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(M,"WhileStatement")},K.parseWithStatement=function(M){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),M.object=this.parseParenExpression(),M.body=this.parseStatement("with"),this.finishNode(M,"WithStatement")},K.parseEmptyStatement=function(M){return this.next(),this.finishNode(M,"EmptyStatement")},K.parseLabeledStatement=function(M,te,Be,Ye){for(var dt=0,Qt=this.labels;dt<Qt.length;dt+=1){var ti=Qt[dt];ti.name===te&&this.raise(Be.start,"Label '"+te+"' is already declared")}for(var Ii=this.type.isLoop?"loop":this.type===Te._switch?"switch":null,zi=this.labels.length-1;zi>=0;zi--){var En=this.labels[zi];if(En.statementStart===M.start)En.statementStart=this.start,En.kind=Ii;else break}return this.labels.push({name:te,kind:Ii,statementStart:this.start}),M.body=this.parseStatement(Ye?Ye.indexOf("label")===-1?Ye+"label":Ye:"label"),this.labels.pop(),M.label=Be,this.finishNode(M,"LabeledStatement")},K.parseExpressionStatement=function(M,te){return M.expression=te,this.semicolon(),this.finishNode(M,"ExpressionStatement")},K.parseBlock=function(M,te,Be){for(M===void 0&&(M=!0),te===void 0&&(te=this.startNode()),te.body=[],this.expect(Te.braceL),M&&this.enterScope(0);this.type!==Te.braceR;){var Ye=this.parseStatement(null);te.body.push(Ye)}return Be&&(this.strict=!1),this.next(),M&&this.exitScope(),this.finishNode(te,"BlockStatement")},K.parseFor=function(M,te){return M.init=te,this.expect(Te.semi),M.test=this.type===Te.semi?null:this.parseExpression(),this.expect(Te.semi),M.update=this.type===Te.parenR?null:this.parseExpression(),this.expect(Te.parenR),M.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(M,"ForStatement")},K.parseForIn=function(M,te){var Be=this.type===Te._in;return this.next(),te.type==="VariableDeclaration"&&te.declarations[0].init!=null&&(!Be||this.options.ecmaVersion<8||this.strict||te.kind!=="var"||te.declarations[0].id.type!=="Identifier")&&this.raise(te.start,(Be?"for-in":"for-of")+" loop variable declaration may not have an initializer"),M.left=te,M.right=Be?this.parseExpression():this.parseMaybeAssign(),this.expect(Te.parenR),M.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(M,Be?"ForInStatement":"ForOfStatement")},K.parseVar=function(M,te,Be,Ye){for(M.declarations=[],M.kind=Be;;){var dt=this.startNode();if(this.parseVarId(dt,Be),this.eat(Te.eq)?dt.init=this.parseMaybeAssign(te):!Ye&&Be==="const"&&!(this.type===Te._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():!Ye&&dt.id.type!=="Identifier"&&!(te&&(this.type===Te._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):dt.init=null,M.declarations.push(this.finishNode(dt,"VariableDeclarator")),!this.eat(Te.comma))break}return M},K.parseVarId=function(M,te){M.id=this.parseBindingAtom(),this.checkLValPattern(M.id,te==="var"?cn:fr,!1)};var ye=1,Me=2,xe=4;K.parseFunction=function(M,te,Be,Ye,dt){this.initFunction(M),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!Ye)&&(this.type===Te.star&&te&Me&&this.unexpected(),M.generator=this.eat(Te.star)),this.options.ecmaVersion>=8&&(M.async=!!Ye),te&ye&&(M.id=te&xe&&this.type!==Te.name?null:this.parseIdent(),M.id&&!(te&Me)&&this.checkLValSimple(M.id,this.strict||M.generator||M.async?this.treatFunctionsAsVar?cn:fr:vn));var Qt=this.yieldPos,ti=this.awaitPos,Ii=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(Cs(M.async,M.generator)),te&ye||(M.id=this.type===Te.name?this.parseIdent():null),this.parseFunctionParams(M),this.parseFunctionBody(M,Be,!1,dt),this.yieldPos=Qt,this.awaitPos=ti,this.awaitIdentPos=Ii,this.finishNode(M,te&ye?"FunctionDeclaration":"FunctionExpression")},K.parseFunctionParams=function(M){this.expect(Te.parenL),M.params=this.parseBindingList(Te.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},K.parseClass=function(M,te){this.next();var Be=this.strict;this.strict=!0,this.parseClassId(M,te),this.parseClassSuper(M);var Ye=this.enterClassBody(),dt=this.startNode(),Qt=!1;for(dt.body=[],this.expect(Te.braceL);this.type!==Te.braceR;){var ti=this.parseClassElement(M.superClass!==null);ti&&(dt.body.push(ti),ti.type==="MethodDefinition"&&ti.kind==="constructor"?(Qt&&this.raiseRecoverable(ti.start,"Duplicate constructor in the same class"),Qt=!0):ti.key&&ti.key.type==="PrivateIdentifier"&&ke(Ye,ti)&&this.raiseRecoverable(ti.key.start,"Identifier '#"+ti.key.name+"' has already been declared"))}return this.strict=Be,this.next(),M.body=this.finishNode(dt,"ClassBody"),this.exitClassBody(),this.finishNode(M,te?"ClassDeclaration":"ClassExpression")},K.parseClassElement=function(M){if(this.eat(Te.semi))return null;var te=this.options.ecmaVersion,Be=this.startNode(),Ye="",dt=!1,Qt=!1,ti="method",Ii=!1;if(this.eatContextual("static")){if(te>=13&&this.eat(Te.braceL))return this.parseClassStaticBlock(Be),Be;this.isClassElementNameStart()||this.type===Te.star?Ii=!0:Ye="static"}if(Be.static=Ii,!Ye&&te>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===Te.star)&&!this.canInsertSemicolon()?Qt=!0:Ye="async"),!Ye&&(te>=9||!Qt)&&this.eat(Te.star)&&(dt=!0),!Ye&&!Qt&&!dt){var zi=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?ti=zi:Ye=zi)}if(Ye?(Be.computed=!1,Be.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),Be.key.name=Ye,this.finishNode(Be.key,"Identifier")):this.parseClassElementName(Be),te<13||this.type===Te.parenL||ti!=="method"||dt||Qt){var En=!Be.static&&be(Be,"constructor"),Ln=En&&M;En&&ti!=="method"&&this.raise(Be.key.start,"Constructor can't have get/set modifier"),Be.kind=En?"constructor":ti,this.parseClassMethod(Be,dt,Qt,Ln)}else this.parseClassField(Be);return Be},K.isClassElementNameStart=function(){return this.type===Te.name||this.type===Te.privateId||this.type===Te.num||this.type===Te.string||this.type===Te.bracketL||this.type.keyword},K.parseClassElementName=function(M){this.type===Te.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),M.computed=!1,M.key=this.parsePrivateIdent()):this.parsePropertyName(M)},K.parseClassMethod=function(M,te,Be,Ye){var dt=M.key;M.kind==="constructor"?(te&&this.raise(dt.start,"Constructor can't be a generator"),Be&&this.raise(dt.start,"Constructor can't be an async method")):M.static&&be(M,"prototype")&&this.raise(dt.start,"Classes may not have a static property named prototype");var Qt=M.value=this.parseMethod(te,Be,Ye);return M.kind==="get"&&Qt.params.length!==0&&this.raiseRecoverable(Qt.start,"getter should have no params"),M.kind==="set"&&Qt.params.length!==1&&this.raiseRecoverable(Qt.start,"setter should have exactly one param"),M.kind==="set"&&Qt.params[0].type==="RestElement"&&this.raiseRecoverable(Qt.params[0].start,"Setter cannot use rest params"),this.finishNode(M,"MethodDefinition")},K.parseClassField=function(M){if(be(M,"constructor")?this.raise(M.key.start,"Classes can't have a field named 'constructor'"):M.static&&be(M,"prototype")&&this.raise(M.key.start,"Classes can't have a static field named 'prototype'"),this.eat(Te.eq)){var te=this.currentThisScope(),Be=te.inClassFieldInit;te.inClassFieldInit=!0,M.value=this.parseMaybeAssign(),te.inClassFieldInit=Be}else M.value=null;return this.semicolon(),this.finishNode(M,"PropertyDefinition")},K.parseClassStaticBlock=function(M){M.body=[];var te=this.labels;for(this.labels=[],this.enterScope(Gi|vr);this.type!==Te.braceR;){var Be=this.parseStatement(null);M.body.push(Be)}return this.next(),this.exitScope(),this.labels=te,this.finishNode(M,"StaticBlock")},K.parseClassId=function(M,te){this.type===Te.name?(M.id=this.parseIdent(),te&&this.checkLValSimple(M.id,fr,!1)):(te===!0&&this.unexpected(),M.id=null)},K.parseClassSuper=function(M){M.superClass=this.eat(Te._extends)?this.parseExprSubscripts(null,!1):null},K.enterClassBody=function(){var M={declared:Object.create(null),used:[]};return this.privateNameStack.push(M),M.declared},K.exitClassBody=function(){var M=this.privateNameStack.pop(),te=M.declared,Be=M.used;if(this.options.checkPrivateFields)for(var Ye=this.privateNameStack.length,dt=Ye===0?null:this.privateNameStack[Ye-1],Qt=0;Qt<Be.length;++Qt){var ti=Be[Qt];rt(te,ti.name)||(dt?dt.used.push(ti):this.raiseRecoverable(ti.start,"Private field '#"+ti.name+"' must be declared in an enclosing class"))}};function ke(M,te){var Be=te.key.name,Ye=M[Be],dt="true";return te.type==="MethodDefinition"&&(te.kind==="get"||te.kind==="set")&&(dt=(te.static?"s":"i")+te.kind),Ye==="iget"&&dt==="iset"||Ye==="iset"&&dt==="iget"||Ye==="sget"&&dt==="sset"||Ye==="sset"&&dt==="sget"?(M[Be]="true",!1):Ye?!0:(M[Be]=dt,!1)}function be(M,te){var Be=M.computed,Ye=M.key;return!Be&&(Ye.type==="Identifier"&&Ye.name===te||Ye.type==="Literal"&&Ye.value===te)}K.parseExportAllDeclaration=function(M,te){return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(M.exported=this.parseModuleExportName(),this.checkExport(te,M.exported,this.lastTokStart)):M.exported=null),this.expectContextual("from"),this.type!==Te.string&&this.unexpected(),M.source=this.parseExprAtom(),this.semicolon(),this.finishNode(M,"ExportAllDeclaration")},K.parseExport=function(M,te){if(this.next(),this.eat(Te.star))return this.parseExportAllDeclaration(M,te);if(this.eat(Te._default))return this.checkExport(te,"default",this.lastTokStart),M.declaration=this.parseExportDefaultDeclaration(),this.finishNode(M,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())M.declaration=this.parseExportDeclaration(M),M.declaration.type==="VariableDeclaration"?this.checkVariableExport(te,M.declaration.declarations):this.checkExport(te,M.declaration.id,M.declaration.id.start),M.specifiers=[],M.source=null;else{if(M.declaration=null,M.specifiers=this.parseExportSpecifiers(te),this.eatContextual("from"))this.type!==Te.string&&this.unexpected(),M.source=this.parseExprAtom();else{for(var Be=0,Ye=M.specifiers;Be<Ye.length;Be+=1){var dt=Ye[Be];this.checkUnreserved(dt.local),this.checkLocalExport(dt.local),dt.local.type==="Literal"&&this.raise(dt.local.start,"A string literal cannot be used as an exported binding without `from`.")}M.source=null}this.semicolon()}return this.finishNode(M,"ExportNamedDeclaration")},K.parseExportDeclaration=function(M){return this.parseStatement(null)},K.parseExportDefaultDeclaration=function(){var M;if(this.type===Te._function||(M=this.isAsyncFunction())){var te=this.startNode();return this.next(),M&&this.next(),this.parseFunction(te,ye|xe,!1,M)}else if(this.type===Te._class){var Be=this.startNode();return this.parseClass(Be,"nullableID")}else{var Ye=this.parseMaybeAssign();return this.semicolon(),Ye}},K.checkExport=function(M,te,Be){M&&(typeof te!="string"&&(te=te.type==="Identifier"?te.name:te.value),rt(M,te)&&this.raiseRecoverable(Be,"Duplicate export '"+te+"'"),M[te]=!0)},K.checkPatternExport=function(M,te){var Be=te.type;if(Be==="Identifier")this.checkExport(M,te,te.start);else if(Be==="ObjectPattern")for(var Ye=0,dt=te.properties;Ye<dt.length;Ye+=1){var Qt=dt[Ye];this.checkPatternExport(M,Qt)}else if(Be==="ArrayPattern")for(var ti=0,Ii=te.elements;ti<Ii.length;ti+=1){var zi=Ii[ti];zi&&this.checkPatternExport(M,zi)}else Be==="Property"?this.checkPatternExport(M,te.value):Be==="AssignmentPattern"?this.checkPatternExport(M,te.left):Be==="RestElement"&&this.checkPatternExport(M,te.argument)},K.checkVariableExport=function(M,te){if(M)for(var Be=0,Ye=te;Be<Ye.length;Be+=1){var dt=Ye[Be];this.checkPatternExport(M,dt.id)}},K.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()},K.parseExportSpecifier=function(M){var te=this.startNode();return te.local=this.parseModuleExportName(),te.exported=this.eatContextual("as")?this.parseModuleExportName():te.local,this.checkExport(M,te.exported,te.exported.start),this.finishNode(te,"ExportSpecifier")},K.parseExportSpecifiers=function(M){var te=[],Be=!0;for(this.expect(Te.braceL);!this.eat(Te.braceR);){if(Be)Be=!1;else if(this.expect(Te.comma),this.afterTrailingComma(Te.braceR))break;te.push(this.parseExportSpecifier(M))}return te},K.parseImport=function(M){return this.next(),this.type===Te.string?(M.specifiers=fe,M.source=this.parseExprAtom()):(M.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),M.source=this.type===Te.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(M,"ImportDeclaration")},K.parseImportSpecifier=function(){var M=this.startNode();return M.imported=this.parseModuleExportName(),this.eatContextual("as")?M.local=this.parseIdent():(this.checkUnreserved(M.imported),M.local=M.imported),this.checkLValSimple(M.local,fr),this.finishNode(M,"ImportSpecifier")},K.parseImportDefaultSpecifier=function(){var M=this.startNode();return M.local=this.parseIdent(),this.checkLValSimple(M.local,fr),this.finishNode(M,"ImportDefaultSpecifier")},K.parseImportNamespaceSpecifier=function(){var M=this.startNode();return this.next(),this.expectContextual("as"),M.local=this.parseIdent(),this.checkLValSimple(M.local,fr),this.finishNode(M,"ImportNamespaceSpecifier")},K.parseImportSpecifiers=function(){var M=[],te=!0;if(this.type===Te.name&&(M.push(this.parseImportDefaultSpecifier()),!this.eat(Te.comma)))return M;if(this.type===Te.star)return M.push(this.parseImportNamespaceSpecifier()),M;for(this.expect(Te.braceL);!this.eat(Te.braceR);){if(te)te=!1;else if(this.expect(Te.comma),this.afterTrailingComma(Te.braceR))break;M.push(this.parseImportSpecifier())}return M},K.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===Te.string){var M=this.parseLiteral(this.value);return oi.test(M.value)&&this.raise(M.start,"An export name cannot include a lone surrogate."),M}return this.parseIdent(!0)},K.adaptDirectivePrologue=function(M){for(var te=0;te<M.length&&this.isDirectiveCandidate(M[te]);++te)M[te].directive=M[te].expression.raw.slice(1,-1)},K.isDirectiveCandidate=function(M){return this.options.ecmaVersion>=5&&M.type==="ExpressionStatement"&&M.expression.type==="Literal"&&typeof M.expression.value=="string"&&(this.input[M.start]==='"'||this.input[M.start]==="'")};var Ne=f.prototype;Ne.toAssignable=function(M,te,Be){if(this.options.ecmaVersion>=6&&M)switch(M.type){case"Identifier":this.inAsync&&M.name==="await"&&this.raise(M.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":M.type="ObjectPattern",Be&&this.checkPatternErrors(Be,!0);for(var Ye=0,dt=M.properties;Ye<dt.length;Ye+=1){var Qt=dt[Ye];this.toAssignable(Qt,te),Qt.type==="RestElement"&&(Qt.argument.type==="ArrayPattern"||Qt.argument.type==="ObjectPattern")&&this.raise(Qt.argument.start,"Unexpected token")}break;case"Property":M.kind!=="init"&&this.raise(M.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(M.value,te);break;case"ArrayExpression":M.type="ArrayPattern",Be&&this.checkPatternErrors(Be,!0),this.toAssignableList(M.elements,te);break;case"SpreadElement":M.type="RestElement",this.toAssignable(M.argument,te),M.argument.type==="AssignmentPattern"&&this.raise(M.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":M.operator!=="="&&this.raise(M.left.end,"Only '=' operator can be used for specifying default value."),M.type="AssignmentPattern",delete M.operator,this.toAssignable(M.left,te);break;case"ParenthesizedExpression":this.toAssignable(M.expression,te,Be);break;case"ChainExpression":this.raiseRecoverable(M.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!te)break;default:this.raise(M.start,"Assigning to rvalue")}else Be&&this.checkPatternErrors(Be,!0);return M},Ne.toAssignableList=function(M,te){for(var Be=M.length,Ye=0;Ye<Be;Ye++){var dt=M[Ye];dt&&this.toAssignable(dt,te)}if(Be){var Qt=M[Be-1];this.options.ecmaVersion===6&&te&&Qt&&Qt.type==="RestElement"&&Qt.argument.type!=="Identifier"&&this.unexpected(Qt.argument.start)}return M},Ne.parseSpread=function(M){var te=this.startNode();return this.next(),te.argument=this.parseMaybeAssign(!1,M),this.finishNode(te,"SpreadElement")},Ne.parseRestBinding=function(){var M=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==Te.name&&this.unexpected(),M.argument=this.parseBindingAtom(),this.finishNode(M,"RestElement")},Ne.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case Te.bracketL:var M=this.startNode();return this.next(),M.elements=this.parseBindingList(Te.bracketR,!0,!0),this.finishNode(M,"ArrayPattern");case Te.braceL:return this.parseObj(!0)}return this.parseIdent()},Ne.parseBindingList=function(M,te,Be,Ye){for(var dt=[],Qt=!0;!this.eat(M);)if(Qt?Qt=!1:this.expect(Te.comma),te&&this.type===Te.comma)dt.push(null);else{if(Be&&this.afterTrailingComma(M))break;if(this.type===Te.ellipsis){var ti=this.parseRestBinding();this.parseBindingListItem(ti),dt.push(ti),this.type===Te.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(M);break}else dt.push(this.parseAssignableListItem(Ye))}return dt},Ne.parseAssignableListItem=function(M){var te=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(te),te},Ne.parseBindingListItem=function(M){return M},Ne.parseMaybeDefault=function(M,te,Be){if(Be=Be||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(Te.eq))return Be;var Ye=this.startNodeAt(M,te);return Ye.left=Be,Ye.right=this.parseMaybeAssign(),this.finishNode(Ye,"AssignmentPattern")},Ne.checkLValSimple=function(M,te,Be){te===void 0&&(te=Kt);var Ye=te!==Kt;switch(M.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(M.name)&&this.raiseRecoverable(M.start,(Ye?"Binding ":"Assigning to ")+M.name+" in strict mode"),Ye&&(te===fr&&M.name==="let"&&this.raiseRecoverable(M.start,"let is disallowed as a lexically bound name"),Be&&(rt(Be,M.name)&&this.raiseRecoverable(M.start,"Argument name clash"),Be[M.name]=!0),te!==pn&&this.declareName(M.name,te,M.start));break;case"ChainExpression":this.raiseRecoverable(M.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":Ye&&this.raiseRecoverable(M.start,"Binding member expression");break;case"ParenthesizedExpression":return Ye&&this.raiseRecoverable(M.start,"Binding parenthesized expression"),this.checkLValSimple(M.expression,te,Be);default:this.raise(M.start,(Ye?"Binding":"Assigning to")+" rvalue")}},Ne.checkLValPattern=function(M,te,Be){switch(te===void 0&&(te=Kt),M.type){case"ObjectPattern":for(var Ye=0,dt=M.properties;Ye<dt.length;Ye+=1){var Qt=dt[Ye];this.checkLValInnerPattern(Qt,te,Be)}break;case"ArrayPattern":for(var ti=0,Ii=M.elements;ti<Ii.length;ti+=1){var zi=Ii[ti];zi&&this.checkLValInnerPattern(zi,te,Be)}break;default:this.checkLValSimple(M,te,Be)}},Ne.checkLValInnerPattern=function(M,te,Be){switch(te===void 0&&(te=Kt),M.type){case"Property":this.checkLValInnerPattern(M.value,te,Be);break;case"AssignmentPattern":this.checkLValPattern(M.left,te,Be);break;case"RestElement":this.checkLValPattern(M.argument,te,Be);break;default:this.checkLValPattern(M,te,Be)}};var Re=function(te,Be,Ye,dt,Qt){this.token=te,this.isExpr=!!Be,this.preserveSpace=!!Ye,this.override=dt,this.generator=!!Qt},Fe={b_stat:new Re("{",!1),b_expr:new Re("{",!0),b_tmpl:new Re("${",!1),p_stat:new Re("(",!1),p_expr:new Re("(",!0),q_tmpl:new Re("`",!0,!0,function(M){return M.tryReadTemplateToken()}),f_stat:new Re("function",!1),f_expr:new Re("function",!0),f_expr_gen:new Re("function",!0,!1,null,!0),f_gen:new Re("function",!1,!1,null,!0)},de=f.prototype;de.initialContext=function(){return[Fe.b_stat]},de.curContext=function(){return this.context[this.context.length-1]},de.braceIsBlock=function(M){var te=this.curContext();return te===Fe.f_expr||te===Fe.f_stat?!0:M===Te.colon&&(te===Fe.b_stat||te===Fe.b_expr)?!te.isExpr:M===Te._return||M===Te.name&&this.exprAllowed?Ai.test(this.input.slice(this.lastTokEnd,this.start)):M===Te._else||M===Te.semi||M===Te.eof||M===Te.parenR||M===Te.arrow?!0:M===Te.braceL?te===Fe.b_stat:M===Te._var||M===Te._const||M===Te.name?!1:!this.exprAllowed},de.inGeneratorContext=function(){for(var M=this.context.length-1;M>=1;M--){var te=this.context[M];if(te.token==="function")return te.generator}return!1},de.updateContext=function(M){var te,Be=this.type;Be.keyword&&M===Te.dot?this.exprAllowed=!1:(te=Be.updateContext)?te.call(this,M):this.exprAllowed=Be.beforeExpr},de.overrideContext=function(M){this.curContext()!==M&&(this.context[this.context.length-1]=M)},Te.parenR.updateContext=Te.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var M=this.context.pop();M===Fe.b_stat&&this.curContext().token==="function"&&(M=this.context.pop()),this.exprAllowed=!M.isExpr},Te.braceL.updateContext=function(M){this.context.push(this.braceIsBlock(M)?Fe.b_stat:Fe.b_expr),this.exprAllowed=!0},Te.dollarBraceL.updateContext=function(){this.context.push(Fe.b_tmpl),this.exprAllowed=!0},Te.parenL.updateContext=function(M){var te=M===Te._if||M===Te._for||M===Te._with||M===Te._while;this.context.push(te?Fe.p_stat:Fe.p_expr),this.exprAllowed=!0},Te.incDec.updateContext=function(){},Te._function.updateContext=Te._class.updateContext=function(M){M.beforeExpr&&M!==Te._else&&!(M===Te.semi&&this.curContext()!==Fe.p_stat)&&!(M===Te._return&&Ai.test(this.input.slice(this.lastTokEnd,this.start)))&&!((M===Te.colon||M===Te.braceL)&&this.curContext()===Fe.b_stat)?this.context.push(Fe.f_expr):this.context.push(Fe.f_stat),this.exprAllowed=!1},Te.colon.updateContext=function(){this.curContext().token==="function"&&this.context.pop(),this.exprAllowed=!0},Te.backQuote.updateContext=function(){this.curContext()===Fe.q_tmpl?this.context.pop():this.context.push(Fe.q_tmpl),this.exprAllowed=!1},Te.star.updateContext=function(M){if(M===Te._function){var te=this.context.length-1;this.context[te]===Fe.f_expr?this.context[te]=Fe.f_expr_gen:this.context[te]=Fe.f_gen}this.exprAllowed=!0},Te.name.updateContext=function(M){var te=!1;this.options.ecmaVersion>=6&&M!==Te.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(te=!0),this.exprAllowed=te};var Ae=f.prototype;Ae.checkPropClash=function(M,te,Be){if(!(this.options.ecmaVersion>=9&&M.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(M.computed||M.method||M.shorthand))){var Ye=M.key,dt;switch(Ye.type){case"Identifier":dt=Ye.name;break;case"Literal":dt=String(Ye.value);break;default:return}var Qt=M.kind;if(this.options.ecmaVersion>=6){dt==="__proto__"&&Qt==="init"&&(te.proto&&(Be?Be.doubleProto<0&&(Be.doubleProto=Ye.start):this.raiseRecoverable(Ye.start,"Redefinition of __proto__ property")),te.proto=!0);return}dt="$"+dt;var ti=te[dt];if(ti){var Ii;Qt==="init"?Ii=this.strict&&ti.init||ti.get||ti.set:Ii=ti.init||ti[Qt],Ii&&this.raiseRecoverable(Ye.start,"Redefinition of property")}else ti=te[dt]={init:!1,get:!1,set:!1};ti[Qt]=!0}},Ae.parseExpression=function(M,te){var Be=this.start,Ye=this.startLoc,dt=this.parseMaybeAssign(M,te);if(this.type===Te.comma){var Qt=this.startNodeAt(Be,Ye);for(Qt.expressions=[dt];this.eat(Te.comma);)Qt.expressions.push(this.parseMaybeAssign(M,te));return this.finishNode(Qt,"SequenceExpression")}return dt},Ae.parseMaybeAssign=function(M,te,Be){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(M);this.exprAllowed=!1}var Ye=!1,dt=-1,Qt=-1,ti=-1;te?(dt=te.parenthesizedAssign,Qt=te.trailingComma,ti=te.doubleProto,te.parenthesizedAssign=te.trailingComma=-1):(te=new Z,Ye=!0);var Ii=this.start,zi=this.startLoc;(this.type===Te.parenL||this.type===Te.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=M==="await");var En=this.parseMaybeConditional(M,te);if(Be&&(En=Be.call(this,En,Ii,zi)),this.type.isAssign){var Ln=this.startNodeAt(Ii,zi);return Ln.operator=this.value,this.type===Te.eq&&(En=this.toAssignable(En,!1,te)),Ye||(te.parenthesizedAssign=te.trailingComma=te.doubleProto=-1),te.shorthandAssign>=En.start&&(te.shorthandAssign=-1),this.type===Te.eq?this.checkLValPattern(En):this.checkLValSimple(En),Ln.left=En,this.next(),Ln.right=this.parseMaybeAssign(M),ti>-1&&(te.doubleProto=ti),this.finishNode(Ln,"AssignmentExpression")}else Ye&&this.checkExpressionErrors(te,!0);return dt>-1&&(te.parenthesizedAssign=dt),Qt>-1&&(te.trailingComma=Qt),En},Ae.parseMaybeConditional=function(M,te){var Be=this.start,Ye=this.startLoc,dt=this.parseExprOps(M,te);if(this.checkExpressionErrors(te))return dt;if(this.eat(Te.question)){var Qt=this.startNodeAt(Be,Ye);return Qt.test=dt,Qt.consequent=this.parseMaybeAssign(),this.expect(Te.colon),Qt.alternate=this.parseMaybeAssign(M),this.finishNode(Qt,"ConditionalExpression")}return dt},Ae.parseExprOps=function(M,te){var Be=this.start,Ye=this.startLoc,dt=this.parseMaybeUnary(te,!1,!1,M);return this.checkExpressionErrors(te)||dt.start===Be&&dt.type==="ArrowFunctionExpression"?dt:this.parseExprOp(dt,Be,Ye,-1,M)},Ae.parseExprOp=function(M,te,Be,Ye,dt){var Qt=this.type.binop;if(Qt!=null&&(!dt||this.type!==Te._in)&&Qt>Ye){var ti=this.type===Te.logicalOR||this.type===Te.logicalAND,Ii=this.type===Te.coalesce;Ii&&(Qt=Te.logicalAND.binop);var zi=this.value;this.next();var En=this.start,Ln=this.startLoc,or=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,dt),En,Ln,Qt,dt),na=this.buildBinary(te,Be,M,or,zi,ti||Ii);return(ti&&this.type===Te.coalesce||Ii&&(this.type===Te.logicalOR||this.type===Te.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(na,te,Be,Ye,dt)}return M},Ae.buildBinary=function(M,te,Be,Ye,dt,Qt){Ye.type==="PrivateIdentifier"&&this.raise(Ye.start,"Private identifier can only be left side of binary expression");var ti=this.startNodeAt(M,te);return ti.left=Be,ti.operator=dt,ti.right=Ye,this.finishNode(ti,Qt?"LogicalExpression":"BinaryExpression")},Ae.parseMaybeUnary=function(M,te,Be,Ye){var dt=this.start,Qt=this.startLoc,ti;if(this.isContextual("await")&&this.canAwait)ti=this.parseAwait(Ye),te=!0;else if(this.type.prefix){var Ii=this.startNode(),zi=this.type===Te.incDec;Ii.operator=this.value,Ii.prefix=!0,this.next(),Ii.argument=this.parseMaybeUnary(null,!0,zi,Ye),this.checkExpressionErrors(M,!0),zi?this.checkLValSimple(Ii.argument):this.strict&&Ii.operator==="delete"&&Ii.argument.type==="Identifier"?this.raiseRecoverable(Ii.start,"Deleting local variable in strict mode"):Ii.operator==="delete"&&W(Ii.argument)?this.raiseRecoverable(Ii.start,"Private fields can not be deleted"):te=!0,ti=this.finishNode(Ii,zi?"UpdateExpression":"UnaryExpression")}else if(!te&&this.type===Te.privateId)(Ye||this.privateNameStack.length===0)&&this.options.checkPrivateFields&&this.unexpected(),ti=this.parsePrivateIdent(),this.type!==Te._in&&this.unexpected();else{if(ti=this.parseExprSubscripts(M,Ye),this.checkExpressionErrors(M))return ti;for(;this.type.postfix&&!this.canInsertSemicolon();){var En=this.startNodeAt(dt,Qt);En.operator=this.value,En.prefix=!1,En.argument=ti,this.checkLValSimple(ti),this.next(),ti=this.finishNode(En,"UpdateExpression")}}if(!Be&&this.eat(Te.starstar))if(te)this.unexpected(this.lastTokStart);else return this.buildBinary(dt,Qt,ti,this.parseMaybeUnary(null,!1,!1,Ye),"**",!1);else return ti};function W(M){return M.type==="MemberExpression"&&M.property.type==="PrivateIdentifier"||M.type==="ChainExpression"&&W(M.expression)}Ae.parseExprSubscripts=function(M,te){var Be=this.start,Ye=this.startLoc,dt=this.parseExprAtom(M,te);if(dt.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return dt;var Qt=this.parseSubscripts(dt,Be,Ye,!1,te);return M&&Qt.type==="MemberExpression"&&(M.parenthesizedAssign>=Qt.start&&(M.parenthesizedAssign=-1),M.parenthesizedBind>=Qt.start&&(M.parenthesizedBind=-1),M.trailingComma>=Qt.start&&(M.trailingComma=-1)),Qt},Ae.parseSubscripts=function(M,te,Be,Ye,dt){for(var Qt=this.options.ecmaVersion>=8&&M.type==="Identifier"&&M.name==="async"&&this.lastTokEnd===M.end&&!this.canInsertSemicolon()&&M.end-M.start===5&&this.potentialArrowAt===M.start,ti=!1;;){var Ii=this.parseSubscript(M,te,Be,Ye,Qt,ti,dt);if(Ii.optional&&(ti=!0),Ii===M||Ii.type==="ArrowFunctionExpression"){if(ti){var zi=this.startNodeAt(te,Be);zi.expression=Ii,Ii=this.finishNode(zi,"ChainExpression")}return Ii}M=Ii}},Ae.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(Te.arrow)},Ae.parseSubscriptAsyncArrow=function(M,te,Be,Ye){return this.parseArrowExpression(this.startNodeAt(M,te),Be,!0,Ye)},Ae.parseSubscript=function(M,te,Be,Ye,dt,Qt,ti){var Ii=this.options.ecmaVersion>=11,zi=Ii&&this.eat(Te.questionDot);Ye&&zi&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var En=this.eat(Te.bracketL);if(En||zi&&this.type!==Te.parenL&&this.type!==Te.backQuote||this.eat(Te.dot)){var Ln=this.startNodeAt(te,Be);Ln.object=M,En?(Ln.property=this.parseExpression(),this.expect(Te.bracketR)):this.type===Te.privateId&&M.type!=="Super"?Ln.property=this.parsePrivateIdent():Ln.property=this.parseIdent(this.options.allowReserved!=="never"),Ln.computed=!!En,Ii&&(Ln.optional=zi),M=this.finishNode(Ln,"MemberExpression")}else if(!Ye&&this.eat(Te.parenL)){var or=new Z,na=this.yieldPos,ra=this.awaitPos,sa=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var Da=this.parseExprList(Te.parenR,this.options.ecmaVersion>=8,!1,or);if(dt&&!zi&&this.shouldParseAsyncArrow())return this.checkPatternErrors(or,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=na,this.awaitPos=ra,this.awaitIdentPos=sa,this.parseSubscriptAsyncArrow(te,Be,Da,ti);this.checkExpressionErrors(or,!0),this.yieldPos=na||this.yieldPos,this.awaitPos=ra||this.awaitPos,this.awaitIdentPos=sa||this.awaitIdentPos;var Yn=this.startNodeAt(te,Be);Yn.callee=M,Yn.arguments=Da,Ii&&(Yn.optional=zi),M=this.finishNode(Yn,"CallExpression")}else if(this.type===Te.backQuote){(zi||Qt)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var yn=this.startNodeAt(te,Be);yn.tag=M,yn.quasi=this.parseTemplate({isTagged:!0}),M=this.finishNode(yn,"TaggedTemplateExpression")}return M},Ae.parseExprAtom=function(M,te,Be){this.type===Te.slash&&this.readRegexp();var Ye,dt=this.potentialArrowAt===this.start;switch(this.type){case Te._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),Ye=this.startNode(),this.next(),this.type===Te.parenL&&!this.allowDirectSuper&&this.raise(Ye.start,"super() call outside constructor of a subclass"),this.type!==Te.dot&&this.type!==Te.bracketL&&this.type!==Te.parenL&&this.unexpected(),this.finishNode(Ye,"Super");case Te._this:return Ye=this.startNode(),this.next(),this.finishNode(Ye,"ThisExpression");case Te.name:var Qt=this.start,ti=this.startLoc,Ii=this.containsEsc,zi=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!Ii&&zi.name==="async"&&!this.canInsertSemicolon()&&this.eat(Te._function))return this.overrideContext(Fe.f_expr),this.parseFunction(this.startNodeAt(Qt,ti),0,!1,!0,te);if(dt&&!this.canInsertSemicolon()){if(this.eat(Te.arrow))return this.parseArrowExpression(this.startNodeAt(Qt,ti),[zi],!1,te);if(this.options.ecmaVersion>=8&&zi.name==="async"&&this.type===Te.name&&!Ii&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return zi=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(Te.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(Qt,ti),[zi],!0,te)}return zi;case Te.regexp:var En=this.value;return Ye=this.parseLiteral(En.value),Ye.regex={pattern:En.pattern,flags:En.flags},Ye;case Te.num:case Te.string:return this.parseLiteral(this.value);case Te._null:case Te._true:case Te._false:return Ye=this.startNode(),Ye.value=this.type===Te._null?null:this.type===Te._true,Ye.raw=this.type.keyword,this.next(),this.finishNode(Ye,"Literal");case Te.parenL:var Ln=this.start,or=this.parseParenAndDistinguishExpression(dt,te);return M&&(M.parenthesizedAssign<0&&!this.isSimpleAssignTarget(or)&&(M.parenthesizedAssign=Ln),M.parenthesizedBind<0&&(M.parenthesizedBind=Ln)),or;case Te.bracketL:return Ye=this.startNode(),this.next(),Ye.elements=this.parseExprList(Te.bracketR,!0,!0,M),this.finishNode(Ye,"ArrayExpression");case Te.braceL:return this.overrideContext(Fe.b_expr),this.parseObj(!1,M);case Te._function:return Ye=this.startNode(),this.next(),this.parseFunction(Ye,0);case Te._class:return this.parseClass(this.startNode(),!1);case Te._new:return this.parseNew();case Te.backQuote:return this.parseTemplate();case Te._import:return this.options.ecmaVersion>=11?this.parseExprImport(Be):this.unexpected();default:return this.parseExprAtomDefault()}},Ae.parseExprAtomDefault=function(){this.unexpected()},Ae.parseExprImport=function(M){var te=this.startNode();if(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import"),this.next(),this.type===Te.parenL&&!M)return this.parseDynamicImport(te);if(this.type===Te.dot){var Be=this.startNodeAt(te.start,te.loc&&te.loc.start);return Be.name="import",te.meta=this.finishNode(Be,"Identifier"),this.parseImportMeta(te)}else this.unexpected()},Ae.parseDynamicImport=function(M){if(this.next(),M.source=this.parseMaybeAssign(),!this.eat(Te.parenR)){var te=this.start;this.eat(Te.comma)&&this.eat(Te.parenR)?this.raiseRecoverable(te,"Trailing comma is not allowed in import()"):this.unexpected(te)}return this.finishNode(M,"ImportExpression")},Ae.parseImportMeta=function(M){this.next();var te=this.containsEsc;return M.property=this.parseIdent(!0),M.property.name!=="meta"&&this.raiseRecoverable(M.property.start,"The only valid meta property for import is 'import.meta'"),te&&this.raiseRecoverable(M.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(M.start,"Cannot use 'import.meta' outside a module"),this.finishNode(M,"MetaProperty")},Ae.parseLiteral=function(M){var te=this.startNode();return te.value=M,te.raw=this.input.slice(this.start,this.end),te.raw.charCodeAt(te.raw.length-1)===110&&(te.bigint=te.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(te,"Literal")},Ae.parseParenExpression=function(){this.expect(Te.parenL);var M=this.parseExpression();return this.expect(Te.parenR),M},Ae.shouldParseArrow=function(M){return!this.canInsertSemicolon()},Ae.parseParenAndDistinguishExpression=function(M,te){var Be=this.start,Ye=this.startLoc,dt,Qt=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var ti=this.start,Ii=this.startLoc,zi=[],En=!0,Ln=!1,or=new Z,na=this.yieldPos,ra=this.awaitPos,sa;for(this.yieldPos=0,this.awaitPos=0;this.type!==Te.parenR;)if(En?En=!1:this.expect(Te.comma),Qt&&this.afterTrailingComma(Te.parenR,!0)){Ln=!0;break}else if(this.type===Te.ellipsis){sa=this.start,zi.push(this.parseParenItem(this.parseRestBinding())),this.type===Te.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}else zi.push(this.parseMaybeAssign(!1,or,this.parseParenItem));var Da=this.lastTokEnd,Yn=this.lastTokEndLoc;if(this.expect(Te.parenR),M&&this.shouldParseArrow(zi)&&this.eat(Te.arrow))return this.checkPatternErrors(or,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=na,this.awaitPos=ra,this.parseParenArrowList(Be,Ye,zi,te);(!zi.length||Ln)&&this.unexpected(this.lastTokStart),sa&&this.unexpected(sa),this.checkExpressionErrors(or,!0),this.yieldPos=na||this.yieldPos,this.awaitPos=ra||this.awaitPos,zi.length>1?(dt=this.startNodeAt(ti,Ii),dt.expressions=zi,this.finishNodeAt(dt,"SequenceExpression",Da,Yn)):dt=zi[0]}else dt=this.parseParenExpression();if(this.options.preserveParens){var yn=this.startNodeAt(Be,Ye);return yn.expression=dt,this.finishNode(yn,"ParenthesizedExpression")}else return dt},Ae.parseParenItem=function(M){return M},Ae.parseParenArrowList=function(M,te,Be,Ye){return this.parseArrowExpression(this.startNodeAt(M,te),Be,!1,Ye)};var ie=[];Ae.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var M=this.startNode();if(this.next(),this.options.ecmaVersion>=6&&this.type===Te.dot){var te=this.startNodeAt(M.start,M.loc&&M.loc.start);te.name="new",M.meta=this.finishNode(te,"Identifier"),this.next();var Be=this.containsEsc;return M.property=this.parseIdent(!0),M.property.name!=="target"&&this.raiseRecoverable(M.property.start,"The only valid meta property for new is 'new.target'"),Be&&this.raiseRecoverable(M.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(M.start,"'new.target' can only be used in functions and class static block"),this.finishNode(M,"MetaProperty")}var Ye=this.start,dt=this.startLoc;return M.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),Ye,dt,!0,!1),this.eat(Te.parenL)?M.arguments=this.parseExprList(Te.parenR,this.options.ecmaVersion>=8,!1):M.arguments=ie,this.finishNode(M,"NewExpression")},Ae.parseTemplateElement=function(M){var te=M.isTagged,Be=this.startNode();return this.type===Te.invalidTemplate?(te||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),Be.value={raw:this.value,cooked:null}):Be.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),Be.tail=this.type===Te.backQuote,this.finishNode(Be,"TemplateElement")},Ae.parseTemplate=function(M){M===void 0&&(M={});var te=M.isTagged;te===void 0&&(te=!1);var Be=this.startNode();this.next(),Be.expressions=[];var Ye=this.parseTemplateElement({isTagged:te});for(Be.quasis=[Ye];!Ye.tail;)this.type===Te.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(Te.dollarBraceL),Be.expressions.push(this.parseExpression()),this.expect(Te.braceR),Be.quasis.push(Ye=this.parseTemplateElement({isTagged:te}));return this.next(),this.finishNode(Be,"TemplateLiteral")},Ae.isAsyncProp=function(M){return!M.computed&&M.key.type==="Identifier"&&M.key.name==="async"&&(this.type===Te.name||this.type===Te.num||this.type===Te.string||this.type===Te.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===Te.star)&&!Ai.test(this.input.slice(this.lastTokEnd,this.start))},Ae.parseObj=function(M,te){var Be=this.startNode(),Ye=!0,dt={};for(Be.properties=[],this.next();!this.eat(Te.braceR);){if(Ye)Ye=!1;else if(this.expect(Te.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(Te.braceR))break;var Qt=this.parseProperty(M,te);M||this.checkPropClash(Qt,dt,te),Be.properties.push(Qt)}return this.finishNode(Be,M?"ObjectPattern":"ObjectExpression")},Ae.parseProperty=function(M,te){var Be=this.startNode(),Ye,dt,Qt,ti;if(this.options.ecmaVersion>=9&&this.eat(Te.ellipsis))return M?(Be.argument=this.parseIdent(!1),this.type===Te.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(Be,"RestElement")):(Be.argument=this.parseMaybeAssign(!1,te),this.type===Te.comma&&te&&te.trailingComma<0&&(te.trailingComma=this.start),this.finishNode(Be,"SpreadElement"));this.options.ecmaVersion>=6&&(Be.method=!1,Be.shorthand=!1,(M||te)&&(Qt=this.start,ti=this.startLoc),M||(Ye=this.eat(Te.star)));var Ii=this.containsEsc;return this.parsePropertyName(Be),!M&&!Ii&&this.options.ecmaVersion>=8&&!Ye&&this.isAsyncProp(Be)?(dt=!0,Ye=this.options.ecmaVersion>=9&&this.eat(Te.star),this.parsePropertyName(Be)):dt=!1,this.parsePropertyValue(Be,M,Ye,dt,Qt,ti,te,Ii),this.finishNode(Be,"Property")},Ae.parseGetterSetter=function(M){M.kind=M.key.name,this.parsePropertyName(M),M.value=this.parseMethod(!1);var te=M.kind==="get"?0:1;if(M.value.params.length!==te){var Be=M.value.start;M.kind==="get"?this.raiseRecoverable(Be,"getter should have no params"):this.raiseRecoverable(Be,"setter should have exactly one param")}else M.kind==="set"&&M.value.params[0].type==="RestElement"&&this.raiseRecoverable(M.value.params[0].start,"Setter cannot use rest params")},Ae.parsePropertyValue=function(M,te,Be,Ye,dt,Qt,ti,Ii){(Be||Ye)&&this.type===Te.colon&&this.unexpected(),this.eat(Te.colon)?(M.value=te?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,ti),M.kind="init"):this.options.ecmaVersion>=6&&this.type===Te.parenL?(te&&this.unexpected(),M.kind="init",M.method=!0,M.value=this.parseMethod(Be,Ye)):!te&&!Ii&&this.options.ecmaVersion>=5&&!M.computed&&M.key.type==="Identifier"&&(M.key.name==="get"||M.key.name==="set")&&this.type!==Te.comma&&this.type!==Te.braceR&&this.type!==Te.eq?((Be||Ye)&&this.unexpected(),this.parseGetterSetter(M)):this.options.ecmaVersion>=6&&!M.computed&&M.key.type==="Identifier"?((Be||Ye)&&this.unexpected(),this.checkUnreserved(M.key),M.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=dt),M.kind="init",te?M.value=this.parseMaybeDefault(dt,Qt,this.copyNode(M.key)):this.type===Te.eq&&ti?(ti.shorthandAssign<0&&(ti.shorthandAssign=this.start),M.value=this.parseMaybeDefault(dt,Qt,this.copyNode(M.key))):M.value=this.copyNode(M.key),M.shorthand=!0):this.unexpected()},Ae.parsePropertyName=function(M){if(this.options.ecmaVersion>=6){if(this.eat(Te.bracketL))return M.computed=!0,M.key=this.parseMaybeAssign(),this.expect(Te.bracketR),M.key;M.computed=!1}return M.key=this.type===Te.num||this.type===Te.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")},Ae.initFunction=function(M){M.id=null,this.options.ecmaVersion>=6&&(M.generator=M.expression=!1),this.options.ecmaVersion>=8&&(M.async=!1)},Ae.parseMethod=function(M,te,Be){var Ye=this.startNode(),dt=this.yieldPos,Qt=this.awaitPos,ti=this.awaitIdentPos;return this.initFunction(Ye),this.options.ecmaVersion>=6&&(Ye.generator=M),this.options.ecmaVersion>=8&&(Ye.async=!!te),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(Cs(te,Ye.generator)|vr|(Be?Or:0)),this.expect(Te.parenL),Ye.params=this.parseBindingList(Te.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(Ye,!1,!0,!1),this.yieldPos=dt,this.awaitPos=Qt,this.awaitIdentPos=ti,this.finishNode(Ye,"FunctionExpression")},Ae.parseArrowExpression=function(M,te,Be,Ye){var dt=this.yieldPos,Qt=this.awaitPos,ti=this.awaitIdentPos;return this.enterScope(Cs(Be,!1)|ir),this.initFunction(M),this.options.ecmaVersion>=8&&(M.async=!!Be),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,M.params=this.toAssignableList(te,!0),this.parseFunctionBody(M,!0,!1,Ye),this.yieldPos=dt,this.awaitPos=Qt,this.awaitIdentPos=ti,this.finishNode(M,"ArrowFunctionExpression")},Ae.parseFunctionBody=function(M,te,Be,Ye){var dt=te&&this.type!==Te.braceL,Qt=this.strict,ti=!1;if(dt)M.body=this.parseMaybeAssign(Ye),M.expression=!0,this.checkParams(M,!1);else{var Ii=this.options.ecmaVersion>=7&&!this.isSimpleParamList(M.params);(!Qt||Ii)&&(ti=this.strictDirective(this.end),ti&&Ii&&this.raiseRecoverable(M.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var zi=this.labels;this.labels=[],ti&&(this.strict=!0),this.checkParams(M,!Qt&&!ti&&!te&&!Be&&this.isSimpleParamList(M.params)),this.strict&&M.id&&this.checkLValSimple(M.id,pn),M.body=this.parseBlock(!1,void 0,ti&&!Qt),M.expression=!1,this.adaptDirectivePrologue(M.body.body),this.labels=zi}this.exitScope()},Ae.isSimpleParamList=function(M){for(var te=0,Be=M;te<Be.length;te+=1){var Ye=Be[te];if(Ye.type!=="Identifier")return!1}return!0},Ae.checkParams=function(M,te){for(var Be=Object.create(null),Ye=0,dt=M.params;Ye<dt.length;Ye+=1){var Qt=dt[Ye];this.checkLValInnerPattern(Qt,cn,te?null:Be)}},Ae.parseExprList=function(M,te,Be,Ye){for(var dt=[],Qt=!0;!this.eat(M);){if(Qt)Qt=!1;else if(this.expect(Te.comma),te&&this.afterTrailingComma(M))break;var ti=void 0;Be&&this.type===Te.comma?ti=null:this.type===Te.ellipsis?(ti=this.parseSpread(Ye),Ye&&this.type===Te.comma&&Ye.trailingComma<0&&(Ye.trailingComma=this.start)):ti=this.parseMaybeAssign(!1,Ye),dt.push(ti)}return dt},Ae.checkUnreserved=function(M){var te=M.start,Be=M.end,Ye=M.name;if(this.inGenerator&&Ye==="yield"&&this.raiseRecoverable(te,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&Ye==="await"&&this.raiseRecoverable(te,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&Ye==="arguments"&&this.raiseRecoverable(te,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(Ye==="arguments"||Ye==="await")&&this.raise(te,"Cannot use "+Ye+" in class static initialization block"),this.keywords.test(Ye)&&this.raise(te,"Unexpected keyword '"+Ye+"'"),!(this.options.ecmaVersion<6&&this.input.slice(te,Be).indexOf("\\")!==-1)){var dt=this.strict?this.reservedWordsStrict:this.reservedWords;dt.test(Ye)&&(!this.inAsync&&Ye==="await"&&this.raiseRecoverable(te,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(te,"The keyword '"+Ye+"' is reserved"))}},Ae.parseIdent=function(M){var te=this.parseIdentNode();return this.next(!!M),this.finishNode(te,"Identifier"),M||(this.checkUnreserved(te),te.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=te.start)),te},Ae.parseIdentNode=function(){var M=this.startNode();return this.type===Te.name?M.name=this.value:this.type.keyword?(M.name=this.type.keyword,(M.name==="class"||M.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop(),this.type=Te.name):this.unexpected(),M},Ae.parsePrivateIdent=function(){var M=this.startNode();return this.type===Te.privateId?M.name=this.value:this.unexpected(),this.next(),this.finishNode(M,"PrivateIdentifier"),this.options.checkPrivateFields&&(this.privateNameStack.length===0?this.raise(M.start,"Private field '#"+M.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(M)),M},Ae.parseYield=function(M){this.yieldPos||(this.yieldPos=this.start);var te=this.startNode();return this.next(),this.type===Te.semi||this.canInsertSemicolon()||this.type!==Te.star&&!this.type.startsExpr?(te.delegate=!1,te.argument=null):(te.delegate=this.eat(Te.star),te.argument=this.parseMaybeAssign(M)),this.finishNode(te,"YieldExpression")},Ae.parseAwait=function(M){this.awaitPos||(this.awaitPos=this.start);var te=this.startNode();return this.next(),te.argument=this.parseMaybeUnary(null,!0,!1,M),this.finishNode(te,"AwaitExpression")};var he=f.prototype;he.raise=function(M,te){var Be=dn(this.input,M);te+=" ("+Be.line+":"+Be.column+")";var Ye=new SyntaxError(te);throw Ye.pos=M,Ye.loc=Be,Ye.raisedAt=this.pos,Ye},he.raiseRecoverable=he.raise,he.curPosition=function(){if(this.options.locations)return new yi(this.curLine,this.pos-this.lineStart)};var me=f.prototype,pe=function(te){this.flags=te,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1};me.enterScope=function(M){this.scopeStack.push(new pe(M))},me.exitScope=function(){this.scopeStack.pop()},me.treatFunctionsAsVarInScope=function(M){return M.flags&Li||!this.inModule&&M.flags&li},me.declareName=function(M,te,Be){var Ye=!1;if(te===fr){var dt=this.currentScope();Ye=dt.lexical.indexOf(M)>-1||dt.functions.indexOf(M)>-1||dt.var.indexOf(M)>-1,dt.lexical.push(M),this.inModule&&dt.flags&li&&delete this.undefinedExports[M]}else if(te===Dn){var Qt=this.currentScope();Qt.lexical.push(M)}else if(te===vn){var ti=this.currentScope();this.treatFunctionsAsVar?Ye=ti.lexical.indexOf(M)>-1:Ye=ti.lexical.indexOf(M)>-1||ti.var.indexOf(M)>-1,ti.functions.push(M)}else for(var Ii=this.scopeStack.length-1;Ii>=0;--Ii){var zi=this.scopeStack[Ii];if(zi.lexical.indexOf(M)>-1&&!(zi.flags&kn&&zi.lexical[0]===M)||!this.treatFunctionsAsVarInScope(zi)&&zi.functions.indexOf(M)>-1){Ye=!0;break}if(zi.var.push(M),this.inModule&&zi.flags&li&&delete this.undefinedExports[M],zi.flags&zn)break}Ye&&this.raiseRecoverable(Be,"Identifier '"+M+"' has already been declared")},me.checkLocalExport=function(M){this.scopeStack[0].lexical.indexOf(M.name)===-1&&this.scopeStack[0].var.indexOf(M.name)===-1&&(this.undefinedExports[M.name]=M)},me.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]},me.currentVarScope=function(){for(var M=this.scopeStack.length-1;;M--){var te=this.scopeStack[M];if(te.flags&zn)return te}},me.currentThisScope=function(){for(var M=this.scopeStack.length-1;;M--){var te=this.scopeStack[M];if(te.flags&zn&&!(te.flags&ir))return te}};var De=function(te,Be,Ye){this.type="",this.start=Be,this.end=0,te.options.locations&&(this.loc=new Pi(te,Ye)),te.options.directSourceFile&&(this.sourceFile=te.options.directSourceFile),te.options.ranges&&(this.range=[Be,0])},Le=f.prototype;Le.startNode=function(){return new De(this,this.start,this.startLoc)},Le.startNodeAt=function(M,te){return new De(this,M,te)};function Pe(M,te,Be,Ye){return M.type=te,M.end=Be,this.options.locations&&(M.loc.end=Ye),this.options.ranges&&(M.range[1]=Be),M}Le.finishNode=function(M,te){return Pe.call(this,M,te,this.lastTokEnd,this.lastTokEndLoc)},Le.finishNodeAt=function(M,te,Be,Ye){return Pe.call(this,M,te,Be,Ye)},Le.copyNode=function(M){var te=new De(this,M.start,this.startLoc);for(var Be in M)te[Be]=M[Be];return te};var Ve="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",Ue=Ve+" Extended_Pictographic",ge=Ue,Ce=ge+" EBase EComp EMod EPres ExtPict",Qe=Ce,nt=Qe,i={9:Ve,10:Ue,11:ge,12:Ce,13:Qe,14:nt},ue="Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji",Dt={9:"",10:"",11:"",12:"",13:"",14:ue},Vt="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",Wt="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",It=Wt+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",Bt=It+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",hi=Bt+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",Zt=hi+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",ei=Zt+" Hrkt Katakana_Or_Hiragana Kawi Nag_Mundari Nagm Unknown Zzzz",Ti={9:Wt,10:It,11:Bt,12:hi,13:Zt,14:ei},Yi={};function wn(M){var te=Yi[M]={binary:Lt(i[M]+" "+Vt),binaryOfStrings:Lt(Dt[M]),nonBinary:{General_Category:Lt(Vt),Script:Lt(Ti[M])}};te.nonBinary.Script_Extensions=te.nonBinary.Script,te.nonBinary.gc=te.nonBinary.General_Category,te.nonBinary.sc=te.nonBinary.Script,te.nonBinary.scx=te.nonBinary.Script_Extensions}for(var An=0,en=[9,10,11,12,13,14];An<en.length;An+=1){var ar=en[An];wn(ar)}var pi=f.prototype,Zn=function(te){this.parser=te,this.validFlags="gim"+(te.options.ecmaVersion>=6?"uy":"")+(te.options.ecmaVersion>=9?"s":"")+(te.options.ecmaVersion>=13?"d":"")+(te.options.ecmaVersion>=15?"v":""),this.unicodeProperties=Yi[te.options.ecmaVersion>=14?14:te.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};Zn.prototype.reset=function(te,Be,Ye){var dt=Ye.indexOf("v")!==-1,Qt=Ye.indexOf("u")!==-1;this.start=te|0,this.source=Be+"",this.flags=Ye,dt&&this.parser.options.ecmaVersion>=15?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=Qt&&this.parser.options.ecmaVersion>=6,this.switchV=!1,this.switchN=Qt&&this.parser.options.ecmaVersion>=9)},Zn.prototype.raise=function(te){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+te)},Zn.prototype.at=function(te,Be){Be===void 0&&(Be=!1);var Ye=this.source,dt=Ye.length;if(te>=dt)return-1;var Qt=Ye.charCodeAt(te);if(!(Be||this.switchU)||Qt<=55295||Qt>=57344||te+1>=dt)return Qt;var ti=Ye.charCodeAt(te+1);return ti>=56320&&ti<=57343?(Qt<<10)+ti-56613888:Qt},Zn.prototype.nextIndex=function(te,Be){Be===void 0&&(Be=!1);var Ye=this.source,dt=Ye.length;if(te>=dt)return dt;var Qt=Ye.charCodeAt(te),ti;return!(Be||this.switchU)||Qt<=55295||Qt>=57344||te+1>=dt||(ti=Ye.charCodeAt(te+1))<56320||ti>57343?te+1:te+2},Zn.prototype.current=function(te){return te===void 0&&(te=!1),this.at(this.pos,te)},Zn.prototype.lookahead=function(te){return te===void 0&&(te=!1),this.at(this.nextIndex(this.pos,te),te)},Zn.prototype.advance=function(te){te===void 0&&(te=!1),this.pos=this.nextIndex(this.pos,te)},Zn.prototype.eat=function(te,Be){return Be===void 0&&(Be=!1),this.current(Be)===te?(this.advance(Be),!0):!1},Zn.prototype.eatChars=function(te,Be){Be===void 0&&(Be=!1);for(var Ye=this.pos,dt=0,Qt=te;dt<Qt.length;dt+=1){var ti=Qt[dt],Ii=this.at(Ye,Be);if(Ii===-1||Ii!==ti)return!1;Ye=this.nextIndex(Ye,Be)}return this.pos=Ye,!0},pi.validateRegExpFlags=function(M){for(var te=M.validFlags,Be=M.flags,Ye=!1,dt=!1,Qt=0;Qt<Be.length;Qt++){var ti=Be.charAt(Qt);te.indexOf(ti)===-1&&this.raise(M.start,"Invalid regular expression flag"),Be.indexOf(ti,Qt+1)>-1&&this.raise(M.start,"Duplicate regular expression flag"),ti==="u"&&(Ye=!0),ti==="v"&&(dt=!0)}this.options.ecmaVersion>=15&&Ye&&dt&&this.raise(M.start,"Invalid regular expression flag")},pi.validateRegExpPattern=function(M){this.regexp_pattern(M),!M.switchN&&this.options.ecmaVersion>=9&&M.groupNames.length>0&&(M.switchN=!0,this.regexp_pattern(M))},pi.regexp_pattern=function(M){M.pos=0,M.lastIntValue=0,M.lastStringValue="",M.lastAssertionIsQuantifiable=!1,M.numCapturingParens=0,M.maxBackReference=0,M.groupNames.length=0,M.backReferenceNames.length=0,this.regexp_disjunction(M),M.pos!==M.source.length&&(M.eat(41)&&M.raise("Unmatched ')'"),(M.eat(93)||M.eat(125))&&M.raise("Lone quantifier brackets")),M.maxBackReference>M.numCapturingParens&&M.raise("Invalid escape");for(var te=0,Be=M.backReferenceNames;te<Be.length;te+=1){var Ye=Be[te];M.groupNames.indexOf(Ye)===-1&&M.raise("Invalid named capture referenced")}},pi.regexp_disjunction=function(M){for(this.regexp_alternative(M);M.eat(124);)this.regexp_alternative(M);this.regexp_eatQuantifier(M,!0)&&M.raise("Nothing to repeat"),M.eat(123)&&M.raise("Lone quantifier brackets")},pi.regexp_alternative=function(M){for(;M.pos<M.source.length&&this.regexp_eatTerm(M););},pi.regexp_eatTerm=function(M){return this.regexp_eatAssertion(M)?(M.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(M)&&M.switchU&&M.raise("Invalid quantifier"),!0):(M.switchU?this.regexp_eatAtom(M):this.regexp_eatExtendedAtom(M))?(this.regexp_eatQuantifier(M),!0):!1},pi.regexp_eatAssertion=function(M){var te=M.pos;if(M.lastAssertionIsQuantifiable=!1,M.eat(94)||M.eat(36))return!0;if(M.eat(92)){if(M.eat(66)||M.eat(98))return!0;M.pos=te}if(M.eat(40)&&M.eat(63)){var Be=!1;if(this.options.ecmaVersion>=9&&(Be=M.eat(60)),M.eat(61)||M.eat(33))return this.regexp_disjunction(M),M.eat(41)||M.raise("Unterminated group"),M.lastAssertionIsQuantifiable=!Be,!0}return M.pos=te,!1},pi.regexp_eatQuantifier=function(M,te){return te===void 0&&(te=!1),this.regexp_eatQuantifierPrefix(M,te)?(M.eat(63),!0):!1},pi.regexp_eatQuantifierPrefix=function(M,te){return M.eat(42)||M.eat(43)||M.eat(63)||this.regexp_eatBracedQuantifier(M,te)},pi.regexp_eatBracedQuantifier=function(M,te){var Be=M.pos;if(M.eat(123)){var Ye=0,dt=-1;if(this.regexp_eatDecimalDigits(M)&&(Ye=M.lastIntValue,M.eat(44)&&this.regexp_eatDecimalDigits(M)&&(dt=M.lastIntValue),M.eat(125)))return dt!==-1&&dt<Ye&&!te&&M.raise("numbers out of order in {} quantifier"),!0;M.switchU&&!te&&M.raise("Incomplete quantifier"),M.pos=Be}return!1},pi.regexp_eatAtom=function(M){return this.regexp_eatPatternCharacters(M)||M.eat(46)||this.regexp_eatReverseSolidusAtomEscape(M)||this.regexp_eatCharacterClass(M)||this.regexp_eatUncapturingGroup(M)||this.regexp_eatCapturingGroup(M)},pi.regexp_eatReverseSolidusAtomEscape=function(M){var te=M.pos;if(M.eat(92)){if(this.regexp_eatAtomEscape(M))return!0;M.pos=te}return!1},pi.regexp_eatUncapturingGroup=function(M){var te=M.pos;if(M.eat(40)){if(M.eat(63)&&M.eat(58)){if(this.regexp_disjunction(M),M.eat(41))return!0;M.raise("Unterminated group")}M.pos=te}return!1},pi.regexp_eatCapturingGroup=function(M){if(M.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(M):M.current()===63&&M.raise("Invalid group"),this.regexp_disjunction(M),M.eat(41))return M.numCapturingParens+=1,!0;M.raise("Unterminated group")}return!1},pi.regexp_eatExtendedAtom=function(M){return M.eat(46)||this.regexp_eatReverseSolidusAtomEscape(M)||this.regexp_eatCharacterClass(M)||this.regexp_eatUncapturingGroup(M)||this.regexp_eatCapturingGroup(M)||this.regexp_eatInvalidBracedQuantifier(M)||this.regexp_eatExtendedPatternCharacter(M)},pi.regexp_eatInvalidBracedQuantifier=function(M){return this.regexp_eatBracedQuantifier(M,!0)&&M.raise("Nothing to repeat"),!1},pi.regexp_eatSyntaxCharacter=function(M){var te=M.current();return Xi(te)?(M.lastIntValue=te,M.advance(),!0):!1};function Xi(M){return M===36||M>=40&&M<=43||M===46||M===63||M>=91&&M<=94||M>=123&&M<=125}pi.regexp_eatPatternCharacters=function(M){for(var te=M.pos,Be=0;(Be=M.current())!==-1&&!Xi(Be);)M.advance();return M.pos!==te},pi.regexp_eatExtendedPatternCharacter=function(M){var te=M.current();return te!==-1&&te!==36&&!(te>=40&&te<=43)&&te!==46&&te!==63&&te!==91&&te!==94&&te!==124?(M.advance(),!0):!1},pi.regexp_groupSpecifier=function(M){if(M.eat(63)){if(this.regexp_eatGroupName(M)){M.groupNames.indexOf(M.lastStringValue)!==-1&&M.raise("Duplicate capture group name"),M.groupNames.push(M.lastStringValue);return}M.raise("Invalid group")}},pi.regexp_eatGroupName=function(M){if(M.lastStringValue="",M.eat(60)){if(this.regexp_eatRegExpIdentifierName(M)&&M.eat(62))return!0;M.raise("Invalid capture group name")}return!1},pi.regexp_eatRegExpIdentifierName=function(M){if(M.lastStringValue="",this.regexp_eatRegExpIdentifierStart(M)){for(M.lastStringValue+=Yt(M.lastIntValue);this.regexp_eatRegExpIdentifierPart(M);)M.lastStringValue+=Yt(M.lastIntValue);return!0}return!1},pi.regexp_eatRegExpIdentifierStart=function(M){var te=M.pos,Be=this.options.ecmaVersion>=11,Ye=M.current(Be);return M.advance(Be),Ye===92&&this.regexp_eatRegExpUnicodeEscapeSequence(M,Be)&&(Ye=M.lastIntValue),mt(Ye)?(M.lastIntValue=Ye,!0):(M.pos=te,!1)};function mt(M){return je(M,!0)||M===36||M===95}pi.regexp_eatRegExpIdentifierPart=function(M){var te=M.pos,Be=this.options.ecmaVersion>=11,Ye=M.current(Be);return M.advance(Be),Ye===92&&this.regexp_eatRegExpUnicodeEscapeSequence(M,Be)&&(Ye=M.lastIntValue),bi(Ye)?(M.lastIntValue=Ye,!0):(M.pos=te,!1)};function bi(M){return Je(M,!0)||M===36||M===95||M===8204||M===8205}pi.regexp_eatAtomEscape=function(M){return this.regexp_eatBackReference(M)||this.regexp_eatCharacterClassEscape(M)||this.regexp_eatCharacterEscape(M)||M.switchN&&this.regexp_eatKGroupName(M)?!0:(M.switchU&&(M.current()===99&&M.raise("Invalid unicode escape"),M.raise("Invalid escape")),!1)},pi.regexp_eatBackReference=function(M){var te=M.pos;if(this.regexp_eatDecimalEscape(M)){var Be=M.lastIntValue;if(M.switchU)return Be>M.maxBackReference&&(M.maxBackReference=Be),!0;if(Be<=M.numCapturingParens)return!0;M.pos=te}return!1},pi.regexp_eatKGroupName=function(M){if(M.eat(107)){if(this.regexp_eatGroupName(M))return M.backReferenceNames.push(M.lastStringValue),!0;M.raise("Invalid named reference")}return!1},pi.regexp_eatCharacterEscape=function(M){return this.regexp_eatControlEscape(M)||this.regexp_eatCControlLetter(M)||this.regexp_eatZero(M)||this.regexp_eatHexEscapeSequence(M)||this.regexp_eatRegExpUnicodeEscapeSequence(M,!1)||!M.switchU&&this.regexp_eatLegacyOctalEscapeSequence(M)||this.regexp_eatIdentityEscape(M)},pi.regexp_eatCControlLetter=function(M){var te=M.pos;if(M.eat(99)){if(this.regexp_eatControlLetter(M))return!0;M.pos=te}return!1},pi.regexp_eatZero=function(M){return M.current()===48&&!Ta(M.lookahead())?(M.lastIntValue=0,M.advance(),!0):!1},pi.regexp_eatControlEscape=function(M){var te=M.current();return te===116?(M.lastIntValue=9,M.advance(),!0):te===110?(M.lastIntValue=10,M.advance(),!0):te===118?(M.lastIntValue=11,M.advance(),!0):te===102?(M.lastIntValue=12,M.advance(),!0):te===114?(M.lastIntValue=13,M.advance(),!0):!1},pi.regexp_eatControlLetter=function(M){var te=M.current();return At(te)?(M.lastIntValue=te%32,M.advance(),!0):!1};function At(M){return M>=65&&M<=90||M>=97&&M<=122}pi.regexp_eatRegExpUnicodeEscapeSequence=function(M,te){te===void 0&&(te=!1);var Be=M.pos,Ye=te||M.switchU;if(M.eat(117)){if(this.regexp_eatFixedHexDigits(M,4)){var dt=M.lastIntValue;if(Ye&&dt>=55296&&dt<=56319){var Qt=M.pos;if(M.eat(92)&&M.eat(117)&&this.regexp_eatFixedHexDigits(M,4)){var ti=M.lastIntValue;if(ti>=56320&&ti<=57343)return M.lastIntValue=(dt-55296)*1024+(ti-56320)+65536,!0}M.pos=Qt,M.lastIntValue=dt}return!0}if(Ye&&M.eat(123)&&this.regexp_eatHexDigits(M)&&M.eat(125)&&Ni(M.lastIntValue))return!0;Ye&&M.raise("Invalid unicode escape"),M.pos=Be}return!1};function Ni(M){return M>=0&&M<=1114111}pi.regexp_eatIdentityEscape=function(M){if(M.switchU)return this.regexp_eatSyntaxCharacter(M)?!0:M.eat(47)?(M.lastIntValue=47,!0):!1;var te=M.current();return te!==99&&(!M.switchN||te!==107)?(M.lastIntValue=te,M.advance(),!0):!1},pi.regexp_eatDecimalEscape=function(M){M.lastIntValue=0;var te=M.current();if(te>=49&&te<=57){do M.lastIntValue=10*M.lastIntValue+(te-48),M.advance();while((te=M.current())>=48&&te<=57);return!0}return!1};var lr=0,es=1,kr=2;pi.regexp_eatCharacterClassEscape=function(M){var te=M.current();if(ht(te))return M.lastIntValue=-1,M.advance(),es;var Be=!1;if(M.switchU&&this.options.ecmaVersion>=9&&((Be=te===80)||te===112)){M.lastIntValue=-1,M.advance();var Ye;if(M.eat(123)&&(Ye=this.regexp_eatUnicodePropertyValueExpression(M))&&M.eat(125))return Be&&Ye===kr&&M.raise("Invalid property name"),Ye;M.raise("Invalid property name")}return lr};function ht(M){return M===100||M===68||M===115||M===83||M===119||M===87}pi.regexp_eatUnicodePropertyValueExpression=function(M){var te=M.pos;if(this.regexp_eatUnicodePropertyName(M)&&M.eat(61)){var Be=M.lastStringValue;if(this.regexp_eatUnicodePropertyValue(M)){var Ye=M.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(M,Be,Ye),es}}if(M.pos=te,this.regexp_eatLoneUnicodePropertyNameOrValue(M)){var dt=M.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(M,dt)}return lr},pi.regexp_validateUnicodePropertyNameAndValue=function(M,te,Be){rt(M.unicodeProperties.nonBinary,te)||M.raise("Invalid property name"),M.unicodeProperties.nonBinary[te].test(Be)||M.raise("Invalid property value")},pi.regexp_validateUnicodePropertyNameOrValue=function(M,te){if(M.unicodeProperties.binary.test(te))return es;if(M.switchV&&M.unicodeProperties.binaryOfStrings.test(te))return kr;M.raise("Invalid property name")},pi.regexp_eatUnicodePropertyName=function(M){var te=0;for(M.lastStringValue="";Tn(te=M.current());)M.lastStringValue+=Yt(te),M.advance();return M.lastStringValue!==""};function Tn(M){return At(M)||M===95}pi.regexp_eatUnicodePropertyValue=function(M){var te=0;for(M.lastStringValue="";it(te=M.current());)M.lastStringValue+=Yt(te),M.advance();return M.lastStringValue!==""};function it(M){return Tn(M)||Ta(M)}pi.regexp_eatLoneUnicodePropertyNameOrValue=function(M){return this.regexp_eatUnicodePropertyValue(M)},pi.regexp_eatCharacterClass=function(M){if(M.eat(91)){var te=M.eat(94),Be=this.regexp_classContents(M);return M.eat(93)||M.raise("Unterminated character class"),te&&Be===kr&&M.raise("Negated character class may contain strings"),!0}return!1},pi.regexp_classContents=function(M){return M.current()===93?es:M.switchV?this.regexp_classSetExpression(M):(this.regexp_nonEmptyClassRanges(M),es)},pi.regexp_nonEmptyClassRanges=function(M){for(;this.regexp_eatClassAtom(M);){var te=M.lastIntValue;if(M.eat(45)&&this.regexp_eatClassAtom(M)){var Be=M.lastIntValue;M.switchU&&(te===-1||Be===-1)&&M.raise("Invalid character class"),te!==-1&&Be!==-1&&te>Be&&M.raise("Range out of order in character class")}}},pi.regexp_eatClassAtom=function(M){var te=M.pos;if(M.eat(92)){if(this.regexp_eatClassEscape(M))return!0;if(M.switchU){var Be=M.current();(Be===99||Pa(Be))&&M.raise("Invalid class escape"),M.raise("Invalid escape")}M.pos=te}var Ye=M.current();return Ye!==93?(M.lastIntValue=Ye,M.advance(),!0):!1},pi.regexp_eatClassEscape=function(M){var te=M.pos;if(M.eat(98))return M.lastIntValue=8,!0;if(M.switchU&&M.eat(45))return M.lastIntValue=45,!0;if(!M.switchU&&M.eat(99)){if(this.regexp_eatClassControlLetter(M))return!0;M.pos=te}return this.regexp_eatCharacterClassEscape(M)||this.regexp_eatCharacterEscape(M)},pi.regexp_classSetExpression=function(M){var te=es,Be;if(!this.regexp_eatClassSetRange(M))if(Be=this.regexp_eatClassSetOperand(M)){Be===kr&&(te=kr);for(var Ye=M.pos;M.eatChars([38,38]);){if(M.current()!==38&&(Be=this.regexp_eatClassSetOperand(M))){Be!==kr&&(te=es);continue}M.raise("Invalid character in character class")}if(Ye!==M.pos)return te;for(;M.eatChars([45,45]);)this.regexp_eatClassSetOperand(M)||M.raise("Invalid character in character class");if(Ye!==M.pos)return te}else M.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(M)){if(Be=this.regexp_eatClassSetOperand(M),!Be)return te;Be===kr&&(te=kr)}},pi.regexp_eatClassSetRange=function(M){var te=M.pos;if(this.regexp_eatClassSetCharacter(M)){var Be=M.lastIntValue;if(M.eat(45)&&this.regexp_eatClassSetCharacter(M)){var Ye=M.lastIntValue;return Be!==-1&&Ye!==-1&&Be>Ye&&M.raise("Range out of order in character class"),!0}M.pos=te}return!1},pi.regexp_eatClassSetOperand=function(M){return this.regexp_eatClassSetCharacter(M)?es:this.regexp_eatClassStringDisjunction(M)||this.regexp_eatNestedClass(M)},pi.regexp_eatNestedClass=function(M){var te=M.pos;if(M.eat(91)){var Be=M.eat(94),Ye=this.regexp_classContents(M);if(M.eat(93))return Be&&Ye===kr&&M.raise("Negated character class may contain strings"),Ye;M.pos=te}if(M.eat(92)){var dt=this.regexp_eatCharacterClassEscape(M);if(dt)return dt;M.pos=te}return null},pi.regexp_eatClassStringDisjunction=function(M){var te=M.pos;if(M.eatChars([92,113])){if(M.eat(123)){var Be=this.regexp_classStringDisjunctionContents(M);if(M.eat(125))return Be}else M.raise("Invalid escape");M.pos=te}return null},pi.regexp_classStringDisjunctionContents=function(M){for(var te=this.regexp_classString(M);M.eat(124);)this.regexp_classString(M)===kr&&(te=kr);return te},pi.regexp_classString=function(M){for(var te=0;this.regexp_eatClassSetCharacter(M);)te++;return te===1?es:kr},pi.regexp_eatClassSetCharacter=function(M){var te=M.pos;if(M.eat(92))return this.regexp_eatCharacterEscape(M)||this.regexp_eatClassSetReservedPunctuator(M)?!0:M.eat(98)?(M.lastIntValue=8,!0):(M.pos=te,!1);var Be=M.current();return Be<0||Be===M.lookahead()&&nr(Be)||ks(Be)?!1:(M.advance(),M.lastIntValue=Be,!0)};function nr(M){return M===33||M>=35&&M<=38||M>=42&&M<=44||M===46||M>=58&&M<=64||M===94||M===96||M===126}function ks(M){return M===40||M===41||M===45||M===47||M>=91&&M<=93||M>=123&&M<=125}pi.regexp_eatClassSetReservedPunctuator=function(M){var te=M.current();return Es(te)?(M.lastIntValue=te,M.advance(),!0):!1};function Es(M){return M===33||M===35||M===37||M===38||M===44||M===45||M>=58&&M<=62||M===64||M===96||M===126}pi.regexp_eatClassControlLetter=function(M){var te=M.current();return Ta(te)||te===95?(M.lastIntValue=te%32,M.advance(),!0):!1},pi.regexp_eatHexEscapeSequence=function(M){var te=M.pos;if(M.eat(120)){if(this.regexp_eatFixedHexDigits(M,2))return!0;M.switchU&&M.raise("Invalid escape"),M.pos=te}return!1},pi.regexp_eatDecimalDigits=function(M){var te=M.pos,Be=0;for(M.lastIntValue=0;Ta(Be=M.current());)M.lastIntValue=10*M.lastIntValue+(Be-48),M.advance();return M.pos!==te};function Ta(M){return M>=48&&M<=57}pi.regexp_eatHexDigits=function(M){var te=M.pos,Be=0;for(M.lastIntValue=0;Hs(Be=M.current());)M.lastIntValue=16*M.lastIntValue+co(Be),M.advance();return M.pos!==te};function Hs(M){return M>=48&&M<=57||M>=65&&M<=70||M>=97&&M<=102}function co(M){return M>=65&&M<=70?10+(M-65):M>=97&&M<=102?10+(M-97):M-48}pi.regexp_eatLegacyOctalEscapeSequence=function(M){if(this.regexp_eatOctalDigit(M)){var te=M.lastIntValue;if(this.regexp_eatOctalDigit(M)){var Be=M.lastIntValue;te<=3&&this.regexp_eatOctalDigit(M)?M.lastIntValue=te*64+Be*8+M.lastIntValue:M.lastIntValue=te*8+Be}else M.lastIntValue=te;return!0}return!1},pi.regexp_eatOctalDigit=function(M){var te=M.current();return Pa(te)?(M.lastIntValue=te-48,M.advance(),!0):(M.lastIntValue=0,!1)};function Pa(M){return M>=48&&M<=55}pi.regexp_eatFixedHexDigits=function(M,te){var Be=M.pos;M.lastIntValue=0;for(var Ye=0;Ye<te;++Ye){var dt=M.current();if(!Hs(dt))return M.pos=Be,!1;M.lastIntValue=16*M.lastIntValue+co(dt),M.advance()}return!0};var os=function(te){this.type=te.type,this.value=te.value,this.start=te.start,this.end=te.end,te.options.locations&&(this.loc=new Pi(te,te.startLoc,te.endLoc)),te.options.ranges&&(this.range=[te.start,te.end])},an=f.prototype;an.next=function(M){!M&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new os(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},an.getToken=function(){return this.next(),new os(this)},typeof Symbol<"u"&&(an[Symbol.iterator]=function(){var M=this;return{next:function(){var te=M.getToken();return{done:te.type===Te.eof,value:te}}}}),an.nextToken=function(){var M=this.curContext();if((!M||!M.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(Te.eof);if(M.override)return M.override(this);this.readToken(this.fullCharCodeAtPos())},an.readToken=function(M){return je(M,this.options.ecmaVersion>=6)||M===92?this.readWord():this.getTokenFromCode(M)},an.fullCharCodeAtPos=function(){var M=this.input.charCodeAt(this.pos);if(M<=55295||M>=56320)return M;var te=this.input.charCodeAt(this.pos+1);return te<=56319||te>=57344?M:(M<<10)+te-56613888},an.skipBlockComment=function(){var M=this.options.onComment&&this.curPosition(),te=this.pos,Be=this.input.indexOf("*/",this.pos+=2);if(Be===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=Be+2,this.options.locations)for(var Ye=void 0,dt=te;(Ye=gi(this.input,dt,this.pos))>-1;)++this.curLine,dt=this.lineStart=Ye;this.options.onComment&&this.options.onComment(!0,this.input.slice(te+2,Be),te,this.pos,M,this.curPosition())},an.skipLineComment=function(M){for(var te=this.pos,Be=this.options.onComment&&this.curPosition(),Ye=this.input.charCodeAt(this.pos+=M);this.pos<this.input.length&&!xi(Ye);)Ye=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(te+M,this.pos),te,this.pos,Be,this.curPosition())},an.skipSpace=function(){e:for(;this.pos<this.input.length;){var M=this.input.charCodeAt(this.pos);switch(M){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(M>8&&M<14||M>=5760&&qt.test(String.fromCharCode(M)))++this.pos;else break e}}},an.finishToken=function(M,te){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var Be=this.type;this.type=M,this.value=te,this.updateContext(Be)},an.readToken_dot=function(){var M=this.input.charCodeAt(this.pos+1);if(M>=48&&M<=57)return this.readNumber(!0);var te=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&M===46&&te===46?(this.pos+=3,this.finishToken(Te.ellipsis)):(++this.pos,this.finishToken(Te.dot))},an.readToken_slash=function(){var M=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):M===61?this.finishOp(Te.assign,2):this.finishOp(Te.slash,1)},an.readToken_mult_modulo_exp=function(M){var te=this.input.charCodeAt(this.pos+1),Be=1,Ye=M===42?Te.star:Te.modulo;return this.options.ecmaVersion>=7&&M===42&&te===42&&(++Be,Ye=Te.starstar,te=this.input.charCodeAt(this.pos+2)),te===61?this.finishOp(Te.assign,Be+1):this.finishOp(Ye,Be)},an.readToken_pipe_amp=function(M){var te=this.input.charCodeAt(this.pos+1);if(te===M){if(this.options.ecmaVersion>=12){var Be=this.input.charCodeAt(this.pos+2);if(Be===61)return this.finishOp(Te.assign,3)}return this.finishOp(M===124?Te.logicalOR:Te.logicalAND,2)}return te===61?this.finishOp(Te.assign,2):this.finishOp(M===124?Te.bitwiseOR:Te.bitwiseAND,1)},an.readToken_caret=function(){var M=this.input.charCodeAt(this.pos+1);return M===61?this.finishOp(Te.assign,2):this.finishOp(Te.bitwiseXOR,1)},an.readToken_plus_min=function(M){var te=this.input.charCodeAt(this.pos+1);return te===M?te===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||Ai.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(Te.incDec,2):te===61?this.finishOp(Te.assign,2):this.finishOp(Te.plusMin,1)},an.readToken_lt_gt=function(M){var te=this.input.charCodeAt(this.pos+1),Be=1;return te===M?(Be=M===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+Be)===61?this.finishOp(Te.assign,Be+1):this.finishOp(Te.bitShift,Be)):te===33&&M===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(te===61&&(Be=2),this.finishOp(Te.relational,Be))},an.readToken_eq_excl=function(M){var te=this.input.charCodeAt(this.pos+1);return te===61?this.finishOp(Te.equality,this.input.charCodeAt(this.pos+2)===61?3:2):M===61&&te===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(Te.arrow)):this.finishOp(M===61?Te.eq:Te.prefix,1)},an.readToken_question=function(){var M=this.options.ecmaVersion;if(M>=11){var te=this.input.charCodeAt(this.pos+1);if(te===46){var Be=this.input.charCodeAt(this.pos+2);if(Be<48||Be>57)return this.finishOp(Te.questionDot,2)}if(te===63){if(M>=12){var Ye=this.input.charCodeAt(this.pos+2);if(Ye===61)return this.finishOp(Te.assign,3)}return this.finishOp(Te.coalesce,2)}}return this.finishOp(Te.question,1)},an.readToken_numberSign=function(){var M=this.options.ecmaVersion,te=35;if(M>=13&&(++this.pos,te=this.fullCharCodeAtPos(),je(te,!0)||te===92))return this.finishToken(Te.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+Yt(te)+"'")},an.getTokenFromCode=function(M){switch(M){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(Te.parenL);case 41:return++this.pos,this.finishToken(Te.parenR);case 59:return++this.pos,this.finishToken(Te.semi);case 44:return++this.pos,this.finishToken(Te.comma);case 91:return++this.pos,this.finishToken(Te.bracketL);case 93:return++this.pos,this.finishToken(Te.bracketR);case 123:return++this.pos,this.finishToken(Te.braceL);case 125:return++this.pos,this.finishToken(Te.braceR);case 58:return++this.pos,this.finishToken(Te.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(Te.backQuote);case 48:var te=this.input.charCodeAt(this.pos+1);if(te===120||te===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(te===111||te===79)return this.readRadixNumber(8);if(te===98||te===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(M);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(M);case 124:case 38:return this.readToken_pipe_amp(M);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(M);case 60:case 62:return this.readToken_lt_gt(M);case 61:case 33:return this.readToken_eq_excl(M);case 63:return this.readToken_question();case 126:return this.finishOp(Te.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+Yt(M)+"'")},an.finishOp=function(M,te){var Be=this.input.slice(this.pos,this.pos+te);return this.pos+=te,this.finishToken(M,Be)},an.readRegexp=function(){for(var M,te,Be=this.pos;;){this.pos>=this.input.length&&this.raise(Be,"Unterminated regular expression");var Ye=this.input.charAt(this.pos);if(Ai.test(Ye)&&this.raise(Be,"Unterminated regular expression"),M)M=!1;else{if(Ye==="[")te=!0;else if(Ye==="]"&&te)te=!1;else if(Ye==="/"&&!te)break;M=Ye==="\\"}++this.pos}var dt=this.input.slice(Be,this.pos);++this.pos;var Qt=this.pos,ti=this.readWord1();this.containsEsc&&this.unexpected(Qt);var Ii=this.regexpState||(this.regexpState=new Zn(this));Ii.reset(Be,dt,ti),this.validateRegExpFlags(Ii),this.validateRegExpPattern(Ii);var zi=null;try{zi=new RegExp(dt,ti)}catch{}return this.finishToken(Te.regexp,{pattern:dt,flags:ti,value:zi})},an.readInt=function(M,te,Be){for(var Ye=this.options.ecmaVersion>=12&&te===void 0,dt=Be&&this.input.charCodeAt(this.pos)===48,Qt=this.pos,ti=0,Ii=0,zi=0,En=te??1/0;zi<En;++zi,++this.pos){var Ln=this.input.charCodeAt(this.pos),or=void 0;if(Ye&&Ln===95){dt&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),Ii===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),zi===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),Ii=Ln;continue}if(Ln>=97?or=Ln-97+10:Ln>=65?or=Ln-65+10:Ln>=48&&Ln<=57?or=Ln-48:or=1/0,or>=M)break;Ii=Ln,ti=ti*M+or}return Ye&&Ii===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===Qt||te!=null&&this.pos-Qt!==te?null:ti};function ts(M,te){return te?parseInt(M,8):parseFloat(M.replace(/_/g,""))}function yr(M){return typeof BigInt!="function"?null:BigInt(M.replace(/_/g,""))}an.readRadixNumber=function(M){var te=this.pos;this.pos+=2;var Be=this.readInt(M);return Be==null&&this.raise(this.start+2,"Expected number in radix "+M),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(Be=yr(this.input.slice(te,this.pos)),++this.pos):je(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(Te.num,Be)},an.readNumber=function(M){var te=this.pos;!M&&this.readInt(10,void 0,!0)===null&&this.raise(te,"Invalid number");var Be=this.pos-te>=2&&this.input.charCodeAt(te)===48;Be&&this.strict&&this.raise(te,"Invalid number");var Ye=this.input.charCodeAt(this.pos);if(!Be&&!M&&this.options.ecmaVersion>=11&&Ye===110){var dt=yr(this.input.slice(te,this.pos));return++this.pos,je(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(Te.num,dt)}Be&&/[89]/.test(this.input.slice(te,this.pos))&&(Be=!1),Ye===46&&!Be&&(++this.pos,this.readInt(10),Ye=this.input.charCodeAt(this.pos)),(Ye===69||Ye===101)&&!Be&&(Ye=this.input.charCodeAt(++this.pos),(Ye===43||Ye===45)&&++this.pos,this.readInt(10)===null&&this.raise(te,"Invalid number")),je(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var Qt=ts(this.input.slice(te,this.pos),Be);return this.finishToken(Te.num,Qt)},an.readCodePoint=function(){var M=this.input.charCodeAt(this.pos),te;if(M===123){this.options.ecmaVersion<6&&this.unexpected();var Be=++this.pos;te=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,te>1114111&&this.invalidStringToken(Be,"Code point out of bounds")}else te=this.readHexChar(4);return te},an.readString=function(M){for(var te="",Be=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var Ye=this.input.charCodeAt(this.pos);if(Ye===M)break;Ye===92?(te+=this.input.slice(Be,this.pos),te+=this.readEscapedChar(!1),Be=this.pos):Ye===8232||Ye===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(xi(Ye)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return te+=this.input.slice(Be,this.pos++),this.finishToken(Te.string,te)};var Zs={};an.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(M){if(M===Zs)this.readInvalidTemplateToken();else throw M}this.inTemplateElement=!1},an.invalidStringToken=function(M,te){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw Zs;this.raise(M,te)},an.readTmplToken=function(){for(var M="",te=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var Be=this.input.charCodeAt(this.pos);if(Be===96||Be===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===Te.template||this.type===Te.invalidTemplate)?Be===36?(this.pos+=2,this.finishToken(Te.dollarBraceL)):(++this.pos,this.finishToken(Te.backQuote)):(M+=this.input.slice(te,this.pos),this.finishToken(Te.template,M));if(Be===92)M+=this.input.slice(te,this.pos),M+=this.readEscapedChar(!0),te=this.pos;else if(xi(Be)){switch(M+=this.input.slice(te,this.pos),++this.pos,Be){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:M+=`
`;break;default:M+=String.fromCharCode(Be);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),te=this.pos}else++this.pos}},an.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(Te.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")},an.readEscapedChar=function(M){var te=this.input.charCodeAt(++this.pos);switch(++this.pos,te){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return Yt(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),M){var Be=this.pos-1;this.invalidStringToken(Be,"Invalid escape sequence in template string")}default:if(te>=48&&te<=55){var Ye=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],dt=parseInt(Ye,8);return dt>255&&(Ye=Ye.slice(0,-1),dt=parseInt(Ye,8)),this.pos+=Ye.length-1,te=this.input.charCodeAt(this.pos),(Ye!=="0"||te===56||te===57)&&(this.strict||M)&&this.invalidStringToken(this.pos-1-Ye.length,M?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(dt)}return xi(te)?"":String.fromCharCode(te)}},an.readHexChar=function(M){var te=this.pos,Be=this.readInt(16,M);return Be===null&&this.invalidStringToken(te,"Bad character escape sequence"),Be},an.readWord1=function(){this.containsEsc=!1;for(var M="",te=!0,Be=this.pos,Ye=this.options.ecmaVersion>=6;this.pos<this.input.length;){var dt=this.fullCharCodeAtPos();if(Je(dt,Ye))this.pos+=dt<=65535?1:2;else if(dt===92){this.containsEsc=!0,M+=this.input.slice(Be,this.pos);var Qt=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var ti=this.readCodePoint();(te?je:Je)(ti,Ye)||this.invalidStringToken(Qt,"Invalid Unicode escape"),M+=Yt(ti),Be=this.pos}else break;te=!1}return M+this.input.slice(Be,this.pos)},an.readWord=function(){var M=this.readWord1(),te=Te.name;return this.keywords.test(M)&&(te=Mt[M]),this.finishToken(te,M)};var va="8.11.3";f.acorn={Parser:f,version:va,defaultOptions:sn,Position:yi,SourceLocation:Pi,getLineInfo:dn,Node:De,TokenType:Xe,tokTypes:Te,keywordTypes:Mt,TokContext:Re,tokContexts:Fe,isIdentifierChar:Je,isIdentifierStart:je,Token:os,isNewLine:xi,lineBreak:Ai,lineBreakG:ii,nonASCIIwhitespace:qt};function Ba(M,te){return f.parse(M,te)}function Bs(M,te,Be){return f.parseExpressionAt(M,te,Be)}function Ds(M,te){return f.tokenizer(M,te)}n.Node=De,n.Parser=f,n.Position=yi,n.SourceLocation=Pi,n.TokContext=Re,n.Token=os,n.TokenType=Xe,n.defaultOptions=sn,n.getLineInfo=dn,n.isIdentifierChar=Je,n.isIdentifierStart=je,n.isNewLine=xi,n.keywordTypes=Mt,n.lineBreak=Ai,n.lineBreakG=ii,n.nonASCIIwhitespace=qt,n.parse=Ba,n.parseExpressionAt=Bs,n.tokContexts=Fe,n.tokTypes=Te,n.tokenizer=Ds,n.version=va})}(Np,Np.exports)),Np.exports}/*!
 * Paper.js v0.12.17 - The Swiss Army Knife of Vector Graphics Scripting.
 * http://paperjs.org/
 *
 * Copyright (c) 2011 - 2020, Jürg Lehni & Jonathan Puckey
 * http://juerglehni.com/ & https://puckey.studio/
 *
 * Distributed under the MIT license. See LICENSE file for details.
 *
 * All rights reserved.
 *
 * Date: Thu Nov 3 21:15:36 2022 +0100
 *
 ***
 *
 * Straps.js - Class inheritance library with support for bean-style accessors
 *
 * Copyright (c) 2006 - 2020 Jürg Lehni
 * http://juerglehni.com/
 *
 * Distributed under the MIT license.
 *
 ***
 *
 * Acorn.js
 * https://marijnhaverbeke.nl/acorn/
 *
 * Acorn is a tiny, fast JavaScript parser written in JavaScript,
 * created by Marijn Haverbeke and released under an MIT license.
 *
 */(function(e){(function(t,n){t=t||Kv;var l=t.window,m=t.document,g=new function(){var f=/^(statics|enumerable|beans|preserve)$/,w=[],B=w.slice,U=Object.create,Z=Object.getOwnPropertyDescriptor,K=Object.defineProperty,se=w.forEach||function(ke,be){for(var Ne=0,Re=this.length;Ne<Re;Ne++)ke.call(be,this[Ne],Ne,this)},oe=function(ke,be){for(var Ne in this)this.hasOwnProperty(Ne)&&ke.call(be,this[Ne],Ne,this)},fe=Object.assign||function(ke){for(var be=1,Ne=arguments.length;be<Ne;be++){var Re=arguments[be];for(var Fe in Re)Re.hasOwnProperty(Fe)&&(ke[Fe]=Re[Fe])}return ke},ye=function(ke,be,Ne){if(ke){var Re=Z(ke,"length");(Re&&typeof Re.value=="number"?se:oe).call(ke,be,Ne=Ne||ke)}return Ne};function Me(ke,be,Ne,Re,Fe){var de={};function Ae(pe,De){De=De||(De=Z(be,pe))&&(De.get?De:De.value),typeof De=="string"&&De[0]==="#"&&(De=ke[De.substring(1)]||De);var Le=typeof De=="function",Pe=De,Ve=Fe||Le&&!De.base?De&&De.get?pe in ke:ke[pe]:null,Ue;(!Fe||!Ve)&&(Le&&Ve&&(De.base=Ve),Le&&Re!==!1&&(Ue=pe.match(/^([gs]et|is)(([A-Z])(.*))$/))&&(de[Ue[3].toLowerCase()+Ue[4]]=Ue[2]),(!Pe||Le||!Pe.get||typeof Pe.get!="function"||!xe.isPlainObject(Pe))&&(Pe={value:Pe,writable:!0}),(Z(ke,pe)||{configurable:!0}).configurable&&(Pe.configurable=!0,Pe.enumerable=Ne??!Ue),K(ke,pe,Pe))}if(be){for(var W in be)be.hasOwnProperty(W)&&!f.test(W)&&Ae(W);for(var W in de){var ie=de[W],he=ke["set"+ie],me=ke["get"+ie]||he&&ke["is"+ie];me&&(Re===!0||me.length===0)&&Ae(W,{get:me,set:he})}}return ke}function xe(){for(var ke=0,be=arguments.length;ke<be;ke++){var Ne=arguments[ke];Ne&&fe(this,Ne)}return this}return Me(xe,{inject:function(ke){if(ke){var be=ke.statics===!0?ke:ke.statics,Ne=ke.beans,Re=ke.preserve;be!==ke&&Me(this.prototype,ke,ke.enumerable,Ne,Re),Me(this,be,null,Ne,Re)}for(var Fe=1,de=arguments.length;Fe<de;Fe++)this.inject(arguments[Fe]);return this},extend:function(){for(var ke=this,be,Ne,Re=0,Fe,de=arguments.length;Re<de&&!(be&&Ne);Re++)Fe=arguments[Re],be=be||Fe.initialize,Ne=Ne||Fe.prototype;return be=be||function(){ke.apply(this,arguments)},Ne=be.prototype=Ne||U(this.prototype),K(Ne,"constructor",{value:be,writable:!0,configurable:!0}),Me(be,this),arguments.length&&this.inject.apply(be,arguments),be.base=ke,be}}).inject({enumerable:!1,initialize:xe,set:xe,inject:function(){for(var ke=0,be=arguments.length;ke<be;ke++){var Ne=arguments[ke];Ne&&Me(this,Ne,Ne.enumerable,Ne.beans,Ne.preserve)}return this},extend:function(){var ke=U(this);return ke.inject.apply(ke,arguments)},each:function(ke,be){return ye(this,ke,be)},clone:function(){return new this.constructor(this)},statics:{set:fe,each:ye,create:U,define:K,describe:Z,clone:function(ke){return fe(new ke.constructor,ke)},isPlainObject:function(ke){var be=ke!=null&&ke.constructor;return be&&(be===Object||be===xe||be.name==="Object")},pick:function(ke,be){return ke!==n?ke:be},slice:function(ke,be,Ne){return B.call(ke,be,Ne)}}})};e.exports=g,g.inject({enumerable:!1,toString:function(){return this._id!=null?(this._class||"Object")+(this._name?" '"+this._name+"'":" @"+this._id):"{ "+g.each(this,function(f,w){if(!/^_/.test(w)){var B=typeof f;this.push(w+": "+(B==="number"?re.instance.number(f):B==="string"?"'"+f+"'":f))}},[]).join(", ")+" }"},getClassName:function(){return this._class||""},importJSON:function(f){return g.importJSON(f,this)},exportJSON:function(f){return g.exportJSON(this,f)},toJSON:function(){return g.serialize(this)},set:function(f,w){return f&&g.filter(this,f,w,this._prioritize),this}},{beans:!1,statics:{exports:{},extend:function f(){var w=f.base.apply(this,arguments),B=w.prototype._class;return B&&!g.exports[B]&&(g.exports[B]=w),w},equals:function(f,w){if(f===w)return!0;if(f&&f.equals)return f.equals(w);if(w&&w.equals)return w.equals(f);if(f&&w&&typeof f=="object"&&typeof w=="object"){if(Array.isArray(f)&&Array.isArray(w)){var B=f.length;if(B!==w.length)return!1;for(;B--;)if(!g.equals(f[B],w[B]))return!1}else{var U=Object.keys(f),B=U.length;if(B!==Object.keys(w).length)return!1;for(;B--;){var Z=U[B];if(!(w.hasOwnProperty(Z)&&g.equals(f[Z],w[Z])))return!1}}return!0}return!1},read:function(f,w,B,U){if(this===g){var Z=this.peek(f,w);return f.__index++,Z}var K=this.prototype,se=K._readIndex,oe=w||se&&f.__index||0,fe=f.length,ye=f[oe];if(U=U||fe-oe,ye instanceof this||B&&B.readNull&&ye==null&&U<=1)return se&&(f.__index=oe+1),ye&&B&&B.clone?ye.clone():ye;if(ye=g.create(K),se&&(ye.__read=!0),ye=ye.initialize.apply(ye,oe>0||oe+U<fe?g.slice(f,oe,oe+U):f)||ye,se){f.__index=oe+ye.__read;var Me=ye.__filtered;Me&&(f.__filtered=Me,ye.__filtered=n),ye.__read=n}return ye},peek:function(f,w){return f[f.__index=w||f.__index||0]},remain:function(f){return f.length-(f.__index||0)},readList:function(f,w,B,U){for(var Z=[],K,se=w||0,oe=U?se+U:f.length,fe=se;fe<oe;fe++)Z.push(Array.isArray(K=f[fe])?this.read(K,0,B):this.read(f,fe,B,1));return Z},readNamed:function(f,w,B,U,Z){var K=this.getNamed(f,w),se=K!==n;if(se){var oe=f.__filtered;if(!oe){var fe=this.getSource(f);oe=f.__filtered=g.create(fe),oe.__unfiltered=fe}oe[w]=n}return this.read(se?[K]:f,B,U,Z)},readSupported:function(f,w){var B=this.getSource(f),U=this,Z=!1;return B&&Object.keys(B).forEach(function(K){if(K in w){var se=U.readNamed(f,K);se!==n&&(w[K]=se),Z=!0}}),Z},getSource:function(f){var w=f.__source;if(w===n){var B=f.length===1&&f[0];w=f.__source=B&&g.isPlainObject(B)?B:null}return w},getNamed:function(f,w){var B=this.getSource(f);if(B)return w?B[w]:f.__filtered||B},hasNamed:function(f,w){return!!this.getNamed(f,w)},filter:function(f,w,B,U){var Z;function K(Me){if(!(B&&Me in B)&&!(Z&&Me in Z)){var xe=w[Me];xe!==n&&(f[Me]=xe)}}if(U){for(var se={},oe=0,fe,ye=U.length;oe<ye;oe++)(fe=U[oe])in w&&(K(fe),se[fe]=!0);Z=se}return Object.keys(w.__unfiltered||w).forEach(K),f},isPlainValue:function(f,w){return g.isPlainObject(f)||Array.isArray(f)||w&&typeof f=="string"},serialize:function(f,w,B,U){w=w||{};var Z=!U,K;if(Z&&(w.formatter=new re(w.precision),U={length:0,definitions:{},references:{},add:function(xe,ke){var be="#"+xe._id,Ne=this.references[be];if(!Ne){this.length++;var Re=ke.call(xe),Fe=xe._class;Fe&&Re[0]!==Fe&&Re.unshift(Fe),this.definitions[be]=Re,Ne=this.references[be]=[be]}return Ne}}),f&&f._serialize){K=f._serialize(w,U);var se=f._class;se&&!f._compactSerialize&&(Z||!B)&&K[0]!==se&&K.unshift(se)}else if(Array.isArray(f)){K=[];for(var oe=0,fe=f.length;oe<fe;oe++)K[oe]=g.serialize(f[oe],w,B,U)}else if(g.isPlainObject(f)){K={};for(var ye=Object.keys(f),oe=0,fe=ye.length;oe<fe;oe++){var Me=ye[oe];K[Me]=g.serialize(f[Me],w,B,U)}}else typeof f=="number"?K=w.formatter.number(f,w.precision):K=f;return Z&&U.length>0?[["dictionary",U.definitions],K]:K},deserialize:function(f,w,B,U,Z){var K=f,se=!B,oe=se&&f&&f.length&&f[0][0]==="dictionary";if(B=B||{},Array.isArray(f)){var fe=f[0],ye=fe==="dictionary";if(f.length==1&&/^#/.test(fe))return B.dictionary[fe];fe=g.exports[fe],K=[];for(var Me=fe?1:0,xe=f.length;Me<xe;Me++)K.push(g.deserialize(f[Me],w,B,ye,oe));if(fe){var ke=K;w?K=w(fe,ke,se||Z):K=new fe(ke)}}else if(g.isPlainObject(f)){K={},U&&(B.dictionary=K);for(var be in f)K[be]=g.deserialize(f[be],w,B)}return oe?K[1]:K},exportJSON:function(f,w){var B=g.serialize(f,w);return w&&w.asString==!1?B:JSON.stringify(B)},importJSON:function(f,w){return g.deserialize(typeof f=="string"?JSON.parse(f):f,function(B,U,Z){var K=Z&&w&&w.constructor===B,se=K?w:g.create(B.prototype);if(U.length===1&&se instanceof Te&&(K||!(se instanceof ii))){var oe=U[0];g.isPlainObject(oe)&&(oe.insert=!1,K&&(U=U.concat([Te.INSERT])))}return(K?se.set:B).apply(se,U),K&&(w=null),se})},push:function(f,w){var B=w.length;if(B<4096)f.push.apply(f,w);else{var U=f.length;f.length+=B;for(var Z=0;Z<B;Z++)f[U+Z]=w[Z]}return f},splice:function(f,w,B,U){var Z=w&&w.length,K=B===n;B=K?f.length:B,B>f.length&&(B=f.length);for(var se=0;se<Z;se++)w[se]._index=B+se;if(K)return g.push(f,w),[];var oe=[B,U];w&&g.push(oe,w);for(var fe=f.splice.apply(f,oe),se=0,ye=fe.length;se<ye;se++)fe[se]._index=n;for(var se=B+Z,ye=f.length;se<ye;se++)f[se]._index=se;return fe},capitalize:function(f){return f.replace(/\b[a-z]/g,function(w){return w.toUpperCase()})},camelize:function(f){return f.replace(/-(.)/g,function(w,B){return B.toUpperCase()})},hyphenate:function(f){return f.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}}});var P={on:function(f,w){if(typeof f!="string")g.each(f,function(K,se){this.on(se,K)},this);else{var B=this._eventTypes,U=B&&B[f],Z=this._callbacks=this._callbacks||{};Z=Z[f]=Z[f]||[],Z.indexOf(w)===-1&&(Z.push(w),U&&U.install&&Z.length===1&&U.install.call(this,f))}return this},off:function(f,w){if(typeof f!="string"){g.each(f,function(se,oe){this.off(oe,se)},this);return}var B=this._eventTypes,U=B&&B[f],Z=this._callbacks&&this._callbacks[f],K;return Z&&(!w||(K=Z.indexOf(w))!==-1&&Z.length===1?(U&&U.uninstall&&U.uninstall.call(this,f),delete this._callbacks[f]):K!==-1&&Z.splice(K,1)),this},once:function(f,w){return this.on(f,function B(){w.apply(this,arguments),this.off(f,B)})},emit:function(f,w){var B=this._callbacks&&this._callbacks[f];if(!B)return!1;var U=g.slice(arguments,1),Z=w&&w.target&&!w.currentTarget;B=B.slice(),Z&&(w.currentTarget=this);for(var K=0,se=B.length;K<se;K++)if(B[K].apply(this,U)==!1){w&&w.stop&&w.stop();break}return Z&&delete w.currentTarget,!0},responds:function(f){return!!(this._callbacks&&this._callbacks[f])},attach:"#on",detach:"#off",fire:"#emit",_installEvents:function(f){var w=this._eventTypes,B=this._callbacks,U=f?"install":"uninstall";if(w){for(var Z in B)if(B[Z].length>0){var K=w[Z],se=K&&K[U];se&&se.call(this,Z)}}},statics:{inject:function f(w){var B=w._events;if(B){var U={};g.each(B,function(Z,K){var se=typeof Z=="string",oe=se?Z:K,fe=g.capitalize(oe),ye=oe.substring(2).toLowerCase();U[ye]=se?{}:Z,oe="_"+oe,w["get"+fe]=function(){return this[oe]},w["set"+fe]=function(Me){var xe=this[oe];xe&&this.off(ye,xe),Me&&this.on(ye,Me),this[oe]=Me}}),w._eventTypes=U}return f.base.apply(this,arguments)}}},u=g.extend({_class:"PaperScope",initialize:function f(){pn=this,this.settings=new g({applyMatrix:!0,insertItems:!0,handleSize:4,hitTolerance:0}),this.project=null,this.projects=[],this.tools=[],this._id=f._id++,f._scopes[this._id]=this;var w=f.prototype;if(!this.support){var B=cn.getContext(1,1)||{};w.support={nativeDash:"setLineDash"in B||"mozDash"in B,nativeBlendModes:fr.nativeModes},cn.release(B)}if(!this.agent){var U=t.navigator.userAgent.toLowerCase(),Z=(/(darwin|win|mac|linux|freebsd|sunos)/.exec(U)||[])[0],K=Z==="darwin"?"mac":Z,se=w.agent=w.browser={platform:K};K&&(se[K]=!0),U.replace(/(opera|chrome|safari|webkit|firefox|msie|trident|atom|node|jsdom)\/?\s*([.\d]+)(?:.*version\/([.\d]+))?(?:.*rv\:v?([.\d]+))?/g,function(oe,fe,ye,Me,xe){if(!se.chrome){var ke=fe==="opera"?Me:/^(node|trident)$/.test(fe)?xe:ye;se.version=ke,se.versionNumber=parseFloat(ke),fe={trident:"msie",jsdom:"node"}[fe]||fe,se.name=fe,se[fe]=!0}}),se.chrome&&delete se.webkit,se.atom&&delete se.chrome}},version:"0.12.17",getView:function(){var f=this.project;return f&&f._view},getPaper:function(){return this},execute:function(f,w){var B=pn.PaperScript.execute(f,this,w);return Ji.updateFocus(),B},install:function(f){var w=this;g.each(["project","view","tool"],function(U){g.define(f,U,{configurable:!0,get:function(){return w[U]}})});for(var B in this)!/^_/.test(B)&&this[B]&&(f[B]=this[B])},setup:function(f){return pn=this,this.project=new Ct(f),this},createCanvas:function(f,w){return cn.getCanvas(f,w)},activate:function(){pn=this},clear:function(){for(var f=this.projects,w=this.tools,B=f.length-1;B>=0;B--)f[B].remove();for(var B=w.length-1;B>=0;B--)w[B].remove()},remove:function(){this.clear(),delete u._scopes[this._id]},statics:new function(){function f(w){return w+="Attribute",function(B,U){return B[w](U)||B[w]("data-paper-"+U)}}return{_scopes:{},_id:0,get:function(w){return this._scopes[w]||null},getAttribute:f("get"),hasAttribute:f("has")}}}),Q=g.extend(P,{initialize:function(f){this._scope=pn,this._index=this._scope[this._list].push(this)-1,(f||!this._scope[this._reference])&&this.activate()},activate:function(){if(!this._scope)return!1;var f=this._scope[this._reference];return f&&f!==this&&f.emit("deactivate"),this._scope[this._reference]=this,this.emit("activate",f),!0},isActive:function(){return this._scope[this._reference]===this},remove:function(){return this._index==null?!1:(g.splice(this._scope[this._list],null,this._index,1),this._scope[this._reference]==this&&(this._scope[this._reference]=null),this._scope=null,!0)},getView:function(){return this._scope.getView()}}),O={findItemBoundsCollisions:function(f,w,B){function U(se){for(var oe=new Array(se.length),fe=0;fe<se.length;fe++){var ye=se[fe].getBounds();oe[fe]=[ye.left,ye.top,ye.right,ye.bottom]}return oe}var Z=U(f),K=!w||w===f?Z:U(w);return this.findBoundsCollisions(Z,K,B||0)},findCurveBoundsCollisions:function(f,w,B,U){function Z(ke){for(var be=Math.min,Ne=Math.max,Re=new Array(ke.length),Fe=0;Fe<ke.length;Fe++){var de=ke[Fe];Re[Fe]=[be(de[0],de[2],de[4],de[6]),be(de[1],de[3],de[5],de[7]),Ne(de[0],de[2],de[4],de[6]),Ne(de[1],de[3],de[5],de[7])]}return Re}var K=Z(f),se=!w||w===f?K:Z(w);if(U){for(var oe=this.findBoundsCollisions(K,se,B||0,!1,!0),fe=this.findBoundsCollisions(K,se,B||0,!0,!0),ye=[],Me=0,xe=oe.length;Me<xe;Me++)ye[Me]={hor:oe[Me],ver:fe[Me]};return ye}return this.findBoundsCollisions(K,se,B||0)},findBoundsCollisions:function(f,w,B,U,Z){var K=!w||f===w,se=K?f:f.concat(w),oe=f.length,fe=se.length;function ye(Dt,Vt,Wt){for(var It=0,Bt=Dt.length;It<Bt;){var hi=Bt+It>>>1;se[Dt[hi]][Vt]<Wt?It=hi+1:Bt=hi}return It-1}for(var Me=U?1:0,xe=Me+2,ke=U?0:1,be=ke+2,Ne=new Array(fe),Re=0;Re<fe;Re++)Ne[Re]=Re;Ne.sort(function(Dt,Vt){return se[Dt][Me]-se[Vt][Me]});for(var Fe=[],de=new Array(oe),Re=0;Re<fe;Re++){var Ae=Ne[Re],W=se[Ae],ie=K?Ae:Ae-oe,he=Ae<oe,me=K||!he,pe=he?[]:null;if(Fe.length){var De=ye(Fe,xe,W[Me]-B)+1;if(Fe.splice(0,De),K&&Z){pe=pe.concat(Fe);for(var Le=0;Le<Fe.length;Le++){var Pe=Fe[Le];de[Pe].push(ie)}}else for(var Ve=W[be],Ue=W[ke],Le=0;Le<Fe.length;Le++){var Pe=Fe[Le],ge=se[Pe],Ce=Pe<oe,Qe=K||Pe>=oe;(Z||(he&&Qe||me&&Ce)&&Ve>=ge[ke]-B&&Ue<=ge[be]+B)&&(he&&Qe&&pe.push(K?Pe:Pe-oe),me&&Ce&&de[Pe].push(ie))}}if(he&&(f===w&&pe.push(Ae),de[Ae]=pe),Fe.length){var nt=W[xe],i=ye(Fe,xe,nt);Fe.splice(i+1,0,Ae)}else Fe.push(Ae)}for(var Re=0;Re<de.length;Re++){var ue=de[Re];ue&&ue.sort(function(Vt,Wt){return Vt-Wt})}return de}},re=g.extend({initialize:function(f){this.precision=g.pick(f,5),this.multiplier=Math.pow(10,this.precision)},number:function(f){return this.precision<16?Math.round(f*this.multiplier)/this.multiplier:f},pair:function(f,w,B){return this.number(f)+(B||",")+this.number(w)},point:function(f,w){return this.number(f.x)+(w||",")+this.number(f.y)},size:function(f,w){return this.number(f.width)+(w||",")+this.number(f.height)},rectangle:function(f,w){return this.point(f,w)+(w||",")+this.size(f,w)}});re.instance=new re;var ee=new function(){var f=[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],w=[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]],B=Math.abs,U=Math.sqrt,Z=Math.pow,K=Math.log2||function(xe){return Math.log(xe)*Math.LOG2E},se=1e-12,oe=112e-18;function fe(xe,ke,be){return xe<ke?ke:xe>be?be:xe}function ye(xe,ke,be){function Ne(De){var Le=De*134217729,Pe=De-Le,Ve=Pe+Le,Ue=De-Ve;return[Ve,Ue]}var Re=ke*ke-xe*be,Fe=ke*ke+xe*be;if(B(Re)*3<Fe){var de=Ne(xe),Ae=Ne(ke),W=Ne(be),ie=ke*ke,he=Ae[0]*Ae[0]-ie+2*Ae[0]*Ae[1]+Ae[1]*Ae[1],me=xe*be,pe=de[0]*W[0]-me+de[0]*W[1]+de[1]*W[0]+de[1]*W[1];Re=ie-me+(he-pe)}return Re}function Me(){var xe=Math.max.apply(Math,arguments);return xe&&(xe<1e-8||xe>1e8)?Z(2,-Math.round(K(xe))):0}return{EPSILON:se,MACHINE_EPSILON:oe,CURVETIME_EPSILON:1e-8,GEOMETRIC_EPSILON:1e-7,TRIGONOMETRIC_EPSILON:1e-8,ANGULAR_EPSILON:1e-5,KAPPA:4*(U(2)-1)/3,isZero:function(xe){return xe>=-se&&xe<=se},isMachineZero:function(xe){return xe>=-oe&&xe<=oe},clamp:fe,integrate:function(xe,ke,be,Ne){for(var Re=f[Ne-2],Fe=w[Ne-2],de=(be-ke)*.5,Ae=de+ke,W=0,ie=Ne+1>>1,he=Ne&1?Fe[W++]*xe(Ae):0;W<ie;){var me=de*Re[W];he+=Fe[W++]*(xe(Ae+me)+xe(Ae-me))}return de*he},findRoot:function(xe,ke,be,Ne,Re,Fe,de){for(var Ae=0;Ae<Fe;Ae++){var W=xe(be),ie=W/ke(be),he=be-ie;if(B(ie)<de){be=he;break}W>0?(Re=be,be=he<=Ne?(Ne+Re)*.5:he):(Ne=be,be=he>=Re?(Ne+Re)*.5:he)}return fe(be,Ne,Re)},solveQuadratic:function(xe,ke,be,Ne,Re,Fe){var de,Ae=1/0;if(B(xe)<se){if(B(ke)<se)return B(be)<se?-1:0;de=-be/ke}else{ke*=-.5;var W=ye(xe,ke,be);if(W&&B(W)<oe){var ie=Me(B(xe),B(ke),B(be));ie&&(xe*=ie,ke*=ie,be*=ie,W=ye(xe,ke,be))}if(W>=-oe){var he=W<0?0:U(W),me=ke+(ke<0?-he:he);me===0?(de=be/xe,Ae=-de):(de=me/xe,Ae=be/me)}}var pe=0,De=Re==null,Le=Re-se,Pe=Fe+se;return isFinite(de)&&(De||de>Le&&de<Pe)&&(Ne[pe++]=De?de:fe(de,Re,Fe)),Ae!==de&&isFinite(Ae)&&(De||Ae>Le&&Ae<Pe)&&(Ne[pe++]=De?Ae:fe(Ae,Re,Fe)),pe},solveCubic:function(xe,ke,be,Ne,Re,Fe,de){var Ae=Me(B(xe),B(ke),B(be),B(Ne)),W,ie,he,me,pe;Ae&&(xe*=Ae,ke*=Ae,be*=Ae,Ne*=Ae);function De(i){W=i;var ue=xe*W;ie=ue+ke,he=ie*W+be,me=(ue+ie)*W+he,pe=he*W+Ne}if(B(xe)<se)xe=ke,ie=be,he=Ne,W=1/0;else if(B(Ne)<se)ie=ke,he=be,W=0;else{De(-(ke/xe)/3);var Le=pe/xe,Pe=Z(B(Le),1/3),Ve=Le<0?-1:1,Ue=-me/xe,ge=Ue>0?1.324717957244746*Math.max(Pe,U(Ue)):Pe,Ce=W-Ve*ge;if(Ce!==W){do De(Ce),Ce=me===0?W:W-pe/me/(1+oe);while(Ve*Ce>Ve*W);B(xe)*W*W>B(Ne/W)&&(he=-Ne/W,ie=(he-be)/W)}}var Qe=ee.solveQuadratic(xe,ie,he,Re,Fe,de),nt=Fe==null;return isFinite(W)&&(Qe===0||Qe>0&&W!==Re[0]&&W!==Re[1])&&(nt||W>Fe-se&&W<de+se)&&(Re[Qe++]=nt?W:fe(W,Fe,de)),Qe}}},ce={_id:1,_pools:{},get:function(f){if(f){var w=this._pools[f];return w||(w=this._pools[f]={_id:1}),w._id++}else return this._id++}},le=g.extend({_class:"Point",_readIndex:!0,initialize:function(w,B){var U=typeof w,Z=this.__read,K=0;if(U==="number"){var se=typeof B=="number";this._set(w,se?B:w),Z&&(K=se?2:1)}else if(U==="undefined"||w===null)this._set(0,0),Z&&(K=w===null?1:0);else{var oe=U==="string"?w.split(/[\s,]+/)||[]:w;K=1,Array.isArray(oe)?this._set(+oe[0],+(oe.length>1?oe[1]:oe[0])):"x"in oe?this._set(oe.x||0,oe.y||0):"width"in oe?this._set(oe.width||0,oe.height||0):"angle"in oe?(this._set(oe.length||0,0),this.setAngle(oe.angle||0)):(this._set(0,0),K=0)}return Z&&(this.__read=K),this},set:"#initialize",_set:function(f,w){return this.x=f,this.y=w,this},equals:function(f){return this===f||f&&(this.x===f.x&&this.y===f.y||Array.isArray(f)&&this.x===f[0]&&this.y===f[1])||!1},clone:function(){return new le(this.x,this.y)},toString:function(){var f=re.instance;return"{ x: "+f.number(this.x)+", y: "+f.number(this.y)+" }"},_serialize:function(f){var w=f.formatter;return[w.number(this.x),w.number(this.y)]},getLength:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},setLength:function(f){if(this.isZero()){var w=this._angle||0;this._set(Math.cos(w)*f,Math.sin(w)*f)}else{var B=f/this.getLength();ee.isZero(B)&&this.getAngle(),this._set(this.x*B,this.y*B)}},getAngle:function(){return this.getAngleInRadians.apply(this,arguments)*180/Math.PI},setAngle:function(f){this.setAngleInRadians.call(this,f*Math.PI/180)},getAngleInDegrees:"#getAngle",setAngleInDegrees:"#setAngle",getAngleInRadians:function(){if(arguments.length){var f=le.read(arguments),w=this.getLength()*f.getLength();if(ee.isZero(w))return NaN;var B=this.dot(f)/w;return Math.acos(B<-1?-1:B>1?1:B)}else return this.isZero()?this._angle||0:this._angle=Math.atan2(this.y,this.x)},setAngleInRadians:function(f){if(this._angle=f,!this.isZero()){var w=this.getLength();this._set(Math.cos(f)*w,Math.sin(f)*w)}},getQuadrant:function(){return this.x>=0?this.y>=0?1:4:this.y>=0?2:3}},{beans:!1,getDirectedAngle:function(){var f=le.read(arguments);return Math.atan2(this.cross(f),this.dot(f))*180/Math.PI},getDistance:function(){var f=arguments,w=le.read(f),B=w.x-this.x,U=w.y-this.y,Z=B*B+U*U,K=g.read(f);return K?Z:Math.sqrt(Z)},normalize:function(f){f===n&&(f=1);var w=this.getLength(),B=w!==0?f/w:0,U=new le(this.x*B,this.y*B);return B>=0&&(U._angle=this._angle),U},rotate:function(f,w){if(f===0)return this.clone();f=f*Math.PI/180;var B=w?this.subtract(w):this,U=Math.sin(f),Z=Math.cos(f);return B=new le(B.x*Z-B.y*U,B.x*U+B.y*Z),w?B.add(w):B},transform:function(f){return f?f._transformPoint(this):this},add:function(){var f=le.read(arguments);return new le(this.x+f.x,this.y+f.y)},subtract:function(){var f=le.read(arguments);return new le(this.x-f.x,this.y-f.y)},multiply:function(){var f=le.read(arguments);return new le(this.x*f.x,this.y*f.y)},divide:function(){var f=le.read(arguments);return new le(this.x/f.x,this.y/f.y)},modulo:function(){var f=le.read(arguments);return new le(this.x%f.x,this.y%f.y)},negate:function(){return new le(-this.x,-this.y)},isInside:function(){return Ke.read(arguments).contains(this)},isClose:function(){var f=arguments,w=le.read(f),B=g.read(f);return this.getDistance(w)<=B},isCollinear:function(){var f=le.read(arguments);return le.isCollinear(this.x,this.y,f.x,f.y)},isColinear:"#isCollinear",isOrthogonal:function(){var f=le.read(arguments);return le.isOrthogonal(this.x,this.y,f.x,f.y)},isZero:function(){var f=ee.isZero;return f(this.x)&&f(this.y)},isNaN:function(){return isNaN(this.x)||isNaN(this.y)},isInQuadrant:function(f){return this.x*(f>1&&f<4?-1:1)>=0&&this.y*(f>2?-1:1)>=0},dot:function(){var f=le.read(arguments);return this.x*f.x+this.y*f.y},cross:function(){var f=le.read(arguments);return this.x*f.y-this.y*f.x},project:function(){var f=le.read(arguments),w=f.isZero()?0:this.dot(f)/f.dot(f);return new le(f.x*w,f.y*w)},statics:{min:function(){var f=arguments,w=le.read(f),B=le.read(f);return new le(Math.min(w.x,B.x),Math.min(w.y,B.y))},max:function(){var f=arguments,w=le.read(f),B=le.read(f);return new le(Math.max(w.x,B.x),Math.max(w.y,B.y))},random:function(){return new le(Math.random(),Math.random())},isCollinear:function(f,w,B,U){return Math.abs(f*U-w*B)<=Math.sqrt((f*f+w*w)*(B*B+U*U))*1e-8},isOrthogonal:function(f,w,B,U){return Math.abs(f*B+w*U)<=Math.sqrt((f*f+w*w)*(B*B+U*U))*1e-8}}},g.each(["round","ceil","floor","abs"],function(f){var w=Math[f];this[f]=function(){return new le(w(this.x),w(this.y))}},{})),je=le.extend({initialize:function(w,B,U,Z){this._x=w,this._y=B,this._owner=U,this._setter=Z},_set:function(f,w,B){return this._x=f,this._y=w,B||this._owner[this._setter](this),this},getX:function(){return this._x},setX:function(f){this._x=f,this._owner[this._setter](this)},getY:function(){return this._y},setY:function(f){this._y=f,this._owner[this._setter](this)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(f){this._owner._changeSelection(this._getSelection(),f)},_getSelection:function(){return this._setter==="setPosition"?4:0}}),Je=g.extend({_class:"Size",_readIndex:!0,initialize:function(w,B){var U=typeof w,Z=this.__read,K=0;if(U==="number"){var se=typeof B=="number";this._set(w,se?B:w),Z&&(K=se?2:1)}else if(U==="undefined"||w===null)this._set(0,0),Z&&(K=w===null?1:0);else{var oe=U==="string"?w.split(/[\s,]+/)||[]:w;K=1,Array.isArray(oe)?this._set(+oe[0],+(oe.length>1?oe[1]:oe[0])):"width"in oe?this._set(oe.width||0,oe.height||0):"x"in oe?this._set(oe.x||0,oe.y||0):(this._set(0,0),K=0)}return Z&&(this.__read=K),this},set:"#initialize",_set:function(f,w){return this.width=f,this.height=w,this},equals:function(f){return f===this||f&&(this.width===f.width&&this.height===f.height||Array.isArray(f)&&this.width===f[0]&&this.height===f[1])||!1},clone:function(){return new Je(this.width,this.height)},toString:function(){var f=re.instance;return"{ width: "+f.number(this.width)+", height: "+f.number(this.height)+" }"},_serialize:function(f){var w=f.formatter;return[w.number(this.width),w.number(this.height)]},add:function(){var f=Je.read(arguments);return new Je(this.width+f.width,this.height+f.height)},subtract:function(){var f=Je.read(arguments);return new Je(this.width-f.width,this.height-f.height)},multiply:function(){var f=Je.read(arguments);return new Je(this.width*f.width,this.height*f.height)},divide:function(){var f=Je.read(arguments);return new Je(this.width/f.width,this.height/f.height)},modulo:function(){var f=Je.read(arguments);return new Je(this.width%f.width,this.height%f.height)},negate:function(){return new Je(-this.width,-this.height)},isZero:function(){var f=ee.isZero;return f(this.width)&&f(this.height)},isNaN:function(){return isNaN(this.width)||isNaN(this.height)},statics:{min:function(f,w){return new Je(Math.min(f.width,w.width),Math.min(f.height,w.height))},max:function(f,w){return new Je(Math.max(f.width,w.width),Math.max(f.height,w.height))},random:function(){return new Je(Math.random(),Math.random())}}},g.each(["round","ceil","floor","abs"],function(f){var w=Math[f];this[f]=function(){return new Je(w(this.width),w(this.height))}},{})),Xe=Je.extend({initialize:function(w,B,U,Z){this._width=w,this._height=B,this._owner=U,this._setter=Z},_set:function(f,w,B){return this._width=f,this._height=w,B||this._owner[this._setter](this),this},getWidth:function(){return this._width},setWidth:function(f){this._width=f,this._owner[this._setter](this)},getHeight:function(){return this._height},setHeight:function(f){this._height=f,this._owner[this._setter](this)}}),Ke=g.extend({_class:"Rectangle",_readIndex:!0,beans:!0,initialize:function(w,B,U,Z){var K=arguments,se=typeof w,oe;if(se==="number"?(this._set(w,B,U,Z),oe=4):se==="undefined"||w===null?(this._set(0,0,0,0),oe=w===null?1:0):K.length===1&&(Array.isArray(w)?(this._set.apply(this,w),oe=1):w.x!==n||w.width!==n?(this._set(w.x||0,w.y||0,w.width||0,w.height||0),oe=1):w.from===n&&w.to===n&&(this._set(0,0,0,0),g.readSupported(K,this)&&(oe=1))),oe===n){var fe=le.readNamed(K,"from"),ye=g.peek(K),Me=fe.x,xe=fe.y,ke,be;if(ye&&ye.x!==n||g.hasNamed(K,"to")){var Ne=le.readNamed(K,"to");ke=Ne.x-Me,be=Ne.y-xe,ke<0&&(Me=Ne.x,ke=-ke),be<0&&(xe=Ne.y,be=-be)}else{var Re=Je.read(K);ke=Re.width,be=Re.height}this._set(Me,xe,ke,be),oe=K.__index}var Fe=K.__filtered;return Fe&&(this.__filtered=Fe),this.__read&&(this.__read=oe),this},set:"#initialize",_set:function(f,w,B,U){return this.x=f,this.y=w,this.width=B,this.height=U,this},clone:function(){return new Ke(this.x,this.y,this.width,this.height)},equals:function(f){var w=g.isPlainValue(f)?Ke.read(arguments):f;return w===this||w&&this.x===w.x&&this.y===w.y&&this.width===w.width&&this.height===w.height||!1},toString:function(){var f=re.instance;return"{ x: "+f.number(this.x)+", y: "+f.number(this.y)+", width: "+f.number(this.width)+", height: "+f.number(this.height)+" }"},_serialize:function(f){var w=f.formatter;return[w.number(this.x),w.number(this.y),w.number(this.width),w.number(this.height)]},getPoint:function(f){var w=f?le:je;return new w(this.x,this.y,this,"setPoint")},setPoint:function(){var f=le.read(arguments);this.x=f.x,this.y=f.y},getSize:function(f){var w=f?Je:Xe;return new w(this.width,this.height,this,"setSize")},_fw:1,_fh:1,setSize:function(){var f=Je.read(arguments),w=this._sx,B=this._sy,U=f.width,Z=f.height;w&&(this.x+=(this.width-U)*w),B&&(this.y+=(this.height-Z)*B),this.width=U,this.height=Z,this._fw=this._fh=1},getLeft:function(){return this.x},setLeft:function(f){if(!this._fw){var w=f-this.x;this.width-=this._sx===.5?w*2:w}this.x=f,this._sx=this._fw=0},getTop:function(){return this.y},setTop:function(f){if(!this._fh){var w=f-this.y;this.height-=this._sy===.5?w*2:w}this.y=f,this._sy=this._fh=0},getRight:function(){return this.x+this.width},setRight:function(f){if(!this._fw){var w=f-this.x;this.width=this._sx===.5?w*2:w}this.x=f-this.width,this._sx=1,this._fw=0},getBottom:function(){return this.y+this.height},setBottom:function(f){if(!this._fh){var w=f-this.y;this.height=this._sy===.5?w*2:w}this.y=f-this.height,this._sy=1,this._fh=0},getCenterX:function(){return this.x+this.width/2},setCenterX:function(f){this._fw||this._sx===.5?this.x=f-this.width/2:(this._sx&&(this.x+=(f-this.x)*2*this._sx),this.width=(f-this.x)*2),this._sx=.5,this._fw=0},getCenterY:function(){return this.y+this.height/2},setCenterY:function(f){this._fh||this._sy===.5?this.y=f-this.height/2:(this._sy&&(this.y+=(f-this.y)*2*this._sy),this.height=(f-this.y)*2),this._sy=.5,this._fh=0},getCenter:function(f){var w=f?le:je;return new w(this.getCenterX(),this.getCenterY(),this,"setCenter")},setCenter:function(){var f=le.read(arguments);return this.setCenterX(f.x),this.setCenterY(f.y),this},getArea:function(){return this.width*this.height},isEmpty:function(){return this.width===0||this.height===0},contains:function(f){return f&&f.width!==n||(Array.isArray(f)?f:arguments).length===4?this._containsRectangle(Ke.read(arguments)):this._containsPoint(le.read(arguments))},_containsPoint:function(f){var w=f.x,B=f.y;return w>=this.x&&B>=this.y&&w<=this.x+this.width&&B<=this.y+this.height},_containsRectangle:function(f){var w=f.x,B=f.y;return w>=this.x&&B>=this.y&&w+f.width<=this.x+this.width&&B+f.height<=this.y+this.height},intersects:function(){var f=Ke.read(arguments),w=g.read(arguments)||0;return f.x+f.width>this.x-w&&f.y+f.height>this.y-w&&f.x<this.x+this.width+w&&f.y<this.y+this.height+w},intersect:function(){var f=Ke.read(arguments),w=Math.max(this.x,f.x),B=Math.max(this.y,f.y),U=Math.min(this.x+this.width,f.x+f.width),Z=Math.min(this.y+this.height,f.y+f.height);return new Ke(w,B,U-w,Z-B)},unite:function(){var f=Ke.read(arguments),w=Math.min(this.x,f.x),B=Math.min(this.y,f.y),U=Math.max(this.x+this.width,f.x+f.width),Z=Math.max(this.y+this.height,f.y+f.height);return new Ke(w,B,U-w,Z-B)},include:function(){var f=le.read(arguments),w=Math.min(this.x,f.x),B=Math.min(this.y,f.y),U=Math.max(this.x+this.width,f.x),Z=Math.max(this.y+this.height,f.y);return new Ke(w,B,U-w,Z-B)},expand:function(){var f=Je.read(arguments),w=f.width,B=f.height;return new Ke(this.x-w/2,this.y-B/2,this.width+w,this.height+B)},scale:function(f,w){return this.expand(this.width*f-this.width,this.height*(w===n?f:w)-this.height)}},g.each([["Top","Left"],["Top","Right"],["Bottom","Left"],["Bottom","Right"],["Left","Center"],["Top","Center"],["Right","Center"],["Bottom","Center"]],function(f,w){var B=f.join(""),U=/^[RL]/.test(B);w>=4&&(f[1]+=U?"Y":"X");var Z=f[U?0:1],K=f[U?1:0],se="get"+Z,oe="get"+K,fe="set"+Z,ye="set"+K,Me="get"+B,xe="set"+B;this[Me]=function(ke){var be=ke?le:je;return new be(this[se](),this[oe](),this,xe)},this[xe]=function(){var ke=le.read(arguments);this[fe](ke.x),this[ye](ke.y)}},{beans:!0})),xt=Ke.extend({initialize:function(w,B,U,Z,K,se){this._set(w,B,U,Z,!0),this._owner=K,this._setter=se},_set:function(f,w,B,U,Z){return this._x=f,this._y=w,this._width=B,this._height=U,Z||this._owner[this._setter](this),this}},new function(){var f=Ke.prototype;return g.each(["x","y","width","height"],function(w){var B=g.capitalize(w),U="_"+w;this["get"+B]=function(){return this[U]},this["set"+B]=function(Z){this[U]=Z,this._dontNotify||this._owner[this._setter](this)}},g.each(["Point","Size","Center","Left","Top","Right","Bottom","CenterX","CenterY","TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],function(w){var B="set"+w;this[B]=function(){this._dontNotify=!0,f[B].apply(this,arguments),this._dontNotify=!1,this._owner[this._setter](this)}},{isSelected:function(){return!!(this._owner._selection&2)},setSelected:function(w){var B=this._owner;B._changeSelection&&B._changeSelection(2,w)}}))}),gt=g.extend({_class:"Matrix",initialize:function f(w,B){var U=arguments,Z=U.length,K=!0;if(Z>=6?this._set.apply(this,U):Z===1||Z===2?w instanceof f?this._set(w._a,w._b,w._c,w._d,w._tx,w._ty,B):Array.isArray(w)?this._set.apply(this,B?w.concat([B]):w):K=!1:Z?K=!1:this.reset(),!K)throw new Error("Unsupported matrix parameters");return this},set:"#initialize",_set:function(f,w,B,U,Z,K,se){return this._a=f,this._b=w,this._c=B,this._d=U,this._tx=Z,this._ty=K,se||this._changed(),this},_serialize:function(f,w){return g.serialize(this.getValues(),f,!0,w)},_changed:function(){var f=this._owner;f&&(f._applyMatrix?f.transform(null,!0):f._changed(25))},clone:function(){return new gt(this._a,this._b,this._c,this._d,this._tx,this._ty)},equals:function(f){return f===this||f&&this._a===f._a&&this._b===f._b&&this._c===f._c&&this._d===f._d&&this._tx===f._tx&&this._ty===f._ty},toString:function(){var f=re.instance;return"[["+[f.number(this._a),f.number(this._c),f.number(this._tx)].join(", ")+"], ["+[f.number(this._b),f.number(this._d),f.number(this._ty)].join(", ")+"]]"},reset:function(f){return this._a=this._d=1,this._b=this._c=this._tx=this._ty=0,f||this._changed(),this},apply:function(f,w){var B=this._owner;return B?(B.transform(null,g.pick(f,!0),w),this.isIdentity()):!1},translate:function(){var f=le.read(arguments),w=f.x,B=f.y;return this._tx+=w*this._a+B*this._c,this._ty+=w*this._b+B*this._d,this._changed(),this},scale:function(){var f=arguments,w=le.read(f),B=le.read(f,0,{readNull:!0});return B&&this.translate(B),this._a*=w.x,this._b*=w.x,this._c*=w.y,this._d*=w.y,B&&this.translate(B.negate()),this._changed(),this},rotate:function(f){f*=Math.PI/180;var w=le.read(arguments,1),B=w.x,U=w.y,Z=Math.cos(f),K=Math.sin(f),se=B-B*Z+U*K,oe=U-B*K-U*Z,fe=this._a,ye=this._b,Me=this._c,xe=this._d;return this._a=Z*fe+K*Me,this._b=Z*ye+K*xe,this._c=-K*fe+Z*Me,this._d=-K*ye+Z*xe,this._tx+=se*fe+oe*Me,this._ty+=se*ye+oe*xe,this._changed(),this},shear:function(){var f=arguments,w=le.read(f),B=le.read(f,0,{readNull:!0});B&&this.translate(B);var U=this._a,Z=this._b;return this._a+=w.y*this._c,this._b+=w.y*this._d,this._c+=w.x*U,this._d+=w.x*Z,B&&this.translate(B.negate()),this._changed(),this},skew:function(){var f=arguments,w=le.read(f),B=le.read(f,0,{readNull:!0}),U=Math.PI/180,Z=new le(Math.tan(w.x*U),Math.tan(w.y*U));return this.shear(Z,B)},append:function(f,w){if(f){var B=this._a,U=this._b,Z=this._c,K=this._d,se=f._a,oe=f._c,fe=f._b,ye=f._d,Me=f._tx,xe=f._ty;this._a=se*B+fe*Z,this._c=oe*B+ye*Z,this._b=se*U+fe*K,this._d=oe*U+ye*K,this._tx+=Me*B+xe*Z,this._ty+=Me*U+xe*K,w||this._changed()}return this},prepend:function(f,w){if(f){var B=this._a,U=this._b,Z=this._c,K=this._d,se=this._tx,oe=this._ty,fe=f._a,ye=f._c,Me=f._b,xe=f._d,ke=f._tx,be=f._ty;this._a=fe*B+ye*U,this._c=fe*Z+ye*K,this._b=Me*B+xe*U,this._d=Me*Z+xe*K,this._tx=fe*se+ye*oe+ke,this._ty=Me*se+xe*oe+be,w||this._changed()}return this},appended:function(f){return this.clone().append(f)},prepended:function(f){return this.clone().prepend(f)},invert:function(){var f=this._a,w=this._b,B=this._c,U=this._d,Z=this._tx,K=this._ty,se=f*U-w*B,oe=null;return se&&!isNaN(se)&&isFinite(Z)&&isFinite(K)&&(this._a=U/se,this._b=-w/se,this._c=-B/se,this._d=f/se,this._tx=(B*K-U*Z)/se,this._ty=(w*Z-f*K)/se,oe=this),oe},inverted:function(){return this.clone().invert()},concatenate:"#append",preConcatenate:"#prepend",chain:"#appended",_shiftless:function(){return new gt(this._a,this._b,this._c,this._d,0,0)},_orNullIfIdentity:function(){return this.isIdentity()?null:this},isIdentity:function(){return this._a===1&&this._b===0&&this._c===0&&this._d===1&&this._tx===0&&this._ty===0},isInvertible:function(){var f=this._a*this._d-this._c*this._b;return f&&!isNaN(f)&&isFinite(this._tx)&&isFinite(this._ty)},isSingular:function(){return!this.isInvertible()},transform:function(f,w,B){return arguments.length<3?this._transformPoint(le.read(arguments)):this._transformCoordinates(f,w,B)},_transformPoint:function(f,w,B){var U=f.x,Z=f.y;return w||(w=new le),w._set(U*this._a+Z*this._c+this._tx,U*this._b+Z*this._d+this._ty,B)},_transformCoordinates:function(f,w,B){for(var U=0,Z=2*B;U<Z;U+=2){var K=f[U],se=f[U+1];w[U]=K*this._a+se*this._c+this._tx,w[U+1]=K*this._b+se*this._d+this._ty}return w},_transformCorners:function(f){var w=f.x,B=f.y,U=w+f.width,Z=B+f.height,K=[w,B,U,B,U,Z,w,Z];return this._transformCoordinates(K,K,4)},_transformBounds:function(f,w,B){for(var U=this._transformCorners(f),Z=U.slice(0,2),K=Z.slice(),se=2;se<8;se++){var oe=U[se],fe=se&1;oe<Z[fe]?Z[fe]=oe:oe>K[fe]&&(K[fe]=oe)}return w||(w=new Ke),w._set(Z[0],Z[1],K[0]-Z[0],K[1]-Z[1],B)},inverseTransform:function(){return this._inverseTransform(le.read(arguments))},_inverseTransform:function(f,w,B){var U=this._a,Z=this._b,K=this._c,se=this._d,oe=this._tx,fe=this._ty,ye=U*se-Z*K,Me=null;if(ye&&!isNaN(ye)&&isFinite(oe)&&isFinite(fe)){var xe=f.x-this._tx,ke=f.y-this._ty;w||(w=new le),Me=w._set((xe*se-ke*K)/ye,(ke*U-xe*Z)/ye,B)}return Me},decompose:function(){var f=this._a,w=this._b,B=this._c,U=this._d,Z=f*U-w*B,K=Math.sqrt,se=Math.atan2,oe=180/Math.PI,fe,ye,Me;if(f!==0||w!==0){var xe=K(f*f+w*w);fe=Math.acos(f/xe)*(w>0?1:-1),ye=[xe,Z/xe],Me=[se(f*B+w*U,xe*xe),0]}else if(B!==0||U!==0){var ke=K(B*B+U*U);fe=Math.asin(B/ke)*(U>0?1:-1),ye=[Z/ke,ke],Me=[0,se(f*B+w*U,ke*ke)]}else fe=0,Me=ye=[0,0];return{translation:this.getTranslation(),rotation:fe*oe,scaling:new le(ye),skewing:new le(Me[0]*oe,Me[1]*oe)}},getValues:function(){return[this._a,this._b,this._c,this._d,this._tx,this._ty]},getTranslation:function(){return new le(this._tx,this._ty)},getScaling:function(){return this.decompose().scaling},getRotation:function(){return this.decompose().rotation},applyToContext:function(f){this.isIdentity()||f.transform(this._a,this._b,this._c,this._d,this._tx,this._ty)}},g.each(["a","b","c","d","tx","ty"],function(f){var w=g.capitalize(f),B="_"+f;this["get"+w]=function(){return this[B]},this["set"+w]=function(U){this[B]=U,this._changed()}},{})),Mt=g.extend({_class:"Line",initialize:function(w,B,U,Z,K){var se=!1;arguments.length>=4?(this._px=w,this._py=B,this._vx=U,this._vy=Z,se=K):(this._px=w.x,this._py=w.y,this._vx=B.x,this._vy=B.y,se=U),se||(this._vx-=this._px,this._vy-=this._py)},getPoint:function(){return new le(this._px,this._py)},getVector:function(){return new le(this._vx,this._vy)},getLength:function(){return this.getVector().getLength()},intersect:function(f,w){return Mt.intersect(this._px,this._py,this._vx,this._vy,f._px,f._py,f._vx,f._vy,!0,w)},getSide:function(f,w){return Mt.getSide(this._px,this._py,this._vx,this._vy,f.x,f.y,!0,w)},getDistance:function(f){return Math.abs(this.getSignedDistance(f))},getSignedDistance:function(f){return Mt.getSignedDistance(this._px,this._py,this._vx,this._vy,f.x,f.y,!0)},isCollinear:function(f){return le.isCollinear(this._vx,this._vy,f._vx,f._vy)},isOrthogonal:function(f){return le.isOrthogonal(this._vx,this._vy,f._vx,f._vy)},statics:{intersect:function(f,w,B,U,Z,K,se,oe,fe,ye){fe||(B-=f,U-=w,se-=Z,oe-=K);var Me=B*oe-U*se;if(!ee.isMachineZero(Me)){var xe=f-Z,ke=w-K,be=(se*ke-oe*xe)/Me,Ne=(B*ke-U*xe)/Me,Re=1e-12,Fe=-Re,de=1+Re;if(ye||Fe<be&&be<de&&Fe<Ne&&Ne<de)return ye||(be=be<=0?0:be>=1?1:be),new le(f+be*B,w+be*U)}},getSide:function(f,w,B,U,Z,K,se,oe){se||(B-=f,U-=w);var fe=Z-f,ye=K-w,Me=fe*U-ye*B;return!oe&&ee.isMachineZero(Me)&&(Me=(fe*B+fe*B)/(B*B+U*U),Me>=0&&Me<=1&&(Me=0)),Me<0?-1:Me>0?1:0},getSignedDistance:function(f,w,B,U,Z,K,se){return se||(B-=f,U-=w),B===0?U>0?Z-f:f-Z:U===0?B<0?K-w:w-K:((Z-f)*U-(K-w)*B)/(U>B?U*Math.sqrt(1+B*B/(U*U)):B*Math.sqrt(1+U*U/(B*B)))},getDistance:function(f,w,B,U,Z,K,se){return Math.abs(Mt.getSignedDistance(f,w,B,U,Z,K,se))}}}),Ct=Q.extend({_class:"Project",_list:"projects",_reference:"project",_compactSerialize:!0,initialize:function(w){Q.call(this,!0),this._children=[],this._namedChildren={},this._activeLayer=null,this._currentStyle=new $i(null,null,this),this._view=Ji.create(this,w||cn.getCanvas(1,1)),this._selectionItems={},this._selectionCount=0,this._updateVersion=0},_serialize:function(f,w){return g.serialize(this._children,f,!0,w)},_changed:function(f,w){if(f&1){var B=this._view;B&&(B._needsUpdate=!0,!B._requested&&B._autoUpdate&&B.requestUpdate())}var U=this._changes;if(U&&w){var Z=this._changesById,K=w._id,se=Z[K];se?se.flags|=f:U.push(Z[K]={item:w,flags:f})}},clear:function(){for(var f=this._children,w=f.length-1;w>=0;w--)f[w].remove()},isEmpty:function(){return!this._children.length},remove:function f(){return f.base.call(this)?(this._view&&this._view.remove(),!0):!1},getView:function(){return this._view},getCurrentStyle:function(){return this._currentStyle},setCurrentStyle:function(f){this._currentStyle.set(f)},getIndex:function(){return this._index},getOptions:function(){return this._scope.settings},getLayers:function(){return this._children},getActiveLayer:function(){return this._activeLayer||new ii({project:this,insert:!0})},getSymbolDefinitions:function(){var f=[],w={};return this.getItems({class:qt,match:function(B){var U=B._definition,Z=U._id;return w[Z]||(w[Z]=!0,f.push(U)),!1}}),f},getSymbols:"getSymbolDefinitions",getSelectedItems:function(){var f=this._selectionItems,w=[];for(var B in f){var U=f[B],Z=U._selection;Z&1&&U.isInserted()?w.push(U):Z||this._updateSelection(U)}return w},_updateSelection:function(f){var w=f._id,B=this._selectionItems;f._selection?B[w]!==f&&(this._selectionCount++,B[w]=f):B[w]===f&&(this._selectionCount--,delete B[w])},selectAll:function(){for(var f=this._children,w=0,B=f.length;w<B;w++)f[w].setFullySelected(!0)},deselectAll:function(){var f=this._selectionItems;for(var w in f)f[w].setFullySelected(!1)},addLayer:function(f){return this.insertLayer(n,f)},insertLayer:function(f,w){if(w instanceof ii){w._remove(!1,!0),g.splice(this._children,[w],f,0),w._setProject(this,!0);var B=w._name;B&&w.setName(B),this._changes&&w._changed(5),this._activeLayer||(this._activeLayer=w)}else w=null;return w},_insertItem:function(f,w,B){return w=this.insertLayer(f,w)||(this._activeLayer||this._insertItem(n,new ii(Te.NO_INSERT),!0)).insertChild(f,w),B&&w.activate&&w.activate(),w},getItems:function(f){return Te._getItems(this,f)},getItem:function(f){return Te._getItems(this,f,null,null,!0)[0]||null},importJSON:function(f){this.activate();var w=this._activeLayer;return g.importJSON(f,w&&w.isEmpty()&&w)},removeOn:function(f){var w=this._removeSets;if(w){f==="mouseup"&&(w.mousedrag=null);var B=w[f];if(B){for(var U in B){var Z=B[U];for(var K in w){var se=w[K];se&&se!=B&&delete se[Z._id]}Z.remove()}w[f]=null}}},draw:function(f,w,B){this._updateVersion++,f.save(),w.applyToContext(f);for(var U=this._children,Z=new g({offset:new le(0,0),pixelRatio:B,viewMatrix:w.isIdentity()?null:w,matrices:[new gt],updateMatrix:!0}),K=0,se=U.length;K<se;K++)U[K].draw(f,Z);if(f.restore(),this._selectionCount>0){f.save(),f.strokeWidth=1;var oe=this._selectionItems,fe=this._scope.settings.handleSize,ye=this._updateVersion;for(var Me in oe)oe[Me]._drawSelection(f,w,fe,oe,ye);f.restore()}}}),Te=g.extend(P,{statics:{extend:function f(w){return w._serializeFields&&(w._serializeFields=g.set({},this.prototype._serializeFields,w._serializeFields)),f.base.apply(this,arguments)},INSERT:{insert:!0},NO_INSERT:{insert:!1}},_class:"Item",_name:null,_applyMatrix:!0,_canApplyMatrix:!0,_canScaleStroke:!1,_pivot:null,_visible:!0,_blendMode:"normal",_opacity:1,_locked:!1,_guide:!1,_clipMask:!1,_selection:0,_selectBounds:!0,_selectChildren:!1,_serializeFields:{name:null,applyMatrix:null,matrix:new gt,pivot:null,visible:!0,blendMode:"normal",opacity:1,locked:!1,guide:!1,clipMask:!1,selected:!1,data:{}},_prioritize:["applyMatrix"]},new function(){var f=["onMouseDown","onMouseUp","onMouseDrag","onClick","onDoubleClick","onMouseMove","onMouseEnter","onMouseLeave"];return g.each(f,function(w){this._events[w]={install:function(B){this.getView()._countItemEvent(B,1)},uninstall:function(B){this.getView()._countItemEvent(B,-1)}}},{_events:{onFrame:{install:function(){this.getView()._animateItem(this,!0)},uninstall:function(){this.getView()._animateItem(this,!1)}},onLoad:{},onError:{}},statics:{_itemHandlers:f}})},{initialize:function(){},_initialize:function(f,w){var B=f&&g.isPlainObject(f),U=B&&f.internal===!0,Z=this._matrix=new gt,K=B&&f.project||pn.project,se=pn.settings;return this._id=U?null:ce.get(),this._parent=this._index=null,this._applyMatrix=this._canApplyMatrix&&se.applyMatrix,w&&Z.translate(w),Z._owner=this,this._style=new $i(K._currentStyle,this,K),U||B&&f.insert==!1||!se.insertItems&&!(B&&f.insert==!0)?this._setProject(K):(B&&f.parent||K)._insertItem(n,this,!0),B&&f!==Te.NO_INSERT&&f!==Te.INSERT&&this.set(f,{internal:!0,insert:!0,project:!0,parent:!0}),B},_serialize:function(f,w){var B={},U=this;function Z(K){for(var se in K){var oe=U[se];g.equals(oe,se==="leading"?K.fontSize*1.2:K[se])||(B[se]=g.serialize(oe,f,se!=="data",w))}}return Z(this._serializeFields),this instanceof Ai||Z(this._style._defaults),[this._class,B]},_changed:function(f){var w=this._symbol,B=this._parent||w,U=this._project;f&8&&(this._bounds=this._position=this._decomposed=n),f&16&&(this._globalMatrix=n),B&&f&72&&Te._clearBoundsCache(B),f&2&&Te._clearBoundsCache(this),U&&U._changed(f,this),w&&w._changed(f)},getId:function(){return this._id},getName:function(){return this._name},setName:function(f){if(this._name&&this._removeNamed(),f===+f+"")throw new Error("Names consisting only of numbers are not supported.");var w=this._getOwner();if(f&&w){var B=w._children,U=w._namedChildren;(U[f]=U[f]||[]).push(this),f in B||(B[f]=this)}this._name=f||n,this._changed(256)},getStyle:function(){return this._style},setStyle:function(f){this.getStyle().set(f)}},g.each(["locked","visible","blendMode","opacity","guide"],function(f){var w=g.capitalize(f),B="_"+f,U={locked:256,visible:265};this["get"+w]=function(){return this[B]},this["set"+w]=function(Z){Z!=this[B]&&(this[B]=Z,this._changed(U[f]||257))}},{}),{beans:!0,getSelection:function(){return this._selection},setSelection:function(f){if(f!==this._selection){this._selection=f;var w=this._project;w&&(w._updateSelection(this),this._changed(257))}},_changeSelection:function(f,w){var B=this._selection;this.setSelection(w?B|f:B&~f)},isSelected:function(){if(this._selectChildren){for(var f=this._children,w=0,B=f.length;w<B;w++)if(f[w].isSelected())return!0}return!!(this._selection&1)},setSelected:function(f){if(this._selectChildren)for(var w=this._children,B=0,U=w.length;B<U;B++)w[B].setSelected(f);this._changeSelection(1,f)},isFullySelected:function(){var f=this._children,w=!!(this._selection&1);if(f&&w){for(var B=0,U=f.length;B<U;B++)if(!f[B].isFullySelected())return!1;return!0}return w},setFullySelected:function(f){var w=this._children;if(w)for(var B=0,U=w.length;B<U;B++)w[B].setFullySelected(f);this._changeSelection(1,f)},isClipMask:function(){return this._clipMask},setClipMask:function(f){this._clipMask!=(f=!!f)&&(this._clipMask=f,f&&(this.setFillColor(null),this.setStrokeColor(null)),this._changed(257),this._parent&&this._parent._changed(2048))},getData:function(){return this._data||(this._data={}),this._data},setData:function(f){this._data=f},getPosition:function(f){var w=f?le:je,B=this._position||(this._position=this._getPositionFromBounds());return new w(B.x,B.y,this,"setPosition")},setPosition:function(){this.translate(le.read(arguments).subtract(this.getPosition(!0)))},_getPositionFromBounds:function(f){return this._pivot?this._matrix._transformPoint(this._pivot):(f||this.getBounds()).getCenter(!0)},getPivot:function(){var f=this._pivot;return f?new je(f.x,f.y,this,"setPivot"):null},setPivot:function(){this._pivot=le.read(arguments,0,{clone:!0,readNull:!0}),this._position=n}},g.each({getStrokeBounds:{stroke:!0},getHandleBounds:{handle:!0},getInternalBounds:{internal:!0}},function(f,w){this[w]=function(B){return this.getBounds(B,f)}},{beans:!0,getBounds:function(f,w){var B=w||f instanceof gt,U=g.set({},B?w:f,this._boundsOptions);(!U.stroke||this.getStrokeScaling())&&(U.cacheItem=this);var Z=this._getCachedBounds(B&&f,U).rect;return arguments.length?Z:new xt(Z.x,Z.y,Z.width,Z.height,this,"setBounds")},setBounds:function(){var f=Ke.read(arguments),w=this.getBounds(),B=this._matrix,U=new gt,Z=f.getCenter();U.translate(Z),(f.width!=w.width||f.height!=w.height)&&(B.isInvertible()||(B.set(B._backup||new gt().translate(B.getTranslation())),w=this.getBounds()),U.scale(w.width!==0?f.width/w.width:0,w.height!==0?f.height/w.height:0)),Z=w.getCenter(),U.translate(-Z.x,-Z.y),this.transform(U)},_getBounds:function(f,w){var B=this._children;return!B||!B.length?new Ke:(Te._updateBoundsCache(this,w.cacheItem),Te._getBounds(B,f,w))},_getBoundsCacheKey:function(f,w){return[f.stroke?1:0,f.handle?1:0,w?1:0].join("")},_getCachedBounds:function(f,w,B){f=f&&f._orNullIfIdentity();var U=w.internal&&!B,Z=w.cacheItem,K=U?null:this._matrix._orNullIfIdentity(),se=Z&&(!f||f.equals(K))&&this._getBoundsCacheKey(w,U),oe=this._bounds;if(Te._updateBoundsCache(this._parent||this._symbol,Z),se&&oe&&se in oe){var fe=oe[se];return{rect:fe.rect.clone(),nonscaling:fe.nonscaling}}var ye=this._getBounds(f||K,w),Me=ye.rect||ye,xe=this._style,ke=ye.nonscaling||xe.hasStroke()&&!xe.getStrokeScaling();if(se){oe||(this._bounds=oe={});var fe=oe[se]={rect:Me.clone(),nonscaling:ke,internal:U}}return{rect:Me,nonscaling:ke}},_getStrokeMatrix:function(f,w){var B=this.getStrokeScaling()?null:w&&w.internal?this:this._parent||this._symbol&&this._symbol._item,U=B?B.getViewMatrix().invert():f;return U&&U._shiftless()},statics:{_updateBoundsCache:function(f,w){if(f&&w){var B=w._id,U=f._boundsCache=f._boundsCache||{ids:{},list:[]};U.ids[B]||(U.list.push(w),U.ids[B]=w)}},_clearBoundsCache:function(f){var w=f._boundsCache;if(w){f._bounds=f._position=f._boundsCache=n;for(var B=0,U=w.list,Z=U.length;B<Z;B++){var K=U[B];K!==f&&(K._bounds=K._position=n,K._boundsCache&&Te._clearBoundsCache(K))}}},_getBounds:function(f,w,B){var U=1/0,Z=-U,K=U,se=Z,oe=!1;B=B||{};for(var fe=0,ye=f.length;fe<ye;fe++){var Me=f[fe];if(Me._visible&&!Me.isEmpty(!0)){var xe=Me._getCachedBounds(w&&w.appended(Me._matrix),B,!0),ke=xe.rect;U=Math.min(ke.x,U),K=Math.min(ke.y,K),Z=Math.max(ke.x+ke.width,Z),se=Math.max(ke.y+ke.height,se),xe.nonscaling&&(oe=!0)}}return{rect:isFinite(U)?new Ke(U,K,Z-U,se-K):new Ke,nonscaling:oe}}}}),{beans:!0,_decompose:function(){return this._applyMatrix?null:this._decomposed||(this._decomposed=this._matrix.decompose())},getRotation:function(){var f=this._decompose();return f?f.rotation:0},setRotation:function(f){var w=this.getRotation();if(w!=null&&f!=null){var B=this._decomposed;this.rotate(f-w),B&&(B.rotation=f,this._decomposed=B)}},getScaling:function(){var f=this._decompose(),w=f&&f.scaling;return new je(w?w.x:1,w?w.y:1,this,"setScaling")},setScaling:function(){var f=this.getScaling(),w=le.read(arguments,0,{clone:!0,readNull:!0});if(f&&w&&!f.equals(w)){var B=this.getRotation(),U=this._decomposed,Z=new gt,K=ee.isZero;if(K(f.x)||K(f.y))Z.translate(U.translation),B&&Z.rotate(B),Z.scale(w.x,w.y),this._matrix.set(Z);else{var se=this.getPosition(!0);Z.translate(se),B&&Z.rotate(B),Z.scale(w.x/f.x,w.y/f.y),B&&Z.rotate(-B),Z.translate(se.negate()),this.transform(Z)}U&&(U.scaling=w,this._decomposed=U)}},getMatrix:function(){return this._matrix},setMatrix:function(){var f=this._matrix;f.set.apply(f,arguments)},getGlobalMatrix:function(f){var w=this._globalMatrix;if(w)for(var B=this._parent,U=[];B;){if(!B._globalMatrix){w=null;for(var Z=0,K=U.length;Z<K;Z++)U[Z]._globalMatrix=null;break}U.push(B),B=B._parent}if(!w){w=this._globalMatrix=this._matrix.clone();var B=this._parent;B&&w.prepend(B.getGlobalMatrix(!0))}return f?w:w.clone()},getViewMatrix:function(){return this.getGlobalMatrix().prepend(this.getView()._matrix)},getApplyMatrix:function(){return this._applyMatrix},setApplyMatrix:function(f){(this._applyMatrix=this._canApplyMatrix&&!!f)&&this.transform(null,!0)},getTransformContent:"#getApplyMatrix",setTransformContent:"#setApplyMatrix"},{getProject:function(){return this._project},_setProject:function(f,w){if(this._project!==f){this._project&&this._installEvents(!1),this._project=f;for(var B=this._children,U=0,Z=B&&B.length;U<Z;U++)B[U]._setProject(f);w=!0}w&&this._installEvents(!0)},getView:function(){return this._project._view},_installEvents:function f(w){f.base.call(this,w);for(var B=this._children,U=0,Z=B&&B.length;U<Z;U++)B[U]._installEvents(w)},getLayer:function(){for(var f=this;f=f._parent;)if(f instanceof ii)return f;return null},getParent:function(){return this._parent},setParent:function(f){return f.addChild(this)},_getOwner:"#getParent",getChildren:function(){return this._children},setChildren:function(f){this.removeChildren(),this.addChildren(f)},getFirstChild:function(){return this._children&&this._children[0]||null},getLastChild:function(){return this._children&&this._children[this._children.length-1]||null},getNextSibling:function(){var f=this._getOwner();return f&&f._children[this._index+1]||null},getPreviousSibling:function(){var f=this._getOwner();return f&&f._children[this._index-1]||null},getIndex:function(){return this._index},equals:function(f){return f===this||f&&this._class===f._class&&this._style.equals(f._style)&&this._matrix.equals(f._matrix)&&this._locked===f._locked&&this._visible===f._visible&&this._blendMode===f._blendMode&&this._opacity===f._opacity&&this._clipMask===f._clipMask&&this._guide===f._guide&&this._equals(f)||!1},_equals:function(f){return g.equals(this._children,f._children)},clone:function(f){var w=new this.constructor(Te.NO_INSERT),B=this._children,U=g.pick(f?f.insert:n,f===n||f===!0),Z=g.pick(f?f.deep:n,!0);B&&w.copyAttributes(this),(!B||Z)&&w.copyContent(this),B||w.copyAttributes(this),U&&w.insertAbove(this);var K=this._name,se=this._parent;if(K&&se){for(var B=se._children,oe=K,fe=1;B[K];)K=oe+" "+fe++;K!==oe&&w.setName(K)}return w},copyContent:function(f){for(var w=f._children,B=0,U=w&&w.length;B<U;B++)this.addChild(w[B].clone(!1),!0)},copyAttributes:function(f,w){this.setStyle(f._style);for(var B=["_locked","_visible","_blendMode","_opacity","_clipMask","_guide"],U=0,Z=B.length;U<Z;U++){var K=B[U];f.hasOwnProperty(K)&&(this[K]=f[K])}w||this._matrix.set(f._matrix,!0),this.setApplyMatrix(f._applyMatrix),this.setPivot(f._pivot),this.setSelection(f._selection);var se=f._data,oe=f._name;this._data=se?g.clone(se):null,oe&&this.setName(oe)},rasterize:function(f,w){var B,U,Z;g.isPlainObject(f)?(B=f.resolution,U=f.insert,Z=f.raster):(B=f,U=w),Z||(Z=new gi(Te.NO_INSERT));var K=this.getStrokeBounds(),se=(B||this.getView().getResolution())/72,oe=K.getTopLeft().floor(),fe=K.getBottomRight().ceil(),ye=new Je(fe.subtract(oe)),Me=ye.multiply(se);if(Z.setSize(Me,!0),!Me.isZero()){var xe=Z.getContext(!0),ke=new gt().scale(se).translate(oe.negate());xe.save(),ke.applyToContext(xe),this.draw(xe,new g({matrices:[ke]})),xe.restore()}return Z._matrix.set(new gt().translate(oe.add(ye.divide(2))).scale(1/se)),(U===n||U)&&Z.insertAbove(this),Z},contains:function(){var f=this._matrix;return f.isInvertible()&&!!this._contains(f._inverseTransform(le.read(arguments)))},_contains:function(f){var w=this._children;if(w){for(var B=w.length-1;B>=0;B--)if(w[B].contains(f))return!0;return!1}return f.isInside(this.getInternalBounds())},isInside:function(){return Ke.read(arguments).contains(this.getBounds())},_asPathItem:function(){return new Lt.Rectangle({rectangle:this.getInternalBounds(),matrix:this._matrix,insert:!1})},intersects:function(f,w){return f instanceof Te?this._asPathItem().getIntersections(f._asPathItem(),null,w,!0).length>0:!1}},new function(){function f(){var U=arguments;return this._hitTest(le.read(U),mi.getOptions(U))}function w(){var U=arguments,Z=le.read(U),K=mi.getOptions(U),se=[];return this._hitTest(Z,new g({all:se},K)),se}function B(U,Z,K,se){var oe=this._children;if(oe)for(var fe=oe.length-1;fe>=0;fe--){var ye=oe[fe],Me=ye!==se&&ye._hitTest(U,Z,K);if(Me&&!Z.all)return Me}return null}return Ct.inject({hitTest:f,hitTestAll:w,_hitTest:B}),{hitTest:f,hitTestAll:w,_hitTestChildren:B}},{_hitTest:function(f,w,B){if(this._locked||!this._visible||this._guide&&!w.guides||this.isEmpty())return null;var U=this._matrix,Z=B?B.appended(U):this.getGlobalMatrix().prepend(this.getView()._matrix),K=Math.max(w.tolerance,1e-12),se=w._tolerancePadding=new Je(Lt._getStrokePadding(K,U._shiftless().invert()));if(f=U._inverseTransform(f),!f||!this._children&&!this.getBounds({internal:!0,stroke:!0,handle:!0}).expand(se.multiply(2))._containsPoint(f))return null;var oe=!(w.guides&&!this._guide||w.selected&&!this.isSelected()||w.type&&w.type!==g.hyphenate(this._class)||w.class&&!(this instanceof w.class)),fe=w.match,ye=this,Me,xe;function ke(W){return W&&fe&&!fe(W)&&(W=null),W&&w.all&&w.all.push(W),W}function be(W,ie){var he=ie?Me["get"+ie]():ye.getPosition();if(f.subtract(he).divide(se).length<=1)return new mi(W,ye,{name:ie?g.hyphenate(ie):W,point:he})}var Ne=w.position,Re=w.center,Fe=w.bounds;if(oe&&this._parent&&(Ne||Re||Fe)){if((Re||Fe)&&(Me=this.getInternalBounds()),xe=Ne&&be("position")||Re&&be("center","Center"),!xe&&Fe)for(var de=["TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],Ae=0;Ae<8&&!xe;Ae++)xe=be("bounds",de[Ae]);xe=ke(xe)}return xe||(xe=this._hitTestChildren(f,w,Z)||oe&&ke(this._hitTestSelf(f,w,Z,this.getStrokeScaling()?null:Z._shiftless().invert()))||null),xe&&xe.point&&(xe.point=U.transform(xe.point)),xe},_hitTestSelf:function(f,w){if(w.fill&&this.hasFill()&&this._contains(f))return new mi("fill",this)},matches:function(f,w){function B(se,oe){for(var fe in se)if(se.hasOwnProperty(fe)){var ye=se[fe],Me=oe[fe];if(g.isPlainObject(ye)&&g.isPlainObject(Me)){if(!B(ye,Me))return!1}else if(!g.equals(ye,Me))return!1}return!0}var U=typeof f;if(U==="object"){for(var Z in f)if(f.hasOwnProperty(Z)&&!this.matches(Z,f[Z]))return!1;return!0}else{if(U==="function")return f(this);if(f==="match")return w(this);var K=/^(empty|editable)$/.test(f)?this["is"+g.capitalize(f)]():f==="type"?g.hyphenate(this._class):this[f];if(f==="class"){if(typeof w=="function")return this instanceof w;K=this._class}if(typeof w=="function")return!!w(K);if(w){if(w.test)return w.test(K);if(g.isPlainObject(w))return B(w,K)}return g.equals(K,w)}},getItems:function(f){return Te._getItems(this,f,this._matrix)},getItem:function(f){return Te._getItems(this,f,this._matrix,null,!0)[0]||null},statics:{_getItems:function f(w,B,U,Z,K){if(!Z){var se=typeof B=="object"&&B,oe=se&&se.overlapping,fe=se&&se.inside,ye=oe||fe,ke=ye&&Ke.read([ye]);Z={items:[],recursive:se&&se.recursive!==!1,inside:!!fe,overlapping:!!oe,rect:ke,path:oe&&new Lt.Rectangle({rectangle:ke,insert:!1})},se&&(B=g.filter({},B,{recursive:!0,inside:!0,overlapping:!0}))}var Me=w._children,xe=Z.items,ke=Z.rect;U=ke&&(U||new gt);for(var be=0,Ne=Me&&Me.length;be<Ne;be++){var Re=Me[be],Fe=U&&U.appended(Re._matrix),de=!0;if(ke){var ye=Re.getBounds(Fe);if(!ke.intersects(ye))continue;ke.contains(ye)||Z.overlapping&&(ye.contains(ke)||Z.path.intersects(Re,Fe))||(de=!1)}if(de&&Re.matches(B)&&(xe.push(Re),K)||(Z.recursive!==!1&&f(Re,B,Fe,Z,K),K&&xe.length>0))break}return xe}}},{importJSON:function(f){var w=g.importJSON(f,this);return w!==this?this.addChild(w):w},addChild:function(f){return this.insertChild(n,f)},insertChild:function(f,w){var B=w?this.insertChildren(f,[w]):null;return B&&B[0]},addChildren:function(f){return this.insertChildren(this._children.length,f)},insertChildren:function(f,w){var B=this._children;if(B&&w&&w.length>0){w=g.slice(w);for(var U={},Z=w.length-1;Z>=0;Z--){var K=w[Z],se=K&&K._id;!K||U[se]?w.splice(Z,1):(K._remove(!1,!0),U[se]=!0)}g.splice(B,w,f,0);for(var oe=this._project,fe=oe._changes,Z=0,ye=w.length;Z<ye;Z++){var K=w[Z],Me=K._name;K._parent=this,K._setProject(oe,!0),Me&&K.setName(Me),fe&&K._changed(5)}this._changed(11)}else w=null;return w},_insertItem:"#insertChild",_insertAt:function(f,w){var B=f&&f._getOwner(),U=f!==this&&B?this:null;return U&&(U._remove(!1,!0),B._insertItem(f._index+w,U)),U},insertAbove:function(f){return this._insertAt(f,1)},insertBelow:function(f){return this._insertAt(f,0)},sendToBack:function(){var f=this._getOwner();return f?f._insertItem(0,this):null},bringToFront:function(){var f=this._getOwner();return f?f._insertItem(n,this):null},appendTop:"#addChild",appendBottom:function(f){return this.insertChild(0,f)},moveAbove:"#insertAbove",moveBelow:"#insertBelow",addTo:function(f){return f._insertItem(n,this)},copyTo:function(f){return this.clone(!1).addTo(f)},reduce:function(f){var w=this._children;if(w&&w.length===1){var B=w[0].reduce(f);return this._parent?(B.insertAbove(this),this.remove()):B.remove(),B}return this},_removeNamed:function(){var f=this._getOwner();if(f){var w=f._children,B=f._namedChildren,U=this._name,Z=B[U],K=Z?Z.indexOf(this):-1;K!==-1&&(w[U]==this&&delete w[U],Z.splice(K,1),Z.length?w[U]=Z[0]:delete B[U])}},_remove:function(f,w){var B=this._getOwner(),U=this._project,Z=this._index;return this._style&&this._style._dispose(),B?(this._name&&this._removeNamed(),Z!=null&&(U._activeLayer===this&&(U._activeLayer=this.getNextSibling()||this.getPreviousSibling()),g.splice(B._children,null,Z,1)),this._installEvents(!1),f&&U._changes&&this._changed(5),w&&B._changed(11,this),this._parent=null,!0):!1},remove:function(){return this._remove(!0,!0)},replaceWith:function(f){var w=f&&f.insertBelow(this);return w&&this.remove(),w},removeChildren:function(f,w){if(!this._children)return null;f=f||0,w=g.pick(w,this._children.length);for(var B=g.splice(this._children,null,f,w-f),U=B.length-1;U>=0;U--)B[U]._remove(!0,!1);return B.length>0&&this._changed(11),B},clear:"#removeChildren",reverseChildren:function(){if(this._children){this._children.reverse();for(var f=0,w=this._children.length;f<w;f++)this._children[f]._index=f;this._changed(11)}},isEmpty:function(f){var w=this._children,B=w?w.length:0;if(f){for(var U=0;U<B;U++)if(!w[U].isEmpty(f))return!1;return!0}return!B},isEditable:function(){for(var f=this;f;){if(!f._visible||f._locked)return!1;f=f._parent}return!0},hasFill:function(){return this.getStyle().hasFill()},hasStroke:function(){return this.getStyle().hasStroke()},hasShadow:function(){return this.getStyle().hasShadow()},_getOrder:function(f){function w(se){var oe=[];do oe.unshift(se);while(se=se._parent);return oe}for(var B=w(this),U=w(f),Z=0,K=Math.min(B.length,U.length);Z<K;Z++)if(B[Z]!=U[Z])return B[Z]._index<U[Z]._index?1:-1;return 0},hasChildren:function(){return this._children&&this._children.length>0},isInserted:function(){return this._parent?this._parent.isInserted():!1},isAbove:function(f){return this._getOrder(f)===-1},isBelow:function(f){return this._getOrder(f)===1},isParent:function(f){return this._parent===f},isChild:function(f){return f&&f._parent===this},isDescendant:function(f){for(var w=this;w=w._parent;)if(w===f)return!0;return!1},isAncestor:function(f){return f?f.isDescendant(this):!1},isSibling:function(f){return this._parent===f._parent},isGroupedWith:function(f){for(var w=this._parent;w;){if(w._parent&&/^(Group|Layer|CompoundPath)$/.test(w._class)&&f.isDescendant(w))return!0;w=w._parent}return!1}},g.each(["rotate","scale","shear","skew"],function(f){var w=f==="rotate";this[f]=function(){var B=arguments,U=(w?g:le).read(B),Z=le.read(B,0,{readNull:!0});return this.transform(new gt()[f](U,Z||this.getPosition(!0)))}},{translate:function(){var f=new gt;return this.transform(f.translate.apply(f,arguments))},transform:function(f,w,B){var U=this._matrix,Z=f&&!f.isIdentity(),K=B&&this._canApplyMatrix||this._applyMatrix&&(Z||!U.isIdentity()||w&&this._children);if(!Z&&!K)return this;if(Z){!f.isInvertible()&&U.isInvertible()&&(U._backup=U.getValues()),U.prepend(f,!0);var se=this._style,oe=se.getFillColor(!0),fe=se.getStrokeColor(!0);oe&&oe.transform(f),fe&&fe.transform(f)}if(K&&(K=this._transformContent(U,w,B))){var ye=this._pivot;ye&&U._transformPoint(ye,ye,!0),U.reset(!0),B&&this._canApplyMatrix&&(this._applyMatrix=!0)}var Me=this._bounds,xe=this._position;(Z||K)&&this._changed(25);var ke=Z&&Me&&f.decompose();if(ke&&ke.skewing.isZero()&&ke.rotation%90===0){for(var be in Me){var Ne=Me[be];if(Ne.nonscaling)delete Me[be];else if(K||!Ne.internal){var Re=Ne.rect;f._transformBounds(Re,Re)}}this._bounds=Me;var Fe=Me[this._getBoundsCacheKey(this._boundsOptions||{})];Fe&&(this._position=this._getPositionFromBounds(Fe.rect))}else Z&&xe&&this._pivot&&(this._position=f._transformPoint(xe,xe));return this},_transformContent:function(f,w,B){var U=this._children;if(U){for(var Z=0,K=U.length;Z<K;Z++)U[Z].transform(f,w,B);return!0}},globalToLocal:function(){return this.getGlobalMatrix(!0)._inverseTransform(le.read(arguments))},localToGlobal:function(){return this.getGlobalMatrix(!0)._transformPoint(le.read(arguments))},parentToLocal:function(){return this._matrix._inverseTransform(le.read(arguments))},localToParent:function(){return this._matrix._transformPoint(le.read(arguments))},fitBounds:function(f,w){f=Ke.read(arguments);var B=this.getBounds(),U=B.height/B.width,Z=f.height/f.width,K=(w?U>Z:U<Z)?f.width/B.width:f.height/B.height,se=new Ke(new le,new Je(B.width*K,B.height*K));se.setCenter(f.getCenter()),this.setBounds(se)}}),{_setStyles:function(f,w,B){var U=this._style,Z=this._matrix;if(U.hasFill()&&(f.fillStyle=U.getFillColor().toCanvasStyle(f,Z)),U.hasStroke()){f.strokeStyle=U.getStrokeColor().toCanvasStyle(f,Z),f.lineWidth=U.getStrokeWidth();var K=U.getStrokeJoin(),se=U.getStrokeCap(),oe=U.getMiterLimit();if(K&&(f.lineJoin=K),se&&(f.lineCap=se),oe&&(f.miterLimit=oe),pn.support.nativeDash){var fe=U.getDashArray(),ye=U.getDashOffset();fe&&fe.length&&("setLineDash"in f?(f.setLineDash(fe),f.lineDashOffset=ye):(f.mozDash=fe,f.mozDashOffset=ye))}}if(U.hasShadow()){var Me=w.pixelRatio||1,xe=B._shiftless().prepend(new gt().scale(Me,Me)),ke=xe.transform(new le(U.getShadowBlur(),0)),be=xe.transform(this.getShadowOffset());f.shadowColor=U.getShadowColor().toCanvasStyle(f),f.shadowBlur=ke.getLength(),f.shadowOffsetX=be.x,f.shadowOffsetY=be.y}},draw:function(f,w,B){if(this._updateVersion=this._project._updateVersion,!(!this._visible||this._opacity===0)){var U=w.matrices,Z=w.viewMatrix,K=this._matrix,se=U[U.length-1].appended(K);if(se.isInvertible()){Z=Z?Z.appended(se):se,U.push(se),w.updateMatrix&&(this._globalMatrix=se);var oe=this._blendMode,fe=ee.clamp(this._opacity,0,1),ye=oe==="normal",Me=fr.nativeModes[oe],xe=ye&&fe===1||w.dontStart||w.clip||(Me||ye&&fe<1)&&this._canComposite(),ke=w.pixelRatio||1,be,Ne,Re;if(!xe){var Fe=this.getStrokeBounds(Z);if(!Fe.width||!Fe.height){U.pop();return}Re=w.offset,Ne=w.offset=Fe.getTopLeft().floor(),be=f,f=cn.getContext(Fe.getSize().ceil().add(1).multiply(ke)),ke!==1&&f.scale(ke,ke)}f.save();var de=B?B.appended(K):this._canScaleStroke&&!this.getStrokeScaling(!0)&&Z,Ae=!xe&&w.clipItem,W=!de||Ae;if(xe?(f.globalAlpha=fe,Me&&(f.globalCompositeOperation=oe)):W&&f.translate(-Ne.x,-Ne.y),W&&(xe?K:Z).applyToContext(f),Ae&&w.clipItem.draw(f,w.extend({clip:!0})),de){f.setTransform(ke,0,0,ke,0,0);var ie=w.offset;ie&&f.translate(-ie.x,-ie.y)}this._draw(f,w,Z,de),f.restore(),U.pop(),w.clip&&!w.dontFinish&&f.clip(this.getFillRule()),xe||(fr.process(oe,f,be,fe,Ne.subtract(Re).multiply(ke)),cn.release(f),w.offset=Re)}}},_isUpdated:function(f){var w=this._parent;if(w instanceof Yt)return w._isUpdated(f);var B=this._updateVersion===f;return!B&&w&&w._visible&&w._isUpdated(f)&&(this._updateVersion=f,B=!0),B},_drawSelection:function(f,w,B,U,Z){var K=this._selection,se=K&1,oe=K&2||se&&this._selectBounds,fe=K&4;if(this._drawSelected||(se=!1),(se||oe||fe)&&this._isUpdated(Z)){var ye,Me=this.getSelectedColor(!0)||(ye=this.getLayer())&&ye.getSelectedColor(!0),xe=w.appended(this.getGlobalMatrix(!0)),ke=B/2;if(f.strokeStyle=f.fillStyle=Me?Me.toCanvasStyle(f):"#009dec",se&&this._drawSelected(f,xe,U),fe){var be=this.getPosition(!0),Ne=this._parent,Re=Ne?Ne.localToGlobal(be):be,Fe=Re.x,de=Re.y;f.beginPath(),f.arc(Fe,de,ke,0,Math.PI*2,!0),f.stroke();for(var Ae=[[0,-1],[1,0],[0,1],[-1,0]],W=ke,ie=B+1,he=0;he<4;he++){var me=Ae[he],pe=me[0],De=me[1];f.moveTo(Fe+pe*W,de+De*W),f.lineTo(Fe+pe*ie,de+De*ie),f.stroke()}}if(oe){var Le=xe._transformCorners(this.getInternalBounds());f.beginPath();for(var he=0;he<8;he++)f[he?"lineTo":"moveTo"](Le[he],Le[++he]);f.closePath(),f.stroke();for(var he=0;he<8;he++)f.fillRect(Le[he]-ke,Le[++he]-ke,B,B)}}},_canComposite:function(){return!1}},g.each(["down","drag","up","move"],function(f){this["removeOn"+g.capitalize(f)]=function(){var w={};return w[f]=!0,this.removeOn(w)}},{removeOn:function(f){for(var w in f)if(f[w]){var B="mouse"+w,U=this._project,Z=U._removeSets=U._removeSets||{};Z[B]=Z[B]||{},Z[B][this._id]=this}return this}}),{tween:function(f,w,B){B||(B=w,w=f,f=null,B||(B=w,w=null));var U=B&&B.easing,Z=B&&B.start,K=B!=null&&(typeof B=="number"?B:B.duration),se=new Cs(this,f,w,K,U,Z);function oe(fe){se._handleFrame(fe.time*1e3),se.running||this.off("frame",oe)}return K&&this.on("frame",oe),se},tweenTo:function(f,w){return this.tween(null,f,w)},tweenFrom:function(f,w){return this.tween(f,null,w)}}),Ai=Te.extend({_class:"Group",_selectBounds:!1,_selectChildren:!0,_serializeFields:{children:[]},initialize:function(w){this._children=[],this._namedChildren={},this._initialize(w)||this.addChildren(Array.isArray(w)?w:arguments)},_changed:function f(w){f.base.call(this,w),w&2050&&(this._clipItem=n)},_getClipItem:function(){var f=this._clipItem;if(f===n){f=null;for(var w=this._children,B=0,U=w.length;B<U;B++)if(w[B]._clipMask){f=w[B];break}this._clipItem=f}return f},isClipped:function(){return!!this._getClipItem()},setClipped:function(f){var w=this.getFirstChild();w&&w.setClipMask(f)},_getBounds:function f(w,B){var U=this._getClipItem();return U?U._getCachedBounds(U._matrix.prepended(w),g.set({},B,{stroke:!1})):f.base.call(this,w,B)},_hitTestChildren:function f(w,B,U){var Z=this._getClipItem();return(!Z||Z.contains(w))&&f.base.call(this,w,B,U,Z)},_draw:function(f,w){var B=w.clip,U=!B&&this._getClipItem();w=w.extend({clipItem:U,clip:!1}),B?(f.beginPath(),w.dontStart=w.dontFinish=!0):U&&U.draw(f,w.extend({clip:!0}));for(var Z=this._children,K=0,se=Z.length;K<se;K++){var oe=Z[K];oe!==U&&oe.draw(f,w)}}}),ii=Ai.extend({_class:"Layer",initialize:function(){Ai.apply(this,arguments)},_getOwner:function(){return this._parent||this._index!=null&&this._project},isInserted:function f(){return this._parent?f.base.call(this):this._index!=null},activate:function(){this._project._activeLayer=this},_hitTestSelf:function(){}}),xi=Te.extend({_class:"Shape",_applyMatrix:!1,_canApplyMatrix:!1,_canScaleStroke:!0,_serializeFields:{type:null,size:null,radius:null},initialize:function(w,B){this._initialize(w,B)},_equals:function(f){return this._type===f._type&&this._size.equals(f._size)&&g.equals(this._radius,f._radius)},copyContent:function(f){this.setType(f._type),this.setSize(f._size),this.setRadius(f._radius)},getType:function(){return this._type},setType:function(f){this._type=f},getShape:"#getType",setShape:"#setType",getSize:function(){var f=this._size;return new Xe(f.width,f.height,this,"setSize")},setSize:function(){var f=Je.read(arguments);if(!this._size)this._size=f.clone();else if(!this._size.equals(f)){var w=this._type,B=f.width,U=f.height;w==="rectangle"?this._radius.set(Je.min(this._radius,f.divide(2).abs())):w==="circle"?(B=U=(B+U)/2,this._radius=B/2):w==="ellipse"&&this._radius._set(B/2,U/2),this._size._set(B,U),this._changed(9)}},getRadius:function(){var f=this._radius;return this._type==="circle"?f:new Xe(f.width,f.height,this,"setRadius")},setRadius:function(f){var w=this._type;if(w==="circle"){if(f===this._radius)return;var B=f*2;this._radius=f,this._size._set(B,B)}else if(f=Je.read(arguments),!this._radius)this._radius=f.clone();else{if(this._radius.equals(f))return;if(this._radius.set(f),w==="rectangle"){var B=Je.max(this._size,f.multiply(2));this._size.set(B)}else w==="ellipse"&&this._size._set(f.width*2,f.height*2)}this._changed(9)},isEmpty:function(){return!1},toPath:function(f){var w=new Lt[g.capitalize(this._type)]({center:new le,size:this._size,radius:this._radius,insert:!1});return w.copyAttributes(this),pn.settings.applyMatrix&&w.setApplyMatrix(!0),(f===n||f)&&w.insertAbove(this),w},toShape:"#clone",_asPathItem:function(){return this.toPath(!1)},_draw:function(f,w,B,U){var Z=this._style,K=Z.hasFill(),se=Z.hasStroke(),oe=w.dontFinish||w.clip,fe=!U;if(K||se||oe){var ye=this._type,Me=this._radius,xe=ye==="circle";if(w.dontStart||f.beginPath(),fe&&xe)f.arc(0,0,Me,0,Math.PI*2,!0);else{var ke=xe?Me:Me.width,be=xe?Me:Me.height,Ne=this._size,Re=Ne.width,Fe=Ne.height;if(fe&&ye==="rectangle"&&ke===0&&be===0)f.rect(-Re/2,-Fe/2,Re,Fe);else{var de=Re/2,Ae=Fe/2,W=1-.5522847498307936,ie=ke*W,he=be*W,me=[-de,-Ae+be,-de,-Ae+he,-de+ie,-Ae,-de+ke,-Ae,de-ke,-Ae,de-ie,-Ae,de,-Ae+he,de,-Ae+be,de,Ae-be,de,Ae-he,de-ie,Ae,de-ke,Ae,-de+ke,Ae,-de+ie,Ae,-de,Ae-he,-de,Ae-be];U&&U.transform(me,me,32),f.moveTo(me[0],me[1]),f.bezierCurveTo(me[2],me[3],me[4],me[5],me[6],me[7]),de!==ke&&f.lineTo(me[8],me[9]),f.bezierCurveTo(me[10],me[11],me[12],me[13],me[14],me[15]),Ae!==be&&f.lineTo(me[16],me[17]),f.bezierCurveTo(me[18],me[19],me[20],me[21],me[22],me[23]),de!==ke&&f.lineTo(me[24],me[25]),f.bezierCurveTo(me[26],me[27],me[28],me[29],me[30],me[31])}}f.closePath()}!oe&&(K||se)&&(this._setStyles(f,w,B),K&&(f.fill(Z.getFillRule()),f.shadowColor="rgba(0,0,0,0)"),se&&f.stroke())},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_getBounds:function(f,w){var B=new Ke(this._size).setCenter(0,0),U=this._style,Z=w.stroke&&U.hasStroke()&&U.getStrokeWidth();return f&&(B=f._transformBounds(B)),Z?B.expand(Lt._getStrokePadding(Z,this._getStrokeMatrix(f,w))):B}},new function(){function f(B,U,Z){var K=B._radius;if(!K.isZero())for(var se=B._size.divide(2),oe=1;oe<=4;oe++){var fe=new le(oe>1&&oe<4?-1:1,oe>2?-1:1),ye=fe.multiply(se),Me=ye.subtract(fe.multiply(K)),xe=new Ke(Z?ye.add(fe.multiply(Z)):ye,Me);if(xe.contains(U))return{point:Me,quadrant:oe}}}function w(B,U,Z,K){var se=B.divide(U);return(!K||se.isInQuadrant(K))&&se.subtract(se.normalize()).multiply(U).divide(Z).length<=1}return{_contains:function B(U){if(this._type==="rectangle"){var Z=f(this,U);return Z?U.subtract(Z.point).divide(this._radius).getLength()<=1:B.base.call(this,U)}else return U.divide(this.size).getLength()<=.5},_hitTestSelf:function B(U,Z,K,se){var oe=!1,fe=this._style,ye=Z.stroke&&fe.hasStroke(),Me=Z.fill&&fe.hasFill();if(ye||Me){var xe=this._type,ke=this._radius,be=ye?fe.getStrokeWidth()/2:0,Ne=Z._tolerancePadding.add(Lt._getStrokePadding(be,!fe.getStrokeScaling()&&se));if(xe==="rectangle"){var Re=Ne.multiply(2),Fe=f(this,U,Re);if(Fe)oe=w(U.subtract(Fe.point),ke,Ne,Fe.quadrant);else{var de=new Ke(this._size).setCenter(0,0),Ae=de.expand(Re),W=de.expand(Re.negate());oe=Ae._containsPoint(U)&&!W._containsPoint(U)}}else oe=w(U,ke,Ne)}return oe?new mi(ye?"stroke":"fill",this):B.base.apply(this,arguments)}}},{statics:new function(){function f(w,B,U,Z,K){var se=g.create(xi.prototype);return se._type=w,se._size=U,se._radius=Z,se._initialize(g.getNamed(K),B),se}return{Circle:function(){var w=arguments,B=le.readNamed(w,"center"),U=g.readNamed(w,"radius");return f("circle",B,new Je(U*2),U,w)},Rectangle:function(){var w=arguments,B=Ke.readNamed(w,"rectangle"),U=Je.min(Je.readNamed(w,"radius"),B.getSize(!0).divide(2));return f("rectangle",B.getCenter(!0),B.getSize(!0),U,w)},Ellipse:function(){var w=arguments,B=xi._readEllipse(w),U=B.radius;return f("ellipse",B.center,U.multiply(2),U,w)},_readEllipse:function(w){var B,U;if(g.hasNamed(w,"radius"))B=le.readNamed(w,"center"),U=Je.readNamed(w,"radius");else{var Z=Ke.readNamed(w,"rectangle");B=Z.getCenter(!0),U=Z.getSize(!0).divide(2)}return{center:B,radius:U}}}}}),gi=Te.extend({_class:"Raster",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!1,handle:!1},_serializeFields:{crossOrigin:null,source:null},_prioritize:["crossOrigin"],_smoothing:"low",beans:!0,initialize:function(w,B){if(!this._initialize(w,B!==n&&le.read(arguments))){var U,Z=typeof w,K=Z==="string"?m.getElementById(w):Z==="object"?w:null;if(K&&K!==Te.NO_INSERT){if(K.getContext||K.naturalHeight!=null)U=K;else if(K){var se=Je.read(arguments);se.isZero()||(U=cn.getCanvas(se))}}U?this.setImage(U):this.setSource(w)}this._size||(this._size=new Je,this._loaded=!1)},_equals:function(f){return this.getSource()===f.getSource()},copyContent:function(f){var w=f._image,B=f._canvas;if(w)this._setImage(w);else if(B){var U=cn.getCanvas(f._size);U.getContext("2d").drawImage(B,0,0),this._setImage(U)}this._crossOrigin=f._crossOrigin},getSize:function(){var f=this._size;return new Xe(f?f.width:0,f?f.height:0,this,"setSize")},setSize:function(f,w){var B=Je.read(arguments);if(B.equals(this._size))w&&this.clear();else if(B.width>0&&B.height>0){var U=!w&&this.getElement();this._setImage(cn.getCanvas(B)),U&&this.getContext(!0).drawImage(U,0,0,B.width,B.height)}else this._canvas&&cn.release(this._canvas),this._size=B.clone()},getWidth:function(){return this._size?this._size.width:0},setWidth:function(f){this.setSize(f,this.getHeight())},getHeight:function(){return this._size?this._size.height:0},setHeight:function(f){this.setSize(this.getWidth(),f)},getLoaded:function(){return this._loaded},isEmpty:function(){var f=this._size;return!f||f.width===0&&f.height===0},getResolution:function(){var f=this._matrix,w=new le(0,0).transform(f),B=new le(1,0).transform(f).subtract(w),U=new le(0,1).transform(f).subtract(w);return new Je(72/B.getLength(),72/U.getLength())},getPpi:"#getResolution",getImage:function(){return this._image},setImage:function(f){var w=this;function B(U){var Z=w.getView(),K=U&&U.type||"load";Z&&w.responds(K)&&(pn=Z._scope,w.emit(K,new ir(U)))}this._setImage(f),this._loaded?setTimeout(B,0):f&&Li.add(f,{load:function(U){w._setImage(f),B(U)},error:B})},_setImage:function(f){this._canvas&&cn.release(this._canvas),f&&f.getContext?(this._image=null,this._canvas=f,this._loaded=!0):(this._image=f,this._canvas=null,this._loaded=!!(f&&f.src&&f.complete)),this._size=new Je(f?f.naturalWidth||f.width:0,f?f.naturalHeight||f.height:0),this._context=null,this._changed(1033)},getCanvas:function(){if(!this._canvas){var f=cn.getContext(this._size);try{this._image&&f.drawImage(this._image,0,0),this._canvas=f.canvas}catch{cn.release(f)}}return this._canvas},setCanvas:"#setImage",getContext:function(f){return this._context||(this._context=this.getCanvas().getContext("2d")),f&&(this._image=null,this._changed(1025)),this._context},setContext:function(f){this._context=f},getSource:function(){var f=this._image;return f&&f.src||this.toDataURL()},setSource:function(f){var w=new t.Image,B=this._crossOrigin;B&&(w.crossOrigin=B),f&&(w.src=f),this.setImage(w)},getCrossOrigin:function(){var f=this._image;return f&&f.crossOrigin||this._crossOrigin||""},setCrossOrigin:function(f){this._crossOrigin=f;var w=this._image;w&&(w.crossOrigin=f)},getSmoothing:function(){return this._smoothing},setSmoothing:function(f){this._smoothing=typeof f=="string"?f:f?"low":"off",this._changed(257)},getElement:function(){return this._canvas||this._loaded&&this._image}},{beans:!1,getSubCanvas:function(){var f=Ke.read(arguments),w=cn.getContext(f.getSize());return w.drawImage(this.getCanvas(),f.x,f.y,f.width,f.height,0,0,f.width,f.height),w.canvas},getSubRaster:function(){var f=Ke.read(arguments),w=new gi(Te.NO_INSERT);return w._setImage(this.getSubCanvas(f)),w.translate(f.getCenter().subtract(this.getSize().divide(2))),w._matrix.prepend(this._matrix),w.insertAbove(this),w},toDataURL:function(){var f=this._image,w=f&&f.src;if(/^data:/.test(w))return w;var B=this.getCanvas();return B?B.toDataURL.apply(B,arguments):null},drawImage:function(f){var w=le.read(arguments,1);this.getContext(!0).drawImage(f,w.x,w.y)},getAverageColor:function(f){var w,B;if(f?f instanceof ui?(B=f,w=f.getBounds()):typeof f=="object"&&("width"in f?w=new Ke(f):"x"in f&&(w=new Ke(f.x-.5,f.y-.5,1,1))):w=this.getBounds(),!w)return null;var U=32,Z=Math.min(w.width,U),K=Math.min(w.height,U),se=gi._sampleContext;se?se.clearRect(0,0,U+1,U+1):se=gi._sampleContext=cn.getContext(new Je(U)),se.save();var oe=new gt().scale(Z/w.width,K/w.height).translate(-w.x,-w.y);oe.applyToContext(se),B&&B.draw(se,new g({clip:!0,matrices:[oe]})),this._matrix.applyToContext(se);var fe=this.getElement(),ye=this._size;fe&&se.drawImage(fe,-ye.width/2,-ye.height/2),se.restore();for(var Me=se.getImageData(.5,.5,Math.ceil(Z),Math.ceil(K)).data,xe=[0,0,0],ke=0,be=0,Ne=Me.length;be<Ne;be+=4){var Re=Me[be+3];ke+=Re,Re/=255,xe[0]+=Me[be]*Re,xe[1]+=Me[be+1]*Re,xe[2]+=Me[be+2]*Re}for(var be=0;be<3;be++)xe[be]/=ke;return ke?sn.read(xe):null},getPixel:function(){var f=le.read(arguments),w=this.getContext().getImageData(f.x,f.y,1,1).data;return new sn("rgb",[w[0]/255,w[1]/255,w[2]/255],w[3]/255)},setPixel:function(){var f=arguments,w=le.read(f),B=sn.read(f),U=B._convert("rgb"),Z=B._alpha,K=this.getContext(!0),se=K.createImageData(1,1),oe=se.data;oe[0]=U[0]*255,oe[1]=U[1]*255,oe[2]=U[2]*255,oe[3]=Z!=null?Z*255:255,K.putImageData(se,w.x,w.y)},clear:function(){var f=this._size;this.getContext(!0).clearRect(0,0,f.width+1,f.height+1)},createImageData:function(){var f=Je.read(arguments);return this.getContext().createImageData(f.width,f.height)},getImageData:function(){var f=Ke.read(arguments);return f.isEmpty()&&(f=new Ke(this._size)),this.getContext().getImageData(f.x,f.y,f.width,f.height)},putImageData:function(f){var w=le.read(arguments,1);this.getContext(!0).putImageData(f,w.x,w.y)},setImageData:function(f){this.setSize(f),this.getContext(!0).putImageData(f,0,0)},_getBounds:function(f,w){var B=new Ke(this._size).setCenter(0,0);return f?f._transformBounds(B):B},_hitTestSelf:function(f){if(this._contains(f)){var w=this;return new mi("pixel",w,{offset:f.add(w._size.divide(2)).round(),color:{get:function(){return w.getPixel(this.offset)}}})}},_draw:function(f,w,B){var U=this.getElement();if(U&&U.width>0&&U.height>0){f.globalAlpha=ee.clamp(this._opacity,0,1),this._setStyles(f,w,B);var Z=this._smoothing,K=Z==="off";li.setPrefixed(f,K?"imageSmoothingEnabled":"imageSmoothingQuality",K?!1:Z),f.drawImage(U,-this._size.width/2,-this._size.height/2)}},_canComposite:function(){return!0}}),qt=Te.extend({_class:"SymbolItem",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!0},_serializeFields:{symbol:null},initialize:function(w,B){this._initialize(w,B!==n&&le.read(arguments,1))||this.setDefinition(w instanceof di?w:new di(w))},_equals:function(f){return this._definition===f._definition},copyContent:function(f){this.setDefinition(f._definition)},getDefinition:function(){return this._definition},setDefinition:function(f){this._definition=f,this._changed(9)},getSymbol:"#getDefinition",setSymbol:"#setDefinition",isEmpty:function(){return this._definition._item.isEmpty()},_getBounds:function(f,w){var B=this._definition._item;return B._getCachedBounds(B._matrix.prepended(f),w)},_hitTestSelf:function(f,w,B){var U=w.extend({all:!1}),Z=this._definition._item._hitTest(f,U,B);return Z&&(Z.item=this),Z},_draw:function(f,w){this._definition._item.draw(f,w)}}),di=g.extend({_class:"SymbolDefinition",initialize:function(w,B){this._id=ce.get(),this.project=pn.project,w&&this.setItem(w,B)},_serialize:function(f,w){return w.add(this,function(){return g.serialize([this._class,this._item],f,!1,w)})},_changed:function(f){f&8&&Te._clearBoundsCache(this),f&1&&this.project._changed(f)},getItem:function(){return this._item},setItem:function(f,w){f._symbol&&(f=f.clone()),this._item&&(this._item._symbol=null),this._item=f,f.remove(),f.setSelected(!1),w||f.setPosition(new le),f._symbol=this,this._changed(9)},getDefinition:"#getItem",setDefinition:"#setItem",place:function(f){return new qt(this,f)},clone:function(){return new di(this._item.clone(!1))},equals:function(f){return f===this||f&&this._item.equals(f._item)||!1}}),mi=g.extend({_class:"HitResult",initialize:function(w,B,U){this.type=w,this.item=B,U&&this.inject(U)},statics:{getOptions:function(f){var w=f&&g.read(f);return new g({type:null,tolerance:pn.settings.hitTolerance,fill:!w,stroke:!w,segments:!w,handles:!1,ends:!1,position:!1,center:!1,bounds:!1,guides:!1,selected:!1},w)}}}),vt=g.extend({_class:"Segment",beans:!0,_selection:0,initialize:function(w,B,U,Z,K,se){var oe=arguments.length,fe,ye,Me,xe;oe>0&&(w==null||typeof w=="object"?oe===1&&w&&"point"in w?(fe=w.point,ye=w.handleIn,Me=w.handleOut,xe=w.selection):(fe=w,ye=B,Me=U,xe=Z):(fe=[w,B],ye=U!==n?[U,Z]:null,Me=K!==n?[K,se]:null)),new Ut(fe,this,"_point"),new Ut(ye,this,"_handleIn"),new Ut(Me,this,"_handleOut"),xe&&this.setSelection(xe)},_serialize:function(f,w){var B=this._point,U=this._selection,Z=U||this.hasHandles()?[B,this._handleIn,this._handleOut]:B;return U&&Z.push(U),g.serialize(Z,f,!0,w)},_changed:function(f){var w=this._path;if(w){var B=w._curves,U=this._index,Z;B&&((!f||f===this._point||f===this._handleIn)&&(Z=U>0?B[U-1]:w._closed?B[B.length-1]:null)&&Z._changed(),(!f||f===this._point||f===this._handleOut)&&(Z=B[U])&&Z._changed()),w._changed(41)}},getPoint:function(){return this._point},setPoint:function(){this._point.set(le.read(arguments))},getHandleIn:function(){return this._handleIn},setHandleIn:function(){this._handleIn.set(le.read(arguments))},getHandleOut:function(){return this._handleOut},setHandleOut:function(){this._handleOut.set(le.read(arguments))},hasHandles:function(){return!this._handleIn.isZero()||!this._handleOut.isZero()},isSmooth:function(){var f=this._handleIn,w=this._handleOut;return!f.isZero()&&!w.isZero()&&f.isCollinear(w)},clearHandles:function(){this._handleIn._set(0,0),this._handleOut._set(0,0)},getSelection:function(){return this._selection},setSelection:function(f){var w=this._selection,B=this._path;this._selection=f=f||0,B&&f!==w&&(B._updateSelection(this,w,f),B._changed(257))},_changeSelection:function(f,w){var B=this._selection;this.setSelection(w?B|f:B&~f)},isSelected:function(){return!!(this._selection&7)},setSelected:function(f){this._changeSelection(7,f)},getIndex:function(){return this._index!==n?this._index:null},getPath:function(){return this._path||null},getCurve:function(){var f=this._path,w=this._index;return f?(w>0&&!f._closed&&w===f._segments.length-1&&w--,f.getCurves()[w]||null):null},getLocation:function(){var f=this.getCurve();return f?new Ft(f,this===f._segment1?0:1):null},getNext:function(){var f=this._path&&this._path._segments;return f&&(f[this._index+1]||this._path._closed&&f[0])||null},smooth:function(f,w,B){var U=f||{},Z=U.type,K=U.factor,se=this.getPrevious(),oe=this.getNext(),fe=(se||this)._point,ye=this._point,Me=(oe||this)._point,xe=fe.getDistance(ye),ke=ye.getDistance(Me);if(!Z||Z==="catmull-rom"){var be=K===n?.5:K,Ne=Math.pow(xe,be),Re=Ne*Ne,Fe=Math.pow(ke,be),de=Fe*Fe;if(!w&&se){var Ae=2*de+3*Fe*Ne+Re,W=3*Fe*(Fe+Ne);this.setHandleIn(W!==0?new le((de*fe._x+Ae*ye._x-Re*Me._x)/W-ye._x,(de*fe._y+Ae*ye._y-Re*Me._y)/W-ye._y):new le)}if(!B&&oe){var Ae=2*Re+3*Ne*Fe+de,W=3*Ne*(Ne+Fe);this.setHandleOut(W!==0?new le((Re*Me._x+Ae*ye._x-de*fe._x)/W-ye._x,(Re*Me._y+Ae*ye._y-de*fe._y)/W-ye._y):new le)}}else if(Z==="geometric"){if(se&&oe){var ie=fe.subtract(Me),he=K===n?.4:K,me=he*xe/(xe+ke);w||this.setHandleIn(ie.multiply(me)),B||this.setHandleOut(ie.multiply(me-he))}}else throw new Error("Smoothing method '"+Z+"' not supported.")},getPrevious:function(){var f=this._path&&this._path._segments;return f&&(f[this._index-1]||this._path._closed&&f[f.length-1])||null},isFirst:function(){return!this._index},isLast:function(){var f=this._path;return f&&this._index===f._segments.length-1||!1},reverse:function(){var f=this._handleIn,w=this._handleOut,B=f.clone();f.set(w),w.set(B)},reversed:function(){return new vt(this._point,this._handleOut,this._handleIn)},remove:function(){return this._path?!!this._path.removeSegment(this._index):!1},clone:function(){return new vt(this._point,this._handleIn,this._handleOut)},equals:function(f){return f===this||f&&this._class===f._class&&this._point.equals(f._point)&&this._handleIn.equals(f._handleIn)&&this._handleOut.equals(f._handleOut)||!1},toString:function(){var f=["point: "+this._point];return this._handleIn.isZero()||f.push("handleIn: "+this._handleIn),this._handleOut.isZero()||f.push("handleOut: "+this._handleOut),"{ "+f.join(", ")+" }"},transform:function(f){this._transformCoordinates(f,new Array(6),!0),this._changed()},interpolate:function(f,w,B){var U=1-B,Z=B,K=f._point,se=w._point,oe=f._handleIn,fe=w._handleIn,ye=w._handleOut,Me=f._handleOut;this._point._set(U*K._x+Z*se._x,U*K._y+Z*se._y,!0),this._handleIn._set(U*oe._x+Z*fe._x,U*oe._y+Z*fe._y,!0),this._handleOut._set(U*Me._x+Z*ye._x,U*Me._y+Z*ye._y,!0),this._changed()},_transformCoordinates:function(f,w,B){var U=this._point,Z=!B||!this._handleIn.isZero()?this._handleIn:null,K=!B||!this._handleOut.isZero()?this._handleOut:null,se=U._x,oe=U._y,fe=2;return w[0]=se,w[1]=oe,Z&&(w[fe++]=Z._x+se,w[fe++]=Z._y+oe),K&&(w[fe++]=K._x+se,w[fe++]=K._y+oe),f&&(f._transformCoordinates(w,w,fe/2),se=w[0],oe=w[1],B?(U._x=se,U._y=oe,fe=2,Z&&(Z._x=w[fe++]-se,Z._y=w[fe++]-oe),K&&(K._x=w[fe++]-se,K._y=w[fe++]-oe)):(Z||(w[fe++]=se,w[fe++]=oe),K||(w[fe++]=se,w[fe++]=oe))),w}}),Ut=le.extend({initialize:function(w,B,U){var Z,K,se;if(!w)Z=K=0;else if((Z=w[0])!==n)K=w[1];else{var oe=w;(Z=oe.x)===n&&(oe=le.read(arguments),Z=oe.x),K=oe.y,se=oe.selected}this._x=Z,this._y=K,this._owner=B,B[U]=this,se&&this.setSelected(!0)},_set:function(f,w){return this._x=f,this._y=w,this._owner._changed(this),this},getX:function(){return this._x},setX:function(f){this._x=f,this._owner._changed(this)},getY:function(){return this._y},setY:function(f){this._y=f,this._owner._changed(this)},isZero:function(){var f=ee.isZero;return f(this._x)&&f(this._y)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(f){this._owner._changeSelection(this._getSelection(),f)},_getSelection:function(){var f=this._owner;return this===f._point?1:this===f._handleIn?2:this===f._handleOut?4:0}}),rt=g.extend({_class:"Curve",beans:!0,initialize:function(w,B,U,Z,K,se,oe,fe){var ye=arguments.length,Me,xe,ke,be,Ne,Re;ye===3?(this._path=w,Me=B,xe=U):ye?ye===1?"segment1"in w?(Me=new vt(w.segment1),xe=new vt(w.segment2)):"point1"in w?(ke=w.point1,Ne=w.handle1,Re=w.handle2,be=w.point2):Array.isArray(w)&&(ke=[w[0],w[1]],be=[w[6],w[7]],Ne=[w[2]-w[0],w[3]-w[1]],Re=[w[4]-w[6],w[5]-w[7]]):ye===2?(Me=new vt(w),xe=new vt(B)):ye===4?(ke=w,Ne=B,Re=U,be=Z):ye===8&&(ke=[w,B],be=[oe,fe],Ne=[U-w,Z-B],Re=[K-oe,se-fe]):(Me=new vt,xe=new vt),this._segment1=Me||new vt(ke,null,Ne),this._segment2=xe||new vt(be,Re,null)},_serialize:function(f,w){return g.serialize(this.hasHandles()?[this.getPoint1(),this.getHandle1(),this.getHandle2(),this.getPoint2()]:[this.getPoint1(),this.getPoint2()],f,!0,w)},_changed:function(){this._length=this._bounds=n},clone:function(){return new rt(this._segment1,this._segment2)},toString:function(){var f=["point1: "+this._segment1._point];return this._segment1._handleOut.isZero()||f.push("handle1: "+this._segment1._handleOut),this._segment2._handleIn.isZero()||f.push("handle2: "+this._segment2._handleIn),f.push("point2: "+this._segment2._point),"{ "+f.join(", ")+" }"},classify:function(){return rt.classify(this.getValues())},remove:function(){var f=!1;if(this._path){var w=this._segment2,B=w._handleOut;f=w.remove(),f&&this._segment1._handleOut.set(B)}return f},getPoint1:function(){return this._segment1._point},setPoint1:function(){this._segment1._point.set(le.read(arguments))},getPoint2:function(){return this._segment2._point},setPoint2:function(){this._segment2._point.set(le.read(arguments))},getHandle1:function(){return this._segment1._handleOut},setHandle1:function(){this._segment1._handleOut.set(le.read(arguments))},getHandle2:function(){return this._segment2._handleIn},setHandle2:function(){this._segment2._handleIn.set(le.read(arguments))},getSegment1:function(){return this._segment1},getSegment2:function(){return this._segment2},getPath:function(){return this._path},getIndex:function(){return this._segment1._index},getNext:function(){var f=this._path&&this._path._curves;return f&&(f[this._segment1._index+1]||this._path._closed&&f[0])||null},getPrevious:function(){var f=this._path&&this._path._curves;return f&&(f[this._segment1._index-1]||this._path._closed&&f[f.length-1])||null},isFirst:function(){return!this._segment1._index},isLast:function(){var f=this._path;return f&&this._segment1._index===f._curves.length-1||!1},isSelected:function(){return this.getPoint1().isSelected()&&this.getHandle1().isSelected()&&this.getHandle2().isSelected()&&this.getPoint2().isSelected()},setSelected:function(f){this.getPoint1().setSelected(f),this.getHandle1().setSelected(f),this.getHandle2().setSelected(f),this.getPoint2().setSelected(f)},getValues:function(f){return rt.getValues(this._segment1,this._segment2,f)},getPoints:function(){for(var f=this.getValues(),w=[],B=0;B<8;B+=2)w.push(new le(f[B],f[B+1]));return w}},{getLength:function(){return this._length==null&&(this._length=rt.getLength(this.getValues(),0,1)),this._length},getArea:function(){return rt.getArea(this.getValues())},getLine:function(){return new Mt(this._segment1._point,this._segment2._point)},getPart:function(f,w){return new rt(rt.getPart(this.getValues(),f,w))},getPartLength:function(f,w){return rt.getLength(this.getValues(),f,w)},divideAt:function(f){return this.divideAtTime(f&&f.curve===this?f.time:this.getTimeAt(f))},divideAtTime:function(f,w){var B=1e-8,U=1-B,Z=null;if(f>=B&&f<=U){var K=rt.subdivide(this.getValues(),f),se=K[0],oe=K[1],fe=w||this.hasHandles(),ye=this._segment1,Me=this._segment2,xe=this._path;fe&&(ye._handleOut._set(se[2]-se[0],se[3]-se[1]),Me._handleIn._set(oe[4]-oe[6],oe[5]-oe[7]));var ke=se[6],be=se[7],Ne=new vt(new le(ke,be),fe&&new le(se[4]-ke,se[5]-be),fe&&new le(oe[2]-ke,oe[3]-be));xe?(xe.insert(ye._index+1,Ne),Z=this.getNext()):(this._segment2=Ne,this._changed(),Z=new rt(Ne,Me))}return Z},splitAt:function(f){var w=this._path;return w?w.splitAt(f):null},splitAtTime:function(f){return this.splitAt(this.getLocationAtTime(f))},divide:function(f,w){return this.divideAtTime(f===n?.5:w?f:this.getTimeAt(f))},split:function(f,w){return this.splitAtTime(f===n?.5:w?f:this.getTimeAt(f))},reversed:function(){return new rt(this._segment2.reversed(),this._segment1.reversed())},clearHandles:function(){this._segment1._handleOut._set(0,0),this._segment2._handleIn._set(0,0)},statics:{getValues:function(f,w,B,U){var Z=f._point,K=f._handleOut,se=w._handleIn,oe=w._point,fe=Z.x,ye=Z.y,Me=oe.x,xe=oe.y,ke=U?[fe,ye,fe,ye,Me,xe,Me,xe]:[fe,ye,fe+K._x,ye+K._y,Me+se._x,xe+se._y,Me,xe];return B&&B._transformCoordinates(ke,ke,4),ke},subdivide:function(f,w){var B=f[0],U=f[1],Z=f[2],K=f[3],se=f[4],oe=f[5],fe=f[6],ye=f[7];w===n&&(w=.5);var Me=1-w,xe=Me*B+w*Z,ke=Me*U+w*K,be=Me*Z+w*se,Ne=Me*K+w*oe,Re=Me*se+w*fe,Fe=Me*oe+w*ye,de=Me*xe+w*be,Ae=Me*ke+w*Ne,W=Me*be+w*Re,ie=Me*Ne+w*Fe,he=Me*de+w*W,me=Me*Ae+w*ie;return[[B,U,xe,ke,de,Ae,he,me],[he,me,W,ie,Re,Fe,fe,ye]]},getMonoCurves:function(f,w){var B=[],U=w?0:1,Z=f[U+0],K=f[U+2],se=f[U+4],oe=f[U+6];if(Z>=K==K>=se&&K>=se==se>=oe||rt.isStraight(f))B.push(f);else{var fe=3*(K-se)-Z+oe,ye=2*(Z+se)-4*K,Me=K-Z,xe=1e-8,ke=1-xe,be=[],Ne=ee.solveQuadratic(fe,ye,Me,be,xe,ke);if(!Ne)B.push(f);else{be.sort();var Re=be[0],Fe=rt.subdivide(f,Re);B.push(Fe[0]),Ne>1&&(Re=(be[1]-Re)/(1-Re),Fe=rt.subdivide(Fe[1],Re),B.push(Fe[0])),B.push(Fe[1])}}return B},solveCubic:function(f,w,B,U,Z,K){var se=f[w],oe=f[w+2],fe=f[w+4],ye=f[w+6],Me=0;if(!(se<B&&ye<B&&oe<B&&fe<B||se>B&&ye>B&&oe>B&&fe>B)){var xe=3*(oe-se),ke=3*(fe-oe)-xe,be=ye-se-xe-ke;Me=ee.solveCubic(be,ke,xe,se-B,U,Z,K)}return Me},getTimeOf:function(f,w){var B=new le(f[0],f[1]),U=new le(f[6],f[7]),Z=1e-12,K=1e-7,se=w.isClose(B,Z)?0:w.isClose(U,Z)?1:null;if(se===null)for(var oe=[w.x,w.y],fe=[],ye=0;ye<2;ye++)for(var Me=rt.solveCubic(f,ye,oe[ye],fe,0,1),xe=0;xe<Me;xe++){var ke=fe[xe];if(w.isClose(rt.getPoint(f,ke),K))return ke}return w.isClose(B,K)?0:w.isClose(U,K)?1:null},getNearestTime:function(f,w){if(rt.isStraight(f)){var B=f[0],U=f[1],Z=f[6],K=f[7],se=Z-B,oe=K-U,fe=se*se+oe*oe;if(fe===0)return 0;var ye=((w.x-B)*se+(w.y-U)*oe)/fe;return ye<1e-12?0:ye>.999999999999?1:rt.getTimeOf(f,new le(B+ye*se,U+ye*oe))}var Me=100,xe=1/0,ke=0;function be(Fe){if(Fe>=0&&Fe<=1){var de=w.getDistance(rt.getPoint(f,Fe),!0);if(de<xe)return xe=de,ke=Fe,!0}}for(var Ne=0;Ne<=Me;Ne++)be(Ne/Me);for(var Re=1/(Me*2);Re>1e-8;)!be(ke-Re)&&!be(ke+Re)&&(Re/=2);return ke},getPart:function(f,w,B){var U=w>B;if(U){var Z=w;w=B,B=Z}return w>0&&(f=rt.subdivide(f,w)[1]),B<1&&(f=rt.subdivide(f,(B-w)/(1-w))[0]),U?[f[6],f[7],f[4],f[5],f[2],f[3],f[0],f[1]]:f},isFlatEnough:function(f,w){var B=f[0],U=f[1],Z=f[2],K=f[3],se=f[4],oe=f[5],fe=f[6],ye=f[7],Me=3*Z-2*B-fe,xe=3*K-2*U-ye,ke=3*se-2*fe-B,be=3*oe-2*ye-U;return Math.max(Me*Me,ke*ke)+Math.max(xe*xe,be*be)<=16*w*w},getArea:function(f){var w=f[0],B=f[1],U=f[2],Z=f[3],K=f[4],se=f[5],oe=f[6],fe=f[7];return 3*((fe-B)*(U+K)-(oe-w)*(Z+se)+Z*(w-K)-U*(B-se)+fe*(K+w/3)-oe*(se+B/3))/20},getBounds:function(f){for(var w=f.slice(0,2),B=w.slice(),U=[0,0],Z=0;Z<2;Z++)rt._addBounds(f[Z],f[Z+2],f[Z+4],f[Z+6],Z,0,w,B,U);return new Ke(w[0],w[1],B[0]-w[0],B[1]-w[1])},_addBounds:function(f,w,B,U,Z,K,se,oe,fe){function ye(he,me){var pe=he-me,De=he+me;pe<se[Z]&&(se[Z]=pe),De>oe[Z]&&(oe[Z]=De)}K/=2;var Me=se[Z]+K,xe=oe[Z]-K;if(f<Me||w<Me||B<Me||U<Me||f>xe||w>xe||B>xe||U>xe)if(w<f!=w<U&&B<f!=B<U)ye(f,0),ye(U,0);else{var ke=3*(w-B)-f+U,be=2*(f+B)-4*w,Ne=w-f,Re=ee.solveQuadratic(ke,be,Ne,fe),Fe=1e-8,de=1-Fe;ye(U,0);for(var Ae=0;Ae<Re;Ae++){var W=fe[Ae],ie=1-W;Fe<=W&&W<=de&&ye(ie*ie*ie*f+3*ie*ie*W*w+3*ie*W*W*B+W*W*W*U,K)}}}}},g.each(["getBounds","getStrokeBounds","getHandleBounds"],function(f){this[f]=function(){this._bounds||(this._bounds={});var w=this._bounds[f];return w||(w=this._bounds[f]=Lt[f]([this._segment1,this._segment2],!1,this._path)),w.clone()}},{}),g.each({isStraight:function(f,w,B,U){if(w.isZero()&&B.isZero())return!0;var Z=U.subtract(f);if(Z.isZero())return!1;if(Z.isCollinear(w)&&Z.isCollinear(B)){var K=new Mt(f,U),se=1e-7;if(K.getDistance(f.add(w))<se&&K.getDistance(U.add(B))<se){var oe=Z.dot(Z),fe=Z.dot(w)/oe,ye=Z.dot(B)/oe;return fe>=0&&fe<=1&&ye<=0&&ye>=-1}}return!1},isLinear:function(f,w,B,U){var Z=U.subtract(f).divide(3);return w.equals(Z)&&B.negate().equals(Z)}},function(f,w){this[w]=function(B){var U=this._segment1,Z=this._segment2;return f(U._point,U._handleOut,Z._handleIn,Z._point,B)},this.statics[w]=function(B,U){var Z=B[0],K=B[1],se=B[6],oe=B[7];return f(new le(Z,K),new le(B[2]-Z,B[3]-K),new le(B[4]-se,B[5]-oe),new le(se,oe),U)}},{statics:{},hasHandles:function(){return!this._segment1._handleOut.isZero()||!this._segment2._handleIn.isZero()},hasLength:function(f){return(!this.getPoint1().equals(this.getPoint2())||this.hasHandles())&&this.getLength()>(f||0)},isCollinear:function(f){return f&&this.isStraight()&&f.isStraight()&&this.getLine().isCollinear(f.getLine())},isHorizontal:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).y)<1e-8},isVertical:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).x)<1e-8}}),{beans:!1,getLocationAt:function(f,w){return this.getLocationAtTime(w?f:this.getTimeAt(f))},getLocationAtTime:function(f){return f!=null&&f>=0&&f<=1?new Ft(this,f):null},getTimeAt:function(f,w){return rt.getTimeAt(this.getValues(),f,w)},getParameterAt:"#getTimeAt",getTimesWithTangent:function(){var f=le.read(arguments);return f.isZero()?[]:rt.getTimesWithTangent(this.getValues(),f)},getOffsetAtTime:function(f){return this.getPartLength(0,f)},getLocationOf:function(){return this.getLocationAtTime(this.getTimeOf(le.read(arguments)))},getOffsetOf:function(){var f=this.getLocationOf.apply(this,arguments);return f?f.getOffset():null},getTimeOf:function(){return rt.getTimeOf(this.getValues(),le.read(arguments))},getParameterOf:"#getTimeOf",getNearestLocation:function(){var f=le.read(arguments),w=this.getValues(),B=rt.getNearestTime(w,f),U=rt.getPoint(w,B);return new Ft(this,B,U,null,f.getDistance(U))},getNearestPoint:function(){var f=this.getNearestLocation.apply(this,arguments);return f&&f.getPoint()}},new function(){var f=["getPoint","getTangent","getNormal","getWeightedTangent","getWeightedNormal","getCurvature"];return g.each(f,function(w){this[w+"At"]=function(B,U){var Z=this.getValues();return rt[w](Z,U?B:rt.getTimeAt(Z,B))},this[w+"AtTime"]=function(B){return rt[w](this.getValues(),B)}},{statics:{_evaluateMethods:f}})},new function(){function f(U){var Z=U[0],K=U[1],se=U[2],oe=U[3],fe=U[4],ye=U[5],Me=U[6],xe=U[7],ke=9*(se-fe)+3*(Me-Z),be=6*(Z+fe)-12*se,Ne=3*(se-Z),Re=9*(oe-ye)+3*(xe-K),Fe=6*(K+ye)-12*oe,de=3*(oe-K);return function(Ae){var W=(ke*Ae+be)*Ae+Ne,ie=(Re*Ae+Fe)*Ae+de;return Math.sqrt(W*W+ie*ie)}}function w(U,Z){return Math.max(2,Math.min(16,Math.ceil(Math.abs(Z-U)*32)))}function B(U,Z,K,se){if(Z==null||Z<0||Z>1)return null;var oe=U[0],fe=U[1],ye=U[2],Me=U[3],xe=U[4],ke=U[5],be=U[6],Ne=U[7],Re=ee.isZero;Re(ye-oe)&&Re(Me-fe)&&(ye=oe,Me=fe),Re(xe-be)&&Re(ke-Ne)&&(xe=be,ke=Ne);var Fe=3*(ye-oe),de=3*(xe-ye)-Fe,Ae=be-oe-Fe-de,W=3*(Me-fe),ie=3*(ke-Me)-W,he=Ne-fe-W-ie,me,pe;if(K===0)me=Z===0?oe:Z===1?be:((Ae*Z+de)*Z+Fe)*Z+oe,pe=Z===0?fe:Z===1?Ne:((he*Z+ie)*Z+W)*Z+fe;else{var De=1e-8,Le=1-De;if(Z<De?(me=Fe,pe=W):Z>Le?(me=3*(be-xe),pe=3*(Ne-ke)):(me=(3*Ae*Z+2*de)*Z+Fe,pe=(3*he*Z+2*ie)*Z+W),se){me===0&&pe===0&&(Z<De||Z>Le)&&(me=xe-ye,pe=ke-Me);var Pe=Math.sqrt(me*me+pe*pe);Pe&&(me/=Pe,pe/=Pe)}if(K===3){var xe=6*Ae*Z+2*de,ke=6*he*Z+2*ie,Ve=Math.pow(me*me+pe*pe,3/2);me=Ve!==0?(me*ke-pe*xe)/Ve:0,pe=0}}return K===2?new le(pe,-me):new le(me,pe)}return{statics:{classify:function(U){var Z=U[0],K=U[1],se=U[2],oe=U[3],fe=U[4],ye=U[5],Me=U[6],xe=U[7],ke=Z*(xe-ye)+K*(fe-Me)+Me*ye-xe*fe,be=se*(K-xe)+oe*(Me-Z)+Z*xe-K*Me,Ne=fe*(oe-K)+ye*(Z-se)+se*K-oe*Z,Re=3*Ne,Fe=Re-be,de=Fe-be+ke,Ae=Math.sqrt(de*de+Fe*Fe+Re*Re),W=Ae!==0?1/Ae:0,ie=ee.isZero,he="serpentine";de*=W,Fe*=W,Re*=W;function me(Pe,Ve,Ue){var ge=Ve!==n,Ce=ge&&Ve>0&&Ve<1,Qe=ge&&Ue>0&&Ue<1;return ge&&(!(Ce||Qe)||Pe==="loop"&&!(Ce&&Qe))&&(Pe="arch",Ce=Qe=!1),{type:Pe,roots:Ce||Qe?Ce&&Qe?Ve<Ue?[Ve,Ue]:[Ue,Ve]:[Ce?Ve:Ue]:null}}if(ie(de))return ie(Fe)?me(ie(Re)?"line":"quadratic"):me(he,Re/(3*Fe));var pe=3*Fe*Fe-4*de*Re;if(ie(pe))return me("cusp",Fe/(2*de));var De=pe>0?Math.sqrt(pe/3):Math.sqrt(-pe),Le=2*de;return me(pe>0?he:"loop",(Fe+De)/Le,(Fe-De)/Le)},getLength:function(U,Z,K,se){if(Z===n&&(Z=0),K===n&&(K=1),rt.isStraight(U)){var oe=U;K<1&&(oe=rt.subdivide(oe,K)[0],Z/=K),Z>0&&(oe=rt.subdivide(oe,Z)[1]);var fe=oe[6]-oe[0],ye=oe[7]-oe[1];return Math.sqrt(fe*fe+ye*ye)}return ee.integrate(se||f(U),Z,K,w(Z,K))},getTimeAt:function(U,Z,K){if(K===n&&(K=Z<0?1:0),Z===0)return K;var se=Math.abs,oe=1e-12,fe=Z>0,ye=fe?K:0,Me=fe?1:K,xe=f(U),ke=rt.getLength(U,ye,Me,xe),be=se(Z)-ke;if(se(be)<oe)return fe?Me:ye;if(be>oe)return null;var Ne=Z/ke,Re=0;function Fe(de){return Re+=ee.integrate(xe,K,de,w(K,de)),K=de,Re-Z}return ee.findRoot(Fe,xe,K+Ne,ye,Me,32,1e-12)},getPoint:function(U,Z){return B(U,Z,0,!1)},getTangent:function(U,Z){return B(U,Z,1,!0)},getWeightedTangent:function(U,Z){return B(U,Z,1,!1)},getNormal:function(U,Z){return B(U,Z,2,!0)},getWeightedNormal:function(U,Z){return B(U,Z,2,!1)},getCurvature:function(U,Z){return B(U,Z,3,!1).x},getPeaks:function(U){var Z=U[0],K=U[1],se=U[2],oe=U[3],fe=U[4],ye=U[5],Me=U[6],xe=U[7],ke=-Z+3*se-3*fe+Me,be=3*Z-6*se+3*fe,Ne=-3*Z+3*se,Re=-K+3*oe-3*ye+xe,Fe=3*K-6*oe+3*ye,de=-3*K+3*oe,Ae=1e-8,W=1-Ae,ie=[];return ee.solveCubic(9*(ke*ke+Re*Re),9*(ke*be+Fe*Re),2*(be*be+Fe*Fe)+3*(Ne*ke+de*Re),Ne*be+Fe*de,ie,Ae,W),ie.sort()}}}},new function(){function f(be,Ne,Re,Fe,de,Ae,W){var ie=!W&&Re.getPrevious()===de,he=!W&&Re!==de&&Re.getNext()===de,me=1e-8,pe=1-me;if(Fe!==null&&Fe>=(ie?me:0)&&Fe<=(he?pe:1)&&Ae!==null&&Ae>=(he?me:0)&&Ae<=(ie?pe:1)){var De=new Ft(Re,Fe,null,W),Le=new Ft(de,Ae,null,W);De._intersection=Le,Le._intersection=De,(!Ne||Ne(De))&&Ft.insert(be,De,!0)}}function w(be,Ne,Re,Fe,de,Ae,W,ie,he,me,pe,De,Le){if(++he>=4096||++ie>=40)return he;var Pe=1e-9,Ve=Ne[0],Ue=Ne[1],ge=Ne[6],Ce=Ne[7],Qe=Mt.getSignedDistance,nt=Qe(Ve,Ue,ge,Ce,Ne[2],Ne[3]),i=Qe(Ve,Ue,ge,Ce,Ne[4],Ne[5]),ue=nt*i>0?3/4:4/9,Dt=ue*Math.min(0,nt,i),Vt=ue*Math.max(0,nt,i),Wt=Qe(Ve,Ue,ge,Ce,be[0],be[1]),It=Qe(Ve,Ue,ge,Ce,be[2],be[3]),Bt=Qe(Ve,Ue,ge,Ce,be[4],be[5]),hi=Qe(Ve,Ue,ge,Ce,be[6],be[7]),Zt=B(Wt,It,Bt,hi),ei=Zt[0],Ti=Zt[1],Yi,wn;if(nt===0&&i===0&&Wt===0&&It===0&&Bt===0&&hi===0||(Yi=U(ei,Ti,Dt,Vt))==null||(wn=U(ei.reverse(),Ti.reverse(),Dt,Vt))==null)return he;var An=me+(pe-me)*Yi,en=me+(pe-me)*wn;if(Math.max(Le-De,en-An)<Pe){var ar=(An+en)/2,pi=(De+Le)/2;f(de,Ae,W?Fe:Re,W?pi:ar,W?Re:Fe,W?ar:pi)}else{be=rt.getPart(be,Yi,wn);var Zn=Le-De;if(wn-Yi>.8)if(en-An>Zn){var Xi=rt.subdivide(be,.5),ar=(An+en)/2;he=w(Ne,Xi[0],Fe,Re,de,Ae,!W,ie,he,De,Le,An,ar),he=w(Ne,Xi[1],Fe,Re,de,Ae,!W,ie,he,De,Le,ar,en)}else{var Xi=rt.subdivide(Ne,.5),pi=(De+Le)/2;he=w(Xi[0],be,Fe,Re,de,Ae,!W,ie,he,De,pi,An,en),he=w(Xi[1],be,Fe,Re,de,Ae,!W,ie,he,pi,Le,An,en)}else Zn===0||Zn>=Pe?he=w(Ne,be,Fe,Re,de,Ae,!W,ie,he,De,Le,An,en):he=w(be,Ne,Re,Fe,de,Ae,W,ie,he,An,en,De,Le)}return he}function B(be,Ne,Re,Fe){var de=[0,be],Ae=[1/3,Ne],W=[2/3,Re],ie=[1,Fe],he=Ne-(2*be+Fe)/3,me=Re-(be+2*Fe)/3,pe;if(he*me<0)pe=[[de,Ae,ie],[de,W,ie]];else{var De=he/me;pe=[De>=2?[de,Ae,ie]:De<=.5?[de,W,ie]:[de,Ae,W,ie],[de,ie]]}return(he||me)<0?pe.reverse():pe}function U(be,Ne,Re,Fe){return be[0][1]<Re?Z(be,!0,Re):Ne[0][1]>Fe?Z(Ne,!1,Fe):be[0][0]}function Z(be,Ne,Re){for(var Fe=be[0][0],de=be[0][1],Ae=1,W=be.length;Ae<W;Ae++){var ie=be[Ae][0],he=be[Ae][1];if(Ne?he>=Re:he<=Re)return he===Re?ie:Fe+(Re-de)*(ie-Fe)/(he-de);Fe=ie,de=he}return null}function K(be,Ne,Re,Fe,de){var Ae=ee.isZero;if(Ae(Fe)&&Ae(de)){var W=rt.getTimeOf(be,new le(Ne,Re));return W===null?[]:[W]}for(var ie=Math.atan2(-de,Fe),he=Math.sin(ie),me=Math.cos(ie),pe=[],De=[],Le=0;Le<8;Le+=2){var Pe=be[Le]-Ne,Ve=be[Le+1]-Re;pe.push(Pe*me-Ve*he,Pe*he+Ve*me)}return rt.solveCubic(pe,1,0,De,0,1),De}function se(be,Ne,Re,Fe,de,Ae,W){for(var ie=Ne[0],he=Ne[1],me=Ne[6],pe=Ne[7],De=K(be,ie,he,me-ie,pe-he),Le=0,Pe=De.length;Le<Pe;Le++){var Ve=De[Le],Ue=rt.getPoint(be,Ve),ge=rt.getTimeOf(Ne,Ue);ge!==null&&f(de,Ae,W?Fe:Re,W?ge:Ve,W?Re:Fe,W?Ve:ge)}}function oe(be,Ne,Re,Fe,de,Ae){var W=Mt.intersect(be[0],be[1],be[6],be[7],Ne[0],Ne[1],Ne[6],Ne[7]);W&&f(de,Ae,Re,rt.getTimeOf(be,W),Fe,rt.getTimeOf(Ne,W))}function fe(be,Ne,Re,Fe,de,Ae){var W=1e-12,ie=Math.min,he=Math.max;if(he(be[0],be[2],be[4],be[6])+W>ie(Ne[0],Ne[2],Ne[4],Ne[6])&&ie(be[0],be[2],be[4],be[6])-W<he(Ne[0],Ne[2],Ne[4],Ne[6])&&he(be[1],be[3],be[5],be[7])+W>ie(Ne[1],Ne[3],Ne[5],Ne[7])&&ie(be[1],be[3],be[5],be[7])-W<he(Ne[1],Ne[3],Ne[5],Ne[7])){var me=xe(be,Ne);if(me)for(var pe=0;pe<2;pe++){var De=me[pe];f(de,Ae,Re,De[0],Fe,De[1],!0)}else{var Le=rt.isStraight(be),Pe=rt.isStraight(Ne),Ve=Le&&Pe,Ue=Le&&!Pe,ge=de.length;if((Ve?oe:Le||Pe?se:w)(Ue?Ne:be,Ue?be:Ne,Ue?Fe:Re,Ue?Re:Fe,de,Ae,Ue,0,0,0,1,0,1),!Ve||de.length===ge)for(var pe=0;pe<4;pe++){var Ce=pe>>1,Qe=pe&1,nt=Ce*6,i=Qe*6,ue=new le(be[nt],be[nt+1]),Dt=new le(Ne[i],Ne[i+1]);ue.isClose(Dt,W)&&f(de,Ae,Re,Ce,Fe,Qe)}}}return de}function ye(be,Ne,Re,Fe){var de=rt.classify(be);if(de.type==="loop"){var Ae=de.roots;f(Re,Fe,Ne,Ae[0],Ne,Ae[1])}return Re}function Me(be,Ne,Re,Fe,de,Ae){var W=1e-7,ie=!Ne;ie&&(Ne=be);for(var he=be.length,me=Ne.length,pe=new Array(he),De=ie?pe:new Array(me),Le=[],Pe=0;Pe<he;Pe++)pe[Pe]=be[Pe].getValues(Fe);if(!ie)for(var Pe=0;Pe<me;Pe++)De[Pe]=Ne[Pe].getValues(de);for(var Ve=O.findCurveBoundsCollisions(pe,De,W),Ue=0;Ue<he;Ue++){var ge=be[Ue],Ce=pe[Ue];ie&&ye(Ce,ge,Le,Re);var Qe=Ve[Ue];if(Qe)for(var nt=0;nt<Qe.length;nt++){if(Ae&&Le.length)return Le;var i=Qe[nt];if(!ie||i>Ue){var ue=Ne[i],Dt=De[i];fe(Ce,Dt,ge,ue,Le,Re)}}}return Le}function xe(be,Ne){function Re(hi){var Zt=hi[6]-hi[0],ei=hi[7]-hi[1];return Zt*Zt+ei*ei}var Fe=Math.abs,de=Mt.getDistance,Ae=1e-8,W=1e-7,ie=rt.isStraight(be),he=rt.isStraight(Ne),me=ie&&he,pe=Re(be)<Re(Ne),De=pe?Ne:be,Le=pe?be:Ne,Pe=De[0],Ve=De[1],Ue=De[6]-Pe,ge=De[7]-Ve;if(de(Pe,Ve,Ue,ge,Le[0],Le[1],!0)<W&&de(Pe,Ve,Ue,ge,Le[6],Le[7],!0)<W)!me&&de(Pe,Ve,Ue,ge,De[2],De[3],!0)<W&&de(Pe,Ve,Ue,ge,De[4],De[5],!0)<W&&de(Pe,Ve,Ue,ge,Le[2],Le[3],!0)<W&&de(Pe,Ve,Ue,ge,Le[4],Le[5],!0)<W&&(ie=he=me=!0);else if(me)return null;if(ie^he)return null;for(var Ce=[be,Ne],Qe=[],nt=0;nt<4&&Qe.length<2;nt++){var i=nt&1,ue=i^1,Dt=nt>>1,Vt=rt.getTimeOf(Ce[i],new le(Ce[ue][Dt?6:0],Ce[ue][Dt?7:1]));if(Vt!=null){var Wt=i?[Dt,Vt]:[Vt,Dt];(!Qe.length||Fe(Wt[0]-Qe[0][0])>Ae&&Fe(Wt[1]-Qe[0][1])>Ae)&&Qe.push(Wt)}if(nt>2&&!Qe.length)break}if(Qe.length!==2)Qe=null;else if(!me){var It=rt.getPart(be,Qe[0][0],Qe[1][0]),Bt=rt.getPart(Ne,Qe[0][1],Qe[1][1]);(Fe(Bt[2]-It[2])>W||Fe(Bt[3]-It[3])>W||Fe(Bt[4]-It[4])>W||Fe(Bt[5]-It[5])>W)&&(Qe=null)}return Qe}function ke(be,Ne){var Re=be[0],Fe=be[1],de=be[2],Ae=be[3],W=be[4],ie=be[5],he=be[6],me=be[7],pe=Ne.normalize(),De=pe.x,Le=pe.y,Pe=3*he-9*W+9*de-3*Re,Ve=3*me-9*ie+9*Ae-3*Fe,Ue=6*W-12*de+6*Re,ge=6*ie-12*Ae+6*Fe,Ce=3*de-3*Re,Qe=3*Ae-3*Fe,nt=2*Pe*Le-2*Ve*De,i=[];if(Math.abs(nt)<ee.CURVETIME_EPSILON){var ue=Pe*Qe-Ve*Ce,nt=Pe*ge-Ve*Ue;if(nt!=0){var Dt=-ue/nt;Dt>=0&&Dt<=1&&i.push(Dt)}}else{var Vt=(Ue*Ue-4*Pe*Ce)*Le*Le+(-2*Ue*ge+4*Ve*Ce+4*Pe*Qe)*De*Le+(ge*ge-4*Ve*Qe)*De*De,Wt=Ue*Le-ge*De;if(Vt>=0&&nt!=0){var It=Math.sqrt(Vt),Bt=-(Wt+It)/nt,hi=(-Wt+It)/nt;Bt>=0&&Bt<=1&&i.push(Bt),hi>=0&&hi<=1&&i.push(hi)}}return i}return{getIntersections:function(be){var Ne=this.getValues(),Re=be&&be!==this&&be.getValues();return Re?fe(Ne,Re,this,be,[]):ye(Ne,this,[])},statics:{getOverlaps:xe,getIntersections:Me,getCurveLineIntersections:K,getTimesWithTangent:ke}}}),Ft=g.extend({_class:"CurveLocation",initialize:function(w,B,U,Z,K){if(B>=.99999999){var se=w.getNext();se&&(B=0,w=se)}this._setCurve(w),this._time=B,this._point=U||w.getPointAtTime(B),this._overlap=Z,this._distance=K,this._intersection=this._next=this._previous=null},_setPath:function(f){this._path=f,this._version=f?f._version:0},_setCurve:function(f){this._setPath(f._path),this._curve=f,this._segment=null,this._segment1=f._segment1,this._segment2=f._segment2},_setSegment:function(f){var w=f.getCurve();w?this._setCurve(w):(this._setPath(f._path),this._segment1=f,this._segment2=null),this._segment=f,this._time=f===this._segment1?0:1,this._point=f._point.clone()},getSegment:function(){var f=this._segment;if(!f){var w=this.getCurve(),B=this.getTime();B===0?f=w._segment1:B===1?f=w._segment2:B!=null&&(f=w.getPartLength(0,B)<w.getPartLength(B,1)?w._segment1:w._segment2),this._segment=f}return f},getCurve:function(){var f=this._path,w=this;f&&f._version!==this._version&&(this._time=this._offset=this._curveOffset=this._curve=null);function B(U){var Z=U&&U.getCurve();if(Z&&(w._time=Z.getTimeOf(w._point))!=null)return w._setCurve(Z),Z}return this._curve||B(this._segment)||B(this._segment1)||B(this._segment2.getPrevious())},getPath:function(){var f=this.getCurve();return f&&f._path},getIndex:function(){var f=this.getCurve();return f&&f.getIndex()},getTime:function(){var f=this.getCurve(),w=this._time;return f&&w==null?this._time=f.getTimeOf(this._point):w},getParameter:"#getTime",getPoint:function(){return this._point},getOffset:function(){var f=this._offset;if(f==null){f=0;var w=this.getPath(),B=this.getIndex();if(w&&B!=null)for(var U=w.getCurves(),Z=0;Z<B;Z++)f+=U[Z].getLength();this._offset=f+=this.getCurveOffset()}return f},getCurveOffset:function(){var f=this._curveOffset;if(f==null){var w=this.getCurve(),B=this.getTime();this._curveOffset=f=B!=null&&w&&w.getPartLength(0,B)}return f},getIntersection:function(){return this._intersection},getDistance:function(){return this._distance},divide:function(){var f=this.getCurve(),w=f&&f.divideAtTime(this.getTime());return w&&this._setSegment(w._segment1),w},split:function(){var f=this.getCurve(),w=f._path,B=f&&f.splitAtTime(this.getTime());return B&&this._setSegment(w.getLastSegment()),B},equals:function(f,w){var B=this===f;if(!B&&f instanceof Ft){var U=this.getCurve(),Z=f.getCurve(),K=U._path,se=Z._path;if(K===se){var oe=Math.abs,fe=1e-7,ye=oe(this.getOffset()-f.getOffset()),Me=!w&&this._intersection,xe=!w&&f._intersection;B=(ye<fe||K&&oe(K.getLength()-ye)<fe)&&(!Me&&!xe||Me&&xe&&Me.equals(xe,!0))}}return B},toString:function(){var f=[],w=this.getPoint(),B=re.instance;w&&f.push("point: "+w);var U=this.getIndex();U!=null&&f.push("index: "+U);var Z=this.getTime();return Z!=null&&f.push("time: "+B.number(Z)),this._distance!=null&&f.push("distance: "+B.number(this._distance)),"{ "+f.join(", ")+" }"},isTouching:function(){var f=this._intersection;if(f&&this.getTangent().isCollinear(f.getTangent())){var w=this.getCurve(),B=f.getCurve();return!(w.isStraight()&&B.isStraight()&&w.getLine().intersect(B.getLine()))}return!1},isCrossing:function(){var f=this._intersection;if(!f)return!1;var w=this.getTime(),B=f.getTime(),U=1e-8,Z=1-U,K=w>=U&&w<=Z,se=B>=U&&B<=Z;if(K&&se)return!this.isTouching();var oe=this.getCurve(),fe=oe&&w<U?oe.getPrevious():oe,ye=f.getCurve(),Me=ye&&B<U?ye.getPrevious():ye;if(w>Z&&(oe=oe.getNext()),B>Z&&(ye=ye.getNext()),!fe||!oe||!Me||!ye)return!1;var xe=[];function ke(De,Le){var Pe=De.getValues(),Ve=rt.classify(Pe).roots||rt.getPeaks(Pe),Ue=Ve.length,ge=rt.getLength(Pe,Le&&Ue?Ve[Ue-1]:0,!Le&&Ue?Ve[0]:1);xe.push(Ue?ge:ge/32)}function be(De,Le,Pe){return Le<Pe?De>Le&&De<Pe:De>Le||De<Pe}K||(ke(fe,!0),ke(oe,!1)),se||(ke(Me,!0),ke(ye,!1));var Ne=this.getPoint(),Re=Math.min.apply(Math,xe),Fe=K?oe.getTangentAtTime(w):oe.getPointAt(Re).subtract(Ne),de=K?Fe.negate():fe.getPointAt(-Re).subtract(Ne),Ae=se?ye.getTangentAtTime(B):ye.getPointAt(Re).subtract(Ne),W=se?Ae.negate():Me.getPointAt(-Re).subtract(Ne),ie=de.getAngle(),he=Fe.getAngle(),me=W.getAngle(),pe=Ae.getAngle();return!!(K?be(ie,me,pe)^be(he,me,pe)&&be(ie,pe,me)^be(he,pe,me):be(me,ie,he)^be(pe,ie,he)&&be(me,he,ie)^be(pe,he,ie))},hasOverlap:function(){return!!this._overlap}},g.each(rt._evaluateMethods,function(f){var w=f+"At";this[f]=function(){var B=this.getCurve(),U=this.getTime();return U!=null&&B&&B[w](U,!0)}},{preserve:!0}),new function(){function f(w,B,U){var Z=w.length,K=0,se=Z-1;function oe(Ne,Re){for(var Fe=Ne+Re;Fe>=-1&&Fe<=Z;Fe+=Re){var de=w[(Fe%Z+Z)%Z];if(!B.getPoint().isClose(de.getPoint(),1e-7))break;if(B.equals(de))return de}return null}for(;K<=se;){var fe=K+se>>>1,ye=w[fe],Me;if(U&&(Me=B.equals(ye)?ye:oe(fe,-1)||oe(fe,1)))return B._overlap&&(Me._overlap=Me._intersection._overlap=!0),Me;var xe=B.getPath(),ke=ye.getPath(),be=xe!==ke?xe._id-ke._id:B.getIndex()+B.getTime()-(ye.getIndex()+ye.getTime());be<0?se=fe-1:K=fe+1}return w.splice(K,0,B),B}return{statics:{insert:f,expand:function(w){for(var B=w.slice(),U=w.length-1;U>=0;U--)f(B,w[U]._intersection,!1);return B}}}}),ui=Te.extend({_class:"PathItem",_selectBounds:!1,_canScaleStroke:!0,beans:!0,initialize:function(){},statics:{create:function(f){var w,B,U;if(g.isPlainObject(f)?(B=f.segments,w=f.pathData):Array.isArray(f)?B=f:typeof f=="string"&&(w=f),B){var Z=B[0];U=Z&&Array.isArray(Z[0])}else w&&(U=(w.match(/m/gi)||[]).length>1||/z\s*\S+/i.test(w));var K=U?Yt:Lt;return new K(f)}},_asPathItem:function(){return this},isClockwise:function(){return this.getArea()>=0},setClockwise:function(f){this.isClockwise()!=(f=!!f)&&this.reverse()},setPathData:function(f){var w=f&&f.match(/[mlhvcsqtaz][^mlhvcsqtaz]*/ig),B,U=!1,Z,K,se=new le,oe=new le;function fe(W,ie){var he=+B[W];return U&&(he+=se[ie]),he}function ye(W){return new le(fe(W,"x"),fe(W+1,"y"))}this.clear();for(var Me=0,xe=w&&w.length;Me<xe;Me++){var ke=w[Me],be=ke[0],Ne=be.toLowerCase();B=ke.match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g);var Re=B&&B.length;switch(U=be===Ne,Z==="z"&&!/[mz]/.test(Ne)&&this.moveTo(se),Ne){case"m":case"l":for(var Fe=Ne==="m",de=0;de<Re;de+=2)this[Fe?"moveTo":"lineTo"](se=ye(de)),Fe&&(oe=se,Fe=!1);K=se;break;case"h":case"v":var Ae=Ne==="h"?"x":"y";se=se.clone();for(var de=0;de<Re;de++)se[Ae]=fe(de,Ae),this.lineTo(se);K=se;break;case"c":for(var de=0;de<Re;de+=6)this.cubicCurveTo(ye(de),K=ye(de+2),se=ye(de+4));break;case"s":for(var de=0;de<Re;de+=4)this.cubicCurveTo(/[cs]/.test(Z)?se.multiply(2).subtract(K):se,K=ye(de),se=ye(de+2)),Z=Ne;break;case"q":for(var de=0;de<Re;de+=4)this.quadraticCurveTo(K=ye(de),se=ye(de+2));break;case"t":for(var de=0;de<Re;de+=2)this.quadraticCurveTo(K=/[qt]/.test(Z)?se.multiply(2).subtract(K):se,se=ye(de)),Z=Ne;break;case"a":for(var de=0;de<Re;de+=7)this.arcTo(se=ye(de+5),new Je(+B[de],+B[de+1]),+B[de+2],+B[de+4],+B[de+3]);break;case"z":this.closePath(1e-12),se=oe;break}Z=Ne}},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_contains:function(f){var w=f.isInside(this.getBounds({internal:!0,handle:!0}))?this._getWinding(f):{};return w.onPath||!!(this.getFillRule()==="evenodd"?w.windingL&1||w.windingR&1:w.winding)},getIntersections:function(f,w,B,U){var Z=this===f||!f,K=this._matrix._orNullIfIdentity(),se=Z?K:(B||f._matrix)._orNullIfIdentity();return Z||this.getBounds(K).intersects(f.getBounds(se),1e-12)?rt.getIntersections(this.getCurves(),!Z&&f.getCurves(),w,K,se,U):[]},getCrossings:function(f){return this.getIntersections(f,function(w){return w.isCrossing()})},getNearestLocation:function(){for(var f=le.read(arguments),w=this.getCurves(),B=1/0,U=null,Z=0,K=w.length;Z<K;Z++){var se=w[Z].getNearestLocation(f);se._distance<B&&(B=se._distance,U=se)}return U},getNearestPoint:function(){var f=this.getNearestLocation.apply(this,arguments);return f&&f.getPoint()},interpolate:function(f,w,B){var U=!this._children,Z=U?"_segments":"_children",K=f[Z],se=w[Z],oe=this[Z];if(!K||!se||K.length!==se.length)throw new Error("Invalid operands in interpolate() call: "+f+", "+w);var fe=oe.length,ye=se.length;if(fe<ye)for(var Me=U?vt:Lt,xe=fe;xe<ye;xe++)this.add(new Me);else fe>ye&&this[U?"removeSegments":"removeChildren"](ye,fe);for(var xe=0;xe<ye;xe++)oe[xe].interpolate(K[xe],se[xe],B);U&&(this.setClosed(f._closed),this._changed(9))},compare:function(f){var w=!1;if(f){var B=this._children||[this],U=f._children?f._children.slice():[f],Z=B.length,K=U.length,se=[],oe=0;w=!0;for(var fe=O.findItemBoundsCollisions(B,U,ee.GEOMETRIC_EPSILON),ye=Z-1;ye>=0&&w;ye--){var Me=B[ye];w=!1;var xe=fe[ye];if(xe)for(var ke=xe.length-1;ke>=0&&!w;ke--)Me.compare(U[xe[ke]])&&(se[xe[ke]]||(se[xe[ke]]=!0,oe++),w=!0)}w=w&&oe===K}return w}}),Lt=ui.extend({_class:"Path",_serializeFields:{segments:[],closed:!1},initialize:function(w){this._closed=!1,this._segments=[],this._version=0;var B=arguments,U=Array.isArray(w)?typeof w[0]=="object"?w:B:w&&w.size===n&&(w.x!==n||w.point!==n)?B:null;U&&U.length>0?this.setSegments(U):(this._curves=n,this._segmentSelection=0,!U&&typeof w=="string"&&(this.setPathData(w),w=null)),this._initialize(!U&&w)},_equals:function(f){return this._closed===f._closed&&g.equals(this._segments,f._segments)},copyContent:function(f){this.setSegments(f._segments),this._closed=f._closed},_changed:function f(w){if(f.base.call(this,w),w&8){if(this._length=this._area=n,w&32)this._version++;else if(this._curves)for(var B=0,U=this._curves.length;B<U;B++)this._curves[B]._changed()}else w&64&&(this._bounds=n)},getStyle:function(){var f=this._parent;return(f instanceof Yt?f:this)._style},getSegments:function(){return this._segments},setSegments:function(f){var w=this.isFullySelected(),B=f&&f.length;if(this._segments.length=0,this._segmentSelection=0,this._curves=n,B){var U=f[B-1];typeof U=="boolean"&&(this.setClosed(U),B--),this._add(vt.readList(f,0,{},B))}w&&this.setFullySelected(!0)},getFirstSegment:function(){return this._segments[0]},getLastSegment:function(){return this._segments[this._segments.length-1]},getCurves:function(){var f=this._curves,w=this._segments;if(!f){var B=this._countCurves();f=this._curves=new Array(B);for(var U=0;U<B;U++)f[U]=new rt(this,w[U],w[U+1]||w[0])}return f},getFirstCurve:function(){return this.getCurves()[0]},getLastCurve:function(){var f=this.getCurves();return f[f.length-1]},isClosed:function(){return this._closed},setClosed:function(f){if(this._closed!=(f=!!f)){if(this._closed=f,this._curves){var w=this._curves.length=this._countCurves();f&&(this._curves[w-1]=new rt(this,this._segments[w-1],this._segments[0]))}this._changed(41)}}},{beans:!0,getPathData:function(f,w){var B=this._segments,U=B.length,Z=new re(w),K=new Array(6),se=!0,oe,fe,ye,Me,xe,ke,be,Ne,Re=[];function Fe(Ae,W){if(Ae._transformCoordinates(f,K),oe=K[0],fe=K[1],se)Re.push("M"+Z.pair(oe,fe)),se=!1;else if(xe=K[2],ke=K[3],xe===oe&&ke===fe&&be===ye&&Ne===Me){if(!W){var ie=oe-ye,he=fe-Me;Re.push(ie===0?"v"+Z.number(he):he===0?"h"+Z.number(ie):"l"+Z.pair(ie,he))}}else Re.push("c"+Z.pair(be-ye,Ne-Me)+" "+Z.pair(xe-ye,ke-Me)+" "+Z.pair(oe-ye,fe-Me));ye=oe,Me=fe,be=K[4],Ne=K[5]}if(!U)return"";for(var de=0;de<U;de++)Fe(B[de]);return this._closed&&U>0&&(Fe(B[0],!0),Re.push("z")),Re.join("")},isEmpty:function(){return!this._segments.length},_transformContent:function(f){for(var w=this._segments,B=new Array(6),U=0,Z=w.length;U<Z;U++)w[U]._transformCoordinates(f,B,!0);return!0},_add:function(f,se){for(var B=this._segments,U=this._curves,Z=f.length,K=se==null,se=K?B.length:se,oe=0;oe<Z;oe++){var fe=f[oe];fe._path&&(fe=f[oe]=fe.clone()),fe._path=this,fe._index=se+oe,fe._selection&&this._updateSelection(fe,0,fe._selection)}if(K)g.push(B,f);else{B.splice.apply(B,[se,0].concat(f));for(var oe=se+Z,ye=B.length;oe<ye;oe++)B[oe]._index=oe}if(U){var Me=this._countCurves(),xe=se>0&&se+Z-1===Me?se-1:se,ke=xe,be=Math.min(xe+Z,Me);f._curves&&(U.splice.apply(U,[xe,0].concat(f._curves)),ke+=f._curves.length);for(var oe=ke;oe<be;oe++)U.splice(oe,0,new rt(this,null,null));this._adjustCurves(xe,be)}return this._changed(41),f},_adjustCurves:function(f,w){for(var B=this._segments,U=this._curves,Z,K=f;K<w;K++)Z=U[K],Z._path=this,Z._segment1=B[K],Z._segment2=B[K+1]||B[0],Z._changed();(Z=U[this._closed&&!f?B.length-1:f-1])&&(Z._segment2=B[f]||B[0],Z._changed()),(Z=U[w])&&(Z._segment1=B[w],Z._changed())},_countCurves:function(){var f=this._segments.length;return!this._closed&&f>0?f-1:f},add:function(f){var w=arguments;return w.length>1&&typeof f!="number"?this._add(vt.readList(w)):this._add([vt.read(w)])[0]},insert:function(f,w){var B=arguments;return B.length>2&&typeof w!="number"?this._add(vt.readList(B,1),f):this._add([vt.read(B,1)],f)[0]},addSegment:function(){return this._add([vt.read(arguments)])[0]},insertSegment:function(f){return this._add([vt.read(arguments,1)],f)[0]},addSegments:function(f){return this._add(vt.readList(f))},insertSegments:function(f,w){return this._add(vt.readList(w),f)},removeSegment:function(f){return this.removeSegments(f,f+1)[0]||null},removeSegments:function(f,w,B){f=f||0,w=g.pick(w,this._segments.length);var U=this._segments,Z=this._curves,K=U.length,se=U.splice(f,w-f),oe=se.length;if(!oe)return se;for(var fe=0;fe<oe;fe++){var ye=se[fe];ye._selection&&this._updateSelection(ye,ye._selection,0),ye._index=ye._path=null}for(var fe=f,Me=U.length;fe<Me;fe++)U[fe]._index=fe;if(Z){for(var xe=f>0&&w===K+(this._closed?1:0)?f-1:f,Z=Z.splice(xe,oe),fe=Z.length-1;fe>=0;fe--)Z[fe]._path=null;B&&(se._curves=Z.slice(1)),this._adjustCurves(xe,xe)}return this._changed(41),se},clear:"#removeSegments",hasHandles:function(){for(var f=this._segments,w=0,B=f.length;w<B;w++)if(f[w].hasHandles())return!0;return!1},clearHandles:function(){for(var f=this._segments,w=0,B=f.length;w<B;w++)f[w].clearHandles()},getLength:function(){if(this._length==null){for(var f=this.getCurves(),w=0,B=0,U=f.length;B<U;B++)w+=f[B].getLength();this._length=w}return this._length},getArea:function(){var f=this._area;if(f==null){var w=this._segments,B=this._closed;f=0;for(var U=0,Z=w.length;U<Z;U++){var K=U+1===Z;f+=rt.getArea(rt.getValues(w[U],w[K?0:U+1],null,K&&!B))}this._area=f}return f},isFullySelected:function(){var f=this._segments.length;return this.isSelected()&&f>0&&this._segmentSelection===f*7},setFullySelected:function(f){f&&this._selectSegments(!0),this.setSelected(f)},setSelection:function f(w){w&1||this._selectSegments(!1),f.base.call(this,w)},_selectSegments:function(f){var w=this._segments,B=w.length,U=f?7:0;this._segmentSelection=U*B;for(var Z=0;Z<B;Z++)w[Z]._selection=U},_updateSelection:function(f,w,B){f._selection=B;var U=this._segmentSelection+=B-w;U>0&&this.setSelected(!0)},divideAt:function(f){var w=this.getLocationAt(f),B;return w&&(B=w.getCurve().divideAt(w.getCurveOffset()))?B._segment1:null},splitAt:function(f){var w=this.getLocationAt(f),B=w&&w.index,U=w&&w.time,Z=1e-8,K=1-Z;U>K&&(B++,U=0);var se=this.getCurves();if(B>=0&&B<se.length){U>=Z&&se[B++].divideAtTime(U);var oe=this.removeSegments(B,this._segments.length,!0),fe;return this._closed?(this.setClosed(!1),fe=this):(fe=new Lt(Te.NO_INSERT),fe.insertAbove(this),fe.copyAttributes(this)),fe._add(oe,0),this.addSegment(oe[0]),fe}return null},split:function(f,w){var B,U=w===n?f:(B=this.getCurves()[f])&&B.getLocationAtTime(w);return U!=null?this.splitAt(U):null},join:function(f,w){var B=w||0;if(f&&f!==this){var U=f._segments,Z=this.getLastSegment(),K=f.getLastSegment();if(!K)return this;Z&&Z._point.isClose(K._point,B)&&f.reverse();var se=f.getFirstSegment();if(Z&&Z._point.isClose(se._point,B))Z.setHandleOut(se._handleOut),this._add(U.slice(1));else{var oe=this.getFirstSegment();oe&&oe._point.isClose(se._point,B)&&f.reverse(),K=f.getLastSegment(),oe&&oe._point.isClose(K._point,B)?(oe.setHandleIn(K._handleIn),this._add(U.slice(0,U.length-1),0)):this._add(U.slice())}f._closed&&this._add([U[0]]),f.remove()}var fe=this.getFirstSegment(),ye=this.getLastSegment();return fe!==ye&&fe._point.isClose(ye._point,B)&&(fe.setHandleIn(ye._handleIn),ye.remove(),this.setClosed(!0)),this},reduce:function(f){for(var w=this.getCurves(),B=f&&f.simplify,U=B?1e-7:0,Z=w.length-1;Z>=0;Z--){var K=w[Z];!K.hasHandles()&&(!K.hasLength(U)||B&&K.isCollinear(K.getNext()))&&K.remove()}return this},reverse:function(){this._segments.reverse();for(var f=0,w=this._segments.length;f<w;f++){var B=this._segments[f],U=B._handleIn;B._handleIn=B._handleOut,B._handleOut=U,B._index=f}this._curves=null,this._changed(9)},flatten:function(f){for(var w=new oi(this,f||.25,256,!0),B=w.parts,U=B.length,Z=[],K=0;K<U;K++)Z.push(new vt(B[K].curve.slice(0,2)));!this._closed&&U>0&&Z.push(new vt(B[U-1].curve.slice(6))),this.setSegments(Z)},simplify:function(f){var w=new yi(this).fit(f||2.5);return w&&this.setSegments(w),!!w},smooth:function(f){var w=this,B=f||{},U=B.type||"asymmetric",Z=this._segments,K=Z.length,se=this._closed;function oe(ei,Ti){var Yi=ei&&ei.index;if(Yi!=null){var wn=ei.path;if(wn&&wn!==w)throw new Error(ei._class+" "+Yi+" of "+wn+" is not part of "+w);Ti&&ei instanceof rt&&Yi++}else Yi=typeof ei=="number"?ei:Ti;return Math.min(Yi<0&&se?Yi%K:Yi<0?Yi+K:Yi,K-1)}var fe=se&&B.from===n&&B.to===n,ye=oe(B.from,0),Me=oe(B.to,K-1);if(ye>Me)if(se)ye-=K;else{var xe=ye;ye=Me,Me=xe}if(/^(?:asymmetric|continuous)$/.test(U)){var ke=U==="asymmetric",be=Math.min,Ne=Me-ye+1,Re=Ne-1,Fe=fe?be(Ne,4):1,de=Fe,Ae=Fe,W=[];if(se||(de=be(1,ye),Ae=be(1,K-Me-1)),Re+=de+Ae,Re<=1)return;for(var ie=0,he=ye-de;ie<=Re;ie++,he++)W[ie]=Z[(he<0?he+K:he)%K]._point;for(var me=W[0]._x+2*W[1]._x,pe=W[0]._y+2*W[1]._y,De=2,Le=Re-1,Pe=[me],Ve=[pe],Ue=[De],ge=[],Ce=[],ie=1;ie<Re;ie++){var Qe=ie<Le,nt=Qe||ke?1:2,i=Qe?4:ke?2:7,ue=Qe?4:ke?3:8,Dt=Qe?2:ke?0:1,Vt=nt/De;De=Ue[ie]=i-Vt,me=Pe[ie]=ue*W[ie]._x+Dt*W[ie+1]._x-Vt*me,pe=Ve[ie]=ue*W[ie]._y+Dt*W[ie+1]._y-Vt*pe}ge[Le]=Pe[Le]/Ue[Le],Ce[Le]=Ve[Le]/Ue[Le];for(var ie=Re-2;ie>=0;ie--)ge[ie]=(Pe[ie]-ge[ie+1])/Ue[ie],Ce[ie]=(Ve[ie]-Ce[ie+1])/Ue[ie];ge[Re]=(3*W[Re]._x-ge[Le])/2,Ce[Re]=(3*W[Re]._y-Ce[Le])/2;for(var ie=de,Wt=Re-Ae,he=ye;ie<=Wt;ie++,he++){var It=Z[he<0?he+K:he],Bt=It._point,hi=ge[ie]-Bt._x,Zt=Ce[ie]-Bt._y;(fe||ie<Wt)&&It.setHandleOut(hi,Zt),(fe||ie>de)&&It.setHandleIn(-hi,-Zt)}}else for(var ie=ye;ie<=Me;ie++)Z[ie<0?ie+K:ie].smooth(B,!fe&&ie===ye,!fe&&ie===Me)},toShape:function(f){if(!this._closed)return null;var w=this._segments,B,U,Z,K;function se(ke,be){var Ne=w[ke],Re=Ne.getNext(),Fe=w[be],de=Fe.getNext();return Ne._handleOut.isZero()&&Re._handleIn.isZero()&&Fe._handleOut.isZero()&&de._handleIn.isZero()&&Re._point.subtract(Ne._point).isCollinear(de._point.subtract(Fe._point))}function oe(ke){var be=w[ke],Ne=be.getPrevious(),Re=be.getNext();return Ne._handleOut.isZero()&&be._handleIn.isZero()&&be._handleOut.isZero()&&Re._handleIn.isZero()&&be._point.subtract(Ne._point).isOrthogonal(Re._point.subtract(be._point))}function fe(ke){var be=w[ke],Ne=be.getNext(),Re=be._handleOut,Fe=Ne._handleIn,de=.5522847498307936;if(Re.isOrthogonal(Fe)){var Ae=be._point,W=Ne._point,ie=new Mt(Ae,Re,!0).intersect(new Mt(W,Fe,!0),!0);return ie&&ee.isZero(Re.getLength()/ie.subtract(Ae).getLength()-de)&&ee.isZero(Fe.getLength()/ie.subtract(W).getLength()-de)}return!1}function ye(ke,be){return w[ke]._point.getDistance(w[be]._point)}if(!this.hasHandles()&&w.length===4&&se(0,2)&&se(1,3)&&oe(1)?(B=xi.Rectangle,U=new Je(ye(0,3),ye(0,1)),K=w[1]._point.add(w[2]._point).divide(2)):w.length===8&&fe(0)&&fe(2)&&fe(4)&&fe(6)&&se(1,5)&&se(3,7)?(B=xi.Rectangle,U=new Je(ye(1,6),ye(0,3)),Z=U.subtract(new Je(ye(0,7),ye(1,2))).divide(2),K=w[3]._point.add(w[4]._point).divide(2)):w.length===4&&fe(0)&&fe(1)&&fe(2)&&fe(3)&&(ee.isZero(ye(0,2)-ye(1,3))?(B=xi.Circle,Z=ye(0,2)/2):(B=xi.Ellipse,Z=new Je(ye(2,0)/2,ye(3,1)/2)),K=w[1]._point),B){var Me=this.getPosition(!0),xe=new B({center:Me,size:U,radius:Z,insert:!1});return xe.copyAttributes(this,!0),xe._matrix.prepend(this._matrix),xe.rotate(K.subtract(Me).getAngle()+90),(f===n||f)&&xe.insertAbove(this),xe}return null},toPath:"#clone",compare:function f(w){if(!w||w instanceof Yt)return f.base.call(this,w);var B=this.getCurves(),U=w.getCurves(),Z=B.length,K=U.length;if(!Z||!K)return Z==K;for(var se=B[0].getValues(),oe=[],fe=0,ye,Me=0,xe,ke=0;ke<K;ke++){var Fe=U[ke].getValues();oe.push(Fe);var be=rt.getOverlaps(se,Fe);if(be){ye=!ke&&be[0][0]>0?K-1:ke,xe=be[0][1];break}}for(var Ne=Math.abs,Re=1e-8,Fe=oe[ye],de;se&&Fe;){var be=rt.getOverlaps(se,Fe);if(be){var Ae=be[0][0];if(Ne(Ae-Me)<Re){Me=be[1][0],Me===1&&(se=++fe<Z?B[fe].getValues():null,Me=0);var W=be[0][1];if(Ne(W-xe)<Re){if(de||(de=[ye,W]),xe=be[1][1],xe===1&&(++ye>=K&&(ye=0),Fe=oe[ye]||U[ye].getValues(),xe=0),!se)return de[0]===ye&&de[1]===xe;continue}}}break}return!1},_hitTestSelf:function(f,w,B,U){var Z=this,K=this.getStyle(),se=this._segments,oe=se.length,fe=this._closed,ye=w._tolerancePadding,Me=ye,xe,ke,be,Ne,Re,Fe,de=w.stroke&&K.hasStroke(),Ae=w.fill&&K.hasFill(),W=w.curves,ie=de?K.getStrokeWidth()/2:Ae&&w.tolerance>0||W?0:null;ie!==null&&(ie>0?(xe=K.getStrokeJoin(),ke=K.getStrokeCap(),be=K.getMiterLimit(),Me=Me.add(Lt._getStrokePadding(ie,U))):xe=ke="round");function he(ge,Ce){return f.subtract(ge).divide(Ce).length<=1}function me(ge,Ce,Qe){if(!w.selected||Ce.isSelected()){var nt=ge._point;if(Ce!==nt&&(Ce=Ce.add(nt)),he(Ce,Me))return new mi(Qe,Z,{segment:ge,point:Ce})}}function pe(ge,Ce){return(Ce||w.segments)&&me(ge,ge._point,"segment")||!Ce&&w.handles&&(me(ge,ge._handleIn,"handle-in")||me(ge,ge._handleOut,"handle-out"))}function De(ge){Ne.add(ge)}function Le(ge){var Ce=fe||ge._index>0&&ge._index<oe-1;if((Ce?xe:ke)==="round")return he(ge._point,Me);if(Ne=new Lt({internal:!0,closed:!0}),Ce?ge.isSmooth()||Lt._addBevelJoin(ge,xe,ie,be,null,U,De,!0):ke==="square"&&Lt._addSquareCap(ge,ke,ie,null,U,De,!0),!Ne.isEmpty()){var Qe;return Ne.contains(f)||(Qe=Ne.getNearestLocation(f))&&he(Qe.getPoint(),ye)}}if(w.ends&&!w.segments&&!fe){if(Fe=pe(se[0],!0)||pe(se[oe-1],!0))return Fe}else if(w.segments||w.handles){for(var Pe=0;Pe<oe;Pe++)if(Fe=pe(se[Pe]))return Fe}if(ie!==null){if(Re=this.getNearestLocation(f),Re){var Ve=Re.getTime();Ve===0||Ve===1&&oe>1?Le(Re.getSegment())||(Re=null):he(Re.getPoint(),Me)||(Re=null)}if(!Re&&xe==="miter"&&oe>1)for(var Pe=0;Pe<oe;Pe++){var Ue=se[Pe];if(f.getDistance(Ue._point)<=be*ie&&Le(Ue)){Re=Ue.getLocation();break}}}return!Re&&Ae&&this._contains(f)||Re&&!de&&!W?new mi("fill",this):Re?new mi(de?"stroke":"curve",this,{location:Re,point:Re.getPoint()}):null}},g.each(rt._evaluateMethods,function(f){this[f+"At"]=function(w){var B=this.getLocationAt(w);return B&&B[f]()}},{beans:!1,getLocationOf:function(){for(var f=le.read(arguments),w=this.getCurves(),B=0,U=w.length;B<U;B++){var Z=w[B].getLocationOf(f);if(Z)return Z}return null},getOffsetOf:function(){var f=this.getLocationOf.apply(this,arguments);return f?f.getOffset():null},getLocationAt:function(f){if(typeof f=="number"){for(var w=this.getCurves(),B=0,U=0,Z=w.length;U<Z;U++){var K=B,se=w[U];if(B+=se.getLength(),B>f)return se.getLocationAt(f-K)}if(w.length>0&&f<=this.getLength())return new Ft(w[w.length-1],1)}else if(f&&f.getPath&&f.getPath()===this)return f;return null},getOffsetsWithTangent:function(){var f=le.read(arguments);if(f.isZero())return[];for(var w=[],B=0,U=this.getCurves(),Z=0,K=U.length;Z<K;Z++){for(var se=U[Z],oe=se.getTimesWithTangent(f),fe=0,ye=oe.length;fe<ye;fe++){var Me=B+se.getOffsetAtTime(oe[fe]);w.indexOf(Me)<0&&w.push(Me)}B+=se.length}return w}}),new function(){function f(B,U,Z,K){if(K<=0)return;var se=K/2,oe=K-2,fe=se-1,ye=new Array(6),Me,xe;function ke(Ae){var W=ye[Ae],ie=ye[Ae+1];(Me!=W||xe!=ie)&&(B.beginPath(),B.moveTo(Me,xe),B.lineTo(W,ie),B.stroke(),B.beginPath(),B.arc(W,ie,se,0,Math.PI*2,!0),B.fill())}for(var be=0,Ne=U.length;be<Ne;be++){var Re=U[be],Fe=Re._selection;if(Re._transformCoordinates(Z,ye),Me=ye[0],xe=ye[1],Fe&2&&ke(2),Fe&4&&ke(4),B.fillRect(Me-se,xe-se,K,K),oe>0&&!(Fe&1)){var de=B.fillStyle;B.fillStyle="#ffffff",B.fillRect(Me-fe,xe-fe,oe,oe),B.fillStyle=de}}}function w(B,U,Z){var K=U._segments,se=K.length,oe=new Array(6),fe=!0,ye,Me,xe,ke,be,Ne,Re,Fe;function de(W){if(Z)W._transformCoordinates(Z,oe),ye=oe[0],Me=oe[1];else{var ie=W._point;ye=ie._x,Me=ie._y}if(fe)B.moveTo(ye,Me),fe=!1;else{if(Z)be=oe[2],Ne=oe[3];else{var he=W._handleIn;be=ye+he._x,Ne=Me+he._y}be===ye&&Ne===Me&&Re===xe&&Fe===ke?B.lineTo(ye,Me):B.bezierCurveTo(Re,Fe,be,Ne,ye,Me)}if(xe=ye,ke=Me,Z)Re=oe[4],Fe=oe[5];else{var he=W._handleOut;Re=xe+he._x,Fe=ke+he._y}}for(var Ae=0;Ae<se;Ae++)de(K[Ae]);U._closed&&se>0&&de(K[0])}return{_draw:function(B,U,Z,K){var se=U.dontStart,oe=U.dontFinish||U.clip,fe=this.getStyle(),ye=fe.hasFill(),Me=fe.hasStroke(),xe=fe.getDashArray(),ke=!pn.support.nativeDash&&Me&&xe&&xe.length;se||B.beginPath(),(ye||Me&&!ke||oe)&&(w(B,this,K),this._closed&&B.closePath());function be(W){return xe[(W%ke+ke)%ke]}if(!oe&&(ye||Me)&&(this._setStyles(B,U,Z),ye&&(B.fill(fe.getFillRule()),B.shadowColor="rgba(0,0,0,0)"),Me)){if(ke){se||B.beginPath();for(var Ne=new oi(this,.25,32,!1,K),Re=Ne.length,Fe=-fe.getDashOffset(),de,Ae=0;Fe>0;)Fe-=be(Ae--)+be(Ae--);for(;Fe<Re;)de=Fe+be(Ae++),(Fe>0||de>0)&&Ne.drawPart(B,Math.max(Fe,0),Math.max(de,0)),Fe=de+be(Ae++)}B.stroke()}},_drawSelected:function(B,U){B.beginPath(),w(B,this,U),B.stroke(),f(B,this._segments,U,pn.settings.handleSize)}}},new function(){function f(w){var B=w._segments;if(!B.length)throw new Error("Use a moveTo() command first");return B[B.length-1]}return{moveTo:function(){var w=this._segments;w.length===1&&this.removeSegment(0),w.length||this._add([new vt(le.read(arguments))])},moveBy:function(){throw new Error("moveBy() is unsupported on Path items.")},lineTo:function(){this._add([new vt(le.read(arguments))])},cubicCurveTo:function(){var w=arguments,B=le.read(w),U=le.read(w),Z=le.read(w),K=f(this);K.setHandleOut(B.subtract(K._point)),this._add([new vt(Z,U.subtract(Z))])},quadraticCurveTo:function(){var w=arguments,B=le.read(w),U=le.read(w),Z=f(this)._point;this.cubicCurveTo(B.add(Z.subtract(B).multiply(1/3)),B.add(U.subtract(B).multiply(1/3)),U)},curveTo:function(){var w=arguments,B=le.read(w),U=le.read(w),Z=g.pick(g.read(w),.5),K=1-Z,se=f(this)._point,oe=B.subtract(se.multiply(K*K)).subtract(U.multiply(Z*Z)).divide(2*Z*K);if(oe.isNaN())throw new Error("Cannot put a curve through points with parameter = "+Z);this.quadraticCurveTo(oe,U)},arcTo:function(){var w=arguments,B=Math.abs,U=Math.sqrt,Z=f(this),K=Z._point,se=le.read(w),oe,fe=g.peek(w),ye=g.pick(fe,!0),Me,xe,ke,be;if(typeof ye=="boolean")var Ne=K.add(se).divide(2),oe=Ne.add(Ne.subtract(K).rotate(ye?-90:90));else if(g.remain(w)<=2)oe=se,se=le.read(w);else if(!K.equals(se)){var Re=Je.read(w),Fe=ee.isZero;if(Fe(Re.width)||Fe(Re.height))return this.lineTo(se);var de=g.read(w),ye=!!g.read(w),Ae=!!g.read(w),Ne=K.add(se).divide(2),W=K.subtract(Ne).rotate(-de),ie=W.x,he=W.y,me=B(Re.width),pe=B(Re.height),De=me*me,Le=pe*pe,Pe=ie*ie,Ve=he*he,Ue=U(Pe/De+Ve/Le);if(Ue>1&&(me*=Ue,pe*=Ue,De=me*me,Le=pe*pe),Ue=(De*Le-De*Ve-Le*Pe)/(De*Ve+Le*Pe),B(Ue)<1e-12&&(Ue=0),Ue<0)throw new Error("Cannot create an arc with the given arguments");Me=new le(me*he/pe,-pe*ie/me).multiply((Ae===ye?-1:1)*U(Ue)).rotate(de).add(Ne),be=new gt().translate(Me).rotate(de).scale(me,pe),ke=be._inverseTransform(K),xe=ke.getDirectedAngle(be._inverseTransform(se)),!ye&&xe>0?xe-=360:ye&&xe<0&&(xe+=360)}if(oe){var ge=new Mt(K.add(oe).divide(2),oe.subtract(K).rotate(90),!0),Ce=new Mt(oe.add(se).divide(2),se.subtract(oe).rotate(90),!0),Qe=new Mt(K,se),nt=Qe.getSide(oe);if(Me=ge.intersect(Ce,!0),!Me){if(!nt)return this.lineTo(se);throw new Error("Cannot create an arc with the given arguments")}ke=K.subtract(Me),xe=ke.getDirectedAngle(se.subtract(Me));var i=Qe.getSide(Me,!0);i===0?xe=nt*B(xe):nt===i&&(xe+=xe<0?360:-360)}if(xe){for(var ue=1e-5,Dt=B(xe),Vt=Dt>=360?4:Math.ceil((Dt-ue)/90),Wt=xe/Vt,It=Wt*Math.PI/360,Bt=4/3*Math.sin(It)/(1+Math.cos(It)),hi=[],Zt=0;Zt<=Vt;Zt++){var W=se,ei=null;if(Zt<Vt&&(ei=ke.rotate(90).multiply(Bt),be?(W=be._transformPoint(ke),ei=be._transformPoint(ke.add(ei)).subtract(W)):W=Me.add(ke)),!Zt)Z.setHandleOut(ei);else{var Ti=ke.rotate(-90).multiply(Bt);be&&(Ti=be._transformPoint(ke.add(Ti)).subtract(W)),hi.push(new vt(W,Ti,ei))}ke=ke.rotate(Wt)}this._add(hi)}},lineBy:function(){var w=le.read(arguments),B=f(this)._point;this.lineTo(B.add(w))},curveBy:function(){var w=arguments,B=le.read(w),U=le.read(w),Z=g.read(w),K=f(this)._point;this.curveTo(K.add(B),K.add(U),Z)},cubicCurveBy:function(){var w=arguments,B=le.read(w),U=le.read(w),Z=le.read(w),K=f(this)._point;this.cubicCurveTo(K.add(B),K.add(U),K.add(Z))},quadraticCurveBy:function(){var w=arguments,B=le.read(w),U=le.read(w),Z=f(this)._point;this.quadraticCurveTo(Z.add(B),Z.add(U))},arcBy:function(){var w=arguments,B=f(this)._point,U=B.add(le.read(w)),Z=g.pick(g.peek(w),!0);typeof Z=="boolean"?this.arcTo(U,Z):this.arcTo(U,B.add(le.read(w)))},closePath:function(w){this.setClosed(!0),this.join(this,w)}}},{_getBounds:function(f,w){var B=w.handle?"getHandleBounds":w.stroke?"getStrokeBounds":"getBounds";return Lt[B](this._segments,this._closed,this,f,w)},statics:{getBounds:function(f,w,B,U,Z,K){var se=f[0];if(!se)return new Ke;var oe=new Array(6),fe=se._transformCoordinates(U,new Array(6)),ye=fe.slice(0,2),Me=ye.slice(),xe=new Array(2);function ke(Re){Re._transformCoordinates(U,oe);for(var Fe=0;Fe<2;Fe++)rt._addBounds(fe[Fe],fe[Fe+4],oe[Fe+2],oe[Fe],Fe,K?K[Fe]:0,ye,Me,xe);var de=fe;fe=oe,oe=de}for(var be=1,Ne=f.length;be<Ne;be++)ke(f[be]);return w&&ke(se),new Ke(ye[0],ye[1],Me[0]-ye[0],Me[1]-ye[1])},getStrokeBounds:function(f,w,B,U,Z){var K=B.getStyle(),se=K.hasStroke(),oe=K.getStrokeWidth(),fe=se&&B._getStrokeMatrix(U,Z),ye=se&&Lt._getStrokePadding(oe,fe),Me=Lt.getBounds(f,w,B,U,Z,ye);if(!se)return Me;var xe=oe/2,ke=K.getStrokeJoin(),be=K.getStrokeCap(),Ne=K.getMiterLimit(),Re=new Ke(new Je(ye));function Fe(me){Me=Me.include(me)}function de(me){Me=Me.unite(Re.setCenter(me._point.transform(U)))}function Ae(me,pe){pe==="round"||me.isSmooth()?de(me):Lt._addBevelJoin(me,pe,xe,Ne,U,fe,Fe)}function W(me,pe){pe==="round"?de(me):Lt._addSquareCap(me,pe,xe,U,fe,Fe)}var ie=f.length-(w?0:1);if(ie>0){for(var he=1;he<ie;he++)Ae(f[he],ke);w?Ae(f[0],ke):(W(f[0],be),W(f[f.length-1],be))}return Me},_getStrokePadding:function(f,w){if(!w)return[f,f];var B=new le(f,0).transform(w),U=new le(0,f).transform(w),Z=B.getAngleInRadians(),K=B.getLength(),se=U.getLength(),oe=Math.sin(Z),fe=Math.cos(Z),ye=Math.tan(Z),Me=Math.atan2(se*ye,K),xe=Math.atan2(se,ye*K);return[Math.abs(K*Math.cos(Me)*fe+se*Math.sin(Me)*oe),Math.abs(se*Math.sin(xe)*fe+K*Math.cos(xe)*oe)]},_addBevelJoin:function(f,w,B,U,Z,K,se,oe){var fe=f.getCurve(),ye=fe.getPrevious(),Me=fe.getPoint1().transform(Z),xe=ye.getNormalAtTime(1).multiply(B).transform(K),ke=fe.getNormalAtTime(0).multiply(B).transform(K),be=xe.getDirectedAngle(ke);if((be<0||be>=180)&&(xe=xe.negate(),ke=ke.negate()),oe&&se(Me),se(Me.add(xe)),w==="miter"){var Ne=new Mt(Me.add(xe),new le(-xe.y,xe.x),!0).intersect(new Mt(Me.add(ke),new le(-ke.y,ke.x),!0),!0);Ne&&Me.getDistance(Ne)<=U*B&&se(Ne)}se(Me.add(ke))},_addSquareCap:function(f,w,B,U,Z,K,se){var oe=f._point.transform(U),fe=f.getLocation(),ye=fe.getNormal().multiply(fe.getTime()===0?B:-B).transform(Z);w==="square"&&(se&&(K(oe.subtract(ye)),K(oe.add(ye))),oe=oe.add(ye.rotate(-90))),K(oe.add(ye)),K(oe.subtract(ye))},getHandleBounds:function(f,w,B,U,Z){var K=B.getStyle(),se=Z.stroke&&K.hasStroke(),oe,fe;if(se){var ye=B._getStrokeMatrix(U,Z),Me=K.getStrokeWidth()/2,xe=Me;K.getStrokeJoin()==="miter"&&(xe=Me*K.getMiterLimit()),K.getStrokeCap()==="square"&&(xe=Math.max(xe,Me*Math.SQRT2)),oe=Lt._getStrokePadding(Me,ye),fe=Lt._getStrokePadding(xe,ye)}for(var ke=new Array(6),be=1/0,Ne=-be,Re=be,Fe=Ne,de=0,Ae=f.length;de<Ae;de++){var W=f[de];W._transformCoordinates(U,ke);for(var ie=0;ie<6;ie+=2){var he=ie?oe:fe,me=he?he[0]:0,pe=he?he[1]:0,De=ke[ie],Le=ke[ie+1],Pe=De-me,Ve=De+me,Ue=Le-pe,ge=Le+pe;Pe<be&&(be=Pe),Ve>Ne&&(Ne=Ve),Ue<Re&&(Re=Ue),ge>Fe&&(Fe=ge)}}return new Ke(be,Re,Ne-be,Fe-Re)}}});Lt.inject({statics:new function(){var f=.5522847498307936,w=[new vt([-1,0],[0,f],[0,-f]),new vt([0,-1],[-f,0],[f,0]),new vt([1,0],[0,-f],[0,f]),new vt([0,1],[f,0],[-f,0])];function B(Z,K,se){var oe=g.getNamed(se),fe=new Lt(oe&&(oe.insert==!0?Te.INSERT:oe.insert==!1?Te.NO_INSERT:null));return fe._add(Z),fe._closed=K,fe.set(oe,Te.INSERT)}function U(Z,K,se){for(var oe=new Array(4),fe=0;fe<4;fe++){var ye=w[fe];oe[fe]=new vt(ye._point.multiply(K).add(Z),ye._handleIn.multiply(K),ye._handleOut.multiply(K))}return B(oe,!0,se)}return{Line:function(){var Z=arguments;return B([new vt(le.readNamed(Z,"from")),new vt(le.readNamed(Z,"to"))],!1,Z)},Circle:function(){var Z=arguments,K=le.readNamed(Z,"center"),se=g.readNamed(Z,"radius");return U(K,new Je(se),Z)},Rectangle:function(){var Z=arguments,K=Ke.readNamed(Z,"rectangle"),se=Je.readNamed(Z,"radius",0,{readNull:!0}),oe=K.getBottomLeft(!0),fe=K.getTopLeft(!0),ye=K.getTopRight(!0),Me=K.getBottomRight(!0),xe;if(!se||se.isZero())xe=[new vt(oe),new vt(fe),new vt(ye),new vt(Me)];else{se=Je.min(se,K.getSize(!0).divide(2));var ke=se.width,be=se.height,Ne=ke*f,Re=be*f;xe=[new vt(oe.add(ke,0),null,[-Ne,0]),new vt(oe.subtract(0,be),[0,Re]),new vt(fe.add(0,be),null,[0,-Re]),new vt(fe.add(ke,0),[-Ne,0],null),new vt(ye.subtract(ke,0),null,[Ne,0]),new vt(ye.add(0,be),[0,-Re],null),new vt(Me.subtract(0,be),null,[0,Re]),new vt(Me.subtract(ke,0),[Ne,0])]}return B(xe,!0,Z)},RoundRectangle:"#Rectangle",Ellipse:function(){var Z=arguments,K=xi._readEllipse(Z);return U(K.center,K.radius,Z)},Oval:"#Ellipse",Arc:function(){var Z=arguments,K=le.readNamed(Z,"from"),se=le.readNamed(Z,"through"),oe=le.readNamed(Z,"to"),fe=g.getNamed(Z),ye=new Lt(fe&&fe.insert==!1&&Te.NO_INSERT);return ye.moveTo(K),ye.arcTo(se,oe),ye.set(fe)},RegularPolygon:function(){for(var Z=arguments,K=le.readNamed(Z,"center"),se=g.readNamed(Z,"sides"),oe=g.readNamed(Z,"radius"),fe=360/se,ye=se%3===0,Me=new le(0,ye?-oe:oe),xe=ye?-1:.5,ke=new Array(se),be=0;be<se;be++)ke[be]=new vt(K.add(Me.rotate((be+xe)*fe)));return B(ke,!0,Z)},Star:function(){for(var Z=arguments,K=le.readNamed(Z,"center"),se=g.readNamed(Z,"points")*2,oe=g.readNamed(Z,"radius1"),fe=g.readNamed(Z,"radius2"),ye=360/se,Me=new le(0,-1),xe=new Array(se),ke=0;ke<se;ke++)xe[ke]=new vt(K.add(Me.rotate(ye*ke).multiply(ke%2?fe:oe)));return B(xe,!0,Z)}}}});var Yt=ui.extend({_class:"CompoundPath",_serializeFields:{children:[]},beans:!0,initialize:function(w){this._children=[],this._namedChildren={},this._initialize(w)||(typeof w=="string"?this.setPathData(w):this.addChildren(Array.isArray(w)?w:arguments))},insertChildren:function f(w,B){var U=B,Z=U[0];Z&&typeof Z[0]=="number"&&(U=[U]);for(var K=B.length-1;K>=0;K--){var se=U[K];U===B&&!(se instanceof Lt)&&(U=g.slice(U)),Array.isArray(se)?U[K]=new Lt({segments:se,insert:!1}):se instanceof Yt&&(U.splice.apply(U,[K,1].concat(se.removeChildren())),se.remove())}return f.base.call(this,w,U)},reduce:function f(w){for(var B=this._children,U=B.length-1;U>=0;U--){var Z=B[U].reduce(w);Z.isEmpty()&&Z.remove()}if(!B.length){var Z=new Lt(Te.NO_INSERT);return Z.copyAttributes(this),Z.insertAbove(this),this.remove(),Z}return f.base.call(this)},isClosed:function(){for(var f=this._children,w=0,B=f.length;w<B;w++)if(!f[w]._closed)return!1;return!0},setClosed:function(f){for(var w=this._children,B=0,U=w.length;B<U;B++)w[B].setClosed(f)},getFirstSegment:function(){var f=this.getFirstChild();return f&&f.getFirstSegment()},getLastSegment:function(){var f=this.getLastChild();return f&&f.getLastSegment()},getCurves:function(){for(var f=this._children,w=[],B=0,U=f.length;B<U;B++)g.push(w,f[B].getCurves());return w},getFirstCurve:function(){var f=this.getFirstChild();return f&&f.getFirstCurve()},getLastCurve:function(){var f=this.getLastChild();return f&&f.getLastCurve()},getArea:function(){for(var f=this._children,w=0,B=0,U=f.length;B<U;B++)w+=f[B].getArea();return w},getLength:function(){for(var f=this._children,w=0,B=0,U=f.length;B<U;B++)w+=f[B].getLength();return w},getPathData:function(f,w){for(var B=this._children,U=[],Z=0,K=B.length;Z<K;Z++){var se=B[Z],oe=se._matrix;U.push(se.getPathData(f&&!oe.isIdentity()?f.appended(oe):f,w))}return U.join("")},_hitTestChildren:function f(w,B,U){return f.base.call(this,w,B.class===Lt||B.type==="path"?B:g.set({},B,{fill:!1}),U)},_draw:function(f,w,B,U){var Z=this._children;if(Z.length){w=w.extend({dontStart:!0,dontFinish:!0}),f.beginPath();for(var K=0,se=Z.length;K<se;K++)Z[K].draw(f,w,U);if(!w.clip){this._setStyles(f,w,B);var oe=this._style;oe.hasFill()&&(f.fill(oe.getFillRule()),f.shadowColor="rgba(0,0,0,0)"),oe.hasStroke()&&f.stroke()}}},_drawSelected:function(f,w,B){for(var U=this._children,Z=0,K=U.length;Z<K;Z++){var se=U[Z],oe=se._matrix;B[se._id]||se._drawSelected(f,oe.isIdentity()?w:w.appended(oe))}}},new function(){function f(w,B){var U=w._children;if(B&&!U.length)throw new Error("Use a moveTo() command first");return U[U.length-1]}return g.each(["lineTo","cubicCurveTo","quadraticCurveTo","curveTo","arcTo","lineBy","cubicCurveBy","quadraticCurveBy","curveBy","arcBy"],function(w){this[w]=function(){var B=f(this,!0);B[w].apply(B,arguments)}},{moveTo:function(){var w=f(this),B=w&&w.isEmpty()?w:new Lt(Te.NO_INSERT);B!==w&&this.addChild(B),B.moveTo.apply(B,arguments)},moveBy:function(){var w=f(this,!0),B=w&&w.getLastSegment(),U=le.read(arguments);this.moveTo(B?U.add(B._point):U)},closePath:function(w){f(this,!0).closePath(w)}})},g.each(["reverse","flatten","simplify","smooth"],function(f){this[f]=function(w){for(var B=this._children,U,Z=0,K=B.length;Z<K;Z++)U=B[Z][f](w)||U;return U}},{}));ui.inject(new function(){var f=Math.min,w=Math.max,B=Math.abs,U={unite:{1:!0,2:!0},intersect:{2:!0},subtract:{1:!0},exclude:{1:!0,"-1":!0}};function Z(de){return de._children||[de]}function K(de,Ae){var W=de.clone(!1).reduce({simplify:!0}).transform(null,!0,!0);if(Ae){for(var ie=Z(W),he=0,me=ie.length;he<me;he++){var de=ie[he];!de._closed&&!de.isEmpty()&&(de.closePath(1e-12),de.getFirstSegment().setHandleIn(0,0),de.getLastSegment().setHandleOut(0,0))}W=W.resolveCrossings().reorient(W.getFillRule()==="nonzero",!0)}return W}function se(de,Ae,W,ie,he){var me=new Yt(Te.NO_INSERT);return me.addChildren(de,!0),me=me.reduce({simplify:Ae}),he&&he.insert==!1||me.insertAbove(ie&&W.isSibling(ie)&&W.getIndex()<ie.getIndex()?ie:W),me.copyAttributes(W,!0),me}function oe(de){return de.hasOverlap()||de.isCrossing()}function fe(de,Ae,W,ie){if(ie&&(ie.trace==!1||ie.stroke)&&/^(subtract|intersect)$/.test(W))return ye(de,Ae,W);var he=K(de,!0),me=Ae&&de!==Ae&&K(Ae,!0),pe=U[W];pe[W]=!0,me&&(pe.subtract||pe.exclude)^(me.isClockwise()^he.isClockwise())&&me.reverse();var De=be(Ft.expand(he.getIntersections(me,oe))),Le=Z(he),Pe=me&&Z(me),Ve=[],Ue=[],ge;function Ce(ei){for(var Ti=0,Yi=ei.length;Ti<Yi;Ti++){var wn=ei[Ti];g.push(Ve,wn._segments),g.push(Ue,wn.getCurves()),wn._overlapsOnly=!0}}function Qe(ei){for(var Ti=[],Yi=0,wn=ei&&ei.length;Yi<wn;Yi++)Ti.push(Ue[ei[Yi]]);return Ti}if(De.length){Ce(Le),Pe&&Ce(Pe);for(var nt=new Array(Ue.length),i=0,ue=Ue.length;i<ue;i++)nt[i]=Ue[i].getValues();for(var Dt=O.findCurveBoundsCollisions(nt,nt,0,!0),Vt={},i=0;i<Ue.length;i++){var Wt=Ue[i],It=Wt._path._id,Bt=Vt[It]=Vt[It]||{};Bt[Wt.getIndex()]={hor:Qe(Dt[i].hor),ver:Qe(Dt[i].ver)}}for(var i=0,ue=De.length;i<ue;i++)Re(De[i]._segment,he,me,Vt,pe);for(var i=0,ue=Ve.length;i<ue;i++){var hi=Ve[i],Zt=hi._intersection;hi._winding||Re(hi,he,me,Vt,pe),Zt&&Zt._overlap||(hi._path._overlapsOnly=!1)}ge=Fe(Ve,pe)}else ge=ke(Pe?Le.concat(Pe):Le.slice(),function(ei){return!!pe[ei]});return se(ge,!0,de,Ae,ie)}function ye(de,Ae,W){var ie=K(de),he=K(Ae),me=ie.getIntersections(he,oe),pe=W==="subtract",De=W==="divide",Le={},Pe=[];function Ve(Ce){if(!Le[Ce._id]&&(De||he.contains(Ce.getPointAt(Ce.getLength()/2))^pe))return Pe.unshift(Ce),Le[Ce._id]=!0}for(var Ue=me.length-1;Ue>=0;Ue--){var ge=me[Ue].split();ge&&(Ve(ge)&&ge.getFirstSegment().setHandleIn(0,0),ie.getLastSegment().setHandleOut(0,0))}return Ve(ie),se(Pe,!1,de,Ae)}function Me(de,Ae){for(var W=de;W;){if(W===Ae)return;W=W._previous}for(;de._next&&de._next!==Ae;)de=de._next;if(!de._next){for(;Ae._previous;)Ae=Ae._previous;de._next=Ae,Ae._previous=de}}function xe(de){for(var Ae=de.length-1;Ae>=0;Ae--)de[Ae].clearHandles()}function ke(de,Ae,W){var ie=de&&de.length;if(ie){var he=g.each(de,function(Dt,Vt){this[Dt._id]={container:null,winding:Dt.isClockwise()?1:-1,index:Vt}},{}),me=de.slice().sort(function(Dt,Vt){return B(Vt.getArea())-B(Dt.getArea())}),pe=me[0],De=O.findItemBoundsCollisions(me,null,ee.GEOMETRIC_EPSILON);W==null&&(W=pe.isClockwise());for(var Le=0;Le<ie;Le++){var Pe=me[Le],Ve=he[Pe._id],Ue=0,ge=De[Le];if(ge){for(var Ce=null,Qe=ge.length-1;Qe>=0;Qe--)if(ge[Qe]<Le){Ce=Ce||Pe.getInteriorPoint();var nt=me[ge[Qe]];if(nt.contains(Ce)){var i=he[nt._id];Ue=i.winding,Ve.winding+=Ue,Ve.container=i.exclude?i.container:nt;break}}}if(Ae(Ve.winding)===Ae(Ue))Ve.exclude=!0,de[Ve.index]=null;else{var ue=Ve.container;Pe.setClockwise(ue?!ue.isClockwise():W)}}}return de}function be(de,Ae,W){var ie=Ae&&[],he=1e-8,me=1-he,pe=!1,De=W||[],Le=W&&{},Pe,Ve,Ue;function ge(Ti){return Ti._path._id+"."+Ti._segment1._index}for(var Ce=(W&&W.length)-1;Ce>=0;Ce--){var Qe=W[Ce];Qe._path&&(Le[ge(Qe)]=!0)}for(var Ce=de.length-1;Ce>=0;Ce--){var nt=de[Ce],i=nt._time,ue=i,Dt=Ae&&!Ae(nt),Qe=nt._curve,Vt;if(Qe&&(Qe!==Ve?(pe=!Qe.hasHandles()||Le&&Le[ge(Qe)],Pe=[],Ue=null,Ve=Qe):Ue>=he&&(i/=Ue)),Dt){Pe&&Pe.push(nt);continue}else Ae&&ie.unshift(nt);if(Ue=ue,i<he)Vt=Qe._segment1;else if(i>me)Vt=Qe._segment2;else{var Wt=Qe.divideAtTime(i,!0);pe&&De.push(Qe,Wt),Vt=Wt._segment1;for(var It=Pe.length-1;It>=0;It--){var Bt=Pe[It];Bt._time=(Bt._time-i)/(1-i)}}nt._setSegment(Vt);var hi=Vt._intersection,Zt=nt._intersection;if(hi){Me(hi,Zt);for(var ei=hi;ei;)Me(ei._intersection,hi),ei=ei._next}else Vt._intersection=Zt}return W||xe(De),ie||de}function Ne(de,Ae,W,ie,he){var me=Array.isArray(Ae)?Ae:Ae[W?"hor":"ver"],pe=W?1:0,De=pe^1,Le=[de.x,de.y],Pe=Le[pe],Ve=Le[De],Ue=1e-9,ge=1e-6,Ce=Pe-Ue,Qe=Pe+Ue,nt=0,i=0,ue=0,Dt=0,Vt=!1,Wt=!1,It=1,Bt=[],hi,Zt;function ei(mt){var bi=mt[De+0],At=mt[De+6];if(!(Ve<f(bi,At)||Ve>w(bi,At))){var Ni=mt[pe+0],lr=mt[pe+2],es=mt[pe+4],kr=mt[pe+6];if(bi===At){(Ni<Qe&&kr>Ce||kr<Qe&&Ni>Ce)&&(Vt=!0);return}var ht=Ve===bi?0:Ve===At||Ce>w(Ni,lr,es,kr)||Qe<f(Ni,lr,es,kr)?1:rt.solveCubic(mt,De,Ve,Bt,0,1)>0?Bt[0]:1,Tn=ht===0?Ni:ht===1?kr:rt.getPoint(mt,ht)[W?"y":"x"],it=bi>At?1:-1,nr=hi[De]>hi[De+6]?1:-1,ks=hi[pe+6];return Ve!==bi?(Tn<Ce?ue+=it:Tn>Qe?Dt+=it:Vt=!0,Tn>Pe-ge&&Tn<Pe+ge&&(It/=2)):(it!==nr?Ni<Ce?ue+=it:Ni>Qe&&(Dt+=it):Ni!=ks&&(ks<Qe&&Tn>Qe?(Dt+=it,Vt=!0):ks>Ce&&Tn<Ce&&(ue+=it,Vt=!0)),It/=4),hi=mt,!he&&Tn>Ce&&Tn<Qe&&rt.getTangent(mt,ht)[W?"x":"y"]===0&&Ne(de,Ae,!W,ie,!0)}}function Ti(mt){var bi=mt[De+0],At=mt[De+2],Ni=mt[De+4],lr=mt[De+6];if(Ve<=w(bi,At,Ni,lr)&&Ve>=f(bi,At,Ni,lr)){for(var es=mt[pe+0],kr=mt[pe+2],ht=mt[pe+4],Tn=mt[pe+6],it=Ce>w(es,kr,ht,Tn)||Qe<f(es,kr,ht,Tn)?[mt]:rt.getMonoCurves(mt,W),nr,ks=0,Es=it.length;ks<Es;ks++)if(nr=ei(it[ks]))return nr}}for(var Yi=0,wn=me.length;Yi<wn;Yi++){var An=me[Yi],en=An._path,ar=An.getValues(),pi;if((!Yi||me[Yi-1]._path!==en)&&(hi=null,en._closed||(Zt=rt.getValues(en.getLastCurve().getSegment2(),An.getSegment1(),null,!ie),Zt[De]!==Zt[De+6]&&(hi=Zt)),!hi)){hi=ar;for(var Zn=en.getLastCurve();Zn&&Zn!==An;){var Xi=Zn.getValues();if(Xi[De]!==Xi[De+6]){hi=Xi;break}Zn=Zn.getPrevious()}}if(pi=Ti(ar))return pi;if(Yi+1===wn||me[Yi+1]._path!==en){if(Zt&&(pi=Ti(Zt)))return pi;Vt&&!ue&&!Dt&&(ue=Dt=en.isClockwise(ie)^W?1:-1),nt+=ue,i+=Dt,ue=Dt=0,Vt&&(Wt=!0,Vt=!1),Zt=null}}return nt=B(nt),i=B(i),{winding:w(nt,i),windingL:nt,windingR:i,quality:It,onPath:Wt}}function Re(de,Ae,W,ie,he){var me=[],pe=de,De=0,Ue;do{var Le=de.getCurve();if(Le){var Pe=Le.getLength();me.push({segment:de,curve:Le,length:Pe}),De+=Pe}de=de.getNext()}while(de&&!de._intersection&&de!==pe);for(var Ve=[.5,.25,.75],Ue={winding:0,quality:-1},ge=.001,Ce=1-ge,Qe=0;Qe<Ve.length&&Ue.quality<.5;Qe++)for(var Pe=De*Ve[Qe],nt=0,i=me.length;nt<i;nt++){var ue=me[nt],Dt=ue.length;if(Pe<=Dt){var Le=ue.curve,Vt=Le._path,Wt=Vt._parent,It=Wt instanceof Yt?Wt:Vt,Bt=ee.clamp(Le.getTimeAt(Pe),ge,Ce),hi=Le.getPointAtTime(Bt),Zt=B(Le.getTangentAtTime(Bt).y)<Math.SQRT1_2,ei=null;if(he.subtract&&W){var Ti=It===Ae?W:Ae,Yi=Ti._getWinding(hi,Zt,!0);if(It===Ae&&Yi.winding||It===W&&!Yi.winding){if(Yi.quality<1)continue;ei={winding:0,quality:1}}}ei=ei||Ne(hi,ie[Vt._id][Le.getIndex()],Zt,!0),ei.quality>Ue.quality&&(Ue=ei);break}Pe-=Dt}for(var nt=me.length-1;nt>=0;nt--)me[nt].segment._winding=Ue}function Fe(de,Ae){var W=[],ie;function he(wn){var An;return!!(wn&&!wn._visited&&(!Ae||Ae[(An=wn._winding||{}).winding]&&!(Ae.unite&&An.winding===2&&An.windingL&&An.windingR)))}function me(wn){if(wn){for(var An=0,en=ie.length;An<en;An++)if(wn===ie[An])return!0}return!1}function pe(wn){for(var An=wn._segments,en=0,ar=An.length;en<ar;en++)An[en]._visited=!0}function De(wn,An){var en=wn._intersection,ar=en,pi=[];An&&(ie=[wn]);function Zn(Xi,mt){for(;Xi&&Xi!==mt;){var bi=Xi._segment,At=bi&&bi._path;if(At){var Ni=bi.getNext()||At.getFirstSegment(),lr=Ni._intersection;bi!==wn&&(me(bi)||me(Ni)||Ni&&he(bi)&&(he(Ni)||lr&&he(lr._segment)))&&pi.push(bi),An&&ie.push(bi)}Xi=Xi._next}}if(en){for(Zn(en);en&&en._previous;)en=en._previous;Zn(en,ar)}return pi}de.sort(function(wn,An){var en=wn._intersection,ar=An._intersection,pi=!!(en&&en._overlap),Zn=!!(ar&&ar._overlap),Xi=wn._path,mt=An._path;return pi^Zn?pi?1:-1:!en^!ar?en?1:-1:Xi!==mt?Xi._id-mt._id:wn._index-An._index});for(var Le=0,Pe=de.length;Le<Pe;Le++){var Ve=de[Le],Ue=he(Ve),ge=null,Ce=!1,Qe=!0,nt=[],i,ue,Dt;if(Ue&&Ve._path._overlapsOnly){var Vt=Ve._path,Wt=Ve._intersection._segment._path;Vt.compare(Wt)&&(Vt.getArea()&&W.push(Vt.clone(!1)),pe(Vt),pe(Wt),Ue=!1)}for(;Ue;){var It=!ge,Bt=De(Ve,It),hi=Bt.shift(),Ce=!It&&(me(Ve)||me(hi)),Zt=!Ce&&hi;if(It&&(ge=new Lt(Te.NO_INSERT),i=null),Ce){(Ve.isFirst()||Ve.isLast())&&(Qe=Ve._path._closed),Ve._visited=!0;break}if(Zt&&i&&(nt.push(i),i=null),i||(Zt&&Bt.push(Ve),i={start:ge._segments.length,crossings:Bt,visited:ue=[],handleIn:Dt}),Zt&&(Ve=hi),!he(Ve)){ge.removeSegments(i.start);for(var ei=0,Ti=ue.length;ei<Ti;ei++)ue[ei]._visited=!1;ue.length=0;do Ve=i&&i.crossings.shift(),(!Ve||!Ve._path)&&(Ve=null,i=nt.pop(),i&&(ue=i.visited,Dt=i.handleIn));while(i&&!he(Ve));if(!Ve)break}var Yi=Ve.getNext();ge.add(new vt(Ve._point,Dt,Yi&&Ve._handleOut)),Ve._visited=!0,ue.push(Ve),Ve=Yi||Ve._path.getFirstSegment(),Dt=Yi&&Yi._handleIn}Ce&&(Qe&&(ge.getFirstSegment().setHandleIn(Dt),ge.setClosed(Qe)),ge.getArea()!==0&&W.push(ge))}return W}return{_getWinding:function(de,Ae,W){return Ne(de,this.getCurves(),Ae,W)},unite:function(de,Ae){return fe(this,de,"unite",Ae)},intersect:function(de,Ae){return fe(this,de,"intersect",Ae)},subtract:function(de,Ae){return fe(this,de,"subtract",Ae)},exclude:function(de,Ae){return fe(this,de,"exclude",Ae)},divide:function(de,Ae){return Ae&&(Ae.trace==!1||Ae.stroke)?ye(this,de,"divide"):se([this.subtract(de,Ae),this.intersect(de,Ae)],!0,this,de,Ae)},resolveCrossings:function(){var de=this._children,Ae=de||[this];function W(i,ue){var Dt=i&&i._intersection;return Dt&&Dt._overlap&&Dt._path===ue}var ie=!1,he=!1,me=this.getIntersections(null,function(i){return i.hasOverlap()&&(ie=!0)||i.isCrossing()&&(he=!0)}),pe=ie&&he&&[];if(me=Ft.expand(me),ie)for(var De=be(me,function(i){return i.hasOverlap()},pe),Le=De.length-1;Le>=0;Le--){var Pe=De[Le],Ve=Pe._path,Ue=Pe._segment,ge=Ue.getPrevious(),Ce=Ue.getNext();W(ge,Ve)&&W(Ce,Ve)&&(Ue.remove(),ge._handleOut._set(0,0),Ce._handleIn._set(0,0),ge!==Ue&&!ge.getCurve().hasLength()&&(Ce._handleIn.set(ge._handleIn),ge.remove()))}he&&(be(me,ie&&function(i){var ue=i.getCurve(),Dt=i.getSegment(),Vt=i._intersection,Wt=Vt._curve,It=Vt._segment;if(ue&&Wt&&ue._path&&Wt._path)return!0;Dt&&(Dt._intersection=null),It&&(It._intersection=null)},pe),pe&&xe(pe),Ae=Fe(g.each(Ae,function(i){g.push(this,i._segments)},[])));var Qe=Ae.length,nt;return Qe>1&&de?(Ae!==de&&this.setChildren(Ae),nt=this):Qe===1&&!de&&(Ae[0]!==this&&this.setSegments(Ae[0].removeSegments()),nt=this),nt||(nt=new Yt(Te.NO_INSERT),nt.addChildren(Ae),nt=nt.reduce(),nt.copyAttributes(this),this.replaceWith(nt)),nt},reorient:function(de,Ae){var W=this._children;return W&&W.length?this.setChildren(ke(this.removeChildren(),function(ie){return!!(de?ie:ie&1)},Ae)):Ae!==n&&this.setClockwise(Ae),this},getInteriorPoint:function(){var de=this.getBounds(),Ae=de.getCenter(!0);if(!this.contains(Ae)){for(var W=this.getCurves(),ie=Ae.y,he=[],me=[],pe=0,De=W.length;pe<De;pe++){var Le=W[pe].getValues(),Pe=Le[1],Ve=Le[3],Ue=Le[5],ge=Le[7];if(ie>=f(Pe,Ve,Ue,ge)&&ie<=w(Pe,Ve,Ue,ge))for(var Ce=rt.getMonoCurves(Le),Qe=0,nt=Ce.length;Qe<nt;Qe++){var i=Ce[Qe],ue=i[1],Dt=i[7];if(ue!==Dt&&(ie>=ue&&ie<=Dt||ie>=Dt&&ie<=ue)){var Vt=ie===ue?i[0]:ie===Dt?i[6]:rt.solveCubic(i,1,ie,me,0,1)===1?rt.getPoint(i,me[0]).x:(i[0]+i[6])/2;he.push(Vt)}}}he.length>1&&(he.sort(function(Wt,It){return Wt-It}),Ae.x=(he[0]+he[1])/2)}return Ae}}});var oi=g.extend({_class:"PathFlattener",initialize:function(f,w,B,U,Z){var K=[],se=[],oe=0,fe=1/(B||32),ye=f._segments,Me=ye[0],xe;function ke(Fe,de){var Ae=rt.getValues(Fe,de,Z);K.push(Ae),be(Ae,Fe._index,0,1)}function be(Fe,de,Ae,W){if(W-Ae>fe&&!(U&&rt.isStraight(Fe))&&!rt.isFlatEnough(Fe,w||.25)){var ie=rt.subdivide(Fe,.5),he=(Ae+W)/2;be(ie[0],de,Ae,he),be(ie[1],de,he,W)}else{var me=Fe[6]-Fe[0],pe=Fe[7]-Fe[1],De=Math.sqrt(me*me+pe*pe);De>0&&(oe+=De,se.push({offset:oe,curve:Fe,index:de,time:W}))}}for(var Ne=1,Re=ye.length;Ne<Re;Ne++)xe=ye[Ne],ke(Me,xe),Me=xe;f._closed&&ke(xe||Me,ye[0]),this.curves=K,this.parts=se,this.length=oe,this.index=0},_get:function(f){for(var w=this.parts,B=w.length,U,Z=this.index;U=Z,!(!Z||w[--Z].offset<f););for(;U<B;U++){var K=w[U];if(K.offset>=f){this.index=U;var se=w[U-1],oe=se&&se.index===K.index?se.time:0,fe=se?se.offset:0;return{index:K.index,time:oe+(K.time-oe)*(f-fe)/(K.offset-fe)}}}return{index:w[B-1].index,time:1}},drawPart:function(f,w,B){for(var U=this._get(w),Z=this._get(B),K=U.index,se=Z.index;K<=se;K++){var oe=rt.getPart(this.curves[K],K===U.index?U.time:0,K===Z.index?Z.time:1);K===U.index&&f.moveTo(oe[0],oe[1]),f.bezierCurveTo.apply(f,oe.slice(2))}}},g.each(rt._evaluateMethods,function(f){this[f+"At"]=function(w){var B=this._get(w);return rt[f](this.curves[B.index],B.time)}},{})),yi=g.extend({initialize:function(f){for(var w=this.points=[],B=f._segments,U=f._closed,Z=0,K,se=B.length;Z<se;Z++){var oe=B[Z].point;(!K||!K.equals(oe))&&w.push(K=oe.clone())}U&&(w.unshift(w[w.length-1]),w.push(w[1])),this.closed=U},fit:function(f){var w=this.points,B=w.length,U=null;return B>0&&(U=[new vt(w[0])],B>1&&(this.fitCubic(U,f,0,B-1,w[1].subtract(w[0]),w[B-2].subtract(w[B-1])),this.closed&&(U.shift(),U.pop()))),U},fitCubic:function(f,w,B,U,Z,K){var se=this.points;if(U-B===1){var oe=se[B],fe=se[U],ye=oe.getDistance(fe)/3;this.addCurve(f,[oe,oe.add(Z.normalize(ye)),fe.add(K.normalize(ye)),fe]);return}for(var Me=this.chordLengthParameterize(B,U),xe=Math.max(w,w*w),ke,be=!0,Ne=0;Ne<=4;Ne++){var Re=this.generateBezier(B,U,Me,Z,K),Fe=this.findMaxError(B,U,Re,Me);if(Fe.error<w&&be){this.addCurve(f,Re);return}if(ke=Fe.index,Fe.error>=xe)break;be=this.reparameterize(B,U,Me,Re),xe=Fe.error}var de=se[ke-1].subtract(se[ke+1]);this.fitCubic(f,w,B,ke,Z,de),this.fitCubic(f,w,ke,U,de.negate(),K)},addCurve:function(f,w){var B=f[f.length-1];B.setHandleOut(w[1].subtract(w[0])),f.push(new vt(w[3],w[2].subtract(w[3])))},generateBezier:function(f,w,B,U,Z){for(var K=1e-12,se=Math.abs,oe=this.points,fe=oe[f],ye=oe[w],Me=[[0,0],[0,0]],xe=[0,0],ke=0,be=w-f+1;ke<be;ke++){var Ne=B[ke],Re=1-Ne,Fe=3*Ne*Re,de=Re*Re*Re,Ae=Fe*Re,W=Fe*Ne,ie=Ne*Ne*Ne,he=U.normalize(Ae),me=Z.normalize(W),pe=oe[f+ke].subtract(fe.multiply(de+Ae)).subtract(ye.multiply(W+ie));Me[0][0]+=he.dot(he),Me[0][1]+=he.dot(me),Me[1][0]=Me[0][1],Me[1][1]+=me.dot(me),xe[0]+=he.dot(pe),xe[1]+=me.dot(pe)}var De=Me[0][0]*Me[1][1]-Me[1][0]*Me[0][1],Le,Pe;if(se(De)>K){var Ve=Me[0][0]*xe[1]-Me[1][0]*xe[0],Ue=xe[0]*Me[1][1]-xe[1]*Me[0][1];Le=Ue/De,Pe=Ve/De}else{var ge=Me[0][0]+Me[0][1],Ce=Me[1][0]+Me[1][1];Le=Pe=se(ge)>K?xe[0]/ge:se(Ce)>K?xe[1]/Ce:0}var Qe=ye.getDistance(fe),nt=K*Qe,i,ue;if(Le<nt||Pe<nt)Le=Pe=Qe/3;else{var Dt=ye.subtract(fe);i=U.normalize(Le),ue=Z.normalize(Pe),i.dot(Dt)-ue.dot(Dt)>Qe*Qe&&(Le=Pe=Qe/3,i=ue=null)}return[fe,fe.add(i||U.normalize(Le)),ye.add(ue||Z.normalize(Pe)),ye]},reparameterize:function(f,w,B,U){for(var Z=f;Z<=w;Z++)B[Z-f]=this.findRoot(U,this.points[Z],B[Z-f]);for(var Z=1,K=B.length;Z<K;Z++)if(B[Z]<=B[Z-1])return!1;return!0},findRoot:function(f,w,B){for(var U=[],Z=[],K=0;K<=2;K++)U[K]=f[K+1].subtract(f[K]).multiply(3);for(var K=0;K<=1;K++)Z[K]=U[K+1].subtract(U[K]).multiply(2);var se=this.evaluate(3,f,B),oe=this.evaluate(2,U,B),fe=this.evaluate(1,Z,B),ye=se.subtract(w),Me=oe.dot(oe)+ye.dot(fe);return ee.isMachineZero(Me)?B:B-ye.dot(oe)/Me},evaluate:function(f,w,B){for(var U=w.slice(),Z=1;Z<=f;Z++)for(var K=0;K<=f-Z;K++)U[K]=U[K].multiply(1-B).add(U[K+1].multiply(B));return U[0]},chordLengthParameterize:function(f,w){for(var B=[0],U=f+1;U<=w;U++)B[U-f]=B[U-f-1]+this.points[U].getDistance(this.points[U-1]);for(var U=1,Z=w-f;U<=Z;U++)B[U]/=B[Z];return B},findMaxError:function(f,w,B,U){for(var Z=Math.floor((w-f+1)/2),K=0,se=f+1;se<w;se++){var oe=this.evaluate(3,B,U[se-f]),fe=oe.subtract(this.points[se]),ye=fe.x*fe.x+fe.y*fe.y;ye>=K&&(K=ye,Z=se)}return{error:K,index:Z}}}),Pi=Te.extend({_class:"TextItem",_applyMatrix:!1,_canApplyMatrix:!1,_serializeFields:{content:null},_boundsOptions:{stroke:!1,handle:!1},initialize:function(w){this._content="",this._lines=[];var B=w&&g.isPlainObject(w)&&w.x===n&&w.y===n;this._initialize(B&&w,!B&&le.read(arguments))},_equals:function(f){return this._content===f._content},copyContent:function(f){this.setContent(f._content)},getContent:function(){return this._content},setContent:function(f){this._content=""+f,this._lines=this._content.split(/\r\n|\n|\r/mg),this._changed(521)},isEmpty:function(){return!this._content},getCharacterStyle:"#getStyle",setCharacterStyle:"#setStyle",getParagraphStyle:"#getStyle",setParagraphStyle:"#setStyle"}),dn=Pi.extend({_class:"PointText",initialize:function(){Pi.apply(this,arguments)},getPoint:function(){var f=this._matrix.getTranslation();return new je(f.x,f.y,this,"setPoint")},setPoint:function(){var f=le.read(arguments);this.translate(f.subtract(this._matrix.getTranslation()))},_draw:function(f,w,B){if(this._content){this._setStyles(f,w,B);var U=this._lines,Z=this._style,K=Z.hasFill(),se=Z.hasStroke(),oe=Z.getLeading(),fe=f.shadowColor;f.font=Z.getFontStyle(),f.textAlign=Z.getJustification();for(var ye=0,Me=U.length;ye<Me;ye++){f.shadowColor=fe;var xe=U[ye];K&&(f.fillText(xe,0,0),f.shadowColor="rgba(0,0,0,0)"),se&&f.strokeText(xe,0,0),f.translate(0,oe)}}},_getBounds:function(f,w){var B=this._style,U=this._lines,Z=U.length,K=B.getJustification(),se=B.getLeading(),oe=this.getView().getTextWidth(B.getFontStyle(),U),fe=0;K!=="left"&&(fe-=oe/(K==="center"?2:1));var ye=new Ke(fe,Z?-.75*se:0,oe,Z*se);return f?f._transformBounds(ye,ye):ye}}),sn=g.extend(new function(){var f={gray:["gray"],rgb:["red","green","blue"],hsb:["hue","saturation","brightness"],hsl:["hue","saturation","lightness"],gradient:["gradient","origin","destination","highlight"]},w={},B={transparent:[0,0,0,0]},U;function Z(oe){var fe=oe.match(/^#([\da-f]{2})([\da-f]{2})([\da-f]{2})([\da-f]{2})?$/i)||oe.match(/^#([\da-f])([\da-f])([\da-f])([\da-f])?$/i),ye="rgb",Me;if(fe){var xe=fe[4]?4:3;Me=new Array(xe);for(var ke=0;ke<xe;ke++){var be=fe[ke+1];Me[ke]=parseInt(be.length==1?be+be:be,16)/255}}else if(fe=oe.match(/^(rgb|hsl)a?\((.*)\)$/)){ye=fe[1],Me=fe[2].trim().split(/[,\s]+/g);for(var Ne=ye==="hsl",ke=0,Re=Math.min(Me.length,4);ke<Re;ke++){var Fe=Me[ke],be=parseFloat(Fe);if(Ne)if(ke===0){var de=Fe.match(/([a-z]*)$/)[1];be*={turn:360,rad:180/Math.PI,grad:.9}[de]||1}else ke<3&&(be/=100);else ke<3&&(be/=/%$/.test(Fe)?100:255);Me[ke]=be}}else{var Ae=B[oe];if(!Ae)if(l){U||(U=cn.getContext(1,1,{willReadFrequently:!0}),U.globalCompositeOperation="copy"),U.fillStyle="rgba(0,0,0,0)",U.fillStyle=oe,U.fillRect(0,0,1,1);var W=U.getImageData(0,0,1,1).data;Ae=B[oe]=[W[0]/255,W[1]/255,W[2]/255]}else Ae=[0,0,0];Me=Ae.slice()}return[ye,Me]}var K=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]],se={"rgb-hsb":function(oe,fe,ye){var Me=Math.max(oe,fe,ye),xe=Math.min(oe,fe,ye),ke=Me-xe,be=ke===0?0:(Me==oe?(fe-ye)/ke+(fe<ye?6:0):Me==fe?(ye-oe)/ke+2:(oe-fe)/ke+4)*60;return[be,Me===0?0:ke/Me,Me]},"hsb-rgb":function(oe,fe,ye){oe=(oe/60%6+6)%6;var xe=Math.floor(oe),Me=oe-xe,xe=K[xe],ke=[ye,ye*(1-fe),ye*(1-fe*Me),ye*(1-fe*(1-Me))];return[ke[xe[0]],ke[xe[1]],ke[xe[2]]]},"rgb-hsl":function(oe,fe,ye){var Me=Math.max(oe,fe,ye),xe=Math.min(oe,fe,ye),ke=Me-xe,be=ke===0,Ne=be?0:(Me==oe?(fe-ye)/ke+(fe<ye?6:0):Me==fe?(ye-oe)/ke+2:(oe-fe)/ke+4)*60,Re=(Me+xe)/2,Fe=be?0:Re<.5?ke/(Me+xe):ke/(2-Me-xe);return[Ne,Fe,Re]},"hsl-rgb":function(oe,fe,ye){if(oe=(oe/360%1+1)%1,fe===0)return[ye,ye,ye];for(var Me=[oe+1/3,oe,oe-1/3],xe=ye<.5?ye*(1+fe):ye+fe-ye*fe,ke=2*ye-xe,be=[],Ne=0;Ne<3;Ne++){var Re=Me[Ne];Re<0&&(Re+=1),Re>1&&(Re-=1),be[Ne]=6*Re<1?ke+(xe-ke)*6*Re:2*Re<1?xe:3*Re<2?ke+(xe-ke)*(2/3-Re)*6:ke}return be},"rgb-gray":function(oe,fe,ye){return[oe*.2989+fe*.587+ye*.114]},"gray-rgb":function(oe){return[oe,oe,oe]},"gray-hsb":function(oe){return[0,0,oe]},"gray-hsl":function(oe){return[0,0,oe]},"gradient-rgb":function(){return[]},"rgb-gradient":function(){return[]}};return g.each(f,function(oe,fe){w[fe]=[],g.each(oe,function(ye,Me){var xe=g.capitalize(ye),ke=/^(hue|saturation)$/.test(ye),be=w[fe][Me]=fe==="gradient"?ye==="gradient"?function(Ne){var Re=this._components[0];return Ne=Bn.read(Array.isArray(Ne)?Ne:arguments,0,{readNull:!0}),Re!==Ne&&(Re&&Re._removeOwner(this),Ne&&Ne._addOwner(this)),Ne}:function(){return le.read(arguments,0,{readNull:ye==="highlight",clone:!0})}:function(Ne){return Ne==null||isNaN(Ne)?0:+Ne};this["get"+xe]=function(){return this._type===fe||ke&&/^hs[bl]$/.test(this._type)?this._components[Me]:this._convert(fe)[Me]},this["set"+xe]=function(Ne){this._type!==fe&&!(ke&&/^hs[bl]$/.test(this._type))&&(this._components=this._convert(fe),this._properties=f[fe],this._type=fe),this._components[Me]=be.call(this,Ne),this._changed()}},this)},{_class:"Color",_readIndex:!0,initialize:function oe(fe){var ye=arguments,Me=this.__read,xe=0,ke,be,Ne,Re;Array.isArray(fe)&&(ye=fe,fe=ye[0]);var Fe=fe!=null&&typeof fe;if(Fe==="string"&&fe in f&&(ke=fe,fe=ye[1],Array.isArray(fe)?(be=fe,Ne=ye[2]):(Me&&(xe=1),ye=g.slice(ye,1),Fe=typeof fe)),!be){if(Re=Fe==="number"?ye:Fe==="object"&&fe.length!=null?fe:null,Re){ke||(ke=Re.length>=3?"rgb":"gray");var de=f[ke].length;Ne=Re[de],Me&&(xe+=Re===arguments?de+(Ne!=null?1:0):1),Re.length>de&&(Re=g.slice(Re,0,de))}else if(Fe==="string"){var Ae=Z(fe);ke=Ae[0],be=Ae[1],be.length===4&&(Ne=be[3],be.length--)}else if(Fe==="object")if(fe.constructor===oe){if(ke=fe._type,be=fe._components.slice(),Ne=fe._alpha,ke==="gradient")for(var W=1,ie=be.length;W<ie;W++){var he=be[W];he&&(be[W]=he.clone())}}else if(fe.constructor===Bn)ke="gradient",Re=ye;else{ke="hue"in fe?"lightness"in fe?"hsl":"hsb":"gradient"in fe||"stops"in fe||"radial"in fe?"gradient":"gray"in fe?"gray":"rgb";var me=f[ke],pe=w[ke];this._components=be=[];for(var W=0,ie=me.length;W<ie;W++){var De=fe[me[W]];De==null&&!W&&ke==="gradient"&&"stops"in fe&&(De={stops:fe.stops,radial:fe.radial}),De=pe[W].call(this,De),De!=null&&(be[W]=De)}Ne=fe.alpha}Me&&ke&&(xe=1)}if(this._type=ke||"rgb",!be){this._components=be=[];for(var pe=w[this._type],W=0,ie=pe.length;W<ie;W++){var De=pe[W].call(this,Re&&Re[W]);De!=null&&(be[W]=De)}}return this._components=be,this._properties=f[this._type],this._alpha=Ne,Me&&(this.__read=xe),this},set:"#initialize",_serialize:function(oe,fe){var ye=this.getComponents();return g.serialize(/^(gray|rgb)$/.test(this._type)?ye:[this._type].concat(ye),oe,!0,fe)},_changed:function(){this._canvasStyle=null,this._owner&&(this._setter?this._owner[this._setter](this):this._owner._changed(129))},_convert:function(oe){var fe;return this._type===oe?this._components.slice():(fe=se[this._type+"-"+oe])?fe.apply(this,this._components):se["rgb-"+oe].apply(this,se[this._type+"-rgb"].apply(this,this._components))},convert:function(oe){return new sn(oe,this._convert(oe),this._alpha)},getType:function(){return this._type},setType:function(oe){this._components=this._convert(oe),this._properties=f[oe],this._type=oe},getComponents:function(){var oe=this._components.slice();return this._alpha!=null&&oe.push(this._alpha),oe},getAlpha:function(){return this._alpha!=null?this._alpha:1},setAlpha:function(oe){this._alpha=oe==null?null:Math.min(Math.max(oe,0),1),this._changed()},hasAlpha:function(){return this._alpha!=null},equals:function(oe){var fe=g.isPlainValue(oe,!0)?sn.read(arguments):oe;return fe===this||fe&&this._class===fe._class&&this._type===fe._type&&this.getAlpha()===fe.getAlpha()&&g.equals(this._components,fe._components)||!1},toString:function(){for(var oe=this._properties,fe=[],ye=this._type==="gradient",Me=re.instance,xe=0,ke=oe.length;xe<ke;xe++){var be=this._components[xe];be!=null&&fe.push(oe[xe]+": "+(ye?be:Me.number(be)))}return this._alpha!=null&&fe.push("alpha: "+Me.number(this._alpha)),"{ "+fe.join(", ")+" }"},toCSS:function(oe){var fe=this._convert("rgb"),ye=oe||this._alpha==null?1:this._alpha;function Me(xe){return Math.round((xe<0?0:xe>1?1:xe)*255)}return fe=[Me(fe[0]),Me(fe[1]),Me(fe[2])],ye<1&&fe.push(ye<0?0:ye),oe?"#"+((1<<24)+(fe[0]<<16)+(fe[1]<<8)+fe[2]).toString(16).slice(1):(fe.length==4?"rgba(":"rgb(")+fe.join(",")+")"},toCanvasStyle:function(oe,fe){if(this._canvasStyle)return this._canvasStyle;if(this._type!=="gradient")return this._canvasStyle=this.toCSS();var ye=this._components,Me=ye[0],xe=Me._stops,ke=ye[1],be=ye[2],Ne=ye[3],Re=fe&&fe.inverted(),Fe;if(Re&&(ke=Re._transformPoint(ke),be=Re._transformPoint(be),Ne&&(Ne=Re._transformPoint(Ne))),Me._radial){var de=be.getDistance(ke);if(Ne){var Ae=Ne.subtract(ke);Ae.getLength()>de&&(Ne=ke.add(Ae.normalize(de-.1)))}var W=Ne||ke;Fe=oe.createRadialGradient(W.x,W.y,0,ke.x,ke.y,de)}else Fe=oe.createLinearGradient(ke.x,ke.y,be.x,be.y);for(var ie=0,he=xe.length;ie<he;ie++){var me=xe[ie],pe=me._offset;Fe.addColorStop(pe??ie/(he-1),me._color.toCanvasStyle())}return this._canvasStyle=Fe},transform:function(oe){if(this._type==="gradient"){for(var fe=this._components,ye=1,Me=fe.length;ye<Me;ye++){var xe=fe[ye];oe._transformPoint(xe,xe,!0)}this._changed()}},statics:{_types:f,random:function(){var oe=Math.random;return new sn(oe(),oe(),oe())},_setOwner:function(oe,fe,ye){return oe&&(oe._owner&&fe&&oe._owner!==fe&&(oe=oe.clone()),!oe._owner^!fe&&(oe._owner=fe||null,oe._setter=ye||null)),oe}}})},new function(){var f={add:function(w,B){return w+B},subtract:function(w,B){return w-B},multiply:function(w,B){return w*B},divide:function(w,B){return w/B}};return g.each(f,function(w,B){this[B]=function(U){U=sn.read(arguments);for(var Z=this._type,K=this._components,se=U._convert(Z),oe=0,fe=K.length;oe<fe;oe++)se[oe]=w(K[oe],se[oe]);return new sn(Z,se,this._alpha!=null?w(this._alpha,U.getAlpha()):null)}},{})}),Bn=g.extend({_class:"Gradient",initialize:function(w,B){this._id=ce.get(),w&&g.isPlainObject(w)&&(this.set(w),w=B=null),this._stops==null&&this.setStops(w||["white","black"]),this._radial==null&&this.setRadial(typeof B=="string"&&B==="radial"||B||!1)},_serialize:function(f,w){return w.add(this,function(){return g.serialize([this._stops,this._radial],f,!0,w)})},_changed:function(){for(var f=0,w=this._owners&&this._owners.length;f<w;f++)this._owners[f]._changed()},_addOwner:function(f){this._owners||(this._owners=[]),this._owners.push(f)},_removeOwner:function(f){var w=this._owners?this._owners.indexOf(f):-1;w!=-1&&(this._owners.splice(w,1),this._owners.length||(this._owners=n))},clone:function(){for(var f=[],w=0,B=this._stops.length;w<B;w++)f[w]=this._stops[w].clone();return new Bn(f,this._radial)},getStops:function(){return this._stops},setStops:function(f){if(f.length<2)throw new Error("Gradient stop list needs to contain at least two stops.");var w=this._stops;if(w)for(var B=0,U=w.length;B<U;B++)w[B]._owner=n;w=this._stops=fi.readList(f,0,{clone:!0});for(var B=0,U=w.length;B<U;B++)w[B]._owner=this;this._changed()},getRadial:function(){return this._radial},setRadial:function(f){this._radial=f,this._changed()},equals:function(f){if(f===this)return!0;if(f&&this._class===f._class){var w=this._stops,B=f._stops,U=w.length;if(U===B.length){for(var Z=0;Z<U;Z++)if(!w[Z].equals(B[Z]))return!1;return!0}}return!1}}),fi=g.extend({_class:"GradientStop",initialize:function(w,B){var U=w,Z=B;typeof w=="object"&&B===n&&(Array.isArray(w)&&typeof w[0]!="number"?(U=w[0],Z=w[1]):("color"in w||"offset"in w||"rampPoint"in w)&&(U=w.color,Z=w.offset||w.rampPoint||0)),this.setColor(U),this.setOffset(Z)},clone:function(){return new fi(this._color.clone(),this._offset)},_serialize:function(f,w){var B=this._color,U=this._offset;return g.serialize(U==null?[B]:[B,U],f,!0,w)},_changed:function(){this._owner&&this._owner._changed(129)},getOffset:function(){return this._offset},setOffset:function(f){this._offset=f,this._changed()},getRampPoint:"#getOffset",setRampPoint:"#setOffset",getColor:function(){return this._color},setColor:function(){sn._setOwner(this._color,null),this._color=sn._setOwner(sn.read(arguments,0),this,"setColor"),this._changed()},equals:function(f){return f===this||f&&this._class===f._class&&this._color.equals(f._color)&&this._offset==f._offset||!1}}),$i=g.extend(new function(){var f={fillColor:null,fillRule:"nonzero",strokeColor:null,strokeWidth:1,strokeCap:"butt",strokeJoin:"miter",strokeScaling:!0,miterLimit:10,dashOffset:0,dashArray:[],shadowColor:null,shadowBlur:0,shadowOffset:new le,selectedColor:null},w=g.set({},f,{fontFamily:"sans-serif",fontWeight:"normal",fontSize:12,leading:null,justification:"left"}),B=g.set({},w,{fillColor:new sn}),U={strokeWidth:193,strokeCap:193,strokeJoin:193,strokeScaling:201,miterLimit:193,fontFamily:9,fontWeight:9,fontSize:9,font:9,leading:9,justification:9},Z={beans:!0},K={_class:"Style",beans:!0,initialize:function(oe,fe,ye){this._values={},this._owner=fe,this._project=fe&&fe._project||ye||pn.project,this._defaults=!fe||fe instanceof Ai?w:fe instanceof Pi?B:f,oe&&this.set(oe)}};return g.each(w,function(se,oe){var fe=/Color$/.test(oe),ye=oe==="shadowOffset",Me=g.capitalize(oe),xe=U[oe],ke="set"+Me,be="get"+Me;K[ke]=function(Ne){var Re=this._owner,Fe=Re&&Re._children,de=Fe&&Fe.length>0&&!(Re instanceof Yt);if(de)for(var Ae=0,W=Fe.length;Ae<W;Ae++)Fe[Ae]._style[ke](Ne);if((oe==="selectedColor"||!de)&&oe in this._defaults){var ie=this._values[oe];ie!==Ne&&(fe&&(ie&&(sn._setOwner(ie,null),ie._canvasStyle=null),Ne&&Ne.constructor===sn&&(Ne=sn._setOwner(Ne,Re,de&&ke))),this._values[oe]=Ne,Re&&Re._changed(xe||129))}},K[be]=function(Ne){var Re=this._owner,Fe=Re&&Re._children,de=Fe&&Fe.length>0&&!(Re instanceof Yt),Ae;if(de&&!Ne)for(var W=0,ie=Fe.length;W<ie;W++){var he=Fe[W]._style[be]();if(!W)Ae=he;else if(!g.equals(Ae,he))return n}else if(oe in this._defaults){var Ae=this._values[oe];if(Ae===n)Ae=this._defaults[oe],Ae&&Ae.clone&&(Ae=Ae.clone());else{var me=fe?sn:ye?le:null;me&&!(Ae&&Ae.constructor===me)&&(this._values[oe]=Ae=me.read([Ae],0,{readNull:!0,clone:!0}))}}return Ae&&fe&&(Ae=sn._setOwner(Ae,Re,de&&ke)),Ae},Z[be]=function(Ne){return this._style[be](Ne)},Z[ke]=function(Ne){this._style[ke](Ne)}}),g.each({Font:"FontFamily",WindingRule:"FillRule"},function(se,oe){var fe="get"+oe,ye="set"+oe;K[fe]=Z[fe]="#get"+se,K[ye]=Z[ye]="#set"+se}),Te.inject(Z),K},{set:function(f){var w=f instanceof $i,B=w?f._values:f;if(B){for(var U in B)if(U in this._defaults){var Z=B[U];this[U]=Z&&w&&Z.clone?Z.clone():Z}}},equals:function(f){function w(B,U,Z){var K=B._values,se=U._values,oe=U._defaults;for(var fe in K){var ye=K[fe],Me=se[fe];if(!(Z&&fe in se)&&!g.equals(ye,Me===n?oe[fe]:Me))return!1}return!0}return f===this||f&&this._class===f._class&&w(this,f)&&w(f,this,!0)||!1},_dispose:function(){var f;f=this.getFillColor(),f&&(f._canvasStyle=null),f=this.getStrokeColor(),f&&(f._canvasStyle=null),f=this.getShadowColor(),f&&(f._canvasStyle=null)},hasFill:function(){var f=this.getFillColor();return!!f&&f.alpha>0},hasStroke:function(){var f=this.getStrokeColor();return!!f&&f.alpha>0&&this.getStrokeWidth()>0},hasShadow:function(){var f=this.getShadowColor();return!!f&&f.alpha>0&&(this.getShadowBlur()>0||!this.getShadowOffset().isZero())},getView:function(){return this._project._view},getFontStyle:function(){var f=this.getFontSize();return this.getFontWeight()+" "+f+(/[a-z]/i.test(f+"")?" ":"px ")+this.getFontFamily()},getFont:"#getFontFamily",setFont:"#setFontFamily",getLeading:function f(){var w=f.base.call(this),B=this.getFontSize();return/pt|em|%|px/.test(B)&&(B=this.getView().getPixelSize(B)),w??B*1.2}}),li=new function(){function f(w,B,U,Z){for(var K=["","webkit","moz","Moz","ms","o"],se=B[0].toUpperCase()+B.substring(1),oe=0;oe<6;oe++){var fe=K[oe],ye=fe?fe+se:B;if(ye in w){if(U)w[ye]=Z;else return w[ye];break}}}return{getStyles:function(w){var B=w&&w.nodeType!==9?w.ownerDocument:w,U=B&&B.defaultView;return U&&U.getComputedStyle(w,"")},getBounds:function(w,B){var U=w.ownerDocument,Z=U.body,K=U.documentElement,se;try{se=w.getBoundingClientRect()}catch{se={left:0,top:0,width:0,height:0}}var oe=se.left-(K.clientLeft||Z.clientLeft||0),fe=se.top-(K.clientTop||Z.clientTop||0);if(!B){var ye=U.defaultView;oe+=ye.pageXOffset||K.scrollLeft||Z.scrollLeft,fe+=ye.pageYOffset||K.scrollTop||Z.scrollTop}return new Ke(oe,fe,se.width,se.height)},getViewportBounds:function(w){var B=w.ownerDocument,U=B.defaultView,Z=B.documentElement;return new Ke(0,0,U.innerWidth||Z.clientWidth,U.innerHeight||Z.clientHeight)},getOffset:function(w,B){return li.getBounds(w,B).getPoint()},getSize:function(w){return li.getBounds(w,!0).getSize()},isInvisible:function(w){return li.getSize(w).equals(new Je(0,0))},isInView:function(w){return!li.isInvisible(w)&&li.getViewportBounds(w).intersects(li.getBounds(w,!0))},isInserted:function(w){return m.body.contains(w)},getPrefixed:function(w,B){return w&&f(w,B)},setPrefixed:function(w,B,U){if(typeof B=="object")for(var Z in B)f(w,Z,!0,B[Z]);else f(w,B,!0,U)}}},Li={add:function(f,w){if(f)for(var B in w)for(var U=w[B],Z=B.split(/[\s,]+/g),K=0,se=Z.length;K<se;K++){var oe=Z[K],fe=f===m&&(oe==="touchstart"||oe==="touchmove")?{passive:!1}:!1;f.addEventListener(oe,U,fe)}},remove:function(f,w){if(f)for(var B in w)for(var U=w[B],Z=B.split(/[\s,]+/g),K=0,se=Z.length;K<se;K++)f.removeEventListener(Z[K],U,!1)},getPoint:function(f){var w=f.targetTouches?f.targetTouches.length?f.targetTouches[0]:f.changedTouches[0]:f;return new le(w.pageX||w.clientX+m.documentElement.scrollLeft,w.pageY||w.clientY+m.documentElement.scrollTop)},getTarget:function(f){return f.target||f.srcElement},getRelatedTarget:function(f){return f.relatedTarget||f.toElement},getOffset:function(f,w){return Li.getPoint(f).subtract(li.getOffset(w||Li.getTarget(f)))}};Li.requestAnimationFrame=new function(){var f=li.getPrefixed(l,"requestAnimationFrame"),w=!1,B=[],U;function Z(){var K=B;B=[];for(var se=0,oe=K.length;se<oe;se++)K[se]();w=f&&B.length,w&&f(Z)}return function(K){B.push(K),f?w||(f(Z),w=!0):U||(U=setInterval(Z,1e3/60))}};var Ji=g.extend(P,{_class:"View",initialize:function f(w,B){function U(xe){return B[xe]||parseInt(B.getAttribute(xe),10)}function Z(){var xe=li.getSize(B);return xe.isNaN()||xe.isZero()?new Je(U("width"),U("height")):xe}var K;if(l&&B){this._id=B.getAttribute("id"),this._id==null&&B.setAttribute("id",this._id="paper-view-"+f._id++),Li.add(B,this._viewEvents);var se="none";if(li.setPrefixed(B.style,{userDrag:se,userSelect:se,touchCallout:se,contentZooming:se,tapHighlightColor:"rgba(0,0,0,0)"}),u.hasAttribute(B,"resize")){var oe=this;Li.add(l,this._windowEvents={resize:function(){oe.setViewSize(Z())}})}if(K=Z(),u.hasAttribute(B,"stats")&&typeof Stats<"u"){this._stats=new Stats;var fe=this._stats.domElement,ye=fe.style,Me=li.getOffset(B);ye.position="absolute",ye.left=Me.x+"px",ye.top=Me.y+"px",m.body.appendChild(fe)}}else K=new Je(B),B=null;this._project=w,this._scope=w._scope,this._element=B,this._pixelRatio||(this._pixelRatio=l&&l.devicePixelRatio||1),this._setElementSize(K.width,K.height),this._viewSize=K,f._views.push(this),f._viewsById[this._id]=this,(this._matrix=new gt)._owner=this,f._focused||(f._focused=this),this._frameItems={},this._frameItemCount=0,this._itemEvents={native:{},virtual:{}},this._autoUpdate=!pn.agent.node,this._needsUpdate=!1},remove:function(){if(!this._project)return!1;Ji._focused===this&&(Ji._focused=null),Ji._views.splice(Ji._views.indexOf(this),1),delete Ji._viewsById[this._id];var f=this._project;return f._view===this&&(f._view=null),Li.remove(this._element,this._viewEvents),Li.remove(l,this._windowEvents),this._element=this._project=null,this.off("frame"),this._animate=!1,this._frameItems={},!0},_events:g.each(Te._itemHandlers.concat(["onResize","onKeyDown","onKeyUp"]),function(f){this[f]={}},{onFrame:{install:function(){this.play()},uninstall:function(){this.pause()}}}),_animate:!1,_time:0,_count:0,getAutoUpdate:function(){return this._autoUpdate},setAutoUpdate:function(f){this._autoUpdate=f,f&&this.requestUpdate()},update:function(){},draw:function(){this.update()},requestUpdate:function(){if(!this._requested){var f=this;Li.requestAnimationFrame(function(){if(f._requested=!1,f._animate){f.requestUpdate();var w=f._element;(!li.getPrefixed(m,"hidden")||u.getAttribute(w,"keepalive")==="true")&&li.isInView(w)&&f._handleFrame()}f._autoUpdate&&f.update()}),this._requested=!0}},play:function(){this._animate=!0,this.requestUpdate()},pause:function(){this._animate=!1},_handleFrame:function(){pn=this._scope;var f=Date.now()/1e3,w=this._last?f-this._last:0;this._last=f,this.emit("frame",new g({delta:w,time:this._time+=w,count:this._count++})),this._stats&&this._stats.update()},_animateItem:function(f,w){var B=this._frameItems;w?(B[f._id]={item:f,time:0,count:0},++this._frameItemCount===1&&this.on("frame",this._handleFrameItems)):(delete B[f._id],--this._frameItemCount===0&&this.off("frame",this._handleFrameItems))},_handleFrameItems:function(f){for(var w in this._frameItems){var B=this._frameItems[w];B.item.emit("frame",new g(f,{time:B.time+=f.delta,count:B.count++}))}},_changed:function(){this._project._changed(4097),this._bounds=this._decomposed=n},getElement:function(){return this._element},getPixelRatio:function(){return this._pixelRatio},getResolution:function(){return this._pixelRatio*72},getViewSize:function(){var f=this._viewSize;return new Xe(f.width,f.height,this,"setViewSize")},setViewSize:function(){var f=Je.read(arguments),w=f.subtract(this._viewSize);w.isZero()||(this._setElementSize(f.width,f.height),this._viewSize.set(f),this._changed(),this.emit("resize",{size:f,delta:w}),this._autoUpdate&&this.update())},_setElementSize:function(f,w){var B=this._element;B&&(B.width!==f&&(B.width=f),B.height!==w&&(B.height=w))},getBounds:function(){return this._bounds||(this._bounds=this._matrix.inverted()._transformBounds(new Ke(new le,this._viewSize))),this._bounds},getSize:function(){return this.getBounds().getSize()},isVisible:function(){return li.isInView(this._element)},isInserted:function(){return li.isInserted(this._element)},getPixelSize:function(f){var w=this._element,B;if(w){var U=w.parentNode,Z=m.createElement("div");Z.style.fontSize=f,U.appendChild(Z),B=parseFloat(li.getStyles(Z).fontSize),U.removeChild(Z)}else B=parseFloat(B);return B},getTextWidth:function(f,w){return 0}},g.each(["rotate","scale","shear","skew"],function(f){var w=f==="rotate";this[f]=function(){var B=arguments,U=(w?g:le).read(B),Z=le.read(B,0,{readNull:!0});return this.transform(new gt()[f](U,Z||this.getCenter(!0)))}},{_decompose:function(){return this._decomposed||(this._decomposed=this._matrix.decompose())},translate:function(){var f=new gt;return this.transform(f.translate.apply(f,arguments))},getCenter:function(){return this.getBounds().getCenter()},setCenter:function(){var f=le.read(arguments);this.translate(this.getCenter().subtract(f))},getZoom:function(){var f=this._decompose().scaling;return(f.x+f.y)/2},setZoom:function(f){this.transform(new gt().scale(f/this.getZoom(),this.getCenter()))},getRotation:function(){return this._decompose().rotation},setRotation:function(f){var w=this.getRotation();w!=null&&f!=null&&this.rotate(f-w)},getScaling:function(){var f=this._decompose().scaling;return new je(f.x,f.y,this,"setScaling")},setScaling:function(){var f=this.getScaling(),w=le.read(arguments,0,{clone:!0,readNull:!0});f&&w&&this.scale(w.x/f.x,w.y/f.y)},getMatrix:function(){return this._matrix},setMatrix:function(){var f=this._matrix;f.set.apply(f,arguments)},transform:function(f){this._matrix.append(f)},scrollBy:function(){this.translate(le.read(arguments).negate())}}),{projectToView:function(){return this._matrix._transformPoint(le.read(arguments))},viewToProject:function(){return this._matrix._inverseTransform(le.read(arguments))},getEventPoint:function(f){return this.viewToProject(Li.getOffset(f,this._element))}},{statics:{_views:[],_viewsById:{},_id:0,create:function(f,w){m&&typeof w=="string"&&(w=m.getElementById(w));var B=l?wi:Ji;return new B(f,w)}}},new function(){if(!l)return;var f,w,B=!1,U=!1;function Z(Ue){var ge=Li.getTarget(Ue);return ge.getAttribute&&Ji._viewsById[ge.getAttribute("id")]}function K(){var Ue=Ji._focused;if(!Ue||!Ue.isVisible()){for(var ge=0,Ce=Ji._views.length;ge<Ce;ge++)if((Ue=Ji._views[ge]).isVisible()){Ji._focused=w=Ue;break}}}function se(Ue,ge,Ce){Ue._handleMouseEvent("mousemove",ge,Ce)}var oe=l.navigator,fe,ye,Me;oe.pointerEnabled||oe.msPointerEnabled?(fe="pointerdown MSPointerDown",ye="pointermove MSPointerMove",Me="pointerup pointercancel MSPointerUp MSPointerCancel"):(fe="touchstart",ye="touchmove",Me="touchend touchcancel","ontouchstart"in l&&oe.userAgent.match(/mobile|tablet|ip(ad|hone|od)|android|silk/i)||(fe+=" mousedown",ye+=" mousemove",Me+=" mouseup"));var xe={},ke={mouseout:function(Ue){var ge=Ji._focused,Ce=Li.getRelatedTarget(Ue);if(ge&&(!Ce||Ce.nodeName==="HTML")){var Qe=Li.getOffset(Ue,ge._element),nt=Qe.x,i=Math.abs,ue=i(nt),Dt=1<<25,Vt=ue-Dt;Qe.x=i(Vt)<ue?Vt*(nt<0?-1:1):nt,se(ge,Ue,ge.viewToProject(Qe))}},scroll:K};xe[fe]=function(Ue){var ge=Ji._focused=Z(Ue);B||(B=!0,ge._handleMouseEvent("mousedown",Ue))},ke[ye]=function(Ue){var ge=Ji._focused;if(!U){var Ce=Z(Ue);Ce?ge!==Ce&&(ge&&se(ge,Ue),f||(f=ge),ge=Ji._focused=w=Ce):w&&w===ge&&(f&&!f.isInserted()&&(f=null),ge=Ji._focused=f,f=null,K())}ge&&se(ge,Ue)},ke[fe]=function(){U=!0},ke[Me]=function(Ue){var ge=Ji._focused;ge&&B&&ge._handleMouseEvent("mouseup",Ue),U=B=!1},Li.add(m,ke),Li.add(l,{load:K});var be=!1,Ne=!1,Re={doubleclick:"click",mousedrag:"mousemove"},Fe=!1,de,Ae,W,ie,he,me,pe,De;function Le(Ue,ge,Ce,Qe,nt,i,ue){var Dt=!1,Vt;function Wt(It,Bt){if(It.responds(Bt)){if(Vt||(Vt=new Or(Bt,Qe,nt,ge||It,i?nt.subtract(i):null)),It.emit(Bt,Vt)&&(be=!0,Vt.prevented&&(Ne=!0),Vt.stopped))return Dt=!0}else{var hi=Re[Bt];if(hi)return Wt(It,hi)}}for(;Ue&&Ue!==ue&&!Wt(Ue,Ce);)Ue=Ue._parent;return Dt}function Pe(Ue,ge,Ce,Qe,nt,i){return Ue._project.removeOn(Ce),Ne=be=!1,he&&Le(he,null,Ce,Qe,nt,i)||ge&&ge!==he&&!ge.isDescendant(he)&&Le(ge,null,Ce==="mousedrag"?"mousemove":Ce,Qe,nt,i,he)||Le(Ue,he||ge||Ue,Ce,Qe,nt,i)}var Ve={mousedown:{mousedown:1,mousedrag:1,click:1,doubleclick:1},mouseup:{mouseup:1,mousedrag:1,click:1,doubleclick:1},mousemove:{mousedrag:1,mousemove:1,mouseenter:1,mouseleave:1}};return{_viewEvents:xe,_handleMouseEvent:function(Ue,ge,Ce){var Qe=this._itemEvents,nt=Qe.native[Ue],i=Ue==="mousemove",ue=this._scope.tool,Dt=this;function Vt(Ti){return Qe.virtual[Ti]||Dt.responds(Ti)||ue&&ue.responds(Ti)}i&&B&&Vt("mousedrag")&&(Ue="mousedrag"),Ce||(Ce=this.getEventPoint(ge));var Wt=this.getBounds().contains(Ce),It=nt&&Wt&&Dt._project.hitTest(Ce,{tolerance:0,fill:!0,stroke:!0}),Bt=It&&It.item||null,hi=!1,Zt={};if(Zt[Ue.substr(5)]=!0,nt&&Bt!==ie&&(ie&&Le(ie,null,"mouseleave",ge,Ce),Bt&&Le(Bt,null,"mouseenter",ge,Ce),ie=Bt),Fe^Wt&&(Le(this,null,Wt?"mouseenter":"mouseleave",ge,Ce),hi=!0),(Wt||Zt.drag)&&!Ce.equals(Ae)&&(Pe(this,Bt,i?Ue:"mousemove",ge,Ce,Ae),hi=!0),Fe=Wt,Zt.down&&Wt||Zt.up&&de){if(Pe(this,Bt,Ue,ge,Ce,de),Zt.down){if(De=Bt===me&&Date.now()-pe<300,W=me=Bt,!Ne&&Bt){for(var ei=Bt;ei&&!ei.responds("mousedrag");)ei=ei._parent;ei&&(he=Bt)}de=Ce}else Zt.up&&(!Ne&&Bt===W&&(pe=Date.now(),Pe(this,Bt,De?"doubleclick":"click",ge,Ce,de),De=!1),W=he=null);Fe=!1,hi=!0}Ae=Ce,hi&&ue&&(be=ue._handleMouseEvent(Ue,ge,Ce,Zt)||be),ge.cancelable!==!1&&(be&&!Zt.move||Zt.down&&Vt("mouseup"))&&ge.preventDefault()},_handleKeyEvent:function(Ue,ge,Ce,Qe){var nt=this._scope,i=nt.tool,ue;function Dt(Vt){Vt.responds(Ue)&&(pn=nt,Vt.emit(Ue,ue=ue||new kn(Ue,ge,Ce,Qe)))}this.isVisible()&&(Dt(this),i&&i.responds(Ue)&&Dt(i))},_countItemEvent:function(Ue,ge){var Ce=this._itemEvents,Qe=Ce.native,nt=Ce.virtual;for(var i in Ve)Qe[i]=(Qe[i]||0)+(Ve[i][Ue]||0)*ge;nt[Ue]=(nt[Ue]||0)+ge},statics:{updateFocus:K,_resetState:function(){B=U=be=Fe=!1,f=w=de=Ae=W=ie=he=me=pe=De=null}}}}),wi=Ji.extend({_class:"CanvasView",initialize:function(w,B){if(!(B instanceof l.HTMLCanvasElement)){var U=Je.read(arguments,1);if(U.isZero())throw new Error("Cannot create CanvasView with the provided argument: "+g.slice(arguments,1));B=cn.getCanvas(U)}var Z=this._context=B.getContext("2d");if(Z.save(),this._pixelRatio=1,!/^off|false$/.test(u.getAttribute(B,"hidpi"))){var K=l.devicePixelRatio||1,se=li.getPrefixed(Z,"backingStorePixelRatio")||1;this._pixelRatio=K/se}Ji.call(this,w,B),this._needsUpdate=!0},remove:function f(){return this._context.restore(),f.base.call(this)},_setElementSize:function f(w,B){var U=this._pixelRatio;if(f.base.call(this,w*U,B*U),U!==1){var Z=this._element,K=this._context;if(!u.hasAttribute(Z,"resize")){var se=Z.style;se.width=w+"px",se.height=B+"px"}K.restore(),K.save(),K.scale(U,U)}},getContext:function(){return this._context},getPixelSize:function f(w){var B=pn.agent,U;if(B&&B.firefox)U=f.base.call(this,w);else{var Z=this._context,K=Z.font;Z.font=w+" serif",U=parseFloat(Z.font),Z.font=K}return U},getTextWidth:function(f,w){var B=this._context,U=B.font,Z=0;B.font=f;for(var K=0,se=w.length;K<se;K++)Z=Math.max(Z,B.measureText(w[K]).width);return B.font=U,Z},update:function(){if(!this._needsUpdate)return!1;var f=this._project,w=this._context,B=this._viewSize;return w.clearRect(0,0,B.width+1,B.height+1),f&&f.draw(w,this._matrix,this._pixelRatio),this._needsUpdate=!1,!0}}),ir=g.extend({_class:"Event",initialize:function(w){this.event=w,this.type=w&&w.type},prevented:!1,stopped:!1,preventDefault:function(){this.prevented=!0,this.event.preventDefault()},stopPropagation:function(){this.stopped=!0,this.event.stopPropagation()},stop:function(){this.stopPropagation(),this.preventDefault()},getTimeStamp:function(){return this.event.timeStamp},getModifiers:function(){return vr.modifiers}}),kn=ir.extend({_class:"KeyEvent",initialize:function(w,B,U,Z){this.type=w,this.event=B,this.key=U,this.character=Z},toString:function(){return"{ type: '"+this.type+"', key: '"+this.key+"', character: '"+this.character+"', modifiers: "+this.getModifiers()+" }"}}),vr=new function(){var f={"	":"tab"," ":"space","\b":"backspace","":"delete",Spacebar:"space",Del:"delete",Win:"meta",Esc:"escape"},w={tab:"	",space:" ",enter:"\r"},B={},U={},Z,K,se=new g({shift:!1,control:!1,alt:!1,meta:!1,capsLock:!1,space:!1}).inject({option:{get:function(){return this.alt}},command:{get:function(){var ye=pn&&pn.agent;return ye&&ye.mac?this.meta:this.control}}});function oe(ye){var Me=ye.key||ye.keyIdentifier;return Me=/^U\+/.test(Me)?String.fromCharCode(parseInt(Me.substr(2),16)):/^Arrow[A-Z]/.test(Me)?Me.substr(5):Me==="Unidentified"||Me===n?String.fromCharCode(ye.keyCode):Me,f[Me]||(Me.length>1?g.hyphenate(Me):Me.toLowerCase())}function fe(ye,Me,xe,ke){var be=Ji._focused,Ne;if(B[Me]=ye,ye?U[Me]=xe:delete U[Me],Me.length>1&&(Ne=g.camelize(Me))in se){se[Ne]=ye;var Re=pn&&pn.agent;if(Ne==="meta"&&Re&&Re.mac)if(ye)Z={};else{for(var Fe in Z)Fe in U&&fe(!1,Fe,Z[Fe],ke);Z=null}}else ye&&Z&&(Z[Me]=xe);be&&be._handleKeyEvent(ye?"keydown":"keyup",ke,Me,xe)}return Li.add(m,{keydown:function(ye){var Me=oe(ye),xe=pn&&pn.agent;Me.length>1||xe&&xe.chrome&&(ye.altKey||xe.mac&&ye.metaKey||!xe.mac&&ye.ctrlKey)?fe(!0,Me,w[Me]||(Me.length>1?"":Me),ye):K=Me},keypress:function(ye){if(K){var Me=oe(ye),xe=ye.charCode,ke=xe>=32?String.fromCharCode(xe):Me.length>1?"":Me;Me!==K&&(Me=ke.toLowerCase()),fe(!0,Me,ke,ye),K=null}},keyup:function(ye){var Me=oe(ye);Me in U&&fe(!1,Me,U[Me],ye)}}),Li.add(l,{blur:function(ye){for(var Me in U)fe(!1,Me,U[Me],ye)}}),{modifiers:se,isDown:function(ye){return!!B[ye]}}},Or=ir.extend({_class:"MouseEvent",initialize:function(w,B,U,Z,K){this.type=w,this.event=B,this.point=U,this.target=Z,this.delta=K},toString:function(){return"{ type: '"+this.type+"', point: "+this.point+", target: "+this.target+(this.delta?", delta: "+this.delta:"")+", modifiers: "+this.getModifiers()+" }"}}),Gi=ir.extend({_class:"ToolEvent",_item:null,initialize:function(w,B,U){this.tool=w,this.type=B,this.event=U},_choosePoint:function(f,w){return f||(w?w.clone():null)},getPoint:function(){return this._choosePoint(this._point,this.tool._point)},setPoint:function(f){this._point=f},getLastPoint:function(){return this._choosePoint(this._lastPoint,this.tool._lastPoint)},setLastPoint:function(f){this._lastPoint=f},getDownPoint:function(){return this._choosePoint(this._downPoint,this.tool._downPoint)},setDownPoint:function(f){this._downPoint=f},getMiddlePoint:function(){return!this._middlePoint&&this.tool._lastPoint?this.tool._point.add(this.tool._lastPoint).divide(2):this._middlePoint},setMiddlePoint:function(f){this._middlePoint=f},getDelta:function(){return!this._delta&&this.tool._lastPoint?this.tool._point.subtract(this.tool._lastPoint):this._delta},setDelta:function(f){this._delta=f},getCount:function(){return this.tool[/^mouse(down|up)$/.test(this.type)?"_downCount":"_moveCount"]},setCount:function(f){this.tool[/^mouse(down|up)$/.test(this.type)?"downCount":"count"]=f},getItem:function(){if(!this._item){var f=this.tool._scope.project.hitTest(this.getPoint());if(f){for(var w=f.item,B=w._parent;/^(Group|CompoundPath)$/.test(B._class);)w=B,B=B._parent;this._item=w}}return this._item},setItem:function(f){this._item=f},toString:function(){return"{ type: "+this.type+", point: "+this.getPoint()+", count: "+this.getCount()+", modifiers: "+this.getModifiers()+" }"}}),zn=Q.extend({_class:"Tool",_list:"tools",_reference:"tool",_events:["onMouseDown","onMouseUp","onMouseDrag","onMouseMove","onActivate","onDeactivate","onEditOptions","onKeyDown","onKeyUp"],initialize:function(w){Q.call(this),this._moveCount=-1,this._downCount=-1,this.set(w)},getMinDistance:function(){return this._minDistance},setMinDistance:function(f){this._minDistance=f,f!=null&&this._maxDistance!=null&&f>this._maxDistance&&(this._maxDistance=f)},getMaxDistance:function(){return this._maxDistance},setMaxDistance:function(f){this._maxDistance=f,this._minDistance!=null&&f!=null&&f<this._minDistance&&(this._minDistance=f)},getFixedDistance:function(){return this._minDistance==this._maxDistance?this._minDistance:null},setFixedDistance:function(f){this._minDistance=this._maxDistance=f},_handleMouseEvent:function(f,w,B,U){pn=this._scope,U.drag&&!this.responds(f)&&(f="mousemove");var Z=U.move||U.drag,K=this.responds(f),se=this.minDistance,oe=this.maxDistance,fe=!1,ye=this;function Me(ke,be){var Ne=B,Re=Z?ye._point:ye._downPoint||Ne;if(Z){if(ye._moveCount>=0&&Ne.equals(Re))return!1;if(Re&&(ke!=null||be!=null)){var Fe=Ne.subtract(Re),de=Fe.getLength();if(de<(ke||0))return!1;be&&(Ne=Re.add(Fe.normalize(Math.min(de,be))))}ye._moveCount++}return ye._point=Ne,ye._lastPoint=Re||Ne,U.down&&(ye._moveCount=-1,ye._downPoint=Ne,ye._downCount++),!0}function xe(){K&&(fe=ye.emit(f,new Gi(ye,f,w))||fe)}if(U.down)Me(),xe();else if(U.up)Me(null,oe),xe();else if(K)for(;Me(se,oe);)xe();return fe}}),Cs=g.extend(P,{_class:"Tween",statics:{easings:new g({linear:function(f){return f},easeInQuad:function(f){return f*f},easeOutQuad:function(f){return f*(2-f)},easeInOutQuad:function(f){return f<.5?2*f*f:-1+2*(2-f)*f},easeInCubic:function(f){return f*f*f},easeOutCubic:function(f){return--f*f*f+1},easeInOutCubic:function(f){return f<.5?4*f*f*f:(f-1)*(2*f-2)*(2*f-2)+1},easeInQuart:function(f){return f*f*f*f},easeOutQuart:function(f){return 1- --f*f*f*f},easeInOutQuart:function(f){return f<.5?8*f*f*f*f:1-8*--f*f*f*f},easeInQuint:function(f){return f*f*f*f*f},easeOutQuint:function(f){return 1+--f*f*f*f*f},easeInOutQuint:function(f){return f<.5?16*f*f*f*f*f:1+16*--f*f*f*f*f}})},initialize:function f(w,B,U,Z,K,se){this.object=w;var oe=typeof K,fe=oe==="function";this.type=fe?oe:oe==="string"?K:"linear",this.easing=fe?K:f.easings[this.type],this.duration=Z,this.running=!1,this._then=null,this._startTime=null;var ye=B||U;this._keys=ye?Object.keys(ye):[],this._parsedKeys=this._parseKeys(this._keys),this._from=ye&&this._getState(B),this._to=ye&&this._getState(U),se!==!1&&this.start()},then:function(f){return this._then=f,this},start:function(){return this._startTime=null,this.running=!0,this},stop:function(){return this.running=!1,this},update:function(f){if(this.running){f>=1&&(f=1,this.running=!1);for(var w=this.easing(f),B=this._keys,U=function(Me){return typeof Me=="function"?Me(w,f):Me},Z=0,K=B&&B.length;Z<K;Z++){var se=B[Z],oe=U(this._from[se]),fe=U(this._to[se]),ye=oe&&fe&&oe.__add&&fe.__add?fe.__subtract(oe).__multiply(w).__add(oe):(fe-oe)*w+oe;this._setProperty(this._parsedKeys[se],ye)}this.responds("update")&&this.emit("update",new g({progress:f,factor:w})),!this.running&&this._then&&this._then(this.object)}return this},_events:{onUpdate:{}},_handleFrame:function(f){var w=this._startTime,B=w?(f-w)/this.duration:0;w||(this._startTime=f),this.update(B)},_getState:function(f){for(var w=this._keys,B={},U=0,Z=w.length;U<Z;U++){var K=w[U],se=this._parsedKeys[K],oe=this._getProperty(se),fe;if(f){var ye=this._resolveValue(oe,f[K]);this._setProperty(se,ye),fe=this._getProperty(se),fe=fe&&fe.clone?fe.clone():fe,this._setProperty(se,oe)}else fe=oe&&oe.clone?oe.clone():oe;B[K]=fe}return B},_resolveValue:function(f,w){if(w){if(Array.isArray(w)&&w.length===2){var B=w[0];return B&&B.match&&B.match(/^[+\-\*\/]=/)?this._calculate(f,B[0],w[1]):w}else if(typeof w=="string"){var U=w.match(/^[+\-*/]=(.*)/);if(U){var Z=JSON.parse(U[1].replace(/(['"])?([a-zA-Z0-9_]+)(['"])?:/g,'"$2": '));return this._calculate(f,w[0],Z)}}}return w},_calculate:function(f,w,B){return pn.PaperScript.calculateBinary(f,w,B)},_parseKeys:function(f){for(var w={},B=0,U=f.length;B<U;B++){var Z=f[B],K=Z.replace(/\.([^.]*)/g,"/$1").replace(/\[['"]?([^'"\]]*)['"]?\]/g,"/$1");w[Z]=K.split("/")}return w},_getProperty:function(f,w){for(var B=this.object,U=0,Z=f.length-(w||0);U<Z&&B;U++)B=B[f[U]];return B},_setProperty:function(f,w){var B=this._getProperty(f,1);B&&(B[f[f.length-1]]=w)}}),Kt={request:function(f){var w=new t.XMLHttpRequest;return w.open((f.method||"get").toUpperCase(),f.url,g.pick(f.async,!0)),f.mimeType&&w.overrideMimeType(f.mimeType),w.onload=function(){var B=w.status;B===0||B===200?f.onLoad&&f.onLoad.call(w,w.responseText):w.onerror()},w.onerror=function(){var B=w.status,U='Could not load "'+f.url+'" (Status: '+B+")";if(f.onError)f.onError(U,B);else throw new Error(U)},w.send(null)}},cn=g.exports.CanvasProvider={canvases:[],getCanvas:function(f,w,B){if(!l)return null;var U,Z=!0;typeof f=="object"&&(w=f.height,f=f.width),this.canvases.length?U=this.canvases.pop():(U=m.createElement("canvas"),Z=!1);var K=U.getContext("2d",B||{});if(!K)throw new Error("Canvas "+U+" is unable to provide a 2D context.");return U.width===f&&U.height===w?Z&&K.clearRect(0,0,f+1,w+1):(U.width=f,U.height=w),K.save(),U},getContext:function(f,w,B){var U=this.getCanvas(f,w,B);return U?U.getContext("2d",B||{}):null},release:function(f){var w=f&&f.canvas?f.canvas:f;w&&w.getContext&&(w.getContext("2d").restore(),this.canvases.push(w))}},fr=new function(){var f=Math.min,w=Math.max,B=Math.abs,U,Z,K,se,oe,fe,ye,Me,xe,ke,be;function Ne(he,me,pe){return .2989*he+.587*me+.114*pe}function Re(he,me,pe,Pe){var Le=Pe-Ne(he,me,pe);xe=he+Le,ke=me+Le,be=pe+Le;var Pe=Ne(xe,ke,be),Ve=f(xe,ke,be),Ue=w(xe,ke,be);if(Ve<0){var ge=Pe-Ve;xe=Pe+(xe-Pe)*Pe/ge,ke=Pe+(ke-Pe)*Pe/ge,be=Pe+(be-Pe)*Pe/ge}if(Ue>255){var Ce=255-Pe,Qe=Ue-Pe;xe=Pe+(xe-Pe)*Ce/Qe,ke=Pe+(ke-Pe)*Ce/Qe,be=Pe+(be-Pe)*Ce/Qe}}function Fe(he,me,pe){return w(he,me,pe)-f(he,me,pe)}function de(he,me,pe,De){var Le=[he,me,pe],Pe=w(he,me,pe),Ve=f(he,me,pe),Ue;Ve=Ve===he?0:Ve===me?1:2,Pe=Pe===he?0:Pe===me?1:2,Ue=f(Ve,Pe)===0?w(Ve,Pe)===1?2:1:0,Le[Pe]>Le[Ve]?(Le[Ue]=(Le[Ue]-Le[Ve])*De/(Le[Pe]-Le[Ve]),Le[Pe]=De):Le[Ue]=Le[Pe]=0,Le[Ve]=0,xe=Le[0],ke=Le[1],be=Le[2]}var Ae={multiply:function(){xe=oe*U/255,ke=fe*Z/255,be=ye*K/255},screen:function(){xe=oe+U-oe*U/255,ke=fe+Z-fe*Z/255,be=ye+K-ye*K/255},overlay:function(){xe=oe<128?2*oe*U/255:255-2*(255-oe)*(255-U)/255,ke=fe<128?2*fe*Z/255:255-2*(255-fe)*(255-Z)/255,be=ye<128?2*ye*K/255:255-2*(255-ye)*(255-K)/255},"soft-light":function(){var he=U*oe/255;xe=he+oe*(255-(255-oe)*(255-U)/255-he)/255,he=Z*fe/255,ke=he+fe*(255-(255-fe)*(255-Z)/255-he)/255,he=K*ye/255,be=he+ye*(255-(255-ye)*(255-K)/255-he)/255},"hard-light":function(){xe=U<128?2*U*oe/255:255-2*(255-U)*(255-oe)/255,ke=Z<128?2*Z*fe/255:255-2*(255-Z)*(255-fe)/255,be=K<128?2*K*ye/255:255-2*(255-K)*(255-ye)/255},"color-dodge":function(){xe=oe===0?0:U===255?255:f(255,255*oe/(255-U)),ke=fe===0?0:Z===255?255:f(255,255*fe/(255-Z)),be=ye===0?0:K===255?255:f(255,255*ye/(255-K))},"color-burn":function(){xe=oe===255?255:U===0?0:w(0,255-(255-oe)*255/U),ke=fe===255?255:Z===0?0:w(0,255-(255-fe)*255/Z),be=ye===255?255:K===0?0:w(0,255-(255-ye)*255/K)},darken:function(){xe=oe<U?oe:U,ke=fe<Z?fe:Z,be=ye<K?ye:K},lighten:function(){xe=oe>U?oe:U,ke=fe>Z?fe:Z,be=ye>K?ye:K},difference:function(){xe=oe-U,xe<0&&(xe=-xe),ke=fe-Z,ke<0&&(ke=-ke),be=ye-K,be<0&&(be=-be)},exclusion:function(){xe=oe+U*(255-oe-oe)/255,ke=fe+Z*(255-fe-fe)/255,be=ye+K*(255-ye-ye)/255},hue:function(){de(U,Z,K,Fe(oe,fe,ye)),Re(xe,ke,be,Ne(oe,fe,ye))},saturation:function(){de(oe,fe,ye,Fe(U,Z,K)),Re(xe,ke,be,Ne(oe,fe,ye))},luminosity:function(){Re(oe,fe,ye,Ne(U,Z,K))},color:function(){Re(U,Z,K,Ne(oe,fe,ye))},add:function(){xe=f(oe+U,255),ke=f(fe+Z,255),be=f(ye+K,255)},subtract:function(){xe=w(oe-U,0),ke=w(fe-Z,0),be=w(ye-K,0)},average:function(){xe=(oe+U)/2,ke=(fe+Z)/2,be=(ye+K)/2},negation:function(){xe=255-B(255-U-oe),ke=255-B(255-Z-fe),be=255-B(255-K-ye)}},W=this.nativeModes=g.each(["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","darker","copy","xor"],function(he){this[he]=!0},{}),ie=cn.getContext(1,1,{willReadFrequently:!0});ie&&(g.each(Ae,function(he,me){var pe=me==="darken",De=!1;ie.save();try{ie.fillStyle=pe?"#300":"#a00",ie.fillRect(0,0,1,1),ie.globalCompositeOperation=me,ie.globalCompositeOperation===me&&(ie.fillStyle=pe?"#a00":"#300",ie.fillRect(0,0,1,1),De=ie.getImageData(0,0,1,1).data[0]!==pe?170:51)}catch{}ie.restore(),W[me]=De}),cn.release(ie)),this.process=function(he,me,pe,De,Le){var Pe=me.canvas,Ve=he==="normal";if(Ve||W[he])pe.save(),pe.setTransform(1,0,0,1,0,0),pe.globalAlpha=De,Ve||(pe.globalCompositeOperation=he),pe.drawImage(Pe,Le.x,Le.y),pe.restore();else{var Ue=Ae[he];if(!Ue)return;for(var ge=pe.getImageData(Le.x,Le.y,Pe.width,Pe.height),Ce=ge.data,Qe=me.getImageData(0,0,Pe.width,Pe.height).data,nt=0,i=Ce.length;nt<i;nt+=4){U=Qe[nt],oe=Ce[nt],Z=Qe[nt+1],fe=Ce[nt+1],K=Qe[nt+2],ye=Ce[nt+2],se=Qe[nt+3],Me=Ce[nt+3],Ue();var ue=se*De/255,Dt=1-ue;Ce[nt]=ue*xe+Dt*oe,Ce[nt+1]=ue*ke+Dt*fe,Ce[nt+2]=ue*be+Dt*ye,Ce[nt+3]=se*De+Dt*Me}pe.putImageData(ge,Le.x,Le.y)}}},vn=new function(){var f="http://www.w3.org/2000/svg",w="http://www.w3.org/2000/xmlns",B="http://www.w3.org/1999/xlink",U={href:B,xlink:w,xmlns:w+"/","xmlns:xlink":w+"/"};function Z(oe,fe,ye){return se(m.createElementNS(f,oe),fe,ye)}function K(oe,fe){var ye=U[fe],Me=ye?oe.getAttributeNS(ye,fe):oe.getAttribute(fe);return Me==="null"?null:Me}function se(oe,fe,ye){for(var Me in fe){var xe=fe[Me],ke=U[Me];typeof xe=="number"&&ye&&(xe=ye.number(xe)),ke?oe.setAttributeNS(ke,Me,xe):oe.setAttribute(Me,xe)}return oe}return{svg:f,xmlns:w,xlink:B,create:Z,get:K,set:se}},Dn=g.each({fillColor:["fill","color"],fillRule:["fill-rule","string"],strokeColor:["stroke","color"],strokeWidth:["stroke-width","number"],strokeCap:["stroke-linecap","string"],strokeJoin:["stroke-linejoin","string"],strokeScaling:["vector-effect","lookup",{true:"none",false:"non-scaling-stroke"},function(f,w){return!w&&(f instanceof ui||f instanceof xi||f instanceof Pi)}],miterLimit:["stroke-miterlimit","number"],dashArray:["stroke-dasharray","array"],dashOffset:["stroke-dashoffset","number"],fontFamily:["font-family","string"],fontWeight:["font-weight","string"],fontSize:["font-size","number"],justification:["text-anchor","lookup",{left:"start",center:"middle",right:"end"}],opacity:["opacity","number"],blendMode:["mix-blend-mode","style"]},function(f,w){var B=g.capitalize(w),U=f[2];this[w]={type:f[1],property:w,attribute:f[0],toSVG:U,fromSVG:U&&g.each(U,function(Z,K){this[Z]=K},{}),exportFilter:f[3],get:"get"+B,set:"set"+B}},{});new function(){var f;function w(Ae,W,ie){var he=new g,me=Ae.getTranslation();if(W){var pe;Ae.isInvertible()?(Ae=Ae._shiftless(),pe=Ae._inverseTransform(me),me=null):pe=new le,he[ie?"cx":"x"]=pe.x,he[ie?"cy":"y"]=pe.y}if(!Ae.isIdentity()){var De=Ae.decompose();if(De){var Le=[],Pe=De.rotation,Ve=De.scaling,Ue=De.skewing;me&&!me.isZero()&&Le.push("translate("+f.point(me)+")"),Pe&&Le.push("rotate("+f.number(Pe)+")"),(!ee.isZero(Ve.x-1)||!ee.isZero(Ve.y-1))&&Le.push("scale("+f.point(Ve)+")"),Ue.x&&Le.push("skewX("+f.number(Ue.x)+")"),Ue.y&&Le.push("skewY("+f.number(Ue.y)+")"),he.transform=Le.join(" ")}else he.transform="matrix("+Ae.getValues().join(",")+")"}return he}function B(Ae,W){for(var ie=w(Ae._matrix),he=Ae._children,me=vn.create("g",ie,f),pe=0,De=he.length;pe<De;pe++){var Le=he[pe],Pe=Fe(Le,W);if(Pe)if(Le.isClipMask()){var Ve=vn.create("clipPath");Ve.appendChild(Pe),Ne(Le,Ve,"clip"),vn.set(me,{"clip-path":"url(#"+Ve.id+")"})}else me.appendChild(Pe)}return me}function U(Ae,W){var ie=w(Ae._matrix,!0),he=Ae.getSize(),me=Ae.getImage();return ie.x-=he.width/2,ie.y-=he.height/2,ie.width=he.width,ie.height=he.height,ie.href=W.embedImages==!1&&me&&me.src||Ae.toDataURL(),vn.create("image",ie,f)}function Z(Ae,W){var ie=W.matchShapes;if(ie){var he=Ae.toShape(!1);if(he)return K(he)}var me=Ae._segments,pe=me.length,De,Le=w(Ae._matrix);if(ie&&pe>=2&&!Ae.hasHandles())if(pe>2){De=Ae._closed?"polygon":"polyline";for(var Pe=[],Ve=0;Ve<pe;Ve++)Pe.push(f.point(me[Ve]._point));Le.points=Pe.join(" ")}else{De="line";var Ue=me[0]._point,ge=me[1]._point;Le.set({x1:Ue.x,y1:Ue.y,x2:ge.x,y2:ge.y})}else De="path",Le.d=Ae.getPathData(null,W.precision);return vn.create(De,Le,f)}function K(Ae){var W=Ae._type,ie=Ae._radius,he=w(Ae._matrix,!0,W!=="rectangle");if(W==="rectangle"){W="rect";var me=Ae._size,pe=me.width,De=me.height;he.x-=pe/2,he.y-=De/2,he.width=pe,he.height=De,ie.isZero()&&(ie=null)}return ie&&(W==="circle"?he.r=ie:(he.rx=ie.width,he.ry=ie.height)),vn.create(W,he,f)}function se(Ae,W){var ie=w(Ae._matrix),he=Ae.getPathData(null,W.precision);return he&&(ie.d=he),vn.create("path",ie,f)}function oe(Ae,W){var ie=w(Ae._matrix,!0),he=Ae._definition,me=be(he,"symbol"),pe=he._item,De=pe.getStrokeBounds();return me||(me=vn.create("symbol",{viewBox:f.rectangle(De)}),me.appendChild(Fe(pe,W)),Ne(he,me,"symbol")),ie.href="#"+me.id,ie.x+=De.x,ie.y+=De.y,ie.width=De.width,ie.height=De.height,ie.overflow="visible",vn.create("use",ie,f)}function fe(Ae){var W=be(Ae,"color");if(!W){var ie=Ae.getGradient(),he=ie._radial,me=Ae.getOrigin(),pe=Ae.getDestination(),De;if(he){De={cx:me.x,cy:me.y,r:me.getDistance(pe)};var Le=Ae.getHighlight();Le&&(De.fx=Le.x,De.fy=Le.y)}else De={x1:me.x,y1:me.y,x2:pe.x,y2:pe.y};De.gradientUnits="userSpaceOnUse",W=vn.create((he?"radial":"linear")+"Gradient",De,f);for(var Pe=ie._stops,Ve=0,Ue=Pe.length;Ve<Ue;Ve++){var ge=Pe[Ve],Ce=ge._color,Qe=Ce.getAlpha(),nt=ge._offset;De={offset:nt??Ve/(Ue-1)},Ce&&(De["stop-color"]=Ce.toCSS(!0)),Qe<1&&(De["stop-opacity"]=Qe),W.appendChild(vn.create("stop",De,f))}Ne(Ae,W,"color")}return"url(#"+W.id+")"}function ye(Ae){var W=vn.create("text",w(Ae._matrix,!0),f);return W.textContent=Ae._content,W}var Me={Group:B,Layer:B,Raster:U,Path:Z,Shape:K,CompoundPath:se,SymbolItem:oe,PointText:ye};function xe(Ae,W,ie){var he={},me=!ie&&Ae.getParent(),pe=[];return Ae._name!=null&&(he.id=Ae._name),g.each(Dn,function(De){var Le=De.get,Pe=De.type,Ve=Ae[Le]();if(De.exportFilter?De.exportFilter(Ae,Ve):!me||!g.equals(me[Le](),Ve)){if(Pe==="color"&&Ve!=null){var Ue=Ve.getAlpha();Ue<1&&(he[De.attribute+"-opacity"]=Ue)}Pe==="style"?pe.push(De.attribute+": "+Ve):he[De.attribute]=Ve==null?"none":Pe==="color"?Ve.gradient?fe(Ve):Ve.toCSS(!0):Pe==="array"?Ve.join(","):Pe==="lookup"?De.toSVG[Ve]:Ve}}),pe.length&&(he.style=pe.join(";")),he.opacity===1&&delete he.opacity,Ae._visible||(he.visibility="hidden"),vn.set(W,he,f)}var ke;function be(Ae,W){return ke||(ke={ids:{},svgs:{}}),Ae&&ke.svgs[W+"-"+(Ae._id||Ae.__id||(Ae.__id=ce.get("svg")))]}function Ne(Ae,W,ie){ke||be();var he=ke.ids[ie]=(ke.ids[ie]||0)+1;W.id=ie+"-"+he,ke.svgs[ie+"-"+(Ae._id||Ae.__id)]=W}function Re(Ae,W){var ie=Ae,he=null;if(ke){ie=Ae.nodeName.toLowerCase()==="svg"&&Ae;for(var me in ke.svgs)he||(ie||(ie=vn.create("svg"),ie.appendChild(Ae)),he=ie.insertBefore(vn.create("defs"),ie.firstChild)),he.appendChild(ke.svgs[me]);ke=null}return W.asString?new t.XMLSerializer().serializeToString(ie):ie}function Fe(Ae,W,ie){var he=Me[Ae._class],me=he&&he(Ae,W);if(me){var pe=W.onExport;pe&&(me=pe(Ae,me,W)||me);var De=JSON.stringify(Ae._data);De&&De!=="{}"&&De!=="null"&&me.setAttribute("data-paper-data",De)}return me&&xe(Ae,me,ie)}function de(Ae){return Ae||(Ae={}),f=new re(Ae.precision),Ae}Te.inject({exportSVG:function(Ae){return Ae=de(Ae),Re(Fe(this,Ae,!0),Ae)}}),Ct.inject({exportSVG:function(Ae){Ae=de(Ae);var W=this._children,ie=this.getView(),he=g.pick(Ae.bounds,"view"),me=Ae.matrix||he==="view"&&ie._matrix,pe=me&&gt.read([me]),De=he==="view"?new Ke([0,0],ie.getViewSize()):he==="content"?Te._getBounds(W,pe,{stroke:!0}).rect:Ke.read([he],0,{readNull:!0}),Le={version:"1.1",xmlns:vn.svg,"xmlns:xlink":vn.xlink};De&&(Le.width=De.width,Le.height=De.height,(De.x||De.x===0||De.y||De.y===0)&&(Le.viewBox=f.rectangle(De)));var Pe=vn.create("svg",Le,f),Ve=Pe;pe&&!pe.isIdentity()&&(Ve=Pe.appendChild(vn.create("g",w(pe),f)));for(var Ue=0,ge=W.length;Ue<ge;Ue++)Ve.appendChild(Fe(W[Ue],Ae,!0));return Re(Pe,Ae)}})},new function(){var f={},w;function B(W,ie,he,me,pe,De){var Le=vn.get(W,ie)||De,Pe=Le==null?me?null:he?"":0:he?Le:parseFloat(Le);return/%\s*$/.test(Le)?Pe/100*(pe?1:w[/x|^width/.test(ie)?"width":"height"]):Pe}function U(W,ie,he,me,pe,De,Le){return ie=B(W,ie||"x",!1,me,pe,De),he=B(W,he||"y",!1,me,pe,Le),me&&(ie==null||he==null)?null:new le(ie,he)}function Z(W,ie,he,me,pe){return ie=B(W,ie||"width",!1,me,pe),he=B(W,he||"height",!1,me,pe),me&&(ie==null||he==null)?null:new Je(ie,he)}function K(W,ie,he){return W==="none"?null:ie==="number"?parseFloat(W):ie==="array"?W?W.split(/[\s,]+/g).map(parseFloat):[]:ie==="color"?Fe(W)||W:ie==="lookup"?he[W]:W}function se(W,ie,he,me){var pe=W.childNodes,De=ie==="clippath",Le=ie==="defs",Pe=new Ai,Ve=Pe._project,Ue=Ve._currentStyle,ge=[];if(!De&&!Le&&(Pe=Re(Pe,W,me),Ve._currentStyle=Pe._style.clone()),me)for(var Ce=W.querySelectorAll("defs"),Qe=0,nt=Ce.length;Qe<nt;Qe++)de(Ce[Qe],he,!1);for(var Qe=0,nt=pe.length;Qe<nt;Qe++){var i=pe[Qe],ue;i.nodeType===1&&!/^defs$/i.test(i.nodeName)&&(ue=de(i,he,!1))&&!(ue instanceof di)&&ge.push(ue)}return Pe.addChildren(ge),De&&(Pe=Re(Pe.reduce(),W,me)),Ve._currentStyle=Ue,(De||Le)&&(Pe.remove(),Pe=null),Pe}function oe(W,ie){for(var he=W.getAttribute("points").match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g),me=[],pe=0,De=he.length;pe<De;pe+=2)me.push(new le(parseFloat(he[pe]),parseFloat(he[pe+1])));var Le=new Lt(me);return ie==="polygon"&&Le.closePath(),Le}function fe(W){return ui.create(W.getAttribute("d"))}function ye(W,ie){var he=(B(W,"href",!0)||"").substring(1),me=ie==="radialgradient",pe;if(he)pe=f[he].getGradient(),pe._radial^me&&(pe=pe.clone(),pe._radial=me);else{for(var De=W.childNodes,Le=[],Pe=0,Ve=De.length;Pe<Ve;Pe++){var Ue=De[Pe];Ue.nodeType===1&&Le.push(Re(new fi,Ue))}pe=new Bn(Le,me)}var ge,Ce,Qe,nt=B(W,"gradientUnits",!0)!=="userSpaceOnUse";me?(ge=U(W,"cx","cy",!1,nt,"50%","50%"),Ce=ge.add(B(W,"r",!1,!1,nt,"50%"),0),Qe=U(W,"fx","fy",!0,nt)):(ge=U(W,"x1","y1",!1,nt,"0%","0%"),Ce=U(W,"x2","y2",!1,nt,"100%","0%"));var i=Re(new sn(pe,ge,Ce,Qe),W);return i._scaleToBounds=nt,null}var Me={"#document":function(W,ie,he,me){for(var pe=W.childNodes,De=0,Le=pe.length;De<Le;De++){var Pe=pe[De];if(Pe.nodeType===1)return de(Pe,he,me)}},g:se,svg:se,clippath:se,polygon:oe,polyline:oe,path:fe,lineargradient:ye,radialgradient:ye,image:function(W){var ie=new gi(B(W,"href",!0));return ie.on("load",function(){var he=Z(W);this.setSize(he);var me=U(W).add(he.divide(2));this._matrix.append(new gt().translate(me))}),ie},symbol:function(W,ie,he,me){return new di(se(W,ie,he,me),!0)},defs:se,use:function(W){var ie=(B(W,"href",!0)||"").substring(1),he=f[ie],me=U(W);return he?he instanceof di?he.place(me):he.clone().translate(me):null},circle:function(W){return new xi.Circle(U(W,"cx","cy"),B(W,"r"))},ellipse:function(W){return new xi.Ellipse({center:U(W,"cx","cy"),radius:Z(W,"rx","ry")})},rect:function(W){return new xi.Rectangle(new Ke(U(W),Z(W)),Z(W,"rx","ry"))},line:function(W){return new Lt.Line(U(W,"x1","y1"),U(W,"x2","y2"))},text:function(W){var ie=new dn(U(W).add(U(W,"dx","dy")));return ie.setContent(W.textContent.trim()||""),ie},switch:se};function xe(W,ie,he,me){if(W.transform){for(var pe=(me.getAttribute(he)||"").split(/\)\s*/g),De=new gt,Le=0,Pe=pe.length;Le<Pe;Le++){var Ve=pe[Le];if(!Ve)break;for(var Ue=Ve.split(/\(\s*/),ge=Ue[0],Ce=Ue[1].split(/[\s,]+/g),Qe=0,nt=Ce.length;Qe<nt;Qe++)Ce[Qe]=parseFloat(Ce[Qe]);switch(ge){case"matrix":De.append(new gt(Ce[0],Ce[1],Ce[2],Ce[3],Ce[4],Ce[5]));break;case"rotate":De.rotate(Ce[0],Ce[1]||0,Ce[2]||0);break;case"translate":De.translate(Ce[0],Ce[1]||0);break;case"scale":De.scale(Ce);break;case"skewX":De.skew(Ce[0],0);break;case"skewY":De.skew(0,Ce[0]);break}}W.transform(De)}}function ke(W,ie,he){var me=he==="fill-opacity"?"getFillColor":"getStrokeColor",pe=W[me]&&W[me]();pe&&pe.setAlpha(parseFloat(ie))}var be=g.set(g.each(Dn,function(W){this[W.attribute]=function(ie,he){if(ie[W.set]&&(ie[W.set](K(he,W.type,W.fromSVG)),W.type==="color")){var me=ie[W.get]();if(me&&me._scaleToBounds){var pe=ie.getBounds();me.transform(new gt().translate(pe.getPoint()).scale(pe.getSize()))}}}},{}),{id:function(W,ie){f[ie]=W,W.setName&&W.setName(ie)},"clip-path":function(W,ie){var he=Fe(ie);if(he)if(he=he.clone(),he.setClipMask(!0),W instanceof Ai)W.insertChild(0,he);else return new Ai(he,W)},gradientTransform:xe,transform:xe,"fill-opacity":ke,"stroke-opacity":ke,visibility:function(W,ie){W.setVisible&&W.setVisible(ie==="visible")},display:function(W,ie){W.setVisible&&W.setVisible(ie!==null)},"stop-color":function(W,ie){W.setColor&&W.setColor(ie)},"stop-opacity":function(W,ie){W._color&&W._color.setAlpha(parseFloat(ie))},offset:function(W,ie){if(W.setOffset){var he=ie.match(/(.*)%$/);W.setOffset(he?he[1]/100:parseFloat(ie))}},viewBox:function(W,ie,he,me,pe){var De=new Ke(K(ie,"array")),Le=Z(me,null,null,!0),Pe,Ve;if(W instanceof Ai){var Ue=Le?Le.divide(De.getSize()):1,Ve=new gt().scale(Ue).translate(De.getPoint().negate());Pe=W}else W instanceof di&&(Le&&De.setSize(Le),Pe=W._item);if(Pe){if(Ne(me,"overflow",pe)!=="visible"){var ge=new xi.Rectangle(De);ge.setClipMask(!0),Pe.addChild(ge)}Ve&&Pe.transform(Ve)}}});function Ne(W,ie,he){var me=W.attributes[ie],pe=me&&me.value;if(!pe&&W.style){var De=g.camelize(ie);pe=W.style[De],!pe&&he.node[De]!==he.parent[De]&&(pe=he.node[De])}return pe?pe==="none"?null:pe:n}function Re(W,ie,he){var me=ie.parentNode,pe={node:li.getStyles(ie)||{},parent:!he&&!/^defs$/i.test(me.tagName)&&li.getStyles(me)||{}};return g.each(be,function(De,Le){var Pe=Ne(ie,Le,pe);W=Pe!==n&&De(W,Pe,Le,ie,pe)||W}),W}function Fe(W){var ie=W&&W.match(/\((?:["'#]*)([^"')]+)/),he=ie&&ie[1],me=he&&f[l?he.replace(l.location.href.split("#")[0]+"#",""):he];return me&&me._scaleToBounds&&(me=me.clone(),me._scaleToBounds=!0),me}function de(W,ie,he){var me=W.nodeName.toLowerCase(),pe=me!=="#document",De=m.body,Le,Pe,Ve;he&&pe&&(w=pn.getView().getSize(),w=Z(W,null,null,!0)||w,Le=vn.create("svg",{style:"stroke-width: 1px; stroke-miterlimit: 10"}),Pe=W.parentNode,Ve=W.nextSibling,Le.appendChild(W),De.appendChild(Le));var Ue=pn.settings,ge=Ue.applyMatrix,Ce=Ue.insertItems;Ue.applyMatrix=!1,Ue.insertItems=!1;var Qe=Me[me],nt=Qe&&Qe(W,me,ie,he)||null;if(Ue.insertItems=Ce,Ue.applyMatrix=ge,nt){pe&&!(nt instanceof Ai)&&(nt=Re(nt,W,he));var i=ie.onImport,ue=pe&&W.getAttribute("data-paper-data");i&&(nt=i(W,nt,ie)||nt),ie.expandShapes&&nt instanceof xi&&(nt.remove(),nt=nt.toPath()),ue&&(nt._data=JSON.parse(ue))}return Le&&(De.removeChild(Le),Pe&&(Ve?Pe.insertBefore(W,Ve):Pe.appendChild(W))),he&&(f={},nt&&g.pick(ie.applyMatrix,ge)&&nt.matrix.apply(!0,!0)),nt}function Ae(W,ie,he){if(!W)return null;ie=typeof ie=="function"?{onLoad:ie}:ie||{};var me=pn,pe=null;function De(Ue){try{var ge=typeof Ue=="object"?Ue:new t.DOMParser().parseFromString(Ue.trim(),"image/svg+xml");if(!ge.nodeName)throw ge=null,new Error("Unsupported SVG source: "+W);pn=me,pe=de(ge,ie,!0),(!ie||ie.insert!==!1)&&he._insertItem(n,pe);var Ce=ie.onLoad;Ce&&Ce(pe,Ue)}catch(Qe){Le(Qe)}}function Le(Ue,ge){var Ce=ie.onError;if(Ce)Ce(Ue,ge);else throw new Error(Ue)}if(typeof W=="string"&&!/^[\s\S]*</.test(W)){var Pe=m.getElementById(W);Pe?De(Pe):Kt.request({url:W,async:!0,onLoad:De,onError:Le})}else if(typeof File<"u"&&W instanceof File){var Ve=new FileReader;return Ve.onload=function(){De(Ve.result)},Ve.onerror=function(){Le(Ve.error)},Ve.readAsText(W)}else De(W);return pe}Te.inject({importSVG:function(W,ie){return Ae(W,ie,this)}}),Ct.inject({importSVG:function(W,ie){return this.activate(),Ae(W,ie,this)}})},g.exports.PaperScript=(function(){var f=this,w=f.acorn;if(!w&&typeof Q8<"u")try{w=Z8()}catch{}if(!w){var B,U;w=B=U={},function(Re,Fe){if(typeof B=="object"&&typeof U=="object")return Fe(B);if(typeof n=="function"&&n.amd)return n(["exports"],Fe);Fe(Re.acorn||(Re.acorn={}))}(this,function(Re){Re.version="0.5.0";var Fe,de,Ae,W;Re.parse=function(at,yt){return de=String(at),Ae=de.length,he(yt),rA(),Ho(Fe.program)};var ie=Re.defaultOptions={ecmaVersion:5,strictSemicolons:!1,allowTrailingCommas:!0,forbidReserved:!1,allowReturnOutsideFunction:!1,locations:!1,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null};function he(at){Fe=at||{};for(var yt in ie)Object.prototype.hasOwnProperty.call(Fe,yt)||(Fe[yt]=ie[yt]);W=Fe.sourceFile||null}var me=Re.getLineInfo=function(at,yt){for(var Gt=1,ai=0;;){Ls.lastIndex=ai;var Hi=Ls.exec(at);if(Hi&&Hi.index<yt)++Gt,ai=Hi.index+Hi[0].length;else break}return{line:Gt,column:yt-ai}};Re.tokenize=function(at,yt){de=String(at),Ae=de.length,he(yt),rA();var Gt={};function ai(Hi){return ue=Le,ga(Hi),Gt.start=De,Gt.end=Le,Gt.startLoc=Pe,Gt.endLoc=Ve,Gt.type=Ue,Gt.value=ge,Gt}return ai.jumpTo=function(Hi,mn){if(pe=Hi,Fe.locations){Qe=1,nt=Ls.lastIndex=0;for(var Pn;(Pn=Ls.exec(de))&&Pn.index<Hi;)++Qe,nt=Pn.index+Pn[0].length}Ce=mn,js()},ai};var pe,De,Le,Pe,Ve,Ue,ge,Ce,Qe,nt,i,ue,Dt,Vt,Wt,It;function Bt(at,yt){var Gt=me(de,at);yt+=" ("+Gt.line+":"+Gt.column+")";var ai=new SyntaxError(yt);throw ai.pos=at,ai.loc=Gt,ai.raisedAt=pe,ai}var hi=[],Zt={type:"num"},ei={type:"regexp"},Ti={type:"string"},Yi={type:"name"},wn={type:"eof"},An={keyword:"break"},en={keyword:"case",beforeExpr:!0},ar={keyword:"catch"},pi={keyword:"continue"},Zn={keyword:"debugger"},Xi={keyword:"default"},mt={keyword:"do",isLoop:!0},bi={keyword:"else",beforeExpr:!0},At={keyword:"finally"},Ni={keyword:"for",isLoop:!0},lr={keyword:"function"},es={keyword:"if"},kr={keyword:"return",beforeExpr:!0},ht={keyword:"switch"},Tn={keyword:"throw",beforeExpr:!0},it={keyword:"try"},nr={keyword:"var"},ks={keyword:"while",isLoop:!0},Es={keyword:"with"},Ta={keyword:"new",beforeExpr:!0},Hs={keyword:"this"},co={keyword:"null",atomValue:null},Pa={keyword:"true",atomValue:!0},os={keyword:"false",atomValue:!1},an={keyword:"in",binop:7,beforeExpr:!0},ts={break:An,case:en,catch:ar,continue:pi,debugger:Zn,default:Xi,do:mt,else:bi,finally:At,for:Ni,function:lr,if:es,return:kr,switch:ht,throw:Tn,try:it,var:nr,while:ks,with:Es,null:co,true:Pa,false:os,new:Ta,in:an,instanceof:{keyword:"instanceof",binop:7,beforeExpr:!0},this:Hs,typeof:{keyword:"typeof",prefix:!0,beforeExpr:!0},void:{keyword:"void",prefix:!0,beforeExpr:!0},delete:{keyword:"delete",prefix:!0,beforeExpr:!0}},yr={type:"[",beforeExpr:!0},Zs={type:"]"},va={type:"{",beforeExpr:!0},Ba={type:"}"},Bs={type:"(",beforeExpr:!0},Ds={type:")"},M={type:",",beforeExpr:!0},te={type:";",beforeExpr:!0},Be={type:":",beforeExpr:!0},Ye={type:"."},dt={type:"?",beforeExpr:!0},Qt={binop:10,beforeExpr:!0},ti={isAssign:!0,beforeExpr:!0},Ii={isAssign:!0,beforeExpr:!0},zi={postfix:!0,prefix:!0,isUpdate:!0},En={prefix:!0,beforeExpr:!0},Ln={binop:1,beforeExpr:!0},or={binop:2,beforeExpr:!0},na={binop:3,beforeExpr:!0},ra={binop:4,beforeExpr:!0},sa={binop:5,beforeExpr:!0},Da={binop:6,beforeExpr:!0},Yn={binop:7,beforeExpr:!0},yn={binop:8,beforeExpr:!0},Rn={binop:9,prefix:!0,beforeExpr:!0},ur={binop:10,beforeExpr:!0};Re.tokTypes={bracketL:yr,bracketR:Zs,braceL:va,braceR:Ba,parenL:Bs,parenR:Ds,comma:M,semi:te,colon:Be,dot:Ye,question:dt,slash:Qt,eq:ti,name:Yi,eof:wn,num:Zt,regexp:ei,string:Ti};for(var is in ts)Re.tokTypes["_"+is]=ts[is];function dr(at){at=at.split(" ");var yt="",Gt=[];e:for(var ai=0;ai<at.length;++ai){for(var Hi=0;Hi<Gt.length;++Hi)if(Gt[Hi][0].length==at[ai].length){Gt[Hi].push(at[ai]);continue e}Gt.push([at[ai]])}function mn(xn){if(xn.length==1)return yt+="return str === "+JSON.stringify(xn[0])+";";yt+="switch(str){";for(var jr=0;jr<xn.length;++jr)yt+="case "+JSON.stringify(xn[jr])+":";yt+="return true}return false;"}if(Gt.length>3){Gt.sort(function(xn,jr){return jr.length-xn.length}),yt+="switch(str.length){";for(var ai=0;ai<Gt.length;++ai){var Pn=Gt[ai];yt+="case "+Pn[0].length+":",mn(Pn)}yt+="}"}else mn(at);return new Function("str",yt)}var fo=dr("abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile"),Go=dr("class enum extends super const export import"),ya=dr("implements interface let package private protected public static yield"),Ya=dr("eval arguments"),Hr=dr("break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this"),ko=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/,pa="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",La="̀-ͯ҃-֑҇-ׇֽֿׁׂׅׄؐ-ؚؠ-ىٲ-ۓۧ-ۨۻ-ۼܰ-݊ࠀ-ࠔࠛ-ࠣࠥ-ࠧࠩ-࠭ࡀ-ࡗࣤ-ࣾऀ-ःऺ-़ा-ॏ॑-ॗॢ-ॣ०-९ঁ-ঃ়া-ৄেৈৗয়-ৠਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢ-ૣ૦-૯ଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୟ-ୠ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఁ-ఃె-ైొ-్ౕౖౢ-ౣ౦-౯ಂಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢ-ೣ೦-೯ംഃെ-ൈൗൢ-ൣ൦-൯ංඃ්ා-ුූෘ-ෟෲෳิ-ฺเ-ๅ๐-๙ິ-ູ່-ໍ໐-໙༘༙༠-༩༹༵༷ཁ-ཇཱ-྄྆-྇ྍ-ྗྙ-ྼ࿆က-ဩ၀-၉ၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟ᜎ-ᜐᜠ-ᜰᝀ-ᝐᝲᝳក-ឲ៝០-៩᠋-᠍᠐-᠙ᤠ-ᤫᤰ-᤻ᥑ-ᥭᦰ-ᧀᧈ-ᧉ᧐-᧙ᨀ-ᨕᨠ-ᩓ᩠-᩿᩼-᪉᪐-᪙ᭆ-ᭋ᭐-᭙᭫-᭳᮰-᮹᯦-᯳ᰀ-ᰢ᱀-᱉ᱛ-ᱽ᳐-᳒ᴀ-ᶾḁ-ἕ‌‍‿⁀⁔⃐-⃥⃜⃡-⃰ⶁ-ⶖⷠ-ⷿ〡-〨゙゚Ꙁ-ꙭꙴ-꙽ꚟ꛰-꛱ꟸ-ꠀ꠆ꠋꠣ-ꠧꢀ-ꢁꢴ-꣄꣐-꣙ꣳ-ꣷ꤀-꤉ꤦ-꤭ꤰ-ꥅꦀ-ꦃ꦳-꧀ꨀ-ꨧꩀ-ꩁꩌ-ꩍ꩐-꩙ꩻꫠ-ꫩꫲ-ꫳꯀ-ꯡ꯬꯭꯰-꯹ﬠ-ﬨ︀-️︠-︦︳︴﹍-﹏０-９＿",ds=new RegExp("["+pa+"]"),As=new RegExp("["+pa+La+"]"),po=/[\n\r\u2028\u2029]/,Ls=/\r\n|[\n\r\u2028\u2029]/g,aa=Re.isIdentifierStart=function(at){return at<65?at===36:at<91?!0:at<97?at===95:at<123?!0:at>=170&&ds.test(String.fromCharCode(at))},za=Re.isIdentifierChar=function(at){return at<48?at===36:at<58?!0:at<65?!1:at<91?!0:at<97?at===95:at<123?!0:at>=170&&As.test(String.fromCharCode(at))};function $a(){this.line=Qe,this.column=pe-nt}function rA(){Qe=1,pe=nt=0,Ce=!0,js()}function pr(at,yt){Le=pe,Fe.locations&&(Ve=new $a),Ue=at,js(),ge=yt,Ce=at.beforeExpr}function kl(){var at=Fe.onComment&&Fe.locations&&new $a,yt=pe,Gt=de.indexOf("*/",pe+=2);if(Gt===-1&&Bt(pe-2,"Unterminated comment"),pe=Gt+2,Fe.locations){Ls.lastIndex=yt;for(var ai;(ai=Ls.exec(de))&&ai.index<pe;)++Qe,nt=ai.index+ai[0].length}Fe.onComment&&Fe.onComment(!0,de.slice(yt+2,Gt),yt,pe,at,Fe.locations&&new $a)}function zs(){for(var at=pe,yt=Fe.onComment&&Fe.locations&&new $a,Gt=de.charCodeAt(pe+=2);pe<Ae&&Gt!==10&&Gt!==13&&Gt!==8232&&Gt!==8233;)++pe,Gt=de.charCodeAt(pe);Fe.onComment&&Fe.onComment(!1,de.slice(at+2,pe),at,pe,yt,Fe.locations&&new $a)}function js(){for(;pe<Ae;){var at=de.charCodeAt(pe);if(at===32)++pe;else if(at===13){++pe;var yt=de.charCodeAt(pe);yt===10&&++pe,Fe.locations&&(++Qe,nt=pe)}else if(at===10||at===8232||at===8233)++pe,Fe.locations&&(++Qe,nt=pe);else if(at>8&&at<14)++pe;else if(at===47){var yt=de.charCodeAt(pe+1);if(yt===42)kl();else if(yt===47)zs();else break}else if(at===160)++pe;else if(at>=5760&&ko.test(String.fromCharCode(at)))++pe;else break}}function CA(){var at=de.charCodeAt(pe+1);return at>=48&&at<=57?Ka(!0):(++pe,pr(Ye))}function xa(){var at=de.charCodeAt(pe+1);return Ce?(++pe,kA()):at===61?Xr(Ii,2):Xr(Qt,1)}function Ra(){var at=de.charCodeAt(pe+1);return at===61?Xr(Ii,2):Xr(ur,1)}function Xa(at){var yt=de.charCodeAt(pe+1);return yt===at?Xr(at===124?Ln:or,2):yt===61?Xr(Ii,2):Xr(at===124?na:sa,1)}function Zr(){var at=de.charCodeAt(pe+1);return at===61?Xr(Ii,2):Xr(ra,1)}function wa(at){var yt=de.charCodeAt(pe+1);return yt===at?yt==45&&de.charCodeAt(pe+2)==62&&po.test(de.slice(ue,pe))?(pe+=3,zs(),js(),ga()):Xr(zi,2):yt===61?Xr(Ii,2):Xr(Rn,1)}function Fa(at){var yt=de.charCodeAt(pe+1),Gt=1;return yt===at?(Gt=at===62&&de.charCodeAt(pe+2)===62?3:2,de.charCodeAt(pe+Gt)===61?Xr(Ii,Gt+1):Xr(yn,Gt)):yt==33&&at==60&&de.charCodeAt(pe+2)==45&&de.charCodeAt(pe+3)==45?(pe+=4,zs(),js(),ga()):(yt===61&&(Gt=de.charCodeAt(pe+2)===61?3:2),Xr(Yn,Gt))}function Qo(at){var yt=de.charCodeAt(pe+1);return yt===61?Xr(Da,de.charCodeAt(pe+2)===61?3:2):Xr(at===61?ti:En,1)}function _s(at){switch(at){case 46:return CA();case 40:return++pe,pr(Bs);case 41:return++pe,pr(Ds);case 59:return++pe,pr(te);case 44:return++pe,pr(M);case 91:return++pe,pr(yr);case 93:return++pe,pr(Zs);case 123:return++pe,pr(va);case 125:return++pe,pr(Ba);case 58:return++pe,pr(Be);case 63:return++pe,pr(dt);case 48:var yt=de.charCodeAt(pe+1);if(yt===120||yt===88)return Dr();case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return Ka(!1);case 34:case 39:return jn(at);case 47:return xa();case 37:case 42:return Ra();case 124:case 38:return Xa(at);case 94:return Zr();case 43:case 45:return wa(at);case 60:case 62:return Fa(at);case 61:case 33:return Qo(at);case 126:return Xr(En,1)}return!1}function ga(at){if(at?pe=De+1:De=pe,Fe.locations&&(Pe=new $a),at)return kA();if(pe>=Ae)return pr(wn);var yt=de.charCodeAt(pe);if(aa(yt)||yt===92)return Ws();var Gt=_s(yt);if(Gt===!1){var ai=String.fromCharCode(yt);if(ai==="\\"||ds.test(ai))return Ws();Bt(pe,"Unexpected character '"+ai+"'")}return Gt}function Xr(at,yt){var Gt=de.slice(pe,pe+yt);pe+=yt,pr(at,Gt)}function kA(){for(var Hi="",at,yt,Gt=pe;;){pe>=Ae&&Bt(Gt,"Unterminated regular expression");var ai=de.charAt(pe);if(po.test(ai)&&Bt(Gt,"Unterminated regular expression"),at)at=!1;else{if(ai==="[")yt=!0;else if(ai==="]"&&yt)yt=!1;else if(ai==="/"&&!yt)break;at=ai==="\\"}++pe}var Hi=de.slice(Gt,pe);++pe;var mn=Ir();mn&&!/^[gmsiy]*$/.test(mn)&&Bt(Gt,"Invalid regexp flag");try{var Pn=new RegExp(Hi,mn)}catch(xn){xn instanceof SyntaxError&&Bt(Gt,xn.message),Bt(xn)}return pr(ei,Pn)}function Un(at,yt){for(var Gt=pe,ai=0,Hi=0,mn=yt??1/0;Hi<mn;++Hi){var Pn=de.charCodeAt(pe),xn;if(Pn>=97?xn=Pn-97+10:Pn>=65?xn=Pn-65+10:Pn>=48&&Pn<=57?xn=Pn-48:xn=1/0,xn>=at)break;++pe,ai=ai*at+xn}return pe===Gt||yt!=null&&pe-Gt!==yt?null:ai}function Dr(){pe+=2;var at=Un(16);return at==null&&Bt(De+2,"Expected hexadecimal number"),aa(de.charCodeAt(pe))&&Bt(pe,"Identifier directly after number"),pr(Zt,at)}function Ka(at){var yt=pe,Gt=!1,ai=de.charCodeAt(pe)===48;!at&&Un(10)===null&&Bt(yt,"Invalid number"),de.charCodeAt(pe)===46&&(++pe,Un(10),Gt=!0);var Hi=de.charCodeAt(pe);(Hi===69||Hi===101)&&(Hi=de.charCodeAt(++pe),(Hi===43||Hi===45)&&++pe,Un(10)===null&&Bt(yt,"Invalid number"),Gt=!0),aa(de.charCodeAt(pe))&&Bt(pe,"Identifier directly after number");var mn=de.slice(yt,pe),Pn;return Gt?Pn=parseFloat(mn):!ai||mn.length===1?Pn=parseInt(mn,10):/[89]/.test(mn)||It?Bt(yt,"Invalid number"):Pn=parseInt(mn,8),pr(Zt,Pn)}function jn(at){pe++;for(var yt="";;){pe>=Ae&&Bt(De,"Unterminated string constant");var Gt=de.charCodeAt(pe);if(Gt===at)return++pe,pr(Ti,yt);if(Gt===92){Gt=de.charCodeAt(++pe);var ai=/^[0-7]+/.exec(de.slice(pe,pe+3));for(ai&&(ai=ai[0]);ai&&parseInt(ai,8)>255;)ai=ai.slice(0,-1);if(ai==="0"&&(ai=null),++pe,ai)It&&Bt(pe-2,"Octal literal in strict mode"),yt+=String.fromCharCode(parseInt(ai,8)),pe+=ai.length-1;else switch(Gt){case 110:yt+=`
`;break;case 114:yt+="\r";break;case 120:yt+=String.fromCharCode(Rs(2));break;case 117:yt+=String.fromCharCode(Rs(4));break;case 85:yt+=String.fromCharCode(Rs(8));break;case 116:yt+="	";break;case 98:yt+="\b";break;case 118:yt+="\v";break;case 102:yt+="\f";break;case 48:yt+="\0";break;case 13:de.charCodeAt(pe)===10&&++pe;case 10:Fe.locations&&(nt=pe,++Qe);break;default:yt+=String.fromCharCode(Gt);break}}else(Gt===13||Gt===10||Gt===8232||Gt===8233)&&Bt(De,"Unterminated string constant"),yt+=String.fromCharCode(Gt),++pe}}function Rs(at){var yt=Un(16,at);return yt===null&&Bt(De,"Bad character escape sequence"),yt}var Er;function Ir(){Er=!1;for(var at,yt=!0,Gt=pe;;){var ai=de.charCodeAt(pe);if(za(ai))Er&&(at+=de.charAt(pe)),++pe;else if(ai===92){Er||(at=de.slice(Gt,pe)),Er=!0,de.charCodeAt(++pe)!=117&&Bt(pe,"Expecting Unicode escape sequence \\uXXXX"),++pe;var Hi=Rs(4),mn=String.fromCharCode(Hi);mn||Bt(pe-1,"Invalid Unicode escape"),(yt?aa(Hi):za(Hi))||Bt(pe-4,"Invalid Unicode escape"),at+=mn}else break;yt=!1}return Er?at:de.slice(Gt,pe)}function Ws(){var at=Ir(),yt=Yi;return!Er&&Hr(at)&&(yt=ts[at]),pr(yt,at)}function rr(){i=De,ue=Le,Dt=Ve,ga()}function qo(at){if(It=at,pe=De,Fe.locations)for(;pe<nt;)nt=de.lastIndexOf(`
`,nt-2)+1,--Qe;js(),ga()}function Ja(){this.type=null,this.start=De,this.end=null}function eo(){this.start=Pe,this.end=null,W!==null&&(this.source=W)}function ns(){var at=new Ja;return Fe.locations&&(at.loc=new eo),Fe.directSourceFile&&(at.sourceFile=Fe.directSourceFile),Fe.ranges&&(at.range=[De,0]),at}function $n(at){var yt=new Ja;return yt.start=at.start,Fe.locations&&(yt.loc=new eo,yt.loc.start=at.loc.start),Fe.ranges&&(yt.range=[at.range[0],0]),yt}function bn(at,yt){return at.type=yt,at.end=ue,Fe.locations&&(at.loc.end=Dt),Fe.ranges&&(at.range[1]=ue),at}function Oa(at){return Fe.ecmaVersion>=5&&at.type==="ExpressionStatement"&&at.expression.type==="Literal"&&at.expression.value==="use strict"}function gr(at){if(Ue===at)return rr(),!0}function ba(){return!Fe.strictSemicolons&&(Ue===wn||Ue===Ba||po.test(de.slice(ue,De)))}function go(){!gr(te)&&!ba()&&Lr()}function sr(at){Ue===at?rr():Lr()}function Lr(){Bt(De,"Unexpected token")}function vs(at){at.type!=="Identifier"&&at.type!=="MemberExpression"&&Bt(at.start,"Assigning to rvalue"),It&&at.type==="Identifier"&&Ya(at.name)&&Bt(at.start,"Assigning to "+at.name+" in strict mode")}function Ho(at){i=ue=pe,Fe.locations&&(Dt=new $a),Vt=It=null,Wt=[],ga();var yt=at||ns(),Gt=!0;for(at||(yt.body=[]);Ue!==wn;){var ai=Ys();yt.body.push(ai),Gt&&Oa(ai)&&qo(!0),Gt=!1}return bn(yt,"Program")}var Sa={kind:"loop"},Eo={kind:"switch"};function Ys(){(Ue===Qt||Ue===Ii&&ge=="/=")&&ga(!0);var at=Ue,yt=ns();switch(at){case An:case pi:rr();var Gt=at===An;gr(te)||ba()?yt.label=null:Ue!==Yi?Lr():(yt.label=Jt(),go());for(var ai=0;ai<Wt.length;++ai){var Hi=Wt[ai];if((yt.label==null||Hi.name===yt.label.name)&&(Hi.kind!=null&&(Gt||Hi.kind==="loop")||yt.label&&Gt))break}return ai===Wt.length&&Bt(yt.start,"Unsyntactic "+at.keyword),bn(yt,Gt?"BreakStatement":"ContinueStatement");case Zn:return rr(),go(),bn(yt,"DebuggerStatement");case mt:return rr(),Wt.push(Sa),yt.body=Ys(),Wt.pop(),sr(ks),yt.test=rs(),go(),bn(yt,"DoWhileStatement");case Ni:if(rr(),Wt.push(Sa),sr(Bs),Ue===te)return Ns(yt,null);if(Ue===nr){var mn=ns();return rr(),Ar(mn,!0),bn(mn,"VariableDeclaration"),mn.declarations.length===1&&gr(an)?ma(yt,mn):Ns(yt,mn)}var mn=Nr(!1,!0);return gr(an)?(vs(mn),ma(yt,mn)):Ns(yt,mn);case lr:return rr(),Ot(yt,!0);case es:return rr(),yt.test=rs(),yt.consequent=Ys(),yt.alternate=gr(bi)?Ys():null,bn(yt,"IfStatement");case kr:return!Vt&&!Fe.allowReturnOutsideFunction&&Bt(De,"'return' outside of function"),rr(),gr(te)||ba()?yt.argument=null:(yt.argument=Nr(),go()),bn(yt,"ReturnStatement");case ht:rr(),yt.discriminant=rs(),yt.cases=[],sr(va),Wt.push(Eo);for(var Pn,xn;Ue!=Ba;)if(Ue===en||Ue===Xi){var jr=Ue===en;Pn&&bn(Pn,"SwitchCase"),yt.cases.push(Pn=ns()),Pn.consequent=[],rr(),jr?Pn.test=Nr():(xn&&Bt(i,"Multiple default clauses"),xn=!0,Pn.test=null),sr(Be)}else Pn||Lr(),Pn.consequent.push(Ys());return Pn&&bn(Pn,"SwitchCase"),rr(),Wt.pop(),bn(yt,"SwitchStatement");case Tn:return rr(),po.test(de.slice(ue,De))&&Bt(ue,"Illegal newline after throw"),yt.argument=Nr(),go(),bn(yt,"ThrowStatement");case it:if(rr(),yt.block=Kr(),yt.handler=null,Ue===ar){var xs=ns();rr(),sr(Bs),xs.param=Jt(),It&&Ya(xs.param.name)&&Bt(xs.param.start,"Binding "+xs.param.name+" in strict mode"),sr(Ds),xs.guard=null,xs.body=Kr(),yt.handler=bn(xs,"CatchClause")}return yt.guardedHandlers=hi,yt.finalizer=gr(At)?Kr():null,!yt.handler&&!yt.finalizer&&Bt(yt.start,"Missing catch or finally clause"),bn(yt,"TryStatement");case nr:return rr(),Ar(yt),go(),bn(yt,"VariableDeclaration");case ks:return rr(),yt.test=rs(),Wt.push(Sa),yt.body=Ys(),Wt.pop(),bn(yt,"WhileStatement");case Es:return It&&Bt(De,"'with' in strict mode"),rr(),yt.object=rs(),yt.body=Ys(),bn(yt,"WithStatement");case va:return Kr();case te:return rr(),bn(yt,"EmptyStatement");default:var Is=ge,Vs=Nr();if(at===Yi&&Vs.type==="Identifier"&&gr(Be)){for(var ai=0;ai<Wt.length;++ai)Wt[ai].name===Is&&Bt(Vs.start,"Label '"+Is+"' is already declared");var EA=Ue.isLoop?"loop":Ue===ht?"switch":null;return Wt.push({name:Is,kind:EA}),yt.body=Ys(),Wt.pop(),yt.label=Vs,bn(yt,"LabeledStatement")}else return yt.expression=Vs,go(),bn(yt,"ExpressionStatement")}}function rs(){sr(Bs);var at=Nr();return sr(Ds),at}function Kr(at){var yt=ns(),Gt=!0,ai=!1,Hi;for(yt.body=[],sr(va);!gr(Ba);){var mn=Ys();yt.body.push(mn),Gt&&at&&Oa(mn)&&(Hi=ai,qo(ai=!0)),Gt=!1}return ai&&!Hi&&qo(!1),bn(yt,"BlockStatement")}function Ns(at,yt){return at.init=yt,sr(te),at.test=Ue===te?null:Nr(),sr(te),at.update=Ue===Ds?null:Nr(),sr(Ds),at.body=Ys(),Wt.pop(),bn(at,"ForStatement")}function ma(at,yt){return at.left=yt,at.right=Nr(),sr(Ds),at.body=Ys(),Wt.pop(),bn(at,"ForInStatement")}function Ar(at,yt){for(at.declarations=[],at.kind="var";;){var Gt=ns();if(Gt.id=Jt(),It&&Ya(Gt.id.name)&&Bt(Gt.id.start,"Binding "+Gt.id.name+" in strict mode"),Gt.init=gr(ti)?Nr(!0,yt):null,at.declarations.push(bn(Gt,"VariableDeclarator")),!gr(M))break}return at}function Nr(at,yt){var Gt=xr(yt);if(!at&&Ue===M){var ai=$n(Gt);for(ai.expressions=[Gt];gr(M);)ai.expressions.push(xr(yt));return bn(ai,"SequenceExpression")}return Gt}function xr(at){var yt=Io(at);if(Ue.isAssign){var Gt=$n(yt);return Gt.operator=ge,Gt.left=yt,rr(),Gt.right=xr(at),vs(yt),bn(Gt,"AssignmentExpression")}return yt}function Io(at){var yt=oa(at);if(gr(dt)){var Gt=$n(yt);return Gt.test=yt,Gt.consequent=Nr(!0),sr(Be),Gt.alternate=Nr(!0,at),bn(Gt,"ConditionalExpression")}return yt}function oa(at){return hs(ys(),-1,at)}function hs(at,yt,Gt){var ai=Ue.binop;if(ai!=null&&(!Gt||Ue!==an)&&ai>yt){var Hi=$n(at);Hi.left=at,Hi.operator=ge;var mn=Ue;rr(),Hi.right=hs(ys(),ai,Gt);var Pn=bn(Hi,mn===Ln||mn===or?"LogicalExpression":"BinaryExpression");return hs(Pn,yt,Gt)}return at}function ys(){if(Ue.prefix){var at=ns(),yt=Ue.isUpdate;return at.operator=ge,at.prefix=!0,Ce=!0,rr(),at.argument=ys(),yt?vs(at.argument):It&&at.operator==="delete"&&at.argument.type==="Identifier"&&Bt(at.start,"Deleting local variable in strict mode"),bn(at,yt?"UpdateExpression":"UnaryExpression")}for(var Gt=Ca();Ue.postfix&&!ba();){var at=$n(Gt);at.operator=ge,at.prefix=!1,at.argument=Gt,vs(Gt),rr(),Gt=bn(at,"UpdateExpression")}return Gt}function Ca(){return Na(Zo())}function Na(at,yt){if(gr(Ye)){var Gt=$n(at);return Gt.object=at,Gt.property=Jt(!0),Gt.computed=!1,Na(bn(Gt,"MemberExpression"),yt)}else if(gr(yr)){var Gt=$n(at);return Gt.object=at,Gt.property=Nr(),Gt.computed=!0,sr(Zs),Na(bn(Gt,"MemberExpression"),yt)}else if(!yt&&gr(Bs)){var Gt=$n(at);return Gt.callee=at,Gt.arguments=si(Ds,!1),Na(bn(Gt,"CallExpression"),yt)}else return at}function Zo(){switch(Ue){case Hs:var ai=ns();return rr(),bn(ai,"ThisExpression");case Yi:return Jt();case Zt:case Ti:case ei:var ai=ns();return ai.value=ge,ai.raw=de.slice(De,Le),rr(),bn(ai,"Literal");case co:case Pa:case os:var ai=ns();return ai.value=Ue.atomValue,ai.raw=Ue.keyword,rr(),bn(ai,"Literal");case Bs:var at=Pe,yt=De;rr();var Gt=Nr();return Gt.start=yt,Gt.end=Le,Fe.locations&&(Gt.loc.start=at,Gt.loc.end=Ve),Fe.ranges&&(Gt.range=[yt,Le]),sr(Ds),Gt;case yr:var ai=ns();return rr(),ai.elements=si(Zs,!0,!0),bn(ai,"ArrayExpression");case va:return mo();case lr:var ai=ns();return rr(),Ot(ai,!1);case Ta:return XA();default:Lr()}}function XA(){var at=ns();return rr(),at.callee=Na(Zo(),!0),gr(Bs)?at.arguments=si(Ds,!1):at.arguments=hi,bn(at,"NewExpression")}function mo(){var at=ns(),yt=!0,Gt=!1;for(at.properties=[],rr();!gr(Ba);){if(yt)yt=!1;else if(sr(M),Fe.allowTrailingCommas&&gr(Ba))break;var ai={key:$s()},Hi=!1,mn;if(gr(Be)?(ai.value=Nr(!0),mn=ai.kind="init"):Fe.ecmaVersion>=5&&ai.key.type==="Identifier"&&(ai.key.name==="get"||ai.key.name==="set")?(Hi=Gt=!0,mn=ai.kind=ai.key.name,ai.key=$s(),Ue!==Bs&&Lr(),ai.value=Ot(ns(),!1)):Lr(),ai.key.type==="Identifier"&&(It||Gt))for(var Pn=0;Pn<at.properties.length;++Pn){var xn=at.properties[Pn];if(xn.key.name===ai.key.name){var jr=mn==xn.kind||Hi&&xn.kind==="init"||mn==="init"&&(xn.kind==="get"||xn.kind==="set");jr&&!It&&mn==="init"&&xn.kind==="init"&&(jr=!1),jr&&Bt(ai.key.start,"Redefinition of property")}}at.properties.push(ai)}return bn(at,"ObjectExpression")}function $s(){return Ue===Zt||Ue===Ti?Zo():Jt(!0)}function Ot(at,yt){Ue===Yi?at.id=Jt():yt?Lr():at.id=null,at.params=[];var Gt=!0;for(sr(Bs);!gr(Ds);)Gt?Gt=!1:sr(M),at.params.push(Jt());var ai=Vt,Hi=Wt;if(Vt=!0,Wt=[],at.body=Kr(!0),Vt=ai,Wt=Hi,It||at.body.body.length&&Oa(at.body.body[0]))for(var mn=at.id?-1:0;mn<at.params.length;++mn){var Pn=mn<0?at.id:at.params[mn];if((ya(Pn.name)||Ya(Pn.name))&&Bt(Pn.start,"Defining '"+Pn.name+"' in strict mode"),mn>=0)for(var xn=0;xn<mn;++xn)Pn.name===at.params[xn].name&&Bt(Pn.start,"Argument name clash in strict mode")}return bn(at,yt?"FunctionDeclaration":"FunctionExpression")}function si(at,yt,Gt){for(var ai=[],Hi=!0;!gr(at);){if(Hi)Hi=!1;else if(sr(M),yt&&Fe.allowTrailingCommas&&gr(at))break;Gt&&Ue===M?ai.push(null):ai.push(Nr(!0))}return ai}function Jt(at){var yt=ns();return at&&Fe.forbidReserved=="everywhere"&&(at=!1),Ue===Yi?(!at&&(Fe.forbidReserved&&(Fe.ecmaVersion===3?fo:Go)(ge)||It&&ya(ge))&&de.slice(De,Le).indexOf("\\")==-1&&Bt(De,"The keyword '"+ge+"' is reserved"),yt.name=ge):at&&Ue.keyword?yt.name=Ue.keyword:Lr(),Ce=!1,rr(),bn(yt,"Identifier")}}),w.version||(w=null)}function Z(Re,Fe){return(f.acorn||w).parse(Re,Fe)}var K={"+":"__add","-":"__subtract","*":"__multiply","/":"__divide","%":"__modulo","==":"__equals","!=":"__equals"},se={"-":"__negate","+":"__self"},oe=g.each(["add","subtract","multiply","divide","modulo","equals","negate"],function(Re){this["__"+Re]="#"+Re},{__self:function(){return this}});le.inject(oe),Je.inject(oe),sn.inject(oe);function fe(Re,Fe,de){var Ae=K[Fe];if(Re&&Re[Ae]){var W=Re[Ae](de);return Fe==="!="?!W:W}switch(Fe){case"+":return Re+de;case"-":return Re-de;case"*":return Re*de;case"/":return Re/de;case"%":return Re%de;case"==":return Re==de;case"!=":return Re!=de}}function ye(Re,Fe){var de=se[Re];if(Fe&&Fe[de])return Fe[de]();switch(Re){case"+":return+Fe;case"-":return-Fe}}function Me(Re,Fe){if(!Re)return"";Fe=Fe||{};var de=[];function Ae(It){for(var Bt=0,hi=de.length;Bt<hi;Bt++){var Zt=de[Bt];if(Zt[0]>=It)break;It+=Zt[1]}return It}function W(It){return Re.substring(Ae(It.range[0]),Ae(It.range[1]))}function ie(It,Bt){return Re.substring(Ae(It.range[1]),Ae(Bt.range[0]))}function he(It,Bt){for(var hi=Ae(It.range[0]),Zt=Ae(It.range[1]),ei=0,Ti=de.length-1;Ti>=0;Ti--)if(hi>de[Ti][0]){ei=Ti+1;break}de.splice(ei,0,[hi,Bt.length-Zt+hi]),Re=Re.substring(0,hi)+Bt+Re.substring(Zt)}function me(It,Bt){switch(It.type){case"UnaryExpression":if(It.operator in se&&It.argument.type!=="Literal"){var hi=W(It.argument);he(It,'$__("'+It.operator+'", '+hi+")")}break;case"BinaryExpression":if(It.operator in K&&It.left.type!=="Literal"){var Zt=W(It.left),ei=W(It.right),Ti=ie(It.left,It.right),Yi=It.operator;he(It,"__$__("+Zt+","+Ti.replace(new RegExp("\\"+Yi),'"'+Yi+'"')+", "+ei+")")}break;case"UpdateExpression":case"AssignmentExpression":var wn=Bt&&Bt.type;if(!(wn==="ForStatement"||wn==="BinaryExpression"&&/^[=!<>]/.test(Bt.operator)||wn==="MemberExpression"&&Bt.computed)){if(It.type==="UpdateExpression"){var hi=W(It.argument),An="__$__("+hi+', "'+It.operator[0]+'", 1)',en=hi+" = "+An;It.prefix?en="("+en+")":(wn==="AssignmentExpression"||wn==="VariableDeclarator"||wn==="BinaryExpression")&&(W(Bt.left||Bt.id)===hi&&(en=An),en=hi+"; "+en),he(It,en)}else if(/^.=$/.test(It.operator)&&It.left.type!=="Literal"){var Zt=W(It.left),ei=W(It.right),An=Zt+" = __$__("+Zt+', "'+It.operator[0]+'", '+ei+")";he(It,/^\(.*\)$/.test(W(It))?"("+An+")":An)}}break}}function pe(It){switch(It.type){case"ExportDefaultDeclaration":he({range:[It.start,It.declaration.start]},"module.exports = ");break;case"ExportNamedDeclaration":var Bt=It.declaration,hi=It.specifiers;if(Bt){var Zt=Bt.declarations;Zt&&(Zt.forEach(function(Ti){he(Ti,"module.exports."+W(Ti))}),he({range:[It.start,Bt.start+Bt.kind.length]},""))}else if(hi){var ei=hi.map(function(Ti){var Yi=W(Ti);return"module.exports."+Yi+" = "+Yi+"; "}).join("");ei&&he(It,ei)}break}}function De(It,Bt,hi){if(It){for(var Zt in It)if(Zt!=="range"&&Zt!=="loc"){var ei=It[Zt];if(Array.isArray(ei))for(var Ti=0,Yi=ei.length;Ti<Yi;Ti++)De(ei[Ti],It,hi);else ei&&typeof ei=="object"&&De(ei,It,hi)}hi.operatorOverloading!==!1&&me(It,Bt),hi.moduleExports!==!1&&pe(It)}}function Le(It){var Bt="",hi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(It=(Math.abs(It)<<1)+(It<0?1:0);It||!Bt;){var Zt=It&31;It>>=5,It&&(Zt|=32),Bt+=hi[Zt]}return Bt}var Pe=Fe.url||"",Ve=Fe.sourceMaps,Ue=Fe.paperFeatures||{},ge=Fe.source||Re,Ce=Fe.offset||0,Qe=pn.agent,nt=Qe.versionNumber,i=!1,ue=/\r\n|\n|\r/mg,Dt;if(Ve&&(Qe.chrome&&nt>=30||Qe.webkit&&nt>=537.76||Qe.firefox&&nt>=23||Qe.node)){if(Qe.node)Ce-=2;else if(l&&Pe&&!l.location.href.indexOf(Pe)){var Vt=m.getElementsByTagName("html")[0].innerHTML;Ce=Vt.substr(0,Vt.indexOf(Re)+1).match(ue).length+1}i=Ce>0&&!(Qe.chrome&&nt>=36||Qe.safari&&nt>=600||Qe.firefox&&nt>=40||Qe.node);var Wt=["AA"+Le(i?0:Ce)+"A"];Wt.length=(Re.match(ue)||[]).length+1+(i?Ce:0),Dt={version:3,file:Pe,names:[],mappings:Wt.join(";AACA"),sourceRoot:"",sources:[Pe],sourcesContent:[ge]}}return(Ue.operatorOverloading!==!1||Ue.moduleExports!==!1)&&De(Z(Re,{ranges:!0,preserveParens:!0,sourceType:"module"}),null,Ue),Dt&&(i&&(Re=new Array(Ce+1).join(`
`)+Re),/^(inline|both)$/.test(Ve)&&(Re+=`
//# sourceMappingURL=data:application/json;base64,`+t.btoa(unescape(encodeURIComponent(JSON.stringify(Dt))))),Re+=`
//# sourceURL=`+(Pe||"paperscript")),{url:Pe,source:ge,code:Re,map:Dt}}function xe(Re,Fe,de){pn=Fe;var Ae=Fe.getView(),W=/\btool\.\w+|\s+on(?:Key|Mouse)(?:Up|Down|Move|Drag)\b/.test(Re)&&!/\bnew\s+Tool\b/.test(Re)?new zn:null,ie=W?W._events:[],he=["onFrame","onResize"].concat(ie),me=[],pe=[],De,Le=typeof Re=="object"?Re:Me(Re,de);Re=Le.code;function Pe(nt,i){for(var ue in nt)(i||!/^_/.test(ue))&&new RegExp("([\\b\\s\\W]|^)"+ue.replace(/\$/g,"\\$")+"\\b").test(Re)&&(me.push(ue),pe.push(nt[ue]))}Pe({__$__:fe,$__:ye,paper:Fe,tool:W},!0),Pe(Fe),Re="var module = { exports: {} }; "+Re;var Ce=g.each(he,function(nt){new RegExp("\\s+"+nt+"\\b").test(Re)&&(me.push(nt),this.push("module.exports."+nt+" = "+nt+";"))},[]).join(`
`);Ce&&(Re+=`
`+Ce),Re+=`
return module.exports;`;var Ve=pn.agent;if(m&&(Ve.chrome||Ve.firefox&&Ve.versionNumber<40)){var Ue=m.createElement("script"),ge=m.head||m.getElementsByTagName("head")[0];Ve.firefox&&(Re=`
`+Re),Ue.appendChild(m.createTextNode("document.__paperscript__ = function("+me+") {"+Re+`
}`)),ge.appendChild(Ue),De=m.__paperscript__,delete m.__paperscript__,ge.removeChild(Ue)}else De=Function(me,Re);var Ce=De&&De.apply(Fe,pe),Qe=Ce||{};return g.each(ie,function(nt){var i=Qe[nt];i&&(W[nt]=i)}),Ae&&(Qe.onResize&&Ae.setOnResize(Qe.onResize),Ae.emit("resize",{size:Ae.size,delta:new le}),Qe.onFrame&&Ae.setOnFrame(Qe.onFrame),Ae.requestUpdate()),Ce}function ke(Re){if(/^text\/(?:x-|)paperscript$/.test(Re.type)&&u.getAttribute(Re,"ignore")!=="true"){var Fe=u.getAttribute(Re,"canvas"),de=m.getElementById(Fe),Ae=Re.src||Re.getAttribute("data-src"),W=u.hasAttribute(Re,"async"),ie="data-paper-scope";if(!de)throw new Error('Unable to find canvas with id "'+Fe+'"');var he=u.get(de.getAttribute(ie))||new u().setup(de);return de.setAttribute(ie,he._id),Ae?Kt.request({url:Ae,async:W,mimeType:"text/plain",onLoad:function(me){xe(me,he,Ae)}}):xe(Re.innerHTML,he,Re.baseURI),Re.setAttribute("data-paper-ignore","true"),he}}function be(){g.each(m&&m.getElementsByTagName("script"),ke)}function Ne(Re){return Re?ke(Re):be()}return l&&(m.readyState==="complete"?setTimeout(be):Li.add(l,{load:be})),{compile:Me,execute:xe,load:Ne,parse:Z,calculateBinary:fe,calculateUnary:ye}}).call(this);var pn=new(u.inject(g.exports,{Base:g,Numerical:ee,Key:vr,DomEvent:Li,DomElement:li,document:m,window:l,Symbol:di,PlacedSymbol:qt}));return pn.agent.node&&Kv(pn),typeof n=="function"&&n.amd?n("paper",pn):e&&(e.exports=pn),pn}).call(hh,typeof self=="object"?self:null)})(Fw);var M_=Fw.exports;function j8(e){let t,n,l="Click and drag to draw a polygon. Press Escape to exit.",m,g;return{c(){t=Sr("div"),n=Sr("span"),n.textContent=l,m=ea(),g=Sr("canvas"),this.h()},l(P){t=Cr(P,"DIV",{class:!0});var u=Vn(t);n=Cr(u,"SPAN",{class:!0,"data-svelte-h":!0}),hu(n)!=="svelte-1m9xrla"&&(n.textContent=l),m=ta(u),g=Cr(u,"CANVAS",{class:!0}),Vn(g).forEach(Qi),u.forEach(Qi),this.h()},h(){ki(n,"class","svelte-jrtjeu"),ki(g,"class","canvas svelte-jrtjeu"),ki(t,"class","draw-wrapper svelte-jrtjeu")},m(P,u){qr(P,t,u),un(t,n),un(t,m),un(t,g),e[5](g)},p:Oo,i:Oo,o:Oo,d(P){P&&Qi(t),e[5](null)}}}function W8(e,t,n){let{path:l}=t,{updatePath:m}=t,{updateIsDrawing:g}=t,{isDrawing:P}=t,u,Q;jg(()=>{M_.setup(Q);let re=new M_.Tool;re.onMouseDown=function(ee){n(1,l=new M_.Path),n(1,l.strokeColor="black",l),l.add(ee.point)},re.onMouseDrag=function(ee){u&&l.add(ee.point)},re.onMouseUp=function(ee){if(!u)return;l.simplify(.5),l.clearHandles(),n(1,l.closed=!0,l);let ce=[];for(let le of l.segments){console.log();let je=le.point;ce.push({x:je.x,y:je.y})}m(ce),g(!1)},re.onKeyDown=function(ee){console.log(ee),ee.key==="escape"&&g(!1)}});function O(re){Sl[re?"unshift":"push"](()=>{Q=re,n(0,Q)})}return e.$$set=re=>{"path"in re&&n(1,l=re.path),"updatePath"in re&&n(2,m=re.updatePath),"updateIsDrawing"in re&&n(3,g=re.updateIsDrawing),"isDrawing"in re&&n(4,P=re.isDrawing)},e.$$.update=()=>{e.$$.dirty&16&&(u=P)},[Q,l,m,g,P,O]}class Y8 extends No{constructor(t){super(),Vo(this,t,W8,j8,ho,{path:1,updatePath:2,updateIsDrawing:3,isDrawing:4})}}function ey(e,t,n){const l=e.slice();return l[5]=t[n],l}function ty(e){let t,n=`${e[5][2]} ${fg[e[0]]??""}`,l;return{c(){t=Sr("span"),l=UA(n),this.h()},l(m){t=Cr(m,"SPAN",{class:!0});var g=Vn(t);l=GA(g,n),g.forEach(Qi),this.h()},h(){ki(t,"class","svelte-1av6wyf")},m(m,g){qr(m,t,g),un(t,l)},p(m,g){g&3&&n!==(n=`${m[5][2]} ${fg[m[0]]??""}`)&&Yh(l,n)},d(m){m&&Qi(t)}}}function iy(e){let t,n=e[5][2]&&ty(e);return{c(){n&&n.c(),t=eA()},l(l){n&&n.l(l),t=eA()},m(l,m){n&&n.m(l,m),qr(l,t,m)},p(l,m){l[5][2]?n?n.p(l,m):(n=ty(l),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(l){l&&Qi(t),n&&n.d(l)}}}function $8(e){let t,n,l,m,g,P=$h(e[1]),u=[];for(let Q=0;Q<P.length;Q+=1)u[Q]=iy(ey(e,P,Q));return{c(){t=Sr("div"),n=Sr("div"),m=ea(),g=Sr("div");for(let Q=0;Q<u.length;Q+=1)u[Q].c();this.h()},l(Q){t=Cr(Q,"DIV",{class:!0});var O=Vn(t);n=Cr(O,"DIV",{class:!0,style:!0}),Vn(n).forEach(Qi),m=ta(O),g=Cr(O,"DIV",{class:!0});var re=Vn(g);for(let ee=0;ee<u.length;ee+=1)u[ee].l(re);re.forEach(Qi),O.forEach(Qi),this.h()},h(){ki(n,"class","gradient svelte-1av6wyf"),ki(n,"style",l=`background-image: url("/phast/SVG/ticks.svg"), ${e[2]}`),ki(g,"class","label-container svelte-1av6wyf"),ki(t,"class","legend-container svelte-1av6wyf")},m(Q,O){qr(Q,t,O),un(t,n),un(t,m),un(t,g);for(let re=0;re<u.length;re+=1)u[re]&&u[re].m(g,null)},p(Q,[O]){if(O&4&&l!==(l=`background-image: url("/phast/SVG/ticks.svg"), ${Q[2]}`)&&ki(n,"style",l),O&3){P=$h(Q[1]);let re;for(re=0;re<P.length;re+=1){const ee=ey(Q,P,re);u[re]?u[re].p(ee,O):(u[re]=iy(ee),u[re].c(),u[re].m(g,null))}for(;re<u.length;re+=1)u[re].d(1);u.length=P.length}},i:Oo,o:Oo,d(Q){Q&&Qi(t),ug(u,Q)}}}function X8(e,t,n){let l=dg(),m,{colorScheme:g}=t,{metric:P}=t;function u(Q){let O=`linear-gradient(${Q.map(re=>re[1]).flat().reverse()})`;return console.log(O),O}return e.$$set=Q=>{"colorScheme"in Q&&n(3,g=Q.colorScheme),"metric"in Q&&n(0,P=Q.metric)},e.$$.update=()=>{e.$$.dirty&8&&n(1,l=dg(0,1,g).slice(1)),e.$$.dirty&2&&n(2,m=u(l))},[P,l,m,g,u]}class K8 extends No{constructor(t){super(),Vo(this,t,X8,$8,ho,{colorScheme:3,metric:0,createPaletteGradient:4})}get createPaletteGradient(){return this.$$.ctx[4]}}function $p(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function J8(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Ow(e){let t,n,l;e.length!==2?(t=$p,n=(u,Q)=>$p(e(u),Q),l=(u,Q)=>e(u)-Q):(t=e===$p||e===J8?e:e6,n=e,l=e);function m(u,Q,O=0,re=u.length){if(O<re){if(t(Q,Q)!==0)return re;do{const ee=O+re>>>1;n(u[ee],Q)<0?O=ee+1:re=ee}while(O<re)}return O}function g(u,Q,O=0,re=u.length){if(O<re){if(t(Q,Q)!==0)return re;do{const ee=O+re>>>1;n(u[ee],Q)<=0?O=ee+1:re=ee}while(O<re)}return O}function P(u,Q,O=0,re=u.length){const ee=m(u,Q,O,re-1);return ee>O&&l(u[ee-1],Q)>-l(u[ee],Q)?ee-1:ee}return{left:m,center:P,right:g}}function e6(){return 0}function t6(e){return e===null?NaN:+e}const i6=Ow($p),n6=i6.right;Ow(t6).center;function ny(e,t){let n,l;if(t===void 0)for(const m of e)m!=null&&(n===void 0?m>=m&&(n=l=m):(n>m&&(n=m),l<m&&(l=m)));else{let m=-1;for(let g of e)(g=t(g,++m,e))!=null&&(n===void 0?g>=g&&(n=l=g):(n>g&&(n=g),l<g&&(l=g)))}return[n,l]}const r6=Math.sqrt(50),s6=Math.sqrt(10),a6=Math.sqrt(2);function pg(e,t,n){const l=(t-e)/Math.max(0,n),m=Math.floor(Math.log10(l)),g=l/Math.pow(10,m),P=g>=r6?10:g>=s6?5:g>=a6?2:1;let u,Q,O;return m<0?(O=Math.pow(10,-m)/P,u=Math.round(e*O),Q=Math.round(t*O),u/O<e&&++u,Q/O>t&&--Q,O=-O):(O=Math.pow(10,m)*P,u=Math.round(e/O),Q=Math.round(t/O),u*O<e&&++u,Q*O>t&&--Q),Q<u&&.5<=n&&n<2?pg(e,t,n*2):[u,Q,O]}function o6(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const l=t<e,[m,g,P]=l?pg(t,e,n):pg(e,t,n);if(!(g>=m))return[];const u=g-m+1,Q=new Array(u);if(l)if(P<0)for(let O=0;O<u;++O)Q[O]=(g-O)/-P;else for(let O=0;O<u;++O)Q[O]=(g-O)*P;else if(P<0)for(let O=0;O<u;++O)Q[O]=(m+O)/-P;else for(let O=0;O<u;++O)Q[O]=(m+O)*P;return Q}function E1(e,t,n){return t=+t,e=+e,n=+n,pg(e,t,n)[2]}function A6(e,t,n){t=+t,e=+e,n=+n;const l=t<e,m=l?E1(t,e,n):E1(e,t,n);return(l?-1:1)*(m<0?1/-m:m)}function l6(e){return e}var T_=1,P_=2,I1=3,Lf=4,ry=1e-6;function u6(e){return"translate("+e+",0)"}function h6(e){return"translate(0,"+e+")"}function c6(e){return t=>+e(t)}function f6(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),n=>+e(n)+t}function d6(){return!this.__axis}function Nw(e,t){var n=[],l=null,m=null,g=6,P=6,u=3,Q=typeof window<"u"&&window.devicePixelRatio>1?0:.5,O=e===T_||e===Lf?-1:1,re=e===Lf||e===P_?"x":"y",ee=e===T_||e===I1?u6:h6;function ce(le){var je=l??(t.ticks?t.ticks.apply(t,n):t.domain()),Je=m??(t.tickFormat?t.tickFormat.apply(t,n):l6),Xe=Math.max(g,0)+u,Ke=t.range(),xt=+Ke[0]+Q,gt=+Ke[Ke.length-1]+Q,Mt=(t.bandwidth?f6:c6)(t.copy(),Q),Ct=le.selection?le.selection():le,Te=Ct.selectAll(".domain").data([null]),Ai=Ct.selectAll(".tick").data(je,t).order(),ii=Ai.exit(),xi=Ai.enter().append("g").attr("class","tick"),gi=Ai.select("line"),qt=Ai.select("text");Te=Te.merge(Te.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),Ai=Ai.merge(xi),gi=gi.merge(xi.append("line").attr("stroke","currentColor").attr(re+"2",O*g)),qt=qt.merge(xi.append("text").attr("fill","currentColor").attr(re,O*Xe).attr("dy",e===T_?"0em":e===I1?"0.71em":"0.32em")),le!==Ct&&(Te=Te.transition(le),Ai=Ai.transition(le),gi=gi.transition(le),qt=qt.transition(le),ii=ii.transition(le).attr("opacity",ry).attr("transform",function(di){return isFinite(di=Mt(di))?ee(di+Q):this.getAttribute("transform")}),xi.attr("opacity",ry).attr("transform",function(di){var mi=this.parentNode.__axis;return ee((mi&&isFinite(mi=mi(di))?mi:Mt(di))+Q)})),ii.remove(),Te.attr("d",e===Lf||e===P_?P?"M"+O*P+","+xt+"H"+Q+"V"+gt+"H"+O*P:"M"+Q+","+xt+"V"+gt:P?"M"+xt+","+O*P+"V"+Q+"H"+gt+"V"+O*P:"M"+xt+","+Q+"H"+gt),Ai.attr("opacity",1).attr("transform",function(di){return ee(Mt(di)+Q)}),gi.attr(re+"2",O*g),qt.attr(re,O*Xe).text(Je),Ct.filter(d6).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===P_?"start":e===Lf?"end":"middle"),Ct.each(function(){this.__axis=Mt})}return ce.scale=function(le){return arguments.length?(t=le,ce):t},ce.ticks=function(){return n=Array.from(arguments),ce},ce.tickArguments=function(le){return arguments.length?(n=le==null?[]:Array.from(le),ce):n.slice()},ce.tickValues=function(le){return arguments.length?(l=le==null?null:Array.from(le),ce):l&&l.slice()},ce.tickFormat=function(le){return arguments.length?(m=le,ce):m},ce.tickSize=function(le){return arguments.length?(g=P=+le,ce):g},ce.tickSizeInner=function(le){return arguments.length?(g=+le,ce):g},ce.tickSizeOuter=function(le){return arguments.length?(P=+le,ce):P},ce.tickPadding=function(le){return arguments.length?(u=+le,ce):u},ce.offset=function(le){return arguments.length?(Q=+le,ce):Q},ce}function p6(e){return Nw(I1,e)}function g6(e){return Nw(Lf,e)}var m6={value:()=>{}};function Vw(){for(var e=0,t=arguments.length,n={},l;e<t;++e){if(!(l=arguments[e]+"")||l in n||/[\s.]/.test(l))throw new Error("illegal type: "+l);n[l]=[]}return new Xp(n)}function Xp(e){this._=e}function _6(e,t){return e.trim().split(/^|\s+/).map(function(n){var l="",m=n.indexOf(".");if(m>=0&&(l=n.slice(m+1),n=n.slice(0,m)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:l}})}Xp.prototype=Vw.prototype={constructor:Xp,on:function(e,t){var n=this._,l=_6(e+"",n),m,g=-1,P=l.length;if(arguments.length<2){for(;++g<P;)if((m=(e=l[g]).type)&&(m=v6(n[m],e.name)))return m;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++g<P;)if(m=(e=l[g]).type)n[m]=sy(n[m],e.name,t);else if(t==null)for(m in n)n[m]=sy(n[m],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Xp(e)},call:function(e,t){if((m=arguments.length-2)>0)for(var n=new Array(m),l=0,m,g;l<m;++l)n[l]=arguments[l+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(g=this._[e],l=0,m=g.length;l<m;++l)g[l].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var l=this._[e],m=0,g=l.length;m<g;++m)l[m].value.apply(t,n)}};function v6(e,t){for(var n=0,l=e.length,m;n<l;++n)if((m=e[n]).name===t)return m.value}function sy(e,t,n){for(var l=0,m=e.length;l<m;++l)if(e[l].name===t){e[l]=m6,e=e.slice(0,l).concat(e.slice(l+1));break}return n!=null&&e.push({name:t,value:n}),e}var M1="http://www.w3.org/1999/xhtml";const ay={svg:"http://www.w3.org/2000/svg",xhtml:M1,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Yg(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),ay.hasOwnProperty(t)?{space:ay[t],local:e}:e}function y6(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===M1&&t.documentElement.namespaceURI===M1?t.createElement(e):t.createElementNS(n,e)}}function x6(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Uw(e){var t=Yg(e);return(t.local?x6:y6)(t)}function w6(){}function T2(e){return e==null?w6:function(){return this.querySelector(e)}}function b6(e){typeof e!="function"&&(e=T2(e));for(var t=this._groups,n=t.length,l=new Array(n),m=0;m<n;++m)for(var g=t[m],P=g.length,u=l[m]=new Array(P),Q,O,re=0;re<P;++re)(Q=g[re])&&(O=e.call(Q,Q.__data__,re,g))&&("__data__"in Q&&(O.__data__=Q.__data__),u[re]=O);return new ul(l,this._parents)}function S6(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function C6(){return[]}function Gw(e){return e==null?C6:function(){return this.querySelectorAll(e)}}function k6(e){return function(){return S6(e.apply(this,arguments))}}function E6(e){typeof e=="function"?e=k6(e):e=Gw(e);for(var t=this._groups,n=t.length,l=[],m=[],g=0;g<n;++g)for(var P=t[g],u=P.length,Q,O=0;O<u;++O)(Q=P[O])&&(l.push(e.call(Q,Q.__data__,O,P)),m.push(Q));return new ul(l,m)}function Qw(e){return function(){return this.matches(e)}}function qw(e){return function(t){return t.matches(e)}}var I6=Array.prototype.find;function M6(e){return function(){return I6.call(this.children,e)}}function T6(){return this.firstElementChild}function P6(e){return this.select(e==null?T6:M6(typeof e=="function"?e:qw(e)))}var B6=Array.prototype.filter;function D6(){return Array.from(this.children)}function L6(e){return function(){return B6.call(this.children,e)}}function z6(e){return this.selectAll(e==null?D6:L6(typeof e=="function"?e:qw(e)))}function R6(e){typeof e!="function"&&(e=Qw(e));for(var t=this._groups,n=t.length,l=new Array(n),m=0;m<n;++m)for(var g=t[m],P=g.length,u=l[m]=[],Q,O=0;O<P;++O)(Q=g[O])&&e.call(Q,Q.__data__,O,g)&&u.push(Q);return new ul(l,this._parents)}function Hw(e){return new Array(e.length)}function F6(){return new ul(this._enter||this._groups.map(Hw),this._parents)}function gg(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}gg.prototype={constructor:gg,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function O6(e){return function(){return e}}function N6(e,t,n,l,m,g){for(var P=0,u,Q=t.length,O=g.length;P<O;++P)(u=t[P])?(u.__data__=g[P],l[P]=u):n[P]=new gg(e,g[P]);for(;P<Q;++P)(u=t[P])&&(m[P]=u)}function V6(e,t,n,l,m,g,P){var u,Q,O=new Map,re=t.length,ee=g.length,ce=new Array(re),le;for(u=0;u<re;++u)(Q=t[u])&&(ce[u]=le=P.call(Q,Q.__data__,u,t)+"",O.has(le)?m[u]=Q:O.set(le,Q));for(u=0;u<ee;++u)le=P.call(e,g[u],u,g)+"",(Q=O.get(le))?(l[u]=Q,Q.__data__=g[u],O.delete(le)):n[u]=new gg(e,g[u]);for(u=0;u<re;++u)(Q=t[u])&&O.get(ce[u])===Q&&(m[u]=Q)}function U6(e){return e.__data__}function G6(e,t){if(!arguments.length)return Array.from(this,U6);var n=t?V6:N6,l=this._parents,m=this._groups;typeof e!="function"&&(e=O6(e));for(var g=m.length,P=new Array(g),u=new Array(g),Q=new Array(g),O=0;O<g;++O){var re=l[O],ee=m[O],ce=ee.length,le=Q6(e.call(re,re&&re.__data__,O,l)),je=le.length,Je=u[O]=new Array(je),Xe=P[O]=new Array(je),Ke=Q[O]=new Array(ce);n(re,ee,Je,Xe,Ke,le,t);for(var xt=0,gt=0,Mt,Ct;xt<je;++xt)if(Mt=Je[xt]){for(xt>=gt&&(gt=xt+1);!(Ct=Xe[gt])&&++gt<je;);Mt._next=Ct||null}}return P=new ul(P,l),P._enter=u,P._exit=Q,P}function Q6(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function q6(){return new ul(this._exit||this._groups.map(Hw),this._parents)}function H6(e,t,n){var l=this.enter(),m=this,g=this.exit();return typeof e=="function"?(l=e(l),l&&(l=l.selection())):l=l.append(e+""),t!=null&&(m=t(m),m&&(m=m.selection())),n==null?g.remove():n(g),l&&m?l.merge(m).order():m}function Z6(e){for(var t=e.selection?e.selection():e,n=this._groups,l=t._groups,m=n.length,g=l.length,P=Math.min(m,g),u=new Array(m),Q=0;Q<P;++Q)for(var O=n[Q],re=l[Q],ee=O.length,ce=u[Q]=new Array(ee),le,je=0;je<ee;++je)(le=O[je]||re[je])&&(ce[je]=le);for(;Q<m;++Q)u[Q]=n[Q];return new ul(u,this._parents)}function j6(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var l=e[t],m=l.length-1,g=l[m],P;--m>=0;)(P=l[m])&&(g&&P.compareDocumentPosition(g)^4&&g.parentNode.insertBefore(P,g),g=P);return this}function W6(e){e||(e=Y6);function t(ee,ce){return ee&&ce?e(ee.__data__,ce.__data__):!ee-!ce}for(var n=this._groups,l=n.length,m=new Array(l),g=0;g<l;++g){for(var P=n[g],u=P.length,Q=m[g]=new Array(u),O,re=0;re<u;++re)(O=P[re])&&(Q[re]=O);Q.sort(t)}return new ul(m,this._parents).order()}function Y6(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function $6(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function X6(){return Array.from(this)}function K6(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var l=e[t],m=0,g=l.length;m<g;++m){var P=l[m];if(P)return P}return null}function J6(){let e=0;for(const t of this)++e;return e}function eS(){return!this.node()}function tS(e){for(var t=this._groups,n=0,l=t.length;n<l;++n)for(var m=t[n],g=0,P=m.length,u;g<P;++g)(u=m[g])&&e.call(u,u.__data__,g,m);return this}function iS(e){return function(){this.removeAttribute(e)}}function nS(e){return function(){this.removeAttributeNS(e.space,e.local)}}function rS(e,t){return function(){this.setAttribute(e,t)}}function sS(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function aS(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function oS(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function AS(e,t){var n=Yg(e);if(arguments.length<2){var l=this.node();return n.local?l.getAttributeNS(n.space,n.local):l.getAttribute(n)}return this.each((t==null?n.local?nS:iS:typeof t=="function"?n.local?oS:aS:n.local?sS:rS)(n,t))}function Zw(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function lS(e){return function(){this.style.removeProperty(e)}}function uS(e,t,n){return function(){this.style.setProperty(e,t,n)}}function hS(e,t,n){return function(){var l=t.apply(this,arguments);l==null?this.style.removeProperty(e):this.style.setProperty(e,l,n)}}function cS(e,t,n){return arguments.length>1?this.each((t==null?lS:typeof t=="function"?hS:uS)(e,t,n??"")):s0(this.node(),e)}function s0(e,t){return e.style.getPropertyValue(t)||Zw(e).getComputedStyle(e,null).getPropertyValue(t)}function fS(e){return function(){delete this[e]}}function dS(e,t){return function(){this[e]=t}}function pS(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function gS(e,t){return arguments.length>1?this.each((t==null?fS:typeof t=="function"?pS:dS)(e,t)):this.node()[e]}function jw(e){return e.trim().split(/^|\s+/)}function P2(e){return e.classList||new Ww(e)}function Ww(e){this._node=e,this._names=jw(e.getAttribute("class")||"")}Ww.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Yw(e,t){for(var n=P2(e),l=-1,m=t.length;++l<m;)n.add(t[l])}function $w(e,t){for(var n=P2(e),l=-1,m=t.length;++l<m;)n.remove(t[l])}function mS(e){return function(){Yw(this,e)}}function _S(e){return function(){$w(this,e)}}function vS(e,t){return function(){(t.apply(this,arguments)?Yw:$w)(this,e)}}function yS(e,t){var n=jw(e+"");if(arguments.length<2){for(var l=P2(this.node()),m=-1,g=n.length;++m<g;)if(!l.contains(n[m]))return!1;return!0}return this.each((typeof t=="function"?vS:t?mS:_S)(n,t))}function xS(){this.textContent=""}function wS(e){return function(){this.textContent=e}}function bS(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function SS(e){return arguments.length?this.each(e==null?xS:(typeof e=="function"?bS:wS)(e)):this.node().textContent}function CS(){this.innerHTML=""}function kS(e){return function(){this.innerHTML=e}}function ES(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function IS(e){return arguments.length?this.each(e==null?CS:(typeof e=="function"?ES:kS)(e)):this.node().innerHTML}function MS(){this.nextSibling&&this.parentNode.appendChild(this)}function TS(){return this.each(MS)}function PS(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function BS(){return this.each(PS)}function DS(e){var t=typeof e=="function"?e:Uw(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function LS(){return null}function zS(e,t){var n=typeof e=="function"?e:Uw(e),l=t==null?LS:typeof t=="function"?t:T2(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),l.apply(this,arguments)||null)})}function RS(){var e=this.parentNode;e&&e.removeChild(this)}function FS(){return this.each(RS)}function OS(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function NS(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function VS(e){return this.select(e?NS:OS)}function US(e){return arguments.length?this.property("__data__",e):this.node().__data__}function GS(e){return function(t){e.call(this,t,this.__data__)}}function QS(e){return e.trim().split(/^|\s+/).map(function(t){var n="",l=t.indexOf(".");return l>=0&&(n=t.slice(l+1),t=t.slice(0,l)),{type:t,name:n}})}function qS(e){return function(){var t=this.__on;if(t){for(var n=0,l=-1,m=t.length,g;n<m;++n)g=t[n],(!e.type||g.type===e.type)&&g.name===e.name?this.removeEventListener(g.type,g.listener,g.options):t[++l]=g;++l?t.length=l:delete this.__on}}}function HS(e,t,n){return function(){var l=this.__on,m,g=GS(t);if(l){for(var P=0,u=l.length;P<u;++P)if((m=l[P]).type===e.type&&m.name===e.name){this.removeEventListener(m.type,m.listener,m.options),this.addEventListener(m.type,m.listener=g,m.options=n),m.value=t;return}}this.addEventListener(e.type,g,n),m={type:e.type,name:e.name,value:t,listener:g,options:n},l?l.push(m):this.__on=[m]}}function ZS(e,t,n){var l=QS(e+""),m,g=l.length,P;if(arguments.length<2){var u=this.node().__on;if(u){for(var Q=0,O=u.length,re;Q<O;++Q)for(m=0,re=u[Q];m<g;++m)if((P=l[m]).type===re.type&&P.name===re.name)return re.value}return}for(u=t?HS:qS,m=0;m<g;++m)this.each(u(l[m],t,n));return this}function Xw(e,t,n){var l=Zw(e),m=l.CustomEvent;typeof m=="function"?m=new m(t,n):(m=l.document.createEvent("Event"),n?(m.initEvent(t,n.bubbles,n.cancelable),m.detail=n.detail):m.initEvent(t,!1,!1)),e.dispatchEvent(m)}function jS(e,t){return function(){return Xw(this,e,t)}}function WS(e,t){return function(){return Xw(this,e,t.apply(this,arguments))}}function YS(e,t){return this.each((typeof t=="function"?WS:jS)(e,t))}function*$S(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var l=e[t],m=0,g=l.length,P;m<g;++m)(P=l[m])&&(yield P)}var Kw=[null];function ul(e,t){this._groups=e,this._parents=t}function ad(){return new ul([[document.documentElement]],Kw)}function XS(){return this}ul.prototype=ad.prototype={constructor:ul,select:b6,selectAll:E6,selectChild:P6,selectChildren:z6,filter:R6,data:G6,enter:F6,exit:q6,join:H6,merge:Z6,selection:XS,order:j6,sort:W6,call:$6,nodes:X6,node:K6,size:J6,empty:eS,each:tS,attr:AS,style:cS,property:gS,classed:yS,text:SS,html:IS,raise:TS,lower:BS,append:DS,insert:zS,remove:FS,clone:VS,datum:US,on:ZS,dispatch:YS,[Symbol.iterator]:$S};function B_(e){return typeof e=="string"?new ul([[document.querySelector(e)]],[document.documentElement]):new ul([[e]],Kw)}function B2(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Jw(e,t){var n=Object.create(e.prototype);for(var l in t)n[l]=t[l];return n}function od(){}var Qf=.7,mg=1/Qf,e0="\\s*([+-]?\\d+)\\s*",qf="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",fu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",KS=/^#([0-9a-f]{3,8})$/,JS=new RegExp(`^rgb\\(${e0},${e0},${e0}\\)$`),eC=new RegExp(`^rgb\\(${fu},${fu},${fu}\\)$`),tC=new RegExp(`^rgba\\(${e0},${e0},${e0},${qf}\\)$`),iC=new RegExp(`^rgba\\(${fu},${fu},${fu},${qf}\\)$`),nC=new RegExp(`^hsl\\(${qf},${fu},${fu}\\)$`),rC=new RegExp(`^hsla\\(${qf},${fu},${fu},${qf}\\)$`),oy={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};B2(od,tc,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Ay,formatHex:Ay,formatHex8:sC,formatHsl:aC,formatRgb:ly,toString:ly});function Ay(){return this.rgb().formatHex()}function sC(){return this.rgb().formatHex8()}function aC(){return eb(this).formatHsl()}function ly(){return this.rgb().formatRgb()}function tc(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=KS.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?uy(t):n===3?new qA(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Vp(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Vp(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=JS.exec(e))?new qA(t[1],t[2],t[3],1):(t=eC.exec(e))?new qA(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=tC.exec(e))?Vp(t[1],t[2],t[3],t[4]):(t=iC.exec(e))?Vp(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=nC.exec(e))?fy(t[1],t[2]/100,t[3]/100,1):(t=rC.exec(e))?fy(t[1],t[2]/100,t[3]/100,t[4]):oy.hasOwnProperty(e)?uy(oy[e]):e==="transparent"?new qA(NaN,NaN,NaN,0):null}function uy(e){return new qA(e>>16&255,e>>8&255,e&255,1)}function Vp(e,t,n,l){return l<=0&&(e=t=n=NaN),new qA(e,t,n,l)}function oC(e){return e instanceof od||(e=tc(e)),e?(e=e.rgb(),new qA(e.r,e.g,e.b,e.opacity)):new qA}function T1(e,t,n,l){return arguments.length===1?oC(e):new qA(e,t,n,l??1)}function qA(e,t,n,l){this.r=+e,this.g=+t,this.b=+n,this.opacity=+l}B2(qA,T1,Jw(od,{brighter(e){return e=e==null?mg:Math.pow(mg,e),new qA(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Qf:Math.pow(Qf,e),new qA(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new qA(Xh(this.r),Xh(this.g),Xh(this.b),_g(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:hy,formatHex:hy,formatHex8:AC,formatRgb:cy,toString:cy}));function hy(){return`#${Wh(this.r)}${Wh(this.g)}${Wh(this.b)}`}function AC(){return`#${Wh(this.r)}${Wh(this.g)}${Wh(this.b)}${Wh((isNaN(this.opacity)?1:this.opacity)*255)}`}function cy(){const e=_g(this.opacity);return`${e===1?"rgb(":"rgba("}${Xh(this.r)}, ${Xh(this.g)}, ${Xh(this.b)}${e===1?")":`, ${e})`}`}function _g(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Xh(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Wh(e){return e=Xh(e),(e<16?"0":"")+e.toString(16)}function fy(e,t,n,l){return l<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Hl(e,t,n,l)}function eb(e){if(e instanceof Hl)return new Hl(e.h,e.s,e.l,e.opacity);if(e instanceof od||(e=tc(e)),!e)return new Hl;if(e instanceof Hl)return e;e=e.rgb();var t=e.r/255,n=e.g/255,l=e.b/255,m=Math.min(t,n,l),g=Math.max(t,n,l),P=NaN,u=g-m,Q=(g+m)/2;return u?(t===g?P=(n-l)/u+(n<l)*6:n===g?P=(l-t)/u+2:P=(t-n)/u+4,u/=Q<.5?g+m:2-g-m,P*=60):u=Q>0&&Q<1?0:P,new Hl(P,u,Q,e.opacity)}function lC(e,t,n,l){return arguments.length===1?eb(e):new Hl(e,t,n,l??1)}function Hl(e,t,n,l){this.h=+e,this.s=+t,this.l=+n,this.opacity=+l}B2(Hl,lC,Jw(od,{brighter(e){return e=e==null?mg:Math.pow(mg,e),new Hl(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Qf:Math.pow(Qf,e),new Hl(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,l=n+(n<.5?n:1-n)*t,m=2*n-l;return new qA(D_(e>=240?e-240:e+120,m,l),D_(e,m,l),D_(e<120?e+240:e-120,m,l),this.opacity)},clamp(){return new Hl(dy(this.h),Up(this.s),Up(this.l),_g(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=_g(this.opacity);return`${e===1?"hsl(":"hsla("}${dy(this.h)}, ${Up(this.s)*100}%, ${Up(this.l)*100}%${e===1?")":`, ${e})`}`}}));function dy(e){return e=(e||0)%360,e<0?e+360:e}function Up(e){return Math.max(0,Math.min(1,e||0))}function D_(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const D2=e=>()=>e;function uC(e,t){return function(n){return e+n*t}}function hC(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(l){return Math.pow(e+l*t,n)}}function cC(e){return(e=+e)==1?tb:function(t,n){return n-t?hC(t,n,e):D2(isNaN(t)?n:t)}}function tb(e,t){var n=t-e;return n?uC(e,n):D2(isNaN(e)?t:e)}const vg=function e(t){var n=cC(t);function l(m,g){var P=n((m=T1(m)).r,(g=T1(g)).r),u=n(m.g,g.g),Q=n(m.b,g.b),O=tb(m.opacity,g.opacity);return function(re){return m.r=P(re),m.g=u(re),m.b=Q(re),m.opacity=O(re),m+""}}return l.gamma=e,l}(1);function fC(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,l=t.slice(),m;return function(g){for(m=0;m<n;++m)l[m]=e[m]*(1-g)+t[m]*g;return l}}function dC(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function pC(e,t){var n=t?t.length:0,l=e?Math.min(n,e.length):0,m=new Array(l),g=new Array(n),P;for(P=0;P<l;++P)m[P]=L2(e[P],t[P]);for(;P<n;++P)g[P]=t[P];return function(u){for(P=0;P<l;++P)g[P]=m[P](u);return g}}function gC(e,t){var n=new Date;return e=+e,t=+t,function(l){return n.setTime(e*(1-l)+t*l),n}}function Ql(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function mC(e,t){var n={},l={},m;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(m in t)m in e?n[m]=L2(e[m],t[m]):l[m]=t[m];return function(g){for(m in n)l[m]=n[m](g);return l}}var P1=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,L_=new RegExp(P1.source,"g");function _C(e){return function(){return e}}function vC(e){return function(t){return e(t)+""}}function ib(e,t){var n=P1.lastIndex=L_.lastIndex=0,l,m,g,P=-1,u=[],Q=[];for(e=e+"",t=t+"";(l=P1.exec(e))&&(m=L_.exec(t));)(g=m.index)>n&&(g=t.slice(n,g),u[P]?u[P]+=g:u[++P]=g),(l=l[0])===(m=m[0])?u[P]?u[P]+=m:u[++P]=m:(u[++P]=null,Q.push({i:P,x:Ql(l,m)})),n=L_.lastIndex;return n<t.length&&(g=t.slice(n),u[P]?u[P]+=g:u[++P]=g),u.length<2?Q[0]?vC(Q[0].x):_C(t):(t=Q.length,function(O){for(var re=0,ee;re<t;++re)u[(ee=Q[re]).i]=ee.x(O);return u.join("")})}function L2(e,t){var n=typeof t,l;return t==null||n==="boolean"?D2(t):(n==="number"?Ql:n==="string"?(l=tc(t))?(t=l,vg):ib:t instanceof tc?vg:t instanceof Date?gC:dC(t)?fC:Array.isArray(t)?pC:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?mC:Ql)(e,t)}function yC(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var py=180/Math.PI,B1={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function nb(e,t,n,l,m,g){var P,u,Q;return(P=Math.sqrt(e*e+t*t))&&(e/=P,t/=P),(Q=e*n+t*l)&&(n-=e*Q,l-=t*Q),(u=Math.sqrt(n*n+l*l))&&(n/=u,l/=u,Q/=u),e*l<t*n&&(e=-e,t=-t,Q=-Q,P=-P),{translateX:m,translateY:g,rotate:Math.atan2(t,e)*py,skewX:Math.atan(Q)*py,scaleX:P,scaleY:u}}var Gp;function xC(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?B1:nb(t.a,t.b,t.c,t.d,t.e,t.f)}function wC(e){return e==null||(Gp||(Gp=document.createElementNS("http://www.w3.org/2000/svg","g")),Gp.setAttribute("transform",e),!(e=Gp.transform.baseVal.consolidate()))?B1:(e=e.matrix,nb(e.a,e.b,e.c,e.d,e.e,e.f))}function rb(e,t,n,l){function m(O){return O.length?O.pop()+" ":""}function g(O,re,ee,ce,le,je){if(O!==ee||re!==ce){var Je=le.push("translate(",null,t,null,n);je.push({i:Je-4,x:Ql(O,ee)},{i:Je-2,x:Ql(re,ce)})}else(ee||ce)&&le.push("translate("+ee+t+ce+n)}function P(O,re,ee,ce){O!==re?(O-re>180?re+=360:re-O>180&&(O+=360),ce.push({i:ee.push(m(ee)+"rotate(",null,l)-2,x:Ql(O,re)})):re&&ee.push(m(ee)+"rotate("+re+l)}function u(O,re,ee,ce){O!==re?ce.push({i:ee.push(m(ee)+"skewX(",null,l)-2,x:Ql(O,re)}):re&&ee.push(m(ee)+"skewX("+re+l)}function Q(O,re,ee,ce,le,je){if(O!==ee||re!==ce){var Je=le.push(m(le)+"scale(",null,",",null,")");je.push({i:Je-4,x:Ql(O,ee)},{i:Je-2,x:Ql(re,ce)})}else(ee!==1||ce!==1)&&le.push(m(le)+"scale("+ee+","+ce+")")}return function(O,re){var ee=[],ce=[];return O=e(O),re=e(re),g(O.translateX,O.translateY,re.translateX,re.translateY,ee,ce),P(O.rotate,re.rotate,ee,ce),u(O.skewX,re.skewX,ee,ce),Q(O.scaleX,O.scaleY,re.scaleX,re.scaleY,ee,ce),O=re=null,function(le){for(var je=-1,Je=ce.length,Xe;++je<Je;)ee[(Xe=ce[je]).i]=Xe.x(le);return ee.join("")}}}var bC=rb(xC,"px, ","px)","deg)"),SC=rb(wC,", ",")",")"),a0=0,zf=0,Cf=0,sb=1e3,yg,Rf,xg=0,ic=0,$g=0,Hf=typeof performance=="object"&&performance.now?performance:Date,ab=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function z2(){return ic||(ab(CC),ic=Hf.now()+$g)}function CC(){ic=0}function wg(){this._call=this._time=this._next=null}wg.prototype=ob.prototype={constructor:wg,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?z2():+n)+(t==null?0:+t),!this._next&&Rf!==this&&(Rf?Rf._next=this:yg=this,Rf=this),this._call=e,this._time=n,D1()},stop:function(){this._call&&(this._call=null,this._time=1/0,D1())}};function ob(e,t,n){var l=new wg;return l.restart(e,t,n),l}function kC(){z2(),++a0;for(var e=yg,t;e;)(t=ic-e._time)>=0&&e._call.call(void 0,t),e=e._next;--a0}function gy(){ic=(xg=Hf.now())+$g,a0=zf=0;try{kC()}finally{a0=0,IC(),ic=0}}function EC(){var e=Hf.now(),t=e-xg;t>sb&&($g-=t,xg=e)}function IC(){for(var e,t=yg,n,l=1/0;t;)t._call?(l>t._time&&(l=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:yg=n);Rf=e,D1(l)}function D1(e){if(!a0){zf&&(zf=clearTimeout(zf));var t=e-ic;t>24?(e<1/0&&(zf=setTimeout(gy,e-Hf.now()-$g)),Cf&&(Cf=clearInterval(Cf))):(Cf||(xg=Hf.now(),Cf=setInterval(EC,sb)),a0=1,ab(gy))}}function my(e,t,n){var l=new wg;return t=t==null?0:+t,l.restart(m=>{l.stop(),e(m+t)},t,n),l}var MC=Vw("start","end","cancel","interrupt"),TC=[],Ab=0,_y=1,L1=2,Kp=3,vy=4,z1=5,Jp=6;function Xg(e,t,n,l,m,g){var P=e.__transition;if(!P)e.__transition={};else if(n in P)return;PC(e,n,{name:t,index:l,group:m,on:MC,tween:TC,time:g.time,delay:g.delay,duration:g.duration,ease:g.ease,timer:null,state:Ab})}function R2(e,t){var n=Yl(e,t);if(n.state>Ab)throw new Error("too late; already scheduled");return n}function mu(e,t){var n=Yl(e,t);if(n.state>Kp)throw new Error("too late; already running");return n}function Yl(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function PC(e,t,n){var l=e.__transition,m;l[t]=n,n.timer=ob(g,0,n.time);function g(O){n.state=_y,n.timer.restart(P,n.delay,n.time),n.delay<=O&&P(O-n.delay)}function P(O){var re,ee,ce,le;if(n.state!==_y)return Q();for(re in l)if(le=l[re],le.name===n.name){if(le.state===Kp)return my(P);le.state===vy?(le.state=Jp,le.timer.stop(),le.on.call("interrupt",e,e.__data__,le.index,le.group),delete l[re]):+re<t&&(le.state=Jp,le.timer.stop(),le.on.call("cancel",e,e.__data__,le.index,le.group),delete l[re])}if(my(function(){n.state===Kp&&(n.state=vy,n.timer.restart(u,n.delay,n.time),u(O))}),n.state=L1,n.on.call("start",e,e.__data__,n.index,n.group),n.state===L1){for(n.state=Kp,m=new Array(ce=n.tween.length),re=0,ee=-1;re<ce;++re)(le=n.tween[re].value.call(e,e.__data__,n.index,n.group))&&(m[++ee]=le);m.length=ee+1}}function u(O){for(var re=O<n.duration?n.ease.call(null,O/n.duration):(n.timer.restart(Q),n.state=z1,1),ee=-1,ce=m.length;++ee<ce;)m[ee].call(e,re);n.state===z1&&(n.on.call("end",e,e.__data__,n.index,n.group),Q())}function Q(){n.state=Jp,n.timer.stop(),delete l[t];for(var O in l)return;delete e.__transition}}function BC(e,t){var n=e.__transition,l,m,g=!0,P;if(n){t=t==null?null:t+"";for(P in n){if((l=n[P]).name!==t){g=!1;continue}m=l.state>L1&&l.state<z1,l.state=Jp,l.timer.stop(),l.on.call(m?"interrupt":"cancel",e,e.__data__,l.index,l.group),delete n[P]}g&&delete e.__transition}}function DC(e){return this.each(function(){BC(this,e)})}function LC(e,t){var n,l;return function(){var m=mu(this,e),g=m.tween;if(g!==n){l=n=g;for(var P=0,u=l.length;P<u;++P)if(l[P].name===t){l=l.slice(),l.splice(P,1);break}}m.tween=l}}function zC(e,t,n){var l,m;if(typeof n!="function")throw new Error;return function(){var g=mu(this,e),P=g.tween;if(P!==l){m=(l=P).slice();for(var u={name:t,value:n},Q=0,O=m.length;Q<O;++Q)if(m[Q].name===t){m[Q]=u;break}Q===O&&m.push(u)}g.tween=m}}function RC(e,t){var n=this._id;if(e+="",arguments.length<2){for(var l=Yl(this.node(),n).tween,m=0,g=l.length,P;m<g;++m)if((P=l[m]).name===e)return P.value;return null}return this.each((t==null?LC:zC)(n,e,t))}function F2(e,t,n){var l=e._id;return e.each(function(){var m=mu(this,l);(m.value||(m.value={}))[t]=n.apply(this,arguments)}),function(m){return Yl(m,l).value[t]}}function lb(e,t){var n;return(typeof t=="number"?Ql:t instanceof tc?vg:(n=tc(t))?(t=n,vg):ib)(e,t)}function FC(e){return function(){this.removeAttribute(e)}}function OC(e){return function(){this.removeAttributeNS(e.space,e.local)}}function NC(e,t,n){var l,m=n+"",g;return function(){var P=this.getAttribute(e);return P===m?null:P===l?g:g=t(l=P,n)}}function VC(e,t,n){var l,m=n+"",g;return function(){var P=this.getAttributeNS(e.space,e.local);return P===m?null:P===l?g:g=t(l=P,n)}}function UC(e,t,n){var l,m,g;return function(){var P,u=n(this),Q;return u==null?void this.removeAttribute(e):(P=this.getAttribute(e),Q=u+"",P===Q?null:P===l&&Q===m?g:(m=Q,g=t(l=P,u)))}}function GC(e,t,n){var l,m,g;return function(){var P,u=n(this),Q;return u==null?void this.removeAttributeNS(e.space,e.local):(P=this.getAttributeNS(e.space,e.local),Q=u+"",P===Q?null:P===l&&Q===m?g:(m=Q,g=t(l=P,u)))}}function QC(e,t){var n=Yg(e),l=n==="transform"?SC:lb;return this.attrTween(e,typeof t=="function"?(n.local?GC:UC)(n,l,F2(this,"attr."+e,t)):t==null?(n.local?OC:FC)(n):(n.local?VC:NC)(n,l,t))}function qC(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function HC(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function ZC(e,t){var n,l;function m(){var g=t.apply(this,arguments);return g!==l&&(n=(l=g)&&HC(e,g)),n}return m._value=t,m}function jC(e,t){var n,l;function m(){var g=t.apply(this,arguments);return g!==l&&(n=(l=g)&&qC(e,g)),n}return m._value=t,m}function WC(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var l=Yg(e);return this.tween(n,(l.local?ZC:jC)(l,t))}function YC(e,t){return function(){R2(this,e).delay=+t.apply(this,arguments)}}function $C(e,t){return t=+t,function(){R2(this,e).delay=t}}function XC(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?YC:$C)(t,e)):Yl(this.node(),t).delay}function KC(e,t){return function(){mu(this,e).duration=+t.apply(this,arguments)}}function JC(e,t){return t=+t,function(){mu(this,e).duration=t}}function ek(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?KC:JC)(t,e)):Yl(this.node(),t).duration}function tk(e,t){if(typeof t!="function")throw new Error;return function(){mu(this,e).ease=t}}function ik(e){var t=this._id;return arguments.length?this.each(tk(t,e)):Yl(this.node(),t).ease}function nk(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;mu(this,e).ease=n}}function rk(e){if(typeof e!="function")throw new Error;return this.each(nk(this._id,e))}function sk(e){typeof e!="function"&&(e=Qw(e));for(var t=this._groups,n=t.length,l=new Array(n),m=0;m<n;++m)for(var g=t[m],P=g.length,u=l[m]=[],Q,O=0;O<P;++O)(Q=g[O])&&e.call(Q,Q.__data__,O,g)&&u.push(Q);return new Zu(l,this._parents,this._name,this._id)}function ak(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,l=t.length,m=n.length,g=Math.min(l,m),P=new Array(l),u=0;u<g;++u)for(var Q=t[u],O=n[u],re=Q.length,ee=P[u]=new Array(re),ce,le=0;le<re;++le)(ce=Q[le]||O[le])&&(ee[le]=ce);for(;u<l;++u)P[u]=t[u];return new Zu(P,this._parents,this._name,this._id)}function ok(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Ak(e,t,n){var l,m,g=ok(t)?R2:mu;return function(){var P=g(this,e),u=P.on;u!==l&&(m=(l=u).copy()).on(t,n),P.on=m}}function lk(e,t){var n=this._id;return arguments.length<2?Yl(this.node(),n).on.on(e):this.each(Ak(n,e,t))}function uk(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function hk(){return this.on("end.remove",uk(this._id))}function ck(e){var t=this._name,n=this._id;typeof e!="function"&&(e=T2(e));for(var l=this._groups,m=l.length,g=new Array(m),P=0;P<m;++P)for(var u=l[P],Q=u.length,O=g[P]=new Array(Q),re,ee,ce=0;ce<Q;++ce)(re=u[ce])&&(ee=e.call(re,re.__data__,ce,u))&&("__data__"in re&&(ee.__data__=re.__data__),O[ce]=ee,Xg(O[ce],t,n,ce,O,Yl(re,n)));return new Zu(g,this._parents,t,n)}function fk(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Gw(e));for(var l=this._groups,m=l.length,g=[],P=[],u=0;u<m;++u)for(var Q=l[u],O=Q.length,re,ee=0;ee<O;++ee)if(re=Q[ee]){for(var ce=e.call(re,re.__data__,ee,Q),le,je=Yl(re,n),Je=0,Xe=ce.length;Je<Xe;++Je)(le=ce[Je])&&Xg(le,t,n,Je,ce,je);g.push(ce),P.push(re)}return new Zu(g,P,t,n)}var dk=ad.prototype.constructor;function pk(){return new dk(this._groups,this._parents)}function gk(e,t){var n,l,m;return function(){var g=s0(this,e),P=(this.style.removeProperty(e),s0(this,e));return g===P?null:g===n&&P===l?m:m=t(n=g,l=P)}}function ub(e){return function(){this.style.removeProperty(e)}}function mk(e,t,n){var l,m=n+"",g;return function(){var P=s0(this,e);return P===m?null:P===l?g:g=t(l=P,n)}}function _k(e,t,n){var l,m,g;return function(){var P=s0(this,e),u=n(this),Q=u+"";return u==null&&(Q=u=(this.style.removeProperty(e),s0(this,e))),P===Q?null:P===l&&Q===m?g:(m=Q,g=t(l=P,u))}}function vk(e,t){var n,l,m,g="style."+t,P="end."+g,u;return function(){var Q=mu(this,e),O=Q.on,re=Q.value[g]==null?u||(u=ub(t)):void 0;(O!==n||m!==re)&&(l=(n=O).copy()).on(P,m=re),Q.on=l}}function yk(e,t,n){var l=(e+="")=="transform"?bC:lb;return t==null?this.styleTween(e,gk(e,l)).on("end.style."+e,ub(e)):typeof t=="function"?this.styleTween(e,_k(e,l,F2(this,"style."+e,t))).each(vk(this._id,e)):this.styleTween(e,mk(e,l,t),n).on("end.style."+e,null)}function xk(e,t,n){return function(l){this.style.setProperty(e,t.call(this,l),n)}}function wk(e,t,n){var l,m;function g(){var P=t.apply(this,arguments);return P!==m&&(l=(m=P)&&xk(e,P,n)),l}return g._value=t,g}function bk(e,t,n){var l="style."+(e+="");if(arguments.length<2)return(l=this.tween(l))&&l._value;if(t==null)return this.tween(l,null);if(typeof t!="function")throw new Error;return this.tween(l,wk(e,t,n??""))}function Sk(e){return function(){this.textContent=e}}function Ck(e){return function(){var t=e(this);this.textContent=t??""}}function kk(e){return this.tween("text",typeof e=="function"?Ck(F2(this,"text",e)):Sk(e==null?"":e+""))}function Ek(e){return function(t){this.textContent=e.call(this,t)}}function Ik(e){var t,n;function l(){var m=e.apply(this,arguments);return m!==n&&(t=(n=m)&&Ek(m)),t}return l._value=e,l}function Mk(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Ik(e))}function Tk(){for(var e=this._name,t=this._id,n=hb(),l=this._groups,m=l.length,g=0;g<m;++g)for(var P=l[g],u=P.length,Q,O=0;O<u;++O)if(Q=P[O]){var re=Yl(Q,t);Xg(Q,e,n,O,P,{time:re.time+re.delay+re.duration,delay:0,duration:re.duration,ease:re.ease})}return new Zu(l,this._parents,e,n)}function Pk(){var e,t,n=this,l=n._id,m=n.size();return new Promise(function(g,P){var u={value:P},Q={value:function(){--m===0&&g()}};n.each(function(){var O=mu(this,l),re=O.on;re!==e&&(t=(e=re).copy(),t._.cancel.push(u),t._.interrupt.push(u),t._.end.push(Q)),O.on=t}),m===0&&g()})}var Bk=0;function Zu(e,t,n,l){this._groups=e,this._parents=t,this._name=n,this._id=l}function hb(){return++Bk}var Ru=ad.prototype;Zu.prototype={constructor:Zu,select:ck,selectAll:fk,selectChild:Ru.selectChild,selectChildren:Ru.selectChildren,filter:sk,merge:ak,selection:pk,transition:Tk,call:Ru.call,nodes:Ru.nodes,node:Ru.node,size:Ru.size,empty:Ru.empty,each:Ru.each,on:lk,attr:QC,attrTween:WC,style:yk,styleTween:bk,text:kk,textTween:Mk,remove:hk,tween:RC,delay:XC,duration:ek,ease:ik,easeVarying:rk,end:Pk,[Symbol.iterator]:Ru[Symbol.iterator]};function Dk(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Lk={time:null,delay:0,duration:250,ease:Dk};function zk(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Rk(e){var t,n;e instanceof Zu?(t=e._id,e=e._name):(t=hb(),(n=Lk).time=z2(),e=e==null?null:e+"");for(var l=this._groups,m=l.length,g=0;g<m;++g)for(var P=l[g],u=P.length,Q,O=0;O<u;++O)(Q=P[O])&&Xg(Q,e,t,O,P,n||zk(Q,t));return new Zu(l,this._parents,e,t)}ad.prototype.interrupt=DC;ad.prototype.transition=Rk;const R1=Math.PI,F1=2*R1,Zh=1e-6,Fk=F1-Zh;function cb(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function Ok(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return cb;const n=10**t;return function(l){this._+=l[0];for(let m=1,g=l.length;m<g;++m)this._+=Math.round(arguments[m]*n)/n+l[m]}}let Nk=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?cb:Ok(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,l,m){this._append`Q${+t},${+n},${this._x1=+l},${this._y1=+m}`}bezierCurveTo(t,n,l,m,g,P){this._append`C${+t},${+n},${+l},${+m},${this._x1=+g},${this._y1=+P}`}arcTo(t,n,l,m,g){if(t=+t,n=+n,l=+l,m=+m,g=+g,g<0)throw new Error(`negative radius: ${g}`);let P=this._x1,u=this._y1,Q=l-t,O=m-n,re=P-t,ee=u-n,ce=re*re+ee*ee;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(ce>Zh)if(!(Math.abs(ee*Q-O*re)>Zh)||!g)this._append`L${this._x1=t},${this._y1=n}`;else{let le=l-P,je=m-u,Je=Q*Q+O*O,Xe=le*le+je*je,Ke=Math.sqrt(Je),xt=Math.sqrt(ce),gt=g*Math.tan((R1-Math.acos((Je+ce-Xe)/(2*Ke*xt)))/2),Mt=gt/xt,Ct=gt/Ke;Math.abs(Mt-1)>Zh&&this._append`L${t+Mt*re},${n+Mt*ee}`,this._append`A${g},${g},0,0,${+(ee*le>re*je)},${this._x1=t+Ct*Q},${this._y1=n+Ct*O}`}}arc(t,n,l,m,g,P){if(t=+t,n=+n,l=+l,P=!!P,l<0)throw new Error(`negative radius: ${l}`);let u=l*Math.cos(m),Q=l*Math.sin(m),O=t+u,re=n+Q,ee=1^P,ce=P?m-g:g-m;this._x1===null?this._append`M${O},${re}`:(Math.abs(this._x1-O)>Zh||Math.abs(this._y1-re)>Zh)&&this._append`L${O},${re}`,l&&(ce<0&&(ce=ce%F1+F1),ce>Fk?this._append`A${l},${l},0,1,${ee},${t-u},${n-Q}A${l},${l},0,1,${ee},${this._x1=O},${this._y1=re}`:ce>Zh&&this._append`A${l},${l},0,${+(ce>=R1)},${ee},${this._x1=t+l*Math.cos(g)},${this._y1=n+l*Math.sin(g)}`)}rect(t,n,l,m){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${l=+l}v${+m}h${-l}Z`}toString(){return this._}};const qu=11102230246251565e-32,Yo=134217729,Vk=(3+8*qu)*qu;function z_(e,t,n,l,m){let g,P,u,Q,O=t[0],re=l[0],ee=0,ce=0;re>O==re>-O?(g=O,O=t[++ee]):(g=re,re=l[++ce]);let le=0;if(ee<e&&ce<n)for(re>O==re>-O?(P=O+g,u=g-(P-O),O=t[++ee]):(P=re+g,u=g-(P-re),re=l[++ce]),g=P,u!==0&&(m[le++]=u);ee<e&&ce<n;)re>O==re>-O?(P=g+O,Q=P-g,u=g-(P-Q)+(O-Q),O=t[++ee]):(P=g+re,Q=P-g,u=g-(P-Q)+(re-Q),re=l[++ce]),g=P,u!==0&&(m[le++]=u);for(;ee<e;)P=g+O,Q=P-g,u=g-(P-Q)+(O-Q),O=t[++ee],g=P,u!==0&&(m[le++]=u);for(;ce<n;)P=g+re,Q=P-g,u=g-(P-Q)+(re-Q),re=l[++ce],g=P,u!==0&&(m[le++]=u);return(g!==0||le===0)&&(m[le++]=g),le}function Uk(e,t){let n=t[0];for(let l=1;l<e;l++)n+=t[l];return n}function Ad(e){return new Float64Array(e)}const Gk=(3+16*qu)*qu,Qk=(2+12*qu)*qu,qk=(9+64*qu)*qu*qu,Qc=Ad(4),yy=Ad(8),xy=Ad(12),wy=Ad(16),_A=Ad(4);function Hk(e,t,n,l,m,g,P){let u,Q,O,re,ee,ce,le,je,Je,Xe,Ke,xt,gt,Mt,Ct,Te,Ai,ii;const xi=e-m,gi=n-m,qt=t-g,di=l-g;Mt=xi*di,ce=Yo*xi,le=ce-(ce-xi),je=xi-le,ce=Yo*di,Je=ce-(ce-di),Xe=di-Je,Ct=je*Xe-(Mt-le*Je-je*Je-le*Xe),Te=qt*gi,ce=Yo*qt,le=ce-(ce-qt),je=qt-le,ce=Yo*gi,Je=ce-(ce-gi),Xe=gi-Je,Ai=je*Xe-(Te-le*Je-je*Je-le*Xe),Ke=Ct-Ai,ee=Ct-Ke,Qc[0]=Ct-(Ke+ee)+(ee-Ai),xt=Mt+Ke,ee=xt-Mt,gt=Mt-(xt-ee)+(Ke-ee),Ke=gt-Te,ee=gt-Ke,Qc[1]=gt-(Ke+ee)+(ee-Te),ii=xt+Ke,ee=ii-xt,Qc[2]=xt-(ii-ee)+(Ke-ee),Qc[3]=ii;let mi=Uk(4,Qc),vt=Qk*P;if(mi>=vt||-mi>=vt||(ee=e-xi,u=e-(xi+ee)+(ee-m),ee=n-gi,O=n-(gi+ee)+(ee-m),ee=t-qt,Q=t-(qt+ee)+(ee-g),ee=l-di,re=l-(di+ee)+(ee-g),u===0&&Q===0&&O===0&&re===0)||(vt=qk*P+Vk*Math.abs(mi),mi+=xi*re+di*u-(qt*O+gi*Q),mi>=vt||-mi>=vt))return mi;Mt=u*di,ce=Yo*u,le=ce-(ce-u),je=u-le,ce=Yo*di,Je=ce-(ce-di),Xe=di-Je,Ct=je*Xe-(Mt-le*Je-je*Je-le*Xe),Te=Q*gi,ce=Yo*Q,le=ce-(ce-Q),je=Q-le,ce=Yo*gi,Je=ce-(ce-gi),Xe=gi-Je,Ai=je*Xe-(Te-le*Je-je*Je-le*Xe),Ke=Ct-Ai,ee=Ct-Ke,_A[0]=Ct-(Ke+ee)+(ee-Ai),xt=Mt+Ke,ee=xt-Mt,gt=Mt-(xt-ee)+(Ke-ee),Ke=gt-Te,ee=gt-Ke,_A[1]=gt-(Ke+ee)+(ee-Te),ii=xt+Ke,ee=ii-xt,_A[2]=xt-(ii-ee)+(Ke-ee),_A[3]=ii;const Ut=z_(4,Qc,4,_A,yy);Mt=xi*re,ce=Yo*xi,le=ce-(ce-xi),je=xi-le,ce=Yo*re,Je=ce-(ce-re),Xe=re-Je,Ct=je*Xe-(Mt-le*Je-je*Je-le*Xe),Te=qt*O,ce=Yo*qt,le=ce-(ce-qt),je=qt-le,ce=Yo*O,Je=ce-(ce-O),Xe=O-Je,Ai=je*Xe-(Te-le*Je-je*Je-le*Xe),Ke=Ct-Ai,ee=Ct-Ke,_A[0]=Ct-(Ke+ee)+(ee-Ai),xt=Mt+Ke,ee=xt-Mt,gt=Mt-(xt-ee)+(Ke-ee),Ke=gt-Te,ee=gt-Ke,_A[1]=gt-(Ke+ee)+(ee-Te),ii=xt+Ke,ee=ii-xt,_A[2]=xt-(ii-ee)+(Ke-ee),_A[3]=ii;const rt=z_(Ut,yy,4,_A,xy);Mt=u*re,ce=Yo*u,le=ce-(ce-u),je=u-le,ce=Yo*re,Je=ce-(ce-re),Xe=re-Je,Ct=je*Xe-(Mt-le*Je-je*Je-le*Xe),Te=Q*O,ce=Yo*Q,le=ce-(ce-Q),je=Q-le,ce=Yo*O,Je=ce-(ce-O),Xe=O-Je,Ai=je*Xe-(Te-le*Je-je*Je-le*Xe),Ke=Ct-Ai,ee=Ct-Ke,_A[0]=Ct-(Ke+ee)+(ee-Ai),xt=Mt+Ke,ee=xt-Mt,gt=Mt-(xt-ee)+(Ke-ee),Ke=gt-Te,ee=gt-Ke,_A[1]=gt-(Ke+ee)+(ee-Te),ii=xt+Ke,ee=ii-xt,_A[2]=xt-(ii-ee)+(Ke-ee),_A[3]=ii;const Ft=z_(rt,xy,4,_A,wy);return wy[Ft-1]}function Zk(e,t,n,l,m,g){const P=(t-g)*(n-m),u=(e-m)*(l-g),Q=P-u,O=Math.abs(P+u);return Math.abs(Q)>=Gk*O?Q:-Hk(e,t,n,l,m,g,O)}function jk(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function bg(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,l=e.slice(0,n);return[l.length>1?l[0]+l.slice(2):l,+e.slice(n+1)]}function o0(e){return e=bg(Math.abs(e)),e?e[1]:NaN}function Wk(e,t){return function(n,l){for(var m=n.length,g=[],P=0,u=e[0],Q=0;m>0&&u>0&&(Q+u+1>l&&(u=Math.max(1,l-Q)),g.push(n.substring(m-=u,m+u)),!((Q+=u+1)>l));)u=e[P=(P+1)%e.length];return g.reverse().join(t)}}function Yk(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var $k=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Sg(e){if(!(t=$k.exec(e)))throw new Error("invalid format: "+e);var t;return new O2({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Sg.prototype=O2.prototype;function O2(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}O2.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Xk(e){e:for(var t=e.length,n=1,l=-1,m;n<t;++n)switch(e[n]){case".":l=m=n;break;case"0":l===0&&(l=n),m=n;break;default:if(!+e[n])break e;l>0&&(l=0);break}return l>0?e.slice(0,l)+e.slice(m+1):e}var fb;function Kk(e,t){var n=bg(e,t);if(!n)return e+"";var l=n[0],m=n[1],g=m-(fb=Math.max(-8,Math.min(8,Math.floor(m/3)))*3)+1,P=l.length;return g===P?l:g>P?l+new Array(g-P+1).join("0"):g>0?l.slice(0,g)+"."+l.slice(g):"0."+new Array(1-g).join("0")+bg(e,Math.max(0,t+g-1))[0]}function by(e,t){var n=bg(e,t);if(!n)return e+"";var l=n[0],m=n[1];return m<0?"0."+new Array(-m).join("0")+l:l.length>m+1?l.slice(0,m+1)+"."+l.slice(m+1):l+new Array(m-l.length+2).join("0")}const Sy={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:jk,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>by(e*100,t),r:by,s:Kk,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Cy(e){return e}var ky=Array.prototype.map,Ey=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Jk(e){var t=e.grouping===void 0||e.thousands===void 0?Cy:Wk(ky.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",l=e.currency===void 0?"":e.currency[1]+"",m=e.decimal===void 0?".":e.decimal+"",g=e.numerals===void 0?Cy:Yk(ky.call(e.numerals,String)),P=e.percent===void 0?"%":e.percent+"",u=e.minus===void 0?"−":e.minus+"",Q=e.nan===void 0?"NaN":e.nan+"";function O(ee){ee=Sg(ee);var ce=ee.fill,le=ee.align,je=ee.sign,Je=ee.symbol,Xe=ee.zero,Ke=ee.width,xt=ee.comma,gt=ee.precision,Mt=ee.trim,Ct=ee.type;Ct==="n"?(xt=!0,Ct="g"):Sy[Ct]||(gt===void 0&&(gt=12),Mt=!0,Ct="g"),(Xe||ce==="0"&&le==="=")&&(Xe=!0,ce="0",le="=");var Te=Je==="$"?n:Je==="#"&&/[boxX]/.test(Ct)?"0"+Ct.toLowerCase():"",Ai=Je==="$"?l:/[%p]/.test(Ct)?P:"",ii=Sy[Ct],xi=/[defgprs%]/.test(Ct);gt=gt===void 0?6:/[gprs]/.test(Ct)?Math.max(1,Math.min(21,gt)):Math.max(0,Math.min(20,gt));function gi(qt){var di=Te,mi=Ai,vt,Ut,rt;if(Ct==="c")mi=ii(qt)+mi,qt="";else{qt=+qt;var Ft=qt<0||1/qt<0;if(qt=isNaN(qt)?Q:ii(Math.abs(qt),gt),Mt&&(qt=Xk(qt)),Ft&&+qt==0&&je!=="+"&&(Ft=!1),di=(Ft?je==="("?je:u:je==="-"||je==="("?"":je)+di,mi=(Ct==="s"?Ey[8+fb/3]:"")+mi+(Ft&&je==="("?")":""),xi){for(vt=-1,Ut=qt.length;++vt<Ut;)if(rt=qt.charCodeAt(vt),48>rt||rt>57){mi=(rt===46?m+qt.slice(vt+1):qt.slice(vt))+mi,qt=qt.slice(0,vt);break}}}xt&&!Xe&&(qt=t(qt,1/0));var ui=di.length+qt.length+mi.length,Lt=ui<Ke?new Array(Ke-ui+1).join(ce):"";switch(xt&&Xe&&(qt=t(Lt+qt,Lt.length?Ke-mi.length:1/0),Lt=""),le){case"<":qt=di+qt+mi+Lt;break;case"=":qt=di+Lt+qt+mi;break;case"^":qt=Lt.slice(0,ui=Lt.length>>1)+di+qt+mi+Lt.slice(ui);break;default:qt=Lt+di+qt+mi;break}return g(qt)}return gi.toString=function(){return ee+""},gi}function re(ee,ce){var le=O((ee=Sg(ee),ee.type="f",ee)),je=Math.max(-8,Math.min(8,Math.floor(o0(ce)/3)))*3,Je=Math.pow(10,-je),Xe=Ey[8+je/3];return function(Ke){return le(Je*Ke)+Xe}}return{format:O,formatPrefix:re}}var Qp,db,pb;eE({thousands:",",grouping:[3],currency:["$",""]});function eE(e){return Qp=Jk(e),db=Qp.format,pb=Qp.formatPrefix,Qp}function tE(e){return Math.max(0,-o0(Math.abs(e)))}function iE(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(o0(t)/3)))*3-o0(Math.abs(e)))}function nE(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,o0(t)-o0(e))+1}function rE(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function sE(e){return function(){return e}}function aE(e){return+e}var Iy=[0,1];function Yc(e){return e}function O1(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:sE(isNaN(t)?NaN:.5)}function oE(e,t){var n;return e>t&&(n=e,e=t,t=n),function(l){return Math.max(e,Math.min(t,l))}}function AE(e,t,n){var l=e[0],m=e[1],g=t[0],P=t[1];return m<l?(l=O1(m,l),g=n(P,g)):(l=O1(l,m),g=n(g,P)),function(u){return g(l(u))}}function lE(e,t,n){var l=Math.min(e.length,t.length)-1,m=new Array(l),g=new Array(l),P=-1;for(e[l]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++P<l;)m[P]=O1(e[P],e[P+1]),g[P]=n(t[P],t[P+1]);return function(u){var Q=n6(e,u,1,l)-1;return g[Q](m[Q](u))}}function uE(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function hE(){var e=Iy,t=Iy,n=L2,l,m,g,P=Yc,u,Q,O;function re(){var ce=Math.min(e.length,t.length);return P!==Yc&&(P=oE(e[0],e[ce-1])),u=ce>2?lE:AE,Q=O=null,ee}function ee(ce){return ce==null||isNaN(ce=+ce)?g:(Q||(Q=u(e.map(l),t,n)))(l(P(ce)))}return ee.invert=function(ce){return P(m((O||(O=u(t,e.map(l),Ql)))(ce)))},ee.domain=function(ce){return arguments.length?(e=Array.from(ce,aE),re()):e.slice()},ee.range=function(ce){return arguments.length?(t=Array.from(ce),re()):t.slice()},ee.rangeRound=function(ce){return t=Array.from(ce),n=yC,re()},ee.clamp=function(ce){return arguments.length?(P=ce?!0:Yc,re()):P!==Yc},ee.interpolate=function(ce){return arguments.length?(n=ce,re()):n},ee.unknown=function(ce){return arguments.length?(g=ce,ee):g},function(ce,le){return l=ce,m=le,re()}}function cE(){return hE()(Yc,Yc)}function fE(e,t,n,l){var m=A6(e,t,n),g;switch(l=Sg(l??",f"),l.type){case"s":{var P=Math.max(Math.abs(e),Math.abs(t));return l.precision==null&&!isNaN(g=iE(m,P))&&(l.precision=g),pb(l,P)}case"":case"e":case"g":case"p":case"r":{l.precision==null&&!isNaN(g=nE(m,Math.max(Math.abs(e),Math.abs(t))))&&(l.precision=g-(l.type==="e"));break}case"f":case"%":{l.precision==null&&!isNaN(g=tE(m))&&(l.precision=g-(l.type==="%")*2);break}}return db(l)}function dE(e){var t=e.domain;return e.ticks=function(n){var l=t();return o6(l[0],l[l.length-1],n??10)},e.tickFormat=function(n,l){var m=t();return fE(m[0],m[m.length-1],n??10,l)},e.nice=function(n){n==null&&(n=10);var l=t(),m=0,g=l.length-1,P=l[m],u=l[g],Q,O,re=10;for(u<P&&(O=P,P=u,u=O,O=m,m=g,g=O);re-- >0;){if(O=E1(P,u,n),O===Q)return l[m]=P,l[g]=u,t(l);if(O>0)P=Math.floor(P/O)*O,u=Math.ceil(u/O)*O;else if(O<0)P=Math.ceil(P*O)/O,u=Math.floor(u*O)/O;else break;Q=O}return e},e}function N1(){var e=cE();return e.copy=function(){return uE(e,N1())},rE.apply(e,arguments),dE(e)}function bo(e){return function(){return e}}function gb(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const l=Math.floor(n);if(!(l>=0))throw new RangeError(`invalid digits: ${n}`);t=l}return e},()=>new Nk(t)}function mb(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function _b(e){this._context=e}_b.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function vb(e){return new _b(e)}function yb(e){return e[0]}function xb(e){return e[1]}function Wc(e,t){var n=bo(!0),l=null,m=vb,g=null,P=gb(u);e=typeof e=="function"?e:e===void 0?yb:bo(e),t=typeof t=="function"?t:t===void 0?xb:bo(t);function u(Q){var O,re=(Q=mb(Q)).length,ee,ce=!1,le;for(l==null&&(g=m(le=P())),O=0;O<=re;++O)!(O<re&&n(ee=Q[O],O,Q))===ce&&((ce=!ce)?g.lineStart():g.lineEnd()),ce&&g.point(+e(ee,O,Q),+t(ee,O,Q));if(le)return g=null,le+""||null}return u.x=function(Q){return arguments.length?(e=typeof Q=="function"?Q:bo(+Q),u):e},u.y=function(Q){return arguments.length?(t=typeof Q=="function"?Q:bo(+Q),u):t},u.defined=function(Q){return arguments.length?(n=typeof Q=="function"?Q:bo(!!Q),u):n},u.curve=function(Q){return arguments.length?(m=Q,l!=null&&(g=m(l)),u):m},u.context=function(Q){return arguments.length?(Q==null?l=g=null:g=m(l=Q),u):l},u}function R_(e,t,n){var l=null,m=bo(!0),g=null,P=vb,u=null,Q=gb(O);e=typeof e=="function"?e:e===void 0?yb:bo(+e),t=typeof t=="function"?t:bo(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?xb:bo(+n);function O(ee){var ce,le,je,Je=(ee=mb(ee)).length,Xe,Ke=!1,xt,gt=new Array(Je),Mt=new Array(Je);for(g==null&&(u=P(xt=Q())),ce=0;ce<=Je;++ce){if(!(ce<Je&&m(Xe=ee[ce],ce,ee))===Ke)if(Ke=!Ke)le=ce,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),je=ce-1;je>=le;--je)u.point(gt[je],Mt[je]);u.lineEnd(),u.areaEnd()}Ke&&(gt[ce]=+e(Xe,ce,ee),Mt[ce]=+t(Xe,ce,ee),u.point(l?+l(Xe,ce,ee):gt[ce],n?+n(Xe,ce,ee):Mt[ce]))}if(xt)return u=null,xt+""||null}function re(){return Wc().defined(m).curve(P).context(g)}return O.x=function(ee){return arguments.length?(e=typeof ee=="function"?ee:bo(+ee),l=null,O):e},O.x0=function(ee){return arguments.length?(e=typeof ee=="function"?ee:bo(+ee),O):e},O.x1=function(ee){return arguments.length?(l=ee==null?null:typeof ee=="function"?ee:bo(+ee),O):l},O.y=function(ee){return arguments.length?(t=typeof ee=="function"?ee:bo(+ee),n=null,O):t},O.y0=function(ee){return arguments.length?(t=typeof ee=="function"?ee:bo(+ee),O):t},O.y1=function(ee){return arguments.length?(n=ee==null?null:typeof ee=="function"?ee:bo(+ee),O):n},O.lineX0=O.lineY0=function(){return re().x(e).y(t)},O.lineY1=function(){return re().x(e).y(n)},O.lineX1=function(){return re().x(l).y(t)},O.defined=function(ee){return arguments.length?(m=typeof ee=="function"?ee:bo(!!ee),O):m},O.curve=function(ee){return arguments.length?(P=ee,g!=null&&(u=P(g)),O):P},O.context=function(ee){return arguments.length?(ee==null?g=u=null:u=P(g=ee),O):g},O}function My(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function wb(e){this._context=e}wb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:My(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:My(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function pE(e){return new wb(e)}function Ff(e,t,n){this.k=e,this.x=t,this.y=n}Ff.prototype={constructor:Ff,scale:function(e){return e===1?this:new Ff(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Ff(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Ff.prototype;function Ty(e,t,n){const l=e.slice();return l[34]=t[n],l[36]=n,l}function Py(e){let t,n,l=fg[e[5]]+"",m,g,P,u,Q,O,re,ee,ce,le,je,Je,Xe,Ke,xt,gt,Mt,Ct,Te,Ai,ii,xi,gi,qt,di,mi,vt,Ut,rt,Ft,ui=$h(e[0]),Lt=[];for(let Yt=0;Yt<ui.length;Yt+=1)Lt[Yt]=By(Ty(e,ui,Yt));return{c(){t=Sr("div"),n=Sr("h2"),m=UA(l),g=UA(" by tree size"),P=ea(),u=fa("svg"),Q=fa("defs"),O=fa("linearGradient"),re=fa("stop"),ee=fa("stop"),ce=fa("stop"),le=fa("g"),Je=fa("g"),Ke=fa("path"),Mt=fa("path"),Ai=fa("path"),gi=fa("g");for(let Yt=0;Yt<Lt.length;Yt+=1)Lt[Yt].c();qt=fa("text"),di=UA(e[11]),Ut=fa("text"),rt=UA(e[12]),this.h()},l(Yt){t=Cr(Yt,"DIV",{class:!0});var oi=Vn(t);n=Cr(oi,"H2",{class:!0});var yi=Vn(n);m=GA(yi,l),g=GA(yi," by tree size"),yi.forEach(Qi),P=ta(oi),u=da(oi,"svg",{id:!0,viewBox:!0,class:!0});var Pi=Vn(u);Q=da(Pi,"defs",{});var dn=Vn(Q);O=da(dn,"linearGradient",{id:!0,x1:!0,x2:!0,y1:!0,y2:!0});var sn=Vn(O);re=da(sn,"stop",{class:!0,offset:!0}),Vn(re).forEach(Qi),ee=da(sn,"stop",{class:!0,offset:!0}),Vn(ee).forEach(Qi),ce=da(sn,"stop",{class:!0,offset:!0}),Vn(ce).forEach(Qi),sn.forEach(Qi),dn.forEach(Qi),le=da(Pi,"g",{class:!0,transform:!0}),Vn(le).forEach(Qi),Je=da(Pi,"g",{class:!0,transform:!0}),Vn(Je).forEach(Qi),Ke=da(Pi,"path",{class:!0,fill:!0,stroke:!0,"stroke-width":!0,d:!0}),Vn(Ke).forEach(Qi),Mt=da(Pi,"path",{class:!0,fill:!0,stroke:!0,"stroke-width":!0,d:!0}),Vn(Mt).forEach(Qi),Ai=da(Pi,"path",{class:!0,fill:!0,stroke:!0,"stroke-width":!0,d:!0}),Vn(Ai).forEach(Qi),gi=da(Pi,"g",{class:!0,fill:!0,stroke:!0,"stroke-width":!0});var Bn=Vn(gi);for(let li=0;li<Lt.length;li+=1)Lt[li].l(Bn);Bn.forEach(Qi),qt=da(Pi,"text",{class:!0,"text-anchor":!0,x:!0,y:!0});var fi=Vn(qt);di=GA(fi,e[11]),fi.forEach(Qi),Ut=da(Pi,"text",{class:!0,"text-anchor":!0,transform:!0,x:!0,y:!0});var $i=Vn(Ut);rt=GA($i,e[12]),$i.forEach(Qi),Pi.forEach(Qi),oi.forEach(Qi),this.h()},h(){ki(n,"class","svelte-1chzu31"),ki(re,"class","stop1 svelte-1chzu31"),ki(re,"offset","0%"),ki(ee,"class","stop2 svelte-1chzu31"),ki(ee,"offset","50%"),ki(ce,"class","stop3 svelte-1chzu31"),ki(ce,"offset","100%"),ki(O,"id","Gradient1"),ki(O,"x1","0"),ki(O,"x2","0"),ki(O,"y1","0"),ki(O,"y2","0.2"),ki(le,"class","scale x svelte-1chzu31"),ki(le,"transform",je="translate(0,"+(e[2]-e[3])+")"),ki(Je,"class","scale y svelte-1chzu31"),ki(Je,"transform",Xe="translate("+e[4]+",0)"),ki(Ke,"class","area above svelte-1chzu31"),ki(Ke,"fill",xt=e[14][e[14].length-1]),ki(Ke,"stroke","currentColor"),ki(Ke,"stroke-width","0"),ki(Ke,"d",gt=e[16](e[10])),ki(Mt,"class","area below svelte-1chzu31"),ki(Mt,"fill",Ct=e[14][1]),ki(Mt,"stroke","currentColor"),ki(Mt,"stroke-width","0"),ki(Mt,"d",Te=e[17](e[10])),ki(Ai,"class","area ci svelte-1chzu31"),ki(Ai,"fill",ii=e[14][Math.ceil(e[14].length/2)]),ki(Ai,"stroke","currentColor"),ki(Ai,"stroke-width","0"),ki(Ai,"d",xi=e[15](e[10])),ki(gi,"class","point"),ki(gi,"fill","white"),ki(gi,"stroke","currentColor"),ki(gi,"stroke-width","1.5"),ki(qt,"class","axis-label svelte-1chzu31"),ki(qt,"text-anchor","center"),ki(qt,"x",mi=e[1]/2),ki(qt,"y",vt=e[2]+12),ki(Ut,"class","axis-label svelte-1chzu31"),ki(Ut,"text-anchor","center"),ki(Ut,"transform","rotate(-90)"),ki(Ut,"x",e[13]),ki(Ut,"y",-10),ki(u,"id","viz"),ki(u,"viewBox",Ft=`0 0 ${e[1]} ${e[2]}`),ki(u,"class","svelte-1chzu31"),ki(t,"class","graph-container svelte-1chzu31")},m(Yt,oi){qr(Yt,t,oi),un(t,n),un(n,m),un(n,g),un(t,P),un(t,u),un(u,Q),un(Q,O),un(O,re),un(O,ee),un(O,ce),un(u,le),e[24](le),un(u,Je),e[25](Je),un(u,Ke),un(u,Mt),un(u,Ai),un(u,gi);for(let yi=0;yi<Lt.length;yi+=1)Lt[yi]&&Lt[yi].m(gi,null);un(u,qt),un(qt,di),un(u,Ut),un(Ut,rt)},p(Yt,oi){if(oi[0]&32&&l!==(l=fg[Yt[5]]+"")&&Yh(m,l),oi[0]&12&&je!==(je="translate(0,"+(Yt[2]-Yt[3])+")")&&ki(le,"transform",je),oi[0]&16&&Xe!==(Xe="translate("+Yt[4]+",0)")&&ki(Je,"transform",Xe),oi[0]&16384&&xt!==(xt=Yt[14][Yt[14].length-1])&&ki(Ke,"fill",xt),oi[0]&1024&&gt!==(gt=Yt[16](Yt[10]))&&ki(Ke,"d",gt),oi[0]&16384&&Ct!==(Ct=Yt[14][1])&&ki(Mt,"fill",Ct),oi[0]&1024&&Te!==(Te=Yt[17](Yt[10]))&&ki(Mt,"d",Te),oi[0]&16384&&ii!==(ii=Yt[14][Math.ceil(Yt[14].length/2)])&&ki(Ai,"fill",ii),oi[0]&1024&&xi!==(xi=Yt[15](Yt[10]))&&ki(Ai,"d",xi),oi[0]&769){ui=$h(Yt[0]);let yi;for(yi=0;yi<ui.length;yi+=1){const Pi=Ty(Yt,ui,yi);Lt[yi]?Lt[yi].p(Pi,oi):(Lt[yi]=By(Pi),Lt[yi].c(),Lt[yi].m(gi,null))}for(;yi<Lt.length;yi+=1)Lt[yi].d(1);Lt.length=ui.length}oi[0]&2048&&Yh(di,Yt[11]),oi[0]&2&&mi!==(mi=Yt[1]/2)&&ki(qt,"x",mi),oi[0]&4&&vt!==(vt=Yt[2]+12)&&ki(qt,"y",vt),oi[0]&4096&&Yh(rt,Yt[12]),oi[0]&8192&&ki(Ut,"x",Yt[13]),oi[0]&6&&Ft!==(Ft=`0 0 ${Yt[1]} ${Yt[2]}`)&&ki(u,"viewBox",Ft)},d(Yt){Yt&&Qi(t),e[24](null),e[25](null),ug(Lt,Yt)}}}function By(e){let t,n,l;return{c(){t=fa("circle"),this.h()},l(m){t=da(m,"circle",{key:!0,cx:!0,cy:!0,r:!0,fill:!0,class:!0}),Vn(t).forEach(Qi),this.h()},h(){ki(t,"key",e[36]),ki(t,"cx",n=e[8](e[34][0])),ki(t,"cy",l=e[9](e[34][1])),ki(t,"r","5"),ki(t,"fill","white"),ki(t,"class","anim-point svelte-1chzu31")},m(m,g){qr(m,t,g)},p(m,g){g[0]&257&&n!==(n=m[8](m[34][0]))&&ki(t,"cx",n),g[0]&513&&l!==(l=m[9](m[34][1]))&&ki(t,"cy",l)},d(m){m&&Qi(t)}}}function gE(e){let t,n=e[10]&&e[5]&&Py(e);return{c(){n&&n.c(),t=eA()},l(l){n&&n.l(l),t=eA()},m(l,m){n&&n.m(l,m),qr(l,t,m)},p(l,m){l[10]&&l[5]?n?n.p(l,m):(n=Py(l),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},i:Oo,o:Oo,d(l){l&&Qi(t),n&&n.d(l)}}}function mE(e,t,n){let{data:l}=t,{point:m}=t,{width:g=640}=t,{height:P=400}=t,{marginTop:u=20}=t,{marginRight:Q=20}=t,{marginBottom:O=30}=t,{marginLeft:re=40}=t,{metric:ee}=t,ce,le,je=null,Je=[0,10],Xe=[0,10],Ke="",xt="",gt=0,Mt,Ct,Te,{colorScheme:Ai}=t,ii;function xi(rt){ii=R8(rt),console.log(ii),n(10,je=ii.confidence),n(22,Je=ii.yAxis),n(23,Xe=ii.xAxis),n(11,Ke=ii.xAxisLabel),n(12,xt=ii.yAxisLabel),n(13,gt=gi(xt))}function gi(rt){return console.log("label length:",rt.length),-1*(P/2)-rt.length*2.5}const qt=R_().x(rt=>Mt(rt.x)).y0(rt=>Ct(rt.low)).y1(rt=>Ct(rt.high));Wc(rt=>Mt(rt.x),rt=>Ct(rt.y)),Wc(rt=>Mt(rt.x),rt=>Ct(rt.low)),Wc(rt=>Mt(rt.x),rt=>Ct(rt.high));const di=R_().x(rt=>Mt(rt.x)).y0(rt=>Ct(rt.high)).y1(rt=>-1*Ct(Je[1])),mi=R_().x(rt=>Mt(rt.x)).y0(rt=>Ct(Je[0])).y1(rt=>Ct(rt.low));Wc(rt=>Mt(rt.x),rt=>Ct(rt.y)).curve(pE);function vt(rt){Sl[rt?"unshift":"push"](()=>{ce=rt,n(6,ce)})}function Ut(rt){Sl[rt?"unshift":"push"](()=>{le=rt,n(7,le)})}return e.$$set=rt=>{"data"in rt&&n(18,l=rt.data),"point"in rt&&n(0,m=rt.point),"width"in rt&&n(1,g=rt.width),"height"in rt&&n(2,P=rt.height),"marginTop"in rt&&n(19,u=rt.marginTop),"marginRight"in rt&&n(20,Q=rt.marginRight),"marginBottom"in rt&&n(3,O=rt.marginBottom),"marginLeft"in rt&&n(4,re=rt.marginLeft),"metric"in rt&&n(5,ee=rt.metric),"colorScheme"in rt&&n(21,Ai=rt.colorScheme)},e.$$.update=()=>{e.$$.dirty[0]&2097152&&n(14,Te=F8(Ai)),e.$$.dirty[0]&32&&(ii=xi(ee)),e.$$.dirty[0]&9437202&&n(8,Mt=N1(ny(Xe),[re,g-Q])),e.$$.dirty[0]&4718604&&n(9,Ct=N1(ny(Je),[P-O,u])),e.$$.dirty[0]&768&&Wc((rt,Ft)=>Mt(Ft),Ct),e.$$.dirty[0]&640&&B_(le).call(g6(Ct)),e.$$.dirty[0]&320&&B_(ce).call(p6(Mt)),e.$$.dirty[0]&6&&B_("svg").append("div").classed("svg-container",!0).append("svg").attr("preserveAspectRatio","xMinYMin meet").attr("viewBox",`0 0 ${g} ${P}`).classed("svg-content-responsive",!0),e.$$.dirty[0]&33&&console.log("relative:",k1(ee,m[0][1],m[0][0]))},[m,g,P,O,re,ee,ce,le,Mt,Ct,je,Ke,xt,gt,Te,qt,di,mi,l,u,Q,Ai,Je,Xe,vt,Ut]}class _E extends No{constructor(t){super(),Vo(this,t,mE,gE,ho,{data:18,point:0,width:1,height:2,marginTop:19,marginRight:20,marginBottom:3,marginLeft:4,metric:5,colorScheme:21},null,[-1,-1])}}function bb(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Sb(e){let t=e,n=e;e.length===1&&(t=(P,u)=>e(P)-u,n=vE(e));function l(P,u,Q,O){for(Q==null&&(Q=0),O==null&&(O=P.length);Q<O;){const re=Q+O>>>1;n(P[re],u)<0?Q=re+1:O=re}return Q}function m(P,u,Q,O){for(Q==null&&(Q=0),O==null&&(O=P.length);Q<O;){const re=Q+O>>>1;n(P[re],u)>0?O=re:Q=re+1}return Q}function g(P,u,Q,O){Q==null&&(Q=0),O==null&&(O=P.length);const re=l(P,u,Q,O-1);return re>Q&&t(P[re-1],u)>-t(P[re],u)?re-1:re}return{left:l,center:g,right:m}}function vE(e){return(t,n)=>bb(e(t),n)}function yE(e){return e===null?NaN:+e}const xE=Sb(bb),wE=xE.right;Sb(yE).center;var V1=Math.sqrt(50),U1=Math.sqrt(10),G1=Math.sqrt(2);function bE(e,t,n){var l,m=-1,g,P,u;if(t=+t,e=+e,n=+n,e===t&&n>0)return[e];if((l=t<e)&&(g=e,e=t,t=g),(u=Cb(e,t,n))===0||!isFinite(u))return[];if(u>0){let Q=Math.round(e/u),O=Math.round(t/u);for(Q*u<e&&++Q,O*u>t&&--O,P=new Array(g=O-Q+1);++m<g;)P[m]=(Q+m)*u}else{u=-u;let Q=Math.round(e*u),O=Math.round(t*u);for(Q/u<e&&++Q,O/u>t&&--O,P=new Array(g=O-Q+1);++m<g;)P[m]=(Q+m)/u}return l&&P.reverse(),P}function Cb(e,t,n){var l=(t-e)/Math.max(0,n),m=Math.floor(Math.log(l)/Math.LN10),g=l/Math.pow(10,m);return m>=0?(g>=V1?10:g>=U1?5:g>=G1?2:1)*Math.pow(10,m):-Math.pow(10,-m)/(g>=V1?10:g>=U1?5:g>=G1?2:1)}function SE(e,t,n){var l=Math.abs(t-e)/Math.max(0,n),m=Math.pow(10,Math.floor(Math.log(l)/Math.LN10)),g=l/m;return g>=V1?m*=10:g>=U1?m*=5:g>=G1&&(m*=2),t<e?-m:m}function CE(e,t){let n;if(t===void 0)for(const l of e)l!=null&&(n<l||n===void 0&&l>=l)&&(n=l);else{let l=-1;for(let m of e)(m=t(m,++l,e))!=null&&(n<m||n===void 0&&m>=m)&&(n=m)}return n}var F_=Array.prototype.slice;function kE(e){return e}var eg=1,O_=2,Dy=3,qp=4,Ly=1e-6;function EE(e){return"translate("+e+",0)"}function IE(e){return"translate(0,"+e+")"}function ME(e){return t=>+e(t)}function TE(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),n=>+e(n)+t}function PE(){return!this.__axis}function BE(e,t){var n=[],l=null,m=null,g=6,P=6,u=3,Q=typeof window<"u"&&window.devicePixelRatio>1?0:.5,O=e===eg||e===qp?-1:1,re=e===qp||e===O_?"x":"y",ee=e===eg||e===Dy?EE:IE;function ce(le){var je=l??(t.ticks?t.ticks.apply(t,n):t.domain()),Je=m??(t.tickFormat?t.tickFormat.apply(t,n):kE),Xe=Math.max(g,0)+u,Ke=t.range(),xt=+Ke[0]+Q,gt=+Ke[Ke.length-1]+Q,Mt=(t.bandwidth?TE:ME)(t.copy(),Q),Ct=le.selection?le.selection():le,Te=Ct.selectAll(".domain").data([null]),Ai=Ct.selectAll(".tick").data(je,t).order(),ii=Ai.exit(),xi=Ai.enter().append("g").attr("class","tick"),gi=Ai.select("line"),qt=Ai.select("text");Te=Te.merge(Te.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),Ai=Ai.merge(xi),gi=gi.merge(xi.append("line").attr("stroke","currentColor").attr(re+"2",O*g)),qt=qt.merge(xi.append("text").attr("fill","currentColor").attr(re,O*Xe).attr("dy",e===eg?"0em":e===Dy?"0.71em":"0.32em")),le!==Ct&&(Te=Te.transition(le),Ai=Ai.transition(le),gi=gi.transition(le),qt=qt.transition(le),ii=ii.transition(le).attr("opacity",Ly).attr("transform",function(di){return isFinite(di=Mt(di))?ee(di+Q):this.getAttribute("transform")}),xi.attr("opacity",Ly).attr("transform",function(di){var mi=this.parentNode.__axis;return ee((mi&&isFinite(mi=mi(di))?mi:Mt(di))+Q)})),ii.remove(),Te.attr("d",e===qp||e===O_?P?"M"+O*P+","+xt+"H"+Q+"V"+gt+"H"+O*P:"M"+Q+","+xt+"V"+gt:P?"M"+xt+","+O*P+"V"+Q+"H"+gt+"V"+O*P:"M"+xt+","+Q+"H"+gt),Ai.attr("opacity",1).attr("transform",function(di){return ee(Mt(di)+Q)}),gi.attr(re+"2",O*g),qt.attr(re,O*Xe).text(Je),Ct.filter(PE).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===O_?"start":e===qp?"end":"middle"),Ct.each(function(){this.__axis=Mt})}return ce.scale=function(le){return arguments.length?(t=le,ce):t},ce.ticks=function(){return n=F_.call(arguments),ce},ce.tickArguments=function(le){return arguments.length?(n=le==null?[]:F_.call(le),ce):n.slice()},ce.tickValues=function(le){return arguments.length?(l=le==null?null:F_.call(le),ce):l&&l.slice()},ce.tickFormat=function(le){return arguments.length?(m=le,ce):m},ce.tickSize=function(le){return arguments.length?(g=P=+le,ce):g},ce.tickSizeInner=function(le){return arguments.length?(g=+le,ce):g},ce.tickSizeOuter=function(le){return arguments.length?(P=+le,ce):P},ce.tickPadding=function(le){return arguments.length?(u=+le,ce):u},ce.offset=function(le){return arguments.length?(Q=+le,ce):Q},ce}function DE(e){return BE(eg,e)}var LE={value:()=>{}};function Kg(){for(var e=0,t=arguments.length,n={},l;e<t;++e){if(!(l=arguments[e]+"")||l in n||/[\s.]/.test(l))throw new Error("illegal type: "+l);n[l]=[]}return new tg(n)}function tg(e){this._=e}function zE(e,t){return e.trim().split(/^|\s+/).map(function(n){var l="",m=n.indexOf(".");if(m>=0&&(l=n.slice(m+1),n=n.slice(0,m)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:l}})}tg.prototype=Kg.prototype={constructor:tg,on:function(e,t){var n=this._,l=zE(e+"",n),m,g=-1,P=l.length;if(arguments.length<2){for(;++g<P;)if((m=(e=l[g]).type)&&(m=RE(n[m],e.name)))return m;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++g<P;)if(m=(e=l[g]).type)n[m]=zy(n[m],e.name,t);else if(t==null)for(m in n)n[m]=zy(n[m],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new tg(e)},call:function(e,t){if((m=arguments.length-2)>0)for(var n=new Array(m),l=0,m,g;l<m;++l)n[l]=arguments[l+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(g=this._[e],l=0,m=g.length;l<m;++l)g[l].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var l=this._[e],m=0,g=l.length;m<g;++m)l[m].value.apply(t,n)}};function RE(e,t){for(var n=0,l=e.length,m;n<l;++n)if((m=e[n]).name===t)return m.value}function zy(e,t,n){for(var l=0,m=e.length;l<m;++l)if(e[l].name===t){e[l]=LE,e=e.slice(0,l).concat(e.slice(l+1));break}return n!=null&&e.push({name:t,value:n}),e}var Q1="http://www.w3.org/1999/xhtml";const Ry={svg:"http://www.w3.org/2000/svg",xhtml:Q1,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Jg(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Ry.hasOwnProperty(t)?{space:Ry[t],local:e}:e}function FE(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Q1&&t.documentElement.namespaceURI===Q1?t.createElement(e):t.createElementNS(n,e)}}function OE(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function N2(e){var t=Jg(e);return(t.local?OE:FE)(t)}function NE(){}function V2(e){return e==null?NE:function(){return this.querySelector(e)}}function VE(e){typeof e!="function"&&(e=V2(e));for(var t=this._groups,n=t.length,l=new Array(n),m=0;m<n;++m)for(var g=t[m],P=g.length,u=l[m]=new Array(P),Q,O,re=0;re<P;++re)(Q=g[re])&&(O=e.call(Q,Q.__data__,re,g))&&("__data__"in Q&&(O.__data__=Q.__data__),u[re]=O);return new ZA(l,this._parents)}function kb(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function UE(){return[]}function Eb(e){return e==null?UE:function(){return this.querySelectorAll(e)}}function GE(e){return function(){var t=e.apply(this,arguments);return t==null?[]:kb(t)}}function QE(e){typeof e=="function"?e=GE(e):e=Eb(e);for(var t=this._groups,n=t.length,l=[],m=[],g=0;g<n;++g)for(var P=t[g],u=P.length,Q,O=0;O<u;++O)(Q=P[O])&&(l.push(e.call(Q,Q.__data__,O,P)),m.push(Q));return new ZA(l,m)}function Ib(e){return function(){return this.matches(e)}}function Mb(e){return function(t){return t.matches(e)}}var qE=Array.prototype.find;function HE(e){return function(){return qE.call(this.children,e)}}function ZE(){return this.firstElementChild}function jE(e){return this.select(e==null?ZE:HE(typeof e=="function"?e:Mb(e)))}var WE=Array.prototype.filter;function YE(){return this.children}function $E(e){return function(){return WE.call(this.children,e)}}function XE(e){return this.selectAll(e==null?YE:$E(typeof e=="function"?e:Mb(e)))}function KE(e){typeof e!="function"&&(e=Ib(e));for(var t=this._groups,n=t.length,l=new Array(n),m=0;m<n;++m)for(var g=t[m],P=g.length,u=l[m]=[],Q,O=0;O<P;++O)(Q=g[O])&&e.call(Q,Q.__data__,O,g)&&u.push(Q);return new ZA(l,this._parents)}function Tb(e){return new Array(e.length)}function JE(){return new ZA(this._enter||this._groups.map(Tb),this._parents)}function Cg(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Cg.prototype={constructor:Cg,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function eI(e){return function(){return e}}function tI(e,t,n,l,m,g){for(var P=0,u,Q=t.length,O=g.length;P<O;++P)(u=t[P])?(u.__data__=g[P],l[P]=u):n[P]=new Cg(e,g[P]);for(;P<Q;++P)(u=t[P])&&(m[P]=u)}function iI(e,t,n,l,m,g,P){var u,Q,O=new Map,re=t.length,ee=g.length,ce=new Array(re),le;for(u=0;u<re;++u)(Q=t[u])&&(ce[u]=le=P.call(Q,Q.__data__,u,t)+"",O.has(le)?m[u]=Q:O.set(le,Q));for(u=0;u<ee;++u)le=P.call(e,g[u],u,g)+"",(Q=O.get(le))?(l[u]=Q,Q.__data__=g[u],O.delete(le)):n[u]=new Cg(e,g[u]);for(u=0;u<re;++u)(Q=t[u])&&O.get(ce[u])===Q&&(m[u]=Q)}function nI(e){return e.__data__}function rI(e,t){if(!arguments.length)return Array.from(this,nI);var n=t?iI:tI,l=this._parents,m=this._groups;typeof e!="function"&&(e=eI(e));for(var g=m.length,P=new Array(g),u=new Array(g),Q=new Array(g),O=0;O<g;++O){var re=l[O],ee=m[O],ce=ee.length,le=kb(e.call(re,re&&re.__data__,O,l)),je=le.length,Je=u[O]=new Array(je),Xe=P[O]=new Array(je),Ke=Q[O]=new Array(ce);n(re,ee,Je,Xe,Ke,le,t);for(var xt=0,gt=0,Mt,Ct;xt<je;++xt)if(Mt=Je[xt]){for(xt>=gt&&(gt=xt+1);!(Ct=Xe[gt])&&++gt<je;);Mt._next=Ct||null}}return P=new ZA(P,l),P._enter=u,P._exit=Q,P}function sI(){return new ZA(this._exit||this._groups.map(Tb),this._parents)}function aI(e,t,n){var l=this.enter(),m=this,g=this.exit();return l=typeof e=="function"?e(l):l.append(e+""),t!=null&&(m=t(m)),n==null?g.remove():n(g),l&&m?l.merge(m).order():m}function oI(e){if(!(e instanceof ZA))throw new Error("invalid merge");for(var t=this._groups,n=e._groups,l=t.length,m=n.length,g=Math.min(l,m),P=new Array(l),u=0;u<g;++u)for(var Q=t[u],O=n[u],re=Q.length,ee=P[u]=new Array(re),ce,le=0;le<re;++le)(ce=Q[le]||O[le])&&(ee[le]=ce);for(;u<l;++u)P[u]=t[u];return new ZA(P,this._parents)}function AI(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var l=e[t],m=l.length-1,g=l[m],P;--m>=0;)(P=l[m])&&(g&&P.compareDocumentPosition(g)^4&&g.parentNode.insertBefore(P,g),g=P);return this}function lI(e){e||(e=uI);function t(ee,ce){return ee&&ce?e(ee.__data__,ce.__data__):!ee-!ce}for(var n=this._groups,l=n.length,m=new Array(l),g=0;g<l;++g){for(var P=n[g],u=P.length,Q=m[g]=new Array(u),O,re=0;re<u;++re)(O=P[re])&&(Q[re]=O);Q.sort(t)}return new ZA(m,this._parents).order()}function uI(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function hI(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function cI(){return Array.from(this)}function fI(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var l=e[t],m=0,g=l.length;m<g;++m){var P=l[m];if(P)return P}return null}function dI(){let e=0;for(const t of this)++e;return e}function pI(){return!this.node()}function gI(e){for(var t=this._groups,n=0,l=t.length;n<l;++n)for(var m=t[n],g=0,P=m.length,u;g<P;++g)(u=m[g])&&e.call(u,u.__data__,g,m);return this}function mI(e){return function(){this.removeAttribute(e)}}function _I(e){return function(){this.removeAttributeNS(e.space,e.local)}}function vI(e,t){return function(){this.setAttribute(e,t)}}function yI(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function xI(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function wI(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function bI(e,t){var n=Jg(e);if(arguments.length<2){var l=this.node();return n.local?l.getAttributeNS(n.space,n.local):l.getAttribute(n)}return this.each((t==null?n.local?_I:mI:typeof t=="function"?n.local?wI:xI:n.local?yI:vI)(n,t))}function Pb(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function SI(e){return function(){this.style.removeProperty(e)}}function CI(e,t,n){return function(){this.style.setProperty(e,t,n)}}function kI(e,t,n){return function(){var l=t.apply(this,arguments);l==null?this.style.removeProperty(e):this.style.setProperty(e,l,n)}}function EI(e,t,n){return arguments.length>1?this.each((t==null?SI:typeof t=="function"?kI:CI)(e,t,n??"")):A0(this.node(),e)}function A0(e,t){return e.style.getPropertyValue(t)||Pb(e).getComputedStyle(e,null).getPropertyValue(t)}function II(e){return function(){delete this[e]}}function MI(e,t){return function(){this[e]=t}}function TI(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function PI(e,t){return arguments.length>1?this.each((t==null?II:typeof t=="function"?TI:MI)(e,t)):this.node()[e]}function Bb(e){return e.trim().split(/^|\s+/)}function U2(e){return e.classList||new Db(e)}function Db(e){this._node=e,this._names=Bb(e.getAttribute("class")||"")}Db.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Lb(e,t){for(var n=U2(e),l=-1,m=t.length;++l<m;)n.add(t[l])}function zb(e,t){for(var n=U2(e),l=-1,m=t.length;++l<m;)n.remove(t[l])}function BI(e){return function(){Lb(this,e)}}function DI(e){return function(){zb(this,e)}}function LI(e,t){return function(){(t.apply(this,arguments)?Lb:zb)(this,e)}}function zI(e,t){var n=Bb(e+"");if(arguments.length<2){for(var l=U2(this.node()),m=-1,g=n.length;++m<g;)if(!l.contains(n[m]))return!1;return!0}return this.each((typeof t=="function"?LI:t?BI:DI)(n,t))}function RI(){this.textContent=""}function FI(e){return function(){this.textContent=e}}function OI(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function NI(e){return arguments.length?this.each(e==null?RI:(typeof e=="function"?OI:FI)(e)):this.node().textContent}function VI(){this.innerHTML=""}function UI(e){return function(){this.innerHTML=e}}function GI(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function QI(e){return arguments.length?this.each(e==null?VI:(typeof e=="function"?GI:UI)(e)):this.node().innerHTML}function qI(){this.nextSibling&&this.parentNode.appendChild(this)}function HI(){return this.each(qI)}function ZI(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function jI(){return this.each(ZI)}function WI(e){var t=typeof e=="function"?e:N2(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function YI(){return null}function $I(e,t){var n=typeof e=="function"?e:N2(e),l=t==null?YI:typeof t=="function"?t:V2(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),l.apply(this,arguments)||null)})}function XI(){var e=this.parentNode;e&&e.removeChild(this)}function KI(){return this.each(XI)}function JI(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function eM(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function tM(e){return this.select(e?eM:JI)}function iM(e){return arguments.length?this.property("__data__",e):this.node().__data__}function nM(e){return function(t){e.call(this,t,this.__data__)}}function rM(e){return e.trim().split(/^|\s+/).map(function(t){var n="",l=t.indexOf(".");return l>=0&&(n=t.slice(l+1),t=t.slice(0,l)),{type:t,name:n}})}function sM(e){return function(){var t=this.__on;if(t){for(var n=0,l=-1,m=t.length,g;n<m;++n)g=t[n],(!e.type||g.type===e.type)&&g.name===e.name?this.removeEventListener(g.type,g.listener,g.options):t[++l]=g;++l?t.length=l:delete this.__on}}}function aM(e,t,n){return function(){var l=this.__on,m,g=nM(t);if(l){for(var P=0,u=l.length;P<u;++P)if((m=l[P]).type===e.type&&m.name===e.name){this.removeEventListener(m.type,m.listener,m.options),this.addEventListener(m.type,m.listener=g,m.options=n),m.value=t;return}}this.addEventListener(e.type,g,n),m={type:e.type,name:e.name,value:t,listener:g,options:n},l?l.push(m):this.__on=[m]}}function oM(e,t,n){var l=rM(e+""),m,g=l.length,P;if(arguments.length<2){var u=this.node().__on;if(u){for(var Q=0,O=u.length,re;Q<O;++Q)for(m=0,re=u[Q];m<g;++m)if((P=l[m]).type===re.type&&P.name===re.name)return re.value}return}for(u=t?aM:sM,m=0;m<g;++m)this.each(u(l[m],t,n));return this}function Rb(e,t,n){var l=Pb(e),m=l.CustomEvent;typeof m=="function"?m=new m(t,n):(m=l.document.createEvent("Event"),n?(m.initEvent(t,n.bubbles,n.cancelable),m.detail=n.detail):m.initEvent(t,!1,!1)),e.dispatchEvent(m)}function AM(e,t){return function(){return Rb(this,e,t)}}function lM(e,t){return function(){return Rb(this,e,t.apply(this,arguments))}}function uM(e,t){return this.each((typeof t=="function"?lM:AM)(e,t))}function*hM(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var l=e[t],m=0,g=l.length,P;m<g;++m)(P=l[m])&&(yield P)}var Fb=[null];function ZA(e,t){this._groups=e,this._parents=t}function ld(){return new ZA([[document.documentElement]],Fb)}function cM(){return this}ZA.prototype=ld.prototype={constructor:ZA,select:VE,selectAll:QE,selectChild:jE,selectChildren:XE,filter:KE,data:rI,enter:JE,exit:sI,join:aI,merge:oI,selection:cM,order:AI,sort:lI,call:hI,nodes:cI,node:fI,size:dI,empty:pI,each:gI,attr:bI,style:EI,property:PI,classed:zI,text:NI,html:QI,raise:HI,lower:jI,append:WI,insert:$I,remove:KI,clone:tM,datum:iM,on:oM,dispatch:uM,[Symbol.iterator]:hM};function qs(e){return typeof e=="string"?new ZA([[document.querySelector(e)]],[document.documentElement]):new ZA([[e]],Fb)}function fM(e){return qs(N2(e).call(document.documentElement))}function dM(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Nu(e,t){if(e=dM(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var l=n.createSVGPoint();return l.x=e.clientX,l.y=e.clientY,l=l.matrixTransform(t.getScreenCTM().inverse()),[l.x,l.y]}if(t.getBoundingClientRect){var m=t.getBoundingClientRect();return[e.clientX-m.left-t.clientLeft,e.clientY-m.top-t.clientTop]}}return[e.pageX,e.pageY]}function q1(e){e.preventDefault(),e.stopImmediatePropagation()}function Ob(e){var t=e.document.documentElement,n=qs(e).on("dragstart.drag",q1,!0);"onselectstart"in t?n.on("selectstart.drag",q1,!0):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Nb(e,t){var n=e.document.documentElement,l=qs(e).on("dragstart.drag",null);t&&(l.on("click.drag",q1,!0),setTimeout(function(){l.on("click.drag",null)},0)),"onselectstart"in n?l.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function G2(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Vb(e,t){var n=Object.create(e.prototype);for(var l in t)n[l]=t[l];return n}function ud(){}var Zf=.7,kg=1/Zf,t0="\\s*([+-]?\\d+)\\s*",jf="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",du="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",pM=/^#([0-9a-f]{3,8})$/,gM=new RegExp("^rgb\\("+[t0,t0,t0]+"\\)$"),mM=new RegExp("^rgb\\("+[du,du,du]+"\\)$"),_M=new RegExp("^rgba\\("+[t0,t0,t0,jf]+"\\)$"),vM=new RegExp("^rgba\\("+[du,du,du,jf]+"\\)$"),yM=new RegExp("^hsl\\("+[jf,du,du]+"\\)$"),xM=new RegExp("^hsla\\("+[jf,du,du,jf]+"\\)$"),Fy={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};G2(ud,nc,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:Oy,formatHex:Oy,formatHsl:wM,formatRgb:Ny,toString:Ny});function Oy(){return this.rgb().formatHex()}function wM(){return Ub(this).formatHsl()}function Ny(){return this.rgb().formatRgb()}function nc(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=pM.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Vy(t):n===3?new Al(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Hp(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Hp(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=gM.exec(e))?new Al(t[1],t[2],t[3],1):(t=mM.exec(e))?new Al(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=_M.exec(e))?Hp(t[1],t[2],t[3],t[4]):(t=vM.exec(e))?Hp(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=yM.exec(e))?Qy(t[1],t[2]/100,t[3]/100,1):(t=xM.exec(e))?Qy(t[1],t[2]/100,t[3]/100,t[4]):Fy.hasOwnProperty(e)?Vy(Fy[e]):e==="transparent"?new Al(NaN,NaN,NaN,0):null}function Vy(e){return new Al(e>>16&255,e>>8&255,e&255,1)}function Hp(e,t,n,l){return l<=0&&(e=t=n=NaN),new Al(e,t,n,l)}function bM(e){return e instanceof ud||(e=nc(e)),e?(e=e.rgb(),new Al(e.r,e.g,e.b,e.opacity)):new Al}function H1(e,t,n,l){return arguments.length===1?bM(e):new Al(e,t,n,l??1)}function Al(e,t,n,l){this.r=+e,this.g=+t,this.b=+n,this.opacity=+l}G2(Al,H1,Vb(ud,{brighter:function(e){return e=e==null?kg:Math.pow(kg,e),new Al(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=e==null?Zf:Math.pow(Zf,e),new Al(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Uy,formatHex:Uy,formatRgb:Gy,toString:Gy}));function Uy(){return"#"+N_(this.r)+N_(this.g)+N_(this.b)}function Gy(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(e===1?")":", "+e+")")}function N_(e){return e=Math.max(0,Math.min(255,Math.round(e)||0)),(e<16?"0":"")+e.toString(16)}function Qy(e,t,n,l){return l<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new cu(e,t,n,l)}function Ub(e){if(e instanceof cu)return new cu(e.h,e.s,e.l,e.opacity);if(e instanceof ud||(e=nc(e)),!e)return new cu;if(e instanceof cu)return e;e=e.rgb();var t=e.r/255,n=e.g/255,l=e.b/255,m=Math.min(t,n,l),g=Math.max(t,n,l),P=NaN,u=g-m,Q=(g+m)/2;return u?(t===g?P=(n-l)/u+(n<l)*6:n===g?P=(l-t)/u+2:P=(t-n)/u+4,u/=Q<.5?g+m:2-g-m,P*=60):u=Q>0&&Q<1?0:P,new cu(P,u,Q,e.opacity)}function SM(e,t,n,l){return arguments.length===1?Ub(e):new cu(e,t,n,l??1)}function cu(e,t,n,l){this.h=+e,this.s=+t,this.l=+n,this.opacity=+l}G2(cu,SM,Vb(ud,{brighter:function(e){return e=e==null?kg:Math.pow(kg,e),new cu(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=e==null?Zf:Math.pow(Zf,e),new cu(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,l=n+(n<.5?n:1-n)*t,m=2*n-l;return new Al(V_(e>=240?e-240:e+120,m,l),V_(e,m,l),V_(e<120?e+240:e-120,m,l),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(e===1?")":", "+e+")")}}));function V_(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Q2=e=>()=>e;function CM(e,t){return function(n){return e+n*t}}function kM(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(l){return Math.pow(e+l*t,n)}}function EM(e){return(e=+e)==1?Gb:function(t,n){return n-t?kM(t,n,e):Q2(isNaN(t)?n:t)}}function Gb(e,t){var n=t-e;return n?CM(e,n):Q2(isNaN(e)?t:e)}const Eg=function e(t){var n=EM(t);function l(m,g){var P=n((m=H1(m)).r,(g=H1(g)).r),u=n(m.g,g.g),Q=n(m.b,g.b),O=Gb(m.opacity,g.opacity);return function(re){return m.r=P(re),m.g=u(re),m.b=Q(re),m.opacity=O(re),m+""}}return l.gamma=e,l}(1);function IM(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,l=t.slice(),m;return function(g){for(m=0;m<n;++m)l[m]=e[m]*(1-g)+t[m]*g;return l}}function MM(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function TM(e,t){var n=t?t.length:0,l=e?Math.min(n,e.length):0,m=new Array(l),g=new Array(n),P;for(P=0;P<l;++P)m[P]=em(e[P],t[P]);for(;P<n;++P)g[P]=t[P];return function(u){for(P=0;P<l;++P)g[P]=m[P](u);return g}}function PM(e,t){var n=new Date;return e=+e,t=+t,function(l){return n.setTime(e*(1-l)+t*l),n}}function ql(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function BM(e,t){var n={},l={},m;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(m in t)m in e?n[m]=em(e[m],t[m]):l[m]=t[m];return function(g){for(m in n)l[m]=n[m](g);return l}}var Z1=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,U_=new RegExp(Z1.source,"g");function DM(e){return function(){return e}}function LM(e){return function(t){return e(t)+""}}function Qb(e,t){var n=Z1.lastIndex=U_.lastIndex=0,l,m,g,P=-1,u=[],Q=[];for(e=e+"",t=t+"";(l=Z1.exec(e))&&(m=U_.exec(t));)(g=m.index)>n&&(g=t.slice(n,g),u[P]?u[P]+=g:u[++P]=g),(l=l[0])===(m=m[0])?u[P]?u[P]+=m:u[++P]=m:(u[++P]=null,Q.push({i:P,x:ql(l,m)})),n=U_.lastIndex;return n<t.length&&(g=t.slice(n),u[P]?u[P]+=g:u[++P]=g),u.length<2?Q[0]?LM(Q[0].x):DM(t):(t=Q.length,function(O){for(var re=0,ee;re<t;++re)u[(ee=Q[re]).i]=ee.x(O);return u.join("")})}function em(e,t){var n=typeof t,l;return t==null||n==="boolean"?Q2(t):(n==="number"?ql:n==="string"?(l=nc(t))?(t=l,Eg):Qb:t instanceof nc?Eg:t instanceof Date?PM:MM(t)?IM:Array.isArray(t)?TM:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?BM:ql)(e,t)}function zM(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var qy=180/Math.PI,j1={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function qb(e,t,n,l,m,g){var P,u,Q;return(P=Math.sqrt(e*e+t*t))&&(e/=P,t/=P),(Q=e*n+t*l)&&(n-=e*Q,l-=t*Q),(u=Math.sqrt(n*n+l*l))&&(n/=u,l/=u,Q/=u),e*l<t*n&&(e=-e,t=-t,Q=-Q,P=-P),{translateX:m,translateY:g,rotate:Math.atan2(t,e)*qy,skewX:Math.atan(Q)*qy,scaleX:P,scaleY:u}}var Zp;function RM(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?j1:qb(t.a,t.b,t.c,t.d,t.e,t.f)}function FM(e){return e==null||(Zp||(Zp=document.createElementNS("http://www.w3.org/2000/svg","g")),Zp.setAttribute("transform",e),!(e=Zp.transform.baseVal.consolidate()))?j1:(e=e.matrix,qb(e.a,e.b,e.c,e.d,e.e,e.f))}function Hb(e,t,n,l){function m(O){return O.length?O.pop()+" ":""}function g(O,re,ee,ce,le,je){if(O!==ee||re!==ce){var Je=le.push("translate(",null,t,null,n);je.push({i:Je-4,x:ql(O,ee)},{i:Je-2,x:ql(re,ce)})}else(ee||ce)&&le.push("translate("+ee+t+ce+n)}function P(O,re,ee,ce){O!==re?(O-re>180?re+=360:re-O>180&&(O+=360),ce.push({i:ee.push(m(ee)+"rotate(",null,l)-2,x:ql(O,re)})):re&&ee.push(m(ee)+"rotate("+re+l)}function u(O,re,ee,ce){O!==re?ce.push({i:ee.push(m(ee)+"skewX(",null,l)-2,x:ql(O,re)}):re&&ee.push(m(ee)+"skewX("+re+l)}function Q(O,re,ee,ce,le,je){if(O!==ee||re!==ce){var Je=le.push(m(le)+"scale(",null,",",null,")");je.push({i:Je-4,x:ql(O,ee)},{i:Je-2,x:ql(re,ce)})}else(ee!==1||ce!==1)&&le.push(m(le)+"scale("+ee+","+ce+")")}return function(O,re){var ee=[],ce=[];return O=e(O),re=e(re),g(O.translateX,O.translateY,re.translateX,re.translateY,ee,ce),P(O.rotate,re.rotate,ee,ce),u(O.skewX,re.skewX,ee,ce),Q(O.scaleX,O.scaleY,re.scaleX,re.scaleY,ee,ce),O=re=null,function(le){for(var je=-1,Je=ce.length,Xe;++je<Je;)ee[(Xe=ce[je]).i]=Xe.x(le);return ee.join("")}}}var OM=Hb(RM,"px, ","px)","deg)"),NM=Hb(FM,", ",")",")"),VM=1e-12;function Hy(e){return((e=Math.exp(e))+1/e)/2}function UM(e){return((e=Math.exp(e))-1/e)/2}function GM(e){return((e=Math.exp(2*e))-1)/(e+1)}const QM=function e(t,n,l){function m(g,P){var u=g[0],Q=g[1],O=g[2],re=P[0],ee=P[1],ce=P[2],le=re-u,je=ee-Q,Je=le*le+je*je,Xe,Ke;if(Je<VM)Ke=Math.log(ce/O)/t,Xe=function(Ai){return[u+Ai*le,Q+Ai*je,O*Math.exp(t*Ai*Ke)]};else{var xt=Math.sqrt(Je),gt=(ce*ce-O*O+l*Je)/(2*O*n*xt),Mt=(ce*ce-O*O-l*Je)/(2*ce*n*xt),Ct=Math.log(Math.sqrt(gt*gt+1)-gt),Te=Math.log(Math.sqrt(Mt*Mt+1)-Mt);Ke=(Te-Ct)/t,Xe=function(Ai){var ii=Ai*Ke,xi=Hy(Ct),gi=O/(n*xt)*(xi*GM(t*ii+Ct)-UM(Ct));return[u+gi*le,Q+gi*je,O*xi/Hy(t*ii+Ct)]}}return Xe.duration=Ke*1e3*t/Math.SQRT2,Xe}return m.rho=function(g){var P=Math.max(.001,+g),u=P*P,Q=u*u;return e(P,u,Q)},m}(Math.SQRT2,2,4);var l0=0,Of=0,kf=0,Zb=1e3,Ig,Nf,Mg=0,rc=0,tm=0,Wf=typeof performance=="object"&&performance.now?performance:Date,jb=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function q2(){return rc||(jb(qM),rc=Wf.now()+tm)}function qM(){rc=0}function Tg(){this._call=this._time=this._next=null}Tg.prototype=Wb.prototype={constructor:Tg,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?q2():+n)+(t==null?0:+t),!this._next&&Nf!==this&&(Nf?Nf._next=this:Ig=this,Nf=this),this._call=e,this._time=n,W1()},stop:function(){this._call&&(this._call=null,this._time=1/0,W1())}};function Wb(e,t,n){var l=new Tg;return l.restart(e,t,n),l}function HM(){q2(),++l0;for(var e=Ig,t;e;)(t=rc-e._time)>=0&&e._call.call(null,t),e=e._next;--l0}function Zy(){rc=(Mg=Wf.now())+tm,l0=Of=0;try{HM()}finally{l0=0,jM(),rc=0}}function ZM(){var e=Wf.now(),t=e-Mg;t>Zb&&(tm-=t,Mg=e)}function jM(){for(var e,t=Ig,n,l=1/0;t;)t._call?(l>t._time&&(l=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Ig=n);Nf=e,W1(l)}function W1(e){if(!l0){Of&&(Of=clearTimeout(Of));var t=e-rc;t>24?(e<1/0&&(Of=setTimeout(Zy,e-Wf.now()-tm)),kf&&(kf=clearInterval(kf))):(kf||(Mg=Wf.now(),kf=setInterval(ZM,Zb)),l0=1,jb(Zy))}}function jy(e,t,n){var l=new Tg;return t=t==null?0:+t,l.restart(m=>{l.stop(),e(m+t)},t,n),l}var WM=Kg("start","end","cancel","interrupt"),YM=[],Yb=0,Wy=1,Y1=2,ig=3,Yy=4,$1=5,ng=6;function im(e,t,n,l,m,g){var P=e.__transition;if(!P)e.__transition={};else if(n in P)return;$M(e,n,{name:t,index:l,group:m,on:WM,tween:YM,time:g.time,delay:g.delay,duration:g.duration,ease:g.ease,timer:null,state:Yb})}function H2(e,t){var n=$l(e,t);if(n.state>Yb)throw new Error("too late; already scheduled");return n}function _u(e,t){var n=$l(e,t);if(n.state>ig)throw new Error("too late; already running");return n}function $l(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function $M(e,t,n){var l=e.__transition,m;l[t]=n,n.timer=Wb(g,0,n.time);function g(O){n.state=Wy,n.timer.restart(P,n.delay,n.time),n.delay<=O&&P(O-n.delay)}function P(O){var re,ee,ce,le;if(n.state!==Wy)return Q();for(re in l)if(le=l[re],le.name===n.name){if(le.state===ig)return jy(P);le.state===Yy?(le.state=ng,le.timer.stop(),le.on.call("interrupt",e,e.__data__,le.index,le.group),delete l[re]):+re<t&&(le.state=ng,le.timer.stop(),le.on.call("cancel",e,e.__data__,le.index,le.group),delete l[re])}if(jy(function(){n.state===ig&&(n.state=Yy,n.timer.restart(u,n.delay,n.time),u(O))}),n.state=Y1,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Y1){for(n.state=ig,m=new Array(ce=n.tween.length),re=0,ee=-1;re<ce;++re)(le=n.tween[re].value.call(e,e.__data__,n.index,n.group))&&(m[++ee]=le);m.length=ee+1}}function u(O){for(var re=O<n.duration?n.ease.call(null,O/n.duration):(n.timer.restart(Q),n.state=$1,1),ee=-1,ce=m.length;++ee<ce;)m[ee].call(e,re);n.state===$1&&(n.on.call("end",e,e.__data__,n.index,n.group),Q())}function Q(){n.state=ng,n.timer.stop(),delete l[t];for(var O in l)return;delete e.__transition}}function i0(e,t){var n=e.__transition,l,m,g=!0,P;if(n){t=t==null?null:t+"";for(P in n){if((l=n[P]).name!==t){g=!1;continue}m=l.state>Y1&&l.state<$1,l.state=ng,l.timer.stop(),l.on.call(m?"interrupt":"cancel",e,e.__data__,l.index,l.group),delete n[P]}g&&delete e.__transition}}function XM(e){return this.each(function(){i0(this,e)})}function KM(e,t){var n,l;return function(){var m=_u(this,e),g=m.tween;if(g!==n){l=n=g;for(var P=0,u=l.length;P<u;++P)if(l[P].name===t){l=l.slice(),l.splice(P,1);break}}m.tween=l}}function JM(e,t,n){var l,m;if(typeof n!="function")throw new Error;return function(){var g=_u(this,e),P=g.tween;if(P!==l){m=(l=P).slice();for(var u={name:t,value:n},Q=0,O=m.length;Q<O;++Q)if(m[Q].name===t){m[Q]=u;break}Q===O&&m.push(u)}g.tween=m}}function eT(e,t){var n=this._id;if(e+="",arguments.length<2){for(var l=$l(this.node(),n).tween,m=0,g=l.length,P;m<g;++m)if((P=l[m]).name===e)return P.value;return null}return this.each((t==null?KM:JM)(n,e,t))}function Z2(e,t,n){var l=e._id;return e.each(function(){var m=_u(this,l);(m.value||(m.value={}))[t]=n.apply(this,arguments)}),function(m){return $l(m,l).value[t]}}function $b(e,t){var n;return(typeof t=="number"?ql:t instanceof nc?Eg:(n=nc(t))?(t=n,Eg):Qb)(e,t)}function tT(e){return function(){this.removeAttribute(e)}}function iT(e){return function(){this.removeAttributeNS(e.space,e.local)}}function nT(e,t,n){var l,m=n+"",g;return function(){var P=this.getAttribute(e);return P===m?null:P===l?g:g=t(l=P,n)}}function rT(e,t,n){var l,m=n+"",g;return function(){var P=this.getAttributeNS(e.space,e.local);return P===m?null:P===l?g:g=t(l=P,n)}}function sT(e,t,n){var l,m,g;return function(){var P,u=n(this),Q;return u==null?void this.removeAttribute(e):(P=this.getAttribute(e),Q=u+"",P===Q?null:P===l&&Q===m?g:(m=Q,g=t(l=P,u)))}}function aT(e,t,n){var l,m,g;return function(){var P,u=n(this),Q;return u==null?void this.removeAttributeNS(e.space,e.local):(P=this.getAttributeNS(e.space,e.local),Q=u+"",P===Q?null:P===l&&Q===m?g:(m=Q,g=t(l=P,u)))}}function oT(e,t){var n=Jg(e),l=n==="transform"?NM:$b;return this.attrTween(e,typeof t=="function"?(n.local?aT:sT)(n,l,Z2(this,"attr."+e,t)):t==null?(n.local?iT:tT)(n):(n.local?rT:nT)(n,l,t))}function AT(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function lT(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function uT(e,t){var n,l;function m(){var g=t.apply(this,arguments);return g!==l&&(n=(l=g)&&lT(e,g)),n}return m._value=t,m}function hT(e,t){var n,l;function m(){var g=t.apply(this,arguments);return g!==l&&(n=(l=g)&&AT(e,g)),n}return m._value=t,m}function cT(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var l=Jg(e);return this.tween(n,(l.local?uT:hT)(l,t))}function fT(e,t){return function(){H2(this,e).delay=+t.apply(this,arguments)}}function dT(e,t){return t=+t,function(){H2(this,e).delay=t}}function pT(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?fT:dT)(t,e)):$l(this.node(),t).delay}function gT(e,t){return function(){_u(this,e).duration=+t.apply(this,arguments)}}function mT(e,t){return t=+t,function(){_u(this,e).duration=t}}function _T(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?gT:mT)(t,e)):$l(this.node(),t).duration}function vT(e,t){if(typeof t!="function")throw new Error;return function(){_u(this,e).ease=t}}function yT(e){var t=this._id;return arguments.length?this.each(vT(t,e)):$l(this.node(),t).ease}function xT(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;_u(this,e).ease=n}}function wT(e){if(typeof e!="function")throw new Error;return this.each(xT(this._id,e))}function bT(e){typeof e!="function"&&(e=Ib(e));for(var t=this._groups,n=t.length,l=new Array(n),m=0;m<n;++m)for(var g=t[m],P=g.length,u=l[m]=[],Q,O=0;O<P;++O)(Q=g[O])&&e.call(Q,Q.__data__,O,g)&&u.push(Q);return new ju(l,this._parents,this._name,this._id)}function ST(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,l=t.length,m=n.length,g=Math.min(l,m),P=new Array(l),u=0;u<g;++u)for(var Q=t[u],O=n[u],re=Q.length,ee=P[u]=new Array(re),ce,le=0;le<re;++le)(ce=Q[le]||O[le])&&(ee[le]=ce);for(;u<l;++u)P[u]=t[u];return new ju(P,this._parents,this._name,this._id)}function CT(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function kT(e,t,n){var l,m,g=CT(t)?H2:_u;return function(){var P=g(this,e),u=P.on;u!==l&&(m=(l=u).copy()).on(t,n),P.on=m}}function ET(e,t){var n=this._id;return arguments.length<2?$l(this.node(),n).on.on(e):this.each(kT(n,e,t))}function IT(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function MT(){return this.on("end.remove",IT(this._id))}function TT(e){var t=this._name,n=this._id;typeof e!="function"&&(e=V2(e));for(var l=this._groups,m=l.length,g=new Array(m),P=0;P<m;++P)for(var u=l[P],Q=u.length,O=g[P]=new Array(Q),re,ee,ce=0;ce<Q;++ce)(re=u[ce])&&(ee=e.call(re,re.__data__,ce,u))&&("__data__"in re&&(ee.__data__=re.__data__),O[ce]=ee,im(O[ce],t,n,ce,O,$l(re,n)));return new ju(g,this._parents,t,n)}function PT(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Eb(e));for(var l=this._groups,m=l.length,g=[],P=[],u=0;u<m;++u)for(var Q=l[u],O=Q.length,re,ee=0;ee<O;++ee)if(re=Q[ee]){for(var ce=e.call(re,re.__data__,ee,Q),le,je=$l(re,n),Je=0,Xe=ce.length;Je<Xe;++Je)(le=ce[Je])&&im(le,t,n,Je,ce,je);g.push(ce),P.push(re)}return new ju(g,P,t,n)}var BT=ld.prototype.constructor;function DT(){return new BT(this._groups,this._parents)}function LT(e,t){var n,l,m;return function(){var g=A0(this,e),P=(this.style.removeProperty(e),A0(this,e));return g===P?null:g===n&&P===l?m:m=t(n=g,l=P)}}function Xb(e){return function(){this.style.removeProperty(e)}}function zT(e,t,n){var l,m=n+"",g;return function(){var P=A0(this,e);return P===m?null:P===l?g:g=t(l=P,n)}}function RT(e,t,n){var l,m,g;return function(){var P=A0(this,e),u=n(this),Q=u+"";return u==null&&(Q=u=(this.style.removeProperty(e),A0(this,e))),P===Q?null:P===l&&Q===m?g:(m=Q,g=t(l=P,u))}}function FT(e,t){var n,l,m,g="style."+t,P="end."+g,u;return function(){var Q=_u(this,e),O=Q.on,re=Q.value[g]==null?u||(u=Xb(t)):void 0;(O!==n||m!==re)&&(l=(n=O).copy()).on(P,m=re),Q.on=l}}function OT(e,t,n){var l=(e+="")=="transform"?OM:$b;return t==null?this.styleTween(e,LT(e,l)).on("end.style."+e,Xb(e)):typeof t=="function"?this.styleTween(e,RT(e,l,Z2(this,"style."+e,t))).each(FT(this._id,e)):this.styleTween(e,zT(e,l,t),n).on("end.style."+e,null)}function NT(e,t,n){return function(l){this.style.setProperty(e,t.call(this,l),n)}}function VT(e,t,n){var l,m;function g(){var P=t.apply(this,arguments);return P!==m&&(l=(m=P)&&NT(e,P,n)),l}return g._value=t,g}function UT(e,t,n){var l="style."+(e+="");if(arguments.length<2)return(l=this.tween(l))&&l._value;if(t==null)return this.tween(l,null);if(typeof t!="function")throw new Error;return this.tween(l,VT(e,t,n??""))}function GT(e){return function(){this.textContent=e}}function QT(e){return function(){var t=e(this);this.textContent=t??""}}function qT(e){return this.tween("text",typeof e=="function"?QT(Z2(this,"text",e)):GT(e==null?"":e+""))}function HT(e){return function(t){this.textContent=e.call(this,t)}}function ZT(e){var t,n;function l(){var m=e.apply(this,arguments);return m!==n&&(t=(n=m)&&HT(m)),t}return l._value=e,l}function jT(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,ZT(e))}function WT(){for(var e=this._name,t=this._id,n=Kb(),l=this._groups,m=l.length,g=0;g<m;++g)for(var P=l[g],u=P.length,Q,O=0;O<u;++O)if(Q=P[O]){var re=$l(Q,t);im(Q,e,n,O,P,{time:re.time+re.delay+re.duration,delay:0,duration:re.duration,ease:re.ease})}return new ju(l,this._parents,e,n)}function YT(){var e,t,n=this,l=n._id,m=n.size();return new Promise(function(g,P){var u={value:P},Q={value:function(){--m===0&&g()}};n.each(function(){var O=_u(this,l),re=O.on;re!==e&&(t=(e=re).copy(),t._.cancel.push(u),t._.interrupt.push(u),t._.end.push(Q)),O.on=t}),m===0&&g()})}var $T=0;function ju(e,t,n,l){this._groups=e,this._parents=t,this._name=n,this._id=l}function Kb(){return++$T}var Hh=ld.prototype;ju.prototype={constructor:ju,select:TT,selectAll:PT,filter:bT,merge:ST,selection:DT,transition:WT,call:Hh.call,nodes:Hh.nodes,node:Hh.node,size:Hh.size,empty:Hh.empty,each:Hh.each,on:ET,attr:oT,attrTween:cT,style:OT,styleTween:UT,text:qT,textTween:jT,remove:MT,tween:eT,delay:pT,duration:_T,ease:yT,easeVarying:wT,end:YT,[Symbol.iterator]:Hh[Symbol.iterator]};function XT(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var KT={time:null,delay:0,duration:250,ease:XT};function JT(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function eP(e){var t,n;e instanceof ju?(t=e._id,e=e._name):(t=Kb(),(n=KT).time=q2(),e=e==null?null:e+"");for(var l=this._groups,m=l.length,g=0;g<m;++g)for(var P=l[g],u=P.length,Q,O=0;O<u;++O)(Q=P[O])&&im(Q,e,t,O,P,n||JT(Q,t));return new ju(l,this._parents,e,t)}ld.prototype.interrupt=XM;ld.prototype.transition=eP;const G_=e=>()=>e;function tP(e,{sourceEvent:t,target:n,selection:l,mode:m,dispatch:g}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:l,enumerable:!0,configurable:!0},mode:{value:m,enumerable:!0,configurable:!0},_:{value:g}})}function iP(e){e.stopImmediatePropagation()}function Q_(e){e.preventDefault(),e.stopImmediatePropagation()}var $y={name:"drag"},q_={name:"space"},qc={name:"handle"},Hc={name:"center"};const{abs:Xy,max:$o,min:Xo}=Math;function Ky(e){return[+e[0],+e[1]]}function X1(e){return[Ky(e[0]),Ky(e[1])]}var H_={name:"x",handles:["w","e"].map(Yf),input:function(e,t){return e==null?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},Z_={name:"y",handles:["n","s"].map(Yf),input:function(e,t){return e==null?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},nP={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(Yf),input:function(e){return e==null?null:X1(e)},output:function(e){return e}},Fu={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Jy={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},ex={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},rP={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},sP={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function Yf(e){return{type:e}}function aP(e){return!e.ctrlKey&&!e.button}function oP(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function AP(){return navigator.maxTouchPoints||"ontouchstart"in this}function j_(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function lP(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function uP(){return hP(nP)}function hP(e){var t=oP,n=aP,l=AP,m=!0,g=Kg("start","brush","end"),P=6,u;function Q(Xe){var Ke=Xe.property("__brush",Je).selectAll(".overlay").data([Yf("overlay")]);Ke.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Fu.overlay).merge(Ke).each(function(){var gt=j_(this).extent;qs(this).attr("x",gt[0][0]).attr("y",gt[0][1]).attr("width",gt[1][0]-gt[0][0]).attr("height",gt[1][1]-gt[0][1])}),Xe.selectAll(".selection").data([Yf("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Fu.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var xt=Xe.selectAll(".handle").data(e.handles,function(gt){return gt.type});xt.exit().remove(),xt.enter().append("rect").attr("class",function(gt){return"handle handle--"+gt.type}).attr("cursor",function(gt){return Fu[gt.type]}),Xe.each(O).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",ce).filter(l).on("touchstart.brush",ce).on("touchmove.brush",le).on("touchend.brush touchcancel.brush",je).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}Q.move=function(Xe,Ke){Xe.tween?Xe.on("start.brush",function(xt){re(this,arguments).beforestart().start(xt)}).on("interrupt.brush end.brush",function(xt){re(this,arguments).end(xt)}).tween("brush",function(){var xt=this,gt=xt.__brush,Mt=re(xt,arguments),Ct=gt.selection,Te=e.input(typeof Ke=="function"?Ke.apply(this,arguments):Ke,gt.extent),Ai=em(Ct,Te);function ii(xi){gt.selection=xi===1&&Te===null?null:Ai(xi),O.call(xt),Mt.brush()}return Ct!==null&&Te!==null?ii:ii(1)}):Xe.each(function(){var xt=this,gt=arguments,Mt=xt.__brush,Ct=e.input(typeof Ke=="function"?Ke.apply(xt,gt):Ke,Mt.extent),Te=re(xt,gt).beforestart();i0(xt),Mt.selection=Ct===null?null:Ct,O.call(xt),Te.start().brush().end()})},Q.clear=function(Xe){Q.move(Xe,null)};function O(){var Xe=qs(this),Ke=j_(this).selection;Ke?(Xe.selectAll(".selection").style("display",null).attr("x",Ke[0][0]).attr("y",Ke[0][1]).attr("width",Ke[1][0]-Ke[0][0]).attr("height",Ke[1][1]-Ke[0][1]),Xe.selectAll(".handle").style("display",null).attr("x",function(xt){return xt.type[xt.type.length-1]==="e"?Ke[1][0]-P/2:Ke[0][0]-P/2}).attr("y",function(xt){return xt.type[0]==="s"?Ke[1][1]-P/2:Ke[0][1]-P/2}).attr("width",function(xt){return xt.type==="n"||xt.type==="s"?Ke[1][0]-Ke[0][0]+P:P}).attr("height",function(xt){return xt.type==="e"||xt.type==="w"?Ke[1][1]-Ke[0][1]+P:P})):Xe.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function re(Xe,Ke,xt){var gt=Xe.__brush.emitter;return gt&&(!xt||!gt.clean)?gt:new ee(Xe,Ke,xt)}function ee(Xe,Ke,xt){this.that=Xe,this.args=Ke,this.state=Xe.__brush,this.active=0,this.clean=xt}ee.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(Xe,Ke){return this.starting?(this.starting=!1,this.emit("start",Xe,Ke)):this.emit("brush",Xe),this},brush:function(Xe,Ke){return this.emit("brush",Xe,Ke),this},end:function(Xe,Ke){return--this.active===0&&(delete this.state.emitter,this.emit("end",Xe,Ke)),this},emit:function(Xe,Ke,xt){var gt=qs(this.that).datum();g.call(Xe,this.that,new tP(Xe,{sourceEvent:Ke,target:Q,selection:e.output(this.state.selection),mode:xt,dispatch:g}),gt)}};function ce(Xe){if(u&&!Xe.touches||!n.apply(this,arguments))return;var Ke=this,xt=Xe.target.__data__.type,gt=(m&&Xe.metaKey?xt="overlay":xt)==="selection"?$y:m&&Xe.altKey?Hc:qc,Mt=e===Z_?null:rP[xt],Ct=e===H_?null:sP[xt],Te=j_(Ke),Ai=Te.extent,ii=Te.selection,xi=Ai[0][0],gi,qt,di=Ai[0][1],mi,vt,Ut=Ai[1][0],rt,Ft,ui=Ai[1][1],Lt,Yt,oi=0,yi=0,Pi,dn=Mt&&Ct&&m&&Xe.shiftKey,sn,Bn,fi=Array.from(Xe.touches||[Xe],Gi=>{const zn=Gi.identifier;return Gi=Nu(Gi,Ke),Gi.point0=Gi.slice(),Gi.identifier=zn,Gi});if(xt==="overlay"){ii&&(Pi=!0);const Gi=[fi[0],fi[1]||fi[0]];Te.selection=ii=[[gi=e===Z_?xi:Xo(Gi[0][0],Gi[1][0]),mi=e===H_?di:Xo(Gi[0][1],Gi[1][1])],[rt=e===Z_?Ut:$o(Gi[0][0],Gi[1][0]),Lt=e===H_?ui:$o(Gi[0][1],Gi[1][1])]],fi.length>1&&ir()}else gi=ii[0][0],mi=ii[0][1],rt=ii[1][0],Lt=ii[1][1];qt=gi,vt=mi,Ft=rt,Yt=Lt;var $i=qs(Ke).attr("pointer-events","none"),li=$i.selectAll(".overlay").attr("cursor",Fu[xt]);i0(Ke);var Li=re(Ke,arguments,!0).beforestart();if(Xe.touches)Li.moved=wi,Li.ended=kn;else{var Ji=qs(Xe.view).on("mousemove.brush",wi,!0).on("mouseup.brush",kn,!0);m&&Ji.on("keydown.brush",vr,!0).on("keyup.brush",Or,!0),Ob(Xe.view)}O.call(Ke),Li.start(Xe,gt.name);function wi(Gi){for(const zn of Gi.changedTouches||[Gi])for(const Cs of fi)Cs.identifier===zn.identifier&&(Cs.cur=Nu(zn,Ke));if(dn&&!sn&&!Bn&&fi.length===1){const zn=fi[0];Xy(zn.cur[0]-zn[0])>Xy(zn.cur[1]-zn[1])?Bn=!0:sn=!0}for(const zn of fi)zn.cur&&(zn[0]=zn.cur[0],zn[1]=zn.cur[1]);Pi=!0,Q_(Gi),ir(Gi)}function ir(Gi){const zn=fi[0],Cs=zn.point0;var Kt;switch(oi=zn[0]-Cs[0],yi=zn[1]-Cs[1],gt){case q_:case $y:{Mt&&(oi=$o(xi-gi,Xo(Ut-rt,oi)),qt=gi+oi,Ft=rt+oi),Ct&&(yi=$o(di-mi,Xo(ui-Lt,yi)),vt=mi+yi,Yt=Lt+yi);break}case qc:{fi[1]?(Mt&&(qt=$o(xi,Xo(Ut,fi[0][0])),Ft=$o(xi,Xo(Ut,fi[1][0])),Mt=1),Ct&&(vt=$o(di,Xo(ui,fi[0][1])),Yt=$o(di,Xo(ui,fi[1][1])),Ct=1)):(Mt<0?(oi=$o(xi-gi,Xo(Ut-gi,oi)),qt=gi+oi,Ft=rt):Mt>0&&(oi=$o(xi-rt,Xo(Ut-rt,oi)),qt=gi,Ft=rt+oi),Ct<0?(yi=$o(di-mi,Xo(ui-mi,yi)),vt=mi+yi,Yt=Lt):Ct>0&&(yi=$o(di-Lt,Xo(ui-Lt,yi)),vt=mi,Yt=Lt+yi));break}case Hc:{Mt&&(qt=$o(xi,Xo(Ut,gi-oi*Mt)),Ft=$o(xi,Xo(Ut,rt+oi*Mt))),Ct&&(vt=$o(di,Xo(ui,mi-yi*Ct)),Yt=$o(di,Xo(ui,Lt+yi*Ct)));break}}Ft<qt&&(Mt*=-1,Kt=gi,gi=rt,rt=Kt,Kt=qt,qt=Ft,Ft=Kt,xt in Jy&&li.attr("cursor",Fu[xt=Jy[xt]])),Yt<vt&&(Ct*=-1,Kt=mi,mi=Lt,Lt=Kt,Kt=vt,vt=Yt,Yt=Kt,xt in ex&&li.attr("cursor",Fu[xt=ex[xt]])),Te.selection&&(ii=Te.selection),sn&&(qt=ii[0][0],Ft=ii[1][0]),Bn&&(vt=ii[0][1],Yt=ii[1][1]),(ii[0][0]!==qt||ii[0][1]!==vt||ii[1][0]!==Ft||ii[1][1]!==Yt)&&(Te.selection=[[qt,vt],[Ft,Yt]],O.call(Ke),Li.brush(Gi,gt.name))}function kn(Gi){if(iP(Gi),Gi.touches){if(Gi.touches.length)return;u&&clearTimeout(u),u=setTimeout(function(){u=null},500)}else Nb(Gi.view,Pi),Ji.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);$i.attr("pointer-events","all"),li.attr("cursor",Fu.overlay),Te.selection&&(ii=Te.selection),lP(ii)&&(Te.selection=null,O.call(Ke)),Li.end(Gi,gt.name)}function vr(Gi){switch(Gi.keyCode){case 16:{dn=Mt&&Ct;break}case 18:{gt===qc&&(Mt&&(rt=Ft-oi*Mt,gi=qt+oi*Mt),Ct&&(Lt=Yt-yi*Ct,mi=vt+yi*Ct),gt=Hc,ir());break}case 32:{(gt===qc||gt===Hc)&&(Mt<0?rt=Ft-oi:Mt>0&&(gi=qt-oi),Ct<0?Lt=Yt-yi:Ct>0&&(mi=vt-yi),gt=q_,li.attr("cursor",Fu.selection),ir());break}default:return}Q_(Gi)}function Or(Gi){switch(Gi.keyCode){case 16:{dn&&(sn=Bn=dn=!1,ir());break}case 18:{gt===Hc&&(Mt<0?rt=Ft:Mt>0&&(gi=qt),Ct<0?Lt=Yt:Ct>0&&(mi=vt),gt=qc,ir());break}case 32:{gt===q_&&(Gi.altKey?(Mt&&(rt=Ft-oi*Mt,gi=qt+oi*Mt),Ct&&(Lt=Yt-yi*Ct,mi=vt+yi*Ct),gt=Hc):(Mt<0?rt=Ft:Mt>0&&(gi=qt),Ct<0?Lt=Yt:Ct>0&&(mi=vt),gt=qc),li.attr("cursor",Fu[xt]),ir());break}default:return}Q_(Gi)}}function le(Xe){re(this,arguments).moved(Xe)}function je(Xe){re(this,arguments).ended(Xe)}function Je(){var Xe=this.__brush||{selection:null};return Xe.extent=X1(t.apply(this,arguments)),Xe.dim=e,Xe}return Q.extent=function(Xe){return arguments.length?(t=typeof Xe=="function"?Xe:G_(X1(Xe)),Q):t},Q.filter=function(Xe){return arguments.length?(n=typeof Xe=="function"?Xe:G_(!!Xe),Q):n},Q.touchable=function(Xe){return arguments.length?(l=typeof Xe=="function"?Xe:G_(!!Xe),Q):l},Q.handleSize=function(Xe){return arguments.length?(P=+Xe,Q):P},Q.keyModifiers=function(Xe){return arguments.length?(m=!!Xe,Q):m},Q.on=function(){var Xe=g.on.apply(g,arguments);return Xe===g?Q:Xe},Q}const K1=Math.PI,J1=2*K1,jh=1e-6,cP=J1-jh;function e2(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Jb(){return new e2}e2.prototype=Jb.prototype={constructor:e2,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,l){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+l)},bezierCurveTo:function(e,t,n,l,m,g){this._+="C"+ +e+","+ +t+","+ +n+","+ +l+","+(this._x1=+m)+","+(this._y1=+g)},arcTo:function(e,t,n,l,m){e=+e,t=+t,n=+n,l=+l,m=+m;var g=this._x1,P=this._y1,u=n-e,Q=l-t,O=g-e,re=P-t,ee=O*O+re*re;if(m<0)throw new Error("negative radius: "+m);if(this._x1===null)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(ee>jh)if(!(Math.abs(re*u-Q*O)>jh)||!m)this._+="L"+(this._x1=e)+","+(this._y1=t);else{var ce=n-g,le=l-P,je=u*u+Q*Q,Je=ce*ce+le*le,Xe=Math.sqrt(je),Ke=Math.sqrt(ee),xt=m*Math.tan((K1-Math.acos((je+ee-Je)/(2*Xe*Ke)))/2),gt=xt/Ke,Mt=xt/Xe;Math.abs(gt-1)>jh&&(this._+="L"+(e+gt*O)+","+(t+gt*re)),this._+="A"+m+","+m+",0,0,"+ +(re*ce>O*le)+","+(this._x1=e+Mt*u)+","+(this._y1=t+Mt*Q)}},arc:function(e,t,n,l,m,g){e=+e,t=+t,n=+n,g=!!g;var P=n*Math.cos(l),u=n*Math.sin(l),Q=e+P,O=t+u,re=1^g,ee=g?l-m:m-l;if(n<0)throw new Error("negative radius: "+n);this._x1===null?this._+="M"+Q+","+O:(Math.abs(this._x1-Q)>jh||Math.abs(this._y1-O)>jh)&&(this._+="L"+Q+","+O),n&&(ee<0&&(ee=ee%J1+J1),ee>cP?this._+="A"+n+","+n+",0,1,"+re+","+(e-P)+","+(t-u)+"A"+n+","+n+",0,1,"+re+","+(this._x1=Q)+","+(this._y1=O):ee>jh&&(this._+="A"+n+","+n+",0,"+ +(ee>=K1)+","+re+","+(this._x1=e+n*Math.cos(m))+","+(this._y1=t+n*Math.sin(m))))},rect:function(e,t,n,l){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +l+"h"+-n+"Z"},toString:function(){return this._}};function fP(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Pg(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,l=e.slice(0,n);return[l.length>1?l[0]+l.slice(2):l,+e.slice(n+1)]}function u0(e){return e=Pg(Math.abs(e)),e?e[1]:NaN}function dP(e,t){return function(n,l){for(var m=n.length,g=[],P=0,u=e[0],Q=0;m>0&&u>0&&(Q+u+1>l&&(u=Math.max(1,l-Q)),g.push(n.substring(m-=u,m+u)),!((Q+=u+1)>l));)u=e[P=(P+1)%e.length];return g.reverse().join(t)}}function pP(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var gP=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Bg(e){if(!(t=gP.exec(e)))throw new Error("invalid format: "+e);var t;return new j2({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Bg.prototype=j2.prototype;function j2(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}j2.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function mP(e){e:for(var t=e.length,n=1,l=-1,m;n<t;++n)switch(e[n]){case".":l=m=n;break;case"0":l===0&&(l=n),m=n;break;default:if(!+e[n])break e;l>0&&(l=0);break}return l>0?e.slice(0,l)+e.slice(m+1):e}var e3;function _P(e,t){var n=Pg(e,t);if(!n)return e+"";var l=n[0],m=n[1],g=m-(e3=Math.max(-8,Math.min(8,Math.floor(m/3)))*3)+1,P=l.length;return g===P?l:g>P?l+new Array(g-P+1).join("0"):g>0?l.slice(0,g)+"."+l.slice(g):"0."+new Array(1-g).join("0")+Pg(e,Math.max(0,t+g-1))[0]}function tx(e,t){var n=Pg(e,t);if(!n)return e+"";var l=n[0],m=n[1];return m<0?"0."+new Array(-m).join("0")+l:l.length>m+1?l.slice(0,m+1)+"."+l.slice(m+1):l+new Array(m-l.length+2).join("0")}const ix={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:fP,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>tx(e*100,t),r:tx,s:_P,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function nx(e){return e}var rx=Array.prototype.map,sx=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function vP(e){var t=e.grouping===void 0||e.thousands===void 0?nx:dP(rx.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",l=e.currency===void 0?"":e.currency[1]+"",m=e.decimal===void 0?".":e.decimal+"",g=e.numerals===void 0?nx:pP(rx.call(e.numerals,String)),P=e.percent===void 0?"%":e.percent+"",u=e.minus===void 0?"−":e.minus+"",Q=e.nan===void 0?"NaN":e.nan+"";function O(ee){ee=Bg(ee);var ce=ee.fill,le=ee.align,je=ee.sign,Je=ee.symbol,Xe=ee.zero,Ke=ee.width,xt=ee.comma,gt=ee.precision,Mt=ee.trim,Ct=ee.type;Ct==="n"?(xt=!0,Ct="g"):ix[Ct]||(gt===void 0&&(gt=12),Mt=!0,Ct="g"),(Xe||ce==="0"&&le==="=")&&(Xe=!0,ce="0",le="=");var Te=Je==="$"?n:Je==="#"&&/[boxX]/.test(Ct)?"0"+Ct.toLowerCase():"",Ai=Je==="$"?l:/[%p]/.test(Ct)?P:"",ii=ix[Ct],xi=/[defgprs%]/.test(Ct);gt=gt===void 0?6:/[gprs]/.test(Ct)?Math.max(1,Math.min(21,gt)):Math.max(0,Math.min(20,gt));function gi(qt){var di=Te,mi=Ai,vt,Ut,rt;if(Ct==="c")mi=ii(qt)+mi,qt="";else{qt=+qt;var Ft=qt<0||1/qt<0;if(qt=isNaN(qt)?Q:ii(Math.abs(qt),gt),Mt&&(qt=mP(qt)),Ft&&+qt==0&&je!=="+"&&(Ft=!1),di=(Ft?je==="("?je:u:je==="-"||je==="("?"":je)+di,mi=(Ct==="s"?sx[8+e3/3]:"")+mi+(Ft&&je==="("?")":""),xi){for(vt=-1,Ut=qt.length;++vt<Ut;)if(rt=qt.charCodeAt(vt),48>rt||rt>57){mi=(rt===46?m+qt.slice(vt+1):qt.slice(vt))+mi,qt=qt.slice(0,vt);break}}}xt&&!Xe&&(qt=t(qt,1/0));var ui=di.length+qt.length+mi.length,Lt=ui<Ke?new Array(Ke-ui+1).join(ce):"";switch(xt&&Xe&&(qt=t(Lt+qt,Lt.length?Ke-mi.length:1/0),Lt=""),le){case"<":qt=di+qt+mi+Lt;break;case"=":qt=di+Lt+qt+mi;break;case"^":qt=Lt.slice(0,ui=Lt.length>>1)+di+qt+mi+Lt.slice(ui);break;default:qt=Lt+di+qt+mi;break}return g(qt)}return gi.toString=function(){return ee+""},gi}function re(ee,ce){var le=O((ee=Bg(ee),ee.type="f",ee)),je=Math.max(-8,Math.min(8,Math.floor(u0(ce)/3)))*3,Je=Math.pow(10,-je),Xe=sx[8+je/3];return function(Ke){return le(Je*Ke)+Xe}}return{format:O,formatPrefix:re}}var jp,W2,t3;yP({thousands:",",grouping:[3],currency:["$",""]});function yP(e){return jp=vP(e),W2=jp.format,t3=jp.formatPrefix,jp}function xP(e){return Math.max(0,-u0(Math.abs(e)))}function wP(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(u0(t)/3)))*3-u0(Math.abs(e)))}function bP(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,u0(t)-u0(e))+1}function SP(e){var t=0,n=e.children,l=n&&n.length;if(!l)t=1;else for(;--l>=0;)t+=n[l].value;e.value=t}function CP(){return this.eachAfter(SP)}function kP(e,t){let n=-1;for(const l of this)e.call(t,l,++n,this);return this}function EP(e,t){for(var n=this,l=[n],m,g,P=-1;n=l.pop();)if(e.call(t,n,++P,this),m=n.children)for(g=m.length-1;g>=0;--g)l.push(m[g]);return this}function IP(e,t){for(var n=this,l=[n],m=[],g,P,u,Q=-1;n=l.pop();)if(m.push(n),g=n.children)for(P=0,u=g.length;P<u;++P)l.push(g[P]);for(;n=m.pop();)e.call(t,n,++Q,this);return this}function MP(e,t){let n=-1;for(const l of this)if(e.call(t,l,++n,this))return l}function TP(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,l=t.children,m=l&&l.length;--m>=0;)n+=l[m].value;t.value=n})}function PP(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function BP(e){for(var t=this,n=DP(t,e),l=[t];t!==n;)t=t.parent,l.push(t);for(var m=l.length;e!==n;)l.splice(m,0,e),e=e.parent;return l}function DP(e,t){if(e===t)return e;var n=e.ancestors(),l=t.ancestors(),m=null;for(e=n.pop(),t=l.pop();e===t;)m=e,e=n.pop(),t=l.pop();return m}function LP(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function zP(){return Array.from(this)}function RP(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function FP(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*OP(){var e=this,t,n=[e],l,m,g;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,l=e.children)for(m=0,g=l.length;m<g;++m)n.push(l[m]);while(n.length)}function Kh(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=UP)):t===void 0&&(t=VP);for(var n=new Dg(e),l,m=[n],g,P,u,Q;l=m.pop();)if((P=t(l.data))&&(Q=(P=Array.from(P)).length))for(l.children=P,u=Q-1;u>=0;--u)m.push(g=P[u]=new Dg(P[u])),g.parent=l,g.depth=l.depth+1;return n.eachBefore(QP)}function NP(){return Kh(this).eachBefore(GP)}function VP(e){return e.children}function UP(e){return Array.isArray(e)?e[1]:null}function GP(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function QP(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function Dg(e){this.data=e,this.depth=this.height=0,this.parent=null}Dg.prototype=Kh.prototype={constructor:Dg,count:CP,each:kP,eachAfter:IP,eachBefore:EP,find:MP,sum:TP,sort:PP,path:BP,ancestors:LP,descendants:zP,leaves:RP,links:FP,copy:NP,[Symbol.iterator]:OP};function qP(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function HP(e){return function(){return e}}function ZP(e){return+e}var ax=[0,1];function $c(e){return e}function t2(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:HP(isNaN(t)?NaN:.5)}function jP(e,t){var n;return e>t&&(n=e,e=t,t=n),function(l){return Math.max(e,Math.min(t,l))}}function WP(e,t,n){var l=e[0],m=e[1],g=t[0],P=t[1];return m<l?(l=t2(m,l),g=n(P,g)):(l=t2(l,m),g=n(g,P)),function(u){return g(l(u))}}function YP(e,t,n){var l=Math.min(e.length,t.length)-1,m=new Array(l),g=new Array(l),P=-1;for(e[l]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++P<l;)m[P]=t2(e[P],e[P+1]),g[P]=n(t[P],t[P+1]);return function(u){var Q=wE(e,u,1,l)-1;return g[Q](m[Q](u))}}function $P(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function XP(){var e=ax,t=ax,n=em,l,m,g,P=$c,u,Q,O;function re(){var ce=Math.min(e.length,t.length);return P!==$c&&(P=jP(e[0],e[ce-1])),u=ce>2?YP:WP,Q=O=null,ee}function ee(ce){return ce==null||isNaN(ce=+ce)?g:(Q||(Q=u(e.map(l),t,n)))(l(P(ce)))}return ee.invert=function(ce){return P(m((O||(O=u(t,e.map(l),ql)))(ce)))},ee.domain=function(ce){return arguments.length?(e=Array.from(ce,ZP),re()):e.slice()},ee.range=function(ce){return arguments.length?(t=Array.from(ce),re()):t.slice()},ee.rangeRound=function(ce){return t=Array.from(ce),n=zM,re()},ee.clamp=function(ce){return arguments.length?(P=ce?!0:$c,re()):P!==$c},ee.interpolate=function(ce){return arguments.length?(n=ce,re()):n},ee.unknown=function(ce){return arguments.length?(g=ce,ee):g},function(ce,le){return l=ce,m=le,re()}}function KP(){return XP()($c,$c)}function JP(e,t,n,l){var m=SE(e,t,n),g;switch(l=Bg(l??",f"),l.type){case"s":{var P=Math.max(Math.abs(e),Math.abs(t));return l.precision==null&&!isNaN(g=wP(m,P))&&(l.precision=g),t3(l,P)}case"":case"e":case"g":case"p":case"r":{l.precision==null&&!isNaN(g=bP(m,Math.max(Math.abs(e),Math.abs(t))))&&(l.precision=g-(l.type==="e"));break}case"f":case"%":{l.precision==null&&!isNaN(g=xP(m))&&(l.precision=g-(l.type==="%")*2);break}}return W2(l)}function e7(e){var t=e.domain;return e.ticks=function(n){var l=t();return bE(l[0],l[l.length-1],n??10)},e.tickFormat=function(n,l){var m=t();return JP(m[0],m[m.length-1],n??10,l)},e.nice=function(n){n==null&&(n=10);var l=t(),m=0,g=l.length-1,P=l[m],u=l[g],Q,O,re=10;for(u<P&&(O=P,P=u,u=O,O=m,m=g,g=O);re-- >0;){if(O=Cb(P,u,n),O===Q)return l[m]=P,l[g]=u,t(l);if(O>0)P=Math.floor(P/O)*O,u=Math.ceil(u/O)*O;else if(O<0)P=Math.ceil(P*O)/O,u=Math.floor(u*O)/O;else break;Q=O}return e},e}function i3(){var e=KP();return e.copy=function(){return $P(e,i3())},qP.apply(e,arguments),e7(e)}var W_=new Date,Y_=new Date;function Wu(e,t,n,l){function m(g){return e(g=arguments.length===0?new Date:new Date(+g)),g}return m.floor=function(g){return e(g=new Date(+g)),g},m.ceil=function(g){return e(g=new Date(g-1)),t(g,1),e(g),g},m.round=function(g){var P=m(g),u=m.ceil(g);return g-P<u-g?P:u},m.offset=function(g,P){return t(g=new Date(+g),P==null?1:Math.floor(P)),g},m.range=function(g,P,u){var Q=[],O;if(g=m.ceil(g),u=u==null?1:Math.floor(u),!(g<P)||!(u>0))return Q;do Q.push(O=new Date(+g)),t(g,u),e(g);while(O<g&&g<P);return Q},m.filter=function(g){return Wu(function(P){if(P>=P)for(;e(P),!g(P);)P.setTime(P-1)},function(P,u){if(P>=P)if(u<0)for(;++u<=0;)for(;t(P,-1),!g(P););else for(;--u>=0;)for(;t(P,1),!g(P););})},n&&(m.count=function(g,P){return W_.setTime(+g),Y_.setTime(+P),e(W_),e(Y_),Math.floor(n(W_,Y_))},m.every=function(g){return g=Math.floor(g),!isFinite(g)||!(g>0)?null:g>1?m.filter(l?function(P){return l(P)%g===0}:function(P){return m.count(0,P)%g===0}):m}),m}const t7=1e3,Y2=t7*60,i7=Y2*60,$2=i7*24,n3=$2*7;var X2=Wu(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Y2)/$2,e=>e.getDate()-1);X2.range;function uc(e){return Wu(function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},function(t,n){t.setDate(t.getDate()+n*7)},function(t,n){return(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Y2)/n3})}var r3=uc(0),Lg=uc(1),n7=uc(2),r7=uc(3),h0=uc(4),s7=uc(5),a7=uc(6);r3.range;Lg.range;n7.range;r7.range;h0.range;s7.range;a7.range;var sc=Wu(function(e){e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e,t){return t.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()});sc.every=function(e){return!isFinite(e=Math.floor(e))||!(e>0)?null:Wu(function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,n){t.setFullYear(t.getFullYear()+n*e)})};sc.range;var K2=Wu(function(e){e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t)},function(e,t){return(t-e)/$2},function(e){return e.getUTCDate()-1});K2.range;function hc(e){return Wu(function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCDate(t.getUTCDate()+n*7)},function(t,n){return(n-t)/n3})}var s3=hc(0),zg=hc(1),o7=hc(2),A7=hc(3),c0=hc(4),l7=hc(5),u7=hc(6);s3.range;zg.range;o7.range;A7.range;c0.range;l7.range;u7.range;var ac=Wu(function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)},function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()});ac.every=function(e){return!isFinite(e=Math.floor(e))||!(e>0)?null:Wu(function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)})};ac.range;function $_(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function X_(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Ef(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function h7(e){var t=e.dateTime,n=e.date,l=e.time,m=e.periods,g=e.days,P=e.shortDays,u=e.months,Q=e.shortMonths,O=If(m),re=Mf(m),ee=If(g),ce=Mf(g),le=If(P),je=Mf(P),Je=If(u),Xe=Mf(u),Ke=If(Q),xt=Mf(Q),gt={a:Ft,A:ui,b:Lt,B:Yt,c:null,d:cx,e:cx,f:L7,g:q7,G:Z7,H:P7,I:B7,j:D7,L:a3,m:z7,M:R7,p:oi,q:yi,Q:px,s:gx,S:F7,u:O7,U:N7,V:V7,w:U7,W:G7,x:null,X:null,y:Q7,Y:H7,Z:j7,"%":dx},Mt={a:Pi,A:dn,b:sn,B:Bn,c:null,d:fx,e:fx,f:X7,g:oB,G:lB,H:W7,I:Y7,j:$7,L:A3,m:K7,M:J7,p:fi,q:$i,Q:px,s:gx,S:eB,u:tB,U:iB,V:nB,w:rB,W:sB,x:null,X:null,y:aB,Y:AB,Z:uB,"%":dx},Ct={a:gi,A:qt,b:di,B:mi,c:vt,d:ux,e:ux,f:E7,g:lx,G:Ax,H:hx,I:hx,j:b7,L:k7,m:w7,M:S7,p:xi,q:x7,Q:M7,s:T7,S:C7,u:g7,U:m7,V:_7,w:p7,W:v7,x:Ut,X:rt,y:lx,Y:Ax,Z:y7,"%":I7};gt.x=Te(n,gt),gt.X=Te(l,gt),gt.c=Te(t,gt),Mt.x=Te(n,Mt),Mt.X=Te(l,Mt),Mt.c=Te(t,Mt);function Te(li,Li){return function(Ji){var wi=[],ir=-1,kn=0,vr=li.length,Or,Gi,zn;for(Ji instanceof Date||(Ji=new Date(+Ji));++ir<vr;)li.charCodeAt(ir)===37&&(wi.push(li.slice(kn,ir)),(Gi=ox[Or=li.charAt(++ir)])!=null?Or=li.charAt(++ir):Gi=Or==="e"?" ":"0",(zn=Li[Or])&&(Or=zn(Ji,Gi)),wi.push(Or),kn=ir+1);return wi.push(li.slice(kn,ir)),wi.join("")}}function Ai(li,Li){return function(Ji){var wi=Ef(1900,void 0,1),ir=ii(wi,li,Ji+="",0),kn,vr;if(ir!=Ji.length)return null;if("Q"in wi)return new Date(wi.Q);if("s"in wi)return new Date(wi.s*1e3+("L"in wi?wi.L:0));if(Li&&!("Z"in wi)&&(wi.Z=0),"p"in wi&&(wi.H=wi.H%12+wi.p*12),wi.m===void 0&&(wi.m="q"in wi?wi.q:0),"V"in wi){if(wi.V<1||wi.V>53)return null;"w"in wi||(wi.w=1),"Z"in wi?(kn=X_(Ef(wi.y,0,1)),vr=kn.getUTCDay(),kn=vr>4||vr===0?zg.ceil(kn):zg(kn),kn=K2.offset(kn,(wi.V-1)*7),wi.y=kn.getUTCFullYear(),wi.m=kn.getUTCMonth(),wi.d=kn.getUTCDate()+(wi.w+6)%7):(kn=$_(Ef(wi.y,0,1)),vr=kn.getDay(),kn=vr>4||vr===0?Lg.ceil(kn):Lg(kn),kn=X2.offset(kn,(wi.V-1)*7),wi.y=kn.getFullYear(),wi.m=kn.getMonth(),wi.d=kn.getDate()+(wi.w+6)%7)}else("W"in wi||"U"in wi)&&("w"in wi||(wi.w="u"in wi?wi.u%7:"W"in wi?1:0),vr="Z"in wi?X_(Ef(wi.y,0,1)).getUTCDay():$_(Ef(wi.y,0,1)).getDay(),wi.m=0,wi.d="W"in wi?(wi.w+6)%7+wi.W*7-(vr+5)%7:wi.w+wi.U*7-(vr+6)%7);return"Z"in wi?(wi.H+=wi.Z/100|0,wi.M+=wi.Z%100,X_(wi)):$_(wi)}}function ii(li,Li,Ji,wi){for(var ir=0,kn=Li.length,vr=Ji.length,Or,Gi;ir<kn;){if(wi>=vr)return-1;if(Or=Li.charCodeAt(ir++),Or===37){if(Or=Li.charAt(ir++),Gi=Ct[Or in ox?Li.charAt(ir++):Or],!Gi||(wi=Gi(li,Ji,wi))<0)return-1}else if(Or!=Ji.charCodeAt(wi++))return-1}return wi}function xi(li,Li,Ji){var wi=O.exec(Li.slice(Ji));return wi?(li.p=re.get(wi[0].toLowerCase()),Ji+wi[0].length):-1}function gi(li,Li,Ji){var wi=le.exec(Li.slice(Ji));return wi?(li.w=je.get(wi[0].toLowerCase()),Ji+wi[0].length):-1}function qt(li,Li,Ji){var wi=ee.exec(Li.slice(Ji));return wi?(li.w=ce.get(wi[0].toLowerCase()),Ji+wi[0].length):-1}function di(li,Li,Ji){var wi=Ke.exec(Li.slice(Ji));return wi?(li.m=xt.get(wi[0].toLowerCase()),Ji+wi[0].length):-1}function mi(li,Li,Ji){var wi=Je.exec(Li.slice(Ji));return wi?(li.m=Xe.get(wi[0].toLowerCase()),Ji+wi[0].length):-1}function vt(li,Li,Ji){return ii(li,t,Li,Ji)}function Ut(li,Li,Ji){return ii(li,n,Li,Ji)}function rt(li,Li,Ji){return ii(li,l,Li,Ji)}function Ft(li){return P[li.getDay()]}function ui(li){return g[li.getDay()]}function Lt(li){return Q[li.getMonth()]}function Yt(li){return u[li.getMonth()]}function oi(li){return m[+(li.getHours()>=12)]}function yi(li){return 1+~~(li.getMonth()/3)}function Pi(li){return P[li.getUTCDay()]}function dn(li){return g[li.getUTCDay()]}function sn(li){return Q[li.getUTCMonth()]}function Bn(li){return u[li.getUTCMonth()]}function fi(li){return m[+(li.getUTCHours()>=12)]}function $i(li){return 1+~~(li.getUTCMonth()/3)}return{format:function(li){var Li=Te(li+="",gt);return Li.toString=function(){return li},Li},parse:function(li){var Li=Ai(li+="",!1);return Li.toString=function(){return li},Li},utcFormat:function(li){var Li=Te(li+="",Mt);return Li.toString=function(){return li},Li},utcParse:function(li){var Li=Ai(li+="",!0);return Li.toString=function(){return li},Li}}}var ox={"-":"",_:" ",0:"0"},So=/^\s*\d+/,c7=/^%/,f7=/[\\^$*+?|[\]().{}]/g;function as(e,t,n){var l=e<0?"-":"",m=(l?-e:e)+"",g=m.length;return l+(g<n?new Array(n-g+1).join(t)+m:m)}function d7(e){return e.replace(f7,"\\$&")}function If(e){return new RegExp("^(?:"+e.map(d7).join("|")+")","i")}function Mf(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function p7(e,t,n){var l=So.exec(t.slice(n,n+1));return l?(e.w=+l[0],n+l[0].length):-1}function g7(e,t,n){var l=So.exec(t.slice(n,n+1));return l?(e.u=+l[0],n+l[0].length):-1}function m7(e,t,n){var l=So.exec(t.slice(n,n+2));return l?(e.U=+l[0],n+l[0].length):-1}function _7(e,t,n){var l=So.exec(t.slice(n,n+2));return l?(e.V=+l[0],n+l[0].length):-1}function v7(e,t,n){var l=So.exec(t.slice(n,n+2));return l?(e.W=+l[0],n+l[0].length):-1}function Ax(e,t,n){var l=So.exec(t.slice(n,n+4));return l?(e.y=+l[0],n+l[0].length):-1}function lx(e,t,n){var l=So.exec(t.slice(n,n+2));return l?(e.y=+l[0]+(+l[0]>68?1900:2e3),n+l[0].length):-1}function y7(e,t,n){var l=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return l?(e.Z=l[1]?0:-(l[2]+(l[3]||"00")),n+l[0].length):-1}function x7(e,t,n){var l=So.exec(t.slice(n,n+1));return l?(e.q=l[0]*3-3,n+l[0].length):-1}function w7(e,t,n){var l=So.exec(t.slice(n,n+2));return l?(e.m=l[0]-1,n+l[0].length):-1}function ux(e,t,n){var l=So.exec(t.slice(n,n+2));return l?(e.d=+l[0],n+l[0].length):-1}function b7(e,t,n){var l=So.exec(t.slice(n,n+3));return l?(e.m=0,e.d=+l[0],n+l[0].length):-1}function hx(e,t,n){var l=So.exec(t.slice(n,n+2));return l?(e.H=+l[0],n+l[0].length):-1}function S7(e,t,n){var l=So.exec(t.slice(n,n+2));return l?(e.M=+l[0],n+l[0].length):-1}function C7(e,t,n){var l=So.exec(t.slice(n,n+2));return l?(e.S=+l[0],n+l[0].length):-1}function k7(e,t,n){var l=So.exec(t.slice(n,n+3));return l?(e.L=+l[0],n+l[0].length):-1}function E7(e,t,n){var l=So.exec(t.slice(n,n+6));return l?(e.L=Math.floor(l[0]/1e3),n+l[0].length):-1}function I7(e,t,n){var l=c7.exec(t.slice(n,n+1));return l?n+l[0].length:-1}function M7(e,t,n){var l=So.exec(t.slice(n));return l?(e.Q=+l[0],n+l[0].length):-1}function T7(e,t,n){var l=So.exec(t.slice(n));return l?(e.s=+l[0],n+l[0].length):-1}function cx(e,t){return as(e.getDate(),t,2)}function P7(e,t){return as(e.getHours(),t,2)}function B7(e,t){return as(e.getHours()%12||12,t,2)}function D7(e,t){return as(1+X2.count(sc(e),e),t,3)}function a3(e,t){return as(e.getMilliseconds(),t,3)}function L7(e,t){return a3(e,t)+"000"}function z7(e,t){return as(e.getMonth()+1,t,2)}function R7(e,t){return as(e.getMinutes(),t,2)}function F7(e,t){return as(e.getSeconds(),t,2)}function O7(e){var t=e.getDay();return t===0?7:t}function N7(e,t){return as(r3.count(sc(e)-1,e),t,2)}function o3(e){var t=e.getDay();return t>=4||t===0?h0(e):h0.ceil(e)}function V7(e,t){return e=o3(e),as(h0.count(sc(e),e)+(sc(e).getDay()===4),t,2)}function U7(e){return e.getDay()}function G7(e,t){return as(Lg.count(sc(e)-1,e),t,2)}function Q7(e,t){return as(e.getFullYear()%100,t,2)}function q7(e,t){return e=o3(e),as(e.getFullYear()%100,t,2)}function H7(e,t){return as(e.getFullYear()%1e4,t,4)}function Z7(e,t){var n=e.getDay();return e=n>=4||n===0?h0(e):h0.ceil(e),as(e.getFullYear()%1e4,t,4)}function j7(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+as(t/60|0,"0",2)+as(t%60,"0",2)}function fx(e,t){return as(e.getUTCDate(),t,2)}function W7(e,t){return as(e.getUTCHours(),t,2)}function Y7(e,t){return as(e.getUTCHours()%12||12,t,2)}function $7(e,t){return as(1+K2.count(ac(e),e),t,3)}function A3(e,t){return as(e.getUTCMilliseconds(),t,3)}function X7(e,t){return A3(e,t)+"000"}function K7(e,t){return as(e.getUTCMonth()+1,t,2)}function J7(e,t){return as(e.getUTCMinutes(),t,2)}function eB(e,t){return as(e.getUTCSeconds(),t,2)}function tB(e){var t=e.getUTCDay();return t===0?7:t}function iB(e,t){return as(s3.count(ac(e)-1,e),t,2)}function l3(e){var t=e.getUTCDay();return t>=4||t===0?c0(e):c0.ceil(e)}function nB(e,t){return e=l3(e),as(c0.count(ac(e),e)+(ac(e).getUTCDay()===4),t,2)}function rB(e){return e.getUTCDay()}function sB(e,t){return as(zg.count(ac(e)-1,e),t,2)}function aB(e,t){return as(e.getUTCFullYear()%100,t,2)}function oB(e,t){return e=l3(e),as(e.getUTCFullYear()%100,t,2)}function AB(e,t){return as(e.getUTCFullYear()%1e4,t,4)}function lB(e,t){var n=e.getUTCDay();return e=n>=4||n===0?c0(e):c0.ceil(e),as(e.getUTCFullYear()%1e4,t,4)}function uB(){return"+0000"}function dx(){return"%"}function px(e){return+e}function gx(e){return Math.floor(+e/1e3)}var Zc,u3;hB({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function hB(e){return Zc=h7(e),Zc.format,u3=Zc.parse,Zc.utcFormat,Zc.utcParse,Zc}function jc(e){return function(){return e}}function cB(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function h3(e){this._context=e}h3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function fB(e){return new h3(e)}function dB(e){return e[0]}function pB(e){return e[1]}function i2(e,t){var n=jc(!0),l=null,m=fB,g=null;e=typeof e=="function"?e:e===void 0?dB:jc(e),t=typeof t=="function"?t:t===void 0?pB:jc(t);function P(u){var Q,O=(u=cB(u)).length,re,ee=!1,ce;for(l==null&&(g=m(ce=Jb())),Q=0;Q<=O;++Q)!(Q<O&&n(re=u[Q],Q,u))===ee&&((ee=!ee)?g.lineStart():g.lineEnd()),ee&&g.point(+e(re,Q,u),+t(re,Q,u));if(ce)return g=null,ce+""||null}return P.x=function(u){return arguments.length?(e=typeof u=="function"?u:jc(+u),P):e},P.y=function(u){return arguments.length?(t=typeof u=="function"?u:jc(+u),P):t},P.defined=function(u){return arguments.length?(n=typeof u=="function"?u:jc(!!u),P):n},P.curve=function(u){return arguments.length?(m=u,l!=null&&(g=m(l)),P):m},P.context=function(u){return arguments.length?(u==null?l=g=null:g=m(l=u),P):l},P}function mx(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function c3(e){this._context=e}c3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:mx(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:mx(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function _x(e){return new c3(e)}function f3(e,t){this._context=e,this._t=t}f3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function gB(e){return new f3(e,0)}const Wp=e=>()=>e;function mB(e,{sourceEvent:t,target:n,transform:l,dispatch:m}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:l,enumerable:!0,configurable:!0},_:{value:m}})}function Gu(e,t,n){this.k=e,this.x=t,this.y=n}Gu.prototype={constructor:Gu,scale:function(e){return e===1?this:new Gu(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Gu(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var d3=new Gu(1,0,0);Gu.prototype;function K_(e){e.stopImmediatePropagation()}function Tf(e){e.preventDefault(),e.stopImmediatePropagation()}function _B(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function vB(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function vx(){return this.__zoom||d3}function yB(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function xB(){return navigator.maxTouchPoints||"ontouchstart"in this}function wB(e,t,n){var l=e.invertX(t[0][0])-n[0][0],m=e.invertX(t[1][0])-n[1][0],g=e.invertY(t[0][1])-n[0][1],P=e.invertY(t[1][1])-n[1][1];return e.translate(m>l?(l+m)/2:Math.min(0,l)||Math.max(0,m),P>g?(g+P)/2:Math.min(0,g)||Math.max(0,P))}function bB(){var e=_B,t=vB,n=wB,l=yB,m=xB,g=[0,1/0],P=[[-1/0,-1/0],[1/0,1/0]],u=250,Q=QM,O=Kg("start","zoom","end"),re,ee,ce,le=500,je=150,Je=0,Xe=10;function Ke(vt){vt.property("__zoom",vx).on("wheel.zoom",ii).on("mousedown.zoom",xi).on("dblclick.zoom",gi).filter(m).on("touchstart.zoom",qt).on("touchmove.zoom",di).on("touchend.zoom touchcancel.zoom",mi).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}Ke.transform=function(vt,Ut,rt,Ft){var ui=vt.selection?vt.selection():vt;ui.property("__zoom",vx),vt!==ui?Ct(vt,Ut,rt,Ft):ui.interrupt().each(function(){Te(this,arguments).event(Ft).start().zoom(null,typeof Ut=="function"?Ut.apply(this,arguments):Ut).end()})},Ke.scaleBy=function(vt,Ut,rt,Ft){Ke.scaleTo(vt,function(){var ui=this.__zoom.k,Lt=typeof Ut=="function"?Ut.apply(this,arguments):Ut;return ui*Lt},rt,Ft)},Ke.scaleTo=function(vt,Ut,rt,Ft){Ke.transform(vt,function(){var ui=t.apply(this,arguments),Lt=this.__zoom,Yt=rt==null?Mt(ui):typeof rt=="function"?rt.apply(this,arguments):rt,oi=Lt.invert(Yt),yi=typeof Ut=="function"?Ut.apply(this,arguments):Ut;return n(gt(xt(Lt,yi),Yt,oi),ui,P)},rt,Ft)},Ke.translateBy=function(vt,Ut,rt,Ft){Ke.transform(vt,function(){return n(this.__zoom.translate(typeof Ut=="function"?Ut.apply(this,arguments):Ut,typeof rt=="function"?rt.apply(this,arguments):rt),t.apply(this,arguments),P)},null,Ft)},Ke.translateTo=function(vt,Ut,rt,Ft,ui){Ke.transform(vt,function(){var Lt=t.apply(this,arguments),Yt=this.__zoom,oi=Ft==null?Mt(Lt):typeof Ft=="function"?Ft.apply(this,arguments):Ft;return n(d3.translate(oi[0],oi[1]).scale(Yt.k).translate(typeof Ut=="function"?-Ut.apply(this,arguments):-Ut,typeof rt=="function"?-rt.apply(this,arguments):-rt),Lt,P)},Ft,ui)};function xt(vt,Ut){return Ut=Math.max(g[0],Math.min(g[1],Ut)),Ut===vt.k?vt:new Gu(Ut,vt.x,vt.y)}function gt(vt,Ut,rt){var Ft=Ut[0]-rt[0]*vt.k,ui=Ut[1]-rt[1]*vt.k;return Ft===vt.x&&ui===vt.y?vt:new Gu(vt.k,Ft,ui)}function Mt(vt){return[(+vt[0][0]+ +vt[1][0])/2,(+vt[0][1]+ +vt[1][1])/2]}function Ct(vt,Ut,rt,Ft){vt.on("start.zoom",function(){Te(this,arguments).event(Ft).start()}).on("interrupt.zoom end.zoom",function(){Te(this,arguments).event(Ft).end()}).tween("zoom",function(){var ui=this,Lt=arguments,Yt=Te(ui,Lt).event(Ft),oi=t.apply(ui,Lt),yi=rt==null?Mt(oi):typeof rt=="function"?rt.apply(ui,Lt):rt,Pi=Math.max(oi[1][0]-oi[0][0],oi[1][1]-oi[0][1]),dn=ui.__zoom,sn=typeof Ut=="function"?Ut.apply(ui,Lt):Ut,Bn=Q(dn.invert(yi).concat(Pi/dn.k),sn.invert(yi).concat(Pi/sn.k));return function(fi){if(fi===1)fi=sn;else{var $i=Bn(fi),li=Pi/$i[2];fi=new Gu(li,yi[0]-$i[0]*li,yi[1]-$i[1]*li)}Yt.zoom(null,fi)}})}function Te(vt,Ut,rt){return!rt&&vt.__zooming||new Ai(vt,Ut)}function Ai(vt,Ut){this.that=vt,this.args=Ut,this.active=0,this.sourceEvent=null,this.extent=t.apply(vt,Ut),this.taps=0}Ai.prototype={event:function(vt){return vt&&(this.sourceEvent=vt),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(vt,Ut){return this.mouse&&vt!=="mouse"&&(this.mouse[1]=Ut.invert(this.mouse[0])),this.touch0&&vt!=="touch"&&(this.touch0[1]=Ut.invert(this.touch0[0])),this.touch1&&vt!=="touch"&&(this.touch1[1]=Ut.invert(this.touch1[0])),this.that.__zoom=Ut,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(vt){var Ut=qs(this.that).datum();O.call(vt,this.that,new mB(vt,{sourceEvent:this.sourceEvent,target:Ke,type:vt,transform:this.that.__zoom,dispatch:O}),Ut)}};function ii(vt,...Ut){if(!e.apply(this,arguments))return;var rt=Te(this,Ut).event(vt),Ft=this.__zoom,ui=Math.max(g[0],Math.min(g[1],Ft.k*Math.pow(2,l.apply(this,arguments)))),Lt=Nu(vt);if(rt.wheel)(rt.mouse[0][0]!==Lt[0]||rt.mouse[0][1]!==Lt[1])&&(rt.mouse[1]=Ft.invert(rt.mouse[0]=Lt)),clearTimeout(rt.wheel);else{if(Ft.k===ui)return;rt.mouse=[Lt,Ft.invert(Lt)],i0(this),rt.start()}Tf(vt),rt.wheel=setTimeout(Yt,je),rt.zoom("mouse",n(gt(xt(Ft,ui),rt.mouse[0],rt.mouse[1]),rt.extent,P));function Yt(){rt.wheel=null,rt.end()}}function xi(vt,...Ut){if(ce||!e.apply(this,arguments))return;var rt=Te(this,Ut,!0).event(vt),Ft=qs(vt.view).on("mousemove.zoom",yi,!0).on("mouseup.zoom",Pi,!0),ui=Nu(vt,Lt),Lt=vt.currentTarget,Yt=vt.clientX,oi=vt.clientY;Ob(vt.view),K_(vt),rt.mouse=[ui,this.__zoom.invert(ui)],i0(this),rt.start();function yi(dn){if(Tf(dn),!rt.moved){var sn=dn.clientX-Yt,Bn=dn.clientY-oi;rt.moved=sn*sn+Bn*Bn>Je}rt.event(dn).zoom("mouse",n(gt(rt.that.__zoom,rt.mouse[0]=Nu(dn,Lt),rt.mouse[1]),rt.extent,P))}function Pi(dn){Ft.on("mousemove.zoom mouseup.zoom",null),Nb(dn.view,rt.moved),Tf(dn),rt.event(dn).end()}}function gi(vt,...Ut){if(e.apply(this,arguments)){var rt=this.__zoom,Ft=Nu(vt.changedTouches?vt.changedTouches[0]:vt,this),ui=rt.invert(Ft),Lt=rt.k*(vt.shiftKey?.5:2),Yt=n(gt(xt(rt,Lt),Ft,ui),t.apply(this,Ut),P);Tf(vt),u>0?qs(this).transition().duration(u).call(Ct,Yt,Ft,vt):qs(this).call(Ke.transform,Yt,Ft,vt)}}function qt(vt,...Ut){if(e.apply(this,arguments)){var rt=vt.touches,Ft=rt.length,ui=Te(this,Ut,vt.changedTouches.length===Ft).event(vt),Lt,Yt,oi,yi;for(K_(vt),Yt=0;Yt<Ft;++Yt)oi=rt[Yt],yi=Nu(oi,this),yi=[yi,this.__zoom.invert(yi),oi.identifier],ui.touch0?!ui.touch1&&ui.touch0[2]!==yi[2]&&(ui.touch1=yi,ui.taps=0):(ui.touch0=yi,Lt=!0,ui.taps=1+!!re);re&&(re=clearTimeout(re)),Lt&&(ui.taps<2&&(ee=yi[0],re=setTimeout(function(){re=null},le)),i0(this),ui.start())}}function di(vt,...Ut){if(this.__zooming){var rt=Te(this,Ut).event(vt),Ft=vt.changedTouches,ui=Ft.length,Lt,Yt,oi,yi;for(Tf(vt),Lt=0;Lt<ui;++Lt)Yt=Ft[Lt],oi=Nu(Yt,this),rt.touch0&&rt.touch0[2]===Yt.identifier?rt.touch0[0]=oi:rt.touch1&&rt.touch1[2]===Yt.identifier&&(rt.touch1[0]=oi);if(Yt=rt.that.__zoom,rt.touch1){var Pi=rt.touch0[0],dn=rt.touch0[1],sn=rt.touch1[0],Bn=rt.touch1[1],fi=(fi=sn[0]-Pi[0])*fi+(fi=sn[1]-Pi[1])*fi,$i=($i=Bn[0]-dn[0])*$i+($i=Bn[1]-dn[1])*$i;Yt=xt(Yt,Math.sqrt(fi/$i)),oi=[(Pi[0]+sn[0])/2,(Pi[1]+sn[1])/2],yi=[(dn[0]+Bn[0])/2,(dn[1]+Bn[1])/2]}else if(rt.touch0)oi=rt.touch0[0],yi=rt.touch0[1];else return;rt.zoom("touch",n(gt(Yt,oi,yi),rt.extent,P))}}function mi(vt,...Ut){if(this.__zooming){var rt=Te(this,Ut).event(vt),Ft=vt.changedTouches,ui=Ft.length,Lt,Yt;for(K_(vt),ce&&clearTimeout(ce),ce=setTimeout(function(){ce=null},le),Lt=0;Lt<ui;++Lt)Yt=Ft[Lt],rt.touch0&&rt.touch0[2]===Yt.identifier?delete rt.touch0:rt.touch1&&rt.touch1[2]===Yt.identifier&&delete rt.touch1;if(rt.touch1&&!rt.touch0&&(rt.touch0=rt.touch1,delete rt.touch1),rt.touch0)rt.touch0[1]=this.__zoom.invert(rt.touch0[0]);else if(rt.end(),rt.taps===2&&(Yt=Nu(Yt,this),Math.hypot(ee[0]-Yt[0],ee[1]-Yt[1])<Xe)){var oi=qs(this).on("dblclick.zoom");oi&&oi.apply(this,arguments)}}}return Ke.wheelDelta=function(vt){return arguments.length?(l=typeof vt=="function"?vt:Wp(+vt),Ke):l},Ke.filter=function(vt){return arguments.length?(e=typeof vt=="function"?vt:Wp(!!vt),Ke):e},Ke.touchable=function(vt){return arguments.length?(m=typeof vt=="function"?vt:Wp(!!vt),Ke):m},Ke.extent=function(vt){return arguments.length?(t=typeof vt=="function"?vt:Wp([[+vt[0][0],+vt[0][1]],[+vt[1][0],+vt[1][1]]]),Ke):t},Ke.scaleExtent=function(vt){return arguments.length?(g[0]=+vt[0],g[1]=+vt[1],Ke):[g[0],g[1]]},Ke.translateExtent=function(vt){return arguments.length?(P[0][0]=+vt[0][0],P[1][0]=+vt[1][0],P[0][1]=+vt[0][1],P[1][1]=+vt[1][1],Ke):[[P[0][0],P[0][1]],[P[1][0],P[1][1]]]},Ke.constrain=function(vt){return arguments.length?(n=vt,Ke):n},Ke.duration=function(vt){return arguments.length?(u=+vt,Ke):u},Ke.interpolate=function(vt){return arguments.length?(Q=vt,Ke):Q},Ke.on=function(){var vt=O.on.apply(O,arguments);return vt===O?Ke:vt},Ke.clickDistance=function(vt){return arguments.length?(Je=(vt=+vt)*vt,Ke):Math.sqrt(Je)},Ke.tapDistance=function(vt){return arguments.length?(Xe=+vt,Ke):Xe},Ke}var p3="1.13.6",yx=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||Function("return this")()||{},nm=Array.prototype,J2=Object.prototype,xx=typeof Symbol<"u"?Symbol.prototype:null,SB=nm.push,hd=nm.slice,$f=J2.toString,CB=J2.hasOwnProperty,g3=typeof ArrayBuffer<"u",kB=typeof DataView<"u",EB=Array.isArray,wx=Object.keys,bx=Object.create,Sx=g3&&ArrayBuffer.isView,IB=isNaN,MB=isFinite,m3=!{toString:null}.propertyIsEnumerable("toString"),Cx=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],TB=Math.pow(2,53)-1;function jA(e,t){return t=t==null?e.length-1:+t,function(){for(var n=Math.max(arguments.length-t,0),l=Array(n),m=0;m<n;m++)l[m]=arguments[m+t];switch(t){case 0:return e.call(this,l);case 1:return e.call(this,arguments[0],l);case 2:return e.call(this,arguments[0],arguments[1],l)}var g=Array(t+1);for(m=0;m<t;m++)g[m]=arguments[m];return g[t]=l,e.apply(this,g)}}function cc(e){var t=typeof e;return t==="function"||t==="object"&&!!e}function PB(e){return e===null}function oc(e){return e===void 0}function _3(e){return e===!0||e===!1||$f.call(e)==="[object Boolean]"}function BB(e){return!!(e&&e.nodeType===1)}function nA(e){var t="[object "+e+"]";return function(n){return $f.call(n)===t}}const rm=nA("String"),v3=nA("Number"),DB=nA("Date"),LB=nA("RegExp"),zB=nA("Error"),y3=nA("Symbol"),x3=nA("ArrayBuffer");var w3=nA("Function"),RB=yx.document&&yx.document.childNodes;typeof/./!="function"&&typeof Int8Array!="object"&&typeof RB!="function"&&(w3=function(e){return typeof e=="function"||!1});const tA=w3,b3=nA("Object");var S3=kB&&b3(new DataView(new ArrayBuffer(8))),ev=typeof Map<"u"&&b3(new Map),FB=nA("DataView");function OB(e){return e!=null&&tA(e.getInt8)&&x3(e.buffer)}const Rg=S3?OB:FB,fc=EB||nA("Array");function vh(e,t){return e!=null&&CB.call(e,t)}var n2=nA("Arguments");(function(){n2(arguments)||(n2=function(e){return vh(e,"callee")})})();const tv=n2;function NB(e){return!y3(e)&&MB(e)&&!isNaN(parseFloat(e))}function C3(e){return v3(e)&&IB(e)}function k3(e){return function(){return e}}function E3(e){return function(t){var n=e(t);return typeof n=="number"&&n>=0&&n<=TB}}function I3(e){return function(t){return t==null?void 0:t[e]}}const Fg=I3("byteLength"),VB=E3(Fg);var UB=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;function GB(e){return Sx?Sx(e)&&!Rg(e):VB(e)&&UB.test($f.call(e))}const M3=g3?GB:k3(!1),WA=I3("length");function QB(e){for(var t={},n=e.length,l=0;l<n;++l)t[e[l]]=!0;return{contains:function(m){return t[m]===!0},push:function(m){return t[m]=!0,e.push(m)}}}function T3(e,t){t=QB(t);var n=Cx.length,l=e.constructor,m=tA(l)&&l.prototype||J2,g="constructor";for(vh(e,g)&&!t.contains(g)&&t.push(g);n--;)g=Cx[n],g in e&&e[g]!==m[g]&&!t.contains(g)&&t.push(g)}function Wa(e){if(!cc(e))return[];if(wx)return wx(e);var t=[];for(var n in e)vh(e,n)&&t.push(n);return m3&&T3(e,t),t}function qB(e){if(e==null)return!0;var t=WA(e);return typeof t=="number"&&(fc(e)||rm(e)||tv(e))?t===0:WA(Wa(e))===0}function P3(e,t){var n=Wa(t),l=n.length;if(e==null)return!l;for(var m=Object(e),g=0;g<l;g++){var P=n[g];if(t[P]!==m[P]||!(P in m))return!1}return!0}function fs(e){if(e instanceof fs)return e;if(!(this instanceof fs))return new fs(e);this._wrapped=e}fs.VERSION=p3;fs.prototype.value=function(){return this._wrapped};fs.prototype.valueOf=fs.prototype.toJSON=fs.prototype.value;fs.prototype.toString=function(){return String(this._wrapped)};function kx(e){return new Uint8Array(e.buffer||e,e.byteOffset||0,Fg(e))}var Ex="[object DataView]";function r2(e,t,n,l){if(e===t)return e!==0||1/e===1/t;if(e==null||t==null)return!1;if(e!==e)return t!==t;var m=typeof e;return m!=="function"&&m!=="object"&&typeof t!="object"?!1:B3(e,t,n,l)}function B3(e,t,n,l){e instanceof fs&&(e=e._wrapped),t instanceof fs&&(t=t._wrapped);var m=$f.call(e);if(m!==$f.call(t))return!1;if(S3&&m=="[object Object]"&&Rg(e)){if(!Rg(t))return!1;m=Ex}switch(m){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:+e==0?1/+e===1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return xx.valueOf.call(e)===xx.valueOf.call(t);case"[object ArrayBuffer]":case Ex:return B3(kx(e),kx(t),n,l)}var g=m==="[object Array]";if(!g&&M3(e)){var P=Fg(e);if(P!==Fg(t))return!1;if(e.buffer===t.buffer&&e.byteOffset===t.byteOffset)return!0;g=!0}if(!g){if(typeof e!="object"||typeof t!="object")return!1;var u=e.constructor,Q=t.constructor;if(u!==Q&&!(tA(u)&&u instanceof u&&tA(Q)&&Q instanceof Q)&&"constructor"in e&&"constructor"in t)return!1}n=n||[],l=l||[];for(var O=n.length;O--;)if(n[O]===e)return l[O]===t;if(n.push(e),l.push(t),g){if(O=e.length,O!==t.length)return!1;for(;O--;)if(!r2(e[O],t[O],n,l))return!1}else{var re=Wa(e),ee;if(O=re.length,Wa(t).length!==O)return!1;for(;O--;)if(ee=re[O],!(vh(t,ee)&&r2(e[ee],t[ee],n,l)))return!1}return n.pop(),l.pop(),!0}function HB(e,t){return r2(e,t)}function cd(e){if(!cc(e))return[];var t=[];for(var n in e)t.push(n);return m3&&T3(e,t),t}function iv(e){var t=WA(e);return function(n){if(n==null)return!1;var l=cd(n);if(WA(l))return!1;for(var m=0;m<t;m++)if(!tA(n[e[m]]))return!1;return e!==z3||!tA(n[nv])}}var nv="forEach",D3="has",rv=["clear","delete"],L3=["get",D3,"set"],ZB=rv.concat(nv,L3),z3=rv.concat(L3),jB=["add"].concat(rv,nv,D3);const WB=ev?iv(ZB):nA("Map"),YB=ev?iv(z3):nA("WeakMap"),$B=ev?iv(jB):nA("Set"),XB=nA("WeakSet");function dc(e){for(var t=Wa(e),n=t.length,l=Array(n),m=0;m<n;m++)l[m]=e[t[m]];return l}function KB(e){for(var t=Wa(e),n=t.length,l=Array(n),m=0;m<n;m++)l[m]=[t[m],e[t[m]]];return l}function R3(e){for(var t={},n=Wa(e),l=0,m=n.length;l<m;l++)t[e[n[l]]]=n[l];return t}function s2(e){var t=[];for(var n in e)tA(e[n])&&t.push(n);return t.sort()}function sv(e,t){return function(n){var l=arguments.length;if(t&&(n=Object(n)),l<2||n==null)return n;for(var m=1;m<l;m++)for(var g=arguments[m],P=e(g),u=P.length,Q=0;Q<u;Q++){var O=P[Q];(!t||n[O]===void 0)&&(n[O]=g[O])}return n}}const Xl=sv(cd),Xf=sv(Wa),av=sv(cd,!0);function JB(){return function(){}}function F3(e){if(!cc(e))return{};if(bx)return bx(e);var t=JB();t.prototype=e;var n=new t;return t.prototype=null,n}function eD(e,t){var n=F3(e);return t&&Xf(n,t),n}function O3(e){return cc(e)?fc(e)?e.slice():Xl({},e):e}function tD(e,t){return t(e),e}function N3(e){return fc(e)?e:[e]}fs.toPath=N3;function fd(e){return fs.toPath(e)}function ov(e,t){for(var n=t.length,l=0;l<n;l++){if(e==null)return;e=e[t[l]]}return n?e:void 0}function V3(e,t,n){var l=ov(e,fd(t));return oc(l)?n:l}function sm(e,t){t=fd(t);for(var n=t.length,l=0;l<n;l++){var m=t[l];if(!vh(e,m))return!1;e=e[m]}return!!n}function Av(e){return e}function Kf(e){return e=Xf({},e),function(t){return P3(t,e)}}function lv(e){return e=fd(e),function(t){return ov(t,e)}}function dd(e,t,n){if(t===void 0)return e;switch(n??3){case 1:return function(l){return e.call(t,l)};case 3:return function(l,m,g){return e.call(t,l,m,g)};case 4:return function(l,m,g,P){return e.call(t,l,m,g,P)}}return function(){return e.apply(t,arguments)}}function U3(e,t,n){return e==null?Av:tA(e)?dd(e,t,n):cc(e)&&!fc(e)?Kf(e):lv(e)}function uv(e,t){return U3(e,t,1/0)}fs.iteratee=uv;function $A(e,t,n){return fs.iteratee!==uv?fs.iteratee(e,t):U3(e,t,n)}function G3(e,t,n){t=$A(t,n);for(var l=Wa(e),m=l.length,g={},P=0;P<m;P++){var u=l[P];g[u]=t(e[u],u,e)}return g}function Q3(){}function iD(e){return e==null?Q3:function(t){return V3(e,t)}}function nD(e,t,n){var l=Array(Math.max(0,e));t=dd(t,n,1);for(var m=0;m<e;m++)l[m]=t(m);return l}function a2(e,t){return t==null&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))}const Jf=Date.now||function(){return new Date().getTime()};function q3(e){var t=function(g){return e[g]},n="(?:"+Wa(e).join("|")+")",l=RegExp(n),m=RegExp(n,"g");return function(g){return g=g==null?"":""+g,l.test(g)?g.replace(m,t):g}}const H3={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},rD=q3(H3),sD=R3(H3),aD=q3(sD),oD=fs.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var J_=/(.)^/,AD={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},lD=/\\|'|\r|\n|\u2028|\u2029/g;function uD(e){return"\\"+AD[e]}var hD=/^\s*(\w|\$)+\s*$/;function cD(e,t,n){!t&&n&&(t=n),t=av({},t,fs.templateSettings);var l=RegExp([(t.escape||J_).source,(t.interpolate||J_).source,(t.evaluate||J_).source].join("|")+"|$","g"),m=0,g="__p+='";e.replace(l,function(O,re,ee,ce,le){return g+=e.slice(m,le).replace(lD,uD),m=le+O.length,re?g+=`'+
((__t=(`+re+`))==null?'':_.escape(__t))+
'`:ee?g+=`'+
((__t=(`+ee+`))==null?'':__t)+
'`:ce&&(g+=`';
`+ce+`
__p+='`),O}),g+=`';
`;var P=t.variable;if(P){if(!hD.test(P))throw new Error("variable is not a bare identifier: "+P)}else g=`with(obj||{}){
`+g+`}
`,P="obj";g=`var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};
`+g+`return __p;
`;var u;try{u=new Function(P,"_",g)}catch(O){throw O.source=g,O}var Q=function(O){return u.call(this,O,fs)};return Q.source="function("+P+`){
`+g+"}",Q}function fD(e,t,n){t=fd(t);var l=t.length;if(!l)return tA(n)?n.call(e):n;for(var m=0;m<l;m++){var g=e==null?void 0:e[t[m]];g===void 0&&(g=n,m=l),e=tA(g)?g.call(e):g}return e}var dD=0;function pD(e){var t=++dD+"";return e?e+t:t}function gD(e){var t=fs(e);return t._chain=!0,t}function Z3(e,t,n,l,m){if(!(l instanceof t))return e.apply(n,m);var g=F3(e.prototype),P=e.apply(g,m);return cc(P)?P:g}var gu=jA(function(e,t){var n=gu.placeholder,l=function(){for(var m=0,g=t.length,P=Array(g),u=0;u<g;u++)P[u]=t[u]===n?arguments[m++]:t[u];for(;m<arguments.length;)P.push(arguments[m++]);return Z3(e,l,this,this,P)};return l});gu.placeholder=fs;const j3=jA(function(e,t,n){if(!tA(e))throw new TypeError("Bind must be called on a function");var l=jA(function(m){return Z3(e,l,t,this,n.concat(m))});return l}),cl=E3(WA);function pc(e,t,n,l){if(l=l||[],!t&&t!==0)t=1/0;else if(t<=0)return l.concat(e);for(var m=l.length,g=0,P=WA(e);g<P;g++){var u=e[g];if(cl(u)&&(fc(u)||tv(u)))if(t>1)pc(u,t-1,n,l),m=l.length;else for(var Q=0,O=u.length;Q<O;)l[m++]=u[Q++];else n||(l[m++]=u)}return l}const mD=jA(function(e,t){t=pc(t,!1,!1);var n=t.length;if(n<1)throw new Error("bindAll must be passed function names");for(;n--;){var l=t[n];e[l]=j3(e[l],e)}return e});function _D(e,t){var n=function(l){var m=n.cache,g=""+(t?t.apply(this,arguments):l);return vh(m,g)||(m[g]=e.apply(this,arguments)),m[g]};return n.cache={},n}const W3=jA(function(e,t,n){return setTimeout(function(){return e.apply(null,n)},t)}),vD=gu(W3,fs,1);function yD(e,t,n){var l,m,g,P,u=0;n||(n={});var Q=function(){u=n.leading===!1?0:Jf(),l=null,P=e.apply(m,g),l||(m=g=null)},O=function(){var re=Jf();!u&&n.leading===!1&&(u=re);var ee=t-(re-u);return m=this,g=arguments,ee<=0||ee>t?(l&&(clearTimeout(l),l=null),u=re,P=e.apply(m,g),l||(m=g=null)):!l&&n.trailing!==!1&&(l=setTimeout(Q,ee)),P};return O.cancel=function(){clearTimeout(l),u=0,l=m=g=null},O}function xD(e,t,n){var l,m,g,P,u,Q=function(){var re=Jf()-m;t>re?l=setTimeout(Q,t-re):(l=null,n||(P=e.apply(u,g)),l||(g=u=null))},O=jA(function(re){return u=this,g=re,m=Jf(),l||(l=setTimeout(Q,t),n&&(P=e.apply(u,g))),P});return O.cancel=function(){clearTimeout(l),l=g=u=null},O}function wD(e,t){return gu(t,e)}function hv(e){return function(){return!e.apply(this,arguments)}}function bD(){var e=arguments,t=e.length-1;return function(){for(var n=t,l=e[t].apply(this,arguments);n--;)l=e[n].call(this,l);return l}}function SD(e,t){return function(){if(--e<1)return t.apply(this,arguments)}}function Y3(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=null),n}}const CD=gu(Y3,2);function $3(e,t,n){t=$A(t,n);for(var l=Wa(e),m,g=0,P=l.length;g<P;g++)if(m=l[g],t(e[m],m,e))return m}function X3(e){return function(t,n,l){n=$A(n,l);for(var m=WA(t),g=e>0?0:m-1;g>=0&&g<m;g+=e)if(n(t[g],g,t))return g;return-1}}const cv=X3(1),K3=X3(-1);function J3(e,t,n,l){n=$A(n,l,1);for(var m=n(t),g=0,P=WA(e);g<P;){var u=Math.floor((g+P)/2);n(e[u])<m?g=u+1:P=u}return g}function e4(e,t,n){return function(l,m,g){var P=0,u=WA(l);if(typeof g=="number")e>0?P=g>=0?g:Math.max(g+u,P):u=g>=0?Math.min(g+1,u):g+u+1;else if(n&&g&&u)return g=n(l,m),l[g]===m?g:-1;if(m!==m)return g=t(hd.call(l,P,u),C3),g>=0?g+P:-1;for(g=e>0?P:u-1;g>=0&&g<u;g+=e)if(l[g]===m)return g;return-1}}const t4=e4(1,cv,J3),kD=e4(-1,K3);function o2(e,t,n){var l=cl(e)?cv:$3,m=l(e,t,n);if(m!==void 0&&m!==-1)return e[m]}function ED(e,t){return o2(e,Kf(t))}function YA(e,t,n){t=dd(t,n);var l,m;if(cl(e))for(l=0,m=e.length;l<m;l++)t(e[l],l,e);else{var g=Wa(e);for(l=0,m=g.length;l<m;l++)t(e[g[l]],g[l],e)}return e}function wA(e,t,n){t=$A(t,n);for(var l=!cl(e)&&Wa(e),m=(l||e).length,g=Array(m),P=0;P<m;P++){var u=l?l[P]:P;g[P]=t(e[u],u,e)}return g}function i4(e){var t=function(n,l,m,g){var P=!cl(n)&&Wa(n),u=(P||n).length,Q=e>0?0:u-1;for(g||(m=n[P?P[Q]:Q],Q+=e);Q>=0&&Q<u;Q+=e){var O=P?P[Q]:Q;m=l(m,n[O],O,n)}return m};return function(n,l,m,g){var P=arguments.length>=3;return t(n,dd(l,g,4),m,P)}}const e1=i4(1),Ix=i4(-1);function ll(e,t,n){var l=[];return t=$A(t,n),YA(e,function(m,g,P){t(m,g,P)&&l.push(m)}),l}function n4(e,t,n){return ll(e,hv($A(t)),n)}function A2(e,t,n){t=$A(t,n);for(var l=!cl(e)&&Wa(e),m=(l||e).length,g=0;g<m;g++){var P=l?l[g]:g;if(!t(e[P],P,e))return!1}return!0}function Og(e,t,n){t=$A(t,n);for(var l=!cl(e)&&Wa(e),m=(l||e).length,g=0;g<m;g++){var P=l?l[g]:g;if(t(e[P],P,e))return!0}return!1}function pu(e,t,n,l){return cl(e)||(e=dc(e)),(typeof n!="number"||l)&&(n=0),t4(e,t,n)>=0}const ID=jA(function(e,t,n){var l,m;return tA(t)?m=t:(t=fd(t),l=t.slice(0,-1),t=t[t.length-1]),wA(e,function(g){var P=m;if(!P){if(l&&l.length&&(g=ov(g,l)),g==null)return;P=g[t]}return P==null?P:P.apply(g,n)})});function am(e,t){return wA(e,lv(t))}function MD(e,t){return ll(e,Kf(t))}function fv(e,t,n){var l=-1/0,m=-1/0,g,P;if(t==null||typeof t=="number"&&typeof e[0]!="object"&&e!=null){e=cl(e)?e:dc(e);for(var u=0,Q=e.length;u<Q;u++)g=e[u],g!=null&&g>l&&(l=g)}else t=$A(t,n),YA(e,function(O,re,ee){P=t(O,re,ee),(P>m||P===-1/0&&l===-1/0)&&(l=O,m=P)});return l}function r4(e,t,n){var l=1/0,m=1/0,g,P;if(t==null||typeof t=="number"&&typeof e[0]!="object"&&e!=null){e=cl(e)?e:dc(e);for(var u=0,Q=e.length;u<Q;u++)g=e[u],g!=null&&g<l&&(l=g)}else t=$A(t,n),YA(e,function(O,re,ee){P=t(O,re,ee),(P<m||P===1/0&&l===1/0)&&(l=O,m=P)});return l}var TD=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function s4(e){return e?fc(e)?hd.call(e):rm(e)?e.match(TD):cl(e)?wA(e,Av):dc(e):[]}function a4(e,t,n){if(t==null||n)return cl(e)||(e=dc(e)),e[a2(e.length-1)];var l=s4(e),m=WA(l);t=Math.max(Math.min(t,m),0);for(var g=m-1,P=0;P<t;P++){var u=a2(P,g),Q=l[P];l[P]=l[u],l[u]=Q}return l.slice(0,t)}function PD(e){return a4(e,1/0)}function o4(e,t,n){var l=0;return t=$A(t,n),am(wA(e,function(m,g,P){return{value:m,index:l++,criteria:t(m,g,P)}}).sort(function(m,g){var P=m.criteria,u=g.criteria;if(P!==u){if(P>u||P===void 0)return 1;if(P<u||u===void 0)return-1}return m.index-g.index}),"value")}function om(e,t){return function(n,l,m){var g=t?[[],[]]:{};return l=$A(l,m),YA(n,function(P,u){var Q=l(P,u,n);e(g,P,Q)}),g}}const BD=om(function(e,t,n){vh(e,n)?e[n].push(t):e[n]=[t]}),DD=om(function(e,t,n){e[n]=t}),LD=om(function(e,t,n){vh(e,n)?e[n]++:e[n]=1}),zD=om(function(e,t,n){e[n?0:1].push(t)},!0);function RD(e){return e==null?0:cl(e)?e.length:Wa(e).length}function FD(e,t,n){return t in n}const dv=jA(function(e,t){var n={},l=t[0];if(e==null)return n;tA(l)?(t.length>1&&(l=dd(l,t[1])),t=cd(e)):(l=FD,t=pc(t,!1,!1),e=Object(e));for(var m=0,g=t.length;m<g;m++){var P=t[m],u=e[P];l(u,P,e)&&(n[P]=u)}return n}),OD=jA(function(e,t){var n=t[0],l;return tA(n)?(n=hv(n),t.length>1&&(l=t[1])):(t=wA(pc(t,!1,!1),String),n=function(m,g){return!pu(t,g)}),dv(e,n,l)});function A4(e,t,n){return hd.call(e,0,Math.max(0,e.length-(t==null||n?1:t)))}function t1(e,t,n){return e==null||e.length<1?t==null||n?void 0:[]:t==null||n?e[0]:A4(e,e.length-t)}function Jh(e,t,n){return hd.call(e,t==null||n?1:t)}function ND(e,t,n){return e==null||e.length<1?t==null||n?void 0:[]:t==null||n?e[e.length-1]:Jh(e,Math.max(0,e.length-t))}function l4(e){return ll(e,Boolean)}function VD(e,t){return pc(e,t,!1)}const u4=jA(function(e,t){return t=pc(t,!0,!0),ll(e,function(n){return!pu(t,n)})}),UD=jA(function(e,t){return u4(e,t)});function l2(e,t,n,l){_3(t)||(l=n,n=t,t=!1),n!=null&&(n=$A(n,l));for(var m=[],g=[],P=0,u=WA(e);P<u;P++){var Q=e[P],O=n?n(Q,P,e):Q;t&&!n?((!P||g!==O)&&m.push(Q),g=O):n?pu(g,O)||(g.push(O),m.push(Q)):pu(m,Q)||m.push(Q)}return m}const h4=jA(function(e){return l2(pc(e,!0,!0))});function c4(e){for(var t=[],n=arguments.length,l=0,m=WA(e);l<m;l++){var g=e[l];if(!pu(t,g)){var P;for(P=1;P<n&&pu(arguments[P],g);P++);P===n&&t.push(g)}}return t}function u2(e){for(var t=e&&fv(e,WA).length||0,n=Array(t),l=0;l<t;l++)n[l]=am(e,l);return n}const GD=jA(u2);function rg(e,t){for(var n={},l=0,m=WA(e);l<m;l++)t?n[e[l]]=t[l]:n[e[l][0]]=e[l][1];return n}function QD(e,t,n){t==null&&(t=e||0,e=0),n||(n=t<e?-1:1);for(var l=Math.max(Math.ceil((t-e)/n),0),m=Array(l),g=0;g<l;g++,e+=n)m[g]=e;return m}function qD(e,t){if(t==null||t<1)return[];for(var n=[],l=0,m=e.length;l<m;)n.push(hd.call(e,l,l+=t));return n}function pv(e,t){return e._chain?fs(t).chain():t}function f4(e){return YA(s2(e),function(t){var n=fs[t]=e[t];fs.prototype[t]=function(){var l=[this._wrapped];return SB.apply(l,arguments),pv(this,n.apply(fs,l))}}),fs}YA(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=nm[e];fs.prototype[e]=function(){var n=this._wrapped;return n!=null&&(t.apply(n,arguments),(e==="shift"||e==="splice")&&n.length===0&&delete n[0]),pv(this,n)}});YA(["concat","join","slice"],function(e){var t=nm[e];fs.prototype[e]=function(){var n=this._wrapped;return n!=null&&(n=t.apply(n,arguments)),pv(this,n)}});const HD=Object.freeze(Object.defineProperty({__proto__:null,VERSION:p3,after:SD,all:A2,allKeys:cd,any:Og,assign:Xf,before:Y3,bind:j3,bindAll:mD,chain:gD,chunk:qD,clone:O3,collect:wA,compact:l4,compose:bD,constant:k3,contains:pu,countBy:LD,create:eD,debounce:xD,default:fs,defaults:av,defer:vD,delay:W3,detect:o2,difference:u4,drop:Jh,each:YA,escape:rD,every:A2,extend:Xl,extendOwn:Xf,filter:ll,find:o2,findIndex:cv,findKey:$3,findLastIndex:K3,findWhere:ED,first:t1,flatten:VD,foldl:e1,foldr:Ix,forEach:YA,functions:s2,get:V3,groupBy:BD,has:sm,head:t1,identity:Av,include:pu,includes:pu,indexBy:DD,indexOf:t4,initial:A4,inject:e1,intersection:c4,invert:R3,invoke:ID,isArguments:tv,isArray:fc,isArrayBuffer:x3,isBoolean:_3,isDataView:Rg,isDate:DB,isElement:BB,isEmpty:qB,isEqual:HB,isError:zB,isFinite:NB,isFunction:tA,isMap:WB,isMatch:P3,isNaN:C3,isNull:PB,isNumber:v3,isObject:cc,isRegExp:LB,isSet:$B,isString:rm,isSymbol:y3,isTypedArray:M3,isUndefined:oc,isWeakMap:YB,isWeakSet:XB,iteratee:uv,keys:Wa,last:ND,lastIndexOf:kD,map:wA,mapObject:G3,matcher:Kf,matches:Kf,max:fv,memoize:_D,methods:s2,min:r4,mixin:f4,negate:hv,noop:Q3,now:Jf,object:rg,omit:OD,once:CD,pairs:KB,partial:gu,partition:zD,pick:dv,pluck:am,property:lv,propertyOf:iD,random:a2,range:QD,reduce:e1,reduceRight:Ix,reject:n4,rest:Jh,restArguments:jA,result:fD,sample:a4,select:ll,shuffle:PD,size:RD,some:Og,sortBy:o4,sortedIndex:J3,tail:Jh,take:t1,tap:tD,template:cD,templateSettings:oD,throttle:yD,times:nD,toArray:s4,toPath:N3,transpose:u2,unescape:aD,union:h4,uniq:l2,unique:l2,uniqueId:pD,unzip:u2,values:dc,where:MD,without:UD,wrap:wD,zip:GD},Symbol.toStringTag,{value:"Module"}));var Mx=f4(HD);Mx._=Mx;var ZD=function(e,t){var n;return parseString(e,function(l,m){n=m["nex:nexml"].trees[0].tree.map(function(g){var P=g.node.map(ee=>ee.$),u=P.reduce(function(ee,ce){return ce.edges=[],ce.name=ce.id,ee[ce.id]=ce,ee},{}),Q=P.filter(ee=>ee.root),O=Q>0?Q[0].id:P[0].id;u[O].name="root",g.edge.map(ee=>ee.$).forEach(function(ee){u[ee.source].edges.push(ee)});function re(ee,ce){if(ee.edges){var le=am(ee.edges,"target");ee.children=dc(dv(u,le)),ee.children.forEach(function(je,Je){je.attribute=ee.edges[Je].length||""}),ee.children.forEach(re),ee.annotation=""}}return re(u[O]),u[O]})}),n};function jD(e,t,n,l){let m=this.nodes.descendants();if(e.parent&&m.indexOf(e)>=0){let P=e.parent.children.indexOf(e),u={name:n,parent:e.parent,attribute:l?l[2]:null,original_child_order:e.original_child_order},Q={name:t,parent:u,attribute:l?l[1]:null,original_child_order:2};u.children=[e,Q],e.parent.children[P]=u,e.parent=u,e.attribute=l?l[0]:null,e.original_child_order=1}return this}function WD(e,t){return e.children?e.children.push(t):e.children=[t],e}function YD(e,t){return{data:{name:e,attribute:t?t[1]:null},parent:""}}function $D(e){let t=this.nodes.descendants();if(typeof e!="number")return this.deleteANode(t.indexOf(e));if(e>0&&e<t.length){let n=t[e];if(n.parent){let l=n.parent.children.indexOf(n);l>=0&&(t.splice(e,1),n.children&&n.children.forEach(function(m){m.original_child_order=n.parent.children.length,n.parent.children.push(m),m.parent=n.parent}),n.parent.children.length>2?n.parent.children.splice(l,1):n.parent.parent?(n.parent.parent.children[n.parent.parent.children.indexOf(n.parent)]=n.parent.children[1-l],n.parent.children[1-l].parent=n.parent.parent,t.splice(t.indexOf(n.parent),1)):(t.splice(0,1),t.parent=null,delete t.data.attribute,delete t.data.annotation,delete t.data.original_child_order,t.name="root",t.data.name="root"))}}return this}function XD(){return ll(this.nodes.descendants(),e=>!sm(e,"children"))}function KD(){return ll(this.nodes.descendants(),e=>sm(e,"children"))}function JD(){return this.nodes}function e9(){return this.nodes}function t9(e){return ll(this.nodes.descendants(),t=>t.data.name==e)[0]}function i9(e){YA(this.nodes.descendants(),function(t){t.data&&t.data.name in e&&(t.annotations=e[t.data.name])})}function ia(e){return!sm(e,"children")}function n9(e,t){return this.nodes.each(function(n){e in n&&(t&&(n[t]=n[e]),delete n[e])}),this}function r9(e){e||this.nodes.each(t=>{ia(t)||(t[this.selection_attribute_name]=!1,t.data.traits||(t.data.traits={}),t.data.traits[this.selection_attribute_name]=t[this.selection_attribute_name])})}function d4(e,t,n){let l=[];function m(g){ia(g)?t&&g!=e&&l.push(g):(n&&g!=e&&l.push(g),g.children.forEach(m))}return m(e),l}const s9=Object.freeze(Object.defineProperty({__proto__:null,addChild:WD,assignAttributes:i9,clearInternalNodes:r9,createNode:YD,deleteANode:$D,getInternals:KD,getNodeByName:t9,getNodes:e9,getRootNode:JD,getTips:XD,graftANode:jD,isLeafNode:ia,selectAllDescendants:d4,updateKeyName:n9},Symbol.toStringTag,{value:"Module"}));function ed(e,t={}){const n=/^-?\d+(\.\d+)?$/;let l=t.left_delimiter||"{",m=t.right_delimiter||"}",g=[];function P(){let gt={name:null},Mt=g[g.length-1];"children"in Mt||(Mt.children=[]),g.push(gt),Mt.children.push(g[g.length-1]),g[g.length-1].original_child_order=Mt.children.length}function u(){let gt=g.pop();gt.name=re,"children"in gt?gt.bootstrap_values=re:gt.name=re,gt.attribute=ee,l=="["&&ce.includes("&&NHX")?ce.split(":").slice(1).forEach(Mt=>{const[Ct,Te]=Mt.split("=");gt[Ct]=n.test(Te)?+Te:Te}):gt.annotation=ce,re="",ee="",ce=""}function Q(gt){return{json:null,error:"Unexpected '"+e[gt]+"' in '"+e.substring(gt-20,gt+1)+"[ERROR HERE]"+e.substring(gt+1,gt+20)+"'"}}let O=0,re="",ee="",ce="",le=null,je={"'":1,'"':1},Je={name:"root"};g.push(Je);for(var Xe=/\s/,Ke=0;Ke<e.length;Ke++)try{var xt=e[Ke];switch(O){case 0:{xt=="("&&(P(),O=1);break}case 1:case 3:{if(xt==":")O=3;else if(xt==","||xt==")")try{u(),O=1,xt==","&&P()}catch{return Q(Ke)}else if(xt=="("){if(re.length>0)return Q(Ke);P()}else if(xt in je){if(O==1&&re.length===0&&ee.length===0&&ce.length===0){O=2,le=xt;continue}return Q(Ke)}else if(xt==l){if(ce.length)return Q(Ke);O=4}else if(O==3)ee+=xt;else{if(Xe.test(xt))continue;if(xt==";"){Ke=e.length;break}re+=xt}break}case 2:{if(xt==le){if(Ke<e.length-1&&e[Ke+1]==le){Ke++,re+=le;continue}le=0,O=1;continue}else re+=xt;break}case 4:{if(xt==m)O=3;else{if(xt==l)return Q(Ke);ce+=xt}break}}}catch{return Q(Ke)}return g.length!=1?Q(e.length-1):{json:Je,error:null}}function a9(e,t){let n=this;e||(e=g=>"");function l(g){if(g.notshown)return;if(ia(g)||(m.push("("),g.children.forEach(function(u,Q){Q&&m.push(","),l(u)}),m.push(")")),g.data.name!=="root"){const u=g.data.name.replaceAll("'","''");/\W/.test(u)?m.push("'"+u+"'"):m.push(u)}m.push(e(g));let P=n.branch_length_accessor(g);P!==void 0&&m.push(":"+P)}let m=[];return e=e||"",l(t||this.nodes),m.join("")+";"}function o9(e){let t=e,n=t.toUpperCase().indexOf("BEGIN DATA;"),l=t.slice(n);if(l.length<2)return"";n=l.toUpperCase().indexOf("END;");let m=l.slice(0,n);l=wA(m.split(";"),Q=>Q.trim());let g=ll(l,Q=>Q.toUpperCase().startsWith("DIMENSION"));g=g[0].split(" "),g=rg(wA(Jh(g),Q=>Q.split("=")));let P=ll(l,Q=>Q.toUpperCase().startsWith("FORMAT"));P=P[0].split(" "),P=rg(wA(Jh(P),Q=>Q.split("="))),P.symbols=n4(P.symbols.split(""),Q=>Q=='"');let u=ll(l,Q=>Q.toUpperCase().startsWith("MATRIX"));return u=u[0].split(`
`),u=rg(wA(Jh(u),Q=>l4(Q.split(" ")))),u=G3(u,(Q,O)=>Q=="?"?P.symbols:Array(Q)),{dimensions:g,format:P,matrix:u}}function A9(e,t,n){YA(e.getTips(),l=>{l.data.test=n.matrix[l.data.name]})}function p4(e){let t=e,n=t.toUpperCase().indexOf("BEGIN TREES;"),l=t.slice(n);if(l.length<2)return"";n=l.toUpperCase().indexOf("END;");let g=l.slice(0,n).split(`
`);return g=ll(g,P=>P.trim().toUpperCase().startsWith("TREE")),ed(g[0])}const l9=Object.freeze(Object.defineProperty({__proto__:null,default:p4,loadAnnotations:A9,parseAnnotations:o9},Symbol.toStringTag,{value:"Module"}));function h2(e){var t={};if(e.nodeType==1){if(e.attributes.length>0){t["@attributes"]={};for(var n=0;n<e.attributes.length;n++){var l=e.attributes.item(n);t["@attributes"][l.nodeName]=l.nodeValue}}}else e.nodeType==3&&(t=e.nodeValue);if(e.hasChildNodes()&&e.childNodes.length===1&&e.childNodes[0].nodeType===3)t=e.childNodes[0].nodeValue;else if(e.hasChildNodes())for(var m=0;m<e.childNodes.length;m++){var g=e.childNodes.item(m),P=g.nodeName;if(typeof t[P]>"u")t[P]=h2(g);else{if(typeof t[P].push>"u"){var u=t[P];t[P]=[],t[P].push(u)}t[P].push(h2(g))}}return t}var g4=function(e,t){function n(m,g){m.clade&&(m.clade.forEach(n),m.children=m.clade,delete m.clade),m.annotation=1,m.attribute="0.01",m.branch_length&&(m.attribute=m.branch_length),m.taxonomy&&(m.name=m.taxonomy.scientific_name),m.annotation=""}var l;return e=h2(e),l=e.phyloxml.phylogeny.clade,l.name="root",n(l),{json:l,error:null}};function u9(e,t){t.left_delimiter="[",t.right_delimiter="]";const n=ed(e,t);function l(m){if(m.annotation){m.beast={};const P=m.annotation.split(/=|,|{|}/).filter(u=>u);for(var g=0;g<P.length;g+=2){let u=P[g].replace(/&|%/g,"");/[a-df-zA-DF-Z]+/.test(P[g+2])?m.beast[u]=+P[g+1]:(m.beast[u]=[+P[g+1],+P[g+2]],g++)}}m.annotation=void 0,m.children&&m.children.forEach(l)}return l(n.json),n}var i1={nexml:ZD,phyloxml:g4,nexus:p4,nwk:ed,nhx:ed,beast:u9};function h9(){let t=this.getTips(),n=wA(t,l=>({name:l.data.name,length:parseFloat(l.data.attribute)}));return n=o4(n,l=>-l.length),n}function c9(e,t){function n(m,g){if(g.mp=[[0,0],[!1,!1]],ia(g))g.mp[1][0]=g.mp[1][1]=g[m]||!1,g.mp[0][0]=g.mp[1][0]?1:0,g.mp[0][1]=1-g.mp[0][0];else{g.children.forEach(l);var P=g.children.reduce(function(Q,O){return O.mp[0][0]+Q},0),u=g.children.reduce(function(Q,O){return O.mp[0][1]+Q},0);g[m]?(g.mp[0][0]=u+1,g.mp[1][0]=!0,g.mp[0][1]=u,g.mp[1][1]=!0):(P<u+1?(g.mp[0][0]=P,g.mp[1][0]=!1):(g.mp[0][0]=u+1,g.mp[1][0]=!0),u<P+1?(g.mp[0][1]=u,g.mp[1][1]=!0):(g.mp[0][1]=P+1,g.mp[1][1]=!1))}}const l=gu(n,t);l(this.nodes),this.nodes.each(m=>{m.parent?m.mp=m.mp[1][m.parent.mp?1:0]:m.mp=m.mp[1][m.mp[0][0]<m.mp[0][1]?0:1]}),this.display.modifySelection((m,g)=>ia(m.target)?m.target[t]:m.target.mp)}var Ng={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */Ng.exports;(function(e,t){(function(){var n,l="4.17.21",m=200,g="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",P="Expected a function",u="Invalid `variable` option passed into `_.template`",Q="__lodash_hash_undefined__",O=500,re="__lodash_placeholder__",ee=1,ce=2,le=4,je=1,Je=2,Xe=1,Ke=2,xt=4,gt=8,Mt=16,Ct=32,Te=64,Ai=128,ii=256,xi=512,gi=30,qt="...",di=800,mi=16,vt=1,Ut=2,rt=3,Ft=1/0,ui=9007199254740991,Lt=17976931348623157e292,Yt=NaN,oi=4294967295,yi=oi-1,Pi=oi>>>1,dn=[["ary",Ai],["bind",Xe],["bindKey",Ke],["curry",gt],["curryRight",Mt],["flip",xi],["partial",Ct],["partialRight",Te],["rearg",ii]],sn="[object Arguments]",Bn="[object Array]",fi="[object AsyncFunction]",$i="[object Boolean]",li="[object Date]",Li="[object DOMException]",Ji="[object Error]",wi="[object Function]",ir="[object GeneratorFunction]",kn="[object Map]",vr="[object Number]",Or="[object Null]",Gi="[object Object]",zn="[object Promise]",Cs="[object Proxy]",Kt="[object RegExp]",cn="[object Set]",fr="[object String]",vn="[object Symbol]",Dn="[object Undefined]",pn="[object WeakMap]",f="[object WeakSet]",w="[object ArrayBuffer]",B="[object DataView]",U="[object Float32Array]",Z="[object Float64Array]",K="[object Int8Array]",se="[object Int16Array]",oe="[object Int32Array]",fe="[object Uint8Array]",ye="[object Uint8ClampedArray]",Me="[object Uint16Array]",xe="[object Uint32Array]",ke=/\b__p \+= '';/g,be=/\b(__p \+=) '' \+/g,Ne=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Re=/&(?:amp|lt|gt|quot|#39);/g,Fe=/[&<>"']/g,de=RegExp(Re.source),Ae=RegExp(Fe.source),W=/<%-([\s\S]+?)%>/g,ie=/<%([\s\S]+?)%>/g,he=/<%=([\s\S]+?)%>/g,me=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,pe=/^\w*$/,De=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Le=/[\\^$.*+?()[\]{}|]/g,Pe=RegExp(Le.source),Ve=/^\s+/,Ue=/\s/,ge=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ce=/\{\n\/\* \[wrapped with (.+)\] \*/,Qe=/,? & /,nt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,i=/[()=,{}\[\]\/\s]/,ue=/\\(\\)?/g,Dt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Vt=/\w*$/,Wt=/^[-+]0x[0-9a-f]+$/i,It=/^0b[01]+$/i,Bt=/^\[object .+?Constructor\]$/,hi=/^0o[0-7]+$/i,Zt=/^(?:0|[1-9]\d*)$/,ei=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ti=/($^)/,Yi=/['\n\r\u2028\u2029\\]/g,wn="\\ud800-\\udfff",An="\\u0300-\\u036f",en="\\ufe20-\\ufe2f",ar="\\u20d0-\\u20ff",pi=An+en+ar,Zn="\\u2700-\\u27bf",Xi="a-z\\xdf-\\xf6\\xf8-\\xff",mt="\\xac\\xb1\\xd7\\xf7",bi="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",At="\\u2000-\\u206f",Ni=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",lr="A-Z\\xc0-\\xd6\\xd8-\\xde",es="\\ufe0e\\ufe0f",kr=mt+bi+At+Ni,ht="['’]",Tn="["+wn+"]",it="["+kr+"]",nr="["+pi+"]",ks="\\d+",Es="["+Zn+"]",Ta="["+Xi+"]",Hs="[^"+wn+kr+ks+Zn+Xi+lr+"]",co="\\ud83c[\\udffb-\\udfff]",Pa="(?:"+nr+"|"+co+")",os="[^"+wn+"]",an="(?:\\ud83c[\\udde6-\\uddff]){2}",ts="[\\ud800-\\udbff][\\udc00-\\udfff]",yr="["+lr+"]",Zs="\\u200d",va="(?:"+Ta+"|"+Hs+")",Ba="(?:"+yr+"|"+Hs+")",Bs="(?:"+ht+"(?:d|ll|m|re|s|t|ve))?",Ds="(?:"+ht+"(?:D|LL|M|RE|S|T|VE))?",M=Pa+"?",te="["+es+"]?",Be="(?:"+Zs+"(?:"+[os,an,ts].join("|")+")"+te+M+")*",Ye="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",dt="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Qt=te+M+Be,ti="(?:"+[Es,an,ts].join("|")+")"+Qt,Ii="(?:"+[os+nr+"?",nr,an,ts,Tn].join("|")+")",zi=RegExp(ht,"g"),En=RegExp(nr,"g"),Ln=RegExp(co+"(?="+co+")|"+Ii+Qt,"g"),or=RegExp([yr+"?"+Ta+"+"+Bs+"(?="+[it,yr,"$"].join("|")+")",Ba+"+"+Ds+"(?="+[it,yr+va,"$"].join("|")+")",yr+"?"+va+"+"+Bs,yr+"+"+Ds,dt,Ye,ks,ti].join("|"),"g"),na=RegExp("["+Zs+wn+pi+es+"]"),ra=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,sa=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Da=-1,Yn={};Yn[U]=Yn[Z]=Yn[K]=Yn[se]=Yn[oe]=Yn[fe]=Yn[ye]=Yn[Me]=Yn[xe]=!0,Yn[sn]=Yn[Bn]=Yn[w]=Yn[$i]=Yn[B]=Yn[li]=Yn[Ji]=Yn[wi]=Yn[kn]=Yn[vr]=Yn[Gi]=Yn[Kt]=Yn[cn]=Yn[fr]=Yn[pn]=!1;var yn={};yn[sn]=yn[Bn]=yn[w]=yn[B]=yn[$i]=yn[li]=yn[U]=yn[Z]=yn[K]=yn[se]=yn[oe]=yn[kn]=yn[vr]=yn[Gi]=yn[Kt]=yn[cn]=yn[fr]=yn[vn]=yn[fe]=yn[ye]=yn[Me]=yn[xe]=!0,yn[Ji]=yn[wi]=yn[pn]=!1;var Rn={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},ur={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},is={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},dr={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},fo=parseFloat,Go=parseInt,ya=typeof hh=="object"&&hh&&hh.Object===Object&&hh,Ya=typeof self=="object"&&self&&self.Object===Object&&self,Hr=ya||Ya||Function("return this")(),ko=t&&!t.nodeType&&t,pa=ko&&!0&&e&&!e.nodeType&&e,La=pa&&pa.exports===ko,ds=La&&ya.process,As=function(){try{var Ot=pa&&pa.require&&pa.require("util").types;return Ot||ds&&ds.binding&&ds.binding("util")}catch{}}(),po=As&&As.isArrayBuffer,Ls=As&&As.isDate,aa=As&&As.isMap,za=As&&As.isRegExp,$a=As&&As.isSet,rA=As&&As.isTypedArray;function pr(Ot,si,Jt){switch(Jt.length){case 0:return Ot.call(si);case 1:return Ot.call(si,Jt[0]);case 2:return Ot.call(si,Jt[0],Jt[1]);case 3:return Ot.call(si,Jt[0],Jt[1],Jt[2])}return Ot.apply(si,Jt)}function kl(Ot,si,Jt,at){for(var yt=-1,Gt=Ot==null?0:Ot.length;++yt<Gt;){var ai=Ot[yt];si(at,ai,Jt(ai),Ot)}return at}function zs(Ot,si){for(var Jt=-1,at=Ot==null?0:Ot.length;++Jt<at&&si(Ot[Jt],Jt,Ot)!==!1;);return Ot}function js(Ot,si){for(var Jt=Ot==null?0:Ot.length;Jt--&&si(Ot[Jt],Jt,Ot)!==!1;);return Ot}function CA(Ot,si){for(var Jt=-1,at=Ot==null?0:Ot.length;++Jt<at;)if(!si(Ot[Jt],Jt,Ot))return!1;return!0}function xa(Ot,si){for(var Jt=-1,at=Ot==null?0:Ot.length,yt=0,Gt=[];++Jt<at;){var ai=Ot[Jt];si(ai,Jt,Ot)&&(Gt[yt++]=ai)}return Gt}function Ra(Ot,si){var Jt=Ot==null?0:Ot.length;return!!Jt&&Ka(Ot,si,0)>-1}function Xa(Ot,si,Jt){for(var at=-1,yt=Ot==null?0:Ot.length;++at<yt;)if(Jt(si,Ot[at]))return!0;return!1}function Zr(Ot,si){for(var Jt=-1,at=Ot==null?0:Ot.length,yt=Array(at);++Jt<at;)yt[Jt]=si(Ot[Jt],Jt,Ot);return yt}function wa(Ot,si){for(var Jt=-1,at=si.length,yt=Ot.length;++Jt<at;)Ot[yt+Jt]=si[Jt];return Ot}function Fa(Ot,si,Jt,at){var yt=-1,Gt=Ot==null?0:Ot.length;for(at&&Gt&&(Jt=Ot[++yt]);++yt<Gt;)Jt=si(Jt,Ot[yt],yt,Ot);return Jt}function Qo(Ot,si,Jt,at){var yt=Ot==null?0:Ot.length;for(at&&yt&&(Jt=Ot[--yt]);yt--;)Jt=si(Jt,Ot[yt],yt,Ot);return Jt}function _s(Ot,si){for(var Jt=-1,at=Ot==null?0:Ot.length;++Jt<at;)if(si(Ot[Jt],Jt,Ot))return!0;return!1}var ga=Ir("length");function Xr(Ot){return Ot.split("")}function kA(Ot){return Ot.match(nt)||[]}function Un(Ot,si,Jt){var at;return Jt(Ot,function(yt,Gt,ai){if(si(yt,Gt,ai))return at=Gt,!1}),at}function Dr(Ot,si,Jt,at){for(var yt=Ot.length,Gt=Jt+(at?1:-1);at?Gt--:++Gt<yt;)if(si(Ot[Gt],Gt,Ot))return Gt;return-1}function Ka(Ot,si,Jt){return si===si?xr(Ot,si,Jt):Dr(Ot,Rs,Jt)}function jn(Ot,si,Jt,at){for(var yt=Jt-1,Gt=Ot.length;++yt<Gt;)if(at(Ot[yt],si))return yt;return-1}function Rs(Ot){return Ot!==Ot}function Er(Ot,si){var Jt=Ot==null?0:Ot.length;return Jt?Ja(Ot,si)/Jt:Yt}function Ir(Ot){return function(si){return si==null?n:si[Ot]}}function Ws(Ot){return function(si){return Ot==null?n:Ot[si]}}function rr(Ot,si,Jt,at,yt){return yt(Ot,function(Gt,ai,Hi){Jt=at?(at=!1,Gt):si(Jt,Gt,ai,Hi)}),Jt}function qo(Ot,si){var Jt=Ot.length;for(Ot.sort(si);Jt--;)Ot[Jt]=Ot[Jt].value;return Ot}function Ja(Ot,si){for(var Jt,at=-1,yt=Ot.length;++at<yt;){var Gt=si(Ot[at]);Gt!==n&&(Jt=Jt===n?Gt:Jt+Gt)}return Jt}function eo(Ot,si){for(var Jt=-1,at=Array(Ot);++Jt<Ot;)at[Jt]=si(Jt);return at}function ns(Ot,si){return Zr(si,function(Jt){return[Jt,Ot[Jt]]})}function $n(Ot){return Ot&&Ot.slice(0,ys(Ot)+1).replace(Ve,"")}function bn(Ot){return function(si){return Ot(si)}}function Oa(Ot,si){return Zr(si,function(Jt){return Ot[Jt]})}function gr(Ot,si){return Ot.has(si)}function ba(Ot,si){for(var Jt=-1,at=Ot.length;++Jt<at&&Ka(si,Ot[Jt],0)>-1;);return Jt}function go(Ot,si){for(var Jt=Ot.length;Jt--&&Ka(si,Ot[Jt],0)>-1;);return Jt}function sr(Ot,si){for(var Jt=Ot.length,at=0;Jt--;)Ot[Jt]===si&&++at;return at}var Lr=Ws(Rn),vs=Ws(ur);function Ho(Ot){return"\\"+dr[Ot]}function Sa(Ot,si){return Ot==null?n:Ot[si]}function Eo(Ot){return na.test(Ot)}function Ys(Ot){return ra.test(Ot)}function rs(Ot){for(var si,Jt=[];!(si=Ot.next()).done;)Jt.push(si.value);return Jt}function Kr(Ot){var si=-1,Jt=Array(Ot.size);return Ot.forEach(function(at,yt){Jt[++si]=[yt,at]}),Jt}function Ns(Ot,si){return function(Jt){return Ot(si(Jt))}}function ma(Ot,si){for(var Jt=-1,at=Ot.length,yt=0,Gt=[];++Jt<at;){var ai=Ot[Jt];(ai===si||ai===re)&&(Ot[Jt]=re,Gt[yt++]=Jt)}return Gt}function Ar(Ot){var si=-1,Jt=Array(Ot.size);return Ot.forEach(function(at){Jt[++si]=at}),Jt}function Nr(Ot){var si=-1,Jt=Array(Ot.size);return Ot.forEach(function(at){Jt[++si]=[at,at]}),Jt}function xr(Ot,si,Jt){for(var at=Jt-1,yt=Ot.length;++at<yt;)if(Ot[at]===si)return at;return-1}function Io(Ot,si,Jt){for(var at=Jt+1;at--;)if(Ot[at]===si)return at;return at}function oa(Ot){return Eo(Ot)?Na(Ot):ga(Ot)}function hs(Ot){return Eo(Ot)?Zo(Ot):Xr(Ot)}function ys(Ot){for(var si=Ot.length;si--&&Ue.test(Ot.charAt(si)););return si}var Ca=Ws(is);function Na(Ot){for(var si=Ln.lastIndex=0;Ln.test(Ot);)++si;return si}function Zo(Ot){return Ot.match(Ln)||[]}function XA(Ot){return Ot.match(or)||[]}var mo=function Ot(si){si=si==null?Hr:$s.defaults(Hr.Object(),si,$s.pick(Hr,sa));var Jt=si.Array,at=si.Date,yt=si.Error,Gt=si.Function,ai=si.Math,Hi=si.Object,mn=si.RegExp,Pn=si.String,xn=si.TypeError,jr=Jt.prototype,xs=Gt.prototype,Is=Hi.prototype,Vs=si["__core-js_shared__"],EA=xs.toString,Pr=Is.hasOwnProperty,Jl=0,KA=function(){var x=/[^.]+$/.exec(Vs&&Vs.keys&&Vs.keys.IE_PROTO||"");return x?"Symbol(src)_1."+x:""}(),ka=Is.toString,_o=EA.call(Hi),Zi=Hr._,Va=mn("^"+EA.call(Pr).replace(Le,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ua=La?si.Buffer:n,Ea=si.Symbol,JA=si.Uint8Array,Vi=Ua?Ua.allocUnsafe:n,IA=Ns(Hi.getPrototypeOf,Hi),fl=Hi.create,Mo=Is.propertyIsEnumerable,sA=jr.splice,dl=Ea?Ea.isConcatSpreadable:n,aA=Ea?Ea.iterator:n,To=Ea?Ea.toStringTag:n,ls=function(){try{var x=Eu(Hi,"defineProperty");return x({},"",{}),x}catch{}}(),El=si.clearTimeout!==Hr.clearTimeout&&si.clearTimeout,Il=at&&at.now!==Hr.Date.now&&at.now,Ml=si.setTimeout!==Hr.setTimeout&&si.setTimeout,oA=ai.ceil,Fs=ai.floor,to=Hi.getOwnPropertySymbols,MA=Ua?Ua.isBuffer:n,pl=si.isFinite,TA=jr.join,gl=Ns(Hi.keys,Hi),Xn=ai.max,Vr=ai.min,zr=at.now,Us=si.parseInt,Sn=ai.random,Ga=jr.reverse,ml=Eu(si,"DataView"),vo=Eu(si,"Map"),el=Eu(si,"Promise"),ps=Eu(si,"Set"),Xs=Eu(si,"WeakMap"),jt=Eu(Hi,"create"),ci=Xs&&new Xs,io={},PA=Ol(ml),BA=Ol(vo),Br=Ol(el),no=Ol(ps),Ur=Ol(Xs),_=Ea?Ea.prototype:n,b=_?_.valueOf:n,S=_?_.toString:n;function C(x){if(_t(x)&&!A(x)&&!(x instanceof ne)){if(x instanceof H)return x;if(Pr.call(x,"__wrapped__"))return Y0(x)}return new H(x)}var G=function(){function x(){}return function(D){if(!ft(D))return{};if(fl)return fl(D);x.prototype=D;var $=new x;return x.prototype=n,$}}();function j(){}function H(x,D){this.__wrapped__=x,this.__actions__=[],this.__chain__=!!D,this.__index__=0,this.__values__=n}C.templateSettings={escape:W,evaluate:ie,interpolate:he,variable:"",imports:{_:C}},C.prototype=j.prototype,C.prototype.constructor=C,H.prototype=G(j.prototype),H.prototype.constructor=H;function ne(x){this.__wrapped__=x,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=oi,this.__views__=[]}function Se(){var x=new ne(this.__wrapped__);return x.__actions__=wo(this.__actions__),x.__dir__=this.__dir__,x.__filtered__=this.__filtered__,x.__iteratees__=wo(this.__iteratees__),x.__takeCount__=this.__takeCount__,x.__views__=wo(this.__views__),x}function Ge(){if(this.__filtered__){var x=new ne(this);x.__dir__=-1,x.__filtered__=!0}else x=this.clone(),x.__dir__*=-1;return x}function $e(){var x=this.__wrapped__.value(),D=this.__dir__,$=A(x),we=D<0,Ze=$?x.length:0,ot=Dm(0,Ze,this.__views__),Tt=ot.start,zt=ot.end,Ht=zt-Tt,Si=we?zt:Tt-1,Ci=this.__iteratees__,Mi=Ci.length,ln=0,Mn=Vr(Ht,this.__takeCount__);if(!$||!we&&Ze==Ht&&Mn==Ht)return M0(x,this.__actions__);var qn=[];e:for(;Ht--&&ln<Mn;){Si+=D;for(var Tr=-1,Hn=x[Si];++Tr<Mi;){var Fr=Ci[Tr],Wr=Fr.iteratee,al=Fr.type,mA=Wr(Hn);if(al==Ut)Hn=mA;else if(!mA){if(al==vt)continue e;break e}}qn[ln++]=Hn}return qn}ne.prototype=G(j.prototype),ne.prototype.constructor=ne;function kt(x){var D=-1,$=x==null?0:x.length;for(this.clear();++D<$;){var we=x[D];this.set(we[0],we[1])}}function lt(){this.__data__=jt?jt(null):{},this.size=0}function ct(x){var D=this.has(x)&&delete this.__data__[x];return this.size-=D?1:0,D}function L(x){var D=this.__data__;if(jt){var $=D[x];return $===Q?n:$}return Pr.call(D,x)?D[x]:n}function r(x){var D=this.__data__;return jt?D[x]!==n:Pr.call(D,x)}function d(x,D){var $=this.__data__;return this.size+=this.has(x)?0:1,$[x]=jt&&D===n?Q:D,this}kt.prototype.clear=lt,kt.prototype.delete=ct,kt.prototype.get=L,kt.prototype.has=r,kt.prototype.set=d;function k(x){var D=-1,$=x==null?0:x.length;for(this.clear();++D<$;){var we=x[D];this.set(we[0],we[1])}}function I(){this.__data__=[],this.size=0}function R(x){var D=this.__data__,$=ri(D,x);if($<0)return!1;var we=D.length-1;return $==we?D.pop():sA.call(D,$,1),--this.size,!0}function q(x){var D=this.__data__,$=ri(D,x);return $<0?n:D[$][1]}function a(x){return ri(this.__data__,x)>-1}function o(x,D){var $=this.__data__,we=ri($,x);return we<0?(++this.size,$.push([x,D])):$[we][1]=D,this}k.prototype.clear=I,k.prototype.delete=R,k.prototype.get=q,k.prototype.has=a,k.prototype.set=o;function h(x){var D=-1,$=x==null?0:x.length;for(this.clear();++D<$;){var we=x[D];this.set(we[0],we[1])}}function p(){this.size=0,this.__data__={hash:new kt,map:new(vo||k),string:new kt}}function v(x){var D=Tc(this,x).delete(x);return this.size-=D?1:0,D}function E(x){return Tc(this,x).get(x)}function z(x){return Tc(this,x).has(x)}function F(x,D){var $=Tc(this,x),we=$.size;return $.set(x,D),this.size+=$.size==we?0:1,this}h.prototype.clear=p,h.prototype.delete=v,h.prototype.get=E,h.prototype.has=z,h.prototype.set=F;function Y(x){var D=-1,$=x==null?0:x.length;for(this.__data__=new h;++D<$;)this.add(x[D])}function J(x){return this.__data__.set(x,Q),this}function ve(x){return this.__data__.has(x)}Y.prototype.add=Y.prototype.push=J,Y.prototype.has=ve;function Ie(x){var D=this.__data__=new k(x);this.size=D.size}function Oe(){this.__data__=new k,this.size=0}function He(x){var D=this.__data__,$=D.delete(x);return this.size=D.size,$}function We(x){return this.__data__.get(x)}function st(x){return this.__data__.has(x)}function wt(x,D){var $=this.__data__;if($ instanceof k){var we=$.__data__;if(!vo||we.length<m-1)return we.push([x,D]),this.size=++$.size,this;$=this.__data__=new h(we)}return $.set(x,D),this.size=$.size,this}Ie.prototype.clear=Oe,Ie.prototype.delete=He,Ie.prototype.get=We,Ie.prototype.has=st,Ie.prototype.set=wt;function Et(x,D){var $=A(x),we=!$&&Bu(x),Ze=!$&&!we&&N(x),ot=!$&&!we&&!Ze&&on(x),Tt=$||we||Ze||ot,zt=Tt?eo(x.length,Pn):[],Ht=zt.length;for(var Si in x)(D||Pr.call(x,Si))&&!(Tt&&(Si=="length"||Ze&&(Si=="offset"||Si=="parent")||ot&&(Si=="buffer"||Si=="byteLength"||Si=="byteOffset")||Fl(Si,Ht)))&&zt.push(Si);return zt}function pt(x){var D=x.length;return D?x[Xu(0,D-1)]:n}function bt(x,D){return Lh(wo(x),tn(D,0,x.length))}function St(x){return Lh(wo(x))}function vi(x,D,$){($!==n&&!dA(x[D],$)||$===n&&!(D in x))&&Oi(x,D,$)}function $t(x,D,$){var we=x[D];(!(Pr.call(x,D)&&dA(we,$))||$===n&&!(D in x))&&Oi(x,D,$)}function ri(x,D){for(var $=x.length;$--;)if(dA(x[$][0],D))return $;return-1}function ni(x,D,$,we){return Mr(x,function(Ze,ot,Tt){D(we,Ze,$(Ze),Tt)}),we}function _n(x,D){return x&&vl(D,Ss(D),x)}function Ki(x,D){return x&&vl(D,Fo(D),x)}function Oi(x,D,$){D=="__proto__"&&ls?ls(x,D,{configurable:!0,enumerable:!0,value:$,writable:!0}):x[D]=$}function Ui(x,D){for(var $=-1,we=D.length,Ze=Jt(we),ot=x==null;++$<we;)Ze[$]=ot?n:lo(x,D[$]);return Ze}function tn(x,D,$){return x===x&&($!==n&&(x=x<=$?x:$),D!==n&&(x=x>=D?x:D)),x}function ji(x,D,$,we,Ze,ot){var Tt,zt=D&ee,Ht=D&ce,Si=D&le;if($&&(Tt=Ze?$(x,we,Ze,ot):$(x)),Tt!==n)return Tt;if(!ft(x))return x;var Ci=A(x);if(Ci){if(Tt=zm(x),!zt)return wo(x,Tt)}else{var Mi=Ha(x),ln=Mi==wi||Mi==ir;if(N(x))return L0(x,zt);if(Mi==Gi||Mi==sn||ln&&!Ze){if(Tt=Ht||ln?{}:Dd(x),!zt)return Ht?Mm(x,Ki(Tt,x)):eh(x,_n(Tt,x))}else{if(!yn[Mi])return Ze?x:{};Tt=Bh(x,Mi,zt)}}ot||(ot=new Ie);var Mn=ot.get(x);if(Mn)return Mn;ot.set(x,Tt),Fi(x)?x.forEach(function(Hn){Tt.add(ji(Hn,D,$,Hn,x,ot))}):Rt(x)&&x.forEach(function(Hn,Fr){Tt.set(Fr,ji(Hn,D,$,Fr,x,ot))});var qn=Si?Ht?O0:ru:Ht?Fo:Ss,Tr=Ci?n:qn(x);return zs(Tr||x,function(Hn,Fr){Tr&&(Fr=Hn,Hn=x[Fr]),$t(Tt,Fr,ji(Hn,D,$,Fr,x,ot))}),Tt}function Qn(x){var D=Ss(x);return function($){return fn($,x,D)}}function fn(x,D,$){var we=$.length;if(x==null)return!we;for(x=Hi(x);we--;){var Ze=$[we],ot=D[Ze],Tt=x[Ze];if(Tt===n&&!(Ze in x)||!ot(Tt))return!1}return!0}function Fn(x,D,$){if(typeof x!="function")throw new xn(P);return Dh(function(){x.apply(n,$)},D)}function Rr(x,D,$,we){var Ze=-1,ot=Ra,Tt=!0,zt=x.length,Ht=[],Si=D.length;if(!zt)return Ht;$&&(D=Zr(D,bn($))),we?(ot=Xa,Tt=!1):D.length>=m&&(ot=gr,Tt=!1,D=new Y(D));e:for(;++Ze<zt;){var Ci=x[Ze],Mi=$==null?Ci:$(Ci);if(Ci=we||Ci!==0?Ci:0,Tt&&Mi===Mi){for(var ln=Si;ln--;)if(D[ln]===Mi)continue e;Ht.push(Ci)}else ot(D,Mi,we)||Ht.push(Ci)}return Ht}var Mr=z0(qa),AA=z0(ws,!0);function DA(x,D){var $=!0;return Mr(x,function(we,Ze,ot){return $=!!D(we,Ze,ot),$}),$}function lA(x,D,$){for(var we=-1,Ze=x.length;++we<Ze;){var ot=x[we],Tt=D(ot);if(Tt!=null&&(zt===n?Tt===Tt&&!rn(Tt):$(Tt,zt)))var zt=Tt,Ht=ot}return Ht}function Tl(x,D,$,we){var Ze=x.length;for($=In($),$<0&&($=-$>Ze?0:Ze+$),we=we===n||we>Ze?Ze:In(we),we<0&&(we+=Ze),we=$>we?0:Ia(we);$<we;)x[$++]=D;return x}function Pl(x,D){var $=[];return Mr(x,function(we,Ze,ot){D(we,Ze,ot)&&$.push(we)}),$}function Gr(x,D,$,we,Ze){var ot=-1,Tt=x.length;for($||($=Rm),Ze||(Ze=[]);++ot<Tt;){var zt=x[ot];D>0&&$(zt)?D>1?Gr(zt,D-1,$,we,Ze):wa(Ze,zt):we||(Ze[Ze.length]=zt)}return Ze}var Aa=kh(),Qa=kh(!0);function qa(x,D){return x&&Aa(x,D,Ss)}function ws(x,D){return x&&Qa(x,D,Ss)}function Os(x,D){return xa(D,function($){return et(x[$])})}function Ks(x,D){D=iu(D,x);for(var $=0,we=D.length;x!=null&&$<we;)x=x[mr(D[$++])];return $&&$==we?x:n}function Ms(x,D,$){var we=D(x);return A(x)?we:wa(we,$(x))}function Gs(x){return x==null?x===n?Dn:Or:To&&To in Hi(x)?Bm(x):Rd(x)}function eu(x,D){return x>D}function mc(x,D){return x!=null&&Pr.call(x,D)}function _c(x,D){return x!=null&&D in Hi(x)}function w0(x,D,$){return x>=Vr(D,$)&&x<Xn(D,$)}function vu(x,D,$){for(var we=$?Xa:Ra,Ze=x[0].length,ot=x.length,Tt=ot,zt=Jt(ot),Ht=1/0,Si=[];Tt--;){var Ci=x[Tt];Tt&&D&&(Ci=Zr(Ci,bn(D))),Ht=Vr(Ci.length,Ht),zt[Tt]=!$&&(D||Ze>=120&&Ci.length>=120)?new Y(Tt&&Ci):n}Ci=x[0];var Mi=-1,ln=zt[0];e:for(;++Mi<Ze&&Si.length<Ht;){var Mn=Ci[Mi],qn=D?D(Mn):Mn;if(Mn=$||Mn!==0?Mn:0,!(ln?gr(ln,qn):we(Si,qn,$))){for(Tt=ot;--Tt;){var Tr=zt[Tt];if(!(Tr?gr(Tr,qn):we(x[Tt],qn,$)))continue e}ln&&ln.push(qn),Si.push(Mn)}}return Si}function LA(x,D,$,we){return qa(x,function(Ze,ot,Tt){D(we,$(Ze),ot,Tt)}),we}function uA(x,D,$){D=iu(D,x),x=Od(x,D);var we=x==null?x:x[mr(cA(D))];return we==null?n:pr(we,x,$)}function hA(x){return _t(x)&&Gs(x)==sn}function jo(x){return _t(x)&&Gs(x)==w}function zA(x){return _t(x)&&Gs(x)==li}function Bl(x,D,$,we,Ze){return x===D?!0:x==null||D==null||!_t(x)&&!_t(D)?x!==x&&D!==D:tl(x,D,$,we,Bl,Ze)}function tl(x,D,$,we,Ze,ot){var Tt=A(x),zt=A(D),Ht=Tt?Bn:Ha(x),Si=zt?Bn:Ha(D);Ht=Ht==sn?Gi:Ht,Si=Si==sn?Gi:Si;var Ci=Ht==Gi,Mi=Si==Gi,ln=Ht==Si;if(ln&&N(x)){if(!N(D))return!1;Tt=!0,Ci=!1}if(ln&&!Ci)return ot||(ot=new Ie),Tt||on(x)?Bd(x,D,$,we,Ze,ot):nu(x,D,Ht,$,we,Ze,ot);if(!($&je)){var Mn=Ci&&Pr.call(x,"__wrapped__"),qn=Mi&&Pr.call(D,"__wrapped__");if(Mn||qn){var Tr=Mn?x.value():x,Hn=qn?D.value():D;return ot||(ot=new Ie),Ze(Tr,Hn,$,we,ot)}}return ln?(ot||(ot=new Ie),Pm(x,D,$,we,Ze,ot)):!1}function ym(x){return _t(x)&&Ha(x)==kn}function vc(x,D,$,we){var Ze=$.length,ot=Ze,Tt=!we;if(x==null)return!ot;for(x=Hi(x);Ze--;){var zt=$[Ze];if(Tt&&zt[2]?zt[1]!==x[zt[0]]:!(zt[0]in x))return!1}for(;++Ze<ot;){zt=$[Ze];var Ht=zt[0],Si=x[Ht],Ci=zt[1];if(Tt&&zt[2]){if(Si===n&&!(Ht in x))return!1}else{var Mi=new Ie;if(we)var ln=we(Si,Ci,Ht,x,D,Mi);if(!(ln===n?Bl(Ci,Si,je|Je,we,Mi):ln))return!1}}return!0}function Qs(x){if(!ft(x)||zd(x))return!1;var D=et(x)?Va:Bt;return D.test(Ol(x))}function b0(x){return _t(x)&&Gs(x)==Kt}function md(x){return _t(x)&&Ha(x)==cn}function yu(x){return _t(x)&&ut(x.length)&&!!Yn[Gs(x)]}function tu(x){return typeof x=="function"?x:x==null?NA:typeof x=="object"?A(x)?vd(x[0],x[1]):C0(x):zv(x)}function Yu(x){if(!sh(x))return gl(x);var D=[];for(var $ in Hi(x))Pr.call(x,$)&&$!="constructor"&&D.push($);return D}function S0(x){if(!ft(x))return Nm(x);var D=sh(x),$=[];for(var we in x)we=="constructor"&&(D||!Pr.call(x,we))||$.push(we);return $}function yc(x,D){return x<D}function _d(x,D){var $=-1,we=c(x)?Jt(x.length):[];return Mr(x,function(Ze,ot,Tt){we[++$]=D(Ze,ot,Tt)}),we}function C0(x){var D=V0(x);return D.length==1&&D[0][2]?Z0(D[0][0],D[0][1]):function($){return $===x||vc($,x,D)}}function vd(x,D){return G0(x)&&H0(D)?Z0(mr(x),D):function($){var we=lo($,x);return we===n&&we===D?Du($,x):Bl(D,we,je|Je)}}function $u(x,D,$,we,Ze){x!==D&&Aa(D,function(ot,Tt){if(Ze||(Ze=new Ie),ft(ot))xm(x,D,Tt,$,$u,we,Ze);else{var zt=we?we(Bc(x,Tt),ot,Tt+"",x,D,Ze):n;zt===n&&(zt=ot),vi(x,Tt,zt)}},Fo)}function xm(x,D,$,we,Ze,ot,Tt){var zt=Bc(x,$),Ht=Bc(D,$),Si=Tt.get(Ht);if(Si){vi(x,$,Si);return}var Ci=ot?ot(zt,Ht,$+"",x,D,Tt):n,Mi=Ci===n;if(Mi){var ln=A(Ht),Mn=!ln&&N(Ht),qn=!ln&&!Mn&&on(Ht);Ci=Ht,ln||Mn||qn?A(zt)?Ci=zt:y(zt)?Ci=wo(zt):Mn?(Mi=!1,Ci=L0(Ht,!0)):qn?(Mi=!1,Ci=bd(Ht,!0)):Ci=[]:Ri(Ht)||Bu(Ht)?(Ci=zt,Bu(zt)?Ci=so(zt):(!ft(zt)||et(zt))&&(Ci=Dd(Ht))):Mi=!1}Mi&&(Tt.set(Ht,Ci),Ze(Ci,Ht,we,ot,Tt),Tt.delete(Ht)),vi(x,$,Ci)}function xc(x,D){var $=x.length;if($)return D+=D<0?$:0,Fl(D,$)?x[D]:n}function k0(x,D,$){D.length?D=Zr(D,function(ot){return A(ot)?function(Tt){return Ks(Tt,ot.length===1?ot[0]:ot)}:ot}):D=[NA];var we=-1;D=Zr(D,bn(On()));var Ze=_d(x,function(ot,Tt,zt){var Ht=Zr(D,function(Si){return Si(ot)});return{criteria:Ht,index:++we,value:ot}});return qo(Ze,function(ot,Tt){return Im(ot,Tt,$)})}function yd(x,D){return xu(x,D,function($,we){return Du(x,we)})}function xu(x,D,$){for(var we=-1,Ze=D.length,ot={};++we<Ze;){var Tt=D[we],zt=Ks(x,Tt);$(zt,Tt)&&bu(ot,iu(Tt,x),zt)}return ot}function wm(x){return function(D){return Ks(D,x)}}function wu(x,D,$,we){var Ze=we?jn:Ka,ot=-1,Tt=D.length,zt=x;for(x===D&&(D=wo(D)),$&&(zt=Zr(x,bn($)));++ot<Tt;)for(var Ht=0,Si=D[ot],Ci=$?$(Si):Si;(Ht=Ze(zt,Ci,Ht,we))>-1;)zt!==x&&sA.call(zt,Ht,1),sA.call(x,Ht,1);return x}function yh(x,D){for(var $=x?D.length:0,we=$-1;$--;){var Ze=D[$];if($==we||Ze!==ot){var ot=Ze;Fl(Ze)?sA.call(x,Ze,1):bh(x,Ze)}}return x}function Xu(x,D){return x+Fs(Sn()*(D-x+1))}function xd(x,D,$,we){for(var Ze=-1,ot=Xn(oA((D-x)/($||1)),0),Tt=Jt(ot);ot--;)Tt[we?ot:++Ze]=x,x+=$;return Tt}function wc(x,D){var $="";if(!x||D<1||D>ui)return $;do D%2&&($+=x),D=Fs(D/2),D&&(x+=x);while(D);return $}function wr(x,D){return Iu(Fd(x,D,NA),x+"")}function yo(x){return pt(OA(x))}function Ku(x,D){var $=OA(x);return Lh($,tn(D,0,$.length))}function bu(x,D,$,we){if(!ft(x))return x;D=iu(D,x);for(var Ze=-1,ot=D.length,Tt=ot-1,zt=x;zt!=null&&++Ze<ot;){var Ht=mr(D[Ze]),Si=$;if(Ht==="__proto__"||Ht==="constructor"||Ht==="prototype")return x;if(Ze!=Tt){var Ci=zt[Ht];Si=we?we(Ci,Ht,zt):n,Si===n&&(Si=ft(Ci)?Ci:Fl(D[Ze+1])?[]:{})}$t(zt,Ht,Si),zt=zt[Ht]}return x}var E0=ci?function(x,D){return ci.set(x,D),x}:NA,xh=ls?function(x,D){return ls(x,"toString",{configurable:!0,enumerable:!1,value:y_(D),writable:!0})}:NA;function bm(x){return Lh(OA(x))}function Po(x,D,$){var we=-1,Ze=x.length;D<0&&(D=-D>Ze?0:Ze+D),$=$>Ze?Ze:$,$<0&&($+=Ze),Ze=D>$?0:$-D>>>0,D>>>=0;for(var ot=Jt(Ze);++we<Ze;)ot[we]=x[we+D];return ot}function Sm(x,D){var $;return Mr(x,function(we,Ze,ot){return $=D(we,Ze,ot),!$}),!!$}function wh(x,D,$){var we=0,Ze=x==null?we:x.length;if(typeof D=="number"&&D===D&&Ze<=Pi){for(;we<Ze;){var ot=we+Ze>>>1,Tt=x[ot];Tt!==null&&!rn(Tt)&&($?Tt<=D:Tt<D)?we=ot+1:Ze=ot}return Ze}return bc(x,D,NA,$)}function bc(x,D,$,we){var Ze=0,ot=x==null?0:x.length;if(ot===0)return 0;D=$(D);for(var Tt=D!==D,zt=D===null,Ht=rn(D),Si=D===n;Ze<ot;){var Ci=Fs((Ze+ot)/2),Mi=$(x[Ci]),ln=Mi!==n,Mn=Mi===null,qn=Mi===Mi,Tr=rn(Mi);if(Tt)var Hn=we||qn;else Si?Hn=qn&&(we||ln):zt?Hn=qn&&ln&&(we||!Mn):Ht?Hn=qn&&ln&&!Mn&&(we||!Tr):Mn||Tr?Hn=!1:Hn=we?Mi<=D:Mi<D;Hn?Ze=Ci+1:ot=Ci}return Vr(ot,yi)}function I0(x,D){for(var $=-1,we=x.length,Ze=0,ot=[];++$<we;){var Tt=x[$],zt=D?D(Tt):Tt;if(!$||!dA(zt,Ht)){var Ht=zt;ot[Ze++]=Tt===0?0:Tt}}return ot}function wd(x){return typeof x=="number"?x:rn(x)?Yt:+x}function Bo(x){if(typeof x=="string")return x;if(A(x))return Zr(x,Bo)+"";if(rn(x))return S?S.call(x):"";var D=x+"";return D=="0"&&1/x==-Ft?"-0":D}function Dl(x,D,$){var we=-1,Ze=Ra,ot=x.length,Tt=!0,zt=[],Ht=zt;if($)Tt=!1,Ze=Xa;else if(ot>=m){var Si=D?null:Md(x);if(Si)return Ar(Si);Tt=!1,Ze=gr,Ht=new Y}else Ht=D?[]:zt;e:for(;++we<ot;){var Ci=x[we],Mi=D?D(Ci):Ci;if(Ci=$||Ci!==0?Ci:0,Tt&&Mi===Mi){for(var ln=Ht.length;ln--;)if(Ht[ln]===Mi)continue e;D&&Ht.push(Mi),zt.push(Ci)}else Ze(Ht,Mi,$)||(Ht!==zt&&Ht.push(Mi),zt.push(Ci))}return zt}function bh(x,D){return D=iu(D,x),x=Od(x,D),x==null||delete x[mr(cA(D))]}function Ju(x,D,$,we){return bu(x,D,$(Ks(x,D)),we)}function xo(x,D,$,we){for(var Ze=x.length,ot=we?Ze:-1;(we?ot--:++ot<Ze)&&D(x[ot],ot,x););return $?Po(x,we?0:ot,we?ot+1:Ze):Po(x,we?ot+1:0,we?Ze:ot)}function M0(x,D){var $=x;return $ instanceof ne&&($=$.value()),Fa(D,function(we,Ze){return Ze.func.apply(Ze.thisArg,wa([we],Ze.args))},$)}function T0(x,D,$){var we=x.length;if(we<2)return we?Dl(x[0]):[];for(var Ze=-1,ot=Jt(we);++Ze<we;)for(var Tt=x[Ze],zt=-1;++zt<we;)zt!=Ze&&(ot[Ze]=Rr(ot[Ze]||Tt,x[zt],D,$));return Dl(Gr(ot,1),D,$)}function P0(x,D,$){for(var we=-1,Ze=x.length,ot=D.length,Tt={};++we<Ze;){var zt=we<ot?D[we]:n;$(Tt,x[we],zt)}return Tt}function B0(x){return y(x)?x:[]}function D0(x){return typeof x=="function"?x:NA}function iu(x,D){return A(x)?x:G0(x,D)?[x]:W0(Gn(x))}var Cm=wr;function _l(x,D,$){var we=x.length;return $=$===n?we:$,!D&&$>=we?x:Po(x,D,$)}var Sh=El||function(x){return Hr.clearTimeout(x)};function L0(x,D){if(D)return x.slice();var $=x.length,we=Vi?Vi($):new x.constructor($);return x.copy(we),we}function Ll(x){var D=new x.constructor(x.byteLength);return new JA(D).set(new JA(x)),D}function Ch(x,D){var $=D?Ll(x.buffer):x.buffer;return new x.constructor($,x.byteOffset,x.byteLength)}function km(x){var D=new x.constructor(x.source,Vt.exec(x));return D.lastIndex=x.lastIndex,D}function Em(x){return b?Hi(b.call(x)):{}}function bd(x,D){var $=D?Ll(x.buffer):x.buffer;return new x.constructor($,x.byteOffset,x.length)}function Sd(x,D){if(x!==D){var $=x!==n,we=x===null,Ze=x===x,ot=rn(x),Tt=D!==n,zt=D===null,Ht=D===D,Si=rn(D);if(!zt&&!Si&&!ot&&x>D||ot&&Tt&&Ht&&!zt&&!Si||we&&Tt&&Ht||!$&&Ht||!Ze)return 1;if(!we&&!ot&&!Si&&x<D||Si&&$&&Ze&&!we&&!ot||zt&&$&&Ze||!Tt&&Ze||!Ht)return-1}return 0}function Im(x,D,$){for(var we=-1,Ze=x.criteria,ot=D.criteria,Tt=Ze.length,zt=$.length;++we<Tt;){var Ht=Sd(Ze[we],ot[we]);if(Ht){if(we>=zt)return Ht;var Si=$[we];return Ht*(Si=="desc"?-1:1)}}return x.index-D.index}function Cd(x,D,$,we){for(var Ze=-1,ot=x.length,Tt=$.length,zt=-1,Ht=D.length,Si=Xn(ot-Tt,0),Ci=Jt(Ht+Si),Mi=!we;++zt<Ht;)Ci[zt]=D[zt];for(;++Ze<Tt;)(Mi||Ze<ot)&&(Ci[$[Ze]]=x[Ze]);for(;Si--;)Ci[zt++]=x[Ze++];return Ci}function kd(x,D,$,we){for(var Ze=-1,ot=x.length,Tt=-1,zt=$.length,Ht=-1,Si=D.length,Ci=Xn(ot-zt,0),Mi=Jt(Ci+Si),ln=!we;++Ze<Ci;)Mi[Ze]=x[Ze];for(var Mn=Ze;++Ht<Si;)Mi[Mn+Ht]=D[Ht];for(;++Tt<zt;)(ln||Ze<ot)&&(Mi[Mn+$[Tt]]=x[Ze++]);return Mi}function wo(x,D){var $=-1,we=x.length;for(D||(D=Jt(we));++$<we;)D[$]=x[$];return D}function vl(x,D,$,we){var Ze=!$;$||($={});for(var ot=-1,Tt=D.length;++ot<Tt;){var zt=D[ot],Ht=we?we($[zt],x[zt],zt,$,x):n;Ht===n&&(Ht=x[zt]),Ze?Oi($,zt,Ht):$t($,zt,Ht)}return $}function eh(x,D){return vl(x,Ph(x),D)}function Mm(x,D){return vl(x,rh(x),D)}function bs(x,D){return function($,we){var Ze=A($)?kl:ni,ot=D?D():{};return Ze($,x,On(we,2),ot)}}function zl(x){return wr(function(D,$){var we=-1,Ze=$.length,ot=Ze>1?$[Ze-1]:n,Tt=Ze>2?$[2]:n;for(ot=x.length>3&&typeof ot=="function"?(Ze--,ot):n,Tt&&Do($[0],$[1],Tt)&&(ot=Ze<3?n:ot,Ze=1),D=Hi(D);++we<Ze;){var zt=$[we];zt&&x(D,zt,we,ot)}return D})}function z0(x,D){return function($,we){if($==null)return $;if(!c($))return x($,we);for(var Ze=$.length,ot=D?Ze:-1,Tt=Hi($);(D?ot--:++ot<Ze)&&we(Tt[ot],ot,Tt)!==!1;);return $}}function kh(x){return function(D,$,we){for(var Ze=-1,ot=Hi(D),Tt=we(D),zt=Tt.length;zt--;){var Ht=Tt[x?zt:++Ze];if($(ot[Ht],Ht,ot)===!1)break}return D}}function Sc(x,D,$){var we=D&Xe,Ze=ih(x);function ot(){var Tt=this&&this!==Hr&&this instanceof ot?Ze:x;return Tt.apply(we?$:this,arguments)}return ot}function th(x){return function(D){D=Gn(D);var $=Eo(D)?hs(D):n,we=$?$[0]:D.charAt(0),Ze=$?_l($,1).join(""):D.slice(1);return we[x]()+Ze}}function Su(x){return function(D){return Fa(Dv(Bv(D).replace(zi,"")),x,"")}}function ih(x){return function(){var D=arguments;switch(D.length){case 0:return new x;case 1:return new x(D[0]);case 2:return new x(D[0],D[1]);case 3:return new x(D[0],D[1],D[2]);case 4:return new x(D[0],D[1],D[2],D[3]);case 5:return new x(D[0],D[1],D[2],D[3],D[4]);case 6:return new x(D[0],D[1],D[2],D[3],D[4],D[5]);case 7:return new x(D[0],D[1],D[2],D[3],D[4],D[5],D[6])}var $=G(x.prototype),we=x.apply($,D);return ft(we)?we:$}}function Eh(x,D,$){var we=ih(x);function Ze(){for(var ot=arguments.length,Tt=Jt(ot),zt=ot,Ht=ku(Ze);zt--;)Tt[zt]=arguments[zt];var Si=ot<3&&Tt[0]!==Ht&&Tt[ot-1]!==Ht?[]:ma(Tt,Ht);if(ot-=Si.length,ot<$)return Ic(x,D,Ih,Ze.placeholder,n,Tt,Si,n,n,$-ot);var Ci=this&&this!==Hr&&this instanceof Ze?we:x;return pr(Ci,this,Tt)}return Ze}function Cc(x){return function(D,$,we){var Ze=Hi(D);if(!c(D)){var ot=On($,3);D=Ss(D),$=function(zt){return ot(Ze[zt],zt,Ze)}}var Tt=x(D,$,we);return Tt>-1?Ze[ot?D[Tt]:Tt]:n}}function kc(x){return yl(function(D){var $=D.length,we=$,Ze=H.prototype.thru;for(x&&D.reverse();we--;){var ot=D[we];if(typeof ot!="function")throw new xn(P);if(Ze&&!Tt&&Mc(ot)=="wrapper")var Tt=new H([],!0)}for(we=Tt?we:$;++we<$;){ot=D[we];var zt=Mc(ot),Ht=zt=="wrapper"?N0(ot):n;Ht&&Q0(Ht[0])&&Ht[1]==(Ai|gt|Ct|ii)&&!Ht[4].length&&Ht[9]==1?Tt=Tt[Mc(Ht[0])].apply(Tt,Ht[3]):Tt=ot.length==1&&Q0(ot)?Tt[zt]():Tt.thru(ot)}return function(){var Si=arguments,Ci=Si[0];if(Tt&&Si.length==1&&A(Ci))return Tt.plant(Ci).value();for(var Mi=0,ln=$?D[Mi].apply(this,Si):Ci;++Mi<$;)ln=D[Mi].call(this,ln);return ln}})}function Ih(x,D,$,we,Ze,ot,Tt,zt,Ht,Si){var Ci=D&Ai,Mi=D&Xe,ln=D&Ke,Mn=D&(gt|Mt),qn=D&xi,Tr=ln?n:ih(x);function Hn(){for(var Fr=arguments.length,Wr=Jt(Fr),al=Fr;al--;)Wr[al]=arguments[al];if(Mn)var mA=ku(Hn),ol=sr(Wr,mA);if(we&&(Wr=Cd(Wr,we,Ze,Mn)),ot&&(Wr=kd(Wr,ot,Tt,Mn)),Fr-=ol,Mn&&Fr<Si){var Ma=ma(Wr,mA);return Ic(x,D,Ih,Hn.placeholder,$,Wr,Ma,zt,Ht,Si-Fr)}var Gl=Mi?$:this,zu=ln?Gl[x]:x;return Fr=Wr.length,zt?Wr=Vm(Wr,zt):qn&&Fr>1&&Wr.reverse(),Ci&&Ht<Fr&&(Wr.length=Ht),this&&this!==Hr&&this instanceof Hn&&(zu=Tr||ih(zu)),zu.apply(Gl,Wr)}return Hn}function Ed(x,D){return function($,we){return LA($,x,D(we),{})}}function Mh(x,D){return function($,we){var Ze;if($===n&&we===n)return D;if($!==n&&(Ze=$),we!==n){if(Ze===n)return we;typeof $=="string"||typeof we=="string"?($=Bo($),we=Bo(we)):($=wd($),we=wd(we)),Ze=x($,we)}return Ze}}function Cu(x){return yl(function(D){return D=Zr(D,bn(On())),wr(function($){var we=this;return x(D,function(Ze){return pr(Ze,we,$)})})})}function Ec(x,D){D=D===n?" ":Bo(D);var $=D.length;if($<2)return $?wc(D,x):D;var we=wc(D,oA(x/oa(D)));return Eo(D)?_l(hs(we),0,x).join(""):we.slice(0,x)}function R0(x,D,$,we){var Ze=D&Xe,ot=ih(x);function Tt(){for(var zt=-1,Ht=arguments.length,Si=-1,Ci=we.length,Mi=Jt(Ci+Ht),ln=this&&this!==Hr&&this instanceof Tt?ot:x;++Si<Ci;)Mi[Si]=we[Si];for(;Ht--;)Mi[Si++]=arguments[++zt];return pr(ln,Ze?$:this,Mi)}return Tt}function Id(x){return function(D,$,we){return we&&typeof we!="number"&&Do(D,$,we)&&($=we=n),D=ss(D),$===n?($=D,D=0):$=ss($),we=we===n?D<$?1:-1:ss(we),xd(D,$,we,x)}}function nh(x){return function(D,$){return typeof D=="string"&&typeof $=="string"||(D=ms(D),$=ms($)),x(D,$)}}function Ic(x,D,$,we,Ze,ot,Tt,zt,Ht,Si){var Ci=D&gt,Mi=Ci?Tt:n,ln=Ci?n:Tt,Mn=Ci?ot:n,qn=Ci?n:ot;D|=Ci?Ct:Te,D&=~(Ci?Te:Ct),D&xt||(D&=~(Xe|Ke));var Tr=[x,D,Ze,Mn,Mi,qn,ln,zt,Ht,Si],Hn=$.apply(n,Tr);return Q0(x)&&Nd(Hn,Tr),Hn.placeholder=we,Js(Hn,x,D)}function Th(x){var D=ai[x];return function($,we){if($=ms($),we=we==null?0:Vr(In(we),292),we&&pl($)){var Ze=(Gn($)+"e").split("e"),ot=D(Ze[0]+"e"+(+Ze[1]+we));return Ze=(Gn(ot)+"e").split("e"),+(Ze[0]+"e"+(+Ze[1]-we))}return D($)}}var Md=ps&&1/Ar(new ps([,-0]))[1]==Ft?function(x){return new ps(x)}:b_;function F0(x){return function(D){var $=Ha(D);return $==kn?Kr(D):$==cn?Nr(D):ns(D,x(D))}}function Rl(x,D,$,we,Ze,ot,Tt,zt){var Ht=D&Ke;if(!Ht&&typeof x!="function")throw new xn(P);var Si=we?we.length:0;if(Si||(D&=~(Ct|Te),we=Ze=n),Tt=Tt===n?Tt:Xn(In(Tt),0),zt=zt===n?zt:In(zt),Si-=Ze?Ze.length:0,D&Te){var Ci=we,Mi=Ze;we=Ze=n}var ln=Ht?n:N0(x),Mn=[x,D,$,we,Ze,Ci,Mi,ot,Tt,zt];if(ln&&Pc(Mn,ln),x=Mn[0],D=Mn[1],$=Mn[2],we=Mn[3],Ze=Mn[4],zt=Mn[9]=Mn[9]===n?Ht?0:x.length:Xn(Mn[9]-Si,0),!zt&&D&(gt|Mt)&&(D&=~(gt|Mt)),!D||D==Xe)var qn=Sc(x,D,$);else D==gt||D==Mt?qn=Eh(x,D,zt):(D==Ct||D==(Xe|Ct))&&!Ze.length?qn=R0(x,D,$,we):qn=Ih.apply(n,Mn);var Tr=ln?E0:Nd;return Js(Tr(qn,Mn),x,D)}function Td(x,D,$,we){return x===n||dA(x,Is[$])&&!Pr.call(we,$)?D:x}function Pd(x,D,$,we,Ze,ot){return ft(x)&&ft(D)&&(ot.set(D,x),$u(x,D,n,Pd,ot),ot.delete(D)),x}function Tm(x){return Ri(x)?n:x}function Bd(x,D,$,we,Ze,ot){var Tt=$&je,zt=x.length,Ht=D.length;if(zt!=Ht&&!(Tt&&Ht>zt))return!1;var Si=ot.get(x),Ci=ot.get(D);if(Si&&Ci)return Si==D&&Ci==x;var Mi=-1,ln=!0,Mn=$&Je?new Y:n;for(ot.set(x,D),ot.set(D,x);++Mi<zt;){var qn=x[Mi],Tr=D[Mi];if(we)var Hn=Tt?we(Tr,qn,Mi,D,x,ot):we(qn,Tr,Mi,x,D,ot);if(Hn!==n){if(Hn)continue;ln=!1;break}if(Mn){if(!_s(D,function(Fr,Wr){if(!gr(Mn,Wr)&&(qn===Fr||Ze(qn,Fr,$,we,ot)))return Mn.push(Wr)})){ln=!1;break}}else if(!(qn===Tr||Ze(qn,Tr,$,we,ot))){ln=!1;break}}return ot.delete(x),ot.delete(D),ln}function nu(x,D,$,we,Ze,ot,Tt){switch($){case B:if(x.byteLength!=D.byteLength||x.byteOffset!=D.byteOffset)return!1;x=x.buffer,D=D.buffer;case w:return!(x.byteLength!=D.byteLength||!ot(new JA(x),new JA(D)));case $i:case li:case vr:return dA(+x,+D);case Ji:return x.name==D.name&&x.message==D.message;case Kt:case fr:return x==D+"";case kn:var zt=Kr;case cn:var Ht=we&je;if(zt||(zt=Ar),x.size!=D.size&&!Ht)return!1;var Si=Tt.get(x);if(Si)return Si==D;we|=Je,Tt.set(x,D);var Ci=Bd(zt(x),zt(D),we,Ze,ot,Tt);return Tt.delete(x),Ci;case vn:if(b)return b.call(x)==b.call(D)}return!1}function Pm(x,D,$,we,Ze,ot){var Tt=$&je,zt=ru(x),Ht=zt.length,Si=ru(D),Ci=Si.length;if(Ht!=Ci&&!Tt)return!1;for(var Mi=Ht;Mi--;){var ln=zt[Mi];if(!(Tt?ln in D:Pr.call(D,ln)))return!1}var Mn=ot.get(x),qn=ot.get(D);if(Mn&&qn)return Mn==D&&qn==x;var Tr=!0;ot.set(x,D),ot.set(D,x);for(var Hn=Tt;++Mi<Ht;){ln=zt[Mi];var Fr=x[ln],Wr=D[ln];if(we)var al=Tt?we(Wr,Fr,ln,D,x,ot):we(Fr,Wr,ln,x,D,ot);if(!(al===n?Fr===Wr||Ze(Fr,Wr,$,we,ot):al)){Tr=!1;break}Hn||(Hn=ln=="constructor")}if(Tr&&!Hn){var mA=x.constructor,ol=D.constructor;mA!=ol&&"constructor"in x&&"constructor"in D&&!(typeof mA=="function"&&mA instanceof mA&&typeof ol=="function"&&ol instanceof ol)&&(Tr=!1)}return ot.delete(x),ot.delete(D),Tr}function yl(x){return Iu(Fd(x,n,Mu),x+"")}function ru(x){return Ms(x,Ss,Ph)}function O0(x){return Ms(x,Fo,rh)}var N0=ci?function(x){return ci.get(x)}:b_;function Mc(x){for(var D=x.name+"",$=io[D],we=Pr.call(io,D)?$.length:0;we--;){var Ze=$[we],ot=Ze.func;if(ot==null||ot==x)return Ze.name}return D}function ku(x){var D=Pr.call(C,"placeholder")?C:x;return D.placeholder}function On(){var x=C.iteratee||x_;return x=x===x_?tu:x,arguments.length?x(arguments[0],arguments[1]):x}function Tc(x,D){var $=x.__data__;return Fm(D)?$[typeof D=="string"?"string":"hash"]:$.map}function V0(x){for(var D=Ss(x),$=D.length;$--;){var we=D[$],Ze=x[we];D[$]=[we,Ze,H0(Ze)]}return D}function Eu(x,D){var $=Sa(x,D);return Qs($)?$:n}function Bm(x){var D=Pr.call(x,To),$=x[To];try{x[To]=n;var we=!0}catch{}var Ze=ka.call(x);return we&&(D?x[To]=$:delete x[To]),Ze}var Ph=to?function(x){return x==null?[]:(x=Hi(x),xa(to(x),function(D){return Mo.call(x,D)}))}:S_,rh=to?function(x){for(var D=[];x;)wa(D,Ph(x)),x=IA(x);return D}:S_,Ha=Gs;(ml&&Ha(new ml(new ArrayBuffer(1)))!=B||vo&&Ha(new vo)!=kn||el&&Ha(el.resolve())!=zn||ps&&Ha(new ps)!=cn||Xs&&Ha(new Xs)!=pn)&&(Ha=function(x){var D=Gs(x),$=D==Gi?x.constructor:n,we=$?Ol($):"";if(we)switch(we){case PA:return B;case BA:return kn;case Br:return zn;case no:return cn;case Ur:return pn}return D});function Dm(x,D,$){for(var we=-1,Ze=$.length;++we<Ze;){var ot=$[we],Tt=ot.size;switch(ot.type){case"drop":x+=Tt;break;case"dropRight":D-=Tt;break;case"take":D=Vr(D,x+Tt);break;case"takeRight":x=Xn(x,D-Tt);break}}return{start:x,end:D}}function Lm(x){var D=x.match(Ce);return D?D[1].split(Qe):[]}function U0(x,D,$){D=iu(D,x);for(var we=-1,Ze=D.length,ot=!1;++we<Ze;){var Tt=mr(D[we]);if(!(ot=x!=null&&$(x,Tt)))break;x=x[Tt]}return ot||++we!=Ze?ot:(Ze=x==null?0:x.length,!!Ze&&ut(Ze)&&Fl(Tt,Ze)&&(A(x)||Bu(x)))}function zm(x){var D=x.length,$=new x.constructor(D);return D&&typeof x[0]=="string"&&Pr.call(x,"index")&&($.index=x.index,$.input=x.input),$}function Dd(x){return typeof x.constructor=="function"&&!sh(x)?G(IA(x)):{}}function Bh(x,D,$){var we=x.constructor;switch(D){case w:return Ll(x);case $i:case li:return new we(+x);case B:return Ch(x,$);case U:case Z:case K:case se:case oe:case fe:case ye:case Me:case xe:return bd(x,$);case kn:return new we;case vr:case fr:return new we(x);case Kt:return km(x);case cn:return new we;case vn:return Em(x)}}function Ld(x,D){var $=D.length;if(!$)return x;var we=$-1;return D[we]=($>1?"& ":"")+D[we],D=D.join($>2?", ":" "),x.replace(ge,`{
/* [wrapped with `+D+`] */
`)}function Rm(x){return A(x)||Bu(x)||!!(dl&&x&&x[dl])}function Fl(x,D){var $=typeof x;return D=D??ui,!!D&&($=="number"||$!="symbol"&&Zt.test(x))&&x>-1&&x%1==0&&x<D}function Do(x,D,$){if(!ft($))return!1;var we=typeof D;return(we=="number"?c($)&&Fl(D,$.length):we=="string"&&D in $)?dA($[D],x):!1}function G0(x,D){if(A(x))return!1;var $=typeof x;return $=="number"||$=="symbol"||$=="boolean"||x==null||rn(x)?!0:pe.test(x)||!me.test(x)||D!=null&&x in Hi(D)}function Fm(x){var D=typeof x;return D=="string"||D=="number"||D=="symbol"||D=="boolean"?x!=="__proto__":x===null}function Q0(x){var D=Mc(x),$=C[D];if(typeof $!="function"||!(D in ne.prototype))return!1;if(x===$)return!0;var we=N0($);return!!we&&x===we[0]}function zd(x){return!!KA&&KA in x}var q0=Vs?et:C_;function sh(x){var D=x&&x.constructor,$=typeof D=="function"&&D.prototype||Is;return x===$}function H0(x){return x===x&&!ft(x)}function Z0(x,D){return function($){return $==null?!1:$[x]===D&&(D!==n||x in Hi($))}}function Om(x){var D=uh(x,function(we){return $.size===O&&$.clear(),we}),$=D.cache;return D}function Pc(x,D){var $=x[1],we=D[1],Ze=$|we,ot=Ze<(Xe|Ke|Ai),Tt=we==Ai&&$==gt||we==Ai&&$==ii&&x[7].length<=D[8]||we==(Ai|ii)&&D[7].length<=D[8]&&$==gt;if(!(ot||Tt))return x;we&Xe&&(x[2]=D[2],Ze|=$&Xe?0:xt);var zt=D[3];if(zt){var Ht=x[3];x[3]=Ht?Cd(Ht,zt,D[4]):zt,x[4]=Ht?ma(x[3],re):D[4]}return zt=D[5],zt&&(Ht=x[5],x[5]=Ht?kd(Ht,zt,D[6]):zt,x[6]=Ht?ma(x[5],re):D[6]),zt=D[7],zt&&(x[7]=zt),we&Ai&&(x[8]=x[8]==null?D[8]:Vr(x[8],D[8])),x[9]==null&&(x[9]=D[9]),x[0]=D[0],x[1]=Ze,x}function Nm(x){var D=[];if(x!=null)for(var $ in Hi(x))D.push($);return D}function Rd(x){return ka.call(x)}function Fd(x,D,$){return D=Xn(D===n?x.length-1:D,0),function(){for(var we=arguments,Ze=-1,ot=Xn(we.length-D,0),Tt=Jt(ot);++Ze<ot;)Tt[Ze]=we[D+Ze];Ze=-1;for(var zt=Jt(D+1);++Ze<D;)zt[Ze]=we[Ze];return zt[D]=$(Tt),pr(x,this,zt)}}function Od(x,D){return D.length<2?x:Ks(x,Po(D,0,-1))}function Vm(x,D){for(var $=x.length,we=Vr(D.length,$),Ze=wo(x);we--;){var ot=D[we];x[we]=Fl(ot,$)?Ze[ot]:n}return x}function Bc(x,D){if(!(D==="constructor"&&typeof x[D]=="function")&&D!="__proto__")return x[D]}var Nd=j0(E0),Dh=Ml||function(x,D){return Hr.setTimeout(x,D)},Iu=j0(xh);function Js(x,D,$){var we=D+"";return Iu(x,Ld(we,Vd(Lm(we),$)))}function j0(x){var D=0,$=0;return function(){var we=zr(),Ze=mi-(we-$);if($=we,Ze>0){if(++D>=di)return arguments[0]}else D=0;return x.apply(n,arguments)}}function Lh(x,D){var $=-1,we=x.length,Ze=we-1;for(D=D===n?we:D;++$<D;){var ot=Xu($,Ze),Tt=x[ot];x[ot]=x[$],x[$]=Tt}return x.length=D,x}var W0=Om(function(x){var D=[];return x.charCodeAt(0)===46&&D.push(""),x.replace(De,function($,we,Ze,ot){D.push(Ze?ot.replace(ue,"$1"):we||$)}),D});function mr(x){if(typeof x=="string"||rn(x))return x;var D=x+"";return D=="0"&&1/x==-Ft?"-0":D}function Ol(x){if(x!=null){try{return EA.call(x)}catch{}try{return x+""}catch{}}return""}function Vd(x,D){return zs(dn,function($){var we="_."+$[0];D&$[1]&&!Ra(x,we)&&x.push(we)}),x.sort()}function Y0(x){if(x instanceof ne)return x.clone();var D=new H(x.__wrapped__,x.__chain__);return D.__actions__=wo(x.__actions__),D.__index__=x.__index__,D.__values__=x.__values__,D}function Nl(x,D,$){($?Do(x,D,$):D===n)?D=1:D=Xn(In(D),0);var we=x==null?0:x.length;if(!we||D<1)return[];for(var Ze=0,ot=0,Tt=Jt(oA(we/D));Ze<we;)Tt[ot++]=Po(x,Ze,Ze+=D);return Tt}function ah(x){for(var D=-1,$=x==null?0:x.length,we=0,Ze=[];++D<$;){var ot=x[D];ot&&(Ze[we++]=ot)}return Ze}function Ud(){var x=arguments.length;if(!x)return[];for(var D=Jt(x-1),$=arguments[0],we=x;we--;)D[we-1]=arguments[we];return wa(A($)?wo($):[$],Gr(D,1))}var Um=wr(function(x,D){return y(x)?Rr(x,Gr(D,1,y,!0)):[]}),Gm=wr(function(x,D){var $=cA(D);return y($)&&($=n),y(x)?Rr(x,Gr(D,1,y,!0),On($,2)):[]}),Qm=wr(function(x,D){var $=cA(D);return y($)&&($=n),y(x)?Rr(x,Gr(D,1,y,!0),n,$):[]});function qm(x,D,$){var we=x==null?0:x.length;return we?(D=$||D===n?1:In(D),Po(x,D<0?0:D,we)):[]}function Hm(x,D,$){var we=x==null?0:x.length;return we?(D=$||D===n?1:In(D),D=we-D,Po(x,0,D<0?0:D)):[]}function Zm(x,D){return x&&x.length?xo(x,On(D,3),!0,!0):[]}function jm(x,D){return x&&x.length?xo(x,On(D,3),!0):[]}function Wm(x,D,$,we){var Ze=x==null?0:x.length;return Ze?($&&typeof $!="number"&&Do(x,D,$)&&($=0,we=Ze),Tl(x,D,$,we)):[]}function Gd(x,D,$){var we=x==null?0:x.length;if(!we)return-1;var Ze=$==null?0:In($);return Ze<0&&(Ze=Xn(we+Ze,0)),Dr(x,On(D,3),Ze)}function zh(x,D,$){var we=x==null?0:x.length;if(!we)return-1;var Ze=we-1;return $!==n&&(Ze=In($),Ze=$<0?Xn(we+Ze,0):Vr(Ze,we-1)),Dr(x,On(D,3),Ze,!0)}function Mu(x){var D=x==null?0:x.length;return D?Gr(x,1):[]}function Qd(x){var D=x==null?0:x.length;return D?Gr(x,Ft):[]}function $0(x,D){var $=x==null?0:x.length;return $?(D=D===n?1:In(D),Gr(x,D)):[]}function X0(x){for(var D=-1,$=x==null?0:x.length,we={};++D<$;){var Ze=x[D];we[Ze[0]]=Ze[1]}return we}function qd(x){return x&&x.length?x[0]:n}function Ym(x,D,$){var we=x==null?0:x.length;if(!we)return-1;var Ze=$==null?0:In($);return Ze<0&&(Ze=Xn(we+Ze,0)),Ka(x,D,Ze)}function $m(x){var D=x==null?0:x.length;return D?Po(x,0,-1):[]}var Hd=wr(function(x){var D=Zr(x,B0);return D.length&&D[0]===x[0]?vu(D):[]}),Zd=wr(function(x){var D=cA(x),$=Zr(x,B0);return D===cA($)?D=n:$.pop(),$.length&&$[0]===x[0]?vu($,On(D,2)):[]}),Lo=wr(function(x){var D=cA(x),$=Zr(x,B0);return D=typeof D=="function"?D:n,D&&$.pop(),$.length&&$[0]===x[0]?vu($,n,D):[]});function K0(x,D){return x==null?"":TA.call(x,D)}function cA(x){var D=x==null?0:x.length;return D?x[D-1]:n}function su(x,D,$){var we=x==null?0:x.length;if(!we)return-1;var Ze=we;return $!==n&&(Ze=In($),Ze=Ze<0?Xn(we+Ze,0):Vr(Ze,we-1)),D===D?Io(x,D,Ze):Dr(x,Rs,Ze,!0)}function Rh(x,D){return x&&x.length?xc(x,In(D)):n}var Fh=wr(Tu);function Tu(x,D){return x&&x.length&&D&&D.length?wu(x,D):x}function Dc(x,D,$){return x&&x.length&&D&&D.length?wu(x,D,On($,2)):x}function Lc(x,D,$){return x&&x.length&&D&&D.length?wu(x,D,n,$):x}var Xm=yl(function(x,D){var $=x==null?0:x.length,we=Ui(x,D);return yh(x,Zr(D,function(Ze){return Fl(Ze,$)?+Ze:Ze}).sort(Sd)),we});function jd(x,D){var $=[];if(!(x&&x.length))return $;var we=-1,Ze=[],ot=x.length;for(D=On(D,3);++we<ot;){var Tt=x[we];D(Tt,we,x)&&($.push(Tt),Ze.push(we))}return yh(x,Ze),$}function zc(x){return x==null?x:Ga.call(x)}function Km(x,D,$){var we=x==null?0:x.length;return we?($&&typeof $!="number"&&Do(x,D,$)?(D=0,$=we):(D=D==null?0:In(D),$=$===n?we:In($)),Po(x,D,$)):[]}function Wd(x,D){return wh(x,D)}function Yd(x,D,$){return bc(x,D,On($,2))}function J0(x,D){var $=x==null?0:x.length;if($){var we=wh(x,D);if(we<$&&dA(x[we],D))return we}return-1}function ef(x,D){return wh(x,D,!0)}function Jm(x,D,$){return bc(x,D,On($,2),!0)}function e_(x,D){var $=x==null?0:x.length;if($){var we=wh(x,D,!0)-1;if(dA(x[we],D))return we}return-1}function $d(x){return x&&x.length?I0(x):[]}function Oh(x,D){return x&&x.length?I0(x,On(D,2)):[]}function xl(x){var D=x==null?0:x.length;return D?Po(x,1,D):[]}function au(x,D,$){return x&&x.length?(D=$||D===n?1:In(D),Po(x,0,D<0?0:D)):[]}function Xd(x,D,$){var we=x==null?0:x.length;return we?(D=$||D===n?1:In(D),D=we-D,Po(x,D<0?0:D,we)):[]}function tf(x,D){return x&&x.length?xo(x,On(D,3),!1,!0):[]}function t_(x,D){return x&&x.length?xo(x,On(D,3)):[]}var i_=wr(function(x){return Dl(Gr(x,1,y,!0))}),Rc=wr(function(x){var D=cA(x);return y(D)&&(D=n),Dl(Gr(x,1,y,!0),On(D,2))}),nf=wr(function(x){var D=cA(x);return D=typeof D=="function"?D:n,Dl(Gr(x,1,y,!0),n,D)});function n_(x){return x&&x.length?Dl(x):[]}function rf(x,D){return x&&x.length?Dl(x,On(D,2)):[]}function sf(x,D){return D=typeof D=="function"?D:n,x&&x.length?Dl(x,n,D):[]}function ou(x){if(!(x&&x.length))return[];var D=0;return x=xa(x,function($){if(y($))return D=Xn($.length,D),!0}),eo(D,function($){return Zr(x,Ir($))})}function af(x,D){if(!(x&&x.length))return[];var $=ou(x);return D==null?$:Zr($,function(we){return pr(D,n,we)})}var Kd=wr(function(x,D){return y(x)?Rr(x,D):[]}),of=wr(function(x){return T0(xa(x,y))}),Jd=wr(function(x){var D=cA(x);return y(D)&&(D=n),T0(xa(x,y),On(D,2))}),Fc=wr(function(x){var D=cA(x);return D=typeof D=="function"?D:n,T0(xa(x,y),n,D)}),ep=wr(ou);function r_(x,D){return P0(x||[],D||[],$t)}function s_(x,D){return P0(x||[],D||[],bu)}var tp=wr(function(x){var D=x.length,$=D>1?x[D-1]:n;return $=typeof $=="function"?(x.pop(),$):n,af(x,$)});function ip(x){var D=C(x);return D.__chain__=!0,D}function a_(x,D){return D(x),x}function Oc(x,D){return D(x)}var o_=yl(function(x){var D=x.length,$=D?x[0]:0,we=this.__wrapped__,Ze=function(ot){return Ui(ot,x)};return D>1||this.__actions__.length||!(we instanceof ne)||!Fl($)?this.thru(Ze):(we=we.slice($,+$+(D?1:0)),we.__actions__.push({func:Oc,args:[Ze],thisArg:n}),new H(we,this.__chain__).thru(function(ot){return D&&!ot.length&&ot.push(n),ot}))});function Af(){return ip(this)}function Au(){return new H(this.value(),this.__chain__)}function np(){this.__values__===n&&(this.__values__=ro(this.value()));var x=this.__index__>=this.__values__.length,D=x?n:this.__values__[this.__index__++];return{done:x,value:D}}function rp(){return this}function sp(x){for(var D,$=this;$ instanceof j;){var we=Y0($);we.__index__=0,we.__values__=n,D?Ze.__wrapped__=we:D=we;var Ze=we;$=$.__wrapped__}return Ze.__wrapped__=x,D}function ap(){var x=this.__wrapped__;if(x instanceof ne){var D=x;return this.__actions__.length&&(D=new ne(this)),D=D.reverse(),D.__actions__.push({func:Oc,args:[zc],thisArg:n}),new H(D,this.__chain__)}return this.thru(zc)}function op(){return M0(this.__wrapped__,this.__actions__)}var Ap=bs(function(x,D,$){Pr.call(x,$)?++x[$]:Oi(x,$,1)});function lf(x,D,$){var we=A(x)?CA:DA;return $&&Do(x,D,$)&&(D=n),we(x,On(D,3))}function Nc(x,D){var $=A(x)?xa:Pl;return $(x,On(D,3))}var lp=Cc(Gd),uf=Cc(zh);function up(x,D){return Gr(Vc(x,D),1)}function fA(x,D){return Gr(Vc(x,D),Ft)}function Nh(x,D,$){return $=$===n?1:In($),Gr(Vc(x,D),$)}function hf(x,D){var $=A(x)?zs:Mr;return $(x,On(D,3))}function cf(x,D){var $=A(x)?js:AA;return $(x,On(D,3))}var hp=bs(function(x,D,$){Pr.call(x,$)?x[$].push(D):Oi(x,$,[D])});function cp(x,D,$,we){x=c(x)?x:OA(x),$=$&&!we?In($):0;var Ze=x.length;return $<0&&($=Xn(Ze+$,0)),Ei(x)?$<=Ze&&x.indexOf(D,$)>-1:!!Ze&&Ka(x,D,$)>-1}var fp=wr(function(x,D,$){var we=-1,Ze=typeof D=="function",ot=c(x)?Jt(x.length):[];return Mr(x,function(Tt){ot[++we]=Ze?pr(D,Tt,$):uA(Tt,D,$)}),ot}),dp=bs(function(x,D,$){Oi(x,$,D)});function Vc(x,D){var $=A(x)?Zr:_d;return $(x,On(D,3))}function pp(x,D,$,we){return x==null?[]:(A(D)||(D=D==null?[]:[D]),$=we?n:$,A($)||($=$==null?[]:[$]),k0(x,D,$))}var lu=bs(function(x,D,$){x[$?0:1].push(D)},function(){return[[],[]]});function gp(x,D,$){var we=A(x)?Fa:rr,Ze=arguments.length<3;return we(x,On(D,4),$,Ze,Mr)}function mp(x,D,$){var we=A(x)?Qo:rr,Ze=arguments.length<3;return we(x,On(D,4),$,Ze,AA)}function _p(x,D){var $=A(x)?xa:Pl;return $(x,Gh(On(D,3)))}function vp(x){var D=A(x)?pt:yo;return D(x)}function A_(x,D,$){($?Do(x,D,$):D===n)?D=1:D=In(D);var we=A(x)?bt:Ku;return we(x,D)}function l_(x){var D=A(x)?St:bm;return D(x)}function yp(x){if(x==null)return 0;if(c(x))return Ei(x)?oa(x):x.length;var D=Ha(x);return D==kn||D==cn?x.size:Yu(x).length}function oh(x,D,$){var we=A(x)?_s:Sm;return $&&Do(x,D,$)&&(D=n),we(x,On(D,3))}var xp=wr(function(x,D){if(x==null)return[];var $=D.length;return $>1&&Do(x,D[0],D[1])?D=[]:$>2&&Do(D[0],D[1],D[2])&&(D=[D[0]]),k0(x,Gr(D,1),[])}),Pu=Il||function(){return Hr.Date.now()};function wp(x,D){if(typeof D!="function")throw new xn(P);return x=In(x),function(){if(--x<1)return D.apply(this,arguments)}}function Vh(x,D,$){return D=$?n:D,D=x&&D==null?x.length:D,Rl(x,Ai,n,n,n,n,D)}function Uh(x,D){var $;if(typeof D!="function")throw new xn(P);return x=In(x),function(){return--x>0&&($=D.apply(this,arguments)),x<=1&&(D=n),$}}var Ah=wr(function(x,D,$){var we=Xe;if($.length){var Ze=ma($,ku(Ah));we|=Ct}return Rl(x,we,D,$,Ze)}),bp=wr(function(x,D,$){var we=Xe|Ke;if($.length){var Ze=ma($,ku(bp));we|=Ct}return Rl(D,we,x,$,Ze)});function Sp(x,D,$){D=$?n:D;var we=Rl(x,gt,n,n,n,n,n,D);return we.placeholder=Sp.placeholder,we}function Cp(x,D,$){D=$?n:D;var we=Rl(x,Mt,n,n,n,n,n,D);return we.placeholder=Cp.placeholder,we}function kp(x,D,$){var we,Ze,ot,Tt,zt,Ht,Si=0,Ci=!1,Mi=!1,ln=!0;if(typeof x!="function")throw new xn(P);D=ms(D)||0,ft($)&&(Ci=!!$.leading,Mi="maxWait"in $,ot=Mi?Xn(ms($.maxWait)||0,D):ot,ln="trailing"in $?!!$.trailing:ln);function Mn(Ma){var Gl=we,zu=Ze;return we=Ze=n,Si=Ma,Tt=x.apply(zu,Gl),Tt}function qn(Ma){return Si=Ma,zt=Dh(Fr,D),Ci?Mn(Ma):Tt}function Tr(Ma){var Gl=Ma-Ht,zu=Ma-Si,Rv=D-Gl;return Mi?Vr(Rv,ot-zu):Rv}function Hn(Ma){var Gl=Ma-Ht,zu=Ma-Si;return Ht===n||Gl>=D||Gl<0||Mi&&zu>=ot}function Fr(){var Ma=Pu();if(Hn(Ma))return Wr(Ma);zt=Dh(Fr,Tr(Ma))}function Wr(Ma){return zt=n,ln&&we?Mn(Ma):(we=Ze=n,Tt)}function al(){zt!==n&&Sh(zt),Si=0,we=Ht=Ze=zt=n}function mA(){return zt===n?Tt:Wr(Pu())}function ol(){var Ma=Pu(),Gl=Hn(Ma);if(we=arguments,Ze=this,Ht=Ma,Gl){if(zt===n)return qn(Ht);if(Mi)return Sh(zt),zt=Dh(Fr,D),Mn(Ht)}return zt===n&&(zt=Dh(Fr,D)),Tt}return ol.cancel=al,ol.flush=mA,ol}var lh=wr(function(x,D){return Fn(x,1,D)}),Za=wr(function(x,D,$){return Fn(x,ms(D)||0,$)});function uu(x){return Rl(x,xi)}function uh(x,D){if(typeof x!="function"||D!=null&&typeof D!="function")throw new xn(P);var $=function(){var we=arguments,Ze=D?D.apply(this,we):we[0],ot=$.cache;if(ot.has(Ze))return ot.get(Ze);var Tt=x.apply(this,we);return $.cache=ot.set(Ze,Tt)||ot,Tt};return $.cache=new(uh.Cache||h),$}uh.Cache=h;function Gh(x){if(typeof x!="function")throw new xn(P);return function(){var D=arguments;switch(D.length){case 0:return!x.call(this);case 1:return!x.call(this,D[0]);case 2:return!x.call(this,D[0],D[1]);case 3:return!x.call(this,D[0],D[1],D[2])}return!x.apply(this,D)}}function Ep(x){return Uh(2,x)}var ff=Cm(function(x,D){D=D.length==1&&A(D[0])?Zr(D[0],bn(On())):Zr(Gr(D,1),bn(On()));var $=D.length;return wr(function(we){for(var Ze=-1,ot=Vr(we.length,$);++Ze<ot;)we[Ze]=D[Ze].call(this,we[Ze]);return pr(x,this,we)})}),df=wr(function(x,D){var $=ma(D,ku(df));return Rl(x,Ct,n,D,$)}),pf=wr(function(x,D){var $=ma(D,ku(pf));return Rl(x,Te,n,D,$)}),Ip=yl(function(x,D){return Rl(x,ii,n,n,n,D)});function u_(x,D){if(typeof x!="function")throw new xn(P);return D=D===n?D:In(D),wr(x,D)}function Mp(x,D){if(typeof x!="function")throw new xn(P);return D=D==null?0:Xn(In(D),0),wr(function($){var we=$[D],Ze=_l($,0,D);return we&&wa(Ze,we),pr(x,this,Ze)})}function gf(x,D,$){var we=!0,Ze=!0;if(typeof x!="function")throw new xn(P);return ft($)&&(we="leading"in $?!!$.leading:we,Ze="trailing"in $?!!$.trailing:Ze),kp(x,D,{leading:we,maxWait:D,trailing:Ze})}function mf(x){return Vh(x,1)}function Tp(x,D){return df(D0(D),x)}function Qh(){if(!arguments.length)return[];var x=arguments[0];return A(x)?x:[x]}function _f(x){return ji(x,le)}function Pp(x,D){return D=typeof D=="function"?D:n,ji(x,le,D)}function vf(x){return ji(x,ee|le)}function Uc(x,D){return D=typeof D=="function"?D:n,ji(x,ee|le,D)}function qh(x,D){return D==null||fn(x,D,Ss(D))}function dA(x,D){return x===D||x!==x&&D!==D}var yf=nh(eu),xf=nh(function(x,D){return x>=D}),Bu=hA(function(){return arguments}())?hA:function(x){return _t(x)&&Pr.call(x,"callee")&&!Mo.call(x,"callee")},A=Jt.isArray,s=po?bn(po):jo;function c(x){return x!=null&&ut(x.length)&&!et(x)}function y(x){return _t(x)&&c(x)}function T(x){return x===!0||x===!1||_t(x)&&Gs(x)==$i}var N=MA||C_,V=Ls?bn(Ls):zA;function X(x){return _t(x)&&x.nodeType===1&&!Ri(x)}function ae(x){if(x==null)return!0;if(c(x)&&(A(x)||typeof x=="string"||typeof x.splice=="function"||N(x)||on(x)||Bu(x)))return!x.length;var D=Ha(x);if(D==kn||D==cn)return!x.size;if(sh(x))return!Yu(x).length;for(var $ in x)if(Pr.call(x,$))return!1;return!0}function _e(x,D){return Bl(x,D)}function Ee(x,D,$){$=typeof $=="function"?$:n;var we=$?$(x,D):n;return we===n?Bl(x,D,n,$):!!we}function ze(x){if(!_t(x))return!1;var D=Gs(x);return D==Ji||D==Li||typeof x.message=="string"&&typeof x.name=="string"&&!Ri(x)}function qe(x){return typeof x=="number"&&pl(x)}function et(x){if(!ft(x))return!1;var D=Gs(x);return D==wi||D==ir||D==fi||D==Cs}function tt(x){return typeof x=="number"&&x==In(x)}function ut(x){return typeof x=="number"&&x>-1&&x%1==0&&x<=ui}function ft(x){var D=typeof x;return x!=null&&(D=="object"||D=="function")}function _t(x){return x!=null&&typeof x=="object"}var Rt=aa?bn(aa):ym;function Pt(x,D){return x===D||vc(x,D,V0(D))}function Nt(x,D,$){return $=typeof $=="function"?$:n,vc(x,D,V0(D),$)}function Xt(x){return qi(x)&&x!=+x}function _i(x){if(q0(x))throw new yt(g);return Qs(x)}function Wi(x){return x===null}function hn(x){return x==null}function qi(x){return typeof x=="number"||_t(x)&&Gs(x)==vr}function Ri(x){if(!_t(x)||Gs(x)!=Gi)return!1;var D=IA(x);if(D===null)return!0;var $=Pr.call(D,"constructor")&&D.constructor;return typeof $=="function"&&$ instanceof $&&EA.call($)==_o}var Bi=za?bn(za):b0;function nn(x){return tt(x)&&x>=-ui&&x<=ui}var Fi=$a?bn($a):md;function Ei(x){return typeof x=="string"||!A(x)&&_t(x)&&Gs(x)==fr}function rn(x){return typeof x=="symbol"||_t(x)&&Gs(x)==vn}var on=rA?bn(rA):yu;function tr(x){return x===n}function cs(x){return _t(x)&&Ha(x)==pn}function gs(x){return _t(x)&&Gs(x)==f}var la=nh(yc),Wo=nh(function(x,D){return x<=D});function ro(x){if(!x)return[];if(c(x))return Ei(x)?hs(x):wo(x);if(aA&&x[aA])return rs(x[aA]());var D=Ha(x),$=D==kn?Kr:D==cn?Ar:OA;return $(x)}function ss(x){if(!x)return x===0?x:0;if(x=ms(x),x===Ft||x===-Ft){var D=x<0?-1:1;return D*Lt}return x===x?x:0}function In(x){var D=ss(x),$=D%1;return D===D?$?D-$:D:0}function Ia(x){return x?tn(In(x),0,oi):0}function ms(x){if(typeof x=="number")return x;if(rn(x))return Yt;if(ft(x)){var D=typeof x.valueOf=="function"?x.valueOf():x;x=ft(D)?D+"":D}if(typeof x!="string")return x===0?x:+x;x=$n(x);var $=It.test(x);return $||hi.test(x)?Go(x.slice(2),$?2:8):Wt.test(x)?Yt:+x}function so(x){return vl(x,Fo(x))}function ua(x){return x?tn(In(x),-ui,ui):x===0?x:0}function Gn(x){return x==null?"":Bo(x)}var ao=zl(function(x,D){if(sh(D)||c(D)){vl(D,Ss(D),x);return}for(var $ in D)Pr.call(D,$)&&$t(x,$,D[$])}),oo=zl(function(x,D){vl(D,Fo(D),x)}),_a=zl(function(x,D,$,we){vl(D,Fo(D),x,we)}),zo=zl(function(x,D,$,we){vl(D,Ss(D),x,we)}),Ro=yl(Ui);function ha(x,D){var $=G(x);return D==null?$:_n($,D)}var hr=wr(function(x,D){x=Hi(x);var $=-1,we=D.length,Ze=we>2?D[2]:n;for(Ze&&Do(D[0],D[1],Ze)&&(we=1);++$<we;)for(var ot=D[$],Tt=Fo(ot),zt=-1,Ht=Tt.length;++zt<Ht;){var Si=Tt[zt],Ci=x[Si];(Ci===n||dA(Ci,Is[Si])&&!Pr.call(x,Si))&&(x[Si]=ot[Si])}return x}),Ao=wr(function(x){return x.push(n,Pd),pr(Lp,n,x)});function ja(x,D){return Un(x,On(D,3),qa)}function ca(x,D){return Un(x,On(D,3),ws)}function RA(x,D){return x==null?x:Aa(x,On(D,3),Fo)}function il(x,D){return x==null?x:Qa(x,On(D,3),Fo)}function nl(x,D){return x&&qa(x,On(D,3))}function Vl(x,D){return x&&ws(x,On(D,3))}function FA(x){return x==null?[]:Os(x,Ss(x))}function pA(x){return x==null?[]:Os(x,Fo(x))}function lo(x,D,$){var we=x==null?n:Ks(x,D);return we===n?$:we}function Ul(x,D){return x!=null&&U0(x,D,mc)}function Du(x,D){return x!=null&&U0(x,D,_c)}var Bp=Ed(function(x,D,$){D!=null&&typeof D.toString!="function"&&(D=ka.call(D)),x[D]=$},y_(NA)),wf=Ed(function(x,D,$){D!=null&&typeof D.toString!="function"&&(D=ka.call(D)),Pr.call(x,D)?x[D].push($):x[D]=[$]},On),bf=wr(uA);function Ss(x){return c(x)?Et(x):Yu(x)}function Fo(x){return c(x)?Et(x,!0):S0(x)}function Dp(x,D){var $={};return D=On(D,3),qa(x,function(we,Ze,ot){Oi($,D(we,Ze,ot),we)}),$}function h_(x,D){var $={};return D=On(D,3),qa(x,function(we,Ze,ot){Oi($,Ze,D(we,Ze,ot))}),$}var c_=zl(function(x,D,$){$u(x,D,$)}),Lp=zl(function(x,D,$,we){$u(x,D,$,we)}),f_=yl(function(x,D){var $={};if(x==null)return $;var we=!1;D=Zr(D,function(ot){return ot=iu(ot,x),we||(we=ot.length>1),ot}),vl(x,O0(x),$),we&&($=ji($,ee|ce|le,Tm));for(var Ze=D.length;Ze--;)bh($,D[Ze]);return $});function d_(x,D){return zp(x,Gh(On(D)))}var p_=yl(function(x,D){return x==null?{}:yd(x,D)});function zp(x,D){if(x==null)return{};var $=Zr(O0(x),function(we){return[we]});return D=On(D),xu(x,$,function(we,Ze){return D(we,Ze[0])})}function g_(x,D,$){D=iu(D,x);var we=-1,Ze=D.length;for(Ze||(Ze=1,x=n);++we<Ze;){var ot=x==null?n:x[mr(D[we])];ot===n&&(we=Ze,ot=$),x=et(ot)?ot.call(x):ot}return x}function rl(x,D,$){return x==null?x:bu(x,D,$)}function Gc(x,D,$,we){return we=typeof we=="function"?we:n,x==null?x:bu(x,D,$,we)}var Sf=F0(Ss),Rp=F0(Fo);function m_(x,D,$){var we=A(x),Ze=we||N(x)||on(x);if(D=On(D,4),$==null){var ot=x&&x.constructor;Ze?$=we?new ot:[]:ft(x)?$=et(ot)?G(IA(x)):{}:$={}}return(Ze?zs:qa)(x,function(Tt,zt,Ht){return D($,Tt,zt,Ht)}),$}function __(x,D){return x==null?!0:bh(x,D)}function uo(x,D,$){return x==null?x:Ju(x,D,D0($))}function gA(x,D,$,we){return we=typeof we=="function"?we:n,x==null?x:Ju(x,D,D0($),we)}function OA(x){return x==null?[]:Oa(x,Ss(x))}function sl(x){return x==null?[]:Oa(x,Fo(x))}function Lu(x,D,$){return $===n&&($=D,D=n),$!==n&&($=ms($),$=$===$?$:0),D!==n&&(D=ms(D),D=D===D?D:0),tn(ms(x),D,$)}function wl(x,D,$){return D=ss(D),$===n?($=D,D=0):$=ss($),x=ms(x),w0(x,D,$)}function a5(x,D,$){if($&&typeof $!="boolean"&&Do(x,D,$)&&(D=$=n),$===n&&(typeof D=="boolean"?($=D,D=n):typeof x=="boolean"&&($=x,x=n)),x===n&&D===n?(x=0,D=1):(x=ss(x),D===n?(D=x,x=0):D=ss(D)),x>D){var we=x;x=D,D=we}if($||x%1||D%1){var Ze=Sn();return Vr(x+Ze*(D-x+fo("1e-"+((Ze+"").length-1))),D)}return Xu(x,D)}var o5=Su(function(x,D,$){return D=D.toLowerCase(),x+($?Pv(D):D)});function Pv(x){return v_(Gn(x).toLowerCase())}function Bv(x){return x=Gn(x),x&&x.replace(ei,Lr).replace(En,"")}function A5(x,D,$){x=Gn(x),D=Bo(D);var we=x.length;$=$===n?we:tn(In($),0,we);var Ze=$;return $-=D.length,$>=0&&x.slice($,Ze)==D}function l5(x){return x=Gn(x),x&&Ae.test(x)?x.replace(Fe,vs):x}function u5(x){return x=Gn(x),x&&Pe.test(x)?x.replace(Le,"\\$&"):x}var h5=Su(function(x,D,$){return x+($?"-":"")+D.toLowerCase()}),c5=Su(function(x,D,$){return x+($?" ":"")+D.toLowerCase()}),f5=th("toLowerCase");function d5(x,D,$){x=Gn(x),D=In(D);var we=D?oa(x):0;if(!D||we>=D)return x;var Ze=(D-we)/2;return Ec(Fs(Ze),$)+x+Ec(oA(Ze),$)}function p5(x,D,$){x=Gn(x),D=In(D);var we=D?oa(x):0;return D&&we<D?x+Ec(D-we,$):x}function g5(x,D,$){x=Gn(x),D=In(D);var we=D?oa(x):0;return D&&we<D?Ec(D-we,$)+x:x}function m5(x,D,$){return $||D==null?D=0:D&&(D=+D),Us(Gn(x).replace(Ve,""),D||0)}function _5(x,D,$){return($?Do(x,D,$):D===n)?D=1:D=In(D),wc(Gn(x),D)}function v5(){var x=arguments,D=Gn(x[0]);return x.length<3?D:D.replace(x[1],x[2])}var y5=Su(function(x,D,$){return x+($?"_":"")+D.toLowerCase()});function x5(x,D,$){return $&&typeof $!="number"&&Do(x,D,$)&&(D=$=n),$=$===n?oi:$>>>0,$?(x=Gn(x),x&&(typeof D=="string"||D!=null&&!Bi(D))&&(D=Bo(D),!D&&Eo(x))?_l(hs(x),0,$):x.split(D,$)):[]}var w5=Su(function(x,D,$){return x+($?" ":"")+v_(D)});function b5(x,D,$){return x=Gn(x),$=$==null?0:tn(In($),0,x.length),D=Bo(D),x.slice($,$+D.length)==D}function S5(x,D,$){var we=C.templateSettings;$&&Do(x,D,$)&&(D=n),x=Gn(x),D=_a({},D,we,Td);var Ze=_a({},D.imports,we.imports,Td),ot=Ss(Ze),Tt=Oa(Ze,ot),zt,Ht,Si=0,Ci=D.interpolate||Ti,Mi="__p += '",ln=mn((D.escape||Ti).source+"|"+Ci.source+"|"+(Ci===he?Dt:Ti).source+"|"+(D.evaluate||Ti).source+"|$","g"),Mn="//# sourceURL="+(Pr.call(D,"sourceURL")?(D.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Da+"]")+`
`;x.replace(ln,function(Hn,Fr,Wr,al,mA,ol){return Wr||(Wr=al),Mi+=x.slice(Si,ol).replace(Yi,Ho),Fr&&(zt=!0,Mi+=`' +
__e(`+Fr+`) +
'`),mA&&(Ht=!0,Mi+=`';
`+mA+`;
__p += '`),Wr&&(Mi+=`' +
((__t = (`+Wr+`)) == null ? '' : __t) +
'`),Si=ol+Hn.length,Hn}),Mi+=`';
`;var qn=Pr.call(D,"variable")&&D.variable;if(!qn)Mi=`with (obj) {
`+Mi+`
}
`;else if(i.test(qn))throw new yt(u);Mi=(Ht?Mi.replace(ke,""):Mi).replace(be,"$1").replace(Ne,"$1;"),Mi="function("+(qn||"obj")+`) {
`+(qn?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(zt?", __e = _.escape":"")+(Ht?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Mi+`return __p
}`;var Tr=Lv(function(){return Gt(ot,Mn+"return "+Mi).apply(n,Tt)});if(Tr.source=Mi,ze(Tr))throw Tr;return Tr}function C5(x){return Gn(x).toLowerCase()}function k5(x){return Gn(x).toUpperCase()}function E5(x,D,$){if(x=Gn(x),x&&($||D===n))return $n(x);if(!x||!(D=Bo(D)))return x;var we=hs(x),Ze=hs(D),ot=ba(we,Ze),Tt=go(we,Ze)+1;return _l(we,ot,Tt).join("")}function I5(x,D,$){if(x=Gn(x),x&&($||D===n))return x.slice(0,ys(x)+1);if(!x||!(D=Bo(D)))return x;var we=hs(x),Ze=go(we,hs(D))+1;return _l(we,0,Ze).join("")}function M5(x,D,$){if(x=Gn(x),x&&($||D===n))return x.replace(Ve,"");if(!x||!(D=Bo(D)))return x;var we=hs(x),Ze=ba(we,hs(D));return _l(we,Ze).join("")}function T5(x,D){var $=gi,we=qt;if(ft(D)){var Ze="separator"in D?D.separator:Ze;$="length"in D?In(D.length):$,we="omission"in D?Bo(D.omission):we}x=Gn(x);var ot=x.length;if(Eo(x)){var Tt=hs(x);ot=Tt.length}if($>=ot)return x;var zt=$-oa(we);if(zt<1)return we;var Ht=Tt?_l(Tt,0,zt).join(""):x.slice(0,zt);if(Ze===n)return Ht+we;if(Tt&&(zt+=Ht.length-zt),Bi(Ze)){if(x.slice(zt).search(Ze)){var Si,Ci=Ht;for(Ze.global||(Ze=mn(Ze.source,Gn(Vt.exec(Ze))+"g")),Ze.lastIndex=0;Si=Ze.exec(Ci);)var Mi=Si.index;Ht=Ht.slice(0,Mi===n?zt:Mi)}}else if(x.indexOf(Bo(Ze),zt)!=zt){var ln=Ht.lastIndexOf(Ze);ln>-1&&(Ht=Ht.slice(0,ln))}return Ht+we}function P5(x){return x=Gn(x),x&&de.test(x)?x.replace(Re,Ca):x}var B5=Su(function(x,D,$){return x+($?" ":"")+D.toUpperCase()}),v_=th("toUpperCase");function Dv(x,D,$){return x=Gn(x),D=$?n:D,D===n?Ys(x)?XA(x):kA(x):x.match(D)||[]}var Lv=wr(function(x,D){try{return pr(x,n,D)}catch($){return ze($)?$:new yt($)}}),D5=yl(function(x,D){return zs(D,function($){$=mr($),Oi(x,$,Ah(x[$],x))}),x});function L5(x){var D=x==null?0:x.length,$=On();return x=D?Zr(x,function(we){if(typeof we[1]!="function")throw new xn(P);return[$(we[0]),we[1]]}):[],wr(function(we){for(var Ze=-1;++Ze<D;){var ot=x[Ze];if(pr(ot[0],this,we))return pr(ot[1],this,we)}})}function z5(x){return Qn(ji(x,ee))}function y_(x){return function(){return x}}function R5(x,D){return x==null||x!==x?D:x}var F5=kc(),O5=kc(!0);function NA(x){return x}function x_(x){return tu(typeof x=="function"?x:ji(x,ee))}function N5(x){return C0(ji(x,ee))}function V5(x,D){return vd(x,ji(D,ee))}var U5=wr(function(x,D){return function($){return uA($,x,D)}}),G5=wr(function(x,D){return function($){return uA(x,$,D)}});function w_(x,D,$){var we=Ss(D),Ze=Os(D,we);$==null&&!(ft(D)&&(Ze.length||!we.length))&&($=D,D=x,x=this,Ze=Os(D,Ss(D)));var ot=!(ft($)&&"chain"in $)||!!$.chain,Tt=et(x);return zs(Ze,function(zt){var Ht=D[zt];x[zt]=Ht,Tt&&(x.prototype[zt]=function(){var Si=this.__chain__;if(ot||Si){var Ci=x(this.__wrapped__),Mi=Ci.__actions__=wo(this.__actions__);return Mi.push({func:Ht,args:arguments,thisArg:x}),Ci.__chain__=Si,Ci}return Ht.apply(x,wa([this.value()],arguments))})}),x}function Q5(){return Hr._===this&&(Hr._=Zi),this}function b_(){}function q5(x){return x=In(x),wr(function(D){return xc(D,x)})}var H5=Cu(Zr),Z5=Cu(CA),j5=Cu(_s);function zv(x){return G0(x)?Ir(mr(x)):wm(x)}function W5(x){return function(D){return x==null?n:Ks(x,D)}}var Y5=Id(),$5=Id(!0);function S_(){return[]}function C_(){return!1}function X5(){return{}}function K5(){return""}function J5(){return!0}function e8(x,D){if(x=In(x),x<1||x>ui)return[];var $=oi,we=Vr(x,oi);D=On(D),x-=oi;for(var Ze=eo(we,D);++$<x;)D($);return Ze}function t8(x){return A(x)?Zr(x,mr):rn(x)?[x]:wo(W0(Gn(x)))}function i8(x){var D=++Jl;return Gn(x)+D}var n8=Mh(function(x,D){return x+D},0),r8=Th("ceil"),s8=Mh(function(x,D){return x/D},1),a8=Th("floor");function o8(x){return x&&x.length?lA(x,NA,eu):n}function A8(x,D){return x&&x.length?lA(x,On(D,2),eu):n}function l8(x){return Er(x,NA)}function u8(x,D){return Er(x,On(D,2))}function h8(x){return x&&x.length?lA(x,NA,yc):n}function c8(x,D){return x&&x.length?lA(x,On(D,2),yc):n}var f8=Mh(function(x,D){return x*D},1),d8=Th("round"),p8=Mh(function(x,D){return x-D},0);function g8(x){return x&&x.length?Ja(x,NA):0}function m8(x,D){return x&&x.length?Ja(x,On(D,2)):0}return C.after=wp,C.ary=Vh,C.assign=ao,C.assignIn=oo,C.assignInWith=_a,C.assignWith=zo,C.at=Ro,C.before=Uh,C.bind=Ah,C.bindAll=D5,C.bindKey=bp,C.castArray=Qh,C.chain=ip,C.chunk=Nl,C.compact=ah,C.concat=Ud,C.cond=L5,C.conforms=z5,C.constant=y_,C.countBy=Ap,C.create=ha,C.curry=Sp,C.curryRight=Cp,C.debounce=kp,C.defaults=hr,C.defaultsDeep=Ao,C.defer=lh,C.delay=Za,C.difference=Um,C.differenceBy=Gm,C.differenceWith=Qm,C.drop=qm,C.dropRight=Hm,C.dropRightWhile=Zm,C.dropWhile=jm,C.fill=Wm,C.filter=Nc,C.flatMap=up,C.flatMapDeep=fA,C.flatMapDepth=Nh,C.flatten=Mu,C.flattenDeep=Qd,C.flattenDepth=$0,C.flip=uu,C.flow=F5,C.flowRight=O5,C.fromPairs=X0,C.functions=FA,C.functionsIn=pA,C.groupBy=hp,C.initial=$m,C.intersection=Hd,C.intersectionBy=Zd,C.intersectionWith=Lo,C.invert=Bp,C.invertBy=wf,C.invokeMap=fp,C.iteratee=x_,C.keyBy=dp,C.keys=Ss,C.keysIn=Fo,C.map=Vc,C.mapKeys=Dp,C.mapValues=h_,C.matches=N5,C.matchesProperty=V5,C.memoize=uh,C.merge=c_,C.mergeWith=Lp,C.method=U5,C.methodOf=G5,C.mixin=w_,C.negate=Gh,C.nthArg=q5,C.omit=f_,C.omitBy=d_,C.once=Ep,C.orderBy=pp,C.over=H5,C.overArgs=ff,C.overEvery=Z5,C.overSome=j5,C.partial=df,C.partialRight=pf,C.partition=lu,C.pick=p_,C.pickBy=zp,C.property=zv,C.propertyOf=W5,C.pull=Fh,C.pullAll=Tu,C.pullAllBy=Dc,C.pullAllWith=Lc,C.pullAt=Xm,C.range=Y5,C.rangeRight=$5,C.rearg=Ip,C.reject=_p,C.remove=jd,C.rest=u_,C.reverse=zc,C.sampleSize=A_,C.set=rl,C.setWith=Gc,C.shuffle=l_,C.slice=Km,C.sortBy=xp,C.sortedUniq=$d,C.sortedUniqBy=Oh,C.split=x5,C.spread=Mp,C.tail=xl,C.take=au,C.takeRight=Xd,C.takeRightWhile=tf,C.takeWhile=t_,C.tap=a_,C.throttle=gf,C.thru=Oc,C.toArray=ro,C.toPairs=Sf,C.toPairsIn=Rp,C.toPath=t8,C.toPlainObject=so,C.transform=m_,C.unary=mf,C.union=i_,C.unionBy=Rc,C.unionWith=nf,C.uniq=n_,C.uniqBy=rf,C.uniqWith=sf,C.unset=__,C.unzip=ou,C.unzipWith=af,C.update=uo,C.updateWith=gA,C.values=OA,C.valuesIn=sl,C.without=Kd,C.words=Dv,C.wrap=Tp,C.xor=of,C.xorBy=Jd,C.xorWith=Fc,C.zip=ep,C.zipObject=r_,C.zipObjectDeep=s_,C.zipWith=tp,C.entries=Sf,C.entriesIn=Rp,C.extend=oo,C.extendWith=_a,w_(C,C),C.add=n8,C.attempt=Lv,C.camelCase=o5,C.capitalize=Pv,C.ceil=r8,C.clamp=Lu,C.clone=_f,C.cloneDeep=vf,C.cloneDeepWith=Uc,C.cloneWith=Pp,C.conformsTo=qh,C.deburr=Bv,C.defaultTo=R5,C.divide=s8,C.endsWith=A5,C.eq=dA,C.escape=l5,C.escapeRegExp=u5,C.every=lf,C.find=lp,C.findIndex=Gd,C.findKey=ja,C.findLast=uf,C.findLastIndex=zh,C.findLastKey=ca,C.floor=a8,C.forEach=hf,C.forEachRight=cf,C.forIn=RA,C.forInRight=il,C.forOwn=nl,C.forOwnRight=Vl,C.get=lo,C.gt=yf,C.gte=xf,C.has=Ul,C.hasIn=Du,C.head=qd,C.identity=NA,C.includes=cp,C.indexOf=Ym,C.inRange=wl,C.invoke=bf,C.isArguments=Bu,C.isArray=A,C.isArrayBuffer=s,C.isArrayLike=c,C.isArrayLikeObject=y,C.isBoolean=T,C.isBuffer=N,C.isDate=V,C.isElement=X,C.isEmpty=ae,C.isEqual=_e,C.isEqualWith=Ee,C.isError=ze,C.isFinite=qe,C.isFunction=et,C.isInteger=tt,C.isLength=ut,C.isMap=Rt,C.isMatch=Pt,C.isMatchWith=Nt,C.isNaN=Xt,C.isNative=_i,C.isNil=hn,C.isNull=Wi,C.isNumber=qi,C.isObject=ft,C.isObjectLike=_t,C.isPlainObject=Ri,C.isRegExp=Bi,C.isSafeInteger=nn,C.isSet=Fi,C.isString=Ei,C.isSymbol=rn,C.isTypedArray=on,C.isUndefined=tr,C.isWeakMap=cs,C.isWeakSet=gs,C.join=K0,C.kebabCase=h5,C.last=cA,C.lastIndexOf=su,C.lowerCase=c5,C.lowerFirst=f5,C.lt=la,C.lte=Wo,C.max=o8,C.maxBy=A8,C.mean=l8,C.meanBy=u8,C.min=h8,C.minBy=c8,C.stubArray=S_,C.stubFalse=C_,C.stubObject=X5,C.stubString=K5,C.stubTrue=J5,C.multiply=f8,C.nth=Rh,C.noConflict=Q5,C.noop=b_,C.now=Pu,C.pad=d5,C.padEnd=p5,C.padStart=g5,C.parseInt=m5,C.random=a5,C.reduce=gp,C.reduceRight=mp,C.repeat=_5,C.replace=v5,C.result=g_,C.round=d8,C.runInContext=Ot,C.sample=vp,C.size=yp,C.snakeCase=y5,C.some=oh,C.sortedIndex=Wd,C.sortedIndexBy=Yd,C.sortedIndexOf=J0,C.sortedLastIndex=ef,C.sortedLastIndexBy=Jm,C.sortedLastIndexOf=e_,C.startCase=w5,C.startsWith=b5,C.subtract=p8,C.sum=g8,C.sumBy=m8,C.template=S5,C.times=e8,C.toFinite=ss,C.toInteger=In,C.toLength=Ia,C.toLower=C5,C.toNumber=ms,C.toSafeInteger=ua,C.toString=Gn,C.toUpper=k5,C.trim=E5,C.trimEnd=I5,C.trimStart=M5,C.truncate=T5,C.unescape=P5,C.uniqueId=i8,C.upperCase=B5,C.upperFirst=v_,C.each=hf,C.eachRight=cf,C.first=qd,w_(C,function(){var x={};return qa(C,function(D,$){Pr.call(C.prototype,$)||(x[$]=D)}),x}(),{chain:!1}),C.VERSION=l,zs(["bind","bindKey","curry","curryRight","partial","partialRight"],function(x){C[x].placeholder=C}),zs(["drop","take"],function(x,D){ne.prototype[x]=function($){$=$===n?1:Xn(In($),0);var we=this.__filtered__&&!D?new ne(this):this.clone();return we.__filtered__?we.__takeCount__=Vr($,we.__takeCount__):we.__views__.push({size:Vr($,oi),type:x+(we.__dir__<0?"Right":"")}),we},ne.prototype[x+"Right"]=function($){return this.reverse()[x]($).reverse()}}),zs(["filter","map","takeWhile"],function(x,D){var $=D+1,we=$==vt||$==rt;ne.prototype[x]=function(Ze){var ot=this.clone();return ot.__iteratees__.push({iteratee:On(Ze,3),type:$}),ot.__filtered__=ot.__filtered__||we,ot}}),zs(["head","last"],function(x,D){var $="take"+(D?"Right":"");ne.prototype[x]=function(){return this[$](1).value()[0]}}),zs(["initial","tail"],function(x,D){var $="drop"+(D?"":"Right");ne.prototype[x]=function(){return this.__filtered__?new ne(this):this[$](1)}}),ne.prototype.compact=function(){return this.filter(NA)},ne.prototype.find=function(x){return this.filter(x).head()},ne.prototype.findLast=function(x){return this.reverse().find(x)},ne.prototype.invokeMap=wr(function(x,D){return typeof x=="function"?new ne(this):this.map(function($){return uA($,x,D)})}),ne.prototype.reject=function(x){return this.filter(Gh(On(x)))},ne.prototype.slice=function(x,D){x=In(x);var $=this;return $.__filtered__&&(x>0||D<0)?new ne($):(x<0?$=$.takeRight(-x):x&&($=$.drop(x)),D!==n&&(D=In(D),$=D<0?$.dropRight(-D):$.take(D-x)),$)},ne.prototype.takeRightWhile=function(x){return this.reverse().takeWhile(x).reverse()},ne.prototype.toArray=function(){return this.take(oi)},qa(ne.prototype,function(x,D){var $=/^(?:filter|find|map|reject)|While$/.test(D),we=/^(?:head|last)$/.test(D),Ze=C[we?"take"+(D=="last"?"Right":""):D],ot=we||/^find/.test(D);Ze&&(C.prototype[D]=function(){var Tt=this.__wrapped__,zt=we?[1]:arguments,Ht=Tt instanceof ne,Si=zt[0],Ci=Ht||A(Tt),Mi=function(Fr){var Wr=Ze.apply(C,wa([Fr],zt));return we&&ln?Wr[0]:Wr};Ci&&$&&typeof Si=="function"&&Si.length!=1&&(Ht=Ci=!1);var ln=this.__chain__,Mn=!!this.__actions__.length,qn=ot&&!ln,Tr=Ht&&!Mn;if(!ot&&Ci){Tt=Tr?Tt:new ne(this);var Hn=x.apply(Tt,zt);return Hn.__actions__.push({func:Oc,args:[Mi],thisArg:n}),new H(Hn,ln)}return qn&&Tr?x.apply(this,zt):(Hn=this.thru(Mi),qn?we?Hn.value()[0]:Hn.value():Hn)})}),zs(["pop","push","shift","sort","splice","unshift"],function(x){var D=jr[x],$=/^(?:push|sort|unshift)$/.test(x)?"tap":"thru",we=/^(?:pop|shift)$/.test(x);C.prototype[x]=function(){var Ze=arguments;if(we&&!this.__chain__){var ot=this.value();return D.apply(A(ot)?ot:[],Ze)}return this[$](function(Tt){return D.apply(A(Tt)?Tt:[],Ze)})}}),qa(ne.prototype,function(x,D){var $=C[D];if($){var we=$.name+"";Pr.call(io,we)||(io[we]=[]),io[we].push({name:D,func:$})}}),io[Ih(n,Ke).name]=[{name:"wrapper",func:n}],ne.prototype.clone=Se,ne.prototype.reverse=Ge,ne.prototype.value=$e,C.prototype.at=o_,C.prototype.chain=Af,C.prototype.commit=Au,C.prototype.next=np,C.prototype.plant=sp,C.prototype.reverse=ap,C.prototype.toJSON=C.prototype.valueOf=C.prototype.value=op,C.prototype.first=C.prototype.head,aA&&(C.prototype[aA]=rp),C},$s=mo();pa?((pa.exports=$s)._=$s,ko._=$s):Hr._=$s}).call(hh)})(Ng,Ng.exports);var f9=Ng.exports;function m4(e,t,n){let l=[e],m=[],g,P,u;for(;e=l.pop();)if(!(n&&n(e))&&(m.push(e),g=e.children,g))for(P=0,u=g.length;P<u;++P)l.push(g[P]);for(;e=m.pop();)t(e);return e}function d9(e,t,n){let l=[e],m,g;for(;e=l.pop();)if(!(n&&n(e))&&(t(e),m=e.children,m))for(g=m.length-1;g>=0;--g)l.push(m[g]);return e}function p9(e,t,n){let l,m=[e],g,P,u;do for(l=m.reverse(),m=[];e=l.pop();)if(!(n&&n(e))&&(t(e),g=e.children,g))for(P=0,u=g.length;P<u;++P)m.push(g[P]);while(m.length);return e}function g9(e){return m4(e,function(l){l.children&&(l.children[0].data.multiway_parent=l,l.children[1].data.multiway_parent=l.parent)}),f9.map(e.descendants(),l=>{let m=l.data.multiway_parent,g="unknown";return m&&(g=m.data.name),{source:l.data.multiway_parent,target:l,name:g}})}function m9(){let e=this.branch_length;return e?A2(this.nodes.descendants(),function(t){return!t.parent||!oc(e(t))}):!1}function _9(){let e=this.branch_length;return wA(this.nodes.descendants(),t=>e(t))}function c2(e,t){let n=e.data;if("attribute"in n&&n.attribute&&n.attribute.length){t>0&&(n.attribute=String(t));let l=parseFloat(n.attribute);if(!isNaN(l))return Math.max(0,l)}if(n.name=="root")return 0;console.warn("Undefined branch length at "+n.name+"!")}function v9(e){return arguments.length?(this.branch_length_accessor=e||c2,this):this.branch_length_accessor}function y9(e){let t=this.branch_length,n=wA(this.nodes.descendants(),function(P){return t(P)?t(P):null});const l=fv(n),m=r4(n);let g=function(P){return(P-m)/(l-m)};return YA(this.nodes.descendants(),P=>{let u=t(P);u&&t(P,g(u))}),this}function x9(e){let t=this.branch_length;return YA(this.nodes.descendants(),n=>{let l=t(n);l&&t(n,e(l))}),this}function w9(e){return arguments.length?(this.nodeLabel=e,this):this.nodeLabel}function b9(e,t){if(!(e instanceof Kh))throw new Error("node needs to be an instance of a d3.hierarchy node!");let n=this.nodes.copy();if(t=t!==void 0?t:.5,e.parent){var l=Kh({name:"new_root"});l.children=[e.copy()],l.data.__mapped_bl=void 0,n.each(O=>{O.data.__mapped_bl=this.branch_length_accessor(O)}),this.setBranchLength(O=>O.data.__mapped_bl);let g=e,P=e.parent,u=void 0,Q=e.data.__mapped_bl===void 0?void 0:e.data.__mapped_bl*t;u=P.data.__mapped_bl,P.data.__mapped_bl=e.data.__mapped_bl===void 0?void 0:e.data.__mapped_bl-Q,e.data.__mapped_bl=Q;var m;if(P.parent){for(l.children.push(P);P.parent;){m=P.children.indexOf(g),P.parent.parent?P.children.splice(m,1,P.parent):P.children.splice(m,1);let O=P.parent.data.__mapped_bl;O!==void 0&&(P.parent.data.__mapped_bl=u,u=O),g=P,P=P.parent}m=P.children.indexOf(g),P.children.splice(m,1)}else m=P.children.indexOf(g),P.children.splice(m,1),u=P.data.__mapped_bl,g=l;if(P.children.length==1)u&&(P.children[0].data.__mapped_bl+=u),g.children=g.children.concat(P.children);else{let O=new Kh({name:"__reroot_top_clade",__mapped_bl:u});Xf(l.children[0],e),O.data.__mapped_bl=u,O.children=P.children.map(function(re){return re.parent=O,re}),O.parent=g,g.children.push(O)}}if(this.update(l),this.traverse_and_compute(g=>{YA(g.children,P=>{P.parent=g})},"pre-order"),!oc(this.display)){let g=this.display.options;qs(this.display.container).select("svg").remove();let P=this.display.selection_attribute_name;delete this.display;let u=this.render(g);u.selectionLabel(P),u.update(),qs(u.container).node().appendChild(u.show()),qs(this.display.container).dispatch("reroot")}return this}function S9(e,t){if(e=e||"attribute",t=t||"y_scaled","parent"in this){let n=parseFloat(this[e]);this[t]=this.parent[t]+(isNaN(n)?.1:n)}else this[t]=0;return this[t]}function C9(e){let t=[];for(;e;)t.push(e),e=e.parent;return t}const k9=Object.freeze(Object.defineProperty({__proto__:null,pathToRoot:C9,reroot:b9,rootpath:S9},Symbol.toStringTag,{value:"Module"}));function Hu(e){return e.y}function ec(e){return e.x}function Vg(e,t,n){return{x:n+e*Math.sin(t),y:n+e*Math.cos(t)}}function Tx(e,t,n,l,m,g){e.radius=t*(e.radius+n),e.angle=2*Math.PI*e.x*m[0]/g[0];let P=Vg(e.radius,e.angle,l);return e.x=P.x,e.y=P.y,e}function Px(e,t){var n=Vg(t[0].radius,t[0].angle,e),l=Vg(t[0].radius,t[1].angle,e);return"M "+Hu(n)+","+ec(n)+" A "+t[0].radius+","+t[0].radius+" 0,0, "+(t[1].angle>t[0].angle?1:0)+" "+Hu(l)+","+ec(l)+" L "+Hu(t[1])+","+ec(t[1])}function E9(e,t,n){var l=Vg(e.target.radius+(e.source.radius-e.target.radius)*t,e.target.angle,n);return{x:Hu(l),y:ec(l)}}var Bx=i2().x(function(e){return Hu(e)}).y(function(e){return ec(e)}).curve(gB);function Dx(e,t){return{x:Hu(e.target)+(Hu(e.source)-Hu(e.target))*t,y:ec(e.target)}}function gv(e){return e.tag||!1}function mv(e,t){return e[t]||!1}const Ps={"tree-container":"phylotree-container","tree-scale-bar":"tree-scale-bar",node:"node","internal-node":"internal-node","tagged-node":"node-tagged","selected-node":"node-selected","collapsed-node":"node-collapsed","root-node":"root-node",branch:"branch","selected-branch":"branch-selected","tagged-branch":"branch-tagged","tree-selection-brush":"tree-selection-brush","branch-tracer":"branch-tracer",clade:"clade",node_text:"phylotree-node-text"};function I9(e){return arguments.length?(this.options["internal-names"]=e,this):this.options["internal-names"]}function M9(e){return arguments.length?(this.options["is-radial"]=e,this):this.options["is-radial"]}function T9(e){return arguments.length?(this.options["align-tips"]=e,this):this.options["align-tips"]}function P9(e){return this.options["draw-size-bubbles"]&&this.options["bubble-styler"]?this.options["bubble-styler"](e):this.options["draw-size-bubbles"]?this.relative_nodeSpan(e)*this.scales[0]*.25:0}function B9(e){return this.options["is-radial"]?[(e.text_align=="end"?-1:1)*(this.radius_pad_for_bubbles-e.radius),0]:this.options["right-to-left"]?[this.right_most_leaf-e.screen_x,0]:[this.right_most_leaf-e.screen_x,0]}function D9(e){return arguments.length?(this.layout_listener_handler=e,this):this.layout_listener_handler}function L9(e){return arguments.length?(this.selection_attribute_name=e,this.syncEdgeLabels(),this):this.selection_attribute_name}function sg(e){return arguments.length?(typeof e=="string"&&e=="equal"?sg=function(t){return 1}:sg=e,this):sg}var f2={all:e=>!0,none:e=>!1,"all-leaf-nodes":e=>ia(e.target),"all-internal-nodes":e=>!ia(e.target)};function z9(e){return e?(this.selectionCallback=e,this):this.selectionCallback}const R9=Object.freeze(Object.defineProperty({__proto__:null,alignTips:T9,css_classes:Ps,internalNames:I9,layoutHandler:D9,nodeBubbleSize:P9,get nodeSpan(){return sg},predefined_selecters:f2,radial:M9,selectionCallback:z9,selectionLabel:L9,shiftTip:B9},Symbol.toStringTag,{value:"Module"}));function F9(e){return this.radial()?[(e.text_align=="end"?-1:1)*(this.radius_pad_for_bubbles-e.radius),0]:this.options["right-to-left"]?[this.right_most_leaf-e.screen_x,0]:[this.right_most_leaf-e.screen_x,0]}function O9(e,t,n){e=qs(e);var l=ia(t);l&&(e=e.attr("data-node-name",t.data.name));var m=e.selectAll("text").data([t]),g=e.selectAll("line");if(l||this.showInternalName(t)&&!Ac(t))if(m=m.enter().append("text").classed(this.css_classes.node_text,!0).merge(m).on("click",u=>{this.handle_node_click(t,u)}).attr("dy",u=>this.shown_font_size*.33).text(u=>this.options["show-labels"]?this._nodeLabel(u):"").style("font-size",u=>this.ensure_size_is_in_px(this.shown_font_size)),this.radial()?m=m.attr("transform",u=>this.d3PhylotreeSvgRotate(u.text_angle)+this.d3PhylotreeSvgTranslate(this.alignTips()?this.shiftTip(u):null)).attr("text-anchor",u=>u.text_align):m=m.attr("text-anchor","start").attr("transform",u=>this.options.layout=="right-to-left"?this.d3PhylotreeSvgTranslate([-20,0]):this.d3PhylotreeSvgTranslate(this.alignTips()?this.shiftTip(u):null)),this.alignTips()?(g=g.data([t]),n?g=g.enter().append("line").classed(this.css_classes["branch-tracer"],!0).merge(g).attr("x1",u=>(u.text_align=="end"?-1:1)*this.nodeBubbleSize(t)).attr("x2",0).attr("y1",0).attr("y2",0).attr("x2",u=>this.options.layout=="right-to-left"?u.screen_x:this.shiftTip(u)[0]).attr("transform",u=>this.d3PhylotreeSvgRotate(u.text_angle)).attr("x2",u=>this.options.layout=="right-to-left"?u.screen_x:this.shiftTip(u)[0]).attr("transform",u=>this.d3PhylotreeSvgRotate(u.text_angle)):(g=g.enter().append("line").classed(this.css_classes["branch-tracer"],!0).merge(g).attr("x1",u=>(u.text_align=="end"?-1:1)*this.nodeBubbleSize(t)).attr("y2",0).attr("y1",0).attr("x2",u=>this.shiftTip(u)[0]),g.attr("transform",u=>this.d3PhylotreeSvgRotate(u.text_angle)))):g.remove(),this.options["draw-size-bubbles"]){var P=this.nodeBubbleSize(t);e.selectAll("circle").data([P]).enter().append("circle").attr("r",function(Q){return Q}),this.shown_font_size>=5&&(m=m.attr("dx",Q=>(Q.text_align=="end"?-1:1)*((this.alignTips()?0:P)+this.shown_font_size*.33)))}else this.shown_font_size>=5&&(m=m.attr("dx",u=>(u.text_align=="end"?-1:1)*this.shown_font_size*.33));if(!l){let u=e.selectAll("circle").data([t]).enter().append("circle"),Q=this.node_circle_size()(t);Q>0?u.merge(u).attr("r",O=>Math.min(this.shown_font_size*.75,Q)).on("click",O=>{this.handle_node_click(t,O)}):u.remove()}return this.node_styler&&this.node_styler(e,t),t}function N9(){let e=this.phylotree.nodes.descendants();for(let t=e.length-1;t>=0;t-=1)ia(e[t])?e[t].hasHiddenNodes=e[t].notshown:e[t].hasHiddenNodes=e[t].children.reduce(function(n,l){return l.notshown||n},!1);return this}function V9(e){const t=this.internalNames();return t?typeof t=="function"?t(e):t:!1}function U9(e){return arguments.length?(typeof e=="string"&&e=="equal"?this.nodeSpan=function(t){return 1}:this.nodeSpan=e,this):this.nodeSpan}function G9(e){let t=Ps[ia(e)?"node":"internal-node"];return gv(e)&&(t+=" "+Ps["tagged-node"]),mv(e,this.selection_attribute_name)&&(t+=" "+Ps["selected-node"]),e.parent||(t+=" "+Ps["root-node"]),(Ac(e)||_v(e))&&(t+=" "+Ps["collapsed-node"]),t}function d2(e){return!(e.hidden||e.notshown)}function _4(e){return e.notshown}function _v(e){return e.hasHiddenNodes||!1}function Ac(e){return e.collapsed||!1}function v4(e){return[e.node,e["internal-node"],e["collapsed-node"],e["tagged-node"],e["root-node"]].reduce(function(t,n,l,m){return t+="g."+n+(l<m.length-1?",":"")},"")}function Q9(e,t){this.phylotree.clearInternalNodes(t);for(var n=this.phylotree.nodes.descendants().length-1;n>=0;n--){var l=this.phylotree.nodes.descendants()[n];ia(l)||mv(l,this.selection_attribute_name)||(l[this.selection_attribute_name]=e(l.children))}this.modifySelection((m,g)=>ia(m.target)?m.target[this.selection_attribute_name]:m.target[this.selection_attribute_name])}function y4(e){return e=e.data,ia(e)?e.name||"":this.showInternalName(e)?e.name:""}function q9(e){return arguments.length?(this._nodeLabel=e||y4,this.update(),this):this._nodeLabel}const H9=Object.freeze(Object.defineProperty({__proto__:null,defNodeLabel:y4,drawNode:O9,hasHiddenNodes:_v,internalLabel:Q9,isNodeCollapsed:Ac,nodeCssSelectors:v4,nodeLabel:q9,nodeNotshown:_4,nodeSpan:U9,nodeVisible:d2,reclassNode:G9,shiftTip:F9,showInternalName:V9,updateHasHiddenNodes:N9},Symbol.toStringTag,{value:"Module"}));function x4(e){return[e.clade].reduce(function(t,n,l,m){return t+="path."+n+(l<m.length-1?",":"")},"")}function Z9(e){let t=this.svg.selectAll("."+this.css_classes["tree-container"]);var n=0;let l=t.selectAll(x4(this.css_classes)).data(this.phylotree.nodes.descendants().filter(Ac),function(P){return P.id||(P.id=++n)}),m=function(){},g=void 0;this.radial()?(m=i2().curve(_x).y(function(P){return P[0]}).x(function(P){return P[1]}),g=function(P,u,Q,O,re){return u?[Q.screen_y+(P[0]-O)/50,Q.screen_x+(P[1]-re)/50]:[Q.screen_y,Q.screen_x]}):(m=i2().y(function(P){return P[0]}).x(function(P){return P[1]}).curve(_x),g=function(P,u,Q,O,re){return u?[Q.screen_y+(P[0]-O)/50,Q.screen_x+(P[1]-re)/50]:[Q.screen_y,Q.screen_x]}),l.exit().each(function(P){P.collapsed_clade=null}).remove(),e?l.enter().insert("path",":first-child").attr("class",this.css_classes.clade).merge(l).attr("d",function(P){if(P.collapsed_clade)return P.collapsed_clade;let u=P.collapsed[0][0],Q=P.collapsed[0][1];return m(P.collapsed.map(function(O,re){return g(O,re,P,u,Q)}))}).attr("d",function(P){return P.collapsed_clade=m(P.collapsed)}):l.enter().insert("path",":first-child").attr("class",this.css_classes.clade).merge(l).attr("d",function(P){return P.collapsed_clade?P.collapsed_clade:P.collapsed_clade=m(P.collapsed)})}const j9=Object.freeze(Object.defineProperty({__proto__:null,cladeCssSelectors:x4,updateCollapsedClades:Z9},Symbol.toStringTag,{value:"Module"}));function W9(e,t,n){e=qs(e),e=e.attr("class",P=>this.reclassEdge(P)).on("click",P=>{this.modifySelection([t.target],this.selection_attribute_name),this.update()});let l=this.draw_branch([t.source,t.target]);n&&e.datum().existing_path&&(e=e.attr("d",function(P){return P.existing_path})),e=e.attr("d",l),t.existing_path=l;var m=this.phylotree.branch_length_accessor(t.target);if(m!==void 0){var g=e.selectAll("title");g.empty()&&(g=e.append("title")),g.text("Length = "+m)}else e.selectAll("title").remove();return this.edge_styler&&this.edge_styler(e,t,n),this.phylotree}function Y9(e){let t=Ps.branch;return gv(e)&&(t+=" "+Ps["tagged-branch"]),mv(e,this.selection_attribute_name)&&(t+=" "+Ps["selected-branch"]),t}function $9(){this.links.forEach(e=>{e.target.data.annotation&&(e.target[e.target.data.annotation]=e.target.data.annotation)})}function X9(){if(this.links.forEach(e=>{e[this.selection_attribute_name]=e.target[this.selection_attribute_name]||!1,e.tag=e.target.tag||!1}),this.countHandler()){let e={};e[this.selection_attribute_name]=this.links.reduce((t,n)=>t+(n[this.selection_attribute_name]?1:0),0),e.tagged=this.links.reduce(function(t,n){return t+(gv(n)?1:0)},0),this.countUpdate(this,e,this.countHandler())}}function p2(e){return!(e.target.hidden||e.target.notshown)}function g2(e){return[e.branch,e["selected-branch"],e["tagged-branch"]].reduce(function(t,n,l,m){return t+="path."+n+(l<m.length-1?",":"")},"")}function K9(e,t){return this.edge_placer(e,t)}const J9=Object.freeze(Object.defineProperty({__proto__:null,drawEdge:W9,edgeCssSelectors:g2,edgeVisible:p2,initializeEdgeLabels:$9,placeAlongAnEdge:K9,reclassEdge:Y9,syncEdgeLabels:X9},Symbol.toStringTag,{value:"Module"}));let Am="phylotree.event";function eL(e){if(e.collapsed){e.collapsed=!1;let t=function(n){ia(n)||n.collapsed||n.children.forEach(t),n.hidden=!1};t(e)}else e.collapsed=!0;return this.placenodes(),this}function tL(e,t,n){let l=this.size;if(this.radial()){let m=this.pad_width(),g=this.options["top-bottom-spacing"]!="fit-to-size"?this.pad_height():0;l=[l[1]+2*m,l[0]+2*m+g],t&&t.selectAll("."+Ps["tree-container"]).attr("transform","translate ("+m+","+(m+g)+")")}else l=[l[0]+(this.options["top-bottom-spacing"]!="fit-to-size"?this.pad_height():0),l[1]+(this.options["left-right-spacing"]!="fit-to-size"?this.pad_width():0)];return t&&(n&&(t=t.transition(100)),t.attr("height",l[0]).attr("width",l[1])),this.size=l,l}function iL(e,t){t=t||"y_scaled",t in this&&(this[t]*=e)}function m2(e){var t=new CustomEvent(Am,{detail:["refresh",e]});document.dispatchEvent(t)}function w4(e,t){var n=new CustomEvent(Am,{detail:["countUpdate",t,e.countHandler()]});document.dispatchEvent(n)}function nL(e){var t=new CustomEvent(Am,{detail:["layout",e,e.layoutHandler()]});document.dispatchEvent(t)}function b4(e){switch(e.detail[0]){case"refresh":e.detail[1].refresh();break;case"countUpdate":e.detail[2](e.detail[1]);break;case"layout":e.detail[2](e.detail[1])}return!0}function S4(){document.addEventListener(Am,b4,!1)}function rL(e){return e&&(e[0]!==null||e[1]!==null)?"translate ("+(e[0]!==null?e[0]:0)+","+(e[1]!==null?e[1]:0)+") ":""}function sL(e){return e!==null?"rotate ("+e+") ":""}const aL=Object.freeze(Object.defineProperty({__proto__:null,countUpdate:w4,d3PhylotreeAddEventListener:S4,d3PhylotreeEventListener:b4,d3PhylotreeSvgRotate:sL,d3PhylotreeSvgTranslate:rL,d3PhylotreeTriggerLayout:nL,rescale:iL,resizeSvg:tL,toggleCollapse:eL,triggerRefresh:m2},Symbol.toStringTag,{value:"Module"}));let Lx="d3_layout_phylotree_context_menu";function oL(e,t,n,l,m){let g=qs(t).select("#"+Lx);if(g.empty()&&(g=qs(t).append("div").attr("id",Lx).attr("class","dropdown-menu").attr("role","menu")),g.selectAll("a").remove(),g.selectAll("h6").remove(),g.selectAll("div").remove(),e){if(!Og([!!e.menu_items,l.hide,l.selectable,l.collapsible])||!l["show-menu"])return;ia(e)||(l.collapsible&&(g.append("a").attr("class","dropdown-item").attr("tabindex","-1").text(Ac(e)?"Expand Subtree":"Collapse Subtree").on("click",O=>{g.style("display","none"),this.toggleCollapse(e).update()}),l.selectable&&(g.append("div").attr("class","dropdown-divider"),g.append("h6").attr("class","dropdown-header").text("Toggle selection"))),l.selectable&&(g.append("a").attr("class","dropdown-item").attr("tabindex","-1").text("All descendant branches").on("click",function(O){g.style("display","none"),n.modifySelection(n.selectAllDescendants(e,!0,!0))}),g.append("a").attr("class","dropdown-item").attr("tabindex","-1").text("All terminal branches").on("click",function(O){g.style("display","none"),n.modifySelection(n.selectAllDescendants(e,!0,!1))}),g.append("a").attr("class","dropdown-item").attr("tabindex","-1").text("All internal branches").on("click",function(O){g.style("display","none"),n.modifySelection(n.selectAllDescendants(e,!1,!0))}))),e.parent&&(l.selectable&&(g.append("a").attr("class","dropdown-item").attr("tabindex","-1").text("Incident branch").on("click",function(O){g.style("display","none"),n.modifySelection([e])}),g.append("a").attr("class","dropdown-item").attr("tabindex","-1").text("Path to root").on("click",O=>{g.style("display","none"),this.modifySelection(this.phylotree.pathToRoot(e))}),(l.reroot||l.hide)&&g.append("div").attr("class","dropdown-divider")),l.reroot&&g.append("a").attr("class","dropdown-item").attr("tabindex","-1").text("Reroot on this node").on("click",O=>{g.style("display","none"),this.phylotree.reroot(e),this.update()}),l.hide&&g.append("a").attr("class","dropdown-item").attr("tabindex","-1").text("Hide this "+(ia(e)?"node":"subtree")).on("click",O=>{g.style("display","none"),this.modifySelection([e],"notshown",!0,!0).updateHasHiddenNodes().update()})),_v(e)&&g.append("a").attr("class","dropdown-item").attr("tabindex","-1").text("Show all descendant nodes").on("click",function(O){g.style("display","none"),n.modifySelection(n.selectAllDescendants(e,!0,!0),"notshown",!0,!0,"false").updateHasHiddenNodes().update()});var P=[];if("menu_items"in e&&typeof e.menu_items=="object"&&e.menu_items.forEach(function(O){O.length==3&&(!O[2]||O[2](e))&&P.push([O[0],O[1]])}),P.length){const O=[l.hide,l.selectable,l.collapsible];Og(O)&&g.append("div").attr("class","dropdown-divider"),P.forEach(function(re){g.append("a").attr("class","dropdown-item").attr("tabindex","-1").text(re[0](e)).on("click",gu(re[1],e))})}let Q=document.querySelector(t).getBoundingClientRect();g.style("position","absolute").style("left",""+(m.clientX-Q.x+12)+"px").style("top",""+(m.clientY-Q.y)+"px").style("display","block")}else g.style("display","none")}function AL(e,t,n,l){"menu_items"in e||(e.menu_items=[]),e.menu_items.some(function(m){return m[0]==t&&m[1]==n&&m[2]==l})||e.menu_items.push([t,n,l])}function lL(e,t,n,l,m){if(t=t||this.selection_attribute_name,m=m||"toggle",this.options["restricted-selectable"].length)if(pu(Wa(f2),e))e=f2[e];else return;if((this.options["restricted-selectable"]||this.options.selectable)&&!this.options["binary-selectable"]){var g=!1;typeof e=="function"?this.links.forEach(function(u){let Q=e(u);u[t]=u[t]||!1,u[t]!=Q&&(u[t]=Q,g=!0,u.target[t]=Q)}):(e.forEach(function(u){var Q;switch(m){case"true":Q=!0;break;case"false":Q=!1;break;default:Q=!u[t];break}u[t]!=Q&&(u[t]=Q,g=!0)}),this.links.forEach(function(u){u[t]=u.target[t]}));var P;g&&(l||m2(this),this.countHandler&&(P={},P[t]=this.links.reduce(function(u,Q){return u+(Q[t]?1:0)},0),w4(this,P,this.countHandler)),n&&this.placenodes())}else this.options["binary-selectable"]&&(typeof e=="function"?this.links.forEach(function(u){var Q=e(u);u[t]=u[t]||!1,u[t]!=Q&&(u[t]=Q,g=!0,u.target[t]=Q),this.options["attribute-list"].forEach(function(O){O!=t&&u[t]===!0&&(u[O]=!1,u.target[O]=!1)})}):(e.forEach(function(u){var Q;Q=!u[t],u[t]!=Q&&(u[t]=Q,g=!0)}),this.links.forEach(function(u){u[t]=u.target[t],this.options["attribute-list"].forEach(function(Q){Q!=t&&u[t]!==!0&&(u[Q]=!1,u.target[Q]=!1)})})),g&&(l||m2(this),this.countHandler()&&(P={},P[t]=this.links.reduce(function(u,Q){return u+(Q[t]?1:0)},0),this.countUpdate(this,P,this.countHandler())),n&&this.placenodes()));return this.selectionCallback&&t!="tag"&&this.selectionCallback(this.getSelection()),this.refresh(),this.update(),this}function uL(){return this.nodes.filter(e=>e[this.selection_attribute_name])}function hL(e,t,n){let l=[];function m(g){ia(g)?t&&g!=e&&l.push(g):(n&&g!=e&&l.push(g),g.children.forEach(m))}return m(e),l}function cL(e){return e?(this.selectionCallback=e,this):this.selectionCallback}const fL=Object.freeze(Object.defineProperty({__proto__:null,addCustomMenu:AL,getSelection:uL,modifySelection:lL,nodeDropdownMenu:oL,selectAllDescendants:hL,selectionCallback:cL},Symbol.toStringTag,{value:"Module"}));function zx(e){return function(){return e}}class gc{constructor(t,n={}){this.css_classes=Ps,this.phylotree=t,this.container=n.container,this.separation=function(m,g){return 0},this._nodeLabel=this.defNodeLabel,this.svg=null,this.selectionCallback=null,this.scales=[1,1],this.size=[1,1],this.fixed_width=[14,30],this.scale_bar_font_size=12,this.draw_branch=Bx,this.draw_scale_bar=null,this.edge_placer=Dx,this.count_listener_handler=function(){},this.layout_listener_handler=function(){},this.node_styler=void 0,this.edge_styler=void 0,this.selection_attribute_name="selected",this.right_most_leaf=0,this.label_width=0,this.radial_center=0,this.radius=1,this.radius_pad_for_bubbles=0,this.rescale_nodeSpan=1,this.relative_nodeSpan=function(m){return this.nodeSpan(m)/this.rescale_nodeSpan};let l={layout:"left-to-right",logger:console,branches:"step",scaling:!0,bootstrap:!1,"color-fill":!0,"font-size":14,"internal-names":!1,selectable:!0,"restricted-selectable":!1,collapsible:!0,"left-right-spacing":"fixed-step","top-bottom-spacing":"fixed-step","left-offset":0,"show-scale":"top","draw-size-bubbles":!1,"bubble-styler":this.radius_pad_for_bubbles,"binary-selectable":!1,"is-radial":!1,"attribute-list":[],"max-radius":768,"annular-limit":.38196601125010515,compression:.2,"align-tips":!1,"maximum-per-node-spacing":100,"minimum-per-node-spacing":2,"maximum-per-level-spacing":100,"minimum-per-level-spacing":10,node_circle_size:zx(3),transitions:null,brush:!0,reroot:!0,hide:!0,"label-nodes-with-name":!1,zoom:!1,"show-menu":!0,"show-labels":!0,"node-styler":null,"edge-styler":null,"node-span":null};this.ensure_size_is_in_px=function(m){return typeof m=="number"?m+"px":m},this.options=av(n,l),this.font_size=this.options["font-size"],this.offsets=[0,this.font_size/2],this.shown_font_size=this.font_size,this.width=this.options.width||800,this.height=this.options.height||600,this.node_styler=this.options["node-styler"],this.edge_styler=this.options["edge-styler"],this.nodeSpan=this.options["node-span"],this.nodeSpan||(this.nodeSpan=function(m){return 1}),this.rescale_nodeSpan=this.phylotree.nodes.children.map(m=>{if(ia(m)||this.showInternalName(m))return this.nodeSpan(m)}).reduce(function(m,g){return Math.min(g,m||1e200)},null)||1,this.initialize_svg(this.container),this.links=this.phylotree.nodes.links(),this.initializeEdgeLabels(),this.update(),S4()}pad_height(){return this.draw_scale_bar?this.scale_bar_font_size+25:0}pad_width(){this.label_width=this._label_width(this.shown_font_size);const t=this.options["show-labels"]?this.label_width:0;return this.offsets[1]+this.options["left-offset"]+t}collapse_node(t){Ac(t)||(t.collapsed=!0)}set_size(t){if(!arguments.length)return this.size;let n=t;return this.options["top-bottom-spacing"]!="fixed-step"&&(this.size[0]=n[0]),this.options["left-right-spacing"]!="fixed-step"&&(this.size[1]=n[1]),this}initialize_svg(t){return this.svg!==t&&(qs(t).select("svg").remove(),this.svg=fM("svg").attr("width",this.width).attr("height",this.height),this.set_size([this.height,this.width]),this.css_classes["tree-container"]=="phylotree-container"&&(this.svg.selectAll("*").remove(),this.svg.append("defs")),qs(this.container).on("click",n=>{this.handle_node_click(null)},!0)),this}update_layout(t,n){n&&(this.nodes=Kh(t),this.nodes.each(function(l){l.id=null})),this.update(),this.syncEdgeLabels()}update(t){var n=this;this.placenodes(),t=this.transitions(t);let l=0,m=this.svg.selectAll("."+Ps["tree-container"]).data([0]);if(m=m.enter().append("g").attr("class",Ps["tree-container"]).merge(m).attr("transform",O=>this.d3PhylotreeSvgTranslate([this.offsets[1]+this.options["left-offset"],this.pad_height()])),this.draw_scale_bar){let O=this.svg.selectAll("."+Ps["tree-scale-bar"]).data([0]);O.enter().append("g").attr("class",Ps["tree-scale-bar"]).style("font-size",this.ensure_size_is_in_px(this.scale_bar_font_size)).merge(O).attr("transform",re=>this.d3PhylotreeSvgTranslate([this.offsets[1]+this.options["left-offset"],this.pad_height()-10])).call(this.draw_scale_bar),O.selectAll("text").style("text-anchor","end")}else this.svg.selectAll("."+Ps["tree-scale-bar"]).remove();m=this.svg.selectAll("."+Ps["tree-container"]).data([0]),this.updateCollapsedClades(t);let g=m.selectAll(g2(Ps)).data(this.links.filter(p2),O=>O.target.id||(O.target.id=++l));g.exit().remove(),g=g.enter().insert("path",":first-child").merge(g).each(function(O){n.drawEdge(this,O,t)});let P=m.selectAll(v4(Ps)).data(this.phylotree.nodes.descendants().filter(d2),O=>O.id||(O.id=++l));if(P.exit().remove(),P=P.enter().append("g").attr("class",this.reclassNode).merge(P).attr("transform",O=>{const re=this.options.layout=="right-to-left"&&ia(O);return O.screen_x=Hu(O),O.screen_y=ec(O),this.d3PhylotreeSvgTranslate([re?0:O.screen_x,O.screen_y])}).each(function(O){n.drawNode(this,O,t)}).attr("transform",O=>{if(!oc(O.screen_x)&&!oc(O.screen_y))return"translate("+O.screen_x+","+O.screen_y+")"}),this.options["label-nodes-with-name"]&&(P=P.attr("id",O=>"node-"+O.name)),this.resizeSvg(this.phylotree,this.svg,t),this.options.brush){var u=m.selectAll("."+Ps["tree-selection-brush"]).data([0]).enter().insert("g",":first-child").attr("class",Ps["tree-selection-brush"]),Q=uP().on("brush",(O,re)=>{var ee=O.selection,ce=this.links.filter(p2),le=ce.filter((je,Je)=>je.source.screen_x>=ee[0][0]&&je.source.screen_x<=ee[1][0]&&je.source.screen_y>=ee[0][1]&&je.source.screen_y<=ee[1][1]&&je.target.screen_x>=ee[0][0]&&je.target.screen_x<=ee[1][0]&&je.target.screen_y>=ee[0][1]&&je.target.screen_y<=ee[1][1]).map(je=>je.target);this.modifySelection(this.phylotree.links.map(je=>je.target),"tag",!1,le.length>0,"false"),this.modifySelection(le,"tag",!1,!1,"true")}).on("end",()=>{});u.call(Q)}if(this.syncEdgeLabels(),this.options.zoom){let O=bB().scaleExtent([.1,10]).on("zoom",re=>{qs("."+Ps["tree-container"]).attr("transform",ee=>re.transform),qs("."+Ps["tree-scale-bar"]).attr("transform",ee=>{let ce=re.transform;return ce.y-=10,ce})});this.svg.call(O)}return this}_handle_single_node_layout(t){let n=this.nodeSpan(t)/this.rescale_nodeSpan;this.x=t.x=this.x+this.separation(this.last_node,t)+(this.last_span+n)*.5,this._extents[1][1]=Math.max(this._extents[1][1],t.y),this._extents[1][0]=Math.min(this._extents[1][0],t.y-n*.5),this.is_under_collapsed_parent?this._extents[0][1]=Math.max(this._extents[0][1],this.save_x+(t.x-this.save_x)*this.options.compression+this.save_span+(n*.5+this.separation(this.last_node,t))*this.options.compression):this._extents[0][1]=Math.max(this._extents[0][1],this.x+n*.5+this.separation(this.last_node,t)),this.last_node=t,this.last_span=n}tree_layout(t){if(_4(t))return;let n=ia(t);t.text_angle=null,t.text_align=null,t.radius=null,t.angle=null;let l=!1;if(t.parent)if(this.do_scaling){if(l)return 0;if(t.y=this.phylotree.branch_length_accessor(t),typeof t.y>"u")return l=!0,0;t.y+=t.parent.y}else t.y=n?this.max_depth:t.depth;else this.x=0,t.y=0,this.last_node=null,this.last_span=0,this._extents=[[0,0],[0,0]];if(n&&this._handle_single_node_layout(t),!n)if(Ac(t)&&!this.is_under_collapsed_parent){if(this.save_x=this.x,this.save_span=this.last_span*.5,this.is_under_collapsed_parent=!0,this.process_internal_node(t),this.is_under_collapsed_parent=!1,typeof t.x=="number"){t.x=this.save_x+(t.x-this.save_x)*this.options.compression+this.save_span,t.collapsed=[[t.x,t.y]];var m=g=>{g.hidden=!0,ia(g)?(this.x=g.x=this.save_x+(g.x-this.save_x)*this.options.compression+this.save_span,t.collapsed.push([g.x,g.y])):g.children.map(m)};this.x=this.save_x,m(t),t.collapsed.splice(1,0,[this.save_x,t.y]),t.collapsed.push([this.x,t.y]),t.collapsed.push([t.x,t.y]),t.hidden=!1}}else this.process_internal_node(t);return t.x}process_internal_node(t){let n=0;if(this.showInternalName(t)){let l=t.children.length/2>>0,m=0,g=!1;for(let P=0;P<t.children.length;P++)typeof this.tree_layout(t.children[P])=="number"&&m++,m>=l&&!g&&(this._handle_single_node_layout(t),g=!0);m==0?(t.notshown=!0,t.x=void 0):g||this._handle_single_node_layout(t)}else t.x=t.children.map(this.tree_layout.bind(this)).reduce((l,m)=>typeof m=="number"?l+m:(n+=1,l),0),n==t.children.length?(t.notshown=!0,t.x=void 0):t.x/=t.children.length-n}do_lr(t){if(this.radial()&&t&&(this.offsets[1]=0),this.options["left-right-spacing"]=="fixed-step")this.size[1]=this.max_depth*this.fixed_width[1],this.scales[1]=(this.size[1]-this.offsets[1]-this.options["left-offset"])/this._extents[1][1],this.label_width=this._label_width(this.shown_font_size),this.radial()&&(this.label_width*=2);else{this.label_width=this._label_width(this.shown_font_size),t=!0;let n=this.size[1]-this.offsets[1]-this.options["left-offset"];n*.5<this.label_width&&(this.shown_font_size*=n*.5/this.label_width,this.label_width=n*.5),this.scales[1]=(this.size[1]-this.offsets[1]-this.options["left-offset"]-this.label_width)/this._extents[1][1]}}placenodes(){this._extents=[[0,0],[0,0]],this.x=0,this.last_span=0,this.last_node=null,this.last_span=0,this.save_x=this.x,this.save_span=this.last_span*.5,this.do_scaling=this.options.scaling;let t=!1;this.is_under_collapsed_parent=!1,this.max_depth=1,this.phylotree.nodes.x=this.tree_layout(this.phylotree.nodes,this.do_scaling),this.max_depth=CE(this.phylotree.nodes.descendants(),l=>l.depth),this.do_scaling&&t&&(this.do_scaling=!1,this.phylotree.nodes.x=this.tree_layout(this.phylotree.nodes));let n=!1;if(this.draw_scale_bar=this.options["show-scale"]&&this.do_scaling,this.offsets[1]=Math.max(this.font_size,-this._extents[1][0]*this.fixed_width[0]),this.options["top-bottom-spacing"]=="fixed-step"?(this.size[0]=this._extents[0][1]*this.fixed_width[0],this.scales[0]=this.fixed_width[0]):(this.scales[0]=(this.size[0]-this.pad_height())/this._extents[0][1],n=!0),this.shown_font_size=Math.min(this.font_size,this.scales[0]),this.radial()){this.draw_branch=gu(Px,this.radial_center),this.edge_placer=E9;let l=null,m=null,g=null,P=0,u=this._extents[0][1]*this.scales[0],Q=function(ce,le,je,Je,Xe){return Xe=Xe||0,Math.sqrt((le-ce)*(le-ce)+2*(ce+Xe)*(le+Xe)*(1-Math.cos(je-Je)))},O=0;this.phylotree.nodes.each(ce=>{let le=ce.x*this.scales[0];ce.angle=2*Math.PI*le/u,ce.text_angle=ce.angle-Math.PI/2,ce.text_angle=ce.text_angle>0&&ce.text_angle<Math.PI,ce.text_align=ce.text_angle?"end":"start",ce.text_angle=(ce.text_angle?180:0)+ce.angle*180/Math.PI}),this.do_lr(n),this.phylotree.nodes.each(ce=>{ce.radius=ce.y*this.scales[1]/this.size[1],O=Math.max(ce.radius,O)});let re=0;this.phylotree.nodes.each(ce=>{if(!ce.children){let le=ce.x*this.scales[0];if(l!==null){let je=le-m,Je=Q(ce.radius,g,ce.angle,l,re),Xe=Je>0?je/Je:10*this.options["max-radius"];if(Xe>this.options["max-radius"]){let Ke=je/this.options["max-radius"],xt=ce.radius+g,gt=ce.radius*g-(Ke*Ke-(g-ce.radius)*(g-ce.radius))/2/(1-Math.cos(l-ce.angle)),Mt=Math.sqrt(xt*xt-4*gt);re=Math.min(this.options["annular-limit"]*O,(-xt+Mt)/2),P=this.options["max-radius"]}else P=Math.max(P,Xe)}l=ce.angle,m=le,g=ce.radius}}),this.radius=Math.min(this.options["max-radius"],Math.max(u/2/Math.PI,P)),n&&(this.radius=Math.min(this.radius,(Math.min(u,this._extents[1][1]*this.scales[1])-this.label_width)*.5-this.radius*re)),this.radial_center=this.radius_pad_for_bubbles=this.radius,this.draw_branch=gu(Px,this.radial_center);let ee=1;re&&(ee=O/(O+re),this.radius*=ee),this.phylotree.nodes.each(ce=>{if(Tx(ce,this.radius,re,this.radial_center,this.scales,this.size),O=Math.max(O,ce.radius),this.options["draw-size-bubbles"]?this.radius_pad_for_bubbles=Math.max(this.radius_pad_for_bubbles,ce.radius+this.nodeBubbleSize(ce)):this.radius_pad_for_bubbles=Math.max(this.radius_pad_for_bubbles,ce.radius),ce.collapsed){ce.collapsed=ce.collapsed.map(je=>{let Je={};return Je.x=je[0],Je.y=je[1],Je=Tx(Je,this.radius,re,this.radial_center,this.scales,this.size),[Je.x,Je.y]});let le=ce.collapsed[1];ce.collapsed=ce.collapsed.filter(function(je,Je){return Je<3||Je>ce.collapsed.length-4?!0:Math.sqrt(Math.pow(je[0]-le[0],2)+Math.pow(je[1]-le[1],2))>3?(le=je,!0):!1})}}),this.size[0]=this.radial_center+this.radius/ee,this.size[1]=this.radial_center+this.radius/ee}else this.do_lr(),this.draw_branch=Bx,this.edge_placer=Dx,this.right_most_leaf=0,this.phylotree.nodes.each(l=>{if(l.x*=this.scales[0],l.y*=this.scales[1]*.8,this.options.layout=="right-to-left"&&(l.y=this._extents[1][1]*this.scales[1]-l.y),ia(l)&&(this.right_most_leaf=Math.max(this.right_most_leaf,l.y+this.nodeBubbleSize(l))),l.collapsed){l.collapsed.forEach(g=>{g[0]*=this.scales[0],g[1]*=this.scales[1]*.8});let m=l.collapsed[1][0];l.collapsed=l.collapsed.filter(function(g,P){return P<3||P>l.collapsed.length-4?!0:g[0]-m>3?(m=g[0],!0):!1})}});if(this.draw_scale_bar){let l,m;if(this.radial()){if(m=Math.min(this.radius/5,50),l=Math.pow(10,Math.ceil(Math.log(this._extents[1][1]*m/this.radius)/Math.log(10))),m=l*(this.radius/this._extents[1][1]),m<30){let u=Math.ceil(30/m);m*=u,l*=u}}else l=this._extents[1][1],m=this.size[1]-this.offsets[1]-this.options["left-offset"]-this.shown_font_size;let g=i3().domain([0,l]).range([0,m]),P=W2(".2f");if(this.draw_scale_bar=DE().scale(g).tickFormat(function(u){return u===0?"":P(u)}),this.radial())this.draw_scale_bar.tickValues([l]);else{let u=function(O,re){return re?Math.round(O*(re=Math.pow(10,re)))/re:Math.round(O)},Q=g.ticks();Q=Q.length>1?Q[1]:Q[0],this.draw_scale_bar.ticks(Math.min(10,u(m/(this.shown_font_size*P(Q).length*2),0)))}}else this.draw_scale_bar=null;return this}spacing_x(t,n){return arguments.length?(this.fixed_width[0]!=t&&t>=this.options["minimum-per-node-spacing"]&&t<=this.options["maximum-per-node-spacing"]&&(this.fixed_width[0]=t,n||this.placenodes()),this):this.fixed_width[0]}spacing_y(t,n){return arguments.length?(this.fixed_width[1]!=t&&t>=this.options["minimum-per-level-spacing"]&&t<=this.options["maximum-per-level-spacing"]&&(this.fixed_width[1]=t,n||this.placenodes()),this):this.fixed_width[1]}_label_width(t){t=t||this.shown_font_size;let n=0;return this.phylotree.nodes.descendants().filter(d2).forEach(l=>{let m=12+this._nodeLabel(l).length*t*.8;l.angle!==null&&(m*=Math.max(Math.abs(Math.cos(l.angle)),Math.abs(Math.sin(l.angle)))),n=Math.max(m,n)}),n}font_size(t){return arguments.length?(this.font_size=t===void 0?12:t,this):this.font_size}scale_bar_font_size(t){return arguments.length?(this.scale_bar_font_size=t===void 0?12:t,this):this.scale_bar_font_size}node_circle_size(t,n){return arguments.length?(this.options.node_circle_size=zx(t===void 0?3:t),this):this.options.node_circle_size}css(t){if(arguments.length===0)return this.css_classes;if(arguments.length>2){var n={};return n[t[0]]=t[1],this.css(n)}for(var l in Ps)l in t&&t[l]!=Ps[l]&&(Ps[l]=t[l]);return this}transitions(t){return t!==void 0?t:this.options.transitions!==null?this.options.transitions:this.phylotree.nodes.descendants().length<=300}css_classes(t,n){if(!arguments.length)return this.css_classes;let l=!1;for(var m in Ps)m in t&&t[m]!=this.css_classes[m]&&(l=!0,this.css_classes[m]=t[m]);return n&&l&&this.layout(),this}layout(t){return this.svg?(this.svg.selectAll("."+this.css_classes["tree-container"]+",."+this.css_classes["tree-scale-bar"]+",."+this.css_classes["tree-selection-brush"]),this.d3PhylotreeTriggerLayout(this),this.update()):(this.d3PhylotreeTriggerLayout(this),this)}handle_node_click(t,n){this.nodeDropdownMenu(t,this.container,this,this.options,n)}refresh(){if(this.svg){let n=this.svg.selectAll("."+this.css_classes["tree-container"]).selectAll(g2(this.css_classes)).attr("class",this.reclassEdge.bind(this));this.edge_styler&&n.each(l=>{this.edge_styler(qs(this),l)})}return this}countHandler(t){return arguments.length?(this.count_listener_handler=t,this):this.count_listener_handler}style_nodes(t){return arguments.length?(this.node_styler=t,this):this.node_styler}style_edges(t){return arguments.length?(this.edge_styler=t.bind(this),this):this.edge_styler}itemSelected(t,n){return t[n]||!1}show(){return this.svg.node()}}Xl(gc.prototype,j9);Xl(gc.prototype,H9);Xl(gc.prototype,J9);Xl(gc.prototype,aL);Xl(gc.prototype,fL);Xl(gc.prototype,R9);function dL(e,t,n){return this.nodes.sum(function(l){return l.value}).sort(e),this.display&&(this.display.update_layout(this.nodes),this.display.update()),this}function pL(e){var t;return e=e.map(function(n){return typeof n=="string"?n:n.data.name}),this.traverse_and_compute(function(n){n.children?n.parent?(n.data.mrca=h4(...n.descendants().map(l=>l.data.mrca)),!t&&n.data.mrca.length==e.length&&(t=n)):t||(t=n):n.data.mrca=c4([n.data.name],e)}),t}let Co=class{constructor(e,t={}){this.newick_string="",this.nodes=[],this.links=[],this.parsed_tags=[],this.partitions=[],this.branch_length_accessor=c2,this.branch_length=c2,this.logger=t.logger||console,this.selection_attribute_name="selected";var n=t.type||void 0,l=[],m=this;if(rm(n))n in i1?l=i1[n](e,t):m.logger.error("type "+n+" not in registry! Available types are "+Wa(i1));else if(tA(n))try{l=n(e,t)}catch{m.logger.error("Could not parse custom format!")}else e.name=="root"?l={json:e,error:null}:typeof e!="string"?l=e:e.contentType=="application/xml"?l=g4(e):(this.newick_string=e,l=ed(e,t));if(!l.json)m.nodes=[];else{m.nodes=Kh(l.json);let g={};m.nodes.each(P=>{P.data.annotation&&(g[P.data.annotation]=!0)}),m.parsed_tags=Object.keys(g)}return m.links=m.nodes.links(),this.hasBranchLengths()||(console.warn("Phylotree User Warning : NO BRANCH LENGTHS DETECTED, SETTING ALL LENGTHS TO 1"),this.setBranchLength(g=>1)),m}json(e){var t=0;this.traverse_and_compute(function(l){l.json_export_index=t++},e);var n=new Array(t);return t=0,this.traverse_and_compute(function(l){let m=O3(l);delete m.json_export_index,l.parent&&(m.parent=l.parent.json_export_index),l.children&&(m.children=wA(l.children,function(g){return g.json_export_index})),n[t++]=m},e),this.traverse_and_compute(function(l){delete l.json_export_index},e),JSON.stringify(n)}traverse_and_compute(e,t,n,l){t=t||"post-order";function m(u){oc(u)||m4(u,e,l)}function g(u){d9(u,e,l)}function P(u){p9(u,e,l)}return t=="pre-order"?t=g:t=="in-order"?t=P:t=m,t(n||this.nodes),this}get_parsed_tags(){return this.parsed_tags}update(e){this.nodes=e}render(e){return this.display=new gc(this,e),this.display}};Co.prototype.isLeafNode=ia;Co.prototype.selectAllDescendants=d4;Co.prototype.mrca=pL;Co.prototype.hasBranchLengths=m9;Co.prototype.getBranchLengths=_9;Co.prototype.branchName=w9;Co.prototype.normalizeBranchLengths=y9;Co.prototype.scaleBranchLengths=x9;Co.prototype.getNewick=a9;Co.prototype.resortChildren=dL;Co.prototype.setBranchLength=v9;Co.prototype.maxParsimony=c9;Co.prototype.getTipLengths=h9;Co.prototype.leftChildRightSibling=g9;Xl(Co.prototype,s9);Xl(Co.prototype,k9);Xl(Co.prototype,l9);u3("%Y%m%d");function gL(e){let t,n,l="Taxa found in this area",m,g;return{c(){t=Sr("div"),n=Sr("h2"),n.textContent=l,m=ea(),g=Sr("div"),this.h()},l(P){t=Cr(P,"DIV",{class:!0});var u=Vn(t);n=Cr(u,"H2",{class:!0,"data-svelte-h":!0}),hu(n)!=="svelte-bg4wlc"&&(n.textContent=l),m=ta(u),g=Cr(u,"DIV",{id:!0,class:!0}),Vn(g).forEach(Qi),u.forEach(Qi),this.h()},h(){ki(n,"class","svelte-fdfqi6"),ki(g,"id","tree_container"),ki(g,"class","svelte-fdfqi6"),ki(t,"class","container svelte-fdfqi6")},m(P,u){qr(P,t,u),un(t,n),un(t,m),un(t,g),e[1](g)},p:Oo,i:Oo,o:Oo,d(P){P&&Qi(t),e[1](null)}}}function mL(e,t,n){let l;jg(()=>{const g=window.innerHeight/2,P=g,u=g;let Q="((((((((Tyrannus_verticalis:8.557778,(Sayornis_saya:3.781439,Sayornis_nigricans:3.781439):4.776338):19.243085,((((((Tachycineta_thalassina:7.164564,Stelgidopteryx_serripennis:7.164563):4.907843,Psaltriparus_minimus:12.072407):3.555338,Eremophila_alpestris:15.627745):0.954938,Baeolophus_inornatus:16.582683):1.204803,((((((Turdus_migratorius:9.645123,Catharus_guttatus:9.645123):2.400322,Sialia_mexicana:12.045446):2.685283,(Sturnus_vulgaris:11.154101,(Mimus_polyglottos:6.640306,Toxostoma_redivivum:6.640306):4.513794):3.576628):2.188836,(Thryomanes_bewickii:15.114159,Sitta_carolinensis:15.114158):1.805406):0.407621,Regulus_calendula:17.327187):0.145318,(((((Euphagus_cyanocephalus:4.083924,Molothrus_ater:4.083924):0.187559,Agelaius_phoeniceus:4.271483):2.672922,Sturnella_neglecta:6.944405):1.714005,(Chondestes_grammacus:7.510266,(((Melospiza_melodia:3.876051,Passerculus_sandwichensis:3.876051):1.651948,Melozone_crissalis:5.527999):0.208553,(Junco_hyemalis:4.32944,Zonotrichia_leucophrys:4.329439):1.407113):1.773713):1.148145):2.432439,(Spinus_psaltria:1.162173,Spinus_lawrencei:1.162173):9.928678):6.381655):0.314981):2.469957,(Lanius_ludovicianus:11.409307,(((Corvus_corax:4.701119,Corvus_brachyrhynchos:4.701119):3.288836,Pica_nuttalli:7.989953):0.514906,Aphelocoma_californica:8.50486):2.904448):8.848137):7.543419):11.243922,(Falco_peregrinus:4.801524,Falco_sparverius:4.801523):34.243259):18.167212,((((Colaptes_auratus:10.435479,Melanerpes_formicivorus:10.43548):25.154227,Megaceryle_alcyon:35.589708):21.232651,(Bubo_virginianus:13.486494,Athene_cunicularia:13.486494):43.335864):0.214221,((Buteo_jamaicensis:2.240332,Buteo_lineatus:2.240332):14.348763,Cathartes_aura:16.589095):40.447484):0.175416):0.552342,Charadrius_vociferus:57.764337):0.473736,(((Zenaida_macroura:9.944047,((Columba_livia:6.40713,Streptopelia_decaocto:6.407129):1.408266,Patagioenas_fasciata:7.815396):2.128651):24.836102,Podilymbus_podiceps:34.780148):0.63047,Calypte_anna:35.41062):22.827456):3.416457,(Ardea_herodias:61.247059,(Geococcyx_californianus:31.068293,Fulica_americana:31.068292):30.178765):0.407474):2.979476,(((Anas_platyrhynchos:7.034904,Lophodytes_cucullatus:7.034904):2.655406,Branta_canadensis:9.690311):44.315908,Callipepla_californica:54.006219):10.627788);",O=new Co(Q),re=O.render({height:u,width:P,"left-right-spacing":"fit-to-size","top-bottom-spacing":"fit-to-size","is-radial":!0,brush:!1,collapsible:!1,selectable:!1,reroot:!1,hide:!1,container:"#tree_container"});console.log(re);let ee=O.display.show();ee.setAttribute("viewBox",`${P/4} ${u/4} ${P/2} ${u/2}`),console.log(ee),l.appendChild(ee)});function m(g){Sl[g?"unshift":"push"](()=>{l=g,n(0,l)})}return[l,m]}class _L extends No{constructor(t){super(),Vo(this,t,mL,gL,ho,{})}}function Rx(e){let t,n,l,m=e[0].properties[e[1]]+"",g,P,u=e[0].properties.tree_sizes+"",Q,O,re=k1(e[1],e[0].properties[e[1]],e[0].properties.tree_sizes)+"",ee;return{c(){t=Sr("div"),n=Sr("span"),l=UA("Value: "),g=UA(m),P=UA(", Tree Size: "),Q=UA(u),O=UA(", Rel: "),ee=UA(re)},l(ce){t=Cr(ce,"DIV",{});var le=Vn(t);n=Cr(le,"SPAN",{});var je=Vn(n);l=GA(je,"Value: "),g=GA(je,m),P=GA(je,", Tree Size: "),Q=GA(je,u),O=GA(je,", Rel: "),ee=GA(je,re),je.forEach(Qi),le.forEach(Qi)},m(ce,le){qr(ce,t,le),un(t,n),un(n,l),un(n,g),un(n,P),un(n,Q),un(n,O),un(n,ee)},p(ce,le){le&3&&m!==(m=ce[0].properties[ce[1]]+"")&&Yh(g,m),le&1&&u!==(u=ce[0].properties.tree_sizes+"")&&Yh(Q,u),le&3&&re!==(re=k1(ce[1],ce[0].properties[ce[1]],ce[0].properties.tree_sizes)+"")&&Yh(ee,re)},d(ce){ce&&Qi(t)}}}function Fx(e){let t,n="<span>No data for this hexagon!</span>";return{c(){t=Sr("div"),t.innerHTML=n},l(l){t=Cr(l,"DIV",{"data-svelte-h":!0}),hu(t)!=="svelte-3kl6sg"&&(t.innerHTML=n)},m(l,m){qr(l,t,m)},d(l){l&&Qi(t)}}}function Ox(e){let t,n,l,m;return t=new _E({props:{colorScheme:e[3],metric:e[1],point:[[e[0].properties.tree_sizes,e[0].properties[e[1]]]]}}),l=new _L({}),{c(){vA(t.$$.fragment),n=ea(),vA(l.$$.fragment)},l(g){QA(t.$$.fragment,g),n=ta(g),QA(l.$$.fragment,g)},m(g,P){yA(t,g,P),qr(g,n,P),yA(l,g,P),m=!0},p(g,P){const u={};P&8&&(u.colorScheme=g[3]),P&2&&(u.metric=g[1]),P&3&&(u.point=[[g[0].properties.tree_sizes,g[0].properties[g[1]]]]),t.$set(u)},i(g){m||(_r(t.$$.fragment,g),_r(l.$$.fragment,g),m=!0)},o(g){Qr(t.$$.fragment,g),Qr(l.$$.fragment,g),m=!1},d(g){g&&Qi(n),xA(t,g),xA(l,g)}}}function vL(e){let t,n,l,m,g,P,u="x",Q,O,re,ee,ce=e[4]&&Rx(e),le=!e[4]&&Fx(),je=e[4]&&Ox(e);return{c(){t=Sr("div"),n=Sr("div"),ce&&ce.c(),l=ea(),le&&le.c(),m=ea(),g=Sr("div"),P=Sr("button"),P.textContent=u,Q=ea(),je&&je.c(),this.h()},l(Je){t=Cr(Je,"DIV",{class:!0});var Xe=Vn(t);n=Cr(Xe,"DIV",{class:!0});var Ke=Vn(n);ce&&ce.l(Ke),l=ta(Ke),le&&le.l(Ke),m=ta(Ke),g=Cr(Ke,"DIV",{class:!0});var xt=Vn(g);P=Cr(xt,"BUTTON",{class:!0,"data-svelte-h":!0}),hu(P)!=="svelte-18oet5b"&&(P.textContent=u),xt.forEach(Qi),Ke.forEach(Qi),Q=ta(Xe),je&&je.l(Xe),Xe.forEach(Qi),this.h()},h(){ki(P,"class","svelte-oi0dgl"),ki(g,"class","close svelte-oi0dgl"),ki(n,"class","header svelte-oi0dgl"),ki(t,"class",C1("modal")+" svelte-oi0dgl")},m(Je,Xe){qr(Je,t,Xe),un(t,n),ce&&ce.m(n,null),un(n,l),le&&le.m(n,null),un(n,m),un(n,g),un(g,P),un(t,Q),je&&je.m(t,null),O=!0,re||(ee=Jo(P,"click",e[5]),re=!0)},p(Je,[Xe]){Je[4]?ce?ce.p(Je,Xe):(ce=Rx(Je),ce.c(),ce.m(n,l)):ce&&(ce.d(1),ce=null),Je[4]?le&&(le.d(1),le=null):le||(le=Fx(),le.c(),le.m(n,m)),Je[4]?je?(je.p(Je,Xe),Xe&16&&_r(je,1)):(je=Ox(Je),je.c(),_r(je,1),je.m(t,null)):je&&(gh(),Qr(je,1,1,()=>{je=null}),ph())},i(Je){O||(_r(je),O=!0)},o(Je){Qr(je),O=!1},d(Je){Je&&Qi(t),ce&&ce.d(),le&&le.d(),je&&je.d(),re=!1,ee()}}}function yL(e,t,n){let{selectionData:l}=t,{metric:m}=t,{updateData:g}=t,{colorScheme:P}=t,u;const Q=()=>g(null);return e.$$set=O=>{"selectionData"in O&&n(0,l=O.selectionData),"metric"in O&&n(1,m=O.metric),"updateData"in O&&n(2,g=O.updateData),"colorScheme"in O&&n(3,P=O.colorScheme)},e.$$.update=()=>{e.$$.dirty&3&&n(4,u=l.properties&&l.properties[m]!==-1)},[l,m,g,P,u,Q]}class xL extends No{constructor(t){super(),Vo(this,t,yL,vL,ho,{selectionData:0,metric:1,updateData:2,colorScheme:3})}}const vv=Symbol.for("svelte-maplibre");function pd(){return C2(vv)}function wL(e){let t=new WeakMap;return n=>{var P;let l=t.get(n.originalEvent);if(l!==void 0)return l;let g=(P=n.target.queryRenderedFeatures(n.point).find(u=>{var Q;return(Q=e.get(u.layer.id))==null?void 0:Q.interactive}))==null?void 0:P.layer.id;return t.set(n.originalEvent,g),g}}function bL(){let e=new Map;return k2(vv,{map:Vu(null),source:k_(null),layer:k_(null),popupTarget:k_(null),cluster:Vu(),loadedImages:Vu(new Set),minzoom:Vu(0),maxzoom:Vu(24),layerEvent:Vu(null),layerInfo:e,eventTopMost:wL(e)})}function Nx(e){return{subscribe:e.subscribe}}function SL({key:e,setPopupTarget:t=!1,setCluster:n=!1,setMouseEvent:l=!1}){let m=pd(),g=Vu(null),P=Nx(g),u={...m,[e]:Nx(g)};if(t&&(u.popupTarget=P),l){let Q=Vu(null);u.layerEvent=Q,m.layerEvent=Q}return n&&(u.cluster=Vu()),k2(vv,u),{...m,self:g}}function CL(){return SL({key:"popupTarget",setPopupTarget:!0,setMouseEvent:!0})}var C4={exports:{}};(function(e,t){(function(n,l){e.exports=l()})(hh,function(){var n,l,m;function g(u,Q){if(!n)n=Q;else if(!l)l=Q;else{var O="var sharedChunk = {}; ("+n+")(sharedChunk); ("+l+")(sharedChunk);",re={};n(re),m=Q(re),typeof window<"u"&&(m.workerUrl=window.URL.createObjectURL(new Blob([O],{type:"text/javascript"})))}}g(["exports"],function(u){function Q(A,s,c,y){return new(c||(c=Promise))(function(T,N){function V(_e){try{ae(y.next(_e))}catch(Ee){N(Ee)}}function X(_e){try{ae(y.throw(_e))}catch(Ee){N(Ee)}}function ae(_e){var Ee;_e.done?T(_e.value):(Ee=_e.value,Ee instanceof c?Ee:new c(function(ze){ze(Ee)})).then(V,X)}ae((y=y.apply(A,s||[])).next())})}function O(A){return A&&A.__esModule&&Object.prototype.hasOwnProperty.call(A,"default")?A.default:A}typeof SuppressedError=="function"&&SuppressedError;var re=ee;function ee(A,s){this.x=A,this.y=s}ee.prototype={clone:function(){return new ee(this.x,this.y)},add:function(A){return this.clone()._add(A)},sub:function(A){return this.clone()._sub(A)},multByPoint:function(A){return this.clone()._multByPoint(A)},divByPoint:function(A){return this.clone()._divByPoint(A)},mult:function(A){return this.clone()._mult(A)},div:function(A){return this.clone()._div(A)},rotate:function(A){return this.clone()._rotate(A)},rotateAround:function(A,s){return this.clone()._rotateAround(A,s)},matMult:function(A){return this.clone()._matMult(A)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(A){return this.x===A.x&&this.y===A.y},dist:function(A){return Math.sqrt(this.distSqr(A))},distSqr:function(A){var s=A.x-this.x,c=A.y-this.y;return s*s+c*c},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(A){return Math.atan2(this.y-A.y,this.x-A.x)},angleWith:function(A){return this.angleWithSep(A.x,A.y)},angleWithSep:function(A,s){return Math.atan2(this.x*s-this.y*A,this.x*A+this.y*s)},_matMult:function(A){var s=A[2]*this.x+A[3]*this.y;return this.x=A[0]*this.x+A[1]*this.y,this.y=s,this},_add:function(A){return this.x+=A.x,this.y+=A.y,this},_sub:function(A){return this.x-=A.x,this.y-=A.y,this},_mult:function(A){return this.x*=A,this.y*=A,this},_div:function(A){return this.x/=A,this.y/=A,this},_multByPoint:function(A){return this.x*=A.x,this.y*=A.y,this},_divByPoint:function(A){return this.x/=A.x,this.y/=A.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var A=this.y;return this.y=this.x,this.x=-A,this},_rotate:function(A){var s=Math.cos(A),c=Math.sin(A),y=c*this.x+s*this.y;return this.x=s*this.x-c*this.y,this.y=y,this},_rotateAround:function(A,s){var c=Math.cos(A),y=Math.sin(A),T=s.y+y*(this.x-s.x)+c*(this.y-s.y);return this.x=s.x+c*(this.x-s.x)-y*(this.y-s.y),this.y=T,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},ee.convert=function(A){return A instanceof ee?A:Array.isArray(A)?new ee(A[0],A[1]):A};var ce=O(re),le=je;function je(A,s,c,y){this.cx=3*A,this.bx=3*(c-A)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*s,this.by=3*(y-s)-this.cy,this.ay=1-this.cy-this.by,this.p1x=A,this.p1y=s,this.p2x=c,this.p2y=y}je.prototype={sampleCurveX:function(A){return((this.ax*A+this.bx)*A+this.cx)*A},sampleCurveY:function(A){return((this.ay*A+this.by)*A+this.cy)*A},sampleCurveDerivativeX:function(A){return(3*this.ax*A+2*this.bx)*A+this.cx},solveCurveX:function(A,s){if(s===void 0&&(s=1e-6),A<0)return 0;if(A>1)return 1;for(var c=A,y=0;y<8;y++){var T=this.sampleCurveX(c)-A;if(Math.abs(T)<s)return c;var N=this.sampleCurveDerivativeX(c);if(Math.abs(N)<1e-6)break;c-=T/N}var V=0,X=1;for(c=A,y=0;y<20&&(T=this.sampleCurveX(c),!(Math.abs(T-A)<s));y++)A>T?V=c:X=c,c=.5*(X-V)+V;return c},solve:function(A,s){return this.sampleCurveY(this.solveCurveX(A,s))}};var Je=O(le);let Xe,Ke;function xt(){return Xe==null&&(Xe=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),Xe}function gt(){if(Ke==null&&(Ke=!1,xt())){const s=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(s){for(let y=0;y<5*5;y++){const T=4*y;s.fillStyle=`rgb(${T},${T+1},${T+2})`,s.fillRect(y%5,Math.floor(y/5),1,1)}const c=s.getImageData(0,0,5,5).data;for(let y=0;y<5*5*4;y++)if(y%4!=3&&c[y]!==y){Ke=!0;break}}}return Ke||!1}function Mt(A,s,c,y){const T=new Je(A,s,c,y);return function(N){return T.solve(N)}}const Ct=Mt(.25,.1,.25,1);function Te(A,s,c){return Math.min(c,Math.max(s,A))}function Ai(A,s,c){const y=c-s,T=((A-s)%y+y)%y+s;return T===s?c:T}function ii(A,...s){for(const c of s)for(const y in c)A[y]=c[y];return A}let xi=1;function gi(A,s,c){const y={};for(const T in A)y[T]=s.call(c||this,A[T],T,A);return y}function qt(A,s,c){const y={};for(const T in A)s.call(c||this,A[T],T,A)&&(y[T]=A[T]);return y}function di(A){return Array.isArray(A)?A.map(di):typeof A=="object"&&A?gi(A,di):A}const mi={};function vt(A){mi[A]||(typeof console<"u"&&console.warn(A),mi[A]=!0)}function Ut(A,s,c){return(c.y-A.y)*(s.x-A.x)>(s.y-A.y)*(c.x-A.x)}function rt(A){let s=0;for(let c,y,T=0,N=A.length,V=N-1;T<N;V=T++)c=A[T],y=A[V],s+=(y.x-c.x)*(c.y+y.y);return s}function Ft(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}let ui=null;function Lt(A){return typeof ImageBitmap<"u"&&A instanceof ImageBitmap}const Yt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function oi(A,s,c,y,T){return Q(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const N=new VideoFrame(A,{timestamp:0});try{const V=N==null?void 0:N.format;if(!V||!V.startsWith("BGR")&&!V.startsWith("RGB"))throw new Error(`Unrecognized format ${V}`);const X=V.startsWith("BGR"),ae=new Uint8ClampedArray(y*T*4);if(yield N.copyTo(ae,function(_e,Ee,ze,qe,et){const tt=4*Math.max(-Ee,0),ut=(Math.max(0,ze)-ze)*qe*4+tt,ft=4*qe,_t=Math.max(0,Ee),Rt=Math.max(0,ze);return{rect:{x:_t,y:Rt,width:Math.min(_e.width,Ee+qe)-_t,height:Math.min(_e.height,ze+et)-Rt},layout:[{offset:ut,stride:ft}]}}(A,s,c,y,T)),X)for(let _e=0;_e<ae.length;_e+=4){const Ee=ae[_e];ae[_e]=ae[_e+2],ae[_e+2]=Ee}return ae}finally{N.close()}})}let yi,Pi,dn,sn;const Bn={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(A){const s=requestAnimationFrame(A);return{cancel:()=>cancelAnimationFrame(s)}},getImageData(A,s=0){return this.getImageCanvasContext(A).getImageData(-s,-s,A.width+2*s,A.height+2*s)},getImageCanvasContext(A){const s=window.document.createElement("canvas"),c=s.getContext("2d",{willReadFrequently:!0});if(!c)throw new Error("failed to create canvas 2d context");return s.width=A.width,s.height=A.height,c.drawImage(A,0,0,A.width,A.height),c},resolveURL:A=>(dn||(dn=document.createElement("a")),dn.href=A,dn.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(sn==null&&(sn=matchMedia("(prefers-reduced-motion: reduce)")),sn.matches)}},fi={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};class $i extends Error{constructor(s,c,y,T){super(`AJAXError: ${c} (${s}): ${y}`),this.status=s,this.statusText=c,this.url=y,this.body=T}}const li=Ft()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href,Li=A=>fi.REGISTERED_PROTOCOLS[A.substring(0,A.indexOf("://"))];function Ji(A,s){const c=new AbortController,y=new Request(A.url,{method:A.method||"GET",body:A.body,credentials:A.credentials,headers:A.headers,cache:A.cache,referrer:li(),signal:c.signal});let T=!1,N=!1;return A.type==="json"&&y.headers.set("Accept","application/json"),N||fetch(y).then(V=>V.ok?(X=>{(A.type==="arrayBuffer"||A.type==="image"?X.arrayBuffer():A.type==="json"?X.json():X.text()).then(ae=>{N||(T=!0,s(null,ae,X.headers.get("Cache-Control"),X.headers.get("Expires")))}).catch(ae=>{N||s(new Error(ae.message))})})(V):V.blob().then(X=>s(new $i(V.status,V.statusText,A.url,X)))).catch(V=>{V.code!==20&&s(new Error(V.message))}),{cancel:()=>{N=!0,T||c.abort()}}}const wi=function(A,s){if(/:\/\//.test(A.url)&&!/^https?:|^file:/.test(A.url)){if(Ft()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",A,s);if(!Ft())return(Li(A.url)||Ji)(A,s)}if(!(/^file:/.test(c=A.url)||/^file:/.test(li())&&!/^\w+:/.test(c))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return Ji(A,s);if(Ft()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",A,s,void 0,!0)}var c;return function(y,T){const N=new XMLHttpRequest;N.open(y.method||"GET",y.url,!0),y.type!=="arrayBuffer"&&y.type!=="image"||(N.responseType="arraybuffer");for(const V in y.headers)N.setRequestHeader(V,y.headers[V]);return y.type==="json"&&(N.responseType="text",N.setRequestHeader("Accept","application/json")),N.withCredentials=y.credentials==="include",N.onerror=()=>{T(new Error(N.statusText))},N.onload=()=>{if((N.status>=200&&N.status<300||N.status===0)&&N.response!==null){let V=N.response;if(y.type==="json")try{V=JSON.parse(N.response)}catch(X){return T(X)}T(null,V,N.getResponseHeader("Cache-Control"),N.getResponseHeader("Expires"))}else{const V=new Blob([N.response],{type:N.getResponseHeader("Content-Type")});T(new $i(N.status,N.statusText,y.url,V))}},N.send(y.body),{cancel:()=>N.abort()}}(A,s)},ir=function(A,s){return wi(ii(A,{type:"arrayBuffer"}),s)};function kn(A){if(!A||A.indexOf("://")<=0||A.indexOf("data:image/")===0||A.indexOf("blob:")===0)return!0;const s=new URL(A),c=window.location;return s.protocol===c.protocol&&s.host===c.host}function vr(A,s,c){c[A]&&c[A].indexOf(s)!==-1||(c[A]=c[A]||[],c[A].push(s))}function Or(A,s,c){if(c&&c[A]){const y=c[A].indexOf(s);y!==-1&&c[A].splice(y,1)}}class Gi{constructor(s,c={}){ii(this,c),this.type=s}}class zn extends Gi{constructor(s,c={}){super("error",ii({error:s},c))}}class Cs{on(s,c){return this._listeners=this._listeners||{},vr(s,c,this._listeners),this}off(s,c){return Or(s,c,this._listeners),Or(s,c,this._oneTimeListeners),this}once(s,c){return c?(this._oneTimeListeners=this._oneTimeListeners||{},vr(s,c,this._oneTimeListeners),this):new Promise(y=>this.once(s,y))}fire(s,c){typeof s=="string"&&(s=new Gi(s,c||{}));const y=s.type;if(this.listens(y)){s.target=this;const T=this._listeners&&this._listeners[y]?this._listeners[y].slice():[];for(const X of T)X.call(this,s);const N=this._oneTimeListeners&&this._oneTimeListeners[y]?this._oneTimeListeners[y].slice():[];for(const X of N)Or(y,X,this._oneTimeListeners),X.call(this,s);const V=this._eventedParent;V&&(ii(s,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),V.fire(s))}else s instanceof zn&&console.error(s.error);return this}listens(s){return this._listeners&&this._listeners[s]&&this._listeners[s].length>0||this._oneTimeListeners&&this._oneTimeListeners[s]&&this._oneTimeListeners[s].length>0||this._eventedParent&&this._eventedParent.listens(s)}setEventedParent(s,c){return this._eventedParent=s,this._eventedParentData=c,this}}var Kt={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const cn=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function fr(A,s){const c={};for(const y in A)y!=="ref"&&(c[y]=A[y]);return cn.forEach(y=>{y in s&&(c[y]=s[y])}),c}function vn(A,s){if(Array.isArray(A)){if(!Array.isArray(s)||A.length!==s.length)return!1;for(let c=0;c<A.length;c++)if(!vn(A[c],s[c]))return!1;return!0}if(typeof A=="object"&&A!==null&&s!==null){if(typeof s!="object"||Object.keys(A).length!==Object.keys(s).length)return!1;for(const c in A)if(!vn(A[c],s[c]))return!1;return!0}return A===s}const Dn={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function pn(A,s,c){c.push({command:Dn.addSource,args:[A,s[A]]})}function f(A,s,c){s.push({command:Dn.removeSource,args:[A]}),c[A]=!0}function w(A,s,c,y){f(A,c,y),pn(A,s,c)}function B(A,s,c){let y;for(y in A[c])if(Object.prototype.hasOwnProperty.call(A[c],y)&&y!=="data"&&!vn(A[c][y],s[c][y]))return!1;for(y in s[c])if(Object.prototype.hasOwnProperty.call(s[c],y)&&y!=="data"&&!vn(A[c][y],s[c][y]))return!1;return!0}function U(A,s,c,y,T,N){let V;for(V in s=s||{},A=A||{})Object.prototype.hasOwnProperty.call(A,V)&&(vn(A[V],s[V])||c.push({command:N,args:[y,V,s[V],T]}));for(V in s)Object.prototype.hasOwnProperty.call(s,V)&&!Object.prototype.hasOwnProperty.call(A,V)&&(vn(A[V],s[V])||c.push({command:N,args:[y,V,s[V],T]}))}function Z(A){return A.id}function K(A,s){return A[s.id]=s,A}class se{constructor(s,c,y,T){this.message=(s?`${s}: `:"")+y,T&&(this.identifier=T),c!=null&&c.__line__&&(this.line=c.__line__)}}function oe(A,...s){for(const c of s)for(const y in c)A[y]=c[y];return A}class fe extends Error{constructor(s,c){super(c),this.message=c,this.key=s}}class ye{constructor(s,c=[]){this.parent=s,this.bindings={};for(const[y,T]of c)this.bindings[y]=T}concat(s){return new ye(this,s)}get(s){if(this.bindings[s])return this.bindings[s];if(this.parent)return this.parent.get(s);throw new Error(`${s} not found in scope.`)}has(s){return!!this.bindings[s]||!!this.parent&&this.parent.has(s)}}const Me={kind:"null"},xe={kind:"number"},ke={kind:"string"},be={kind:"boolean"},Ne={kind:"color"},Re={kind:"object"},Fe={kind:"value"},de={kind:"collator"},Ae={kind:"formatted"},W={kind:"padding"},ie={kind:"resolvedImage"},he={kind:"variableAnchorOffsetCollection"};function me(A,s){return{kind:"array",itemType:A,N:s}}function pe(A){if(A.kind==="array"){const s=pe(A.itemType);return typeof A.N=="number"?`array<${s}, ${A.N}>`:A.itemType.kind==="value"?"array":`array<${s}>`}return A.kind}const De=[Me,xe,ke,be,Ne,Ae,Re,me(Fe),W,ie,he];function Le(A,s){if(s.kind==="error")return null;if(A.kind==="array"){if(s.kind==="array"&&(s.N===0&&s.itemType.kind==="value"||!Le(A.itemType,s.itemType))&&(typeof A.N!="number"||A.N===s.N))return null}else{if(A.kind===s.kind)return null;if(A.kind==="value"){for(const c of De)if(!Le(c,s))return null}}return`Expected ${pe(A)} but found ${pe(s)} instead.`}function Pe(A,s){return s.some(c=>c.kind===A.kind)}function Ve(A,s){return s.some(c=>c==="null"?A===null:c==="array"?Array.isArray(A):c==="object"?A&&!Array.isArray(A)&&typeof A=="object":c===typeof A)}function Ue(A,s){return A.kind==="array"&&s.kind==="array"?A.itemType.kind===s.itemType.kind&&typeof A.N=="number":A.kind===s.kind}const ge=.96422,Ce=.82521,Qe=4/29,nt=6/29,i=3*nt*nt,ue=nt*nt*nt,Dt=Math.PI/180,Vt=180/Math.PI;function Wt(A){return(A%=360)<0&&(A+=360),A}function It([A,s,c,y]){let T,N;const V=hi((.2225045*(A=Bt(A))+.7168786*(s=Bt(s))+.0606169*(c=Bt(c)))/1);A===s&&s===c?T=N=V:(T=hi((.4360747*A+.3850649*s+.1430804*c)/ge),N=hi((.0139322*A+.0971045*s+.7141733*c)/Ce));const X=116*V-16;return[X<0?0:X,500*(T-V),200*(V-N),y]}function Bt(A){return A<=.04045?A/12.92:Math.pow((A+.055)/1.055,2.4)}function hi(A){return A>ue?Math.pow(A,1/3):A/i+Qe}function Zt([A,s,c,y]){let T=(A+16)/116,N=isNaN(s)?T:T+s/500,V=isNaN(c)?T:T-c/200;return T=1*Ti(T),N=ge*Ti(N),V=Ce*Ti(V),[ei(3.1338561*N-1.6168667*T-.4906146*V),ei(-.9787684*N+1.9161415*T+.033454*V),ei(.0719453*N-.2289914*T+1.4052427*V),y]}function ei(A){return(A=A<=.00304?12.92*A:1.055*Math.pow(A,1/2.4)-.055)<0?0:A>1?1:A}function Ti(A){return A>nt?A*A*A:i*(A-Qe)}function Yi(A){return parseInt(A.padEnd(2,A),16)/255}function wn(A,s){return An(s?A/100:A,0,1)}function An(A,s,c){return Math.min(Math.max(s,A),c)}function en(A){return!A.some(Number.isNaN)}const ar={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class pi{constructor(s,c,y,T=1,N=!0){this.r=s,this.g=c,this.b=y,this.a=T,N||(this.r*=T,this.g*=T,this.b*=T,T||this.overwriteGetter("rgb",[s,c,y,T]))}static parse(s){if(s instanceof pi)return s;if(typeof s!="string")return;const c=function(y){if((y=y.toLowerCase().trim())==="transparent")return[0,0,0,0];const T=ar[y];if(T){const[V,X,ae]=T;return[V/255,X/255,ae/255,1]}if(y.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(y)){const V=y.length<6?1:2;let X=1;return[Yi(y.slice(X,X+=V)),Yi(y.slice(X,X+=V)),Yi(y.slice(X,X+=V)),Yi(y.slice(X,X+V)||"ff")]}if(y.startsWith("rgb")){const V=y.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(V){const[X,ae,_e,Ee,ze,qe,et,tt,ut,ft,_t,Rt]=V,Pt=[Ee||" ",et||" ",ft].join("");if(Pt==="  "||Pt==="  /"||Pt===",,"||Pt===",,,"){const Nt=[_e,qe,ut].join(""),Xt=Nt==="%%%"?100:Nt===""?255:0;if(Xt){const _i=[An(+ae/Xt,0,1),An(+ze/Xt,0,1),An(+tt/Xt,0,1),_t?wn(+_t,Rt):1];if(en(_i))return _i}}return}}const N=y.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(N){const[V,X,ae,_e,Ee,ze,qe,et,tt]=N,ut=[ae||" ",Ee||" ",qe].join("");if(ut==="  "||ut==="  /"||ut===",,"||ut===",,,"){const ft=[+X,An(+_e,0,100),An(+ze,0,100),et?wn(+et,tt):1];if(en(ft))return function([_t,Rt,Pt,Nt]){function Xt(_i){const Wi=(_i+_t/30)%12,hn=Rt*Math.min(Pt,1-Pt);return Pt-hn*Math.max(-1,Math.min(Wi-3,9-Wi,1))}return _t=Wt(_t),Rt/=100,Pt/=100,[Xt(0),Xt(8),Xt(4),Nt]}(ft)}}}(s);return c?new pi(...c,!1):void 0}get rgb(){const{r:s,g:c,b:y,a:T}=this,N=T||1/0;return this.overwriteGetter("rgb",[s/N,c/N,y/N,T])}get hcl(){return this.overwriteGetter("hcl",function(s){const[c,y,T,N]=It(s),V=Math.sqrt(y*y+T*T);return[Math.round(1e4*V)?Wt(Math.atan2(T,y)*Vt):NaN,V,c,N]}(this.rgb))}get lab(){return this.overwriteGetter("lab",It(this.rgb))}overwriteGetter(s,c){return Object.defineProperty(this,s,{value:c}),c}toString(){const[s,c,y,T]=this.rgb;return`rgba(${[s,c,y].map(N=>Math.round(255*N)).join(",")},${T})`}}pi.black=new pi(0,0,0,1),pi.white=new pi(1,1,1,1),pi.transparent=new pi(0,0,0,0),pi.red=new pi(1,0,0,1);class Zn{constructor(s,c,y){this.sensitivity=s?c?"variant":"case":c?"accent":"base",this.locale=y,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(s,c){return this.collator.compare(s,c)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Xi{constructor(s,c,y,T,N){this.text=s,this.image=c,this.scale=y,this.fontStack=T,this.textColor=N}}class mt{constructor(s){this.sections=s}static fromString(s){return new mt([new Xi(s,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(s=>s.text.length!==0||s.image&&s.image.name.length!==0)}static factory(s){return s instanceof mt?s:mt.fromString(s)}toString(){return this.sections.length===0?"":this.sections.map(s=>s.text).join("")}}class bi{constructor(s){this.values=s.slice()}static parse(s){if(s instanceof bi)return s;if(typeof s=="number")return new bi([s,s,s,s]);if(Array.isArray(s)&&!(s.length<1||s.length>4)){for(const c of s)if(typeof c!="number")return;switch(s.length){case 1:s=[s[0],s[0],s[0],s[0]];break;case 2:s=[s[0],s[1],s[0],s[1]];break;case 3:s=[s[0],s[1],s[2],s[1]]}return new bi(s)}}toString(){return JSON.stringify(this.values)}}const At=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Ni{constructor(s){this.values=s.slice()}static parse(s){if(s instanceof Ni)return s;if(Array.isArray(s)&&!(s.length<1)&&s.length%2==0){for(let c=0;c<s.length;c+=2){const y=s[c],T=s[c+1];if(typeof y!="string"||!At.has(y)||!Array.isArray(T)||T.length!==2||typeof T[0]!="number"||typeof T[1]!="number")return}return new Ni(s)}}toString(){return JSON.stringify(this.values)}}class lr{constructor(s){this.name=s.name,this.available=s.available}toString(){return this.name}static fromString(s){return s?new lr({name:s,available:!1}):null}}function es(A,s,c,y){return typeof A=="number"&&A>=0&&A<=255&&typeof s=="number"&&s>=0&&s<=255&&typeof c=="number"&&c>=0&&c<=255?y===void 0||typeof y=="number"&&y>=0&&y<=1?null:`Invalid rgba value [${[A,s,c,y].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof y=="number"?[A,s,c,y]:[A,s,c]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function kr(A){if(A===null||typeof A=="string"||typeof A=="boolean"||typeof A=="number"||A instanceof pi||A instanceof Zn||A instanceof mt||A instanceof bi||A instanceof Ni||A instanceof lr)return!0;if(Array.isArray(A)){for(const s of A)if(!kr(s))return!1;return!0}if(typeof A=="object"){for(const s in A)if(!kr(A[s]))return!1;return!0}return!1}function ht(A){if(A===null)return Me;if(typeof A=="string")return ke;if(typeof A=="boolean")return be;if(typeof A=="number")return xe;if(A instanceof pi)return Ne;if(A instanceof Zn)return de;if(A instanceof mt)return Ae;if(A instanceof bi)return W;if(A instanceof Ni)return he;if(A instanceof lr)return ie;if(Array.isArray(A)){const s=A.length;let c;for(const y of A){const T=ht(y);if(c){if(c===T)continue;c=Fe;break}c=T}return me(c||Fe,s)}return Re}function Tn(A){const s=typeof A;return A===null?"":s==="string"||s==="number"||s==="boolean"?String(A):A instanceof pi||A instanceof mt||A instanceof bi||A instanceof Ni||A instanceof lr?A.toString():JSON.stringify(A)}class it{constructor(s,c){this.type=s,this.value=c}static parse(s,c){if(s.length!==2)return c.error(`'literal' expression requires exactly one argument, but found ${s.length-1} instead.`);if(!kr(s[1]))return c.error("invalid value");const y=s[1];let T=ht(y);const N=c.expectedType;return T.kind!=="array"||T.N!==0||!N||N.kind!=="array"||typeof N.N=="number"&&N.N!==0||(T=N),new it(T,y)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class nr{constructor(s){this.name="ExpressionEvaluationError",this.message=s}toJSON(){return this.message}}const ks={string:ke,number:xe,boolean:be,object:Re};class Es{constructor(s,c){this.type=s,this.args=c}static parse(s,c){if(s.length<2)return c.error("Expected at least one argument.");let y,T=1;const N=s[0];if(N==="array"){let X,ae;if(s.length>2){const _e=s[1];if(typeof _e!="string"||!(_e in ks)||_e==="object")return c.error('The item type argument of "array" must be one of string, number, boolean',1);X=ks[_e],T++}else X=Fe;if(s.length>3){if(s[2]!==null&&(typeof s[2]!="number"||s[2]<0||s[2]!==Math.floor(s[2])))return c.error('The length argument to "array" must be a positive integer literal',2);ae=s[2],T++}y=me(X,ae)}else{if(!ks[N])throw new Error(`Types doesn't contain name = ${N}`);y=ks[N]}const V=[];for(;T<s.length;T++){const X=c.parse(s[T],T,Fe);if(!X)return null;V.push(X)}return new Es(y,V)}evaluate(s){for(let c=0;c<this.args.length;c++){const y=this.args[c].evaluate(s);if(!Le(this.type,ht(y)))return y;if(c===this.args.length-1)throw new nr(`Expected value to be of type ${pe(this.type)}, but found ${pe(ht(y))} instead.`)}throw new Error}eachChild(s){this.args.forEach(s)}outputDefined(){return this.args.every(s=>s.outputDefined())}}const Ta={"to-boolean":be,"to-color":Ne,"to-number":xe,"to-string":ke};class Hs{constructor(s,c){this.type=s,this.args=c}static parse(s,c){if(s.length<2)return c.error("Expected at least one argument.");const y=s[0];if(!Ta[y])throw new Error(`Can't parse ${y} as it is not part of the known types`);if((y==="to-boolean"||y==="to-string")&&s.length!==2)return c.error("Expected one argument.");const T=Ta[y],N=[];for(let V=1;V<s.length;V++){const X=c.parse(s[V],V,Fe);if(!X)return null;N.push(X)}return new Hs(T,N)}evaluate(s){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(s);case"color":{let c,y;for(const T of this.args){if(c=T.evaluate(s),y=null,c instanceof pi)return c;if(typeof c=="string"){const N=s.parseColor(c);if(N)return N}else if(Array.isArray(c)&&(y=c.length<3||c.length>4?`Invalid rbga value ${JSON.stringify(c)}: expected an array containing either three or four numeric values.`:es(c[0],c[1],c[2],c[3]),!y))return new pi(c[0]/255,c[1]/255,c[2]/255,c[3])}throw new nr(y||`Could not parse color from value '${typeof c=="string"?c:JSON.stringify(c)}'`)}case"padding":{let c;for(const y of this.args){c=y.evaluate(s);const T=bi.parse(c);if(T)return T}throw new nr(`Could not parse padding from value '${typeof c=="string"?c:JSON.stringify(c)}'`)}case"variableAnchorOffsetCollection":{let c;for(const y of this.args){c=y.evaluate(s);const T=Ni.parse(c);if(T)return T}throw new nr(`Could not parse variableAnchorOffsetCollection from value '${typeof c=="string"?c:JSON.stringify(c)}'`)}case"number":{let c=null;for(const y of this.args){if(c=y.evaluate(s),c===null)return 0;const T=Number(c);if(!isNaN(T))return T}throw new nr(`Could not convert ${JSON.stringify(c)} to number.`)}case"formatted":return mt.fromString(Tn(this.args[0].evaluate(s)));case"resolvedImage":return lr.fromString(Tn(this.args[0].evaluate(s)));default:return Tn(this.args[0].evaluate(s))}}eachChild(s){this.args.forEach(s)}outputDefined(){return this.args.every(s=>s.outputDefined())}}const co=["Unknown","Point","LineString","Polygon"];class Pa{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?co[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(s){let c=this._parseColorCache[s];return c||(c=this._parseColorCache[s]=pi.parse(s)),c}}class os{constructor(s,c,y=[],T,N=new ye,V=[]){this.registry=s,this.path=y,this.key=y.map(X=>`[${X}]`).join(""),this.scope=N,this.errors=V,this.expectedType=T,this._isConstant=c}parse(s,c,y,T,N={}){return c?this.concat(c,y,T)._parse(s,N):this._parse(s,N)}_parse(s,c){function y(T,N,V){return V==="assert"?new Es(N,[T]):V==="coerce"?new Hs(N,[T]):T}if(s!==null&&typeof s!="string"&&typeof s!="boolean"&&typeof s!="number"||(s=["literal",s]),Array.isArray(s)){if(s.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const T=s[0];if(typeof T!="string")return this.error(`Expression name must be a string, but found ${typeof T} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const N=this.registry[T];if(N){let V=N.parse(s,this);if(!V)return null;if(this.expectedType){const X=this.expectedType,ae=V.type;if(X.kind!=="string"&&X.kind!=="number"&&X.kind!=="boolean"&&X.kind!=="object"&&X.kind!=="array"||ae.kind!=="value")if(X.kind!=="color"&&X.kind!=="formatted"&&X.kind!=="resolvedImage"||ae.kind!=="value"&&ae.kind!=="string")if(X.kind!=="padding"||ae.kind!=="value"&&ae.kind!=="number"&&ae.kind!=="array")if(X.kind!=="variableAnchorOffsetCollection"||ae.kind!=="value"&&ae.kind!=="array"){if(this.checkSubtype(X,ae))return null}else V=y(V,X,c.typeAnnotation||"coerce");else V=y(V,X,c.typeAnnotation||"coerce");else V=y(V,X,c.typeAnnotation||"coerce");else V=y(V,X,c.typeAnnotation||"assert")}if(!(V instanceof it)&&V.type.kind!=="resolvedImage"&&this._isConstant(V)){const X=new Pa;try{V=new it(V.type,V.evaluate(X))}catch(ae){return this.error(ae.message),null}}return V}return this.error(`Unknown expression "${T}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(s===void 0?"'undefined' value invalid. Use null instead.":typeof s=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof s} instead.`)}concat(s,c,y){const T=typeof s=="number"?this.path.concat(s):this.path,N=y?this.scope.concat(y):this.scope;return new os(this.registry,this._isConstant,T,c||null,N,this.errors)}error(s,...c){const y=`${this.key}${c.map(T=>`[${T}]`).join("")}`;this.errors.push(new fe(y,s))}checkSubtype(s,c){const y=Le(s,c);return y&&this.error(y),y}}class an{constructor(s,c,y){this.type=de,this.locale=y,this.caseSensitive=s,this.diacriticSensitive=c}static parse(s,c){if(s.length!==2)return c.error("Expected one argument.");const y=s[1];if(typeof y!="object"||Array.isArray(y))return c.error("Collator options argument must be an object.");const T=c.parse(y["case-sensitive"]!==void 0&&y["case-sensitive"],1,be);if(!T)return null;const N=c.parse(y["diacritic-sensitive"]!==void 0&&y["diacritic-sensitive"],1,be);if(!N)return null;let V=null;return y.locale&&(V=c.parse(y.locale,1,ke),!V)?null:new an(T,N,V)}evaluate(s){return new Zn(this.caseSensitive.evaluate(s),this.diacriticSensitive.evaluate(s),this.locale?this.locale.evaluate(s):null)}eachChild(s){s(this.caseSensitive),s(this.diacriticSensitive),this.locale&&s(this.locale)}outputDefined(){return!1}}const ts=8192;function yr(A,s){A[0]=Math.min(A[0],s[0]),A[1]=Math.min(A[1],s[1]),A[2]=Math.max(A[2],s[0]),A[3]=Math.max(A[3],s[1])}function Zs(A,s){return!(A[0]<=s[0]||A[2]>=s[2]||A[1]<=s[1]||A[3]>=s[3])}function va(A,s){const c=(180+A[0])/360,y=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+A[1]*Math.PI/360)))/360,T=Math.pow(2,s.z);return[Math.round(c*T*ts),Math.round(y*T*ts)]}function Ba(A,s,c){const y=A[0]-s[0],T=A[1]-s[1],N=A[0]-c[0],V=A[1]-c[1];return y*V-N*T==0&&y*N<=0&&T*V<=0}function Bs(A,s){let c=!1;for(let V=0,X=s.length;V<X;V++){const ae=s[V];for(let _e=0,Ee=ae.length;_e<Ee-1;_e++){if(Ba(A,ae[_e],ae[_e+1]))return!1;(T=ae[_e])[1]>(y=A)[1]!=(N=ae[_e+1])[1]>y[1]&&y[0]<(N[0]-T[0])*(y[1]-T[1])/(N[1]-T[1])+T[0]&&(c=!c)}}var y,T,N;return c}function Ds(A,s){for(let c=0;c<s.length;c++)if(Bs(A,s[c]))return!0;return!1}function M(A,s,c,y){const T=y[0]-c[0],N=y[1]-c[1],V=(A[0]-c[0])*N-T*(A[1]-c[1]),X=(s[0]-c[0])*N-T*(s[1]-c[1]);return V>0&&X<0||V<0&&X>0}function te(A,s,c){for(const _e of c)for(let Ee=0;Ee<_e.length-1;++Ee)if((X=[(V=_e[Ee+1])[0]-(N=_e[Ee])[0],V[1]-N[1]])[0]*(ae=[(T=s)[0]-(y=A)[0],T[1]-y[1]])[1]-X[1]*ae[0]!=0&&M(y,T,N,V)&&M(N,V,y,T))return!0;var y,T,N,V,X,ae;return!1}function Be(A,s){for(let c=0;c<A.length;++c)if(!Bs(A[c],s))return!1;for(let c=0;c<A.length-1;++c)if(te(A[c],A[c+1],s))return!1;return!0}function Ye(A,s){for(let c=0;c<s.length;c++)if(Be(A,s[c]))return!0;return!1}function dt(A,s,c){const y=[];for(let T=0;T<A.length;T++){const N=[];for(let V=0;V<A[T].length;V++){const X=va(A[T][V],c);yr(s,X),N.push(X)}y.push(N)}return y}function Qt(A,s,c){const y=[];for(let T=0;T<A.length;T++){const N=dt(A[T],s,c);y.push(N)}return y}function ti(A,s,c,y){if(A[0]<c[0]||A[0]>c[2]){const T=.5*y;let N=A[0]-c[0]>T?-y:c[0]-A[0]>T?y:0;N===0&&(N=A[0]-c[2]>T?-y:c[2]-A[0]>T?y:0),A[0]+=N}yr(s,A)}function Ii(A,s,c,y){const T=Math.pow(2,y.z)*ts,N=[y.x*ts,y.y*ts],V=[];for(const X of A)for(const ae of X){const _e=[ae.x+N[0],ae.y+N[1]];ti(_e,s,c,T),V.push(_e)}return V}function zi(A,s,c,y){const T=Math.pow(2,y.z)*ts,N=[y.x*ts,y.y*ts],V=[];for(const ae of A){const _e=[];for(const Ee of ae){const ze=[Ee.x+N[0],Ee.y+N[1]];yr(s,ze),_e.push(ze)}V.push(_e)}if(s[2]-s[0]<=T/2){(X=s)[0]=X[1]=1/0,X[2]=X[3]=-1/0;for(const ae of V)for(const _e of ae)ti(_e,s,c,T)}var X;return V}class En{constructor(s,c){this.type=be,this.geojson=s,this.geometries=c}static parse(s,c){if(s.length!==2)return c.error(`'within' expression requires exactly one argument, but found ${s.length-1} instead.`);if(kr(s[1])){const y=s[1];if(y.type==="FeatureCollection")for(let T=0;T<y.features.length;++T){const N=y.features[T].geometry.type;if(N==="Polygon"||N==="MultiPolygon")return new En(y,y.features[T].geometry)}else if(y.type==="Feature"){const T=y.geometry.type;if(T==="Polygon"||T==="MultiPolygon")return new En(y,y.geometry)}else if(y.type==="Polygon"||y.type==="MultiPolygon")return new En(y,y)}return c.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(s){if(s.geometry()!=null&&s.canonicalID()!=null){if(s.geometryType()==="Point")return function(c,y){const T=[1/0,1/0,-1/0,-1/0],N=[1/0,1/0,-1/0,-1/0],V=c.canonicalID();if(y.type==="Polygon"){const X=dt(y.coordinates,N,V),ae=Ii(c.geometry(),T,N,V);if(!Zs(T,N))return!1;for(const _e of ae)if(!Bs(_e,X))return!1}if(y.type==="MultiPolygon"){const X=Qt(y.coordinates,N,V),ae=Ii(c.geometry(),T,N,V);if(!Zs(T,N))return!1;for(const _e of ae)if(!Ds(_e,X))return!1}return!0}(s,this.geometries);if(s.geometryType()==="LineString")return function(c,y){const T=[1/0,1/0,-1/0,-1/0],N=[1/0,1/0,-1/0,-1/0],V=c.canonicalID();if(y.type==="Polygon"){const X=dt(y.coordinates,N,V),ae=zi(c.geometry(),T,N,V);if(!Zs(T,N))return!1;for(const _e of ae)if(!Be(_e,X))return!1}if(y.type==="MultiPolygon"){const X=Qt(y.coordinates,N,V),ae=zi(c.geometry(),T,N,V);if(!Zs(T,N))return!1;for(const _e of ae)if(!Ye(_e,X))return!1}return!0}(s,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class Ln{constructor(s,c){this.type=c.type,this.name=s,this.boundExpression=c}static parse(s,c){if(s.length!==2||typeof s[1]!="string")return c.error("'var' expression requires exactly one string literal argument.");const y=s[1];return c.scope.has(y)?new Ln(y,c.scope.get(y)):c.error(`Unknown variable "${y}". Make sure "${y}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(s){return this.boundExpression.evaluate(s)}eachChild(){}outputDefined(){return!1}}class or{constructor(s,c,y,T){this.name=s,this.type=c,this._evaluate=y,this.args=T}evaluate(s){return this._evaluate(s,this.args)}eachChild(s){this.args.forEach(s)}outputDefined(){return!1}static parse(s,c){const y=s[0],T=or.definitions[y];if(!T)return c.error(`Unknown expression "${y}". If you wanted a literal array, use ["literal", [...]].`,0);const N=Array.isArray(T)?T[0]:T.type,V=Array.isArray(T)?[[T[1],T[2]]]:T.overloads,X=V.filter(([_e])=>!Array.isArray(_e)||_e.length===s.length-1);let ae=null;for(const[_e,Ee]of X){ae=new os(c.registry,na,c.path,null,c.scope);const ze=[];let qe=!1;for(let et=1;et<s.length;et++){const tt=s[et],ut=Array.isArray(_e)?_e[et-1]:_e.type,ft=ae.parse(tt,1+ze.length,ut);if(!ft){qe=!0;break}ze.push(ft)}if(!qe)if(Array.isArray(_e)&&_e.length!==ze.length)ae.error(`Expected ${_e.length} arguments, but found ${ze.length} instead.`);else{for(let et=0;et<ze.length;et++){const tt=Array.isArray(_e)?_e[et]:_e.type,ut=ze[et];ae.concat(et+1).checkSubtype(tt,ut.type)}if(ae.errors.length===0)return new or(y,N,Ee,ze)}}if(X.length===1)c.errors.push(...ae.errors);else{const _e=(X.length?X:V).map(([ze])=>{return qe=ze,Array.isArray(qe)?`(${qe.map(pe).join(", ")})`:`(${pe(qe.type)}...)`;var qe}).join(" | "),Ee=[];for(let ze=1;ze<s.length;ze++){const qe=c.parse(s[ze],1+Ee.length);if(!qe)return null;Ee.push(pe(qe.type))}c.error(`Expected arguments of type ${_e}, but found (${Ee.join(", ")}) instead.`)}return null}static register(s,c){or.definitions=c;for(const y in c)s[y]=or}}function na(A){if(A instanceof Ln)return na(A.boundExpression);if(A instanceof or&&A.name==="error"||A instanceof an||A instanceof En)return!1;const s=A instanceof Hs||A instanceof Es;let c=!0;return A.eachChild(y=>{c=s?c&&na(y):c&&y instanceof it}),!!c&&ra(A)&&Da(A,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function ra(A){if(A instanceof or&&(A.name==="get"&&A.args.length===1||A.name==="feature-state"||A.name==="has"&&A.args.length===1||A.name==="properties"||A.name==="geometry-type"||A.name==="id"||/^filter-/.test(A.name))||A instanceof En)return!1;let s=!0;return A.eachChild(c=>{s&&!ra(c)&&(s=!1)}),s}function sa(A){if(A instanceof or&&A.name==="feature-state")return!1;let s=!0;return A.eachChild(c=>{s&&!sa(c)&&(s=!1)}),s}function Da(A,s){if(A instanceof or&&s.indexOf(A.name)>=0)return!1;let c=!0;return A.eachChild(y=>{c&&!Da(y,s)&&(c=!1)}),c}function Yn(A,s){const c=A.length-1;let y,T,N=0,V=c,X=0;for(;N<=V;)if(X=Math.floor((N+V)/2),y=A[X],T=A[X+1],y<=s){if(X===c||s<T)return X;N=X+1}else{if(!(y>s))throw new nr("Input is not a number.");V=X-1}return 0}class yn{constructor(s,c,y){this.type=s,this.input=c,this.labels=[],this.outputs=[];for(const[T,N]of y)this.labels.push(T),this.outputs.push(N)}static parse(s,c){if(s.length-1<4)return c.error(`Expected at least 4 arguments, but found only ${s.length-1}.`);if((s.length-1)%2!=0)return c.error("Expected an even number of arguments.");const y=c.parse(s[1],1,xe);if(!y)return null;const T=[];let N=null;c.expectedType&&c.expectedType.kind!=="value"&&(N=c.expectedType);for(let V=1;V<s.length;V+=2){const X=V===1?-1/0:s[V],ae=s[V+1],_e=V,Ee=V+1;if(typeof X!="number")return c.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',_e);if(T.length&&T[T.length-1][0]>=X)return c.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',_e);const ze=c.parse(ae,Ee,N);if(!ze)return null;N=N||ze.type,T.push([X,ze])}return new yn(N,y,T)}evaluate(s){const c=this.labels,y=this.outputs;if(c.length===1)return y[0].evaluate(s);const T=this.input.evaluate(s);if(T<=c[0])return y[0].evaluate(s);const N=c.length;return T>=c[N-1]?y[N-1].evaluate(s):y[Yn(c,T)].evaluate(s)}eachChild(s){s(this.input);for(const c of this.outputs)s(c)}outputDefined(){return this.outputs.every(s=>s.outputDefined())}}function Rn(A,s,c){return A+c*(s-A)}function ur(A,s,c){return A.map((y,T)=>Rn(y,s[T],c))}const is={number:Rn,color:function(A,s,c,y="rgb"){switch(y){case"rgb":{const[T,N,V,X]=ur(A.rgb,s.rgb,c);return new pi(T,N,V,X,!1)}case"hcl":{const[T,N,V,X]=A.hcl,[ae,_e,Ee,ze]=s.hcl;let qe,et;if(isNaN(T)||isNaN(ae))isNaN(T)?isNaN(ae)?qe=NaN:(qe=ae,V!==1&&V!==0||(et=_e)):(qe=T,Ee!==1&&Ee!==0||(et=N));else{let Rt=ae-T;ae>T&&Rt>180?Rt-=360:ae<T&&T-ae>180&&(Rt+=360),qe=T+c*Rt}const[tt,ut,ft,_t]=function([Rt,Pt,Nt,Xt]){return Rt=isNaN(Rt)?0:Rt*Dt,Zt([Nt,Math.cos(Rt)*Pt,Math.sin(Rt)*Pt,Xt])}([qe,et??Rn(N,_e,c),Rn(V,Ee,c),Rn(X,ze,c)]);return new pi(tt,ut,ft,_t,!1)}case"lab":{const[T,N,V,X]=Zt(ur(A.lab,s.lab,c));return new pi(T,N,V,X,!1)}}},array:ur,padding:function(A,s,c){return new bi(ur(A.values,s.values,c))},variableAnchorOffsetCollection:function(A,s,c){const y=A.values,T=s.values;if(y.length!==T.length)throw new nr(`Cannot interpolate values of different length. from: ${A.toString()}, to: ${s.toString()}`);const N=[];for(let V=0;V<y.length;V+=2){if(y[V]!==T[V])throw new nr(`Cannot interpolate values containing mismatched anchors. from[${V}]: ${y[V]}, to[${V}]: ${T[V]}`);N.push(y[V]);const[X,ae]=y[V+1],[_e,Ee]=T[V+1];N.push([Rn(X,_e,c),Rn(ae,Ee,c)])}return new Ni(N)}};class dr{constructor(s,c,y,T,N){this.type=s,this.operator=c,this.interpolation=y,this.input=T,this.labels=[],this.outputs=[];for(const[V,X]of N)this.labels.push(V),this.outputs.push(X)}static interpolationFactor(s,c,y,T){let N=0;if(s.name==="exponential")N=fo(c,s.base,y,T);else if(s.name==="linear")N=fo(c,1,y,T);else if(s.name==="cubic-bezier"){const V=s.controlPoints;N=new Je(V[0],V[1],V[2],V[3]).solve(fo(c,1,y,T))}return N}static parse(s,c){let[y,T,N,...V]=s;if(!Array.isArray(T)||T.length===0)return c.error("Expected an interpolation type expression.",1);if(T[0]==="linear")T={name:"linear"};else if(T[0]==="exponential"){const _e=T[1];if(typeof _e!="number")return c.error("Exponential interpolation requires a numeric base.",1,1);T={name:"exponential",base:_e}}else{if(T[0]!=="cubic-bezier")return c.error(`Unknown interpolation type ${String(T[0])}`,1,0);{const _e=T.slice(1);if(_e.length!==4||_e.some(Ee=>typeof Ee!="number"||Ee<0||Ee>1))return c.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);T={name:"cubic-bezier",controlPoints:_e}}}if(s.length-1<4)return c.error(`Expected at least 4 arguments, but found only ${s.length-1}.`);if((s.length-1)%2!=0)return c.error("Expected an even number of arguments.");if(N=c.parse(N,2,xe),!N)return null;const X=[];let ae=null;y==="interpolate-hcl"||y==="interpolate-lab"?ae=Ne:c.expectedType&&c.expectedType.kind!=="value"&&(ae=c.expectedType);for(let _e=0;_e<V.length;_e+=2){const Ee=V[_e],ze=V[_e+1],qe=_e+3,et=_e+4;if(typeof Ee!="number")return c.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',qe);if(X.length&&X[X.length-1][0]>=Ee)return c.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',qe);const tt=c.parse(ze,et,ae);if(!tt)return null;ae=ae||tt.type,X.push([Ee,tt])}return Ue(ae,xe)||Ue(ae,Ne)||Ue(ae,W)||Ue(ae,he)||Ue(ae,me(xe))?new dr(ae,y,T,N,X):c.error(`Type ${pe(ae)} is not interpolatable.`)}evaluate(s){const c=this.labels,y=this.outputs;if(c.length===1)return y[0].evaluate(s);const T=this.input.evaluate(s);if(T<=c[0])return y[0].evaluate(s);const N=c.length;if(T>=c[N-1])return y[N-1].evaluate(s);const V=Yn(c,T),X=dr.interpolationFactor(this.interpolation,T,c[V],c[V+1]),ae=y[V].evaluate(s),_e=y[V+1].evaluate(s);switch(this.operator){case"interpolate":return is[this.type.kind](ae,_e,X);case"interpolate-hcl":return is.color(ae,_e,X,"hcl");case"interpolate-lab":return is.color(ae,_e,X,"lab")}}eachChild(s){s(this.input);for(const c of this.outputs)s(c)}outputDefined(){return this.outputs.every(s=>s.outputDefined())}}function fo(A,s,c,y){const T=y-c,N=A-c;return T===0?0:s===1?N/T:(Math.pow(s,N)-1)/(Math.pow(s,T)-1)}class Go{constructor(s,c){this.type=s,this.args=c}static parse(s,c){if(s.length<2)return c.error("Expectected at least one argument.");let y=null;const T=c.expectedType;T&&T.kind!=="value"&&(y=T);const N=[];for(const X of s.slice(1)){const ae=c.parse(X,1+N.length,y,void 0,{typeAnnotation:"omit"});if(!ae)return null;y=y||ae.type,N.push(ae)}if(!y)throw new Error("No output type");const V=T&&N.some(X=>Le(T,X.type));return new Go(V?Fe:y,N)}evaluate(s){let c,y=null,T=0;for(const N of this.args)if(T++,y=N.evaluate(s),y&&y instanceof lr&&!y.available&&(c||(c=y.name),y=null,T===this.args.length&&(y=c)),y!==null)break;return y}eachChild(s){this.args.forEach(s)}outputDefined(){return this.args.every(s=>s.outputDefined())}}class ya{constructor(s,c){this.type=c.type,this.bindings=[].concat(s),this.result=c}evaluate(s){return this.result.evaluate(s)}eachChild(s){for(const c of this.bindings)s(c[1]);s(this.result)}static parse(s,c){if(s.length<4)return c.error(`Expected at least 3 arguments, but found ${s.length-1} instead.`);const y=[];for(let N=1;N<s.length-1;N+=2){const V=s[N];if(typeof V!="string")return c.error(`Expected string, but found ${typeof V} instead.`,N);if(/[^a-zA-Z0-9_]/.test(V))return c.error("Variable names must contain only alphanumeric characters or '_'.",N);const X=c.parse(s[N+1],N+1);if(!X)return null;y.push([V,X])}const T=c.parse(s[s.length-1],s.length-1,c.expectedType,y);return T?new ya(y,T):null}outputDefined(){return this.result.outputDefined()}}class Ya{constructor(s,c,y){this.type=s,this.index=c,this.input=y}static parse(s,c){if(s.length!==3)return c.error(`Expected 2 arguments, but found ${s.length-1} instead.`);const y=c.parse(s[1],1,xe),T=c.parse(s[2],2,me(c.expectedType||Fe));return y&&T?new Ya(T.type.itemType,y,T):null}evaluate(s){const c=this.index.evaluate(s),y=this.input.evaluate(s);if(c<0)throw new nr(`Array index out of bounds: ${c} < 0.`);if(c>=y.length)throw new nr(`Array index out of bounds: ${c} > ${y.length-1}.`);if(c!==Math.floor(c))throw new nr(`Array index must be an integer, but found ${c} instead.`);return y[c]}eachChild(s){s(this.index),s(this.input)}outputDefined(){return!1}}class Hr{constructor(s,c){this.type=be,this.needle=s,this.haystack=c}static parse(s,c){if(s.length!==3)return c.error(`Expected 2 arguments, but found ${s.length-1} instead.`);const y=c.parse(s[1],1,Fe),T=c.parse(s[2],2,Fe);return y&&T?Pe(y.type,[be,ke,xe,Me,Fe])?new Hr(y,T):c.error(`Expected first argument to be of type boolean, string, number or null, but found ${pe(y.type)} instead`):null}evaluate(s){const c=this.needle.evaluate(s),y=this.haystack.evaluate(s);if(!y)return!1;if(!Ve(c,["boolean","string","number","null"]))throw new nr(`Expected first argument to be of type boolean, string, number or null, but found ${pe(ht(c))} instead.`);if(!Ve(y,["string","array"]))throw new nr(`Expected second argument to be of type array or string, but found ${pe(ht(y))} instead.`);return y.indexOf(c)>=0}eachChild(s){s(this.needle),s(this.haystack)}outputDefined(){return!0}}class ko{constructor(s,c,y){this.type=xe,this.needle=s,this.haystack=c,this.fromIndex=y}static parse(s,c){if(s.length<=2||s.length>=5)return c.error(`Expected 3 or 4 arguments, but found ${s.length-1} instead.`);const y=c.parse(s[1],1,Fe),T=c.parse(s[2],2,Fe);if(!y||!T)return null;if(!Pe(y.type,[be,ke,xe,Me,Fe]))return c.error(`Expected first argument to be of type boolean, string, number or null, but found ${pe(y.type)} instead`);if(s.length===4){const N=c.parse(s[3],3,xe);return N?new ko(y,T,N):null}return new ko(y,T)}evaluate(s){const c=this.needle.evaluate(s),y=this.haystack.evaluate(s);if(!Ve(c,["boolean","string","number","null"]))throw new nr(`Expected first argument to be of type boolean, string, number or null, but found ${pe(ht(c))} instead.`);if(!Ve(y,["string","array"]))throw new nr(`Expected second argument to be of type array or string, but found ${pe(ht(y))} instead.`);if(this.fromIndex){const T=this.fromIndex.evaluate(s);return y.indexOf(c,T)}return y.indexOf(c)}eachChild(s){s(this.needle),s(this.haystack),this.fromIndex&&s(this.fromIndex)}outputDefined(){return!1}}class pa{constructor(s,c,y,T,N,V){this.inputType=s,this.type=c,this.input=y,this.cases=T,this.outputs=N,this.otherwise=V}static parse(s,c){if(s.length<5)return c.error(`Expected at least 4 arguments, but found only ${s.length-1}.`);if(s.length%2!=1)return c.error("Expected an even number of arguments.");let y,T;c.expectedType&&c.expectedType.kind!=="value"&&(T=c.expectedType);const N={},V=[];for(let _e=2;_e<s.length-1;_e+=2){let Ee=s[_e];const ze=s[_e+1];Array.isArray(Ee)||(Ee=[Ee]);const qe=c.concat(_e);if(Ee.length===0)return qe.error("Expected at least one branch label.");for(const tt of Ee){if(typeof tt!="number"&&typeof tt!="string")return qe.error("Branch labels must be numbers or strings.");if(typeof tt=="number"&&Math.abs(tt)>Number.MAX_SAFE_INTEGER)return qe.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof tt=="number"&&Math.floor(tt)!==tt)return qe.error("Numeric branch labels must be integer values.");if(y){if(qe.checkSubtype(y,ht(tt)))return null}else y=ht(tt);if(N[String(tt)]!==void 0)return qe.error("Branch labels must be unique.");N[String(tt)]=V.length}const et=c.parse(ze,_e,T);if(!et)return null;T=T||et.type,V.push(et)}const X=c.parse(s[1],1,Fe);if(!X)return null;const ae=c.parse(s[s.length-1],s.length-1,T);return ae?X.type.kind!=="value"&&c.concat(1).checkSubtype(y,X.type)?null:new pa(y,T,X,N,V,ae):null}evaluate(s){const c=this.input.evaluate(s);return(ht(c)===this.inputType&&this.outputs[this.cases[c]]||this.otherwise).evaluate(s)}eachChild(s){s(this.input),this.outputs.forEach(s),s(this.otherwise)}outputDefined(){return this.outputs.every(s=>s.outputDefined())&&this.otherwise.outputDefined()}}class La{constructor(s,c,y){this.type=s,this.branches=c,this.otherwise=y}static parse(s,c){if(s.length<4)return c.error(`Expected at least 3 arguments, but found only ${s.length-1}.`);if(s.length%2!=0)return c.error("Expected an odd number of arguments.");let y;c.expectedType&&c.expectedType.kind!=="value"&&(y=c.expectedType);const T=[];for(let V=1;V<s.length-1;V+=2){const X=c.parse(s[V],V,be);if(!X)return null;const ae=c.parse(s[V+1],V+1,y);if(!ae)return null;T.push([X,ae]),y=y||ae.type}const N=c.parse(s[s.length-1],s.length-1,y);if(!N)return null;if(!y)throw new Error("Can't infer output type");return new La(y,T,N)}evaluate(s){for(const[c,y]of this.branches)if(c.evaluate(s))return y.evaluate(s);return this.otherwise.evaluate(s)}eachChild(s){for(const[c,y]of this.branches)s(c),s(y);s(this.otherwise)}outputDefined(){return this.branches.every(([s,c])=>c.outputDefined())&&this.otherwise.outputDefined()}}class ds{constructor(s,c,y,T){this.type=s,this.input=c,this.beginIndex=y,this.endIndex=T}static parse(s,c){if(s.length<=2||s.length>=5)return c.error(`Expected 3 or 4 arguments, but found ${s.length-1} instead.`);const y=c.parse(s[1],1,Fe),T=c.parse(s[2],2,xe);if(!y||!T)return null;if(!Pe(y.type,[me(Fe),ke,Fe]))return c.error(`Expected first argument to be of type array or string, but found ${pe(y.type)} instead`);if(s.length===4){const N=c.parse(s[3],3,xe);return N?new ds(y.type,y,T,N):null}return new ds(y.type,y,T)}evaluate(s){const c=this.input.evaluate(s),y=this.beginIndex.evaluate(s);if(!Ve(c,["string","array"]))throw new nr(`Expected first argument to be of type array or string, but found ${pe(ht(c))} instead.`);if(this.endIndex){const T=this.endIndex.evaluate(s);return c.slice(y,T)}return c.slice(y)}eachChild(s){s(this.input),s(this.beginIndex),this.endIndex&&s(this.endIndex)}outputDefined(){return!1}}function As(A,s){return A==="=="||A==="!="?s.kind==="boolean"||s.kind==="string"||s.kind==="number"||s.kind==="null"||s.kind==="value":s.kind==="string"||s.kind==="number"||s.kind==="value"}function po(A,s,c,y){return y.compare(s,c)===0}function Ls(A,s,c){const y=A!=="=="&&A!=="!=";return class k4{constructor(N,V,X){this.type=be,this.lhs=N,this.rhs=V,this.collator=X,this.hasUntypedArgument=N.type.kind==="value"||V.type.kind==="value"}static parse(N,V){if(N.length!==3&&N.length!==4)return V.error("Expected two or three arguments.");const X=N[0];let ae=V.parse(N[1],1,Fe);if(!ae)return null;if(!As(X,ae.type))return V.concat(1).error(`"${X}" comparisons are not supported for type '${pe(ae.type)}'.`);let _e=V.parse(N[2],2,Fe);if(!_e)return null;if(!As(X,_e.type))return V.concat(2).error(`"${X}" comparisons are not supported for type '${pe(_e.type)}'.`);if(ae.type.kind!==_e.type.kind&&ae.type.kind!=="value"&&_e.type.kind!=="value")return V.error(`Cannot compare types '${pe(ae.type)}' and '${pe(_e.type)}'.`);y&&(ae.type.kind==="value"&&_e.type.kind!=="value"?ae=new Es(_e.type,[ae]):ae.type.kind!=="value"&&_e.type.kind==="value"&&(_e=new Es(ae.type,[_e])));let Ee=null;if(N.length===4){if(ae.type.kind!=="string"&&_e.type.kind!=="string"&&ae.type.kind!=="value"&&_e.type.kind!=="value")return V.error("Cannot use collator to compare non-string types.");if(Ee=V.parse(N[3],3,de),!Ee)return null}return new k4(ae,_e,Ee)}evaluate(N){const V=this.lhs.evaluate(N),X=this.rhs.evaluate(N);if(y&&this.hasUntypedArgument){const ae=ht(V),_e=ht(X);if(ae.kind!==_e.kind||ae.kind!=="string"&&ae.kind!=="number")throw new nr(`Expected arguments for "${A}" to be (string, string) or (number, number), but found (${ae.kind}, ${_e.kind}) instead.`)}if(this.collator&&!y&&this.hasUntypedArgument){const ae=ht(V),_e=ht(X);if(ae.kind!=="string"||_e.kind!=="string")return s(N,V,X)}return this.collator?c(N,V,X,this.collator.evaluate(N)):s(N,V,X)}eachChild(N){N(this.lhs),N(this.rhs),this.collator&&N(this.collator)}outputDefined(){return!0}}}const aa=Ls("==",function(A,s,c){return s===c},po),za=Ls("!=",function(A,s,c){return s!==c},function(A,s,c,y){return!po(0,s,c,y)}),$a=Ls("<",function(A,s,c){return s<c},function(A,s,c,y){return y.compare(s,c)<0}),rA=Ls(">",function(A,s,c){return s>c},function(A,s,c,y){return y.compare(s,c)>0}),pr=Ls("<=",function(A,s,c){return s<=c},function(A,s,c,y){return y.compare(s,c)<=0}),kl=Ls(">=",function(A,s,c){return s>=c},function(A,s,c,y){return y.compare(s,c)>=0});class zs{constructor(s,c,y,T,N){this.type=ke,this.number=s,this.locale=c,this.currency=y,this.minFractionDigits=T,this.maxFractionDigits=N}static parse(s,c){if(s.length!==3)return c.error("Expected two arguments.");const y=c.parse(s[1],1,xe);if(!y)return null;const T=s[2];if(typeof T!="object"||Array.isArray(T))return c.error("NumberFormat options argument must be an object.");let N=null;if(T.locale&&(N=c.parse(T.locale,1,ke),!N))return null;let V=null;if(T.currency&&(V=c.parse(T.currency,1,ke),!V))return null;let X=null;if(T["min-fraction-digits"]&&(X=c.parse(T["min-fraction-digits"],1,xe),!X))return null;let ae=null;return T["max-fraction-digits"]&&(ae=c.parse(T["max-fraction-digits"],1,xe),!ae)?null:new zs(y,N,V,X,ae)}evaluate(s){return new Intl.NumberFormat(this.locale?this.locale.evaluate(s):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(s):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(s):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(s):void 0}).format(this.number.evaluate(s))}eachChild(s){s(this.number),this.locale&&s(this.locale),this.currency&&s(this.currency),this.minFractionDigits&&s(this.minFractionDigits),this.maxFractionDigits&&s(this.maxFractionDigits)}outputDefined(){return!1}}class js{constructor(s){this.type=Ae,this.sections=s}static parse(s,c){if(s.length<2)return c.error("Expected at least one argument.");const y=s[1];if(!Array.isArray(y)&&typeof y=="object")return c.error("First argument must be an image or text section.");const T=[];let N=!1;for(let V=1;V<=s.length-1;++V){const X=s[V];if(N&&typeof X=="object"&&!Array.isArray(X)){N=!1;let ae=null;if(X["font-scale"]&&(ae=c.parse(X["font-scale"],1,xe),!ae))return null;let _e=null;if(X["text-font"]&&(_e=c.parse(X["text-font"],1,me(ke)),!_e))return null;let Ee=null;if(X["text-color"]&&(Ee=c.parse(X["text-color"],1,Ne),!Ee))return null;const ze=T[T.length-1];ze.scale=ae,ze.font=_e,ze.textColor=Ee}else{const ae=c.parse(s[V],1,Fe);if(!ae)return null;const _e=ae.type.kind;if(_e!=="string"&&_e!=="value"&&_e!=="null"&&_e!=="resolvedImage")return c.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");N=!0,T.push({content:ae,scale:null,font:null,textColor:null})}}return new js(T)}evaluate(s){return new mt(this.sections.map(c=>{const y=c.content.evaluate(s);return ht(y)===ie?new Xi("",y,null,null,null):new Xi(Tn(y),null,c.scale?c.scale.evaluate(s):null,c.font?c.font.evaluate(s).join(","):null,c.textColor?c.textColor.evaluate(s):null)}))}eachChild(s){for(const c of this.sections)s(c.content),c.scale&&s(c.scale),c.font&&s(c.font),c.textColor&&s(c.textColor)}outputDefined(){return!1}}class CA{constructor(s){this.type=ie,this.input=s}static parse(s,c){if(s.length!==2)return c.error("Expected two arguments.");const y=c.parse(s[1],1,ke);return y?new CA(y):c.error("No image name provided.")}evaluate(s){const c=this.input.evaluate(s),y=lr.fromString(c);return y&&s.availableImages&&(y.available=s.availableImages.indexOf(c)>-1),y}eachChild(s){s(this.input)}outputDefined(){return!1}}class xa{constructor(s){this.type=xe,this.input=s}static parse(s,c){if(s.length!==2)return c.error(`Expected 1 argument, but found ${s.length-1} instead.`);const y=c.parse(s[1],1);return y?y.type.kind!=="array"&&y.type.kind!=="string"&&y.type.kind!=="value"?c.error(`Expected argument of type string or array, but found ${pe(y.type)} instead.`):new xa(y):null}evaluate(s){const c=this.input.evaluate(s);if(typeof c=="string"||Array.isArray(c))return c.length;throw new nr(`Expected value to be of type string or array, but found ${pe(ht(c))} instead.`)}eachChild(s){s(this.input)}outputDefined(){return!1}}const Ra={"==":aa,"!=":za,">":rA,"<":$a,">=":kl,"<=":pr,array:Es,at:Ya,boolean:Es,case:La,coalesce:Go,collator:an,format:js,image:CA,in:Hr,"index-of":ko,interpolate:dr,"interpolate-hcl":dr,"interpolate-lab":dr,length:xa,let:ya,literal:it,match:pa,number:Es,"number-format":zs,object:Es,slice:ds,step:yn,string:Es,"to-boolean":Hs,"to-color":Hs,"to-number":Hs,"to-string":Hs,var:Ln,within:En};function Xa(A,[s,c,y,T]){s=s.evaluate(A),c=c.evaluate(A),y=y.evaluate(A);const N=T?T.evaluate(A):1,V=es(s,c,y,N);if(V)throw new nr(V);return new pi(s/255,c/255,y/255,N,!1)}function Zr(A,s){return A in s}function wa(A,s){const c=s[A];return c===void 0?null:c}function Fa(A){return{type:A}}function Qo(A){return{result:"success",value:A}}function _s(A){return{result:"error",value:A}}function ga(A){return A["property-type"]==="data-driven"||A["property-type"]==="cross-faded-data-driven"}function Xr(A){return!!A.expression&&A.expression.parameters.indexOf("zoom")>-1}function kA(A){return!!A.expression&&A.expression.interpolated}function Un(A){return A instanceof Number?"number":A instanceof String?"string":A instanceof Boolean?"boolean":Array.isArray(A)?"array":A===null?"null":typeof A}function Dr(A){return typeof A=="object"&&A!==null&&!Array.isArray(A)}function Ka(A){return A}function jn(A,s){const c=s.type==="color",y=A.stops&&typeof A.stops[0][0]=="object",T=y||!(y||A.property!==void 0),N=A.type||(kA(s)?"exponential":"interval");if(c||s.type==="padding"){const Ee=c?pi.parse:bi.parse;(A=oe({},A)).stops&&(A.stops=A.stops.map(ze=>[ze[0],Ee(ze[1])])),A.default=Ee(A.default?A.default:s.default)}if(A.colorSpace&&(V=A.colorSpace)!=="rgb"&&V!=="hcl"&&V!=="lab")throw new Error(`Unknown color space: "${A.colorSpace}"`);var V;let X,ae,_e;if(N==="exponential")X=Ws;else if(N==="interval")X=Ir;else if(N==="categorical"){X=Er,ae=Object.create(null);for(const Ee of A.stops)ae[Ee[0]]=Ee[1];_e=typeof A.stops[0][0]}else{if(N!=="identity")throw new Error(`Unknown function type "${N}"`);X=rr}if(y){const Ee={},ze=[];for(let tt=0;tt<A.stops.length;tt++){const ut=A.stops[tt],ft=ut[0].zoom;Ee[ft]===void 0&&(Ee[ft]={zoom:ft,type:A.type,property:A.property,default:A.default,stops:[]},ze.push(ft)),Ee[ft].stops.push([ut[0].value,ut[1]])}const qe=[];for(const tt of ze)qe.push([Ee[tt].zoom,jn(Ee[tt],s)]);const et={name:"linear"};return{kind:"composite",interpolationType:et,interpolationFactor:dr.interpolationFactor.bind(void 0,et),zoomStops:qe.map(tt=>tt[0]),evaluate:({zoom:tt},ut)=>Ws({stops:qe,base:A.base},s,tt).evaluate(tt,ut)}}if(T){const Ee=N==="exponential"?{name:"exponential",base:A.base!==void 0?A.base:1}:null;return{kind:"camera",interpolationType:Ee,interpolationFactor:dr.interpolationFactor.bind(void 0,Ee),zoomStops:A.stops.map(ze=>ze[0]),evaluate:({zoom:ze})=>X(A,s,ze,ae,_e)}}return{kind:"source",evaluate(Ee,ze){const qe=ze&&ze.properties?ze.properties[A.property]:void 0;return qe===void 0?Rs(A.default,s.default):X(A,s,qe,ae,_e)}}}function Rs(A,s,c){return A!==void 0?A:s!==void 0?s:c!==void 0?c:void 0}function Er(A,s,c,y,T){return Rs(typeof c===T?y[c]:void 0,A.default,s.default)}function Ir(A,s,c){if(Un(c)!=="number")return Rs(A.default,s.default);const y=A.stops.length;if(y===1||c<=A.stops[0][0])return A.stops[0][1];if(c>=A.stops[y-1][0])return A.stops[y-1][1];const T=Yn(A.stops.map(N=>N[0]),c);return A.stops[T][1]}function Ws(A,s,c){const y=A.base!==void 0?A.base:1;if(Un(c)!=="number")return Rs(A.default,s.default);const T=A.stops.length;if(T===1||c<=A.stops[0][0])return A.stops[0][1];if(c>=A.stops[T-1][0])return A.stops[T-1][1];const N=Yn(A.stops.map(Ee=>Ee[0]),c),V=function(Ee,ze,qe,et){const tt=et-qe,ut=Ee-qe;return tt===0?0:ze===1?ut/tt:(Math.pow(ze,ut)-1)/(Math.pow(ze,tt)-1)}(c,y,A.stops[N][0],A.stops[N+1][0]),X=A.stops[N][1],ae=A.stops[N+1][1],_e=is[s.type]||Ka;return typeof X.evaluate=="function"?{evaluate(...Ee){const ze=X.evaluate.apply(void 0,Ee),qe=ae.evaluate.apply(void 0,Ee);if(ze!==void 0&&qe!==void 0)return _e(ze,qe,V,A.colorSpace)}}:_e(X,ae,V,A.colorSpace)}function rr(A,s,c){switch(s.type){case"color":c=pi.parse(c);break;case"formatted":c=mt.fromString(c.toString());break;case"resolvedImage":c=lr.fromString(c.toString());break;case"padding":c=bi.parse(c);break;default:Un(c)===s.type||s.type==="enum"&&s.values[c]||(c=void 0)}return Rs(c,A.default,s.default)}or.register(Ra,{error:[{kind:"error"},[ke],(A,[s])=>{throw new nr(s.evaluate(A))}],typeof:[ke,[Fe],(A,[s])=>pe(ht(s.evaluate(A)))],"to-rgba":[me(xe,4),[Ne],(A,[s])=>{const[c,y,T,N]=s.evaluate(A).rgb;return[255*c,255*y,255*T,N]}],rgb:[Ne,[xe,xe,xe],Xa],rgba:[Ne,[xe,xe,xe,xe],Xa],has:{type:be,overloads:[[[ke],(A,[s])=>Zr(s.evaluate(A),A.properties())],[[ke,Re],(A,[s,c])=>Zr(s.evaluate(A),c.evaluate(A))]]},get:{type:Fe,overloads:[[[ke],(A,[s])=>wa(s.evaluate(A),A.properties())],[[ke,Re],(A,[s,c])=>wa(s.evaluate(A),c.evaluate(A))]]},"feature-state":[Fe,[ke],(A,[s])=>wa(s.evaluate(A),A.featureState||{})],properties:[Re,[],A=>A.properties()],"geometry-type":[ke,[],A=>A.geometryType()],id:[Fe,[],A=>A.id()],zoom:[xe,[],A=>A.globals.zoom],"heatmap-density":[xe,[],A=>A.globals.heatmapDensity||0],"line-progress":[xe,[],A=>A.globals.lineProgress||0],accumulated:[Fe,[],A=>A.globals.accumulated===void 0?null:A.globals.accumulated],"+":[xe,Fa(xe),(A,s)=>{let c=0;for(const y of s)c+=y.evaluate(A);return c}],"*":[xe,Fa(xe),(A,s)=>{let c=1;for(const y of s)c*=y.evaluate(A);return c}],"-":{type:xe,overloads:[[[xe,xe],(A,[s,c])=>s.evaluate(A)-c.evaluate(A)],[[xe],(A,[s])=>-s.evaluate(A)]]},"/":[xe,[xe,xe],(A,[s,c])=>s.evaluate(A)/c.evaluate(A)],"%":[xe,[xe,xe],(A,[s,c])=>s.evaluate(A)%c.evaluate(A)],ln2:[xe,[],()=>Math.LN2],pi:[xe,[],()=>Math.PI],e:[xe,[],()=>Math.E],"^":[xe,[xe,xe],(A,[s,c])=>Math.pow(s.evaluate(A),c.evaluate(A))],sqrt:[xe,[xe],(A,[s])=>Math.sqrt(s.evaluate(A))],log10:[xe,[xe],(A,[s])=>Math.log(s.evaluate(A))/Math.LN10],ln:[xe,[xe],(A,[s])=>Math.log(s.evaluate(A))],log2:[xe,[xe],(A,[s])=>Math.log(s.evaluate(A))/Math.LN2],sin:[xe,[xe],(A,[s])=>Math.sin(s.evaluate(A))],cos:[xe,[xe],(A,[s])=>Math.cos(s.evaluate(A))],tan:[xe,[xe],(A,[s])=>Math.tan(s.evaluate(A))],asin:[xe,[xe],(A,[s])=>Math.asin(s.evaluate(A))],acos:[xe,[xe],(A,[s])=>Math.acos(s.evaluate(A))],atan:[xe,[xe],(A,[s])=>Math.atan(s.evaluate(A))],min:[xe,Fa(xe),(A,s)=>Math.min(...s.map(c=>c.evaluate(A)))],max:[xe,Fa(xe),(A,s)=>Math.max(...s.map(c=>c.evaluate(A)))],abs:[xe,[xe],(A,[s])=>Math.abs(s.evaluate(A))],round:[xe,[xe],(A,[s])=>{const c=s.evaluate(A);return c<0?-Math.round(-c):Math.round(c)}],floor:[xe,[xe],(A,[s])=>Math.floor(s.evaluate(A))],ceil:[xe,[xe],(A,[s])=>Math.ceil(s.evaluate(A))],"filter-==":[be,[ke,Fe],(A,[s,c])=>A.properties()[s.value]===c.value],"filter-id-==":[be,[Fe],(A,[s])=>A.id()===s.value],"filter-type-==":[be,[ke],(A,[s])=>A.geometryType()===s.value],"filter-<":[be,[ke,Fe],(A,[s,c])=>{const y=A.properties()[s.value],T=c.value;return typeof y==typeof T&&y<T}],"filter-id-<":[be,[Fe],(A,[s])=>{const c=A.id(),y=s.value;return typeof c==typeof y&&c<y}],"filter->":[be,[ke,Fe],(A,[s,c])=>{const y=A.properties()[s.value],T=c.value;return typeof y==typeof T&&y>T}],"filter-id->":[be,[Fe],(A,[s])=>{const c=A.id(),y=s.value;return typeof c==typeof y&&c>y}],"filter-<=":[be,[ke,Fe],(A,[s,c])=>{const y=A.properties()[s.value],T=c.value;return typeof y==typeof T&&y<=T}],"filter-id-<=":[be,[Fe],(A,[s])=>{const c=A.id(),y=s.value;return typeof c==typeof y&&c<=y}],"filter->=":[be,[ke,Fe],(A,[s,c])=>{const y=A.properties()[s.value],T=c.value;return typeof y==typeof T&&y>=T}],"filter-id->=":[be,[Fe],(A,[s])=>{const c=A.id(),y=s.value;return typeof c==typeof y&&c>=y}],"filter-has":[be,[Fe],(A,[s])=>s.value in A.properties()],"filter-has-id":[be,[],A=>A.id()!==null&&A.id()!==void 0],"filter-type-in":[be,[me(ke)],(A,[s])=>s.value.indexOf(A.geometryType())>=0],"filter-id-in":[be,[me(Fe)],(A,[s])=>s.value.indexOf(A.id())>=0],"filter-in-small":[be,[ke,me(Fe)],(A,[s,c])=>c.value.indexOf(A.properties()[s.value])>=0],"filter-in-large":[be,[ke,me(Fe)],(A,[s,c])=>function(y,T,N,V){for(;N<=V;){const X=N+V>>1;if(T[X]===y)return!0;T[X]>y?V=X-1:N=X+1}return!1}(A.properties()[s.value],c.value,0,c.value.length-1)],all:{type:be,overloads:[[[be,be],(A,[s,c])=>s.evaluate(A)&&c.evaluate(A)],[Fa(be),(A,s)=>{for(const c of s)if(!c.evaluate(A))return!1;return!0}]]},any:{type:be,overloads:[[[be,be],(A,[s,c])=>s.evaluate(A)||c.evaluate(A)],[Fa(be),(A,s)=>{for(const c of s)if(c.evaluate(A))return!0;return!1}]]},"!":[be,[be],(A,[s])=>!s.evaluate(A)],"is-supported-script":[be,[ke],(A,[s])=>{const c=A.globals&&A.globals.isSupportedScript;return!c||c(s.evaluate(A))}],upcase:[ke,[ke],(A,[s])=>s.evaluate(A).toUpperCase()],downcase:[ke,[ke],(A,[s])=>s.evaluate(A).toLowerCase()],concat:[ke,Fa(Fe),(A,s)=>s.map(c=>Tn(c.evaluate(A))).join("")],"resolved-locale":[ke,[de],(A,[s])=>s.evaluate(A).resolvedLocale()]});class qo{constructor(s,c){var y;this.expression=s,this._warningHistory={},this._evaluator=new Pa,this._defaultValue=c?(y=c).type==="color"&&Dr(y.default)?new pi(0,0,0,0):y.type==="color"?pi.parse(y.default)||null:y.type==="padding"?bi.parse(y.default)||null:y.type==="variableAnchorOffsetCollection"?Ni.parse(y.default)||null:y.default===void 0?null:y.default:null,this._enumValues=c&&c.type==="enum"?c.values:null}evaluateWithoutErrorHandling(s,c,y,T,N,V){return this._evaluator.globals=s,this._evaluator.feature=c,this._evaluator.featureState=y,this._evaluator.canonical=T,this._evaluator.availableImages=N||null,this._evaluator.formattedSection=V,this.expression.evaluate(this._evaluator)}evaluate(s,c,y,T,N,V){this._evaluator.globals=s,this._evaluator.feature=c||null,this._evaluator.featureState=y||null,this._evaluator.canonical=T,this._evaluator.availableImages=N||null,this._evaluator.formattedSection=V||null;try{const X=this.expression.evaluate(this._evaluator);if(X==null||typeof X=="number"&&X!=X)return this._defaultValue;if(this._enumValues&&!(X in this._enumValues))throw new nr(`Expected value to be one of ${Object.keys(this._enumValues).map(ae=>JSON.stringify(ae)).join(", ")}, but found ${JSON.stringify(X)} instead.`);return X}catch(X){return this._warningHistory[X.message]||(this._warningHistory[X.message]=!0,typeof console<"u"&&console.warn(X.message)),this._defaultValue}}}function Ja(A){return Array.isArray(A)&&A.length>0&&typeof A[0]=="string"&&A[0]in Ra}function eo(A,s){const c=new os(Ra,na,[],s?function(T){const N={color:Ne,string:ke,number:xe,enum:ke,boolean:be,formatted:Ae,padding:W,resolvedImage:ie,variableAnchorOffsetCollection:he};return T.type==="array"?me(N[T.value]||Fe,T.length):N[T.type]}(s):void 0),y=c.parse(A,void 0,void 0,void 0,s&&s.type==="string"?{typeAnnotation:"coerce"}:void 0);return y?Qo(new qo(y,s)):_s(c.errors)}class ns{constructor(s,c){this.kind=s,this._styleExpression=c,this.isStateDependent=s!=="constant"&&!sa(c.expression)}evaluateWithoutErrorHandling(s,c,y,T,N,V){return this._styleExpression.evaluateWithoutErrorHandling(s,c,y,T,N,V)}evaluate(s,c,y,T,N,V){return this._styleExpression.evaluate(s,c,y,T,N,V)}}class $n{constructor(s,c,y,T){this.kind=s,this.zoomStops=y,this._styleExpression=c,this.isStateDependent=s!=="camera"&&!sa(c.expression),this.interpolationType=T}evaluateWithoutErrorHandling(s,c,y,T,N,V){return this._styleExpression.evaluateWithoutErrorHandling(s,c,y,T,N,V)}evaluate(s,c,y,T,N,V){return this._styleExpression.evaluate(s,c,y,T,N,V)}interpolationFactor(s,c,y){return this.interpolationType?dr.interpolationFactor(this.interpolationType,s,c,y):0}}function bn(A,s){const c=eo(A,s);if(c.result==="error")return c;const y=c.value.expression,T=ra(y);if(!T&&!ga(s))return _s([new fe("","data expressions not supported")]);const N=Da(y,["zoom"]);if(!N&&!Xr(s))return _s([new fe("","zoom expressions not supported")]);const V=gr(y);return V||N?V instanceof fe?_s([V]):V instanceof dr&&!kA(s)?_s([new fe("",'"interpolate" expressions cannot be used with this property')]):Qo(V?new $n(T?"camera":"composite",c.value,V.labels,V instanceof dr?V.interpolation:void 0):new ns(T?"constant":"source",c.value)):_s([new fe("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Oa{constructor(s,c){this._parameters=s,this._specification=c,oe(this,jn(this._parameters,this._specification))}static deserialize(s){return new Oa(s._parameters,s._specification)}static serialize(s){return{_parameters:s._parameters,_specification:s._specification}}}function gr(A){let s=null;if(A instanceof ya)s=gr(A.result);else if(A instanceof Go){for(const c of A.args)if(s=gr(c),s)break}else(A instanceof yn||A instanceof dr)&&A.input instanceof or&&A.input.name==="zoom"&&(s=A);return s instanceof fe||A.eachChild(c=>{const y=gr(c);y instanceof fe?s=y:!s&&y?s=new fe("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):s&&y&&s!==y&&(s=new fe("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),s}function ba(A){if(A===!0||A===!1)return!0;if(!Array.isArray(A)||A.length===0)return!1;switch(A[0]){case"has":return A.length>=2&&A[1]!=="$id"&&A[1]!=="$type";case"in":return A.length>=3&&(typeof A[1]!="string"||Array.isArray(A[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return A.length!==3||Array.isArray(A[1])||Array.isArray(A[2]);case"any":case"all":for(const s of A.slice(1))if(!ba(s)&&typeof s!="boolean")return!1;return!0;default:return!0}}const go={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function sr(A){if(A==null)return{filter:()=>!0,needGeometry:!1};ba(A)||(A=Ho(A));const s=eo(A,go);if(s.result==="error")throw new Error(s.value.map(c=>`${c.key}: ${c.message}`).join(", "));return{filter:(c,y,T)=>s.value.evaluate(c,y,{},T),needGeometry:vs(A)}}function Lr(A,s){return A<s?-1:A>s?1:0}function vs(A){if(!Array.isArray(A))return!1;if(A[0]==="within")return!0;for(let s=1;s<A.length;s++)if(vs(A[s]))return!0;return!1}function Ho(A){if(!A)return!0;const s=A[0];return A.length<=1?s!=="any":s==="=="?Sa(A[1],A[2],"=="):s==="!="?rs(Sa(A[1],A[2],"==")):s==="<"||s===">"||s==="<="||s===">="?Sa(A[1],A[2],s):s==="any"?(c=A.slice(1),["any"].concat(c.map(Ho))):s==="all"?["all"].concat(A.slice(1).map(Ho)):s==="none"?["all"].concat(A.slice(1).map(Ho).map(rs)):s==="in"?Eo(A[1],A.slice(2)):s==="!in"?rs(Eo(A[1],A.slice(2))):s==="has"?Ys(A[1]):s==="!has"?rs(Ys(A[1])):s!=="within"||A;var c}function Sa(A,s,c){switch(A){case"$type":return[`filter-type-${c}`,s];case"$id":return[`filter-id-${c}`,s];default:return[`filter-${c}`,A,s]}}function Eo(A,s){if(s.length===0)return!1;switch(A){case"$type":return["filter-type-in",["literal",s]];case"$id":return["filter-id-in",["literal",s]];default:return s.length>200&&!s.some(c=>typeof c!=typeof s[0])?["filter-in-large",A,["literal",s.sort(Lr)]]:["filter-in-small",A,["literal",s]]}}function Ys(A){switch(A){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",A]}}function rs(A){return["!",A]}function Kr(A){const s=typeof A;if(s==="number"||s==="boolean"||s==="string"||A==null)return JSON.stringify(A);if(Array.isArray(A)){let T="[";for(const N of A)T+=`${Kr(N)},`;return`${T}]`}const c=Object.keys(A).sort();let y="{";for(let T=0;T<c.length;T++)y+=`${JSON.stringify(c[T])}:${Kr(A[c[T]])},`;return`${y}}`}function Ns(A){let s="";for(const c of cn)s+=`/${Kr(A[c])}`;return s}function ma(A){const s=A.value;return s?[new se(A.key,s,"constants have been deprecated as of v8")]:[]}function Ar(A){return A instanceof Number||A instanceof String||A instanceof Boolean?A.valueOf():A}function Nr(A){if(Array.isArray(A))return A.map(Nr);if(A instanceof Object&&!(A instanceof Number||A instanceof String||A instanceof Boolean)){const s={};for(const c in A)s[c]=Nr(A[c]);return s}return Ar(A)}function xr(A){const s=A.key,c=A.value,y=A.valueSpec||{},T=A.objectElementValidators||{},N=A.style,V=A.styleSpec,X=A.validateSpec;let ae=[];const _e=Un(c);if(_e!=="object")return[new se(s,c,`object expected, ${_e} found`)];for(const Ee in c){const ze=Ee.split(".")[0],qe=y[ze]||y["*"];let et;if(T[ze])et=T[ze];else if(y[ze])et=X;else if(T["*"])et=T["*"];else{if(!y["*"]){ae.push(new se(s,c[Ee],`unknown property "${Ee}"`));continue}et=X}ae=ae.concat(et({key:(s&&`${s}.`)+Ee,value:c[Ee],valueSpec:qe,style:N,styleSpec:V,object:c,objectKey:Ee,validateSpec:X},c))}for(const Ee in y)T[Ee]||y[Ee].required&&y[Ee].default===void 0&&c[Ee]===void 0&&ae.push(new se(s,c,`missing required property "${Ee}"`));return ae}function Io(A){const s=A.value,c=A.valueSpec,y=A.style,T=A.styleSpec,N=A.key,V=A.arrayElementValidator||A.validateSpec;if(Un(s)!=="array")return[new se(N,s,`array expected, ${Un(s)} found`)];if(c.length&&s.length!==c.length)return[new se(N,s,`array length ${c.length} expected, length ${s.length} found`)];if(c["min-length"]&&s.length<c["min-length"])return[new se(N,s,`array length at least ${c["min-length"]} expected, length ${s.length} found`)];let X={type:c.value,values:c.values};T.$version<7&&(X.function=c.function),Un(c.value)==="object"&&(X=c.value);let ae=[];for(let _e=0;_e<s.length;_e++)ae=ae.concat(V({array:s,arrayIndex:_e,value:s[_e],valueSpec:X,validateSpec:A.validateSpec,style:y,styleSpec:T,key:`${N}[${_e}]`}));return ae}function oa(A){const s=A.key,c=A.value,y=A.valueSpec;let T=Un(c);return T==="number"&&c!=c&&(T="NaN"),T!=="number"?[new se(s,c,`number expected, ${T} found`)]:"minimum"in y&&c<y.minimum?[new se(s,c,`${c} is less than the minimum value ${y.minimum}`)]:"maximum"in y&&c>y.maximum?[new se(s,c,`${c} is greater than the maximum value ${y.maximum}`)]:[]}function hs(A){const s=A.valueSpec,c=Ar(A.value.type);let y,T,N,V={};const X=c!=="categorical"&&A.value.property===void 0,ae=!X,_e=Un(A.value.stops)==="array"&&Un(A.value.stops[0])==="array"&&Un(A.value.stops[0][0])==="object",Ee=xr({key:A.key,value:A.value,valueSpec:A.styleSpec.function,validateSpec:A.validateSpec,style:A.style,styleSpec:A.styleSpec,objectElementValidators:{stops:function(et){if(c==="identity")return[new se(et.key,et.value,'identity function may not have a "stops" property')];let tt=[];const ut=et.value;return tt=tt.concat(Io({key:et.key,value:ut,valueSpec:et.valueSpec,validateSpec:et.validateSpec,style:et.style,styleSpec:et.styleSpec,arrayElementValidator:ze})),Un(ut)==="array"&&ut.length===0&&tt.push(new se(et.key,ut,"array must have at least one stop")),tt},default:function(et){return et.validateSpec({key:et.key,value:et.value,valueSpec:s,validateSpec:et.validateSpec,style:et.style,styleSpec:et.styleSpec})}}});return c==="identity"&&X&&Ee.push(new se(A.key,A.value,'missing required property "property"')),c==="identity"||A.value.stops||Ee.push(new se(A.key,A.value,'missing required property "stops"')),c==="exponential"&&A.valueSpec.expression&&!kA(A.valueSpec)&&Ee.push(new se(A.key,A.value,"exponential functions not supported")),A.styleSpec.$version>=8&&(ae&&!ga(A.valueSpec)?Ee.push(new se(A.key,A.value,"property functions not supported")):X&&!Xr(A.valueSpec)&&Ee.push(new se(A.key,A.value,"zoom functions not supported"))),c!=="categorical"&&!_e||A.value.property!==void 0||Ee.push(new se(A.key,A.value,'"property" property is required')),Ee;function ze(et){let tt=[];const ut=et.value,ft=et.key;if(Un(ut)!=="array")return[new se(ft,ut,`array expected, ${Un(ut)} found`)];if(ut.length!==2)return[new se(ft,ut,`array length 2 expected, length ${ut.length} found`)];if(_e){if(Un(ut[0])!=="object")return[new se(ft,ut,`object expected, ${Un(ut[0])} found`)];if(ut[0].zoom===void 0)return[new se(ft,ut,"object stop key must have zoom")];if(ut[0].value===void 0)return[new se(ft,ut,"object stop key must have value")];if(N&&N>Ar(ut[0].zoom))return[new se(ft,ut[0].zoom,"stop zoom values must appear in ascending order")];Ar(ut[0].zoom)!==N&&(N=Ar(ut[0].zoom),T=void 0,V={}),tt=tt.concat(xr({key:`${ft}[0]`,value:ut[0],valueSpec:{zoom:{}},validateSpec:et.validateSpec,style:et.style,styleSpec:et.styleSpec,objectElementValidators:{zoom:oa,value:qe}}))}else tt=tt.concat(qe({key:`${ft}[0]`,value:ut[0],valueSpec:{},validateSpec:et.validateSpec,style:et.style,styleSpec:et.styleSpec},ut));return Ja(Nr(ut[1]))?tt.concat([new se(`${ft}[1]`,ut[1],"expressions are not allowed in function stops.")]):tt.concat(et.validateSpec({key:`${ft}[1]`,value:ut[1],valueSpec:s,validateSpec:et.validateSpec,style:et.style,styleSpec:et.styleSpec}))}function qe(et,tt){const ut=Un(et.value),ft=Ar(et.value),_t=et.value!==null?et.value:tt;if(y){if(ut!==y)return[new se(et.key,_t,`${ut} stop domain type must match previous stop domain type ${y}`)]}else y=ut;if(ut!=="number"&&ut!=="string"&&ut!=="boolean")return[new se(et.key,_t,"stop domain value must be a number, string, or boolean")];if(ut!=="number"&&c!=="categorical"){let Rt=`number expected, ${ut} found`;return ga(s)&&c===void 0&&(Rt+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new se(et.key,_t,Rt)]}return c!=="categorical"||ut!=="number"||isFinite(ft)&&Math.floor(ft)===ft?c!=="categorical"&&ut==="number"&&T!==void 0&&ft<T?[new se(et.key,_t,"stop domain values must appear in ascending order")]:(T=ft,c==="categorical"&&ft in V?[new se(et.key,_t,"stop domain values must be unique")]:(V[ft]=!0,[])):[new se(et.key,_t,`integer expected, found ${ft}`)]}}function ys(A){const s=(A.expressionContext==="property"?bn:eo)(Nr(A.value),A.valueSpec);if(s.result==="error")return s.value.map(y=>new se(`${A.key}${y.key}`,A.value,y.message));const c=s.value.expression||s.value._styleExpression.expression;if(A.expressionContext==="property"&&A.propertyKey==="text-font"&&!c.outputDefined())return[new se(A.key,A.value,`Invalid data expression for "${A.propertyKey}". Output values must be contained as literals within the expression.`)];if(A.expressionContext==="property"&&A.propertyType==="layout"&&!sa(c))return[new se(A.key,A.value,'"feature-state" data expressions are not supported with layout properties.')];if(A.expressionContext==="filter"&&!sa(c))return[new se(A.key,A.value,'"feature-state" data expressions are not supported with filters.')];if(A.expressionContext&&A.expressionContext.indexOf("cluster")===0){if(!Da(c,["zoom","feature-state"]))return[new se(A.key,A.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(A.expressionContext==="cluster-initial"&&!ra(c))return[new se(A.key,A.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Ca(A){const s=A.key,c=A.value,y=A.valueSpec,T=[];return Array.isArray(y.values)?y.values.indexOf(Ar(c))===-1&&T.push(new se(s,c,`expected one of [${y.values.join(", ")}], ${JSON.stringify(c)} found`)):Object.keys(y.values).indexOf(Ar(c))===-1&&T.push(new se(s,c,`expected one of [${Object.keys(y.values).join(", ")}], ${JSON.stringify(c)} found`)),T}function Na(A){return ba(Nr(A.value))?ys(oe({},A,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Zo(A)}function Zo(A){const s=A.value,c=A.key;if(Un(s)!=="array")return[new se(c,s,`array expected, ${Un(s)} found`)];const y=A.styleSpec;let T,N=[];if(s.length<1)return[new se(c,s,"filter array must have at least 1 element")];switch(N=N.concat(Ca({key:`${c}[0]`,value:s[0],valueSpec:y.filter_operator,style:A.style,styleSpec:A.styleSpec})),Ar(s[0])){case"<":case"<=":case">":case">=":s.length>=2&&Ar(s[1])==="$type"&&N.push(new se(c,s,`"$type" cannot be use with operator "${s[0]}"`));case"==":case"!=":s.length!==3&&N.push(new se(c,s,`filter array for operator "${s[0]}" must have 3 elements`));case"in":case"!in":s.length>=2&&(T=Un(s[1]),T!=="string"&&N.push(new se(`${c}[1]`,s[1],`string expected, ${T} found`)));for(let V=2;V<s.length;V++)T=Un(s[V]),Ar(s[1])==="$type"?N=N.concat(Ca({key:`${c}[${V}]`,value:s[V],valueSpec:y.geometry_type,style:A.style,styleSpec:A.styleSpec})):T!=="string"&&T!=="number"&&T!=="boolean"&&N.push(new se(`${c}[${V}]`,s[V],`string, number, or boolean expected, ${T} found`));break;case"any":case"all":case"none":for(let V=1;V<s.length;V++)N=N.concat(Zo({key:`${c}[${V}]`,value:s[V],style:A.style,styleSpec:A.styleSpec}));break;case"has":case"!has":T=Un(s[1]),s.length!==2?N.push(new se(c,s,`filter array for "${s[0]}" operator must have 2 elements`)):T!=="string"&&N.push(new se(`${c}[1]`,s[1],`string expected, ${T} found`));break;case"within":T=Un(s[1]),s.length!==2?N.push(new se(c,s,`filter array for "${s[0]}" operator must have 2 elements`)):T!=="object"&&N.push(new se(`${c}[1]`,s[1],`object expected, ${T} found`))}return N}function XA(A,s){const c=A.key,y=A.validateSpec,T=A.style,N=A.styleSpec,V=A.value,X=A.objectKey,ae=N[`${s}_${A.layerType}`];if(!ae)return[];const _e=X.match(/^(.*)-transition$/);if(s==="paint"&&_e&&ae[_e[1]]&&ae[_e[1]].transition)return y({key:c,value:V,valueSpec:N.transition,style:T,styleSpec:N});const Ee=A.valueSpec||ae[X];if(!Ee)return[new se(c,V,`unknown property "${X}"`)];let ze;if(Un(V)==="string"&&ga(Ee)&&!Ee.tokens&&(ze=/^{([^}]+)}$/.exec(V)))return[new se(c,V,`"${X}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(ze[1])} }\`.`)];const qe=[];return A.layerType==="symbol"&&(X==="text-field"&&T&&!T.glyphs&&qe.push(new se(c,V,'use of "text-field" requires a style "glyphs" property')),X==="text-font"&&Dr(Nr(V))&&Ar(V.type)==="identity"&&qe.push(new se(c,V,'"text-font" does not support identity functions'))),qe.concat(y({key:A.key,value:V,valueSpec:Ee,style:T,styleSpec:N,expressionContext:"property",propertyType:s,propertyKey:X}))}function mo(A){return XA(A,"paint")}function $s(A){return XA(A,"layout")}function Ot(A){let s=[];const c=A.value,y=A.key,T=A.style,N=A.styleSpec;c.type||c.ref||s.push(new se(y,c,'either "type" or "ref" is required'));let V=Ar(c.type);const X=Ar(c.ref);if(c.id){const ae=Ar(c.id);for(let _e=0;_e<A.arrayIndex;_e++){const Ee=T.layers[_e];Ar(Ee.id)===ae&&s.push(new se(y,c.id,`duplicate layer id "${c.id}", previously used at line ${Ee.id.__line__}`))}}if("ref"in c){let ae;["type","source","source-layer","filter","layout"].forEach(_e=>{_e in c&&s.push(new se(y,c[_e],`"${_e}" is prohibited for ref layers`))}),T.layers.forEach(_e=>{Ar(_e.id)===X&&(ae=_e)}),ae?ae.ref?s.push(new se(y,c.ref,"ref cannot reference another ref layer")):V=Ar(ae.type):s.push(new se(y,c.ref,`ref layer "${X}" not found`))}else if(V!=="background")if(c.source){const ae=T.sources&&T.sources[c.source],_e=ae&&Ar(ae.type);ae?_e==="vector"&&V==="raster"?s.push(new se(y,c.source,`layer "${c.id}" requires a raster source`)):_e!=="raster-dem"&&V==="hillshade"?s.push(new se(y,c.source,`layer "${c.id}" requires a raster-dem source`)):_e==="raster"&&V!=="raster"?s.push(new se(y,c.source,`layer "${c.id}" requires a vector source`)):_e!=="vector"||c["source-layer"]?_e==="raster-dem"&&V!=="hillshade"?s.push(new se(y,c.source,"raster-dem source can only be used with layer type 'hillshade'.")):V!=="line"||!c.paint||!c.paint["line-gradient"]||_e==="geojson"&&ae.lineMetrics||s.push(new se(y,c,`layer "${c.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):s.push(new se(y,c,`layer "${c.id}" must specify a "source-layer"`)):s.push(new se(y,c.source,`source "${c.source}" not found`))}else s.push(new se(y,c,'missing required property "source"'));return s=s.concat(xr({key:y,value:c,valueSpec:N.layer,style:A.style,styleSpec:A.styleSpec,validateSpec:A.validateSpec,objectElementValidators:{"*":()=>[],type:()=>A.validateSpec({key:`${y}.type`,value:c.type,valueSpec:N.layer.type,style:A.style,styleSpec:A.styleSpec,validateSpec:A.validateSpec,object:c,objectKey:"type"}),filter:Na,layout:ae=>xr({layer:c,key:ae.key,value:ae.value,style:ae.style,styleSpec:ae.styleSpec,validateSpec:ae.validateSpec,objectElementValidators:{"*":_e=>$s(oe({layerType:V},_e))}}),paint:ae=>xr({layer:c,key:ae.key,value:ae.value,style:ae.style,styleSpec:ae.styleSpec,validateSpec:ae.validateSpec,objectElementValidators:{"*":_e=>mo(oe({layerType:V},_e))}})}})),s}function si(A){const s=A.value,c=A.key,y=Un(s);return y!=="string"?[new se(c,s,`string expected, ${y} found`)]:[]}const Jt={promoteId:function({key:A,value:s}){if(Un(s)==="string")return si({key:A,value:s});{const c=[];for(const y in s)c.push(...si({key:`${A}.${y}`,value:s[y]}));return c}}};function at(A){const s=A.value,c=A.key,y=A.styleSpec,T=A.style,N=A.validateSpec;if(!s.type)return[new se(c,s,'"type" is required')];const V=Ar(s.type);let X;switch(V){case"vector":case"raster":return X=xr({key:c,value:s,valueSpec:y[`source_${V.replace("-","_")}`],style:A.style,styleSpec:y,objectElementValidators:Jt,validateSpec:N}),X;case"raster-dem":return X=function(ae){var _e;const Ee=(_e=ae.sourceName)!==null&&_e!==void 0?_e:"",ze=ae.value,qe=ae.styleSpec,et=qe.source_raster_dem,tt=ae.style;let ut=[];const ft=Un(ze);if(ze===void 0)return ut;if(ft!=="object")return ut.push(new se("source_raster_dem",ze,`object expected, ${ft} found`)),ut;const _t=Ar(ze.encoding)==="custom",Rt=["redFactor","greenFactor","blueFactor","baseShift"],Pt=ae.value.encoding?`"${ae.value.encoding}"`:"Default";for(const Nt in ze)!_t&&Rt.includes(Nt)?ut.push(new se(Nt,ze[Nt],`In "${Ee}": "${Nt}" is only valid when "encoding" is set to "custom". ${Pt} encoding found`)):et[Nt]?ut=ut.concat(ae.validateSpec({key:Nt,value:ze[Nt],valueSpec:et[Nt],validateSpec:ae.validateSpec,style:tt,styleSpec:qe})):ut.push(new se(Nt,ze[Nt],`unknown property "${Nt}"`));return ut}({sourceName:c,value:s,style:A.style,styleSpec:y,validateSpec:N}),X;case"geojson":if(X=xr({key:c,value:s,valueSpec:y.source_geojson,style:T,styleSpec:y,validateSpec:N,objectElementValidators:Jt}),s.cluster)for(const ae in s.clusterProperties){const[_e,Ee]=s.clusterProperties[ae],ze=typeof _e=="string"?[_e,["accumulated"],["get",ae]]:_e;X.push(...ys({key:`${c}.${ae}.map`,value:Ee,validateSpec:N,expressionContext:"cluster-map"})),X.push(...ys({key:`${c}.${ae}.reduce`,value:ze,validateSpec:N,expressionContext:"cluster-reduce"}))}return X;case"video":return xr({key:c,value:s,valueSpec:y.source_video,style:T,validateSpec:N,styleSpec:y});case"image":return xr({key:c,value:s,valueSpec:y.source_image,style:T,validateSpec:N,styleSpec:y});case"canvas":return[new se(c,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Ca({key:`${c}.type`,value:s.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:T,validateSpec:N,styleSpec:y})}}function yt(A){const s=A.value,c=A.styleSpec,y=c.light,T=A.style;let N=[];const V=Un(s);if(s===void 0)return N;if(V!=="object")return N=N.concat([new se("light",s,`object expected, ${V} found`)]),N;for(const X in s){const ae=X.match(/^(.*)-transition$/);N=N.concat(ae&&y[ae[1]]&&y[ae[1]].transition?A.validateSpec({key:X,value:s[X],valueSpec:c.transition,validateSpec:A.validateSpec,style:T,styleSpec:c}):y[X]?A.validateSpec({key:X,value:s[X],valueSpec:y[X],validateSpec:A.validateSpec,style:T,styleSpec:c}):[new se(X,s[X],`unknown property "${X}"`)])}return N}function Gt(A){const s=A.value,c=A.styleSpec,y=c.terrain,T=A.style;let N=[];const V=Un(s);if(s===void 0)return N;if(V!=="object")return N=N.concat([new se("terrain",s,`object expected, ${V} found`)]),N;for(const X in s)N=N.concat(y[X]?A.validateSpec({key:X,value:s[X],valueSpec:y[X],validateSpec:A.validateSpec,style:T,styleSpec:c}):[new se(X,s[X],`unknown property "${X}"`)]);return N}function ai(A){let s=[];const c=A.value,y=A.key;if(Array.isArray(c)){const T=[],N=[];for(const V in c)c[V].id&&T.includes(c[V].id)&&s.push(new se(y,c,`all the sprites' ids must be unique, but ${c[V].id} is duplicated`)),T.push(c[V].id),c[V].url&&N.includes(c[V].url)&&s.push(new se(y,c,`all the sprites' URLs must be unique, but ${c[V].url} is duplicated`)),N.push(c[V].url),s=s.concat(xr({key:`${y}[${V}]`,value:c[V],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:A.validateSpec}));return s}return si({key:y,value:c})}const Hi={"*":()=>[],array:Io,boolean:function(A){const s=A.value,c=A.key,y=Un(s);return y!=="boolean"?[new se(c,s,`boolean expected, ${y} found`)]:[]},number:oa,color:function(A){const s=A.key,c=A.value,y=Un(c);return y!=="string"?[new se(s,c,`color expected, ${y} found`)]:pi.parse(String(c))?[]:[new se(s,c,`color expected, "${c}" found`)]},constants:ma,enum:Ca,filter:Na,function:hs,layer:Ot,object:xr,source:at,light:yt,terrain:Gt,string:si,formatted:function(A){return si(A).length===0?[]:ys(A)},resolvedImage:function(A){return si(A).length===0?[]:ys(A)},padding:function(A){const s=A.key,c=A.value;if(Un(c)==="array"){if(c.length<1||c.length>4)return[new se(s,c,`padding requires 1 to 4 values; ${c.length} values found`)];const y={type:"number"};let T=[];for(let N=0;N<c.length;N++)T=T.concat(A.validateSpec({key:`${s}[${N}]`,value:c[N],validateSpec:A.validateSpec,valueSpec:y}));return T}return oa({key:s,value:c,valueSpec:{}})},variableAnchorOffsetCollection:function(A){const s=A.key,c=A.value,y=Un(c),T=A.styleSpec;if(y!=="array"||c.length<1||c.length%2!=0)return[new se(s,c,"variableAnchorOffsetCollection requires a non-empty array of even length")];let N=[];for(let V=0;V<c.length;V+=2)N=N.concat(Ca({key:`${s}[${V}]`,value:c[V],valueSpec:T.layout_symbol["text-anchor"]})),N=N.concat(Io({key:`${s}[${V+1}]`,value:c[V+1],valueSpec:{length:2,value:"number"},validateSpec:A.validateSpec,style:A.style,styleSpec:T}));return N},sprite:ai};function mn(A){const s=A.value,c=A.valueSpec,y=A.styleSpec;return A.validateSpec=mn,c.expression&&Dr(Ar(s))?hs(A):c.expression&&Ja(Nr(s))?ys(A):c.type&&Hi[c.type]?Hi[c.type](A):xr(oe({},A,{valueSpec:c.type?y[c.type]:c}))}function Pn(A){const s=A.value,c=A.key,y=si(A);return y.length||(s.indexOf("{fontstack}")===-1&&y.push(new se(c,s,'"glyphs" url must include a "{fontstack}" token')),s.indexOf("{range}")===-1&&y.push(new se(c,s,'"glyphs" url must include a "{range}" token'))),y}function xn(A,s=Kt){let c=[];return c=c.concat(mn({key:"",value:A,valueSpec:s.$root,styleSpec:s,style:A,validateSpec:mn,objectElementValidators:{glyphs:Pn,"*":()=>[]}})),A.constants&&(c=c.concat(ma({key:"constants",value:A.constants,style:A,styleSpec:s,validateSpec:mn}))),xs(c)}function jr(A){return function(s){return A({...s,validateSpec:mn})}}function xs(A){return[].concat(A).sort((s,c)=>s.line-c.line)}function Is(A){return function(...s){return xs(A.apply(this,s))}}xn.source=Is(jr(at)),xn.sprite=Is(jr(ai)),xn.glyphs=Is(jr(Pn)),xn.light=Is(jr(yt)),xn.terrain=Is(jr(Gt)),xn.layer=Is(jr(Ot)),xn.filter=Is(jr(Na)),xn.paintProperty=Is(jr(mo)),xn.layoutProperty=Is(jr($s));const Vs=xn,EA=Vs.light,Pr=Vs.paintProperty,Jl=Vs.layoutProperty;function KA(A,s){let c=!1;if(s&&s.length)for(const y of s)A.fire(new zn(new Error(y.message))),c=!0;return c}class ka{constructor(s,c,y){const T=this.cells=[];if(s instanceof ArrayBuffer){this.arrayBuffer=s;const V=new Int32Array(this.arrayBuffer);s=V[0],this.d=(c=V[1])+2*(y=V[2]);for(let ae=0;ae<this.d*this.d;ae++){const _e=V[3+ae],Ee=V[3+ae+1];T.push(_e===Ee?null:V.subarray(_e,Ee))}const X=V[3+T.length+1];this.keys=V.subarray(V[3+T.length],X),this.bboxes=V.subarray(X),this.insert=this._insertReadonly}else{this.d=c+2*y;for(let V=0;V<this.d*this.d;V++)T.push([]);this.keys=[],this.bboxes=[]}this.n=c,this.extent=s,this.padding=y,this.scale=c/s,this.uid=0;const N=y/c*s;this.min=-N,this.max=s+N}insert(s,c,y,T,N){this._forEachCell(c,y,T,N,this._insertCell,this.uid++,void 0,void 0),this.keys.push(s),this.bboxes.push(c),this.bboxes.push(y),this.bboxes.push(T),this.bboxes.push(N)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(s,c,y,T,N,V){this.cells[N].push(V)}query(s,c,y,T,N){const V=this.min,X=this.max;if(s<=V&&c<=V&&X<=y&&X<=T&&!N)return Array.prototype.slice.call(this.keys);{const ae=[];return this._forEachCell(s,c,y,T,this._queryCell,ae,{},N),ae}}_queryCell(s,c,y,T,N,V,X,ae){const _e=this.cells[N];if(_e!==null){const Ee=this.keys,ze=this.bboxes;for(let qe=0;qe<_e.length;qe++){const et=_e[qe];if(X[et]===void 0){const tt=4*et;(ae?ae(ze[tt+0],ze[tt+1],ze[tt+2],ze[tt+3]):s<=ze[tt+2]&&c<=ze[tt+3]&&y>=ze[tt+0]&&T>=ze[tt+1])?(X[et]=!0,V.push(Ee[et])):X[et]=!1}}}}_forEachCell(s,c,y,T,N,V,X,ae){const _e=this._convertToCellCoord(s),Ee=this._convertToCellCoord(c),ze=this._convertToCellCoord(y),qe=this._convertToCellCoord(T);for(let et=_e;et<=ze;et++)for(let tt=Ee;tt<=qe;tt++){const ut=this.d*tt+et;if((!ae||ae(this._convertFromCellCoord(et),this._convertFromCellCoord(tt),this._convertFromCellCoord(et+1),this._convertFromCellCoord(tt+1)))&&N.call(this,s,c,y,T,ut,V,X,ae))return}}_convertFromCellCoord(s){return(s-this.padding)/this.scale}_convertToCellCoord(s){return Math.max(0,Math.min(this.d-1,Math.floor(s*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const s=this.cells,c=3+this.cells.length+1+1;let y=0;for(let V=0;V<this.cells.length;V++)y+=this.cells[V].length;const T=new Int32Array(c+y+this.keys.length+this.bboxes.length);T[0]=this.extent,T[1]=this.n,T[2]=this.padding;let N=c;for(let V=0;V<s.length;V++){const X=s[V];T[3+V]=N,T.set(X,N),N+=X.length}return T[3+s.length]=N,T.set(this.keys,N),N+=this.keys.length,T[3+s.length+1]=N,T.set(this.bboxes,N),N+=this.bboxes.length,T.buffer}static serialize(s,c){const y=s.toArrayBuffer();return c&&c.push(y),{buffer:y}}static deserialize(s){return new ka(s.buffer)}}const _o={};function Zi(A,s,c={}){if(_o[A])throw new Error(`${A} is already registered.`);Object.defineProperty(s,"_classRegistryKey",{value:A,writeable:!1}),_o[A]={klass:s,omit:c.omit||[],shallow:c.shallow||[]}}Zi("Object",Object),Zi("TransferableGridIndex",ka),Zi("Color",pi),Zi("Error",Error),Zi("AJAXError",$i),Zi("ResolvedImage",lr),Zi("StylePropertyFunction",Oa),Zi("StyleExpression",qo,{omit:["_evaluator"]}),Zi("ZoomDependentExpression",$n),Zi("ZoomConstantExpression",ns),Zi("CompoundExpression",or,{omit:["_evaluate"]});for(const A in Ra)Ra[A]._classRegistryKey||Zi(`Expression_${A}`,Ra[A]);function Va(A){return A&&typeof ArrayBuffer<"u"&&(A instanceof ArrayBuffer||A.constructor&&A.constructor.name==="ArrayBuffer")}function Ua(A,s){if(A==null||typeof A=="boolean"||typeof A=="number"||typeof A=="string"||A instanceof Boolean||A instanceof Number||A instanceof String||A instanceof Date||A instanceof RegExp||A instanceof Blob)return A;if(Va(A)||Lt(A))return s&&s.push(A),A;if(ArrayBuffer.isView(A)){const c=A;return s&&s.push(c.buffer),c}if(A instanceof ImageData)return s&&s.push(A.data.buffer),A;if(Array.isArray(A)){const c=[];for(const y of A)c.push(Ua(y,s));return c}if(typeof A=="object"){const c=A.constructor,y=c._classRegistryKey;if(!y)throw new Error("can't serialize object of unregistered class");if(!_o[y])throw new Error(`${y} is not registered.`);const T=c.serialize?c.serialize(A,s):{};if(c.serialize){if(s&&T===s[s.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const N in A){if(!A.hasOwnProperty(N)||_o[y].omit.indexOf(N)>=0)continue;const V=A[N];T[N]=_o[y].shallow.indexOf(N)>=0?V:Ua(V,s)}A instanceof Error&&(T.message=A.message)}if(T.$name)throw new Error("$name property is reserved for worker serialization logic.");return y!=="Object"&&(T.$name=y),T}throw new Error("can't serialize object of type "+typeof A)}function Ea(A){if(A==null||typeof A=="boolean"||typeof A=="number"||typeof A=="string"||A instanceof Boolean||A instanceof Number||A instanceof String||A instanceof Date||A instanceof RegExp||A instanceof Blob||Va(A)||Lt(A)||ArrayBuffer.isView(A)||A instanceof ImageData)return A;if(Array.isArray(A))return A.map(Ea);if(typeof A=="object"){const s=A.$name||"Object";if(!_o[s])throw new Error(`can't deserialize unregistered class ${s}`);const{klass:c}=_o[s];if(!c)throw new Error(`can't deserialize unregistered class ${s}`);if(c.deserialize)return c.deserialize(A);const y=Object.create(c.prototype);for(const T of Object.keys(A)){if(T==="$name")continue;const N=A[T];y[T]=_o[s].shallow.indexOf(T)>=0?N:Ea(N)}return y}throw new Error("can't deserialize object of type "+typeof A)}class JA{constructor(){this.first=!0}update(s,c){const y=Math.floor(s);return this.first?(this.first=!1,this.lastIntegerZoom=y,this.lastIntegerZoomTime=0,this.lastZoom=s,this.lastFloorZoom=y,!0):(this.lastFloorZoom>y?(this.lastIntegerZoom=y+1,this.lastIntegerZoomTime=c):this.lastFloorZoom<y&&(this.lastIntegerZoom=y,this.lastIntegerZoomTime=c),s!==this.lastZoom&&(this.lastZoom=s,this.lastFloorZoom=y,!0))}}const Vi={"Latin-1 Supplement":A=>A>=128&&A<=255,Arabic:A=>A>=1536&&A<=1791,"Arabic Supplement":A=>A>=1872&&A<=1919,"Arabic Extended-A":A=>A>=2208&&A<=2303,"Hangul Jamo":A=>A>=4352&&A<=4607,"Unified Canadian Aboriginal Syllabics":A=>A>=5120&&A<=5759,Khmer:A=>A>=6016&&A<=6143,"Unified Canadian Aboriginal Syllabics Extended":A=>A>=6320&&A<=6399,"General Punctuation":A=>A>=8192&&A<=8303,"Letterlike Symbols":A=>A>=8448&&A<=8527,"Number Forms":A=>A>=8528&&A<=8591,"Miscellaneous Technical":A=>A>=8960&&A<=9215,"Control Pictures":A=>A>=9216&&A<=9279,"Optical Character Recognition":A=>A>=9280&&A<=9311,"Enclosed Alphanumerics":A=>A>=9312&&A<=9471,"Geometric Shapes":A=>A>=9632&&A<=9727,"Miscellaneous Symbols":A=>A>=9728&&A<=9983,"Miscellaneous Symbols and Arrows":A=>A>=11008&&A<=11263,"CJK Radicals Supplement":A=>A>=11904&&A<=12031,"Kangxi Radicals":A=>A>=12032&&A<=12255,"Ideographic Description Characters":A=>A>=12272&&A<=12287,"CJK Symbols and Punctuation":A=>A>=12288&&A<=12351,Hiragana:A=>A>=12352&&A<=12447,Katakana:A=>A>=12448&&A<=12543,Bopomofo:A=>A>=12544&&A<=12591,"Hangul Compatibility Jamo":A=>A>=12592&&A<=12687,Kanbun:A=>A>=12688&&A<=12703,"Bopomofo Extended":A=>A>=12704&&A<=12735,"CJK Strokes":A=>A>=12736&&A<=12783,"Katakana Phonetic Extensions":A=>A>=12784&&A<=12799,"Enclosed CJK Letters and Months":A=>A>=12800&&A<=13055,"CJK Compatibility":A=>A>=13056&&A<=13311,"CJK Unified Ideographs Extension A":A=>A>=13312&&A<=19903,"Yijing Hexagram Symbols":A=>A>=19904&&A<=19967,"CJK Unified Ideographs":A=>A>=19968&&A<=40959,"Yi Syllables":A=>A>=40960&&A<=42127,"Yi Radicals":A=>A>=42128&&A<=42191,"Hangul Jamo Extended-A":A=>A>=43360&&A<=43391,"Hangul Syllables":A=>A>=44032&&A<=55215,"Hangul Jamo Extended-B":A=>A>=55216&&A<=55295,"Private Use Area":A=>A>=57344&&A<=63743,"CJK Compatibility Ideographs":A=>A>=63744&&A<=64255,"Arabic Presentation Forms-A":A=>A>=64336&&A<=65023,"Vertical Forms":A=>A>=65040&&A<=65055,"CJK Compatibility Forms":A=>A>=65072&&A<=65103,"Small Form Variants":A=>A>=65104&&A<=65135,"Arabic Presentation Forms-B":A=>A>=65136&&A<=65279,"Halfwidth and Fullwidth Forms":A=>A>=65280&&A<=65519};function IA(A){for(const s of A)if(sA(s.charCodeAt(0)))return!0;return!1}function fl(A){for(const s of A)if(!Mo(s.charCodeAt(0)))return!1;return!0}function Mo(A){return!(Vi.Arabic(A)||Vi["Arabic Supplement"](A)||Vi["Arabic Extended-A"](A)||Vi["Arabic Presentation Forms-A"](A)||Vi["Arabic Presentation Forms-B"](A))}function sA(A){return!(A!==746&&A!==747&&(A<4352||!(Vi["Bopomofo Extended"](A)||Vi.Bopomofo(A)||Vi["CJK Compatibility Forms"](A)&&!(A>=65097&&A<=65103)||Vi["CJK Compatibility Ideographs"](A)||Vi["CJK Compatibility"](A)||Vi["CJK Radicals Supplement"](A)||Vi["CJK Strokes"](A)||!(!Vi["CJK Symbols and Punctuation"](A)||A>=12296&&A<=12305||A>=12308&&A<=12319||A===12336)||Vi["CJK Unified Ideographs Extension A"](A)||Vi["CJK Unified Ideographs"](A)||Vi["Enclosed CJK Letters and Months"](A)||Vi["Hangul Compatibility Jamo"](A)||Vi["Hangul Jamo Extended-A"](A)||Vi["Hangul Jamo Extended-B"](A)||Vi["Hangul Jamo"](A)||Vi["Hangul Syllables"](A)||Vi.Hiragana(A)||Vi["Ideographic Description Characters"](A)||Vi.Kanbun(A)||Vi["Kangxi Radicals"](A)||Vi["Katakana Phonetic Extensions"](A)||Vi.Katakana(A)&&A!==12540||!(!Vi["Halfwidth and Fullwidth Forms"](A)||A===65288||A===65289||A===65293||A>=65306&&A<=65310||A===65339||A===65341||A===65343||A>=65371&&A<=65503||A===65507||A>=65512&&A<=65519)||!(!Vi["Small Form Variants"](A)||A>=65112&&A<=65118||A>=65123&&A<=65126)||Vi["Unified Canadian Aboriginal Syllabics"](A)||Vi["Unified Canadian Aboriginal Syllabics Extended"](A)||Vi["Vertical Forms"](A)||Vi["Yijing Hexagram Symbols"](A)||Vi["Yi Syllables"](A)||Vi["Yi Radicals"](A))))}function dl(A){return!(sA(A)||function(s){return!!(Vi["Latin-1 Supplement"](s)&&(s===167||s===169||s===174||s===177||s===188||s===189||s===190||s===215||s===247)||Vi["General Punctuation"](s)&&(s===8214||s===8224||s===8225||s===8240||s===8241||s===8251||s===8252||s===8258||s===8263||s===8264||s===8265||s===8273)||Vi["Letterlike Symbols"](s)||Vi["Number Forms"](s)||Vi["Miscellaneous Technical"](s)&&(s>=8960&&s<=8967||s>=8972&&s<=8991||s>=8996&&s<=9e3||s===9003||s>=9085&&s<=9114||s>=9150&&s<=9165||s===9167||s>=9169&&s<=9179||s>=9186&&s<=9215)||Vi["Control Pictures"](s)&&s!==9251||Vi["Optical Character Recognition"](s)||Vi["Enclosed Alphanumerics"](s)||Vi["Geometric Shapes"](s)||Vi["Miscellaneous Symbols"](s)&&!(s>=9754&&s<=9759)||Vi["Miscellaneous Symbols and Arrows"](s)&&(s>=11026&&s<=11055||s>=11088&&s<=11097||s>=11192&&s<=11243)||Vi["CJK Symbols and Punctuation"](s)||Vi.Katakana(s)||Vi["Private Use Area"](s)||Vi["CJK Compatibility Forms"](s)||Vi["Small Form Variants"](s)||Vi["Halfwidth and Fullwidth Forms"](s)||s===8734||s===8756||s===8757||s>=9984&&s<=10087||s>=10102&&s<=10131||s===65532||s===65533)}(A))}function aA(A){return A>=1424&&A<=2303||Vi["Arabic Presentation Forms-A"](A)||Vi["Arabic Presentation Forms-B"](A)}function To(A,s){return!(!s&&aA(A)||A>=2304&&A<=3583||A>=3840&&A<=4255||Vi.Khmer(A))}function ls(A){for(const s of A)if(aA(s.charCodeAt(0)))return!0;return!1}const El="deferred",Il="loading",Ml="loaded";let oA=null,Fs="unavailable",to=null;const MA=function(A){A&&typeof A=="string"&&A.indexOf("NetworkError")>-1&&(Fs="error"),oA&&oA(A)};function pl(){TA.fire(new Gi("pluginStateChange",{pluginStatus:Fs,pluginURL:to}))}const TA=new Cs,gl=function(){return Fs},Xn=function(){if(Fs!==El||!to)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Fs=Il,pl(),to&&ir({url:to},A=>{A?MA(A):(Fs=Ml,pl())})},Vr={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Fs===Ml||Vr.applyArabicShaping!=null,isLoading:()=>Fs===Il,setState(A){if(!Ft())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");Fs=A.pluginStatus,to=A.pluginURL},isParsed(){if(!Ft())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return Vr.applyArabicShaping!=null&&Vr.processBidirectionalText!=null&&Vr.processStyledBidirectionalText!=null},getPluginURL(){if(!Ft())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return to}};class zr{constructor(s,c){this.zoom=s,c?(this.now=c.now,this.fadeDuration=c.fadeDuration,this.zoomHistory=c.zoomHistory,this.transition=c.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new JA,this.transition={})}isSupportedScript(s){return function(c,y){for(const T of c)if(!To(T.charCodeAt(0),y))return!1;return!0}(s,Vr.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const s=this.zoom,c=s-Math.floor(s),y=this.crossFadingFactor();return s>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:c+(1-c)*y}:{fromScale:.5,toScale:1,t:1-(1-y)*c}}}class Us{constructor(s,c){this.property=s,this.value=c,this.expression=function(y,T){if(Dr(y))return new Oa(y,T);if(Ja(y)){const N=bn(y,T);if(N.result==="error")throw new Error(N.value.map(V=>`${V.key}: ${V.message}`).join(", "));return N.value}{let N=y;return T.type==="color"&&typeof y=="string"?N=pi.parse(y):T.type!=="padding"||typeof y!="number"&&!Array.isArray(y)?T.type==="variableAnchorOffsetCollection"&&Array.isArray(y)&&(N=Ni.parse(y)):N=bi.parse(y),{kind:"constant",evaluate:()=>N}}}(c===void 0?s.specification.default:c,s.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(s,c,y){return this.property.possiblyEvaluate(this,s,c,y)}}class Sn{constructor(s){this.property=s,this.value=new Us(s,void 0)}transitioned(s,c){return new ml(this.property,this.value,c,ii({},s.transition,this.transition),s.now)}untransitioned(){return new ml(this.property,this.value,null,{},0)}}class Ga{constructor(s){this._properties=s,this._values=Object.create(s.defaultTransitionablePropertyValues)}getValue(s){return di(this._values[s].value.value)}setValue(s,c){Object.prototype.hasOwnProperty.call(this._values,s)||(this._values[s]=new Sn(this._values[s].property)),this._values[s].value=new Us(this._values[s].property,c===null?void 0:di(c))}getTransition(s){return di(this._values[s].transition)}setTransition(s,c){Object.prototype.hasOwnProperty.call(this._values,s)||(this._values[s]=new Sn(this._values[s].property)),this._values[s].transition=di(c)||void 0}serialize(){const s={};for(const c of Object.keys(this._values)){const y=this.getValue(c);y!==void 0&&(s[c]=y);const T=this.getTransition(c);T!==void 0&&(s[`${c}-transition`]=T)}return s}transitioned(s,c){const y=new vo(this._properties);for(const T of Object.keys(this._values))y._values[T]=this._values[T].transitioned(s,c._values[T]);return y}untransitioned(){const s=new vo(this._properties);for(const c of Object.keys(this._values))s._values[c]=this._values[c].untransitioned();return s}}class ml{constructor(s,c,y,T,N){this.property=s,this.value=c,this.begin=N+T.delay||0,this.end=this.begin+T.duration||0,s.specification.transition&&(T.delay||T.duration)&&(this.prior=y)}possiblyEvaluate(s,c,y){const T=s.now||0,N=this.value.possiblyEvaluate(s,c,y),V=this.prior;if(V){if(T>this.end)return this.prior=null,N;if(this.value.isDataDriven())return this.prior=null,N;if(T<this.begin)return V.possiblyEvaluate(s,c,y);{const X=(T-this.begin)/(this.end-this.begin);return this.property.interpolate(V.possiblyEvaluate(s,c,y),N,function(ae){if(ae<=0)return 0;if(ae>=1)return 1;const _e=ae*ae,Ee=_e*ae;return 4*(ae<.5?Ee:3*(ae-_e)+Ee-.75)}(X))}}return N}}class vo{constructor(s){this._properties=s,this._values=Object.create(s.defaultTransitioningPropertyValues)}possiblyEvaluate(s,c,y){const T=new Xs(this._properties);for(const N of Object.keys(this._values))T._values[N]=this._values[N].possiblyEvaluate(s,c,y);return T}hasTransition(){for(const s of Object.keys(this._values))if(this._values[s].prior)return!0;return!1}}class el{constructor(s){this._properties=s,this._values=Object.create(s.defaultPropertyValues)}hasValue(s){return this._values[s].value!==void 0}getValue(s){return di(this._values[s].value)}setValue(s,c){this._values[s]=new Us(this._values[s].property,c===null?void 0:di(c))}serialize(){const s={};for(const c of Object.keys(this._values)){const y=this.getValue(c);y!==void 0&&(s[c]=y)}return s}possiblyEvaluate(s,c,y){const T=new Xs(this._properties);for(const N of Object.keys(this._values))T._values[N]=this._values[N].possiblyEvaluate(s,c,y);return T}}class ps{constructor(s,c,y){this.property=s,this.value=c,this.parameters=y}isConstant(){return this.value.kind==="constant"}constantOr(s){return this.value.kind==="constant"?this.value.value:s}evaluate(s,c,y,T){return this.property.evaluate(this.value,this.parameters,s,c,y,T)}}class Xs{constructor(s){this._properties=s,this._values=Object.create(s.defaultPossiblyEvaluatedValues)}get(s){return this._values[s]}}class jt{constructor(s){this.specification=s}possiblyEvaluate(s,c){if(s.isDataDriven())throw new Error("Value should not be data driven");return s.expression.evaluate(c)}interpolate(s,c,y){const T=is[this.specification.type];return T?T(s,c,y):s}}class ci{constructor(s,c){this.specification=s,this.overrides=c}possiblyEvaluate(s,c,y,T){return new ps(this,s.expression.kind==="constant"||s.expression.kind==="camera"?{kind:"constant",value:s.expression.evaluate(c,null,{},y,T)}:s.expression,c)}interpolate(s,c,y){if(s.value.kind!=="constant"||c.value.kind!=="constant")return s;if(s.value.value===void 0||c.value.value===void 0)return new ps(this,{kind:"constant",value:void 0},s.parameters);const T=is[this.specification.type];if(T){const N=T(s.value.value,c.value.value,y);return new ps(this,{kind:"constant",value:N},s.parameters)}return s}evaluate(s,c,y,T,N,V){return s.kind==="constant"?s.value:s.evaluate(c,y,T,N,V)}}class io extends ci{possiblyEvaluate(s,c,y,T){if(s.value===void 0)return new ps(this,{kind:"constant",value:void 0},c);if(s.expression.kind==="constant"){const N=s.expression.evaluate(c,null,{},y,T),V=s.property.specification.type==="resolvedImage"&&typeof N!="string"?N.name:N,X=this._calculate(V,V,V,c);return new ps(this,{kind:"constant",value:X},c)}if(s.expression.kind==="camera"){const N=this._calculate(s.expression.evaluate({zoom:c.zoom-1}),s.expression.evaluate({zoom:c.zoom}),s.expression.evaluate({zoom:c.zoom+1}),c);return new ps(this,{kind:"constant",value:N},c)}return new ps(this,s.expression,c)}evaluate(s,c,y,T,N,V){if(s.kind==="source"){const X=s.evaluate(c,y,T,N,V);return this._calculate(X,X,X,c)}return s.kind==="composite"?this._calculate(s.evaluate({zoom:Math.floor(c.zoom)-1},y,T),s.evaluate({zoom:Math.floor(c.zoom)},y,T),s.evaluate({zoom:Math.floor(c.zoom)+1},y,T),c):s.value}_calculate(s,c,y,T){return T.zoom>T.zoomHistory.lastIntegerZoom?{from:s,to:c}:{from:y,to:c}}interpolate(s){return s}}class PA{constructor(s){this.specification=s}possiblyEvaluate(s,c,y,T){if(s.value!==void 0){if(s.expression.kind==="constant"){const N=s.expression.evaluate(c,null,{},y,T);return this._calculate(N,N,N,c)}return this._calculate(s.expression.evaluate(new zr(Math.floor(c.zoom-1),c)),s.expression.evaluate(new zr(Math.floor(c.zoom),c)),s.expression.evaluate(new zr(Math.floor(c.zoom+1),c)),c)}}_calculate(s,c,y,T){return T.zoom>T.zoomHistory.lastIntegerZoom?{from:s,to:c}:{from:y,to:c}}interpolate(s){return s}}class BA{constructor(s){this.specification=s}possiblyEvaluate(s,c,y,T){return!!s.expression.evaluate(c,null,{},y,T)}interpolate(){return!1}}class Br{constructor(s){this.properties=s,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const c in s){const y=s[c];y.specification.overridable&&this.overridableProperties.push(c);const T=this.defaultPropertyValues[c]=new Us(y,void 0),N=this.defaultTransitionablePropertyValues[c]=new Sn(y);this.defaultTransitioningPropertyValues[c]=N.untransitioned(),this.defaultPossiblyEvaluatedValues[c]=T.possiblyEvaluate({})}}}Zi("DataDrivenProperty",ci),Zi("DataConstantProperty",jt),Zi("CrossFadedDataDrivenProperty",io),Zi("CrossFadedProperty",PA),Zi("ColorRampProperty",BA);const no="-transition";class Ur extends Cs{constructor(s,c){if(super(),this.id=s.id,this.type=s.type,this._featureFilter={filter:()=>!0,needGeometry:!1},s.type!=="custom"&&(this.metadata=s.metadata,this.minzoom=s.minzoom,this.maxzoom=s.maxzoom,s.type!=="background"&&(this.source=s.source,this.sourceLayer=s["source-layer"],this.filter=s.filter),c.layout&&(this._unevaluatedLayout=new el(c.layout)),c.paint)){this._transitionablePaint=new Ga(c.paint);for(const y in s.paint)this.setPaintProperty(y,s.paint[y],{validate:!1});for(const y in s.layout)this.setLayoutProperty(y,s.layout[y],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Xs(c.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(s){return s==="visibility"?this.visibility:this._unevaluatedLayout.getValue(s)}setLayoutProperty(s,c,y={}){c!=null&&this._validate(Jl,`layers.${this.id}.layout.${s}`,s,c,y)||(s!=="visibility"?this._unevaluatedLayout.setValue(s,c):this.visibility=c)}getPaintProperty(s){return s.endsWith(no)?this._transitionablePaint.getTransition(s.slice(0,-11)):this._transitionablePaint.getValue(s)}setPaintProperty(s,c,y={}){if(c!=null&&this._validate(Pr,`layers.${this.id}.paint.${s}`,s,c,y))return!1;if(s.endsWith(no))return this._transitionablePaint.setTransition(s.slice(0,-11),c||void 0),!1;{const T=this._transitionablePaint._values[s],N=T.property.specification["property-type"]==="cross-faded-data-driven",V=T.value.isDataDriven(),X=T.value;this._transitionablePaint.setValue(s,c),this._handleSpecialPaintPropertyUpdate(s);const ae=this._transitionablePaint._values[s].value;return ae.isDataDriven()||V||N||this._handleOverridablePaintPropertyUpdate(s,X,ae)}}_handleSpecialPaintPropertyUpdate(s){}_handleOverridablePaintPropertyUpdate(s,c,y){return!1}isHidden(s){return!!(this.minzoom&&s<this.minzoom)||!!(this.maxzoom&&s>=this.maxzoom)||this.visibility==="none"}updateTransitions(s){this._transitioningPaint=this._transitionablePaint.transitioned(s,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(s,c){s.getCrossfadeParameters&&(this._crossfadeParameters=s.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(s,void 0,c)),this.paint=this._transitioningPaint.possiblyEvaluate(s,void 0,c)}serialize(){const s={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(s.layout=s.layout||{},s.layout.visibility=this.visibility),qt(s,(c,y)=>!(c===void 0||y==="layout"&&!Object.keys(c).length||y==="paint"&&!Object.keys(c).length))}_validate(s,c,y,T,N={}){return(!N||N.validate!==!1)&&KA(this,s.call(Vs,{key:c,layerType:this.type,objectKey:y,value:T,styleSpec:Kt,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const s in this.paint._values){const c=this.paint.get(s);if(c instanceof ps&&ga(c.property.specification)&&(c.value.kind==="source"||c.value.kind==="composite")&&c.value.isStateDependent)return!0}return!1}}const _={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class b{constructor(s,c){this._structArray=s,this._pos1=c*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class S{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(s,c){return s._trim(),c&&(s.isTransferred=!0,c.push(s.arrayBuffer)),{length:s.length,arrayBuffer:s.arrayBuffer}}static deserialize(s){const c=Object.create(this.prototype);return c.arrayBuffer=s.arrayBuffer,c.length=s.length,c.capacity=s.arrayBuffer.byteLength/c.bytesPerElement,c._refreshViews(),c}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(s){this.reserve(s),this.length=s}reserve(s){if(s>this.capacity){this.capacity=Math.max(s,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const c=this.uint8;this._refreshViews(),c&&this.uint8.set(c)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function C(A,s=1){let c=0,y=0;return{members:A.map(T=>{const N=_[T.type].BYTES_PER_ELEMENT,V=c=G(c,Math.max(s,N)),X=T.components||1;return y=Math.max(y,N),c+=N*X,{name:T.name,type:T.type,components:X,offset:V}}),size:G(c,Math.max(y,s)),alignment:s}}function G(A,s){return Math.ceil(A/s)*s}class j extends S{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,c){const y=this.length;return this.resize(y+1),this.emplace(y,s,c)}emplace(s,c,y){const T=2*s;return this.int16[T+0]=c,this.int16[T+1]=y,s}}j.prototype.bytesPerElement=4,Zi("StructArrayLayout2i4",j);class H extends S{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,c,y){const T=this.length;return this.resize(T+1),this.emplace(T,s,c,y)}emplace(s,c,y,T){const N=3*s;return this.int16[N+0]=c,this.int16[N+1]=y,this.int16[N+2]=T,s}}H.prototype.bytesPerElement=6,Zi("StructArrayLayout3i6",H);class ne extends S{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,c,y,T){const N=this.length;return this.resize(N+1),this.emplace(N,s,c,y,T)}emplace(s,c,y,T,N){const V=4*s;return this.int16[V+0]=c,this.int16[V+1]=y,this.int16[V+2]=T,this.int16[V+3]=N,s}}ne.prototype.bytesPerElement=8,Zi("StructArrayLayout4i8",ne);class Se extends S{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,c,y,T,N,V){const X=this.length;return this.resize(X+1),this.emplace(X,s,c,y,T,N,V)}emplace(s,c,y,T,N,V,X){const ae=6*s;return this.int16[ae+0]=c,this.int16[ae+1]=y,this.int16[ae+2]=T,this.int16[ae+3]=N,this.int16[ae+4]=V,this.int16[ae+5]=X,s}}Se.prototype.bytesPerElement=12,Zi("StructArrayLayout2i4i12",Se);class Ge extends S{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,c,y,T,N,V){const X=this.length;return this.resize(X+1),this.emplace(X,s,c,y,T,N,V)}emplace(s,c,y,T,N,V,X){const ae=4*s,_e=8*s;return this.int16[ae+0]=c,this.int16[ae+1]=y,this.uint8[_e+4]=T,this.uint8[_e+5]=N,this.uint8[_e+6]=V,this.uint8[_e+7]=X,s}}Ge.prototype.bytesPerElement=8,Zi("StructArrayLayout2i4ub8",Ge);class $e extends S{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,c){const y=this.length;return this.resize(y+1),this.emplace(y,s,c)}emplace(s,c,y){const T=2*s;return this.float32[T+0]=c,this.float32[T+1]=y,s}}$e.prototype.bytesPerElement=8,Zi("StructArrayLayout2f8",$e);class kt extends S{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,c,y,T,N,V,X,ae,_e,Ee){const ze=this.length;return this.resize(ze+1),this.emplace(ze,s,c,y,T,N,V,X,ae,_e,Ee)}emplace(s,c,y,T,N,V,X,ae,_e,Ee,ze){const qe=10*s;return this.uint16[qe+0]=c,this.uint16[qe+1]=y,this.uint16[qe+2]=T,this.uint16[qe+3]=N,this.uint16[qe+4]=V,this.uint16[qe+5]=X,this.uint16[qe+6]=ae,this.uint16[qe+7]=_e,this.uint16[qe+8]=Ee,this.uint16[qe+9]=ze,s}}kt.prototype.bytesPerElement=20,Zi("StructArrayLayout10ui20",kt);class lt extends S{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,c,y,T,N,V,X,ae,_e,Ee,ze,qe){const et=this.length;return this.resize(et+1),this.emplace(et,s,c,y,T,N,V,X,ae,_e,Ee,ze,qe)}emplace(s,c,y,T,N,V,X,ae,_e,Ee,ze,qe,et){const tt=12*s;return this.int16[tt+0]=c,this.int16[tt+1]=y,this.int16[tt+2]=T,this.int16[tt+3]=N,this.uint16[tt+4]=V,this.uint16[tt+5]=X,this.uint16[tt+6]=ae,this.uint16[tt+7]=_e,this.int16[tt+8]=Ee,this.int16[tt+9]=ze,this.int16[tt+10]=qe,this.int16[tt+11]=et,s}}lt.prototype.bytesPerElement=24,Zi("StructArrayLayout4i4ui4i24",lt);class ct extends S{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,c,y){const T=this.length;return this.resize(T+1),this.emplace(T,s,c,y)}emplace(s,c,y,T){const N=3*s;return this.float32[N+0]=c,this.float32[N+1]=y,this.float32[N+2]=T,s}}ct.prototype.bytesPerElement=12,Zi("StructArrayLayout3f12",ct);class L extends S{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(s){const c=this.length;return this.resize(c+1),this.emplace(c,s)}emplace(s,c){return this.uint32[1*s+0]=c,s}}L.prototype.bytesPerElement=4,Zi("StructArrayLayout1ul4",L);class r extends S{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,c,y,T,N,V,X,ae,_e){const Ee=this.length;return this.resize(Ee+1),this.emplace(Ee,s,c,y,T,N,V,X,ae,_e)}emplace(s,c,y,T,N,V,X,ae,_e,Ee){const ze=10*s,qe=5*s;return this.int16[ze+0]=c,this.int16[ze+1]=y,this.int16[ze+2]=T,this.int16[ze+3]=N,this.int16[ze+4]=V,this.int16[ze+5]=X,this.uint32[qe+3]=ae,this.uint16[ze+8]=_e,this.uint16[ze+9]=Ee,s}}r.prototype.bytesPerElement=20,Zi("StructArrayLayout6i1ul2ui20",r);class d extends S{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,c,y,T,N,V){const X=this.length;return this.resize(X+1),this.emplace(X,s,c,y,T,N,V)}emplace(s,c,y,T,N,V,X){const ae=6*s;return this.int16[ae+0]=c,this.int16[ae+1]=y,this.int16[ae+2]=T,this.int16[ae+3]=N,this.int16[ae+4]=V,this.int16[ae+5]=X,s}}d.prototype.bytesPerElement=12,Zi("StructArrayLayout2i2i2i12",d);class k extends S{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,c,y,T,N){const V=this.length;return this.resize(V+1),this.emplace(V,s,c,y,T,N)}emplace(s,c,y,T,N,V){const X=4*s,ae=8*s;return this.float32[X+0]=c,this.float32[X+1]=y,this.float32[X+2]=T,this.int16[ae+6]=N,this.int16[ae+7]=V,s}}k.prototype.bytesPerElement=16,Zi("StructArrayLayout2f1f2i16",k);class I extends S{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,c,y,T){const N=this.length;return this.resize(N+1),this.emplace(N,s,c,y,T)}emplace(s,c,y,T,N){const V=12*s,X=3*s;return this.uint8[V+0]=c,this.uint8[V+1]=y,this.float32[X+1]=T,this.float32[X+2]=N,s}}I.prototype.bytesPerElement=12,Zi("StructArrayLayout2ub2f12",I);class R extends S{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,c,y){const T=this.length;return this.resize(T+1),this.emplace(T,s,c,y)}emplace(s,c,y,T){const N=3*s;return this.uint16[N+0]=c,this.uint16[N+1]=y,this.uint16[N+2]=T,s}}R.prototype.bytesPerElement=6,Zi("StructArrayLayout3ui6",R);class q extends S{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,c,y,T,N,V,X,ae,_e,Ee,ze,qe,et,tt,ut,ft,_t){const Rt=this.length;return this.resize(Rt+1),this.emplace(Rt,s,c,y,T,N,V,X,ae,_e,Ee,ze,qe,et,tt,ut,ft,_t)}emplace(s,c,y,T,N,V,X,ae,_e,Ee,ze,qe,et,tt,ut,ft,_t,Rt){const Pt=24*s,Nt=12*s,Xt=48*s;return this.int16[Pt+0]=c,this.int16[Pt+1]=y,this.uint16[Pt+2]=T,this.uint16[Pt+3]=N,this.uint32[Nt+2]=V,this.uint32[Nt+3]=X,this.uint32[Nt+4]=ae,this.uint16[Pt+10]=_e,this.uint16[Pt+11]=Ee,this.uint16[Pt+12]=ze,this.float32[Nt+7]=qe,this.float32[Nt+8]=et,this.uint8[Xt+36]=tt,this.uint8[Xt+37]=ut,this.uint8[Xt+38]=ft,this.uint32[Nt+10]=_t,this.int16[Pt+22]=Rt,s}}q.prototype.bytesPerElement=48,Zi("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",q);class a extends S{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,c,y,T,N,V,X,ae,_e,Ee,ze,qe,et,tt,ut,ft,_t,Rt,Pt,Nt,Xt,_i,Wi,hn,qi,Ri,Bi,nn){const Fi=this.length;return this.resize(Fi+1),this.emplace(Fi,s,c,y,T,N,V,X,ae,_e,Ee,ze,qe,et,tt,ut,ft,_t,Rt,Pt,Nt,Xt,_i,Wi,hn,qi,Ri,Bi,nn)}emplace(s,c,y,T,N,V,X,ae,_e,Ee,ze,qe,et,tt,ut,ft,_t,Rt,Pt,Nt,Xt,_i,Wi,hn,qi,Ri,Bi,nn,Fi){const Ei=32*s,rn=16*s;return this.int16[Ei+0]=c,this.int16[Ei+1]=y,this.int16[Ei+2]=T,this.int16[Ei+3]=N,this.int16[Ei+4]=V,this.int16[Ei+5]=X,this.int16[Ei+6]=ae,this.int16[Ei+7]=_e,this.uint16[Ei+8]=Ee,this.uint16[Ei+9]=ze,this.uint16[Ei+10]=qe,this.uint16[Ei+11]=et,this.uint16[Ei+12]=tt,this.uint16[Ei+13]=ut,this.uint16[Ei+14]=ft,this.uint16[Ei+15]=_t,this.uint16[Ei+16]=Rt,this.uint16[Ei+17]=Pt,this.uint16[Ei+18]=Nt,this.uint16[Ei+19]=Xt,this.uint16[Ei+20]=_i,this.uint16[Ei+21]=Wi,this.uint16[Ei+22]=hn,this.uint32[rn+12]=qi,this.float32[rn+13]=Ri,this.float32[rn+14]=Bi,this.uint16[Ei+30]=nn,this.uint16[Ei+31]=Fi,s}}a.prototype.bytesPerElement=64,Zi("StructArrayLayout8i15ui1ul2f2ui64",a);class o extends S{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s){const c=this.length;return this.resize(c+1),this.emplace(c,s)}emplace(s,c){return this.float32[1*s+0]=c,s}}o.prototype.bytesPerElement=4,Zi("StructArrayLayout1f4",o);class h extends S{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,c,y){const T=this.length;return this.resize(T+1),this.emplace(T,s,c,y)}emplace(s,c,y,T){const N=3*s;return this.uint16[6*s+0]=c,this.float32[N+1]=y,this.float32[N+2]=T,s}}h.prototype.bytesPerElement=12,Zi("StructArrayLayout1ui2f12",h);class p extends S{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,c,y){const T=this.length;return this.resize(T+1),this.emplace(T,s,c,y)}emplace(s,c,y,T){const N=4*s;return this.uint32[2*s+0]=c,this.uint16[N+2]=y,this.uint16[N+3]=T,s}}p.prototype.bytesPerElement=8,Zi("StructArrayLayout1ul2ui8",p);class v extends S{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,c){const y=this.length;return this.resize(y+1),this.emplace(y,s,c)}emplace(s,c,y){const T=2*s;return this.uint16[T+0]=c,this.uint16[T+1]=y,s}}v.prototype.bytesPerElement=4,Zi("StructArrayLayout2ui4",v);class E extends S{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s){const c=this.length;return this.resize(c+1),this.emplace(c,s)}emplace(s,c){return this.uint16[1*s+0]=c,s}}E.prototype.bytesPerElement=2,Zi("StructArrayLayout1ui2",E);class z extends S{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,c,y,T){const N=this.length;return this.resize(N+1),this.emplace(N,s,c,y,T)}emplace(s,c,y,T,N){const V=4*s;return this.float32[V+0]=c,this.float32[V+1]=y,this.float32[V+2]=T,this.float32[V+3]=N,s}}z.prototype.bytesPerElement=16,Zi("StructArrayLayout4f16",z);class F extends b{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new ce(this.anchorPointX,this.anchorPointY)}}F.prototype.size=20;class Y extends r{get(s){return new F(this,s)}}Zi("CollisionBoxArray",Y);class J extends b{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(s){this._structArray.uint8[this._pos1+37]=s}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(s){this._structArray.uint8[this._pos1+38]=s}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(s){this._structArray.uint32[this._pos4+10]=s}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}J.prototype.size=48;class ve extends q{get(s){return new J(this,s)}}Zi("PlacedSymbolArray",ve);class Ie extends b{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(s){this._structArray.uint32[this._pos4+12]=s}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}Ie.prototype.size=64;class Oe extends a{get(s){return new Ie(this,s)}}Zi("SymbolInstanceArray",Oe);class He extends o{getoffsetX(s){return this.float32[1*s+0]}}Zi("GlyphOffsetArray",He);class We extends H{getx(s){return this.int16[3*s+0]}gety(s){return this.int16[3*s+1]}gettileUnitDistanceFromAnchor(s){return this.int16[3*s+2]}}Zi("SymbolLineVertexArray",We);class st extends b{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}st.prototype.size=12;class wt extends h{get(s){return new st(this,s)}}Zi("TextAnchorOffsetArray",wt);class Et extends b{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Et.prototype.size=8;class pt extends p{get(s){return new Et(this,s)}}Zi("FeatureIndexArray",pt);class bt extends j{}class St extends j{}class vi extends j{}class $t extends Se{}class ri extends Ge{}class ni extends $e{}class _n extends kt{}class Ki extends lt{}class Oi extends ct{}class Ui extends L{}class tn extends d{}class ji extends I{}class Qn extends R{}class fn extends v{}const Fn=C([{name:"a_pos",components:2,type:"Int16"}],4),{members:Rr}=Fn;class Mr{constructor(s=[]){this.segments=s}prepareSegment(s,c,y,T){let N=this.segments[this.segments.length-1];return s>Mr.MAX_VERTEX_ARRAY_LENGTH&&vt(`Max vertices per segment is ${Mr.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${s}`),(!N||N.vertexLength+s>Mr.MAX_VERTEX_ARRAY_LENGTH||N.sortKey!==T)&&(N={vertexOffset:c.length,primitiveOffset:y.length,vertexLength:0,primitiveLength:0},T!==void 0&&(N.sortKey=T),this.segments.push(N)),N}get(){return this.segments}destroy(){for(const s of this.segments)for(const c in s.vaos)s.vaos[c].destroy()}static simpleSegment(s,c,y,T){return new Mr([{vertexOffset:s,primitiveOffset:c,vertexLength:y,primitiveLength:T,vaos:{},sortKey:0}])}}function AA(A,s){return 256*(A=Te(Math.floor(A),0,255))+Te(Math.floor(s),0,255)}Mr.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Zi("SegmentVector",Mr);const DA=C([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var lA={exports:{}},Tl={exports:{}};Tl.exports=function(A,s){var c,y,T,N,V,X,ae,_e;for(y=A.length-(c=3&A.length),T=s,V=3432918353,X=461845907,_e=0;_e<y;)ae=255&A.charCodeAt(_e)|(255&A.charCodeAt(++_e))<<8|(255&A.charCodeAt(++_e))<<16|(255&A.charCodeAt(++_e))<<24,++_e,T=27492+(65535&(N=5*(65535&(T=(T^=ae=(65535&(ae=(ae=(65535&ae)*V+(((ae>>>16)*V&65535)<<16)&4294967295)<<15|ae>>>17))*X+(((ae>>>16)*X&65535)<<16)&4294967295)<<13|T>>>19))+((5*(T>>>16)&65535)<<16)&4294967295))+((58964+(N>>>16)&65535)<<16);switch(ae=0,c){case 3:ae^=(255&A.charCodeAt(_e+2))<<16;case 2:ae^=(255&A.charCodeAt(_e+1))<<8;case 1:T^=ae=(65535&(ae=(ae=(65535&(ae^=255&A.charCodeAt(_e)))*V+(((ae>>>16)*V&65535)<<16)&4294967295)<<15|ae>>>17))*X+(((ae>>>16)*X&65535)<<16)&4294967295}return T^=A.length,T=2246822507*(65535&(T^=T>>>16))+((2246822507*(T>>>16)&65535)<<16)&4294967295,T=3266489909*(65535&(T^=T>>>13))+((3266489909*(T>>>16)&65535)<<16)&4294967295,(T^=T>>>16)>>>0};var Pl=Tl.exports,Gr={exports:{}};Gr.exports=function(A,s){for(var c,y=A.length,T=s^y,N=0;y>=4;)c=1540483477*(65535&(c=255&A.charCodeAt(N)|(255&A.charCodeAt(++N))<<8|(255&A.charCodeAt(++N))<<16|(255&A.charCodeAt(++N))<<24))+((1540483477*(c>>>16)&65535)<<16),T=1540483477*(65535&T)+((1540483477*(T>>>16)&65535)<<16)^(c=1540483477*(65535&(c^=c>>>24))+((1540483477*(c>>>16)&65535)<<16)),y-=4,++N;switch(y){case 3:T^=(255&A.charCodeAt(N+2))<<16;case 2:T^=(255&A.charCodeAt(N+1))<<8;case 1:T=1540483477*(65535&(T^=255&A.charCodeAt(N)))+((1540483477*(T>>>16)&65535)<<16)}return T=1540483477*(65535&(T^=T>>>13))+((1540483477*(T>>>16)&65535)<<16),(T^=T>>>15)>>>0};var Aa=Pl,Qa=Gr.exports;lA.exports=Aa,lA.exports.murmur3=Aa,lA.exports.murmur2=Qa;var qa=O(lA.exports);class ws{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(s,c,y,T){this.ids.push(Os(s)),this.positions.push(c,y,T)}getPositions(s){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const c=Os(s);let y=0,T=this.ids.length-1;for(;y<T;){const V=y+T>>1;this.ids[V]>=c?T=V:y=V+1}const N=[];for(;this.ids[y]===c;)N.push({index:this.positions[3*y],start:this.positions[3*y+1],end:this.positions[3*y+2]}),y++;return N}static serialize(s,c){const y=new Float64Array(s.ids),T=new Uint32Array(s.positions);return Ks(y,T,0,y.length-1),c&&c.push(y.buffer,T.buffer),{ids:y,positions:T}}static deserialize(s){const c=new ws;return c.ids=s.ids,c.positions=s.positions,c.indexed=!0,c}}function Os(A){const s=+A;return!isNaN(s)&&s<=Number.MAX_SAFE_INTEGER?s:qa(String(A))}function Ks(A,s,c,y){for(;c<y;){const T=A[c+y>>1];let N=c-1,V=y+1;for(;;){do N++;while(A[N]<T);do V--;while(A[V]>T);if(N>=V)break;Ms(A,N,V),Ms(s,3*N,3*V),Ms(s,3*N+1,3*V+1),Ms(s,3*N+2,3*V+2)}V-c<y-V?(Ks(A,s,c,V),c=V+1):(Ks(A,s,V+1,y),y=V)}}function Ms(A,s,c){const y=A[s];A[s]=A[c],A[c]=y}Zi("FeaturePositionMap",ws);class Gs{constructor(s,c){this.gl=s.gl,this.location=c}}class eu extends Gs{constructor(s,c){super(s,c),this.current=0}set(s){this.current!==s&&(this.current=s,this.gl.uniform1f(this.location,s))}}class mc extends Gs{constructor(s,c){super(s,c),this.current=[0,0,0,0]}set(s){s[0]===this.current[0]&&s[1]===this.current[1]&&s[2]===this.current[2]&&s[3]===this.current[3]||(this.current=s,this.gl.uniform4f(this.location,s[0],s[1],s[2],s[3]))}}class _c extends Gs{constructor(s,c){super(s,c),this.current=pi.transparent}set(s){s.r===this.current.r&&s.g===this.current.g&&s.b===this.current.b&&s.a===this.current.a||(this.current=s,this.gl.uniform4f(this.location,s.r,s.g,s.b,s.a))}}const w0=new Float32Array(16);function vu(A){return[AA(255*A.r,255*A.g),AA(255*A.b,255*A.a)]}class LA{constructor(s,c,y){this.value=s,this.uniformNames=c.map(T=>`u_${T}`),this.type=y}setUniform(s,c,y){s.set(y.constantOr(this.value))}getBinding(s,c,y){return this.type==="color"?new _c(s,c):new eu(s,c)}}class uA{constructor(s,c){this.uniformNames=c.map(y=>`u_${y}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(s,c){this.pixelRatioFrom=c.pixelRatio,this.pixelRatioTo=s.pixelRatio,this.patternFrom=c.tlbr,this.patternTo=s.tlbr}setUniform(s,c,y,T){const N=T==="u_pattern_to"?this.patternTo:T==="u_pattern_from"?this.patternFrom:T==="u_pixel_ratio_to"?this.pixelRatioTo:T==="u_pixel_ratio_from"?this.pixelRatioFrom:null;N&&s.set(N)}getBinding(s,c,y){return y.substr(0,9)==="u_pattern"?new mc(s,c):new eu(s,c)}}class hA{constructor(s,c,y,T){this.expression=s,this.type=y,this.maxValue=0,this.paintVertexAttributes=c.map(N=>({name:`a_${N}`,type:"Float32",components:y==="color"?2:1,offset:0})),this.paintVertexArray=new T}populatePaintArray(s,c,y,T,N){const V=this.paintVertexArray.length,X=this.expression.evaluate(new zr(0),c,{},T,[],N);this.paintVertexArray.resize(s),this._setPaintValue(V,s,X)}updatePaintArray(s,c,y,T){const N=this.expression.evaluate({zoom:0},y,T);this._setPaintValue(s,c,N)}_setPaintValue(s,c,y){if(this.type==="color"){const T=vu(y);for(let N=s;N<c;N++)this.paintVertexArray.emplace(N,T[0],T[1])}else{for(let T=s;T<c;T++)this.paintVertexArray.emplace(T,y);this.maxValue=Math.max(this.maxValue,Math.abs(y))}}upload(s){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=s.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class jo{constructor(s,c,y,T,N,V){this.expression=s,this.uniformNames=c.map(X=>`u_${X}_t`),this.type=y,this.useIntegerZoom=T,this.zoom=N,this.maxValue=0,this.paintVertexAttributes=c.map(X=>({name:`a_${X}`,type:"Float32",components:y==="color"?4:2,offset:0})),this.paintVertexArray=new V}populatePaintArray(s,c,y,T,N){const V=this.expression.evaluate(new zr(this.zoom),c,{},T,[],N),X=this.expression.evaluate(new zr(this.zoom+1),c,{},T,[],N),ae=this.paintVertexArray.length;this.paintVertexArray.resize(s),this._setPaintValue(ae,s,V,X)}updatePaintArray(s,c,y,T){const N=this.expression.evaluate({zoom:this.zoom},y,T),V=this.expression.evaluate({zoom:this.zoom+1},y,T);this._setPaintValue(s,c,N,V)}_setPaintValue(s,c,y,T){if(this.type==="color"){const N=vu(y),V=vu(T);for(let X=s;X<c;X++)this.paintVertexArray.emplace(X,N[0],N[1],V[0],V[1])}else{for(let N=s;N<c;N++)this.paintVertexArray.emplace(N,y,T);this.maxValue=Math.max(this.maxValue,Math.abs(y),Math.abs(T))}}upload(s){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=s.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(s,c){const y=this.useIntegerZoom?Math.floor(c.zoom):c.zoom,T=Te(this.expression.interpolationFactor(y,this.zoom,this.zoom+1),0,1);s.set(T)}getBinding(s,c,y){return new eu(s,c)}}class zA{constructor(s,c,y,T,N,V){this.expression=s,this.type=c,this.useIntegerZoom=y,this.zoom=T,this.layerId=V,this.zoomInPaintVertexArray=new N,this.zoomOutPaintVertexArray=new N}populatePaintArray(s,c,y){const T=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(s),this.zoomOutPaintVertexArray.resize(s),this._setPaintValues(T,s,c.patterns&&c.patterns[this.layerId],y)}updatePaintArray(s,c,y,T,N){this._setPaintValues(s,c,y.patterns&&y.patterns[this.layerId],N)}_setPaintValues(s,c,y,T){if(!T||!y)return;const{min:N,mid:V,max:X}=y,ae=T[N],_e=T[V],Ee=T[X];if(ae&&_e&&Ee)for(let ze=s;ze<c;ze++)this.zoomInPaintVertexArray.emplace(ze,_e.tl[0],_e.tl[1],_e.br[0],_e.br[1],ae.tl[0],ae.tl[1],ae.br[0],ae.br[1],_e.pixelRatio,ae.pixelRatio),this.zoomOutPaintVertexArray.emplace(ze,_e.tl[0],_e.tl[1],_e.br[0],_e.br[1],Ee.tl[0],Ee.tl[1],Ee.br[0],Ee.br[1],_e.pixelRatio,Ee.pixelRatio)}upload(s){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=s.createVertexBuffer(this.zoomInPaintVertexArray,DA.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=s.createVertexBuffer(this.zoomOutPaintVertexArray,DA.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Bl{constructor(s,c,y){this.binders={},this._buffers=[];const T=[];for(const N in s.paint._values){if(!y(N))continue;const V=s.paint.get(N);if(!(V instanceof ps&&ga(V.property.specification)))continue;const X=ym(N,s.type),ae=V.value,_e=V.property.specification.type,Ee=V.property.useIntegerZoom,ze=V.property.specification["property-type"],qe=ze==="cross-faded"||ze==="cross-faded-data-driven";if(ae.kind==="constant")this.binders[N]=qe?new uA(ae.value,X):new LA(ae.value,X,_e),T.push(`/u_${N}`);else if(ae.kind==="source"||qe){const et=vc(N,_e,"source");this.binders[N]=qe?new zA(ae,_e,Ee,c,et,s.id):new hA(ae,X,_e,et),T.push(`/a_${N}`)}else{const et=vc(N,_e,"composite");this.binders[N]=new jo(ae,X,_e,Ee,c,et),T.push(`/z_${N}`)}}this.cacheKey=T.sort().join("")}getMaxValue(s){const c=this.binders[s];return c instanceof hA||c instanceof jo?c.maxValue:0}populatePaintArrays(s,c,y,T,N){for(const V in this.binders){const X=this.binders[V];(X instanceof hA||X instanceof jo||X instanceof zA)&&X.populatePaintArray(s,c,y,T,N)}}setConstantPatternPositions(s,c){for(const y in this.binders){const T=this.binders[y];T instanceof uA&&T.setConstantPatternPositions(s,c)}}updatePaintArrays(s,c,y,T,N){let V=!1;for(const X in s){const ae=c.getPositions(X);for(const _e of ae){const Ee=y.feature(_e.index);for(const ze in this.binders){const qe=this.binders[ze];if((qe instanceof hA||qe instanceof jo||qe instanceof zA)&&qe.expression.isStateDependent===!0){const et=T.paint.get(ze);qe.expression=et.value,qe.updatePaintArray(_e.start,_e.end,Ee,s[X],N),V=!0}}}}return V}defines(){const s=[];for(const c in this.binders){const y=this.binders[c];(y instanceof LA||y instanceof uA)&&s.push(...y.uniformNames.map(T=>`#define HAS_UNIFORM_${T}`))}return s}getBinderAttributes(){const s=[];for(const c in this.binders){const y=this.binders[c];if(y instanceof hA||y instanceof jo)for(let T=0;T<y.paintVertexAttributes.length;T++)s.push(y.paintVertexAttributes[T].name);else if(y instanceof zA)for(let T=0;T<DA.members.length;T++)s.push(DA.members[T].name)}return s}getBinderUniforms(){const s=[];for(const c in this.binders){const y=this.binders[c];if(y instanceof LA||y instanceof uA||y instanceof jo)for(const T of y.uniformNames)s.push(T)}return s}getPaintVertexBuffers(){return this._buffers}getUniforms(s,c){const y=[];for(const T in this.binders){const N=this.binders[T];if(N instanceof LA||N instanceof uA||N instanceof jo){for(const V of N.uniformNames)if(c[V]){const X=N.getBinding(s,c[V],V);y.push({name:V,property:T,binding:X})}}}return y}setUniforms(s,c,y,T){for(const{name:N,property:V,binding:X}of c)this.binders[V].setUniform(X,T,y.get(V),N)}updatePaintBuffers(s){this._buffers=[];for(const c in this.binders){const y=this.binders[c];if(s&&y instanceof zA){const T=s.fromScale===2?y.zoomInPaintVertexBuffer:y.zoomOutPaintVertexBuffer;T&&this._buffers.push(T)}else(y instanceof hA||y instanceof jo)&&y.paintVertexBuffer&&this._buffers.push(y.paintVertexBuffer)}}upload(s){for(const c in this.binders){const y=this.binders[c];(y instanceof hA||y instanceof jo||y instanceof zA)&&y.upload(s)}this.updatePaintBuffers()}destroy(){for(const s in this.binders){const c=this.binders[s];(c instanceof hA||c instanceof jo||c instanceof zA)&&c.destroy()}}}class tl{constructor(s,c,y=()=>!0){this.programConfigurations={};for(const T of s)this.programConfigurations[T.id]=new Bl(T,c,y);this.needsUpload=!1,this._featureMap=new ws,this._bufferOffset=0}populatePaintArrays(s,c,y,T,N,V){for(const X in this.programConfigurations)this.programConfigurations[X].populatePaintArrays(s,c,T,N,V);c.id!==void 0&&this._featureMap.add(c.id,y,this._bufferOffset,s),this._bufferOffset=s,this.needsUpload=!0}updatePaintArrays(s,c,y,T){for(const N of y)this.needsUpload=this.programConfigurations[N.id].updatePaintArrays(s,this._featureMap,c,N,T)||this.needsUpload}get(s){return this.programConfigurations[s]}upload(s){if(this.needsUpload){for(const c in this.programConfigurations)this.programConfigurations[c].upload(s);this.needsUpload=!1}}destroy(){for(const s in this.programConfigurations)this.programConfigurations[s].destroy()}}function ym(A,s){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[A]||[A.replace(`${s}-`,"").replace(/-/g,"_")]}function vc(A,s,c){const y={color:{source:$e,composite:z},number:{source:o,composite:$e}},T=function(N){return{"line-pattern":{source:_n,composite:_n},"fill-pattern":{source:_n,composite:_n},"fill-extrusion-pattern":{source:_n,composite:_n}}[N]}(A);return T&&T[c]||y[s][c]}Zi("ConstantBinder",LA),Zi("CrossFadedConstantBinder",uA),Zi("SourceExpressionBinder",hA),Zi("CrossFadedCompositeBinder",zA),Zi("CompositeExpressionBinder",jo),Zi("ProgramConfiguration",Bl,{omit:["_buffers"]}),Zi("ProgramConfigurationSet",tl);const Qs=8192,b0=Math.pow(2,14)-1,md=-b0-1;function yu(A){const s=Qs/A.extent,c=A.loadGeometry();for(let y=0;y<c.length;y++){const T=c[y];for(let N=0;N<T.length;N++){const V=T[N],X=Math.round(V.x*s),ae=Math.round(V.y*s);V.x=Te(X,md,b0),V.y=Te(ae,md,b0),(X<V.x||X>V.x+1||ae<V.y||ae>V.y+1)&&vt("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return c}function tu(A,s){return{type:A.type,id:A.id,properties:A.properties,geometry:s?yu(A):[]}}function Yu(A,s,c,y,T){A.emplaceBack(2*s+(y+1)/2,2*c+(T+1)/2)}class S0{constructor(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(c=>c.id),this.index=s.index,this.hasPattern=!1,this.layoutVertexArray=new St,this.indexArray=new Qn,this.segments=new Mr,this.programConfigurations=new tl(s.layers,s.zoom),this.stateDependentLayerIds=this.layers.filter(c=>c.isStateDependent()).map(c=>c.id)}populate(s,c,y){const T=this.layers[0],N=[];let V=null,X=!1;T.type==="circle"&&(V=T.layout.get("circle-sort-key"),X=!V.isConstant());for(const{feature:ae,id:_e,index:Ee,sourceLayerIndex:ze}of s){const qe=this.layers[0]._featureFilter.needGeometry,et=tu(ae,qe);if(!this.layers[0]._featureFilter.filter(new zr(this.zoom),et,y))continue;const tt=X?V.evaluate(et,{},y):void 0,ut={id:_e,properties:ae.properties,type:ae.type,sourceLayerIndex:ze,index:Ee,geometry:qe?et.geometry:yu(ae),patterns:{},sortKey:tt};N.push(ut)}X&&N.sort((ae,_e)=>ae.sortKey-_e.sortKey);for(const ae of N){const{geometry:_e,index:Ee,sourceLayerIndex:ze}=ae,qe=s[Ee].feature;this.addFeature(ae,_e,Ee,y),c.featureIndex.insert(qe,_e,Ee,ze,this.index)}}update(s,c,y){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,c,this.stateDependentLayers,y)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,Rr),this.indexBuffer=s.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(s,c,y,T){for(const N of c)for(const V of N){const X=V.x,ae=V.y;if(X<0||X>=Qs||ae<0||ae>=Qs)continue;const _e=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,s.sortKey),Ee=_e.vertexLength;Yu(this.layoutVertexArray,X,ae,-1,-1),Yu(this.layoutVertexArray,X,ae,1,-1),Yu(this.layoutVertexArray,X,ae,1,1),Yu(this.layoutVertexArray,X,ae,-1,1),this.indexArray.emplaceBack(Ee,Ee+1,Ee+2),this.indexArray.emplaceBack(Ee,Ee+3,Ee+2),_e.vertexLength+=4,_e.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,y,{},T)}}function yc(A,s){for(let c=0;c<A.length;c++)if(xu(s,A[c]))return!0;for(let c=0;c<s.length;c++)if(xu(A,s[c]))return!0;return!!$u(A,s)}function _d(A,s,c){return!!xu(A,s)||!!xc(s,A,c)}function C0(A,s){if(A.length===1)return yd(s,A[0]);for(let c=0;c<s.length;c++){const y=s[c];for(let T=0;T<y.length;T++)if(xu(A,y[T]))return!0}for(let c=0;c<A.length;c++)if(yd(s,A[c]))return!0;for(let c=0;c<s.length;c++)if($u(A,s[c]))return!0;return!1}function vd(A,s,c){if(A.length>1){if($u(A,s))return!0;for(let y=0;y<s.length;y++)if(xc(s[y],A,c))return!0}for(let y=0;y<A.length;y++)if(xc(A[y],s,c))return!0;return!1}function $u(A,s){if(A.length===0||s.length===0)return!1;for(let c=0;c<A.length-1;c++){const y=A[c],T=A[c+1];for(let N=0;N<s.length-1;N++)if(xm(y,T,s[N],s[N+1]))return!0}return!1}function xm(A,s,c,y){return Ut(A,c,y)!==Ut(s,c,y)&&Ut(A,s,c)!==Ut(A,s,y)}function xc(A,s,c){const y=c*c;if(s.length===1)return A.distSqr(s[0])<y;for(let T=1;T<s.length;T++)if(k0(A,s[T-1],s[T])<y)return!0;return!1}function k0(A,s,c){const y=s.distSqr(c);if(y===0)return A.distSqr(s);const T=((A.x-s.x)*(c.x-s.x)+(A.y-s.y)*(c.y-s.y))/y;return A.distSqr(T<0?s:T>1?c:c.sub(s)._mult(T)._add(s))}function yd(A,s){let c,y,T,N=!1;for(let V=0;V<A.length;V++){c=A[V];for(let X=0,ae=c.length-1;X<c.length;ae=X++)y=c[X],T=c[ae],y.y>s.y!=T.y>s.y&&s.x<(T.x-y.x)*(s.y-y.y)/(T.y-y.y)+y.x&&(N=!N)}return N}function xu(A,s){let c=!1;for(let y=0,T=A.length-1;y<A.length;T=y++){const N=A[y],V=A[T];N.y>s.y!=V.y>s.y&&s.x<(V.x-N.x)*(s.y-N.y)/(V.y-N.y)+N.x&&(c=!c)}return c}function wm(A,s,c){const y=c[0],T=c[2];if(A.x<y.x&&s.x<y.x||A.x>T.x&&s.x>T.x||A.y<y.y&&s.y<y.y||A.y>T.y&&s.y>T.y)return!1;const N=Ut(A,s,c[0]);return N!==Ut(A,s,c[1])||N!==Ut(A,s,c[2])||N!==Ut(A,s,c[3])}function wu(A,s,c){const y=s.paint.get(A).value;return y.kind==="constant"?y.value:c.programConfigurations.get(s.id).getMaxValue(A)}function yh(A){return Math.sqrt(A[0]*A[0]+A[1]*A[1])}function Xu(A,s,c,y,T){if(!s[0]&&!s[1])return A;const N=ce.convert(s)._mult(T);c==="viewport"&&N._rotate(-y);const V=[];for(let X=0;X<A.length;X++)V.push(A[X].sub(N));return V}let xd,wc;Zi("CircleBucket",S0,{omit:["layers"]});var wr={get paint(){return wc=wc||new Br({"circle-radius":new ci(Kt.paint_circle["circle-radius"]),"circle-color":new ci(Kt.paint_circle["circle-color"]),"circle-blur":new ci(Kt.paint_circle["circle-blur"]),"circle-opacity":new ci(Kt.paint_circle["circle-opacity"]),"circle-translate":new jt(Kt.paint_circle["circle-translate"]),"circle-translate-anchor":new jt(Kt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new jt(Kt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new jt(Kt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new ci(Kt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new ci(Kt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new ci(Kt.paint_circle["circle-stroke-opacity"])})},get layout(){return xd=xd||new Br({"circle-sort-key":new ci(Kt.layout_circle["circle-sort-key"])})}},yo=1e-6,Ku=typeof Float32Array<"u"?Float32Array:Array;function bu(A){return A[0]=1,A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[5]=1,A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[10]=1,A[11]=0,A[12]=0,A[13]=0,A[14]=0,A[15]=1,A}function E0(A,s,c){var y=s[0],T=s[1],N=s[2],V=s[3],X=s[4],ae=s[5],_e=s[6],Ee=s[7],ze=s[8],qe=s[9],et=s[10],tt=s[11],ut=s[12],ft=s[13],_t=s[14],Rt=s[15],Pt=c[0],Nt=c[1],Xt=c[2],_i=c[3];return A[0]=Pt*y+Nt*X+Xt*ze+_i*ut,A[1]=Pt*T+Nt*ae+Xt*qe+_i*ft,A[2]=Pt*N+Nt*_e+Xt*et+_i*_t,A[3]=Pt*V+Nt*Ee+Xt*tt+_i*Rt,A[4]=(Pt=c[4])*y+(Nt=c[5])*X+(Xt=c[6])*ze+(_i=c[7])*ut,A[5]=Pt*T+Nt*ae+Xt*qe+_i*ft,A[6]=Pt*N+Nt*_e+Xt*et+_i*_t,A[7]=Pt*V+Nt*Ee+Xt*tt+_i*Rt,A[8]=(Pt=c[8])*y+(Nt=c[9])*X+(Xt=c[10])*ze+(_i=c[11])*ut,A[9]=Pt*T+Nt*ae+Xt*qe+_i*ft,A[10]=Pt*N+Nt*_e+Xt*et+_i*_t,A[11]=Pt*V+Nt*Ee+Xt*tt+_i*Rt,A[12]=(Pt=c[12])*y+(Nt=c[13])*X+(Xt=c[14])*ze+(_i=c[15])*ut,A[13]=Pt*T+Nt*ae+Xt*qe+_i*ft,A[14]=Pt*N+Nt*_e+Xt*et+_i*_t,A[15]=Pt*V+Nt*Ee+Xt*tt+_i*Rt,A}Math.hypot||(Math.hypot=function(){for(var A=0,s=arguments.length;s--;)A+=arguments[s]*arguments[s];return Math.sqrt(A)});var xh,bm=E0;function Po(A,s,c){var y=s[0],T=s[1],N=s[2],V=s[3];return A[0]=c[0]*y+c[4]*T+c[8]*N+c[12]*V,A[1]=c[1]*y+c[5]*T+c[9]*N+c[13]*V,A[2]=c[2]*y+c[6]*T+c[10]*N+c[14]*V,A[3]=c[3]*y+c[7]*T+c[11]*N+c[15]*V,A}xh=new Ku(4),Ku!=Float32Array&&(xh[0]=0,xh[1]=0,xh[2]=0,xh[3]=0);class Sm extends Ur{constructor(s){super(s,wr)}createBucket(s){return new S0(s)}queryRadius(s){const c=s;return wu("circle-radius",this,c)+wu("circle-stroke-width",this,c)+yh(this.paint.get("circle-translate"))}queryIntersectsFeature(s,c,y,T,N,V,X,ae){const _e=Xu(s,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),V.angle,X),Ee=this.paint.get("circle-radius").evaluate(c,y)+this.paint.get("circle-stroke-width").evaluate(c,y),ze=this.paint.get("circle-pitch-alignment")==="map",qe=ze?_e:function(tt,ut){return tt.map(ft=>wh(ft,ut))}(_e,ae),et=ze?Ee*X:Ee;for(const tt of T)for(const ut of tt){const ft=ze?ut:wh(ut,ae);let _t=et;const Rt=Po([],[ut.x,ut.y,0,1],ae);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?_t*=Rt[3]/V.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(_t*=V.cameraToCenterDistance/Rt[3]),_d(qe,ft,_t))return!0}return!1}}function wh(A,s){const c=Po([],[A.x,A.y,0,1],s);return new ce(c[0]/c[3],c[1]/c[3])}class bc extends S0{}let I0;Zi("HeatmapBucket",bc,{omit:["layers"]});var wd={get paint(){return I0=I0||new Br({"heatmap-radius":new ci(Kt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new ci(Kt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new jt(Kt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new BA(Kt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new jt(Kt.paint_heatmap["heatmap-opacity"])})}};function Bo(A,{width:s,height:c},y,T){if(T){if(T instanceof Uint8ClampedArray)T=new Uint8Array(T.buffer);else if(T.length!==s*c*y)throw new RangeError(`mismatched image size. expected: ${T.length} but got: ${s*c*y}`)}else T=new Uint8Array(s*c*y);return A.width=s,A.height=c,A.data=T,A}function Dl(A,{width:s,height:c},y){if(s===A.width&&c===A.height)return;const T=Bo({},{width:s,height:c},y);bh(A,T,{x:0,y:0},{x:0,y:0},{width:Math.min(A.width,s),height:Math.min(A.height,c)},y),A.width=s,A.height=c,A.data=T.data}function bh(A,s,c,y,T,N){if(T.width===0||T.height===0)return s;if(T.width>A.width||T.height>A.height||c.x>A.width-T.width||c.y>A.height-T.height)throw new RangeError("out of range source coordinates for image copy");if(T.width>s.width||T.height>s.height||y.x>s.width-T.width||y.y>s.height-T.height)throw new RangeError("out of range destination coordinates for image copy");const V=A.data,X=s.data;if(V===X)throw new Error("srcData equals dstData, so image is already copied");for(let ae=0;ae<T.height;ae++){const _e=((c.y+ae)*A.width+c.x)*N,Ee=((y.y+ae)*s.width+y.x)*N;for(let ze=0;ze<T.width*N;ze++)X[Ee+ze]=V[_e+ze]}return s}class Ju{constructor(s,c){Bo(this,s,1,c)}resize(s){Dl(this,s,1)}clone(){return new Ju({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(s,c,y,T,N){bh(s,c,y,T,N,1)}}class xo{constructor(s,c){Bo(this,s,4,c)}resize(s){Dl(this,s,4)}replace(s,c){c?this.data.set(s):this.data=s instanceof Uint8ClampedArray?new Uint8Array(s.buffer):s}clone(){return new xo({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(s,c,y,T,N){bh(s,c,y,T,N,4)}}function M0(A){const s={},c=A.resolution||256,y=A.clips?A.clips.length:1,T=A.image||new xo({width:c,height:y});if(Math.log(c)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${c}`);const N=(V,X,ae)=>{s[A.evaluationKey]=ae;const _e=A.expression.evaluate(s);T.data[V+X+0]=Math.floor(255*_e.r/_e.a),T.data[V+X+1]=Math.floor(255*_e.g/_e.a),T.data[V+X+2]=Math.floor(255*_e.b/_e.a),T.data[V+X+3]=Math.floor(255*_e.a)};if(A.clips)for(let V=0,X=0;V<y;++V,X+=4*c)for(let ae=0,_e=0;ae<c;ae++,_e+=4){const Ee=ae/(c-1),{start:ze,end:qe}=A.clips[V];N(X,_e,ze*(1-Ee)+qe*Ee)}else for(let V=0,X=0;V<c;V++,X+=4)N(0,X,V/(c-1));return T}Zi("AlphaImage",Ju),Zi("RGBAImage",xo);class T0 extends Ur{createBucket(s){return new bc(s)}constructor(s){super(s,wd),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(s){s==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=M0({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let P0;var B0={get paint(){return P0=P0||new Br({"hillshade-illumination-direction":new jt(Kt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new jt(Kt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new jt(Kt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new jt(Kt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new jt(Kt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new jt(Kt.paint_hillshade["hillshade-accent-color"])})}};class D0 extends Ur{constructor(s){super(s,B0)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const iu=C([{name:"a_pos",components:2,type:"Int16"}],4),{members:Cm}=iu;var _l={exports:{}};function Sh(A,s,c){c=c||2;var y,T,N,V,X,ae,_e,Ee=s&&s.length,ze=Ee?s[0]*c:A.length,qe=L0(A,0,ze,c,!0),et=[];if(!qe||qe.next===qe.prev)return et;if(Ee&&(qe=function(ut,ft,_t,Rt){var Pt,Nt,Xt,_i=[];for(Pt=0,Nt=ft.length;Pt<Nt;Pt++)(Xt=L0(ut,ft[Pt]*Rt,Pt<Nt-1?ft[Pt+1]*Rt:ut.length,Rt,!1))===Xt.next&&(Xt.steiner=!0),_i.push(vl(Xt));for(_i.sort(Im),Pt=0;Pt<_i.length;Pt++)_t=Cd(_i[Pt],_t);return _t}(A,s,qe,c)),A.length>80*c){y=N=A[0],T=V=A[1];for(var tt=c;tt<ze;tt+=c)(X=A[tt])<y&&(y=X),(ae=A[tt+1])<T&&(T=ae),X>N&&(N=X),ae>V&&(V=ae);_e=(_e=Math.max(N-y,V-T))!==0?32767/_e:0}return Ch(qe,et,c,y,T,_e,0),et}function L0(A,s,c,y,T){var N,V;if(T===kc(A,s,c,y)>0)for(N=s;N<c;N+=y)V=ih(N,A[N],A[N+1],V);else for(N=c-y;N>=s;N-=y)V=ih(N,A[N],A[N+1],V);return V&&zl(V,V.next)&&(Eh(V),V=V.next),V}function Ll(A,s){if(!A)return A;s||(s=A);var c,y=A;do if(c=!1,y.steiner||!zl(y,y.next)&&bs(y.prev,y,y.next)!==0)y=y.next;else{if(Eh(y),(y=s=y.prev)===y.next)break;c=!0}while(c||y!==s);return s}function Ch(A,s,c,y,T,N,V){if(A){!V&&N&&function(Ee,ze,qe,et){var tt=Ee;do tt.z===0&&(tt.z=wo(tt.x,tt.y,ze,qe,et)),tt.prevZ=tt.prev,tt.nextZ=tt.next,tt=tt.next;while(tt!==Ee);tt.prevZ.nextZ=null,tt.prevZ=null,function(ut){var ft,_t,Rt,Pt,Nt,Xt,_i,Wi,hn=1;do{for(_t=ut,ut=null,Nt=null,Xt=0;_t;){for(Xt++,Rt=_t,_i=0,ft=0;ft<hn&&(_i++,Rt=Rt.nextZ);ft++);for(Wi=hn;_i>0||Wi>0&&Rt;)_i!==0&&(Wi===0||!Rt||_t.z<=Rt.z)?(Pt=_t,_t=_t.nextZ,_i--):(Pt=Rt,Rt=Rt.nextZ,Wi--),Nt?Nt.nextZ=Pt:ut=Pt,Pt.prevZ=Nt,Nt=Pt;_t=Rt}Nt.nextZ=null,hn*=2}while(Xt>1)}(tt)}(A,y,T,N);for(var X,ae,_e=A;A.prev!==A.next;)if(X=A.prev,ae=A.next,N?Em(A,y,T,N):km(A))s.push(X.i/c|0),s.push(A.i/c|0),s.push(ae.i/c|0),Eh(A),A=ae.next,_e=ae.next;else if((A=ae)===_e){V?V===1?Ch(A=bd(Ll(A),s,c),s,c,y,T,N,2):V===2&&Sd(A,s,c,y,T,N):Ch(Ll(A),s,c,y,T,N,1);break}}}function km(A){var s=A.prev,c=A,y=A.next;if(bs(s,c,y)>=0)return!1;for(var T=s.x,N=c.x,V=y.x,X=s.y,ae=c.y,_e=y.y,Ee=T<N?T<V?T:V:N<V?N:V,ze=X<ae?X<_e?X:_e:ae<_e?ae:_e,qe=T>N?T>V?T:V:N>V?N:V,et=X>ae?X>_e?X:_e:ae>_e?ae:_e,tt=y.next;tt!==s;){if(tt.x>=Ee&&tt.x<=qe&&tt.y>=ze&&tt.y<=et&&eh(T,X,N,ae,V,_e,tt.x,tt.y)&&bs(tt.prev,tt,tt.next)>=0)return!1;tt=tt.next}return!0}function Em(A,s,c,y){var T=A.prev,N=A,V=A.next;if(bs(T,N,V)>=0)return!1;for(var X=T.x,ae=N.x,_e=V.x,Ee=T.y,ze=N.y,qe=V.y,et=X<ae?X<_e?X:_e:ae<_e?ae:_e,tt=Ee<ze?Ee<qe?Ee:qe:ze<qe?ze:qe,ut=X>ae?X>_e?X:_e:ae>_e?ae:_e,ft=Ee>ze?Ee>qe?Ee:qe:ze>qe?ze:qe,_t=wo(et,tt,s,c,y),Rt=wo(ut,ft,s,c,y),Pt=A.prevZ,Nt=A.nextZ;Pt&&Pt.z>=_t&&Nt&&Nt.z<=Rt;){if(Pt.x>=et&&Pt.x<=ut&&Pt.y>=tt&&Pt.y<=ft&&Pt!==T&&Pt!==V&&eh(X,Ee,ae,ze,_e,qe,Pt.x,Pt.y)&&bs(Pt.prev,Pt,Pt.next)>=0||(Pt=Pt.prevZ,Nt.x>=et&&Nt.x<=ut&&Nt.y>=tt&&Nt.y<=ft&&Nt!==T&&Nt!==V&&eh(X,Ee,ae,ze,_e,qe,Nt.x,Nt.y)&&bs(Nt.prev,Nt,Nt.next)>=0))return!1;Nt=Nt.nextZ}for(;Pt&&Pt.z>=_t;){if(Pt.x>=et&&Pt.x<=ut&&Pt.y>=tt&&Pt.y<=ft&&Pt!==T&&Pt!==V&&eh(X,Ee,ae,ze,_e,qe,Pt.x,Pt.y)&&bs(Pt.prev,Pt,Pt.next)>=0)return!1;Pt=Pt.prevZ}for(;Nt&&Nt.z<=Rt;){if(Nt.x>=et&&Nt.x<=ut&&Nt.y>=tt&&Nt.y<=ft&&Nt!==T&&Nt!==V&&eh(X,Ee,ae,ze,_e,qe,Nt.x,Nt.y)&&bs(Nt.prev,Nt,Nt.next)>=0)return!1;Nt=Nt.nextZ}return!0}function bd(A,s,c){var y=A;do{var T=y.prev,N=y.next.next;!zl(T,N)&&z0(T,y,y.next,N)&&th(T,N)&&th(N,T)&&(s.push(T.i/c|0),s.push(y.i/c|0),s.push(N.i/c|0),Eh(y),Eh(y.next),y=A=N),y=y.next}while(y!==A);return Ll(y)}function Sd(A,s,c,y,T,N){var V=A;do{for(var X=V.next.next;X!==V.prev;){if(V.i!==X.i&&Mm(V,X)){var ae=Su(V,X);return V=Ll(V,V.next),ae=Ll(ae,ae.next),Ch(V,s,c,y,T,N,0),void Ch(ae,s,c,y,T,N,0)}X=X.next}V=V.next}while(V!==A)}function Im(A,s){return A.x-s.x}function Cd(A,s){var c=function(T,N){var V,X=N,ae=T.x,_e=T.y,Ee=-1/0;do{if(_e<=X.y&&_e>=X.next.y&&X.next.y!==X.y){var ze=X.x+(_e-X.y)*(X.next.x-X.x)/(X.next.y-X.y);if(ze<=ae&&ze>Ee&&(Ee=ze,V=X.x<X.next.x?X:X.next,ze===ae))return V}X=X.next}while(X!==N);if(!V)return null;var qe,et=V,tt=V.x,ut=V.y,ft=1/0;X=V;do ae>=X.x&&X.x>=tt&&ae!==X.x&&eh(_e<ut?ae:Ee,_e,tt,ut,_e<ut?Ee:ae,_e,X.x,X.y)&&(qe=Math.abs(_e-X.y)/(ae-X.x),th(X,T)&&(qe<ft||qe===ft&&(X.x>V.x||X.x===V.x&&kd(V,X)))&&(V=X,ft=qe)),X=X.next;while(X!==et);return V}(A,s);if(!c)return s;var y=Su(c,A);return Ll(y,y.next),Ll(c,c.next)}function kd(A,s){return bs(A.prev,A,s.prev)<0&&bs(s.next,A,A.next)<0}function wo(A,s,c,y,T){return(A=1431655765&((A=858993459&((A=252645135&((A=16711935&((A=(A-c)*T|0)|A<<8))|A<<4))|A<<2))|A<<1))|(s=1431655765&((s=858993459&((s=252645135&((s=16711935&((s=(s-y)*T|0)|s<<8))|s<<4))|s<<2))|s<<1))<<1}function vl(A){var s=A,c=A;do(s.x<c.x||s.x===c.x&&s.y<c.y)&&(c=s),s=s.next;while(s!==A);return c}function eh(A,s,c,y,T,N,V,X){return(T-V)*(s-X)>=(A-V)*(N-X)&&(A-V)*(y-X)>=(c-V)*(s-X)&&(c-V)*(N-X)>=(T-V)*(y-X)}function Mm(A,s){return A.next.i!==s.i&&A.prev.i!==s.i&&!function(c,y){var T=c;do{if(T.i!==c.i&&T.next.i!==c.i&&T.i!==y.i&&T.next.i!==y.i&&z0(T,T.next,c,y))return!0;T=T.next}while(T!==c);return!1}(A,s)&&(th(A,s)&&th(s,A)&&function(c,y){var T=c,N=!1,V=(c.x+y.x)/2,X=(c.y+y.y)/2;do T.y>X!=T.next.y>X&&T.next.y!==T.y&&V<(T.next.x-T.x)*(X-T.y)/(T.next.y-T.y)+T.x&&(N=!N),T=T.next;while(T!==c);return N}(A,s)&&(bs(A.prev,A,s.prev)||bs(A,s.prev,s))||zl(A,s)&&bs(A.prev,A,A.next)>0&&bs(s.prev,s,s.next)>0)}function bs(A,s,c){return(s.y-A.y)*(c.x-s.x)-(s.x-A.x)*(c.y-s.y)}function zl(A,s){return A.x===s.x&&A.y===s.y}function z0(A,s,c,y){var T=Sc(bs(A,s,c)),N=Sc(bs(A,s,y)),V=Sc(bs(c,y,A)),X=Sc(bs(c,y,s));return T!==N&&V!==X||!(T!==0||!kh(A,c,s))||!(N!==0||!kh(A,y,s))||!(V!==0||!kh(c,A,y))||!(X!==0||!kh(c,s,y))}function kh(A,s,c){return s.x<=Math.max(A.x,c.x)&&s.x>=Math.min(A.x,c.x)&&s.y<=Math.max(A.y,c.y)&&s.y>=Math.min(A.y,c.y)}function Sc(A){return A>0?1:A<0?-1:0}function th(A,s){return bs(A.prev,A,A.next)<0?bs(A,s,A.next)>=0&&bs(A,A.prev,s)>=0:bs(A,s,A.prev)<0||bs(A,A.next,s)<0}function Su(A,s){var c=new Cc(A.i,A.x,A.y),y=new Cc(s.i,s.x,s.y),T=A.next,N=s.prev;return A.next=s,s.prev=A,c.next=T,T.prev=c,y.next=c,c.prev=y,N.next=y,y.prev=N,y}function ih(A,s,c,y){var T=new Cc(A,s,c);return y?(T.next=y.next,T.prev=y,y.next.prev=T,y.next=T):(T.prev=T,T.next=T),T}function Eh(A){A.next.prev=A.prev,A.prev.next=A.next,A.prevZ&&(A.prevZ.nextZ=A.nextZ),A.nextZ&&(A.nextZ.prevZ=A.prevZ)}function Cc(A,s,c){this.i=A,this.x=s,this.y=c,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function kc(A,s,c,y){for(var T=0,N=s,V=c-y;N<c;N+=y)T+=(A[V]-A[N])*(A[N+1]+A[V+1]),V=N;return T}_l.exports=Sh,_l.exports.default=Sh,Sh.deviation=function(A,s,c,y){var T=s&&s.length,N=Math.abs(kc(A,0,T?s[0]*c:A.length,c));if(T)for(var V=0,X=s.length;V<X;V++)N-=Math.abs(kc(A,s[V]*c,V<X-1?s[V+1]*c:A.length,c));var ae=0;for(V=0;V<y.length;V+=3){var _e=y[V]*c,Ee=y[V+1]*c,ze=y[V+2]*c;ae+=Math.abs((A[_e]-A[ze])*(A[Ee+1]-A[_e+1])-(A[_e]-A[Ee])*(A[ze+1]-A[_e+1]))}return N===0&&ae===0?0:Math.abs((ae-N)/N)},Sh.flatten=function(A){for(var s=A[0][0].length,c={vertices:[],holes:[],dimensions:s},y=0,T=0;T<A.length;T++){for(var N=0;N<A[T].length;N++)for(var V=0;V<s;V++)c.vertices.push(A[T][N][V]);T>0&&c.holes.push(y+=A[T-1].length)}return c};var Ih=O(_l.exports);function Ed(A,s,c,y,T){Mh(A,s,c||0,y||A.length-1,T||Ec)}function Mh(A,s,c,y,T){for(;y>c;){if(y-c>600){var N=y-c+1,V=s-c+1,X=Math.log(N),ae=.5*Math.exp(2*X/3),_e=.5*Math.sqrt(X*ae*(N-ae)/N)*(V-N/2<0?-1:1);Mh(A,s,Math.max(c,Math.floor(s-V*ae/N+_e)),Math.min(y,Math.floor(s+(N-V)*ae/N+_e)),T)}var Ee=A[s],ze=c,qe=y;for(Cu(A,c,s),T(A[y],Ee)>0&&Cu(A,c,y);ze<qe;){for(Cu(A,ze,qe),ze++,qe--;T(A[ze],Ee)<0;)ze++;for(;T(A[qe],Ee)>0;)qe--}T(A[c],Ee)===0?Cu(A,c,qe):Cu(A,++qe,y),qe<=s&&(c=qe+1),s<=qe&&(y=qe-1)}}function Cu(A,s,c){var y=A[s];A[s]=A[c],A[c]=y}function Ec(A,s){return A<s?-1:A>s?1:0}function R0(A,s){const c=A.length;if(c<=1)return[A];const y=[];let T,N;for(let V=0;V<c;V++){const X=rt(A[V]);X!==0&&(A[V].area=Math.abs(X),N===void 0&&(N=X<0),N===X<0?(T&&y.push(T),T=[A[V]]):T.push(A[V]))}if(T&&y.push(T),s>1)for(let V=0;V<y.length;V++)y[V].length<=s||(Ed(y[V],s,1,y[V].length-1,Id),y[V]=y[V].slice(0,s));return y}function Id(A,s){return s.area-A.area}function nh(A,s,c){const y=c.patternDependencies;let T=!1;for(const N of s){const V=N.paint.get(`${A}-pattern`);V.isConstant()||(T=!0);const X=V.constantOr(null);X&&(T=!0,y[X.to]=!0,y[X.from]=!0)}return T}function Ic(A,s,c,y,T){const N=T.patternDependencies;for(const V of s){const X=V.paint.get(`${A}-pattern`).value;if(X.kind!=="constant"){let ae=X.evaluate({zoom:y-1},c,{},T.availableImages),_e=X.evaluate({zoom:y},c,{},T.availableImages),Ee=X.evaluate({zoom:y+1},c,{},T.availableImages);ae=ae&&ae.name?ae.name:ae,_e=_e&&_e.name?_e.name:_e,Ee=Ee&&Ee.name?Ee.name:Ee,N[ae]=!0,N[_e]=!0,N[Ee]=!0,c.patterns[V.id]={min:ae,mid:_e,max:Ee}}}return c}class Th{constructor(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(c=>c.id),this.index=s.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new vi,this.indexArray=new Qn,this.indexArray2=new fn,this.programConfigurations=new tl(s.layers,s.zoom),this.segments=new Mr,this.segments2=new Mr,this.stateDependentLayerIds=this.layers.filter(c=>c.isStateDependent()).map(c=>c.id)}populate(s,c,y){this.hasPattern=nh("fill",this.layers,c);const T=this.layers[0].layout.get("fill-sort-key"),N=!T.isConstant(),V=[];for(const{feature:X,id:ae,index:_e,sourceLayerIndex:Ee}of s){const ze=this.layers[0]._featureFilter.needGeometry,qe=tu(X,ze);if(!this.layers[0]._featureFilter.filter(new zr(this.zoom),qe,y))continue;const et=N?T.evaluate(qe,{},y,c.availableImages):void 0,tt={id:ae,properties:X.properties,type:X.type,sourceLayerIndex:Ee,index:_e,geometry:ze?qe.geometry:yu(X),patterns:{},sortKey:et};V.push(tt)}N&&V.sort((X,ae)=>X.sortKey-ae.sortKey);for(const X of V){const{geometry:ae,index:_e,sourceLayerIndex:Ee}=X;if(this.hasPattern){const ze=Ic("fill",this.layers,X,this.zoom,c);this.patternFeatures.push(ze)}else this.addFeature(X,ae,_e,y,{});c.featureIndex.insert(s[_e].feature,ae,_e,Ee,this.index)}}update(s,c,y){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,c,this.stateDependentLayers,y)}addFeatures(s,c,y){for(const T of this.patternFeatures)this.addFeature(T,T.geometry,T.index,c,y)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,Cm),this.indexBuffer=s.createIndexBuffer(this.indexArray),this.indexBuffer2=s.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(s,c,y,T,N){for(const V of R0(c,500)){let X=0;for(const et of V)X+=et.length;const ae=this.segments.prepareSegment(X,this.layoutVertexArray,this.indexArray),_e=ae.vertexLength,Ee=[],ze=[];for(const et of V){if(et.length===0)continue;et!==V[0]&&ze.push(Ee.length/2);const tt=this.segments2.prepareSegment(et.length,this.layoutVertexArray,this.indexArray2),ut=tt.vertexLength;this.layoutVertexArray.emplaceBack(et[0].x,et[0].y),this.indexArray2.emplaceBack(ut+et.length-1,ut),Ee.push(et[0].x),Ee.push(et[0].y);for(let ft=1;ft<et.length;ft++)this.layoutVertexArray.emplaceBack(et[ft].x,et[ft].y),this.indexArray2.emplaceBack(ut+ft-1,ut+ft),Ee.push(et[ft].x),Ee.push(et[ft].y);tt.vertexLength+=et.length,tt.primitiveLength+=et.length}const qe=Ih(Ee,ze);for(let et=0;et<qe.length;et+=3)this.indexArray.emplaceBack(_e+qe[et],_e+qe[et+1],_e+qe[et+2]);ae.vertexLength+=X,ae.primitiveLength+=qe.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,y,N,T)}}let Md,F0;Zi("FillBucket",Th,{omit:["layers","patternFeatures"]});var Rl={get paint(){return F0=F0||new Br({"fill-antialias":new jt(Kt.paint_fill["fill-antialias"]),"fill-opacity":new ci(Kt.paint_fill["fill-opacity"]),"fill-color":new ci(Kt.paint_fill["fill-color"]),"fill-outline-color":new ci(Kt.paint_fill["fill-outline-color"]),"fill-translate":new jt(Kt.paint_fill["fill-translate"]),"fill-translate-anchor":new jt(Kt.paint_fill["fill-translate-anchor"]),"fill-pattern":new io(Kt.paint_fill["fill-pattern"])})},get layout(){return Md=Md||new Br({"fill-sort-key":new ci(Kt.layout_fill["fill-sort-key"])})}};class Td extends Ur{constructor(s){super(s,Rl)}recalculate(s,c){super.recalculate(s,c);const y=this.paint._values["fill-outline-color"];y.value.kind==="constant"&&y.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(s){return new Th(s)}queryRadius(){return yh(this.paint.get("fill-translate"))}queryIntersectsFeature(s,c,y,T,N,V,X){return C0(Xu(s,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),V.angle,X),T)}isTileClipped(){return!0}}const Pd=C([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),Tm=C([{name:"a_centroid",components:2,type:"Int16"}],4),{members:Bd}=Pd;var nu={},Pm=re,yl=ru;function ru(A,s,c,y,T){this.properties={},this.extent=c,this.type=0,this._pbf=A,this._geometry=-1,this._keys=y,this._values=T,A.readFields(O0,this,s)}function O0(A,s,c){A==1?s.id=c.readVarint():A==2?function(y,T){for(var N=y.readVarint()+y.pos;y.pos<N;){var V=T._keys[y.readVarint()],X=T._values[y.readVarint()];T.properties[V]=X}}(c,s):A==3?s.type=c.readVarint():A==4&&(s._geometry=c.pos)}function N0(A){for(var s,c,y=0,T=0,N=A.length,V=N-1;T<N;V=T++)y+=((c=A[V]).x-(s=A[T]).x)*(s.y+c.y);return y}ru.types=["Unknown","Point","LineString","Polygon"],ru.prototype.loadGeometry=function(){var A=this._pbf;A.pos=this._geometry;for(var s,c=A.readVarint()+A.pos,y=1,T=0,N=0,V=0,X=[];A.pos<c;){if(T<=0){var ae=A.readVarint();y=7&ae,T=ae>>3}if(T--,y===1||y===2)N+=A.readSVarint(),V+=A.readSVarint(),y===1&&(s&&X.push(s),s=[]),s.push(new Pm(N,V));else{if(y!==7)throw new Error("unknown command "+y);s&&s.push(s[0].clone())}}return s&&X.push(s),X},ru.prototype.bbox=function(){var A=this._pbf;A.pos=this._geometry;for(var s=A.readVarint()+A.pos,c=1,y=0,T=0,N=0,V=1/0,X=-1/0,ae=1/0,_e=-1/0;A.pos<s;){if(y<=0){var Ee=A.readVarint();c=7&Ee,y=Ee>>3}if(y--,c===1||c===2)(T+=A.readSVarint())<V&&(V=T),T>X&&(X=T),(N+=A.readSVarint())<ae&&(ae=N),N>_e&&(_e=N);else if(c!==7)throw new Error("unknown command "+c)}return[V,ae,X,_e]},ru.prototype.toGeoJSON=function(A,s,c){var y,T,N=this.extent*Math.pow(2,c),V=this.extent*A,X=this.extent*s,ae=this.loadGeometry(),_e=ru.types[this.type];function Ee(et){for(var tt=0;tt<et.length;tt++){var ut=et[tt];et[tt]=[360*(ut.x+V)/N-180,360/Math.PI*Math.atan(Math.exp((180-360*(ut.y+X)/N)*Math.PI/180))-90]}}switch(this.type){case 1:var ze=[];for(y=0;y<ae.length;y++)ze[y]=ae[y][0];Ee(ae=ze);break;case 2:for(y=0;y<ae.length;y++)Ee(ae[y]);break;case 3:for(ae=function(et){var tt=et.length;if(tt<=1)return[et];for(var ut,ft,_t=[],Rt=0;Rt<tt;Rt++){var Pt=N0(et[Rt]);Pt!==0&&(ft===void 0&&(ft=Pt<0),ft===Pt<0?(ut&&_t.push(ut),ut=[et[Rt]]):ut.push(et[Rt]))}return ut&&_t.push(ut),_t}(ae),y=0;y<ae.length;y++)for(T=0;T<ae[y].length;T++)Ee(ae[y][T])}ae.length===1?ae=ae[0]:_e="Multi"+_e;var qe={type:"Feature",geometry:{type:_e,coordinates:ae},properties:this.properties};return"id"in this&&(qe.id=this.id),qe};var Mc=yl,ku=On;function On(A,s){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=A,this._keys=[],this._values=[],this._features=[],A.readFields(Tc,this,s),this.length=this._features.length}function Tc(A,s,c){A===15?s.version=c.readVarint():A===1?s.name=c.readString():A===5?s.extent=c.readVarint():A===2?s._features.push(c.pos):A===3?s._keys.push(c.readString()):A===4&&s._values.push(function(y){for(var T=null,N=y.readVarint()+y.pos;y.pos<N;){var V=y.readVarint()>>3;T=V===1?y.readString():V===2?y.readFloat():V===3?y.readDouble():V===4?y.readVarint64():V===5?y.readVarint():V===6?y.readSVarint():V===7?y.readBoolean():null}return T}(c))}On.prototype.feature=function(A){if(A<0||A>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[A];var s=this._pbf.readVarint()+this._pbf.pos;return new Mc(this._pbf,s,this.extent,this._keys,this._values)};var V0=ku;function Eu(A,s,c){if(A===3){var y=new V0(c,c.readVarint()+c.pos);y.length&&(s[y.name]=y)}}nu.VectorTile=function(A,s){this.layers=A.readFields(Eu,{},s)},nu.VectorTileFeature=yl,nu.VectorTileLayer=ku;const Bm=nu.VectorTileFeature.types,Ph=Math.pow(2,13);function rh(A,s,c,y,T,N,V,X){A.emplaceBack(s,c,2*Math.floor(y*Ph)+V,T*Ph*2,N*Ph*2,Math.round(X))}class Ha{constructor(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(c=>c.id),this.index=s.index,this.hasPattern=!1,this.layoutVertexArray=new $t,this.centroidVertexArray=new bt,this.indexArray=new Qn,this.programConfigurations=new tl(s.layers,s.zoom),this.segments=new Mr,this.stateDependentLayerIds=this.layers.filter(c=>c.isStateDependent()).map(c=>c.id)}populate(s,c,y){this.features=[],this.hasPattern=nh("fill-extrusion",this.layers,c);for(const{feature:T,id:N,index:V,sourceLayerIndex:X}of s){const ae=this.layers[0]._featureFilter.needGeometry,_e=tu(T,ae);if(!this.layers[0]._featureFilter.filter(new zr(this.zoom),_e,y))continue;const Ee={id:N,sourceLayerIndex:X,index:V,geometry:ae?_e.geometry:yu(T),properties:T.properties,type:T.type,patterns:{}};this.hasPattern?this.features.push(Ic("fill-extrusion",this.layers,Ee,this.zoom,c)):this.addFeature(Ee,Ee.geometry,V,y,{}),c.featureIndex.insert(T,Ee.geometry,V,X,this.index,!0)}}addFeatures(s,c,y){for(const T of this.features){const{geometry:N}=T;this.addFeature(T,N,T.index,c,y)}}update(s,c,y){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,c,this.stateDependentLayers,y)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,Bd),this.centroidVertexBuffer=s.createVertexBuffer(this.centroidVertexArray,Tm.members,!0),this.indexBuffer=s.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(s,c,y,T,N){const V={x:0,y:0,vertexCount:0};for(const X of R0(c,500)){let ae=0;for(const tt of X)ae+=tt.length;let _e=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const tt of X){if(tt.length===0||Lm(tt))continue;let ut=0;for(let ft=0;ft<tt.length;ft++){const _t=tt[ft];if(ft>=1){const Rt=tt[ft-1];if(!Dm(_t,Rt)){_e.vertexLength+4>Mr.MAX_VERTEX_ARRAY_LENGTH&&(_e=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const Pt=_t.sub(Rt)._perp()._unit(),Nt=Rt.dist(_t);ut+Nt>32768&&(ut=0),rh(this.layoutVertexArray,_t.x,_t.y,Pt.x,Pt.y,0,0,ut),rh(this.layoutVertexArray,_t.x,_t.y,Pt.x,Pt.y,0,1,ut),V.x+=2*_t.x,V.y+=2*_t.y,V.vertexCount+=2,ut+=Nt,rh(this.layoutVertexArray,Rt.x,Rt.y,Pt.x,Pt.y,0,0,ut),rh(this.layoutVertexArray,Rt.x,Rt.y,Pt.x,Pt.y,0,1,ut),V.x+=2*Rt.x,V.y+=2*Rt.y,V.vertexCount+=2;const Xt=_e.vertexLength;this.indexArray.emplaceBack(Xt,Xt+2,Xt+1),this.indexArray.emplaceBack(Xt+1,Xt+2,Xt+3),_e.vertexLength+=4,_e.primitiveLength+=2}}}}if(_e.vertexLength+ae>Mr.MAX_VERTEX_ARRAY_LENGTH&&(_e=this.segments.prepareSegment(ae,this.layoutVertexArray,this.indexArray)),Bm[s.type]!=="Polygon")continue;const Ee=[],ze=[],qe=_e.vertexLength;for(const tt of X)if(tt.length!==0){tt!==X[0]&&ze.push(Ee.length/2);for(let ut=0;ut<tt.length;ut++){const ft=tt[ut];rh(this.layoutVertexArray,ft.x,ft.y,0,0,1,1,0),V.x+=ft.x,V.y+=ft.y,V.vertexCount+=1,Ee.push(ft.x),Ee.push(ft.y)}}const et=Ih(Ee,ze);for(let tt=0;tt<et.length;tt+=3)this.indexArray.emplaceBack(qe+et[tt],qe+et[tt+2],qe+et[tt+1]);_e.primitiveLength+=et.length/3,_e.vertexLength+=ae}for(let X=0;X<V.vertexCount;X++)this.centroidVertexArray.emplaceBack(Math.floor(V.x/V.vertexCount),Math.floor(V.y/V.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,y,N,T)}}function Dm(A,s){return A.x===s.x&&(A.x<0||A.x>Qs)||A.y===s.y&&(A.y<0||A.y>Qs)}function Lm(A){return A.every(s=>s.x<0)||A.every(s=>s.x>Qs)||A.every(s=>s.y<0)||A.every(s=>s.y>Qs)}let U0;Zi("FillExtrusionBucket",Ha,{omit:["layers","features"]});var zm={get paint(){return U0=U0||new Br({"fill-extrusion-opacity":new jt(Kt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new ci(Kt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new jt(Kt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new jt(Kt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new io(Kt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new ci(Kt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new ci(Kt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new jt(Kt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class Dd extends Ur{constructor(s){super(s,zm)}createBucket(s){return new Ha(s)}queryRadius(){return yh(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(s,c,y,T,N,V,X,ae){const _e=Xu(s,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),V.angle,X),Ee=this.paint.get("fill-extrusion-height").evaluate(c,y),ze=this.paint.get("fill-extrusion-base").evaluate(c,y),qe=function(tt,ut,ft,_t){const Rt=[];for(const Pt of tt){const Nt=[Pt.x,Pt.y,0,1];Po(Nt,Nt,ut),Rt.push(new ce(Nt[0]/Nt[3],Nt[1]/Nt[3]))}return Rt}(_e,ae),et=function(tt,ut,ft,_t){const Rt=[],Pt=[],Nt=_t[8]*ut,Xt=_t[9]*ut,_i=_t[10]*ut,Wi=_t[11]*ut,hn=_t[8]*ft,qi=_t[9]*ft,Ri=_t[10]*ft,Bi=_t[11]*ft;for(const nn of tt){const Fi=[],Ei=[];for(const rn of nn){const on=rn.x,tr=rn.y,cs=_t[0]*on+_t[4]*tr+_t[12],gs=_t[1]*on+_t[5]*tr+_t[13],la=_t[2]*on+_t[6]*tr+_t[14],Wo=_t[3]*on+_t[7]*tr+_t[15],ro=la+_i,ss=Wo+Wi,In=cs+hn,Ia=gs+qi,ms=la+Ri,so=Wo+Bi,ua=new ce((cs+Nt)/ss,(gs+Xt)/ss);ua.z=ro/ss,Fi.push(ua);const Gn=new ce(In/so,Ia/so);Gn.z=ms/so,Ei.push(Gn)}Rt.push(Fi),Pt.push(Ei)}return[Rt,Pt]}(T,ze,Ee,ae);return function(tt,ut,ft){let _t=1/0;C0(ft,ut)&&(_t=Ld(ft,ut[0]));for(let Rt=0;Rt<ut.length;Rt++){const Pt=ut[Rt],Nt=tt[Rt];for(let Xt=0;Xt<Pt.length-1;Xt++){const _i=Pt[Xt],Wi=[_i,Pt[Xt+1],Nt[Xt+1],Nt[Xt],_i];yc(ft,Wi)&&(_t=Math.min(_t,Ld(ft,Wi)))}}return _t!==1/0&&_t}(et[0],et[1],qe)}}function Bh(A,s){return A.x*s.x+A.y*s.y}function Ld(A,s){if(A.length===1){let c=0;const y=s[c++];let T;for(;!T||y.equals(T);)if(T=s[c++],!T)return 1/0;for(;c<s.length;c++){const N=s[c],V=A[0],X=T.sub(y),ae=N.sub(y),_e=V.sub(y),Ee=Bh(X,X),ze=Bh(X,ae),qe=Bh(ae,ae),et=Bh(_e,X),tt=Bh(_e,ae),ut=Ee*qe-ze*ze,ft=(qe*et-ze*tt)/ut,_t=(Ee*tt-ze*et)/ut,Rt=y.z*(1-ft-_t)+T.z*ft+N.z*_t;if(isFinite(Rt))return Rt}return 1/0}{let c=1/0;for(const y of s)c=Math.min(c,y.z);return c}}const Rm=C([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:Fl}=Rm,Do=C([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:G0}=Do,Fm=nu.VectorTileFeature.types,Q0=Math.cos(Math.PI/180*37.5),zd=Math.pow(2,14)/.5;class q0{constructor(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(c=>c.id),this.index=s.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(c=>{this.gradients[c.id]={}}),this.layoutVertexArray=new ri,this.layoutVertexArray2=new ni,this.indexArray=new Qn,this.programConfigurations=new tl(s.layers,s.zoom),this.segments=new Mr,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(c=>c.isStateDependent()).map(c=>c.id)}populate(s,c,y){this.hasPattern=nh("line",this.layers,c);const T=this.layers[0].layout.get("line-sort-key"),N=!T.isConstant(),V=[];for(const{feature:X,id:ae,index:_e,sourceLayerIndex:Ee}of s){const ze=this.layers[0]._featureFilter.needGeometry,qe=tu(X,ze);if(!this.layers[0]._featureFilter.filter(new zr(this.zoom),qe,y))continue;const et=N?T.evaluate(qe,{},y):void 0,tt={id:ae,properties:X.properties,type:X.type,sourceLayerIndex:Ee,index:_e,geometry:ze?qe.geometry:yu(X),patterns:{},sortKey:et};V.push(tt)}N&&V.sort((X,ae)=>X.sortKey-ae.sortKey);for(const X of V){const{geometry:ae,index:_e,sourceLayerIndex:Ee}=X;if(this.hasPattern){const ze=Ic("line",this.layers,X,this.zoom,c);this.patternFeatures.push(ze)}else this.addFeature(X,ae,_e,y,{});c.featureIndex.insert(s[_e].feature,ae,_e,Ee,this.index)}}update(s,c,y){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,c,this.stateDependentLayers,y)}addFeatures(s,c,y){for(const T of this.patternFeatures)this.addFeature(T,T.geometry,T.index,c,y)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=s.createVertexBuffer(this.layoutVertexArray2,G0)),this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,Fl),this.indexBuffer=s.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(s){if(s.properties&&Object.prototype.hasOwnProperty.call(s.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(s.properties,"mapbox_clip_end"))return{start:+s.properties.mapbox_clip_start,end:+s.properties.mapbox_clip_end}}addFeature(s,c,y,T,N){const V=this.layers[0].layout,X=V.get("line-join").evaluate(s,{}),ae=V.get("line-cap"),_e=V.get("line-miter-limit"),Ee=V.get("line-round-limit");this.lineClips=this.lineFeatureClips(s);for(const ze of c)this.addLine(ze,s,X,ae,_e,Ee);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,y,N,T)}addLine(s,c,y,T,N,V){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let _t=0;_t<s.length-1;_t++)this.totalDistance+=s[_t].dist(s[_t+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const X=Fm[c.type]==="Polygon";let ae=s.length;for(;ae>=2&&s[ae-1].equals(s[ae-2]);)ae--;let _e=0;for(;_e<ae-1&&s[_e].equals(s[_e+1]);)_e++;if(ae<(X?3:2))return;y==="bevel"&&(N=1.05);const Ee=this.overscaling<=16?15*Qs/(512*this.overscaling):0,ze=this.segments.prepareSegment(10*ae,this.layoutVertexArray,this.indexArray);let qe,et,tt,ut,ft;this.e1=this.e2=-1,X&&(qe=s[ae-2],ft=s[_e].sub(qe)._unit()._perp());for(let _t=_e;_t<ae;_t++){if(tt=_t===ae-1?X?s[_e+1]:void 0:s[_t+1],tt&&s[_t].equals(tt))continue;ft&&(ut=ft),qe&&(et=qe),qe=s[_t],ft=tt?tt.sub(qe)._unit()._perp():ut,ut=ut||ft;let Rt=ut.add(ft);Rt.x===0&&Rt.y===0||Rt._unit();const Pt=ut.x*ft.x+ut.y*ft.y,Nt=Rt.x*ft.x+Rt.y*ft.y,Xt=Nt!==0?1/Nt:1/0,_i=2*Math.sqrt(2-2*Nt),Wi=Nt<Q0&&et&&tt,hn=ut.x*ft.y-ut.y*ft.x>0;if(Wi&&_t>_e){const Bi=qe.dist(et);if(Bi>2*Ee){const nn=qe.sub(qe.sub(et)._mult(Ee/Bi)._round());this.updateDistance(et,nn),this.addCurrentVertex(nn,ut,0,0,ze),et=nn}}const qi=et&&tt;let Ri=qi?y:X?"butt":T;if(qi&&Ri==="round"&&(Xt<V?Ri="miter":Xt<=2&&(Ri="fakeround")),Ri==="miter"&&Xt>N&&(Ri="bevel"),Ri==="bevel"&&(Xt>2&&(Ri="flipbevel"),Xt<N&&(Ri="miter")),et&&this.updateDistance(et,qe),Ri==="miter")Rt._mult(Xt),this.addCurrentVertex(qe,Rt,0,0,ze);else if(Ri==="flipbevel"){if(Xt>100)Rt=ft.mult(-1);else{const Bi=Xt*ut.add(ft).mag()/ut.sub(ft).mag();Rt._perp()._mult(Bi*(hn?-1:1))}this.addCurrentVertex(qe,Rt,0,0,ze),this.addCurrentVertex(qe,Rt.mult(-1),0,0,ze)}else if(Ri==="bevel"||Ri==="fakeround"){const Bi=-Math.sqrt(Xt*Xt-1),nn=hn?Bi:0,Fi=hn?0:Bi;if(et&&this.addCurrentVertex(qe,ut,nn,Fi,ze),Ri==="fakeround"){const Ei=Math.round(180*_i/Math.PI/20);for(let rn=1;rn<Ei;rn++){let on=rn/Ei;if(on!==.5){const cs=on-.5;on+=on*cs*(on-1)*((1.0904+Pt*(Pt*(3.55645-1.43519*Pt)-3.2452))*cs*cs+(.848013+Pt*(.215638*Pt-1.06021)))}const tr=ft.sub(ut)._mult(on)._add(ut)._unit()._mult(hn?-1:1);this.addHalfVertex(qe,tr.x,tr.y,!1,hn,0,ze)}}tt&&this.addCurrentVertex(qe,ft,-nn,-Fi,ze)}else if(Ri==="butt")this.addCurrentVertex(qe,Rt,0,0,ze);else if(Ri==="square"){const Bi=et?1:-1;this.addCurrentVertex(qe,Rt,Bi,Bi,ze)}else Ri==="round"&&(et&&(this.addCurrentVertex(qe,ut,0,0,ze),this.addCurrentVertex(qe,ut,1,1,ze,!0)),tt&&(this.addCurrentVertex(qe,ft,-1,-1,ze,!0),this.addCurrentVertex(qe,ft,0,0,ze)));if(Wi&&_t<ae-1){const Bi=qe.dist(tt);if(Bi>2*Ee){const nn=qe.add(tt.sub(qe)._mult(Ee/Bi)._round());this.updateDistance(qe,nn),this.addCurrentVertex(nn,ft,0,0,ze),qe=nn}}}}addCurrentVertex(s,c,y,T,N,V=!1){const X=c.y*T-c.x,ae=-c.y-c.x*T;this.addHalfVertex(s,c.x+c.y*y,c.y-c.x*y,V,!1,y,N),this.addHalfVertex(s,X,ae,V,!0,-T,N),this.distance>zd/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(s,c,y,T,N,V))}addHalfVertex({x:s,y:c},y,T,N,V,X,ae){const _e=.5*(this.lineClips?this.scaledDistance*(zd-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((s<<1)+(N?1:0),(c<<1)+(V?1:0),Math.round(63*y)+128,Math.round(63*T)+128,1+(X===0?0:X<0?-1:1)|(63&_e)<<2,_e>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const Ee=ae.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,Ee),ae.primitiveLength++),V?this.e2=Ee:this.e1=Ee}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(s,c){this.distance+=s.dist(c),this.updateScaledDistance()}}let sh,H0;Zi("LineBucket",q0,{omit:["layers","patternFeatures"]});var Z0={get paint(){return H0=H0||new Br({"line-opacity":new ci(Kt.paint_line["line-opacity"]),"line-color":new ci(Kt.paint_line["line-color"]),"line-translate":new jt(Kt.paint_line["line-translate"]),"line-translate-anchor":new jt(Kt.paint_line["line-translate-anchor"]),"line-width":new ci(Kt.paint_line["line-width"]),"line-gap-width":new ci(Kt.paint_line["line-gap-width"]),"line-offset":new ci(Kt.paint_line["line-offset"]),"line-blur":new ci(Kt.paint_line["line-blur"]),"line-dasharray":new PA(Kt.paint_line["line-dasharray"]),"line-pattern":new io(Kt.paint_line["line-pattern"]),"line-gradient":new BA(Kt.paint_line["line-gradient"])})},get layout(){return sh=sh||new Br({"line-cap":new jt(Kt.layout_line["line-cap"]),"line-join":new ci(Kt.layout_line["line-join"]),"line-miter-limit":new jt(Kt.layout_line["line-miter-limit"]),"line-round-limit":new jt(Kt.layout_line["line-round-limit"]),"line-sort-key":new ci(Kt.layout_line["line-sort-key"])})}};class Om extends ci{possiblyEvaluate(s,c){return c=new zr(Math.floor(c.zoom),{now:c.now,fadeDuration:c.fadeDuration,zoomHistory:c.zoomHistory,transition:c.transition}),super.possiblyEvaluate(s,c)}evaluate(s,c,y,T){return c=ii({},c,{zoom:Math.floor(c.zoom)}),super.evaluate(s,c,y,T)}}let Pc;class Nm extends Ur{constructor(s){super(s,Z0),this.gradientVersion=0,Pc||(Pc=new Om(Z0.paint.properties["line-width"].specification),Pc.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(s){if(s==="line-gradient"){const c=this.gradientExpression();this.stepInterpolant=!!function(y){return y._styleExpression!==void 0}(c)&&c._styleExpression.expression instanceof yn,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(s,c){super.recalculate(s,c),this.paint._values["line-floorwidth"]=Pc.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,s)}createBucket(s){return new q0(s)}queryRadius(s){const c=s,y=Rd(wu("line-width",this,c),wu("line-gap-width",this,c)),T=wu("line-offset",this,c);return y/2+Math.abs(T)+yh(this.paint.get("line-translate"))}queryIntersectsFeature(s,c,y,T,N,V,X){const ae=Xu(s,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),V.angle,X),_e=X/2*Rd(this.paint.get("line-width").evaluate(c,y),this.paint.get("line-gap-width").evaluate(c,y)),Ee=this.paint.get("line-offset").evaluate(c,y);return Ee&&(T=function(ze,qe){const et=[];for(let tt=0;tt<ze.length;tt++){const ut=ze[tt],ft=[];for(let _t=0;_t<ut.length;_t++){const Rt=ut[_t-1],Pt=ut[_t],Nt=ut[_t+1],Xt=_t===0?new ce(0,0):Pt.sub(Rt)._unit()._perp(),_i=_t===ut.length-1?new ce(0,0):Nt.sub(Pt)._unit()._perp(),Wi=Xt._add(_i)._unit(),hn=Wi.x*_i.x+Wi.y*_i.y;hn!==0&&Wi._mult(1/hn),ft.push(Wi._mult(qe)._add(Pt))}et.push(ft)}return et}(T,Ee*X)),function(ze,qe,et){for(let tt=0;tt<qe.length;tt++){const ut=qe[tt];if(ze.length>=3){for(let ft=0;ft<ut.length;ft++)if(xu(ze,ut[ft]))return!0}if(vd(ze,ut,et))return!0}return!1}(ae,T,_e)}isTileClipped(){return!0}}function Rd(A,s){return s>0?s+2*A:A}const Fd=C([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Od=C([{name:"a_projected_pos",components:3,type:"Float32"}],4);C([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Vm=C([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);C([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Bc=C([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Nd=C([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Dh(A,s,c){return A.sections.forEach(y=>{y.text=function(T,N,V){const X=N.layout.get("text-transform").evaluate(V,{});return X==="uppercase"?T=T.toLocaleUpperCase():X==="lowercase"&&(T=T.toLocaleLowerCase()),Vr.applyArabicShaping&&(T=Vr.applyArabicShaping(T)),T}(y.text,s,c)}),A}C([{name:"triangle",components:3,type:"Uint16"}]),C([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),C([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),C([{type:"Float32",name:"offsetX"}]),C([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),C([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const Iu={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var Js=24,j0=mr,Lh=function(A,s,c,y,T){var N,V,X=8*T-y-1,ae=(1<<X)-1,_e=ae>>1,Ee=-7,ze=c?T-1:0,qe=c?-1:1,et=A[s+ze];for(ze+=qe,N=et&(1<<-Ee)-1,et>>=-Ee,Ee+=X;Ee>0;N=256*N+A[s+ze],ze+=qe,Ee-=8);for(V=N&(1<<-Ee)-1,N>>=-Ee,Ee+=y;Ee>0;V=256*V+A[s+ze],ze+=qe,Ee-=8);if(N===0)N=1-_e;else{if(N===ae)return V?NaN:1/0*(et?-1:1);V+=Math.pow(2,y),N-=_e}return(et?-1:1)*V*Math.pow(2,N-y)},W0=function(A,s,c,y,T,N){var V,X,ae,_e=8*N-T-1,Ee=(1<<_e)-1,ze=Ee>>1,qe=T===23?Math.pow(2,-24)-Math.pow(2,-77):0,et=y?0:N-1,tt=y?1:-1,ut=s<0||s===0&&1/s<0?1:0;for(s=Math.abs(s),isNaN(s)||s===1/0?(X=isNaN(s)?1:0,V=Ee):(V=Math.floor(Math.log(s)/Math.LN2),s*(ae=Math.pow(2,-V))<1&&(V--,ae*=2),(s+=V+ze>=1?qe/ae:qe*Math.pow(2,1-ze))*ae>=2&&(V++,ae/=2),V+ze>=Ee?(X=0,V=Ee):V+ze>=1?(X=(s*ae-1)*Math.pow(2,T),V+=ze):(X=s*Math.pow(2,ze-1)*Math.pow(2,T),V=0));T>=8;A[c+et]=255&X,et+=tt,X/=256,T-=8);for(V=V<<T|X,_e+=T;_e>0;A[c+et]=255&V,et+=tt,V/=256,_e-=8);A[c+et-tt]|=128*ut};function mr(A){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(A)?A:new Uint8Array(A||0),this.pos=0,this.type=0,this.length=this.buf.length}mr.Varint=0,mr.Fixed64=1,mr.Bytes=2,mr.Fixed32=5;var Ol=4294967296,Vd=1/Ol,Y0=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Nl(A){return A.type===mr.Bytes?A.readVarint()+A.pos:A.pos+1}function ah(A,s,c){return c?4294967296*s+(A>>>0):4294967296*(s>>>0)+(A>>>0)}function Ud(A,s,c){var y=s<=16383?1:s<=2097151?2:s<=268435455?3:Math.floor(Math.log(s)/(7*Math.LN2));c.realloc(y);for(var T=c.pos-1;T>=A;T--)c.buf[T+y]=c.buf[T]}function Um(A,s){for(var c=0;c<A.length;c++)s.writeVarint(A[c])}function Gm(A,s){for(var c=0;c<A.length;c++)s.writeSVarint(A[c])}function Qm(A,s){for(var c=0;c<A.length;c++)s.writeFloat(A[c])}function qm(A,s){for(var c=0;c<A.length;c++)s.writeDouble(A[c])}function Hm(A,s){for(var c=0;c<A.length;c++)s.writeBoolean(A[c])}function Zm(A,s){for(var c=0;c<A.length;c++)s.writeFixed32(A[c])}function jm(A,s){for(var c=0;c<A.length;c++)s.writeSFixed32(A[c])}function Wm(A,s){for(var c=0;c<A.length;c++)s.writeFixed64(A[c])}function Gd(A,s){for(var c=0;c<A.length;c++)s.writeSFixed64(A[c])}function zh(A,s){return(A[s]|A[s+1]<<8|A[s+2]<<16)+16777216*A[s+3]}function Mu(A,s,c){A[c]=s,A[c+1]=s>>>8,A[c+2]=s>>>16,A[c+3]=s>>>24}function Qd(A,s){return(A[s]|A[s+1]<<8|A[s+2]<<16)+(A[s+3]<<24)}mr.prototype={destroy:function(){this.buf=null},readFields:function(A,s,c){for(c=c||this.length;this.pos<c;){var y=this.readVarint(),T=y>>3,N=this.pos;this.type=7&y,A(T,s,this),this.pos===N&&this.skip(y)}return s},readMessage:function(A,s){return this.readFields(A,s,this.readVarint()+this.pos)},readFixed32:function(){var A=zh(this.buf,this.pos);return this.pos+=4,A},readSFixed32:function(){var A=Qd(this.buf,this.pos);return this.pos+=4,A},readFixed64:function(){var A=zh(this.buf,this.pos)+zh(this.buf,this.pos+4)*Ol;return this.pos+=8,A},readSFixed64:function(){var A=zh(this.buf,this.pos)+Qd(this.buf,this.pos+4)*Ol;return this.pos+=8,A},readFloat:function(){var A=Lh(this.buf,this.pos,!0,23,4);return this.pos+=4,A},readDouble:function(){var A=Lh(this.buf,this.pos,!0,52,8);return this.pos+=8,A},readVarint:function(A){var s,c,y=this.buf;return s=127&(c=y[this.pos++]),c<128?s:(s|=(127&(c=y[this.pos++]))<<7,c<128?s:(s|=(127&(c=y[this.pos++]))<<14,c<128?s:(s|=(127&(c=y[this.pos++]))<<21,c<128?s:function(T,N,V){var X,ae,_e=V.buf;if(X=(112&(ae=_e[V.pos++]))>>4,ae<128||(X|=(127&(ae=_e[V.pos++]))<<3,ae<128)||(X|=(127&(ae=_e[V.pos++]))<<10,ae<128)||(X|=(127&(ae=_e[V.pos++]))<<17,ae<128)||(X|=(127&(ae=_e[V.pos++]))<<24,ae<128)||(X|=(1&(ae=_e[V.pos++]))<<31,ae<128))return ah(T,X,N);throw new Error("Expected varint not more than 10 bytes")}(s|=(15&(c=y[this.pos]))<<28,A,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var A=this.readVarint();return A%2==1?(A+1)/-2:A/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var A=this.readVarint()+this.pos,s=this.pos;return this.pos=A,A-s>=12&&Y0?function(c,y,T){return Y0.decode(c.subarray(y,T))}(this.buf,s,A):function(c,y,T){for(var N="",V=y;V<T;){var X,ae,_e,Ee=c[V],ze=null,qe=Ee>239?4:Ee>223?3:Ee>191?2:1;if(V+qe>T)break;qe===1?Ee<128&&(ze=Ee):qe===2?(192&(X=c[V+1]))==128&&(ze=(31&Ee)<<6|63&X)<=127&&(ze=null):qe===3?(ae=c[V+2],(192&(X=c[V+1]))==128&&(192&ae)==128&&((ze=(15&Ee)<<12|(63&X)<<6|63&ae)<=2047||ze>=55296&&ze<=57343)&&(ze=null)):qe===4&&(ae=c[V+2],_e=c[V+3],(192&(X=c[V+1]))==128&&(192&ae)==128&&(192&_e)==128&&((ze=(15&Ee)<<18|(63&X)<<12|(63&ae)<<6|63&_e)<=65535||ze>=1114112)&&(ze=null)),ze===null?(ze=65533,qe=1):ze>65535&&(ze-=65536,N+=String.fromCharCode(ze>>>10&1023|55296),ze=56320|1023&ze),N+=String.fromCharCode(ze),V+=qe}return N}(this.buf,s,A)},readBytes:function(){var A=this.readVarint()+this.pos,s=this.buf.subarray(this.pos,A);return this.pos=A,s},readPackedVarint:function(A,s){if(this.type!==mr.Bytes)return A.push(this.readVarint(s));var c=Nl(this);for(A=A||[];this.pos<c;)A.push(this.readVarint(s));return A},readPackedSVarint:function(A){if(this.type!==mr.Bytes)return A.push(this.readSVarint());var s=Nl(this);for(A=A||[];this.pos<s;)A.push(this.readSVarint());return A},readPackedBoolean:function(A){if(this.type!==mr.Bytes)return A.push(this.readBoolean());var s=Nl(this);for(A=A||[];this.pos<s;)A.push(this.readBoolean());return A},readPackedFloat:function(A){if(this.type!==mr.Bytes)return A.push(this.readFloat());var s=Nl(this);for(A=A||[];this.pos<s;)A.push(this.readFloat());return A},readPackedDouble:function(A){if(this.type!==mr.Bytes)return A.push(this.readDouble());var s=Nl(this);for(A=A||[];this.pos<s;)A.push(this.readDouble());return A},readPackedFixed32:function(A){if(this.type!==mr.Bytes)return A.push(this.readFixed32());var s=Nl(this);for(A=A||[];this.pos<s;)A.push(this.readFixed32());return A},readPackedSFixed32:function(A){if(this.type!==mr.Bytes)return A.push(this.readSFixed32());var s=Nl(this);for(A=A||[];this.pos<s;)A.push(this.readSFixed32());return A},readPackedFixed64:function(A){if(this.type!==mr.Bytes)return A.push(this.readFixed64());var s=Nl(this);for(A=A||[];this.pos<s;)A.push(this.readFixed64());return A},readPackedSFixed64:function(A){if(this.type!==mr.Bytes)return A.push(this.readSFixed64());var s=Nl(this);for(A=A||[];this.pos<s;)A.push(this.readSFixed64());return A},skip:function(A){var s=7&A;if(s===mr.Varint)for(;this.buf[this.pos++]>127;);else if(s===mr.Bytes)this.pos=this.readVarint()+this.pos;else if(s===mr.Fixed32)this.pos+=4;else{if(s!==mr.Fixed64)throw new Error("Unimplemented type: "+s);this.pos+=8}},writeTag:function(A,s){this.writeVarint(A<<3|s)},realloc:function(A){for(var s=this.length||16;s<this.pos+A;)s*=2;if(s!==this.length){var c=new Uint8Array(s);c.set(this.buf),this.buf=c,this.length=s}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(A){this.realloc(4),Mu(this.buf,A,this.pos),this.pos+=4},writeSFixed32:function(A){this.realloc(4),Mu(this.buf,A,this.pos),this.pos+=4},writeFixed64:function(A){this.realloc(8),Mu(this.buf,-1&A,this.pos),Mu(this.buf,Math.floor(A*Vd),this.pos+4),this.pos+=8},writeSFixed64:function(A){this.realloc(8),Mu(this.buf,-1&A,this.pos),Mu(this.buf,Math.floor(A*Vd),this.pos+4),this.pos+=8},writeVarint:function(A){(A=+A||0)>268435455||A<0?function(s,c){var y,T;if(s>=0?(y=s%4294967296|0,T=s/4294967296|0):(T=~(-s/4294967296),4294967295^(y=~(-s%4294967296))?y=y+1|0:(y=0,T=T+1|0)),s>=18446744073709552e3||s<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");c.realloc(10),function(N,V,X){X.buf[X.pos++]=127&N|128,N>>>=7,X.buf[X.pos++]=127&N|128,N>>>=7,X.buf[X.pos++]=127&N|128,N>>>=7,X.buf[X.pos++]=127&N|128,X.buf[X.pos]=127&(N>>>=7)}(y,0,c),function(N,V){var X=(7&N)<<4;V.buf[V.pos++]|=X|((N>>>=3)?128:0),N&&(V.buf[V.pos++]=127&N|((N>>>=7)?128:0),N&&(V.buf[V.pos++]=127&N|((N>>>=7)?128:0),N&&(V.buf[V.pos++]=127&N|((N>>>=7)?128:0),N&&(V.buf[V.pos++]=127&N|((N>>>=7)?128:0),N&&(V.buf[V.pos++]=127&N)))))}(T,c)}(A,this):(this.realloc(4),this.buf[this.pos++]=127&A|(A>127?128:0),A<=127||(this.buf[this.pos++]=127&(A>>>=7)|(A>127?128:0),A<=127||(this.buf[this.pos++]=127&(A>>>=7)|(A>127?128:0),A<=127||(this.buf[this.pos++]=A>>>7&127))))},writeSVarint:function(A){this.writeVarint(A<0?2*-A-1:2*A)},writeBoolean:function(A){this.writeVarint(!!A)},writeString:function(A){A=String(A),this.realloc(4*A.length),this.pos++;var s=this.pos;this.pos=function(y,T,N){for(var V,X,ae=0;ae<T.length;ae++){if((V=T.charCodeAt(ae))>55295&&V<57344){if(!X){V>56319||ae+1===T.length?(y[N++]=239,y[N++]=191,y[N++]=189):X=V;continue}if(V<56320){y[N++]=239,y[N++]=191,y[N++]=189,X=V;continue}V=X-55296<<10|V-56320|65536,X=null}else X&&(y[N++]=239,y[N++]=191,y[N++]=189,X=null);V<128?y[N++]=V:(V<2048?y[N++]=V>>6|192:(V<65536?y[N++]=V>>12|224:(y[N++]=V>>18|240,y[N++]=V>>12&63|128),y[N++]=V>>6&63|128),y[N++]=63&V|128)}return N}(this.buf,A,this.pos);var c=this.pos-s;c>=128&&Ud(s,c,this),this.pos=s-1,this.writeVarint(c),this.pos+=c},writeFloat:function(A){this.realloc(4),W0(this.buf,A,this.pos,!0,23,4),this.pos+=4},writeDouble:function(A){this.realloc(8),W0(this.buf,A,this.pos,!0,52,8),this.pos+=8},writeBytes:function(A){var s=A.length;this.writeVarint(s),this.realloc(s);for(var c=0;c<s;c++)this.buf[this.pos++]=A[c]},writeRawMessage:function(A,s){this.pos++;var c=this.pos;A(s,this);var y=this.pos-c;y>=128&&Ud(c,y,this),this.pos=c-1,this.writeVarint(y),this.pos+=y},writeMessage:function(A,s,c){this.writeTag(A,mr.Bytes),this.writeRawMessage(s,c)},writePackedVarint:function(A,s){s.length&&this.writeMessage(A,Um,s)},writePackedSVarint:function(A,s){s.length&&this.writeMessage(A,Gm,s)},writePackedBoolean:function(A,s){s.length&&this.writeMessage(A,Hm,s)},writePackedFloat:function(A,s){s.length&&this.writeMessage(A,Qm,s)},writePackedDouble:function(A,s){s.length&&this.writeMessage(A,qm,s)},writePackedFixed32:function(A,s){s.length&&this.writeMessage(A,Zm,s)},writePackedSFixed32:function(A,s){s.length&&this.writeMessage(A,jm,s)},writePackedFixed64:function(A,s){s.length&&this.writeMessage(A,Wm,s)},writePackedSFixed64:function(A,s){s.length&&this.writeMessage(A,Gd,s)},writeBytesField:function(A,s){this.writeTag(A,mr.Bytes),this.writeBytes(s)},writeFixed32Field:function(A,s){this.writeTag(A,mr.Fixed32),this.writeFixed32(s)},writeSFixed32Field:function(A,s){this.writeTag(A,mr.Fixed32),this.writeSFixed32(s)},writeFixed64Field:function(A,s){this.writeTag(A,mr.Fixed64),this.writeFixed64(s)},writeSFixed64Field:function(A,s){this.writeTag(A,mr.Fixed64),this.writeSFixed64(s)},writeVarintField:function(A,s){this.writeTag(A,mr.Varint),this.writeVarint(s)},writeSVarintField:function(A,s){this.writeTag(A,mr.Varint),this.writeSVarint(s)},writeStringField:function(A,s){this.writeTag(A,mr.Bytes),this.writeString(s)},writeFloatField:function(A,s){this.writeTag(A,mr.Fixed32),this.writeFloat(s)},writeDoubleField:function(A,s){this.writeTag(A,mr.Fixed64),this.writeDouble(s)},writeBooleanField:function(A,s){this.writeVarintField(A,!!s)}};var $0=O(j0);const X0=3;function qd(A,s,c){A===1&&c.readMessage(Ym,s)}function Ym(A,s,c){if(A===3){const{id:y,bitmap:T,width:N,height:V,left:X,top:ae,advance:_e}=c.readMessage($m,{});s.push({id:y,bitmap:new Ju({width:N+2*X0,height:V+2*X0},T),metrics:{width:N,height:V,left:X,top:ae,advance:_e}})}}function $m(A,s,c){A===1?s.id=c.readVarint():A===2?s.bitmap=c.readBytes():A===3?s.width=c.readVarint():A===4?s.height=c.readVarint():A===5?s.left=c.readSVarint():A===6?s.top=c.readSVarint():A===7&&(s.advance=c.readVarint())}const Hd=X0;function Zd(A){let s=0,c=0;for(const V of A)s+=V.w*V.h,c=Math.max(c,V.w);A.sort((V,X)=>X.h-V.h);const y=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(s/.95)),c),h:1/0}];let T=0,N=0;for(const V of A)for(let X=y.length-1;X>=0;X--){const ae=y[X];if(!(V.w>ae.w||V.h>ae.h)){if(V.x=ae.x,V.y=ae.y,N=Math.max(N,V.y+V.h),T=Math.max(T,V.x+V.w),V.w===ae.w&&V.h===ae.h){const _e=y.pop();X<y.length&&(y[X]=_e)}else V.h===ae.h?(ae.x+=V.w,ae.w-=V.w):V.w===ae.w?(ae.y+=V.h,ae.h-=V.h):(y.push({x:ae.x+V.w,y:ae.y,w:ae.w-V.w,h:V.h}),ae.y+=V.h,ae.h-=V.h);break}}return{w:T,h:N,fill:s/(T*N)||0}}const Lo=1;class K0{constructor(s,{pixelRatio:c,version:y,stretchX:T,stretchY:N,content:V}){this.paddedRect=s,this.pixelRatio=c,this.stretchX=T,this.stretchY=N,this.content=V,this.version=y}get tl(){return[this.paddedRect.x+Lo,this.paddedRect.y+Lo]}get br(){return[this.paddedRect.x+this.paddedRect.w-Lo,this.paddedRect.y+this.paddedRect.h-Lo]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*Lo)/this.pixelRatio,(this.paddedRect.h-2*Lo)/this.pixelRatio]}}class cA{constructor(s,c){const y={},T={};this.haveRenderCallbacks=[];const N=[];this.addImages(s,y,N),this.addImages(c,T,N);const{w:V,h:X}=Zd(N),ae=new xo({width:V||1,height:X||1});for(const _e in s){const Ee=s[_e],ze=y[_e].paddedRect;xo.copy(Ee.data,ae,{x:0,y:0},{x:ze.x+Lo,y:ze.y+Lo},Ee.data)}for(const _e in c){const Ee=c[_e],ze=T[_e].paddedRect,qe=ze.x+Lo,et=ze.y+Lo,tt=Ee.data.width,ut=Ee.data.height;xo.copy(Ee.data,ae,{x:0,y:0},{x:qe,y:et},Ee.data),xo.copy(Ee.data,ae,{x:0,y:ut-1},{x:qe,y:et-1},{width:tt,height:1}),xo.copy(Ee.data,ae,{x:0,y:0},{x:qe,y:et+ut},{width:tt,height:1}),xo.copy(Ee.data,ae,{x:tt-1,y:0},{x:qe-1,y:et},{width:1,height:ut}),xo.copy(Ee.data,ae,{x:0,y:0},{x:qe+tt,y:et},{width:1,height:ut})}this.image=ae,this.iconPositions=y,this.patternPositions=T}addImages(s,c,y){for(const T in s){const N=s[T],V={x:0,y:0,w:N.data.width+2*Lo,h:N.data.height+2*Lo};y.push(V),c[T]=new K0(V,N),N.hasRenderCallback&&this.haveRenderCallbacks.push(T)}}patchUpdatedImages(s,c){s.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const y in s.updatedImages)this.patchUpdatedImage(this.iconPositions[y],s.getImage(y),c),this.patchUpdatedImage(this.patternPositions[y],s.getImage(y),c)}patchUpdatedImage(s,c,y){if(!s||!c||s.version===c.version)return;s.version=c.version;const[T,N]=s.tl;y.update(c.data,void 0,{x:T,y:N})}}var su;Zi("ImagePosition",K0),Zi("ImageAtlas",cA),u.ai=void 0,(su=u.ai||(u.ai={}))[su.none=0]="none",su[su.horizontal=1]="horizontal",su[su.vertical=2]="vertical",su[su.horizontalOnly=3]="horizontalOnly";const Rh=-17;class Fh{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(s,c){const y=new Fh;return y.scale=s||1,y.fontStack=c,y}static forImage(s){const c=new Fh;return c.imageName=s,c}}class Tu{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(s,c){const y=new Tu;for(let T=0;T<s.sections.length;T++){const N=s.sections[T];N.image?y.addImageSection(N):y.addTextSection(N,c)}return y}length(){return this.text.length}getSection(s){return this.sections[this.sectionIndex[s]]}getSectionIndex(s){return this.sectionIndex[s]}getCharCode(s){return this.text.charCodeAt(s)}verticalizePunctuation(){this.text=function(s){let c="";for(let y=0;y<s.length;y++){const T=s.charCodeAt(y+1)||null,N=s.charCodeAt(y-1)||null;c+=T&&dl(T)&&!Iu[s[y+1]]||N&&dl(N)&&!Iu[s[y-1]]||!Iu[s[y]]?s[y]:Iu[s[y]]}return c}(this.text)}trim(){let s=0;for(let y=0;y<this.text.length&&Lc[this.text.charCodeAt(y)];y++)s++;let c=this.text.length;for(let y=this.text.length-1;y>=0&&y>=s&&Lc[this.text.charCodeAt(y)];y--)c--;this.text=this.text.substring(s,c),this.sectionIndex=this.sectionIndex.slice(s,c)}substring(s,c){const y=new Tu;return y.text=this.text.substring(s,c),y.sectionIndex=this.sectionIndex.slice(s,c),y.sections=this.sections,y}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((s,c)=>Math.max(s,this.sections[c].scale),0)}addTextSection(s,c){this.text+=s.text,this.sections.push(Fh.forText(s.scale,s.fontStack||c));const y=this.sections.length-1;for(let T=0;T<s.text.length;++T)this.sectionIndex.push(y)}addImageSection(s){const c=s.image?s.image.name:"";if(c.length===0)return void vt("Can't add FormattedSection with an empty image.");const y=this.getNextImageSectionCharCode();y?(this.text+=String.fromCharCode(y),this.sections.push(Fh.forImage(c)),this.sectionIndex.push(this.sections.length-1)):vt("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Dc(A,s,c,y,T,N,V,X,ae,_e,Ee,ze,qe,et,tt,ut){const ft=Tu.fromFeature(A,T);let _t;ze===u.ai.vertical&&ft.verticalizePunctuation();const{processBidirectionalText:Rt,processStyledBidirectionalText:Pt}=Vr;if(Rt&&ft.sections.length===1){_t=[];const _i=Rt(ft.toString(),J0(ft,_e,N,s,y,et,tt));for(const Wi of _i){const hn=new Tu;hn.text=Wi,hn.sections=ft.sections;for(let qi=0;qi<Wi.length;qi++)hn.sectionIndex.push(0);_t.push(hn)}}else if(Pt){_t=[];const _i=Pt(ft.text,ft.sectionIndex,J0(ft,_e,N,s,y,et,tt));for(const Wi of _i){const hn=new Tu;hn.text=Wi[0],hn.sectionIndex=Wi[1],hn.sections=ft.sections,_t.push(hn)}}else _t=function(_i,Wi){const hn=[],qi=_i.text;let Ri=0;for(const Bi of Wi)hn.push(_i.substring(Ri,Bi)),Ri=Bi;return Ri<qi.length&&hn.push(_i.substring(Ri,qi.length)),hn}(ft,J0(ft,_e,N,s,y,et,tt));const Nt=[],Xt={positionedLines:Nt,text:ft.toString(),top:Ee[1],bottom:Ee[1],left:Ee[0],right:Ee[0],writingMode:ze,iconsInText:!1,verticalizable:!1};return function(_i,Wi,hn,qi,Ri,Bi,nn,Fi,Ei,rn,on,tr){let cs=0,gs=Rh,la=0,Wo=0;const ro=Fi==="right"?1:Fi==="left"?0:.5;let ss=0;for(const ua of Ri){ua.trim();const Gn=ua.getMaxScale(),ao=(Gn-1)*Js,oo={positionedGlyphs:[],lineOffset:0};_i.positionedLines[ss]=oo;const _a=oo.positionedGlyphs;let zo=0;if(!ua.length()){gs+=Bi,++ss;continue}for(let ha=0;ha<ua.length();ha++){const hr=ua.getSection(ha),Ao=ua.getSectionIndex(ha),ja=ua.getCharCode(ha);let ca=0,RA=null,il=null,nl=null,Vl=Js;const FA=!(Ei===u.ai.horizontal||!on&&!sA(ja)||on&&(Lc[ja]||(In=ja,Vi.Arabic(In)||Vi["Arabic Supplement"](In)||Vi["Arabic Extended-A"](In)||Vi["Arabic Presentation Forms-A"](In)||Vi["Arabic Presentation Forms-B"](In))));if(hr.imageName){const pA=qi[hr.imageName];if(!pA)continue;nl=hr.imageName,_i.iconsInText=_i.iconsInText||!0,il=pA.paddedRect;const lo=pA.displaySize;hr.scale=hr.scale*Js/tr,RA={width:lo[0],height:lo[1],left:Lo,top:-Hd,advance:FA?lo[1]:lo[0]},ca=ao+(Js-lo[1]*hr.scale),Vl=RA.advance;const Ul=FA?lo[0]*hr.scale-Js*Gn:lo[1]*hr.scale-Js*Gn;Ul>0&&Ul>zo&&(zo=Ul)}else{const pA=hn[hr.fontStack],lo=pA&&pA[ja];if(lo&&lo.rect)il=lo.rect,RA=lo.metrics;else{const Ul=Wi[hr.fontStack],Du=Ul&&Ul[ja];if(!Du)continue;RA=Du.metrics}ca=(Gn-hr.scale)*Js}FA?(_i.verticalizable=!0,_a.push({glyph:ja,imageName:nl,x:cs,y:gs+ca,vertical:FA,scale:hr.scale,fontStack:hr.fontStack,sectionIndex:Ao,metrics:RA,rect:il}),cs+=Vl*hr.scale+rn):(_a.push({glyph:ja,imageName:nl,x:cs,y:gs+ca,vertical:FA,scale:hr.scale,fontStack:hr.fontStack,sectionIndex:Ao,metrics:RA,rect:il}),cs+=RA.advance*hr.scale+rn)}_a.length!==0&&(la=Math.max(cs-rn,la),Jm(_a,0,_a.length-1,ro,zo)),cs=0;const Ro=Bi*Gn+zo;oo.lineOffset=Math.max(zo,ao),gs+=Ro,Wo=Math.max(Ro,Wo),++ss}var In;const Ia=gs-Rh,{horizontalAlign:ms,verticalAlign:so}=ef(nn);(function(ua,Gn,ao,oo,_a,zo,Ro,ha,hr){const Ao=(Gn-ao)*_a;let ja=0;ja=zo!==Ro?-ha*oo-Rh:(-oo*hr+.5)*Ro;for(const ca of ua)for(const RA of ca.positionedGlyphs)RA.x+=Ao,RA.y+=ja})(_i.positionedLines,ro,ms,so,la,Wo,Bi,Ia,Ri.length),_i.top+=-so*Ia,_i.bottom=_i.top+Ia,_i.left+=-ms*la,_i.right=_i.left+la}(Xt,s,c,y,_t,V,X,ae,ze,_e,qe,ut),!function(_i){for(const Wi of _i)if(Wi.positionedGlyphs.length!==0)return!1;return!0}(Nt)&&Xt}const Lc={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Xm={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function jd(A,s,c,y,T,N){if(s.imageName){const V=y[s.imageName];return V?V.displaySize[0]*s.scale*Js/N+T:0}{const V=c[s.fontStack],X=V&&V[A];return X?X.metrics.advance*s.scale+T:0}}function zc(A,s,c,y){const T=Math.pow(A-s,2);return y?A<s?T/2:2*T:T+Math.abs(c)*c}function Km(A,s,c){let y=0;return A===10&&(y-=1e4),c&&(y+=150),A!==40&&A!==65288||(y+=50),s!==41&&s!==65289||(y+=50),y}function Wd(A,s,c,y,T,N){let V=null,X=zc(s,c,T,N);for(const ae of y){const _e=zc(s-ae.x,c,T,N)+ae.badness;_e<=X&&(V=ae,X=_e)}return{index:A,x:s,priorBreak:V,badness:X}}function Yd(A){return A?Yd(A.priorBreak).concat(A.index):[]}function J0(A,s,c,y,T,N,V){if(N!=="point")return[];if(!A)return[];const X=[],ae=function(qe,et,tt,ut,ft,_t){let Rt=0;for(let Pt=0;Pt<qe.length();Pt++){const Nt=qe.getSection(Pt);Rt+=jd(qe.getCharCode(Pt),Nt,ut,ft,et,_t)}return Rt/Math.max(1,Math.ceil(Rt/tt))}(A,s,c,y,T,V),_e=A.text.indexOf("​")>=0;let Ee=0;for(let qe=0;qe<A.length();qe++){const et=A.getSection(qe),tt=A.getCharCode(qe);if(Lc[tt]||(Ee+=jd(tt,et,y,T,s,V)),qe<A.length()-1){const ut=!((ze=tt)<11904||!(Vi["Bopomofo Extended"](ze)||Vi.Bopomofo(ze)||Vi["CJK Compatibility Forms"](ze)||Vi["CJK Compatibility Ideographs"](ze)||Vi["CJK Compatibility"](ze)||Vi["CJK Radicals Supplement"](ze)||Vi["CJK Strokes"](ze)||Vi["CJK Symbols and Punctuation"](ze)||Vi["CJK Unified Ideographs Extension A"](ze)||Vi["CJK Unified Ideographs"](ze)||Vi["Enclosed CJK Letters and Months"](ze)||Vi["Halfwidth and Fullwidth Forms"](ze)||Vi.Hiragana(ze)||Vi["Ideographic Description Characters"](ze)||Vi["Kangxi Radicals"](ze)||Vi["Katakana Phonetic Extensions"](ze)||Vi.Katakana(ze)||Vi["Vertical Forms"](ze)||Vi["Yi Radicals"](ze)||Vi["Yi Syllables"](ze)));(Xm[tt]||ut||et.imageName)&&X.push(Wd(qe+1,Ee,ae,X,Km(tt,A.getCharCode(qe+1),ut&&_e),!1))}}var ze;return Yd(Wd(A.length(),Ee,ae,X,0,!0))}function ef(A){let s=.5,c=.5;switch(A){case"right":case"top-right":case"bottom-right":s=1;break;case"left":case"top-left":case"bottom-left":s=0}switch(A){case"bottom":case"bottom-right":case"bottom-left":c=1;break;case"top":case"top-right":case"top-left":c=0}return{horizontalAlign:s,verticalAlign:c}}function Jm(A,s,c,y,T){if(!y&&!T)return;const N=A[c],V=(A[c].x+N.metrics.advance*N.scale)*y;for(let X=s;X<=c;X++)A[X].x-=V,A[X].y+=T}function e_(A,s,c){const{horizontalAlign:y,verticalAlign:T}=ef(c),N=s[0]-A.displaySize[0]*y,V=s[1]-A.displaySize[1]*T;return{image:A,top:V,bottom:V+A.displaySize[1],left:N,right:N+A.displaySize[0]}}function $d(A,s,c,y,T,N){const V=A.image;let X;if(V.content){const ft=V.content,_t=V.pixelRatio||1;X=[ft[0]/_t,ft[1]/_t,V.displaySize[0]-ft[2]/_t,V.displaySize[1]-ft[3]/_t]}const ae=s.left*N,_e=s.right*N;let Ee,ze,qe,et;c==="width"||c==="both"?(et=T[0]+ae-y[3],ze=T[0]+_e+y[1]):(et=T[0]+(ae+_e-V.displaySize[0])/2,ze=et+V.displaySize[0]);const tt=s.top*N,ut=s.bottom*N;return c==="height"||c==="both"?(Ee=T[1]+tt-y[0],qe=T[1]+ut+y[2]):(Ee=T[1]+(tt+ut-V.displaySize[1])/2,qe=Ee+V.displaySize[1]),{image:V,top:Ee,right:ze,bottom:qe,left:et,collisionPadding:X}}const Oh=255,xl=128,au=Oh*xl;function Xd(A,s){const{expression:c}=s;if(c.kind==="constant")return{kind:"constant",layoutSize:c.evaluate(new zr(A+1))};if(c.kind==="source")return{kind:"source"};{const{zoomStops:y,interpolationType:T}=c;let N=0;for(;N<y.length&&y[N]<=A;)N++;N=Math.max(0,N-1);let V=N;for(;V<y.length&&y[V]<A+1;)V++;V=Math.min(y.length-1,V);const X=y[N],ae=y[V];return c.kind==="composite"?{kind:"composite",minZoom:X,maxZoom:ae,interpolationType:T}:{kind:"camera",minZoom:X,maxZoom:ae,minSize:c.evaluate(new zr(X)),maxSize:c.evaluate(new zr(ae)),interpolationType:T}}}function tf(A,s,c){let y="never";const T=A.get(s);return T?y=T:A.get(c)&&(y="always"),y}const t_=nu.VectorTileFeature.types,i_=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Rc(A,s,c,y,T,N,V,X,ae,_e,Ee,ze,qe){const et=X?Math.min(au,Math.round(X[0])):0,tt=X?Math.min(au,Math.round(X[1])):0;A.emplaceBack(s,c,Math.round(32*y),Math.round(32*T),N,V,(et<<1)+(ae?1:0),tt,16*_e,16*Ee,256*ze,256*qe)}function nf(A,s,c){A.emplaceBack(s.x,s.y,c),A.emplaceBack(s.x,s.y,c),A.emplaceBack(s.x,s.y,c),A.emplaceBack(s.x,s.y,c)}function n_(A){for(const s of A.sections)if(ls(s.text))return!0;return!1}class rf{constructor(s){this.layoutVertexArray=new Ki,this.indexArray=new Qn,this.programConfigurations=s,this.segments=new Mr,this.dynamicLayoutVertexArray=new Oi,this.opacityVertexArray=new Ui,this.hasVisibleVertices=!1,this.placedSymbolArray=new ve}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(s,c,y,T){this.isEmpty()||(y&&(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,Fd.members),this.indexBuffer=s.createIndexBuffer(this.indexArray,c),this.dynamicLayoutVertexBuffer=s.createVertexBuffer(this.dynamicLayoutVertexArray,Od.members,!0),this.opacityVertexBuffer=s.createVertexBuffer(this.opacityVertexArray,i_,!0),this.opacityVertexBuffer.itemSize=1),(y||T)&&this.programConfigurations.upload(s))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Zi("SymbolBuffers",rf);class sf{constructor(s,c,y){this.layoutVertexArray=new s,this.layoutAttributes=c,this.indexArray=new y,this.segments=new Mr,this.collisionVertexArray=new ji}upload(s){this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=s.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=s.createVertexBuffer(this.collisionVertexArray,Vm.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Zi("CollisionBuffers",sf);class ou{constructor(s){this.collisionBoxArray=s.collisionBoxArray,this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(V=>V.id),this.index=s.index,this.pixelRatio=s.pixelRatio,this.sourceLayerIndex=s.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=bu([]),this.placementViewportMatrix=bu([]);const c=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Xd(this.zoom,c["text-size"]),this.iconSizeData=Xd(this.zoom,c["icon-size"]);const y=this.layers[0].layout,T=y.get("symbol-sort-key"),N=y.get("symbol-z-order");this.canOverlap=tf(y,"text-overlap","text-allow-overlap")!=="never"||tf(y,"icon-overlap","icon-allow-overlap")!=="never"||y.get("text-ignore-placement")||y.get("icon-ignore-placement"),this.sortFeaturesByKey=N!=="viewport-y"&&!T.isConstant(),this.sortFeaturesByY=(N==="viewport-y"||N==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,y.get("symbol-placement")==="point"&&(this.writingModes=y.get("text-writing-mode").map(V=>u.ai[V])),this.stateDependentLayerIds=this.layers.filter(V=>V.isStateDependent()).map(V=>V.id),this.sourceID=s.sourceID}createArrays(){this.text=new rf(new tl(this.layers,this.zoom,s=>/^text/.test(s))),this.icon=new rf(new tl(this.layers,this.zoom,s=>/^icon/.test(s))),this.glyphOffsetArray=new He,this.lineVertexArray=new We,this.symbolInstances=new Oe,this.textAnchorOffsets=new wt}calculateGlyphDependencies(s,c,y,T,N){for(let V=0;V<s.length;V++)if(c[s.charCodeAt(V)]=!0,(y||T)&&N){const X=Iu[s.charAt(V)];X&&(c[X.charCodeAt(0)]=!0)}}populate(s,c,y){const T=this.layers[0],N=T.layout,V=N.get("text-font"),X=N.get("text-field"),ae=N.get("icon-image"),_e=(X.value.kind!=="constant"||X.value.value instanceof mt&&!X.value.value.isEmpty()||X.value.value.toString().length>0)&&(V.value.kind!=="constant"||V.value.value.length>0),Ee=ae.value.kind!=="constant"||!!ae.value.value||Object.keys(ae.parameters).length>0,ze=N.get("symbol-sort-key");if(this.features=[],!_e&&!Ee)return;const qe=c.iconDependencies,et=c.glyphDependencies,tt=c.availableImages,ut=new zr(this.zoom);for(const{feature:ft,id:_t,index:Rt,sourceLayerIndex:Pt}of s){const Nt=T._featureFilter.needGeometry,Xt=tu(ft,Nt);if(!T._featureFilter.filter(ut,Xt,y))continue;let _i,Wi;if(Nt||(Xt.geometry=yu(ft)),_e){const qi=T.getValueAndResolveTokens("text-field",Xt,y,tt),Ri=mt.factory(qi);n_(Ri)&&(this.hasRTLText=!0),(!this.hasRTLText||gl()==="unavailable"||this.hasRTLText&&Vr.isParsed())&&(_i=Dh(Ri,T,Xt))}if(Ee){const qi=T.getValueAndResolveTokens("icon-image",Xt,y,tt);Wi=qi instanceof lr?qi:lr.fromString(qi)}if(!_i&&!Wi)continue;const hn=this.sortFeaturesByKey?ze.evaluate(Xt,{},y):void 0;if(this.features.push({id:_t,text:_i,icon:Wi,index:Rt,sourceLayerIndex:Pt,geometry:Xt.geometry,properties:ft.properties,type:t_[ft.type],sortKey:hn}),Wi&&(qe[Wi.name]=!0),_i){const qi=V.evaluate(Xt,{},y).join(","),Ri=N.get("text-rotation-alignment")!=="viewport"&&N.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(u.ai.vertical)>=0;for(const Bi of _i.sections)if(Bi.image)qe[Bi.image.name]=!0;else{const nn=IA(_i.toString()),Fi=Bi.fontStack||qi,Ei=et[Fi]=et[Fi]||{};this.calculateGlyphDependencies(Bi.text,Ei,Ri,this.allowVerticalPlacement,nn)}}}N.get("symbol-placement")==="line"&&(this.features=function(ft){const _t={},Rt={},Pt=[];let Nt=0;function Xt(qi){Pt.push(ft[qi]),Nt++}function _i(qi,Ri,Bi){const nn=Rt[qi];return delete Rt[qi],Rt[Ri]=nn,Pt[nn].geometry[0].pop(),Pt[nn].geometry[0]=Pt[nn].geometry[0].concat(Bi[0]),nn}function Wi(qi,Ri,Bi){const nn=_t[Ri];return delete _t[Ri],_t[qi]=nn,Pt[nn].geometry[0].shift(),Pt[nn].geometry[0]=Bi[0].concat(Pt[nn].geometry[0]),nn}function hn(qi,Ri,Bi){const nn=Bi?Ri[0][Ri[0].length-1]:Ri[0][0];return`${qi}:${nn.x}:${nn.y}`}for(let qi=0;qi<ft.length;qi++){const Ri=ft[qi],Bi=Ri.geometry,nn=Ri.text?Ri.text.toString():null;if(!nn){Xt(qi);continue}const Fi=hn(nn,Bi),Ei=hn(nn,Bi,!0);if(Fi in Rt&&Ei in _t&&Rt[Fi]!==_t[Ei]){const rn=Wi(Fi,Ei,Bi),on=_i(Fi,Ei,Pt[rn].geometry);delete _t[Fi],delete Rt[Ei],Rt[hn(nn,Pt[on].geometry,!0)]=on,Pt[rn].geometry=null}else Fi in Rt?_i(Fi,Ei,Bi):Ei in _t?Wi(Fi,Ei,Bi):(Xt(qi),_t[Fi]=Nt-1,Rt[Ei]=Nt-1)}return Pt.filter(qi=>qi.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((ft,_t)=>ft.sortKey-_t.sortKey)}update(s,c,y){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(s,c,this.layers,y),this.icon.programConfigurations.updatePaintArrays(s,c,this.layers,y))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(s){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(s),this.iconCollisionBox.upload(s)),this.text.upload(s,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(s,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(s,c){const y=this.lineVertexArray.length;if(s.segment!==void 0){let T=s.dist(c[s.segment+1]),N=s.dist(c[s.segment]);const V={};for(let X=s.segment+1;X<c.length;X++)V[X]={x:c[X].x,y:c[X].y,tileUnitDistanceFromAnchor:T},X<c.length-1&&(T+=c[X+1].dist(c[X]));for(let X=s.segment||0;X>=0;X--)V[X]={x:c[X].x,y:c[X].y,tileUnitDistanceFromAnchor:N},X>0&&(N+=c[X-1].dist(c[X]));for(let X=0;X<c.length;X++){const ae=V[X];this.lineVertexArray.emplaceBack(ae.x,ae.y,ae.tileUnitDistanceFromAnchor)}}return{lineStartIndex:y,lineLength:this.lineVertexArray.length-y}}addSymbols(s,c,y,T,N,V,X,ae,_e,Ee,ze,qe){const et=s.indexArray,tt=s.layoutVertexArray,ut=s.segments.prepareSegment(4*c.length,tt,et,this.canOverlap?V.sortKey:void 0),ft=this.glyphOffsetArray.length,_t=ut.vertexLength,Rt=this.allowVerticalPlacement&&X===u.ai.vertical?Math.PI/2:0,Pt=V.text&&V.text.sections;for(let Nt=0;Nt<c.length;Nt++){const{tl:Xt,tr:_i,bl:Wi,br:hn,tex:qi,pixelOffsetTL:Ri,pixelOffsetBR:Bi,minFontScaleX:nn,minFontScaleY:Fi,glyphOffset:Ei,isSDF:rn,sectionIndex:on}=c[Nt],tr=ut.vertexLength,cs=Ei[1];Rc(tt,ae.x,ae.y,Xt.x,cs+Xt.y,qi.x,qi.y,y,rn,Ri.x,Ri.y,nn,Fi),Rc(tt,ae.x,ae.y,_i.x,cs+_i.y,qi.x+qi.w,qi.y,y,rn,Bi.x,Ri.y,nn,Fi),Rc(tt,ae.x,ae.y,Wi.x,cs+Wi.y,qi.x,qi.y+qi.h,y,rn,Ri.x,Bi.y,nn,Fi),Rc(tt,ae.x,ae.y,hn.x,cs+hn.y,qi.x+qi.w,qi.y+qi.h,y,rn,Bi.x,Bi.y,nn,Fi),nf(s.dynamicLayoutVertexArray,ae,Rt),et.emplaceBack(tr,tr+1,tr+2),et.emplaceBack(tr+1,tr+2,tr+3),ut.vertexLength+=4,ut.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Ei[0]),Nt!==c.length-1&&on===c[Nt+1].sectionIndex||s.programConfigurations.populatePaintArrays(tt.length,V,V.index,{},qe,Pt&&Pt[on])}s.placedSymbolArray.emplaceBack(ae.x,ae.y,ft,this.glyphOffsetArray.length-ft,_t,_e,Ee,ae.segment,y?y[0]:0,y?y[1]:0,T[0],T[1],X,0,!1,0,ze)}_addCollisionDebugVertex(s,c,y,T,N,V){return c.emplaceBack(0,0),s.emplaceBack(y.x,y.y,T,N,Math.round(V.x),Math.round(V.y))}addCollisionDebugVertices(s,c,y,T,N,V,X){const ae=N.segments.prepareSegment(4,N.layoutVertexArray,N.indexArray),_e=ae.vertexLength,Ee=N.layoutVertexArray,ze=N.collisionVertexArray,qe=X.anchorX,et=X.anchorY;this._addCollisionDebugVertex(Ee,ze,V,qe,et,new ce(s,c)),this._addCollisionDebugVertex(Ee,ze,V,qe,et,new ce(y,c)),this._addCollisionDebugVertex(Ee,ze,V,qe,et,new ce(y,T)),this._addCollisionDebugVertex(Ee,ze,V,qe,et,new ce(s,T)),ae.vertexLength+=4;const tt=N.indexArray;tt.emplaceBack(_e,_e+1),tt.emplaceBack(_e+1,_e+2),tt.emplaceBack(_e+2,_e+3),tt.emplaceBack(_e+3,_e),ae.primitiveLength+=4}addDebugCollisionBoxes(s,c,y,T){for(let N=s;N<c;N++){const V=this.collisionBoxArray.get(N);this.addCollisionDebugVertices(V.x1,V.y1,V.x2,V.y2,T?this.textCollisionBox:this.iconCollisionBox,V.anchorPoint,y)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new sf(tn,Bc.members,fn),this.iconCollisionBox=new sf(tn,Bc.members,fn);for(let s=0;s<this.symbolInstances.length;s++){const c=this.symbolInstances.get(s);this.addDebugCollisionBoxes(c.textBoxStartIndex,c.textBoxEndIndex,c,!0),this.addDebugCollisionBoxes(c.verticalTextBoxStartIndex,c.verticalTextBoxEndIndex,c,!0),this.addDebugCollisionBoxes(c.iconBoxStartIndex,c.iconBoxEndIndex,c,!1),this.addDebugCollisionBoxes(c.verticalIconBoxStartIndex,c.verticalIconBoxEndIndex,c,!1)}}_deserializeCollisionBoxesForSymbol(s,c,y,T,N,V,X,ae,_e){const Ee={};for(let ze=c;ze<y;ze++){const qe=s.get(ze);Ee.textBox={x1:qe.x1,y1:qe.y1,x2:qe.x2,y2:qe.y2,anchorPointX:qe.anchorPointX,anchorPointY:qe.anchorPointY},Ee.textFeatureIndex=qe.featureIndex;break}for(let ze=T;ze<N;ze++){const qe=s.get(ze);Ee.verticalTextBox={x1:qe.x1,y1:qe.y1,x2:qe.x2,y2:qe.y2,anchorPointX:qe.anchorPointX,anchorPointY:qe.anchorPointY},Ee.verticalTextFeatureIndex=qe.featureIndex;break}for(let ze=V;ze<X;ze++){const qe=s.get(ze);Ee.iconBox={x1:qe.x1,y1:qe.y1,x2:qe.x2,y2:qe.y2,anchorPointX:qe.anchorPointX,anchorPointY:qe.anchorPointY},Ee.iconFeatureIndex=qe.featureIndex;break}for(let ze=ae;ze<_e;ze++){const qe=s.get(ze);Ee.verticalIconBox={x1:qe.x1,y1:qe.y1,x2:qe.x2,y2:qe.y2,anchorPointX:qe.anchorPointX,anchorPointY:qe.anchorPointY},Ee.verticalIconFeatureIndex=qe.featureIndex;break}return Ee}deserializeCollisionBoxes(s){this.collisionArrays=[];for(let c=0;c<this.symbolInstances.length;c++){const y=this.symbolInstances.get(c);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(s,y.textBoxStartIndex,y.textBoxEndIndex,y.verticalTextBoxStartIndex,y.verticalTextBoxEndIndex,y.iconBoxStartIndex,y.iconBoxEndIndex,y.verticalIconBoxStartIndex,y.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(s,c){const y=s.placedSymbolArray.get(c),T=y.vertexStartIndex+4*y.numGlyphs;for(let N=y.vertexStartIndex;N<T;N+=4)s.indexArray.emplaceBack(N,N+1,N+2),s.indexArray.emplaceBack(N+1,N+2,N+3)}getSortedSymbolIndexes(s){if(this.sortedAngle===s&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const c=Math.sin(s),y=Math.cos(s),T=[],N=[],V=[];for(let X=0;X<this.symbolInstances.length;++X){V.push(X);const ae=this.symbolInstances.get(X);T.push(0|Math.round(c*ae.anchorX+y*ae.anchorY)),N.push(ae.featureIndex)}return V.sort((X,ae)=>T[X]-T[ae]||N[ae]-N[X]),V}addToSortKeyRanges(s,c){const y=this.sortKeyRanges[this.sortKeyRanges.length-1];y&&y.sortKey===c?y.symbolInstanceEnd=s+1:this.sortKeyRanges.push({sortKey:c,symbolInstanceStart:s,symbolInstanceEnd:s+1})}sortFeatures(s){if(this.sortFeaturesByY&&this.sortedAngle!==s&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(s),this.sortedAngle=s,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const c of this.symbolInstanceIndexes){const y=this.symbolInstances.get(c);this.featureSortOrder.push(y.featureIndex),[y.rightJustifiedTextSymbolIndex,y.centerJustifiedTextSymbolIndex,y.leftJustifiedTextSymbolIndex].forEach((T,N,V)=>{T>=0&&V.indexOf(T)===N&&this.addIndicesForPlacedSymbol(this.text,T)}),y.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,y.verticalPlacedTextSymbolIndex),y.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,y.placedIconSymbolIndex),y.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,y.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let af,Kd;Zi("SymbolBucket",ou,{omit:["layers","collisionBoxArray","features","compareText"]}),ou.MAX_GLYPHS=65535,ou.addDynamicAttributes=nf;var of={get paint(){return Kd=Kd||new Br({"icon-opacity":new ci(Kt.paint_symbol["icon-opacity"]),"icon-color":new ci(Kt.paint_symbol["icon-color"]),"icon-halo-color":new ci(Kt.paint_symbol["icon-halo-color"]),"icon-halo-width":new ci(Kt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new ci(Kt.paint_symbol["icon-halo-blur"]),"icon-translate":new jt(Kt.paint_symbol["icon-translate"]),"icon-translate-anchor":new jt(Kt.paint_symbol["icon-translate-anchor"]),"text-opacity":new ci(Kt.paint_symbol["text-opacity"]),"text-color":new ci(Kt.paint_symbol["text-color"],{runtimeType:Ne,getOverride:A=>A.textColor,hasOverride:A=>!!A.textColor}),"text-halo-color":new ci(Kt.paint_symbol["text-halo-color"]),"text-halo-width":new ci(Kt.paint_symbol["text-halo-width"]),"text-halo-blur":new ci(Kt.paint_symbol["text-halo-blur"]),"text-translate":new jt(Kt.paint_symbol["text-translate"]),"text-translate-anchor":new jt(Kt.paint_symbol["text-translate-anchor"])})},get layout(){return af=af||new Br({"symbol-placement":new jt(Kt.layout_symbol["symbol-placement"]),"symbol-spacing":new jt(Kt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new jt(Kt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new ci(Kt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new jt(Kt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new jt(Kt.layout_symbol["icon-allow-overlap"]),"icon-overlap":new jt(Kt.layout_symbol["icon-overlap"]),"icon-ignore-placement":new jt(Kt.layout_symbol["icon-ignore-placement"]),"icon-optional":new jt(Kt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new jt(Kt.layout_symbol["icon-rotation-alignment"]),"icon-size":new ci(Kt.layout_symbol["icon-size"]),"icon-text-fit":new jt(Kt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new jt(Kt.layout_symbol["icon-text-fit-padding"]),"icon-image":new ci(Kt.layout_symbol["icon-image"]),"icon-rotate":new ci(Kt.layout_symbol["icon-rotate"]),"icon-padding":new ci(Kt.layout_symbol["icon-padding"]),"icon-keep-upright":new jt(Kt.layout_symbol["icon-keep-upright"]),"icon-offset":new ci(Kt.layout_symbol["icon-offset"]),"icon-anchor":new ci(Kt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new jt(Kt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new jt(Kt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new jt(Kt.layout_symbol["text-rotation-alignment"]),"text-field":new ci(Kt.layout_symbol["text-field"]),"text-font":new ci(Kt.layout_symbol["text-font"]),"text-size":new ci(Kt.layout_symbol["text-size"]),"text-max-width":new ci(Kt.layout_symbol["text-max-width"]),"text-line-height":new jt(Kt.layout_symbol["text-line-height"]),"text-letter-spacing":new ci(Kt.layout_symbol["text-letter-spacing"]),"text-justify":new ci(Kt.layout_symbol["text-justify"]),"text-radial-offset":new ci(Kt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new jt(Kt.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new ci(Kt.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new ci(Kt.layout_symbol["text-anchor"]),"text-max-angle":new jt(Kt.layout_symbol["text-max-angle"]),"text-writing-mode":new jt(Kt.layout_symbol["text-writing-mode"]),"text-rotate":new ci(Kt.layout_symbol["text-rotate"]),"text-padding":new jt(Kt.layout_symbol["text-padding"]),"text-keep-upright":new jt(Kt.layout_symbol["text-keep-upright"]),"text-transform":new ci(Kt.layout_symbol["text-transform"]),"text-offset":new ci(Kt.layout_symbol["text-offset"]),"text-allow-overlap":new jt(Kt.layout_symbol["text-allow-overlap"]),"text-overlap":new jt(Kt.layout_symbol["text-overlap"]),"text-ignore-placement":new jt(Kt.layout_symbol["text-ignore-placement"]),"text-optional":new jt(Kt.layout_symbol["text-optional"])})}};class Jd{constructor(s){if(s.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=s.property.overrides?s.property.overrides.runtimeType:Me,this.defaultValue=s}evaluate(s){if(s.formattedSection){const c=this.defaultValue.property.overrides;if(c&&c.hasOverride(s.formattedSection))return c.getOverride(s.formattedSection)}return s.feature&&s.featureState?this.defaultValue.evaluate(s.feature,s.featureState):this.defaultValue.property.specification.default}eachChild(s){this.defaultValue.isConstant()||s(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Zi("FormatSectionOverride",Jd,{omit:["defaultValue"]});class Fc extends Ur{constructor(s){super(s,of)}recalculate(s,c){if(super.recalculate(s,c),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const y=this.layout.get("text-writing-mode");if(y){const T=[];for(const N of y)T.indexOf(N)<0&&T.push(N);this.layout._values["text-writing-mode"]=T}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(s,c,y,T){const N=this.layout.get(s).evaluate(c,{},y,T),V=this._unevaluatedLayout._values[s];return V.isDataDriven()||Ja(V.value)||!N?N:function(X,ae){return ae.replace(/{([^{}]+)}/g,(_e,Ee)=>X&&Ee in X?String(X[Ee]):"")}(c.properties,N)}createBucket(s){return new ou(s)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const s of of.paint.overridableProperties){if(!Fc.hasPaintOverride(this.layout,s))continue;const c=this.paint.get(s),y=new Jd(c),T=new qo(y,c.property.specification);let N=null;N=c.value.kind==="constant"||c.value.kind==="source"?new ns("source",T):new $n("composite",T,c.value.zoomStops),this.paint._values[s]=new ps(c.property,N,c.parameters)}}_handleOverridablePaintPropertyUpdate(s,c,y){return!(!this.layout||c.isDataDriven()||y.isDataDriven())&&Fc.hasPaintOverride(this.layout,s)}static hasPaintOverride(s,c){const y=s.get("text-field"),T=of.paint.properties[c];let N=!1;const V=X=>{for(const ae of X)if(T.overrides&&T.overrides.hasOverride(ae))return void(N=!0)};if(y.value.kind==="constant"&&y.value.value instanceof mt)V(y.value.value.sections);else if(y.value.kind==="source"){const X=_e=>{N||(_e instanceof it&&ht(_e.value)===Ae?V(_e.value.sections):_e instanceof js?V(_e.sections):_e.eachChild(X))},ae=y.value;ae._styleExpression&&X(ae._styleExpression.expression)}return N}}let ep;var r_={get paint(){return ep=ep||new Br({"background-color":new jt(Kt.paint_background["background-color"]),"background-pattern":new PA(Kt.paint_background["background-pattern"]),"background-opacity":new jt(Kt.paint_background["background-opacity"])})}};class s_ extends Ur{constructor(s){super(s,r_)}}let tp;var ip={get paint(){return tp=tp||new Br({"raster-opacity":new jt(Kt.paint_raster["raster-opacity"]),"raster-hue-rotate":new jt(Kt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new jt(Kt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new jt(Kt.paint_raster["raster-brightness-max"]),"raster-saturation":new jt(Kt.paint_raster["raster-saturation"]),"raster-contrast":new jt(Kt.paint_raster["raster-contrast"]),"raster-resampling":new jt(Kt.paint_raster["raster-resampling"]),"raster-fade-duration":new jt(Kt.paint_raster["raster-fade-duration"])})}};class a_ extends Ur{constructor(s){super(s,ip)}}class Oc extends Ur{constructor(s){super(s,{}),this.onAdd=c=>{this.implementation.onAdd&&this.implementation.onAdd(c,c.painter.context.gl)},this.onRemove=c=>{this.implementation.onRemove&&this.implementation.onRemove(c,c.painter.context.gl)},this.implementation=s}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class o_{constructor(s){this._callback=s,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const Af=63710088e-1;class Au{constructor(s,c){if(isNaN(s)||isNaN(c))throw new Error(`Invalid LngLat object: (${s}, ${c})`);if(this.lng=+s,this.lat=+c,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Au(Ai(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(s){const c=Math.PI/180,y=this.lat*c,T=s.lat*c,N=Math.sin(y)*Math.sin(T)+Math.cos(y)*Math.cos(T)*Math.cos((s.lng-this.lng)*c);return Af*Math.acos(Math.min(N,1))}static convert(s){if(s instanceof Au)return s;if(Array.isArray(s)&&(s.length===2||s.length===3))return new Au(Number(s[0]),Number(s[1]));if(!Array.isArray(s)&&typeof s=="object"&&s!==null)return new Au(Number("lng"in s?s.lng:s.lon),Number(s.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const np=2*Math.PI*Af;function rp(A){return np*Math.cos(A*Math.PI/180)}function sp(A){return(180+A)/360}function ap(A){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+A*Math.PI/360)))/360}function op(A,s){return A/rp(s)}function Ap(A){return 360*A-180}function lf(A){return 360/Math.PI*Math.atan(Math.exp((180-360*A)*Math.PI/180))-90}class Nc{constructor(s,c,y=0){this.x=+s,this.y=+c,this.z=+y}static fromLngLat(s,c=0){const y=Au.convert(s);return new Nc(sp(y.lng),ap(y.lat),op(c,y.lat))}toLngLat(){return new Au(Ap(this.x),lf(this.y))}toAltitude(){return this.z*rp(lf(this.y))}meterInMercatorCoordinateUnits(){return 1/np*(s=lf(this.y),1/Math.cos(s*Math.PI/180));var s}}function lp(A,s,c){var y=2*Math.PI*6378137/256/Math.pow(2,c);return[A*y-2*Math.PI*6378137/2,s*y-2*Math.PI*6378137/2]}class uf{constructor(s,c,y){if(s<0||s>25||y<0||y>=Math.pow(2,s)||c<0||c>=Math.pow(2,s))throw new Error(`x=${c}, y=${y}, z=${s} outside of bounds. 0<=x<${Math.pow(2,s)}, 0<=y<${Math.pow(2,s)} 0<=z<=25 `);this.z=s,this.x=c,this.y=y,this.key=Nh(0,s,s,c,y)}equals(s){return this.z===s.z&&this.x===s.x&&this.y===s.y}url(s,c,y){const T=(V=this.y,X=this.z,ae=lp(256*(N=this.x),256*(V=Math.pow(2,X)-V-1),X),_e=lp(256*(N+1),256*(V+1),X),ae[0]+","+ae[1]+","+_e[0]+","+_e[1]);var N,V,X,ae,_e;const Ee=function(ze,qe,et){let tt,ut="";for(let ft=ze;ft>0;ft--)tt=1<<ft-1,ut+=(qe&tt?1:0)+(et&tt?2:0);return ut}(this.z,this.x,this.y);return s[(this.x+this.y)%s.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(y==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,c>1?"@2x":"").replace(/{quadkey}/g,Ee).replace(/{bbox-epsg-3857}/g,T)}isChildOf(s){const c=this.z-s.z;return c>0&&s.x===this.x>>c&&s.y===this.y>>c}getTilePoint(s){const c=Math.pow(2,this.z);return new ce((s.x*c-this.x)*Qs,(s.y*c-this.y)*Qs)}toString(){return`${this.z}/${this.x}/${this.y}`}}class up{constructor(s,c){this.wrap=s,this.canonical=c,this.key=Nh(s,c.z,c.z,c.x,c.y)}}class fA{constructor(s,c,y,T,N){if(s<y)throw new Error(`overscaledZ should be >= z; overscaledZ = ${s}; z = ${y}`);this.overscaledZ=s,this.wrap=c,this.canonical=new uf(y,+T,+N),this.key=Nh(c,s,y,T,N)}clone(){return new fA(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(s){return this.overscaledZ===s.overscaledZ&&this.wrap===s.wrap&&this.canonical.equals(s.canonical)}scaledTo(s){if(s>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${s}; overscaledZ = ${this.overscaledZ}`);const c=this.canonical.z-s;return s>this.canonical.z?new fA(s,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new fA(s,this.wrap,s,this.canonical.x>>c,this.canonical.y>>c)}calculateScaledKey(s,c){if(s>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${s}; overscaledZ = ${this.overscaledZ}`);const y=this.canonical.z-s;return s>this.canonical.z?Nh(this.wrap*+c,s,this.canonical.z,this.canonical.x,this.canonical.y):Nh(this.wrap*+c,s,s,this.canonical.x>>y,this.canonical.y>>y)}isChildOf(s){if(s.wrap!==this.wrap)return!1;const c=this.canonical.z-s.canonical.z;return s.overscaledZ===0||s.overscaledZ<this.overscaledZ&&s.canonical.x===this.canonical.x>>c&&s.canonical.y===this.canonical.y>>c}children(s){if(this.overscaledZ>=s)return[new fA(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const c=this.canonical.z+1,y=2*this.canonical.x,T=2*this.canonical.y;return[new fA(c,this.wrap,c,y,T),new fA(c,this.wrap,c,y+1,T),new fA(c,this.wrap,c,y,T+1),new fA(c,this.wrap,c,y+1,T+1)]}isLessThan(s){return this.wrap<s.wrap||!(this.wrap>s.wrap)&&(this.overscaledZ<s.overscaledZ||!(this.overscaledZ>s.overscaledZ)&&(this.canonical.x<s.canonical.x||!(this.canonical.x>s.canonical.x)&&this.canonical.y<s.canonical.y))}wrapped(){return new fA(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(s){return new fA(this.overscaledZ,s,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new up(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(s){return this.canonical.getTilePoint(new Nc(s.x-this.wrap,s.y))}}function Nh(A,s,c,y,T){(A*=2)<0&&(A=-1*A-1);const N=1<<c;return(N*N*A+N*T+y).toString(36)+c.toString(36)+s.toString(36)}Zi("CanonicalTileID",uf),Zi("OverscaledTileID",fA,{omit:["posMatrix"]});class hf{constructor(s,c,y,T=1,N=1,V=1,X=0){if(this.uid=s,c.height!==c.width)throw new RangeError("DEM tiles must be square");if(y&&!["mapbox","terrarium","custom"].includes(y))return void vt(`"${y}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=c.height;const ae=this.dim=c.height-2;switch(this.data=new Uint32Array(c.data.buffer),y){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=T,this.greenFactor=N,this.blueFactor=V,this.baseShift=X;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let _e=0;_e<ae;_e++)this.data[this._idx(-1,_e)]=this.data[this._idx(0,_e)],this.data[this._idx(ae,_e)]=this.data[this._idx(ae-1,_e)],this.data[this._idx(_e,-1)]=this.data[this._idx(_e,0)],this.data[this._idx(_e,ae)]=this.data[this._idx(_e,ae-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(ae,-1)]=this.data[this._idx(ae-1,0)],this.data[this._idx(-1,ae)]=this.data[this._idx(0,ae-1)],this.data[this._idx(ae,ae)]=this.data[this._idx(ae-1,ae-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let _e=0;_e<ae;_e++)for(let Ee=0;Ee<ae;Ee++){const ze=this.get(_e,Ee);ze>this.max&&(this.max=ze),ze<this.min&&(this.min=ze)}}get(s,c){const y=new Uint8Array(this.data.buffer),T=4*this._idx(s,c);return this.unpack(y[T],y[T+1],y[T+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(s,c){if(s<-1||s>=this.dim+1||c<-1||c>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(c+1)*this.stride+(s+1)}unpack(s,c,y){return s*this.redFactor+c*this.greenFactor+y*this.blueFactor-this.baseShift}getPixels(){return new xo({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(s,c,y){if(this.dim!==s.dim)throw new Error("dem dimension mismatch");let T=c*this.dim,N=c*this.dim+this.dim,V=y*this.dim,X=y*this.dim+this.dim;switch(c){case-1:T=N-1;break;case 1:N=T+1}switch(y){case-1:V=X-1;break;case 1:X=V+1}const ae=-c*this.dim,_e=-y*this.dim;for(let Ee=V;Ee<X;Ee++)for(let ze=T;ze<N;ze++)this.data[this._idx(ze,Ee)]=s.data[this._idx(ze+ae,Ee+_e)]}}Zi("DEMData",hf);class cf{constructor(s){this._stringToNumber={},this._numberToString=[];for(let c=0;c<s.length;c++){const y=s[c];this._stringToNumber[y]=c,this._numberToString[c]=y}}encode(s){return this._stringToNumber[s]}decode(s){if(s>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${s} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[s]}}class hp{constructor(s,c,y,T,N){this.type="Feature",this._vectorTileFeature=s,s._z=c,s._x=y,s._y=T,this.properties=s.properties,this.id=N}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(s){this._geometry=s}toJSON(){const s={geometry:this.geometry};for(const c in this)c!=="_geometry"&&c!=="_vectorTileFeature"&&(s[c]=this[c]);return s}}class cp{constructor(s,c){this.tileID=s,this.x=s.canonical.x,this.y=s.canonical.y,this.z=s.canonical.z,this.grid=new ka(Qs,16,0),this.grid3D=new ka(Qs,16,0),this.featureIndexArray=new pt,this.promoteId=c}insert(s,c,y,T,N,V){const X=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(y,T,N);const ae=V?this.grid3D:this.grid;for(let _e=0;_e<c.length;_e++){const Ee=c[_e],ze=[1/0,1/0,-1/0,-1/0];for(let qe=0;qe<Ee.length;qe++){const et=Ee[qe];ze[0]=Math.min(ze[0],et.x),ze[1]=Math.min(ze[1],et.y),ze[2]=Math.max(ze[2],et.x),ze[3]=Math.max(ze[3],et.y)}ze[0]<Qs&&ze[1]<Qs&&ze[2]>=0&&ze[3]>=0&&ae.insert(X,ze[0],ze[1],ze[2],ze[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new nu.VectorTile(new $0(this.rawTileData)).layers,this.sourceLayerCoder=new cf(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(s,c,y,T){this.loadVTLayers();const N=s.params||{},V=Qs/s.tileSize/s.scale,X=sr(N.filter),ae=s.queryGeometry,_e=s.queryPadding*V,Ee=dp(ae),ze=this.grid.query(Ee.minX-_e,Ee.minY-_e,Ee.maxX+_e,Ee.maxY+_e),qe=dp(s.cameraQueryGeometry),et=this.grid3D.query(qe.minX-_e,qe.minY-_e,qe.maxX+_e,qe.maxY+_e,(ft,_t,Rt,Pt)=>function(Nt,Xt,_i,Wi,hn){for(const Ri of Nt)if(Xt<=Ri.x&&_i<=Ri.y&&Wi>=Ri.x&&hn>=Ri.y)return!0;const qi=[new ce(Xt,_i),new ce(Xt,hn),new ce(Wi,hn),new ce(Wi,_i)];if(Nt.length>2){for(const Ri of qi)if(xu(Nt,Ri))return!0}for(let Ri=0;Ri<Nt.length-1;Ri++)if(wm(Nt[Ri],Nt[Ri+1],qi))return!0;return!1}(s.cameraQueryGeometry,ft-_e,_t-_e,Rt+_e,Pt+_e));for(const ft of et)ze.push(ft);ze.sort(Vc);const tt={};let ut;for(let ft=0;ft<ze.length;ft++){const _t=ze[ft];if(_t===ut)continue;ut=_t;const Rt=this.featureIndexArray.get(_t);let Pt=null;this.loadMatchingFeature(tt,Rt.bucketIndex,Rt.sourceLayerIndex,Rt.featureIndex,X,N.layers,N.availableImages,c,y,T,(Nt,Xt,_i)=>(Pt||(Pt=yu(Nt)),Xt.queryIntersectsFeature(ae,Nt,_i,Pt,this.z,s.transform,V,s.pixelPosMatrix)))}return tt}loadMatchingFeature(s,c,y,T,N,V,X,ae,_e,Ee,ze){const qe=this.bucketLayerIDs[c];if(V&&!function(ft,_t){for(let Rt=0;Rt<ft.length;Rt++)if(_t.indexOf(ft[Rt])>=0)return!0;return!1}(V,qe))return;const et=this.sourceLayerCoder.decode(y),tt=this.vtLayers[et].feature(T);if(N.needGeometry){const ft=tu(tt,!0);if(!N.filter(new zr(this.tileID.overscaledZ),ft,this.tileID.canonical))return}else if(!N.filter(new zr(this.tileID.overscaledZ),tt))return;const ut=this.getId(tt,et);for(let ft=0;ft<qe.length;ft++){const _t=qe[ft];if(V&&V.indexOf(_t)<0)continue;const Rt=ae[_t];if(!Rt)continue;let Pt={};ut&&Ee&&(Pt=Ee.getState(Rt.sourceLayer||"_geojsonTileLayer",ut));const Nt=ii({},_e[_t]);Nt.paint=fp(Nt.paint,Rt.paint,tt,Pt,X),Nt.layout=fp(Nt.layout,Rt.layout,tt,Pt,X);const Xt=!ze||ze(tt,Rt,Pt);if(!Xt)continue;const _i=new hp(tt,this.z,this.x,this.y,ut);_i.layer=Nt;let Wi=s[_t];Wi===void 0&&(Wi=s[_t]=[]),Wi.push({featureIndex:T,feature:_i,intersectionZ:Xt})}}lookupSymbolFeatures(s,c,y,T,N,V,X,ae){const _e={};this.loadVTLayers();const Ee=sr(N);for(const ze of s)this.loadMatchingFeature(_e,y,T,ze,Ee,V,X,ae,c);return _e}hasLayer(s){for(const c of this.bucketLayerIDs)for(const y of c)if(s===y)return!0;return!1}getId(s,c){let y=s.id;return this.promoteId&&(y=s.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[c]],typeof y=="boolean"&&(y=Number(y))),y}}function fp(A,s,c,y,T){return gi(A,(N,V)=>{const X=s instanceof Xs?s.get(V):null;return X&&X.evaluate?X.evaluate(c,y,T):X})}function dp(A){let s=1/0,c=1/0,y=-1/0,T=-1/0;for(const N of A)s=Math.min(s,N.x),c=Math.min(c,N.y),y=Math.max(y,N.x),T=Math.max(T,N.y);return{minX:s,minY:c,maxX:y,maxY:T}}function Vc(A,s){return s-A}function pp(A,s,c,y,T){const N=[];for(let V=0;V<A.length;V++){const X=A[V];let ae;for(let _e=0;_e<X.length-1;_e++){let Ee=X[_e],ze=X[_e+1];Ee.x<s&&ze.x<s||(Ee.x<s?Ee=new ce(s,Ee.y+(s-Ee.x)/(ze.x-Ee.x)*(ze.y-Ee.y))._round():ze.x<s&&(ze=new ce(s,Ee.y+(s-Ee.x)/(ze.x-Ee.x)*(ze.y-Ee.y))._round()),Ee.y<c&&ze.y<c||(Ee.y<c?Ee=new ce(Ee.x+(c-Ee.y)/(ze.y-Ee.y)*(ze.x-Ee.x),c)._round():ze.y<c&&(ze=new ce(Ee.x+(c-Ee.y)/(ze.y-Ee.y)*(ze.x-Ee.x),c)._round()),Ee.x>=y&&ze.x>=y||(Ee.x>=y?Ee=new ce(y,Ee.y+(y-Ee.x)/(ze.x-Ee.x)*(ze.y-Ee.y))._round():ze.x>=y&&(ze=new ce(y,Ee.y+(y-Ee.x)/(ze.x-Ee.x)*(ze.y-Ee.y))._round()),Ee.y>=T&&ze.y>=T||(Ee.y>=T?Ee=new ce(Ee.x+(T-Ee.y)/(ze.y-Ee.y)*(ze.x-Ee.x),T)._round():ze.y>=T&&(ze=new ce(Ee.x+(T-Ee.y)/(ze.y-Ee.y)*(ze.x-Ee.x),T)._round()),ae&&Ee.equals(ae[ae.length-1])||(ae=[Ee],N.push(ae)),ae.push(ze)))))}}return N}Zi("FeatureIndex",cp,{omit:["rawTileData","sourceLayerCoder"]});class lu extends ce{constructor(s,c,y,T){super(s,c),this.angle=y,T!==void 0&&(this.segment=T)}clone(){return new lu(this.x,this.y,this.angle,this.segment)}}function gp(A,s,c,y,T){if(s.segment===void 0||c===0)return!0;let N=s,V=s.segment+1,X=0;for(;X>-c/2;){if(V--,V<0)return!1;X-=A[V].dist(N),N=A[V]}X+=A[V].dist(A[V+1]),V++;const ae=[];let _e=0;for(;X<c/2;){const Ee=A[V],ze=A[V+1];if(!ze)return!1;let qe=A[V-1].angleTo(Ee)-Ee.angleTo(ze);for(qe=Math.abs((qe+3*Math.PI)%(2*Math.PI)-Math.PI),ae.push({distance:X,angleDelta:qe}),_e+=qe;X-ae[0].distance>y;)_e-=ae.shift().angleDelta;if(_e>T)return!1;V++,X+=Ee.dist(ze)}return!0}function mp(A){let s=0;for(let c=0;c<A.length-1;c++)s+=A[c].dist(A[c+1]);return s}function _p(A,s,c){return A?.6*s*c:0}function vp(A,s){return Math.max(A?A.right-A.left:0,s?s.right-s.left:0)}function A_(A,s,c,y,T,N){const V=_p(c,T,N),X=vp(c,y)*N;let ae=0;const _e=mp(A)/2;for(let Ee=0;Ee<A.length-1;Ee++){const ze=A[Ee],qe=A[Ee+1],et=ze.dist(qe);if(ae+et>_e){const tt=(_e-ae)/et,ut=is.number(ze.x,qe.x,tt),ft=is.number(ze.y,qe.y,tt),_t=new lu(ut,ft,qe.angleTo(ze),Ee);return _t._round(),!V||gp(A,_t,X,V,s)?_t:void 0}ae+=et}}function l_(A,s,c,y,T,N,V,X,ae){const _e=_p(y,N,V),Ee=vp(y,T),ze=Ee*V,qe=A[0].x===0||A[0].x===ae||A[0].y===0||A[0].y===ae;return s-ze<s/4&&(s=ze+s/4),yp(A,qe?s/2*X%s:(Ee/2+2*N)*V*X%s,s,_e,c,ze,qe,!1,ae)}function yp(A,s,c,y,T,N,V,X,ae){const _e=N/2,Ee=mp(A);let ze=0,qe=s-c,et=[];for(let tt=0;tt<A.length-1;tt++){const ut=A[tt],ft=A[tt+1],_t=ut.dist(ft),Rt=ft.angleTo(ut);for(;qe+c<ze+_t;){qe+=c;const Pt=(qe-ze)/_t,Nt=is.number(ut.x,ft.x,Pt),Xt=is.number(ut.y,ft.y,Pt);if(Nt>=0&&Nt<ae&&Xt>=0&&Xt<ae&&qe-_e>=0&&qe+_e<=Ee){const _i=new lu(Nt,Xt,Rt,tt);_i._round(),y&&!gp(A,_i,N,y,T)||et.push(_i)}}ze+=_t}return X||et.length||V||(et=yp(A,ze/2,c,y,T,N,V,!0,ae)),et}Zi("Anchor",lu);const oh=Lo;function xp(A,s,c,y){const T=[],N=A.image,V=N.pixelRatio,X=N.paddedRect.w-2*oh,ae=N.paddedRect.h-2*oh,_e=A.right-A.left,Ee=A.bottom-A.top,ze=N.stretchX||[[0,X]],qe=N.stretchY||[[0,ae]],et=(Bi,nn)=>Bi+nn[1]-nn[0],tt=ze.reduce(et,0),ut=qe.reduce(et,0),ft=X-tt,_t=ae-ut;let Rt=0,Pt=tt,Nt=0,Xt=ut,_i=0,Wi=ft,hn=0,qi=_t;if(N.content&&y){const Bi=N.content;Rt=Pu(ze,0,Bi[0]),Nt=Pu(qe,0,Bi[1]),Pt=Pu(ze,Bi[0],Bi[2]),Xt=Pu(qe,Bi[1],Bi[3]),_i=Bi[0]-Rt,hn=Bi[1]-Nt,Wi=Bi[2]-Bi[0]-Pt,qi=Bi[3]-Bi[1]-Xt}const Ri=(Bi,nn,Fi,Ei)=>{const rn=Vh(Bi.stretch-Rt,Pt,_e,A.left),on=Uh(Bi.fixed-_i,Wi,Bi.stretch,tt),tr=Vh(nn.stretch-Nt,Xt,Ee,A.top),cs=Uh(nn.fixed-hn,qi,nn.stretch,ut),gs=Vh(Fi.stretch-Rt,Pt,_e,A.left),la=Uh(Fi.fixed-_i,Wi,Fi.stretch,tt),Wo=Vh(Ei.stretch-Nt,Xt,Ee,A.top),ro=Uh(Ei.fixed-hn,qi,Ei.stretch,ut),ss=new ce(rn,tr),In=new ce(gs,tr),Ia=new ce(gs,Wo),ms=new ce(rn,Wo),so=new ce(on/V,cs/V),ua=new ce(la/V,ro/V),Gn=s*Math.PI/180;if(Gn){const _a=Math.sin(Gn),zo=Math.cos(Gn),Ro=[zo,-_a,_a,zo];ss._matMult(Ro),In._matMult(Ro),ms._matMult(Ro),Ia._matMult(Ro)}const ao=Bi.stretch+Bi.fixed,oo=nn.stretch+nn.fixed;return{tl:ss,tr:In,bl:ms,br:Ia,tex:{x:N.paddedRect.x+oh+ao,y:N.paddedRect.y+oh+oo,w:Fi.stretch+Fi.fixed-ao,h:Ei.stretch+Ei.fixed-oo},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:so,pixelOffsetBR:ua,minFontScaleX:Wi/V/_e,minFontScaleY:qi/V/Ee,isSDF:c}};if(y&&(N.stretchX||N.stretchY)){const Bi=wp(ze,ft,tt),nn=wp(qe,_t,ut);for(let Fi=0;Fi<Bi.length-1;Fi++){const Ei=Bi[Fi],rn=Bi[Fi+1];for(let on=0;on<nn.length-1;on++)T.push(Ri(Ei,nn[on],rn,nn[on+1]))}}else T.push(Ri({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:X+1},{fixed:0,stretch:ae+1}));return T}function Pu(A,s,c){let y=0;for(const T of A)y+=Math.max(s,Math.min(c,T[1]))-Math.max(s,Math.min(c,T[0]));return y}function wp(A,s,c){const y=[{fixed:-oh,stretch:0}];for(const[T,N]of A){const V=y[y.length-1];y.push({fixed:T-V.stretch,stretch:V.stretch}),y.push({fixed:T-V.stretch,stretch:V.stretch+(N-T)})}return y.push({fixed:s+oh,stretch:c}),y}function Vh(A,s,c,y){return A/s*c+y}function Uh(A,s,c,y){return A-s*c/y}class Ah{constructor(s,c,y,T,N,V,X,ae,_e,Ee){if(this.boxStartIndex=s.length,_e){let ze=V.top,qe=V.bottom;const et=V.collisionPadding;et&&(ze-=et[1],qe+=et[3]);let tt=qe-ze;tt>0&&(tt=Math.max(10,tt),this.circleDiameter=tt)}else{let ze=V.top*X-ae[0],qe=V.bottom*X+ae[2],et=V.left*X-ae[3],tt=V.right*X+ae[1];const ut=V.collisionPadding;if(ut&&(et-=ut[0]*X,ze-=ut[1]*X,tt+=ut[2]*X,qe+=ut[3]*X),Ee){const ft=new ce(et,ze),_t=new ce(tt,ze),Rt=new ce(et,qe),Pt=new ce(tt,qe),Nt=Ee*Math.PI/180;ft._rotate(Nt),_t._rotate(Nt),Rt._rotate(Nt),Pt._rotate(Nt),et=Math.min(ft.x,_t.x,Rt.x,Pt.x),tt=Math.max(ft.x,_t.x,Rt.x,Pt.x),ze=Math.min(ft.y,_t.y,Rt.y,Pt.y),qe=Math.max(ft.y,_t.y,Rt.y,Pt.y)}s.emplaceBack(c.x,c.y,et,ze,tt,qe,y,T,N)}this.boxEndIndex=s.length}}class bp{constructor(s=[],c=Sp){if(this.data=s,this.length=this.data.length,this.compare=c,this.length>0)for(let y=(this.length>>1)-1;y>=0;y--)this._down(y)}push(s){this.data.push(s),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const s=this.data[0],c=this.data.pop();return this.length--,this.length>0&&(this.data[0]=c,this._down(0)),s}peek(){return this.data[0]}_up(s){const{data:c,compare:y}=this,T=c[s];for(;s>0;){const N=s-1>>1,V=c[N];if(y(T,V)>=0)break;c[s]=V,s=N}c[s]=T}_down(s){const{data:c,compare:y}=this,T=this.length>>1,N=c[s];for(;s<T;){let V=1+(s<<1),X=c[V];const ae=V+1;if(ae<this.length&&y(c[ae],X)<0&&(V=ae,X=c[ae]),y(X,N)>=0)break;c[s]=X,s=V}c[s]=N}}function Sp(A,s){return A<s?-1:A>s?1:0}function Cp(A,s=1,c=!1){let y=1/0,T=1/0,N=-1/0,V=-1/0;const X=A[0];for(let et=0;et<X.length;et++){const tt=X[et];(!et||tt.x<y)&&(y=tt.x),(!et||tt.y<T)&&(T=tt.y),(!et||tt.x>N)&&(N=tt.x),(!et||tt.y>V)&&(V=tt.y)}const ae=Math.min(N-y,V-T);let _e=ae/2;const Ee=new bp([],kp);if(ae===0)return new ce(y,T);for(let et=y;et<N;et+=ae)for(let tt=T;tt<V;tt+=ae)Ee.push(new lh(et+_e,tt+_e,_e,A));let ze=function(et){let tt=0,ut=0,ft=0;const _t=et[0];for(let Rt=0,Pt=_t.length,Nt=Pt-1;Rt<Pt;Nt=Rt++){const Xt=_t[Rt],_i=_t[Nt],Wi=Xt.x*_i.y-_i.x*Xt.y;ut+=(Xt.x+_i.x)*Wi,ft+=(Xt.y+_i.y)*Wi,tt+=3*Wi}return new lh(ut/tt,ft/tt,0,et)}(A),qe=Ee.length;for(;Ee.length;){const et=Ee.pop();(et.d>ze.d||!ze.d)&&(ze=et,c&&console.log("found best %d after %d probes",Math.round(1e4*et.d)/1e4,qe)),et.max-ze.d<=s||(_e=et.h/2,Ee.push(new lh(et.p.x-_e,et.p.y-_e,_e,A)),Ee.push(new lh(et.p.x+_e,et.p.y-_e,_e,A)),Ee.push(new lh(et.p.x-_e,et.p.y+_e,_e,A)),Ee.push(new lh(et.p.x+_e,et.p.y+_e,_e,A)),qe+=4)}return c&&(console.log(`num probes: ${qe}`),console.log(`best distance: ${ze.d}`)),ze.p}function kp(A,s){return s.max-A.max}function lh(A,s,c,y){this.p=new ce(A,s),this.h=c,this.d=function(T,N){let V=!1,X=1/0;for(let ae=0;ae<N.length;ae++){const _e=N[ae];for(let Ee=0,ze=_e.length,qe=ze-1;Ee<ze;qe=Ee++){const et=_e[Ee],tt=_e[qe];et.y>T.y!=tt.y>T.y&&T.x<(tt.x-et.x)*(T.y-et.y)/(tt.y-et.y)+et.x&&(V=!V),X=Math.min(X,k0(T,et,tt))}}return(V?1:-1)*Math.sqrt(X)}(this.p,y),this.max=this.d+this.h*Math.SQRT2}var Za;u.aq=void 0,(Za=u.aq||(u.aq={}))[Za.center=1]="center",Za[Za.left=2]="left",Za[Za.right=3]="right",Za[Za.top=4]="top",Za[Za.bottom=5]="bottom",Za[Za["top-left"]=6]="top-left",Za[Za["top-right"]=7]="top-right",Za[Za["bottom-left"]=8]="bottom-left",Za[Za["bottom-right"]=9]="bottom-right";const uu=7,uh=Number.POSITIVE_INFINITY;function Gh(A,s){return s[1]!==uh?function(c,y,T){let N=0,V=0;switch(y=Math.abs(y),T=Math.abs(T),c){case"top-right":case"top-left":case"top":V=T-uu;break;case"bottom-right":case"bottom-left":case"bottom":V=-T+uu}switch(c){case"top-right":case"bottom-right":case"right":N=-y;break;case"top-left":case"bottom-left":case"left":N=y}return[N,V]}(A,s[0],s[1]):function(c,y){let T=0,N=0;y<0&&(y=0);const V=y/Math.SQRT2;switch(c){case"top-right":case"top-left":N=V-uu;break;case"bottom-right":case"bottom-left":N=-V+uu;break;case"bottom":N=-y+uu;break;case"top":N=y-uu}switch(c){case"top-right":case"bottom-right":T=-V;break;case"top-left":case"bottom-left":T=V;break;case"left":T=y;break;case"right":T=-y}return[T,N]}(A,s[0])}function Ep(A,s,c){var y;const T=A.layout,N=(y=T.get("text-variable-anchor-offset"))===null||y===void 0?void 0:y.evaluate(s,{},c);if(N){const X=N.values,ae=[];for(let _e=0;_e<X.length;_e+=2){const Ee=ae[_e]=X[_e],ze=X[_e+1].map(qe=>qe*Js);Ee.startsWith("top")?ze[1]-=uu:Ee.startsWith("bottom")&&(ze[1]+=uu),ae[_e+1]=ze}return new Ni(ae)}const V=T.get("text-variable-anchor");if(V){let X;X=A._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[T.get("text-radial-offset").evaluate(s,{},c)*Js,uh]:T.get("text-offset").evaluate(s,{},c).map(_e=>_e*Js);const ae=[];for(const _e of V)ae.push(_e,Gh(_e,X));return new Ni(ae)}return null}function ff(A){switch(A){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function df(A,s,c,y,T,N,V,X,ae,_e,Ee){let ze=N.textMaxSize.evaluate(s,{});ze===void 0&&(ze=V);const qe=A.layers[0].layout,et=qe.get("icon-offset").evaluate(s,{},Ee),tt=Ip(c.horizontal),ut=V/24,ft=A.tilePixelRatio*ut,_t=A.tilePixelRatio*ze/24,Rt=A.tilePixelRatio*X,Pt=A.tilePixelRatio*qe.get("symbol-spacing"),Nt=qe.get("text-padding")*A.tilePixelRatio,Xt=function(Ei,rn,on,tr=1){const cs=Ei.get("icon-padding").evaluate(rn,{},on),gs=cs&&cs.values;return[gs[0]*tr,gs[1]*tr,gs[2]*tr,gs[3]*tr]}(qe,s,Ee,A.tilePixelRatio),_i=qe.get("text-max-angle")/180*Math.PI,Wi=qe.get("text-rotation-alignment")!=="viewport"&&qe.get("symbol-placement")!=="point",hn=qe.get("icon-rotation-alignment")==="map"&&qe.get("symbol-placement")!=="point",qi=qe.get("symbol-placement"),Ri=Pt/2,Bi=qe.get("icon-text-fit");let nn;y&&Bi!=="none"&&(A.allowVerticalPlacement&&c.vertical&&(nn=$d(y,c.vertical,Bi,qe.get("icon-text-fit-padding"),et,ut)),tt&&(y=$d(y,tt,Bi,qe.get("icon-text-fit-padding"),et,ut)));const Fi=(Ei,rn)=>{rn.x<0||rn.x>=Qs||rn.y<0||rn.y>=Qs||function(on,tr,cs,gs,la,Wo,ro,ss,In,Ia,ms,so,ua,Gn,ao,oo,_a,zo,Ro,ha,hr,Ao,ja,ca,RA){const il=on.addToLineVertexArray(tr,cs);let nl,Vl,FA,pA,lo=0,Ul=0,Du=0,Bp=0,wf=-1,bf=-1;const Ss={};let Fo=qa("");if(on.allowVerticalPlacement&&gs.vertical){const uo=ss.layout.get("text-rotate").evaluate(hr,{},ca)+90;FA=new Ah(In,tr,Ia,ms,so,gs.vertical,ua,Gn,ao,uo),ro&&(pA=new Ah(In,tr,Ia,ms,so,ro,_a,zo,ao,uo))}if(la){const uo=ss.layout.get("icon-rotate").evaluate(hr,{}),gA=ss.layout.get("icon-text-fit")!=="none",OA=xp(la,uo,ja,gA),sl=ro?xp(ro,uo,ja,gA):void 0;Vl=new Ah(In,tr,Ia,ms,so,la,_a,zo,!1,uo),lo=4*OA.length;const Lu=on.iconSizeData;let wl=null;Lu.kind==="source"?(wl=[xl*ss.layout.get("icon-size").evaluate(hr,{})],wl[0]>au&&vt(`${on.layerIds[0]}: Value for "icon-size" is >= ${Oh}. Reduce your "icon-size".`)):Lu.kind==="composite"&&(wl=[xl*Ao.compositeIconSizes[0].evaluate(hr,{},ca),xl*Ao.compositeIconSizes[1].evaluate(hr,{},ca)],(wl[0]>au||wl[1]>au)&&vt(`${on.layerIds[0]}: Value for "icon-size" is >= ${Oh}. Reduce your "icon-size".`)),on.addSymbols(on.icon,OA,wl,ha,Ro,hr,u.ai.none,tr,il.lineStartIndex,il.lineLength,-1,ca),wf=on.icon.placedSymbolArray.length-1,sl&&(Ul=4*sl.length,on.addSymbols(on.icon,sl,wl,ha,Ro,hr,u.ai.vertical,tr,il.lineStartIndex,il.lineLength,-1,ca),bf=on.icon.placedSymbolArray.length-1)}const Dp=Object.keys(gs.horizontal);for(const uo of Dp){const gA=gs.horizontal[uo];if(!nl){Fo=qa(gA.text);const sl=ss.layout.get("text-rotate").evaluate(hr,{},ca);nl=new Ah(In,tr,Ia,ms,so,gA,ua,Gn,ao,sl)}const OA=gA.positionedLines.length===1;if(Du+=pf(on,tr,gA,Wo,ss,ao,hr,oo,il,gs.vertical?u.ai.horizontal:u.ai.horizontalOnly,OA?Dp:[uo],Ss,wf,Ao,ca),OA)break}gs.vertical&&(Bp+=pf(on,tr,gs.vertical,Wo,ss,ao,hr,oo,il,u.ai.vertical,["vertical"],Ss,bf,Ao,ca));const h_=nl?nl.boxStartIndex:on.collisionBoxArray.length,c_=nl?nl.boxEndIndex:on.collisionBoxArray.length,Lp=FA?FA.boxStartIndex:on.collisionBoxArray.length,f_=FA?FA.boxEndIndex:on.collisionBoxArray.length,d_=Vl?Vl.boxStartIndex:on.collisionBoxArray.length,p_=Vl?Vl.boxEndIndex:on.collisionBoxArray.length,zp=pA?pA.boxStartIndex:on.collisionBoxArray.length,g_=pA?pA.boxEndIndex:on.collisionBoxArray.length;let rl=-1;const Gc=(uo,gA)=>uo&&uo.circleDiameter?Math.max(uo.circleDiameter,gA):gA;rl=Gc(nl,rl),rl=Gc(FA,rl),rl=Gc(Vl,rl),rl=Gc(pA,rl);const Sf=rl>-1?1:0;Sf&&(rl*=RA/Js),on.glyphOffsetArray.length>=ou.MAX_GLYPHS&&vt("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),hr.sortKey!==void 0&&on.addToSortKeyRanges(on.symbolInstances.length,hr.sortKey);const Rp=Ep(ss,hr,ca),[m_,__]=function(uo,gA){const OA=uo.length,sl=gA==null?void 0:gA.values;if((sl==null?void 0:sl.length)>0)for(let Lu=0;Lu<sl.length;Lu+=2){const wl=sl[Lu+1];uo.emplaceBack(u.aq[sl[Lu]],wl[0],wl[1])}return[OA,uo.length]}(on.textAnchorOffsets,Rp);on.symbolInstances.emplaceBack(tr.x,tr.y,Ss.right>=0?Ss.right:-1,Ss.center>=0?Ss.center:-1,Ss.left>=0?Ss.left:-1,Ss.vertical||-1,wf,bf,Fo,h_,c_,Lp,f_,d_,p_,zp,g_,Ia,Du,Bp,lo,Ul,Sf,0,ua,rl,m_,__)}(A,rn,Ei,c,y,T,nn,A.layers[0],A.collisionBoxArray,s.index,s.sourceLayerIndex,A.index,ft,[Nt,Nt,Nt,Nt],Wi,ae,Rt,Xt,hn,et,s,N,_e,Ee,V)};if(qi==="line")for(const Ei of pp(s.geometry,0,0,Qs,Qs)){const rn=l_(Ei,Pt,_i,c.vertical||tt,y,24,_t,A.overscaling,Qs);for(const on of rn)tt&&u_(A,tt.text,Ri,on)||Fi(Ei,on)}else if(qi==="line-center"){for(const Ei of s.geometry)if(Ei.length>1){const rn=A_(Ei,_i,c.vertical||tt,y,24,_t);rn&&Fi(Ei,rn)}}else if(s.type==="Polygon")for(const Ei of R0(s.geometry,0)){const rn=Cp(Ei,16);Fi(Ei[0],new lu(rn.x,rn.y,0))}else if(s.type==="LineString")for(const Ei of s.geometry)Fi(Ei,new lu(Ei[0].x,Ei[0].y,0));else if(s.type==="Point")for(const Ei of s.geometry)for(const rn of Ei)Fi([rn],new lu(rn.x,rn.y,0))}function pf(A,s,c,y,T,N,V,X,ae,_e,Ee,ze,qe,et,tt){const ut=function(Rt,Pt,Nt,Xt,_i,Wi,hn,qi){const Ri=Xt.layout.get("text-rotate").evaluate(Wi,{})*Math.PI/180,Bi=[];for(const nn of Pt.positionedLines)for(const Fi of nn.positionedGlyphs){if(!Fi.rect)continue;const Ei=Fi.rect||{};let rn=Hd+1,on=!0,tr=1,cs=0;const gs=(_i||qi)&&Fi.vertical,la=Fi.metrics.advance*Fi.scale/2;if(qi&&Pt.verticalizable&&(cs=nn.lineOffset/2-(Fi.imageName?-(Js-Fi.metrics.width*Fi.scale)/2:(Fi.scale-1)*Js)),Fi.imageName){const ha=hn[Fi.imageName];on=ha.sdf,tr=ha.pixelRatio,rn=Lo/tr}const Wo=_i?[Fi.x+la,Fi.y]:[0,0];let ro=_i?[0,0]:[Fi.x+la+Nt[0],Fi.y+Nt[1]-cs],ss=[0,0];gs&&(ss=ro,ro=[0,0]);const In=Fi.metrics.isDoubleResolution?2:1,Ia=(Fi.metrics.left-rn)*Fi.scale-la+ro[0],ms=(-Fi.metrics.top-rn)*Fi.scale+ro[1],so=Ia+Ei.w/In*Fi.scale/tr,ua=ms+Ei.h/In*Fi.scale/tr,Gn=new ce(Ia,ms),ao=new ce(so,ms),oo=new ce(Ia,ua),_a=new ce(so,ua);if(gs){const ha=new ce(-la,la-Rh),hr=-Math.PI/2,Ao=Js/2-la,ja=new ce(5-Rh-Ao,-(Fi.imageName?Ao:0)),ca=new ce(...ss);Gn._rotateAround(hr,ha)._add(ja)._add(ca),ao._rotateAround(hr,ha)._add(ja)._add(ca),oo._rotateAround(hr,ha)._add(ja)._add(ca),_a._rotateAround(hr,ha)._add(ja)._add(ca)}if(Ri){const ha=Math.sin(Ri),hr=Math.cos(Ri),Ao=[hr,-ha,ha,hr];Gn._matMult(Ao),ao._matMult(Ao),oo._matMult(Ao),_a._matMult(Ao)}const zo=new ce(0,0),Ro=new ce(0,0);Bi.push({tl:Gn,tr:ao,bl:oo,br:_a,tex:Ei,writingMode:Pt.writingMode,glyphOffset:Wo,sectionIndex:Fi.sectionIndex,isSDF:on,pixelOffsetTL:zo,pixelOffsetBR:Ro,minFontScaleX:0,minFontScaleY:0})}return Bi}(0,c,X,T,N,V,y,A.allowVerticalPlacement),ft=A.textSizeData;let _t=null;ft.kind==="source"?(_t=[xl*T.layout.get("text-size").evaluate(V,{})],_t[0]>au&&vt(`${A.layerIds[0]}: Value for "text-size" is >= ${Oh}. Reduce your "text-size".`)):ft.kind==="composite"&&(_t=[xl*et.compositeTextSizes[0].evaluate(V,{},tt),xl*et.compositeTextSizes[1].evaluate(V,{},tt)],(_t[0]>au||_t[1]>au)&&vt(`${A.layerIds[0]}: Value for "text-size" is >= ${Oh}. Reduce your "text-size".`)),A.addSymbols(A.text,ut,_t,X,N,V,_e,s,ae.lineStartIndex,ae.lineLength,qe,tt);for(const Rt of Ee)ze[Rt]=A.text.placedSymbolArray.length-1;return 4*ut.length}function Ip(A){for(const s in A)return A[s];return null}function u_(A,s,c,y){const T=A.compareText;if(s in T){const N=T[s];for(let V=N.length-1;V>=0;V--)if(y.dist(N[V])<c)return!0}else T[s]=[];return T[s].push(y),!1}const Mp=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class gf{static from(s){if(!(s instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[c,y]=new Uint8Array(s,0,2);if(c!==219)throw new Error("Data does not appear to be in a KDBush format.");const T=y>>4;if(T!==1)throw new Error(`Got v${T} data when expected v1.`);const N=Mp[15&y];if(!N)throw new Error("Unrecognized array type.");const[V]=new Uint16Array(s,2,1),[X]=new Uint32Array(s,4,1);return new gf(X,V,N,s)}constructor(s,c=64,y=Float64Array,T){if(isNaN(s)||s<0)throw new Error(`Unpexpected numItems value: ${s}.`);this.numItems=+s,this.nodeSize=Math.min(Math.max(+c,2),65535),this.ArrayType=y,this.IndexArrayType=s<65536?Uint16Array:Uint32Array;const N=Mp.indexOf(this.ArrayType),V=2*s*this.ArrayType.BYTES_PER_ELEMENT,X=s*this.IndexArrayType.BYTES_PER_ELEMENT,ae=(8-X%8)%8;if(N<0)throw new Error(`Unexpected typed array class: ${y}.`);T&&T instanceof ArrayBuffer?(this.data=T,this.ids=new this.IndexArrayType(this.data,8,s),this.coords=new this.ArrayType(this.data,8+X+ae,2*s),this._pos=2*s,this._finished=!0):(this.data=new ArrayBuffer(8+V+X+ae),this.ids=new this.IndexArrayType(this.data,8,s),this.coords=new this.ArrayType(this.data,8+X+ae,2*s),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+N]),new Uint16Array(this.data,2,1)[0]=c,new Uint32Array(this.data,4,1)[0]=s)}add(s,c){const y=this._pos>>1;return this.ids[y]=y,this.coords[this._pos++]=s,this.coords[this._pos++]=c,y}finish(){const s=this._pos>>1;if(s!==this.numItems)throw new Error(`Added ${s} items when expected ${this.numItems}.`);return mf(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(s,c,y,T){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:N,coords:V,nodeSize:X}=this,ae=[0,N.length-1,0],_e=[];for(;ae.length;){const Ee=ae.pop()||0,ze=ae.pop()||0,qe=ae.pop()||0;if(ze-qe<=X){for(let ft=qe;ft<=ze;ft++){const _t=V[2*ft],Rt=V[2*ft+1];_t>=s&&_t<=y&&Rt>=c&&Rt<=T&&_e.push(N[ft])}continue}const et=qe+ze>>1,tt=V[2*et],ut=V[2*et+1];tt>=s&&tt<=y&&ut>=c&&ut<=T&&_e.push(N[et]),(Ee===0?s<=tt:c<=ut)&&(ae.push(qe),ae.push(et-1),ae.push(1-Ee)),(Ee===0?y>=tt:T>=ut)&&(ae.push(et+1),ae.push(ze),ae.push(1-Ee))}return _e}within(s,c,y){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:T,coords:N,nodeSize:V}=this,X=[0,T.length-1,0],ae=[],_e=y*y;for(;X.length;){const Ee=X.pop()||0,ze=X.pop()||0,qe=X.pop()||0;if(ze-qe<=V){for(let ft=qe;ft<=ze;ft++)Pp(N[2*ft],N[2*ft+1],s,c)<=_e&&ae.push(T[ft]);continue}const et=qe+ze>>1,tt=N[2*et],ut=N[2*et+1];Pp(tt,ut,s,c)<=_e&&ae.push(T[et]),(Ee===0?s-y<=tt:c-y<=ut)&&(X.push(qe),X.push(et-1),X.push(1-Ee)),(Ee===0?s+y>=tt:c+y>=ut)&&(X.push(et+1),X.push(ze),X.push(1-Ee))}return ae}}function mf(A,s,c,y,T,N){if(T-y<=c)return;const V=y+T>>1;Tp(A,s,V,y,T,N),mf(A,s,c,y,V-1,1-N),mf(A,s,c,V+1,T,1-N)}function Tp(A,s,c,y,T,N){for(;T>y;){if(T-y>600){const _e=T-y+1,Ee=c-y+1,ze=Math.log(_e),qe=.5*Math.exp(2*ze/3),et=.5*Math.sqrt(ze*qe*(_e-qe)/_e)*(Ee-_e/2<0?-1:1);Tp(A,s,c,Math.max(y,Math.floor(c-Ee*qe/_e+et)),Math.min(T,Math.floor(c+(_e-Ee)*qe/_e+et)),N)}const V=s[2*c+N];let X=y,ae=T;for(Qh(A,s,y,c),s[2*T+N]>V&&Qh(A,s,y,T);X<ae;){for(Qh(A,s,X,ae),X++,ae--;s[2*X+N]<V;)X++;for(;s[2*ae+N]>V;)ae--}s[2*y+N]===V?Qh(A,s,y,ae):(ae++,Qh(A,s,ae,T)),ae<=c&&(y=ae+1),c<=ae&&(T=ae-1)}}function Qh(A,s,c,y){_f(A,c,y),_f(s,2*c,2*y),_f(s,2*c+1,2*y+1)}function _f(A,s,c){const y=A[s];A[s]=A[c],A[c]=y}function Pp(A,s,c,y){const T=A-c,N=s-y;return T*T+N*N}var vf;u.bh=void 0,(vf=u.bh||(u.bh={})).create="create",vf.load="load",vf.fullLoad="fullLoad";let Uc=null,qh=[];const dA=1e3/60,yf="loadTime",xf="fullLoadTime",Bu={mark(A){performance.mark(A)},frame(A){const s=A;Uc!=null&&qh.push(s-Uc),Uc=s},clearMetrics(){Uc=null,qh=[],performance.clearMeasures(yf),performance.clearMeasures(xf);for(const A in u.bh)performance.clearMarks(u.bh[A])},getPerformanceMetrics(){performance.measure(yf,u.bh.create,u.bh.load),performance.measure(xf,u.bh.create,u.bh.fullLoad);const A=performance.getEntriesByName(yf)[0].duration,s=performance.getEntriesByName(xf)[0].duration,c=qh.length,y=1/(qh.reduce((N,V)=>N+V,0)/c/1e3),T=qh.filter(N=>N>dA).reduce((N,V)=>N+(V-dA)/dA,0);return{loadTime:A,fullLoadTime:s,fps:y,percentDroppedFrames:T/(c+T)*100,totalFrames:c}}};u.$=function(A,s,c){var y,T,N,V,X,ae,_e,Ee,ze,qe,et,tt,ut=c[0],ft=c[1],_t=c[2];return s===A?(A[12]=s[0]*ut+s[4]*ft+s[8]*_t+s[12],A[13]=s[1]*ut+s[5]*ft+s[9]*_t+s[13],A[14]=s[2]*ut+s[6]*ft+s[10]*_t+s[14],A[15]=s[3]*ut+s[7]*ft+s[11]*_t+s[15]):(T=s[1],N=s[2],V=s[3],X=s[4],ae=s[5],_e=s[6],Ee=s[7],ze=s[8],qe=s[9],et=s[10],tt=s[11],A[0]=y=s[0],A[1]=T,A[2]=N,A[3]=V,A[4]=X,A[5]=ae,A[6]=_e,A[7]=Ee,A[8]=ze,A[9]=qe,A[10]=et,A[11]=tt,A[12]=y*ut+X*ft+ze*_t+s[12],A[13]=T*ut+ae*ft+qe*_t+s[13],A[14]=N*ut+_e*ft+et*_t+s[14],A[15]=V*ut+Ee*ft+tt*_t+s[15]),A},u.A=Ku,u.B=is,u.C=class{constructor(A,s,c){this.receive=y=>{const T=y.data,N=T.id;if(N&&(!T.targetMapId||this.mapId===T.targetMapId))if(T.type==="<cancel>"){delete this.tasks[N];const V=this.cancelCallbacks[N];delete this.cancelCallbacks[N],V&&V()}else Ft()||T.mustQueue?(this.tasks[N]=T,this.taskQueue.push(N),this.invoker.trigger()):this.processTask(N,T)},this.process=()=>{if(!this.taskQueue.length)return;const y=this.taskQueue.shift(),T=this.tasks[y];delete this.tasks[y],this.taskQueue.length&&this.invoker.trigger(),T&&this.processTask(y,T)},this.target=A,this.parent=s,this.mapId=c,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},this.invoker=new o_(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=Ft()?A:window}send(A,s,c,y,T=!1){const N=Math.round(1e18*Math.random()).toString(36).substring(0,10);c&&(this.callbacks[N]=c);const V=[],X={id:N,type:A,hasCallback:!!c,targetMapId:y,mustQueue:T,sourceMapId:this.mapId,data:Ua(s,V)};return this.target.postMessage(X,{transfer:V}),{cancel:()=>{c&&delete this.callbacks[N],this.target.postMessage({id:N,type:"<cancel>",targetMapId:y,sourceMapId:this.mapId})}}}processTask(A,s){if(s.type==="<response>"){const c=this.callbacks[A];delete this.callbacks[A],c&&(s.error?c(Ea(s.error)):c(null,Ea(s.data)))}else{let c=!1;const y=[],T=s.hasCallback?(X,ae)=>{c=!0,delete this.cancelCallbacks[A];const _e={id:A,type:"<response>",sourceMapId:this.mapId,error:X?Ua(X):null,data:Ua(ae,y)};this.target.postMessage(_e,{transfer:y})}:X=>{c=!0};let N=null;const V=Ea(s.data);if(this.parent[s.type])N=this.parent[s.type](s.sourceMapId,V,T);else if("getWorkerSource"in this.parent){const X=s.type.split(".");N=this.parent.getWorkerSource(s.sourceMapId,X[0],V.source)[X[1]](V,T)}else T(new Error(`Could not find function ${s.type}`));!c&&N&&N.cancel&&(this.cancelCallbacks[A]=N.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},u.D=jt,u.E=Cs,u.F=function(A,s){const c={};for(let y=0;y<s.length;y++){const T=s[y];T in A&&(c[T]=A[T])}return c},u.G=sp,u.H=ap,u.I=K0,u.J=xt,u.K=gt,u.L=Au,u.M=oi,u.N=Qs,u.O=fA,u.P=ce,u.Q=C,u.R=xo,u.S=Mr,u.T=Ga,u.U=Nc,u.V=class extends ne{},u.W=uf,u.X=function(A,s){const c=window.document.createElement("video");c.muted=!0,c.onloadstart=function(){s(null,c)};for(let y=0;y<A.length;y++){const T=window.document.createElement("source");kn(A[y])||(c.crossOrigin="Anonymous"),T.src=A[y],c.appendChild(T)}return{cancel:()=>{}}},u.Y=se,u.Z=function(){var A=new Ku(16);return Ku!=Float32Array&&(A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[11]=0,A[12]=0,A[13]=0,A[14]=0),A[0]=1,A[5]=1,A[10]=1,A[15]=1,A},u._=Q,u.a=Lt,u.a$=class extends E{},u.a0=function(A,s,c){var y=c[0],T=c[1],N=c[2];return A[0]=s[0]*y,A[1]=s[1]*y,A[2]=s[2]*y,A[3]=s[3]*y,A[4]=s[4]*T,A[5]=s[5]*T,A[6]=s[6]*T,A[7]=s[7]*T,A[8]=s[8]*N,A[9]=s[9]*N,A[10]=s[10]*N,A[11]=s[11]*N,A[12]=s[12],A[13]=s[13],A[14]=s[14],A[15]=s[15],A},u.a1=E0,u.a2=function(){return xi++},u.a3=Y,u.a4=ou,u.a5=function(){Vr.isLoading()||Vr.isLoaded()||gl()!=="deferred"||Xn()},u.a6=sr,u.a7=tu,u.a8=zr,u.a9=hp,u.aA=MA,u.aB=function(A){A=A.slice();const s=Object.create(null);for(let c=0;c<A.length;c++)s[A[c].id]=A[c];for(let c=0;c<A.length;c++)"ref"in A[c]&&(A[c]=fr(A[c],s[A[c].ref]));return A},u.aC=function(A){if(A.type==="custom")return new Oc(A);switch(A.type){case"background":return new s_(A);case"circle":return new Sm(A);case"fill":return new Td(A);case"fill-extrusion":return new Dd(A);case"heatmap":return new T0(A);case"hillshade":return new D0(A);case"line":return new Nm(A);case"raster":return new a_(A);case"symbol":return new Fc(A)}},u.aD=di,u.aE=function(A,s){if(!A)return[{command:Dn.setStyle,args:[s]}];let c=[];try{if(!vn(A.version,s.version))return[{command:Dn.setStyle,args:[s]}];vn(A.center,s.center)||c.push({command:Dn.setCenter,args:[s.center]}),vn(A.zoom,s.zoom)||c.push({command:Dn.setZoom,args:[s.zoom]}),vn(A.bearing,s.bearing)||c.push({command:Dn.setBearing,args:[s.bearing]}),vn(A.pitch,s.pitch)||c.push({command:Dn.setPitch,args:[s.pitch]}),vn(A.sprite,s.sprite)||c.push({command:Dn.setSprite,args:[s.sprite]}),vn(A.glyphs,s.glyphs)||c.push({command:Dn.setGlyphs,args:[s.glyphs]}),vn(A.transition,s.transition)||c.push({command:Dn.setTransition,args:[s.transition]}),vn(A.light,s.light)||c.push({command:Dn.setLight,args:[s.light]});const y={},T=[];(function(V,X,ae,_e){let Ee;for(Ee in X=X||{},V=V||{})Object.prototype.hasOwnProperty.call(V,Ee)&&(Object.prototype.hasOwnProperty.call(X,Ee)||f(Ee,ae,_e));for(Ee in X)Object.prototype.hasOwnProperty.call(X,Ee)&&(Object.prototype.hasOwnProperty.call(V,Ee)?vn(V[Ee],X[Ee])||(V[Ee].type==="geojson"&&X[Ee].type==="geojson"&&B(V,X,Ee)?ae.push({command:Dn.setGeoJSONSourceData,args:[Ee,X[Ee].data]}):w(Ee,X,ae,_e)):pn(Ee,X,ae))})(A.sources,s.sources,T,y);const N=[];A.layers&&A.layers.forEach(V=>{y[V.source]?c.push({command:Dn.removeLayer,args:[V.id]}):N.push(V)}),c=c.concat(T),function(V,X,ae){X=X||[];const _e=(V=V||[]).map(Z),Ee=X.map(Z),ze=V.reduce(K,{}),qe=X.reduce(K,{}),et=_e.slice(),tt=Object.create(null);let ut,ft,_t,Rt,Pt,Nt,Xt;for(ut=0,ft=0;ut<_e.length;ut++)_t=_e[ut],Object.prototype.hasOwnProperty.call(qe,_t)?ft++:(ae.push({command:Dn.removeLayer,args:[_t]}),et.splice(et.indexOf(_t,ft),1));for(ut=0,ft=0;ut<Ee.length;ut++)_t=Ee[Ee.length-1-ut],et[et.length-1-ut]!==_t&&(Object.prototype.hasOwnProperty.call(ze,_t)?(ae.push({command:Dn.removeLayer,args:[_t]}),et.splice(et.lastIndexOf(_t,et.length-ft),1)):ft++,Nt=et[et.length-ut],ae.push({command:Dn.addLayer,args:[qe[_t],Nt]}),et.splice(et.length-ut,0,_t),tt[_t]=!0);for(ut=0;ut<Ee.length;ut++)if(_t=Ee[ut],Rt=ze[_t],Pt=qe[_t],!tt[_t]&&!vn(Rt,Pt))if(vn(Rt.source,Pt.source)&&vn(Rt["source-layer"],Pt["source-layer"])&&vn(Rt.type,Pt.type)){for(Xt in U(Rt.layout,Pt.layout,ae,_t,null,Dn.setLayoutProperty),U(Rt.paint,Pt.paint,ae,_t,null,Dn.setPaintProperty),vn(Rt.filter,Pt.filter)||ae.push({command:Dn.setFilter,args:[_t,Pt.filter]}),vn(Rt.minzoom,Pt.minzoom)&&vn(Rt.maxzoom,Pt.maxzoom)||ae.push({command:Dn.setLayerZoomRange,args:[_t,Pt.minzoom,Pt.maxzoom]}),Rt)Object.prototype.hasOwnProperty.call(Rt,Xt)&&Xt!=="layout"&&Xt!=="paint"&&Xt!=="filter"&&Xt!=="metadata"&&Xt!=="minzoom"&&Xt!=="maxzoom"&&(Xt.indexOf("paint.")===0?U(Rt[Xt],Pt[Xt],ae,_t,Xt.slice(6),Dn.setPaintProperty):vn(Rt[Xt],Pt[Xt])||ae.push({command:Dn.setLayerProperty,args:[_t,Xt,Pt[Xt]]}));for(Xt in Pt)Object.prototype.hasOwnProperty.call(Pt,Xt)&&!Object.prototype.hasOwnProperty.call(Rt,Xt)&&Xt!=="layout"&&Xt!=="paint"&&Xt!=="filter"&&Xt!=="metadata"&&Xt!=="minzoom"&&Xt!=="maxzoom"&&(Xt.indexOf("paint.")===0?U(Rt[Xt],Pt[Xt],ae,_t,Xt.slice(6),Dn.setPaintProperty):vn(Rt[Xt],Pt[Xt])||ae.push({command:Dn.setLayerProperty,args:[_t,Xt,Pt[Xt]]}))}else ae.push({command:Dn.removeLayer,args:[_t]}),Nt=et[et.lastIndexOf(_t)+1],ae.push({command:Dn.addLayer,args:[Pt,Nt]})}(N,s.layers,c)}catch(y){console.warn("Unable to compute style diff:",y),c=[{command:Dn.setStyle,args:[s]}]}return c},u.aF=function(A){const s=[],c=A.id;return c===void 0&&s.push({message:`layers.${c}: missing required property "id"`}),A.render===void 0&&s.push({message:`layers.${c}: missing required method "render"`}),A.renderingMode&&A.renderingMode!=="2d"&&A.renderingMode!=="3d"&&s.push({message:`layers.${c}: property "renderingMode" must be either "2d" or "3d"`}),s},u.aG=function A(s,c){if(Array.isArray(s)){if(!Array.isArray(c)||s.length!==c.length)return!1;for(let y=0;y<s.length;y++)if(!A(s[y],c[y]))return!1;return!0}if(typeof s=="object"&&s!==null&&c!==null){if(typeof c!="object"||Object.keys(s).length!==Object.keys(c).length)return!1;for(const y in s)if(!A(s[y],c[y]))return!1;return!0}return s===c},u.aH=gi,u.aI=qt,u.aJ=TA,u.aK=function(A){return A({pluginStatus:Fs,pluginURL:to}),TA.on("pluginStateChange",A),A},u.aL=class extends Gs{constructor(A,s){super(A,s),this.current=0}set(A){this.current!==A&&(this.current=A,this.gl.uniform1i(this.location,A))}},u.aM=eu,u.aN=class extends Gs{constructor(A,s){super(A,s),this.current=w0}set(A){if(A[12]!==this.current[12]||A[0]!==this.current[0])return this.current=A,void this.gl.uniformMatrix4fv(this.location,!1,A);for(let s=1;s<16;s++)if(A[s]!==this.current[s]){this.current=A,this.gl.uniformMatrix4fv(this.location,!1,A);break}}},u.aO=mc,u.aP=class extends Gs{constructor(A,s){super(A,s),this.current=[0,0,0]}set(A){A[0]===this.current[0]&&A[1]===this.current[1]&&A[2]===this.current[2]||(this.current=A,this.gl.uniform3f(this.location,A[0],A[1],A[2]))}},u.aQ=class extends Gs{constructor(A,s){super(A,s),this.current=[0,0]}set(A){A[0]===this.current[0]&&A[1]===this.current[1]||(this.current=A,this.gl.uniform2f(this.location,A[0],A[1]))}},u.aR=_c,u.aS=function(A,s,c,y,T,N,V){var X=1/(s-c),ae=1/(y-T),_e=1/(N-V);return A[0]=-2*X,A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[5]=-2*ae,A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[10]=2*_e,A[11]=0,A[12]=(s+c)*X,A[13]=(T+y)*ae,A[14]=(V+N)*_e,A[15]=1,A},u.aT=pi,u.aU=bm,u.aV=class extends k{},u.aW=Nd,u.aX=class extends R{},u.aY=function(A){return A<=1?1:Math.pow(2,Math.ceil(Math.log(A)/Math.LN2))},u.aZ=M0,u.a_=bt,u.aa=function(A){const s={};if(A.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(c,y,T,N)=>{const V=T||N;return s[y]=!V||V.toLowerCase(),""}),s["max-age"]){const c=parseInt(s["max-age"],10);isNaN(c)?delete s["max-age"]:s["max-age"]=c}return s},u.ab=function(A,s){const c=[];for(const y in A)y in s||c.push(y);return c},u.ac=function(A){if(ui==null){const s=A.navigator?A.navigator.userAgent:null;ui=!!A.safari||!(!s||!(/\b(iPad|iPhone|iPod)\b/.test(s)||s.match("Safari")&&!s.match("Chrome")))}return ui},u.ad=Te,u.ae=function(A,s,c){var y=Math.sin(c),T=Math.cos(c),N=s[0],V=s[1],X=s[2],ae=s[3],_e=s[4],Ee=s[5],ze=s[6],qe=s[7];return s!==A&&(A[8]=s[8],A[9]=s[9],A[10]=s[10],A[11]=s[11],A[12]=s[12],A[13]=s[13],A[14]=s[14],A[15]=s[15]),A[0]=N*T+_e*y,A[1]=V*T+Ee*y,A[2]=X*T+ze*y,A[3]=ae*T+qe*y,A[4]=_e*T-N*y,A[5]=Ee*T-V*y,A[6]=ze*T-X*y,A[7]=qe*T-ae*y,A},u.af=function(A){var s=new Ku(16);return s[0]=A[0],s[1]=A[1],s[2]=A[2],s[3]=A[3],s[4]=A[4],s[5]=A[5],s[6]=A[6],s[7]=A[7],s[8]=A[8],s[9]=A[9],s[10]=A[10],s[11]=A[11],s[12]=A[12],s[13]=A[13],s[14]=A[14],s[15]=A[15],s},u.ag=Po,u.ah=function(A,s){let c=0,y=0;if(A.kind==="constant")y=A.layoutSize;else if(A.kind!=="source"){const{interpolationType:T,minZoom:N,maxZoom:V}=A,X=T?Te(dr.interpolationFactor(T,s,N,V),0,1):0;A.kind==="camera"?y=is.number(A.minSize,A.maxSize,X):c=X}return{uSizeT:c,uSize:y}},u.aj=function(A,{uSize:s,uSizeT:c},{lowerSize:y,upperSize:T}){return A.kind==="source"?y/xl:A.kind==="composite"?is.number(y/xl,T/xl,c):s},u.ak=nf,u.al=function(A,s,c,y){const T=s.y-A.y,N=s.x-A.x,V=y.y-c.y,X=y.x-c.x,ae=V*N-X*T;if(ae===0)return null;const _e=(X*(A.y-c.y)-V*(A.x-c.x))/ae;return new ce(A.x+_e*N,A.y+_e*T)},u.am=pp,u.an=yc,u.ao=bu,u.ap=Js,u.ar=tf,u.as=function(A,s){var c=s[0],y=s[1],T=s[2],N=s[3],V=s[4],X=s[5],ae=s[6],_e=s[7],Ee=s[8],ze=s[9],qe=s[10],et=s[11],tt=s[12],ut=s[13],ft=s[14],_t=s[15],Rt=c*X-y*V,Pt=c*ae-T*V,Nt=c*_e-N*V,Xt=y*ae-T*X,_i=y*_e-N*X,Wi=T*_e-N*ae,hn=Ee*ut-ze*tt,qi=Ee*ft-qe*tt,Ri=Ee*_t-et*tt,Bi=ze*ft-qe*ut,nn=ze*_t-et*ut,Fi=qe*_t-et*ft,Ei=Rt*Fi-Pt*nn+Nt*Bi+Xt*Ri-_i*qi+Wi*hn;return Ei?(A[0]=(X*Fi-ae*nn+_e*Bi)*(Ei=1/Ei),A[1]=(T*nn-y*Fi-N*Bi)*Ei,A[2]=(ut*Wi-ft*_i+_t*Xt)*Ei,A[3]=(qe*_i-ze*Wi-et*Xt)*Ei,A[4]=(ae*Ri-V*Fi-_e*qi)*Ei,A[5]=(c*Fi-T*Ri+N*qi)*Ei,A[6]=(ft*Nt-tt*Wi-_t*Pt)*Ei,A[7]=(Ee*Wi-qe*Nt+et*Pt)*Ei,A[8]=(V*nn-X*Ri+_e*hn)*Ei,A[9]=(y*Ri-c*nn-N*hn)*Ei,A[10]=(tt*_i-ut*Nt+_t*Rt)*Ei,A[11]=(ze*Nt-Ee*_i-et*Rt)*Ei,A[12]=(X*qi-V*Bi-ae*hn)*Ei,A[13]=(c*Bi-y*qi+T*hn)*Ei,A[14]=(ut*Pt-tt*Xt-ft*Rt)*Ei,A[15]=(Ee*Xt-ze*Pt+qe*Rt)*Ei,A):null},u.at=ff,u.au=ef,u.av=gf,u.aw=function(){const A={},s=Kt.$version;for(const c in Kt.$root){const y=Kt.$root[c];if(y.required){let T=null;T=c==="version"?s:y.type==="array"?[]:{},T!=null&&(A[c]=T)}}return A},u.ax=Dn,u.ay=JA,u.az=li,u.b=function(A,s){const c=new Blob([new Uint8Array(A)],{type:"image/png"});createImageBitmap(c).then(y=>{s(null,y)}).catch(y=>{s(new Error(`Could not load image because of ${y.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})},u.b0=Qn,u.b1=function(A,s){var c=A[0],y=A[1],T=A[2],N=A[3],V=A[4],X=A[5],ae=A[6],_e=A[7],Ee=A[8],ze=A[9],qe=A[10],et=A[11],tt=A[12],ut=A[13],ft=A[14],_t=A[15],Rt=s[0],Pt=s[1],Nt=s[2],Xt=s[3],_i=s[4],Wi=s[5],hn=s[6],qi=s[7],Ri=s[8],Bi=s[9],nn=s[10],Fi=s[11],Ei=s[12],rn=s[13],on=s[14],tr=s[15];return Math.abs(c-Rt)<=yo*Math.max(1,Math.abs(c),Math.abs(Rt))&&Math.abs(y-Pt)<=yo*Math.max(1,Math.abs(y),Math.abs(Pt))&&Math.abs(T-Nt)<=yo*Math.max(1,Math.abs(T),Math.abs(Nt))&&Math.abs(N-Xt)<=yo*Math.max(1,Math.abs(N),Math.abs(Xt))&&Math.abs(V-_i)<=yo*Math.max(1,Math.abs(V),Math.abs(_i))&&Math.abs(X-Wi)<=yo*Math.max(1,Math.abs(X),Math.abs(Wi))&&Math.abs(ae-hn)<=yo*Math.max(1,Math.abs(ae),Math.abs(hn))&&Math.abs(_e-qi)<=yo*Math.max(1,Math.abs(_e),Math.abs(qi))&&Math.abs(Ee-Ri)<=yo*Math.max(1,Math.abs(Ee),Math.abs(Ri))&&Math.abs(ze-Bi)<=yo*Math.max(1,Math.abs(ze),Math.abs(Bi))&&Math.abs(qe-nn)<=yo*Math.max(1,Math.abs(qe),Math.abs(nn))&&Math.abs(et-Fi)<=yo*Math.max(1,Math.abs(et),Math.abs(Fi))&&Math.abs(tt-Ei)<=yo*Math.max(1,Math.abs(tt),Math.abs(Ei))&&Math.abs(ut-rn)<=yo*Math.max(1,Math.abs(ut),Math.abs(rn))&&Math.abs(ft-on)<=yo*Math.max(1,Math.abs(ft),Math.abs(on))&&Math.abs(_t-tr)<=yo*Math.max(1,Math.abs(_t),Math.abs(tr))},u.b2=function(A,s){return A[0]=s[0],A[1]=s[1],A[2]=s[2],A[3]=s[3],A[4]=s[4],A[5]=s[5],A[6]=s[6],A[7]=s[7],A[8]=s[8],A[9]=s[9],A[10]=s[10],A[11]=s[11],A[12]=s[12],A[13]=s[13],A[14]=s[14],A[15]=s[15],A},u.b3=function(A,s,c){return A[0]=s[0]*c[0],A[1]=s[1]*c[1],A[2]=s[2]*c[2],A[3]=s[3]*c[3],A},u.b4=function(A,s){return A[0]*s[0]+A[1]*s[1]+A[2]*s[2]+A[3]*s[3]},u.b5=Ai,u.b6=up,u.b7=op,u.b8=function(A,s,c,y,T){var N,V=1/Math.tan(s/2);return A[0]=V/c,A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[5]=V,A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[11]=-1,A[12]=0,A[13]=0,A[15]=0,T!=null&&T!==1/0?(A[10]=(T+y)*(N=1/(y-T)),A[14]=2*T*y*N):(A[10]=-1,A[14]=-2*y),A},u.b9=function(A,s,c){var y=Math.sin(c),T=Math.cos(c),N=s[4],V=s[5],X=s[6],ae=s[7],_e=s[8],Ee=s[9],ze=s[10],qe=s[11];return s!==A&&(A[0]=s[0],A[1]=s[1],A[2]=s[2],A[3]=s[3],A[12]=s[12],A[13]=s[13],A[14]=s[14],A[15]=s[15]),A[4]=N*T+_e*y,A[5]=V*T+Ee*y,A[6]=X*T+ze*y,A[7]=ae*T+qe*y,A[8]=_e*T-N*y,A[9]=Ee*T-V*y,A[10]=ze*T-X*y,A[11]=qe*T-ae*y,A},u.bA=re,u.bB=j0,u.bC=eo,u.bD=Vr,u.ba=Mt,u.bb=Ct,u.bc=function(A,s){return A[0]=s[0],A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[5]=s[1],A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[10]=s[2],A[11]=0,A[12]=0,A[13]=0,A[14]=0,A[15]=1,A},u.bd=class extends H{},u.be=Af,u.bf=Ap,u.bg=Bu,u.bi=$i,u.bj=function(A,s,c=!1){if(Fs===El||Fs===Il||Fs===Ml)throw new Error("setRTLTextPlugin cannot be called multiple times.");to=Bn.resolveURL(A),Fs=El,oA=s,pl(),c||Xn()},u.bk=gl,u.bl=function(A,s){const c={};for(let T=0;T<A.length;T++){const N=s&&s[A[T].id]||Ns(A[T]);s&&(s[A[T].id]=N);let V=c[N];V||(V=c[N]=[]),V.push(A[T])}const y=[];for(const T in c)y.push(c[T]);return y},u.bm=Zi,u.bn=cf,u.bo=cp,u.bp=cA,u.bq=function(A){A.bucket.createArrays(),A.bucket.tilePixelRatio=Qs/(512*A.bucket.overscaling),A.bucket.compareText={},A.bucket.iconsNeedLinear=!1;const s=A.bucket.layers[0],c=s.layout,y=s._unevaluatedLayout._values,T={layoutIconSize:y["icon-size"].possiblyEvaluate(new zr(A.bucket.zoom+1),A.canonical),layoutTextSize:y["text-size"].possiblyEvaluate(new zr(A.bucket.zoom+1),A.canonical),textMaxSize:y["text-size"].possiblyEvaluate(new zr(18))};if(A.bucket.textSizeData.kind==="composite"){const{minZoom:_e,maxZoom:Ee}=A.bucket.textSizeData;T.compositeTextSizes=[y["text-size"].possiblyEvaluate(new zr(_e),A.canonical),y["text-size"].possiblyEvaluate(new zr(Ee),A.canonical)]}if(A.bucket.iconSizeData.kind==="composite"){const{minZoom:_e,maxZoom:Ee}=A.bucket.iconSizeData;T.compositeIconSizes=[y["icon-size"].possiblyEvaluate(new zr(_e),A.canonical),y["icon-size"].possiblyEvaluate(new zr(Ee),A.canonical)]}const N=c.get("text-line-height")*Js,V=c.get("text-rotation-alignment")!=="viewport"&&c.get("symbol-placement")!=="point",X=c.get("text-keep-upright"),ae=c.get("text-size");for(const _e of A.bucket.features){const Ee=c.get("text-font").evaluate(_e,{},A.canonical).join(","),ze=ae.evaluate(_e,{},A.canonical),qe=T.layoutTextSize.evaluate(_e,{},A.canonical),et=T.layoutIconSize.evaluate(_e,{},A.canonical),tt={horizontal:{},vertical:void 0},ut=_e.text;let ft,_t=[0,0];if(ut){const Nt=ut.toString(),Xt=c.get("text-letter-spacing").evaluate(_e,{},A.canonical)*Js,_i=fl(Nt)?Xt:0,Wi=c.get("text-anchor").evaluate(_e,{},A.canonical),hn=Ep(s,_e,A.canonical);if(!hn){const Fi=c.get("text-radial-offset").evaluate(_e,{},A.canonical);_t=Fi?Gh(Wi,[Fi*Js,uh]):c.get("text-offset").evaluate(_e,{},A.canonical).map(Ei=>Ei*Js)}let qi=V?"center":c.get("text-justify").evaluate(_e,{},A.canonical);const Ri=c.get("symbol-placement"),Bi=Ri==="point"?c.get("text-max-width").evaluate(_e,{},A.canonical)*Js:0,nn=()=>{A.bucket.allowVerticalPlacement&&IA(Nt)&&(tt.vertical=Dc(ut,A.glyphMap,A.glyphPositions,A.imagePositions,Ee,Bi,N,Wi,"left",_i,_t,u.ai.vertical,!0,Ri,qe,ze))};if(!V&&hn){const Fi=new Set;if(qi==="auto")for(let rn=0;rn<hn.values.length;rn+=2)Fi.add(ff(hn.values[rn]));else Fi.add(qi);let Ei=!1;for(const rn of Fi)if(!tt.horizontal[rn])if(Ei)tt.horizontal[rn]=tt.horizontal[0];else{const on=Dc(ut,A.glyphMap,A.glyphPositions,A.imagePositions,Ee,Bi,N,"center",rn,_i,_t,u.ai.horizontal,!1,Ri,qe,ze);on&&(tt.horizontal[rn]=on,Ei=on.positionedLines.length===1)}nn()}else{qi==="auto"&&(qi=ff(Wi));const Fi=Dc(ut,A.glyphMap,A.glyphPositions,A.imagePositions,Ee,Bi,N,Wi,qi,_i,_t,u.ai.horizontal,!1,Ri,qe,ze);Fi&&(tt.horizontal[qi]=Fi),nn(),IA(Nt)&&V&&X&&(tt.vertical=Dc(ut,A.glyphMap,A.glyphPositions,A.imagePositions,Ee,Bi,N,Wi,qi,_i,_t,u.ai.vertical,!1,Ri,qe,ze))}}let Rt=!1;if(_e.icon&&_e.icon.name){const Nt=A.imageMap[_e.icon.name];Nt&&(ft=e_(A.imagePositions[_e.icon.name],c.get("icon-offset").evaluate(_e,{},A.canonical),c.get("icon-anchor").evaluate(_e,{},A.canonical)),Rt=!!Nt.sdf,A.bucket.sdfIcons===void 0?A.bucket.sdfIcons=Rt:A.bucket.sdfIcons!==Rt&&vt("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Nt.pixelRatio!==A.bucket.pixelRatio||c.get("icon-rotate").constantOr(1)!==0)&&(A.bucket.iconsNeedLinear=!0))}const Pt=Ip(tt.horizontal)||tt.vertical;A.bucket.iconsInText=!!Pt&&Pt.iconsInText,(Pt||ft)&&df(A.bucket,_e,tt,ft,A.imageMap,T,qe,et,_t,Rt,A.canonical)}A.showCollisionBoxes&&A.bucket.generateCollisionDebugBuffers()},u.br=q0,u.bs=Th,u.bt=Ha,u.bu=class{constructor(A){this._marks={start:[A.url,"start"].join("#"),end:[A.url,"end"].join("#"),measure:A.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let A=performance.getEntriesByName(this._marks.measure);return A.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),A=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),A}},u.bv=$0,u.bw=nu,u.bx=function(A,s,c,y,T){return Q(this,void 0,void 0,function*(){if(gt())try{return yield oi(A,s,c,y,T)}catch{}return function(N,V,X,ae,_e){const Ee=N.width,ze=N.height;yi&&Pi||(yi=new OffscreenCanvas(Ee,ze),Pi=yi.getContext("2d",{willReadFrequently:!0})),yi.width=Ee,yi.height=ze,Pi.drawImage(N,0,0,Ee,ze);const qe=Pi.getImageData(V,X,ae,_e);return Pi.clearRect(0,0,Ee,ze),qe.data}(A,s,c,y,T)})},u.by=hf,u.bz=O,u.c=fi,u.d=function(A,s){const c=new Image;c.onload=()=>{s(null,c),URL.revokeObjectURL(c.src),c.onload=null,window.requestAnimationFrame(()=>{c.src=Yt})},c.onerror=()=>s(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const y=new Blob([new Uint8Array(A)],{type:"image/png"});c.src=A.byteLength?URL.createObjectURL(y):Yt},u.e=ii,u.f=function(A,s){return wi(ii(A,{type:"json"}),s)},u.g=Li,u.h=Bn,u.i=Ft,u.j=zn,u.k=Gi,u.l=ir,u.m=wi,u.n=function(A){return new $0(A).readFields(qd,[])},u.o=function(A,s,c){if(!A.length)return c(null,[]);let y=A.length;const T=new Array(A.length);let N=null;A.forEach((V,X)=>{s(V,(ae,_e)=>{ae&&(N=ae),T[X]=_e,--y==0&&c(N,T)})})},u.p=Zd,u.q=Ju,u.r=Br,u.s=kn,u.t=EA,u.u=Vi,u.v=Kt,u.w=vt,u.x=KA,u.y=Vs,u.z=function([A,s,c]){return s+=90,s*=Math.PI/180,c*=Math.PI/180,{x:A*Math.cos(s)*Math.sin(c),y:A*Math.sin(s)*Math.sin(c),z:A*Math.cos(c)}}}),g(["./shared"],function(u){class Q{constructor(W){this.keyCache={},W&&this.replace(W)}replace(W){this._layerConfigs={},this._layers={},this.update(W,[])}update(W,ie){for(const me of W){this._layerConfigs[me.id]=me;const pe=this._layers[me.id]=u.aC(me);pe._featureFilter=u.a6(pe.filter),this.keyCache[me.id]&&delete this.keyCache[me.id]}for(const me of ie)delete this.keyCache[me],delete this._layerConfigs[me],delete this._layers[me];this.familiesBySource={};const he=u.bl(Object.values(this._layerConfigs),this.keyCache);for(const me of he){const pe=me.map(ge=>this._layers[ge.id]),De=pe[0];if(De.visibility==="none")continue;const Le=De.source||"";let Pe=this.familiesBySource[Le];Pe||(Pe=this.familiesBySource[Le]={});const Ve=De.sourceLayer||"_geojsonTileLayer";let Ue=Pe[Ve];Ue||(Ue=Pe[Ve]=[]),Ue.push(pe)}}}class O{constructor(W){const ie={},he=[];for(const Le in W){const Pe=W[Le],Ve=ie[Le]={};for(const Ue in Pe){const ge=Pe[+Ue];if(!ge||ge.bitmap.width===0||ge.bitmap.height===0)continue;const Ce={x:0,y:0,w:ge.bitmap.width+2,h:ge.bitmap.height+2};he.push(Ce),Ve[Ue]={rect:Ce,metrics:ge.metrics}}}const{w:me,h:pe}=u.p(he),De=new u.q({width:me||1,height:pe||1});for(const Le in W){const Pe=W[Le];for(const Ve in Pe){const Ue=Pe[+Ve];if(!Ue||Ue.bitmap.width===0||Ue.bitmap.height===0)continue;const ge=ie[Le][Ve].rect;u.q.copy(Ue.bitmap,De,{x:0,y:0},{x:ge.x+1,y:ge.y+1},Ue.bitmap)}}this.image=De,this.positions=ie}}u.bm("GlyphAtlas",O);class re{constructor(W){this.tileID=new u.O(W.tileID.overscaledZ,W.tileID.wrap,W.tileID.canonical.z,W.tileID.canonical.x,W.tileID.canonical.y),this.uid=W.uid,this.zoom=W.zoom,this.pixelRatio=W.pixelRatio,this.tileSize=W.tileSize,this.source=W.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=W.showCollisionBoxes,this.collectResourceTiming=!!W.collectResourceTiming,this.returnDependencies=!!W.returnDependencies,this.promoteId=W.promoteId,this.inFlightDependencies=[],this.dependencySentinel=-1}parse(W,ie,he,me,pe){this.status="parsing",this.data=W,this.collisionBoxArray=new u.a3;const De=new u.bn(Object.keys(W.layers).sort()),Le=new u.bo(this.tileID,this.promoteId);Le.bucketLayerIDs=[];const Pe={},Ve={featureIndex:Le,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:he},Ue=ie.familiesBySource[this.source];for(const It in Ue){const Bt=W.layers[It];if(!Bt)continue;Bt.version===1&&u.w(`Vector tile source "${this.source}" layer "${It}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const hi=De.encode(It),Zt=[];for(let ei=0;ei<Bt.length;ei++){const Ti=Bt.feature(ei),Yi=Le.getId(Ti,It);Zt.push({feature:Ti,id:Yi,index:ei,sourceLayerIndex:hi})}for(const ei of Ue[It]){const Ti=ei[0];Ti.source!==this.source&&u.w(`layer.source = ${Ti.source} does not equal this.source = ${this.source}`),Ti.minzoom&&this.zoom<Math.floor(Ti.minzoom)||Ti.maxzoom&&this.zoom>=Ti.maxzoom||Ti.visibility!=="none"&&(ee(ei,this.zoom,he),(Pe[Ti.id]=Ti.createBucket({index:Le.bucketLayerIDs.length,layers:ei,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:hi,sourceID:this.source})).populate(Zt,Ve,this.tileID.canonical),Le.bucketLayerIDs.push(ei.map(Yi=>Yi.id)))}}let ge,Ce,Qe,nt;const i=u.aH(Ve.glyphDependencies,It=>Object.keys(It).map(Number));this.inFlightDependencies.forEach(It=>It==null?void 0:It.cancel()),this.inFlightDependencies=[];const ue=++this.dependencySentinel;Object.keys(i).length?this.inFlightDependencies.push(me.send("getGlyphs",{uid:this.uid,stacks:i,source:this.source,tileID:this.tileID,type:"glyphs"},(It,Bt)=>{ue===this.dependencySentinel&&(ge||(ge=It,Ce=Bt,Wt.call(this)))})):Ce={};const Dt=Object.keys(Ve.iconDependencies);Dt.length?this.inFlightDependencies.push(me.send("getImages",{icons:Dt,source:this.source,tileID:this.tileID,type:"icons"},(It,Bt)=>{ue===this.dependencySentinel&&(ge||(ge=It,Qe=Bt,Wt.call(this)))})):Qe={};const Vt=Object.keys(Ve.patternDependencies);function Wt(){if(ge)return pe(ge);if(Ce&&Qe&&nt){const It=new O(Ce),Bt=new u.bp(Qe,nt);for(const hi in Pe){const Zt=Pe[hi];Zt instanceof u.a4?(ee(Zt.layers,this.zoom,he),u.bq({bucket:Zt,glyphMap:Ce,glyphPositions:It.positions,imageMap:Qe,imagePositions:Bt.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):Zt.hasPattern&&(Zt instanceof u.br||Zt instanceof u.bs||Zt instanceof u.bt)&&(ee(Zt.layers,this.zoom,he),Zt.addFeatures(Ve,this.tileID.canonical,Bt.patternPositions))}this.status="done",pe(null,{buckets:Object.values(Pe).filter(hi=>!hi.isEmpty()),featureIndex:Le,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:It.image,imageAtlas:Bt,glyphMap:this.returnDependencies?Ce:null,iconMap:this.returnDependencies?Qe:null,glyphPositions:this.returnDependencies?It.positions:null})}}Vt.length?this.inFlightDependencies.push(me.send("getImages",{icons:Vt,source:this.source,tileID:this.tileID,type:"patterns"},(It,Bt)=>{ue===this.dependencySentinel&&(ge||(ge=It,nt=Bt,Wt.call(this)))})):nt={},Wt.call(this)}}function ee(Ae,W,ie){const he=new u.a8(W);for(const me of Ae)me.recalculate(he,ie)}function ce(Ae,W){const ie=u.l(Ae.request,(he,me,pe,De)=>{if(he)W(he);else if(me)try{const Le=new u.bw.VectorTile(new u.bv(me));W(null,{vectorTile:Le,rawData:me,cacheControl:pe,expires:De})}catch(Le){const Pe=new Uint8Array(me);let Ve=`Unable to parse the tile at ${Ae.request.url}, `;Ve+=Pe[0]===31&&Pe[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${Le.messge}`,W(new Error(Ve))}});return()=>{ie.cancel(),W()}}class le{constructor(W,ie,he,me){this.actor=W,this.layerIndex=ie,this.availableImages=he,this.loadVectorData=me||ce,this.fetching={},this.loading={},this.loaded={}}loadTile(W,ie){const he=W.uid;this.loading||(this.loading={});const me=!!(W&&W.request&&W.request.collectResourceTiming)&&new u.bu(W.request),pe=this.loading[he]=new re(W);pe.abort=this.loadVectorData(W,(De,Le)=>{if(delete this.loading[he],De||!Le)return pe.status="done",this.loaded[he]=pe,ie(De);const Pe=Le.rawData,Ve={};Le.expires&&(Ve.expires=Le.expires),Le.cacheControl&&(Ve.cacheControl=Le.cacheControl);const Ue={};if(me){const ge=me.finish();ge&&(Ue.resourceTiming=JSON.parse(JSON.stringify(ge)))}pe.vectorTile=Le.vectorTile,pe.parse(Le.vectorTile,this.layerIndex,this.availableImages,this.actor,(ge,Ce)=>{if(delete this.fetching[he],ge||!Ce)return ie(ge);ie(null,u.e({rawTileData:Pe.slice(0)},Ce,Ve,Ue))}),this.loaded=this.loaded||{},this.loaded[he]=pe,this.fetching[he]={rawTileData:Pe,cacheControl:Ve,resourceTiming:Ue}})}reloadTile(W,ie){const he=this.loaded,me=W.uid;if(he&&he[me]){const pe=he[me];pe.showCollisionBoxes=W.showCollisionBoxes,pe.status==="parsing"?pe.parse(pe.vectorTile,this.layerIndex,this.availableImages,this.actor,(De,Le)=>{if(De||!Le)return ie(De,Le);let Pe;if(this.fetching[me]){const{rawTileData:Ve,cacheControl:Ue,resourceTiming:ge}=this.fetching[me];delete this.fetching[me],Pe=u.e({rawTileData:Ve.slice(0)},Le,Ue,ge)}else Pe=Le;ie(null,Pe)}):pe.status==="done"&&(pe.vectorTile?pe.parse(pe.vectorTile,this.layerIndex,this.availableImages,this.actor,ie):ie())}}abortTile(W,ie){const he=this.loading,me=W.uid;he&&he[me]&&he[me].abort&&(he[me].abort(),delete he[me]),ie()}removeTile(W,ie){const he=this.loaded,me=W.uid;he&&he[me]&&delete he[me],ie()}}class je{constructor(){this.loaded={}}loadTile(W,ie){return u._(this,void 0,void 0,function*(){const{uid:he,encoding:me,rawImageData:pe,redFactor:De,greenFactor:Le,blueFactor:Pe,baseShift:Ve}=W,Ue=pe.width+2,ge=pe.height+2,Ce=u.a(pe)?new u.R({width:Ue,height:ge},yield u.bx(pe,-1,-1,Ue,ge)):pe,Qe=new u.by(he,Ce,me,De,Le,Pe,Ve);this.loaded=this.loaded||{},this.loaded[he]=Qe,ie(null,Qe)})}removeTile(W){const ie=this.loaded,he=W.uid;ie&&ie[he]&&delete ie[he]}}function Je(Ae,W){if(Ae.length!==0){Xe(Ae[0],W);for(var ie=1;ie<Ae.length;ie++)Xe(Ae[ie],!W)}}function Xe(Ae,W){for(var ie=0,he=0,me=0,pe=Ae.length,De=pe-1;me<pe;De=me++){var Le=(Ae[me][0]-Ae[De][0])*(Ae[De][1]+Ae[me][1]),Pe=ie+Le;he+=Math.abs(ie)>=Math.abs(Le)?ie-Pe+Le:Le-Pe+ie,ie=Pe}ie+he>=0!=!!W&&Ae.reverse()}var Ke=u.bz(function Ae(W,ie){var he,me=W&&W.type;if(me==="FeatureCollection")for(he=0;he<W.features.length;he++)Ae(W.features[he],ie);else if(me==="GeometryCollection")for(he=0;he<W.geometries.length;he++)Ae(W.geometries[he],ie);else if(me==="Feature")Ae(W.geometry,ie);else if(me==="Polygon")Je(W.coordinates,ie);else if(me==="MultiPolygon")for(he=0;he<W.coordinates.length;he++)Je(W.coordinates[he],ie);return W});const xt=u.bw.VectorTileFeature.prototype.toGeoJSON;var gt={exports:{}},Mt=u.bA,Ct=u.bw.VectorTileFeature,Te=Ai;function Ai(Ae,W){this.options=W||{},this.features=Ae,this.length=Ae.length}function ii(Ae,W){this.id=typeof Ae.id=="number"?Ae.id:void 0,this.type=Ae.type,this.rawGeometry=Ae.type===1?[Ae.geometry]:Ae.geometry,this.properties=Ae.tags,this.extent=W||4096}Ai.prototype.feature=function(Ae){return new ii(this.features[Ae],this.options.extent)},ii.prototype.loadGeometry=function(){var Ae=this.rawGeometry;this.geometry=[];for(var W=0;W<Ae.length;W++){for(var ie=Ae[W],he=[],me=0;me<ie.length;me++)he.push(new Mt(ie[me][0],ie[me][1]));this.geometry.push(he)}return this.geometry},ii.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Ae=this.geometry,W=1/0,ie=-1/0,he=1/0,me=-1/0,pe=0;pe<Ae.length;pe++)for(var De=Ae[pe],Le=0;Le<De.length;Le++){var Pe=De[Le];W=Math.min(W,Pe.x),ie=Math.max(ie,Pe.x),he=Math.min(he,Pe.y),me=Math.max(me,Pe.y)}return[W,he,ie,me]},ii.prototype.toGeoJSON=Ct.prototype.toGeoJSON;var xi=u.bB,gi=Te;function qt(Ae){var W=new xi;return function(ie,he){for(var me in ie.layers)he.writeMessage(3,di,ie.layers[me])}(Ae,W),W.finish()}function di(Ae,W){var ie;W.writeVarintField(15,Ae.version||1),W.writeStringField(1,Ae.name||""),W.writeVarintField(5,Ae.extent||4096);var he={keys:[],values:[],keycache:{},valuecache:{}};for(ie=0;ie<Ae.length;ie++)he.feature=Ae.feature(ie),W.writeMessage(2,mi,he);var me=he.keys;for(ie=0;ie<me.length;ie++)W.writeStringField(3,me[ie]);var pe=he.values;for(ie=0;ie<pe.length;ie++)W.writeMessage(4,ui,pe[ie])}function mi(Ae,W){var ie=Ae.feature;ie.id!==void 0&&W.writeVarintField(1,ie.id),W.writeMessage(2,vt,Ae),W.writeVarintField(3,ie.type),W.writeMessage(4,Ft,ie)}function vt(Ae,W){var ie=Ae.feature,he=Ae.keys,me=Ae.values,pe=Ae.keycache,De=Ae.valuecache;for(var Le in ie.properties){var Pe=ie.properties[Le],Ve=pe[Le];if(Pe!==null){Ve===void 0&&(he.push(Le),pe[Le]=Ve=he.length-1),W.writeVarint(Ve);var Ue=typeof Pe;Ue!=="string"&&Ue!=="boolean"&&Ue!=="number"&&(Pe=JSON.stringify(Pe));var ge=Ue+":"+Pe,Ce=De[ge];Ce===void 0&&(me.push(Pe),De[ge]=Ce=me.length-1),W.writeVarint(Ce)}}}function Ut(Ae,W){return(W<<3)+(7&Ae)}function rt(Ae){return Ae<<1^Ae>>31}function Ft(Ae,W){for(var ie=Ae.loadGeometry(),he=Ae.type,me=0,pe=0,De=ie.length,Le=0;Le<De;Le++){var Pe=ie[Le],Ve=1;he===1&&(Ve=Pe.length),W.writeVarint(Ut(1,Ve));for(var Ue=he===3?Pe.length-1:Pe.length,ge=0;ge<Ue;ge++){ge===1&&he!==1&&W.writeVarint(Ut(2,Ue-1));var Ce=Pe[ge].x-me,Qe=Pe[ge].y-pe;W.writeVarint(rt(Ce)),W.writeVarint(rt(Qe)),me+=Ce,pe+=Qe}he===3&&W.writeVarint(Ut(7,1))}}function ui(Ae,W){var ie=typeof Ae;ie==="string"?W.writeStringField(1,Ae):ie==="boolean"?W.writeBooleanField(7,Ae):ie==="number"&&(Ae%1!=0?W.writeDoubleField(3,Ae):Ae<0?W.writeSVarintField(6,Ae):W.writeVarintField(5,Ae))}gt.exports=qt,gt.exports.fromVectorTileJs=qt,gt.exports.fromGeojsonVt=function(Ae,W){W=W||{};var ie={};for(var he in Ae)ie[he]=new gi(Ae[he].features,W),ie[he].name=he,ie[he].version=W.version,ie[he].extent=W.extent;return qt({layers:ie})},gt.exports.GeoJSONWrapper=gi;var Lt=u.bz(gt.exports);const Yt={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Ae=>Ae},oi=Math.fround||(yi=new Float32Array(1),Ae=>(yi[0]=+Ae,yi[0]));var yi;const Pi=3,dn=5,sn=6;class Bn{constructor(W){this.options=Object.assign(Object.create(Yt),W),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(W){const{log:ie,minZoom:he,maxZoom:me}=this.options;ie&&console.time("total time");const pe=`prepare ${W.length} points`;ie&&console.time(pe),this.points=W;const De=[];for(let Pe=0;Pe<W.length;Pe++){const Ve=W[Pe];if(!Ve.geometry)continue;const[Ue,ge]=Ve.geometry.coordinates,Ce=oi(li(Ue)),Qe=oi(Li(ge));De.push(Ce,Qe,1/0,Pe,-1,1),this.options.reduce&&De.push(0)}let Le=this.trees[me+1]=this._createTree(De);ie&&console.timeEnd(pe);for(let Pe=me;Pe>=he;Pe--){const Ve=+Date.now();Le=this.trees[Pe]=this._createTree(this._cluster(Le,Pe)),ie&&console.log("z%d: %d clusters in %dms",Pe,Le.numItems,+Date.now()-Ve)}return ie&&console.timeEnd("total time"),this}getClusters(W,ie){let he=((W[0]+180)%360+360)%360-180;const me=Math.max(-90,Math.min(90,W[1]));let pe=W[2]===180?180:((W[2]+180)%360+360)%360-180;const De=Math.max(-90,Math.min(90,W[3]));if(W[2]-W[0]>=360)he=-180,pe=180;else if(he>pe){const ge=this.getClusters([he,me,180,De],ie),Ce=this.getClusters([-180,me,pe,De],ie);return ge.concat(Ce)}const Le=this.trees[this._limitZoom(ie)],Pe=Le.range(li(he),Li(De),li(pe),Li(me)),Ve=Le.data,Ue=[];for(const ge of Pe){const Ce=this.stride*ge;Ue.push(Ve[Ce+dn]>1?fi(Ve,Ce,this.clusterProps):this.points[Ve[Ce+Pi]])}return Ue}getChildren(W){const ie=this._getOriginId(W),he=this._getOriginZoom(W),me="No cluster with the specified id.",pe=this.trees[he];if(!pe)throw new Error(me);const De=pe.data;if(ie*this.stride>=De.length)throw new Error(me);const Le=this.options.radius/(this.options.extent*Math.pow(2,he-1)),Pe=pe.within(De[ie*this.stride],De[ie*this.stride+1],Le),Ve=[];for(const Ue of Pe){const ge=Ue*this.stride;De[ge+4]===W&&Ve.push(De[ge+dn]>1?fi(De,ge,this.clusterProps):this.points[De[ge+Pi]])}if(Ve.length===0)throw new Error(me);return Ve}getLeaves(W,ie,he){const me=[];return this._appendLeaves(me,W,ie=ie||10,he=he||0,0),me}getTile(W,ie,he){const me=this.trees[this._limitZoom(W)],pe=Math.pow(2,W),{extent:De,radius:Le}=this.options,Pe=Le/De,Ve=(he-Pe)/pe,Ue=(he+1+Pe)/pe,ge={features:[]};return this._addTileFeatures(me.range((ie-Pe)/pe,Ve,(ie+1+Pe)/pe,Ue),me.data,ie,he,pe,ge),ie===0&&this._addTileFeatures(me.range(1-Pe/pe,Ve,1,Ue),me.data,pe,he,pe,ge),ie===pe-1&&this._addTileFeatures(me.range(0,Ve,Pe/pe,Ue),me.data,-1,he,pe,ge),ge.features.length?ge:null}getClusterExpansionZoom(W){let ie=this._getOriginZoom(W)-1;for(;ie<=this.options.maxZoom;){const he=this.getChildren(W);if(ie++,he.length!==1)break;W=he[0].properties.cluster_id}return ie}_appendLeaves(W,ie,he,me,pe){const De=this.getChildren(ie);for(const Le of De){const Pe=Le.properties;if(Pe&&Pe.cluster?pe+Pe.point_count<=me?pe+=Pe.point_count:pe=this._appendLeaves(W,Pe.cluster_id,he,me,pe):pe<me?pe++:W.push(Le),W.length===he)break}return pe}_createTree(W){const ie=new u.av(W.length/this.stride|0,this.options.nodeSize,Float32Array);for(let he=0;he<W.length;he+=this.stride)ie.add(W[he],W[he+1]);return ie.finish(),ie.data=W,ie}_addTileFeatures(W,ie,he,me,pe,De){for(const Le of W){const Pe=Le*this.stride,Ve=ie[Pe+dn]>1;let Ue,ge,Ce;if(Ve)Ue=$i(ie,Pe,this.clusterProps),ge=ie[Pe],Ce=ie[Pe+1];else{const i=this.points[ie[Pe+Pi]];Ue=i.properties;const[ue,Dt]=i.geometry.coordinates;ge=li(ue),Ce=Li(Dt)}const Qe={type:1,geometry:[[Math.round(this.options.extent*(ge*pe-he)),Math.round(this.options.extent*(Ce*pe-me))]],tags:Ue};let nt;nt=Ve||this.options.generateId?ie[Pe+Pi]:this.points[ie[Pe+Pi]].id,nt!==void 0&&(Qe.id=nt),De.features.push(Qe)}}_limitZoom(W){return Math.max(this.options.minZoom,Math.min(Math.floor(+W),this.options.maxZoom+1))}_cluster(W,ie){const{radius:he,extent:me,reduce:pe,minPoints:De}=this.options,Le=he/(me*Math.pow(2,ie)),Pe=W.data,Ve=[],Ue=this.stride;for(let ge=0;ge<Pe.length;ge+=Ue){if(Pe[ge+2]<=ie)continue;Pe[ge+2]=ie;const Ce=Pe[ge],Qe=Pe[ge+1],nt=W.within(Pe[ge],Pe[ge+1],Le),i=Pe[ge+dn];let ue=i;for(const Dt of nt){const Vt=Dt*Ue;Pe[Vt+2]>ie&&(ue+=Pe[Vt+dn])}if(ue>i&&ue>=De){let Dt,Vt=Ce*i,Wt=Qe*i,It=-1;const Bt=((ge/Ue|0)<<5)+(ie+1)+this.points.length;for(const hi of nt){const Zt=hi*Ue;if(Pe[Zt+2]<=ie)continue;Pe[Zt+2]=ie;const ei=Pe[Zt+dn];Vt+=Pe[Zt]*ei,Wt+=Pe[Zt+1]*ei,Pe[Zt+4]=Bt,pe&&(Dt||(Dt=this._map(Pe,ge,!0),It=this.clusterProps.length,this.clusterProps.push(Dt)),pe(Dt,this._map(Pe,Zt)))}Pe[ge+4]=Bt,Ve.push(Vt/ue,Wt/ue,1/0,Bt,-1,ue),pe&&Ve.push(It)}else{for(let Dt=0;Dt<Ue;Dt++)Ve.push(Pe[ge+Dt]);if(ue>1)for(const Dt of nt){const Vt=Dt*Ue;if(!(Pe[Vt+2]<=ie)){Pe[Vt+2]=ie;for(let Wt=0;Wt<Ue;Wt++)Ve.push(Pe[Vt+Wt])}}}}return Ve}_getOriginId(W){return W-this.points.length>>5}_getOriginZoom(W){return(W-this.points.length)%32}_map(W,ie,he){if(W[ie+dn]>1){const De=this.clusterProps[W[ie+sn]];return he?Object.assign({},De):De}const me=this.points[W[ie+Pi]].properties,pe=this.options.map(me);return he&&pe===me?Object.assign({},pe):pe}}function fi(Ae,W,ie){return{type:"Feature",id:Ae[W+Pi],properties:$i(Ae,W,ie),geometry:{type:"Point",coordinates:[(he=Ae[W],360*(he-.5)),Ji(Ae[W+1])]}};var he}function $i(Ae,W,ie){const he=Ae[W+dn],me=he>=1e4?`${Math.round(he/1e3)}k`:he>=1e3?Math.round(he/100)/10+"k":he,pe=Ae[W+sn],De=pe===-1?{}:Object.assign({},ie[pe]);return Object.assign(De,{cluster:!0,cluster_id:Ae[W+Pi],point_count:he,point_count_abbreviated:me})}function li(Ae){return Ae/360+.5}function Li(Ae){const W=Math.sin(Ae*Math.PI/180),ie=.5-.25*Math.log((1+W)/(1-W))/Math.PI;return ie<0?0:ie>1?1:ie}function Ji(Ae){const W=(180-360*Ae)*Math.PI/180;return 360*Math.atan(Math.exp(W))/Math.PI-90}function wi(Ae,W,ie,he){for(var me,pe=he,De=ie-W>>1,Le=ie-W,Pe=Ae[W],Ve=Ae[W+1],Ue=Ae[ie],ge=Ae[ie+1],Ce=W+3;Ce<ie;Ce+=3){var Qe=ir(Ae[Ce],Ae[Ce+1],Pe,Ve,Ue,ge);if(Qe>pe)me=Ce,pe=Qe;else if(Qe===pe){var nt=Math.abs(Ce-De);nt<Le&&(me=Ce,Le=nt)}}pe>he&&(me-W>3&&wi(Ae,W,me,he),Ae[me+2]=pe,ie-me>3&&wi(Ae,me,ie,he))}function ir(Ae,W,ie,he,me,pe){var De=me-ie,Le=pe-he;if(De!==0||Le!==0){var Pe=((Ae-ie)*De+(W-he)*Le)/(De*De+Le*Le);Pe>1?(ie=me,he=pe):Pe>0&&(ie+=De*Pe,he+=Le*Pe)}return(De=Ae-ie)*De+(Le=W-he)*Le}function kn(Ae,W,ie,he){var me={id:Ae===void 0?null:Ae,type:W,geometry:ie,tags:he,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(pe){var De=pe.geometry,Le=pe.type;if(Le==="Point"||Le==="MultiPoint"||Le==="LineString")vr(pe,De);else if(Le==="Polygon"||Le==="MultiLineString")for(var Pe=0;Pe<De.length;Pe++)vr(pe,De[Pe]);else if(Le==="MultiPolygon")for(Pe=0;Pe<De.length;Pe++)for(var Ve=0;Ve<De[Pe].length;Ve++)vr(pe,De[Pe][Ve])}(me),me}function vr(Ae,W){for(var ie=0;ie<W.length;ie+=3)Ae.minX=Math.min(Ae.minX,W[ie]),Ae.minY=Math.min(Ae.minY,W[ie+1]),Ae.maxX=Math.max(Ae.maxX,W[ie]),Ae.maxY=Math.max(Ae.maxY,W[ie+1])}function Or(Ae,W,ie,he){if(W.geometry){var me=W.geometry.coordinates,pe=W.geometry.type,De=Math.pow(ie.tolerance/((1<<ie.maxZoom)*ie.extent),2),Le=[],Pe=W.id;if(ie.promoteId?Pe=W.properties[ie.promoteId]:ie.generateId&&(Pe=he||0),pe==="Point")Gi(me,Le);else if(pe==="MultiPoint")for(var Ve=0;Ve<me.length;Ve++)Gi(me[Ve],Le);else if(pe==="LineString")zn(me,Le,De,!1);else if(pe==="MultiLineString"){if(ie.lineMetrics){for(Ve=0;Ve<me.length;Ve++)zn(me[Ve],Le=[],De,!1),Ae.push(kn(Pe,"LineString",Le,W.properties));return}Cs(me,Le,De,!1)}else if(pe==="Polygon")Cs(me,Le,De,!0);else{if(pe!=="MultiPolygon"){if(pe==="GeometryCollection"){for(Ve=0;Ve<W.geometry.geometries.length;Ve++)Or(Ae,{id:Pe,geometry:W.geometry.geometries[Ve],properties:W.properties},ie,he);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Ve=0;Ve<me.length;Ve++){var Ue=[];Cs(me[Ve],Ue,De,!0),Le.push(Ue)}}Ae.push(kn(Pe,pe,Le,W.properties))}}function Gi(Ae,W){W.push(Kt(Ae[0])),W.push(cn(Ae[1])),W.push(0)}function zn(Ae,W,ie,he){for(var me,pe,De=0,Le=0;Le<Ae.length;Le++){var Pe=Kt(Ae[Le][0]),Ve=cn(Ae[Le][1]);W.push(Pe),W.push(Ve),W.push(0),Le>0&&(De+=he?(me*Ve-Pe*pe)/2:Math.sqrt(Math.pow(Pe-me,2)+Math.pow(Ve-pe,2))),me=Pe,pe=Ve}var Ue=W.length-3;W[2]=1,wi(W,0,Ue,ie),W[Ue+2]=1,W.size=Math.abs(De),W.start=0,W.end=W.size}function Cs(Ae,W,ie,he){for(var me=0;me<Ae.length;me++){var pe=[];zn(Ae[me],pe,ie,he),W.push(pe)}}function Kt(Ae){return Ae/360+.5}function cn(Ae){var W=Math.sin(Ae*Math.PI/180),ie=.5-.25*Math.log((1+W)/(1-W))/Math.PI;return ie<0?0:ie>1?1:ie}function fr(Ae,W,ie,he,me,pe,De,Le){if(he/=W,pe>=(ie/=W)&&De<he)return Ae;if(De<ie||pe>=he)return null;for(var Pe=[],Ve=0;Ve<Ae.length;Ve++){var Ue=Ae[Ve],ge=Ue.geometry,Ce=Ue.type,Qe=me===0?Ue.minX:Ue.minY,nt=me===0?Ue.maxX:Ue.maxY;if(Qe>=ie&&nt<he)Pe.push(Ue);else if(!(nt<ie||Qe>=he)){var i=[];if(Ce==="Point"||Ce==="MultiPoint")vn(ge,i,ie,he,me);else if(Ce==="LineString")Dn(ge,i,ie,he,me,!1,Le.lineMetrics);else if(Ce==="MultiLineString")f(ge,i,ie,he,me,!1);else if(Ce==="Polygon")f(ge,i,ie,he,me,!0);else if(Ce==="MultiPolygon")for(var ue=0;ue<ge.length;ue++){var Dt=[];f(ge[ue],Dt,ie,he,me,!0),Dt.length&&i.push(Dt)}if(i.length){if(Le.lineMetrics&&Ce==="LineString"){for(ue=0;ue<i.length;ue++)Pe.push(kn(Ue.id,Ce,i[ue],Ue.tags));continue}Ce!=="LineString"&&Ce!=="MultiLineString"||(i.length===1?(Ce="LineString",i=i[0]):Ce="MultiLineString"),Ce!=="Point"&&Ce!=="MultiPoint"||(Ce=i.length===3?"Point":"MultiPoint"),Pe.push(kn(Ue.id,Ce,i,Ue.tags))}}}return Pe.length?Pe:null}function vn(Ae,W,ie,he,me){for(var pe=0;pe<Ae.length;pe+=3){var De=Ae[pe+me];De>=ie&&De<=he&&(W.push(Ae[pe]),W.push(Ae[pe+1]),W.push(Ae[pe+2]))}}function Dn(Ae,W,ie,he,me,pe,De){for(var Le,Pe,Ve=pn(Ae),Ue=me===0?B:U,ge=Ae.start,Ce=0;Ce<Ae.length-3;Ce+=3){var Qe=Ae[Ce],nt=Ae[Ce+1],i=Ae[Ce+2],ue=Ae[Ce+3],Dt=Ae[Ce+4],Vt=me===0?Qe:nt,Wt=me===0?ue:Dt,It=!1;De&&(Le=Math.sqrt(Math.pow(Qe-ue,2)+Math.pow(nt-Dt,2))),Vt<ie?Wt>ie&&(Pe=Ue(Ve,Qe,nt,ue,Dt,ie),De&&(Ve.start=ge+Le*Pe)):Vt>he?Wt<he&&(Pe=Ue(Ve,Qe,nt,ue,Dt,he),De&&(Ve.start=ge+Le*Pe)):w(Ve,Qe,nt,i),Wt<ie&&Vt>=ie&&(Pe=Ue(Ve,Qe,nt,ue,Dt,ie),It=!0),Wt>he&&Vt<=he&&(Pe=Ue(Ve,Qe,nt,ue,Dt,he),It=!0),!pe&&It&&(De&&(Ve.end=ge+Le*Pe),W.push(Ve),Ve=pn(Ae)),De&&(ge+=Le)}var Bt=Ae.length-3;Qe=Ae[Bt],nt=Ae[Bt+1],i=Ae[Bt+2],(Vt=me===0?Qe:nt)>=ie&&Vt<=he&&w(Ve,Qe,nt,i),Bt=Ve.length-3,pe&&Bt>=3&&(Ve[Bt]!==Ve[0]||Ve[Bt+1]!==Ve[1])&&w(Ve,Ve[0],Ve[1],Ve[2]),Ve.length&&W.push(Ve)}function pn(Ae){var W=[];return W.size=Ae.size,W.start=Ae.start,W.end=Ae.end,W}function f(Ae,W,ie,he,me,pe){for(var De=0;De<Ae.length;De++)Dn(Ae[De],W,ie,he,me,pe,!1)}function w(Ae,W,ie,he){Ae.push(W),Ae.push(ie),Ae.push(he)}function B(Ae,W,ie,he,me,pe){var De=(pe-W)/(he-W);return Ae.push(pe),Ae.push(ie+(me-ie)*De),Ae.push(1),De}function U(Ae,W,ie,he,me,pe){var De=(pe-ie)/(me-ie);return Ae.push(W+(he-W)*De),Ae.push(pe),Ae.push(1),De}function Z(Ae,W){for(var ie=[],he=0;he<Ae.length;he++){var me,pe=Ae[he],De=pe.type;if(De==="Point"||De==="MultiPoint"||De==="LineString")me=K(pe.geometry,W);else if(De==="MultiLineString"||De==="Polygon"){me=[];for(var Le=0;Le<pe.geometry.length;Le++)me.push(K(pe.geometry[Le],W))}else if(De==="MultiPolygon")for(me=[],Le=0;Le<pe.geometry.length;Le++){for(var Pe=[],Ve=0;Ve<pe.geometry[Le].length;Ve++)Pe.push(K(pe.geometry[Le][Ve],W));me.push(Pe)}ie.push(kn(pe.id,De,me,pe.tags))}return ie}function K(Ae,W){var ie=[];ie.size=Ae.size,Ae.start!==void 0&&(ie.start=Ae.start,ie.end=Ae.end);for(var he=0;he<Ae.length;he+=3)ie.push(Ae[he]+W,Ae[he+1],Ae[he+2]);return ie}function se(Ae,W){if(Ae.transformed)return Ae;var ie,he,me,pe=1<<Ae.z,De=Ae.x,Le=Ae.y;for(ie=0;ie<Ae.features.length;ie++){var Pe=Ae.features[ie],Ve=Pe.geometry,Ue=Pe.type;if(Pe.geometry=[],Ue===1)for(he=0;he<Ve.length;he+=2)Pe.geometry.push(oe(Ve[he],Ve[he+1],W,pe,De,Le));else for(he=0;he<Ve.length;he++){var ge=[];for(me=0;me<Ve[he].length;me+=2)ge.push(oe(Ve[he][me],Ve[he][me+1],W,pe,De,Le));Pe.geometry.push(ge)}}return Ae.transformed=!0,Ae}function oe(Ae,W,ie,he,me,pe){return[Math.round(ie*(Ae*he-me)),Math.round(ie*(W*he-pe))]}function fe(Ae,W,ie,he,me){for(var pe=W===me.maxZoom?0:me.tolerance/((1<<W)*me.extent),De={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:ie,y:he,z:W,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Le=0;Le<Ae.length;Le++){De.numFeatures++,ye(De,Ae[Le],pe,me);var Pe=Ae[Le].minX,Ve=Ae[Le].minY,Ue=Ae[Le].maxX,ge=Ae[Le].maxY;Pe<De.minX&&(De.minX=Pe),Ve<De.minY&&(De.minY=Ve),Ue>De.maxX&&(De.maxX=Ue),ge>De.maxY&&(De.maxY=ge)}return De}function ye(Ae,W,ie,he){var me=W.geometry,pe=W.type,De=[];if(pe==="Point"||pe==="MultiPoint")for(var Le=0;Le<me.length;Le+=3)De.push(me[Le]),De.push(me[Le+1]),Ae.numPoints++,Ae.numSimplified++;else if(pe==="LineString")Me(De,me,Ae,ie,!1,!1);else if(pe==="MultiLineString"||pe==="Polygon")for(Le=0;Le<me.length;Le++)Me(De,me[Le],Ae,ie,pe==="Polygon",Le===0);else if(pe==="MultiPolygon")for(var Pe=0;Pe<me.length;Pe++){var Ve=me[Pe];for(Le=0;Le<Ve.length;Le++)Me(De,Ve[Le],Ae,ie,!0,Le===0)}if(De.length){var Ue=W.tags||null;if(pe==="LineString"&&he.lineMetrics){for(var ge in Ue={},W.tags)Ue[ge]=W.tags[ge];Ue.mapbox_clip_start=me.start/me.size,Ue.mapbox_clip_end=me.end/me.size}var Ce={geometry:De,type:pe==="Polygon"||pe==="MultiPolygon"?3:pe==="LineString"||pe==="MultiLineString"?2:1,tags:Ue};W.id!==null&&(Ce.id=W.id),Ae.features.push(Ce)}}function Me(Ae,W,ie,he,me,pe){var De=he*he;if(he>0&&W.size<(me?De:he))ie.numPoints+=W.length/3;else{for(var Le=[],Pe=0;Pe<W.length;Pe+=3)(he===0||W[Pe+2]>De)&&(ie.numSimplified++,Le.push(W[Pe]),Le.push(W[Pe+1])),ie.numPoints++;me&&function(Ve,Ue){for(var ge=0,Ce=0,Qe=Ve.length,nt=Qe-2;Ce<Qe;nt=Ce,Ce+=2)ge+=(Ve[Ce]-Ve[nt])*(Ve[Ce+1]+Ve[nt+1]);if(ge>0===Ue)for(Ce=0,Qe=Ve.length;Ce<Qe/2;Ce+=2){var i=Ve[Ce],ue=Ve[Ce+1];Ve[Ce]=Ve[Qe-2-Ce],Ve[Ce+1]=Ve[Qe-1-Ce],Ve[Qe-2-Ce]=i,Ve[Qe-1-Ce]=ue}}(Le,pe),Ae.push(Le)}}function xe(Ae,W){var ie=(W=this.options=function(me,pe){for(var De in pe)me[De]=pe[De];return me}(Object.create(this.options),W)).debug;if(ie&&console.time("preprocess data"),W.maxZoom<0||W.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(W.promoteId&&W.generateId)throw new Error("promoteId and generateId cannot be used together.");var he=function(me,pe){var De=[];if(me.type==="FeatureCollection")for(var Le=0;Le<me.features.length;Le++)Or(De,me.features[Le],pe,Le);else Or(De,me.type==="Feature"?me:{geometry:me},pe);return De}(Ae,W);this.tiles={},this.tileCoords=[],ie&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",W.indexMaxZoom,W.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),he=function(me,pe){var De=pe.buffer/pe.extent,Le=me,Pe=fr(me,1,-1-De,De,0,-1,2,pe),Ve=fr(me,1,1-De,2+De,0,-1,2,pe);return(Pe||Ve)&&(Le=fr(me,1,-De,1+De,0,-1,2,pe)||[],Pe&&(Le=Z(Pe,1).concat(Le)),Ve&&(Le=Le.concat(Z(Ve,-1)))),Le}(he,W),he.length&&this.splitTile(he,0,0,0),ie&&(he.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function ke(Ae,W,ie){return 32*((1<<Ae)*ie+W)+Ae}function be(Ae,W){return W?Ae.properties[W]:Ae.id}function Ne(Ae,W){if(Ae==null)return!0;if(Ae.type==="Feature")return be(Ae,W)!=null;if(Ae.type==="FeatureCollection"){const ie=new Set;for(const he of Ae.features){const me=be(he,W);if(me==null||ie.has(me))return!1;ie.add(me)}return!0}return!1}function Re(Ae,W){const ie=new Map;if(Ae!=null)if(Ae.type==="Feature")ie.set(be(Ae,W),Ae);else for(const he of Ae.features)ie.set(be(he,W),he);return ie}xe.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},xe.prototype.splitTile=function(Ae,W,ie,he,me,pe,De){for(var Le=[Ae,W,ie,he],Pe=this.options,Ve=Pe.debug;Le.length;){he=Le.pop(),ie=Le.pop(),W=Le.pop(),Ae=Le.pop();var Ue=1<<W,ge=ke(W,ie,he),Ce=this.tiles[ge];if(!Ce&&(Ve>1&&console.time("creation"),Ce=this.tiles[ge]=fe(Ae,W,ie,he,Pe),this.tileCoords.push({z:W,x:ie,y:he}),Ve)){Ve>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",W,ie,he,Ce.numFeatures,Ce.numPoints,Ce.numSimplified),console.timeEnd("creation"));var Qe="z"+W;this.stats[Qe]=(this.stats[Qe]||0)+1,this.total++}if(Ce.source=Ae,me){if(W===Pe.maxZoom||W===me)continue;var nt=1<<me-W;if(ie!==Math.floor(pe/nt)||he!==Math.floor(De/nt))continue}else if(W===Pe.indexMaxZoom||Ce.numPoints<=Pe.indexMaxPoints)continue;if(Ce.source=null,Ae.length!==0){Ve>1&&console.time("clipping");var i,ue,Dt,Vt,Wt,It,Bt=.5*Pe.buffer/Pe.extent,hi=.5-Bt,Zt=.5+Bt,ei=1+Bt;i=ue=Dt=Vt=null,Wt=fr(Ae,Ue,ie-Bt,ie+Zt,0,Ce.minX,Ce.maxX,Pe),It=fr(Ae,Ue,ie+hi,ie+ei,0,Ce.minX,Ce.maxX,Pe),Ae=null,Wt&&(i=fr(Wt,Ue,he-Bt,he+Zt,1,Ce.minY,Ce.maxY,Pe),ue=fr(Wt,Ue,he+hi,he+ei,1,Ce.minY,Ce.maxY,Pe),Wt=null),It&&(Dt=fr(It,Ue,he-Bt,he+Zt,1,Ce.minY,Ce.maxY,Pe),Vt=fr(It,Ue,he+hi,he+ei,1,Ce.minY,Ce.maxY,Pe),It=null),Ve>1&&console.timeEnd("clipping"),Le.push(i||[],W+1,2*ie,2*he),Le.push(ue||[],W+1,2*ie,2*he+1),Le.push(Dt||[],W+1,2*ie+1,2*he),Le.push(Vt||[],W+1,2*ie+1,2*he+1)}}},xe.prototype.getTile=function(Ae,W,ie){var he=this.options,me=he.extent,pe=he.debug;if(Ae<0||Ae>24)return null;var De=1<<Ae,Le=ke(Ae,W=(W%De+De)%De,ie);if(this.tiles[Le])return se(this.tiles[Le],me);pe>1&&console.log("drilling down to z%d-%d-%d",Ae,W,ie);for(var Pe,Ve=Ae,Ue=W,ge=ie;!Pe&&Ve>0;)Ve--,Ue=Math.floor(Ue/2),ge=Math.floor(ge/2),Pe=this.tiles[ke(Ve,Ue,ge)];return Pe&&Pe.source?(pe>1&&console.log("found parent tile z%d-%d-%d",Ve,Ue,ge),pe>1&&console.time("drilling down"),this.splitTile(Pe.source,Ve,Ue,ge,Ae,W,ie),pe>1&&console.timeEnd("drilling down"),this.tiles[Le]?se(this.tiles[Le],me):null):null};class Fe extends le{constructor(W,ie,he,me){super(W,ie,he),this._dataUpdateable=new Map,this.loadGeoJSON=(pe,De)=>{const{promoteId:Le}=pe;if(pe.request)return u.f(pe.request,(Pe,Ve,Ue,ge)=>{this._dataUpdateable=Ne(Ve,Le)?Re(Ve,Le):void 0,De(Pe,Ve,Ue,ge)});if(typeof pe.data=="string")try{const Pe=JSON.parse(pe.data);this._dataUpdateable=Ne(Pe,Le)?Re(Pe,Le):void 0,De(null,Pe)}catch{De(new Error(`Input data given to '${pe.source}' is not a valid GeoJSON object.`))}else pe.dataDiff?this._dataUpdateable?(function(Pe,Ve,Ue){var ge,Ce,Qe,nt;if(Ve.removeAll&&Pe.clear(),Ve.remove)for(const i of Ve.remove)Pe.delete(i);if(Ve.add)for(const i of Ve.add){const ue=be(i,Ue);ue!=null&&Pe.set(ue,i)}if(Ve.update)for(const i of Ve.update){let ue=Pe.get(i.id);if(ue==null)continue;const Dt=!i.removeAllProperties&&(((ge=i.removeProperties)===null||ge===void 0?void 0:ge.length)>0||((Ce=i.addOrUpdateProperties)===null||Ce===void 0?void 0:Ce.length)>0);if((i.newGeometry||i.removeAllProperties||Dt)&&(ue=Object.assign({},ue),Pe.set(i.id,ue),Dt&&(ue.properties=Object.assign({},ue.properties))),i.newGeometry&&(ue.geometry=i.newGeometry),i.removeAllProperties)ue.properties={};else if(((Qe=i.removeProperties)===null||Qe===void 0?void 0:Qe.length)>0)for(const Vt of i.removeProperties)Object.prototype.hasOwnProperty.call(ue.properties,Vt)&&delete ue.properties[Vt];if(((nt=i.addOrUpdateProperties)===null||nt===void 0?void 0:nt.length)>0)for(const{key:Vt,value:Wt}of i.addOrUpdateProperties)ue.properties[Vt]=Wt}}(this._dataUpdateable,pe.dataDiff,Le),De(null,{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())})):De(new Error(`Cannot update existing geojson data in ${pe.source}`)):De(new Error(`Input data given to '${pe.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}},this.loadVectorData=this.loadGeoJSONTile,me&&(this.loadGeoJSON=me)}loadGeoJSONTile(W,ie){const he=W.tileID.canonical;if(!this._geoJSONIndex)return ie(null,null);const me=this._geoJSONIndex.getTile(he.z,he.x,he.y);if(!me)return ie(null,null);const pe=new class{constructor(Le){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=u.N,this.length=Le.length,this._features=Le}feature(Le){return new class{constructor(Pe){this._feature=Pe,this.extent=u.N,this.type=Pe.type,this.properties=Pe.tags,"id"in Pe&&!isNaN(Pe.id)&&(this.id=parseInt(Pe.id,10))}loadGeometry(){if(this._feature.type===1){const Pe=[];for(const Ve of this._feature.geometry)Pe.push([new u.P(Ve[0],Ve[1])]);return Pe}{const Pe=[];for(const Ve of this._feature.geometry){const Ue=[];for(const ge of Ve)Ue.push(new u.P(ge[0],ge[1]));Pe.push(Ue)}return Pe}}toGeoJSON(Pe,Ve,Ue){return xt.call(this,Pe,Ve,Ue)}}(this._features[Le])}}(me.features);let De=Lt(pe);De.byteOffset===0&&De.byteLength===De.buffer.byteLength||(De=new Uint8Array(De)),ie(null,{vectorTile:pe,rawData:De.buffer})}loadData(W,ie){var he;(he=this._pendingRequest)===null||he===void 0||he.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const me=!!(W&&W.request&&W.request.collectResourceTiming)&&new u.bu(W.request);this._pendingCallback=ie,this._pendingRequest=this.loadGeoJSON(W,(pe,De)=>{if(delete this._pendingCallback,delete this._pendingRequest,pe||!De)return ie(pe);if(typeof De!="object")return ie(new Error(`Input data given to '${W.source}' is not a valid GeoJSON object.`));{Ke(De,!0);try{if(W.filter){const Pe=u.bC(W.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Pe.result==="error")throw new Error(Pe.value.map(Ue=>`${Ue.key}: ${Ue.message}`).join(", "));De={type:"FeatureCollection",features:De.features.filter(Ue=>Pe.value.evaluate({zoom:0},Ue))}}this._geoJSONIndex=W.cluster?new Bn(function({superclusterOptions:Pe,clusterProperties:Ve}){if(!Ve||!Pe)return Pe;const Ue={},ge={},Ce={accumulated:null,zoom:0},Qe={properties:null},nt=Object.keys(Ve);for(const i of nt){const[ue,Dt]=Ve[i],Vt=u.bC(Dt),Wt=u.bC(typeof ue=="string"?[ue,["accumulated"],["get",i]]:ue);Ue[i]=Vt.value,ge[i]=Wt.value}return Pe.map=i=>{Qe.properties=i;const ue={};for(const Dt of nt)ue[Dt]=Ue[Dt].evaluate(Ce,Qe);return ue},Pe.reduce=(i,ue)=>{Qe.properties=ue;for(const Dt of nt)Ce.accumulated=i[Dt],i[Dt]=ge[Dt].evaluate(Ce,Qe)},Pe}(W)).load(De.features):function(Pe,Ve){return new xe(Pe,Ve)}(De,W.geojsonVtOptions)}catch(Pe){return ie(Pe)}this.loaded={};const Le={};if(me){const Pe=me.finish();Pe&&(Le.resourceTiming={},Le.resourceTiming[W.source]=JSON.parse(JSON.stringify(Pe)))}ie(null,Le)}})}reloadTile(W,ie){const he=this.loaded;return he&&he[W.uid]?super.reloadTile(W,ie):this.loadTile(W,ie)}removeSource(W,ie){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),ie()}getClusterExpansionZoom(W,ie){try{ie(null,this._geoJSONIndex.getClusterExpansionZoom(W.clusterId))}catch(he){ie(he)}}getClusterChildren(W,ie){try{ie(null,this._geoJSONIndex.getChildren(W.clusterId))}catch(he){ie(he)}}getClusterLeaves(W,ie){try{ie(null,this._geoJSONIndex.getLeaves(W.clusterId,W.limit,W.offset))}catch(he){ie(he)}}}class de{constructor(W){this.self=W,this.actor=new u.C(W,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:le,geojson:Fe},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(ie,he)=>{if(this.workerSourceTypes[ie])throw new Error(`Worker source with name "${ie}" already registered.`);this.workerSourceTypes[ie]=he},this.self.registerRTLTextPlugin=ie=>{if(u.bD.isParsed())throw new Error("RTL text plugin already registered.");u.bD.applyArabicShaping=ie.applyArabicShaping,u.bD.processBidirectionalText=ie.processBidirectionalText,u.bD.processStyledBidirectionalText=ie.processStyledBidirectionalText}}setReferrer(W,ie){this.referrer=ie}setImages(W,ie,he){this.availableImages[W]=ie;for(const me in this.workerSources[W]){const pe=this.workerSources[W][me];for(const De in pe)pe[De].availableImages=ie}he()}setLayers(W,ie,he){this.getLayerIndex(W).replace(ie),he()}updateLayers(W,ie,he){this.getLayerIndex(W).update(ie.layers,ie.removedIds),he()}loadTile(W,ie,he){this.getWorkerSource(W,ie.type,ie.source).loadTile(ie,he)}loadDEMTile(W,ie,he){this.getDEMWorkerSource(W,ie.source).loadTile(ie,he)}reloadTile(W,ie,he){this.getWorkerSource(W,ie.type,ie.source).reloadTile(ie,he)}abortTile(W,ie,he){this.getWorkerSource(W,ie.type,ie.source).abortTile(ie,he)}removeTile(W,ie,he){this.getWorkerSource(W,ie.type,ie.source).removeTile(ie,he)}removeDEMTile(W,ie){this.getDEMWorkerSource(W,ie.source).removeTile(ie)}removeSource(W,ie,he){if(!this.workerSources[W]||!this.workerSources[W][ie.type]||!this.workerSources[W][ie.type][ie.source])return;const me=this.workerSources[W][ie.type][ie.source];delete this.workerSources[W][ie.type][ie.source],me.removeSource!==void 0?me.removeSource(ie,he):he()}loadWorkerSource(W,ie,he){try{this.self.importScripts(ie.url),he()}catch(me){he(me.toString())}}syncRTLPluginState(W,ie,he){try{u.bD.setState(ie);const me=u.bD.getPluginURL();if(u.bD.isLoaded()&&!u.bD.isParsed()&&me!=null){this.self.importScripts(me);const pe=u.bD.isParsed();he(pe?void 0:new Error(`RTL Text Plugin failed to import scripts from ${me}`),pe)}}catch(me){he(me.toString())}}getAvailableImages(W){let ie=this.availableImages[W];return ie||(ie=[]),ie}getLayerIndex(W){let ie=this.layerIndexes[W];return ie||(ie=this.layerIndexes[W]=new Q),ie}getWorkerSource(W,ie,he){return this.workerSources[W]||(this.workerSources[W]={}),this.workerSources[W][ie]||(this.workerSources[W][ie]={}),this.workerSources[W][ie][he]||(this.workerSources[W][ie][he]=new this.workerSourceTypes[ie]({send:(me,pe,De)=>{this.actor.send(me,pe,De,W)}},this.getLayerIndex(W),this.getAvailableImages(W))),this.workerSources[W][ie][he]}getDEMWorkerSource(W,ie){return this.demWorkerSources[W]||(this.demWorkerSources[W]={}),this.demWorkerSources[W][ie]||(this.demWorkerSources[W][ie]=new je),this.demWorkerSources[W][ie]}}return u.i()&&(self.worker=new de(self)),de}),g(["./shared"],function(u){var Q="3.6.2";class O{static testProp(r){if(!O.docStyle)return r[0];for(let d=0;d<r.length;d++)if(r[d]in O.docStyle)return r[d];return r[0]}static create(r,d,k){const I=window.document.createElement(r);return d!==void 0&&(I.className=d),k&&k.appendChild(I),I}static createNS(r,d){return window.document.createElementNS(r,d)}static disableDrag(){O.docStyle&&O.selectProp&&(O.userSelect=O.docStyle[O.selectProp],O.docStyle[O.selectProp]="none")}static enableDrag(){O.docStyle&&O.selectProp&&(O.docStyle[O.selectProp]=O.userSelect)}static setTransform(r,d){r.style[O.transformProp]=d}static addEventListener(r,d,k,I={}){r.addEventListener(d,k,"passive"in I?I:I.capture)}static removeEventListener(r,d,k,I={}){r.removeEventListener(d,k,"passive"in I?I:I.capture)}static suppressClickInternal(r){r.preventDefault(),r.stopPropagation(),window.removeEventListener("click",O.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",O.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",O.suppressClickInternal,!0)},0)}static mousePos(r,d){const k=r.getBoundingClientRect();return new u.P(d.clientX-k.left-r.clientLeft,d.clientY-k.top-r.clientTop)}static touchPos(r,d){const k=r.getBoundingClientRect(),I=[];for(let R=0;R<d.length;R++)I.push(new u.P(d[R].clientX-k.left-r.clientLeft,d[R].clientY-k.top-r.clientTop));return I}static mouseButton(r){return r.button}static remove(r){r.parentNode&&r.parentNode.removeChild(r)}}O.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,O.selectProp=O.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),O.transformProp=O.testProp(["transform","WebkitTransform"]);const re={supported:!1,testSupport:function(L){!le&&ce&&(je?Je(L):ee=L)}};let ee,ce,le=!1,je=!1;function Je(L){const r=L.createTexture();L.bindTexture(L.TEXTURE_2D,r);try{if(L.texImage2D(L.TEXTURE_2D,0,L.RGBA,L.RGBA,L.UNSIGNED_BYTE,ce),L.isContextLost())return;re.supported=!0}catch{}L.deleteTexture(r),le=!0}var Xe,Ke;typeof document<"u"&&(ce=document.createElement("img"),ce.onload=function(){ee&&Je(ee),ee=null,je=!0},ce.onerror=function(){le=!0,ee=null},ce.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(L){let r,d,k,I;L.resetRequestQueue=()=>{r=[],d=0,k=0,I={}},L.addThrottleControl=h=>{const p=k++;return I[p]=h,p},L.removeThrottleControl=h=>{delete I[h],a()},L.getImage=(h,p,v=!0)=>{re.supported&&(h.headers||(h.headers={}),h.headers.accept="image/webp,*/*");const E={requestParameters:h,supportImageRefresh:v,callback:p,cancelled:!1,completed:!1,cancel:()=>{E.completed||E.cancelled||(E.cancelled=!0,E.innerRequest&&(E.innerRequest.cancel(),d--),a())}};return r.push(E),a(),E};const R=h=>{const{requestParameters:p,supportImageRefresh:v,callback:E}=h;return u.e(p,{type:"image"}),(v!==!1||u.i()||u.g(p.url)||p.headers&&!Object.keys(p.headers).reduce((z,F)=>z&&F==="accept",!0)?u.m:o)(p,(z,F,Y,J)=>{q(h,E,z,F,Y,J)})},q=(h,p,v,E,z,F)=>{v?p(v):E instanceof HTMLImageElement||u.a(E)?p(null,E):E&&((Y,J)=>{typeof createImageBitmap=="function"?u.b(Y,J):u.d(Y,J)})(E,(Y,J)=>{Y!=null?p(Y):J!=null&&p(null,J,{cacheControl:z,expires:F})}),h.cancelled||(h.completed=!0,d--,a())},a=()=>{const h=(()=>{const p=Object.keys(I);let v=!1;if(p.length>0){for(const E of p)if(v=I[E](),v)break}return v})()?u.c.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:u.c.MAX_PARALLEL_IMAGE_REQUESTS;for(let p=d;p<h&&r.length>0;p++){const v=r.shift();if(v.cancelled){p--;continue}const E=R(v);d++,v.innerRequest=E}},o=(h,p)=>{const v=new Image,E=h.url;let z=!1;const F=h.credentials;return F&&F==="include"?v.crossOrigin="use-credentials":(F&&F==="same-origin"||!u.s(E))&&(v.crossOrigin="anonymous"),v.fetchPriority="high",v.onload=()=>{p(null,v),v.onerror=v.onload=null},v.onerror=()=>{z||p(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")),v.onerror=v.onload=null},v.src=E,{cancel:()=>{z=!0,v.src=""}}}}(Xe||(Xe={})),Xe.resetRequestQueue(),function(L){L.Glyphs="Glyphs",L.Image="Image",L.Source="Source",L.SpriteImage="SpriteImage",L.SpriteJSON="SpriteJSON",L.Style="Style",L.Tile="Tile",L.Unknown="Unknown"}(Ke||(Ke={}));class xt{constructor(r){this._transformRequestFn=r}transformRequest(r,d){return this._transformRequestFn&&this._transformRequestFn(r,d)||{url:r}}normalizeSpriteURL(r,d,k){const I=function(R){const q=R.match(gt);if(!q)throw new Error(`Unable to parse URL "${R}"`);return{protocol:q[1],authority:q[2],path:q[3]||"/",params:q[4]?q[4].split("&"):[]}}(r);return I.path+=`${d}${k}`,function(R){const q=R.params.length?`?${R.params.join("&")}`:"";return`${R.protocol}://${R.authority}${R.path}${q}`}(I)}setTransformRequest(r){this._transformRequestFn=r}}const gt=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Mt(L){var r=new u.A(3);return r[0]=L[0],r[1]=L[1],r[2]=L[2],r}var Ct,Te=function(L,r,d){return L[0]=r[0]-d[0],L[1]=r[1]-d[1],L[2]=r[2]-d[2],L};Ct=new u.A(3),u.A!=Float32Array&&(Ct[0]=0,Ct[1]=0,Ct[2]=0);var Ai=function(L){var r=L[0],d=L[1];return r*r+d*d};function ii(L){const r=[];if(typeof L=="string")r.push({id:"default",url:L});else if(L&&L.length>0){const d=[];for(const{id:k,url:I}of L){const R=`${k}${I}`;d.indexOf(R)===-1&&(d.push(R),r.push({id:k,url:I}))}}return r}function xi(L,r,d,k,I){if(k)return void L(k);if(I!==Object.values(r).length||I!==Object.values(d).length)return;const R={};for(const q in r){R[q]={};const a=u.h.getImageCanvasContext(d[q]),o=r[q];for(const h in o){const{width:p,height:v,x:E,y:z,sdf:F,pixelRatio:Y,stretchX:J,stretchY:ve,content:Ie}=o[h];R[q][h]={data:null,pixelRatio:Y,sdf:F,stretchX:J,stretchY:ve,content:Ie,spriteData:{width:p,height:v,x:E,y:z,context:a}}}}L(null,R)}(function(){var L=new u.A(2);u.A!=Float32Array&&(L[0]=0,L[1]=0)})();class gi{constructor(r,d,k,I){this.context=r,this.format=k,this.texture=r.gl.createTexture(),this.update(d,I)}update(r,d,k){const{width:I,height:R}=r,q=!(this.size&&this.size[0]===I&&this.size[1]===R||k),{context:a}=this,{gl:o}=a;if(this.useMipmap=!!(d&&d.useMipmap),o.bindTexture(o.TEXTURE_2D,this.texture),a.pixelStoreUnpackFlipY.set(!1),a.pixelStoreUnpack.set(1),a.pixelStoreUnpackPremultiplyAlpha.set(this.format===o.RGBA&&(!d||d.premultiply!==!1)),q)this.size=[I,R],r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||u.a(r)?o.texImage2D(o.TEXTURE_2D,0,this.format,this.format,o.UNSIGNED_BYTE,r):o.texImage2D(o.TEXTURE_2D,0,this.format,I,R,0,this.format,o.UNSIGNED_BYTE,r.data);else{const{x:h,y:p}=k||{x:0,y:0};r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||u.a(r)?o.texSubImage2D(o.TEXTURE_2D,0,h,p,o.RGBA,o.UNSIGNED_BYTE,r):o.texSubImage2D(o.TEXTURE_2D,0,h,p,I,R,o.RGBA,o.UNSIGNED_BYTE,r.data)}this.useMipmap&&this.isSizePowerOfTwo()&&o.generateMipmap(o.TEXTURE_2D)}bind(r,d,k){const{context:I}=this,{gl:R}=I;R.bindTexture(R.TEXTURE_2D,this.texture),k!==R.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(k=R.LINEAR),r!==this.filter&&(R.texParameteri(R.TEXTURE_2D,R.TEXTURE_MAG_FILTER,r),R.texParameteri(R.TEXTURE_2D,R.TEXTURE_MIN_FILTER,k||r),this.filter=r),d!==this.wrap&&(R.texParameteri(R.TEXTURE_2D,R.TEXTURE_WRAP_S,d),R.texParameteri(R.TEXTURE_2D,R.TEXTURE_WRAP_T,d),this.wrap=d)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:r}=this.context;r.deleteTexture(this.texture),this.texture=null}}function qt(L){const{userImage:r}=L;return!!(r&&r.render&&r.render())&&(L.data.replace(new Uint8Array(r.data.buffer)),!0)}class di extends u.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new u.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(r){if(this.loaded!==r&&(this.loaded=r,r)){for(const{ids:d,callback:k}of this.requestors)this._notify(d,k);this.requestors=[]}}getImage(r){const d=this.images[r];if(d&&!d.data&&d.spriteData){const k=d.spriteData;d.data=new u.R({width:k.width,height:k.height},k.context.getImageData(k.x,k.y,k.width,k.height).data),d.spriteData=null}return d}addImage(r,d){if(this.images[r])throw new Error(`Image id ${r} already exist, use updateImage instead`);this._validate(r,d)&&(this.images[r]=d)}_validate(r,d){let k=!0;const I=d.data||d.spriteData;return this._validateStretch(d.stretchX,I&&I.width)||(this.fire(new u.j(new Error(`Image "${r}" has invalid "stretchX" value`))),k=!1),this._validateStretch(d.stretchY,I&&I.height)||(this.fire(new u.j(new Error(`Image "${r}" has invalid "stretchY" value`))),k=!1),this._validateContent(d.content,d)||(this.fire(new u.j(new Error(`Image "${r}" has invalid "content" value`))),k=!1),k}_validateStretch(r,d){if(!r)return!0;let k=0;for(const I of r){if(I[0]<k||I[1]<I[0]||d<I[1])return!1;k=I[1]}return!0}_validateContent(r,d){if(!r)return!0;if(r.length!==4)return!1;const k=d.spriteData,I=k&&k.width||d.data.width,R=k&&k.height||d.data.height;return!(r[0]<0||I<r[0]||r[1]<0||R<r[1]||r[2]<0||I<r[2]||r[3]<0||R<r[3]||r[2]<r[0]||r[3]<r[1])}updateImage(r,d,k=!0){const I=this.getImage(r);if(k&&(I.data.width!==d.data.width||I.data.height!==d.data.height))throw new Error(`size mismatch between old image (${I.data.width}x${I.data.height}) and new image (${d.data.width}x${d.data.height}).`);d.version=I.version+1,this.images[r]=d,this.updatedImages[r]=!0}removeImage(r){const d=this.images[r];delete this.images[r],delete this.patterns[r],d.userImage&&d.userImage.onRemove&&d.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(r,d){let k=!0;if(!this.isLoaded())for(const I of r)this.images[I]||(k=!1);this.isLoaded()||k?this._notify(r,d):this.requestors.push({ids:r,callback:d})}_notify(r,d){const k={};for(const I of r){let R=this.getImage(I);R||(this.fire(new u.k("styleimagemissing",{id:I})),R=this.getImage(I)),R?k[I]={data:R.data.clone(),pixelRatio:R.pixelRatio,sdf:R.sdf,version:R.version,stretchX:R.stretchX,stretchY:R.stretchY,content:R.content,hasRenderCallback:!!(R.userImage&&R.userImage.render)}:u.w(`Image "${I}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}d(null,k)}getPixelSize(){const{width:r,height:d}=this.atlasImage;return{width:r,height:d}}getPattern(r){const d=this.patterns[r],k=this.getImage(r);if(!k)return null;if(d&&d.position.version===k.version)return d.position;if(d)d.position.version=k.version;else{const I={w:k.data.width+2,h:k.data.height+2,x:0,y:0},R=new u.I(I,k);this.patterns[r]={bin:I,position:R}}return this._updatePatternAtlas(),this.patterns[r].position}bind(r){const d=r.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new gi(r,this.atlasImage,d.RGBA),this.atlasTexture.bind(d.LINEAR,d.CLAMP_TO_EDGE)}_updatePatternAtlas(){const r=[];for(const R in this.patterns)r.push(this.patterns[R].bin);const{w:d,h:k}=u.p(r),I=this.atlasImage;I.resize({width:d||1,height:k||1});for(const R in this.patterns){const{bin:q}=this.patterns[R],a=q.x+1,o=q.y+1,h=this.getImage(R).data,p=h.width,v=h.height;u.R.copy(h,I,{x:0,y:0},{x:a,y:o},{width:p,height:v}),u.R.copy(h,I,{x:0,y:v-1},{x:a,y:o-1},{width:p,height:1}),u.R.copy(h,I,{x:0,y:0},{x:a,y:o+v},{width:p,height:1}),u.R.copy(h,I,{x:p-1,y:0},{x:a-1,y:o},{width:1,height:v}),u.R.copy(h,I,{x:0,y:0},{x:a+p,y:o},{width:1,height:v})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(r){for(const d of r){if(this.callbackDispatchedThisFrame[d])continue;this.callbackDispatchedThisFrame[d]=!0;const k=this.getImage(d);k||u.w(`Image with ID: "${d}" was not found`),qt(k)&&this.updateImage(d,k)}}}const mi=1e20;function vt(L,r,d,k,I,R,q,a,o){for(let h=r;h<r+k;h++)Ut(L,d*R+h,R,I,q,a,o);for(let h=d;h<d+I;h++)Ut(L,h*R+r,1,k,q,a,o)}function Ut(L,r,d,k,I,R,q){R[0]=0,q[0]=-mi,q[1]=mi,I[0]=L[r];for(let a=1,o=0,h=0;a<k;a++){I[a]=L[r+a*d];const p=a*a;do{const v=R[o];h=(I[a]-I[v]+p-v*v)/(a-v)/2}while(h<=q[o]&&--o>-1);o++,R[o]=a,q[o]=h,q[o+1]=mi}for(let a=0,o=0;a<k;a++){for(;q[o+1]<a;)o++;const h=R[o],p=a-h;L[r+a*d]=I[h]+p*p}}class rt{constructor(r,d){this.requestManager=r,this.localIdeographFontFamily=d,this.entries={}}setURL(r){this.url=r}getGlyphs(r,d){const k=[];for(const I in r)for(const R of r[I])k.push({stack:I,id:R});u.o(k,({stack:I,id:R},q)=>{let a=this.entries[I];a||(a=this.entries[I]={glyphs:{},requests:{},ranges:{}});let o=a.glyphs[R];if(o!==void 0)return void q(null,{stack:I,id:R,glyph:o});if(o=this._tinySDF(a,I,R),o)return a.glyphs[R]=o,void q(null,{stack:I,id:R,glyph:o});const h=Math.floor(R/256);if(256*h>65535)return void q(new Error("glyphs > 65535 not supported"));if(a.ranges[h])return void q(null,{stack:I,id:R,glyph:o});if(!this.url)return void q(new Error("glyphsUrl is not set"));let p=a.requests[h];p||(p=a.requests[h]=[],rt.loadGlyphRange(I,h,this.url,this.requestManager,(v,E)=>{if(E){for(const z in E)this._doesCharSupportLocalGlyph(+z)||(a.glyphs[+z]=E[+z]);a.ranges[h]=!0}for(const z of p)z(v,E);delete a.requests[h]})),p.push((v,E)=>{v?q(v):E&&q(null,{stack:I,id:R,glyph:E[R]||null})})},(I,R)=>{if(I)d(I);else if(R){const q={};for(const{stack:a,id:o,glyph:h}of R)(q[a]||(q[a]={}))[o]=h&&{id:h.id,bitmap:h.bitmap.clone(),metrics:h.metrics};d(null,q)}})}_doesCharSupportLocalGlyph(r){return!!this.localIdeographFontFamily&&(u.u["CJK Unified Ideographs"](r)||u.u["Hangul Syllables"](r)||u.u.Hiragana(r)||u.u.Katakana(r))}_tinySDF(r,d,k){const I=this.localIdeographFontFamily;if(!I||!this._doesCharSupportLocalGlyph(k))return;let R=r.tinySDF;if(!R){let a="400";/bold/i.test(d)?a="900":/medium/i.test(d)?a="500":/light/i.test(d)&&(a="200"),R=r.tinySDF=new rt.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:I,fontWeight:a})}const q=R.draw(String.fromCharCode(k));return{id:k,bitmap:new u.q({width:q.width||60,height:q.height||60},q.data),metrics:{width:q.glyphWidth/2||24,height:q.glyphHeight/2||24,left:q.glyphLeft/2+.5||0,top:q.glyphTop/2-27.5||-8,advance:q.glyphAdvance/2||24,isDoubleResolution:!0}}}}rt.loadGlyphRange=function(L,r,d,k,I){const R=256*r,q=R+255,a=k.transformRequest(d.replace("{fontstack}",L).replace("{range}",`${R}-${q}`),Ke.Glyphs);u.l(a,(o,h)=>{if(o)I(o);else if(h){const p={};for(const v of u.n(h))p[v.id]=v;I(null,p)}})},rt.TinySDF=class{constructor({fontSize:L=24,buffer:r=3,radius:d=8,cutoff:k=.25,fontFamily:I="sans-serif",fontWeight:R="normal",fontStyle:q="normal"}={}){this.buffer=r,this.cutoff=k,this.radius=d;const a=this.size=L+4*r,o=this._createCanvas(a),h=this.ctx=o.getContext("2d",{willReadFrequently:!0});h.font=`${q} ${R} ${L}px ${I}`,h.textBaseline="alphabetic",h.textAlign="left",h.fillStyle="black",this.gridOuter=new Float64Array(a*a),this.gridInner=new Float64Array(a*a),this.f=new Float64Array(a),this.z=new Float64Array(a+1),this.v=new Uint16Array(a)}_createCanvas(L){const r=document.createElement("canvas");return r.width=r.height=L,r}draw(L){const{width:r,actualBoundingBoxAscent:d,actualBoundingBoxDescent:k,actualBoundingBoxLeft:I,actualBoundingBoxRight:R}=this.ctx.measureText(L),q=Math.ceil(d),a=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(R-I))),o=Math.min(this.size-this.buffer,q+Math.ceil(k)),h=a+2*this.buffer,p=o+2*this.buffer,v=Math.max(h*p,0),E=new Uint8ClampedArray(v),z={data:E,width:h,height:p,glyphWidth:a,glyphHeight:o,glyphTop:q,glyphLeft:0,glyphAdvance:r};if(a===0||o===0)return z;const{ctx:F,buffer:Y,gridInner:J,gridOuter:ve}=this;F.clearRect(Y,Y,a,o),F.fillText(L,Y,Y+q);const Ie=F.getImageData(Y,Y,a,o);ve.fill(mi,0,v),J.fill(0,0,v);for(let Oe=0;Oe<o;Oe++)for(let He=0;He<a;He++){const We=Ie.data[4*(Oe*a+He)+3]/255;if(We===0)continue;const st=(Oe+Y)*h+He+Y;if(We===1)ve[st]=0,J[st]=mi;else{const wt=.5-We;ve[st]=wt>0?wt*wt:0,J[st]=wt<0?wt*wt:0}}vt(ve,0,0,h,p,h,this.f,this.v,this.z),vt(J,Y,Y,a,o,h,this.f,this.v,this.z);for(let Oe=0;Oe<v;Oe++){const He=Math.sqrt(ve[Oe])-Math.sqrt(J[Oe]);E[Oe]=Math.round(255-255*(He/this.radius+this.cutoff))}return z}};class Ft{constructor(){this.specification=u.v.light.position}possiblyEvaluate(r,d){return u.z(r.expression.evaluate(d))}interpolate(r,d,k){return{x:u.B.number(r.x,d.x,k),y:u.B.number(r.y,d.y,k),z:u.B.number(r.z,d.z,k)}}}let ui;class Lt extends u.E{constructor(r){super(),ui=ui||new u.r({anchor:new u.D(u.v.light.anchor),position:new Ft,color:new u.D(u.v.light.color),intensity:new u.D(u.v.light.intensity)}),this._transitionable=new u.T(ui),this.setLight(r),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(r,d={}){if(!this._validate(u.t,r,d))for(const k in r){const I=r[k];k.endsWith("-transition")?this._transitionable.setTransition(k.slice(0,-11),I):this._transitionable.setValue(k,I)}}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}_validate(r,d,k){return(!k||k.validate!==!1)&&u.x(this,r.call(u.y,u.e({value:d,style:{glyphs:!0,sprite:!0},styleSpec:u.v})))}}class Yt{constructor(r,d){this.width=r,this.height=d,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(r,d){const k=r.join(",")+String(d);return this.dashEntry[k]||(this.dashEntry[k]=this.addDash(r,d)),this.dashEntry[k]}getDashRanges(r,d,k){const I=[];let R=r.length%2==1?-r[r.length-1]*k:0,q=r[0]*k,a=!0;I.push({left:R,right:q,isDash:a,zeroLength:r[0]===0});let o=r[0];for(let h=1;h<r.length;h++){a=!a;const p=r[h];R=o*k,o+=p,q=o*k,I.push({left:R,right:q,isDash:a,zeroLength:p===0})}return I}addRoundDash(r,d,k){const I=d/2;for(let R=-k;R<=k;R++){const q=this.width*(this.nextRow+k+R);let a=0,o=r[a];for(let h=0;h<this.width;h++){h/o.right>1&&(o=r[++a]);const p=Math.abs(h-o.left),v=Math.abs(h-o.right),E=Math.min(p,v);let z;const F=R/k*(I+1);if(o.isDash){const Y=I-Math.abs(F);z=Math.sqrt(E*E+Y*Y)}else z=I-Math.sqrt(E*E+F*F);this.data[q+h]=Math.max(0,Math.min(255,z+128))}}}addRegularDash(r){for(let a=r.length-1;a>=0;--a){const o=r[a],h=r[a+1];o.zeroLength?r.splice(a,1):h&&h.isDash===o.isDash&&(h.left=o.left,r.splice(a,1))}const d=r[0],k=r[r.length-1];d.isDash===k.isDash&&(d.left=k.left-this.width,k.right=d.right+this.width);const I=this.width*this.nextRow;let R=0,q=r[R];for(let a=0;a<this.width;a++){a/q.right>1&&(q=r[++R]);const o=Math.abs(a-q.left),h=Math.abs(a-q.right),p=Math.min(o,h);this.data[I+a]=Math.max(0,Math.min(255,(q.isDash?p:-p)+128))}}addDash(r,d){const k=d?7:0,I=2*k+1;if(this.nextRow+I>this.height)return u.w("LineAtlas out of space"),null;let R=0;for(let a=0;a<r.length;a++)R+=r[a];if(R!==0){const a=this.width/R,o=this.getDashRanges(r,this.width,a);d?this.addRoundDash(o,a,k):this.addRegularDash(o)}const q={y:(this.nextRow+k+.5)/this.height,height:2*k/this.height,width:R};return this.nextRow+=I,this.dirty=!0,q}bind(r){const d=r.gl;this.texture?(d.bindTexture(d.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,d.texSubImage2D(d.TEXTURE_2D,0,0,0,this.width,this.height,d.ALPHA,d.UNSIGNED_BYTE,this.data))):(this.texture=d.createTexture(),d.bindTexture(d.TEXTURE_2D,this.texture),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.REPEAT),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.REPEAT),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.LINEAR),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.LINEAR),d.texImage2D(d.TEXTURE_2D,0,d.ALPHA,this.width,this.height,0,d.ALPHA,d.UNSIGNED_BYTE,this.data))}}class oi{constructor(r,d,k){this.workerPool=r,this.actors=[],this.currentActor=0,this.id=k;const I=this.workerPool.acquire(k);for(let R=0;R<I.length;R++){const q=new u.C(I[R],d,k);q.name=`Worker ${R}`,this.actors.push(q)}if(!this.actors.length)throw new Error("No actors found")}broadcast(r,d,k){u.o(this.actors,(I,R)=>{I.send(r,d,R)},k=k||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(r=!0){this.actors.forEach(d=>{d.remove()}),this.actors=[],r&&this.workerPool.release(this.id)}}function yi(L,r,d){const k=function(I,R){if(I)return d(I);if(R){const q=u.F(u.e(R,L),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);R.vector_layers&&(q.vectorLayers=R.vector_layers,q.vectorLayerIds=q.vectorLayers.map(a=>a.id)),d(null,q)}};return L.url?u.f(r.transformRequest(L.url,Ke.Source),k):u.h.frame(()=>k(null,L))}class Pi{constructor(r,d){r&&(d?this.setSouthWest(r).setNorthEast(d):Array.isArray(r)&&(r.length===4?this.setSouthWest([r[0],r[1]]).setNorthEast([r[2],r[3]]):this.setSouthWest(r[0]).setNorthEast(r[1])))}setNorthEast(r){return this._ne=r instanceof u.L?new u.L(r.lng,r.lat):u.L.convert(r),this}setSouthWest(r){return this._sw=r instanceof u.L?new u.L(r.lng,r.lat):u.L.convert(r),this}extend(r){const d=this._sw,k=this._ne;let I,R;if(r instanceof u.L)I=r,R=r;else{if(!(r instanceof Pi))return Array.isArray(r)?r.length===4||r.every(Array.isArray)?this.extend(Pi.convert(r)):this.extend(u.L.convert(r)):r&&("lng"in r||"lon"in r)&&"lat"in r?this.extend(u.L.convert(r)):this;if(I=r._sw,R=r._ne,!I||!R)return this}return d||k?(d.lng=Math.min(I.lng,d.lng),d.lat=Math.min(I.lat,d.lat),k.lng=Math.max(R.lng,k.lng),k.lat=Math.max(R.lat,k.lat)):(this._sw=new u.L(I.lng,I.lat),this._ne=new u.L(R.lng,R.lat)),this}getCenter(){return new u.L((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new u.L(this.getWest(),this.getNorth())}getSouthEast(){return new u.L(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(r){const{lng:d,lat:k}=u.L.convert(r);let I=this._sw.lng<=d&&d<=this._ne.lng;return this._sw.lng>this._ne.lng&&(I=this._sw.lng>=d&&d>=this._ne.lng),this._sw.lat<=k&&k<=this._ne.lat&&I}static convert(r){return r instanceof Pi?r:r&&new Pi(r)}static fromLngLat(r,d=0){const k=360*d/40075017,I=k/Math.cos(Math.PI/180*r.lat);return new Pi(new u.L(r.lng-I,r.lat-k),new u.L(r.lng+I,r.lat+k))}}class dn{constructor(r,d,k){this.bounds=Pi.convert(this.validateBounds(r)),this.minzoom=d||0,this.maxzoom=k||24}validateBounds(r){return Array.isArray(r)&&r.length===4?[Math.max(-180,r[0]),Math.max(-90,r[1]),Math.min(180,r[2]),Math.min(90,r[3])]:[-180,-90,180,90]}contains(r){const d=Math.pow(2,r.z),k=Math.floor(u.G(this.bounds.getWest())*d),I=Math.floor(u.H(this.bounds.getNorth())*d),R=Math.ceil(u.G(this.bounds.getEast())*d),q=Math.ceil(u.H(this.bounds.getSouth())*d);return r.x>=k&&r.x<R&&r.y>=I&&r.y<q}}class sn extends u.E{constructor(r,d,k,I){if(super(),this.load=()=>{this._loaded=!1,this.fire(new u.k("dataloading",{dataType:"source"})),this._tileJSONRequest=yi(this._options,this.map._requestManager,(R,q)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),R?this.fire(new u.j(R)):q&&(u.e(this,q),q.bounds&&(this.tileBounds=new dn(q.bounds,this.minzoom,this.maxzoom)),this.fire(new u.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new u.k("data",{dataType:"source",sourceDataType:"content"})))})},this.serialize=()=>u.e({},this._options),this.id=r,this.dispatcher=k,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,u.e(this,u.F(d,["url","scheme","tileSize","promoteId"])),this._options=u.e({type:"vector"},d),this._collectResourceTiming=d.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(I)}loaded(){return this._loaded}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}onAdd(r){this.map=r,this.load()}setSourceProperty(r){this._tileJSONRequest&&this._tileJSONRequest.cancel(),r(),this.load()}setTiles(r){return this.setSourceProperty(()=>{this._options.tiles=r}),this}setUrl(r){return this.setSourceProperty(()=>{this.url=r,this._options.url=r}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}loadTile(r,d){const k=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),I={request:this.map._requestManager.transformRequest(k,Ke.Tile),uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,tileSize:this.tileSize*r.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function R(q,a){return delete r.request,r.aborted?d(null):q&&q.status!==404?d(q):(a&&a.resourceTiming&&(r.resourceTiming=a.resourceTiming),this.map._refreshExpiredTiles&&a&&r.setExpiryData(a),r.loadVectorData(a,this.map.painter),d(null),void(r.reloadCallback&&(this.loadTile(r,r.reloadCallback),r.reloadCallback=null)))}I.request.collectResourceTiming=this._collectResourceTiming,r.actor&&r.state!=="expired"?r.state==="loading"?r.reloadCallback=d:r.request=r.actor.send("reloadTile",I,R.bind(this)):(r.actor=this.dispatcher.getActor(),r.request=r.actor.send("loadTile",I,R.bind(this)))}abortTile(r){r.request&&(r.request.cancel(),delete r.request),r.actor&&r.actor.send("abortTile",{uid:r.uid,type:this.type,source:this.id},void 0)}unloadTile(r){r.unloadVectorData(),r.actor&&r.actor.send("removeTile",{uid:r.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class Bn extends u.E{constructor(r,d,k,I){super(),this.id=r,this.dispatcher=k,this.setEventedParent(I),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=u.e({type:"raster"},d),u.e(this,u.F(d,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new u.k("dataloading",{dataType:"source"})),this._tileJSONRequest=yi(this._options,this.map._requestManager,(r,d)=>{this._tileJSONRequest=null,this._loaded=!0,r?this.fire(new u.j(r)):d&&(u.e(this,d),d.bounds&&(this.tileBounds=new dn(d.bounds,this.minzoom,this.maxzoom)),this.fire(new u.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new u.k("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(r){this.map=r,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}setSourceProperty(r){this._tileJSONRequest&&this._tileJSONRequest.cancel(),r(),this.load()}setTiles(r){return this.setSourceProperty(()=>{this._options.tiles=r}),this}serialize(){return u.e({},this._options)}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}loadTile(r,d){const k=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);r.request=Xe.getImage(this.map._requestManager.transformRequest(k,Ke.Tile),(I,R,q)=>{if(delete r.request,r.aborted)r.state="unloaded",d(null);else if(I)r.state="errored",d(I);else if(R){this.map._refreshExpiredTiles&&q&&r.setExpiryData(q);const a=this.map.painter.context,o=a.gl;r.texture=this.map.painter.getTileTexture(R.width),r.texture?r.texture.update(R,{useMipmap:!0}):(r.texture=new gi(a,R,o.RGBA,{useMipmap:!0}),r.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),a.extTextureFilterAnisotropic&&o.texParameterf(o.TEXTURE_2D,a.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,a.extTextureFilterAnisotropicMax)),r.state="loaded",d(null)}},this.map._refreshExpiredTiles)}abortTile(r,d){r.request&&(r.request.cancel(),delete r.request),d()}unloadTile(r,d){r.texture&&this.map.painter.saveTileTexture(r.texture),d()}hasTransition(){return!1}}class fi extends Bn{constructor(r,d,k,I){super(r,d,k,I),this.type="raster-dem",this.maxzoom=22,this._options=u.e({type:"raster-dem"},d),this.encoding=d.encoding||"mapbox",this.redFactor=d.redFactor,this.greenFactor=d.greenFactor,this.blueFactor=d.blueFactor,this.baseShift=d.baseShift}loadTile(r,d){const k=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),I=this.map._requestManager.transformRequest(k,Ke.Tile);function R(q,a){q&&(r.state="errored",d(q)),a&&(r.dem=a,r.needsHillshadePrepare=!0,r.needsTerrainPrepare=!0,r.state="loaded",d(null))}r.neighboringTiles=this._getNeighboringTiles(r.tileID),r.request=Xe.getImage(I,(q,a,o)=>u._(this,void 0,void 0,function*(){if(delete r.request,r.aborted)r.state="unloaded",d(null);else if(q)r.state="errored",d(q);else if(a){this.map._refreshExpiredTiles&&r.setExpiryData(o);const h=u.a(a)&&u.J()?a:yield function(v){return u._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&u.K()){const E=v.width+2,z=v.height+2;try{return new u.R({width:E,height:z},yield u.M(v,-1,-1,E,z))}catch{}}return u.h.getImageData(v,1)})}(a),p={uid:r.uid,coord:r.tileID,source:this.id,rawImageData:h,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};r.actor&&r.state!=="expired"||(r.actor=this.dispatcher.getActor(),r.actor.send("loadDEMTile",p,R))}}),this.map._refreshExpiredTiles)}_getNeighboringTiles(r){const d=r.canonical,k=Math.pow(2,d.z),I=(d.x-1+k)%k,R=d.x===0?r.wrap-1:r.wrap,q=(d.x+1+k)%k,a=d.x+1===k?r.wrap+1:r.wrap,o={};return o[new u.O(r.overscaledZ,R,d.z,I,d.y).key]={backfilled:!1},o[new u.O(r.overscaledZ,a,d.z,q,d.y).key]={backfilled:!1},d.y>0&&(o[new u.O(r.overscaledZ,R,d.z,I,d.y-1).key]={backfilled:!1},o[new u.O(r.overscaledZ,r.wrap,d.z,d.x,d.y-1).key]={backfilled:!1},o[new u.O(r.overscaledZ,a,d.z,q,d.y-1).key]={backfilled:!1}),d.y+1<k&&(o[new u.O(r.overscaledZ,R,d.z,I,d.y+1).key]={backfilled:!1},o[new u.O(r.overscaledZ,r.wrap,d.z,d.x,d.y+1).key]={backfilled:!1},o[new u.O(r.overscaledZ,a,d.z,q,d.y+1).key]={backfilled:!1}),o}unloadTile(r){r.demTexture&&this.map.painter.saveTileTexture(r.demTexture),r.fbo&&(r.fbo.destroy(),delete r.fbo),r.dem&&delete r.dem,delete r.neighboringTiles,r.state="unloaded",r.actor&&r.actor.send("removeDEMTile",{uid:r.uid,source:this.id})}}class $i extends u.E{constructor(r,d,k,I){super(),this.load=()=>{this._updateWorkerData()},this.serialize=()=>u.e({},this._options,{type:this.type,data:this._data}),this.id=r,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=k.getActor(),this.setEventedParent(I),this._data=d.data,this._options=u.e({},d),this._collectResourceTiming=d.collectResourceTiming,d.maxzoom!==void 0&&(this.maxzoom=d.maxzoom),d.type&&(this.type=d.type),d.attribution&&(this.attribution=d.attribution),this.promoteId=d.promoteId;const R=u.N/this.tileSize;this.workerOptions=u.e({source:this.id,cluster:d.cluster||!1,geojsonVtOptions:{buffer:(d.buffer!==void 0?d.buffer:128)*R,tolerance:(d.tolerance!==void 0?d.tolerance:.375)*R,extent:u.N,maxZoom:this.maxzoom,lineMetrics:d.lineMetrics||!1,generateId:d.generateId||!1},superclusterOptions:{maxZoom:d.clusterMaxZoom!==void 0?d.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,d.clusterMinPoints||2),extent:u.N,radius:(d.clusterRadius||50)*R,log:!1,generateId:d.generateId||!1},clusterProperties:d.clusterProperties,filter:d.filter},d.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}onAdd(r){this.map=r,this.load()}setData(r){return this._data=r,this._updateWorkerData(),this}updateData(r){return this._updateWorkerData(r),this}setClusterOptions(r){return this.workerOptions.cluster=r.cluster,r&&(r.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=r.clusterRadius),r.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=r.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(r,d){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:r,source:this.id},d),this}getClusterChildren(r,d){return this.actor.send("geojson.getClusterChildren",{clusterId:r,source:this.id},d),this}getClusterLeaves(r,d,k,I){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:r,limit:d,offset:k},I),this}_updateWorkerData(r){const d=u.e({},this.workerOptions);r?d.dataDiff=r:typeof this._data=="string"?(d.request=this.map._requestManager.transformRequest(u.h.resolveURL(this._data),Ke.Source),d.request.collectResourceTiming=this._collectResourceTiming):d.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new u.k("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,d,(k,I)=>{if(this._pendingLoads--,this._removed||I&&I.abandoned)return void this.fire(new u.k("dataabort",{dataType:"source"}));let R=null;if(I&&I.resourceTiming&&I.resourceTiming[this.id]&&(R=I.resourceTiming[this.id].slice(0)),k)return void this.fire(new u.j(k));const q={dataType:"source"};this._collectResourceTiming&&R&&R.length>0&&u.e(q,{resourceTiming:R}),this.fire(new u.k("data",Object.assign(Object.assign({},q),{sourceDataType:"metadata"}))),this.fire(new u.k("data",Object.assign(Object.assign({},q),{sourceDataType:"content"})))})}loaded(){return this._pendingLoads===0}loadTile(r,d){const k=r.actor?"reloadTile":"loadTile";r.actor=this.actor;const I={type:this.type,uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};r.request=this.actor.send(k,I,(R,q)=>(delete r.request,r.unloadVectorData(),r.aborted?d(null):R?d(R):(r.loadVectorData(q,this.map.painter,k==="reloadTile"),d(null))))}abortTile(r){r.request&&(r.request.cancel(),delete r.request),r.aborted=!0}unloadTile(r){r.unloadVectorData(),this.actor.send("removeTile",{uid:r.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}hasTransition(){return!1}}var li=u.Q([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Li extends u.E{constructor(r,d,k,I){super(),this.load=(R,q)=>{this._loaded=!1,this.fire(new u.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=Xe.getImage(this.map._requestManager.transformRequest(this.url,Ke.Image),(a,o)=>{this._request=null,this._loaded=!0,a?this.fire(new u.j(a)):o&&(this.image=o,R&&(this.coordinates=R),q&&q(),this._finishLoading())})},this.prepare=()=>{if(Object.keys(this.tiles).length===0||!this.image)return;const R=this.map.painter.context,q=R.gl;this.boundsBuffer||(this.boundsBuffer=R.createVertexBuffer(this._boundsArray,li.members)),this.boundsSegments||(this.boundsSegments=u.S.simpleSegment(0,0,4,2)),this.texture||(this.texture=new gi(R,this.image,q.RGBA),this.texture.bind(q.LINEAR,q.CLAMP_TO_EDGE));let a=!1;for(const o in this.tiles){const h=this.tiles[o];h.state!=="loaded"&&(h.state="loaded",h.texture=this.texture,a=!0)}a&&this.fire(new u.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"image",url:this.options.url,coordinates:this.coordinates}),this.id=r,this.dispatcher=k,this.coordinates=d.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(I),this.options=d}loaded(){return this._loaded}updateImage(r){return r.url?(this._request&&(this._request.cancel(),this._request=null),this.options.url=r.url,this.load(r.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new u.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(r){this.map=r,this.load()}onRemove(){this._request&&(this._request.cancel(),this._request=null)}setCoordinates(r){this.coordinates=r;const d=r.map(u.U.fromLngLat);this.tileID=function(I){let R=1/0,q=1/0,a=-1/0,o=-1/0;for(const E of I)R=Math.min(R,E.x),q=Math.min(q,E.y),a=Math.max(a,E.x),o=Math.max(o,E.y);const h=Math.max(a-R,o-q),p=Math.max(0,Math.floor(-Math.log(h)/Math.LN2)),v=Math.pow(2,p);return new u.W(p,Math.floor((R+a)/2*v),Math.floor((q+o)/2*v))}(d),this.minzoom=this.maxzoom=this.tileID.z;const k=d.map(I=>this.tileID.getTilePoint(I)._round());return this._boundsArray=new u.V,this._boundsArray.emplaceBack(k[0].x,k[0].y,0,0),this._boundsArray.emplaceBack(k[1].x,k[1].y,u.N,0),this._boundsArray.emplaceBack(k[3].x,k[3].y,0,u.N),this._boundsArray.emplaceBack(k[2].x,k[2].y,u.N,u.N),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new u.k("data",{dataType:"source",sourceDataType:"content"})),this}loadTile(r,d){this.tileID&&this.tileID.equals(r.tileID.canonical)?(this.tiles[String(r.tileID.wrap)]=r,r.buckets={},d(null)):(r.state="errored",d(null))}hasTransition(){return!1}}class Ji extends Li{constructor(r,d,k,I){super(r,d,k,I),this.load=()=>{this._loaded=!1;const R=this.options;this.urls=[];for(const q of R.urls)this.urls.push(this.map._requestManager.transformRequest(q,Ke.Source).url);u.X(this.urls,(q,a)=>{this._loaded=!0,q?this.fire(new u.j(q)):a&&(this.video=a,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})},this.prepare=()=>{if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const R=this.map.painter.context,q=R.gl;this.boundsBuffer||(this.boundsBuffer=R.createVertexBuffer(this._boundsArray,li.members)),this.boundsSegments||(this.boundsSegments=u.S.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(q.LINEAR,q.CLAMP_TO_EDGE),q.texSubImage2D(q.TEXTURE_2D,0,0,0,q.RGBA,q.UNSIGNED_BYTE,this.video)):(this.texture=new gi(R,this.video,q.RGBA),this.texture.bind(q.LINEAR,q.CLAMP_TO_EDGE));let a=!1;for(const o in this.tiles){const h=this.tiles[o];h.state!=="loaded"&&(h.state="loaded",h.texture=this.texture,a=!0)}a&&this.fire(new u.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"video",urls:this.urls,coordinates:this.coordinates}),this.roundZoom=!0,this.type="video",this.options=d}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(r){if(this.video){const d=this.video.seekable;r<d.start(0)||r>d.end(0)?this.fire(new u.j(new u.Y(`sources.${this.id}`,null,`Playback for this video can be set only between the ${d.start(0)} and ${d.end(0)}-second mark.`))):this.video.currentTime=r}}getVideo(){return this.video}onAdd(r){this.map||(this.map=r,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}hasTransition(){return this.video&&!this.video.paused}}class wi extends Li{constructor(r,d,k,I){super(r,d,k,I),this.load=()=>{this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new u.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},this.prepare=()=>{let R=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,R=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,R=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const q=this.map.painter.context,a=q.gl;this.boundsBuffer||(this.boundsBuffer=q.createVertexBuffer(this._boundsArray,li.members)),this.boundsSegments||(this.boundsSegments=u.S.simpleSegment(0,0,4,2)),this.texture?(R||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new gi(q,this.canvas,a.RGBA,{premultiply:!0});let o=!1;for(const h in this.tiles){const p=this.tiles[h];p.state!=="loaded"&&(p.state="loaded",p.texture=this.texture,o=!0)}o&&this.fire(new u.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"canvas",coordinates:this.coordinates}),d.coordinates?Array.isArray(d.coordinates)&&d.coordinates.length===4&&!d.coordinates.some(R=>!Array.isArray(R)||R.length!==2||R.some(q=>typeof q!="number"))||this.fire(new u.j(new u.Y(`sources.${r}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new u.j(new u.Y(`sources.${r}`,null,'missing required property "coordinates"'))),d.animate&&typeof d.animate!="boolean"&&this.fire(new u.j(new u.Y(`sources.${r}`,null,'optional "animate" property must be a boolean value'))),d.canvas?typeof d.canvas=="string"||d.canvas instanceof HTMLCanvasElement||this.fire(new u.j(new u.Y(`sources.${r}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new u.j(new u.Y(`sources.${r}`,null,'missing required property "canvas"'))),this.options=d,this.animate=d.animate===void 0||d.animate}getCanvas(){return this.canvas}onAdd(r){this.map=r,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const r of[this.canvas.width,this.canvas.height])if(isNaN(r)||r<=0)return!0;return!1}}const ir={},kn=L=>{switch(L){case"geojson":return $i;case"image":return Li;case"raster":return Bn;case"raster-dem":return fi;case"vector":return sn;case"video":return Ji;case"canvas":return wi}return ir[L]};function vr(L,r){const d=u.Z();return u.$(d,d,[1,1,0]),u.a0(d,d,[.5*L.width,.5*L.height,1]),u.a1(d,d,L.calculatePosMatrix(r.toUnwrapped()))}function Or(L,r,d,k,I,R){const q=function(v,E,z){if(v)for(const F of v){const Y=E[F];if(Y&&Y.source===z&&Y.type==="fill-extrusion")return!0}else for(const F in E){const Y=E[F];if(Y.source===z&&Y.type==="fill-extrusion")return!0}return!1}(I&&I.layers,r,L.id),a=R.maxPitchScaleFactor(),o=L.tilesIn(k,a,q);o.sort(Gi);const h=[];for(const v of o)h.push({wrappedTileID:v.tileID.wrapped().key,queryResults:v.tile.queryRenderedFeatures(r,d,L._state,v.queryGeometry,v.cameraQueryGeometry,v.scale,I,R,a,vr(L.transform,v.tileID))});const p=function(v){const E={},z={};for(const F of v){const Y=F.queryResults,J=F.wrappedTileID,ve=z[J]=z[J]||{};for(const Ie in Y){const Oe=Y[Ie],He=ve[Ie]=ve[Ie]||{},We=E[Ie]=E[Ie]||[];for(const st of Oe)He[st.featureIndex]||(He[st.featureIndex]=!0,We.push(st))}}return E}(h);for(const v in p)p[v].forEach(E=>{const z=E.feature,F=L.getFeatureState(z.layer["source-layer"],z.id);z.source=z.layer.source,z.layer["source-layer"]&&(z.sourceLayer=z.layer["source-layer"]),z.state=F});return p}function Gi(L,r){const d=L.tileID,k=r.tileID;return d.overscaledZ-k.overscaledZ||d.canonical.y-k.canonical.y||d.wrap-k.wrap||d.canonical.x-k.canonical.x}class zn{constructor(r,d){this.timeAdded=0,this.fadeEndTime=0,this.tileID=r,this.uid=u.a2(),this.uses=0,this.tileSize=d,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(r){const d=r+this.timeAdded;d<this.fadeEndTime||(this.fadeEndTime=d)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(r){this.demTexture&&r.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(r,d,k){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",r){r.featureIndex&&(this.latestFeatureIndex=r.featureIndex,r.rawTileData?(this.latestRawTileData=r.rawTileData,this.latestFeatureIndex.rawTileData=r.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=r.collisionBoxArray,this.buckets=function(I,R){const q={};if(!R)return q;for(const a of I){const o=a.layerIds.map(h=>R.getLayer(h)).filter(Boolean);if(o.length!==0){a.layers=o,a.stateDependentLayerIds&&(a.stateDependentLayers=a.stateDependentLayerIds.map(h=>o.filter(p=>p.id===h)[0]));for(const h of o)q[h.id]=a}}return q}(r.buckets,d.style),this.hasSymbolBuckets=!1;for(const I in this.buckets){const R=this.buckets[I];if(R instanceof u.a4){if(this.hasSymbolBuckets=!0,!k)break;R.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const I in this.buckets){const R=this.buckets[I];if(R instanceof u.a4&&R.hasRTLText){this.hasRTLText=!0,u.a5();break}}this.queryPadding=0;for(const I in this.buckets){const R=this.buckets[I];this.queryPadding=Math.max(this.queryPadding,d.style.getLayer(I).queryRadius(R))}r.imageAtlas&&(this.imageAtlas=r.imageAtlas),r.glyphAtlasImage&&(this.glyphAtlasImage=r.glyphAtlasImage)}else this.collisionBoxArray=new u.a3}unloadVectorData(){for(const r in this.buckets)this.buckets[r].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(r){return this.buckets[r.id]}upload(r){for(const k in this.buckets){const I=this.buckets[k];I.uploadPending()&&I.upload(r)}const d=r.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new gi(r,this.imageAtlas.image,d.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new gi(r,this.glyphAtlasImage,d.ALPHA),this.glyphAtlasImage=null)}prepare(r){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(r,this.imageAtlasTexture)}queryRenderedFeatures(r,d,k,I,R,q,a,o,h,p){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:I,cameraQueryGeometry:R,scale:q,tileSize:this.tileSize,pixelPosMatrix:p,transform:o,params:a,queryPadding:this.queryPadding*h},r,d,k):{}}querySourceFeatures(r,d){const k=this.latestFeatureIndex;if(!k||!k.rawTileData)return;const I=k.loadVTLayers(),R=d&&d.sourceLayer?d.sourceLayer:"",q=I._geojsonTileLayer||I[R];if(!q)return;const a=u.a6(d&&d.filter),{z:o,x:h,y:p}=this.tileID.canonical,v={z:o,x:h,y:p};for(let E=0;E<q.length;E++){const z=q.feature(E);if(a.needGeometry){const J=u.a7(z,!0);if(!a.filter(new u.a8(this.tileID.overscaledZ),J,this.tileID.canonical))continue}else if(!a.filter(new u.a8(this.tileID.overscaledZ),z))continue;const F=k.getId(z,R),Y=new u.a9(z,o,h,p,F);Y.tile=v,r.push(Y)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(r){const d=this.expirationTime;if(r.cacheControl){const k=u.aa(r.cacheControl);k["max-age"]&&(this.expirationTime=Date.now()+1e3*k["max-age"])}else r.expires&&(this.expirationTime=new Date(r.expires).getTime());if(this.expirationTime){const k=Date.now();let I=!1;if(this.expirationTime>k)I=!1;else if(d)if(this.expirationTime<d)I=!0;else{const R=this.expirationTime-d;R?this.expirationTime=k+Math.max(R,3e4):I=!0}else I=!0;I?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(r,d){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(r).length===0)return;const k=this.latestFeatureIndex.loadVTLayers();for(const I in this.buckets){if(!d.style.hasLayer(I))continue;const R=this.buckets[I],q=R.layers[0].sourceLayer||"_geojsonTileLayer",a=k[q],o=r[q];if(!a||!o||Object.keys(o).length===0)continue;R.update(o,a,this.imageAtlas&&this.imageAtlas.patternPositions||{});const h=d&&d.style&&d.style.getLayer(I);h&&(this.queryPadding=Math.max(this.queryPadding,h.queryRadius(R)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<u.h.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(r){this.symbolFadeHoldUntil=u.h.now()+r}setDependencies(r,d){const k={};for(const I of d)k[I]=!0;this.dependencies[r]=k}hasDependency(r,d){for(const k of r){const I=this.dependencies[k];if(I){for(const R of d)if(I[R])return!0}}return!1}}class Cs{constructor(r,d){this.max=r,this.onRemove=d,this.reset()}reset(){for(const r in this.data)for(const d of this.data[r])d.timeout&&clearTimeout(d.timeout),this.onRemove(d.value);return this.data={},this.order=[],this}add(r,d,k){const I=r.wrapped().key;this.data[I]===void 0&&(this.data[I]=[]);const R={value:d,timeout:void 0};if(k!==void 0&&(R.timeout=setTimeout(()=>{this.remove(r,R)},k)),this.data[I].push(R),this.order.push(I),this.order.length>this.max){const q=this._getAndRemoveByKey(this.order[0]);q&&this.onRemove(q)}return this}has(r){return r.wrapped().key in this.data}getAndRemove(r){return this.has(r)?this._getAndRemoveByKey(r.wrapped().key):null}_getAndRemoveByKey(r){const d=this.data[r].shift();return d.timeout&&clearTimeout(d.timeout),this.data[r].length===0&&delete this.data[r],this.order.splice(this.order.indexOf(r),1),d.value}getByKey(r){const d=this.data[r];return d?d[0].value:null}get(r){return this.has(r)?this.data[r.wrapped().key][0].value:null}remove(r,d){if(!this.has(r))return this;const k=r.wrapped().key,I=d===void 0?0:this.data[k].indexOf(d),R=this.data[k][I];return this.data[k].splice(I,1),R.timeout&&clearTimeout(R.timeout),this.data[k].length===0&&delete this.data[k],this.onRemove(R.value),this.order.splice(this.order.indexOf(k),1),this}setMaxSize(r){for(this.max=r;this.order.length>this.max;){const d=this._getAndRemoveByKey(this.order[0]);d&&this.onRemove(d)}return this}filter(r){const d=[];for(const k in this.data)for(const I of this.data[k])r(I.value)||d.push(I);for(const k of d)this.remove(k.value.tileID,k)}}class Kt{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(r,d,k){const I=String(d);if(this.stateChanges[r]=this.stateChanges[r]||{},this.stateChanges[r][I]=this.stateChanges[r][I]||{},u.e(this.stateChanges[r][I],k),this.deletedStates[r]===null){this.deletedStates[r]={};for(const R in this.state[r])R!==I&&(this.deletedStates[r][R]=null)}else if(this.deletedStates[r]&&this.deletedStates[r][I]===null){this.deletedStates[r][I]={};for(const R in this.state[r][I])k[R]||(this.deletedStates[r][I][R]=null)}else for(const R in k)this.deletedStates[r]&&this.deletedStates[r][I]&&this.deletedStates[r][I][R]===null&&delete this.deletedStates[r][I][R]}removeFeatureState(r,d,k){if(this.deletedStates[r]===null)return;const I=String(d);if(this.deletedStates[r]=this.deletedStates[r]||{},k&&d!==void 0)this.deletedStates[r][I]!==null&&(this.deletedStates[r][I]=this.deletedStates[r][I]||{},this.deletedStates[r][I][k]=null);else if(d!==void 0)if(this.stateChanges[r]&&this.stateChanges[r][I])for(k in this.deletedStates[r][I]={},this.stateChanges[r][I])this.deletedStates[r][I][k]=null;else this.deletedStates[r][I]=null;else this.deletedStates[r]=null}getState(r,d){const k=String(d),I=u.e({},(this.state[r]||{})[k],(this.stateChanges[r]||{})[k]);if(this.deletedStates[r]===null)return{};if(this.deletedStates[r]){const R=this.deletedStates[r][d];if(R===null)return{};for(const q in R)delete I[q]}return I}initializeTileState(r,d){r.setFeatureState(this.state,d)}coalesceChanges(r,d){const k={};for(const I in this.stateChanges){this.state[I]=this.state[I]||{};const R={};for(const q in this.stateChanges[I])this.state[I][q]||(this.state[I][q]={}),u.e(this.state[I][q],this.stateChanges[I][q]),R[q]=this.state[I][q];k[I]=R}for(const I in this.deletedStates){this.state[I]=this.state[I]||{};const R={};if(this.deletedStates[I]===null)for(const q in this.state[I])R[q]={},this.state[I][q]={};else for(const q in this.deletedStates[I]){if(this.deletedStates[I][q]===null)this.state[I][q]={};else for(const a of Object.keys(this.deletedStates[I][q]))delete this.state[I][q][a];R[q]=this.state[I][q]}k[I]=k[I]||{},u.e(k[I],R)}if(this.stateChanges={},this.deletedStates={},Object.keys(k).length!==0)for(const I in r)r[I].setFeatureState(k,d)}}class cn extends u.E{constructor(r,d,k){super(),this.id=r,this.dispatcher=k,this.on("data",I=>{I.dataType==="source"&&I.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&I.dataType==="source"&&I.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((I,R,q,a)=>{const o=new(kn(R.type))(I,R,q,a);if(o.id!==I)throw new Error(`Expected Source id to be ${I} instead of ${o.id}`);return o})(r,d,k,this),this._tiles={},this._cache=new Cs(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Kt,this._didEmitContent=!1,this._updated=!1}onAdd(r){this.map=r,this._maxTileCacheSize=r?r._maxTileCacheSize:null,this._maxTileCacheZoomLevels=r?r._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(r)}onRemove(r){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(r)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const r in this._tiles){const d=this._tiles[r];if(d.state!=="loaded"&&d.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const r=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,r&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(r,d){return this._source.loadTile(r,d)}_unloadTile(r){if(this._source.unloadTile)return this._source.unloadTile(r,()=>{})}_abortTile(r){this._source.abortTile&&this._source.abortTile(r,()=>{}),this._source.fire(new u.k("dataabort",{tile:r,coord:r.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(r){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const d in this._tiles){const k=this._tiles[d];k.upload(r),k.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(r=>r.tileID).sort(fr).map(r=>r.key)}getRenderableIds(r){const d=[];for(const k in this._tiles)this._isIdRenderable(k,r)&&d.push(this._tiles[k]);return r?d.sort((k,I)=>{const R=k.tileID,q=I.tileID,a=new u.P(R.canonical.x,R.canonical.y)._rotate(this.transform.angle),o=new u.P(q.canonical.x,q.canonical.y)._rotate(this.transform.angle);return R.overscaledZ-q.overscaledZ||o.y-a.y||o.x-a.x}).map(k=>k.tileID.key):d.map(k=>k.tileID).sort(fr).map(k=>k.key)}hasRenderableParent(r){const d=this.findLoadedParent(r,0);return!!d&&this._isIdRenderable(d.tileID.key)}_isIdRenderable(r,d){return this._tiles[r]&&this._tiles[r].hasData()&&!this._coveredTiles[r]&&(d||!this._tiles[r].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const r in this._tiles)this._tiles[r].state!=="errored"&&this._reloadTile(r,"reloading")}}_reloadTile(r,d){const k=this._tiles[r];k&&(k.state!=="loading"&&(k.state=d),this._loadTile(k,this._tileLoaded.bind(this,k,r,d)))}_tileLoaded(r,d,k,I){if(I)return r.state="errored",void(I.status!==404?this._source.fire(new u.j(I,{tile:r})):this.update(this.transform,this.terrain));r.timeAdded=u.h.now(),k==="expired"&&(r.refreshedUponExpiration=!0),this._setTileReloadTimer(d,r),this.getSource().type==="raster-dem"&&r.dem&&this._backfillDEM(r),this._state.initializeTileState(r,this.map?this.map.painter:null),r.aborted||this._source.fire(new u.k("data",{dataType:"source",tile:r,coord:r.tileID}))}_backfillDEM(r){const d=this.getRenderableIds();for(let I=0;I<d.length;I++){const R=d[I];if(r.neighboringTiles&&r.neighboringTiles[R]){const q=this.getTileByID(R);k(r,q),k(q,r)}}function k(I,R){I.needsHillshadePrepare=!0,I.needsTerrainPrepare=!0;let q=R.tileID.canonical.x-I.tileID.canonical.x;const a=R.tileID.canonical.y-I.tileID.canonical.y,o=Math.pow(2,I.tileID.canonical.z),h=R.tileID.key;q===0&&a===0||Math.abs(a)>1||(Math.abs(q)>1&&(Math.abs(q+o)===1?q+=o:Math.abs(q-o)===1&&(q-=o)),R.dem&&I.dem&&(I.dem.backfillBorder(R.dem,q,a),I.neighboringTiles&&I.neighboringTiles[h]&&(I.neighboringTiles[h].backfilled=!0)))}}getTile(r){return this.getTileByID(r.key)}getTileByID(r){return this._tiles[r]}_retainLoadedChildren(r,d,k,I){for(const R in this._tiles){let q=this._tiles[R];if(I[R]||!q.hasData()||q.tileID.overscaledZ<=d||q.tileID.overscaledZ>k)continue;let a=q.tileID;for(;q&&q.tileID.overscaledZ>d+1;){const h=q.tileID.scaledTo(q.tileID.overscaledZ-1);q=this._tiles[h.key],q&&q.hasData()&&(a=h)}let o=a;for(;o.overscaledZ>d;)if(o=o.scaledTo(o.overscaledZ-1),r[o.key]){I[a.key]=a;break}}}findLoadedParent(r,d){if(r.key in this._loadedParentTiles){const k=this._loadedParentTiles[r.key];return k&&k.tileID.overscaledZ>=d?k:null}for(let k=r.overscaledZ-1;k>=d;k--){const I=r.scaledTo(k),R=this._getLoadedTile(I);if(R)return R}}_getLoadedTile(r){const d=this._tiles[r.key];return d&&d.hasData()?d:this._cache.getByKey(r.wrapped().key)}updateCacheSize(r){const d=Math.ceil(r.width/this._source.tileSize)+1,k=Math.ceil(r.height/this._source.tileSize)+1,I=Math.floor(d*k*(this._maxTileCacheZoomLevels===null?u.c.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),R=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,I):I;this._cache.setMaxSize(R)}handleWrapJump(r){const d=Math.round((r-(this._prevLng===void 0?r:this._prevLng))/360);if(this._prevLng=r,d){const k={};for(const I in this._tiles){const R=this._tiles[I];R.tileID=R.tileID.unwrapTo(R.tileID.wrap+d),k[R.tileID.key]=R}this._tiles=k;for(const I in this._timers)clearTimeout(this._timers[I]),delete this._timers[I];for(const I in this._tiles)this._setTileReloadTimer(I,this._tiles[I])}}update(r,d){if(this.transform=r,this.terrain=d,!this._sourceLoaded||this._paused)return;let k;this.updateCacheSize(r),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?k=r.getVisibleUnwrappedCoordinates(this._source.tileID).map(p=>new u.O(p.canonical.z,p.wrap,p.canonical.z,p.canonical.x,p.canonical.y)):(k=r.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:d}),this._source.hasTile&&(k=k.filter(p=>this._source.hasTile(p)))):k=[];const I=r.coveringZoomLevel(this._source),R=Math.max(I-cn.maxOverzooming,this._source.minzoom),q=Math.max(I+cn.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const p={};for(const v of k)if(v.canonical.z>this._source.minzoom){const E=v.scaledTo(v.canonical.z-1);p[E.key]=E;const z=v.scaledTo(Math.max(this._source.minzoom,Math.min(v.canonical.z,5)));p[z.key]=z}k=k.concat(Object.values(p))}const a=k.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,a&&this.fire(new u.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const o=this._updateRetainedTiles(k,I);if(vn(this._source.type)){const p={},v={},E=Object.keys(o),z=u.h.now();for(const F of E){const Y=o[F],J=this._tiles[F];if(!J||J.fadeEndTime!==0&&J.fadeEndTime<=z)continue;const ve=this.findLoadedParent(Y,R);ve&&(this._addTile(ve.tileID),p[ve.tileID.key]=ve.tileID),v[F]=Y}this._retainLoadedChildren(v,I,q,o);for(const F in p)o[F]||(this._coveredTiles[F]=!0,o[F]=p[F]);if(d){const F={},Y={};for(const J of k)this._tiles[J.key].hasData()?F[J.key]=J:Y[J.key]=J;for(const J in Y){const ve=Y[J].children(this._source.maxzoom);this._tiles[ve[0].key]&&this._tiles[ve[1].key]&&this._tiles[ve[2].key]&&this._tiles[ve[3].key]&&(F[ve[0].key]=o[ve[0].key]=ve[0],F[ve[1].key]=o[ve[1].key]=ve[1],F[ve[2].key]=o[ve[2].key]=ve[2],F[ve[3].key]=o[ve[3].key]=ve[3],delete Y[J])}for(const J in Y){const ve=this.findLoadedParent(Y[J],this._source.minzoom);if(ve){F[ve.tileID.key]=o[ve.tileID.key]=ve.tileID;for(const Ie in F)F[Ie].isChildOf(ve.tileID)&&delete F[Ie]}}for(const J in this._tiles)F[J]||(this._coveredTiles[J]=!0)}}for(const p in o)this._tiles[p].clearFadeHold();const h=u.ab(this._tiles,o);for(const p of h){const v=this._tiles[p];v.hasSymbolBuckets&&!v.holdingForFade()?v.setHoldDuration(this.map._fadeDuration):v.hasSymbolBuckets&&!v.symbolFadeFinished()||this._removeTile(p)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const r in this._tiles)this._tiles[r].holdingForFade()&&this._removeTile(r)}_updateRetainedTiles(r,d){const k={},I={},R=Math.max(d-cn.maxOverzooming,this._source.minzoom),q=Math.max(d+cn.maxUnderzooming,this._source.minzoom),a={};for(const o of r){const h=this._addTile(o);k[o.key]=o,h.hasData()||d<this._source.maxzoom&&(a[o.key]=o)}this._retainLoadedChildren(a,d,q,k);for(const o of r){let h=this._tiles[o.key];if(h.hasData())continue;if(d+1>this._source.maxzoom){const v=o.children(this._source.maxzoom)[0],E=this.getTile(v);if(E&&E.hasData()){k[v.key]=v;continue}}else{const v=o.children(this._source.maxzoom);if(k[v[0].key]&&k[v[1].key]&&k[v[2].key]&&k[v[3].key])continue}let p=h.wasRequested();for(let v=o.overscaledZ-1;v>=R;--v){const E=o.scaledTo(v);if(I[E.key])break;if(I[E.key]=!0,h=this.getTile(E),!h&&p&&(h=this._addTile(E)),h){const z=h.hasData();if((p||z)&&(k[E.key]=E),p=h.wasRequested(),z)break}}}return k}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const r in this._tiles){const d=[];let k,I=this._tiles[r].tileID;for(;I.overscaledZ>0;){if(I.key in this._loadedParentTiles){k=this._loadedParentTiles[I.key];break}d.push(I.key);const R=I.scaledTo(I.overscaledZ-1);if(k=this._getLoadedTile(R),k)break;I=R}for(const R of d)this._loadedParentTiles[R]=k}}_addTile(r){let d=this._tiles[r.key];if(d)return d;d=this._cache.getAndRemove(r),d&&(this._setTileReloadTimer(r.key,d),d.tileID=r,this._state.initializeTileState(d,this.map?this.map.painter:null),this._cacheTimers[r.key]&&(clearTimeout(this._cacheTimers[r.key]),delete this._cacheTimers[r.key],this._setTileReloadTimer(r.key,d)));const k=d;return d||(d=new zn(r,this._source.tileSize*r.overscaleFactor()),this._loadTile(d,this._tileLoaded.bind(this,d,r.key,d.state))),d.uses++,this._tiles[r.key]=d,k||this._source.fire(new u.k("dataloading",{tile:d,coord:d.tileID,dataType:"source"})),d}_setTileReloadTimer(r,d){r in this._timers&&(clearTimeout(this._timers[r]),delete this._timers[r]);const k=d.getExpiryTimeout();k&&(this._timers[r]=setTimeout(()=>{this._reloadTile(r,"expired"),delete this._timers[r]},k))}_removeTile(r){const d=this._tiles[r];d&&(d.uses--,delete this._tiles[r],this._timers[r]&&(clearTimeout(this._timers[r]),delete this._timers[r]),d.uses>0||(d.hasData()&&d.state!=="reloading"?this._cache.add(d.tileID,d,d.getExpiryTimeout()):(d.aborted=!0,this._abortTile(d),this._unloadTile(d))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const r in this._tiles)this._removeTile(r);this._cache.reset()}tilesIn(r,d,k){const I=[],R=this.transform;if(!R)return I;const q=k?R.getCameraQueryGeometry(r):r,a=r.map(F=>R.pointCoordinate(F,this.terrain)),o=q.map(F=>R.pointCoordinate(F,this.terrain)),h=this.getIds();let p=1/0,v=1/0,E=-1/0,z=-1/0;for(const F of o)p=Math.min(p,F.x),v=Math.min(v,F.y),E=Math.max(E,F.x),z=Math.max(z,F.y);for(let F=0;F<h.length;F++){const Y=this._tiles[h[F]];if(Y.holdingForFade())continue;const J=Y.tileID,ve=Math.pow(2,R.zoom-Y.tileID.overscaledZ),Ie=d*Y.queryPadding*u.N/Y.tileSize/ve,Oe=[J.getTilePoint(new u.U(p,v)),J.getTilePoint(new u.U(E,z))];if(Oe[0].x-Ie<u.N&&Oe[0].y-Ie<u.N&&Oe[1].x+Ie>=0&&Oe[1].y+Ie>=0){const He=a.map(st=>J.getTilePoint(st)),We=o.map(st=>J.getTilePoint(st));I.push({tile:Y,tileID:J,queryGeometry:He,cameraQueryGeometry:We,scale:ve})}}return I}getVisibleCoordinates(r){const d=this.getRenderableIds(r).map(k=>this._tiles[k].tileID);for(const k of d)k.posMatrix=this.transform.calculatePosMatrix(k.toUnwrapped());return d}hasTransition(){if(this._source.hasTransition())return!0;if(vn(this._source.type)){const r=u.h.now();for(const d in this._tiles)if(this._tiles[d].fadeEndTime>=r)return!0}return!1}setFeatureState(r,d,k){this._state.updateState(r=r||"_geojsonTileLayer",d,k)}removeFeatureState(r,d,k){this._state.removeFeatureState(r=r||"_geojsonTileLayer",d,k)}getFeatureState(r,d){return this._state.getState(r=r||"_geojsonTileLayer",d)}setDependencies(r,d,k){const I=this._tiles[r];I&&I.setDependencies(d,k)}reloadTilesForDependencies(r,d){for(const k in this._tiles)this._tiles[k].hasDependency(r,d)&&this._reloadTile(k,"reloading");this._cache.filter(k=>!k.hasDependency(r,d))}}function fr(L,r){const d=Math.abs(2*L.wrap)-+(L.wrap<0),k=Math.abs(2*r.wrap)-+(r.wrap<0);return L.overscaledZ-r.overscaledZ||k-d||r.canonical.y-L.canonical.y||r.canonical.x-L.canonical.x}function vn(L){return L==="raster"||L==="image"||L==="video"}cn.maxOverzooming=10,cn.maxUnderzooming=3;const Dn="mapboxgl_preloaded_worker_pool";class pn{constructor(){this.active={}}acquire(r){if(!this.workers)for(this.workers=[];this.workers.length<pn.workerCount;)this.workers.push(new Worker(u.c.WORKER_URL));return this.active[r]=!0,this.workers.slice()}release(r){delete this.active[r],this.numActive()===0&&(this.workers.forEach(d=>{d.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Dn]}numActive(){return Object.keys(this.active).length}}const f=Math.floor(u.h.hardwareConcurrency/2);let w;function B(){return w||(w=new pn),w}pn.workerCount=u.ac(globalThis)?Math.max(Math.min(f,3),1):1;class U{constructor(r,d){this.reset(r,d)}reset(r,d){this.points=r||[],this._distances=[0];for(let k=1;k<this.points.length;k++)this._distances[k]=this._distances[k-1]+this.points[k].dist(this.points[k-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(d||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(r){if(this.points.length===1)return this.points[0];r=u.ad(r,0,1);let d=1,k=this._distances[d];const I=r*this.paddedLength+this.padding;for(;k<I&&d<this._distances.length;)k=this._distances[++d];const R=d-1,q=this._distances[R],a=k-q,o=a>0?(I-q)/a:0;return this.points[R].mult(1-o).add(this.points[d].mult(o))}}function Z(L,r){let d=!0;return L==="always"||L!=="never"&&r!=="never"||(d=!1),d}class K{constructor(r,d,k){const I=this.boxCells=[],R=this.circleCells=[];this.xCellCount=Math.ceil(r/k),this.yCellCount=Math.ceil(d/k);for(let q=0;q<this.xCellCount*this.yCellCount;q++)I.push([]),R.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=r,this.height=d,this.xScale=this.xCellCount/r,this.yScale=this.yCellCount/d,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(r,d,k,I,R){this._forEachCell(d,k,I,R,this._insertBoxCell,this.boxUid++),this.boxKeys.push(r),this.bboxes.push(d),this.bboxes.push(k),this.bboxes.push(I),this.bboxes.push(R)}insertCircle(r,d,k,I){this._forEachCell(d-I,k-I,d+I,k+I,this._insertCircleCell,this.circleUid++),this.circleKeys.push(r),this.circles.push(d),this.circles.push(k),this.circles.push(I)}_insertBoxCell(r,d,k,I,R,q){this.boxCells[R].push(q)}_insertCircleCell(r,d,k,I,R,q){this.circleCells[R].push(q)}_query(r,d,k,I,R,q,a){if(k<0||r>this.width||I<0||d>this.height)return[];const o=[];if(r<=0&&d<=0&&this.width<=k&&this.height<=I){if(R)return[{key:null,x1:r,y1:d,x2:k,y2:I}];for(let h=0;h<this.boxKeys.length;h++)o.push({key:this.boxKeys[h],x1:this.bboxes[4*h],y1:this.bboxes[4*h+1],x2:this.bboxes[4*h+2],y2:this.bboxes[4*h+3]});for(let h=0;h<this.circleKeys.length;h++){const p=this.circles[3*h],v=this.circles[3*h+1],E=this.circles[3*h+2];o.push({key:this.circleKeys[h],x1:p-E,y1:v-E,x2:p+E,y2:v+E})}}else this._forEachCell(r,d,k,I,this._queryCell,o,{hitTest:R,overlapMode:q,seenUids:{box:{},circle:{}}},a);return o}query(r,d,k,I){return this._query(r,d,k,I,!1,null)}hitTest(r,d,k,I,R,q){return this._query(r,d,k,I,!0,R,q).length>0}hitTestCircle(r,d,k,I,R){const q=r-k,a=r+k,o=d-k,h=d+k;if(a<0||q>this.width||h<0||o>this.height)return!1;const p=[];return this._forEachCell(q,o,a,h,this._queryCellCircle,p,{hitTest:!0,overlapMode:I,circle:{x:r,y:d,radius:k},seenUids:{box:{},circle:{}}},R),p.length>0}_queryCell(r,d,k,I,R,q,a,o){const{seenUids:h,hitTest:p,overlapMode:v}=a,E=this.boxCells[R];if(E!==null){const F=this.bboxes;for(const Y of E)if(!h.box[Y]){h.box[Y]=!0;const J=4*Y,ve=this.boxKeys[Y];if(r<=F[J+2]&&d<=F[J+3]&&k>=F[J+0]&&I>=F[J+1]&&(!o||o(ve))&&(!p||!Z(v,ve.overlapMode))&&(q.push({key:ve,x1:F[J],y1:F[J+1],x2:F[J+2],y2:F[J+3]}),p))return!0}}const z=this.circleCells[R];if(z!==null){const F=this.circles;for(const Y of z)if(!h.circle[Y]){h.circle[Y]=!0;const J=3*Y,ve=this.circleKeys[Y];if(this._circleAndRectCollide(F[J],F[J+1],F[J+2],r,d,k,I)&&(!o||o(ve))&&(!p||!Z(v,ve.overlapMode))){const Ie=F[J],Oe=F[J+1],He=F[J+2];if(q.push({key:ve,x1:Ie-He,y1:Oe-He,x2:Ie+He,y2:Oe+He}),p)return!0}}}return!1}_queryCellCircle(r,d,k,I,R,q,a,o){const{circle:h,seenUids:p,overlapMode:v}=a,E=this.boxCells[R];if(E!==null){const F=this.bboxes;for(const Y of E)if(!p.box[Y]){p.box[Y]=!0;const J=4*Y,ve=this.boxKeys[Y];if(this._circleAndRectCollide(h.x,h.y,h.radius,F[J+0],F[J+1],F[J+2],F[J+3])&&(!o||o(ve))&&!Z(v,ve.overlapMode))return q.push(!0),!0}}const z=this.circleCells[R];if(z!==null){const F=this.circles;for(const Y of z)if(!p.circle[Y]){p.circle[Y]=!0;const J=3*Y,ve=this.circleKeys[Y];if(this._circlesCollide(F[J],F[J+1],F[J+2],h.x,h.y,h.radius)&&(!o||o(ve))&&!Z(v,ve.overlapMode))return q.push(!0),!0}}}_forEachCell(r,d,k,I,R,q,a,o){const h=this._convertToXCellCoord(r),p=this._convertToYCellCoord(d),v=this._convertToXCellCoord(k),E=this._convertToYCellCoord(I);for(let z=h;z<=v;z++)for(let F=p;F<=E;F++)if(R.call(this,r,d,k,I,this.xCellCount*F+z,q,a,o))return}_convertToXCellCoord(r){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(r*this.xScale)))}_convertToYCellCoord(r){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(r*this.yScale)))}_circlesCollide(r,d,k,I,R,q){const a=I-r,o=R-d,h=k+q;return h*h>a*a+o*o}_circleAndRectCollide(r,d,k,I,R,q,a){const o=(q-I)/2,h=Math.abs(r-(I+o));if(h>o+k)return!1;const p=(a-R)/2,v=Math.abs(d-(R+p));if(v>p+k)return!1;if(h<=o||v<=p)return!0;const E=h-o,z=v-p;return E*E+z*z<=k*k}}function se(L,r,d,k,I){const R=u.Z();return r?(u.a0(R,R,[1/I,1/I,1]),d||u.ae(R,R,k.angle)):u.a1(R,k.labelPlaneMatrix,L),R}function oe(L,r,d,k,I){if(r){const R=u.af(L);return u.a0(R,R,[I,I,1]),d||u.ae(R,R,-k.angle),R}return k.glCoordMatrix}function fe(L,r,d){let k;d?(k=[L.x,L.y,d(L.x,L.y),1],u.ag(k,k,r)):(k=[L.x,L.y,0,1],me(k,k,r));const I=k[3];return{point:new u.P(k[0]/I,k[1]/I),signedDistanceFromCamera:I}}function ye(L,r){return .5+L/r*.5}function Me(L,r){const d=L[0]/L[3],k=L[1]/L[3];return d>=-r[0]&&d<=r[0]&&k>=-r[1]&&k<=r[1]}function xe(L,r,d,k,I,R,q,a,o,h){const p=k?L.textSizeData:L.iconSizeData,v=u.ah(p,d.transform.zoom),E=[256/d.width*2+1,256/d.height*2+1],z=k?L.text.dynamicLayoutVertexArray:L.icon.dynamicLayoutVertexArray;z.clear();const F=L.lineVertexArray,Y=k?L.text.placedSymbolArray:L.icon.placedSymbolArray,J=d.transform.width/d.transform.height;let ve=!1;for(let Ie=0;Ie<Y.length;Ie++){const Oe=Y.get(Ie);if(Oe.hidden||Oe.writingMode===u.ai.vertical&&!ve){he(Oe.numGlyphs,z);continue}let He;if(ve=!1,h?(He=[Oe.anchorX,Oe.anchorY,h(Oe.anchorX,Oe.anchorY),1],u.ag(He,He,r)):(He=[Oe.anchorX,Oe.anchorY,0,1],me(He,He,r)),!Me(He,E)){he(Oe.numGlyphs,z);continue}const We=ye(d.transform.cameraToCenterDistance,He[3]),st=u.aj(p,v,Oe),wt=q?st/We:st*We,Et=new u.P(Oe.anchorX,Oe.anchorY),pt=fe(Et,I,h).point,bt={projections:{},offsets:{}},St=Ne(Oe,wt,!1,a,r,I,R,L.glyphOffsetArray,F,z,pt,Et,bt,J,o,h);ve=St.useVertical,(St.notEnoughRoom||ve||St.needsFlipping&&Ne(Oe,wt,!0,a,r,I,R,L.glyphOffsetArray,F,z,pt,Et,bt,J,o,h).notEnoughRoom)&&he(Oe.numGlyphs,z)}k?L.text.dynamicLayoutVertexBuffer.updateData(z):L.icon.dynamicLayoutVertexBuffer.updateData(z)}function ke(L,r,d,k,I,R,q,a,o,h,p,v,E){const z=a.glyphStartIndex+a.numGlyphs,F=a.lineStartIndex,Y=a.lineStartIndex+a.lineLength,J=r.getoffsetX(a.glyphStartIndex),ve=r.getoffsetX(z-1),Ie=W(L*J,d,k,I,R,q,a.segment,F,Y,o,h,p,v,E);if(!Ie)return null;const Oe=W(L*ve,d,k,I,R,q,a.segment,F,Y,o,h,p,v,E);return Oe?{first:Ie,last:Oe}:null}function be(L,r,d,k){return L===u.ai.horizontal&&Math.abs(d.y-r.y)>Math.abs(d.x-r.x)*k?{useVertical:!0}:(L===u.ai.vertical?r.y<d.y:r.x>d.x)?{needsFlipping:!0}:null}function Ne(L,r,d,k,I,R,q,a,o,h,p,v,E,z,F,Y){const J=r/24,ve=L.lineOffsetX*J,Ie=L.lineOffsetY*J;let Oe;if(L.numGlyphs>1){const He=L.glyphStartIndex+L.numGlyphs,We=L.lineStartIndex,st=L.lineStartIndex+L.lineLength,wt=ke(J,a,ve,Ie,d,p,v,L,o,R,E,F,Y);if(!wt)return{notEnoughRoom:!0};const Et=fe(wt.first.point,q,Y).point,pt=fe(wt.last.point,q,Y).point;if(k&&!d){const bt=be(L.writingMode,Et,pt,z);if(bt)return bt}Oe=[wt.first];for(let bt=L.glyphStartIndex+1;bt<He-1;bt++)Oe.push(W(J*a.getoffsetX(bt),ve,Ie,d,p,v,L.segment,We,st,o,R,E,F,Y));Oe.push(wt.last)}else{if(k&&!d){const We=fe(v,I,Y).point,st=L.lineStartIndex+L.segment+1,wt=new u.P(o.getx(st),o.gety(st)),Et=fe(wt,I,Y),pt=Et.signedDistanceFromCamera>0?Et.point:Re(v,wt,We,1,I,Y),bt=be(L.writingMode,We,pt,z);if(bt)return bt}const He=W(J*a.getoffsetX(L.glyphStartIndex),ve,Ie,d,p,v,L.segment,L.lineStartIndex,L.lineStartIndex+L.lineLength,o,R,E,F,Y);if(!He)return{notEnoughRoom:!0};Oe=[He]}for(const He of Oe)u.ak(h,He.point,He.angle);return{}}function Re(L,r,d,k,I,R){const q=fe(L.add(L.sub(r)._unit()),I,R).point,a=d.sub(q);return d.add(a._mult(k/a.mag()))}function Fe(L,r){const{projectionCache:d,lineVertexArray:k,labelPlaneMatrix:I,tileAnchorPoint:R,distanceFromAnchor:q,getElevation:a,previousVertex:o,direction:h,absOffsetX:p}=r;if(d.projections[L])return d.projections[L];const v=new u.P(k.getx(L),k.gety(L)),E=fe(v,I,a);if(E.signedDistanceFromCamera>0)return d.projections[L]=E.point,E.point;const z=L-h;return Re(q===0?R:new u.P(k.getx(z),k.gety(z)),v,o,p-q+1,I,a)}function de(L,r,d){return L._unit()._perp()._mult(r*d)}function Ae(L,r,d,k,I,R,q,a){const{projectionCache:o,direction:h}=a;if(o.offsets[L])return o.offsets[L];const p=d.add(r);if(L+h<k||L+h>=I)return o.offsets[L]=p,p;const v=Fe(L+h,a),E=de(v.sub(d),q,h),z=d.add(E),F=v.add(E);return o.offsets[L]=u.al(R,p,z,F)||p,o.offsets[L]}function W(L,r,d,k,I,R,q,a,o,h,p,v,E,z){const F=k?L-r:L+r;let Y=F>0?1:-1,J=0;k&&(Y*=-1,J=Math.PI),Y<0&&(J+=Math.PI);let ve,Ie,Oe=Y>0?a+q:a+q+1,He=I,We=I,st=0,wt=0;const Et=Math.abs(F),pt=[];let bt;for(;st+wt<=Et;){if(Oe+=Y,Oe<a||Oe>=o)return null;st+=wt,We=He,Ie=ve;const $t={projectionCache:v,lineVertexArray:h,labelPlaneMatrix:p,tileAnchorPoint:R,distanceFromAnchor:st,getElevation:z,previousVertex:We,direction:Y,absOffsetX:Et};if(He=Fe(Oe,$t),d===0)pt.push(We),bt=He.sub(We);else{let ri;const ni=He.sub(We);ri=ni.mag()===0?de(Fe(Oe+Y,$t).sub(He),d,Y):de(ni,d,Y),Ie||(Ie=We.add(ri)),ve=Ae(Oe,ri,He,a,o,Ie,d,$t),pt.push(Ie),bt=ve.sub(Ie)}wt=bt.mag()}const St=bt._mult((Et-st)/wt)._add(Ie||We),vi=J+Math.atan2(He.y-We.y,He.x-We.x);return pt.push(St),{point:St,angle:E?vi:0,path:pt}}const ie=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function he(L,r){for(let d=0;d<L;d++){const k=r.length;r.resize(k+4),r.float32.set(ie,3*k)}}function me(L,r,d){const k=r[0],I=r[1];return L[0]=d[0]*k+d[4]*I+d[12],L[1]=d[1]*k+d[5]*I+d[13],L[3]=d[3]*k+d[7]*I+d[15],L}const pe=100;class De{constructor(r,d=new K(r.width+200,r.height+200,25),k=new K(r.width+200,r.height+200,25)){this.transform=r,this.grid=d,this.ignoredGrid=k,this.pitchfactor=Math.cos(r._pitch)*r.cameraToCenterDistance,this.screenRightBoundary=r.width+pe,this.screenBottomBoundary=r.height+pe,this.gridRightBoundary=r.width+200,this.gridBottomBoundary=r.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(r,d,k,I,R,q){const a=this.projectAndGetPerspectiveRatio(I,r.anchorPointX,r.anchorPointY,q),o=k*a.perspectiveRatio,h=r.x1*o+a.point.x,p=r.y1*o+a.point.y,v=r.x2*o+a.point.x,E=r.y2*o+a.point.y;return!this.isInsideGrid(h,p,v,E)||d!=="always"&&this.grid.hitTest(h,p,v,E,d,R)||a.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[h,p,v,E],offscreen:this.isOffscreen(h,p,v,E)}}placeCollisionCircles(r,d,k,I,R,q,a,o,h,p,v,E,z,F){const Y=[],J=new u.P(d.anchorX,d.anchorY),ve=fe(J,q,F),Ie=ye(this.transform.cameraToCenterDistance,ve.signedDistanceFromCamera),Oe=(p?R/Ie:R*Ie)/u.ap,He=fe(J,a,F).point,We=ke(Oe,I,d.lineOffsetX*Oe,d.lineOffsetY*Oe,!1,He,J,d,k,a,{projections:{},offsets:{}},!1,F);let st=!1,wt=!1,Et=!0;if(We){const pt=.5*E*Ie+z,bt=new u.P(-100,-100),St=new u.P(this.screenRightBoundary,this.screenBottomBoundary),vi=new U,$t=We.first,ri=We.last;let ni=[];for(let Oi=$t.path.length-1;Oi>=1;Oi--)ni.push($t.path[Oi]);for(let Oi=1;Oi<ri.path.length;Oi++)ni.push(ri.path[Oi]);const _n=2.5*pt;if(o){const Oi=ni.map(Ui=>fe(Ui,o,F));ni=Oi.some(Ui=>Ui.signedDistanceFromCamera<=0)?[]:Oi.map(Ui=>Ui.point)}let Ki=[];if(ni.length>0){const Oi=ni[0].clone(),Ui=ni[0].clone();for(let tn=1;tn<ni.length;tn++)Oi.x=Math.min(Oi.x,ni[tn].x),Oi.y=Math.min(Oi.y,ni[tn].y),Ui.x=Math.max(Ui.x,ni[tn].x),Ui.y=Math.max(Ui.y,ni[tn].y);Ki=Oi.x>=bt.x&&Ui.x<=St.x&&Oi.y>=bt.y&&Ui.y<=St.y?[ni]:Ui.x<bt.x||Oi.x>St.x||Ui.y<bt.y||Oi.y>St.y?[]:u.am([ni],bt.x,bt.y,St.x,St.y)}for(const Oi of Ki){vi.reset(Oi,.25*pt);let Ui=0;Ui=vi.length<=.5*pt?1:Math.ceil(vi.paddedLength/_n)+1;for(let tn=0;tn<Ui;tn++){const ji=tn/Math.max(Ui-1,1),Qn=vi.lerp(ji),fn=Qn.x+pe,Fn=Qn.y+pe;Y.push(fn,Fn,pt,0);const Rr=fn-pt,Mr=Fn-pt,AA=fn+pt,DA=Fn+pt;if(Et=Et&&this.isOffscreen(Rr,Mr,AA,DA),wt=wt||this.isInsideGrid(Rr,Mr,AA,DA),r!=="always"&&this.grid.hitTestCircle(fn,Fn,pt,r,v)&&(st=!0,!h))return{circles:[],offscreen:!1,collisionDetected:st}}}}return{circles:!h&&st||!wt||Ie<this.perspectiveRatioCutoff?[]:Y,offscreen:Et,collisionDetected:st}}queryRenderedSymbols(r){if(r.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const d=[];let k=1/0,I=1/0,R=-1/0,q=-1/0;for(const p of r){const v=new u.P(p.x+pe,p.y+pe);k=Math.min(k,v.x),I=Math.min(I,v.y),R=Math.max(R,v.x),q=Math.max(q,v.y),d.push(v)}const a=this.grid.query(k,I,R,q).concat(this.ignoredGrid.query(k,I,R,q)),o={},h={};for(const p of a){const v=p.key;if(o[v.bucketInstanceId]===void 0&&(o[v.bucketInstanceId]={}),o[v.bucketInstanceId][v.featureIndex])continue;const E=[new u.P(p.x1,p.y1),new u.P(p.x2,p.y1),new u.P(p.x2,p.y2),new u.P(p.x1,p.y2)];u.an(d,E)&&(o[v.bucketInstanceId][v.featureIndex]=!0,h[v.bucketInstanceId]===void 0&&(h[v.bucketInstanceId]=[]),h[v.bucketInstanceId].push(v.featureIndex))}return h}insertCollisionBox(r,d,k,I,R,q){(k?this.ignoredGrid:this.grid).insert({bucketInstanceId:I,featureIndex:R,collisionGroupID:q,overlapMode:d},r[0],r[1],r[2],r[3])}insertCollisionCircles(r,d,k,I,R,q){const a=k?this.ignoredGrid:this.grid,o={bucketInstanceId:I,featureIndex:R,collisionGroupID:q,overlapMode:d};for(let h=0;h<r.length;h+=4)a.insertCircle(o,r[h],r[h+1],r[h+2])}projectAndGetPerspectiveRatio(r,d,k,I){let R;return I?(R=[d,k,I(d,k),1],u.ag(R,R,r)):(R=[d,k,0,1],me(R,R,r)),{point:new u.P((R[0]/R[3]+1)/2*this.transform.width+pe,(-R[1]/R[3]+1)/2*this.transform.height+pe),perspectiveRatio:.5+this.transform.cameraToCenterDistance/R[3]*.5}}isOffscreen(r,d,k,I){return k<pe||r>=this.screenRightBoundary||I<pe||d>this.screenBottomBoundary}isInsideGrid(r,d,k,I){return k>=0&&r<this.gridRightBoundary&&I>=0&&d<this.gridBottomBoundary}getViewportMatrix(){const r=u.ao([]);return u.$(r,r,[-100,-100,0]),r}}function Le(L,r,d){return r*(u.N/(L.tileSize*Math.pow(2,d-L.tileID.overscaledZ)))}class Pe{constructor(r,d,k,I){this.opacity=r?Math.max(0,Math.min(1,r.opacity+(r.placed?d:-d))):I&&k?1:0,this.placed=k}isHidden(){return this.opacity===0&&!this.placed}}class Ve{constructor(r,d,k,I,R){this.text=new Pe(r?r.text:null,d,k,R),this.icon=new Pe(r?r.icon:null,d,I,R)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Ue{constructor(r,d,k){this.text=r,this.icon=d,this.skipFade=k}}class ge{constructor(){this.invProjMatrix=u.Z(),this.viewportMatrix=u.Z(),this.circles=[]}}class Ce{constructor(r,d,k,I,R){this.bucketInstanceId=r,this.featureIndex=d,this.sourceLayerIndex=k,this.bucketIndex=I,this.tileID=R}}class Qe{constructor(r){this.crossSourceCollisions=r,this.maxGroupID=0,this.collisionGroups={}}get(r){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[r]){const d=++this.maxGroupID;this.collisionGroups[r]={ID:d,predicate:k=>k.collisionGroupID===d}}return this.collisionGroups[r]}}function nt(L,r,d,k,I){const{horizontalAlign:R,verticalAlign:q}=u.au(L);return new u.P(-(R-.5)*r+k[0]*I,-(q-.5)*d+k[1]*I)}function i(L,r,d,k,I,R){const{x1:q,x2:a,y1:o,y2:h,anchorPointX:p,anchorPointY:v}=L,E=new u.P(r,d);return k&&E._rotate(I?R:-R),{x1:q+E.x,y1:o+E.y,x2:a+E.x,y2:h+E.y,anchorPointX:p,anchorPointY:v}}class ue{constructor(r,d,k,I,R){this.transform=r.clone(),this.terrain=d,this.collisionIndex=new De(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=k,this.retainedQueryData={},this.collisionGroups=new Qe(I),this.collisionCircleArrays={},this.prevPlacement=R,R&&(R.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(r,d,k,I){const R=k.getBucket(d),q=k.latestFeatureIndex;if(!R||!q||d.id!==R.layerIds[0])return;const a=k.collisionBoxArray,o=R.layers[0].layout,h=Math.pow(2,this.transform.zoom-k.tileID.overscaledZ),p=k.tileSize/u.N,v=this.transform.calculatePosMatrix(k.tileID.toUnwrapped()),E=o.get("text-pitch-alignment")==="map",z=o.get("text-rotation-alignment")==="map",F=Le(k,1,this.transform.zoom),Y=se(v,E,z,this.transform,F);let J=null;if(E){const Ie=oe(v,E,z,this.transform,F);J=u.a1([],this.transform.labelPlaneMatrix,Ie)}this.retainedQueryData[R.bucketInstanceId]=new Ce(R.bucketInstanceId,q,R.sourceLayerIndex,R.index,k.tileID);const ve={bucket:R,layout:o,posMatrix:v,textLabelPlaneMatrix:Y,labelToScreenMatrix:J,scale:h,textPixelRatio:p,holdingForFade:k.holdingForFade(),collisionBoxArray:a,partiallyEvaluatedTextSize:u.ah(R.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(R.sourceID)};if(I)for(const Ie of R.sortKeyRanges){const{sortKey:Oe,symbolInstanceStart:He,symbolInstanceEnd:We}=Ie;r.push({sortKey:Oe,symbolInstanceStart:He,symbolInstanceEnd:We,parameters:ve})}else r.push({symbolInstanceStart:0,symbolInstanceEnd:R.symbolInstances.length,parameters:ve})}attemptAnchorPlacement(r,d,k,I,R,q,a,o,h,p,v,E,z,F,Y,J){const ve=u.aq[r.textAnchor],Ie=[r.textOffset0,r.textOffset1],Oe=nt(ve,k,I,Ie,R),He=this.collisionIndex.placeCollisionBox(i(d,Oe.x,Oe.y,q,a,this.transform.angle),v,o,h,p.predicate,J);if((!Y||this.collisionIndex.placeCollisionBox(i(Y,Oe.x,Oe.y,q,a,this.transform.angle),v,o,h,p.predicate,J).box.length!==0)&&He.box.length>0){let We;if(this.prevPlacement&&this.prevPlacement.variableOffsets[E.crossTileID]&&this.prevPlacement.placements[E.crossTileID]&&this.prevPlacement.placements[E.crossTileID].text&&(We=this.prevPlacement.variableOffsets[E.crossTileID].anchor),E.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[E.crossTileID]={textOffset:Ie,width:k,height:I,anchor:ve,textBoxScale:R,prevAnchor:We},this.markUsedJustification(z,ve,E,F),z.allowVerticalPlacement&&(this.markUsedOrientation(z,F,E),this.placedOrientations[E.crossTileID]=F),{shift:Oe,placedGlyphBoxes:He}}}placeLayerBucketPart(r,d,k){const{bucket:I,layout:R,posMatrix:q,textLabelPlaneMatrix:a,labelToScreenMatrix:o,textPixelRatio:h,holdingForFade:p,collisionBoxArray:v,partiallyEvaluatedTextSize:E,collisionGroup:z}=r.parameters,F=R.get("text-optional"),Y=R.get("icon-optional"),J=u.ar(R,"text-overlap","text-allow-overlap"),ve=J==="always",Ie=u.ar(R,"icon-overlap","icon-allow-overlap"),Oe=Ie==="always",He=R.get("text-rotation-alignment")==="map",We=R.get("text-pitch-alignment")==="map",st=R.get("icon-text-fit")!=="none",wt=R.get("symbol-z-order")==="viewport-y",Et=ve&&(Oe||!I.hasIconData()||Y),pt=Oe&&(ve||!I.hasTextData()||F);!I.collisionArrays&&v&&I.deserializeCollisionBoxes(v);const bt=this.retainedQueryData[I.bucketInstanceId].tileID,St=this.terrain?($t,ri)=>this.terrain.getElevation(bt,$t,ri):null,vi=($t,ri)=>{var ni,_n;if(d[$t.crossTileID])return;if(p)return void(this.placements[$t.crossTileID]=new Ue(!1,!1,!1));let Ki=!1,Oi=!1,Ui=!0,tn=null,ji={box:null,offscreen:null},Qn={box:null,offscreen:null},fn=null,Fn=null,Rr=null,Mr=0,AA=0,DA=0;ri.textFeatureIndex?Mr=ri.textFeatureIndex:$t.useRuntimeCollisionCircles&&(Mr=$t.featureIndex),ri.verticalTextFeatureIndex&&(AA=ri.verticalTextFeatureIndex);const lA=ri.textBox;if(lA){const Gr=ws=>{let Os=u.ai.horizontal;if(I.allowVerticalPlacement&&!ws&&this.prevPlacement){const Ks=this.prevPlacement.placedOrientations[$t.crossTileID];Ks&&(this.placedOrientations[$t.crossTileID]=Ks,Os=Ks,this.markUsedOrientation(I,Os,$t))}return Os},Aa=(ws,Os)=>{if(I.allowVerticalPlacement&&$t.numVerticalGlyphVertices>0&&ri.verticalTextBox){for(const Ks of I.writingModes)if(Ks===u.ai.vertical?(ji=Os(),Qn=ji):ji=ws(),ji&&ji.box&&ji.box.length)break}else ji=ws()},Qa=$t.textAnchorOffsetStartIndex,qa=$t.textAnchorOffsetEndIndex;if(qa===Qa){const ws=(Os,Ks)=>{const Ms=this.collisionIndex.placeCollisionBox(Os,J,h,q,z.predicate,St);return Ms&&Ms.box&&Ms.box.length&&(this.markUsedOrientation(I,Ks,$t),this.placedOrientations[$t.crossTileID]=Ks),Ms};Aa(()=>ws(lA,u.ai.horizontal),()=>{const Os=ri.verticalTextBox;return I.allowVerticalPlacement&&$t.numVerticalGlyphVertices>0&&Os?ws(Os,u.ai.vertical):{box:null,offscreen:null}}),Gr(ji&&ji.box&&ji.box.length)}else{let ws=u.aq[(_n=(ni=this.prevPlacement)===null||ni===void 0?void 0:ni.variableOffsets[$t.crossTileID])===null||_n===void 0?void 0:_n.anchor];const Os=(Ms,Gs,eu)=>{const mc=Ms.x2-Ms.x1,_c=Ms.y2-Ms.y1,w0=$t.textBoxScale,vu=st&&Ie==="never"?Gs:null;let LA={box:[],offscreen:!1},uA=J==="never"?1:2,hA="never";ws&&uA++;for(let jo=0;jo<uA;jo++){for(let zA=Qa;zA<qa;zA++){const Bl=I.textAnchorOffsets.get(zA);if(ws&&Bl.textAnchor!==ws)continue;const tl=this.attemptAnchorPlacement(Bl,Ms,mc,_c,w0,He,We,h,q,z,hA,$t,I,eu,vu,St);if(tl&&(LA=tl.placedGlyphBoxes,LA&&LA.box&&LA.box.length))return Ki=!0,tn=tl.shift,LA}ws?ws=null:hA=J}return LA};Aa(()=>Os(lA,ri.iconBox,u.ai.horizontal),()=>{const Ms=ri.verticalTextBox;return I.allowVerticalPlacement&&!(ji&&ji.box&&ji.box.length)&&$t.numVerticalGlyphVertices>0&&Ms?Os(Ms,ri.verticalIconBox,u.ai.vertical):{box:null,offscreen:null}}),ji&&(Ki=ji.box,Ui=ji.offscreen);const Ks=Gr(ji&&ji.box);if(!Ki&&this.prevPlacement){const Ms=this.prevPlacement.variableOffsets[$t.crossTileID];Ms&&(this.variableOffsets[$t.crossTileID]=Ms,this.markUsedJustification(I,Ms.anchor,$t,Ks))}}}if(fn=ji,Ki=fn&&fn.box&&fn.box.length>0,Ui=fn&&fn.offscreen,$t.useRuntimeCollisionCircles){const Gr=I.text.placedSymbolArray.get($t.centerJustifiedTextSymbolIndex),Aa=u.aj(I.textSizeData,E,Gr),Qa=R.get("text-padding");Fn=this.collisionIndex.placeCollisionCircles(J,Gr,I.lineVertexArray,I.glyphOffsetArray,Aa,q,a,o,k,We,z.predicate,$t.collisionCircleDiameter,Qa,St),Fn.circles.length&&Fn.collisionDetected&&!k&&u.w("Collisions detected, but collision boxes are not shown"),Ki=ve||Fn.circles.length>0&&!Fn.collisionDetected,Ui=Ui&&Fn.offscreen}if(ri.iconFeatureIndex&&(DA=ri.iconFeatureIndex),ri.iconBox){const Gr=Aa=>{const Qa=st&&tn?i(Aa,tn.x,tn.y,He,We,this.transform.angle):Aa;return this.collisionIndex.placeCollisionBox(Qa,Ie,h,q,z.predicate,St)};Qn&&Qn.box&&Qn.box.length&&ri.verticalIconBox?(Rr=Gr(ri.verticalIconBox),Oi=Rr.box.length>0):(Rr=Gr(ri.iconBox),Oi=Rr.box.length>0),Ui=Ui&&Rr.offscreen}const Tl=F||$t.numHorizontalGlyphVertices===0&&$t.numVerticalGlyphVertices===0,Pl=Y||$t.numIconVertices===0;if(Tl||Pl?Pl?Tl||(Oi=Oi&&Ki):Ki=Oi&&Ki:Oi=Ki=Oi&&Ki,Ki&&fn&&fn.box&&this.collisionIndex.insertCollisionBox(fn.box,J,R.get("text-ignore-placement"),I.bucketInstanceId,Qn&&Qn.box&&AA?AA:Mr,z.ID),Oi&&Rr&&this.collisionIndex.insertCollisionBox(Rr.box,Ie,R.get("icon-ignore-placement"),I.bucketInstanceId,DA,z.ID),Fn&&(Ki&&this.collisionIndex.insertCollisionCircles(Fn.circles,J,R.get("text-ignore-placement"),I.bucketInstanceId,Mr,z.ID),k)){const Gr=I.bucketInstanceId;let Aa=this.collisionCircleArrays[Gr];Aa===void 0&&(Aa=this.collisionCircleArrays[Gr]=new ge);for(let Qa=0;Qa<Fn.circles.length;Qa+=4)Aa.circles.push(Fn.circles[Qa+0]),Aa.circles.push(Fn.circles[Qa+1]),Aa.circles.push(Fn.circles[Qa+2]),Aa.circles.push(Fn.collisionDetected?1:0)}if($t.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(I.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[$t.crossTileID]=new Ue(Ki||Et,Oi||pt,Ui||I.justReloaded),d[$t.crossTileID]=!0};if(wt){if(r.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const $t=I.getSortedSymbolIndexes(this.transform.angle);for(let ri=$t.length-1;ri>=0;--ri){const ni=$t[ri];vi(I.symbolInstances.get(ni),I.collisionArrays[ni])}}else for(let $t=r.symbolInstanceStart;$t<r.symbolInstanceEnd;$t++)vi(I.symbolInstances.get($t),I.collisionArrays[$t]);if(k&&I.bucketInstanceId in this.collisionCircleArrays){const $t=this.collisionCircleArrays[I.bucketInstanceId];u.as($t.invProjMatrix,q),$t.viewportMatrix=this.collisionIndex.getViewportMatrix()}I.justReloaded=!1}markUsedJustification(r,d,k,I){let R;R=I===u.ai.vertical?k.verticalPlacedTextSymbolIndex:{left:k.leftJustifiedTextSymbolIndex,center:k.centerJustifiedTextSymbolIndex,right:k.rightJustifiedTextSymbolIndex}[u.at(d)];const q=[k.leftJustifiedTextSymbolIndex,k.centerJustifiedTextSymbolIndex,k.rightJustifiedTextSymbolIndex,k.verticalPlacedTextSymbolIndex];for(const a of q)a>=0&&(r.text.placedSymbolArray.get(a).crossTileID=R>=0&&a!==R?0:k.crossTileID)}markUsedOrientation(r,d,k){const I=d===u.ai.horizontal||d===u.ai.horizontalOnly?d:0,R=d===u.ai.vertical?d:0,q=[k.leftJustifiedTextSymbolIndex,k.centerJustifiedTextSymbolIndex,k.rightJustifiedTextSymbolIndex];for(const a of q)r.text.placedSymbolArray.get(a).placedOrientation=I;k.verticalPlacedTextSymbolIndex&&(r.text.placedSymbolArray.get(k.verticalPlacedTextSymbolIndex).placedOrientation=R)}commit(r){this.commitTime=r,this.zoomAtLastRecencyCheck=this.transform.zoom;const d=this.prevPlacement;let k=!1;this.prevZoomAdjustment=d?d.zoomAdjustment(this.transform.zoom):0;const I=d?d.symbolFadeChange(r):1,R=d?d.opacities:{},q=d?d.variableOffsets:{},a=d?d.placedOrientations:{};for(const o in this.placements){const h=this.placements[o],p=R[o];p?(this.opacities[o]=new Ve(p,I,h.text,h.icon),k=k||h.text!==p.text.placed||h.icon!==p.icon.placed):(this.opacities[o]=new Ve(null,I,h.text,h.icon,h.skipFade),k=k||h.text||h.icon)}for(const o in R){const h=R[o];if(!this.opacities[o]){const p=new Ve(h,I,!1,!1);p.isHidden()||(this.opacities[o]=p,k=k||h.text.placed||h.icon.placed)}}for(const o in q)this.variableOffsets[o]||!this.opacities[o]||this.opacities[o].isHidden()||(this.variableOffsets[o]=q[o]);for(const o in a)this.placedOrientations[o]||!this.opacities[o]||this.opacities[o].isHidden()||(this.placedOrientations[o]=a[o]);if(d&&d.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");k?this.lastPlacementChangeTime=r:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=d?d.lastPlacementChangeTime:r)}updateLayerOpacities(r,d){const k={};for(const I of d){const R=I.getBucket(r);R&&I.latestFeatureIndex&&r.id===R.layerIds[0]&&this.updateBucketOpacities(R,k,I.collisionBoxArray)}}updateBucketOpacities(r,d,k){r.hasTextData()&&(r.text.opacityVertexArray.clear(),r.text.hasVisibleVertices=!1),r.hasIconData()&&(r.icon.opacityVertexArray.clear(),r.icon.hasVisibleVertices=!1),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexArray.clear(),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexArray.clear();const I=r.layers[0],R=I.layout,q=new Ve(null,0,!1,!1,!0),a=R.get("text-allow-overlap"),o=R.get("icon-allow-overlap"),h=I._unevaluatedLayout.hasValue("text-variable-anchor")||I._unevaluatedLayout.hasValue("text-variable-anchor-offset"),p=R.get("text-rotation-alignment")==="map",v=R.get("text-pitch-alignment")==="map",E=R.get("icon-text-fit")!=="none",z=new Ve(null,0,a&&(o||!r.hasIconData()||R.get("icon-optional")),o&&(a||!r.hasTextData()||R.get("text-optional")),!0);!r.collisionArrays&&k&&(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData())&&r.deserializeCollisionBoxes(k);const F=(Y,J,ve)=>{for(let Ie=0;Ie<J/4;Ie++)Y.opacityVertexArray.emplaceBack(ve);Y.hasVisibleVertices=Y.hasVisibleVertices||ve!==Yi};for(let Y=0;Y<r.symbolInstances.length;Y++){const J=r.symbolInstances.get(Y),{numHorizontalGlyphVertices:ve,numVerticalGlyphVertices:Ie,crossTileID:Oe}=J;let He=this.opacities[Oe];d[Oe]?He=q:He||(He=z,this.opacities[Oe]=He),d[Oe]=!0;const We=J.numIconVertices>0,st=this.placedOrientations[J.crossTileID],wt=st===u.ai.vertical,Et=st===u.ai.horizontal||st===u.ai.horizontalOnly;if(ve>0||Ie>0){const pt=Ti(He.text);F(r.text,ve,wt?Yi:pt),F(r.text,Ie,Et?Yi:pt);const bt=He.text.isHidden();[J.rightJustifiedTextSymbolIndex,J.centerJustifiedTextSymbolIndex,J.leftJustifiedTextSymbolIndex].forEach($t=>{$t>=0&&(r.text.placedSymbolArray.get($t).hidden=bt||wt?1:0)}),J.verticalPlacedTextSymbolIndex>=0&&(r.text.placedSymbolArray.get(J.verticalPlacedTextSymbolIndex).hidden=bt||Et?1:0);const St=this.variableOffsets[J.crossTileID];St&&this.markUsedJustification(r,St.anchor,J,st);const vi=this.placedOrientations[J.crossTileID];vi&&(this.markUsedJustification(r,"left",J,vi),this.markUsedOrientation(r,vi,J))}if(We){const pt=Ti(He.icon),bt=!(E&&J.verticalPlacedIconSymbolIndex&&wt);J.placedIconSymbolIndex>=0&&(F(r.icon,J.numIconVertices,bt?pt:Yi),r.icon.placedSymbolArray.get(J.placedIconSymbolIndex).hidden=He.icon.isHidden()),J.verticalPlacedIconSymbolIndex>=0&&(F(r.icon,J.numVerticalIconVertices,bt?Yi:pt),r.icon.placedSymbolArray.get(J.verticalPlacedIconSymbolIndex).hidden=He.icon.isHidden())}if(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData()){const pt=r.collisionArrays[Y];if(pt){let bt=new u.P(0,0);if(pt.textBox||pt.verticalTextBox){let vi=!0;if(h){const $t=this.variableOffsets[Oe];$t?(bt=nt($t.anchor,$t.width,$t.height,$t.textOffset,$t.textBoxScale),p&&bt._rotate(v?this.transform.angle:-this.transform.angle)):vi=!1}pt.textBox&&Dt(r.textCollisionBox.collisionVertexArray,He.text.placed,!vi||wt,bt.x,bt.y),pt.verticalTextBox&&Dt(r.textCollisionBox.collisionVertexArray,He.text.placed,!vi||Et,bt.x,bt.y)}const St=!!(!Et&&pt.verticalIconBox);pt.iconBox&&Dt(r.iconCollisionBox.collisionVertexArray,He.icon.placed,St,E?bt.x:0,E?bt.y:0),pt.verticalIconBox&&Dt(r.iconCollisionBox.collisionVertexArray,He.icon.placed,!St,E?bt.x:0,E?bt.y:0)}}}if(r.sortFeatures(this.transform.angle),this.retainedQueryData[r.bucketInstanceId]&&(this.retainedQueryData[r.bucketInstanceId].featureSortOrder=r.featureSortOrder),r.hasTextData()&&r.text.opacityVertexBuffer&&r.text.opacityVertexBuffer.updateData(r.text.opacityVertexArray),r.hasIconData()&&r.icon.opacityVertexBuffer&&r.icon.opacityVertexBuffer.updateData(r.icon.opacityVertexArray),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexBuffer&&r.iconCollisionBox.collisionVertexBuffer.updateData(r.iconCollisionBox.collisionVertexArray),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexBuffer&&r.textCollisionBox.collisionVertexBuffer.updateData(r.textCollisionBox.collisionVertexArray),r.text.opacityVertexArray.length!==r.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${r.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${r.text.layoutVertexArray.length}) / 4`);if(r.icon.opacityVertexArray.length!==r.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${r.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${r.icon.layoutVertexArray.length}) / 4`);if(r.bucketInstanceId in this.collisionCircleArrays){const Y=this.collisionCircleArrays[r.bucketInstanceId];r.placementInvProjMatrix=Y.invProjMatrix,r.placementViewportMatrix=Y.viewportMatrix,r.collisionCircleArray=Y.circles,delete this.collisionCircleArrays[r.bucketInstanceId]}}symbolFadeChange(r){return this.fadeDuration===0?1:(r-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(r){return Math.max(0,(this.transform.zoom-r)/1.5)}hasTransitions(r){return this.stale||r-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(r,d){const k=this.zoomAtLastRecencyCheck===d?1-this.zoomAdjustment(d):1;return this.zoomAtLastRecencyCheck=d,this.commitTime+this.fadeDuration*k>r}setStale(){this.stale=!0}}function Dt(L,r,d,k,I){L.emplaceBack(r?1:0,d?1:0,k||0,I||0),L.emplaceBack(r?1:0,d?1:0,k||0,I||0),L.emplaceBack(r?1:0,d?1:0,k||0,I||0),L.emplaceBack(r?1:0,d?1:0,k||0,I||0)}const Vt=Math.pow(2,25),Wt=Math.pow(2,24),It=Math.pow(2,17),Bt=Math.pow(2,16),hi=Math.pow(2,9),Zt=Math.pow(2,8),ei=Math.pow(2,1);function Ti(L){if(L.opacity===0&&!L.placed)return 0;if(L.opacity===1&&L.placed)return 4294967295;const r=L.placed?1:0,d=Math.floor(127*L.opacity);return d*Vt+r*Wt+d*It+r*Bt+d*hi+r*Zt+d*ei+r}const Yi=0;class wn{constructor(r){this._sortAcrossTiles=r.layout.get("symbol-z-order")!=="viewport-y"&&!r.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(r,d,k,I,R){const q=this._bucketParts;for(;this._currentTileIndex<r.length;)if(d.getBucketParts(q,I,r[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,R())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,q.sort((a,o)=>a.sortKey-o.sortKey));this._currentPartIndex<q.length;)if(d.placeLayerBucketPart(q[this._currentPartIndex],this._seenCrossTileIDs,k),this._currentPartIndex++,R())return!0;return!1}}class An{constructor(r,d,k,I,R,q,a,o){this.placement=new ue(r,d,q,a,o),this._currentPlacementIndex=k.length-1,this._forceFullPlacement=I,this._showCollisionBoxes=R,this._done=!1}isDone(){return this._done}continuePlacement(r,d,k){const I=u.h.now(),R=()=>!this._forceFullPlacement&&u.h.now()-I>2;for(;this._currentPlacementIndex>=0;){const q=d[r[this._currentPlacementIndex]],a=this.placement.collisionIndex.transform.zoom;if(q.type==="symbol"&&(!q.minzoom||q.minzoom<=a)&&(!q.maxzoom||q.maxzoom>a)){if(this._inProgressLayer||(this._inProgressLayer=new wn(q)),this._inProgressLayer.continuePlacement(k[q.source],this.placement,this._showCollisionBoxes,q,R))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(r){return this.placement.commit(r),this.placement}}const en=512/u.N/2;class ar{constructor(r,d,k){this.tileID=r,this.bucketInstanceId=k,this._symbolsByKey={};const I=new Map;for(let R=0;R<d.length;R++){const q=d.get(R),a=q.key,o=I.get(a);o?o.push(q):I.set(a,[q])}for(const[R,q]of I){const a={positions:q.map(o=>({x:Math.floor(o.anchorX*en),y:Math.floor(o.anchorY*en)})),crossTileIDs:q.map(o=>o.crossTileID)};if(a.positions.length>128){const o=new u.av(a.positions.length,16,Uint16Array);for(const{x:h,y:p}of a.positions)o.add(h,p);o.finish(),delete a.positions,a.index=o}this._symbolsByKey[R]=a}}getScaledCoordinates(r,d){const{x:k,y:I,z:R}=this.tileID.canonical,{x:q,y:a,z:o}=d.canonical,h=en/Math.pow(2,o-R),p=(a*u.N+r.anchorY)*h,v=I*u.N*en;return{x:Math.floor((q*u.N+r.anchorX)*h-k*u.N*en),y:Math.floor(p-v)}}findMatches(r,d,k){const I=this.tileID.canonical.z<d.canonical.z?1:Math.pow(2,this.tileID.canonical.z-d.canonical.z);for(let R=0;R<r.length;R++){const q=r.get(R);if(q.crossTileID)continue;const a=this._symbolsByKey[q.key];if(!a)continue;const o=this.getScaledCoordinates(q,d);if(a.index){const h=a.index.range(o.x-I,o.y-I,o.x+I,o.y+I).sort();for(const p of h){const v=a.crossTileIDs[p];if(!k[v]){k[v]=!0,q.crossTileID=v;break}}}else if(a.positions)for(let h=0;h<a.positions.length;h++){const p=a.positions[h],v=a.crossTileIDs[h];if(Math.abs(p.x-o.x)<=I&&Math.abs(p.y-o.y)<=I&&!k[v]){k[v]=!0,q.crossTileID=v;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:r})=>r)}}class pi{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Zn{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(r){const d=Math.round((r-this.lng)/360);if(d!==0)for(const k in this.indexes){const I=this.indexes[k],R={};for(const q in I){const a=I[q];a.tileID=a.tileID.unwrapTo(a.tileID.wrap+d),R[a.tileID.key]=a}this.indexes[k]=R}this.lng=r}addBucket(r,d,k){if(this.indexes[r.overscaledZ]&&this.indexes[r.overscaledZ][r.key]){if(this.indexes[r.overscaledZ][r.key].bucketInstanceId===d.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(r.overscaledZ,this.indexes[r.overscaledZ][r.key])}for(let R=0;R<d.symbolInstances.length;R++)d.symbolInstances.get(R).crossTileID=0;this.usedCrossTileIDs[r.overscaledZ]||(this.usedCrossTileIDs[r.overscaledZ]={});const I=this.usedCrossTileIDs[r.overscaledZ];for(const R in this.indexes){const q=this.indexes[R];if(Number(R)>r.overscaledZ)for(const a in q){const o=q[a];o.tileID.isChildOf(r)&&o.findMatches(d.symbolInstances,r,I)}else{const a=q[r.scaledTo(Number(R)).key];a&&a.findMatches(d.symbolInstances,r,I)}}for(let R=0;R<d.symbolInstances.length;R++){const q=d.symbolInstances.get(R);q.crossTileID||(q.crossTileID=k.generate(),I[q.crossTileID]=!0)}return this.indexes[r.overscaledZ]===void 0&&(this.indexes[r.overscaledZ]={}),this.indexes[r.overscaledZ][r.key]=new ar(r,d.symbolInstances,d.bucketInstanceId),!0}removeBucketCrossTileIDs(r,d){for(const k of d.getCrossTileIDsLists())for(const I of k)delete this.usedCrossTileIDs[r][I]}removeStaleBuckets(r){let d=!1;for(const k in this.indexes){const I=this.indexes[k];for(const R in I)r[I[R].bucketInstanceId]||(this.removeBucketCrossTileIDs(k,I[R]),delete I[R],d=!0)}return d}}class Xi{constructor(){this.layerIndexes={},this.crossTileIDs=new pi,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(r,d,k){let I=this.layerIndexes[r.id];I===void 0&&(I=this.layerIndexes[r.id]=new Zn);let R=!1;const q={};I.handleWrapJump(k);for(const a of d){const o=a.getBucket(r);o&&r.id===o.layerIds[0]&&(o.bucketInstanceId||(o.bucketInstanceId=++this.maxBucketInstanceId),I.addBucket(a.tileID,o,this.crossTileIDs)&&(R=!0),q[o.bucketInstanceId]=!0)}return I.removeStaleBuckets(q)&&(R=!0),R}pruneUnusedLayers(r){const d={};r.forEach(k=>{d[k]=!0});for(const k in this.layerIndexes)d[k]||delete this.layerIndexes[k]}}const mt=(L,r)=>u.x(L,r&&r.filter(d=>d.identifier!=="source.canvas")),bi=u.F(u.ax,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setGlyphs","setSprite"]),At=u.F(u.ax,["setCenter","setZoom","setBearing","setPitch"]),Ni=u.aw();class lr extends u.E{constructor(r,d={}){super(),this.map=r,this.dispatcher=new oi(B(),this,r._getMapId()),this.imageManager=new di,this.imageManager.setEventedParent(this),this.glyphManager=new rt(r._requestManager,d.localIdeographFontFamily),this.lineAtlas=new Yt(256,512),this.crossTileSymbolIndex=new Xi,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new u.ay,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",u.az());const k=this;this._rtlTextPluginCallback=lr.registerForPluginStateChange(I=>{k.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:I.pluginStatus,pluginURL:I.pluginURL},(R,q)=>{if(u.aA(R),q&&q.every(a=>a))for(const a in k.sourceCaches){const o=k.sourceCaches[a].getSource().type;o!=="vector"&&o!=="geojson"||k.sourceCaches[a].reload()}})}),this.on("data",I=>{if(I.dataType!=="source"||I.sourceDataType!=="metadata")return;const R=this.sourceCaches[I.sourceId];if(!R)return;const q=R.getSource();if(q&&q.vectorLayerIds)for(const a in this._layers){const o=this._layers[a];o.source===q.id&&this._validateLayer(o)}})}loadURL(r,d={},k){this.fire(new u.k("dataloading",{dataType:"style"})),d.validate=typeof d.validate!="boolean"||d.validate;const I=this.map._requestManager.transformRequest(r,Ke.Style);this._request=u.f(I,(R,q)=>{this._request=null,R?this.fire(new u.j(R)):q&&this._load(q,d,k)})}loadJSON(r,d={},k){this.fire(new u.k("dataloading",{dataType:"style"})),this._request=u.h.frame(()=>{this._request=null,d.validate=d.validate!==!1,this._load(r,d,k)})}loadEmpty(){this.fire(new u.k("dataloading",{dataType:"style"})),this._load(Ni,{validate:!1})}_load(r,d,k){var I;const R=d.transformStyle?d.transformStyle(k,r):r;if(!d.validate||!mt(this,u.y(R))){this._loaded=!0,this.stylesheet=R;for(const q in R.sources)this.addSource(q,R.sources[q],{validate:!1});R.sprite?this._loadSprite(R.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(R.glyphs),this._createLayers(),this.light=new Lt(this.stylesheet.light),this.map.setTerrain((I=this.stylesheet.terrain)!==null&&I!==void 0?I:null),this.fire(new u.k("data",{dataType:"style"})),this.fire(new u.k("style.load"))}}_createLayers(){const r=u.aB(this.stylesheet.layers);this.dispatcher.broadcast("setLayers",r),this._order=r.map(d=>d.id),this._layers={},this._serializedLayers=null;for(const d of r){const k=u.aC(d);k.setEventedParent(this,{layer:{id:d.id}}),this._layers[d.id]=k}}_loadSprite(r,d=!1,k=void 0){this.imageManager.setLoaded(!1),this._spriteRequest=function(I,R,q,a){const o=ii(I),h=o.length,p=q>1?"@2x":"",v={},E={},z={};for(const{id:F,url:Y}of o){const J=R.transformRequest(R.normalizeSpriteURL(Y,p,".json"),Ke.SpriteJSON),ve=`${F}_${J.url}`;v[ve]=u.f(J,(He,We)=>{delete v[ve],E[F]=We,xi(a,E,z,He,h)});const Ie=R.transformRequest(R.normalizeSpriteURL(Y,p,".png"),Ke.SpriteImage),Oe=`${F}_${Ie.url}`;v[Oe]=Xe.getImage(Ie,(He,We)=>{delete v[Oe],z[F]=We,xi(a,E,z,He,h)})}return{cancel(){for(const F of Object.values(v))F.cancel()}}}(r,this.map._requestManager,this.map.getPixelRatio(),(I,R)=>{if(this._spriteRequest=null,I)this.fire(new u.j(I));else if(R)for(const q in R){this._spritesImagesIds[q]=[];const a=this._spritesImagesIds[q]?this._spritesImagesIds[q].filter(o=>!(o in R)):[];for(const o of a)this.imageManager.removeImage(o),this._changedImages[o]=!0;for(const o in R[q]){const h=q==="default"?o:`${q}:${o}`;this._spritesImagesIds[q].push(h),h in this.imageManager.images?this.imageManager.updateImage(h,R[q][o],!1):this.imageManager.addImage(h,R[q][o]),d&&(this._changedImages[h]=!0)}}this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),d&&(this._changed=!0),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new u.k("data",{dataType:"style"})),k&&k(I)})}_unloadSprite(){for(const r of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(r),this._changedImages[r]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new u.k("data",{dataType:"style"}))}_validateLayer(r){const d=this.sourceCaches[r.source];if(!d)return;const k=r.sourceLayer;if(!k)return;const I=d.getSource();(I.type==="geojson"||I.vectorLayerIds&&I.vectorLayerIds.indexOf(k)===-1)&&this.fire(new u.j(new Error(`Source layer "${k}" does not exist on source "${I.id}" as specified by style layer "${r.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const r in this.sourceCaches)if(!this.sourceCaches[r].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(r){const d=this._serializedAllLayers();if(!r||r.length===0)return Object.values(d);const k=[];for(const I of r)d[I]&&k.push(d[I]);return k}_serializedAllLayers(){let r=this._serializedLayers;if(r)return r;r=this._serializedLayers={};const d=Object.keys(this._layers);for(const k of d){const I=this._layers[k];I.type!=="custom"&&(r[k]=I.serialize())}return r}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const r in this.sourceCaches)if(this.sourceCaches[r].hasTransition())return!0;for(const r in this._layers)if(this._layers[r].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(r){if(!this._loaded)return;const d=this._changed;if(this._changed){const I=Object.keys(this._updatedLayers),R=Object.keys(this._removedLayers);(I.length||R.length)&&this._updateWorkerLayers(I,R);for(const q in this._updatedSources){const a=this._updatedSources[q];if(a==="reload")this._reloadSource(q);else{if(a!=="clear")throw new Error(`Invalid action ${a}`);this._clearSource(q)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const q in this._updatedPaintProps)this._layers[q].updateTransitions(r);this.light.updateTransitions(r),this._resetUpdates()}const k={};for(const I in this.sourceCaches){const R=this.sourceCaches[I];k[I]=R.used,R.used=!1}for(const I of this._order){const R=this._layers[I];R.recalculate(r,this._availableImages),!R.isHidden(r.zoom)&&R.source&&(this.sourceCaches[R.source].used=!0)}for(const I in k){const R=this.sourceCaches[I];k[I]!==R.used&&R.fire(new u.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:I}))}this.light.recalculate(r),this.z=r.zoom,d&&this.fire(new u.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const r=Object.keys(this._changedImages);if(r.length){for(const d in this.sourceCaches)this.sourceCaches[d].reloadTilesForDependencies(["icons","patterns"],r);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const r in this.sourceCaches)this.sourceCaches[r].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(r,d){this.dispatcher.broadcast("updateLayers",{layers:this._serializeByIds(r),removedIds:d})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(r,d={}){this._checkLoaded();const k=this.serialize();if(r=d.transformStyle?d.transformStyle(k,r):r,mt(this,u.y(r)))return!1;(r=u.aD(r)).layers=u.aB(r.layers);const I=u.aE(k,r).filter(q=>!(q.command in At));if(I.length===0)return!1;const R=I.filter(q=>!(q.command in bi));if(R.length>0)throw new Error(`Unimplemented: ${R.map(q=>q.command).join(", ")}.`);for(const q of I)q.command!=="setTransition"&&this[q.command].apply(this,q.args);return this.stylesheet=r,this._serializedLayers=null,!0}addImage(r,d){if(this.getImage(r))return this.fire(new u.j(new Error(`An image named "${r}" already exists.`)));this.imageManager.addImage(r,d),this._afterImageUpdated(r)}updateImage(r,d){this.imageManager.updateImage(r,d)}getImage(r){return this.imageManager.getImage(r)}removeImage(r){if(!this.getImage(r))return this.fire(new u.j(new Error(`An image named "${r}" does not exist.`)));this.imageManager.removeImage(r),this._afterImageUpdated(r)}_afterImageUpdated(r){this._availableImages=this.imageManager.listImages(),this._changedImages[r]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new u.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(r,d,k={}){if(this._checkLoaded(),this.sourceCaches[r]!==void 0)throw new Error(`Source "${r}" already exists.`);if(!d.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(d).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(d.type)>=0&&this._validate(u.y.source,`sources.${r}`,d,null,k))return;this.map&&this.map._collectResourceTiming&&(d.collectResourceTiming=!0);const I=this.sourceCaches[r]=new cn(r,d,this.dispatcher);I.style=this,I.setEventedParent(this,()=>({isSourceLoaded:I.loaded(),source:I.serialize(),sourceId:r})),I.onAdd(this.map),this._changed=!0}removeSource(r){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error("There is no source with this ID");for(const k in this._layers)if(this._layers[k].source===r)return this.fire(new u.j(new Error(`Source "${r}" cannot be removed while layer "${k}" is using it.`)));const d=this.sourceCaches[r];delete this.sourceCaches[r],delete this._updatedSources[r],d.fire(new u.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:r})),d.setEventedParent(null),d.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(r,d){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error(`There is no source with this ID=${r}`);const k=this.sourceCaches[r].getSource();if(k.type!=="geojson")throw new Error(`geojsonSource.type is ${k.type}, which is !== 'geojson`);k.setData(d),this._changed=!0}getSource(r){return this.sourceCaches[r]&&this.sourceCaches[r].getSource()}addLayer(r,d,k={}){this._checkLoaded();const I=r.id;if(this.getLayer(I))return void this.fire(new u.j(new Error(`Layer "${I}" already exists on this map.`)));let R;if(r.type==="custom"){if(mt(this,u.aF(r)))return;R=u.aC(r)}else{if("source"in r&&typeof r.source=="object"&&(this.addSource(I,r.source),r=u.aD(r),r=u.e(r,{source:I})),this._validate(u.y.layer,`layers.${I}`,r,{arrayIndex:-1},k))return;R=u.aC(r),this._validateLayer(R),R.setEventedParent(this,{layer:{id:I}})}const q=d?this._order.indexOf(d):this._order.length;if(d&&q===-1)this.fire(new u.j(new Error(`Cannot add layer "${I}" before non-existing layer "${d}".`)));else{if(this._order.splice(q,0,I),this._layerOrderChanged=!0,this._layers[I]=R,this._removedLayers[I]&&R.source&&R.type!=="custom"){const a=this._removedLayers[I];delete this._removedLayers[I],a.type!==R.type?this._updatedSources[R.source]="clear":(this._updatedSources[R.source]="reload",this.sourceCaches[R.source].pause())}this._updateLayer(R),R.onAdd&&R.onAdd(this.map)}}moveLayer(r,d){if(this._checkLoaded(),this._changed=!0,!this._layers[r])return void this.fire(new u.j(new Error(`The layer '${r}' does not exist in the map's style and cannot be moved.`)));if(r===d)return;const k=this._order.indexOf(r);this._order.splice(k,1);const I=d?this._order.indexOf(d):this._order.length;d&&I===-1?this.fire(new u.j(new Error(`Cannot move layer "${r}" before non-existing layer "${d}".`))):(this._order.splice(I,0,r),this._layerOrderChanged=!0)}removeLayer(r){this._checkLoaded();const d=this._layers[r];if(!d)return void this.fire(new u.j(new Error(`Cannot remove non-existing layer "${r}".`)));d.setEventedParent(null);const k=this._order.indexOf(r);this._order.splice(k,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[r]=d,delete this._layers[r],this._serializedLayers&&delete this._serializedLayers[r],delete this._updatedLayers[r],delete this._updatedPaintProps[r],d.onRemove&&d.onRemove(this.map)}getLayer(r){return this._layers[r]}getLayersOrder(){return[...this._order]}hasLayer(r){return r in this._layers}setLayerZoomRange(r,d,k){this._checkLoaded();const I=this.getLayer(r);I?I.minzoom===d&&I.maxzoom===k||(d!=null&&(I.minzoom=d),k!=null&&(I.maxzoom=k),this._updateLayer(I)):this.fire(new u.j(new Error(`Cannot set the zoom range of non-existing layer "${r}".`)))}setFilter(r,d,k={}){this._checkLoaded();const I=this.getLayer(r);if(I){if(!u.aG(I.filter,d))return d==null?(I.filter=void 0,void this._updateLayer(I)):void(this._validate(u.y.filter,`layers.${I.id}.filter`,d,null,k)||(I.filter=u.aD(d),this._updateLayer(I)))}else this.fire(new u.j(new Error(`Cannot filter non-existing layer "${r}".`)))}getFilter(r){return u.aD(this.getLayer(r).filter)}setLayoutProperty(r,d,k,I={}){this._checkLoaded();const R=this.getLayer(r);R?u.aG(R.getLayoutProperty(d),k)||(R.setLayoutProperty(d,k,I),this._updateLayer(R)):this.fire(new u.j(new Error(`Cannot style non-existing layer "${r}".`)))}getLayoutProperty(r,d){const k=this.getLayer(r);if(k)return k.getLayoutProperty(d);this.fire(new u.j(new Error(`Cannot get style of non-existing layer "${r}".`)))}setPaintProperty(r,d,k,I={}){this._checkLoaded();const R=this.getLayer(r);R?u.aG(R.getPaintProperty(d),k)||(R.setPaintProperty(d,k,I)&&this._updateLayer(R),this._changed=!0,this._updatedPaintProps[r]=!0):this.fire(new u.j(new Error(`Cannot style non-existing layer "${r}".`)))}getPaintProperty(r,d){return this.getLayer(r).getPaintProperty(d)}setFeatureState(r,d){this._checkLoaded();const k=r.source,I=r.sourceLayer,R=this.sourceCaches[k];if(R===void 0)return void this.fire(new u.j(new Error(`The source '${k}' does not exist in the map's style.`)));const q=R.getSource().type;q==="geojson"&&I?this.fire(new u.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):q!=="vector"||I?(r.id===void 0&&this.fire(new u.j(new Error("The feature id parameter must be provided."))),R.setFeatureState(I,r.id,d)):this.fire(new u.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(r,d){this._checkLoaded();const k=r.source,I=this.sourceCaches[k];if(I===void 0)return void this.fire(new u.j(new Error(`The source '${k}' does not exist in the map's style.`)));const R=I.getSource().type,q=R==="vector"?r.sourceLayer:void 0;R!=="vector"||q?d&&typeof r.id!="string"&&typeof r.id!="number"?this.fire(new u.j(new Error("A feature id is required to remove its specific state property."))):I.removeFeatureState(q,r.id,d):this.fire(new u.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(r){this._checkLoaded();const d=r.source,k=r.sourceLayer,I=this.sourceCaches[d];if(I!==void 0)return I.getSource().type!=="vector"||k?(r.id===void 0&&this.fire(new u.j(new Error("The feature id parameter must be provided."))),I.getFeatureState(k,r.id)):void this.fire(new u.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new u.j(new Error(`The source '${d}' does not exist in the map's style.`)))}getTransition(){return u.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const r=u.aH(this.sourceCaches,R=>R.serialize()),d=this._serializeByIds(this._order),k=this.map.getTerrain()||void 0,I=this.stylesheet;return u.aI({version:I.version,name:I.name,metadata:I.metadata,light:I.light,center:I.center,zoom:I.zoom,bearing:I.bearing,pitch:I.pitch,sprite:I.sprite,glyphs:I.glyphs,transition:I.transition,sources:r,layers:d,terrain:k},R=>R!==void 0)}_updateLayer(r){this._updatedLayers[r.id]=!0,r.source&&!this._updatedSources[r.source]&&this.sourceCaches[r.source].getSource().type!=="raster"&&(this._updatedSources[r.source]="reload",this.sourceCaches[r.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(r){const d=q=>this._layers[q].type==="fill-extrusion",k={},I=[];for(let q=this._order.length-1;q>=0;q--){const a=this._order[q];if(d(a)){k[a]=q;for(const o of r){const h=o[a];if(h)for(const p of h)I.push(p)}}}I.sort((q,a)=>a.intersectionZ-q.intersectionZ);const R=[];for(let q=this._order.length-1;q>=0;q--){const a=this._order[q];if(d(a))for(let o=I.length-1;o>=0;o--){const h=I[o].feature;if(k[h.layer.id]<q)break;R.push(h),I.pop()}else for(const o of r){const h=o[a];if(h)for(const p of h)R.push(p.feature)}}return R}queryRenderedFeatures(r,d,k){d&&d.filter&&this._validate(u.y.filter,"queryRenderedFeatures.filter",d.filter,null,d);const I={};if(d&&d.layers){if(!Array.isArray(d.layers))return this.fire(new u.j(new Error("parameters.layers must be an Array."))),[];for(const a of d.layers){const o=this._layers[a];if(!o)return this.fire(new u.j(new Error(`The layer '${a}' does not exist in the map's style and cannot be queried for features.`))),[];I[o.source]=!0}}const R=[];d.availableImages=this._availableImages;const q=this._serializedAllLayers();for(const a in this.sourceCaches)d.layers&&!I[a]||R.push(Or(this.sourceCaches[a],this._layers,q,r,d,k));return this.placement&&R.push(function(a,o,h,p,v,E,z){const F={},Y=E.queryRenderedSymbols(p),J=[];for(const ve of Object.keys(Y).map(Number))J.push(z[ve]);J.sort(Gi);for(const ve of J){const Ie=ve.featureIndex.lookupSymbolFeatures(Y[ve.bucketInstanceId],o,ve.bucketIndex,ve.sourceLayerIndex,v.filter,v.layers,v.availableImages,a);for(const Oe in Ie){const He=F[Oe]=F[Oe]||[],We=Ie[Oe];We.sort((st,wt)=>{const Et=ve.featureSortOrder;if(Et){const pt=Et.indexOf(st.featureIndex);return Et.indexOf(wt.featureIndex)-pt}return wt.featureIndex-st.featureIndex});for(const st of We)He.push(st)}}for(const ve in F)F[ve].forEach(Ie=>{const Oe=Ie.feature,He=h[a[ve].source].getFeatureState(Oe.layer["source-layer"],Oe.id);Oe.source=Oe.layer.source,Oe.layer["source-layer"]&&(Oe.sourceLayer=Oe.layer["source-layer"]),Oe.state=He});return F}(this._layers,q,this.sourceCaches,r,d,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(R)}querySourceFeatures(r,d){d&&d.filter&&this._validate(u.y.filter,"querySourceFeatures.filter",d.filter,null,d);const k=this.sourceCaches[r];return k?function(I,R){const q=I.getRenderableIds().map(h=>I.getTileByID(h)),a=[],o={};for(let h=0;h<q.length;h++){const p=q[h],v=p.tileID.canonical.key;o[v]||(o[v]=!0,p.querySourceFeatures(a,R))}return a}(k,d):[]}addSourceType(r,d,k){return kn(r)?k(new Error(`A source type called "${r}" already exists.`)):(((I,R)=>{ir[I]=R})(r,d),d.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:r,url:d.workerSourceURL},k):k(null,null))}getLight(){return this.light.getLight()}setLight(r,d={}){this._checkLoaded();const k=this.light.getLight();let I=!1;for(const q in r)if(!u.aG(r[q],k[q])){I=!0;break}if(!I)return;const R={now:u.h.now(),transition:u.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(r,d),this.light.updateTransitions(R)}_validate(r,d,k,I,R={}){return(!R||R.validate!==!1)&&mt(this,r.call(u.y,u.e({key:d,style:this.serialize(),value:k,styleSpec:u.v},I)))}_remove(r=!0){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),u.aJ.off("pluginStateChange",this._rtlTextPluginCallback);for(const d in this._layers)this._layers[d].setEventedParent(null);for(const d in this.sourceCaches){const k=this.sourceCaches[d];k.setEventedParent(null),k.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove(r)}_clearSource(r){this.sourceCaches[r].clearTiles()}_reloadSource(r){this.sourceCaches[r].resume(),this.sourceCaches[r].reload()}_updateSources(r){for(const d in this.sourceCaches)this.sourceCaches[d].update(r,this.map.terrain)}_generateCollisionBoxes(){for(const r in this.sourceCaches)this._reloadSource(r)}_updatePlacement(r,d,k,I,R=!1){let q=!1,a=!1;const o={};for(const h of this._order){const p=this._layers[h];if(p.type!=="symbol")continue;if(!o[p.source]){const E=this.sourceCaches[p.source];o[p.source]=E.getRenderableIds(!0).map(z=>E.getTileByID(z)).sort((z,F)=>F.tileID.overscaledZ-z.tileID.overscaledZ||(z.tileID.isLessThan(F.tileID)?-1:1))}const v=this.crossTileSymbolIndex.addLayer(p,o[p.source],r.center.lng);q=q||v}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((R=R||this._layerOrderChanged||k===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(u.h.now(),r.zoom))&&(this.pauseablePlacement=new An(r,this.map.terrain,this._order,R,d,k,I,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,o),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(u.h.now()),a=!0),q&&this.pauseablePlacement.placement.setStale()),a||q)for(const h of this._order){const p=this._layers[h];p.type==="symbol"&&this.placement.updateLayerOpacities(p,o[p.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(u.h.now())}_releaseSymbolFadeTiles(){for(const r in this.sourceCaches)this.sourceCaches[r].releaseSymbolFadeTiles()}getImages(r,d,k){this.imageManager.getImages(d.icons,k),this._updateTilesForChangedImages();const I=this.sourceCaches[d.source];I&&I.setDependencies(d.tileID.key,d.type,d.icons)}getGlyphs(r,d,k){this.glyphManager.getGlyphs(d.stacks,k);const I=this.sourceCaches[d.source];I&&I.setDependencies(d.tileID.key,d.type,[""])}getResource(r,d,k){return u.m(d,k)}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(r,d={}){this._checkLoaded(),r&&this._validate(u.y.glyphs,"glyphs",r,null,d)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=r,this.glyphManager.entries={},this.glyphManager.setURL(r))}addSprite(r,d,k={},I){this._checkLoaded();const R=[{id:r,url:d}],q=[...ii(this.stylesheet.sprite),...R];this._validate(u.y.sprite,"sprite",q,null,k)||(this.stylesheet.sprite=q,this._loadSprite(R,!0,I))}removeSprite(r){this._checkLoaded();const d=ii(this.stylesheet.sprite);if(d.find(k=>k.id===r)){if(this._spritesImagesIds[r])for(const k of this._spritesImagesIds[r])this.imageManager.removeImage(k),this._changedImages[k]=!0;d.splice(d.findIndex(k=>k.id===r),1),this.stylesheet.sprite=d.length>0?d:void 0,delete this._spritesImagesIds[r],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new u.k("data",{dataType:"style"}))}else this.fire(new u.j(new Error(`Sprite "${r}" doesn't exists on this map.`)))}getSprite(){return ii(this.stylesheet.sprite)}setSprite(r,d={},k){this._checkLoaded(),r&&this._validate(u.y.sprite,"sprite",r,null,d)||(this.stylesheet.sprite=r,r?this._loadSprite(r,!0,k):(this._unloadSprite(),k&&k(null)))}}lr.registerForPluginStateChange=u.aK;var es=u.Q([{name:"a_pos",type:"Int16",components:2}]),kr="attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_depth;void main() {float extent=8192.0;float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/extent;gl_Position=u_matrix*vec4(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}";const ht={prelude:Tn(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:Tn(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:Tn(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Tn(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Tn("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Tn(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:Tn(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Tn("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Tn("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Tn("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:Tn(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:Tn(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:Tn(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:Tn(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Tn(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Tn(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Tn(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Tn(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:Tn(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Tn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Tn(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Tn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Tn(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:Tn(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Tn(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Tn(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Tn("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",kr),terrainDepth:Tn("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",kr),terrainCoords:Tn("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",kr)};function Tn(L,r){const d=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,k=r.match(/attribute ([\w]+) ([\w]+)/g),I=L.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),R=r.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),q=R?R.concat(I):I,a={};return{fragmentSource:L=L.replace(d,(o,h,p,v,E)=>(a[E]=!0,h==="define"?`
#ifndef HAS_UNIFORM_u_${E}
varying ${p} ${v} ${E};
#else
uniform ${p} ${v} u_${E};
#endif
`:`
#ifdef HAS_UNIFORM_u_${E}
    ${p} ${v} ${E} = u_${E};
#endif
`)),vertexSource:r=r.replace(d,(o,h,p,v,E)=>{const z=v==="float"?"vec2":"vec4",F=E.match(/color/)?"color":z;return a[E]?h==="define"?`
#ifndef HAS_UNIFORM_u_${E}
uniform lowp float u_${E}_t;
attribute ${p} ${z} a_${E};
varying ${p} ${v} ${E};
#else
uniform ${p} ${v} u_${E};
#endif
`:F==="vec4"?`
#ifndef HAS_UNIFORM_u_${E}
    ${E} = a_${E};
#else
    ${p} ${v} ${E} = u_${E};
#endif
`:`
#ifndef HAS_UNIFORM_u_${E}
    ${E} = unpack_mix_${F}(a_${E}, u_${E}_t);
#else
    ${p} ${v} ${E} = u_${E};
#endif
`:h==="define"?`
#ifndef HAS_UNIFORM_u_${E}
uniform lowp float u_${E}_t;
attribute ${p} ${z} a_${E};
#else
uniform ${p} ${v} u_${E};
#endif
`:F==="vec4"?`
#ifndef HAS_UNIFORM_u_${E}
    ${p} ${v} ${E} = a_${E};
#else
    ${p} ${v} ${E} = u_${E};
#endif
`:`
#ifndef HAS_UNIFORM_u_${E}
    ${p} ${v} ${E} = unpack_mix_${F}(a_${E}, u_${E}_t);
#else
    ${p} ${v} ${E} = u_${E};
#endif
`}),staticAttributes:k,staticUniforms:q}}class it{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(r,d,k,I,R,q,a,o,h){this.context=r;let p=this.boundPaintVertexBuffers.length!==I.length;for(let v=0;!p&&v<I.length;v++)this.boundPaintVertexBuffers[v]!==I[v]&&(p=!0);!this.vao||this.boundProgram!==d||this.boundLayoutVertexBuffer!==k||p||this.boundIndexBuffer!==R||this.boundVertexOffset!==q||this.boundDynamicVertexBuffer!==a||this.boundDynamicVertexBuffer2!==o||this.boundDynamicVertexBuffer3!==h?this.freshBind(d,k,I,R,q,a,o,h):(r.bindVertexArray.set(this.vao),a&&a.bind(),R&&R.dynamicDraw&&R.bind(),o&&o.bind(),h&&h.bind())}freshBind(r,d,k,I,R,q,a,o){const h=r.numAttributes,p=this.context,v=p.gl;this.vao&&this.destroy(),this.vao=p.createVertexArray(),p.bindVertexArray.set(this.vao),this.boundProgram=r,this.boundLayoutVertexBuffer=d,this.boundPaintVertexBuffers=k,this.boundIndexBuffer=I,this.boundVertexOffset=R,this.boundDynamicVertexBuffer=q,this.boundDynamicVertexBuffer2=a,this.boundDynamicVertexBuffer3=o,d.enableAttributes(v,r);for(const E of k)E.enableAttributes(v,r);q&&q.enableAttributes(v,r),a&&a.enableAttributes(v,r),o&&o.enableAttributes(v,r),d.bind(),d.setVertexAttribPointers(v,r,R);for(const E of k)E.bind(),E.setVertexAttribPointers(v,r,R);q&&(q.bind(),q.setVertexAttribPointers(v,r,R)),I&&I.bind(),a&&(a.bind(),a.setVertexAttribPointers(v,r,R)),o&&(o.bind(),o.setVertexAttribPointers(v,r,R)),p.currentNumAttributes=h}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}function nr(L){const r=[];for(let d=0;d<L.length;d++){if(L[d]===null)continue;const k=L[d].split(" ");r.push(k.pop())}return r}class ks{constructor(r,d,k,I,R,q){const a=r.gl;this.program=a.createProgram();const o=nr(d.staticAttributes),h=k?k.getBinderAttributes():[],p=o.concat(h),v=ht.prelude.staticUniforms?nr(ht.prelude.staticUniforms):[],E=d.staticUniforms?nr(d.staticUniforms):[],z=k?k.getBinderUniforms():[],F=v.concat(E).concat(z),Y=[];for(const st of F)Y.indexOf(st)<0&&Y.push(st);const J=k?k.defines():[];R&&J.push("#define OVERDRAW_INSPECTOR;"),q&&J.push("#define TERRAIN3D;");const ve=J.concat(ht.prelude.fragmentSource,d.fragmentSource).join(`
`),Ie=J.concat(ht.prelude.vertexSource,d.vertexSource).join(`
`),Oe=a.createShader(a.FRAGMENT_SHADER);if(a.isContextLost())return void(this.failedToCreate=!0);if(a.shaderSource(Oe,ve),a.compileShader(Oe),!a.getShaderParameter(Oe,a.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${a.getShaderInfoLog(Oe)}`);a.attachShader(this.program,Oe);const He=a.createShader(a.VERTEX_SHADER);if(a.isContextLost())return void(this.failedToCreate=!0);if(a.shaderSource(He,Ie),a.compileShader(He),!a.getShaderParameter(He,a.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${a.getShaderInfoLog(He)}`);a.attachShader(this.program,He),this.attributes={};const We={};this.numAttributes=p.length;for(let st=0;st<this.numAttributes;st++)p[st]&&(a.bindAttribLocation(this.program,st,p[st]),this.attributes[p[st]]=st);if(a.linkProgram(this.program),!a.getProgramParameter(this.program,a.LINK_STATUS))throw new Error(`Program failed to link: ${a.getProgramInfoLog(this.program)}`);a.deleteShader(He),a.deleteShader(Oe);for(let st=0;st<Y.length;st++){const wt=Y[st];if(wt&&!We[wt]){const Et=a.getUniformLocation(this.program,wt);Et&&(We[wt]=Et)}}this.fixedUniforms=I(r,We),this.terrainUniforms=((st,wt)=>({u_depth:new u.aL(st,wt.u_depth),u_terrain:new u.aL(st,wt.u_terrain),u_terrain_dim:new u.aM(st,wt.u_terrain_dim),u_terrain_matrix:new u.aN(st,wt.u_terrain_matrix),u_terrain_unpack:new u.aO(st,wt.u_terrain_unpack),u_terrain_exaggeration:new u.aM(st,wt.u_terrain_exaggeration)}))(r,We),this.binderUniforms=k?k.getUniforms(r,We):[]}draw(r,d,k,I,R,q,a,o,h,p,v,E,z,F,Y,J,ve,Ie){const Oe=r.gl;if(this.failedToCreate)return;if(r.program.set(this.program),r.setDepthMode(k),r.setStencilMode(I),r.setColorMode(R),r.setCullFace(q),o){r.activeTexture.set(Oe.TEXTURE2),Oe.bindTexture(Oe.TEXTURE_2D,o.depthTexture),r.activeTexture.set(Oe.TEXTURE3),Oe.bindTexture(Oe.TEXTURE_2D,o.texture);for(const We in this.terrainUniforms)this.terrainUniforms[We].set(o[We])}for(const We in this.fixedUniforms)this.fixedUniforms[We].set(a[We]);Y&&Y.setUniforms(r,this.binderUniforms,z,{zoom:F});let He=0;switch(d){case Oe.LINES:He=2;break;case Oe.TRIANGLES:He=3;break;case Oe.LINE_STRIP:He=1}for(const We of E.get()){const st=We.vaos||(We.vaos={});(st[h]||(st[h]=new it)).bind(r,this,p,Y?Y.getPaintVertexBuffers():[],v,We.vertexOffset,J,ve,Ie),Oe.drawElements(d,We.primitiveLength*He,Oe.UNSIGNED_SHORT,We.primitiveOffset*He*2)}}}function Es(L,r,d){const k=1/Le(d,1,r.transform.tileZoom),I=Math.pow(2,d.tileID.overscaledZ),R=d.tileSize*Math.pow(2,r.transform.tileZoom)/I,q=R*(d.tileID.canonical.x+d.tileID.wrap*I),a=R*d.tileID.canonical.y;return{u_image:0,u_texsize:d.imageAtlasTexture.size,u_scale:[k,L.fromScale,L.toScale],u_fade:L.t,u_pixel_coord_upper:[q>>16,a>>16],u_pixel_coord_lower:[65535&q,65535&a]}}const Ta=(L,r,d,k)=>{const I=r.style.light,R=I.properties.get("position"),q=[R.x,R.y,R.z],a=function(){var h=new u.A(9);return u.A!=Float32Array&&(h[1]=0,h[2]=0,h[3]=0,h[5]=0,h[6]=0,h[7]=0),h[0]=1,h[4]=1,h[8]=1,h}();I.properties.get("anchor")==="viewport"&&function(h,p){var v=Math.sin(p),E=Math.cos(p);h[0]=E,h[1]=v,h[2]=0,h[3]=-v,h[4]=E,h[5]=0,h[6]=0,h[7]=0,h[8]=1}(a,-r.transform.angle),function(h,p,v){var E=p[0],z=p[1],F=p[2];h[0]=E*v[0]+z*v[3]+F*v[6],h[1]=E*v[1]+z*v[4]+F*v[7],h[2]=E*v[2]+z*v[5]+F*v[8]}(q,q,a);const o=I.properties.get("color");return{u_matrix:L,u_lightpos:q,u_lightintensity:I.properties.get("intensity"),u_lightcolor:[o.r,o.g,o.b],u_vertical_gradient:+d,u_opacity:k}},Hs=(L,r,d,k,I,R,q)=>u.e(Ta(L,r,d,k),Es(R,r,q),{u_height_factor:-Math.pow(2,I.overscaledZ)/q.tileSize/8}),co=L=>({u_matrix:L}),Pa=(L,r,d,k)=>u.e(co(L),Es(d,r,k)),os=(L,r)=>({u_matrix:L,u_world:r}),an=(L,r,d,k,I)=>u.e(Pa(L,r,d,k),{u_world:I}),ts=(L,r,d,k)=>{const I=L.transform;let R,q;if(k.paint.get("circle-pitch-alignment")==="map"){const a=Le(d,1,I.zoom);R=!0,q=[a,a]}else R=!1,q=I.pixelsToGLUnits;return{u_camera_to_center_distance:I.cameraToCenterDistance,u_scale_with_map:+(k.paint.get("circle-pitch-scale")==="map"),u_matrix:L.translatePosMatrix(r.posMatrix,d,k.paint.get("circle-translate"),k.paint.get("circle-translate-anchor")),u_pitch_with_map:+R,u_device_pixel_ratio:L.pixelRatio,u_extrude_scale:q}},yr=(L,r,d)=>{const k=Le(d,1,r.zoom),I=Math.pow(2,r.zoom-d.tileID.overscaledZ),R=d.tileID.overscaleFactor();return{u_matrix:L,u_camera_to_center_distance:r.cameraToCenterDistance,u_pixels_to_tile_units:k,u_extrude_scale:[r.pixelsToGLUnits[0]/(k*I),r.pixelsToGLUnits[1]/(k*I)],u_overscale_factor:R}},Zs=(L,r,d=1)=>({u_matrix:L,u_color:r,u_overlay:0,u_overlay_scale:d}),va=L=>({u_matrix:L}),Ba=(L,r,d,k)=>({u_matrix:L,u_extrude_scale:Le(r,1,d),u_intensity:k});function Bs(L,r){const d=Math.pow(2,r.canonical.z),k=r.canonical.y;return[new u.U(0,k/d).toLngLat().lat,new u.U(0,(k+1)/d).toLngLat().lat]}const Ds=(L,r,d,k)=>{const I=L.transform;return{u_matrix:dt(L,r,d,k),u_ratio:1/Le(r,1,I.zoom),u_device_pixel_ratio:L.pixelRatio,u_units_to_pixels:[1/I.pixelsToGLUnits[0],1/I.pixelsToGLUnits[1]]}},M=(L,r,d,k,I)=>u.e(Ds(L,r,d,I),{u_image:0,u_image_height:k}),te=(L,r,d,k,I)=>{const R=L.transform,q=Ye(r,R);return{u_matrix:dt(L,r,d,I),u_texsize:r.imageAtlasTexture.size,u_ratio:1/Le(r,1,R.zoom),u_device_pixel_ratio:L.pixelRatio,u_image:0,u_scale:[q,k.fromScale,k.toScale],u_fade:k.t,u_units_to_pixels:[1/R.pixelsToGLUnits[0],1/R.pixelsToGLUnits[1]]}},Be=(L,r,d,k,I,R)=>{const q=L.lineAtlas,a=Ye(r,L.transform),o=d.layout.get("line-cap")==="round",h=q.getDash(k.from,o),p=q.getDash(k.to,o),v=h.width*I.fromScale,E=p.width*I.toScale;return u.e(Ds(L,r,d,R),{u_patternscale_a:[a/v,-h.height/2],u_patternscale_b:[a/E,-p.height/2],u_sdfgamma:q.width/(256*Math.min(v,E)*L.pixelRatio)/2,u_image:0,u_tex_y_a:h.y,u_tex_y_b:p.y,u_mix:I.t})};function Ye(L,r){return 1/Le(L,1,r.tileZoom)}function dt(L,r,d,k){return L.translatePosMatrix(k?k.posMatrix:r.tileID.posMatrix,r,d.paint.get("line-translate"),d.paint.get("line-translate-anchor"))}const Qt=(L,r,d,k,I)=>{return{u_matrix:L,u_tl_parent:r,u_scale_parent:d,u_buffer_scale:1,u_fade_t:k.mix,u_opacity:k.opacity*I.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:I.paint.get("raster-brightness-min"),u_brightness_high:I.paint.get("raster-brightness-max"),u_saturation_factor:(q=I.paint.get("raster-saturation"),q>0?1-1/(1.001-q):-q),u_contrast_factor:(R=I.paint.get("raster-contrast"),R>0?1/(1-R):1+R),u_spin_weights:ti(I.paint.get("raster-hue-rotate"))};var R,q};function ti(L){L*=Math.PI/180;const r=Math.sin(L),d=Math.cos(L);return[(2*d+1)/3,(-Math.sqrt(3)*r-d+1)/3,(Math.sqrt(3)*r-d+1)/3]}const Ii=(L,r,d,k,I,R,q,a,o,h)=>{const p=I.transform;return{u_is_size_zoom_constant:+(L==="constant"||L==="source"),u_is_size_feature_constant:+(L==="constant"||L==="camera"),u_size_t:r?r.uSizeT:0,u_size:r?r.uSize:0,u_camera_to_center_distance:p.cameraToCenterDistance,u_pitch:p.pitch/360*2*Math.PI,u_rotate_symbol:+d,u_aspect_ratio:p.width/p.height,u_fade_change:I.options.fadeDuration?I.symbolFadeChange:1,u_matrix:R,u_label_plane_matrix:q,u_coord_matrix:a,u_is_text:+o,u_pitch_with_map:+k,u_texsize:h,u_texture:0}},zi=(L,r,d,k,I,R,q,a,o,h,p)=>{const v=I.transform;return u.e(Ii(L,r,d,k,I,R,q,a,o,h),{u_gamma_scale:k?Math.cos(v._pitch)*v.cameraToCenterDistance:1,u_device_pixel_ratio:I.pixelRatio,u_is_halo:+p})},En=(L,r,d,k,I,R,q,a,o,h)=>u.e(zi(L,r,d,k,I,R,q,a,!0,o,!0),{u_texsize_icon:h,u_texture_icon:1}),Ln=(L,r,d)=>({u_matrix:L,u_opacity:r,u_color:d}),or=(L,r,d,k,I,R)=>u.e(function(q,a,o,h){const p=o.imageManager.getPattern(q.from.toString()),v=o.imageManager.getPattern(q.to.toString()),{width:E,height:z}=o.imageManager.getPixelSize(),F=Math.pow(2,h.tileID.overscaledZ),Y=h.tileSize*Math.pow(2,o.transform.tileZoom)/F,J=Y*(h.tileID.canonical.x+h.tileID.wrap*F),ve=Y*h.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:p.tl,u_pattern_br_a:p.br,u_pattern_tl_b:v.tl,u_pattern_br_b:v.br,u_texsize:[E,z],u_mix:a.t,u_pattern_size_a:p.displaySize,u_pattern_size_b:v.displaySize,u_scale_a:a.fromScale,u_scale_b:a.toScale,u_tile_units_to_pixels:1/Le(h,1,o.transform.tileZoom),u_pixel_coord_upper:[J>>16,ve>>16],u_pixel_coord_lower:[65535&J,65535&ve]}}(k,R,d,I),{u_matrix:L,u_opacity:r}),na={fillExtrusion:(L,r)=>({u_matrix:new u.aN(L,r.u_matrix),u_lightpos:new u.aP(L,r.u_lightpos),u_lightintensity:new u.aM(L,r.u_lightintensity),u_lightcolor:new u.aP(L,r.u_lightcolor),u_vertical_gradient:new u.aM(L,r.u_vertical_gradient),u_opacity:new u.aM(L,r.u_opacity)}),fillExtrusionPattern:(L,r)=>({u_matrix:new u.aN(L,r.u_matrix),u_lightpos:new u.aP(L,r.u_lightpos),u_lightintensity:new u.aM(L,r.u_lightintensity),u_lightcolor:new u.aP(L,r.u_lightcolor),u_vertical_gradient:new u.aM(L,r.u_vertical_gradient),u_height_factor:new u.aM(L,r.u_height_factor),u_image:new u.aL(L,r.u_image),u_texsize:new u.aQ(L,r.u_texsize),u_pixel_coord_upper:new u.aQ(L,r.u_pixel_coord_upper),u_pixel_coord_lower:new u.aQ(L,r.u_pixel_coord_lower),u_scale:new u.aP(L,r.u_scale),u_fade:new u.aM(L,r.u_fade),u_opacity:new u.aM(L,r.u_opacity)}),fill:(L,r)=>({u_matrix:new u.aN(L,r.u_matrix)}),fillPattern:(L,r)=>({u_matrix:new u.aN(L,r.u_matrix),u_image:new u.aL(L,r.u_image),u_texsize:new u.aQ(L,r.u_texsize),u_pixel_coord_upper:new u.aQ(L,r.u_pixel_coord_upper),u_pixel_coord_lower:new u.aQ(L,r.u_pixel_coord_lower),u_scale:new u.aP(L,r.u_scale),u_fade:new u.aM(L,r.u_fade)}),fillOutline:(L,r)=>({u_matrix:new u.aN(L,r.u_matrix),u_world:new u.aQ(L,r.u_world)}),fillOutlinePattern:(L,r)=>({u_matrix:new u.aN(L,r.u_matrix),u_world:new u.aQ(L,r.u_world),u_image:new u.aL(L,r.u_image),u_texsize:new u.aQ(L,r.u_texsize),u_pixel_coord_upper:new u.aQ(L,r.u_pixel_coord_upper),u_pixel_coord_lower:new u.aQ(L,r.u_pixel_coord_lower),u_scale:new u.aP(L,r.u_scale),u_fade:new u.aM(L,r.u_fade)}),circle:(L,r)=>({u_camera_to_center_distance:new u.aM(L,r.u_camera_to_center_distance),u_scale_with_map:new u.aL(L,r.u_scale_with_map),u_pitch_with_map:new u.aL(L,r.u_pitch_with_map),u_extrude_scale:new u.aQ(L,r.u_extrude_scale),u_device_pixel_ratio:new u.aM(L,r.u_device_pixel_ratio),u_matrix:new u.aN(L,r.u_matrix)}),collisionBox:(L,r)=>({u_matrix:new u.aN(L,r.u_matrix),u_camera_to_center_distance:new u.aM(L,r.u_camera_to_center_distance),u_pixels_to_tile_units:new u.aM(L,r.u_pixels_to_tile_units),u_extrude_scale:new u.aQ(L,r.u_extrude_scale),u_overscale_factor:new u.aM(L,r.u_overscale_factor)}),collisionCircle:(L,r)=>({u_matrix:new u.aN(L,r.u_matrix),u_inv_matrix:new u.aN(L,r.u_inv_matrix),u_camera_to_center_distance:new u.aM(L,r.u_camera_to_center_distance),u_viewport_size:new u.aQ(L,r.u_viewport_size)}),debug:(L,r)=>({u_color:new u.aR(L,r.u_color),u_matrix:new u.aN(L,r.u_matrix),u_overlay:new u.aL(L,r.u_overlay),u_overlay_scale:new u.aM(L,r.u_overlay_scale)}),clippingMask:(L,r)=>({u_matrix:new u.aN(L,r.u_matrix)}),heatmap:(L,r)=>({u_extrude_scale:new u.aM(L,r.u_extrude_scale),u_intensity:new u.aM(L,r.u_intensity),u_matrix:new u.aN(L,r.u_matrix)}),heatmapTexture:(L,r)=>({u_matrix:new u.aN(L,r.u_matrix),u_world:new u.aQ(L,r.u_world),u_image:new u.aL(L,r.u_image),u_color_ramp:new u.aL(L,r.u_color_ramp),u_opacity:new u.aM(L,r.u_opacity)}),hillshade:(L,r)=>({u_matrix:new u.aN(L,r.u_matrix),u_image:new u.aL(L,r.u_image),u_latrange:new u.aQ(L,r.u_latrange),u_light:new u.aQ(L,r.u_light),u_shadow:new u.aR(L,r.u_shadow),u_highlight:new u.aR(L,r.u_highlight),u_accent:new u.aR(L,r.u_accent)}),hillshadePrepare:(L,r)=>({u_matrix:new u.aN(L,r.u_matrix),u_image:new u.aL(L,r.u_image),u_dimension:new u.aQ(L,r.u_dimension),u_zoom:new u.aM(L,r.u_zoom),u_unpack:new u.aO(L,r.u_unpack)}),line:(L,r)=>({u_matrix:new u.aN(L,r.u_matrix),u_ratio:new u.aM(L,r.u_ratio),u_device_pixel_ratio:new u.aM(L,r.u_device_pixel_ratio),u_units_to_pixels:new u.aQ(L,r.u_units_to_pixels)}),lineGradient:(L,r)=>({u_matrix:new u.aN(L,r.u_matrix),u_ratio:new u.aM(L,r.u_ratio),u_device_pixel_ratio:new u.aM(L,r.u_device_pixel_ratio),u_units_to_pixels:new u.aQ(L,r.u_units_to_pixels),u_image:new u.aL(L,r.u_image),u_image_height:new u.aM(L,r.u_image_height)}),linePattern:(L,r)=>({u_matrix:new u.aN(L,r.u_matrix),u_texsize:new u.aQ(L,r.u_texsize),u_ratio:new u.aM(L,r.u_ratio),u_device_pixel_ratio:new u.aM(L,r.u_device_pixel_ratio),u_image:new u.aL(L,r.u_image),u_units_to_pixels:new u.aQ(L,r.u_units_to_pixels),u_scale:new u.aP(L,r.u_scale),u_fade:new u.aM(L,r.u_fade)}),lineSDF:(L,r)=>({u_matrix:new u.aN(L,r.u_matrix),u_ratio:new u.aM(L,r.u_ratio),u_device_pixel_ratio:new u.aM(L,r.u_device_pixel_ratio),u_units_to_pixels:new u.aQ(L,r.u_units_to_pixels),u_patternscale_a:new u.aQ(L,r.u_patternscale_a),u_patternscale_b:new u.aQ(L,r.u_patternscale_b),u_sdfgamma:new u.aM(L,r.u_sdfgamma),u_image:new u.aL(L,r.u_image),u_tex_y_a:new u.aM(L,r.u_tex_y_a),u_tex_y_b:new u.aM(L,r.u_tex_y_b),u_mix:new u.aM(L,r.u_mix)}),raster:(L,r)=>({u_matrix:new u.aN(L,r.u_matrix),u_tl_parent:new u.aQ(L,r.u_tl_parent),u_scale_parent:new u.aM(L,r.u_scale_parent),u_buffer_scale:new u.aM(L,r.u_buffer_scale),u_fade_t:new u.aM(L,r.u_fade_t),u_opacity:new u.aM(L,r.u_opacity),u_image0:new u.aL(L,r.u_image0),u_image1:new u.aL(L,r.u_image1),u_brightness_low:new u.aM(L,r.u_brightness_low),u_brightness_high:new u.aM(L,r.u_brightness_high),u_saturation_factor:new u.aM(L,r.u_saturation_factor),u_contrast_factor:new u.aM(L,r.u_contrast_factor),u_spin_weights:new u.aP(L,r.u_spin_weights)}),symbolIcon:(L,r)=>({u_is_size_zoom_constant:new u.aL(L,r.u_is_size_zoom_constant),u_is_size_feature_constant:new u.aL(L,r.u_is_size_feature_constant),u_size_t:new u.aM(L,r.u_size_t),u_size:new u.aM(L,r.u_size),u_camera_to_center_distance:new u.aM(L,r.u_camera_to_center_distance),u_pitch:new u.aM(L,r.u_pitch),u_rotate_symbol:new u.aL(L,r.u_rotate_symbol),u_aspect_ratio:new u.aM(L,r.u_aspect_ratio),u_fade_change:new u.aM(L,r.u_fade_change),u_matrix:new u.aN(L,r.u_matrix),u_label_plane_matrix:new u.aN(L,r.u_label_plane_matrix),u_coord_matrix:new u.aN(L,r.u_coord_matrix),u_is_text:new u.aL(L,r.u_is_text),u_pitch_with_map:new u.aL(L,r.u_pitch_with_map),u_texsize:new u.aQ(L,r.u_texsize),u_texture:new u.aL(L,r.u_texture)}),symbolSDF:(L,r)=>({u_is_size_zoom_constant:new u.aL(L,r.u_is_size_zoom_constant),u_is_size_feature_constant:new u.aL(L,r.u_is_size_feature_constant),u_size_t:new u.aM(L,r.u_size_t),u_size:new u.aM(L,r.u_size),u_camera_to_center_distance:new u.aM(L,r.u_camera_to_center_distance),u_pitch:new u.aM(L,r.u_pitch),u_rotate_symbol:new u.aL(L,r.u_rotate_symbol),u_aspect_ratio:new u.aM(L,r.u_aspect_ratio),u_fade_change:new u.aM(L,r.u_fade_change),u_matrix:new u.aN(L,r.u_matrix),u_label_plane_matrix:new u.aN(L,r.u_label_plane_matrix),u_coord_matrix:new u.aN(L,r.u_coord_matrix),u_is_text:new u.aL(L,r.u_is_text),u_pitch_with_map:new u.aL(L,r.u_pitch_with_map),u_texsize:new u.aQ(L,r.u_texsize),u_texture:new u.aL(L,r.u_texture),u_gamma_scale:new u.aM(L,r.u_gamma_scale),u_device_pixel_ratio:new u.aM(L,r.u_device_pixel_ratio),u_is_halo:new u.aL(L,r.u_is_halo)}),symbolTextAndIcon:(L,r)=>({u_is_size_zoom_constant:new u.aL(L,r.u_is_size_zoom_constant),u_is_size_feature_constant:new u.aL(L,r.u_is_size_feature_constant),u_size_t:new u.aM(L,r.u_size_t),u_size:new u.aM(L,r.u_size),u_camera_to_center_distance:new u.aM(L,r.u_camera_to_center_distance),u_pitch:new u.aM(L,r.u_pitch),u_rotate_symbol:new u.aL(L,r.u_rotate_symbol),u_aspect_ratio:new u.aM(L,r.u_aspect_ratio),u_fade_change:new u.aM(L,r.u_fade_change),u_matrix:new u.aN(L,r.u_matrix),u_label_plane_matrix:new u.aN(L,r.u_label_plane_matrix),u_coord_matrix:new u.aN(L,r.u_coord_matrix),u_is_text:new u.aL(L,r.u_is_text),u_pitch_with_map:new u.aL(L,r.u_pitch_with_map),u_texsize:new u.aQ(L,r.u_texsize),u_texsize_icon:new u.aQ(L,r.u_texsize_icon),u_texture:new u.aL(L,r.u_texture),u_texture_icon:new u.aL(L,r.u_texture_icon),u_gamma_scale:new u.aM(L,r.u_gamma_scale),u_device_pixel_ratio:new u.aM(L,r.u_device_pixel_ratio),u_is_halo:new u.aL(L,r.u_is_halo)}),background:(L,r)=>({u_matrix:new u.aN(L,r.u_matrix),u_opacity:new u.aM(L,r.u_opacity),u_color:new u.aR(L,r.u_color)}),backgroundPattern:(L,r)=>({u_matrix:new u.aN(L,r.u_matrix),u_opacity:new u.aM(L,r.u_opacity),u_image:new u.aL(L,r.u_image),u_pattern_tl_a:new u.aQ(L,r.u_pattern_tl_a),u_pattern_br_a:new u.aQ(L,r.u_pattern_br_a),u_pattern_tl_b:new u.aQ(L,r.u_pattern_tl_b),u_pattern_br_b:new u.aQ(L,r.u_pattern_br_b),u_texsize:new u.aQ(L,r.u_texsize),u_mix:new u.aM(L,r.u_mix),u_pattern_size_a:new u.aQ(L,r.u_pattern_size_a),u_pattern_size_b:new u.aQ(L,r.u_pattern_size_b),u_scale_a:new u.aM(L,r.u_scale_a),u_scale_b:new u.aM(L,r.u_scale_b),u_pixel_coord_upper:new u.aQ(L,r.u_pixel_coord_upper),u_pixel_coord_lower:new u.aQ(L,r.u_pixel_coord_lower),u_tile_units_to_pixels:new u.aM(L,r.u_tile_units_to_pixels)}),terrain:(L,r)=>({u_matrix:new u.aN(L,r.u_matrix),u_texture:new u.aL(L,r.u_texture),u_ele_delta:new u.aM(L,r.u_ele_delta)}),terrainDepth:(L,r)=>({u_matrix:new u.aN(L,r.u_matrix),u_ele_delta:new u.aM(L,r.u_ele_delta)}),terrainCoords:(L,r)=>({u_matrix:new u.aN(L,r.u_matrix),u_texture:new u.aL(L,r.u_texture),u_terrain_coords_id:new u.aM(L,r.u_terrain_coords_id),u_ele_delta:new u.aM(L,r.u_ele_delta)})};class ra{constructor(r,d,k){this.context=r;const I=r.gl;this.buffer=I.createBuffer(),this.dynamicDraw=!!k,this.context.unbindVAO(),r.bindElementBuffer.set(this.buffer),I.bufferData(I.ELEMENT_ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?I.DYNAMIC_DRAW:I.STATIC_DRAW),this.dynamicDraw||delete d.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(r){const d=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),d.bufferSubData(d.ELEMENT_ARRAY_BUFFER,0,r.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const sa={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Da{constructor(r,d,k,I){this.length=d.length,this.attributes=k,this.itemSize=d.bytesPerElement,this.dynamicDraw=I,this.context=r;const R=r.gl;this.buffer=R.createBuffer(),r.bindVertexBuffer.set(this.buffer),R.bufferData(R.ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?R.DYNAMIC_DRAW:R.STATIC_DRAW),this.dynamicDraw||delete d.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(r){if(r.length!==this.length)throw new Error(`Length of new data is ${r.length}, which doesn't match current length of ${this.length}`);const d=this.context.gl;this.bind(),d.bufferSubData(d.ARRAY_BUFFER,0,r.arrayBuffer)}enableAttributes(r,d){for(let k=0;k<this.attributes.length;k++){const I=d.attributes[this.attributes[k].name];I!==void 0&&r.enableVertexAttribArray(I)}}setVertexAttribPointers(r,d,k){for(let I=0;I<this.attributes.length;I++){const R=this.attributes[I],q=d.attributes[R.name];q!==void 0&&r.vertexAttribPointer(q,R.components,r[sa[R.type]],!1,this.itemSize,R.offset+this.itemSize*(k||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Yn=new WeakMap;function yn(L){var r;if(Yn.has(L))return Yn.get(L);{const d=(r=L.getParameter(L.VERSION))===null||r===void 0?void 0:r.startsWith("WebGL 2.0");return Yn.set(L,d),d}}class Rn{constructor(r){this.gl=r.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(r){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class ur extends Rn{getDefault(){return u.aT.transparent}set(r){const d=this.current;(r.r!==d.r||r.g!==d.g||r.b!==d.b||r.a!==d.a||this.dirty)&&(this.gl.clearColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class is extends Rn{getDefault(){return 1}set(r){(r!==this.current||this.dirty)&&(this.gl.clearDepth(r),this.current=r,this.dirty=!1)}}class dr extends Rn{getDefault(){return 0}set(r){(r!==this.current||this.dirty)&&(this.gl.clearStencil(r),this.current=r,this.dirty=!1)}}class fo extends Rn{getDefault(){return[!0,!0,!0,!0]}set(r){const d=this.current;(r[0]!==d[0]||r[1]!==d[1]||r[2]!==d[2]||r[3]!==d[3]||this.dirty)&&(this.gl.colorMask(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class Go extends Rn{getDefault(){return!0}set(r){(r!==this.current||this.dirty)&&(this.gl.depthMask(r),this.current=r,this.dirty=!1)}}class ya extends Rn{getDefault(){return 255}set(r){(r!==this.current||this.dirty)&&(this.gl.stencilMask(r),this.current=r,this.dirty=!1)}}class Ya extends Rn{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(r){const d=this.current;(r.func!==d.func||r.ref!==d.ref||r.mask!==d.mask||this.dirty)&&(this.gl.stencilFunc(r.func,r.ref,r.mask),this.current=r,this.dirty=!1)}}class Hr extends Rn{getDefault(){const r=this.gl;return[r.KEEP,r.KEEP,r.KEEP]}set(r){const d=this.current;(r[0]!==d[0]||r[1]!==d[1]||r[2]!==d[2]||this.dirty)&&(this.gl.stencilOp(r[0],r[1],r[2]),this.current=r,this.dirty=!1)}}class ko extends Rn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const d=this.gl;r?d.enable(d.STENCIL_TEST):d.disable(d.STENCIL_TEST),this.current=r,this.dirty=!1}}class pa extends Rn{getDefault(){return[0,1]}set(r){const d=this.current;(r[0]!==d[0]||r[1]!==d[1]||this.dirty)&&(this.gl.depthRange(r[0],r[1]),this.current=r,this.dirty=!1)}}class La extends Rn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const d=this.gl;r?d.enable(d.DEPTH_TEST):d.disable(d.DEPTH_TEST),this.current=r,this.dirty=!1}}class ds extends Rn{getDefault(){return this.gl.LESS}set(r){(r!==this.current||this.dirty)&&(this.gl.depthFunc(r),this.current=r,this.dirty=!1)}}class As extends Rn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const d=this.gl;r?d.enable(d.BLEND):d.disable(d.BLEND),this.current=r,this.dirty=!1}}class po extends Rn{getDefault(){const r=this.gl;return[r.ONE,r.ZERO]}set(r){const d=this.current;(r[0]!==d[0]||r[1]!==d[1]||this.dirty)&&(this.gl.blendFunc(r[0],r[1]),this.current=r,this.dirty=!1)}}class Ls extends Rn{getDefault(){return u.aT.transparent}set(r){const d=this.current;(r.r!==d.r||r.g!==d.g||r.b!==d.b||r.a!==d.a||this.dirty)&&(this.gl.blendColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class aa extends Rn{getDefault(){return this.gl.FUNC_ADD}set(r){(r!==this.current||this.dirty)&&(this.gl.blendEquation(r),this.current=r,this.dirty=!1)}}class za extends Rn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const d=this.gl;r?d.enable(d.CULL_FACE):d.disable(d.CULL_FACE),this.current=r,this.dirty=!1}}class $a extends Rn{getDefault(){return this.gl.BACK}set(r){(r!==this.current||this.dirty)&&(this.gl.cullFace(r),this.current=r,this.dirty=!1)}}class rA extends Rn{getDefault(){return this.gl.CCW}set(r){(r!==this.current||this.dirty)&&(this.gl.frontFace(r),this.current=r,this.dirty=!1)}}class pr extends Rn{getDefault(){return null}set(r){(r!==this.current||this.dirty)&&(this.gl.useProgram(r),this.current=r,this.dirty=!1)}}class kl extends Rn{getDefault(){return this.gl.TEXTURE0}set(r){(r!==this.current||this.dirty)&&(this.gl.activeTexture(r),this.current=r,this.dirty=!1)}}class zs extends Rn{getDefault(){const r=this.gl;return[0,0,r.drawingBufferWidth,r.drawingBufferHeight]}set(r){const d=this.current;(r[0]!==d[0]||r[1]!==d[1]||r[2]!==d[2]||r[3]!==d[3]||this.dirty)&&(this.gl.viewport(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class js extends Rn{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const d=this.gl;d.bindFramebuffer(d.FRAMEBUFFER,r),this.current=r,this.dirty=!1}}class CA extends Rn{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const d=this.gl;d.bindRenderbuffer(d.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class xa extends Rn{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const d=this.gl;d.bindTexture(d.TEXTURE_2D,r),this.current=r,this.dirty=!1}}class Ra extends Rn{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const d=this.gl;d.bindBuffer(d.ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class Xa extends Rn{getDefault(){return null}set(r){const d=this.gl;d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class Zr extends Rn{getDefault(){return null}set(r){var d;if(r===this.current&&!this.dirty)return;const k=this.gl;yn(k)?k.bindVertexArray(r):(d=k.getExtension("OES_vertex_array_object"))===null||d===void 0||d.bindVertexArrayOES(r),this.current=r,this.dirty=!1}}class wa extends Rn{getDefault(){return 4}set(r){if(r===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_ALIGNMENT,r),this.current=r,this.dirty=!1}}class Fa extends Rn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r),this.current=r,this.dirty=!1}}class Qo extends Rn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,r),this.current=r,this.dirty=!1}}class _s extends Rn{constructor(r,d){super(r),this.context=r,this.parent=d}getDefault(){return null}}class ga extends _s{setDirty(){this.dirty=!0}set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,r,0),this.current=r,this.dirty=!1}}class Xr extends _s{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferRenderbuffer(d.FRAMEBUFFER,d.DEPTH_ATTACHMENT,d.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class kA extends _s{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferRenderbuffer(d.FRAMEBUFFER,d.DEPTH_STENCIL_ATTACHMENT,d.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class Un{constructor(r,d,k,I,R){this.context=r,this.width=d,this.height=k;const q=r.gl,a=this.framebuffer=q.createFramebuffer();if(this.colorAttachment=new ga(r,a),I)this.depthAttachment=R?new kA(r,a):new Xr(r,a);else if(R)throw new Error("Stencil cannot be setted without depth");if(q.checkFramebufferStatus(q.FRAMEBUFFER)!==q.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const r=this.context.gl,d=this.colorAttachment.get();if(d&&r.deleteTexture(d),this.depthAttachment){const k=this.depthAttachment.get();k&&r.deleteRenderbuffer(k)}r.deleteFramebuffer(this.framebuffer)}}class Dr{constructor(r,d,k){this.blendFunction=r,this.blendColor=d,this.mask=k}}Dr.Replace=[1,0],Dr.disabled=new Dr(Dr.Replace,u.aT.transparent,[!1,!1,!1,!1]),Dr.unblended=new Dr(Dr.Replace,u.aT.transparent,[!0,!0,!0,!0]),Dr.alphaBlended=new Dr([1,771],u.aT.transparent,[!0,!0,!0,!0]);class Ka{constructor(r){var d,k;if(this.gl=r,this.clearColor=new ur(this),this.clearDepth=new is(this),this.clearStencil=new dr(this),this.colorMask=new fo(this),this.depthMask=new Go(this),this.stencilMask=new ya(this),this.stencilFunc=new Ya(this),this.stencilOp=new Hr(this),this.stencilTest=new ko(this),this.depthRange=new pa(this),this.depthTest=new La(this),this.depthFunc=new ds(this),this.blend=new As(this),this.blendFunc=new po(this),this.blendColor=new Ls(this),this.blendEquation=new aa(this),this.cullFace=new za(this),this.cullFaceSide=new $a(this),this.frontFace=new rA(this),this.program=new pr(this),this.activeTexture=new kl(this),this.viewport=new zs(this),this.bindFramebuffer=new js(this),this.bindRenderbuffer=new CA(this),this.bindTexture=new xa(this),this.bindVertexBuffer=new Ra(this),this.bindElementBuffer=new Xa(this),this.bindVertexArray=new Zr(this),this.pixelStoreUnpack=new wa(this),this.pixelStoreUnpackPremultiplyAlpha=new Fa(this),this.pixelStoreUnpackFlipY=new Qo(this),this.extTextureFilterAnisotropic=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=r.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),yn(r)){this.HALF_FLOAT=r.HALF_FLOAT;const I=r.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(d=r.RGBA16F)!==null&&d!==void 0?d:I==null?void 0:I.RGBA16F_EXT,this.RGB16F=(k=r.RGB16F)!==null&&k!==void 0?k:I==null?void 0:I.RGB16F_EXT,r.getExtension("EXT_color_buffer_float")}else{r.getExtension("EXT_color_buffer_half_float"),r.getExtension("OES_texture_half_float_linear");const I=r.getExtension("OES_texture_half_float");this.HALF_FLOAT=I==null?void 0:I.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(r,d){return new ra(this,r,d)}createVertexBuffer(r,d,k){return new Da(this,r,d,k)}createRenderbuffer(r,d,k){const I=this.gl,R=I.createRenderbuffer();return this.bindRenderbuffer.set(R),I.renderbufferStorage(I.RENDERBUFFER,r,d,k),this.bindRenderbuffer.set(null),R}createFramebuffer(r,d,k,I){return new Un(this,r,d,k,I)}clear({color:r,depth:d,stencil:k}){const I=this.gl;let R=0;r&&(R|=I.COLOR_BUFFER_BIT,this.clearColor.set(r),this.colorMask.set([!0,!0,!0,!0])),d!==void 0&&(R|=I.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(d),this.depthMask.set(!0)),k!==void 0&&(R|=I.STENCIL_BUFFER_BIT,this.clearStencil.set(k),this.stencilMask.set(255)),I.clear(R)}setCullFace(r){r.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(r.mode),this.frontFace.set(r.frontFace))}setDepthMode(r){r.func!==this.gl.ALWAYS||r.mask?(this.depthTest.set(!0),this.depthFunc.set(r.func),this.depthMask.set(r.mask),this.depthRange.set(r.range)):this.depthTest.set(!1)}setStencilMode(r){r.test.func!==this.gl.ALWAYS||r.mask?(this.stencilTest.set(!0),this.stencilMask.set(r.mask),this.stencilOp.set([r.fail,r.depthFail,r.pass]),this.stencilFunc.set({func:r.test.func,ref:r.ref,mask:r.test.mask})):this.stencilTest.set(!1)}setColorMode(r){u.aG(r.blendFunction,Dr.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(r.blendFunction),this.blendColor.set(r.blendColor)),this.colorMask.set(r.mask)}createVertexArray(){var r;return yn(this.gl)?this.gl.createVertexArray():(r=this.gl.getExtension("OES_vertex_array_object"))===null||r===void 0?void 0:r.createVertexArrayOES()}deleteVertexArray(r){var d;return yn(this.gl)?this.gl.deleteVertexArray(r):(d=this.gl.getExtension("OES_vertex_array_object"))===null||d===void 0?void 0:d.deleteVertexArrayOES(r)}unbindVAO(){this.bindVertexArray.set(null)}}class jn{constructor(r,d,k){this.func=r,this.mask=d,this.range=k}}jn.ReadOnly=!1,jn.ReadWrite=!0,jn.disabled=new jn(519,jn.ReadOnly,[0,1]);const Rs=7680;class Er{constructor(r,d,k,I,R,q){this.test=r,this.ref=d,this.mask=k,this.fail=I,this.depthFail=R,this.pass=q}}Er.disabled=new Er({func:519,mask:0},0,0,Rs,Rs,Rs);class Ir{constructor(r,d,k){this.enable=r,this.mode=d,this.frontFace=k}}let Ws;function rr(L,r,d,k,I,R,q){const a=L.context,o=a.gl,h=L.useProgram("collisionBox"),p=[];let v=0,E=0;for(let Oe=0;Oe<k.length;Oe++){const He=k[Oe],We=r.getTile(He),st=We.getBucket(d);if(!st)continue;let wt=He.posMatrix;I[0]===0&&I[1]===0||(wt=L.translatePosMatrix(He.posMatrix,We,I,R));const Et=q?st.textCollisionBox:st.iconCollisionBox,pt=st.collisionCircleArray;if(pt.length>0){const bt=u.Z(),St=wt;u.aU(bt,st.placementInvProjMatrix,L.transform.glCoordMatrix),u.aU(bt,bt,st.placementViewportMatrix),p.push({circleArray:pt,circleOffset:E,transform:St,invTransform:bt,coord:He}),v+=pt.length/4,E=v}Et&&h.draw(a,o.LINES,jn.disabled,Er.disabled,L.colorModeForRenderPass(),Ir.disabled,yr(wt,L.transform,We),L.style.map.terrain&&L.style.map.terrain.getTerrainData(He),d.id,Et.layoutVertexBuffer,Et.indexBuffer,Et.segments,null,L.transform.zoom,null,null,Et.collisionVertexBuffer)}if(!q||!p.length)return;const z=L.useProgram("collisionCircle"),F=new u.aV;F.resize(4*v),F._trim();let Y=0;for(const Oe of p)for(let He=0;He<Oe.circleArray.length/4;He++){const We=4*He,st=Oe.circleArray[We+0],wt=Oe.circleArray[We+1],Et=Oe.circleArray[We+2],pt=Oe.circleArray[We+3];F.emplace(Y++,st,wt,Et,pt,0),F.emplace(Y++,st,wt,Et,pt,1),F.emplace(Y++,st,wt,Et,pt,2),F.emplace(Y++,st,wt,Et,pt,3)}(!Ws||Ws.length<2*v)&&(Ws=function(Oe){const He=2*Oe,We=new u.aX;We.resize(He),We._trim();for(let st=0;st<He;st++){const wt=6*st;We.uint16[wt+0]=4*st+0,We.uint16[wt+1]=4*st+1,We.uint16[wt+2]=4*st+2,We.uint16[wt+3]=4*st+2,We.uint16[wt+4]=4*st+3,We.uint16[wt+5]=4*st+0}return We}(v));const J=a.createIndexBuffer(Ws,!0),ve=a.createVertexBuffer(F,u.aW.members,!0);for(const Oe of p){const He={u_matrix:Oe.transform,u_inv_matrix:Oe.invTransform,u_camera_to_center_distance:(Ie=L.transform).cameraToCenterDistance,u_viewport_size:[Ie.width,Ie.height]};z.draw(a,o.TRIANGLES,jn.disabled,Er.disabled,L.colorModeForRenderPass(),Ir.disabled,He,L.style.map.terrain&&L.style.map.terrain.getTerrainData(Oe.coord),d.id,ve,J,u.S.simpleSegment(0,2*Oe.circleOffset,Oe.circleArray.length,Oe.circleArray.length/2),null,L.transform.zoom,null,null,null)}var Ie;ve.destroy(),J.destroy()}Ir.disabled=new Ir(!1,1029,2305),Ir.backCCW=new Ir(!0,1029,2305);const qo=u.ao(new Float32Array(16));function Ja(L,r,d,k,I,R){const{horizontalAlign:q,verticalAlign:a}=u.au(L);return new u.P((-(q-.5)*r/I+k[0])*R,(-(a-.5)*d/I+k[1])*R)}function eo(L,r,d,k,I,R,q,a,o,h,p){const v=L.text.placedSymbolArray,E=L.text.dynamicLayoutVertexArray,z=L.icon.dynamicLayoutVertexArray,F={};E.clear();for(let Y=0;Y<v.length;Y++){const J=v.get(Y),ve=J.hidden||!J.crossTileID||L.allowVerticalPlacement&&!J.placedOrientation?null:k[J.crossTileID];if(ve){const Ie=new u.P(J.anchorX,J.anchorY),Oe=fe(Ie,d?q:R,p),He=ye(I.cameraToCenterDistance,Oe.signedDistanceFromCamera);let We=u.aj(L.textSizeData,o,J)*He/u.ap;d&&(We*=L.tilePixelRatio/a);const{width:st,height:wt,anchor:Et,textOffset:pt,textBoxScale:bt}=ve,St=Ja(Et,st,wt,pt,bt,We),vi=d?fe(Ie.add(St),R,p).point:Oe.point.add(r?St.rotate(-I.angle):St),$t=L.allowVerticalPlacement&&J.placedOrientation===u.ai.vertical?Math.PI/2:0;for(let ri=0;ri<J.numGlyphs;ri++)u.ak(E,vi,$t);h&&J.associatedIconIndex>=0&&(F[J.associatedIconIndex]={shiftedAnchor:vi,angle:$t})}else he(J.numGlyphs,E)}if(h){z.clear();const Y=L.icon.placedSymbolArray;for(let J=0;J<Y.length;J++){const ve=Y.get(J);if(ve.hidden)he(ve.numGlyphs,z);else{const Ie=F[J];if(Ie)for(let Oe=0;Oe<ve.numGlyphs;Oe++)u.ak(z,Ie.shiftedAnchor,Ie.angle);else he(ve.numGlyphs,z)}}L.icon.dynamicLayoutVertexBuffer.updateData(z)}L.text.dynamicLayoutVertexBuffer.updateData(E)}function ns(L,r,d){return d.iconsInText&&r?"symbolTextAndIcon":L?"symbolSDF":"symbolIcon"}function $n(L,r,d,k,I,R,q,a,o,h,p,v){const E=L.context,z=E.gl,F=L.transform,Y=a==="map",J=o==="map",ve=a!=="viewport"&&d.layout.get("symbol-placement")!=="point",Ie=Y&&!J&&!ve,Oe=!d.layout.get("symbol-sort-key").isConstant();let He=!1;const We=L.depthModeForSublayer(0,jn.ReadOnly),st=d._unevaluatedLayout.hasValue("text-variable-anchor")||d._unevaluatedLayout.hasValue("text-variable-anchor-offset"),wt=[];for(const Et of k){const pt=r.getTile(Et),bt=pt.getBucket(d);if(!bt)continue;const St=I?bt.text:bt.icon;if(!St||!St.segments.get().length||!St.hasVisibleVertices)continue;const vi=St.programConfigurations.get(d.id),$t=I||bt.sdfIcons,ri=I?bt.textSizeData:bt.iconSizeData,ni=J||F.pitch!==0,_n=L.useProgram(ns($t,I,bt),vi),Ki=u.ah(ri,F.zoom),Oi=L.style.map.terrain&&L.style.map.terrain.getTerrainData(Et);let Ui,tn,ji,Qn,fn=[0,0],Fn=null;if(I)tn=pt.glyphAtlasTexture,ji=z.LINEAR,Ui=pt.glyphAtlasTexture.size,bt.iconsInText&&(fn=pt.imageAtlasTexture.size,Fn=pt.imageAtlasTexture,Qn=ni||L.options.rotating||L.options.zooming||ri.kind==="composite"||ri.kind==="camera"?z.LINEAR:z.NEAREST);else{const ws=d.layout.get("icon-size").constantOr(0)!==1||bt.iconsNeedLinear;tn=pt.imageAtlasTexture,ji=$t||L.options.rotating||L.options.zooming||ws||ni?z.LINEAR:z.NEAREST,Ui=pt.imageAtlasTexture.size}const Rr=Le(pt,1,L.transform.zoom),Mr=se(Et.posMatrix,J,Y,L.transform,Rr),AA=oe(Et.posMatrix,J,Y,L.transform,Rr),DA=st&&bt.hasTextData(),lA=d.layout.get("icon-text-fit")!=="none"&&DA&&bt.hasIconData();if(ve){const ws=L.style.map.terrain?(Ks,Ms)=>L.style.map.terrain.getElevation(Et,Ks,Ms):null,Os=d.layout.get("text-rotation-alignment")==="map";xe(bt,Et.posMatrix,L,I,Mr,AA,J,h,Os,ws)}const Tl=L.translatePosMatrix(Et.posMatrix,pt,R,q),Pl=ve||I&&st||lA?qo:Mr,Gr=L.translatePosMatrix(AA,pt,R,q,!0),Aa=$t&&d.paint.get(I?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Qa;Qa=$t?bt.iconsInText?En(ri.kind,Ki,Ie,J,L,Tl,Pl,Gr,Ui,fn):zi(ri.kind,Ki,Ie,J,L,Tl,Pl,Gr,I,Ui,!0):Ii(ri.kind,Ki,Ie,J,L,Tl,Pl,Gr,I,Ui);const qa={program:_n,buffers:St,uniformValues:Qa,atlasTexture:tn,atlasTextureIcon:Fn,atlasInterpolation:ji,atlasInterpolationIcon:Qn,isSDF:$t,hasHalo:Aa};if(Oe&&bt.canOverlap){He=!0;const ws=St.segments.get();for(const Os of ws)wt.push({segments:new u.S([Os]),sortKey:Os.sortKey,state:qa,terrainData:Oi})}else wt.push({segments:St.segments,sortKey:0,state:qa,terrainData:Oi})}He&&wt.sort((Et,pt)=>Et.sortKey-pt.sortKey);for(const Et of wt){const pt=Et.state;if(E.activeTexture.set(z.TEXTURE0),pt.atlasTexture.bind(pt.atlasInterpolation,z.CLAMP_TO_EDGE),pt.atlasTextureIcon&&(E.activeTexture.set(z.TEXTURE1),pt.atlasTextureIcon&&pt.atlasTextureIcon.bind(pt.atlasInterpolationIcon,z.CLAMP_TO_EDGE)),pt.isSDF){const bt=pt.uniformValues;pt.hasHalo&&(bt.u_is_halo=1,bn(pt.buffers,Et.segments,d,L,pt.program,We,p,v,bt,Et.terrainData)),bt.u_is_halo=0}bn(pt.buffers,Et.segments,d,L,pt.program,We,p,v,pt.uniformValues,Et.terrainData)}}function bn(L,r,d,k,I,R,q,a,o,h){const p=k.context;I.draw(p,p.gl.TRIANGLES,R,q,a,Ir.disabled,o,h,d.id,L.layoutVertexBuffer,L.indexBuffer,r,d.paint,k.transform.zoom,L.programConfigurations.get(d.id),L.dynamicLayoutVertexBuffer,L.opacityVertexBuffer)}function Oa(L,r,d,k,I){if(!d||!k||!k.imageAtlas)return;const R=k.imageAtlas.patternPositions;let q=R[d.to.toString()],a=R[d.from.toString()];if(!q&&a&&(q=a),!a&&q&&(a=q),!q||!a){const o=I.getPaintProperty(r);q=R[o],a=R[o]}q&&a&&L.setConstantPatternPositions(q,a)}function gr(L,r,d,k,I,R,q){const a=L.context.gl,o="fill-pattern",h=d.paint.get(o),p=h&&h.constantOr(1),v=d.getCrossfadeParameters();let E,z,F,Y,J;q?(z=p&&!d.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",E=a.LINES):(z=p?"fillPattern":"fill",E=a.TRIANGLES);const ve=h.constantOr(null);for(const Ie of k){const Oe=r.getTile(Ie);if(p&&!Oe.patternsLoaded())continue;const He=Oe.getBucket(d);if(!He)continue;const We=He.programConfigurations.get(d.id),st=L.useProgram(z,We),wt=L.style.map.terrain&&L.style.map.terrain.getTerrainData(Ie);p&&(L.context.activeTexture.set(a.TEXTURE0),Oe.imageAtlasTexture.bind(a.LINEAR,a.CLAMP_TO_EDGE),We.updatePaintBuffers(v)),Oa(We,o,ve,Oe,d);const Et=wt?Ie:null,pt=L.translatePosMatrix(Et?Et.posMatrix:Ie.posMatrix,Oe,d.paint.get("fill-translate"),d.paint.get("fill-translate-anchor"));if(q){Y=He.indexBuffer2,J=He.segments2;const bt=[a.drawingBufferWidth,a.drawingBufferHeight];F=z==="fillOutlinePattern"&&p?an(pt,L,v,Oe,bt):os(pt,bt)}else Y=He.indexBuffer,J=He.segments,F=p?Pa(pt,L,v,Oe):co(pt);st.draw(L.context,E,I,L.stencilModeForClipping(Ie),R,Ir.disabled,F,wt,d.id,He.layoutVertexBuffer,Y,J,d.paint,L.transform.zoom,We)}}function ba(L,r,d,k,I,R,q){const a=L.context,o=a.gl,h="fill-extrusion-pattern",p=d.paint.get(h),v=p.constantOr(1),E=d.getCrossfadeParameters(),z=d.paint.get("fill-extrusion-opacity"),F=p.constantOr(null);for(const Y of k){const J=r.getTile(Y),ve=J.getBucket(d);if(!ve)continue;const Ie=L.style.map.terrain&&L.style.map.terrain.getTerrainData(Y),Oe=ve.programConfigurations.get(d.id),He=L.useProgram(v?"fillExtrusionPattern":"fillExtrusion",Oe);v&&(L.context.activeTexture.set(o.TEXTURE0),J.imageAtlasTexture.bind(o.LINEAR,o.CLAMP_TO_EDGE),Oe.updatePaintBuffers(E)),Oa(Oe,h,F,J,d);const We=L.translatePosMatrix(Y.posMatrix,J,d.paint.get("fill-extrusion-translate"),d.paint.get("fill-extrusion-translate-anchor")),st=d.paint.get("fill-extrusion-vertical-gradient"),wt=v?Hs(We,L,st,z,Y,E,J):Ta(We,L,st,z);He.draw(a,a.gl.TRIANGLES,I,R,q,Ir.backCCW,wt,Ie,d.id,ve.layoutVertexBuffer,ve.indexBuffer,ve.segments,d.paint,L.transform.zoom,Oe,L.style.map.terrain&&ve.centroidVertexBuffer)}}function go(L,r,d,k,I,R,q){const a=L.context,o=a.gl,h=d.fbo;if(!h)return;const p=L.useProgram("hillshade"),v=L.style.map.terrain&&L.style.map.terrain.getTerrainData(r);a.activeTexture.set(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,h.colorAttachment.get()),p.draw(a,o.TRIANGLES,I,R,q,Ir.disabled,((E,z,F,Y)=>{const J=F.paint.get("hillshade-shadow-color"),ve=F.paint.get("hillshade-highlight-color"),Ie=F.paint.get("hillshade-accent-color");let Oe=F.paint.get("hillshade-illumination-direction")*(Math.PI/180);F.paint.get("hillshade-illumination-anchor")==="viewport"&&(Oe-=E.transform.angle);const He=!E.options.moving;return{u_matrix:Y?Y.posMatrix:E.transform.calculatePosMatrix(z.tileID.toUnwrapped(),He),u_image:0,u_latrange:Bs(0,z.tileID),u_light:[F.paint.get("hillshade-exaggeration"),Oe],u_shadow:J,u_highlight:ve,u_accent:Ie}})(L,d,k,v?r:null),v,k.id,L.rasterBoundsBuffer,L.quadTriangleIndexBuffer,L.rasterBoundsSegments)}function sr(L,r,d,k,I,R){const q=L.context,a=q.gl,o=r.dem;if(o&&o.data){const h=o.dim,p=o.stride,v=o.getPixels();if(q.activeTexture.set(a.TEXTURE1),q.pixelStoreUnpackPremultiplyAlpha.set(!1),r.demTexture=r.demTexture||L.getTileTexture(p),r.demTexture){const z=r.demTexture;z.update(v,{premultiply:!1}),z.bind(a.NEAREST,a.CLAMP_TO_EDGE)}else r.demTexture=new gi(q,v,a.RGBA,{premultiply:!1}),r.demTexture.bind(a.NEAREST,a.CLAMP_TO_EDGE);q.activeTexture.set(a.TEXTURE0);let E=r.fbo;if(!E){const z=new gi(q,{width:h,height:h,data:null},a.RGBA);z.bind(a.LINEAR,a.CLAMP_TO_EDGE),E=r.fbo=q.createFramebuffer(h,h,!0,!1),E.colorAttachment.set(z.texture)}q.bindFramebuffer.set(E.framebuffer),q.viewport.set([0,0,h,h]),L.useProgram("hillshadePrepare").draw(q,a.TRIANGLES,k,I,R,Ir.disabled,((z,F)=>{const Y=F.stride,J=u.Z();return u.aS(J,0,u.N,-u.N,0,0,1),u.$(J,J,[0,-u.N,0]),{u_matrix:J,u_image:1,u_dimension:[Y,Y],u_zoom:z.overscaledZ,u_unpack:F.getUnpackVector()}})(r.tileID,o),null,d.id,L.rasterBoundsBuffer,L.quadTriangleIndexBuffer,L.rasterBoundsSegments),r.needsHillshadePrepare=!1}}function Lr(L,r,d,k,I,R){const q=k.paint.get("raster-fade-duration");if(!R&&q>0){const a=u.h.now(),o=(a-L.timeAdded)/q,h=r?(a-r.timeAdded)/q:-1,p=d.getSource(),v=I.coveringZoomLevel({tileSize:p.tileSize,roundZoom:p.roundZoom}),E=!r||Math.abs(r.tileID.overscaledZ-v)>Math.abs(L.tileID.overscaledZ-v),z=E&&L.refreshedUponExpiration?1:u.ad(E?o:1-h,0,1);return L.refreshedUponExpiration&&o>=1&&(L.refreshedUponExpiration=!1),r?{opacity:1,mix:1-z}:{opacity:z,mix:0}}return{opacity:1,mix:0}}const vs=new u.aT(1,0,0,1),Ho=new u.aT(0,1,0,1),Sa=new u.aT(0,0,1,1),Eo=new u.aT(1,0,1,1),Ys=new u.aT(0,1,1,1);function rs(L,r,d,k){Ns(L,0,r+d/2,L.transform.width,d,k)}function Kr(L,r,d,k){Ns(L,r-d/2,0,d,L.transform.height,k)}function Ns(L,r,d,k,I,R){const q=L.context,a=q.gl;a.enable(a.SCISSOR_TEST),a.scissor(r*L.pixelRatio,d*L.pixelRatio,k*L.pixelRatio,I*L.pixelRatio),q.clear({color:R}),a.disable(a.SCISSOR_TEST)}function ma(L,r,d){const k=L.context,I=k.gl,R=d.posMatrix,q=L.useProgram("debug"),a=jn.disabled,o=Er.disabled,h=L.colorModeForRenderPass(),p="$debug",v=L.style.map.terrain&&L.style.map.terrain.getTerrainData(d);k.activeTexture.set(I.TEXTURE0);const E=r.getTileByID(d.key).latestRawTileData,z=Math.floor((E&&E.byteLength||0)/1024),F=r.getTile(d).tileSize,Y=512/Math.min(F,512)*(d.overscaledZ/L.transform.zoom)*.5;let J=d.canonical.toString();d.overscaledZ!==d.canonical.z&&(J+=` => ${d.overscaledZ}`),function(ve,Ie){ve.initDebugOverlayCanvas();const Oe=ve.debugOverlayCanvas,He=ve.context.gl,We=ve.debugOverlayCanvas.getContext("2d");We.clearRect(0,0,Oe.width,Oe.height),We.shadowColor="white",We.shadowBlur=2,We.lineWidth=1.5,We.strokeStyle="white",We.textBaseline="top",We.font="bold 36px Open Sans, sans-serif",We.fillText(Ie,5,5),We.strokeText(Ie,5,5),ve.debugOverlayTexture.update(Oe),ve.debugOverlayTexture.bind(He.LINEAR,He.CLAMP_TO_EDGE)}(L,`${J} ${z}kB`),q.draw(k,I.TRIANGLES,a,o,Dr.alphaBlended,Ir.disabled,Zs(R,u.aT.transparent,Y),null,p,L.debugBuffer,L.quadTriangleIndexBuffer,L.debugSegments),q.draw(k,I.LINE_STRIP,a,o,h,Ir.disabled,Zs(R,u.aT.red),v,p,L.debugBuffer,L.tileBorderIndexBuffer,L.debugSegments)}function Ar(L,r,d){const k=L.context,I=k.gl,R=L.colorModeForRenderPass(),q=new jn(I.LEQUAL,jn.ReadWrite,L.depthRangeFor3D),a=L.useProgram("terrain"),o=r.getTerrainMesh();k.bindFramebuffer.set(null),k.viewport.set([0,0,L.width,L.height]);for(const h of d){const p=L.renderToTexture.getTexture(h),v=r.getTerrainData(h.tileID);k.activeTexture.set(I.TEXTURE0),I.bindTexture(I.TEXTURE_2D,p.texture);const E={u_matrix:L.transform.calculatePosMatrix(h.tileID.toUnwrapped()),u_texture:0,u_ele_delta:r.getMeshFrameDelta(L.transform.zoom)};a.draw(k,I.TRIANGLES,q,Er.disabled,R,Ir.backCCW,E,v,"terrain",o.vertexBuffer,o.indexBuffer,o.segments)}}class Nr{constructor(r,d){this.context=new Ka(r),this.transform=d,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:u.Z(),renderTime:0},this.setup(),this.numSublayers=cn.maxUnderzooming+cn.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Xi}resize(r,d,k){if(this.width=Math.floor(r*k),this.height=Math.floor(d*k),this.pixelRatio=k,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const I of this.style._order)this.style._layers[I].resize()}setup(){const r=this.context,d=new u.a_;d.emplaceBack(0,0),d.emplaceBack(u.N,0),d.emplaceBack(0,u.N),d.emplaceBack(u.N,u.N),this.tileExtentBuffer=r.createVertexBuffer(d,es.members),this.tileExtentSegments=u.S.simpleSegment(0,0,4,2);const k=new u.a_;k.emplaceBack(0,0),k.emplaceBack(u.N,0),k.emplaceBack(0,u.N),k.emplaceBack(u.N,u.N),this.debugBuffer=r.createVertexBuffer(k,es.members),this.debugSegments=u.S.simpleSegment(0,0,4,5);const I=new u.V;I.emplaceBack(0,0,0,0),I.emplaceBack(u.N,0,u.N,0),I.emplaceBack(0,u.N,0,u.N),I.emplaceBack(u.N,u.N,u.N,u.N),this.rasterBoundsBuffer=r.createVertexBuffer(I,li.members),this.rasterBoundsSegments=u.S.simpleSegment(0,0,4,2);const R=new u.a_;R.emplaceBack(0,0),R.emplaceBack(1,0),R.emplaceBack(0,1),R.emplaceBack(1,1),this.viewportBuffer=r.createVertexBuffer(R,es.members),this.viewportSegments=u.S.simpleSegment(0,0,4,2);const q=new u.a$;q.emplaceBack(0),q.emplaceBack(1),q.emplaceBack(3),q.emplaceBack(2),q.emplaceBack(0),this.tileBorderIndexBuffer=r.createIndexBuffer(q);const a=new u.b0;a.emplaceBack(0,1,2),a.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=r.createIndexBuffer(a);const o=this.context.gl;this.stencilClearMode=new Er({func:o.ALWAYS,mask:0},0,255,o.ZERO,o.ZERO,o.ZERO)}clearStencil(){const r=this.context,d=r.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const k=u.Z();u.aS(k,0,this.width,this.height,0,0,1),u.a0(k,k,[d.drawingBufferWidth,d.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(r,d.TRIANGLES,jn.disabled,this.stencilClearMode,Dr.disabled,Ir.disabled,va(k),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(r,d){if(this.currentStencilSource===r.source||!r.isTileClipped()||!d||!d.length)return;this.currentStencilSource=r.source;const k=this.context,I=k.gl;this.nextStencilID+d.length>256&&this.clearStencil(),k.setColorMode(Dr.disabled),k.setDepthMode(jn.disabled);const R=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const q of d){const a=this._tileClippingMaskIDs[q.key]=this.nextStencilID++,o=this.style.map.terrain&&this.style.map.terrain.getTerrainData(q);R.draw(k,I.TRIANGLES,jn.disabled,new Er({func:I.ALWAYS,mask:0},a,255,I.KEEP,I.KEEP,I.REPLACE),Dr.disabled,Ir.disabled,va(q.posMatrix),o,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const r=this.nextStencilID++,d=this.context.gl;return new Er({func:d.NOTEQUAL,mask:255},r,255,d.KEEP,d.KEEP,d.REPLACE)}stencilModeForClipping(r){const d=this.context.gl;return new Er({func:d.EQUAL,mask:255},this._tileClippingMaskIDs[r.key],0,d.KEEP,d.KEEP,d.REPLACE)}stencilConfigForOverlap(r){const d=this.context.gl,k=r.sort((q,a)=>a.overscaledZ-q.overscaledZ),I=k[k.length-1].overscaledZ,R=k[0].overscaledZ-I+1;if(R>1){this.currentStencilSource=void 0,this.nextStencilID+R>256&&this.clearStencil();const q={};for(let a=0;a<R;a++)q[a+I]=new Er({func:d.GEQUAL,mask:255},a+this.nextStencilID,255,d.KEEP,d.KEEP,d.REPLACE);return this.nextStencilID+=R,[q,k]}return[{[I]:Er.disabled},k]}colorModeForRenderPass(){const r=this.context.gl;return this._showOverdrawInspector?new Dr([r.CONSTANT_COLOR,r.ONE],new u.aT(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Dr.unblended:Dr.alphaBlended}depthModeForSublayer(r,d,k){if(!this.opaquePassEnabledForLayer())return jn.disabled;const I=1-((1+this.currentLayer)*this.numSublayers+r)*this.depthEpsilon;return new jn(k||this.context.gl.LEQUAL,d,[I,I])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(r,d){this.style=r,this.options=d,this.lineAtlas=r.lineAtlas,this.imageManager=r.imageManager,this.glyphManager=r.glyphManager,this.symbolFadeChange=r.placement.symbolFadeChange(u.h.now()),this.imageManager.beginFrame();const k=this.style._order,I=this.style.sourceCaches,R={},q={},a={};for(const o in I){const h=I[o];h.used&&h.prepare(this.context),R[o]=h.getVisibleCoordinates(),q[o]=R[o].slice().reverse(),a[o]=h.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let o=0;o<k.length;o++)if(this.style._layers[k[o]].is3D()){this.opaquePassCutoff=o;break}if(this.renderToTexture){this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0;const o=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!u.b1(this.terrainFacilitator.matrix,this.transform.projMatrix)||o.length)&&(u.b2(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(h,p){const v=h.context,E=v.gl,z=Dr.unblended,F=new jn(E.LEQUAL,jn.ReadWrite,[0,1]),Y=p.getTerrainMesh(),J=p.sourceCache.getRenderableTiles(),ve=h.useProgram("terrainDepth");v.bindFramebuffer.set(p.getFramebuffer("depth").framebuffer),v.viewport.set([0,0,h.width/devicePixelRatio,h.height/devicePixelRatio]),v.clear({color:u.aT.transparent,depth:1});for(const Ie of J){const Oe=p.getTerrainData(Ie.tileID),He={u_matrix:h.transform.calculatePosMatrix(Ie.tileID.toUnwrapped()),u_ele_delta:p.getMeshFrameDelta(h.transform.zoom)};ve.draw(v,E.TRIANGLES,F,Er.disabled,z,Ir.backCCW,He,Oe,"terrain",Y.vertexBuffer,Y.indexBuffer,Y.segments)}v.bindFramebuffer.set(null),v.viewport.set([0,0,h.width,h.height])}(this,this.style.map.terrain),function(h,p){const v=h.context,E=v.gl,z=Dr.unblended,F=new jn(E.LEQUAL,jn.ReadWrite,[0,1]),Y=p.getTerrainMesh(),J=p.getCoordsTexture(),ve=p.sourceCache.getRenderableTiles(),Ie=h.useProgram("terrainCoords");v.bindFramebuffer.set(p.getFramebuffer("coords").framebuffer),v.viewport.set([0,0,h.width/devicePixelRatio,h.height/devicePixelRatio]),v.clear({color:u.aT.transparent,depth:1}),p.coordsIndex=[];for(const Oe of ve){const He=p.getTerrainData(Oe.tileID);v.activeTexture.set(E.TEXTURE0),E.bindTexture(E.TEXTURE_2D,J.texture);const We={u_matrix:h.transform.calculatePosMatrix(Oe.tileID.toUnwrapped()),u_terrain_coords_id:(255-p.coordsIndex.length)/255,u_texture:0,u_ele_delta:p.getMeshFrameDelta(h.transform.zoom)};Ie.draw(v,E.TRIANGLES,F,Er.disabled,z,Ir.backCCW,We,He,"terrain",Y.vertexBuffer,Y.indexBuffer,Y.segments),p.coordsIndex.push(Oe.tileID.key)}v.bindFramebuffer.set(null),v.viewport.set([0,0,h.width,h.height])}(this,this.style.map.terrain))}this.renderPass="offscreen";for(const o of k){const h=this.style._layers[o];if(!h.hasOffscreenPass()||h.isHidden(this.transform.zoom))continue;const p=q[h.source];(h.type==="custom"||p.length)&&this.renderLayer(this,I[h.source],h,p)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:d.showOverdrawInspector?u.aT.black:u.aT.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=d.showOverdrawInspector,this.depthRangeFor3D=[0,1-(r._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=k.length-1;this.currentLayer>=0;this.currentLayer--){const o=this.style._layers[k[this.currentLayer]],h=I[o.source],p=R[o.source];this._renderTileClippingMasks(o,p),this.renderLayer(this,h,o,p)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<k.length;this.currentLayer++){const o=this.style._layers[k[this.currentLayer]],h=I[o.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(o))continue;const p=(o.type==="symbol"?a:q)[o.source];this._renderTileClippingMasks(o,R[o.source]),this.renderLayer(this,h,o,p)}if(this.options.showTileBoundaries){const o=function(h,p){let v=null;const E=Object.values(h._layers).flatMap(J=>J.source&&!J.isHidden(p)?[h.sourceCaches[J.source]]:[]),z=E.filter(J=>J.getSource().type==="vector"),F=E.filter(J=>J.getSource().type!=="vector"),Y=J=>{(!v||v.getSource().maxzoom<J.getSource().maxzoom)&&(v=J)};return z.forEach(J=>Y(J)),v||F.forEach(J=>Y(J)),v}(this.style,this.transform.zoom);o&&function(h,p,v){for(let E=0;E<v.length;E++)ma(h,p,v[E])}(this,o,o.getVisibleCoordinates())}this.options.showPadding&&function(o){const h=o.transform.padding;rs(o,o.transform.height-(h.top||0),3,vs),rs(o,h.bottom||0,3,Ho),Kr(o,h.left||0,3,Sa),Kr(o,o.transform.width-(h.right||0),3,Eo);const p=o.transform.centerPoint;(function(v,E,z,F){Ns(v,E-1,z-10,2,20,F),Ns(v,E-10,z-1,20,2,F)})(o,p.x,o.transform.height-p.y,Ys)}(this),this.context.setDefault()}renderLayer(r,d,k,I){if(!k.isHidden(this.transform.zoom)&&(k.type==="background"||k.type==="custom"||(I||[]).length))switch(this.id=k.id,k.type){case"symbol":(function(R,q,a,o,h){if(R.renderPass!=="translucent")return;const p=Er.disabled,v=R.colorModeForRenderPass();(a._unevaluatedLayout.hasValue("text-variable-anchor")||a._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(E,z,F,Y,J,ve,Ie){const Oe=z.transform,He=J==="map",We=ve==="map";for(const st of E){const wt=Y.getTile(st),Et=wt.getBucket(F);if(!Et||!Et.text||!Et.text.segments.get().length)continue;const pt=u.ah(Et.textSizeData,Oe.zoom),bt=Le(wt,1,z.transform.zoom),St=se(st.posMatrix,We,He,z.transform,bt),vi=F.layout.get("icon-text-fit")!=="none"&&Et.hasIconData();if(pt){const $t=Math.pow(2,Oe.zoom-wt.tileID.overscaledZ);eo(Et,He,We,Ie,Oe,St,st.posMatrix,$t,pt,vi,z.style.map.terrain?(ri,ni)=>z.style.map.terrain.getElevation(st,ri,ni):null)}}}(o,R,a,q,a.layout.get("text-rotation-alignment"),a.layout.get("text-pitch-alignment"),h),a.paint.get("icon-opacity").constantOr(1)!==0&&$n(R,q,a,o,!1,a.paint.get("icon-translate"),a.paint.get("icon-translate-anchor"),a.layout.get("icon-rotation-alignment"),a.layout.get("icon-pitch-alignment"),a.layout.get("icon-keep-upright"),p,v),a.paint.get("text-opacity").constantOr(1)!==0&&$n(R,q,a,o,!0,a.paint.get("text-translate"),a.paint.get("text-translate-anchor"),a.layout.get("text-rotation-alignment"),a.layout.get("text-pitch-alignment"),a.layout.get("text-keep-upright"),p,v),q.map.showCollisionBoxes&&(rr(R,q,a,o,a.paint.get("text-translate"),a.paint.get("text-translate-anchor"),!0),rr(R,q,a,o,a.paint.get("icon-translate"),a.paint.get("icon-translate-anchor"),!1))})(r,d,k,I,this.style.placement.variableOffsets);break;case"circle":(function(R,q,a,o){if(R.renderPass!=="translucent")return;const h=a.paint.get("circle-opacity"),p=a.paint.get("circle-stroke-width"),v=a.paint.get("circle-stroke-opacity"),E=!a.layout.get("circle-sort-key").isConstant();if(h.constantOr(1)===0&&(p.constantOr(1)===0||v.constantOr(1)===0))return;const z=R.context,F=z.gl,Y=R.depthModeForSublayer(0,jn.ReadOnly),J=Er.disabled,ve=R.colorModeForRenderPass(),Ie=[];for(let Oe=0;Oe<o.length;Oe++){const He=o[Oe],We=q.getTile(He),st=We.getBucket(a);if(!st)continue;const wt=st.programConfigurations.get(a.id),Et=R.useProgram("circle",wt),pt=st.layoutVertexBuffer,bt=st.indexBuffer,St=R.style.map.terrain&&R.style.map.terrain.getTerrainData(He),vi={programConfiguration:wt,program:Et,layoutVertexBuffer:pt,indexBuffer:bt,uniformValues:ts(R,He,We,a),terrainData:St};if(E){const $t=st.segments.get();for(const ri of $t)Ie.push({segments:new u.S([ri]),sortKey:ri.sortKey,state:vi})}else Ie.push({segments:st.segments,sortKey:0,state:vi})}E&&Ie.sort((Oe,He)=>Oe.sortKey-He.sortKey);for(const Oe of Ie){const{programConfiguration:He,program:We,layoutVertexBuffer:st,indexBuffer:wt,uniformValues:Et,terrainData:pt}=Oe.state;We.draw(z,F.TRIANGLES,Y,J,ve,Ir.disabled,Et,pt,a.id,st,wt,Oe.segments,a.paint,R.transform.zoom,He)}})(r,d,k,I);break;case"heatmap":(function(R,q,a,o){if(a.paint.get("heatmap-opacity")!==0)if(R.renderPass==="offscreen"){const h=R.context,p=h.gl,v=Er.disabled,E=new Dr([p.ONE,p.ONE],u.aT.transparent,[!0,!0,!0,!0]);(function(z,F,Y){const J=z.gl;z.activeTexture.set(J.TEXTURE1),z.viewport.set([0,0,F.width/4,F.height/4]);let ve=Y.heatmapFbo;if(ve)J.bindTexture(J.TEXTURE_2D,ve.colorAttachment.get()),z.bindFramebuffer.set(ve.framebuffer);else{const Ie=J.createTexture();J.bindTexture(J.TEXTURE_2D,Ie),J.texParameteri(J.TEXTURE_2D,J.TEXTURE_WRAP_S,J.CLAMP_TO_EDGE),J.texParameteri(J.TEXTURE_2D,J.TEXTURE_WRAP_T,J.CLAMP_TO_EDGE),J.texParameteri(J.TEXTURE_2D,J.TEXTURE_MIN_FILTER,J.LINEAR),J.texParameteri(J.TEXTURE_2D,J.TEXTURE_MAG_FILTER,J.LINEAR),ve=Y.heatmapFbo=z.createFramebuffer(F.width/4,F.height/4,!1,!1),function(Oe,He,We,st){var wt,Et;const pt=Oe.gl,bt=(wt=Oe.HALF_FLOAT)!==null&&wt!==void 0?wt:pt.UNSIGNED_BYTE,St=(Et=Oe.RGBA16F)!==null&&Et!==void 0?Et:pt.RGBA;pt.texImage2D(pt.TEXTURE_2D,0,St,He.width/4,He.height/4,0,pt.RGBA,bt,null),st.colorAttachment.set(We)}(z,F,Ie,ve)}})(h,R,a),h.clear({color:u.aT.transparent});for(let z=0;z<o.length;z++){const F=o[z];if(q.hasRenderableParent(F))continue;const Y=q.getTile(F),J=Y.getBucket(a);if(!J)continue;const ve=J.programConfigurations.get(a.id),Ie=R.useProgram("heatmap",ve),{zoom:Oe}=R.transform;Ie.draw(h,p.TRIANGLES,jn.disabled,v,E,Ir.disabled,Ba(F.posMatrix,Y,Oe,a.paint.get("heatmap-intensity")),null,a.id,J.layoutVertexBuffer,J.indexBuffer,J.segments,a.paint,R.transform.zoom,ve)}h.viewport.set([0,0,R.width,R.height])}else R.renderPass==="translucent"&&(R.context.setColorMode(R.colorModeForRenderPass()),function(h,p){const v=h.context,E=v.gl,z=p.heatmapFbo;if(!z)return;v.activeTexture.set(E.TEXTURE0),E.bindTexture(E.TEXTURE_2D,z.colorAttachment.get()),v.activeTexture.set(E.TEXTURE1);let F=p.colorRampTexture;F||(F=p.colorRampTexture=new gi(v,p.colorRamp,E.RGBA)),F.bind(E.LINEAR,E.CLAMP_TO_EDGE),h.useProgram("heatmapTexture").draw(v,E.TRIANGLES,jn.disabled,Er.disabled,h.colorModeForRenderPass(),Ir.disabled,((Y,J,ve,Ie)=>{const Oe=u.Z();u.aS(Oe,0,Y.width,Y.height,0,0,1);const He=Y.context.gl;return{u_matrix:Oe,u_world:[He.drawingBufferWidth,He.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:J.paint.get("heatmap-opacity")}})(h,p),null,p.id,h.viewportBuffer,h.quadTriangleIndexBuffer,h.viewportSegments,p.paint,h.transform.zoom)}(R,a))})(r,d,k,I);break;case"line":(function(R,q,a,o){if(R.renderPass!=="translucent")return;const h=a.paint.get("line-opacity"),p=a.paint.get("line-width");if(h.constantOr(1)===0||p.constantOr(1)===0)return;const v=R.depthModeForSublayer(0,jn.ReadOnly),E=R.colorModeForRenderPass(),z=a.paint.get("line-dasharray"),F=a.paint.get("line-pattern"),Y=F.constantOr(1),J=a.paint.get("line-gradient"),ve=a.getCrossfadeParameters(),Ie=Y?"linePattern":z?"lineSDF":J?"lineGradient":"line",Oe=R.context,He=Oe.gl;let We=!0;for(const st of o){const wt=q.getTile(st);if(Y&&!wt.patternsLoaded())continue;const Et=wt.getBucket(a);if(!Et)continue;const pt=Et.programConfigurations.get(a.id),bt=R.context.program.get(),St=R.useProgram(Ie,pt),vi=We||St.program!==bt,$t=R.style.map.terrain&&R.style.map.terrain.getTerrainData(st),ri=F.constantOr(null);if(ri&&wt.imageAtlas){const Ki=wt.imageAtlas,Oi=Ki.patternPositions[ri.to.toString()],Ui=Ki.patternPositions[ri.from.toString()];Oi&&Ui&&pt.setConstantPatternPositions(Oi,Ui)}const ni=$t?st:null,_n=Y?te(R,wt,a,ve,ni):z?Be(R,wt,a,z,ve,ni):J?M(R,wt,a,Et.lineClipsArray.length,ni):Ds(R,wt,a,ni);if(Y)Oe.activeTexture.set(He.TEXTURE0),wt.imageAtlasTexture.bind(He.LINEAR,He.CLAMP_TO_EDGE),pt.updatePaintBuffers(ve);else if(z&&(vi||R.lineAtlas.dirty))Oe.activeTexture.set(He.TEXTURE0),R.lineAtlas.bind(Oe);else if(J){const Ki=Et.gradients[a.id];let Oi=Ki.texture;if(a.gradientVersion!==Ki.version){let Ui=256;if(a.stepInterpolant){const tn=q.getSource().maxzoom,ji=st.canonical.z===tn?Math.ceil(1<<R.transform.maxZoom-st.canonical.z):1;Ui=u.ad(u.aY(Et.maxLineLength/u.N*1024*ji),256,Oe.maxTextureSize)}Ki.gradient=u.aZ({expression:a.gradientExpression(),evaluationKey:"lineProgress",resolution:Ui,image:Ki.gradient||void 0,clips:Et.lineClipsArray}),Ki.texture?Ki.texture.update(Ki.gradient):Ki.texture=new gi(Oe,Ki.gradient,He.RGBA),Ki.version=a.gradientVersion,Oi=Ki.texture}Oe.activeTexture.set(He.TEXTURE0),Oi.bind(a.stepInterpolant?He.NEAREST:He.LINEAR,He.CLAMP_TO_EDGE)}St.draw(Oe,He.TRIANGLES,v,R.stencilModeForClipping(st),E,Ir.disabled,_n,$t,a.id,Et.layoutVertexBuffer,Et.indexBuffer,Et.segments,a.paint,R.transform.zoom,pt,Et.layoutVertexBuffer2),We=!1}})(r,d,k,I);break;case"fill":(function(R,q,a,o){const h=a.paint.get("fill-color"),p=a.paint.get("fill-opacity");if(p.constantOr(1)===0)return;const v=R.colorModeForRenderPass(),E=a.paint.get("fill-pattern"),z=R.opaquePassEnabledForLayer()&&!E.constantOr(1)&&h.constantOr(u.aT.transparent).a===1&&p.constantOr(0)===1?"opaque":"translucent";if(R.renderPass===z){const F=R.depthModeForSublayer(1,R.renderPass==="opaque"?jn.ReadWrite:jn.ReadOnly);gr(R,q,a,o,F,v,!1)}if(R.renderPass==="translucent"&&a.paint.get("fill-antialias")){const F=R.depthModeForSublayer(a.getPaintProperty("fill-outline-color")?2:0,jn.ReadOnly);gr(R,q,a,o,F,v,!0)}})(r,d,k,I);break;case"fill-extrusion":(function(R,q,a,o){const h=a.paint.get("fill-extrusion-opacity");if(h!==0&&R.renderPass==="translucent"){const p=new jn(R.context.gl.LEQUAL,jn.ReadWrite,R.depthRangeFor3D);if(h!==1||a.paint.get("fill-extrusion-pattern").constantOr(1))ba(R,q,a,o,p,Er.disabled,Dr.disabled),ba(R,q,a,o,p,R.stencilModeFor3D(),R.colorModeForRenderPass());else{const v=R.colorModeForRenderPass();ba(R,q,a,o,p,Er.disabled,v)}}})(r,d,k,I);break;case"hillshade":(function(R,q,a,o){if(R.renderPass!=="offscreen"&&R.renderPass!=="translucent")return;const h=R.context,p=R.depthModeForSublayer(0,jn.ReadOnly),v=R.colorModeForRenderPass(),[E,z]=R.renderPass==="translucent"?R.stencilConfigForOverlap(o):[{},o];for(const F of z){const Y=q.getTile(F);Y.needsHillshadePrepare!==void 0&&Y.needsHillshadePrepare&&R.renderPass==="offscreen"?sr(R,Y,a,p,Er.disabled,v):R.renderPass==="translucent"&&go(R,F,Y,a,p,E[F.overscaledZ],v)}h.viewport.set([0,0,R.width,R.height])})(r,d,k,I);break;case"raster":(function(R,q,a,o){if(R.renderPass!=="translucent"||a.paint.get("raster-opacity")===0||!o.length)return;const h=R.context,p=h.gl,v=q.getSource(),E=R.useProgram("raster"),z=R.colorModeForRenderPass(),[F,Y]=v instanceof Li?[{},o]:R.stencilConfigForOverlap(o),J=Y[Y.length-1].overscaledZ,ve=!R.options.moving;for(const Ie of Y){const Oe=R.depthModeForSublayer(Ie.overscaledZ-J,a.paint.get("raster-opacity")===1?jn.ReadWrite:jn.ReadOnly,p.LESS),He=q.getTile(Ie);He.registerFadeDuration(a.paint.get("raster-fade-duration"));const We=q.findLoadedParent(Ie,0),st=Lr(He,We,q,a,R.transform,R.style.map.terrain);let wt,Et;const pt=a.paint.get("raster-resampling")==="nearest"?p.NEAREST:p.LINEAR;h.activeTexture.set(p.TEXTURE0),He.texture.bind(pt,p.CLAMP_TO_EDGE,p.LINEAR_MIPMAP_NEAREST),h.activeTexture.set(p.TEXTURE1),We?(We.texture.bind(pt,p.CLAMP_TO_EDGE,p.LINEAR_MIPMAP_NEAREST),wt=Math.pow(2,We.tileID.overscaledZ-He.tileID.overscaledZ),Et=[He.tileID.canonical.x*wt%1,He.tileID.canonical.y*wt%1]):He.texture.bind(pt,p.CLAMP_TO_EDGE,p.LINEAR_MIPMAP_NEAREST);const bt=R.style.map.terrain&&R.style.map.terrain.getTerrainData(Ie),St=bt?Ie:null,vi=St?St.posMatrix:R.transform.calculatePosMatrix(Ie.toUnwrapped(),ve),$t=Qt(vi,Et||[0,0],wt||1,st,a);v instanceof Li?E.draw(h,p.TRIANGLES,Oe,Er.disabled,z,Ir.disabled,$t,bt,a.id,v.boundsBuffer,R.quadTriangleIndexBuffer,v.boundsSegments):E.draw(h,p.TRIANGLES,Oe,F[Ie.overscaledZ],z,Ir.disabled,$t,bt,a.id,R.rasterBoundsBuffer,R.quadTriangleIndexBuffer,R.rasterBoundsSegments)}})(r,d,k,I);break;case"background":(function(R,q,a,o){const h=a.paint.get("background-color"),p=a.paint.get("background-opacity");if(p===0)return;const v=R.context,E=v.gl,z=R.transform,F=z.tileSize,Y=a.paint.get("background-pattern");if(R.isPatternMissing(Y))return;const J=!Y&&h.a===1&&p===1&&R.opaquePassEnabledForLayer()?"opaque":"translucent";if(R.renderPass!==J)return;const ve=Er.disabled,Ie=R.depthModeForSublayer(0,J==="opaque"?jn.ReadWrite:jn.ReadOnly),Oe=R.colorModeForRenderPass(),He=R.useProgram(Y?"backgroundPattern":"background"),We=o||z.coveringTiles({tileSize:F,terrain:R.style.map.terrain});Y&&(v.activeTexture.set(E.TEXTURE0),R.imageManager.bind(R.context));const st=a.getCrossfadeParameters();for(const wt of We){const Et=o?wt.posMatrix:R.transform.calculatePosMatrix(wt.toUnwrapped()),pt=Y?or(Et,p,R,Y,{tileID:wt,tileSize:F},st):Ln(Et,p,h),bt=R.style.map.terrain&&R.style.map.terrain.getTerrainData(wt);He.draw(v,E.TRIANGLES,Ie,ve,Oe,Ir.disabled,pt,bt,a.id,R.tileExtentBuffer,R.quadTriangleIndexBuffer,R.tileExtentSegments)}})(r,0,k,I);break;case"custom":(function(R,q,a){const o=R.context,h=a.implementation;if(R.renderPass==="offscreen"){const p=h.prerender;p&&(R.setCustomLayerDefaults(),o.setColorMode(R.colorModeForRenderPass()),p.call(h,o.gl,R.transform.customLayerMatrix()),o.setDirty(),R.setBaseState())}else if(R.renderPass==="translucent"){R.setCustomLayerDefaults(),o.setColorMode(R.colorModeForRenderPass()),o.setStencilMode(Er.disabled);const p=h.renderingMode==="3d"?new jn(R.context.gl.LEQUAL,jn.ReadWrite,R.depthRangeFor3D):R.depthModeForSublayer(0,jn.ReadOnly);o.setDepthMode(p),h.render(o.gl,R.transform.customLayerMatrix()),o.setDirty(),R.setBaseState(),o.bindFramebuffer.set(null)}})(r,0,k)}}translatePosMatrix(r,d,k,I,R){if(!k[0]&&!k[1])return r;const q=R?I==="map"?this.transform.angle:0:I==="viewport"?-this.transform.angle:0;if(q){const h=Math.sin(q),p=Math.cos(q);k=[k[0]*p-k[1]*h,k[0]*h+k[1]*p]}const a=[R?k[0]:Le(d,k[0],this.transform.zoom),R?k[1]:Le(d,k[1],this.transform.zoom),0],o=new Float32Array(16);return u.$(o,r,a),o}saveTileTexture(r){const d=this._tileTextures[r.size[0]];d?d.push(r):this._tileTextures[r.size[0]]=[r]}getTileTexture(r){const d=this._tileTextures[r];return d&&d.length>0?d.pop():null}isPatternMissing(r){if(!r)return!1;if(!r.from||!r.to)return!0;const d=this.imageManager.getPattern(r.from.toString()),k=this.imageManager.getPattern(r.to.toString());return!d||!k}useProgram(r,d){this.cache=this.cache||{};const k=r+(d?d.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[k]||(this.cache[k]=new ks(this.context,ht[r],d,na[r],this._showOverdrawInspector,this.style.map.terrain)),this.cache[k]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const r=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(r.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new gi(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:r,drawingBufferHeight:d}=this.context.gl;return this.width!==r||this.height!==d}}class xr{constructor(r,d){this.points=r,this.planes=d}static fromInvProjectionMatrix(r,d,k){const I=Math.pow(2,k),R=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(a=>{const o=1/(a=u.ag([],a,r))[3]/d*I;return u.b3(a,a,[o,o,1/a[3],o])}),q=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(a=>{const o=function(E,z){var F=z[0],Y=z[1],J=z[2],ve=F*F+Y*Y+J*J;return ve>0&&(ve=1/Math.sqrt(ve)),E[0]=z[0]*ve,E[1]=z[1]*ve,E[2]=z[2]*ve,E}([],function(E,z,F){var Y=z[0],J=z[1],ve=z[2],Ie=F[0],Oe=F[1],He=F[2];return E[0]=J*He-ve*Oe,E[1]=ve*Ie-Y*He,E[2]=Y*Oe-J*Ie,E}([],Te([],R[a[0]],R[a[1]]),Te([],R[a[2]],R[a[1]]))),h=-((p=o)[0]*(v=R[a[1]])[0]+p[1]*v[1]+p[2]*v[2]);var p,v;return o.concat(h)});return new xr(R,q)}}class Io{constructor(r,d){this.min=r,this.max=d,this.center=function(k,I,R){return k[0]=.5*I[0],k[1]=.5*I[1],k[2]=.5*I[2],k}([],function(k,I,R){return k[0]=I[0]+R[0],k[1]=I[1]+R[1],k[2]=I[2]+R[2],k}([],this.min,this.max))}quadrant(r){const d=[r%2==0,r<2],k=Mt(this.min),I=Mt(this.max);for(let R=0;R<d.length;R++)k[R]=d[R]?this.min[R]:this.center[R],I[R]=d[R]?this.center[R]:this.max[R];return I[2]=this.max[2],new Io(k,I)}distanceX(r){return Math.max(Math.min(this.max[0],r[0]),this.min[0])-r[0]}distanceY(r){return Math.max(Math.min(this.max[1],r[1]),this.min[1])-r[1]}intersects(r){const d=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let k=!0;for(let I=0;I<r.planes.length;I++){const R=r.planes[I];let q=0;for(let a=0;a<d.length;a++)u.b4(R,d[a])>=0&&q++;if(q===0)return 0;q!==d.length&&(k=!1)}if(k)return 2;for(let I=0;I<3;I++){let R=Number.MAX_VALUE,q=-Number.MAX_VALUE;for(let a=0;a<r.points.length;a++){const o=r.points[a][I]-this.min[I];R=Math.min(R,o),q=Math.max(q,o)}if(q<0||R>this.max[I]-this.min[I])return 0}return 1}}class oa{constructor(r=0,d=0,k=0,I=0){if(isNaN(r)||r<0||isNaN(d)||d<0||isNaN(k)||k<0||isNaN(I)||I<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=r,this.bottom=d,this.left=k,this.right=I}interpolate(r,d,k){return d.top!=null&&r.top!=null&&(this.top=u.B.number(r.top,d.top,k)),d.bottom!=null&&r.bottom!=null&&(this.bottom=u.B.number(r.bottom,d.bottom,k)),d.left!=null&&r.left!=null&&(this.left=u.B.number(r.left,d.left,k)),d.right!=null&&r.right!=null&&(this.right=u.B.number(r.right,d.right,k)),this}getCenter(r,d){const k=u.ad((this.left+r-this.right)/2,0,r),I=u.ad((this.top+d-this.bottom)/2,0,d);return new u.P(k,I)}equals(r){return this.top===r.top&&this.bottom===r.bottom&&this.left===r.left&&this.right===r.right}clone(){return new oa(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class hs{constructor(r,d,k,I,R){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=R===void 0||!!R,this._minZoom=r||0,this._maxZoom=d||22,this._minPitch=k??0,this._maxPitch=I??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new u.L(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new oa,this._posMatrixCache={},this._alignedPosMatrixCache={},this._minEleveationForCurrentTile=0}clone(){const r=new hs(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return r.apply(this),r}apply(r){this.tileSize=r.tileSize,this.latRange=r.latRange,this.width=r.width,this.height=r.height,this._center=r._center,this._elevation=r._elevation,this._minEleveationForCurrentTile=r._minEleveationForCurrentTile,this.zoom=r.zoom,this.angle=r.angle,this._fov=r._fov,this._pitch=r._pitch,this._unmodified=r._unmodified,this._edgeInsets=r._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(r){this._minZoom!==r&&(this._minZoom=r,this.zoom=Math.max(this.zoom,r))}get maxZoom(){return this._maxZoom}set maxZoom(r){this._maxZoom!==r&&(this._maxZoom=r,this.zoom=Math.min(this.zoom,r))}get minPitch(){return this._minPitch}set minPitch(r){this._minPitch!==r&&(this._minPitch=r,this.pitch=Math.max(this.pitch,r))}get maxPitch(){return this._maxPitch}set maxPitch(r){this._maxPitch!==r&&(this._maxPitch=r,this.pitch=Math.min(this.pitch,r))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(r){r===void 0?r=!0:r===null&&(r=!1),this._renderWorldCopies=r}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new u.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(r){const d=-u.b5(r,-180,180)*Math.PI/180;this.angle!==d&&(this._unmodified=!1,this.angle=d,this._calcMatrices(),this.rotationMatrix=function(){var k=new u.A(4);return u.A!=Float32Array&&(k[1]=0,k[2]=0),k[0]=1,k[3]=1,k}(),function(k,I,R){var q=I[0],a=I[1],o=I[2],h=I[3],p=Math.sin(R),v=Math.cos(R);k[0]=q*v+o*p,k[1]=a*v+h*p,k[2]=q*-p+o*v,k[3]=a*-p+h*v}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(r){const d=u.ad(r,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==d&&(this._unmodified=!1,this._pitch=d,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(r){r=Math.max(.01,Math.min(60,r)),this._fov!==r&&(this._unmodified=!1,this._fov=r/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(r){const d=Math.min(Math.max(r,this.minZoom),this.maxZoom);this._zoom!==d&&(this._unmodified=!1,this._zoom=d,this.tileZoom=Math.max(0,Math.floor(d)),this.scale=this.zoomScale(d),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(r){r.lat===this._center.lat&&r.lng===this._center.lng||(this._unmodified=!1,this._center=r,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(r){r!==this._elevation&&(this._elevation=r,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(r){this._edgeInsets.equals(r)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,r,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(r){return this._edgeInsets.equals(r)}interpolatePadding(r,d,k){this._unmodified=!1,this._edgeInsets.interpolate(r,d,k),this._constrain(),this._calcMatrices()}coveringZoomLevel(r){const d=(r.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/r.tileSize));return Math.max(0,d)}getVisibleUnwrappedCoordinates(r){const d=[new u.b6(0,r)];if(this._renderWorldCopies){const k=this.pointCoordinate(new u.P(0,0)),I=this.pointCoordinate(new u.P(this.width,0)),R=this.pointCoordinate(new u.P(this.width,this.height)),q=this.pointCoordinate(new u.P(0,this.height)),a=Math.floor(Math.min(k.x,I.x,R.x,q.x)),o=Math.floor(Math.max(k.x,I.x,R.x,q.x)),h=1;for(let p=a-h;p<=o+h;p++)p!==0&&d.push(new u.b6(p,r))}return d}coveringTiles(r){var d,k;let I=this.coveringZoomLevel(r);const R=I;if(r.minzoom!==void 0&&I<r.minzoom)return[];r.maxzoom!==void 0&&I>r.maxzoom&&(I=r.maxzoom);const q=this.pointCoordinate(this.getCameraPoint()),a=u.U.fromLngLat(this.center),o=Math.pow(2,I),h=[o*q.x,o*q.y,0],p=[o*a.x,o*a.y,0],v=xr.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,I);let E=r.minzoom||0;!r.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(E=I);const z=r.terrain?2/Math.min(this.tileSize,r.tileSize)*this.tileSize:3,F=Oe=>({aabb:new Io([Oe*o,0,0],[(Oe+1)*o,o,0]),zoom:0,x:0,y:0,wrap:Oe,fullyVisible:!1}),Y=[],J=[],ve=I,Ie=r.reparseOverscaled?R:I;if(this._renderWorldCopies)for(let Oe=1;Oe<=3;Oe++)Y.push(F(-Oe)),Y.push(F(Oe));for(Y.push(F(0));Y.length>0;){const Oe=Y.pop(),He=Oe.x,We=Oe.y;let st=Oe.fullyVisible;if(!st){const St=Oe.aabb.intersects(v);if(St===0)continue;st=St===2}const wt=r.terrain?h:p,Et=Oe.aabb.distanceX(wt),pt=Oe.aabb.distanceY(wt),bt=Math.max(Math.abs(Et),Math.abs(pt));if(Oe.zoom===ve||bt>z+(1<<ve-Oe.zoom)-2&&Oe.zoom>=E){const St=ve-Oe.zoom,vi=h[0]-.5-(He<<St),$t=h[1]-.5-(We<<St);J.push({tileID:new u.O(Oe.zoom===ve?Ie:Oe.zoom,Oe.wrap,Oe.zoom,He,We),distanceSq:Ai([p[0]-.5-He,p[1]-.5-We]),tileDistanceToCamera:Math.sqrt(vi*vi+$t*$t)})}else for(let St=0;St<4;St++){const vi=(He<<1)+St%2,$t=(We<<1)+(St>>1),ri=Oe.zoom+1;let ni=Oe.aabb.quadrant(St);if(r.terrain){const _n=new u.O(ri,Oe.wrap,ri,vi,$t),Ki=r.terrain.getMinMaxElevation(_n),Oi=(d=Ki.minElevation)!==null&&d!==void 0?d:this.elevation,Ui=(k=Ki.maxElevation)!==null&&k!==void 0?k:this.elevation;ni=new Io([ni.min[0],ni.min[1],Oi],[ni.max[0],ni.max[1],Ui])}Y.push({aabb:ni,zoom:ri,x:vi,y:$t,wrap:Oe.wrap,fullyVisible:st})}}return J.sort((Oe,He)=>Oe.distanceSq-He.distanceSq).map(Oe=>Oe.tileID)}resize(r,d){this.width=r,this.height=d,this.pixelsToGLUnits=[2/r,-2/d],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(r){return Math.pow(2,r)}scaleZoom(r){return Math.log(r)/Math.LN2}project(r){const d=u.ad(r.lat,-this.maxValidLatitude,this.maxValidLatitude);return new u.P(u.G(r.lng)*this.worldSize,u.H(d)*this.worldSize)}unproject(r){return new u.U(r.x/this.worldSize,r.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(r){const d=this.pointLocation(this.centerPoint,r),k=r.getElevationForLngLatZoom(d,this.tileZoom);if(!(this.elevation-k))return;const I=this.getCameraPosition(),R=u.U.fromLngLat(I.lngLat,I.altitude),q=u.U.fromLngLat(d,k),a=R.x-q.x,o=R.y-q.y,h=R.z-q.z,p=Math.sqrt(a*a+o*o+h*h),v=this.scaleZoom(this.cameraToCenterDistance/p/this.tileSize);this._elevation=k,this._center=d,this.zoom=v}setLocationAtPoint(r,d){const k=this.pointCoordinate(d),I=this.pointCoordinate(this.centerPoint),R=this.locationCoordinate(r),q=new u.U(R.x-(k.x-I.x),R.y-(k.y-I.y));this.center=this.coordinateLocation(q),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(r,d){return d?this.coordinatePoint(this.locationCoordinate(r),d.getElevationForLngLatZoom(r,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(r))}pointLocation(r,d){return this.coordinateLocation(this.pointCoordinate(r,d))}locationCoordinate(r){return u.U.fromLngLat(r)}coordinateLocation(r){return r&&r.toLngLat()}pointCoordinate(r,d){if(d){const E=d.pointCoordinate(r);if(E!=null)return E}const k=[r.x,r.y,0,1],I=[r.x,r.y,1,1];u.ag(k,k,this.pixelMatrixInverse),u.ag(I,I,this.pixelMatrixInverse);const R=k[3],q=I[3],a=k[1]/R,o=I[1]/q,h=k[2]/R,p=I[2]/q,v=h===p?0:(0-h)/(p-h);return new u.U(u.B.number(k[0]/R,I[0]/q,v)/this.worldSize,u.B.number(a,o,v)/this.worldSize)}coordinatePoint(r,d=0,k=this.pixelMatrix){const I=[r.x*this.worldSize,r.y*this.worldSize,d,1];return u.ag(I,I,k),new u.P(I[0]/I[3],I[1]/I[3])}getBounds(){const r=Math.max(0,this.height/2-this.getHorizon());return new Pi().extend(this.pointLocation(new u.P(0,r))).extend(this.pointLocation(new u.P(this.width,r))).extend(this.pointLocation(new u.P(this.width,this.height))).extend(this.pointLocation(new u.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new Pi([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(r){r?(this.lngRange=[r.getWest(),r.getEast()],this.latRange=[r.getSouth(),r.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(r,d=!1){const k=r.key,I=d?this._alignedPosMatrixCache:this._posMatrixCache;if(I[k])return I[k];const R=r.canonical,q=this.worldSize/this.zoomScale(R.z),a=R.x+Math.pow(2,R.z)*r.wrap,o=u.ao(new Float64Array(16));return u.$(o,o,[a*q,R.y*q,0]),u.a0(o,o,[q/u.N,q/u.N,1]),u.a1(o,d?this.alignedProjMatrix:this.projMatrix,o),I[k]=new Float32Array(o),I[k]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let r,d,k,I,R=-90,q=90,a=-180,o=180;const h=this.size,p=this._unmodified;if(this.latRange){const z=this.latRange;R=u.H(z[1])*this.worldSize,q=u.H(z[0])*this.worldSize,r=q-R<h.y?h.y/(q-R):0}if(this.lngRange){const z=this.lngRange;a=u.b5(u.G(z[0])*this.worldSize,0,this.worldSize),o=u.b5(u.G(z[1])*this.worldSize,0,this.worldSize),o<a&&(o+=this.worldSize),d=o-a<h.x?h.x/(o-a):0}const v=this.point,E=Math.max(d||0,r||0);if(E)return this.center=this.unproject(new u.P(d?(o+a)/2:v.x,r?(q+R)/2:v.y)),this.zoom+=this.scaleZoom(E),this._unmodified=p,void(this._constraining=!1);if(this.latRange){const z=v.y,F=h.y/2;z-F<R&&(I=R+F),z+F>q&&(I=q-F)}if(this.lngRange){const z=(a+o)/2,F=u.b5(v.x,z-this.worldSize/2,z+this.worldSize/2),Y=h.x/2;F-Y<a&&(k=a+Y),F+Y>o&&(k=o-Y)}k===void 0&&I===void 0||(this.center=this.unproject(new u.P(k!==void 0?k:v.x,I!==void 0?I:v.y)).wrap()),this._unmodified=p,this._constraining=!1}_calcMatrices(){if(!this.height)return;const r=this.centerOffset,d=this.point.x,k=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=u.b7(1,this.center.lat)*this.worldSize;let I=u.ao(new Float64Array(16));u.a0(I,I,[this.width/2,-this.height/2,1]),u.$(I,I,[1,-1,0]),this.labelPlaneMatrix=I,I=u.ao(new Float64Array(16)),u.a0(I,I,[1,-1,1]),u.$(I,I,[-1,-1,0]),u.a0(I,I,[2/this.width,2/this.height,1]),this.glCoordMatrix=I;const R=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),q=Math.min(this.elevation,this._minEleveationForCurrentTile),a=R-q*this._pixelPerMeter/Math.cos(this._pitch),o=q<0?a:R,h=Math.PI/2+this._pitch,p=this._fov*(.5+r.y/this.height),v=Math.sin(p)*o/Math.sin(u.ad(Math.PI-h-p,.01,Math.PI-.01)),E=this.getHorizon(),z=2*Math.atan(E/this.cameraToCenterDistance)*(.5+r.y/(2*E)),F=Math.sin(z)*o/Math.sin(u.ad(Math.PI-h-z,.01,Math.PI-.01)),Y=Math.min(v,F),J=1.01*(Math.cos(Math.PI/2-this._pitch)*Y+o),ve=this.height/50;I=new Float64Array(16),u.b8(I,this._fov,this.width/this.height,ve,J),I[8]=2*-r.x/this.width,I[9]=2*r.y/this.height,u.a0(I,I,[1,-1,1]),u.$(I,I,[0,0,-this.cameraToCenterDistance]),u.b9(I,I,this._pitch),u.ae(I,I,this.angle),u.$(I,I,[-d,-k,0]),this.mercatorMatrix=u.a0([],I,[this.worldSize,this.worldSize,this.worldSize]),u.a0(I,I,[1,1,this._pixelPerMeter]),this.pixelMatrix=u.a1(new Float64Array(16),this.labelPlaneMatrix,I),u.$(I,I,[0,0,-this.elevation]),this.projMatrix=I,this.invProjMatrix=u.as([],I),this.pixelMatrix3D=u.a1(new Float64Array(16),this.labelPlaneMatrix,I);const Ie=this.width%2/2,Oe=this.height%2/2,He=Math.cos(this.angle),We=Math.sin(this.angle),st=d-Math.round(d)+He*Ie+We*Oe,wt=k-Math.round(k)+He*Oe+We*Ie,Et=new Float64Array(I);if(u.$(Et,Et,[st>.5?st-1:st,wt>.5?wt-1:wt,0]),this.alignedProjMatrix=Et,I=u.as(new Float64Array(16),this.pixelMatrix),!I)throw new Error("failed to invert matrix");this.pixelMatrixInverse=I,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const r=this.pointCoordinate(new u.P(0,0)),d=[r.x*this.worldSize,r.y*this.worldSize,0,1];return u.ag(d,d,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const r=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new u.P(0,r))}getCameraQueryGeometry(r){const d=this.getCameraPoint();if(r.length===1)return[r[0],d];{let k=d.x,I=d.y,R=d.x,q=d.y;for(const a of r)k=Math.min(k,a.x),I=Math.min(I,a.y),R=Math.max(R,a.x),q=Math.max(q,a.y);return[new u.P(k,I),new u.P(R,I),new u.P(R,q),new u.P(k,q),new u.P(k,I)]}}}function ys(L,r){let d,k=!1,I=null,R=null;const q=()=>{I=null,k&&(L.apply(R,d),I=setTimeout(q,r),k=!1)};return(...a)=>(k=!0,R=this,d=a,I||q(),I)}class Ca{constructor(r){this._getCurrentHash=()=>{const d=window.location.hash.replace("#","");if(this._hashName){let k;return d.split("&").map(I=>I.split("=")).forEach(I=>{I[0]===this._hashName&&(k=I)}),(k&&k[1]||"").split("/")}return d.split("/")},this._onHashChange=()=>{const d=this._getCurrentHash();if(d.length>=3&&!d.some(k=>isNaN(k))){const k=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(d[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+d[2],+d[1]],zoom:+d[0],bearing:k,pitch:+(d[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const d=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,d)}catch{}},this._updateHash=ys(this._updateHashUnthrottled,300),this._hashName=r&&encodeURIComponent(r)}addTo(r){return this._map=r,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(r){const d=this._map.getCenter(),k=Math.round(100*this._map.getZoom())/100,I=Math.ceil((k*Math.LN2+Math.log(512/360/.5))/Math.LN10),R=Math.pow(10,I),q=Math.round(d.lng*R)/R,a=Math.round(d.lat*R)/R,o=this._map.getBearing(),h=this._map.getPitch();let p="";if(p+=r?`/${q}/${a}/${k}`:`${k}/${a}/${q}`,(o||h)&&(p+="/"+Math.round(10*o)/10),h&&(p+=`/${Math.round(h)}`),this._hashName){const v=this._hashName;let E=!1;const z=window.location.hash.slice(1).split("&").map(F=>{const Y=F.split("=")[0];return Y===v?(E=!0,`${Y}=${p}`):F}).filter(F=>F);return E||z.push(`${v}=${p}`),`#${z.join("&")}`}return`#${p}`}}const Na={linearity:.3,easing:u.ba(0,0,.3,1)},Zo=u.e({deceleration:2500,maxSpeed:1400},Na),XA=u.e({deceleration:20,maxSpeed:1400},Na),mo=u.e({deceleration:1e3,maxSpeed:360},Na),$s=u.e({deceleration:1e3,maxSpeed:90},Na);class Ot{constructor(r){this._map=r,this.clear()}clear(){this._inertiaBuffer=[]}record(r){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:u.h.now(),settings:r})}_drainInertiaBuffer(){const r=this._inertiaBuffer,d=u.h.now();for(;r.length>0&&d-r[0].time>160;)r.shift()}_onMoveEnd(r){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const d={zoom:0,bearing:0,pitch:0,pan:new u.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:R}of this._inertiaBuffer)d.zoom+=R.zoomDelta||0,d.bearing+=R.bearingDelta||0,d.pitch+=R.pitchDelta||0,R.panDelta&&d.pan._add(R.panDelta),R.around&&(d.around=R.around),R.pinchAround&&(d.pinchAround=R.pinchAround);const k=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,I={};if(d.pan.mag()){const R=Jt(d.pan.mag(),k,u.e({},Zo,r||{}));I.offset=d.pan.mult(R.amount/d.pan.mag()),I.center=this._map.transform.center,si(I,R)}if(d.zoom){const R=Jt(d.zoom,k,XA);I.zoom=this._map.transform.zoom+R.amount,si(I,R)}if(d.bearing){const R=Jt(d.bearing,k,mo);I.bearing=this._map.transform.bearing+u.ad(R.amount,-179,179),si(I,R)}if(d.pitch){const R=Jt(d.pitch,k,$s);I.pitch=this._map.transform.pitch+R.amount,si(I,R)}if(I.zoom||I.bearing){const R=d.pinchAround===void 0?d.around:d.pinchAround;I.around=R?this._map.unproject(R):this._map.getCenter()}return this.clear(),u.e(I,{noMoveStart:!0})}}function si(L,r){(!L.duration||L.duration<r.duration)&&(L.duration=r.duration,L.easing=r.easing)}function Jt(L,r,d){const{maxSpeed:k,linearity:I,deceleration:R}=d,q=u.ad(L*I/(r/1e3),-k,k),a=Math.abs(q)/(R*I);return{easing:d.easing,duration:1e3*a,amount:q*(a/2)}}class at extends u.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,d,k,I={}){const R=O.mousePos(d.getCanvasContainer(),k),q=d.unproject(R);super(r,u.e({point:R,lngLat:q,originalEvent:k},I)),this._defaultPrevented=!1,this.target=d}}class yt extends u.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,d,k){const I=r==="touchend"?k.changedTouches:k.touches,R=O.touchPos(d.getCanvasContainer(),I),q=R.map(o=>d.unproject(o)),a=R.reduce((o,h,p,v)=>o.add(h.div(v.length)),new u.P(0,0));super(r,{points:R,point:a,lngLats:q,lngLat:d.unproject(a),originalEvent:k}),this._defaultPrevented=!1}}class Gt extends u.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,d,k){super(r,{originalEvent:k}),this._defaultPrevented=!1}}class ai{constructor(r,d){this._map=r,this._clickTolerance=d.clickTolerance}reset(){delete this._mousedownPos}wheel(r){return this._firePreventable(new Gt(r.type,this._map,r))}mousedown(r,d){return this._mousedownPos=d,this._firePreventable(new at(r.type,this._map,r))}mouseup(r){this._map.fire(new at(r.type,this._map,r))}click(r,d){this._mousedownPos&&this._mousedownPos.dist(d)>=this._clickTolerance||this._map.fire(new at(r.type,this._map,r))}dblclick(r){return this._firePreventable(new at(r.type,this._map,r))}mouseover(r){this._map.fire(new at(r.type,this._map,r))}mouseout(r){this._map.fire(new at(r.type,this._map,r))}touchstart(r){return this._firePreventable(new yt(r.type,this._map,r))}touchmove(r){this._map.fire(new yt(r.type,this._map,r))}touchend(r){this._map.fire(new yt(r.type,this._map,r))}touchcancel(r){this._map.fire(new yt(r.type,this._map,r))}_firePreventable(r){if(this._map.fire(r),r.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Hi{constructor(r){this._map=r}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(r){this._map.fire(new at(r.type,this._map,r))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new at("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(r){this._delayContextMenu?this._contextMenuEvent=r:this._ignoreContextMenu||this._map.fire(new at(r.type,this._map,r)),this._map.listens("contextmenu")&&r.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class mn{constructor(r){this._map=r}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(r){return this.transform.pointLocation(u.P.convert(r),this._map.terrain)}}class Pn{constructor(r,d){this._map=r,this._tr=new mn(r),this._el=r.getCanvasContainer(),this._container=r.getContainer(),this._clickTolerance=d.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(r,d){this.isEnabled()&&r.shiftKey&&r.button===0&&(O.disableDrag(),this._startPos=this._lastPos=d,this._active=!0)}mousemoveWindow(r,d){if(!this._active)return;const k=d;if(this._lastPos.equals(k)||!this._box&&k.dist(this._startPos)<this._clickTolerance)return;const I=this._startPos;this._lastPos=k,this._box||(this._box=O.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",r));const R=Math.min(I.x,k.x),q=Math.max(I.x,k.x),a=Math.min(I.y,k.y),o=Math.max(I.y,k.y);O.setTransform(this._box,`translate(${R}px,${a}px)`),this._box.style.width=q-R+"px",this._box.style.height=o-a+"px"}mouseupWindow(r,d){if(!this._active||r.button!==0)return;const k=this._startPos,I=d;if(this.reset(),O.suppressClick(),k.x!==I.x||k.y!==I.y)return this._map.fire(new u.k("boxzoomend",{originalEvent:r})),{cameraAnimation:R=>R.fitScreenCoordinates(k,I,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",r)}keydown(r){this._active&&r.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",r))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(O.remove(this._box),this._box=null),O.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(r,d){return this._map.fire(new u.k(r,{originalEvent:d}))}}function xn(L,r){if(L.length!==r.length)throw new Error(`The number of touches and points are not equal - touches ${L.length}, points ${r.length}`);const d={};for(let k=0;k<L.length;k++)d[L[k].identifier]=r[k];return d}class jr{constructor(r){this.reset(),this.numTouches=r.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(r,d,k){(this.centroid||k.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=r.timeStamp),k.length===this.numTouches&&(this.centroid=function(I){const R=new u.P(0,0);for(const q of I)R._add(q);return R.div(I.length)}(d),this.touches=xn(k,d)))}touchmove(r,d,k){if(this.aborted||!this.centroid)return;const I=xn(k,d);for(const R in this.touches){const q=I[R];(!q||q.dist(this.touches[R])>30)&&(this.aborted=!0)}}touchend(r,d,k){if((!this.centroid||r.timeStamp-this.startTime>500)&&(this.aborted=!0),k.length===0){const I=!this.aborted&&this.centroid;if(this.reset(),I)return I}}}class xs{constructor(r){this.singleTap=new jr(r),this.numTaps=r.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(r,d,k){this.singleTap.touchstart(r,d,k)}touchmove(r,d,k){this.singleTap.touchmove(r,d,k)}touchend(r,d,k){const I=this.singleTap.touchend(r,d,k);if(I){const R=r.timeStamp-this.lastTime<500,q=!this.lastTap||this.lastTap.dist(I)<30;if(R&&q||this.reset(),this.count++,this.lastTime=r.timeStamp,this.lastTap=I,this.count===this.numTaps)return this.reset(),I}}}class Is{constructor(r){this._tr=new mn(r),this._zoomIn=new xs({numTouches:1,numTaps:2}),this._zoomOut=new xs({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(r,d,k){this._zoomIn.touchstart(r,d,k),this._zoomOut.touchstart(r,d,k)}touchmove(r,d,k){this._zoomIn.touchmove(r,d,k),this._zoomOut.touchmove(r,d,k)}touchend(r,d,k){const I=this._zoomIn.touchend(r,d,k),R=this._zoomOut.touchend(r,d,k),q=this._tr;return I?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:a=>a.easeTo({duration:300,zoom:q.zoom+1,around:q.unproject(I)},{originalEvent:r})}):R?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:a=>a.easeTo({duration:300,zoom:q.zoom-1,around:q.unproject(R)},{originalEvent:r})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Vs{constructor(r){this._enabled=!!r.enable,this._moveStateManager=r.moveStateManager,this._clickTolerance=r.clickTolerance||1,this._moveFunction=r.move,this._activateOnStart=!!r.activateOnStart,r.assignEvents(this),this.reset()}reset(r){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(r)}_move(...r){const d=this._moveFunction(...r);if(d.bearingDelta||d.pitchDelta||d.around||d.panDelta)return this._active=!0,d}dragStart(r,d){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(r)&&(this._moveStateManager.startMove(r),this._lastPoint=d.length?d[0]:d,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(r,d){if(!this.isEnabled())return;const k=this._lastPoint;if(!k)return;if(r.preventDefault(),!this._moveStateManager.isValidMoveEvent(r))return void this.reset(r);const I=d.length?d[0]:d;return!this._moved&&I.dist(k)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=I,this._move(k,I))}dragEnd(r){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(r)&&(this._moved&&O.suppressClick(),this.reset(r))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const EA={0:1,2:2};class Pr{constructor(r){this._correctEvent=r.checkCorrectEvent}startMove(r){const d=O.mouseButton(r);this._eventButton=d}endMove(r){delete this._eventButton}isValidStartEvent(r){return this._correctEvent(r)}isValidMoveEvent(r){return!function(d,k){const I=EA[k];return d.buttons===void 0||(d.buttons&I)!==I}(r,this._eventButton)}isValidEndEvent(r){return O.mouseButton(r)===this._eventButton}}class Jl{constructor(){this._firstTouch=void 0}_isOneFingerTouch(r){return r.targetTouches.length===1}_isSameTouchEvent(r){return r.targetTouches[0].identifier===this._firstTouch}startMove(r){this._firstTouch=r.targetTouches[0].identifier}endMove(r){delete this._firstTouch}isValidStartEvent(r){return this._isOneFingerTouch(r)}isValidMoveEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}isValidEndEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}}const KA=L=>{L.mousedown=L.dragStart,L.mousemoveWindow=L.dragMove,L.mouseup=L.dragEnd,L.contextmenu=function(r){r.preventDefault()}},ka=({enable:L,clickTolerance:r,bearingDegreesPerPixelMoved:d=.8})=>{const k=new Pr({checkCorrectEvent:I=>O.mouseButton(I)===0&&I.ctrlKey||O.mouseButton(I)===2});return new Vs({clickTolerance:r,move:(I,R)=>({bearingDelta:(R.x-I.x)*d}),moveStateManager:k,enable:L,assignEvents:KA})},_o=({enable:L,clickTolerance:r,pitchDegreesPerPixelMoved:d=-.5})=>{const k=new Pr({checkCorrectEvent:I=>O.mouseButton(I)===0&&I.ctrlKey||O.mouseButton(I)===2});return new Vs({clickTolerance:r,move:(I,R)=>({pitchDelta:(R.y-I.y)*d}),moveStateManager:k,enable:L,assignEvents:KA})};class Zi{constructor(r,d){this._minTouches=r.cooperativeGestures?2:1,this._clickTolerance=r.clickTolerance||1,this._map=d,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new u.P(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(r,d,k){return this._calculateTransform(r,d,k)}touchmove(r,d,k){if(this._map._cooperativeGestures&&(this._minTouches===2&&k.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(r,!1,k.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(k.length<this._minTouches))return r.preventDefault(),this._calculateTransform(r,d,k)}touchend(r,d,k){this._calculateTransform(r,d,k),this._active&&k.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(r,d,k){k.length>0&&(this._active=!0);const I=xn(k,d),R=new u.P(0,0),q=new u.P(0,0);let a=0;for(const h in I){const p=I[h],v=this._touches[h];v&&(R._add(p),q._add(p.sub(v)),a++,I[h]=p)}if(this._touches=I,a<this._minTouches||!q.mag())return;const o=q.div(a);return this._sum._add(o),this._sum.mag()<this._clickTolerance?void 0:{around:R.div(a),panDelta:o}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Va{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(r,d,k){this._firstTwoTouches||k.length<2||(this._firstTwoTouches=[k[0].identifier,k[1].identifier],this._start([d[0],d[1]]))}touchmove(r,d,k){if(!this._firstTwoTouches)return;r.preventDefault();const[I,R]=this._firstTwoTouches,q=Ua(k,d,I),a=Ua(k,d,R);if(!q||!a)return;const o=this._aroundCenter?null:q.add(a).div(2);return this._move([q,a],o,r)}touchend(r,d,k){if(!this._firstTwoTouches)return;const[I,R]=this._firstTwoTouches,q=Ua(k,d,I),a=Ua(k,d,R);q&&a||(this._active&&O.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(r){this._enabled=!0,this._aroundCenter=!!r&&r.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Ua(L,r,d){for(let k=0;k<L.length;k++)if(L[k].identifier===d)return r[k]}function Ea(L,r){return Math.log(L/r)/Math.LN2}class JA extends Va{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(r){this._startDistance=this._distance=r[0].dist(r[1])}_move(r,d){const k=this._distance;if(this._distance=r[0].dist(r[1]),this._active||!(Math.abs(Ea(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Ea(this._distance,k),pinchAround:d}}}function Vi(L,r){return 180*L.angleWith(r)/Math.PI}class IA extends Va{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(r){this._startVector=this._vector=r[0].sub(r[1]),this._minDiameter=r[0].dist(r[1])}_move(r,d){const k=this._vector;if(this._vector=r[0].sub(r[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Vi(this._vector,k),pinchAround:d}}_isBelowThreshold(r){this._minDiameter=Math.min(this._minDiameter,r.mag());const d=25/(Math.PI*this._minDiameter)*360,k=Vi(r,this._startVector);return Math.abs(k)<d}}function fl(L){return Math.abs(L.y)>Math.abs(L.x)}class Mo extends Va{constructor(r){super(),this._map=r}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(r,d,k){super.touchstart(r,d,k),this._currentTouchCount=k.length}_start(r){this._lastPoints=r,fl(r[0].sub(r[1]))&&(this._valid=!1)}_move(r,d,k){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const I=r[0].sub(this._lastPoints[0]),R=r[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(I,R,k.timeStamp),this._valid?(this._lastPoints=r,this._active=!0,{pitchDelta:(I.y+R.y)/2*-.5}):void 0}gestureBeginsVertically(r,d,k){if(this._valid!==void 0)return this._valid;const I=r.mag()>=2,R=d.mag()>=2;if(!I&&!R)return;if(!I||!R)return this._firstMove===void 0&&(this._firstMove=k),k-this._firstMove<100&&void 0;const q=r.y>0==d.y>0;return fl(r)&&fl(d)&&q}}const sA={panStep:100,bearingStep:15,pitchStep:10};class dl{constructor(r){this._tr=new mn(r);const d=sA;this._panStep=d.panStep,this._bearingStep=d.bearingStep,this._pitchStep=d.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(r){if(r.altKey||r.ctrlKey||r.metaKey)return;let d=0,k=0,I=0,R=0,q=0;switch(r.keyCode){case 61:case 107:case 171:case 187:d=1;break;case 189:case 109:case 173:d=-1;break;case 37:r.shiftKey?k=-1:(r.preventDefault(),R=-1);break;case 39:r.shiftKey?k=1:(r.preventDefault(),R=1);break;case 38:r.shiftKey?I=1:(r.preventDefault(),q=-1);break;case 40:r.shiftKey?I=-1:(r.preventDefault(),q=1);break;default:return}return this._rotationDisabled&&(k=0,I=0),{cameraAnimation:a=>{const o=this._tr;a.easeTo({duration:300,easeId:"keyboardHandler",easing:aA,zoom:d?Math.round(o.zoom)+d*(r.shiftKey?2:1):o.zoom,bearing:o.bearing+k*this._bearingStep,pitch:o.pitch+I*this._pitchStep,offset:[-R*this._panStep,-q*this._panStep],center:o.center},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function aA(L){return L*(2-L)}const To=4.000244140625;class ls{constructor(r,d){this._onTimeout=k=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(k)},this._map=r,this._tr=new mn(r),this._el=r.getCanvasContainer(),this._triggerRenderFrame=d,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(r){this._defaultZoomRate=r}setWheelZoomRate(r){this._wheelZoomRate=r}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(r){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!r&&r.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(r){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!r[this._map._metaKey])return;r.preventDefault()}let d=r.deltaMode===WheelEvent.DOM_DELTA_LINE?40*r.deltaY:r.deltaY;const k=u.h.now(),I=k-(this._lastWheelEventTime||0);this._lastWheelEventTime=k,d!==0&&d%To==0?this._type="wheel":d!==0&&Math.abs(d)<4?this._type="trackpad":I>400?(this._type=null,this._lastValue=d,this._timeout=setTimeout(this._onTimeout,40,r)):this._type||(this._type=Math.abs(I*d)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,d+=this._lastValue)),r.shiftKey&&d&&(d/=4),this._type&&(this._lastWheelEvent=r,this._delta-=d,this._active||this._start(r)),r.preventDefault()}_start(r){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const d=O.mousePos(this._el,r),k=this._tr;this._around=u.L.convert(this._aroundCenter?k.center:k.unproject(d)),this._aroundPoint=k.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const r=this._tr.transform;if(this._delta!==0){const a=this._type==="wheel"&&Math.abs(this._delta)>To?this._wheelZoomRate:this._defaultZoomRate;let o=2/(1+Math.exp(-Math.abs(this._delta*a)));this._delta<0&&o!==0&&(o=1/o);const h=typeof this._targetZoom=="number"?r.zoomScale(this._targetZoom):r.scale;this._targetZoom=Math.min(r.maxZoom,Math.max(r.minZoom,r.scaleZoom(h*o))),this._type==="wheel"&&(this._startZoom=r.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const d=typeof this._targetZoom=="number"?this._targetZoom:r.zoom,k=this._startZoom,I=this._easing;let R,q=!1;if(this._type==="wheel"&&k&&I){const a=Math.min((u.h.now()-this._lastWheelEventTime)/200,1),o=I(a);R=u.B.number(k,d,o),a<1?this._frameId||(this._frameId=!0):q=!0}else R=d,q=!0;return this._active=!0,q&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!q,zoomDelta:R-r.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(r){let d=u.bb;if(this._prevEase){const k=this._prevEase,I=(u.h.now()-k.start)/k.duration,R=k.easing(I+.01)-k.easing(I),q=.27/Math.sqrt(R*R+1e-4)*.01,a=Math.sqrt(.0729-q*q);d=u.ba(q,a,.25,1)}return this._prevEase={start:u.h.now(),duration:r,easing:d},d}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class El{constructor(r,d){this._clickZoom=r,this._tapZoom=d}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Il{constructor(r){this._tr=new mn(r),this.reset()}reset(){this._active=!1}dblclick(r,d){return r.preventDefault(),{cameraAnimation:k=>{k.easeTo({duration:300,zoom:this._tr.zoom+(r.shiftKey?-1:1),around:this._tr.unproject(d)},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ml{constructor(){this._tap=new xs({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(r,d,k){if(!this._swipePoint)if(this._tapTime){const I=d[0],R=r.timeStamp-this._tapTime<500,q=this._tapPoint.dist(I)<30;R&&q?k.length>0&&(this._swipePoint=I,this._swipeTouch=k[0].identifier):this.reset()}else this._tap.touchstart(r,d,k)}touchmove(r,d,k){if(this._tapTime){if(this._swipePoint){if(k[0].identifier!==this._swipeTouch)return;const I=d[0],R=I.y-this._swipePoint.y;return this._swipePoint=I,r.preventDefault(),this._active=!0,{zoomDelta:R/128}}}else this._tap.touchmove(r,d,k)}touchend(r,d,k){if(this._tapTime)this._swipePoint&&k.length===0&&this.reset();else{const I=this._tap.touchend(r,d,k);I&&(this._tapTime=r.timeStamp,this._tapPoint=I)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class oA{constructor(r,d,k){this._el=r,this._mousePan=d,this._touchPan=k}enable(r){this._inertiaOptions=r||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Fs{constructor(r,d,k){this._pitchWithRotate=r.pitchWithRotate,this._mouseRotate=d,this._mousePitch=k}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class to{constructor(r,d,k,I){this._el=r,this._touchZoom=d,this._touchRotate=k,this._tapDragZoom=I,this._rotationDisabled=!1,this._enabled=!0}enable(r){this._touchZoom.enable(r),this._rotationDisabled||this._touchRotate.enable(r),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const MA=L=>L.zoom||L.drag||L.pitch||L.rotate;class pl extends u.k{}function TA(L){return L.panDelta&&L.panDelta.mag()||L.zoomDelta||L.bearingDelta||L.pitchDelta}class gl{constructor(r,d){this.handleWindowEvent=I=>{this.handleEvent(I,`${I.type}Window`)},this.handleEvent=(I,R)=>{if(I.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const q=I.type==="renderFrame"?void 0:I,a={needsRenderFrame:!1},o={},h={},p=I.touches,v=p?this._getMapTouches(p):void 0,E=v?O.touchPos(this._el,v):O.mousePos(this._el,I);for(const{handlerName:Y,handler:J,allowed:ve}of this._handlers){if(!J.isEnabled())continue;let Ie;this._blockedByActive(h,ve,Y)?J.reset():J[R||I.type]&&(Ie=J[R||I.type](I,E,v),this.mergeHandlerResult(a,o,Ie,Y,q),Ie&&Ie.needsRenderFrame&&this._triggerRenderFrame()),(Ie||J.isActive())&&(h[Y]=J)}const z={};for(const Y in this._previousActiveHandlers)h[Y]||(z[Y]=q);this._previousActiveHandlers=h,(Object.keys(z).length||TA(a))&&(this._changes.push([a,o,z]),this._triggerRenderFrame()),(Object.keys(h).length||TA(a))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:F}=a;F&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],F(this._map))},this._map=r,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Ot(r),this._bearingSnap=d.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(d);const k=this._el;this._listeners=[[k,"touchstart",{passive:!0}],[k,"touchmove",{passive:!1}],[k,"touchend",void 0],[k,"touchcancel",void 0],[k,"mousedown",void 0],[k,"mousemove",void 0],[k,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[k,"mouseover",void 0],[k,"mouseout",void 0],[k,"dblclick",void 0],[k,"click",void 0],[k,"keydown",{capture:!1}],[k,"keyup",void 0],[k,"wheel",{passive:!1}],[k,"contextmenu",void 0],[window,"blur",void 0]];for(const[I,R,q]of this._listeners)O.addEventListener(I,R,I===document?this.handleWindowEvent:this.handleEvent,q)}destroy(){for(const[r,d,k]of this._listeners)O.removeEventListener(r,d,r===document?this.handleWindowEvent:this.handleEvent,k)}_addDefaultHandlers(r){const d=this._map,k=d.getCanvasContainer();this._add("mapEvent",new ai(d,r));const I=d.boxZoom=new Pn(d,r);this._add("boxZoom",I),r.interactive&&r.boxZoom&&I.enable();const R=new Is(d),q=new Il(d);d.doubleClickZoom=new El(q,R),this._add("tapZoom",R),this._add("clickZoom",q),r.interactive&&r.doubleClickZoom&&d.doubleClickZoom.enable();const a=new Ml;this._add("tapDragZoom",a);const o=d.touchPitch=new Mo(d);this._add("touchPitch",o),r.interactive&&r.touchPitch&&d.touchPitch.enable(r.touchPitch);const h=ka(r),p=_o(r);d.dragRotate=new Fs(r,h,p),this._add("mouseRotate",h,["mousePitch"]),this._add("mousePitch",p,["mouseRotate"]),r.interactive&&r.dragRotate&&d.dragRotate.enable();const v=(({enable:ve,clickTolerance:Ie})=>{const Oe=new Pr({checkCorrectEvent:He=>O.mouseButton(He)===0&&!He.ctrlKey});return new Vs({clickTolerance:Ie,move:(He,We)=>({around:We,panDelta:We.sub(He)}),activateOnStart:!0,moveStateManager:Oe,enable:ve,assignEvents:KA})})(r),E=new Zi(r,d);d.dragPan=new oA(k,v,E),this._add("mousePan",v),this._add("touchPan",E,["touchZoom","touchRotate"]),r.interactive&&r.dragPan&&d.dragPan.enable(r.dragPan);const z=new IA,F=new JA;d.touchZoomRotate=new to(k,F,z,a),this._add("touchRotate",z,["touchPan","touchZoom"]),this._add("touchZoom",F,["touchPan","touchRotate"]),r.interactive&&r.touchZoomRotate&&d.touchZoomRotate.enable(r.touchZoomRotate);const Y=d.scrollZoom=new ls(d,()=>this._triggerRenderFrame());this._add("scrollZoom",Y,["mousePan"]),r.interactive&&r.scrollZoom&&d.scrollZoom.enable(r.scrollZoom);const J=d.keyboard=new dl(d);this._add("keyboard",J),r.interactive&&r.keyboard&&d.keyboard.enable(),this._add("blockableMapEvent",new Hi(d))}_add(r,d,k){this._handlers.push({handlerName:r,handler:d,allowed:k}),this._handlersById[r]=d}stop(r){if(!this._updatingCamera){for(const{handler:d}of this._handlers)d.reset();this._inertia.clear(),this._fireEvents({},{},r),this._changes=[]}}isActive(){for(const{handler:r}of this._handlers)if(r.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!MA(this._eventsInProgress)||this.isZooming()}_blockedByActive(r,d,k){for(const I in r)if(I!==k&&(!d||d.indexOf(I)<0))return!0;return!1}_getMapTouches(r){const d=[];for(const k of r)this._el.contains(k.target)&&d.push(k);return d}mergeHandlerResult(r,d,k,I,R){if(!k)return;u.e(r,k);const q={handlerName:I,originalEvent:k.originalEvent||R};k.zoomDelta!==void 0&&(d.zoom=q),k.panDelta!==void 0&&(d.drag=q),k.pitchDelta!==void 0&&(d.pitch=q),k.bearingDelta!==void 0&&(d.rotate=q)}_applyChanges(){const r={},d={},k={};for(const[I,R,q]of this._changes)I.panDelta&&(r.panDelta=(r.panDelta||new u.P(0,0))._add(I.panDelta)),I.zoomDelta&&(r.zoomDelta=(r.zoomDelta||0)+I.zoomDelta),I.bearingDelta&&(r.bearingDelta=(r.bearingDelta||0)+I.bearingDelta),I.pitchDelta&&(r.pitchDelta=(r.pitchDelta||0)+I.pitchDelta),I.around!==void 0&&(r.around=I.around),I.pinchAround!==void 0&&(r.pinchAround=I.pinchAround),I.noInertia&&(r.noInertia=I.noInertia),u.e(d,R),u.e(k,q);this._updateMapTransform(r,d,k),this._changes=[]}_updateMapTransform(r,d,k){const I=this._map,R=I._getTransformForUpdate(),q=I.terrain;if(!(TA(r)||q&&this._terrainMovement))return this._fireEvents(d,k,!0);let{panDelta:a,zoomDelta:o,bearingDelta:h,pitchDelta:p,around:v,pinchAround:E}=r;E!==void 0&&(v=E),I._stop(!0),v=v||I.transform.centerPoint;const z=R.pointLocation(a?v.sub(a):v);h&&(R.bearing+=h),p&&(R.pitch+=p),o&&(R.zoom+=o),q?this._terrainMovement||!d.drag&&!d.zoom?d.drag&&this._terrainMovement?R.center=R.pointLocation(R.centerPoint.sub(a)):R.setLocationAtPoint(z,v):(this._terrainMovement=!0,this._map._elevationFreeze=!0,R.setLocationAtPoint(z,v),this._map.once("moveend",()=>{this._map._elevationFreeze=!1,this._terrainMovement=!1,R.recalculateZoom(I.terrain)})):R.setLocationAtPoint(z,v),I._applyUpdatedTransform(R),this._map._update(),r.noInertia||this._inertia.record(r),this._fireEvents(d,k,!0)}_fireEvents(r,d,k){const I=MA(this._eventsInProgress),R=MA(r),q={};for(const p in r){const{originalEvent:v}=r[p];this._eventsInProgress[p]||(q[`${p}start`]=v),this._eventsInProgress[p]=r[p]}!I&&R&&this._fireEvent("movestart",R.originalEvent);for(const p in q)this._fireEvent(p,q[p]);R&&this._fireEvent("move",R.originalEvent);for(const p in r){const{originalEvent:v}=r[p];this._fireEvent(p,v)}const a={};let o;for(const p in this._eventsInProgress){const{handlerName:v,originalEvent:E}=this._eventsInProgress[p];this._handlersById[v].isActive()||(delete this._eventsInProgress[p],o=d[v]||E,a[`${p}end`]=o)}for(const p in a)this._fireEvent(p,a[p]);const h=MA(this._eventsInProgress);if(k&&(I||R)&&!h){this._updatingCamera=!0;const p=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),v=E=>E!==0&&-this._bearingSnap<E&&E<this._bearingSnap;!p||!p.essential&&u.h.prefersReducedMotion?(this._map.fire(new u.k("moveend",{originalEvent:o})),v(this._map.getBearing())&&this._map.resetNorth()):(v(p.bearing||this._map.getBearing())&&(p.bearing=0),p.freezeElevation=!0,this._map.easeTo(p,{originalEvent:o})),this._updatingCamera=!1}}_fireEvent(r,d){this._map.fire(new u.k(r,d?{originalEvent:d}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(r=>{delete this._frameId,this.handleEvent(new pl("renderFrame",{timeStamp:r})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class Xn extends u.E{constructor(r,d){super(),this._renderFrameCallback=()=>{const k=Math.min((u.h.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(k)),k<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=r,this._bearingSnap=d.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new u.L(this.transform.center.lng,this.transform.center.lat)}setCenter(r,d){return this.jumpTo({center:r},d)}panBy(r,d,k){return r=u.P.convert(r).mult(-1),this.panTo(this.transform.center,u.e({offset:r},d),k)}panTo(r,d,k){return this.easeTo(u.e({center:r},d),k)}getZoom(){return this.transform.zoom}setZoom(r,d){return this.jumpTo({zoom:r},d),this}zoomTo(r,d,k){return this.easeTo(u.e({zoom:r},d),k)}zoomIn(r,d){return this.zoomTo(this.getZoom()+1,r,d),this}zoomOut(r,d){return this.zoomTo(this.getZoom()-1,r,d),this}getBearing(){return this.transform.bearing}setBearing(r,d){return this.jumpTo({bearing:r},d),this}getPadding(){return this.transform.padding}setPadding(r,d){return this.jumpTo({padding:r},d),this}rotateTo(r,d,k){return this.easeTo(u.e({bearing:r},d),k)}resetNorth(r,d){return this.rotateTo(0,u.e({duration:1e3},r),d),this}resetNorthPitch(r,d){return this.easeTo(u.e({bearing:0,pitch:0,duration:1e3},r),d),this}snapToNorth(r,d){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(r,d):this}getPitch(){return this.transform.pitch}setPitch(r,d){return this.jumpTo({pitch:r},d),this}cameraForBounds(r,d){r=Pi.convert(r);const k=d&&d.bearing||0;return this._cameraForBoxAndBearing(r.getNorthWest(),r.getSouthEast(),k,d)}_cameraForBoxAndBearing(r,d,k,I){const R={top:0,bottom:0,right:0,left:0};if(typeof(I=u.e({padding:R,offset:[0,0],maxZoom:this.transform.maxZoom},I)).padding=="number"){const We=I.padding;I.padding={top:We,bottom:We,right:We,left:We}}I.padding=u.e(R,I.padding);const q=this.transform,a=q.padding,o=q.project(u.L.convert(r)),h=q.project(u.L.convert(d)),p=o.rotate(-k*Math.PI/180),v=h.rotate(-k*Math.PI/180),E=new u.P(Math.max(p.x,v.x),Math.max(p.y,v.y)),z=new u.P(Math.min(p.x,v.x),Math.min(p.y,v.y)),F=E.sub(z),Y=(q.width-(a.left+a.right+I.padding.left+I.padding.right))/F.x,J=(q.height-(a.top+a.bottom+I.padding.top+I.padding.bottom))/F.y;if(J<0||Y<0)return void u.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const ve=Math.min(q.scaleZoom(q.scale*Math.min(Y,J)),I.maxZoom),Ie=u.P.convert(I.offset),Oe=new u.P((I.padding.left-I.padding.right)/2,(I.padding.top-I.padding.bottom)/2).rotate(k*Math.PI/180),He=Ie.add(Oe).mult(q.scale/q.zoomScale(ve));return{center:q.unproject(o.add(h).div(2).sub(He)),zoom:ve,bearing:k}}fitBounds(r,d,k){return this._fitInternal(this.cameraForBounds(r,d),d,k)}fitScreenCoordinates(r,d,k,I,R){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(u.P.convert(r)),this.transform.pointLocation(u.P.convert(d)),k,I),I,R)}_fitInternal(r,d,k){return r?(delete(d=u.e(r,d)).padding,d.linear?this.easeTo(d,k):this.flyTo(d,k)):this}jumpTo(r,d){this.stop();const k=this._getTransformForUpdate();let I=!1,R=!1,q=!1;return"zoom"in r&&k.zoom!==+r.zoom&&(I=!0,k.zoom=+r.zoom),r.center!==void 0&&(k.center=u.L.convert(r.center)),"bearing"in r&&k.bearing!==+r.bearing&&(R=!0,k.bearing=+r.bearing),"pitch"in r&&k.pitch!==+r.pitch&&(q=!0,k.pitch=+r.pitch),r.padding==null||k.isPaddingEqual(r.padding)||(k.padding=r.padding),this._applyUpdatedTransform(k),this.fire(new u.k("movestart",d)).fire(new u.k("move",d)),I&&this.fire(new u.k("zoomstart",d)).fire(new u.k("zoom",d)).fire(new u.k("zoomend",d)),R&&this.fire(new u.k("rotatestart",d)).fire(new u.k("rotate",d)).fire(new u.k("rotateend",d)),q&&this.fire(new u.k("pitchstart",d)).fire(new u.k("pitch",d)).fire(new u.k("pitchend",d)),this.fire(new u.k("moveend",d))}calculateCameraOptionsFromTo(r,d,k,I=0){const R=u.U.fromLngLat(r,d),q=u.U.fromLngLat(k,I),a=q.x-R.x,o=q.y-R.y,h=q.z-R.z,p=Math.hypot(a,o,h);if(p===0)throw new Error("Can't calculate camera options with same From and To");const v=Math.hypot(a,o),E=this.transform.scaleZoom(this.transform.cameraToCenterDistance/p/this.transform.tileSize),z=180*Math.atan2(a,-o)/Math.PI;let F=180*Math.acos(v/p)/Math.PI;return F=h<0?90-F:90+F,{center:q.toLngLat(),zoom:E,pitch:F,bearing:z}}easeTo(r,d){this._stop(!1,r.easeId),((r=u.e({offset:[0,0],duration:500,easing:u.bb},r)).animate===!1||!r.essential&&u.h.prefersReducedMotion)&&(r.duration=0);const k=this._getTransformForUpdate(),I=this.getZoom(),R=this.getBearing(),q=this.getPitch(),a=this.getPadding(),o="zoom"in r?+r.zoom:I,h="bearing"in r?this._normalizeBearing(r.bearing,R):R,p="pitch"in r?+r.pitch:q,v="padding"in r?r.padding:k.padding,E=u.P.convert(r.offset);let z=k.centerPoint.add(E);const F=k.pointLocation(z),Y=u.L.convert(r.center||F);this._normalizeCenter(Y);const J=k.project(F),ve=k.project(Y).sub(J),Ie=k.zoomScale(o-I);let Oe,He;r.around&&(Oe=u.L.convert(r.around),He=k.locationPoint(Oe));const We={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||o!==I,this._rotating=this._rotating||R!==h,this._pitching=this._pitching||p!==q,this._padding=!k.isPaddingEqual(v),this._easeId=r.easeId,this._prepareEase(d,r.noMoveStart,We),this.terrain&&this._prepareElevation(Y),this._ease(st=>{if(this._zooming&&(k.zoom=u.B.number(I,o,st)),this._rotating&&(k.bearing=u.B.number(R,h,st)),this._pitching&&(k.pitch=u.B.number(q,p,st)),this._padding&&(k.interpolatePadding(a,v,st),z=k.centerPoint.add(E)),this.terrain&&!r.freezeElevation&&this._updateElevation(st),Oe)k.setLocationAtPoint(Oe,He);else{const wt=k.zoomScale(k.zoom-I),Et=o>I?Math.min(2,Ie):Math.max(.5,Ie),pt=Math.pow(Et,1-st),bt=k.unproject(J.add(ve.mult(st*pt)).mult(wt));k.setLocationAtPoint(k.renderWorldCopies?bt.wrap():bt,z)}this._applyUpdatedTransform(k),this._fireMoveEvents(d)},st=>{this.terrain&&this._finalizeElevation(),this._afterEase(d,st)},r),this}_prepareEase(r,d,k={}){this._moving=!0,d||k.moving||this.fire(new u.k("movestart",r)),this._zooming&&!k.zooming&&this.fire(new u.k("zoomstart",r)),this._rotating&&!k.rotating&&this.fire(new u.k("rotatestart",r)),this._pitching&&!k.pitching&&this.fire(new u.k("pitchstart",r))}_prepareElevation(r){this._elevationCenter=r,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(r,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(r){this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const d=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(r<1&&d!==this._elevationTarget){const k=this._elevationTarget-this._elevationStart;this._elevationStart+=r*(k-(d-(k*r+this._elevationStart))/(1-r)),this._elevationTarget=d}this.transform.elevation=u.B.number(this._elevationStart,this._elevationTarget,r)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(r){if(!this.transformCameraUpdate)return;const d=r.clone(),{center:k,zoom:I,pitch:R,bearing:q,elevation:a}=this.transformCameraUpdate(d);k&&(d.center=k),I!==void 0&&(d.zoom=I),R!==void 0&&(d.pitch=R),q!==void 0&&(d.bearing=q),a!==void 0&&(d.elevation=a),this.transform.apply(d)}_fireMoveEvents(r){this.fire(new u.k("move",r)),this._zooming&&this.fire(new u.k("zoom",r)),this._rotating&&this.fire(new u.k("rotate",r)),this._pitching&&this.fire(new u.k("pitch",r))}_afterEase(r,d){if(this._easeId&&d&&this._easeId===d)return;delete this._easeId;const k=this._zooming,I=this._rotating,R=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,k&&this.fire(new u.k("zoomend",r)),I&&this.fire(new u.k("rotateend",r)),R&&this.fire(new u.k("pitchend",r)),this.fire(new u.k("moveend",r))}flyTo(r,d){if(!r.essential&&u.h.prefersReducedMotion){const ni=u.F(r,["center","zoom","bearing","pitch","around"]);return this.jumpTo(ni,d)}this.stop(),r=u.e({offset:[0,0],speed:1.2,curve:1.42,easing:u.bb},r);const k=this._getTransformForUpdate(),I=this.getZoom(),R=this.getBearing(),q=this.getPitch(),a=this.getPadding(),o="zoom"in r?u.ad(+r.zoom,k.minZoom,k.maxZoom):I,h="bearing"in r?this._normalizeBearing(r.bearing,R):R,p="pitch"in r?+r.pitch:q,v="padding"in r?r.padding:k.padding,E=k.zoomScale(o-I),z=u.P.convert(r.offset);let F=k.centerPoint.add(z);const Y=k.pointLocation(F),J=u.L.convert(r.center||Y);this._normalizeCenter(J);const ve=k.project(Y),Ie=k.project(J).sub(ve);let Oe=r.curve;const He=Math.max(k.width,k.height),We=He/E,st=Ie.mag();if("minZoom"in r){const ni=u.ad(Math.min(r.minZoom,I,o),k.minZoom,k.maxZoom),_n=He/k.zoomScale(ni-I);Oe=Math.sqrt(_n/st*2)}const wt=Oe*Oe;function Et(ni){const _n=(We*We-He*He+(ni?-1:1)*wt*wt*st*st)/(2*(ni?We:He)*wt*st);return Math.log(Math.sqrt(_n*_n+1)-_n)}function pt(ni){return(Math.exp(ni)-Math.exp(-ni))/2}function bt(ni){return(Math.exp(ni)+Math.exp(-ni))/2}const St=Et(!1);let vi=function(ni){return bt(St)/bt(St+Oe*ni)},$t=function(ni){return He*((bt(St)*(pt(_n=St+Oe*ni)/bt(_n))-pt(St))/wt)/st;var _n},ri=(Et(!0)-St)/Oe;if(Math.abs(st)<1e-6||!isFinite(ri)){if(Math.abs(He-We)<1e-6)return this.easeTo(r,d);const ni=We<He?-1:1;ri=Math.abs(Math.log(We/He))/Oe,$t=function(){return 0},vi=function(_n){return Math.exp(ni*Oe*_n)}}return r.duration="duration"in r?+r.duration:1e3*ri/("screenSpeed"in r?+r.screenSpeed/Oe:+r.speed),r.maxDuration&&r.duration>r.maxDuration&&(r.duration=0),this._zooming=!0,this._rotating=R!==h,this._pitching=p!==q,this._padding=!k.isPaddingEqual(v),this._prepareEase(d,!1),this.terrain&&this._prepareElevation(J),this._ease(ni=>{const _n=ni*ri,Ki=1/vi(_n);k.zoom=ni===1?o:I+k.scaleZoom(Ki),this._rotating&&(k.bearing=u.B.number(R,h,ni)),this._pitching&&(k.pitch=u.B.number(q,p,ni)),this._padding&&(k.interpolatePadding(a,v,ni),F=k.centerPoint.add(z)),this.terrain&&!r.freezeElevation&&this._updateElevation(ni);const Oi=ni===1?J:k.unproject(ve.add(Ie.mult($t(_n))).mult(Ki));k.setLocationAtPoint(k.renderWorldCopies?Oi.wrap():Oi,F),this._applyUpdatedTransform(k),this._fireMoveEvents(d)},()=>{this.terrain&&this._finalizeElevation(),this._afterEase(d)},r),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(r,d){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const k=this._onEaseEnd;delete this._onEaseEnd,k.call(this,d)}if(!r){const k=this.handlers;k&&k.stop(!1)}return this}_ease(r,d,k){k.animate===!1||k.duration===0?(r(1),d()):(this._easeStart=u.h.now(),this._easeOptions=k,this._onEaseFrame=r,this._onEaseEnd=d,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(r,d){r=u.b5(r,-180,180);const k=Math.abs(r-d);return Math.abs(r-360-d)<k&&(r-=360),Math.abs(r+360-d)<k&&(r+=360),r}_normalizeCenter(r){const d=this.transform;if(!d.renderWorldCopies||d.lngRange)return;const k=r.lng-d.center.lng;r.lng+=k>180?-360:k<-180?360:0}queryTerrainElevation(r){return this.terrain?this.terrain.getElevationForLngLatZoom(u.L.convert(r),this.transform.tileZoom)-this.transform.elevation:null}}class Vr{constructor(r={}){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=d=>{!d||d.sourceDataType!=="metadata"&&d.sourceDataType!=="visibility"&&d.dataType!=="style"&&d.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=r}getDefaultPosition(){return"bottom-right"}onAdd(r){return this._map=r,this._compact=this.options&&this.options.compact,this._container=O.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=O.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=O.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){O.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(r,d){const k=this._map._getUIString(`AttributionControl.${d}`);r.title=k,r.setAttribute("aria-label",k)}_updateAttributions(){if(!this._map.style)return;let r=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?r=r.concat(this.options.customAttribution.map(I=>typeof I!="string"?"":I)):typeof this.options.customAttribution=="string"&&r.push(this.options.customAttribution)),this._map.style.stylesheet){const I=this._map.style.stylesheet;this.styleOwner=I.owner,this.styleId=I.id}const d=this._map.style.sourceCaches;for(const I in d){const R=d[I];if(R.used||R.usedForTerrain){const q=R.getSource();q.attribution&&r.indexOf(q.attribution)<0&&r.push(q.attribution)}}r=r.filter(I=>String(I).trim()),r.sort((I,R)=>I.length-R.length),r=r.filter((I,R)=>{for(let q=R+1;q<r.length;q++)if(r[q].indexOf(I)>=0)return!1;return!0});const k=r.join(" | ");k!==this._attribHTML&&(this._attribHTML=k,r.length?(this._innerContainer.innerHTML=k,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class zr{constructor(r={}){this._updateCompact=()=>{const d=this._container.children;if(d.length){const k=d[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&k.classList.add("maplibregl-compact"):k.classList.remove("maplibregl-compact")}},this.options=r}getDefaultPosition(){return"bottom-left"}onAdd(r){this._map=r,this._compact=this.options&&this.options.compact,this._container=O.create("div","maplibregl-ctrl");const d=O.create("a","maplibregl-ctrl-logo");return d.target="_blank",d.rel="noopener nofollow",d.href="https://maplibre.org/",d.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),d.setAttribute("rel","noopener nofollow"),this._container.appendChild(d),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){O.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Us{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(r){const d=++this._id;return this._queue.push({callback:r,id:d,cancelled:!1}),d}remove(r){const d=this._currentlyRunning,k=d?this._queue.concat(d):this._queue;for(const I of k)if(I.id===r)return void(I.cancelled=!0)}run(r=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const d=this._currentlyRunning=this._queue;this._queue=[];for(const k of d)if(!k.cancelled&&(k.callback(r),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const Sn={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"};var Ga=u.Q([{name:"a_pos3d",type:"Int16",components:3}]);class ml extends u.E{constructor(r){super(),this.sourceCache=r,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,r.usedForTerrain=!0,r.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(r,d){this.sourceCache.update(r,d),this._renderableTilesKeys=[];const k={};for(const I of r.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:d}))k[I.key]=!0,this._renderableTilesKeys.push(I.key),this._tiles[I.key]||(I.posMatrix=new Float64Array(16),u.aS(I.posMatrix,0,u.N,0,u.N,0,1),this._tiles[I.key]=new zn(I,this.tileSize));for(const I in this._tiles)k[I]||delete this._tiles[I]}freeRtt(r){for(const d in this._tiles){const k=this._tiles[d];(!r||k.tileID.equals(r)||k.tileID.isChildOf(r)||r.isChildOf(k.tileID))&&(k.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(r=>this.getTileByID(r))}getTileByID(r){return this._tiles[r]}getTerrainCoords(r){const d={};for(const k of this._renderableTilesKeys){const I=this._tiles[k].tileID;if(I.canonical.equals(r.canonical)){const R=r.clone();R.posMatrix=new Float64Array(16),u.aS(R.posMatrix,0,u.N,0,u.N,0,1),d[k]=R}else if(I.canonical.isChildOf(r.canonical)){const R=r.clone();R.posMatrix=new Float64Array(16);const q=I.canonical.z-r.canonical.z,a=I.canonical.x-(I.canonical.x>>q<<q),o=I.canonical.y-(I.canonical.y>>q<<q),h=u.N>>q;u.aS(R.posMatrix,0,h,0,h,0,1),u.$(R.posMatrix,R.posMatrix,[-a*h,-o*h,0]),d[k]=R}else if(r.canonical.isChildOf(I.canonical)){const R=r.clone();R.posMatrix=new Float64Array(16);const q=r.canonical.z-I.canonical.z,a=r.canonical.x-(r.canonical.x>>q<<q),o=r.canonical.y-(r.canonical.y>>q<<q),h=u.N>>q;u.aS(R.posMatrix,0,u.N,0,u.N,0,1),u.$(R.posMatrix,R.posMatrix,[a*h,o*h,0]),u.a0(R.posMatrix,R.posMatrix,[1/2**q,1/2**q,0]),d[k]=R}}return d}getSourceTile(r,d){const k=this.sourceCache._source;let I=r.overscaledZ-this.deltaZoom;if(I>k.maxzoom&&(I=k.maxzoom),I<k.minzoom)return null;this._sourceTileCache[r.key]||(this._sourceTileCache[r.key]=r.scaledTo(I).key);let R=this.sourceCache.getTileByID(this._sourceTileCache[r.key]);if((!R||!R.dem)&&d)for(;I>=k.minzoom&&(!R||!R.dem);)R=this.sourceCache.getTileByID(r.scaledTo(I--).key);return R}tilesAfterTime(r=Date.now()){return Object.values(this._tiles).filter(d=>d.timeAdded>=r)}}class vo{constructor(r,d,k){this.painter=r,this.sourceCache=new ml(d),this.options=k,this.exaggeration=typeof k.exaggeration=="number"?k.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(r,d,k,I=u.N){var R;if(!(d>=0&&d<I&&k>=0&&k<I))return 0;const q=this.getTerrainData(r),a=(R=q.tile)===null||R===void 0?void 0:R.dem;if(!a)return 0;const o=function(F,Y,J){var ve=Y[0],Ie=Y[1];return F[0]=J[0]*ve+J[4]*Ie+J[12],F[1]=J[1]*ve+J[5]*Ie+J[13],F}([],[d/I*u.N,k/I*u.N],q.u_terrain_matrix),h=[o[0]*a.dim,o[1]*a.dim],p=Math.floor(h[0]),v=Math.floor(h[1]),E=h[0]-p,z=h[1]-v;return a.get(p,v)*(1-E)*(1-z)+a.get(p+1,v)*E*(1-z)+a.get(p,v+1)*(1-E)*z+a.get(p+1,v+1)*E*z}getElevationForLngLatZoom(r,d){const{tileID:k,mercatorX:I,mercatorY:R}=this._getOverscaledTileIDFromLngLatZoom(r,d);return this.getElevation(k,I%u.N,R%u.N,u.N)}getElevation(r,d,k,I=u.N){return this.getDEMElevation(r,d,k,I)*this.exaggeration}getTerrainData(r){if(!this._emptyDemTexture){const I=this.painter.context,R=new u.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new gi(I,R,I.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new gi(I,new u.R({width:1,height:1}),I.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(I.gl.NEAREST,I.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=u.ao([])}const d=this.sourceCache.getSourceTile(r,!0);if(d&&d.dem&&(!d.demTexture||d.needsTerrainPrepare)){const I=this.painter.context;d.demTexture=this.painter.getTileTexture(d.dem.stride),d.demTexture?d.demTexture.update(d.dem.getPixels(),{premultiply:!1}):d.demTexture=new gi(I,d.dem.getPixels(),I.gl.RGBA,{premultiply:!1}),d.demTexture.bind(I.gl.NEAREST,I.gl.CLAMP_TO_EDGE),d.needsTerrainPrepare=!1}const k=d&&d+d.tileID.key+r.key;if(k&&!this._demMatrixCache[k]){const I=this.sourceCache.sourceCache._source.maxzoom;let R=r.canonical.z-d.tileID.canonical.z;r.overscaledZ>r.canonical.z&&(r.canonical.z>=I?R=r.canonical.z-I:u.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const q=r.canonical.x-(r.canonical.x>>R<<R),a=r.canonical.y-(r.canonical.y>>R<<R),o=u.bc(new Float64Array(16),[1/(u.N<<R),1/(u.N<<R),0]);u.$(o,o,[q*u.N,a*u.N,0]),this._demMatrixCache[r.key]={matrix:o,coord:r}}return{u_depth:2,u_terrain:3,u_terrain_dim:d&&d.dem&&d.dem.dim||1,u_terrain_matrix:k?this._demMatrixCache[r.key].matrix:this._emptyDemMatrix,u_terrain_unpack:d&&d.dem&&d.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(d&&d.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:d}}getFramebuffer(r){const d=this.painter,k=d.width/devicePixelRatio,I=d.height/devicePixelRatio;return!this._fbo||this._fbo.width===k&&this._fbo.height===I||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new gi(d.context,{width:k,height:I,data:null},d.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(d.context.gl.NEAREST,d.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new gi(d.context,{width:k,height:I,data:null},d.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(d.context.gl.NEAREST,d.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=d.context.createFramebuffer(k,I,!0,!1),this._fbo.depthAttachment.set(d.context.createRenderbuffer(d.context.gl.DEPTH_COMPONENT16,k,I))),this._fbo.colorAttachment.set(r==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const r=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const d=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let R=0,q=0;R<this._coordsTextureSize;R++)for(let a=0;a<this._coordsTextureSize;a++,q+=4)d[q+0]=255&a,d[q+1]=255&R,d[q+2]=a>>8<<4|R>>8,d[q+3]=0;const k=new u.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(d.buffer)),I=new gi(r,k,r.gl.RGBA,{premultiply:!1});return I.bind(r.gl.NEAREST,r.gl.CLAMP_TO_EDGE),this._coordsTexture=I,I}pointCoordinate(r){const d=new Uint8Array(4),k=this.painter.context,I=k.gl;k.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),I.readPixels(r.x,this.painter.height/devicePixelRatio-r.y-1,1,1,I.RGBA,I.UNSIGNED_BYTE,d),k.bindFramebuffer.set(null);const R=d[0]+(d[2]>>4<<8),q=d[1]+((15&d[2])<<8),a=this.coordsIndex[255-d[3]],o=a&&this.sourceCache.getTileByID(a);if(!o)return null;const h=this._coordsTextureSize,p=(1<<o.tileID.canonical.z)*h;return new u.U(this._allowMercatorOverflow(r,(o.tileID.canonical.x*h+R)/p),(o.tileID.canonical.y*h+q)/p,this.getElevation(o.tileID,R,q,h))}getTerrainMesh(){if(this._mesh)return this._mesh;const r=this.painter.context,d=new u.bd,k=new u.b0,I=this.meshSize,R=u.N/I,q=I*I;for(let v=0;v<=I;v++)for(let E=0;E<=I;E++)d.emplaceBack(E*R,v*R,0);for(let v=0;v<q;v+=I+1)for(let E=0;E<I;E++)k.emplaceBack(E+v,I+E+v+1,I+E+v+2),k.emplaceBack(E+v,I+E+v+2,E+v+1);const a=d.length,o=a+2*(I+1);for(const v of[0,1])for(let E=0;E<=I;E++)for(const z of[0,1])d.emplaceBack(E*R,v*u.N,z);for(let v=0;v<2*I;v+=2)k.emplaceBack(o+v,o+v+1,o+v+3),k.emplaceBack(o+v,o+v+3,o+v+2),k.emplaceBack(a+v,a+v+3,a+v+1),k.emplaceBack(a+v,a+v+2,a+v+3);const h=d.length,p=h+2*(I+1);for(const v of[0,1])for(let E=0;E<=I;E++)for(const z of[0,1])d.emplaceBack(v*u.N,E*R,z);for(let v=0;v<2*I;v+=2)k.emplaceBack(h+v,h+v+1,h+v+3),k.emplaceBack(h+v,h+v+3,h+v+2),k.emplaceBack(p+v,p+v+3,p+v+1),k.emplaceBack(p+v,p+v+2,p+v+3);return this._mesh={indexBuffer:r.createIndexBuffer(k),vertexBuffer:r.createVertexBuffer(d,Ga.members),segments:u.S.simpleSegment(0,0,d.length,k.length)},this._mesh}getMeshFrameDelta(r){return 2*Math.PI*u.be/Math.pow(2,r)/5}getMinTileElevationForLngLatZoom(r,d){var k;const{tileID:I}=this._getOverscaledTileIDFromLngLatZoom(r,d);return(k=this.getMinMaxElevation(I).minElevation)!==null&&k!==void 0?k:0}getMinMaxElevation(r){const d=this.getTerrainData(r).tile,k={minElevation:null,maxElevation:null};return d&&d.dem&&(k.minElevation=d.dem.min*this.exaggeration,k.maxElevation=d.dem.max*this.exaggeration),k}_getOverscaledTileIDFromLngLatZoom(r,d){const k=u.U.fromLngLat(r.wrap()),I=(1<<d)*u.N,R=k.x*I,q=k.y*I,a=Math.floor(R/u.N),o=Math.floor(q/u.N);return{tileID:new u.O(d,0,d,a,o),mercatorX:R,mercatorY:q}}_allowMercatorOverflow(r,d){const k=r.x<this.painter.width/2;let I=u.bf(d);const R=this.painter.transform.center.lng;return k&&Math.sign(I)>0&&Math.sign(R)<0||!k&&Math.sign(I)<0&&Math.sign(R)>0?(I=360*Math.sign(R)+I,u.G(I)):d}}class el{constructor(r,d,k){this._context=r,this._size=d,this._tileSize=k,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const r of this._objects)r.texture.destroy(),r.fbo.destroy()}_createObject(r){const d=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),k=new gi(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return k.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),d.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),d.colorAttachment.set(k.texture),{id:r,fbo:d,texture:k,stamp:-1,inUse:!1}}getObjectForId(r){return this._objects[r]}useObject(r){r.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(d=>r.id!==d),this._recentlyUsed.push(r.id)}stampObject(r){r.stamp=++this._stamp}getOrCreateFreeObject(){for(const d of this._recentlyUsed)if(!this._objects[d].inUse)return this._objects[d];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const r=this._createObject(this._objects.length);return this._objects.push(r),r}freeObject(r){r.inUse=!1}freeAllObjects(){for(const r of this._objects)this.freeObject(r)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(r=>!r.inUse)===!1}}const ps={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class Xs{constructor(r,d){this.painter=r,this.terrain=d,this.pool=new el(r.context,30,d.sourceCache.tileSize*d.qualityFactor)}destruct(){this.pool.destruct()}getTexture(r){return this.pool.getObjectForId(r.rtt[this._stacks.length-1].id).texture}prepareForRender(r,d){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=r._order.filter(k=>!r._layers[k].isHidden(d)),this._coordsDescendingInv={};for(const k in r.sourceCaches){this._coordsDescendingInv[k]={};const I=r.sourceCaches[k].getVisibleCoordinates();for(const R of I){const q=this.terrain.sourceCache.getTerrainCoords(R);for(const a in q)this._coordsDescendingInv[k][a]||(this._coordsDescendingInv[k][a]=[]),this._coordsDescendingInv[k][a].push(q[a])}}this._coordsDescendingInvStr={};for(const k of r._order){const I=r._layers[k],R=I.source;if(ps[I.type]&&!this._coordsDescendingInvStr[R]){this._coordsDescendingInvStr[R]={};for(const q in this._coordsDescendingInv[R])this._coordsDescendingInvStr[R][q]=this._coordsDescendingInv[R][q].map(a=>a.key).sort().join()}}for(const k of this._renderableTiles)for(const I in this._coordsDescendingInvStr){const R=this._coordsDescendingInvStr[I][k.tileID.key];R&&R!==k.rttCoords[I]&&(k.rtt=[])}}renderLayer(r){if(r.isHidden(this.painter.transform.zoom))return!1;const d=r.type,k=this.painter,I=this._renderableLayerIds[this._renderableLayerIds.length-1]===r.id;if(ps[d]&&(this._prevType&&ps[this._prevType]||this._stacks.push([]),this._prevType=d,this._stacks[this._stacks.length-1].push(r.id),!I))return!0;if(ps[this._prevType]||ps[d]&&I){this._prevType=d;const R=this._stacks.length-1,q=this._stacks[R]||[];for(const a of this._renderableTiles){if(this.pool.isFull()&&(Ar(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(a),a.rtt[R]){const h=this.pool.getObjectForId(a.rtt[R].id);if(h.stamp===a.rtt[R].stamp){this.pool.useObject(h);continue}}const o=this.pool.getOrCreateFreeObject();this.pool.useObject(o),this.pool.stampObject(o),a.rtt[R]={id:o.id,stamp:o.stamp},k.context.bindFramebuffer.set(o.fbo.framebuffer),k.context.clear({color:u.aT.transparent,stencil:0}),k.currentStencilSource=void 0;for(let h=0;h<q.length;h++){const p=k.style._layers[q[h]],v=p.source?this._coordsDescendingInv[p.source][a.tileID.key]:[a.tileID];k.context.viewport.set([0,0,o.fbo.width,o.fbo.height]),k._renderTileClippingMasks(p,v),k.renderLayer(k,k.style.sourceCaches[p.source],p,v),p.source&&(a.rttCoords[p.source]=this._coordsDescendingInvStr[p.source][a.tileID.key])}}return Ar(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),ps[d]}return!1}}const jt=Q,ci={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:u.c.MAX_TILE_CACHE_ZOOM_LEVELS,localIdeographFontFamily:"sans-serif",transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,validateStyle:!0,maxCanvasSize:[4096,4096]},io=L=>{L.touchstart=L.dragStart,L.touchmoveWindow=L.dragMove,L.touchend=L.dragEnd},PA={showCompass:!0,showZoom:!0,visualizePitch:!1};class BA{constructor(r,d,k=!1){this.mousedown=q=>{this.startMouse(u.e({},q,{ctrlKey:!0,preventDefault:()=>q.preventDefault()}),O.mousePos(this.element,q)),O.addEventListener(window,"mousemove",this.mousemove),O.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=q=>{this.moveMouse(q,O.mousePos(this.element,q))},this.mouseup=q=>{this.mouseRotate.dragEnd(q),this.mousePitch&&this.mousePitch.dragEnd(q),this.offTemp()},this.touchstart=q=>{q.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=O.touchPos(this.element,q.targetTouches)[0],this.startTouch(q,this._startPos),O.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),O.addEventListener(window,"touchend",this.touchend))},this.touchmove=q=>{q.targetTouches.length!==1?this.reset():(this._lastPos=O.touchPos(this.element,q.targetTouches)[0],this.moveTouch(q,this._lastPos))},this.touchend=q=>{q.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const I=r.dragRotate._mouseRotate.getClickTolerance(),R=r.dragRotate._mousePitch.getClickTolerance();this.element=d,this.mouseRotate=ka({clickTolerance:I,enable:!0}),this.touchRotate=(({enable:q,clickTolerance:a,bearingDegreesPerPixelMoved:o=.8})=>{const h=new Jl;return new Vs({clickTolerance:a,move:(p,v)=>({bearingDelta:(v.x-p.x)*o}),moveStateManager:h,enable:q,assignEvents:io})})({clickTolerance:I,enable:!0}),this.map=r,k&&(this.mousePitch=_o({clickTolerance:R,enable:!0}),this.touchPitch=(({enable:q,clickTolerance:a,pitchDegreesPerPixelMoved:o=-.5})=>{const h=new Jl;return new Vs({clickTolerance:a,move:(p,v)=>({pitchDelta:(v.y-p.y)*o}),moveStateManager:h,enable:q,assignEvents:io})})({clickTolerance:R,enable:!0})),O.addEventListener(d,"mousedown",this.mousedown),O.addEventListener(d,"touchstart",this.touchstart,{passive:!1}),O.addEventListener(d,"touchcancel",this.reset)}startMouse(r,d){this.mouseRotate.dragStart(r,d),this.mousePitch&&this.mousePitch.dragStart(r,d),O.disableDrag()}startTouch(r,d){this.touchRotate.dragStart(r,d),this.touchPitch&&this.touchPitch.dragStart(r,d),O.disableDrag()}moveMouse(r,d){const k=this.map,{bearingDelta:I}=this.mouseRotate.dragMove(r,d)||{};if(I&&k.setBearing(k.getBearing()+I),this.mousePitch){const{pitchDelta:R}=this.mousePitch.dragMove(r,d)||{};R&&k.setPitch(k.getPitch()+R)}}moveTouch(r,d){const k=this.map,{bearingDelta:I}=this.touchRotate.dragMove(r,d)||{};if(I&&k.setBearing(k.getBearing()+I),this.touchPitch){const{pitchDelta:R}=this.touchPitch.dragMove(r,d)||{};R&&k.setPitch(k.getPitch()+R)}}off(){const r=this.element;O.removeEventListener(r,"mousedown",this.mousedown),O.removeEventListener(r,"touchstart",this.touchstart,{passive:!1}),O.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),O.removeEventListener(window,"touchend",this.touchend),O.removeEventListener(r,"touchcancel",this.reset),this.offTemp()}offTemp(){O.enableDrag(),O.removeEventListener(window,"mousemove",this.mousemove),O.removeEventListener(window,"mouseup",this.mouseup),O.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),O.removeEventListener(window,"touchend",this.touchend)}}let Br;function no(L,r,d){if(L=new u.L(L.lng,L.lat),r){const k=new u.L(L.lng-360,L.lat),I=new u.L(L.lng+360,L.lat),R=d.locationPoint(L).distSqr(r);d.locationPoint(k).distSqr(r)<R?L=k:d.locationPoint(I).distSqr(r)<R&&(L=I)}for(;Math.abs(L.lng-d.center.lng)>180;){const k=d.locationPoint(L);if(k.x>=0&&k.y>=0&&k.x<=d.width&&k.y<=d.height)break;L.lng>d.center.lng?L.lng-=360:L.lng+=360}return L}const Ur={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function _(L,r,d){const k=L.classList;for(const I in Ur)k.remove(`maplibregl-${d}-anchor-${I}`);k.add(`maplibregl-${d}-anchor-${r}`)}class b extends u.E{constructor(r){if(super(),this._onKeyPress=d=>{const k=d.code,I=d.charCode||d.keyCode;k!=="Space"&&k!=="Enter"&&I!==32&&I!==13||this.togglePopup()},this._onMapClick=d=>{const k=d.originalEvent.target,I=this._element;this._popup&&(k===I||I.contains(k))&&this.togglePopup()},this._update=d=>{if(!this._map)return;const k=this._map.loaded()&&!this._map.isMoving();((d==null?void 0:d.type)==="terrain"||(d==null?void 0:d.type)==="render"&&!k)&&this._map.once("render",this._update),this._map.transform.renderWorldCopies&&(this._lngLat=no(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let I="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?I=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(I=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let R="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?R="rotateX(0deg)":this._pitchAlignment==="map"&&(R=`rotateX(${this._map.getPitch()}deg)`),d&&d.type!=="moveend"||(this._pos=this._pos.round()),O.setTransform(this._element,`${Ur[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${R} ${I}`),this._map.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{const q=this._map.unproject(this._pos),a=40075016686e-3*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=q.distanceTo(this._lngLat)>20*a?"0.2":"1.0",this._opacityTimeout=null},100))},this._onMove=d=>{if(!this._isDragging){const k=this._clickTolerance||this._map._clickTolerance;this._isDragging=d.point.dist(this._pointerdownPos)>=k}this._isDragging&&(this._pos=d.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new u.k("dragstart"))),this.fire(new u.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new u.k("dragend")),this._state="inactive"},this._addDragHandler=d=>{this._element.contains(d.originalEvent.target)&&(d.preventDefault(),this._positionDelta=d.point.sub(this._pos).add(this._offset),this._pointerdownPos=d.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=r&&r.anchor||"center",this._color=r&&r.color||"#3FB1CE",this._scale=r&&r.scale||1,this._draggable=r&&r.draggable||!1,this._clickTolerance=r&&r.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=r&&r.rotation||0,this._rotationAlignment=r&&r.rotationAlignment||"auto",this._pitchAlignment=r&&r.pitchAlignment&&r.pitchAlignment!=="auto"?r.pitchAlignment:this._rotationAlignment,r&&r.element)this._element=r.element,this._offset=u.P.convert(r&&r.offset||[0,0]);else{this._defaultMarker=!0,this._element=O.create("div"),this._element.setAttribute("aria-label","Map marker");const d=O.createNS("http://www.w3.org/2000/svg","svg"),k=41,I=27;d.setAttributeNS(null,"display","block"),d.setAttributeNS(null,"height",`${k}px`),d.setAttributeNS(null,"width",`${I}px`),d.setAttributeNS(null,"viewBox",`0 0 ${I} ${k}`);const R=O.createNS("http://www.w3.org/2000/svg","g");R.setAttributeNS(null,"stroke","none"),R.setAttributeNS(null,"stroke-width","1"),R.setAttributeNS(null,"fill","none"),R.setAttributeNS(null,"fill-rule","evenodd");const q=O.createNS("http://www.w3.org/2000/svg","g");q.setAttributeNS(null,"fill-rule","nonzero");const a=O.createNS("http://www.w3.org/2000/svg","g");a.setAttributeNS(null,"transform","translate(3.0, 29.0)"),a.setAttributeNS(null,"fill","#000000");const o=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const ve of o){const Ie=O.createNS("http://www.w3.org/2000/svg","ellipse");Ie.setAttributeNS(null,"opacity","0.04"),Ie.setAttributeNS(null,"cx","10.5"),Ie.setAttributeNS(null,"cy","5.80029008"),Ie.setAttributeNS(null,"rx",ve.rx),Ie.setAttributeNS(null,"ry",ve.ry),a.appendChild(Ie)}const h=O.createNS("http://www.w3.org/2000/svg","g");h.setAttributeNS(null,"fill",this._color);const p=O.createNS("http://www.w3.org/2000/svg","path");p.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),h.appendChild(p);const v=O.createNS("http://www.w3.org/2000/svg","g");v.setAttributeNS(null,"opacity","0.25"),v.setAttributeNS(null,"fill","#000000");const E=O.createNS("http://www.w3.org/2000/svg","path");E.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),v.appendChild(E);const z=O.createNS("http://www.w3.org/2000/svg","g");z.setAttributeNS(null,"transform","translate(6.0, 7.0)"),z.setAttributeNS(null,"fill","#FFFFFF");const F=O.createNS("http://www.w3.org/2000/svg","g");F.setAttributeNS(null,"transform","translate(8.0, 8.0)");const Y=O.createNS("http://www.w3.org/2000/svg","circle");Y.setAttributeNS(null,"fill","#000000"),Y.setAttributeNS(null,"opacity","0.25"),Y.setAttributeNS(null,"cx","5.5"),Y.setAttributeNS(null,"cy","5.5"),Y.setAttributeNS(null,"r","5.4999962");const J=O.createNS("http://www.w3.org/2000/svg","circle");J.setAttributeNS(null,"fill","#FFFFFF"),J.setAttributeNS(null,"cx","5.5"),J.setAttributeNS(null,"cy","5.5"),J.setAttributeNS(null,"r","5.4999962"),F.appendChild(Y),F.appendChild(J),q.appendChild(a),q.appendChild(h),q.appendChild(v),q.appendChild(z),q.appendChild(F),d.appendChild(q),d.setAttributeNS(null,"height",k*this._scale+"px"),d.setAttributeNS(null,"width",I*this._scale+"px"),this._element.appendChild(d),this._offset=u.P.convert(r&&r.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",d=>{d.preventDefault()}),this._element.addEventListener("mousedown",d=>{d.preventDefault()}),_(this._element,this._anchor,"marker"),r&&r.className)for(const d of r.className.split(" "))this._element.classList.add(d);this._popup=null}addTo(r){return this.remove(),this._map=r,r.getCanvasContainer().appendChild(this._element),r.on("move",this._update),r.on("moveend",this._update),r.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),O.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(r){return this._lngLat=u.L.convert(r),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(r){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),r){if(!("offset"in r.options)){const I=Math.abs(13.5)/Math.SQRT2;r.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[I,-1*(38.1-13.5+I)],"bottom-right":[-I,-1*(38.1-13.5+I)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=r,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}getPopup(){return this._popup}togglePopup(){const r=this._popup;return r?(r.isOpen()?r.remove():r.addTo(this._map),this):this}getOffset(){return this._offset}setOffset(r){return this._offset=u.P.convert(r),this._update(),this}addClassName(r){this._element.classList.add(r)}removeClassName(r){this._element.classList.remove(r)}toggleClassName(r){return this._element.classList.toggle(r)}setDraggable(r){return this._draggable=!!r,this._map&&(r?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(r){return this._rotation=r||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(r){return this._rotationAlignment=r||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(r){return this._pitchAlignment=r&&r!=="auto"?r:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const S={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let C=0,G=!1;const j={maxWidth:100,unit:"metric"};function H(L,r,d){const k=d&&d.maxWidth||100,I=L._container.clientHeight/2,R=L.unproject([0,I]),q=L.unproject([k,I]),a=R.distanceTo(q);if(d&&d.unit==="imperial"){const o=3.2808*a;o>5280?ne(r,k,o/5280,L._getUIString("ScaleControl.Miles")):ne(r,k,o,L._getUIString("ScaleControl.Feet"))}else d&&d.unit==="nautical"?ne(r,k,a/1852,L._getUIString("ScaleControl.NauticalMiles")):a>=1e3?ne(r,k,a/1e3,L._getUIString("ScaleControl.Kilometers")):ne(r,k,a,L._getUIString("ScaleControl.Meters"))}function ne(L,r,d,k){const I=function(R){const q=Math.pow(10,`${Math.floor(R)}`.length-1);let a=R/q;return a=a>=10?10:a>=5?5:a>=3?3:a>=2?2:a>=1?1:function(o){const h=Math.pow(10,Math.ceil(-Math.log(o)/Math.LN10));return Math.round(o*h)/h}(a),q*a}(d);L.style.width=r*(I/d)+"px",L.innerHTML=`${I}&nbsp;${k}`}const Se={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Ge=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function $e(L){if(L){if(typeof L=="number"){const r=Math.round(Math.abs(L)/Math.SQRT2);return{center:new u.P(0,0),top:new u.P(0,L),"top-left":new u.P(r,r),"top-right":new u.P(-r,r),bottom:new u.P(0,-L),"bottom-left":new u.P(r,-r),"bottom-right":new u.P(-r,-r),left:new u.P(L,0),right:new u.P(-L,0)}}if(L instanceof u.P||Array.isArray(L)){const r=u.P.convert(L);return{center:r,top:r,"top-left":r,"top-right":r,bottom:r,"bottom-left":r,"bottom-right":r,left:r,right:r}}return{center:u.P.convert(L.center||[0,0]),top:u.P.convert(L.top||[0,0]),"top-left":u.P.convert(L["top-left"]||[0,0]),"top-right":u.P.convert(L["top-right"]||[0,0]),bottom:u.P.convert(L.bottom||[0,0]),"bottom-left":u.P.convert(L["bottom-left"]||[0,0]),"bottom-right":u.P.convert(L["bottom-right"]||[0,0]),left:u.P.convert(L.left||[0,0]),right:u.P.convert(L.right||[0,0])}}return $e(new u.P(0,0))}const kt={extend:(L,...r)=>u.e(L,...r),run(L){L()},logToElement(L,r=!1,d="log"){const k=window.document.getElementById(d);k&&(r&&(k.innerHTML=""),k.innerHTML+=`<br>${L}`)}},lt=Q;class ct{static get version(){return lt}static get workerCount(){return pn.workerCount}static set workerCount(r){pn.workerCount=r}static get maxParallelImageRequests(){return u.c.MAX_PARALLEL_IMAGE_REQUESTS}static set maxParallelImageRequests(r){u.c.MAX_PARALLEL_IMAGE_REQUESTS=r}static get workerUrl(){return u.c.WORKER_URL}static set workerUrl(r){u.c.WORKER_URL=r}static addProtocol(r,d){u.c.REGISTERED_PROTOCOLS[r]=d}static removeProtocol(r){delete u.c.REGISTERED_PROTOCOLS[r]}}return ct.Map=class extends Xn{constructor(L){if(u.bg.mark(u.bh.create),(L=u.e({},ci,L)).minZoom!=null&&L.maxZoom!=null&&L.minZoom>L.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(L.minPitch!=null&&L.maxPitch!=null&&L.minPitch>L.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(L.minPitch!=null&&L.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(L.maxPitch!=null&&L.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new hs(L.minZoom,L.maxZoom,L.minPitch,L.maxPitch,L.renderWorldCopies),{bearingSnap:L.bearingSnap}),this._cooperativeGesturesOnWheel=r=>{this._onCooperativeGesture(r,r[this._metaKey],1)},this._contextLost=r=>{r.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new u.k("webglcontextlost",{originalEvent:r}))},this._contextRestored=r=>{this._setupPainter(),this.resize(),this._update(),this.fire(new u.k("webglcontextrestored",{originalEvent:r}))},this._onMapScroll=r=>{if(r.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=L.interactive,this._cooperativeGestures=L.cooperativeGestures,this._metaKey=navigator.platform.indexOf("Mac")===0?"metaKey":"ctrlKey",this._maxTileCacheSize=L.maxTileCacheSize,this._maxTileCacheZoomLevels=L.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=L.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=L.preserveDrawingBuffer,this._antialias=L.antialias,this._trackResize=L.trackResize,this._bearingSnap=L.bearingSnap,this._refreshExpiredTiles=L.refreshExpiredTiles,this._fadeDuration=L.fadeDuration,this._crossSourceCollisions=L.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=L.collectResourceTiming,this._renderTaskQueue=new Us,this._controls=[],this._mapId=u.a2(),this._locale=u.e({},Sn,L.locale),this._clickTolerance=L.clickTolerance,this._overridePixelRatio=L.pixelRatio,this._maxCanvasSize=L.maxCanvasSize,this.transformCameraUpdate=L.transformCameraUpdate,this._imageQueueHandle=Xe.addThrottleControl(()=>this.isMoving()),this._requestManager=new xt(L.transformRequest),typeof L.container=="string"){if(this._container=document.getElementById(L.container),!this._container)throw new Error(`Container '${L.container}' not found.`)}else{if(!(L.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=L.container}if(L.maxBounds&&this.setMaxBounds(L.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let r=!1;const d=ys(k=>{this._trackResize&&!this._removed&&this.resize(k)._update()},50);this._resizeObserver=new ResizeObserver(k=>{r?d(k):r=!0}),this._resizeObserver.observe(this._container)}this.handlers=new gl(this,L),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=L.hash&&new Ca(typeof L.hash=="string"&&L.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:L.center,zoom:L.zoom,bearing:L.bearing,pitch:L.pitch}),L.bounds&&(this.resize(),this.fitBounds(L.bounds,u.e({},L.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=L.localIdeographFontFamily,this._validateStyle=L.validateStyle,L.style&&this.setStyle(L.style,{localIdeographFontFamily:L.localIdeographFontFamily}),L.attributionControl&&this.addControl(new Vr({customAttribution:L.customAttribution})),L.maplibreLogo&&this.addControl(new zr,L.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",r=>{this._update(r.dataType==="style"),this.fire(new u.k(`${r.dataType}data`,r))}),this.on("dataloading",r=>{this.fire(new u.k(`${r.dataType}dataloading`,r))}),this.on("dataabort",r=>{this.fire(new u.k("sourcedataabort",r))})}_getMapId(){return this._mapId}addControl(L,r){if(r===void 0&&(r=L.getDefaultPosition?L.getDefaultPosition():"top-right"),!L||!L.onAdd)return this.fire(new u.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const d=L.onAdd(this);this._controls.push(L);const k=this._controlPositions[r];return r.indexOf("bottom")!==-1?k.insertBefore(d,k.firstChild):k.appendChild(d),this}removeControl(L){if(!L||!L.onRemove)return this.fire(new u.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const r=this._controls.indexOf(L);return r>-1&&this._controls.splice(r,1),L.onRemove(this),this}hasControl(L){return this._controls.indexOf(L)>-1}calculateCameraOptionsFromTo(L,r,d,k){return k==null&&this.terrain&&(k=this.terrain.getElevationForLngLatZoom(d,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(L,r,d,k)}resize(L){var r;const d=this._containerDimensions(),k=d[0],I=d[1],R=this._getClampedPixelRatio(k,I);if(this._resizeCanvas(k,I,R),this.painter.resize(k,I,R),this.painter.overLimit()){const a=this.painter.context.gl;this._maxCanvasSize=[a.drawingBufferWidth,a.drawingBufferHeight];const o=this._getClampedPixelRatio(k,I);this._resizeCanvas(k,I,o),this.painter.resize(k,I,o)}this.transform.resize(k,I),(r=this._requestedCameraState)===null||r===void 0||r.resize(k,I);const q=!this._moving;return q&&(this.stop(),this.fire(new u.k("movestart",L)).fire(new u.k("move",L))),this.fire(new u.k("resize",L)),q&&this.fire(new u.k("moveend",L)),this}_getClampedPixelRatio(L,r){const{0:d,1:k}=this._maxCanvasSize,I=this.getPixelRatio(),R=L*I,q=r*I;return Math.min(R>d?d/R:1,q>k?k/q:1)*I}getPixelRatio(){var L;return(L=this._overridePixelRatio)!==null&&L!==void 0?L:devicePixelRatio}setPixelRatio(L){this._overridePixelRatio=L,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(L){return this.transform.setMaxBounds(Pi.convert(L)),this._update()}setMinZoom(L){if((L=L??-2)>=-2&&L<=this.transform.maxZoom)return this.transform.minZoom=L,this._update(),this.getZoom()<L&&this.setZoom(L),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(L){if((L=L??22)>=this.transform.minZoom)return this.transform.maxZoom=L,this._update(),this.getZoom()>L&&this.setZoom(L),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(L){if((L=L??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(L>=0&&L<=this.transform.maxPitch)return this.transform.minPitch=L,this._update(),this.getPitch()<L&&this.setPitch(L),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(L){if((L=L??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(L>=this.transform.minPitch)return this.transform.maxPitch=L,this._update(),this.getPitch()>L&&this.setPitch(L),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(L){return this.transform.renderWorldCopies=L,this._update()}getCooperativeGestures(){return this._cooperativeGestures}setCooperativeGestures(L){return this._cooperativeGestures=L,this._cooperativeGestures?this._setupCooperativeGestures():this._destroyCooperativeGestures(),this}project(L){return this.transform.locationPoint(u.L.convert(L),this.style&&this.terrain)}unproject(L){return this.transform.pointLocation(u.P.convert(L),this.terrain)}isMoving(){var L;return this._moving||((L=this.handlers)===null||L===void 0?void 0:L.isMoving())}isZooming(){var L;return this._zooming||((L=this.handlers)===null||L===void 0?void 0:L.isZooming())}isRotating(){var L;return this._rotating||((L=this.handlers)===null||L===void 0?void 0:L.isRotating())}_createDelegatedListener(L,r,d){if(L==="mouseenter"||L==="mouseover"){let k=!1;return{layer:r,listener:d,delegates:{mousemove:R=>{const q=this.getLayer(r)?this.queryRenderedFeatures(R.point,{layers:[r]}):[];q.length?k||(k=!0,d.call(this,new at(L,this,R.originalEvent,{features:q}))):k=!1},mouseout:()=>{k=!1}}}}if(L==="mouseleave"||L==="mouseout"){let k=!1;return{layer:r,listener:d,delegates:{mousemove:q=>{(this.getLayer(r)?this.queryRenderedFeatures(q.point,{layers:[r]}):[]).length?k=!0:k&&(k=!1,d.call(this,new at(L,this,q.originalEvent)))},mouseout:q=>{k&&(k=!1,d.call(this,new at(L,this,q.originalEvent)))}}}}{const k=I=>{const R=this.getLayer(r)?this.queryRenderedFeatures(I.point,{layers:[r]}):[];R.length&&(I.features=R,d.call(this,I),delete I.features)};return{layer:r,listener:d,delegates:{[L]:k}}}}on(L,r,d){if(d===void 0)return super.on(L,r);const k=this._createDelegatedListener(L,r,d);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[L]=this._delegatedListeners[L]||[],this._delegatedListeners[L].push(k);for(const I in k.delegates)this.on(I,k.delegates[I]);return this}once(L,r,d){if(d===void 0)return super.once(L,r);const k=this._createDelegatedListener(L,r,d);for(const I in k.delegates)this.once(I,k.delegates[I]);return this}off(L,r,d){return d===void 0?super.off(L,r):(this._delegatedListeners&&this._delegatedListeners[L]&&(k=>{const I=this._delegatedListeners[L];for(let R=0;R<I.length;R++){const q=I[R];if(q.layer===r&&q.listener===d){for(const a in q.delegates)this.off(a,q.delegates[a]);return I.splice(R,1),this}}})(),this)}queryRenderedFeatures(L,r){if(!this.style)return[];let d;const k=L instanceof u.P||Array.isArray(L),I=k?L:[[0,0],[this.transform.width,this.transform.height]];if(r=r||(k?{}:L)||{},I instanceof u.P||typeof I[0]=="number")d=[u.P.convert(I)];else{const R=u.P.convert(I[0]),q=u.P.convert(I[1]);d=[R,new u.P(q.x,R.y),q,new u.P(R.x,q.y),R]}return this.style.queryRenderedFeatures(d,r,this.transform)}querySourceFeatures(L,r){return this.style.querySourceFeatures(L,r)}setStyle(L,r){return(r=u.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},r)).diff!==!1&&r.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&L?(this._diffStyle(L,r),this):(this._localIdeographFontFamily=r.localIdeographFontFamily,this._updateStyle(L,r))}setTransformRequest(L){return this._requestManager.setTransformRequest(L),this}_getUIString(L){const r=this._locale[L];if(r==null)throw new Error(`Missing UI string '${L}'`);return r}_updateStyle(L,r){if(r.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(L,r));const d=this.style&&r.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!L)),L?(this.style=new lr(this,r||{}),this.style.setEventedParent(this,{style:this.style}),typeof L=="string"?this.style.loadURL(L,r,d):this.style.loadJSON(L,r,d),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new lr(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(L,r){if(typeof L=="string"){const d=this._requestManager.transformRequest(L,Ke.Style);u.f(d,(k,I)=>{k?this.fire(new u.j(k)):I&&this._updateDiff(I,r)})}else typeof L=="object"&&this._updateDiff(L,r)}_updateDiff(L,r){try{this.style.setState(L,r)&&this._update(!0)}catch(d){u.w(`Unable to perform style diff: ${d.message||d.error||d}.  Rebuilding the style from scratch.`),this._updateStyle(L,r)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():u.w("There is no style added to the map.")}addSource(L,r){return this._lazyInitEmptyStyle(),this.style.addSource(L,r),this._update(!0)}isSourceLoaded(L){const r=this.style&&this.style.sourceCaches[L];if(r!==void 0)return r.loaded();this.fire(new u.j(new Error(`There is no source with ID '${L}'`)))}setTerrain(L){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),L){const r=this.style.sourceCaches[L.source];if(!r)throw new Error(`cannot load terrain, because there exists no source with ID: ${L.source}`);for(const d in this.style._layers){const k=this.style._layers[d];k.type==="hillshade"&&k.source===L.source&&u.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new vo(this.painter,r,L),this.painter.renderToTexture=new Xs(this.painter,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=d=>{d.dataType==="style"?this.terrain.sourceCache.freeRtt():d.dataType==="source"&&d.tile&&(d.sourceId!==L.source||this._elevationFreeze||(this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(d.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0;return this.fire(new u.k("terrain",{terrain:L})),this}getTerrain(){var L,r;return(r=(L=this.terrain)===null||L===void 0?void 0:L.options)!==null&&r!==void 0?r:null}areTilesLoaded(){const L=this.style&&this.style.sourceCaches;for(const r in L){const d=L[r]._tiles;for(const k in d){const I=d[k];if(I.state!=="loaded"&&I.state!=="errored")return!1}}return!0}addSourceType(L,r,d){return this._lazyInitEmptyStyle(),this.style.addSourceType(L,r,d)}removeSource(L){return this.style.removeSource(L),this._update(!0)}getSource(L){return this.style.getSource(L)}addImage(L,r,d={}){const{pixelRatio:k=1,sdf:I=!1,stretchX:R,stretchY:q,content:a}=d;if(this._lazyInitEmptyStyle(),!(r instanceof HTMLImageElement||u.a(r))){if(r.width===void 0||r.height===void 0)return this.fire(new u.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:o,height:h,data:p}=r,v=r;return this.style.addImage(L,{data:new u.R({width:o,height:h},new Uint8Array(p)),pixelRatio:k,stretchX:R,stretchY:q,content:a,sdf:I,version:0,userImage:v}),v.onAdd&&v.onAdd(this,L),this}}{const{width:o,height:h,data:p}=u.h.getImageData(r);this.style.addImage(L,{data:new u.R({width:o,height:h},p),pixelRatio:k,stretchX:R,stretchY:q,content:a,sdf:I,version:0})}}updateImage(L,r){const d=this.style.getImage(L);if(!d)return this.fire(new u.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const k=r instanceof HTMLImageElement||u.a(r)?u.h.getImageData(r):r,{width:I,height:R,data:q}=k;if(I===void 0||R===void 0)return this.fire(new u.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(I!==d.data.width||R!==d.data.height)return this.fire(new u.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const a=!(r instanceof HTMLImageElement||u.a(r));return d.data.replace(q,a),this.style.updateImage(L,d),this}getImage(L){return this.style.getImage(L)}hasImage(L){return L?!!this.style.getImage(L):(this.fire(new u.j(new Error("Missing required image id"))),!1)}removeImage(L){this.style.removeImage(L)}loadImage(L,r){Xe.getImage(this._requestManager.transformRequest(L,Ke.Image),r)}listImages(){return this.style.listImages()}addLayer(L,r){return this._lazyInitEmptyStyle(),this.style.addLayer(L,r),this._update(!0)}moveLayer(L,r){return this.style.moveLayer(L,r),this._update(!0)}removeLayer(L){return this.style.removeLayer(L),this._update(!0)}getLayer(L){return this.style.getLayer(L)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(L,r,d){return this.style.setLayerZoomRange(L,r,d),this._update(!0)}setFilter(L,r,d={}){return this.style.setFilter(L,r,d),this._update(!0)}getFilter(L){return this.style.getFilter(L)}setPaintProperty(L,r,d,k={}){return this.style.setPaintProperty(L,r,d,k),this._update(!0)}getPaintProperty(L,r){return this.style.getPaintProperty(L,r)}setLayoutProperty(L,r,d,k={}){return this.style.setLayoutProperty(L,r,d,k),this._update(!0)}getLayoutProperty(L,r){return this.style.getLayoutProperty(L,r)}setGlyphs(L,r={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(L,r),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(L,r,d={}){return this._lazyInitEmptyStyle(),this.style.addSprite(L,r,d,k=>{k||this._update(!0)}),this}removeSprite(L){return this._lazyInitEmptyStyle(),this.style.removeSprite(L),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(L,r={}){return this._lazyInitEmptyStyle(),this.style.setSprite(L,r,d=>{d||this._update(!0)}),this}setLight(L,r={}){return this._lazyInitEmptyStyle(),this.style.setLight(L,r),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(L,r){return this.style.setFeatureState(L,r),this._update()}removeFeatureState(L,r){return this.style.removeFeatureState(L,r),this._update()}getFeatureState(L){return this.style.getFeatureState(L)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let L=0,r=0;return this._container&&(L=this._container.clientWidth||400,r=this._container.clientHeight||300),[L,r]}_setupContainer(){const L=this._container;L.classList.add("maplibregl-map");const r=this._canvasContainer=O.create("div","maplibregl-canvas-container",L);this._interactive&&r.classList.add("maplibregl-interactive"),this._canvas=O.create("canvas","maplibregl-canvas",r),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const d=this._containerDimensions(),k=this._getClampedPixelRatio(d[0],d[1]);this._resizeCanvas(d[0],d[1],k);const I=this._controlContainer=O.create("div","maplibregl-control-container",L),R=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(q=>{R[q]=O.create("div",`maplibregl-ctrl-${q} `,I)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_setupCooperativeGestures(){this._cooperativeGesturesScreen=O.create("div","maplibregl-cooperative-gesture-screen",this._container);let L=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";navigator.platform.indexOf("Mac")===0&&(L=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use ⌘ + scroll to zoom the map"),this._cooperativeGesturesScreen.innerHTML=`
            <div class="maplibregl-desktop-message">${L}</div>
            <div class="maplibregl-mobile-message">${typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>
        `,this._cooperativeGesturesScreen.setAttribute("aria-hidden","true"),this._canvasContainer.addEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.add("maplibregl-cooperative-gestures")}_destroyCooperativeGestures(){O.remove(this._cooperativeGesturesScreen),this._canvasContainer.removeEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.remove("maplibregl-cooperative-gestures")}_resizeCanvas(L,r,d){this._canvas.width=Math.floor(d*L),this._canvas.height=Math.floor(d*r),this._canvas.style.width=`${L}px`,this._canvas.style.height=`${r}px`}_setupPainter(){const L={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let r=null;this._canvas.addEventListener("webglcontextcreationerror",k=>{r={requestedAttributes:L},k&&(r.statusMessage=k.statusMessage,r.type=k.type)},{once:!0});const d=this._canvas.getContext("webgl2",L)||this._canvas.getContext("webgl",L);if(!d){const k="Failed to initialize WebGL";throw r?(r.message=k,new Error(JSON.stringify(r))):new Error(k)}this.painter=new Nr(d,this.transform),re.testSupport(d)}_onCooperativeGesture(L,r,d){return!r&&d<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(L){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||L,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(L){return this._update(),this._renderTaskQueue.add(L)}_cancelRenderFrame(L){this._renderTaskQueue.remove(L)}_render(L){const r=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(L),this._removed)return;let d=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const I=this.transform.zoom,R=u.h.now();this.style.zoomHistory.update(I,R);const q=new u.a8(I,{now:R,fadeDuration:r,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),a=q.crossFadingFactor();a===1&&a===this._crossFadingFactor||(d=!0,this._crossFadingFactor=a),this.style.update(q)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,r,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:r,showPadding:this.showPadding}),this.fire(new u.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,u.bg.mark(u.bh.load),this.fire(new u.k("load"))),this.style&&(this.style.hasTransitions()||d)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const k=this._sourcesDirty||this._styleDirty||this._placementDirty;return k||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new u.k("idle")),!this._loaded||this._fullyLoaded||k||(this._fullyLoaded=!0,u.bg.mark(u.bh.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){var L;this._hash&&this._hash.remove();for(const d of this._controls)d.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),Xe.removeThrottleControl(this._imageQueueHandle),(L=this._resizeObserver)===null||L===void 0||L.disconnect();const r=this.painter.context.gl.getExtension("WEBGL_lose_context");r&&r.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),O.remove(this._canvasContainer),O.remove(this._controlContainer),this._cooperativeGestures&&this._destroyCooperativeGestures(),this._container.classList.remove("maplibregl-map"),u.bg.clearMetrics(),this._removed=!0,this.fire(new u.k("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=u.h.frame(L=>{u.bg.frame(L),this._frame=null,this._render(L)}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(L){this._showTileBoundaries!==L&&(this._showTileBoundaries=L,this._update())}get showPadding(){return!!this._showPadding}set showPadding(L){this._showPadding!==L&&(this._showPadding=L,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(L){this._showCollisionBoxes!==L&&(this._showCollisionBoxes=L,L?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(L){this._showOverdrawInspector!==L&&(this._showOverdrawInspector=L,this._update())}get repaint(){return!!this._repaint}set repaint(L){this._repaint!==L&&(this._repaint=L,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(L){this._vertices=L,this._update()}get version(){return jt}getCameraTargetElevation(){return this.transform.elevation}},ct.NavigationControl=class{constructor(L){this._updateZoomButtons=()=>{const r=this._map.getZoom(),d=r===this._map.getMaxZoom(),k=r===this._map.getMinZoom();this._zoomInButton.disabled=d,this._zoomOutButton.disabled=k,this._zoomInButton.setAttribute("aria-disabled",d.toString()),this._zoomOutButton.setAttribute("aria-disabled",k.toString())},this._rotateCompassArrow=()=>{const r=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=r},this._setButtonTitle=(r,d)=>{const k=this._map._getUIString(`NavigationControl.${d}`);r.title=k,r.setAttribute("aria-label",k)},this.options=u.e({},PA,L),this._container=O.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",r=>r.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",r=>this._map.zoomIn({},{originalEvent:r})),O.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",r=>this._map.zoomOut({},{originalEvent:r})),O.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",r=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:r}):this._map.resetNorth({},{originalEvent:r})}),this._compassIcon=O.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(L){return this._map=L,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new BA(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){O.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(L,r){const d=O.create("button",L,this._container);return d.type="button",d.addEventListener("click",r),d}},ct.GeolocateControl=class extends u.E{constructor(L){super(),this._onSuccess=r=>{if(this._map){if(this._isOutOfMapMaxBounds(r))return this._setErrorState(),this.fire(new u.k("outofmaxbounds",r)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=r,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(r),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(r),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new u.k("geolocate",r)),this._finish()}},this._updateCamera=r=>{const d=new u.L(r.coords.longitude,r.coords.latitude),k=r.coords.accuracy,I=this._map.getBearing(),R=u.e({bearing:I},this.options.fitBoundsOptions),q=Pi.fromLngLat(d,k);this._map.fitBounds(q,R,{geolocateSource:!0})},this._updateMarker=r=>{if(r){const d=new u.L(r.coords.longitude,r.coords.latitude);this._accuracyCircleMarker.setLngLat(d).addTo(this._map),this._userLocationDotMarker.setLngLat(d).addTo(this._map),this._accuracy=r.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=r=>{if(this._map){if(this.options.trackUserLocation)if(r.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const d=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(r.code===3&&G)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new u.k("error",r)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=r=>{if(this._map){if(this._container.addEventListener("contextmenu",d=>d.preventDefault()),this._geolocateButton=O.create("button","maplibregl-ctrl-geolocate",this._container),O.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",r===!1){u.w("Geolocation support is not available so the GeolocateControl will be disabled.");const d=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d)}else{const d=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=O.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new b({element:this._dotElement}),this._circleElement=O.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new b({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",d=>{d.geolocateSource||this._watchState!=="ACTIVE_LOCK"||d.originalEvent&&d.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new u.k("trackuserlocationend")))})}},this.options=u.e({},S,L)}onAdd(L){return this._map=L,this._container=O.create("div","maplibregl-ctrl maplibregl-ctrl-group"),function(r,d=!1){Br===void 0||d?window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(k=>{Br=k.state!=="denied",r(Br)}).catch(()=>{Br=!!window.navigator.geolocation,r(Br)}):(Br=!!window.navigator.geolocation,r(Br)):r(Br)}(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),O.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,C=0,G=!1}_isOutOfMapMaxBounds(L){const r=this._map.getMaxBounds(),d=L.coords;return r&&(d.longitude<r.getWest()||d.longitude>r.getEast()||d.latitude<r.getSouth()||d.latitude>r.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const L=this._map.getBounds(),r=L.getSouthEast(),d=L.getNorthEast(),k=r.distanceTo(d),I=Math.ceil(this._accuracy/(k/this._map._container.clientHeight)*2);this._circleElement.style.width=`${I}px`,this._circleElement.style.height=`${I}px`}trigger(){if(!this._setup)return u.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new u.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":C--,G=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new u.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new u.k("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let L;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),C++,C>1?(L={maximumAge:6e5,timeout:0},G=!0):(L=this.options.positionOptions,G=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,L)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},ct.AttributionControl=Vr,ct.LogoControl=zr,ct.ScaleControl=class{constructor(L){this._onMove=()=>{H(this._map,this._container,this.options)},this.setUnit=r=>{this.options.unit=r,H(this._map,this._container,this.options)},this.options=u.e({},j,L)}getDefaultPosition(){return"bottom-left"}onAdd(L){return this._map=L,this._container=O.create("div","maplibregl-ctrl maplibregl-ctrl-scale",L.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){O.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},ct.FullscreenControl=class extends u.E{constructor(L={}){super(),this._onFullscreenChange=()=>{(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,L&&L.container&&(L.container instanceof HTMLElement?this._container=L.container:u.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(L){return this._map=L,this._container||(this._container=this._map.getContainer()),this._controlContainer=O.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){O.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const L=this._fullscreenButton=O.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);O.create("span","maplibregl-ctrl-icon",L).setAttribute("aria-hidden","true"),L.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const L=this._getTitle();this._fullscreenButton.setAttribute("aria-label",L),this._fullscreenButton.title=L}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new u.k("fullscreenstart")),this._map._cooperativeGestures&&(this._prevCooperativeGestures=this._map._cooperativeGestures,this._map.setCooperativeGestures())):(this.fire(new u.k("fullscreenend")),this._prevCooperativeGestures&&(this._map.setCooperativeGestures(this._prevCooperativeGestures),delete this._prevCooperativeGestures))}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},ct.TerrainControl=class{constructor(L){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))},this.options=L}onAdd(L){return this._map=L,this._container=O.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=O.create("button","maplibregl-ctrl-terrain",this._container),O.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){O.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},ct.Popup=class extends u.E{constructor(L){super(),this.remove=()=>(this._content&&O.remove(this._content),this._container&&(O.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new u.k("close")),this),this._onMouseUp=r=>{this._update(r.point)},this._onMouseMove=r=>{this._update(r.point)},this._onDrag=r=>{this._update(r.point)},this._update=r=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=O.create("div","maplibregl-popup",this._map.getContainer()),this._tip=O.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const q of this.options.className.split(" "))this._container.classList.add(q);this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=no(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!r)return;const d=this._pos=this._trackPointer&&r?r:this._map.project(this._lngLat);let k=this.options.anchor;const I=$e(this.options.offset);if(!k){const q=this._container.offsetWidth,a=this._container.offsetHeight;let o;o=d.y+I.bottom.y<a?["top"]:d.y>this._map.transform.height-a?["bottom"]:[],d.x<q/2?o.push("left"):d.x>this._map.transform.width-q/2&&o.push("right"),k=o.length===0?"bottom":o.join("-")}const R=d.add(I[k]).round();O.setTransform(this._container,`${Ur[k]} translate(${R.x}px,${R.y}px)`),_(this._container,k,"popup")},this._onClose=()=>{this.remove()},this.options=u.e(Object.create(Se),L)}addTo(L){return this._map&&this.remove(),this._map=L,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new u.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(L){return this._lngLat=u.L.convert(L),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(L){return this.setDOMContent(document.createTextNode(L))}setHTML(L){const r=document.createDocumentFragment(),d=document.createElement("body");let k;for(d.innerHTML=L;k=d.firstChild,k;)r.appendChild(k);return this.setDOMContent(r)}getMaxWidth(){var L;return(L=this._container)===null||L===void 0?void 0:L.style.maxWidth}setMaxWidth(L){return this.options.maxWidth=L,this._update(),this}setDOMContent(L){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=O.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(L),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(L){this._container&&this._container.classList.add(L)}removeClassName(L){this._container&&this._container.classList.remove(L)}setOffset(L){return this.options.offset=L,this._update(),this}toggleClassName(L){if(this._container)return this._container.classList.toggle(L)}_createCloseButton(){this.options.closeButton&&(this._closeButton=O.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const L=this._container.querySelector(Ge);L&&L.focus()}},ct.Marker=b,ct.Style=lr,ct.LngLat=u.L,ct.LngLatBounds=Pi,ct.Point=u.P,ct.MercatorCoordinate=u.U,ct.Evented=u.E,ct.AJAXError=u.bi,ct.config=u.c,ct.CanvasSource=wi,ct.GeoJSONSource=$i,ct.ImageSource=Li,ct.RasterDEMTileSource=fi,ct.RasterTileSource=Bn,ct.VectorTileSource=sn,ct.VideoSource=Ji,ct.setRTLTextPlugin=u.bj,ct.getRTLTextPluginStatus=u.bk,ct.prewarm=function(){B().acquire(Dn)},ct.clearPrewarmedResources=function(){const L=w;L&&(L.isPreloaded()&&L.numActive()===1?(L.release(Dn),w=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},kt.extend(ct,{isSafari:u.ac,getPerformanceMetrics:u.bg.getPerformanceMetrics}),ct});var P=m;return P})})(C4);var kL=C4.exports;const _0=Rw(kL);var EL=IL;function IL(e){var t,n,l;if(e){if(Array.isArray(e)){for(t=[],n=e.length,l=0;l<n;l++){var m=e[l];m!=null&&t.push(m)}return t}if(typeof e=="object"){t={};var g=Object.keys(e);for(n=g.length,l=0;l<n;l++){var P=g[l],u=e[P];u!=null&&(t[P]=u)}return t}}}function ML(e,t,n){let l;const{map:m}=pd();Qu(e,m,Q=>n(4,l=Q));let{position:g="top-left"}=t,{container:P=void 0}=t,u=null;return sd(()=>{l!=null&&l.loaded()&&u&&l.removeControl(u)}),e.$$set=Q=>{"position"in Q&&n(1,g=Q.position),"container"in Q&&n(2,P=Q.container)},e.$$.update=()=>{if(e.$$.dirty&30&&l&&!u){let Q;typeof P=="string"?Q=document.querySelector(P)??void 0:Q=P,n(3,u=new _0.FullscreenControl({container:Q})),l.addControl(u,g)}},[m,g,P,u,l]}class TL extends No{constructor(t){super(),Vo(this,t,ML,null,ho,{position:1,container:2})}}function PL(e,t,n){let l;const{map:m}=pd();Qu(e,m,ce=>n(8,l=ce));let{position:g="top-left"}=t,{positionOptions:P=void 0}=t,{fitBoundsOptions:u=void 0}=t,{trackUserLocation:Q=!1}=t,{showAccuracyCircle:O=!0}=t,{showUserLocation:re=!0}=t,ee=null;return sd(()=>{l!=null&&l.loaded()&&ee&&l.removeControl(ee)}),e.$$set=ce=>{"position"in ce&&n(1,g=ce.position),"positionOptions"in ce&&n(2,P=ce.positionOptions),"fitBoundsOptions"in ce&&n(3,u=ce.fitBoundsOptions),"trackUserLocation"in ce&&n(4,Q=ce.trackUserLocation),"showAccuracyCircle"in ce&&n(5,O=ce.showAccuracyCircle),"showUserLocation"in ce&&n(6,re=ce.showUserLocation)},e.$$.update=()=>{e.$$.dirty&510&&l&&!ee&&(n(7,ee=new _0.GeolocateControl({positionOptions:P,fitBoundsOptions:u,trackUserLocation:Q,showAccuracyCircle:O,showUserLocation:re})),l.addControl(ee,g))},[m,g,P,u,Q,O,re,ee,l]}class BL extends No{constructor(t){super(),Vo(this,t,PL,null,ho,{position:1,positionOptions:2,fitBoundsOptions:3,trackUserLocation:4,showAccuracyCircle:5,showUserLocation:6})}}function DL(e){let t=e.getCenter(),n=Math.round(e.getZoom()*100)/100,l=Math.ceil((n*Math.LN2+Math.log(512/360/.5))/Math.LN10),m=Math.pow(10,l),g=Math.round(t.lat*m)/m,P=Math.round(t.lng*m)/m,u=`${n}/${g}/${P}`,Q=e.getBearing(),O=e.getPitch();return(Q||O)&&(u+=`/${Math.round(Q*10)/10}`),O&&(u+=`/${Math.round(O)}`),`#${u}`}function LL(e){return e.replace("#","").split("/").map(parseFloat)}var Yp=yv;function yv(e,t){return e===t||e!==e&&t!==t?!0:typeof e!=typeof t||{}.toString.call(e)!={}.toString.call(t)||e!==Object(e)||!e?!1:Array.isArray(e)?Vx(e,t):{}.toString.call(e)=="[object Set]"?Vx(Array.from(e),Array.from(t)):{}.toString.call(e)=="[object Object]"?RL(e,t):zL(e,t)}function zL(e,t){return e.toString()===t.toString()}function Vx(e,t){var n=e.length;if(n!=t.length)return!1;for(var l=0;l<n;l++)if(!yv(e[l],t[l]))return!1;return!0}function RL(e,t){var n=Object.keys(e),l=n.length;if(l!=Object.keys(t).length)return!1;for(var m=0;m<l;m++){var g=n[m];if(!(t.hasOwnProperty(g)&&yv(e[g],t[g])))return!1}return!0}function FL(e,t,n){let l;const{map:m}=pd();Qu(e,m,re=>n(6,l=re));let{position:g="top-left"}=t,{showCompass:P=!0}=t,{showZoom:u=!0}=t,{visualizePitch:Q=!1}=t,O=null;return sd(()=>{l!=null&&l.loaded()&&O&&l.removeControl(O)}),e.$$set=re=>{"position"in re&&n(1,g=re.position),"showCompass"in re&&n(2,P=re.showCompass),"showZoom"in re&&n(3,u=re.showZoom),"visualizePitch"in re&&n(4,Q=re.visualizePitch)},e.$$.update=()=>{e.$$.dirty&126&&l&&!O&&(n(5,O=new _0.NavigationControl({showCompass:P,showZoom:u,visualizePitch:Q})),l.addControl(O,g))},[m,g,P,u,Q,O,l]}class OL extends No{constructor(t){super(),Vo(this,t,FL,null,ho,{position:1,showCompass:2,showZoom:3,visualizePitch:4})}}function NL(e,t,n){let l;const{map:m}=pd();Qu(e,m,O=>n(5,l=O));let{position:g="bottom-left"}=t,{maxWidth:P=void 0}=t,{unit:u="metric"}=t,Q=null;return sd(()=>{l!=null&&l.loaded()&&Q&&l.removeControl(Q)}),e.$$set=O=>{"position"in O&&n(1,g=O.position),"maxWidth"in O&&n(2,P=O.maxWidth),"unit"in O&&n(3,u=O.unit)},e.$$.update=()=>{e.$$.dirty&62&&l&&!Q&&(n(4,Q=new _0.ScaleControl({maxWidth:P,unit:u})),l.addControl(Q,g))},[m,g,P,u,Q,l]}class VL extends No{constructor(t){super(),Vo(this,t,NL,null,ho,{position:1,maxWidth:2,unit:3})}}const UL=e=>({map:e[0]&8,loadedImages:e[0]&16,allImagesLoaded:e[0]&32}),Ux=e=>({map:e[3],loadedImages:e[4],allImagesLoaded:e[5]});function Gx(e){let t,n,l=e[2]&&Qx(e);const m=e[34].default,g=f0(m,e,e[33],Ux);return{c(){l&&l.c(),t=ea(),g&&g.c()},l(P){l&&l.l(P),t=ta(P),g&&g.l(P)},m(P,u){l&&l.m(P,u),qr(P,t,u),g&&g.m(P,u),n=!0},p(P,u){P[2]?l?(l.p(P,u),u[0]&4&&_r(l,1)):(l=Qx(P),l.c(),_r(l,1),l.m(t.parentNode,t)):l&&(gh(),Qr(l,1,1,()=>{l=null}),ph()),g&&g.p&&(!n||u[0]&56|u[1]&4)&&d0(g,m,P,P[33],n?g0(m,P[33],u,UL):p0(P[33]),Ux)},i(P){n||(_r(l),_r(g,P),n=!0)},o(P){Qr(l),Qr(g,P),n=!1},d(P){P&&Qi(t),l&&l.d(P),g&&g.d(P)}}}function Qx(e){let t,n,l,m,g,P,u,Q;return t=new OL({props:{position:e[6]}}),l=new BL({props:{position:e[6],fitBoundsOptions:{maxZoom:12}}}),g=new TL({props:{position:e[6]}}),u=new VL({props:{position:e[6]}}),{c(){vA(t.$$.fragment),n=ea(),vA(l.$$.fragment),m=ea(),vA(g.$$.fragment),P=ea(),vA(u.$$.fragment)},l(O){QA(t.$$.fragment,O),n=ta(O),QA(l.$$.fragment,O),m=ta(O),QA(g.$$.fragment,O),P=ta(O),QA(u.$$.fragment,O)},m(O,re){yA(t,O,re),qr(O,n,re),yA(l,O,re),qr(O,m,re),yA(g,O,re),qr(O,P,re),yA(u,O,re),Q=!0},p(O,re){const ee={};re[0]&64&&(ee.position=O[6]),t.$set(ee);const ce={};re[0]&64&&(ce.position=O[6]),l.$set(ce);const le={};re[0]&64&&(le.position=O[6]),g.$set(le);const je={};re[0]&64&&(je.position=O[6]),u.$set(je)},i(O){Q||(_r(t.$$.fragment,O),_r(l.$$.fragment,O),_r(g.$$.fragment,O),_r(u.$$.fragment,O),Q=!0)},o(O){Qr(t.$$.fragment,O),Qr(l.$$.fragment,O),Qr(g.$$.fragment,O),Qr(u.$$.fragment,O),Q=!1},d(O){O&&(Qi(n),Qi(m),Qi(P)),xA(t,O),xA(l,O),xA(g,O),xA(u,O)}}}function GL(e){let t,n,l,m,g,P=e[3]&&e[0]&&Gx(e);return{c(){t=Sr("div"),P&&P.c(),this.h()},l(u){t=Cr(u,"DIV",{class:!0});var Q=Vn(t);P&&P.l(Q),Q.forEach(Qi),this.h()},h(){ki(t,"class",n=C1(e[1])+" svelte-p00lfq"),Gv(t,"expand-map",!e[1])},m(u,Q){qr(u,t,Q),P&&P.m(t,null),l=!0,m||(g=Wl(e[9].call(null,t)),m=!0)},p(u,Q){u[3]&&u[0]?P?(P.p(u,Q),Q[0]&9&&_r(P,1)):(P=Gx(u),P.c(),_r(P,1),P.m(t,null)):P&&(gh(),Qr(P,1,1,()=>{P=null}),ph()),(!l||Q[0]&2&&n!==(n=C1(u[1])+" svelte-p00lfq"))&&ki(t,"class",n),(!l||Q[0]&2)&&Gv(t,"expand-map",!u[1])},i(u){l||(_r(P),l=!0)},o(u){Qr(P),l=!1},d(u){u&&Qi(t),P&&P.d(),m=!1,g()}}}function QL(e,t,n){let l,m,g,P,{$$slots:u={},$$scope:Q}=t,{map:O=null}=t,{class:re=void 0}=t,{style:ee}=t,{diffStyleUpdates:ce=!1}=t,{center:le=void 0}=t,{zoom:je=void 0}=t,{pitch:Je=0}=t,{bearing:Xe=0}=t,{bounds:Ke=void 0}=t,{hash:xt=!1}=t,{loaded:gt=!1}=t,{minZoom:Mt=0}=t,{maxZoom:Ct=22}=t,{zoomOnDoubleClick:Te=!0}=t,{interactive:Ai=!0}=t,{attributionControl:ii=!0}=t,{cooperativeGestures:xi=!1}=t,{preserveDrawingBuffer:gi=!1}=t,{maxBounds:qt=void 0}=t,{images:di=[]}=t,{standardControls:mi=!1}=t,{filterLayers:vt=void 0}=t,{transformRequest:Ut=void 0}=t;const rt=Lw(),{map:Ft,loadedImages:ui}=bL();Qu(e,Ft,fi=>n(3,g=fi)),Qu(e,ui,fi=>n(4,P=fi));let Lt=new Set;function Yt(fi){g!=null&&g.loaded()&&("url"in fi?(Lt.add(fi.id),g.loadImage(fi.url,($i,li)=>{Lt.delete(fi.id),$i?rt("error",$i):li&&(g==null||g.addImage(fi.id,li,fi.options),P.add(fi.id),ui.set(P))})):(g.addImage(fi.id,fi.data,fi.options),P.add(fi.id),ui.set(P)))}let oi,yi,Pi,dn;function sn(fi){if(xt){let $i=LL(window.location.hash);$i.length>=3&&(n(11,je=$i[0]),n(10,le=[$i[2],$i[1]])),$i.length==5&&(n(15,Xe=$i[3]),n(14,Je=$i[4]))}return hg(Ft,g=new _0.Map(EL({container:fi,style:ee,center:le,zoom:je,pitch:Je,bearing:Xe,minZoom:Mt,maxZoom:Ct,interactive:Ai,preserveDrawingBuffer:gi,maxBounds:qt,bounds:Ke,attributionControl:ii,transformRequest:Ut,cooperativeGestures:xi})),g),g.on("load",$i=>{n(0,gt=!0),rt("load",g)}),g.on("error",$i=>rt("error",{...$i,map:g})),g.on("movestart",$i=>rt("movestart",{...$i,map:g})),g.on("moveend",$i=>{if(n(10,le=$i.target.getCenter()),n(11,je=$i.target.getZoom()),n(12,Ke=$i.target.getBounds()),rt("moveend",{...$i,map:g}),xt){let li=window.location.href.replace(/(#.+)?$/,DL(g));window.history.replaceState(window.history.state,"",li)}}),g.on("zoomstart",$i=>rt("zoomstart",{...$i,map:g})),g.on("zoom",$i=>{n(11,je=$i.target.getZoom()),rt("zoom",{...$i,map:g})}),g.on("zoomend",$i=>{n(11,je=$i.target.getZoom()),rt("zoomend",{...$i,map:g})}),g.on("style.load",()=>{if(g){const $i=g.getStyle();if(n(30,oi=$i.layers.map(li=>li.id)),n(31,yi=Object.keys($i.sources)),dn)for(const[li,Li]of Object.entries(dn))g.addSource(li,Li);if(Pi)for(const li of Pi)g.addLayer(li)}}),g.on("styledata",$i=>{if(g&&vt){const li=g.getStyle().layers;if(li)for(let Li of li)vt(Li)||g.setLayoutProperty(Li.id,"visibility","none")}rt("styledata",{...$i,map:g})}),{destroy(){n(0,gt=!1),g==null||g.remove(),hg(Ft,g=null,g)}}}let Bn=ee;return e.$$set=fi=>{"map"in fi&&n(13,O=fi.map),"class"in fi&&n(1,re=fi.class),"style"in fi&&n(16,ee=fi.style),"diffStyleUpdates"in fi&&n(17,ce=fi.diffStyleUpdates),"center"in fi&&n(10,le=fi.center),"zoom"in fi&&n(11,je=fi.zoom),"pitch"in fi&&n(14,Je=fi.pitch),"bearing"in fi&&n(15,Xe=fi.bearing),"bounds"in fi&&n(12,Ke=fi.bounds),"hash"in fi&&n(18,xt=fi.hash),"loaded"in fi&&n(0,gt=fi.loaded),"minZoom"in fi&&n(19,Mt=fi.minZoom),"maxZoom"in fi&&n(20,Ct=fi.maxZoom),"zoomOnDoubleClick"in fi&&n(21,Te=fi.zoomOnDoubleClick),"interactive"in fi&&n(22,Ai=fi.interactive),"attributionControl"in fi&&n(23,ii=fi.attributionControl),"cooperativeGestures"in fi&&n(24,xi=fi.cooperativeGestures),"preserveDrawingBuffer"in fi&&n(25,gi=fi.preserveDrawingBuffer),"maxBounds"in fi&&n(26,qt=fi.maxBounds),"images"in fi&&n(27,di=fi.images),"standardControls"in fi&&n(2,mi=fi.standardControls),"filterLayers"in fi&&n(28,vt=fi.filterLayers),"transformRequest"in fi&&n(29,Ut=fi.transformRequest),"$$scope"in fi&&n(33,Q=fi.$$scope)},e.$$.update=()=>{if(e.$$.dirty[0]&4&&n(6,l=typeof mi=="boolean"?void 0:mi),e.$$.dirty[0]&8&&n(13,O=g),e.$$.dirty[0]&134217737&&gt&&g!=null&&g.loaded())for(let fi of di)!Lt.has(fi.id)&&!g.hasImage(fi.id)&&Yt(fi);if(e.$$.dirty[0]&134217744&&n(5,m=di.every(fi=>P.has(fi.id))),e.$$.dirty[0]&1073938440|e.$$.dirty[1]&3&&g&&!Yp(ee,Bn)){const fi=g.getStyle();if(oi&&(Pi=fi.layers.filter($i=>!oi.includes($i.id))),yi){const $i=Object.keys(fi.sources).filter(li=>!yi.includes(li));dn={};for(const li of $i)dn[li]=fi.sources[li]}n(32,Bn=ee),g.setStyle(ee,{diff:ce})}e.$$.dirty[0]&1032&&le&&!Yp(le,g==null?void 0:g.getCenter())&&(g==null||g.panTo(le)),e.$$.dirty[0]&2056&&je&&!Yp(je,g==null?void 0:g.getZoom())&&(g==null||g.zoomTo(je)),e.$$.dirty[0]&4104&&Ke&&!Yp(Ke,g==null?void 0:g.getBounds())&&(g==null||g.fitBounds(Ke)),e.$$.dirty[0]&2097160&&(Te?g==null||g.doubleClickZoom.enable():g==null||g.doubleClickZoom.disable())},[gt,re,mi,g,P,m,l,Ft,ui,sn,le,je,Ke,O,Je,Xe,ee,ce,xt,Mt,Ct,Te,Ai,ii,xi,gi,qt,di,vt,Ut,oi,yi,Bn,Q,u]}class qL extends No{constructor(t){super(),Vo(this,t,QL,GL,ho,{map:13,class:1,style:16,diffStyleUpdates:17,center:10,zoom:11,pitch:14,bearing:15,bounds:12,hash:18,loaded:0,minZoom:19,maxZoom:20,zoomOnDoubleClick:21,interactive:22,attributionControl:23,cooperativeGestures:24,preserveDrawingBuffer:25,maxBounds:26,images:27,standardControls:2,filterLayers:28,transformRequest:29},null,[-1,-1])}}function HL(e){let t,n,l,m,g,P,u;const Q=e[17].default,O=f0(Q,e,e[16],null);return{c(){t=Sr("div"),O&&O.c(),this.h()},l(re){t=Cr(re,"DIV",{tabindex:!0,role:!0});var ee=Vn(t);O&&O.l(ee),ee.forEach(Qi),this.h()},h(){ki(t,"tabindex",n=e[1]?0:void 0),ki(t,"role",l=e[1]?"button":void 0),Qv(t,"z-index",e[2])},m(re,ee){qr(re,t,ee),O&&O.m(t,null),g=!0,P||(u=[Wl(e[6].call(null,t)),Wl(m=ZL.call(null,t,e[0])),Jo(t,"click",e[18]),Jo(t,"dblclick",e[19]),Jo(t,"contextmenu",e[20]),Jo(t,"mouseenter",e[21]),Jo(t,"mouseleave",e[22]),Jo(t,"mousemove",e[23]),Jo(t,"keydown",e[7])],P=!0)},p(re,[ee]){O&&O.p&&(!g||ee&65536)&&d0(O,Q,re,re[16],g?g0(Q,re[16],ee,null):p0(re[16]),null),(!g||ee&2&&n!==(n=re[1]?0:void 0))&&ki(t,"tabindex",n),(!g||ee&2&&l!==(l=re[1]?"button":void 0))&&ki(t,"role",l),m&&rd(m.update)&&ee&1&&m.update.call(null,re[0]),ee&4&&Qv(t,"z-index",re[2])},i(re){g||(_r(O,re),g=!0)},o(re){Qr(O,re),g=!1},d(re){re&&Qi(t),O&&O.d(re),P=!1,m0(u)}}}function ZL(e,t){const n=e.className;function l(m){m?e.className=`${n} ${m}`:e.className=n}return l(t),{update:l}}function jL(e,t,n){let l,m,g,{$$slots:P={},$$scope:u}=t,{lngLat:Q}=t,{class:O=void 0}=t,{interactive:re=!0}=t,{asButton:ee=!1}=t,{draggable:ce=!1}=t,{feature:le=null}=t,{offset:je=void 0}=t,{zIndex:Je=void 0}=t,{rotation:Xe=0}=t;const Ke=Lw(),{map:xt,layerEvent:gt,self:Mt}=CL();Qu(e,xt,Ut=>n(25,g=Ut)),Qu(e,gt,Ut=>n(24,l=Ut)),Qu(e,Mt,Ut=>n(15,m=Ut));function Ct(Ut){hg(Mt,m=new _0.Marker({element:Ut,rotation:Xe,draggable:ce,offset:je}).setLngLat(Q).addTo(g),m);const rt=()=>ii("dragstart"),Ft=()=>{Te(),ii("drag")},ui=()=>{Te(),ii("dragend")};return ce&&(m.on("dragstart",rt),m.on("drag",Ft),m.on("dragend",ui)),{destroy(){ce&&(m==null||m.off("dragstart",rt),m==null||m.off("drag",Ft),m==null||m.off("dragend",ui)),m==null||m.remove()}}}function Te(){let Ut=m==null?void 0:m.getLngLat();Ut&&(Array.isArray(Q)?n(9,Q=[Ut.lng,Ut.lat]):Q&&"lon"in Q?n(9,Q={lon:Ut.lng,lat:Ut.lat}):n(9,Q=Ut))}function Ai(Ut){Ut.key===" "&&(Ut.preventDefault(),Ut.stopPropagation(),ii("click"))}function ii(Ut){if(!re)return;let rt=m==null?void 0:m.getLngLat();if(!rt)return;const Ft=[rt.lng,rt.lat];let ui={map:g,marker:m,lngLat:Ft,features:[{type:"Feature",properties:(le==null?void 0:le.properties)??{},geometry:{type:"Point",coordinates:Ft}}]};hg(gt,l={...ui,layerType:"marker",type:Ut},l),Ke(Ut,ui)}const xi=()=>ii("click"),gi=()=>ii("dblclick"),qt=()=>ii("contextmenu"),di=Ut=>{ii("mouseenter")},mi=()=>{ii("mouseleave")},vt=()=>ii("mousemove");return e.$$set=Ut=>{"lngLat"in Ut&&n(9,Q=Ut.lngLat),"class"in Ut&&n(0,O=Ut.class),"interactive"in Ut&&n(10,re=Ut.interactive),"asButton"in Ut&&n(1,ee=Ut.asButton),"draggable"in Ut&&n(11,ce=Ut.draggable),"feature"in Ut&&n(12,le=Ut.feature),"offset"in Ut&&n(13,je=Ut.offset),"zIndex"in Ut&&n(2,Je=Ut.zIndex),"rotation"in Ut&&n(14,Xe=Ut.rotation),"$$scope"in Ut&&n(16,u=Ut.$$scope)},e.$$.update=()=>{e.$$.dirty&33280&&(m==null||m.setLngLat(Q)),e.$$.dirty&40960&&(m==null||m.setOffset(je??[0,0])),e.$$.dirty&49152&&(m==null||m.setRotation(Xe))},[O,ee,Je,xt,gt,Mt,Ct,Ai,ii,Q,re,ce,le,je,Xe,m,u,P,xi,gi,qt,di,mi,vt]}class WL extends No{constructor(t){super(),Vo(this,t,jL,HL,ho,{lngLat:9,class:0,interactive:10,asButton:1,draggable:11,feature:12,offset:13,zIndex:2,rotation:14})}}var gd=Uint8Array,E4=Uint16Array,YL=Int32Array,$L=new gd([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),XL=new gd([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),I4=function(e,t){for(var n=new E4(31),l=0;l<31;++l)n[l]=t+=1<<e[l-1];for(var m=new YL(n[30]),l=1;l<30;++l)for(var g=n[l];g<n[l+1];++g)m[g]=g-n[l]<<5|l;return{b:n,r:m}},M4=I4($L,2),KL=M4.b,JL=M4.r;KL[28]=258,JL[258]=28;I4(XL,0);var ez=new E4(32768);for(us=0;us<32768;++us)Ou=(us&43690)>>1|(us&21845)<<1,Ou=(Ou&52428)>>2|(Ou&13107)<<2,Ou=(Ou&61680)>>4|(Ou&3855)<<4,ez[us]=((Ou&65280)>>8|(Ou&255)<<8)>>1;var Ou,us,lm=new gd(288);for(us=0;us<144;++us)lm[us]=8;var us;for(us=144;us<256;++us)lm[us]=9;var us;for(us=256;us<280;++us)lm[us]=7;var us;for(us=280;us<288;++us)lm[us]=8;var us,tz=new gd(32);for(us=0;us<32;++us)tz[us]=5;var us,iz=new gd(0),nz=typeof TextDecoder<"u"&&new TextDecoder,rz=0;try{nz.decode(iz,{stream:!0}),rz=1}catch{}var um={exports:{}},sz=oz,az={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"};function oz(e){if(!e||!e.type)return null;var t=az[e.type];if(!t)return null;if(t==="geometry")return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:e}]};if(t==="feature")return{type:"FeatureCollection",features:[e]};if(t==="featurecollection")return e}function ag(e){switch(e&&e.type||null){case"FeatureCollection":return e.features=e.features.reduce(function(t,n){return t.concat(ag(n))},[]),e;case"Feature":return e.geometry?ag(e.geometry).map(function(t){var n={type:"Feature",properties:JSON.parse(JSON.stringify(e.properties)),geometry:t};return e.id!==void 0&&(n.id=e.id),n}):[e];case"MultiPoint":return e.coordinates.map(function(t){return{type:"Point",coordinates:t}});case"MultiPolygon":return e.coordinates.map(function(t){return{type:"Polygon",coordinates:t}});case"MultiLineString":return e.coordinates.map(function(t){return{type:"LineString",coordinates:t}});case"GeometryCollection":return e.geometries.map(ag).reduce(function(t,n){return t.concat(n)},[]);case"Point":case"Polygon":case"LineString":return[e]}}const Az=Object.freeze(Object.defineProperty({__proto__:null,default:ag},Symbol.toStringTag,{value:"Module"})),lz=M2(Az);var uz=function(t){return n(t);function n(l){return Array.isArray(l)&&l.length&&typeof l[0]=="number"?[l]:l.reduce(function(m,g){return Array.isArray(g)&&Array.isArray(g[0])?m.concat(n(g)):(m.push(g),m)},[])}},hz=sz,og=lz,cz=uz;og instanceof Function||(og=og.default);var fz=function(e){if(!e)return[];var t=og(hz(e)),n=[];return t.features.forEach(function(l){l.geometry&&(n=n.concat(cz(l.geometry.coordinates)))}),n};function v0(e){return Object.prototype.toString.call(e)}function dz(e){return v0(e)==="[object Date]"}function pz(e){return v0(e)==="[object RegExp]"}function gz(e){return v0(e)==="[object Error]"}function mz(e){return v0(e)==="[object Boolean]"}function _z(e){return v0(e)==="[object Number]"}function vz(e){return v0(e)==="[object String]"}var T4=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};function hm(e,t){if(e.forEach)return e.forEach(t);for(var n=0;n<e.length;n++)t(e[n],n,e)}var yz=Object.keys||function(t){var n=[];for(var l in t)n.push(l);return n},xz=Object.prototype.propertyIsEnumerable,qx=Object.getOwnPropertySymbols;function cm(e){var t=yz(e);if(qx)for(var n=qx(e),l=0;l<n.length;l++)xz.call(e,n[l])&&t.push(n[l]);return t}var fm=Object.prototype.hasOwnProperty||function(e,t){return t in e};function P4(e){if(typeof e=="object"&&e!==null){var t;if(T4(e))t=[];else if(dz(e))t=new Date(e.getTime?e.getTime():e);else if(pz(e))t=new RegExp(e);else if(gz(e))t={message:e.message};else if(mz(e)||_z(e)||vz(e))t=Object(e);else if(Object.create&&Object.getPrototypeOf)t=Object.create(Object.getPrototypeOf(e));else if(e.constructor===Object)t={};else{var n=e.constructor&&e.constructor.prototype||e.__proto__||{},l=function(){};l.prototype=n,t=new l}return hm(cm(e),function(m){t[m]=e[m]}),t}return e}function B4(e,t,n){var l=[],m=[],g=!0;return function P(u){var Q=n?P4(u):u,O={},re=!0,ee={node:Q,node_:u,path:[].concat(l),parent:m[m.length-1],parents:m,key:l[l.length-1],isRoot:l.length===0,level:l.length,circular:null,update:function(je,Je){ee.isRoot||(ee.parent.node[ee.key]=je),ee.node=je,Je&&(re=!1)},delete:function(je){delete ee.parent.node[ee.key],je&&(re=!1)},remove:function(je){T4(ee.parent.node)?ee.parent.node.splice(ee.key,1):delete ee.parent.node[ee.key],je&&(re=!1)},keys:null,before:function(je){O.before=je},after:function(je){O.after=je},pre:function(je){O.pre=je},post:function(je){O.post=je},stop:function(){g=!1},block:function(){re=!1}};if(!g)return ee;function ce(){if(typeof ee.node=="object"&&ee.node!==null){(!ee.keys||ee.node_!==ee.node)&&(ee.keys=cm(ee.node)),ee.isLeaf=ee.keys.length===0;for(var je=0;je<m.length;je++)if(m[je].node_===u){ee.circular=m[je];break}}else ee.isLeaf=!0,ee.keys=null;ee.notLeaf=!ee.isLeaf,ee.notRoot=!ee.isRoot}ce();var le=t.call(ee,ee.node);return le!==void 0&&ee.update&&ee.update(le),O.before&&O.before.call(ee,ee.node),re&&(typeof ee.node=="object"&&ee.node!==null&&!ee.circular&&(m.push(ee),ce(),hm(ee.keys,function(je,Je){l.push(je),O.pre&&O.pre.call(ee,ee.node[je],je);var Xe=P(ee.node[je]);n&&fm.call(ee.node,je)&&(ee.node[je]=Xe.node),Xe.isLast=Je===ee.keys.length-1,Xe.isFirst=Je===0,O.post&&O.post.call(ee,Xe),l.pop()}),m.pop()),O.after&&O.after.call(ee,ee.node)),ee}(e).node}function Cl(e){this.value=e}Cl.prototype.get=function(e){for(var t=this.value,n=0;n<e.length;n++){var l=e[n];if(!t||!fm.call(t,l))return;t=t[l]}return t};Cl.prototype.has=function(e){for(var t=this.value,n=0;n<e.length;n++){var l=e[n];if(!t||!fm.call(t,l))return!1;t=t[l]}return!0};Cl.prototype.set=function(e,t){for(var n=this.value,l=0;l<e.length-1;l++){var m=e[l];fm.call(n,m)||(n[m]={}),n=n[m]}return n[e[l]]=t,t};Cl.prototype.map=function(e){return B4(this.value,e,!0)};Cl.prototype.forEach=function(e){return this.value=B4(this.value,e,!1),this.value};Cl.prototype.reduce=function(e,t){var n=arguments.length===1,l=n?this.value:t;return this.forEach(function(m){(!this.isRoot||!n)&&(l=e.call(this,l,m))}),l};Cl.prototype.paths=function(){var e=[];return this.forEach(function(){e.push(this.path)}),e};Cl.prototype.nodes=function(){var e=[];return this.forEach(function(){e.push(this.node)}),e};Cl.prototype.clone=function(){var e=[],t=[];return function n(l){for(var m=0;m<e.length;m++)if(e[m]===l)return t[m];if(typeof l=="object"&&l!==null){var g=P4(l);return e.push(l),t.push(g),hm(cm(l),function(P){g[P]=n(l[P])}),e.pop(),t.pop(),g}return l}(this.value)};function D4(e){return new Cl(e)}hm(cm(Cl.prototype),function(e){D4[e]=function(t){var n=[].slice.call(arguments,1),l=new Cl(t);return l[e].apply(l,n)}});var wz=D4,bz=SA;function SA(e){if(!(this instanceof SA))return new SA(e);this._bbox=e||[1/0,1/0,-1/0,-1/0],this._valid=!!e}SA.prototype.include=function(e){return this._valid=!0,this._bbox[0]=Math.min(this._bbox[0],e[0]),this._bbox[1]=Math.min(this._bbox[1],e[1]),this._bbox[2]=Math.max(this._bbox[2],e[0]),this._bbox[3]=Math.max(this._bbox[3],e[1]),this};SA.prototype.equals=function(e){var t;return e instanceof SA?t=e.bbox():t=e,this._bbox[0]==t[0]&&this._bbox[1]==t[1]&&this._bbox[2]==t[2]&&this._bbox[3]==t[3]};SA.prototype.center=function(e){return this._valid?[(this._bbox[0]+this._bbox[2])/2,(this._bbox[1]+this._bbox[3])/2]:null};SA.prototype.union=function(e){this._valid=!0;var t;return e instanceof SA?t=e.bbox():t=e,this._bbox[0]=Math.min(this._bbox[0],t[0]),this._bbox[1]=Math.min(this._bbox[1],t[1]),this._bbox[2]=Math.max(this._bbox[2],t[2]),this._bbox[3]=Math.max(this._bbox[3],t[3]),this};SA.prototype.bbox=function(){return this._valid?this._bbox:null};SA.prototype.contains=function(e){if(!e)return this._fastContains();if(!this._valid)return null;var t=e[0],n=e[1];return this._bbox[0]<=t&&this._bbox[1]<=n&&this._bbox[2]>=t&&this._bbox[3]>=n};SA.prototype.intersect=function(e){if(!this._valid)return null;var t;return e instanceof SA?t=e.bbox():t=e,!(this._bbox[0]>t[2]||this._bbox[2]<t[0]||this._bbox[3]<t[1]||this._bbox[1]>t[3])};SA.prototype._fastContains=function(){if(!this._valid)return new Function("return null;");var e="return "+this._bbox[0]+"<= ll[0] &&"+this._bbox[1]+"<= ll[1] &&"+this._bbox[2]+">= ll[0] &&"+this._bbox[3]+">= ll[1]";return new Function("ll",e)};SA.prototype.polygon=function(){return this._valid?{type:"Polygon",coordinates:[[[this._bbox[0],this._bbox[1]],[this._bbox[2],this._bbox[1]],[this._bbox[2],this._bbox[3]],[this._bbox[0],this._bbox[3]],[this._bbox[0],this._bbox[1]]]]}:null};var Sz=fz,Cz=wz,kz=bz,L4={features:["FeatureCollection"],coordinates:["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],geometry:["Feature"],geometries:["GeometryCollection"]},Ez=Object.keys(L4);um.exports=function(e){return xv(e).bbox()};um.exports.polygon=function(e){return xv(e).polygon()};um.exports.bboxify=function(e){return Cz(e).map(function(t){if(t){var n=Ez.some(function(l){return t[l]?L4[l].indexOf(t.type)!==-1:!1});n&&(t.bbox=xv(t).bbox(),this.update(t))}})};function xv(e){for(var t=kz(),n=Sz(e),l=0;l<n.length;l++)t.include(n[l]);return t}var Iz=um.exports;const Mz=Rw(Iz);var Di=function(e){e=e||{};var t=typeof e<"u"?e:{},n={},l;for(l in t)t.hasOwnProperty(l)&&(n[l]=t[l]);var m="";function g(ge){return t.locateFile?t.locateFile(ge,m):m+ge}var P;document.currentScript&&(m=document.currentScript.src),m.indexOf("blob:")!==0?m=m.substr(0,m.lastIndexOf("/")+1):m="",P=function(Ce,Qe,nt){var i=new XMLHttpRequest;i.open("GET",Ce,!0),i.responseType="arraybuffer",i.onload=function(){if(i.status==200||i.status==0&&i.response){Qe(i.response);return}var Dt=Ne(Ce);if(Dt){Qe(Dt.buffer);return}nt()},i.onerror=nt,i.send(null)};var u=t.print||console.log.bind(console),Q=t.printErr||console.warn.bind(console);for(l in n)n.hasOwnProperty(l)&&(t[l]=n[l]);n=null,t.arguments&&t.arguments;var O=0,re=function(ge){O=ge},ee=function(){return O},ce=8;function le(ge,Ce,Qe,nt){switch(Qe=Qe||"i8",Qe.charAt(Qe.length-1)==="*"&&(Qe="i32"),Qe){case"i1":di[ge>>0]=Ce;break;case"i8":di[ge>>0]=Ce;break;case"i16":vt[ge>>1]=Ce;break;case"i32":Ut[ge>>2]=Ce;break;case"i64":pn=[Ce>>>0,(Dn=Ce,+ir(Dn)>=1?Dn>0?(Or(+vr(Dn/4294967296),4294967295)|0)>>>0:~~+kn((Dn-+(~~Dn>>>0))/4294967296)>>>0:0)],Ut[ge>>2]=pn[0],Ut[ge+4>>2]=pn[1];break;case"float":rt[ge>>2]=Ce;break;case"double":Ft[ge>>3]=Ce;break;default:Ue("invalid type for setValue: "+Qe)}}function je(ge,Ce,Qe){switch(Ce=Ce||"i8",Ce.charAt(Ce.length-1)==="*"&&(Ce="i32"),Ce){case"i1":return di[ge>>0];case"i8":return di[ge>>0];case"i16":return vt[ge>>1];case"i32":return Ut[ge>>2];case"i64":return Ut[ge>>2];case"float":return rt[ge>>2];case"double":return Ft[ge>>3];default:Ue("invalid type for getValue: "+Ce)}return null}var Je=!1;function Xe(ge,Ce){ge||Ue("Assertion failed: "+Ce)}function Ke(ge){var Ce=t["_"+ge];return Xe(Ce,"Cannot call unknown function "+ge+", make sure it is exported"),Ce}function xt(ge,Ce,Qe,nt,i){var ue={string:function(ei){var Ti=0;if(ei!=null&&ei!==0){var Yi=(ei.length<<2)+1;Ti=W(Yi),ii(ei,Ti,Yi)}return Ti},array:function(ei){var Ti=W(ei.length);return xi(ei,Ti),Ti}};function Dt(ei){return Ce==="string"?Te(ei):Ce==="boolean"?!!ei:ei}var Vt=Ke(ge),Wt=[],It=0;if(nt)for(var Bt=0;Bt<nt.length;Bt++){var hi=ue[Qe[Bt]];hi?(It===0&&(It=he()),Wt[Bt]=hi(nt[Bt])):Wt[Bt]=nt[Bt]}var Zt=Vt.apply(null,Wt);return Zt=Dt(Zt),It!==0&&ie(It),Zt}function gt(ge,Ce,Qe,nt){Qe=Qe||[];var i=Qe.every(function(Dt){return Dt==="number"}),ue=Ce!=="string";return ue&&i&&!nt?Ke(ge):function(){return xt(ge,Ce,Qe,arguments)}}var Mt=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function Ct(ge,Ce,Qe){for(var nt=Ce+Qe,i=Ce;ge[i]&&!(i>=nt);)++i;if(i-Ce>16&&ge.subarray&&Mt)return Mt.decode(ge.subarray(Ce,i));for(var ue="";Ce<i;){var Dt=ge[Ce++];if(!(Dt&128)){ue+=String.fromCharCode(Dt);continue}var Vt=ge[Ce++]&63;if((Dt&224)==192){ue+=String.fromCharCode((Dt&31)<<6|Vt);continue}var Wt=ge[Ce++]&63;if((Dt&240)==224?Dt=(Dt&15)<<12|Vt<<6|Wt:Dt=(Dt&7)<<18|Vt<<12|Wt<<6|ge[Ce++]&63,Dt<65536)ue+=String.fromCharCode(Dt);else{var It=Dt-65536;ue+=String.fromCharCode(55296|It>>10,56320|It&1023)}}return ue}function Te(ge,Ce){return ge?Ct(mi,ge,Ce):""}function Ai(ge,Ce,Qe,nt){if(!(nt>0))return 0;for(var i=Qe,ue=Qe+nt-1,Dt=0;Dt<ge.length;++Dt){var Vt=ge.charCodeAt(Dt);if(Vt>=55296&&Vt<=57343){var Wt=ge.charCodeAt(++Dt);Vt=65536+((Vt&1023)<<10)|Wt&1023}if(Vt<=127){if(Qe>=ue)break;Ce[Qe++]=Vt}else if(Vt<=2047){if(Qe+1>=ue)break;Ce[Qe++]=192|Vt>>6,Ce[Qe++]=128|Vt&63}else if(Vt<=65535){if(Qe+2>=ue)break;Ce[Qe++]=224|Vt>>12,Ce[Qe++]=128|Vt>>6&63,Ce[Qe++]=128|Vt&63}else{if(Qe+3>=ue)break;Ce[Qe++]=240|Vt>>18,Ce[Qe++]=128|Vt>>12&63,Ce[Qe++]=128|Vt>>6&63,Ce[Qe++]=128|Vt&63}}return Ce[Qe]=0,Qe-i}function ii(ge,Ce,Qe){return Ai(ge,mi,Ce,Qe)}typeof TextDecoder<"u"&&new TextDecoder("utf-16le");function xi(ge,Ce){di.set(ge,Ce)}function gi(ge,Ce){return ge%Ce>0&&(ge+=Ce-ge%Ce),ge}var qt,di,mi,vt,Ut,rt,Ft;function ui(ge){qt=ge,t.HEAP8=di=new Int8Array(ge),t.HEAP16=vt=new Int16Array(ge),t.HEAP32=Ut=new Int32Array(ge),t.HEAPU8=mi=new Uint8Array(ge),t.HEAPU16=new Uint16Array(ge),t.HEAPU32=new Uint32Array(ge),t.HEAPF32=rt=new Float32Array(ge),t.HEAPF64=Ft=new Float64Array(ge)}var Lt=5266928,Yt=24016,oi=t.TOTAL_MEMORY||33554432;t.buffer?qt=t.buffer:qt=new ArrayBuffer(oi),oi=qt.byteLength,ui(qt),Ut[Yt>>2]=Lt;function yi(ge){for(;ge.length>0;){var Ce=ge.shift();if(typeof Ce=="function"){Ce();continue}var Qe=Ce.func;typeof Qe=="number"?Ce.arg===void 0?t.dynCall_v(Qe):t.dynCall_vi(Qe,Ce.arg):Qe(Ce.arg===void 0?null:Ce.arg)}}var Pi=[],dn=[],sn=[],Bn=[];function fi(){if(t.preRun)for(typeof t.preRun=="function"&&(t.preRun=[t.preRun]);t.preRun.length;)Ji(t.preRun.shift());yi(Pi)}function $i(){yi(dn)}function li(){yi(sn)}function Li(){if(t.postRun)for(typeof t.postRun=="function"&&(t.postRun=[t.postRun]);t.postRun.length;)wi(t.postRun.shift());yi(Bn)}function Ji(ge){Pi.unshift(ge)}function wi(ge){Bn.unshift(ge)}var ir=Math.abs,kn=Math.ceil,vr=Math.floor,Or=Math.min,Gi=0,zn=null;function Cs(ge){Gi++,t.monitorRunDependencies&&t.monitorRunDependencies(Gi)}function Kt(ge){if(Gi--,t.monitorRunDependencies&&t.monitorRunDependencies(Gi),Gi==0&&zn){var Ce=zn;zn=null,Ce()}}t.preloadedImages={},t.preloadedAudios={};var cn=null,fr="data:application/octet-stream;base64,";function vn(ge){return String.prototype.startsWith?ge.startsWith(fr):ge.indexOf(fr)===0}var Dn,pn;cn="data:application/octet-stream;base64,AAAAAAAAAAACAAAAAwAAAAEAAAAFAAAABAAAAAYAAAAAAAAAAAAAAAAAAAABAAAAAgAAAAMAAAAEAAAABQAAAAYAAAABAAAABAAAAAMAAAAGAAAABQAAAAIAAAAAAAAAAgAAAAMAAAABAAAABAAAAAYAAAAAAAAABQAAAAMAAAAGAAAABAAAAAUAAAAAAAAAAQAAAAIAAAAEAAAABQAAAAYAAAAAAAAAAgAAAAMAAAABAAAABQAAAAIAAAAAAAAAAQAAAAMAAAAGAAAABAAAAAYAAAAAAAAABQAAAAIAAAABAAAABAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAgAAAAMAAAAAAAAAAAAAAAIAAAAAAAAAAQAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAEAAAABgAAAAAAAAAFAAAAAAAAAAAAAAAEAAAABQAAAAAAAAAAAAAAAAAAAAIAAAAAAAAABgAAAAAAAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAACAAAAAwAAAAQAAAAFAAAABgAAAAEAAAACAAAAAwAAAAQAAAAFAAAABgAAAAAAAAACAAAAAwAAAAQAAAAFAAAABgAAAAAAAAABAAAAAwAAAAQAAAAFAAAABgAAAAAAAAABAAAAAgAAAAQAAAAFAAAABgAAAAAAAAABAAAAAgAAAAMAAAAFAAAABgAAAAAAAAABAAAAAgAAAAMAAAAEAAAABgAAAAAAAAABAAAAAgAAAAMAAAAEAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAADAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAACAAAAAgAAAAAAAAAAAAAABgAAAAAAAAADAAAAAgAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAUAAAAEAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAAAAAAABgAAAAAAAAAEAAAAAAAAAAYAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAUAAAACAAAABAAAAAMAAAAIAAAAAQAAAAcAAAAGAAAACQAAAAAAAAADAAAAAgAAAAIAAAAGAAAACgAAAAsAAAAAAAAAAQAAAAUAAAADAAAADQAAAAEAAAAHAAAABAAAAAwAAAAAAAAABAAAAH8AAAAPAAAACAAAAAMAAAAAAAAADAAAAAUAAAACAAAAEgAAAAoAAAAIAAAAAAAAABAAAAAGAAAADgAAAAsAAAARAAAAAQAAAAkAAAACAAAABwAAABUAAAAJAAAAEwAAAAMAAAANAAAAAQAAAAgAAAAFAAAAFgAAABAAAAAEAAAAAAAAAA8AAAAJAAAAEwAAAA4AAAAUAAAAAQAAAAcAAAAGAAAACgAAAAsAAAAYAAAAFwAAAAUAAAACAAAAEgAAAAsAAAARAAAAFwAAABkAAAACAAAABgAAAAoAAAAMAAAAHAAAAA0AAAAaAAAABAAAAA8AAAADAAAADQAAABoAAAAVAAAAHQAAAAMAAAAMAAAABwAAAA4AAAB/AAAAEQAAABsAAAAJAAAAFAAAAAYAAAAPAAAAFgAAABwAAAAfAAAABAAAAAgAAAAMAAAAEAAAABIAAAAhAAAAHgAAAAgAAAAFAAAAFgAAABEAAAALAAAADgAAAAYAAAAjAAAAGQAAABsAAAASAAAAGAAAAB4AAAAgAAAABQAAAAoAAAAQAAAAEwAAACIAAAAUAAAAJAAAAAcAAAAVAAAACQAAABQAAAAOAAAAEwAAAAkAAAAoAAAAGwAAACQAAAAVAAAAJgAAABMAAAAiAAAADQAAAB0AAAAHAAAAFgAAABAAAAApAAAAIQAAAA8AAAAIAAAAHwAAABcAAAAYAAAACwAAAAoAAAAnAAAAJQAAABkAAAAYAAAAfwAAACAAAAAlAAAACgAAABcAAAASAAAAGQAAABcAAAARAAAACwAAAC0AAAAnAAAAIwAAABoAAAAqAAAAHQAAACsAAAAMAAAAHAAAAA0AAAAbAAAAKAAAACMAAAAuAAAADgAAABQAAAARAAAAHAAAAB8AAAAqAAAALAAAAAwAAAAPAAAAGgAAAB0AAAArAAAAJgAAAC8AAAANAAAAGgAAABUAAAAeAAAAIAAAADAAAAAyAAAAEAAAABIAAAAhAAAAHwAAACkAAAAsAAAANQAAAA8AAAAWAAAAHAAAACAAAAAeAAAAGAAAABIAAAA0AAAAMgAAACUAAAAhAAAAHgAAADEAAAAwAAAAFgAAABAAAAApAAAAIgAAABMAAAAmAAAAFQAAADYAAAAkAAAAMwAAACMAAAAuAAAALQAAADgAAAARAAAAGwAAABkAAAAkAAAAFAAAACIAAAATAAAANwAAACgAAAA2AAAAJQAAACcAAAA0AAAAOQAAABgAAAAXAAAAIAAAACYAAAB/AAAAIgAAADMAAAAdAAAALwAAABUAAAAnAAAAJQAAABkAAAAXAAAAOwAAADkAAAAtAAAAKAAAABsAAAAkAAAAFAAAADwAAAAuAAAANwAAACkAAAAxAAAANQAAAD0AAAAWAAAAIQAAAB8AAAAqAAAAOgAAACsAAAA+AAAAHAAAACwAAAAaAAAAKwAAAD4AAAAvAAAAQAAAABoAAAAqAAAAHQAAACwAAAA1AAAAOgAAAEEAAAAcAAAAHwAAACoAAAAtAAAAJwAAACMAAAAZAAAAPwAAADsAAAA4AAAALgAAADwAAAA4AAAARAAAABsAAAAoAAAAIwAAAC8AAAAmAAAAKwAAAB0AAABFAAAAMwAAAEAAAAAwAAAAMQAAAB4AAAAhAAAAQwAAAEIAAAAyAAAAMQAAAH8AAAA9AAAAQgAAACEAAAAwAAAAKQAAADIAAAAwAAAAIAAAAB4AAABGAAAAQwAAADQAAAAzAAAARQAAADYAAABHAAAAJgAAAC8AAAAiAAAANAAAADkAAABGAAAASgAAACAAAAAlAAAAMgAAADUAAAA9AAAAQQAAAEsAAAAfAAAAKQAAACwAAAA2AAAARwAAADcAAABJAAAAIgAAADMAAAAkAAAANwAAACgAAAA2AAAAJAAAAEgAAAA8AAAASQAAADgAAABEAAAAPwAAAE0AAAAjAAAALgAAAC0AAAA5AAAAOwAAAEoAAABOAAAAJQAAACcAAAA0AAAAOgAAAH8AAAA+AAAATAAAACwAAABBAAAAKgAAADsAAAA/AAAATgAAAE8AAAAnAAAALQAAADkAAAA8AAAASAAAAEQAAABQAAAAKAAAADcAAAAuAAAAPQAAADUAAAAxAAAAKQAAAFEAAABLAAAAQgAAAD4AAAArAAAAOgAAACoAAABSAAAAQAAAAEwAAAA/AAAAfwAAADgAAAAtAAAATwAAADsAAABNAAAAQAAAAC8AAAA+AAAAKwAAAFQAAABFAAAAUgAAAEEAAAA6AAAANQAAACwAAABWAAAATAAAAEsAAABCAAAAQwAAAFEAAABVAAAAMQAAADAAAAA9AAAAQwAAAEIAAAAyAAAAMAAAAFcAAABVAAAARgAAAEQAAAA4AAAAPAAAAC4AAABaAAAATQAAAFAAAABFAAAAMwAAAEAAAAAvAAAAWQAAAEcAAABUAAAARgAAAEMAAAA0AAAAMgAAAFMAAABXAAAASgAAAEcAAABZAAAASQAAAFsAAAAzAAAARQAAADYAAABIAAAAfwAAAEkAAAA3AAAAUAAAADwAAABYAAAASQAAAFsAAABIAAAAWAAAADYAAABHAAAANwAAAEoAAABOAAAAUwAAAFwAAAA0AAAAOQAAAEYAAABLAAAAQQAAAD0AAAA1AAAAXgAAAFYAAABRAAAATAAAAFYAAABSAAAAYAAAADoAAABBAAAAPgAAAE0AAAA/AAAARAAAADgAAABdAAAATwAAAFoAAABOAAAASgAAADsAAAA5AAAAXwAAAFwAAABPAAAATwAAAE4AAAA/AAAAOwAAAF0AAABfAAAATQAAAFAAAABEAAAASAAAADwAAABjAAAAWgAAAFgAAABRAAAAVQAAAF4AAABlAAAAPQAAAEIAAABLAAAAUgAAAGAAAABUAAAAYgAAAD4AAABMAAAAQAAAAFMAAAB/AAAASgAAAEYAAABkAAAAVwAAAFwAAABUAAAARQAAAFIAAABAAAAAYQAAAFkAAABiAAAAVQAAAFcAAABlAAAAZgAAAEIAAABDAAAAUQAAAFYAAABMAAAASwAAAEEAAABoAAAAYAAAAF4AAABXAAAAUwAAAGYAAABkAAAAQwAAAEYAAABVAAAAWAAAAEgAAABbAAAASQAAAGMAAABQAAAAaQAAAFkAAABhAAAAWwAAAGcAAABFAAAAVAAAAEcAAABaAAAATQAAAFAAAABEAAAAagAAAF0AAABjAAAAWwAAAEkAAABZAAAARwAAAGkAAABYAAAAZwAAAFwAAABTAAAATgAAAEoAAABsAAAAZAAAAF8AAABdAAAATwAAAFoAAABNAAAAbQAAAF8AAABqAAAAXgAAAFYAAABRAAAASwAAAGsAAABoAAAAZQAAAF8AAABcAAAATwAAAE4AAABtAAAAbAAAAF0AAABgAAAAaAAAAGIAAABuAAAATAAAAFYAAABSAAAAYQAAAH8AAABiAAAAVAAAAGcAAABZAAAAbwAAAGIAAABuAAAAYQAAAG8AAABSAAAAYAAAAFQAAABjAAAAUAAAAGkAAABYAAAAagAAAFoAAABxAAAAZAAAAGYAAABTAAAAVwAAAGwAAAByAAAAXAAAAGUAAABmAAAAawAAAHAAAABRAAAAVQAAAF4AAABmAAAAZQAAAFcAAABVAAAAcgAAAHAAAABkAAAAZwAAAFsAAABhAAAAWQAAAHQAAABpAAAAbwAAAGgAAABrAAAAbgAAAHMAAABWAAAAXgAAAGAAAABpAAAAWAAAAGcAAABbAAAAcQAAAGMAAAB0AAAAagAAAF0AAABjAAAAWgAAAHUAAABtAAAAcQAAAGsAAAB/AAAAZQAAAF4AAABzAAAAaAAAAHAAAABsAAAAZAAAAF8AAABcAAAAdgAAAHIAAABtAAAAbQAAAGwAAABdAAAAXwAAAHUAAAB2AAAAagAAAG4AAABiAAAAaAAAAGAAAAB3AAAAbwAAAHMAAABvAAAAYQAAAG4AAABiAAAAdAAAAGcAAAB3AAAAcAAAAGsAAABmAAAAZQAAAHgAAABzAAAAcgAAAHEAAABjAAAAdAAAAGkAAAB1AAAAagAAAHkAAAByAAAAcAAAAGQAAABmAAAAdgAAAHgAAABsAAAAcwAAAG4AAABrAAAAaAAAAHgAAAB3AAAAcAAAAHQAAABnAAAAdwAAAG8AAABxAAAAaQAAAHkAAAB1AAAAfwAAAG0AAAB2AAAAcQAAAHkAAABqAAAAdgAAAHgAAABsAAAAcgAAAHUAAAB5AAAAbQAAAHcAAABvAAAAcwAAAG4AAAB5AAAAdAAAAHgAAAB4AAAAcwAAAHIAAABwAAAAeQAAAHcAAAB2AAAAeQAAAHQAAAB4AAAAdwAAAHUAAABxAAAAdgAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAEAAAAFAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAIAAAAFAAAAAQAAAAAAAAD/////AQAAAAAAAAADAAAABAAAAAIAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAUAAAABAAAAAAAAAAAAAAABAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAAFAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAQAAAAFAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAADAAAAAAAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAABAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAADAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAADAAAABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAAAAAAAAAAABAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAMAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAQAAAAMAAAABAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAMAAAABAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAADAAAABQAAAAEAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAEAAAABQAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAgAAAAUAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAMAAAABAAAAAAAAAAEAAAAAAAAABQAAAAAAAAAAAAAABQAAAAUAAAAAAAAAAAAAAP////8BAAAAAAAAAAMAAAAEAAAAAgAAAAAAAAAAAAAAAQAAAAAAAAAAAAAABQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABAAAABQAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAQAAAP//////////AQAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAMAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAIAAAAAAAAAAAAAAAEAAAACAAAABgAAAAQAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAABwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABgAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAoAAAACAAAAAAAAAAAAAAABAAAAAQAAAAUAAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAIAAAAAAAAAAAAAAAEAAAADAAAABwAAAAYAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAHAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAABAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAOAAAAAgAAAAAAAAAAAAAAAQAAAAAAAAAJAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAwAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAgAAAAAAAAAAAAAAAQAAAAQAAAAIAAAACgAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAsAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAJAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAACAAAAAAAAAAAAAAABAAAACwAAAA8AAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACQAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAA4AAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAgAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAFAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAACAAAAAAAAAAAAAAABAAAADAAAABAAAAAMAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAACgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAA8AAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAPAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAEAAAAKAAAAEwAAAAgAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACQAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAADwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAJAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA0AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAgAAAAAAAAAAAAAAAQAAAA0AAAARAAAADQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABEAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAATAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABMAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACQAAAAIAAAAAAAAAAAAAAAEAAAAOAAAAEgAAAA8AAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAPAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAABIAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAATAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAASAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABMAAAACAAAAAAAAAAAAAAABAAAA//////////8TAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABMAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAASAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABIAAAAAAAAAGAAAAAAAAAAhAAAAAAAAAB4AAAAAAAAAIAAAAAMAAAAxAAAAAQAAADAAAAADAAAAMgAAAAMAAAAIAAAAAAAAAAUAAAAFAAAACgAAAAUAAAAWAAAAAAAAABAAAAAAAAAAEgAAAAAAAAApAAAAAQAAACEAAAAAAAAAHgAAAAAAAAAEAAAAAAAAAAAAAAAFAAAAAgAAAAUAAAAPAAAAAQAAAAgAAAAAAAAABQAAAAUAAAAfAAAAAQAAABYAAAAAAAAAEAAAAAAAAAACAAAAAAAAAAYAAAAAAAAADgAAAAAAAAAKAAAAAAAAAAsAAAAAAAAAEQAAAAMAAAAYAAAAAQAAABcAAAADAAAAGQAAAAMAAAAAAAAAAAAAAAEAAAAFAAAACQAAAAUAAAAFAAAAAAAAAAIAAAAAAAAABgAAAAAAAAASAAAAAQAAAAoAAAAAAAAACwAAAAAAAAAEAAAAAQAAAAMAAAAFAAAABwAAAAUAAAAIAAAAAQAAAAAAAAAAAAAAAQAAAAUAAAAQAAAAAQAAAAUAAAAAAAAAAgAAAAAAAAAHAAAAAAAAABUAAAAAAAAAJgAAAAAAAAAJAAAAAAAAABMAAAAAAAAAIgAAAAMAAAAOAAAAAQAAABQAAAADAAAAJAAAAAMAAAADAAAAAAAAAA0AAAAFAAAAHQAAAAUAAAABAAAAAAAAAAcAAAAAAAAAFQAAAAAAAAAGAAAAAQAAAAkAAAAAAAAAEwAAAAAAAAAEAAAAAgAAAAwAAAAFAAAAGgAAAAUAAAAAAAAAAQAAAAMAAAAAAAAADQAAAAUAAAACAAAAAQAAAAEAAAAAAAAABwAAAAAAAAAaAAAAAAAAACoAAAAAAAAAOgAAAAAAAAAdAAAAAAAAACsAAAAAAAAAPgAAAAMAAAAmAAAAAQAAAC8AAAADAAAAQAAAAAMAAAAMAAAAAAAAABwAAAAFAAAALAAAAAUAAAANAAAAAAAAABoAAAAAAAAAKgAAAAAAAAAVAAAAAQAAAB0AAAAAAAAAKwAAAAAAAAAEAAAAAwAAAA8AAAAFAAAAHwAAAAUAAAADAAAAAQAAAAwAAAAAAAAAHAAAAAUAAAAHAAAAAQAAAA0AAAAAAAAAGgAAAAAAAAAfAAAAAAAAACkAAAAAAAAAMQAAAAAAAAAsAAAAAAAAADUAAAAAAAAAPQAAAAMAAAA6AAAAAQAAAEEAAAADAAAASwAAAAMAAAAPAAAAAAAAABYAAAAFAAAAIQAAAAUAAAAcAAAAAAAAAB8AAAAAAAAAKQAAAAAAAAAqAAAAAQAAACwAAAAAAAAANQAAAAAAAAAEAAAABAAAAAgAAAAFAAAAEAAAAAUAAAAMAAAAAQAAAA8AAAAAAAAAFgAAAAUAAAAaAAAAAQAAABwAAAAAAAAAHwAAAAAAAAAyAAAAAAAAADAAAAAAAAAAMQAAAAMAAAAgAAAAAAAAAB4AAAADAAAAIQAAAAMAAAAYAAAAAwAAABIAAAADAAAAEAAAAAMAAABGAAAAAAAAAEMAAAAAAAAAQgAAAAMAAAA0AAAAAwAAADIAAAAAAAAAMAAAAAAAAAAlAAAAAwAAACAAAAAAAAAAHgAAAAMAAABTAAAAAAAAAFcAAAADAAAAVQAAAAMAAABKAAAAAwAAAEYAAAAAAAAAQwAAAAAAAAA5AAAAAQAAADQAAAADAAAAMgAAAAAAAAAZAAAAAAAAABcAAAAAAAAAGAAAAAMAAAARAAAAAAAAAAsAAAADAAAACgAAAAMAAAAOAAAAAwAAAAYAAAADAAAAAgAAAAMAAAAtAAAAAAAAACcAAAAAAAAAJQAAAAMAAAAjAAAAAwAAABkAAAAAAAAAFwAAAAAAAAAbAAAAAwAAABEAAAAAAAAACwAAAAMAAAA/AAAAAAAAADsAAAADAAAAOQAAAAMAAAA4AAAAAwAAAC0AAAAAAAAAJwAAAAAAAAAuAAAAAwAAACMAAAADAAAAGQAAAAAAAAAkAAAAAAAAABQAAAAAAAAADgAAAAMAAAAiAAAAAAAAABMAAAADAAAACQAAAAMAAAAmAAAAAwAAABUAAAADAAAABwAAAAMAAAA3AAAAAAAAACgAAAAAAAAAGwAAAAMAAAA2AAAAAwAAACQAAAAAAAAAFAAAAAAAAAAzAAAAAwAAACIAAAAAAAAAEwAAAAMAAABIAAAAAAAAADwAAAADAAAALgAAAAMAAABJAAAAAwAAADcAAAAAAAAAKAAAAAAAAABHAAAAAwAAADYAAAADAAAAJAAAAAAAAABAAAAAAAAAAC8AAAAAAAAAJgAAAAMAAAA+AAAAAAAAACsAAAADAAAAHQAAAAMAAAA6AAAAAwAAACoAAAADAAAAGgAAAAMAAABUAAAAAAAAAEUAAAAAAAAAMwAAAAMAAABSAAAAAwAAAEAAAAAAAAAALwAAAAAAAABMAAAAAwAAAD4AAAAAAAAAKwAAAAMAAABhAAAAAAAAAFkAAAADAAAARwAAAAMAAABiAAAAAwAAAFQAAAAAAAAARQAAAAAAAABgAAAAAwAAAFIAAAADAAAAQAAAAAAAAABLAAAAAAAAAEEAAAAAAAAAOgAAAAMAAAA9AAAAAAAAADUAAAADAAAALAAAAAMAAAAxAAAAAwAAACkAAAADAAAAHwAAAAMAAABeAAAAAAAAAFYAAAAAAAAATAAAAAMAAABRAAAAAwAAAEsAAAAAAAAAQQAAAAAAAABCAAAAAwAAAD0AAAAAAAAANQAAAAMAAABrAAAAAAAAAGgAAAADAAAAYAAAAAMAAABlAAAAAwAAAF4AAAAAAAAAVgAAAAAAAABVAAAAAwAAAFEAAAADAAAASwAAAAAAAAA5AAAAAAAAADsAAAAAAAAAPwAAAAMAAABKAAAAAAAAAE4AAAADAAAATwAAAAMAAABTAAAAAwAAAFwAAAADAAAAXwAAAAMAAAAlAAAAAAAAACcAAAADAAAALQAAAAMAAAA0AAAAAAAAADkAAAAAAAAAOwAAAAAAAABGAAAAAwAAAEoAAAAAAAAATgAAAAMAAAAYAAAAAAAAABcAAAADAAAAGQAAAAMAAAAgAAAAAwAAACUAAAAAAAAAJwAAAAMAAAAyAAAAAwAAADQAAAAAAAAAOQAAAAAAAAAuAAAAAAAAADwAAAAAAAAASAAAAAMAAAA4AAAAAAAAAEQAAAADAAAAUAAAAAMAAAA/AAAAAwAAAE0AAAADAAAAWgAAAAMAAAAbAAAAAAAAACgAAAADAAAANwAAAAMAAAAjAAAAAAAAAC4AAAAAAAAAPAAAAAAAAAAtAAAAAwAAADgAAAAAAAAARAAAAAMAAAAOAAAAAAAAABQAAAADAAAAJAAAAAMAAAARAAAAAwAAABsAAAAAAAAAKAAAAAMAAAAZAAAAAwAAACMAAAAAAAAALgAAAAAAAABHAAAAAAAAAFkAAAAAAAAAYQAAAAMAAABJAAAAAAAAAFsAAAADAAAAZwAAAAMAAABIAAAAAwAAAFgAAAADAAAAaQAAAAMAAAAzAAAAAAAAAEUAAAADAAAAVAAAAAMAAAA2AAAAAAAAAEcAAAAAAAAAWQAAAAAAAAA3AAAAAwAAAEkAAAAAAAAAWwAAAAMAAAAmAAAAAAAAAC8AAAADAAAAQAAAAAMAAAAiAAAAAwAAADMAAAAAAAAARQAAAAMAAAAkAAAAAwAAADYAAAAAAAAARwAAAAAAAABgAAAAAAAAAGgAAAAAAAAAawAAAAMAAABiAAAAAAAAAG4AAAADAAAAcwAAAAMAAABhAAAAAwAAAG8AAAADAAAAdwAAAAMAAABMAAAAAAAAAFYAAAADAAAAXgAAAAMAAABSAAAAAAAAAGAAAAAAAAAAaAAAAAAAAABUAAAAAwAAAGIAAAAAAAAAbgAAAAMAAAA6AAAAAAAAAEEAAAADAAAASwAAAAMAAAA+AAAAAwAAAEwAAAAAAAAAVgAAAAMAAABAAAAAAwAAAFIAAAAAAAAAYAAAAAAAAABVAAAAAAAAAFcAAAAAAAAAUwAAAAMAAABlAAAAAAAAAGYAAAADAAAAZAAAAAMAAABrAAAAAwAAAHAAAAADAAAAcgAAAAMAAABCAAAAAAAAAEMAAAADAAAARgAAAAMAAABRAAAAAAAAAFUAAAAAAAAAVwAAAAAAAABeAAAAAwAAAGUAAAAAAAAAZgAAAAMAAAAxAAAAAAAAADAAAAADAAAAMgAAAAMAAAA9AAAAAwAAAEIAAAAAAAAAQwAAAAMAAABLAAAAAwAAAFEAAAAAAAAAVQAAAAAAAABfAAAAAAAAAFwAAAAAAAAAUwAAAAAAAABPAAAAAAAAAE4AAAAAAAAASgAAAAMAAAA/AAAAAQAAADsAAAADAAAAOQAAAAMAAABtAAAAAAAAAGwAAAAAAAAAZAAAAAUAAABdAAAAAQAAAF8AAAAAAAAAXAAAAAAAAABNAAAAAQAAAE8AAAAAAAAATgAAAAAAAAB1AAAABAAAAHYAAAAFAAAAcgAAAAUAAABqAAAAAQAAAG0AAAAAAAAAbAAAAAAAAABaAAAAAQAAAF0AAAABAAAAXwAAAAAAAABaAAAAAAAAAE0AAAAAAAAAPwAAAAAAAABQAAAAAAAAAEQAAAAAAAAAOAAAAAMAAABIAAAAAQAAADwAAAADAAAALgAAAAMAAABqAAAAAAAAAF0AAAAAAAAATwAAAAUAAABjAAAAAQAAAFoAAAAAAAAATQAAAAAAAABYAAAAAQAAAFAAAAAAAAAARAAAAAAAAAB1AAAAAwAAAG0AAAAFAAAAXwAAAAUAAABxAAAAAQAAAGoAAAAAAAAAXQAAAAAAAABpAAAAAQAAAGMAAAABAAAAWgAAAAAAAABpAAAAAAAAAFgAAAAAAAAASAAAAAAAAABnAAAAAAAAAFsAAAAAAAAASQAAAAMAAABhAAAAAQAAAFkAAAADAAAARwAAAAMAAABxAAAAAAAAAGMAAAAAAAAAUAAAAAUAAAB0AAAAAQAAAGkAAAAAAAAAWAAAAAAAAABvAAAAAQAAAGcAAAAAAAAAWwAAAAAAAAB1AAAAAgAAAGoAAAAFAAAAWgAAAAUAAAB5AAAAAQAAAHEAAAAAAAAAYwAAAAAAAAB3AAAAAQAAAHQAAAABAAAAaQAAAAAAAAB3AAAAAAAAAG8AAAAAAAAAYQAAAAAAAABzAAAAAAAAAG4AAAAAAAAAYgAAAAMAAABrAAAAAQAAAGgAAAADAAAAYAAAAAMAAAB5AAAAAAAAAHQAAAAAAAAAZwAAAAUAAAB4AAAAAQAAAHcAAAAAAAAAbwAAAAAAAABwAAAAAQAAAHMAAAAAAAAAbgAAAAAAAAB1AAAAAQAAAHEAAAAFAAAAaQAAAAUAAAB2AAAAAQAAAHkAAAAAAAAAdAAAAAAAAAByAAAAAQAAAHgAAAABAAAAdwAAAAAAAAByAAAAAAAAAHAAAAAAAAAAawAAAAAAAABkAAAAAAAAAGYAAAAAAAAAZQAAAAMAAABTAAAAAQAAAFcAAAADAAAAVQAAAAMAAAB2AAAAAAAAAHgAAAAAAAAAcwAAAAUAAABsAAAAAQAAAHIAAAAAAAAAcAAAAAAAAABcAAAAAQAAAGQAAAAAAAAAZgAAAAAAAAB1AAAAAAAAAHkAAAAFAAAAdwAAAAUAAABtAAAAAQAAAHYAAAAAAAAAeAAAAAAAAABfAAAAAQAAAGwAAAABAAAAcgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAEAAAABAAAAAAAAAAAAAAABAAAAAAAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAB+ogX28rbpPxqumpJv+fM/165tC4ns9D+XaEnTqUsEQFrOtNlC4PA/3U+0XG6P9b9TdUUBxTTjP4PUp8ex1ty/B1rD/EN43z+lcDi6LLrZP/a45NWEHMY/oJ5ijLDZ+j/xw3rjxWPjP2B8A46ioQdAotff3wla2z+FMSpA1jj+v6b5Y1mtPbS/cIu8K0F457/2esiyJpDNv98k5Ts2NeA/pvljWa09tD88ClUJ60MDQPZ6yLImkM0/4ONKxa0UBcD2uOTVhBzGv5G7JRxGave/8cN648Vj47+HCwtkjAXIv6LX398JWtu/qyheaCAL9D9TdUUBxTTjv4gyTxslhwVAB1rD/EN4378EH/28teoFwH6iBfbytum/F6ztFYdK/r/Xrm0Liez0vwcS6wNGWeO/Ws602ULg8L9TCtRLiLT8P8pi5RexJsw/BlIKPVwR5T95Wyu0/QjnP5PjoT7YYcu/mBhKZ6zrwj8wRYS7NebuP3qW6geh+Ls/SLrixebL3r+pcyymN9XrPwmkNHp7xec/GWNMZVAA17+82s+x2BLiPwn2ytbJ9ek/LgEH1sMS1j8yp/2LhTfeP+SnWwtQBbu/d38gkp5X7z8ytsuHaADGPzUYObdf1+m/7IauECWhwz+cjSACjzniP76Z+wUhN9K/1+GEKzup67+/GYr/04baPw6idWOvsuc/ZedTWsRa5b/EJQOuRzi0v/OncYhHPes/h49PixY53j+i8wWfC03Nvw2idWOvsue/ZedTWsRa5T/EJQOuRzi0P/KncYhHPeu/iY9PixY53r+i8wWfC03NP9anWwtQBbs/d38gkp5X778ytsuHaADGvzUYObdf1+k/74auECWhw7+cjSACjzniv8CZ+wUhN9I/1uGEKzup6z+/GYr/04bavwmkNHp7xee/F2NMZVAA1z+82s+x2BLivwr2ytbJ9em/KwEH1sMS1r8yp/2LhTfev81i5RexJsy/BlIKPVwR5b95Wyu0/Qjnv5DjoT7YYcs/nBhKZ6zrwr8wRYS7Nebuv3OW6geh+Lu/SLrixebL3j+pcyymN9Xrv8rHIFfWehZAMBwUdlo0DECTUc17EOb2PxpVB1SWChdAzjbhb9pTDUDQhmdvECX5P9FlMKCC9+g/IIAzjELgE0DajDngMv8GQFhWDmDPjNs/y1guLh96EkAxPi8k7DIEQJCc4URlhRhA3eLKKLwkEECqpNAyTBD/P6xpjXcDiwVAFtl//cQm4z+Ibt3XKiYTQM7mCLUb3QdAoM1t8yVv7D8aLZv2Nk8UQEAJPV5nQwxAtSsfTCoE9z9TPjXLXIIWQBVanC5W9AtAYM3d7Adm9j++5mQz1FoWQBUThyaVBghAwH5muQsV7T89Q1qv82MUQJoWGOfNuBdAzrkClkmwDkDQjKq77t37Py+g0dtitsE/ZwAMTwVPEUBojepluNwBQGYbtuW+t9w/HNWIJs6MEkDTNuQUSlgEQKxktPP5TcQ/ixbLB8JjEUCwuWjXMQYCQAS/R09FkRdAowpiZjhhDkB7LmlczD/7P01iQmhhsAVAnrtTwDy84z/Z6jfQ2TgTQChOCXMnWwpAhrW3daoz8z/HYJvVPI4VQLT3ik5FcA5Angi7LOZd+z+NNVzDy5gXQBXdvVTFUA1AYNMgOeYe+T8+qHXGCwkXQKQTOKwa5AJA8gFVoEMW0T+FwzJyttIRQAEAAAD/////BwAAAP////8xAAAA/////1cBAAD/////YQkAAP////+nQQAA/////5HLAQD/////95AMAP/////B9lcAAAAAAAAAAAAAAAAAAgAAAP////8OAAAA/////2IAAAD/////rgIAAP/////CEgAA/////06DAAD/////IpcDAP/////uIRkA/////4LtrwAAAAAAAAAAAAAAAAAAAAAAAgAAAP//////////AQAAAAMAAAD//////////////////////////////////////////////////////////////////////////wEAAAAAAAAAAgAAAP///////////////wMAAAD//////////////////////////////////////////////////////////////////////////wEAAAAAAAAAAgAAAP///////////////wMAAAD//////////////////////////////////////////////////////////////////////////wEAAAAAAAAAAgAAAP///////////////wMAAAD//////////////////////////////////////////////////////////wIAAAD//////////wEAAAAAAAAA/////////////////////wMAAAD/////////////////////////////////////////////////////AwAAAP////////////////////8AAAAA/////////////////////wEAAAD///////////////8CAAAA////////////////////////////////AwAAAP////////////////////8AAAAA////////////////AgAAAAEAAAD/////////////////////////////////////////////////////AwAAAP////////////////////8AAAAA////////////////AgAAAAEAAAD/////////////////////////////////////////////////////AwAAAP////////////////////8AAAAA////////////////AgAAAAEAAAD/////////////////////////////////////////////////////AwAAAP////////////////////8AAAAA////////////////AgAAAAEAAAD/////////////////////////////////////////////////////AQAAAAIAAAD///////////////8AAAAA/////////////////////wMAAAD/////////////////////////////////////////////////////AQAAAAIAAAD///////////////8AAAAA/////////////////////wMAAAD/////////////////////////////////////////////////////AQAAAAIAAAD///////////////8AAAAA/////////////////////wMAAAD/////////////////////////////////////////////////////AQAAAAIAAAD///////////////8AAAAA/////////////////////wMAAAD///////////////////////////////8CAAAA////////////////AQAAAP////////////////////8AAAAA/////////////////////wMAAAD/////////////////////////////////////////////////////AwAAAP////////////////////8AAAAAAQAAAP//////////AgAAAP//////////////////////////////////////////////////////////AwAAAP///////////////wIAAAAAAAAAAQAAAP//////////////////////////////////////////////////////////////////////////AwAAAP///////////////wIAAAAAAAAAAQAAAP//////////////////////////////////////////////////////////////////////////AwAAAP///////////////wIAAAAAAAAAAQAAAP//////////////////////////////////////////////////////////////////////////AwAAAAEAAAD//////////wIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAgAAAAAAAAACAAAAAQAAAAEAAAACAAAAAgAAAAAAAAAFAAAABQAAAAAAAAACAAAAAgAAAAMAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAIAAAABAAAAAgAAAAIAAAACAAAAAAAAAAUAAAAGAAAAAAAAAAIAAAACAAAAAwAAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAIAAAAAAAAAAgAAAAEAAAADAAAAAgAAAAIAAAAAAAAABQAAAAcAAAAAAAAAAgAAAAIAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAgAAAAAAAAACAAAAAQAAAAQAAAACAAAAAgAAAAAAAAAFAAAACAAAAAAAAAACAAAAAgAAAAMAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAACAAAAAAAAAAIAAAABAAAAAAAAAAIAAAACAAAAAAAAAAUAAAAJAAAAAAAAAAIAAAACAAAAAwAAAAUAAAAAAAAAAAAAAAAAAAAAAAAACgAAAAIAAAACAAAAAAAAAAMAAAAOAAAAAgAAAAAAAAACAAAAAwAAAAAAAAAAAAAAAgAAAAIAAAADAAAABgAAAAAAAAAAAAAAAAAAAAAAAAALAAAAAgAAAAIAAAAAAAAAAwAAAAoAAAACAAAAAAAAAAIAAAADAAAAAQAAAAAAAAACAAAAAgAAAAMAAAAHAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAACAAAAAgAAAAAAAAADAAAACwAAAAIAAAAAAAAAAgAAAAMAAAACAAAAAAAAAAIAAAACAAAAAwAAAAgAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAIAAAACAAAAAAAAAAMAAAAMAAAAAgAAAAAAAAACAAAAAwAAAAMAAAAAAAAAAgAAAAIAAAADAAAACQAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAgAAAAIAAAAAAAAAAwAAAA0AAAACAAAAAAAAAAIAAAADAAAABAAAAAAAAAACAAAAAgAAAAMAAAAKAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAACAAAAAgAAAAAAAAADAAAABgAAAAIAAAAAAAAAAgAAAAMAAAAPAAAAAAAAAAIAAAACAAAAAwAAAAsAAAAAAAAAAAAAAAAAAAAAAAAABgAAAAIAAAACAAAAAAAAAAMAAAAHAAAAAgAAAAAAAAACAAAAAwAAABAAAAAAAAAAAgAAAAIAAAADAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAgAAAAIAAAAAAAAAAwAAAAgAAAACAAAAAAAAAAIAAAADAAAAEQAAAAAAAAACAAAAAgAAAAMAAAANAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAACAAAAAgAAAAAAAAADAAAACQAAAAIAAAAAAAAAAgAAAAMAAAASAAAAAAAAAAIAAAACAAAAAwAAAA4AAAAAAAAAAAAAAAAAAAAAAAAACQAAAAIAAAACAAAAAAAAAAMAAAAFAAAAAgAAAAAAAAACAAAAAwAAABMAAAAAAAAAAgAAAAIAAAADAAAADwAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAgAAAAAAAAACAAAAAQAAABMAAAACAAAAAgAAAAAAAAAFAAAACgAAAAAAAAACAAAAAgAAAAMAAAAQAAAAAAAAAAAAAAAAAAAAAAAAABEAAAACAAAAAAAAAAIAAAABAAAADwAAAAIAAAACAAAAAAAAAAUAAAALAAAAAAAAAAIAAAACAAAAAwAAABEAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAIAAAAAAAAAAgAAAAEAAAAQAAAAAgAAAAIAAAAAAAAABQAAAAwAAAAAAAAAAgAAAAIAAAADAAAAEgAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAgAAAAAAAAACAAAAAQAAABEAAAACAAAAAgAAAAAAAAAFAAAADQAAAAAAAAACAAAAAgAAAAMAAAATAAAAAAAAAAAAAAAAAAAAAAAAAA8AAAACAAAAAAAAAAIAAAABAAAAEgAAAAIAAAACAAAAAAAAAAUAAAAOAAAAAAAAAAIAAAACAAAAAwAAAAIAAAABAAAAAAAAAAEAAAACAAAAAAAAAAAAAAACAAAAAQAAAAAAAAABAAAAAgAAAAEAAAAAAAAAAgAAAAAAAAAFAAAABAAAAAAAAAABAAAABQAAAAAAAAAAAAAABQAAAAQAAAAAAAAAAQAAAAUAAAAEAAAAAAAAAAUAAAAAAAAAAgAAAAEAAAAAAAAAAQAAAAIAAAAAAAAAAAAAAAIAAAABAAAAAAAAAAEAAAACAAAAAQAAAAAAAAACAAAAAgAAAAAAAAABAAAAAAAAAAAAAAAFAAAABAAAAAAAAAABAAAABQAAAAAAAAAAAAAABQAAAAQAAAAAAAAAAQAAAAUAAAAEAAAAAAAAAAUAAAAFAAAAAAAAAAEAAAAAAAAAAAAAAMuhRbbsNlBBYqHW9OmHIkF9XBuqnS31QAK37uYhNMhAOSo3UUupm0DC+6pc6JxvQHV9eseEEEJAzURsCyqlFEB8BQ4NMJjnPyy3tBoS97o/xawXQznRjj89J2K2CZxhP6vX43RIIDQ/S8isgygEBz+LvFHQkmzaPjFFFO7wMq4+AADMLkTtjkIAAOgkJqxhQgAAU7B0MjRCAADwpBcVB0IAAACYP2HaQQAAAIn/Ja5BzczM4Eg6gUHNzMxMU7BTQTMzMzNfgCZBAAAAAEi3+UAAAAAAwGPNQDMzMzMzy6BAmpmZmZkxc0AzMzMzM/NFQDMzMzMzMxlAzczMzMzM7D+ygXSx2U6RQKimJOvQKnpA23hmONTHY0A/AGcxyudNQNb3K647mzZA+S56rrwWIUAm4kUQ+9UJQKre9hGzh/M/BLvoy9WG3T+LmqMf8VHGP2m3nYNV37A/gbFHcyeCmT+cBPWBckiDP61tZACjKW0/q2RbYVUYVj8uDypVyLNAP6jGS5cA5zBBwcqhBdCNGUEGEhQ/JVEDQT6WPnRbNO1AB/AWSJgT1kDfUWNCNLDAQNk+5C33OqlAchWL34QSk0DKvtDIrNV8QNF0G3kFzGVASSeWhBl6UED+/0mNGuk4QGjA/dm/1CJALPLPMql6DEDSHoDrwpP1P2jouzWST+A/egAAAAAAAABKAwAAAAAAAPoWAAAAAAAAyqAAAAAAAAB6ZQQAAAAAAErGHgAAAAAA+mvXAAAAAADK8+MFAAAAAHqqOykAAAAASqmhIAEAAAD6oGvkBwAAAMpm8T43AAAAes+ZuIIBAABKrDQMkwoAAPq1cFUFSgAAyvkUViUGAgAAAAAAAwAAAAYAAAACAAAABQAAAAEAAAAEAAAAAAAAAAAAAAAFAAAAAwAAAAEAAAAGAAAABAAAAAIAAAAAAAAAAAAAAP////8AAAAAAAAAAAAAAAAAAAAAAAAAAP////////////////////////////////////8AAAAA/////wAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAP////8AAAAAAAAAAAEAAAABAAAAAAAAAAAAAAD/////AAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAA/////wUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAP////8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/////////////////////////////////////AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/////////////////////////////////////wAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAUAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP////////////////////////////////////8AAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAABAAAAAAAAAAAAAAABAAAAAQAAAAEAAAAAAAAAAQAAAAAAAAAFAAAAAQAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAAAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEBAAAAAAABAAEAAAEBAAAAAAABAAAAAQAAAAEAAQAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAAAAAACAAAAAQAAAAMAAAAOAAAABgAAAAsAAAACAAAABwAAAAEAAAAYAAAABQAAAAoAAAABAAAABgAAAAAAAAAmAAAABwAAAAwAAAADAAAACAAAAAIAAAAxAAAACQAAAA4AAAAAAAAABQAAAAQAAAA6AAAACAAAAA0AAAAEAAAACQAAAAMAAAA/AAAACwAAAAYAAAAPAAAACgAAABAAAABIAAAADAAAAAcAAAAQAAAACwAAABEAAABTAAAACgAAAAUAAAATAAAADgAAAA8AAABhAAAADQAAAAgAAAARAAAADAAAABIAAABrAAAADgAAAAkAAAASAAAADQAAABMAAAB1AAAADwAAABMAAAARAAAAEgAAABAAAAAHAAAABwAAAAEAAAACAAAABAAAAAMAAAAAAAAAAAAAAAcAAAADAAAAAQAAAAIAAAAFAAAABAAAAAAAAAAAAAAAYWxnb3MuYwBfcG9seWZpbGxJbnRlcm5hbABhZGphY2VudEZhY2VEaXJbdG1wRmlqay5mYWNlXVtmaWprLmZhY2VdID09IEtJAGZhY2VpamsuYwBfZmFjZUlqa1BlbnRUb0dlb0JvdW5kYXJ5AGFkamFjZW50RmFjZURpcltjZW50ZXJJSksuZmFjZV1bZmFjZTJdID09IEtJAF9mYWNlSWprVG9HZW9Cb3VuZGFyeQBwb2x5Z29uLT5uZXh0ID09IE5VTEwAbGlua2VkR2VvLmMAYWRkTmV3TGlua2VkUG9seWdvbgBuZXh0ICE9IE5VTEwAbG9vcCAhPSBOVUxMAGFkZE5ld0xpbmtlZExvb3AAcG9seWdvbi0+Zmlyc3QgPT0gTlVMTABhZGRMaW5rZWRMb29wAGNvb3JkICE9IE5VTEwAYWRkTGlua2VkQ29vcmQAbG9vcC0+Zmlyc3QgPT0gTlVMTABpbm5lckxvb3BzICE9IE5VTEwAbm9ybWFsaXplTXVsdGlQb2x5Z29uAGJib3hlcyAhPSBOVUxMAGNhbmRpZGF0ZXMgIT0gTlVMTABmaW5kUG9seWdvbkZvckhvbGUAY2FuZGlkYXRlQkJveGVzICE9IE5VTEwAcmV2RGlyICE9IElOVkFMSURfRElHSVQAbG9jYWxpai5jAGgzVG9Mb2NhbElqawBiYXNlQ2VsbCAhPSBvcmlnaW5CYXNlQ2VsbAAhKG9yaWdpbk9uUGVudCAmJiBpbmRleE9uUGVudCkAcGVudGFnb25Sb3RhdGlvbnMgPj0gMABkaXJlY3Rpb25Sb3RhdGlvbnMgPj0gMABiYXNlQ2VsbCA9PSBvcmlnaW5CYXNlQ2VsbABiYXNlQ2VsbCAhPSBJTlZBTElEX0JBU0VfQ0VMTABsb2NhbElqa1RvSDMAIV9pc0Jhc2VDZWxsUGVudGFnb24oYmFzZUNlbGwpAGJhc2VDZWxsUm90YXRpb25zID49IDAAd2l0aGluUGVudGFnb25Sb3RhdGlvbnMgPj0gMABncmFwaC0+YnVja2V0cyAhPSBOVUxMAHZlcnRleEdyYXBoLmMAaW5pdFZlcnRleEdyYXBoAG5vZGUgIT0gTlVMTABhZGRWZXJ0ZXhOb2Rl";var f=24032;function w(ge){return ge}function B(ge){var Ce=/\b__Z[\w\d_]+/g;return ge.replace(Ce,function(Qe){var nt=Qe;return Qe===nt?Qe:nt+" ["+Qe+"]"})}function U(){var ge=new Error;if(!ge.stack){try{throw new Error(0)}catch(Ce){ge=Ce}if(!ge.stack)return"(no stack trace available)"}return ge.stack.toString()}function Z(){var ge=U();return t.extraStackTrace&&(ge+=`
`+t.extraStackTrace()),B(ge)}function K(ge,Ce,Qe,nt){Ue("Assertion failed: "+Te(ge)+", at: "+[Ce?Te(Ce):"unknown filename",Qe,nt?Te(nt):"unknown function"])}function se(){return di.length}function oe(ge,Ce,Qe){mi.set(mi.subarray(Ce,Ce+Qe),ge)}function fe(ge){return t.___errno_location&&(Ut[t.___errno_location()>>2]=ge),ge}function ye(ge){Ue("OOM")}function Me(ge){try{var Ce=new ArrayBuffer(ge);return Ce.byteLength!=ge?void 0:(new Int8Array(Ce).set(di),Ae(Ce),ui(Ce),1)}catch{}}function xe(ge){var Ce=se(),Qe=16777216,nt=2147483648-Qe;if(ge>nt)return!1;for(var i=16777216,ue=Math.max(Ce,i);ue<ge;)ue<=536870912?ue=gi(2*ue,Qe):ue=Math.min(gi((3*ue+2147483648)/4,Qe),nt);var Dt=Me(ue);return!!Dt}var ke=typeof atob=="function"?atob:function(ge){var Ce="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Qe="",nt,i,ue,Dt,Vt,Wt,It,Bt=0;ge=ge.replace(/[^A-Za-z0-9\+\/\=]/g,"");do Dt=Ce.indexOf(ge.charAt(Bt++)),Vt=Ce.indexOf(ge.charAt(Bt++)),Wt=Ce.indexOf(ge.charAt(Bt++)),It=Ce.indexOf(ge.charAt(Bt++)),nt=Dt<<2|Vt>>4,i=(Vt&15)<<4|Wt>>2,ue=(Wt&3)<<6|It,Qe=Qe+String.fromCharCode(nt),Wt!==64&&(Qe=Qe+String.fromCharCode(i)),It!==64&&(Qe=Qe+String.fromCharCode(ue));while(Bt<ge.length);return Qe};function be(ge){try{for(var Ce=ke(ge),Qe=new Uint8Array(Ce.length),nt=0;nt<Ce.length;++nt)Qe[nt]=Ce.charCodeAt(nt);return Qe}catch{throw new Error("Converting base64 string to bytes failed.")}}function Ne(ge){if(vn(ge))return be(ge.slice(fr.length))}var Re={Math,Int8Array,Int32Array,Uint8Array,Float32Array,Float64Array},Fe={a:Ue,b:re,c:ee,d:K,e:fe,f:se,g:oe,h:xe,i:ye,j:w,k:B,l:Me,m:U,n:Z,o:f,p:Yt},de=function(ge,Ce,Qe){"almost asm";var nt=new ge.Int8Array(Qe),i=new ge.Int32Array(Qe);new ge.Uint8Array(Qe),new ge.Float32Array(Qe);var ue=new ge.Float64Array(Qe),Dt=Ce.p|0,Vt=ge.Math.floor,Wt=ge.Math.abs,It=ge.Math.sqrt,Bt=ge.Math.pow,hi=ge.Math.cos,Zt=ge.Math.sin,ei=ge.Math.tan,Ti=ge.Math.acos,Yi=ge.Math.asin,wn=ge.Math.atan,An=ge.Math.atan2,en=ge.Math.ceil,ar=ge.Math.imul,pi=ge.Math.min,Zn=ge.Math.clz32,Xi=Ce.b,mt=Ce.c,bi=Ce.d,At=Ce.e,Ni=Ce.f,lr=Ce.g,es=Ce.h,kr=Ce.i,ht=24048;function Tn(_){return nt=new Int8Array(_),i=new Int32Array(_),ue=new Float64Array(_),Qe=_,!0}function it(_){_=_|0;var b=0;return b=ht,ht=ht+_|0,ht=ht+15&-16,b|0}function nr(){return ht|0}function ks(_){_=_|0,ht=_}function Es(_,b){_=_|0,ht=_}function Ta(_){return _=_|0,(ar(_*3|0,_+1|0)|0)+1|0}function Hs(_,b,S,C){_=_|0,b=b|0,S=S|0,C=C|0;var G=0,j=0;Pa(_,b,S,C,0)|0&&(j=(ar(S*3|0,S+1|0)|0)+1|0,Br(C|0,0,j<<3|0)|0,G=Ga(j,4)|0,G&&(os(_,b,S,C,G,j,0),Sn(G)))}function co(_,b,S,C,G){_=_|0,b=b|0,S=S|0,C=C|0,G=G|0;var j=0;if(Pa(_,b,S,C,G)|0){if(j=(ar(S*3|0,S+1|0)|0)+1|0,Br(C|0,0,j<<3|0)|0,G|0){Br(G|0,0,j<<2|0)|0,os(_,b,S,C,G,j,0);return}G=Ga(j,4)|0,G&&(os(_,b,S,C,G,j,0),Sn(G))}}function Pa(_,b,S,C,G){_=_|0,b=b|0,S=S|0,C=C|0,G=G|0;var j=0,H=0,ne=0,Se=0,Ge=0,$e=0,kt=0,lt=0,ct=0;if(ct=ht,ht=ht+16|0,lt=ct,j=C,i[j>>2]=_,i[j+4>>2]=b,j=(G|0)!=0,j&&(i[G>>2]=0),Lr(_,b)|0)return lt=1,ht=ct,lt|0;i[lt>>2]=0;e:do if((S|0)>=1)if(j)for(Ge=0,$e=1,kt=1,H=0,j=_;;){if(!(H|Ge)){if(j=an(j,b,4,lt)|0,b=mt()|0,(j|0)==0&(b|0)==0){j=2;break e}if(Lr(j,b)|0){j=1;break e}}if(j=an(j,b,i[16+(Ge<<2)>>2]|0,lt)|0,b=mt()|0,(j|0)==0&(b|0)==0){j=2;break e}if(_=C+(kt<<3)|0,i[_>>2]=j,i[_+4>>2]=b,i[G+(kt<<2)>>2]=$e,H=H+1|0,_=(H|0)==($e|0),ne=Ge+1|0,Se=(ne|0)==6,Lr(j,b)|0){j=1;break e}if($e=$e+(Se&_&1)|0,($e|0)>(S|0)){j=0;break}else Ge=_?Se?0:ne:Ge,kt=kt+1|0,H=_?0:H}else for(Ge=0,$e=1,kt=1,H=0,j=_;;){if(!(H|Ge)){if(j=an(j,b,4,lt)|0,b=mt()|0,(j|0)==0&(b|0)==0){j=2;break e}if(Lr(j,b)|0){j=1;break e}}if(j=an(j,b,i[16+(Ge<<2)>>2]|0,lt)|0,b=mt()|0,(j|0)==0&(b|0)==0){j=2;break e}if(_=C+(kt<<3)|0,i[_>>2]=j,i[_+4>>2]=b,H=H+1|0,_=(H|0)==($e|0),ne=Ge+1|0,Se=(ne|0)==6,Lr(j,b)|0){j=1;break e}if($e=$e+(Se&_&1)|0,($e|0)>(S|0)){j=0;break}else Ge=_?Se?0:ne:Ge,kt=kt+1|0,H=_?0:H}else j=0;while(!1);return lt=j,ht=ct,lt|0}function os(_,b,S,C,G,j,H){_=_|0,b=b|0,S=S|0,C=C|0,G=G|0,j=j|0,H=H|0;var ne=0,Se=0,Ge=0,$e=0,kt=0,lt=0,ct=0;if(kt=ht,ht=ht+16|0,$e=kt,(_|0)==0&(b|0)==0){ht=kt;return}if(ne=Xs(_|0,b|0,j|0,((j|0)<0)<<31>>31|0)|0,mt()|0,Se=C+(ne<<3)|0,lt=Se,ct=i[lt>>2]|0,lt=i[lt+4>>2]|0,Ge=(ct|0)==(_|0)&(lt|0)==(b|0),!((ct|0)==0&(lt|0)==0|Ge))do ne=(ne+1|0)%(j|0)|0,Se=C+(ne<<3)|0,ct=Se,lt=i[ct>>2]|0,ct=i[ct+4>>2]|0,Ge=(lt|0)==(_|0)&(ct|0)==(b|0);while(!((lt|0)==0&(ct|0)==0|Ge));if(ne=G+(ne<<2)|0,Ge&&(i[ne>>2]|0)<=(H|0)){ht=kt;return}if(ct=Se,i[ct>>2]=_,i[ct+4>>2]=b,i[ne>>2]=H,(H|0)>=(S|0)){ht=kt;return}ct=H+1|0,i[$e>>2]=0,lt=an(_,b,2,$e)|0,os(lt,mt()|0,S,C,G,j,ct),i[$e>>2]=0,lt=an(_,b,3,$e)|0,os(lt,mt()|0,S,C,G,j,ct),i[$e>>2]=0,lt=an(_,b,1,$e)|0,os(lt,mt()|0,S,C,G,j,ct),i[$e>>2]=0,lt=an(_,b,5,$e)|0,os(lt,mt()|0,S,C,G,j,ct),i[$e>>2]=0,lt=an(_,b,4,$e)|0,os(lt,mt()|0,S,C,G,j,ct),i[$e>>2]=0,lt=an(_,b,6,$e)|0,os(lt,mt()|0,S,C,G,j,ct),ht=kt}function an(_,b,S,C){_=_|0,b=b|0,S=S|0,C=C|0;var G=0,j=0,H=0,ne=0,Se=0,Ge=0,$e=0,kt=0,lt=0,ct=0;if((i[C>>2]|0)>0){G=0;do S=ds(S)|0,G=G+1|0;while((G|0)<(i[C>>2]|0))}ne=jt(_|0,b|0,45)|0,mt()|0,Se=ne&127,j=rs(_,b)|0,G=jt(_|0,b|0,52)|0,mt()|0,G=G&15;e:do if(!G)H=6;else for(;;){if(kt=(15-G|0)*3|0,lt=jt(_|0,b|0,kt|0)|0,mt()|0,lt=lt&7,ct=(xr(G)|0)==0,G=G+-1|0,$e=ci(7,0,kt|0)|0,b=b&~(mt()|0),kt=ci(i[(ct?464:48)+(lt*28|0)+(S<<2)>>2]|0,0,kt|0)|0,Ge=mt()|0,S=i[(ct?672:256)+(lt*28|0)+(S<<2)>>2]|0,_=kt|_&~$e,b=Ge|b,!S){S=0;break e}if(!G){H=6;break}}while(!1);(H|0)==6&&(ct=i[880+(Se*28|0)+(S<<2)>>2]|0,lt=ci(ct|0,0,45)|0,_=lt|_,b=mt()|0|b&-1040385,S=i[4304+(Se*28|0)+(S<<2)>>2]|0,(ct&127|0)==127&&(ct=ci(i[880+(Se*28|0)+20>>2]|0,0,45)|0,b=mt()|0|b&-1040385,S=i[4304+(Se*28|0)+20>>2]|0,_=Ns(ct|_,b)|0,b=mt()|0,i[C>>2]=(i[C>>2]|0)+1)),H=jt(_|0,b|0,45)|0,mt()|0,H=H&127;e:do if(M(H)|0){t:do if((rs(_,b)|0)==1){if((Se|0)!=(H|0))if(ti(H,i[7728+(Se*28|0)>>2]|0)|0){_=Ar(_,b)|0,j=1,b=mt()|0;break}else{_=Ns(_,b)|0,j=1,b=mt()|0;break}switch(j|0){case 5:{_=Ar(_,b)|0,b=mt()|0,i[C>>2]=(i[C>>2]|0)+5,j=0;break t}case 3:{_=Ns(_,b)|0,b=mt()|0,i[C>>2]=(i[C>>2]|0)+1,j=0;break t}default:return lt=0,ct=0,Xi(lt|0),ct|0}}else j=0;while(!1);if((S|0)>0){G=0;do _=Kr(_,b)|0,b=mt()|0,G=G+1|0;while((G|0)!=(S|0))}if((Se|0)!=(H|0)){if(!(te(H)|0)){if((j|0)!=0|(rs(_,b)|0)!=5)break;i[C>>2]=(i[C>>2]|0)+1;break}switch(ne&127){case 8:case 118:break e}(rs(_,b)|0)!=3&&(i[C>>2]=(i[C>>2]|0)+1)}}else if((S|0)>0){G=0;do _=Ns(_,b)|0,b=mt()|0,G=G+1|0;while((G|0)!=(S|0))}while(!1);return i[C>>2]=((i[C>>2]|0)+S|0)%6|0,lt=b,ct=_,Xi(lt|0),ct|0}function ts(_,b,S,C){_=_|0,b=b|0,S=S|0,C=C|0;var G=0,j=0,H=0,ne=0,Se=0,Ge=0,$e=0,kt=0;if(kt=ht,ht=ht+16|0,$e=kt,!S)return $e=C,i[$e>>2]=_,i[$e+4>>2]=b,$e=0,ht=kt,$e|0;i[$e>>2]=0;e:do if(Lr(_,b)|0)_=1;else{if(j=(S|0)>0,j){G=0,Ge=_;do{if(Ge=an(Ge,b,4,$e)|0,b=mt()|0,(Ge|0)==0&(b|0)==0){_=2;break e}if(G=G+1|0,Lr(Ge,b)|0){_=1;break e}}while((G|0)<(S|0));if(Se=C,i[Se>>2]=Ge,i[Se+4>>2]=b,Se=S+-1|0,j){j=0,H=1,G=Ge,_=b;do{if(G=an(G,_,2,$e)|0,_=mt()|0,(G|0)==0&(_|0)==0){_=2;break e}if(ne=C+(H<<3)|0,i[ne>>2]=G,i[ne+4>>2]=_,H=H+1|0,Lr(G,_)|0){_=1;break e}j=j+1|0}while((j|0)<(S|0));ne=0,j=H;do{if(G=an(G,_,3,$e)|0,_=mt()|0,(G|0)==0&(_|0)==0){_=2;break e}if(H=C+(j<<3)|0,i[H>>2]=G,i[H+4>>2]=_,j=j+1|0,Lr(G,_)|0){_=1;break e}ne=ne+1|0}while((ne|0)<(S|0));H=0;do{if(G=an(G,_,1,$e)|0,_=mt()|0,(G|0)==0&(_|0)==0){_=2;break e}if(ne=C+(j<<3)|0,i[ne>>2]=G,i[ne+4>>2]=_,j=j+1|0,Lr(G,_)|0){_=1;break e}H=H+1|0}while((H|0)<(S|0));H=0;do{if(G=an(G,_,5,$e)|0,_=mt()|0,(G|0)==0&(_|0)==0){_=2;break e}if(ne=C+(j<<3)|0,i[ne>>2]=G,i[ne+4>>2]=_,j=j+1|0,Lr(G,_)|0){_=1;break e}H=H+1|0}while((H|0)<(S|0));H=0;do{if(G=an(G,_,4,$e)|0,_=mt()|0,(G|0)==0&(_|0)==0){_=2;break e}if(ne=C+(j<<3)|0,i[ne>>2]=G,i[ne+4>>2]=_,j=j+1|0,Lr(G,_)|0){_=1;break e}H=H+1|0}while((H|0)<(S|0));for(H=0;;){if(G=an(G,_,6,$e)|0,_=mt()|0,(G|0)==0&(_|0)==0){_=2;break e}if((H|0)!=(Se|0))if(ne=C+(j<<3)|0,i[ne>>2]=G,i[ne+4>>2]=_,!(Lr(G,_)|0))j=j+1|0;else{_=1;break e}if(H=H+1|0,(H|0)>=(S|0)){H=Ge,j=b;break}}}else H=Ge,G=Ge,j=b,_=b}else H=C,i[H>>2]=_,i[H+4>>2]=b,H=_,G=_,j=b,_=b;_=((H|0)!=(G|0)|(j|0)!=(_|0))&1}while(!1);return $e=_,ht=kt,$e|0}function yr(_,b){_=_|0,b=b|0;var S=0,C=0,G=0,j=0,H=0,ne=0;if(j=ht,ht=ht+48|0,G=j+8|0,C=j,ne=_,H=i[ne+4>>2]|0,S=C,i[S>>2]=i[ne>>2],i[S+4>>2]=H,Zi(C,G),G=ra(G,b)|0,b=i[C>>2]|0,C=i[_+8>>2]|0,(C|0)<=0)return ne=b,H=(G|0)<(ne|0),ne=H?ne:G,ne=ne+12|0,ht=j,ne|0;S=i[_+12>>2]|0,_=0;do b=(i[S+(_<<3)>>2]|0)+b|0,_=_+1|0;while((_|0)<(C|0));return ne=(G|0)<(b|0),ne=ne?b:G,ne=ne+12|0,ht=j,ne|0}function Zs(_,b,S){_=_|0,b=b|0,S=S|0;var C=0,G=0,j=0,H=0,ne=0,Se=0;if(ne=ht,ht=ht+48|0,C=ne+8|0,G=ne,!(va(_,b,S)|0)){ht=ne;return}if(Se=_,j=i[Se+4>>2]|0,H=G,i[H>>2]=i[Se>>2],i[H+4>>2]=j,Zi(G,C),H=ra(C,b)|0,b=i[G>>2]|0,j=i[_+8>>2]|0,(j|0)>0){G=i[_+12>>2]|0,C=0;do b=(i[G+(C<<3)>>2]|0)+b|0,C=C+1|0;while((C|0)!=(j|0))}if(b=(H|0)<(b|0)?b:H,(b|0)<=-12){ht=ne;return}Se=b+11|0,Br(S|0,0,(((Se|0)>0?Se:0)<<3)+8|0)|0,ht=ne}function va(_,b,S){_=_|0,b=b|0,S=S|0;var C=0,G=0,j=0,H=0,ne=0,Se=0,Ge=0,$e=0,kt=0,lt=0,ct=0,L=0,r=0,d=0,k=0,I=0,R=0,q=0,a=0,o=0,h=0,p=0,v=0,E=0,z=0,F=0,Y=0,J=0,ve=0,Ie=0;if(Ie=ht,ht=ht+112|0,F=Ie+80|0,Se=Ie+72|0,Y=Ie,J=Ie+56|0,Ge=_+8|0,ve=Us((i[Ge>>2]<<5)+32|0)|0,ve||bi(22848,22448,800,22456),Va(_,ve),j=_,C=i[j+4>>2]|0,ne=Se,i[ne>>2]=i[j>>2],i[ne+4>>2]=C,Zi(Se,F),ne=ra(F,b)|0,C=i[Se>>2]|0,j=i[Ge>>2]|0,(j|0)>0){H=i[_+12>>2]|0,G=0;do C=(i[H+(G<<3)>>2]|0)+C|0,G=G+1|0;while((G|0)!=(j|0))}if(ne=(ne|0)<(C|0)?C:ne,z=ne+12|0,G=Ga(z,8)|0,$e=Ga(z,8)|0,i[F>>2]=0,v=_,E=i[v+4>>2]|0,C=Se,i[C>>2]=i[v>>2],i[C+4>>2]=E,C=Ba(Se,z,b,F,G,$e)|0,C|0)return Sn(G),Sn($e),Sn(ve),ve=C,ht=Ie,ve|0;e:do if((i[Ge>>2]|0)>0){for(j=_+12|0,C=0;H=Ba((i[j>>2]|0)+(C<<3)|0,z,b,F,G,$e)|0,C=C+1|0,!(H|0);)if((C|0)>=(i[Ge>>2]|0))break e;return Sn(G),Sn($e),Sn(ve),ve=H,ht=Ie,ve|0}while(!1);(ne|0)>-12&&Br($e|0,0,((z|0)>1?z:1)<<3|0)|0;e:do if((i[F>>2]|0)>0){E=((z|0)<0)<<31>>31,q=G,a=$e,o=G,h=G,p=$e,v=G,C=G,d=G,k=$e,I=$e,R=$e,G=$e;t:for(;;){for(r=i[F>>2]|0,ct=0,L=0,j=0;;){H=Y,ne=H+56|0;do i[H>>2]=0,H=H+4|0;while((H|0)<(ne|0));if(b=q+(ct<<3)|0,Se=i[b>>2]|0,b=i[b+4>>2]|0,Pa(Se,b,1,Y,0)|0){H=Y,ne=H+56|0;do i[H>>2]=0,H=H+4|0;while((H|0)<(ne|0));H=Ga(7,4)|0,H|0&&(os(Se,b,1,Y,H,7,0),Sn(H))}lt=0;do{kt=Y+(lt<<3)|0,$e=i[kt>>2]|0,kt=i[kt+4>>2]|0;i:do if(!(($e|0)==0&(kt|0)==0)){if(Se=Xs($e|0,kt|0,z|0,E|0)|0,mt()|0,H=S+(Se<<3)|0,ne=H,b=i[ne>>2]|0,ne=i[ne+4>>2]|0,!((b|0)==0&(ne|0)==0))for(Ge=0;;){if((Ge|0)>(z|0))break t;if((b|0)==($e|0)&(ne|0)==(kt|0))break i;if(Se=(Se+1|0)%(z|0)|0,H=S+(Se<<3)|0,ne=H,b=i[ne>>2]|0,ne=i[ne+4>>2]|0,(b|0)==0&(ne|0)==0)break;Ge=Ge+1|0}($e|0)==0&(kt|0)==0||(ys($e,kt,J),Ua(_,ve,J)|0&&(Ge=H,i[Ge>>2]=$e,i[Ge+4>>2]=kt,Ge=a+(j<<3)|0,i[Ge>>2]=$e,i[Ge+4>>2]=kt,j=j+1|0))}while(!1);lt=lt+1|0}while(lt>>>0<7);if(L=L+1|0,(L|0)>=(r|0))break;ct=ct+1|0}if((r|0)>0&&Br(o|0,0,r<<3|0)|0,i[F>>2]=j,(j|0)>0)$e=G,kt=R,lt=v,ct=I,L=k,r=a,G=d,R=C,I=h,k=o,d=$e,C=kt,v=p,p=lt,h=ct,o=L,a=q,q=r;else break e}return Sn(h),Sn(p),Sn(ve),ve=-1,ht=Ie,ve|0}else C=$e;while(!1);return Sn(ve),Sn(G),Sn(C),ve=0,ht=Ie,ve|0}function Ba(_,b,S,C,G,j){_=_|0,b=b|0,S=S|0,C=C|0,G=G|0,j=j|0;var H=0,ne=0,Se=0,Ge=0,$e=0,kt=0,lt=0,ct=0,L=0,r=0,d=0,k=0,I=0,R=0,q=0,a=0,o=0,h=0,p=0,v=0,E=0,z=0,F=0;if(E=ht,ht=ht+48|0,o=E+32|0,h=E+16|0,p=E,H=i[_>>2]|0,(H|0)<=0)return v=0,ht=E,v|0;k=_+4|0,I=o+8|0,R=h+8|0,q=p+8|0,a=((b|0)<0)<<31>>31,d=0;e:for(;;){ne=i[k>>2]|0,L=ne+(d<<4)|0,i[o>>2]=i[L>>2],i[o+4>>2]=i[L+4>>2],i[o+8>>2]=i[L+8>>2],i[o+12>>2]=i[L+12>>2],(d|0)==(H+-1|0)?(i[h>>2]=i[ne>>2],i[h+4>>2]=i[ne+4>>2],i[h+8>>2]=i[ne+8>>2],i[h+12>>2]=i[ne+12>>2]):(L=ne+(d+1<<4)|0,i[h>>2]=i[L>>2],i[h+4>>2]=i[L+4>>2],i[h+8>>2]=i[L+8>>2],i[h+12>>2]=i[L+12>>2]),L=sa(o,h,S)|0;t:do if((L|0)>0){r=+(L|0),ct=0;i:for(;;){F=+(L-ct|0),z=+(ct|0),ue[p>>3]=+ue[o>>3]*F/r+ +ue[h>>3]*z/r,ue[q>>3]=+ue[I>>3]*F/r+ +ue[R>>3]*z/r,kt=Io(p,S)|0,lt=mt()|0,ne=Xs(kt|0,lt|0,b|0,a|0)|0,mt()|0,H=j+(ne<<3)|0,Se=H,Ge=i[Se>>2]|0,Se=i[Se+4>>2]|0;n:do if((Ge|0)==0&(Se|0)==0)v=14;else for($e=0;;){if(($e|0)>(b|0)){H=1;break n}if((Ge|0)==(kt|0)&(Se|0)==(lt|0)){H=7;break n}if(ne=(ne+1|0)%(b|0)|0,H=j+(ne<<3)|0,Se=H,Ge=i[Se>>2]|0,Se=i[Se+4>>2]|0,(Ge|0)==0&(Se|0)==0){v=14;break}else $e=$e+1|0}while(!1);switch((v|0)==14&&(v=0,(kt|0)==0&(lt|0)==0?H=7:(i[H>>2]=kt,i[H+4>>2]=lt,H=i[C>>2]|0,$e=G+(H<<3)|0,i[$e>>2]=kt,i[$e+4>>2]=lt,i[C>>2]=H+1,H=0)),H&7){case 7:case 0:break;default:break i}if(ct=ct+1|0,(L|0)<=(ct|0)){v=8;break t}}if(H|0){H=-1,v=20;break e}}else v=8;while(!1);if((v|0)==8&&(v=0),d=d+1|0,H=i[_>>2]|0,(d|0)>=(H|0)){H=0,v=20;break}}return(v|0)==20?(ht=E,H|0):0}function Bs(_,b,S){_=_|0,b=b|0,S=S|0;var C=0,G=0,j=0,H=0,ne=0,Se=0,Ge=0;if(Ge=ht,ht=ht+176|0,Se=Ge,(b|0)<1){oA(S,0,0),ht=Ge;return}H=_,H=jt(i[H>>2]|0,i[H+4>>2]|0,52)|0,mt()|0,oA(S,(b|0)>6?b:6,H&15),H=0;do{if(C=_+(H<<3)|0,Ca(i[C>>2]|0,i[C+4>>2]|0,Se),C=i[Se>>2]|0,(C|0)>0){ne=0;do j=Se+8+(ne<<4)|0,ne=ne+1|0,C=Se+8+(((ne|0)%(C|0)|0)<<4)|0,G=TA(S,C,j)|0,G?MA(S,G)|0:pl(S,j,C)|0,C=i[Se>>2]|0;while((ne|0)<(C|0))}H=H+1|0}while((H|0)!=(b|0));ht=Ge}function Ds(_,b,S){_=_|0,b=b|0,S=S|0;var C=0,G=0,j=0,H=0;if(j=ht,ht=ht+32|0,C=j,G=j+16|0,Bs(_,b,G),i[S>>2]=0,i[S+4>>2]=0,i[S+8>>2]=0,_=to(G)|0,!_){xn(S)|0,Fs(G),ht=j;return}do{b=Hi(S)|0;do mn(b,_)|0,H=_+16|0,i[C>>2]=i[H>>2],i[C+4>>2]=i[H+4>>2],i[C+8>>2]=i[H+8>>2],i[C+12>>2]=i[H+12>>2],MA(G,_)|0,_=gl(G,C)|0;while(_|0);_=to(G)|0}while(_|0);xn(S)|0,Fs(G),ht=j}function M(_){return _=_|0,i[7728+(_*28|0)+16>>2]|0}function te(_){return _=_|0,(_|0)==4|(_|0)==117|0}function Be(_){return _=_|0,i[11152+((i[_>>2]|0)*216|0)+((i[_+4>>2]|0)*72|0)+((i[_+8>>2]|0)*24|0)+(i[_+12>>2]<<3)>>2]|0}function Ye(_){return _=_|0,i[11152+((i[_>>2]|0)*216|0)+((i[_+4>>2]|0)*72|0)+((i[_+8>>2]|0)*24|0)+(i[_+12>>2]<<3)+4>>2]|0}function dt(_,b){_=_|0,b=b|0,_=7728+(_*28|0)|0,i[b>>2]=i[_>>2],i[b+4>>2]=i[_+4>>2],i[b+8>>2]=i[_+8>>2],i[b+12>>2]=i[_+12>>2]}function Qt(_,b){_=_|0,b=b|0;var S=0,C=0;if(b>>>0>20)return b=-1,b|0;do if((i[11152+(b*216|0)>>2]|0)!=(_|0))if((i[11152+(b*216|0)+8>>2]|0)!=(_|0))if((i[11152+(b*216|0)+16>>2]|0)!=(_|0))if((i[11152+(b*216|0)+24>>2]|0)!=(_|0))if((i[11152+(b*216|0)+32>>2]|0)!=(_|0))if((i[11152+(b*216|0)+40>>2]|0)!=(_|0))if((i[11152+(b*216|0)+48>>2]|0)!=(_|0))if((i[11152+(b*216|0)+56>>2]|0)!=(_|0))if((i[11152+(b*216|0)+64>>2]|0)!=(_|0))if((i[11152+(b*216|0)+72>>2]|0)!=(_|0))if((i[11152+(b*216|0)+80>>2]|0)!=(_|0))if((i[11152+(b*216|0)+88>>2]|0)!=(_|0))if((i[11152+(b*216|0)+96>>2]|0)!=(_|0))if((i[11152+(b*216|0)+104>>2]|0)!=(_|0))if((i[11152+(b*216|0)+112>>2]|0)!=(_|0))if((i[11152+(b*216|0)+120>>2]|0)!=(_|0))if((i[11152+(b*216|0)+128>>2]|0)!=(_|0))if((i[11152+(b*216|0)+136>>2]|0)==(_|0))_=2,S=1,C=2;else{if((i[11152+(b*216|0)+144>>2]|0)==(_|0)){_=0,S=2,C=0;break}if((i[11152+(b*216|0)+152>>2]|0)==(_|0)){_=0,S=2,C=1;break}if((i[11152+(b*216|0)+160>>2]|0)==(_|0)){_=0,S=2,C=2;break}if((i[11152+(b*216|0)+168>>2]|0)==(_|0)){_=1,S=2,C=0;break}if((i[11152+(b*216|0)+176>>2]|0)==(_|0)){_=1,S=2,C=1;break}if((i[11152+(b*216|0)+184>>2]|0)==(_|0)){_=1,S=2,C=2;break}if((i[11152+(b*216|0)+192>>2]|0)==(_|0)){_=2,S=2,C=0;break}if((i[11152+(b*216|0)+200>>2]|0)==(_|0)){_=2,S=2,C=1;break}if((i[11152+(b*216|0)+208>>2]|0)==(_|0)){_=2,S=2,C=2;break}else _=-1;return _|0}else _=2,S=1,C=1;else _=2,S=1,C=0;else _=1,S=1,C=2;else _=1,S=1,C=1;else _=1,S=1,C=0;else _=0,S=1,C=2;else _=0,S=1,C=1;else _=0,S=1,C=0;else _=2,S=0,C=2;else _=2,S=0,C=1;else _=2,S=0,C=0;else _=1,S=0,C=2;else _=1,S=0,C=1;else _=1,S=0,C=0;else _=0,S=0,C=2;else _=0,S=0,C=1;else _=0,S=0,C=0;while(!1);return b=i[11152+(b*216|0)+(S*72|0)+(_*24|0)+(C<<3)+4>>2]|0,b|0}function ti(_,b){return _=_|0,b=b|0,(i[7728+(_*28|0)+20>>2]|0)==(b|0)?(b=1,b|0):(b=(i[7728+(_*28|0)+24>>2]|0)==(b|0),b|0)}function Ii(_,b){return _=_|0,b=b|0,i[880+(_*28|0)+(b<<2)>>2]|0}function zi(_,b){return _=_|0,b=b|0,(i[880+(_*28|0)>>2]|0)==(b|0)?(b=0,b|0):(i[880+(_*28|0)+4>>2]|0)==(b|0)?(b=1,b|0):(i[880+(_*28|0)+8>>2]|0)==(b|0)?(b=2,b|0):(i[880+(_*28|0)+12>>2]|0)==(b|0)?(b=3,b|0):(i[880+(_*28|0)+16>>2]|0)==(b|0)?(b=4,b|0):(i[880+(_*28|0)+20>>2]|0)==(b|0)?(b=5,b|0):((i[880+(_*28|0)+24>>2]|0)==(b|0)?6:7)|0}function En(){return 122}function Ln(_){_=_|0;var b=0,S=0,C=0;b=0;do ci(b|0,0,45)|0,C=mt()|0|134225919,S=_+(b<<3)|0,i[S>>2]=-1,i[S+4>>2]=C,b=b+1|0;while((b|0)!=122)}function or(_){return _=_|0,+ue[_+16>>3]<+ue[_+24>>3]|0}function na(_,b){_=_|0,b=b|0;var S=0,C=0,G=0;return S=+ue[b>>3],!(S>=+ue[_+8>>3])||!(S<=+ue[_>>3])?(b=0,b|0):(C=+ue[_+16>>3],S=+ue[_+24>>3],G=+ue[b+8>>3],b=G>=S,_=G<=C&1,C<S?b&&(_=1):b||(_=0),b=(_|0)!=0,b|0)}function ra(_,b){_=_|0,b=b|0;var S=0,C=0,G=0,j=0,H=0,ne=0,Se=0,Ge=0;H=ht,ht=ht+288|0,S=H+264|0,C=H+96|0,G=H,j=G,ne=j+96|0;do i[j>>2]=0,j=j+4|0;while((j|0)<(ne|0));return mo(b,G),j=G,ne=i[j>>2]|0,j=i[j+4>>2]|0,ys(ne,j,S),Ca(ne,j,C),Se=+Xr(S,C+8|0),ue[S>>3]=+ue[_>>3],j=S+8|0,ue[j>>3]=+ue[_+16>>3],ue[C>>3]=+ue[_+8>>3],ne=C+8|0,ue[ne>>3]=+ue[_+24>>3],Ge=+Xr(S,C),ne=~~+en(+(Ge*Ge/+io(+ +Wt(+((+ue[j>>3]-+ue[ne>>3])/(+ue[S>>3]-+ue[C>>3]))),3)/(Se*(Se*2.59807621135)*.8))),ht=H,(ne|0?ne:1)|0}function sa(_,b,S){_=_|0,b=b|0,S=S|0;var C=0,G=0,j=0,H=0,ne=0,Se=0,Ge=0;ne=ht,ht=ht+288|0,C=ne+264|0,G=ne+96|0,j=ne,H=j,Se=H+96|0;do i[H>>2]=0,H=H+4|0;while((H|0)<(Se|0));return mo(S,j),Se=j,H=i[Se>>2]|0,Se=i[Se+4>>2]|0,ys(H,Se,C),Ca(H,Se,G),Ge=+Xr(C,G+8|0),Se=~~+en(+(+Xr(_,b)/(Ge*2))),ht=ne,(Se|0?Se:1)|0}function Da(_,b,S,C){_=_|0,b=b|0,S=S|0,C=C|0,i[_>>2]=b,i[_+4>>2]=S,i[_+8>>2]=C}function Yn(_,b){_=_|0,b=b|0;var S=0,C=0,G=0,j=0,H=0,ne=0,Se=0,Ge=0,$e=0,kt=0,lt=0;kt=b+8|0,i[kt>>2]=0,Se=+ue[_>>3],H=+Wt(+Se),Ge=+ue[_+8>>3],ne=+Wt(+Ge)/.8660254037844386,H=H+ne*.5,S=~~H,_=~~ne,H=H-+(S|0),ne=ne-+(_|0);do if(H<.5)if(H<.3333333333333333)if(i[b>>2]=S,ne<(H+1)*.5){i[b+4>>2]=_;break}else{_=_+1|0,i[b+4>>2]=_;break}else if(lt=1-H,_=(!(ne<lt)&1)+_|0,i[b+4>>2]=_,lt<=ne&ne<H*2){S=S+1|0,i[b>>2]=S;break}else{i[b>>2]=S;break}else{if(!(H<.6666666666666666))if(S=S+1|0,i[b>>2]=S,ne<H*.5){i[b+4>>2]=_;break}else{_=_+1|0,i[b+4>>2]=_;break}if(ne<1-H){if(i[b+4>>2]=_,H*2+-1<ne){i[b>>2]=S;break}}else _=_+1|0,i[b+4>>2]=_;S=S+1|0,i[b>>2]=S}while(!1);do if(Se<0)if(_&1){$e=(_+1|0)/2|0,$e=vo(S|0,((S|0)<0)<<31>>31|0,$e|0,(($e|0)<0)<<31>>31|0)|0,S=~~(+(S|0)-((+($e>>>0)+4294967296*+(mt()|0))*2+1)),i[b>>2]=S;break}else{$e=(_|0)/2|0,$e=vo(S|0,((S|0)<0)<<31>>31|0,$e|0,(($e|0)<0)<<31>>31|0)|0,S=~~(+(S|0)-(+($e>>>0)+4294967296*+(mt()|0))*2),i[b>>2]=S;break}while(!1);$e=b+4|0,Ge<0&&(S=S-((_<<1|1|0)/2|0)|0,i[b>>2]=S,_=0-_|0,i[$e>>2]=_),C=_-S|0,(S|0)<0?(G=0-S|0,i[$e>>2]=C,i[kt>>2]=G,i[b>>2]=0,_=C,S=0):G=0,(_|0)<0&&(S=S-_|0,i[b>>2]=S,G=G-_|0,i[kt>>2]=G,i[$e>>2]=0,_=0),j=S-G|0,C=_-G|0,(G|0)<0&&(i[b>>2]=j,i[$e>>2]=C,i[kt>>2]=0,_=C,S=j,G=0),C=(_|0)<(S|0)?_:S,C=(G|0)<(C|0)?G:C,!((C|0)<=0)&&(i[b>>2]=S-C,i[$e>>2]=_-C,i[kt>>2]=G-C)}function yn(_){_=_|0;var b=0,S=0,C=0,G=0,j=0,H=0;b=i[_>>2]|0,H=_+4|0,S=i[H>>2]|0,(b|0)<0&&(S=S-b|0,i[H>>2]=S,j=_+8|0,i[j>>2]=(i[j>>2]|0)-b,i[_>>2]=0,b=0),(S|0)<0?(b=b-S|0,i[_>>2]=b,j=_+8|0,G=(i[j>>2]|0)-S|0,i[j>>2]=G,i[H>>2]=0,S=0):(G=_+8|0,j=G,G=i[G>>2]|0),(G|0)<0&&(b=b-G|0,i[_>>2]=b,S=S-G|0,i[H>>2]=S,i[j>>2]=0,G=0),C=(S|0)<(b|0)?S:b,C=(G|0)<(C|0)?G:C,!((C|0)<=0)&&(i[_>>2]=b-C,i[H>>2]=S-C,i[j>>2]=G-C)}function Rn(_,b){_=_|0,b=b|0;var S=0,C=0;C=i[_+8>>2]|0,S=+((i[_+4>>2]|0)-C|0),ue[b>>3]=+((i[_>>2]|0)-C|0)-S*.5,ue[b+8>>3]=S*.8660254037844386}function ur(_,b,S){_=_|0,b=b|0,S=S|0,i[S>>2]=(i[b>>2]|0)+(i[_>>2]|0),i[S+4>>2]=(i[b+4>>2]|0)+(i[_+4>>2]|0),i[S+8>>2]=(i[b+8>>2]|0)+(i[_+8>>2]|0)}function is(_,b,S){_=_|0,b=b|0,S=S|0,i[S>>2]=(i[_>>2]|0)-(i[b>>2]|0),i[S+4>>2]=(i[_+4>>2]|0)-(i[b+4>>2]|0),i[S+8>>2]=(i[_+8>>2]|0)-(i[b+8>>2]|0)}function dr(_,b){_=_|0,b=b|0;var S=0,C=0;S=ar(i[_>>2]|0,b)|0,i[_>>2]=S,S=_+4|0,C=ar(i[S>>2]|0,b)|0,i[S>>2]=C,_=_+8|0,b=ar(i[_>>2]|0,b)|0,i[_>>2]=b}function fo(_){_=_|0;var b=0,S=0,C=0,G=0,j=0,H=0,ne=0;H=i[_>>2]|0,ne=(H|0)<0,C=(i[_+4>>2]|0)-(ne?H:0)|0,j=(C|0)<0,G=(j?0-C|0:0)+((i[_+8>>2]|0)-(ne?H:0))|0,S=(G|0)<0,_=S?0:G,b=(j?0:C)-(S?G:0)|0,G=(ne?0:H)-(j?C:0)-(S?G:0)|0,S=(b|0)<(G|0)?b:G,S=(_|0)<(S|0)?_:S,C=(S|0)>0,_=_-(C?S:0)|0,b=b-(C?S:0)|0;e:do switch(G-(C?S:0)|0){case 0:switch(b|0){case 0:return ne=_|0?(_|0)==1?1:7:0,ne|0;case 1:return ne=_|0?(_|0)==1?3:7:2,ne|0;default:break e}case 1:switch(b|0){case 0:return ne=_|0?(_|0)==1?5:7:4,ne|0;case 1:{if(!_)_=6;else break e;return _|0}default:break e}}while(!1);return ne=7,ne|0}function Go(_){_=_|0;var b=0,S=0,C=0,G=0,j=0,H=0,ne=0;H=_+8|0,S=i[H>>2]|0,b=(i[_>>2]|0)-S|0,ne=_+4|0,S=(i[ne>>2]|0)-S|0,C=zr(+((b*3|0)-S|0)/7)|0,i[_>>2]=C,b=zr(+((S<<1)+b|0)/7)|0,i[ne>>2]=b,i[H>>2]=0,S=b-C|0,(C|0)<0?(j=0-C|0,i[ne>>2]=S,i[H>>2]=j,i[_>>2]=0,b=S,C=0,S=j):S=0,(b|0)<0&&(C=C-b|0,i[_>>2]=C,S=S-b|0,i[H>>2]=S,i[ne>>2]=0,b=0),j=C-S|0,G=b-S|0,(S|0)<0?(i[_>>2]=j,i[ne>>2]=G,i[H>>2]=0,b=G,G=j,S=0):G=C,C=(b|0)<(G|0)?b:G,C=(S|0)<(C|0)?S:C,!((C|0)<=0)&&(i[_>>2]=G-C,i[ne>>2]=b-C,i[H>>2]=S-C)}function ya(_){_=_|0;var b=0,S=0,C=0,G=0,j=0,H=0,ne=0;H=_+8|0,S=i[H>>2]|0,b=(i[_>>2]|0)-S|0,ne=_+4|0,S=(i[ne>>2]|0)-S|0,C=zr(+((b<<1)+S|0)/7)|0,i[_>>2]=C,b=zr(+((S*3|0)-b|0)/7)|0,i[ne>>2]=b,i[H>>2]=0,S=b-C|0,(C|0)<0?(j=0-C|0,i[ne>>2]=S,i[H>>2]=j,i[_>>2]=0,b=S,C=0,S=j):S=0,(b|0)<0&&(C=C-b|0,i[_>>2]=C,S=S-b|0,i[H>>2]=S,i[ne>>2]=0,b=0),j=C-S|0,G=b-S|0,(S|0)<0?(i[_>>2]=j,i[ne>>2]=G,i[H>>2]=0,b=G,G=j,S=0):G=C,C=(b|0)<(G|0)?b:G,C=(S|0)<(C|0)?S:C,!((C|0)<=0)&&(i[_>>2]=G-C,i[ne>>2]=b-C,i[H>>2]=S-C)}function Ya(_){_=_|0;var b=0,S=0,C=0,G=0,j=0,H=0,ne=0;b=i[_>>2]|0,H=_+4|0,S=i[H>>2]|0,ne=_+8|0,C=i[ne>>2]|0,G=S+(b*3|0)|0,i[_>>2]=G,S=C+(S*3|0)|0,i[H>>2]=S,b=(C*3|0)+b|0,i[ne>>2]=b,C=S-G|0,(G|0)<0?(b=b-G|0,i[H>>2]=C,i[ne>>2]=b,i[_>>2]=0,S=C,C=0):C=G,(S|0)<0&&(C=C-S|0,i[_>>2]=C,b=b-S|0,i[ne>>2]=b,i[H>>2]=0,S=0),j=C-b|0,G=S-b|0,(b|0)<0?(i[_>>2]=j,i[H>>2]=G,i[ne>>2]=0,C=j,b=0):G=S,S=(G|0)<(C|0)?G:C,S=(b|0)<(S|0)?b:S,!((S|0)<=0)&&(i[_>>2]=C-S,i[H>>2]=G-S,i[ne>>2]=b-S)}function Hr(_){_=_|0;var b=0,S=0,C=0,G=0,j=0,H=0,ne=0;G=i[_>>2]|0,H=_+4|0,b=i[H>>2]|0,ne=_+8|0,S=i[ne>>2]|0,C=(b*3|0)+G|0,G=S+(G*3|0)|0,i[_>>2]=G,i[H>>2]=C,b=(S*3|0)+b|0,i[ne>>2]=b,S=C-G|0,(G|0)<0?(b=b-G|0,i[H>>2]=S,i[ne>>2]=b,i[_>>2]=0,G=0):S=C,(S|0)<0&&(G=G-S|0,i[_>>2]=G,b=b-S|0,i[ne>>2]=b,i[H>>2]=0,S=0),j=G-b|0,C=S-b|0,(b|0)<0?(i[_>>2]=j,i[H>>2]=C,i[ne>>2]=0,G=j,b=0):C=S,S=(C|0)<(G|0)?C:G,S=(b|0)<(S|0)?b:S,!((S|0)<=0)&&(i[_>>2]=G-S,i[H>>2]=C-S,i[ne>>2]=b-S)}function ko(_,b){_=_|0,b=b|0;var S=0,C=0,G=0,j=0,H=0,ne=0;(b+-1|0)>>>0>=6||(G=(i[15472+(b*12|0)>>2]|0)+(i[_>>2]|0)|0,i[_>>2]=G,ne=_+4|0,C=(i[15472+(b*12|0)+4>>2]|0)+(i[ne>>2]|0)|0,i[ne>>2]=C,H=_+8|0,b=(i[15472+(b*12|0)+8>>2]|0)+(i[H>>2]|0)|0,i[H>>2]=b,S=C-G|0,(G|0)<0?(b=b-G|0,i[ne>>2]=S,i[H>>2]=b,i[_>>2]=0,C=0):(S=C,C=G),(S|0)<0&&(C=C-S|0,i[_>>2]=C,b=b-S|0,i[H>>2]=b,i[ne>>2]=0,S=0),j=C-b|0,G=S-b|0,(b|0)<0?(i[_>>2]=j,i[ne>>2]=G,i[H>>2]=0,C=j,b=0):G=S,S=(G|0)<(C|0)?G:C,S=(b|0)<(S|0)?b:S,!((S|0)<=0)&&(i[_>>2]=C-S,i[ne>>2]=G-S,i[H>>2]=b-S))}function pa(_){_=_|0;var b=0,S=0,C=0,G=0,j=0,H=0,ne=0;G=i[_>>2]|0,H=_+4|0,b=i[H>>2]|0,ne=_+8|0,S=i[ne>>2]|0,C=b+G|0,G=S+G|0,i[_>>2]=G,i[H>>2]=C,b=S+b|0,i[ne>>2]=b,S=C-G|0,(G|0)<0?(b=b-G|0,i[H>>2]=S,i[ne>>2]=b,i[_>>2]=0,C=0):(S=C,C=G),(S|0)<0&&(C=C-S|0,i[_>>2]=C,b=b-S|0,i[ne>>2]=b,i[H>>2]=0,S=0),j=C-b|0,G=S-b|0,(b|0)<0?(i[_>>2]=j,i[H>>2]=G,i[ne>>2]=0,C=j,b=0):G=S,S=(G|0)<(C|0)?G:C,S=(b|0)<(S|0)?b:S,!((S|0)<=0)&&(i[_>>2]=C-S,i[H>>2]=G-S,i[ne>>2]=b-S)}function La(_){_=_|0;var b=0,S=0,C=0,G=0,j=0,H=0,ne=0;b=i[_>>2]|0,H=_+4|0,C=i[H>>2]|0,ne=_+8|0,S=i[ne>>2]|0,G=C+b|0,i[_>>2]=G,C=S+C|0,i[H>>2]=C,b=S+b|0,i[ne>>2]=b,S=C-G|0,(G|0)<0?(b=b-G|0,i[H>>2]=S,i[ne>>2]=b,i[_>>2]=0,C=0):(S=C,C=G),(S|0)<0&&(C=C-S|0,i[_>>2]=C,b=b-S|0,i[ne>>2]=b,i[H>>2]=0,S=0),j=C-b|0,G=S-b|0,(b|0)<0?(i[_>>2]=j,i[H>>2]=G,i[ne>>2]=0,C=j,b=0):G=S,S=(G|0)<(C|0)?G:C,S=(b|0)<(S|0)?b:S,!((S|0)<=0)&&(i[_>>2]=C-S,i[H>>2]=G-S,i[ne>>2]=b-S)}function ds(_){switch(_=_|0,_|0){case 1:{_=5;break}case 5:{_=4;break}case 4:{_=6;break}case 6:{_=2;break}case 2:{_=3;break}case 3:{_=1;break}}return _|0}function As(_){switch(_=_|0,_|0){case 1:{_=3;break}case 3:{_=2;break}case 2:{_=6;break}case 6:{_=4;break}case 4:{_=5;break}case 5:{_=1;break}}return _|0}function po(_){_=_|0;var b=0,S=0,C=0,G=0,j=0,H=0,ne=0;b=i[_>>2]|0,H=_+4|0,S=i[H>>2]|0,ne=_+8|0,C=i[ne>>2]|0,G=S+(b<<1)|0,i[_>>2]=G,S=C+(S<<1)|0,i[H>>2]=S,b=(C<<1)+b|0,i[ne>>2]=b,C=S-G|0,(G|0)<0?(b=b-G|0,i[H>>2]=C,i[ne>>2]=b,i[_>>2]=0,S=C,C=0):C=G,(S|0)<0&&(C=C-S|0,i[_>>2]=C,b=b-S|0,i[ne>>2]=b,i[H>>2]=0,S=0),j=C-b|0,G=S-b|0,(b|0)<0?(i[_>>2]=j,i[H>>2]=G,i[ne>>2]=0,C=j,b=0):G=S,S=(G|0)<(C|0)?G:C,S=(b|0)<(S|0)?b:S,!((S|0)<=0)&&(i[_>>2]=C-S,i[H>>2]=G-S,i[ne>>2]=b-S)}function Ls(_){_=_|0;var b=0,S=0,C=0,G=0,j=0,H=0,ne=0;G=i[_>>2]|0,H=_+4|0,b=i[H>>2]|0,ne=_+8|0,S=i[ne>>2]|0,C=(b<<1)+G|0,G=S+(G<<1)|0,i[_>>2]=G,i[H>>2]=C,b=(S<<1)+b|0,i[ne>>2]=b,S=C-G|0,(G|0)<0?(b=b-G|0,i[H>>2]=S,i[ne>>2]=b,i[_>>2]=0,G=0):S=C,(S|0)<0&&(G=G-S|0,i[_>>2]=G,b=b-S|0,i[ne>>2]=b,i[H>>2]=0,S=0),j=G-b|0,C=S-b|0,(b|0)<0?(i[_>>2]=j,i[H>>2]=C,i[ne>>2]=0,G=j,b=0):C=S,S=(C|0)<(G|0)?C:G,S=(b|0)<(S|0)?b:S,!((S|0)<=0)&&(i[_>>2]=G-S,i[H>>2]=C-S,i[ne>>2]=b-S)}function aa(_,b){_=_|0,b=b|0;var S=0,C=0,G=0,j=0,H=0,ne=0;return H=(i[_>>2]|0)-(i[b>>2]|0)|0,ne=(H|0)<0,C=(i[_+4>>2]|0)-(i[b+4>>2]|0)-(ne?H:0)|0,j=(C|0)<0,G=(ne?0-H|0:0)+(i[_+8>>2]|0)-(i[b+8>>2]|0)+(j?0-C|0:0)|0,_=(G|0)<0,b=_?0:G,S=(j?0:C)-(_?G:0)|0,G=(ne?0:H)-(j?C:0)-(_?G:0)|0,_=(S|0)<(G|0)?S:G,_=(b|0)<(_|0)?b:_,C=(_|0)>0,b=b-(C?_:0)|0,S=S-(C?_:0)|0,_=G-(C?_:0)|0,_=(_|0)>-1?_:0-_|0,S=(S|0)>-1?S:0-S|0,b=(b|0)>-1?b:0-b|0,b=(S|0)>(b|0)?S:b,((_|0)>(b|0)?_:b)|0}function za(_,b){_=_|0,b=b|0;var S=0;S=i[_+8>>2]|0,i[b>>2]=(i[_>>2]|0)-S,i[b+4>>2]=(i[_+4>>2]|0)-S}function $a(_,b){_=_|0,b=b|0;var S=0,C=0,G=0,j=0,H=0,ne=0;C=i[_>>2]|0,i[b>>2]=C,_=i[_+4>>2]|0,H=b+4|0,i[H>>2]=_,ne=b+8|0,i[ne>>2]=0,S=_-C|0,(C|0)<0?(_=0-C|0,i[H>>2]=S,i[ne>>2]=_,i[b>>2]=0,C=0):(S=_,_=0),(S|0)<0&&(C=C-S|0,i[b>>2]=C,_=_-S|0,i[ne>>2]=_,i[H>>2]=0,S=0),j=C-_|0,G=S-_|0,(_|0)<0?(i[b>>2]=j,i[H>>2]=G,i[ne>>2]=0,S=G,G=j,_=0):G=C,C=(S|0)<(G|0)?S:G,C=(_|0)<(C|0)?_:C,!((C|0)<=0)&&(i[b>>2]=G-C,i[H>>2]=S-C,i[ne>>2]=_-C)}function rA(_){_=_|0;var b=0,S=0,C=0,G=0;b=_+8|0,G=i[b>>2]|0,S=G-(i[_>>2]|0)|0,i[_>>2]=S,C=_+4|0,_=(i[C>>2]|0)-G|0,i[C>>2]=_,i[b>>2]=0-(_+S)}function pr(_){_=_|0;var b=0,S=0,C=0,G=0,j=0,H=0,ne=0;S=i[_>>2]|0,b=0-S|0,i[_>>2]=b,H=_+8|0,i[H>>2]=0,ne=_+4|0,C=i[ne>>2]|0,G=C+S|0,(S|0)>0?(i[ne>>2]=G,i[H>>2]=S,i[_>>2]=0,b=0,C=G):S=0,(C|0)<0?(j=b-C|0,i[_>>2]=j,S=S-C|0,i[H>>2]=S,i[ne>>2]=0,G=j-S|0,b=0-S|0,(S|0)<0?(i[_>>2]=G,i[ne>>2]=b,i[H>>2]=0,C=b,S=0):(C=0,G=j)):G=b,b=(C|0)<(G|0)?C:G,b=(S|0)<(b|0)?S:b,!((b|0)<=0)&&(i[_>>2]=G-b,i[ne>>2]=C-b,i[H>>2]=S-b)}function kl(_,b,S){_=_|0,b=b|0,S=S|0;var C=0,G=0;C=ht,ht=ht+16|0,G=C,zs(_,b,S,G),Yn(G,S+4|0),ht=C}function zs(_,b,S,C){_=_|0,b=b|0,S=S|0,C=C|0;var G=0,j=0,H=0,ne=0,Se=0;if(Se=ht,ht=ht+32|0,j=Se,El(_,j),i[S>>2]=0,G=+ls(15888,j),H=+ls(15912,j),H<G&&(i[S>>2]=1,G=H),H=+ls(15936,j),H<G&&(i[S>>2]=2,G=H),H=+ls(15960,j),H<G&&(i[S>>2]=3,G=H),H=+ls(15984,j),H<G&&(i[S>>2]=4,G=H),H=+ls(16008,j),H<G&&(i[S>>2]=5,G=H),H=+ls(16032,j),H<G&&(i[S>>2]=6,G=H),H=+ls(16056,j),H<G&&(i[S>>2]=7,G=H),H=+ls(16080,j),H<G&&(i[S>>2]=8,G=H),H=+ls(16104,j),H<G&&(i[S>>2]=9,G=H),H=+ls(16128,j),H<G&&(i[S>>2]=10,G=H),H=+ls(16152,j),H<G&&(i[S>>2]=11,G=H),H=+ls(16176,j),H<G&&(i[S>>2]=12,G=H),H=+ls(16200,j),H<G&&(i[S>>2]=13,G=H),H=+ls(16224,j),H<G&&(i[S>>2]=14,G=H),H=+ls(16248,j),H<G&&(i[S>>2]=15,G=H),H=+ls(16272,j),H<G&&(i[S>>2]=16,G=H),H=+ls(16296,j),H<G&&(i[S>>2]=17,G=H),H=+ls(16320,j),H<G&&(i[S>>2]=18,G=H),H=+ls(16344,j),H<G&&(i[S>>2]=19,G=H),H=+Ti(+(1-G*.5)),H<1e-16){i[C>>2]=0,i[C+4>>2]=0,i[C+8>>2]=0,i[C+12>>2]=0,ht=Se;return}if(S=i[S>>2]|0,G=+ue[16368+(S*24|0)>>3],G=+Qo(G-+Qo(+Un(15568+(S<<4)|0,_))),xr(b)|0?ne=+Qo(G+-.3334731722518321):ne=G,G=+ei(+H)/.381966011250105,(b|0)>0){j=0;do G=G*2.6457513110645907,j=j+1|0;while((j|0)!=(b|0))}H=+hi(+ne)*G,ue[C>>3]=H,ne=+Zt(+ne)*G,ue[C+8>>3]=ne,ht=Se}function js(_,b,S,C,G){_=_|0,b=b|0,S=S|0,C=C|0,G=G|0;var j=0,H=0;if(j=+dl(_),j<1e-16){b=15568+(b<<4)|0,i[G>>2]=i[b>>2],i[G+4>>2]=i[b+4>>2],i[G+8>>2]=i[b+8>>2],i[G+12>>2]=i[b+12>>2];return}if(H=+An(+ +ue[_+8>>3],+ +ue[_>>3]),(S|0)>0){_=0;do j=j/2.6457513110645907,_=_+1|0;while((_|0)!=(S|0))}C?(j=j/3,S=(xr(S)|0)==0,j=+wn(+((S?j:j/2.6457513110645907)*.381966011250105))):(j=+wn(+(j*.381966011250105)),xr(S)|0&&(H=+Qo(H+.3334731722518321))),Dr(15568+(b<<4)|0,+Qo(+ue[16368+(b*24|0)>>3]-H),j,G)}function CA(_,b,S){_=_|0,b=b|0,S=S|0;var C=0,G=0;C=ht,ht=ht+16|0,G=C,Rn(_+4|0,G),js(G,i[_>>2]|0,b,0,S),ht=C}function xa(_,b,S,C,G){_=_|0,b=b|0,S=S|0,C=C|0,G=G|0;var j=0,H=0,ne=0,Se=0,Ge=0,$e=0,kt=0,lt=0,ct=0,L=0,r=0,d=0,k=0,I=0,R=0,q=0,a=0,o=0,h=0,p=0,v=0,E=0,z=0,F=0,Y=0,J=0,ve=0,Ie=0;if(J=ht,ht=ht+272|0,j=J+256|0,I=J+240|0,z=J,F=J+224|0,Y=J+208|0,R=J+176|0,q=J+160|0,a=J+192|0,o=J+144|0,h=J+128|0,p=J+112|0,v=J+96|0,E=J+80|0,i[j>>2]=b,i[I>>2]=i[_>>2],i[I+4>>2]=i[_+4>>2],i[I+8>>2]=i[_+8>>2],i[I+12>>2]=i[_+12>>2],Ra(I,j,z),i[G>>2]=0,I=C+S+((C|0)==5&1)|0,(I|0)<=(S|0)){ht=J;return}Se=i[j>>2]|0,Ge=F+4|0,$e=R+4|0,kt=S+5|0,lt=16848+(Se<<2)|0,ct=16928+(Se<<2)|0,L=h+8|0,r=p+8|0,d=v+8|0,k=Y+4|0,ne=S;e:for(;;){H=z+(((ne|0)%5|0)<<4)|0,i[Y>>2]=i[H>>2],i[Y+4>>2]=i[H+4>>2],i[Y+8>>2]=i[H+8>>2],i[Y+12>>2]=i[H+12>>2];do;while((Xa(Y,Se,0,1)|0)==2);if((ne|0)>(S|0)&(xr(b)|0)!=0){if(i[R>>2]=i[Y>>2],i[R+4>>2]=i[Y+4>>2],i[R+8>>2]=i[Y+8>>2],i[R+12>>2]=i[Y+12>>2],Rn(Ge,q),C=i[R>>2]|0,j=i[17008+(C*80|0)+(i[F>>2]<<2)>>2]|0,i[R>>2]=i[18608+(C*80|0)+(j*20|0)>>2],H=i[18608+(C*80|0)+(j*20|0)+16>>2]|0,(H|0)>0){_=0;do pa($e),_=_+1|0;while((_|0)<(H|0))}switch(H=18608+(C*80|0)+(j*20|0)+4|0,i[a>>2]=i[H>>2],i[a+4>>2]=i[H+4>>2],i[a+8>>2]=i[H+8>>2],dr(a,(i[lt>>2]|0)*3|0),ur($e,a,$e),yn($e),Rn($e,o),ve=+(i[ct>>2]|0),ue[h>>3]=ve*3,ue[L>>3]=0,Ie=ve*-1.5,ue[p>>3]=Ie,ue[r>>3]=ve*2.598076211353316,ue[v>>3]=Ie,ue[d>>3]=ve*-2.598076211353316,i[17008+((i[R>>2]|0)*80|0)+(i[Y>>2]<<2)>>2]|0){case 1:{_=p,C=h;break}case 3:{_=v,C=p;break}case 2:{_=h,C=v;break}default:{_=12;break e}}aA(q,o,C,_,E),js(E,i[R>>2]|0,Se,1,G+8+(i[G>>2]<<4)|0),i[G>>2]=(i[G>>2]|0)+1}if((ne|0)<(kt|0)&&(Rn(k,R),js(R,i[Y>>2]|0,Se,1,G+8+(i[G>>2]<<4)|0),i[G>>2]=(i[G>>2]|0)+1),i[F>>2]=i[Y>>2],i[F+4>>2]=i[Y+4>>2],i[F+8>>2]=i[Y+8>>2],i[F+12>>2]=i[Y+12>>2],ne=ne+1|0,(ne|0)>=(I|0)){_=3;break}}if((_|0)==3){ht=J;return}else(_|0)==12&&bi(22474,22521,581,22531)}function Ra(_,b,S){_=_|0,b=b|0,S=S|0;var C=0,G=0,j=0,H=0,ne=0,Se=0;Se=ht,ht=ht+128|0,C=Se+64|0,G=Se,j=C,H=20208,ne=j+60|0;do i[j>>2]=i[H>>2],j=j+4|0,H=H+4|0;while((j|0)<(ne|0));j=G,H=20272,ne=j+60|0;do i[j>>2]=i[H>>2],j=j+4|0,H=H+4|0;while((j|0)<(ne|0));ne=(xr(i[b>>2]|0)|0)==0,C=ne?C:G,G=_+4|0,po(G),Ls(G),xr(i[b>>2]|0)|0&&(Hr(G),i[b>>2]=(i[b>>2]|0)+1),i[S>>2]=i[_>>2],b=S+4|0,ur(G,C,b),yn(b),i[S+16>>2]=i[_>>2],b=S+20|0,ur(G,C+12|0,b),yn(b),i[S+32>>2]=i[_>>2],b=S+36|0,ur(G,C+24|0,b),yn(b),i[S+48>>2]=i[_>>2],b=S+52|0,ur(G,C+36|0,b),yn(b),i[S+64>>2]=i[_>>2],S=S+68|0,ur(G,C+48|0,S),yn(S),ht=Se}function Xa(_,b,S,C){_=_|0,b=b|0,S=S|0,C=C|0;var G=0,j=0,H=0,ne=0,Se=0,Ge=0,$e=0,kt=0,lt=0,ct=0,L=0;if(L=ht,ht=ht+32|0,lt=L+12|0,ne=L,ct=_+4|0,kt=i[16928+(b<<2)>>2]|0,$e=(C|0)!=0,kt=$e?kt*3|0:kt,G=i[ct>>2]|0,Ge=_+8|0,H=i[Ge>>2]|0,$e){if(j=_+12|0,C=i[j>>2]|0,G=H+G+C|0,(G|0)==(kt|0))return ct=1,ht=L,ct|0;Se=j}else Se=_+12|0,C=i[Se>>2]|0,G=H+G+C|0;if((G|0)<=(kt|0))return ct=0,ht=L,ct|0;do if((C|0)>0){if(C=i[_>>2]|0,(H|0)>0){j=18608+(C*80|0)+60|0,C=_;break}C=18608+(C*80|0)+40|0,S?(Da(lt,kt,0,0),is(ct,lt,ne),La(ne),ur(ne,lt,ct),j=C,C=_):(j=C,C=_)}else j=18608+((i[_>>2]|0)*80|0)+20|0,C=_;while(!1);if(i[C>>2]=i[j>>2],G=j+16|0,(i[G>>2]|0)>0){C=0;do pa(ct),C=C+1|0;while((C|0)<(i[G>>2]|0))}return _=j+4|0,i[lt>>2]=i[_>>2],i[lt+4>>2]=i[_+4>>2],i[lt+8>>2]=i[_+8>>2],b=i[16848+(b<<2)>>2]|0,dr(lt,$e?b*3|0:b),ur(ct,lt,ct),yn(ct),$e?C=((i[Ge>>2]|0)+(i[ct>>2]|0)+(i[Se>>2]|0)|0)==(kt|0)?1:2:C=2,ct=C,ht=L,ct|0}function Zr(_,b){_=_|0,b=b|0;var S=0;do S=Xa(_,b,0,1)|0;while((S|0)==2);return S|0}function wa(_,b,S,C,G){_=_|0,b=b|0,S=S|0,C=C|0,G=G|0;var j=0,H=0,ne=0,Se=0,Ge=0,$e=0,kt=0,lt=0,ct=0,L=0,r=0,d=0,k=0,I=0,R=0,q=0,a=0,o=0,h=0,p=0,v=0,E=0,z=0;if(v=ht,ht=ht+240|0,j=v+224|0,a=v+208|0,o=v,h=v+192|0,p=v+176|0,d=v+160|0,k=v+144|0,I=v+128|0,R=v+112|0,q=v+96|0,i[j>>2]=b,i[a>>2]=i[_>>2],i[a+4>>2]=i[_+4>>2],i[a+8>>2]=i[_+8>>2],i[a+12>>2]=i[_+12>>2],Fa(a,j,o),i[G>>2]=0,r=C+S+((C|0)==6&1)|0,(r|0)<=(S|0)){ht=v;return}Se=i[j>>2]|0,Ge=S+6|0,$e=16928+(Se<<2)|0,kt=k+8|0,lt=I+8|0,ct=R+8|0,L=h+4|0,H=0,ne=S,C=-1;e:for(;;){if(j=(ne|0)%6|0,_=o+(j<<4)|0,i[h>>2]=i[_>>2],i[h+4>>2]=i[_+4>>2],i[h+8>>2]=i[_+8>>2],i[h+12>>2]=i[_+12>>2],_=H,H=Xa(h,Se,0,1)|0,(ne|0)>(S|0)&(xr(b)|0)!=0&&(_|0)!=1&&(i[h>>2]|0)!=(C|0)){switch(Rn(o+(((j+5|0)%6|0)<<4)+4|0,p),Rn(o+(j<<4)+4|0,d),E=+(i[$e>>2]|0),ue[k>>3]=E*3,ue[kt>>3]=0,z=E*-1.5,ue[I>>3]=z,ue[lt>>3]=E*2.598076211353316,ue[R>>3]=z,ue[ct>>3]=E*-2.598076211353316,j=i[a>>2]|0,i[17008+(j*80|0)+(((C|0)==(j|0)?i[h>>2]|0:C)<<2)>>2]|0){case 1:{_=I,C=k;break}case 3:{_=R,C=I;break}case 2:{_=k,C=R;break}default:{_=8;break e}}aA(p,d,C,_,q),!(To(p,q)|0)&&!(To(d,q)|0)&&(js(q,i[a>>2]|0,Se,1,G+8+(i[G>>2]<<4)|0),i[G>>2]=(i[G>>2]|0)+1)}if((ne|0)<(Ge|0)&&(Rn(L,p),js(p,i[h>>2]|0,Se,1,G+8+(i[G>>2]<<4)|0),i[G>>2]=(i[G>>2]|0)+1),ne=ne+1|0,(ne|0)>=(r|0)){_=3;break}else C=i[h>>2]|0}if((_|0)==3){ht=v;return}else(_|0)==8&&bi(22557,22521,746,22602)}function Fa(_,b,S){_=_|0,b=b|0,S=S|0;var C=0,G=0,j=0,H=0,ne=0,Se=0;Se=ht,ht=ht+160|0,C=Se+80|0,G=Se,j=C,H=20336,ne=j+72|0;do i[j>>2]=i[H>>2],j=j+4|0,H=H+4|0;while((j|0)<(ne|0));j=G,H=20416,ne=j+72|0;do i[j>>2]=i[H>>2],j=j+4|0,H=H+4|0;while((j|0)<(ne|0));ne=(xr(i[b>>2]|0)|0)==0,C=ne?C:G,G=_+4|0,po(G),Ls(G),xr(i[b>>2]|0)|0&&(Hr(G),i[b>>2]=(i[b>>2]|0)+1),i[S>>2]=i[_>>2],b=S+4|0,ur(G,C,b),yn(b),i[S+16>>2]=i[_>>2],b=S+20|0,ur(G,C+12|0,b),yn(b),i[S+32>>2]=i[_>>2],b=S+36|0,ur(G,C+24|0,b),yn(b),i[S+48>>2]=i[_>>2],b=S+52|0,ur(G,C+36|0,b),yn(b),i[S+64>>2]=i[_>>2],b=S+68|0,ur(G,C+48|0,b),yn(b),i[S+80>>2]=i[_>>2],S=S+84|0,ur(G,C+60|0,S),yn(S),ht=Se}function Qo(_){_=+_;var b=0;return b=_<0?_+6.283185307179586:_,+(_>=6.283185307179586?b+-6.283185307179586:b)}function _s(_,b){return _=_|0,b=b|0,+Wt(+(+ue[_>>3]-+ue[b>>3]))<17453292519943298e-27?(b=+Wt(+(+ue[_+8>>3]-+ue[b+8>>3]))<17453292519943298e-27,b|0):(b=0,b|0)}function ga(_,b){_=_|0,b=b|0;var S=0,C=0,G=0,j=0;return G=+ue[b>>3],C=+ue[_>>3],j=+Zt(+((G-C)*.5)),S=+Zt(+((+ue[b+8>>3]-+ue[_+8>>3])*.5)),S=j*j+S*(+hi(+G)*+hi(+C)*S),+(+An(+ +It(+S),+ +It(+(1-S)))*2)}function Xr(_,b){_=_|0,b=b|0;var S=0,C=0,G=0,j=0;return G=+ue[b>>3],C=+ue[_>>3],j=+Zt(+((G-C)*.5)),S=+Zt(+((+ue[b+8>>3]-+ue[_+8>>3])*.5)),S=j*j+S*(+hi(+G)*+hi(+C)*S),+(+An(+ +It(+S),+ +It(+(1-S)))*2*6371.007180918475)}function kA(_,b){_=_|0,b=b|0;var S=0,C=0,G=0,j=0;return G=+ue[b>>3],C=+ue[_>>3],j=+Zt(+((G-C)*.5)),S=+Zt(+((+ue[b+8>>3]-+ue[_+8>>3])*.5)),S=j*j+S*(+hi(+G)*+hi(+C)*S),+(+An(+ +It(+S),+ +It(+(1-S)))*2*6371.007180918475*1e3)}function Un(_,b){_=_|0,b=b|0;var S=0,C=0,G=0,j=0,H=0;return j=+ue[b>>3],C=+hi(+j),G=+ue[b+8>>3]-+ue[_+8>>3],H=C*+Zt(+G),S=+ue[_>>3],+ +An(+H,+(+Zt(+j)*+hi(+S)-+hi(+G)*(C*+Zt(+S))))}function Dr(_,b,S,C){_=_|0,b=+b,S=+S,C=C|0;var G=0,j=0,H=0,ne=0;if(S<1e-16){i[C>>2]=i[_>>2],i[C+4>>2]=i[_+4>>2],i[C+8>>2]=i[_+8>>2],i[C+12>>2]=i[_+12>>2];return}j=b<0?b+6.283185307179586:b,j=b>=6.283185307179586?j+-6.283185307179586:j;do if(j<1e-16)b=+ue[_>>3]+S,ue[C>>3]=b,G=C;else{if(G=+Wt(+(j+-3.141592653589793))<1e-16,b=+ue[_>>3],G){b=b-S,ue[C>>3]=b,G=C;break}if(H=+hi(+S),S=+Zt(+S),b=H*+Zt(+b)+ +hi(+j)*(S*+hi(+b)),b=b>1?1:b,b=+Yi(+(b<-1?-1:b)),ue[C>>3]=b,+Wt(+(b+-1.5707963267948966))<1e-16){ue[C>>3]=1.5707963267948966,ue[C+8>>3]=0;return}if(+Wt(+(b+1.5707963267948966))<1e-16){ue[C>>3]=-1.5707963267948966,ue[C+8>>3]=0;return}if(ne=+hi(+b),j=S*+Zt(+j)/ne,S=+ue[_>>3],b=(H-+Zt(+b)*+Zt(+S))/+hi(+S)/ne,H=j>1?1:j,b=b>1?1:b,b=+ue[_+8>>3]+ +An(+(H<-1?-1:H),+(b<-1?-1:b)),b>3.141592653589793)do b=b+-6.283185307179586;while(b>3.141592653589793);if(b<-3.141592653589793)do b=b+6.283185307179586;while(b<-3.141592653589793);ue[C+8>>3]=b;return}while(!1);if(+Wt(+(b+-1.5707963267948966))<1e-16){ue[G>>3]=1.5707963267948966,ue[C+8>>3]=0;return}if(+Wt(+(b+1.5707963267948966))<1e-16){ue[G>>3]=-1.5707963267948966,ue[C+8>>3]=0;return}if(b=+ue[_+8>>3],b>3.141592653589793)do b=b+-6.283185307179586;while(b>3.141592653589793);if(b<-3.141592653589793)do b=b+6.283185307179586;while(b<-3.141592653589793);ue[C+8>>3]=b}function Ka(_){return _=_|0,+ +ue[20496+(_<<3)>>3]}function jn(_){return _=_|0,+ +ue[20624+(_<<3)>>3]}function Rs(_){return _=_|0,+ +ue[20752+(_<<3)>>3]}function Er(_){return _=_|0,+ +ue[20880+(_<<3)>>3]}function Ir(_){_=_|0;var b=0;return b=21008+(_<<3)|0,_=i[b>>2]|0,Xi(i[b+4>>2]|0),_|0}function Ws(_,b,S){_=_|0,b=b|0,S=S|0;var C=0,G=0,j=0,H=0,ne=0,Se=0,Ge=0,$e=0,kt=0,lt=0;return lt=+ue[b>>3],$e=+ue[_>>3],Se=+Zt(+((lt-$e)*.5)),j=+ue[b+8>>3],Ge=+ue[_+8>>3],H=+Zt(+((j-Ge)*.5)),ne=+hi(+$e),kt=+hi(+lt),H=Se*Se+H*(kt*ne*H),H=+An(+ +It(+H),+ +It(+(1-H)))*2,Se=+ue[S>>3],lt=+Zt(+((Se-lt)*.5)),C=+ue[S+8>>3],j=+Zt(+((C-j)*.5)),G=+hi(+Se),j=lt*lt+j*(kt*G*j),j=+An(+ +It(+j),+ +It(+(1-j)))*2,Se=+Zt(+(($e-Se)*.5)),C=+Zt(+((Ge-C)*.5)),C=Se*Se+C*(ne*G*C),C=+An(+ +It(+C),+ +It(+(1-C)))*2,G=(H+j+C)*.5,+(+wn(+ +It(+(+ei(+(G*.5))*+ei(+((G-H)*.5))*+ei(+((G-j)*.5))*+ei(+((G-C)*.5)))))*4)}function rr(_,b){_=_|0,b=b|0;var S=0,C=0,G=0,j=0,H=0;if(j=ht,ht=ht+192|0,C=j+168|0,G=j,ys(_,b,C),Ca(_,b,G),b=i[G>>2]|0,(b|0)<=0)return S=0,ht=j,+S;if(S=+Ws(G+8|0,G+8+(((b|0)!=1&1)<<4)|0,C)+0,(b|0)==1)return ht=j,+S;_=1;do H=_,_=_+1|0,S=S+ +Ws(G+8+(H<<4)|0,G+8+(((_|0)%(b|0)|0)<<4)|0,C);while((_|0)<(b|0));return ht=j,+S}function qo(_,b){_=_|0,b=b|0;var S=0,C=0,G=0,j=0,H=0;if(j=ht,ht=ht+192|0,C=j+168|0,G=j,ys(_,b,C),Ca(_,b,G),b=i[G>>2]|0,(b|0)>0){if(S=+Ws(G+8|0,G+8+(((b|0)!=1&1)<<4)|0,C)+0,(b|0)!=1){_=1;do H=_,_=_+1|0,S=S+ +Ws(G+8+(H<<4)|0,G+8+(((_|0)%(b|0)|0)<<4)|0,C);while((_|0)<(b|0))}}else S=0;return ht=j,+(S*6371.007180918475*6371.007180918475)}function Ja(_,b){_=_|0,b=b|0;var S=0,C=0,G=0,j=0,H=0;if(j=ht,ht=ht+192|0,C=j+168|0,G=j,ys(_,b,C),Ca(_,b,G),b=i[G>>2]|0,(b|0)>0){if(S=+Ws(G+8|0,G+8+(((b|0)!=1&1)<<4)|0,C)+0,(b|0)!=1){_=1;do H=_,_=_+1|0,S=S+ +Ws(G+8+(H<<4)|0,G+8+(((_|0)%(b|0)|0)<<4)|0,C);while((_|0)<(b|0))}}else S=0;return ht=j,+(S*6371.007180918475*6371.007180918475*1e3*1e3)}function eo(_,b){_=_|0,b=b|0;var S=0,C=0,G=0,j=0,H=0,ne=0,Se=0,Ge=0;if(H=ht,ht=ht+176|0,j=H,ai(_,b,j),_=i[j>>2]|0,(_|0)<=1)return G=0,ht=H,+G;b=_+-1|0,_=0,S=0,C=+ue[j+8>>3],G=+ue[j+16>>3];do _=_+1|0,Se=C,C=+ue[j+8+(_<<4)>>3],Ge=+Zt(+((C-Se)*.5)),ne=G,G=+ue[j+8+(_<<4)+8>>3],ne=+Zt(+((G-ne)*.5)),ne=Ge*Ge+ne*(+hi(+C)*+hi(+Se)*ne),S=S+ +An(+ +It(+ne),+ +It(+(1-ne)))*2;while((_|0)<(b|0));return ht=H,+S}function ns(_,b){_=_|0,b=b|0;var S=0,C=0,G=0,j=0,H=0,ne=0,Se=0,Ge=0;if(H=ht,ht=ht+176|0,j=H,ai(_,b,j),_=i[j>>2]|0,(_|0)<=1)return G=0,ht=H,+G;b=_+-1|0,_=0,S=0,C=+ue[j+8>>3],G=+ue[j+16>>3];do _=_+1|0,Se=C,C=+ue[j+8+(_<<4)>>3],Ge=+Zt(+((C-Se)*.5)),ne=G,G=+ue[j+8+(_<<4)+8>>3],ne=+Zt(+((G-ne)*.5)),ne=Ge*Ge+ne*(+hi(+Se)*+hi(+C)*ne),S=S+ +An(+ +It(+ne),+ +It(+(1-ne)))*2;while((_|0)!=(b|0));return Ge=S*6371.007180918475,ht=H,+Ge}function $n(_,b){_=_|0,b=b|0;var S=0,C=0,G=0,j=0,H=0,ne=0,Se=0,Ge=0;if(H=ht,ht=ht+176|0,j=H,ai(_,b,j),_=i[j>>2]|0,(_|0)<=1)return G=0,ht=H,+G;b=_+-1|0,_=0,S=0,C=+ue[j+8>>3],G=+ue[j+16>>3];do _=_+1|0,Se=C,C=+ue[j+8+(_<<4)>>3],Ge=+Zt(+((C-Se)*.5)),ne=G,G=+ue[j+8+(_<<4)+8>>3],ne=+Zt(+((G-ne)*.5)),ne=Ge*Ge+ne*(+hi(+Se)*+hi(+C)*ne),S=S+ +An(+ +It(+ne),+ +It(+(1-ne)))*2;while((_|0)!=(b|0));return Ge=S*6371.007180918475*1e3,ht=H,+Ge}function bn(_,b){return _=_|0,b=b|0,b=jt(_|0,b|0,52)|0,mt()|0,b&15|0}function Oa(_,b){return _=_|0,b=b|0,b=jt(_|0,b|0,45)|0,mt()|0,b&127|0}function gr(_,b){_=_|0,b=b|0;var S=0,C=0,G=0,j=0,H=0,ne=0;if(!(!0&(b&-16777216|0)==134217728)||(H=jt(_|0,b|0,45)|0,mt()|0,H=H&127,H>>>0>121))return b=0,b|0;S=jt(_|0,b|0,52)|0,mt()|0,S=S&15;do if(S|0){for(G=1,C=0;;){if(j=jt(_|0,b|0,(15-G|0)*3|0)|0,mt()|0,j=j&7,(j|0)!=0&(C^1))if((j|0)==1&(M(H)|0)!=0){ne=0,C=13;break}else C=1;if((j|0)==7){ne=0,C=13;break}if(G>>>0<S>>>0)G=G+1|0;else{C=9;break}}if((C|0)==9){if((S|0)==15)ne=1;else break;return ne|0}else if((C|0)==13)return ne|0}while(!1);for(;;){if(ne=jt(_|0,b|0,(14-S|0)*3|0)|0,mt()|0,!((ne&7|0)==7&!0)){ne=0,C=13;break}if(S>>>0<14)S=S+1|0;else{ne=1,C=13;break}}return(C|0)==13?ne|0:0}function ba(_,b,S){_=_|0,b=b|0,S=S|0;var C=0,G=0;if(C=jt(_|0,b|0,52)|0,mt()|0,C=C&15,(C|0)>=(S|0)){if((C|0)!=(S|0))if(S>>>0<=15){if(G=ci(S|0,0,52)|0,_=G|_,b=mt()|0|b&-15728641,(C|0)>(S|0))do G=ci(7,0,(14-S|0)*3|0)|0,S=S+1|0,_=G|_,b=mt()|0|b;while((S|0)<(C|0))}else b=0,_=0}else b=0,_=0;return Xi(b|0),_|0}function go(_,b,S){return _=_|0,b=b|0,S=S|0,_=jt(_|0,b|0,52)|0,mt()|0,_=_&15,(S|0)<16&(_|0)<=(S|0)?(S=ka(7,S-_|0)|0,S|0):(S=0,S|0)}function sr(_,b,S,C){_=_|0,b=b|0,S=S|0,C=C|0;var G=0,j=0,H=0,ne=0,Se=0,Ge=0,$e=0;if(H=jt(_|0,b|0,52)|0,mt()|0,H=H&15,!!((S|0)<16&(H|0)<=(S|0))){if((H|0)==(S|0)){S=C,i[S>>2]=_,i[S+4>>2]=b;return}if(Se=ka(7,S-H|0)|0,Ge=(Se|0)/7|0,ne=jt(_|0,b|0,45)|0,mt()|0,!(M(ne&127)|0))j=0;else{e:do if(!H)G=0;else for(j=1;;){if(G=jt(_|0,b|0,(15-j|0)*3|0)|0,mt()|0,G=G&7,G|0)break e;if(j>>>0<H>>>0)j=j+1|0;else{G=0;break}}while(!1);j=(G|0)==0}if($e=ci(H+1|0,0,52)|0,G=mt()|0|b&-15728641,ne=(14-H|0)*3|0,b=ci(7,0,ne|0)|0,b=($e|_)&~b,H=G&~(mt()|0),sr(b,H,S,C),G=C+(Ge<<3)|0,!j){$e=ci(1,0,ne|0)|0,sr($e|b,mt()|0|H,S,G),$e=G+(Ge<<3)|0,Se=ci(2,0,ne|0)|0,sr(Se|b,mt()|0|H,S,$e),$e=$e+(Ge<<3)|0,Se=ci(3,0,ne|0)|0,sr(Se|b,mt()|0|H,S,$e),$e=$e+(Ge<<3)|0,Se=ci(4,0,ne|0)|0,sr(Se|b,mt()|0|H,S,$e),$e=$e+(Ge<<3)|0,Se=ci(5,0,ne|0)|0,sr(Se|b,mt()|0|H,S,$e),Se=ci(6,0,ne|0)|0,sr(Se|b,mt()|0|H,S,$e+(Ge<<3)|0);return}j=G+(Ge<<3)|0,(Se|0)>6&&(Se=G+8|0,$e=(j>>>0>Se>>>0?j:Se)+-1+(0-G)|0,Br(G|0,0,$e+8&-8|0)|0,G=Se+($e>>>3<<3)|0),$e=ci(2,0,ne|0)|0,sr($e|b,mt()|0|H,S,G),$e=G+(Ge<<3)|0,Se=ci(3,0,ne|0)|0,sr(Se|b,mt()|0|H,S,$e),$e=$e+(Ge<<3)|0,Se=ci(4,0,ne|0)|0,sr(Se|b,mt()|0|H,S,$e),$e=$e+(Ge<<3)|0,Se=ci(5,0,ne|0)|0,sr(Se|b,mt()|0|H,S,$e),Se=ci(6,0,ne|0)|0,sr(Se|b,mt()|0|H,S,$e+(Ge<<3)|0)}}function Lr(_,b){_=_|0,b=b|0;var S=0,C=0,G=0;if(G=jt(_|0,b|0,45)|0,mt()|0,!(M(G&127)|0))return G=0,G|0;G=jt(_|0,b|0,52)|0,mt()|0,G=G&15;e:do if(!G)S=0;else for(C=1;;){if(S=jt(_|0,b|0,(15-C|0)*3|0)|0,mt()|0,S=S&7,S|0)break e;if(C>>>0<G>>>0)C=C+1|0;else{S=0;break}}while(!1);return G=(S|0)==0&1,G|0}function vs(_,b,S){_=_|0,b=b|0,S=S|0;var C=0,G=0;if(C=jt(_|0,b|0,52)|0,mt()|0,C=C&15,(S|0)<16&(C|0)<=(S|0)){if((C|0)!=(S|0)&&(G=ci(S|0,0,52)|0,_=G|_,b=mt()|0|b&-15728641,(C|0)<(S|0)))do G=ci(7,0,(14-C|0)*3|0)|0,C=C+1|0,_=_&~G,b=b&~(mt()|0);while((C|0)<(S|0))}else b=0,_=0;return Xi(b|0),_|0}function Ho(_,b,S){_=_|0,b=b|0,S=S|0;var C=0,G=0,j=0,H=0,ne=0,Se=0,Ge=0,$e=0,kt=0,lt=0,ct=0,L=0,r=0,d=0,k=0,I=0,R=0,q=0,a=0,o=0,h=0,p=0;if(!S)return h=0,h|0;if(G=_,C=i[G>>2]|0,G=i[G+4>>2]|0,!0&(G&15728640|0)==0){if((S|0)<=0||(h=b,i[h>>2]=C,i[h+4>>2]=G,(S|0)==1))return h=0,h|0;C=1;do a=_+(C<<3)|0,o=i[a+4>>2]|0,h=b+(C<<3)|0,i[h>>2]=i[a>>2],i[h+4>>2]=o,C=C+1|0;while((C|0)!=(S|0));return C=0,C|0}if(a=S<<3,o=Us(a)|0,!o)return h=-3,h|0;if(BA(o|0,_|0,a|0)|0,q=Ga(S,8)|0,!q)return Sn(o),h=-3,h|0;C=S;e:for(;;){H=o,$e=i[H>>2]|0,H=i[H+4>>2]|0,I=jt($e|0,H|0,52)|0,mt()|0,I=I&15,R=I+-1|0,k=(C|0)>0;t:do if(k){if(d=((C|0)<0)<<31>>31,L=ci(R|0,0,52)|0,r=mt()|0,R>>>0>15)for(G=0,_=$e,S=H;;){if(!((_|0)==0&(S|0)==0)){if(j=jt(_|0,S|0,52)|0,mt()|0,j=j&15,ne=(j|0)<(R|0),j=(j|0)==(R|0),Ge=ne?0:j?_:0,_=ne?0:j?S:0,S=Xs(Ge|0,_|0,C|0,d|0)|0,mt()|0,j=q+(S<<3)|0,ne=j,Se=i[ne>>2]|0,ne=i[ne+4>>2]|0,(Se|0)==0&(ne|0)==0)S=Ge;else for(L=0,ct=S,lt=ne,S=Ge;;){if((L|0)>(C|0)){h=41;break e}if((Se|0)==(S|0)&(lt&-117440513|0)==(_|0)){Ge=jt(Se|0,lt|0,56)|0,mt()|0,Ge=Ge&7,kt=Ge+1|0,r=jt(Se|0,lt|0,45)|0,mt()|0;i:do if(!(M(r&127)|0))ne=7;else{if(Se=jt(Se|0,lt|0,52)|0,mt()|0,Se=Se&15,!Se){ne=6;break}for(ne=1;;){if(r=ci(7,0,(15-ne|0)*3|0)|0,!((r&S|0)==0&((mt()|0)&_|0)==0)){ne=7;break i}if(ne>>>0<Se>>>0)ne=ne+1|0;else{ne=6;break}}}while(!1);if((Ge+2|0)>>>0>ne>>>0){h=51;break e}r=ci(kt|0,0,56)|0,_=mt()|0|_&-117440513,ne=j,i[ne>>2]=0,i[ne+4>>2]=0,ne=ct,S=r|S}else ne=(ct+1|0)%(C|0)|0;if(j=q+(ne<<3)|0,lt=j,Se=i[lt>>2]|0,lt=i[lt+4>>2]|0,(Se|0)==0&(lt|0)==0)break;L=L+1|0,ct=ne}r=j,i[r>>2]=S,i[r+4>>2]=_}if(G=G+1|0,(G|0)>=(C|0))break t;S=o+(G<<3)|0,_=i[S>>2]|0,S=i[S+4>>2]|0}for(G=0,_=$e,S=H;;){if(!((_|0)==0&(S|0)==0)){if(ne=jt(_|0,S|0,52)|0,mt()|0,ne=ne&15,(ne|0)>=(R|0)){if((ne|0)!=(R|0)&&(_=_|L,S=S&-15728641|r,ne>>>0>=I>>>0)){j=R;do ct=ci(7,0,(14-j|0)*3|0)|0,j=j+1|0,_=ct|_,S=mt()|0|S;while(j>>>0<ne>>>0)}}else _=0,S=0;if(ne=Xs(_|0,S|0,C|0,d|0)|0,mt()|0,j=q+(ne<<3)|0,Se=j,Ge=i[Se>>2]|0,Se=i[Se+4>>2]|0,!((Ge|0)==0&(Se|0)==0))for(ct=0;;){if((ct|0)>(C|0)){h=41;break e}if((Ge|0)==(_|0)&(Se&-117440513|0)==(S|0)){kt=jt(Ge|0,Se|0,56)|0,mt()|0,kt=kt&7,lt=kt+1|0,p=jt(Ge|0,Se|0,45)|0,mt()|0;i:do if(!(M(p&127)|0))Se=7;else{if(Ge=jt(Ge|0,Se|0,52)|0,mt()|0,Ge=Ge&15,!Ge){Se=6;break}for(Se=1;;){if(p=ci(7,0,(15-Se|0)*3|0)|0,!((p&_|0)==0&((mt()|0)&S|0)==0)){Se=7;break i}if(Se>>>0<Ge>>>0)Se=Se+1|0;else{Se=6;break}}}while(!1);if((kt+2|0)>>>0>Se>>>0){h=51;break e}p=ci(lt|0,0,56)|0,S=mt()|0|S&-117440513,lt=j,i[lt>>2]=0,i[lt+4>>2]=0,_=p|_}else ne=(ne+1|0)%(C|0)|0;if(j=q+(ne<<3)|0,Se=j,Ge=i[Se>>2]|0,Se=i[Se+4>>2]|0,(Ge|0)==0&(Se|0)==0)break;ct=ct+1|0}p=j,i[p>>2]=_,i[p+4>>2]=S}if(G=G+1|0,(G|0)>=(C|0))break t;S=o+(G<<3)|0,_=i[S>>2]|0,S=i[S+4>>2]|0}}while(!1);if((C+5|0)>>>0<11){h=99;break}if(r=Ga((C|0)/6|0,8)|0,!r){h=58;break}t:do if(k){ct=0,lt=0;do{if(ne=q+(ct<<3)|0,_=ne,G=i[_>>2]|0,_=i[_+4>>2]|0,!((G|0)==0&(_|0)==0)){Se=jt(G|0,_|0,56)|0,mt()|0,Se=Se&7,S=Se+1|0,Ge=_&-117440513,p=jt(G|0,_|0,45)|0,mt()|0;i:do if(M(p&127)|0){if(kt=jt(G|0,_|0,52)|0,mt()|0,kt=kt&15,kt|0)for(j=1;;){if(p=ci(7,0,(15-j|0)*3|0)|0,!((G&p|0)==0&(Ge&(mt()|0)|0)==0))break i;if(j>>>0<kt>>>0)j=j+1|0;else break}_=ci(S|0,0,56)|0,G=_|G,_=mt()|0|Ge,S=ne,i[S>>2]=G,i[S+4>>2]=_,S=Se+2|0}while(!1);(S|0)==7&&(p=r+(lt<<3)|0,i[p>>2]=G,i[p+4>>2]=_&-117440513,lt=lt+1|0)}ct=ct+1|0}while((ct|0)!=(C|0));if(k){if(L=((C|0)<0)<<31>>31,kt=ci(R|0,0,52)|0,ct=mt()|0,R>>>0>15)for(_=0,G=0;;){do if(!(($e|0)==0&(H|0)==0)){for(Se=jt($e|0,H|0,52)|0,mt()|0,Se=Se&15,j=(Se|0)<(R|0),Se=(Se|0)==(R|0),ne=j?0:Se?$e:0,Se=j?0:Se?H:0,j=Xs(ne|0,Se|0,C|0,L|0)|0,mt()|0,S=0;;){if((S|0)>(C|0)){h=98;break e}if(p=q+(j<<3)|0,Ge=i[p+4>>2]|0,(Ge&-117440513|0)==(Se|0)&&(i[p>>2]|0)==(ne|0)){h=70;break}if(j=(j+1|0)%(C|0)|0,p=q+(j<<3)|0,(i[p>>2]|0)==(ne|0)&&(i[p+4>>2]|0)==(Se|0))break;S=S+1|0}if((h|0)==70&&(h=0,!0&(Ge&117440512|0)==100663296))break;p=b+(G<<3)|0,i[p>>2]=$e,i[p+4>>2]=H,G=G+1|0}while(!1);if(_=_+1|0,(_|0)>=(C|0)){C=lt;break t}H=o+(_<<3)|0,$e=i[H>>2]|0,H=i[H+4>>2]|0}for(_=0,G=0;;){do if(!(($e|0)==0&(H|0)==0)){if(Se=jt($e|0,H|0,52)|0,mt()|0,Se=Se&15,(Se|0)>=(R|0))if((Se|0)!=(R|0))if(S=$e|kt,j=H&-15728641|ct,Se>>>0<I>>>0)Se=j;else{ne=R;do p=ci(7,0,(14-ne|0)*3|0)|0,ne=ne+1|0,S=p|S,j=mt()|0|j;while(ne>>>0<Se>>>0);Se=j}else S=$e,Se=H;else S=0,Se=0;for(ne=Xs(S|0,Se|0,C|0,L|0)|0,mt()|0,j=0;;){if((j|0)>(C|0)){h=98;break e}if(p=q+(ne<<3)|0,Ge=i[p+4>>2]|0,(Ge&-117440513|0)==(Se|0)&&(i[p>>2]|0)==(S|0)){h=93;break}if(ne=(ne+1|0)%(C|0)|0,p=q+(ne<<3)|0,(i[p>>2]|0)==(S|0)&&(i[p+4>>2]|0)==(Se|0))break;j=j+1|0}if((h|0)==93&&(h=0,!0&(Ge&117440512|0)==100663296))break;p=b+(G<<3)|0,i[p>>2]=$e,i[p+4>>2]=H,G=G+1|0}while(!1);if(_=_+1|0,(_|0)>=(C|0)){C=lt;break t}H=o+(_<<3)|0,$e=i[H>>2]|0,H=i[H+4>>2]|0}}else G=0,C=lt}else G=0,C=0;while(!1);if(Br(q|0,0,a|0)|0,BA(o|0,r|0,C<<3|0)|0,Sn(r),C)b=b+(G<<3)|0;else break}return(h|0)==41?(Sn(o),Sn(q),p=-1,p|0):(h|0)==51?(Sn(o),Sn(q),p=-2,p|0):(h|0)==58?(Sn(o),Sn(q),p=-3,p|0):(h|0)==98?(Sn(r),Sn(o),Sn(q),p=-1,p|0):((h|0)==99&&BA(b|0,o|0,C<<3|0)|0,Sn(o),Sn(q),p=0,p|0)}function Sa(_,b,S,C,G){_=_|0,b=b|0,S=S|0,C=C|0,G=G|0;var j=0,H=0,ne=0,Se=0,Ge=0,$e=0;if((b|0)<=0)return G=0,G|0;if((G|0)>=16){for(j=0;;){if($e=_+(j<<3)|0,!((i[$e>>2]|0)==0&(i[$e+4>>2]|0)==0)){j=14;break}if(j=j+1|0,(j|0)>=(b|0)){H=0,j=16;break}}if((j|0)==14)return((C|0)>0?-2:-1)|0;if((j|0)==16)return H|0}j=0,$e=0;e:for(;;){Ge=_+($e<<3)|0,ne=Ge,H=i[ne>>2]|0,ne=i[ne+4>>2]|0;do if(!((H|0)==0&(ne|0)==0)){if((j|0)>=(C|0)){H=-1,j=16;break e}if(Se=jt(H|0,ne|0,52)|0,mt()|0,Se=Se&15,(Se|0)>(G|0)){H=-2,j=16;break e}if((Se|0)==(G|0)){Ge=S+(j<<3)|0,i[Ge>>2]=H,i[Ge+4>>2]=ne,j=j+1|0;break}if(H=(ka(7,G-Se|0)|0)+j|0,(H|0)>(C|0)){H=-1,j=16;break e}sr(i[Ge>>2]|0,i[Ge+4>>2]|0,G,S+(j<<3)|0),j=H}while(!1);if($e=$e+1|0,($e|0)>=(b|0)){H=0,j=16;break}}return(j|0)==16?H|0:0}function Eo(_,b,S){_=_|0,b=b|0,S=S|0;var C=0,G=0,j=0,H=0;if((b|0)<=0)return S=0,S|0;if((S|0)>=16){for(C=0;;){if(H=_+(C<<3)|0,!((i[H>>2]|0)==0&(i[H+4>>2]|0)==0)){C=-1,G=13;break}if(C=C+1|0,(C|0)>=(b|0)){C=0,G=13;break}}if((G|0)==13)return C|0}C=0,H=0;e:for(;;){G=_+(H<<3)|0,j=i[G>>2]|0,G=i[G+4>>2]|0;do if(!((j|0)==0&(G|0)==0)){if(G=jt(j|0,G|0,52)|0,mt()|0,G=G&15,(G|0)>(S|0)){C=-1,G=13;break e}if((G|0)==(S|0)){C=C+1|0;break}else{C=(ka(7,S-G|0)|0)+C|0;break}}while(!1);if(H=H+1|0,(H|0)>=(b|0)){G=13;break}}return(G|0)==13?C|0:0}function Ys(_,b){return _=_|0,b=b|0,b=jt(_|0,b|0,52)|0,mt()|0,b&1|0}function rs(_,b){_=_|0,b=b|0;var S=0,C=0,G=0;if(G=jt(_|0,b|0,52)|0,mt()|0,G=G&15,!G)return G=0,G|0;for(C=1;;){if(S=jt(_|0,b|0,(15-C|0)*3|0)|0,mt()|0,S=S&7,S|0){C=5;break}if(C>>>0<G>>>0)C=C+1|0;else{S=0,C=5;break}}return(C|0)==5?S|0:0}function Kr(_,b){_=_|0,b=b|0;var S=0,C=0,G=0,j=0,H=0,ne=0,Se=0;if(Se=jt(_|0,b|0,52)|0,mt()|0,Se=Se&15,!Se)return ne=b,Se=_,Xi(ne|0),Se|0;for(ne=1,S=0;;){j=(15-ne|0)*3|0,C=ci(7,0,j|0)|0,G=mt()|0,H=jt(_|0,b|0,j|0)|0,mt()|0,j=ci(ds(H&7)|0,0,j|0)|0,H=mt()|0,_=j|_&~C,b=H|b&~G;e:do if(!S)if((j&C|0)==0&(H&G|0)==0)S=0;else if(C=jt(_|0,b|0,52)|0,mt()|0,C=C&15,!C)S=1;else{S=1;t:for(;;){switch(H=jt(_|0,b|0,(15-S|0)*3|0)|0,mt()|0,H&7){case 1:break t;case 0:break;default:{S=1;break e}}if(S>>>0<C>>>0)S=S+1|0;else{S=1;break e}}for(S=1;;)if(H=(15-S|0)*3|0,G=jt(_|0,b|0,H|0)|0,mt()|0,j=ci(7,0,H|0)|0,b=b&~(mt()|0),H=ci(ds(G&7)|0,0,H|0)|0,_=_&~j|H,b=b|(mt()|0),S>>>0<C>>>0)S=S+1|0;else{S=1;break}}while(!1);if(ne>>>0<Se>>>0)ne=ne+1|0;else break}return Xi(b|0),_|0}function Ns(_,b){_=_|0,b=b|0;var S=0,C=0,G=0,j=0,H=0;if(C=jt(_|0,b|0,52)|0,mt()|0,C=C&15,!C)return S=b,C=_,Xi(S|0),C|0;for(S=1;j=(15-S|0)*3|0,H=jt(_|0,b|0,j|0)|0,mt()|0,G=ci(7,0,j|0)|0,b=b&~(mt()|0),j=ci(ds(H&7)|0,0,j|0)|0,_=j|_&~G,b=mt()|0|b,S>>>0<C>>>0;)S=S+1|0;return Xi(b|0),_|0}function ma(_,b){_=_|0,b=b|0;var S=0,C=0,G=0,j=0,H=0,ne=0,Se=0;if(Se=jt(_|0,b|0,52)|0,mt()|0,Se=Se&15,!Se)return ne=b,Se=_,Xi(ne|0),Se|0;for(ne=1,S=0;;){j=(15-ne|0)*3|0,C=ci(7,0,j|0)|0,G=mt()|0,H=jt(_|0,b|0,j|0)|0,mt()|0,j=ci(As(H&7)|0,0,j|0)|0,H=mt()|0,_=j|_&~C,b=H|b&~G;e:do if(!S)if((j&C|0)==0&(H&G|0)==0)S=0;else if(C=jt(_|0,b|0,52)|0,mt()|0,C=C&15,!C)S=1;else{S=1;t:for(;;){switch(H=jt(_|0,b|0,(15-S|0)*3|0)|0,mt()|0,H&7){case 1:break t;case 0:break;default:{S=1;break e}}if(S>>>0<C>>>0)S=S+1|0;else{S=1;break e}}for(S=1;;)if(G=(15-S|0)*3|0,j=ci(7,0,G|0)|0,H=b&~(mt()|0),b=jt(_|0,b|0,G|0)|0,mt()|0,b=ci(As(b&7)|0,0,G|0)|0,_=_&~j|b,b=H|(mt()|0),S>>>0<C>>>0)S=S+1|0;else{S=1;break}}while(!1);if(ne>>>0<Se>>>0)ne=ne+1|0;else break}return Xi(b|0),_|0}function Ar(_,b){_=_|0,b=b|0;var S=0,C=0,G=0,j=0,H=0;if(C=jt(_|0,b|0,52)|0,mt()|0,C=C&15,!C)return S=b,C=_,Xi(S|0),C|0;for(S=1;H=(15-S|0)*3|0,j=ci(7,0,H|0)|0,G=b&~(mt()|0),b=jt(_|0,b|0,H|0)|0,mt()|0,b=ci(As(b&7)|0,0,H|0)|0,_=b|_&~j,b=mt()|0|G,S>>>0<C>>>0;)S=S+1|0;return Xi(b|0),_|0}function Nr(_,b){_=_|0,b=b|0;var S=0,C=0,G=0,j=0,H=0,ne=0,Se=0,Ge=0,$e=0;if(Se=ht,ht=ht+64|0,ne=Se+40|0,C=Se+24|0,G=Se+12|0,j=Se,ci(b|0,0,52)|0,S=mt()|0|134225919,!b)return(i[_+4>>2]|0)>2||(i[_+8>>2]|0)>2||(i[_+12>>2]|0)>2?(H=0,ne=0,Xi(H|0),ht=Se,ne|0):(ci(Be(_)|0,0,45)|0,H=mt()|0|S,ne=-1,Xi(H|0),ht=Se,ne|0);if(i[ne>>2]=i[_>>2],i[ne+4>>2]=i[_+4>>2],i[ne+8>>2]=i[_+8>>2],i[ne+12>>2]=i[_+12>>2],H=ne+4|0,(b|0)>0)for(_=-1;i[C>>2]=i[H>>2],i[C+4>>2]=i[H+4>>2],i[C+8>>2]=i[H+8>>2],b&1?(Go(H),i[G>>2]=i[H>>2],i[G+4>>2]=i[H+4>>2],i[G+8>>2]=i[H+8>>2],Ya(G)):(ya(H),i[G>>2]=i[H>>2],i[G+4>>2]=i[H+4>>2],i[G+8>>2]=i[H+8>>2],Hr(G)),is(C,G,j),yn(j),$e=(15-b|0)*3|0,Ge=ci(7,0,$e|0)|0,S=S&~(mt()|0),$e=ci(fo(j)|0,0,$e|0)|0,_=$e|_&~Ge,S=mt()|0|S,(b|0)>1;)b=b+-1|0;else _=-1;e:do if((i[H>>2]|0)<=2&&(i[ne+8>>2]|0)<=2&&(i[ne+12>>2]|0)<=2){if(C=Be(ne)|0,b=ci(C|0,0,45)|0,b=b|_,_=mt()|0|S&-1040385,j=Ye(ne)|0,!(M(C)|0)){if((j|0)<=0)break;for(G=0;;){if(C=jt(b|0,_|0,52)|0,mt()|0,C=C&15,C)for(S=1;$e=(15-S|0)*3|0,ne=jt(b|0,_|0,$e|0)|0,mt()|0,Ge=ci(7,0,$e|0)|0,_=_&~(mt()|0),$e=ci(ds(ne&7)|0,0,$e|0)|0,b=b&~Ge|$e,_=_|(mt()|0),S>>>0<C>>>0;)S=S+1|0;if(G=G+1|0,(G|0)==(j|0))break e}}G=jt(b|0,_|0,52)|0,mt()|0,G=G&15;t:do if(G){S=1;i:for(;;){switch($e=jt(b|0,_|0,(15-S|0)*3|0)|0,mt()|0,$e&7){case 1:break i;case 0:break;default:break t}if(S>>>0<G>>>0)S=S+1|0;else break t}if(ti(C,i[ne>>2]|0)|0)for(S=1;ne=(15-S|0)*3|0,Ge=ci(7,0,ne|0)|0,$e=_&~(mt()|0),_=jt(b|0,_|0,ne|0)|0,mt()|0,_=ci(As(_&7)|0,0,ne|0)|0,b=b&~Ge|_,_=$e|(mt()|0),S>>>0<G>>>0;)S=S+1|0;else for(S=1;$e=(15-S|0)*3|0,ne=jt(b|0,_|0,$e|0)|0,mt()|0,Ge=ci(7,0,$e|0)|0,_=_&~(mt()|0),$e=ci(ds(ne&7)|0,0,$e|0)|0,b=b&~Ge|$e,_=_|(mt()|0),S>>>0<G>>>0;)S=S+1|0}while(!1);if((j|0)>0){S=0;do b=Kr(b,_)|0,_=mt()|0,S=S+1|0;while((S|0)!=(j|0))}}else b=0,_=0;while(!1);return Ge=_,$e=b,Xi(Ge|0),ht=Se,$e|0}function xr(_){return _=_|0,(_|0)%2|0|0}function Io(_,b){_=_|0,b=b|0;var S=0,C=0;return C=ht,ht=ht+16|0,S=C,b>>>0<=15&&(i[_+4>>2]&2146435072|0)!=2146435072&&(i[_+8+4>>2]&2146435072|0)!=2146435072?(kl(_,b,S),b=Nr(S,b)|0,_=mt()|0):(_=0,b=0),Xi(_|0),ht=C,b|0}function oa(_,b,S){_=_|0,b=b|0,S=S|0;var C=0,G=0,j=0,H=0;if(G=S+4|0,j=jt(_|0,b|0,52)|0,mt()|0,j=j&15,H=jt(_|0,b|0,45)|0,mt()|0,C=(j|0)==0,M(H&127)|0){if(C)return H=1,H|0;C=1}else{if(C)return H=0,H|0;!(i[G>>2]|0)&&!(i[S+8>>2]|0)?C=(i[S+12>>2]|0)!=0&1:C=1}for(S=1;S&1?Ya(G):Hr(G),H=jt(_|0,b|0,(15-S|0)*3|0)|0,mt()|0,ko(G,H&7),S>>>0<j>>>0;)S=S+1|0;return C|0}function hs(_,b,S){_=_|0,b=b|0,S=S|0;var C=0,G=0,j=0,H=0,ne=0,Se=0,Ge=0,$e=0;$e=ht,ht=ht+16|0,Se=$e,Ge=jt(_|0,b|0,45)|0,mt()|0,Ge=Ge&127;e:do if(M(Ge)|0&&(j=jt(_|0,b|0,52)|0,mt()|0,j=j&15,(j|0)!=0)){C=1;t:for(;;){switch(ne=jt(_|0,b|0,(15-C|0)*3|0)|0,mt()|0,ne&7){case 5:break t;case 0:break;default:{C=b;break e}}if(C>>>0<j>>>0)C=C+1|0;else{C=b;break e}}for(G=1,C=b;b=(15-G|0)*3|0,H=ci(7,0,b|0)|0,ne=C&~(mt()|0),C=jt(_|0,C|0,b|0)|0,mt()|0,C=ci(As(C&7)|0,0,b|0)|0,_=_&~H|C,C=ne|(mt()|0),G>>>0<j>>>0;)G=G+1|0}else C=b;while(!1);if(ne=7728+(Ge*28|0)|0,i[S>>2]=i[ne>>2],i[S+4>>2]=i[ne+4>>2],i[S+8>>2]=i[ne+8>>2],i[S+12>>2]=i[ne+12>>2],!(oa(_,C,S)|0)){ht=$e;return}if(H=S+4|0,i[Se>>2]=i[H>>2],i[Se+4>>2]=i[H+4>>2],i[Se+8>>2]=i[H+8>>2],j=jt(_|0,C|0,52)|0,mt()|0,ne=j&15,j&1?(Hr(H),j=ne+1|0):j=ne,!(M(Ge)|0))C=0;else{e:do if(!ne)C=0;else for(b=1;;){if(G=jt(_|0,C|0,(15-b|0)*3|0)|0,mt()|0,G=G&7,G|0){C=G;break e}if(b>>>0<ne>>>0)b=b+1|0;else{C=0;break}}while(!1);C=(C|0)==4&1}if(!(Xa(S,j,C,0)|0))(j|0)!=(ne|0)&&(i[H>>2]=i[Se>>2],i[H+4>>2]=i[Se+4>>2],i[H+8>>2]=i[Se+8>>2]);else{if(M(Ge)|0)do;while(Xa(S,j,0,0)|0);(j|0)!=(ne|0)&&ya(H)}ht=$e}function ys(_,b,S){_=_|0,b=b|0,S=S|0;var C=0,G=0;C=ht,ht=ht+16|0,G=C,hs(_,b,G),b=jt(_|0,b|0,52)|0,mt()|0,CA(G,b&15,S),ht=C}function Ca(_,b,S){_=_|0,b=b|0,S=S|0;var C=0,G=0,j=0,H=0,ne=0;H=ht,ht=ht+16|0,j=H,hs(_,b,j),C=jt(_|0,b|0,45)|0,mt()|0,C=(M(C&127)|0)==0,G=jt(_|0,b|0,52)|0,mt()|0,G=G&15;e:do if(!C){if(G|0)for(C=1;;){if(ne=ci(7,0,(15-C|0)*3|0)|0,!((ne&_|0)==0&((mt()|0)&b|0)==0))break e;if(C>>>0<G>>>0)C=C+1|0;else break}xa(j,G,0,5,S),ht=H;return}while(!1);wa(j,G,0,6,S),ht=H}function Na(_,b){_=_|0,b=b|0;var S=0,C=0,G=0;if(C=jt(_|0,b|0,45)|0,mt()|0,!(M(C&127)|0))return C=2,C|0;if(C=jt(_|0,b|0,52)|0,mt()|0,C=C&15,!C)return C=5,C|0;for(S=1;;){if(G=ci(7,0,(15-S|0)*3|0)|0,!((G&_|0)==0&((mt()|0)&b|0)==0)){S=2,_=6;break}if(S>>>0<C>>>0)S=S+1|0;else{S=5,_=6;break}}return(_|0)==6?S|0:0}function Zo(_,b,S){_=_|0,b=b|0,S=S|0;var C=0,G=0,j=0,H=0,ne=0,Se=0,Ge=0,$e=0,kt=0;kt=ht,ht=ht+128|0,Ge=kt+112|0,j=kt+96|0,$e=kt,G=jt(_|0,b|0,52)|0,mt()|0,ne=G&15,i[Ge>>2]=ne,H=jt(_|0,b|0,45)|0,mt()|0,H=H&127;e:do if(M(H)|0){if(ne|0)for(C=1;;){if(Se=ci(7,0,(15-C|0)*3|0)|0,!((Se&_|0)==0&((mt()|0)&b|0)==0)){G=0;break e}if(C>>>0<ne>>>0)C=C+1|0;else break}if(G&1)G=1;else{Se=ci(ne+1|0,0,52)|0,$e=mt()|0|b&-15728641,Ge=ci(7,0,(14-ne|0)*3|0)|0,Zo((Se|_)&~Ge,$e&~(mt()|0),S),ht=kt;return}}else G=0;while(!1);hs(_,b,j),G?(Ra(j,Ge,$e),Se=5):(Fa(j,Ge,$e),Se=6);e:do if(M(H)|0)if(!ne)C=20;else for(C=1;;){if(H=ci(7,0,(15-C|0)*3|0)|0,!((H&_|0)==0&((mt()|0)&b|0)==0)){C=8;break e}if(C>>>0<ne>>>0)C=C+1|0;else{C=20;break}}else C=8;while(!1);if(Br(S|0,-1,C|0)|0,G){G=0;do{for(j=$e+(G<<4)|0,Zr(j,i[Ge>>2]|0)|0,j=i[j>>2]|0,C=0;H=S+(C<<2)|0,ne=i[H>>2]|0,!((ne|0)==-1|(ne|0)==(j|0));)C=C+1|0;i[H>>2]=j,G=G+1|0}while((G|0)!=(Se|0))}else{G=0;do{for(j=$e+(G<<4)|0,Xa(j,i[Ge>>2]|0,0,1)|0,j=i[j>>2]|0,C=0;H=S+(C<<2)|0,ne=i[H>>2]|0,!((ne|0)==-1|(ne|0)==(j|0));)C=C+1|0;i[H>>2]=j,G=G+1|0}while((G|0)!=(Se|0))}ht=kt}function XA(){return 12}function mo(_,b){_=_|0,b=b|0;var S=0,C=0,G=0,j=0,H=0,ne=0,Se=0;if(ci(_|0,0,52)|0,ne=mt()|0|134225919,(_|0)<1){C=0,S=0;do M(C)|0&&(ci(C|0,0,45)|0,H=ne|(mt()|0),_=b+(S<<3)|0,i[_>>2]=-1,i[_+4>>2]=H,S=S+1|0),C=C+1|0;while((C|0)!=122);return}H=0,S=0;do{if(M(H)|0){for(ci(H|0,0,45)|0,C=1,G=-1,j=ne|(mt()|0);Se=ci(7,0,(15-C|0)*3|0)|0,G=G&~Se,j=j&~(mt()|0),(C|0)!=(_|0);)C=C+1|0;Se=b+(S<<3)|0,i[Se>>2]=G,i[Se+4>>2]=j,S=S+1|0}H=H+1|0}while((H|0)!=122)}function $s(_,b,S,C){_=_|0,b=b|0,S=S|0,C=C|0;var G=0,j=0,H=0,ne=0,Se=0,Ge=0;if(ne=ht,ht=ht+64|0,H=ne,(_|0)==(S|0)&(b|0)==(C|0)|(!1|(b&2013265920|0)!=134217728|(!1|(C&2013265920|0)!=134217728))||(G=jt(_|0,b|0,52)|0,mt()|0,G=G&15,j=jt(S|0,C|0,52)|0,mt()|0,(G|0)!=(j&15|0)))return H=0,ht=ne,H|0;if(j=G+-1|0,G>>>0>1&&(Ge=ba(_,b,j)|0,Se=mt()|0,j=ba(S,C,j)|0,(Ge|0)==(j|0)&(Se|0)==(mt()|0))&&(j=(G^15)*3|0,G=jt(_|0,b|0,j|0)|0,mt()|0,G=G&7,j=jt(S|0,C|0,j|0)|0,mt()|0,j=j&7,(G|0)==0|(j|0)==0||(i[21136+(G<<2)>>2]|0)==(j|0)||(i[21168+(G<<2)>>2]|0)==(j|0)))return Ge=1,ht=ne,Ge|0;G=H,j=G+56|0;do i[G>>2]=0,G=G+4|0;while((G|0)<(j|0));return Hs(_,b,1,H),Ge=H,!((i[Ge>>2]|0)==(S|0)&&(i[Ge+4>>2]|0)==(C|0))&&(Ge=H+8|0,!((i[Ge>>2]|0)==(S|0)&&(i[Ge+4>>2]|0)==(C|0)))&&(Ge=H+16|0,!((i[Ge>>2]|0)==(S|0)&&(i[Ge+4>>2]|0)==(C|0)))&&(Ge=H+24|0,!((i[Ge>>2]|0)==(S|0)&&(i[Ge+4>>2]|0)==(C|0)))&&(Ge=H+32|0,!((i[Ge>>2]|0)==(S|0)&&(i[Ge+4>>2]|0)==(C|0)))&&(Ge=H+40|0,!((i[Ge>>2]|0)==(S|0)&&(i[Ge+4>>2]|0)==(C|0)))?(G=H+48|0,G=((i[G>>2]|0)==(S|0)?(i[G+4>>2]|0)==(C|0):0)&1):G=1,Ge=G,ht=ne,Ge|0}function Ot(_,b,S,C){_=_|0,b=b|0,S=S|0,C=C|0;var G=0,j=0,H=0,ne=0,Se=0,Ge=0,$e=0;if(Ge=ht,ht=ht+16|0,H=Ge,!($s(_,b,S,C)|0))return ne=0,Se=0,Xi(ne|0),ht=Ge,Se|0;for(ne=b&-2130706433,G=(Lr(_,b)|0)==0,G=G?1:2;i[H>>2]=0,$e=an(_,b,G,H)|0,j=G+1|0,!(($e|0)==(S|0)&(mt()|0)==(C|0));)if(j>>>0<7)G=j;else{G=0,_=0,Se=6;break}return(Se|0)==6?(Xi(G|0),ht=Ge,_|0):($e=ci(G|0,0,56)|0,Se=ne|(mt()|0)|268435456,$e=_|$e,Xi(Se|0),ht=Ge,$e|0)}function si(_,b){_=_|0,b=b|0;var S=0;return S=!0&(b&2013265920|0)==268435456,Xi((S?b&-2130706433|134217728:0)|0),(S?_:0)|0}function Jt(_,b){_=_|0,b=b|0;var S=0,C=0,G=0;return C=ht,ht=ht+16|0,S=C,!0&(b&2013265920|0)==268435456?(G=jt(_|0,b|0,56)|0,mt()|0,i[S>>2]=0,S=an(_,b&-2130706433|134217728,G&7,S)|0,b=mt()|0,Xi(b|0),ht=C,S|0):(b=0,S=0,Xi(b|0),ht=C,S|0)}function at(_,b){_=_|0,b=b|0;var S=0;if(!(!0&(b&2013265920|0)==268435456))return S=0,S|0;switch(S=jt(_|0,b|0,56)|0,mt()|0,S&7){case 0:case 7:return S=0,S|0}return S=b&-2130706433|134217728,!0&(b&117440512|0)==16777216&(Lr(_,S)|0)!=0?(S=0,S|0):(S=gr(_,S)|0,S|0)}function yt(_,b,S){_=_|0,b=b|0,S=S|0;var C=0,G=0,j=0,H=0,ne=0;j=ht,ht=ht+16|0,C=j,H=!0&(b&2013265920|0)==268435456,G=b&-2130706433|134217728,ne=S,i[ne>>2]=H?_:0,i[ne+4>>2]=H?G:0,H?(b=jt(_|0,b|0,56)|0,mt()|0,i[C>>2]=0,_=an(_,G,b&7,C)|0,b=mt()|0):(_=0,b=0),ne=S+8|0,i[ne>>2]=_,i[ne+4>>2]=b,ht=j}function Gt(_,b,S){_=_|0,b=b|0,S=S|0;var C=0,G=0;G=(Lr(_,b)|0)==0,b=b&-2130706433,C=S,i[C>>2]=G?_:0,i[C+4>>2]=G?b|285212672:0,C=S+8|0,i[C>>2]=_,i[C+4>>2]=b|301989888,C=S+16|0,i[C>>2]=_,i[C+4>>2]=b|318767104,C=S+24|0,i[C>>2]=_,i[C+4>>2]=b|335544320,C=S+32|0,i[C>>2]=_,i[C+4>>2]=b|352321536,S=S+40|0,i[S>>2]=_,i[S+4>>2]=b|369098752}function ai(_,b,S){_=_|0,b=b|0,S=S|0;var C=0,G=0,j=0,H=0,ne=0;if(H=ht,ht=ht+16|0,j=H,C=jt(_|0,b|0,56)|0,mt()|0,ne=!0&(b&2013265920|0)==268435456,G=ne?_:0,_=ne?b&-2130706433|134217728:0,b=Ml(G,_,C&7)|0,(b|0)==-1){i[S>>2]=0,ht=H;return}hs(G,_,j),C=jt(G|0,_|0,52)|0,mt()|0,C=C&15,Lr(G,_)|0?xa(j,C,b,2,S):wa(j,C,b,2,S),ht=H}function Hi(_){_=_|0;var b=0,S=0,C=0;return b=Ga(1,12)|0,b||bi(22691,22646,49,22704),S=_+4|0,C=i[S>>2]|0,C|0?(C=C+8|0,i[C>>2]=b,i[S>>2]=b,b|0):(i[_>>2]|0&&bi(22721,22646,61,22744),C=_,i[C>>2]=b,i[S>>2]=b,b|0)}function mn(_,b){_=_|0,b=b|0;var S=0,C=0;return C=Us(24)|0,C||bi(22758,22646,78,22772),i[C>>2]=i[b>>2],i[C+4>>2]=i[b+4>>2],i[C+8>>2]=i[b+8>>2],i[C+12>>2]=i[b+12>>2],i[C+16>>2]=0,b=_+4|0,S=i[b>>2]|0,S|0?(i[S+16>>2]=C,i[b>>2]=C,C|0):(i[_>>2]|0&&bi(22787,22646,82,22772),i[_>>2]=C,i[b>>2]=C,C|0)}function Pn(_){_=_|0;var b=0,S=0,C=0,G=0;if(_)for(C=1;;){if(b=i[_>>2]|0,b|0)do{if(S=i[b>>2]|0,S|0)do G=S,S=i[S+16>>2]|0,Sn(G);while(S|0);G=b,b=i[b+8>>2]|0,Sn(G)}while(b|0);if(b=_,_=i[_+8>>2]|0,C||Sn(b),_)C=0;else break}}function xn(_){_=_|0;var b=0,S=0,C=0,G=0,j=0,H=0,ne=0,Se=0,Ge=0,$e=0,kt=0,lt=0,ct=0,L=0,r=0,d=0,k=0,I=0,R=0,q=0,a=0,o=0,h=0,p=0,v=0,E=0,z=0,F=0,Y=0,J=0,ve=0,Ie=0;if(G=_+8|0,i[G>>2]|0)return Ie=1,Ie|0;if(C=i[_>>2]|0,!C)return Ie=0,Ie|0;b=C,S=0;do S=S+1|0,b=i[b+8>>2]|0;while(b|0);if(S>>>0<2)return Ie=0,Ie|0;J=Us(S<<2)|0,J||bi(22807,22646,317,22826),Y=Us(S<<5)|0,Y||bi(22848,22646,321,22826),i[_>>2]=0,o=_+4|0,i[o>>2]=0,i[G>>2]=0,S=0,F=0,a=0,kt=0;e:for(;;){if($e=i[C>>2]|0,$e){j=0,H=$e;do{if(Se=+ue[H+8>>3],b=H,H=i[H+16>>2]|0,Ge=(H|0)==0,G=Ge?$e:H,ne=+ue[G+8>>3],+Wt(+(Se-ne))>3.141592653589793){Ie=14;break}j=j+(ne-Se)*(+ue[b>>3]+ +ue[G>>3])}while(!Ge);if((Ie|0)==14){Ie=0,j=0,b=$e;do q=+ue[b+8>>3],z=b+16|0,E=i[z>>2]|0,E=E|0?E:$e,R=+ue[E+8>>3],j=j+(+ue[b>>3]+ +ue[E>>3])*((R<0?R+6.283185307179586:R)-(q<0?q+6.283185307179586:q)),b=i[(b|0?z:C)>>2]|0;while(b|0)}j>0?(i[J+(F<<2)>>2]=C,F=F+1|0,G=a,b=kt):Ie=19}else Ie=19;if((Ie|0)==19){Ie=0;do if(S){if(b=S+8|0,i[b>>2]|0){Ie=21;break e}if(S=Ga(1,12)|0,!S){Ie=23;break e}i[b>>2]=S,G=S+4|0,H=S,b=kt}else if(kt){G=o,H=kt+8|0,b=C,S=_;break}else if(i[_>>2]|0){Ie=27;break e}else{G=o,H=_,b=C,S=_;break}while(!1);if(i[H>>2]=C,i[G>>2]=C,H=Y+(a<<5)|0,Ge=i[C>>2]|0,Ge){for($e=Y+(a<<5)+8|0,ue[$e>>3]=17976931348623157e292,kt=Y+(a<<5)+24|0,ue[kt>>3]=17976931348623157e292,ue[H>>3]=-17976931348623157e292,lt=Y+(a<<5)+16|0,ue[lt>>3]=-17976931348623157e292,k=17976931348623157e292,I=-17976931348623157e292,G=0,ct=Ge,Se=17976931348623157e292,r=17976931348623157e292,d=-17976931348623157e292,ne=-17976931348623157e292;j=+ue[ct>>3],q=+ue[ct+8>>3],ct=i[ct+16>>2]|0,L=(ct|0)==0,R=+ue[(L?Ge:ct)+8>>3],j<Se&&(ue[$e>>3]=j,Se=j),q<r&&(ue[kt>>3]=q,r=q),j>d?ue[H>>3]=j:j=d,q>ne&&(ue[lt>>3]=q,ne=q),k=q>0&q<k?q:k,I=q<0&q>I?q:I,G=G|+Wt(+(q-R))>3.141592653589793,!L;)d=j;G&&(ue[lt>>3]=I,ue[kt>>3]=k)}else i[H>>2]=0,i[H+4>>2]=0,i[H+8>>2]=0,i[H+12>>2]=0,i[H+16>>2]=0,i[H+20>>2]=0,i[H+24>>2]=0,i[H+28>>2]=0;G=a+1|0}if(z=C+8|0,C=i[z>>2]|0,i[z>>2]=0,C)a=G,kt=b;else{Ie=45;break}}if((Ie|0)==21)bi(22624,22646,35,22658);else if((Ie|0)==23)bi(22678,22646,37,22658);else if((Ie|0)==27)bi(22721,22646,61,22744);else if((Ie|0)==45){e:do if((F|0)>0){for(z=(G|0)==0,v=G<<2,E=(_|0)==0,p=0,b=0;;){if(h=i[J+(p<<2)>>2]|0,z)Ie=73;else{if(a=Us(v)|0,!a){Ie=50;break}if(o=Us(v)|0,!o){Ie=52;break}t:do if(E)S=0;else{for(G=0,S=0,H=_;C=Y+(G<<5)|0,jr(i[H>>2]|0,C,i[h>>2]|0)|0?(i[a+(S<<2)>>2]=H,i[o+(S<<2)>>2]=C,L=S+1|0):L=S,H=i[H+8>>2]|0,H;)G=G+1|0,S=L;if((L|0)>0)if(C=i[a>>2]|0,(L|0)==1)S=C;else for(lt=0,ct=-1,S=C,kt=C;;){for(Ge=i[kt>>2]|0,C=0,H=0;G=i[i[a+(H<<2)>>2]>>2]|0,(G|0)==(Ge|0)?$e=C:$e=C+((jr(G,i[o+(H<<2)>>2]|0,i[Ge>>2]|0)|0)&1)|0,H=H+1|0,(H|0)!=(L|0);)C=$e;if(G=($e|0)>(ct|0),S=G?kt:S,C=lt+1|0,(C|0)==(L|0))break t;lt=C,ct=G?$e:ct,kt=i[a+(C<<2)>>2]|0}else S=0}while(!1);if(Sn(a),Sn(o),S){if(G=S+4|0,C=i[G>>2]|0,C)S=C+8|0;else if(i[S>>2]|0){Ie=70;break}i[S>>2]=h,i[G>>2]=h}else Ie=73}if((Ie|0)==73){if(Ie=0,b=i[h>>2]|0,b|0)do o=b,b=i[b+16>>2]|0,Sn(o);while(b|0);Sn(h),b=2}if(p=p+1|0,(p|0)>=(F|0)){ve=b;break e}}(Ie|0)==50?bi(22863,22646,249,22882):(Ie|0)==52?bi(22901,22646,252,22882):(Ie|0)==70&&bi(22721,22646,61,22744)}else ve=0;while(!1);return Sn(J),Sn(Y),Ie=ve,Ie|0}return 0}function jr(_,b,S){_=_|0,b=b|0,S=S|0;var C=0,G=0,j=0,H=0,ne=0,Se=0,Ge=0,$e=0;if(!(na(b,S)|0)||(b=or(b)|0,Ge=+ue[S>>3],C=+ue[S+8>>3],C=b&C<0?C+6.283185307179586:C,_=i[_>>2]|0,!_))return _=0,_|0;if(b){b=0,S=_;e:for(;;){for(;H=+ue[S>>3],Se=+ue[S+8>>3],S=S+16|0,$e=i[S>>2]|0,$e=$e|0?$e:_,j=+ue[$e>>3],G=+ue[$e+8>>3],H>j?(ne=H,H=Se):(ne=j,j=H,H=G,G=Se),!!(Ge<j|Ge>ne);)if(S=i[S>>2]|0,!S){S=22;break e}if(Se=G<0?G+6.283185307179586:G,H=H<0?H+6.283185307179586:H,C=H==C|Se==C?C+-2220446049250313e-31:C,Se=Se+(Ge-j)/(ne-j)*(H-Se),(Se<0?Se+6.283185307179586:Se)>C&&(b=b^1),S=i[S>>2]|0,!S){S=22;break}}if((S|0)==22)return b|0}else{b=0,S=_;e:for(;;){for(;H=+ue[S>>3],Se=+ue[S+8>>3],S=S+16|0,$e=i[S>>2]|0,$e=$e|0?$e:_,j=+ue[$e>>3],G=+ue[$e+8>>3],H>j?(ne=H,H=Se):(ne=j,j=H,H=G,G=Se),!!(Ge<j|Ge>ne);)if(S=i[S>>2]|0,!S){S=22;break e}if(C=H==C|G==C?C+-2220446049250313e-31:C,G+(Ge-j)/(ne-j)*(H-G)>C&&(b=b^1),S=i[S>>2]|0,!S){S=22;break}}if((S|0)==22)return b|0}return 0}function xs(_,b,S,C,G){_=_|0,b=b|0,S=S|0,C=C|0,G=G|0;var j=0,H=0,ne=0,Se=0,Ge=0,$e=0,kt=0,lt=0,ct=0,L=0,r=0,d=0,k=0,I=0;if(I=ht,ht=ht+32|0,k=I+16|0,d=I,j=jt(_|0,b|0,52)|0,mt()|0,j=j&15,ct=jt(S|0,C|0,52)|0,mt()|0,(j|0)!=(ct&15|0))return k=1,ht=I,k|0;if(Ge=jt(_|0,b|0,45)|0,mt()|0,Ge=Ge&127,$e=jt(S|0,C|0,45)|0,mt()|0,$e=$e&127,ct=(Ge|0)!=($e|0),ct){if(ne=zi(Ge,$e)|0,(ne|0)==7)return k=2,ht=I,k|0;Se=zi($e,Ge)|0,(Se|0)==7?bi(22925,22949,151,22959):(L=ne,H=Se)}else L=0,H=0;kt=M(Ge)|0,lt=M($e)|0,i[k>>2]=0,i[k+4>>2]=0,i[k+8>>2]=0,i[k+12>>2]=0;do if(L){if($e=i[4304+(Ge*28|0)+(L<<2)>>2]|0,ne=($e|0)>0,lt)if(ne){Ge=0,Se=S,ne=C;do Se=ma(Se,ne)|0,ne=mt()|0,H=As(H)|0,(H|0)==1&&(H=As(1)|0),Ge=Ge+1|0;while((Ge|0)!=($e|0));$e=H,Ge=Se,Se=ne}else $e=H,Ge=S,Se=C;else if(ne){Ge=0,Se=S,ne=C;do Se=Ar(Se,ne)|0,ne=mt()|0,H=As(H)|0,Ge=Ge+1|0;while((Ge|0)!=($e|0));$e=H,Ge=Se,Se=ne}else $e=H,Ge=S,Se=C;if(oa(Ge,Se,k)|0,ct||bi(22972,22949,181,22959),ne=(kt|0)!=0,H=(lt|0)!=0,ne&H&&bi(22999,22949,182,22959),ne){if(H=rs(_,b)|0,nt[22032+(H*7|0)+L>>0]|0){j=3;break}Se=i[21200+(H*28|0)+(L<<2)>>2]|0,Ge=Se,r=26}else if(H){if(H=rs(Ge,Se)|0,nt[22032+(H*7|0)+$e>>0]|0){j=4;break}Ge=0,Se=i[21200+($e*28|0)+(H<<2)>>2]|0,r=26}else H=0;if((r|0)==26)if((Se|0)<=-1&&bi(23030,22949,212,22959),(Ge|0)<=-1&&bi(23053,22949,213,22959),(Se|0)>0){ne=k+4|0,H=0;do La(ne),H=H+1|0;while((H|0)!=(Se|0));H=Ge}else H=Ge;if(i[d>>2]=0,i[d+4>>2]=0,i[d+8>>2]=0,ko(d,L),j|0)for(;xr(j)|0?Ya(d):Hr(d),(j|0)>1;)j=j+-1|0;if((H|0)>0){j=0;do La(d),j=j+1|0;while((j|0)!=(H|0))}r=k+4|0,ur(r,d,r),yn(r),r=50}else if(oa(S,C,k)|0,(kt|0)!=0&(lt|0)!=0)if(($e|0)!=(Ge|0)&&bi(23077,22949,243,22959),H=rs(_,b)|0,j=rs(S,C)|0,nt[22032+(H*7|0)+j>>0]|0)j=5;else if(H=i[21200+(H*28|0)+(j<<2)>>2]|0,(H|0)>0){ne=k+4|0,j=0;do La(ne),j=j+1|0;while((j|0)!=(H|0));r=50}else r=50;else r=50;while(!1);return(r|0)==50&&(j=k+4|0,i[G>>2]=i[j>>2],i[G+4>>2]=i[j+4>>2],i[G+8>>2]=i[j+8>>2],j=0),k=j,ht=I,k|0}function Is(_,b,S,C){_=_|0,b=b|0,S=S|0,C=C|0;var G=0,j=0,H=0,ne=0,Se=0,Ge=0,$e=0,kt=0,lt=0,ct=0,L=0,r=0,d=0,k=0,I=0;if(L=ht,ht=ht+48|0,H=L+36|0,ne=L+24|0,Se=L+12|0,Ge=L,j=jt(_|0,b|0,52)|0,mt()|0,j=j&15,lt=jt(_|0,b|0,45)|0,mt()|0,lt=lt&127,$e=M(lt)|0,ci(j|0,0,52)|0,d=mt()|0|134225919,r=C,i[r>>2]=-1,i[r+4>>2]=d,!j)return(i[S>>2]|0)>1||(i[S+4>>2]|0)>1||(i[S+8>>2]|0)>1||(G=Ii(lt,fo(S)|0)|0,(G|0)==127)?(d=1,ht=L,d|0):(ct=ci(G|0,0,45)|0,r=mt()|0,lt=C,r=i[lt+4>>2]&-1040385|r,d=C,i[d>>2]=i[lt>>2]|ct,i[d+4>>2]=r,d=0,ht=L,d|0);for(i[H>>2]=i[S>>2],i[H+4>>2]=i[S+4>>2],i[H+8>>2]=i[S+8>>2];i[ne>>2]=i[H>>2],i[ne+4>>2]=i[H+4>>2],i[ne+8>>2]=i[H+8>>2],xr(j)|0?(Go(H),i[Se>>2]=i[H>>2],i[Se+4>>2]=i[H+4>>2],i[Se+8>>2]=i[H+8>>2],Ya(Se)):(ya(H),i[Se>>2]=i[H>>2],i[Se+4>>2]=i[H+4>>2],i[Se+8>>2]=i[H+8>>2],Hr(Se)),is(ne,Se,Ge),yn(Ge),r=C,k=i[r>>2]|0,r=i[r+4>>2]|0,I=(15-j|0)*3|0,S=ci(7,0,I|0)|0,r=r&~(mt()|0),I=ci(fo(Ge)|0,0,I|0)|0,r=mt()|0|r,d=C,i[d>>2]=I|k&~S,i[d+4>>2]=r,(j|0)>1;)j=j+-1|0;e:do if((i[H>>2]|0)<=1&&(i[H+4>>2]|0)<=1&&(i[H+8>>2]|0)<=1){j=fo(H)|0,ne=Ii(lt,j)|0,(ne|0)==127?Ge=0:Ge=M(ne)|0;t:do if(j){if($e){if(H=21408+((rs(_,b)|0)*28|0)+(j<<2)|0,H=i[H>>2]|0,(H|0)>0){S=0;do j=ds(j)|0,S=S+1|0;while((S|0)!=(H|0))}if((j|0)==1){G=3;break e}S=Ii(lt,j)|0,(S|0)==127&&bi(23104,22949,376,23134),M(S)|0?bi(23147,22949,377,23134):(ct=H,kt=j,G=S)}else ct=0,kt=j,G=ne;if(Se=i[4304+(lt*28|0)+(kt<<2)>>2]|0,(Se|0)<=-1&&bi(23178,22949,384,23134),!Ge){if((ct|0)<=-1&&bi(23030,22949,417,23134),ct|0){H=C,j=0,S=i[H>>2]|0,H=i[H+4>>2]|0;do S=Ns(S,H)|0,H=mt()|0,I=C,i[I>>2]=S,i[I+4>>2]=H,j=j+1|0;while((j|0)<(ct|0))}if((Se|0)<=0){j=54;break}for(H=C,j=0,S=i[H>>2]|0,H=i[H+4>>2]|0;;)if(S=Ns(S,H)|0,H=mt()|0,I=C,i[I>>2]=S,i[I+4>>2]=H,j=j+1|0,(j|0)==(Se|0)){j=54;break t}}if(ne=zi(G,lt)|0,(ne|0)==7&&bi(22925,22949,393,23134),j=C,S=i[j>>2]|0,j=i[j+4>>2]|0,(Se|0)>0){H=0;do S=Ns(S,j)|0,j=mt()|0,I=C,i[I>>2]=S,i[I+4>>2]=j,H=H+1|0;while((H|0)!=(Se|0))}if(S=rs(S,j)|0,I=te(G)|0,S=i[(I?21824:21616)+(ne*28|0)+(S<<2)>>2]|0,(S|0)<=-1&&bi(23030,22949,412,23134),!S)j=54;else{ne=C,j=0,H=i[ne>>2]|0,ne=i[ne+4>>2]|0;do H=Kr(H,ne)|0,ne=mt()|0,I=C,i[I>>2]=H,i[I+4>>2]=ne,j=j+1|0;while((j|0)<(S|0));j=54}}else if(($e|0)!=0&(Ge|0)!=0)if(I=rs(_,b)|0,j=C,j=21408+(I*28|0)+((rs(i[j>>2]|0,i[j+4>>2]|0)|0)<<2)|0,j=i[j>>2]|0,(j|0)<=-1&&bi(23201,22949,433,23134),!j)G=ne,j=55;else{H=C,G=0,S=i[H>>2]|0,H=i[H+4>>2]|0;do S=Ns(S,H)|0,H=mt()|0,I=C,i[I>>2]=S,i[I+4>>2]=H,G=G+1|0;while((G|0)<(j|0));G=ne,j=54}else G=ne,j=54;while(!1);if((j|0)==54&&Ge&&(j=55),(j|0)==55&&(I=C,(rs(i[I>>2]|0,i[I+4>>2]|0)|0)==1)){G=4;break}I=C,d=i[I>>2]|0,I=i[I+4>>2]&-1040385,k=ci(G|0,0,45)|0,I=I|(mt()|0),G=C,i[G>>2]=d|k,i[G+4>>2]=I,G=0}else G=2;while(!1);return I=G,ht=L,I|0}function Vs(_,b,S,C,G){_=_|0,b=b|0,S=S|0,C=C|0,G=G|0;var j=0,H=0;return H=ht,ht=ht+16|0,j=H,_=xs(_,b,S,C,j)|0,_||(za(j,G),_=0),ht=H,_|0}function EA(_,b,S,C){_=_|0,b=b|0,S=S|0,C=C|0;var G=0,j=0;return G=ht,ht=ht+16|0,j=G,$a(S,j),C=Is(_,b,j,C)|0,ht=G,C|0}function Pr(_,b,S,C){_=_|0,b=b|0,S=S|0,C=C|0;var G=0,j=0,H=0;return H=ht,ht=ht+32|0,G=H+12|0,j=H,!(xs(_,b,_,b,G)|0)&&!(xs(_,b,S,C,j)|0)?_=aa(G,j)|0:_=-1,ht=H,_|0}function Jl(_,b,S,C){_=_|0,b=b|0,S=S|0,C=C|0;var G=0,j=0,H=0;return H=ht,ht=ht+32|0,G=H+12|0,j=H,!(xs(_,b,_,b,G)|0)&&!(xs(_,b,S,C,j)|0)?_=aa(G,j)|0:_=-1,ht=H,(_>>>31^1)+_|0}function KA(_,b,S,C,G){_=_|0,b=b|0,S=S|0,C=C|0,G=G|0;var j=0,H=0,ne=0,Se=0,Ge=0,$e=0,kt=0,lt=0,ct=0,L=0,r=0,d=0,k=0,I=0,R=0,q=0,a=0,o=0;if(a=ht,ht=ht+48|0,j=a+24|0,H=a+12|0,q=a,!(xs(_,b,_,b,j)|0)&&!(xs(_,b,S,C,H)|0)){if(R=aa(j,H)|0,(R|0)<0)return q=R,ht=a,q|0;for(i[j>>2]=0,i[j+4>>2]=0,i[j+8>>2]=0,i[H>>2]=0,i[H+4>>2]=0,i[H+8>>2]=0,xs(_,b,_,b,j)|0,xs(_,b,S,C,H)|0,rA(j),rA(H),R?($e=i[j>>2]|0,ct=+(R|0),d=j+4|0,kt=i[d>>2]|0,k=j+8|0,lt=i[k>>2]|0,I=j,S=$e,C=kt,j=lt,L=+((i[H>>2]|0)-$e|0)/ct,r=+((i[H+4>>2]|0)-kt|0)/ct,ct=+((i[H+8>>2]|0)-lt|0)/ct):(C=j+4|0,lt=j+8|0,d=C,k=lt,I=j,S=i[j>>2]|0,C=i[C>>2]|0,j=i[lt>>2]|0,L=0,r=0,ct=0),i[q>>2]=S,lt=q+4|0,i[lt>>2]=C,kt=q+8|0,i[kt>>2]=j,$e=0;;){Se=+($e|0),o=L*Se+ +(S|0),ne=r*Se+ +(i[d>>2]|0),Se=ct*Se+ +(i[k>>2]|0),C=~~+PA(+o),H=~~+PA(+ne),S=~~+PA(+Se),o=+Wt(+(+(C|0)-o)),ne=+Wt(+(+(H|0)-ne)),Se=+Wt(+(+(S|0)-Se));do if(o>ne&o>Se)C=0-(H+S)|0,j=H;else if(Ge=0-C|0,ne>Se){j=Ge-S|0;break}else{j=H,S=Ge-H|0;break}while(!1);if(i[q>>2]=C,i[lt>>2]=j,i[kt>>2]=S,pr(q),Is(_,b,q,G+($e<<3)|0)|0,($e|0)==(R|0))break;$e=$e+1|0,S=i[I>>2]|0}return q=0,ht=a,q|0}return q=-1,ht=a,q|0}function ka(_,b){_=_|0,b=b|0;var S=0;if(!b)return S=1,S|0;S=_,_=1;do _=ar(b&1|0?S:1,_)|0,b=b>>1,S=ar(S,S)|0;while(b|0);return _|0}function _o(_,b,S){_=_|0,b=b|0,S=S|0;var C=0,G=0,j=0,H=0,ne=0,Se=0,Ge=0,$e=0,kt=0,lt=0;if(!(na(b,S)|0)||(b=or(b)|0,lt=+ue[S>>3],C=+ue[S+8>>3],C=b&C<0?C+6.283185307179586:C,kt=i[_>>2]|0,(kt|0)<=0))return kt=0,kt|0;if($e=i[_+4>>2]|0,b){b=0,S=-1,_=0;e:for(;;){for(Ge=_;H=+ue[$e+(Ge<<4)>>3],Se=+ue[$e+(Ge<<4)+8>>3],_=(S+2|0)%(kt|0)|0,j=+ue[$e+(_<<4)>>3],G=+ue[$e+(_<<4)+8>>3],H>j?(ne=H,H=Se):(ne=j,j=H,H=G,G=Se),!!(lt<j|lt>ne);)if(S=Ge+1|0,(S|0)<(kt|0))_=Ge,Ge=S,S=_;else{S=22;break e}if(Se=G<0?G+6.283185307179586:G,H=H<0?H+6.283185307179586:H,C=H==C|Se==C?C+-2220446049250313e-31:C,Se=Se+(lt-j)/(ne-j)*(H-Se),(Se<0?Se+6.283185307179586:Se)>C&&(b=b^1),_=Ge+1|0,(_|0)>=(kt|0)){S=22;break}else S=Ge}if((S|0)==22)return b|0}else{b=0,S=-1,_=0;e:for(;;){for(Ge=_;H=+ue[$e+(Ge<<4)>>3],Se=+ue[$e+(Ge<<4)+8>>3],_=(S+2|0)%(kt|0)|0,j=+ue[$e+(_<<4)>>3],G=+ue[$e+(_<<4)+8>>3],H>j?(ne=H,H=Se):(ne=j,j=H,H=G,G=Se),!!(lt<j|lt>ne);)if(S=Ge+1|0,(S|0)<(kt|0))_=Ge,Ge=S,S=_;else{S=22;break e}if(C=H==C|G==C?C+-2220446049250313e-31:C,G+(lt-j)/(ne-j)*(H-G)>C&&(b=b^1),_=Ge+1|0,(_|0)>=(kt|0)){S=22;break}else S=Ge}if((S|0)==22)return b|0}return 0}function Zi(_,b){_=_|0,b=b|0;var S=0,C=0,G=0,j=0,H=0,ne=0,Se=0,Ge=0,$e=0,kt=0,lt=0,ct=0,L=0,r=0,d=0,k=0,I=0;if(L=i[_>>2]|0,!L){i[b>>2]=0,i[b+4>>2]=0,i[b+8>>2]=0,i[b+12>>2]=0,i[b+16>>2]=0,i[b+20>>2]=0,i[b+24>>2]=0,i[b+28>>2]=0;return}if(r=b+8|0,ue[r>>3]=17976931348623157e292,d=b+24|0,ue[d>>3]=17976931348623157e292,ue[b>>3]=-17976931348623157e292,k=b+16|0,ue[k>>3]=-17976931348623157e292,!((L|0)<=0)){for(lt=i[_+4>>2]|0,Ge=17976931348623157e292,$e=-17976931348623157e292,kt=0,_=-1,j=17976931348623157e292,H=17976931348623157e292,Se=-17976931348623157e292,C=-17976931348623157e292,ct=0;S=+ue[lt+(ct<<4)>>3],ne=+ue[lt+(ct<<4)+8>>3],_=_+2|0,G=+ue[lt+(((_|0)==(L|0)?0:_)<<4)+8>>3],S<j&&(ue[r>>3]=S,j=S),ne<H&&(ue[d>>3]=ne,H=ne),S>Se?ue[b>>3]=S:S=Se,ne>C&&(ue[k>>3]=ne,C=ne),Ge=ne>0&ne<Ge?ne:Ge,$e=ne<0&ne>$e?ne:$e,kt=kt|+Wt(+(ne-G))>3.141592653589793,_=ct+1|0,(_|0)!=(L|0);)I=ct,Se=S,ct=_,_=I;kt&&(ue[k>>3]=$e,ue[d>>3]=Ge)}}function Va(_,b){_=_|0,b=b|0;var S=0,C=0,G=0,j=0,H=0,ne=0,Se=0,Ge=0,$e=0,kt=0,lt=0,ct=0,L=0,r=0,d=0,k=0,I=0,R=0,q=0,a=0,o=0,h=0;if(L=i[_>>2]|0,L){if(r=b+8|0,ue[r>>3]=17976931348623157e292,d=b+24|0,ue[d>>3]=17976931348623157e292,ue[b>>3]=-17976931348623157e292,k=b+16|0,ue[k>>3]=-17976931348623157e292,(L|0)>0){for(G=i[_+4>>2]|0,lt=17976931348623157e292,ct=-17976931348623157e292,C=0,S=-1,Se=17976931348623157e292,Ge=17976931348623157e292,kt=-17976931348623157e292,H=-17976931348623157e292,I=0;j=+ue[G+(I<<4)>>3],$e=+ue[G+(I<<4)+8>>3],o=S+2|0,ne=+ue[G+(((o|0)==(L|0)?0:o)<<4)+8>>3],j<Se&&(ue[r>>3]=j,Se=j),$e<Ge&&(ue[d>>3]=$e,Ge=$e),j>kt?ue[b>>3]=j:j=kt,$e>H&&(ue[k>>3]=$e,H=$e),lt=$e>0&$e<lt?$e:lt,ct=$e<0&$e>ct?$e:ct,C=C|+Wt(+($e-ne))>3.141592653589793,S=I+1|0,(S|0)!=(L|0);)o=I,kt=j,I=S,S=o;C&&(ue[k>>3]=ct,ue[d>>3]=lt)}}else i[b>>2]=0,i[b+4>>2]=0,i[b+8>>2]=0,i[b+12>>2]=0,i[b+16>>2]=0,i[b+20>>2]=0,i[b+24>>2]=0,i[b+28>>2]=0;if(o=_+8|0,S=i[o>>2]|0,!((S|0)<=0)){a=_+12|0,q=0;do if(G=i[a>>2]|0,C=q,q=q+1|0,d=b+(q<<5)|0,k=i[G+(C<<3)>>2]|0,k){if(I=b+(q<<5)+8|0,ue[I>>3]=17976931348623157e292,_=b+(q<<5)+24|0,ue[_>>3]=17976931348623157e292,ue[d>>3]=-17976931348623157e292,R=b+(q<<5)+16|0,ue[R>>3]=-17976931348623157e292,(k|0)>0){for(L=i[G+(C<<3)+4>>2]|0,lt=17976931348623157e292,ct=-17976931348623157e292,G=0,C=-1,r=0,Se=17976931348623157e292,Ge=17976931348623157e292,$e=-17976931348623157e292,H=-17976931348623157e292;j=+ue[L+(r<<4)>>3],kt=+ue[L+(r<<4)+8>>3],C=C+2|0,ne=+ue[L+(((C|0)==(k|0)?0:C)<<4)+8>>3],j<Se&&(ue[I>>3]=j,Se=j),kt<Ge&&(ue[_>>3]=kt,Ge=kt),j>$e?ue[d>>3]=j:j=$e,kt>H&&(ue[R>>3]=kt,H=kt),lt=kt>0&kt<lt?kt:lt,ct=kt<0&kt>ct?kt:ct,G=G|+Wt(+(kt-ne))>3.141592653589793,C=r+1|0,(C|0)!=(k|0);)h=r,r=C,$e=j,C=h;G&&(ue[R>>3]=ct,ue[_>>3]=lt)}}else i[d>>2]=0,i[d+4>>2]=0,i[d+8>>2]=0,i[d+12>>2]=0,i[d+16>>2]=0,i[d+20>>2]=0,i[d+24>>2]=0,i[d+28>>2]=0,S=i[o>>2]|0;while((q|0)<(S|0))}}function Ua(_,b,S){_=_|0,b=b|0,S=S|0;var C=0,G=0,j=0;if(!(_o(_,b,S)|0))return G=0,G|0;if(G=_+8|0,(i[G>>2]|0)<=0)return G=1,G|0;for(C=_+12|0,_=0;;){if(j=_,_=_+1|0,_o((i[C>>2]|0)+(j<<3)|0,b+(_<<5)|0,S)|0){_=0,C=6;break}if((_|0)>=(i[G>>2]|0)){_=1,C=6;break}}return(C|0)==6?_|0:0}function Ea(){return 8}function JA(){return 16}function Vi(){return 168}function IA(){return 8}function fl(){return 16}function Mo(){return 12}function sA(){return 8}function dl(_){_=_|0;var b=0,S=0;return S=+ue[_>>3],b=+ue[_+8>>3],+ +It(+(S*S+b*b))}function aA(_,b,S,C,G){_=_|0,b=b|0,S=S|0,C=C|0,G=G|0;var j=0,H=0,ne=0,Se=0,Ge=0,$e=0,kt=0,lt=0;Ge=+ue[_>>3],Se=+ue[b>>3]-Ge,ne=+ue[_+8>>3],H=+ue[b+8>>3]-ne,kt=+ue[S>>3],j=+ue[C>>3]-kt,lt=+ue[S+8>>3],$e=+ue[C+8>>3]-lt,j=(j*(ne-lt)-(Ge-kt)*$e)/(Se*$e-H*j),ue[G>>3]=Ge+Se*j,ue[G+8>>3]=ne+H*j}function To(_,b){return _=_|0,b=b|0,+ue[_>>3]!=+ue[b>>3]?(b=0,b|0):(b=+ue[_+8>>3]==+ue[b+8>>3],b|0)}function ls(_,b){_=_|0,b=b|0;var S=0,C=0,G=0;return G=+ue[_>>3]-+ue[b>>3],C=+ue[_+8>>3]-+ue[b+8>>3],S=+ue[_+16>>3]-+ue[b+16>>3],+(G*G+C*C+S*S)}function El(_,b){_=_|0,b=b|0;var S=0,C=0,G=0;S=+ue[_>>3],C=+hi(+S),S=+Zt(+S),ue[b+16>>3]=S,S=+ue[_+8>>3],G=C*+hi(+S),ue[b>>3]=G,S=C*+Zt(+S),ue[b+8>>3]=S}function Il(_,b){_=_|0,b=b|0;var S=0,C=0,G=0,j=0,H=0,ne=0,Se=0,Ge=0;if(Ge=ht,ht=ht+32|0,G=Ge+16|0,j=Ge,hs(_,b,G),H=Oa(_,b)|0,Se=rs(_,b)|0,dt(H,j),b=Qt(H,i[G>>2]|0)|0,!(M(H)|0))return Se=b,ht=Ge,Se|0;do switch(H|0){case 4:{_=0,S=14;break}case 14:{_=1,S=14;break}case 24:{_=2,S=14;break}case 38:{_=3,S=14;break}case 49:{_=4,S=14;break}case 58:{_=5,S=14;break}case 63:{_=6,S=14;break}case 72:{_=7,S=14;break}case 83:{_=8,S=14;break}case 97:{_=9,S=14;break}case 107:{_=10,S=14;break}case 117:{_=11,S=14;break}default:ne=0,C=0}while(!1);return(S|0)==14&&(ne=i[22096+(_*24|0)+8>>2]|0,C=i[22096+(_*24|0)+16>>2]|0),_=i[G>>2]|0,(_|0)!=(i[j>>2]|0)&&(H=te(H)|0,_=i[G>>2]|0,H|(_|0)==(C|0)&&(b=(b+1|0)%6|0)),(Se|0)==3&(_|0)==(C|0)?(Se=(b+5|0)%6|0,ht=Ge,Se|0):(Se|0)==5&(_|0)==(ne|0)?(Se=(b+1|0)%6|0,ht=Ge,Se|0):(Se=b,ht=Ge,Se|0)}function Ml(_,b,S){_=_|0,b=b|0,S=S|0;var C=0,G=0;return C=Lr(_,b)|0,(S+-1|0)>>>0>5||(G=(C|0)!=0,(S|0)==1&G)?(S=-1,S|0):(C=Il(_,b)|0,G?(S=(5-C+(i[22384+(S<<2)>>2]|0)|0)%5|0,S|0):(S=(6-C+(i[22416+(S<<2)>>2]|0)|0)%6|0,S|0))}function oA(_,b,S){_=_|0,b=b|0,S=S|0;var C=0;(b|0)>0?(C=Ga(b,4)|0,i[_>>2]=C,C||bi(23230,23253,40,23267)):i[_>>2]=0,i[_+4>>2]=b,i[_+8>>2]=0,i[_+12>>2]=S}function Fs(_){_=_|0;var b=0,S=0,C=0,G=0,j=0,H=0,ne=0;G=_+4|0,j=_+12|0,H=_+8|0;e:for(;;){for(S=i[G>>2]|0,b=0;;){if((b|0)>=(S|0))break e;if(C=i[_>>2]|0,ne=i[C+(b<<2)>>2]|0,!ne)b=b+1|0;else break}b=C+(~~(+Wt(+(+Bt(10,+ +(15-(i[j>>2]|0)|0))*(+ue[ne>>3]+ +ue[ne+8>>3])))%+(S|0))>>>0<<2)|0,S=i[b>>2]|0;t:do if(S|0){if(C=ne+32|0,(S|0)==(ne|0))i[b>>2]=i[C>>2];else{if(S=S+32|0,b=i[S>>2]|0,!b)break;for(;(b|0)!=(ne|0);)if(S=b+32|0,b=i[S>>2]|0,!b)break t;i[S>>2]=i[C>>2]}Sn(ne),i[H>>2]=(i[H>>2]|0)+-1}while(!1)}Sn(i[_>>2]|0)}function to(_){_=_|0;var b=0,S=0,C=0;for(C=i[_+4>>2]|0,S=0;;){if((S|0)>=(C|0)){b=0,S=4;break}if(b=i[(i[_>>2]|0)+(S<<2)>>2]|0,!b)S=S+1|0;else{S=4;break}}return(S|0)==4?b|0:0}function MA(_,b){_=_|0,b=b|0;var S=0,C=0,G=0,j=0;if(S=~~(+Wt(+(+Bt(10,+ +(15-(i[_+12>>2]|0)|0))*(+ue[b>>3]+ +ue[b+8>>3])))%+(i[_+4>>2]|0))>>>0,S=(i[_>>2]|0)+(S<<2)|0,C=i[S>>2]|0,!C)return j=1,j|0;j=b+32|0;do if((C|0)!=(b|0)){if(S=i[C+32>>2]|0,!S)return j=1,j|0;for(G=S;;){if((G|0)==(b|0)){G=8;break}if(S=i[G+32>>2]|0,S)C=G,G=S;else{S=1,G=10;break}}if((G|0)==8){i[C+32>>2]=i[j>>2];break}else if((G|0)==10)return S|0}else i[S>>2]=i[j>>2];while(!1);return Sn(b),j=_+8|0,i[j>>2]=(i[j>>2]|0)+-1,j=0,j|0}function pl(_,b,S){_=_|0,b=b|0,S=S|0;var C=0,G=0,j=0,H=0;j=Us(40)|0,j||bi(23283,23253,98,23296),i[j>>2]=i[b>>2],i[j+4>>2]=i[b+4>>2],i[j+8>>2]=i[b+8>>2],i[j+12>>2]=i[b+12>>2],G=j+16|0,i[G>>2]=i[S>>2],i[G+4>>2]=i[S+4>>2],i[G+8>>2]=i[S+8>>2],i[G+12>>2]=i[S+12>>2],i[j+32>>2]=0,G=~~(+Wt(+(+Bt(10,+ +(15-(i[_+12>>2]|0)|0))*(+ue[b>>3]+ +ue[b+8>>3])))%+(i[_+4>>2]|0))>>>0,G=(i[_>>2]|0)+(G<<2)|0,C=i[G>>2]|0;do if(!C)i[G>>2]=j;else{for(;!(_s(C,b)|0&&_s(C+16|0,S)|0);)if(G=i[C+32>>2]|0,C=G|0?G:C,!(i[C+32>>2]|0)){H=10;break}if((H|0)==10){i[C+32>>2]=j;break}return Sn(j),H=C,H|0}while(!1);return H=_+8|0,i[H>>2]=(i[H>>2]|0)+1,H=j,H|0}function TA(_,b,S){_=_|0,b=b|0,S=S|0;var C=0,G=0;if(G=~~(+Wt(+(+Bt(10,+ +(15-(i[_+12>>2]|0)|0))*(+ue[b>>3]+ +ue[b+8>>3])))%+(i[_+4>>2]|0))>>>0,G=i[(i[_>>2]|0)+(G<<2)>>2]|0,!G)return S=0,S|0;if(!S){for(_=G;;){if(_s(_,b)|0){C=10;break}if(_=i[_+32>>2]|0,!_){_=0,C=10;break}}if((C|0)==10)return _|0}for(_=G;;){if(_s(_,b)|0&&_s(_+16|0,S)|0){C=10;break}if(_=i[_+32>>2]|0,!_){_=0,C=10;break}}return(C|0)==10?_|0:0}function gl(_,b){_=_|0,b=b|0;var S=0;if(S=~~(+Wt(+(+Bt(10,+ +(15-(i[_+12>>2]|0)|0))*(+ue[b>>3]+ +ue[b+8>>3])))%+(i[_+4>>2]|0))>>>0,_=i[(i[_>>2]|0)+(S<<2)>>2]|0,!_)return S=0,S|0;for(;;){if(_s(_,b)|0){b=5;break}if(_=i[_+32>>2]|0,!_){_=0,b=5;break}}return(b|0)==5?_|0:0}function Xn(){return 23312}function Vr(_){return _=+_,+ +no(+_)}function zr(_){return _=+_,~~+Vr(_)|0}function Us(_){_=_|0;var b=0,S=0,C=0,G=0,j=0,H=0,ne=0,Se=0,Ge=0,$e=0,kt=0,lt=0,ct=0,L=0,r=0,d=0,k=0,I=0,R=0,q=0,a=0;a=ht,ht=ht+16|0,lt=a;do if(_>>>0<245){if(Ge=_>>>0<11?16:_+11&-8,_=Ge>>>3,kt=i[5829]|0,S=kt>>>_,S&3|0)return b=(S&1^1)+_|0,_=23356+(b<<1<<2)|0,S=_+8|0,C=i[S>>2]|0,G=C+8|0,j=i[G>>2]|0,(j|0)==(_|0)?i[5829]=kt&~(1<<b):(i[j+12>>2]=_,i[S>>2]=j),q=b<<3,i[C+4>>2]=q|3,q=C+q+4|0,i[q>>2]=i[q>>2]|1,q=G,ht=a,q|0;if($e=i[5831]|0,Ge>>>0>$e>>>0){if(S|0)return b=2<<_,b=S<<_&(b|0-b),b=(b&0-b)+-1|0,ne=b>>>12&16,b=b>>>ne,S=b>>>5&8,b=b>>>S,j=b>>>2&4,b=b>>>j,_=b>>>1&2,b=b>>>_,C=b>>>1&1,C=(S|ne|j|_|C)+(b>>>C)|0,b=23356+(C<<1<<2)|0,_=b+8|0,j=i[_>>2]|0,ne=j+8|0,S=i[ne>>2]|0,(S|0)==(b|0)?(_=kt&~(1<<C),i[5829]=_):(i[S+12>>2]=b,i[_>>2]=S,_=kt),q=C<<3,H=q-Ge|0,i[j+4>>2]=Ge|3,G=j+Ge|0,i[G+4>>2]=H|1,i[j+q>>2]=H,$e|0&&(C=i[5834]|0,b=$e>>>3,S=23356+(b<<1<<2)|0,b=1<<b,_&b?(_=S+8|0,b=i[_>>2]|0):(i[5829]=_|b,b=S,_=S+8|0),i[_>>2]=C,i[b+12>>2]=C,i[C+8>>2]=b,i[C+12>>2]=S),i[5831]=H,i[5834]=G,q=ne,ht=a,q|0;if(j=i[5830]|0,j){for(S=(j&0-j)+-1|0,G=S>>>12&16,S=S>>>G,C=S>>>5&8,S=S>>>C,H=S>>>2&4,S=S>>>H,ne=S>>>1&2,S=S>>>ne,Se=S>>>1&1,Se=i[23620+((C|G|H|ne|Se)+(S>>>Se)<<2)>>2]|0,S=Se,ne=Se,Se=(i[Se+4>>2]&-8)-Ge|0;_=i[S+16>>2]|0,!(!_&&(_=i[S+20>>2]|0,!_));)H=(i[_+4>>2]&-8)-Ge|0,G=H>>>0<Se>>>0,S=_,ne=G?_:ne,Se=G?H:Se;if(H=ne+Ge|0,H>>>0>ne>>>0){G=i[ne+24>>2]|0,b=i[ne+12>>2]|0;do if((b|0)==(ne|0)){if(_=ne+20|0,b=i[_>>2]|0,!b&&(_=ne+16|0,b=i[_>>2]|0,!b)){S=0;break}for(;;)if(C=b+20|0,S=i[C>>2]|0,S)b=S,_=C;else if(C=b+16|0,S=i[C>>2]|0,S)b=S,_=C;else break;i[_>>2]=0,S=b}else S=i[ne+8>>2]|0,i[S+12>>2]=b,i[b+8>>2]=S,S=b;while(!1);do if(G|0){if(b=i[ne+28>>2]|0,_=23620+(b<<2)|0,(ne|0)==(i[_>>2]|0)){if(i[_>>2]=S,!S){i[5830]=j&~(1<<b);break}}else if(q=G+16|0,i[((i[q>>2]|0)==(ne|0)?q:G+20|0)>>2]=S,!S)break;i[S+24>>2]=G,b=i[ne+16>>2]|0,b|0&&(i[S+16>>2]=b,i[b+24>>2]=S),b=i[ne+20>>2]|0,b|0&&(i[S+20>>2]=b,i[b+24>>2]=S)}while(!1);return Se>>>0<16?(q=Se+Ge|0,i[ne+4>>2]=q|3,q=ne+q+4|0,i[q>>2]=i[q>>2]|1):(i[ne+4>>2]=Ge|3,i[H+4>>2]=Se|1,i[H+Se>>2]=Se,$e|0&&(C=i[5834]|0,b=$e>>>3,S=23356+(b<<1<<2)|0,b=1<<b,b&kt?(_=S+8|0,b=i[_>>2]|0):(i[5829]=b|kt,b=S,_=S+8|0),i[_>>2]=C,i[b+12>>2]=C,i[C+8>>2]=b,i[C+12>>2]=S),i[5831]=Se,i[5834]=H),q=ne+8|0,ht=a,q|0}else kt=Ge}else kt=Ge}else kt=Ge}else if(_>>>0<=4294967231)if(_=_+11|0,Ge=_&-8,C=i[5830]|0,C){G=0-Ge|0,_=_>>>8,_?Ge>>>0>16777215?Se=31:(kt=(_+1048320|0)>>>16&8,r=_<<kt,ne=(r+520192|0)>>>16&4,r=r<<ne,Se=(r+245760|0)>>>16&2,Se=14-(ne|kt|Se)+(r<<Se>>>15)|0,Se=Ge>>>(Se+7|0)&1|Se<<1):Se=0,S=i[23620+(Se<<2)>>2]|0;e:do if(!S)S=0,_=0,r=61;else for(_=0,ne=Ge<<((Se|0)==31?0:25-(Se>>>1)|0),j=0;;){if(H=(i[S+4>>2]&-8)-Ge|0,H>>>0<G>>>0)if(H)_=S,G=H;else{_=S,G=0,r=65;break e}if(r=i[S+20>>2]|0,S=i[S+16+(ne>>>31<<2)>>2]|0,j=(r|0)==0|(r|0)==(S|0)?j:r,S)ne=ne<<1;else{S=j,r=61;break}}while(!1);if((r|0)==61){if((S|0)==0&(_|0)==0){if(_=2<<Se,_=(_|0-_)&C,!_){kt=Ge;break}kt=(_&0-_)+-1|0,H=kt>>>12&16,kt=kt>>>H,j=kt>>>5&8,kt=kt>>>j,ne=kt>>>2&4,kt=kt>>>ne,Se=kt>>>1&2,kt=kt>>>Se,S=kt>>>1&1,_=0,S=i[23620+((j|H|ne|Se|S)+(kt>>>S)<<2)>>2]|0}S?r=65:(ne=_,H=G)}if((r|0)==65)for(j=S;;)if(kt=(i[j+4>>2]&-8)-Ge|0,S=kt>>>0<G>>>0,G=S?kt:G,_=S?j:_,S=i[j+16>>2]|0,S||(S=i[j+20>>2]|0),S)j=S;else{ne=_,H=G;break}if(ne|0&&H>>>0<((i[5831]|0)-Ge|0)>>>0&&($e=ne+Ge|0,$e>>>0>ne>>>0)){j=i[ne+24>>2]|0,b=i[ne+12>>2]|0;do if((b|0)==(ne|0)){if(_=ne+20|0,b=i[_>>2]|0,!b&&(_=ne+16|0,b=i[_>>2]|0,!b)){b=0;break}for(;;)if(G=b+20|0,S=i[G>>2]|0,S)b=S,_=G;else if(G=b+16|0,S=i[G>>2]|0,S)b=S,_=G;else break;i[_>>2]=0}else q=i[ne+8>>2]|0,i[q+12>>2]=b,i[b+8>>2]=q;while(!1);do if(j){if(_=i[ne+28>>2]|0,S=23620+(_<<2)|0,(ne|0)==(i[S>>2]|0)){if(i[S>>2]=b,!b){C=C&~(1<<_),i[5830]=C;break}}else if(q=j+16|0,i[((i[q>>2]|0)==(ne|0)?q:j+20|0)>>2]=b,!b)break;i[b+24>>2]=j,_=i[ne+16>>2]|0,_|0&&(i[b+16>>2]=_,i[_+24>>2]=b),_=i[ne+20>>2]|0,_&&(i[b+20>>2]=_,i[_+24>>2]=b)}while(!1);e:do if(H>>>0<16)q=H+Ge|0,i[ne+4>>2]=q|3,q=ne+q+4|0,i[q>>2]=i[q>>2]|1;else{if(i[ne+4>>2]=Ge|3,i[$e+4>>2]=H|1,i[$e+H>>2]=H,b=H>>>3,H>>>0<256){S=23356+(b<<1<<2)|0,_=i[5829]|0,b=1<<b,_&b?(_=S+8|0,b=i[_>>2]|0):(i[5829]=_|b,b=S,_=S+8|0),i[_>>2]=$e,i[b+12>>2]=$e,i[$e+8>>2]=b,i[$e+12>>2]=S;break}if(b=H>>>8,b?H>>>0>16777215?S=31:(R=(b+1048320|0)>>>16&8,q=b<<R,I=(q+520192|0)>>>16&4,q=q<<I,S=(q+245760|0)>>>16&2,S=14-(I|R|S)+(q<<S>>>15)|0,S=H>>>(S+7|0)&1|S<<1):S=0,b=23620+(S<<2)|0,i[$e+28>>2]=S,_=$e+16|0,i[_+4>>2]=0,i[_>>2]=0,_=1<<S,!(C&_)){i[5830]=C|_,i[b>>2]=$e,i[$e+24>>2]=b,i[$e+12>>2]=$e,i[$e+8>>2]=$e;break}b=i[b>>2]|0;t:do if((i[b+4>>2]&-8|0)!=(H|0)){for(C=H<<((S|0)==31?0:25-(S>>>1)|0);S=b+16+(C>>>31<<2)|0,_=i[S>>2]|0,!!_;)if((i[_+4>>2]&-8|0)==(H|0)){b=_;break t}else C=C<<1,b=_;i[S>>2]=$e,i[$e+24>>2]=b,i[$e+12>>2]=$e,i[$e+8>>2]=$e;break e}while(!1);R=b+8|0,q=i[R>>2]|0,i[q+12>>2]=$e,i[R>>2]=$e,i[$e+8>>2]=q,i[$e+12>>2]=b,i[$e+24>>2]=0}while(!1);return q=ne+8|0,ht=a,q|0}else kt=Ge}else kt=Ge;else kt=-1;while(!1);if(S=i[5831]|0,S>>>0>=kt>>>0)return b=S-kt|0,_=i[5834]|0,b>>>0>15?(q=_+kt|0,i[5834]=q,i[5831]=b,i[q+4>>2]=b|1,i[_+S>>2]=b,i[_+4>>2]=kt|3):(i[5831]=0,i[5834]=0,i[_+4>>2]=S|3,q=_+S+4|0,i[q>>2]=i[q>>2]|1),q=_+8|0,ht=a,q|0;if(H=i[5832]|0,H>>>0>kt>>>0)return I=H-kt|0,i[5832]=I,q=i[5835]|0,R=q+kt|0,i[5835]=R,i[R+4>>2]=I|1,i[q+4>>2]=kt|3,q=q+8|0,ht=a,q|0;if(i[5947]|0?_=i[5949]|0:(i[5949]=4096,i[5948]=4096,i[5950]=-1,i[5951]=-1,i[5952]=0,i[5940]=0,i[5947]=lt&-16^1431655768,_=4096),ne=kt+48|0,Se=kt+47|0,j=_+Se|0,G=0-_|0,Ge=j&G,Ge>>>0<=kt>>>0||(_=i[5939]|0,_|0&&($e=i[5937]|0,lt=$e+Ge|0,lt>>>0<=$e>>>0|lt>>>0>_>>>0)))return q=0,ht=a,q|0;e:do if(i[5940]&4)b=0,r=143;else{S=i[5835]|0;t:do if(S){for(C=23764;lt=i[C>>2]|0,!(lt>>>0<=S>>>0&&(lt+(i[C+4>>2]|0)|0)>>>0>S>>>0);)if(_=i[C+8>>2]|0,_)C=_;else{r=128;break t}if(b=j-H&G,b>>>0<2147483647)if(_=Ur(b|0)|0,(_|0)==((i[C>>2]|0)+(i[C+4>>2]|0)|0)){if((_|0)!=-1){H=b,j=_,r=145;break e}}else C=_,r=136;else b=0}else r=128;while(!1);do if((r|0)==128)if(S=Ur(0)|0,(S|0)!=-1&&(b=S,ct=i[5948]|0,L=ct+-1|0,b=(L&b|0?(L+b&0-ct)-b|0:0)+Ge|0,ct=i[5937]|0,L=b+ct|0,b>>>0>kt>>>0&b>>>0<2147483647)){if(lt=i[5939]|0,lt|0&&L>>>0<=ct>>>0|L>>>0>lt>>>0){b=0;break}if(_=Ur(b|0)|0,(_|0)==(S|0)){H=b,j=S,r=145;break e}else C=_,r=136}else b=0;while(!1);do if((r|0)==136){if(S=0-b|0,!(ne>>>0>b>>>0&(b>>>0<2147483647&(C|0)!=-1)))if((C|0)==-1){b=0;break}else{H=b,j=C,r=145;break e}if(_=i[5949]|0,_=Se-b+_&0-_,_>>>0>=2147483647){H=b,j=C,r=145;break e}if((Ur(_|0)|0)==-1){Ur(S|0)|0,b=0;break}else{H=_+b|0,j=C,r=145;break e}}while(!1);i[5940]=i[5940]|4,r=143}while(!1);if((r|0)==143&&Ge>>>0<2147483647&&(I=Ur(Ge|0)|0,L=Ur(0)|0,d=L-I|0,k=d>>>0>(kt+40|0)>>>0,!((I|0)==-1|k^1|I>>>0<L>>>0&((I|0)!=-1&(L|0)!=-1)^1))&&(H=k?d:b,j=I,r=145),(r|0)==145){b=(i[5937]|0)+H|0,i[5937]=b,b>>>0>(i[5938]|0)>>>0&&(i[5938]=b),Se=i[5835]|0;e:do if(Se){for(b=23764;;){if(_=i[b>>2]|0,S=i[b+4>>2]|0,(j|0)==(_+S|0)){r=154;break}if(C=i[b+8>>2]|0,C)b=C;else break}if((r|0)==154&&(R=b+4|0,(i[b+12>>2]&8|0)==0)&&j>>>0>Se>>>0&_>>>0<=Se>>>0){i[R>>2]=S+H,q=(i[5832]|0)+H|0,I=Se+8|0,I=I&7|0?0-I&7:0,R=Se+I|0,I=q-I|0,i[5835]=R,i[5832]=I,i[R+4>>2]=I|1,i[Se+q+4>>2]=40,i[5836]=i[5951];break}for(j>>>0<(i[5833]|0)>>>0&&(i[5833]=j),S=j+H|0,b=23764;;){if((i[b>>2]|0)==(S|0)){r=162;break}if(_=i[b+8>>2]|0,_)b=_;else break}if((r|0)==162&&!(i[b+12>>2]&8|0)){i[b>>2]=j,$e=b+4|0,i[$e>>2]=(i[$e>>2]|0)+H,$e=j+8|0,$e=j+($e&7|0?0-$e&7:0)|0,b=S+8|0,b=S+(b&7|0?0-b&7:0)|0,Ge=$e+kt|0,ne=b-$e-kt|0,i[$e+4>>2]=kt|3;t:do if((Se|0)==(b|0))q=(i[5832]|0)+ne|0,i[5832]=q,i[5835]=Ge,i[Ge+4>>2]=q|1;else{if((i[5834]|0)==(b|0)){q=(i[5831]|0)+ne|0,i[5831]=q,i[5834]=Ge,i[Ge+4>>2]=q|1,i[Ge+q>>2]=q;break}if(_=i[b+4>>2]|0,(_&3|0)==1){H=_&-8,C=_>>>3;i:do if(_>>>0<256)if(_=i[b+8>>2]|0,S=i[b+12>>2]|0,(S|0)==(_|0)){i[5829]=i[5829]&~(1<<C);break}else{i[_+12>>2]=S,i[S+8>>2]=_;break}else{j=i[b+24>>2]|0,_=i[b+12>>2]|0;do if((_|0)==(b|0)){if(S=b+16|0,C=S+4|0,_=i[C>>2]|0,_)S=C;else if(_=i[S>>2]|0,!_){_=0;break}for(;;)if(G=_+20|0,C=i[G>>2]|0,C)_=C,S=G;else if(G=_+16|0,C=i[G>>2]|0,C)_=C,S=G;else break;i[S>>2]=0}else q=i[b+8>>2]|0,i[q+12>>2]=_,i[_+8>>2]=q;while(!1);if(!j)break;S=i[b+28>>2]|0,C=23620+(S<<2)|0;do if((i[C>>2]|0)!=(b|0)){if(q=j+16|0,i[((i[q>>2]|0)==(b|0)?q:j+20|0)>>2]=_,!_)break i}else{if(i[C>>2]=_,_|0)break;i[5830]=i[5830]&~(1<<S);break i}while(!1);if(i[_+24>>2]=j,S=b+16|0,C=i[S>>2]|0,C|0&&(i[_+16>>2]=C,i[C+24>>2]=_),S=i[S+4>>2]|0,!S)break;i[_+20>>2]=S,i[S+24>>2]=_}while(!1);b=b+H|0,G=H+ne|0}else G=ne;if(b=b+4|0,i[b>>2]=i[b>>2]&-2,i[Ge+4>>2]=G|1,i[Ge+G>>2]=G,b=G>>>3,G>>>0<256){S=23356+(b<<1<<2)|0,_=i[5829]|0,b=1<<b,_&b?(_=S+8|0,b=i[_>>2]|0):(i[5829]=_|b,b=S,_=S+8|0),i[_>>2]=Ge,i[b+12>>2]=Ge,i[Ge+8>>2]=b,i[Ge+12>>2]=S;break}b=G>>>8;do if(!b)C=0;else{if(G>>>0>16777215){C=31;break}R=(b+1048320|0)>>>16&8,q=b<<R,I=(q+520192|0)>>>16&4,q=q<<I,C=(q+245760|0)>>>16&2,C=14-(I|R|C)+(q<<C>>>15)|0,C=G>>>(C+7|0)&1|C<<1}while(!1);if(b=23620+(C<<2)|0,i[Ge+28>>2]=C,_=Ge+16|0,i[_+4>>2]=0,i[_>>2]=0,_=i[5830]|0,S=1<<C,!(_&S)){i[5830]=_|S,i[b>>2]=Ge,i[Ge+24>>2]=b,i[Ge+12>>2]=Ge,i[Ge+8>>2]=Ge;break}b=i[b>>2]|0;i:do if((i[b+4>>2]&-8|0)!=(G|0)){for(C=G<<((C|0)==31?0:25-(C>>>1)|0);S=b+16+(C>>>31<<2)|0,_=i[S>>2]|0,!!_;)if((i[_+4>>2]&-8|0)==(G|0)){b=_;break i}else C=C<<1,b=_;i[S>>2]=Ge,i[Ge+24>>2]=b,i[Ge+12>>2]=Ge,i[Ge+8>>2]=Ge;break t}while(!1);R=b+8|0,q=i[R>>2]|0,i[q+12>>2]=Ge,i[R>>2]=Ge,i[Ge+8>>2]=q,i[Ge+12>>2]=b,i[Ge+24>>2]=0}while(!1);return q=$e+8|0,ht=a,q|0}for(b=23764;_=i[b>>2]|0,!(_>>>0<=Se>>>0&&(q=_+(i[b+4>>2]|0)|0,q>>>0>Se>>>0));)b=i[b+8>>2]|0;G=q+-47|0,_=G+8|0,_=G+(_&7|0?0-_&7:0)|0,G=Se+16|0,_=_>>>0<G>>>0?Se:_,b=_+8|0,S=H+-40|0,I=j+8|0,I=I&7|0?0-I&7:0,R=j+I|0,I=S-I|0,i[5835]=R,i[5832]=I,i[R+4>>2]=I|1,i[j+S+4>>2]=40,i[5836]=i[5951],S=_+4|0,i[S>>2]=27,i[b>>2]=i[5941],i[b+4>>2]=i[5942],i[b+8>>2]=i[5943],i[b+12>>2]=i[5944],i[5941]=j,i[5942]=H,i[5944]=0,i[5943]=b,b=_+24|0;do R=b,b=b+4|0,i[b>>2]=7;while((R+8|0)>>>0<q>>>0);if((_|0)!=(Se|0)){if(j=_-Se|0,i[S>>2]=i[S>>2]&-2,i[Se+4>>2]=j|1,i[_>>2]=j,b=j>>>3,j>>>0<256){S=23356+(b<<1<<2)|0,_=i[5829]|0,b=1<<b,_&b?(_=S+8|0,b=i[_>>2]|0):(i[5829]=_|b,b=S,_=S+8|0),i[_>>2]=Se,i[b+12>>2]=Se,i[Se+8>>2]=b,i[Se+12>>2]=S;break}if(b=j>>>8,b?j>>>0>16777215?C=31:(R=(b+1048320|0)>>>16&8,q=b<<R,I=(q+520192|0)>>>16&4,q=q<<I,C=(q+245760|0)>>>16&2,C=14-(I|R|C)+(q<<C>>>15)|0,C=j>>>(C+7|0)&1|C<<1):C=0,S=23620+(C<<2)|0,i[Se+28>>2]=C,i[Se+20>>2]=0,i[G>>2]=0,b=i[5830]|0,_=1<<C,!(b&_)){i[5830]=b|_,i[S>>2]=Se,i[Se+24>>2]=S,i[Se+12>>2]=Se,i[Se+8>>2]=Se;break}b=i[S>>2]|0;t:do if((i[b+4>>2]&-8|0)!=(j|0)){for(C=j<<((C|0)==31?0:25-(C>>>1)|0);S=b+16+(C>>>31<<2)|0,_=i[S>>2]|0,!!_;)if((i[_+4>>2]&-8|0)==(j|0)){b=_;break t}else C=C<<1,b=_;i[S>>2]=Se,i[Se+24>>2]=b,i[Se+12>>2]=Se,i[Se+8>>2]=Se;break e}while(!1);R=b+8|0,q=i[R>>2]|0,i[q+12>>2]=Se,i[R>>2]=Se,i[Se+8>>2]=q,i[Se+12>>2]=b,i[Se+24>>2]=0}}else q=i[5833]|0,(q|0)==0|j>>>0<q>>>0&&(i[5833]=j),i[5941]=j,i[5942]=H,i[5944]=0,i[5838]=i[5947],i[5837]=-1,i[5842]=23356,i[5841]=23356,i[5844]=23364,i[5843]=23364,i[5846]=23372,i[5845]=23372,i[5848]=23380,i[5847]=23380,i[5850]=23388,i[5849]=23388,i[5852]=23396,i[5851]=23396,i[5854]=23404,i[5853]=23404,i[5856]=23412,i[5855]=23412,i[5858]=23420,i[5857]=23420,i[5860]=23428,i[5859]=23428,i[5862]=23436,i[5861]=23436,i[5864]=23444,i[5863]=23444,i[5866]=23452,i[5865]=23452,i[5868]=23460,i[5867]=23460,i[5870]=23468,i[5869]=23468,i[5872]=23476,i[5871]=23476,i[5874]=23484,i[5873]=23484,i[5876]=23492,i[5875]=23492,i[5878]=23500,i[5877]=23500,i[5880]=23508,i[5879]=23508,i[5882]=23516,i[5881]=23516,i[5884]=23524,i[5883]=23524,i[5886]=23532,i[5885]=23532,i[5888]=23540,i[5887]=23540,i[5890]=23548,i[5889]=23548,i[5892]=23556,i[5891]=23556,i[5894]=23564,i[5893]=23564,i[5896]=23572,i[5895]=23572,i[5898]=23580,i[5897]=23580,i[5900]=23588,i[5899]=23588,i[5902]=23596,i[5901]=23596,i[5904]=23604,i[5903]=23604,q=H+-40|0,I=j+8|0,I=I&7|0?0-I&7:0,R=j+I|0,I=q-I|0,i[5835]=R,i[5832]=I,i[R+4>>2]=I|1,i[j+q+4>>2]=40,i[5836]=i[5951];while(!1);if(b=i[5832]|0,b>>>0>kt>>>0)return I=b-kt|0,i[5832]=I,q=i[5835]|0,R=q+kt|0,i[5835]=R,i[R+4>>2]=I|1,i[q+4>>2]=kt|3,q=q+8|0,ht=a,q|0}return q=Xn()|0,i[q>>2]=12,q=0,ht=a,q|0}function Sn(_){_=_|0;var b=0,S=0,C=0,G=0,j=0,H=0,ne=0,Se=0;if(_){S=_+-8|0,G=i[5833]|0,_=i[_+-4>>2]|0,b=_&-8,Se=S+b|0;do if(_&1)ne=S,H=S;else{if(C=i[S>>2]|0,!(_&3)||(H=S+(0-C)|0,j=C+b|0,H>>>0<G>>>0))return;if((i[5834]|0)==(H|0)){if(_=Se+4|0,b=i[_>>2]|0,(b&3|0)!=3){ne=H,b=j;break}i[5831]=j,i[_>>2]=b&-2,i[H+4>>2]=j|1,i[H+j>>2]=j;return}if(S=C>>>3,C>>>0<256)if(_=i[H+8>>2]|0,b=i[H+12>>2]|0,(b|0)==(_|0)){i[5829]=i[5829]&~(1<<S),ne=H,b=j;break}else{i[_+12>>2]=b,i[b+8>>2]=_,ne=H,b=j;break}G=i[H+24>>2]|0,_=i[H+12>>2]|0;do if((_|0)==(H|0)){if(b=H+16|0,S=b+4|0,_=i[S>>2]|0,_)b=S;else if(_=i[b>>2]|0,!_){_=0;break}for(;;)if(C=_+20|0,S=i[C>>2]|0,S)_=S,b=C;else if(C=_+16|0,S=i[C>>2]|0,S)_=S,b=C;else break;i[b>>2]=0}else ne=i[H+8>>2]|0,i[ne+12>>2]=_,i[_+8>>2]=ne;while(!1);if(G){if(b=i[H+28>>2]|0,S=23620+(b<<2)|0,(i[S>>2]|0)==(H|0)){if(i[S>>2]=_,!_){i[5830]=i[5830]&~(1<<b),ne=H,b=j;break}}else if(ne=G+16|0,i[((i[ne>>2]|0)==(H|0)?ne:G+20|0)>>2]=_,!_){ne=H,b=j;break}i[_+24>>2]=G,b=H+16|0,S=i[b>>2]|0,S|0&&(i[_+16>>2]=S,i[S+24>>2]=_),b=i[b+4>>2]|0,b?(i[_+20>>2]=b,i[b+24>>2]=_,ne=H,b=j):(ne=H,b=j)}else ne=H,b=j}while(!1);if(!(H>>>0>=Se>>>0)&&(_=Se+4|0,C=i[_>>2]|0,!!(C&1))){if(C&2)i[_>>2]=C&-2,i[ne+4>>2]=b|1,i[H+b>>2]=b,G=b;else{if((i[5835]|0)==(Se|0)){if(Se=(i[5832]|0)+b|0,i[5832]=Se,i[5835]=ne,i[ne+4>>2]=Se|1,(ne|0)!=(i[5834]|0))return;i[5834]=0,i[5831]=0;return}if((i[5834]|0)==(Se|0)){Se=(i[5831]|0)+b|0,i[5831]=Se,i[5834]=H,i[ne+4>>2]=Se|1,i[H+Se>>2]=Se;return}G=(C&-8)+b|0,S=C>>>3;do if(C>>>0<256)if(b=i[Se+8>>2]|0,_=i[Se+12>>2]|0,(_|0)==(b|0)){i[5829]=i[5829]&~(1<<S);break}else{i[b+12>>2]=_,i[_+8>>2]=b;break}else{j=i[Se+24>>2]|0,_=i[Se+12>>2]|0;do if((_|0)==(Se|0)){if(b=Se+16|0,S=b+4|0,_=i[S>>2]|0,_)b=S;else if(_=i[b>>2]|0,!_){S=0;break}for(;;)if(C=_+20|0,S=i[C>>2]|0,S)_=S,b=C;else if(C=_+16|0,S=i[C>>2]|0,S)_=S,b=C;else break;i[b>>2]=0,S=_}else S=i[Se+8>>2]|0,i[S+12>>2]=_,i[_+8>>2]=S,S=_;while(!1);if(j|0){if(_=i[Se+28>>2]|0,b=23620+(_<<2)|0,(i[b>>2]|0)==(Se|0)){if(i[b>>2]=S,!S){i[5830]=i[5830]&~(1<<_);break}}else if(C=j+16|0,i[((i[C>>2]|0)==(Se|0)?C:j+20|0)>>2]=S,!S)break;i[S+24>>2]=j,_=Se+16|0,b=i[_>>2]|0,b|0&&(i[S+16>>2]=b,i[b+24>>2]=S),_=i[_+4>>2]|0,_|0&&(i[S+20>>2]=_,i[_+24>>2]=S)}}while(!1);if(i[ne+4>>2]=G|1,i[H+G>>2]=G,(ne|0)==(i[5834]|0)){i[5831]=G;return}}if(_=G>>>3,G>>>0<256){S=23356+(_<<1<<2)|0,b=i[5829]|0,_=1<<_,b&_?(b=S+8|0,_=i[b>>2]|0):(i[5829]=b|_,_=S,b=S+8|0),i[b>>2]=ne,i[_+12>>2]=ne,i[ne+8>>2]=_,i[ne+12>>2]=S;return}_=G>>>8,_?G>>>0>16777215?C=31:(H=(_+1048320|0)>>>16&8,Se=_<<H,j=(Se+520192|0)>>>16&4,Se=Se<<j,C=(Se+245760|0)>>>16&2,C=14-(j|H|C)+(Se<<C>>>15)|0,C=G>>>(C+7|0)&1|C<<1):C=0,_=23620+(C<<2)|0,i[ne+28>>2]=C,i[ne+20>>2]=0,i[ne+16>>2]=0,b=i[5830]|0,S=1<<C;e:do if(!(b&S))i[5830]=b|S,i[_>>2]=ne,i[ne+24>>2]=_,i[ne+12>>2]=ne,i[ne+8>>2]=ne;else{_=i[_>>2]|0;t:do if((i[_+4>>2]&-8|0)!=(G|0)){for(C=G<<((C|0)==31?0:25-(C>>>1)|0);S=_+16+(C>>>31<<2)|0,b=i[S>>2]|0,!!b;)if((i[b+4>>2]&-8|0)==(G|0)){_=b;break t}else C=C<<1,_=b;i[S>>2]=ne,i[ne+24>>2]=_,i[ne+12>>2]=ne,i[ne+8>>2]=ne;break e}while(!1);H=_+8|0,Se=i[H>>2]|0,i[Se+12>>2]=ne,i[H>>2]=ne,i[ne+8>>2]=Se,i[ne+12>>2]=_,i[ne+24>>2]=0}while(!1);if(Se=(i[5837]|0)+-1|0,i[5837]=Se,!(Se|0)){for(_=23772;_=i[_>>2]|0,_;)_=_+8|0;i[5837]=-1}}}}function Ga(_,b){_=_|0,b=b|0;var S=0;return _?(S=ar(b,_)|0,(b|_)>>>0>65535&&(S=((S>>>0)/(_>>>0)|0|0)==(b|0)?S:-1)):S=0,_=Us(S)|0,!_||!(i[_+-4>>2]&3)||Br(_|0,0,S|0)|0,_|0}function ml(_,b,S,C){return _=_|0,b=b|0,S=S|0,C=C|0,S=_+S>>>0,Xi(b+C+(S>>>0<_>>>0|0)>>>0|0),S|0|0}function vo(_,b,S,C){return _=_|0,b=b|0,S=S|0,C=C|0,C=b-C-(S>>>0>_>>>0|0)>>>0,Xi(C|0),_-S>>>0|0|0}function el(_){return _=_|0,(_?31-(Zn(_^_-1)|0)|0:32)|0}function ps(_,b,S,C,G){_=_|0,b=b|0,S=S|0,C=C|0,G=G|0;var j=0,H=0,ne=0,Se=0,Ge=0,$e=0,kt=0,lt=0,ct=0,L=0;if($e=_,Se=b,Ge=Se,H=S,lt=C,ne=lt,!Ge)return j=(G|0)!=0,ne?j?(i[G>>2]=_|0,i[G+4>>2]=b&0,lt=0,G=0,Xi(lt|0),G|0):(lt=0,G=0,Xi(lt|0),G|0):(j&&(i[G>>2]=($e>>>0)%(H>>>0),i[G+4>>2]=0),lt=0,G=($e>>>0)/(H>>>0)>>>0,Xi(lt|0),G|0);j=(ne|0)==0;do if(H){if(!j){if(j=(Zn(ne|0)|0)-(Zn(Ge|0)|0)|0,j>>>0<=31){kt=j+1|0,ne=31-j|0,b=j-31>>31,H=kt,_=$e>>>(kt>>>0)&b|Ge<<ne,b=Ge>>>(kt>>>0)&b,j=0,ne=$e<<ne;break}return G?(i[G>>2]=_|0,i[G+4>>2]=Se|b&0,lt=0,G=0,Xi(lt|0),G|0):(lt=0,G=0,Xi(lt|0),G|0)}if(j=H-1|0,j&H|0){ne=(Zn(H|0)|0)+33-(Zn(Ge|0)|0)|0,L=64-ne|0,kt=32-ne|0,Se=kt>>31,ct=ne-32|0,b=ct>>31,H=ne,_=kt-1>>31&Ge>>>(ct>>>0)|(Ge<<kt|$e>>>(ne>>>0))&b,b=b&Ge>>>(ne>>>0),j=$e<<L&Se,ne=(Ge<<L|$e>>>(ct>>>0))&Se|$e<<kt&ne-33>>31;break}return G|0&&(i[G>>2]=j&$e,i[G+4>>2]=0),(H|0)==1?(ct=Se|b&0,L=_|0|0,Xi(ct|0),L|0):(L=el(H|0)|0,ct=Ge>>>(L>>>0)|0,L=Ge<<32-L|$e>>>(L>>>0)|0,Xi(ct|0),L|0)}else{if(j)return G|0&&(i[G>>2]=(Ge>>>0)%(H>>>0),i[G+4>>2]=0),ct=0,L=(Ge>>>0)/(H>>>0)>>>0,Xi(ct|0),L|0;if(!$e)return G|0&&(i[G>>2]=0,i[G+4>>2]=(Ge>>>0)%(ne>>>0)),ct=0,L=(Ge>>>0)/(ne>>>0)>>>0,Xi(ct|0),L|0;if(j=ne-1|0,!(j&ne))return G|0&&(i[G>>2]=_|0,i[G+4>>2]=j&Ge|b&0),ct=0,L=Ge>>>((el(ne|0)|0)>>>0),Xi(ct|0),L|0;if(j=(Zn(ne|0)|0)-(Zn(Ge|0)|0)|0,j>>>0<=30){b=j+1|0,ne=31-j|0,H=b,_=Ge<<ne|$e>>>(b>>>0),b=Ge>>>(b>>>0),j=0,ne=$e<<ne;break}return G?(i[G>>2]=_|0,i[G+4>>2]=Se|b&0,ct=0,L=0,Xi(ct|0),L|0):(ct=0,L=0,Xi(ct|0),L|0)}while(!1);if(!H)Ge=ne,Se=0,ne=0;else{kt=S|0|0,$e=lt|C&0,Ge=ml(kt|0,$e|0,-1,-1)|0,S=mt()|0,Se=ne,ne=0;do C=Se,Se=j>>>31|Se<<1,j=ne|j<<1,C=_<<1|C>>>31|0,lt=_>>>31|b<<1|0,vo(Ge|0,S|0,C|0,lt|0)|0,L=mt()|0,ct=L>>31|((L|0)<0?-1:0)<<1,ne=ct&1,_=vo(C|0,lt|0,ct&kt|0,(((L|0)<0?-1:0)>>31|((L|0)<0?-1:0)<<1)&$e|0)|0,b=mt()|0,H=H-1|0;while(H|0);Ge=Se,Se=0}return H=0,G|0&&(i[G>>2]=_,i[G+4>>2]=b),ct=(j|0)>>>31|(Ge|H)<<1|(H<<1|j>>>31)&0|Se,L=(j<<1|0)&-2|ne,Xi(ct|0),L|0}function Xs(_,b,S,C){_=_|0,b=b|0,S=S|0,C=C|0;var G=0,j=0;return j=ht,ht=ht+16|0,G=j|0,ps(_,b,S,C,G)|0,ht=j,Xi(i[G+4>>2]|0),i[G>>2]|0|0}function jt(_,b,S){return _=_|0,b=b|0,S=S|0,(S|0)<32?(Xi(b>>>S|0),_>>>S|(b&(1<<S)-1)<<32-S):(Xi(0),b>>>S-32|0)}function ci(_,b,S){return _=_|0,b=b|0,S=S|0,(S|0)<32?(Xi(b<<S|(_&(1<<S)-1<<32-S)>>>32-S|0),_<<S):(Xi(_<<S-32|0),0)}function io(_,b){return _=+_,b=+b,_!=_?+b:b!=b?+_:+pi(+_,+b)}function PA(_){return _=+_,_>=0?+Vt(_+.5):+en(_-.5)}function BA(_,b,S){_=_|0,b=b|0,S=S|0;var C=0,G=0,j=0;if((S|0)>=8192)return lr(_|0,b|0,S|0)|0,_|0;if(j=_|0,G=_+S|0,(_&3)==(b&3)){for(;_&3;){if(!S)return j|0;nt[_>>0]=nt[b>>0]|0,_=_+1|0,b=b+1|0,S=S-1|0}for(S=G&-4|0,C=S-64|0;(_|0)<=(C|0);)i[_>>2]=i[b>>2],i[_+4>>2]=i[b+4>>2],i[_+8>>2]=i[b+8>>2],i[_+12>>2]=i[b+12>>2],i[_+16>>2]=i[b+16>>2],i[_+20>>2]=i[b+20>>2],i[_+24>>2]=i[b+24>>2],i[_+28>>2]=i[b+28>>2],i[_+32>>2]=i[b+32>>2],i[_+36>>2]=i[b+36>>2],i[_+40>>2]=i[b+40>>2],i[_+44>>2]=i[b+44>>2],i[_+48>>2]=i[b+48>>2],i[_+52>>2]=i[b+52>>2],i[_+56>>2]=i[b+56>>2],i[_+60>>2]=i[b+60>>2],_=_+64|0,b=b+64|0;for(;(_|0)<(S|0);)i[_>>2]=i[b>>2],_=_+4|0,b=b+4|0}else for(S=G-4|0;(_|0)<(S|0);)nt[_>>0]=nt[b>>0]|0,nt[_+1>>0]=nt[b+1>>0]|0,nt[_+2>>0]=nt[b+2>>0]|0,nt[_+3>>0]=nt[b+3>>0]|0,_=_+4|0,b=b+4|0;for(;(_|0)<(G|0);)nt[_>>0]=nt[b>>0]|0,_=_+1|0,b=b+1|0;return j|0}function Br(_,b,S){_=_|0,b=b|0,S=S|0;var C=0,G=0,j=0,H=0;if(j=_+S|0,b=b&255,(S|0)>=67){for(;_&3;)nt[_>>0]=b,_=_+1|0;for(C=j&-4|0,H=b|b<<8|b<<16|b<<24,G=C-64|0;(_|0)<=(G|0);)i[_>>2]=H,i[_+4>>2]=H,i[_+8>>2]=H,i[_+12>>2]=H,i[_+16>>2]=H,i[_+20>>2]=H,i[_+24>>2]=H,i[_+28>>2]=H,i[_+32>>2]=H,i[_+36>>2]=H,i[_+40>>2]=H,i[_+44>>2]=H,i[_+48>>2]=H,i[_+52>>2]=H,i[_+56>>2]=H,i[_+60>>2]=H,_=_+64|0;for(;(_|0)<(C|0);)i[_>>2]=H,_=_+4|0}for(;(_|0)<(j|0);)nt[_>>0]=b,_=_+1|0;return j-S|0}function no(_){return _=+_,_>=0?+Vt(_+.5):+en(_-.5)}function Ur(_){_=_|0;var b=0,S=0,C=0;return C=Ni()|0,S=i[Dt>>2]|0,b=S+_|0,(_|0)>0&(b|0)<(S|0)|(b|0)<0?(kr(b|0)|0,At(12),-1):(b|0)>(C|0)&&!(es(b|0)|0)?(At(12),-1):(i[Dt>>2]=b,S|0)}return{___uremdi3:Xs,_bitshift64Lshr:jt,_bitshift64Shl:ci,_calloc:Ga,_cellAreaKm2:qo,_cellAreaM2:Ja,_cellAreaRads2:rr,_compact:Ho,_destroyLinkedPolygon:Pn,_edgeLengthKm:Rs,_edgeLengthM:Er,_emscripten_replace_memory:Tn,_exactEdgeLengthKm:ns,_exactEdgeLengthM:$n,_exactEdgeLengthRads:eo,_experimentalH3ToLocalIj:Vs,_experimentalLocalIjToH3:EA,_free:Sn,_geoToH3:Io,_getDestinationH3IndexFromUnidirectionalEdge:Jt,_getH3IndexesFromUnidirectionalEdge:yt,_getH3UnidirectionalEdge:Ot,_getH3UnidirectionalEdgeBoundary:ai,_getH3UnidirectionalEdgesFromHexagon:Gt,_getOriginH3IndexFromUnidirectionalEdge:si,_getPentagonIndexes:mo,_getRes0Indexes:Ln,_h3Distance:Pr,_h3GetBaseCell:Oa,_h3GetFaces:Zo,_h3GetResolution:bn,_h3IndexesAreNeighbors:$s,_h3IsPentagon:Lr,_h3IsResClassIII:Ys,_h3IsValid:gr,_h3Line:KA,_h3LineSize:Jl,_h3SetToLinkedGeo:Ds,_h3ToCenterChild:vs,_h3ToChildren:sr,_h3ToGeo:ys,_h3ToGeoBoundary:Ca,_h3ToParent:ba,_h3UnidirectionalEdgeIsValid:at,_hexAreaKm2:Ka,_hexAreaM2:jn,_hexRing:ts,_i64Subtract:vo,_kRing:Hs,_kRingDistances:co,_llvm_minnum_f64:io,_llvm_round_f64:PA,_malloc:Us,_maxFaceCount:Na,_maxH3ToChildrenSize:go,_maxKringSize:Ta,_maxPolyfillSize:yr,_maxUncompactSize:Eo,_memcpy:BA,_memset:Br,_numHexagons:Ir,_pentagonIndexCount:XA,_pointDistKm:Xr,_pointDistM:kA,_pointDistRads:ga,_polyfill:Zs,_res0IndexCount:En,_round:no,_sbrk:Ur,_sizeOfCoordIJ:sA,_sizeOfGeoBoundary:Vi,_sizeOfGeoCoord:JA,_sizeOfGeoPolygon:fl,_sizeOfGeofence:IA,_sizeOfH3Index:Ea,_sizeOfLinkedGeoPolygon:Mo,_uncompact:Sa,establishStackSpace:Es,stackAlloc:it,stackRestore:ks,stackSave:nr}}(Re,Fe,qt);t.___uremdi3=de.___uremdi3,t._bitshift64Lshr=de._bitshift64Lshr,t._bitshift64Shl=de._bitshift64Shl,t._calloc=de._calloc,t._cellAreaKm2=de._cellAreaKm2,t._cellAreaM2=de._cellAreaM2,t._cellAreaRads2=de._cellAreaRads2,t._compact=de._compact,t._destroyLinkedPolygon=de._destroyLinkedPolygon,t._edgeLengthKm=de._edgeLengthKm,t._edgeLengthM=de._edgeLengthM;var Ae=t._emscripten_replace_memory=de._emscripten_replace_memory;t._exactEdgeLengthKm=de._exactEdgeLengthKm,t._exactEdgeLengthM=de._exactEdgeLengthM,t._exactEdgeLengthRads=de._exactEdgeLengthRads,t._experimentalH3ToLocalIj=de._experimentalH3ToLocalIj,t._experimentalLocalIjToH3=de._experimentalLocalIjToH3,t._free=de._free,t._geoToH3=de._geoToH3,t._getDestinationH3IndexFromUnidirectionalEdge=de._getDestinationH3IndexFromUnidirectionalEdge,t._getH3IndexesFromUnidirectionalEdge=de._getH3IndexesFromUnidirectionalEdge,t._getH3UnidirectionalEdge=de._getH3UnidirectionalEdge,t._getH3UnidirectionalEdgeBoundary=de._getH3UnidirectionalEdgeBoundary,t._getH3UnidirectionalEdgesFromHexagon=de._getH3UnidirectionalEdgesFromHexagon,t._getOriginH3IndexFromUnidirectionalEdge=de._getOriginH3IndexFromUnidirectionalEdge,t._getPentagonIndexes=de._getPentagonIndexes,t._getRes0Indexes=de._getRes0Indexes,t._h3Distance=de._h3Distance,t._h3GetBaseCell=de._h3GetBaseCell,t._h3GetFaces=de._h3GetFaces,t._h3GetResolution=de._h3GetResolution,t._h3IndexesAreNeighbors=de._h3IndexesAreNeighbors,t._h3IsPentagon=de._h3IsPentagon,t._h3IsResClassIII=de._h3IsResClassIII,t._h3IsValid=de._h3IsValid,t._h3Line=de._h3Line,t._h3LineSize=de._h3LineSize,t._h3SetToLinkedGeo=de._h3SetToLinkedGeo,t._h3ToCenterChild=de._h3ToCenterChild,t._h3ToChildren=de._h3ToChildren,t._h3ToGeo=de._h3ToGeo,t._h3ToGeoBoundary=de._h3ToGeoBoundary,t._h3ToParent=de._h3ToParent,t._h3UnidirectionalEdgeIsValid=de._h3UnidirectionalEdgeIsValid,t._hexAreaKm2=de._hexAreaKm2,t._hexAreaM2=de._hexAreaM2,t._hexRing=de._hexRing,t._i64Subtract=de._i64Subtract,t._kRing=de._kRing,t._kRingDistances=de._kRingDistances,t._llvm_minnum_f64=de._llvm_minnum_f64,t._llvm_round_f64=de._llvm_round_f64,t._malloc=de._malloc,t._maxFaceCount=de._maxFaceCount,t._maxH3ToChildrenSize=de._maxH3ToChildrenSize,t._maxKringSize=de._maxKringSize,t._maxPolyfillSize=de._maxPolyfillSize,t._maxUncompactSize=de._maxUncompactSize,t._memcpy=de._memcpy,t._memset=de._memset,t._numHexagons=de._numHexagons,t._pentagonIndexCount=de._pentagonIndexCount,t._pointDistKm=de._pointDistKm,t._pointDistM=de._pointDistM,t._pointDistRads=de._pointDistRads,t._polyfill=de._polyfill,t._res0IndexCount=de._res0IndexCount,t._round=de._round,t._sbrk=de._sbrk,t._sizeOfCoordIJ=de._sizeOfCoordIJ,t._sizeOfGeoBoundary=de._sizeOfGeoBoundary,t._sizeOfGeoCoord=de._sizeOfGeoCoord,t._sizeOfGeoPolygon=de._sizeOfGeoPolygon,t._sizeOfGeofence=de._sizeOfGeofence,t._sizeOfH3Index=de._sizeOfH3Index,t._sizeOfLinkedGeoPolygon=de._sizeOfLinkedGeoPolygon,t._uncompact=de._uncompact,t.establishStackSpace=de.establishStackSpace;var W=t.stackAlloc=de.stackAlloc,ie=t.stackRestore=de.stackRestore,he=t.stackSave=de.stackSave;if(t.asm=de,t.cwrap=gt,t.setValue=le,t.getValue=je,t.getTempRet0=ee,cn){vn(cn)||(cn=g(cn));{Cs();var me=function(ge){ge.byteLength&&(ge=new Uint8Array(ge)),mi.set(ge,ce),t.memoryInitializerRequest&&delete t.memoryInitializerRequest.response,Kt()},pe=function(){P(cn,me,function(){throw"could not load memory initializer "+cn})},De=Ne(cn);if(De)me(De.buffer);else if(t.memoryInitializerRequest){var Le=function(){var ge=t.memoryInitializerRequest,Ce=ge.response;if(ge.status!==200&&ge.status!==0){var Qe=Ne(t.memoryInitializerRequestURL);if(Qe)Ce=Qe.buffer;else{console.warn("a problem seems to have happened with Module.memoryInitializerRequest, status: "+ge.status+", retrying "+cn),pe();return}}me(Ce)};t.memoryInitializerRequest.response?setTimeout(Le,0):t.memoryInitializerRequest.addEventListener("load",Le)}else pe()}}var Pe;zn=function ge(){Pe||Ve(),Pe||(zn=ge)};function Ve(ge){if(Gi>0||(fi(),Gi>0))return;function Ce(){Pe||(Pe=!0,!Je&&($i(),li(),t.onRuntimeInitialized&&t.onRuntimeInitialized(),Li()))}t.setStatus?(t.setStatus("Running..."),setTimeout(function(){setTimeout(function(){t.setStatus("")},1),Ce()},1)):Ce()}t.run=Ve;function Ue(ge){throw t.onAbort&&t.onAbort(ge),ge+="",u(ge),Q(ge),Je=!0,"abort("+ge+"). Build with -s ASSERTIONS=1 for more info."}if(t.abort=Ue,t.preInit)for(typeof t.preInit=="function"&&(t.preInit=[t.preInit]);t.preInit.length>0;)t.preInit.pop()();return Ve(),e}(typeof Di=="object"?Di:{}),Nn="number",Pf=Nn,Kn=Nn,br=Nn,VA=Nn,$r=Nn,Tz=[["sizeOfH3Index",Nn],["sizeOfGeoCoord",Nn],["sizeOfGeoBoundary",Nn],["sizeOfGeoPolygon",Nn],["sizeOfGeofence",Nn],["sizeOfLinkedGeoPolygon",Nn],["sizeOfCoordIJ",Nn],["h3IsValid",Pf,[Kn,br]],["geoToH3",Kn,[Nn,Nn,VA]],["h3ToGeo",null,[Kn,br,$r]],["h3ToGeoBoundary",null,[Kn,br,$r]],["maxKringSize",Nn,[Nn]],["kRing",null,[Kn,br,Nn,$r]],["kRingDistances",null,[Kn,br,Nn,$r,$r]],["hexRing",null,[Kn,br,Nn,$r]],["maxPolyfillSize",Nn,[$r,VA]],["polyfill",null,[$r,VA,$r]],["h3SetToLinkedGeo",null,[$r,Nn,$r]],["destroyLinkedPolygon",null,[$r]],["compact",Nn,[$r,$r,Nn]],["uncompact",Nn,[$r,Nn,$r,Nn,VA]],["maxUncompactSize",Nn,[$r,Nn,VA]],["h3IsPentagon",Pf,[Kn,br]],["h3IsResClassIII",Pf,[Kn,br]],["h3GetBaseCell",Nn,[Kn,br]],["h3GetResolution",Nn,[Kn,br]],["maxFaceCount",Nn,[Kn,br]],["h3GetFaces",null,[Kn,br,$r]],["h3ToParent",Kn,[Kn,br,VA]],["h3ToChildren",null,[Kn,br,VA,$r]],["h3ToCenterChild",Kn,[Kn,br,VA]],["maxH3ToChildrenSize",Nn,[Kn,br,VA]],["h3IndexesAreNeighbors",Pf,[Kn,br,Kn,br]],["getH3UnidirectionalEdge",Kn,[Kn,br,Kn,br]],["getOriginH3IndexFromUnidirectionalEdge",Kn,[Kn,br]],["getDestinationH3IndexFromUnidirectionalEdge",Kn,[Kn,br]],["h3UnidirectionalEdgeIsValid",Pf,[Kn,br]],["getH3IndexesFromUnidirectionalEdge",null,[Kn,br,$r]],["getH3UnidirectionalEdgesFromHexagon",null,[Kn,br,$r]],["getH3UnidirectionalEdgeBoundary",null,[Kn,br,$r]],["h3Distance",Nn,[Kn,br,Kn,br]],["h3Line",Nn,[Kn,br,Kn,br,$r]],["h3LineSize",Nn,[Kn,br,Kn,br]],["experimentalH3ToLocalIj",Nn,[Kn,br,Kn,br,$r]],["experimentalLocalIjToH3",Nn,[Kn,br,$r,$r]],["hexAreaM2",Nn,[VA]],["hexAreaKm2",Nn,[VA]],["edgeLengthM",Nn,[VA]],["edgeLengthKm",Nn,[VA]],["pointDistM",Nn,[$r,$r]],["pointDistKm",Nn,[$r,$r]],["pointDistRads",Nn,[$r,$r]],["cellAreaM2",Nn,[Kn,br]],["cellAreaKm2",Nn,[Kn,br]],["cellAreaRads2",Nn,[Kn,br]],["exactEdgeLengthM",Nn,[Kn,br]],["exactEdgeLengthKm",Nn,[Kn,br]],["exactEdgeLengthRads",Nn,[Kn,br]],["numHexagons",Nn,[VA]],["getRes0Indexes",null,[$r]],["res0IndexCount",Nn],["getPentagonIndexes",null,[Nn,$r]],["pentagonIndexCount",Nn]],gn={};Tz.forEach(function(t){gn[t[0]]=Di.cwrap.apply(Di,t)});var Xc=16,bA=4,Hx=4,mh=8,iA=gn.sizeOfH3Index(),dm=gn.sizeOfGeoCoord(),z4=gn.sizeOfGeoBoundary(),Pz=gn.sizeOfGeoPolygon(),Uf=gn.sizeOfGeofence(),Bz=gn.sizeOfLinkedGeoPolygon(),R4=gn.sizeOfCoordIJ(),HA={m:"m",m2:"m2",km:"km",km2:"km2",rads:"rads",rads2:"rads2"};function y0(e){if(typeof e!="number"||e<0||e>15||Math.floor(e)!==e)throw new Error("Invalid resolution: "+e)}var Dz=/[^0-9a-fA-F]/;function Yr(e){if(Array.isArray(e)&&e.length===2&&Number.isInteger(e[0])&&Number.isInteger(e[1]))return e;if(typeof e!="string"||Dz.test(e))return[0,0];var t=parseInt(e.substring(0,e.length-8),Xc),n=parseInt(e.substring(e.length-8),Xc);return[n,t]}function Zx(e){if(e>=0)return e.toString(Xc);e=e&2147483647;var t=F4(8,e.toString(Xc)),n=(parseInt(t[0],Xc)+8).toString(Xc);return t=n+t.substring(1),t}function pm(e,t){return Zx(t)+F4(8,Zx(e))}function F4(e,t){for(var n=e-t.length,l="",m=0;m<n;m++)l+="0";return l=l+t,l}function jx(e,t,n){for(var l=e.length,m=Di._calloc(l,dm),g=n?1:0,P=n?0:1,u=0;u<l*2;u+=2)Di.HEAPF64.set([e[u/2][g],e[u/2][P]].map(gm),m/mh+u);return Di.HEAPU32.set([l,m],t/bA),t}function Lz(e,t){var n=e.length-1,l=Di._calloc(Pz),m=0,g=m+Uf,P=g+bA;jx(e[0],l+m,t);var u;if(n>0){u=Di._calloc(n,Uf);for(var Q=0;Q<n;Q++)jx(e[Q+1],u+Uf*Q,t)}return Di.setValue(l+g,n,"i32"),Di.setValue(l+P,u,"i32"),l}function zz(e){var t=0,n=t+Uf,l=n+bA,m=bA;Di._free(Di.getValue(e+t+m,"i8*"));var g=Di.getValue(e+n,"i32");if(g>0){for(var P=Di.getValue(e+l,"i32"),u=0;u<g;u++)Di._free(Di.getValue(P+Uf*u+m,"i8*"));Di._free(P)}Di._free(e)}function O4(e){var t=Di.getTempRet0();return[e,t]}function x0(e){var t=O4(e),n=t[0],l=t[1];return l?pm(n,l):null}function N4(e,t){t===void 0&&(t=0);var n=Di.getValue(e+bA*t*2,"i32"),l=Di.getValue(e+bA*(t*2+1),"i32");return l?pm(n,l):null}function Rz(e,t,n){Di.HEAPU32.set(Yr(e),t/bA+2*n)}function Kl(e,t){for(var n=[],l=0;l<t;l++){var m=N4(e,l);m!==null&&n.push(m)}return n}function wv(e,t){for(var n=t.length,l=0;l<n;l++)Rz(t[l],e,l)}function Wx(e,t){var n=Di._calloc(1,dm);return Di.HEAPF64.set([e,t].map(gm),n/mh),n}function Ug(e){return Q4(Di.getValue(e,"double"))}function bv(e){return[Ug(e),Ug(e+mh)]}function V4(e){return[Ug(e+mh),Ug(e)]}function U4(e,t,n){for(var l=Di.getValue(e,"i32"),m=e+mh,g=[],P=t?V4:bv,u=0;u<l*2;u+=2)g.push(P(m+mh*u));return n&&g.push(g[0]),g}function Fz(e,t){for(var n=[],l=t?V4:bv,m,g,P,u;e;){for(n.push(m=[]),g=Di.getValue(e,"i8*");g;){for(m.push(P=[]),u=Di.getValue(g,"i8*");u;)P.push(l(u)),u=Di.getValue(u+mh*2,"i8*");t&&P.push(P[0]),g=Di.getValue(g+Hx*2,"i8*")}e=Di.getValue(e+Hx*2,"i8*")}return n}function Oz(e){return{i:Di.getValue(e,"i32"),j:Di.getValue(e+bA,"i32")}}function Nz(e,t){var n=t.i,l=t.j;Di.setValue(e,n,"i32"),Di.setValue(e+bA,l,"i32")}function Vz(e,t){for(var n=[],l=0;l<t;l++){var m=Di.getValue(e+bA*l,"i32");m>=0&&n.push(m)}return n}function G4(e){var t=Yr(e),n=t[0],l=t[1];return!!gn.h3IsValid(n,l)}function Uz(e){var t=Yr(e),n=t[0],l=t[1];return!!gn.h3IsPentagon(n,l)}function Gz(e){var t=Yr(e),n=t[0],l=t[1];return!!gn.h3IsResClassIII(n,l)}function Qz(e){var t=Yr(e),n=t[0],l=t[1];return gn.h3GetBaseCell(n,l)}function qz(e){var t=Yr(e),n=t[0],l=t[1],m=gn.maxFaceCount(n,l),g=Di._malloc(bA*m);gn.h3GetFaces(n,l,g);var P=Vz(g,m);return Di._free(g),P}function Hz(e){var t=Yr(e),n=t[0],l=t[1];return gn.h3IsValid(n,l)?gn.h3GetResolution(n,l):-1}function Zz(e,t,n){var l=Di._malloc(dm);Di.HEAPF64.set([e,t].map(gm),l/mh);var m=x0(gn.geoToH3(l,n));return Di._free(l),m}function jz(e){var t=Di._malloc(dm),n=Yr(e),l=n[0],m=n[1];gn.h3ToGeo(l,m,t);var g=bv(t);return Di._free(t),g}function Wz(e,t){var n=Di._malloc(z4),l=Yr(e),m=l[0],g=l[1];gn.h3ToGeoBoundary(m,g,n);var P=U4(n,t,t);return Di._free(n),P}function Yz(e,t){var n=Yr(e),l=n[0],m=n[1];return x0(gn.h3ToParent(l,m,t))}function $z(e,t){if(!G4(e))return[];var n=Yr(e),l=n[0],m=n[1],g=gn.maxH3ToChildrenSize(l,m,t),P=Di._calloc(g,iA);gn.h3ToChildren(l,m,t,P);var u=Kl(P,g);return Di._free(P),u}function Xz(e,t){var n=Yr(e),l=n[0],m=n[1];return x0(gn.h3ToCenterChild(l,m,t))}function Kz(e,t){var n=Yr(e),l=n[0],m=n[1],g=gn.maxKringSize(t),P=Di._calloc(g,iA);gn.kRing(l,m,t,P);var u=Kl(P,g);return Di._free(P),u}function Jz(e,t){var n=Yr(e),l=n[0],m=n[1],g=gn.maxKringSize(t),P=Di._calloc(g,iA),u=Di._calloc(g,bA);gn.kRingDistances(l,m,t,P,u);for(var Q=[],O=0;O<t+1;O++)Q.push([]);for(var re=0;re<g*2;re+=2){var ee=Di.getValue(P+bA*re,"i32"),ce=Di.getValue(P+bA*(re+1),"i32"),le=Di.getValue(u+bA*(re/2),"i32");(ee!==0||ce!==0)&&Q[le].push(pm(ee,ce))}return Di._free(P),Di._free(u),Q}function eR(e,t){var n=t===0?1:6*t,l=Di._calloc(n,iA),m=gn.hexRing.apply(gn,Yr(e).concat([t],[l]));if(m!==0)throw Di._free(l),new Error("Failed to get hexRing (encountered a pentagon?)");var g=Kl(l,n);return Di._free(l),g}function tR(e,t,n){if(y0(t),n=!!n,e.length===0||e[0].length===0)return[];typeof e[0][0]=="number"&&(e=[e]);var l=Lz(e,n),m=gn.maxPolyfillSize(l,t),g=Di._calloc(m,iA);gn.polyfill(l,t,g);var P=Kl(g,m);return Di._free(g),zz(l),P}function iR(e,t){if(!e||!e.length)return[];var n=e.length,l=Di._calloc(n,iA);wv(l,e);var m=Di._calloc(Bz),g=m;gn.h3SetToLinkedGeo(l,n,m);var P=Fz(m,t);return gn.destroyLinkedPolygon(g),Di._free(g),Di._free(l),P}function nR(e){if(!e||!e.length)return[];var t=e.length,n=Di._calloc(t,iA);wv(n,e);var l=Di._calloc(t,iA),m=gn.compact(n,l,t);if(m!==0)throw Di._free(n),Di._free(l),new Error("Failed to compact, malformed input data (duplicate hexagons?)");var g=Kl(l,t);return Di._free(n),Di._free(l),g}function rR(e,t){if(y0(t),!e||!e.length)return[];var n=e.length,l=Di._calloc(n,iA);wv(l,e);var m=gn.maxUncompactSize(l,n,t),g=Di._calloc(m,iA),P=gn.uncompact(l,n,g,m,t);if(P!==0)throw Di._free(l),Di._free(g),new Error("Failed to uncompact (bad resolution?)");var u=Kl(g,m);return Di._free(l),Di._free(g),u}function sR(e,t){var n=Yr(e),l=n[0],m=n[1],g=Yr(t),P=g[0],u=g[1];return!!gn.h3IndexesAreNeighbors(l,m,P,u)}function aR(e,t){var n=Yr(e),l=n[0],m=n[1],g=Yr(t),P=g[0],u=g[1];return x0(gn.getH3UnidirectionalEdge(l,m,P,u))}function oR(e){var t=Yr(e),n=t[0],l=t[1];return x0(gn.getOriginH3IndexFromUnidirectionalEdge(n,l))}function AR(e){var t=Yr(e),n=t[0],l=t[1];return x0(gn.getDestinationH3IndexFromUnidirectionalEdge(n,l))}function lR(e){var t=Yr(e),n=t[0],l=t[1];return!!gn.h3UnidirectionalEdgeIsValid(n,l)}function uR(e){var t=Yr(e),n=t[0],l=t[1],m=2,g=Di._calloc(m,iA);gn.getH3IndexesFromUnidirectionalEdge(n,l,g);var P=Kl(g,m);return Di._free(g),P}function hR(e){var t=Yr(e),n=t[0],l=t[1],m=6,g=Di._calloc(m,iA);gn.getH3UnidirectionalEdgesFromHexagon(n,l,g);var P=Kl(g,m);return Di._free(g),P}function cR(e,t){var n=Di._malloc(z4),l=Yr(e),m=l[0],g=l[1];gn.getH3UnidirectionalEdgeBoundary(m,g,n);var P=U4(n,t);return Di._free(n),P}function fR(e,t){var n=Yr(e),l=n[0],m=n[1],g=Yr(t),P=g[0],u=g[1];return gn.h3Distance(l,m,P,u)}function dR(e,t){var n=Yr(e),l=n[0],m=n[1],g=Yr(t),P=g[0],u=g[1],Q=gn.h3LineSize(l,m,P,u);if(Q<0)throw new Error("Line cannot be calculated");var O=Di._calloc(Q,iA);gn.h3Line(l,m,P,u,O);var re=Kl(O,Q);return Di._free(O),re}function pR(e,t){var n=Di._malloc(R4),l=gn.experimentalH3ToLocalIj.apply(gn,Yr(e).concat(Yr(t),[n])),m=Oz(n);switch(Di._free(n),l){case 0:return m;case 1:throw new Error("Incompatible origin and index.");case 2:default:throw new Error("Local IJ coordinates undefined for this origin and index pair. The index may be too far from the origin.");case 3:case 4:case 5:throw new Error("Encountered possible pentagon distortion")}}function gR(e,t){if(!t||typeof t.i!="number"||typeof t.j!="number")throw new Error("Coordinates must be provided as an {i, j} object");var n=Di._malloc(R4),l=Di._malloc(iA);Nz(n,t);var m=gn.experimentalLocalIjToH3.apply(gn,Yr(e).concat([n],[l])),g=N4(l);if(Di._free(n),Di._free(l),m!==0)throw new Error("Index not defined for this origin and IJ coordinates pair. IJ coordinates may be too far from origin, or a pentagon distortion was encountered.");return g}function mR(e,t,n){var l=Wx(e[0],e[1]),m=Wx(t[0],t[1]),g;switch(n){case HA.m:g=gn.pointDistM(l,m);break;case HA.km:g=gn.pointDistKm(l,m);break;case HA.rads:g=gn.pointDistRads(l,m);break;default:g=null}if(Di._free(l),Di._free(m),g===null)throw new Error("Unknown unit: "+n);return g}function _R(e,t){var n=Yr(e),l=n[0],m=n[1];switch(t){case HA.m2:return gn.cellAreaM2(l,m);case HA.km2:return gn.cellAreaKm2(l,m);case HA.rads2:return gn.cellAreaRads2(l,m);default:throw new Error("Unknown unit: "+t)}}function vR(e,t){var n=Yr(e),l=n[0],m=n[1];switch(t){case HA.m:return gn.exactEdgeLengthM(l,m);case HA.km:return gn.exactEdgeLengthKm(l,m);case HA.rads:return gn.exactEdgeLengthRads(l,m);default:throw new Error("Unknown unit: "+t)}}function yR(e,t){switch(y0(e),t){case HA.m2:return gn.hexAreaM2(e);case HA.km2:return gn.hexAreaKm2(e);default:throw new Error("Unknown unit: "+t)}}function xR(e,t){switch(y0(e),t){case HA.m:return gn.edgeLengthM(e);case HA.km:return gn.edgeLengthKm(e);default:throw new Error("Unknown unit: "+t)}}function wR(e){y0(e);var t=O4(gn.numHexagons(e)),n=t[0],l=t[1];return l?l*Math.pow(2,32)+n:n}function bR(){var e=gn.res0IndexCount(),t=Di._malloc(iA*e);gn.getRes0Indexes(t);var n=Kl(t,e);return Di._free(t),n}function SR(e){y0(e);var t=gn.pentagonIndexCount(),n=Di._malloc(iA*t);gn.getPentagonIndexes(e,n);var l=Kl(n,t);return Di._free(n),l}function gm(e){return e*Math.PI/180}function Q4(e){return e*180/Math.PI}const CR=Object.freeze(Object.defineProperty({__proto__:null,UNITS:HA,cellArea:_R,compact:nR,degsToRads:gm,edgeLength:xR,exactEdgeLength:vR,experimentalH3ToLocalIj:pR,experimentalLocalIjToH3:gR,geoToH3:Zz,getDestinationH3IndexFromUnidirectionalEdge:AR,getH3IndexesFromUnidirectionalEdge:uR,getH3UnidirectionalEdge:aR,getH3UnidirectionalEdgeBoundary:cR,getH3UnidirectionalEdgesFromHexagon:hR,getOriginH3IndexFromUnidirectionalEdge:oR,getPentagonIndexes:SR,getRes0Indexes:bR,h3Distance:fR,h3GetBaseCell:Qz,h3GetFaces:qz,h3GetResolution:Hz,h3IndexToSplitLong:Yr,h3IndexesAreNeighbors:sR,h3IsPentagon:Uz,h3IsResClassIII:Gz,h3IsValid:G4,h3Line:dR,h3SetToMultiPolygon:iR,h3ToCenterChild:Xz,h3ToChildren:$z,h3ToGeo:jz,h3ToGeoBoundary:Wz,h3ToParent:Yz,h3UnidirectionalEdgeIsValid:lR,hexArea:yR,hexRing:eR,kRing:Kz,kRingDistances:Jz,numHexagons:wR,pointDist:mR,polyfill:tR,radsToDegs:Q4,splitLongToh3Index:pm,uncompact:rR},Symbol.toStringTag,{value:"Module"})),kR=M2(CR);var td=kR,mm="Feature",q4="FeatureCollection",Gg="Polygon",Sv="MultiPolygon";function H4(e){for(var t=null,n=0;n<e.length;n++)if(t!==null)for(var l=0;l<e[n].length;l++)t.push(e[n][l]);else t=e[n];return Array.from(new Set(t))}function ER(e){for(var t=0,n=0,l=0,m=e[0],g=0;g<m.length;g++)t+=m[g][0],n+=m[g][1],l++;return[t/l,n/l]}function IR(e,t){var n=e.features;if(!n)throw new Error("No features found");return H4(n.map(function(l){return Z4(l,t)}))}function Z4(e,t,n){n===void 0&&(n={});var l=e.type,m=e.geometry,g=m&&m.type;if(l===q4)return IR(e,t);if(l!==mm)throw new Error("Unhandled type: "+l);if(g!==Gg&&g!==Sv)throw new Error("Unhandled geometry type: "+g);var P=g===Gg?[m.coordinates]:m.coordinates;return H4(P.map(function(u){var Q=td.polyfill(u,t,!0);if(Q.length||!n.ensureOutput)return Q;var O=ER(u),re=O[0],ee=O[1];return[td.geoToH3(ee,re,t)]}))}function j4(e,t){t===void 0&&(t={});var n=[td.h3ToGeoBoundary(e,!0)];return{type:mm,id:e,properties:t,geometry:{type:Gg,coordinates:n}}}function MR(e,t){t===void 0&&(t={});var n=td.h3SetToMultiPolygon(e,!0),l=n.length>1,m=l?Sv:Gg,g=l?n:n[0]||[];return{type:mm,properties:t,geometry:{type:m,coordinates:g}}}function TR(e,t){t===void 0&&(t={});var n=e.map(function(l){return[td.h3ToGeoBoundary(l,{geoJson:!0})]});return{type:mm,properties:t,geometry:{type:Sv,coordinates:n}}}function PR(e,t){for(var n=[],l=0;l<e.length;l++){var m=e[l],g=t?t(m):{};n.push(j4(m,g))}return{type:q4,features:n}}var BR={featureToH3Set:Z4,h3ToFeature:j4,h3SetToFeature:MR,h3SetToMultiPolygonFeature:TR,h3SetToFeatureCollection:PR},DR=BR,Jr=function(e){e=e||{};var t=typeof e<"u"?e:{},n={},l;for(l in t)t.hasOwnProperty(l)&&(n[l]=t[l]);var m="";function g(ge){return t.locateFile?t.locateFile(ge,m):m+ge}var P;typeof document<"u"&&document.currentScript&&(m=document.currentScript.src),m.indexOf("blob:")!==0?m=m.substr(0,m.lastIndexOf("/")+1):m="",P=function(Ce,Qe,nt){var i=new XMLHttpRequest;i.open("GET",Ce,!0),i.responseType="arraybuffer",i.onload=function(){if(i.status==200||i.status==0&&i.response){Qe(i.response);return}var Dt=Ne(Ce);if(Dt){Qe(Dt.buffer);return}nt()},i.onerror=nt,i.send(null)};var u=t.print||console.log.bind(console),Q=t.printErr||console.warn.bind(console);for(l in n)n.hasOwnProperty(l)&&(t[l]=n[l]);n=null,t.arguments&&t.arguments;var O=0,re=function(ge){O=ge},ee=function(){return O},ce=8;function le(ge,Ce,Qe,nt){switch(Qe=Qe||"i8",Qe.charAt(Qe.length-1)==="*"&&(Qe="i32"),Qe){case"i1":di[ge>>0]=Ce;break;case"i8":di[ge>>0]=Ce;break;case"i16":vt[ge>>1]=Ce;break;case"i32":Ut[ge>>2]=Ce;break;case"i64":pn=[Ce>>>0,(Dn=Ce,+ir(Dn)>=1?Dn>0?(Or(+vr(Dn/4294967296),4294967295)|0)>>>0:~~+kn((Dn-+(~~Dn>>>0))/4294967296)>>>0:0)],Ut[ge>>2]=pn[0],Ut[ge+4>>2]=pn[1];break;case"float":rt[ge>>2]=Ce;break;case"double":Ft[ge>>3]=Ce;break;default:Ue("invalid type for setValue: "+Qe)}}function je(ge,Ce,Qe){switch(Ce=Ce||"i8",Ce.charAt(Ce.length-1)==="*"&&(Ce="i32"),Ce){case"i1":return di[ge>>0];case"i8":return di[ge>>0];case"i16":return vt[ge>>1];case"i32":return Ut[ge>>2];case"i64":return Ut[ge>>2];case"float":return rt[ge>>2];case"double":return Ft[ge>>3];default:Ue("invalid type for getValue: "+Ce)}return null}var Je=!1;function Xe(ge,Ce){ge||Ue("Assertion failed: "+Ce)}function Ke(ge){var Ce=t["_"+ge];return Xe(Ce,"Cannot call unknown function "+ge+", make sure it is exported"),Ce}function xt(ge,Ce,Qe,nt,i){var ue={string:function(ei){var Ti=0;if(ei!=null&&ei!==0){var Yi=(ei.length<<2)+1;Ti=W(Yi),ii(ei,Ti,Yi)}return Ti},array:function(ei){var Ti=W(ei.length);return xi(ei,Ti),Ti}};function Dt(ei){return Ce==="string"?Te(ei):Ce==="boolean"?!!ei:ei}var Vt=Ke(ge),Wt=[],It=0;if(nt)for(var Bt=0;Bt<nt.length;Bt++){var hi=ue[Qe[Bt]];hi?(It===0&&(It=he()),Wt[Bt]=hi(nt[Bt])):Wt[Bt]=nt[Bt]}var Zt=Vt.apply(null,Wt);return Zt=Dt(Zt),It!==0&&ie(It),Zt}function gt(ge,Ce,Qe,nt){Qe=Qe||[];var i=Qe.every(function(Dt){return Dt==="number"}),ue=Ce!=="string";return ue&&i&&!nt?Ke(ge):function(){return xt(ge,Ce,Qe,arguments)}}var Mt=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function Ct(ge,Ce,Qe){for(var nt=Ce+Qe,i=Ce;ge[i]&&!(i>=nt);)++i;if(i-Ce>16&&ge.subarray&&Mt)return Mt.decode(ge.subarray(Ce,i));for(var ue="";Ce<i;){var Dt=ge[Ce++];if(!(Dt&128)){ue+=String.fromCharCode(Dt);continue}var Vt=ge[Ce++]&63;if((Dt&224)==192){ue+=String.fromCharCode((Dt&31)<<6|Vt);continue}var Wt=ge[Ce++]&63;if((Dt&240)==224?Dt=(Dt&15)<<12|Vt<<6|Wt:Dt=(Dt&7)<<18|Vt<<12|Wt<<6|ge[Ce++]&63,Dt<65536)ue+=String.fromCharCode(Dt);else{var It=Dt-65536;ue+=String.fromCharCode(55296|It>>10,56320|It&1023)}}return ue}function Te(ge,Ce){return ge?Ct(mi,ge,Ce):""}function Ai(ge,Ce,Qe,nt){if(!(nt>0))return 0;for(var i=Qe,ue=Qe+nt-1,Dt=0;Dt<ge.length;++Dt){var Vt=ge.charCodeAt(Dt);if(Vt>=55296&&Vt<=57343){var Wt=ge.charCodeAt(++Dt);Vt=65536+((Vt&1023)<<10)|Wt&1023}if(Vt<=127){if(Qe>=ue)break;Ce[Qe++]=Vt}else if(Vt<=2047){if(Qe+1>=ue)break;Ce[Qe++]=192|Vt>>6,Ce[Qe++]=128|Vt&63}else if(Vt<=65535){if(Qe+2>=ue)break;Ce[Qe++]=224|Vt>>12,Ce[Qe++]=128|Vt>>6&63,Ce[Qe++]=128|Vt&63}else{if(Qe+3>=ue)break;Ce[Qe++]=240|Vt>>18,Ce[Qe++]=128|Vt>>12&63,Ce[Qe++]=128|Vt>>6&63,Ce[Qe++]=128|Vt&63}}return Ce[Qe]=0,Qe-i}function ii(ge,Ce,Qe){return Ai(ge,mi,Ce,Qe)}typeof TextDecoder<"u"&&new TextDecoder("utf-16le");function xi(ge,Ce){di.set(ge,Ce)}function gi(ge,Ce){return ge%Ce>0&&(ge+=Ce-ge%Ce),ge}var qt,di,mi,vt,Ut,rt,Ft;function ui(ge){qt=ge,t.HEAP8=di=new Int8Array(ge),t.HEAP16=vt=new Int16Array(ge),t.HEAP32=Ut=new Int32Array(ge),t.HEAPU8=mi=new Uint8Array(ge),t.HEAPU16=new Uint16Array(ge),t.HEAPU32=new Uint32Array(ge),t.HEAPF32=rt=new Float32Array(ge),t.HEAPF64=Ft=new Float64Array(ge)}var Lt=5267040,Yt=24128,oi=t.TOTAL_MEMORY||33554432;t.buffer?qt=t.buffer:qt=new ArrayBuffer(oi),oi=qt.byteLength,ui(qt),Ut[Yt>>2]=Lt;function yi(ge){for(;ge.length>0;){var Ce=ge.shift();if(typeof Ce=="function"){Ce();continue}var Qe=Ce.func;typeof Qe=="number"?Ce.arg===void 0?t.dynCall_v(Qe):t.dynCall_vi(Qe,Ce.arg):Qe(Ce.arg===void 0?null:Ce.arg)}}var Pi=[],dn=[],sn=[],Bn=[];function fi(){if(t.preRun)for(typeof t.preRun=="function"&&(t.preRun=[t.preRun]);t.preRun.length;)Ji(t.preRun.shift());yi(Pi)}function $i(){yi(dn)}function li(){yi(sn)}function Li(){if(t.postRun)for(typeof t.postRun=="function"&&(t.postRun=[t.postRun]);t.postRun.length;)wi(t.postRun.shift());yi(Bn)}function Ji(ge){Pi.unshift(ge)}function wi(ge){Bn.unshift(ge)}var ir=Math.abs,kn=Math.ceil,vr=Math.floor,Or=Math.min,Gi=0,zn=null;function Cs(ge){Gi++,t.monitorRunDependencies&&t.monitorRunDependencies(Gi)}function Kt(ge){if(Gi--,t.monitorRunDependencies&&t.monitorRunDependencies(Gi),Gi==0&&zn){var Ce=zn;zn=null,Ce()}}t.preloadedImages={},t.preloadedAudios={};var cn=null,fr="data:application/octet-stream;base64,";function vn(ge){return String.prototype.startsWith?ge.startsWith(fr):ge.indexOf(fr)===0}var Dn,pn;cn="data:application/octet-stream;base64,AAAAAAAAAAAAAAAAAQAAAAIAAAADAAAABAAAAAUAAAAGAAAAAQAAAAQAAAADAAAABgAAAAUAAAACAAAAAAAAAAIAAAADAAAAAQAAAAQAAAAGAAAAAAAAAAUAAAADAAAABgAAAAQAAAAFAAAAAAAAAAEAAAACAAAABAAAAAUAAAAGAAAAAAAAAAIAAAADAAAAAQAAAAUAAAACAAAAAAAAAAEAAAADAAAABgAAAAQAAAAGAAAAAAAAAAUAAAACAAAAAQAAAAQAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAIAAAADAAAAAAAAAAAAAAACAAAAAAAAAAEAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAYAAAAAAAAABQAAAAAAAAAAAAAABAAAAAUAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAYAAAAAAAAABgAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAgAAAAMAAAAEAAAABQAAAAYAAAABAAAAAgAAAAMAAAAEAAAABQAAAAYAAAAAAAAAAgAAAAMAAAAEAAAABQAAAAYAAAAAAAAAAQAAAAMAAAAEAAAABQAAAAYAAAAAAAAAAQAAAAIAAAAEAAAABQAAAAYAAAAAAAAAAQAAAAIAAAADAAAABQAAAAYAAAAAAAAAAQAAAAIAAAADAAAABAAAAAYAAAAAAAAAAQAAAAIAAAADAAAABAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAgAAAAIAAAAAAAAAAAAAAAYAAAAAAAAAAwAAAAIAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAFAAAABAAAAAAAAAABAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAYAAAAAAAAABAAAAAAAAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAgAAAAQAAAADAAAACAAAAAEAAAAHAAAABgAAAAkAAAAAAAAAAwAAAAIAAAACAAAABgAAAAoAAAALAAAAAAAAAAEAAAAFAAAAAwAAAA0AAAABAAAABwAAAAQAAAAMAAAAAAAAAAQAAAB/AAAADwAAAAgAAAADAAAAAAAAAAwAAAAFAAAAAgAAABIAAAAKAAAACAAAAAAAAAAQAAAABgAAAA4AAAALAAAAEQAAAAEAAAAJAAAAAgAAAAcAAAAVAAAACQAAABMAAAADAAAADQAAAAEAAAAIAAAABQAAABYAAAAQAAAABAAAAAAAAAAPAAAACQAAABMAAAAOAAAAFAAAAAEAAAAHAAAABgAAAAoAAAALAAAAGAAAABcAAAAFAAAAAgAAABIAAAALAAAAEQAAABcAAAAZAAAAAgAAAAYAAAAKAAAADAAAABwAAAANAAAAGgAAAAQAAAAPAAAAAwAAAA0AAAAaAAAAFQAAAB0AAAADAAAADAAAAAcAAAAOAAAAfwAAABEAAAAbAAAACQAAABQAAAAGAAAADwAAABYAAAAcAAAAHwAAAAQAAAAIAAAADAAAABAAAAASAAAAIQAAAB4AAAAIAAAABQAAABYAAAARAAAACwAAAA4AAAAGAAAAIwAAABkAAAAbAAAAEgAAABgAAAAeAAAAIAAAAAUAAAAKAAAAEAAAABMAAAAiAAAAFAAAACQAAAAHAAAAFQAAAAkAAAAUAAAADgAAABMAAAAJAAAAKAAAABsAAAAkAAAAFQAAACYAAAATAAAAIgAAAA0AAAAdAAAABwAAABYAAAAQAAAAKQAAACEAAAAPAAAACAAAAB8AAAAXAAAAGAAAAAsAAAAKAAAAJwAAACUAAAAZAAAAGAAAAH8AAAAgAAAAJQAAAAoAAAAXAAAAEgAAABkAAAAXAAAAEQAAAAsAAAAtAAAAJwAAACMAAAAaAAAAKgAAAB0AAAArAAAADAAAABwAAAANAAAAGwAAACgAAAAjAAAALgAAAA4AAAAUAAAAEQAAABwAAAAfAAAAKgAAACwAAAAMAAAADwAAABoAAAAdAAAAKwAAACYAAAAvAAAADQAAABoAAAAVAAAAHgAAACAAAAAwAAAAMgAAABAAAAASAAAAIQAAAB8AAAApAAAALAAAADUAAAAPAAAAFgAAABwAAAAgAAAAHgAAABgAAAASAAAANAAAADIAAAAlAAAAIQAAAB4AAAAxAAAAMAAAABYAAAAQAAAAKQAAACIAAAATAAAAJgAAABUAAAA2AAAAJAAAADMAAAAjAAAALgAAAC0AAAA4AAAAEQAAABsAAAAZAAAAJAAAABQAAAAiAAAAEwAAADcAAAAoAAAANgAAACUAAAAnAAAANAAAADkAAAAYAAAAFwAAACAAAAAmAAAAfwAAACIAAAAzAAAAHQAAAC8AAAAVAAAAJwAAACUAAAAZAAAAFwAAADsAAAA5AAAALQAAACgAAAAbAAAAJAAAABQAAAA8AAAALgAAADcAAAApAAAAMQAAADUAAAA9AAAAFgAAACEAAAAfAAAAKgAAADoAAAArAAAAPgAAABwAAAAsAAAAGgAAACsAAAA+AAAALwAAAEAAAAAaAAAAKgAAAB0AAAAsAAAANQAAADoAAABBAAAAHAAAAB8AAAAqAAAALQAAACcAAAAjAAAAGQAAAD8AAAA7AAAAOAAAAC4AAAA8AAAAOAAAAEQAAAAbAAAAKAAAACMAAAAvAAAAJgAAACsAAAAdAAAARQAAADMAAABAAAAAMAAAADEAAAAeAAAAIQAAAEMAAABCAAAAMgAAADEAAAB/AAAAPQAAAEIAAAAhAAAAMAAAACkAAAAyAAAAMAAAACAAAAAeAAAARgAAAEMAAAA0AAAAMwAAAEUAAAA2AAAARwAAACYAAAAvAAAAIgAAADQAAAA5AAAARgAAAEoAAAAgAAAAJQAAADIAAAA1AAAAPQAAAEEAAABLAAAAHwAAACkAAAAsAAAANgAAAEcAAAA3AAAASQAAACIAAAAzAAAAJAAAADcAAAAoAAAANgAAACQAAABIAAAAPAAAAEkAAAA4AAAARAAAAD8AAABNAAAAIwAAAC4AAAAtAAAAOQAAADsAAABKAAAATgAAACUAAAAnAAAANAAAADoAAAB/AAAAPgAAAEwAAAAsAAAAQQAAACoAAAA7AAAAPwAAAE4AAABPAAAAJwAAAC0AAAA5AAAAPAAAAEgAAABEAAAAUAAAACgAAAA3AAAALgAAAD0AAAA1AAAAMQAAACkAAABRAAAASwAAAEIAAAA+AAAAKwAAADoAAAAqAAAAUgAAAEAAAABMAAAAPwAAAH8AAAA4AAAALQAAAE8AAAA7AAAATQAAAEAAAAAvAAAAPgAAACsAAABUAAAARQAAAFIAAABBAAAAOgAAADUAAAAsAAAAVgAAAEwAAABLAAAAQgAAAEMAAABRAAAAVQAAADEAAAAwAAAAPQAAAEMAAABCAAAAMgAAADAAAABXAAAAVQAAAEYAAABEAAAAOAAAADwAAAAuAAAAWgAAAE0AAABQAAAARQAAADMAAABAAAAALwAAAFkAAABHAAAAVAAAAEYAAABDAAAANAAAADIAAABTAAAAVwAAAEoAAABHAAAAWQAAAEkAAABbAAAAMwAAAEUAAAA2AAAASAAAAH8AAABJAAAANwAAAFAAAAA8AAAAWAAAAEkAAABbAAAASAAAAFgAAAA2AAAARwAAADcAAABKAAAATgAAAFMAAABcAAAANAAAADkAAABGAAAASwAAAEEAAAA9AAAANQAAAF4AAABWAAAAUQAAAEwAAABWAAAAUgAAAGAAAAA6AAAAQQAAAD4AAABNAAAAPwAAAEQAAAA4AAAAXQAAAE8AAABaAAAATgAAAEoAAAA7AAAAOQAAAF8AAABcAAAATwAAAE8AAABOAAAAPwAAADsAAABdAAAAXwAAAE0AAABQAAAARAAAAEgAAAA8AAAAYwAAAFoAAABYAAAAUQAAAFUAAABeAAAAZQAAAD0AAABCAAAASwAAAFIAAABgAAAAVAAAAGIAAAA+AAAATAAAAEAAAABTAAAAfwAAAEoAAABGAAAAZAAAAFcAAABcAAAAVAAAAEUAAABSAAAAQAAAAGEAAABZAAAAYgAAAFUAAABXAAAAZQAAAGYAAABCAAAAQwAAAFEAAABWAAAATAAAAEsAAABBAAAAaAAAAGAAAABeAAAAVwAAAFMAAABmAAAAZAAAAEMAAABGAAAAVQAAAFgAAABIAAAAWwAAAEkAAABjAAAAUAAAAGkAAABZAAAAYQAAAFsAAABnAAAARQAAAFQAAABHAAAAWgAAAE0AAABQAAAARAAAAGoAAABdAAAAYwAAAFsAAABJAAAAWQAAAEcAAABpAAAAWAAAAGcAAABcAAAAUwAAAE4AAABKAAAAbAAAAGQAAABfAAAAXQAAAE8AAABaAAAATQAAAG0AAABfAAAAagAAAF4AAABWAAAAUQAAAEsAAABrAAAAaAAAAGUAAABfAAAAXAAAAE8AAABOAAAAbQAAAGwAAABdAAAAYAAAAGgAAABiAAAAbgAAAEwAAABWAAAAUgAAAGEAAAB/AAAAYgAAAFQAAABnAAAAWQAAAG8AAABiAAAAbgAAAGEAAABvAAAAUgAAAGAAAABUAAAAYwAAAFAAAABpAAAAWAAAAGoAAABaAAAAcQAAAGQAAABmAAAAUwAAAFcAAABsAAAAcgAAAFwAAABlAAAAZgAAAGsAAABwAAAAUQAAAFUAAABeAAAAZgAAAGUAAABXAAAAVQAAAHIAAABwAAAAZAAAAGcAAABbAAAAYQAAAFkAAAB0AAAAaQAAAG8AAABoAAAAawAAAG4AAABzAAAAVgAAAF4AAABgAAAAaQAAAFgAAABnAAAAWwAAAHEAAABjAAAAdAAAAGoAAABdAAAAYwAAAFoAAAB1AAAAbQAAAHEAAABrAAAAfwAAAGUAAABeAAAAcwAAAGgAAABwAAAAbAAAAGQAAABfAAAAXAAAAHYAAAByAAAAbQAAAG0AAABsAAAAXQAAAF8AAAB1AAAAdgAAAGoAAABuAAAAYgAAAGgAAABgAAAAdwAAAG8AAABzAAAAbwAAAGEAAABuAAAAYgAAAHQAAABnAAAAdwAAAHAAAABrAAAAZgAAAGUAAAB4AAAAcwAAAHIAAABxAAAAYwAAAHQAAABpAAAAdQAAAGoAAAB5AAAAcgAAAHAAAABkAAAAZgAAAHYAAAB4AAAAbAAAAHMAAABuAAAAawAAAGgAAAB4AAAAdwAAAHAAAAB0AAAAZwAAAHcAAABvAAAAcQAAAGkAAAB5AAAAdQAAAH8AAABtAAAAdgAAAHEAAAB5AAAAagAAAHYAAAB4AAAAbAAAAHIAAAB1AAAAeQAAAG0AAAB3AAAAbwAAAHMAAABuAAAAeQAAAHQAAAB4AAAAeAAAAHMAAAByAAAAcAAAAHkAAAB3AAAAdgAAAHkAAAB0AAAAeAAAAHcAAAB1AAAAcQAAAHYAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAABAAAABQAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAACAAAABQAAAAEAAAAAAAAA/////wEAAAAAAAAAAwAAAAQAAAACAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAFAAAAAQAAAAAAAAAAAAAAAQAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAADAAAAAAAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAADAAAABQAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAEAAAABQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAABAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAQAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAADAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAAAAAABAAAAAwAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAADAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAUAAAABAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAABAAAAAUAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAIAAAAFAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAD/////AQAAAAAAAAADAAAABAAAAAIAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAUAAAABAAAAAAAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAAAAAAEAAAD//////////wEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAADAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAACAAAAAAAAAAAAAAABAAAAAgAAAAYAAAAEAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAcAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAKAAAAAgAAAAAAAAAAAAAAAQAAAAEAAAAFAAAABgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACgAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAACAAAAAAAAAAAAAAABAAAAAwAAAAcAAAAGAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAABwAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAGAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAADgAAAAIAAAAAAAAAAAAAAAEAAAAAAAAACQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACgAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAMAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAIAAAAAAAAAAAAAAAEAAAAEAAAACAAAAAoAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAALAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAACQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAGAAAAAgAAAAAAAAAAAAAAAQAAAAsAAAAPAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAOAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAIAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAABQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAgAAAAAAAAAAAAAAAQAAAAwAAAAQAAAADAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAoAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAJAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAPAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAADwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAACAAAAAAAAAAAAAAABAAAACgAAABMAAAAIAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEQAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEQAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAA8AAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAQAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAACQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAIAAAAAAAAAAAAAAAEAAAANAAAAEQAAAA0AAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAARAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAEQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAA0AAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAACAAAAAAAAAAAAAAABAAAADgAAABIAAAAPAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAADwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABIAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAASAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABIAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAATAAAAAgAAAAAAAAAAAAAAAQAAAP//////////EwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEgAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAASAAAAAAAAABgAAAAAAAAAIQAAAAAAAAAeAAAAAAAAACAAAAADAAAAMQAAAAEAAAAwAAAAAwAAADIAAAADAAAACAAAAAAAAAAFAAAABQAAAAoAAAAFAAAAFgAAAAAAAAAQAAAAAAAAABIAAAAAAAAAKQAAAAEAAAAhAAAAAAAAAB4AAAAAAAAABAAAAAAAAAAAAAAABQAAAAIAAAAFAAAADwAAAAEAAAAIAAAAAAAAAAUAAAAFAAAAHwAAAAEAAAAWAAAAAAAAABAAAAAAAAAAAgAAAAAAAAAGAAAAAAAAAA4AAAAAAAAACgAAAAAAAAALAAAAAAAAABEAAAADAAAAGAAAAAEAAAAXAAAAAwAAABkAAAADAAAAAAAAAAAAAAABAAAABQAAAAkAAAAFAAAABQAAAAAAAAACAAAAAAAAAAYAAAAAAAAAEgAAAAEAAAAKAAAAAAAAAAsAAAAAAAAABAAAAAEAAAADAAAABQAAAAcAAAAFAAAACAAAAAEAAAAAAAAAAAAAAAEAAAAFAAAAEAAAAAEAAAAFAAAAAAAAAAIAAAAAAAAABwAAAAAAAAAVAAAAAAAAACYAAAAAAAAACQAAAAAAAAATAAAAAAAAACIAAAADAAAADgAAAAEAAAAUAAAAAwAAACQAAAADAAAAAwAAAAAAAAANAAAABQAAAB0AAAAFAAAAAQAAAAAAAAAHAAAAAAAAABUAAAAAAAAABgAAAAEAAAAJAAAAAAAAABMAAAAAAAAABAAAAAIAAAAMAAAABQAAABoAAAAFAAAAAAAAAAEAAAADAAAAAAAAAA0AAAAFAAAAAgAAAAEAAAABAAAAAAAAAAcAAAAAAAAAGgAAAAAAAAAqAAAAAAAAADoAAAAAAAAAHQAAAAAAAAArAAAAAAAAAD4AAAADAAAAJgAAAAEAAAAvAAAAAwAAAEAAAAADAAAADAAAAAAAAAAcAAAABQAAACwAAAAFAAAADQAAAAAAAAAaAAAAAAAAACoAAAAAAAAAFQAAAAEAAAAdAAAAAAAAACsAAAAAAAAABAAAAAMAAAAPAAAABQAAAB8AAAAFAAAAAwAAAAEAAAAMAAAAAAAAABwAAAAFAAAABwAAAAEAAAANAAAAAAAAABoAAAAAAAAAHwAAAAAAAAApAAAAAAAAADEAAAAAAAAALAAAAAAAAAA1AAAAAAAAAD0AAAADAAAAOgAAAAEAAABBAAAAAwAAAEsAAAADAAAADwAAAAAAAAAWAAAABQAAACEAAAAFAAAAHAAAAAAAAAAfAAAAAAAAACkAAAAAAAAAKgAAAAEAAAAsAAAAAAAAADUAAAAAAAAABAAAAAQAAAAIAAAABQAAABAAAAAFAAAADAAAAAEAAAAPAAAAAAAAABYAAAAFAAAAGgAAAAEAAAAcAAAAAAAAAB8AAAAAAAAAMgAAAAAAAAAwAAAAAAAAADEAAAADAAAAIAAAAAAAAAAeAAAAAwAAACEAAAADAAAAGAAAAAMAAAASAAAAAwAAABAAAAADAAAARgAAAAAAAABDAAAAAAAAAEIAAAADAAAANAAAAAMAAAAyAAAAAAAAADAAAAAAAAAAJQAAAAMAAAAgAAAAAAAAAB4AAAADAAAAUwAAAAAAAABXAAAAAwAAAFUAAAADAAAASgAAAAMAAABGAAAAAAAAAEMAAAAAAAAAOQAAAAEAAAA0AAAAAwAAADIAAAAAAAAAGQAAAAAAAAAXAAAAAAAAABgAAAADAAAAEQAAAAAAAAALAAAAAwAAAAoAAAADAAAADgAAAAMAAAAGAAAAAwAAAAIAAAADAAAALQAAAAAAAAAnAAAAAAAAACUAAAADAAAAIwAAAAMAAAAZAAAAAAAAABcAAAAAAAAAGwAAAAMAAAARAAAAAAAAAAsAAAADAAAAPwAAAAAAAAA7AAAAAwAAADkAAAADAAAAOAAAAAMAAAAtAAAAAAAAACcAAAAAAAAALgAAAAMAAAAjAAAAAwAAABkAAAAAAAAAJAAAAAAAAAAUAAAAAAAAAA4AAAADAAAAIgAAAAAAAAATAAAAAwAAAAkAAAADAAAAJgAAAAMAAAAVAAAAAwAAAAcAAAADAAAANwAAAAAAAAAoAAAAAAAAABsAAAADAAAANgAAAAMAAAAkAAAAAAAAABQAAAAAAAAAMwAAAAMAAAAiAAAAAAAAABMAAAADAAAASAAAAAAAAAA8AAAAAwAAAC4AAAADAAAASQAAAAMAAAA3AAAAAAAAACgAAAAAAAAARwAAAAMAAAA2AAAAAwAAACQAAAAAAAAAQAAAAAAAAAAvAAAAAAAAACYAAAADAAAAPgAAAAAAAAArAAAAAwAAAB0AAAADAAAAOgAAAAMAAAAqAAAAAwAAABoAAAADAAAAVAAAAAAAAABFAAAAAAAAADMAAAADAAAAUgAAAAMAAABAAAAAAAAAAC8AAAAAAAAATAAAAAMAAAA+AAAAAAAAACsAAAADAAAAYQAAAAAAAABZAAAAAwAAAEcAAAADAAAAYgAAAAMAAABUAAAAAAAAAEUAAAAAAAAAYAAAAAMAAABSAAAAAwAAAEAAAAAAAAAASwAAAAAAAABBAAAAAAAAADoAAAADAAAAPQAAAAAAAAA1AAAAAwAAACwAAAADAAAAMQAAAAMAAAApAAAAAwAAAB8AAAADAAAAXgAAAAAAAABWAAAAAAAAAEwAAAADAAAAUQAAAAMAAABLAAAAAAAAAEEAAAAAAAAAQgAAAAMAAAA9AAAAAAAAADUAAAADAAAAawAAAAAAAABoAAAAAwAAAGAAAAADAAAAZQAAAAMAAABeAAAAAAAAAFYAAAAAAAAAVQAAAAMAAABRAAAAAwAAAEsAAAAAAAAAOQAAAAAAAAA7AAAAAAAAAD8AAAADAAAASgAAAAAAAABOAAAAAwAAAE8AAAADAAAAUwAAAAMAAABcAAAAAwAAAF8AAAADAAAAJQAAAAAAAAAnAAAAAwAAAC0AAAADAAAANAAAAAAAAAA5AAAAAAAAADsAAAAAAAAARgAAAAMAAABKAAAAAAAAAE4AAAADAAAAGAAAAAAAAAAXAAAAAwAAABkAAAADAAAAIAAAAAMAAAAlAAAAAAAAACcAAAADAAAAMgAAAAMAAAA0AAAAAAAAADkAAAAAAAAALgAAAAAAAAA8AAAAAAAAAEgAAAADAAAAOAAAAAAAAABEAAAAAwAAAFAAAAADAAAAPwAAAAMAAABNAAAAAwAAAFoAAAADAAAAGwAAAAAAAAAoAAAAAwAAADcAAAADAAAAIwAAAAAAAAAuAAAAAAAAADwAAAAAAAAALQAAAAMAAAA4AAAAAAAAAEQAAAADAAAADgAAAAAAAAAUAAAAAwAAACQAAAADAAAAEQAAAAMAAAAbAAAAAAAAACgAAAADAAAAGQAAAAMAAAAjAAAAAAAAAC4AAAAAAAAARwAAAAAAAABZAAAAAAAAAGEAAAADAAAASQAAAAAAAABbAAAAAwAAAGcAAAADAAAASAAAAAMAAABYAAAAAwAAAGkAAAADAAAAMwAAAAAAAABFAAAAAwAAAFQAAAADAAAANgAAAAAAAABHAAAAAAAAAFkAAAAAAAAANwAAAAMAAABJAAAAAAAAAFsAAAADAAAAJgAAAAAAAAAvAAAAAwAAAEAAAAADAAAAIgAAAAMAAAAzAAAAAAAAAEUAAAADAAAAJAAAAAMAAAA2AAAAAAAAAEcAAAAAAAAAYAAAAAAAAABoAAAAAAAAAGsAAAADAAAAYgAAAAAAAABuAAAAAwAAAHMAAAADAAAAYQAAAAMAAABvAAAAAwAAAHcAAAADAAAATAAAAAAAAABWAAAAAwAAAF4AAAADAAAAUgAAAAAAAABgAAAAAAAAAGgAAAAAAAAAVAAAAAMAAABiAAAAAAAAAG4AAAADAAAAOgAAAAAAAABBAAAAAwAAAEsAAAADAAAAPgAAAAMAAABMAAAAAAAAAFYAAAADAAAAQAAAAAMAAABSAAAAAAAAAGAAAAAAAAAAVQAAAAAAAABXAAAAAAAAAFMAAAADAAAAZQAAAAAAAABmAAAAAwAAAGQAAAADAAAAawAAAAMAAABwAAAAAwAAAHIAAAADAAAAQgAAAAAAAABDAAAAAwAAAEYAAAADAAAAUQAAAAAAAABVAAAAAAAAAFcAAAAAAAAAXgAAAAMAAABlAAAAAAAAAGYAAAADAAAAMQAAAAAAAAAwAAAAAwAAADIAAAADAAAAPQAAAAMAAABCAAAAAAAAAEMAAAADAAAASwAAAAMAAABRAAAAAAAAAFUAAAAAAAAAXwAAAAAAAABcAAAAAAAAAFMAAAAAAAAATwAAAAAAAABOAAAAAAAAAEoAAAADAAAAPwAAAAEAAAA7AAAAAwAAADkAAAADAAAAbQAAAAAAAABsAAAAAAAAAGQAAAAFAAAAXQAAAAEAAABfAAAAAAAAAFwAAAAAAAAATQAAAAEAAABPAAAAAAAAAE4AAAAAAAAAdQAAAAQAAAB2AAAABQAAAHIAAAAFAAAAagAAAAEAAABtAAAAAAAAAGwAAAAAAAAAWgAAAAEAAABdAAAAAQAAAF8AAAAAAAAAWgAAAAAAAABNAAAAAAAAAD8AAAAAAAAAUAAAAAAAAABEAAAAAAAAADgAAAADAAAASAAAAAEAAAA8AAAAAwAAAC4AAAADAAAAagAAAAAAAABdAAAAAAAAAE8AAAAFAAAAYwAAAAEAAABaAAAAAAAAAE0AAAAAAAAAWAAAAAEAAABQAAAAAAAAAEQAAAAAAAAAdQAAAAMAAABtAAAABQAAAF8AAAAFAAAAcQAAAAEAAABqAAAAAAAAAF0AAAAAAAAAaQAAAAEAAABjAAAAAQAAAFoAAAAAAAAAaQAAAAAAAABYAAAAAAAAAEgAAAAAAAAAZwAAAAAAAABbAAAAAAAAAEkAAAADAAAAYQAAAAEAAABZAAAAAwAAAEcAAAADAAAAcQAAAAAAAABjAAAAAAAAAFAAAAAFAAAAdAAAAAEAAABpAAAAAAAAAFgAAAAAAAAAbwAAAAEAAABnAAAAAAAAAFsAAAAAAAAAdQAAAAIAAABqAAAABQAAAFoAAAAFAAAAeQAAAAEAAABxAAAAAAAAAGMAAAAAAAAAdwAAAAEAAAB0AAAAAQAAAGkAAAAAAAAAdwAAAAAAAABvAAAAAAAAAGEAAAAAAAAAcwAAAAAAAABuAAAAAAAAAGIAAAADAAAAawAAAAEAAABoAAAAAwAAAGAAAAADAAAAeQAAAAAAAAB0AAAAAAAAAGcAAAAFAAAAeAAAAAEAAAB3AAAAAAAAAG8AAAAAAAAAcAAAAAEAAABzAAAAAAAAAG4AAAAAAAAAdQAAAAEAAABxAAAABQAAAGkAAAAFAAAAdgAAAAEAAAB5AAAAAAAAAHQAAAAAAAAAcgAAAAEAAAB4AAAAAQAAAHcAAAAAAAAAcgAAAAAAAABwAAAAAAAAAGsAAAAAAAAAZAAAAAAAAABmAAAAAAAAAGUAAAADAAAAUwAAAAEAAABXAAAAAwAAAFUAAAADAAAAdgAAAAAAAAB4AAAAAAAAAHMAAAAFAAAAbAAAAAEAAAByAAAAAAAAAHAAAAAAAAAAXAAAAAEAAABkAAAAAAAAAGYAAAAAAAAAdQAAAAAAAAB5AAAABQAAAHcAAAAFAAAAbQAAAAEAAAB2AAAAAAAAAHgAAAAAAAAAXwAAAAEAAABsAAAAAQAAAHIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAGAAAAAgAAAAUAAAABAAAABAAAAAAAAAAAAAAABQAAAAMAAAABAAAABgAAAAQAAAACAAAAAAAAAH6iBfbytuk/Gq6akm/58z/Xrm0Liez0P5doSdOpSwRAWs602ULg8D/dT7Rcbo/1v1N1RQHFNOM/g9Snx7HW3L8HWsP8Q3jfP6VwOLosutk/9rjk1YQcxj+gnmKMsNn6P/HDeuPFY+M/YHwDjqKhB0Ci19/fCVrbP4UxKkDWOP6/pvljWa09tL9wi7wrQXjnv/Z6yLImkM2/3yTlOzY14D+m+WNZrT20PzwKVQnrQwNA9nrIsiaQzT/g40rFrRQFwPa45NWEHMa/kbslHEZq97/xw3rjxWPjv4cLC2SMBci/otff3wla27+rKF5oIAv0P1N1RQHFNOO/iDJPGyWHBUAHWsP8Q3jfvwQf/by16gXAfqIF9vK26b8XrO0Vh0r+v9eubQuJ7PS/BxLrA0ZZ479azrTZQuDwv1MK1EuItPw/yscgV9Z6FkAwHBR2WjQMQJNRzXsQ5vY/GlUHVJYKF0DONuFv2lMNQNCGZ28QJfk/0WUwoIL36D8ggDOMQuATQNqMOeAy/wZAWFYOYM+M2z/LWC4uH3oSQDE+LyTsMgRAkJzhRGWFGEDd4soovCQQQKqk0DJMEP8/rGmNdwOLBUAW2X/9xCbjP4hu3dcqJhNAzuYItRvdB0CgzW3zJW/sPxotm/Y2TxRAQAk9XmdDDEC1Kx9MKgT3P1M+NctcghZAFVqcLlb0C0Bgzd3sB2b2P77mZDPUWhZAFROHJpUGCEDAfma5CxXtPz1DWq/zYxRAmhYY5824F0DOuQKWSbAOQNCMqrvu3fs/L6DR22K2wT9nAAxPBU8RQGiN6mW43AFAZhu25b633D8c1YgmzowSQNM25BRKWARArGS08/lNxD+LFssHwmMRQLC5aNcxBgJABL9HT0WRF0CjCmJmOGEOQHsuaVzMP/s/TWJCaGGwBUCeu1PAPLzjP9nqN9DZOBNAKE4JcydbCkCGtbd1qjPzP8dgm9U8jhVAtPeKTkVwDkCeCLss5l37P401XMPLmBdAFd29VMVQDUBg0yA55h75Pz6odcYLCRdApBM4rBrkAkDyAVWgQxbRP4XDMnK20hFAymLlF7EmzD8GUgo9XBHlP3lbK7T9COc/k+OhPthhy7+YGEpnrOvCPzBFhLs15u4/epbqB6H4uz9IuuLF5svev6lzLKY31es/CaQ0envF5z8ZY0xlUADXv7zaz7HYEuI/CfbK1sn16T8uAQfWwxLWPzKn/YuFN94/5KdbC1AFu793fyCSnlfvPzK2y4doAMY/NRg5t1/X6b/shq4QJaHDP5yNIAKPOeI/vpn7BSE30r/X4YQrO6nrv78Ziv/Thto/DqJ1Y6+y5z9l51NaxFrlv8QlA65HOLS/86dxiEc96z+Hj0+LFjneP6LzBZ8LTc2/DaJ1Y6+y579l51NaxFrlP8QlA65HOLQ/8qdxiEc967+Jj0+LFjnev6LzBZ8LTc0/1qdbC1AFuz93fyCSnlfvvzK2y4doAMa/NRg5t1/X6T/vhq4QJaHDv5yNIAKPOeK/wJn7BSE30j/W4YQrO6nrP78Ziv/Thtq/CaQ0envF578XY0xlUADXP7zaz7HYEuK/CvbK1sn16b8rAQfWwxLWvzKn/YuFN96/zWLlF7EmzL8GUgo9XBHlv3lbK7T9COe/kOOhPthhyz+cGEpnrOvCvzBFhLs15u6/c5bqB6H4u79IuuLF5sveP6lzLKY31eu/AQAAAP////8HAAAA/////zEAAAD/////VwEAAP////9hCQAA/////6dBAAD/////kcsBAP/////3kAwA/////8H2VwAAAAAAAAAAAAAAAAACAAAA/////w4AAAD/////YgAAAP////+uAgAA/////8ISAAD/////ToMAAP////8ilwMA/////+4hGQD/////gu2vAAAAAAAAAAAAAAAAAAAAAAACAAAA//////////8BAAAAAwAAAP//////////////////////////////////////////////////////////////////////////AQAAAAAAAAACAAAA////////////////AwAAAP//////////////////////////////////////////////////////////////////////////AQAAAAAAAAACAAAA////////////////AwAAAP//////////////////////////////////////////////////////////////////////////AQAAAAAAAAACAAAA////////////////AwAAAP//////////////////////////////////////////////////////////AgAAAP//////////AQAAAAAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD/////////////////////AQAAAP///////////////wIAAAD///////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP///////////////////////////////wIAAAD///////////////8BAAAA/////////////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAABAAAA//////////8CAAAA//////////////////////////////////////////////////////////8DAAAA////////////////AgAAAAAAAAABAAAA//////////////////////////////////////////////////////////////////////////8DAAAA////////////////AgAAAAAAAAABAAAA//////////////////////////////////////////////////////////////////////////8DAAAA////////////////AgAAAAAAAAABAAAA//////////////////////////////////////////////////////////////////////////8DAAAAAQAAAP//////////AgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAACAAAAAAAAAAIAAAABAAAAAQAAAAIAAAACAAAAAAAAAAUAAAAFAAAAAAAAAAIAAAACAAAAAwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAgAAAAEAAAACAAAAAgAAAAIAAAAAAAAABQAAAAYAAAAAAAAAAgAAAAIAAAADAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAgAAAAAAAAACAAAAAQAAAAMAAAACAAAAAgAAAAAAAAAFAAAABwAAAAAAAAACAAAAAgAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAACAAAAAAAAAAIAAAABAAAABAAAAAIAAAACAAAAAAAAAAUAAAAIAAAAAAAAAAIAAAACAAAAAwAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAIAAAAAAAAAAgAAAAEAAAAAAAAAAgAAAAIAAAAAAAAABQAAAAkAAAAAAAAAAgAAAAIAAAADAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAgAAAAIAAAAAAAAAAwAAAA4AAAACAAAAAAAAAAIAAAADAAAAAAAAAAAAAAACAAAAAgAAAAMAAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAACAAAAAgAAAAAAAAADAAAACgAAAAIAAAAAAAAAAgAAAAMAAAABAAAAAAAAAAIAAAACAAAAAwAAAAcAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAIAAAACAAAAAAAAAAMAAAALAAAAAgAAAAAAAAACAAAAAwAAAAIAAAAAAAAAAgAAAAIAAAADAAAACAAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAgAAAAIAAAAAAAAAAwAAAAwAAAACAAAAAAAAAAIAAAADAAAAAwAAAAAAAAACAAAAAgAAAAMAAAAJAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAACAAAAAgAAAAAAAAADAAAADQAAAAIAAAAAAAAAAgAAAAMAAAAEAAAAAAAAAAIAAAACAAAAAwAAAAoAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAIAAAACAAAAAAAAAAMAAAAGAAAAAgAAAAAAAAACAAAAAwAAAA8AAAAAAAAAAgAAAAIAAAADAAAACwAAAAAAAAAAAAAAAAAAAAAAAAAGAAAAAgAAAAIAAAAAAAAAAwAAAAcAAAACAAAAAAAAAAIAAAADAAAAEAAAAAAAAAACAAAAAgAAAAMAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAACAAAAAgAAAAAAAAADAAAACAAAAAIAAAAAAAAAAgAAAAMAAAARAAAAAAAAAAIAAAACAAAAAwAAAA0AAAAAAAAAAAAAAAAAAAAAAAAACAAAAAIAAAACAAAAAAAAAAMAAAAJAAAAAgAAAAAAAAACAAAAAwAAABIAAAAAAAAAAgAAAAIAAAADAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAJAAAAAgAAAAIAAAAAAAAAAwAAAAUAAAACAAAAAAAAAAIAAAADAAAAEwAAAAAAAAACAAAAAgAAAAMAAAAPAAAAAAAAAAAAAAAAAAAAAAAAABAAAAACAAAAAAAAAAIAAAABAAAAEwAAAAIAAAACAAAAAAAAAAUAAAAKAAAAAAAAAAIAAAACAAAAAwAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEQAAAAIAAAAAAAAAAgAAAAEAAAAPAAAAAgAAAAIAAAAAAAAABQAAAAsAAAAAAAAAAgAAAAIAAAADAAAAEQAAAAAAAAAAAAAAAAAAAAAAAAASAAAAAgAAAAAAAAACAAAAAQAAABAAAAACAAAAAgAAAAAAAAAFAAAADAAAAAAAAAACAAAAAgAAAAMAAAASAAAAAAAAAAAAAAAAAAAAAAAAABMAAAACAAAAAAAAAAIAAAABAAAAEQAAAAIAAAACAAAAAAAAAAUAAAANAAAAAAAAAAIAAAACAAAAAwAAABMAAAAAAAAAAAAAAAAAAAAAAAAADwAAAAIAAAAAAAAAAgAAAAEAAAASAAAAAgAAAAIAAAAAAAAABQAAAA4AAAAAAAAAAgAAAAIAAAADAAAAAgAAAAEAAAAAAAAAAQAAAAIAAAAAAAAAAAAAAAIAAAABAAAAAAAAAAEAAAACAAAAAQAAAAAAAAACAAAAAAAAAAUAAAAEAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAFAAAABAAAAAAAAAABAAAABQAAAAQAAAAAAAAABQAAAAAAAAACAAAAAQAAAAAAAAABAAAAAgAAAAAAAAAAAAAAAgAAAAEAAAAAAAAAAQAAAAIAAAABAAAAAAAAAAIAAAACAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAAEAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAFAAAABAAAAAAAAAABAAAABQAAAAQAAAAAAAAABQAAAAUAAAAAAAAAAQAAAAAAAAAAAAAAOgehWlKfUEEz1zLi+JsiQa2og3wcMfVAWCbHorc0yEDi+Yn/Y6mbQJ11/mfsnG9At6bnG4UQQkBvMCQWKqUUQJVmwwswmOc/3hVgVBL3uj//qqOEOdGOPw/WDN4gnGE/H3ANkCUgND+AA8btKgAHPwTXBqJVSdo+XfRQAqsKrj4fc+zLYbSPQklEmCZHv2FCUP+uDso1NEKYtPhwphUHQptxnyFXYdpB7CddZAMmrkGAt1AxSTqBQUibBVdTsFNBSuX3MV+AJkFocv82SLf5QAqmgj7AY81A23VDSEnLoEDGEJVSeDFzQDYrqvBk70VA8U157pcRGUBWfEF+ZKbsP7KBdLHZTpFAqKYk69AqekDbeGY41MdjQD8AZzHK501A1vcrrjubNkD5LnquvBYhQCbiRRD71QlAqt72EbOH8z8Eu+jL1YbdP4uaox/xUcY/abedg1XfsD+BsUdzJ4KZP5wE9YFySIM/rW1kAKMpbT+rZFthVRhWPy4PKlXIs0A/qMZLlwDnMEHByqEF0I0ZQQYSFD8lUQNBPpY+dFs07UAH8BZImBPWQN9RY0I0sMBA2T7kLfc6qUByFYvfhBKTQMq+0Mis1XxA0XQbeQXMZUBJJ5aEGXpQQP7/SY0a6ThAaMD92b/UIkAs8s8yqXoMQNIegOvCk/U/aOi7NZJP4D8AAAAA/////wAAAAAAAAAAAAAAAAAAAAAAAAAA/////////////////////////////////////wAAAAD/////AAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAA/////wAAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAP////8AAAAABQAAAAAAAAAAAAAAAAAAAAAAAAD/////BQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAA/////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP////////////////////////////////////8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/////////////////////////////////////AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAABQAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/////////////////////////////////////wAAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAQAAAAAAAAABAAAAAAAAAAUAAAABAAAAAQAAAAAAAAAAAAAAAQAAAAEAAAAAAAAAAQAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAEAAQAAAQEAAAAAAAEAAAABAAAAAQABAAAAAAAAAAAAAAAAAAAAAAcAAAAHAAAAAQAAAAIAAAAEAAAAAwAAAAAAAAAAAAAABwAAAAMAAAABAAAAAgAAAAUAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAAAAAACAAAAAQAAAAMAAAAOAAAABgAAAAsAAAACAAAABwAAAAEAAAAYAAAABQAAAAoAAAABAAAABgAAAAAAAAAmAAAABwAAAAwAAAADAAAACAAAAAIAAAAxAAAACQAAAA4AAAAAAAAABQAAAAQAAAA6AAAACAAAAA0AAAAEAAAACQAAAAMAAAA/AAAACwAAAAYAAAAPAAAACgAAABAAAABIAAAADAAAAAcAAAAQAAAACwAAABEAAABTAAAACgAAAAUAAAATAAAADgAAAA8AAABhAAAADQAAAAgAAAARAAAADAAAABIAAABrAAAADgAAAAkAAAASAAAADQAAABMAAAB1AAAADwAAABMAAAARAAAAEgAAABAAAAAGAAAAAgAAAAMAAAAFAAAABAAAAAAAAAAAAAAAAAAAAAYAAAACAAAAAwAAAAEAAAAFAAAABAAAAAAAAAAAAAAABwAAAAUAAAADAAAABAAAAAEAAAAAAAAAAgAAAAAAAAACAAAAAwAAAAEAAAAFAAAABAAAAAYAAAAAAAAAAAAAAGFsZ29zLmMAaDNOZWlnaGJvclJvdGF0aW9ucwBjb29yZGlqay5jAF91cEFwN0NoZWNrZWQAX3VwQXA3ckNoZWNrZWQAZGlyZWN0ZWRFZGdlLmMAZGlyZWN0ZWRFZGdlVG9Cb3VuZGFyeQBhZGphY2VudEZhY2VEaXJbdG1wRmlqay5mYWNlXVtmaWprLmZhY2VdID09IEtJAGZhY2VpamsuYwBfZmFjZUlqa1BlbnRUb0NlbGxCb3VuZGFyeQBhZGphY2VudEZhY2VEaXJbY2VudGVySUpLLmZhY2VdW2ZhY2UyXSA9PSBLSQBfZmFjZUlqa1RvQ2VsbEJvdW5kYXJ5AGgzSW5kZXguYwBjb21wYWN0Q2VsbHMAbGF0TG5nVG9DZWxsAGNlbGxUb0NoaWxkUG9zAHZhbGlkYXRlQ2hpbGRQb3MAbGF0TG5nLmMAY2VsbEFyZWFSYWRzMgBwb2x5Z29uLT5uZXh0ID09IE5VTEwAbGlua2VkR2VvLmMAYWRkTmV3TGlua2VkUG9seWdvbgBuZXh0ICE9IE5VTEwAbG9vcCAhPSBOVUxMAGFkZE5ld0xpbmtlZExvb3AAcG9seWdvbi0+Zmlyc3QgPT0gTlVMTABhZGRMaW5rZWRMb29wAGNvb3JkICE9IE5VTEwAYWRkTGlua2VkQ29vcmQAbG9vcC0+Zmlyc3QgPT0gTlVMTABpbm5lckxvb3BzICE9IE5VTEwAbm9ybWFsaXplTXVsdGlQb2x5Z29uAGJib3hlcyAhPSBOVUxMAGNhbmRpZGF0ZXMgIT0gTlVMTABmaW5kUG9seWdvbkZvckhvbGUAY2FuZGlkYXRlQkJveGVzICE9IE5VTEwAcmV2RGlyICE9IElOVkFMSURfRElHSVQAbG9jYWxpai5jAGNlbGxUb0xvY2FsSWprAGJhc2VDZWxsICE9IG9yaWdpbkJhc2VDZWxsACEob3JpZ2luT25QZW50ICYmIGluZGV4T25QZW50KQBiYXNlQ2VsbCA9PSBvcmlnaW5CYXNlQ2VsbABiYXNlQ2VsbCAhPSBJTlZBTElEX0JBU0VfQ0VMTABsb2NhbElqa1RvQ2VsbAAhX2lzQmFzZUNlbGxQZW50YWdvbihiYXNlQ2VsbCkAYmFzZUNlbGxSb3RhdGlvbnMgPj0gMABncmlkUGF0aENlbGxzADAAdmVydGV4LmMAY2VsbFRvVmVydGV4AGdyYXBoLT5idWNrZXRzICE9IE5VTEwAdmVydGV4R3JhcGguYwBpbml0VmVydGV4R3JhcGgAbm9kZSAhPSBOVUxMAGFkZFZlcnRleE5vZGU=";var f=24144;function w(ge){return ge}function B(ge){var Ce=/\b__Z[\w\d_]+/g;return ge.replace(Ce,function(Qe){var nt=Qe;return Qe===nt?Qe:nt+" ["+Qe+"]"})}function U(){var ge=new Error;if(!ge.stack){try{throw new Error(0)}catch(Ce){ge=Ce}if(!ge.stack)return"(no stack trace available)"}return ge.stack.toString()}function Z(){var ge=U();return t.extraStackTrace&&(ge+=`
`+t.extraStackTrace()),B(ge)}function K(ge,Ce,Qe,nt){Ue("Assertion failed: "+Te(ge)+", at: "+[Ce?Te(Ce):"unknown filename",Qe,nt?Te(nt):"unknown function"])}function se(){return di.length}function oe(ge,Ce,Qe){mi.set(mi.subarray(Ce,Ce+Qe),ge)}function fe(ge){return t.___errno_location&&(Ut[t.___errno_location()>>2]=ge),ge}function ye(ge){Ue("OOM")}function Me(ge){try{var Ce=new ArrayBuffer(ge);return Ce.byteLength!=ge?void 0:(new Int8Array(Ce).set(di),Ae(Ce),ui(Ce),1)}catch{}}function xe(ge){var Ce=se(),Qe=16777216,nt=2147483648-Qe;if(ge>nt)return!1;for(var i=16777216,ue=Math.max(Ce,i);ue<ge;)ue<=536870912?ue=gi(2*ue,Qe):ue=Math.min(gi((3*ue+2147483648)/4,Qe),nt);var Dt=Me(ue);return!!Dt}var ke=typeof atob=="function"?atob:function(ge){var Ce="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Qe="",nt,i,ue,Dt,Vt,Wt,It,Bt=0;ge=ge.replace(/[^A-Za-z0-9\+\/\=]/g,"");do Dt=Ce.indexOf(ge.charAt(Bt++)),Vt=Ce.indexOf(ge.charAt(Bt++)),Wt=Ce.indexOf(ge.charAt(Bt++)),It=Ce.indexOf(ge.charAt(Bt++)),nt=Dt<<2|Vt>>4,i=(Vt&15)<<4|Wt>>2,ue=(Wt&3)<<6|It,Qe=Qe+String.fromCharCode(nt),Wt!==64&&(Qe=Qe+String.fromCharCode(i)),It!==64&&(Qe=Qe+String.fromCharCode(ue));while(Bt<ge.length);return Qe};function be(ge){try{for(var Ce=ke(ge),Qe=new Uint8Array(Ce.length),nt=0;nt<Ce.length;++nt)Qe[nt]=Ce.charCodeAt(nt);return Qe}catch{throw new Error("Converting base64 string to bytes failed.")}}function Ne(ge){if(vn(ge))return be(ge.slice(fr.length))}var Re={Math,Int8Array,Int32Array,Uint8Array,Float32Array,Float64Array},Fe={a:Ue,b:re,c:ee,d:K,e:fe,f:se,g:oe,h:xe,i:ye,j:w,k:B,l:Me,m:U,n:Z,o:f,p:Yt},de=function(ge,Ce,Qe){"almost asm";var nt=new ge.Int8Array(Qe),i=new ge.Int32Array(Qe);new ge.Uint8Array(Qe),new ge.Float32Array(Qe);var ue=new ge.Float64Array(Qe),Dt=Ce.o|0,Vt=Ce.p|0,Wt=ge.Math.floor,It=ge.Math.abs,Bt=ge.Math.sqrt,hi=ge.Math.pow,Zt=ge.Math.cos,ei=ge.Math.sin,Ti=ge.Math.tan,Yi=ge.Math.acos,wn=ge.Math.asin,An=ge.Math.atan,en=ge.Math.atan2,ar=ge.Math.ceil,pi=ge.Math.imul,Zn=ge.Math.min,Xi=ge.Math.max,mt=ge.Math.clz32,bi=Ce.b,At=Ce.c,Ni=Ce.d,lr=Ce.e,es=Ce.f,kr=Ce.g,ht=Ce.h,Tn=Ce.i,it=24160;function nr(a){return nt=new Int8Array(a),i=new Int32Array(a),ue=new Float64Array(a),Qe=a,!0}function ks(a){a=a|0;var o=0;return o=it,it=it+a|0,it=it+15&-16,o|0}function Es(){return it|0}function Ta(a){a=a|0,it=a}function Hs(a,o){a=a|0,it=a}function co(a,o){a=a|0,o=o|0;var h=0,p=0,v=0;return(a|0)<0?(o=2,o|0):(a|0)>13780509?(o=Pn(15,o)|0,o|0):(h=((a|0)<0)<<31>>31,v=Se(a|0,h|0,3,0)|0,p=At()|0,h=S(a|0,h|0,1,0)|0,h=Se(v|0,p|0,h|0,At()|0)|0,h=S(h|0,At()|0,1,0)|0,a=At()|0,i[o>>2]=h,i[o+4>>2]=a,o=0,o|0)}function Pa(a,o,h,p){return a=a|0,o=o|0,h=h|0,p=p|0,os(a,o,h,p,0)|0}function os(a,o,h,p,v){a=a|0,o=o|0,h=h|0,p=p|0,v=v|0;var E=0,z=0,F=0,Y=0,J=0;if(Y=it,it=it+16|0,z=Y,!(an(a,o,h,p,v)|0))return p=0,it=Y,p|0;do if((h|0)>=0){if((h|0)>13780509){if(E=Pn(15,z)|0,E|0)break;F=z,z=i[F>>2]|0,F=i[F+4>>2]|0}else E=((h|0)<0)<<31>>31,J=Se(h|0,E|0,3,0)|0,F=At()|0,E=S(h|0,E|0,1,0)|0,E=Se(J|0,F|0,E|0,At()|0)|0,E=S(E|0,At()|0,1,0)|0,F=At()|0,i[z>>2]=E,i[z+4>>2]=F,z=E;if(I(p|0,0,z<<3|0)|0,v|0){I(v|0,0,z<<2|0)|0,E=ts(a,o,h,p,v,z,F,0)|0;break}E=b(z,4)|0,E?(J=ts(a,o,h,p,E,z,F,0)|0,_(E),E=J):E=13}else E=2;while(!1);return J=E,it=Y,J|0}function an(a,o,h,p,v){a=a|0,o=o|0,h=h|0,p=p|0,v=v|0;var E=0,z=0,F=0,Y=0,J=0,ve=0,Ie=0,Oe=0,He=0,We=0,st=0;if(st=it,it=it+16|0,He=st,We=st+8|0,Oe=He,i[Oe>>2]=a,i[Oe+4>>2]=o,(h|0)<0)return We=2,it=st,We|0;if(E=p,i[E>>2]=a,i[E+4>>2]=o,E=(v|0)!=0,E&&(i[v>>2]=0),$n(a,o)|0)return We=9,it=st,We|0;i[We>>2]=0;e:do if((h|0)>=1)if(E)for(ve=1,J=0,Ie=0,Oe=1,E=a;;){if(!(J|Ie)){if(E=yr(E,o,4,We,He)|0,E|0)break e;if(o=He,E=i[o>>2]|0,o=i[o+4>>2]|0,$n(E,o)|0){E=9;break e}}if(E=yr(E,o,i[22384+(Ie<<2)>>2]|0,We,He)|0,E|0)break e;if(o=He,E=i[o>>2]|0,o=i[o+4>>2]|0,a=p+(ve<<3)|0,i[a>>2]=E,i[a+4>>2]=o,i[v+(ve<<2)>>2]=Oe,a=J+1|0,z=(a|0)==(Oe|0),F=Ie+1|0,Y=(F|0)==6,$n(E,o)|0){E=9;break e}if(Oe=Oe+(Y&z&1)|0,(Oe|0)>(h|0)){E=0;break}else ve=ve+1|0,J=z?0:a,Ie=z?Y?0:F:Ie}else for(ve=1,J=0,Ie=0,Oe=1,E=a;;){if(!(J|Ie)){if(E=yr(E,o,4,We,He)|0,E|0)break e;if(o=He,E=i[o>>2]|0,o=i[o+4>>2]|0,$n(E,o)|0){E=9;break e}}if(E=yr(E,o,i[22384+(Ie<<2)>>2]|0,We,He)|0,E|0)break e;if(o=He,E=i[o>>2]|0,o=i[o+4>>2]|0,a=p+(ve<<3)|0,i[a>>2]=E,i[a+4>>2]=o,a=J+1|0,z=(a|0)==(Oe|0),F=Ie+1|0,Y=(F|0)==6,$n(E,o)|0){E=9;break e}if(Oe=Oe+(Y&z&1)|0,(Oe|0)>(h|0)){E=0;break}else ve=ve+1|0,J=z?0:a,Ie=z?Y?0:F:Ie}else E=0;while(!1);return We=E,it=st,We|0}function ts(a,o,h,p,v,E,z,F){a=a|0,o=o|0,h=h|0,p=p|0,v=v|0,E=E|0,z=z|0,F=F|0;var Y=0,J=0,ve=0,Ie=0,Oe=0,He=0,We=0,st=0,wt=0,Et=0;if(st=it,it=it+16|0,He=st+8|0,We=st,Y=$e(a|0,o|0,E|0,z|0)|0,ve=At()|0,Ie=p+(Y<<3)|0,wt=Ie,Et=i[wt>>2]|0,wt=i[wt+4>>2]|0,J=(Et|0)==(a|0)&(wt|0)==(o|0),!((Et|0)==0&(wt|0)==0|J))do Y=S(Y|0,ve|0,1,0)|0,Y=Ge(Y|0,At()|0,E|0,z|0)|0,ve=At()|0,Ie=p+(Y<<3)|0,Et=Ie,wt=i[Et>>2]|0,Et=i[Et+4>>2]|0,J=(wt|0)==(a|0)&(Et|0)==(o|0);while(!((wt|0)==0&(Et|0)==0|J));if(Y=v+(Y<<2)|0,J&&(i[Y>>2]|0)<=(F|0)||(Et=Ie,i[Et>>2]=a,i[Et+4>>2]=o,i[Y>>2]=F,(F|0)>=(h|0)))return Et=0,it=st,Et|0;switch(J=F+1|0,i[He>>2]=0,Y=yr(a,o,2,He,We)|0,Y|0){case 9:{Oe=9;break}case 0:{Y=We,Y=ts(i[Y>>2]|0,i[Y+4>>2]|0,h,p,v,E,z,J)|0,Y||(Oe=9);break}}e:do if((Oe|0)==9){switch(i[He>>2]=0,Y=yr(a,o,3,He,We)|0,Y|0){case 9:break;case 0:{if(Y=We,Y=ts(i[Y>>2]|0,i[Y+4>>2]|0,h,p,v,E,z,J)|0,Y|0)break e;break}default:break e}switch(i[He>>2]=0,Y=yr(a,o,1,He,We)|0,Y|0){case 9:break;case 0:{if(Y=We,Y=ts(i[Y>>2]|0,i[Y+4>>2]|0,h,p,v,E,z,J)|0,Y|0)break e;break}default:break e}switch(i[He>>2]=0,Y=yr(a,o,5,He,We)|0,Y|0){case 9:break;case 0:{if(Y=We,Y=ts(i[Y>>2]|0,i[Y+4>>2]|0,h,p,v,E,z,J)|0,Y|0)break e;break}default:break e}switch(i[He>>2]=0,Y=yr(a,o,4,He,We)|0,Y|0){case 9:break;case 0:{if(Y=We,Y=ts(i[Y>>2]|0,i[Y+4>>2]|0,h,p,v,E,z,J)|0,Y|0)break e;break}default:break e}switch(i[He>>2]=0,Y=yr(a,o,6,He,We)|0,Y|0){case 9:break;case 0:{if(Y=We,Y=ts(i[Y>>2]|0,i[Y+4>>2]|0,h,p,v,E,z,J)|0,Y|0)break e;break}default:break e}return Et=0,it=st,Et|0}while(!1);return Et=Y,it=st,Et|0}function yr(a,o,h,p,v){a=a|0,o=o|0,h=h|0,p=p|0,v=v|0;var E=0,z=0,F=0,Y=0,J=0,ve=0,Ie=0,Oe=0,He=0,We=0;if(h>>>0>6)return v=1,v|0;if(Ie=(i[p>>2]|0)%6|0,i[p>>2]=Ie,(Ie|0)>0){E=0;do h=aa(h)|0,E=E+1|0;while((E|0)<(i[p>>2]|0))}if(Ie=lt(a|0,o|0,45)|0,At()|0,ve=Ie&127,ve>>>0>121)return v=5,v|0;Y=vs(a,o)|0,E=lt(a|0,o|0,52)|0,At()|0,E=E&15;e:do if(!E)J=8;else{for(;;){if(z=(15-E|0)*3|0,F=lt(a|0,o|0,z|0)|0,At()|0,F=F&7,(F|0)==7){o=5;break}if(We=(Kr(E)|0)==0,E=E+-1|0,Oe=ct(7,0,z|0)|0,o=o&~(At()|0),He=ct(i[(We?432:16)+(F*28|0)+(h<<2)>>2]|0,0,z|0)|0,z=At()|0,h=i[(We?640:224)+(F*28|0)+(h<<2)>>2]|0,a=He|a&~Oe,o=z|o,!h){h=0;break e}if(!E){J=8;break e}}return o|0}while(!1);(J|0)==8&&(We=i[848+(ve*28|0)+(h<<2)>>2]|0,He=ct(We|0,0,45)|0,a=He|a,o=At()|0|o&-1040385,h=i[4272+(ve*28|0)+(h<<2)>>2]|0,(We&127|0)==127&&(We=ct(i[848+(ve*28|0)+20>>2]|0,0,45)|0,o=At()|0|o&-1040385,h=i[4272+(ve*28|0)+20>>2]|0,a=Sa(We|a,o)|0,o=At()|0,i[p>>2]=(i[p>>2]|0)+1)),F=lt(a|0,o|0,45)|0,At()|0,F=F&127;e:do if(Be(F)|0){t:do if((vs(a,o)|0)==1){if((ve|0)!=(F|0))if(zi(F,i[7696+(ve*28|0)>>2]|0)|0){a=Ys(a,o)|0,z=1,o=At()|0;break}else Ni(23313,22416,436,22424);switch(Y|0){case 3:{a=Sa(a,o)|0,o=At()|0,i[p>>2]=(i[p>>2]|0)+1,z=0;break t}case 5:{a=Ys(a,o)|0,o=At()|0,i[p>>2]=(i[p>>2]|0)+5,z=0;break t}case 0:return We=9,We|0;default:return We=1,We|0}}else z=0;while(!1);if((h|0)>0){E=0;do a=Ho(a,o)|0,o=At()|0,E=E+1|0;while((E|0)!=(h|0))}if((ve|0)!=(F|0)){if(!(Ye(F)|0)){if((z|0)!=0|(vs(a,o)|0)!=5)break;i[p>>2]=(i[p>>2]|0)+1;break}switch(Ie&127){case 8:case 118:break e}(vs(a,o)|0)!=3&&(i[p>>2]=(i[p>>2]|0)+1)}}else if((h|0)>0){E=0;do a=Sa(a,o)|0,o=At()|0,E=E+1|0;while((E|0)!=(h|0))}while(!1);return i[p>>2]=((i[p>>2]|0)+h|0)%6|0,We=v,i[We>>2]=a,i[We+4>>2]=o,We=0,We|0}function Zs(a,o,h,p){a=a|0,o=o|0,h=h|0,p=p|0;var v=0,E=0,z=0,F=0,Y=0,J=0;for(F=it,it=it+16|0,E=F,z=F+8|0,v=($n(a,o)|0)==0,v=v?1:2;;){if(i[z>>2]=0,J=(yr(a,o,v,z,E)|0)==0,Y=E,J&((i[Y>>2]|0)==(h|0)?(i[Y+4>>2]|0)==(p|0):0)){a=4;break}if(v=v+1|0,v>>>0>=7){v=7,a=4;break}}return(a|0)==4?(it=F,v|0):0}function va(a,o,h,p){a=a|0,o=o|0,h=h|0,p=p|0;var v=0,E=0,z=0,F=0,Y=0,J=0,ve=0,Ie=0,Oe=0,He=0,We=0;if(We=it,it=it+16|0,Oe=We,He=We+8|0,Ie=Oe,i[Ie>>2]=a,i[Ie+4>>2]=o,!h)return He=p,i[He>>2]=a,i[He+4>>2]=o,He=0,it=We,He|0;i[He>>2]=0;e:do if($n(a,o)|0)a=9;else{if(E=(h|0)>0,E){v=0,Ie=a;do{if(a=yr(Ie,o,4,He,Oe)|0,a|0)break e;if(o=Oe,Ie=i[o>>2]|0,o=i[o+4>>2]|0,v=v+1|0,$n(Ie,o)|0){a=9;break e}}while((v|0)<(h|0));if(ve=p,i[ve>>2]=Ie,i[ve+4>>2]=o,ve=h+-1|0,E){J=0,a=1;do{if(v=22384+(J<<2)|0,(J|0)==5)for(z=i[v>>2]|0,E=0,v=a;;){if(a=Oe,a=yr(i[a>>2]|0,i[a+4>>2]|0,z,He,Oe)|0,a|0)break e;if((E|0)!=(ve|0))if(Y=Oe,F=i[Y>>2]|0,Y=i[Y+4>>2]|0,a=p+(v<<3)|0,i[a>>2]=F,i[a+4>>2]=Y,!($n(F,Y)|0))a=v+1|0;else{a=9;break e}else a=v;if(E=E+1|0,(E|0)>=(h|0))break;v=a}else for(z=Oe,Y=i[v>>2]|0,F=0,v=a,E=i[z>>2]|0,z=i[z+4>>2]|0;;){if(a=yr(E,z,Y,He,Oe)|0,a|0)break e;if(z=Oe,E=i[z>>2]|0,z=i[z+4>>2]|0,a=p+(v<<3)|0,i[a>>2]=E,i[a+4>>2]=z,a=v+1|0,$n(E,z)|0){a=9;break e}if(F=F+1|0,(F|0)>=(h|0))break;v=a}J=J+1|0}while(J>>>0<6);a=Oe,z=Ie,v=i[a>>2]|0,E=o,a=i[a+4>>2]|0}else z=Ie,v=Ie,E=o,a=o}else z=p,i[z>>2]=a,i[z+4>>2]=o,z=a,v=a,E=o,a=o;a=(z|0)==(v|0)&(E|0)==(a|0)?0:9}while(!1);return He=a,it=We,He|0}function Ba(a,o,h,p){a=a|0,o=o|0,h=h|0,p=p|0;var v=0,E=0,z=0,F=0,Y=0,J=0;if(F=it,it=it+48|0,v=F+16|0,E=F+8|0,z=F,h|0)return z=15,it=F,z|0;if(J=a,Y=i[J+4>>2]|0,h=E,i[h>>2]=i[J>>2],i[h+4>>2]=Y,dl(E,v),o=Da(v,o,z)|0,!o){if(h=i[E>>2]|0,E=i[a+8>>2]|0,(E|0)>0){v=i[a+12>>2]|0,o=0;do h=(i[v+(o<<3)>>2]|0)+h|0,o=o+1|0;while((o|0)<(E|0))}o=z,v=i[o>>2]|0,o=i[o+4>>2]|0,E=((h|0)<0)<<31>>31,(o|0)<(E|0)|(o|0)==(E|0)&v>>>0<h>>>0?(o=z,i[o>>2]=h,i[o+4>>2]=E,o=E):h=v,Y=S(h|0,o|0,12,0)|0,J=At()|0,o=z,i[o>>2]=Y,i[o+4>>2]=J,o=p,i[o>>2]=Y,i[o+4>>2]=J,o=0}return J=o,it=F,J|0}function Bs(a,o,h,p,v,E,z){a=a|0,o=o|0,h=h|0,p=p|0,v=v|0,E=E|0,z=z|0;var F=0,Y=0,J=0,ve=0,Ie=0,Oe=0,He=0,We=0,st=0,wt=0,Et=0,pt=0,bt=0,St=0,vi=0,$t=0,ri=0,ni=0,_n=0,Ki=0,Oi=0,Ui=0,tn=0,ji=0,Qn=0,fn=0,Fn=0,Rr=0,Mr=0;if(Qn=it,it=it+64|0,Oi=Qn+48|0,Ui=Qn+32|0,tn=Qn+24|0,vi=Qn+8|0,$t=Qn,Y=i[a>>2]|0,(Y|0)<=0)return ji=0,it=Qn,ji|0;for(ri=a+4|0,ni=Oi+8|0,_n=Ui+8|0,Ki=vi+8|0,F=0,bt=0;;){J=i[ri>>2]|0,pt=J+(bt<<4)|0,i[Oi>>2]=i[pt>>2],i[Oi+4>>2]=i[pt+4>>2],i[Oi+8>>2]=i[pt+8>>2],i[Oi+12>>2]=i[pt+12>>2],(bt|0)==(Y+-1|0)?(i[Ui>>2]=i[J>>2],i[Ui+4>>2]=i[J+4>>2],i[Ui+8>>2]=i[J+8>>2],i[Ui+12>>2]=i[J+12>>2]):(pt=J+(bt+1<<4)|0,i[Ui>>2]=i[pt>>2],i[Ui+4>>2]=i[pt+4>>2],i[Ui+8>>2]=i[pt+8>>2],i[Ui+12>>2]=i[pt+12>>2]),Y=Yn(Oi,Ui,p,tn)|0;e:do if(Y)J=0,F=Y;else if(J=tn,Y=i[J>>2]|0,J=i[J+4>>2]|0,(J|0)>0|(J|0)==0&Y>>>0>0){Et=0,pt=0;t:for(;;){if(Mr=+ue[Oi>>3],wt=C(Y|0,J|0,Et|0,pt|0)|0,Rr=+(wt>>>0)+4294967296*+(At()|0),fn=+(Y>>>0)+4294967296*+(J|0),Fn=+(Et>>>0)+4294967296*+(pt|0),ue[vi>>3]=Mr*Rr/fn+ +ue[Ui>>3]*Fn/fn,ue[Ki>>3]=+ue[ni>>3]*Rr/fn+ +ue[_n>>3]*Fn/fn,Y=Ns(vi,p,$t)|0,Y|0){F=Y;break}wt=$t,st=i[wt>>2]|0,wt=i[wt+4>>2]|0,Oe=$e(st|0,wt|0,o|0,h|0)|0,ve=At()|0,Y=z+(Oe<<3)|0,Ie=Y,J=i[Ie>>2]|0,Ie=i[Ie+4>>2]|0;i:do if((J|0)==0&(Ie|0)==0)St=Y,ji=16;else for(He=0,We=0;;){if((He|0)>(h|0)|(He|0)==(h|0)&We>>>0>o>>>0){F=1;break t}if((J|0)==(st|0)&(Ie|0)==(wt|0))break i;if(Y=S(Oe|0,ve|0,1,0)|0,Oe=Ge(Y|0,At()|0,o|0,h|0)|0,ve=At()|0,We=S(We|0,He|0,1,0)|0,He=At()|0,Y=z+(Oe<<3)|0,Ie=Y,J=i[Ie>>2]|0,Ie=i[Ie+4>>2]|0,(J|0)==0&(Ie|0)==0){St=Y,ji=16;break}}while(!1);if((ji|0)==16&&(ji=0,!((st|0)==0&(wt|0)==0))&&(We=St,i[We>>2]=st,i[We+4>>2]=wt,We=E+(i[v>>2]<<3)|0,i[We>>2]=st,i[We+4>>2]=wt,We=v,We=S(i[We>>2]|0,i[We+4>>2]|0,1,0)|0,st=At()|0,wt=v,i[wt>>2]=We,i[wt+4>>2]=st),Et=S(Et|0,pt|0,1,0)|0,pt=At()|0,J=tn,Y=i[J>>2]|0,J=i[J+4>>2]|0,!((J|0)>(pt|0)|(J|0)==(pt|0)&Y>>>0>Et>>>0)){J=1;break e}}J=0}else J=1;while(!1);if(bt=bt+1|0,!J){ji=21;break}if(Y=i[a>>2]|0,(bt|0)>=(Y|0)){F=0,ji=21;break}}return(ji|0)==21?(it=Qn,F|0):0}function Ds(a,o,h,p){a=a|0,o=o|0,h=h|0,p=p|0;var v=0,E=0,z=0,F=0,Y=0,J=0,ve=0,Ie=0,Oe=0,He=0,We=0,st=0,wt=0,Et=0,pt=0,bt=0,St=0,vi=0,$t=0,ri=0,ni=0,_n=0,Ki=0,Oi=0,Ui=0,tn=0,ji=0,Qn=0,fn=0,Fn=0,Rr=0;if(Rr=it,it=it+112|0,ji=Rr+80|0,Y=Rr+72|0,Qn=Rr,fn=Rr+56|0,h|0)return Fn=15,it=Rr,Fn|0;if(J=a+8|0,Fn=Ur((i[J>>2]<<5)+32|0)|0,!Fn)return Fn=13,it=Rr,Fn|0;if(aA(a,Fn),Ui=a,tn=i[Ui+4>>2]|0,h=Y,i[h>>2]=i[Ui>>2],i[h+4>>2]=tn,dl(Y,ji),h=Da(ji,o,Qn)|0,h)Ui=0,tn=0;else{if(h=i[Y>>2]|0,E=i[J>>2]|0,(E|0)>0){z=i[a+12>>2]|0,v=0;do h=(i[z+(v<<3)>>2]|0)+h|0,v=v+1|0;while((v|0)!=(E|0));v=h}else v=h;h=Qn,E=i[h>>2]|0,h=i[h+4>>2]|0,z=((v|0)<0)<<31>>31,(h|0)<(z|0)|(h|0)==(z|0)&E>>>0<v>>>0?(h=Qn,i[h>>2]=v,i[h+4>>2]=z,h=z):v=E,Ui=S(v|0,h|0,12,0)|0,tn=At()|0,h=Qn,i[h>>2]=Ui,i[h+4>>2]=tn,h=0}if(h|0)return _(Fn),Fn=h,it=Rr,Fn|0;if(v=b(Ui,8)|0,!v)return _(Fn),Fn=13,it=Rr,Fn|0;if(F=b(Ui,8)|0,!F)return _(Fn),_(v),Fn=13,it=Rr,Fn|0;Ki=ji,i[Ki>>2]=0,i[Ki+4>>2]=0,Ki=a,Oi=i[Ki+4>>2]|0,h=Y,i[h>>2]=i[Ki>>2],i[h+4>>2]=Oi,h=Bs(Y,Ui,tn,o,ji,v,F)|0;e:do if(h)_(v),_(F),_(Fn);else{t:do if((i[J>>2]|0)>0){for(z=a+12|0,E=0;h=Bs((i[z>>2]|0)+(E<<3)|0,Ui,tn,o,ji,v,F)|0,E=E+1|0,!(h|0);)if((E|0)>=(i[J>>2]|0))break t;_(v),_(F),_(Fn);break e}while(!1);(tn|0)>0|(tn|0)==0&Ui>>>0>0&&I(F|0,0,Ui<<3|0)|0,Oi=ji,Ki=i[Oi+4>>2]|0;t:do if((Ki|0)>0|(Ki|0)==0&(i[Oi>>2]|0)>>>0>0){ri=v,ni=F,_n=v,Ki=F,Oi=v,h=v,St=v,vi=F,$t=F,v=F;i:for(;;){for(wt=0,Et=0,pt=0,bt=0,E=0,z=0;;){F=Qn,Y=F+56|0;do i[F>>2]=0,F=F+4|0;while((F|0)<(Y|0));if(o=ri+(wt<<3)|0,J=i[o>>2]|0,o=i[o+4>>2]|0,an(J,o,1,Qn,0)|0){F=Qn,Y=F+56|0;do i[F>>2]=0,F=F+4|0;while((F|0)<(Y|0));F=b(7,4)|0,F|0&&(ts(J,o,1,Qn,F,7,0,0)|0,_(F))}for(st=0;;){We=Qn+(st<<3)|0,He=i[We>>2]|0,We=i[We+4>>2]|0;n:do if((He|0)==0&(We|0)==0)F=E,Y=z;else{if(ve=$e(He|0,We|0,Ui|0,tn|0)|0,J=At()|0,F=p+(ve<<3)|0,o=F,Y=i[o>>2]|0,o=i[o+4>>2]|0,!((Y|0)==0&(o|0)==0)){Ie=0,Oe=0;do{if((Ie|0)>(tn|0)|(Ie|0)==(tn|0)&Oe>>>0>Ui>>>0)break i;if((Y|0)==(He|0)&(o|0)==(We|0)){F=E,Y=z;break n}F=S(ve|0,J|0,1,0)|0,ve=Ge(F|0,At()|0,Ui|0,tn|0)|0,J=At()|0,Oe=S(Oe|0,Ie|0,1,0)|0,Ie=At()|0,F=p+(ve<<3)|0,o=F,Y=i[o>>2]|0,o=i[o+4>>2]|0}while(!((Y|0)==0&(o|0)==0))}(He|0)==0&(We|0)==0?(F=E,Y=z):(Nr(He,We,fn)|0,To(a,Fn,fn)|0&&(Oe=S(E|0,z|0,1,0)|0,z=At()|0,Ie=F,i[Ie>>2]=He,i[Ie+4>>2]=We,E=ni+(E<<3)|0,i[E>>2]=He,i[E+4>>2]=We,E=Oe),F=E,Y=z)}while(!1);if(st=st+1|0,st>>>0>=7)break;E=F,z=Y}if(wt=S(wt|0,Et|0,1,0)|0,Et=At()|0,pt=S(pt|0,bt|0,1,0)|0,bt=At()|0,z=ji,E=i[z>>2]|0,z=i[z+4>>2]|0,(bt|0)<(z|0)|(bt|0)==(z|0)&pt>>>0<E>>>0)E=F,z=Y;else break}if((z|0)>0|(z|0)==0&E>>>0>0){E=0,z=0;do bt=ri+(E<<3)|0,i[bt>>2]=0,i[bt+4>>2]=0,E=S(E|0,z|0,1,0)|0,z=At()|0,bt=ji,pt=i[bt+4>>2]|0;while((z|0)<(pt|0)|((z|0)==(pt|0)?E>>>0<(i[bt>>2]|0)>>>0:0))}if(bt=ji,i[bt>>2]=F,i[bt+4>>2]=Y,(Y|0)>0|(Y|0)==0&F>>>0>0)st=v,wt=$t,Et=Oi,pt=vi,bt=ni,v=St,$t=h,vi=_n,St=st,h=wt,Oi=Ki,Ki=Et,_n=pt,ni=ri,ri=bt;else break t}_(_n),_(Ki),_(Fn),h=1;break e}else h=F;while(!1);_(Fn),_(v),_(h),h=0}while(!1);return Fn=h,it=Rr,Fn|0}function M(a,o,h){a=a|0,o=o|0,h=h|0;var p=0,v=0,E=0,z=0,F=0,Y=0,J=0,ve=0;if(ve=it,it=it+176|0,Y=ve,(o|0)<1)return el(h,0,0),J=0,it=ve,J|0;for(F=a,F=lt(i[F>>2]|0,i[F+4>>2]|0,52)|0,At()|0,el(h,(o|0)>6?o:6,F&15),F=0;p=a+(F<<3)|0,p=xr(i[p>>2]|0,i[p+4>>2]|0,Y)|0,!(p|0);){if(p=i[Y>>2]|0,(p|0)>0){z=0;do E=Y+8+(z<<4)|0,z=z+1|0,p=Y+8+(((z|0)%(p|0)|0)<<4)|0,v=io(h,p,E)|0,v?jt(h,v)|0:ci(h,E,p)|0,p=i[Y>>2]|0;while((z|0)<(p|0))}if(F=F+1|0,(F|0)>=(o|0)){p=0,J=13;break}}return(J|0)==13?(it=ve,p|0):(ps(h),J=p,it=ve,J|0)}function te(a,o,h){a=a|0,o=o|0,h=h|0;var p=0,v=0,E=0,z=0;if(E=it,it=it+32|0,p=E,v=E+16|0,a=M(a,o,v)|0,a|0)return h=a,it=E,h|0;if(i[h>>2]=0,i[h+4>>2]=0,i[h+8>>2]=0,a=Xs(v)|0,a|0)do{o=Jl(h)|0;do KA(o,a)|0,z=a+16|0,i[p>>2]=i[z>>2],i[p+4>>2]=i[z+4>>2],i[p+8>>2]=i[z+8>>2],i[p+12>>2]=i[z+12>>2],jt(v,a)|0,a=PA(v,p)|0;while(a|0);a=Xs(v)|0}while(a|0);return ps(v),a=_o(h)|0,a?(ka(h),z=a,it=E,z|0):(z=0,it=E,z|0)}function Be(a){return a=a|0,a>>>0>121?(a=0,a|0):(a=i[7696+(a*28|0)+16>>2]|0,a|0)}function Ye(a){return a=a|0,(a|0)==4|(a|0)==117|0}function dt(a){return a=a|0,i[11120+((i[a>>2]|0)*216|0)+((i[a+4>>2]|0)*72|0)+((i[a+8>>2]|0)*24|0)+(i[a+12>>2]<<3)>>2]|0}function Qt(a){return a=a|0,i[11120+((i[a>>2]|0)*216|0)+((i[a+4>>2]|0)*72|0)+((i[a+8>>2]|0)*24|0)+(i[a+12>>2]<<3)+4>>2]|0}function ti(a,o){a=a|0,o=o|0,a=7696+(a*28|0)|0,i[o>>2]=i[a>>2],i[o+4>>2]=i[a+4>>2],i[o+8>>2]=i[a+8>>2],i[o+12>>2]=i[a+12>>2]}function Ii(a,o){a=a|0,o=o|0;var h=0,p=0;if(o>>>0>20)return o=-1,o|0;do if((i[11120+(o*216|0)>>2]|0)!=(a|0))if((i[11120+(o*216|0)+8>>2]|0)!=(a|0))if((i[11120+(o*216|0)+16>>2]|0)!=(a|0))if((i[11120+(o*216|0)+24>>2]|0)!=(a|0))if((i[11120+(o*216|0)+32>>2]|0)!=(a|0))if((i[11120+(o*216|0)+40>>2]|0)!=(a|0))if((i[11120+(o*216|0)+48>>2]|0)!=(a|0))if((i[11120+(o*216|0)+56>>2]|0)!=(a|0))if((i[11120+(o*216|0)+64>>2]|0)!=(a|0))if((i[11120+(o*216|0)+72>>2]|0)!=(a|0))if((i[11120+(o*216|0)+80>>2]|0)!=(a|0))if((i[11120+(o*216|0)+88>>2]|0)!=(a|0))if((i[11120+(o*216|0)+96>>2]|0)!=(a|0))if((i[11120+(o*216|0)+104>>2]|0)!=(a|0))if((i[11120+(o*216|0)+112>>2]|0)!=(a|0))if((i[11120+(o*216|0)+120>>2]|0)!=(a|0))if((i[11120+(o*216|0)+128>>2]|0)!=(a|0))if((i[11120+(o*216|0)+136>>2]|0)==(a|0))a=2,h=1,p=2;else{if((i[11120+(o*216|0)+144>>2]|0)==(a|0)){a=0,h=2,p=0;break}if((i[11120+(o*216|0)+152>>2]|0)==(a|0)){a=0,h=2,p=1;break}if((i[11120+(o*216|0)+160>>2]|0)==(a|0)){a=0,h=2,p=2;break}if((i[11120+(o*216|0)+168>>2]|0)==(a|0)){a=1,h=2,p=0;break}if((i[11120+(o*216|0)+176>>2]|0)==(a|0)){a=1,h=2,p=1;break}if((i[11120+(o*216|0)+184>>2]|0)==(a|0)){a=1,h=2,p=2;break}if((i[11120+(o*216|0)+192>>2]|0)==(a|0)){a=2,h=2,p=0;break}if((i[11120+(o*216|0)+200>>2]|0)==(a|0)){a=2,h=2,p=1;break}if((i[11120+(o*216|0)+208>>2]|0)==(a|0)){a=2,h=2,p=2;break}else a=-1;return a|0}else a=2,h=1,p=1;else a=2,h=1,p=0;else a=1,h=1,p=2;else a=1,h=1,p=1;else a=1,h=1,p=0;else a=0,h=1,p=2;else a=0,h=1,p=1;else a=0,h=1,p=0;else a=2,h=0,p=2;else a=2,h=0,p=1;else a=2,h=0,p=0;else a=1,h=0,p=2;else a=1,h=0,p=1;else a=1,h=0,p=0;else a=0,h=0,p=2;else a=0,h=0,p=1;else a=0,h=0,p=0;while(!1);return o=i[11120+(o*216|0)+(h*72|0)+(a*24|0)+(p<<3)+4>>2]|0,o|0}function zi(a,o){return a=a|0,o=o|0,(i[7696+(a*28|0)+20>>2]|0)==(o|0)?(o=1,o|0):(o=(i[7696+(a*28|0)+24>>2]|0)==(o|0),o|0)}function En(a,o){return a=a|0,o=o|0,i[848+(a*28|0)+(o<<2)>>2]|0}function Ln(a,o){return a=a|0,o=o|0,(i[848+(a*28|0)>>2]|0)==(o|0)?(o=0,o|0):(i[848+(a*28|0)+4>>2]|0)==(o|0)?(o=1,o|0):(i[848+(a*28|0)+8>>2]|0)==(o|0)?(o=2,o|0):(i[848+(a*28|0)+12>>2]|0)==(o|0)?(o=3,o|0):(i[848+(a*28|0)+16>>2]|0)==(o|0)?(o=4,o|0):(i[848+(a*28|0)+20>>2]|0)==(o|0)?(o=5,o|0):((i[848+(a*28|0)+24>>2]|0)==(o|0)?6:7)|0}function or(){return 122}function na(a){a=a|0;var o=0,h=0,p=0;o=0;do ct(o|0,0,45)|0,p=At()|0|134225919,h=a+(o<<3)|0,i[h>>2]=-1,i[h+4>>2]=p,o=o+1|0;while((o|0)!=122);return 0}function ra(a){return a=a|0,+ue[a+16>>3]<+ue[a+24>>3]|0}function sa(a,o){a=a|0,o=o|0;var h=0,p=0,v=0;return h=+ue[o>>3],!(h>=+ue[a+8>>3])||!(h<=+ue[a>>3])?(o=0,o|0):(p=+ue[a+16>>3],h=+ue[a+24>>3],v=+ue[o+8>>3],o=v>=h,a=v<=p&1,p<h?o&&(a=1):o||(a=0),o=(a|0)!=0,o|0)}function Da(a,o,h){a=a|0,o=o|0,h=h|0;var p=0,v=0,E=0,z=0,F=0,Y=0,J=0,ve=0,Ie=0,Oe=0,He=0,We=0,st=0,wt=0;We=it,it=it+288|0,ve=We+264|0,Ie=We+96|0,J=We,F=J,Y=F+96|0;do i[F>>2]=0,F=F+4|0;while((F|0)<(Y|0));return o=ys(o,J)|0,o|0?(He=o,it=We,He|0):(Y=J,J=i[Y>>2]|0,Y=i[Y+4>>2]|0,Nr(J,Y,ve)|0,xr(J,Y,Ie)|0,z=+si(ve,Ie+8|0),ue[ve>>3]=+ue[a>>3],Y=ve+8|0,ue[Y>>3]=+ue[a+16>>3],ue[Ie>>3]=+ue[a+8>>3],J=Ie+8|0,ue[J>>3]=+ue[a+24>>3],v=+si(ve,Ie),wt=+ue[Y>>3]-+ue[J>>3],E=+It(+wt),st=+ue[ve>>3]-+ue[Ie>>3],p=+It(+st),!(wt==0|st==0)&&(wt=+L(+E,+p),wt=+ar(+(v*v/+r(+(wt/+r(+E,+p)),3)/(z*(z*2.59807621135)*.8))),ue[Dt>>3]=wt,Oe=~~wt>>>0,He=+It(wt)>=1?wt>0?~~+Zn(+Wt(wt/4294967296),4294967295)>>>0:~~+ar((wt-+(~~wt>>>0))/4294967296)>>>0:0,(i[Dt+4>>2]&2146435072|0)!=2146435072)?(Ie=(Oe|0)==0&(He|0)==0,o=h,i[o>>2]=Ie?1:Oe,i[o+4>>2]=Ie?0:He,o=0):o=1,He=o,it=We,He|0)}function Yn(a,o,h,p){a=a|0,o=o|0,h=h|0,p=p|0;var v=0,E=0,z=0,F=0,Y=0,J=0,ve=0;J=it,it=it+288|0,z=J+264|0,F=J+96|0,Y=J,v=Y,E=v+96|0;do i[v>>2]=0,v=v+4|0;while((v|0)<(E|0));return h=ys(h,Y)|0,h|0?(p=h,it=J,p|0):(h=Y,v=i[h>>2]|0,h=i[h+4>>2]|0,Nr(v,h,z)|0,xr(v,h,F)|0,ve=+si(z,F+8|0),ve=+ar(+(+si(a,o)/(ve*2))),ue[Dt>>3]=ve,h=~~ve>>>0,v=+It(ve)>=1?ve>0?~~+Zn(+Wt(ve/4294967296),4294967295)>>>0:~~+ar((ve-+(~~ve>>>0))/4294967296)>>>0:0,(i[Dt+4>>2]&2146435072|0)==2146435072?(p=1,it=J,p|0):(Y=(h|0)==0&(v|0)==0,i[p>>2]=Y?1:h,i[p+4>>2]=Y?0:v,p=0,it=J,p|0))}function yn(a,o,h,p){a=a|0,o=o|0,h=h|0,p=p|0,i[a>>2]=o,i[a+4>>2]=h,i[a+8>>2]=p}function Rn(a,o){a=a|0,o=o|0;var h=0,p=0,v=0,E=0,z=0,F=0,Y=0,J=0,ve=0,Ie=0,Oe=0;Ie=o+8|0,i[Ie>>2]=0,Y=+ue[a>>3],z=+It(+Y),J=+ue[a+8>>3],F=+It(+J)/.8660254037844386,z=z+F*.5,h=~~z,a=~~F,z=z-+(h|0),F=F-+(a|0);do if(z<.5)if(z<.3333333333333333)if(i[o>>2]=h,F<(z+1)*.5){i[o+4>>2]=a;break}else{a=a+1|0,i[o+4>>2]=a;break}else if(Oe=1-z,a=(!(F<Oe)&1)+a|0,i[o+4>>2]=a,Oe<=F&F<z*2){h=h+1|0,i[o>>2]=h;break}else{i[o>>2]=h;break}else{if(!(z<.6666666666666666))if(h=h+1|0,i[o>>2]=h,F<z*.5){i[o+4>>2]=a;break}else{a=a+1|0,i[o+4>>2]=a;break}if(F<1-z){if(i[o+4>>2]=a,z*2+-1<F){i[o>>2]=h;break}}else a=a+1|0,i[o+4>>2]=a;h=h+1|0,i[o>>2]=h}while(!1);do if(Y<0)if(a&1){ve=(a+1|0)/2|0,ve=C(h|0,((h|0)<0)<<31>>31|0,ve|0,((ve|0)<0)<<31>>31|0)|0,h=~~(+(h|0)-((+(ve>>>0)+4294967296*+(At()|0))*2+1)),i[o>>2]=h;break}else{ve=(a|0)/2|0,ve=C(h|0,((h|0)<0)<<31>>31|0,ve|0,((ve|0)<0)<<31>>31|0)|0,h=~~(+(h|0)-(+(ve>>>0)+4294967296*+(At()|0))*2),i[o>>2]=h;break}while(!1);ve=o+4|0,J<0&&(h=h-((a<<1|1|0)/2|0)|0,i[o>>2]=h,a=0-a|0,i[ve>>2]=a),p=a-h|0,(h|0)<0?(v=0-h|0,i[ve>>2]=p,i[Ie>>2]=v,i[o>>2]=0,a=p,h=0):v=0,(a|0)<0&&(h=h-a|0,i[o>>2]=h,v=v-a|0,i[Ie>>2]=v,i[ve>>2]=0,a=0),E=h-v|0,p=a-v|0,(v|0)<0&&(i[o>>2]=E,i[ve>>2]=p,i[Ie>>2]=0,a=p,h=E,v=0),p=(a|0)<(h|0)?a:h,p=(v|0)<(p|0)?v:p,!((p|0)<=0)&&(i[o>>2]=h-p,i[ve>>2]=a-p,i[Ie>>2]=v-p)}function ur(a){a=a|0;var o=0,h=0,p=0,v=0,E=0,z=0;o=i[a>>2]|0,z=a+4|0,h=i[z>>2]|0,(o|0)<0&&(h=h-o|0,i[z>>2]=h,E=a+8|0,i[E>>2]=(i[E>>2]|0)-o,i[a>>2]=0,o=0),(h|0)<0?(o=o-h|0,i[a>>2]=o,E=a+8|0,v=(i[E>>2]|0)-h|0,i[E>>2]=v,i[z>>2]=0,h=0):(v=a+8|0,E=v,v=i[v>>2]|0),(v|0)<0&&(o=o-v|0,i[a>>2]=o,h=h-v|0,i[z>>2]=h,i[E>>2]=0,v=0),p=(h|0)<(o|0)?h:o,p=(v|0)<(p|0)?v:p,!((p|0)<=0)&&(i[a>>2]=o-p,i[z>>2]=h-p,i[E>>2]=v-p)}function is(a,o){a=a|0,o=o|0;var h=0,p=0;p=i[a+8>>2]|0,h=+((i[a+4>>2]|0)-p|0),ue[o>>3]=+((i[a>>2]|0)-p|0)-h*.5,ue[o+8>>3]=h*.8660254037844386}function dr(a,o,h){a=a|0,o=o|0,h=h|0,i[h>>2]=(i[o>>2]|0)+(i[a>>2]|0),i[h+4>>2]=(i[o+4>>2]|0)+(i[a+4>>2]|0),i[h+8>>2]=(i[o+8>>2]|0)+(i[a+8>>2]|0)}function fo(a,o,h){a=a|0,o=o|0,h=h|0,i[h>>2]=(i[a>>2]|0)-(i[o>>2]|0),i[h+4>>2]=(i[a+4>>2]|0)-(i[o+4>>2]|0),i[h+8>>2]=(i[a+8>>2]|0)-(i[o+8>>2]|0)}function Go(a,o){a=a|0,o=o|0;var h=0,p=0;h=pi(i[a>>2]|0,o)|0,i[a>>2]=h,h=a+4|0,p=pi(i[h>>2]|0,o)|0,i[h>>2]=p,a=a+8|0,o=pi(i[a>>2]|0,o)|0,i[a>>2]=o}function ya(a){a=a|0;var o=0,h=0,p=0,v=0,E=0,z=0,F=0;z=i[a>>2]|0,F=(z|0)<0,p=(i[a+4>>2]|0)-(F?z:0)|0,E=(p|0)<0,v=(E?0-p|0:0)+((i[a+8>>2]|0)-(F?z:0))|0,h=(v|0)<0,a=h?0:v,o=(E?0:p)-(h?v:0)|0,v=(F?0:z)-(E?p:0)-(h?v:0)|0,h=(o|0)<(v|0)?o:v,h=(a|0)<(h|0)?a:h,p=(h|0)>0,a=a-(p?h:0)|0,o=o-(p?h:0)|0;e:do switch(v-(p?h:0)|0){case 0:switch(o|0){case 0:return F=a|0?(a|0)==1?1:7:0,F|0;case 1:return F=a|0?(a|0)==1?3:7:2,F|0;default:break e}case 1:switch(o|0){case 0:return F=a|0?(a|0)==1?5:7:4,F|0;case 1:{if(!a)a=6;else break e;return a|0}default:break e}}while(!1);return F=7,F|0}function Ya(a){a=a|0;var o=0,h=0,p=0,v=0,E=0,z=0,F=0;z=a+8|0,v=i[z>>2]|0,E=(i[a>>2]|0)-v|0,F=a+4|0,v=(i[F>>2]|0)-v|0;do if(E>>>0>715827881|v>>>0>715827881){if(h=(E|0)>0,h){if((2147483647-E|0)<(E|0)||(2147483647-(E<<1)|0)<(E|0))return F=1,F|0}else if((-2147483648-E|0)>(E|0)||(-2147483648-(E<<1)|0)>(E|0))return F=1,F|0;if(o=E*3|0,(v|0)>0){if((2147483647-v|0)<(v|0))return F=1,F|0}else if((-2147483648-v|0)>(v|0))return F=1,F|0;if(p=v<<1,(E|0)>-1){if((o|-2147483648|0)>=(v|0))return F=1,F|0}else if((o^-2147483648|0)<(v|0))return F=1,F|0;if(h){if((2147483647-E|0)<(p|0))o=1;else{h=p;break}return o|0}else{if((-2147483648-E|0)>(p|0))o=1;else{h=p;break}return o|0}}else h=v<<1,o=E*3|0;while(!1);p=no(+(o-v|0)/7)|0,i[a>>2]=p,v=no(+(h+E|0)/7)|0,i[F>>2]=v,i[z>>2]=0,h=(v|0)<(p|0),o=h?p:v,h=h?v:p;do if((h|0)<0){if((o|0)>0){if((o|-2147483648|0)<(h|0)&((h|0)!=-2147483648&(2147483647-o|0)>=(h|0)))break;Ni(23313,22444,355,22455)}if((h|0)==-2147483648|(-2147483648-o|0)>(h|0)&&Ni(23313,22444,355,22455),(o|0)>-1){if((o|-2147483648|0)<(h|0))break;Ni(23313,22444,355,22455)}else{if((o^-2147483648|0)>=(h|0))break;Ni(23313,22444,355,22455)}}while(!1);return o=v-p|0,(p|0)<0?(h=0-p|0,i[F>>2]=o,i[z>>2]=h,i[a>>2]=0,p=0):(o=v,h=0),(o|0)<0&&(p=p-o|0,i[a>>2]=p,h=h-o|0,i[z>>2]=h,i[F>>2]=0,o=0),E=p-h|0,v=o-h|0,(h|0)<0?(i[a>>2]=E,i[F>>2]=v,i[z>>2]=0,o=v,v=E,h=0):v=p,p=(o|0)<(v|0)?o:v,p=(h|0)<(p|0)?h:p,(p|0)<=0?(F=0,F|0):(i[a>>2]=v-p,i[F>>2]=o-p,i[z>>2]=h-p,F=0,F|0)}function Hr(a){a=a|0;var o=0,h=0,p=0,v=0,E=0,z=0,F=0;z=a+8|0,v=i[z>>2]|0,E=(i[a>>2]|0)-v|0,F=a+4|0,v=(i[F>>2]|0)-v|0;do if(E>>>0>715827881|v>>>0>715827881){if(h=(E|0)>0,h){if((2147483647-E|0)<(E|0))return F=1,F|0}else if((-2147483648-E|0)>(E|0))return F=1,F|0;if(o=E<<1,(v|0)>0){if((2147483647-v|0)<(v|0)||(2147483647-(v<<1)|0)<(v|0))return F=1,F|0}else if((-2147483648-v|0)>(v|0)||(-2147483648-(v<<1)|0)>(v|0))return F=1,F|0;if(p=v*3|0,h){if((2147483647-o|0)<(v|0))return F=1,F|0}else if((-2147483648-o|0)>(v|0))return F=1,F|0;if((v|0)>-1){if((p|-2147483648|0)<(E|0)){h=p;break}else o=1;return o|0}else{if((p^-2147483648|0)<(E|0))o=1;else{h=p;break}return o|0}}else h=v*3|0,o=E<<1;while(!1);p=no(+(o+v|0)/7)|0,i[a>>2]=p,v=no(+(h-E|0)/7)|0,i[F>>2]=v,i[z>>2]=0,h=(v|0)<(p|0),o=h?p:v,h=h?v:p;do if((h|0)<0){if((o|0)>0){if((o|-2147483648|0)<(h|0)&((h|0)!=-2147483648&(2147483647-o|0)>=(h|0)))break;Ni(23313,22444,404,22469)}if((h|0)==-2147483648|(-2147483648-o|0)>(h|0)&&Ni(23313,22444,404,22469),(o|0)>-1){if((o|-2147483648|0)<(h|0))break;Ni(23313,22444,404,22469)}else{if((o^-2147483648|0)>=(h|0))break;Ni(23313,22444,404,22469)}}while(!1);return o=v-p|0,(p|0)<0?(h=0-p|0,i[F>>2]=o,i[z>>2]=h,i[a>>2]=0,p=0):(o=v,h=0),(o|0)<0&&(p=p-o|0,i[a>>2]=p,h=h-o|0,i[z>>2]=h,i[F>>2]=0,o=0),E=p-h|0,v=o-h|0,(h|0)<0?(i[a>>2]=E,i[F>>2]=v,i[z>>2]=0,o=v,v=E,h=0):v=p,p=(o|0)<(v|0)?o:v,p=(h|0)<(p|0)?h:p,(p|0)<=0?(F=0,F|0):(i[a>>2]=v-p,i[F>>2]=o-p,i[z>>2]=h-p,F=0,F|0)}function ko(a){a=a|0;var o=0,h=0,p=0,v=0,E=0,z=0,F=0;z=a+8|0,h=i[z>>2]|0,o=(i[a>>2]|0)-h|0,F=a+4|0,h=(i[F>>2]|0)-h|0,p=no(+((o*3|0)-h|0)/7)|0,i[a>>2]=p,o=no(+((h<<1)+o|0)/7)|0,i[F>>2]=o,i[z>>2]=0,h=o-p|0,(p|0)<0?(E=0-p|0,i[F>>2]=h,i[z>>2]=E,i[a>>2]=0,o=h,p=0,h=E):h=0,(o|0)<0&&(p=p-o|0,i[a>>2]=p,h=h-o|0,i[z>>2]=h,i[F>>2]=0,o=0),E=p-h|0,v=o-h|0,(h|0)<0?(i[a>>2]=E,i[F>>2]=v,i[z>>2]=0,o=v,v=E,h=0):v=p,p=(o|0)<(v|0)?o:v,p=(h|0)<(p|0)?h:p,!((p|0)<=0)&&(i[a>>2]=v-p,i[F>>2]=o-p,i[z>>2]=h-p)}function pa(a){a=a|0;var o=0,h=0,p=0,v=0,E=0,z=0,F=0;z=a+8|0,h=i[z>>2]|0,o=(i[a>>2]|0)-h|0,F=a+4|0,h=(i[F>>2]|0)-h|0,p=no(+((o<<1)+h|0)/7)|0,i[a>>2]=p,o=no(+((h*3|0)-o|0)/7)|0,i[F>>2]=o,i[z>>2]=0,h=o-p|0,(p|0)<0?(E=0-p|0,i[F>>2]=h,i[z>>2]=E,i[a>>2]=0,o=h,p=0,h=E):h=0,(o|0)<0&&(p=p-o|0,i[a>>2]=p,h=h-o|0,i[z>>2]=h,i[F>>2]=0,o=0),E=p-h|0,v=o-h|0,(h|0)<0?(i[a>>2]=E,i[F>>2]=v,i[z>>2]=0,o=v,v=E,h=0):v=p,p=(o|0)<(v|0)?o:v,p=(h|0)<(p|0)?h:p,!((p|0)<=0)&&(i[a>>2]=v-p,i[F>>2]=o-p,i[z>>2]=h-p)}function La(a){a=a|0;var o=0,h=0,p=0,v=0,E=0,z=0,F=0;o=i[a>>2]|0,z=a+4|0,h=i[z>>2]|0,F=a+8|0,p=i[F>>2]|0,v=h+(o*3|0)|0,i[a>>2]=v,h=p+(h*3|0)|0,i[z>>2]=h,o=(p*3|0)+o|0,i[F>>2]=o,p=h-v|0,(v|0)<0?(o=o-v|0,i[z>>2]=p,i[F>>2]=o,i[a>>2]=0,h=p,p=0):p=v,(h|0)<0&&(p=p-h|0,i[a>>2]=p,o=o-h|0,i[F>>2]=o,i[z>>2]=0,h=0),E=p-o|0,v=h-o|0,(o|0)<0?(i[a>>2]=E,i[z>>2]=v,i[F>>2]=0,p=E,o=0):v=h,h=(v|0)<(p|0)?v:p,h=(o|0)<(h|0)?o:h,!((h|0)<=0)&&(i[a>>2]=p-h,i[z>>2]=v-h,i[F>>2]=o-h)}function ds(a){a=a|0;var o=0,h=0,p=0,v=0,E=0,z=0,F=0;v=i[a>>2]|0,z=a+4|0,o=i[z>>2]|0,F=a+8|0,h=i[F>>2]|0,p=(o*3|0)+v|0,v=h+(v*3|0)|0,i[a>>2]=v,i[z>>2]=p,o=(h*3|0)+o|0,i[F>>2]=o,h=p-v|0,(v|0)<0?(o=o-v|0,i[z>>2]=h,i[F>>2]=o,i[a>>2]=0,v=0):h=p,(h|0)<0&&(v=v-h|0,i[a>>2]=v,o=o-h|0,i[F>>2]=o,i[z>>2]=0,h=0),E=v-o|0,p=h-o|0,(o|0)<0?(i[a>>2]=E,i[z>>2]=p,i[F>>2]=0,v=E,o=0):p=h,h=(p|0)<(v|0)?p:v,h=(o|0)<(h|0)?o:h,!((h|0)<=0)&&(i[a>>2]=v-h,i[z>>2]=p-h,i[F>>2]=o-h)}function As(a,o){a=a|0,o=o|0;var h=0,p=0,v=0,E=0,z=0,F=0;(o+-1|0)>>>0>=6||(v=(i[15440+(o*12|0)>>2]|0)+(i[a>>2]|0)|0,i[a>>2]=v,F=a+4|0,p=(i[15440+(o*12|0)+4>>2]|0)+(i[F>>2]|0)|0,i[F>>2]=p,z=a+8|0,o=(i[15440+(o*12|0)+8>>2]|0)+(i[z>>2]|0)|0,i[z>>2]=o,h=p-v|0,(v|0)<0?(o=o-v|0,i[F>>2]=h,i[z>>2]=o,i[a>>2]=0,p=0):(h=p,p=v),(h|0)<0&&(p=p-h|0,i[a>>2]=p,o=o-h|0,i[z>>2]=o,i[F>>2]=0,h=0),E=p-o|0,v=h-o|0,(o|0)<0?(i[a>>2]=E,i[F>>2]=v,i[z>>2]=0,p=E,o=0):v=h,h=(v|0)<(p|0)?v:p,h=(o|0)<(h|0)?o:h,!((h|0)<=0)&&(i[a>>2]=p-h,i[F>>2]=v-h,i[z>>2]=o-h))}function po(a){a=a|0;var o=0,h=0,p=0,v=0,E=0,z=0,F=0;v=i[a>>2]|0,z=a+4|0,o=i[z>>2]|0,F=a+8|0,h=i[F>>2]|0,p=o+v|0,v=h+v|0,i[a>>2]=v,i[z>>2]=p,o=h+o|0,i[F>>2]=o,h=p-v|0,(v|0)<0?(o=o-v|0,i[z>>2]=h,i[F>>2]=o,i[a>>2]=0,p=0):(h=p,p=v),(h|0)<0&&(p=p-h|0,i[a>>2]=p,o=o-h|0,i[F>>2]=o,i[z>>2]=0,h=0),E=p-o|0,v=h-o|0,(o|0)<0?(i[a>>2]=E,i[z>>2]=v,i[F>>2]=0,p=E,o=0):v=h,h=(v|0)<(p|0)?v:p,h=(o|0)<(h|0)?o:h,!((h|0)<=0)&&(i[a>>2]=p-h,i[z>>2]=v-h,i[F>>2]=o-h)}function Ls(a){a=a|0;var o=0,h=0,p=0,v=0,E=0,z=0,F=0;o=i[a>>2]|0,z=a+4|0,p=i[z>>2]|0,F=a+8|0,h=i[F>>2]|0,v=p+o|0,i[a>>2]=v,p=h+p|0,i[z>>2]=p,o=h+o|0,i[F>>2]=o,h=p-v|0,(v|0)<0?(o=o-v|0,i[z>>2]=h,i[F>>2]=o,i[a>>2]=0,p=0):(h=p,p=v),(h|0)<0&&(p=p-h|0,i[a>>2]=p,o=o-h|0,i[F>>2]=o,i[z>>2]=0,h=0),E=p-o|0,v=h-o|0,(o|0)<0?(i[a>>2]=E,i[z>>2]=v,i[F>>2]=0,p=E,o=0):v=h,h=(v|0)<(p|0)?v:p,h=(o|0)<(h|0)?o:h,!((h|0)<=0)&&(i[a>>2]=p-h,i[z>>2]=v-h,i[F>>2]=o-h)}function aa(a){switch(a=a|0,a|0){case 1:{a=5;break}case 5:{a=4;break}case 4:{a=6;break}case 6:{a=2;break}case 2:{a=3;break}case 3:{a=1;break}}return a|0}function za(a){switch(a=a|0,a|0){case 1:{a=3;break}case 3:{a=2;break}case 2:{a=6;break}case 6:{a=4;break}case 4:{a=5;break}case 5:{a=1;break}}return a|0}function $a(a){a=a|0;var o=0,h=0,p=0,v=0,E=0,z=0,F=0;o=i[a>>2]|0,z=a+4|0,h=i[z>>2]|0,F=a+8|0,p=i[F>>2]|0,v=h+(o<<1)|0,i[a>>2]=v,h=p+(h<<1)|0,i[z>>2]=h,o=(p<<1)+o|0,i[F>>2]=o,p=h-v|0,(v|0)<0?(o=o-v|0,i[z>>2]=p,i[F>>2]=o,i[a>>2]=0,h=p,p=0):p=v,(h|0)<0&&(p=p-h|0,i[a>>2]=p,o=o-h|0,i[F>>2]=o,i[z>>2]=0,h=0),E=p-o|0,v=h-o|0,(o|0)<0?(i[a>>2]=E,i[z>>2]=v,i[F>>2]=0,p=E,o=0):v=h,h=(v|0)<(p|0)?v:p,h=(o|0)<(h|0)?o:h,!((h|0)<=0)&&(i[a>>2]=p-h,i[z>>2]=v-h,i[F>>2]=o-h)}function rA(a){a=a|0;var o=0,h=0,p=0,v=0,E=0,z=0,F=0;v=i[a>>2]|0,z=a+4|0,o=i[z>>2]|0,F=a+8|0,h=i[F>>2]|0,p=(o<<1)+v|0,v=h+(v<<1)|0,i[a>>2]=v,i[z>>2]=p,o=(h<<1)+o|0,i[F>>2]=o,h=p-v|0,(v|0)<0?(o=o-v|0,i[z>>2]=h,i[F>>2]=o,i[a>>2]=0,v=0):h=p,(h|0)<0&&(v=v-h|0,i[a>>2]=v,o=o-h|0,i[F>>2]=o,i[z>>2]=0,h=0),E=v-o|0,p=h-o|0,(o|0)<0?(i[a>>2]=E,i[z>>2]=p,i[F>>2]=0,v=E,o=0):p=h,h=(p|0)<(v|0)?p:v,h=(o|0)<(h|0)?o:h,!((h|0)<=0)&&(i[a>>2]=v-h,i[z>>2]=p-h,i[F>>2]=o-h)}function pr(a,o){a=a|0,o=o|0;var h=0,p=0,v=0,E=0,z=0,F=0;return z=(i[a>>2]|0)-(i[o>>2]|0)|0,F=(z|0)<0,p=(i[a+4>>2]|0)-(i[o+4>>2]|0)-(F?z:0)|0,E=(p|0)<0,v=(F?0-z|0:0)+(i[a+8>>2]|0)-(i[o+8>>2]|0)+(E?0-p|0:0)|0,a=(v|0)<0,o=a?0:v,h=(E?0:p)-(a?v:0)|0,v=(F?0:z)-(E?p:0)-(a?v:0)|0,a=(h|0)<(v|0)?h:v,a=(o|0)<(a|0)?o:a,p=(a|0)>0,o=o-(p?a:0)|0,h=h-(p?a:0)|0,a=v-(p?a:0)|0,a=(a|0)>-1?a:0-a|0,h=(h|0)>-1?h:0-h|0,o=(o|0)>-1?o:0-o|0,o=(h|0)>(o|0)?h:o,((a|0)>(o|0)?a:o)|0}function kl(a,o){a=a|0,o=o|0;var h=0;h=i[a+8>>2]|0,i[o>>2]=(i[a>>2]|0)-h,i[o+4>>2]=(i[a+4>>2]|0)-h}function zs(a,o){a=a|0,o=o|0;var h=0,p=0,v=0,E=0,z=0,F=0;p=i[a>>2]|0,i[o>>2]=p,v=i[a+4>>2]|0,z=o+4|0,i[z>>2]=v,F=o+8|0,i[F>>2]=0,h=(v|0)<(p|0),a=h?p:v,h=h?v:p;do if((h|0)<0){if((a|0)>0){if((a|-2147483648|0)<(h|0)&((h|0)!=-2147483648&(2147483647-a|0)>=(h|0)))break;return a=1,a|0}if((h|0)==-2147483648|(-2147483648-a|0)>(h|0))return o=1,o|0;if((a|0)>-1){if((a|-2147483648|0)<(h|0))break;return a=1,a|0}else{if((a^-2147483648|0)<(h|0))a=1;else break;return a|0}}while(!1);return a=v-p|0,(p|0)<0?(h=0-p|0,i[z>>2]=a,i[F>>2]=h,i[o>>2]=0,p=0):(a=v,h=0),(a|0)<0&&(p=p-a|0,i[o>>2]=p,h=h-a|0,i[F>>2]=h,i[z>>2]=0,a=0),E=p-h|0,v=a-h|0,(h|0)<0?(i[o>>2]=E,i[z>>2]=v,i[F>>2]=0,a=v,v=E,h=0):v=p,p=(a|0)<(v|0)?a:v,p=(h|0)<(p|0)?h:p,(p|0)<=0?(o=0,o|0):(i[o>>2]=v-p,i[z>>2]=a-p,i[F>>2]=h-p,o=0,o|0)}function js(a){a=a|0;var o=0,h=0,p=0,v=0;o=a+8|0,v=i[o>>2]|0,h=v-(i[a>>2]|0)|0,i[a>>2]=h,p=a+4|0,a=(i[p>>2]|0)-v|0,i[p>>2]=a,i[o>>2]=0-(a+h)}function CA(a){a=a|0;var o=0,h=0,p=0,v=0,E=0,z=0,F=0;h=i[a>>2]|0,o=0-h|0,i[a>>2]=o,z=a+8|0,i[z>>2]=0,F=a+4|0,p=i[F>>2]|0,v=p+h|0,(h|0)>0?(i[F>>2]=v,i[z>>2]=h,i[a>>2]=0,o=0,p=v):h=0,(p|0)<0?(E=o-p|0,i[a>>2]=E,h=h-p|0,i[z>>2]=h,i[F>>2]=0,v=E-h|0,o=0-h|0,(h|0)<0?(i[a>>2]=v,i[F>>2]=o,i[z>>2]=0,p=o,h=0):(p=0,v=E)):v=o,o=(p|0)<(v|0)?p:v,o=(h|0)<(o|0)?h:o,!((o|0)<=0)&&(i[a>>2]=v-o,i[F>>2]=p-o,i[z>>2]=h-o)}function xa(a,o,h,p,v){a=a|0,o=o|0,h=h|0,p=p|0,v=v|0;var E=0,z=0,F=0,Y=0,J=0,ve=0,Ie=0;if(Ie=it,it=it+64|0,ve=Ie,F=Ie+56|0,!(!0&(o&2013265920|0)==134217728&(!0&(p&2013265920|0)==134217728)))return v=5,it=Ie,v|0;if((a|0)==(h|0)&(o|0)==(p|0))return i[v>>2]=0,v=0,it=Ie,v|0;if(z=lt(a|0,o|0,52)|0,At()|0,z=z&15,J=lt(h|0,p|0,52)|0,At()|0,(z|0)!=(J&15|0))return v=12,it=Ie,v|0;if(E=z+-1|0,z>>>0>1){eo(a,o,E,ve)|0,eo(h,p,E,F)|0,J=ve,Y=i[J>>2]|0,J=i[J+4>>2]|0;e:do if((Y|0)==(i[F>>2]|0)&&(J|0)==(i[F+4>>2]|0)){z=(z^15)*3|0,E=lt(a|0,o|0,z|0)|0,At()|0,E=E&7,z=lt(h|0,p|0,z|0)|0,At()|0,z=z&7;do if((E|0)==0|(z|0)==0)i[v>>2]=1,E=0;else if((E|0)==7)E=5;else{if((E|0)==1|(z|0)==1&&$n(Y,J)|0){E=5;break}if((i[15536+(E<<2)>>2]|0)!=(z|0)&&(i[15568+(E<<2)>>2]|0)!=(z|0))break e;i[v>>2]=1,E=0}while(!1);return v=E,it=Ie,v|0}while(!1)}E=ve,z=E+56|0;do i[E>>2]=0,E=E+4|0;while((E|0)<(z|0));return Pa(a,o,1,ve)|0,o=ve,!((i[o>>2]|0)==(h|0)&&(i[o+4>>2]|0)==(p|0))&&(o=ve+8|0,!((i[o>>2]|0)==(h|0)&&(i[o+4>>2]|0)==(p|0)))&&(o=ve+16|0,!((i[o>>2]|0)==(h|0)&&(i[o+4>>2]|0)==(p|0)))&&(o=ve+24|0,!((i[o>>2]|0)==(h|0)&&(i[o+4>>2]|0)==(p|0)))&&(o=ve+32|0,!((i[o>>2]|0)==(h|0)&&(i[o+4>>2]|0)==(p|0)))&&(o=ve+40|0,!((i[o>>2]|0)==(h|0)&&(i[o+4>>2]|0)==(p|0)))?(E=ve+48|0,E=((i[E>>2]|0)==(h|0)?(i[E+4>>2]|0)==(p|0):0)&1):E=1,i[v>>2]=E,v=0,it=Ie,v|0}function Ra(a,o,h,p,v){return a=a|0,o=o|0,h=h|0,p=p|0,v=v|0,h=Zs(a,o,h,p)|0,(h|0)==7?(v=11,v|0):(p=ct(h|0,0,56)|0,o=o&-2130706433|(At()|0)|268435456,i[v>>2]=a|p,i[v+4>>2]=o,v=0,v|0)}function Xa(a,o,h){return a=a|0,o=o|0,h=h|0,!0&(o&2013265920|0)==268435456?(i[h>>2]=a,i[h+4>>2]=o&-2130706433|134217728,h=0,h|0):(h=6,h|0)}function Zr(a,o,h){a=a|0,o=o|0,h=h|0;var p=0,v=0,E=0;return v=it,it=it+16|0,p=v,i[p>>2]=0,!0&(o&2013265920|0)==268435456?(E=lt(a|0,o|0,56)|0,At()|0,p=yr(a,o&-2130706433|134217728,E&7,p,h)|0,it=v,p|0):(p=6,it=v,p|0)}function wa(a,o){a=a|0,o=o|0;var h=0;switch(h=lt(a|0,o|0,56)|0,At()|0,h&7){case 0:case 7:return h=0,h|0}return h=o&-2130706433|134217728,!(!0&(o&2013265920|0)==268435456)||!0&(o&117440512|0)==16777216&($n(a,h)|0)!=0?(h=0,h|0):(h=Ja(a,h)|0,h|0)}function Fa(a,o,h){a=a|0,o=o|0,h=h|0;var p=0,v=0,E=0,z=0;return v=it,it=it+16|0,p=v,!0&(o&2013265920|0)==268435456?(E=o&-2130706433|134217728,z=h,i[z>>2]=a,i[z+4>>2]=E,i[p>>2]=0,o=lt(a|0,o|0,56)|0,At()|0,p=yr(a,E,o&7,p,h+8|0)|0,it=v,p|0):(p=6,it=v,p|0)}function Qo(a,o,h){a=a|0,o=o|0,h=h|0;var p=0,v=0;return v=($n(a,o)|0)==0,o=o&-2130706433,p=h,i[p>>2]=v?a:0,i[p+4>>2]=v?o|285212672:0,p=h+8|0,i[p>>2]=a,i[p+4>>2]=o|301989888,p=h+16|0,i[p>>2]=a,i[p+4>>2]=o|318767104,p=h+24|0,i[p>>2]=a,i[p+4>>2]=o|335544320,p=h+32|0,i[p>>2]=a,i[p+4>>2]=o|352321536,h=h+40|0,i[h>>2]=a,i[h+4>>2]=o|369098752,0}function _s(a,o,h){a=a|0,o=o|0,h=h|0;var p=0,v=0,E=0,z=0;return z=it,it=it+16|0,v=z,E=o&-2130706433|134217728,!0&(o&2013265920|0)==268435456?(p=lt(a|0,o|0,56)|0,At()|0,p=zr(a,E,p&7)|0,(p|0)==-1?(i[h>>2]=0,E=6,it=z,E|0):(Ar(a,E,v)|0&&Ni(23313,22484,282,22499),o=lt(a|0,o|0,52)|0,At()|0,o=o&15,$n(a,E)|0?Ka(v,o,p,2,h):Ir(v,o,p,2,h),E=0,it=z,E|0)):(E=6,it=z,E|0)}function ga(a,o,h){a=a|0,o=o|0,h=h|0;var p=0,v=0;p=it,it=it+16|0,v=p,Xr(a,o,h,v),Rn(v,h+4|0),it=p}function Xr(a,o,h,p){a=a|0,o=o|0,h=h|0,p=p|0;var v=0,E=0,z=0,F=0,Y=0;if(F=it,it=it+16|0,Y=F,kA(a,h,Y),E=+Yi(+(1-+ue[Y>>3]*.5)),E<1e-16){i[p>>2]=0,i[p+4>>2]=0,i[p+8>>2]=0,i[p+12>>2]=0,it=F;return}if(Y=i[h>>2]|0,v=+ue[15920+(Y*24|0)>>3],v=+mo(v-+mo(+at(15600+(Y<<4)|0,a))),Kr(o)|0?z=+mo(v+-.3334731722518321):z=v,v=+Ti(+E)/.381966011250105,(o|0)>0){a=0;do v=v*2.6457513110645907,a=a+1|0;while((a|0)!=(o|0))}E=+Zt(+z)*v,ue[p>>3]=E,z=+ei(+z)*v,ue[p+8>>3]=z,it=F}function kA(a,o,h){a=a|0,o=o|0,h=h|0;var p=0,v=0,E=0;if(E=it,it=it+32|0,v=E,Vr(a,v),i[o>>2]=0,ue[h>>3]=5,p=+Xn(16400,v),p<+ue[h>>3]&&(i[o>>2]=0,ue[h>>3]=p),p=+Xn(16424,v),p<+ue[h>>3]&&(i[o>>2]=1,ue[h>>3]=p),p=+Xn(16448,v),p<+ue[h>>3]&&(i[o>>2]=2,ue[h>>3]=p),p=+Xn(16472,v),p<+ue[h>>3]&&(i[o>>2]=3,ue[h>>3]=p),p=+Xn(16496,v),p<+ue[h>>3]&&(i[o>>2]=4,ue[h>>3]=p),p=+Xn(16520,v),p<+ue[h>>3]&&(i[o>>2]=5,ue[h>>3]=p),p=+Xn(16544,v),p<+ue[h>>3]&&(i[o>>2]=6,ue[h>>3]=p),p=+Xn(16568,v),p<+ue[h>>3]&&(i[o>>2]=7,ue[h>>3]=p),p=+Xn(16592,v),p<+ue[h>>3]&&(i[o>>2]=8,ue[h>>3]=p),p=+Xn(16616,v),p<+ue[h>>3]&&(i[o>>2]=9,ue[h>>3]=p),p=+Xn(16640,v),p<+ue[h>>3]&&(i[o>>2]=10,ue[h>>3]=p),p=+Xn(16664,v),p<+ue[h>>3]&&(i[o>>2]=11,ue[h>>3]=p),p=+Xn(16688,v),p<+ue[h>>3]&&(i[o>>2]=12,ue[h>>3]=p),p=+Xn(16712,v),p<+ue[h>>3]&&(i[o>>2]=13,ue[h>>3]=p),p=+Xn(16736,v),p<+ue[h>>3]&&(i[o>>2]=14,ue[h>>3]=p),p=+Xn(16760,v),p<+ue[h>>3]&&(i[o>>2]=15,ue[h>>3]=p),p=+Xn(16784,v),p<+ue[h>>3]&&(i[o>>2]=16,ue[h>>3]=p),p=+Xn(16808,v),p<+ue[h>>3]&&(i[o>>2]=17,ue[h>>3]=p),p=+Xn(16832,v),p<+ue[h>>3]&&(i[o>>2]=18,ue[h>>3]=p),p=+Xn(16856,v),!(p<+ue[h>>3])){it=E;return}i[o>>2]=19,ue[h>>3]=p,it=E}function Un(a,o,h,p,v){a=a|0,o=o|0,h=h|0,p=p|0,v=v|0;var E=0,z=0;if(E=+pl(a),E<1e-16){o=15600+(o<<4)|0,i[v>>2]=i[o>>2],i[v+4>>2]=i[o+4>>2],i[v+8>>2]=i[o+8>>2],i[v+12>>2]=i[o+12>>2];return}if(z=+en(+ +ue[a+8>>3],+ +ue[a>>3]),(h|0)>0){a=0;do E=E/2.6457513110645907,a=a+1|0;while((a|0)!=(h|0))}p?(E=E/3,h=(Kr(h)|0)==0,E=+An(+((h?E:E/2.6457513110645907)*.381966011250105))):(E=+An(+(E*.381966011250105)),Kr(h)|0&&(z=+mo(z+.3334731722518321))),yt(15600+(o<<4)|0,+mo(+ue[15920+(o*24|0)>>3]-z),E,v)}function Dr(a,o,h){a=a|0,o=o|0,h=h|0;var p=0,v=0;p=it,it=it+16|0,v=p,is(a+4|0,v),Un(v,i[a>>2]|0,o,0,h),it=p}function Ka(a,o,h,p,v){a=a|0,o=o|0,h=h|0,p=p|0,v=v|0;var E=0,z=0,F=0,Y=0,J=0,ve=0,Ie=0,Oe=0,He=0,We=0,st=0,wt=0,Et=0,pt=0,bt=0,St=0,vi=0,$t=0,ri=0,ni=0,_n=0,Ki=0,Oi=0,Ui=0,tn=0,ji=0,Qn=0,fn=0;if(ji=it,it=it+272|0,E=ji+256|0,pt=ji+240|0,Oi=ji,Ui=ji+224|0,tn=ji+208|0,bt=ji+176|0,St=ji+160|0,vi=ji+192|0,$t=ji+144|0,ri=ji+128|0,ni=ji+112|0,_n=ji+96|0,Ki=ji+80|0,i[E>>2]=o,i[pt>>2]=i[a>>2],i[pt+4>>2]=i[a+4>>2],i[pt+8>>2]=i[a+8>>2],i[pt+12>>2]=i[a+12>>2],jn(pt,E,Oi),i[v>>2]=0,pt=p+h+((p|0)==5&1)|0,(pt|0)<=(h|0)){it=ji;return}Y=i[E>>2]|0,J=Ui+4|0,ve=bt+4|0,Ie=h+5|0,Oe=16880+(Y<<2)|0,He=16960+(Y<<2)|0,We=ri+8|0,st=ni+8|0,wt=_n+8|0,Et=tn+4|0,F=h;e:for(;;){z=Oi+(((F|0)%5|0)<<4)|0,i[tn>>2]=i[z>>2],i[tn+4>>2]=i[z+4>>2],i[tn+8>>2]=i[z+8>>2],i[tn+12>>2]=i[z+12>>2];do;while((Rs(tn,Y,0,1)|0)==2);if((F|0)>(h|0)&(Kr(o)|0)!=0){if(i[bt>>2]=i[tn>>2],i[bt+4>>2]=i[tn+4>>2],i[bt+8>>2]=i[tn+8>>2],i[bt+12>>2]=i[tn+12>>2],is(J,St),p=i[bt>>2]|0,E=i[17040+(p*80|0)+(i[Ui>>2]<<2)>>2]|0,i[bt>>2]=i[18640+(p*80|0)+(E*20|0)>>2],z=i[18640+(p*80|0)+(E*20|0)+16>>2]|0,(z|0)>0){a=0;do po(ve),a=a+1|0;while((a|0)<(z|0))}switch(z=18640+(p*80|0)+(E*20|0)+4|0,i[vi>>2]=i[z>>2],i[vi+4>>2]=i[z+4>>2],i[vi+8>>2]=i[z+8>>2],Go(vi,(i[Oe>>2]|0)*3|0),dr(ve,vi,ve),ur(ve),is(ve,$t),Qn=+(i[He>>2]|0),ue[ri>>3]=Qn*3,ue[We>>3]=0,fn=Qn*-1.5,ue[ni>>3]=fn,ue[st>>3]=Qn*2.598076211353316,ue[_n>>3]=fn,ue[wt>>3]=Qn*-2.598076211353316,i[17040+((i[bt>>2]|0)*80|0)+(i[tn>>2]<<2)>>2]|0){case 1:{a=ni,p=ri;break}case 3:{a=_n,p=ni;break}case 2:{a=ri,p=_n;break}default:{a=12;break e}}TA(St,$t,p,a,Ki),Un(Ki,i[bt>>2]|0,Y,1,v+8+(i[v>>2]<<4)|0),i[v>>2]=(i[v>>2]|0)+1}if((F|0)<(Ie|0)&&(is(Et,bt),Un(bt,i[tn>>2]|0,Y,1,v+8+(i[v>>2]<<4)|0),i[v>>2]=(i[v>>2]|0)+1),i[Ui>>2]=i[tn>>2],i[Ui+4>>2]=i[tn+4>>2],i[Ui+8>>2]=i[tn+8>>2],i[Ui+12>>2]=i[tn+12>>2],F=F+1|0,(F|0)>=(pt|0)){a=3;break}}if((a|0)==3){it=ji;return}else(a|0)==12&&Ni(22522,22569,571,22579)}function jn(a,o,h){a=a|0,o=o|0,h=h|0;var p=0,v=0,E=0,z=0,F=0,Y=0;Y=it,it=it+128|0,p=Y+64|0,v=Y,E=p,z=20240,F=E+60|0;do i[E>>2]=i[z>>2],E=E+4|0,z=z+4|0;while((E|0)<(F|0));E=v,z=20304,F=E+60|0;do i[E>>2]=i[z>>2],E=E+4|0,z=z+4|0;while((E|0)<(F|0));F=(Kr(i[o>>2]|0)|0)==0,p=F?p:v,v=a+4|0,$a(v),rA(v),Kr(i[o>>2]|0)|0&&(ds(v),i[o>>2]=(i[o>>2]|0)+1),i[h>>2]=i[a>>2],o=h+4|0,dr(v,p,o),ur(o),i[h+16>>2]=i[a>>2],o=h+20|0,dr(v,p+12|0,o),ur(o),i[h+32>>2]=i[a>>2],o=h+36|0,dr(v,p+24|0,o),ur(o),i[h+48>>2]=i[a>>2],o=h+52|0,dr(v,p+36|0,o),ur(o),i[h+64>>2]=i[a>>2],h=h+68|0,dr(v,p+48|0,h),ur(h),it=Y}function Rs(a,o,h,p){a=a|0,o=o|0,h=h|0,p=p|0;var v=0,E=0,z=0,F=0,Y=0,J=0,ve=0,Ie=0,Oe=0,He=0,We=0;if(We=it,it=it+32|0,Oe=We+12|0,F=We,He=a+4|0,Ie=i[16960+(o<<2)>>2]|0,ve=(p|0)!=0,Ie=ve?Ie*3|0:Ie,v=i[He>>2]|0,J=a+8|0,z=i[J>>2]|0,ve){if(E=a+12|0,p=i[E>>2]|0,v=z+v+p|0,(v|0)==(Ie|0))return He=1,it=We,He|0;Y=E}else Y=a+12|0,p=i[Y>>2]|0,v=z+v+p|0;if((v|0)<=(Ie|0))return He=0,it=We,He|0;do if((p|0)>0){if(p=i[a>>2]|0,(z|0)>0){E=18640+(p*80|0)+60|0,p=a;break}p=18640+(p*80|0)+40|0,h?(yn(Oe,Ie,0,0),fo(He,Oe,F),Ls(F),dr(F,Oe,He),E=p,p=a):(E=p,p=a)}else E=18640+((i[a>>2]|0)*80|0)+20|0,p=a;while(!1);if(i[p>>2]=i[E>>2],v=E+16|0,(i[v>>2]|0)>0){p=0;do po(He),p=p+1|0;while((p|0)<(i[v>>2]|0))}return a=E+4|0,i[Oe>>2]=i[a>>2],i[Oe+4>>2]=i[a+4>>2],i[Oe+8>>2]=i[a+8>>2],o=i[16880+(o<<2)>>2]|0,Go(Oe,ve?o*3|0:o),dr(He,Oe,He),ur(He),ve?p=((i[J>>2]|0)+(i[He>>2]|0)+(i[Y>>2]|0)|0)==(Ie|0)?1:2:p=2,He=p,it=We,He|0}function Er(a,o){a=a|0,o=o|0;var h=0;do h=Rs(a,o,0,1)|0;while((h|0)==2);return h|0}function Ir(a,o,h,p,v){a=a|0,o=o|0,h=h|0,p=p|0,v=v|0;var E=0,z=0,F=0,Y=0,J=0,ve=0,Ie=0,Oe=0,He=0,We=0,st=0,wt=0,Et=0,pt=0,bt=0,St=0,vi=0,$t=0,ri=0,ni=0,_n=0,Ki=0,Oi=0;if(_n=it,it=it+240|0,E=_n+224|0,vi=_n+208|0,$t=_n,ri=_n+192|0,ni=_n+176|0,wt=_n+160|0,Et=_n+144|0,pt=_n+128|0,bt=_n+112|0,St=_n+96|0,i[E>>2]=o,i[vi>>2]=i[a>>2],i[vi+4>>2]=i[a+4>>2],i[vi+8>>2]=i[a+8>>2],i[vi+12>>2]=i[a+12>>2],Ws(vi,E,$t),i[v>>2]=0,st=p+h+((p|0)==6&1)|0,(st|0)<=(h|0)){it=_n;return}Y=i[E>>2]|0,J=h+6|0,ve=16960+(Y<<2)|0,Ie=Et+8|0,Oe=pt+8|0,He=bt+8|0,We=ri+4|0,z=0,F=h,p=-1;e:for(;;){if(E=(F|0)%6|0,a=$t+(E<<4)|0,i[ri>>2]=i[a>>2],i[ri+4>>2]=i[a+4>>2],i[ri+8>>2]=i[a+8>>2],i[ri+12>>2]=i[a+12>>2],a=z,z=Rs(ri,Y,0,1)|0,(F|0)>(h|0)&(Kr(o)|0)!=0&&(a|0)!=1&&(i[ri>>2]|0)!=(p|0)){switch(is($t+(((E+5|0)%6|0)<<4)+4|0,ni),is($t+(E<<4)+4|0,wt),Ki=+(i[ve>>2]|0),ue[Et>>3]=Ki*3,ue[Ie>>3]=0,Oi=Ki*-1.5,ue[pt>>3]=Oi,ue[Oe>>3]=Ki*2.598076211353316,ue[bt>>3]=Oi,ue[He>>3]=Ki*-2.598076211353316,E=i[vi>>2]|0,i[17040+(E*80|0)+(((p|0)==(E|0)?i[ri>>2]|0:p)<<2)>>2]|0){case 1:{a=pt,p=Et;break}case 3:{a=bt,p=pt;break}case 2:{a=Et,p=bt;break}default:{a=8;break e}}TA(ni,wt,p,a,St),!(gl(ni,St)|0)&&!(gl(wt,St)|0)&&(Un(St,i[vi>>2]|0,Y,1,v+8+(i[v>>2]<<4)|0),i[v>>2]=(i[v>>2]|0)+1)}if((F|0)<(J|0)&&(is(We,ni),Un(ni,i[ri>>2]|0,Y,1,v+8+(i[v>>2]<<4)|0),i[v>>2]=(i[v>>2]|0)+1),F=F+1|0,(F|0)>=(st|0)){a=3;break}else p=i[ri>>2]|0}if((a|0)==3){it=_n;return}else(a|0)==8&&Ni(22606,22569,736,22651)}function Ws(a,o,h){a=a|0,o=o|0,h=h|0;var p=0,v=0,E=0,z=0,F=0,Y=0;Y=it,it=it+160|0,p=Y+80|0,v=Y,E=p,z=20368,F=E+72|0;do i[E>>2]=i[z>>2],E=E+4|0,z=z+4|0;while((E|0)<(F|0));E=v,z=20448,F=E+72|0;do i[E>>2]=i[z>>2],E=E+4|0,z=z+4|0;while((E|0)<(F|0));F=(Kr(i[o>>2]|0)|0)==0,p=F?p:v,v=a+4|0,$a(v),rA(v),Kr(i[o>>2]|0)|0&&(ds(v),i[o>>2]=(i[o>>2]|0)+1),i[h>>2]=i[a>>2],o=h+4|0,dr(v,p,o),ur(o),i[h+16>>2]=i[a>>2],o=h+20|0,dr(v,p+12|0,o),ur(o),i[h+32>>2]=i[a>>2],o=h+36|0,dr(v,p+24|0,o),ur(o),i[h+48>>2]=i[a>>2],o=h+52|0,dr(v,p+36|0,o),ur(o),i[h+64>>2]=i[a>>2],o=h+68|0,dr(v,p+48|0,o),ur(o),i[h+80>>2]=i[a>>2],h=h+84|0,dr(v,p+60|0,h),ur(h),it=Y}function rr(a,o){return a=a|0,o=o|0,o=lt(a|0,o|0,52)|0,At()|0,o&15|0}function qo(a,o){return a=a|0,o=o|0,o=lt(a|0,o|0,45)|0,At()|0,o&127|0}function Ja(a,o){a=a|0,o=o|0;var h=0,p=0,v=0,E=0,z=0,F=0;if(!(!0&(o&-16777216|0)==134217728)||(z=lt(a|0,o|0,45)|0,At()|0,z=z&127,z>>>0>121))return o=0,o|0;h=lt(a|0,o|0,52)|0,At()|0,h=h&15;do if(h|0){for(v=1,p=0;;){if(E=lt(a|0,o|0,(15-v|0)*3|0)|0,At()|0,E=E&7,(E|0)!=0&(p^1))if((E|0)==1&(Be(z)|0)!=0){F=0,p=13;break}else p=1;if((E|0)==7){F=0,p=13;break}if(v>>>0<h>>>0)v=v+1|0;else{p=9;break}}if((p|0)==9){if((h|0)==15)F=1;else break;return F|0}else if((p|0)==13)return F|0}while(!1);for(;;){if(F=lt(a|0,o|0,(14-h|0)*3|0)|0,At()|0,!((F&7|0)==7&!0)){F=0,p=13;break}if(h>>>0<14)h=h+1|0;else{F=1,p=13;break}}return(p|0)==13?F|0:0}function eo(a,o,h,p){a=a|0,o=o|0,h=h|0,p=p|0;var v=0,E=0;if(E=lt(a|0,o|0,52)|0,At()|0,E=E&15,h>>>0>15)return p=4,p|0;if((E|0)<(h|0))return p=12,p|0;if((E|0)==(h|0))return i[p>>2]=a,i[p+4>>2]=o,p=0,p|0;if(v=ct(h|0,0,52)|0,v=v|a,a=At()|0|o&-15728641,(E|0)>(h|0))do o=ct(7,0,(14-h|0)*3|0)|0,h=h+1|0,v=o|v,a=At()|0|a;while((h|0)<(E|0));return i[p>>2]=v,i[p+4>>2]=a,p=0,p|0}function ns(a,o,h,p){a=a|0,o=o|0,h=h|0,p=p|0;var v=0,E=0,z=0;if(E=lt(a|0,o|0,52)|0,At()|0,E=E&15,!((h|0)<16&(E|0)<=(h|0)))return p=4,p|0;v=h-E|0,h=lt(a|0,o|0,45)|0,At()|0;e:do if(!(Be(h&127)|0))h=Mo(7,0,v,((v|0)<0)<<31>>31)|0,v=At()|0;else{t:do if(E|0){for(h=1;z=ct(7,0,(15-h|0)*3|0)|0,!!((z&a|0)==0&((At()|0)&o|0)==0);)if(h>>>0<E>>>0)h=h+1|0;else break t;h=Mo(7,0,v,((v|0)<0)<<31>>31)|0,v=At()|0;break e}while(!1);h=Mo(7,0,v,((v|0)<0)<<31>>31)|0,h=Se(h|0,At()|0,5,0)|0,h=S(h|0,At()|0,-5,-1)|0,h=H(h|0,At()|0,6,0)|0,h=S(h|0,At()|0,1,0)|0,v=At()|0}while(!1);return z=p,i[z>>2]=h,i[z+4>>2]=v,z=0,z|0}function $n(a,o){a=a|0,o=o|0;var h=0,p=0,v=0;if(v=lt(a|0,o|0,45)|0,At()|0,!(Be(v&127)|0))return v=0,v|0;v=lt(a|0,o|0,52)|0,At()|0,v=v&15;e:do if(!v)h=0;else for(p=1;;){if(h=lt(a|0,o|0,(15-p|0)*3|0)|0,At()|0,h=h&7,h|0)break e;if(p>>>0<v>>>0)p=p+1|0;else{h=0;break}}while(!1);return v=(h|0)==0&1,v|0}function bn(a,o,h,p){a=a|0,o=o|0,h=h|0,p=p|0;var v=0,E=0,z=0,F=0;if(z=it,it=it+16|0,E=z,Zo(E,a,o,h),o=E,a=i[o>>2]|0,o=i[o+4>>2]|0,(a|0)==0&(o|0)==0)return it=z,0;v=0,h=0;do F=p+(v<<3)|0,i[F>>2]=a,i[F+4>>2]=o,v=S(v|0,h|0,1,0)|0,h=At()|0,XA(E),F=E,a=i[F>>2]|0,o=i[F+4>>2]|0;while(!((a|0)==0&(o|0)==0));return it=z,0}function Oa(a,o,h,p){return a=a|0,o=o|0,h=h|0,p=p|0,(p|0)<(h|0)?(h=o,p=a,bi(h|0),p|0):(h=ct(-1,-1,((p-h|0)*3|0)+3|0)|0,p=ct(~h|0,~(At()|0)|0,(15-p|0)*3|0)|0,h=~(At()|0)&o,p=~p&a,bi(h|0),p|0)}function gr(a,o,h,p){a=a|0,o=o|0,h=h|0,p=p|0;var v=0;return v=lt(a|0,o|0,52)|0,At()|0,v=v&15,(h|0)<16&(v|0)<=(h|0)?((v|0)<(h|0)&&(v=ct(-1,-1,((h+-1-v|0)*3|0)+3|0)|0,v=ct(~v|0,~(At()|0)|0,(15-h|0)*3|0)|0,o=~(At()|0)&o,a=~v&a),v=ct(h|0,0,52)|0,h=o&-15728641|(At()|0),i[p>>2]=a|v,i[p+4>>2]=h,p=0,p|0):(p=4,p|0)}function ba(a,o,h,p){a=a|0,o=o|0,h=h|0,p=p|0;var v=0,E=0,z=0,F=0,Y=0,J=0,ve=0,Ie=0,Oe=0,He=0,We=0,st=0,wt=0,Et=0,pt=0,bt=0,St=0,vi=0,$t=0,ri=0,ni=0;if((h|0)==0&(p|0)==0)return ri=0,ri|0;if(v=a,E=i[v>>2]|0,v=i[v+4>>2]|0,!0&(v&15728640|0)==0){if(!((p|0)>0|(p|0)==0&h>>>0>0)||(ri=o,i[ri>>2]=E,i[ri+4>>2]=v,(h|0)==1&(p|0)==0))return ri=0,ri|0;v=1;do vi=a+(v<<3)|0,$t=i[vi+4>>2]|0,ri=o+(v<<3)|0,i[ri>>2]=i[vi>>2],i[ri+4>>2]=$t,v=v+1|0;while(0<(p|0)|(p|0)==0&v>>>0<h>>>0);return v=0,v|0}if(St=h<<3,$t=Ur(St)|0,!$t)return ri=13,ri|0;if(k($t|0,a|0,St|0)|0,vi=b(h,8)|0,!vi)return _($t),ri=13,ri|0;e:do if(h|0){t:for(;;){v=$t,Et=i[v>>2]|0,v=i[v+4>>2]|0,pt=lt(Et|0,v|0,52)|0,At()|0,pt=pt&15,bt=pt+-1|0,wt=(h|0)>0;i:do if((pt|0)!=0&wt){if(He=((h|0)<0)<<31>>31,We=ct(bt|0,0,52)|0,st=At()|0,bt>>>0>15){if(!((Et|0)==0&(v|0)==0)){ri=17;break t}for(E=0;;){if(E=E+1|0,(E|0)>=(h|0))break i;if(p=$t+(E<<3)|0,st=i[p>>2]|0,p=i[p+4>>2]|0,!((st|0)==0&(p|0)==0)){v=p,ri=17;break t}}}for(E=0,a=Et,p=v;;){if(!((a|0)==0&(p|0)==0)){if(!(!0&(p&117440512|0)==0)){ri=22;break t}if(F=lt(a|0,p|0,52)|0,At()|0,F=F&15,(F|0)<(bt|0)){v=12,ri=28;break t}if((F|0)!=(bt|0)&&(a=a|We,p=p&-15728641|st,F>>>0>=pt>>>0)){z=bt;do Oe=ct(7,0,(14-z|0)*3|0)|0,z=z+1|0,a=Oe|a,p=At()|0|p;while(z>>>0<F>>>0)}if(z=$e(a|0,p|0,h|0,He|0)|0,At()|0,J=vi+(z<<3)|0,F=J,Y=i[F>>2]|0,F=i[F+4>>2]|0,(Y|0)==0&(F|0)==0)z=J;else for(Oe=0;;){if((Oe|0)>(h|0)){ri=32;break t}if((Y|0)==(a|0)&(F&-117440513|0)==(p|0)){ve=lt(Y|0,F|0,56)|0,At()|0,ve=ve&7,Ie=ve+1|0,ni=lt(Y|0,F|0,45)|0,At()|0;n:do if(!(Be(ni&127)|0))F=7;else{if(Y=lt(Y|0,F|0,52)|0,At()|0,Y=Y&15,!Y){F=6;break}for(F=1;;){if(ni=ct(7,0,(15-F|0)*3|0)|0,!((ni&a|0)==0&((At()|0)&p|0)==0)){F=7;break n}if(F>>>0<Y>>>0)F=F+1|0;else{F=6;break}}}while(!1);if((ve+2|0)>>>0>F>>>0){ri=42;break t}ni=ct(Ie|0,0,56)|0,p=At()|0|p&-117440513,Ie=J,i[Ie>>2]=0,i[Ie+4>>2]=0,a=ni|a}else z=(z+1|0)%(h|0)|0;if(J=vi+(z<<3)|0,F=J,Y=i[F>>2]|0,F=i[F+4>>2]|0,(Y|0)==0&(F|0)==0){z=J;break}else Oe=Oe+1|0}ni=z,i[ni>>2]=a,i[ni+4>>2]=p}if(E=E+1|0,(E|0)>=(h|0))break i;p=$t+(E<<3)|0,a=i[p>>2]|0,p=i[p+4>>2]|0}}while(!1);if((h+5|0)>>>0<11){ri=85;break}if(st=b((h|0)/6|0,8)|0,!st){ri=49;break}i:do if(wt){Oe=0,Ie=0;do{if(F=vi+(Oe<<3)|0,p=F,E=i[p>>2]|0,p=i[p+4>>2]|0,!((E|0)==0&(p|0)==0)){Y=lt(E|0,p|0,56)|0,At()|0,Y=Y&7,a=Y+1|0,J=p&-117440513,ni=lt(E|0,p|0,45)|0,At()|0;n:do if(Be(ni&127)|0){if(ve=lt(E|0,p|0,52)|0,At()|0,ve=ve&15,ve|0)for(z=1;;){if(ni=ct(7,0,(15-z|0)*3|0)|0,!((E&ni|0)==0&(J&(At()|0)|0)==0))break n;if(z>>>0<ve>>>0)z=z+1|0;else break}p=ct(a|0,0,56)|0,E=p|E,p=At()|0|J,a=F,i[a>>2]=E,i[a+4>>2]=p,a=Y+2|0}while(!1);(a|0)==7&&(ni=st+(Ie<<3)|0,i[ni>>2]=E,i[ni+4>>2]=p&-117440513,Ie=Ie+1|0)}Oe=Oe+1|0}while((Oe|0)!=(h|0));if(wt){if(Oe=((h|0)<0)<<31>>31,He=ct(bt|0,0,52)|0,We=At()|0,bt>>>0>15){if(!((Et|0)==0&(v|0)==0)){v=4,ri=84;break t}for(v=0;;){if(v=v+1|0,(v|0)>=(h|0)){E=0,v=Ie;break i}if(ni=$t+(v<<3)|0,!((i[ni>>2]|0)==0&(i[ni+4>>2]|0)==0)){v=4,ri=84;break t}}}for(ve=0,E=0,J=Et;;){do if(!((J|0)==0&(v|0)==0)){if(F=lt(J|0,v|0,52)|0,At()|0,F=F&15,(F|0)<(bt|0)){v=12,ri=84;break t}do if((F|0)==(bt|0))p=J,F=v;else{if(p=J|He,a=v&-15728641|We,F>>>0<pt>>>0){F=a;break}z=bt;do ni=ct(7,0,(14-z|0)*3|0)|0,z=z+1|0,p=ni|p,a=At()|0|a;while(z>>>0<F>>>0);F=a}while(!1);for(z=$e(p|0,F|0,h|0,Oe|0)|0,At()|0,a=0;;){if((a|0)>(h|0)){ri=77;break t}if(ni=vi+(z<<3)|0,Y=i[ni+4>>2]|0,(Y&-117440513|0)==(F|0)&&(i[ni>>2]|0)==(p|0)){ri=79;break}if(z=(z+1|0)%(h|0)|0,ni=vi+(z<<3)|0,(i[ni>>2]|0)==(p|0)&&(i[ni+4>>2]|0)==(F|0))break;a=a+1|0}if((ri|0)==79&&(ri=0,!0&(Y&117440512|0)==100663296))break;ni=o+(E<<3)|0,i[ni>>2]=J,i[ni+4>>2]=v,E=E+1|0}while(!1);if(v=ve+1|0,(v|0)>=(h|0)){v=Ie;break i}ni=$t+(v<<3)|0,ve=v,J=i[ni>>2]|0,v=i[ni+4>>2]|0}}else E=0,v=Ie}else E=0,v=0;while(!1);if(I(vi|0,0,St|0)|0,k($t|0,st|0,v<<3|0)|0,_(st),v)o=o+(E<<3)|0,h=v;else break e}if((ri|0)==17)!0&(v&117440512|0)==0?(v=4,ri=28):ri=22;else if((ri|0)==32)Ni(23313,22674,362,22684);else{if((ri|0)==42)return _($t),_(vi),ni=10,ni|0;if((ri|0)==49)return _($t),_(vi),ni=13,ni|0;if((ri|0)==77)Ni(23313,22674,462,22684);else{if((ri|0)==84)return _(st),_($t),_(vi),ni=v,ni|0;if((ri|0)==85){k(o|0,$t|0,h<<3|0)|0;break}}}if((ri|0)==22)return _($t),_(vi),ni=5,ni|0;if((ri|0)==28)return _($t),_(vi),ni=v,ni|0}while(!1);return _($t),_(vi),ni=0,ni|0}function go(a,o,h,p,v,E,z){a=a|0,o=o|0,h=h|0,p=p|0,v=v|0,E=E|0,z=z|0;var F=0,Y=0,J=0,ve=0,Ie=0,Oe=0,He=0,We=0,st=0;if(st=it,it=it+16|0,We=st,!((h|0)>0|(h|0)==0&o>>>0>0))return We=0,it=st,We|0;if((z|0)>=16)return We=12,it=st,We|0;Oe=0,He=0,Ie=0,F=0;e:for(;;){if(J=a+(Oe<<3)|0,Y=i[J>>2]|0,J=i[J+4>>2]|0,ve=lt(Y|0,J|0,52)|0,At()|0,(ve&15|0)>(z|0)){F=12,Y=11;break}if(Zo(We,Y,J,z),ve=We,J=i[ve>>2]|0,ve=i[ve+4>>2]|0,(J|0)==0&(ve|0)==0)Y=Ie;else{Y=Ie;do{if(!((F|0)<(E|0)|(F|0)==(E|0)&Y>>>0<v>>>0)){Y=10;break e}Ie=p+(Y<<3)|0,i[Ie>>2]=J,i[Ie+4>>2]=ve,Y=S(Y|0,F|0,1,0)|0,F=At()|0,XA(We),Ie=We,J=i[Ie>>2]|0,ve=i[Ie+4>>2]|0}while(!((J|0)==0&(ve|0)==0))}if(Oe=S(Oe|0,He|0,1,0)|0,He=At()|0,(He|0)<(h|0)|(He|0)==(h|0)&Oe>>>0<o>>>0)Ie=Y;else{F=0,Y=11;break}}return(Y|0)==10?(We=14,it=st,We|0):(Y|0)==11?(it=st,F|0):0}function sr(a,o,h,p,v){a=a|0,o=o|0,h=h|0,p=p|0,v=v|0;var E=0,z=0,F=0,Y=0,J=0,ve=0,Ie=0,Oe=0;Oe=it,it=it+16|0,Ie=Oe;e:do if((h|0)>0|(h|0)==0&o>>>0>0){for(J=0,z=0,E=0,ve=0;;){if(Y=a+(J<<3)|0,F=i[Y>>2]|0,Y=i[Y+4>>2]|0,!((F|0)==0&(Y|0)==0)&&(Y=(ns(F,Y,p,Ie)|0)==0,F=Ie,z=S(i[F>>2]|0,i[F+4>>2]|0,z|0,E|0)|0,E=At()|0,!Y)){E=12;break}if(J=S(J|0,ve|0,1,0)|0,ve=At()|0,!((ve|0)<(h|0)|(ve|0)==(h|0)&J>>>0<o>>>0))break e}return it=Oe,E|0}else z=0,E=0;while(!1);return i[v>>2]=z,i[v+4>>2]=E,v=0,it=Oe,v|0}function Lr(a,o){return a=a|0,o=o|0,o=lt(a|0,o|0,52)|0,At()|0,o&1|0}function vs(a,o){a=a|0,o=o|0;var h=0,p=0,v=0;if(v=lt(a|0,o|0,52)|0,At()|0,v=v&15,!v)return v=0,v|0;for(p=1;;){if(h=lt(a|0,o|0,(15-p|0)*3|0)|0,At()|0,h=h&7,h|0){p=5;break}if(p>>>0<v>>>0)p=p+1|0;else{h=0,p=5;break}}return(p|0)==5?h|0:0}function Ho(a,o){a=a|0,o=o|0;var h=0,p=0,v=0,E=0,z=0,F=0,Y=0;if(Y=lt(a|0,o|0,52)|0,At()|0,Y=Y&15,!Y)return F=o,Y=a,bi(F|0),Y|0;for(F=1,h=0;;){E=(15-F|0)*3|0,p=ct(7,0,E|0)|0,v=At()|0,z=lt(a|0,o|0,E|0)|0,At()|0,E=ct(aa(z&7)|0,0,E|0)|0,z=At()|0,a=E|a&~p,o=z|o&~v;e:do if(!h)if((E&p|0)==0&(z&v|0)==0)h=0;else if(p=lt(a|0,o|0,52)|0,At()|0,p=p&15,!p)h=1;else{h=1;t:for(;;){switch(z=lt(a|0,o|0,(15-h|0)*3|0)|0,At()|0,z&7){case 1:break t;case 0:break;default:{h=1;break e}}if(h>>>0<p>>>0)h=h+1|0;else{h=1;break e}}for(h=1;;)if(z=(15-h|0)*3|0,v=lt(a|0,o|0,z|0)|0,At()|0,E=ct(7,0,z|0)|0,o=o&~(At()|0),z=ct(aa(v&7)|0,0,z|0)|0,a=a&~E|z,o=o|(At()|0),h>>>0<p>>>0)h=h+1|0;else{h=1;break}}while(!1);if(F>>>0<Y>>>0)F=F+1|0;else break}return bi(o|0),a|0}function Sa(a,o){a=a|0,o=o|0;var h=0,p=0,v=0,E=0,z=0;if(p=lt(a|0,o|0,52)|0,At()|0,p=p&15,!p)return h=o,p=a,bi(h|0),p|0;for(h=1;E=(15-h|0)*3|0,z=lt(a|0,o|0,E|0)|0,At()|0,v=ct(7,0,E|0)|0,o=o&~(At()|0),E=ct(aa(z&7)|0,0,E|0)|0,a=E|a&~v,o=At()|0|o,h>>>0<p>>>0;)h=h+1|0;return bi(o|0),a|0}function Eo(a,o){a=a|0,o=o|0;var h=0,p=0,v=0,E=0,z=0,F=0,Y=0;if(Y=lt(a|0,o|0,52)|0,At()|0,Y=Y&15,!Y)return F=o,Y=a,bi(F|0),Y|0;for(F=1,h=0;;){E=(15-F|0)*3|0,p=ct(7,0,E|0)|0,v=At()|0,z=lt(a|0,o|0,E|0)|0,At()|0,E=ct(za(z&7)|0,0,E|0)|0,z=At()|0,a=E|a&~p,o=z|o&~v;e:do if(!h)if((E&p|0)==0&(z&v|0)==0)h=0;else if(p=lt(a|0,o|0,52)|0,At()|0,p=p&15,!p)h=1;else{h=1;t:for(;;){switch(z=lt(a|0,o|0,(15-h|0)*3|0)|0,At()|0,z&7){case 1:break t;case 0:break;default:{h=1;break e}}if(h>>>0<p>>>0)h=h+1|0;else{h=1;break e}}for(h=1;;)if(v=(15-h|0)*3|0,E=ct(7,0,v|0)|0,z=o&~(At()|0),o=lt(a|0,o|0,v|0)|0,At()|0,o=ct(za(o&7)|0,0,v|0)|0,a=a&~E|o,o=z|(At()|0),h>>>0<p>>>0)h=h+1|0;else{h=1;break}}while(!1);if(F>>>0<Y>>>0)F=F+1|0;else break}return bi(o|0),a|0}function Ys(a,o){a=a|0,o=o|0;var h=0,p=0,v=0,E=0,z=0;if(p=lt(a|0,o|0,52)|0,At()|0,p=p&15,!p)return h=o,p=a,bi(h|0),p|0;for(h=1;z=(15-h|0)*3|0,E=ct(7,0,z|0)|0,v=o&~(At()|0),o=lt(a|0,o|0,z|0)|0,At()|0,o=ct(za(o&7)|0,0,z|0)|0,a=o|a&~E,o=At()|0|v,h>>>0<p>>>0;)h=h+1|0;return bi(o|0),a|0}function rs(a,o){a=a|0,o=o|0;var h=0,p=0,v=0,E=0,z=0,F=0,Y=0,J=0,ve=0;if(Y=it,it=it+64|0,F=Y+40|0,p=Y+24|0,v=Y+12|0,E=Y,ct(o|0,0,52)|0,h=At()|0|134225919,!o)return(i[a+4>>2]|0)>2||(i[a+8>>2]|0)>2||(i[a+12>>2]|0)>2?(z=0,F=0,bi(z|0),it=Y,F|0):(ct(dt(a)|0,0,45)|0,z=At()|0|h,F=-1,bi(z|0),it=Y,F|0);if(i[F>>2]=i[a>>2],i[F+4>>2]=i[a+4>>2],i[F+8>>2]=i[a+8>>2],i[F+12>>2]=i[a+12>>2],z=F+4|0,(o|0)>0)for(a=-1;i[p>>2]=i[z>>2],i[p+4>>2]=i[z+4>>2],i[p+8>>2]=i[z+8>>2],o&1?(ko(z),i[v>>2]=i[z>>2],i[v+4>>2]=i[z+4>>2],i[v+8>>2]=i[z+8>>2],La(v)):(pa(z),i[v>>2]=i[z>>2],i[v+4>>2]=i[z+4>>2],i[v+8>>2]=i[z+8>>2],ds(v)),fo(p,v,E),ur(E),ve=(15-o|0)*3|0,J=ct(7,0,ve|0)|0,h=h&~(At()|0),ve=ct(ya(E)|0,0,ve|0)|0,a=ve|a&~J,h=At()|0|h,(o|0)>1;)o=o+-1|0;else a=-1;e:do if((i[z>>2]|0)<=2&&(i[F+8>>2]|0)<=2&&(i[F+12>>2]|0)<=2){if(p=dt(F)|0,o=ct(p|0,0,45)|0,o=o|a,a=At()|0|h&-1040385,E=Qt(F)|0,!(Be(p)|0)){if((E|0)<=0)break;for(v=0;;){if(p=lt(o|0,a|0,52)|0,At()|0,p=p&15,p)for(h=1;ve=(15-h|0)*3|0,F=lt(o|0,a|0,ve|0)|0,At()|0,J=ct(7,0,ve|0)|0,a=a&~(At()|0),ve=ct(aa(F&7)|0,0,ve|0)|0,o=o&~J|ve,a=a|(At()|0),h>>>0<p>>>0;)h=h+1|0;if(v=v+1|0,(v|0)==(E|0))break e}}v=lt(o|0,a|0,52)|0,At()|0,v=v&15;t:do if(v){h=1;i:for(;;){switch(ve=lt(o|0,a|0,(15-h|0)*3|0)|0,At()|0,ve&7){case 1:break i;case 0:break;default:break t}if(h>>>0<v>>>0)h=h+1|0;else break t}if(zi(p,i[F>>2]|0)|0)for(h=1;F=(15-h|0)*3|0,J=ct(7,0,F|0)|0,ve=a&~(At()|0),a=lt(o|0,a|0,F|0)|0,At()|0,a=ct(za(a&7)|0,0,F|0)|0,o=o&~J|a,a=ve|(At()|0),h>>>0<v>>>0;)h=h+1|0;else for(h=1;ve=(15-h|0)*3|0,F=lt(o|0,a|0,ve|0)|0,At()|0,J=ct(7,0,ve|0)|0,a=a&~(At()|0),ve=ct(aa(F&7)|0,0,ve|0)|0,o=o&~J|ve,a=a|(At()|0),h>>>0<v>>>0;)h=h+1|0}while(!1);if((E|0)>0){h=0;do o=Ho(o,a)|0,a=At()|0,h=h+1|0;while((h|0)!=(E|0))}}else o=0,a=0;while(!1);return J=a,ve=o,bi(J|0),it=Y,ve|0}function Kr(a){return a=a|0,(a|0)%2|0|0}function Ns(a,o,h){a=a|0,o=o|0,h=h|0;var p=0,v=0;return v=it,it=it+16|0,p=v,o>>>0>15?(p=4,it=v,p|0):(i[a+4>>2]&2146435072|0)==2146435072||(i[a+8+4>>2]&2146435072|0)==2146435072?(p=3,it=v,p|0):(ga(a,o,p),o=rs(p,o)|0,p=At()|0,i[h>>2]=o,i[h+4>>2]=p,(o|0)==0&(p|0)==0&&Ni(23313,22674,786,22697),p=0,it=v,p|0)}function ma(a,o,h){a=a|0,o=o|0,h=h|0;var p=0,v=0,E=0,z=0;if(v=h+4|0,E=lt(a|0,o|0,52)|0,At()|0,E=E&15,z=lt(a|0,o|0,45)|0,At()|0,p=(E|0)==0,Be(z&127)|0){if(p)return z=1,z|0;p=1}else{if(p)return z=0,z|0;!(i[v>>2]|0)&&!(i[h+8>>2]|0)?p=(i[h+12>>2]|0)!=0&1:p=1}for(h=1;h&1?La(v):ds(v),z=lt(a|0,o|0,(15-h|0)*3|0)|0,At()|0,As(v,z&7),h>>>0<E>>>0;)h=h+1|0;return p|0}function Ar(a,o,h){a=a|0,o=o|0,h=h|0;var p=0,v=0,E=0,z=0,F=0,Y=0,J=0,ve=0;if(ve=it,it=it+16|0,Y=ve,J=lt(a|0,o|0,45)|0,At()|0,J=J&127,J>>>0>121)return i[h>>2]=0,i[h+4>>2]=0,i[h+8>>2]=0,i[h+12>>2]=0,J=5,it=ve,J|0;e:do if(Be(J)|0&&(E=lt(a|0,o|0,52)|0,At()|0,E=E&15,(E|0)!=0)){p=1;t:for(;;){switch(F=lt(a|0,o|0,(15-p|0)*3|0)|0,At()|0,F&7){case 5:break t;case 0:break;default:{p=o;break e}}if(p>>>0<E>>>0)p=p+1|0;else{p=o;break e}}for(v=1,p=o;o=(15-v|0)*3|0,z=ct(7,0,o|0)|0,F=p&~(At()|0),p=lt(a|0,p|0,o|0)|0,At()|0,p=ct(za(p&7)|0,0,o|0)|0,a=a&~z|p,p=F|(At()|0),v>>>0<E>>>0;)v=v+1|0}else p=o;while(!1);if(F=7696+(J*28|0)|0,i[h>>2]=i[F>>2],i[h+4>>2]=i[F+4>>2],i[h+8>>2]=i[F+8>>2],i[h+12>>2]=i[F+12>>2],!(ma(a,p,h)|0))return J=0,it=ve,J|0;if(z=h+4|0,i[Y>>2]=i[z>>2],i[Y+4>>2]=i[z+4>>2],i[Y+8>>2]=i[z+8>>2],E=lt(a|0,p|0,52)|0,At()|0,F=E&15,E&1?(ds(z),E=F+1|0):E=F,!(Be(J)|0))p=0;else{e:do if(!F)p=0;else for(o=1;;){if(v=lt(a|0,p|0,(15-o|0)*3|0)|0,At()|0,v=v&7,v|0){p=v;break e}if(o>>>0<F>>>0)o=o+1|0;else{p=0;break}}while(!1);p=(p|0)==4&1}if(!(Rs(h,E,p,0)|0))(E|0)!=(F|0)&&(i[z>>2]=i[Y>>2],i[z+4>>2]=i[Y+4>>2],i[z+8>>2]=i[Y+8>>2]);else{if(Be(J)|0)do;while(Rs(h,E,0,0)|0);(E|0)!=(F|0)&&pa(z)}return J=0,it=ve,J|0}function Nr(a,o,h){a=a|0,o=o|0,h=h|0;var p=0,v=0,E=0;return E=it,it=it+16|0,p=E,v=Ar(a,o,p)|0,v|0?(it=E,v|0):(v=lt(a|0,o|0,52)|0,At()|0,Dr(p,v&15,h),v=0,it=E,v|0)}function xr(a,o,h){a=a|0,o=o|0,h=h|0;var p=0,v=0,E=0,z=0,F=0;if(z=it,it=it+16|0,E=z,p=Ar(a,o,E)|0,p|0)return E=p,it=z,E|0;p=lt(a|0,o|0,45)|0,At()|0,p=(Be(p&127)|0)==0,v=lt(a|0,o|0,52)|0,At()|0,v=v&15;e:do if(!p){if(v|0)for(p=1;;){if(F=ct(7,0,(15-p|0)*3|0)|0,!((F&a|0)==0&((At()|0)&o|0)==0))break e;if(p>>>0<v>>>0)p=p+1|0;else break}return Ka(E,v,0,5,h),F=0,it=z,F|0}while(!1);return Ir(E,v,0,6,h),F=0,it=z,F|0}function Io(a,o,h){a=a|0,o=o|0,h=h|0;var p=0,v=0,E=0;if(v=lt(a|0,o|0,45)|0,At()|0,!(Be(v&127)|0))return v=2,i[h>>2]=v,0;if(v=lt(a|0,o|0,52)|0,At()|0,v=v&15,!v)return v=5,i[h>>2]=v,0;for(p=1;;){if(E=ct(7,0,(15-p|0)*3|0)|0,!((E&a|0)==0&((At()|0)&o|0)==0)){p=2,a=6;break}if(p>>>0<v>>>0)p=p+1|0;else{p=5,a=6;break}}return(a|0)==6&&(i[h>>2]=p),0}function oa(a,o,h){a=a|0,o=o|0,h=h|0;var p=0,v=0,E=0,z=0,F=0,Y=0,J=0,ve=0,Ie=0;Ie=it,it=it+128|0,J=Ie+112|0,E=Ie+96|0,ve=Ie,v=lt(a|0,o|0,52)|0,At()|0,F=v&15,i[J>>2]=F,z=lt(a|0,o|0,45)|0,At()|0,z=z&127;e:do if(Be(z)|0){if(F|0)for(p=1;;){if(Y=ct(7,0,(15-p|0)*3|0)|0,!((Y&a|0)==0&((At()|0)&o|0)==0)){v=0;break e}if(p>>>0<F>>>0)p=p+1|0;else break}if(v&1)v=1;else return Y=ct(F+1|0,0,52)|0,ve=At()|0|o&-15728641,J=ct(7,0,(14-F|0)*3|0)|0,ve=oa((Y|a)&~J,ve&~(At()|0),h)|0,it=Ie,ve|0}else v=0;while(!1);if(p=Ar(a,o,E)|0,!p){v?(jn(E,J,ve),Y=5):(Ws(E,J,ve),Y=6);e:do if(Be(z)|0)if(!F)a=5;else for(p=1;;){if(z=ct(7,0,(15-p|0)*3|0)|0,!((z&a|0)==0&((At()|0)&o|0)==0)){a=2;break e}if(p>>>0<F>>>0)p=p+1|0;else{a=5;break}}else a=2;while(!1);I(h|0,-1,a<<2|0)|0;e:do if(v)for(E=0;;){if(z=ve+(E<<4)|0,Er(z,i[J>>2]|0)|0,z=i[z>>2]|0,F=i[h>>2]|0,(F|0)==-1|(F|0)==(z|0))p=h;else{v=0;do{if(v=v+1|0,v>>>0>=a>>>0){p=1;break e}p=h+(v<<2)|0,F=i[p>>2]|0}while(!((F|0)==-1|(F|0)==(z|0)))}if(i[p>>2]=z,E=E+1|0,E>>>0>=Y>>>0){p=0;break}}else for(E=0;;){if(z=ve+(E<<4)|0,Rs(z,i[J>>2]|0,0,1)|0,z=i[z>>2]|0,F=i[h>>2]|0,(F|0)==-1|(F|0)==(z|0))p=h;else{v=0;do{if(v=v+1|0,v>>>0>=a>>>0){p=1;break e}p=h+(v<<2)|0,F=i[p>>2]|0}while(!((F|0)==-1|(F|0)==(z|0)))}if(i[p>>2]=z,E=E+1|0,E>>>0>=Y>>>0){p=0;break}}while(!1)}return ve=p,it=Ie,ve|0}function hs(){return 12}function ys(a,o){a=a|0,o=o|0;var h=0,p=0,v=0,E=0,z=0,F=0,Y=0;if(a>>>0>15)return F=4,F|0;if(ct(a|0,0,52)|0,F=At()|0|134225919,!a){h=0,p=0;do Be(p)|0&&(ct(p|0,0,45)|0,z=F|(At()|0),a=o+(h<<3)|0,i[a>>2]=-1,i[a+4>>2]=z,h=h+1|0),p=p+1|0;while((p|0)!=122);return h=0,h|0}h=0,z=0;do{if(Be(z)|0){for(ct(z|0,0,45)|0,p=1,v=-1,E=F|(At()|0);Y=ct(7,0,(15-p|0)*3|0)|0,v=v&~Y,E=E&~(At()|0),(p|0)!=(a|0);)p=p+1|0;Y=o+(h<<3)|0,i[Y>>2]=v,i[Y+4>>2]=E,h=h+1|0}z=z+1|0}while((z|0)!=122);return h=0,h|0}function Ca(a,o,h,p){a=a|0,o=o|0,h=h|0,p=p|0;var v=0,E=0,z=0,F=0,Y=0,J=0,ve=0,Ie=0,Oe=0,He=0,We=0,st=0,wt=0,Et=0,pt=0;if(pt=it,it=it+16|0,wt=pt,Et=lt(a|0,o|0,52)|0,At()|0,Et=Et&15,h>>>0>15)return Et=4,it=pt,Et|0;if((Et|0)<(h|0))return Et=12,it=pt,Et|0;if((Et|0)!=(h|0))if(E=ct(h|0,0,52)|0,E=E|a,F=At()|0|o&-15728641,(Et|0)>(h|0)){Y=h;do st=ct(7,0,(14-Y|0)*3|0)|0,Y=Y+1|0,E=st|E,F=At()|0|F;while((Y|0)<(Et|0));st=E}else st=E;else st=a,F=o;We=lt(st|0,F|0,45)|0,At()|0;e:do if(Be(We&127)|0){if(Y=lt(st|0,F|0,52)|0,At()|0,Y=Y&15,Y|0)for(E=1;;){if(We=ct(7,0,(15-E|0)*3|0)|0,!((We&st|0)==0&((At()|0)&F|0)==0)){J=33;break e}if(E>>>0<Y>>>0)E=E+1|0;else break}if(We=p,i[We>>2]=0,i[We+4>>2]=0,(Et|0)>(h|0)){for(We=o&-15728641,He=Et;;){if(Oe=He,He=He+-1|0,He>>>0>15|(Et|0)<(He|0)){J=19;break}if((Et|0)!=(He|0))if(E=ct(He|0,0,52)|0,E=E|a,Y=At()|0|We,(Et|0)<(Oe|0))Ie=E;else{J=He;do Ie=ct(7,0,(14-J|0)*3|0)|0,J=J+1|0,E=Ie|E,Y=At()|0|Y;while((J|0)<(Et|0));Ie=E}else Ie=a,Y=o;if(ve=lt(Ie|0,Y|0,45)|0,At()|0,!(Be(ve&127)|0))E=0;else{ve=lt(Ie|0,Y|0,52)|0,At()|0,ve=ve&15;t:do if(!ve)E=0;else for(J=1;;){if(E=lt(Ie|0,Y|0,(15-J|0)*3|0)|0,At()|0,E=E&7,E|0)break t;if(J>>>0<ve>>>0)J=J+1|0;else{E=0;break}}while(!1);E=(E|0)==0&1}if(Y=lt(a|0,o|0,(15-Oe|0)*3|0)|0,At()|0,Y=Y&7,(Y|0)==7){v=5,J=42;break}if(E=(E|0)!=0,(Y|0)==1&E){v=5,J=42;break}if(Ie=Y+(((Y|0)!=0&E)<<31>>31)|0,Ie|0&&(J=Et-Oe|0,J=Mo(7,0,J,((J|0)<0)<<31>>31)|0,ve=At()|0,E?(E=Se(J|0,ve|0,5,0)|0,E=S(E|0,At()|0,-5,-1)|0,E=H(E|0,At()|0,6,0)|0,E=S(E|0,At()|0,1,0)|0,Y=At()|0):(E=J,Y=ve),Oe=Ie+-1|0,Oe=Se(J|0,ve|0,Oe|0,((Oe|0)<0)<<31>>31|0)|0,Oe=S(E|0,Y|0,Oe|0,At()|0)|0,Ie=At()|0,ve=p,ve=S(Oe|0,Ie|0,i[ve>>2]|0,i[ve+4>>2]|0)|0,Ie=At()|0,Oe=p,i[Oe>>2]=ve,i[Oe+4>>2]=Ie),(He|0)<=(h|0)){J=37;break}}if((J|0)==19)Ni(23313,22674,1099,22710);else if((J|0)==37){z=p,v=i[z+4>>2]|0,z=i[z>>2]|0;break}else if((J|0)==42)return it=pt,v|0}else v=0,z=0}else J=33;while(!1);e:do if((J|0)==33)if(We=p,i[We>>2]=0,i[We+4>>2]=0,(Et|0)>(h|0)){for(E=Et;;){if(v=lt(a|0,o|0,(15-E|0)*3|0)|0,At()|0,v=v&7,(v|0)==7){v=5;break}if(z=Et-E|0,z=Mo(7,0,z,((z|0)<0)<<31>>31)|0,v=Se(z|0,At()|0,v|0,0)|0,z=At()|0,We=p,z=S(i[We>>2]|0,i[We+4>>2]|0,v|0,z|0)|0,v=At()|0,We=p,i[We>>2]=z,i[We+4>>2]=v,E=E+-1|0,(E|0)<=(h|0))break e}return it=pt,v|0}else v=0,z=0;while(!1);return ns(st,F,Et,wt)|0&&Ni(23313,22674,1063,22725),Et=wt,wt=i[Et+4>>2]|0,((v|0)>-1|(v|0)==-1&z>>>0>4294967295)&((wt|0)>(v|0)|((wt|0)==(v|0)?(i[Et>>2]|0)>>>0>z>>>0:0))?(Et=0,it=pt,Et|0):(Ni(23313,22674,1139,22710),0)}function Na(a,o,h,p,v,E){a=a|0,o=o|0,h=h|0,p=p|0,v=v|0,E=E|0;var z=0,F=0,Y=0,J=0,ve=0,Ie=0,Oe=0,He=0,We=0,st=0;if(Ie=it,it=it+16|0,z=Ie,v>>>0>15)return E=4,it=Ie,E|0;if(F=lt(h|0,p|0,52)|0,At()|0,F=F&15,(F|0)>(v|0))return E=12,it=Ie,E|0;if(ns(h,p,v,z)|0&&Ni(23313,22674,1063,22725),ve=z,J=i[ve+4>>2]|0,!(((o|0)>-1|(o|0)==-1&a>>>0>4294967295)&((J|0)>(o|0)|((J|0)==(o|0)?(i[ve>>2]|0)>>>0>a>>>0:0))))return E=2,it=Ie,E|0;ve=v-F|0,v=ct(v|0,0,52)|0,Y=At()|0|p&-15728641,J=E,i[J>>2]=v|h,i[J+4>>2]=Y,J=lt(h|0,p|0,45)|0,At()|0;e:do if(Be(J&127)|0){if(F|0)for(z=1;;){if(J=ct(7,0,(15-z|0)*3|0)|0,!((J&h|0)==0&((At()|0)&p|0)==0))break e;if(z>>>0<F>>>0)z=z+1|0;else break}if((ve|0)<1)return E=0,it=Ie,E|0;for(J=F^15,p=-1,Y=1,z=1;;){F=ve-Y|0,F=Mo(7,0,F,((F|0)<0)<<31>>31)|0,h=At()|0;do if(z)if(z=Se(F|0,h|0,5,0)|0,z=S(z|0,At()|0,-5,-1)|0,z=H(z|0,At()|0,6,0)|0,v=At()|0,(o|0)>(v|0)|(o|0)==(v|0)&a>>>0>z>>>0){o=S(a|0,o|0,-1,-1)|0,o=C(o|0,At()|0,z|0,v|0)|0,z=At()|0,Oe=E,We=i[Oe>>2]|0,Oe=i[Oe+4>>2]|0,st=(J+p|0)*3|0,He=ct(7,0,st|0)|0,Oe=Oe&~(At()|0),p=H(o|0,z|0,F|0,h|0)|0,a=At()|0,v=S(p|0,a|0,2,0)|0,st=ct(v|0,At()|0,st|0)|0,Oe=At()|0|Oe,v=E,i[v>>2]=st|We&~He,i[v+4>>2]=Oe,a=Se(p|0,a|0,F|0,h|0)|0,a=C(o|0,z|0,a|0,At()|0)|0,z=0,o=At()|0;break}else{st=E,He=i[st>>2]|0,st=i[st+4>>2]|0,We=ct(7,0,(J+p|0)*3|0)|0,st=st&~(At()|0),z=E,i[z>>2]=He&~We,i[z+4>>2]=st,z=1;break}else He=E,v=i[He>>2]|0,He=i[He+4>>2]|0,p=(J+p|0)*3|0,Oe=ct(7,0,p|0)|0,He=He&~(At()|0),st=H(a|0,o|0,F|0,h|0)|0,z=At()|0,p=ct(st|0,z|0,p|0)|0,He=At()|0|He,We=E,i[We>>2]=p|v&~Oe,i[We+4>>2]=He,z=Se(st|0,z|0,F|0,h|0)|0,a=C(a|0,o|0,z|0,At()|0)|0,z=0,o=At()|0;while(!1);if((ve|0)>(Y|0))p=~Y,Y=Y+1|0;else{o=0;break}}return it=Ie,o|0}while(!1);if((ve|0)<1)return st=0,it=Ie,st|0;for(v=F^15,z=1;;)if(We=ve-z|0,We=Mo(7,0,We,((We|0)<0)<<31>>31)|0,st=At()|0,Y=E,h=i[Y>>2]|0,Y=i[Y+4>>2]|0,F=(v-z|0)*3|0,p=ct(7,0,F|0)|0,Y=Y&~(At()|0),Oe=H(a|0,o|0,We|0,st|0)|0,He=At()|0,F=ct(Oe|0,He|0,F|0)|0,Y=At()|0|Y,J=E,i[J>>2]=F|h&~p,i[J+4>>2]=Y,st=Se(Oe|0,He|0,We|0,st|0)|0,a=C(a|0,o|0,st|0,At()|0)|0,o=At()|0,(ve|0)<=(z|0)){o=0;break}else z=z+1|0;return it=Ie,o|0}function Zo(a,o,h,p){a=a|0,o=o|0,h=h|0,p=p|0;var v=0,E=0;v=lt(o|0,h|0,52)|0,At()|0,v=v&15,(o|0)==0&(h|0)==0|((p|0)>15|(v|0)>(p|0))?(p=-1,v=-1,o=0,h=0):(E=Oa(o,h,v+1|0,p)|0,h=(At()|0)&-15728641,o=ct(p|0,0,52)|0,o=E|o,h=h|(At()|0),E=($n(o,h)|0)==0,p=E?-1:p),E=a,i[E>>2]=o,i[E+4>>2]=h,i[a+8>>2]=v,i[a+12>>2]=p}function XA(a){a=a|0;var o=0,h=0,p=0,v=0,E=0,z=0,F=0,Y=0,J=0;if(h=a,o=i[h>>2]|0,h=i[h+4>>2]|0,!((o|0)==0&(h|0)==0)&&(p=lt(o|0,h|0,52)|0,At()|0,p=p&15,F=ct(1,0,(p^15)*3|0)|0,o=S(F|0,At()|0,o|0,h|0)|0,h=At()|0,F=a,i[F>>2]=o,i[F+4>>2]=h,F=a+8|0,z=i[F>>2]|0,!((p|0)<(z|0)))){for(Y=a+12|0,E=p;;){if((E|0)==(z|0)){p=5;break}if(J=(E|0)==(i[Y>>2]|0),v=(15-E|0)*3|0,p=lt(o|0,h|0,v|0)|0,At()|0,p=p&7,J&((p|0)==1&!0)){p=7;break}if(!((p|0)==7&!0)){p=10;break}if(J=ct(1,0,v|0)|0,o=S(o|0,h|0,J|0,At()|0)|0,h=At()|0,J=a,i[J>>2]=o,i[J+4>>2]=h,(E|0)>(z|0))E=E+-1|0;else{p=10;break}}if((p|0)==5){J=a,i[J>>2]=0,i[J+4>>2]=0,i[F>>2]=-1,i[Y>>2]=-1;return}else if((p|0)==7){z=ct(1,0,v|0)|0,z=S(o|0,h|0,z|0,At()|0)|0,F=At()|0,J=a,i[J>>2]=z,i[J+4>>2]=F,i[Y>>2]=E+-1;return}else if((p|0)==10)return}}function mo(a){a=+a;var o=0;return o=a<0?a+6.283185307179586:a,+(a>=6.283185307179586?o+-6.283185307179586:o)}function $s(a,o){return a=a|0,o=o|0,+It(+(+ue[a>>3]-+ue[o>>3]))<17453292519943298e-27?(o=+It(+(+ue[a+8>>3]-+ue[o+8>>3]))<17453292519943298e-27,o|0):(o=0,o|0)}function Ot(a,o){a=a|0,o=o|0;var h=0,p=0,v=0,E=0;return v=+ue[o>>3],p=+ue[a>>3],E=+ei(+((v-p)*.5)),h=+ei(+((+ue[o+8>>3]-+ue[a+8>>3])*.5)),h=E*E+h*(+Zt(+v)*+Zt(+p)*h),+(+en(+ +Bt(+h),+ +Bt(+(1-h)))*2)}function si(a,o){a=a|0,o=o|0;var h=0,p=0,v=0,E=0;return v=+ue[o>>3],p=+ue[a>>3],E=+ei(+((v-p)*.5)),h=+ei(+((+ue[o+8>>3]-+ue[a+8>>3])*.5)),h=E*E+h*(+Zt(+v)*+Zt(+p)*h),+(+en(+ +Bt(+h),+ +Bt(+(1-h)))*2*6371.007180918475)}function Jt(a,o){a=a|0,o=o|0;var h=0,p=0,v=0,E=0;return v=+ue[o>>3],p=+ue[a>>3],E=+ei(+((v-p)*.5)),h=+ei(+((+ue[o+8>>3]-+ue[a+8>>3])*.5)),h=E*E+h*(+Zt(+v)*+Zt(+p)*h),+(+en(+ +Bt(+h),+ +Bt(+(1-h)))*2*6371.007180918475*1e3)}function at(a,o){a=a|0,o=o|0;var h=0,p=0,v=0,E=0,z=0;return E=+ue[o>>3],p=+Zt(+E),v=+ue[o+8>>3]-+ue[a+8>>3],z=p*+ei(+v),h=+ue[a>>3],+ +en(+z,+(+ei(+E)*+Zt(+h)-+Zt(+v)*(p*+ei(+h))))}function yt(a,o,h,p){a=a|0,o=+o,h=+h,p=p|0;var v=0,E=0,z=0,F=0;if(h<1e-16){i[p>>2]=i[a>>2],i[p+4>>2]=i[a+4>>2],i[p+8>>2]=i[a+8>>2],i[p+12>>2]=i[a+12>>2];return}E=o<0?o+6.283185307179586:o,E=o>=6.283185307179586?E+-6.283185307179586:E;do if(E<1e-16)o=+ue[a>>3]+h,ue[p>>3]=o,v=p;else{if(v=+It(+(E+-3.141592653589793))<1e-16,o=+ue[a>>3],v){o=o-h,ue[p>>3]=o,v=p;break}if(z=+Zt(+h),h=+ei(+h),o=z*+ei(+o)+ +Zt(+E)*(h*+Zt(+o)),o=o>1?1:o,o=+wn(+(o<-1?-1:o)),ue[p>>3]=o,+It(+(o+-1.5707963267948966))<1e-16){ue[p>>3]=1.5707963267948966,ue[p+8>>3]=0;return}if(+It(+(o+1.5707963267948966))<1e-16){ue[p>>3]=-1.5707963267948966,ue[p+8>>3]=0;return}if(F=+Zt(+o),E=h*+ei(+E)/F,h=+ue[a>>3],o=(z-+ei(+o)*+ei(+h))/+Zt(+h)/F,z=E>1?1:E,o=o>1?1:o,o=+ue[a+8>>3]+ +en(+(z<-1?-1:z),+(o<-1?-1:o)),o>3.141592653589793)do o=o+-6.283185307179586;while(o>3.141592653589793);if(o<-3.141592653589793)do o=o+6.283185307179586;while(o<-3.141592653589793);ue[p+8>>3]=o;return}while(!1);if(+It(+(o+-1.5707963267948966))<1e-16){ue[v>>3]=1.5707963267948966,ue[p+8>>3]=0;return}if(+It(+(o+1.5707963267948966))<1e-16){ue[v>>3]=-1.5707963267948966,ue[p+8>>3]=0;return}if(o=+ue[a+8>>3],o>3.141592653589793)do o=o+-6.283185307179586;while(o>3.141592653589793);if(o<-3.141592653589793)do o=o+6.283185307179586;while(o<-3.141592653589793);ue[p+8>>3]=o}function Gt(a,o){return a=a|0,o=o|0,a>>>0>15?(o=4,o|0):(ue[o>>3]=+ue[20528+(a<<3)>>3],o=0,o|0)}function ai(a,o){return a=a|0,o=o|0,a>>>0>15?(o=4,o|0):(ue[o>>3]=+ue[20656+(a<<3)>>3],o=0,o|0)}function Hi(a,o){return a=a|0,o=o|0,a>>>0>15?(o=4,o|0):(ue[o>>3]=+ue[20784+(a<<3)>>3],o=0,o|0)}function mn(a,o){return a=a|0,o=o|0,a>>>0>15?(o=4,o|0):(ue[o>>3]=+ue[20912+(a<<3)>>3],o=0,o|0)}function Pn(a,o){a=a|0,o=o|0;var h=0;return a>>>0>15?(o=4,o|0):(h=Mo(7,0,a,((a|0)<0)<<31>>31)|0,h=Se(h|0,At()|0,120,0)|0,a=At()|0,i[o>>2]=h|2,i[o+4>>2]=a,o=0,o|0)}function xn(a,o,h){a=a|0,o=o|0,h=h|0;var p=0,v=0,E=0,z=0,F=0,Y=0,J=0,ve=0,Ie=0,Oe=0;return Oe=+ue[o>>3],ve=+ue[a>>3],Y=+ei(+((Oe-ve)*.5)),E=+ue[o+8>>3],J=+ue[a+8>>3],z=+ei(+((E-J)*.5)),F=+Zt(+ve),Ie=+Zt(+Oe),z=Y*Y+z*(Ie*F*z),z=+en(+ +Bt(+z),+ +Bt(+(1-z)))*2,Y=+ue[h>>3],Oe=+ei(+((Y-Oe)*.5)),p=+ue[h+8>>3],E=+ei(+((p-E)*.5)),v=+Zt(+Y),E=Oe*Oe+E*(Ie*v*E),E=+en(+ +Bt(+E),+ +Bt(+(1-E)))*2,Y=+ei(+((ve-Y)*.5)),p=+ei(+((J-p)*.5)),p=Y*Y+p*(F*v*p),p=+en(+ +Bt(+p),+ +Bt(+(1-p)))*2,v=(z+E+p)*.5,+(+An(+ +Bt(+(+Ti(+(v*.5))*+Ti(+((v-z)*.5))*+Ti(+((v-E)*.5))*+Ti(+((v-p)*.5)))))*4)}function jr(a,o,h){a=a|0,o=o|0,h=h|0;var p=0,v=0,E=0,z=0,F=0;if(F=it,it=it+192|0,E=F+168|0,z=F,v=Nr(a,o,E)|0,v|0)return h=v,it=F,h|0;if(xr(a,o,z)|0&&Ni(23313,22742,386,22751),o=i[z>>2]|0,(o|0)>0){if(p=+xn(z+8|0,z+8+(((o|0)!=1&1)<<4)|0,E)+0,(o|0)!=1){a=1;do v=a,a=a+1|0,p=p+ +xn(z+8+(v<<4)|0,z+8+(((a|0)%(o|0)|0)<<4)|0,E);while((a|0)<(o|0))}}else p=0;return ue[h>>3]=p,h=0,it=F,h|0}function xs(a,o,h){return a=a|0,o=o|0,h=h|0,a=jr(a,o,h)|0,a|0||(ue[h>>3]=+ue[h>>3]*6371.007180918475*6371.007180918475),a|0}function Is(a,o,h){return a=a|0,o=o|0,h=h|0,a=jr(a,o,h)|0,a|0||(ue[h>>3]=+ue[h>>3]*6371.007180918475*6371.007180918475*1e3*1e3),a|0}function Vs(a,o,h){a=a|0,o=o|0,h=h|0;var p=0,v=0,E=0,z=0,F=0,Y=0,J=0,ve=0;if(F=it,it=it+176|0,z=F,a=_s(a,o,z)|0,a|0)return z=a,it=F,z|0;if(ue[h>>3]=0,a=i[z>>2]|0,(a|0)<=1)return z=0,it=F,z|0;o=a+-1|0,a=0,p=+ue[z+8>>3],v=+ue[z+16>>3],E=0;do a=a+1|0,J=p,p=+ue[z+8+(a<<4)>>3],ve=+ei(+((p-J)*.5)),Y=v,v=+ue[z+8+(a<<4)+8>>3],Y=+ei(+((v-Y)*.5)),Y=ve*ve+Y*(+Zt(+p)*+Zt(+J)*Y),E=E+ +en(+ +Bt(+Y),+ +Bt(+(1-Y)))*2;while((a|0)<(o|0));return ue[h>>3]=E,z=0,it=F,z|0}function EA(a,o,h){a=a|0,o=o|0,h=h|0;var p=0,v=0,E=0,z=0,F=0,Y=0,J=0,ve=0;if(F=it,it=it+176|0,z=F,a=_s(a,o,z)|0,a|0)return z=a,E=+ue[h>>3],E=E*6371.007180918475,ue[h>>3]=E,it=F,z|0;if(ue[h>>3]=0,a=i[z>>2]|0,(a|0)<=1)return z=0,E=0,E=E*6371.007180918475,ue[h>>3]=E,it=F,z|0;o=a+-1|0,a=0,p=+ue[z+8>>3],v=+ue[z+16>>3],E=0;do a=a+1|0,J=p,p=+ue[z+8+(a<<4)>>3],ve=+ei(+((p-J)*.5)),Y=v,v=+ue[z+8+(a<<4)+8>>3],Y=+ei(+((v-Y)*.5)),Y=ve*ve+Y*(+Zt(+J)*+Zt(+p)*Y),E=E+ +en(+ +Bt(+Y),+ +Bt(+(1-Y)))*2;while((a|0)!=(o|0));return ue[h>>3]=E,z=0,ve=E,ve=ve*6371.007180918475,ue[h>>3]=ve,it=F,z|0}function Pr(a,o,h){a=a|0,o=o|0,h=h|0;var p=0,v=0,E=0,z=0,F=0,Y=0,J=0,ve=0;if(F=it,it=it+176|0,z=F,a=_s(a,o,z)|0,a|0)return z=a,E=+ue[h>>3],E=E*6371.007180918475,E=E*1e3,ue[h>>3]=E,it=F,z|0;if(ue[h>>3]=0,a=i[z>>2]|0,(a|0)<=1)return z=0,E=0,E=E*6371.007180918475,E=E*1e3,ue[h>>3]=E,it=F,z|0;o=a+-1|0,a=0,p=+ue[z+8>>3],v=+ue[z+16>>3],E=0;do a=a+1|0,J=p,p=+ue[z+8+(a<<4)>>3],ve=+ei(+((p-J)*.5)),Y=v,v=+ue[z+8+(a<<4)+8>>3],Y=+ei(+((v-Y)*.5)),Y=ve*ve+Y*(+Zt(+J)*+Zt(+p)*Y),E=E+ +en(+ +Bt(+Y),+ +Bt(+(1-Y)))*2;while((a|0)!=(o|0));return ue[h>>3]=E,z=0,ve=E,ve=ve*6371.007180918475,ve=ve*1e3,ue[h>>3]=ve,it=F,z|0}function Jl(a){a=a|0;var o=0,h=0,p=0;return o=b(1,12)|0,o||Ni(22832,22787,49,22845),h=a+4|0,p=i[h>>2]|0,p|0?(p=p+8|0,i[p>>2]=o,i[h>>2]=o,o|0):(i[a>>2]|0&&Ni(22862,22787,61,22885),p=a,i[p>>2]=o,i[h>>2]=o,o|0)}function KA(a,o){a=a|0,o=o|0;var h=0,p=0;return p=Ur(24)|0,p||Ni(22899,22787,78,22913),i[p>>2]=i[o>>2],i[p+4>>2]=i[o+4>>2],i[p+8>>2]=i[o+8>>2],i[p+12>>2]=i[o+12>>2],i[p+16>>2]=0,o=a+4|0,h=i[o>>2]|0,h|0?(i[h+16>>2]=p,i[o>>2]=p,p|0):(i[a>>2]|0&&Ni(22928,22787,82,22913),i[a>>2]=p,i[o>>2]=p,p|0)}function ka(a){a=a|0;var o=0,h=0,p=0,v=0;if(a)for(p=1;;){if(o=i[a>>2]|0,o|0)do{if(h=i[o>>2]|0,h|0)do v=h,h=i[h+16>>2]|0,_(v);while(h|0);v=o,o=i[o+8>>2]|0,_(v)}while(o|0);if(o=a,a=i[a+8>>2]|0,p||_(o),a)p=0;else break}}function _o(a){a=a|0;var o=0,h=0,p=0,v=0,E=0,z=0,F=0,Y=0,J=0,ve=0,Ie=0,Oe=0,He=0,We=0,st=0,wt=0,Et=0,pt=0,bt=0,St=0,vi=0,$t=0,ri=0,ni=0,_n=0,Ki=0,Oi=0,Ui=0,tn=0,ji=0,Qn=0,fn=0;if(v=a+8|0,i[v>>2]|0)return fn=1,fn|0;if(p=i[a>>2]|0,!p)return fn=0,fn|0;o=p,h=0;do h=h+1|0,o=i[o+8>>2]|0;while(o|0);if(h>>>0<2)return fn=0,fn|0;ji=Ur(h<<2)|0,ji||Ni(22948,22787,317,22967),tn=Ur(h<<5)|0,tn||Ni(22989,22787,321,22967),i[a>>2]=0,$t=a+4|0,i[$t>>2]=0,i[v>>2]=0,h=0,Ui=0,vi=0,Ie=0;e:for(;;){if(ve=i[p>>2]|0,ve){E=0,z=ve;do{if(Y=+ue[z+8>>3],o=z,z=i[z+16>>2]|0,J=(z|0)==0,v=J?ve:z,F=+ue[v+8>>3],+It(+(Y-F))>3.141592653589793){fn=14;break}E=E+(F-Y)*(+ue[o>>3]+ +ue[v>>3])}while(!J);if((fn|0)==14){fn=0,E=0,o=ve;do St=+ue[o+8>>3],Oi=o+16|0,Ki=i[Oi>>2]|0,Ki=Ki|0?Ki:ve,bt=+ue[Ki+8>>3],E=E+(+ue[o>>3]+ +ue[Ki>>3])*((bt<0?bt+6.283185307179586:bt)-(St<0?St+6.283185307179586:St)),o=i[(o|0?Oi:p)>>2]|0;while(o|0)}E>0?(i[ji+(Ui<<2)>>2]=p,Ui=Ui+1|0,v=vi,o=Ie):fn=19}else fn=19;if((fn|0)==19){fn=0;do if(h){if(o=h+8|0,i[o>>2]|0){fn=21;break e}if(h=b(1,12)|0,!h){fn=23;break e}i[o>>2]=h,v=h+4|0,z=h,o=Ie}else if(Ie){v=$t,z=Ie+8|0,o=p,h=a;break}else if(i[a>>2]|0){fn=27;break e}else{v=$t,z=a,o=p,h=a;break}while(!1);if(i[z>>2]=p,i[v>>2]=p,z=tn+(vi<<5)|0,J=i[p>>2]|0,J){for(ve=tn+(vi<<5)+8|0,ue[ve>>3]=17976931348623157e292,Ie=tn+(vi<<5)+24|0,ue[Ie>>3]=17976931348623157e292,ue[z>>3]=-17976931348623157e292,Oe=tn+(vi<<5)+16|0,ue[Oe>>3]=-17976931348623157e292,Et=17976931348623157e292,pt=-17976931348623157e292,v=0,He=J,Y=17976931348623157e292,st=17976931348623157e292,wt=-17976931348623157e292,F=-17976931348623157e292;E=+ue[He>>3],St=+ue[He+8>>3],He=i[He+16>>2]|0,We=(He|0)==0,bt=+ue[(We?J:He)+8>>3],E<Y&&(ue[ve>>3]=E,Y=E),St<st&&(ue[Ie>>3]=St,st=St),E>wt?ue[z>>3]=E:E=wt,St>F&&(ue[Oe>>3]=St,F=St),Et=St>0&St<Et?St:Et,pt=St<0&St>pt?St:pt,v=v|+It(+(St-bt))>3.141592653589793,!We;)wt=E;v&&(ue[Oe>>3]=pt,ue[Ie>>3]=Et)}else i[z>>2]=0,i[z+4>>2]=0,i[z+8>>2]=0,i[z+12>>2]=0,i[z+16>>2]=0,i[z+20>>2]=0,i[z+24>>2]=0,i[z+28>>2]=0;v=vi+1|0}if(Oi=p+8|0,p=i[Oi>>2]|0,i[Oi>>2]=0,p)vi=v,Ie=o;else{fn=45;break}}if((fn|0)==21)Ni(22765,22787,35,22799);else if((fn|0)==23)Ni(22819,22787,37,22799);else if((fn|0)==27)Ni(22862,22787,61,22885);else if((fn|0)==45){e:do if((Ui|0)>0){for(Oi=(v|0)==0,_n=v<<2,Ki=(a|0)==0,ni=0,o=0;;){if(ri=i[ji+(ni<<2)>>2]|0,Oi)fn=73;else{if(vi=Ur(_n)|0,!vi){fn=50;break}if($t=Ur(_n)|0,!$t){fn=52;break}t:do if(Ki)h=0;else{for(v=0,h=0,z=a;p=tn+(v<<5)|0,Zi(i[z>>2]|0,p,i[ri>>2]|0)|0?(i[vi+(h<<2)>>2]=z,i[$t+(h<<2)>>2]=p,We=h+1|0):We=h,z=i[z+8>>2]|0,z;)v=v+1|0,h=We;if((We|0)>0)if(p=i[vi>>2]|0,(We|0)==1)h=p;else for(Oe=0,He=-1,h=p,Ie=p;;){for(J=i[Ie>>2]|0,p=0,z=0;v=i[i[vi+(z<<2)>>2]>>2]|0,(v|0)==(J|0)?ve=p:ve=p+((Zi(v,i[$t+(z<<2)>>2]|0,i[J>>2]|0)|0)&1)|0,z=z+1|0,(z|0)!=(We|0);)p=ve;if(v=(ve|0)>(He|0),h=v?Ie:h,p=Oe+1|0,(p|0)==(We|0))break t;Oe=p,He=v?ve:He,Ie=i[vi+(p<<2)>>2]|0}else h=0}while(!1);if(_(vi),_($t),h){if(v=h+4|0,p=i[v>>2]|0,p)h=p+8|0;else if(i[h>>2]|0){fn=70;break}i[h>>2]=ri,i[v>>2]=ri}else fn=73}if((fn|0)==73){if(fn=0,o=i[ri>>2]|0,o|0)do $t=o,o=i[o+16>>2]|0,_($t);while(o|0);_(ri),o=1}if(ni=ni+1|0,(ni|0)>=(Ui|0)){Qn=o;break e}}(fn|0)==50?Ni(23004,22787,249,23023):(fn|0)==52?Ni(23042,22787,252,23023):(fn|0)==70&&Ni(22862,22787,61,22885)}else Qn=0;while(!1);return _(ji),_(tn),fn=Qn,fn|0}return 0}function Zi(a,o,h){a=a|0,o=o|0,h=h|0;var p=0,v=0,E=0,z=0,F=0,Y=0,J=0,ve=0;if(!(sa(o,h)|0)||(o=ra(o)|0,p=+ue[h>>3],v=+ue[h+8>>3],v=o&v<0?v+6.283185307179586:v,a=i[a>>2]|0,!a))return a=0,a|0;if(o){o=0,J=v,h=a;e:for(;;){for(;z=+ue[h>>3],v=+ue[h+8>>3],h=h+16|0,ve=i[h>>2]|0,ve=ve|0?ve:a,E=+ue[ve>>3],F=+ue[ve+8>>3],z>E?(Y=z,z=F):(Y=E,E=z,z=v,v=F),p=p==E|p==Y?p+2220446049250313e-31:p,!!(p<E|p>Y);)if(h=i[h>>2]|0,!h){h=22;break e}if(F=z<0?z+6.283185307179586:z,z=v<0?v+6.283185307179586:v,J=F==J|z==J?J+-2220446049250313e-31:J,Y=F+(z-F)*((p-E)/(Y-E)),(Y<0?Y+6.283185307179586:Y)>J&&(o=o^1),h=i[h>>2]|0,!h){h=22;break}}if((h|0)==22)return o|0}else{o=0,J=v,h=a;e:for(;;){for(;z=+ue[h>>3],v=+ue[h+8>>3],h=h+16|0,ve=i[h>>2]|0,ve=ve|0?ve:a,E=+ue[ve>>3],F=+ue[ve+8>>3],z>E?(Y=z,z=F):(Y=E,E=z,z=v,v=F),p=p==E|p==Y?p+2220446049250313e-31:p,!!(p<E|p>Y);)if(h=i[h>>2]|0,!h){h=22;break e}if(J=z==J|v==J?J+-2220446049250313e-31:J,z+(v-z)*((p-E)/(Y-E))>J&&(o=o^1),h=i[h>>2]|0,!h){h=22;break}}if((h|0)==22)return o|0}return 0}function Va(a,o,h,p,v){a=a|0,o=o|0,h=h|0,p=p|0,v=v|0;var E=0,z=0,F=0,Y=0,J=0,ve=0,Ie=0,Oe=0,He=0,We=0,st=0,wt=0,Et=0,pt=0;if(pt=it,it=it+32|0,Et=pt+16|0,wt=pt,E=lt(a|0,o|0,52)|0,At()|0,E=E&15,He=lt(h|0,p|0,52)|0,At()|0,(E|0)!=(He&15|0))return Et=12,it=pt,Et|0;if(J=lt(a|0,o|0,45)|0,At()|0,J=J&127,ve=lt(h|0,p|0,45)|0,At()|0,ve=ve&127,J>>>0>121|ve>>>0>121)return Et=5,it=pt,Et|0;if(He=(J|0)!=(ve|0),He){if(F=Ln(J,ve)|0,(F|0)==7)return Et=1,it=pt,Et|0;Y=Ln(ve,J)|0,(Y|0)==7?Ni(23066,23090,161,23100):(We=F,z=Y)}else We=0,z=0;Ie=Be(J)|0,Oe=Be(ve)|0,i[Et>>2]=0,i[Et+4>>2]=0,i[Et+8>>2]=0,i[Et+12>>2]=0;do if(We){if(ve=i[4272+(J*28|0)+(We<<2)>>2]|0,F=(ve|0)>0,Oe)if(F){J=0,Y=h,F=p;do Y=Eo(Y,F)|0,F=At()|0,z=za(z)|0,(z|0)==1&&(z=za(1)|0),J=J+1|0;while((J|0)!=(ve|0));ve=z,J=Y,Y=F}else ve=z,J=h,Y=p;else if(F){J=0,Y=h,F=p;do Y=Ys(Y,F)|0,F=At()|0,z=za(z)|0,J=J+1|0;while((J|0)!=(ve|0));ve=z,J=Y,Y=F}else ve=z,J=h,Y=p;if(ma(J,Y,Et)|0,He||Ni(23115,23090,191,23100),F=(Ie|0)!=0,z=(Oe|0)!=0,F&z&&Ni(23142,23090,192,23100),F){if(z=vs(a,o)|0,(z|0)==7){E=5;break}if(nt[21872+(z*7|0)+We>>0]|0){E=1;break}Y=i[21040+(z*28|0)+(We<<2)>>2]|0,J=Y}else if(z){if(z=vs(J,Y)|0,(z|0)==7){E=5;break}if(nt[21872+(z*7|0)+ve>>0]|0){E=1;break}J=0,Y=i[21040+(ve*28|0)+(z<<2)>>2]|0}else J=0,Y=0;if((J|Y|0)<0)E=5;else{if((Y|0)>0){F=Et+4|0,z=0;do Ls(F),z=z+1|0;while((z|0)!=(Y|0))}if(i[wt>>2]=0,i[wt+4>>2]=0,i[wt+8>>2]=0,As(wt,We),E|0)for(;Kr(E)|0?La(wt):ds(wt),(E|0)>1;)E=E+-1|0;if((J|0)>0){E=0;do Ls(wt),E=E+1|0;while((E|0)!=(J|0))}st=Et+4|0,dr(st,wt,st),ur(st),st=51}}else if(ma(h,p,Et)|0,(Ie|0)!=0&(Oe|0)!=0)if((ve|0)!=(J|0)&&Ni(23173,23090,261,23100),z=vs(a,o)|0,E=vs(h,p)|0,(z|0)==7|(E|0)==7)E=5;else if(nt[21872+(z*7|0)+E>>0]|0)E=1;else if(z=i[21040+(z*28|0)+(E<<2)>>2]|0,(z|0)>0){F=Et+4|0,E=0;do Ls(F),E=E+1|0;while((E|0)!=(z|0));st=51}else st=51;else st=51;while(!1);return(st|0)==51&&(E=Et+4|0,i[v>>2]=i[E>>2],i[v+4>>2]=i[E+4>>2],i[v+8>>2]=i[E+8>>2],E=0),Et=E,it=pt,Et|0}function Ua(a,o,h,p){a=a|0,o=o|0,h=h|0,p=p|0;var v=0,E=0,z=0,F=0,Y=0,J=0,ve=0,Ie=0,Oe=0,He=0,We=0,st=0,wt=0,Et=0,pt=0,bt=0;if(st=it,it=it+48|0,J=st+36|0,z=st+24|0,F=st+12|0,Y=st,v=lt(a|0,o|0,52)|0,At()|0,v=v&15,Oe=lt(a|0,o|0,45)|0,At()|0,Oe=Oe&127,Oe>>>0>121)return p=5,it=st,p|0;if(ve=Be(Oe)|0,ct(v|0,0,52)|0,wt=At()|0|134225919,E=p,i[E>>2]=-1,i[E+4>>2]=wt,!v)return v=ya(h)|0,(v|0)==7||(v=En(Oe,v)|0,(v|0)==127)?(wt=1,it=st,wt|0):(He=ct(v|0,0,45)|0,We=At()|0,Oe=p,We=i[Oe+4>>2]&-1040385|We,wt=p,i[wt>>2]=i[Oe>>2]|He,i[wt+4>>2]=We,wt=0,it=st,wt|0);for(i[J>>2]=i[h>>2],i[J+4>>2]=i[h+4>>2],i[J+8>>2]=i[h+8>>2],h=v;;){if(E=h,h=h+-1|0,i[z>>2]=i[J>>2],i[z+4>>2]=i[J+4>>2],i[z+8>>2]=i[J+8>>2],Kr(E)|0){if(v=Ya(J)|0,v|0){h=13;break}i[F>>2]=i[J>>2],i[F+4>>2]=i[J+4>>2],i[F+8>>2]=i[J+8>>2],La(F)}else{if(v=Hr(J)|0,v|0){h=13;break}i[F>>2]=i[J>>2],i[F+4>>2]=i[J+4>>2],i[F+8>>2]=i[J+8>>2],ds(F)}if(fo(z,F,Y),ur(Y),v=p,pt=i[v>>2]|0,v=i[v+4>>2]|0,bt=(15-E|0)*3|0,Et=ct(7,0,bt|0)|0,v=v&~(At()|0),bt=ct(ya(Y)|0,0,bt|0)|0,v=At()|0|v,wt=p,i[wt>>2]=bt|pt&~Et,i[wt+4>>2]=v,(E|0)<=1){h=14;break}}e:do if((h|0)!=13&&(h|0)==14)if((i[J>>2]|0)<=1&&(i[J+4>>2]|0)<=1&&(i[J+8>>2]|0)<=1){h=ya(J)|0,v=En(Oe,h)|0,(v|0)==127?Y=0:Y=Be(v)|0;t:do if(h){if(ve){if(v=vs(a,o)|0,(v|0)==7){v=5;break e}if(E=i[21248+(v*28|0)+(h<<2)>>2]|0,(E|0)>0){v=h,h=0;do v=aa(v)|0,h=h+1|0;while((h|0)!=(E|0))}else v=h;if((v|0)==1){v=9;break e}h=En(Oe,v)|0,(h|0)==127&&Ni(23200,23090,411,23230),Be(h)|0?Ni(23245,23090,412,23230):(We=h,He=E,Ie=v)}else We=v,He=0,Ie=h;if(F=i[4272+(Oe*28|0)+(Ie<<2)>>2]|0,(F|0)<=-1&&Ni(23276,23090,419,23230),!Y){if((He|0)<0){v=5;break e}if(He|0){E=p,v=0,h=i[E>>2]|0,E=i[E+4>>2]|0;do h=Sa(h,E)|0,E=At()|0,bt=p,i[bt>>2]=h,i[bt+4>>2]=E,v=v+1|0;while((v|0)<(He|0))}if((F|0)<=0){v=We,h=58;break}for(E=p,v=0,h=i[E>>2]|0,E=i[E+4>>2]|0;;)if(h=Sa(h,E)|0,E=At()|0,bt=p,i[bt>>2]=h,i[bt+4>>2]=E,v=v+1|0,(v|0)==(F|0)){v=We,h=58;break t}}if(z=Ln(We,Oe)|0,(z|0)==7&&Ni(23066,23090,428,23230),v=p,h=i[v>>2]|0,v=i[v+4>>2]|0,(F|0)>0){E=0;do h=Sa(h,v)|0,v=At()|0,bt=p,i[bt>>2]=h,i[bt+4>>2]=v,E=E+1|0;while((E|0)!=(F|0))}if(v=vs(h,v)|0,(v|0)==7&&Ni(23313,23090,440,23230),h=Ye(We)|0,h=i[(h?21664:21456)+(z*28|0)+(v<<2)>>2]|0,(h|0)<0&&Ni(23313,23090,454,23230),!h)v=We,h=58;else{z=p,v=0,E=i[z>>2]|0,z=i[z+4>>2]|0;do E=Ho(E,z)|0,z=At()|0,bt=p,i[bt>>2]=E,i[bt+4>>2]=z,v=v+1|0;while((v|0)<(h|0));v=We,h=58}}else if((ve|0)!=0&(Y|0)!=0){if(h=vs(a,o)|0,E=p,E=vs(i[E>>2]|0,i[E+4>>2]|0)|0,(h|0)==7|(E|0)==7){v=5;break e}if(E=i[21248+(h*28|0)+(E<<2)>>2]|0,(E|0)<0){v=5;break e}if(!E)h=59;else{F=p,h=0,z=i[F>>2]|0,F=i[F+4>>2]|0;do z=Sa(z,F)|0,F=At()|0,bt=p,i[bt>>2]=z,i[bt+4>>2]=F,h=h+1|0;while((h|0)<(E|0));h=58}}else h=58;while(!1);if((h|0)==58&&Y&&(h=59),(h|0)==59&&(bt=p,(vs(i[bt>>2]|0,i[bt+4>>2]|0)|0)==1)){v=9;break}bt=p,Et=i[bt>>2]|0,bt=i[bt+4>>2]&-1040385,pt=ct(v|0,0,45)|0,bt=bt|(At()|0),v=p,i[v>>2]=Et|pt,i[v+4>>2]=bt,v=0}else v=1;while(!1);return bt=v,it=st,bt|0}function Ea(a,o,h,p,v,E){a=a|0,o=o|0,h=h|0,p=p|0,v=v|0,E=E|0;var z=0,F=0;return F=it,it=it+16|0,z=F,v?a=15:(a=Va(a,o,h,p,z)|0,a||(kl(z,E),a=0)),it=F,a|0}function JA(a,o,h,p,v){a=a|0,o=o|0,h=h|0,p=p|0,v=v|0;var E=0,z=0;return z=it,it=it+16|0,E=z,p?h=15:(h=zs(h,E)|0,h||(h=Ua(a,o,E,v)|0)),it=z,h|0}function Vi(a,o,h,p,v){a=a|0,o=o|0,h=h|0,p=p|0,v=v|0;var E=0,z=0,F=0,Y=0;return Y=it,it=it+32|0,z=Y+12|0,F=Y,E=Va(a,o,a,o,z)|0,E|0?(F=E,it=Y,F|0):(a=Va(a,o,h,p,F)|0,a|0?(F=a,it=Y,F|0):(z=pr(z,F)|0,F=v,i[F>>2]=z,i[F+4>>2]=((z|0)<0)<<31>>31,F=0,it=Y,F|0))}function IA(a,o,h,p,v){a=a|0,o=o|0,h=h|0,p=p|0,v=v|0;var E=0,z=0,F=0,Y=0;return Y=it,it=it+32|0,z=Y+12|0,F=Y,E=Va(a,o,a,o,z)|0,!E&&(E=Va(a,o,h,p,F)|0,!E)?(p=pr(z,F)|0,p=S(p|0,((p|0)<0)<<31>>31|0,1,0)|0,z=At()|0,F=v,i[F>>2]=p,i[F+4>>2]=z,F=0,it=Y,F|0):(F=E,it=Y,F|0)}function fl(a,o,h,p,v){a=a|0,o=o|0,h=h|0,p=p|0,v=v|0;var E=0,z=0,F=0,Y=0,J=0,ve=0,Ie=0,Oe=0,He=0,We=0,st=0,wt=0,Et=0,pt=0,bt=0,St=0,vi=0,$t=0,ri=0,ni=0;if(ri=it,it=it+48|0,z=ri+24|0,F=ri+12|0,$t=ri,E=Va(a,o,a,o,z)|0,!E&&(E=Va(a,o,h,p,F)|0,!E)){St=pr(z,F)|0,vi=((St|0)<0)<<31>>31,i[z>>2]=0,i[z+4>>2]=0,i[z+8>>2]=0,i[F>>2]=0,i[F+4>>2]=0,i[F+8>>2]=0,Va(a,o,a,o,z)|0&&Ni(23313,23090,691,23299),Va(a,o,h,p,F)|0&&Ni(23313,23090,696,23299),js(z),js(F),St?(Ie=i[z>>2]|0,We=+(St|0),Et=z+4|0,Oe=i[Et>>2]|0,pt=z+8|0,He=i[pt>>2]|0,bt=z,p=Ie,E=Oe,h=He,st=+((i[F>>2]|0)-Ie|0)/We,wt=+((i[F+4>>2]|0)-Oe|0)/We,We=+((i[F+8>>2]|0)-He|0)/We):(E=z+4|0,h=z+8|0,Et=E,pt=h,bt=z,p=i[z>>2]|0,E=i[E>>2]|0,h=i[h>>2]|0,st=0,wt=0,We=0),i[$t>>2]=p,He=$t+4|0,i[He>>2]=E,Oe=$t+8|0,i[Oe>>2]=h;e:do if((St|0)<0)E=0;else for(ve=0,Ie=0,E=p;;){J=+(Ie>>>0)+4294967296*+(ve|0),ni=st*J+ +(E|0),Y=wt*J+ +(i[Et>>2]|0),J=We*J+ +(i[pt>>2]|0),h=~~+d(+ni),z=~~+d(+Y),E=~~+d(+J),ni=+It(+(+(h|0)-ni)),Y=+It(+(+(z|0)-Y)),J=+It(+(+(E|0)-J));do if(ni>Y&ni>J)h=0-(z+E)|0,p=z;else if(F=0-h|0,Y>J){p=F-E|0;break}else{p=z,E=F-z|0;break}while(!1);if(i[$t>>2]=h,i[He>>2]=p,i[Oe>>2]=E,CA($t),E=Ua(a,o,$t,v+(Ie<<3)|0)|0,E|0)break e;if(!((ve|0)<(vi|0)|(ve|0)==(vi|0)&Ie>>>0<St>>>0)){E=0;break e}E=S(Ie|0,ve|0,1,0)|0,F=At()|0,ve=F,Ie=E,E=i[bt>>2]|0}while(!1);return $t=E,it=ri,$t|0}return $t=E,it=ri,$t|0}function Mo(a,o,h,p){a=a|0,o=o|0,h=h|0,p=p|0;var v=0,E=0,z=0;if((h|0)==0&(p|0)==0)return v=0,E=1,bi(v|0),E|0;E=a,v=o,a=1,o=0;do z=(h&1|0)==0&!0,a=Se((z?1:E)|0,(z?0:v)|0,a|0,o|0)|0,o=At()|0,h=kt(h|0,p|0,1)|0,p=At()|0,E=Se(E|0,v|0,E|0,v|0)|0,v=At()|0;while(!((h|0)==0&(p|0)==0));return bi(o|0),a|0}function sA(a,o,h){a=a|0,o=o|0,h=h|0;var p=0,v=0,E=0,z=0,F=0,Y=0,J=0,ve=0,Ie=0,Oe=0;if(!(sa(o,h)|0)||(o=ra(o)|0,p=+ue[h>>3],v=+ue[h+8>>3],v=o&v<0?v+6.283185307179586:v,Oe=i[a>>2]|0,(Oe|0)<=0))return Oe=0,Oe|0;if(Ie=i[a+4>>2]|0,o){o=0,ve=v,h=-1,a=0;e:for(;;){for(J=a;z=+ue[Ie+(J<<4)>>3],v=+ue[Ie+(J<<4)+8>>3],a=(h+2|0)%(Oe|0)|0,E=+ue[Ie+(a<<4)>>3],F=+ue[Ie+(a<<4)+8>>3],z>E?(Y=z,z=F):(Y=E,E=z,z=v,v=F),p=p==E|p==Y?p+2220446049250313e-31:p,!!(p<E|p>Y);)if(h=J+1|0,(h|0)>=(Oe|0)){h=22;break e}else a=J,J=h,h=a;if(F=z<0?z+6.283185307179586:z,z=v<0?v+6.283185307179586:v,ve=F==ve|z==ve?ve+-2220446049250313e-31:ve,Y=F+(z-F)*((p-E)/(Y-E)),(Y<0?Y+6.283185307179586:Y)>ve&&(o=o^1),a=J+1|0,(a|0)>=(Oe|0)){h=22;break}else h=J}if((h|0)==22)return o|0}else{o=0,ve=v,h=-1,a=0;e:for(;;){for(J=a;z=+ue[Ie+(J<<4)>>3],v=+ue[Ie+(J<<4)+8>>3],a=(h+2|0)%(Oe|0)|0,E=+ue[Ie+(a<<4)>>3],F=+ue[Ie+(a<<4)+8>>3],z>E?(Y=z,z=F):(Y=E,E=z,z=v,v=F),p=p==E|p==Y?p+2220446049250313e-31:p,!!(p<E|p>Y);)if(h=J+1|0,(h|0)>=(Oe|0)){h=22;break e}else a=J,J=h,h=a;if(ve=z==ve|v==ve?ve+-2220446049250313e-31:ve,z+(v-z)*((p-E)/(Y-E))>ve&&(o=o^1),a=J+1|0,(a|0)>=(Oe|0)){h=22;break}else h=J}if((h|0)==22)return o|0}return 0}function dl(a,o){a=a|0,o=o|0;var h=0,p=0,v=0,E=0,z=0,F=0,Y=0,J=0,ve=0,Ie=0,Oe=0,He=0,We=0,st=0,wt=0,Et=0,pt=0;if(We=i[a>>2]|0,!We){i[o>>2]=0,i[o+4>>2]=0,i[o+8>>2]=0,i[o+12>>2]=0,i[o+16>>2]=0,i[o+20>>2]=0,i[o+24>>2]=0,i[o+28>>2]=0;return}if(st=o+8|0,ue[st>>3]=17976931348623157e292,wt=o+24|0,ue[wt>>3]=17976931348623157e292,ue[o>>3]=-17976931348623157e292,Et=o+16|0,ue[Et>>3]=-17976931348623157e292,!((We|0)<=0)){for(Oe=i[a+4>>2]|0,J=17976931348623157e292,ve=-17976931348623157e292,Ie=0,a=-1,E=17976931348623157e292,z=17976931348623157e292,Y=-17976931348623157e292,p=-17976931348623157e292,He=0;h=+ue[Oe+(He<<4)>>3],F=+ue[Oe+(He<<4)+8>>3],a=a+2|0,v=+ue[Oe+(((a|0)==(We|0)?0:a)<<4)+8>>3],h<E&&(ue[st>>3]=h,E=h),F<z&&(ue[wt>>3]=F,z=F),h>Y?ue[o>>3]=h:h=Y,F>p&&(ue[Et>>3]=F,p=F),J=F>0&F<J?F:J,ve=F<0&F>ve?F:ve,Ie=Ie|+It(+(F-v))>3.141592653589793,a=He+1|0,(a|0)!=(We|0);)pt=He,Y=h,He=a,a=pt;Ie&&(ue[Et>>3]=ve,ue[wt>>3]=J)}}function aA(a,o){a=a|0,o=o|0;var h=0,p=0,v=0,E=0,z=0,F=0,Y=0,J=0,ve=0,Ie=0,Oe=0,He=0,We=0,st=0,wt=0,Et=0,pt=0,bt=0,St=0,vi=0,$t=0,ri=0;if(We=i[a>>2]|0,We){if(st=o+8|0,ue[st>>3]=17976931348623157e292,wt=o+24|0,ue[wt>>3]=17976931348623157e292,ue[o>>3]=-17976931348623157e292,Et=o+16|0,ue[Et>>3]=-17976931348623157e292,(We|0)>0){for(v=i[a+4>>2]|0,Oe=17976931348623157e292,He=-17976931348623157e292,p=0,h=-1,Y=17976931348623157e292,J=17976931348623157e292,Ie=-17976931348623157e292,z=-17976931348623157e292,pt=0;E=+ue[v+(pt<<4)>>3],ve=+ue[v+(pt<<4)+8>>3],$t=h+2|0,F=+ue[v+((($t|0)==(We|0)?0:$t)<<4)+8>>3],E<Y&&(ue[st>>3]=E,Y=E),ve<J&&(ue[wt>>3]=ve,J=ve),E>Ie?ue[o>>3]=E:E=Ie,ve>z&&(ue[Et>>3]=ve,z=ve),Oe=ve>0&ve<Oe?ve:Oe,He=ve<0&ve>He?ve:He,p=p|+It(+(ve-F))>3.141592653589793,h=pt+1|0,(h|0)!=(We|0);)$t=pt,Ie=E,pt=h,h=$t;p&&(ue[Et>>3]=He,ue[wt>>3]=Oe)}}else i[o>>2]=0,i[o+4>>2]=0,i[o+8>>2]=0,i[o+12>>2]=0,i[o+16>>2]=0,i[o+20>>2]=0,i[o+24>>2]=0,i[o+28>>2]=0;if($t=a+8|0,h=i[$t>>2]|0,!((h|0)<=0)){vi=a+12|0,St=0;do if(v=i[vi>>2]|0,p=St,St=St+1|0,wt=o+(St<<5)|0,Et=i[v+(p<<3)>>2]|0,Et){if(pt=o+(St<<5)+8|0,ue[pt>>3]=17976931348623157e292,a=o+(St<<5)+24|0,ue[a>>3]=17976931348623157e292,ue[wt>>3]=-17976931348623157e292,bt=o+(St<<5)+16|0,ue[bt>>3]=-17976931348623157e292,(Et|0)>0){for(We=i[v+(p<<3)+4>>2]|0,Oe=17976931348623157e292,He=-17976931348623157e292,v=0,p=-1,st=0,Y=17976931348623157e292,J=17976931348623157e292,ve=-17976931348623157e292,z=-17976931348623157e292;E=+ue[We+(st<<4)>>3],Ie=+ue[We+(st<<4)+8>>3],p=p+2|0,F=+ue[We+(((p|0)==(Et|0)?0:p)<<4)+8>>3],E<Y&&(ue[pt>>3]=E,Y=E),Ie<J&&(ue[a>>3]=Ie,J=Ie),E>ve?ue[wt>>3]=E:E=ve,Ie>z&&(ue[bt>>3]=Ie,z=Ie),Oe=Ie>0&Ie<Oe?Ie:Oe,He=Ie<0&Ie>He?Ie:He,v=v|+It(+(Ie-F))>3.141592653589793,p=st+1|0,(p|0)!=(Et|0);)ri=st,st=p,ve=E,p=ri;v&&(ue[bt>>3]=He,ue[a>>3]=Oe)}}else i[wt>>2]=0,i[wt+4>>2]=0,i[wt+8>>2]=0,i[wt+12>>2]=0,i[wt+16>>2]=0,i[wt+20>>2]=0,i[wt+24>>2]=0,i[wt+28>>2]=0,h=i[$t>>2]|0;while((St|0)<(h|0))}}function To(a,o,h){a=a|0,o=o|0,h=h|0;var p=0,v=0,E=0;if(!(sA(a,o,h)|0))return v=0,v|0;if(v=a+8|0,(i[v>>2]|0)<=0)return v=1,v|0;for(p=a+12|0,a=0;;){if(E=a,a=a+1|0,sA((i[p>>2]|0)+(E<<3)|0,o+(a<<5)|0,h)|0){a=0,p=6;break}if((a|0)>=(i[v>>2]|0)){a=1,p=6;break}}return(p|0)==6?a|0:0}function ls(){return 8}function El(){return 16}function Il(){return 168}function Ml(){return 8}function oA(){return 16}function Fs(){return 12}function to(){return 8}function MA(a){return a=a|0,+(+((i[a>>2]|0)>>>0)+4294967296*+(i[a+4>>2]|0))}function pl(a){a=a|0;var o=0,h=0;return h=+ue[a>>3],o=+ue[a+8>>3],+ +Bt(+(h*h+o*o))}function TA(a,o,h,p,v){a=a|0,o=o|0,h=h|0,p=p|0,v=v|0;var E=0,z=0,F=0,Y=0,J=0,ve=0,Ie=0,Oe=0;J=+ue[a>>3],Y=+ue[o>>3]-J,F=+ue[a+8>>3],z=+ue[o+8>>3]-F,Ie=+ue[h>>3],E=+ue[p>>3]-Ie,Oe=+ue[h+8>>3],ve=+ue[p+8>>3]-Oe,E=(E*(F-Oe)-(J-Ie)*ve)/(Y*ve-z*E),ue[v>>3]=J+Y*E,ue[v+8>>3]=F+z*E}function gl(a,o){return a=a|0,o=o|0,+It(+(+ue[a>>3]-+ue[o>>3]))<11920928955078125e-23?(o=+It(+(+ue[a+8>>3]-+ue[o+8>>3]))<11920928955078125e-23,o|0):(o=0,o|0)}function Xn(a,o){a=a|0,o=o|0;var h=0,p=0,v=0;return v=+ue[a>>3]-+ue[o>>3],p=+ue[a+8>>3]-+ue[o+8>>3],h=+ue[a+16>>3]-+ue[o+16>>3],+(v*v+p*p+h*h)}function Vr(a,o){a=a|0,o=o|0;var h=0,p=0,v=0;h=+ue[a>>3],p=+Zt(+h),h=+ei(+h),ue[o+16>>3]=h,h=+ue[a+8>>3],v=p*+Zt(+h),ue[o>>3]=v,h=p*+ei(+h),ue[o+8>>3]=h}function zr(a,o,h){a=a|0,o=o|0,h=h|0;var p=0,v=0,E=0;if(E=it,it=it+16|0,v=E,p=$n(a,o)|0,(h+-1|0)>>>0>5||(p=(p|0)!=0,(h|0)==1&p))return v=-1,it=E,v|0;do if(Us(a,o,v)|0)p=-1;else if(p){p=((i[21936+(h<<2)>>2]|0)+5-(i[v>>2]|0)|0)%5|0;break}else{p=((i[21968+(h<<2)>>2]|0)+6-(i[v>>2]|0)|0)%6|0;break}while(!1);return v=p,it=E,v|0}function Us(a,o,h){a=a|0,o=o|0,h=h|0;var p=0,v=0,E=0,z=0,F=0,Y=0,J=0;if(J=it,it=it+32|0,z=J+16|0,F=J,p=Ar(a,o,z)|0,p|0)return h=p,it=J,h|0;E=qo(a,o)|0,Y=vs(a,o)|0,ti(E,F),p=Ii(E,i[z>>2]|0)|0;e:do if(Be(E)|0){do switch(E|0){case 4:{a=0;break}case 14:{a=1;break}case 24:{a=2;break}case 38:{a=3;break}case 49:{a=4;break}case 58:{a=5;break}case 63:{a=6;break}case 72:{a=7;break}case 83:{a=8;break}case 97:{a=9;break}case 107:{a=10;break}case 117:{a=11;break}default:{p=1;break e}}while(!1);if(v=i[22e3+(a*24|0)+8>>2]|0,o=i[22e3+(a*24|0)+16>>2]|0,a=i[z>>2]|0,(a|0)!=(i[F>>2]|0)&&(F=Ye(E)|0,a=i[z>>2]|0,F|(a|0)==(o|0)&&(p=(p+1|0)%6|0)),(Y|0)==3&(a|0)==(o|0)){p=(p+5|0)%6|0,v=22;break}(Y|0)==5&(a|0)==(v|0)&&(p=(p+1|0)%6|0),v=22}else v=22;while(!1);return(v|0)==22&&(i[h>>2]=p,p=0),h=p,it=J,h|0}function Sn(a,o,h,p){a=a|0,o=o|0,h=h|0,p=p|0;var v=0,E=0,z=0,F=0,Y=0,J=0,ve=0,Ie=0,Oe=0,He=0,We=0,st=0,wt=0,Et=0,pt=0,bt=0;if(bt=it,it=it+32|0,pt=bt+24|0,wt=bt+20|0,We=bt+8|0,He=bt+16|0,Oe=bt,Y=($n(a,o)|0)==0,Y=Y?6:5,ve=lt(a|0,o|0,52)|0,At()|0,ve=ve&15,Y>>>0<=h>>>0)return p=2,it=bt,p|0;Ie=(ve|0)==0,!Ie&&(st=ct(7,0,(ve^15)*3|0)|0,(st&a|0)==0&((At()|0)&o|0)==0)?v=h:E=4;e:do if((E|0)==4){if(v=($n(a,o)|0)!=0,((v?4:5)|0)<(h|0)||Us(a,o,pt)|0||(E=(i[pt>>2]|0)+h|0,v?v=22288+(((E|0)%5|0)<<2)|0:v=22320+(((E|0)%6|0)<<2)|0,st=i[v>>2]|0,(st|0)==7))return p=1,it=bt,p|0;i[wt>>2]=0,v=yr(a,o,st,wt,We)|0;do if(!v){if(F=We,J=i[F>>2]|0,F=i[F+4>>2]|0,z=F>>>0<o>>>0|(F|0)==(o|0)&J>>>0<a>>>0,E=z?J:a,z=z?F:o,!Ie&&(Ie=ct(7,0,(ve^15)*3|0)|0,(J&Ie|0)==0&(F&(At()|0)|0)==0))v=h;else{if(F=(h+-1+Y|0)%(Y|0)|0,v=$n(a,o)|0,(F|0)<0&&Ni(23313,23315,245,23324),Y=(v|0)!=0,((Y?4:5)|0)<(F|0)&&Ni(23313,23315,245,23324),Us(a,o,pt)|0&&Ni(23313,23315,245,23324),v=(i[pt>>2]|0)+F|0,Y?v=22288+(((v|0)%5|0)<<2)|0:v=22320+(((v|0)%6|0)<<2)|0,F=i[v>>2]|0,(F|0)==7&&Ni(23313,23315,245,23324),i[He>>2]=0,v=yr(a,o,F,He,Oe)|0,v|0)break;J=Oe,Y=i[J>>2]|0,J=i[J+4>>2]|0;do if(J>>>0<z>>>0|(J|0)==(z|0)&Y>>>0<E>>>0){if($n(Y,J)|0?E=Zs(Y,J,a,o)|0:E=i[22384+((((i[He>>2]|0)+(i[22352+(F<<2)>>2]|0)|0)%6|0)<<2)>>2]|0,v=$n(Y,J)|0,(E+-1|0)>>>0>5){v=-1,E=Y,z=J;break}if(v=(v|0)!=0,(E|0)==1&v){v=-1,E=Y,z=J;break}do if(Us(Y,J,pt)|0)v=-1;else if(v){v=((i[21936+(E<<2)>>2]|0)+5-(i[pt>>2]|0)|0)%5|0;break}else{v=((i[21968+(E<<2)>>2]|0)+6-(i[pt>>2]|0)|0)%6|0;break}while(!1);E=Y,z=J}else v=h;while(!1);F=We,J=i[F>>2]|0,F=i[F+4>>2]|0}if((E|0)==(J|0)&(z|0)==(F|0)){if(Y=($n(J,F)|0)!=0,Y?a=Zs(J,F,a,o)|0:a=i[22384+((((i[wt>>2]|0)+(i[22352+(st<<2)>>2]|0)|0)%6|0)<<2)>>2]|0,v=$n(J,F)|0,(a+-1|0)>>>0<=5&&(Et=(v|0)!=0,!((a|0)==1&Et)))do if(Us(J,F,pt)|0)v=-1;else if(Et){v=((i[21936+(a<<2)>>2]|0)+5-(i[pt>>2]|0)|0)%5|0;break}else{v=((i[21968+(a<<2)>>2]|0)+6-(i[pt>>2]|0)|0)%6|0;break}while(!1);else v=-1;v=v+1|0,v=(v|0)==6|Y&(v|0)==5?0:v}o=z,a=E;break e}while(!1);return p=v,it=bt,p|0}while(!1);return Et=ct(v|0,0,56)|0,pt=At()|0|o&-2130706433|536870912,i[p>>2]=Et|a,i[p+4>>2]=pt,p=0,it=bt,p|0}function Ga(a,o,h){a=a|0,o=o|0,h=h|0;var p=0,v=0,E=0;return E=($n(a,o)|0)==0,p=Sn(a,o,0,h)|0,v=(p|0)==0,E?!v||(p=Sn(a,o,1,h+8|0)|0,p|0)||(p=Sn(a,o,2,h+16|0)|0,p|0)||(p=Sn(a,o,3,h+24|0)|0,p|0)||(p=Sn(a,o,4,h+32|0)|0,p)?(E=p,E|0):Sn(a,o,5,h+40|0)|0:!v||(p=Sn(a,o,1,h+8|0)|0,p|0)||(p=Sn(a,o,2,h+16|0)|0,p|0)||(p=Sn(a,o,3,h+24|0)|0,p|0)||(p=Sn(a,o,4,h+32|0)|0,p|0)?(E=p,E|0):(E=h+40|0,i[E>>2]=0,i[E+4>>2]=0,E=0,E|0)}function ml(a,o,h){a=a|0,o=o|0,h=h|0;var p=0,v=0,E=0,z=0,F=0,Y=0;return Y=it,it=it+192|0,v=Y,E=Y+168|0,z=lt(a|0,o|0,56)|0,At()|0,z=z&7,F=o&-2130706433|134217728,p=Ar(a,F,E)|0,p|0?(F=p,it=Y,F|0):(o=lt(a|0,o|0,52)|0,At()|0,o=o&15,$n(a,F)|0?Ka(E,o,z,1,v):Ir(E,o,z,1,v),F=v+8|0,i[h>>2]=i[F>>2],i[h+4>>2]=i[F+4>>2],i[h+8>>2]=i[F+8>>2],i[h+12>>2]=i[F+12>>2],F=0,it=Y,F|0)}function vo(a,o){a=a|0,o=o|0;var h=0,p=0,v=0,E=0;return v=it,it=it+16|0,h=v,!(!0&(o&2013265920|0)==536870912)||(p=o&-2130706433|134217728,!(Ja(a,p)|0))?(p=0,it=v,p|0):(E=lt(a|0,o|0,56)|0,At()|0,E=(Sn(a,p,E&7,h)|0)==0,p=h,p=E&((i[p>>2]|0)==(a|0)?(i[p+4>>2]|0)==(o|0):0)&1,it=v,p|0)}function el(a,o,h){a=a|0,o=o|0,h=h|0;var p=0;(o|0)>0?(p=b(o,4)|0,i[a>>2]=p,p||Ni(23337,23360,40,23374)):i[a>>2]=0,i[a+4>>2]=o,i[a+8>>2]=0,i[a+12>>2]=h}function ps(a){a=a|0;var o=0,h=0,p=0,v=0,E=0,z=0,F=0;v=a+4|0,E=a+12|0,z=a+8|0;e:for(;;){for(h=i[v>>2]|0,o=0;;){if((o|0)>=(h|0))break e;if(p=i[a>>2]|0,F=i[p+(o<<2)>>2]|0,!F)o=o+1|0;else break}o=p+(~~(+It(+(+hi(10,+ +(15-(i[E>>2]|0)|0))*(+ue[F>>3]+ +ue[F+8>>3])))%+(h|0))>>>0<<2)|0,h=i[o>>2]|0;t:do if(h|0){if(p=F+32|0,(h|0)==(F|0))i[o>>2]=i[p>>2];else{if(h=h+32|0,o=i[h>>2]|0,!o)break;for(;(o|0)!=(F|0);)if(h=o+32|0,o=i[h>>2]|0,!o)break t;i[h>>2]=i[p>>2]}_(F),i[z>>2]=(i[z>>2]|0)+-1}while(!1)}_(i[a>>2]|0)}function Xs(a){a=a|0;var o=0,h=0,p=0;for(p=i[a+4>>2]|0,h=0;;){if((h|0)>=(p|0)){o=0,h=4;break}if(o=i[(i[a>>2]|0)+(h<<2)>>2]|0,!o)h=h+1|0;else{h=4;break}}return(h|0)==4?o|0:0}function jt(a,o){a=a|0,o=o|0;var h=0,p=0,v=0,E=0;if(h=~~(+It(+(+hi(10,+ +(15-(i[a+12>>2]|0)|0))*(+ue[o>>3]+ +ue[o+8>>3])))%+(i[a+4>>2]|0))>>>0,h=(i[a>>2]|0)+(h<<2)|0,p=i[h>>2]|0,!p)return E=1,E|0;E=o+32|0;do if((p|0)!=(o|0)){if(h=i[p+32>>2]|0,!h)return E=1,E|0;for(v=h;;){if((v|0)==(o|0)){v=8;break}if(h=i[v+32>>2]|0,h)p=v,v=h;else{h=1,v=10;break}}if((v|0)==8){i[p+32>>2]=i[E>>2];break}else if((v|0)==10)return h|0}else i[h>>2]=i[E>>2];while(!1);return _(o),E=a+8|0,i[E>>2]=(i[E>>2]|0)+-1,E=0,E|0}function ci(a,o,h){a=a|0,o=o|0,h=h|0;var p=0,v=0,E=0,z=0;E=Ur(40)|0,E||Ni(23390,23360,98,23403),i[E>>2]=i[o>>2],i[E+4>>2]=i[o+4>>2],i[E+8>>2]=i[o+8>>2],i[E+12>>2]=i[o+12>>2],v=E+16|0,i[v>>2]=i[h>>2],i[v+4>>2]=i[h+4>>2],i[v+8>>2]=i[h+8>>2],i[v+12>>2]=i[h+12>>2],i[E+32>>2]=0,v=~~(+It(+(+hi(10,+ +(15-(i[a+12>>2]|0)|0))*(+ue[o>>3]+ +ue[o+8>>3])))%+(i[a+4>>2]|0))>>>0,v=(i[a>>2]|0)+(v<<2)|0,p=i[v>>2]|0;do if(!p)i[v>>2]=E;else{for(;!($s(p,o)|0&&$s(p+16|0,h)|0);)if(v=i[p+32>>2]|0,p=v|0?v:p,!(i[p+32>>2]|0)){z=10;break}if((z|0)==10){i[p+32>>2]=E;break}return _(E),z=p,z|0}while(!1);return z=a+8|0,i[z>>2]=(i[z>>2]|0)+1,z=E,z|0}function io(a,o,h){a=a|0,o=o|0,h=h|0;var p=0,v=0;if(v=~~(+It(+(+hi(10,+ +(15-(i[a+12>>2]|0)|0))*(+ue[o>>3]+ +ue[o+8>>3])))%+(i[a+4>>2]|0))>>>0,v=i[(i[a>>2]|0)+(v<<2)>>2]|0,!v)return h=0,h|0;if(!h){for(a=v;;){if($s(a,o)|0){p=10;break}if(a=i[a+32>>2]|0,!a){a=0,p=10;break}}if((p|0)==10)return a|0}for(a=v;;){if($s(a,o)|0&&$s(a+16|0,h)|0){p=10;break}if(a=i[a+32>>2]|0,!a){a=0,p=10;break}}return(p|0)==10?a|0:0}function PA(a,o){a=a|0,o=o|0;var h=0;if(h=~~(+It(+(+hi(10,+ +(15-(i[a+12>>2]|0)|0))*(+ue[o>>3]+ +ue[o+8>>3])))%+(i[a+4>>2]|0))>>>0,a=i[(i[a>>2]|0)+(h<<2)>>2]|0,!a)return h=0,h|0;for(;;){if($s(a,o)|0){o=5;break}if(a=i[a+32>>2]|0,!a){a=0,o=5;break}}return(o|0)==5?a|0:0}function BA(){return 23424}function Br(a){return a=+a,+ +R(+a)}function no(a){return a=+a,~~+Br(a)|0}function Ur(a){a=a|0;var o=0,h=0,p=0,v=0,E=0,z=0,F=0,Y=0,J=0,ve=0,Ie=0,Oe=0,He=0,We=0,st=0,wt=0,Et=0,pt=0,bt=0,St=0,vi=0;vi=it,it=it+16|0,Oe=vi;do if(a>>>0<245){if(J=a>>>0<11?16:a+11&-8,a=J>>>3,Ie=i[5857]|0,h=Ie>>>a,h&3|0)return o=(h&1^1)+a|0,a=23468+(o<<1<<2)|0,h=a+8|0,p=i[h>>2]|0,v=p+8|0,E=i[v>>2]|0,(E|0)==(a|0)?i[5857]=Ie&~(1<<o):(i[E+12>>2]=a,i[h>>2]=E),St=o<<3,i[p+4>>2]=St|3,St=p+St+4|0,i[St>>2]=i[St>>2]|1,St=v,it=vi,St|0;if(ve=i[5859]|0,J>>>0>ve>>>0){if(h|0)return o=2<<a,o=h<<a&(o|0-o),o=(o&0-o)+-1|0,F=o>>>12&16,o=o>>>F,h=o>>>5&8,o=o>>>h,E=o>>>2&4,o=o>>>E,a=o>>>1&2,o=o>>>a,p=o>>>1&1,p=(h|F|E|a|p)+(o>>>p)|0,o=23468+(p<<1<<2)|0,a=o+8|0,E=i[a>>2]|0,F=E+8|0,h=i[F>>2]|0,(h|0)==(o|0)?(a=Ie&~(1<<p),i[5857]=a):(i[h+12>>2]=o,i[a>>2]=h,a=Ie),St=p<<3,z=St-J|0,i[E+4>>2]=J|3,v=E+J|0,i[v+4>>2]=z|1,i[E+St>>2]=z,ve|0&&(p=i[5862]|0,o=ve>>>3,h=23468+(o<<1<<2)|0,o=1<<o,a&o?(a=h+8|0,o=i[a>>2]|0):(i[5857]=a|o,o=h,a=h+8|0),i[a>>2]=p,i[o+12>>2]=p,i[p+8>>2]=o,i[p+12>>2]=h),i[5859]=z,i[5862]=v,St=F,it=vi,St|0;if(E=i[5858]|0,E){for(h=(E&0-E)+-1|0,v=h>>>12&16,h=h>>>v,p=h>>>5&8,h=h>>>p,z=h>>>2&4,h=h>>>z,F=h>>>1&2,h=h>>>F,Y=h>>>1&1,Y=i[23732+((p|v|z|F|Y)+(h>>>Y)<<2)>>2]|0,h=Y,F=Y,Y=(i[Y+4>>2]&-8)-J|0;a=i[h+16>>2]|0,!(!a&&(a=i[h+20>>2]|0,!a));)z=(i[a+4>>2]&-8)-J|0,v=z>>>0<Y>>>0,h=a,F=v?a:F,Y=v?z:Y;if(z=F+J|0,z>>>0>F>>>0){v=i[F+24>>2]|0,o=i[F+12>>2]|0;do if((o|0)==(F|0)){if(a=F+20|0,o=i[a>>2]|0,!o&&(a=F+16|0,o=i[a>>2]|0,!o)){h=0;break}for(;;)if(p=o+20|0,h=i[p>>2]|0,h)o=h,a=p;else if(p=o+16|0,h=i[p>>2]|0,h)o=h,a=p;else break;i[a>>2]=0,h=o}else h=i[F+8>>2]|0,i[h+12>>2]=o,i[o+8>>2]=h,h=o;while(!1);do if(v|0){if(o=i[F+28>>2]|0,a=23732+(o<<2)|0,(F|0)==(i[a>>2]|0)){if(i[a>>2]=h,!h){i[5858]=E&~(1<<o);break}}else if(St=v+16|0,i[((i[St>>2]|0)==(F|0)?St:v+20|0)>>2]=h,!h)break;i[h+24>>2]=v,o=i[F+16>>2]|0,o|0&&(i[h+16>>2]=o,i[o+24>>2]=h),o=i[F+20>>2]|0,o|0&&(i[h+20>>2]=o,i[o+24>>2]=h)}while(!1);return Y>>>0<16?(St=Y+J|0,i[F+4>>2]=St|3,St=F+St+4|0,i[St>>2]=i[St>>2]|1):(i[F+4>>2]=J|3,i[z+4>>2]=Y|1,i[z+Y>>2]=Y,ve|0&&(p=i[5862]|0,o=ve>>>3,h=23468+(o<<1<<2)|0,o=1<<o,o&Ie?(a=h+8|0,o=i[a>>2]|0):(i[5857]=o|Ie,o=h,a=h+8|0),i[a>>2]=p,i[o+12>>2]=p,i[p+8>>2]=o,i[p+12>>2]=h),i[5859]=Y,i[5862]=z),St=F+8|0,it=vi,St|0}else Ie=J}else Ie=J}else Ie=J}else if(a>>>0<=4294967231)if(a=a+11|0,J=a&-8,p=i[5858]|0,p){v=0-J|0,a=a>>>8,a?J>>>0>16777215?Y=31:(Ie=(a+1048320|0)>>>16&8,st=a<<Ie,F=(st+520192|0)>>>16&4,st=st<<F,Y=(st+245760|0)>>>16&2,Y=14-(F|Ie|Y)+(st<<Y>>>15)|0,Y=J>>>(Y+7|0)&1|Y<<1):Y=0,h=i[23732+(Y<<2)>>2]|0;e:do if(!h)h=0,a=0,st=61;else for(a=0,F=J<<((Y|0)==31?0:25-(Y>>>1)|0),E=0;;){if(z=(i[h+4>>2]&-8)-J|0,z>>>0<v>>>0)if(z)a=h,v=z;else{a=h,v=0,st=65;break e}if(st=i[h+20>>2]|0,h=i[h+16+(F>>>31<<2)>>2]|0,E=(st|0)==0|(st|0)==(h|0)?E:st,h)F=F<<1;else{h=E,st=61;break}}while(!1);if((st|0)==61){if((h|0)==0&(a|0)==0){if(a=2<<Y,a=(a|0-a)&p,!a){Ie=J;break}Ie=(a&0-a)+-1|0,z=Ie>>>12&16,Ie=Ie>>>z,E=Ie>>>5&8,Ie=Ie>>>E,F=Ie>>>2&4,Ie=Ie>>>F,Y=Ie>>>1&2,Ie=Ie>>>Y,h=Ie>>>1&1,a=0,h=i[23732+((E|z|F|Y|h)+(Ie>>>h)<<2)>>2]|0}h?st=65:(F=a,z=v)}if((st|0)==65)for(E=h;;)if(Ie=(i[E+4>>2]&-8)-J|0,h=Ie>>>0<v>>>0,v=h?Ie:v,a=h?E:a,h=i[E+16>>2]|0,h||(h=i[E+20>>2]|0),h)E=h;else{F=a,z=v;break}if(F|0&&z>>>0<((i[5859]|0)-J|0)>>>0&&(ve=F+J|0,ve>>>0>F>>>0)){E=i[F+24>>2]|0,o=i[F+12>>2]|0;do if((o|0)==(F|0)){if(a=F+20|0,o=i[a>>2]|0,!o&&(a=F+16|0,o=i[a>>2]|0,!o)){o=0;break}for(;;)if(v=o+20|0,h=i[v>>2]|0,h)o=h,a=v;else if(v=o+16|0,h=i[v>>2]|0,h)o=h,a=v;else break;i[a>>2]=0}else St=i[F+8>>2]|0,i[St+12>>2]=o,i[o+8>>2]=St;while(!1);do if(E){if(a=i[F+28>>2]|0,h=23732+(a<<2)|0,(F|0)==(i[h>>2]|0)){if(i[h>>2]=o,!o){p=p&~(1<<a),i[5858]=p;break}}else if(St=E+16|0,i[((i[St>>2]|0)==(F|0)?St:E+20|0)>>2]=o,!o)break;i[o+24>>2]=E,a=i[F+16>>2]|0,a|0&&(i[o+16>>2]=a,i[a+24>>2]=o),a=i[F+20>>2]|0,a&&(i[o+20>>2]=a,i[a+24>>2]=o)}while(!1);e:do if(z>>>0<16)St=z+J|0,i[F+4>>2]=St|3,St=F+St+4|0,i[St>>2]=i[St>>2]|1;else{if(i[F+4>>2]=J|3,i[ve+4>>2]=z|1,i[ve+z>>2]=z,o=z>>>3,z>>>0<256){h=23468+(o<<1<<2)|0,a=i[5857]|0,o=1<<o,a&o?(a=h+8|0,o=i[a>>2]|0):(i[5857]=a|o,o=h,a=h+8|0),i[a>>2]=ve,i[o+12>>2]=ve,i[ve+8>>2]=o,i[ve+12>>2]=h;break}if(o=z>>>8,o?z>>>0>16777215?h=31:(bt=(o+1048320|0)>>>16&8,St=o<<bt,pt=(St+520192|0)>>>16&4,St=St<<pt,h=(St+245760|0)>>>16&2,h=14-(pt|bt|h)+(St<<h>>>15)|0,h=z>>>(h+7|0)&1|h<<1):h=0,o=23732+(h<<2)|0,i[ve+28>>2]=h,a=ve+16|0,i[a+4>>2]=0,i[a>>2]=0,a=1<<h,!(p&a)){i[5858]=p|a,i[o>>2]=ve,i[ve+24>>2]=o,i[ve+12>>2]=ve,i[ve+8>>2]=ve;break}o=i[o>>2]|0;t:do if((i[o+4>>2]&-8|0)!=(z|0)){for(p=z<<((h|0)==31?0:25-(h>>>1)|0);h=o+16+(p>>>31<<2)|0,a=i[h>>2]|0,!!a;)if((i[a+4>>2]&-8|0)==(z|0)){o=a;break t}else p=p<<1,o=a;i[h>>2]=ve,i[ve+24>>2]=o,i[ve+12>>2]=ve,i[ve+8>>2]=ve;break e}while(!1);bt=o+8|0,St=i[bt>>2]|0,i[St+12>>2]=ve,i[bt>>2]=ve,i[ve+8>>2]=St,i[ve+12>>2]=o,i[ve+24>>2]=0}while(!1);return St=F+8|0,it=vi,St|0}else Ie=J}else Ie=J;else Ie=-1;while(!1);if(h=i[5859]|0,h>>>0>=Ie>>>0)return o=h-Ie|0,a=i[5862]|0,o>>>0>15?(St=a+Ie|0,i[5862]=St,i[5859]=o,i[St+4>>2]=o|1,i[a+h>>2]=o,i[a+4>>2]=Ie|3):(i[5859]=0,i[5862]=0,i[a+4>>2]=h|3,St=a+h+4|0,i[St>>2]=i[St>>2]|1),St=a+8|0,it=vi,St|0;if(z=i[5860]|0,z>>>0>Ie>>>0)return pt=z-Ie|0,i[5860]=pt,St=i[5863]|0,bt=St+Ie|0,i[5863]=bt,i[bt+4>>2]=pt|1,i[St+4>>2]=Ie|3,St=St+8|0,it=vi,St|0;if(i[5975]|0?a=i[5977]|0:(i[5977]=4096,i[5976]=4096,i[5978]=-1,i[5979]=-1,i[5980]=0,i[5968]=0,i[5975]=Oe&-16^1431655768,a=4096),F=Ie+48|0,Y=Ie+47|0,E=a+Y|0,v=0-a|0,J=E&v,J>>>0<=Ie>>>0||(a=i[5967]|0,a|0&&(ve=i[5965]|0,Oe=ve+J|0,Oe>>>0<=ve>>>0|Oe>>>0>a>>>0)))return St=0,it=vi,St|0;e:do if(i[5968]&4)o=0,st=143;else{h=i[5863]|0;t:do if(h){for(p=23876;Oe=i[p>>2]|0,!(Oe>>>0<=h>>>0&&(Oe+(i[p+4>>2]|0)|0)>>>0>h>>>0);)if(a=i[p+8>>2]|0,a)p=a;else{st=128;break t}if(o=E-z&v,o>>>0<2147483647)if(a=q(o|0)|0,(a|0)==((i[p>>2]|0)+(i[p+4>>2]|0)|0)){if((a|0)!=-1){z=o,E=a,st=145;break e}}else p=a,st=136;else o=0}else st=128;while(!1);do if((st|0)==128)if(h=q(0)|0,(h|0)!=-1&&(o=h,He=i[5976]|0,We=He+-1|0,o=(We&o|0?(We+o&0-He)-o|0:0)+J|0,He=i[5965]|0,We=o+He|0,o>>>0>Ie>>>0&o>>>0<2147483647)){if(Oe=i[5967]|0,Oe|0&&We>>>0<=He>>>0|We>>>0>Oe>>>0){o=0;break}if(a=q(o|0)|0,(a|0)==(h|0)){z=o,E=h,st=145;break e}else p=a,st=136}else o=0;while(!1);do if((st|0)==136){if(h=0-o|0,!(F>>>0>o>>>0&(o>>>0<2147483647&(p|0)!=-1)))if((p|0)==-1){o=0;break}else{z=o,E=p,st=145;break e}if(a=i[5977]|0,a=Y-o+a&0-a,a>>>0>=2147483647){z=o,E=p,st=145;break e}if((q(a|0)|0)==-1){q(h|0)|0,o=0;break}else{z=a+o|0,E=p,st=145;break e}}while(!1);i[5968]=i[5968]|4,st=143}while(!1);if((st|0)==143&&J>>>0<2147483647&&(pt=q(J|0)|0,We=q(0)|0,wt=We-pt|0,Et=wt>>>0>(Ie+40|0)>>>0,!((pt|0)==-1|Et^1|pt>>>0<We>>>0&((pt|0)!=-1&(We|0)!=-1)^1))&&(z=Et?wt:o,E=pt,st=145),(st|0)==145){o=(i[5965]|0)+z|0,i[5965]=o,o>>>0>(i[5966]|0)>>>0&&(i[5966]=o),Y=i[5863]|0;e:do if(Y){for(o=23876;;){if(a=i[o>>2]|0,h=i[o+4>>2]|0,(E|0)==(a+h|0)){st=154;break}if(p=i[o+8>>2]|0,p)o=p;else break}if((st|0)==154&&(bt=o+4|0,(i[o+12>>2]&8|0)==0)&&E>>>0>Y>>>0&a>>>0<=Y>>>0){i[bt>>2]=h+z,St=(i[5860]|0)+z|0,pt=Y+8|0,pt=pt&7|0?0-pt&7:0,bt=Y+pt|0,pt=St-pt|0,i[5863]=bt,i[5860]=pt,i[bt+4>>2]=pt|1,i[Y+St+4>>2]=40,i[5864]=i[5979];break}for(E>>>0<(i[5861]|0)>>>0&&(i[5861]=E),h=E+z|0,o=23876;;){if((i[o>>2]|0)==(h|0)){st=162;break}if(a=i[o+8>>2]|0,a)o=a;else break}if((st|0)==162&&!(i[o+12>>2]&8|0)){i[o>>2]=E,ve=o+4|0,i[ve>>2]=(i[ve>>2]|0)+z,ve=E+8|0,ve=E+(ve&7|0?0-ve&7:0)|0,o=h+8|0,o=h+(o&7|0?0-o&7:0)|0,J=ve+Ie|0,F=o-ve-Ie|0,i[ve+4>>2]=Ie|3;t:do if((Y|0)==(o|0))St=(i[5860]|0)+F|0,i[5860]=St,i[5863]=J,i[J+4>>2]=St|1;else{if((i[5862]|0)==(o|0)){St=(i[5859]|0)+F|0,i[5859]=St,i[5862]=J,i[J+4>>2]=St|1,i[J+St>>2]=St;break}if(a=i[o+4>>2]|0,(a&3|0)==1){z=a&-8,p=a>>>3;i:do if(a>>>0<256)if(a=i[o+8>>2]|0,h=i[o+12>>2]|0,(h|0)==(a|0)){i[5857]=i[5857]&~(1<<p);break}else{i[a+12>>2]=h,i[h+8>>2]=a;break}else{E=i[o+24>>2]|0,a=i[o+12>>2]|0;do if((a|0)==(o|0)){if(h=o+16|0,p=h+4|0,a=i[p>>2]|0,a)h=p;else if(a=i[h>>2]|0,!a){a=0;break}for(;;)if(v=a+20|0,p=i[v>>2]|0,p)a=p,h=v;else if(v=a+16|0,p=i[v>>2]|0,p)a=p,h=v;else break;i[h>>2]=0}else St=i[o+8>>2]|0,i[St+12>>2]=a,i[a+8>>2]=St;while(!1);if(!E)break;h=i[o+28>>2]|0,p=23732+(h<<2)|0;do if((i[p>>2]|0)!=(o|0)){if(St=E+16|0,i[((i[St>>2]|0)==(o|0)?St:E+20|0)>>2]=a,!a)break i}else{if(i[p>>2]=a,a|0)break;i[5858]=i[5858]&~(1<<h);break i}while(!1);if(i[a+24>>2]=E,h=o+16|0,p=i[h>>2]|0,p|0&&(i[a+16>>2]=p,i[p+24>>2]=a),h=i[h+4>>2]|0,!h)break;i[a+20>>2]=h,i[h+24>>2]=a}while(!1);o=o+z|0,v=z+F|0}else v=F;if(o=o+4|0,i[o>>2]=i[o>>2]&-2,i[J+4>>2]=v|1,i[J+v>>2]=v,o=v>>>3,v>>>0<256){h=23468+(o<<1<<2)|0,a=i[5857]|0,o=1<<o,a&o?(a=h+8|0,o=i[a>>2]|0):(i[5857]=a|o,o=h,a=h+8|0),i[a>>2]=J,i[o+12>>2]=J,i[J+8>>2]=o,i[J+12>>2]=h;break}o=v>>>8;do if(!o)p=0;else{if(v>>>0>16777215){p=31;break}bt=(o+1048320|0)>>>16&8,St=o<<bt,pt=(St+520192|0)>>>16&4,St=St<<pt,p=(St+245760|0)>>>16&2,p=14-(pt|bt|p)+(St<<p>>>15)|0,p=v>>>(p+7|0)&1|p<<1}while(!1);if(o=23732+(p<<2)|0,i[J+28>>2]=p,a=J+16|0,i[a+4>>2]=0,i[a>>2]=0,a=i[5858]|0,h=1<<p,!(a&h)){i[5858]=a|h,i[o>>2]=J,i[J+24>>2]=o,i[J+12>>2]=J,i[J+8>>2]=J;break}o=i[o>>2]|0;i:do if((i[o+4>>2]&-8|0)!=(v|0)){for(p=v<<((p|0)==31?0:25-(p>>>1)|0);h=o+16+(p>>>31<<2)|0,a=i[h>>2]|0,!!a;)if((i[a+4>>2]&-8|0)==(v|0)){o=a;break i}else p=p<<1,o=a;i[h>>2]=J,i[J+24>>2]=o,i[J+12>>2]=J,i[J+8>>2]=J;break t}while(!1);bt=o+8|0,St=i[bt>>2]|0,i[St+12>>2]=J,i[bt>>2]=J,i[J+8>>2]=St,i[J+12>>2]=o,i[J+24>>2]=0}while(!1);return St=ve+8|0,it=vi,St|0}for(o=23876;a=i[o>>2]|0,!(a>>>0<=Y>>>0&&(St=a+(i[o+4>>2]|0)|0,St>>>0>Y>>>0));)o=i[o+8>>2]|0;v=St+-47|0,a=v+8|0,a=v+(a&7|0?0-a&7:0)|0,v=Y+16|0,a=a>>>0<v>>>0?Y:a,o=a+8|0,h=z+-40|0,pt=E+8|0,pt=pt&7|0?0-pt&7:0,bt=E+pt|0,pt=h-pt|0,i[5863]=bt,i[5860]=pt,i[bt+4>>2]=pt|1,i[E+h+4>>2]=40,i[5864]=i[5979],h=a+4|0,i[h>>2]=27,i[o>>2]=i[5969],i[o+4>>2]=i[5970],i[o+8>>2]=i[5971],i[o+12>>2]=i[5972],i[5969]=E,i[5970]=z,i[5972]=0,i[5971]=o,o=a+24|0;do bt=o,o=o+4|0,i[o>>2]=7;while((bt+8|0)>>>0<St>>>0);if((a|0)!=(Y|0)){if(E=a-Y|0,i[h>>2]=i[h>>2]&-2,i[Y+4>>2]=E|1,i[a>>2]=E,o=E>>>3,E>>>0<256){h=23468+(o<<1<<2)|0,a=i[5857]|0,o=1<<o,a&o?(a=h+8|0,o=i[a>>2]|0):(i[5857]=a|o,o=h,a=h+8|0),i[a>>2]=Y,i[o+12>>2]=Y,i[Y+8>>2]=o,i[Y+12>>2]=h;break}if(o=E>>>8,o?E>>>0>16777215?p=31:(bt=(o+1048320|0)>>>16&8,St=o<<bt,pt=(St+520192|0)>>>16&4,St=St<<pt,p=(St+245760|0)>>>16&2,p=14-(pt|bt|p)+(St<<p>>>15)|0,p=E>>>(p+7|0)&1|p<<1):p=0,h=23732+(p<<2)|0,i[Y+28>>2]=p,i[Y+20>>2]=0,i[v>>2]=0,o=i[5858]|0,a=1<<p,!(o&a)){i[5858]=o|a,i[h>>2]=Y,i[Y+24>>2]=h,i[Y+12>>2]=Y,i[Y+8>>2]=Y;break}o=i[h>>2]|0;t:do if((i[o+4>>2]&-8|0)!=(E|0)){for(p=E<<((p|0)==31?0:25-(p>>>1)|0);h=o+16+(p>>>31<<2)|0,a=i[h>>2]|0,!!a;)if((i[a+4>>2]&-8|0)==(E|0)){o=a;break t}else p=p<<1,o=a;i[h>>2]=Y,i[Y+24>>2]=o,i[Y+12>>2]=Y,i[Y+8>>2]=Y;break e}while(!1);bt=o+8|0,St=i[bt>>2]|0,i[St+12>>2]=Y,i[bt>>2]=Y,i[Y+8>>2]=St,i[Y+12>>2]=o,i[Y+24>>2]=0}}else St=i[5861]|0,(St|0)==0|E>>>0<St>>>0&&(i[5861]=E),i[5969]=E,i[5970]=z,i[5972]=0,i[5866]=i[5975],i[5865]=-1,i[5870]=23468,i[5869]=23468,i[5872]=23476,i[5871]=23476,i[5874]=23484,i[5873]=23484,i[5876]=23492,i[5875]=23492,i[5878]=23500,i[5877]=23500,i[5880]=23508,i[5879]=23508,i[5882]=23516,i[5881]=23516,i[5884]=23524,i[5883]=23524,i[5886]=23532,i[5885]=23532,i[5888]=23540,i[5887]=23540,i[5890]=23548,i[5889]=23548,i[5892]=23556,i[5891]=23556,i[5894]=23564,i[5893]=23564,i[5896]=23572,i[5895]=23572,i[5898]=23580,i[5897]=23580,i[5900]=23588,i[5899]=23588,i[5902]=23596,i[5901]=23596,i[5904]=23604,i[5903]=23604,i[5906]=23612,i[5905]=23612,i[5908]=23620,i[5907]=23620,i[5910]=23628,i[5909]=23628,i[5912]=23636,i[5911]=23636,i[5914]=23644,i[5913]=23644,i[5916]=23652,i[5915]=23652,i[5918]=23660,i[5917]=23660,i[5920]=23668,i[5919]=23668,i[5922]=23676,i[5921]=23676,i[5924]=23684,i[5923]=23684,i[5926]=23692,i[5925]=23692,i[5928]=23700,i[5927]=23700,i[5930]=23708,i[5929]=23708,i[5932]=23716,i[5931]=23716,St=z+-40|0,pt=E+8|0,pt=pt&7|0?0-pt&7:0,bt=E+pt|0,pt=St-pt|0,i[5863]=bt,i[5860]=pt,i[bt+4>>2]=pt|1,i[E+St+4>>2]=40,i[5864]=i[5979];while(!1);if(o=i[5860]|0,o>>>0>Ie>>>0)return pt=o-Ie|0,i[5860]=pt,St=i[5863]|0,bt=St+Ie|0,i[5863]=bt,i[bt+4>>2]=pt|1,i[St+4>>2]=Ie|3,St=St+8|0,it=vi,St|0}return St=BA()|0,i[St>>2]=12,St=0,it=vi,St|0}function _(a){a=a|0;var o=0,h=0,p=0,v=0,E=0,z=0,F=0,Y=0;if(a){h=a+-8|0,v=i[5861]|0,a=i[a+-4>>2]|0,o=a&-8,Y=h+o|0;do if(a&1)F=h,z=h;else{if(p=i[h>>2]|0,!(a&3)||(z=h+(0-p)|0,E=p+o|0,z>>>0<v>>>0))return;if((i[5862]|0)==(z|0)){if(a=Y+4|0,o=i[a>>2]|0,(o&3|0)!=3){F=z,o=E;break}i[5859]=E,i[a>>2]=o&-2,i[z+4>>2]=E|1,i[z+E>>2]=E;return}if(h=p>>>3,p>>>0<256)if(a=i[z+8>>2]|0,o=i[z+12>>2]|0,(o|0)==(a|0)){i[5857]=i[5857]&~(1<<h),F=z,o=E;break}else{i[a+12>>2]=o,i[o+8>>2]=a,F=z,o=E;break}v=i[z+24>>2]|0,a=i[z+12>>2]|0;do if((a|0)==(z|0)){if(o=z+16|0,h=o+4|0,a=i[h>>2]|0,a)o=h;else if(a=i[o>>2]|0,!a){a=0;break}for(;;)if(p=a+20|0,h=i[p>>2]|0,h)a=h,o=p;else if(p=a+16|0,h=i[p>>2]|0,h)a=h,o=p;else break;i[o>>2]=0}else F=i[z+8>>2]|0,i[F+12>>2]=a,i[a+8>>2]=F;while(!1);if(v){if(o=i[z+28>>2]|0,h=23732+(o<<2)|0,(i[h>>2]|0)==(z|0)){if(i[h>>2]=a,!a){i[5858]=i[5858]&~(1<<o),F=z,o=E;break}}else if(F=v+16|0,i[((i[F>>2]|0)==(z|0)?F:v+20|0)>>2]=a,!a){F=z,o=E;break}i[a+24>>2]=v,o=z+16|0,h=i[o>>2]|0,h|0&&(i[a+16>>2]=h,i[h+24>>2]=a),o=i[o+4>>2]|0,o?(i[a+20>>2]=o,i[o+24>>2]=a,F=z,o=E):(F=z,o=E)}else F=z,o=E}while(!1);if(!(z>>>0>=Y>>>0)&&(a=Y+4|0,p=i[a>>2]|0,!!(p&1))){if(p&2)i[a>>2]=p&-2,i[F+4>>2]=o|1,i[z+o>>2]=o,v=o;else{if((i[5863]|0)==(Y|0)){if(Y=(i[5860]|0)+o|0,i[5860]=Y,i[5863]=F,i[F+4>>2]=Y|1,(F|0)!=(i[5862]|0))return;i[5862]=0,i[5859]=0;return}if((i[5862]|0)==(Y|0)){Y=(i[5859]|0)+o|0,i[5859]=Y,i[5862]=z,i[F+4>>2]=Y|1,i[z+Y>>2]=Y;return}v=(p&-8)+o|0,h=p>>>3;do if(p>>>0<256)if(o=i[Y+8>>2]|0,a=i[Y+12>>2]|0,(a|0)==(o|0)){i[5857]=i[5857]&~(1<<h);break}else{i[o+12>>2]=a,i[a+8>>2]=o;break}else{E=i[Y+24>>2]|0,a=i[Y+12>>2]|0;do if((a|0)==(Y|0)){if(o=Y+16|0,h=o+4|0,a=i[h>>2]|0,a)o=h;else if(a=i[o>>2]|0,!a){h=0;break}for(;;)if(p=a+20|0,h=i[p>>2]|0,h)a=h,o=p;else if(p=a+16|0,h=i[p>>2]|0,h)a=h,o=p;else break;i[o>>2]=0,h=a}else h=i[Y+8>>2]|0,i[h+12>>2]=a,i[a+8>>2]=h,h=a;while(!1);if(E|0){if(a=i[Y+28>>2]|0,o=23732+(a<<2)|0,(i[o>>2]|0)==(Y|0)){if(i[o>>2]=h,!h){i[5858]=i[5858]&~(1<<a);break}}else if(p=E+16|0,i[((i[p>>2]|0)==(Y|0)?p:E+20|0)>>2]=h,!h)break;i[h+24>>2]=E,a=Y+16|0,o=i[a>>2]|0,o|0&&(i[h+16>>2]=o,i[o+24>>2]=h),a=i[a+4>>2]|0,a|0&&(i[h+20>>2]=a,i[a+24>>2]=h)}}while(!1);if(i[F+4>>2]=v|1,i[z+v>>2]=v,(F|0)==(i[5862]|0)){i[5859]=v;return}}if(a=v>>>3,v>>>0<256){h=23468+(a<<1<<2)|0,o=i[5857]|0,a=1<<a,o&a?(o=h+8|0,a=i[o>>2]|0):(i[5857]=o|a,a=h,o=h+8|0),i[o>>2]=F,i[a+12>>2]=F,i[F+8>>2]=a,i[F+12>>2]=h;return}a=v>>>8,a?v>>>0>16777215?p=31:(z=(a+1048320|0)>>>16&8,Y=a<<z,E=(Y+520192|0)>>>16&4,Y=Y<<E,p=(Y+245760|0)>>>16&2,p=14-(E|z|p)+(Y<<p>>>15)|0,p=v>>>(p+7|0)&1|p<<1):p=0,a=23732+(p<<2)|0,i[F+28>>2]=p,i[F+20>>2]=0,i[F+16>>2]=0,o=i[5858]|0,h=1<<p;e:do if(!(o&h))i[5858]=o|h,i[a>>2]=F,i[F+24>>2]=a,i[F+12>>2]=F,i[F+8>>2]=F;else{a=i[a>>2]|0;t:do if((i[a+4>>2]&-8|0)!=(v|0)){for(p=v<<((p|0)==31?0:25-(p>>>1)|0);h=a+16+(p>>>31<<2)|0,o=i[h>>2]|0,!!o;)if((i[o+4>>2]&-8|0)==(v|0)){a=o;break t}else p=p<<1,a=o;i[h>>2]=F,i[F+24>>2]=a,i[F+12>>2]=F,i[F+8>>2]=F;break e}while(!1);z=a+8|0,Y=i[z>>2]|0,i[Y+12>>2]=F,i[z>>2]=F,i[F+8>>2]=Y,i[F+12>>2]=a,i[F+24>>2]=0}while(!1);if(Y=(i[5865]|0)+-1|0,i[5865]=Y,!(Y|0)){for(a=23884;a=i[a>>2]|0,a;)a=a+8|0;i[5865]=-1}}}}function b(a,o){a=a|0,o=o|0;var h=0;return a?(h=pi(o,a)|0,(o|a)>>>0>65535&&(h=((h>>>0)/(a>>>0)|0|0)==(o|0)?h:-1)):h=0,a=Ur(h)|0,!a||!(i[a+-4>>2]&3)||I(a|0,0,h|0)|0,a|0}function S(a,o,h,p){return a=a|0,o=o|0,h=h|0,p=p|0,h=a+h>>>0,bi(o+p+(h>>>0<a>>>0|0)>>>0|0),h|0|0}function C(a,o,h,p){return a=a|0,o=o|0,h=h|0,p=p|0,p=o-p-(h>>>0>a>>>0|0)>>>0,bi(p|0),a-h>>>0|0|0}function G(a){return a=a|0,(a?31-(mt(a^a-1)|0)|0:32)|0}function j(a,o,h,p,v){a=a|0,o=o|0,h=h|0,p=p|0,v=v|0;var E=0,z=0,F=0,Y=0,J=0,ve=0,Ie=0,Oe=0,He=0,We=0;if(ve=a,Y=o,J=Y,z=h,Oe=p,F=Oe,!J)return E=(v|0)!=0,F?E?(i[v>>2]=a|0,i[v+4>>2]=o&0,Oe=0,v=0,bi(Oe|0),v|0):(Oe=0,v=0,bi(Oe|0),v|0):(E&&(i[v>>2]=(ve>>>0)%(z>>>0),i[v+4>>2]=0),Oe=0,v=(ve>>>0)/(z>>>0)>>>0,bi(Oe|0),v|0);E=(F|0)==0;do if(z){if(!E){if(E=(mt(F|0)|0)-(mt(J|0)|0)|0,E>>>0<=31){Ie=E+1|0,F=31-E|0,o=E-31>>31,z=Ie,a=ve>>>(Ie>>>0)&o|J<<F,o=J>>>(Ie>>>0)&o,E=0,F=ve<<F;break}return v?(i[v>>2]=a|0,i[v+4>>2]=Y|o&0,Oe=0,v=0,bi(Oe|0),v|0):(Oe=0,v=0,bi(Oe|0),v|0)}if(E=z-1|0,E&z|0){F=(mt(z|0)|0)+33-(mt(J|0)|0)|0,We=64-F|0,Ie=32-F|0,Y=Ie>>31,He=F-32|0,o=He>>31,z=F,a=Ie-1>>31&J>>>(He>>>0)|(J<<Ie|ve>>>(F>>>0))&o,o=o&J>>>(F>>>0),E=ve<<We&Y,F=(J<<We|ve>>>(He>>>0))&Y|ve<<Ie&F-33>>31;break}return v|0&&(i[v>>2]=E&ve,i[v+4>>2]=0),(z|0)==1?(He=Y|o&0,We=a|0|0,bi(He|0),We|0):(We=G(z|0)|0,He=J>>>(We>>>0)|0,We=J<<32-We|ve>>>(We>>>0)|0,bi(He|0),We|0)}else{if(E)return v|0&&(i[v>>2]=(J>>>0)%(z>>>0),i[v+4>>2]=0),He=0,We=(J>>>0)/(z>>>0)>>>0,bi(He|0),We|0;if(!ve)return v|0&&(i[v>>2]=0,i[v+4>>2]=(J>>>0)%(F>>>0)),He=0,We=(J>>>0)/(F>>>0)>>>0,bi(He|0),We|0;if(E=F-1|0,!(E&F))return v|0&&(i[v>>2]=a|0,i[v+4>>2]=E&J|o&0),He=0,We=J>>>((G(F|0)|0)>>>0),bi(He|0),We|0;if(E=(mt(F|0)|0)-(mt(J|0)|0)|0,E>>>0<=30){o=E+1|0,F=31-E|0,z=o,a=J<<F|ve>>>(o>>>0),o=J>>>(o>>>0),E=0,F=ve<<F;break}return v?(i[v>>2]=a|0,i[v+4>>2]=Y|o&0,He=0,We=0,bi(He|0),We|0):(He=0,We=0,bi(He|0),We|0)}while(!1);if(!z)J=F,Y=0,F=0;else{Ie=h|0|0,ve=Oe|p&0,J=S(Ie|0,ve|0,-1,-1)|0,h=At()|0,Y=F,F=0;do p=Y,Y=E>>>31|Y<<1,E=F|E<<1,p=a<<1|p>>>31|0,Oe=a>>>31|o<<1|0,C(J|0,h|0,p|0,Oe|0)|0,We=At()|0,He=We>>31|((We|0)<0?-1:0)<<1,F=He&1,a=C(p|0,Oe|0,He&Ie|0,(((We|0)<0?-1:0)>>31|((We|0)<0?-1:0)<<1)&ve|0)|0,o=At()|0,z=z-1|0;while(z|0);J=Y,Y=0}return z=0,v|0&&(i[v>>2]=a,i[v+4>>2]=o),He=(E|0)>>>31|(J|z)<<1|(z<<1|E>>>31)&0|Y,We=(E<<1|0)&-2|F,bi(He|0),We|0}function H(a,o,h,p){a=a|0,o=o|0,h=h|0,p=p|0;var v=0,E=0,z=0,F=0,Y=0,J=0;return J=o>>31|((o|0)<0?-1:0)<<1,Y=((o|0)<0?-1:0)>>31|((o|0)<0?-1:0)<<1,E=p>>31|((p|0)<0?-1:0)<<1,v=((p|0)<0?-1:0)>>31|((p|0)<0?-1:0)<<1,F=C(J^a|0,Y^o|0,J|0,Y|0)|0,z=At()|0,a=E^J,o=v^Y,C((j(F,z,C(E^h|0,v^p|0,E|0,v|0)|0,At()|0,0)|0)^a|0,(At()|0)^o|0,a|0,o|0)|0}function ne(a,o){a=a|0,o=o|0;var h=0,p=0,v=0,E=0;return E=a&65535,v=o&65535,h=pi(v,E)|0,p=a>>>16,a=(h>>>16)+(pi(v,p)|0)|0,v=o>>>16,o=pi(v,E)|0,bi((a>>>16)+(pi(v,p)|0)+(((a&65535)+o|0)>>>16)|0),a+o<<16|h&65535|0|0}function Se(a,o,h,p){a=a|0,o=o|0,h=h|0,p=p|0;var v=0,E=0;return v=a,E=h,h=ne(v,E)|0,a=At()|0,bi((pi(o,E)|0)+(pi(p,v)|0)+a|a&0|0),h|0|0|0}function Ge(a,o,h,p){a=a|0,o=o|0,h=h|0,p=p|0;var v=0,E=0,z=0,F=0,Y=0,J=0;return v=it,it=it+16|0,F=v|0,z=o>>31|((o|0)<0?-1:0)<<1,E=((o|0)<0?-1:0)>>31|((o|0)<0?-1:0)<<1,J=p>>31|((p|0)<0?-1:0)<<1,Y=((p|0)<0?-1:0)>>31|((p|0)<0?-1:0)<<1,a=C(z^a|0,E^o|0,z|0,E|0)|0,o=At()|0,j(a,o,C(J^h|0,Y^p|0,J|0,Y|0)|0,At()|0,F)|0,p=C(i[F>>2]^z|0,i[F+4>>2]^E|0,z|0,E|0)|0,h=At()|0,it=v,bi(h|0),p|0}function $e(a,o,h,p){a=a|0,o=o|0,h=h|0,p=p|0;var v=0,E=0;return E=it,it=it+16|0,v=E|0,j(a,o,h,p,v)|0,it=E,bi(i[v+4>>2]|0),i[v>>2]|0|0}function kt(a,o,h){return a=a|0,o=o|0,h=h|0,(h|0)<32?(bi(o>>h|0),a>>>h|(o&(1<<h)-1)<<32-h):(bi(((o|0)<0?-1:0)|0),o>>h-32|0)}function lt(a,o,h){return a=a|0,o=o|0,h=h|0,(h|0)<32?(bi(o>>>h|0),a>>>h|(o&(1<<h)-1)<<32-h):(bi(0),o>>>h-32|0)}function ct(a,o,h){return a=a|0,o=o|0,h=h|0,(h|0)<32?(bi(o<<h|(a&(1<<h)-1<<32-h)>>>32-h|0),a<<h):(bi(a<<h-32|0),0)}function L(a,o){return a=+a,o=+o,a!=a?+o:o!=o?+a:+Xi(+a,+o)}function r(a,o){return a=+a,o=+o,a!=a?+o:o!=o?+a:+Zn(+a,+o)}function d(a){return a=+a,a>=0?+Wt(a+.5):+ar(a-.5)}function k(a,o,h){a=a|0,o=o|0,h=h|0;var p=0,v=0,E=0;if((h|0)>=8192)return kr(a|0,o|0,h|0)|0,a|0;if(E=a|0,v=a+h|0,(a&3)==(o&3)){for(;a&3;){if(!h)return E|0;nt[a>>0]=nt[o>>0]|0,a=a+1|0,o=o+1|0,h=h-1|0}for(h=v&-4|0,p=h-64|0;(a|0)<=(p|0);)i[a>>2]=i[o>>2],i[a+4>>2]=i[o+4>>2],i[a+8>>2]=i[o+8>>2],i[a+12>>2]=i[o+12>>2],i[a+16>>2]=i[o+16>>2],i[a+20>>2]=i[o+20>>2],i[a+24>>2]=i[o+24>>2],i[a+28>>2]=i[o+28>>2],i[a+32>>2]=i[o+32>>2],i[a+36>>2]=i[o+36>>2],i[a+40>>2]=i[o+40>>2],i[a+44>>2]=i[o+44>>2],i[a+48>>2]=i[o+48>>2],i[a+52>>2]=i[o+52>>2],i[a+56>>2]=i[o+56>>2],i[a+60>>2]=i[o+60>>2],a=a+64|0,o=o+64|0;for(;(a|0)<(h|0);)i[a>>2]=i[o>>2],a=a+4|0,o=o+4|0}else for(h=v-4|0;(a|0)<(h|0);)nt[a>>0]=nt[o>>0]|0,nt[a+1>>0]=nt[o+1>>0]|0,nt[a+2>>0]=nt[o+2>>0]|0,nt[a+3>>0]=nt[o+3>>0]|0,a=a+4|0,o=o+4|0;for(;(a|0)<(v|0);)nt[a>>0]=nt[o>>0]|0,a=a+1|0,o=o+1|0;return E|0}function I(a,o,h){a=a|0,o=o|0,h=h|0;var p=0,v=0,E=0,z=0;if(E=a+h|0,o=o&255,(h|0)>=67){for(;a&3;)nt[a>>0]=o,a=a+1|0;for(p=E&-4|0,z=o|o<<8|o<<16|o<<24,v=p-64|0;(a|0)<=(v|0);)i[a>>2]=z,i[a+4>>2]=z,i[a+8>>2]=z,i[a+12>>2]=z,i[a+16>>2]=z,i[a+20>>2]=z,i[a+24>>2]=z,i[a+28>>2]=z,i[a+32>>2]=z,i[a+36>>2]=z,i[a+40>>2]=z,i[a+44>>2]=z,i[a+48>>2]=z,i[a+52>>2]=z,i[a+56>>2]=z,i[a+60>>2]=z,a=a+64|0;for(;(a|0)<(p|0);)i[a>>2]=z,a=a+4|0}for(;(a|0)<(E|0);)nt[a>>0]=o,a=a+1|0;return E-h|0}function R(a){return a=+a,a>=0?+Wt(a+.5):+ar(a-.5)}function q(a){a=a|0;var o=0,h=0,p=0;return p=es()|0,h=i[Vt>>2]|0,o=h+a|0,(a|0)>0&(o|0)<(h|0)|(o|0)<0?(Tn(o|0)|0,lr(12),-1):(o|0)>(p|0)&&!(ht(o|0)|0)?(lr(12),-1):(i[Vt>>2]=o,h|0)}return{___divdi3:H,___muldi3:Se,___remdi3:Ge,___uremdi3:$e,_areNeighborCells:xa,_bitshift64Ashr:kt,_bitshift64Lshr:lt,_bitshift64Shl:ct,_calloc:b,_cellAreaKm2:xs,_cellAreaM2:Is,_cellAreaRads2:jr,_cellToBoundary:xr,_cellToCenterChild:gr,_cellToChildPos:Ca,_cellToChildren:bn,_cellToChildrenSize:ns,_cellToLatLng:Nr,_cellToLocalIj:Ea,_cellToParent:eo,_cellToVertex:Sn,_cellToVertexes:Ga,_cellsToDirectedEdge:Ra,_cellsToLinkedMultiPolygon:te,_childPosToCell:Na,_compactCells:ba,_destroyLinkedMultiPolygon:ka,_directedEdgeToBoundary:_s,_directedEdgeToCells:Fa,_edgeLengthKm:EA,_edgeLengthM:Pr,_edgeLengthRads:Vs,_emscripten_replace_memory:nr,_free:_,_getBaseCellNumber:qo,_getDirectedEdgeDestination:Zr,_getDirectedEdgeOrigin:Xa,_getHexagonAreaAvgKm2:Gt,_getHexagonAreaAvgM2:ai,_getHexagonEdgeLengthAvgKm:Hi,_getHexagonEdgeLengthAvgM:mn,_getIcosahedronFaces:oa,_getNumCells:Pn,_getPentagons:ys,_getRes0Cells:na,_getResolution:rr,_greatCircleDistanceKm:si,_greatCircleDistanceM:Jt,_greatCircleDistanceRads:Ot,_gridDisk:Pa,_gridDiskDistances:os,_gridDistance:Vi,_gridPathCells:fl,_gridPathCellsSize:IA,_gridRingUnsafe:va,_i64Add:S,_i64Subtract:C,_isPentagon:$n,_isResClassIII:Lr,_isValidCell:Ja,_isValidDirectedEdge:wa,_isValidVertex:vo,_latLngToCell:Ns,_llvm_maxnum_f64:L,_llvm_minnum_f64:r,_llvm_round_f64:d,_localIjToCell:JA,_malloc:Ur,_maxFaceCount:Io,_maxGridDiskSize:co,_maxPolygonToCellsSize:Ba,_memcpy:k,_memset:I,_originToDirectedEdges:Qo,_pentagonCount:hs,_polygonToCells:Ds,_readInt64AsDoubleFromPointer:MA,_res0CellCount:or,_round:R,_sbrk:q,_sizeOfCellBoundary:Il,_sizeOfCoordIJ:to,_sizeOfGeoLoop:Ml,_sizeOfGeoPolygon:oA,_sizeOfH3Index:ls,_sizeOfLatLng:El,_sizeOfLinkedGeoPolygon:Fs,_uncompactCells:go,_uncompactCellsSize:sr,_vertexToLatLng:ml,establishStackSpace:Hs,stackAlloc:ks,stackRestore:Ta,stackSave:Es}}(Re,Fe,qt);t.___divdi3=de.___divdi3,t.___muldi3=de.___muldi3,t.___remdi3=de.___remdi3,t.___uremdi3=de.___uremdi3,t._areNeighborCells=de._areNeighborCells,t._bitshift64Ashr=de._bitshift64Ashr,t._bitshift64Lshr=de._bitshift64Lshr,t._bitshift64Shl=de._bitshift64Shl,t._calloc=de._calloc,t._cellAreaKm2=de._cellAreaKm2,t._cellAreaM2=de._cellAreaM2,t._cellAreaRads2=de._cellAreaRads2,t._cellToBoundary=de._cellToBoundary,t._cellToCenterChild=de._cellToCenterChild,t._cellToChildPos=de._cellToChildPos,t._cellToChildren=de._cellToChildren,t._cellToChildrenSize=de._cellToChildrenSize,t._cellToLatLng=de._cellToLatLng,t._cellToLocalIj=de._cellToLocalIj,t._cellToParent=de._cellToParent,t._cellToVertex=de._cellToVertex,t._cellToVertexes=de._cellToVertexes,t._cellsToDirectedEdge=de._cellsToDirectedEdge,t._cellsToLinkedMultiPolygon=de._cellsToLinkedMultiPolygon,t._childPosToCell=de._childPosToCell,t._compactCells=de._compactCells,t._destroyLinkedMultiPolygon=de._destroyLinkedMultiPolygon,t._directedEdgeToBoundary=de._directedEdgeToBoundary,t._directedEdgeToCells=de._directedEdgeToCells,t._edgeLengthKm=de._edgeLengthKm,t._edgeLengthM=de._edgeLengthM,t._edgeLengthRads=de._edgeLengthRads;var Ae=t._emscripten_replace_memory=de._emscripten_replace_memory;t._free=de._free,t._getBaseCellNumber=de._getBaseCellNumber,t._getDirectedEdgeDestination=de._getDirectedEdgeDestination,t._getDirectedEdgeOrigin=de._getDirectedEdgeOrigin,t._getHexagonAreaAvgKm2=de._getHexagonAreaAvgKm2,t._getHexagonAreaAvgM2=de._getHexagonAreaAvgM2,t._getHexagonEdgeLengthAvgKm=de._getHexagonEdgeLengthAvgKm,t._getHexagonEdgeLengthAvgM=de._getHexagonEdgeLengthAvgM,t._getIcosahedronFaces=de._getIcosahedronFaces,t._getNumCells=de._getNumCells,t._getPentagons=de._getPentagons,t._getRes0Cells=de._getRes0Cells,t._getResolution=de._getResolution,t._greatCircleDistanceKm=de._greatCircleDistanceKm,t._greatCircleDistanceM=de._greatCircleDistanceM,t._greatCircleDistanceRads=de._greatCircleDistanceRads,t._gridDisk=de._gridDisk,t._gridDiskDistances=de._gridDiskDistances,t._gridDistance=de._gridDistance,t._gridPathCells=de._gridPathCells,t._gridPathCellsSize=de._gridPathCellsSize,t._gridRingUnsafe=de._gridRingUnsafe,t._i64Add=de._i64Add,t._i64Subtract=de._i64Subtract,t._isPentagon=de._isPentagon,t._isResClassIII=de._isResClassIII,t._isValidCell=de._isValidCell,t._isValidDirectedEdge=de._isValidDirectedEdge,t._isValidVertex=de._isValidVertex,t._latLngToCell=de._latLngToCell,t._llvm_maxnum_f64=de._llvm_maxnum_f64,t._llvm_minnum_f64=de._llvm_minnum_f64,t._llvm_round_f64=de._llvm_round_f64,t._localIjToCell=de._localIjToCell,t._malloc=de._malloc,t._maxFaceCount=de._maxFaceCount,t._maxGridDiskSize=de._maxGridDiskSize,t._maxPolygonToCellsSize=de._maxPolygonToCellsSize,t._memcpy=de._memcpy,t._memset=de._memset,t._originToDirectedEdges=de._originToDirectedEdges,t._pentagonCount=de._pentagonCount,t._polygonToCells=de._polygonToCells,t._readInt64AsDoubleFromPointer=de._readInt64AsDoubleFromPointer,t._res0CellCount=de._res0CellCount,t._round=de._round,t._sbrk=de._sbrk,t._sizeOfCellBoundary=de._sizeOfCellBoundary,t._sizeOfCoordIJ=de._sizeOfCoordIJ,t._sizeOfGeoLoop=de._sizeOfGeoLoop,t._sizeOfGeoPolygon=de._sizeOfGeoPolygon,t._sizeOfH3Index=de._sizeOfH3Index,t._sizeOfLatLng=de._sizeOfLatLng,t._sizeOfLinkedGeoPolygon=de._sizeOfLinkedGeoPolygon,t._uncompactCells=de._uncompactCells,t._uncompactCellsSize=de._uncompactCellsSize,t._vertexToLatLng=de._vertexToLatLng,t.establishStackSpace=de.establishStackSpace;var W=t.stackAlloc=de.stackAlloc,ie=t.stackRestore=de.stackRestore,he=t.stackSave=de.stackSave;if(t.asm=de,t.cwrap=gt,t.setValue=le,t.getValue=je,cn){vn(cn)||(cn=g(cn));{Cs();var me=function(ge){ge.byteLength&&(ge=new Uint8Array(ge)),mi.set(ge,ce),t.memoryInitializerRequest&&delete t.memoryInitializerRequest.response,Kt()},pe=function(){P(cn,me,function(){throw"could not load memory initializer "+cn})},De=Ne(cn);if(De)me(De.buffer);else if(t.memoryInitializerRequest){var Le=function(){var ge=t.memoryInitializerRequest,Ce=ge.response;if(ge.status!==200&&ge.status!==0){var Qe=Ne(t.memoryInitializerRequestURL);if(Qe)Ce=Qe.buffer;else{console.warn("a problem seems to have happened with Module.memoryInitializerRequest, status: "+ge.status+", retrying "+cn),pe();return}}me(Ce)};t.memoryInitializerRequest.response?setTimeout(Le,0):t.memoryInitializerRequest.addEventListener("load",Le)}else pe()}}var Pe;zn=function ge(){Pe||Ve(),Pe||(zn=ge)};function Ve(ge){if(Gi>0||(fi(),Gi>0))return;function Ce(){Pe||(Pe=!0,!Je&&($i(),li(),t.onRuntimeInitialized&&t.onRuntimeInitialized(),Li()))}t.setStatus?(t.setStatus("Running..."),setTimeout(function(){setTimeout(function(){t.setStatus("")},1),Ce()},1)):Ce()}t.run=Ve;function Ue(ge){throw t.onAbort&&t.onAbort(ge),ge+="",u(ge),Q(ge),Je=!0,"abort("+ge+"). Build with -s ASSERTIONS=1 for more info."}if(t.abort=Ue,t.preInit)for(typeof t.preInit=="function"&&(t.preInit=[t.preInit]);t.preInit.length>0;)t.preInit.pop()();return Ve(),e}(typeof Jr=="object"?Jr:{}),cr="number",Wn=cr,Bf=cr,Jn=cr,er=cr,Ko=cr,Cn=cr,LR=[["sizeOfH3Index",cr],["sizeOfLatLng",cr],["sizeOfCellBoundary",cr],["sizeOfGeoLoop",cr],["sizeOfGeoPolygon",cr],["sizeOfLinkedGeoPolygon",cr],["sizeOfCoordIJ",cr],["readInt64AsDoubleFromPointer",cr],["isValidCell",Bf,[Jn,er]],["latLngToCell",Wn,[cr,cr,Ko,Cn]],["cellToLatLng",Wn,[Jn,er,Cn]],["cellToBoundary",Wn,[Jn,er,Cn]],["maxGridDiskSize",Wn,[cr,Cn]],["gridDisk",Wn,[Jn,er,cr,Cn]],["gridDiskDistances",Wn,[Jn,er,cr,Cn,Cn]],["gridRingUnsafe",Wn,[Jn,er,cr,Cn]],["maxPolygonToCellsSize",Wn,[Cn,Ko,cr,Cn]],["polygonToCells",Wn,[Cn,Ko,cr,Cn]],["cellsToLinkedMultiPolygon",Wn,[Cn,cr,Cn]],["destroyLinkedMultiPolygon",null,[Cn]],["compactCells",Wn,[Cn,Cn,cr,cr]],["uncompactCells",Wn,[Cn,cr,cr,Cn,cr,Ko]],["uncompactCellsSize",Wn,[Cn,cr,cr,Ko,Cn]],["isPentagon",Bf,[Jn,er]],["isResClassIII",Bf,[Jn,er]],["getBaseCellNumber",cr,[Jn,er]],["getResolution",cr,[Jn,er]],["maxFaceCount",Wn,[Jn,er,Cn]],["getIcosahedronFaces",Wn,[Jn,er,Cn]],["cellToParent",Wn,[Jn,er,Ko,Cn]],["cellToChildren",Wn,[Jn,er,Ko,Cn]],["cellToCenterChild",Wn,[Jn,er,Ko,Cn]],["cellToChildrenSize",Wn,[Jn,er,Ko,Cn]],["cellToChildPos",Wn,[Jn,er,Ko,Cn]],["childPosToCell",Wn,[cr,cr,Jn,er,Ko,Cn]],["areNeighborCells",Wn,[Jn,er,Jn,er,Cn]],["cellsToDirectedEdge",Wn,[Jn,er,Jn,er,Cn]],["getDirectedEdgeOrigin",Wn,[Jn,er,Cn]],["getDirectedEdgeDestination",Wn,[Jn,er,Cn]],["isValidDirectedEdge",Bf,[Jn,er]],["directedEdgeToCells",Wn,[Jn,er,Cn]],["originToDirectedEdges",Wn,[Jn,er,Cn]],["directedEdgeToBoundary",Wn,[Jn,er,Cn]],["gridDistance",Wn,[Jn,er,Jn,er,Cn]],["gridPathCells",Wn,[Jn,er,Jn,er,Cn]],["gridPathCellsSize",Wn,[Jn,er,Jn,er,Cn]],["cellToLocalIj",Wn,[Jn,er,Jn,er,cr,Cn]],["localIjToCell",Wn,[Jn,er,Cn,cr,Cn]],["getHexagonAreaAvgM2",Wn,[Ko,Cn]],["getHexagonAreaAvgKm2",Wn,[Ko,Cn]],["getHexagonEdgeLengthAvgM",Wn,[Ko,Cn]],["getHexagonEdgeLengthAvgKm",Wn,[Ko,Cn]],["greatCircleDistanceM",cr,[Cn,Cn]],["greatCircleDistanceKm",cr,[Cn,Cn]],["greatCircleDistanceRads",cr,[Cn,Cn]],["cellAreaM2",Wn,[Jn,er,Cn]],["cellAreaKm2",Wn,[Jn,er,Cn]],["cellAreaRads2",Wn,[Jn,er,Cn]],["edgeLengthM",Wn,[Jn,er,Cn]],["edgeLengthKm",Wn,[Jn,er,Cn]],["edgeLengthRads",Wn,[Jn,er,Cn]],["getNumCells",Wn,[Ko,Cn]],["getRes0Cells",Wn,[Cn]],["res0CellCount",cr],["getPentagons",Wn,[cr,Cn]],["pentagonCount",cr],["cellToVertex",Wn,[Jn,er,cr,Cn]],["cellToVertexes",Wn,[Jn,er,Cn]],["vertexToLatLng",Wn,[Jn,er,Cn]],["isValidVertex",Bf,[Jn,er]]],zR=0,RR=1,FR=2,OR=3,W4=4,NR=5,VR=6,UR=7,GR=8,QR=9,qR=10,HR=11,ZR=12,jR=13,WR=14,YR=15,Uo={};Uo[zR]="Success";Uo[RR]="The operation failed but a more specific error is not available";Uo[FR]="Argument was outside of acceptable range";Uo[OR]="Latitude or longitude arguments were outside of acceptable range";Uo[W4]="Resolution argument was outside of acceptable range";Uo[NR]="Cell argument was not valid";Uo[VR]="Directed edge argument was not valid";Uo[UR]="Undirected edge argument was not valid";Uo[GR]="Vertex argument was not valid";Uo[QR]="Pentagon distortion was encountered";Uo[qR]="Duplicate input";Uo[HR]="Cell arguments were not neighbors";Uo[ZR]="Cell arguments had incompatible resolutions";Uo[jR]="Memory allocation failed";Uo[WR]="Bounds of provided memory were insufficient";Uo[YR]="Mode or flags argument was not valid";var $R=1e3,Y4=1001,$4=1002,_m={};_m[$R]="Unknown unit";_m[Y4]="Array length out of bounds";_m[$4]="Got unexpected null value for H3 index";var XR="Unknown error";function X4(e,t,n){var l=n&&"value"in n,m=new Error((e[t]||XR)+" (code: "+t+(l?", value: "+n.value:"")+")");return m.code=t,m}function K4(e,t){var n=arguments.length===2?{value:t}:{};return X4(Uo,e,n)}function J4(e,t){var n=arguments.length===2?{value:t}:{};return X4(_m,e,n)}function Qg(e){if(e!==0)throw K4(e)}var hl={};LR.forEach(function(t){hl[t[0]]=Jr.cwrap.apply(Jr,t)});var Kc=16,id=4,Cv=8,KR=8,qg=hl.sizeOfH3Index(),kv=hl.sizeOfLatLng();hl.sizeOfCellBoundary();var JR=hl.sizeOfGeoPolygon(),Gf=hl.sizeOfGeoLoop();hl.sizeOfLinkedGeoPolygon();hl.sizeOfCoordIJ();function eF(e){if(typeof e!="number"||e<0||e>15||Math.floor(e)!==e)throw K4(W4,e);return e}function tF(e){if(!e)throw J4($4);return e}var iF=Math.pow(2,32)-1;function nF(e){if(e>iF)throw J4(Y4,e);return e}var rF=/[^0-9a-fA-F]/;function sF(e){if(Array.isArray(e)&&e.length===2&&Number.isInteger(e[0])&&Number.isInteger(e[1]))return e;if(typeof e!="string"||rF.test(e))return[0,0];var t=parseInt(e.substring(0,e.length-8),Kc),n=parseInt(e.substring(e.length-8),Kc);return[n,t]}function Yx(e){if(e>=0)return e.toString(Kc);e=e&2147483647;var t=e5(8,e.toString(Kc)),n=(parseInt(t[0],Kc)+8).toString(Kc);return t=n+t.substring(1),t}function aF(e,t){return Yx(t)+e5(8,Yx(e))}function e5(e,t){for(var n=e-t.length,l="",m=0;m<n;m++)l+="0";return l=l+t,l}function $x(e,t,n){for(var l=e.length,m=Jr._calloc(l,kv),g=n?1:0,P=n?0:1,u=0;u<l*2;u+=2)Jr.HEAPF64.set([e[u/2][g],e[u/2][P]].map(i5),m/Cv+u);return Jr.HEAPU32.set([l,m],t/id),t}function oF(e,t){var n=e.length-1,l=Jr._calloc(JR),m=0,g=m+Gf,P=g+id;$x(e[0],l+m,t);var u;if(n>0){u=Jr._calloc(n,Gf);for(var Q=0;Q<n;Q++)$x(e[Q+1],u+Gf*Q,t)}return Jr.setValue(l+g,n,"i32"),Jr.setValue(l+P,u,"i32"),l}function AF(e){var t=0,n=t+Gf,l=n+id,m=id;Jr._free(Jr.getValue(e+t+m,"i8*"));var g=Jr.getValue(e+n,"i32");if(g>0){for(var P=Jr.getValue(e+l,"i32"),u=0;u<g;u++)Jr._free(Jr.getValue(P+Gf*u+m,"i8*"));Jr._free(P)}Jr._free(e)}function t5(e,t){t===void 0&&(t=0);var n=Jr.getValue(e+qg*t,"i32"),l=Jr.getValue(e+qg*t+id,"i32");return l?aF(n,l):null}function lF(e){return hl.readInt64AsDoubleFromPointer(e)}function uF(e,t){for(var n=[],l=0;l<t;l++){var m=t5(e,l);m!==null&&n.push(m)}return n}function Xx(e){return dF(Jr.getValue(e,"double"))}function hF(e){return[Xx(e),Xx(e+Cv)]}function cF(e,t,n){var l=Jr._malloc(kv);Jr.HEAPF64.set([e,t].map(i5),l/Cv);var m=Jr._malloc(qg);try{return Qg(hl.latLngToCell(l,n,m)),tF(t5(m))}finally{Jr._free(m),Jr._free(l)}}function Kx(e){var t=Jr._malloc(kv),n=sF(e),l=n[0],m=n[1];try{return Qg(hl.cellToLatLng(l,m,t)),hF(t)}finally{Jr._free(t)}}function fF(e,t,n){if(eF(t),n=!!n,e.length===0||e[0].length===0)return[];var l=typeof e[0][0]=="number"?[e]:e,m=oF(l,n),g=Jr._malloc(KR);try{Qg(hl.maxPolygonToCellsSize(m,t,0,g));var P=nF(lF(g)),u=Jr._calloc(P,qg);try{return Qg(hl.polygonToCells(m,t,0,u)),uF(u,P)}finally{Jr._free(u)}}finally{Jr._free(g),AF(m)}}function i5(e){return e*Math.PI/180}function dF(e){return e*180/Math.PI}function Ev(e,t,n){n===void 0&&(n={});var l={type:"Feature"};return(n.id===0||n.id)&&(l.id=n.id),n.bbox&&(l.bbox=n.bbox),l.properties=t||{},l.geometry=e,l}function pF(e,t,n){n===void 0&&(n={});for(var l=0,m=e;l<m.length;l++){var g=m[l];if(g.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var P=0;P<g[g.length-1].length;P++)if(g[g.length-1][P]!==g[0][P])throw new Error("First and last Position are not equivalent.")}var u={type:"Polygon",coordinates:e};return Ev(u,t,n)}function gF(e,t){t===void 0&&(t={});var n={type:"FeatureCollection"};return t.id&&(n.id=t.id),t.bbox&&(n.bbox=t.bbox),n.features=e,n}function mF(e,t,n){n===void 0&&(n={});var l={type:"MultiPolygon",coordinates:e};return Ev(l,t,n)}function _F(e,t){if(e.type==="Feature")t(e,0);else if(e.type==="FeatureCollection")for(var n=0;n<e.features.length&&t(e.features[n],n)!==!1;n++);}function Jx(e){return e.type==="Feature"?e.geometry:e}function vF(e){var t={MultiPoint:{coordinates:[],properties:[]},MultiLineString:{coordinates:[],properties:[]},MultiPolygon:{coordinates:[],properties:[]}};return _F(e,function(n){var l,m,g,P;switch((P=n.geometry)===null||P===void 0?void 0:P.type){case"Point":t.MultiPoint.coordinates.push(n.geometry.coordinates),t.MultiPoint.properties.push(n.properties);break;case"MultiPoint":(l=t.MultiPoint.coordinates).push.apply(l,n.geometry.coordinates),t.MultiPoint.properties.push(n.properties);break;case"LineString":t.MultiLineString.coordinates.push(n.geometry.coordinates),t.MultiLineString.properties.push(n.properties);break;case"MultiLineString":(m=t.MultiLineString.coordinates).push.apply(m,n.geometry.coordinates),t.MultiLineString.properties.push(n.properties);break;case"Polygon":t.MultiPolygon.coordinates.push(n.geometry.coordinates),t.MultiPolygon.properties.push(n.properties);break;case"MultiPolygon":(g=t.MultiPolygon.coordinates).push.apply(g,n.geometry.coordinates),t.MultiPolygon.properties.push(n.properties);break}}),gF(Object.keys(t).filter(function(n){return t[n].coordinates.length}).sort().map(function(n){var l={type:n,coordinates:t[n].coordinates},m={collectedProperties:t[n].properties};return Ev(l,m)}))}/**
 * splaytree v3.1.2
 * Fast Splay tree for Node and browser
 *
 * @author Alexander Milevski <info@w8r.name>
 * @license MIT
 * @preserve
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function yF(e,t){var n={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},l,m,g,P;return P={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(P[Symbol.iterator]=function(){return this}),P;function u(O){return function(re){return Q([O,re])}}function Q(O){if(l)throw new TypeError("Generator is already executing.");for(;n;)try{if(l=1,m&&(g=O[0]&2?m.return:O[0]?m.throw||((g=m.return)&&g.call(m),0):m.next)&&!(g=g.call(m,O[1])).done)return g;switch(m=0,g&&(O=[O[0]&2,g.value]),O[0]){case 0:case 1:g=O;break;case 4:return n.label++,{value:O[1],done:!1};case 5:n.label++,m=O[1],O=[0];continue;case 7:O=n.ops.pop(),n.trys.pop();continue;default:if(g=n.trys,!(g=g.length>0&&g[g.length-1])&&(O[0]===6||O[0]===2)){n=0;continue}if(O[0]===3&&(!g||O[1]>g[0]&&O[1]<g[3])){n.label=O[1];break}if(O[0]===6&&n.label<g[1]){n.label=g[1],g=O;break}if(g&&n.label<g[2]){n.label=g[2],n.ops.push(O);break}g[2]&&n.ops.pop(),n.trys.pop();continue}O=t.call(e,n)}catch(re){O=[6,re],m=0}finally{l=g=0}if(O[0]&5)throw O[1];return{value:O[0]?O[1]:void 0,done:!0}}}var _h=function(){function e(t,n){this.next=null,this.key=t,this.data=n,this.left=null,this.right=null}return e}();function xF(e,t){return e>t?1:e<t?-1:0}function ch(e,t,n){for(var l=new _h(null,null),m=l,g=l;;){var P=n(e,t.key);if(P<0){if(t.left===null)break;if(n(e,t.left.key)<0){var u=t.left;if(t.left=u.right,u.right=t,t=u,t.left===null)break}g.left=t,g=t,t=t.left}else if(P>0){if(t.right===null)break;if(n(e,t.right.key)>0){var u=t.right;if(t.right=u.left,u.left=t,t=u,t.right===null)break}m.right=t,m=t,t=t.right}else break}return m.right=t.left,g.left=t.right,t.left=l.right,t.right=l.left,t}function n1(e,t,n,l){var m=new _h(e,t);if(n===null)return m.left=m.right=null,m;n=ch(e,n,l);var g=l(e,n.key);return g<0?(m.left=n.left,m.right=n,n.left=null):g>=0&&(m.right=n.right,m.left=n,n.right=null),m}function ew(e,t,n){var l=null,m=null;if(t){t=ch(e,t,n);var g=n(t.key,e);g===0?(l=t.left,m=t.right):g<0?(m=t.right,t.right=null,l=t):(l=t.left,t.left=null,m=t)}return{left:l,right:m}}function wF(e,t,n){return t===null?e:(e===null||(t=ch(e.key,t,n),t.left=e),t)}function _2(e,t,n,l,m){if(e){l(""+t+(n?"└── ":"├── ")+m(e)+`
`);var g=t+(n?"    ":"│   ");e.left&&_2(e.left,g,!1,l,m),e.right&&_2(e.right,g,!0,l,m)}}var Iv=function(){function e(t){t===void 0&&(t=xF),this._root=null,this._size=0,this._comparator=t}return e.prototype.insert=function(t,n){return this._size++,this._root=n1(t,n,this._root,this._comparator)},e.prototype.add=function(t,n){var l=new _h(t,n);this._root===null&&(l.left=l.right=null,this._size++,this._root=l);var m=this._comparator,g=ch(t,this._root,m),P=m(t,g.key);return P===0?this._root=g:(P<0?(l.left=g.left,l.right=g,g.left=null):P>0&&(l.right=g.right,l.left=g,g.right=null),this._size++,this._root=l),this._root},e.prototype.remove=function(t){this._root=this._remove(t,this._root,this._comparator)},e.prototype._remove=function(t,n,l){var m;if(n===null)return null;n=ch(t,n,l);var g=l(t,n.key);return g===0?(n.left===null?m=n.right:(m=ch(t,n.left,l),m.right=n.right),this._size--,m):n},e.prototype.pop=function(){var t=this._root;if(t){for(;t.left;)t=t.left;return this._root=ch(t.key,this._root,this._comparator),this._root=this._remove(t.key,this._root,this._comparator),{key:t.key,data:t.data}}return null},e.prototype.findStatic=function(t){for(var n=this._root,l=this._comparator;n;){var m=l(t,n.key);if(m===0)return n;m<0?n=n.left:n=n.right}return null},e.prototype.find=function(t){return this._root&&(this._root=ch(t,this._root,this._comparator),this._comparator(t,this._root.key)!==0)?null:this._root},e.prototype.contains=function(t){for(var n=this._root,l=this._comparator;n;){var m=l(t,n.key);if(m===0)return!0;m<0?n=n.left:n=n.right}return!1},e.prototype.forEach=function(t,n){for(var l=this._root,m=[],g=!1;!g;)l!==null?(m.push(l),l=l.left):m.length!==0?(l=m.pop(),t.call(n,l),l=l.right):g=!0;return this},e.prototype.range=function(t,n,l,m){for(var g=[],P=this._comparator,u=this._root,Q;g.length!==0||u;)if(u)g.push(u),u=u.left;else{if(u=g.pop(),Q=P(u.key,n),Q>0)break;if(P(u.key,t)>=0&&l.call(m,u))return this;u=u.right}return this},e.prototype.keys=function(){var t=[];return this.forEach(function(n){var l=n.key;return t.push(l)}),t},e.prototype.values=function(){var t=[];return this.forEach(function(n){var l=n.data;return t.push(l)}),t},e.prototype.min=function(){return this._root?this.minNode(this._root).key:null},e.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},e.prototype.minNode=function(t){if(t===void 0&&(t=this._root),t)for(;t.left;)t=t.left;return t},e.prototype.maxNode=function(t){if(t===void 0&&(t=this._root),t)for(;t.right;)t=t.right;return t},e.prototype.at=function(t){for(var n=this._root,l=!1,m=0,g=[];!l;)if(n)g.push(n),n=n.left;else if(g.length>0){if(n=g.pop(),m===t)return n;m++,n=n.right}else l=!0;return null},e.prototype.next=function(t){var n=this._root,l=null;if(t.right){for(l=t.right;l.left;)l=l.left;return l}for(var m=this._comparator;n;){var g=m(t.key,n.key);if(g===0)break;g<0?(l=n,n=n.left):n=n.right}return l},e.prototype.prev=function(t){var n=this._root,l=null;if(t.left!==null){for(l=t.left;l.right;)l=l.right;return l}for(var m=this._comparator;n;){var g=m(t.key,n.key);if(g===0)break;g<0?n=n.left:(l=n,n=n.right)}return l},e.prototype.clear=function(){return this._root=null,this._size=0,this},e.prototype.toList=function(){return SF(this._root)},e.prototype.load=function(t,n,l){n===void 0&&(n=[]),l===void 0&&(l=!1);var m=t.length,g=this._comparator;if(l&&x2(t,n,0,m-1,g),this._root===null)this._root=v2(t,n,0,m),this._size=m;else{var P=CF(this.toList(),bF(t,n),g);m=this._size+m,this._root=y2({head:P},0,m)}return this},e.prototype.isEmpty=function(){return this._root===null},Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),e.prototype.toString=function(t){t===void 0&&(t=function(l){return String(l.key)});var n=[];return _2(this._root,"",!0,function(l){return n.push(l)},t),n.join("")},e.prototype.update=function(t,n,l){var m=this._comparator,g=ew(t,this._root,m),P=g.left,u=g.right;m(t,n)<0?u=n1(n,l,u,m):P=n1(n,l,P,m),this._root=wF(P,u,m)},e.prototype.split=function(t){return ew(t,this._root,this._comparator)},e.prototype[Symbol.iterator]=function(){var t,n,l;return yF(this,function(m){switch(m.label){case 0:t=this._root,n=[],l=!1,m.label=1;case 1:return l?[3,6]:t===null?[3,2]:(n.push(t),t=t.left,[3,5]);case 2:return n.length===0?[3,4]:(t=n.pop(),[4,t]);case 3:return m.sent(),t=t.right,[3,5];case 4:l=!0,m.label=5;case 5:return[3,1];case 6:return[2]}})},e}();function v2(e,t,n,l){var m=l-n;if(m>0){var g=n+Math.floor(m/2),P=e[g],u=t[g],Q=new _h(P,u);return Q.left=v2(e,t,n,g),Q.right=v2(e,t,g+1,l),Q}return null}function bF(e,t){for(var n=new _h(null,null),l=n,m=0;m<e.length;m++)l=l.next=new _h(e[m],t[m]);return l.next=null,n.next}function SF(e){for(var t=e,n=[],l=!1,m=new _h(null,null),g=m;!l;)t?(n.push(t),t=t.left):n.length>0?(t=g=g.next=n.pop(),t=t.right):l=!0;return g.next=null,m.next}function y2(e,t,n){var l=n-t;if(l>0){var m=t+Math.floor(l/2),g=y2(e,t,m),P=e.head;return P.left=g,e.head=e.head.next,P.right=y2(e,m+1,n),P}return null}function CF(e,t,n){for(var l=new _h(null,null),m=l,g=e,P=t;g!==null&&P!==null;)n(g.key,P.key)<0?(m.next=g,g=g.next):(m.next=P,P=P.next),m=m.next;return g!==null?m.next=g:P!==null&&(m.next=P),l.next}function x2(e,t,n,l,m){if(!(n>=l)){for(var g=e[n+l>>1],P=n-1,u=l+1;;){do P++;while(m(e[P],g)<0);do u--;while(m(e[u],g)>0);if(P>=u)break;var Q=e[P];e[P]=e[u],e[u]=Q,Q=t[P],t[P]=t[u],t[u]=Q}x2(e,t,n,u,m),x2(e,t,u+1,l,m)}}var n5={};const Df=(e,t)=>e.ll.x<=t.x&&t.x<=e.ur.x&&e.ll.y<=t.y&&t.y<=e.ur.y,w2=(e,t)=>{if(t.ur.x<e.ll.x||e.ur.x<t.ll.x||t.ur.y<e.ll.y||e.ur.y<t.ll.y)return null;const n=e.ll.x<t.ll.x?t.ll.x:e.ll.x,l=e.ur.x<t.ur.x?e.ur.x:t.ur.x,m=e.ll.y<t.ll.y?t.ll.y:e.ll.y,g=e.ur.y<t.ur.y?e.ur.y:t.ur.y;return{ll:{x:n,y:m},ur:{x:l,y:g}}};let fh=Number.EPSILON;fh===void 0&&(fh=Math.pow(2,-52));const kF=fh*fh,tw=(e,t)=>{if(-fh<e&&e<fh&&-fh<t&&t<fh)return 0;const n=e-t;return n*n<kF*e*t?0:e<t?-1:1};class EF{constructor(){this.reset()}reset(){this.xRounder=new iw,this.yRounder=new iw}round(t,n){return{x:this.xRounder.round(t),y:this.yRounder.round(n)}}}class iw{constructor(){this.tree=new Iv,this.round(0)}round(t){const n=this.tree.add(t),l=this.tree.prev(n);if(l!==null&&tw(n.key,l.key)===0)return this.tree.remove(t),l.key;const m=this.tree.next(n);return m!==null&&tw(n.key,m.key)===0?(this.tree.remove(t),m.key):t}}const nd=new EF,Ag=(e,t)=>e.x*t.y-e.y*t.x,r5=(e,t)=>e.x*t.x+e.y*t.y,nw=(e,t,n)=>{const l=Zk(e.x,e.y,t.x,t.y,n.x,n.y);return l>0?-1:l<0?1:0},Hg=e=>Math.sqrt(r5(e,e)),IF=(e,t,n)=>{const l={x:t.x-e.x,y:t.y-e.y},m={x:n.x-e.x,y:n.y-e.y};return Ag(m,l)/Hg(m)/Hg(l)},MF=(e,t,n)=>{const l={x:t.x-e.x,y:t.y-e.y},m={x:n.x-e.x,y:n.y-e.y};return r5(m,l)/Hg(m)/Hg(l)},rw=(e,t,n)=>t.y===0?null:{x:e.x+t.x/t.y*(n-e.y),y:n},sw=(e,t,n)=>t.x===0?null:{x:n,y:e.y+t.y/t.x*(n-e.x)},TF=(e,t,n,l)=>{if(t.x===0)return sw(n,l,e.x);if(l.x===0)return sw(e,t,n.x);if(t.y===0)return rw(n,l,e.y);if(l.y===0)return rw(e,t,n.y);const m=Ag(t,l);if(m==0)return null;const g={x:n.x-e.x,y:n.y-e.y},P=Ag(g,t)/m,u=Ag(g,l)/m,Q=e.x+u*t.x,O=n.x+P*l.x,re=e.y+u*t.y,ee=n.y+P*l.y,ce=(Q+O)/2,le=(re+ee)/2;return{x:ce,y:le}};class bl{static compare(t,n){const l=bl.comparePoints(t.point,n.point);return l!==0?l:(t.point!==n.point&&t.link(n),t.isLeft!==n.isLeft?t.isLeft?1:-1:dh.compare(t.segment,n.segment))}static comparePoints(t,n){return t.x<n.x?-1:t.x>n.x?1:t.y<n.y?-1:t.y>n.y?1:0}constructor(t,n){t.events===void 0?t.events=[this]:t.events.push(this),this.point=t,this.isLeft=n}link(t){if(t.point===this.point)throw new Error("Tried to link already linked events");const n=t.point.events;for(let l=0,m=n.length;l<m;l++){const g=n[l];this.point.events.push(g),g.point=this.point}this.checkForConsuming()}checkForConsuming(){const t=this.point.events.length;for(let n=0;n<t;n++){const l=this.point.events[n];if(l.segment.consumedBy===void 0)for(let m=n+1;m<t;m++){const g=this.point.events[m];g.consumedBy===void 0&&l.otherSE.point.events===g.otherSE.point.events&&l.segment.consume(g.segment)}}}getAvailableLinkedEvents(){const t=[];for(let n=0,l=this.point.events.length;n<l;n++){const m=this.point.events[n];m!==this&&!m.segment.ringOut&&m.segment.isInResult()&&t.push(m)}return t}getLeftmostComparator(t){const n=new Map,l=m=>{const g=m.otherSE;n.set(m,{sine:IF(this.point,t.point,g.point),cosine:MF(this.point,t.point,g.point)})};return(m,g)=>{n.has(m)||l(m),n.has(g)||l(g);const{sine:P,cosine:u}=n.get(m),{sine:Q,cosine:O}=n.get(g);return P>=0&&Q>=0?u<O?1:u>O?-1:0:P<0&&Q<0?u<O?-1:u>O?1:0:Q<P?-1:Q>P?1:0}}}let PF=0;class dh{static compare(t,n){const l=t.leftSE.point.x,m=n.leftSE.point.x,g=t.rightSE.point.x,P=n.rightSE.point.x;if(P<l)return 1;if(g<m)return-1;const u=t.leftSE.point.y,Q=n.leftSE.point.y,O=t.rightSE.point.y,re=n.rightSE.point.y;if(l<m){if(Q<u&&Q<O)return 1;if(Q>u&&Q>O)return-1;const ee=t.comparePoint(n.leftSE.point);if(ee<0)return 1;if(ee>0)return-1;const ce=n.comparePoint(t.rightSE.point);return ce!==0?ce:-1}if(l>m){if(u<Q&&u<re)return-1;if(u>Q&&u>re)return 1;const ee=n.comparePoint(t.leftSE.point);if(ee!==0)return ee;const ce=t.comparePoint(n.rightSE.point);return ce<0?1:ce>0?-1:1}if(u<Q)return-1;if(u>Q)return 1;if(g<P){const ee=n.comparePoint(t.rightSE.point);if(ee!==0)return ee}if(g>P){const ee=t.comparePoint(n.rightSE.point);if(ee<0)return 1;if(ee>0)return-1}if(g!==P){const ee=O-u,ce=g-l,le=re-Q,je=P-m;if(ee>ce&&le<je)return 1;if(ee<ce&&le>je)return-1}return g>P?1:g<P||O<re?-1:O>re?1:t.id<n.id?-1:t.id>n.id?1:0}constructor(t,n,l,m){this.id=++PF,this.leftSE=t,t.segment=this,t.otherSE=n,this.rightSE=n,n.segment=this,n.otherSE=t,this.rings=l,this.windings=m}static fromRing(t,n,l){let m,g,P;const u=bl.comparePoints(t,n);if(u<0)m=t,g=n,P=1;else if(u>0)m=n,g=t,P=-1;else throw new Error(`Tried to create degenerate segment at [${t.x}, ${t.y}]`);const Q=new bl(m,!0),O=new bl(g,!1);return new dh(Q,O,[l],[P])}replaceRightSE(t){this.rightSE=t,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){const t=this.leftSE.point.y,n=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:t<n?t:n},ur:{x:this.rightSE.point.x,y:t>n?t:n}}}vector(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}isAnEndpoint(t){return t.x===this.leftSE.point.x&&t.y===this.leftSE.point.y||t.x===this.rightSE.point.x&&t.y===this.rightSE.point.y}comparePoint(t){if(this.isAnEndpoint(t))return 0;const n=this.leftSE.point,l=this.rightSE.point,m=this.vector();if(n.x===l.x)return t.x===n.x?0:t.x<n.x?1:-1;const g=(t.y-n.y)/m.y,P=n.x+g*m.x;if(t.x===P)return 0;const u=(t.x-n.x)/m.x,Q=n.y+u*m.y;return t.y===Q?0:t.y<Q?-1:1}getIntersection(t){const n=this.bbox(),l=t.bbox(),m=w2(n,l);if(m===null)return null;const g=this.leftSE.point,P=this.rightSE.point,u=t.leftSE.point,Q=t.rightSE.point,O=Df(n,u)&&this.comparePoint(u)===0,re=Df(l,g)&&t.comparePoint(g)===0,ee=Df(n,Q)&&this.comparePoint(Q)===0,ce=Df(l,P)&&t.comparePoint(P)===0;if(re&&O)return ce&&!ee?P:!ce&&ee?Q:null;if(re)return ee&&g.x===Q.x&&g.y===Q.y?null:g;if(O)return ce&&P.x===u.x&&P.y===u.y?null:u;if(ce&&ee)return null;if(ce)return P;if(ee)return Q;const le=TF(g,this.vector(),u,t.vector());return le===null||!Df(m,le)?null:nd.round(le.x,le.y)}split(t){const n=[],l=t.events!==void 0,m=new bl(t,!0),g=new bl(t,!1),P=this.rightSE;this.replaceRightSE(g),n.push(g),n.push(m);const u=new dh(m,P,this.rings.slice(),this.windings.slice());return bl.comparePoints(u.leftSE.point,u.rightSE.point)>0&&u.swapEvents(),bl.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),l&&(m.checkForConsuming(),g.checkForConsuming()),n}swapEvents(){const t=this.rightSE;this.rightSE=this.leftSE,this.leftSE=t,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let n=0,l=this.windings.length;n<l;n++)this.windings[n]*=-1}consume(t){let n=this,l=t;for(;n.consumedBy;)n=n.consumedBy;for(;l.consumedBy;)l=l.consumedBy;const m=dh.compare(n,l);if(m!==0){if(m>0){const g=n;n=l,l=g}if(n.prev===l){const g=n;n=l,l=g}for(let g=0,P=l.rings.length;g<P;g++){const u=l.rings[g],Q=l.windings[g],O=n.rings.indexOf(u);O===-1?(n.rings.push(u),n.windings.push(Q)):n.windings[O]+=Q}l.rings=null,l.windings=null,l.consumedBy=n,l.leftSE.consumedBy=n.leftSE,l.rightSE.consumedBy=n.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{const t=this.prev.consumedBy||this.prev;this._beforeState=t.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;const t=this.beforeState();this._afterState={rings:t.rings.slice(0),windings:t.windings.slice(0),multiPolys:[]};const n=this._afterState.rings,l=this._afterState.windings,m=this._afterState.multiPolys;for(let u=0,Q=this.rings.length;u<Q;u++){const O=this.rings[u],re=this.windings[u],ee=n.indexOf(O);ee===-1?(n.push(O),l.push(re)):l[ee]+=re}const g=[],P=[];for(let u=0,Q=n.length;u<Q;u++){if(l[u]===0)continue;const O=n[u],re=O.poly;if(P.indexOf(re)===-1)if(O.isExterior)g.push(re);else{P.indexOf(re)===-1&&P.push(re);const ee=g.indexOf(O.poly);ee!==-1&&g.splice(ee,1)}}for(let u=0,Q=g.length;u<Q;u++){const O=g[u].multiPoly;m.indexOf(O)===-1&&m.push(O)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;const t=this.beforeState().multiPolys,n=this.afterState().multiPolys;switch(Zl.type){case"union":{const l=t.length===0,m=n.length===0;this._isInResult=l!==m;break}case"intersection":{let l,m;t.length<n.length?(l=t.length,m=n.length):(l=n.length,m=t.length),this._isInResult=m===Zl.numMultiPolys&&l<m;break}case"xor":{const l=Math.abs(t.length-n.length);this._isInResult=l%2===1;break}case"difference":{const l=m=>m.length===1&&m[0].isSubject;this._isInResult=l(t)!==l(n);break}default:throw new Error(`Unrecognized operation type found ${Zl.type}`)}return this._isInResult}}class aw{constructor(t,n,l){if(!Array.isArray(t)||t.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=n,this.isExterior=l,this.segments=[],typeof t[0][0]!="number"||typeof t[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");const m=nd.round(t[0][0],t[0][1]);this.bbox={ll:{x:m.x,y:m.y},ur:{x:m.x,y:m.y}};let g=m;for(let P=1,u=t.length;P<u;P++){if(typeof t[P][0]!="number"||typeof t[P][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let Q=nd.round(t[P][0],t[P][1]);Q.x===g.x&&Q.y===g.y||(this.segments.push(dh.fromRing(g,Q,this)),Q.x<this.bbox.ll.x&&(this.bbox.ll.x=Q.x),Q.y<this.bbox.ll.y&&(this.bbox.ll.y=Q.y),Q.x>this.bbox.ur.x&&(this.bbox.ur.x=Q.x),Q.y>this.bbox.ur.y&&(this.bbox.ur.y=Q.y),g=Q)}(m.x!==g.x||m.y!==g.y)&&this.segments.push(dh.fromRing(g,m,this))}getSweepEvents(){const t=[];for(let n=0,l=this.segments.length;n<l;n++){const m=this.segments[n];t.push(m.leftSE),t.push(m.rightSE)}return t}}class BF{constructor(t,n){if(!Array.isArray(t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new aw(t[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let l=1,m=t.length;l<m;l++){const g=new aw(t[l],this,!1);g.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=g.bbox.ll.x),g.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=g.bbox.ll.y),g.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=g.bbox.ur.x),g.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=g.bbox.ur.y),this.interiorRings.push(g)}this.multiPoly=n}getSweepEvents(){const t=this.exteriorRing.getSweepEvents();for(let n=0,l=this.interiorRings.length;n<l;n++){const m=this.interiorRings[n].getSweepEvents();for(let g=0,P=m.length;g<P;g++)t.push(m[g])}return t}}class ow{constructor(t,n){if(!Array.isArray(t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof t[0][0][0]=="number"&&(t=[t])}catch{}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(let l=0,m=t.length;l<m;l++){const g=new BF(t[l],this);g.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=g.bbox.ll.x),g.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=g.bbox.ll.y),g.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=g.bbox.ur.x),g.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=g.bbox.ur.y),this.polys.push(g)}this.isSubject=n}getSweepEvents(){const t=[];for(let n=0,l=this.polys.length;n<l;n++){const m=this.polys[n].getSweepEvents();for(let g=0,P=m.length;g<P;g++)t.push(m[g])}return t}}class Zg{static factory(t){const n=[];for(let l=0,m=t.length;l<m;l++){const g=t[l];if(!g.isInResult()||g.ringOut)continue;let P=null,u=g.leftSE,Q=g.rightSE;const O=[u],re=u.point,ee=[];for(;P=u,u=Q,O.push(u),u.point!==re;)for(;;){const ce=u.getAvailableLinkedEvents();if(ce.length===0){const Je=O[0].point,Xe=O[O.length-1].point;throw new Error(`Unable to complete output ring starting at [${Je.x}, ${Je.y}]. Last matching segment found ends at [${Xe.x}, ${Xe.y}].`)}if(ce.length===1){Q=ce[0].otherSE;break}let le=null;for(let Je=0,Xe=ee.length;Je<Xe;Je++)if(ee[Je].point===u.point){le=Je;break}if(le!==null){const Je=ee.splice(le)[0],Xe=O.splice(Je.index);Xe.unshift(Xe[0].otherSE),n.push(new Zg(Xe.reverse()));continue}ee.push({index:O.length,point:u.point});const je=u.getLeftmostComparator(P);Q=ce.sort(je)[0].otherSE;break}n.push(new Zg(O))}return n}constructor(t){this.events=t;for(let n=0,l=t.length;n<l;n++)t[n].segment.ringOut=this;this.poly=null}getGeom(){let t=this.events[0].point;const n=[t];for(let O=1,re=this.events.length-1;O<re;O++){const ee=this.events[O].point,ce=this.events[O+1].point;nw(ee,t,ce)!==0&&(n.push(ee),t=ee)}if(n.length===1)return null;const l=n[0],m=n[1];nw(l,t,m)===0&&n.shift(),n.push(n[0]);const g=this.isExteriorRing()?1:-1,P=this.isExteriorRing()?0:n.length-1,u=this.isExteriorRing()?n.length:-1,Q=[];for(let O=P;O!=u;O+=g)Q.push([n[O].x,n[O].y]);return Q}isExteriorRing(){if(this._isExteriorRing===void 0){const t=this.enclosingRing();this._isExteriorRing=t?!t.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){let t=this.events[0];for(let m=1,g=this.events.length;m<g;m++){const P=this.events[m];bl.compare(t,P)>0&&(t=P)}let n=t.segment.prevInResult(),l=n?n.prevInResult():null;for(;;){if(!n)return null;if(!l)return n.ringOut;if(l.ringOut!==n.ringOut)return l.ringOut.enclosingRing()!==n.ringOut?n.ringOut:n.ringOut.enclosingRing();n=l.prevInResult(),l=n?n.prevInResult():null}}}class Aw{constructor(t){this.exteriorRing=t,t.poly=this,this.interiorRings=[]}addInterior(t){this.interiorRings.push(t),t.poly=this}getGeom(){const t=[this.exteriorRing.getGeom()];if(t[0]===null)return null;for(let n=0,l=this.interiorRings.length;n<l;n++){const m=this.interiorRings[n].getGeom();m!==null&&t.push(m)}return t}}class DF{constructor(t){this.rings=t,this.polys=this._composePolys(t)}getGeom(){const t=[];for(let n=0,l=this.polys.length;n<l;n++){const m=this.polys[n].getGeom();m!==null&&t.push(m)}return t}_composePolys(t){const n=[];for(let l=0,m=t.length;l<m;l++){const g=t[l];if(!g.poly)if(g.isExteriorRing())n.push(new Aw(g));else{const P=g.enclosingRing();P.poly||n.push(new Aw(P)),P.poly.addInterior(g)}}return n}}class LF{constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:dh.compare;this.queue=t,this.tree=new Iv(n),this.segments=[]}process(t){const n=t.segment,l=[];if(t.consumedBy)return t.isLeft?this.queue.remove(t.otherSE):this.tree.remove(n),l;const m=t.isLeft?this.tree.add(n):this.tree.find(n);if(!m)throw new Error(`Unable to find segment #${n.id} [${n.leftSE.point.x}, ${n.leftSE.point.y}] -> [${n.rightSE.point.x}, ${n.rightSE.point.y}] in SweepLine tree.`);let g=m,P=m,u,Q;for(;u===void 0;)g=this.tree.prev(g),g===null?u=null:g.key.consumedBy===void 0&&(u=g.key);for(;Q===void 0;)P=this.tree.next(P),P===null?Q=null:P.key.consumedBy===void 0&&(Q=P.key);if(t.isLeft){let O=null;if(u){const ee=u.getIntersection(n);if(ee!==null&&(n.isAnEndpoint(ee)||(O=ee),!u.isAnEndpoint(ee))){const ce=this._splitSafely(u,ee);for(let le=0,je=ce.length;le<je;le++)l.push(ce[le])}}let re=null;if(Q){const ee=Q.getIntersection(n);if(ee!==null&&(n.isAnEndpoint(ee)||(re=ee),!Q.isAnEndpoint(ee))){const ce=this._splitSafely(Q,ee);for(let le=0,je=ce.length;le<je;le++)l.push(ce[le])}}if(O!==null||re!==null){let ee=null;O===null?ee=re:re===null?ee=O:ee=bl.comparePoints(O,re)<=0?O:re,this.queue.remove(n.rightSE),l.push(n.rightSE);const ce=n.split(ee);for(let le=0,je=ce.length;le<je;le++)l.push(ce[le])}l.length>0?(this.tree.remove(n),l.push(t)):(this.segments.push(n),n.prev=u)}else{if(u&&Q){const O=u.getIntersection(Q);if(O!==null){if(!u.isAnEndpoint(O)){const re=this._splitSafely(u,O);for(let ee=0,ce=re.length;ee<ce;ee++)l.push(re[ee])}if(!Q.isAnEndpoint(O)){const re=this._splitSafely(Q,O);for(let ee=0,ce=re.length;ee<ce;ee++)l.push(re[ee])}}}this.tree.remove(n)}return l}_splitSafely(t,n){this.tree.remove(t);const l=t.rightSE;this.queue.remove(l);const m=t.split(n);return m.push(l),t.consumedBy===void 0&&this.tree.add(t),m}}const lw=typeof process<"u"&&n5.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,zF=typeof process<"u"&&n5.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6;class RF{run(t,n,l){Zl.type=t,nd.reset();const m=[new ow(n,!0)];for(let ee=0,ce=l.length;ee<ce;ee++)m.push(new ow(l[ee],!1));if(Zl.numMultiPolys=m.length,Zl.type==="difference"){const ee=m[0];let ce=1;for(;ce<m.length;)w2(m[ce].bbox,ee.bbox)!==null?ce++:m.splice(ce,1)}if(Zl.type==="intersection")for(let ee=0,ce=m.length;ee<ce;ee++){const le=m[ee];for(let je=ee+1,Je=m.length;je<Je;je++)if(w2(le.bbox,m[je].bbox)===null)return[]}const g=new Iv(bl.compare);for(let ee=0,ce=m.length;ee<ce;ee++){const le=m[ee].getSweepEvents();for(let je=0,Je=le.length;je<Je;je++)if(g.insert(le[je]),g.size>lw)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big).")}const P=new LF(g);let u=g.size,Q=g.pop();for(;Q;){const ee=Q.key;if(g.size===u){const le=ee.segment;throw new Error(`Unable to pop() ${ee.isLeft?"left":"right"} SweepEvent [${ee.point.x}, ${ee.point.y}] from segment #${le.id} [${le.leftSE.point.x}, ${le.leftSE.point.y}] -> [${le.rightSE.point.x}, ${le.rightSE.point.y}] from queue.`)}if(g.size>lw)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big).");if(P.segments.length>zF)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments).");const ce=P.process(ee);for(let le=0,je=ce.length;le<je;le++){const Je=ce[le];Je.consumedBy===void 0&&g.insert(Je)}u=g.size,Q=g.pop()}nd.reset();const O=Zg.factory(P.segments);return new DF(O).getGeom()}}const Zl=new RF,FF=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),l=1;l<t;l++)n[l-1]=arguments[l];return Zl.run("union",e,n)},OF=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),l=1;l<t;l++)n[l-1]=arguments[l];return Zl.run("intersection",e,n)},NF=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),l=1;l<t;l++)n[l-1]=arguments[l];return Zl.run("xor",e,n)},VF=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),l=1;l<t;l++)n[l-1]=arguments[l];return Zl.run("difference",e,n)};var UF={union:FF,intersection:OF,xor:NF,difference:VF};function GF(e,t,n){n===void 0&&(n={});var l=Jx(e),m=Jx(t),g=UF.intersection(l.coordinates,m.coordinates);return g.length===0?null:g.length===1?pF(g[0],n.properties):mF(g,n.properties)}var QF={exports:{}},r1,uw;function qF(){return uw||(uw=1,r1=function(t){return function n(l){return arguments.length===0||l!=null&&l["@@functional/placeholder"]===!0?n:t.apply(this,arguments)}}),r1}var s1,hw;function HF(){if(hw)return s1;hw=1;var e=qF();return s1=e(function(n){return n===null?"Null":n===void 0?"Undefined":Object.prototype.toString.call(n).slice(8,-1)}),s1}var a1,cw;function Mv(){if(cw)return a1;cw=1;function e(t){var n=typeof t;return!!t&&(n=="object"||n=="function")}return a1=e,a1}var o1,fw;function ZF(){if(fw)return o1;fw=1;var e=Mv();function t(n){return e(n)?n:Object(n)}return o1=t,o1}var A1,dw;function jF(){if(dw)return A1;dw=1;var e=ZF();function t(n){return function(l,m,g){for(var P=e(l),u=g(l),Q=u.length,O=n?Q:-1;n?O--:++O<Q;){var re=u[O];if(m(P[re],re,P)===!1)break}return l}}return A1=t,A1}var l1,pw;function WF(){if(pw)return l1;pw=1;var e=jF(),t=e();return l1=t,l1}var u1,gw;function YF(){if(gw)return u1;gw=1;function e(t){return function(n){return n==null?void 0:n[t]}}return u1=e,u1}var h1,mw;function $F(){if(mw)return h1;mw=1;var e=YF(),t=e("length");return h1=t,h1}var c1,_w;function Tv(){if(_w)return c1;_w=1;var e=9007199254740991;function t(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=e}return c1=t,c1}var f1,vw;function XF(){if(vw)return f1;vw=1;var e=$F(),t=Tv();function n(l){return l!=null&&t(e(l))}return f1=n,f1}var d1,yw;function vm(){if(yw)return d1;yw=1;function e(t){return!!t&&typeof t=="object"}return d1=e,d1}var p1,xw;function s5(){if(xw)return p1;xw=1;var e=XF(),t=vm(),n=Object.prototype,l=n.hasOwnProperty,m=n.propertyIsEnumerable;function g(P){return t(P)&&e(P)&&l.call(P,"callee")&&!m.call(P,"callee")}return p1=g,p1}var g1,ww;function KF(){if(ww)return g1;ww=1;var e=Mv(),t="[object Function]",n=Object.prototype,l=n.toString;function m(g){return e(g)&&l.call(g)==t}return g1=m,g1}var m1,bw;function JF(){if(bw)return m1;bw=1;var e=KF(),t=vm(),n=/^\[object .+?Constructor\]$/,l=Object.prototype,m=Function.prototype.toString,g=l.hasOwnProperty,P=RegExp("^"+m.call(g).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function u(Q){return Q==null?!1:e(Q)?P.test(m.call(Q)):t(Q)&&n.test(Q)}return m1=u,m1}var _1,Sw;function eO(){if(Sw)return _1;Sw=1;var e=JF();function t(n,l){var m=n==null?void 0:n[l];return e(m)?m:void 0}return _1=t,_1}var v1,Cw;function tO(){if(Cw)return v1;Cw=1;var e=eO(),t=Tv(),n=vm(),l="[object Array]",m=Object.prototype,g=m.toString,P=e(Array,"isArray"),u=P||function(Q){return n(Q)&&t(Q.length)&&g.call(Q)==l};return v1=u,v1}var y1,kw;function iO(){if(kw)return y1;kw=1;var e=/^\d+$/,t=9007199254740991;function n(l,m){return l=typeof l=="number"||e.test(l)?+l:-1,m=m??t,l>-1&&l%1==0&&l<m}return y1=n,y1}var x1,Ew;function nO(){if(Ew)return x1;Ew=1;var e=s5(),t=tO(),n=iO(),l=Tv(),m=Mv(),g=Object.prototype,P=g.hasOwnProperty;function u(Q){if(Q==null)return[];m(Q)||(Q=Object(Q));var O=Q.length;O=O&&l(O)&&(t(Q)||e(Q))&&O||0;for(var re=Q.constructor,ee=-1,ce=typeof re=="function"&&re.prototype===Q,le=Array(O),je=O>0;++ee<O;)le[ee]=ee+"";for(var Je in Q)!(je&&n(Je,O))&&!(Je=="constructor"&&(ce||!P.call(Q,Je)))&&le.push(Je);return le}return x1=u,x1}var w1,Iw;function rO(){if(Iw)return w1;Iw=1;var e=WF(),t=nO();function n(l,m){return e(l,m,t)}return w1=n,w1}var b1,Mw;function sO(){if(Mw)return b1;Mw=1;var e=rO(),t=s5(),n=vm(),l="[object Object]",m=Object.prototype,g=m.hasOwnProperty,P=m.toString;function u(Q){var O;if(!(n(Q)&&P.call(Q)==l&&!t(Q))||!g.call(Q,"constructor")&&(O=Q.constructor,typeof O=="function"&&!(O instanceof O)))return!1;var re;return e(Q,function(ee,ce){re=ce}),re===void 0||g.call(Q,re)}return b1=u,b1}(function(e){e.exports=function(t){var n={};function l(m){if(n[m])return n[m].exports;var g=n[m]={exports:{},id:m,loaded:!1};return t[m].call(g.exports,g,g.exports,l),g.loaded=!0,g.exports}return l.m=t,l.c=n,l.p="/lib/",l(0)}([function(t,n,l){t.exports=l(1)},function(t,n,l){Object.defineProperty(n,"__esModule",{value:!0}),n.union=l(2).default,n.any=l(12).default,n.nil=l(14).default,n.mapOf=l(16).default,n.arrayOf=l(18).default,n.record=l(20).default,n.optional=l(23).default,n.validate=l(25).default,n.deferred=l(26).default,n.createValidator=l(4).default,n.isValid=l(28).default},function(t,n,l){Object.defineProperty(n,"__esModule",{value:!0}),n.default=u;var m=l(3),g=P(m);function P(Q){return Q&&Q.__esModule?Q:{default:Q}}function u(){for(var Q=arguments.length,O=Array(Q),re=0;re<Q;re++)O[re]=arguments[re];return new g.default(O)}},function(t,n,l){var m=function(){function re(ee,ce){for(var le=0;le<ce.length;le++){var je=ce[le];je.enumerable=je.enumerable||!1,je.configurable=!0,"value"in je&&(je.writable=!0),Object.defineProperty(ee,je.key,je)}}return function(ee,ce,le){return ce&&re(ee.prototype,ce),le&&re(ee,le),ee}}();Object.defineProperty(n,"__esModule",{value:!0});var g=l(4),P=u(g);l(5),l(6);function u(re){return re&&re.__esModule?re:{default:re}}function Q(re,ee){if(!(re instanceof ee))throw new TypeError("Cannot call a class as a function")}var O=function(){function re(ee){Q(this,re),this.validators=[];var ce=!0,le=!1,je=void 0;try{for(var Je=ee[Symbol.iterator](),Xe;!(ce=(Xe=Je.next()).done);ce=!0){var Ke=Xe.value;this.validators.push((0,P.default)(Ke))}}catch(xt){le=!0,je=xt}finally{try{!ce&&Je.return&&Je.return()}finally{if(le)throw je}}}return m(re,[{key:"isValid",value:function(ce){var le=!0,je=!1,Je=void 0;try{for(var Xe=this.validators[Symbol.iterator](),Ke;!(le=(Ke=Xe.next()).done);le=!0){var xt=Ke.value;if(xt.isValid(ce))return!0}}catch(gt){je=!0,Je=gt}finally{try{!le&&Xe.return&&Xe.return()}finally{if(je)throw Je}}return!1}},{key:"getValidationResult",value:function(ce){if(this.isValid(ce))return{isValid:"true"};var le=this._getValidationDetails(ce);return{isValid:"false",message:`Value doesn't match any of the expected variants.
Value: `+JSON.stringify(ce)+`
Details: 
`+le.message,score:le.score}}},{key:"_getValidationDetails",value:function(ce){var le=[],je=!0,Je=!1,Xe=void 0;try{for(var Ke=this.validators[Symbol.iterator](),xt;!(je=(xt=Ke.next()).done);je=!0){var gt=xt.value;le.push(gt.getValidationResult(ce))}}catch(Ct){Je=!0,Xe=Ct}finally{try{!je&&Ke.return&&Ke.return()}finally{if(Je)throw Xe}}le.sort(function(Ct,Te){return Ct.score<Te.score?1:Ct.score>Te.score?-1:0}),le.length>3&&(le.length=3);var Mt=le.map(function(Ct){return Ct.message}).join(`
`);return{message:Mt,score:le[0].score}}}]),re}();n.default=O},function(t,n,l){Object.defineProperty(n,"__esModule",{value:!0}),n.default=Je,l(5);var m=l(7),g=le(m),P=l(9),u=le(P),Q=l(10),O=le(Q),re=l(3);le(re);var ee=l(11),ce=le(ee);function le(Xe){return Xe&&Xe.__esModule?Xe:{default:Xe}}function je(Xe){return Xe&&typeof Symbol<"u"&&Xe.constructor===Symbol?"symbol":typeof Xe}function Je(Xe){if(Xe==null)throw Error("Null cannot be a valid validation descriptor");if(Xe===String)return g.default;if(Xe===Number)return u.default;if(Xe===Boolean)return O.default;if((typeof Xe>"u"?"undefined":je(Xe))==="object"&&Xe&&typeof Xe.isValid=="function"&&typeof Xe.getValidationResult=="function")return Xe;if(typeof Xe=="string"||typeof Xe=="number"||typeof Xe=="boolean")return new ce.default(Xe);throw new Error("Can't recognize this descriptor: "+Xe)}},function(t,n,l){l(6)},function(t,n){},function(t,n,l){Object.defineProperty(n,"__esModule",{value:!0});var m=l(8),g=P(m);l(6),l(5);function P(Q){return Q&&Q.__esModule?Q:{default:Q}}var u={isValid:function(O){return typeof O=="string"},getValidationResult:function(O){return u.isValid(O)?{isValid:"true"}:{isValid:"false",message:"String expected, "+(0,g.default)(O)+" given.",score:0}}};n.default=u},function(t,n){t.exports=HF()},function(t,n,l){Object.defineProperty(n,"__esModule",{value:!0});var m=l(8),g=P(m);l(6),l(5);function P(Q){return Q&&Q.__esModule?Q:{default:Q}}var u={isValid:function(O){return typeof O=="number"},getValidationResult:function(O){return u.isValid(O)?{isValid:"true"}:{isValid:"false",message:"Number expected. '"+(0,g.default)(O)+"' given.",score:0}}};n.default=u},function(t,n,l){Object.defineProperty(n,"__esModule",{value:!0});var m=l(8),g=P(m);l(6),l(5);function P(Q){return Q&&Q.__esModule?Q:{default:Q}}var u={isValid:function(O){return typeof O=="boolean"},getValidationResult:function(O){return u.isValid(O)?{isValid:"true"}:{isValid:"false",message:"Boolean expected. "+(0,g.default)(O)+" given.",score:0}}};n.default=u},function(t,n,l){var m=function(){function O(re,ee){for(var ce=0;ce<ee.length;ce++){var le=ee[ce];le.enumerable=le.enumerable||!1,le.configurable=!0,"value"in le&&(le.writable=!0),Object.defineProperty(re,le.key,le)}}return function(re,ee,ce){return ee&&O(re.prototype,ee),ce&&O(re,ce),re}}();Object.defineProperty(n,"__esModule",{value:!0});var g=l(4);P(g),l(5),l(6);function P(O){return O&&O.__esModule?O:{default:O}}function u(O,re){if(!(O instanceof re))throw new TypeError("Cannot call a class as a function")}var Q=function(){function O(re){u(this,O),this.expectedValue=re}return m(O,[{key:"isValid",value:function(ee){return ee===this.expectedValue}},{key:"getValidationResult",value:function(ee){return this.isValid(ee)?{isValid:"true"}:{isValid:"false",message:"Expected: "+JSON.stringify(this.expectedValue)+". Given: "+ee,score:0}}}]),O}();n.default=Q},function(t,n,l){Object.defineProperty(n,"__esModule",{value:!0});var m=l(13),g=P(m);function P(u){return u&&u.__esModule?u:{default:u}}n.default=g.default},function(t,n,l){Object.defineProperty(n,"__esModule",{value:!0});var m=l(8);g(m),l(6),l(5);function g(u){return u&&u.__esModule?u:{default:u}}var P={isValid:function(Q){return!0},getValidationResult:function(Q){return{isValid:"true"}}};n.default=P},function(t,n,l){Object.defineProperty(n,"__esModule",{value:!0});var m=l(15),g=P(m);function P(u){return u&&u.__esModule?u:{default:u}}n.default=g.default},function(t,n,l){Object.defineProperty(n,"__esModule",{value:!0});var m=l(8),g=P(m);l(6),l(5);function P(Q){return Q&&Q.__esModule?Q:{default:Q}}var u={isValid:function(O){return O==null},getValidationResult:function(O){return u.isValid(O)?{isValid:"true"}:{isValid:"false",message:"Null expected. "+(0,g.default)(O)+" given.",score:0}}};n.default=u},function(t,n,l){Object.defineProperty(n,"__esModule",{value:!0}),n.default=u;var m=l(17),g=P(m);function P(Q){return Q&&Q.__esModule?Q:{default:Q}}function u(Q){return new g.default(Q)}},function(t,n,l){var m=function(){function le(je,Je){for(var Xe=0;Xe<Je.length;Xe++){var Ke=Je[Xe];Ke.enumerable=Ke.enumerable||!1,Ke.configurable=!0,"value"in Ke&&(Ke.writable=!0),Object.defineProperty(je,Ke.key,Ke)}}return function(je,Je,Xe){return Je&&le(je.prototype,Je),Xe&&le(je,Xe),je}}();Object.defineProperty(n,"__esModule",{value:!0});var g=l(8),P=O(g),u=l(4),Q=O(u);l(6),l(5);function O(le){return le&&le.__esModule?le:{default:le}}function re(le,je){if(!(le instanceof je))throw new TypeError("Cannot call a class as a function")}function ee(le){return le&&typeof Symbol<"u"&&le.constructor===Symbol?"symbol":typeof le}var ce=function(){function le(je){re(this,le),this.validator=(0,Q.default)(je)}return m(le,[{key:"isValid",value:function(Je){if(!((typeof Je>"u"?"undefined":ee(Je))==="object"&&Je))return!1;var Xe=Object.keys(Je),Ke=!0,xt=!1,gt=void 0;try{for(var Mt=Xe[Symbol.iterator](),Ct;!(Ke=(Ct=Mt.next()).done);Ke=!0){var Te=Ct.value,Ai=Je[Te];if(this.validator.isValid(Ai)===!1)return!1}}catch(ii){xt=!0,gt=ii}finally{try{!Ke&&Mt.return&&Mt.return()}finally{if(xt)throw gt}}return!0}},{key:"getValidationResult",value:function(Je){if(!((typeof Je>"u"?"undefined":ee(Je))==="object"&&Je))return{isValid:"false",message:"Object expected. "+(0,P.default)(Je)+" given.",score:0};var Xe=Object.keys(Je),Ke=!0,xt=!1,gt=void 0;try{for(var Mt=Xe[Symbol.iterator](),Ct;!(Ke=(Ct=Mt.next()).done);Ke=!0){var Te=Ct.value,Ai=Je[Te],ii=this.validator.getValidationResult(Ai);if(ii.isValid==="false")return{isValid:"false",message:"Validation failed for key '"+Te+"': "+ii.message,score:1}}}catch(xi){xt=!0,gt=xi}finally{try{!Ke&&Mt.return&&Mt.return()}finally{if(xt)throw gt}}return{isValid:"true"}}}]),le}();n.default=ce},function(t,n,l){Object.defineProperty(n,"__esModule",{value:!0}),n.default=u;var m=l(19),g=P(m);function P(Q){return Q&&Q.__esModule?Q:{default:Q}}function u(Q){return new g.default(Q)}},function(t,n,l){var m=function(){function ce(le,je){for(var Je=0;Je<je.length;Je++){var Xe=je[Je];Xe.enumerable=Xe.enumerable||!1,Xe.configurable=!0,"value"in Xe&&(Xe.writable=!0),Object.defineProperty(le,Xe.key,Xe)}}return function(le,je,Je){return je&&ce(le.prototype,je),Je&&ce(le,Je),le}}();Object.defineProperty(n,"__esModule",{value:!0});var g=l(8),P=O(g),u=l(4),Q=O(u);l(6),l(5);function O(ce){return ce&&ce.__esModule?ce:{default:ce}}function re(ce,le){if(!(ce instanceof le))throw new TypeError("Cannot call a class as a function")}var ee=function(){function ce(le){re(this,ce),this.validator=(0,Q.default)(le)}return m(ce,[{key:"isValid",value:function(je){if(!Array.isArray(je))return!1;var Je=!0,Xe=!1,Ke=void 0;try{for(var xt=je[Symbol.iterator](),gt;!(Je=(gt=xt.next()).done);Je=!0){var Mt=gt.value;if(this.validator.isValid(Mt)===!1)return!1}}catch(Ct){Xe=!0,Ke=Ct}finally{try{!Je&&xt.return&&xt.return()}finally{if(Xe)throw Ke}}return!0}},{key:"getValidationResult",value:function(je){if(!Array.isArray(je))return{isValid:"false",message:"Array expected. "+(0,P.default)(je)+" given.",score:0};for(var Je=0;Je<je.length;Je++){var Xe=je[Je],Ke=this.validator.getValidationResult(Xe);if(Ke.isValid==="false")return{isValid:"false",message:"Validation failed on item #"+Je+": "+Ke.message,score:1}}return{isValid:"true"}}}]),ce}();n.default=ee},function(t,n,l){Object.defineProperty(n,"__esModule",{value:!0}),n.default=u;var m=l(21),g=P(m);function P(Q){return Q&&Q.__esModule?Q:{default:Q}}function u(Q){return new g.default(Q)}},function(t,n,l){var m=function(){function Je(Xe,Ke){for(var xt=0;xt<Ke.length;xt++){var gt=Ke[xt];gt.enumerable=gt.enumerable||!1,gt.configurable=!0,"value"in gt&&(gt.writable=!0),Object.defineProperty(Xe,gt.key,gt)}}return function(Xe,Ke,xt){return Ke&&Je(Xe.prototype,Ke),xt&&Je(Xe,xt),Xe}}();Object.defineProperty(n,"__esModule",{value:!0});var g=l(8),P=ee(g),u=l(22),Q=ee(u),O=l(4),re=ee(O);l(5),l(6);function ee(Je){return Je&&Je.__esModule?Je:{default:Je}}function ce(Je,Xe){if(!(Je instanceof Xe))throw new TypeError("Cannot call a class as a function")}function le(Je){return Je&&typeof Symbol<"u"&&Je.constructor===Symbol?"symbol":typeof Je}var je=function(){function Je(Xe){if(ce(this,Je),!((typeof Xe>"u"?"undefined":le(Xe))==="object"&&Xe&&(0,Q.default)(Xe)))throw Error("A record must be defined by an object.");this.shape={};var Ke=!0,xt=!1,gt=void 0;try{for(var Mt=Object.getOwnPropertyNames(Xe)[Symbol.iterator](),Ct;!(Ke=(Ct=Mt.next()).done);Ke=!0){var Te=Ct.value;try{this.shape[Te]=(0,re.default)(Xe[Te])}catch(xi){var Ai=Te,ii=xi.stack;throw xi.originalStack?(ii=xi.originalStack,Ai+="."+xi.propertyName,xi.propertyName=Ai):xi.originalStack=xi.stack,xi.stack="Error defining prop '"+Ai+"': "+xi.originalStack,xi}}}catch(xi){xt=!0,gt=xi}finally{try{!Ke&&Mt.return&&Mt.return()}finally{if(xt)throw gt}}}return m(Je,[{key:"isValid",value:function(Ke){if(!((typeof Ke>"u"?"undefined":le(Ke))==="object"&&Ke))return!1;var xt=!0,gt=!1,Mt=void 0;try{for(var Ct=Object.keys(this.shape)[Symbol.iterator](),Te;!(xt=(Te=Ct.next()).done);xt=!0){var Ai=Te.value,ii=this.shape[Ai];if(ii.isValid(Ke[Ai])===!1)return!1}}catch(xi){gt=!0,Mt=xi}finally{try{!xt&&Ct.return&&Ct.return()}finally{if(gt)throw Mt}}return!0}},{key:"getValidationResult",value:function(Ke){if(!((typeof Ke>"u"?"undefined":le(Ke))==="object"&&Ke))return{isValid:"false",message:"Object expected, "+(0,P.default)(Ke)+" given.",score:0};var xt=0,gt=!0,Mt=!1,Ct=void 0;try{for(var Te=Object.keys(this.shape)[Symbol.iterator](),Ai;!(gt=(Ai=Te.next()).done);gt=!0){var ii=Ai.value,xi=this.shape[ii],gi=xi.getValidationResult(Ke[ii]);if(gi.isValid==="false")return{isValid:"false",message:"Error validating prop "+ii+`:
 `+gi.message,score:1+xt};xt++}}catch(qt){Mt=!0,Ct=qt}finally{try{!gt&&Te.return&&Te.return()}finally{if(Mt)throw Ct}}return{isValid:"true"}}}]),Je}();n.default=je},function(t,n){t.exports=sO()},function(t,n,l){Object.defineProperty(n,"__esModule",{value:!0}),n.default=u;var m=l(24),g=P(m);function P(Q){return Q&&Q.__esModule?Q:{default:Q}}function u(Q){return new g.default(Q)}},function(t,n,l){var m=function(){function re(ee,ce){for(var le=0;le<ce.length;le++){var je=ce[le];je.enumerable=je.enumerable||!1,je.configurable=!0,"value"in je&&(je.writable=!0),Object.defineProperty(ee,je.key,je)}}return function(ee,ce,le){return ce&&re(ee.prototype,ce),le&&re(ee,le),ee}}();Object.defineProperty(n,"__esModule",{value:!0});var g=l(4),P=u(g);l(6),l(5);function u(re){return re&&re.__esModule?re:{default:re}}function Q(re,ee){if(!(re instanceof ee))throw new TypeError("Cannot call a class as a function")}var O=function(){function re(ee){Q(this,re),this.validator=(0,P.default)(ee)}return m(re,[{key:"isValid",value:function(ce){return ce?this.validator.isValid(ce):!0}},{key:"getValidationResult",value:function(ce){return ce?this.validator.getValidationResult(ce):{isValid:"true"}}}]),re}();n.default=O},function(t,n,l){Object.defineProperty(n,"__esModule",{value:!0}),n.default=u;var m=l(4),g=P(m);function P(Q){return Q&&Q.__esModule?Q:{default:Q}}function u(Q,O){var re=(0,g.default)(Q),ee=re.getValidationResult(O);if(ee.isValid==="false")throw Error(ee.message);return O}},function(t,n,l){Object.defineProperty(n,"__esModule",{value:!0}),n.default=u;var m=l(27),g=P(m);function P(Q){return Q&&Q.__esModule?Q:{default:Q}}function u(Q){return new g.default(Q)}},function(t,n,l){var m=function(){function ee(ce,le){for(var je=0;je<le.length;je++){var Je=le[je];Je.enumerable=Je.enumerable||!1,Je.configurable=!0,"value"in Je&&(Je.writable=!0),Object.defineProperty(ce,Je.key,Je)}}return function(ce,le,je){return le&&ee(ce.prototype,le),je&&ee(ce,je),ce}}();Object.defineProperty(n,"__esModule",{value:!0});var g=l(8),P=Q(g),u=l(4);Q(u),l(6),l(5);function Q(ee){return ee&&ee.__esModule?ee:{default:ee}}function O(ee,ce){if(!(ee instanceof ce))throw new TypeError("Cannot call a class as a function")}var re=function(){function ee(ce){if(O(this,ee),typeof ce!="function")throw Error("Deferred validator only accepts a function. "+(0,P.default)(ce)+" given");this.deferredValidator=ce}return m(ee,[{key:"isValid",value:function(le){return this._getValidator().isValid(le)}},{key:"getValidationResult",value:function(le){return this._getValidator().getValidationResult(le)}},{key:"_getValidator",value:function(){return this.validator||(this.validator=this.deferredValidator()),this.validator}}]),ee}();n.default=re},function(t,n,l){Object.defineProperty(n,"__esModule",{value:!0}),n.default=u;var m=l(4),g=P(m);function P(Q){return Q&&Q.__esModule?Q:{default:Q}}function u(Q,O){var re=(0,g.default)(Q);return re.isValid(O)}}])})(QF);function Tw(e){let t,n,l={lngLat:e[4],class:"hex-marker",$$slots:{default:[aO]},$$scope:{ctx:e}};return t=new WL({props:l}),e[13](t),{c(){vA(t.$$.fragment)},l(m){QA(t.$$.fragment,m)},m(m,g){yA(t,m,g),n=!0},p(m,g){const P={};g[0]&16&&(P.lngLat=m[4]),g[1]&2&&(P.$$scope={dirty:g,ctx:m}),t.$set(P)},i(m){n||(_r(t.$$.fragment,m),n=!0)},o(m){Qr(t.$$.fragment,m),n=!1},d(m){e[13](null),xA(t,m)}}}function aO(e){let t,n,l,m,g,P,u,Q;return{c(){t=fa("svg"),n=fa("defs"),l=fa("style"),m=UA(`.fill {\r
                    fill: #000;\r
                    stroke: solid 1px red;\r
                }\r
                .stroke {\r
                    stroke: #fff;\r
                }\r
            `),g=fa("g"),P=fa("g"),u=fa("path"),Q=fa("path"),this.h()},l(O){t=da(O,"svg",{class:!0,id:!0,"data-name":!0,xmlns:!0,viewBox:!0});var re=Vn(t);n=da(re,"defs",{});var ee=Vn(n);l=da(ee,"style",{});var ce=Vn(l);m=GA(ce,`.fill {\r
                    fill: #000;\r
                    stroke: solid 1px red;\r
                }\r
                .stroke {\r
                    stroke: #fff;\r
                }\r
            `),ce.forEach(Qi),ee.forEach(Qi),g=da(re,"g",{id:!0,"data-name":!0});var le=Vn(g);P=da(le,"g",{});var je=Vn(P);u=da(je,"path",{class:!0,d:!0}),Vn(u).forEach(Qi),Q=da(je,"path",{d:!0}),Vn(Q).forEach(Qi),je.forEach(Qi),le.forEach(Qi),re.forEach(Qi),this.h()},h(){ki(u,"class","fill"),ki(u,"d","m35.23,60.88c-1.81,0-3.43-.93-4.33-2.5L2.68,9.5c-.9-1.57-.9-3.44,0-5,.9-1.57,2.52-2.5,4.33-2.5h56.44c1.81,0,3.43.93,4.33,2.5.9,1.56.9,3.43,0,5l-28.22,48.88c-.9,1.57-2.52,2.5-4.33,2.5Z"),ki(Q,"d","m63.45,4c1.56,0,2.34,1.05,2.6,1.5.26.45.78,1.65,0,3l-28.22,48.88c-.78,1.35-2.08,1.5-2.6,1.5s-1.82-.15-2.6-1.5L4.41,8.5c-.78-1.35-.26-2.55,0-3,.26-.45,1.03-1.5,2.6-1.5h56.44m0-4H7.01C1.62,0-1.75,5.83.95,10.5l28.22,48.88c1.35,2.33,3.7,3.5,6.06,3.5s4.72-1.17,6.06-3.5l28.22-48.88c2.69-4.67-.67-10.5-6.06-10.5h0Z"),ki(g,"id","Layer_1-2"),ki(g,"data-name","Layer 1"),ki(t,"class","marker-svg"),ki(t,"id","Layer_2"),ki(t,"data-name","Layer 2"),ki(t,"xmlns","http://www.w3.org/2000/svg"),ki(t,"viewBox","0 0 70.46 62.88")},m(O,re){qr(O,t,re),un(t,n),un(n,l),un(l,m),un(t,g),un(g,P),un(P,u),un(P,Q)},p:Oo,d(O){O&&Qi(t)}}}function oO(e){var m;let t,n,l=((m=e[0])==null?void 0:m.hex)&&Tw(e);return{c(){l&&l.c(),t=eA()},l(g){l&&l.l(g),t=eA()},m(g,P){l&&l.m(g,P),qr(g,t,P),n=!0},p(g,P){var u;(u=g[0])!=null&&u.hex?l?(l.p(g,P),P[0]&1&&_r(l,1)):(l=Tw(g),l.c(),_r(l,1),l.m(t.parentNode,t)):l&&(gh(),Qr(l,1,1,()=>{l=null}),ph())},i(g){n||(_r(l),n=!0)},o(g){Qr(l),n=!1},d(g){g&&Qi(t),l&&l.d(g)}}}function AO(e){let t,n,l,m;function g(Q){e[14](Q)}function P(Q){e[15](Q)}let u={style:"https://basemaps.cartocdn.com/gl/"+e[6]+"-gl-style/style.json",standardControls:!0,center:e[5],zoom:4,$$slots:{default:[oO]},$$scope:{ctx:e}};return e[1]!==void 0&&(u.map=e[1]),e[2]!==void 0&&(u.loaded=e[2]),t=new qL({props:u}),Sl.push(()=>Hv(t,"map",g)),Sl.push(()=>Hv(t,"loaded",P)),{c(){vA(t.$$.fragment)},l(Q){QA(t.$$.fragment,Q)},m(Q,O){yA(t,Q,O),m=!0},p(Q,O){const re={};O[0]&25|O[1]&2&&(re.$$scope={dirty:O,ctx:Q}),!n&&O[0]&2&&(n=!0,re.map=Q[1],qv(()=>n=!1)),!l&&O[0]&4&&(l=!0,re.loaded=Q[2],qv(()=>l=!1)),t.$set(re)},i(Q){m||(_r(t.$$.fragment,Q),m=!0)},o(Q){Qr(t.$$.fragment,Q),m=!1},d(Q){xA(t,Q)}}}let S1=6;const lO=500;async function uO(e,t,n){fetch(`/phast/${e}`).then(l=>l.json()).then(l=>{n.addSource(e,{type:"geojson",data:l}),n.addLayer({id:t,type:"line",source:e,layout:{},paint:{"line-color":"#000000","line-width":.25,"line-opacity":0}}),console.log("added surface layer")})}function hO(e,t,n){const l=[-119.449444,37.166111];let{metric:m}=t,{colorScheme:g}=t,{selectionData:P}=t,{showCounties:u}=t,{drawnPath:Q}=t,O,re=!1,ee,ce,le,je=[-119.449444,37.166111];async function Je(Ft){if(!Ft||!Ct)return;console.log(Ft),console.log(O.transform),console.log(Ft[0]),console.log(O.transform.pointLocation({x:10,y:10})),console.log(O.transform.pointLocation(Ft[0]));let ui=[];for(let Pi of Ft){let dn=O.transform.pointLocation(Pi);ui.push([dn.lat,dn.lng])}let Lt=fF(ui,S1),Yt=DR.h3SetToMultiPolygonFeature(Lt);console.log(Yt),console.log(Ct);let oi=vF(Ct);console.log(oi);let yi=GF(Yt.geometry,oi.features[0].geometry);console.log(yi);try{O.removeLayer("drawLayer"),O.removeSource("drawnPolygon")}catch(Pi){console.log(Pi)}O.addSource("drawnPolygon",{type:"geojson",data:yi}),O.addLayer({id:"drawLayer",type:"fill",source:"drawnPolygon",layout:{},paint:{"fill-color":"#00ffff","fill-opacity":.75,"fill-color-transition":{duration:500,delay:0}}},ce)}function Xe(Ft){console.log(Ft),O.moveLayer(`hex-${Ft}`,"place_hamlet"),setTimeout(()=>{Ke([`hex-${Ft}`])},lO/4),O.setPaintProperty(`hex-${Ft}`,"fill-opacity",1)}function Ke(Ft=[]){let ui=O.getStyle().layers.filter(Lt=>Lt.source==="hexlayer"&&!Ft.includes(Lt.id));for(let Lt of ui)O.setPaintProperty(Lt.id,"fill-opacity",0)}function xt(Ft){let ui=O.getStyle().layers.filter(Lt=>Lt.source==="hexlayer");for(let Lt of ui){let Yt=Lt.id.split("-")[1],oi=xi(Yt,Ft,!0);console.log("palette:",oi),O.setPaintProperty(Lt.id,"fill-color",oi)}}function gt(Ft){Ft?O.setPaintProperty("counties","line-opacity",1):O.setPaintProperty("counties","line-opacity",0)}let Mt,Ct,Te,Ai,ii=dg(0,5e3,g);function xi(Ft,ui,Lt=!0){if(!(!Te||!Ai))if(console.log("generating for ",Ft),Lt){ii=dg(Ai[Ft],Te[Ft],ui),console.log(ii),ii.length;let Yt=ii.map((oi,yi)=>[oi[0],oi[1]]);return Yt=Yt.flat(),console.log(Yt),["interpolate",["linear"],["get",Ft],...Yt]}else return["step",["get",Ft],"#ccc",0,"#fc4e2a",600,"#00E676",1300,"#2a4e9b"]}let{update:gi}=t;jg(()=>{fetch(`/phast/CA_hexbinned@${S1}_birds_err.json`).then(Ft=>Ft.json()).then(Ft=>Ct=Ft).then(()=>{var Yt,oi;Te=(Yt=Ct.properties)==null?void 0:Yt.maxes,Ai=(oi=Ct.properties)==null?void 0:oi.mins;let ui=O.getStyle().layers[71].id;console.log(O),n(1,O.doubleClickZoom._clickZoom._enabled=!1,O),n(1,O.doubleClickZoom._tapZoom._enabled=!1,O),O.addSource("hexlayer",{type:"geojson",data:Ct});for(let yi of cg){let Pi=`hex-${yi}`;O.addLayer({id:Pi,type:"fill",source:"hexlayer",layout:{},paint:{"fill-color":xi(yi,g,!0),"fill-opacity":.75,"fill-color-transition":{duration:500,delay:0}}},ui),console.log("added layer for ",yi)}uO("California_County_Boundaries.geojson","counties",O);let Lt=`hex-${cg[0]}`;O.on("click",Lt,yi=>{console.log(yi);let Pi=cF(yi.lngLat.lat,yi.lngLat.lng,S1);if(di(Pi,O),Pi===(P==null?void 0:P.hex)){gi(null);return}console.log(O.getStyle().layers);let dn=Kx(Pi);n(4,je={lng:dn[1],lat:dn[0]}),console.log(Pi),gi({latlng:yi.lngLat,hex:Pi,properties:yi.features[0].properties})}),O.on("mouseenter",Lt,()=>{O.getCanvas().style.cursor="pointer"}),O.on("mouseleave",Lt,()=>{O.getCanvas().style.cursor=""}),O.on("dragstart",Lt,()=>{O.getCanvas().style.cursor="grabbing"}),O.on("dragend",Lt,()=>{O.getCanvas().style.cursor="pointer"}),qt(),setTimeout(()=>{console.log("no load on timeout"),n(1,O._canvas.style.filter="none",O),re||qt()},3e3)})});function qt(){let Ft=Mz(Ct);O.fitBounds(Ft,{padding:{top:50,left:10,bottom:50,right:50}})}function di(Ft,ui){let Lt=Kx(Ft);console.log(Lt),Mt=2*window.innerWidth/5,ui.flyTo({center:[Lt[1],Lt[0]],essential:!0,padding:{right:Mt},duration:750})}let mi="positron";function vt(Ft){Sl[Ft?"unshift":"push"](()=>{le=Ft,n(3,le)})}function Ut(Ft){O=Ft,n(1,O)}function rt(Ft){re=Ft,n(2,re)}return e.$$set=Ft=>{"metric"in Ft&&n(7,m=Ft.metric),"colorScheme"in Ft&&n(8,g=Ft.colorScheme),"selectionData"in Ft&&n(0,P=Ft.selectionData),"showCounties"in Ft&&n(9,u=Ft.showCounties),"drawnPath"in Ft&&n(10,Q=Ft.drawnPath),"update"in Ft&&n(11,gi=Ft.update)},e.$$.update=()=>{e.$$.dirty[0]&4102&&O&&re&&(n(12,ee=O.getStyle().layers.filter(Ft=>Ft["source-layer"]==="place")),console.log(ee)),e.$$.dirty[0]&134&&O&&re&&Xe(m),e.$$.dirty[0]&262&&O&&re&&xt(g),e.$$.dirty[0]&518&&O&&re&&gt(u),e.$$.dirty[0]&1030&&O&&re&&Je(Q)},[P,O,re,le,je,l,mi,m,g,u,Q,gi,ee,vt,Ut,rt]}let cO=class extends No{constructor(t){super(),Vo(this,t,hO,AO,ho,{metric:7,colorScheme:8,selectionData:0,showCounties:9,drawnPath:10,update:11},null,[-1,-1])}};function Pw(e){let t,n;return t=new xL({props:{colorScheme:e[2],selectionData:e[0],metric:e[1],updateData:e[6]}}),{c(){vA(t.$$.fragment)},l(l){QA(t.$$.fragment,l)},m(l,m){yA(t,l,m),n=!0},p(l,m){const g={};m&4&&(g.colorScheme=l[2]),m&1&&(g.selectionData=l[0]),m&2&&(g.metric=l[1]),t.$set(g)},i(l){n||(_r(t.$$.fragment,l),n=!0)},o(l){Qr(t.$$.fragment,l),n=!1},d(l){xA(t,l)}}}function Bw(e){let t,n;return t=new Y8({props:{updatePath:e[11],updateIsDrawing:e[10],isDrawing:e[4]}}),{c(){vA(t.$$.fragment)},l(l){QA(t.$$.fragment,l)},m(l,m){yA(t,l,m),n=!0},p(l,m){const g={};m&16&&(g.isDrawing=l[4]),t.$set(g)},i(l){n||(_r(t.$$.fragment,l),n=!0)},o(l){Qr(t.$$.fragment,l),n=!1},d(l){xA(t,l)}}}function fO(e){let t,n,l,m,g,P,u,Q,O,re;t=new cO({props:{update:e[6],metric:e[1],colorScheme:e[2],selectionData:e[0],showCounties:e[3],drawnPath:e[5]}});let ee=e[0]&&Pw(e);g=new G8({props:{updateMetricLayer:e[7],updateColorScheme:e[8],updateShowCounties:e[9],updateDrawing:e[10],drawing:e[4],updateDrawnPath:e[11]}}),u=new K8({props:{colorScheme:e[2],metric:e[1]}});let ce=e[4]&&Bw(e);return{c(){vA(t.$$.fragment),n=ea(),ee&&ee.c(),l=ea(),m=Sr("div"),vA(g.$$.fragment),P=ea(),vA(u.$$.fragment),Q=ea(),ce&&ce.c(),O=eA(),this.h()},l(le){QA(t.$$.fragment,le),n=ta(le),ee&&ee.l(le),l=ta(le),m=Cr(le,"DIV",{class:!0});var je=Vn(m);QA(g.$$.fragment,je),P=ta(je),QA(u.$$.fragment,je),je.forEach(Qi),Q=ta(le),ce&&ce.l(le),O=eA(),this.h()},h(){ki(m,"class","control-container svelte-c2izy0")},m(le,je){yA(t,le,je),qr(le,n,je),ee&&ee.m(le,je),qr(le,l,je),qr(le,m,je),yA(g,m,null),un(m,P),yA(u,m,null),qr(le,Q,je),ce&&ce.m(le,je),qr(le,O,je),re=!0},p(le,[je]){const Je={};je&2&&(Je.metric=le[1]),je&4&&(Je.colorScheme=le[2]),je&1&&(Je.selectionData=le[0]),je&8&&(Je.showCounties=le[3]),je&32&&(Je.drawnPath=le[5]),t.$set(Je),le[0]?ee?(ee.p(le,je),je&1&&_r(ee,1)):(ee=Pw(le),ee.c(),_r(ee,1),ee.m(l.parentNode,l)):ee&&(gh(),Qr(ee,1,1,()=>{ee=null}),ph());const Xe={};je&16&&(Xe.drawing=le[4]),g.$set(Xe);const Ke={};je&4&&(Ke.colorScheme=le[2]),je&2&&(Ke.metric=le[1]),u.$set(Ke),le[4]?ce?(ce.p(le,je),je&16&&_r(ce,1)):(ce=Bw(le),ce.c(),_r(ce,1),ce.m(O.parentNode,O)):ce&&(gh(),Qr(ce,1,1,()=>{ce=null}),ph())},i(le){re||(_r(t.$$.fragment,le),_r(ee),_r(g.$$.fragment,le),_r(u.$$.fragment,le),_r(ce),re=!0)},o(le){Qr(t.$$.fragment,le),Qr(ee),Qr(g.$$.fragment,le),Qr(u.$$.fragment,le),Qr(ce),re=!1},d(le){le&&(Qi(n),Qi(l),Qi(m),Qi(Q),Qi(O)),xA(t,le),ee&&ee.d(le),xA(g),xA(u),ce&&ce.d(le)}}}function dO(e,t,n){let l=null;function m(Je){console.log("updating!!"),n(0,l=Je)}let g="pd";function P(Je){n(1,g=Je)}let u="*ibm_flip";function Q(Je){n(2,u=Je)}let O=!1;function re(Je){n(3,O=Je)}let ee=!1;function ce(Je){n(4,ee=Je)}let le=null;function je(Je){n(5,le=Je)}return[l,g,u,O,ee,le,m,P,Q,re,ce,je]}class yO extends No{constructor(t){super(),Vo(this,t,dO,fO,ho,{})}}export{yO as component};
