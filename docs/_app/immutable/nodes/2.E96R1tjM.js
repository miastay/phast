var K6=Object.defineProperty;var J6=(e,t,i)=>t in e?K6(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i;var Zn=(e,t,i)=>(J6(e,typeof t!="symbol"?t+"":t,i),i);import{O as Bo,s as vs,c as Ya,P as Gn,b as fr,e as En,j as dr,d as In,f as en,i as li,Q as ca,k as vn,R as Os,S as Ms,D as Jo,u as Xa,g as Ka,a as Ja,A as Jl,T as Fs,U as sl,V as Za,r as Dl,W as lc,X as OA,x as ts,Y as Nc,y as ac,p as Rr,n as _a,Z as as,_ as os,$ as zy,a0 as pm,v as vi,l as Ri,t as ja,h as Wa,m as Fu,a1 as $6,a2 as eS,o as Wl,a3 as sf,a4 as Fy,a5 as Zl,F as Ny,a6 as Fg,a7 as ph,a8 as o3,a9 as Vy,aa as Vc,ab as Uy,ac as A3,w as Gy}from"../chunks/scheduler.NdhxjCnO.js";import{S as Ds,i as Ls,t as Pi,a as Hi,f as Uc,b as xr,d as Yr,m as wr,e as Sr,g as ia,c as na}from"../chunks/index.jiiVvhp5.js";import{w as Bu,r as k_}from"../chunks/index.5Thx1g-o.js";const tS=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function nl(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function fs(e,t){const i={},r={},c={$$scope:1};let h=e.length;for(;h--;){const v=e[h],o=t[h];if(o){for(const k in v)k in o||(r[k]=1);for(const k in o)c[k]||(i[k]=o[k],c[k]=1);e[h]=o}else for(const k in v)c[k]=1}for(const v in r)v in i||(i[v]=void 0);return i}function Vr(e){return typeof e=="object"&&e!==null?e:{}}var M2=function(e,t){return M2=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var c in r)Object.prototype.hasOwnProperty.call(r,c)&&(i[c]=r[c])},M2(e,t)};function qc(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");M2(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}var fo=function(){return fo=Object.assign||function(t){for(var i,r=1,c=arguments.length;r<c;r++){i=arguments[r];for(var h in i)Object.prototype.hasOwnProperty.call(i,h)&&(t[h]=i[h])}return t},fo.apply(this,arguments)};function Fd(e){var t=typeof Symbol=="function"&&Symbol.iterator,i=t&&e[t],r=0;if(i)return i.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Hy(e,t){var i=typeof Symbol=="function"&&e[Symbol.iterator];if(!i)return e;var r=i.call(e),c,h=[],v;try{for(;(t===void 0||t-- >0)&&!(c=r.next()).done;)h.push(c.value)}catch(o){v={error:o}}finally{try{c&&!c.done&&(i=r.return)&&i.call(r)}finally{if(v)throw v.error}}return h}function iS(e,t,i){if(i||arguments.length===2)for(var r=0,c=t.length,h;r<c;r++)(h||!(r in t))&&(h||(h=Array.prototype.slice.call(t,0,r)),h[r]=t[r]);return e.concat(h||Array.prototype.slice.call(t))}/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Zc=function(){function e(t){t===void 0&&(t={}),this.adapter=t}return Object.defineProperty(e,"cssClasses",{get:function(){return{}},enumerable:!1,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return{}},enumerable:!1,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return{}},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{}},enumerable:!1,configurable:!0}),e.prototype.init=function(){},e.prototype.destroy=function(){},e}();/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */function nS(e,t){if(e.closest)return e.closest(t);for(var i=e;i;){if(l3(i,t))return i;i=i.parentElement}return null}function l3(e,t){var i=e.matches||e.webkitMatchesSelector||e.msMatchesSelector;return i.call(e,t)}function rS(e){var t=e;if(t.offsetParent!==null)return t.scrollWidth;var i=t.cloneNode(!0);i.style.setProperty("position","absolute"),i.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(i);var r=i.scrollWidth;return document.documentElement.removeChild(i),r}const Tv=Object.freeze(Object.defineProperty({__proto__:null,closest:nS,estimateScrollWidth:rS,matches:l3},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var sS={LABEL_FLOAT_ABOVE:"mdc-floating-label--float-above",LABEL_REQUIRED:"mdc-floating-label--required",LABEL_SHAKE:"mdc-floating-label--shake",ROOT:"mdc-floating-label"};/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var aS=function(e){qc(t,e);function t(i){var r=e.call(this,fo(fo({},t.defaultAdapter),i))||this;return r.shakeAnimationEndHandler=function(){r.handleShakeAnimationEnd()},r}return Object.defineProperty(t,"cssClasses",{get:function(){return sS},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},getWidth:function(){return 0},registerInteractionHandler:function(){},deregisterInteractionHandler:function(){}}},enumerable:!1,configurable:!0}),t.prototype.init=function(){this.adapter.registerInteractionHandler("animationend",this.shakeAnimationEndHandler)},t.prototype.destroy=function(){this.adapter.deregisterInteractionHandler("animationend",this.shakeAnimationEndHandler)},t.prototype.getWidth=function(){return this.adapter.getWidth()},t.prototype.shake=function(i){var r=t.cssClasses.LABEL_SHAKE;i?this.adapter.addClass(r):this.adapter.removeClass(r)},t.prototype.float=function(i){var r=t.cssClasses,c=r.LABEL_FLOAT_ABOVE,h=r.LABEL_SHAKE;i?this.adapter.addClass(c):(this.adapter.removeClass(c),this.adapter.removeClass(h))},t.prototype.setRequired=function(i){var r=t.cssClasses.LABEL_REQUIRED;i?this.adapter.addClass(r):this.adapter.removeClass(r)},t.prototype.handleShakeAnimationEnd=function(){var i=t.cssClasses.LABEL_SHAKE;this.adapter.removeClass(i)},t}(Zc);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Qh={LINE_RIPPLE_ACTIVE:"mdc-line-ripple--active",LINE_RIPPLE_DEACTIVATING:"mdc-line-ripple--deactivating"};/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var oS=function(e){qc(t,e);function t(i){var r=e.call(this,fo(fo({},t.defaultAdapter),i))||this;return r.transitionEndHandler=function(c){r.handleTransitionEnd(c)},r}return Object.defineProperty(t,"cssClasses",{get:function(){return Qh},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},setStyle:function(){},registerEventHandler:function(){},deregisterEventHandler:function(){}}},enumerable:!1,configurable:!0}),t.prototype.init=function(){this.adapter.registerEventHandler("transitionend",this.transitionEndHandler)},t.prototype.destroy=function(){this.adapter.deregisterEventHandler("transitionend",this.transitionEndHandler)},t.prototype.activate=function(){this.adapter.removeClass(Qh.LINE_RIPPLE_DEACTIVATING),this.adapter.addClass(Qh.LINE_RIPPLE_ACTIVE)},t.prototype.setRippleCenter=function(i){this.adapter.setStyle("transform-origin",i+"px center")},t.prototype.deactivate=function(){this.adapter.addClass(Qh.LINE_RIPPLE_DEACTIVATING)},t.prototype.handleTransitionEnd=function(i){var r=this.adapter.hasClass(Qh.LINE_RIPPLE_DEACTIVATING);i.propertyName==="opacity"&&r&&(this.adapter.removeClass(Qh.LINE_RIPPLE_ACTIVE),this.adapter.removeClass(Qh.LINE_RIPPLE_DEACTIVATING))},t}(Zc);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var AS={ANCHOR:"mdc-menu-surface--anchor",ANIMATING_CLOSED:"mdc-menu-surface--animating-closed",ANIMATING_OPEN:"mdc-menu-surface--animating-open",FIXED:"mdc-menu-surface--fixed",IS_OPEN_BELOW:"mdc-menu-surface--is-open-below",OPEN:"mdc-menu-surface--open",ROOT:"mdc-menu-surface"},lS={CLOSED_EVENT:"MDCMenuSurface:closed",CLOSING_EVENT:"MDCMenuSurface:closing",OPENED_EVENT:"MDCMenuSurface:opened",OPENING_EVENT:"MDCMenuSurface:opening",FOCUSABLE_ELEMENTS:["button:not(:disabled)",'[href]:not([aria-disabled="true"])',"input:not(:disabled)","select:not(:disabled)","textarea:not(:disabled)",'[tabindex]:not([tabindex="-1"]):not([aria-disabled="true"])'].join(", ")},Id={TRANSITION_OPEN_DURATION:120,TRANSITION_CLOSE_DURATION:75,MARGIN_TO_EDGE:32,ANCHOR_TO_MENU_SURFACE_WIDTH_RATIO:.67,TOUCH_EVENT_WAIT_MS:30},co;(function(e){e[e.BOTTOM=1]="BOTTOM",e[e.CENTER=2]="CENTER",e[e.RIGHT=4]="RIGHT",e[e.FLIP_RTL=8]="FLIP_RTL"})(co||(co={}));var Jh;(function(e){e[e.TOP_LEFT=0]="TOP_LEFT",e[e.TOP_RIGHT=4]="TOP_RIGHT",e[e.BOTTOM_LEFT=1]="BOTTOM_LEFT",e[e.BOTTOM_RIGHT=5]="BOTTOM_RIGHT",e[e.TOP_START=8]="TOP_START",e[e.TOP_END=12]="TOP_END",e[e.BOTTOM_START=9]="BOTTOM_START",e[e.BOTTOM_END=13]="BOTTOM_END"})(Jh||(Jh={}));/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var uh,kc,As={LIST_ITEM_ACTIVATED_CLASS:"mdc-list-item--activated",LIST_ITEM_CLASS:"mdc-list-item",LIST_ITEM_DISABLED_CLASS:"mdc-list-item--disabled",LIST_ITEM_SELECTED_CLASS:"mdc-list-item--selected",LIST_ITEM_TEXT_CLASS:"mdc-list-item__text",LIST_ITEM_PRIMARY_TEXT_CLASS:"mdc-list-item__primary-text",ROOT:"mdc-list"};uh={},uh[""+As.LIST_ITEM_ACTIVATED_CLASS]="mdc-list-item--activated",uh[""+As.LIST_ITEM_CLASS]="mdc-list-item",uh[""+As.LIST_ITEM_DISABLED_CLASS]="mdc-list-item--disabled",uh[""+As.LIST_ITEM_SELECTED_CLASS]="mdc-list-item--selected",uh[""+As.LIST_ITEM_PRIMARY_TEXT_CLASS]="mdc-list-item__primary-text",uh[""+As.ROOT]="mdc-list";var Wf=(kc={},kc[""+As.LIST_ITEM_ACTIVATED_CLASS]="mdc-deprecated-list-item--activated",kc[""+As.LIST_ITEM_CLASS]="mdc-deprecated-list-item",kc[""+As.LIST_ITEM_DISABLED_CLASS]="mdc-deprecated-list-item--disabled",kc[""+As.LIST_ITEM_SELECTED_CLASS]="mdc-deprecated-list-item--selected",kc[""+As.LIST_ITEM_TEXT_CLASS]="mdc-deprecated-list-item__text",kc[""+As.LIST_ITEM_PRIMARY_TEXT_CLASS]="mdc-deprecated-list-item__primary-text",kc[""+As.ROOT]="mdc-deprecated-list",kc),ch={ACTION_EVENT:"MDCList:action",SELECTION_CHANGE_EVENT:"MDCList:selectionChange",ARIA_CHECKED:"aria-checked",ARIA_CHECKED_CHECKBOX_SELECTOR:'[role="checkbox"][aria-checked="true"]',ARIA_CHECKED_RADIO_SELECTOR:'[role="radio"][aria-checked="true"]',ARIA_CURRENT:"aria-current",ARIA_DISABLED:"aria-disabled",ARIA_ORIENTATION:"aria-orientation",ARIA_ORIENTATION_HORIZONTAL:"horizontal",ARIA_ROLE_CHECKBOX_SELECTOR:'[role="checkbox"]',ARIA_SELECTED:"aria-selected",ARIA_INTERACTIVE_ROLES_SELECTOR:'[role="listbox"], [role="menu"]',ARIA_MULTI_SELECTABLE_SELECTOR:'[aria-multiselectable="true"]',CHECKBOX_RADIO_SELECTOR:'input[type="checkbox"], input[type="radio"]',CHECKBOX_SELECTOR:'input[type="checkbox"]',CHILD_ELEMENTS_TO_TOGGLE_TABINDEX:`
    .`+As.LIST_ITEM_CLASS+` button:not(:disabled),
    .`+As.LIST_ITEM_CLASS+` a,
    .`+Wf[As.LIST_ITEM_CLASS]+` button:not(:disabled),
    .`+Wf[As.LIST_ITEM_CLASS]+` a
  `,DEPRECATED_SELECTOR:".mdc-deprecated-list",FOCUSABLE_CHILD_ELEMENTS:`
    .`+As.LIST_ITEM_CLASS+` button:not(:disabled),
    .`+As.LIST_ITEM_CLASS+` a,
    .`+As.LIST_ITEM_CLASS+` input[type="radio"]:not(:disabled),
    .`+As.LIST_ITEM_CLASS+` input[type="checkbox"]:not(:disabled),
    .`+Wf[As.LIST_ITEM_CLASS]+` button:not(:disabled),
    .`+Wf[As.LIST_ITEM_CLASS]+` a,
    .`+Wf[As.LIST_ITEM_CLASS]+` input[type="radio"]:not(:disabled),
    .`+Wf[As.LIST_ITEM_CLASS]+` input[type="checkbox"]:not(:disabled)
  `,RADIO_SELECTOR:'input[type="radio"]',SELECTED_ITEM_SELECTOR:'[aria-selected="true"], [aria-current="true"]'},uo={UNSET_INDEX:-1,TYPEAHEAD_BUFFER_CLEAR_TIMEOUT_MS:300};/**
 * @license
 * Copyright 2020 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Ur={UNKNOWN:"Unknown",BACKSPACE:"Backspace",ENTER:"Enter",SPACEBAR:"Spacebar",PAGE_UP:"PageUp",PAGE_DOWN:"PageDown",END:"End",HOME:"Home",ARROW_LEFT:"ArrowLeft",ARROW_UP:"ArrowUp",ARROW_RIGHT:"ArrowRight",ARROW_DOWN:"ArrowDown",DELETE:"Delete",ESCAPE:"Escape",TAB:"Tab"},al=new Set;al.add(Ur.BACKSPACE);al.add(Ur.ENTER);al.add(Ur.SPACEBAR);al.add(Ur.PAGE_UP);al.add(Ur.PAGE_DOWN);al.add(Ur.END);al.add(Ur.HOME);al.add(Ur.ARROW_LEFT);al.add(Ur.ARROW_UP);al.add(Ur.ARROW_RIGHT);al.add(Ur.ARROW_DOWN);al.add(Ur.DELETE);al.add(Ur.ESCAPE);al.add(Ur.TAB);var Ll={BACKSPACE:8,ENTER:13,SPACEBAR:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,ARROW_LEFT:37,ARROW_UP:38,ARROW_RIGHT:39,ARROW_DOWN:40,DELETE:46,ESCAPE:27,TAB:9},ol=new Map;ol.set(Ll.BACKSPACE,Ur.BACKSPACE);ol.set(Ll.ENTER,Ur.ENTER);ol.set(Ll.SPACEBAR,Ur.SPACEBAR);ol.set(Ll.PAGE_UP,Ur.PAGE_UP);ol.set(Ll.PAGE_DOWN,Ur.PAGE_DOWN);ol.set(Ll.END,Ur.END);ol.set(Ll.HOME,Ur.HOME);ol.set(Ll.ARROW_LEFT,Ur.ARROW_LEFT);ol.set(Ll.ARROW_UP,Ur.ARROW_UP);ol.set(Ll.ARROW_RIGHT,Ur.ARROW_RIGHT);ol.set(Ll.ARROW_DOWN,Ur.ARROW_DOWN);ol.set(Ll.DELETE,Ur.DELETE);ol.set(Ll.ESCAPE,Ur.ESCAPE);ol.set(Ll.TAB,Ur.TAB);var mh=new Set;mh.add(Ur.PAGE_UP);mh.add(Ur.PAGE_DOWN);mh.add(Ur.END);mh.add(Ur.HOME);mh.add(Ur.ARROW_LEFT);mh.add(Ur.ARROW_UP);mh.add(Ur.ARROW_RIGHT);mh.add(Ur.ARROW_DOWN);function Lo(e){var t=e.key;if(al.has(t))return t;var i=ol.get(e.keyCode);return i||Ur.UNKNOWN}/**
 * @license
 * Copyright 2020 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var uS=["input","button","textarea","select"],fu=function(e){var t=e.target;if(t){var i=(""+t.tagName).toLowerCase();uS.indexOf(i)===-1&&e.preventDefault()}};/**
 * @license
 * Copyright 2020 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */function cS(){var e={bufferClearTimeout:0,currentFirstChar:"",sortedIndexCursor:0,typeaheadBuffer:""};return e}function hS(e,t){for(var i=new Map,r=0;r<e;r++){var c=t(r).trim();if(c){var h=c[0].toLowerCase();i.has(h)||i.set(h,[]),i.get(h).push({text:c.toLowerCase(),index:r})}}return i.forEach(function(v){v.sort(function(o,k){return o.index-k.index})}),i}function P2(e,t){var i=e.nextChar,r=e.focusItemAtIndex,c=e.sortedIndexByFirstChar,h=e.focusedItemIndex,v=e.skipFocus,o=e.isItemAtIndexDisabled;clearTimeout(t.bufferClearTimeout),t.bufferClearTimeout=setTimeout(function(){c3(t)},uo.TYPEAHEAD_BUFFER_CLEAR_TIMEOUT_MS),t.typeaheadBuffer=t.typeaheadBuffer+i;var k;return t.typeaheadBuffer.length===1?k=fS(c,h,o,t):k=dS(c,o,t),k!==-1&&!v&&r(k),k}function fS(e,t,i,r){var c=r.typeaheadBuffer[0],h=e.get(c);if(!h)return-1;if(c===r.currentFirstChar&&h[r.sortedIndexCursor].index===t){r.sortedIndexCursor=(r.sortedIndexCursor+1)%h.length;var v=h[r.sortedIndexCursor].index;if(!i(v))return v}r.currentFirstChar=c;var o=-1,k;for(k=0;k<h.length;k++)if(!i(h[k].index)){o=k;break}for(;k<h.length;k++)if(h[k].index>t&&!i(h[k].index)){o=k;break}return o!==-1?(r.sortedIndexCursor=o,h[r.sortedIndexCursor].index):-1}function dS(e,t,i){var r=i.typeaheadBuffer[0],c=e.get(r);if(!c)return-1;var h=c[i.sortedIndexCursor];if(h.text.lastIndexOf(i.typeaheadBuffer,0)===0&&!t(h.index))return h.index;for(var v=(i.sortedIndexCursor+1)%c.length,o=-1;v!==i.sortedIndexCursor;){var k=c[v],O=k.text.lastIndexOf(i.typeaheadBuffer,0)===0,j=!t(k.index);if(O&&j){o=v;break}v=(v+1)%c.length}return o!==-1?(i.sortedIndexCursor=o,c[i.sortedIndexCursor].index):-1}function u3(e){return e.typeaheadBuffer.length>0}function c3(e){e.typeaheadBuffer=""}function Qy(e,t){var i=e.event,r=e.isTargetListItem,c=e.focusedItemIndex,h=e.focusItemAtIndex,v=e.sortedIndexByFirstChar,o=e.isItemAtIndexDisabled,k=Lo(i)==="ArrowLeft",O=Lo(i)==="ArrowUp",j=Lo(i)==="ArrowRight",J=Lo(i)==="ArrowDown",oe=Lo(i)==="Home",se=Lo(i)==="End",be=Lo(i)==="Enter",qe=Lo(i)==="Spacebar";if(i.altKey||i.ctrlKey||i.metaKey||k||O||j||J||oe||se||be)return-1;var ke=!qe&&i.key.length===1;if(ke){fu(i);var Qe={focusItemAtIndex:h,focusedItemIndex:c,nextChar:i.key.toLowerCase(),sortedIndexByFirstChar:v,skipFocus:!1,isItemAtIndexDisabled:o};return P2(Qe,t)}if(!qe)return-1;r&&fu(i);var We=r&&u3(t);if(We){var Qe={focusItemAtIndex:h,focusedItemIndex:c,nextChar:" ",sortedIndexByFirstChar:v,skipFocus:!1,isItemAtIndexDisabled:o};return P2(Qe,t)}return-1}/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */function pS(e){return e instanceof Array}var gS=["Alt","Control","Meta","Shift"];function qy(e){var t=new Set(e?gS.filter(function(i){return e.getModifierState(i)}):[]);return function(i){return i.every(function(r){return t.has(r)})&&i.length===t.size}}var mS=function(e){qc(t,e);function t(i){var r=e.call(this,fo(fo({},t.defaultAdapter),i))||this;return r.wrapFocus=!1,r.isVertical=!0,r.isSingleSelectionList=!1,r.areDisabledItemsFocusable=!0,r.selectedIndex=uo.UNSET_INDEX,r.focusedItemIndex=uo.UNSET_INDEX,r.useActivatedClass=!1,r.useSelectedAttr=!1,r.ariaCurrentAttrValue=null,r.isCheckboxList=!1,r.isRadioList=!1,r.lastSelectedIndex=null,r.hasTypeahead=!1,r.typeaheadState=cS(),r.sortedIndexByFirstChar=new Map,r}return Object.defineProperty(t,"strings",{get:function(){return ch},enumerable:!1,configurable:!0}),Object.defineProperty(t,"cssClasses",{get:function(){return As},enumerable:!1,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return uo},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClassForElementIndex:function(){},focusItemAtIndex:function(){},getAttributeForElementIndex:function(){return null},getFocusedElementIndex:function(){return 0},getListItemCount:function(){return 0},hasCheckboxAtIndex:function(){return!1},hasRadioAtIndex:function(){return!1},isCheckboxCheckedAtIndex:function(){return!1},isFocusInsideList:function(){return!1},isRootFocused:function(){return!1},listItemAtIndexHasClass:function(){return!1},notifyAction:function(){},notifySelectionChange:function(){},removeClassForElementIndex:function(){},setAttributeForElementIndex:function(){},setCheckedCheckboxOrRadioAtIndex:function(){},setTabIndexForListItemChildren:function(){},getPrimaryTextAtIndex:function(){return""}}},enumerable:!1,configurable:!0}),t.prototype.layout=function(){this.adapter.getListItemCount()!==0&&(this.adapter.hasCheckboxAtIndex(0)?this.isCheckboxList=!0:this.adapter.hasRadioAtIndex(0)?this.isRadioList=!0:this.maybeInitializeSingleSelection(),this.hasTypeahead&&(this.sortedIndexByFirstChar=this.typeaheadInitSortedIndex()))},t.prototype.getFocusedItemIndex=function(){return this.focusedItemIndex},t.prototype.setWrapFocus=function(i){this.wrapFocus=i},t.prototype.setVerticalOrientation=function(i){this.isVertical=i},t.prototype.setSingleSelection=function(i){this.isSingleSelectionList=i,i&&(this.maybeInitializeSingleSelection(),this.selectedIndex=this.getSelectedIndexFromDOM())},t.prototype.setDisabledItemsFocusable=function(i){this.areDisabledItemsFocusable=i},t.prototype.maybeInitializeSingleSelection=function(){var i=this.getSelectedIndexFromDOM();if(i!==uo.UNSET_INDEX){var r=this.adapter.listItemAtIndexHasClass(i,As.LIST_ITEM_ACTIVATED_CLASS);r&&this.setUseActivatedClass(!0),this.isSingleSelectionList=!0,this.selectedIndex=i}},t.prototype.getSelectedIndexFromDOM=function(){for(var i=uo.UNSET_INDEX,r=this.adapter.getListItemCount(),c=0;c<r;c++){var h=this.adapter.listItemAtIndexHasClass(c,As.LIST_ITEM_SELECTED_CLASS),v=this.adapter.listItemAtIndexHasClass(c,As.LIST_ITEM_ACTIVATED_CLASS);if(h||v){i=c;break}}return i},t.prototype.setHasTypeahead=function(i){this.hasTypeahead=i,i&&(this.sortedIndexByFirstChar=this.typeaheadInitSortedIndex())},t.prototype.isTypeaheadInProgress=function(){return this.hasTypeahead&&u3(this.typeaheadState)},t.prototype.setUseActivatedClass=function(i){this.useActivatedClass=i},t.prototype.setUseSelectedAttribute=function(i){this.useSelectedAttr=i},t.prototype.getSelectedIndex=function(){return this.selectedIndex},t.prototype.setSelectedIndex=function(i,r){r===void 0&&(r={}),this.isIndexValid(i)&&(this.isCheckboxList?this.setCheckboxAtIndex(i,r):this.isRadioList?this.setRadioAtIndex(i,r):this.setSingleSelectionAtIndex(i,r))},t.prototype.handleFocusIn=function(i){i>=0&&(this.focusedItemIndex=i,this.adapter.setAttributeForElementIndex(i,"tabindex","0"),this.adapter.setTabIndexForListItemChildren(i,"0"))},t.prototype.handleFocusOut=function(i){var r=this;i>=0&&(this.adapter.setAttributeForElementIndex(i,"tabindex","-1"),this.adapter.setTabIndexForListItemChildren(i,"-1")),setTimeout(function(){r.adapter.isFocusInsideList()||r.setTabindexToFirstSelectedOrFocusedItem()},0)},t.prototype.isIndexDisabled=function(i){return this.adapter.listItemAtIndexHasClass(i,As.LIST_ITEM_DISABLED_CLASS)},t.prototype.handleKeydown=function(i,r,c){var h=this,v,o=Lo(i)==="ArrowLeft",k=Lo(i)==="ArrowUp",O=Lo(i)==="ArrowRight",j=Lo(i)==="ArrowDown",J=Lo(i)==="Home",oe=Lo(i)==="End",se=Lo(i)==="Enter",be=Lo(i)==="Spacebar",qe=this.isVertical&&j||!this.isVertical&&O,ke=this.isVertical&&k||!this.isVertical&&o,Qe=i.key==="A"||i.key==="a",We=qy(i);if(this.adapter.isRootFocused()){if((ke||oe)&&We([]))i.preventDefault(),this.focusLastElement();else if((qe||J)&&We([]))i.preventDefault(),this.focusFirstElement();else if(ke&&We(["Shift"])&&this.isCheckboxList){i.preventDefault();var ct=this.focusLastElement();ct!==-1&&this.setSelectedIndexOnAction(ct,!1)}else if(qe&&We(["Shift"])&&this.isCheckboxList){i.preventDefault();var ct=this.focusFirstElement();ct!==-1&&this.setSelectedIndexOnAction(ct,!1)}if(this.hasTypeahead){var St={event:i,focusItemAtIndex:function(Gt){h.focusItemAtIndex(Gt)},focusedItemIndex:-1,isTargetListItem:r,sortedIndexByFirstChar:this.sortedIndexByFirstChar,isItemAtIndexDisabled:function(Gt){return h.isIndexDisabled(Gt)}};Qy(St,this.typeaheadState)}return}var yt=this.adapter.getFocusedElementIndex();if(!(yt===-1&&(yt=c,yt<0))){if(qe&&We([]))fu(i),this.focusNextElement(yt);else if(ke&&We([]))fu(i),this.focusPrevElement(yt);else if(qe&&We(["Shift"])&&this.isCheckboxList){fu(i);var ct=this.focusNextElement(yt);ct!==-1&&this.setSelectedIndexOnAction(ct,!1)}else if(ke&&We(["Shift"])&&this.isCheckboxList){fu(i);var ct=this.focusPrevElement(yt);ct!==-1&&this.setSelectedIndexOnAction(ct,!1)}else if(J&&We([]))fu(i),this.focusFirstElement();else if(oe&&We([]))fu(i),this.focusLastElement();else if(J&&We(["Control","Shift"])&&this.isCheckboxList){if(fu(i),this.isIndexDisabled(yt))return;this.focusFirstElement(),this.toggleCheckboxRange(0,yt,yt)}else if(oe&&We(["Control","Shift"])&&this.isCheckboxList){if(fu(i),this.isIndexDisabled(yt))return;this.focusLastElement(),this.toggleCheckboxRange(yt,this.adapter.getListItemCount()-1,yt)}else if(Qe&&We(["Control"])&&this.isCheckboxList)i.preventDefault(),this.checkboxListToggleAll(this.selectedIndex===uo.UNSET_INDEX?[]:this.selectedIndex,!0);else if((se||be)&&We([])){if(r){var xe=i.target;if(xe&&xe.tagName==="A"&&se||(fu(i),this.isIndexDisabled(yt)))return;this.isTypeaheadInProgress()||(this.isSelectableList()&&this.setSelectedIndexOnAction(yt,!1),this.adapter.notifyAction(yt))}}else if((se||be)&&We(["Shift"])&&this.isCheckboxList){var xe=i.target;if(xe&&xe.tagName==="A"&&se||(fu(i),this.isIndexDisabled(yt)))return;this.isTypeaheadInProgress()||(this.toggleCheckboxRange((v=this.lastSelectedIndex)!==null&&v!==void 0?v:yt,yt,yt),this.adapter.notifyAction(yt))}if(this.hasTypeahead){var St={event:i,focusItemAtIndex:function(Ve){h.focusItemAtIndex(Ve)},focusedItemIndex:this.focusedItemIndex,isTargetListItem:r,sortedIndexByFirstChar:this.sortedIndexByFirstChar,isItemAtIndexDisabled:function(Ve){return h.isIndexDisabled(Ve)}};Qy(St,this.typeaheadState)}}},t.prototype.handleClick=function(i,r,c){var h,v=qy(c);i!==uo.UNSET_INDEX&&(this.isIndexDisabled(i)||(v([])?(this.isSelectableList()&&this.setSelectedIndexOnAction(i,r),this.adapter.notifyAction(i)):this.isCheckboxList&&v(["Shift"])&&(this.toggleCheckboxRange((h=this.lastSelectedIndex)!==null&&h!==void 0?h:i,i,i),this.adapter.notifyAction(i))))},t.prototype.focusNextElement=function(i){var r=this.adapter.getListItemCount(),c=i,h=null;do{if(c++,c>=r)if(this.wrapFocus)c=0;else return i;if(c===h)return-1;h=h??c}while(!this.areDisabledItemsFocusable&&this.isIndexDisabled(c));return this.focusItemAtIndex(c),c},t.prototype.focusPrevElement=function(i){var r=this.adapter.getListItemCount(),c=i,h=null;do{if(c--,c<0)if(this.wrapFocus)c=r-1;else return i;if(c===h)return-1;h=h??c}while(!this.areDisabledItemsFocusable&&this.isIndexDisabled(c));return this.focusItemAtIndex(c),c},t.prototype.focusFirstElement=function(){return this.focusNextElement(-1)},t.prototype.focusLastElement=function(){return this.focusPrevElement(this.adapter.getListItemCount())},t.prototype.focusInitialElement=function(){var i=this.getFirstSelectedOrFocusedItemIndex();return this.focusItemAtIndex(i),i},t.prototype.setEnabled=function(i,r){this.isIndexValid(i,!1)&&(r?(this.adapter.removeClassForElementIndex(i,As.LIST_ITEM_DISABLED_CLASS),this.adapter.setAttributeForElementIndex(i,ch.ARIA_DISABLED,"false")):(this.adapter.addClassForElementIndex(i,As.LIST_ITEM_DISABLED_CLASS),this.adapter.setAttributeForElementIndex(i,ch.ARIA_DISABLED,"true")))},t.prototype.setSingleSelectionAtIndex=function(i,r){if(r===void 0&&(r={}),!(this.selectedIndex===i&&!r.forceUpdate)){var c=As.LIST_ITEM_SELECTED_CLASS;this.useActivatedClass&&(c=As.LIST_ITEM_ACTIVATED_CLASS),this.selectedIndex!==uo.UNSET_INDEX&&this.adapter.removeClassForElementIndex(this.selectedIndex,c),this.setAriaForSingleSelectionAtIndex(i),this.setTabindexAtIndex(i),i!==uo.UNSET_INDEX&&this.adapter.addClassForElementIndex(i,c),this.selectedIndex=i,r.isUserInteraction&&!r.forceUpdate&&this.adapter.notifySelectionChange([i])}},t.prototype.setAriaForSingleSelectionAtIndex=function(i){this.selectedIndex===uo.UNSET_INDEX&&(this.ariaCurrentAttrValue=this.adapter.getAttributeForElementIndex(i,ch.ARIA_CURRENT));var r=this.ariaCurrentAttrValue!==null,c=r?ch.ARIA_CURRENT:ch.ARIA_SELECTED;if(this.selectedIndex!==uo.UNSET_INDEX&&this.adapter.setAttributeForElementIndex(this.selectedIndex,c,"false"),i!==uo.UNSET_INDEX){var h=r?this.ariaCurrentAttrValue:"true";this.adapter.setAttributeForElementIndex(i,c,h)}},t.prototype.getSelectionAttribute=function(){return this.useSelectedAttr?ch.ARIA_SELECTED:ch.ARIA_CHECKED},t.prototype.setRadioAtIndex=function(i,r){r===void 0&&(r={});var c=this.getSelectionAttribute();this.adapter.setCheckedCheckboxOrRadioAtIndex(i,!0),!(this.selectedIndex===i&&!r.forceUpdate)&&(this.selectedIndex!==uo.UNSET_INDEX&&this.adapter.setAttributeForElementIndex(this.selectedIndex,c,"false"),this.adapter.setAttributeForElementIndex(i,c,"true"),this.selectedIndex=i,r.isUserInteraction&&!r.forceUpdate&&this.adapter.notifySelectionChange([i]))},t.prototype.setCheckboxAtIndex=function(i,r){r===void 0&&(r={});for(var c=this.selectedIndex,h=r.isUserInteraction?new Set(c===uo.UNSET_INDEX?[]:c):null,v=this.getSelectionAttribute(),o=[],k=0;k<this.adapter.getListItemCount();k++){var O=h==null?void 0:h.has(k),j=i.indexOf(k)>=0;j!==O&&o.push(k),this.adapter.setCheckedCheckboxOrRadioAtIndex(k,j),this.adapter.setAttributeForElementIndex(k,v,j?"true":"false")}this.selectedIndex=i,r.isUserInteraction&&o.length&&this.adapter.notifySelectionChange(o)},t.prototype.toggleCheckboxRange=function(i,r,c){this.lastSelectedIndex=c;for(var h=new Set(this.selectedIndex===uo.UNSET_INDEX?[]:this.selectedIndex),v=!(h!=null&&h.has(c)),o=Hy([i,r].sort(),2),k=o[0],O=o[1],j=this.getSelectionAttribute(),J=[],oe=k;oe<=O;oe++)if(!this.isIndexDisabled(oe)){var se=h.has(oe);v!==se&&(J.push(oe),this.adapter.setCheckedCheckboxOrRadioAtIndex(oe,v),this.adapter.setAttributeForElementIndex(oe,j,""+v),v?h.add(oe):h.delete(oe))}J.length&&(this.selectedIndex=iS([],Hy(h)),this.adapter.notifySelectionChange(J))},t.prototype.setTabindexAtIndex=function(i){this.focusedItemIndex===uo.UNSET_INDEX&&i!==0?this.adapter.setAttributeForElementIndex(0,"tabindex","-1"):this.focusedItemIndex>=0&&this.focusedItemIndex!==i&&this.adapter.setAttributeForElementIndex(this.focusedItemIndex,"tabindex","-1"),!(this.selectedIndex instanceof Array)&&this.selectedIndex!==i&&this.adapter.setAttributeForElementIndex(this.selectedIndex,"tabindex","-1"),i!==uo.UNSET_INDEX&&this.adapter.setAttributeForElementIndex(i,"tabindex","0")},t.prototype.isSelectableList=function(){return this.isSingleSelectionList||this.isCheckboxList||this.isRadioList},t.prototype.setTabindexToFirstSelectedOrFocusedItem=function(){var i=this.getFirstSelectedOrFocusedItemIndex();this.setTabindexAtIndex(i)},t.prototype.getFirstSelectedOrFocusedItemIndex=function(){return this.isSelectableList()?typeof this.selectedIndex=="number"&&this.selectedIndex!==uo.UNSET_INDEX?this.selectedIndex:pS(this.selectedIndex)&&this.selectedIndex.length>0?this.selectedIndex.reduce(function(i,r){return Math.min(i,r)}):0:Math.max(this.focusedItemIndex,0)},t.prototype.isIndexValid=function(i,r){var c=this;if(r===void 0&&(r=!0),i instanceof Array){if(!this.isCheckboxList&&r)throw new Error("MDCListFoundation: Array of index is only supported for checkbox based list");return i.length===0?!0:i.some(function(h){return c.isIndexInRange(h)})}else if(typeof i=="number"){if(this.isCheckboxList&&r)throw new Error("MDCListFoundation: Expected array of index for checkbox based list but got number: "+i);return this.isIndexInRange(i)||this.isSingleSelectionList&&i===uo.UNSET_INDEX}else return!1},t.prototype.isIndexInRange=function(i){var r=this.adapter.getListItemCount();return i>=0&&i<r},t.prototype.setSelectedIndexOnAction=function(i,r){this.lastSelectedIndex=i,this.isCheckboxList?(this.toggleCheckboxAtIndex(i,r),this.adapter.notifySelectionChange([i])):this.setSelectedIndex(i,{isUserInteraction:!0})},t.prototype.toggleCheckboxAtIndex=function(i,r){var c=this.getSelectionAttribute(),h=this.adapter.isCheckboxCheckedAtIndex(i),v;r?v=h:(v=!h,this.adapter.setCheckedCheckboxOrRadioAtIndex(i,v)),this.adapter.setAttributeForElementIndex(i,c,v?"true":"false");var o=this.selectedIndex===uo.UNSET_INDEX?[]:this.selectedIndex.slice();v?o.push(i):o=o.filter(function(k){return k!==i}),this.selectedIndex=o},t.prototype.focusItemAtIndex=function(i){this.adapter.focusItemAtIndex(i),this.focusedItemIndex=i},t.prototype.checkboxListToggleAll=function(i,r){var c=this.adapter.getListItemCount();if(i.length===c)this.setCheckboxAtIndex([],{isUserInteraction:r});else{for(var h=[],v=0;v<c;v++)(!this.isIndexDisabled(v)||i.indexOf(v)>-1)&&h.push(v);this.setCheckboxAtIndex(h,{isUserInteraction:r})}},t.prototype.typeaheadMatchItem=function(i,r,c){var h=this;c===void 0&&(c=!1);var v={focusItemAtIndex:function(o){h.focusItemAtIndex(o)},focusedItemIndex:r||this.focusedItemIndex,nextChar:i,sortedIndexByFirstChar:this.sortedIndexByFirstChar,skipFocus:c,isItemAtIndexDisabled:function(o){return h.isIndexDisabled(o)}};return P2(v,this.typeaheadState)},t.prototype.typeaheadInitSortedIndex=function(){return hS(this.adapter.getListItemCount(),this.adapter.getPrimaryTextAtIndex)},t.prototype.clearTypeaheadBuffer=function(){c3(this.typeaheadState)},t}(Zc);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var h3=function(e){qc(t,e);function t(i){var r=e.call(this,fo(fo({},t.defaultAdapter),i))||this;return r.isSurfaceOpen=!1,r.isQuickOpen=!1,r.isHoistedElement=!1,r.isFixedPosition=!1,r.isHorizontallyCenteredOnViewport=!1,r.maxHeight=0,r.openBottomBias=0,r.openAnimationEndTimerId=0,r.closeAnimationEndTimerId=0,r.animationRequestId=0,r.anchorCorner=Jh.TOP_START,r.originCorner=Jh.TOP_START,r.anchorMargin={top:0,right:0,bottom:0,left:0},r.position={x:0,y:0},r}return Object.defineProperty(t,"cssClasses",{get:function(){return AS},enumerable:!1,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return lS},enumerable:!1,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return Id},enumerable:!1,configurable:!0}),Object.defineProperty(t,"Corner",{get:function(){return Jh},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},hasAnchor:function(){return!1},isElementInContainer:function(){return!1},isFocused:function(){return!1},isRtl:function(){return!1},getInnerDimensions:function(){return{height:0,width:0}},getAnchorDimensions:function(){return null},getWindowDimensions:function(){return{height:0,width:0}},getBodyDimensions:function(){return{height:0,width:0}},getWindowScroll:function(){return{x:0,y:0}},setPosition:function(){},setMaxHeight:function(){},setTransformOrigin:function(){},saveFocus:function(){},restoreFocus:function(){},notifyClose:function(){},notifyClosing:function(){},notifyOpen:function(){},notifyOpening:function(){}}},enumerable:!1,configurable:!0}),t.prototype.init=function(){var i=t.cssClasses,r=i.ROOT,c=i.OPEN;if(!this.adapter.hasClass(r))throw new Error(r+" class required in root element.");this.adapter.hasClass(c)&&(this.isSurfaceOpen=!0)},t.prototype.destroy=function(){clearTimeout(this.openAnimationEndTimerId),clearTimeout(this.closeAnimationEndTimerId),cancelAnimationFrame(this.animationRequestId)},t.prototype.setAnchorCorner=function(i){this.anchorCorner=i},t.prototype.flipCornerHorizontally=function(){this.originCorner=this.originCorner^co.RIGHT},t.prototype.setAnchorMargin=function(i){this.anchorMargin.top=i.top||0,this.anchorMargin.right=i.right||0,this.anchorMargin.bottom=i.bottom||0,this.anchorMargin.left=i.left||0},t.prototype.setIsHoisted=function(i){this.isHoistedElement=i},t.prototype.setFixedPosition=function(i){this.isFixedPosition=i},t.prototype.isFixed=function(){return this.isFixedPosition},t.prototype.setAbsolutePosition=function(i,r){this.position.x=this.isFinite(i)?i:0,this.position.y=this.isFinite(r)?r:0},t.prototype.setIsHorizontallyCenteredOnViewport=function(i){this.isHorizontallyCenteredOnViewport=i},t.prototype.setQuickOpen=function(i){this.isQuickOpen=i},t.prototype.setMaxHeight=function(i){this.maxHeight=i},t.prototype.setOpenBottomBias=function(i){this.openBottomBias=i},t.prototype.isOpen=function(){return this.isSurfaceOpen},t.prototype.open=function(){var i=this;this.isSurfaceOpen||(this.adapter.notifyOpening(),this.adapter.saveFocus(),this.isQuickOpen?(this.isSurfaceOpen=!0,this.adapter.addClass(t.cssClasses.OPEN),this.dimensions=this.adapter.getInnerDimensions(),this.autoposition(),this.adapter.notifyOpen()):(this.adapter.addClass(t.cssClasses.ANIMATING_OPEN),this.animationRequestId=requestAnimationFrame(function(){i.dimensions=i.adapter.getInnerDimensions(),i.autoposition(),i.adapter.addClass(t.cssClasses.OPEN),i.openAnimationEndTimerId=setTimeout(function(){i.openAnimationEndTimerId=0,i.adapter.removeClass(t.cssClasses.ANIMATING_OPEN),i.adapter.notifyOpen()},Id.TRANSITION_OPEN_DURATION)}),this.isSurfaceOpen=!0))},t.prototype.close=function(i){var r=this;if(i===void 0&&(i=!1),!!this.isSurfaceOpen){if(this.adapter.notifyClosing(),this.isQuickOpen){this.isSurfaceOpen=!1,i||this.maybeRestoreFocus(),this.adapter.removeClass(t.cssClasses.OPEN),this.adapter.removeClass(t.cssClasses.IS_OPEN_BELOW),this.adapter.notifyClose();return}this.adapter.addClass(t.cssClasses.ANIMATING_CLOSED),requestAnimationFrame(function(){r.adapter.removeClass(t.cssClasses.OPEN),r.adapter.removeClass(t.cssClasses.IS_OPEN_BELOW),r.closeAnimationEndTimerId=setTimeout(function(){r.closeAnimationEndTimerId=0,r.adapter.removeClass(t.cssClasses.ANIMATING_CLOSED),r.adapter.notifyClose()},Id.TRANSITION_CLOSE_DURATION)}),this.isSurfaceOpen=!1,i||this.maybeRestoreFocus()}},t.prototype.handleBodyClick=function(i){var r=i.target;this.adapter.isElementInContainer(r)||this.close()},t.prototype.handleKeydown=function(i){var r=i.keyCode,c=i.key,h=c==="Escape"||r===27;h&&this.close()},t.prototype.autoposition=function(){var i;this.measurements=this.getAutoLayoutmeasurements();var r=this.getoriginCorner(),c=this.getMenuSurfaceMaxHeight(r),h=this.hasBit(r,co.BOTTOM)?"bottom":"top",v=this.hasBit(r,co.RIGHT)?"right":"left",o=this.getHorizontalOriginOffset(r),k=this.getVerticalOriginOffset(r),O=this.measurements,j=O.anchorSize,J=O.surfaceSize,oe=(i={},i[v]=o,i[h]=k,i);j.width/J.width>Id.ANCHOR_TO_MENU_SURFACE_WIDTH_RATIO&&(v="center"),(this.isHoistedElement||this.isFixedPosition)&&this.adjustPositionForHoistedElement(oe),this.adapter.setTransformOrigin(v+" "+h),this.adapter.setPosition(oe),this.adapter.setMaxHeight(c?c+"px":""),this.hasBit(r,co.BOTTOM)||this.adapter.addClass(t.cssClasses.IS_OPEN_BELOW)},t.prototype.getAutoLayoutmeasurements=function(){var i=this.adapter.getAnchorDimensions(),r=this.adapter.getBodyDimensions(),c=this.adapter.getWindowDimensions(),h=this.adapter.getWindowScroll();return i||(i={top:this.position.y,right:this.position.x,bottom:this.position.y,left:this.position.x,width:0,height:0}),{anchorSize:i,bodySize:r,surfaceSize:this.dimensions,viewportDistance:{top:i.top,right:c.width-i.right,bottom:c.height-i.bottom,left:i.left},viewportSize:c,windowScroll:h}},t.prototype.getoriginCorner=function(){var i=this.originCorner,r=this.measurements,c=r.viewportDistance,h=r.anchorSize,v=r.surfaceSize,o=t.numbers.MARGIN_TO_EDGE,k=this.hasBit(this.anchorCorner,co.BOTTOM),O,j;k?(O=c.top-o+this.anchorMargin.bottom,j=c.bottom-o-this.anchorMargin.bottom):(O=c.top-o+this.anchorMargin.top,j=c.bottom-o+h.height-this.anchorMargin.top);var J=j-v.height>0;!J&&O>j+this.openBottomBias&&(i=this.setBit(i,co.BOTTOM));var oe=this.adapter.isRtl(),se=this.hasBit(this.anchorCorner,co.FLIP_RTL),be=this.hasBit(this.anchorCorner,co.RIGHT)||this.hasBit(i,co.RIGHT),qe=!1;oe&&se?qe=!be:qe=be;var ke,Qe;qe?(ke=c.left+h.width+this.anchorMargin.right,Qe=c.right-this.anchorMargin.right):(ke=c.left+this.anchorMargin.left,Qe=c.right+h.width-this.anchorMargin.left);var We=ke-v.width>0,ct=Qe-v.width>0,St=this.hasBit(i,co.FLIP_RTL)&&this.hasBit(i,co.RIGHT);return ct&&St&&oe||!We&&St?i=this.unsetBit(i,co.RIGHT):(We&&qe&&oe||We&&!qe&&be||!ct&&ke>=Qe)&&(i=this.setBit(i,co.RIGHT)),i},t.prototype.getMenuSurfaceMaxHeight=function(i){if(this.maxHeight>0)return this.maxHeight;var r=this.measurements.viewportDistance,c=0,h=this.hasBit(i,co.BOTTOM),v=this.hasBit(this.anchorCorner,co.BOTTOM),o=t.numbers.MARGIN_TO_EDGE;return h?(c=r.top+this.anchorMargin.top-o,v||(c+=this.measurements.anchorSize.height)):(c=r.bottom-this.anchorMargin.bottom+this.measurements.anchorSize.height-o,v&&(c-=this.measurements.anchorSize.height)),c},t.prototype.getHorizontalOriginOffset=function(i){var r=this.measurements.anchorSize,c=this.hasBit(i,co.RIGHT),h=this.hasBit(this.anchorCorner,co.RIGHT);if(c){var v=h?r.width-this.anchorMargin.left:this.anchorMargin.right;return this.isHoistedElement||this.isFixedPosition?v-(this.measurements.viewportSize.width-this.measurements.bodySize.width):v}return h?r.width-this.anchorMargin.right:this.anchorMargin.left},t.prototype.getVerticalOriginOffset=function(i){var r=this.measurements.anchorSize,c=this.hasBit(i,co.BOTTOM),h=this.hasBit(this.anchorCorner,co.BOTTOM),v=0;return c?v=h?r.height-this.anchorMargin.top:-this.anchorMargin.bottom:v=h?r.height+this.anchorMargin.bottom:this.anchorMargin.top,v},t.prototype.adjustPositionForHoistedElement=function(i){var r,c,h=this.measurements,v=h.windowScroll,o=h.viewportDistance,k=h.surfaceSize,O=h.viewportSize,j=Object.keys(i);try{for(var J=Fd(j),oe=J.next();!oe.done;oe=J.next()){var se=oe.value,be=i[se]||0;if(this.isHorizontallyCenteredOnViewport&&(se==="left"||se==="right")){i[se]=(O.width-k.width)/2;continue}be+=o[se],this.isFixedPosition||(se==="top"?be+=v.y:se==="bottom"?be-=v.y:se==="left"?be+=v.x:be-=v.x),i[se]=be}}catch(qe){r={error:qe}}finally{try{oe&&!oe.done&&(c=J.return)&&c.call(J)}finally{if(r)throw r.error}}},t.prototype.maybeRestoreFocus=function(){var i=this,r=this.adapter.isFocused(),c=this.adapter.getOwnerDocument?this.adapter.getOwnerDocument():document,h=c.activeElement&&this.adapter.isElementInContainer(c.activeElement);(r||h)&&setTimeout(function(){i.adapter.restoreFocus()},Id.TOUCH_EVENT_WAIT_MS)},t.prototype.hasBit=function(i,r){return!!(i&r)},t.prototype.setBit=function(i,r){return i|r},t.prototype.unsetBit=function(i,r){return i^r},t.prototype.isFinite=function(i){return typeof i=="number"&&isFinite(i)},t}(Zc);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var o0={MENU_SELECTED_LIST_ITEM:"mdc-menu-item--selected",MENU_SELECTION_GROUP:"mdc-menu__selection-group",ROOT:"mdc-menu"},Yf={ARIA_CHECKED_ATTR:"aria-checked",ARIA_DISABLED_ATTR:"aria-disabled",CHECKBOX_SELECTOR:'input[type="checkbox"]',LIST_SELECTOR:".mdc-list,.mdc-deprecated-list",SELECTED_EVENT:"MDCMenu:selected",SKIP_RESTORE_FOCUS:"data-menu-item-skip-restore-focus"},_S={FOCUS_ROOT_INDEX:-1},t0;(function(e){e[e.NONE=0]="NONE",e[e.LIST_ROOT=1]="LIST_ROOT",e[e.FIRST_ITEM=2]="FIRST_ITEM",e[e.LAST_ITEM=3]="LAST_ITEM"})(t0||(t0={}));/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var vS=function(e){qc(t,e);function t(i){var r=e.call(this,fo(fo({},t.defaultAdapter),i))||this;return r.closeAnimationEndTimerId=0,r.defaultFocusState=t0.LIST_ROOT,r.selectedIndex=-1,r}return Object.defineProperty(t,"cssClasses",{get:function(){return o0},enumerable:!1,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return Yf},enumerable:!1,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return _S},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClassToElementAtIndex:function(){},removeClassFromElementAtIndex:function(){},addAttributeToElementAtIndex:function(){},removeAttributeFromElementAtIndex:function(){},getAttributeFromElementAtIndex:function(){return null},elementContainsClass:function(){return!1},closeSurface:function(){},getElementIndex:function(){return-1},notifySelected:function(){},getMenuItemCount:function(){return 0},focusItemAtIndex:function(){},focusListRoot:function(){},getSelectedSiblingOfItemAtIndex:function(){return-1},isSelectableItemAtIndex:function(){return!1}}},enumerable:!1,configurable:!0}),t.prototype.destroy=function(){this.closeAnimationEndTimerId&&clearTimeout(this.closeAnimationEndTimerId),this.adapter.closeSurface()},t.prototype.handleKeydown=function(i){var r=i.key,c=i.keyCode,h=r==="Tab"||c===9;h&&this.adapter.closeSurface(!0)},t.prototype.handleItemAction=function(i){var r=this,c=this.adapter.getElementIndex(i);if(!(c<0)){this.adapter.notifySelected({index:c});var h=this.adapter.getAttributeFromElementAtIndex(c,Yf.SKIP_RESTORE_FOCUS)==="true";this.adapter.closeSurface(h),this.closeAnimationEndTimerId=setTimeout(function(){var v=r.adapter.getElementIndex(i);v>=0&&r.adapter.isSelectableItemAtIndex(v)&&r.setSelectedIndex(v)},h3.numbers.TRANSITION_CLOSE_DURATION)}},t.prototype.handleMenuSurfaceOpened=function(){switch(this.defaultFocusState){case t0.FIRST_ITEM:this.adapter.focusItemAtIndex(0);break;case t0.LAST_ITEM:this.adapter.focusItemAtIndex(this.adapter.getMenuItemCount()-1);break;case t0.NONE:break;default:this.adapter.focusListRoot();break}},t.prototype.setDefaultFocusState=function(i){this.defaultFocusState=i},t.prototype.getSelectedIndex=function(){return this.selectedIndex},t.prototype.setSelectedIndex=function(i){if(this.validatedIndex(i),!this.adapter.isSelectableItemAtIndex(i))throw new Error("MDCMenuFoundation: No selection group at specified index.");var r=this.adapter.getSelectedSiblingOfItemAtIndex(i);r>=0&&(this.adapter.removeAttributeFromElementAtIndex(r,Yf.ARIA_CHECKED_ATTR),this.adapter.removeClassFromElementAtIndex(r,o0.MENU_SELECTED_LIST_ITEM)),this.adapter.addClassToElementAtIndex(i,o0.MENU_SELECTED_LIST_ITEM),this.adapter.addAttributeToElementAtIndex(i,Yf.ARIA_CHECKED_ATTR,"true"),this.selectedIndex=i},t.prototype.setEnabled=function(i,r){this.validatedIndex(i),r?(this.adapter.removeClassFromElementAtIndex(i,As.LIST_ITEM_DISABLED_CLASS),this.adapter.addAttributeToElementAtIndex(i,Yf.ARIA_DISABLED_ATTR,"false")):(this.adapter.addClassToElementAtIndex(i,As.LIST_ITEM_DISABLED_CLASS),this.adapter.addAttributeToElementAtIndex(i,Yf.ARIA_DISABLED_ATTR,"true"))},t.prototype.validatedIndex=function(i){var r=this.adapter.getMenuItemCount(),c=i>=0&&i<r;if(!c)throw new Error("MDCMenuFoundation: No list item at specified index.")},t}(Zc);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var yS={NOTCH_ELEMENT_SELECTOR:".mdc-notched-outline__notch"},Zy={NOTCH_ELEMENT_PADDING:8},bS={NO_LABEL:"mdc-notched-outline--no-label",OUTLINE_NOTCHED:"mdc-notched-outline--notched",OUTLINE_UPGRADED:"mdc-notched-outline--upgraded"};/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var xS=function(e){qc(t,e);function t(i){return e.call(this,fo(fo({},t.defaultAdapter),i))||this}return Object.defineProperty(t,"strings",{get:function(){return yS},enumerable:!1,configurable:!0}),Object.defineProperty(t,"cssClasses",{get:function(){return bS},enumerable:!1,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return Zy},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},setNotchWidthProperty:function(){},removeNotchWidthProperty:function(){}}},enumerable:!1,configurable:!0}),t.prototype.notch=function(i){var r=t.cssClasses.OUTLINE_NOTCHED;i>0&&(i+=Zy.NOTCH_ELEMENT_PADDING),this.adapter.setNotchWidthProperty(i),this.adapter.addClass(r)},t.prototype.closeNotch=function(){var i=t.cssClasses.OUTLINE_NOTCHED;this.adapter.removeClass(i),this.adapter.removeNotchWidthProperty()},t}(Zc);/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */function wS(e){return e===void 0&&(e=window),SS(e)?{passive:!0}:!1}function SS(e){e===void 0&&(e=window);var t=!1;try{var i={get passive(){return t=!0,!1}},r=function(){};e.document.addEventListener("test",r,i),e.document.removeEventListener("test",r,i)}catch{t=!1}return t}const CS=Object.freeze(Object.defineProperty({__proto__:null,applyPassive:wS},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var ES={BG_FOCUSED:"mdc-ripple-upgraded--background-focused",FG_ACTIVATION:"mdc-ripple-upgraded--foreground-activation",FG_DEACTIVATION:"mdc-ripple-upgraded--foreground-deactivation",ROOT:"mdc-ripple-upgraded",UNBOUNDED:"mdc-ripple-upgraded--unbounded"},IS={VAR_FG_SCALE:"--mdc-ripple-fg-scale",VAR_FG_SIZE:"--mdc-ripple-fg-size",VAR_FG_TRANSLATE_END:"--mdc-ripple-fg-translate-end",VAR_FG_TRANSLATE_START:"--mdc-ripple-fg-translate-start",VAR_LEFT:"--mdc-ripple-left",VAR_TOP:"--mdc-ripple-top"},jy={DEACTIVATION_TIMEOUT_MS:225,FG_DEACTIVATION_MS:150,INITIAL_ORIGIN_SCALE:.6,PADDING:10,TAP_DELAY_MS:300},Ng;function TS(e,t){t===void 0&&(t=!1);var i=e.CSS,r=Ng;if(typeof Ng=="boolean"&&!t)return Ng;var c=i&&typeof i.supports=="function";if(!c)return!1;var h=i.supports("--css-vars","yes"),v=i.supports("(--css-vars: yes)")&&i.supports("color","#00000000");return r=h||v,t||(Ng=r),r}function kS(e,t,i){if(!e)return{x:0,y:0};var r=t.x,c=t.y,h=r+i.left,v=c+i.top,o,k;if(e.type==="touchstart"){var O=e;o=O.changedTouches[0].pageX-h,k=O.changedTouches[0].pageY-v}else{var j=e;o=j.pageX-h,k=j.pageY-v}return{x:o,y:k}}/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Wy=["touchstart","pointerdown","mousedown","keydown"],Yy=["touchend","pointerup","mouseup","contextmenu"],Vg=[],MS=function(e){qc(t,e);function t(i){var r=e.call(this,fo(fo({},t.defaultAdapter),i))||this;return r.activationAnimationHasEnded=!1,r.activationTimer=0,r.fgDeactivationRemovalTimer=0,r.fgScale="0",r.frame={width:0,height:0},r.initialSize=0,r.layoutFrame=0,r.maxRadius=0,r.unboundedCoords={left:0,top:0},r.activationState=r.defaultActivationState(),r.activationTimerCallback=function(){r.activationAnimationHasEnded=!0,r.runDeactivationUXLogicIfReady()},r.activateHandler=function(c){r.activateImpl(c)},r.deactivateHandler=function(){r.deactivateImpl()},r.focusHandler=function(){r.handleFocus()},r.blurHandler=function(){r.handleBlur()},r.resizeHandler=function(){r.layout()},r}return Object.defineProperty(t,"cssClasses",{get:function(){return ES},enumerable:!1,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return IS},enumerable:!1,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return jy},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},browserSupportsCssVars:function(){return!0},computeBoundingRect:function(){return{top:0,right:0,bottom:0,left:0,width:0,height:0}},containsEventTarget:function(){return!0},deregisterDocumentInteractionHandler:function(){},deregisterInteractionHandler:function(){},deregisterResizeHandler:function(){},getWindowPageOffset:function(){return{x:0,y:0}},isSurfaceActive:function(){return!0},isSurfaceDisabled:function(){return!0},isUnbounded:function(){return!0},registerDocumentInteractionHandler:function(){},registerInteractionHandler:function(){},registerResizeHandler:function(){},removeClass:function(){},updateCssVariable:function(){}}},enumerable:!1,configurable:!0}),t.prototype.init=function(){var i=this,r=this.supportsPressRipple();if(this.registerRootHandlers(r),r){var c=t.cssClasses,h=c.ROOT,v=c.UNBOUNDED;requestAnimationFrame(function(){i.adapter.addClass(h),i.adapter.isUnbounded()&&(i.adapter.addClass(v),i.layoutInternal())})}},t.prototype.destroy=function(){var i=this;if(this.supportsPressRipple()){this.activationTimer&&(clearTimeout(this.activationTimer),this.activationTimer=0,this.adapter.removeClass(t.cssClasses.FG_ACTIVATION)),this.fgDeactivationRemovalTimer&&(clearTimeout(this.fgDeactivationRemovalTimer),this.fgDeactivationRemovalTimer=0,this.adapter.removeClass(t.cssClasses.FG_DEACTIVATION));var r=t.cssClasses,c=r.ROOT,h=r.UNBOUNDED;requestAnimationFrame(function(){i.adapter.removeClass(c),i.adapter.removeClass(h),i.removeCssVars()})}this.deregisterRootHandlers(),this.deregisterDeactivationHandlers()},t.prototype.activate=function(i){this.activateImpl(i)},t.prototype.deactivate=function(){this.deactivateImpl()},t.prototype.layout=function(){var i=this;this.layoutFrame&&cancelAnimationFrame(this.layoutFrame),this.layoutFrame=requestAnimationFrame(function(){i.layoutInternal(),i.layoutFrame=0})},t.prototype.setUnbounded=function(i){var r=t.cssClasses.UNBOUNDED;i?this.adapter.addClass(r):this.adapter.removeClass(r)},t.prototype.handleFocus=function(){var i=this;requestAnimationFrame(function(){return i.adapter.addClass(t.cssClasses.BG_FOCUSED)})},t.prototype.handleBlur=function(){var i=this;requestAnimationFrame(function(){return i.adapter.removeClass(t.cssClasses.BG_FOCUSED)})},t.prototype.supportsPressRipple=function(){return this.adapter.browserSupportsCssVars()},t.prototype.defaultActivationState=function(){return{activationEvent:void 0,hasDeactivationUXRun:!1,isActivated:!1,isProgrammatic:!1,wasActivatedByPointer:!1,wasElementMadeActive:!1}},t.prototype.registerRootHandlers=function(i){var r,c;if(i){try{for(var h=Fd(Wy),v=h.next();!v.done;v=h.next()){var o=v.value;this.adapter.registerInteractionHandler(o,this.activateHandler)}}catch(k){r={error:k}}finally{try{v&&!v.done&&(c=h.return)&&c.call(h)}finally{if(r)throw r.error}}this.adapter.isUnbounded()&&this.adapter.registerResizeHandler(this.resizeHandler)}this.adapter.registerInteractionHandler("focus",this.focusHandler),this.adapter.registerInteractionHandler("blur",this.blurHandler)},t.prototype.registerDeactivationHandlers=function(i){var r,c;if(i.type==="keydown")this.adapter.registerInteractionHandler("keyup",this.deactivateHandler);else try{for(var h=Fd(Yy),v=h.next();!v.done;v=h.next()){var o=v.value;this.adapter.registerDocumentInteractionHandler(o,this.deactivateHandler)}}catch(k){r={error:k}}finally{try{v&&!v.done&&(c=h.return)&&c.call(h)}finally{if(r)throw r.error}}},t.prototype.deregisterRootHandlers=function(){var i,r;try{for(var c=Fd(Wy),h=c.next();!h.done;h=c.next()){var v=h.value;this.adapter.deregisterInteractionHandler(v,this.activateHandler)}}catch(o){i={error:o}}finally{try{h&&!h.done&&(r=c.return)&&r.call(c)}finally{if(i)throw i.error}}this.adapter.deregisterInteractionHandler("focus",this.focusHandler),this.adapter.deregisterInteractionHandler("blur",this.blurHandler),this.adapter.isUnbounded()&&this.adapter.deregisterResizeHandler(this.resizeHandler)},t.prototype.deregisterDeactivationHandlers=function(){var i,r;this.adapter.deregisterInteractionHandler("keyup",this.deactivateHandler);try{for(var c=Fd(Yy),h=c.next();!h.done;h=c.next()){var v=h.value;this.adapter.deregisterDocumentInteractionHandler(v,this.deactivateHandler)}}catch(o){i={error:o}}finally{try{h&&!h.done&&(r=c.return)&&r.call(c)}finally{if(i)throw i.error}}},t.prototype.removeCssVars=function(){var i=this,r=t.strings,c=Object.keys(r);c.forEach(function(h){h.indexOf("VAR_")===0&&i.adapter.updateCssVariable(r[h],null)})},t.prototype.activateImpl=function(i){var r=this;if(!this.adapter.isSurfaceDisabled()){var c=this.activationState;if(!c.isActivated){var h=this.previousActivationEvent,v=h&&i!==void 0&&h.type!==i.type;if(!v){c.isActivated=!0,c.isProgrammatic=i===void 0,c.activationEvent=i,c.wasActivatedByPointer=c.isProgrammatic?!1:i!==void 0&&(i.type==="mousedown"||i.type==="touchstart"||i.type==="pointerdown");var o=i!==void 0&&Vg.length>0&&Vg.some(function(k){return r.adapter.containsEventTarget(k)});if(o){this.resetActivationState();return}i!==void 0&&(Vg.push(i.target),this.registerDeactivationHandlers(i)),c.wasElementMadeActive=this.checkElementMadeActive(i),c.wasElementMadeActive&&this.animateActivation(),requestAnimationFrame(function(){Vg=[],!c.wasElementMadeActive&&i!==void 0&&(i.key===" "||i.keyCode===32)&&(c.wasElementMadeActive=r.checkElementMadeActive(i),c.wasElementMadeActive&&r.animateActivation()),c.wasElementMadeActive||(r.activationState=r.defaultActivationState())})}}}},t.prototype.checkElementMadeActive=function(i){return i!==void 0&&i.type==="keydown"?this.adapter.isSurfaceActive():!0},t.prototype.animateActivation=function(){var i=this,r=t.strings,c=r.VAR_FG_TRANSLATE_START,h=r.VAR_FG_TRANSLATE_END,v=t.cssClasses,o=v.FG_DEACTIVATION,k=v.FG_ACTIVATION,O=t.numbers.DEACTIVATION_TIMEOUT_MS;this.layoutInternal();var j="",J="";if(!this.adapter.isUnbounded()){var oe=this.getFgTranslationCoordinates(),se=oe.startPoint,be=oe.endPoint;j=se.x+"px, "+se.y+"px",J=be.x+"px, "+be.y+"px"}this.adapter.updateCssVariable(c,j),this.adapter.updateCssVariable(h,J),clearTimeout(this.activationTimer),clearTimeout(this.fgDeactivationRemovalTimer),this.rmBoundedActivationClasses(),this.adapter.removeClass(o),this.adapter.computeBoundingRect(),this.adapter.addClass(k),this.activationTimer=setTimeout(function(){i.activationTimerCallback()},O)},t.prototype.getFgTranslationCoordinates=function(){var i=this.activationState,r=i.activationEvent,c=i.wasActivatedByPointer,h;c?h=kS(r,this.adapter.getWindowPageOffset(),this.adapter.computeBoundingRect()):h={x:this.frame.width/2,y:this.frame.height/2},h={x:h.x-this.initialSize/2,y:h.y-this.initialSize/2};var v={x:this.frame.width/2-this.initialSize/2,y:this.frame.height/2-this.initialSize/2};return{startPoint:h,endPoint:v}},t.prototype.runDeactivationUXLogicIfReady=function(){var i=this,r=t.cssClasses.FG_DEACTIVATION,c=this.activationState,h=c.hasDeactivationUXRun,v=c.isActivated,o=h||!v;o&&this.activationAnimationHasEnded&&(this.rmBoundedActivationClasses(),this.adapter.addClass(r),this.fgDeactivationRemovalTimer=setTimeout(function(){i.adapter.removeClass(r)},jy.FG_DEACTIVATION_MS))},t.prototype.rmBoundedActivationClasses=function(){var i=t.cssClasses.FG_ACTIVATION;this.adapter.removeClass(i),this.activationAnimationHasEnded=!1,this.adapter.computeBoundingRect()},t.prototype.resetActivationState=function(){var i=this;this.previousActivationEvent=this.activationState.activationEvent,this.activationState=this.defaultActivationState(),setTimeout(function(){return i.previousActivationEvent=void 0},t.numbers.TAP_DELAY_MS)},t.prototype.deactivateImpl=function(){var i=this,r=this.activationState;if(r.isActivated){var c=fo({},r);r.isProgrammatic?(requestAnimationFrame(function(){i.animateDeactivation(c)}),this.resetActivationState()):(this.deregisterDeactivationHandlers(),requestAnimationFrame(function(){i.activationState.hasDeactivationUXRun=!0,i.animateDeactivation(c),i.resetActivationState()}))}},t.prototype.animateDeactivation=function(i){var r=i.wasActivatedByPointer,c=i.wasElementMadeActive;(r||c)&&this.runDeactivationUXLogicIfReady()},t.prototype.layoutInternal=function(){var i=this;this.frame=this.adapter.computeBoundingRect();var r=Math.max(this.frame.height,this.frame.width),c=function(){var v=Math.sqrt(Math.pow(i.frame.width,2)+Math.pow(i.frame.height,2));return v+t.numbers.PADDING};this.maxRadius=this.adapter.isUnbounded()?r:c();var h=Math.floor(r*t.numbers.INITIAL_ORIGIN_SCALE);this.adapter.isUnbounded()&&h%2!==0?this.initialSize=h-1:this.initialSize=h,this.fgScale=""+this.maxRadius/this.initialSize,this.updateLayoutCssVars()},t.prototype.updateLayoutCssVars=function(){var i=t.strings,r=i.VAR_FG_SIZE,c=i.VAR_LEFT,h=i.VAR_TOP,v=i.VAR_FG_SCALE;this.adapter.updateCssVariable(r,this.initialSize+"px"),this.adapter.updateCssVariable(v,this.fgScale),this.adapter.isUnbounded()&&(this.unboundedCoords={left:Math.round(this.frame.width/2-this.initialSize/2),top:Math.round(this.frame.height/2-this.initialSize/2)},this.adapter.updateCssVariable(c,this.unboundedCoords.left+"px"),this.adapter.updateCssVariable(h,this.unboundedCoords.top+"px"))},t}(Zc);/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Va={ACTIVATED:"mdc-select--activated",DISABLED:"mdc-select--disabled",FOCUSED:"mdc-select--focused",INVALID:"mdc-select--invalid",MENU_INVALID:"mdc-select__menu--invalid",OUTLINED:"mdc-select--outlined",REQUIRED:"mdc-select--required",ROOT:"mdc-select",WITH_LEADING_ICON:"mdc-select--with-leading-icon"},M_={ARIA_CONTROLS:"aria-controls",ARIA_DESCRIBEDBY:"aria-describedby",ARIA_SELECTED_ATTR:"aria-selected",CHANGE_EVENT:"MDCSelect:change",HIDDEN_INPUT_SELECTOR:'input[type="hidden"]',LABEL_SELECTOR:".mdc-floating-label",LEADING_ICON_SELECTOR:".mdc-select__icon",LINE_RIPPLE_SELECTOR:".mdc-line-ripple",MENU_SELECTOR:".mdc-select__menu",OUTLINE_SELECTOR:".mdc-notched-outline",SELECTED_TEXT_SELECTOR:".mdc-select__selected-text",SELECT_ANCHOR_SELECTOR:".mdc-select__anchor",VALUE_ATTR:"data-value"},qh={LABEL_SCALE:.75,UNSET_INDEX:-1,CLICK_DEBOUNCE_TIMEOUT_MS:330};/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var PS=function(e){qc(t,e);function t(i,r){r===void 0&&(r={});var c=e.call(this,fo(fo({},t.defaultAdapter),i))||this;return c.disabled=!1,c.isMenuOpen=!1,c.useDefaultValidation=!0,c.customValidity=!0,c.lastSelectedIndex=qh.UNSET_INDEX,c.clickDebounceTimeout=0,c.recentlyClicked=!1,c.leadingIcon=r.leadingIcon,c.helperText=r.helperText,c}return Object.defineProperty(t,"cssClasses",{get:function(){return Va},enumerable:!1,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return qh},enumerable:!1,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return M_},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},activateBottomLine:function(){},deactivateBottomLine:function(){},getSelectedIndex:function(){return-1},setSelectedIndex:function(){},hasLabel:function(){return!1},floatLabel:function(){},getLabelWidth:function(){return 0},setLabelRequired:function(){},hasOutline:function(){return!1},notchOutline:function(){},closeOutline:function(){},setRippleCenter:function(){},notifyChange:function(){},setSelectedText:function(){},isSelectAnchorFocused:function(){return!1},getSelectAnchorAttr:function(){return""},setSelectAnchorAttr:function(){},removeSelectAnchorAttr:function(){},addMenuClass:function(){},removeMenuClass:function(){},openMenu:function(){},closeMenu:function(){},getAnchorElement:function(){return null},setMenuAnchorElement:function(){},setMenuAnchorCorner:function(){},setMenuWrapFocus:function(){},focusMenuItemAtIndex:function(){},getMenuItemCount:function(){return 0},getMenuItemValues:function(){return[]},getMenuItemTextAtIndex:function(){return""},isTypeaheadInProgress:function(){return!1},typeaheadMatchItem:function(){return-1}}},enumerable:!1,configurable:!0}),t.prototype.getSelectedIndex=function(){return this.adapter.getSelectedIndex()},t.prototype.setSelectedIndex=function(i,r,c){r===void 0&&(r=!1),c===void 0&&(c=!1),!(i>=this.adapter.getMenuItemCount())&&(i===qh.UNSET_INDEX?this.adapter.setSelectedText(""):this.adapter.setSelectedText(this.adapter.getMenuItemTextAtIndex(i).trim()),this.adapter.setSelectedIndex(i),r&&this.adapter.closeMenu(),!c&&this.lastSelectedIndex!==i&&this.handleChange(),this.lastSelectedIndex=i)},t.prototype.setValue=function(i,r){r===void 0&&(r=!1);var c=this.adapter.getMenuItemValues().indexOf(i);this.setSelectedIndex(c,!1,r)},t.prototype.getValue=function(){var i=this.adapter.getSelectedIndex(),r=this.adapter.getMenuItemValues();return i!==qh.UNSET_INDEX?r[i]:""},t.prototype.getDisabled=function(){return this.disabled},t.prototype.setDisabled=function(i){this.disabled=i,this.disabled?(this.adapter.addClass(Va.DISABLED),this.adapter.closeMenu()):this.adapter.removeClass(Va.DISABLED),this.leadingIcon&&this.leadingIcon.setDisabled(this.disabled),this.disabled?this.adapter.removeSelectAnchorAttr("tabindex"):this.adapter.setSelectAnchorAttr("tabindex","0"),this.adapter.setSelectAnchorAttr("aria-disabled",this.disabled.toString())},t.prototype.openMenu=function(){this.adapter.addClass(Va.ACTIVATED),this.adapter.openMenu(),this.isMenuOpen=!0,this.adapter.setSelectAnchorAttr("aria-expanded","true")},t.prototype.setHelperTextContent=function(i){this.helperText&&this.helperText.setContent(i)},t.prototype.layout=function(){if(this.adapter.hasLabel()){var i=this.getValue().length>0,r=this.adapter.hasClass(Va.FOCUSED),c=i||r,h=this.adapter.hasClass(Va.REQUIRED);this.notchOutline(c),this.adapter.floatLabel(c),this.adapter.setLabelRequired(h)}},t.prototype.layoutOptions=function(){var i=this.adapter.getMenuItemValues(),r=i.indexOf(this.getValue());this.setSelectedIndex(r,!1,!0)},t.prototype.handleMenuOpened=function(){if(this.adapter.getMenuItemValues().length!==0){var i=this.getSelectedIndex(),r=i>=0?i:0;this.adapter.focusMenuItemAtIndex(r)}},t.prototype.handleMenuClosing=function(){this.adapter.setSelectAnchorAttr("aria-expanded","false")},t.prototype.handleMenuClosed=function(){this.adapter.removeClass(Va.ACTIVATED),this.isMenuOpen=!1,this.adapter.isSelectAnchorFocused()||this.blur()},t.prototype.handleChange=function(){this.layout(),this.adapter.notifyChange(this.getValue());var i=this.adapter.hasClass(Va.REQUIRED);i&&this.useDefaultValidation&&this.setValid(this.isValid())},t.prototype.handleMenuItemAction=function(i){this.setSelectedIndex(i,!0)},t.prototype.handleFocus=function(){this.adapter.addClass(Va.FOCUSED),this.layout(),this.adapter.activateBottomLine()},t.prototype.handleBlur=function(){this.isMenuOpen||this.blur()},t.prototype.handleClick=function(i){if(!(this.disabled||this.recentlyClicked)){if(this.setClickDebounceTimeout(),this.isMenuOpen){this.adapter.closeMenu();return}this.adapter.setRippleCenter(i),this.openMenu()}},t.prototype.handleKeydown=function(i){if(!(this.isMenuOpen||!this.adapter.hasClass(Va.FOCUSED))){var r=Lo(i)===Ur.ENTER,c=Lo(i)===Ur.SPACEBAR,h=Lo(i)===Ur.ARROW_UP,v=Lo(i)===Ur.ARROW_DOWN,o=i.ctrlKey||i.metaKey;if(!o&&(!c&&i.key&&i.key.length===1||c&&this.adapter.isTypeaheadInProgress())){var k=c?" ":i.key,O=this.adapter.typeaheadMatchItem(k,this.getSelectedIndex());O>=0&&this.setSelectedIndex(O),i.preventDefault();return}!r&&!c&&!h&&!v||(this.openMenu(),i.preventDefault())}},t.prototype.notchOutline=function(i){if(this.adapter.hasOutline()){var r=this.adapter.hasClass(Va.FOCUSED);if(i){var c=qh.LABEL_SCALE,h=this.adapter.getLabelWidth()*c;this.adapter.notchOutline(h)}else r||this.adapter.closeOutline()}},t.prototype.setLeadingIconAriaLabel=function(i){this.leadingIcon&&this.leadingIcon.setAriaLabel(i)},t.prototype.setLeadingIconContent=function(i){this.leadingIcon&&this.leadingIcon.setContent(i)},t.prototype.getUseDefaultValidation=function(){return this.useDefaultValidation},t.prototype.setUseDefaultValidation=function(i){this.useDefaultValidation=i},t.prototype.setValid=function(i){this.useDefaultValidation||(this.customValidity=i),this.adapter.setSelectAnchorAttr("aria-invalid",(!i).toString()),i?(this.adapter.removeClass(Va.INVALID),this.adapter.removeMenuClass(Va.MENU_INVALID)):(this.adapter.addClass(Va.INVALID),this.adapter.addMenuClass(Va.MENU_INVALID)),this.syncHelperTextValidity(i)},t.prototype.isValid=function(){return this.useDefaultValidation&&this.adapter.hasClass(Va.REQUIRED)&&!this.adapter.hasClass(Va.DISABLED)?this.getSelectedIndex()!==qh.UNSET_INDEX&&(this.getSelectedIndex()!==0||!!this.getValue()):this.customValidity},t.prototype.setRequired=function(i){i?this.adapter.addClass(Va.REQUIRED):this.adapter.removeClass(Va.REQUIRED),this.adapter.setSelectAnchorAttr("aria-required",i.toString()),this.adapter.setLabelRequired(i)},t.prototype.getRequired=function(){return this.adapter.getSelectAnchorAttr("aria-required")==="true"},t.prototype.init=function(){var i=this.adapter.getAnchorElement();i&&(this.adapter.setMenuAnchorElement(i),this.adapter.setMenuAnchorCorner(Jh.BOTTOM_START)),this.adapter.setMenuWrapFocus(!1),this.setDisabled(this.adapter.hasClass(Va.DISABLED)),this.syncHelperTextValidity(!this.adapter.hasClass(Va.INVALID)),this.layout(),this.layoutOptions()},t.prototype.blur=function(){this.adapter.removeClass(Va.FOCUSED),this.layout(),this.adapter.deactivateBottomLine();var i=this.adapter.hasClass(Va.REQUIRED);i&&this.useDefaultValidation&&this.setValid(this.isValid())},t.prototype.syncHelperTextValidity=function(i){if(this.helperText){this.helperText.setValidity(i);var r=this.helperText.isVisible(),c=this.helperText.getId();r&&c?this.adapter.setSelectAnchorAttr(M_.ARIA_DESCRIBEDBY,c):this.adapter.removeSelectAnchorAttr(M_.ARIA_DESCRIBEDBY)}},t.prototype.setClickDebounceTimeout=function(){var i=this;clearTimeout(this.clickDebounceTimeout),this.clickDebounceTimeout=setTimeout(function(){i.recentlyClicked=!1},qh.CLICK_DEBOUNCE_TIMEOUT_MS),this.recentlyClicked=!0},t}(Zc);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Zh={ARIA_HIDDEN:"aria-hidden",ROLE:"role"},Mc={HELPER_TEXT_VALIDATION_MSG:"mdc-select-helper-text--validation-msg",HELPER_TEXT_VALIDATION_MSG_PERSISTENT:"mdc-select-helper-text--validation-msg-persistent"};/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var DS=function(e){qc(t,e);function t(i){return e.call(this,fo(fo({},t.defaultAdapter),i))||this}return Object.defineProperty(t,"cssClasses",{get:function(){return Mc},enumerable:!1,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return Zh},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},setAttr:function(){},getAttr:function(){return null},removeAttr:function(){},setContent:function(){}}},enumerable:!1,configurable:!0}),t.prototype.getId=function(){return this.adapter.getAttr("id")},t.prototype.isVisible=function(){return this.adapter.getAttr(Zh.ARIA_HIDDEN)!=="true"},t.prototype.setContent=function(i){this.adapter.setContent(i)},t.prototype.setValidation=function(i){i?this.adapter.addClass(Mc.HELPER_TEXT_VALIDATION_MSG):this.adapter.removeClass(Mc.HELPER_TEXT_VALIDATION_MSG)},t.prototype.setValidationMsgPersistent=function(i){i?this.adapter.addClass(Mc.HELPER_TEXT_VALIDATION_MSG_PERSISTENT):this.adapter.removeClass(Mc.HELPER_TEXT_VALIDATION_MSG_PERSISTENT)},t.prototype.getIsValidation=function(){return this.adapter.hasClass(Mc.HELPER_TEXT_VALIDATION_MSG)},t.prototype.getIsValidationMsgPersistent=function(){return this.adapter.hasClass(Mc.HELPER_TEXT_VALIDATION_MSG_PERSISTENT)},t.prototype.setValidity=function(i){var r=this.adapter.hasClass(Mc.HELPER_TEXT_VALIDATION_MSG);if(r){var c=this.adapter.hasClass(Mc.HELPER_TEXT_VALIDATION_MSG_PERSISTENT),h=!i||c;if(h){this.showToScreenReader(),i?this.adapter.removeAttr(Zh.ROLE):this.adapter.setAttr(Zh.ROLE,"alert");return}this.adapter.removeAttr(Zh.ROLE),this.hide()}},t.prototype.showToScreenReader=function(){this.adapter.removeAttr(Zh.ARIA_HIDDEN)},t.prototype.hide=function(){this.adapter.setAttr(Zh.ARIA_HIDDEN,"true")},t}(Zc);function Mr(e){return Object.entries(e).filter(([t,i])=>t!==""&&i).map(([t])=>t).join(" ")}function ho(e,t,i,r={bubbles:!0},c=!1){if(typeof Event>"u")throw new Error("Event not defined.");if(!e)throw new Error("Tried to dipatch event without element.");const h=new CustomEvent(t,Object.assign(Object.assign({},r),{detail:i}));if(e==null||e.dispatchEvent(h),c&&t.startsWith("SMUI")){const v=new CustomEvent(t.replace(/^SMUI/g,()=>"MDC"),Object.assign(Object.assign({},r),{detail:i}));e==null||e.dispatchEvent(v),v.defaultPrevented&&h.preventDefault()}return h}function Xy(e,t){let i=Object.getOwnPropertyNames(e);const r={};for(let c=0;c<i.length;c++){const h=i[c],v=h.indexOf("$");v!==-1&&t.indexOf(h.substring(0,v+1))!==-1||t.indexOf(h)===-1&&(r[h]=e[h])}return r}const Ky=/^[a-z]+(?::(?:preventDefault|stopPropagation|passive|nonpassive|capture|once|self))+$/,LS=/^[^$]+(?:\$(?:preventDefault|stopPropagation|passive|nonpassive|capture|once|self))+$/;function Al(e){let t,i=[];e.$on=(c,h)=>{let v=c,o=()=>{};return t?o=t(v,h):i.push([v,h]),v.match(Ky)&&console&&console.warn('Event modifiers in SMUI now use "$" instead of ":", so that all events can be bound with modifiers. Please update your event binding: ',v),()=>{o()}};function r(c){const h=e.$$.callbacks[c.type];h&&h.slice().forEach(v=>v.call(this,c))}return c=>{const h=[],v={};t=(o,k)=>{let O=o,j=k,J=!1;const oe=O.match(Ky),se=O.match(LS),be=oe||se;if(O.match(/^SMUI:\w+:/)){const Qe=O.split(":");let We="";for(let ct=0;ct<Qe.length;ct++)We+=ct===Qe.length-1?":"+Qe[ct]:Qe[ct].split("-").map(St=>St.slice(0,1).toUpperCase()+St.slice(1)).join("");console.warn(`The event ${O.split("$")[0]} has been renamed to ${We.split("$")[0]}.`),O=We}if(be){const Qe=O.split(oe?":":"$");O=Qe[0];const We=Qe.slice(1).reduce((ct,St)=>(ct[St]=!0,ct),{});We.passive&&(J=J||{},J.passive=!0),We.nonpassive&&(J=J||{},J.passive=!1),We.capture&&(J=J||{},J.capture=!0),We.once&&(J=J||{},J.once=!0),We.preventDefault&&(j=BS(j)),We.stopPropagation&&(j=RS(j)),We.stopImmediatePropagation&&(j=OS(j)),We.self&&(j=zS(c,j)),We.trusted&&(j=FS(j))}const qe=Jy(c,O,j,J),ke=()=>{qe();const Qe=h.indexOf(ke);Qe>-1&&h.splice(Qe,1)};return h.push(ke),O in v||(v[O]=Jy(c,O,r)),ke};for(let o=0;o<i.length;o++)t(i[o][0],i[o][1]);return{destroy:()=>{for(let o=0;o<h.length;o++)h[o]();for(let o of Object.entries(v))o[1]()}}}}function Jy(e,t,i,r){return e.addEventListener(t,i,r),()=>e.removeEventListener(t,i,r)}function BS(e){return function(t){return t.preventDefault(),e.call(this,t)}}function RS(e){return function(t){return t.stopPropagation(),e.call(this,t)}}function OS(e){return function(t){return t.stopImmediatePropagation(),e.call(this,t)}}function zS(e,t){return function(i){if(i.target===e)return t.call(this,i)}}function FS(e){return function(t){if(t.isTrusted)return e.call(this,t)}}function Ta(e,t){let i=Object.getOwnPropertyNames(e);const r={};for(let c=0;c<i.length;c++){const h=i[c];h.substring(0,t.length)===t&&(r[h.substring(t.length)]=e[h])}return r}function el(e,t){let i=[];if(t)for(let r=0;r<t.length;r++){const c=t[r],h=Array.isArray(c)?c[0]:c;Array.isArray(c)&&c.length>1?i.push(h(e,c[1])):i.push(h(e))}return{update(r){if((r&&r.length||0)!=i.length)throw new Error("You must not change the length of an actions array.");if(r)for(let c=0;c<r.length;c++){const h=i[c];if(h&&h.update){const v=r[c];Array.isArray(v)&&v.length>1?h.update(v[1]):h.update()}}},destroy(){for(let r=0;r<i.length;r++){const c=i[r];c&&c.destroy&&c.destroy()}}}}const{applyPassive:Ug}=CS,{matches:NS}=Tv;function $h(e,{ripple:t=!0,surface:i=!1,unbounded:r=!1,disabled:c=!1,color:h,active:v,rippleElement:o,eventTarget:k,activeTarget:O,addClass:j=be=>e.classList.add(be),removeClass:J=be=>e.classList.remove(be),addStyle:oe=(be,qe)=>e.style.setProperty(be,qe),initPromise:se=Promise.resolve()}={}){let be,qe=Bo("SMUI:addLayoutListener"),ke,Qe=v,We=k,ct=O;function St(){i?(j("mdc-ripple-surface"),h==="primary"?(j("smui-ripple-surface--primary"),J("smui-ripple-surface--secondary")):h==="secondary"?(J("smui-ripple-surface--primary"),j("smui-ripple-surface--secondary")):(J("smui-ripple-surface--primary"),J("smui-ripple-surface--secondary"))):(J("mdc-ripple-surface"),J("smui-ripple-surface--primary"),J("smui-ripple-surface--secondary")),be&&Qe!==v&&(Qe=v,v?be.activate():v===!1&&be.deactivate()),t&&!be?(be=new MS({addClass:j,browserSupportsCssVars:()=>TS(window),computeBoundingRect:()=>(o||e).getBoundingClientRect(),containsEventTarget:xe=>e.contains(xe),deregisterDocumentInteractionHandler:(xe,Gt)=>document.documentElement.removeEventListener(xe,Gt,Ug()),deregisterInteractionHandler:(xe,Gt)=>(k||e).removeEventListener(xe,Gt,Ug()),deregisterResizeHandler:xe=>window.removeEventListener("resize",xe),getWindowPageOffset:()=>({x:window.pageXOffset,y:window.pageYOffset}),isSurfaceActive:()=>v??NS(O||e,":active"),isSurfaceDisabled:()=>!!c,isUnbounded:()=>!!r,registerDocumentInteractionHandler:(xe,Gt)=>document.documentElement.addEventListener(xe,Gt,Ug()),registerInteractionHandler:(xe,Gt)=>(k||e).addEventListener(xe,Gt,Ug()),registerResizeHandler:xe=>window.addEventListener("resize",xe),removeClass:J,updateCssVariable:oe}),se.then(()=>{be&&(be.init(),be.setUnbounded(r))})):be&&!t&&se.then(()=>{be&&(be.destroy(),be=void 0)}),be&&(We!==k||ct!==O)&&(We=k,ct=O,be.destroy(),requestAnimationFrame(()=>{be&&(be.init(),be.setUnbounded(r))})),!t&&r&&j("mdc-ripple-upgraded--unbounded")}St(),qe&&(ke=qe(yt));function yt(){be&&be.layout()}return{update(xe){({ripple:t,surface:i,unbounded:r,disabled:c,color:h,active:v,rippleElement:o,eventTarget:k,activeTarget:O,addClass:j,removeClass:J,addStyle:oe,initPromise:se}=Object.assign({ripple:!0,surface:!1,unbounded:!1,disabled:!1,color:void 0,active:void 0,rippleElement:void 0,eventTarget:void 0,activeTarget:void 0,addClass:Gt=>e.classList.add(Gt),removeClass:Gt=>e.classList.remove(Gt),addStyle:(Gt,Ve)=>e.style.setProperty(Gt,Ve),initPromise:Promise.resolve()},xe)),St()},destroy(){be&&(be.destroy(),be=void 0,J("mdc-ripple-surface"),J("smui-ripple-surface--primary"),J("smui-ripple-surface--secondary")),ke&&ke()}}}const{document:VS}=tS;function US(e){let t,i,r,c,h,v,o,k;const O=e[34].default,j=Ya(O,e,e[33],null);let J=[{class:r=Mr({[e[1]]:!0,"mdc-menu-surface":!0,"mdc-menu-surface--fixed":e[4],"mdc-menu-surface--open":e[3],"smui-menu-surface--static":e[3],"mdc-menu-surface--fullwidth":e[5],...e[8]})},{style:c=Object.entries(e[9]).map($y).concat([e[2]]).join(" ")},{role:"dialog"},e[12]],oe={};for(let se=0;se<J.length;se+=1)oe=Gn(oe,J[se]);return{c(){t=fr(),i=En("div"),j&&j.c(),this.h()},l(se){t=dr(se),i=In(se,"DIV",{class:!0,style:!0,role:!0});var be=en(i);j&&j.l(be),be.forEach(li),this.h()},h(){ca(i,oe)},m(se,be){vn(se,t,be),vn(se,i,be),j&&j.m(i,null),e[35](i),v=!0,o||(k=[Os(VS.body,"click",e[11],!0),Ms(h=el.call(null,i,e[0])),Ms(e[10].call(null,i)),Os(i,"keydown",function(){Jo(e[7]&&e[7].handleKeydown.bind(e[7]))&&(e[7]&&e[7].handleKeydown.bind(e[7])).apply(this,arguments)})],o=!0)},p(se,be){e=se,j&&j.p&&(!v||be[1]&4)&&Xa(j,O,e,e[33],v?Ja(O,e[33],be,null):Ka(e[33]),null),ca(i,oe=fs(J,[(!v||be[0]&314&&r!==(r=Mr({[e[1]]:!0,"mdc-menu-surface":!0,"mdc-menu-surface--fixed":e[4],"mdc-menu-surface--open":e[3],"smui-menu-surface--static":e[3],"mdc-menu-surface--fullwidth":e[5],...e[8]})))&&{class:r},(!v||be[0]&516&&c!==(c=Object.entries(e[9]).map($y).concat([e[2]]).join(" ")))&&{style:c},{role:"dialog"},be[0]&4096&&e[12]])),h&&Jo(h.update)&&be[0]&1&&h.update.call(null,e[0])},i(se){v||(Pi(j,se),v=!0)},o(se){Hi(j,se),v=!1},d(se){se&&(li(t),li(i)),j&&j.d(se),e[35](null),o=!1,Jl(k)}}}const $y=([e,t])=>`${e}: ${t};`;function GS(e,t,i){const r=["use","class","style","static","anchor","fixed","open","managed","fullWidth","quickOpen","anchorElement","anchorCorner","anchorMargin","maxHeight","horizontallyCenteredOnViewport","openBottomBias","neverRestoreFocus","isOpen","setOpen","setAbsolutePosition","setIsHoisted","isFixed","getElement"];let c=Fs(t,r),{$$slots:h={},$$scope:v}=t;var o,k,O;const j=Al(sl());let{use:J=[]}=t,{class:oe=""}=t,{style:se=""}=t,{static:be=!1}=t,{anchor:qe=!0}=t,{fixed:ke=!1}=t,{open:Qe=be}=t,{managed:We=!1}=t,{fullWidth:ct=!1}=t,{quickOpen:St=!1}=t,{anchorElement:yt=void 0}=t,{anchorCorner:xe=void 0}=t,{anchorMargin:Gt={top:0,right:0,bottom:0,left:0}}=t,{maxHeight:Ve=0}=t,{horizontallyCenteredOnViewport:Je=!1}=t,{openBottomBias:et=0}=t,{neverRestoreFocus:lt=!1}=t,ut,Ke,Me={},Ze={},Fe;Za("SMUI:list:role","menu"),Za("SMUI:list:item:role","menuitem");const vt=Jh;Dl(()=>(i(7,Ke=new h3({addClass:_t,removeClass:ei,hasClass:dt,hasAnchor:()=>!!yt,notifyClose:()=>{We||i(13,Qe=be),Qe||ho(ut,"SMUIMenuSurface:closed",void 0,void 0,!0)},notifyClosing:()=>{We||i(13,Qe=be),Qe||ho(ut,"SMUIMenuSurface:closing",void 0,void 0,!0)},notifyOpen:()=>{We||i(13,Qe=!0),Qe&&ho(ut,"SMUIMenuSurface:opened",void 0,void 0,!0)},notifyOpening:()=>{Qe||ho(ut,"SMUIMenuSurface:opening",void 0,void 0,!0)},isElementInContainer:ni=>ut.contains(ni),isRtl:()=>getComputedStyle(ut).getPropertyValue("direction")==="rtl",setTransformOrigin:ni=>{i(9,Ze["transform-origin"]=ni,Ze)},isFocused:()=>document.activeElement===ut,saveFocus:()=>{var ni;Fe=(ni=document.activeElement)!==null&&ni!==void 0?ni:void 0},restoreFocus:()=>{!lt&&(!ut||ut.contains(document.activeElement))&&Fe&&document.contains(Fe)&&"focus"in Fe&&Fe.focus()},getInnerDimensions:()=>({width:ut.offsetWidth,height:ut.offsetHeight}),getAnchorDimensions:()=>yt?yt.getBoundingClientRect():null,getWindowDimensions:()=>({width:window.innerWidth,height:window.innerHeight}),getBodyDimensions:()=>({width:document.body.clientWidth,height:document.body.clientHeight}),getWindowScroll:()=>({x:window.pageXOffset,y:window.pageYOffset}),setPosition:ni=>{i(9,Ze.left="left"in ni?`${ni.left}px`:"",Ze),i(9,Ze.right="right"in ni?`${ni.right}px`:"",Ze),i(9,Ze.top="top"in ni?`${ni.top}px`:"",Ze),i(9,Ze.bottom="bottom"in ni?`${ni.bottom}px`:"",Ze)},setMaxHeight:ni=>{i(9,Ze["max-height"]=ni,Ze)}})),ho(ut,"SMUIMenuSurface:mount",{get open(){return Qe},set open(ni){i(13,Qe=ni)},closeProgrammatic:di}),Ke.init(),()=>{var ni;const si=Ke.isHoistedElement;Ke.destroy(),si&&((ni=ut.parentNode)===null||ni===void 0||ni.removeChild(ut))})),lc(()=>{var Lt;qe&&ut&&((Lt=ut.parentElement)===null||Lt===void 0||Lt.classList.remove("mdc-menu-surface--anchor"))});function dt(Lt){return Lt in Me?Me[Lt]:Di().classList.contains(Lt)}function _t(Lt){Me[Lt]||i(8,Me[Lt]=!0,Me)}function ei(Lt){(!(Lt in Me)||Me[Lt])&&i(8,Me[Lt]=!1,Me)}function di(Lt){Ke.close(Lt),i(13,Qe=!1)}function yi(Lt){Ke&&Qe&&!We&&Ke.handleBodyClick(Lt)}function Ti(){return Qe}function Vi(Lt){i(13,Qe=Lt)}function wi(Lt,ni){return Ke.setAbsolutePosition(Lt,ni)}function mi(Lt){return Ke.setIsHoisted(Lt)}function Wt(){return Ke.isFixed()}function Di(){return ut}function $t(Lt){ts[Lt?"unshift":"push"](()=>{ut=Lt,i(6,ut)})}return e.$$set=Lt=>{t=Gn(Gn({},t),OA(Lt)),i(12,c=Fs(t,r)),"use"in Lt&&i(0,J=Lt.use),"class"in Lt&&i(1,oe=Lt.class),"style"in Lt&&i(2,se=Lt.style),"static"in Lt&&i(3,be=Lt.static),"anchor"in Lt&&i(15,qe=Lt.anchor),"fixed"in Lt&&i(4,ke=Lt.fixed),"open"in Lt&&i(13,Qe=Lt.open),"managed"in Lt&&i(16,We=Lt.managed),"fullWidth"in Lt&&i(5,ct=Lt.fullWidth),"quickOpen"in Lt&&i(17,St=Lt.quickOpen),"anchorElement"in Lt&&i(14,yt=Lt.anchorElement),"anchorCorner"in Lt&&i(18,xe=Lt.anchorCorner),"anchorMargin"in Lt&&i(19,Gt=Lt.anchorMargin),"maxHeight"in Lt&&i(20,Ve=Lt.maxHeight),"horizontallyCenteredOnViewport"in Lt&&i(21,Je=Lt.horizontallyCenteredOnViewport),"openBottomBias"in Lt&&i(22,et=Lt.openBottomBias),"neverRestoreFocus"in Lt&&i(23,lt=Lt.neverRestoreFocus),"$$scope"in Lt&&i(33,v=Lt.$$scope)},e.$$.update=()=>{e.$$.dirty[0]&1073774656|e.$$.dirty[1]&3&&ut&&qe&&!(!(i(30,o=ut.parentElement)===null||o===void 0)&&o.classList.contains("mdc-menu-surface--anchor"))&&(i(31,k=ut.parentElement)===null||k===void 0||k.classList.add("mdc-menu-surface--anchor"),i(14,yt=i(32,O=ut.parentElement)!==null&&O!==void 0?O:void 0)),e.$$.dirty[0]&8320&&Ke&&Ke.isOpen()!==Qe&&(Qe?Ke.open():Ke.close()),e.$$.dirty[0]&131200&&Ke&&Ke.setQuickOpen(St),e.$$.dirty[0]&144&&Ke&&Ke.setFixedPosition(ke),e.$$.dirty[0]&1048704&&Ke&&Ke.setMaxHeight(Ve),e.$$.dirty[0]&2097280&&Ke&&Ke.setIsHorizontallyCenteredOnViewport(Je),e.$$.dirty[0]&262272&&Ke&&xe!=null&&(typeof xe=="string"?Ke.setAnchorCorner(vt[xe]):Ke.setAnchorCorner(xe)),e.$$.dirty[0]&524416&&Ke&&Ke.setAnchorMargin(Gt),e.$$.dirty[0]&4194432&&Ke&&Ke.setOpenBottomBias(et)},[J,oe,se,be,ke,ct,ut,Ke,Me,Ze,j,yi,c,Qe,yt,qe,We,St,xe,Gt,Ve,Je,et,lt,Ti,Vi,wi,mi,Wt,Di,o,k,O,v,h,$t]}class HS extends Ds{constructor(t){super(),Ls(this,t,GS,US,vs,{use:0,class:1,style:2,static:3,anchor:15,fixed:4,open:13,managed:16,fullWidth:5,quickOpen:17,anchorElement:14,anchorCorner:18,anchorMargin:19,maxHeight:20,horizontallyCenteredOnViewport:21,openBottomBias:22,neverRestoreFocus:23,isOpen:24,setOpen:25,setAbsolutePosition:26,setIsHoisted:27,isFixed:28,getElement:29},null,[-1,-1])}get isOpen(){return this.$$.ctx[24]}get setOpen(){return this.$$.ctx[25]}get setAbsolutePosition(){return this.$$.ctx[26]}get setIsHoisted(){return this.$$.ctx[27]}get isFixed(){return this.$$.ctx[28]}get getElement(){return this.$$.ctx[29]}}function QS(e,{addClass:t=r=>e.classList.add(r),removeClass:i=r=>e.classList.remove(r)}={}){return t("mdc-menu-surface--anchor"),{destroy(){i("mdc-menu-surface--anchor")}}}function qS(e){let t;const i=e[17].default,r=Ya(i,e,e[22],null);return{c(){r&&r.c()},l(c){r&&r.l(c)},m(c,h){r&&r.m(c,h),t=!0},p(c,h){r&&r.p&&(!t||h&4194304)&&Xa(r,i,c,c[22],t?Ja(i,c[22],h,null):Ka(c[22]),null)},i(c){t||(Pi(r,c),t=!0)},o(c){Hi(r,c),t=!1},d(c){r&&r.d(c)}}}function ZS(e){let t,i,r;const c=[{use:e[5]},{class:Mr({[e[1]]:!0,"mdc-menu":!0})},e[9]];function h(o){e[19](o)}let v={$$slots:{default:[qS]},$$scope:{ctx:e}};for(let o=0;o<c.length;o+=1)v=Gn(v,c[o]);return e[0]!==void 0&&(v.open=e[0]),t=new HS({props:v}),e[18](t),ts.push(()=>Uc(t,"open",h)),t.$on("SMUIMenuSurface:mount",e[7]),t.$on("SMUIList:mount",e[8]),t.$on("SMUIMenuSurface:opened",e[20]),t.$on("keydown",e[6]),t.$on("SMUIList:action",e[21]),{c(){xr(t.$$.fragment)},l(o){Yr(t.$$.fragment,o)},m(o,k){wr(t,o,k),r=!0},p(o,[k]){const O=k&546?fs(c,[k&32&&{use:o[5]},k&2&&{class:Mr({[o[1]]:!0,"mdc-menu":!0})},k&512&&Vr(o[9])]):{};k&4194304&&(O.$$scope={dirty:k,ctx:o}),!i&&k&1&&(i=!0,O.open=o[0],Nc(()=>i=!1)),t.$set(O)},i(o){r||(Pi(t.$$.fragment,o),r=!0)},o(o){Hi(t.$$.fragment,o),r=!1},d(o){e[18](null),Sr(t,o)}}}function jS(e,t,i){let r;const c=["use","class","open","isOpen","setOpen","setDefaultFocusState","getSelectedIndex","getMenuSurface","getElement"];let h=Fs(t,c),{$$slots:v={},$$scope:o}=t;const{closest:k}=Tv,O=Al(sl());let{use:j=[]}=t,{class:J=""}=t,{open:oe=!1}=t,se,be,qe,ke;Dl(()=>(i(3,be=new vS({addClassToElementAtIndex:(Me,Ze)=>{ke.addClassForElementIndex(Me,Ze)},removeClassFromElementAtIndex:(Me,Ze)=>{ke.removeClassForElementIndex(Me,Ze)},addAttributeToElementAtIndex:(Me,Ze,Fe)=>{ke.setAttributeForElementIndex(Me,Ze,Fe)},removeAttributeFromElementAtIndex:(Me,Ze)=>{ke.removeAttributeForElementIndex(Me,Ze)},getAttributeFromElementAtIndex:(Me,Ze)=>ke.getAttributeFromElementIndex(Me,Ze),elementContainsClass:(Me,Ze)=>Me.classList.contains(Ze),closeSurface:Me=>{qe.closeProgrammatic(Me),ho(Je(),"SMUIMenu:closedProgrammatically")},getElementIndex:Me=>ke.getOrderedList().map(Ze=>Ze.element).indexOf(Me),notifySelected:Me=>ho(Je(),"SMUIMenu:selected",{index:Me.index,item:ke.getOrderedList()[Me.index].element},void 0,!0),getMenuItemCount:()=>ke.items.length,focusItemAtIndex:Me=>ke.focusItemAtIndex(Me),focusListRoot:()=>"focus"in ke.element&&ke.element.focus(),isSelectableItemAtIndex:Me=>!!k(ke.getOrderedList()[Me].element,`.${o0.MENU_SELECTION_GROUP}`),getSelectedSiblingOfItemAtIndex:Me=>{const Ze=ke.getOrderedList(),Fe=k(Ze[Me].element,`.${o0.MENU_SELECTION_GROUP}`),vt=Fe==null?void 0:Fe.querySelector(`.${o0.MENU_SELECTED_LIST_ITEM}`);return vt?Ze.map(dt=>dt.element).indexOf(vt):-1}})),ho(Je(),"SMUIMenu:mount",be),be.init(),()=>{be.destroy()}));function Qe(Me){be&&be.handleKeydown(Me)}function We(Me){qe||(qe=Me.detail)}function ct(Me){ke||i(4,ke=Me.detail)}function St(){return oe}function yt(Me){i(0,oe=Me)}function xe(Me){be.setDefaultFocusState(Me)}function Gt(){return be.getSelectedIndex()}function Ve(){return se}function Je(){return se.getElement()}function et(Me){ts[Me?"unshift":"push"](()=>{se=Me,i(2,se)})}function lt(Me){oe=Me,i(0,oe)}const ut=()=>be&&be.handleMenuSurfaceOpened(),Ke=Me=>be&&be.handleItemAction(ke.getOrderedList()[Me.detail.index].element);return e.$$set=Me=>{t=Gn(Gn({},t),OA(Me)),i(9,h=Fs(t,c)),"use"in Me&&i(10,j=Me.use),"class"in Me&&i(1,J=Me.class),"open"in Me&&i(0,oe=Me.open),"$$scope"in Me&&i(22,o=Me.$$scope)},e.$$.update=()=>{e.$$.dirty&1024&&i(5,r=[O,...j])},[oe,J,se,be,ke,r,Qe,We,ct,h,j,St,yt,xe,Gt,Ve,Je,v,et,lt,ut,Ke,o]}class WS extends Ds{constructor(t){super(),Ls(this,t,jS,ZS,vs,{use:10,class:1,open:0,isOpen:11,setOpen:12,setDefaultFocusState:13,getSelectedIndex:14,getMenuSurface:15,getElement:16})}get isOpen(){return this.$$.ctx[11]}get setOpen(){return this.$$.ctx[12]}get setDefaultFocusState(){return this.$$.ctx[13]}get getSelectedIndex(){return this.$$.ctx[14]}get getMenuSurface(){return this.$$.ctx[15]}get getElement(){return this.$$.ctx[16]}}function YS(e){let t;const i=e[10].default,r=Ya(i,e,e[12],null);return{c(){r&&r.c()},l(c){r&&r.l(c)},m(c,h){r&&r.m(c,h),t=!0},p(c,h){r&&r.p&&(!t||h&4096)&&Xa(r,i,c,c[12],t?Ja(i,c[12],h,null):Ka(c[12]),null)},i(c){t||(Pi(r,c),t=!0)},o(c){Hi(r,c),t=!1},d(c){r&&r.d(c)}}}function XS(e){let t,i,r;const c=[{tag:e[3]},{use:[e[5],...e[0]]},{class:Mr({[e[1]]:!0,"mdc-button__label":e[6]==="button","mdc-fab__label":e[6]==="fab","mdc-tab__text-label":e[6]==="tab","mdc-image-list__label":e[6]==="image-list","mdc-snackbar__label":e[6]==="snackbar","mdc-banner__text":e[6]==="banner","mdc-segmented-button__label":e[6]==="segmented-button","mdc-data-table__pagination-rows-per-page-label":e[6]==="data-table:pagination","mdc-data-table__header-cell-label":e[6]==="data-table:sortable-header-cell"})},e[6]==="snackbar"?{"aria-atomic":"false"}:{},{tabindex:e[7]},e[8]];var h=e[2];function v(o,k){let O={$$slots:{default:[YS]},$$scope:{ctx:o}};if(k!==void 0&&k&491)O=fs(c,[k&8&&{tag:o[3]},k&33&&{use:[o[5],...o[0]]},k&66&&{class:Mr({[o[1]]:!0,"mdc-button__label":o[6]==="button","mdc-fab__label":o[6]==="fab","mdc-tab__text-label":o[6]==="tab","mdc-image-list__label":o[6]==="image-list","mdc-snackbar__label":o[6]==="snackbar","mdc-banner__text":o[6]==="banner","mdc-segmented-button__label":o[6]==="segmented-button","mdc-data-table__pagination-rows-per-page-label":o[6]==="data-table:pagination","mdc-data-table__header-cell-label":o[6]==="data-table:sortable-header-cell"})},k&64&&Vr(o[6]==="snackbar"?{"aria-atomic":"false"}:{}),k&128&&{tabindex:o[7]},k&256&&Vr(o[8])]);else for(let j=0;j<c.length;j+=1)O=Gn(O,c[j]);return{props:O}}return h&&(t=ac(h,v(e)),e[11](t)),{c(){t&&xr(t.$$.fragment),i=Rr()},l(o){t&&Yr(t.$$.fragment,o),i=Rr()},m(o,k){t&&wr(t,o,k),vn(o,i,k),r=!0},p(o,[k]){if(k&4&&h!==(h=o[2])){if(t){ia();const O=t;Hi(O.$$.fragment,1,0,()=>{Sr(O,1)}),na()}h?(t=ac(h,v(o,k)),o[11](t),xr(t.$$.fragment),Pi(t.$$.fragment,1),wr(t,i.parentNode,i)):t=null}else if(h){const O=k&491?fs(c,[k&8&&{tag:o[3]},k&33&&{use:[o[5],...o[0]]},k&66&&{class:Mr({[o[1]]:!0,"mdc-button__label":o[6]==="button","mdc-fab__label":o[6]==="fab","mdc-tab__text-label":o[6]==="tab","mdc-image-list__label":o[6]==="image-list","mdc-snackbar__label":o[6]==="snackbar","mdc-banner__text":o[6]==="banner","mdc-segmented-button__label":o[6]==="segmented-button","mdc-data-table__pagination-rows-per-page-label":o[6]==="data-table:pagination","mdc-data-table__header-cell-label":o[6]==="data-table:sortable-header-cell"})},k&64&&Vr(o[6]==="snackbar"?{"aria-atomic":"false"}:{}),k&128&&{tabindex:o[7]},k&256&&Vr(o[8])]):{};k&4096&&(O.$$scope={dirty:k,ctx:o}),t.$set(O)}},i(o){r||(t&&Pi(t.$$.fragment,o),r=!0)},o(o){t&&Hi(t.$$.fragment,o),r=!1},d(o){o&&li(i),e[11](null),t&&Sr(t,o)}}}function KS(e,t,i){const r=["use","class","component","tag","getElement"];let c=Fs(t,r),{$$slots:h={},$$scope:v}=t;const o=Al(sl());let{use:k=[]}=t,{class:O=""}=t,j,{component:J=oc}=t,{tag:oe=J===oc?"span":void 0}=t;const se=Bo("SMUI:label:context"),be=Bo("SMUI:label:tabindex");function qe(){return j.getElement()}function ke(Qe){ts[Qe?"unshift":"push"](()=>{j=Qe,i(4,j)})}return e.$$set=Qe=>{t=Gn(Gn({},t),OA(Qe)),i(8,c=Fs(t,r)),"use"in Qe&&i(0,k=Qe.use),"class"in Qe&&i(1,O=Qe.class),"component"in Qe&&i(2,J=Qe.component),"tag"in Qe&&i(3,oe=Qe.tag),"$$scope"in Qe&&i(12,v=Qe.$$scope)},[k,O,J,oe,j,o,se,be,c,qe,h,ke,v]}class JS extends Ds{constructor(t){super(),Ls(this,t,KS,XS,vs,{use:0,class:1,component:2,tag:3,getElement:9})}get getElement(){return this.$$.ctx[9]}}function $S(e){let t=e[1],i,r,c=e[1]&&P_(e);return{c(){c&&c.c(),i=Rr()},l(h){c&&c.l(h),i=Rr()},m(h,v){c&&c.m(h,v),vn(h,i,v),r=!0},p(h,v){h[1]?t?vs(t,h[1])?(c.d(1),c=P_(h),t=h[1],c.c(),c.m(i.parentNode,i)):c.p(h,v):(c=P_(h),t=h[1],c.c(),c.m(i.parentNode,i)):t&&(c.d(1),c=null,t=h[1])},i(h){r||(Pi(c,h),r=!0)},o(h){Hi(c,h),r=!1},d(h){h&&li(i),c&&c.d(h)}}}function eC(e){let t=e[1],i,r=e[1]&&D_(e);return{c(){r&&r.c(),i=Rr()},l(c){r&&r.l(c),i=Rr()},m(c,h){r&&r.m(c,h),vn(c,i,h)},p(c,h){c[1]?t?vs(t,c[1])?(r.d(1),r=D_(c),t=c[1],r.c(),r.m(i.parentNode,i)):r.p(c,h):(r=D_(c),t=c[1],r.c(),r.m(i.parentNode,i)):t&&(r.d(1),r=null,t=c[1])},i:_a,o:_a,d(c){c&&li(i),r&&r.d(c)}}}function tC(e){let t,i,r,c,h;const v=e[8].default,o=Ya(v,e,e[7],null);let k=[e[5]],O={};for(let j=0;j<k.length;j+=1)O=Gn(O,k[j]);return{c(){t=as("svg"),o&&o.c(),this.h()},l(j){t=os(j,"svg",{});var J=en(t);o&&o.l(J),J.forEach(li),this.h()},h(){zy(t,O)},m(j,J){vn(j,t,J),o&&o.m(t,null),e[9](t),r=!0,c||(h=[Ms(i=el.call(null,t,e[0])),Ms(e[4].call(null,t))],c=!0)},p(j,J){o&&o.p&&(!r||J&128)&&Xa(o,v,j,j[7],r?Ja(v,j[7],J,null):Ka(j[7]),null),zy(t,O=fs(k,[J&32&&j[5]])),i&&Jo(i.update)&&J&1&&i.update.call(null,j[0])},i(j){r||(Pi(o,j),r=!0)},o(j){Hi(o,j),r=!1},d(j){j&&li(t),o&&o.d(j),e[9](null),c=!1,Jl(h)}}}function P_(e){let t,i,r,c,h;const v=e[8].default,o=Ya(v,e,e[7],null);let k=[e[5]],O={};for(let j=0;j<k.length;j+=1)O=Gn(O,k[j]);return{c(){t=En(e[1]),o&&o.c(),this.h()},l(j){t=In(j,(e[1]||"null").toUpperCase(),{});var J=en(t);o&&o.l(J),J.forEach(li),this.h()},h(){pm(e[1])(t,O)},m(j,J){vn(j,t,J),o&&o.m(t,null),e[11](t),r=!0,c||(h=[Ms(i=el.call(null,t,e[0])),Ms(e[4].call(null,t))],c=!0)},p(j,J){o&&o.p&&(!r||J&128)&&Xa(o,v,j,j[7],r?Ja(v,j[7],J,null):Ka(j[7]),null),pm(j[1])(t,O=fs(k,[J&32&&j[5]])),i&&Jo(i.update)&&J&1&&i.update.call(null,j[0])},i(j){r||(Pi(o,j),r=!0)},o(j){Hi(o,j),r=!1},d(j){j&&li(t),o&&o.d(j),e[11](null),c=!1,Jl(h)}}}function D_(e){let t,i,r,c,h=[e[5]],v={};for(let o=0;o<h.length;o+=1)v=Gn(v,h[o]);return{c(){t=En(e[1]),this.h()},l(o){t=In(o,(e[1]||"null").toUpperCase(),{}),en(t).forEach(li),this.h()},h(){pm(e[1])(t,v)},m(o,k){vn(o,t,k),e[10](t),r||(c=[Ms(i=el.call(null,t,e[0])),Ms(e[4].call(null,t))],r=!0)},p(o,k){pm(o[1])(t,v=fs(h,[k&32&&o[5]])),i&&Jo(i.update)&&k&1&&i.update.call(null,o[0])},d(o){o&&li(t),e[10](null),r=!1,Jl(c)}}}function iC(e){let t,i,r,c;const h=[tC,eC,$S],v=[];function o(k,O){return k[1]==="svg"?0:k[3]?1:2}return t=o(e),i=v[t]=h[t](e),{c(){i.c(),r=Rr()},l(k){i.l(k),r=Rr()},m(k,O){v[t].m(k,O),vn(k,r,O),c=!0},p(k,[O]){let j=t;t=o(k),t===j?v[t].p(k,O):(ia(),Hi(v[j],1,1,()=>{v[j]=null}),na(),i=v[t],i?i.p(k,O):(i=v[t]=h[t](k),i.c()),Pi(i,1),i.m(r.parentNode,r))},i(k){c||(Pi(i),c=!0)},o(k){Hi(i),c=!1},d(k){k&&li(r),v[t].d(k)}}}function nC(e,t,i){let r;const c=["use","tag","getElement"];let h=Fs(t,c),{$$slots:v={},$$scope:o}=t,{use:k=[]}=t,{tag:O}=t;const j=Al(sl());let J;function oe(){return J}function se(ke){ts[ke?"unshift":"push"](()=>{J=ke,i(2,J)})}function be(ke){ts[ke?"unshift":"push"](()=>{J=ke,i(2,J)})}function qe(ke){ts[ke?"unshift":"push"](()=>{J=ke,i(2,J)})}return e.$$set=ke=>{t=Gn(Gn({},t),OA(ke)),i(5,h=Fs(t,c)),"use"in ke&&i(0,k=ke.use),"tag"in ke&&i(1,O=ke.tag),"$$scope"in ke&&i(7,o=ke.$$scope)},e.$$.update=()=>{e.$$.dirty&2&&i(3,r=["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr"].indexOf(O)>-1)},[k,O,J,r,j,h,oe,o,v,se,be,qe]}class oc extends Ds{constructor(t){super(),Ls(this,t,nC,iC,vs,{use:0,tag:1,getElement:6})}get getElement(){return this.$$.ctx[6]}}function rC(e){let t;const i=e[11].default,r=Ya(i,e,e[13],null);return{c(){r&&r.c()},l(c){r&&r.l(c)},m(c,h){r&&r.m(c,h),t=!0},p(c,h){r&&r.p&&(!t||h&8192)&&Xa(r,i,c,c[13],t?Ja(i,c[13],h,null):Ka(c[13]),null)},i(c){t||(Pi(r,c),t=!0)},o(c){Hi(r,c),t=!1},d(c){r&&r.d(c)}}}function sC(e){let t,i,r;const c=[{tag:e[3]},{use:[e[8],...e[0]]},{class:Mr({[e[1]]:!0,[e[6]]:!0,...e[5]})},e[7],e[9]];var h=e[2];function v(o,k){let O={$$slots:{default:[rC]},$$scope:{ctx:o}};if(k!==void 0&&k&1003)O=fs(c,[k&8&&{tag:o[3]},k&257&&{use:[o[8],...o[0]]},k&98&&{class:Mr({[o[1]]:!0,[o[6]]:!0,...o[5]})},k&128&&Vr(o[7]),k&512&&Vr(o[9])]);else for(let j=0;j<c.length;j+=1)O=Gn(O,c[j]);return{props:O}}return h&&(t=ac(h,v(e)),e[12](t)),{c(){t&&xr(t.$$.fragment),i=Rr()},l(o){t&&Yr(t.$$.fragment,o),i=Rr()},m(o,k){t&&wr(t,o,k),vn(o,i,k),r=!0},p(o,[k]){if(k&4&&h!==(h=o[2])){if(t){ia();const O=t;Hi(O.$$.fragment,1,0,()=>{Sr(O,1)}),na()}h?(t=ac(h,v(o,k)),o[12](t),xr(t.$$.fragment),Pi(t.$$.fragment,1),wr(t,i.parentNode,i)):t=null}else if(h){const O=k&1003?fs(c,[k&8&&{tag:o[3]},k&257&&{use:[o[8],...o[0]]},k&98&&{class:Mr({[o[1]]:!0,[o[6]]:!0,...o[5]})},k&128&&Vr(o[7]),k&512&&Vr(o[9])]):{};k&8192&&(O.$$scope={dirty:k,ctx:o}),t.$set(O)}},i(o){r||(t&&Pi(t.$$.fragment,o),r=!0)},o(o){t&&Hi(t.$$.fragment,o),r=!1},d(o){o&&li(i),e[12](null),t&&Sr(t,o)}}}const Oc={component:oc,tag:"div",class:"",classMap:{},contexts:{},props:{}};function aC(e,t,i){const r=["use","class","component","tag","getElement"];let c=Fs(t,r),{$$slots:h={},$$scope:v}=t,{use:o=[]}=t,{class:k=""}=t,O;const j=Oc.class,J={},oe=[],se=Oc.contexts,be=Oc.props;let{component:qe=Oc.component}=t,{tag:ke=qe===oc?Oc.tag:void 0}=t;Object.entries(Oc.classMap).forEach(([St,yt])=>{const xe=Bo(yt);xe&&"subscribe"in xe&&oe.push(xe.subscribe(Gt=>{i(5,J[St]=Gt,J)}))});const Qe=Al(sl());for(let St in se)se.hasOwnProperty(St)&&Za(St,se[St]);lc(()=>{for(const St of oe)St()});function We(){return O.getElement()}function ct(St){ts[St?"unshift":"push"](()=>{O=St,i(4,O)})}return e.$$set=St=>{t=Gn(Gn({},t),OA(St)),i(9,c=Fs(t,r)),"use"in St&&i(0,o=St.use),"class"in St&&i(1,k=St.class),"component"in St&&i(2,qe=St.component),"tag"in St&&i(3,ke=St.tag),"$$scope"in St&&i(13,v=St.$$scope)},[o,k,qe,ke,O,J,j,be,Qe,c,We,h,ct,v]}class oC extends Ds{constructor(t){super(),Ls(this,t,aC,sC,vs,{use:0,class:1,component:2,tag:3,getElement:10})}get getElement(){return this.$$.ctx[10]}}const eb=Object.assign({},Oc);function df(e){return new Proxy(oC,{construct:function(t,i){return Object.assign(Oc,eb,e),new t(...i)},get:function(t,i){return Object.assign(Oc,eb,e),t[i]}})}function AC(e){let t;const i=e[42].default,r=Ya(i,e,e[44],null);return{c(){r&&r.c()},l(c){r&&r.l(c)},m(c,h){r&&r.m(c,h),t=!0},p(c,h){r&&r.p&&(!t||h[1]&8192)&&Xa(r,i,c,c[44],t?Ja(i,c[44],h,null):Ka(c[44]),null)},i(c){t||(Pi(r,c),t=!0)},o(c){Hi(r,c),t=!1},d(c){r&&r.d(c)}}}function lC(e){let t,i,r;const c=[{tag:e[13]},{use:[e[16],...e[0]]},{class:Mr({[e[1]]:!0,"mdc-deprecated-list":!0,"mdc-deprecated-list--non-interactive":e[2],"mdc-deprecated-list--dense":e[3],"mdc-deprecated-list--textual-list":e[4],"mdc-deprecated-list--avatar-list":e[5]||e[17],"mdc-deprecated-list--icon-list":e[6],"mdc-deprecated-list--image-list":e[7],"mdc-deprecated-list--thumbnail-list":e[8],"mdc-deprecated-list--video-list":e[9],"mdc-deprecated-list--two-line":e[10],"smui-list--three-line":e[11]&&!e[10]})},{role:e[15]},e[25]];var h=e[12];function v(o,k){let O={$$slots:{default:[AC]},$$scope:{ctx:o}};if(k!==void 0&&k[0]&33796095)O=fs(c,[k[0]&8192&&{tag:o[13]},k[0]&65537&&{use:[o[16],...o[0]]},k[0]&135166&&{class:Mr({[o[1]]:!0,"mdc-deprecated-list":!0,"mdc-deprecated-list--non-interactive":o[2],"mdc-deprecated-list--dense":o[3],"mdc-deprecated-list--textual-list":o[4],"mdc-deprecated-list--avatar-list":o[5]||o[17],"mdc-deprecated-list--icon-list":o[6],"mdc-deprecated-list--image-list":o[7],"mdc-deprecated-list--thumbnail-list":o[8],"mdc-deprecated-list--video-list":o[9],"mdc-deprecated-list--two-line":o[10],"smui-list--three-line":o[11]&&!o[10]})},k[0]&32768&&{role:o[15]},k[0]&33554432&&Vr(o[25])]);else for(let j=0;j<c.length;j+=1)O=Gn(O,c[j]);return{props:O}}return h&&(t=ac(h,v(e)),e[43](t),t.$on("keydown",e[20]),t.$on("focusin",e[21]),t.$on("focusout",e[22]),t.$on("click",e[23]),t.$on("SMUIListItem:mount",e[18]),t.$on("SMUIListItem:unmount",e[19]),t.$on("SMUI:action",e[24])),{c(){t&&xr(t.$$.fragment),i=Rr()},l(o){t&&Yr(t.$$.fragment,o),i=Rr()},m(o,k){t&&wr(t,o,k),vn(o,i,k),r=!0},p(o,k){if(k[0]&4096&&h!==(h=o[12])){if(t){ia();const O=t;Hi(O.$$.fragment,1,0,()=>{Sr(O,1)}),na()}h?(t=ac(h,v(o,k)),o[43](t),t.$on("keydown",o[20]),t.$on("focusin",o[21]),t.$on("focusout",o[22]),t.$on("click",o[23]),t.$on("SMUIListItem:mount",o[18]),t.$on("SMUIListItem:unmount",o[19]),t.$on("SMUI:action",o[24]),xr(t.$$.fragment),Pi(t.$$.fragment,1),wr(t,i.parentNode,i)):t=null}else if(h){const O=k[0]&33796095?fs(c,[k[0]&8192&&{tag:o[13]},k[0]&65537&&{use:[o[16],...o[0]]},k[0]&135166&&{class:Mr({[o[1]]:!0,"mdc-deprecated-list":!0,"mdc-deprecated-list--non-interactive":o[2],"mdc-deprecated-list--dense":o[3],"mdc-deprecated-list--textual-list":o[4],"mdc-deprecated-list--avatar-list":o[5]||o[17],"mdc-deprecated-list--icon-list":o[6],"mdc-deprecated-list--image-list":o[7],"mdc-deprecated-list--thumbnail-list":o[8],"mdc-deprecated-list--video-list":o[9],"mdc-deprecated-list--two-line":o[10],"smui-list--three-line":o[11]&&!o[10]})},k[0]&32768&&{role:o[15]},k[0]&33554432&&Vr(o[25])]):{};k[1]&8192&&(O.$$scope={dirty:k,ctx:o}),t.$set(O)}},i(o){r||(t&&Pi(t.$$.fragment,o),r=!0)},o(o){t&&Hi(t.$$.fragment,o),r=!1},d(o){o&&li(i),e[43](null),t&&Sr(t,o)}}}function uC(e,t,i){const r=["use","class","nonInteractive","dense","textualList","avatarList","iconList","imageList","thumbnailList","videoList","twoLine","threeLine","vertical","wrapFocus","singleSelection","disabledItemsFocusable","selectedIndex","radioList","checkList","hasTypeahead","component","tag","layout","setEnabled","getTypeaheadInProgress","getSelectedIndex","getFocusedItemIndex","focusItemAtIndex","getElement"];let c=Fs(t,r),{$$slots:h={},$$scope:v}=t;var o;const{closest:k,matches:O}=Tv,j=Al(sl());let{use:J=[]}=t,{class:oe=""}=t,{nonInteractive:se=!1}=t,{dense:be=!1}=t,{textualList:qe=!1}=t,{avatarList:ke=!1}=t,{iconList:Qe=!1}=t,{imageList:We=!1}=t,{thumbnailList:ct=!1}=t,{videoList:St=!1}=t,{twoLine:yt=!1}=t,{threeLine:xe=!1}=t,{vertical:Gt=!0}=t,{wrapFocus:Ve=(o=Bo("SMUI:list:wrapFocus"))!==null&&o!==void 0?o:!1}=t,{singleSelection:Je=!1}=t,{disabledItemsFocusable:et=!1}=t,{selectedIndex:lt=-1}=t,{radioList:ut=!1}=t,{checkList:Ke=!1}=t,{hasTypeahead:Me=!1}=t,Ze,Fe,vt=[],dt=Bo("SMUI:list:role"),_t=Bo("SMUI:list:nav");const ei=new WeakMap;let di=Bo("SMUI:dialog:selection"),yi=Bo("SMUI:addLayoutListener"),Ti,{component:Vi=oc}=t,{tag:wi=Vi===oc?_t?"nav":"ul":void 0}=t;Za("SMUI:list:nonInteractive",se),Za("SMUI:separator:context","list"),dt||(Je?(dt="listbox",Za("SMUI:list:item:role","option")):ut?(dt="radiogroup",Za("SMUI:list:item:role","radio")):Ke?(dt="group",Za("SMUI:list:item:role","checkbox")):(dt="list",Za("SMUI:list:item:role",void 0))),yi&&(Ti=yi(ir)),Dl(()=>{i(41,Fe=new mS({addClassForElementIndex:oi,focusItemAtIndex:y,getAttributeForElementIndex:(K,ie)=>{var Ae,fe;return(fe=(Ae=Oi()[K])===null||Ae===void 0?void 0:Ae.getAttr(ie))!==null&&fe!==void 0?fe:null},getFocusedElementIndex:()=>document.activeElement?Oi().map(K=>K.element).indexOf(document.activeElement):-1,getListItemCount:()=>vt.length,getPrimaryTextAtIndex:ti,hasCheckboxAtIndex:K=>{var ie,Ae;return(Ae=(ie=Oi()[K])===null||ie===void 0?void 0:ie.hasCheckbox)!==null&&Ae!==void 0?Ae:!1},hasRadioAtIndex:K=>{var ie,Ae;return(Ae=(ie=Oi()[K])===null||ie===void 0?void 0:ie.hasRadio)!==null&&Ae!==void 0?Ae:!1},isCheckboxCheckedAtIndex:K=>{var ie;const Ae=Oi()[K];return(ie=(Ae==null?void 0:Ae.hasCheckbox)&&Ae.checked)!==null&&ie!==void 0?ie:!1},isFocusInsideList:()=>Ze!=null&&D()!==document.activeElement&&D().contains(document.activeElement),isRootFocused:()=>Ze!=null&&document.activeElement===D(),listItemAtIndexHasClass:zi,notifyAction:K=>{i(26,lt=K),Ze!=null&&ho(D(),"SMUIList:action",{index:K},void 0,!0)},notifySelectionChange:K=>{Ze!=null&&ho(D(),"SMUIList:selectionChange",{changedIndices:K})},removeClassForElementIndex:$i,setAttributeForElementIndex:ki,setCheckedCheckboxOrRadioAtIndex:(K,ie)=>{Oi()[K].checked=ie},setTabIndexForListItemChildren:(K,ie)=>{const Ae=Oi()[K];Array.prototype.forEach.call(Ae.element.querySelectorAll("button:not(:disabled), a"),ye=>{ye.setAttribute("tabindex",ie)})}}));const Q={get element(){return D()},get items(){return vt},get typeaheadInProgress(){return Fe.isTypeaheadInProgress()},typeaheadMatchItem(K,ie){return Fe.typeaheadMatchItem(K,ie,!0)},getOrderedList:Oi,focusItemAtIndex:y,addClassForElementIndex:oi,removeClassForElementIndex:$i,setAttributeForElementIndex:ki,removeAttributeForElementIndex:sn,getAttributeFromElementIndex:ar,getPrimaryTextAtIndex:ti};return ho(D(),"SMUIList:mount",Q),Fe.init(),Fe.layout(),()=>{Fe.destroy()}}),lc(()=>{Ti&&Ti()});function mi(Q){vt.push(Q.detail),ei.set(Q.detail.element,Q.detail),Je&&Q.detail.selected&&i(26,lt=Wi(Q.detail.element)),Q.stopPropagation()}function Wt(Q){var K;const ie=(K=Q.detail&&vt.indexOf(Q.detail))!==null&&K!==void 0?K:-1;ie!==-1&&(vt.splice(ie,1),vt=vt,ei.delete(Q.detail.element)),Q.stopPropagation()}function Di(Q){Fe&&Q.target&&Fe.handleKeydown(Q,Q.target.classList.contains("mdc-deprecated-list-item"),Wi(Q.target))}function $t(Q){Fe&&Q.target&&Fe.handleFocusIn(Wi(Q.target))}function Lt(Q){Fe&&Q.target&&Fe.handleFocusOut(Wi(Q.target))}function ni(Q){Fe&&Q.target&&Fe.handleClick(Wi(Q.target),!O(Q.target,'input[type="checkbox"], input[type="radio"]'),Q)}function si(Q){if(ut||Ke){const K=Wi(Q.target);if(K!==-1){const ie=Oi()[K];ie&&(ut&&!ie.checked||Ke)&&(O(Q.detail.target,'input[type="checkbox"], input[type="radio"]')||(ie.checked=!ie.checked),ie.activateRipple(),window.requestAnimationFrame(()=>{ie.deactivateRipple()}))}}}function Oi(){return Ze==null?[]:[...D().children].map(Q=>ei.get(Q)).filter(Q=>Q&&Q._smui_list_item_accessor)}function zi(Q,K){var ie;const Ae=Oi()[Q];return(ie=Ae&&Ae.hasClass(K))!==null&&ie!==void 0?ie:!1}function oi(Q,K){const ie=Oi()[Q];ie&&ie.addClass(K)}function $i(Q,K){const ie=Oi()[Q];ie&&ie.removeClass(K)}function ki(Q,K,ie){const Ae=Oi()[Q];Ae&&Ae.addAttr(K,ie)}function sn(Q,K){const ie=Oi()[Q];ie&&ie.removeAttr(K)}function ar(Q,K){const ie=Oi()[Q];return ie?ie.getAttr(K):null}function ti(Q){var K;const ie=Oi()[Q];return(K=ie&&ie.getPrimaryText())!==null&&K!==void 0?K:""}function Wi(Q){const K=k(Q,".mdc-deprecated-list-item, .mdc-deprecated-list");return K&&O(K,".mdc-deprecated-list-item")?Oi().map(ie=>ie==null?void 0:ie.element).indexOf(K):-1}function ir(){return Fe.layout()}function gn(Q,K){return Fe.setEnabled(Q,K)}function kn(){return Fe.isTypeaheadInProgress()}function an(){return Fe.getSelectedIndex()}function d(){return Fe.getFocusedItemIndex()}function y(Q){const K=Oi()[Q];K&&"focus"in K.element&&K.element.focus()}function D(){return Ze.getElement()}function U(Q){ts[Q?"unshift":"push"](()=>{Ze=Q,i(14,Ze)})}return e.$$set=Q=>{t=Gn(Gn({},t),OA(Q)),i(25,c=Fs(t,r)),"use"in Q&&i(0,J=Q.use),"class"in Q&&i(1,oe=Q.class),"nonInteractive"in Q&&i(2,se=Q.nonInteractive),"dense"in Q&&i(3,be=Q.dense),"textualList"in Q&&i(4,qe=Q.textualList),"avatarList"in Q&&i(5,ke=Q.avatarList),"iconList"in Q&&i(6,Qe=Q.iconList),"imageList"in Q&&i(7,We=Q.imageList),"thumbnailList"in Q&&i(8,ct=Q.thumbnailList),"videoList"in Q&&i(9,St=Q.videoList),"twoLine"in Q&&i(10,yt=Q.twoLine),"threeLine"in Q&&i(11,xe=Q.threeLine),"vertical"in Q&&i(27,Gt=Q.vertical),"wrapFocus"in Q&&i(28,Ve=Q.wrapFocus),"singleSelection"in Q&&i(29,Je=Q.singleSelection),"disabledItemsFocusable"in Q&&i(30,et=Q.disabledItemsFocusable),"selectedIndex"in Q&&i(26,lt=Q.selectedIndex),"radioList"in Q&&i(31,ut=Q.radioList),"checkList"in Q&&i(32,Ke=Q.checkList),"hasTypeahead"in Q&&i(33,Me=Q.hasTypeahead),"component"in Q&&i(12,Vi=Q.component),"tag"in Q&&i(13,wi=Q.tag),"$$scope"in Q&&i(44,v=Q.$$scope)},e.$$.update=()=>{e.$$.dirty[0]&134217728|e.$$.dirty[1]&1024&&Fe&&Fe.setVerticalOrientation(Gt),e.$$.dirty[0]&268435456|e.$$.dirty[1]&1024&&Fe&&Fe.setWrapFocus(Ve),e.$$.dirty[1]&1028&&Fe&&Fe.setHasTypeahead(Me),e.$$.dirty[0]&536870912|e.$$.dirty[1]&1024&&Fe&&Fe.setSingleSelection(Je),e.$$.dirty[0]&1073741824|e.$$.dirty[1]&1024&&Fe&&Fe.setDisabledItemsFocusable(et),e.$$.dirty[0]&603979776|e.$$.dirty[1]&1024&&Fe&&Je&&an()!==lt&&Fe.setSelectedIndex(lt)},[J,oe,se,be,qe,ke,Qe,We,ct,St,yt,xe,Vi,wi,Ze,dt,j,di,mi,Wt,Di,$t,Lt,ni,si,c,lt,Gt,Ve,Je,et,ut,Ke,Me,ir,gn,kn,an,d,y,D,Fe,h,U,v]}class cC extends Ds{constructor(t){super(),Ls(this,t,uC,lC,vs,{use:0,class:1,nonInteractive:2,dense:3,textualList:4,avatarList:5,iconList:6,imageList:7,thumbnailList:8,videoList:9,twoLine:10,threeLine:11,vertical:27,wrapFocus:28,singleSelection:29,disabledItemsFocusable:30,selectedIndex:26,radioList:31,checkList:32,hasTypeahead:33,component:12,tag:13,layout:34,setEnabled:35,getTypeaheadInProgress:36,getSelectedIndex:37,getFocusedItemIndex:38,focusItemAtIndex:39,getElement:40},null,[-1,-1])}get layout(){return this.$$.ctx[34]}get setEnabled(){return this.$$.ctx[35]}get getTypeaheadInProgress(){return this.$$.ctx[36]}get getSelectedIndex(){return this.$$.ctx[37]}get getFocusedItemIndex(){return this.$$.ctx[38]}get focusItemAtIndex(){return this.$$.ctx[39]}get getElement(){return this.$$.ctx[40]}}function tb(e){let t;return{c(){t=En("span"),this.h()},l(i){t=In(i,"SPAN",{class:!0}),en(t).forEach(li),this.h()},h(){vi(t,"class","mdc-deprecated-list-item__ripple")},m(i,r){vn(i,t,r)},d(i){i&&li(t)}}}function hC(e){let t,i,r=e[7]&&tb();const c=e[34].default,h=Ya(c,e,e[37],null);return{c(){r&&r.c(),t=Rr(),h&&h.c()},l(v){r&&r.l(v),t=Rr(),h&&h.l(v)},m(v,o){r&&r.m(v,o),vn(v,t,o),h&&h.m(v,o),i=!0},p(v,o){v[7]?r||(r=tb(),r.c(),r.m(t.parentNode,t)):r&&(r.d(1),r=null),h&&h.p&&(!i||o[1]&64)&&Xa(h,c,v,v[37],i?Ja(c,v[37],o,null):Ka(v[37]),null)},i(v){i||(Pi(h,v),i=!0)},o(v){Hi(h,v),i=!1},d(v){v&&li(t),r&&r.d(v),h&&h.d(v)}}}function fC(e){let t,i,r;const c=[{tag:e[14]},{use:[...e[6]?[]:[[$h,{ripple:!e[16],unbounded:!1,color:(e[1]||e[0])&&e[5]==null?"primary":e[5],disabled:e[10],addClass:e[24],removeClass:e[25],addStyle:e[26]}]],e[22],...e[2]]},{class:Mr({[e[3]]:!0,"mdc-deprecated-list-item":!e[8],"mdc-deprecated-list-item__wrapper":e[8],"mdc-deprecated-list-item--activated":e[1],"mdc-deprecated-list-item--selected":e[0],"mdc-deprecated-list-item--disabled":e[10],"mdc-menu-item--selected":!e[23]&&e[9]==="menuitem"&&e[0],"smui-menu-item--non-interactive":e[6],...e[18]})},{style:Object.entries(e[19]).map(L_).concat([e[4]]).join(" ")},e[23]&&e[1]?{"aria-current":"page"}:{},!e[23]||e[8]?{role:e[9]}:{},!e[23]&&e[9]==="option"?{"aria-selected":e[0]?"true":"false"}:{},!e[23]&&(e[9]==="radio"||e[9]==="checkbox")?{"aria-checked":e[16]&&e[16].checked?"true":"false"}:{},e[23]?{}:{"aria-disabled":e[10]?"true":"false"},{"data-menu-item-skip-restore-focus":e[11]||void 0},{tabindex:e[21]},{href:e[12]},e[20],e[29]];var h=e[13];function v(o,k){let O={$$slots:{default:[hC]},$$scope:{ctx:o}};if(k!==void 0&&k[0]&670916479)O=fs(c,[k[0]&16384&&{tag:o[14]},k[0]&121701479&&{use:[...o[6]?[]:[[$h,{ripple:!o[16],unbounded:!1,color:(o[1]||o[0])&&o[5]==null?"primary":o[5],disabled:o[10],addClass:o[24],removeClass:o[25],addStyle:o[26]}]],o[22],...o[2]]},k[0]&8652619&&{class:Mr({[o[3]]:!0,"mdc-deprecated-list-item":!o[8],"mdc-deprecated-list-item__wrapper":o[8],"mdc-deprecated-list-item--activated":o[1],"mdc-deprecated-list-item--selected":o[0],"mdc-deprecated-list-item--disabled":o[10],"mdc-menu-item--selected":!o[23]&&o[9]==="menuitem"&&o[0],"smui-menu-item--non-interactive":o[6],...o[18]})},k[0]&524304&&{style:Object.entries(o[19]).map(L_).concat([o[4]]).join(" ")},k[0]&8388610&&Vr(o[23]&&o[1]?{"aria-current":"page"}:{}),k[0]&8389376&&Vr(!o[23]||o[8]?{role:o[9]}:{}),k[0]&8389121&&Vr(!o[23]&&o[9]==="option"?{"aria-selected":o[0]?"true":"false"}:{}),k[0]&8454656&&Vr(!o[23]&&(o[9]==="radio"||o[9]==="checkbox")?{"aria-checked":o[16]&&o[16].checked?"true":"false"}:{}),k[0]&8389632&&Vr(o[23]?{}:{"aria-disabled":o[10]?"true":"false"}),k[0]&2048&&{"data-menu-item-skip-restore-focus":o[11]||void 0},k[0]&2097152&&{tabindex:o[21]},k[0]&4096&&{href:o[12]},k[0]&1048576&&Vr(o[20]),k[0]&536870912&&Vr(o[29])]);else for(let j=0;j<c.length;j+=1)O=Gn(O,c[j]);return{props:O}}return h&&(t=ac(h,v(e)),e[35](t),t.$on("click",e[15]),t.$on("keydown",e[27]),t.$on("SMUIGenericInput:mount",e[28]),t.$on("SMUIGenericInput:unmount",e[36])),{c(){t&&xr(t.$$.fragment),i=Rr()},l(o){t&&Yr(t.$$.fragment,o),i=Rr()},m(o,k){t&&wr(t,o,k),vn(o,i,k),r=!0},p(o,k){if(k[0]&8192&&h!==(h=o[13])){if(t){ia();const O=t;Hi(O.$$.fragment,1,0,()=>{Sr(O,1)}),na()}h?(t=ac(h,v(o,k)),o[35](t),t.$on("click",o[15]),t.$on("keydown",o[27]),t.$on("SMUIGenericInput:mount",o[28]),t.$on("SMUIGenericInput:unmount",o[36]),xr(t.$$.fragment),Pi(t.$$.fragment,1),wr(t,i.parentNode,i)):t=null}else if(h){const O=k[0]&670916479?fs(c,[k[0]&16384&&{tag:o[14]},k[0]&121701479&&{use:[...o[6]?[]:[[$h,{ripple:!o[16],unbounded:!1,color:(o[1]||o[0])&&o[5]==null?"primary":o[5],disabled:o[10],addClass:o[24],removeClass:o[25],addStyle:o[26]}]],o[22],...o[2]]},k[0]&8652619&&{class:Mr({[o[3]]:!0,"mdc-deprecated-list-item":!o[8],"mdc-deprecated-list-item__wrapper":o[8],"mdc-deprecated-list-item--activated":o[1],"mdc-deprecated-list-item--selected":o[0],"mdc-deprecated-list-item--disabled":o[10],"mdc-menu-item--selected":!o[23]&&o[9]==="menuitem"&&o[0],"smui-menu-item--non-interactive":o[6],...o[18]})},k[0]&524304&&{style:Object.entries(o[19]).map(L_).concat([o[4]]).join(" ")},k[0]&8388610&&Vr(o[23]&&o[1]?{"aria-current":"page"}:{}),k[0]&8389376&&Vr(!o[23]||o[8]?{role:o[9]}:{}),k[0]&8389121&&Vr(!o[23]&&o[9]==="option"?{"aria-selected":o[0]?"true":"false"}:{}),k[0]&8454656&&Vr(!o[23]&&(o[9]==="radio"||o[9]==="checkbox")?{"aria-checked":o[16]&&o[16].checked?"true":"false"}:{}),k[0]&8389632&&Vr(o[23]?{}:{"aria-disabled":o[10]?"true":"false"}),k[0]&2048&&{"data-menu-item-skip-restore-focus":o[11]||void 0},k[0]&2097152&&{tabindex:o[21]},k[0]&4096&&{href:o[12]},k[0]&1048576&&Vr(o[20]),k[0]&536870912&&Vr(o[29])]):{};k[0]&128|k[1]&64&&(O.$$scope={dirty:k,ctx:o}),t.$set(O)}},i(o){r||(t&&Pi(t.$$.fragment,o),r=!0)},o(o){t&&Hi(t.$$.fragment,o),r=!1},d(o){o&&li(i),e[35](null),t&&Sr(t,o)}}}let dC=0;const L_=([e,t])=>`${e}: ${t};`;function pC(e,t,i){let r;const c=["use","class","style","color","nonInteractive","ripple","wrapper","activated","role","selected","disabled","skipRestoreFocus","tabindex","inputId","href","component","tag","action","getPrimaryText","getElement"];let h=Fs(t,c),{$$slots:v={},$$scope:o}=t;var k;const O=Al(sl());let j=()=>{};function J(oi){return oi===j}let{use:oe=[]}=t,{class:se=""}=t,{style:be=""}=t,{color:qe=void 0}=t,{nonInteractive:ke=(k=Bo("SMUI:list:nonInteractive"))!==null&&k!==void 0?k:!1}=t;Za("SMUI:list:nonInteractive",void 0);let{ripple:Qe=!ke}=t,{wrapper:We=!1}=t,{activated:ct=!1}=t,{role:St=We?"presentation":Bo("SMUI:list:item:role")}=t;Za("SMUI:list:item:role",void 0);let{selected:yt=!1}=t,{disabled:xe=!1}=t,{skipRestoreFocus:Gt=!1}=t,{tabindex:Ve=j}=t,{inputId:Je="SMUI-form-field-list-"+dC++}=t,{href:et=void 0}=t,lt,ut={},Ke={},Me={},Ze,Fe,vt=Bo("SMUI:list:item:nav"),{component:dt=oc}=t,{tag:_t=dt===oc?vt?et?"a":"span":"li":void 0}=t;Za("SMUI:generic:input:props",{id:Je}),Za("SMUI:separator:context",void 0),Dl(()=>{if(!yt&&!ke){let $i=!0,ki=lt.getElement();for(;ki.previousSibling;)if(ki=ki.previousSibling,ki.nodeType===1&&ki.classList.contains("mdc-deprecated-list-item")&&!ki.classList.contains("mdc-deprecated-list-item--disabled")){$i=!1;break}$i&&(Fe=window.requestAnimationFrame(()=>Wt(ki)))}const oi={_smui_list_item_accessor:!0,get element(){return si()},get selected(){return yt},set selected($i){i(0,yt=$i)},hasClass:ei,addClass:di,removeClass:yi,getAttr:Vi,addAttr:wi,removeAttr:mi,getPrimaryText:ni,get checked(){var $i;return($i=Ze&&Ze.checked)!==null&&$i!==void 0?$i:!1},set checked($i){Ze&&i(16,Ze.checked=!!$i,Ze)},get hasCheckbox(){return!!(Ze&&"_smui_checkbox_accessor"in Ze)},get hasRadio(){return!!(Ze&&"_smui_radio_accessor"in Ze)},activateRipple(){Ze&&Ze.activateRipple()},deactivateRipple(){Ze&&Ze.deactivateRipple()},getValue(){return h.value},action:Lt,get tabindex(){return r},set tabindex($i){i(30,Ve=$i)},get disabled(){return xe},get activated(){return ct},set activated($i){i(1,ct=$i)}};return ho(si(),"SMUIListItem:mount",oi),()=>{ho(si(),"SMUIListItem:unmount",oi)}}),lc(()=>{Fe&&window.cancelAnimationFrame(Fe)});function ei(oi){return oi in ut?ut[oi]:si().classList.contains(oi)}function di(oi){ut[oi]||i(18,ut[oi]=!0,ut)}function yi(oi){(!(oi in ut)||ut[oi])&&i(18,ut[oi]=!1,ut)}function Ti(oi,$i){Ke[oi]!=$i&&($i===""||$i==null?(delete Ke[oi],i(19,Ke)):i(19,Ke[oi]=$i,Ke))}function Vi(oi){var $i;return oi in Me?($i=Me[oi])!==null&&$i!==void 0?$i:null:si().getAttribute(oi)}function wi(oi,$i){Me[oi]!==$i&&i(20,Me[oi]=$i,Me)}function mi(oi){(!(oi in Me)||Me[oi]!=null)&&i(20,Me[oi]=void 0,Me)}function Wt(oi){let $i=!0;for(;oi.nextElementSibling;)if(oi=oi.nextElementSibling,oi.nodeType===1&&oi.classList.contains("mdc-deprecated-list-item")){const ki=oi.attributes.getNamedItem("tabindex");if(ki&&ki.value==="0"){$i=!1;break}}$i&&i(21,r=0)}function Di(oi){const $i=oi.key==="Enter",ki=oi.key==="Space";($i||ki)&&Lt(oi)}function $t(oi){("_smui_checkbox_accessor"in oi.detail||"_smui_radio_accessor"in oi.detail)&&i(16,Ze=oi.detail)}function Lt(oi){xe||ho(si(),"SMUI:action",oi)}function ni(){var oi,$i,ki;const sn=si(),ar=sn.querySelector(".mdc-deprecated-list-item__primary-text");if(ar)return(oi=ar.textContent)!==null&&oi!==void 0?oi:"";const ti=sn.querySelector(".mdc-deprecated-list-item__text");return ti?($i=ti.textContent)!==null&&$i!==void 0?$i:"":(ki=sn.textContent)!==null&&ki!==void 0?ki:""}function si(){return lt.getElement()}function Oi(oi){ts[oi?"unshift":"push"](()=>{lt=oi,i(17,lt)})}const zi=()=>i(16,Ze=void 0);return e.$$set=oi=>{t=Gn(Gn({},t),OA(oi)),i(29,h=Fs(t,c)),"use"in oi&&i(2,oe=oi.use),"class"in oi&&i(3,se=oi.class),"style"in oi&&i(4,be=oi.style),"color"in oi&&i(5,qe=oi.color),"nonInteractive"in oi&&i(6,ke=oi.nonInteractive),"ripple"in oi&&i(7,Qe=oi.ripple),"wrapper"in oi&&i(8,We=oi.wrapper),"activated"in oi&&i(1,ct=oi.activated),"role"in oi&&i(9,St=oi.role),"selected"in oi&&i(0,yt=oi.selected),"disabled"in oi&&i(10,xe=oi.disabled),"skipRestoreFocus"in oi&&i(11,Gt=oi.skipRestoreFocus),"tabindex"in oi&&i(30,Ve=oi.tabindex),"inputId"in oi&&i(31,Je=oi.inputId),"href"in oi&&i(12,et=oi.href),"component"in oi&&i(13,dt=oi.component),"tag"in oi&&i(14,_t=oi.tag),"$$scope"in oi&&i(37,o=oi.$$scope)},e.$$.update=()=>{e.$$.dirty[0]&1073808449&&i(21,r=J(Ve)?!ke&&!xe&&(yt||Ze&&Ze.checked)?0:-1:Ve)},[yt,ct,oe,se,be,qe,ke,Qe,We,St,xe,Gt,et,dt,_t,Lt,Ze,lt,ut,Ke,Me,r,O,vt,di,yi,Ti,Di,$t,h,Ve,Je,ni,si,v,Oi,zi,o]}class gC extends Ds{constructor(t){super(),Ls(this,t,pC,fC,vs,{use:2,class:3,style:4,color:5,nonInteractive:6,ripple:7,wrapper:8,activated:1,role:9,selected:0,disabled:10,skipRestoreFocus:11,tabindex:30,inputId:31,href:12,component:13,tag:14,action:15,getPrimaryText:32,getElement:33},null,[-1,-1])}get action(){return this.$$.ctx[15]}get getPrimaryText(){return this.$$.ctx[32]}get getElement(){return this.$$.ctx[33]}}df({class:"mdc-deprecated-list-item__text",tag:"span"});df({class:"mdc-deprecated-list-item__primary-text",tag:"span"});df({class:"mdc-deprecated-list-item__secondary-text",tag:"span"});function mC(e){let t,i,r,c,h,v;const o=e[8].default,k=Ya(o,e,e[7],null);let O=[{class:i=Mr({[e[1]]:!0,"mdc-deprecated-list-item__graphic":!0,"mdc-menu__selection-group-icon":e[4]})},e[5]],j={};for(let J=0;J<O.length;J+=1)j=Gn(j,O[J]);return{c(){t=En("span"),k&&k.c(),this.h()},l(J){t=In(J,"SPAN",{class:!0});var oe=en(t);k&&k.l(oe),oe.forEach(li),this.h()},h(){ca(t,j)},m(J,oe){vn(J,t,oe),k&&k.m(t,null),e[9](t),c=!0,h||(v=[Ms(r=el.call(null,t,e[0])),Ms(e[3].call(null,t))],h=!0)},p(J,[oe]){k&&k.p&&(!c||oe&128)&&Xa(k,o,J,J[7],c?Ja(o,J[7],oe,null):Ka(J[7]),null),ca(t,j=fs(O,[(!c||oe&2&&i!==(i=Mr({[J[1]]:!0,"mdc-deprecated-list-item__graphic":!0,"mdc-menu__selection-group-icon":J[4]})))&&{class:i},oe&32&&J[5]])),r&&Jo(r.update)&&oe&1&&r.update.call(null,J[0])},i(J){c||(Pi(k,J),c=!0)},o(J){Hi(k,J),c=!1},d(J){J&&li(t),k&&k.d(J),e[9](null),h=!1,Jl(v)}}}function _C(e,t,i){const r=["use","class","getElement"];let c=Fs(t,r),{$$slots:h={},$$scope:v}=t;const o=Al(sl());let{use:k=[]}=t,{class:O=""}=t,j,J=Bo("SMUI:list:graphic:menu-selection-group");function oe(){return j}function se(be){ts[be?"unshift":"push"](()=>{j=be,i(2,j)})}return e.$$set=be=>{t=Gn(Gn({},t),OA(be)),i(5,c=Fs(t,r)),"use"in be&&i(0,k=be.use),"class"in be&&i(1,O=be.class),"$$scope"in be&&i(7,v=be.$$scope)},[k,O,j,o,J,c,oe,v,h,se]}class vC extends Ds{constructor(t){super(),Ls(this,t,_C,mC,vs,{use:0,class:1,getElement:6})}get getElement(){return this.$$.ctx[6]}}df({class:"mdc-deprecated-list-item__meta",tag:"span"});df({class:"mdc-deprecated-list-group",tag:"div"});df({class:"mdc-deprecated-list-group__subheader",tag:"h3"});df({class:"mdc-menu__selection-group-icon",component:vC});function yC(e){let t,i,r,c,h,v,o,k;const O=e[22].default,j=Ya(O,e,e[21],null);let J=[{class:i=Mr({[e[3]]:!0,"mdc-floating-label":!0,"mdc-floating-label--float-above":e[0],"mdc-floating-label--required":e[1],...e[8]})},{style:r=Object.entries(e[9]).map(nb).concat([e[4]]).join(" ")},{for:c=e[5]||(e[11]?e[11].id:void 0)},e[12]],oe={};for(let se=0;se<J.length;se+=1)oe=Gn(oe,J[se]);return{c(){t=En("label"),j&&j.c(),this.h()},l(se){t=In(se,"LABEL",{class:!0,style:!0,for:!0});var be=en(t);j&&j.l(be),be.forEach(li),this.h()},h(){ca(t,oe)},m(se,be){vn(se,t,be),j&&j.m(t,null),e[24](t),v=!0,o||(k=[Ms(h=el.call(null,t,e[2])),Ms(e[10].call(null,t))],o=!0)},p(se,be){j&&j.p&&(!v||be&2097152)&&Xa(j,O,se,se[21],v?Ja(O,se[21],be,null):Ka(se[21]),null),ca(t,oe=fs(J,[(!v||be&267&&i!==(i=Mr({[se[3]]:!0,"mdc-floating-label":!0,"mdc-floating-label--float-above":se[0],"mdc-floating-label--required":se[1],...se[8]})))&&{class:i},(!v||be&528&&r!==(r=Object.entries(se[9]).map(nb).concat([se[4]]).join(" ")))&&{style:r},(!v||be&32&&c!==(c=se[5]||(se[11]?se[11].id:void 0)))&&{for:c},be&4096&&se[12]])),h&&Jo(h.update)&&be&4&&h.update.call(null,se[2])},i(se){v||(Pi(j,se),v=!0)},o(se){Hi(j,se),v=!1},d(se){se&&li(t),j&&j.d(se),e[24](null),o=!1,Jl(k)}}}function bC(e){let t,i,r,c,h,v,o;const k=e[22].default,O=Ya(k,e,e[21],null);let j=[{class:i=Mr({[e[3]]:!0,"mdc-floating-label":!0,"mdc-floating-label--float-above":e[0],"mdc-floating-label--required":e[1],...e[8]})},{style:r=Object.entries(e[9]).map(ib).concat([e[4]]).join(" ")},e[12]],J={};for(let oe=0;oe<j.length;oe+=1)J=Gn(J,j[oe]);return{c(){t=En("span"),O&&O.c(),this.h()},l(oe){t=In(oe,"SPAN",{class:!0,style:!0});var se=en(t);O&&O.l(se),se.forEach(li),this.h()},h(){ca(t,J)},m(oe,se){vn(oe,t,se),O&&O.m(t,null),e[23](t),h=!0,v||(o=[Ms(c=el.call(null,t,e[2])),Ms(e[10].call(null,t))],v=!0)},p(oe,se){O&&O.p&&(!h||se&2097152)&&Xa(O,k,oe,oe[21],h?Ja(k,oe[21],se,null):Ka(oe[21]),null),ca(t,J=fs(j,[(!h||se&267&&i!==(i=Mr({[oe[3]]:!0,"mdc-floating-label":!0,"mdc-floating-label--float-above":oe[0],"mdc-floating-label--required":oe[1],...oe[8]})))&&{class:i},(!h||se&528&&r!==(r=Object.entries(oe[9]).map(ib).concat([oe[4]]).join(" ")))&&{style:r},se&4096&&oe[12]])),c&&Jo(c.update)&&se&4&&c.update.call(null,oe[2])},i(oe){h||(Pi(O,oe),h=!0)},o(oe){Hi(O,oe),h=!1},d(oe){oe&&li(t),O&&O.d(oe),e[23](null),v=!1,Jl(o)}}}function xC(e){let t,i,r,c;const h=[bC,yC],v=[];function o(k,O){return k[6]?0:1}return t=o(e),i=v[t]=h[t](e),{c(){i.c(),r=Rr()},l(k){i.l(k),r=Rr()},m(k,O){v[t].m(k,O),vn(k,r,O),c=!0},p(k,[O]){let j=t;t=o(k),t===j?v[t].p(k,O):(ia(),Hi(v[j],1,1,()=>{v[j]=null}),na(),i=v[t],i?i.p(k,O):(i=v[t]=h[t](k),i.c()),Pi(i,1),i.m(r.parentNode,r))},i(k){c||(Pi(i),c=!0)},o(k){Hi(i),c=!1},d(k){k&&li(r),v[t].d(k)}}}const ib=([e,t])=>`${e}: ${t};`,nb=([e,t])=>`${e}: ${t};`;function wC(e,t,i){const r=["use","class","style","for","floatAbove","required","wrapped","shake","float","setRequired","getWidth","getElement"];let c=Fs(t,r),{$$slots:h={},$$scope:v}=t;var o;const k=Al(sl());let{use:O=[]}=t,{class:j=""}=t,{style:J=""}=t,{for:oe=void 0}=t,{floatAbove:se=!1}=t,{required:be=!1}=t,{wrapped:qe=!1}=t,ke,Qe,We={},ct={},St=(o=Bo("SMUI:generic:input:props"))!==null&&o!==void 0?o:{},yt=se,xe=be;Dl(()=>{i(18,Qe=new aS({addClass:Gt,removeClass:Ve,getWidth:()=>{var _t,ei;const di=Ze(),yi=di.cloneNode(!0);(_t=di.parentNode)===null||_t===void 0||_t.appendChild(yi),yi.classList.add("smui-floating-label--remove-transition"),yi.classList.add("smui-floating-label--force-size"),yi.classList.remove("mdc-floating-label--float-above");const Ti=yi.scrollWidth;return(ei=di.parentNode)===null||ei===void 0||ei.removeChild(yi),Ti},registerInteractionHandler:(_t,ei)=>Ze().addEventListener(_t,ei),deregisterInteractionHandler:(_t,ei)=>Ze().removeEventListener(_t,ei)}));const dt={get element(){return Ze()},addStyle:Je,removeStyle:et};return ho(ke,"SMUIFloatingLabel:mount",dt),Qe.init(),()=>{ho(ke,"SMUIFloatingLabel:unmount",dt),Qe.destroy()}});function Gt(dt){We[dt]||i(8,We[dt]=!0,We)}function Ve(dt){(!(dt in We)||We[dt])&&i(8,We[dt]=!1,We)}function Je(dt,_t){ct[dt]!=_t&&(_t===""||_t==null?(delete ct[dt],i(9,ct)):i(9,ct[dt]=_t,ct))}function et(dt){dt in ct&&(delete ct[dt],i(9,ct))}function lt(dt){Qe.shake(dt)}function ut(dt){i(0,se=dt)}function Ke(dt){i(1,be=dt)}function Me(){return Qe.getWidth()}function Ze(){return ke}function Fe(dt){ts[dt?"unshift":"push"](()=>{ke=dt,i(7,ke)})}function vt(dt){ts[dt?"unshift":"push"](()=>{ke=dt,i(7,ke)})}return e.$$set=dt=>{t=Gn(Gn({},t),OA(dt)),i(12,c=Fs(t,r)),"use"in dt&&i(2,O=dt.use),"class"in dt&&i(3,j=dt.class),"style"in dt&&i(4,J=dt.style),"for"in dt&&i(5,oe=dt.for),"floatAbove"in dt&&i(0,se=dt.floatAbove),"required"in dt&&i(1,be=dt.required),"wrapped"in dt&&i(6,qe=dt.wrapped),"$$scope"in dt&&i(21,v=dt.$$scope)},e.$$.update=()=>{e.$$.dirty&786433&&Qe&&yt!==se&&(i(19,yt=se),Qe.float(se)),e.$$.dirty&1310722&&Qe&&xe!==be&&(i(20,xe=be),Qe.setRequired(be))},[se,be,O,j,J,oe,qe,ke,We,ct,k,St,c,lt,ut,Ke,Me,Ze,Qe,yt,xe,v,h,Fe,vt]}class f3 extends Ds{constructor(t){super(),Ls(this,t,wC,xC,vs,{use:2,class:3,style:4,for:5,floatAbove:0,required:1,wrapped:6,shake:13,float:14,setRequired:15,getWidth:16,getElement:17})}get shake(){return this.$$.ctx[13]}get float(){return this.$$.ctx[14]}get setRequired(){return this.$$.ctx[15]}get getWidth(){return this.$$.ctx[16]}get getElement(){return this.$$.ctx[17]}}function SC(e){let t,i,r,c,h,v,o=[{class:i=Mr({[e[1]]:!0,"mdc-line-ripple":!0,"mdc-line-ripple--active":e[3],...e[5]})},{style:r=Object.entries(e[6]).map(rb).concat([e[2]]).join(" ")},e[8]],k={};for(let O=0;O<o.length;O+=1)k=Gn(k,o[O]);return{c(){t=En("div"),this.h()},l(O){t=In(O,"DIV",{class:!0,style:!0}),en(t).forEach(li),this.h()},h(){ca(t,k)},m(O,j){vn(O,t,j),e[13](t),h||(v=[Ms(c=el.call(null,t,e[0])),Ms(e[7].call(null,t))],h=!0)},p(O,[j]){ca(t,k=fs(o,[j&42&&i!==(i=Mr({[O[1]]:!0,"mdc-line-ripple":!0,"mdc-line-ripple--active":O[3],...O[5]}))&&{class:i},j&68&&r!==(r=Object.entries(O[6]).map(rb).concat([O[2]]).join(" "))&&{style:r},j&256&&O[8]])),c&&Jo(c.update)&&j&1&&c.update.call(null,O[0])},i:_a,o:_a,d(O){O&&li(t),e[13](null),h=!1,Jl(v)}}}const rb=([e,t])=>`${e}: ${t};`;function CC(e,t,i){const r=["use","class","style","active","activate","deactivate","setRippleCenter","getElement"];let c=Fs(t,r);const h=Al(sl());let{use:v=[]}=t,{class:o=""}=t,{style:k=""}=t,{active:O=!1}=t,j,J,oe={},se={};Dl(()=>(J=new oS({addClass:qe,removeClass:ke,hasClass:be,setStyle:Qe,registerEventHandler:(Gt,Ve)=>yt().addEventListener(Gt,Ve),deregisterEventHandler:(Gt,Ve)=>yt().removeEventListener(Gt,Ve)}),J.init(),()=>{J.destroy()}));function be(Gt){return Gt in oe?oe[Gt]:yt().classList.contains(Gt)}function qe(Gt){oe[Gt]||i(5,oe[Gt]=!0,oe)}function ke(Gt){(!(Gt in oe)||oe[Gt])&&i(5,oe[Gt]=!1,oe)}function Qe(Gt,Ve){se[Gt]!=Ve&&(Ve===""||Ve==null?(delete se[Gt],i(6,se)):i(6,se[Gt]=Ve,se))}function We(){J.activate()}function ct(){J.deactivate()}function St(Gt){J.setRippleCenter(Gt)}function yt(){return j}function xe(Gt){ts[Gt?"unshift":"push"](()=>{j=Gt,i(4,j)})}return e.$$set=Gt=>{t=Gn(Gn({},t),OA(Gt)),i(8,c=Fs(t,r)),"use"in Gt&&i(0,v=Gt.use),"class"in Gt&&i(1,o=Gt.class),"style"in Gt&&i(2,k=Gt.style),"active"in Gt&&i(3,O=Gt.active)},[v,o,k,O,j,oe,se,h,c,We,ct,St,yt,xe]}class EC extends Ds{constructor(t){super(),Ls(this,t,CC,SC,vs,{use:0,class:1,style:2,active:3,activate:9,deactivate:10,setRippleCenter:11,getElement:12})}get activate(){return this.$$.ctx[9]}get deactivate(){return this.$$.ctx[10]}get setRippleCenter(){return this.$$.ctx[11]}get getElement(){return this.$$.ctx[12]}}function sb(e){let t,i,r;const c=e[15].default,h=Ya(c,e,e[14],null);return{c(){t=En("div"),h&&h.c(),this.h()},l(v){t=In(v,"DIV",{class:!0,style:!0});var o=en(t);h&&h.l(o),o.forEach(li),this.h()},h(){vi(t,"class","mdc-notched-outline__notch"),vi(t,"style",i=Object.entries(e[7]).map(ab).join(" "))},m(v,o){vn(v,t,o),h&&h.m(t,null),r=!0},p(v,o){h&&h.p&&(!r||o&16384)&&Xa(h,c,v,v[14],r?Ja(c,v[14],o,null):Ka(v[14]),null),(!r||o&128&&i!==(i=Object.entries(v[7]).map(ab).join(" ")))&&vi(t,"style",i)},i(v){r||(Pi(h,v),r=!0)},o(v){Hi(h,v),r=!1},d(v){v&&li(t),h&&h.d(v)}}}function IC(e){let t,i,r,c,h,v,o,k,O,j,J=!e[3]&&sb(e),oe=[{class:v=Mr({[e[1]]:!0,"mdc-notched-outline":!0,"mdc-notched-outline--notched":e[2],"mdc-notched-outline--no-label":e[3],...e[6]})},e[10]],se={};for(let be=0;be<oe.length;be+=1)se=Gn(se,oe[be]);return{c(){t=En("div"),i=En("div"),r=fr(),J&&J.c(),c=fr(),h=En("div"),this.h()},l(be){t=In(be,"DIV",{class:!0});var qe=en(t);i=In(qe,"DIV",{class:!0}),en(i).forEach(li),r=dr(qe),J&&J.l(qe),c=dr(qe),h=In(qe,"DIV",{class:!0}),en(h).forEach(li),qe.forEach(li),this.h()},h(){vi(i,"class","mdc-notched-outline__leading"),vi(h,"class","mdc-notched-outline__trailing"),ca(t,se)},m(be,qe){vn(be,t,qe),Ri(t,i),Ri(t,r),J&&J.m(t,null),Ri(t,c),Ri(t,h),e[16](t),k=!0,O||(j=[Ms(o=el.call(null,t,e[0])),Ms(e[8].call(null,t)),Os(t,"SMUIFloatingLabel:mount",e[9]),Os(t,"SMUIFloatingLabel:unmount",e[17])],O=!0)},p(be,[qe]){be[3]?J&&(ia(),Hi(J,1,1,()=>{J=null}),na()):J?(J.p(be,qe),qe&8&&Pi(J,1)):(J=sb(be),J.c(),Pi(J,1),J.m(t,c)),ca(t,se=fs(oe,[(!k||qe&78&&v!==(v=Mr({[be[1]]:!0,"mdc-notched-outline":!0,"mdc-notched-outline--notched":be[2],"mdc-notched-outline--no-label":be[3],...be[6]})))&&{class:v},qe&1024&&be[10]])),o&&Jo(o.update)&&qe&1&&o.update.call(null,be[0])},i(be){k||(Pi(J),k=!0)},o(be){Hi(J),k=!1},d(be){be&&li(t),J&&J.d(),e[16](null),O=!1,Jl(j)}}}const ab=([e,t])=>`${e}: ${t};`;function TC(e,t,i){const r=["use","class","notched","noLabel","notch","closeNotch","getElement"];let c=Fs(t,r),{$$slots:h={},$$scope:v}=t;const o=Al(sl());let{use:k=[]}=t,{class:O=""}=t,{notched:j=!1}=t,{noLabel:J=!1}=t,oe,se,be,qe={},ke={};Dl(()=>(se=new xS({addClass:We,removeClass:ct,setNotchWidthProperty:lt=>St("width",lt+"px"),removeNotchWidthProperty:()=>yt("width")}),se.init(),()=>{se.destroy()}));function Qe(lt){i(4,be=lt.detail)}function We(lt){qe[lt]||i(6,qe[lt]=!0,qe)}function ct(lt){(!(lt in qe)||qe[lt])&&i(6,qe[lt]=!1,qe)}function St(lt,ut){ke[lt]!=ut&&(ut===""||ut==null?(delete ke[lt],i(7,ke)):i(7,ke[lt]=ut,ke))}function yt(lt){lt in ke&&(delete ke[lt],i(7,ke))}function xe(lt){se.notch(lt)}function Gt(){se.closeNotch()}function Ve(){return oe}function Je(lt){ts[lt?"unshift":"push"](()=>{oe=lt,i(5,oe)})}const et=()=>i(4,be=void 0);return e.$$set=lt=>{t=Gn(Gn({},t),OA(lt)),i(10,c=Fs(t,r)),"use"in lt&&i(0,k=lt.use),"class"in lt&&i(1,O=lt.class),"notched"in lt&&i(2,j=lt.notched),"noLabel"in lt&&i(3,J=lt.noLabel),"$$scope"in lt&&i(14,v=lt.$$scope)},e.$$.update=()=>{e.$$.dirty&16&&(be?(be.addStyle("transition-duration","0s"),We("mdc-notched-outline--upgraded"),requestAnimationFrame(()=>{be&&be.removeStyle("transition-duration")})):ct("mdc-notched-outline--upgraded"))},[k,O,j,J,be,oe,qe,ke,o,Qe,c,xe,Gt,Ve,v,h,Je,et]}class kC extends Ds{constructor(t){super(),Ls(this,t,TC,IC,vs,{use:0,class:1,notched:2,noLabel:3,notch:11,closeNotch:12,getElement:13})}get notch(){return this.$$.ctx[11]}get closeNotch(){return this.$$.ctx[12]}get getElement(){return this.$$.ctx[13]}}function MC(e){let t;return{c(){t=ja(e[8])},l(i){t=Wa(i,e[8])},m(i,r){vn(i,t,r)},p(i,r){r&256&&Fu(t,i[8])},i:_a,o:_a,d(i){i&&li(t)}}}function PC(e){let t;const i=e[13].default,r=Ya(i,e,e[12],null);return{c(){r&&r.c()},l(c){r&&r.l(c)},m(c,h){r&&r.m(c,h),t=!0},p(c,h){r&&r.p&&(!t||h&4096)&&Xa(r,i,c,c[12],t?Ja(i,c[12],h,null):Ka(c[12]),null)},i(c){t||(Pi(r,c),t=!0)},o(c){Hi(r,c),t=!1},d(c){r&&r.d(c)}}}function DC(e){let t,i,r,c,h,v,o,k,O;const j=[PC,MC],J=[];function oe(qe,ke){return qe[8]==null?0:1}i=oe(e),r=J[i]=j[i](e);let se=[{class:c=Mr({[e[1]]:!0,"mdc-select-helper-text":!0,"mdc-select-helper-text--validation-msg":e[4],"mdc-select-helper-text--validation-msg-persistent":e[3],...e[6]})},{"aria-hidden":h=e[3]?void 0:"true"},{id:e[2]},e[7],e[10]],be={};for(let qe=0;qe<se.length;qe+=1)be=Gn(be,se[qe]);return{c(){t=En("div"),r.c(),this.h()},l(qe){t=In(qe,"DIV",{class:!0,"aria-hidden":!0,id:!0});var ke=en(t);r.l(ke),ke.forEach(li),this.h()},h(){ca(t,be)},m(qe,ke){vn(qe,t,ke),J[i].m(t,null),e[14](t),o=!0,k||(O=[Ms(v=el.call(null,t,e[0])),Ms(e[9].call(null,t))],k=!0)},p(qe,[ke]){let Qe=i;i=oe(qe),i===Qe?J[i].p(qe,ke):(ia(),Hi(J[Qe],1,1,()=>{J[Qe]=null}),na(),r=J[i],r?r.p(qe,ke):(r=J[i]=j[i](qe),r.c()),Pi(r,1),r.m(t,null)),ca(t,be=fs(se,[(!o||ke&90&&c!==(c=Mr({[qe[1]]:!0,"mdc-select-helper-text":!0,"mdc-select-helper-text--validation-msg":qe[4],"mdc-select-helper-text--validation-msg-persistent":qe[3],...qe[6]})))&&{class:c},(!o||ke&8&&h!==(h=qe[3]?void 0:"true"))&&{"aria-hidden":h},(!o||ke&4)&&{id:qe[2]},ke&128&&qe[7],ke&1024&&qe[10]])),v&&Jo(v.update)&&ke&1&&v.update.call(null,qe[0])},i(qe){o||(Pi(r),o=!0)},o(qe){Hi(r),o=!1},d(qe){qe&&li(t),J[i].d(),e[14](null),k=!1,Jl(O)}}}let LC=0;function BC(e,t,i){const r=["use","class","id","persistent","validationMsg","getElement"];let c=Fs(t,r),{$$slots:h={},$$scope:v}=t;const o=Al(sl());let{use:k=[]}=t,{class:O=""}=t,{id:j="SMUI-select-helper-text-"+LC++}=t,{persistent:J=!1}=t,{validationMsg:oe=!1}=t,se,be,qe={},ke={},Qe;Dl(()=>(be=new DS({addClass:ct,removeClass:St,hasClass:We,getAttr:yt,setAttr:xe,removeAttr:Gt,setContent:et=>{i(8,Qe=et)}}),j.startsWith("SMUI-select-helper-text-")&&ho(Ve(),"SMUISelectHelperText:id",j),ho(Ve(),"SMUISelectHelperText:mount",be),be.init(),()=>{ho(Ve(),"SMUISelectHelperText:unmount",be),be.destroy()}));function We(et){return et in qe?qe[et]:Ve().classList.contains(et)}function ct(et){qe[et]||i(6,qe[et]=!0,qe)}function St(et){(!(et in qe)||qe[et])&&i(6,qe[et]=!1,qe)}function yt(et){var lt;return et in ke?(lt=ke[et])!==null&&lt!==void 0?lt:null:Ve().getAttribute(et)}function xe(et,lt){ke[et]!==lt&&i(7,ke[et]=lt,ke)}function Gt(et){(!(et in ke)||ke[et]!=null)&&i(7,ke[et]=void 0,ke)}function Ve(){return se}function Je(et){ts[et?"unshift":"push"](()=>{se=et,i(5,se)})}return e.$$set=et=>{t=Gn(Gn({},t),OA(et)),i(10,c=Fs(t,r)),"use"in et&&i(0,k=et.use),"class"in et&&i(1,O=et.class),"id"in et&&i(2,j=et.id),"persistent"in et&&i(3,J=et.persistent),"validationMsg"in et&&i(4,oe=et.validationMsg),"$$scope"in et&&i(12,v=et.$$scope)},[k,O,j,J,oe,se,qe,ke,Qe,o,c,Ve,v,h,Je]}class RC extends Ds{constructor(t){super(),Ls(this,t,BC,DC,vs,{use:0,class:1,id:2,persistent:3,validationMsg:4,getElement:11})}get getElement(){return this.$$.ctx[11]}}const OC=e=>({}),ob=e=>({}),zC=e=>({}),Ab=e=>({}),FC=e=>({}),lb=e=>({}),NC=e=>({}),ub=e=>({});function cb(e){let t,i=[{type:"hidden"},{required:e[10]},{disabled:e[6]},{value:e[0]},Ta(e[53],"input$")],r={};for(let c=0;c<i.length;c+=1)r=Gn(r,i[c]);return{c(){t=En("input"),this.h()},l(c){t=In(c,"INPUT",{type:!0}),this.h()},h(){ca(t,r)},m(c,h){vn(c,t,h),t.autofocus&&t.focus()},p(c,h){ca(t,r=fs(i,[{type:"hidden"},h[0]&1024&&{required:c[10]},h[0]&64&&{disabled:c[6]},h[0]&1&&{value:c[0]},h[1]&4194304&&Ta(c[53],"input$")]))},d(c){c&&li(t)}}}function hb(e){let t;return{c(){t=En("span"),this.h()},l(i){t=In(i,"SPAN",{class:!0}),en(t).forEach(li),this.h()},h(){vi(t,"class","mdc-select__ripple")},m(i,r){vn(i,t,r)},d(i){i&&li(t)}}}function fb(e){let t,i;const r=[{id:e[11]+"-smui-label"},{floatAbove:e[42]!==""},{required:e[10]},Ta(e[53],"label$")];let c={$$slots:{default:[VC]},$$scope:{ctx:e}};for(let h=0;h<r.length;h+=1)c=Gn(c,r[h]);return t=new f3({props:c}),e[67](t),{c(){xr(t.$$.fragment)},l(h){Yr(t.$$.fragment,h)},m(h,v){wr(t,h,v),i=!0},p(h,v){const o=v[0]&3072|v[1]&4196352?fs(r,[v[0]&2048&&{id:h[11]+"-smui-label"},v[1]&2048&&{floatAbove:h[42]!==""},v[0]&1024&&{required:h[10]},v[1]&4194304&&Vr(Ta(h[53],"label$"))]):{};v[0]&512|v[2]&33554432&&(o.$$scope={dirty:v,ctx:h}),t.$set(o)},i(h){i||(Pi(t.$$.fragment,h),i=!0)},o(h){Hi(t.$$.fragment,h),i=!1},d(h){e[67](null),Sr(t,h)}}}function VC(e){let t=(e[9]==null?"":e[9])+"",i,r;const c=e[64].label,h=Ya(c,e,e[87],ub);return{c(){i=ja(t),h&&h.c()},l(v){i=Wa(v,t),h&&h.l(v)},m(v,o){vn(v,i,o),h&&h.m(v,o),r=!0},p(v,o){(!r||o[0]&512)&&t!==(t=(v[9]==null?"":v[9])+"")&&Fu(i,t),h&&h.p&&(!r||o[2]&33554432)&&Xa(h,c,v,v[87],r?Ja(c,v[87],o,NC):Ka(v[87]),ub)},i(v){r||(Pi(h,v),r=!0)},o(v){Hi(h,v),r=!1},d(v){v&&li(i),h&&h.d(v)}}}function db(e){let t,i;const r=[{noLabel:e[8]||e[9]==null&&!e[54].label},Ta(e[53],"outline$")];let c={$$slots:{default:[GC]},$$scope:{ctx:e}};for(let h=0;h<r.length;h+=1)c=Gn(c,r[h]);return t=new kC({props:c}),e[69](t),{c(){xr(t.$$.fragment)},l(h){Yr(t.$$.fragment,h)},m(h,v){wr(t,h,v),i=!0},p(h,v){const o=v[0]&768|v[1]&12582912?fs(r,[v[0]&768|v[1]&8388608&&{noLabel:h[8]||h[9]==null&&!h[54].label},v[1]&4194304&&Vr(Ta(h[53],"outline$"))]):{};v[0]&3840|v[1]&12585216|v[2]&33554432&&(o.$$scope={dirty:v,ctx:h}),t.$set(o)},i(h){i||(Pi(t.$$.fragment,h),i=!0)},o(h){Hi(t.$$.fragment,h),i=!1},d(h){e[69](null),Sr(t,h)}}}function pb(e){let t,i;const r=[{id:e[11]+"-smui-label"},{floatAbove:e[42]!==""},{required:e[10]},Ta(e[53],"label$")];let c={$$slots:{default:[UC]},$$scope:{ctx:e}};for(let h=0;h<r.length;h+=1)c=Gn(c,r[h]);return t=new f3({props:c}),e[68](t),{c(){xr(t.$$.fragment)},l(h){Yr(t.$$.fragment,h)},m(h,v){wr(t,h,v),i=!0},p(h,v){const o=v[0]&3072|v[1]&4196352?fs(r,[v[0]&2048&&{id:h[11]+"-smui-label"},v[1]&2048&&{floatAbove:h[42]!==""},v[0]&1024&&{required:h[10]},v[1]&4194304&&Vr(Ta(h[53],"label$"))]):{};v[0]&512|v[2]&33554432&&(o.$$scope={dirty:v,ctx:h}),t.$set(o)},i(h){i||(Pi(t.$$.fragment,h),i=!0)},o(h){Hi(t.$$.fragment,h),i=!1},d(h){e[68](null),Sr(t,h)}}}function UC(e){let t=(e[9]==null?"":e[9])+"",i,r;const c=e[64].label,h=Ya(c,e,e[87],lb);return{c(){i=ja(t),h&&h.c()},l(v){i=Wa(v,t),h&&h.l(v)},m(v,o){vn(v,i,o),h&&h.m(v,o),r=!0},p(v,o){(!r||o[0]&512)&&t!==(t=(v[9]==null?"":v[9])+"")&&Fu(i,t),h&&h.p&&(!r||o[2]&33554432)&&Xa(h,c,v,v[87],r?Ja(c,v[87],o,FC):Ka(v[87]),lb)},i(v){r||(Pi(h,v),r=!0)},o(v){Hi(h,v),r=!1},d(v){v&&li(i),h&&h.d(v)}}}function GC(e){let t,i,r=!e[8]&&(e[9]!=null||e[54].label)&&pb(e);return{c(){r&&r.c(),t=Rr()},l(c){r&&r.l(c),t=Rr()},m(c,h){r&&r.m(c,h),vn(c,t,h),i=!0},p(c,h){!c[8]&&(c[9]!=null||c[54].label)?r?(r.p(c,h),h[0]&768|h[1]&8388608&&Pi(r,1)):(r=pb(c),r.c(),Pi(r,1),r.m(t.parentNode,t)):r&&(ia(),Hi(r,1,1,()=>{r=null}),na())},i(c){i||(Pi(r),i=!0)},o(c){Hi(r),i=!1},d(c){c&&li(t),r&&r.d(c)}}}function gb(e){let t,i;const r=[Ta(e[53],"ripple$")];let c={};for(let h=0;h<r.length;h+=1)c=Gn(c,r[h]);return t=new EC({props:c}),e[70](t),{c(){xr(t.$$.fragment)},l(h){Yr(t.$$.fragment,h)},m(h,v){wr(t,h,v),i=!0},p(h,v){const o=v[1]&4194304?fs(r,[Vr(Ta(h[53],"ripple$"))]):{};t.$set(o)},i(h){i||(Pi(t.$$.fragment,h),i=!0)},o(h){Hi(t.$$.fragment,h),i=!1},d(h){e[70](null),Sr(t,h)}}}function HC(e){let t;const i=e[64].default,r=Ya(i,e,e[87],null);return{c(){r&&r.c()},l(c){r&&r.l(c)},m(c,h){r&&r.m(c,h),t=!0},p(c,h){r&&r.p&&(!t||h[2]&33554432)&&Xa(r,i,c,c[87],t?Ja(i,c[87],h,null):Ka(c[87]),null)},i(c){t||(Pi(r,c),t=!0)},o(c){Hi(r,c),t=!1},d(c){r&&r.d(c)}}}function QC(e){let t,i,r;const c=[{role:"listbox"},{wrapFocus:e[35]},Ta(e[53],"list$")];function h(o){e[75](o)}let v={$$slots:{default:[HC]},$$scope:{ctx:e}};for(let o=0;o<c.length;o+=1)v=Gn(v,c[o]);return e[24]!==void 0&&(v.selectedIndex=e[24]),t=new cC({props:v}),ts.push(()=>Uc(t,"selectedIndex",h)),t.$on("SMUIList:mount",e[76]),{c(){xr(t.$$.fragment)},l(o){Yr(t.$$.fragment,o)},m(o,k){wr(t,o,k),r=!0},p(o,k){const O=k[1]&4194320?fs(c,[c[0],k[1]&16&&{wrapFocus:o[35]},k[1]&4194304&&Vr(Ta(o[53],"list$"))]):{};k[2]&33554432&&(O.$$scope={dirty:k,ctx:o}),!i&&k[0]&16777216&&(i=!0,O.selectedIndex=o[24],Nc(()=>i=!1)),t.$set(O)},i(o){r||(Pi(t.$$.fragment,o),r=!0)},o(o){Hi(t.$$.fragment,o),r=!1},d(o){Sr(t,o)}}}function mb(e){let t,i;const r=[Ta(e[53],"helperText$")];let c={$$slots:{default:[qC]},$$scope:{ctx:e}};for(let h=0;h<r.length;h+=1)c=Gn(c,r[h]);return t=new RC({props:c}),t.$on("SMUISelectHelperText:id",e[84]),t.$on("SMUISelectHelperText:mount",e[85]),t.$on("SMUISelectHelperText:unmount",e[86]),{c(){xr(t.$$.fragment)},l(h){Yr(t.$$.fragment,h)},m(h,v){wr(t,h,v),i=!0},p(h,v){const o=v[1]&4194304?fs(r,[Vr(Ta(h[53],"helperText$"))]):{};v[2]&33554432&&(o.$$scope={dirty:v,ctx:h}),t.$set(o)},i(h){i||(Pi(t.$$.fragment,h),i=!0)},o(h){Hi(t.$$.fragment,h),i=!1},d(h){Sr(t,h)}}}function qC(e){let t;const i=e[64].helperText,r=Ya(i,e,e[87],ob);return{c(){r&&r.c()},l(c){r&&r.l(c)},m(c,h){r&&r.m(c,h),t=!0},p(c,h){r&&r.p&&(!t||h[2]&33554432)&&Xa(r,i,c,c[87],t?Ja(i,c[87],h,OC):Ka(c[87]),ob)},i(c){t||(Pi(r,c),t=!0)},o(c){Hi(r,c),t=!1},d(c){r&&r.d(c)}}}function ZC(e){let t,i,r,c,h,v,o,k,O,j,J,oe,se,be,qe,ke,Qe,We,ct,St,yt,xe,Gt,Ve,Je,et,lt,ut,Ke,Me,Ze,Fe,vt,dt,_t,ei,di,yi,Ti,Vi,wi,mi=e[12]&&cb(e),Wt=e[7]==="filled"&&hb(),Di=e[7]!=="outlined"&&!e[8]&&(e[9]!=null||e[54].label)&&fb(e),$t=e[7]==="outlined"&&db(e);const Lt=e[64].leadingIcon,ni=Ya(Lt,e,e[87],Ab);let si=[{id:J=e[11]+"-smui-selected-text"},{class:oe=Mr({[e[19]]:!0,"mdc-select__selected-text":!0})},{role:"button"},{"aria-haspopup":"listbox"},{"aria-labelledby":se=e[11]+"-smui-label"},Ta(e[53],"selectedText$")],Oi={};for(let y=0;y<si.length;y+=1)Oi=Gn(Oi,si[y]);let zi=[{class:qe=Mr({[e[17]]:!0,"mdc-select__selected-text-container":!0})},Ta(e[53],"selectedTextContainer$")],oi={};for(let y=0;y<zi.length;y+=1)oi=Gn(oi,zi[y]);let $i=[{class:xe=Mr({[e[21]]:!0,"mdc-select__dropdown-icon":!0})},Ta(e[53],"dropdownIcon$")],ki={};for(let y=0;y<$i.length;y+=1)ki=Gn(ki,$i[y]);let sn=e[7]!=="outlined"&&e[5]&&gb(e),ar=[{class:Je=Mr({[e[15]]:!0,"mdc-select__anchor":!0})},{"aria-required":et=e[10]?"true":void 0},{"aria-disabled":lt=e[6]?"true":void 0},{"aria-controls":e[45]},{"aria-expanded":ut=e[31]?"true":"false"},{"aria-describedby":e[30]},{role:"combobox"},{tabindex:"0"},e[29],Ta(e[53],"anchor$")],ti={};for(let y=0;y<ar.length;y+=1)ti=Gn(ti,ar[y]);const Wi=[{class:Mr({[e[22]]:!0,"mdc-select__menu":!0,...e[32]})},{id:e[45]},{fullWidth:!0},{anchor:!1},{anchorElement:e[33]},{anchorCorner:e[34]},Ta(e[53],"menu$")];function ir(y){e[77](y)}let gn={$$slots:{default:[QC]},$$scope:{ctx:e}};for(let y=0;y<Wi.length;y+=1)gn=Gn(gn,Wi[y]);e[31]!==void 0&&(gn.open=e[31]),Ze=new WS({props:gn}),ts.push(()=>Uc(Ze,"open",ir)),Ze.$on("SMUIMenu:selected",e[78]),Ze.$on("SMUIMenuSurface:closing",e[79]),Ze.$on("SMUIMenuSurface:closed",e[80]),Ze.$on("SMUIMenuSurface:opened",e[81]);let kn=[{class:vt=Mr({[e[3]]:!0,"mdc-select":!0,"mdc-select--required":e[10],"mdc-select--disabled":e[6],"mdc-select--filled":e[7]==="filled","mdc-select--outlined":e[7]==="outlined","smui-select--standard":e[7]==="standard","mdc-select--with-leading-icon":e[44](e[13])?e[54].leadingIcon:e[13],"mdc-select--no-label":e[8]||e[9]==null&&!e[54].label,"mdc-select--invalid":e[1],"mdc-select--activated":e[31],"mdc-data-table__pagination-rows-per-page-select":e[46]==="data-table:pagination",...e[26]})},{style:dt=Object.entries(e[27]).map(_b).concat([e[4]]).join(" ")},Xy(e[53],["input$","anchor$","label$","outline$","selectedTextContainer$","selectedText$","dropdownIcon$","ripple$","menu$","list$","helperText$"])],an={};for(let y=0;y<kn.length;y+=1)an=Gn(an,kn[y]);let d=e[54].helperText&&mb(e);return{c(){t=En("div"),mi&&mi.c(),i=fr(),r=En("div"),Wt&&Wt.c(),c=fr(),Di&&Di.c(),h=fr(),$t&&$t.c(),v=fr(),ni&&ni.c(),o=fr(),k=En("span"),O=En("span"),j=ja(e[42]),Qe=fr(),We=En("span"),ct=as("svg"),St=as("polygon"),yt=as("polygon"),Ve=fr(),sn&&sn.c(),Me=fr(),xr(Ze.$$.fragment),di=fr(),d&&d.c(),yi=Rr(),this.h()},l(y){t=In(y,"DIV",{class:!0,style:!0});var D=en(t);mi&&mi.l(D),i=dr(D),r=In(D,"DIV",{class:!0,"aria-required":!0,"aria-disabled":!0,"aria-controls":!0,"aria-expanded":!0,"aria-describedby":!0,role:!0,tabindex:!0});var U=en(r);Wt&&Wt.l(U),c=dr(U),Di&&Di.l(U),h=dr(U),$t&&$t.l(U),v=dr(U),ni&&ni.l(U),o=dr(U),k=In(U,"SPAN",{class:!0});var Q=en(k);O=In(Q,"SPAN",{id:!0,class:!0,role:!0,"aria-haspopup":!0,"aria-labelledby":!0});var K=en(O);j=Wa(K,e[42]),K.forEach(li),Q.forEach(li),Qe=dr(U),We=In(U,"SPAN",{class:!0});var ie=en(We);ct=os(ie,"svg",{class:!0,viewBox:!0,focusable:!0});var Ae=en(ct);St=os(Ae,"polygon",{class:!0,stroke:!0,"fill-rule":!0,points:!0}),en(St).forEach(li),yt=os(Ae,"polygon",{class:!0,stroke:!0,"fill-rule":!0,points:!0}),en(yt).forEach(li),Ae.forEach(li),ie.forEach(li),Ve=dr(U),sn&&sn.l(U),U.forEach(li),Me=dr(D),Yr(Ze.$$.fragment,D),D.forEach(li),di=dr(y),d&&d.l(y),yi=Rr(),this.h()},h(){ca(O,Oi),ca(k,oi),vi(St,"class","mdc-select__dropdown-icon-inactive"),vi(St,"stroke","none"),vi(St,"fill-rule","evenodd"),vi(St,"points","7 10 12 15 17 10"),vi(yt,"class","mdc-select__dropdown-icon-active"),vi(yt,"stroke","none"),vi(yt,"fill-rule","evenodd"),vi(yt,"points","7 15 12 10 17 15"),vi(ct,"class","mdc-select__dropdown-icon-graphic"),vi(ct,"viewBox","7 10 10 5"),vi(ct,"focusable","false"),ca(We,ki),ca(r,ti),ca(t,an)},m(y,D){vn(y,t,D),mi&&mi.m(t,null),Ri(t,i),Ri(t,r),Wt&&Wt.m(r,null),Ri(r,c),Di&&Di.m(r,null),Ri(r,h),$t&&$t.m(r,null),Ri(r,v),ni&&ni.m(r,null),Ri(r,o),Ri(r,k),Ri(k,O),Ri(O,j),Ri(r,Qe),Ri(r,We),Ri(We,ct),Ri(ct,St),Ri(ct,yt),Ri(r,Ve),sn&&sn.m(r,null),e[71](r),Ri(t,Me),wr(Ze,t,null),e[82](t),vn(y,di,D),d&&d.m(y,D),vn(y,yi,D),Ti=!0,Vi||(wi=[Ms(be=el.call(null,O,e[18])),Ms(ke=el.call(null,k,e[16])),Ms(Gt=el.call(null,We,e[20])),Ms(Ke=el.call(null,r,e[14])),Os(r,"focus",e[72]),Os(r,"blur",e[73]),Os(r,"click",e[74]),Os(r,"keydown",function(){Jo(e[23]&&e[23].handleKeydown.bind(e[23]))&&(e[23]&&e[23].handleKeydown.bind(e[23])).apply(this,arguments)}),Os(r,"focus",e[65]),Os(r,"blur",e[66]),Ms(_t=$h.call(null,t,{ripple:e[7]==="filled",unbounded:!1,addClass:e[50],removeClass:e[51],addStyle:e[52]})),Ms(QS.call(null,t,{addClass:e[50],removeClass:e[51]})),Ms(ei=el.call(null,t,e[2])),Ms(e[43].call(null,t)),Os(t,"SMUISelectLeadingIcon:mount",e[49]),Os(t,"SMUISelectLeadingIcon:unmount",e[83])],Vi=!0)},p(y,D){e=y,e[12]?mi?mi.p(e,D):(mi=cb(e),mi.c(),mi.m(t,i)):mi&&(mi.d(1),mi=null),e[7]==="filled"?Wt||(Wt=hb(),Wt.c(),Wt.m(r,c)):Wt&&(Wt.d(1),Wt=null),e[7]!=="outlined"&&!e[8]&&(e[9]!=null||e[54].label)?Di?(Di.p(e,D),D[0]&896|D[1]&8388608&&Pi(Di,1)):(Di=fb(e),Di.c(),Pi(Di,1),Di.m(r,h)):Di&&(ia(),Hi(Di,1,1,()=>{Di=null}),na()),e[7]==="outlined"?$t?($t.p(e,D),D[0]&128&&Pi($t,1)):($t=db(e),$t.c(),Pi($t,1),$t.m(r,v)):$t&&(ia(),Hi($t,1,1,()=>{$t=null}),na()),ni&&ni.p&&(!Ti||D[2]&33554432)&&Xa(ni,Lt,e,e[87],Ti?Ja(Lt,e[87],D,zC):Ka(e[87]),Ab),(!Ti||D[1]&2048)&&$6(j,e[42],Oi.contenteditable),ca(O,Oi=fs(si,[(!Ti||D[0]&2048&&J!==(J=e[11]+"-smui-selected-text"))&&{id:J},(!Ti||D[0]&524288&&oe!==(oe=Mr({[e[19]]:!0,"mdc-select__selected-text":!0})))&&{class:oe},{role:"button"},{"aria-haspopup":"listbox"},(!Ti||D[0]&2048&&se!==(se=e[11]+"-smui-label"))&&{"aria-labelledby":se},D[1]&4194304&&Ta(e[53],"selectedText$")])),be&&Jo(be.update)&&D[0]&262144&&be.update.call(null,e[18]),ca(k,oi=fs(zi,[(!Ti||D[0]&131072&&qe!==(qe=Mr({[e[17]]:!0,"mdc-select__selected-text-container":!0})))&&{class:qe},D[1]&4194304&&Ta(e[53],"selectedTextContainer$")])),ke&&Jo(ke.update)&&D[0]&65536&&ke.update.call(null,e[16]),ca(We,ki=fs($i,[(!Ti||D[0]&2097152&&xe!==(xe=Mr({[e[21]]:!0,"mdc-select__dropdown-icon":!0})))&&{class:xe},D[1]&4194304&&Ta(e[53],"dropdownIcon$")])),Gt&&Jo(Gt.update)&&D[0]&1048576&&Gt.update.call(null,e[20]),e[7]!=="outlined"&&e[5]?sn?(sn.p(e,D),D[0]&160&&Pi(sn,1)):(sn=gb(e),sn.c(),Pi(sn,1),sn.m(r,null)):sn&&(ia(),Hi(sn,1,1,()=>{sn=null}),na()),ca(r,ti=fs(ar,[(!Ti||D[0]&32768&&Je!==(Je=Mr({[e[15]]:!0,"mdc-select__anchor":!0})))&&{class:Je},(!Ti||D[0]&1024&&et!==(et=e[10]?"true":void 0))&&{"aria-required":et},(!Ti||D[0]&64&&lt!==(lt=e[6]?"true":void 0))&&{"aria-disabled":lt},{"aria-controls":e[45]},(!Ti||D[1]&1&&ut!==(ut=e[31]?"true":"false"))&&{"aria-expanded":ut},(!Ti||D[0]&1073741824)&&{"aria-describedby":e[30]},{role:"combobox"},{tabindex:"0"},D[0]&536870912&&e[29],D[1]&4194304&&Ta(e[53],"anchor$")])),Ke&&Jo(Ke.update)&&D[0]&16384&&Ke.update.call(null,e[14]);const U=D[0]&4194304|D[1]&4210702?fs(Wi,[D[0]&4194304|D[1]&2&&{class:Mr({[e[22]]:!0,"mdc-select__menu":!0,...e[32]})},D[1]&16384&&{id:e[45]},Wi[2],Wi[3],D[1]&4&&{anchorElement:e[33]},D[1]&8&&{anchorCorner:e[34]},D[1]&4194304&&Vr(Ta(e[53],"menu$"))]):{};D[0]&16777216|D[1]&4194352|D[2]&33554432&&(U.$$scope={dirty:D,ctx:e}),!Fe&&D[1]&1&&(Fe=!0,U.open=e[31],Nc(()=>Fe=!1)),Ze.$set(U),ca(t,an=fs(kn,[(!Ti||D[0]&67119050|D[1]&8388609&&vt!==(vt=Mr({[e[3]]:!0,"mdc-select":!0,"mdc-select--required":e[10],"mdc-select--disabled":e[6],"mdc-select--filled":e[7]==="filled","mdc-select--outlined":e[7]==="outlined","smui-select--standard":e[7]==="standard","mdc-select--with-leading-icon":e[44](e[13])?e[54].leadingIcon:e[13],"mdc-select--no-label":e[8]||e[9]==null&&!e[54].label,"mdc-select--invalid":e[1],"mdc-select--activated":e[31],"mdc-data-table__pagination-rows-per-page-select":e[46]==="data-table:pagination",...e[26]})))&&{class:vt},(!Ti||D[0]&134217744&&dt!==(dt=Object.entries(e[27]).map(_b).concat([e[4]]).join(" ")))&&{style:dt},D[1]&4194304&&Xy(e[53],["input$","anchor$","label$","outline$","selectedTextContainer$","selectedText$","dropdownIcon$","ripple$","menu$","list$","helperText$"])])),_t&&Jo(_t.update)&&D[0]&128&&_t.update.call(null,{ripple:e[7]==="filled",unbounded:!1,addClass:e[50],removeClass:e[51],addStyle:e[52]}),ei&&Jo(ei.update)&&D[0]&4&&ei.update.call(null,e[2]),e[54].helperText?d?(d.p(e,D),D[1]&8388608&&Pi(d,1)):(d=mb(e),d.c(),Pi(d,1),d.m(yi.parentNode,yi)):d&&(ia(),Hi(d,1,1,()=>{d=null}),na())},i(y){Ti||(Pi(Di),Pi($t),Pi(ni,y),Pi(sn),Pi(Ze.$$.fragment,y),Pi(d),Ti=!0)},o(y){Hi(Di),Hi($t),Hi(ni,y),Hi(sn),Hi(Ze.$$.fragment,y),Hi(d),Ti=!1},d(y){y&&(li(t),li(di),li(yi)),mi&&mi.d(),Wt&&Wt.d(),Di&&Di.d(),$t&&$t.d(),ni&&ni.d(y),sn&&sn.d(),e[71](null),Sr(Ze),e[82](null),d&&d.d(y),Vi=!1,Jl(wi)}}}let jC=0;function WC(e){const t=e.currentTarget.getBoundingClientRect();return(YC(e)?e.touches[0].clientX:e.clientX)-t.left}function YC(e){return"touches"in e}const _b=([e,t])=>`${e}: ${t};`;function XC(e,t,i){const r=["use","class","style","ripple","disabled","variant","noLabel","label","value","key","dirty","invalid","updateInvalid","required","inputId","hiddenInput","withLeadingIcon","anchor$use","anchor$class","selectedTextContainer$use","selectedTextContainer$class","selectedText$use","selectedText$class","dropdownIcon$use","dropdownIcon$class","menu$class","getUseDefaultValidation","setUseDefaultValidation","focus","layout","getElement"];let c=Fs(t,r),h,v,{$$slots:o={},$$scope:k}=t;const O=eS(o);var j;const J=Al(sl());let oe=()=>{};function se(Rt){return Rt===oe}let{use:be=[]}=t,{class:qe=""}=t,{style:ke=""}=t,{ripple:Qe=!0}=t,{disabled:We=!1}=t,{variant:ct="standard"}=t,{noLabel:St=!1}=t,{label:yt=void 0}=t,{value:xe=""}=t,{key:Gt=Rt=>Rt}=t,{dirty:Ve=!1}=t,{invalid:Je=oe}=t,{updateInvalid:et=se(Je)}=t;const lt=se(Je);se(Je)&&(Je=!1);let{required:ut=!1}=t,{inputId:Ke="SMUI-select-"+jC++}=t,{hiddenInput:Me=!1}=t,{withLeadingIcon:Ze=oe}=t,{anchor$use:Fe=[]}=t,{anchor$class:vt=""}=t,{selectedTextContainer$use:dt=[]}=t,{selectedTextContainer$class:_t=""}=t,{selectedText$use:ei=[]}=t,{selectedText$class:di=""}=t,{dropdownIcon$use:yi=[]}=t,{dropdownIcon$class:Ti=""}=t,{menu$class:Vi=""}=t,wi,mi,Wt={},Di={},$t,Lt={},ni=-1,si=(j=c.menu$id)!==null&&j!==void 0?j:Ke+"-menu",Oi,zi=Bo("SMUI:addLayoutListener"),oi,$i=!1,ki={},sn,ar,ti=!1,Wi,ir=Bo("SMUI:select:context"),gn,kn,an,d,y;Za("SMUI:list:role",""),Za("SMUI:list:nav",!1);const D=Bu("");Wl(e,D,Rt=>i(42,h=Rt)),Za("SMUI:select:selectedText",D);const U=Bu(xe);Wl(e,U,Rt=>i(90,v=Rt)),Za("SMUI:select:value",U);let Q=ni;zi&&(oi=zi(Y)),Dl(()=>(i(23,mi=new PS({setSelectedText:Rt=>{sf(D,h=Rt,h)},isSelectAnchorFocused:()=>document.activeElement===$t,getSelectAnchorAttr:Te,setSelectAnchorAttr:Ce,removeSelectAnchorAttr:je,addMenuClass:Le,removeMenuClass:we,openMenu:()=>{i(31,$i=!0)},closeMenu:()=>{i(31,$i=!1)},getAnchorElement:()=>$t,setMenuAnchorElement:Rt=>{i(33,sn=Rt)},setMenuAnchorCorner:Rt=>{i(34,ar=Rt)},setMenuWrapFocus:Rt=>{i(35,ti=Rt)},getSelectedIndex:()=>ni,setSelectedIndex:Rt=>{i(63,Q=Rt),i(24,ni=Rt),i(0,xe=Ne()[ni])},focusMenuItemAtIndex:Rt=>{Wi.focusItemAtIndex(Rt)},getMenuItemCount:()=>Wi.items.length,getMenuItemValues:()=>Ne().map(Gt),getMenuItemTextAtIndex:Rt=>Wi.getPrimaryTextAtIndex(Rt),isTypeaheadInProgress:()=>Wi.typeaheadInProgress,typeaheadMatchItem:(Rt,Yi)=>Wi.typeaheadMatchItem(Rt,Yi),addClass:Ae,removeClass:fe,hasClass:ie,setRippleCenter:Rt=>d&&d.setRippleCenter(Rt),activateBottomLine:()=>d&&d.activate(),deactivateBottomLine:()=>d&&d.deactivate(),notifyChange:Rt=>{i(55,Ve=!0),et&&i(1,Je=!mi.isValid()),ho(ne(),"SMUISelect:change",{value:xe,index:ni},void 0,!0)},hasOutline:()=>!!y,notchOutline:Rt=>y&&y.notch(Rt),closeOutline:()=>y&&y.closeNotch(),hasLabel:()=>!!an,floatLabel:Rt=>an&&an.float(Rt),getLabelWidth:()=>an?an.getWidth():0,setLabelRequired:Rt=>an&&an.setRequired(Rt)},{get helperText(){return kn},get leadingIcon(){return gn}})),i(24,ni=Ne().indexOf(xe)),mi.init(),de(lt),()=>{mi.destroy()})),lc(()=>{oi&&oi()});function K(Rt){i(37,gn=Rt.detail)}function ie(Rt){return Rt in Wt?Wt[Rt]:ne().classList.contains(Rt)}function Ae(Rt){Wt[Rt]||i(26,Wt[Rt]=!0,Wt)}function fe(Rt){(!(Rt in Wt)||Wt[Rt])&&i(26,Wt[Rt]=!1,Wt)}function ye(Rt,Yi){Di[Rt]!=Yi&&(Yi===""||Yi==null?(delete Di[Rt],i(27,Di)):i(27,Di[Rt]=Yi,Di))}function Le(Rt){ki[Rt]||i(32,ki[Rt]=!0,ki)}function we(Rt){(!(Rt in ki)||ki[Rt])&&i(32,ki[Rt]=!1,ki)}function Te(Rt){var Yi;return Rt in Lt?(Yi=Lt[Rt])!==null&&Yi!==void 0?Yi:null:ne().getAttribute(Rt)}function Ce(Rt,Yi){Lt[Rt]!==Yi&&i(29,Lt[Rt]=Yi,Lt)}function je(Rt){(!(Rt in Lt)||Lt[Rt]!=null)&&i(29,Lt[Rt]=void 0,Lt)}function Ne(){return Wi.getOrderedList().map(Rt=>Rt.getValue())}function Ue(){return mi.getUseDefaultValidation()}function de(Rt){mi.setUseDefaultValidation(Rt)}function ue(){$t.focus()}function Y(){mi.layout()}function ne(){return wi}function he(Rt){Fy.call(this,e,Rt)}function me(Rt){Fy.call(this,e,Rt)}function pe(Rt){ts[Rt?"unshift":"push"](()=>{an=Rt,i(39,an)})}function Oe(Rt){ts[Rt?"unshift":"push"](()=>{an=Rt,i(39,an)})}function ze(Rt){ts[Rt?"unshift":"push"](()=>{y=Rt,i(41,y)})}function Be(Rt){ts[Rt?"unshift":"push"](()=>{d=Rt,i(40,d)})}function Ye(Rt){ts[Rt?"unshift":"push"](()=>{$t=Rt,i(28,$t)})}const Xe=()=>mi&&mi.handleFocus(),ge=()=>mi&&mi.handleBlur(),Ee=Rt=>{$t.focus(),mi&&mi.handleClick(WC(Rt))};function tt(Rt){ni=Rt,i(24,ni)}const pt=Rt=>i(36,Wi=Rt.detail);function n(Rt){$i=Rt,i(31,$i)}const ce=Rt=>mi&&mi.handleMenuItemAction(Rt.detail.index),Zt=()=>mi&&mi.handleMenuClosing(),Jt=()=>mi&&mi.handleMenuClosed(),ui=()=>mi&&mi.handleMenuOpened();function Vt(Rt){ts[Rt?"unshift":"push"](()=>{wi=Rt,i(25,wi)})}const qt=()=>i(37,gn=void 0),Ei=Rt=>i(30,Oi=Rt.detail),Ai=Rt=>i(38,kn=Rt.detail),pi=()=>{i(30,Oi=void 0),i(38,kn=void 0)};return e.$$set=Rt=>{t=Gn(Gn({},t),OA(Rt)),i(53,c=Fs(t,r)),"use"in Rt&&i(2,be=Rt.use),"class"in Rt&&i(3,qe=Rt.class),"style"in Rt&&i(4,ke=Rt.style),"ripple"in Rt&&i(5,Qe=Rt.ripple),"disabled"in Rt&&i(6,We=Rt.disabled),"variant"in Rt&&i(7,ct=Rt.variant),"noLabel"in Rt&&i(8,St=Rt.noLabel),"label"in Rt&&i(9,yt=Rt.label),"value"in Rt&&i(0,xe=Rt.value),"key"in Rt&&i(56,Gt=Rt.key),"dirty"in Rt&&i(55,Ve=Rt.dirty),"invalid"in Rt&&i(1,Je=Rt.invalid),"updateInvalid"in Rt&&i(57,et=Rt.updateInvalid),"required"in Rt&&i(10,ut=Rt.required),"inputId"in Rt&&i(11,Ke=Rt.inputId),"hiddenInput"in Rt&&i(12,Me=Rt.hiddenInput),"withLeadingIcon"in Rt&&i(13,Ze=Rt.withLeadingIcon),"anchor$use"in Rt&&i(14,Fe=Rt.anchor$use),"anchor$class"in Rt&&i(15,vt=Rt.anchor$class),"selectedTextContainer$use"in Rt&&i(16,dt=Rt.selectedTextContainer$use),"selectedTextContainer$class"in Rt&&i(17,_t=Rt.selectedTextContainer$class),"selectedText$use"in Rt&&i(18,ei=Rt.selectedText$use),"selectedText$class"in Rt&&i(19,di=Rt.selectedText$class),"dropdownIcon$use"in Rt&&i(20,yi=Rt.dropdownIcon$use),"dropdownIcon$class"in Rt&&i(21,Ti=Rt.dropdownIcon$class),"menu$class"in Rt&&i(22,Vi=Rt.menu$class),"$$scope"in Rt&&i(87,k=Rt.$$scope)},e.$$.update=()=>{if(e.$$.dirty[0]&25165825|e.$$.dirty[2]&2&&Q!==ni)if(i(63,Q=ni),mi)mi.setSelectedIndex(ni,!1,!0);else{const Rt=Ne();xe!==Rt[ni]&&i(0,xe=Rt[ni])}e.$$.dirty[0]&1&&sf(U,v=xe,v),e.$$.dirty[0]&8388609|e.$$.dirty[1]&33554432&&mi&&mi.getValue()!==Gt(xe)&&mi.setValue(Gt(xe)),e.$$.dirty[0]&8388672&&mi&&mi.getDisabled()!==We&&mi.setDisabled(We),e.$$.dirty[0]&8388610|e.$$.dirty[1]&83886080&&mi&&Ve&&mi.isValid()!==!Je&&(et?i(1,Je=!mi.isValid()):mi.setValid(!Je)),e.$$.dirty[0]&8389632&&mi&&mi.getRequired()!==ut&&mi.setRequired(ut)},[xe,Je,be,qe,ke,Qe,We,ct,St,yt,ut,Ke,Me,Ze,Fe,vt,dt,_t,ei,di,yi,Ti,Vi,mi,ni,wi,Wt,Di,$t,Lt,Oi,$i,ki,sn,ar,ti,Wi,gn,kn,an,d,y,h,J,se,si,ir,D,U,K,Ae,fe,ye,c,O,Ve,Gt,et,Ue,de,ue,Y,ne,Q,o,he,me,pe,Oe,ze,Be,Ye,Xe,ge,Ee,tt,pt,n,ce,Zt,Jt,ui,Vt,qt,Ei,Ai,pi,k]}class gm extends Ds{constructor(t){super(),Ls(this,t,XC,ZC,vs,{use:2,class:3,style:4,ripple:5,disabled:6,variant:7,noLabel:8,label:9,value:0,key:56,dirty:55,invalid:1,updateInvalid:57,required:10,inputId:11,hiddenInput:12,withLeadingIcon:13,anchor$use:14,anchor$class:15,selectedTextContainer$use:16,selectedTextContainer$class:17,selectedText$use:18,selectedText$class:19,dropdownIcon$use:20,dropdownIcon$class:21,menu$class:22,getUseDefaultValidation:58,setUseDefaultValidation:59,focus:60,layout:61,getElement:62},null,[-1,-1,-1,-1])}get getUseDefaultValidation(){return this.$$.ctx[58]}get setUseDefaultValidation(){return this.$$.ctx[59]}get focus(){return this.$$.ctx[60]}get layout(){return this.$$.ctx[61]}get getElement(){return this.$$.ctx[62]}}function KC(e){let t;const i=e[11].default,r=Ya(i,e,e[13],null);return{c(){r&&r.c()},l(c){r&&r.l(c)},m(c,h){r&&r.m(c,h),t=!0},p(c,h){r&&r.p&&(!t||h&8192)&&Xa(r,i,c,c[13],t?Ja(i,c[13],h,null):Ka(c[13]),null)},i(c){t||(Pi(r,c),t=!0)},o(c){Hi(r,c),t=!1},d(c){r&&r.d(c)}}}function JC(e){let t,i;const r=[{use:e[3]},{"data-value":e[0]},{value:e[0]},{selected:e[2]},e[6]];let c={$$slots:{default:[KC]},$$scope:{ctx:e}};for(let h=0;h<r.length;h+=1)c=Gn(c,r[h]);return t=new gC({props:c}),e[12](t),{c(){xr(t.$$.fragment)},l(h){Yr(t.$$.fragment,h)},m(h,v){wr(t,h,v),i=!0},p(h,[v]){const o=v&77?fs(r,[v&8&&{use:h[3]},v&1&&{"data-value":h[0]},v&1&&{value:h[0]},v&4&&{selected:h[2]},v&64&&Vr(h[6])]):{};v&8192&&(o.$$scope={dirty:v,ctx:h}),t.$set(o)},i(h){i||(Pi(t.$$.fragment,h),i=!0)},o(h){Hi(t.$$.fragment,h),i=!1},d(h){e[12](null),Sr(t,h)}}}function $C(e,t,i){let r,c;const h=["use","class","value","getElement"];let v=Fs(t,h),o,k,{$$slots:O={},$$scope:j}=t;const J=Al(sl());let{use:oe=[]}=t;const se="";let{value:be=""}=t,qe;const ke=Bo("SMUI:select:selectedText");Wl(e,ke,yt=>i(14,o=yt));const Qe=Bo("SMUI:select:value");Wl(e,Qe,yt=>i(10,k=yt)),Za("SMUI:list:item:role","option"),Dl(We),lc(We);function We(){c&&qe&&sf(ke,o=qe.getPrimaryText(),o)}function ct(){return qe.getElement()}function St(yt){ts[yt?"unshift":"push"](()=>{qe=yt,i(1,qe)})}return e.$$set=yt=>{t=Gn(Gn({},t),OA(yt)),i(6,v=Fs(t,h)),"use"in yt&&i(7,oe=yt.use),"value"in yt&&i(0,be=yt.value),"$$scope"in yt&&i(13,j=yt.$$scope)},e.$$.update=()=>{e.$$.dirty&128&&i(3,r=[J,...oe]),e.$$.dirty&1025&&i(2,c=be!=null&&be!==""&&k===be)},[be,qe,c,r,ke,Qe,v,oe,se,ct,k,O,St,j]}class Jm extends Ds{constructor(t){super(),Ls(this,t,$C,JC,vs,{use:7,class:8,value:0,getElement:9})}get class(){return this.$$.ctx[8]}get getElement(){return this.$$.ctx[9]}}const mm=["pd","mpd","mntd","rel_pd","rel_mpd","rel_mntd","tree_sizes"],_m={pd:"phylodiversity",mpd:"mean pairwise phylogenetic distance",mntd:"mean nearest-taxon phylogenetic distance"};function eE(e){if(!e||!mm.includes(e))return;const i=650;let r=new Array(i),c=[0,1];const h=vb[1]/i;let v;switch(e){case"mntd":case"rel_mntd":v=A0.mntd;break;case"mpd":case"rel_mpd":v=A0.mpd;break;default:case"pd":v=A0.pd}let o=v.d,k=v.b,O=v.e,j=v.c,J=v.modelHigh,oe=v.modelLow,se=v.minY,be=v.maxY,qe=2;for(let ke=0;ke<i;ke++){let Qe=(ke+qe)*h;r[ke]={x:Qe,high:J({x:Qe,b:k.high,c:j.high,d:o.high,e:O.high}),low:oe({x:Qe,b:k.low,c:j.low,d:o.low,e:O.low})}}return c=[se,be],{confidence:r,yAxis:c,xAxis:vb,xAxisLabel:"Tree Size",yAxisLabel:v.yAxisLabel}}const vb=[0,150],A0={pd:{b:{low:-.7043,high:-.6657},c:{low:23.0845,high:240.3973},d:{low:19970.5549,high:19686.1185},e:{low:3792.2577,high:4198.5041},minY:100,maxY:5e3,yAxisLabel:"Phylodiversity (pd)",modelHigh:({x:e,b:t,c:i,d:r,e:c})=>i+(r-i)/(1+Math.exp(t*(Math.log(e)-Math.log(c)))),modelLow:({x:e,b:t,c:i,d:r,e:c})=>i+(r-i)/(1+Math.exp(t*(Math.log(e)-Math.log(c))))},mpd:{b:{low:-.6143,high:.4445},c:{low:6.3176,high:97.3052},d:{low:102.0496,high:150.1521},e:{low:1.9251,high:2.2335},minY:0,maxY:200,yAxisLabel:"Mean pairwise phylogenetic distance (mpd)",modelHigh:({x:e,b:t,c:i,d:r,e:c})=>i+(r-i)/(1+Math.exp(t*(Math.log(e)-Math.log(c)))),modelLow:({x:e,b:t,c:i,d:r,e:c})=>i+(r-i)/(1+Math.exp(t*(Math.log(e)-Math.log(c))))},mntd:{b:{low:.9954,high:.8694},c:{low:6.054,high:5.1347},d:{low:33.1945,high:185.9164},e:{low:52.3284,high:7.0013},minY:0,maxY:150,yAxisLabel:"Mean nearest-taxon phylogenetic distance (mntd)",modelHigh:({x:e,b:t,c:i,d:r,e:c})=>i+(r-i)/(1+Math.exp(t*(Math.log(e)-Math.log(c)))),modelLow:({x:e,b:t,c:i,d:r,e:c})=>i+(r-i)/(1+Math.exp(t*(Math.log(e)-Math.log(c))))}};function tE(e,t,i){if(t==-1)return 0;let r;switch(e){case"mntd":case"rel_mntd":r=A0.mntd;break;case"mpd":case"rel_mpd":r=A0.mpd;break;default:case"pd":r=A0.pd}let c=r.d,h=r.b,v=r.e,o=r.c,k=r.modelHigh,O=r.modelLow;k({x:i,b:h.high,c:o.high,d:c.high,e:v.high});let j=O({x:i,b:h.low,c:o.low,d:c.low,e:v.low});return t-j}function vm(e,t,i="*ibm_flip"){return kv[i](e,t)}function iE(e="*ibm_flip"){let t=kv[e](0,1),i=[];for(let r of t)i.push(r[1]);return i}function ea(e,t,i){return i*(t-e)+e}const kv={"*ibm_flip":function(t,i){return[[-1,"#ddddddcc"],[t,"#FFB000cc","Very low"],[ea(t,i,.25),"#FE6100cc"],[ea(t,i,.5),"#DC267Fcc","Expected"],[ea(t,i,.75),"#785EF0cc"],[i,"#648FFFcc","Very high"]]},orGrBlu:function(t,i){return[[-1,"#ddddddcc"],[t,"#F9A825cc","Very low"],[ea(t,i,.35),"#e8f4c4cc"],[ea(t,i,.5),"#00E676cc","Expected"],[ea(t,i,.75),"#3d9ab8cc"],[ea(t,i,.85),"#318ab5cc"],[i,"#2a4e9bcc","Very high"]]},blGr:function(t,i){return[[-1,"#ddddddcc"],[t,"#000000","Very low"],[i,"#00ff00","Very high"]]},blBluCyWt:function(t,i){return[[-1,"#ddddddcc","Missing"],[t,"#000000cc","Very low"],[ea(t,i,.5),"#0000ffcc","Expected"],[ea(t,i,.75),"#00ffffcc"],[i,"#ffffffcc","Very high"]]},rdYlGr:function(t,i){return[[-1,"#ddddddcc","Missing"],[t,"#fd5533cc","Very low"],[ea(t,i,.5),"#f8f611cc","Normal"],[i,"#4eb87bcc","Very high"]]},"*mgYlGr":function(t,i){return[[-1,"#ddddddcc","Missing"],[t,"#F15C8Ecc","Very low"],[ea(t,i,.5),"#f8f611cc","Normal"],[i,"#4eb87bcc","Very high"]]},grYlRd:function(t,i){return[[-1,"#ddddddcc","Missing"],[t,"#00ff33cc","Very low biodiversity"],[ea(t,i,.5),"#ffff33cc","Normal biodiversity"],[i,"#ff3300cc","Very high biodiversity"]]},"*census":function(t,i){return[[-1,"#ddddddcc","Missing"],[t,"#efd100cc","Very low biodiversity"],[ea(t,i,.5),"#4eb87bcc","Normal biodiversity"],[i,"#007fc4cc","Very high biodiversity"]]},seqseq:function(t,i){return[[-1,"#ddddddcc","Missing"],[t,"#de4fa6cc","Very low biodiversity"],[ea(t,i,.5),"#4fadd0cc","Normal biodiversity"],[i,"#2a1a8acc","Very high biodiversity"]]},"*parula":function(t,i){return[[-1,"#ddddddcc"],[t,"#352a87cc","Very low"],[ea(t,i,.167),"#0469dfcc"],[ea(t,i,.33),"#06a0cbcc"],[ea(t,i,.5),"#1fb2accc","Expected"],[ea(t,i,.667),"#a3bd6acc"],[ea(t,i,.833),"#fcc336cc"],[i,"#f8f611cc","Very high"]]},"*parula_flip":function(t,i){return[[-1,"#ddddddcc"],[t,"#f8f611cc","Very low"],[ea(t,i,.167),"#fcc336cc"],[ea(t,i,.33),"#a3bd6acc"],[ea(t,i,.5),"#1fb2accc","Expected"],[ea(t,i,.667),"#06a0cbcc"],[ea(t,i,.833),"#0469dfcc"],[i,"#352a87cc","Very high"]]},"*ibm":function(t,i){return[[-1,"#ddddddcc"],[t,"#648FFFcc","Very low"],[ea(t,i,.25),"#785EF0cc"],[ea(t,i,.5),"#DC267Fcc","Expected"],[ea(t,i,.75),"#FE6100cc"],[i,"#FFB000cc","Very high"]]}};function D2(){return{100:"#e9f6fc",200:"#b9e4f7",300:"#89d1f0",400:"#59bee9",500:"#29abe2",600:"#2186af",700:"#175f7c",800:"#0d3849",900:"#031116"}}function yb(e,t,i){const r=e.slice();return r[22]=t[i],r}function nE(e,t,i){const r=e.slice();return r[22]=t[i],r}function rE(e){let t,i;return{c(){t=En("option"),i=ja(e[22]),this.h()},l(r){t=In(r,"OPTION",{});var c=en(t);i=Wa(c,e[22]),c.forEach(li),this.h()},h(){t.__value=e[22],o3(t,t.__value)},m(r,c){vn(r,t,c),Ri(t,i)},p:_a,d(r){r&&li(t)}}}function bb(e){let t,i=e[22]+"",r;return{c(){t=En("option"),r=ja(i),this.h()},l(c){t=In(c,"OPTION",{});var h=en(t);r=Wa(h,i),h.forEach(li),this.h()},h(){t.__value=e[22],o3(t,t.__value)},m(c,h){vn(c,t,h),Ri(t,r)},p:_a,d(c){c&&li(t)}}}function sE(e){let t,i,r,c="Metric",h,v,o,k,O,j="Palette",J,oe,se,be,qe,ke="Show county lines?",Qe,We,ct,St,yt,xe="Show ecoregions?",Gt,Ve,Je,et,lt,ut="Draw Mode?",Ke,Me,Ze="Draw Polygon",Fe,vt,dt="Reset",_t,ei,di=nl(mm),yi=[];for(let wi=0;wi<di.length;wi+=1)yi[wi]=rE(nE(e,di,wi));let Ti=nl(e[10]),Vi=[];for(let wi=0;wi<Ti.length;wi+=1)Vi[wi]=bb(yb(e,Ti,wi));return{c(){t=En("div"),i=En("div"),r=En("h4"),r.textContent=c,h=fr(),v=En("select");for(let wi=0;wi<yi.length;wi+=1)yi[wi].c();o=fr(),k=En("div"),O=En("h4"),O.textContent=j,J=fr(),oe=En("select");for(let wi=0;wi<Vi.length;wi+=1)Vi[wi].c();se=fr(),be=En("div"),qe=En("h4"),qe.textContent=ke,Qe=fr(),We=En("input"),ct=fr(),St=En("div"),yt=En("h4"),yt.textContent=xe,Gt=fr(),Ve=En("input"),Je=fr(),et=En("div"),lt=En("h4"),lt.textContent=ut,Ke=fr(),Me=En("button"),Me.textContent=Ze,Fe=fr(),vt=En("button"),vt.textContent=dt,this.h()},l(wi){t=In(wi,"DIV",{class:!0});var mi=en(t);i=In(mi,"DIV",{class:!0});var Wt=en(i);r=In(Wt,"H4",{class:!0,"data-svelte-h":!0}),Zl(r)!=="svelte-1wtuo56"&&(r.textContent=c),h=dr(Wt),v=In(Wt,"SELECT",{label:!0});var Di=en(v);for(let zi=0;zi<yi.length;zi+=1)yi[zi].l(Di);Di.forEach(li),Wt.forEach(li),o=dr(mi),k=In(mi,"DIV",{class:!0});var $t=en(k);O=In($t,"H4",{class:!0,"data-svelte-h":!0}),Zl(O)!=="svelte-16skbun"&&(O.textContent=j),J=dr($t),oe=In($t,"SELECT",{label:!0});var Lt=en(oe);for(let zi=0;zi<Vi.length;zi+=1)Vi[zi].l(Lt);Lt.forEach(li),$t.forEach(li),se=dr(mi),be=In(mi,"DIV",{class:!0});var ni=en(be);qe=In(ni,"H4",{class:!0,"data-svelte-h":!0}),Zl(qe)!=="svelte-tf6nwt"&&(qe.textContent=ke),Qe=dr(ni),We=In(ni,"INPUT",{type:!0}),ni.forEach(li),ct=dr(mi),St=In(mi,"DIV",{class:!0});var si=en(St);yt=In(si,"H4",{class:!0,"data-svelte-h":!0}),Zl(yt)!=="svelte-1f8vskc"&&(yt.textContent=xe),Gt=dr(si),Ve=In(si,"INPUT",{type:!0}),si.forEach(li),Je=dr(mi),et=In(mi,"DIV",{class:!0});var Oi=en(et);lt=In(Oi,"H4",{class:!0,"data-svelte-h":!0}),Zl(lt)!=="svelte-hi5xw8"&&(lt.textContent=ut),Ke=dr(Oi),Me=In(Oi,"BUTTON",{"data-svelte-h":!0}),Zl(Me)!=="svelte-o8r62u"&&(Me.textContent=Ze),Fe=dr(Oi),vt=In(Oi,"BUTTON",{"data-svelte-h":!0}),Zl(vt)!=="svelte-2y01av"&&(vt.textContent=dt),Oi.forEach(li),mi.forEach(li),this.h()},h(){vi(r,"class","svelte-11w56ip"),vi(v,"label","Diversity Metric"),e[6]===void 0&&Ny(()=>e[12].call(v)),vi(i,"class","control-item svelte-11w56ip"),vi(O,"class","svelte-11w56ip"),vi(oe,"label","Color Scheme"),e[7]===void 0&&Ny(()=>e[14].call(oe)),vi(k,"class","control-item svelte-11w56ip"),vi(qe,"class","svelte-11w56ip"),vi(We,"type","checkbox"),vi(be,"class","control-item svelte-11w56ip"),vi(yt,"class","svelte-11w56ip"),vi(Ve,"type","checkbox"),vi(St,"class","control-item svelte-11w56ip"),vi(lt,"class","svelte-11w56ip"),vi(et,"class","control-item svelte-11w56ip"),vi(t,"class","controls svelte-11w56ip")},m(wi,mi){vn(wi,t,mi),Ri(t,i),Ri(i,r),Ri(i,h),Ri(i,v);for(let Wt=0;Wt<yi.length;Wt+=1)yi[Wt]&&yi[Wt].m(v,null);Fg(v,e[6],!0),Ri(t,o),Ri(t,k),Ri(k,O),Ri(k,J),Ri(k,oe);for(let Wt=0;Wt<Vi.length;Wt+=1)Vi[Wt]&&Vi[Wt].m(oe,null);Fg(oe,e[7],!0),Ri(t,se),Ri(t,be),Ri(be,qe),Ri(be,Qe),Ri(be,We),We.checked=e[8],Ri(t,ct),Ri(t,St),Ri(St,yt),Ri(St,Gt),Ri(St,Ve),Ve.checked=e[9],Ri(t,Je),Ri(t,et),Ri(et,lt),Ri(et,Ke),Ri(et,Me),Ri(et,Fe),Ri(et,vt),_t||(ei=[Os(v,"change",e[12]),Os(v,"change",e[13]),Os(oe,"change",e[14]),Os(oe,"change",e[15]),Os(We,"change",e[16]),Os(We,"change",e[17]),Os(Ve,"change",e[18]),Os(Ve,"change",e[19]),Os(Me,"click",e[20]),Os(vt,"click",e[21])],_t=!0)},p(wi,[mi]){if(mi&64&&Fg(v,wi[6]),mi&1024){Ti=nl(wi[10]);let Wt;for(Wt=0;Wt<Ti.length;Wt+=1){const Di=yb(wi,Ti,Wt);Vi[Wt]?Vi[Wt].p(Di,mi):(Vi[Wt]=bb(Di),Vi[Wt].c(),Vi[Wt].m(oe,null))}for(;Wt<Vi.length;Wt+=1)Vi[Wt].d(1);Vi.length=Ti.length}mi&1152&&Fg(oe,wi[7]),mi&256&&(We.checked=wi[8]),mi&512&&(Ve.checked=wi[9])},i:_a,o:_a,d(wi){wi&&li(t),ph(yi,wi),ph(Vi,wi),_t=!1,Jl(ei)}}}function aE(e,t,i){let{updateMetricLayer:r}=t,{updateColorScheme:c}=t,{updateShowCounties:h}=t,{updateShowEcoregions:v}=t,{updateDrawing:o}=t,{updateDrawnPath:k}=t,{isDrawing:O}=t,j,J,oe,se;const be=Object.keys(kv);Dl(()=>{r(j),c(J)});function qe(){j=Vy(this),i(6,j)}const ke=()=>r(j);function Qe(){J=Vy(this),i(7,J),i(10,be)}const We=()=>c(J);function ct(){oe=this.checked,i(8,oe)}const St=()=>h(oe);function yt(){se=this.checked,i(9,se)}const xe=()=>v(se),Gt=()=>o(!0),Ve=()=>k(null);return e.$$set=Je=>{"updateMetricLayer"in Je&&i(0,r=Je.updateMetricLayer),"updateColorScheme"in Je&&i(1,c=Je.updateColorScheme),"updateShowCounties"in Je&&i(2,h=Je.updateShowCounties),"updateShowEcoregions"in Je&&i(3,v=Je.updateShowEcoregions),"updateDrawing"in Je&&i(4,o=Je.updateDrawing),"updateDrawnPath"in Je&&i(5,k=Je.updateDrawnPath),"isDrawing"in Je&&i(11,O=Je.isDrawing)},[r,c,h,v,o,k,j,J,oe,se,be,O,qe,ke,Qe,We,ct,St,yt,xe,Gt,Ve]}class oE extends Ds{constructor(t){super(),Ls(this,t,aE,sE,vs,{updateMetricLayer:0,updateColorScheme:1,updateShowCounties:2,updateShowEcoregions:3,updateDrawing:4,updateDrawnPath:5,isDrawing:11})}}var fh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function AE(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Mv(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var i=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};i.prototype=t.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var c=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(i,r,c.get?c:{enumerable:!0,get:function(){return e[r]}})}),i}function lE(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var d3={exports:{}};const uE={},cE=Object.freeze(Object.defineProperty({__proto__:null,default:uE},Symbol.toStringTag,{value:"Module"})),xb=Mv(cE);var Gg={exports:{}},wb;function hE(){return wb||(wb=1,function(e,t){(function(i,r){r(t)})(fh,function(i){var r=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,81,2,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,9,5351,0,7,14,13835,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,983,6,110,6,6,9,4759,9,787719,239],c=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,4026,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,757,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],h="‌‍·̀-ͯ·҃-֑҇-ׇֽֿׁׂׅׄؐ-ًؚ-٩ٰۖ-ۜ۟-۪ۤۧۨ-ۭ۰-۹ܑܰ-݊ަ-ް߀-߉߫-߽߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛࢘-࢟࣊-ࣣ࣡-ःऺ-़ा-ॏ॑-ॗॢॣ०-९ঁ-ঃ়া-ৄেৈো-্ৗৢৣ০-৯৾ਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣ૦-૯ૺ-૿ଁ-ଃ଼ା-ୄେୈୋ-୍୕-ୗୢୣ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఀ-ఄ఼ా-ౄె-ైొ-్ౕౖౢౣ౦-౯ಁ-ಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣ೦-೯ೳഀ-ഃ഻഼ാ-ൄെ-ൈൊ-്ൗൢൣ൦-൯ඁ-ඃ්ා-ුූෘ-ෟ෦-෯ෲෳัิ-ฺ็-๎๐-๙ັິ-ຼ່-໎໐-໙༘༙༠-༩༹༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှ၀-၉ၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟፩-፱ᜒ-᜕ᜲ-᜴ᝒᝓᝲᝳ឴-៓៝០-៩᠋-᠍᠏-᠙ᢩᤠ-ᤫᤰ-᤻᥆-᥏᧐-᧚ᨗ-ᨛᩕ-ᩞ᩠-᩿᩼-᪉᪐-᪙᪰-᪽ᪿ-ᫎᬀ-ᬄ᬴-᭄᭐-᭙᭫-᭳ᮀ-ᮂᮡ-ᮭ᮰-᮹᯦-᯳ᰤ-᰷᱀-᱉᱐-᱙᳐-᳔᳒-᳨᳭᳴᳷-᳹᷀-᷿‌‍‿⁀⁔⃐-⃥⃜⃡-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯・꘠-꘩꙯ꙴ-꙽ꚞꚟ꛰꛱ꠂ꠆ꠋꠣ-ꠧ꠬ꢀꢁꢴ-ꣅ꣐-꣙꣠-꣱ꣿ-꤉ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀꧐-꧙ꧥ꧰-꧹ꨩ-ꨶꩃꩌꩍ꩐-꩙ꩻ-ꩽꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꫫ-ꫯꫵ꫶ꯣ-ꯪ꯬꯭꯰-꯹ﬞ︀-️︠-︯︳︴﹍-﹏０-９＿･",v="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙՠ-ֈא-תׯ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࡠ-ࡪࡰ-ࢇࢉ-ࢎࢠ-ࣉऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱৼਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡૹଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘ-ౚౝౠౡಀಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೝೞೠೡೱೲഄ-ഌഎ-ഐഒ-ഺഽൎൔ-ൖൟ-ൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄຆ-ຊຌ-ຣລວ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏽᏸ-ᏽᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜑᜟ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡸᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭌᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᲀ-ᲈᲐ-ᲺᲽ-Ჿᳩ-ᳬᳮ-ᳳᳵᳶᳺᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕ℘-ℝℤΩℨK-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞ々-〇〡-〩〱-〵〸-〼ぁ-ゖ゛-ゟァ-ヺー-ヿㄅ-ㄯㄱ-ㆎㆠ-ㆿㇰ-ㇿ㐀-䶿一-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꟊꟐꟑꟓꟕ-ꟙꟲ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꣽꣾꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭩꭰ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",o={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},k="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",O={5:k,"5module":k+" export import",6:k+" const class extends export import super"},j=/^in(stanceof)?$/,J=new RegExp("["+v+"]"),oe=new RegExp("["+v+h+"]");function se(P,re){for(var Re=65536,at=0;at<re.length;at+=2){if(Re+=re[at],Re>P)return!1;if(Re+=re[at+1],Re>=P)return!0}return!1}function be(P,re){return P<65?P===36:P<91?!0:P<97?P===95:P<123?!0:P<=65535?P>=170&&J.test(String.fromCharCode(P)):re===!1?!1:se(P,c)}function qe(P,re){return P<48?P===36:P<58?!0:P<65?!1:P<91?!0:P<97?P===95:P<123?!0:P<=65535?P>=170&&oe.test(String.fromCharCode(P)):re===!1?!1:se(P,c)||se(P,r)}var ke=function(re,Re){Re===void 0&&(Re={}),this.label=re,this.keyword=Re.keyword,this.beforeExpr=!!Re.beforeExpr,this.startsExpr=!!Re.startsExpr,this.isLoop=!!Re.isLoop,this.isAssign=!!Re.isAssign,this.prefix=!!Re.prefix,this.postfix=!!Re.postfix,this.binop=Re.binop||null,this.updateContext=null};function Qe(P,re){return new ke(P,{beforeExpr:!0,binop:re})}var We={beforeExpr:!0},ct={startsExpr:!0},St={};function yt(P,re){return re===void 0&&(re={}),re.keyword=P,St[P]=new ke(P,re)}var xe={num:new ke("num",ct),regexp:new ke("regexp",ct),string:new ke("string",ct),name:new ke("name",ct),privateId:new ke("privateId",ct),eof:new ke("eof"),bracketL:new ke("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new ke("]"),braceL:new ke("{",{beforeExpr:!0,startsExpr:!0}),braceR:new ke("}"),parenL:new ke("(",{beforeExpr:!0,startsExpr:!0}),parenR:new ke(")"),comma:new ke(",",We),semi:new ke(";",We),colon:new ke(":",We),dot:new ke("."),question:new ke("?",We),questionDot:new ke("?."),arrow:new ke("=>",We),template:new ke("template"),invalidTemplate:new ke("invalidTemplate"),ellipsis:new ke("...",We),backQuote:new ke("`",ct),dollarBraceL:new ke("${",{beforeExpr:!0,startsExpr:!0}),eq:new ke("=",{beforeExpr:!0,isAssign:!0}),assign:new ke("_=",{beforeExpr:!0,isAssign:!0}),incDec:new ke("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new ke("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:Qe("||",1),logicalAND:Qe("&&",2),bitwiseOR:Qe("|",3),bitwiseXOR:Qe("^",4),bitwiseAND:Qe("&",5),equality:Qe("==/!=/===/!==",6),relational:Qe("</>/<=/>=",7),bitShift:Qe("<</>>/>>>",8),plusMin:new ke("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:Qe("%",10),star:Qe("*",10),slash:Qe("/",10),starstar:new ke("**",{beforeExpr:!0}),coalesce:Qe("??",1),_break:yt("break"),_case:yt("case",We),_catch:yt("catch"),_continue:yt("continue"),_debugger:yt("debugger"),_default:yt("default",We),_do:yt("do",{isLoop:!0,beforeExpr:!0}),_else:yt("else",We),_finally:yt("finally"),_for:yt("for",{isLoop:!0}),_function:yt("function",ct),_if:yt("if"),_return:yt("return",We),_switch:yt("switch"),_throw:yt("throw",We),_try:yt("try"),_var:yt("var"),_const:yt("const"),_while:yt("while",{isLoop:!0}),_with:yt("with"),_new:yt("new",{beforeExpr:!0,startsExpr:!0}),_this:yt("this",ct),_super:yt("super",ct),_class:yt("class",ct),_extends:yt("extends",We),_export:yt("export"),_import:yt("import",ct),_null:yt("null",ct),_true:yt("true",ct),_false:yt("false",ct),_in:yt("in",{beforeExpr:!0,binop:7}),_instanceof:yt("instanceof",{beforeExpr:!0,binop:7}),_typeof:yt("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:yt("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:yt("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},Gt=/\r\n?|\n|\u2028|\u2029/,Ve=new RegExp(Gt.source,"g");function Je(P){return P===10||P===13||P===8232||P===8233}function et(P,re,Re){Re===void 0&&(Re=P.length);for(var at=re;at<Re;at++){var kt=P.charCodeAt(at);if(Je(kt))return at<Re-1&&kt===13&&P.charCodeAt(at+1)===10?at+2:at+1}return-1}var lt=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,ut=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,Ke=Object.prototype,Me=Ke.hasOwnProperty,Ze=Ke.toString,Fe=Object.hasOwn||function(P,re){return Me.call(P,re)},vt=Array.isArray||function(P){return Ze.call(P)==="[object Array]"},dt=Object.create(null);function _t(P){return dt[P]||(dt[P]=new RegExp("^(?:"+P.replace(/ /g,"|")+")$"))}function ei(P){return P<=65535?String.fromCharCode(P):(P-=65536,String.fromCharCode((P>>10)+55296,(P&1023)+56320))}var di=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,yi=function(re,Re){this.line=re,this.column=Re};yi.prototype.offset=function(re){return new yi(this.line,this.column+re)};var Ti=function(re,Re,at){this.start=Re,this.end=at,re.sourceFile!==null&&(this.source=re.sourceFile)};function Vi(P,re){for(var Re=1,at=0;;){var kt=et(P,at,re);if(kt<0)return new yi(Re,re-at);++Re,at=kt}}var wi={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},mi=!1;function Wt(P){var re={};for(var Re in wi)re[Re]=P&&Fe(P,Re)?P[Re]:wi[Re];if(re.ecmaVersion==="latest"?re.ecmaVersion=1e8:re.ecmaVersion==null?(!mi&&typeof console=="object"&&console.warn&&(mi=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),re.ecmaVersion=11):re.ecmaVersion>=2015&&(re.ecmaVersion-=2009),re.allowReserved==null&&(re.allowReserved=re.ecmaVersion<5),(!P||P.allowHashBang==null)&&(re.allowHashBang=re.ecmaVersion>=14),vt(re.onToken)){var at=re.onToken;re.onToken=function(kt){return at.push(kt)}}return vt(re.onComment)&&(re.onComment=Di(re,re.onComment)),re}function Di(P,re){return function(Re,at,kt,ri,_i,Qi){var Xi={type:Re?"Block":"Line",value:at,start:kt,end:ri};P.locations&&(Xi.loc=new Ti(this,_i,Qi)),P.ranges&&(Xi.range=[kt,ri]),re.push(Xi)}}var $t=1,Lt=2,ni=4,si=8,Oi=16,zi=32,oi=64,$i=128,ki=256,sn=$t|Lt|ki;function ar(P,re){return Lt|(P?ni:0)|(re?si:0)}var ti=0,Wi=1,ir=2,gn=3,kn=4,an=5,d=function(re,Re,at){this.options=re=Wt(re),this.sourceFile=re.sourceFile,this.keywords=_t(O[re.ecmaVersion>=6?6:re.sourceType==="module"?"5module":5]);var kt="";re.allowReserved!==!0&&(kt=o[re.ecmaVersion>=6?6:re.ecmaVersion===5?5:3],re.sourceType==="module"&&(kt+=" await")),this.reservedWords=_t(kt);var ri=(kt?kt+" ":"")+o.strict;this.reservedWordsStrict=_t(ri),this.reservedWordsStrictBind=_t(ri+" "+o.strictBind),this.input=String(Re),this.containsEsc=!1,at?(this.pos=at,this.lineStart=this.input.lastIndexOf(`
`,at-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(Gt).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=xe.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=re.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&re.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope($t),this.regexpState=null,this.privateNameStack=[]},y={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};d.prototype.parse=function(){var re=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(re)},y.inFunction.get=function(){return(this.currentVarScope().flags&Lt)>0},y.inGenerator.get=function(){return(this.currentVarScope().flags&si)>0&&!this.currentVarScope().inClassFieldInit},y.inAsync.get=function(){return(this.currentVarScope().flags&ni)>0&&!this.currentVarScope().inClassFieldInit},y.canAwait.get=function(){for(var P=this.scopeStack.length-1;P>=0;P--){var re=this.scopeStack[P];if(re.inClassFieldInit||re.flags&ki)return!1;if(re.flags&Lt)return(re.flags&ni)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction},y.allowSuper.get=function(){var P=this.currentThisScope(),re=P.flags,Re=P.inClassFieldInit;return(re&oi)>0||Re||this.options.allowSuperOutsideMethod},y.allowDirectSuper.get=function(){return(this.currentThisScope().flags&$i)>0},y.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())},y.allowNewDotTarget.get=function(){var P=this.currentThisScope(),re=P.flags,Re=P.inClassFieldInit;return(re&(Lt|ki))>0||Re},y.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&ki)>0},d.extend=function(){for(var re=[],Re=arguments.length;Re--;)re[Re]=arguments[Re];for(var at=this,kt=0;kt<re.length;kt++)at=re[kt](at);return at},d.parse=function(re,Re){return new this(Re,re).parse()},d.parseExpressionAt=function(re,Re,at){var kt=new this(at,re,Re);return kt.nextToken(),kt.parseExpression()},d.tokenizer=function(re,Re){return new this(Re,re)},Object.defineProperties(d.prototype,y);var D=d.prototype,U=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;D.strictDirective=function(P){if(this.options.ecmaVersion<5)return!1;for(;;){ut.lastIndex=P,P+=ut.exec(this.input)[0].length;var re=U.exec(this.input.slice(P));if(!re)return!1;if((re[1]||re[2])==="use strict"){ut.lastIndex=P+re[0].length;var Re=ut.exec(this.input),at=Re.index+Re[0].length,kt=this.input.charAt(at);return kt===";"||kt==="}"||Gt.test(Re[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(kt)||kt==="!"&&this.input.charAt(at+1)==="=")}P+=re[0].length,ut.lastIndex=P,P+=ut.exec(this.input)[0].length,this.input[P]===";"&&P++}},D.eat=function(P){return this.type===P?(this.next(),!0):!1},D.isContextual=function(P){return this.type===xe.name&&this.value===P&&!this.containsEsc},D.eatContextual=function(P){return this.isContextual(P)?(this.next(),!0):!1},D.expectContextual=function(P){this.eatContextual(P)||this.unexpected()},D.canInsertSemicolon=function(){return this.type===xe.eof||this.type===xe.braceR||Gt.test(this.input.slice(this.lastTokEnd,this.start))},D.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},D.semicolon=function(){!this.eat(xe.semi)&&!this.insertSemicolon()&&this.unexpected()},D.afterTrailingComma=function(P,re){if(this.type===P)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),re||this.next(),!0},D.expect=function(P){this.eat(P)||this.unexpected()},D.unexpected=function(P){this.raise(P??this.start,"Unexpected token")};var Q=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};D.checkPatternErrors=function(P,re){if(P){P.trailingComma>-1&&this.raiseRecoverable(P.trailingComma,"Comma is not permitted after the rest element");var Re=re?P.parenthesizedAssign:P.parenthesizedBind;Re>-1&&this.raiseRecoverable(Re,re?"Assigning to rvalue":"Parenthesized pattern")}},D.checkExpressionErrors=function(P,re){if(!P)return!1;var Re=P.shorthandAssign,at=P.doubleProto;if(!re)return Re>=0||at>=0;Re>=0&&this.raise(Re,"Shorthand property assignments are valid only in destructuring patterns"),at>=0&&this.raiseRecoverable(at,"Redefinition of __proto__ property")},D.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},D.isSimpleAssignTarget=function(P){return P.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(P.expression):P.type==="Identifier"||P.type==="MemberExpression"};var K=d.prototype;K.parseTopLevel=function(P){var re=Object.create(null);for(P.body||(P.body=[]);this.type!==xe.eof;){var Re=this.parseStatement(null,!0,re);P.body.push(Re)}if(this.inModule)for(var at=0,kt=Object.keys(this.undefinedExports);at<kt.length;at+=1){var ri=kt[at];this.raiseRecoverable(this.undefinedExports[ri].start,"Export '"+ri+"' is not defined")}return this.adaptDirectivePrologue(P.body),this.next(),P.sourceType=this.options.sourceType,this.finishNode(P,"Program")};var ie={kind:"loop"},Ae={kind:"switch"};K.isLet=function(P){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;ut.lastIndex=this.pos;var re=ut.exec(this.input),Re=this.pos+re[0].length,at=this.input.charCodeAt(Re);if(at===91||at===92)return!0;if(P)return!1;if(at===123||at>55295&&at<56320)return!0;if(be(at,!0)){for(var kt=Re+1;qe(at=this.input.charCodeAt(kt),!0);)++kt;if(at===92||at>55295&&at<56320)return!0;var ri=this.input.slice(Re,kt);if(!j.test(ri))return!0}return!1},K.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;ut.lastIndex=this.pos;var P=ut.exec(this.input),re=this.pos+P[0].length,Re;return!Gt.test(this.input.slice(this.pos,re))&&this.input.slice(re,re+8)==="function"&&(re+8===this.input.length||!(qe(Re=this.input.charCodeAt(re+8))||Re>55295&&Re<56320))},K.parseStatement=function(P,re,Re){var at=this.type,kt=this.startNode(),ri;switch(this.isLet(P)&&(at=xe._var,ri="let"),at){case xe._break:case xe._continue:return this.parseBreakContinueStatement(kt,at.keyword);case xe._debugger:return this.parseDebuggerStatement(kt);case xe._do:return this.parseDoStatement(kt);case xe._for:return this.parseForStatement(kt);case xe._function:return P&&(this.strict||P!=="if"&&P!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(kt,!1,!P);case xe._class:return P&&this.unexpected(),this.parseClass(kt,!0);case xe._if:return this.parseIfStatement(kt);case xe._return:return this.parseReturnStatement(kt);case xe._switch:return this.parseSwitchStatement(kt);case xe._throw:return this.parseThrowStatement(kt);case xe._try:return this.parseTryStatement(kt);case xe._const:case xe._var:return ri=ri||this.value,P&&ri!=="var"&&this.unexpected(),this.parseVarStatement(kt,ri);case xe._while:return this.parseWhileStatement(kt);case xe._with:return this.parseWithStatement(kt);case xe.braceL:return this.parseBlock(!0,kt);case xe.semi:return this.parseEmptyStatement(kt);case xe._export:case xe._import:if(this.options.ecmaVersion>10&&at===xe._import){ut.lastIndex=this.pos;var _i=ut.exec(this.input),Qi=this.pos+_i[0].length,Xi=this.input.charCodeAt(Qi);if(Xi===40||Xi===46)return this.parseExpressionStatement(kt,this.parseExpression())}return this.options.allowImportExportEverywhere||(re||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),at===xe._import?this.parseImport(kt):this.parseExport(kt,Re);default:if(this.isAsyncFunction())return P&&this.unexpected(),this.next(),this.parseFunctionStatement(kt,!0,!P);var Nn=this.value,qn=this.parseExpression();return at===xe.name&&qn.type==="Identifier"&&this.eat(xe.colon)?this.parseLabeledStatement(kt,Nn,qn,P):this.parseExpressionStatement(kt,qn)}},K.parseBreakContinueStatement=function(P,re){var Re=re==="break";this.next(),this.eat(xe.semi)||this.insertSemicolon()?P.label=null:this.type!==xe.name?this.unexpected():(P.label=this.parseIdent(),this.semicolon());for(var at=0;at<this.labels.length;++at){var kt=this.labels[at];if((P.label==null||kt.name===P.label.name)&&(kt.kind!=null&&(Re||kt.kind==="loop")||P.label&&Re))break}return at===this.labels.length&&this.raise(P.start,"Unsyntactic "+re),this.finishNode(P,Re?"BreakStatement":"ContinueStatement")},K.parseDebuggerStatement=function(P){return this.next(),this.semicolon(),this.finishNode(P,"DebuggerStatement")},K.parseDoStatement=function(P){return this.next(),this.labels.push(ie),P.body=this.parseStatement("do"),this.labels.pop(),this.expect(xe._while),P.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(xe.semi):this.semicolon(),this.finishNode(P,"DoWhileStatement")},K.parseForStatement=function(P){this.next();var re=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(ie),this.enterScope(0),this.expect(xe.parenL),this.type===xe.semi)return re>-1&&this.unexpected(re),this.parseFor(P,null);var Re=this.isLet();if(this.type===xe._var||this.type===xe._const||Re){var at=this.startNode(),kt=Re?"let":this.value;return this.next(),this.parseVar(at,!0,kt),this.finishNode(at,"VariableDeclaration"),(this.type===xe._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&at.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===xe._in?re>-1&&this.unexpected(re):P.await=re>-1),this.parseForIn(P,at)):(re>-1&&this.unexpected(re),this.parseFor(P,at))}var ri=this.isContextual("let"),_i=!1,Qi=new Q,Xi=this.parseExpression(re>-1?"await":!0,Qi);return this.type===xe._in||(_i=this.options.ecmaVersion>=6&&this.isContextual("of"))?(this.options.ecmaVersion>=9&&(this.type===xe._in?re>-1&&this.unexpected(re):P.await=re>-1),ri&&_i&&this.raise(Xi.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(Xi,!1,Qi),this.checkLValPattern(Xi),this.parseForIn(P,Xi)):(this.checkExpressionErrors(Qi,!0),re>-1&&this.unexpected(re),this.parseFor(P,Xi))},K.parseFunctionStatement=function(P,re,Re){return this.next(),this.parseFunction(P,ye|(Re?0:Le),!1,re)},K.parseIfStatement=function(P){return this.next(),P.test=this.parseParenExpression(),P.consequent=this.parseStatement("if"),P.alternate=this.eat(xe._else)?this.parseStatement("if"):null,this.finishNode(P,"IfStatement")},K.parseReturnStatement=function(P){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(xe.semi)||this.insertSemicolon()?P.argument=null:(P.argument=this.parseExpression(),this.semicolon()),this.finishNode(P,"ReturnStatement")},K.parseSwitchStatement=function(P){this.next(),P.discriminant=this.parseParenExpression(),P.cases=[],this.expect(xe.braceL),this.labels.push(Ae),this.enterScope(0);for(var re,Re=!1;this.type!==xe.braceR;)if(this.type===xe._case||this.type===xe._default){var at=this.type===xe._case;re&&this.finishNode(re,"SwitchCase"),P.cases.push(re=this.startNode()),re.consequent=[],this.next(),at?re.test=this.parseExpression():(Re&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),Re=!0,re.test=null),this.expect(xe.colon)}else re||this.unexpected(),re.consequent.push(this.parseStatement(null));return this.exitScope(),re&&this.finishNode(re,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(P,"SwitchStatement")},K.parseThrowStatement=function(P){return this.next(),Gt.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),P.argument=this.parseExpression(),this.semicolon(),this.finishNode(P,"ThrowStatement")};var fe=[];K.parseCatchClauseParam=function(){var P=this.parseBindingAtom(),re=P.type==="Identifier";return this.enterScope(re?zi:0),this.checkLValPattern(P,re?kn:ir),this.expect(xe.parenR),P},K.parseTryStatement=function(P){if(this.next(),P.block=this.parseBlock(),P.handler=null,this.type===xe._catch){var re=this.startNode();this.next(),this.eat(xe.parenL)?re.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),re.param=null,this.enterScope(0)),re.body=this.parseBlock(!1),this.exitScope(),P.handler=this.finishNode(re,"CatchClause")}return P.finalizer=this.eat(xe._finally)?this.parseBlock():null,!P.handler&&!P.finalizer&&this.raise(P.start,"Missing catch or finally clause"),this.finishNode(P,"TryStatement")},K.parseVarStatement=function(P,re,Re){return this.next(),this.parseVar(P,!1,re,Re),this.semicolon(),this.finishNode(P,"VariableDeclaration")},K.parseWhileStatement=function(P){return this.next(),P.test=this.parseParenExpression(),this.labels.push(ie),P.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(P,"WhileStatement")},K.parseWithStatement=function(P){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),P.object=this.parseParenExpression(),P.body=this.parseStatement("with"),this.finishNode(P,"WithStatement")},K.parseEmptyStatement=function(P){return this.next(),this.finishNode(P,"EmptyStatement")},K.parseLabeledStatement=function(P,re,Re,at){for(var kt=0,ri=this.labels;kt<ri.length;kt+=1){var _i=ri[kt];_i.name===re&&this.raise(Re.start,"Label '"+re+"' is already declared")}for(var Qi=this.type.isLoop?"loop":this.type===xe._switch?"switch":null,Xi=this.labels.length-1;Xi>=0;Xi--){var Nn=this.labels[Xi];if(Nn.statementStart===P.start)Nn.statementStart=this.start,Nn.kind=Qi;else break}return this.labels.push({name:re,kind:Qi,statementStart:this.start}),P.body=this.parseStatement(at?at.indexOf("label")===-1?at+"label":at:"label"),this.labels.pop(),P.label=Re,this.finishNode(P,"LabeledStatement")},K.parseExpressionStatement=function(P,re){return P.expression=re,this.semicolon(),this.finishNode(P,"ExpressionStatement")},K.parseBlock=function(P,re,Re){for(P===void 0&&(P=!0),re===void 0&&(re=this.startNode()),re.body=[],this.expect(xe.braceL),P&&this.enterScope(0);this.type!==xe.braceR;){var at=this.parseStatement(null);re.body.push(at)}return Re&&(this.strict=!1),this.next(),P&&this.exitScope(),this.finishNode(re,"BlockStatement")},K.parseFor=function(P,re){return P.init=re,this.expect(xe.semi),P.test=this.type===xe.semi?null:this.parseExpression(),this.expect(xe.semi),P.update=this.type===xe.parenR?null:this.parseExpression(),this.expect(xe.parenR),P.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(P,"ForStatement")},K.parseForIn=function(P,re){var Re=this.type===xe._in;return this.next(),re.type==="VariableDeclaration"&&re.declarations[0].init!=null&&(!Re||this.options.ecmaVersion<8||this.strict||re.kind!=="var"||re.declarations[0].id.type!=="Identifier")&&this.raise(re.start,(Re?"for-in":"for-of")+" loop variable declaration may not have an initializer"),P.left=re,P.right=Re?this.parseExpression():this.parseMaybeAssign(),this.expect(xe.parenR),P.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(P,Re?"ForInStatement":"ForOfStatement")},K.parseVar=function(P,re,Re,at){for(P.declarations=[],P.kind=Re;;){var kt=this.startNode();if(this.parseVarId(kt,Re),this.eat(xe.eq)?kt.init=this.parseMaybeAssign(re):!at&&Re==="const"&&!(this.type===xe._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():!at&&kt.id.type!=="Identifier"&&!(re&&(this.type===xe._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):kt.init=null,P.declarations.push(this.finishNode(kt,"VariableDeclarator")),!this.eat(xe.comma))break}return P},K.parseVarId=function(P,re){P.id=this.parseBindingAtom(),this.checkLValPattern(P.id,re==="var"?Wi:ir,!1)};var ye=1,Le=2,we=4;K.parseFunction=function(P,re,Re,at,kt){this.initFunction(P),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!at)&&(this.type===xe.star&&re&Le&&this.unexpected(),P.generator=this.eat(xe.star)),this.options.ecmaVersion>=8&&(P.async=!!at),re&ye&&(P.id=re&we&&this.type!==xe.name?null:this.parseIdent(),P.id&&!(re&Le)&&this.checkLValSimple(P.id,this.strict||P.generator||P.async?this.treatFunctionsAsVar?Wi:ir:gn));var ri=this.yieldPos,_i=this.awaitPos,Qi=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(ar(P.async,P.generator)),re&ye||(P.id=this.type===xe.name?this.parseIdent():null),this.parseFunctionParams(P),this.parseFunctionBody(P,Re,!1,kt),this.yieldPos=ri,this.awaitPos=_i,this.awaitIdentPos=Qi,this.finishNode(P,re&ye?"FunctionDeclaration":"FunctionExpression")},K.parseFunctionParams=function(P){this.expect(xe.parenL),P.params=this.parseBindingList(xe.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},K.parseClass=function(P,re){this.next();var Re=this.strict;this.strict=!0,this.parseClassId(P,re),this.parseClassSuper(P);var at=this.enterClassBody(),kt=this.startNode(),ri=!1;for(kt.body=[],this.expect(xe.braceL);this.type!==xe.braceR;){var _i=this.parseClassElement(P.superClass!==null);_i&&(kt.body.push(_i),_i.type==="MethodDefinition"&&_i.kind==="constructor"?(ri&&this.raiseRecoverable(_i.start,"Duplicate constructor in the same class"),ri=!0):_i.key&&_i.key.type==="PrivateIdentifier"&&Te(at,_i)&&this.raiseRecoverable(_i.key.start,"Identifier '#"+_i.key.name+"' has already been declared"))}return this.strict=Re,this.next(),P.body=this.finishNode(kt,"ClassBody"),this.exitClassBody(),this.finishNode(P,re?"ClassDeclaration":"ClassExpression")},K.parseClassElement=function(P){if(this.eat(xe.semi))return null;var re=this.options.ecmaVersion,Re=this.startNode(),at="",kt=!1,ri=!1,_i="method",Qi=!1;if(this.eatContextual("static")){if(re>=13&&this.eat(xe.braceL))return this.parseClassStaticBlock(Re),Re;this.isClassElementNameStart()||this.type===xe.star?Qi=!0:at="static"}if(Re.static=Qi,!at&&re>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===xe.star)&&!this.canInsertSemicolon()?ri=!0:at="async"),!at&&(re>=9||!ri)&&this.eat(xe.star)&&(kt=!0),!at&&!ri&&!kt){var Xi=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?_i=Xi:at=Xi)}if(at?(Re.computed=!1,Re.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),Re.key.name=at,this.finishNode(Re.key,"Identifier")):this.parseClassElementName(Re),re<13||this.type===xe.parenL||_i!=="method"||kt||ri){var Nn=!Re.static&&Ce(Re,"constructor"),qn=Nn&&P;Nn&&_i!=="method"&&this.raise(Re.key.start,"Constructor can't have get/set modifier"),Re.kind=Nn?"constructor":_i,this.parseClassMethod(Re,kt,ri,qn)}else this.parseClassField(Re);return Re},K.isClassElementNameStart=function(){return this.type===xe.name||this.type===xe.privateId||this.type===xe.num||this.type===xe.string||this.type===xe.bracketL||this.type.keyword},K.parseClassElementName=function(P){this.type===xe.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),P.computed=!1,P.key=this.parsePrivateIdent()):this.parsePropertyName(P)},K.parseClassMethod=function(P,re,Re,at){var kt=P.key;P.kind==="constructor"?(re&&this.raise(kt.start,"Constructor can't be a generator"),Re&&this.raise(kt.start,"Constructor can't be an async method")):P.static&&Ce(P,"prototype")&&this.raise(kt.start,"Classes may not have a static property named prototype");var ri=P.value=this.parseMethod(re,Re,at);return P.kind==="get"&&ri.params.length!==0&&this.raiseRecoverable(ri.start,"getter should have no params"),P.kind==="set"&&ri.params.length!==1&&this.raiseRecoverable(ri.start,"setter should have exactly one param"),P.kind==="set"&&ri.params[0].type==="RestElement"&&this.raiseRecoverable(ri.params[0].start,"Setter cannot use rest params"),this.finishNode(P,"MethodDefinition")},K.parseClassField=function(P){if(Ce(P,"constructor")?this.raise(P.key.start,"Classes can't have a field named 'constructor'"):P.static&&Ce(P,"prototype")&&this.raise(P.key.start,"Classes can't have a static field named 'prototype'"),this.eat(xe.eq)){var re=this.currentThisScope(),Re=re.inClassFieldInit;re.inClassFieldInit=!0,P.value=this.parseMaybeAssign(),re.inClassFieldInit=Re}else P.value=null;return this.semicolon(),this.finishNode(P,"PropertyDefinition")},K.parseClassStaticBlock=function(P){P.body=[];var re=this.labels;for(this.labels=[],this.enterScope(ki|oi);this.type!==xe.braceR;){var Re=this.parseStatement(null);P.body.push(Re)}return this.next(),this.exitScope(),this.labels=re,this.finishNode(P,"StaticBlock")},K.parseClassId=function(P,re){this.type===xe.name?(P.id=this.parseIdent(),re&&this.checkLValSimple(P.id,ir,!1)):(re===!0&&this.unexpected(),P.id=null)},K.parseClassSuper=function(P){P.superClass=this.eat(xe._extends)?this.parseExprSubscripts(null,!1):null},K.enterClassBody=function(){var P={declared:Object.create(null),used:[]};return this.privateNameStack.push(P),P.declared},K.exitClassBody=function(){var P=this.privateNameStack.pop(),re=P.declared,Re=P.used;if(this.options.checkPrivateFields)for(var at=this.privateNameStack.length,kt=at===0?null:this.privateNameStack[at-1],ri=0;ri<Re.length;++ri){var _i=Re[ri];Fe(re,_i.name)||(kt?kt.used.push(_i):this.raiseRecoverable(_i.start,"Private field '#"+_i.name+"' must be declared in an enclosing class"))}};function Te(P,re){var Re=re.key.name,at=P[Re],kt="true";return re.type==="MethodDefinition"&&(re.kind==="get"||re.kind==="set")&&(kt=(re.static?"s":"i")+re.kind),at==="iget"&&kt==="iset"||at==="iset"&&kt==="iget"||at==="sget"&&kt==="sset"||at==="sset"&&kt==="sget"?(P[Re]="true",!1):at?!0:(P[Re]=kt,!1)}function Ce(P,re){var Re=P.computed,at=P.key;return!Re&&(at.type==="Identifier"&&at.name===re||at.type==="Literal"&&at.value===re)}K.parseExportAllDeclaration=function(P,re){return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(P.exported=this.parseModuleExportName(),this.checkExport(re,P.exported,this.lastTokStart)):P.exported=null),this.expectContextual("from"),this.type!==xe.string&&this.unexpected(),P.source=this.parseExprAtom(),this.semicolon(),this.finishNode(P,"ExportAllDeclaration")},K.parseExport=function(P,re){if(this.next(),this.eat(xe.star))return this.parseExportAllDeclaration(P,re);if(this.eat(xe._default))return this.checkExport(re,"default",this.lastTokStart),P.declaration=this.parseExportDefaultDeclaration(),this.finishNode(P,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())P.declaration=this.parseExportDeclaration(P),P.declaration.type==="VariableDeclaration"?this.checkVariableExport(re,P.declaration.declarations):this.checkExport(re,P.declaration.id,P.declaration.id.start),P.specifiers=[],P.source=null;else{if(P.declaration=null,P.specifiers=this.parseExportSpecifiers(re),this.eatContextual("from"))this.type!==xe.string&&this.unexpected(),P.source=this.parseExprAtom();else{for(var Re=0,at=P.specifiers;Re<at.length;Re+=1){var kt=at[Re];this.checkUnreserved(kt.local),this.checkLocalExport(kt.local),kt.local.type==="Literal"&&this.raise(kt.local.start,"A string literal cannot be used as an exported binding without `from`.")}P.source=null}this.semicolon()}return this.finishNode(P,"ExportNamedDeclaration")},K.parseExportDeclaration=function(P){return this.parseStatement(null)},K.parseExportDefaultDeclaration=function(){var P;if(this.type===xe._function||(P=this.isAsyncFunction())){var re=this.startNode();return this.next(),P&&this.next(),this.parseFunction(re,ye|we,!1,P)}else if(this.type===xe._class){var Re=this.startNode();return this.parseClass(Re,"nullableID")}else{var at=this.parseMaybeAssign();return this.semicolon(),at}},K.checkExport=function(P,re,Re){P&&(typeof re!="string"&&(re=re.type==="Identifier"?re.name:re.value),Fe(P,re)&&this.raiseRecoverable(Re,"Duplicate export '"+re+"'"),P[re]=!0)},K.checkPatternExport=function(P,re){var Re=re.type;if(Re==="Identifier")this.checkExport(P,re,re.start);else if(Re==="ObjectPattern")for(var at=0,kt=re.properties;at<kt.length;at+=1){var ri=kt[at];this.checkPatternExport(P,ri)}else if(Re==="ArrayPattern")for(var _i=0,Qi=re.elements;_i<Qi.length;_i+=1){var Xi=Qi[_i];Xi&&this.checkPatternExport(P,Xi)}else Re==="Property"?this.checkPatternExport(P,re.value):Re==="AssignmentPattern"?this.checkPatternExport(P,re.left):Re==="RestElement"&&this.checkPatternExport(P,re.argument)},K.checkVariableExport=function(P,re){if(P)for(var Re=0,at=re;Re<at.length;Re+=1){var kt=at[Re];this.checkPatternExport(P,kt.id)}},K.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()},K.parseExportSpecifier=function(P){var re=this.startNode();return re.local=this.parseModuleExportName(),re.exported=this.eatContextual("as")?this.parseModuleExportName():re.local,this.checkExport(P,re.exported,re.exported.start),this.finishNode(re,"ExportSpecifier")},K.parseExportSpecifiers=function(P){var re=[],Re=!0;for(this.expect(xe.braceL);!this.eat(xe.braceR);){if(Re)Re=!1;else if(this.expect(xe.comma),this.afterTrailingComma(xe.braceR))break;re.push(this.parseExportSpecifier(P))}return re},K.parseImport=function(P){return this.next(),this.type===xe.string?(P.specifiers=fe,P.source=this.parseExprAtom()):(P.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),P.source=this.type===xe.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(P,"ImportDeclaration")},K.parseImportSpecifier=function(){var P=this.startNode();return P.imported=this.parseModuleExportName(),this.eatContextual("as")?P.local=this.parseIdent():(this.checkUnreserved(P.imported),P.local=P.imported),this.checkLValSimple(P.local,ir),this.finishNode(P,"ImportSpecifier")},K.parseImportDefaultSpecifier=function(){var P=this.startNode();return P.local=this.parseIdent(),this.checkLValSimple(P.local,ir),this.finishNode(P,"ImportDefaultSpecifier")},K.parseImportNamespaceSpecifier=function(){var P=this.startNode();return this.next(),this.expectContextual("as"),P.local=this.parseIdent(),this.checkLValSimple(P.local,ir),this.finishNode(P,"ImportNamespaceSpecifier")},K.parseImportSpecifiers=function(){var P=[],re=!0;if(this.type===xe.name&&(P.push(this.parseImportDefaultSpecifier()),!this.eat(xe.comma)))return P;if(this.type===xe.star)return P.push(this.parseImportNamespaceSpecifier()),P;for(this.expect(xe.braceL);!this.eat(xe.braceR);){if(re)re=!1;else if(this.expect(xe.comma),this.afterTrailingComma(xe.braceR))break;P.push(this.parseImportSpecifier())}return P},K.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===xe.string){var P=this.parseLiteral(this.value);return di.test(P.value)&&this.raise(P.start,"An export name cannot include a lone surrogate."),P}return this.parseIdent(!0)},K.adaptDirectivePrologue=function(P){for(var re=0;re<P.length&&this.isDirectiveCandidate(P[re]);++re)P[re].directive=P[re].expression.raw.slice(1,-1)},K.isDirectiveCandidate=function(P){return this.options.ecmaVersion>=5&&P.type==="ExpressionStatement"&&P.expression.type==="Literal"&&typeof P.expression.value=="string"&&(this.input[P.start]==='"'||this.input[P.start]==="'")};var je=d.prototype;je.toAssignable=function(P,re,Re){if(this.options.ecmaVersion>=6&&P)switch(P.type){case"Identifier":this.inAsync&&P.name==="await"&&this.raise(P.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":P.type="ObjectPattern",Re&&this.checkPatternErrors(Re,!0);for(var at=0,kt=P.properties;at<kt.length;at+=1){var ri=kt[at];this.toAssignable(ri,re),ri.type==="RestElement"&&(ri.argument.type==="ArrayPattern"||ri.argument.type==="ObjectPattern")&&this.raise(ri.argument.start,"Unexpected token")}break;case"Property":P.kind!=="init"&&this.raise(P.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(P.value,re);break;case"ArrayExpression":P.type="ArrayPattern",Re&&this.checkPatternErrors(Re,!0),this.toAssignableList(P.elements,re);break;case"SpreadElement":P.type="RestElement",this.toAssignable(P.argument,re),P.argument.type==="AssignmentPattern"&&this.raise(P.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":P.operator!=="="&&this.raise(P.left.end,"Only '=' operator can be used for specifying default value."),P.type="AssignmentPattern",delete P.operator,this.toAssignable(P.left,re);break;case"ParenthesizedExpression":this.toAssignable(P.expression,re,Re);break;case"ChainExpression":this.raiseRecoverable(P.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!re)break;default:this.raise(P.start,"Assigning to rvalue")}else Re&&this.checkPatternErrors(Re,!0);return P},je.toAssignableList=function(P,re){for(var Re=P.length,at=0;at<Re;at++){var kt=P[at];kt&&this.toAssignable(kt,re)}if(Re){var ri=P[Re-1];this.options.ecmaVersion===6&&re&&ri&&ri.type==="RestElement"&&ri.argument.type!=="Identifier"&&this.unexpected(ri.argument.start)}return P},je.parseSpread=function(P){var re=this.startNode();return this.next(),re.argument=this.parseMaybeAssign(!1,P),this.finishNode(re,"SpreadElement")},je.parseRestBinding=function(){var P=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==xe.name&&this.unexpected(),P.argument=this.parseBindingAtom(),this.finishNode(P,"RestElement")},je.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case xe.bracketL:var P=this.startNode();return this.next(),P.elements=this.parseBindingList(xe.bracketR,!0,!0),this.finishNode(P,"ArrayPattern");case xe.braceL:return this.parseObj(!0)}return this.parseIdent()},je.parseBindingList=function(P,re,Re,at){for(var kt=[],ri=!0;!this.eat(P);)if(ri?ri=!1:this.expect(xe.comma),re&&this.type===xe.comma)kt.push(null);else{if(Re&&this.afterTrailingComma(P))break;if(this.type===xe.ellipsis){var _i=this.parseRestBinding();this.parseBindingListItem(_i),kt.push(_i),this.type===xe.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(P);break}else kt.push(this.parseAssignableListItem(at))}return kt},je.parseAssignableListItem=function(P){var re=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(re),re},je.parseBindingListItem=function(P){return P},je.parseMaybeDefault=function(P,re,Re){if(Re=Re||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(xe.eq))return Re;var at=this.startNodeAt(P,re);return at.left=Re,at.right=this.parseMaybeAssign(),this.finishNode(at,"AssignmentPattern")},je.checkLValSimple=function(P,re,Re){re===void 0&&(re=ti);var at=re!==ti;switch(P.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(P.name)&&this.raiseRecoverable(P.start,(at?"Binding ":"Assigning to ")+P.name+" in strict mode"),at&&(re===ir&&P.name==="let"&&this.raiseRecoverable(P.start,"let is disallowed as a lexically bound name"),Re&&(Fe(Re,P.name)&&this.raiseRecoverable(P.start,"Argument name clash"),Re[P.name]=!0),re!==an&&this.declareName(P.name,re,P.start));break;case"ChainExpression":this.raiseRecoverable(P.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":at&&this.raiseRecoverable(P.start,"Binding member expression");break;case"ParenthesizedExpression":return at&&this.raiseRecoverable(P.start,"Binding parenthesized expression"),this.checkLValSimple(P.expression,re,Re);default:this.raise(P.start,(at?"Binding":"Assigning to")+" rvalue")}},je.checkLValPattern=function(P,re,Re){switch(re===void 0&&(re=ti),P.type){case"ObjectPattern":for(var at=0,kt=P.properties;at<kt.length;at+=1){var ri=kt[at];this.checkLValInnerPattern(ri,re,Re)}break;case"ArrayPattern":for(var _i=0,Qi=P.elements;_i<Qi.length;_i+=1){var Xi=Qi[_i];Xi&&this.checkLValInnerPattern(Xi,re,Re)}break;default:this.checkLValSimple(P,re,Re)}},je.checkLValInnerPattern=function(P,re,Re){switch(re===void 0&&(re=ti),P.type){case"Property":this.checkLValInnerPattern(P.value,re,Re);break;case"AssignmentPattern":this.checkLValPattern(P.left,re,Re);break;case"RestElement":this.checkLValPattern(P.argument,re,Re);break;default:this.checkLValPattern(P,re,Re)}};var Ne=function(re,Re,at,kt,ri){this.token=re,this.isExpr=!!Re,this.preserveSpace=!!at,this.override=kt,this.generator=!!ri},Ue={b_stat:new Ne("{",!1),b_expr:new Ne("{",!0),b_tmpl:new Ne("${",!1),p_stat:new Ne("(",!1),p_expr:new Ne("(",!0),q_tmpl:new Ne("`",!0,!0,function(P){return P.tryReadTemplateToken()}),f_stat:new Ne("function",!1),f_expr:new Ne("function",!0),f_expr_gen:new Ne("function",!0,!1,null,!0),f_gen:new Ne("function",!1,!1,null,!0)},de=d.prototype;de.initialContext=function(){return[Ue.b_stat]},de.curContext=function(){return this.context[this.context.length-1]},de.braceIsBlock=function(P){var re=this.curContext();return re===Ue.f_expr||re===Ue.f_stat?!0:P===xe.colon&&(re===Ue.b_stat||re===Ue.b_expr)?!re.isExpr:P===xe._return||P===xe.name&&this.exprAllowed?Gt.test(this.input.slice(this.lastTokEnd,this.start)):P===xe._else||P===xe.semi||P===xe.eof||P===xe.parenR||P===xe.arrow?!0:P===xe.braceL?re===Ue.b_stat:P===xe._var||P===xe._const||P===xe.name?!1:!this.exprAllowed},de.inGeneratorContext=function(){for(var P=this.context.length-1;P>=1;P--){var re=this.context[P];if(re.token==="function")return re.generator}return!1},de.updateContext=function(P){var re,Re=this.type;Re.keyword&&P===xe.dot?this.exprAllowed=!1:(re=Re.updateContext)?re.call(this,P):this.exprAllowed=Re.beforeExpr},de.overrideContext=function(P){this.curContext()!==P&&(this.context[this.context.length-1]=P)},xe.parenR.updateContext=xe.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var P=this.context.pop();P===Ue.b_stat&&this.curContext().token==="function"&&(P=this.context.pop()),this.exprAllowed=!P.isExpr},xe.braceL.updateContext=function(P){this.context.push(this.braceIsBlock(P)?Ue.b_stat:Ue.b_expr),this.exprAllowed=!0},xe.dollarBraceL.updateContext=function(){this.context.push(Ue.b_tmpl),this.exprAllowed=!0},xe.parenL.updateContext=function(P){var re=P===xe._if||P===xe._for||P===xe._with||P===xe._while;this.context.push(re?Ue.p_stat:Ue.p_expr),this.exprAllowed=!0},xe.incDec.updateContext=function(){},xe._function.updateContext=xe._class.updateContext=function(P){P.beforeExpr&&P!==xe._else&&!(P===xe.semi&&this.curContext()!==Ue.p_stat)&&!(P===xe._return&&Gt.test(this.input.slice(this.lastTokEnd,this.start)))&&!((P===xe.colon||P===xe.braceL)&&this.curContext()===Ue.b_stat)?this.context.push(Ue.f_expr):this.context.push(Ue.f_stat),this.exprAllowed=!1},xe.colon.updateContext=function(){this.curContext().token==="function"&&this.context.pop(),this.exprAllowed=!0},xe.backQuote.updateContext=function(){this.curContext()===Ue.q_tmpl?this.context.pop():this.context.push(Ue.q_tmpl),this.exprAllowed=!1},xe.star.updateContext=function(P){if(P===xe._function){var re=this.context.length-1;this.context[re]===Ue.f_expr?this.context[re]=Ue.f_expr_gen:this.context[re]=Ue.f_gen}this.exprAllowed=!0},xe.name.updateContext=function(P){var re=!1;this.options.ecmaVersion>=6&&P!==xe.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(re=!0),this.exprAllowed=re};var ue=d.prototype;ue.checkPropClash=function(P,re,Re){if(!(this.options.ecmaVersion>=9&&P.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(P.computed||P.method||P.shorthand))){var at=P.key,kt;switch(at.type){case"Identifier":kt=at.name;break;case"Literal":kt=String(at.value);break;default:return}var ri=P.kind;if(this.options.ecmaVersion>=6){kt==="__proto__"&&ri==="init"&&(re.proto&&(Re?Re.doubleProto<0&&(Re.doubleProto=at.start):this.raiseRecoverable(at.start,"Redefinition of __proto__ property")),re.proto=!0);return}kt="$"+kt;var _i=re[kt];if(_i){var Qi;ri==="init"?Qi=this.strict&&_i.init||_i.get||_i.set:Qi=_i.init||_i[ri],Qi&&this.raiseRecoverable(at.start,"Redefinition of property")}else _i=re[kt]={init:!1,get:!1,set:!1};_i[ri]=!0}},ue.parseExpression=function(P,re){var Re=this.start,at=this.startLoc,kt=this.parseMaybeAssign(P,re);if(this.type===xe.comma){var ri=this.startNodeAt(Re,at);for(ri.expressions=[kt];this.eat(xe.comma);)ri.expressions.push(this.parseMaybeAssign(P,re));return this.finishNode(ri,"SequenceExpression")}return kt},ue.parseMaybeAssign=function(P,re,Re){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(P);this.exprAllowed=!1}var at=!1,kt=-1,ri=-1,_i=-1;re?(kt=re.parenthesizedAssign,ri=re.trailingComma,_i=re.doubleProto,re.parenthesizedAssign=re.trailingComma=-1):(re=new Q,at=!0);var Qi=this.start,Xi=this.startLoc;(this.type===xe.parenL||this.type===xe.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=P==="await");var Nn=this.parseMaybeConditional(P,re);if(Re&&(Nn=Re.call(this,Nn,Qi,Xi)),this.type.isAssign){var qn=this.startNodeAt(Qi,Xi);return qn.operator=this.value,this.type===xe.eq&&(Nn=this.toAssignable(Nn,!1,re)),at||(re.parenthesizedAssign=re.trailingComma=re.doubleProto=-1),re.shorthandAssign>=Nn.start&&(re.shorthandAssign=-1),this.type===xe.eq?this.checkLValPattern(Nn):this.checkLValSimple(Nn),qn.left=Nn,this.next(),qn.right=this.parseMaybeAssign(P),_i>-1&&(re.doubleProto=_i),this.finishNode(qn,"AssignmentExpression")}else at&&this.checkExpressionErrors(re,!0);return kt>-1&&(re.parenthesizedAssign=kt),ri>-1&&(re.trailingComma=ri),Nn},ue.parseMaybeConditional=function(P,re){var Re=this.start,at=this.startLoc,kt=this.parseExprOps(P,re);if(this.checkExpressionErrors(re))return kt;if(this.eat(xe.question)){var ri=this.startNodeAt(Re,at);return ri.test=kt,ri.consequent=this.parseMaybeAssign(),this.expect(xe.colon),ri.alternate=this.parseMaybeAssign(P),this.finishNode(ri,"ConditionalExpression")}return kt},ue.parseExprOps=function(P,re){var Re=this.start,at=this.startLoc,kt=this.parseMaybeUnary(re,!1,!1,P);return this.checkExpressionErrors(re)||kt.start===Re&&kt.type==="ArrowFunctionExpression"?kt:this.parseExprOp(kt,Re,at,-1,P)},ue.parseExprOp=function(P,re,Re,at,kt){var ri=this.type.binop;if(ri!=null&&(!kt||this.type!==xe._in)&&ri>at){var _i=this.type===xe.logicalOR||this.type===xe.logicalAND,Qi=this.type===xe.coalesce;Qi&&(ri=xe.logicalAND.binop);var Xi=this.value;this.next();var Nn=this.start,qn=this.startLoc,yr=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,kt),Nn,qn,ri,kt),Ma=this.buildBinary(re,Re,P,yr,Xi,_i||Qi);return(_i&&this.type===xe.coalesce||Qi&&(this.type===xe.logicalOR||this.type===xe.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(Ma,re,Re,at,kt)}return P},ue.buildBinary=function(P,re,Re,at,kt,ri){at.type==="PrivateIdentifier"&&this.raise(at.start,"Private identifier can only be left side of binary expression");var _i=this.startNodeAt(P,re);return _i.left=Re,_i.operator=kt,_i.right=at,this.finishNode(_i,ri?"LogicalExpression":"BinaryExpression")},ue.parseMaybeUnary=function(P,re,Re,at){var kt=this.start,ri=this.startLoc,_i;if(this.isContextual("await")&&this.canAwait)_i=this.parseAwait(at),re=!0;else if(this.type.prefix){var Qi=this.startNode(),Xi=this.type===xe.incDec;Qi.operator=this.value,Qi.prefix=!0,this.next(),Qi.argument=this.parseMaybeUnary(null,!0,Xi,at),this.checkExpressionErrors(P,!0),Xi?this.checkLValSimple(Qi.argument):this.strict&&Qi.operator==="delete"&&Qi.argument.type==="Identifier"?this.raiseRecoverable(Qi.start,"Deleting local variable in strict mode"):Qi.operator==="delete"&&Y(Qi.argument)?this.raiseRecoverable(Qi.start,"Private fields can not be deleted"):re=!0,_i=this.finishNode(Qi,Xi?"UpdateExpression":"UnaryExpression")}else if(!re&&this.type===xe.privateId)(at||this.privateNameStack.length===0)&&this.options.checkPrivateFields&&this.unexpected(),_i=this.parsePrivateIdent(),this.type!==xe._in&&this.unexpected();else{if(_i=this.parseExprSubscripts(P,at),this.checkExpressionErrors(P))return _i;for(;this.type.postfix&&!this.canInsertSemicolon();){var Nn=this.startNodeAt(kt,ri);Nn.operator=this.value,Nn.prefix=!1,Nn.argument=_i,this.checkLValSimple(_i),this.next(),_i=this.finishNode(Nn,"UpdateExpression")}}if(!Re&&this.eat(xe.starstar))if(re)this.unexpected(this.lastTokStart);else return this.buildBinary(kt,ri,_i,this.parseMaybeUnary(null,!1,!1,at),"**",!1);else return _i};function Y(P){return P.type==="MemberExpression"&&P.property.type==="PrivateIdentifier"||P.type==="ChainExpression"&&Y(P.expression)}ue.parseExprSubscripts=function(P,re){var Re=this.start,at=this.startLoc,kt=this.parseExprAtom(P,re);if(kt.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return kt;var ri=this.parseSubscripts(kt,Re,at,!1,re);return P&&ri.type==="MemberExpression"&&(P.parenthesizedAssign>=ri.start&&(P.parenthesizedAssign=-1),P.parenthesizedBind>=ri.start&&(P.parenthesizedBind=-1),P.trailingComma>=ri.start&&(P.trailingComma=-1)),ri},ue.parseSubscripts=function(P,re,Re,at,kt){for(var ri=this.options.ecmaVersion>=8&&P.type==="Identifier"&&P.name==="async"&&this.lastTokEnd===P.end&&!this.canInsertSemicolon()&&P.end-P.start===5&&this.potentialArrowAt===P.start,_i=!1;;){var Qi=this.parseSubscript(P,re,Re,at,ri,_i,kt);if(Qi.optional&&(_i=!0),Qi===P||Qi.type==="ArrowFunctionExpression"){if(_i){var Xi=this.startNodeAt(re,Re);Xi.expression=Qi,Qi=this.finishNode(Xi,"ChainExpression")}return Qi}P=Qi}},ue.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(xe.arrow)},ue.parseSubscriptAsyncArrow=function(P,re,Re,at){return this.parseArrowExpression(this.startNodeAt(P,re),Re,!0,at)},ue.parseSubscript=function(P,re,Re,at,kt,ri,_i){var Qi=this.options.ecmaVersion>=11,Xi=Qi&&this.eat(xe.questionDot);at&&Xi&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var Nn=this.eat(xe.bracketL);if(Nn||Xi&&this.type!==xe.parenL&&this.type!==xe.backQuote||this.eat(xe.dot)){var qn=this.startNodeAt(re,Re);qn.object=P,Nn?(qn.property=this.parseExpression(),this.expect(xe.bracketR)):this.type===xe.privateId&&P.type!=="Super"?qn.property=this.parsePrivateIdent():qn.property=this.parseIdent(this.options.allowReserved!=="never"),qn.computed=!!Nn,Qi&&(qn.optional=Xi),P=this.finishNode(qn,"MemberExpression")}else if(!at&&this.eat(xe.parenL)){var yr=new Q,Ma=this.yieldPos,Pa=this.awaitPos,Da=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var _o=this.parseExprList(xe.parenR,this.options.ecmaVersion>=8,!1,yr);if(kt&&!Xi&&this.shouldParseAsyncArrow())return this.checkPatternErrors(yr,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=Ma,this.awaitPos=Pa,this.awaitIdentPos=Da,this.parseSubscriptAsyncArrow(re,Re,_o,_i);this.checkExpressionErrors(yr,!0),this.yieldPos=Ma||this.yieldPos,this.awaitPos=Pa||this.awaitPos,this.awaitIdentPos=Da||this.awaitIdentPos;var or=this.startNodeAt(re,Re);or.callee=P,or.arguments=_o,Qi&&(or.optional=Xi),P=this.finishNode(or,"CallExpression")}else if(this.type===xe.backQuote){(Xi||ri)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var Ln=this.startNodeAt(re,Re);Ln.tag=P,Ln.quasi=this.parseTemplate({isTagged:!0}),P=this.finishNode(Ln,"TaggedTemplateExpression")}return P},ue.parseExprAtom=function(P,re,Re){this.type===xe.slash&&this.readRegexp();var at,kt=this.potentialArrowAt===this.start;switch(this.type){case xe._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),at=this.startNode(),this.next(),this.type===xe.parenL&&!this.allowDirectSuper&&this.raise(at.start,"super() call outside constructor of a subclass"),this.type!==xe.dot&&this.type!==xe.bracketL&&this.type!==xe.parenL&&this.unexpected(),this.finishNode(at,"Super");case xe._this:return at=this.startNode(),this.next(),this.finishNode(at,"ThisExpression");case xe.name:var ri=this.start,_i=this.startLoc,Qi=this.containsEsc,Xi=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!Qi&&Xi.name==="async"&&!this.canInsertSemicolon()&&this.eat(xe._function))return this.overrideContext(Ue.f_expr),this.parseFunction(this.startNodeAt(ri,_i),0,!1,!0,re);if(kt&&!this.canInsertSemicolon()){if(this.eat(xe.arrow))return this.parseArrowExpression(this.startNodeAt(ri,_i),[Xi],!1,re);if(this.options.ecmaVersion>=8&&Xi.name==="async"&&this.type===xe.name&&!Qi&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return Xi=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(xe.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(ri,_i),[Xi],!0,re)}return Xi;case xe.regexp:var Nn=this.value;return at=this.parseLiteral(Nn.value),at.regex={pattern:Nn.pattern,flags:Nn.flags},at;case xe.num:case xe.string:return this.parseLiteral(this.value);case xe._null:case xe._true:case xe._false:return at=this.startNode(),at.value=this.type===xe._null?null:this.type===xe._true,at.raw=this.type.keyword,this.next(),this.finishNode(at,"Literal");case xe.parenL:var qn=this.start,yr=this.parseParenAndDistinguishExpression(kt,re);return P&&(P.parenthesizedAssign<0&&!this.isSimpleAssignTarget(yr)&&(P.parenthesizedAssign=qn),P.parenthesizedBind<0&&(P.parenthesizedBind=qn)),yr;case xe.bracketL:return at=this.startNode(),this.next(),at.elements=this.parseExprList(xe.bracketR,!0,!0,P),this.finishNode(at,"ArrayExpression");case xe.braceL:return this.overrideContext(Ue.b_expr),this.parseObj(!1,P);case xe._function:return at=this.startNode(),this.next(),this.parseFunction(at,0);case xe._class:return this.parseClass(this.startNode(),!1);case xe._new:return this.parseNew();case xe.backQuote:return this.parseTemplate();case xe._import:return this.options.ecmaVersion>=11?this.parseExprImport(Re):this.unexpected();default:return this.parseExprAtomDefault()}},ue.parseExprAtomDefault=function(){this.unexpected()},ue.parseExprImport=function(P){var re=this.startNode();if(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import"),this.next(),this.type===xe.parenL&&!P)return this.parseDynamicImport(re);if(this.type===xe.dot){var Re=this.startNodeAt(re.start,re.loc&&re.loc.start);return Re.name="import",re.meta=this.finishNode(Re,"Identifier"),this.parseImportMeta(re)}else this.unexpected()},ue.parseDynamicImport=function(P){if(this.next(),P.source=this.parseMaybeAssign(),!this.eat(xe.parenR)){var re=this.start;this.eat(xe.comma)&&this.eat(xe.parenR)?this.raiseRecoverable(re,"Trailing comma is not allowed in import()"):this.unexpected(re)}return this.finishNode(P,"ImportExpression")},ue.parseImportMeta=function(P){this.next();var re=this.containsEsc;return P.property=this.parseIdent(!0),P.property.name!=="meta"&&this.raiseRecoverable(P.property.start,"The only valid meta property for import is 'import.meta'"),re&&this.raiseRecoverable(P.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(P.start,"Cannot use 'import.meta' outside a module"),this.finishNode(P,"MetaProperty")},ue.parseLiteral=function(P){var re=this.startNode();return re.value=P,re.raw=this.input.slice(this.start,this.end),re.raw.charCodeAt(re.raw.length-1)===110&&(re.bigint=re.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(re,"Literal")},ue.parseParenExpression=function(){this.expect(xe.parenL);var P=this.parseExpression();return this.expect(xe.parenR),P},ue.shouldParseArrow=function(P){return!this.canInsertSemicolon()},ue.parseParenAndDistinguishExpression=function(P,re){var Re=this.start,at=this.startLoc,kt,ri=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var _i=this.start,Qi=this.startLoc,Xi=[],Nn=!0,qn=!1,yr=new Q,Ma=this.yieldPos,Pa=this.awaitPos,Da;for(this.yieldPos=0,this.awaitPos=0;this.type!==xe.parenR;)if(Nn?Nn=!1:this.expect(xe.comma),ri&&this.afterTrailingComma(xe.parenR,!0)){qn=!0;break}else if(this.type===xe.ellipsis){Da=this.start,Xi.push(this.parseParenItem(this.parseRestBinding())),this.type===xe.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}else Xi.push(this.parseMaybeAssign(!1,yr,this.parseParenItem));var _o=this.lastTokEnd,or=this.lastTokEndLoc;if(this.expect(xe.parenR),P&&this.shouldParseArrow(Xi)&&this.eat(xe.arrow))return this.checkPatternErrors(yr,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=Ma,this.awaitPos=Pa,this.parseParenArrowList(Re,at,Xi,re);(!Xi.length||qn)&&this.unexpected(this.lastTokStart),Da&&this.unexpected(Da),this.checkExpressionErrors(yr,!0),this.yieldPos=Ma||this.yieldPos,this.awaitPos=Pa||this.awaitPos,Xi.length>1?(kt=this.startNodeAt(_i,Qi),kt.expressions=Xi,this.finishNodeAt(kt,"SequenceExpression",_o,or)):kt=Xi[0]}else kt=this.parseParenExpression();if(this.options.preserveParens){var Ln=this.startNodeAt(Re,at);return Ln.expression=kt,this.finishNode(Ln,"ParenthesizedExpression")}else return kt},ue.parseParenItem=function(P){return P},ue.parseParenArrowList=function(P,re,Re,at){return this.parseArrowExpression(this.startNodeAt(P,re),Re,!1,at)};var ne=[];ue.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var P=this.startNode();if(this.next(),this.options.ecmaVersion>=6&&this.type===xe.dot){var re=this.startNodeAt(P.start,P.loc&&P.loc.start);re.name="new",P.meta=this.finishNode(re,"Identifier"),this.next();var Re=this.containsEsc;return P.property=this.parseIdent(!0),P.property.name!=="target"&&this.raiseRecoverable(P.property.start,"The only valid meta property for new is 'new.target'"),Re&&this.raiseRecoverable(P.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(P.start,"'new.target' can only be used in functions and class static block"),this.finishNode(P,"MetaProperty")}var at=this.start,kt=this.startLoc;return P.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),at,kt,!0,!1),this.eat(xe.parenL)?P.arguments=this.parseExprList(xe.parenR,this.options.ecmaVersion>=8,!1):P.arguments=ne,this.finishNode(P,"NewExpression")},ue.parseTemplateElement=function(P){var re=P.isTagged,Re=this.startNode();return this.type===xe.invalidTemplate?(re||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),Re.value={raw:this.value,cooked:null}):Re.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),Re.tail=this.type===xe.backQuote,this.finishNode(Re,"TemplateElement")},ue.parseTemplate=function(P){P===void 0&&(P={});var re=P.isTagged;re===void 0&&(re=!1);var Re=this.startNode();this.next(),Re.expressions=[];var at=this.parseTemplateElement({isTagged:re});for(Re.quasis=[at];!at.tail;)this.type===xe.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(xe.dollarBraceL),Re.expressions.push(this.parseExpression()),this.expect(xe.braceR),Re.quasis.push(at=this.parseTemplateElement({isTagged:re}));return this.next(),this.finishNode(Re,"TemplateLiteral")},ue.isAsyncProp=function(P){return!P.computed&&P.key.type==="Identifier"&&P.key.name==="async"&&(this.type===xe.name||this.type===xe.num||this.type===xe.string||this.type===xe.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===xe.star)&&!Gt.test(this.input.slice(this.lastTokEnd,this.start))},ue.parseObj=function(P,re){var Re=this.startNode(),at=!0,kt={};for(Re.properties=[],this.next();!this.eat(xe.braceR);){if(at)at=!1;else if(this.expect(xe.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(xe.braceR))break;var ri=this.parseProperty(P,re);P||this.checkPropClash(ri,kt,re),Re.properties.push(ri)}return this.finishNode(Re,P?"ObjectPattern":"ObjectExpression")},ue.parseProperty=function(P,re){var Re=this.startNode(),at,kt,ri,_i;if(this.options.ecmaVersion>=9&&this.eat(xe.ellipsis))return P?(Re.argument=this.parseIdent(!1),this.type===xe.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(Re,"RestElement")):(Re.argument=this.parseMaybeAssign(!1,re),this.type===xe.comma&&re&&re.trailingComma<0&&(re.trailingComma=this.start),this.finishNode(Re,"SpreadElement"));this.options.ecmaVersion>=6&&(Re.method=!1,Re.shorthand=!1,(P||re)&&(ri=this.start,_i=this.startLoc),P||(at=this.eat(xe.star)));var Qi=this.containsEsc;return this.parsePropertyName(Re),!P&&!Qi&&this.options.ecmaVersion>=8&&!at&&this.isAsyncProp(Re)?(kt=!0,at=this.options.ecmaVersion>=9&&this.eat(xe.star),this.parsePropertyName(Re)):kt=!1,this.parsePropertyValue(Re,P,at,kt,ri,_i,re,Qi),this.finishNode(Re,"Property")},ue.parseGetterSetter=function(P){P.kind=P.key.name,this.parsePropertyName(P),P.value=this.parseMethod(!1);var re=P.kind==="get"?0:1;if(P.value.params.length!==re){var Re=P.value.start;P.kind==="get"?this.raiseRecoverable(Re,"getter should have no params"):this.raiseRecoverable(Re,"setter should have exactly one param")}else P.kind==="set"&&P.value.params[0].type==="RestElement"&&this.raiseRecoverable(P.value.params[0].start,"Setter cannot use rest params")},ue.parsePropertyValue=function(P,re,Re,at,kt,ri,_i,Qi){(Re||at)&&this.type===xe.colon&&this.unexpected(),this.eat(xe.colon)?(P.value=re?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,_i),P.kind="init"):this.options.ecmaVersion>=6&&this.type===xe.parenL?(re&&this.unexpected(),P.kind="init",P.method=!0,P.value=this.parseMethod(Re,at)):!re&&!Qi&&this.options.ecmaVersion>=5&&!P.computed&&P.key.type==="Identifier"&&(P.key.name==="get"||P.key.name==="set")&&this.type!==xe.comma&&this.type!==xe.braceR&&this.type!==xe.eq?((Re||at)&&this.unexpected(),this.parseGetterSetter(P)):this.options.ecmaVersion>=6&&!P.computed&&P.key.type==="Identifier"?((Re||at)&&this.unexpected(),this.checkUnreserved(P.key),P.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=kt),P.kind="init",re?P.value=this.parseMaybeDefault(kt,ri,this.copyNode(P.key)):this.type===xe.eq&&_i?(_i.shorthandAssign<0&&(_i.shorthandAssign=this.start),P.value=this.parseMaybeDefault(kt,ri,this.copyNode(P.key))):P.value=this.copyNode(P.key),P.shorthand=!0):this.unexpected()},ue.parsePropertyName=function(P){if(this.options.ecmaVersion>=6){if(this.eat(xe.bracketL))return P.computed=!0,P.key=this.parseMaybeAssign(),this.expect(xe.bracketR),P.key;P.computed=!1}return P.key=this.type===xe.num||this.type===xe.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")},ue.initFunction=function(P){P.id=null,this.options.ecmaVersion>=6&&(P.generator=P.expression=!1),this.options.ecmaVersion>=8&&(P.async=!1)},ue.parseMethod=function(P,re,Re){var at=this.startNode(),kt=this.yieldPos,ri=this.awaitPos,_i=this.awaitIdentPos;return this.initFunction(at),this.options.ecmaVersion>=6&&(at.generator=P),this.options.ecmaVersion>=8&&(at.async=!!re),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(ar(re,at.generator)|oi|(Re?$i:0)),this.expect(xe.parenL),at.params=this.parseBindingList(xe.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(at,!1,!0,!1),this.yieldPos=kt,this.awaitPos=ri,this.awaitIdentPos=_i,this.finishNode(at,"FunctionExpression")},ue.parseArrowExpression=function(P,re,Re,at){var kt=this.yieldPos,ri=this.awaitPos,_i=this.awaitIdentPos;return this.enterScope(ar(Re,!1)|Oi),this.initFunction(P),this.options.ecmaVersion>=8&&(P.async=!!Re),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,P.params=this.toAssignableList(re,!0),this.parseFunctionBody(P,!0,!1,at),this.yieldPos=kt,this.awaitPos=ri,this.awaitIdentPos=_i,this.finishNode(P,"ArrowFunctionExpression")},ue.parseFunctionBody=function(P,re,Re,at){var kt=re&&this.type!==xe.braceL,ri=this.strict,_i=!1;if(kt)P.body=this.parseMaybeAssign(at),P.expression=!0,this.checkParams(P,!1);else{var Qi=this.options.ecmaVersion>=7&&!this.isSimpleParamList(P.params);(!ri||Qi)&&(_i=this.strictDirective(this.end),_i&&Qi&&this.raiseRecoverable(P.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var Xi=this.labels;this.labels=[],_i&&(this.strict=!0),this.checkParams(P,!ri&&!_i&&!re&&!Re&&this.isSimpleParamList(P.params)),this.strict&&P.id&&this.checkLValSimple(P.id,an),P.body=this.parseBlock(!1,void 0,_i&&!ri),P.expression=!1,this.adaptDirectivePrologue(P.body.body),this.labels=Xi}this.exitScope()},ue.isSimpleParamList=function(P){for(var re=0,Re=P;re<Re.length;re+=1){var at=Re[re];if(at.type!=="Identifier")return!1}return!0},ue.checkParams=function(P,re){for(var Re=Object.create(null),at=0,kt=P.params;at<kt.length;at+=1){var ri=kt[at];this.checkLValInnerPattern(ri,Wi,re?null:Re)}},ue.parseExprList=function(P,re,Re,at){for(var kt=[],ri=!0;!this.eat(P);){if(ri)ri=!1;else if(this.expect(xe.comma),re&&this.afterTrailingComma(P))break;var _i=void 0;Re&&this.type===xe.comma?_i=null:this.type===xe.ellipsis?(_i=this.parseSpread(at),at&&this.type===xe.comma&&at.trailingComma<0&&(at.trailingComma=this.start)):_i=this.parseMaybeAssign(!1,at),kt.push(_i)}return kt},ue.checkUnreserved=function(P){var re=P.start,Re=P.end,at=P.name;if(this.inGenerator&&at==="yield"&&this.raiseRecoverable(re,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&at==="await"&&this.raiseRecoverable(re,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&at==="arguments"&&this.raiseRecoverable(re,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(at==="arguments"||at==="await")&&this.raise(re,"Cannot use "+at+" in class static initialization block"),this.keywords.test(at)&&this.raise(re,"Unexpected keyword '"+at+"'"),!(this.options.ecmaVersion<6&&this.input.slice(re,Re).indexOf("\\")!==-1)){var kt=this.strict?this.reservedWordsStrict:this.reservedWords;kt.test(at)&&(!this.inAsync&&at==="await"&&this.raiseRecoverable(re,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(re,"The keyword '"+at+"' is reserved"))}},ue.parseIdent=function(P){var re=this.parseIdentNode();return this.next(!!P),this.finishNode(re,"Identifier"),P||(this.checkUnreserved(re),re.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=re.start)),re},ue.parseIdentNode=function(){var P=this.startNode();return this.type===xe.name?P.name=this.value:this.type.keyword?(P.name=this.type.keyword,(P.name==="class"||P.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop(),this.type=xe.name):this.unexpected(),P},ue.parsePrivateIdent=function(){var P=this.startNode();return this.type===xe.privateId?P.name=this.value:this.unexpected(),this.next(),this.finishNode(P,"PrivateIdentifier"),this.options.checkPrivateFields&&(this.privateNameStack.length===0?this.raise(P.start,"Private field '#"+P.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(P)),P},ue.parseYield=function(P){this.yieldPos||(this.yieldPos=this.start);var re=this.startNode();return this.next(),this.type===xe.semi||this.canInsertSemicolon()||this.type!==xe.star&&!this.type.startsExpr?(re.delegate=!1,re.argument=null):(re.delegate=this.eat(xe.star),re.argument=this.parseMaybeAssign(P)),this.finishNode(re,"YieldExpression")},ue.parseAwait=function(P){this.awaitPos||(this.awaitPos=this.start);var re=this.startNode();return this.next(),re.argument=this.parseMaybeUnary(null,!0,!1,P),this.finishNode(re,"AwaitExpression")};var he=d.prototype;he.raise=function(P,re){var Re=Vi(this.input,P);re+=" ("+Re.line+":"+Re.column+")";var at=new SyntaxError(re);throw at.pos=P,at.loc=Re,at.raisedAt=this.pos,at},he.raiseRecoverable=he.raise,he.curPosition=function(){if(this.options.locations)return new yi(this.curLine,this.pos-this.lineStart)};var me=d.prototype,pe=function(re){this.flags=re,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1};me.enterScope=function(P){this.scopeStack.push(new pe(P))},me.exitScope=function(){this.scopeStack.pop()},me.treatFunctionsAsVarInScope=function(P){return P.flags&Lt||!this.inModule&&P.flags&$t},me.declareName=function(P,re,Re){var at=!1;if(re===ir){var kt=this.currentScope();at=kt.lexical.indexOf(P)>-1||kt.functions.indexOf(P)>-1||kt.var.indexOf(P)>-1,kt.lexical.push(P),this.inModule&&kt.flags&$t&&delete this.undefinedExports[P]}else if(re===kn){var ri=this.currentScope();ri.lexical.push(P)}else if(re===gn){var _i=this.currentScope();this.treatFunctionsAsVar?at=_i.lexical.indexOf(P)>-1:at=_i.lexical.indexOf(P)>-1||_i.var.indexOf(P)>-1,_i.functions.push(P)}else for(var Qi=this.scopeStack.length-1;Qi>=0;--Qi){var Xi=this.scopeStack[Qi];if(Xi.lexical.indexOf(P)>-1&&!(Xi.flags&zi&&Xi.lexical[0]===P)||!this.treatFunctionsAsVarInScope(Xi)&&Xi.functions.indexOf(P)>-1){at=!0;break}if(Xi.var.push(P),this.inModule&&Xi.flags&$t&&delete this.undefinedExports[P],Xi.flags&sn)break}at&&this.raiseRecoverable(Re,"Identifier '"+P+"' has already been declared")},me.checkLocalExport=function(P){this.scopeStack[0].lexical.indexOf(P.name)===-1&&this.scopeStack[0].var.indexOf(P.name)===-1&&(this.undefinedExports[P.name]=P)},me.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]},me.currentVarScope=function(){for(var P=this.scopeStack.length-1;;P--){var re=this.scopeStack[P];if(re.flags&sn)return re}},me.currentThisScope=function(){for(var P=this.scopeStack.length-1;;P--){var re=this.scopeStack[P];if(re.flags&sn&&!(re.flags&Oi))return re}};var Oe=function(re,Re,at){this.type="",this.start=Re,this.end=0,re.options.locations&&(this.loc=new Ti(re,at)),re.options.directSourceFile&&(this.sourceFile=re.options.directSourceFile),re.options.ranges&&(this.range=[Re,0])},ze=d.prototype;ze.startNode=function(){return new Oe(this,this.start,this.startLoc)},ze.startNodeAt=function(P,re){return new Oe(this,P,re)};function Be(P,re,Re,at){return P.type=re,P.end=Re,this.options.locations&&(P.loc.end=at),this.options.ranges&&(P.range[1]=Re),P}ze.finishNode=function(P,re){return Be.call(this,P,re,this.lastTokEnd,this.lastTokEndLoc)},ze.finishNodeAt=function(P,re,Re,at){return Be.call(this,P,re,Re,at)},ze.copyNode=function(P){var re=new Oe(this,P.start,this.startLoc);for(var Re in P)re[Re]=P[Re];return re};var Ye="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",Xe=Ye+" Extended_Pictographic",ge=Xe,Ee=ge+" EBase EComp EMod EPres ExtPict",tt=Ee,pt=tt,n={9:Ye,10:Xe,11:ge,12:Ee,13:tt,14:pt},ce="Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji",Zt={9:"",10:"",11:"",12:"",13:"",14:ce},Jt="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",ui="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",Vt=ui+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",qt=Vt+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",Ei=qt+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",Ai=Ei+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",pi=Ai+" Hrkt Katakana_Or_Hiragana Kawi Nag_Mundari Nagm Unknown Zzzz",Rt={9:ui,10:Vt,11:qt,12:Ei,13:Ai,14:pi},Yi={};function Rn(P){var re=Yi[P]={binary:_t(n[P]+" "+Jt),binaryOfStrings:_t(Zt[P]),nonBinary:{General_Category:_t(Jt),Script:_t(Rt[P])}};re.nonBinary.Script_Extensions=re.nonBinary.Script,re.nonBinary.gc=re.nonBinary.General_Category,re.nonBinary.sc=re.nonBinary.Script,re.nonBinary.scx=re.nonBinary.Script_Extensions}for(var wn=0,pn=[9,10,11,12,13,14];wn<pn.length;wn+=1){var vr=pn[wn];Rn(vr)}var Mi=d.prototype,nr=function(re){this.parser=re,this.validFlags="gim"+(re.options.ecmaVersion>=6?"uy":"")+(re.options.ecmaVersion>=9?"s":"")+(re.options.ecmaVersion>=13?"d":"")+(re.options.ecmaVersion>=15?"v":""),this.unicodeProperties=Yi[re.options.ecmaVersion>=14?14:re.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};nr.prototype.reset=function(re,Re,at){var kt=at.indexOf("v")!==-1,ri=at.indexOf("u")!==-1;this.start=re|0,this.source=Re+"",this.flags=at,kt&&this.parser.options.ecmaVersion>=15?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=ri&&this.parser.options.ecmaVersion>=6,this.switchV=!1,this.switchN=ri&&this.parser.options.ecmaVersion>=9)},nr.prototype.raise=function(re){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+re)},nr.prototype.at=function(re,Re){Re===void 0&&(Re=!1);var at=this.source,kt=at.length;if(re>=kt)return-1;var ri=at.charCodeAt(re);if(!(Re||this.switchU)||ri<=55295||ri>=57344||re+1>=kt)return ri;var _i=at.charCodeAt(re+1);return _i>=56320&&_i<=57343?(ri<<10)+_i-56613888:ri},nr.prototype.nextIndex=function(re,Re){Re===void 0&&(Re=!1);var at=this.source,kt=at.length;if(re>=kt)return kt;var ri=at.charCodeAt(re),_i;return!(Re||this.switchU)||ri<=55295||ri>=57344||re+1>=kt||(_i=at.charCodeAt(re+1))<56320||_i>57343?re+1:re+2},nr.prototype.current=function(re){return re===void 0&&(re=!1),this.at(this.pos,re)},nr.prototype.lookahead=function(re){return re===void 0&&(re=!1),this.at(this.nextIndex(this.pos,re),re)},nr.prototype.advance=function(re){re===void 0&&(re=!1),this.pos=this.nextIndex(this.pos,re)},nr.prototype.eat=function(re,Re){return Re===void 0&&(Re=!1),this.current(Re)===re?(this.advance(Re),!0):!1},nr.prototype.eatChars=function(re,Re){Re===void 0&&(Re=!1);for(var at=this.pos,kt=0,ri=re;kt<ri.length;kt+=1){var _i=ri[kt],Qi=this.at(at,Re);if(Qi===-1||Qi!==_i)return!1;at=this.nextIndex(at,Re)}return this.pos=at,!0},Mi.validateRegExpFlags=function(P){for(var re=P.validFlags,Re=P.flags,at=!1,kt=!1,ri=0;ri<Re.length;ri++){var _i=Re.charAt(ri);re.indexOf(_i)===-1&&this.raise(P.start,"Invalid regular expression flag"),Re.indexOf(_i,ri+1)>-1&&this.raise(P.start,"Duplicate regular expression flag"),_i==="u"&&(at=!0),_i==="v"&&(kt=!0)}this.options.ecmaVersion>=15&&at&&kt&&this.raise(P.start,"Invalid regular expression flag")},Mi.validateRegExpPattern=function(P){this.regexp_pattern(P),!P.switchN&&this.options.ecmaVersion>=9&&P.groupNames.length>0&&(P.switchN=!0,this.regexp_pattern(P))},Mi.regexp_pattern=function(P){P.pos=0,P.lastIntValue=0,P.lastStringValue="",P.lastAssertionIsQuantifiable=!1,P.numCapturingParens=0,P.maxBackReference=0,P.groupNames.length=0,P.backReferenceNames.length=0,this.regexp_disjunction(P),P.pos!==P.source.length&&(P.eat(41)&&P.raise("Unmatched ')'"),(P.eat(93)||P.eat(125))&&P.raise("Lone quantifier brackets")),P.maxBackReference>P.numCapturingParens&&P.raise("Invalid escape");for(var re=0,Re=P.backReferenceNames;re<Re.length;re+=1){var at=Re[re];P.groupNames.indexOf(at)===-1&&P.raise("Invalid named capture referenced")}},Mi.regexp_disjunction=function(P){for(this.regexp_alternative(P);P.eat(124);)this.regexp_alternative(P);this.regexp_eatQuantifier(P,!0)&&P.raise("Nothing to repeat"),P.eat(123)&&P.raise("Lone quantifier brackets")},Mi.regexp_alternative=function(P){for(;P.pos<P.source.length&&this.regexp_eatTerm(P););},Mi.regexp_eatTerm=function(P){return this.regexp_eatAssertion(P)?(P.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(P)&&P.switchU&&P.raise("Invalid quantifier"),!0):(P.switchU?this.regexp_eatAtom(P):this.regexp_eatExtendedAtom(P))?(this.regexp_eatQuantifier(P),!0):!1},Mi.regexp_eatAssertion=function(P){var re=P.pos;if(P.lastAssertionIsQuantifiable=!1,P.eat(94)||P.eat(36))return!0;if(P.eat(92)){if(P.eat(66)||P.eat(98))return!0;P.pos=re}if(P.eat(40)&&P.eat(63)){var Re=!1;if(this.options.ecmaVersion>=9&&(Re=P.eat(60)),P.eat(61)||P.eat(33))return this.regexp_disjunction(P),P.eat(41)||P.raise("Unterminated group"),P.lastAssertionIsQuantifiable=!Re,!0}return P.pos=re,!1},Mi.regexp_eatQuantifier=function(P,re){return re===void 0&&(re=!1),this.regexp_eatQuantifierPrefix(P,re)?(P.eat(63),!0):!1},Mi.regexp_eatQuantifierPrefix=function(P,re){return P.eat(42)||P.eat(43)||P.eat(63)||this.regexp_eatBracedQuantifier(P,re)},Mi.regexp_eatBracedQuantifier=function(P,re){var Re=P.pos;if(P.eat(123)){var at=0,kt=-1;if(this.regexp_eatDecimalDigits(P)&&(at=P.lastIntValue,P.eat(44)&&this.regexp_eatDecimalDigits(P)&&(kt=P.lastIntValue),P.eat(125)))return kt!==-1&&kt<at&&!re&&P.raise("numbers out of order in {} quantifier"),!0;P.switchU&&!re&&P.raise("Incomplete quantifier"),P.pos=Re}return!1},Mi.regexp_eatAtom=function(P){return this.regexp_eatPatternCharacters(P)||P.eat(46)||this.regexp_eatReverseSolidusAtomEscape(P)||this.regexp_eatCharacterClass(P)||this.regexp_eatUncapturingGroup(P)||this.regexp_eatCapturingGroup(P)},Mi.regexp_eatReverseSolidusAtomEscape=function(P){var re=P.pos;if(P.eat(92)){if(this.regexp_eatAtomEscape(P))return!0;P.pos=re}return!1},Mi.regexp_eatUncapturingGroup=function(P){var re=P.pos;if(P.eat(40)){if(P.eat(63)&&P.eat(58)){if(this.regexp_disjunction(P),P.eat(41))return!0;P.raise("Unterminated group")}P.pos=re}return!1},Mi.regexp_eatCapturingGroup=function(P){if(P.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(P):P.current()===63&&P.raise("Invalid group"),this.regexp_disjunction(P),P.eat(41))return P.numCapturingParens+=1,!0;P.raise("Unterminated group")}return!1},Mi.regexp_eatExtendedAtom=function(P){return P.eat(46)||this.regexp_eatReverseSolidusAtomEscape(P)||this.regexp_eatCharacterClass(P)||this.regexp_eatUncapturingGroup(P)||this.regexp_eatCapturingGroup(P)||this.regexp_eatInvalidBracedQuantifier(P)||this.regexp_eatExtendedPatternCharacter(P)},Mi.regexp_eatInvalidBracedQuantifier=function(P){return this.regexp_eatBracedQuantifier(P,!0)&&P.raise("Nothing to repeat"),!1},Mi.regexp_eatSyntaxCharacter=function(P){var re=P.current();return fn(re)?(P.lastIntValue=re,P.advance(),!0):!1};function fn(P){return P===36||P>=40&&P<=43||P===46||P===63||P>=91&&P<=94||P>=123&&P<=125}Mi.regexp_eatPatternCharacters=function(P){for(var re=P.pos,Re=0;(Re=P.current())!==-1&&!fn(Re);)P.advance();return P.pos!==re},Mi.regexp_eatExtendedPatternCharacter=function(P){var re=P.current();return re!==-1&&re!==36&&!(re>=40&&re<=43)&&re!==46&&re!==63&&re!==91&&re!==94&&re!==124?(P.advance(),!0):!1},Mi.regexp_groupSpecifier=function(P){if(P.eat(63)){if(this.regexp_eatGroupName(P)){P.groupNames.indexOf(P.lastStringValue)!==-1&&P.raise("Duplicate capture group name"),P.groupNames.push(P.lastStringValue);return}P.raise("Invalid group")}},Mi.regexp_eatGroupName=function(P){if(P.lastStringValue="",P.eat(60)){if(this.regexp_eatRegExpIdentifierName(P)&&P.eat(62))return!0;P.raise("Invalid capture group name")}return!1},Mi.regexp_eatRegExpIdentifierName=function(P){if(P.lastStringValue="",this.regexp_eatRegExpIdentifierStart(P)){for(P.lastStringValue+=ei(P.lastIntValue);this.regexp_eatRegExpIdentifierPart(P);)P.lastStringValue+=ei(P.lastIntValue);return!0}return!1},Mi.regexp_eatRegExpIdentifierStart=function(P){var re=P.pos,Re=this.options.ecmaVersion>=11,at=P.current(Re);return P.advance(Re),at===92&&this.regexp_eatRegExpUnicodeEscapeSequence(P,Re)&&(at=P.lastIntValue),Pt(at)?(P.lastIntValue=at,!0):(P.pos=re,!1)};function Pt(P){return be(P,!0)||P===36||P===95}Mi.regexp_eatRegExpIdentifierPart=function(P){var re=P.pos,Re=this.options.ecmaVersion>=11,at=P.current(Re);return P.advance(Re),at===92&&this.regexp_eatRegExpUnicodeEscapeSequence(P,Re)&&(at=P.lastIntValue),Fi(at)?(P.lastIntValue=at,!0):(P.pos=re,!1)};function Fi(P){return qe(P,!0)||P===36||P===95||P===8204||P===8205}Mi.regexp_eatAtomEscape=function(P){return this.regexp_eatBackReference(P)||this.regexp_eatCharacterClassEscape(P)||this.regexp_eatCharacterEscape(P)||P.switchN&&this.regexp_eatKGroupName(P)?!0:(P.switchU&&(P.current()===99&&P.raise("Invalid unicode escape"),P.raise("Invalid escape")),!1)},Mi.regexp_eatBackReference=function(P){var re=P.pos;if(this.regexp_eatDecimalEscape(P)){var Re=P.lastIntValue;if(P.switchU)return Re>P.maxBackReference&&(P.maxBackReference=Re),!0;if(Re<=P.numCapturingParens)return!0;P.pos=re}return!1},Mi.regexp_eatKGroupName=function(P){if(P.eat(107)){if(this.regexp_eatGroupName(P))return P.backReferenceNames.push(P.lastStringValue),!0;P.raise("Invalid named reference")}return!1},Mi.regexp_eatCharacterEscape=function(P){return this.regexp_eatControlEscape(P)||this.regexp_eatCControlLetter(P)||this.regexp_eatZero(P)||this.regexp_eatHexEscapeSequence(P)||this.regexp_eatRegExpUnicodeEscapeSequence(P,!1)||!P.switchU&&this.regexp_eatLegacyOctalEscapeSequence(P)||this.regexp_eatIdentityEscape(P)},Mi.regexp_eatCControlLetter=function(P){var re=P.pos;if(P.eat(99)){if(this.regexp_eatControlLetter(P))return!0;P.pos=re}return!1},Mi.regexp_eatZero=function(P){return P.current()===48&&!po(P.lookahead())?(P.lastIntValue=0,P.advance(),!0):!1},Mi.regexp_eatControlEscape=function(P){var re=P.current();return re===116?(P.lastIntValue=9,P.advance(),!0):re===110?(P.lastIntValue=10,P.advance(),!0):re===118?(P.lastIntValue=11,P.advance(),!0):re===102?(P.lastIntValue=12,P.advance(),!0):re===114?(P.lastIntValue=13,P.advance(),!0):!1},Mi.regexp_eatControlLetter=function(P){var re=P.current();return xt(re)?(P.lastIntValue=re%32,P.advance(),!0):!1};function xt(P){return P>=65&&P<=90||P>=97&&P<=122}Mi.regexp_eatRegExpUnicodeEscapeSequence=function(P,re){re===void 0&&(re=!1);var Re=P.pos,at=re||P.switchU;if(P.eat(117)){if(this.regexp_eatFixedHexDigits(P,4)){var kt=P.lastIntValue;if(at&&kt>=55296&&kt<=56319){var ri=P.pos;if(P.eat(92)&&P.eat(117)&&this.regexp_eatFixedHexDigits(P,4)){var _i=P.lastIntValue;if(_i>=56320&&_i<=57343)return P.lastIntValue=(kt-55296)*1024+(_i-56320)+65536,!0}P.pos=ri,P.lastIntValue=kt}return!0}if(at&&P.eat(123)&&this.regexp_eatHexDigits(P)&&P.eat(125)&&nn(P.lastIntValue))return!0;at&&P.raise("Invalid unicode escape"),P.pos=Re}return!1};function nn(P){return P>=0&&P<=1114111}Mi.regexp_eatIdentityEscape=function(P){if(P.switchU)return this.regexp_eatSyntaxCharacter(P)?!0:P.eat(47)?(P.lastIntValue=47,!0):!1;var re=P.current();return re!==99&&(!P.switchN||re!==107)?(P.lastIntValue=re,P.advance(),!0):!1},Mi.regexp_eatDecimalEscape=function(P){P.lastIntValue=0;var re=P.current();if(re>=49&&re<=57){do P.lastIntValue=10*P.lastIntValue+(re-48),P.advance();while((re=P.current())>=48&&re<=57);return!0}return!1};var Cr=0,ys=1,Gr=2;Mi.regexp_eatCharacterClassEscape=function(P){var re=P.current();if(Et(re))return P.lastIntValue=-1,P.advance(),ys;var Re=!1;if(P.switchU&&this.options.ecmaVersion>=9&&((Re=re===80)||re===112)){P.lastIntValue=-1,P.advance();var at;if(P.eat(123)&&(at=this.regexp_eatUnicodePropertyValueExpression(P))&&P.eat(125))return Re&&at===Gr&&P.raise("Invalid property name"),at;P.raise("Invalid property name")}return Cr};function Et(P){return P===100||P===68||P===115||P===83||P===119||P===87}Mi.regexp_eatUnicodePropertyValueExpression=function(P){var re=P.pos;if(this.regexp_eatUnicodePropertyName(P)&&P.eat(61)){var Re=P.lastStringValue;if(this.regexp_eatUnicodePropertyValue(P)){var at=P.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(P,Re,at),ys}}if(P.pos=re,this.regexp_eatLoneUnicodePropertyNameOrValue(P)){var kt=P.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(P,kt)}return Cr},Mi.regexp_validateUnicodePropertyNameAndValue=function(P,re,Re){Fe(P.unicodeProperties.nonBinary,re)||P.raise("Invalid property name"),P.unicodeProperties.nonBinary[re].test(Re)||P.raise("Invalid property value")},Mi.regexp_validateUnicodePropertyNameOrValue=function(P,re){if(P.unicodeProperties.binary.test(re))return ys;if(P.switchV&&P.unicodeProperties.binaryOfStrings.test(re))return Gr;P.raise("Invalid property name")},Mi.regexp_eatUnicodePropertyName=function(P){var re=0;for(P.lastStringValue="";Hn(re=P.current());)P.lastStringValue+=ei(re),P.advance();return P.lastStringValue!==""};function Hn(P){return xt(P)||P===95}Mi.regexp_eatUnicodePropertyValue=function(P){var re=0;for(P.lastStringValue="";ft(re=P.current());)P.lastStringValue+=ei(re),P.advance();return P.lastStringValue!==""};function ft(P){return Hn(P)||po(P)}Mi.regexp_eatLoneUnicodePropertyNameOrValue=function(P){return this.regexp_eatUnicodePropertyValue(P)},Mi.regexp_eatCharacterClass=function(P){if(P.eat(91)){var re=P.eat(94),Re=this.regexp_classContents(P);return P.eat(93)||P.raise("Unterminated character class"),re&&Re===Gr&&P.raise("Negated character class may contain strings"),!0}return!1},Mi.regexp_classContents=function(P){return P.current()===93?ys:P.switchV?this.regexp_classSetExpression(P):(this.regexp_nonEmptyClassRanges(P),ys)},Mi.regexp_nonEmptyClassRanges=function(P){for(;this.regexp_eatClassAtom(P);){var re=P.lastIntValue;if(P.eat(45)&&this.regexp_eatClassAtom(P)){var Re=P.lastIntValue;P.switchU&&(re===-1||Re===-1)&&P.raise("Invalid character class"),re!==-1&&Re!==-1&&re>Re&&P.raise("Range out of order in character class")}}},Mi.regexp_eatClassAtom=function(P){var re=P.pos;if(P.eat(92)){if(this.regexp_eatClassEscape(P))return!0;if(P.switchU){var Re=P.current();(Re===99||go(Re))&&P.raise("Invalid class escape"),P.raise("Invalid escape")}P.pos=re}var at=P.current();return at!==93?(P.lastIntValue=at,P.advance(),!0):!1},Mi.regexp_eatClassEscape=function(P){var re=P.pos;if(P.eat(98))return P.lastIntValue=8,!0;if(P.switchU&&P.eat(45))return P.lastIntValue=45,!0;if(!P.switchU&&P.eat(99)){if(this.regexp_eatClassControlLetter(P))return!0;P.pos=re}return this.regexp_eatCharacterClassEscape(P)||this.regexp_eatCharacterEscape(P)},Mi.regexp_classSetExpression=function(P){var re=ys,Re;if(!this.regexp_eatClassSetRange(P))if(Re=this.regexp_eatClassSetOperand(P)){Re===Gr&&(re=Gr);for(var at=P.pos;P.eatChars([38,38]);){if(P.current()!==38&&(Re=this.regexp_eatClassSetOperand(P))){Re!==Gr&&(re=ys);continue}P.raise("Invalid character in character class")}if(at!==P.pos)return re;for(;P.eatChars([45,45]);)this.regexp_eatClassSetOperand(P)||P.raise("Invalid character in character class");if(at!==P.pos)return re}else P.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(P)){if(Re=this.regexp_eatClassSetOperand(P),!Re)return re;Re===Gr&&(re=Gr)}},Mi.regexp_eatClassSetRange=function(P){var re=P.pos;if(this.regexp_eatClassSetCharacter(P)){var Re=P.lastIntValue;if(P.eat(45)&&this.regexp_eatClassSetCharacter(P)){var at=P.lastIntValue;return Re!==-1&&at!==-1&&Re>at&&P.raise("Range out of order in character class"),!0}P.pos=re}return!1},Mi.regexp_eatClassSetOperand=function(P){return this.regexp_eatClassSetCharacter(P)?ys:this.regexp_eatClassStringDisjunction(P)||this.regexp_eatNestedClass(P)},Mi.regexp_eatNestedClass=function(P){var re=P.pos;if(P.eat(91)){var Re=P.eat(94),at=this.regexp_classContents(P);if(P.eat(93))return Re&&at===Gr&&P.raise("Negated character class may contain strings"),at;P.pos=re}if(P.eat(92)){var kt=this.regexp_eatCharacterClassEscape(P);if(kt)return kt;P.pos=re}return null},Mi.regexp_eatClassStringDisjunction=function(P){var re=P.pos;if(P.eatChars([92,113])){if(P.eat(123)){var Re=this.regexp_classStringDisjunctionContents(P);if(P.eat(125))return Re}else P.raise("Invalid escape");P.pos=re}return null},Mi.regexp_classStringDisjunctionContents=function(P){for(var re=this.regexp_classString(P);P.eat(124);)this.regexp_classString(P)===Gr&&(re=Gr);return re},Mi.regexp_classString=function(P){for(var re=0;this.regexp_eatClassSetCharacter(P);)re++;return re===1?ys:Gr},Mi.regexp_eatClassSetCharacter=function(P){var re=P.pos;if(P.eat(92))return this.regexp_eatCharacterEscape(P)||this.regexp_eatClassSetReservedPunctuator(P)?!0:P.eat(98)?(P.lastIntValue=8,!0):(P.pos=re,!1);var Re=P.current();return Re<0||Re===P.lookahead()&&gr(Re)||Xs(Re)?!1:(P.advance(),P.lastIntValue=Re,!0)};function gr(P){return P===33||P>=35&&P<=38||P>=42&&P<=44||P===46||P>=58&&P<=64||P===94||P===96||P===126}function Xs(P){return P===40||P===41||P===45||P===47||P>=91&&P<=93||P>=123&&P<=125}Mi.regexp_eatClassSetReservedPunctuator=function(P){var re=P.current();return Ks(re)?(P.lastIntValue=re,P.advance(),!0):!1};function Ks(P){return P===33||P===35||P===37||P===38||P===44||P===45||P>=58&&P<=62||P===64||P===96||P===126}Mi.regexp_eatClassControlLetter=function(P){var re=P.current();return po(re)||re===95?(P.lastIntValue=re%32,P.advance(),!0):!1},Mi.regexp_eatHexEscapeSequence=function(P){var re=P.pos;if(P.eat(120)){if(this.regexp_eatFixedHexDigits(P,2))return!0;P.switchU&&P.raise("Invalid escape"),P.pos=re}return!1},Mi.regexp_eatDecimalDigits=function(P){var re=P.pos,Re=0;for(P.lastIntValue=0;po(Re=P.current());)P.lastIntValue=10*P.lastIntValue+(Re-48),P.advance();return P.pos!==re};function po(P){return P>=48&&P<=57}Mi.regexp_eatHexDigits=function(P){var re=P.pos,Re=0;for(P.lastIntValue=0;va(Re=P.current());)P.lastIntValue=16*P.lastIntValue+$o(Re),P.advance();return P.pos!==re};function va(P){return P>=48&&P<=57||P>=65&&P<=70||P>=97&&P<=102}function $o(P){return P>=65&&P<=70?10+(P-65):P>=97&&P<=102?10+(P-97):P-48}Mi.regexp_eatLegacyOctalEscapeSequence=function(P){if(this.regexp_eatOctalDigit(P)){var re=P.lastIntValue;if(this.regexp_eatOctalDigit(P)){var Re=P.lastIntValue;re<=3&&this.regexp_eatOctalDigit(P)?P.lastIntValue=re*64+Re*8+P.lastIntValue:P.lastIntValue=re*8+Re}else P.lastIntValue=re;return!0}return!1},Mi.regexp_eatOctalDigit=function(P){var re=P.current();return go(re)?(P.lastIntValue=re-48,P.advance(),!0):(P.lastIntValue=0,!1)};function go(P){return P>=48&&P<=55}Mi.regexp_eatFixedHexDigits=function(P,re){var Re=P.pos;P.lastIntValue=0;for(var at=0;at<re;++at){var kt=P.current();if(!va(kt))return P.pos=Re,!1;P.lastIntValue=16*P.lastIntValue+$o(kt),P.advance()}return!0};var Is=function(re){this.type=re.type,this.value=re.value,this.start=re.start,this.end=re.end,re.options.locations&&(this.loc=new Ti(re,re.startLoc,re.endLoc)),re.options.ranges&&(this.range=[re.start,re.end])},bn=d.prototype;bn.next=function(P){!P&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new Is(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},bn.getToken=function(){return this.next(),new Is(this)},typeof Symbol<"u"&&(bn[Symbol.iterator]=function(){var P=this;return{next:function(){var re=P.getToken();return{done:re.type===xe.eof,value:re}}}}),bn.nextToken=function(){var P=this.curContext();if((!P||!P.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(xe.eof);if(P.override)return P.override(this);this.readToken(this.fullCharCodeAtPos())},bn.readToken=function(P){return be(P,this.options.ecmaVersion>=6)||P===92?this.readWord():this.getTokenFromCode(P)},bn.fullCharCodeAtPos=function(){var P=this.input.charCodeAt(this.pos);if(P<=55295||P>=56320)return P;var re=this.input.charCodeAt(this.pos+1);return re<=56319||re>=57344?P:(P<<10)+re-56613888},bn.skipBlockComment=function(){var P=this.options.onComment&&this.curPosition(),re=this.pos,Re=this.input.indexOf("*/",this.pos+=2);if(Re===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=Re+2,this.options.locations)for(var at=void 0,kt=re;(at=et(this.input,kt,this.pos))>-1;)++this.curLine,kt=this.lineStart=at;this.options.onComment&&this.options.onComment(!0,this.input.slice(re+2,Re),re,this.pos,P,this.curPosition())},bn.skipLineComment=function(P){for(var re=this.pos,Re=this.options.onComment&&this.curPosition(),at=this.input.charCodeAt(this.pos+=P);this.pos<this.input.length&&!Je(at);)at=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(re+P,this.pos),re,this.pos,Re,this.curPosition())},bn.skipSpace=function(){e:for(;this.pos<this.input.length;){var P=this.input.charCodeAt(this.pos);switch(P){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(P>8&&P<14||P>=5760&&lt.test(String.fromCharCode(P)))++this.pos;else break e}}},bn.finishToken=function(P,re){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var Re=this.type;this.type=P,this.value=re,this.updateContext(Re)},bn.readToken_dot=function(){var P=this.input.charCodeAt(this.pos+1);if(P>=48&&P<=57)return this.readNumber(!0);var re=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&P===46&&re===46?(this.pos+=3,this.finishToken(xe.ellipsis)):(++this.pos,this.finishToken(xe.dot))},bn.readToken_slash=function(){var P=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):P===61?this.finishOp(xe.assign,2):this.finishOp(xe.slash,1)},bn.readToken_mult_modulo_exp=function(P){var re=this.input.charCodeAt(this.pos+1),Re=1,at=P===42?xe.star:xe.modulo;return this.options.ecmaVersion>=7&&P===42&&re===42&&(++Re,at=xe.starstar,re=this.input.charCodeAt(this.pos+2)),re===61?this.finishOp(xe.assign,Re+1):this.finishOp(at,Re)},bn.readToken_pipe_amp=function(P){var re=this.input.charCodeAt(this.pos+1);if(re===P){if(this.options.ecmaVersion>=12){var Re=this.input.charCodeAt(this.pos+2);if(Re===61)return this.finishOp(xe.assign,3)}return this.finishOp(P===124?xe.logicalOR:xe.logicalAND,2)}return re===61?this.finishOp(xe.assign,2):this.finishOp(P===124?xe.bitwiseOR:xe.bitwiseAND,1)},bn.readToken_caret=function(){var P=this.input.charCodeAt(this.pos+1);return P===61?this.finishOp(xe.assign,2):this.finishOp(xe.bitwiseXOR,1)},bn.readToken_plus_min=function(P){var re=this.input.charCodeAt(this.pos+1);return re===P?re===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||Gt.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(xe.incDec,2):re===61?this.finishOp(xe.assign,2):this.finishOp(xe.plusMin,1)},bn.readToken_lt_gt=function(P){var re=this.input.charCodeAt(this.pos+1),Re=1;return re===P?(Re=P===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+Re)===61?this.finishOp(xe.assign,Re+1):this.finishOp(xe.bitShift,Re)):re===33&&P===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(re===61&&(Re=2),this.finishOp(xe.relational,Re))},bn.readToken_eq_excl=function(P){var re=this.input.charCodeAt(this.pos+1);return re===61?this.finishOp(xe.equality,this.input.charCodeAt(this.pos+2)===61?3:2):P===61&&re===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(xe.arrow)):this.finishOp(P===61?xe.eq:xe.prefix,1)},bn.readToken_question=function(){var P=this.options.ecmaVersion;if(P>=11){var re=this.input.charCodeAt(this.pos+1);if(re===46){var Re=this.input.charCodeAt(this.pos+2);if(Re<48||Re>57)return this.finishOp(xe.questionDot,2)}if(re===63){if(P>=12){var at=this.input.charCodeAt(this.pos+2);if(at===61)return this.finishOp(xe.assign,3)}return this.finishOp(xe.coalesce,2)}}return this.finishOp(xe.question,1)},bn.readToken_numberSign=function(){var P=this.options.ecmaVersion,re=35;if(P>=13&&(++this.pos,re=this.fullCharCodeAtPos(),be(re,!0)||re===92))return this.finishToken(xe.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+ei(re)+"'")},bn.getTokenFromCode=function(P){switch(P){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(xe.parenL);case 41:return++this.pos,this.finishToken(xe.parenR);case 59:return++this.pos,this.finishToken(xe.semi);case 44:return++this.pos,this.finishToken(xe.comma);case 91:return++this.pos,this.finishToken(xe.bracketL);case 93:return++this.pos,this.finishToken(xe.bracketR);case 123:return++this.pos,this.finishToken(xe.braceL);case 125:return++this.pos,this.finishToken(xe.braceR);case 58:return++this.pos,this.finishToken(xe.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(xe.backQuote);case 48:var re=this.input.charCodeAt(this.pos+1);if(re===120||re===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(re===111||re===79)return this.readRadixNumber(8);if(re===98||re===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(P);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(P);case 124:case 38:return this.readToken_pipe_amp(P);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(P);case 60:case 62:return this.readToken_lt_gt(P);case 61:case 33:return this.readToken_eq_excl(P);case 63:return this.readToken_question();case 126:return this.finishOp(xe.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+ei(P)+"'")},bn.finishOp=function(P,re){var Re=this.input.slice(this.pos,this.pos+re);return this.pos+=re,this.finishToken(P,Re)},bn.readRegexp=function(){for(var P,re,Re=this.pos;;){this.pos>=this.input.length&&this.raise(Re,"Unterminated regular expression");var at=this.input.charAt(this.pos);if(Gt.test(at)&&this.raise(Re,"Unterminated regular expression"),P)P=!1;else{if(at==="[")re=!0;else if(at==="]"&&re)re=!1;else if(at==="/"&&!re)break;P=at==="\\"}++this.pos}var kt=this.input.slice(Re,this.pos);++this.pos;var ri=this.pos,_i=this.readWord1();this.containsEsc&&this.unexpected(ri);var Qi=this.regexpState||(this.regexpState=new nr(this));Qi.reset(Re,kt,_i),this.validateRegExpFlags(Qi),this.validateRegExpPattern(Qi);var Xi=null;try{Xi=new RegExp(kt,_i)}catch{}return this.finishToken(xe.regexp,{pattern:kt,flags:_i,value:Xi})},bn.readInt=function(P,re,Re){for(var at=this.options.ecmaVersion>=12&&re===void 0,kt=Re&&this.input.charCodeAt(this.pos)===48,ri=this.pos,_i=0,Qi=0,Xi=0,Nn=re??1/0;Xi<Nn;++Xi,++this.pos){var qn=this.input.charCodeAt(this.pos),yr=void 0;if(at&&qn===95){kt&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),Qi===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),Xi===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),Qi=qn;continue}if(qn>=97?yr=qn-97+10:qn>=65?yr=qn-65+10:qn>=48&&qn<=57?yr=qn-48:yr=1/0,yr>=P)break;Qi=qn,_i=_i*P+yr}return at&&Qi===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===ri||re!=null&&this.pos-ri!==re?null:_i};function bs(P,re){return re?parseInt(P,8):parseFloat(P.replace(/_/g,""))}function Or(P){return typeof BigInt!="function"?null:BigInt(P.replace(/_/g,""))}bn.readRadixNumber=function(P){var re=this.pos;this.pos+=2;var Re=this.readInt(P);return Re==null&&this.raise(this.start+2,"Expected number in radix "+P),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(Re=Or(this.input.slice(re,this.pos)),++this.pos):be(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(xe.num,Re)},bn.readNumber=function(P){var re=this.pos;!P&&this.readInt(10,void 0,!0)===null&&this.raise(re,"Invalid number");var Re=this.pos-re>=2&&this.input.charCodeAt(re)===48;Re&&this.strict&&this.raise(re,"Invalid number");var at=this.input.charCodeAt(this.pos);if(!Re&&!P&&this.options.ecmaVersion>=11&&at===110){var kt=Or(this.input.slice(re,this.pos));return++this.pos,be(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(xe.num,kt)}Re&&/[89]/.test(this.input.slice(re,this.pos))&&(Re=!1),at===46&&!Re&&(++this.pos,this.readInt(10),at=this.input.charCodeAt(this.pos)),(at===69||at===101)&&!Re&&(at=this.input.charCodeAt(++this.pos),(at===43||at===45)&&++this.pos,this.readInt(10)===null&&this.raise(re,"Invalid number")),be(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var ri=bs(this.input.slice(re,this.pos),Re);return this.finishToken(xe.num,ri)},bn.readCodePoint=function(){var P=this.input.charCodeAt(this.pos),re;if(P===123){this.options.ecmaVersion<6&&this.unexpected();var Re=++this.pos;re=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,re>1114111&&this.invalidStringToken(Re,"Code point out of bounds")}else re=this.readHexChar(4);return re},bn.readString=function(P){for(var re="",Re=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var at=this.input.charCodeAt(this.pos);if(at===P)break;at===92?(re+=this.input.slice(Re,this.pos),re+=this.readEscapedChar(!1),Re=this.pos):at===8232||at===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(Je(at)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return re+=this.input.slice(Re,this.pos++),this.finishToken(xe.string,re)};var ya={};bn.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(P){if(P===ya)this.readInvalidTemplateToken();else throw P}this.inTemplateElement=!1},bn.invalidStringToken=function(P,re){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw ya;this.raise(P,re)},bn.readTmplToken=function(){for(var P="",re=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var Re=this.input.charCodeAt(this.pos);if(Re===96||Re===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===xe.template||this.type===xe.invalidTemplate)?Re===36?(this.pos+=2,this.finishToken(xe.dollarBraceL)):(++this.pos,this.finishToken(xe.backQuote)):(P+=this.input.slice(re,this.pos),this.finishToken(xe.template,P));if(Re===92)P+=this.input.slice(re,this.pos),P+=this.readEscapedChar(!0),re=this.pos;else if(Je(Re)){switch(P+=this.input.slice(re,this.pos),++this.pos,Re){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:P+=`
`;break;default:P+=String.fromCharCode(Re);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),re=this.pos}else++this.pos}},bn.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(xe.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")},bn.readEscapedChar=function(P){var re=this.input.charCodeAt(++this.pos);switch(++this.pos,re){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return ei(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),P){var Re=this.pos-1;this.invalidStringToken(Re,"Invalid escape sequence in template string")}default:if(re>=48&&re<=55){var at=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],kt=parseInt(at,8);return kt>255&&(at=at.slice(0,-1),kt=parseInt(at,8)),this.pos+=at.length-1,re=this.input.charCodeAt(this.pos),(at!=="0"||re===56||re===57)&&(this.strict||P)&&this.invalidStringToken(this.pos-1-at.length,P?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(kt)}return Je(re)?"":String.fromCharCode(re)}},bn.readHexChar=function(P){var re=this.pos,Re=this.readInt(16,P);return Re===null&&this.invalidStringToken(re,"Bad character escape sequence"),Re},bn.readWord1=function(){this.containsEsc=!1;for(var P="",re=!0,Re=this.pos,at=this.options.ecmaVersion>=6;this.pos<this.input.length;){var kt=this.fullCharCodeAtPos();if(qe(kt,at))this.pos+=kt<=65535?1:2;else if(kt===92){this.containsEsc=!0,P+=this.input.slice(Re,this.pos);var ri=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var _i=this.readCodePoint();(re?be:qe)(_i,at)||this.invalidStringToken(ri,"Invalid Unicode escape"),P+=ei(_i),Re=this.pos}else break;re=!1}return P+this.input.slice(Re,this.pos)},bn.readWord=function(){var P=this.readWord1(),re=xe.name;return this.keywords.test(P)&&(re=St[P]),this.finishToken(re,P)};var $a="8.11.3";d.acorn={Parser:d,version:$a,defaultOptions:wi,Position:yi,SourceLocation:Ti,getLineInfo:Vi,Node:Oe,TokenType:ke,tokTypes:xe,keywordTypes:St,TokContext:Ne,tokContexts:Ue,isIdentifierChar:qe,isIdentifierStart:be,Token:Is,isNewLine:Je,lineBreak:Gt,lineBreakG:Ve,nonASCIIwhitespace:lt};function mo(P,re){return d.parse(P,re)}function ra(P,re,Re){return d.parseExpressionAt(P,re,Re)}function sa(P,re){return d.tokenizer(P,re)}i.Node=Oe,i.Parser=d,i.Position=yi,i.SourceLocation=Ti,i.TokContext=Ne,i.Token=Is,i.TokenType=ke,i.defaultOptions=wi,i.getLineInfo=Vi,i.isIdentifierChar=qe,i.isIdentifierStart=be,i.isNewLine=Je,i.keywordTypes=St,i.lineBreak=Gt,i.lineBreakG=Ve,i.nonASCIIwhitespace=lt,i.parse=mo,i.parseExpressionAt=ra,i.tokContexts=Ue,i.tokTypes=xe,i.tokenizer=sa,i.version=$a})}(Gg,Gg.exports)),Gg.exports}/*!
 * Paper.js v0.12.17 - The Swiss Army Knife of Vector Graphics Scripting.
 * http://paperjs.org/
 *
 * Copyright (c) 2011 - 2020, Jürg Lehni & Jonathan Puckey
 * http://juerglehni.com/ & https://puckey.studio/
 *
 * Distributed under the MIT license. See LICENSE file for details.
 *
 * All rights reserved.
 *
 * Date: Thu Nov 3 21:15:36 2022 +0100
 *
 ***
 *
 * Straps.js - Class inheritance library with support for bean-style accessors
 *
 * Copyright (c) 2006 - 2020 Jürg Lehni
 * http://juerglehni.com/
 *
 * Distributed under the MIT license.
 *
 ***
 *
 * Acorn.js
 * https://marijnhaverbeke.nl/acorn/
 *
 * Acorn is a tiny, fast JavaScript parser written in JavaScript,
 * created by Marijn Haverbeke and released under an MIT license.
 *
 */(function(e){(function(t,i){t=t||xb;var r=t.window,c=t.document,h=new function(){var d=/^(statics|enumerable|beans|preserve)$/,y=[],D=y.slice,U=Object.create,Q=Object.getOwnPropertyDescriptor,K=Object.defineProperty,ie=y.forEach||function(Te,Ce){for(var je=0,Ne=this.length;je<Ne;je++)Te.call(Ce,this[je],je,this)},Ae=function(Te,Ce){for(var je in this)this.hasOwnProperty(je)&&Te.call(Ce,this[je],je,this)},fe=Object.assign||function(Te){for(var Ce=1,je=arguments.length;Ce<je;Ce++){var Ne=arguments[Ce];for(var Ue in Ne)Ne.hasOwnProperty(Ue)&&(Te[Ue]=Ne[Ue])}return Te},ye=function(Te,Ce,je){if(Te){var Ne=Q(Te,"length");(Ne&&typeof Ne.value=="number"?ie:Ae).call(Te,Ce,je=je||Te)}return je};function Le(Te,Ce,je,Ne,Ue){var de={};function ue(pe,Oe){Oe=Oe||(Oe=Q(Ce,pe))&&(Oe.get?Oe:Oe.value),typeof Oe=="string"&&Oe[0]==="#"&&(Oe=Te[Oe.substring(1)]||Oe);var ze=typeof Oe=="function",Be=Oe,Ye=Ue||ze&&!Oe.base?Oe&&Oe.get?pe in Te:Te[pe]:null,Xe;(!Ue||!Ye)&&(ze&&Ye&&(Oe.base=Ye),ze&&Ne!==!1&&(Xe=pe.match(/^([gs]et|is)(([A-Z])(.*))$/))&&(de[Xe[3].toLowerCase()+Xe[4]]=Xe[2]),(!Be||ze||!Be.get||typeof Be.get!="function"||!we.isPlainObject(Be))&&(Be={value:Be,writable:!0}),(Q(Te,pe)||{configurable:!0}).configurable&&(Be.configurable=!0,Be.enumerable=je??!Xe),K(Te,pe,Be))}if(Ce){for(var Y in Ce)Ce.hasOwnProperty(Y)&&!d.test(Y)&&ue(Y);for(var Y in de){var ne=de[Y],he=Te["set"+ne],me=Te["get"+ne]||he&&Te["is"+ne];me&&(Ne===!0||me.length===0)&&ue(Y,{get:me,set:he})}}return Te}function we(){for(var Te=0,Ce=arguments.length;Te<Ce;Te++){var je=arguments[Te];je&&fe(this,je)}return this}return Le(we,{inject:function(Te){if(Te){var Ce=Te.statics===!0?Te:Te.statics,je=Te.beans,Ne=Te.preserve;Ce!==Te&&Le(this.prototype,Te,Te.enumerable,je,Ne),Le(this,Ce,null,je,Ne)}for(var Ue=1,de=arguments.length;Ue<de;Ue++)this.inject(arguments[Ue]);return this},extend:function(){for(var Te=this,Ce,je,Ne=0,Ue,de=arguments.length;Ne<de&&!(Ce&&je);Ne++)Ue=arguments[Ne],Ce=Ce||Ue.initialize,je=je||Ue.prototype;return Ce=Ce||function(){Te.apply(this,arguments)},je=Ce.prototype=je||U(this.prototype),K(je,"constructor",{value:Ce,writable:!0,configurable:!0}),Le(Ce,this),arguments.length&&this.inject.apply(Ce,arguments),Ce.base=Te,Ce}}).inject({enumerable:!1,initialize:we,set:we,inject:function(){for(var Te=0,Ce=arguments.length;Te<Ce;Te++){var je=arguments[Te];je&&Le(this,je,je.enumerable,je.beans,je.preserve)}return this},extend:function(){var Te=U(this);return Te.inject.apply(Te,arguments)},each:function(Te,Ce){return ye(this,Te,Ce)},clone:function(){return new this.constructor(this)},statics:{set:fe,each:ye,create:U,define:K,describe:Q,clone:function(Te){return fe(new Te.constructor,Te)},isPlainObject:function(Te){var Ce=Te!=null&&Te.constructor;return Ce&&(Ce===Object||Ce===we||Ce.name==="Object")},pick:function(Te,Ce){return Te!==i?Te:Ce},slice:function(Te,Ce,je){return D.call(Te,Ce,je)}}})};e.exports=h,h.inject({enumerable:!1,toString:function(){return this._id!=null?(this._class||"Object")+(this._name?" '"+this._name+"'":" @"+this._id):"{ "+h.each(this,function(d,y){if(!/^_/.test(y)){var D=typeof d;this.push(y+": "+(D==="number"?j.instance.number(d):D==="string"?"'"+d+"'":d))}},[]).join(", ")+" }"},getClassName:function(){return this._class||""},importJSON:function(d){return h.importJSON(d,this)},exportJSON:function(d){return h.exportJSON(this,d)},toJSON:function(){return h.serialize(this)},set:function(d,y){return d&&h.filter(this,d,y,this._prioritize),this}},{beans:!1,statics:{exports:{},extend:function d(){var y=d.base.apply(this,arguments),D=y.prototype._class;return D&&!h.exports[D]&&(h.exports[D]=y),y},equals:function(d,y){if(d===y)return!0;if(d&&d.equals)return d.equals(y);if(y&&y.equals)return y.equals(d);if(d&&y&&typeof d=="object"&&typeof y=="object"){if(Array.isArray(d)&&Array.isArray(y)){var D=d.length;if(D!==y.length)return!1;for(;D--;)if(!h.equals(d[D],y[D]))return!1}else{var U=Object.keys(d),D=U.length;if(D!==Object.keys(y).length)return!1;for(;D--;){var Q=U[D];if(!(y.hasOwnProperty(Q)&&h.equals(d[Q],y[Q])))return!1}}return!0}return!1},read:function(d,y,D,U){if(this===h){var Q=this.peek(d,y);return d.__index++,Q}var K=this.prototype,ie=K._readIndex,Ae=y||ie&&d.__index||0,fe=d.length,ye=d[Ae];if(U=U||fe-Ae,ye instanceof this||D&&D.readNull&&ye==null&&U<=1)return ie&&(d.__index=Ae+1),ye&&D&&D.clone?ye.clone():ye;if(ye=h.create(K),ie&&(ye.__read=!0),ye=ye.initialize.apply(ye,Ae>0||Ae+U<fe?h.slice(d,Ae,Ae+U):d)||ye,ie){d.__index=Ae+ye.__read;var Le=ye.__filtered;Le&&(d.__filtered=Le,ye.__filtered=i),ye.__read=i}return ye},peek:function(d,y){return d[d.__index=y||d.__index||0]},remain:function(d){return d.length-(d.__index||0)},readList:function(d,y,D,U){for(var Q=[],K,ie=y||0,Ae=U?ie+U:d.length,fe=ie;fe<Ae;fe++)Q.push(Array.isArray(K=d[fe])?this.read(K,0,D):this.read(d,fe,D,1));return Q},readNamed:function(d,y,D,U,Q){var K=this.getNamed(d,y),ie=K!==i;if(ie){var Ae=d.__filtered;if(!Ae){var fe=this.getSource(d);Ae=d.__filtered=h.create(fe),Ae.__unfiltered=fe}Ae[y]=i}return this.read(ie?[K]:d,D,U,Q)},readSupported:function(d,y){var D=this.getSource(d),U=this,Q=!1;return D&&Object.keys(D).forEach(function(K){if(K in y){var ie=U.readNamed(d,K);ie!==i&&(y[K]=ie),Q=!0}}),Q},getSource:function(d){var y=d.__source;if(y===i){var D=d.length===1&&d[0];y=d.__source=D&&h.isPlainObject(D)?D:null}return y},getNamed:function(d,y){var D=this.getSource(d);if(D)return y?D[y]:d.__filtered||D},hasNamed:function(d,y){return!!this.getNamed(d,y)},filter:function(d,y,D,U){var Q;function K(Le){if(!(D&&Le in D)&&!(Q&&Le in Q)){var we=y[Le];we!==i&&(d[Le]=we)}}if(U){for(var ie={},Ae=0,fe,ye=U.length;Ae<ye;Ae++)(fe=U[Ae])in y&&(K(fe),ie[fe]=!0);Q=ie}return Object.keys(y.__unfiltered||y).forEach(K),d},isPlainValue:function(d,y){return h.isPlainObject(d)||Array.isArray(d)||y&&typeof d=="string"},serialize:function(d,y,D,U){y=y||{};var Q=!U,K;if(Q&&(y.formatter=new j(y.precision),U={length:0,definitions:{},references:{},add:function(we,Te){var Ce="#"+we._id,je=this.references[Ce];if(!je){this.length++;var Ne=Te.call(we),Ue=we._class;Ue&&Ne[0]!==Ue&&Ne.unshift(Ue),this.definitions[Ce]=Ne,je=this.references[Ce]=[Ce]}return je}}),d&&d._serialize){K=d._serialize(y,U);var ie=d._class;ie&&!d._compactSerialize&&(Q||!D)&&K[0]!==ie&&K.unshift(ie)}else if(Array.isArray(d)){K=[];for(var Ae=0,fe=d.length;Ae<fe;Ae++)K[Ae]=h.serialize(d[Ae],y,D,U)}else if(h.isPlainObject(d)){K={};for(var ye=Object.keys(d),Ae=0,fe=ye.length;Ae<fe;Ae++){var Le=ye[Ae];K[Le]=h.serialize(d[Le],y,D,U)}}else typeof d=="number"?K=y.formatter.number(d,y.precision):K=d;return Q&&U.length>0?[["dictionary",U.definitions],K]:K},deserialize:function(d,y,D,U,Q){var K=d,ie=!D,Ae=ie&&d&&d.length&&d[0][0]==="dictionary";if(D=D||{},Array.isArray(d)){var fe=d[0],ye=fe==="dictionary";if(d.length==1&&/^#/.test(fe))return D.dictionary[fe];fe=h.exports[fe],K=[];for(var Le=fe?1:0,we=d.length;Le<we;Le++)K.push(h.deserialize(d[Le],y,D,ye,Ae));if(fe){var Te=K;y?K=y(fe,Te,ie||Q):K=new fe(Te)}}else if(h.isPlainObject(d)){K={},U&&(D.dictionary=K);for(var Ce in d)K[Ce]=h.deserialize(d[Ce],y,D)}return Ae?K[1]:K},exportJSON:function(d,y){var D=h.serialize(d,y);return y&&y.asString==!1?D:JSON.stringify(D)},importJSON:function(d,y){return h.deserialize(typeof d=="string"?JSON.parse(d):d,function(D,U,Q){var K=Q&&y&&y.constructor===D,ie=K?y:h.create(D.prototype);if(U.length===1&&ie instanceof xe&&(K||!(ie instanceof Ve))){var Ae=U[0];h.isPlainObject(Ae)&&(Ae.insert=!1,K&&(U=U.concat([xe.INSERT])))}return(K?ie.set:D).apply(ie,U),K&&(y=null),ie})},push:function(d,y){var D=y.length;if(D<4096)d.push.apply(d,y);else{var U=d.length;d.length+=D;for(var Q=0;Q<D;Q++)d[U+Q]=y[Q]}return d},splice:function(d,y,D,U){var Q=y&&y.length,K=D===i;D=K?d.length:D,D>d.length&&(D=d.length);for(var ie=0;ie<Q;ie++)y[ie]._index=D+ie;if(K)return h.push(d,y),[];var Ae=[D,U];y&&h.push(Ae,y);for(var fe=d.splice.apply(d,Ae),ie=0,ye=fe.length;ie<ye;ie++)fe[ie]._index=i;for(var ie=D+Q,ye=d.length;ie<ye;ie++)d[ie]._index=ie;return fe},capitalize:function(d){return d.replace(/\b[a-z]/g,function(y){return y.toUpperCase()})},camelize:function(d){return d.replace(/-(.)/g,function(y,D){return D.toUpperCase()})},hyphenate:function(d){return d.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}}});var v={on:function(d,y){if(typeof d!="string")h.each(d,function(K,ie){this.on(ie,K)},this);else{var D=this._eventTypes,U=D&&D[d],Q=this._callbacks=this._callbacks||{};Q=Q[d]=Q[d]||[],Q.indexOf(y)===-1&&(Q.push(y),U&&U.install&&Q.length===1&&U.install.call(this,d))}return this},off:function(d,y){if(typeof d!="string"){h.each(d,function(ie,Ae){this.off(Ae,ie)},this);return}var D=this._eventTypes,U=D&&D[d],Q=this._callbacks&&this._callbacks[d],K;return Q&&(!y||(K=Q.indexOf(y))!==-1&&Q.length===1?(U&&U.uninstall&&U.uninstall.call(this,d),delete this._callbacks[d]):K!==-1&&Q.splice(K,1)),this},once:function(d,y){return this.on(d,function D(){y.apply(this,arguments),this.off(d,D)})},emit:function(d,y){var D=this._callbacks&&this._callbacks[d];if(!D)return!1;var U=h.slice(arguments,1),Q=y&&y.target&&!y.currentTarget;D=D.slice(),Q&&(y.currentTarget=this);for(var K=0,ie=D.length;K<ie;K++)if(D[K].apply(this,U)==!1){y&&y.stop&&y.stop();break}return Q&&delete y.currentTarget,!0},responds:function(d){return!!(this._callbacks&&this._callbacks[d])},attach:"#on",detach:"#off",fire:"#emit",_installEvents:function(d){var y=this._eventTypes,D=this._callbacks,U=d?"install":"uninstall";if(y){for(var Q in D)if(D[Q].length>0){var K=y[Q],ie=K&&K[U];ie&&ie.call(this,Q)}}},statics:{inject:function d(y){var D=y._events;if(D){var U={};h.each(D,function(Q,K){var ie=typeof Q=="string",Ae=ie?Q:K,fe=h.capitalize(Ae),ye=Ae.substring(2).toLowerCase();U[ye]=ie?{}:Q,Ae="_"+Ae,y["get"+fe]=function(){return this[Ae]},y["set"+fe]=function(Le){var we=this[Ae];we&&this.off(ye,we),Le&&this.on(ye,Le),this[Ae]=Le}}),y._eventTypes=U}return d.base.apply(this,arguments)}}},o=h.extend({_class:"PaperScope",initialize:function d(){an=this,this.settings=new h({applyMatrix:!0,insertItems:!0,handleSize:4,hitTolerance:0}),this.project=null,this.projects=[],this.tools=[],this._id=d._id++,d._scopes[this._id]=this;var y=d.prototype;if(!this.support){var D=Wi.getContext(1,1)||{};y.support={nativeDash:"setLineDash"in D||"mozDash"in D,nativeBlendModes:ir.nativeModes},Wi.release(D)}if(!this.agent){var U=t.navigator.userAgent.toLowerCase(),Q=(/(darwin|win|mac|linux|freebsd|sunos)/.exec(U)||[])[0],K=Q==="darwin"?"mac":Q,ie=y.agent=y.browser={platform:K};K&&(ie[K]=!0),U.replace(/(opera|chrome|safari|webkit|firefox|msie|trident|atom|node|jsdom)\/?\s*([.\d]+)(?:.*version\/([.\d]+))?(?:.*rv\:v?([.\d]+))?/g,function(Ae,fe,ye,Le,we){if(!ie.chrome){var Te=fe==="opera"?Le:/^(node|trident)$/.test(fe)?we:ye;ie.version=Te,ie.versionNumber=parseFloat(Te),fe={trident:"msie",jsdom:"node"}[fe]||fe,ie.name=fe,ie[fe]=!0}}),ie.chrome&&delete ie.webkit,ie.atom&&delete ie.chrome}},version:"0.12.17",getView:function(){var d=this.project;return d&&d._view},getPaper:function(){return this},execute:function(d,y){var D=an.PaperScript.execute(d,this,y);return ni.updateFocus(),D},install:function(d){var y=this;h.each(["project","view","tool"],function(U){h.define(d,U,{configurable:!0,get:function(){return y[U]}})});for(var D in this)!/^_/.test(D)&&this[D]&&(d[D]=this[D])},setup:function(d){return an=this,this.project=new yt(d),this},createCanvas:function(d,y){return Wi.getCanvas(d,y)},activate:function(){an=this},clear:function(){for(var d=this.projects,y=this.tools,D=d.length-1;D>=0;D--)d[D].remove();for(var D=y.length-1;D>=0;D--)y[D].remove()},remove:function(){this.clear(),delete o._scopes[this._id]},statics:new function(){function d(y){return y+="Attribute",function(D,U){return D[y](U)||D[y]("data-paper-"+U)}}return{_scopes:{},_id:0,get:function(y){return this._scopes[y]||null},getAttribute:d("get"),hasAttribute:d("has")}}}),k=h.extend(v,{initialize:function(d){this._scope=an,this._index=this._scope[this._list].push(this)-1,(d||!this._scope[this._reference])&&this.activate()},activate:function(){if(!this._scope)return!1;var d=this._scope[this._reference];return d&&d!==this&&d.emit("deactivate"),this._scope[this._reference]=this,this.emit("activate",d),!0},isActive:function(){return this._scope[this._reference]===this},remove:function(){return this._index==null?!1:(h.splice(this._scope[this._list],null,this._index,1),this._scope[this._reference]==this&&(this._scope[this._reference]=null),this._scope=null,!0)},getView:function(){return this._scope.getView()}}),O={findItemBoundsCollisions:function(d,y,D){function U(ie){for(var Ae=new Array(ie.length),fe=0;fe<ie.length;fe++){var ye=ie[fe].getBounds();Ae[fe]=[ye.left,ye.top,ye.right,ye.bottom]}return Ae}var Q=U(d),K=!y||y===d?Q:U(y);return this.findBoundsCollisions(Q,K,D||0)},findCurveBoundsCollisions:function(d,y,D,U){function Q(Te){for(var Ce=Math.min,je=Math.max,Ne=new Array(Te.length),Ue=0;Ue<Te.length;Ue++){var de=Te[Ue];Ne[Ue]=[Ce(de[0],de[2],de[4],de[6]),Ce(de[1],de[3],de[5],de[7]),je(de[0],de[2],de[4],de[6]),je(de[1],de[3],de[5],de[7])]}return Ne}var K=Q(d),ie=!y||y===d?K:Q(y);if(U){for(var Ae=this.findBoundsCollisions(K,ie,D||0,!1,!0),fe=this.findBoundsCollisions(K,ie,D||0,!0,!0),ye=[],Le=0,we=Ae.length;Le<we;Le++)ye[Le]={hor:Ae[Le],ver:fe[Le]};return ye}return this.findBoundsCollisions(K,ie,D||0)},findBoundsCollisions:function(d,y,D,U,Q){var K=!y||d===y,ie=K?d:d.concat(y),Ae=d.length,fe=ie.length;function ye(Zt,Jt,ui){for(var Vt=0,qt=Zt.length;Vt<qt;){var Ei=qt+Vt>>>1;ie[Zt[Ei]][Jt]<ui?Vt=Ei+1:qt=Ei}return Vt-1}for(var Le=U?1:0,we=Le+2,Te=U?0:1,Ce=Te+2,je=new Array(fe),Ne=0;Ne<fe;Ne++)je[Ne]=Ne;je.sort(function(Zt,Jt){return ie[Zt][Le]-ie[Jt][Le]});for(var Ue=[],de=new Array(Ae),Ne=0;Ne<fe;Ne++){var ue=je[Ne],Y=ie[ue],ne=K?ue:ue-Ae,he=ue<Ae,me=K||!he,pe=he?[]:null;if(Ue.length){var Oe=ye(Ue,we,Y[Le]-D)+1;if(Ue.splice(0,Oe),K&&Q){pe=pe.concat(Ue);for(var ze=0;ze<Ue.length;ze++){var Be=Ue[ze];de[Be].push(ne)}}else for(var Ye=Y[Ce],Xe=Y[Te],ze=0;ze<Ue.length;ze++){var Be=Ue[ze],ge=ie[Be],Ee=Be<Ae,tt=K||Be>=Ae;(Q||(he&&tt||me&&Ee)&&Ye>=ge[Te]-D&&Xe<=ge[Ce]+D)&&(he&&tt&&pe.push(K?Be:Be-Ae),me&&Ee&&de[Be].push(ne))}}if(he&&(d===y&&pe.push(ue),de[ue]=pe),Ue.length){var pt=Y[we],n=ye(Ue,we,pt);Ue.splice(n+1,0,ue)}else Ue.push(ue)}for(var Ne=0;Ne<de.length;Ne++){var ce=de[Ne];ce&&ce.sort(function(Jt,ui){return Jt-ui})}return de}},j=h.extend({initialize:function(d){this.precision=h.pick(d,5),this.multiplier=Math.pow(10,this.precision)},number:function(d){return this.precision<16?Math.round(d*this.multiplier)/this.multiplier:d},pair:function(d,y,D){return this.number(d)+(D||",")+this.number(y)},point:function(d,y){return this.number(d.x)+(y||",")+this.number(d.y)},size:function(d,y){return this.number(d.width)+(y||",")+this.number(d.height)},rectangle:function(d,y){return this.point(d,y)+(y||",")+this.size(d,y)}});j.instance=new j;var J=new function(){var d=[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],y=[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]],D=Math.abs,U=Math.sqrt,Q=Math.pow,K=Math.log2||function(we){return Math.log(we)*Math.LOG2E},ie=1e-12,Ae=112e-18;function fe(we,Te,Ce){return we<Te?Te:we>Ce?Ce:we}function ye(we,Te,Ce){function je(Oe){var ze=Oe*134217729,Be=Oe-ze,Ye=Be+ze,Xe=Oe-Ye;return[Ye,Xe]}var Ne=Te*Te-we*Ce,Ue=Te*Te+we*Ce;if(D(Ne)*3<Ue){var de=je(we),ue=je(Te),Y=je(Ce),ne=Te*Te,he=ue[0]*ue[0]-ne+2*ue[0]*ue[1]+ue[1]*ue[1],me=we*Ce,pe=de[0]*Y[0]-me+de[0]*Y[1]+de[1]*Y[0]+de[1]*Y[1];Ne=ne-me+(he-pe)}return Ne}function Le(){var we=Math.max.apply(Math,arguments);return we&&(we<1e-8||we>1e8)?Q(2,-Math.round(K(we))):0}return{EPSILON:ie,MACHINE_EPSILON:Ae,CURVETIME_EPSILON:1e-8,GEOMETRIC_EPSILON:1e-7,TRIGONOMETRIC_EPSILON:1e-8,ANGULAR_EPSILON:1e-5,KAPPA:4*(U(2)-1)/3,isZero:function(we){return we>=-ie&&we<=ie},isMachineZero:function(we){return we>=-Ae&&we<=Ae},clamp:fe,integrate:function(we,Te,Ce,je){for(var Ne=d[je-2],Ue=y[je-2],de=(Ce-Te)*.5,ue=de+Te,Y=0,ne=je+1>>1,he=je&1?Ue[Y++]*we(ue):0;Y<ne;){var me=de*Ne[Y];he+=Ue[Y++]*(we(ue+me)+we(ue-me))}return de*he},findRoot:function(we,Te,Ce,je,Ne,Ue,de){for(var ue=0;ue<Ue;ue++){var Y=we(Ce),ne=Y/Te(Ce),he=Ce-ne;if(D(ne)<de){Ce=he;break}Y>0?(Ne=Ce,Ce=he<=je?(je+Ne)*.5:he):(je=Ce,Ce=he>=Ne?(je+Ne)*.5:he)}return fe(Ce,je,Ne)},solveQuadratic:function(we,Te,Ce,je,Ne,Ue){var de,ue=1/0;if(D(we)<ie){if(D(Te)<ie)return D(Ce)<ie?-1:0;de=-Ce/Te}else{Te*=-.5;var Y=ye(we,Te,Ce);if(Y&&D(Y)<Ae){var ne=Le(D(we),D(Te),D(Ce));ne&&(we*=ne,Te*=ne,Ce*=ne,Y=ye(we,Te,Ce))}if(Y>=-Ae){var he=Y<0?0:U(Y),me=Te+(Te<0?-he:he);me===0?(de=Ce/we,ue=-de):(de=me/we,ue=Ce/me)}}var pe=0,Oe=Ne==null,ze=Ne-ie,Be=Ue+ie;return isFinite(de)&&(Oe||de>ze&&de<Be)&&(je[pe++]=Oe?de:fe(de,Ne,Ue)),ue!==de&&isFinite(ue)&&(Oe||ue>ze&&ue<Be)&&(je[pe++]=Oe?ue:fe(ue,Ne,Ue)),pe},solveCubic:function(we,Te,Ce,je,Ne,Ue,de){var ue=Le(D(we),D(Te),D(Ce),D(je)),Y,ne,he,me,pe;ue&&(we*=ue,Te*=ue,Ce*=ue,je*=ue);function Oe(n){Y=n;var ce=we*Y;ne=ce+Te,he=ne*Y+Ce,me=(ce+ne)*Y+he,pe=he*Y+je}if(D(we)<ie)we=Te,ne=Ce,he=je,Y=1/0;else if(D(je)<ie)ne=Te,he=Ce,Y=0;else{Oe(-(Te/we)/3);var ze=pe/we,Be=Q(D(ze),1/3),Ye=ze<0?-1:1,Xe=-me/we,ge=Xe>0?1.324717957244746*Math.max(Be,U(Xe)):Be,Ee=Y-Ye*ge;if(Ee!==Y){do Oe(Ee),Ee=me===0?Y:Y-pe/me/(1+Ae);while(Ye*Ee>Ye*Y);D(we)*Y*Y>D(je/Y)&&(he=-je/Y,ne=(he-Ce)/Y)}}var tt=J.solveQuadratic(we,ne,he,Ne,Ue,de),pt=Ue==null;return isFinite(Y)&&(tt===0||tt>0&&Y!==Ne[0]&&Y!==Ne[1])&&(pt||Y>Ue-ie&&Y<de+ie)&&(Ne[tt++]=pt?Y:fe(Y,Ue,de)),tt}}},oe={_id:1,_pools:{},get:function(d){if(d){var y=this._pools[d];return y||(y=this._pools[d]={_id:1}),y._id++}else return this._id++}},se=h.extend({_class:"Point",_readIndex:!0,initialize:function(y,D){var U=typeof y,Q=this.__read,K=0;if(U==="number"){var ie=typeof D=="number";this._set(y,ie?D:y),Q&&(K=ie?2:1)}else if(U==="undefined"||y===null)this._set(0,0),Q&&(K=y===null?1:0);else{var Ae=U==="string"?y.split(/[\s,]+/)||[]:y;K=1,Array.isArray(Ae)?this._set(+Ae[0],+(Ae.length>1?Ae[1]:Ae[0])):"x"in Ae?this._set(Ae.x||0,Ae.y||0):"width"in Ae?this._set(Ae.width||0,Ae.height||0):"angle"in Ae?(this._set(Ae.length||0,0),this.setAngle(Ae.angle||0)):(this._set(0,0),K=0)}return Q&&(this.__read=K),this},set:"#initialize",_set:function(d,y){return this.x=d,this.y=y,this},equals:function(d){return this===d||d&&(this.x===d.x&&this.y===d.y||Array.isArray(d)&&this.x===d[0]&&this.y===d[1])||!1},clone:function(){return new se(this.x,this.y)},toString:function(){var d=j.instance;return"{ x: "+d.number(this.x)+", y: "+d.number(this.y)+" }"},_serialize:function(d){var y=d.formatter;return[y.number(this.x),y.number(this.y)]},getLength:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},setLength:function(d){if(this.isZero()){var y=this._angle||0;this._set(Math.cos(y)*d,Math.sin(y)*d)}else{var D=d/this.getLength();J.isZero(D)&&this.getAngle(),this._set(this.x*D,this.y*D)}},getAngle:function(){return this.getAngleInRadians.apply(this,arguments)*180/Math.PI},setAngle:function(d){this.setAngleInRadians.call(this,d*Math.PI/180)},getAngleInDegrees:"#getAngle",setAngleInDegrees:"#setAngle",getAngleInRadians:function(){if(arguments.length){var d=se.read(arguments),y=this.getLength()*d.getLength();if(J.isZero(y))return NaN;var D=this.dot(d)/y;return Math.acos(D<-1?-1:D>1?1:D)}else return this.isZero()?this._angle||0:this._angle=Math.atan2(this.y,this.x)},setAngleInRadians:function(d){if(this._angle=d,!this.isZero()){var y=this.getLength();this._set(Math.cos(d)*y,Math.sin(d)*y)}},getQuadrant:function(){return this.x>=0?this.y>=0?1:4:this.y>=0?2:3}},{beans:!1,getDirectedAngle:function(){var d=se.read(arguments);return Math.atan2(this.cross(d),this.dot(d))*180/Math.PI},getDistance:function(){var d=arguments,y=se.read(d),D=y.x-this.x,U=y.y-this.y,Q=D*D+U*U,K=h.read(d);return K?Q:Math.sqrt(Q)},normalize:function(d){d===i&&(d=1);var y=this.getLength(),D=y!==0?d/y:0,U=new se(this.x*D,this.y*D);return D>=0&&(U._angle=this._angle),U},rotate:function(d,y){if(d===0)return this.clone();d=d*Math.PI/180;var D=y?this.subtract(y):this,U=Math.sin(d),Q=Math.cos(d);return D=new se(D.x*Q-D.y*U,D.x*U+D.y*Q),y?D.add(y):D},transform:function(d){return d?d._transformPoint(this):this},add:function(){var d=se.read(arguments);return new se(this.x+d.x,this.y+d.y)},subtract:function(){var d=se.read(arguments);return new se(this.x-d.x,this.y-d.y)},multiply:function(){var d=se.read(arguments);return new se(this.x*d.x,this.y*d.y)},divide:function(){var d=se.read(arguments);return new se(this.x/d.x,this.y/d.y)},modulo:function(){var d=se.read(arguments);return new se(this.x%d.x,this.y%d.y)},negate:function(){return new se(-this.x,-this.y)},isInside:function(){return Qe.read(arguments).contains(this)},isClose:function(){var d=arguments,y=se.read(d),D=h.read(d);return this.getDistance(y)<=D},isCollinear:function(){var d=se.read(arguments);return se.isCollinear(this.x,this.y,d.x,d.y)},isColinear:"#isCollinear",isOrthogonal:function(){var d=se.read(arguments);return se.isOrthogonal(this.x,this.y,d.x,d.y)},isZero:function(){var d=J.isZero;return d(this.x)&&d(this.y)},isNaN:function(){return isNaN(this.x)||isNaN(this.y)},isInQuadrant:function(d){return this.x*(d>1&&d<4?-1:1)>=0&&this.y*(d>2?-1:1)>=0},dot:function(){var d=se.read(arguments);return this.x*d.x+this.y*d.y},cross:function(){var d=se.read(arguments);return this.x*d.y-this.y*d.x},project:function(){var d=se.read(arguments),y=d.isZero()?0:this.dot(d)/d.dot(d);return new se(d.x*y,d.y*y)},statics:{min:function(){var d=arguments,y=se.read(d),D=se.read(d);return new se(Math.min(y.x,D.x),Math.min(y.y,D.y))},max:function(){var d=arguments,y=se.read(d),D=se.read(d);return new se(Math.max(y.x,D.x),Math.max(y.y,D.y))},random:function(){return new se(Math.random(),Math.random())},isCollinear:function(d,y,D,U){return Math.abs(d*U-y*D)<=Math.sqrt((d*d+y*y)*(D*D+U*U))*1e-8},isOrthogonal:function(d,y,D,U){return Math.abs(d*D+y*U)<=Math.sqrt((d*d+y*y)*(D*D+U*U))*1e-8}}},h.each(["round","ceil","floor","abs"],function(d){var y=Math[d];this[d]=function(){return new se(y(this.x),y(this.y))}},{})),be=se.extend({initialize:function(y,D,U,Q){this._x=y,this._y=D,this._owner=U,this._setter=Q},_set:function(d,y,D){return this._x=d,this._y=y,D||this._owner[this._setter](this),this},getX:function(){return this._x},setX:function(d){this._x=d,this._owner[this._setter](this)},getY:function(){return this._y},setY:function(d){this._y=d,this._owner[this._setter](this)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(d){this._owner._changeSelection(this._getSelection(),d)},_getSelection:function(){return this._setter==="setPosition"?4:0}}),qe=h.extend({_class:"Size",_readIndex:!0,initialize:function(y,D){var U=typeof y,Q=this.__read,K=0;if(U==="number"){var ie=typeof D=="number";this._set(y,ie?D:y),Q&&(K=ie?2:1)}else if(U==="undefined"||y===null)this._set(0,0),Q&&(K=y===null?1:0);else{var Ae=U==="string"?y.split(/[\s,]+/)||[]:y;K=1,Array.isArray(Ae)?this._set(+Ae[0],+(Ae.length>1?Ae[1]:Ae[0])):"width"in Ae?this._set(Ae.width||0,Ae.height||0):"x"in Ae?this._set(Ae.x||0,Ae.y||0):(this._set(0,0),K=0)}return Q&&(this.__read=K),this},set:"#initialize",_set:function(d,y){return this.width=d,this.height=y,this},equals:function(d){return d===this||d&&(this.width===d.width&&this.height===d.height||Array.isArray(d)&&this.width===d[0]&&this.height===d[1])||!1},clone:function(){return new qe(this.width,this.height)},toString:function(){var d=j.instance;return"{ width: "+d.number(this.width)+", height: "+d.number(this.height)+" }"},_serialize:function(d){var y=d.formatter;return[y.number(this.width),y.number(this.height)]},add:function(){var d=qe.read(arguments);return new qe(this.width+d.width,this.height+d.height)},subtract:function(){var d=qe.read(arguments);return new qe(this.width-d.width,this.height-d.height)},multiply:function(){var d=qe.read(arguments);return new qe(this.width*d.width,this.height*d.height)},divide:function(){var d=qe.read(arguments);return new qe(this.width/d.width,this.height/d.height)},modulo:function(){var d=qe.read(arguments);return new qe(this.width%d.width,this.height%d.height)},negate:function(){return new qe(-this.width,-this.height)},isZero:function(){var d=J.isZero;return d(this.width)&&d(this.height)},isNaN:function(){return isNaN(this.width)||isNaN(this.height)},statics:{min:function(d,y){return new qe(Math.min(d.width,y.width),Math.min(d.height,y.height))},max:function(d,y){return new qe(Math.max(d.width,y.width),Math.max(d.height,y.height))},random:function(){return new qe(Math.random(),Math.random())}}},h.each(["round","ceil","floor","abs"],function(d){var y=Math[d];this[d]=function(){return new qe(y(this.width),y(this.height))}},{})),ke=qe.extend({initialize:function(y,D,U,Q){this._width=y,this._height=D,this._owner=U,this._setter=Q},_set:function(d,y,D){return this._width=d,this._height=y,D||this._owner[this._setter](this),this},getWidth:function(){return this._width},setWidth:function(d){this._width=d,this._owner[this._setter](this)},getHeight:function(){return this._height},setHeight:function(d){this._height=d,this._owner[this._setter](this)}}),Qe=h.extend({_class:"Rectangle",_readIndex:!0,beans:!0,initialize:function(y,D,U,Q){var K=arguments,ie=typeof y,Ae;if(ie==="number"?(this._set(y,D,U,Q),Ae=4):ie==="undefined"||y===null?(this._set(0,0,0,0),Ae=y===null?1:0):K.length===1&&(Array.isArray(y)?(this._set.apply(this,y),Ae=1):y.x!==i||y.width!==i?(this._set(y.x||0,y.y||0,y.width||0,y.height||0),Ae=1):y.from===i&&y.to===i&&(this._set(0,0,0,0),h.readSupported(K,this)&&(Ae=1))),Ae===i){var fe=se.readNamed(K,"from"),ye=h.peek(K),Le=fe.x,we=fe.y,Te,Ce;if(ye&&ye.x!==i||h.hasNamed(K,"to")){var je=se.readNamed(K,"to");Te=je.x-Le,Ce=je.y-we,Te<0&&(Le=je.x,Te=-Te),Ce<0&&(we=je.y,Ce=-Ce)}else{var Ne=qe.read(K);Te=Ne.width,Ce=Ne.height}this._set(Le,we,Te,Ce),Ae=K.__index}var Ue=K.__filtered;return Ue&&(this.__filtered=Ue),this.__read&&(this.__read=Ae),this},set:"#initialize",_set:function(d,y,D,U){return this.x=d,this.y=y,this.width=D,this.height=U,this},clone:function(){return new Qe(this.x,this.y,this.width,this.height)},equals:function(d){var y=h.isPlainValue(d)?Qe.read(arguments):d;return y===this||y&&this.x===y.x&&this.y===y.y&&this.width===y.width&&this.height===y.height||!1},toString:function(){var d=j.instance;return"{ x: "+d.number(this.x)+", y: "+d.number(this.y)+", width: "+d.number(this.width)+", height: "+d.number(this.height)+" }"},_serialize:function(d){var y=d.formatter;return[y.number(this.x),y.number(this.y),y.number(this.width),y.number(this.height)]},getPoint:function(d){var y=d?se:be;return new y(this.x,this.y,this,"setPoint")},setPoint:function(){var d=se.read(arguments);this.x=d.x,this.y=d.y},getSize:function(d){var y=d?qe:ke;return new y(this.width,this.height,this,"setSize")},_fw:1,_fh:1,setSize:function(){var d=qe.read(arguments),y=this._sx,D=this._sy,U=d.width,Q=d.height;y&&(this.x+=(this.width-U)*y),D&&(this.y+=(this.height-Q)*D),this.width=U,this.height=Q,this._fw=this._fh=1},getLeft:function(){return this.x},setLeft:function(d){if(!this._fw){var y=d-this.x;this.width-=this._sx===.5?y*2:y}this.x=d,this._sx=this._fw=0},getTop:function(){return this.y},setTop:function(d){if(!this._fh){var y=d-this.y;this.height-=this._sy===.5?y*2:y}this.y=d,this._sy=this._fh=0},getRight:function(){return this.x+this.width},setRight:function(d){if(!this._fw){var y=d-this.x;this.width=this._sx===.5?y*2:y}this.x=d-this.width,this._sx=1,this._fw=0},getBottom:function(){return this.y+this.height},setBottom:function(d){if(!this._fh){var y=d-this.y;this.height=this._sy===.5?y*2:y}this.y=d-this.height,this._sy=1,this._fh=0},getCenterX:function(){return this.x+this.width/2},setCenterX:function(d){this._fw||this._sx===.5?this.x=d-this.width/2:(this._sx&&(this.x+=(d-this.x)*2*this._sx),this.width=(d-this.x)*2),this._sx=.5,this._fw=0},getCenterY:function(){return this.y+this.height/2},setCenterY:function(d){this._fh||this._sy===.5?this.y=d-this.height/2:(this._sy&&(this.y+=(d-this.y)*2*this._sy),this.height=(d-this.y)*2),this._sy=.5,this._fh=0},getCenter:function(d){var y=d?se:be;return new y(this.getCenterX(),this.getCenterY(),this,"setCenter")},setCenter:function(){var d=se.read(arguments);return this.setCenterX(d.x),this.setCenterY(d.y),this},getArea:function(){return this.width*this.height},isEmpty:function(){return this.width===0||this.height===0},contains:function(d){return d&&d.width!==i||(Array.isArray(d)?d:arguments).length===4?this._containsRectangle(Qe.read(arguments)):this._containsPoint(se.read(arguments))},_containsPoint:function(d){var y=d.x,D=d.y;return y>=this.x&&D>=this.y&&y<=this.x+this.width&&D<=this.y+this.height},_containsRectangle:function(d){var y=d.x,D=d.y;return y>=this.x&&D>=this.y&&y+d.width<=this.x+this.width&&D+d.height<=this.y+this.height},intersects:function(){var d=Qe.read(arguments),y=h.read(arguments)||0;return d.x+d.width>this.x-y&&d.y+d.height>this.y-y&&d.x<this.x+this.width+y&&d.y<this.y+this.height+y},intersect:function(){var d=Qe.read(arguments),y=Math.max(this.x,d.x),D=Math.max(this.y,d.y),U=Math.min(this.x+this.width,d.x+d.width),Q=Math.min(this.y+this.height,d.y+d.height);return new Qe(y,D,U-y,Q-D)},unite:function(){var d=Qe.read(arguments),y=Math.min(this.x,d.x),D=Math.min(this.y,d.y),U=Math.max(this.x+this.width,d.x+d.width),Q=Math.max(this.y+this.height,d.y+d.height);return new Qe(y,D,U-y,Q-D)},include:function(){var d=se.read(arguments),y=Math.min(this.x,d.x),D=Math.min(this.y,d.y),U=Math.max(this.x+this.width,d.x),Q=Math.max(this.y+this.height,d.y);return new Qe(y,D,U-y,Q-D)},expand:function(){var d=qe.read(arguments),y=d.width,D=d.height;return new Qe(this.x-y/2,this.y-D/2,this.width+y,this.height+D)},scale:function(d,y){return this.expand(this.width*d-this.width,this.height*(y===i?d:y)-this.height)}},h.each([["Top","Left"],["Top","Right"],["Bottom","Left"],["Bottom","Right"],["Left","Center"],["Top","Center"],["Right","Center"],["Bottom","Center"]],function(d,y){var D=d.join(""),U=/^[RL]/.test(D);y>=4&&(d[1]+=U?"Y":"X");var Q=d[U?0:1],K=d[U?1:0],ie="get"+Q,Ae="get"+K,fe="set"+Q,ye="set"+K,Le="get"+D,we="set"+D;this[Le]=function(Te){var Ce=Te?se:be;return new Ce(this[ie](),this[Ae](),this,we)},this[we]=function(){var Te=se.read(arguments);this[fe](Te.x),this[ye](Te.y)}},{beans:!0})),We=Qe.extend({initialize:function(y,D,U,Q,K,ie){this._set(y,D,U,Q,!0),this._owner=K,this._setter=ie},_set:function(d,y,D,U,Q){return this._x=d,this._y=y,this._width=D,this._height=U,Q||this._owner[this._setter](this),this}},new function(){var d=Qe.prototype;return h.each(["x","y","width","height"],function(y){var D=h.capitalize(y),U="_"+y;this["get"+D]=function(){return this[U]},this["set"+D]=function(Q){this[U]=Q,this._dontNotify||this._owner[this._setter](this)}},h.each(["Point","Size","Center","Left","Top","Right","Bottom","CenterX","CenterY","TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],function(y){var D="set"+y;this[D]=function(){this._dontNotify=!0,d[D].apply(this,arguments),this._dontNotify=!1,this._owner[this._setter](this)}},{isSelected:function(){return!!(this._owner._selection&2)},setSelected:function(y){var D=this._owner;D._changeSelection&&D._changeSelection(2,y)}}))}),ct=h.extend({_class:"Matrix",initialize:function d(y,D){var U=arguments,Q=U.length,K=!0;if(Q>=6?this._set.apply(this,U):Q===1||Q===2?y instanceof d?this._set(y._a,y._b,y._c,y._d,y._tx,y._ty,D):Array.isArray(y)?this._set.apply(this,D?y.concat([D]):y):K=!1:Q?K=!1:this.reset(),!K)throw new Error("Unsupported matrix parameters");return this},set:"#initialize",_set:function(d,y,D,U,Q,K,ie){return this._a=d,this._b=y,this._c=D,this._d=U,this._tx=Q,this._ty=K,ie||this._changed(),this},_serialize:function(d,y){return h.serialize(this.getValues(),d,!0,y)},_changed:function(){var d=this._owner;d&&(d._applyMatrix?d.transform(null,!0):d._changed(25))},clone:function(){return new ct(this._a,this._b,this._c,this._d,this._tx,this._ty)},equals:function(d){return d===this||d&&this._a===d._a&&this._b===d._b&&this._c===d._c&&this._d===d._d&&this._tx===d._tx&&this._ty===d._ty},toString:function(){var d=j.instance;return"[["+[d.number(this._a),d.number(this._c),d.number(this._tx)].join(", ")+"], ["+[d.number(this._b),d.number(this._d),d.number(this._ty)].join(", ")+"]]"},reset:function(d){return this._a=this._d=1,this._b=this._c=this._tx=this._ty=0,d||this._changed(),this},apply:function(d,y){var D=this._owner;return D?(D.transform(null,h.pick(d,!0),y),this.isIdentity()):!1},translate:function(){var d=se.read(arguments),y=d.x,D=d.y;return this._tx+=y*this._a+D*this._c,this._ty+=y*this._b+D*this._d,this._changed(),this},scale:function(){var d=arguments,y=se.read(d),D=se.read(d,0,{readNull:!0});return D&&this.translate(D),this._a*=y.x,this._b*=y.x,this._c*=y.y,this._d*=y.y,D&&this.translate(D.negate()),this._changed(),this},rotate:function(d){d*=Math.PI/180;var y=se.read(arguments,1),D=y.x,U=y.y,Q=Math.cos(d),K=Math.sin(d),ie=D-D*Q+U*K,Ae=U-D*K-U*Q,fe=this._a,ye=this._b,Le=this._c,we=this._d;return this._a=Q*fe+K*Le,this._b=Q*ye+K*we,this._c=-K*fe+Q*Le,this._d=-K*ye+Q*we,this._tx+=ie*fe+Ae*Le,this._ty+=ie*ye+Ae*we,this._changed(),this},shear:function(){var d=arguments,y=se.read(d),D=se.read(d,0,{readNull:!0});D&&this.translate(D);var U=this._a,Q=this._b;return this._a+=y.y*this._c,this._b+=y.y*this._d,this._c+=y.x*U,this._d+=y.x*Q,D&&this.translate(D.negate()),this._changed(),this},skew:function(){var d=arguments,y=se.read(d),D=se.read(d,0,{readNull:!0}),U=Math.PI/180,Q=new se(Math.tan(y.x*U),Math.tan(y.y*U));return this.shear(Q,D)},append:function(d,y){if(d){var D=this._a,U=this._b,Q=this._c,K=this._d,ie=d._a,Ae=d._c,fe=d._b,ye=d._d,Le=d._tx,we=d._ty;this._a=ie*D+fe*Q,this._c=Ae*D+ye*Q,this._b=ie*U+fe*K,this._d=Ae*U+ye*K,this._tx+=Le*D+we*Q,this._ty+=Le*U+we*K,y||this._changed()}return this},prepend:function(d,y){if(d){var D=this._a,U=this._b,Q=this._c,K=this._d,ie=this._tx,Ae=this._ty,fe=d._a,ye=d._c,Le=d._b,we=d._d,Te=d._tx,Ce=d._ty;this._a=fe*D+ye*U,this._c=fe*Q+ye*K,this._b=Le*D+we*U,this._d=Le*Q+we*K,this._tx=fe*ie+ye*Ae+Te,this._ty=Le*ie+we*Ae+Ce,y||this._changed()}return this},appended:function(d){return this.clone().append(d)},prepended:function(d){return this.clone().prepend(d)},invert:function(){var d=this._a,y=this._b,D=this._c,U=this._d,Q=this._tx,K=this._ty,ie=d*U-y*D,Ae=null;return ie&&!isNaN(ie)&&isFinite(Q)&&isFinite(K)&&(this._a=U/ie,this._b=-y/ie,this._c=-D/ie,this._d=d/ie,this._tx=(D*K-U*Q)/ie,this._ty=(y*Q-d*K)/ie,Ae=this),Ae},inverted:function(){return this.clone().invert()},concatenate:"#append",preConcatenate:"#prepend",chain:"#appended",_shiftless:function(){return new ct(this._a,this._b,this._c,this._d,0,0)},_orNullIfIdentity:function(){return this.isIdentity()?null:this},isIdentity:function(){return this._a===1&&this._b===0&&this._c===0&&this._d===1&&this._tx===0&&this._ty===0},isInvertible:function(){var d=this._a*this._d-this._c*this._b;return d&&!isNaN(d)&&isFinite(this._tx)&&isFinite(this._ty)},isSingular:function(){return!this.isInvertible()},transform:function(d,y,D){return arguments.length<3?this._transformPoint(se.read(arguments)):this._transformCoordinates(d,y,D)},_transformPoint:function(d,y,D){var U=d.x,Q=d.y;return y||(y=new se),y._set(U*this._a+Q*this._c+this._tx,U*this._b+Q*this._d+this._ty,D)},_transformCoordinates:function(d,y,D){for(var U=0,Q=2*D;U<Q;U+=2){var K=d[U],ie=d[U+1];y[U]=K*this._a+ie*this._c+this._tx,y[U+1]=K*this._b+ie*this._d+this._ty}return y},_transformCorners:function(d){var y=d.x,D=d.y,U=y+d.width,Q=D+d.height,K=[y,D,U,D,U,Q,y,Q];return this._transformCoordinates(K,K,4)},_transformBounds:function(d,y,D){for(var U=this._transformCorners(d),Q=U.slice(0,2),K=Q.slice(),ie=2;ie<8;ie++){var Ae=U[ie],fe=ie&1;Ae<Q[fe]?Q[fe]=Ae:Ae>K[fe]&&(K[fe]=Ae)}return y||(y=new Qe),y._set(Q[0],Q[1],K[0]-Q[0],K[1]-Q[1],D)},inverseTransform:function(){return this._inverseTransform(se.read(arguments))},_inverseTransform:function(d,y,D){var U=this._a,Q=this._b,K=this._c,ie=this._d,Ae=this._tx,fe=this._ty,ye=U*ie-Q*K,Le=null;if(ye&&!isNaN(ye)&&isFinite(Ae)&&isFinite(fe)){var we=d.x-this._tx,Te=d.y-this._ty;y||(y=new se),Le=y._set((we*ie-Te*K)/ye,(Te*U-we*Q)/ye,D)}return Le},decompose:function(){var d=this._a,y=this._b,D=this._c,U=this._d,Q=d*U-y*D,K=Math.sqrt,ie=Math.atan2,Ae=180/Math.PI,fe,ye,Le;if(d!==0||y!==0){var we=K(d*d+y*y);fe=Math.acos(d/we)*(y>0?1:-1),ye=[we,Q/we],Le=[ie(d*D+y*U,we*we),0]}else if(D!==0||U!==0){var Te=K(D*D+U*U);fe=Math.asin(D/Te)*(U>0?1:-1),ye=[Q/Te,Te],Le=[0,ie(d*D+y*U,Te*Te)]}else fe=0,Le=ye=[0,0];return{translation:this.getTranslation(),rotation:fe*Ae,scaling:new se(ye),skewing:new se(Le[0]*Ae,Le[1]*Ae)}},getValues:function(){return[this._a,this._b,this._c,this._d,this._tx,this._ty]},getTranslation:function(){return new se(this._tx,this._ty)},getScaling:function(){return this.decompose().scaling},getRotation:function(){return this.decompose().rotation},applyToContext:function(d){this.isIdentity()||d.transform(this._a,this._b,this._c,this._d,this._tx,this._ty)}},h.each(["a","b","c","d","tx","ty"],function(d){var y=h.capitalize(d),D="_"+d;this["get"+y]=function(){return this[D]},this["set"+y]=function(U){this[D]=U,this._changed()}},{})),St=h.extend({_class:"Line",initialize:function(y,D,U,Q,K){var ie=!1;arguments.length>=4?(this._px=y,this._py=D,this._vx=U,this._vy=Q,ie=K):(this._px=y.x,this._py=y.y,this._vx=D.x,this._vy=D.y,ie=U),ie||(this._vx-=this._px,this._vy-=this._py)},getPoint:function(){return new se(this._px,this._py)},getVector:function(){return new se(this._vx,this._vy)},getLength:function(){return this.getVector().getLength()},intersect:function(d,y){return St.intersect(this._px,this._py,this._vx,this._vy,d._px,d._py,d._vx,d._vy,!0,y)},getSide:function(d,y){return St.getSide(this._px,this._py,this._vx,this._vy,d.x,d.y,!0,y)},getDistance:function(d){return Math.abs(this.getSignedDistance(d))},getSignedDistance:function(d){return St.getSignedDistance(this._px,this._py,this._vx,this._vy,d.x,d.y,!0)},isCollinear:function(d){return se.isCollinear(this._vx,this._vy,d._vx,d._vy)},isOrthogonal:function(d){return se.isOrthogonal(this._vx,this._vy,d._vx,d._vy)},statics:{intersect:function(d,y,D,U,Q,K,ie,Ae,fe,ye){fe||(D-=d,U-=y,ie-=Q,Ae-=K);var Le=D*Ae-U*ie;if(!J.isMachineZero(Le)){var we=d-Q,Te=y-K,Ce=(ie*Te-Ae*we)/Le,je=(D*Te-U*we)/Le,Ne=1e-12,Ue=-Ne,de=1+Ne;if(ye||Ue<Ce&&Ce<de&&Ue<je&&je<de)return ye||(Ce=Ce<=0?0:Ce>=1?1:Ce),new se(d+Ce*D,y+Ce*U)}},getSide:function(d,y,D,U,Q,K,ie,Ae){ie||(D-=d,U-=y);var fe=Q-d,ye=K-y,Le=fe*U-ye*D;return!Ae&&J.isMachineZero(Le)&&(Le=(fe*D+fe*D)/(D*D+U*U),Le>=0&&Le<=1&&(Le=0)),Le<0?-1:Le>0?1:0},getSignedDistance:function(d,y,D,U,Q,K,ie){return ie||(D-=d,U-=y),D===0?U>0?Q-d:d-Q:U===0?D<0?K-y:y-K:((Q-d)*U-(K-y)*D)/(U>D?U*Math.sqrt(1+D*D/(U*U)):D*Math.sqrt(1+U*U/(D*D)))},getDistance:function(d,y,D,U,Q,K,ie){return Math.abs(St.getSignedDistance(d,y,D,U,Q,K,ie))}}}),yt=k.extend({_class:"Project",_list:"projects",_reference:"project",_compactSerialize:!0,initialize:function(y){k.call(this,!0),this._children=[],this._namedChildren={},this._activeLayer=null,this._currentStyle=new Di(null,null,this),this._view=ni.create(this,y||Wi.getCanvas(1,1)),this._selectionItems={},this._selectionCount=0,this._updateVersion=0},_serialize:function(d,y){return h.serialize(this._children,d,!0,y)},_changed:function(d,y){if(d&1){var D=this._view;D&&(D._needsUpdate=!0,!D._requested&&D._autoUpdate&&D.requestUpdate())}var U=this._changes;if(U&&y){var Q=this._changesById,K=y._id,ie=Q[K];ie?ie.flags|=d:U.push(Q[K]={item:y,flags:d})}},clear:function(){for(var d=this._children,y=d.length-1;y>=0;y--)d[y].remove()},isEmpty:function(){return!this._children.length},remove:function d(){return d.base.call(this)?(this._view&&this._view.remove(),!0):!1},getView:function(){return this._view},getCurrentStyle:function(){return this._currentStyle},setCurrentStyle:function(d){this._currentStyle.set(d)},getIndex:function(){return this._index},getOptions:function(){return this._scope.settings},getLayers:function(){return this._children},getActiveLayer:function(){return this._activeLayer||new Ve({project:this,insert:!0})},getSymbolDefinitions:function(){var d=[],y={};return this.getItems({class:lt,match:function(D){var U=D._definition,Q=U._id;return y[Q]||(y[Q]=!0,d.push(U)),!1}}),d},getSymbols:"getSymbolDefinitions",getSelectedItems:function(){var d=this._selectionItems,y=[];for(var D in d){var U=d[D],Q=U._selection;Q&1&&U.isInserted()?y.push(U):Q||this._updateSelection(U)}return y},_updateSelection:function(d){var y=d._id,D=this._selectionItems;d._selection?D[y]!==d&&(this._selectionCount++,D[y]=d):D[y]===d&&(this._selectionCount--,delete D[y])},selectAll:function(){for(var d=this._children,y=0,D=d.length;y<D;y++)d[y].setFullySelected(!0)},deselectAll:function(){var d=this._selectionItems;for(var y in d)d[y].setFullySelected(!1)},addLayer:function(d){return this.insertLayer(i,d)},insertLayer:function(d,y){if(y instanceof Ve){y._remove(!1,!0),h.splice(this._children,[y],d,0),y._setProject(this,!0);var D=y._name;D&&y.setName(D),this._changes&&y._changed(5),this._activeLayer||(this._activeLayer=y)}else y=null;return y},_insertItem:function(d,y,D){return y=this.insertLayer(d,y)||(this._activeLayer||this._insertItem(i,new Ve(xe.NO_INSERT),!0)).insertChild(d,y),D&&y.activate&&y.activate(),y},getItems:function(d){return xe._getItems(this,d)},getItem:function(d){return xe._getItems(this,d,null,null,!0)[0]||null},importJSON:function(d){this.activate();var y=this._activeLayer;return h.importJSON(d,y&&y.isEmpty()&&y)},removeOn:function(d){var y=this._removeSets;if(y){d==="mouseup"&&(y.mousedrag=null);var D=y[d];if(D){for(var U in D){var Q=D[U];for(var K in y){var ie=y[K];ie&&ie!=D&&delete ie[Q._id]}Q.remove()}y[d]=null}}},draw:function(d,y,D){this._updateVersion++,d.save(),y.applyToContext(d);for(var U=this._children,Q=new h({offset:new se(0,0),pixelRatio:D,viewMatrix:y.isIdentity()?null:y,matrices:[new ct],updateMatrix:!0}),K=0,ie=U.length;K<ie;K++)U[K].draw(d,Q);if(d.restore(),this._selectionCount>0){d.save(),d.strokeWidth=1;var Ae=this._selectionItems,fe=this._scope.settings.handleSize,ye=this._updateVersion;for(var Le in Ae)Ae[Le]._drawSelection(d,y,fe,Ae,ye);d.restore()}}}),xe=h.extend(v,{statics:{extend:function d(y){return y._serializeFields&&(y._serializeFields=h.set({},this.prototype._serializeFields,y._serializeFields)),d.base.apply(this,arguments)},INSERT:{insert:!0},NO_INSERT:{insert:!1}},_class:"Item",_name:null,_applyMatrix:!0,_canApplyMatrix:!0,_canScaleStroke:!1,_pivot:null,_visible:!0,_blendMode:"normal",_opacity:1,_locked:!1,_guide:!1,_clipMask:!1,_selection:0,_selectBounds:!0,_selectChildren:!1,_serializeFields:{name:null,applyMatrix:null,matrix:new ct,pivot:null,visible:!0,blendMode:"normal",opacity:1,locked:!1,guide:!1,clipMask:!1,selected:!1,data:{}},_prioritize:["applyMatrix"]},new function(){var d=["onMouseDown","onMouseUp","onMouseDrag","onClick","onDoubleClick","onMouseMove","onMouseEnter","onMouseLeave"];return h.each(d,function(y){this._events[y]={install:function(D){this.getView()._countItemEvent(D,1)},uninstall:function(D){this.getView()._countItemEvent(D,-1)}}},{_events:{onFrame:{install:function(){this.getView()._animateItem(this,!0)},uninstall:function(){this.getView()._animateItem(this,!1)}},onLoad:{},onError:{}},statics:{_itemHandlers:d}})},{initialize:function(){},_initialize:function(d,y){var D=d&&h.isPlainObject(d),U=D&&d.internal===!0,Q=this._matrix=new ct,K=D&&d.project||an.project,ie=an.settings;return this._id=U?null:oe.get(),this._parent=this._index=null,this._applyMatrix=this._canApplyMatrix&&ie.applyMatrix,y&&Q.translate(y),Q._owner=this,this._style=new Di(K._currentStyle,this,K),U||D&&d.insert==!1||!ie.insertItems&&!(D&&d.insert==!0)?this._setProject(K):(D&&d.parent||K)._insertItem(i,this,!0),D&&d!==xe.NO_INSERT&&d!==xe.INSERT&&this.set(d,{internal:!0,insert:!0,project:!0,parent:!0}),D},_serialize:function(d,y){var D={},U=this;function Q(K){for(var ie in K){var Ae=U[ie];h.equals(Ae,ie==="leading"?K.fontSize*1.2:K[ie])||(D[ie]=h.serialize(Ae,d,ie!=="data",y))}}return Q(this._serializeFields),this instanceof Gt||Q(this._style._defaults),[this._class,D]},_changed:function(d){var y=this._symbol,D=this._parent||y,U=this._project;d&8&&(this._bounds=this._position=this._decomposed=i),d&16&&(this._globalMatrix=i),D&&d&72&&xe._clearBoundsCache(D),d&2&&xe._clearBoundsCache(this),U&&U._changed(d,this),y&&y._changed(d)},getId:function(){return this._id},getName:function(){return this._name},setName:function(d){if(this._name&&this._removeNamed(),d===+d+"")throw new Error("Names consisting only of numbers are not supported.");var y=this._getOwner();if(d&&y){var D=y._children,U=y._namedChildren;(U[d]=U[d]||[]).push(this),d in D||(D[d]=this)}this._name=d||i,this._changed(256)},getStyle:function(){return this._style},setStyle:function(d){this.getStyle().set(d)}},h.each(["locked","visible","blendMode","opacity","guide"],function(d){var y=h.capitalize(d),D="_"+d,U={locked:256,visible:265};this["get"+y]=function(){return this[D]},this["set"+y]=function(Q){Q!=this[D]&&(this[D]=Q,this._changed(U[d]||257))}},{}),{beans:!0,getSelection:function(){return this._selection},setSelection:function(d){if(d!==this._selection){this._selection=d;var y=this._project;y&&(y._updateSelection(this),this._changed(257))}},_changeSelection:function(d,y){var D=this._selection;this.setSelection(y?D|d:D&~d)},isSelected:function(){if(this._selectChildren){for(var d=this._children,y=0,D=d.length;y<D;y++)if(d[y].isSelected())return!0}return!!(this._selection&1)},setSelected:function(d){if(this._selectChildren)for(var y=this._children,D=0,U=y.length;D<U;D++)y[D].setSelected(d);this._changeSelection(1,d)},isFullySelected:function(){var d=this._children,y=!!(this._selection&1);if(d&&y){for(var D=0,U=d.length;D<U;D++)if(!d[D].isFullySelected())return!1;return!0}return y},setFullySelected:function(d){var y=this._children;if(y)for(var D=0,U=y.length;D<U;D++)y[D].setFullySelected(d);this._changeSelection(1,d)},isClipMask:function(){return this._clipMask},setClipMask:function(d){this._clipMask!=(d=!!d)&&(this._clipMask=d,d&&(this.setFillColor(null),this.setStrokeColor(null)),this._changed(257),this._parent&&this._parent._changed(2048))},getData:function(){return this._data||(this._data={}),this._data},setData:function(d){this._data=d},getPosition:function(d){var y=d?se:be,D=this._position||(this._position=this._getPositionFromBounds());return new y(D.x,D.y,this,"setPosition")},setPosition:function(){this.translate(se.read(arguments).subtract(this.getPosition(!0)))},_getPositionFromBounds:function(d){return this._pivot?this._matrix._transformPoint(this._pivot):(d||this.getBounds()).getCenter(!0)},getPivot:function(){var d=this._pivot;return d?new be(d.x,d.y,this,"setPivot"):null},setPivot:function(){this._pivot=se.read(arguments,0,{clone:!0,readNull:!0}),this._position=i}},h.each({getStrokeBounds:{stroke:!0},getHandleBounds:{handle:!0},getInternalBounds:{internal:!0}},function(d,y){this[y]=function(D){return this.getBounds(D,d)}},{beans:!0,getBounds:function(d,y){var D=y||d instanceof ct,U=h.set({},D?y:d,this._boundsOptions);(!U.stroke||this.getStrokeScaling())&&(U.cacheItem=this);var Q=this._getCachedBounds(D&&d,U).rect;return arguments.length?Q:new We(Q.x,Q.y,Q.width,Q.height,this,"setBounds")},setBounds:function(){var d=Qe.read(arguments),y=this.getBounds(),D=this._matrix,U=new ct,Q=d.getCenter();U.translate(Q),(d.width!=y.width||d.height!=y.height)&&(D.isInvertible()||(D.set(D._backup||new ct().translate(D.getTranslation())),y=this.getBounds()),U.scale(y.width!==0?d.width/y.width:0,y.height!==0?d.height/y.height:0)),Q=y.getCenter(),U.translate(-Q.x,-Q.y),this.transform(U)},_getBounds:function(d,y){var D=this._children;return!D||!D.length?new Qe:(xe._updateBoundsCache(this,y.cacheItem),xe._getBounds(D,d,y))},_getBoundsCacheKey:function(d,y){return[d.stroke?1:0,d.handle?1:0,y?1:0].join("")},_getCachedBounds:function(d,y,D){d=d&&d._orNullIfIdentity();var U=y.internal&&!D,Q=y.cacheItem,K=U?null:this._matrix._orNullIfIdentity(),ie=Q&&(!d||d.equals(K))&&this._getBoundsCacheKey(y,U),Ae=this._bounds;if(xe._updateBoundsCache(this._parent||this._symbol,Q),ie&&Ae&&ie in Ae){var fe=Ae[ie];return{rect:fe.rect.clone(),nonscaling:fe.nonscaling}}var ye=this._getBounds(d||K,y),Le=ye.rect||ye,we=this._style,Te=ye.nonscaling||we.hasStroke()&&!we.getStrokeScaling();if(ie){Ae||(this._bounds=Ae={});var fe=Ae[ie]={rect:Le.clone(),nonscaling:Te,internal:U}}return{rect:Le,nonscaling:Te}},_getStrokeMatrix:function(d,y){var D=this.getStrokeScaling()?null:y&&y.internal?this:this._parent||this._symbol&&this._symbol._item,U=D?D.getViewMatrix().invert():d;return U&&U._shiftless()},statics:{_updateBoundsCache:function(d,y){if(d&&y){var D=y._id,U=d._boundsCache=d._boundsCache||{ids:{},list:[]};U.ids[D]||(U.list.push(y),U.ids[D]=y)}},_clearBoundsCache:function(d){var y=d._boundsCache;if(y){d._bounds=d._position=d._boundsCache=i;for(var D=0,U=y.list,Q=U.length;D<Q;D++){var K=U[D];K!==d&&(K._bounds=K._position=i,K._boundsCache&&xe._clearBoundsCache(K))}}},_getBounds:function(d,y,D){var U=1/0,Q=-U,K=U,ie=Q,Ae=!1;D=D||{};for(var fe=0,ye=d.length;fe<ye;fe++){var Le=d[fe];if(Le._visible&&!Le.isEmpty(!0)){var we=Le._getCachedBounds(y&&y.appended(Le._matrix),D,!0),Te=we.rect;U=Math.min(Te.x,U),K=Math.min(Te.y,K),Q=Math.max(Te.x+Te.width,Q),ie=Math.max(Te.y+Te.height,ie),we.nonscaling&&(Ae=!0)}}return{rect:isFinite(U)?new Qe(U,K,Q-U,ie-K):new Qe,nonscaling:Ae}}}}),{beans:!0,_decompose:function(){return this._applyMatrix?null:this._decomposed||(this._decomposed=this._matrix.decompose())},getRotation:function(){var d=this._decompose();return d?d.rotation:0},setRotation:function(d){var y=this.getRotation();if(y!=null&&d!=null){var D=this._decomposed;this.rotate(d-y),D&&(D.rotation=d,this._decomposed=D)}},getScaling:function(){var d=this._decompose(),y=d&&d.scaling;return new be(y?y.x:1,y?y.y:1,this,"setScaling")},setScaling:function(){var d=this.getScaling(),y=se.read(arguments,0,{clone:!0,readNull:!0});if(d&&y&&!d.equals(y)){var D=this.getRotation(),U=this._decomposed,Q=new ct,K=J.isZero;if(K(d.x)||K(d.y))Q.translate(U.translation),D&&Q.rotate(D),Q.scale(y.x,y.y),this._matrix.set(Q);else{var ie=this.getPosition(!0);Q.translate(ie),D&&Q.rotate(D),Q.scale(y.x/d.x,y.y/d.y),D&&Q.rotate(-D),Q.translate(ie.negate()),this.transform(Q)}U&&(U.scaling=y,this._decomposed=U)}},getMatrix:function(){return this._matrix},setMatrix:function(){var d=this._matrix;d.set.apply(d,arguments)},getGlobalMatrix:function(d){var y=this._globalMatrix;if(y)for(var D=this._parent,U=[];D;){if(!D._globalMatrix){y=null;for(var Q=0,K=U.length;Q<K;Q++)U[Q]._globalMatrix=null;break}U.push(D),D=D._parent}if(!y){y=this._globalMatrix=this._matrix.clone();var D=this._parent;D&&y.prepend(D.getGlobalMatrix(!0))}return d?y:y.clone()},getViewMatrix:function(){return this.getGlobalMatrix().prepend(this.getView()._matrix)},getApplyMatrix:function(){return this._applyMatrix},setApplyMatrix:function(d){(this._applyMatrix=this._canApplyMatrix&&!!d)&&this.transform(null,!0)},getTransformContent:"#getApplyMatrix",setTransformContent:"#setApplyMatrix"},{getProject:function(){return this._project},_setProject:function(d,y){if(this._project!==d){this._project&&this._installEvents(!1),this._project=d;for(var D=this._children,U=0,Q=D&&D.length;U<Q;U++)D[U]._setProject(d);y=!0}y&&this._installEvents(!0)},getView:function(){return this._project._view},_installEvents:function d(y){d.base.call(this,y);for(var D=this._children,U=0,Q=D&&D.length;U<Q;U++)D[U]._installEvents(y)},getLayer:function(){for(var d=this;d=d._parent;)if(d instanceof Ve)return d;return null},getParent:function(){return this._parent},setParent:function(d){return d.addChild(this)},_getOwner:"#getParent",getChildren:function(){return this._children},setChildren:function(d){this.removeChildren(),this.addChildren(d)},getFirstChild:function(){return this._children&&this._children[0]||null},getLastChild:function(){return this._children&&this._children[this._children.length-1]||null},getNextSibling:function(){var d=this._getOwner();return d&&d._children[this._index+1]||null},getPreviousSibling:function(){var d=this._getOwner();return d&&d._children[this._index-1]||null},getIndex:function(){return this._index},equals:function(d){return d===this||d&&this._class===d._class&&this._style.equals(d._style)&&this._matrix.equals(d._matrix)&&this._locked===d._locked&&this._visible===d._visible&&this._blendMode===d._blendMode&&this._opacity===d._opacity&&this._clipMask===d._clipMask&&this._guide===d._guide&&this._equals(d)||!1},_equals:function(d){return h.equals(this._children,d._children)},clone:function(d){var y=new this.constructor(xe.NO_INSERT),D=this._children,U=h.pick(d?d.insert:i,d===i||d===!0),Q=h.pick(d?d.deep:i,!0);D&&y.copyAttributes(this),(!D||Q)&&y.copyContent(this),D||y.copyAttributes(this),U&&y.insertAbove(this);var K=this._name,ie=this._parent;if(K&&ie){for(var D=ie._children,Ae=K,fe=1;D[K];)K=Ae+" "+fe++;K!==Ae&&y.setName(K)}return y},copyContent:function(d){for(var y=d._children,D=0,U=y&&y.length;D<U;D++)this.addChild(y[D].clone(!1),!0)},copyAttributes:function(d,y){this.setStyle(d._style);for(var D=["_locked","_visible","_blendMode","_opacity","_clipMask","_guide"],U=0,Q=D.length;U<Q;U++){var K=D[U];d.hasOwnProperty(K)&&(this[K]=d[K])}y||this._matrix.set(d._matrix,!0),this.setApplyMatrix(d._applyMatrix),this.setPivot(d._pivot),this.setSelection(d._selection);var ie=d._data,Ae=d._name;this._data=ie?h.clone(ie):null,Ae&&this.setName(Ae)},rasterize:function(d,y){var D,U,Q;h.isPlainObject(d)?(D=d.resolution,U=d.insert,Q=d.raster):(D=d,U=y),Q||(Q=new et(xe.NO_INSERT));var K=this.getStrokeBounds(),ie=(D||this.getView().getResolution())/72,Ae=K.getTopLeft().floor(),fe=K.getBottomRight().ceil(),ye=new qe(fe.subtract(Ae)),Le=ye.multiply(ie);if(Q.setSize(Le,!0),!Le.isZero()){var we=Q.getContext(!0),Te=new ct().scale(ie).translate(Ae.negate());we.save(),Te.applyToContext(we),this.draw(we,new h({matrices:[Te]})),we.restore()}return Q._matrix.set(new ct().translate(Ae.add(ye.divide(2))).scale(1/ie)),(U===i||U)&&Q.insertAbove(this),Q},contains:function(){var d=this._matrix;return d.isInvertible()&&!!this._contains(d._inverseTransform(se.read(arguments)))},_contains:function(d){var y=this._children;if(y){for(var D=y.length-1;D>=0;D--)if(y[D].contains(d))return!0;return!1}return d.isInside(this.getInternalBounds())},isInside:function(){return Qe.read(arguments).contains(this.getBounds())},_asPathItem:function(){return new _t.Rectangle({rectangle:this.getInternalBounds(),matrix:this._matrix,insert:!1})},intersects:function(d,y){return d instanceof xe?this._asPathItem().getIntersections(d._asPathItem(),null,y,!0).length>0:!1}},new function(){function d(){var U=arguments;return this._hitTest(se.read(U),Ke.getOptions(U))}function y(){var U=arguments,Q=se.read(U),K=Ke.getOptions(U),ie=[];return this._hitTest(Q,new h({all:ie},K)),ie}function D(U,Q,K,ie){var Ae=this._children;if(Ae)for(var fe=Ae.length-1;fe>=0;fe--){var ye=Ae[fe],Le=ye!==ie&&ye._hitTest(U,Q,K);if(Le&&!Q.all)return Le}return null}return yt.inject({hitTest:d,hitTestAll:y,_hitTest:D}),{hitTest:d,hitTestAll:y,_hitTestChildren:D}},{_hitTest:function(d,y,D){if(this._locked||!this._visible||this._guide&&!y.guides||this.isEmpty())return null;var U=this._matrix,Q=D?D.appended(U):this.getGlobalMatrix().prepend(this.getView()._matrix),K=Math.max(y.tolerance,1e-12),ie=y._tolerancePadding=new qe(_t._getStrokePadding(K,U._shiftless().invert()));if(d=U._inverseTransform(d),!d||!this._children&&!this.getBounds({internal:!0,stroke:!0,handle:!0}).expand(ie.multiply(2))._containsPoint(d))return null;var Ae=!(y.guides&&!this._guide||y.selected&&!this.isSelected()||y.type&&y.type!==h.hyphenate(this._class)||y.class&&!(this instanceof y.class)),fe=y.match,ye=this,Le,we;function Te(Y){return Y&&fe&&!fe(Y)&&(Y=null),Y&&y.all&&y.all.push(Y),Y}function Ce(Y,ne){var he=ne?Le["get"+ne]():ye.getPosition();if(d.subtract(he).divide(ie).length<=1)return new Ke(Y,ye,{name:ne?h.hyphenate(ne):Y,point:he})}var je=y.position,Ne=y.center,Ue=y.bounds;if(Ae&&this._parent&&(je||Ne||Ue)){if((Ne||Ue)&&(Le=this.getInternalBounds()),we=je&&Ce("position")||Ne&&Ce("center","Center"),!we&&Ue)for(var de=["TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],ue=0;ue<8&&!we;ue++)we=Ce("bounds",de[ue]);we=Te(we)}return we||(we=this._hitTestChildren(d,y,Q)||Ae&&Te(this._hitTestSelf(d,y,Q,this.getStrokeScaling()?null:Q._shiftless().invert()))||null),we&&we.point&&(we.point=U.transform(we.point)),we},_hitTestSelf:function(d,y){if(y.fill&&this.hasFill()&&this._contains(d))return new Ke("fill",this)},matches:function(d,y){function D(ie,Ae){for(var fe in ie)if(ie.hasOwnProperty(fe)){var ye=ie[fe],Le=Ae[fe];if(h.isPlainObject(ye)&&h.isPlainObject(Le)){if(!D(ye,Le))return!1}else if(!h.equals(ye,Le))return!1}return!0}var U=typeof d;if(U==="object"){for(var Q in d)if(d.hasOwnProperty(Q)&&!this.matches(Q,d[Q]))return!1;return!0}else{if(U==="function")return d(this);if(d==="match")return y(this);var K=/^(empty|editable)$/.test(d)?this["is"+h.capitalize(d)]():d==="type"?h.hyphenate(this._class):this[d];if(d==="class"){if(typeof y=="function")return this instanceof y;K=this._class}if(typeof y=="function")return!!y(K);if(y){if(y.test)return y.test(K);if(h.isPlainObject(y))return D(y,K)}return h.equals(K,y)}},getItems:function(d){return xe._getItems(this,d,this._matrix)},getItem:function(d){return xe._getItems(this,d,this._matrix,null,!0)[0]||null},statics:{_getItems:function d(y,D,U,Q,K){if(!Q){var ie=typeof D=="object"&&D,Ae=ie&&ie.overlapping,fe=ie&&ie.inside,ye=Ae||fe,Te=ye&&Qe.read([ye]);Q={items:[],recursive:ie&&ie.recursive!==!1,inside:!!fe,overlapping:!!Ae,rect:Te,path:Ae&&new _t.Rectangle({rectangle:Te,insert:!1})},ie&&(D=h.filter({},D,{recursive:!0,inside:!0,overlapping:!0}))}var Le=y._children,we=Q.items,Te=Q.rect;U=Te&&(U||new ct);for(var Ce=0,je=Le&&Le.length;Ce<je;Ce++){var Ne=Le[Ce],Ue=U&&U.appended(Ne._matrix),de=!0;if(Te){var ye=Ne.getBounds(Ue);if(!Te.intersects(ye))continue;Te.contains(ye)||Q.overlapping&&(ye.contains(Te)||Q.path.intersects(Ne,Ue))||(de=!1)}if(de&&Ne.matches(D)&&(we.push(Ne),K)||(Q.recursive!==!1&&d(Ne,D,Ue,Q,K),K&&we.length>0))break}return we}}},{importJSON:function(d){var y=h.importJSON(d,this);return y!==this?this.addChild(y):y},addChild:function(d){return this.insertChild(i,d)},insertChild:function(d,y){var D=y?this.insertChildren(d,[y]):null;return D&&D[0]},addChildren:function(d){return this.insertChildren(this._children.length,d)},insertChildren:function(d,y){var D=this._children;if(D&&y&&y.length>0){y=h.slice(y);for(var U={},Q=y.length-1;Q>=0;Q--){var K=y[Q],ie=K&&K._id;!K||U[ie]?y.splice(Q,1):(K._remove(!1,!0),U[ie]=!0)}h.splice(D,y,d,0);for(var Ae=this._project,fe=Ae._changes,Q=0,ye=y.length;Q<ye;Q++){var K=y[Q],Le=K._name;K._parent=this,K._setProject(Ae,!0),Le&&K.setName(Le),fe&&K._changed(5)}this._changed(11)}else y=null;return y},_insertItem:"#insertChild",_insertAt:function(d,y){var D=d&&d._getOwner(),U=d!==this&&D?this:null;return U&&(U._remove(!1,!0),D._insertItem(d._index+y,U)),U},insertAbove:function(d){return this._insertAt(d,1)},insertBelow:function(d){return this._insertAt(d,0)},sendToBack:function(){var d=this._getOwner();return d?d._insertItem(0,this):null},bringToFront:function(){var d=this._getOwner();return d?d._insertItem(i,this):null},appendTop:"#addChild",appendBottom:function(d){return this.insertChild(0,d)},moveAbove:"#insertAbove",moveBelow:"#insertBelow",addTo:function(d){return d._insertItem(i,this)},copyTo:function(d){return this.clone(!1).addTo(d)},reduce:function(d){var y=this._children;if(y&&y.length===1){var D=y[0].reduce(d);return this._parent?(D.insertAbove(this),this.remove()):D.remove(),D}return this},_removeNamed:function(){var d=this._getOwner();if(d){var y=d._children,D=d._namedChildren,U=this._name,Q=D[U],K=Q?Q.indexOf(this):-1;K!==-1&&(y[U]==this&&delete y[U],Q.splice(K,1),Q.length?y[U]=Q[0]:delete D[U])}},_remove:function(d,y){var D=this._getOwner(),U=this._project,Q=this._index;return this._style&&this._style._dispose(),D?(this._name&&this._removeNamed(),Q!=null&&(U._activeLayer===this&&(U._activeLayer=this.getNextSibling()||this.getPreviousSibling()),h.splice(D._children,null,Q,1)),this._installEvents(!1),d&&U._changes&&this._changed(5),y&&D._changed(11,this),this._parent=null,!0):!1},remove:function(){return this._remove(!0,!0)},replaceWith:function(d){var y=d&&d.insertBelow(this);return y&&this.remove(),y},removeChildren:function(d,y){if(!this._children)return null;d=d||0,y=h.pick(y,this._children.length);for(var D=h.splice(this._children,null,d,y-d),U=D.length-1;U>=0;U--)D[U]._remove(!0,!1);return D.length>0&&this._changed(11),D},clear:"#removeChildren",reverseChildren:function(){if(this._children){this._children.reverse();for(var d=0,y=this._children.length;d<y;d++)this._children[d]._index=d;this._changed(11)}},isEmpty:function(d){var y=this._children,D=y?y.length:0;if(d){for(var U=0;U<D;U++)if(!y[U].isEmpty(d))return!1;return!0}return!D},isEditable:function(){for(var d=this;d;){if(!d._visible||d._locked)return!1;d=d._parent}return!0},hasFill:function(){return this.getStyle().hasFill()},hasStroke:function(){return this.getStyle().hasStroke()},hasShadow:function(){return this.getStyle().hasShadow()},_getOrder:function(d){function y(ie){var Ae=[];do Ae.unshift(ie);while(ie=ie._parent);return Ae}for(var D=y(this),U=y(d),Q=0,K=Math.min(D.length,U.length);Q<K;Q++)if(D[Q]!=U[Q])return D[Q]._index<U[Q]._index?1:-1;return 0},hasChildren:function(){return this._children&&this._children.length>0},isInserted:function(){return this._parent?this._parent.isInserted():!1},isAbove:function(d){return this._getOrder(d)===-1},isBelow:function(d){return this._getOrder(d)===1},isParent:function(d){return this._parent===d},isChild:function(d){return d&&d._parent===this},isDescendant:function(d){for(var y=this;y=y._parent;)if(y===d)return!0;return!1},isAncestor:function(d){return d?d.isDescendant(this):!1},isSibling:function(d){return this._parent===d._parent},isGroupedWith:function(d){for(var y=this._parent;y;){if(y._parent&&/^(Group|Layer|CompoundPath)$/.test(y._class)&&d.isDescendant(y))return!0;y=y._parent}return!1}},h.each(["rotate","scale","shear","skew"],function(d){var y=d==="rotate";this[d]=function(){var D=arguments,U=(y?h:se).read(D),Q=se.read(D,0,{readNull:!0});return this.transform(new ct()[d](U,Q||this.getPosition(!0)))}},{translate:function(){var d=new ct;return this.transform(d.translate.apply(d,arguments))},transform:function(d,y,D){var U=this._matrix,Q=d&&!d.isIdentity(),K=D&&this._canApplyMatrix||this._applyMatrix&&(Q||!U.isIdentity()||y&&this._children);if(!Q&&!K)return this;if(Q){!d.isInvertible()&&U.isInvertible()&&(U._backup=U.getValues()),U.prepend(d,!0);var ie=this._style,Ae=ie.getFillColor(!0),fe=ie.getStrokeColor(!0);Ae&&Ae.transform(d),fe&&fe.transform(d)}if(K&&(K=this._transformContent(U,y,D))){var ye=this._pivot;ye&&U._transformPoint(ye,ye,!0),U.reset(!0),D&&this._canApplyMatrix&&(this._applyMatrix=!0)}var Le=this._bounds,we=this._position;(Q||K)&&this._changed(25);var Te=Q&&Le&&d.decompose();if(Te&&Te.skewing.isZero()&&Te.rotation%90===0){for(var Ce in Le){var je=Le[Ce];if(je.nonscaling)delete Le[Ce];else if(K||!je.internal){var Ne=je.rect;d._transformBounds(Ne,Ne)}}this._bounds=Le;var Ue=Le[this._getBoundsCacheKey(this._boundsOptions||{})];Ue&&(this._position=this._getPositionFromBounds(Ue.rect))}else Q&&we&&this._pivot&&(this._position=d._transformPoint(we,we));return this},_transformContent:function(d,y,D){var U=this._children;if(U){for(var Q=0,K=U.length;Q<K;Q++)U[Q].transform(d,y,D);return!0}},globalToLocal:function(){return this.getGlobalMatrix(!0)._inverseTransform(se.read(arguments))},localToGlobal:function(){return this.getGlobalMatrix(!0)._transformPoint(se.read(arguments))},parentToLocal:function(){return this._matrix._inverseTransform(se.read(arguments))},localToParent:function(){return this._matrix._transformPoint(se.read(arguments))},fitBounds:function(d,y){d=Qe.read(arguments);var D=this.getBounds(),U=D.height/D.width,Q=d.height/d.width,K=(y?U>Q:U<Q)?d.width/D.width:d.height/D.height,ie=new Qe(new se,new qe(D.width*K,D.height*K));ie.setCenter(d.getCenter()),this.setBounds(ie)}}),{_setStyles:function(d,y,D){var U=this._style,Q=this._matrix;if(U.hasFill()&&(d.fillStyle=U.getFillColor().toCanvasStyle(d,Q)),U.hasStroke()){d.strokeStyle=U.getStrokeColor().toCanvasStyle(d,Q),d.lineWidth=U.getStrokeWidth();var K=U.getStrokeJoin(),ie=U.getStrokeCap(),Ae=U.getMiterLimit();if(K&&(d.lineJoin=K),ie&&(d.lineCap=ie),Ae&&(d.miterLimit=Ae),an.support.nativeDash){var fe=U.getDashArray(),ye=U.getDashOffset();fe&&fe.length&&("setLineDash"in d?(d.setLineDash(fe),d.lineDashOffset=ye):(d.mozDash=fe,d.mozDashOffset=ye))}}if(U.hasShadow()){var Le=y.pixelRatio||1,we=D._shiftless().prepend(new ct().scale(Le,Le)),Te=we.transform(new se(U.getShadowBlur(),0)),Ce=we.transform(this.getShadowOffset());d.shadowColor=U.getShadowColor().toCanvasStyle(d),d.shadowBlur=Te.getLength(),d.shadowOffsetX=Ce.x,d.shadowOffsetY=Ce.y}},draw:function(d,y,D){if(this._updateVersion=this._project._updateVersion,!(!this._visible||this._opacity===0)){var U=y.matrices,Q=y.viewMatrix,K=this._matrix,ie=U[U.length-1].appended(K);if(ie.isInvertible()){Q=Q?Q.appended(ie):ie,U.push(ie),y.updateMatrix&&(this._globalMatrix=ie);var Ae=this._blendMode,fe=J.clamp(this._opacity,0,1),ye=Ae==="normal",Le=ir.nativeModes[Ae],we=ye&&fe===1||y.dontStart||y.clip||(Le||ye&&fe<1)&&this._canComposite(),Te=y.pixelRatio||1,Ce,je,Ne;if(!we){var Ue=this.getStrokeBounds(Q);if(!Ue.width||!Ue.height){U.pop();return}Ne=y.offset,je=y.offset=Ue.getTopLeft().floor(),Ce=d,d=Wi.getContext(Ue.getSize().ceil().add(1).multiply(Te)),Te!==1&&d.scale(Te,Te)}d.save();var de=D?D.appended(K):this._canScaleStroke&&!this.getStrokeScaling(!0)&&Q,ue=!we&&y.clipItem,Y=!de||ue;if(we?(d.globalAlpha=fe,Le&&(d.globalCompositeOperation=Ae)):Y&&d.translate(-je.x,-je.y),Y&&(we?K:Q).applyToContext(d),ue&&y.clipItem.draw(d,y.extend({clip:!0})),de){d.setTransform(Te,0,0,Te,0,0);var ne=y.offset;ne&&d.translate(-ne.x,-ne.y)}this._draw(d,y,Q,de),d.restore(),U.pop(),y.clip&&!y.dontFinish&&d.clip(this.getFillRule()),we||(ir.process(Ae,d,Ce,fe,je.subtract(Ne).multiply(Te)),Wi.release(d),y.offset=Ne)}}},_isUpdated:function(d){var y=this._parent;if(y instanceof ei)return y._isUpdated(d);var D=this._updateVersion===d;return!D&&y&&y._visible&&y._isUpdated(d)&&(this._updateVersion=d,D=!0),D},_drawSelection:function(d,y,D,U,Q){var K=this._selection,ie=K&1,Ae=K&2||ie&&this._selectBounds,fe=K&4;if(this._drawSelected||(ie=!1),(ie||Ae||fe)&&this._isUpdated(Q)){var ye,Le=this.getSelectedColor(!0)||(ye=this.getLayer())&&ye.getSelectedColor(!0),we=y.appended(this.getGlobalMatrix(!0)),Te=D/2;if(d.strokeStyle=d.fillStyle=Le?Le.toCanvasStyle(d):"#009dec",ie&&this._drawSelected(d,we,U),fe){var Ce=this.getPosition(!0),je=this._parent,Ne=je?je.localToGlobal(Ce):Ce,Ue=Ne.x,de=Ne.y;d.beginPath(),d.arc(Ue,de,Te,0,Math.PI*2,!0),d.stroke();for(var ue=[[0,-1],[1,0],[0,1],[-1,0]],Y=Te,ne=D+1,he=0;he<4;he++){var me=ue[he],pe=me[0],Oe=me[1];d.moveTo(Ue+pe*Y,de+Oe*Y),d.lineTo(Ue+pe*ne,de+Oe*ne),d.stroke()}}if(Ae){var ze=we._transformCorners(this.getInternalBounds());d.beginPath();for(var he=0;he<8;he++)d[he?"lineTo":"moveTo"](ze[he],ze[++he]);d.closePath(),d.stroke();for(var he=0;he<8;he++)d.fillRect(ze[he]-Te,ze[++he]-Te,D,D)}}},_canComposite:function(){return!1}},h.each(["down","drag","up","move"],function(d){this["removeOn"+h.capitalize(d)]=function(){var y={};return y[d]=!0,this.removeOn(y)}},{removeOn:function(d){for(var y in d)if(d[y]){var D="mouse"+y,U=this._project,Q=U._removeSets=U._removeSets||{};Q[D]=Q[D]||{},Q[D][this._id]=this}return this}}),{tween:function(d,y,D){D||(D=y,y=d,d=null,D||(D=y,y=null));var U=D&&D.easing,Q=D&&D.start,K=D!=null&&(typeof D=="number"?D:D.duration),ie=new ar(this,d,y,K,U,Q);function Ae(fe){ie._handleFrame(fe.time*1e3),ie.running||this.off("frame",Ae)}return K&&this.on("frame",Ae),ie},tweenTo:function(d,y){return this.tween(null,d,y)},tweenFrom:function(d,y){return this.tween(d,null,y)}}),Gt=xe.extend({_class:"Group",_selectBounds:!1,_selectChildren:!0,_serializeFields:{children:[]},initialize:function(y){this._children=[],this._namedChildren={},this._initialize(y)||this.addChildren(Array.isArray(y)?y:arguments)},_changed:function d(y){d.base.call(this,y),y&2050&&(this._clipItem=i)},_getClipItem:function(){var d=this._clipItem;if(d===i){d=null;for(var y=this._children,D=0,U=y.length;D<U;D++)if(y[D]._clipMask){d=y[D];break}this._clipItem=d}return d},isClipped:function(){return!!this._getClipItem()},setClipped:function(d){var y=this.getFirstChild();y&&y.setClipMask(d)},_getBounds:function d(y,D){var U=this._getClipItem();return U?U._getCachedBounds(U._matrix.prepended(y),h.set({},D,{stroke:!1})):d.base.call(this,y,D)},_hitTestChildren:function d(y,D,U){var Q=this._getClipItem();return(!Q||Q.contains(y))&&d.base.call(this,y,D,U,Q)},_draw:function(d,y){var D=y.clip,U=!D&&this._getClipItem();y=y.extend({clipItem:U,clip:!1}),D?(d.beginPath(),y.dontStart=y.dontFinish=!0):U&&U.draw(d,y.extend({clip:!0}));for(var Q=this._children,K=0,ie=Q.length;K<ie;K++){var Ae=Q[K];Ae!==U&&Ae.draw(d,y)}}}),Ve=Gt.extend({_class:"Layer",initialize:function(){Gt.apply(this,arguments)},_getOwner:function(){return this._parent||this._index!=null&&this._project},isInserted:function d(){return this._parent?d.base.call(this):this._index!=null},activate:function(){this._project._activeLayer=this},_hitTestSelf:function(){}}),Je=xe.extend({_class:"Shape",_applyMatrix:!1,_canApplyMatrix:!1,_canScaleStroke:!0,_serializeFields:{type:null,size:null,radius:null},initialize:function(y,D){this._initialize(y,D)},_equals:function(d){return this._type===d._type&&this._size.equals(d._size)&&h.equals(this._radius,d._radius)},copyContent:function(d){this.setType(d._type),this.setSize(d._size),this.setRadius(d._radius)},getType:function(){return this._type},setType:function(d){this._type=d},getShape:"#getType",setShape:"#setType",getSize:function(){var d=this._size;return new ke(d.width,d.height,this,"setSize")},setSize:function(){var d=qe.read(arguments);if(!this._size)this._size=d.clone();else if(!this._size.equals(d)){var y=this._type,D=d.width,U=d.height;y==="rectangle"?this._radius.set(qe.min(this._radius,d.divide(2).abs())):y==="circle"?(D=U=(D+U)/2,this._radius=D/2):y==="ellipse"&&this._radius._set(D/2,U/2),this._size._set(D,U),this._changed(9)}},getRadius:function(){var d=this._radius;return this._type==="circle"?d:new ke(d.width,d.height,this,"setRadius")},setRadius:function(d){var y=this._type;if(y==="circle"){if(d===this._radius)return;var D=d*2;this._radius=d,this._size._set(D,D)}else if(d=qe.read(arguments),!this._radius)this._radius=d.clone();else{if(this._radius.equals(d))return;if(this._radius.set(d),y==="rectangle"){var D=qe.max(this._size,d.multiply(2));this._size.set(D)}else y==="ellipse"&&this._size._set(d.width*2,d.height*2)}this._changed(9)},isEmpty:function(){return!1},toPath:function(d){var y=new _t[h.capitalize(this._type)]({center:new se,size:this._size,radius:this._radius,insert:!1});return y.copyAttributes(this),an.settings.applyMatrix&&y.setApplyMatrix(!0),(d===i||d)&&y.insertAbove(this),y},toShape:"#clone",_asPathItem:function(){return this.toPath(!1)},_draw:function(d,y,D,U){var Q=this._style,K=Q.hasFill(),ie=Q.hasStroke(),Ae=y.dontFinish||y.clip,fe=!U;if(K||ie||Ae){var ye=this._type,Le=this._radius,we=ye==="circle";if(y.dontStart||d.beginPath(),fe&&we)d.arc(0,0,Le,0,Math.PI*2,!0);else{var Te=we?Le:Le.width,Ce=we?Le:Le.height,je=this._size,Ne=je.width,Ue=je.height;if(fe&&ye==="rectangle"&&Te===0&&Ce===0)d.rect(-Ne/2,-Ue/2,Ne,Ue);else{var de=Ne/2,ue=Ue/2,Y=1-.5522847498307936,ne=Te*Y,he=Ce*Y,me=[-de,-ue+Ce,-de,-ue+he,-de+ne,-ue,-de+Te,-ue,de-Te,-ue,de-ne,-ue,de,-ue+he,de,-ue+Ce,de,ue-Ce,de,ue-he,de-ne,ue,de-Te,ue,-de+Te,ue,-de+ne,ue,-de,ue-he,-de,ue-Ce];U&&U.transform(me,me,32),d.moveTo(me[0],me[1]),d.bezierCurveTo(me[2],me[3],me[4],me[5],me[6],me[7]),de!==Te&&d.lineTo(me[8],me[9]),d.bezierCurveTo(me[10],me[11],me[12],me[13],me[14],me[15]),ue!==Ce&&d.lineTo(me[16],me[17]),d.bezierCurveTo(me[18],me[19],me[20],me[21],me[22],me[23]),de!==Te&&d.lineTo(me[24],me[25]),d.bezierCurveTo(me[26],me[27],me[28],me[29],me[30],me[31])}}d.closePath()}!Ae&&(K||ie)&&(this._setStyles(d,y,D),K&&(d.fill(Q.getFillRule()),d.shadowColor="rgba(0,0,0,0)"),ie&&d.stroke())},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_getBounds:function(d,y){var D=new Qe(this._size).setCenter(0,0),U=this._style,Q=y.stroke&&U.hasStroke()&&U.getStrokeWidth();return d&&(D=d._transformBounds(D)),Q?D.expand(_t._getStrokePadding(Q,this._getStrokeMatrix(d,y))):D}},new function(){function d(D,U,Q){var K=D._radius;if(!K.isZero())for(var ie=D._size.divide(2),Ae=1;Ae<=4;Ae++){var fe=new se(Ae>1&&Ae<4?-1:1,Ae>2?-1:1),ye=fe.multiply(ie),Le=ye.subtract(fe.multiply(K)),we=new Qe(Q?ye.add(fe.multiply(Q)):ye,Le);if(we.contains(U))return{point:Le,quadrant:Ae}}}function y(D,U,Q,K){var ie=D.divide(U);return(!K||ie.isInQuadrant(K))&&ie.subtract(ie.normalize()).multiply(U).divide(Q).length<=1}return{_contains:function D(U){if(this._type==="rectangle"){var Q=d(this,U);return Q?U.subtract(Q.point).divide(this._radius).getLength()<=1:D.base.call(this,U)}else return U.divide(this.size).getLength()<=.5},_hitTestSelf:function D(U,Q,K,ie){var Ae=!1,fe=this._style,ye=Q.stroke&&fe.hasStroke(),Le=Q.fill&&fe.hasFill();if(ye||Le){var we=this._type,Te=this._radius,Ce=ye?fe.getStrokeWidth()/2:0,je=Q._tolerancePadding.add(_t._getStrokePadding(Ce,!fe.getStrokeScaling()&&ie));if(we==="rectangle"){var Ne=je.multiply(2),Ue=d(this,U,Ne);if(Ue)Ae=y(U.subtract(Ue.point),Te,je,Ue.quadrant);else{var de=new Qe(this._size).setCenter(0,0),ue=de.expand(Ne),Y=de.expand(Ne.negate());Ae=ue._containsPoint(U)&&!Y._containsPoint(U)}}else Ae=y(U,Te,je)}return Ae?new Ke(ye?"stroke":"fill",this):D.base.apply(this,arguments)}}},{statics:new function(){function d(y,D,U,Q,K){var ie=h.create(Je.prototype);return ie._type=y,ie._size=U,ie._radius=Q,ie._initialize(h.getNamed(K),D),ie}return{Circle:function(){var y=arguments,D=se.readNamed(y,"center"),U=h.readNamed(y,"radius");return d("circle",D,new qe(U*2),U,y)},Rectangle:function(){var y=arguments,D=Qe.readNamed(y,"rectangle"),U=qe.min(qe.readNamed(y,"radius"),D.getSize(!0).divide(2));return d("rectangle",D.getCenter(!0),D.getSize(!0),U,y)},Ellipse:function(){var y=arguments,D=Je._readEllipse(y),U=D.radius;return d("ellipse",D.center,U.multiply(2),U,y)},_readEllipse:function(y){var D,U;if(h.hasNamed(y,"radius"))D=se.readNamed(y,"center"),U=qe.readNamed(y,"radius");else{var Q=Qe.readNamed(y,"rectangle");D=Q.getCenter(!0),U=Q.getSize(!0).divide(2)}return{center:D,radius:U}}}}}),et=xe.extend({_class:"Raster",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!1,handle:!1},_serializeFields:{crossOrigin:null,source:null},_prioritize:["crossOrigin"],_smoothing:"low",beans:!0,initialize:function(y,D){if(!this._initialize(y,D!==i&&se.read(arguments))){var U,Q=typeof y,K=Q==="string"?c.getElementById(y):Q==="object"?y:null;if(K&&K!==xe.NO_INSERT){if(K.getContext||K.naturalHeight!=null)U=K;else if(K){var ie=qe.read(arguments);ie.isZero()||(U=Wi.getCanvas(ie))}}U?this.setImage(U):this.setSource(y)}this._size||(this._size=new qe,this._loaded=!1)},_equals:function(d){return this.getSource()===d.getSource()},copyContent:function(d){var y=d._image,D=d._canvas;if(y)this._setImage(y);else if(D){var U=Wi.getCanvas(d._size);U.getContext("2d").drawImage(D,0,0),this._setImage(U)}this._crossOrigin=d._crossOrigin},getSize:function(){var d=this._size;return new ke(d?d.width:0,d?d.height:0,this,"setSize")},setSize:function(d,y){var D=qe.read(arguments);if(D.equals(this._size))y&&this.clear();else if(D.width>0&&D.height>0){var U=!y&&this.getElement();this._setImage(Wi.getCanvas(D)),U&&this.getContext(!0).drawImage(U,0,0,D.width,D.height)}else this._canvas&&Wi.release(this._canvas),this._size=D.clone()},getWidth:function(){return this._size?this._size.width:0},setWidth:function(d){this.setSize(d,this.getHeight())},getHeight:function(){return this._size?this._size.height:0},setHeight:function(d){this.setSize(this.getWidth(),d)},getLoaded:function(){return this._loaded},isEmpty:function(){var d=this._size;return!d||d.width===0&&d.height===0},getResolution:function(){var d=this._matrix,y=new se(0,0).transform(d),D=new se(1,0).transform(d).subtract(y),U=new se(0,1).transform(d).subtract(y);return new qe(72/D.getLength(),72/U.getLength())},getPpi:"#getResolution",getImage:function(){return this._image},setImage:function(d){var y=this;function D(U){var Q=y.getView(),K=U&&U.type||"load";Q&&y.responds(K)&&(an=Q._scope,y.emit(K,new Oi(U)))}this._setImage(d),this._loaded?setTimeout(D,0):d&&Lt.add(d,{load:function(U){y._setImage(d),D(U)},error:D})},_setImage:function(d){this._canvas&&Wi.release(this._canvas),d&&d.getContext?(this._image=null,this._canvas=d,this._loaded=!0):(this._image=d,this._canvas=null,this._loaded=!!(d&&d.src&&d.complete)),this._size=new qe(d?d.naturalWidth||d.width:0,d?d.naturalHeight||d.height:0),this._context=null,this._changed(1033)},getCanvas:function(){if(!this._canvas){var d=Wi.getContext(this._size);try{this._image&&d.drawImage(this._image,0,0),this._canvas=d.canvas}catch{Wi.release(d)}}return this._canvas},setCanvas:"#setImage",getContext:function(d){return this._context||(this._context=this.getCanvas().getContext("2d")),d&&(this._image=null,this._changed(1025)),this._context},setContext:function(d){this._context=d},getSource:function(){var d=this._image;return d&&d.src||this.toDataURL()},setSource:function(d){var y=new t.Image,D=this._crossOrigin;D&&(y.crossOrigin=D),d&&(y.src=d),this.setImage(y)},getCrossOrigin:function(){var d=this._image;return d&&d.crossOrigin||this._crossOrigin||""},setCrossOrigin:function(d){this._crossOrigin=d;var y=this._image;y&&(y.crossOrigin=d)},getSmoothing:function(){return this._smoothing},setSmoothing:function(d){this._smoothing=typeof d=="string"?d:d?"low":"off",this._changed(257)},getElement:function(){return this._canvas||this._loaded&&this._image}},{beans:!1,getSubCanvas:function(){var d=Qe.read(arguments),y=Wi.getContext(d.getSize());return y.drawImage(this.getCanvas(),d.x,d.y,d.width,d.height,0,0,d.width,d.height),y.canvas},getSubRaster:function(){var d=Qe.read(arguments),y=new et(xe.NO_INSERT);return y._setImage(this.getSubCanvas(d)),y.translate(d.getCenter().subtract(this.getSize().divide(2))),y._matrix.prepend(this._matrix),y.insertAbove(this),y},toDataURL:function(){var d=this._image,y=d&&d.src;if(/^data:/.test(y))return y;var D=this.getCanvas();return D?D.toDataURL.apply(D,arguments):null},drawImage:function(d){var y=se.read(arguments,1);this.getContext(!0).drawImage(d,y.x,y.y)},getAverageColor:function(d){var y,D;if(d?d instanceof dt?(D=d,y=d.getBounds()):typeof d=="object"&&("width"in d?y=new Qe(d):"x"in d&&(y=new Qe(d.x-.5,d.y-.5,1,1))):y=this.getBounds(),!y)return null;var U=32,Q=Math.min(y.width,U),K=Math.min(y.height,U),ie=et._sampleContext;ie?ie.clearRect(0,0,U+1,U+1):ie=et._sampleContext=Wi.getContext(new qe(U)),ie.save();var Ae=new ct().scale(Q/y.width,K/y.height).translate(-y.x,-y.y);Ae.applyToContext(ie),D&&D.draw(ie,new h({clip:!0,matrices:[Ae]})),this._matrix.applyToContext(ie);var fe=this.getElement(),ye=this._size;fe&&ie.drawImage(fe,-ye.width/2,-ye.height/2),ie.restore();for(var Le=ie.getImageData(.5,.5,Math.ceil(Q),Math.ceil(K)).data,we=[0,0,0],Te=0,Ce=0,je=Le.length;Ce<je;Ce+=4){var Ne=Le[Ce+3];Te+=Ne,Ne/=255,we[0]+=Le[Ce]*Ne,we[1]+=Le[Ce+1]*Ne,we[2]+=Le[Ce+2]*Ne}for(var Ce=0;Ce<3;Ce++)we[Ce]/=Te;return Te?wi.read(we):null},getPixel:function(){var d=se.read(arguments),y=this.getContext().getImageData(d.x,d.y,1,1).data;return new wi("rgb",[y[0]/255,y[1]/255,y[2]/255],y[3]/255)},setPixel:function(){var d=arguments,y=se.read(d),D=wi.read(d),U=D._convert("rgb"),Q=D._alpha,K=this.getContext(!0),ie=K.createImageData(1,1),Ae=ie.data;Ae[0]=U[0]*255,Ae[1]=U[1]*255,Ae[2]=U[2]*255,Ae[3]=Q!=null?Q*255:255,K.putImageData(ie,y.x,y.y)},clear:function(){var d=this._size;this.getContext(!0).clearRect(0,0,d.width+1,d.height+1)},createImageData:function(){var d=qe.read(arguments);return this.getContext().createImageData(d.width,d.height)},getImageData:function(){var d=Qe.read(arguments);return d.isEmpty()&&(d=new Qe(this._size)),this.getContext().getImageData(d.x,d.y,d.width,d.height)},putImageData:function(d){var y=se.read(arguments,1);this.getContext(!0).putImageData(d,y.x,y.y)},setImageData:function(d){this.setSize(d),this.getContext(!0).putImageData(d,0,0)},_getBounds:function(d,y){var D=new Qe(this._size).setCenter(0,0);return d?d._transformBounds(D):D},_hitTestSelf:function(d){if(this._contains(d)){var y=this;return new Ke("pixel",y,{offset:d.add(y._size.divide(2)).round(),color:{get:function(){return y.getPixel(this.offset)}}})}},_draw:function(d,y,D){var U=this.getElement();if(U&&U.width>0&&U.height>0){d.globalAlpha=J.clamp(this._opacity,0,1),this._setStyles(d,y,D);var Q=this._smoothing,K=Q==="off";$t.setPrefixed(d,K?"imageSmoothingEnabled":"imageSmoothingQuality",K?!1:Q),d.drawImage(U,-this._size.width/2,-this._size.height/2)}},_canComposite:function(){return!0}}),lt=xe.extend({_class:"SymbolItem",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!0},_serializeFields:{symbol:null},initialize:function(y,D){this._initialize(y,D!==i&&se.read(arguments,1))||this.setDefinition(y instanceof ut?y:new ut(y))},_equals:function(d){return this._definition===d._definition},copyContent:function(d){this.setDefinition(d._definition)},getDefinition:function(){return this._definition},setDefinition:function(d){this._definition=d,this._changed(9)},getSymbol:"#getDefinition",setSymbol:"#setDefinition",isEmpty:function(){return this._definition._item.isEmpty()},_getBounds:function(d,y){var D=this._definition._item;return D._getCachedBounds(D._matrix.prepended(d),y)},_hitTestSelf:function(d,y,D){var U=y.extend({all:!1}),Q=this._definition._item._hitTest(d,U,D);return Q&&(Q.item=this),Q},_draw:function(d,y){this._definition._item.draw(d,y)}}),ut=h.extend({_class:"SymbolDefinition",initialize:function(y,D){this._id=oe.get(),this.project=an.project,y&&this.setItem(y,D)},_serialize:function(d,y){return y.add(this,function(){return h.serialize([this._class,this._item],d,!1,y)})},_changed:function(d){d&8&&xe._clearBoundsCache(this),d&1&&this.project._changed(d)},getItem:function(){return this._item},setItem:function(d,y){d._symbol&&(d=d.clone()),this._item&&(this._item._symbol=null),this._item=d,d.remove(),d.setSelected(!1),y||d.setPosition(new se),d._symbol=this,this._changed(9)},getDefinition:"#getItem",setDefinition:"#setItem",place:function(d){return new lt(this,d)},clone:function(){return new ut(this._item.clone(!1))},equals:function(d){return d===this||d&&this._item.equals(d._item)||!1}}),Ke=h.extend({_class:"HitResult",initialize:function(y,D,U){this.type=y,this.item=D,U&&this.inject(U)},statics:{getOptions:function(d){var y=d&&h.read(d);return new h({type:null,tolerance:an.settings.hitTolerance,fill:!y,stroke:!y,segments:!y,handles:!1,ends:!1,position:!1,center:!1,bounds:!1,guides:!1,selected:!1},y)}}}),Me=h.extend({_class:"Segment",beans:!0,_selection:0,initialize:function(y,D,U,Q,K,ie){var Ae=arguments.length,fe,ye,Le,we;Ae>0&&(y==null||typeof y=="object"?Ae===1&&y&&"point"in y?(fe=y.point,ye=y.handleIn,Le=y.handleOut,we=y.selection):(fe=y,ye=D,Le=U,we=Q):(fe=[y,D],ye=U!==i?[U,Q]:null,Le=K!==i?[K,ie]:null)),new Ze(fe,this,"_point"),new Ze(ye,this,"_handleIn"),new Ze(Le,this,"_handleOut"),we&&this.setSelection(we)},_serialize:function(d,y){var D=this._point,U=this._selection,Q=U||this.hasHandles()?[D,this._handleIn,this._handleOut]:D;return U&&Q.push(U),h.serialize(Q,d,!0,y)},_changed:function(d){var y=this._path;if(y){var D=y._curves,U=this._index,Q;D&&((!d||d===this._point||d===this._handleIn)&&(Q=U>0?D[U-1]:y._closed?D[D.length-1]:null)&&Q._changed(),(!d||d===this._point||d===this._handleOut)&&(Q=D[U])&&Q._changed()),y._changed(41)}},getPoint:function(){return this._point},setPoint:function(){this._point.set(se.read(arguments))},getHandleIn:function(){return this._handleIn},setHandleIn:function(){this._handleIn.set(se.read(arguments))},getHandleOut:function(){return this._handleOut},setHandleOut:function(){this._handleOut.set(se.read(arguments))},hasHandles:function(){return!this._handleIn.isZero()||!this._handleOut.isZero()},isSmooth:function(){var d=this._handleIn,y=this._handleOut;return!d.isZero()&&!y.isZero()&&d.isCollinear(y)},clearHandles:function(){this._handleIn._set(0,0),this._handleOut._set(0,0)},getSelection:function(){return this._selection},setSelection:function(d){var y=this._selection,D=this._path;this._selection=d=d||0,D&&d!==y&&(D._updateSelection(this,y,d),D._changed(257))},_changeSelection:function(d,y){var D=this._selection;this.setSelection(y?D|d:D&~d)},isSelected:function(){return!!(this._selection&7)},setSelected:function(d){this._changeSelection(7,d)},getIndex:function(){return this._index!==i?this._index:null},getPath:function(){return this._path||null},getCurve:function(){var d=this._path,y=this._index;return d?(y>0&&!d._closed&&y===d._segments.length-1&&y--,d.getCurves()[y]||null):null},getLocation:function(){var d=this.getCurve();return d?new vt(d,this===d._segment1?0:1):null},getNext:function(){var d=this._path&&this._path._segments;return d&&(d[this._index+1]||this._path._closed&&d[0])||null},smooth:function(d,y,D){var U=d||{},Q=U.type,K=U.factor,ie=this.getPrevious(),Ae=this.getNext(),fe=(ie||this)._point,ye=this._point,Le=(Ae||this)._point,we=fe.getDistance(ye),Te=ye.getDistance(Le);if(!Q||Q==="catmull-rom"){var Ce=K===i?.5:K,je=Math.pow(we,Ce),Ne=je*je,Ue=Math.pow(Te,Ce),de=Ue*Ue;if(!y&&ie){var ue=2*de+3*Ue*je+Ne,Y=3*Ue*(Ue+je);this.setHandleIn(Y!==0?new se((de*fe._x+ue*ye._x-Ne*Le._x)/Y-ye._x,(de*fe._y+ue*ye._y-Ne*Le._y)/Y-ye._y):new se)}if(!D&&Ae){var ue=2*Ne+3*je*Ue+de,Y=3*je*(je+Ue);this.setHandleOut(Y!==0?new se((Ne*Le._x+ue*ye._x-de*fe._x)/Y-ye._x,(Ne*Le._y+ue*ye._y-de*fe._y)/Y-ye._y):new se)}}else if(Q==="geometric"){if(ie&&Ae){var ne=fe.subtract(Le),he=K===i?.4:K,me=he*we/(we+Te);y||this.setHandleIn(ne.multiply(me)),D||this.setHandleOut(ne.multiply(me-he))}}else throw new Error("Smoothing method '"+Q+"' not supported.")},getPrevious:function(){var d=this._path&&this._path._segments;return d&&(d[this._index-1]||this._path._closed&&d[d.length-1])||null},isFirst:function(){return!this._index},isLast:function(){var d=this._path;return d&&this._index===d._segments.length-1||!1},reverse:function(){var d=this._handleIn,y=this._handleOut,D=d.clone();d.set(y),y.set(D)},reversed:function(){return new Me(this._point,this._handleOut,this._handleIn)},remove:function(){return this._path?!!this._path.removeSegment(this._index):!1},clone:function(){return new Me(this._point,this._handleIn,this._handleOut)},equals:function(d){return d===this||d&&this._class===d._class&&this._point.equals(d._point)&&this._handleIn.equals(d._handleIn)&&this._handleOut.equals(d._handleOut)||!1},toString:function(){var d=["point: "+this._point];return this._handleIn.isZero()||d.push("handleIn: "+this._handleIn),this._handleOut.isZero()||d.push("handleOut: "+this._handleOut),"{ "+d.join(", ")+" }"},transform:function(d){this._transformCoordinates(d,new Array(6),!0),this._changed()},interpolate:function(d,y,D){var U=1-D,Q=D,K=d._point,ie=y._point,Ae=d._handleIn,fe=y._handleIn,ye=y._handleOut,Le=d._handleOut;this._point._set(U*K._x+Q*ie._x,U*K._y+Q*ie._y,!0),this._handleIn._set(U*Ae._x+Q*fe._x,U*Ae._y+Q*fe._y,!0),this._handleOut._set(U*Le._x+Q*ye._x,U*Le._y+Q*ye._y,!0),this._changed()},_transformCoordinates:function(d,y,D){var U=this._point,Q=!D||!this._handleIn.isZero()?this._handleIn:null,K=!D||!this._handleOut.isZero()?this._handleOut:null,ie=U._x,Ae=U._y,fe=2;return y[0]=ie,y[1]=Ae,Q&&(y[fe++]=Q._x+ie,y[fe++]=Q._y+Ae),K&&(y[fe++]=K._x+ie,y[fe++]=K._y+Ae),d&&(d._transformCoordinates(y,y,fe/2),ie=y[0],Ae=y[1],D?(U._x=ie,U._y=Ae,fe=2,Q&&(Q._x=y[fe++]-ie,Q._y=y[fe++]-Ae),K&&(K._x=y[fe++]-ie,K._y=y[fe++]-Ae)):(Q||(y[fe++]=ie,y[fe++]=Ae),K||(y[fe++]=ie,y[fe++]=Ae))),y}}),Ze=se.extend({initialize:function(y,D,U){var Q,K,ie;if(!y)Q=K=0;else if((Q=y[0])!==i)K=y[1];else{var Ae=y;(Q=Ae.x)===i&&(Ae=se.read(arguments),Q=Ae.x),K=Ae.y,ie=Ae.selected}this._x=Q,this._y=K,this._owner=D,D[U]=this,ie&&this.setSelected(!0)},_set:function(d,y){return this._x=d,this._y=y,this._owner._changed(this),this},getX:function(){return this._x},setX:function(d){this._x=d,this._owner._changed(this)},getY:function(){return this._y},setY:function(d){this._y=d,this._owner._changed(this)},isZero:function(){var d=J.isZero;return d(this._x)&&d(this._y)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(d){this._owner._changeSelection(this._getSelection(),d)},_getSelection:function(){var d=this._owner;return this===d._point?1:this===d._handleIn?2:this===d._handleOut?4:0}}),Fe=h.extend({_class:"Curve",beans:!0,initialize:function(y,D,U,Q,K,ie,Ae,fe){var ye=arguments.length,Le,we,Te,Ce,je,Ne;ye===3?(this._path=y,Le=D,we=U):ye?ye===1?"segment1"in y?(Le=new Me(y.segment1),we=new Me(y.segment2)):"point1"in y?(Te=y.point1,je=y.handle1,Ne=y.handle2,Ce=y.point2):Array.isArray(y)&&(Te=[y[0],y[1]],Ce=[y[6],y[7]],je=[y[2]-y[0],y[3]-y[1]],Ne=[y[4]-y[6],y[5]-y[7]]):ye===2?(Le=new Me(y),we=new Me(D)):ye===4?(Te=y,je=D,Ne=U,Ce=Q):ye===8&&(Te=[y,D],Ce=[Ae,fe],je=[U-y,Q-D],Ne=[K-Ae,ie-fe]):(Le=new Me,we=new Me),this._segment1=Le||new Me(Te,null,je),this._segment2=we||new Me(Ce,Ne,null)},_serialize:function(d,y){return h.serialize(this.hasHandles()?[this.getPoint1(),this.getHandle1(),this.getHandle2(),this.getPoint2()]:[this.getPoint1(),this.getPoint2()],d,!0,y)},_changed:function(){this._length=this._bounds=i},clone:function(){return new Fe(this._segment1,this._segment2)},toString:function(){var d=["point1: "+this._segment1._point];return this._segment1._handleOut.isZero()||d.push("handle1: "+this._segment1._handleOut),this._segment2._handleIn.isZero()||d.push("handle2: "+this._segment2._handleIn),d.push("point2: "+this._segment2._point),"{ "+d.join(", ")+" }"},classify:function(){return Fe.classify(this.getValues())},remove:function(){var d=!1;if(this._path){var y=this._segment2,D=y._handleOut;d=y.remove(),d&&this._segment1._handleOut.set(D)}return d},getPoint1:function(){return this._segment1._point},setPoint1:function(){this._segment1._point.set(se.read(arguments))},getPoint2:function(){return this._segment2._point},setPoint2:function(){this._segment2._point.set(se.read(arguments))},getHandle1:function(){return this._segment1._handleOut},setHandle1:function(){this._segment1._handleOut.set(se.read(arguments))},getHandle2:function(){return this._segment2._handleIn},setHandle2:function(){this._segment2._handleIn.set(se.read(arguments))},getSegment1:function(){return this._segment1},getSegment2:function(){return this._segment2},getPath:function(){return this._path},getIndex:function(){return this._segment1._index},getNext:function(){var d=this._path&&this._path._curves;return d&&(d[this._segment1._index+1]||this._path._closed&&d[0])||null},getPrevious:function(){var d=this._path&&this._path._curves;return d&&(d[this._segment1._index-1]||this._path._closed&&d[d.length-1])||null},isFirst:function(){return!this._segment1._index},isLast:function(){var d=this._path;return d&&this._segment1._index===d._curves.length-1||!1},isSelected:function(){return this.getPoint1().isSelected()&&this.getHandle1().isSelected()&&this.getHandle2().isSelected()&&this.getPoint2().isSelected()},setSelected:function(d){this.getPoint1().setSelected(d),this.getHandle1().setSelected(d),this.getHandle2().setSelected(d),this.getPoint2().setSelected(d)},getValues:function(d){return Fe.getValues(this._segment1,this._segment2,d)},getPoints:function(){for(var d=this.getValues(),y=[],D=0;D<8;D+=2)y.push(new se(d[D],d[D+1]));return y}},{getLength:function(){return this._length==null&&(this._length=Fe.getLength(this.getValues(),0,1)),this._length},getArea:function(){return Fe.getArea(this.getValues())},getLine:function(){return new St(this._segment1._point,this._segment2._point)},getPart:function(d,y){return new Fe(Fe.getPart(this.getValues(),d,y))},getPartLength:function(d,y){return Fe.getLength(this.getValues(),d,y)},divideAt:function(d){return this.divideAtTime(d&&d.curve===this?d.time:this.getTimeAt(d))},divideAtTime:function(d,y){var D=1e-8,U=1-D,Q=null;if(d>=D&&d<=U){var K=Fe.subdivide(this.getValues(),d),ie=K[0],Ae=K[1],fe=y||this.hasHandles(),ye=this._segment1,Le=this._segment2,we=this._path;fe&&(ye._handleOut._set(ie[2]-ie[0],ie[3]-ie[1]),Le._handleIn._set(Ae[4]-Ae[6],Ae[5]-Ae[7]));var Te=ie[6],Ce=ie[7],je=new Me(new se(Te,Ce),fe&&new se(ie[4]-Te,ie[5]-Ce),fe&&new se(Ae[2]-Te,Ae[3]-Ce));we?(we.insert(ye._index+1,je),Q=this.getNext()):(this._segment2=je,this._changed(),Q=new Fe(je,Le))}return Q},splitAt:function(d){var y=this._path;return y?y.splitAt(d):null},splitAtTime:function(d){return this.splitAt(this.getLocationAtTime(d))},divide:function(d,y){return this.divideAtTime(d===i?.5:y?d:this.getTimeAt(d))},split:function(d,y){return this.splitAtTime(d===i?.5:y?d:this.getTimeAt(d))},reversed:function(){return new Fe(this._segment2.reversed(),this._segment1.reversed())},clearHandles:function(){this._segment1._handleOut._set(0,0),this._segment2._handleIn._set(0,0)},statics:{getValues:function(d,y,D,U){var Q=d._point,K=d._handleOut,ie=y._handleIn,Ae=y._point,fe=Q.x,ye=Q.y,Le=Ae.x,we=Ae.y,Te=U?[fe,ye,fe,ye,Le,we,Le,we]:[fe,ye,fe+K._x,ye+K._y,Le+ie._x,we+ie._y,Le,we];return D&&D._transformCoordinates(Te,Te,4),Te},subdivide:function(d,y){var D=d[0],U=d[1],Q=d[2],K=d[3],ie=d[4],Ae=d[5],fe=d[6],ye=d[7];y===i&&(y=.5);var Le=1-y,we=Le*D+y*Q,Te=Le*U+y*K,Ce=Le*Q+y*ie,je=Le*K+y*Ae,Ne=Le*ie+y*fe,Ue=Le*Ae+y*ye,de=Le*we+y*Ce,ue=Le*Te+y*je,Y=Le*Ce+y*Ne,ne=Le*je+y*Ue,he=Le*de+y*Y,me=Le*ue+y*ne;return[[D,U,we,Te,de,ue,he,me],[he,me,Y,ne,Ne,Ue,fe,ye]]},getMonoCurves:function(d,y){var D=[],U=y?0:1,Q=d[U+0],K=d[U+2],ie=d[U+4],Ae=d[U+6];if(Q>=K==K>=ie&&K>=ie==ie>=Ae||Fe.isStraight(d))D.push(d);else{var fe=3*(K-ie)-Q+Ae,ye=2*(Q+ie)-4*K,Le=K-Q,we=1e-8,Te=1-we,Ce=[],je=J.solveQuadratic(fe,ye,Le,Ce,we,Te);if(!je)D.push(d);else{Ce.sort();var Ne=Ce[0],Ue=Fe.subdivide(d,Ne);D.push(Ue[0]),je>1&&(Ne=(Ce[1]-Ne)/(1-Ne),Ue=Fe.subdivide(Ue[1],Ne),D.push(Ue[0])),D.push(Ue[1])}}return D},solveCubic:function(d,y,D,U,Q,K){var ie=d[y],Ae=d[y+2],fe=d[y+4],ye=d[y+6],Le=0;if(!(ie<D&&ye<D&&Ae<D&&fe<D||ie>D&&ye>D&&Ae>D&&fe>D)){var we=3*(Ae-ie),Te=3*(fe-Ae)-we,Ce=ye-ie-we-Te;Le=J.solveCubic(Ce,Te,we,ie-D,U,Q,K)}return Le},getTimeOf:function(d,y){var D=new se(d[0],d[1]),U=new se(d[6],d[7]),Q=1e-12,K=1e-7,ie=y.isClose(D,Q)?0:y.isClose(U,Q)?1:null;if(ie===null)for(var Ae=[y.x,y.y],fe=[],ye=0;ye<2;ye++)for(var Le=Fe.solveCubic(d,ye,Ae[ye],fe,0,1),we=0;we<Le;we++){var Te=fe[we];if(y.isClose(Fe.getPoint(d,Te),K))return Te}return y.isClose(D,K)?0:y.isClose(U,K)?1:null},getNearestTime:function(d,y){if(Fe.isStraight(d)){var D=d[0],U=d[1],Q=d[6],K=d[7],ie=Q-D,Ae=K-U,fe=ie*ie+Ae*Ae;if(fe===0)return 0;var ye=((y.x-D)*ie+(y.y-U)*Ae)/fe;return ye<1e-12?0:ye>.999999999999?1:Fe.getTimeOf(d,new se(D+ye*ie,U+ye*Ae))}var Le=100,we=1/0,Te=0;function Ce(Ue){if(Ue>=0&&Ue<=1){var de=y.getDistance(Fe.getPoint(d,Ue),!0);if(de<we)return we=de,Te=Ue,!0}}for(var je=0;je<=Le;je++)Ce(je/Le);for(var Ne=1/(Le*2);Ne>1e-8;)!Ce(Te-Ne)&&!Ce(Te+Ne)&&(Ne/=2);return Te},getPart:function(d,y,D){var U=y>D;if(U){var Q=y;y=D,D=Q}return y>0&&(d=Fe.subdivide(d,y)[1]),D<1&&(d=Fe.subdivide(d,(D-y)/(1-y))[0]),U?[d[6],d[7],d[4],d[5],d[2],d[3],d[0],d[1]]:d},isFlatEnough:function(d,y){var D=d[0],U=d[1],Q=d[2],K=d[3],ie=d[4],Ae=d[5],fe=d[6],ye=d[7],Le=3*Q-2*D-fe,we=3*K-2*U-ye,Te=3*ie-2*fe-D,Ce=3*Ae-2*ye-U;return Math.max(Le*Le,Te*Te)+Math.max(we*we,Ce*Ce)<=16*y*y},getArea:function(d){var y=d[0],D=d[1],U=d[2],Q=d[3],K=d[4],ie=d[5],Ae=d[6],fe=d[7];return 3*((fe-D)*(U+K)-(Ae-y)*(Q+ie)+Q*(y-K)-U*(D-ie)+fe*(K+y/3)-Ae*(ie+D/3))/20},getBounds:function(d){for(var y=d.slice(0,2),D=y.slice(),U=[0,0],Q=0;Q<2;Q++)Fe._addBounds(d[Q],d[Q+2],d[Q+4],d[Q+6],Q,0,y,D,U);return new Qe(y[0],y[1],D[0]-y[0],D[1]-y[1])},_addBounds:function(d,y,D,U,Q,K,ie,Ae,fe){function ye(he,me){var pe=he-me,Oe=he+me;pe<ie[Q]&&(ie[Q]=pe),Oe>Ae[Q]&&(Ae[Q]=Oe)}K/=2;var Le=ie[Q]+K,we=Ae[Q]-K;if(d<Le||y<Le||D<Le||U<Le||d>we||y>we||D>we||U>we)if(y<d!=y<U&&D<d!=D<U)ye(d,0),ye(U,0);else{var Te=3*(y-D)-d+U,Ce=2*(d+D)-4*y,je=y-d,Ne=J.solveQuadratic(Te,Ce,je,fe),Ue=1e-8,de=1-Ue;ye(U,0);for(var ue=0;ue<Ne;ue++){var Y=fe[ue],ne=1-Y;Ue<=Y&&Y<=de&&ye(ne*ne*ne*d+3*ne*ne*Y*y+3*ne*Y*Y*D+Y*Y*Y*U,K)}}}}},h.each(["getBounds","getStrokeBounds","getHandleBounds"],function(d){this[d]=function(){this._bounds||(this._bounds={});var y=this._bounds[d];return y||(y=this._bounds[d]=_t[d]([this._segment1,this._segment2],!1,this._path)),y.clone()}},{}),h.each({isStraight:function(d,y,D,U){if(y.isZero()&&D.isZero())return!0;var Q=U.subtract(d);if(Q.isZero())return!1;if(Q.isCollinear(y)&&Q.isCollinear(D)){var K=new St(d,U),ie=1e-7;if(K.getDistance(d.add(y))<ie&&K.getDistance(U.add(D))<ie){var Ae=Q.dot(Q),fe=Q.dot(y)/Ae,ye=Q.dot(D)/Ae;return fe>=0&&fe<=1&&ye<=0&&ye>=-1}}return!1},isLinear:function(d,y,D,U){var Q=U.subtract(d).divide(3);return y.equals(Q)&&D.negate().equals(Q)}},function(d,y){this[y]=function(D){var U=this._segment1,Q=this._segment2;return d(U._point,U._handleOut,Q._handleIn,Q._point,D)},this.statics[y]=function(D,U){var Q=D[0],K=D[1],ie=D[6],Ae=D[7];return d(new se(Q,K),new se(D[2]-Q,D[3]-K),new se(D[4]-ie,D[5]-Ae),new se(ie,Ae),U)}},{statics:{},hasHandles:function(){return!this._segment1._handleOut.isZero()||!this._segment2._handleIn.isZero()},hasLength:function(d){return(!this.getPoint1().equals(this.getPoint2())||this.hasHandles())&&this.getLength()>(d||0)},isCollinear:function(d){return d&&this.isStraight()&&d.isStraight()&&this.getLine().isCollinear(d.getLine())},isHorizontal:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).y)<1e-8},isVertical:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).x)<1e-8}}),{beans:!1,getLocationAt:function(d,y){return this.getLocationAtTime(y?d:this.getTimeAt(d))},getLocationAtTime:function(d){return d!=null&&d>=0&&d<=1?new vt(this,d):null},getTimeAt:function(d,y){return Fe.getTimeAt(this.getValues(),d,y)},getParameterAt:"#getTimeAt",getTimesWithTangent:function(){var d=se.read(arguments);return d.isZero()?[]:Fe.getTimesWithTangent(this.getValues(),d)},getOffsetAtTime:function(d){return this.getPartLength(0,d)},getLocationOf:function(){return this.getLocationAtTime(this.getTimeOf(se.read(arguments)))},getOffsetOf:function(){var d=this.getLocationOf.apply(this,arguments);return d?d.getOffset():null},getTimeOf:function(){return Fe.getTimeOf(this.getValues(),se.read(arguments))},getParameterOf:"#getTimeOf",getNearestLocation:function(){var d=se.read(arguments),y=this.getValues(),D=Fe.getNearestTime(y,d),U=Fe.getPoint(y,D);return new vt(this,D,U,null,d.getDistance(U))},getNearestPoint:function(){var d=this.getNearestLocation.apply(this,arguments);return d&&d.getPoint()}},new function(){var d=["getPoint","getTangent","getNormal","getWeightedTangent","getWeightedNormal","getCurvature"];return h.each(d,function(y){this[y+"At"]=function(D,U){var Q=this.getValues();return Fe[y](Q,U?D:Fe.getTimeAt(Q,D))},this[y+"AtTime"]=function(D){return Fe[y](this.getValues(),D)}},{statics:{_evaluateMethods:d}})},new function(){function d(U){var Q=U[0],K=U[1],ie=U[2],Ae=U[3],fe=U[4],ye=U[5],Le=U[6],we=U[7],Te=9*(ie-fe)+3*(Le-Q),Ce=6*(Q+fe)-12*ie,je=3*(ie-Q),Ne=9*(Ae-ye)+3*(we-K),Ue=6*(K+ye)-12*Ae,de=3*(Ae-K);return function(ue){var Y=(Te*ue+Ce)*ue+je,ne=(Ne*ue+Ue)*ue+de;return Math.sqrt(Y*Y+ne*ne)}}function y(U,Q){return Math.max(2,Math.min(16,Math.ceil(Math.abs(Q-U)*32)))}function D(U,Q,K,ie){if(Q==null||Q<0||Q>1)return null;var Ae=U[0],fe=U[1],ye=U[2],Le=U[3],we=U[4],Te=U[5],Ce=U[6],je=U[7],Ne=J.isZero;Ne(ye-Ae)&&Ne(Le-fe)&&(ye=Ae,Le=fe),Ne(we-Ce)&&Ne(Te-je)&&(we=Ce,Te=je);var Ue=3*(ye-Ae),de=3*(we-ye)-Ue,ue=Ce-Ae-Ue-de,Y=3*(Le-fe),ne=3*(Te-Le)-Y,he=je-fe-Y-ne,me,pe;if(K===0)me=Q===0?Ae:Q===1?Ce:((ue*Q+de)*Q+Ue)*Q+Ae,pe=Q===0?fe:Q===1?je:((he*Q+ne)*Q+Y)*Q+fe;else{var Oe=1e-8,ze=1-Oe;if(Q<Oe?(me=Ue,pe=Y):Q>ze?(me=3*(Ce-we),pe=3*(je-Te)):(me=(3*ue*Q+2*de)*Q+Ue,pe=(3*he*Q+2*ne)*Q+Y),ie){me===0&&pe===0&&(Q<Oe||Q>ze)&&(me=we-ye,pe=Te-Le);var Be=Math.sqrt(me*me+pe*pe);Be&&(me/=Be,pe/=Be)}if(K===3){var we=6*ue*Q+2*de,Te=6*he*Q+2*ne,Ye=Math.pow(me*me+pe*pe,3/2);me=Ye!==0?(me*Te-pe*we)/Ye:0,pe=0}}return K===2?new se(pe,-me):new se(me,pe)}return{statics:{classify:function(U){var Q=U[0],K=U[1],ie=U[2],Ae=U[3],fe=U[4],ye=U[5],Le=U[6],we=U[7],Te=Q*(we-ye)+K*(fe-Le)+Le*ye-we*fe,Ce=ie*(K-we)+Ae*(Le-Q)+Q*we-K*Le,je=fe*(Ae-K)+ye*(Q-ie)+ie*K-Ae*Q,Ne=3*je,Ue=Ne-Ce,de=Ue-Ce+Te,ue=Math.sqrt(de*de+Ue*Ue+Ne*Ne),Y=ue!==0?1/ue:0,ne=J.isZero,he="serpentine";de*=Y,Ue*=Y,Ne*=Y;function me(Be,Ye,Xe){var ge=Ye!==i,Ee=ge&&Ye>0&&Ye<1,tt=ge&&Xe>0&&Xe<1;return ge&&(!(Ee||tt)||Be==="loop"&&!(Ee&&tt))&&(Be="arch",Ee=tt=!1),{type:Be,roots:Ee||tt?Ee&&tt?Ye<Xe?[Ye,Xe]:[Xe,Ye]:[Ee?Ye:Xe]:null}}if(ne(de))return ne(Ue)?me(ne(Ne)?"line":"quadratic"):me(he,Ne/(3*Ue));var pe=3*Ue*Ue-4*de*Ne;if(ne(pe))return me("cusp",Ue/(2*de));var Oe=pe>0?Math.sqrt(pe/3):Math.sqrt(-pe),ze=2*de;return me(pe>0?he:"loop",(Ue+Oe)/ze,(Ue-Oe)/ze)},getLength:function(U,Q,K,ie){if(Q===i&&(Q=0),K===i&&(K=1),Fe.isStraight(U)){var Ae=U;K<1&&(Ae=Fe.subdivide(Ae,K)[0],Q/=K),Q>0&&(Ae=Fe.subdivide(Ae,Q)[1]);var fe=Ae[6]-Ae[0],ye=Ae[7]-Ae[1];return Math.sqrt(fe*fe+ye*ye)}return J.integrate(ie||d(U),Q,K,y(Q,K))},getTimeAt:function(U,Q,K){if(K===i&&(K=Q<0?1:0),Q===0)return K;var ie=Math.abs,Ae=1e-12,fe=Q>0,ye=fe?K:0,Le=fe?1:K,we=d(U),Te=Fe.getLength(U,ye,Le,we),Ce=ie(Q)-Te;if(ie(Ce)<Ae)return fe?Le:ye;if(Ce>Ae)return null;var je=Q/Te,Ne=0;function Ue(de){return Ne+=J.integrate(we,K,de,y(K,de)),K=de,Ne-Q}return J.findRoot(Ue,we,K+je,ye,Le,32,1e-12)},getPoint:function(U,Q){return D(U,Q,0,!1)},getTangent:function(U,Q){return D(U,Q,1,!0)},getWeightedTangent:function(U,Q){return D(U,Q,1,!1)},getNormal:function(U,Q){return D(U,Q,2,!0)},getWeightedNormal:function(U,Q){return D(U,Q,2,!1)},getCurvature:function(U,Q){return D(U,Q,3,!1).x},getPeaks:function(U){var Q=U[0],K=U[1],ie=U[2],Ae=U[3],fe=U[4],ye=U[5],Le=U[6],we=U[7],Te=-Q+3*ie-3*fe+Le,Ce=3*Q-6*ie+3*fe,je=-3*Q+3*ie,Ne=-K+3*Ae-3*ye+we,Ue=3*K-6*Ae+3*ye,de=-3*K+3*Ae,ue=1e-8,Y=1-ue,ne=[];return J.solveCubic(9*(Te*Te+Ne*Ne),9*(Te*Ce+Ue*Ne),2*(Ce*Ce+Ue*Ue)+3*(je*Te+de*Ne),je*Ce+Ue*de,ne,ue,Y),ne.sort()}}}},new function(){function d(Ce,je,Ne,Ue,de,ue,Y){var ne=!Y&&Ne.getPrevious()===de,he=!Y&&Ne!==de&&Ne.getNext()===de,me=1e-8,pe=1-me;if(Ue!==null&&Ue>=(ne?me:0)&&Ue<=(he?pe:1)&&ue!==null&&ue>=(he?me:0)&&ue<=(ne?pe:1)){var Oe=new vt(Ne,Ue,null,Y),ze=new vt(de,ue,null,Y);Oe._intersection=ze,ze._intersection=Oe,(!je||je(Oe))&&vt.insert(Ce,Oe,!0)}}function y(Ce,je,Ne,Ue,de,ue,Y,ne,he,me,pe,Oe,ze){if(++he>=4096||++ne>=40)return he;var Be=1e-9,Ye=je[0],Xe=je[1],ge=je[6],Ee=je[7],tt=St.getSignedDistance,pt=tt(Ye,Xe,ge,Ee,je[2],je[3]),n=tt(Ye,Xe,ge,Ee,je[4],je[5]),ce=pt*n>0?3/4:4/9,Zt=ce*Math.min(0,pt,n),Jt=ce*Math.max(0,pt,n),ui=tt(Ye,Xe,ge,Ee,Ce[0],Ce[1]),Vt=tt(Ye,Xe,ge,Ee,Ce[2],Ce[3]),qt=tt(Ye,Xe,ge,Ee,Ce[4],Ce[5]),Ei=tt(Ye,Xe,ge,Ee,Ce[6],Ce[7]),Ai=D(ui,Vt,qt,Ei),pi=Ai[0],Rt=Ai[1],Yi,Rn;if(pt===0&&n===0&&ui===0&&Vt===0&&qt===0&&Ei===0||(Yi=U(pi,Rt,Zt,Jt))==null||(Rn=U(pi.reverse(),Rt.reverse(),Zt,Jt))==null)return he;var wn=me+(pe-me)*Yi,pn=me+(pe-me)*Rn;if(Math.max(ze-Oe,pn-wn)<Be){var vr=(wn+pn)/2,Mi=(Oe+ze)/2;d(de,ue,Y?Ue:Ne,Y?Mi:vr,Y?Ne:Ue,Y?vr:Mi)}else{Ce=Fe.getPart(Ce,Yi,Rn);var nr=ze-Oe;if(Rn-Yi>.8)if(pn-wn>nr){var fn=Fe.subdivide(Ce,.5),vr=(wn+pn)/2;he=y(je,fn[0],Ue,Ne,de,ue,!Y,ne,he,Oe,ze,wn,vr),he=y(je,fn[1],Ue,Ne,de,ue,!Y,ne,he,Oe,ze,vr,pn)}else{var fn=Fe.subdivide(je,.5),Mi=(Oe+ze)/2;he=y(fn[0],Ce,Ue,Ne,de,ue,!Y,ne,he,Oe,Mi,wn,pn),he=y(fn[1],Ce,Ue,Ne,de,ue,!Y,ne,he,Mi,ze,wn,pn)}else nr===0||nr>=Be?he=y(je,Ce,Ue,Ne,de,ue,!Y,ne,he,Oe,ze,wn,pn):he=y(Ce,je,Ne,Ue,de,ue,Y,ne,he,wn,pn,Oe,ze)}return he}function D(Ce,je,Ne,Ue){var de=[0,Ce],ue=[1/3,je],Y=[2/3,Ne],ne=[1,Ue],he=je-(2*Ce+Ue)/3,me=Ne-(Ce+2*Ue)/3,pe;if(he*me<0)pe=[[de,ue,ne],[de,Y,ne]];else{var Oe=he/me;pe=[Oe>=2?[de,ue,ne]:Oe<=.5?[de,Y,ne]:[de,ue,Y,ne],[de,ne]]}return(he||me)<0?pe.reverse():pe}function U(Ce,je,Ne,Ue){return Ce[0][1]<Ne?Q(Ce,!0,Ne):je[0][1]>Ue?Q(je,!1,Ue):Ce[0][0]}function Q(Ce,je,Ne){for(var Ue=Ce[0][0],de=Ce[0][1],ue=1,Y=Ce.length;ue<Y;ue++){var ne=Ce[ue][0],he=Ce[ue][1];if(je?he>=Ne:he<=Ne)return he===Ne?ne:Ue+(Ne-de)*(ne-Ue)/(he-de);Ue=ne,de=he}return null}function K(Ce,je,Ne,Ue,de){var ue=J.isZero;if(ue(Ue)&&ue(de)){var Y=Fe.getTimeOf(Ce,new se(je,Ne));return Y===null?[]:[Y]}for(var ne=Math.atan2(-de,Ue),he=Math.sin(ne),me=Math.cos(ne),pe=[],Oe=[],ze=0;ze<8;ze+=2){var Be=Ce[ze]-je,Ye=Ce[ze+1]-Ne;pe.push(Be*me-Ye*he,Be*he+Ye*me)}return Fe.solveCubic(pe,1,0,Oe,0,1),Oe}function ie(Ce,je,Ne,Ue,de,ue,Y){for(var ne=je[0],he=je[1],me=je[6],pe=je[7],Oe=K(Ce,ne,he,me-ne,pe-he),ze=0,Be=Oe.length;ze<Be;ze++){var Ye=Oe[ze],Xe=Fe.getPoint(Ce,Ye),ge=Fe.getTimeOf(je,Xe);ge!==null&&d(de,ue,Y?Ue:Ne,Y?ge:Ye,Y?Ne:Ue,Y?Ye:ge)}}function Ae(Ce,je,Ne,Ue,de,ue){var Y=St.intersect(Ce[0],Ce[1],Ce[6],Ce[7],je[0],je[1],je[6],je[7]);Y&&d(de,ue,Ne,Fe.getTimeOf(Ce,Y),Ue,Fe.getTimeOf(je,Y))}function fe(Ce,je,Ne,Ue,de,ue){var Y=1e-12,ne=Math.min,he=Math.max;if(he(Ce[0],Ce[2],Ce[4],Ce[6])+Y>ne(je[0],je[2],je[4],je[6])&&ne(Ce[0],Ce[2],Ce[4],Ce[6])-Y<he(je[0],je[2],je[4],je[6])&&he(Ce[1],Ce[3],Ce[5],Ce[7])+Y>ne(je[1],je[3],je[5],je[7])&&ne(Ce[1],Ce[3],Ce[5],Ce[7])-Y<he(je[1],je[3],je[5],je[7])){var me=we(Ce,je);if(me)for(var pe=0;pe<2;pe++){var Oe=me[pe];d(de,ue,Ne,Oe[0],Ue,Oe[1],!0)}else{var ze=Fe.isStraight(Ce),Be=Fe.isStraight(je),Ye=ze&&Be,Xe=ze&&!Be,ge=de.length;if((Ye?Ae:ze||Be?ie:y)(Xe?je:Ce,Xe?Ce:je,Xe?Ue:Ne,Xe?Ne:Ue,de,ue,Xe,0,0,0,1,0,1),!Ye||de.length===ge)for(var pe=0;pe<4;pe++){var Ee=pe>>1,tt=pe&1,pt=Ee*6,n=tt*6,ce=new se(Ce[pt],Ce[pt+1]),Zt=new se(je[n],je[n+1]);ce.isClose(Zt,Y)&&d(de,ue,Ne,Ee,Ue,tt)}}}return de}function ye(Ce,je,Ne,Ue){var de=Fe.classify(Ce);if(de.type==="loop"){var ue=de.roots;d(Ne,Ue,je,ue[0],je,ue[1])}return Ne}function Le(Ce,je,Ne,Ue,de,ue){var Y=1e-7,ne=!je;ne&&(je=Ce);for(var he=Ce.length,me=je.length,pe=new Array(he),Oe=ne?pe:new Array(me),ze=[],Be=0;Be<he;Be++)pe[Be]=Ce[Be].getValues(Ue);if(!ne)for(var Be=0;Be<me;Be++)Oe[Be]=je[Be].getValues(de);for(var Ye=O.findCurveBoundsCollisions(pe,Oe,Y),Xe=0;Xe<he;Xe++){var ge=Ce[Xe],Ee=pe[Xe];ne&&ye(Ee,ge,ze,Ne);var tt=Ye[Xe];if(tt)for(var pt=0;pt<tt.length;pt++){if(ue&&ze.length)return ze;var n=tt[pt];if(!ne||n>Xe){var ce=je[n],Zt=Oe[n];fe(Ee,Zt,ge,ce,ze,Ne)}}}return ze}function we(Ce,je){function Ne(Ei){var Ai=Ei[6]-Ei[0],pi=Ei[7]-Ei[1];return Ai*Ai+pi*pi}var Ue=Math.abs,de=St.getDistance,ue=1e-8,Y=1e-7,ne=Fe.isStraight(Ce),he=Fe.isStraight(je),me=ne&&he,pe=Ne(Ce)<Ne(je),Oe=pe?je:Ce,ze=pe?Ce:je,Be=Oe[0],Ye=Oe[1],Xe=Oe[6]-Be,ge=Oe[7]-Ye;if(de(Be,Ye,Xe,ge,ze[0],ze[1],!0)<Y&&de(Be,Ye,Xe,ge,ze[6],ze[7],!0)<Y)!me&&de(Be,Ye,Xe,ge,Oe[2],Oe[3],!0)<Y&&de(Be,Ye,Xe,ge,Oe[4],Oe[5],!0)<Y&&de(Be,Ye,Xe,ge,ze[2],ze[3],!0)<Y&&de(Be,Ye,Xe,ge,ze[4],ze[5],!0)<Y&&(ne=he=me=!0);else if(me)return null;if(ne^he)return null;for(var Ee=[Ce,je],tt=[],pt=0;pt<4&&tt.length<2;pt++){var n=pt&1,ce=n^1,Zt=pt>>1,Jt=Fe.getTimeOf(Ee[n],new se(Ee[ce][Zt?6:0],Ee[ce][Zt?7:1]));if(Jt!=null){var ui=n?[Zt,Jt]:[Jt,Zt];(!tt.length||Ue(ui[0]-tt[0][0])>ue&&Ue(ui[1]-tt[0][1])>ue)&&tt.push(ui)}if(pt>2&&!tt.length)break}if(tt.length!==2)tt=null;else if(!me){var Vt=Fe.getPart(Ce,tt[0][0],tt[1][0]),qt=Fe.getPart(je,tt[0][1],tt[1][1]);(Ue(qt[2]-Vt[2])>Y||Ue(qt[3]-Vt[3])>Y||Ue(qt[4]-Vt[4])>Y||Ue(qt[5]-Vt[5])>Y)&&(tt=null)}return tt}function Te(Ce,je){var Ne=Ce[0],Ue=Ce[1],de=Ce[2],ue=Ce[3],Y=Ce[4],ne=Ce[5],he=Ce[6],me=Ce[7],pe=je.normalize(),Oe=pe.x,ze=pe.y,Be=3*he-9*Y+9*de-3*Ne,Ye=3*me-9*ne+9*ue-3*Ue,Xe=6*Y-12*de+6*Ne,ge=6*ne-12*ue+6*Ue,Ee=3*de-3*Ne,tt=3*ue-3*Ue,pt=2*Be*ze-2*Ye*Oe,n=[];if(Math.abs(pt)<J.CURVETIME_EPSILON){var ce=Be*tt-Ye*Ee,pt=Be*ge-Ye*Xe;if(pt!=0){var Zt=-ce/pt;Zt>=0&&Zt<=1&&n.push(Zt)}}else{var Jt=(Xe*Xe-4*Be*Ee)*ze*ze+(-2*Xe*ge+4*Ye*Ee+4*Be*tt)*Oe*ze+(ge*ge-4*Ye*tt)*Oe*Oe,ui=Xe*ze-ge*Oe;if(Jt>=0&&pt!=0){var Vt=Math.sqrt(Jt),qt=-(ui+Vt)/pt,Ei=(-ui+Vt)/pt;qt>=0&&qt<=1&&n.push(qt),Ei>=0&&Ei<=1&&n.push(Ei)}}return n}return{getIntersections:function(Ce){var je=this.getValues(),Ne=Ce&&Ce!==this&&Ce.getValues();return Ne?fe(je,Ne,this,Ce,[]):ye(je,this,[])},statics:{getOverlaps:we,getIntersections:Le,getCurveLineIntersections:K,getTimesWithTangent:Te}}}),vt=h.extend({_class:"CurveLocation",initialize:function(y,D,U,Q,K){if(D>=.99999999){var ie=y.getNext();ie&&(D=0,y=ie)}this._setCurve(y),this._time=D,this._point=U||y.getPointAtTime(D),this._overlap=Q,this._distance=K,this._intersection=this._next=this._previous=null},_setPath:function(d){this._path=d,this._version=d?d._version:0},_setCurve:function(d){this._setPath(d._path),this._curve=d,this._segment=null,this._segment1=d._segment1,this._segment2=d._segment2},_setSegment:function(d){var y=d.getCurve();y?this._setCurve(y):(this._setPath(d._path),this._segment1=d,this._segment2=null),this._segment=d,this._time=d===this._segment1?0:1,this._point=d._point.clone()},getSegment:function(){var d=this._segment;if(!d){var y=this.getCurve(),D=this.getTime();D===0?d=y._segment1:D===1?d=y._segment2:D!=null&&(d=y.getPartLength(0,D)<y.getPartLength(D,1)?y._segment1:y._segment2),this._segment=d}return d},getCurve:function(){var d=this._path,y=this;d&&d._version!==this._version&&(this._time=this._offset=this._curveOffset=this._curve=null);function D(U){var Q=U&&U.getCurve();if(Q&&(y._time=Q.getTimeOf(y._point))!=null)return y._setCurve(Q),Q}return this._curve||D(this._segment)||D(this._segment1)||D(this._segment2.getPrevious())},getPath:function(){var d=this.getCurve();return d&&d._path},getIndex:function(){var d=this.getCurve();return d&&d.getIndex()},getTime:function(){var d=this.getCurve(),y=this._time;return d&&y==null?this._time=d.getTimeOf(this._point):y},getParameter:"#getTime",getPoint:function(){return this._point},getOffset:function(){var d=this._offset;if(d==null){d=0;var y=this.getPath(),D=this.getIndex();if(y&&D!=null)for(var U=y.getCurves(),Q=0;Q<D;Q++)d+=U[Q].getLength();this._offset=d+=this.getCurveOffset()}return d},getCurveOffset:function(){var d=this._curveOffset;if(d==null){var y=this.getCurve(),D=this.getTime();this._curveOffset=d=D!=null&&y&&y.getPartLength(0,D)}return d},getIntersection:function(){return this._intersection},getDistance:function(){return this._distance},divide:function(){var d=this.getCurve(),y=d&&d.divideAtTime(this.getTime());return y&&this._setSegment(y._segment1),y},split:function(){var d=this.getCurve(),y=d._path,D=d&&d.splitAtTime(this.getTime());return D&&this._setSegment(y.getLastSegment()),D},equals:function(d,y){var D=this===d;if(!D&&d instanceof vt){var U=this.getCurve(),Q=d.getCurve(),K=U._path,ie=Q._path;if(K===ie){var Ae=Math.abs,fe=1e-7,ye=Ae(this.getOffset()-d.getOffset()),Le=!y&&this._intersection,we=!y&&d._intersection;D=(ye<fe||K&&Ae(K.getLength()-ye)<fe)&&(!Le&&!we||Le&&we&&Le.equals(we,!0))}}return D},toString:function(){var d=[],y=this.getPoint(),D=j.instance;y&&d.push("point: "+y);var U=this.getIndex();U!=null&&d.push("index: "+U);var Q=this.getTime();return Q!=null&&d.push("time: "+D.number(Q)),this._distance!=null&&d.push("distance: "+D.number(this._distance)),"{ "+d.join(", ")+" }"},isTouching:function(){var d=this._intersection;if(d&&this.getTangent().isCollinear(d.getTangent())){var y=this.getCurve(),D=d.getCurve();return!(y.isStraight()&&D.isStraight()&&y.getLine().intersect(D.getLine()))}return!1},isCrossing:function(){var d=this._intersection;if(!d)return!1;var y=this.getTime(),D=d.getTime(),U=1e-8,Q=1-U,K=y>=U&&y<=Q,ie=D>=U&&D<=Q;if(K&&ie)return!this.isTouching();var Ae=this.getCurve(),fe=Ae&&y<U?Ae.getPrevious():Ae,ye=d.getCurve(),Le=ye&&D<U?ye.getPrevious():ye;if(y>Q&&(Ae=Ae.getNext()),D>Q&&(ye=ye.getNext()),!fe||!Ae||!Le||!ye)return!1;var we=[];function Te(Oe,ze){var Be=Oe.getValues(),Ye=Fe.classify(Be).roots||Fe.getPeaks(Be),Xe=Ye.length,ge=Fe.getLength(Be,ze&&Xe?Ye[Xe-1]:0,!ze&&Xe?Ye[0]:1);we.push(Xe?ge:ge/32)}function Ce(Oe,ze,Be){return ze<Be?Oe>ze&&Oe<Be:Oe>ze||Oe<Be}K||(Te(fe,!0),Te(Ae,!1)),ie||(Te(Le,!0),Te(ye,!1));var je=this.getPoint(),Ne=Math.min.apply(Math,we),Ue=K?Ae.getTangentAtTime(y):Ae.getPointAt(Ne).subtract(je),de=K?Ue.negate():fe.getPointAt(-Ne).subtract(je),ue=ie?ye.getTangentAtTime(D):ye.getPointAt(Ne).subtract(je),Y=ie?ue.negate():Le.getPointAt(-Ne).subtract(je),ne=de.getAngle(),he=Ue.getAngle(),me=Y.getAngle(),pe=ue.getAngle();return!!(K?Ce(ne,me,pe)^Ce(he,me,pe)&&Ce(ne,pe,me)^Ce(he,pe,me):Ce(me,ne,he)^Ce(pe,ne,he)&&Ce(me,he,ne)^Ce(pe,he,ne))},hasOverlap:function(){return!!this._overlap}},h.each(Fe._evaluateMethods,function(d){var y=d+"At";this[d]=function(){var D=this.getCurve(),U=this.getTime();return U!=null&&D&&D[y](U,!0)}},{preserve:!0}),new function(){function d(y,D,U){var Q=y.length,K=0,ie=Q-1;function Ae(je,Ne){for(var Ue=je+Ne;Ue>=-1&&Ue<=Q;Ue+=Ne){var de=y[(Ue%Q+Q)%Q];if(!D.getPoint().isClose(de.getPoint(),1e-7))break;if(D.equals(de))return de}return null}for(;K<=ie;){var fe=K+ie>>>1,ye=y[fe],Le;if(U&&(Le=D.equals(ye)?ye:Ae(fe,-1)||Ae(fe,1)))return D._overlap&&(Le._overlap=Le._intersection._overlap=!0),Le;var we=D.getPath(),Te=ye.getPath(),Ce=we!==Te?we._id-Te._id:D.getIndex()+D.getTime()-(ye.getIndex()+ye.getTime());Ce<0?ie=fe-1:K=fe+1}return y.splice(K,0,D),D}return{statics:{insert:d,expand:function(y){for(var D=y.slice(),U=y.length-1;U>=0;U--)d(D,y[U]._intersection,!1);return D}}}}),dt=xe.extend({_class:"PathItem",_selectBounds:!1,_canScaleStroke:!0,beans:!0,initialize:function(){},statics:{create:function(d){var y,D,U;if(h.isPlainObject(d)?(D=d.segments,y=d.pathData):Array.isArray(d)?D=d:typeof d=="string"&&(y=d),D){var Q=D[0];U=Q&&Array.isArray(Q[0])}else y&&(U=(y.match(/m/gi)||[]).length>1||/z\s*\S+/i.test(y));var K=U?ei:_t;return new K(d)}},_asPathItem:function(){return this},isClockwise:function(){return this.getArea()>=0},setClockwise:function(d){this.isClockwise()!=(d=!!d)&&this.reverse()},setPathData:function(d){var y=d&&d.match(/[mlhvcsqtaz][^mlhvcsqtaz]*/ig),D,U=!1,Q,K,ie=new se,Ae=new se;function fe(Y,ne){var he=+D[Y];return U&&(he+=ie[ne]),he}function ye(Y){return new se(fe(Y,"x"),fe(Y+1,"y"))}this.clear();for(var Le=0,we=y&&y.length;Le<we;Le++){var Te=y[Le],Ce=Te[0],je=Ce.toLowerCase();D=Te.match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g);var Ne=D&&D.length;switch(U=Ce===je,Q==="z"&&!/[mz]/.test(je)&&this.moveTo(ie),je){case"m":case"l":for(var Ue=je==="m",de=0;de<Ne;de+=2)this[Ue?"moveTo":"lineTo"](ie=ye(de)),Ue&&(Ae=ie,Ue=!1);K=ie;break;case"h":case"v":var ue=je==="h"?"x":"y";ie=ie.clone();for(var de=0;de<Ne;de++)ie[ue]=fe(de,ue),this.lineTo(ie);K=ie;break;case"c":for(var de=0;de<Ne;de+=6)this.cubicCurveTo(ye(de),K=ye(de+2),ie=ye(de+4));break;case"s":for(var de=0;de<Ne;de+=4)this.cubicCurveTo(/[cs]/.test(Q)?ie.multiply(2).subtract(K):ie,K=ye(de),ie=ye(de+2)),Q=je;break;case"q":for(var de=0;de<Ne;de+=4)this.quadraticCurveTo(K=ye(de),ie=ye(de+2));break;case"t":for(var de=0;de<Ne;de+=2)this.quadraticCurveTo(K=/[qt]/.test(Q)?ie.multiply(2).subtract(K):ie,ie=ye(de)),Q=je;break;case"a":for(var de=0;de<Ne;de+=7)this.arcTo(ie=ye(de+5),new qe(+D[de],+D[de+1]),+D[de+2],+D[de+4],+D[de+3]);break;case"z":this.closePath(1e-12),ie=Ae;break}Q=je}},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_contains:function(d){var y=d.isInside(this.getBounds({internal:!0,handle:!0}))?this._getWinding(d):{};return y.onPath||!!(this.getFillRule()==="evenodd"?y.windingL&1||y.windingR&1:y.winding)},getIntersections:function(d,y,D,U){var Q=this===d||!d,K=this._matrix._orNullIfIdentity(),ie=Q?K:(D||d._matrix)._orNullIfIdentity();return Q||this.getBounds(K).intersects(d.getBounds(ie),1e-12)?Fe.getIntersections(this.getCurves(),!Q&&d.getCurves(),y,K,ie,U):[]},getCrossings:function(d){return this.getIntersections(d,function(y){return y.isCrossing()})},getNearestLocation:function(){for(var d=se.read(arguments),y=this.getCurves(),D=1/0,U=null,Q=0,K=y.length;Q<K;Q++){var ie=y[Q].getNearestLocation(d);ie._distance<D&&(D=ie._distance,U=ie)}return U},getNearestPoint:function(){var d=this.getNearestLocation.apply(this,arguments);return d&&d.getPoint()},interpolate:function(d,y,D){var U=!this._children,Q=U?"_segments":"_children",K=d[Q],ie=y[Q],Ae=this[Q];if(!K||!ie||K.length!==ie.length)throw new Error("Invalid operands in interpolate() call: "+d+", "+y);var fe=Ae.length,ye=ie.length;if(fe<ye)for(var Le=U?Me:_t,we=fe;we<ye;we++)this.add(new Le);else fe>ye&&this[U?"removeSegments":"removeChildren"](ye,fe);for(var we=0;we<ye;we++)Ae[we].interpolate(K[we],ie[we],D);U&&(this.setClosed(d._closed),this._changed(9))},compare:function(d){var y=!1;if(d){var D=this._children||[this],U=d._children?d._children.slice():[d],Q=D.length,K=U.length,ie=[],Ae=0;y=!0;for(var fe=O.findItemBoundsCollisions(D,U,J.GEOMETRIC_EPSILON),ye=Q-1;ye>=0&&y;ye--){var Le=D[ye];y=!1;var we=fe[ye];if(we)for(var Te=we.length-1;Te>=0&&!y;Te--)Le.compare(U[we[Te]])&&(ie[we[Te]]||(ie[we[Te]]=!0,Ae++),y=!0)}y=y&&Ae===K}return y}}),_t=dt.extend({_class:"Path",_serializeFields:{segments:[],closed:!1},initialize:function(y){this._closed=!1,this._segments=[],this._version=0;var D=arguments,U=Array.isArray(y)?typeof y[0]=="object"?y:D:y&&y.size===i&&(y.x!==i||y.point!==i)?D:null;U&&U.length>0?this.setSegments(U):(this._curves=i,this._segmentSelection=0,!U&&typeof y=="string"&&(this.setPathData(y),y=null)),this._initialize(!U&&y)},_equals:function(d){return this._closed===d._closed&&h.equals(this._segments,d._segments)},copyContent:function(d){this.setSegments(d._segments),this._closed=d._closed},_changed:function d(y){if(d.base.call(this,y),y&8){if(this._length=this._area=i,y&32)this._version++;else if(this._curves)for(var D=0,U=this._curves.length;D<U;D++)this._curves[D]._changed()}else y&64&&(this._bounds=i)},getStyle:function(){var d=this._parent;return(d instanceof ei?d:this)._style},getSegments:function(){return this._segments},setSegments:function(d){var y=this.isFullySelected(),D=d&&d.length;if(this._segments.length=0,this._segmentSelection=0,this._curves=i,D){var U=d[D-1];typeof U=="boolean"&&(this.setClosed(U),D--),this._add(Me.readList(d,0,{},D))}y&&this.setFullySelected(!0)},getFirstSegment:function(){return this._segments[0]},getLastSegment:function(){return this._segments[this._segments.length-1]},getCurves:function(){var d=this._curves,y=this._segments;if(!d){var D=this._countCurves();d=this._curves=new Array(D);for(var U=0;U<D;U++)d[U]=new Fe(this,y[U],y[U+1]||y[0])}return d},getFirstCurve:function(){return this.getCurves()[0]},getLastCurve:function(){var d=this.getCurves();return d[d.length-1]},isClosed:function(){return this._closed},setClosed:function(d){if(this._closed!=(d=!!d)){if(this._closed=d,this._curves){var y=this._curves.length=this._countCurves();d&&(this._curves[y-1]=new Fe(this,this._segments[y-1],this._segments[0]))}this._changed(41)}}},{beans:!0,getPathData:function(d,y){var D=this._segments,U=D.length,Q=new j(y),K=new Array(6),ie=!0,Ae,fe,ye,Le,we,Te,Ce,je,Ne=[];function Ue(ue,Y){if(ue._transformCoordinates(d,K),Ae=K[0],fe=K[1],ie)Ne.push("M"+Q.pair(Ae,fe)),ie=!1;else if(we=K[2],Te=K[3],we===Ae&&Te===fe&&Ce===ye&&je===Le){if(!Y){var ne=Ae-ye,he=fe-Le;Ne.push(ne===0?"v"+Q.number(he):he===0?"h"+Q.number(ne):"l"+Q.pair(ne,he))}}else Ne.push("c"+Q.pair(Ce-ye,je-Le)+" "+Q.pair(we-ye,Te-Le)+" "+Q.pair(Ae-ye,fe-Le));ye=Ae,Le=fe,Ce=K[4],je=K[5]}if(!U)return"";for(var de=0;de<U;de++)Ue(D[de]);return this._closed&&U>0&&(Ue(D[0],!0),Ne.push("z")),Ne.join("")},isEmpty:function(){return!this._segments.length},_transformContent:function(d){for(var y=this._segments,D=new Array(6),U=0,Q=y.length;U<Q;U++)y[U]._transformCoordinates(d,D,!0);return!0},_add:function(d,ie){for(var D=this._segments,U=this._curves,Q=d.length,K=ie==null,ie=K?D.length:ie,Ae=0;Ae<Q;Ae++){var fe=d[Ae];fe._path&&(fe=d[Ae]=fe.clone()),fe._path=this,fe._index=ie+Ae,fe._selection&&this._updateSelection(fe,0,fe._selection)}if(K)h.push(D,d);else{D.splice.apply(D,[ie,0].concat(d));for(var Ae=ie+Q,ye=D.length;Ae<ye;Ae++)D[Ae]._index=Ae}if(U){var Le=this._countCurves(),we=ie>0&&ie+Q-1===Le?ie-1:ie,Te=we,Ce=Math.min(we+Q,Le);d._curves&&(U.splice.apply(U,[we,0].concat(d._curves)),Te+=d._curves.length);for(var Ae=Te;Ae<Ce;Ae++)U.splice(Ae,0,new Fe(this,null,null));this._adjustCurves(we,Ce)}return this._changed(41),d},_adjustCurves:function(d,y){for(var D=this._segments,U=this._curves,Q,K=d;K<y;K++)Q=U[K],Q._path=this,Q._segment1=D[K],Q._segment2=D[K+1]||D[0],Q._changed();(Q=U[this._closed&&!d?D.length-1:d-1])&&(Q._segment2=D[d]||D[0],Q._changed()),(Q=U[y])&&(Q._segment1=D[y],Q._changed())},_countCurves:function(){var d=this._segments.length;return!this._closed&&d>0?d-1:d},add:function(d){var y=arguments;return y.length>1&&typeof d!="number"?this._add(Me.readList(y)):this._add([Me.read(y)])[0]},insert:function(d,y){var D=arguments;return D.length>2&&typeof y!="number"?this._add(Me.readList(D,1),d):this._add([Me.read(D,1)],d)[0]},addSegment:function(){return this._add([Me.read(arguments)])[0]},insertSegment:function(d){return this._add([Me.read(arguments,1)],d)[0]},addSegments:function(d){return this._add(Me.readList(d))},insertSegments:function(d,y){return this._add(Me.readList(y),d)},removeSegment:function(d){return this.removeSegments(d,d+1)[0]||null},removeSegments:function(d,y,D){d=d||0,y=h.pick(y,this._segments.length);var U=this._segments,Q=this._curves,K=U.length,ie=U.splice(d,y-d),Ae=ie.length;if(!Ae)return ie;for(var fe=0;fe<Ae;fe++){var ye=ie[fe];ye._selection&&this._updateSelection(ye,ye._selection,0),ye._index=ye._path=null}for(var fe=d,Le=U.length;fe<Le;fe++)U[fe]._index=fe;if(Q){for(var we=d>0&&y===K+(this._closed?1:0)?d-1:d,Q=Q.splice(we,Ae),fe=Q.length-1;fe>=0;fe--)Q[fe]._path=null;D&&(ie._curves=Q.slice(1)),this._adjustCurves(we,we)}return this._changed(41),ie},clear:"#removeSegments",hasHandles:function(){for(var d=this._segments,y=0,D=d.length;y<D;y++)if(d[y].hasHandles())return!0;return!1},clearHandles:function(){for(var d=this._segments,y=0,D=d.length;y<D;y++)d[y].clearHandles()},getLength:function(){if(this._length==null){for(var d=this.getCurves(),y=0,D=0,U=d.length;D<U;D++)y+=d[D].getLength();this._length=y}return this._length},getArea:function(){var d=this._area;if(d==null){var y=this._segments,D=this._closed;d=0;for(var U=0,Q=y.length;U<Q;U++){var K=U+1===Q;d+=Fe.getArea(Fe.getValues(y[U],y[K?0:U+1],null,K&&!D))}this._area=d}return d},isFullySelected:function(){var d=this._segments.length;return this.isSelected()&&d>0&&this._segmentSelection===d*7},setFullySelected:function(d){d&&this._selectSegments(!0),this.setSelected(d)},setSelection:function d(y){y&1||this._selectSegments(!1),d.base.call(this,y)},_selectSegments:function(d){var y=this._segments,D=y.length,U=d?7:0;this._segmentSelection=U*D;for(var Q=0;Q<D;Q++)y[Q]._selection=U},_updateSelection:function(d,y,D){d._selection=D;var U=this._segmentSelection+=D-y;U>0&&this.setSelected(!0)},divideAt:function(d){var y=this.getLocationAt(d),D;return y&&(D=y.getCurve().divideAt(y.getCurveOffset()))?D._segment1:null},splitAt:function(d){var y=this.getLocationAt(d),D=y&&y.index,U=y&&y.time,Q=1e-8,K=1-Q;U>K&&(D++,U=0);var ie=this.getCurves();if(D>=0&&D<ie.length){U>=Q&&ie[D++].divideAtTime(U);var Ae=this.removeSegments(D,this._segments.length,!0),fe;return this._closed?(this.setClosed(!1),fe=this):(fe=new _t(xe.NO_INSERT),fe.insertAbove(this),fe.copyAttributes(this)),fe._add(Ae,0),this.addSegment(Ae[0]),fe}return null},split:function(d,y){var D,U=y===i?d:(D=this.getCurves()[d])&&D.getLocationAtTime(y);return U!=null?this.splitAt(U):null},join:function(d,y){var D=y||0;if(d&&d!==this){var U=d._segments,Q=this.getLastSegment(),K=d.getLastSegment();if(!K)return this;Q&&Q._point.isClose(K._point,D)&&d.reverse();var ie=d.getFirstSegment();if(Q&&Q._point.isClose(ie._point,D))Q.setHandleOut(ie._handleOut),this._add(U.slice(1));else{var Ae=this.getFirstSegment();Ae&&Ae._point.isClose(ie._point,D)&&d.reverse(),K=d.getLastSegment(),Ae&&Ae._point.isClose(K._point,D)?(Ae.setHandleIn(K._handleIn),this._add(U.slice(0,U.length-1),0)):this._add(U.slice())}d._closed&&this._add([U[0]]),d.remove()}var fe=this.getFirstSegment(),ye=this.getLastSegment();return fe!==ye&&fe._point.isClose(ye._point,D)&&(fe.setHandleIn(ye._handleIn),ye.remove(),this.setClosed(!0)),this},reduce:function(d){for(var y=this.getCurves(),D=d&&d.simplify,U=D?1e-7:0,Q=y.length-1;Q>=0;Q--){var K=y[Q];!K.hasHandles()&&(!K.hasLength(U)||D&&K.isCollinear(K.getNext()))&&K.remove()}return this},reverse:function(){this._segments.reverse();for(var d=0,y=this._segments.length;d<y;d++){var D=this._segments[d],U=D._handleIn;D._handleIn=D._handleOut,D._handleOut=U,D._index=d}this._curves=null,this._changed(9)},flatten:function(d){for(var y=new di(this,d||.25,256,!0),D=y.parts,U=D.length,Q=[],K=0;K<U;K++)Q.push(new Me(D[K].curve.slice(0,2)));!this._closed&&U>0&&Q.push(new Me(D[U-1].curve.slice(6))),this.setSegments(Q)},simplify:function(d){var y=new yi(this).fit(d||2.5);return y&&this.setSegments(y),!!y},smooth:function(d){var y=this,D=d||{},U=D.type||"asymmetric",Q=this._segments,K=Q.length,ie=this._closed;function Ae(pi,Rt){var Yi=pi&&pi.index;if(Yi!=null){var Rn=pi.path;if(Rn&&Rn!==y)throw new Error(pi._class+" "+Yi+" of "+Rn+" is not part of "+y);Rt&&pi instanceof Fe&&Yi++}else Yi=typeof pi=="number"?pi:Rt;return Math.min(Yi<0&&ie?Yi%K:Yi<0?Yi+K:Yi,K-1)}var fe=ie&&D.from===i&&D.to===i,ye=Ae(D.from,0),Le=Ae(D.to,K-1);if(ye>Le)if(ie)ye-=K;else{var we=ye;ye=Le,Le=we}if(/^(?:asymmetric|continuous)$/.test(U)){var Te=U==="asymmetric",Ce=Math.min,je=Le-ye+1,Ne=je-1,Ue=fe?Ce(je,4):1,de=Ue,ue=Ue,Y=[];if(ie||(de=Ce(1,ye),ue=Ce(1,K-Le-1)),Ne+=de+ue,Ne<=1)return;for(var ne=0,he=ye-de;ne<=Ne;ne++,he++)Y[ne]=Q[(he<0?he+K:he)%K]._point;for(var me=Y[0]._x+2*Y[1]._x,pe=Y[0]._y+2*Y[1]._y,Oe=2,ze=Ne-1,Be=[me],Ye=[pe],Xe=[Oe],ge=[],Ee=[],ne=1;ne<Ne;ne++){var tt=ne<ze,pt=tt||Te?1:2,n=tt?4:Te?2:7,ce=tt?4:Te?3:8,Zt=tt?2:Te?0:1,Jt=pt/Oe;Oe=Xe[ne]=n-Jt,me=Be[ne]=ce*Y[ne]._x+Zt*Y[ne+1]._x-Jt*me,pe=Ye[ne]=ce*Y[ne]._y+Zt*Y[ne+1]._y-Jt*pe}ge[ze]=Be[ze]/Xe[ze],Ee[ze]=Ye[ze]/Xe[ze];for(var ne=Ne-2;ne>=0;ne--)ge[ne]=(Be[ne]-ge[ne+1])/Xe[ne],Ee[ne]=(Ye[ne]-Ee[ne+1])/Xe[ne];ge[Ne]=(3*Y[Ne]._x-ge[ze])/2,Ee[Ne]=(3*Y[Ne]._y-Ee[ze])/2;for(var ne=de,ui=Ne-ue,he=ye;ne<=ui;ne++,he++){var Vt=Q[he<0?he+K:he],qt=Vt._point,Ei=ge[ne]-qt._x,Ai=Ee[ne]-qt._y;(fe||ne<ui)&&Vt.setHandleOut(Ei,Ai),(fe||ne>de)&&Vt.setHandleIn(-Ei,-Ai)}}else for(var ne=ye;ne<=Le;ne++)Q[ne<0?ne+K:ne].smooth(D,!fe&&ne===ye,!fe&&ne===Le)},toShape:function(d){if(!this._closed)return null;var y=this._segments,D,U,Q,K;function ie(Te,Ce){var je=y[Te],Ne=je.getNext(),Ue=y[Ce],de=Ue.getNext();return je._handleOut.isZero()&&Ne._handleIn.isZero()&&Ue._handleOut.isZero()&&de._handleIn.isZero()&&Ne._point.subtract(je._point).isCollinear(de._point.subtract(Ue._point))}function Ae(Te){var Ce=y[Te],je=Ce.getPrevious(),Ne=Ce.getNext();return je._handleOut.isZero()&&Ce._handleIn.isZero()&&Ce._handleOut.isZero()&&Ne._handleIn.isZero()&&Ce._point.subtract(je._point).isOrthogonal(Ne._point.subtract(Ce._point))}function fe(Te){var Ce=y[Te],je=Ce.getNext(),Ne=Ce._handleOut,Ue=je._handleIn,de=.5522847498307936;if(Ne.isOrthogonal(Ue)){var ue=Ce._point,Y=je._point,ne=new St(ue,Ne,!0).intersect(new St(Y,Ue,!0),!0);return ne&&J.isZero(Ne.getLength()/ne.subtract(ue).getLength()-de)&&J.isZero(Ue.getLength()/ne.subtract(Y).getLength()-de)}return!1}function ye(Te,Ce){return y[Te]._point.getDistance(y[Ce]._point)}if(!this.hasHandles()&&y.length===4&&ie(0,2)&&ie(1,3)&&Ae(1)?(D=Je.Rectangle,U=new qe(ye(0,3),ye(0,1)),K=y[1]._point.add(y[2]._point).divide(2)):y.length===8&&fe(0)&&fe(2)&&fe(4)&&fe(6)&&ie(1,5)&&ie(3,7)?(D=Je.Rectangle,U=new qe(ye(1,6),ye(0,3)),Q=U.subtract(new qe(ye(0,7),ye(1,2))).divide(2),K=y[3]._point.add(y[4]._point).divide(2)):y.length===4&&fe(0)&&fe(1)&&fe(2)&&fe(3)&&(J.isZero(ye(0,2)-ye(1,3))?(D=Je.Circle,Q=ye(0,2)/2):(D=Je.Ellipse,Q=new qe(ye(2,0)/2,ye(3,1)/2)),K=y[1]._point),D){var Le=this.getPosition(!0),we=new D({center:Le,size:U,radius:Q,insert:!1});return we.copyAttributes(this,!0),we._matrix.prepend(this._matrix),we.rotate(K.subtract(Le).getAngle()+90),(d===i||d)&&we.insertAbove(this),we}return null},toPath:"#clone",compare:function d(y){if(!y||y instanceof ei)return d.base.call(this,y);var D=this.getCurves(),U=y.getCurves(),Q=D.length,K=U.length;if(!Q||!K)return Q==K;for(var ie=D[0].getValues(),Ae=[],fe=0,ye,Le=0,we,Te=0;Te<K;Te++){var Ue=U[Te].getValues();Ae.push(Ue);var Ce=Fe.getOverlaps(ie,Ue);if(Ce){ye=!Te&&Ce[0][0]>0?K-1:Te,we=Ce[0][1];break}}for(var je=Math.abs,Ne=1e-8,Ue=Ae[ye],de;ie&&Ue;){var Ce=Fe.getOverlaps(ie,Ue);if(Ce){var ue=Ce[0][0];if(je(ue-Le)<Ne){Le=Ce[1][0],Le===1&&(ie=++fe<Q?D[fe].getValues():null,Le=0);var Y=Ce[0][1];if(je(Y-we)<Ne){if(de||(de=[ye,Y]),we=Ce[1][1],we===1&&(++ye>=K&&(ye=0),Ue=Ae[ye]||U[ye].getValues(),we=0),!ie)return de[0]===ye&&de[1]===we;continue}}}break}return!1},_hitTestSelf:function(d,y,D,U){var Q=this,K=this.getStyle(),ie=this._segments,Ae=ie.length,fe=this._closed,ye=y._tolerancePadding,Le=ye,we,Te,Ce,je,Ne,Ue,de=y.stroke&&K.hasStroke(),ue=y.fill&&K.hasFill(),Y=y.curves,ne=de?K.getStrokeWidth()/2:ue&&y.tolerance>0||Y?0:null;ne!==null&&(ne>0?(we=K.getStrokeJoin(),Te=K.getStrokeCap(),Ce=K.getMiterLimit(),Le=Le.add(_t._getStrokePadding(ne,U))):we=Te="round");function he(ge,Ee){return d.subtract(ge).divide(Ee).length<=1}function me(ge,Ee,tt){if(!y.selected||Ee.isSelected()){var pt=ge._point;if(Ee!==pt&&(Ee=Ee.add(pt)),he(Ee,Le))return new Ke(tt,Q,{segment:ge,point:Ee})}}function pe(ge,Ee){return(Ee||y.segments)&&me(ge,ge._point,"segment")||!Ee&&y.handles&&(me(ge,ge._handleIn,"handle-in")||me(ge,ge._handleOut,"handle-out"))}function Oe(ge){je.add(ge)}function ze(ge){var Ee=fe||ge._index>0&&ge._index<Ae-1;if((Ee?we:Te)==="round")return he(ge._point,Le);if(je=new _t({internal:!0,closed:!0}),Ee?ge.isSmooth()||_t._addBevelJoin(ge,we,ne,Ce,null,U,Oe,!0):Te==="square"&&_t._addSquareCap(ge,Te,ne,null,U,Oe,!0),!je.isEmpty()){var tt;return je.contains(d)||(tt=je.getNearestLocation(d))&&he(tt.getPoint(),ye)}}if(y.ends&&!y.segments&&!fe){if(Ue=pe(ie[0],!0)||pe(ie[Ae-1],!0))return Ue}else if(y.segments||y.handles){for(var Be=0;Be<Ae;Be++)if(Ue=pe(ie[Be]))return Ue}if(ne!==null){if(Ne=this.getNearestLocation(d),Ne){var Ye=Ne.getTime();Ye===0||Ye===1&&Ae>1?ze(Ne.getSegment())||(Ne=null):he(Ne.getPoint(),Le)||(Ne=null)}if(!Ne&&we==="miter"&&Ae>1)for(var Be=0;Be<Ae;Be++){var Xe=ie[Be];if(d.getDistance(Xe._point)<=Ce*ne&&ze(Xe)){Ne=Xe.getLocation();break}}}return!Ne&&ue&&this._contains(d)||Ne&&!de&&!Y?new Ke("fill",this):Ne?new Ke(de?"stroke":"curve",this,{location:Ne,point:Ne.getPoint()}):null}},h.each(Fe._evaluateMethods,function(d){this[d+"At"]=function(y){var D=this.getLocationAt(y);return D&&D[d]()}},{beans:!1,getLocationOf:function(){for(var d=se.read(arguments),y=this.getCurves(),D=0,U=y.length;D<U;D++){var Q=y[D].getLocationOf(d);if(Q)return Q}return null},getOffsetOf:function(){var d=this.getLocationOf.apply(this,arguments);return d?d.getOffset():null},getLocationAt:function(d){if(typeof d=="number"){for(var y=this.getCurves(),D=0,U=0,Q=y.length;U<Q;U++){var K=D,ie=y[U];if(D+=ie.getLength(),D>d)return ie.getLocationAt(d-K)}if(y.length>0&&d<=this.getLength())return new vt(y[y.length-1],1)}else if(d&&d.getPath&&d.getPath()===this)return d;return null},getOffsetsWithTangent:function(){var d=se.read(arguments);if(d.isZero())return[];for(var y=[],D=0,U=this.getCurves(),Q=0,K=U.length;Q<K;Q++){for(var ie=U[Q],Ae=ie.getTimesWithTangent(d),fe=0,ye=Ae.length;fe<ye;fe++){var Le=D+ie.getOffsetAtTime(Ae[fe]);y.indexOf(Le)<0&&y.push(Le)}D+=ie.length}return y}}),new function(){function d(D,U,Q,K){if(K<=0)return;var ie=K/2,Ae=K-2,fe=ie-1,ye=new Array(6),Le,we;function Te(ue){var Y=ye[ue],ne=ye[ue+1];(Le!=Y||we!=ne)&&(D.beginPath(),D.moveTo(Le,we),D.lineTo(Y,ne),D.stroke(),D.beginPath(),D.arc(Y,ne,ie,0,Math.PI*2,!0),D.fill())}for(var Ce=0,je=U.length;Ce<je;Ce++){var Ne=U[Ce],Ue=Ne._selection;if(Ne._transformCoordinates(Q,ye),Le=ye[0],we=ye[1],Ue&2&&Te(2),Ue&4&&Te(4),D.fillRect(Le-ie,we-ie,K,K),Ae>0&&!(Ue&1)){var de=D.fillStyle;D.fillStyle="#ffffff",D.fillRect(Le-fe,we-fe,Ae,Ae),D.fillStyle=de}}}function y(D,U,Q){var K=U._segments,ie=K.length,Ae=new Array(6),fe=!0,ye,Le,we,Te,Ce,je,Ne,Ue;function de(Y){if(Q)Y._transformCoordinates(Q,Ae),ye=Ae[0],Le=Ae[1];else{var ne=Y._point;ye=ne._x,Le=ne._y}if(fe)D.moveTo(ye,Le),fe=!1;else{if(Q)Ce=Ae[2],je=Ae[3];else{var he=Y._handleIn;Ce=ye+he._x,je=Le+he._y}Ce===ye&&je===Le&&Ne===we&&Ue===Te?D.lineTo(ye,Le):D.bezierCurveTo(Ne,Ue,Ce,je,ye,Le)}if(we=ye,Te=Le,Q)Ne=Ae[4],Ue=Ae[5];else{var he=Y._handleOut;Ne=we+he._x,Ue=Te+he._y}}for(var ue=0;ue<ie;ue++)de(K[ue]);U._closed&&ie>0&&de(K[0])}return{_draw:function(D,U,Q,K){var ie=U.dontStart,Ae=U.dontFinish||U.clip,fe=this.getStyle(),ye=fe.hasFill(),Le=fe.hasStroke(),we=fe.getDashArray(),Te=!an.support.nativeDash&&Le&&we&&we.length;ie||D.beginPath(),(ye||Le&&!Te||Ae)&&(y(D,this,K),this._closed&&D.closePath());function Ce(Y){return we[(Y%Te+Te)%Te]}if(!Ae&&(ye||Le)&&(this._setStyles(D,U,Q),ye&&(D.fill(fe.getFillRule()),D.shadowColor="rgba(0,0,0,0)"),Le)){if(Te){ie||D.beginPath();for(var je=new di(this,.25,32,!1,K),Ne=je.length,Ue=-fe.getDashOffset(),de,ue=0;Ue>0;)Ue-=Ce(ue--)+Ce(ue--);for(;Ue<Ne;)de=Ue+Ce(ue++),(Ue>0||de>0)&&je.drawPart(D,Math.max(Ue,0),Math.max(de,0)),Ue=de+Ce(ue++)}D.stroke()}},_drawSelected:function(D,U){D.beginPath(),y(D,this,U),D.stroke(),d(D,this._segments,U,an.settings.handleSize)}}},new function(){function d(y){var D=y._segments;if(!D.length)throw new Error("Use a moveTo() command first");return D[D.length-1]}return{moveTo:function(){var y=this._segments;y.length===1&&this.removeSegment(0),y.length||this._add([new Me(se.read(arguments))])},moveBy:function(){throw new Error("moveBy() is unsupported on Path items.")},lineTo:function(){this._add([new Me(se.read(arguments))])},cubicCurveTo:function(){var y=arguments,D=se.read(y),U=se.read(y),Q=se.read(y),K=d(this);K.setHandleOut(D.subtract(K._point)),this._add([new Me(Q,U.subtract(Q))])},quadraticCurveTo:function(){var y=arguments,D=se.read(y),U=se.read(y),Q=d(this)._point;this.cubicCurveTo(D.add(Q.subtract(D).multiply(1/3)),D.add(U.subtract(D).multiply(1/3)),U)},curveTo:function(){var y=arguments,D=se.read(y),U=se.read(y),Q=h.pick(h.read(y),.5),K=1-Q,ie=d(this)._point,Ae=D.subtract(ie.multiply(K*K)).subtract(U.multiply(Q*Q)).divide(2*Q*K);if(Ae.isNaN())throw new Error("Cannot put a curve through points with parameter = "+Q);this.quadraticCurveTo(Ae,U)},arcTo:function(){var y=arguments,D=Math.abs,U=Math.sqrt,Q=d(this),K=Q._point,ie=se.read(y),Ae,fe=h.peek(y),ye=h.pick(fe,!0),Le,we,Te,Ce;if(typeof ye=="boolean")var je=K.add(ie).divide(2),Ae=je.add(je.subtract(K).rotate(ye?-90:90));else if(h.remain(y)<=2)Ae=ie,ie=se.read(y);else if(!K.equals(ie)){var Ne=qe.read(y),Ue=J.isZero;if(Ue(Ne.width)||Ue(Ne.height))return this.lineTo(ie);var de=h.read(y),ye=!!h.read(y),ue=!!h.read(y),je=K.add(ie).divide(2),Y=K.subtract(je).rotate(-de),ne=Y.x,he=Y.y,me=D(Ne.width),pe=D(Ne.height),Oe=me*me,ze=pe*pe,Be=ne*ne,Ye=he*he,Xe=U(Be/Oe+Ye/ze);if(Xe>1&&(me*=Xe,pe*=Xe,Oe=me*me,ze=pe*pe),Xe=(Oe*ze-Oe*Ye-ze*Be)/(Oe*Ye+ze*Be),D(Xe)<1e-12&&(Xe=0),Xe<0)throw new Error("Cannot create an arc with the given arguments");Le=new se(me*he/pe,-pe*ne/me).multiply((ue===ye?-1:1)*U(Xe)).rotate(de).add(je),Ce=new ct().translate(Le).rotate(de).scale(me,pe),Te=Ce._inverseTransform(K),we=Te.getDirectedAngle(Ce._inverseTransform(ie)),!ye&&we>0?we-=360:ye&&we<0&&(we+=360)}if(Ae){var ge=new St(K.add(Ae).divide(2),Ae.subtract(K).rotate(90),!0),Ee=new St(Ae.add(ie).divide(2),ie.subtract(Ae).rotate(90),!0),tt=new St(K,ie),pt=tt.getSide(Ae);if(Le=ge.intersect(Ee,!0),!Le){if(!pt)return this.lineTo(ie);throw new Error("Cannot create an arc with the given arguments")}Te=K.subtract(Le),we=Te.getDirectedAngle(ie.subtract(Le));var n=tt.getSide(Le,!0);n===0?we=pt*D(we):pt===n&&(we+=we<0?360:-360)}if(we){for(var ce=1e-5,Zt=D(we),Jt=Zt>=360?4:Math.ceil((Zt-ce)/90),ui=we/Jt,Vt=ui*Math.PI/360,qt=4/3*Math.sin(Vt)/(1+Math.cos(Vt)),Ei=[],Ai=0;Ai<=Jt;Ai++){var Y=ie,pi=null;if(Ai<Jt&&(pi=Te.rotate(90).multiply(qt),Ce?(Y=Ce._transformPoint(Te),pi=Ce._transformPoint(Te.add(pi)).subtract(Y)):Y=Le.add(Te)),!Ai)Q.setHandleOut(pi);else{var Rt=Te.rotate(-90).multiply(qt);Ce&&(Rt=Ce._transformPoint(Te.add(Rt)).subtract(Y)),Ei.push(new Me(Y,Rt,pi))}Te=Te.rotate(ui)}this._add(Ei)}},lineBy:function(){var y=se.read(arguments),D=d(this)._point;this.lineTo(D.add(y))},curveBy:function(){var y=arguments,D=se.read(y),U=se.read(y),Q=h.read(y),K=d(this)._point;this.curveTo(K.add(D),K.add(U),Q)},cubicCurveBy:function(){var y=arguments,D=se.read(y),U=se.read(y),Q=se.read(y),K=d(this)._point;this.cubicCurveTo(K.add(D),K.add(U),K.add(Q))},quadraticCurveBy:function(){var y=arguments,D=se.read(y),U=se.read(y),Q=d(this)._point;this.quadraticCurveTo(Q.add(D),Q.add(U))},arcBy:function(){var y=arguments,D=d(this)._point,U=D.add(se.read(y)),Q=h.pick(h.peek(y),!0);typeof Q=="boolean"?this.arcTo(U,Q):this.arcTo(U,D.add(se.read(y)))},closePath:function(y){this.setClosed(!0),this.join(this,y)}}},{_getBounds:function(d,y){var D=y.handle?"getHandleBounds":y.stroke?"getStrokeBounds":"getBounds";return _t[D](this._segments,this._closed,this,d,y)},statics:{getBounds:function(d,y,D,U,Q,K){var ie=d[0];if(!ie)return new Qe;var Ae=new Array(6),fe=ie._transformCoordinates(U,new Array(6)),ye=fe.slice(0,2),Le=ye.slice(),we=new Array(2);function Te(Ne){Ne._transformCoordinates(U,Ae);for(var Ue=0;Ue<2;Ue++)Fe._addBounds(fe[Ue],fe[Ue+4],Ae[Ue+2],Ae[Ue],Ue,K?K[Ue]:0,ye,Le,we);var de=fe;fe=Ae,Ae=de}for(var Ce=1,je=d.length;Ce<je;Ce++)Te(d[Ce]);return y&&Te(ie),new Qe(ye[0],ye[1],Le[0]-ye[0],Le[1]-ye[1])},getStrokeBounds:function(d,y,D,U,Q){var K=D.getStyle(),ie=K.hasStroke(),Ae=K.getStrokeWidth(),fe=ie&&D._getStrokeMatrix(U,Q),ye=ie&&_t._getStrokePadding(Ae,fe),Le=_t.getBounds(d,y,D,U,Q,ye);if(!ie)return Le;var we=Ae/2,Te=K.getStrokeJoin(),Ce=K.getStrokeCap(),je=K.getMiterLimit(),Ne=new Qe(new qe(ye));function Ue(me){Le=Le.include(me)}function de(me){Le=Le.unite(Ne.setCenter(me._point.transform(U)))}function ue(me,pe){pe==="round"||me.isSmooth()?de(me):_t._addBevelJoin(me,pe,we,je,U,fe,Ue)}function Y(me,pe){pe==="round"?de(me):_t._addSquareCap(me,pe,we,U,fe,Ue)}var ne=d.length-(y?0:1);if(ne>0){for(var he=1;he<ne;he++)ue(d[he],Te);y?ue(d[0],Te):(Y(d[0],Ce),Y(d[d.length-1],Ce))}return Le},_getStrokePadding:function(d,y){if(!y)return[d,d];var D=new se(d,0).transform(y),U=new se(0,d).transform(y),Q=D.getAngleInRadians(),K=D.getLength(),ie=U.getLength(),Ae=Math.sin(Q),fe=Math.cos(Q),ye=Math.tan(Q),Le=Math.atan2(ie*ye,K),we=Math.atan2(ie,ye*K);return[Math.abs(K*Math.cos(Le)*fe+ie*Math.sin(Le)*Ae),Math.abs(ie*Math.sin(we)*fe+K*Math.cos(we)*Ae)]},_addBevelJoin:function(d,y,D,U,Q,K,ie,Ae){var fe=d.getCurve(),ye=fe.getPrevious(),Le=fe.getPoint1().transform(Q),we=ye.getNormalAtTime(1).multiply(D).transform(K),Te=fe.getNormalAtTime(0).multiply(D).transform(K),Ce=we.getDirectedAngle(Te);if((Ce<0||Ce>=180)&&(we=we.negate(),Te=Te.negate()),Ae&&ie(Le),ie(Le.add(we)),y==="miter"){var je=new St(Le.add(we),new se(-we.y,we.x),!0).intersect(new St(Le.add(Te),new se(-Te.y,Te.x),!0),!0);je&&Le.getDistance(je)<=U*D&&ie(je)}ie(Le.add(Te))},_addSquareCap:function(d,y,D,U,Q,K,ie){var Ae=d._point.transform(U),fe=d.getLocation(),ye=fe.getNormal().multiply(fe.getTime()===0?D:-D).transform(Q);y==="square"&&(ie&&(K(Ae.subtract(ye)),K(Ae.add(ye))),Ae=Ae.add(ye.rotate(-90))),K(Ae.add(ye)),K(Ae.subtract(ye))},getHandleBounds:function(d,y,D,U,Q){var K=D.getStyle(),ie=Q.stroke&&K.hasStroke(),Ae,fe;if(ie){var ye=D._getStrokeMatrix(U,Q),Le=K.getStrokeWidth()/2,we=Le;K.getStrokeJoin()==="miter"&&(we=Le*K.getMiterLimit()),K.getStrokeCap()==="square"&&(we=Math.max(we,Le*Math.SQRT2)),Ae=_t._getStrokePadding(Le,ye),fe=_t._getStrokePadding(we,ye)}for(var Te=new Array(6),Ce=1/0,je=-Ce,Ne=Ce,Ue=je,de=0,ue=d.length;de<ue;de++){var Y=d[de];Y._transformCoordinates(U,Te);for(var ne=0;ne<6;ne+=2){var he=ne?Ae:fe,me=he?he[0]:0,pe=he?he[1]:0,Oe=Te[ne],ze=Te[ne+1],Be=Oe-me,Ye=Oe+me,Xe=ze-pe,ge=ze+pe;Be<Ce&&(Ce=Be),Ye>je&&(je=Ye),Xe<Ne&&(Ne=Xe),ge>Ue&&(Ue=ge)}}return new Qe(Ce,Ne,je-Ce,Ue-Ne)}}});_t.inject({statics:new function(){var d=.5522847498307936,y=[new Me([-1,0],[0,d],[0,-d]),new Me([0,-1],[-d,0],[d,0]),new Me([1,0],[0,-d],[0,d]),new Me([0,1],[d,0],[-d,0])];function D(Q,K,ie){var Ae=h.getNamed(ie),fe=new _t(Ae&&(Ae.insert==!0?xe.INSERT:Ae.insert==!1?xe.NO_INSERT:null));return fe._add(Q),fe._closed=K,fe.set(Ae,xe.INSERT)}function U(Q,K,ie){for(var Ae=new Array(4),fe=0;fe<4;fe++){var ye=y[fe];Ae[fe]=new Me(ye._point.multiply(K).add(Q),ye._handleIn.multiply(K),ye._handleOut.multiply(K))}return D(Ae,!0,ie)}return{Line:function(){var Q=arguments;return D([new Me(se.readNamed(Q,"from")),new Me(se.readNamed(Q,"to"))],!1,Q)},Circle:function(){var Q=arguments,K=se.readNamed(Q,"center"),ie=h.readNamed(Q,"radius");return U(K,new qe(ie),Q)},Rectangle:function(){var Q=arguments,K=Qe.readNamed(Q,"rectangle"),ie=qe.readNamed(Q,"radius",0,{readNull:!0}),Ae=K.getBottomLeft(!0),fe=K.getTopLeft(!0),ye=K.getTopRight(!0),Le=K.getBottomRight(!0),we;if(!ie||ie.isZero())we=[new Me(Ae),new Me(fe),new Me(ye),new Me(Le)];else{ie=qe.min(ie,K.getSize(!0).divide(2));var Te=ie.width,Ce=ie.height,je=Te*d,Ne=Ce*d;we=[new Me(Ae.add(Te,0),null,[-je,0]),new Me(Ae.subtract(0,Ce),[0,Ne]),new Me(fe.add(0,Ce),null,[0,-Ne]),new Me(fe.add(Te,0),[-je,0],null),new Me(ye.subtract(Te,0),null,[je,0]),new Me(ye.add(0,Ce),[0,-Ne],null),new Me(Le.subtract(0,Ce),null,[0,Ne]),new Me(Le.subtract(Te,0),[je,0])]}return D(we,!0,Q)},RoundRectangle:"#Rectangle",Ellipse:function(){var Q=arguments,K=Je._readEllipse(Q);return U(K.center,K.radius,Q)},Oval:"#Ellipse",Arc:function(){var Q=arguments,K=se.readNamed(Q,"from"),ie=se.readNamed(Q,"through"),Ae=se.readNamed(Q,"to"),fe=h.getNamed(Q),ye=new _t(fe&&fe.insert==!1&&xe.NO_INSERT);return ye.moveTo(K),ye.arcTo(ie,Ae),ye.set(fe)},RegularPolygon:function(){for(var Q=arguments,K=se.readNamed(Q,"center"),ie=h.readNamed(Q,"sides"),Ae=h.readNamed(Q,"radius"),fe=360/ie,ye=ie%3===0,Le=new se(0,ye?-Ae:Ae),we=ye?-1:.5,Te=new Array(ie),Ce=0;Ce<ie;Ce++)Te[Ce]=new Me(K.add(Le.rotate((Ce+we)*fe)));return D(Te,!0,Q)},Star:function(){for(var Q=arguments,K=se.readNamed(Q,"center"),ie=h.readNamed(Q,"points")*2,Ae=h.readNamed(Q,"radius1"),fe=h.readNamed(Q,"radius2"),ye=360/ie,Le=new se(0,-1),we=new Array(ie),Te=0;Te<ie;Te++)we[Te]=new Me(K.add(Le.rotate(ye*Te).multiply(Te%2?fe:Ae)));return D(we,!0,Q)}}}});var ei=dt.extend({_class:"CompoundPath",_serializeFields:{children:[]},beans:!0,initialize:function(y){this._children=[],this._namedChildren={},this._initialize(y)||(typeof y=="string"?this.setPathData(y):this.addChildren(Array.isArray(y)?y:arguments))},insertChildren:function d(y,D){var U=D,Q=U[0];Q&&typeof Q[0]=="number"&&(U=[U]);for(var K=D.length-1;K>=0;K--){var ie=U[K];U===D&&!(ie instanceof _t)&&(U=h.slice(U)),Array.isArray(ie)?U[K]=new _t({segments:ie,insert:!1}):ie instanceof ei&&(U.splice.apply(U,[K,1].concat(ie.removeChildren())),ie.remove())}return d.base.call(this,y,U)},reduce:function d(y){for(var D=this._children,U=D.length-1;U>=0;U--){var Q=D[U].reduce(y);Q.isEmpty()&&Q.remove()}if(!D.length){var Q=new _t(xe.NO_INSERT);return Q.copyAttributes(this),Q.insertAbove(this),this.remove(),Q}return d.base.call(this)},isClosed:function(){for(var d=this._children,y=0,D=d.length;y<D;y++)if(!d[y]._closed)return!1;return!0},setClosed:function(d){for(var y=this._children,D=0,U=y.length;D<U;D++)y[D].setClosed(d)},getFirstSegment:function(){var d=this.getFirstChild();return d&&d.getFirstSegment()},getLastSegment:function(){var d=this.getLastChild();return d&&d.getLastSegment()},getCurves:function(){for(var d=this._children,y=[],D=0,U=d.length;D<U;D++)h.push(y,d[D].getCurves());return y},getFirstCurve:function(){var d=this.getFirstChild();return d&&d.getFirstCurve()},getLastCurve:function(){var d=this.getLastChild();return d&&d.getLastCurve()},getArea:function(){for(var d=this._children,y=0,D=0,U=d.length;D<U;D++)y+=d[D].getArea();return y},getLength:function(){for(var d=this._children,y=0,D=0,U=d.length;D<U;D++)y+=d[D].getLength();return y},getPathData:function(d,y){for(var D=this._children,U=[],Q=0,K=D.length;Q<K;Q++){var ie=D[Q],Ae=ie._matrix;U.push(ie.getPathData(d&&!Ae.isIdentity()?d.appended(Ae):d,y))}return U.join("")},_hitTestChildren:function d(y,D,U){return d.base.call(this,y,D.class===_t||D.type==="path"?D:h.set({},D,{fill:!1}),U)},_draw:function(d,y,D,U){var Q=this._children;if(Q.length){y=y.extend({dontStart:!0,dontFinish:!0}),d.beginPath();for(var K=0,ie=Q.length;K<ie;K++)Q[K].draw(d,y,U);if(!y.clip){this._setStyles(d,y,D);var Ae=this._style;Ae.hasFill()&&(d.fill(Ae.getFillRule()),d.shadowColor="rgba(0,0,0,0)"),Ae.hasStroke()&&d.stroke()}}},_drawSelected:function(d,y,D){for(var U=this._children,Q=0,K=U.length;Q<K;Q++){var ie=U[Q],Ae=ie._matrix;D[ie._id]||ie._drawSelected(d,Ae.isIdentity()?y:y.appended(Ae))}}},new function(){function d(y,D){var U=y._children;if(D&&!U.length)throw new Error("Use a moveTo() command first");return U[U.length-1]}return h.each(["lineTo","cubicCurveTo","quadraticCurveTo","curveTo","arcTo","lineBy","cubicCurveBy","quadraticCurveBy","curveBy","arcBy"],function(y){this[y]=function(){var D=d(this,!0);D[y].apply(D,arguments)}},{moveTo:function(){var y=d(this),D=y&&y.isEmpty()?y:new _t(xe.NO_INSERT);D!==y&&this.addChild(D),D.moveTo.apply(D,arguments)},moveBy:function(){var y=d(this,!0),D=y&&y.getLastSegment(),U=se.read(arguments);this.moveTo(D?U.add(D._point):U)},closePath:function(y){d(this,!0).closePath(y)}})},h.each(["reverse","flatten","simplify","smooth"],function(d){this[d]=function(y){for(var D=this._children,U,Q=0,K=D.length;Q<K;Q++)U=D[Q][d](y)||U;return U}},{}));dt.inject(new function(){var d=Math.min,y=Math.max,D=Math.abs,U={unite:{1:!0,2:!0},intersect:{2:!0},subtract:{1:!0},exclude:{1:!0,"-1":!0}};function Q(de){return de._children||[de]}function K(de,ue){var Y=de.clone(!1).reduce({simplify:!0}).transform(null,!0,!0);if(ue){for(var ne=Q(Y),he=0,me=ne.length;he<me;he++){var de=ne[he];!de._closed&&!de.isEmpty()&&(de.closePath(1e-12),de.getFirstSegment().setHandleIn(0,0),de.getLastSegment().setHandleOut(0,0))}Y=Y.resolveCrossings().reorient(Y.getFillRule()==="nonzero",!0)}return Y}function ie(de,ue,Y,ne,he){var me=new ei(xe.NO_INSERT);return me.addChildren(de,!0),me=me.reduce({simplify:ue}),he&&he.insert==!1||me.insertAbove(ne&&Y.isSibling(ne)&&Y.getIndex()<ne.getIndex()?ne:Y),me.copyAttributes(Y,!0),me}function Ae(de){return de.hasOverlap()||de.isCrossing()}function fe(de,ue,Y,ne){if(ne&&(ne.trace==!1||ne.stroke)&&/^(subtract|intersect)$/.test(Y))return ye(de,ue,Y);var he=K(de,!0),me=ue&&de!==ue&&K(ue,!0),pe=U[Y];pe[Y]=!0,me&&(pe.subtract||pe.exclude)^(me.isClockwise()^he.isClockwise())&&me.reverse();var Oe=Ce(vt.expand(he.getIntersections(me,Ae))),ze=Q(he),Be=me&&Q(me),Ye=[],Xe=[],ge;function Ee(pi){for(var Rt=0,Yi=pi.length;Rt<Yi;Rt++){var Rn=pi[Rt];h.push(Ye,Rn._segments),h.push(Xe,Rn.getCurves()),Rn._overlapsOnly=!0}}function tt(pi){for(var Rt=[],Yi=0,Rn=pi&&pi.length;Yi<Rn;Yi++)Rt.push(Xe[pi[Yi]]);return Rt}if(Oe.length){Ee(ze),Be&&Ee(Be);for(var pt=new Array(Xe.length),n=0,ce=Xe.length;n<ce;n++)pt[n]=Xe[n].getValues();for(var Zt=O.findCurveBoundsCollisions(pt,pt,0,!0),Jt={},n=0;n<Xe.length;n++){var ui=Xe[n],Vt=ui._path._id,qt=Jt[Vt]=Jt[Vt]||{};qt[ui.getIndex()]={hor:tt(Zt[n].hor),ver:tt(Zt[n].ver)}}for(var n=0,ce=Oe.length;n<ce;n++)Ne(Oe[n]._segment,he,me,Jt,pe);for(var n=0,ce=Ye.length;n<ce;n++){var Ei=Ye[n],Ai=Ei._intersection;Ei._winding||Ne(Ei,he,me,Jt,pe),Ai&&Ai._overlap||(Ei._path._overlapsOnly=!1)}ge=Ue(Ye,pe)}else ge=Te(Be?ze.concat(Be):ze.slice(),function(pi){return!!pe[pi]});return ie(ge,!0,de,ue,ne)}function ye(de,ue,Y){var ne=K(de),he=K(ue),me=ne.getIntersections(he,Ae),pe=Y==="subtract",Oe=Y==="divide",ze={},Be=[];function Ye(Ee){if(!ze[Ee._id]&&(Oe||he.contains(Ee.getPointAt(Ee.getLength()/2))^pe))return Be.unshift(Ee),ze[Ee._id]=!0}for(var Xe=me.length-1;Xe>=0;Xe--){var ge=me[Xe].split();ge&&(Ye(ge)&&ge.getFirstSegment().setHandleIn(0,0),ne.getLastSegment().setHandleOut(0,0))}return Ye(ne),ie(Be,!1,de,ue)}function Le(de,ue){for(var Y=de;Y;){if(Y===ue)return;Y=Y._previous}for(;de._next&&de._next!==ue;)de=de._next;if(!de._next){for(;ue._previous;)ue=ue._previous;de._next=ue,ue._previous=de}}function we(de){for(var ue=de.length-1;ue>=0;ue--)de[ue].clearHandles()}function Te(de,ue,Y){var ne=de&&de.length;if(ne){var he=h.each(de,function(Zt,Jt){this[Zt._id]={container:null,winding:Zt.isClockwise()?1:-1,index:Jt}},{}),me=de.slice().sort(function(Zt,Jt){return D(Jt.getArea())-D(Zt.getArea())}),pe=me[0],Oe=O.findItemBoundsCollisions(me,null,J.GEOMETRIC_EPSILON);Y==null&&(Y=pe.isClockwise());for(var ze=0;ze<ne;ze++){var Be=me[ze],Ye=he[Be._id],Xe=0,ge=Oe[ze];if(ge){for(var Ee=null,tt=ge.length-1;tt>=0;tt--)if(ge[tt]<ze){Ee=Ee||Be.getInteriorPoint();var pt=me[ge[tt]];if(pt.contains(Ee)){var n=he[pt._id];Xe=n.winding,Ye.winding+=Xe,Ye.container=n.exclude?n.container:pt;break}}}if(ue(Ye.winding)===ue(Xe))Ye.exclude=!0,de[Ye.index]=null;else{var ce=Ye.container;Be.setClockwise(ce?!ce.isClockwise():Y)}}}return de}function Ce(de,ue,Y){var ne=ue&&[],he=1e-8,me=1-he,pe=!1,Oe=Y||[],ze=Y&&{},Be,Ye,Xe;function ge(Rt){return Rt._path._id+"."+Rt._segment1._index}for(var Ee=(Y&&Y.length)-1;Ee>=0;Ee--){var tt=Y[Ee];tt._path&&(ze[ge(tt)]=!0)}for(var Ee=de.length-1;Ee>=0;Ee--){var pt=de[Ee],n=pt._time,ce=n,Zt=ue&&!ue(pt),tt=pt._curve,Jt;if(tt&&(tt!==Ye?(pe=!tt.hasHandles()||ze&&ze[ge(tt)],Be=[],Xe=null,Ye=tt):Xe>=he&&(n/=Xe)),Zt){Be&&Be.push(pt);continue}else ue&&ne.unshift(pt);if(Xe=ce,n<he)Jt=tt._segment1;else if(n>me)Jt=tt._segment2;else{var ui=tt.divideAtTime(n,!0);pe&&Oe.push(tt,ui),Jt=ui._segment1;for(var Vt=Be.length-1;Vt>=0;Vt--){var qt=Be[Vt];qt._time=(qt._time-n)/(1-n)}}pt._setSegment(Jt);var Ei=Jt._intersection,Ai=pt._intersection;if(Ei){Le(Ei,Ai);for(var pi=Ei;pi;)Le(pi._intersection,Ei),pi=pi._next}else Jt._intersection=Ai}return Y||we(Oe),ne||de}function je(de,ue,Y,ne,he){var me=Array.isArray(ue)?ue:ue[Y?"hor":"ver"],pe=Y?1:0,Oe=pe^1,ze=[de.x,de.y],Be=ze[pe],Ye=ze[Oe],Xe=1e-9,ge=1e-6,Ee=Be-Xe,tt=Be+Xe,pt=0,n=0,ce=0,Zt=0,Jt=!1,ui=!1,Vt=1,qt=[],Ei,Ai;function pi(Pt){var Fi=Pt[Oe+0],xt=Pt[Oe+6];if(!(Ye<d(Fi,xt)||Ye>y(Fi,xt))){var nn=Pt[pe+0],Cr=Pt[pe+2],ys=Pt[pe+4],Gr=Pt[pe+6];if(Fi===xt){(nn<tt&&Gr>Ee||Gr<tt&&nn>Ee)&&(Jt=!0);return}var Et=Ye===Fi?0:Ye===xt||Ee>y(nn,Cr,ys,Gr)||tt<d(nn,Cr,ys,Gr)?1:Fe.solveCubic(Pt,Oe,Ye,qt,0,1)>0?qt[0]:1,Hn=Et===0?nn:Et===1?Gr:Fe.getPoint(Pt,Et)[Y?"y":"x"],ft=Fi>xt?1:-1,gr=Ei[Oe]>Ei[Oe+6]?1:-1,Xs=Ei[pe+6];return Ye!==Fi?(Hn<Ee?ce+=ft:Hn>tt?Zt+=ft:Jt=!0,Hn>Be-ge&&Hn<Be+ge&&(Vt/=2)):(ft!==gr?nn<Ee?ce+=ft:nn>tt&&(Zt+=ft):nn!=Xs&&(Xs<tt&&Hn>tt?(Zt+=ft,Jt=!0):Xs>Ee&&Hn<Ee&&(ce+=ft,Jt=!0)),Vt/=4),Ei=Pt,!he&&Hn>Ee&&Hn<tt&&Fe.getTangent(Pt,Et)[Y?"x":"y"]===0&&je(de,ue,!Y,ne,!0)}}function Rt(Pt){var Fi=Pt[Oe+0],xt=Pt[Oe+2],nn=Pt[Oe+4],Cr=Pt[Oe+6];if(Ye<=y(Fi,xt,nn,Cr)&&Ye>=d(Fi,xt,nn,Cr)){for(var ys=Pt[pe+0],Gr=Pt[pe+2],Et=Pt[pe+4],Hn=Pt[pe+6],ft=Ee>y(ys,Gr,Et,Hn)||tt<d(ys,Gr,Et,Hn)?[Pt]:Fe.getMonoCurves(Pt,Y),gr,Xs=0,Ks=ft.length;Xs<Ks;Xs++)if(gr=pi(ft[Xs]))return gr}}for(var Yi=0,Rn=me.length;Yi<Rn;Yi++){var wn=me[Yi],pn=wn._path,vr=wn.getValues(),Mi;if((!Yi||me[Yi-1]._path!==pn)&&(Ei=null,pn._closed||(Ai=Fe.getValues(pn.getLastCurve().getSegment2(),wn.getSegment1(),null,!ne),Ai[Oe]!==Ai[Oe+6]&&(Ei=Ai)),!Ei)){Ei=vr;for(var nr=pn.getLastCurve();nr&&nr!==wn;){var fn=nr.getValues();if(fn[Oe]!==fn[Oe+6]){Ei=fn;break}nr=nr.getPrevious()}}if(Mi=Rt(vr))return Mi;if(Yi+1===Rn||me[Yi+1]._path!==pn){if(Ai&&(Mi=Rt(Ai)))return Mi;Jt&&!ce&&!Zt&&(ce=Zt=pn.isClockwise(ne)^Y?1:-1),pt+=ce,n+=Zt,ce=Zt=0,Jt&&(ui=!0,Jt=!1),Ai=null}}return pt=D(pt),n=D(n),{winding:y(pt,n),windingL:pt,windingR:n,quality:Vt,onPath:ui}}function Ne(de,ue,Y,ne,he){var me=[],pe=de,Oe=0,Xe;do{var ze=de.getCurve();if(ze){var Be=ze.getLength();me.push({segment:de,curve:ze,length:Be}),Oe+=Be}de=de.getNext()}while(de&&!de._intersection&&de!==pe);for(var Ye=[.5,.25,.75],Xe={winding:0,quality:-1},ge=.001,Ee=1-ge,tt=0;tt<Ye.length&&Xe.quality<.5;tt++)for(var Be=Oe*Ye[tt],pt=0,n=me.length;pt<n;pt++){var ce=me[pt],Zt=ce.length;if(Be<=Zt){var ze=ce.curve,Jt=ze._path,ui=Jt._parent,Vt=ui instanceof ei?ui:Jt,qt=J.clamp(ze.getTimeAt(Be),ge,Ee),Ei=ze.getPointAtTime(qt),Ai=D(ze.getTangentAtTime(qt).y)<Math.SQRT1_2,pi=null;if(he.subtract&&Y){var Rt=Vt===ue?Y:ue,Yi=Rt._getWinding(Ei,Ai,!0);if(Vt===ue&&Yi.winding||Vt===Y&&!Yi.winding){if(Yi.quality<1)continue;pi={winding:0,quality:1}}}pi=pi||je(Ei,ne[Jt._id][ze.getIndex()],Ai,!0),pi.quality>Xe.quality&&(Xe=pi);break}Be-=Zt}for(var pt=me.length-1;pt>=0;pt--)me[pt].segment._winding=Xe}function Ue(de,ue){var Y=[],ne;function he(Rn){var wn;return!!(Rn&&!Rn._visited&&(!ue||ue[(wn=Rn._winding||{}).winding]&&!(ue.unite&&wn.winding===2&&wn.windingL&&wn.windingR)))}function me(Rn){if(Rn){for(var wn=0,pn=ne.length;wn<pn;wn++)if(Rn===ne[wn])return!0}return!1}function pe(Rn){for(var wn=Rn._segments,pn=0,vr=wn.length;pn<vr;pn++)wn[pn]._visited=!0}function Oe(Rn,wn){var pn=Rn._intersection,vr=pn,Mi=[];wn&&(ne=[Rn]);function nr(fn,Pt){for(;fn&&fn!==Pt;){var Fi=fn._segment,xt=Fi&&Fi._path;if(xt){var nn=Fi.getNext()||xt.getFirstSegment(),Cr=nn._intersection;Fi!==Rn&&(me(Fi)||me(nn)||nn&&he(Fi)&&(he(nn)||Cr&&he(Cr._segment)))&&Mi.push(Fi),wn&&ne.push(Fi)}fn=fn._next}}if(pn){for(nr(pn);pn&&pn._previous;)pn=pn._previous;nr(pn,vr)}return Mi}de.sort(function(Rn,wn){var pn=Rn._intersection,vr=wn._intersection,Mi=!!(pn&&pn._overlap),nr=!!(vr&&vr._overlap),fn=Rn._path,Pt=wn._path;return Mi^nr?Mi?1:-1:!pn^!vr?pn?1:-1:fn!==Pt?fn._id-Pt._id:Rn._index-wn._index});for(var ze=0,Be=de.length;ze<Be;ze++){var Ye=de[ze],Xe=he(Ye),ge=null,Ee=!1,tt=!0,pt=[],n,ce,Zt;if(Xe&&Ye._path._overlapsOnly){var Jt=Ye._path,ui=Ye._intersection._segment._path;Jt.compare(ui)&&(Jt.getArea()&&Y.push(Jt.clone(!1)),pe(Jt),pe(ui),Xe=!1)}for(;Xe;){var Vt=!ge,qt=Oe(Ye,Vt),Ei=qt.shift(),Ee=!Vt&&(me(Ye)||me(Ei)),Ai=!Ee&&Ei;if(Vt&&(ge=new _t(xe.NO_INSERT),n=null),Ee){(Ye.isFirst()||Ye.isLast())&&(tt=Ye._path._closed),Ye._visited=!0;break}if(Ai&&n&&(pt.push(n),n=null),n||(Ai&&qt.push(Ye),n={start:ge._segments.length,crossings:qt,visited:ce=[],handleIn:Zt}),Ai&&(Ye=Ei),!he(Ye)){ge.removeSegments(n.start);for(var pi=0,Rt=ce.length;pi<Rt;pi++)ce[pi]._visited=!1;ce.length=0;do Ye=n&&n.crossings.shift(),(!Ye||!Ye._path)&&(Ye=null,n=pt.pop(),n&&(ce=n.visited,Zt=n.handleIn));while(n&&!he(Ye));if(!Ye)break}var Yi=Ye.getNext();ge.add(new Me(Ye._point,Zt,Yi&&Ye._handleOut)),Ye._visited=!0,ce.push(Ye),Ye=Yi||Ye._path.getFirstSegment(),Zt=Yi&&Yi._handleIn}Ee&&(tt&&(ge.getFirstSegment().setHandleIn(Zt),ge.setClosed(tt)),ge.getArea()!==0&&Y.push(ge))}return Y}return{_getWinding:function(de,ue,Y){return je(de,this.getCurves(),ue,Y)},unite:function(de,ue){return fe(this,de,"unite",ue)},intersect:function(de,ue){return fe(this,de,"intersect",ue)},subtract:function(de,ue){return fe(this,de,"subtract",ue)},exclude:function(de,ue){return fe(this,de,"exclude",ue)},divide:function(de,ue){return ue&&(ue.trace==!1||ue.stroke)?ye(this,de,"divide"):ie([this.subtract(de,ue),this.intersect(de,ue)],!0,this,de,ue)},resolveCrossings:function(){var de=this._children,ue=de||[this];function Y(n,ce){var Zt=n&&n._intersection;return Zt&&Zt._overlap&&Zt._path===ce}var ne=!1,he=!1,me=this.getIntersections(null,function(n){return n.hasOverlap()&&(ne=!0)||n.isCrossing()&&(he=!0)}),pe=ne&&he&&[];if(me=vt.expand(me),ne)for(var Oe=Ce(me,function(n){return n.hasOverlap()},pe),ze=Oe.length-1;ze>=0;ze--){var Be=Oe[ze],Ye=Be._path,Xe=Be._segment,ge=Xe.getPrevious(),Ee=Xe.getNext();Y(ge,Ye)&&Y(Ee,Ye)&&(Xe.remove(),ge._handleOut._set(0,0),Ee._handleIn._set(0,0),ge!==Xe&&!ge.getCurve().hasLength()&&(Ee._handleIn.set(ge._handleIn),ge.remove()))}he&&(Ce(me,ne&&function(n){var ce=n.getCurve(),Zt=n.getSegment(),Jt=n._intersection,ui=Jt._curve,Vt=Jt._segment;if(ce&&ui&&ce._path&&ui._path)return!0;Zt&&(Zt._intersection=null),Vt&&(Vt._intersection=null)},pe),pe&&we(pe),ue=Ue(h.each(ue,function(n){h.push(this,n._segments)},[])));var tt=ue.length,pt;return tt>1&&de?(ue!==de&&this.setChildren(ue),pt=this):tt===1&&!de&&(ue[0]!==this&&this.setSegments(ue[0].removeSegments()),pt=this),pt||(pt=new ei(xe.NO_INSERT),pt.addChildren(ue),pt=pt.reduce(),pt.copyAttributes(this),this.replaceWith(pt)),pt},reorient:function(de,ue){var Y=this._children;return Y&&Y.length?this.setChildren(Te(this.removeChildren(),function(ne){return!!(de?ne:ne&1)},ue)):ue!==i&&this.setClockwise(ue),this},getInteriorPoint:function(){var de=this.getBounds(),ue=de.getCenter(!0);if(!this.contains(ue)){for(var Y=this.getCurves(),ne=ue.y,he=[],me=[],pe=0,Oe=Y.length;pe<Oe;pe++){var ze=Y[pe].getValues(),Be=ze[1],Ye=ze[3],Xe=ze[5],ge=ze[7];if(ne>=d(Be,Ye,Xe,ge)&&ne<=y(Be,Ye,Xe,ge))for(var Ee=Fe.getMonoCurves(ze),tt=0,pt=Ee.length;tt<pt;tt++){var n=Ee[tt],ce=n[1],Zt=n[7];if(ce!==Zt&&(ne>=ce&&ne<=Zt||ne>=Zt&&ne<=ce)){var Jt=ne===ce?n[0]:ne===Zt?n[6]:Fe.solveCubic(n,1,ne,me,0,1)===1?Fe.getPoint(n,me[0]).x:(n[0]+n[6])/2;he.push(Jt)}}}he.length>1&&(he.sort(function(ui,Vt){return ui-Vt}),ue.x=(he[0]+he[1])/2)}return ue}}});var di=h.extend({_class:"PathFlattener",initialize:function(d,y,D,U,Q){var K=[],ie=[],Ae=0,fe=1/(D||32),ye=d._segments,Le=ye[0],we;function Te(Ue,de){var ue=Fe.getValues(Ue,de,Q);K.push(ue),Ce(ue,Ue._index,0,1)}function Ce(Ue,de,ue,Y){if(Y-ue>fe&&!(U&&Fe.isStraight(Ue))&&!Fe.isFlatEnough(Ue,y||.25)){var ne=Fe.subdivide(Ue,.5),he=(ue+Y)/2;Ce(ne[0],de,ue,he),Ce(ne[1],de,he,Y)}else{var me=Ue[6]-Ue[0],pe=Ue[7]-Ue[1],Oe=Math.sqrt(me*me+pe*pe);Oe>0&&(Ae+=Oe,ie.push({offset:Ae,curve:Ue,index:de,time:Y}))}}for(var je=1,Ne=ye.length;je<Ne;je++)we=ye[je],Te(Le,we),Le=we;d._closed&&Te(we||Le,ye[0]),this.curves=K,this.parts=ie,this.length=Ae,this.index=0},_get:function(d){for(var y=this.parts,D=y.length,U,Q=this.index;U=Q,!(!Q||y[--Q].offset<d););for(;U<D;U++){var K=y[U];if(K.offset>=d){this.index=U;var ie=y[U-1],Ae=ie&&ie.index===K.index?ie.time:0,fe=ie?ie.offset:0;return{index:K.index,time:Ae+(K.time-Ae)*(d-fe)/(K.offset-fe)}}}return{index:y[D-1].index,time:1}},drawPart:function(d,y,D){for(var U=this._get(y),Q=this._get(D),K=U.index,ie=Q.index;K<=ie;K++){var Ae=Fe.getPart(this.curves[K],K===U.index?U.time:0,K===Q.index?Q.time:1);K===U.index&&d.moveTo(Ae[0],Ae[1]),d.bezierCurveTo.apply(d,Ae.slice(2))}}},h.each(Fe._evaluateMethods,function(d){this[d+"At"]=function(y){var D=this._get(y);return Fe[d](this.curves[D.index],D.time)}},{})),yi=h.extend({initialize:function(d){for(var y=this.points=[],D=d._segments,U=d._closed,Q=0,K,ie=D.length;Q<ie;Q++){var Ae=D[Q].point;(!K||!K.equals(Ae))&&y.push(K=Ae.clone())}U&&(y.unshift(y[y.length-1]),y.push(y[1])),this.closed=U},fit:function(d){var y=this.points,D=y.length,U=null;return D>0&&(U=[new Me(y[0])],D>1&&(this.fitCubic(U,d,0,D-1,y[1].subtract(y[0]),y[D-2].subtract(y[D-1])),this.closed&&(U.shift(),U.pop()))),U},fitCubic:function(d,y,D,U,Q,K){var ie=this.points;if(U-D===1){var Ae=ie[D],fe=ie[U],ye=Ae.getDistance(fe)/3;this.addCurve(d,[Ae,Ae.add(Q.normalize(ye)),fe.add(K.normalize(ye)),fe]);return}for(var Le=this.chordLengthParameterize(D,U),we=Math.max(y,y*y),Te,Ce=!0,je=0;je<=4;je++){var Ne=this.generateBezier(D,U,Le,Q,K),Ue=this.findMaxError(D,U,Ne,Le);if(Ue.error<y&&Ce){this.addCurve(d,Ne);return}if(Te=Ue.index,Ue.error>=we)break;Ce=this.reparameterize(D,U,Le,Ne),we=Ue.error}var de=ie[Te-1].subtract(ie[Te+1]);this.fitCubic(d,y,D,Te,Q,de),this.fitCubic(d,y,Te,U,de.negate(),K)},addCurve:function(d,y){var D=d[d.length-1];D.setHandleOut(y[1].subtract(y[0])),d.push(new Me(y[3],y[2].subtract(y[3])))},generateBezier:function(d,y,D,U,Q){for(var K=1e-12,ie=Math.abs,Ae=this.points,fe=Ae[d],ye=Ae[y],Le=[[0,0],[0,0]],we=[0,0],Te=0,Ce=y-d+1;Te<Ce;Te++){var je=D[Te],Ne=1-je,Ue=3*je*Ne,de=Ne*Ne*Ne,ue=Ue*Ne,Y=Ue*je,ne=je*je*je,he=U.normalize(ue),me=Q.normalize(Y),pe=Ae[d+Te].subtract(fe.multiply(de+ue)).subtract(ye.multiply(Y+ne));Le[0][0]+=he.dot(he),Le[0][1]+=he.dot(me),Le[1][0]=Le[0][1],Le[1][1]+=me.dot(me),we[0]+=he.dot(pe),we[1]+=me.dot(pe)}var Oe=Le[0][0]*Le[1][1]-Le[1][0]*Le[0][1],ze,Be;if(ie(Oe)>K){var Ye=Le[0][0]*we[1]-Le[1][0]*we[0],Xe=we[0]*Le[1][1]-we[1]*Le[0][1];ze=Xe/Oe,Be=Ye/Oe}else{var ge=Le[0][0]+Le[0][1],Ee=Le[1][0]+Le[1][1];ze=Be=ie(ge)>K?we[0]/ge:ie(Ee)>K?we[1]/Ee:0}var tt=ye.getDistance(fe),pt=K*tt,n,ce;if(ze<pt||Be<pt)ze=Be=tt/3;else{var Zt=ye.subtract(fe);n=U.normalize(ze),ce=Q.normalize(Be),n.dot(Zt)-ce.dot(Zt)>tt*tt&&(ze=Be=tt/3,n=ce=null)}return[fe,fe.add(n||U.normalize(ze)),ye.add(ce||Q.normalize(Be)),ye]},reparameterize:function(d,y,D,U){for(var Q=d;Q<=y;Q++)D[Q-d]=this.findRoot(U,this.points[Q],D[Q-d]);for(var Q=1,K=D.length;Q<K;Q++)if(D[Q]<=D[Q-1])return!1;return!0},findRoot:function(d,y,D){for(var U=[],Q=[],K=0;K<=2;K++)U[K]=d[K+1].subtract(d[K]).multiply(3);for(var K=0;K<=1;K++)Q[K]=U[K+1].subtract(U[K]).multiply(2);var ie=this.evaluate(3,d,D),Ae=this.evaluate(2,U,D),fe=this.evaluate(1,Q,D),ye=ie.subtract(y),Le=Ae.dot(Ae)+ye.dot(fe);return J.isMachineZero(Le)?D:D-ye.dot(Ae)/Le},evaluate:function(d,y,D){for(var U=y.slice(),Q=1;Q<=d;Q++)for(var K=0;K<=d-Q;K++)U[K]=U[K].multiply(1-D).add(U[K+1].multiply(D));return U[0]},chordLengthParameterize:function(d,y){for(var D=[0],U=d+1;U<=y;U++)D[U-d]=D[U-d-1]+this.points[U].getDistance(this.points[U-1]);for(var U=1,Q=y-d;U<=Q;U++)D[U]/=D[Q];return D},findMaxError:function(d,y,D,U){for(var Q=Math.floor((y-d+1)/2),K=0,ie=d+1;ie<y;ie++){var Ae=this.evaluate(3,D,U[ie-d]),fe=Ae.subtract(this.points[ie]),ye=fe.x*fe.x+fe.y*fe.y;ye>=K&&(K=ye,Q=ie)}return{error:K,index:Q}}}),Ti=xe.extend({_class:"TextItem",_applyMatrix:!1,_canApplyMatrix:!1,_serializeFields:{content:null},_boundsOptions:{stroke:!1,handle:!1},initialize:function(y){this._content="",this._lines=[];var D=y&&h.isPlainObject(y)&&y.x===i&&y.y===i;this._initialize(D&&y,!D&&se.read(arguments))},_equals:function(d){return this._content===d._content},copyContent:function(d){this.setContent(d._content)},getContent:function(){return this._content},setContent:function(d){this._content=""+d,this._lines=this._content.split(/\r\n|\n|\r/mg),this._changed(521)},isEmpty:function(){return!this._content},getCharacterStyle:"#getStyle",setCharacterStyle:"#setStyle",getParagraphStyle:"#getStyle",setParagraphStyle:"#setStyle"}),Vi=Ti.extend({_class:"PointText",initialize:function(){Ti.apply(this,arguments)},getPoint:function(){var d=this._matrix.getTranslation();return new be(d.x,d.y,this,"setPoint")},setPoint:function(){var d=se.read(arguments);this.translate(d.subtract(this._matrix.getTranslation()))},_draw:function(d,y,D){if(this._content){this._setStyles(d,y,D);var U=this._lines,Q=this._style,K=Q.hasFill(),ie=Q.hasStroke(),Ae=Q.getLeading(),fe=d.shadowColor;d.font=Q.getFontStyle(),d.textAlign=Q.getJustification();for(var ye=0,Le=U.length;ye<Le;ye++){d.shadowColor=fe;var we=U[ye];K&&(d.fillText(we,0,0),d.shadowColor="rgba(0,0,0,0)"),ie&&d.strokeText(we,0,0),d.translate(0,Ae)}}},_getBounds:function(d,y){var D=this._style,U=this._lines,Q=U.length,K=D.getJustification(),ie=D.getLeading(),Ae=this.getView().getTextWidth(D.getFontStyle(),U),fe=0;K!=="left"&&(fe-=Ae/(K==="center"?2:1));var ye=new Qe(fe,Q?-.75*ie:0,Ae,Q*ie);return d?d._transformBounds(ye,ye):ye}}),wi=h.extend(new function(){var d={gray:["gray"],rgb:["red","green","blue"],hsb:["hue","saturation","brightness"],hsl:["hue","saturation","lightness"],gradient:["gradient","origin","destination","highlight"]},y={},D={transparent:[0,0,0,0]},U;function Q(Ae){var fe=Ae.match(/^#([\da-f]{2})([\da-f]{2})([\da-f]{2})([\da-f]{2})?$/i)||Ae.match(/^#([\da-f])([\da-f])([\da-f])([\da-f])?$/i),ye="rgb",Le;if(fe){var we=fe[4]?4:3;Le=new Array(we);for(var Te=0;Te<we;Te++){var Ce=fe[Te+1];Le[Te]=parseInt(Ce.length==1?Ce+Ce:Ce,16)/255}}else if(fe=Ae.match(/^(rgb|hsl)a?\((.*)\)$/)){ye=fe[1],Le=fe[2].trim().split(/[,\s]+/g);for(var je=ye==="hsl",Te=0,Ne=Math.min(Le.length,4);Te<Ne;Te++){var Ue=Le[Te],Ce=parseFloat(Ue);if(je)if(Te===0){var de=Ue.match(/([a-z]*)$/)[1];Ce*={turn:360,rad:180/Math.PI,grad:.9}[de]||1}else Te<3&&(Ce/=100);else Te<3&&(Ce/=/%$/.test(Ue)?100:255);Le[Te]=Ce}}else{var ue=D[Ae];if(!ue)if(r){U||(U=Wi.getContext(1,1,{willReadFrequently:!0}),U.globalCompositeOperation="copy"),U.fillStyle="rgba(0,0,0,0)",U.fillStyle=Ae,U.fillRect(0,0,1,1);var Y=U.getImageData(0,0,1,1).data;ue=D[Ae]=[Y[0]/255,Y[1]/255,Y[2]/255]}else ue=[0,0,0];Le=ue.slice()}return[ye,Le]}var K=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]],ie={"rgb-hsb":function(Ae,fe,ye){var Le=Math.max(Ae,fe,ye),we=Math.min(Ae,fe,ye),Te=Le-we,Ce=Te===0?0:(Le==Ae?(fe-ye)/Te+(fe<ye?6:0):Le==fe?(ye-Ae)/Te+2:(Ae-fe)/Te+4)*60;return[Ce,Le===0?0:Te/Le,Le]},"hsb-rgb":function(Ae,fe,ye){Ae=(Ae/60%6+6)%6;var we=Math.floor(Ae),Le=Ae-we,we=K[we],Te=[ye,ye*(1-fe),ye*(1-fe*Le),ye*(1-fe*(1-Le))];return[Te[we[0]],Te[we[1]],Te[we[2]]]},"rgb-hsl":function(Ae,fe,ye){var Le=Math.max(Ae,fe,ye),we=Math.min(Ae,fe,ye),Te=Le-we,Ce=Te===0,je=Ce?0:(Le==Ae?(fe-ye)/Te+(fe<ye?6:0):Le==fe?(ye-Ae)/Te+2:(Ae-fe)/Te+4)*60,Ne=(Le+we)/2,Ue=Ce?0:Ne<.5?Te/(Le+we):Te/(2-Le-we);return[je,Ue,Ne]},"hsl-rgb":function(Ae,fe,ye){if(Ae=(Ae/360%1+1)%1,fe===0)return[ye,ye,ye];for(var Le=[Ae+1/3,Ae,Ae-1/3],we=ye<.5?ye*(1+fe):ye+fe-ye*fe,Te=2*ye-we,Ce=[],je=0;je<3;je++){var Ne=Le[je];Ne<0&&(Ne+=1),Ne>1&&(Ne-=1),Ce[je]=6*Ne<1?Te+(we-Te)*6*Ne:2*Ne<1?we:3*Ne<2?Te+(we-Te)*(2/3-Ne)*6:Te}return Ce},"rgb-gray":function(Ae,fe,ye){return[Ae*.2989+fe*.587+ye*.114]},"gray-rgb":function(Ae){return[Ae,Ae,Ae]},"gray-hsb":function(Ae){return[0,0,Ae]},"gray-hsl":function(Ae){return[0,0,Ae]},"gradient-rgb":function(){return[]},"rgb-gradient":function(){return[]}};return h.each(d,function(Ae,fe){y[fe]=[],h.each(Ae,function(ye,Le){var we=h.capitalize(ye),Te=/^(hue|saturation)$/.test(ye),Ce=y[fe][Le]=fe==="gradient"?ye==="gradient"?function(je){var Ne=this._components[0];return je=mi.read(Array.isArray(je)?je:arguments,0,{readNull:!0}),Ne!==je&&(Ne&&Ne._removeOwner(this),je&&je._addOwner(this)),je}:function(){return se.read(arguments,0,{readNull:ye==="highlight",clone:!0})}:function(je){return je==null||isNaN(je)?0:+je};this["get"+we]=function(){return this._type===fe||Te&&/^hs[bl]$/.test(this._type)?this._components[Le]:this._convert(fe)[Le]},this["set"+we]=function(je){this._type!==fe&&!(Te&&/^hs[bl]$/.test(this._type))&&(this._components=this._convert(fe),this._properties=d[fe],this._type=fe),this._components[Le]=Ce.call(this,je),this._changed()}},this)},{_class:"Color",_readIndex:!0,initialize:function Ae(fe){var ye=arguments,Le=this.__read,we=0,Te,Ce,je,Ne;Array.isArray(fe)&&(ye=fe,fe=ye[0]);var Ue=fe!=null&&typeof fe;if(Ue==="string"&&fe in d&&(Te=fe,fe=ye[1],Array.isArray(fe)?(Ce=fe,je=ye[2]):(Le&&(we=1),ye=h.slice(ye,1),Ue=typeof fe)),!Ce){if(Ne=Ue==="number"?ye:Ue==="object"&&fe.length!=null?fe:null,Ne){Te||(Te=Ne.length>=3?"rgb":"gray");var de=d[Te].length;je=Ne[de],Le&&(we+=Ne===arguments?de+(je!=null?1:0):1),Ne.length>de&&(Ne=h.slice(Ne,0,de))}else if(Ue==="string"){var ue=Q(fe);Te=ue[0],Ce=ue[1],Ce.length===4&&(je=Ce[3],Ce.length--)}else if(Ue==="object")if(fe.constructor===Ae){if(Te=fe._type,Ce=fe._components.slice(),je=fe._alpha,Te==="gradient")for(var Y=1,ne=Ce.length;Y<ne;Y++){var he=Ce[Y];he&&(Ce[Y]=he.clone())}}else if(fe.constructor===mi)Te="gradient",Ne=ye;else{Te="hue"in fe?"lightness"in fe?"hsl":"hsb":"gradient"in fe||"stops"in fe||"radial"in fe?"gradient":"gray"in fe?"gray":"rgb";var me=d[Te],pe=y[Te];this._components=Ce=[];for(var Y=0,ne=me.length;Y<ne;Y++){var Oe=fe[me[Y]];Oe==null&&!Y&&Te==="gradient"&&"stops"in fe&&(Oe={stops:fe.stops,radial:fe.radial}),Oe=pe[Y].call(this,Oe),Oe!=null&&(Ce[Y]=Oe)}je=fe.alpha}Le&&Te&&(we=1)}if(this._type=Te||"rgb",!Ce){this._components=Ce=[];for(var pe=y[this._type],Y=0,ne=pe.length;Y<ne;Y++){var Oe=pe[Y].call(this,Ne&&Ne[Y]);Oe!=null&&(Ce[Y]=Oe)}}return this._components=Ce,this._properties=d[this._type],this._alpha=je,Le&&(this.__read=we),this},set:"#initialize",_serialize:function(Ae,fe){var ye=this.getComponents();return h.serialize(/^(gray|rgb)$/.test(this._type)?ye:[this._type].concat(ye),Ae,!0,fe)},_changed:function(){this._canvasStyle=null,this._owner&&(this._setter?this._owner[this._setter](this):this._owner._changed(129))},_convert:function(Ae){var fe;return this._type===Ae?this._components.slice():(fe=ie[this._type+"-"+Ae])?fe.apply(this,this._components):ie["rgb-"+Ae].apply(this,ie[this._type+"-rgb"].apply(this,this._components))},convert:function(Ae){return new wi(Ae,this._convert(Ae),this._alpha)},getType:function(){return this._type},setType:function(Ae){this._components=this._convert(Ae),this._properties=d[Ae],this._type=Ae},getComponents:function(){var Ae=this._components.slice();return this._alpha!=null&&Ae.push(this._alpha),Ae},getAlpha:function(){return this._alpha!=null?this._alpha:1},setAlpha:function(Ae){this._alpha=Ae==null?null:Math.min(Math.max(Ae,0),1),this._changed()},hasAlpha:function(){return this._alpha!=null},equals:function(Ae){var fe=h.isPlainValue(Ae,!0)?wi.read(arguments):Ae;return fe===this||fe&&this._class===fe._class&&this._type===fe._type&&this.getAlpha()===fe.getAlpha()&&h.equals(this._components,fe._components)||!1},toString:function(){for(var Ae=this._properties,fe=[],ye=this._type==="gradient",Le=j.instance,we=0,Te=Ae.length;we<Te;we++){var Ce=this._components[we];Ce!=null&&fe.push(Ae[we]+": "+(ye?Ce:Le.number(Ce)))}return this._alpha!=null&&fe.push("alpha: "+Le.number(this._alpha)),"{ "+fe.join(", ")+" }"},toCSS:function(Ae){var fe=this._convert("rgb"),ye=Ae||this._alpha==null?1:this._alpha;function Le(we){return Math.round((we<0?0:we>1?1:we)*255)}return fe=[Le(fe[0]),Le(fe[1]),Le(fe[2])],ye<1&&fe.push(ye<0?0:ye),Ae?"#"+((1<<24)+(fe[0]<<16)+(fe[1]<<8)+fe[2]).toString(16).slice(1):(fe.length==4?"rgba(":"rgb(")+fe.join(",")+")"},toCanvasStyle:function(Ae,fe){if(this._canvasStyle)return this._canvasStyle;if(this._type!=="gradient")return this._canvasStyle=this.toCSS();var ye=this._components,Le=ye[0],we=Le._stops,Te=ye[1],Ce=ye[2],je=ye[3],Ne=fe&&fe.inverted(),Ue;if(Ne&&(Te=Ne._transformPoint(Te),Ce=Ne._transformPoint(Ce),je&&(je=Ne._transformPoint(je))),Le._radial){var de=Ce.getDistance(Te);if(je){var ue=je.subtract(Te);ue.getLength()>de&&(je=Te.add(ue.normalize(de-.1)))}var Y=je||Te;Ue=Ae.createRadialGradient(Y.x,Y.y,0,Te.x,Te.y,de)}else Ue=Ae.createLinearGradient(Te.x,Te.y,Ce.x,Ce.y);for(var ne=0,he=we.length;ne<he;ne++){var me=we[ne],pe=me._offset;Ue.addColorStop(pe??ne/(he-1),me._color.toCanvasStyle())}return this._canvasStyle=Ue},transform:function(Ae){if(this._type==="gradient"){for(var fe=this._components,ye=1,Le=fe.length;ye<Le;ye++){var we=fe[ye];Ae._transformPoint(we,we,!0)}this._changed()}},statics:{_types:d,random:function(){var Ae=Math.random;return new wi(Ae(),Ae(),Ae())},_setOwner:function(Ae,fe,ye){return Ae&&(Ae._owner&&fe&&Ae._owner!==fe&&(Ae=Ae.clone()),!Ae._owner^!fe&&(Ae._owner=fe||null,Ae._setter=ye||null)),Ae}}})},new function(){var d={add:function(y,D){return y+D},subtract:function(y,D){return y-D},multiply:function(y,D){return y*D},divide:function(y,D){return y/D}};return h.each(d,function(y,D){this[D]=function(U){U=wi.read(arguments);for(var Q=this._type,K=this._components,ie=U._convert(Q),Ae=0,fe=K.length;Ae<fe;Ae++)ie[Ae]=y(K[Ae],ie[Ae]);return new wi(Q,ie,this._alpha!=null?y(this._alpha,U.getAlpha()):null)}},{})}),mi=h.extend({_class:"Gradient",initialize:function(y,D){this._id=oe.get(),y&&h.isPlainObject(y)&&(this.set(y),y=D=null),this._stops==null&&this.setStops(y||["white","black"]),this._radial==null&&this.setRadial(typeof D=="string"&&D==="radial"||D||!1)},_serialize:function(d,y){return y.add(this,function(){return h.serialize([this._stops,this._radial],d,!0,y)})},_changed:function(){for(var d=0,y=this._owners&&this._owners.length;d<y;d++)this._owners[d]._changed()},_addOwner:function(d){this._owners||(this._owners=[]),this._owners.push(d)},_removeOwner:function(d){var y=this._owners?this._owners.indexOf(d):-1;y!=-1&&(this._owners.splice(y,1),this._owners.length||(this._owners=i))},clone:function(){for(var d=[],y=0,D=this._stops.length;y<D;y++)d[y]=this._stops[y].clone();return new mi(d,this._radial)},getStops:function(){return this._stops},setStops:function(d){if(d.length<2)throw new Error("Gradient stop list needs to contain at least two stops.");var y=this._stops;if(y)for(var D=0,U=y.length;D<U;D++)y[D]._owner=i;y=this._stops=Wt.readList(d,0,{clone:!0});for(var D=0,U=y.length;D<U;D++)y[D]._owner=this;this._changed()},getRadial:function(){return this._radial},setRadial:function(d){this._radial=d,this._changed()},equals:function(d){if(d===this)return!0;if(d&&this._class===d._class){var y=this._stops,D=d._stops,U=y.length;if(U===D.length){for(var Q=0;Q<U;Q++)if(!y[Q].equals(D[Q]))return!1;return!0}}return!1}}),Wt=h.extend({_class:"GradientStop",initialize:function(y,D){var U=y,Q=D;typeof y=="object"&&D===i&&(Array.isArray(y)&&typeof y[0]!="number"?(U=y[0],Q=y[1]):("color"in y||"offset"in y||"rampPoint"in y)&&(U=y.color,Q=y.offset||y.rampPoint||0)),this.setColor(U),this.setOffset(Q)},clone:function(){return new Wt(this._color.clone(),this._offset)},_serialize:function(d,y){var D=this._color,U=this._offset;return h.serialize(U==null?[D]:[D,U],d,!0,y)},_changed:function(){this._owner&&this._owner._changed(129)},getOffset:function(){return this._offset},setOffset:function(d){this._offset=d,this._changed()},getRampPoint:"#getOffset",setRampPoint:"#setOffset",getColor:function(){return this._color},setColor:function(){wi._setOwner(this._color,null),this._color=wi._setOwner(wi.read(arguments,0),this,"setColor"),this._changed()},equals:function(d){return d===this||d&&this._class===d._class&&this._color.equals(d._color)&&this._offset==d._offset||!1}}),Di=h.extend(new function(){var d={fillColor:null,fillRule:"nonzero",strokeColor:null,strokeWidth:1,strokeCap:"butt",strokeJoin:"miter",strokeScaling:!0,miterLimit:10,dashOffset:0,dashArray:[],shadowColor:null,shadowBlur:0,shadowOffset:new se,selectedColor:null},y=h.set({},d,{fontFamily:"sans-serif",fontWeight:"normal",fontSize:12,leading:null,justification:"left"}),D=h.set({},y,{fillColor:new wi}),U={strokeWidth:193,strokeCap:193,strokeJoin:193,strokeScaling:201,miterLimit:193,fontFamily:9,fontWeight:9,fontSize:9,font:9,leading:9,justification:9},Q={beans:!0},K={_class:"Style",beans:!0,initialize:function(Ae,fe,ye){this._values={},this._owner=fe,this._project=fe&&fe._project||ye||an.project,this._defaults=!fe||fe instanceof Gt?y:fe instanceof Ti?D:d,Ae&&this.set(Ae)}};return h.each(y,function(ie,Ae){var fe=/Color$/.test(Ae),ye=Ae==="shadowOffset",Le=h.capitalize(Ae),we=U[Ae],Te="set"+Le,Ce="get"+Le;K[Te]=function(je){var Ne=this._owner,Ue=Ne&&Ne._children,de=Ue&&Ue.length>0&&!(Ne instanceof ei);if(de)for(var ue=0,Y=Ue.length;ue<Y;ue++)Ue[ue]._style[Te](je);if((Ae==="selectedColor"||!de)&&Ae in this._defaults){var ne=this._values[Ae];ne!==je&&(fe&&(ne&&(wi._setOwner(ne,null),ne._canvasStyle=null),je&&je.constructor===wi&&(je=wi._setOwner(je,Ne,de&&Te))),this._values[Ae]=je,Ne&&Ne._changed(we||129))}},K[Ce]=function(je){var Ne=this._owner,Ue=Ne&&Ne._children,de=Ue&&Ue.length>0&&!(Ne instanceof ei),ue;if(de&&!je)for(var Y=0,ne=Ue.length;Y<ne;Y++){var he=Ue[Y]._style[Ce]();if(!Y)ue=he;else if(!h.equals(ue,he))return i}else if(Ae in this._defaults){var ue=this._values[Ae];if(ue===i)ue=this._defaults[Ae],ue&&ue.clone&&(ue=ue.clone());else{var me=fe?wi:ye?se:null;me&&!(ue&&ue.constructor===me)&&(this._values[Ae]=ue=me.read([ue],0,{readNull:!0,clone:!0}))}}return ue&&fe&&(ue=wi._setOwner(ue,Ne,de&&Te)),ue},Q[Ce]=function(je){return this._style[Ce](je)},Q[Te]=function(je){this._style[Te](je)}}),h.each({Font:"FontFamily",WindingRule:"FillRule"},function(ie,Ae){var fe="get"+Ae,ye="set"+Ae;K[fe]=Q[fe]="#get"+ie,K[ye]=Q[ye]="#set"+ie}),xe.inject(Q),K},{set:function(d){var y=d instanceof Di,D=y?d._values:d;if(D){for(var U in D)if(U in this._defaults){var Q=D[U];this[U]=Q&&y&&Q.clone?Q.clone():Q}}},equals:function(d){function y(D,U,Q){var K=D._values,ie=U._values,Ae=U._defaults;for(var fe in K){var ye=K[fe],Le=ie[fe];if(!(Q&&fe in ie)&&!h.equals(ye,Le===i?Ae[fe]:Le))return!1}return!0}return d===this||d&&this._class===d._class&&y(this,d)&&y(d,this,!0)||!1},_dispose:function(){var d;d=this.getFillColor(),d&&(d._canvasStyle=null),d=this.getStrokeColor(),d&&(d._canvasStyle=null),d=this.getShadowColor(),d&&(d._canvasStyle=null)},hasFill:function(){var d=this.getFillColor();return!!d&&d.alpha>0},hasStroke:function(){var d=this.getStrokeColor();return!!d&&d.alpha>0&&this.getStrokeWidth()>0},hasShadow:function(){var d=this.getShadowColor();return!!d&&d.alpha>0&&(this.getShadowBlur()>0||!this.getShadowOffset().isZero())},getView:function(){return this._project._view},getFontStyle:function(){var d=this.getFontSize();return this.getFontWeight()+" "+d+(/[a-z]/i.test(d+"")?" ":"px ")+this.getFontFamily()},getFont:"#getFontFamily",setFont:"#setFontFamily",getLeading:function d(){var y=d.base.call(this),D=this.getFontSize();return/pt|em|%|px/.test(D)&&(D=this.getView().getPixelSize(D)),y??D*1.2}}),$t=new function(){function d(y,D,U,Q){for(var K=["","webkit","moz","Moz","ms","o"],ie=D[0].toUpperCase()+D.substring(1),Ae=0;Ae<6;Ae++){var fe=K[Ae],ye=fe?fe+ie:D;if(ye in y){if(U)y[ye]=Q;else return y[ye];break}}}return{getStyles:function(y){var D=y&&y.nodeType!==9?y.ownerDocument:y,U=D&&D.defaultView;return U&&U.getComputedStyle(y,"")},getBounds:function(y,D){var U=y.ownerDocument,Q=U.body,K=U.documentElement,ie;try{ie=y.getBoundingClientRect()}catch{ie={left:0,top:0,width:0,height:0}}var Ae=ie.left-(K.clientLeft||Q.clientLeft||0),fe=ie.top-(K.clientTop||Q.clientTop||0);if(!D){var ye=U.defaultView;Ae+=ye.pageXOffset||K.scrollLeft||Q.scrollLeft,fe+=ye.pageYOffset||K.scrollTop||Q.scrollTop}return new Qe(Ae,fe,ie.width,ie.height)},getViewportBounds:function(y){var D=y.ownerDocument,U=D.defaultView,Q=D.documentElement;return new Qe(0,0,U.innerWidth||Q.clientWidth,U.innerHeight||Q.clientHeight)},getOffset:function(y,D){return $t.getBounds(y,D).getPoint()},getSize:function(y){return $t.getBounds(y,!0).getSize()},isInvisible:function(y){return $t.getSize(y).equals(new qe(0,0))},isInView:function(y){return!$t.isInvisible(y)&&$t.getViewportBounds(y).intersects($t.getBounds(y,!0))},isInserted:function(y){return c.body.contains(y)},getPrefixed:function(y,D){return y&&d(y,D)},setPrefixed:function(y,D,U){if(typeof D=="object")for(var Q in D)d(y,Q,!0,D[Q]);else d(y,D,!0,U)}}},Lt={add:function(d,y){if(d)for(var D in y)for(var U=y[D],Q=D.split(/[\s,]+/g),K=0,ie=Q.length;K<ie;K++){var Ae=Q[K],fe=d===c&&(Ae==="touchstart"||Ae==="touchmove")?{passive:!1}:!1;d.addEventListener(Ae,U,fe)}},remove:function(d,y){if(d)for(var D in y)for(var U=y[D],Q=D.split(/[\s,]+/g),K=0,ie=Q.length;K<ie;K++)d.removeEventListener(Q[K],U,!1)},getPoint:function(d){var y=d.targetTouches?d.targetTouches.length?d.targetTouches[0]:d.changedTouches[0]:d;return new se(y.pageX||y.clientX+c.documentElement.scrollLeft,y.pageY||y.clientY+c.documentElement.scrollTop)},getTarget:function(d){return d.target||d.srcElement},getRelatedTarget:function(d){return d.relatedTarget||d.toElement},getOffset:function(d,y){return Lt.getPoint(d).subtract($t.getOffset(y||Lt.getTarget(d)))}};Lt.requestAnimationFrame=new function(){var d=$t.getPrefixed(r,"requestAnimationFrame"),y=!1,D=[],U;function Q(){var K=D;D=[];for(var ie=0,Ae=K.length;ie<Ae;ie++)K[ie]();y=d&&D.length,y&&d(Q)}return function(K){D.push(K),d?y||(d(Q),y=!0):U||(U=setInterval(Q,1e3/60))}};var ni=h.extend(v,{_class:"View",initialize:function d(y,D){function U(we){return D[we]||parseInt(D.getAttribute(we),10)}function Q(){var we=$t.getSize(D);return we.isNaN()||we.isZero()?new qe(U("width"),U("height")):we}var K;if(r&&D){this._id=D.getAttribute("id"),this._id==null&&D.setAttribute("id",this._id="paper-view-"+d._id++),Lt.add(D,this._viewEvents);var ie="none";if($t.setPrefixed(D.style,{userDrag:ie,userSelect:ie,touchCallout:ie,contentZooming:ie,tapHighlightColor:"rgba(0,0,0,0)"}),o.hasAttribute(D,"resize")){var Ae=this;Lt.add(r,this._windowEvents={resize:function(){Ae.setViewSize(Q())}})}if(K=Q(),o.hasAttribute(D,"stats")&&typeof Stats<"u"){this._stats=new Stats;var fe=this._stats.domElement,ye=fe.style,Le=$t.getOffset(D);ye.position="absolute",ye.left=Le.x+"px",ye.top=Le.y+"px",c.body.appendChild(fe)}}else K=new qe(D),D=null;this._project=y,this._scope=y._scope,this._element=D,this._pixelRatio||(this._pixelRatio=r&&r.devicePixelRatio||1),this._setElementSize(K.width,K.height),this._viewSize=K,d._views.push(this),d._viewsById[this._id]=this,(this._matrix=new ct)._owner=this,d._focused||(d._focused=this),this._frameItems={},this._frameItemCount=0,this._itemEvents={native:{},virtual:{}},this._autoUpdate=!an.agent.node,this._needsUpdate=!1},remove:function(){if(!this._project)return!1;ni._focused===this&&(ni._focused=null),ni._views.splice(ni._views.indexOf(this),1),delete ni._viewsById[this._id];var d=this._project;return d._view===this&&(d._view=null),Lt.remove(this._element,this._viewEvents),Lt.remove(r,this._windowEvents),this._element=this._project=null,this.off("frame"),this._animate=!1,this._frameItems={},!0},_events:h.each(xe._itemHandlers.concat(["onResize","onKeyDown","onKeyUp"]),function(d){this[d]={}},{onFrame:{install:function(){this.play()},uninstall:function(){this.pause()}}}),_animate:!1,_time:0,_count:0,getAutoUpdate:function(){return this._autoUpdate},setAutoUpdate:function(d){this._autoUpdate=d,d&&this.requestUpdate()},update:function(){},draw:function(){this.update()},requestUpdate:function(){if(!this._requested){var d=this;Lt.requestAnimationFrame(function(){if(d._requested=!1,d._animate){d.requestUpdate();var y=d._element;(!$t.getPrefixed(c,"hidden")||o.getAttribute(y,"keepalive")==="true")&&$t.isInView(y)&&d._handleFrame()}d._autoUpdate&&d.update()}),this._requested=!0}},play:function(){this._animate=!0,this.requestUpdate()},pause:function(){this._animate=!1},_handleFrame:function(){an=this._scope;var d=Date.now()/1e3,y=this._last?d-this._last:0;this._last=d,this.emit("frame",new h({delta:y,time:this._time+=y,count:this._count++})),this._stats&&this._stats.update()},_animateItem:function(d,y){var D=this._frameItems;y?(D[d._id]={item:d,time:0,count:0},++this._frameItemCount===1&&this.on("frame",this._handleFrameItems)):(delete D[d._id],--this._frameItemCount===0&&this.off("frame",this._handleFrameItems))},_handleFrameItems:function(d){for(var y in this._frameItems){var D=this._frameItems[y];D.item.emit("frame",new h(d,{time:D.time+=d.delta,count:D.count++}))}},_changed:function(){this._project._changed(4097),this._bounds=this._decomposed=i},getElement:function(){return this._element},getPixelRatio:function(){return this._pixelRatio},getResolution:function(){return this._pixelRatio*72},getViewSize:function(){var d=this._viewSize;return new ke(d.width,d.height,this,"setViewSize")},setViewSize:function(){var d=qe.read(arguments),y=d.subtract(this._viewSize);y.isZero()||(this._setElementSize(d.width,d.height),this._viewSize.set(d),this._changed(),this.emit("resize",{size:d,delta:y}),this._autoUpdate&&this.update())},_setElementSize:function(d,y){var D=this._element;D&&(D.width!==d&&(D.width=d),D.height!==y&&(D.height=y))},getBounds:function(){return this._bounds||(this._bounds=this._matrix.inverted()._transformBounds(new Qe(new se,this._viewSize))),this._bounds},getSize:function(){return this.getBounds().getSize()},isVisible:function(){return $t.isInView(this._element)},isInserted:function(){return $t.isInserted(this._element)},getPixelSize:function(d){var y=this._element,D;if(y){var U=y.parentNode,Q=c.createElement("div");Q.style.fontSize=d,U.appendChild(Q),D=parseFloat($t.getStyles(Q).fontSize),U.removeChild(Q)}else D=parseFloat(D);return D},getTextWidth:function(d,y){return 0}},h.each(["rotate","scale","shear","skew"],function(d){var y=d==="rotate";this[d]=function(){var D=arguments,U=(y?h:se).read(D),Q=se.read(D,0,{readNull:!0});return this.transform(new ct()[d](U,Q||this.getCenter(!0)))}},{_decompose:function(){return this._decomposed||(this._decomposed=this._matrix.decompose())},translate:function(){var d=new ct;return this.transform(d.translate.apply(d,arguments))},getCenter:function(){return this.getBounds().getCenter()},setCenter:function(){var d=se.read(arguments);this.translate(this.getCenter().subtract(d))},getZoom:function(){var d=this._decompose().scaling;return(d.x+d.y)/2},setZoom:function(d){this.transform(new ct().scale(d/this.getZoom(),this.getCenter()))},getRotation:function(){return this._decompose().rotation},setRotation:function(d){var y=this.getRotation();y!=null&&d!=null&&this.rotate(d-y)},getScaling:function(){var d=this._decompose().scaling;return new be(d.x,d.y,this,"setScaling")},setScaling:function(){var d=this.getScaling(),y=se.read(arguments,0,{clone:!0,readNull:!0});d&&y&&this.scale(y.x/d.x,y.y/d.y)},getMatrix:function(){return this._matrix},setMatrix:function(){var d=this._matrix;d.set.apply(d,arguments)},transform:function(d){this._matrix.append(d)},scrollBy:function(){this.translate(se.read(arguments).negate())}}),{projectToView:function(){return this._matrix._transformPoint(se.read(arguments))},viewToProject:function(){return this._matrix._inverseTransform(se.read(arguments))},getEventPoint:function(d){return this.viewToProject(Lt.getOffset(d,this._element))}},{statics:{_views:[],_viewsById:{},_id:0,create:function(d,y){c&&typeof y=="string"&&(y=c.getElementById(y));var D=r?si:ni;return new D(d,y)}}},new function(){if(!r)return;var d,y,D=!1,U=!1;function Q(Xe){var ge=Lt.getTarget(Xe);return ge.getAttribute&&ni._viewsById[ge.getAttribute("id")]}function K(){var Xe=ni._focused;if(!Xe||!Xe.isVisible()){for(var ge=0,Ee=ni._views.length;ge<Ee;ge++)if((Xe=ni._views[ge]).isVisible()){ni._focused=y=Xe;break}}}function ie(Xe,ge,Ee){Xe._handleMouseEvent("mousemove",ge,Ee)}var Ae=r.navigator,fe,ye,Le;Ae.pointerEnabled||Ae.msPointerEnabled?(fe="pointerdown MSPointerDown",ye="pointermove MSPointerMove",Le="pointerup pointercancel MSPointerUp MSPointerCancel"):(fe="touchstart",ye="touchmove",Le="touchend touchcancel","ontouchstart"in r&&Ae.userAgent.match(/mobile|tablet|ip(ad|hone|od)|android|silk/i)||(fe+=" mousedown",ye+=" mousemove",Le+=" mouseup"));var we={},Te={mouseout:function(Xe){var ge=ni._focused,Ee=Lt.getRelatedTarget(Xe);if(ge&&(!Ee||Ee.nodeName==="HTML")){var tt=Lt.getOffset(Xe,ge._element),pt=tt.x,n=Math.abs,ce=n(pt),Zt=1<<25,Jt=ce-Zt;tt.x=n(Jt)<ce?Jt*(pt<0?-1:1):pt,ie(ge,Xe,ge.viewToProject(tt))}},scroll:K};we[fe]=function(Xe){var ge=ni._focused=Q(Xe);D||(D=!0,ge._handleMouseEvent("mousedown",Xe))},Te[ye]=function(Xe){var ge=ni._focused;if(!U){var Ee=Q(Xe);Ee?ge!==Ee&&(ge&&ie(ge,Xe),d||(d=ge),ge=ni._focused=y=Ee):y&&y===ge&&(d&&!d.isInserted()&&(d=null),ge=ni._focused=d,d=null,K())}ge&&ie(ge,Xe)},Te[fe]=function(){U=!0},Te[Le]=function(Xe){var ge=ni._focused;ge&&D&&ge._handleMouseEvent("mouseup",Xe),U=D=!1},Lt.add(c,Te),Lt.add(r,{load:K});var Ce=!1,je=!1,Ne={doubleclick:"click",mousedrag:"mousemove"},Ue=!1,de,ue,Y,ne,he,me,pe,Oe;function ze(Xe,ge,Ee,tt,pt,n,ce){var Zt=!1,Jt;function ui(Vt,qt){if(Vt.responds(qt)){if(Jt||(Jt=new $i(qt,tt,pt,ge||Vt,n?pt.subtract(n):null)),Vt.emit(qt,Jt)&&(Ce=!0,Jt.prevented&&(je=!0),Jt.stopped))return Zt=!0}else{var Ei=Ne[qt];if(Ei)return ui(Vt,Ei)}}for(;Xe&&Xe!==ce&&!ui(Xe,Ee);)Xe=Xe._parent;return Zt}function Be(Xe,ge,Ee,tt,pt,n){return Xe._project.removeOn(Ee),je=Ce=!1,he&&ze(he,null,Ee,tt,pt,n)||ge&&ge!==he&&!ge.isDescendant(he)&&ze(ge,null,Ee==="mousedrag"?"mousemove":Ee,tt,pt,n,he)||ze(Xe,he||ge||Xe,Ee,tt,pt,n)}var Ye={mousedown:{mousedown:1,mousedrag:1,click:1,doubleclick:1},mouseup:{mouseup:1,mousedrag:1,click:1,doubleclick:1},mousemove:{mousedrag:1,mousemove:1,mouseenter:1,mouseleave:1}};return{_viewEvents:we,_handleMouseEvent:function(Xe,ge,Ee){var tt=this._itemEvents,pt=tt.native[Xe],n=Xe==="mousemove",ce=this._scope.tool,Zt=this;function Jt(Rt){return tt.virtual[Rt]||Zt.responds(Rt)||ce&&ce.responds(Rt)}n&&D&&Jt("mousedrag")&&(Xe="mousedrag"),Ee||(Ee=this.getEventPoint(ge));var ui=this.getBounds().contains(Ee),Vt=pt&&ui&&Zt._project.hitTest(Ee,{tolerance:0,fill:!0,stroke:!0}),qt=Vt&&Vt.item||null,Ei=!1,Ai={};if(Ai[Xe.substr(5)]=!0,pt&&qt!==ne&&(ne&&ze(ne,null,"mouseleave",ge,Ee),qt&&ze(qt,null,"mouseenter",ge,Ee),ne=qt),Ue^ui&&(ze(this,null,ui?"mouseenter":"mouseleave",ge,Ee),Ei=!0),(ui||Ai.drag)&&!Ee.equals(ue)&&(Be(this,qt,n?Xe:"mousemove",ge,Ee,ue),Ei=!0),Ue=ui,Ai.down&&ui||Ai.up&&de){if(Be(this,qt,Xe,ge,Ee,de),Ai.down){if(Oe=qt===me&&Date.now()-pe<300,Y=me=qt,!je&&qt){for(var pi=qt;pi&&!pi.responds("mousedrag");)pi=pi._parent;pi&&(he=qt)}de=Ee}else Ai.up&&(!je&&qt===Y&&(pe=Date.now(),Be(this,qt,Oe?"doubleclick":"click",ge,Ee,de),Oe=!1),Y=he=null);Ue=!1,Ei=!0}ue=Ee,Ei&&ce&&(Ce=ce._handleMouseEvent(Xe,ge,Ee,Ai)||Ce),ge.cancelable!==!1&&(Ce&&!Ai.move||Ai.down&&Jt("mouseup"))&&ge.preventDefault()},_handleKeyEvent:function(Xe,ge,Ee,tt){var pt=this._scope,n=pt.tool,ce;function Zt(Jt){Jt.responds(Xe)&&(an=pt,Jt.emit(Xe,ce=ce||new zi(Xe,ge,Ee,tt)))}this.isVisible()&&(Zt(this),n&&n.responds(Xe)&&Zt(n))},_countItemEvent:function(Xe,ge){var Ee=this._itemEvents,tt=Ee.native,pt=Ee.virtual;for(var n in Ye)tt[n]=(tt[n]||0)+(Ye[n][Xe]||0)*ge;pt[Xe]=(pt[Xe]||0)+ge},statics:{updateFocus:K,_resetState:function(){D=U=Ce=Ue=!1,d=y=de=ue=Y=ne=he=me=pe=Oe=null}}}}),si=ni.extend({_class:"CanvasView",initialize:function(y,D){if(!(D instanceof r.HTMLCanvasElement)){var U=qe.read(arguments,1);if(U.isZero())throw new Error("Cannot create CanvasView with the provided argument: "+h.slice(arguments,1));D=Wi.getCanvas(U)}var Q=this._context=D.getContext("2d");if(Q.save(),this._pixelRatio=1,!/^off|false$/.test(o.getAttribute(D,"hidpi"))){var K=r.devicePixelRatio||1,ie=$t.getPrefixed(Q,"backingStorePixelRatio")||1;this._pixelRatio=K/ie}ni.call(this,y,D),this._needsUpdate=!0},remove:function d(){return this._context.restore(),d.base.call(this)},_setElementSize:function d(y,D){var U=this._pixelRatio;if(d.base.call(this,y*U,D*U),U!==1){var Q=this._element,K=this._context;if(!o.hasAttribute(Q,"resize")){var ie=Q.style;ie.width=y+"px",ie.height=D+"px"}K.restore(),K.save(),K.scale(U,U)}},getContext:function(){return this._context},getPixelSize:function d(y){var D=an.agent,U;if(D&&D.firefox)U=d.base.call(this,y);else{var Q=this._context,K=Q.font;Q.font=y+" serif",U=parseFloat(Q.font),Q.font=K}return U},getTextWidth:function(d,y){var D=this._context,U=D.font,Q=0;D.font=d;for(var K=0,ie=y.length;K<ie;K++)Q=Math.max(Q,D.measureText(y[K]).width);return D.font=U,Q},update:function(){if(!this._needsUpdate)return!1;var d=this._project,y=this._context,D=this._viewSize;return y.clearRect(0,0,D.width+1,D.height+1),d&&d.draw(y,this._matrix,this._pixelRatio),this._needsUpdate=!1,!0}}),Oi=h.extend({_class:"Event",initialize:function(y){this.event=y,this.type=y&&y.type},prevented:!1,stopped:!1,preventDefault:function(){this.prevented=!0,this.event.preventDefault()},stopPropagation:function(){this.stopped=!0,this.event.stopPropagation()},stop:function(){this.stopPropagation(),this.preventDefault()},getTimeStamp:function(){return this.event.timeStamp},getModifiers:function(){return oi.modifiers}}),zi=Oi.extend({_class:"KeyEvent",initialize:function(y,D,U,Q){this.type=y,this.event=D,this.key=U,this.character=Q},toString:function(){return"{ type: '"+this.type+"', key: '"+this.key+"', character: '"+this.character+"', modifiers: "+this.getModifiers()+" }"}}),oi=new function(){var d={"	":"tab"," ":"space","\b":"backspace","":"delete",Spacebar:"space",Del:"delete",Win:"meta",Esc:"escape"},y={tab:"	",space:" ",enter:"\r"},D={},U={},Q,K,ie=new h({shift:!1,control:!1,alt:!1,meta:!1,capsLock:!1,space:!1}).inject({option:{get:function(){return this.alt}},command:{get:function(){var ye=an&&an.agent;return ye&&ye.mac?this.meta:this.control}}});function Ae(ye){var Le=ye.key||ye.keyIdentifier;return Le=/^U\+/.test(Le)?String.fromCharCode(parseInt(Le.substr(2),16)):/^Arrow[A-Z]/.test(Le)?Le.substr(5):Le==="Unidentified"||Le===i?String.fromCharCode(ye.keyCode):Le,d[Le]||(Le.length>1?h.hyphenate(Le):Le.toLowerCase())}function fe(ye,Le,we,Te){var Ce=ni._focused,je;if(D[Le]=ye,ye?U[Le]=we:delete U[Le],Le.length>1&&(je=h.camelize(Le))in ie){ie[je]=ye;var Ne=an&&an.agent;if(je==="meta"&&Ne&&Ne.mac)if(ye)Q={};else{for(var Ue in Q)Ue in U&&fe(!1,Ue,Q[Ue],Te);Q=null}}else ye&&Q&&(Q[Le]=we);Ce&&Ce._handleKeyEvent(ye?"keydown":"keyup",Te,Le,we)}return Lt.add(c,{keydown:function(ye){var Le=Ae(ye),we=an&&an.agent;Le.length>1||we&&we.chrome&&(ye.altKey||we.mac&&ye.metaKey||!we.mac&&ye.ctrlKey)?fe(!0,Le,y[Le]||(Le.length>1?"":Le),ye):K=Le},keypress:function(ye){if(K){var Le=Ae(ye),we=ye.charCode,Te=we>=32?String.fromCharCode(we):Le.length>1?"":Le;Le!==K&&(Le=Te.toLowerCase()),fe(!0,Le,Te,ye),K=null}},keyup:function(ye){var Le=Ae(ye);Le in U&&fe(!1,Le,U[Le],ye)}}),Lt.add(r,{blur:function(ye){for(var Le in U)fe(!1,Le,U[Le],ye)}}),{modifiers:ie,isDown:function(ye){return!!D[ye]}}},$i=Oi.extend({_class:"MouseEvent",initialize:function(y,D,U,Q,K){this.type=y,this.event=D,this.point=U,this.target=Q,this.delta=K},toString:function(){return"{ type: '"+this.type+"', point: "+this.point+", target: "+this.target+(this.delta?", delta: "+this.delta:"")+", modifiers: "+this.getModifiers()+" }"}}),ki=Oi.extend({_class:"ToolEvent",_item:null,initialize:function(y,D,U){this.tool=y,this.type=D,this.event=U},_choosePoint:function(d,y){return d||(y?y.clone():null)},getPoint:function(){return this._choosePoint(this._point,this.tool._point)},setPoint:function(d){this._point=d},getLastPoint:function(){return this._choosePoint(this._lastPoint,this.tool._lastPoint)},setLastPoint:function(d){this._lastPoint=d},getDownPoint:function(){return this._choosePoint(this._downPoint,this.tool._downPoint)},setDownPoint:function(d){this._downPoint=d},getMiddlePoint:function(){return!this._middlePoint&&this.tool._lastPoint?this.tool._point.add(this.tool._lastPoint).divide(2):this._middlePoint},setMiddlePoint:function(d){this._middlePoint=d},getDelta:function(){return!this._delta&&this.tool._lastPoint?this.tool._point.subtract(this.tool._lastPoint):this._delta},setDelta:function(d){this._delta=d},getCount:function(){return this.tool[/^mouse(down|up)$/.test(this.type)?"_downCount":"_moveCount"]},setCount:function(d){this.tool[/^mouse(down|up)$/.test(this.type)?"downCount":"count"]=d},getItem:function(){if(!this._item){var d=this.tool._scope.project.hitTest(this.getPoint());if(d){for(var y=d.item,D=y._parent;/^(Group|CompoundPath)$/.test(D._class);)y=D,D=D._parent;this._item=y}}return this._item},setItem:function(d){this._item=d},toString:function(){return"{ type: "+this.type+", point: "+this.getPoint()+", count: "+this.getCount()+", modifiers: "+this.getModifiers()+" }"}}),sn=k.extend({_class:"Tool",_list:"tools",_reference:"tool",_events:["onMouseDown","onMouseUp","onMouseDrag","onMouseMove","onActivate","onDeactivate","onEditOptions","onKeyDown","onKeyUp"],initialize:function(y){k.call(this),this._moveCount=-1,this._downCount=-1,this.set(y)},getMinDistance:function(){return this._minDistance},setMinDistance:function(d){this._minDistance=d,d!=null&&this._maxDistance!=null&&d>this._maxDistance&&(this._maxDistance=d)},getMaxDistance:function(){return this._maxDistance},setMaxDistance:function(d){this._maxDistance=d,this._minDistance!=null&&d!=null&&d<this._minDistance&&(this._minDistance=d)},getFixedDistance:function(){return this._minDistance==this._maxDistance?this._minDistance:null},setFixedDistance:function(d){this._minDistance=this._maxDistance=d},_handleMouseEvent:function(d,y,D,U){an=this._scope,U.drag&&!this.responds(d)&&(d="mousemove");var Q=U.move||U.drag,K=this.responds(d),ie=this.minDistance,Ae=this.maxDistance,fe=!1,ye=this;function Le(Te,Ce){var je=D,Ne=Q?ye._point:ye._downPoint||je;if(Q){if(ye._moveCount>=0&&je.equals(Ne))return!1;if(Ne&&(Te!=null||Ce!=null)){var Ue=je.subtract(Ne),de=Ue.getLength();if(de<(Te||0))return!1;Ce&&(je=Ne.add(Ue.normalize(Math.min(de,Ce))))}ye._moveCount++}return ye._point=je,ye._lastPoint=Ne||je,U.down&&(ye._moveCount=-1,ye._downPoint=je,ye._downCount++),!0}function we(){K&&(fe=ye.emit(d,new ki(ye,d,y))||fe)}if(U.down)Le(),we();else if(U.up)Le(null,Ae),we();else if(K)for(;Le(ie,Ae);)we();return fe}}),ar=h.extend(v,{_class:"Tween",statics:{easings:new h({linear:function(d){return d},easeInQuad:function(d){return d*d},easeOutQuad:function(d){return d*(2-d)},easeInOutQuad:function(d){return d<.5?2*d*d:-1+2*(2-d)*d},easeInCubic:function(d){return d*d*d},easeOutCubic:function(d){return--d*d*d+1},easeInOutCubic:function(d){return d<.5?4*d*d*d:(d-1)*(2*d-2)*(2*d-2)+1},easeInQuart:function(d){return d*d*d*d},easeOutQuart:function(d){return 1- --d*d*d*d},easeInOutQuart:function(d){return d<.5?8*d*d*d*d:1-8*--d*d*d*d},easeInQuint:function(d){return d*d*d*d*d},easeOutQuint:function(d){return 1+--d*d*d*d*d},easeInOutQuint:function(d){return d<.5?16*d*d*d*d*d:1+16*--d*d*d*d*d}})},initialize:function d(y,D,U,Q,K,ie){this.object=y;var Ae=typeof K,fe=Ae==="function";this.type=fe?Ae:Ae==="string"?K:"linear",this.easing=fe?K:d.easings[this.type],this.duration=Q,this.running=!1,this._then=null,this._startTime=null;var ye=D||U;this._keys=ye?Object.keys(ye):[],this._parsedKeys=this._parseKeys(this._keys),this._from=ye&&this._getState(D),this._to=ye&&this._getState(U),ie!==!1&&this.start()},then:function(d){return this._then=d,this},start:function(){return this._startTime=null,this.running=!0,this},stop:function(){return this.running=!1,this},update:function(d){if(this.running){d>=1&&(d=1,this.running=!1);for(var y=this.easing(d),D=this._keys,U=function(Le){return typeof Le=="function"?Le(y,d):Le},Q=0,K=D&&D.length;Q<K;Q++){var ie=D[Q],Ae=U(this._from[ie]),fe=U(this._to[ie]),ye=Ae&&fe&&Ae.__add&&fe.__add?fe.__subtract(Ae).__multiply(y).__add(Ae):(fe-Ae)*y+Ae;this._setProperty(this._parsedKeys[ie],ye)}this.responds("update")&&this.emit("update",new h({progress:d,factor:y})),!this.running&&this._then&&this._then(this.object)}return this},_events:{onUpdate:{}},_handleFrame:function(d){var y=this._startTime,D=y?(d-y)/this.duration:0;y||(this._startTime=d),this.update(D)},_getState:function(d){for(var y=this._keys,D={},U=0,Q=y.length;U<Q;U++){var K=y[U],ie=this._parsedKeys[K],Ae=this._getProperty(ie),fe;if(d){var ye=this._resolveValue(Ae,d[K]);this._setProperty(ie,ye),fe=this._getProperty(ie),fe=fe&&fe.clone?fe.clone():fe,this._setProperty(ie,Ae)}else fe=Ae&&Ae.clone?Ae.clone():Ae;D[K]=fe}return D},_resolveValue:function(d,y){if(y){if(Array.isArray(y)&&y.length===2){var D=y[0];return D&&D.match&&D.match(/^[+\-\*\/]=/)?this._calculate(d,D[0],y[1]):y}else if(typeof y=="string"){var U=y.match(/^[+\-*/]=(.*)/);if(U){var Q=JSON.parse(U[1].replace(/(['"])?([a-zA-Z0-9_]+)(['"])?:/g,'"$2": '));return this._calculate(d,y[0],Q)}}}return y},_calculate:function(d,y,D){return an.PaperScript.calculateBinary(d,y,D)},_parseKeys:function(d){for(var y={},D=0,U=d.length;D<U;D++){var Q=d[D],K=Q.replace(/\.([^.]*)/g,"/$1").replace(/\[['"]?([^'"\]]*)['"]?\]/g,"/$1");y[Q]=K.split("/")}return y},_getProperty:function(d,y){for(var D=this.object,U=0,Q=d.length-(y||0);U<Q&&D;U++)D=D[d[U]];return D},_setProperty:function(d,y){var D=this._getProperty(d,1);D&&(D[d[d.length-1]]=y)}}),ti={request:function(d){var y=new t.XMLHttpRequest;return y.open((d.method||"get").toUpperCase(),d.url,h.pick(d.async,!0)),d.mimeType&&y.overrideMimeType(d.mimeType),y.onload=function(){var D=y.status;D===0||D===200?d.onLoad&&d.onLoad.call(y,y.responseText):y.onerror()},y.onerror=function(){var D=y.status,U='Could not load "'+d.url+'" (Status: '+D+")";if(d.onError)d.onError(U,D);else throw new Error(U)},y.send(null)}},Wi=h.exports.CanvasProvider={canvases:[],getCanvas:function(d,y,D){if(!r)return null;var U,Q=!0;typeof d=="object"&&(y=d.height,d=d.width),this.canvases.length?U=this.canvases.pop():(U=c.createElement("canvas"),Q=!1);var K=U.getContext("2d",D||{});if(!K)throw new Error("Canvas "+U+" is unable to provide a 2D context.");return U.width===d&&U.height===y?Q&&K.clearRect(0,0,d+1,y+1):(U.width=d,U.height=y),K.save(),U},getContext:function(d,y,D){var U=this.getCanvas(d,y,D);return U?U.getContext("2d",D||{}):null},release:function(d){var y=d&&d.canvas?d.canvas:d;y&&y.getContext&&(y.getContext("2d").restore(),this.canvases.push(y))}},ir=new function(){var d=Math.min,y=Math.max,D=Math.abs,U,Q,K,ie,Ae,fe,ye,Le,we,Te,Ce;function je(he,me,pe){return .2989*he+.587*me+.114*pe}function Ne(he,me,pe,Be){var ze=Be-je(he,me,pe);we=he+ze,Te=me+ze,Ce=pe+ze;var Be=je(we,Te,Ce),Ye=d(we,Te,Ce),Xe=y(we,Te,Ce);if(Ye<0){var ge=Be-Ye;we=Be+(we-Be)*Be/ge,Te=Be+(Te-Be)*Be/ge,Ce=Be+(Ce-Be)*Be/ge}if(Xe>255){var Ee=255-Be,tt=Xe-Be;we=Be+(we-Be)*Ee/tt,Te=Be+(Te-Be)*Ee/tt,Ce=Be+(Ce-Be)*Ee/tt}}function Ue(he,me,pe){return y(he,me,pe)-d(he,me,pe)}function de(he,me,pe,Oe){var ze=[he,me,pe],Be=y(he,me,pe),Ye=d(he,me,pe),Xe;Ye=Ye===he?0:Ye===me?1:2,Be=Be===he?0:Be===me?1:2,Xe=d(Ye,Be)===0?y(Ye,Be)===1?2:1:0,ze[Be]>ze[Ye]?(ze[Xe]=(ze[Xe]-ze[Ye])*Oe/(ze[Be]-ze[Ye]),ze[Be]=Oe):ze[Xe]=ze[Be]=0,ze[Ye]=0,we=ze[0],Te=ze[1],Ce=ze[2]}var ue={multiply:function(){we=Ae*U/255,Te=fe*Q/255,Ce=ye*K/255},screen:function(){we=Ae+U-Ae*U/255,Te=fe+Q-fe*Q/255,Ce=ye+K-ye*K/255},overlay:function(){we=Ae<128?2*Ae*U/255:255-2*(255-Ae)*(255-U)/255,Te=fe<128?2*fe*Q/255:255-2*(255-fe)*(255-Q)/255,Ce=ye<128?2*ye*K/255:255-2*(255-ye)*(255-K)/255},"soft-light":function(){var he=U*Ae/255;we=he+Ae*(255-(255-Ae)*(255-U)/255-he)/255,he=Q*fe/255,Te=he+fe*(255-(255-fe)*(255-Q)/255-he)/255,he=K*ye/255,Ce=he+ye*(255-(255-ye)*(255-K)/255-he)/255},"hard-light":function(){we=U<128?2*U*Ae/255:255-2*(255-U)*(255-Ae)/255,Te=Q<128?2*Q*fe/255:255-2*(255-Q)*(255-fe)/255,Ce=K<128?2*K*ye/255:255-2*(255-K)*(255-ye)/255},"color-dodge":function(){we=Ae===0?0:U===255?255:d(255,255*Ae/(255-U)),Te=fe===0?0:Q===255?255:d(255,255*fe/(255-Q)),Ce=ye===0?0:K===255?255:d(255,255*ye/(255-K))},"color-burn":function(){we=Ae===255?255:U===0?0:y(0,255-(255-Ae)*255/U),Te=fe===255?255:Q===0?0:y(0,255-(255-fe)*255/Q),Ce=ye===255?255:K===0?0:y(0,255-(255-ye)*255/K)},darken:function(){we=Ae<U?Ae:U,Te=fe<Q?fe:Q,Ce=ye<K?ye:K},lighten:function(){we=Ae>U?Ae:U,Te=fe>Q?fe:Q,Ce=ye>K?ye:K},difference:function(){we=Ae-U,we<0&&(we=-we),Te=fe-Q,Te<0&&(Te=-Te),Ce=ye-K,Ce<0&&(Ce=-Ce)},exclusion:function(){we=Ae+U*(255-Ae-Ae)/255,Te=fe+Q*(255-fe-fe)/255,Ce=ye+K*(255-ye-ye)/255},hue:function(){de(U,Q,K,Ue(Ae,fe,ye)),Ne(we,Te,Ce,je(Ae,fe,ye))},saturation:function(){de(Ae,fe,ye,Ue(U,Q,K)),Ne(we,Te,Ce,je(Ae,fe,ye))},luminosity:function(){Ne(Ae,fe,ye,je(U,Q,K))},color:function(){Ne(U,Q,K,je(Ae,fe,ye))},add:function(){we=d(Ae+U,255),Te=d(fe+Q,255),Ce=d(ye+K,255)},subtract:function(){we=y(Ae-U,0),Te=y(fe-Q,0),Ce=y(ye-K,0)},average:function(){we=(Ae+U)/2,Te=(fe+Q)/2,Ce=(ye+K)/2},negation:function(){we=255-D(255-U-Ae),Te=255-D(255-Q-fe),Ce=255-D(255-K-ye)}},Y=this.nativeModes=h.each(["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","darker","copy","xor"],function(he){this[he]=!0},{}),ne=Wi.getContext(1,1,{willReadFrequently:!0});ne&&(h.each(ue,function(he,me){var pe=me==="darken",Oe=!1;ne.save();try{ne.fillStyle=pe?"#300":"#a00",ne.fillRect(0,0,1,1),ne.globalCompositeOperation=me,ne.globalCompositeOperation===me&&(ne.fillStyle=pe?"#a00":"#300",ne.fillRect(0,0,1,1),Oe=ne.getImageData(0,0,1,1).data[0]!==pe?170:51)}catch{}ne.restore(),Y[me]=Oe}),Wi.release(ne)),this.process=function(he,me,pe,Oe,ze){var Be=me.canvas,Ye=he==="normal";if(Ye||Y[he])pe.save(),pe.setTransform(1,0,0,1,0,0),pe.globalAlpha=Oe,Ye||(pe.globalCompositeOperation=he),pe.drawImage(Be,ze.x,ze.y),pe.restore();else{var Xe=ue[he];if(!Xe)return;for(var ge=pe.getImageData(ze.x,ze.y,Be.width,Be.height),Ee=ge.data,tt=me.getImageData(0,0,Be.width,Be.height).data,pt=0,n=Ee.length;pt<n;pt+=4){U=tt[pt],Ae=Ee[pt],Q=tt[pt+1],fe=Ee[pt+1],K=tt[pt+2],ye=Ee[pt+2],ie=tt[pt+3],Le=Ee[pt+3],Xe();var ce=ie*Oe/255,Zt=1-ce;Ee[pt]=ce*we+Zt*Ae,Ee[pt+1]=ce*Te+Zt*fe,Ee[pt+2]=ce*Ce+Zt*ye,Ee[pt+3]=ie*Oe+Zt*Le}pe.putImageData(ge,ze.x,ze.y)}}},gn=new function(){var d="http://www.w3.org/2000/svg",y="http://www.w3.org/2000/xmlns",D="http://www.w3.org/1999/xlink",U={href:D,xlink:y,xmlns:y+"/","xmlns:xlink":y+"/"};function Q(Ae,fe,ye){return ie(c.createElementNS(d,Ae),fe,ye)}function K(Ae,fe){var ye=U[fe],Le=ye?Ae.getAttributeNS(ye,fe):Ae.getAttribute(fe);return Le==="null"?null:Le}function ie(Ae,fe,ye){for(var Le in fe){var we=fe[Le],Te=U[Le];typeof we=="number"&&ye&&(we=ye.number(we)),Te?Ae.setAttributeNS(Te,Le,we):Ae.setAttribute(Le,we)}return Ae}return{svg:d,xmlns:y,xlink:D,create:Q,get:K,set:ie}},kn=h.each({fillColor:["fill","color"],fillRule:["fill-rule","string"],strokeColor:["stroke","color"],strokeWidth:["stroke-width","number"],strokeCap:["stroke-linecap","string"],strokeJoin:["stroke-linejoin","string"],strokeScaling:["vector-effect","lookup",{true:"none",false:"non-scaling-stroke"},function(d,y){return!y&&(d instanceof dt||d instanceof Je||d instanceof Ti)}],miterLimit:["stroke-miterlimit","number"],dashArray:["stroke-dasharray","array"],dashOffset:["stroke-dashoffset","number"],fontFamily:["font-family","string"],fontWeight:["font-weight","string"],fontSize:["font-size","number"],justification:["text-anchor","lookup",{left:"start",center:"middle",right:"end"}],opacity:["opacity","number"],blendMode:["mix-blend-mode","style"]},function(d,y){var D=h.capitalize(y),U=d[2];this[y]={type:d[1],property:y,attribute:d[0],toSVG:U,fromSVG:U&&h.each(U,function(Q,K){this[Q]=K},{}),exportFilter:d[3],get:"get"+D,set:"set"+D}},{});new function(){var d;function y(ue,Y,ne){var he=new h,me=ue.getTranslation();if(Y){var pe;ue.isInvertible()?(ue=ue._shiftless(),pe=ue._inverseTransform(me),me=null):pe=new se,he[ne?"cx":"x"]=pe.x,he[ne?"cy":"y"]=pe.y}if(!ue.isIdentity()){var Oe=ue.decompose();if(Oe){var ze=[],Be=Oe.rotation,Ye=Oe.scaling,Xe=Oe.skewing;me&&!me.isZero()&&ze.push("translate("+d.point(me)+")"),Be&&ze.push("rotate("+d.number(Be)+")"),(!J.isZero(Ye.x-1)||!J.isZero(Ye.y-1))&&ze.push("scale("+d.point(Ye)+")"),Xe.x&&ze.push("skewX("+d.number(Xe.x)+")"),Xe.y&&ze.push("skewY("+d.number(Xe.y)+")"),he.transform=ze.join(" ")}else he.transform="matrix("+ue.getValues().join(",")+")"}return he}function D(ue,Y){for(var ne=y(ue._matrix),he=ue._children,me=gn.create("g",ne,d),pe=0,Oe=he.length;pe<Oe;pe++){var ze=he[pe],Be=Ue(ze,Y);if(Be)if(ze.isClipMask()){var Ye=gn.create("clipPath");Ye.appendChild(Be),je(ze,Ye,"clip"),gn.set(me,{"clip-path":"url(#"+Ye.id+")"})}else me.appendChild(Be)}return me}function U(ue,Y){var ne=y(ue._matrix,!0),he=ue.getSize(),me=ue.getImage();return ne.x-=he.width/2,ne.y-=he.height/2,ne.width=he.width,ne.height=he.height,ne.href=Y.embedImages==!1&&me&&me.src||ue.toDataURL(),gn.create("image",ne,d)}function Q(ue,Y){var ne=Y.matchShapes;if(ne){var he=ue.toShape(!1);if(he)return K(he)}var me=ue._segments,pe=me.length,Oe,ze=y(ue._matrix);if(ne&&pe>=2&&!ue.hasHandles())if(pe>2){Oe=ue._closed?"polygon":"polyline";for(var Be=[],Ye=0;Ye<pe;Ye++)Be.push(d.point(me[Ye]._point));ze.points=Be.join(" ")}else{Oe="line";var Xe=me[0]._point,ge=me[1]._point;ze.set({x1:Xe.x,y1:Xe.y,x2:ge.x,y2:ge.y})}else Oe="path",ze.d=ue.getPathData(null,Y.precision);return gn.create(Oe,ze,d)}function K(ue){var Y=ue._type,ne=ue._radius,he=y(ue._matrix,!0,Y!=="rectangle");if(Y==="rectangle"){Y="rect";var me=ue._size,pe=me.width,Oe=me.height;he.x-=pe/2,he.y-=Oe/2,he.width=pe,he.height=Oe,ne.isZero()&&(ne=null)}return ne&&(Y==="circle"?he.r=ne:(he.rx=ne.width,he.ry=ne.height)),gn.create(Y,he,d)}function ie(ue,Y){var ne=y(ue._matrix),he=ue.getPathData(null,Y.precision);return he&&(ne.d=he),gn.create("path",ne,d)}function Ae(ue,Y){var ne=y(ue._matrix,!0),he=ue._definition,me=Ce(he,"symbol"),pe=he._item,Oe=pe.getStrokeBounds();return me||(me=gn.create("symbol",{viewBox:d.rectangle(Oe)}),me.appendChild(Ue(pe,Y)),je(he,me,"symbol")),ne.href="#"+me.id,ne.x+=Oe.x,ne.y+=Oe.y,ne.width=Oe.width,ne.height=Oe.height,ne.overflow="visible",gn.create("use",ne,d)}function fe(ue){var Y=Ce(ue,"color");if(!Y){var ne=ue.getGradient(),he=ne._radial,me=ue.getOrigin(),pe=ue.getDestination(),Oe;if(he){Oe={cx:me.x,cy:me.y,r:me.getDistance(pe)};var ze=ue.getHighlight();ze&&(Oe.fx=ze.x,Oe.fy=ze.y)}else Oe={x1:me.x,y1:me.y,x2:pe.x,y2:pe.y};Oe.gradientUnits="userSpaceOnUse",Y=gn.create((he?"radial":"linear")+"Gradient",Oe,d);for(var Be=ne._stops,Ye=0,Xe=Be.length;Ye<Xe;Ye++){var ge=Be[Ye],Ee=ge._color,tt=Ee.getAlpha(),pt=ge._offset;Oe={offset:pt??Ye/(Xe-1)},Ee&&(Oe["stop-color"]=Ee.toCSS(!0)),tt<1&&(Oe["stop-opacity"]=tt),Y.appendChild(gn.create("stop",Oe,d))}je(ue,Y,"color")}return"url(#"+Y.id+")"}function ye(ue){var Y=gn.create("text",y(ue._matrix,!0),d);return Y.textContent=ue._content,Y}var Le={Group:D,Layer:D,Raster:U,Path:Q,Shape:K,CompoundPath:ie,SymbolItem:Ae,PointText:ye};function we(ue,Y,ne){var he={},me=!ne&&ue.getParent(),pe=[];return ue._name!=null&&(he.id=ue._name),h.each(kn,function(Oe){var ze=Oe.get,Be=Oe.type,Ye=ue[ze]();if(Oe.exportFilter?Oe.exportFilter(ue,Ye):!me||!h.equals(me[ze](),Ye)){if(Be==="color"&&Ye!=null){var Xe=Ye.getAlpha();Xe<1&&(he[Oe.attribute+"-opacity"]=Xe)}Be==="style"?pe.push(Oe.attribute+": "+Ye):he[Oe.attribute]=Ye==null?"none":Be==="color"?Ye.gradient?fe(Ye):Ye.toCSS(!0):Be==="array"?Ye.join(","):Be==="lookup"?Oe.toSVG[Ye]:Ye}}),pe.length&&(he.style=pe.join(";")),he.opacity===1&&delete he.opacity,ue._visible||(he.visibility="hidden"),gn.set(Y,he,d)}var Te;function Ce(ue,Y){return Te||(Te={ids:{},svgs:{}}),ue&&Te.svgs[Y+"-"+(ue._id||ue.__id||(ue.__id=oe.get("svg")))]}function je(ue,Y,ne){Te||Ce();var he=Te.ids[ne]=(Te.ids[ne]||0)+1;Y.id=ne+"-"+he,Te.svgs[ne+"-"+(ue._id||ue.__id)]=Y}function Ne(ue,Y){var ne=ue,he=null;if(Te){ne=ue.nodeName.toLowerCase()==="svg"&&ue;for(var me in Te.svgs)he||(ne||(ne=gn.create("svg"),ne.appendChild(ue)),he=ne.insertBefore(gn.create("defs"),ne.firstChild)),he.appendChild(Te.svgs[me]);Te=null}return Y.asString?new t.XMLSerializer().serializeToString(ne):ne}function Ue(ue,Y,ne){var he=Le[ue._class],me=he&&he(ue,Y);if(me){var pe=Y.onExport;pe&&(me=pe(ue,me,Y)||me);var Oe=JSON.stringify(ue._data);Oe&&Oe!=="{}"&&Oe!=="null"&&me.setAttribute("data-paper-data",Oe)}return me&&we(ue,me,ne)}function de(ue){return ue||(ue={}),d=new j(ue.precision),ue}xe.inject({exportSVG:function(ue){return ue=de(ue),Ne(Ue(this,ue,!0),ue)}}),yt.inject({exportSVG:function(ue){ue=de(ue);var Y=this._children,ne=this.getView(),he=h.pick(ue.bounds,"view"),me=ue.matrix||he==="view"&&ne._matrix,pe=me&&ct.read([me]),Oe=he==="view"?new Qe([0,0],ne.getViewSize()):he==="content"?xe._getBounds(Y,pe,{stroke:!0}).rect:Qe.read([he],0,{readNull:!0}),ze={version:"1.1",xmlns:gn.svg,"xmlns:xlink":gn.xlink};Oe&&(ze.width=Oe.width,ze.height=Oe.height,(Oe.x||Oe.x===0||Oe.y||Oe.y===0)&&(ze.viewBox=d.rectangle(Oe)));var Be=gn.create("svg",ze,d),Ye=Be;pe&&!pe.isIdentity()&&(Ye=Be.appendChild(gn.create("g",y(pe),d)));for(var Xe=0,ge=Y.length;Xe<ge;Xe++)Ye.appendChild(Ue(Y[Xe],ue,!0));return Ne(Be,ue)}})},new function(){var d={},y;function D(Y,ne,he,me,pe,Oe){var ze=gn.get(Y,ne)||Oe,Be=ze==null?me?null:he?"":0:he?ze:parseFloat(ze);return/%\s*$/.test(ze)?Be/100*(pe?1:y[/x|^width/.test(ne)?"width":"height"]):Be}function U(Y,ne,he,me,pe,Oe,ze){return ne=D(Y,ne||"x",!1,me,pe,Oe),he=D(Y,he||"y",!1,me,pe,ze),me&&(ne==null||he==null)?null:new se(ne,he)}function Q(Y,ne,he,me,pe){return ne=D(Y,ne||"width",!1,me,pe),he=D(Y,he||"height",!1,me,pe),me&&(ne==null||he==null)?null:new qe(ne,he)}function K(Y,ne,he){return Y==="none"?null:ne==="number"?parseFloat(Y):ne==="array"?Y?Y.split(/[\s,]+/g).map(parseFloat):[]:ne==="color"?Ue(Y)||Y:ne==="lookup"?he[Y]:Y}function ie(Y,ne,he,me){var pe=Y.childNodes,Oe=ne==="clippath",ze=ne==="defs",Be=new Gt,Ye=Be._project,Xe=Ye._currentStyle,ge=[];if(!Oe&&!ze&&(Be=Ne(Be,Y,me),Ye._currentStyle=Be._style.clone()),me)for(var Ee=Y.querySelectorAll("defs"),tt=0,pt=Ee.length;tt<pt;tt++)de(Ee[tt],he,!1);for(var tt=0,pt=pe.length;tt<pt;tt++){var n=pe[tt],ce;n.nodeType===1&&!/^defs$/i.test(n.nodeName)&&(ce=de(n,he,!1))&&!(ce instanceof ut)&&ge.push(ce)}return Be.addChildren(ge),Oe&&(Be=Ne(Be.reduce(),Y,me)),Ye._currentStyle=Xe,(Oe||ze)&&(Be.remove(),Be=null),Be}function Ae(Y,ne){for(var he=Y.getAttribute("points").match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g),me=[],pe=0,Oe=he.length;pe<Oe;pe+=2)me.push(new se(parseFloat(he[pe]),parseFloat(he[pe+1])));var ze=new _t(me);return ne==="polygon"&&ze.closePath(),ze}function fe(Y){return dt.create(Y.getAttribute("d"))}function ye(Y,ne){var he=(D(Y,"href",!0)||"").substring(1),me=ne==="radialgradient",pe;if(he)pe=d[he].getGradient(),pe._radial^me&&(pe=pe.clone(),pe._radial=me);else{for(var Oe=Y.childNodes,ze=[],Be=0,Ye=Oe.length;Be<Ye;Be++){var Xe=Oe[Be];Xe.nodeType===1&&ze.push(Ne(new Wt,Xe))}pe=new mi(ze,me)}var ge,Ee,tt,pt=D(Y,"gradientUnits",!0)!=="userSpaceOnUse";me?(ge=U(Y,"cx","cy",!1,pt,"50%","50%"),Ee=ge.add(D(Y,"r",!1,!1,pt,"50%"),0),tt=U(Y,"fx","fy",!0,pt)):(ge=U(Y,"x1","y1",!1,pt,"0%","0%"),Ee=U(Y,"x2","y2",!1,pt,"100%","0%"));var n=Ne(new wi(pe,ge,Ee,tt),Y);return n._scaleToBounds=pt,null}var Le={"#document":function(Y,ne,he,me){for(var pe=Y.childNodes,Oe=0,ze=pe.length;Oe<ze;Oe++){var Be=pe[Oe];if(Be.nodeType===1)return de(Be,he,me)}},g:ie,svg:ie,clippath:ie,polygon:Ae,polyline:Ae,path:fe,lineargradient:ye,radialgradient:ye,image:function(Y){var ne=new et(D(Y,"href",!0));return ne.on("load",function(){var he=Q(Y);this.setSize(he);var me=U(Y).add(he.divide(2));this._matrix.append(new ct().translate(me))}),ne},symbol:function(Y,ne,he,me){return new ut(ie(Y,ne,he,me),!0)},defs:ie,use:function(Y){var ne=(D(Y,"href",!0)||"").substring(1),he=d[ne],me=U(Y);return he?he instanceof ut?he.place(me):he.clone().translate(me):null},circle:function(Y){return new Je.Circle(U(Y,"cx","cy"),D(Y,"r"))},ellipse:function(Y){return new Je.Ellipse({center:U(Y,"cx","cy"),radius:Q(Y,"rx","ry")})},rect:function(Y){return new Je.Rectangle(new Qe(U(Y),Q(Y)),Q(Y,"rx","ry"))},line:function(Y){return new _t.Line(U(Y,"x1","y1"),U(Y,"x2","y2"))},text:function(Y){var ne=new Vi(U(Y).add(U(Y,"dx","dy")));return ne.setContent(Y.textContent.trim()||""),ne},switch:ie};function we(Y,ne,he,me){if(Y.transform){for(var pe=(me.getAttribute(he)||"").split(/\)\s*/g),Oe=new ct,ze=0,Be=pe.length;ze<Be;ze++){var Ye=pe[ze];if(!Ye)break;for(var Xe=Ye.split(/\(\s*/),ge=Xe[0],Ee=Xe[1].split(/[\s,]+/g),tt=0,pt=Ee.length;tt<pt;tt++)Ee[tt]=parseFloat(Ee[tt]);switch(ge){case"matrix":Oe.append(new ct(Ee[0],Ee[1],Ee[2],Ee[3],Ee[4],Ee[5]));break;case"rotate":Oe.rotate(Ee[0],Ee[1]||0,Ee[2]||0);break;case"translate":Oe.translate(Ee[0],Ee[1]||0);break;case"scale":Oe.scale(Ee);break;case"skewX":Oe.skew(Ee[0],0);break;case"skewY":Oe.skew(0,Ee[0]);break}}Y.transform(Oe)}}function Te(Y,ne,he){var me=he==="fill-opacity"?"getFillColor":"getStrokeColor",pe=Y[me]&&Y[me]();pe&&pe.setAlpha(parseFloat(ne))}var Ce=h.set(h.each(kn,function(Y){this[Y.attribute]=function(ne,he){if(ne[Y.set]&&(ne[Y.set](K(he,Y.type,Y.fromSVG)),Y.type==="color")){var me=ne[Y.get]();if(me&&me._scaleToBounds){var pe=ne.getBounds();me.transform(new ct().translate(pe.getPoint()).scale(pe.getSize()))}}}},{}),{id:function(Y,ne){d[ne]=Y,Y.setName&&Y.setName(ne)},"clip-path":function(Y,ne){var he=Ue(ne);if(he)if(he=he.clone(),he.setClipMask(!0),Y instanceof Gt)Y.insertChild(0,he);else return new Gt(he,Y)},gradientTransform:we,transform:we,"fill-opacity":Te,"stroke-opacity":Te,visibility:function(Y,ne){Y.setVisible&&Y.setVisible(ne==="visible")},display:function(Y,ne){Y.setVisible&&Y.setVisible(ne!==null)},"stop-color":function(Y,ne){Y.setColor&&Y.setColor(ne)},"stop-opacity":function(Y,ne){Y._color&&Y._color.setAlpha(parseFloat(ne))},offset:function(Y,ne){if(Y.setOffset){var he=ne.match(/(.*)%$/);Y.setOffset(he?he[1]/100:parseFloat(ne))}},viewBox:function(Y,ne,he,me,pe){var Oe=new Qe(K(ne,"array")),ze=Q(me,null,null,!0),Be,Ye;if(Y instanceof Gt){var Xe=ze?ze.divide(Oe.getSize()):1,Ye=new ct().scale(Xe).translate(Oe.getPoint().negate());Be=Y}else Y instanceof ut&&(ze&&Oe.setSize(ze),Be=Y._item);if(Be){if(je(me,"overflow",pe)!=="visible"){var ge=new Je.Rectangle(Oe);ge.setClipMask(!0),Be.addChild(ge)}Ye&&Be.transform(Ye)}}});function je(Y,ne,he){var me=Y.attributes[ne],pe=me&&me.value;if(!pe&&Y.style){var Oe=h.camelize(ne);pe=Y.style[Oe],!pe&&he.node[Oe]!==he.parent[Oe]&&(pe=he.node[Oe])}return pe?pe==="none"?null:pe:i}function Ne(Y,ne,he){var me=ne.parentNode,pe={node:$t.getStyles(ne)||{},parent:!he&&!/^defs$/i.test(me.tagName)&&$t.getStyles(me)||{}};return h.each(Ce,function(Oe,ze){var Be=je(ne,ze,pe);Y=Be!==i&&Oe(Y,Be,ze,ne,pe)||Y}),Y}function Ue(Y){var ne=Y&&Y.match(/\((?:["'#]*)([^"')]+)/),he=ne&&ne[1],me=he&&d[r?he.replace(r.location.href.split("#")[0]+"#",""):he];return me&&me._scaleToBounds&&(me=me.clone(),me._scaleToBounds=!0),me}function de(Y,ne,he){var me=Y.nodeName.toLowerCase(),pe=me!=="#document",Oe=c.body,ze,Be,Ye;he&&pe&&(y=an.getView().getSize(),y=Q(Y,null,null,!0)||y,ze=gn.create("svg",{style:"stroke-width: 1px; stroke-miterlimit: 10"}),Be=Y.parentNode,Ye=Y.nextSibling,ze.appendChild(Y),Oe.appendChild(ze));var Xe=an.settings,ge=Xe.applyMatrix,Ee=Xe.insertItems;Xe.applyMatrix=!1,Xe.insertItems=!1;var tt=Le[me],pt=tt&&tt(Y,me,ne,he)||null;if(Xe.insertItems=Ee,Xe.applyMatrix=ge,pt){pe&&!(pt instanceof Gt)&&(pt=Ne(pt,Y,he));var n=ne.onImport,ce=pe&&Y.getAttribute("data-paper-data");n&&(pt=n(Y,pt,ne)||pt),ne.expandShapes&&pt instanceof Je&&(pt.remove(),pt=pt.toPath()),ce&&(pt._data=JSON.parse(ce))}return ze&&(Oe.removeChild(ze),Be&&(Ye?Be.insertBefore(Y,Ye):Be.appendChild(Y))),he&&(d={},pt&&h.pick(ne.applyMatrix,ge)&&pt.matrix.apply(!0,!0)),pt}function ue(Y,ne,he){if(!Y)return null;ne=typeof ne=="function"?{onLoad:ne}:ne||{};var me=an,pe=null;function Oe(Xe){try{var ge=typeof Xe=="object"?Xe:new t.DOMParser().parseFromString(Xe.trim(),"image/svg+xml");if(!ge.nodeName)throw ge=null,new Error("Unsupported SVG source: "+Y);an=me,pe=de(ge,ne,!0),(!ne||ne.insert!==!1)&&he._insertItem(i,pe);var Ee=ne.onLoad;Ee&&Ee(pe,Xe)}catch(tt){ze(tt)}}function ze(Xe,ge){var Ee=ne.onError;if(Ee)Ee(Xe,ge);else throw new Error(Xe)}if(typeof Y=="string"&&!/^[\s\S]*</.test(Y)){var Be=c.getElementById(Y);Be?Oe(Be):ti.request({url:Y,async:!0,onLoad:Oe,onError:ze})}else if(typeof File<"u"&&Y instanceof File){var Ye=new FileReader;return Ye.onload=function(){Oe(Ye.result)},Ye.onerror=function(){ze(Ye.error)},Ye.readAsText(Y)}else Oe(Y);return pe}xe.inject({importSVG:function(Y,ne){return ue(Y,ne,this)}}),yt.inject({importSVG:function(Y,ne){return this.activate(),ue(Y,ne,this)}})},h.exports.PaperScript=(function(){var d=this,y=d.acorn;if(!y&&typeof lE<"u")try{y=hE()}catch{}if(!y){var D,U;y=D=U={},function(Ne,Ue){if(typeof D=="object"&&typeof U=="object")return Ue(D);if(typeof i=="function"&&i.amd)return i(["exports"],Ue);Ue(Ne.acorn||(Ne.acorn={}))}(this,function(Ne){Ne.version="0.5.0";var Ue,de,ue,Y;Ne.parse=function(mt,Bt){return de=String(mt),ue=de.length,he(Bt),VA(),kA(Ue.program)};var ne=Ne.defaultOptions={ecmaVersion:5,strictSemicolons:!1,allowTrailingCommas:!0,forbidReserved:!1,allowReturnOutsideFunction:!1,locations:!1,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null};function he(mt){Ue=mt||{};for(var Bt in ne)Object.prototype.hasOwnProperty.call(Ue,Bt)||(Ue[Bt]=ne[Bt]);Y=Ue.sourceFile||null}var me=Ne.getLineInfo=function(mt,Bt){for(var ii=1,Ci=0;;){aa.lastIndex=Ci;var ln=aa.exec(mt);if(ln&&ln.index<Bt)++ii,Ci=ln.index+ln[0].length;else break}return{line:ii,column:Bt-Ci}};Ne.tokenize=function(mt,Bt){de=String(mt),ue=de.length,he(Bt),VA();var ii={};function Ci(ln){return ce=ze,Ha(ln),ii.start=Oe,ii.end=ze,ii.startLoc=Be,ii.endLoc=Ye,ii.type=Xe,ii.value=ge,ii}return Ci.jumpTo=function(ln,Pn){if(pe=ln,Ue.locations){tt=1,pt=aa.lastIndex=0;for(var Qn;(Qn=aa.exec(de))&&Qn.index<ln;)++tt,pt=Qn.index+Qn[0].length}Ee=Pn,ba()},Ci};var pe,Oe,ze,Be,Ye,Xe,ge,Ee,tt,pt,n,ce,Zt,Jt,ui,Vt;function qt(mt,Bt){var ii=me(de,mt);Bt+=" ("+ii.line+":"+ii.column+")";var Ci=new SyntaxError(Bt);throw Ci.pos=mt,Ci.loc=ii,Ci.raisedAt=pe,Ci}var Ei=[],Ai={type:"num"},pi={type:"regexp"},Rt={type:"string"},Yi={type:"name"},Rn={type:"eof"},wn={keyword:"break"},pn={keyword:"case",beforeExpr:!0},vr={keyword:"catch"},Mi={keyword:"continue"},nr={keyword:"debugger"},fn={keyword:"default"},Pt={keyword:"do",isLoop:!0},Fi={keyword:"else",beforeExpr:!0},xt={keyword:"finally"},nn={keyword:"for",isLoop:!0},Cr={keyword:"function"},ys={keyword:"if"},Gr={keyword:"return",beforeExpr:!0},Et={keyword:"switch"},Hn={keyword:"throw",beforeExpr:!0},ft={keyword:"try"},gr={keyword:"var"},Xs={keyword:"while",isLoop:!0},Ks={keyword:"with"},po={keyword:"new",beforeExpr:!0},va={keyword:"this"},$o={keyword:"null",atomValue:null},go={keyword:"true",atomValue:!0},Is={keyword:"false",atomValue:!1},bn={keyword:"in",binop:7,beforeExpr:!0},bs={break:wn,case:pn,catch:vr,continue:Mi,debugger:nr,default:fn,do:Pt,else:Fi,finally:xt,for:nn,function:Cr,if:ys,return:Gr,switch:Et,throw:Hn,try:ft,var:gr,while:Xs,with:Ks,null:$o,true:go,false:Is,new:po,in:bn,instanceof:{keyword:"instanceof",binop:7,beforeExpr:!0},this:va,typeof:{keyword:"typeof",prefix:!0,beforeExpr:!0},void:{keyword:"void",prefix:!0,beforeExpr:!0},delete:{keyword:"delete",prefix:!0,beforeExpr:!0}},Or={type:"[",beforeExpr:!0},ya={type:"]"},$a={type:"{",beforeExpr:!0},mo={type:"}"},ra={type:"(",beforeExpr:!0},sa={type:")"},P={type:",",beforeExpr:!0},re={type:";",beforeExpr:!0},Re={type:":",beforeExpr:!0},at={type:"."},kt={type:"?",beforeExpr:!0},ri={binop:10,beforeExpr:!0},_i={isAssign:!0,beforeExpr:!0},Qi={isAssign:!0,beforeExpr:!0},Xi={postfix:!0,prefix:!0,isUpdate:!0},Nn={prefix:!0,beforeExpr:!0},qn={binop:1,beforeExpr:!0},yr={binop:2,beforeExpr:!0},Ma={binop:3,beforeExpr:!0},Pa={binop:4,beforeExpr:!0},Da={binop:5,beforeExpr:!0},_o={binop:6,beforeExpr:!0},or={binop:7,beforeExpr:!0},Ln={binop:8,beforeExpr:!0},jn={binop:9,prefix:!0,beforeExpr:!0},Er={binop:10,beforeExpr:!0};Ne.tokTypes={bracketL:Or,bracketR:ya,braceL:$a,braceR:mo,parenL:ra,parenR:sa,comma:P,semi:re,colon:Re,dot:at,question:kt,slash:ri,eq:_i,name:Yi,eof:Rn,num:Ai,regexp:pi,string:Rt};for(var xs in bs)Ne.tokTypes["_"+xs]=bs[xs];function Pr(mt){mt=mt.split(" ");var Bt="",ii=[];e:for(var Ci=0;Ci<mt.length;++Ci){for(var ln=0;ln<ii.length;++ln)if(ii[ln][0].length==mt[Ci].length){ii[ln].push(mt[Ci]);continue e}ii.push([mt[Ci]])}function Pn(Bn){if(Bn.length==1)return Bt+="return str === "+JSON.stringify(Bn[0])+";";Bt+="switch(str){";for(var cs=0;cs<Bn.length;++cs)Bt+="case "+JSON.stringify(Bn[cs])+":";Bt+="return true}return false;"}if(ii.length>3){ii.sort(function(Bn,cs){return cs.length-Bn.length}),Bt+="switch(str.length){";for(var Ci=0;Ci<ii.length;++Ci){var Qn=ii[Ci];Bt+="case "+Qn[0].length+":",Pn(Qn)}Bt+="}"}else Pn(mt);return new Function("str",Bt)}var eA=Pr("abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile"),EA=Pr("class enum extends super const export import"),eo=Pr("implements interface let package private protected public static yield"),Oo=Pr("eval arguments"),ls=Pr("break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this"),fA=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/,Ga="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",vo="̀-ͯ҃-֑҇-ׇֽֿׁׂׅׄؐ-ؚؠ-ىٲ-ۓۧ-ۨۻ-ۼܰ-݊ࠀ-ࠔࠛ-ࠣࠥ-ࠧࠩ-࠭ࡀ-ࡗࣤ-ࣾऀ-ःऺ-़ा-ॏ॑-ॗॢ-ॣ०-९ঁ-ঃ়া-ৄেৈৗয়-ৠਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢ-ૣ૦-૯ଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୟ-ୠ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఁ-ఃె-ైొ-్ౕౖౢ-ౣ౦-౯ಂಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢ-ೣ೦-೯ംഃെ-ൈൗൢ-ൣ൦-൯ංඃ්ා-ුූෘ-ෟෲෳิ-ฺเ-ๅ๐-๙ິ-ູ່-ໍ໐-໙༘༙༠-༩༹༵༷ཁ-ཇཱ-྄྆-྇ྍ-ྗྙ-ྼ࿆က-ဩ၀-၉ၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟ᜎ-ᜐᜠ-ᜰᝀ-ᝐᝲᝳក-ឲ៝០-៩᠋-᠍᠐-᠙ᤠ-ᤫᤰ-᤻ᥑ-ᥭᦰ-ᧀᧈ-ᧉ᧐-᧙ᨀ-ᨕᨠ-ᩓ᩠-᩿᩼-᪉᪐-᪙ᭆ-ᭋ᭐-᭙᭫-᭳᮰-᮹᯦-᯳ᰀ-ᰢ᱀-᱉ᱛ-ᱽ᳐-᳒ᴀ-ᶾḁ-ἕ‌‍‿⁀⁔⃐-⃥⃜⃡-⃰ⶁ-ⶖⷠ-ⷿ〡-〨゙゚Ꙁ-ꙭꙴ-꙽ꚟ꛰-꛱ꟸ-ꠀ꠆ꠋꠣ-ꠧꢀ-ꢁꢴ-꣄꣐-꣙ꣳ-ꣷ꤀-꤉ꤦ-꤭ꤰ-ꥅꦀ-ꦃ꦳-꧀ꨀ-ꨧꩀ-ꩁꩌ-ꩍ꩐-꩙ꩻꫠ-ꫩꫲ-ꫳꯀ-ꯡ꯬꯭꯰-꯹ﬠ-ﬨ︀-️︠-︦︳︴﹍-﹏０-９＿",Ns=new RegExp("["+Ga+"]"),Ts=new RegExp("["+Ga+vo+"]"),tA=/[\n\r\u2028\u2029]/,aa=/\r\n|[\n\r\u2028\u2029]/g,La=Ne.isIdentifierStart=function(mt){return mt<65?mt===36:mt<91?!0:mt<97?mt===95:mt<123?!0:mt>=170&&Ns.test(String.fromCharCode(mt))},yo=Ne.isIdentifierChar=function(mt){return mt<48?mt===36:mt<58?!0:mt<65?!1:mt<91?!0:mt<97?mt===95:mt<123?!0:mt>=170&&Ts.test(String.fromCharCode(mt))};function zo(){this.line=tt,this.column=pe-pt}function VA(){tt=1,pe=pt=0,Ee=!0,ba()}function Dr(mt,Bt){ze=pe,Ue.locations&&(Ye=new zo),Xe=mt,ba(),ge=Bt,Ee=mt.beforeExpr}function gu(){var mt=Ue.onComment&&Ue.locations&&new zo,Bt=pe,ii=de.indexOf("*/",pe+=2);if(ii===-1&&qt(pe-2,"Unterminated comment"),pe=ii+2,Ue.locations){aa.lastIndex=Bt;for(var Ci;(Ci=aa.exec(de))&&Ci.index<pe;)++tt,pt=Ci.index+Ci[0].length}Ue.onComment&&Ue.onComment(!0,de.slice(Bt+2,ii),Bt,pe,mt,Ue.locations&&new zo)}function oa(){for(var mt=pe,Bt=Ue.onComment&&Ue.locations&&new zo,ii=de.charCodeAt(pe+=2);pe<ue&&ii!==10&&ii!==13&&ii!==8232&&ii!==8233;)++pe,ii=de.charCodeAt(pe);Ue.onComment&&Ue.onComment(!1,de.slice(mt+2,pe),mt,pe,Bt,Ue.locations&&new zo)}function ba(){for(;pe<ue;){var mt=de.charCodeAt(pe);if(mt===32)++pe;else if(mt===13){++pe;var Bt=de.charCodeAt(pe);Bt===10&&++pe,Ue.locations&&(++tt,pt=pe)}else if(mt===10||mt===8232||mt===8233)++pe,Ue.locations&&(++tt,pt=pe);else if(mt>8&&mt<14)++pe;else if(mt===47){var Bt=de.charCodeAt(pe+1);if(Bt===42)gu();else if(Bt===47)oa();else break}else if(mt===160)++pe;else if(mt>=5760&&fA.test(String.fromCharCode(mt)))++pe;else break}}function ll(){var mt=de.charCodeAt(pe+1);return mt>=48&&mt<=57?No(!0):(++pe,Dr(at))}function to(){var mt=de.charCodeAt(pe+1);return Ee?(++pe,ul()):mt===61?gs(Qi,2):gs(ri,1)}function bo(){var mt=de.charCodeAt(pe+1);return mt===61?gs(Qi,2):gs(Er,1)}function Fo(mt){var Bt=de.charCodeAt(pe+1);return Bt===mt?gs(mt===124?qn:yr,2):Bt===61?gs(Qi,2):gs(mt===124?Ma:Da,1)}function us(){var mt=de.charCodeAt(pe+1);return mt===61?gs(Qi,2):gs(Pa,1)}function io(mt){var Bt=de.charCodeAt(pe+1);return Bt===mt?Bt==45&&de.charCodeAt(pe+2)==62&&tA.test(de.slice(ce,pe))?(pe+=3,oa(),ba(),Ha()):gs(Xi,2):Bt===61?gs(Qi,2):gs(jn,1)}function xo(mt){var Bt=de.charCodeAt(pe+1),ii=1;return Bt===mt?(ii=mt===62&&de.charCodeAt(pe+2)===62?3:2,de.charCodeAt(pe+ii)===61?gs(Qi,ii+1):gs(Ln,ii)):Bt==33&&mt==60&&de.charCodeAt(pe+2)==45&&de.charCodeAt(pe+3)==45?(pe+=4,oa(),ba(),Ha()):(Bt===61&&(ii=de.charCodeAt(pe+2)===61?3:2),gs(or,ii))}function IA(mt){var Bt=de.charCodeAt(pe+1);return Bt===61?gs(_o,de.charCodeAt(pe+2)===61?3:2):gs(mt===61?_i:Nn,1)}function Hs(mt){switch(mt){case 46:return ll();case 40:return++pe,Dr(ra);case 41:return++pe,Dr(sa);case 59:return++pe,Dr(re);case 44:return++pe,Dr(P);case 91:return++pe,Dr(Or);case 93:return++pe,Dr(ya);case 123:return++pe,Dr($a);case 125:return++pe,Dr(mo);case 58:return++pe,Dr(Re);case 63:return++pe,Dr(kt);case 48:var Bt=de.charCodeAt(pe+1);if(Bt===120||Bt===88)return Xr();case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return No(!1);case 34:case 39:return rr(mt);case 47:return to();case 37:case 42:return bo();case 124:case 38:return Fo(mt);case 94:return us();case 43:case 45:return io(mt);case 60:case 62:return xo(mt);case 61:case 33:return IA(mt);case 126:return gs(Nn,1)}return!1}function Ha(mt){if(mt?pe=Oe+1:Oe=pe,Ue.locations&&(Be=new zo),mt)return ul();if(pe>=ue)return Dr(Rn);var Bt=de.charCodeAt(pe);if(La(Bt)||Bt===92)return xa();var ii=Hs(Bt);if(ii===!1){var Ci=String.fromCharCode(Bt);if(Ci==="\\"||Ns.test(Ci))return xa();qt(pe,"Unexpected character '"+Ci+"'")}return ii}function gs(mt,Bt){var ii=de.slice(pe,pe+Bt);pe+=Bt,Dr(mt,ii)}function ul(){for(var ln="",mt,Bt,ii=pe;;){pe>=ue&&qt(ii,"Unterminated regular expression");var Ci=de.charAt(pe);if(tA.test(Ci)&&qt(ii,"Unterminated regular expression"),mt)mt=!1;else{if(Ci==="[")Bt=!0;else if(Ci==="]"&&Bt)Bt=!1;else if(Ci==="/"&&!Bt)break;mt=Ci==="\\"}++pe}var ln=de.slice(ii,pe);++pe;var Pn=Qr();Pn&&!/^[gmsiy]*$/.test(Pn)&&qt(ii,"Invalid regexp flag");try{var Qn=new RegExp(ln,Pn)}catch(Bn){Bn instanceof SyntaxError&&qt(ii,Bn.message),qt(Bn)}return Dr(pi,Qn)}function Kn(mt,Bt){for(var ii=pe,Ci=0,ln=0,Pn=Bt??1/0;ln<Pn;++ln){var Qn=de.charCodeAt(pe),Bn;if(Qn>=97?Bn=Qn-97+10:Qn>=65?Bn=Qn-65+10:Qn>=48&&Qn<=57?Bn=Qn-48:Bn=1/0,Bn>=mt)break;++pe,Ci=Ci*mt+Bn}return pe===ii||Bt!=null&&pe-ii!==Bt?null:Ci}function Xr(){pe+=2;var mt=Kn(16);return mt==null&&qt(Oe+2,"Expected hexadecimal number"),La(de.charCodeAt(pe))&&qt(pe,"Identifier directly after number"),Dr(Ai,mt)}function No(mt){var Bt=pe,ii=!1,Ci=de.charCodeAt(pe)===48;!mt&&Kn(10)===null&&qt(Bt,"Invalid number"),de.charCodeAt(pe)===46&&(++pe,Kn(10),ii=!0);var ln=de.charCodeAt(pe);(ln===69||ln===101)&&(ln=de.charCodeAt(++pe),(ln===43||ln===45)&&++pe,Kn(10)===null&&qt(Bt,"Invalid number"),ii=!0),La(de.charCodeAt(pe))&&qt(pe,"Identifier directly after number");var Pn=de.slice(Bt,pe),Qn;return ii?Qn=parseFloat(Pn):!Ci||Pn.length===1?Qn=parseInt(Pn,10):/[89]/.test(Pn)||Vt?qt(Bt,"Invalid number"):Qn=parseInt(Pn,8),Dr(Ai,Qn)}function rr(mt){pe++;for(var Bt="";;){pe>=ue&&qt(Oe,"Unterminated string constant");var ii=de.charCodeAt(pe);if(ii===mt)return++pe,Dr(Rt,Bt);if(ii===92){ii=de.charCodeAt(++pe);var Ci=/^[0-7]+/.exec(de.slice(pe,pe+3));for(Ci&&(Ci=Ci[0]);Ci&&parseInt(Ci,8)>255;)Ci=Ci.slice(0,-1);if(Ci==="0"&&(Ci=null),++pe,Ci)Vt&&qt(pe-2,"Octal literal in strict mode"),Bt+=String.fromCharCode(parseInt(Ci,8)),pe+=Ci.length-1;else switch(ii){case 110:Bt+=`
`;break;case 114:Bt+="\r";break;case 120:Bt+=String.fromCharCode(Aa(2));break;case 117:Bt+=String.fromCharCode(Aa(4));break;case 85:Bt+=String.fromCharCode(Aa(8));break;case 116:Bt+="	";break;case 98:Bt+="\b";break;case 118:Bt+="\v";break;case 102:Bt+="\f";break;case 48:Bt+="\0";break;case 13:de.charCodeAt(pe)===10&&++pe;case 10:Ue.locations&&(pt=pe,++tt);break;default:Bt+=String.fromCharCode(ii);break}}else(ii===13||ii===10||ii===8232||ii===8233)&&qt(Oe,"Unterminated string constant"),Bt+=String.fromCharCode(ii),++pe}}function Aa(mt){var Bt=Kn(16,mt);return Bt===null&&qt(Oe,"Bad character escape sequence"),Bt}var Hr;function Qr(){Hr=!1;for(var mt,Bt=!0,ii=pe;;){var Ci=de.charCodeAt(pe);if(yo(Ci))Hr&&(mt+=de.charAt(pe)),++pe;else if(Ci===92){Hr||(mt=de.slice(ii,pe)),Hr=!0,de.charCodeAt(++pe)!=117&&qt(pe,"Expecting Unicode escape sequence \\uXXXX"),++pe;var ln=Aa(4),Pn=String.fromCharCode(ln);Pn||qt(pe-1,"Invalid Unicode escape"),(Bt?La(ln):yo(ln))||qt(pe-4,"Invalid Unicode escape"),mt+=Pn}else break;Bt=!1}return Hr?mt:de.slice(ii,pe)}function xa(){var mt=Qr(),Bt=Yi;return!Hr&&ls(mt)&&(Bt=bs[mt]),Dr(Bt,mt)}function mr(){n=Oe,ce=ze,Zt=Ye,Ha()}function TA(mt){if(Vt=mt,pe=Oe,Ue.locations)for(;pe<pt;)pt=de.lastIndexOf(`
`,pt-2)+1,--tt;ba(),Ha()}function Vo(){this.type=null,this.start=Oe,this.end=null}function Uo(){this.start=Be,this.end=null,Y!==null&&(this.source=Y)}function ws(){var mt=new Vo;return Ue.locations&&(mt.loc=new Uo),Ue.directSourceFile&&(mt.sourceFile=Ue.directSourceFile),Ue.ranges&&(mt.range=[Oe,0]),mt}function Ar(mt){var Bt=new Vo;return Bt.start=mt.start,Ue.locations&&(Bt.loc=new Uo,Bt.loc.start=mt.loc.start),Ue.ranges&&(Bt.range=[mt.range[0],0]),Bt}function On(mt,Bt){return mt.type=Bt,mt.end=ce,Ue.locations&&(mt.loc.end=Zt),Ue.ranges&&(mt.range[1]=ce),mt}function wo(mt){return Ue.ecmaVersion>=5&&mt.type==="ExpressionStatement"&&mt.expression.type==="Literal"&&mt.expression.value==="use strict"}function Lr(mt){if(Xe===mt)return mr(),!0}function no(){return!Ue.strictSemicolons&&(Xe===Rn||Xe===mo||tA.test(de.slice(ce,Oe)))}function iA(){!Lr(re)&&!no()&&Kr()}function _r(mt){Xe===mt?mr():Kr()}function Kr(){qt(Oe,"Unexpected token")}function Qs(mt){mt.type!=="Identifier"&&mt.type!=="MemberExpression"&&qt(mt.start,"Assigning to rvalue"),Vt&&mt.type==="Identifier"&&Oo(mt.name)&&qt(mt.start,"Assigning to "+mt.name+" in strict mode")}function kA(mt){n=ce=pe,Ue.locations&&(Zt=new zo),Jt=Vt=null,ui=[],Ha();var Bt=mt||ws(),ii=!0;for(mt||(Bt.body=[]);Xe!==Rn;){var Ci=wa();Bt.body.push(Ci),ii&&wo(Ci)&&TA(!0),ii=!1}return On(Bt,"Program")}var ro={kind:"loop"},dA={kind:"switch"};function wa(){(Xe===ri||Xe===Qi&&ge=="/=")&&Ha(!0);var mt=Xe,Bt=ws();switch(mt){case wn:case Mi:mr();var ii=mt===wn;Lr(re)||no()?Bt.label=null:Xe!==Yi?Kr():(Bt.label=gi(),iA());for(var Ci=0;Ci<ui.length;++Ci){var ln=ui[Ci];if((Bt.label==null||ln.name===Bt.label.name)&&(ln.kind!=null&&(ii||ln.kind==="loop")||Bt.label&&ii))break}return Ci===ui.length&&qt(Bt.start,"Unsyntactic "+mt.keyword),On(Bt,ii?"BreakStatement":"ContinueStatement");case nr:return mr(),iA(),On(Bt,"DebuggerStatement");case Pt:return mr(),ui.push(ro),Bt.body=wa(),ui.pop(),_r(Xs),Bt.test=Ss(),iA(),On(Bt,"DoWhileStatement");case nn:if(mr(),ui.push(ro),_r(ra),Xe===re)return ha(Bt,null);if(Xe===gr){var Pn=ws();return mr(),br(Pn,!0),On(Pn,"VariableDeclaration"),Pn.declarations.length===1&&Lr(bn)?Qa(Bt,Pn):ha(Bt,Pn)}var Pn=is(!1,!0);return Lr(bn)?(Qs(Pn),Qa(Bt,Pn)):ha(Bt,Pn);case Cr:return mr(),Xt(Bt,!0);case ys:return mr(),Bt.test=Ss(),Bt.consequent=wa(),Bt.alternate=Lr(Fi)?wa():null,On(Bt,"IfStatement");case Gr:return!Jt&&!Ue.allowReturnOutsideFunction&&qt(Oe,"'return' outside of function"),mr(),Lr(re)||no()?Bt.argument=null:(Bt.argument=is(),iA()),On(Bt,"ReturnStatement");case Et:mr(),Bt.discriminant=Ss(),Bt.cases=[],_r($a),ui.push(dA);for(var Qn,Bn;Xe!=mo;)if(Xe===pn||Xe===fn){var cs=Xe===pn;Qn&&On(Qn,"SwitchCase"),Bt.cases.push(Qn=ws()),Qn.consequent=[],mr(),cs?Qn.test=is():(Bn&&qt(n,"Multiple default clauses"),Bn=!0,Qn.test=null),_r(Re)}else Qn||Kr(),Qn.consequent.push(wa());return Qn&&On(Qn,"SwitchCase"),mr(),ui.pop(),On(Bt,"SwitchStatement");case Hn:return mr(),tA.test(de.slice(ce,Oe))&&qt(ce,"Illegal newline after throw"),Bt.argument=is(),iA(),On(Bt,"ThrowStatement");case ft:if(mr(),Bt.block=ms(),Bt.handler=null,Xe===vr){var Zs=ws();mr(),_r(ra),Zs.param=gi(),Vt&&Oo(Zs.param.name)&&qt(Zs.param.start,"Binding "+Zs.param.name+" in strict mode"),_r(sa),Zs.guard=null,Zs.body=ms(),Bt.handler=On(Zs,"CatchClause")}return Bt.guardedHandlers=Ei,Bt.finalizer=Lr(xt)?ms():null,!Bt.handler&&!Bt.finalizer&&qt(Bt.start,"Missing catch or finally clause"),On(Bt,"TryStatement");case gr:return mr(),br(Bt),iA(),On(Bt,"VariableDeclaration");case Xs:return mr(),Bt.test=Ss(),ui.push(ro),Bt.body=wa(),ui.pop(),On(Bt,"WhileStatement");case Ks:return Vt&&qt(Oe,"'with' in strict mode"),mr(),Bt.object=Ss(),Bt.body=wa(),On(Bt,"WithStatement");case $a:return ms();case re:return mr(),On(Bt,"EmptyStatement");default:var Js=ge,fa=is();if(mt===Yi&&fa.type==="Identifier"&&Lr(Re)){for(var Ci=0;Ci<ui.length;++Ci)ui[Ci].name===Js&&qt(fa.start,"Label '"+Js+"' is already declared");var cl=Xe.isLoop?"loop":Xe===Et?"switch":null;return ui.push({name:Js,kind:cl}),Bt.body=wa(),ui.pop(),Bt.label=fa,On(Bt,"LabeledStatement")}else return Bt.expression=fa,iA(),On(Bt,"ExpressionStatement")}}function Ss(){_r(ra);var mt=is();return _r(sa),mt}function ms(mt){var Bt=ws(),ii=!0,Ci=!1,ln;for(Bt.body=[],_r($a);!Lr(mo);){var Pn=wa();Bt.body.push(Pn),ii&&mt&&wo(Pn)&&(ln=Ci,TA(Ci=!0)),ii=!1}return Ci&&!ln&&TA(!1),On(Bt,"BlockStatement")}function ha(mt,Bt){return mt.init=Bt,_r(re),mt.test=Xe===re?null:is(),_r(re),mt.update=Xe===sa?null:is(),_r(sa),mt.body=wa(),ui.pop(),On(mt,"ForStatement")}function Qa(mt,Bt){return mt.left=Bt,mt.right=is(),_r(sa),mt.body=wa(),ui.pop(),On(mt,"ForInStatement")}function br(mt,Bt){for(mt.declarations=[],mt.kind="var";;){var ii=ws();if(ii.id=gi(),Vt&&Oo(ii.id.name)&&qt(ii.id.start,"Binding "+ii.id.name+" in strict mode"),ii.init=Lr(_i)?is(!0,Bt):null,mt.declarations.push(On(ii,"VariableDeclarator")),!Lr(P))break}return mt}function is(mt,Bt){var ii=zr(Bt);if(!mt&&Xe===P){var Ci=Ar(ii);for(Ci.expressions=[ii];Lr(P);)Ci.expressions.push(zr(Bt));return On(Ci,"SequenceExpression")}return ii}function zr(mt){var Bt=pA(mt);if(Xe.isAssign){var ii=Ar(Bt);return ii.operator=ge,ii.left=Bt,mr(),ii.right=zr(mt),Qs(Bt),On(ii,"AssignmentExpression")}return Bt}function pA(mt){var Bt=Ba(mt);if(Lr(kt)){var ii=Ar(Bt);return ii.test=Bt,ii.consequent=is(!0),_r(Re),ii.alternate=is(!0,mt),On(ii,"ConditionalExpression")}return Bt}function Ba(mt){return Bs(qs(),-1,mt)}function Bs(mt,Bt,ii){var Ci=Xe.binop;if(Ci!=null&&(!ii||Xe!==bn)&&Ci>Bt){var ln=Ar(mt);ln.left=mt,ln.operator=ge;var Pn=Xe;mr(),ln.right=Bs(qs(),Ci,ii);var Qn=On(ln,Pn===qn||Pn===yr?"LogicalExpression":"BinaryExpression");return Bs(Qn,Bt,ii)}return mt}function qs(){if(Xe.prefix){var mt=ws(),Bt=Xe.isUpdate;return mt.operator=ge,mt.prefix=!0,Ee=!0,mr(),mt.argument=qs(),Bt?Qs(mt.argument):Vt&&mt.operator==="delete"&&mt.argument.type==="Identifier"&&qt(mt.start,"Deleting local variable in strict mode"),On(mt,Bt?"UpdateExpression":"UnaryExpression")}for(var ii=so();Xe.postfix&&!no();){var mt=Ar(ii);mt.operator=ge,mt.prefix=!1,mt.argument=ii,Qs(ii),mr(),ii=On(mt,"UpdateExpression")}return ii}function so(){return So(MA())}function So(mt,Bt){if(Lr(at)){var ii=Ar(mt);return ii.object=mt,ii.property=gi(!0),ii.computed=!1,So(On(ii,"MemberExpression"),Bt)}else if(Lr(Or)){var ii=Ar(mt);return ii.object=mt,ii.property=is(),ii.computed=!0,_r(ya),So(On(ii,"MemberExpression"),Bt)}else if(!Bt&&Lr(ra)){var ii=Ar(mt);return ii.callee=mt,ii.arguments=Si(sa,!1),So(On(ii,"CallExpression"),Bt)}else return mt}function MA(){switch(Xe){case va:var Ci=ws();return mr(),On(Ci,"ThisExpression");case Yi:return gi();case Ai:case Rt:case pi:var Ci=ws();return Ci.value=ge,Ci.raw=de.slice(Oe,ze),mr(),On(Ci,"Literal");case $o:case go:case Is:var Ci=ws();return Ci.value=Xe.atomValue,Ci.raw=Xe.keyword,mr(),On(Ci,"Literal");case ra:var mt=Be,Bt=Oe;mr();var ii=is();return ii.start=Bt,ii.end=ze,Ue.locations&&(ii.loc.start=mt,ii.loc.end=Ye),Ue.ranges&&(ii.range=[Bt,ze]),_r(sa),ii;case Or:var Ci=ws();return mr(),Ci.elements=Si(ya,!0,!0),On(Ci,"ArrayExpression");case $a:return nA();case Cr:var Ci=ws();return mr(),Xt(Ci,!1);case po:return Rl();default:Kr()}}function Rl(){var mt=ws();return mr(),mt.callee=So(MA(),!0),Lr(ra)?mt.arguments=Si(sa,!1):mt.arguments=Ei,On(mt,"NewExpression")}function nA(){var mt=ws(),Bt=!0,ii=!1;for(mt.properties=[],mr();!Lr(mo);){if(Bt)Bt=!1;else if(_r(P),Ue.allowTrailingCommas&&Lr(mo))break;var Ci={key:Sa()},ln=!1,Pn;if(Lr(Re)?(Ci.value=is(!0),Pn=Ci.kind="init"):Ue.ecmaVersion>=5&&Ci.key.type==="Identifier"&&(Ci.key.name==="get"||Ci.key.name==="set")?(ln=ii=!0,Pn=Ci.kind=Ci.key.name,Ci.key=Sa(),Xe!==ra&&Kr(),Ci.value=Xt(ws(),!1)):Kr(),Ci.key.type==="Identifier"&&(Vt||ii))for(var Qn=0;Qn<mt.properties.length;++Qn){var Bn=mt.properties[Qn];if(Bn.key.name===Ci.key.name){var cs=Pn==Bn.kind||ln&&Bn.kind==="init"||Pn==="init"&&(Bn.kind==="get"||Bn.kind==="set");cs&&!Vt&&Pn==="init"&&Bn.kind==="init"&&(cs=!1),cs&&qt(Ci.key.start,"Redefinition of property")}}mt.properties.push(Ci)}return On(mt,"ObjectExpression")}function Sa(){return Xe===Ai||Xe===Rt?MA():gi(!0)}function Xt(mt,Bt){Xe===Yi?mt.id=gi():Bt?Kr():mt.id=null,mt.params=[];var ii=!0;for(_r(ra);!Lr(sa);)ii?ii=!1:_r(P),mt.params.push(gi());var Ci=Jt,ln=ui;if(Jt=!0,ui=[],mt.body=ms(!0),Jt=Ci,ui=ln,Vt||mt.body.body.length&&wo(mt.body.body[0]))for(var Pn=mt.id?-1:0;Pn<mt.params.length;++Pn){var Qn=Pn<0?mt.id:mt.params[Pn];if((eo(Qn.name)||Oo(Qn.name))&&qt(Qn.start,"Defining '"+Qn.name+"' in strict mode"),Pn>=0)for(var Bn=0;Bn<Pn;++Bn)Qn.name===mt.params[Bn].name&&qt(Qn.start,"Argument name clash in strict mode")}return On(mt,Bt?"FunctionDeclaration":"FunctionExpression")}function Si(mt,Bt,ii){for(var Ci=[],ln=!0;!Lr(mt);){if(ln)ln=!1;else if(_r(P),Bt&&Ue.allowTrailingCommas&&Lr(mt))break;ii&&Xe===P?Ci.push(null):Ci.push(is(!0))}return Ci}function gi(mt){var Bt=ws();return mt&&Ue.forbidReserved=="everywhere"&&(mt=!1),Xe===Yi?(!mt&&(Ue.forbidReserved&&(Ue.ecmaVersion===3?eA:EA)(ge)||Vt&&eo(ge))&&de.slice(Oe,ze).indexOf("\\")==-1&&qt(Oe,"The keyword '"+ge+"' is reserved"),Bt.name=ge):mt&&Xe.keyword?Bt.name=Xe.keyword:Kr(),Ee=!1,mr(),On(Bt,"Identifier")}}),y.version||(y=null)}function Q(Ne,Ue){return(d.acorn||y).parse(Ne,Ue)}var K={"+":"__add","-":"__subtract","*":"__multiply","/":"__divide","%":"__modulo","==":"__equals","!=":"__equals"},ie={"-":"__negate","+":"__self"},Ae=h.each(["add","subtract","multiply","divide","modulo","equals","negate"],function(Ne){this["__"+Ne]="#"+Ne},{__self:function(){return this}});se.inject(Ae),qe.inject(Ae),wi.inject(Ae);function fe(Ne,Ue,de){var ue=K[Ue];if(Ne&&Ne[ue]){var Y=Ne[ue](de);return Ue==="!="?!Y:Y}switch(Ue){case"+":return Ne+de;case"-":return Ne-de;case"*":return Ne*de;case"/":return Ne/de;case"%":return Ne%de;case"==":return Ne==de;case"!=":return Ne!=de}}function ye(Ne,Ue){var de=ie[Ne];if(Ue&&Ue[de])return Ue[de]();switch(Ne){case"+":return+Ue;case"-":return-Ue}}function Le(Ne,Ue){if(!Ne)return"";Ue=Ue||{};var de=[];function ue(Vt){for(var qt=0,Ei=de.length;qt<Ei;qt++){var Ai=de[qt];if(Ai[0]>=Vt)break;Vt+=Ai[1]}return Vt}function Y(Vt){return Ne.substring(ue(Vt.range[0]),ue(Vt.range[1]))}function ne(Vt,qt){return Ne.substring(ue(Vt.range[1]),ue(qt.range[0]))}function he(Vt,qt){for(var Ei=ue(Vt.range[0]),Ai=ue(Vt.range[1]),pi=0,Rt=de.length-1;Rt>=0;Rt--)if(Ei>de[Rt][0]){pi=Rt+1;break}de.splice(pi,0,[Ei,qt.length-Ai+Ei]),Ne=Ne.substring(0,Ei)+qt+Ne.substring(Ai)}function me(Vt,qt){switch(Vt.type){case"UnaryExpression":if(Vt.operator in ie&&Vt.argument.type!=="Literal"){var Ei=Y(Vt.argument);he(Vt,'$__("'+Vt.operator+'", '+Ei+")")}break;case"BinaryExpression":if(Vt.operator in K&&Vt.left.type!=="Literal"){var Ai=Y(Vt.left),pi=Y(Vt.right),Rt=ne(Vt.left,Vt.right),Yi=Vt.operator;he(Vt,"__$__("+Ai+","+Rt.replace(new RegExp("\\"+Yi),'"'+Yi+'"')+", "+pi+")")}break;case"UpdateExpression":case"AssignmentExpression":var Rn=qt&&qt.type;if(!(Rn==="ForStatement"||Rn==="BinaryExpression"&&/^[=!<>]/.test(qt.operator)||Rn==="MemberExpression"&&qt.computed)){if(Vt.type==="UpdateExpression"){var Ei=Y(Vt.argument),wn="__$__("+Ei+', "'+Vt.operator[0]+'", 1)',pn=Ei+" = "+wn;Vt.prefix?pn="("+pn+")":(Rn==="AssignmentExpression"||Rn==="VariableDeclarator"||Rn==="BinaryExpression")&&(Y(qt.left||qt.id)===Ei&&(pn=wn),pn=Ei+"; "+pn),he(Vt,pn)}else if(/^.=$/.test(Vt.operator)&&Vt.left.type!=="Literal"){var Ai=Y(Vt.left),pi=Y(Vt.right),wn=Ai+" = __$__("+Ai+', "'+Vt.operator[0]+'", '+pi+")";he(Vt,/^\(.*\)$/.test(Y(Vt))?"("+wn+")":wn)}}break}}function pe(Vt){switch(Vt.type){case"ExportDefaultDeclaration":he({range:[Vt.start,Vt.declaration.start]},"module.exports = ");break;case"ExportNamedDeclaration":var qt=Vt.declaration,Ei=Vt.specifiers;if(qt){var Ai=qt.declarations;Ai&&(Ai.forEach(function(Rt){he(Rt,"module.exports."+Y(Rt))}),he({range:[Vt.start,qt.start+qt.kind.length]},""))}else if(Ei){var pi=Ei.map(function(Rt){var Yi=Y(Rt);return"module.exports."+Yi+" = "+Yi+"; "}).join("");pi&&he(Vt,pi)}break}}function Oe(Vt,qt,Ei){if(Vt){for(var Ai in Vt)if(Ai!=="range"&&Ai!=="loc"){var pi=Vt[Ai];if(Array.isArray(pi))for(var Rt=0,Yi=pi.length;Rt<Yi;Rt++)Oe(pi[Rt],Vt,Ei);else pi&&typeof pi=="object"&&Oe(pi,Vt,Ei)}Ei.operatorOverloading!==!1&&me(Vt,qt),Ei.moduleExports!==!1&&pe(Vt)}}function ze(Vt){var qt="",Ei="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(Vt=(Math.abs(Vt)<<1)+(Vt<0?1:0);Vt||!qt;){var Ai=Vt&31;Vt>>=5,Vt&&(Ai|=32),qt+=Ei[Ai]}return qt}var Be=Ue.url||"",Ye=Ue.sourceMaps,Xe=Ue.paperFeatures||{},ge=Ue.source||Ne,Ee=Ue.offset||0,tt=an.agent,pt=tt.versionNumber,n=!1,ce=/\r\n|\n|\r/mg,Zt;if(Ye&&(tt.chrome&&pt>=30||tt.webkit&&pt>=537.76||tt.firefox&&pt>=23||tt.node)){if(tt.node)Ee-=2;else if(r&&Be&&!r.location.href.indexOf(Be)){var Jt=c.getElementsByTagName("html")[0].innerHTML;Ee=Jt.substr(0,Jt.indexOf(Ne)+1).match(ce).length+1}n=Ee>0&&!(tt.chrome&&pt>=36||tt.safari&&pt>=600||tt.firefox&&pt>=40||tt.node);var ui=["AA"+ze(n?0:Ee)+"A"];ui.length=(Ne.match(ce)||[]).length+1+(n?Ee:0),Zt={version:3,file:Be,names:[],mappings:ui.join(";AACA"),sourceRoot:"",sources:[Be],sourcesContent:[ge]}}return(Xe.operatorOverloading!==!1||Xe.moduleExports!==!1)&&Oe(Q(Ne,{ranges:!0,preserveParens:!0,sourceType:"module"}),null,Xe),Zt&&(n&&(Ne=new Array(Ee+1).join(`
`)+Ne),/^(inline|both)$/.test(Ye)&&(Ne+=`
//# sourceMappingURL=data:application/json;base64,`+t.btoa(unescape(encodeURIComponent(JSON.stringify(Zt))))),Ne+=`
//# sourceURL=`+(Be||"paperscript")),{url:Be,source:ge,code:Ne,map:Zt}}function we(Ne,Ue,de){an=Ue;var ue=Ue.getView(),Y=/\btool\.\w+|\s+on(?:Key|Mouse)(?:Up|Down|Move|Drag)\b/.test(Ne)&&!/\bnew\s+Tool\b/.test(Ne)?new sn:null,ne=Y?Y._events:[],he=["onFrame","onResize"].concat(ne),me=[],pe=[],Oe,ze=typeof Ne=="object"?Ne:Le(Ne,de);Ne=ze.code;function Be(pt,n){for(var ce in pt)(n||!/^_/.test(ce))&&new RegExp("([\\b\\s\\W]|^)"+ce.replace(/\$/g,"\\$")+"\\b").test(Ne)&&(me.push(ce),pe.push(pt[ce]))}Be({__$__:fe,$__:ye,paper:Ue,tool:Y},!0),Be(Ue),Ne="var module = { exports: {} }; "+Ne;var Ee=h.each(he,function(pt){new RegExp("\\s+"+pt+"\\b").test(Ne)&&(me.push(pt),this.push("module.exports."+pt+" = "+pt+";"))},[]).join(`
`);Ee&&(Ne+=`
`+Ee),Ne+=`
return module.exports;`;var Ye=an.agent;if(c&&(Ye.chrome||Ye.firefox&&Ye.versionNumber<40)){var Xe=c.createElement("script"),ge=c.head||c.getElementsByTagName("head")[0];Ye.firefox&&(Ne=`
`+Ne),Xe.appendChild(c.createTextNode("document.__paperscript__ = function("+me+") {"+Ne+`
}`)),ge.appendChild(Xe),Oe=c.__paperscript__,delete c.__paperscript__,ge.removeChild(Xe)}else Oe=Function(me,Ne);var Ee=Oe&&Oe.apply(Ue,pe),tt=Ee||{};return h.each(ne,function(pt){var n=tt[pt];n&&(Y[pt]=n)}),ue&&(tt.onResize&&ue.setOnResize(tt.onResize),ue.emit("resize",{size:ue.size,delta:new se}),tt.onFrame&&ue.setOnFrame(tt.onFrame),ue.requestUpdate()),Ee}function Te(Ne){if(/^text\/(?:x-|)paperscript$/.test(Ne.type)&&o.getAttribute(Ne,"ignore")!=="true"){var Ue=o.getAttribute(Ne,"canvas"),de=c.getElementById(Ue),ue=Ne.src||Ne.getAttribute("data-src"),Y=o.hasAttribute(Ne,"async"),ne="data-paper-scope";if(!de)throw new Error('Unable to find canvas with id "'+Ue+'"');var he=o.get(de.getAttribute(ne))||new o().setup(de);return de.setAttribute(ne,he._id),ue?ti.request({url:ue,async:Y,mimeType:"text/plain",onLoad:function(me){we(me,he,ue)}}):we(Ne.innerHTML,he,Ne.baseURI),Ne.setAttribute("data-paper-ignore","true"),he}}function Ce(){h.each(c&&c.getElementsByTagName("script"),Te)}function je(Ne){return Ne?Te(Ne):Ce()}return r&&(c.readyState==="complete"?setTimeout(Ce):Lt.add(r,{load:Ce})),{compile:Le,execute:we,load:je,parse:Q,calculateBinary:fe,calculateUnary:ye}}).call(this);var an=new(o.inject(h.exports,{Base:h,Numerical:J,Key:oi,DomEvent:Lt,DomElement:$t,document:c,window:r,Symbol:ut,PlacedSymbol:lt}));return an.agent.node&&xb(an),typeof i=="function"&&i.amd?i("paper",an):e&&(e.exports=an),an}).call(fh,typeof self=="object"?self:null)})(d3);var B_=d3.exports;function fE(e){let t,i,r="Click and drag to draw a polygon. Press Escape to exit.",c,h;return{c(){t=En("div"),i=En("span"),i.textContent=r,c=fr(),h=En("canvas"),this.h()},l(v){t=In(v,"DIV",{class:!0});var o=en(t);i=In(o,"SPAN",{class:!0,"data-svelte-h":!0}),Zl(i)!=="svelte-1m9xrla"&&(i.textContent=r),c=dr(o),h=In(o,"CANVAS",{class:!0}),en(h).forEach(li),o.forEach(li),this.h()},h(){vi(i,"class","svelte-jrtjeu"),vi(h,"class","canvas svelte-jrtjeu"),vi(t,"class","draw-wrapper svelte-jrtjeu")},m(v,o){vn(v,t,o),Ri(t,i),Ri(t,c),Ri(t,h),e[5](h)},p:_a,i:_a,o:_a,d(v){v&&li(t),e[5](null)}}}function dE(e,t,i){let{path:r}=t,{updatePath:c}=t,{updateIsDrawing:h}=t,{isDrawing:v}=t,o,k;Dl(()=>{B_.setup(k);let j=new B_.Tool;j.onMouseDown=function(J){i(1,r=new B_.Path),i(1,r.strokeColor="white",r),r.add(J.point)},j.onMouseDrag=function(J){o&&r.add(J.point)},j.onMouseUp=function(J){if(!o)return;r.simplify(.5),r.clearHandles(),i(1,r.closed=!0,r);let oe=[];for(let se of r.segments){console.log();let be=se.point;oe.push({x:be.x,y:be.y})}c(oe),h(!1)},j.onKeyDown=function(J){console.log(J),J.key==="escape"&&h(!1)}});function O(j){ts[j?"unshift":"push"](()=>{k=j,i(0,k)})}return e.$$set=j=>{"path"in j&&i(1,r=j.path),"updatePath"in j&&i(2,c=j.updatePath),"updateIsDrawing"in j&&i(3,h=j.updateIsDrawing),"isDrawing"in j&&i(4,v=j.isDrawing)},e.$$.update=()=>{e.$$.dirty&16&&(o=v)},[k,r,c,h,v,O]}class pE extends Ds{constructor(t){super(),Ls(this,t,dE,fE,vs,{path:1,updatePath:2,updateIsDrawing:3,isDrawing:4})}}function Sb(e,t,i){const r=e.slice();return r[5]=t[i],r}function Cb(e){let t,i=`${e[5][2]} ${_m[e[0]]??""}`,r;return{c(){t=En("span"),r=ja(i),this.h()},l(c){t=In(c,"SPAN",{class:!0});var h=en(t);r=Wa(h,i),h.forEach(li),this.h()},h(){vi(t,"class","svelte-1u4zhbe")},m(c,h){vn(c,t,h),Ri(t,r)},p(c,h){h&3&&i!==(i=`${c[5][2]} ${_m[c[0]]??""}`)&&Fu(r,i)},d(c){c&&li(t)}}}function Eb(e){let t,i=e[5][2]&&Cb(e);return{c(){i&&i.c(),t=Rr()},l(r){i&&i.l(r),t=Rr()},m(r,c){i&&i.m(r,c),vn(r,t,c)},p(r,c){r[5][2]?i?i.p(r,c):(i=Cb(r),i.c(),i.m(t.parentNode,t)):i&&(i.d(1),i=null)},d(r){r&&li(t),i&&i.d(r)}}}function gE(e){let t,i,r,c,h,v=nl(e[1]),o=[];for(let k=0;k<v.length;k+=1)o[k]=Eb(Sb(e,v,k));return{c(){t=En("div"),i=En("div"),c=fr(),h=En("div");for(let k=0;k<o.length;k+=1)o[k].c();this.h()},l(k){t=In(k,"DIV",{class:!0});var O=en(t);i=In(O,"DIV",{class:!0,style:!0}),en(i).forEach(li),c=dr(O),h=In(O,"DIV",{class:!0});var j=en(h);for(let J=0;J<o.length;J+=1)o[J].l(j);j.forEach(li),O.forEach(li),this.h()},h(){vi(i,"class","gradient svelte-1u4zhbe"),vi(i,"style",r=`background-image: url("/phast/SVG/ticks.svg"), ${e[2]}`),vi(h,"class","label-container svelte-1u4zhbe"),vi(t,"class","legend-container svelte-1u4zhbe")},m(k,O){vn(k,t,O),Ri(t,i),Ri(t,c),Ri(t,h);for(let j=0;j<o.length;j+=1)o[j]&&o[j].m(h,null)},p(k,[O]){if(O&4&&r!==(r=`background-image: url("/phast/SVG/ticks.svg"), ${k[2]}`)&&vi(i,"style",r),O&3){v=nl(k[1]);let j;for(j=0;j<v.length;j+=1){const J=Sb(k,v,j);o[j]?o[j].p(J,O):(o[j]=Eb(J),o[j].c(),o[j].m(h,null))}for(;j<o.length;j+=1)o[j].d(1);o.length=v.length}},i:_a,o:_a,d(k){k&&li(t),ph(o,k)}}}function mE(e,t,i){let r=vm(),c,{colorScheme:h}=t,{metric:v}=t;function o(k){let O=`linear-gradient(${k.map(j=>j[1]).flat().reverse()})`;return console.log(O),O}return e.$$set=k=>{"colorScheme"in k&&i(3,h=k.colorScheme),"metric"in k&&i(0,v=k.metric)},e.$$.update=()=>{e.$$.dirty&8&&i(1,r=vm(0,1,h).slice(1)),e.$$.dirty&2&&i(2,c=o(r))},[v,r,c,h,o]}class _E extends Ds{constructor(t){super(),Ls(this,t,mE,gE,vs,{colorScheme:3,metric:0,createPaletteGradient:4})}get createPaletteGradient(){return this.$$.ctx[4]}}function vE(e){let t,i,r,c,h,v,o,k,O,j,J,oe,se;return{c(){t=as("svg"),i=as("defs"),r=as("style"),c=ja(`.cls-1 {\r
        fill: #29abe2;\r
      }\r
    `),h=as("g"),v=as("g"),o=as("g"),k=as("path"),O=as("path"),j=as("path"),J=as("path"),oe=as("path"),se=as("polygon"),this.h()},l(be){t=os(be,"svg",{id:!0,"data-name":!0,xmlns:!0,viewBox:!0});var qe=en(t);i=os(qe,"defs",{});var ke=en(i);r=os(ke,"style",{});var Qe=en(r);c=Wa(Qe,`.cls-1 {\r
        fill: #29abe2;\r
      }\r
    `),Qe.forEach(li),ke.forEach(li),h=os(qe,"g",{id:!0,"data-name":!0});var We=en(h);v=os(We,"g",{});var ct=en(v);o=os(ct,"g",{});var St=en(o);k=os(St,"path",{class:!0,d:!0}),en(k).forEach(li),O=os(St,"path",{class:!0,d:!0}),en(O).forEach(li),j=os(St,"path",{class:!0,d:!0}),en(j).forEach(li),J=os(St,"path",{class:!0,d:!0}),en(J).forEach(li),oe=os(St,"path",{class:!0,d:!0}),en(oe).forEach(li),St.forEach(li),se=os(ct,"polygon",{class:!0,points:!0}),en(se).forEach(li),ct.forEach(li),We.forEach(li),qe.forEach(li),this.h()},h(){vi(k,"class","cls-1"),vi(k,"d","m9.41.16c1.38,0,2.18.92,1.92,2.28-.33,1.76-1.73,2.88-3.52,2.98l-1.2.06-1.13,3.08-1.68.12L6.91.16h2.5Zm-1.4,1.58l-.8,2.12.87-.03c.93-.03,1.38-.63,1.48-1.19.1-.56-.12-.92-.86-.91h-.68Z"),vi(O,"class","cls-1"),vi(O,"d","m14.62,7.9l1.24-3.16-2.79.12-1.25,3.24-1.68.12L13.24.15h1.69s-1.21,3.04-1.21,3.04l2.8-.08,1.21-2.96h1.7s-3.11,7.63-3.11,7.63l-1.7.12Z"),vi(j,"class","cls-1"),vi(j,"d","m22.82,5.85l-2.81.16-1.15,1.58-1.89.14L22.88.14h1.96s-.36,7.04-.36,7.04l-1.75.13.1-1.46Zm-1.65-1.38l1.75-.08.19-2.47-1.94,2.54Z"),vi(J,"class","cls-1"),vi(J,"d","m29.21,4.99c.06-.27,0-.48-.4-.63l-.81-.29c-.94-.34-1.26-1.02-1.08-1.84.3-1.36,1.78-2.23,3.24-2.23,2.08,0,2.33,1.22,2.18,1.89l-1.62.26c.04-.19.1-.88-.92-.86-.62,0-1.07.4-1.15.77-.08.34.12.52.39.63l.73.28c1.08.4,1.41,1,1.22,1.82-.23,1.05-1.46,2.18-3.22,2.31-2.15.16-2.61-1.14-2.41-2.06.03-.13.05-.21.08-.27l1.6-.32s-.05.14-.07.23c-.12.58.14,1.13,1.06,1.09.65-.04,1.09-.34,1.18-.77Z"),vi(oe,"class","cls-1"),vi(oe,"d","m36.78,1.44l-2.45,5.03-1.69.12,2.44-5.13-2.22.04.67-1.38h6.04s-.67,1.28-.67,1.28l-2.12.03Z"),vi(se,"class","cls-1"),vi(se,"points","3.79 .23 1.5 .23 0 2.22 .8 4.21 3.09 4.21 4.59 2.22 3.79 .23"),vi(h,"id","Layer_1-2"),vi(h,"data-name","Layer 1"),vi(t,"id","Layer_2"),vi(t,"data-name","Layer 2"),vi(t,"xmlns","http://www.w3.org/2000/svg"),vi(t,"viewBox","0 0 39.57 8.68")},m(be,qe){vn(be,t,qe),Ri(t,i),Ri(i,r),Ri(r,c),Ri(t,h),Ri(h,v),Ri(v,o),Ri(o,k),Ri(o,O),Ri(o,j),Ri(o,J),Ri(o,oe),Ri(v,se)},p:_a,i:_a,o:_a,d(be){be&&li(t)}}}class yE extends Ds{constructor(t){super(),Ls(this,t,null,vE,vs,{})}}function tm(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function bE(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function p3(e){let t,i,r;e.length!==2?(t=tm,i=(o,k)=>tm(e(o),k),r=(o,k)=>e(o)-k):(t=e===tm||e===bE?e:xE,i=e,r=e);function c(o,k,O=0,j=o.length){if(O<j){if(t(k,k)!==0)return j;do{const J=O+j>>>1;i(o[J],k)<0?O=J+1:j=J}while(O<j)}return O}function h(o,k,O=0,j=o.length){if(O<j){if(t(k,k)!==0)return j;do{const J=O+j>>>1;i(o[J],k)<=0?O=J+1:j=J}while(O<j)}return O}function v(o,k,O=0,j=o.length){const J=c(o,k,O,j-1);return J>O&&r(o[J-1],k)>-r(o[J],k)?J-1:J}return{left:c,center:v,right:h}}function xE(){return 0}function wE(e){return e===null?NaN:+e}const SE=p3(tm),CE=SE.right;p3(wE).center;function Ib(e,t){let i,r;if(t===void 0)for(const c of e)c!=null&&(i===void 0?c>=c&&(i=r=c):(i>c&&(i=c),r<c&&(r=c)));else{let c=-1;for(let h of e)(h=t(h,++c,e))!=null&&(i===void 0?h>=h&&(i=r=h):(i>h&&(i=h),r<h&&(r=h)))}return[i,r]}const EE=Math.sqrt(50),IE=Math.sqrt(10),TE=Math.sqrt(2);function ym(e,t,i){const r=(t-e)/Math.max(0,i),c=Math.floor(Math.log10(r)),h=r/Math.pow(10,c),v=h>=EE?10:h>=IE?5:h>=TE?2:1;let o,k,O;return c<0?(O=Math.pow(10,-c)/v,o=Math.round(e*O),k=Math.round(t*O),o/O<e&&++o,k/O>t&&--k,O=-O):(O=Math.pow(10,c)*v,o=Math.round(e/O),k=Math.round(t/O),o*O<e&&++o,k*O>t&&--k),k<o&&.5<=i&&i<2?ym(e,t,i*2):[o,k,O]}function kE(e,t,i){if(t=+t,e=+e,i=+i,!(i>0))return[];if(e===t)return[e];const r=t<e,[c,h,v]=r?ym(t,e,i):ym(e,t,i);if(!(h>=c))return[];const o=h-c+1,k=new Array(o);if(r)if(v<0)for(let O=0;O<o;++O)k[O]=(h-O)/-v;else for(let O=0;O<o;++O)k[O]=(h-O)*v;else if(v<0)for(let O=0;O<o;++O)k[O]=(c+O)/-v;else for(let O=0;O<o;++O)k[O]=(c+O)*v;return k}function L2(e,t,i){return t=+t,e=+e,i=+i,ym(e,t,i)[2]}function ME(e,t,i){t=+t,e=+e,i=+i;const r=t<e,c=r?L2(t,e,i):L2(e,t,i);return(r?-1:1)*(c<0?1/-c:c)}function PE(e){return e}var R_=1,O_=2,B2=3,Nd=4,Tb=1e-6;function DE(e){return"translate("+e+",0)"}function LE(e){return"translate(0,"+e+")"}function BE(e){return t=>+e(t)}function RE(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),i=>+e(i)+t}function OE(){return!this.__axis}function g3(e,t){var i=[],r=null,c=null,h=6,v=6,o=3,k=typeof window<"u"&&window.devicePixelRatio>1?0:.5,O=e===R_||e===Nd?-1:1,j=e===Nd||e===O_?"x":"y",J=e===R_||e===B2?DE:LE;function oe(se){var be=r??(t.ticks?t.ticks.apply(t,i):t.domain()),qe=c??(t.tickFormat?t.tickFormat.apply(t,i):PE),ke=Math.max(h,0)+o,Qe=t.range(),We=+Qe[0]+k,ct=+Qe[Qe.length-1]+k,St=(t.bandwidth?RE:BE)(t.copy(),k),yt=se.selection?se.selection():se,xe=yt.selectAll(".domain").data([null]),Gt=yt.selectAll(".tick").data(be,t).order(),Ve=Gt.exit(),Je=Gt.enter().append("g").attr("class","tick"),et=Gt.select("line"),lt=Gt.select("text");xe=xe.merge(xe.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),Gt=Gt.merge(Je),et=et.merge(Je.append("line").attr("stroke","currentColor").attr(j+"2",O*h)),lt=lt.merge(Je.append("text").attr("fill","currentColor").attr(j,O*ke).attr("dy",e===R_?"0em":e===B2?"0.71em":"0.32em")),se!==yt&&(xe=xe.transition(se),Gt=Gt.transition(se),et=et.transition(se),lt=lt.transition(se),Ve=Ve.transition(se).attr("opacity",Tb).attr("transform",function(ut){return isFinite(ut=St(ut))?J(ut+k):this.getAttribute("transform")}),Je.attr("opacity",Tb).attr("transform",function(ut){var Ke=this.parentNode.__axis;return J((Ke&&isFinite(Ke=Ke(ut))?Ke:St(ut))+k)})),Ve.remove(),xe.attr("d",e===Nd||e===O_?v?"M"+O*v+","+We+"H"+k+"V"+ct+"H"+O*v:"M"+k+","+We+"V"+ct:v?"M"+We+","+O*v+"V"+k+"H"+ct+"V"+O*v:"M"+We+","+k+"H"+ct),Gt.attr("opacity",1).attr("transform",function(ut){return J(St(ut)+k)}),et.attr(j+"2",O*h),lt.attr(j,O*ke).text(qe),yt.filter(OE).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===O_?"start":e===Nd?"end":"middle"),yt.each(function(){this.__axis=St})}return oe.scale=function(se){return arguments.length?(t=se,oe):t},oe.ticks=function(){return i=Array.from(arguments),oe},oe.tickArguments=function(se){return arguments.length?(i=se==null?[]:Array.from(se),oe):i.slice()},oe.tickValues=function(se){return arguments.length?(r=se==null?null:Array.from(se),oe):r&&r.slice()},oe.tickFormat=function(se){return arguments.length?(c=se,oe):c},oe.tickSize=function(se){return arguments.length?(h=v=+se,oe):h},oe.tickSizeInner=function(se){return arguments.length?(h=+se,oe):h},oe.tickSizeOuter=function(se){return arguments.length?(v=+se,oe):v},oe.tickPadding=function(se){return arguments.length?(o=+se,oe):o},oe.offset=function(se){return arguments.length?(k=+se,oe):k},oe}function zE(e){return g3(B2,e)}function FE(e){return g3(Nd,e)}var NE={value:()=>{}};function m3(){for(var e=0,t=arguments.length,i={},r;e<t;++e){if(!(r=arguments[e]+"")||r in i||/[\s.]/.test(r))throw new Error("illegal type: "+r);i[r]=[]}return new im(i)}function im(e){this._=e}function VE(e,t){return e.trim().split(/^|\s+/).map(function(i){var r="",c=i.indexOf(".");if(c>=0&&(r=i.slice(c+1),i=i.slice(0,c)),i&&!t.hasOwnProperty(i))throw new Error("unknown type: "+i);return{type:i,name:r}})}im.prototype=m3.prototype={constructor:im,on:function(e,t){var i=this._,r=VE(e+"",i),c,h=-1,v=r.length;if(arguments.length<2){for(;++h<v;)if((c=(e=r[h]).type)&&(c=UE(i[c],e.name)))return c;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++h<v;)if(c=(e=r[h]).type)i[c]=kb(i[c],e.name,t);else if(t==null)for(c in i)i[c]=kb(i[c],e.name,null);return this},copy:function(){var e={},t=this._;for(var i in t)e[i]=t[i].slice();return new im(e)},call:function(e,t){if((c=arguments.length-2)>0)for(var i=new Array(c),r=0,c,h;r<c;++r)i[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(h=this._[e],r=0,c=h.length;r<c;++r)h[r].value.apply(t,i)},apply:function(e,t,i){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],c=0,h=r.length;c<h;++c)r[c].value.apply(t,i)}};function UE(e,t){for(var i=0,r=e.length,c;i<r;++i)if((c=e[i]).name===t)return c.value}function kb(e,t,i){for(var r=0,c=e.length;r<c;++r)if(e[r].name===t){e[r]=NE,e=e.slice(0,r).concat(e.slice(r+1));break}return i!=null&&e.push({name:t,value:i}),e}var R2="http://www.w3.org/1999/xhtml";const Mb={svg:"http://www.w3.org/2000/svg",xhtml:R2,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function $m(e){var t=e+="",i=t.indexOf(":");return i>=0&&(t=e.slice(0,i))!=="xmlns"&&(e=e.slice(i+1)),Mb.hasOwnProperty(t)?{space:Mb[t],local:e}:e}function GE(e){return function(){var t=this.ownerDocument,i=this.namespaceURI;return i===R2&&t.documentElement.namespaceURI===R2?t.createElement(e):t.createElementNS(i,e)}}function HE(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function _3(e){var t=$m(e);return(t.local?HE:GE)(t)}function QE(){}function Pv(e){return e==null?QE:function(){return this.querySelector(e)}}function qE(e){typeof e!="function"&&(e=Pv(e));for(var t=this._groups,i=t.length,r=new Array(i),c=0;c<i;++c)for(var h=t[c],v=h.length,o=r[c]=new Array(v),k,O,j=0;j<v;++j)(k=h[j])&&(O=e.call(k,k.__data__,j,h))&&("__data__"in k&&(O.__data__=k.__data__),o[j]=O);return new Xl(r,this._parents)}function ZE(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function jE(){return[]}function v3(e){return e==null?jE:function(){return this.querySelectorAll(e)}}function WE(e){return function(){return ZE(e.apply(this,arguments))}}function YE(e){typeof e=="function"?e=WE(e):e=v3(e);for(var t=this._groups,i=t.length,r=[],c=[],h=0;h<i;++h)for(var v=t[h],o=v.length,k,O=0;O<o;++O)(k=v[O])&&(r.push(e.call(k,k.__data__,O,v)),c.push(k));return new Xl(r,c)}function y3(e){return function(){return this.matches(e)}}function b3(e){return function(t){return t.matches(e)}}var XE=Array.prototype.find;function KE(e){return function(){return XE.call(this.children,e)}}function JE(){return this.firstElementChild}function $E(e){return this.select(e==null?JE:KE(typeof e=="function"?e:b3(e)))}var eI=Array.prototype.filter;function tI(){return Array.from(this.children)}function iI(e){return function(){return eI.call(this.children,e)}}function nI(e){return this.selectAll(e==null?tI:iI(typeof e=="function"?e:b3(e)))}function rI(e){typeof e!="function"&&(e=y3(e));for(var t=this._groups,i=t.length,r=new Array(i),c=0;c<i;++c)for(var h=t[c],v=h.length,o=r[c]=[],k,O=0;O<v;++O)(k=h[O])&&e.call(k,k.__data__,O,h)&&o.push(k);return new Xl(r,this._parents)}function x3(e){return new Array(e.length)}function sI(){return new Xl(this._enter||this._groups.map(x3),this._parents)}function bm(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}bm.prototype={constructor:bm,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function aI(e){return function(){return e}}function oI(e,t,i,r,c,h){for(var v=0,o,k=t.length,O=h.length;v<O;++v)(o=t[v])?(o.__data__=h[v],r[v]=o):i[v]=new bm(e,h[v]);for(;v<k;++v)(o=t[v])&&(c[v]=o)}function AI(e,t,i,r,c,h,v){var o,k,O=new Map,j=t.length,J=h.length,oe=new Array(j),se;for(o=0;o<j;++o)(k=t[o])&&(oe[o]=se=v.call(k,k.__data__,o,t)+"",O.has(se)?c[o]=k:O.set(se,k));for(o=0;o<J;++o)se=v.call(e,h[o],o,h)+"",(k=O.get(se))?(r[o]=k,k.__data__=h[o],O.delete(se)):i[o]=new bm(e,h[o]);for(o=0;o<j;++o)(k=t[o])&&O.get(oe[o])===k&&(c[o]=k)}function lI(e){return e.__data__}function uI(e,t){if(!arguments.length)return Array.from(this,lI);var i=t?AI:oI,r=this._parents,c=this._groups;typeof e!="function"&&(e=aI(e));for(var h=c.length,v=new Array(h),o=new Array(h),k=new Array(h),O=0;O<h;++O){var j=r[O],J=c[O],oe=J.length,se=cI(e.call(j,j&&j.__data__,O,r)),be=se.length,qe=o[O]=new Array(be),ke=v[O]=new Array(be),Qe=k[O]=new Array(oe);i(j,J,qe,ke,Qe,se,t);for(var We=0,ct=0,St,yt;We<be;++We)if(St=qe[We]){for(We>=ct&&(ct=We+1);!(yt=ke[ct])&&++ct<be;);St._next=yt||null}}return v=new Xl(v,r),v._enter=o,v._exit=k,v}function cI(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function hI(){return new Xl(this._exit||this._groups.map(x3),this._parents)}function fI(e,t,i){var r=this.enter(),c=this,h=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(c=t(c),c&&(c=c.selection())),i==null?h.remove():i(h),r&&c?r.merge(c).order():c}function dI(e){for(var t=e.selection?e.selection():e,i=this._groups,r=t._groups,c=i.length,h=r.length,v=Math.min(c,h),o=new Array(c),k=0;k<v;++k)for(var O=i[k],j=r[k],J=O.length,oe=o[k]=new Array(J),se,be=0;be<J;++be)(se=O[be]||j[be])&&(oe[be]=se);for(;k<c;++k)o[k]=i[k];return new Xl(o,this._parents)}function pI(){for(var e=this._groups,t=-1,i=e.length;++t<i;)for(var r=e[t],c=r.length-1,h=r[c],v;--c>=0;)(v=r[c])&&(h&&v.compareDocumentPosition(h)^4&&h.parentNode.insertBefore(v,h),h=v);return this}function gI(e){e||(e=mI);function t(J,oe){return J&&oe?e(J.__data__,oe.__data__):!J-!oe}for(var i=this._groups,r=i.length,c=new Array(r),h=0;h<r;++h){for(var v=i[h],o=v.length,k=c[h]=new Array(o),O,j=0;j<o;++j)(O=v[j])&&(k[j]=O);k.sort(t)}return new Xl(c,this._parents).order()}function mI(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function _I(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function vI(){return Array.from(this)}function yI(){for(var e=this._groups,t=0,i=e.length;t<i;++t)for(var r=e[t],c=0,h=r.length;c<h;++c){var v=r[c];if(v)return v}return null}function bI(){let e=0;for(const t of this)++e;return e}function xI(){return!this.node()}function wI(e){for(var t=this._groups,i=0,r=t.length;i<r;++i)for(var c=t[i],h=0,v=c.length,o;h<v;++h)(o=c[h])&&e.call(o,o.__data__,h,c);return this}function SI(e){return function(){this.removeAttribute(e)}}function CI(e){return function(){this.removeAttributeNS(e.space,e.local)}}function EI(e,t){return function(){this.setAttribute(e,t)}}function II(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function TI(e,t){return function(){var i=t.apply(this,arguments);i==null?this.removeAttribute(e):this.setAttribute(e,i)}}function kI(e,t){return function(){var i=t.apply(this,arguments);i==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,i)}}function MI(e,t){var i=$m(e);if(arguments.length<2){var r=this.node();return i.local?r.getAttributeNS(i.space,i.local):r.getAttribute(i)}return this.each((t==null?i.local?CI:SI:typeof t=="function"?i.local?kI:TI:i.local?II:EI)(i,t))}function w3(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function PI(e){return function(){this.style.removeProperty(e)}}function DI(e,t,i){return function(){this.style.setProperty(e,t,i)}}function LI(e,t,i){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,i)}}function BI(e,t,i){return arguments.length>1?this.each((t==null?PI:typeof t=="function"?LI:DI)(e,t,i??"")):h0(this.node(),e)}function h0(e,t){return e.style.getPropertyValue(t)||w3(e).getComputedStyle(e,null).getPropertyValue(t)}function RI(e){return function(){delete this[e]}}function OI(e,t){return function(){this[e]=t}}function zI(e,t){return function(){var i=t.apply(this,arguments);i==null?delete this[e]:this[e]=i}}function FI(e,t){return arguments.length>1?this.each((t==null?RI:typeof t=="function"?zI:OI)(e,t)):this.node()[e]}function S3(e){return e.trim().split(/^|\s+/)}function Dv(e){return e.classList||new C3(e)}function C3(e){this._node=e,this._names=S3(e.getAttribute("class")||"")}C3.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function E3(e,t){for(var i=Dv(e),r=-1,c=t.length;++r<c;)i.add(t[r])}function I3(e,t){for(var i=Dv(e),r=-1,c=t.length;++r<c;)i.remove(t[r])}function NI(e){return function(){E3(this,e)}}function VI(e){return function(){I3(this,e)}}function UI(e,t){return function(){(t.apply(this,arguments)?E3:I3)(this,e)}}function GI(e,t){var i=S3(e+"");if(arguments.length<2){for(var r=Dv(this.node()),c=-1,h=i.length;++c<h;)if(!r.contains(i[c]))return!1;return!0}return this.each((typeof t=="function"?UI:t?NI:VI)(i,t))}function HI(){this.textContent=""}function QI(e){return function(){this.textContent=e}}function qI(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function ZI(e){return arguments.length?this.each(e==null?HI:(typeof e=="function"?qI:QI)(e)):this.node().textContent}function jI(){this.innerHTML=""}function WI(e){return function(){this.innerHTML=e}}function YI(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function XI(e){return arguments.length?this.each(e==null?jI:(typeof e=="function"?YI:WI)(e)):this.node().innerHTML}function KI(){this.nextSibling&&this.parentNode.appendChild(this)}function JI(){return this.each(KI)}function $I(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function eT(){return this.each($I)}function tT(e){var t=typeof e=="function"?e:_3(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function iT(){return null}function nT(e,t){var i=typeof e=="function"?e:_3(e),r=t==null?iT:typeof t=="function"?t:Pv(t);return this.select(function(){return this.insertBefore(i.apply(this,arguments),r.apply(this,arguments)||null)})}function rT(){var e=this.parentNode;e&&e.removeChild(this)}function sT(){return this.each(rT)}function aT(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function oT(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function AT(e){return this.select(e?oT:aT)}function lT(e){return arguments.length?this.property("__data__",e):this.node().__data__}function uT(e){return function(t){e.call(this,t,this.__data__)}}function cT(e){return e.trim().split(/^|\s+/).map(function(t){var i="",r=t.indexOf(".");return r>=0&&(i=t.slice(r+1),t=t.slice(0,r)),{type:t,name:i}})}function hT(e){return function(){var t=this.__on;if(t){for(var i=0,r=-1,c=t.length,h;i<c;++i)h=t[i],(!e.type||h.type===e.type)&&h.name===e.name?this.removeEventListener(h.type,h.listener,h.options):t[++r]=h;++r?t.length=r:delete this.__on}}}function fT(e,t,i){return function(){var r=this.__on,c,h=uT(t);if(r){for(var v=0,o=r.length;v<o;++v)if((c=r[v]).type===e.type&&c.name===e.name){this.removeEventListener(c.type,c.listener,c.options),this.addEventListener(c.type,c.listener=h,c.options=i),c.value=t;return}}this.addEventListener(e.type,h,i),c={type:e.type,name:e.name,value:t,listener:h,options:i},r?r.push(c):this.__on=[c]}}function dT(e,t,i){var r=cT(e+""),c,h=r.length,v;if(arguments.length<2){var o=this.node().__on;if(o){for(var k=0,O=o.length,j;k<O;++k)for(c=0,j=o[k];c<h;++c)if((v=r[c]).type===j.type&&v.name===j.name)return j.value}return}for(o=t?fT:hT,c=0;c<h;++c)this.each(o(r[c],t,i));return this}function T3(e,t,i){var r=w3(e),c=r.CustomEvent;typeof c=="function"?c=new c(t,i):(c=r.document.createEvent("Event"),i?(c.initEvent(t,i.bubbles,i.cancelable),c.detail=i.detail):c.initEvent(t,!1,!1)),e.dispatchEvent(c)}function pT(e,t){return function(){return T3(this,e,t)}}function gT(e,t){return function(){return T3(this,e,t.apply(this,arguments))}}function mT(e,t){return this.each((typeof t=="function"?gT:pT)(e,t))}function*_T(){for(var e=this._groups,t=0,i=e.length;t<i;++t)for(var r=e[t],c=0,h=r.length,v;c<h;++c)(v=r[c])&&(yield v)}var k3=[null];function Xl(e,t){this._groups=e,this._parents=t}function Ap(){return new Xl([[document.documentElement]],k3)}function vT(){return this}Xl.prototype=Ap.prototype={constructor:Xl,select:qE,selectAll:YE,selectChild:$E,selectChildren:nI,filter:rI,data:uI,enter:sI,exit:hI,join:fI,merge:dI,selection:vT,order:pI,sort:gI,call:_I,nodes:vI,node:yI,size:bI,empty:xI,each:wI,attr:MI,style:BI,property:FI,classed:GI,text:ZI,html:XI,raise:JI,lower:eT,append:tT,insert:nT,remove:sT,clone:AT,datum:lT,on:dT,dispatch:mT,[Symbol.iterator]:_T};function nm(e){return typeof e=="string"?new Xl([[document.querySelector(e)]],[document.documentElement]):new Xl([[e]],k3)}function Lv(e,t,i){e.prototype=t.prototype=i,i.constructor=e}function M3(e,t){var i=Object.create(e.prototype);for(var r in t)i[r]=t[r];return i}function lp(){}var Wd=.7,xm=1/Wd,l0="\\s*([+-]?\\d+)\\s*",Yd="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",nc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",yT=/^#([0-9a-f]{3,8})$/,bT=new RegExp(`^rgb\\(${l0},${l0},${l0}\\)$`),xT=new RegExp(`^rgb\\(${nc},${nc},${nc}\\)$`),wT=new RegExp(`^rgba\\(${l0},${l0},${l0},${Yd}\\)$`),ST=new RegExp(`^rgba\\(${nc},${nc},${nc},${Yd}\\)$`),CT=new RegExp(`^hsl\\(${Yd},${nc},${nc}\\)$`),ET=new RegExp(`^hsla\\(${Yd},${nc},${nc},${Yd}\\)$`),Pb={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Lv(lp,af,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Db,formatHex:Db,formatHex8:IT,formatHsl:TT,formatRgb:Lb,toString:Lb});function Db(){return this.rgb().formatHex()}function IT(){return this.rgb().formatHex8()}function TT(){return P3(this).formatHsl()}function Lb(){return this.rgb().formatRgb()}function af(e){var t,i;return e=(e+"").trim().toLowerCase(),(t=yT.exec(e))?(i=t[1].length,t=parseInt(t[1],16),i===6?Bb(t):i===3?new El(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):i===8?Hg(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):i===4?Hg(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=bT.exec(e))?new El(t[1],t[2],t[3],1):(t=xT.exec(e))?new El(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=wT.exec(e))?Hg(t[1],t[2],t[3],t[4]):(t=ST.exec(e))?Hg(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=CT.exec(e))?zb(t[1],t[2]/100,t[3]/100,1):(t=ET.exec(e))?zb(t[1],t[2]/100,t[3]/100,t[4]):Pb.hasOwnProperty(e)?Bb(Pb[e]):e==="transparent"?new El(NaN,NaN,NaN,0):null}function Bb(e){return new El(e>>16&255,e>>8&255,e&255,1)}function Hg(e,t,i,r){return r<=0&&(e=t=i=NaN),new El(e,t,i,r)}function kT(e){return e instanceof lp||(e=af(e)),e?(e=e.rgb(),new El(e.r,e.g,e.b,e.opacity)):new El}function O2(e,t,i,r){return arguments.length===1?kT(e):new El(e,t,i,r??1)}function El(e,t,i,r){this.r=+e,this.g=+t,this.b=+i,this.opacity=+r}Lv(El,O2,M3(lp,{brighter(e){return e=e==null?xm:Math.pow(xm,e),new El(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Wd:Math.pow(Wd,e),new El(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new El(ef(this.r),ef(this.g),ef(this.b),wm(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Rb,formatHex:Rb,formatHex8:MT,formatRgb:Ob,toString:Ob}));function Rb(){return`#${Kh(this.r)}${Kh(this.g)}${Kh(this.b)}`}function MT(){return`#${Kh(this.r)}${Kh(this.g)}${Kh(this.b)}${Kh((isNaN(this.opacity)?1:this.opacity)*255)}`}function Ob(){const e=wm(this.opacity);return`${e===1?"rgb(":"rgba("}${ef(this.r)}, ${ef(this.g)}, ${ef(this.b)}${e===1?")":`, ${e})`}`}function wm(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function ef(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Kh(e){return e=ef(e),(e<16?"0":"")+e.toString(16)}function zb(e,t,i,r){return r<=0?e=t=i=NaN:i<=0||i>=1?e=t=NaN:t<=0&&(e=NaN),new zu(e,t,i,r)}function P3(e){if(e instanceof zu)return new zu(e.h,e.s,e.l,e.opacity);if(e instanceof lp||(e=af(e)),!e)return new zu;if(e instanceof zu)return e;e=e.rgb();var t=e.r/255,i=e.g/255,r=e.b/255,c=Math.min(t,i,r),h=Math.max(t,i,r),v=NaN,o=h-c,k=(h+c)/2;return o?(t===h?v=(i-r)/o+(i<r)*6:i===h?v=(r-t)/o+2:v=(t-i)/o+4,o/=k<.5?h+c:2-h-c,v*=60):o=k>0&&k<1?0:v,new zu(v,o,k,e.opacity)}function PT(e,t,i,r){return arguments.length===1?P3(e):new zu(e,t,i,r??1)}function zu(e,t,i,r){this.h=+e,this.s=+t,this.l=+i,this.opacity=+r}Lv(zu,PT,M3(lp,{brighter(e){return e=e==null?xm:Math.pow(xm,e),new zu(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Wd:Math.pow(Wd,e),new zu(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,i=this.l,r=i+(i<.5?i:1-i)*t,c=2*i-r;return new El(z_(e>=240?e-240:e+120,c,r),z_(e,c,r),z_(e<120?e+240:e-120,c,r),this.opacity)},clamp(){return new zu(Fb(this.h),Qg(this.s),Qg(this.l),wm(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=wm(this.opacity);return`${e===1?"hsl(":"hsla("}${Fb(this.h)}, ${Qg(this.s)*100}%, ${Qg(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Fb(e){return e=(e||0)%360,e<0?e+360:e}function Qg(e){return Math.max(0,Math.min(1,e||0))}function z_(e,t,i){return(e<60?t+(i-t)*e/60:e<180?i:e<240?t+(i-t)*(240-e)/60:t)*255}const Bv=e=>()=>e;function DT(e,t){return function(i){return e+i*t}}function LT(e,t,i){return e=Math.pow(e,i),t=Math.pow(t,i)-e,i=1/i,function(r){return Math.pow(e+r*t,i)}}function BT(e){return(e=+e)==1?D3:function(t,i){return i-t?LT(t,i,e):Bv(isNaN(t)?i:t)}}function D3(e,t){var i=t-e;return i?DT(e,i):Bv(isNaN(e)?t:e)}const Sm=function e(t){var i=BT(t);function r(c,h){var v=i((c=O2(c)).r,(h=O2(h)).r),o=i(c.g,h.g),k=i(c.b,h.b),O=D3(c.opacity,h.opacity);return function(j){return c.r=v(j),c.g=o(j),c.b=k(j),c.opacity=O(j),c+""}}return r.gamma=e,r}(1);function RT(e,t){t||(t=[]);var i=e?Math.min(t.length,e.length):0,r=t.slice(),c;return function(h){for(c=0;c<i;++c)r[c]=e[c]*(1-h)+t[c]*h;return r}}function OT(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function zT(e,t){var i=t?t.length:0,r=e?Math.min(i,e.length):0,c=new Array(r),h=new Array(i),v;for(v=0;v<r;++v)c[v]=Rv(e[v],t[v]);for(;v<i;++v)h[v]=t[v];return function(o){for(v=0;v<r;++v)h[v]=c[v](o);return h}}function FT(e,t){var i=new Date;return e=+e,t=+t,function(r){return i.setTime(e*(1-r)+t*r),i}}function Ru(e,t){return e=+e,t=+t,function(i){return e*(1-i)+t*i}}function NT(e,t){var i={},r={},c;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(c in t)c in e?i[c]=Rv(e[c],t[c]):r[c]=t[c];return function(h){for(c in i)r[c]=i[c](h);return r}}var z2=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,F_=new RegExp(z2.source,"g");function VT(e){return function(){return e}}function UT(e){return function(t){return e(t)+""}}function L3(e,t){var i=z2.lastIndex=F_.lastIndex=0,r,c,h,v=-1,o=[],k=[];for(e=e+"",t=t+"";(r=z2.exec(e))&&(c=F_.exec(t));)(h=c.index)>i&&(h=t.slice(i,h),o[v]?o[v]+=h:o[++v]=h),(r=r[0])===(c=c[0])?o[v]?o[v]+=c:o[++v]=c:(o[++v]=null,k.push({i:v,x:Ru(r,c)})),i=F_.lastIndex;return i<t.length&&(h=t.slice(i),o[v]?o[v]+=h:o[++v]=h),o.length<2?k[0]?UT(k[0].x):VT(t):(t=k.length,function(O){for(var j=0,J;j<t;++j)o[(J=k[j]).i]=J.x(O);return o.join("")})}function Rv(e,t){var i=typeof t,r;return t==null||i==="boolean"?Bv(t):(i==="number"?Ru:i==="string"?(r=af(t))?(t=r,Sm):L3:t instanceof af?Sm:t instanceof Date?FT:OT(t)?RT:Array.isArray(t)?zT:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?NT:Ru)(e,t)}function GT(e,t){return e=+e,t=+t,function(i){return Math.round(e*(1-i)+t*i)}}var Nb=180/Math.PI,F2={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function B3(e,t,i,r,c,h){var v,o,k;return(v=Math.sqrt(e*e+t*t))&&(e/=v,t/=v),(k=e*i+t*r)&&(i-=e*k,r-=t*k),(o=Math.sqrt(i*i+r*r))&&(i/=o,r/=o,k/=o),e*r<t*i&&(e=-e,t=-t,k=-k,v=-v),{translateX:c,translateY:h,rotate:Math.atan2(t,e)*Nb,skewX:Math.atan(k)*Nb,scaleX:v,scaleY:o}}var qg;function HT(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?F2:B3(t.a,t.b,t.c,t.d,t.e,t.f)}function QT(e){return e==null||(qg||(qg=document.createElementNS("http://www.w3.org/2000/svg","g")),qg.setAttribute("transform",e),!(e=qg.transform.baseVal.consolidate()))?F2:(e=e.matrix,B3(e.a,e.b,e.c,e.d,e.e,e.f))}function R3(e,t,i,r){function c(O){return O.length?O.pop()+" ":""}function h(O,j,J,oe,se,be){if(O!==J||j!==oe){var qe=se.push("translate(",null,t,null,i);be.push({i:qe-4,x:Ru(O,J)},{i:qe-2,x:Ru(j,oe)})}else(J||oe)&&se.push("translate("+J+t+oe+i)}function v(O,j,J,oe){O!==j?(O-j>180?j+=360:j-O>180&&(O+=360),oe.push({i:J.push(c(J)+"rotate(",null,r)-2,x:Ru(O,j)})):j&&J.push(c(J)+"rotate("+j+r)}function o(O,j,J,oe){O!==j?oe.push({i:J.push(c(J)+"skewX(",null,r)-2,x:Ru(O,j)}):j&&J.push(c(J)+"skewX("+j+r)}function k(O,j,J,oe,se,be){if(O!==J||j!==oe){var qe=se.push(c(se)+"scale(",null,",",null,")");be.push({i:qe-4,x:Ru(O,J)},{i:qe-2,x:Ru(j,oe)})}else(J!==1||oe!==1)&&se.push(c(se)+"scale("+J+","+oe+")")}return function(O,j){var J=[],oe=[];return O=e(O),j=e(j),h(O.translateX,O.translateY,j.translateX,j.translateY,J,oe),v(O.rotate,j.rotate,J,oe),o(O.skewX,j.skewX,J,oe),k(O.scaleX,O.scaleY,j.scaleX,j.scaleY,J,oe),O=j=null,function(se){for(var be=-1,qe=oe.length,ke;++be<qe;)J[(ke=oe[be]).i]=ke.x(se);return J.join("")}}}var qT=R3(HT,"px, ","px)","deg)"),ZT=R3(QT,", ",")",")"),f0=0,Vd=0,Td=0,O3=1e3,Cm,Ud,Em=0,of=0,e1=0,Xd=typeof performance=="object"&&performance.now?performance:Date,z3=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Ov(){return of||(z3(jT),of=Xd.now()+e1)}function jT(){of=0}function Im(){this._call=this._time=this._next=null}Im.prototype=F3.prototype={constructor:Im,restart:function(e,t,i){if(typeof e!="function")throw new TypeError("callback is not a function");i=(i==null?Ov():+i)+(t==null?0:+t),!this._next&&Ud!==this&&(Ud?Ud._next=this:Cm=this,Ud=this),this._call=e,this._time=i,N2()},stop:function(){this._call&&(this._call=null,this._time=1/0,N2())}};function F3(e,t,i){var r=new Im;return r.restart(e,t,i),r}function WT(){Ov(),++f0;for(var e=Cm,t;e;)(t=of-e._time)>=0&&e._call.call(void 0,t),e=e._next;--f0}function Vb(){of=(Em=Xd.now())+e1,f0=Vd=0;try{WT()}finally{f0=0,XT(),of=0}}function YT(){var e=Xd.now(),t=e-Em;t>O3&&(e1-=t,Em=e)}function XT(){for(var e,t=Cm,i,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(i=t._next,t._next=null,t=e?e._next=i:Cm=i);Ud=e,N2(r)}function N2(e){if(!f0){Vd&&(Vd=clearTimeout(Vd));var t=e-of;t>24?(e<1/0&&(Vd=setTimeout(Vb,e-Xd.now()-e1)),Td&&(Td=clearInterval(Td))):(Td||(Em=Xd.now(),Td=setInterval(YT,O3)),f0=1,z3(Vb))}}function Ub(e,t,i){var r=new Im;return t=t==null?0:+t,r.restart(c=>{r.stop(),e(c+t)},t,i),r}var KT=m3("start","end","cancel","interrupt"),JT=[],N3=0,Gb=1,V2=2,rm=3,Hb=4,U2=5,sm=6;function t1(e,t,i,r,c,h){var v=e.__transition;if(!v)e.__transition={};else if(i in v)return;$T(e,i,{name:t,index:r,group:c,on:KT,tween:JT,time:h.time,delay:h.delay,duration:h.duration,ease:h.ease,timer:null,state:N3})}function zv(e,t){var i=Nu(e,t);if(i.state>N3)throw new Error("too late; already scheduled");return i}function uc(e,t){var i=Nu(e,t);if(i.state>rm)throw new Error("too late; already running");return i}function Nu(e,t){var i=e.__transition;if(!i||!(i=i[t]))throw new Error("transition not found");return i}function $T(e,t,i){var r=e.__transition,c;r[t]=i,i.timer=F3(h,0,i.time);function h(O){i.state=Gb,i.timer.restart(v,i.delay,i.time),i.delay<=O&&v(O-i.delay)}function v(O){var j,J,oe,se;if(i.state!==Gb)return k();for(j in r)if(se=r[j],se.name===i.name){if(se.state===rm)return Ub(v);se.state===Hb?(se.state=sm,se.timer.stop(),se.on.call("interrupt",e,e.__data__,se.index,se.group),delete r[j]):+j<t&&(se.state=sm,se.timer.stop(),se.on.call("cancel",e,e.__data__,se.index,se.group),delete r[j])}if(Ub(function(){i.state===rm&&(i.state=Hb,i.timer.restart(o,i.delay,i.time),o(O))}),i.state=V2,i.on.call("start",e,e.__data__,i.index,i.group),i.state===V2){for(i.state=rm,c=new Array(oe=i.tween.length),j=0,J=-1;j<oe;++j)(se=i.tween[j].value.call(e,e.__data__,i.index,i.group))&&(c[++J]=se);c.length=J+1}}function o(O){for(var j=O<i.duration?i.ease.call(null,O/i.duration):(i.timer.restart(k),i.state=U2,1),J=-1,oe=c.length;++J<oe;)c[J].call(e,j);i.state===U2&&(i.on.call("end",e,e.__data__,i.index,i.group),k())}function k(){i.state=sm,i.timer.stop(),delete r[t];for(var O in r)return;delete e.__transition}}function ek(e,t){var i=e.__transition,r,c,h=!0,v;if(i){t=t==null?null:t+"";for(v in i){if((r=i[v]).name!==t){h=!1;continue}c=r.state>V2&&r.state<U2,r.state=sm,r.timer.stop(),r.on.call(c?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete i[v]}h&&delete e.__transition}}function tk(e){return this.each(function(){ek(this,e)})}function ik(e,t){var i,r;return function(){var c=uc(this,e),h=c.tween;if(h!==i){r=i=h;for(var v=0,o=r.length;v<o;++v)if(r[v].name===t){r=r.slice(),r.splice(v,1);break}}c.tween=r}}function nk(e,t,i){var r,c;if(typeof i!="function")throw new Error;return function(){var h=uc(this,e),v=h.tween;if(v!==r){c=(r=v).slice();for(var o={name:t,value:i},k=0,O=c.length;k<O;++k)if(c[k].name===t){c[k]=o;break}k===O&&c.push(o)}h.tween=c}}function rk(e,t){var i=this._id;if(e+="",arguments.length<2){for(var r=Nu(this.node(),i).tween,c=0,h=r.length,v;c<h;++c)if((v=r[c]).name===e)return v.value;return null}return this.each((t==null?ik:nk)(i,e,t))}function Fv(e,t,i){var r=e._id;return e.each(function(){var c=uc(this,r);(c.value||(c.value={}))[t]=i.apply(this,arguments)}),function(c){return Nu(c,r).value[t]}}function V3(e,t){var i;return(typeof t=="number"?Ru:t instanceof af?Sm:(i=af(t))?(t=i,Sm):L3)(e,t)}function sk(e){return function(){this.removeAttribute(e)}}function ak(e){return function(){this.removeAttributeNS(e.space,e.local)}}function ok(e,t,i){var r,c=i+"",h;return function(){var v=this.getAttribute(e);return v===c?null:v===r?h:h=t(r=v,i)}}function Ak(e,t,i){var r,c=i+"",h;return function(){var v=this.getAttributeNS(e.space,e.local);return v===c?null:v===r?h:h=t(r=v,i)}}function lk(e,t,i){var r,c,h;return function(){var v,o=i(this),k;return o==null?void this.removeAttribute(e):(v=this.getAttribute(e),k=o+"",v===k?null:v===r&&k===c?h:(c=k,h=t(r=v,o)))}}function uk(e,t,i){var r,c,h;return function(){var v,o=i(this),k;return o==null?void this.removeAttributeNS(e.space,e.local):(v=this.getAttributeNS(e.space,e.local),k=o+"",v===k?null:v===r&&k===c?h:(c=k,h=t(r=v,o)))}}function ck(e,t){var i=$m(e),r=i==="transform"?ZT:V3;return this.attrTween(e,typeof t=="function"?(i.local?uk:lk)(i,r,Fv(this,"attr."+e,t)):t==null?(i.local?ak:sk)(i):(i.local?Ak:ok)(i,r,t))}function hk(e,t){return function(i){this.setAttribute(e,t.call(this,i))}}function fk(e,t){return function(i){this.setAttributeNS(e.space,e.local,t.call(this,i))}}function dk(e,t){var i,r;function c(){var h=t.apply(this,arguments);return h!==r&&(i=(r=h)&&fk(e,h)),i}return c._value=t,c}function pk(e,t){var i,r;function c(){var h=t.apply(this,arguments);return h!==r&&(i=(r=h)&&hk(e,h)),i}return c._value=t,c}function gk(e,t){var i="attr."+e;if(arguments.length<2)return(i=this.tween(i))&&i._value;if(t==null)return this.tween(i,null);if(typeof t!="function")throw new Error;var r=$m(e);return this.tween(i,(r.local?dk:pk)(r,t))}function mk(e,t){return function(){zv(this,e).delay=+t.apply(this,arguments)}}function _k(e,t){return t=+t,function(){zv(this,e).delay=t}}function vk(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?mk:_k)(t,e)):Nu(this.node(),t).delay}function yk(e,t){return function(){uc(this,e).duration=+t.apply(this,arguments)}}function bk(e,t){return t=+t,function(){uc(this,e).duration=t}}function xk(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?yk:bk)(t,e)):Nu(this.node(),t).duration}function wk(e,t){if(typeof t!="function")throw new Error;return function(){uc(this,e).ease=t}}function Sk(e){var t=this._id;return arguments.length?this.each(wk(t,e)):Nu(this.node(),t).ease}function Ck(e,t){return function(){var i=t.apply(this,arguments);if(typeof i!="function")throw new Error;uc(this,e).ease=i}}function Ek(e){if(typeof e!="function")throw new Error;return this.each(Ck(this._id,e))}function Ik(e){typeof e!="function"&&(e=y3(e));for(var t=this._groups,i=t.length,r=new Array(i),c=0;c<i;++c)for(var h=t[c],v=h.length,o=r[c]=[],k,O=0;O<v;++O)(k=h[O])&&e.call(k,k.__data__,O,h)&&o.push(k);return new Gc(r,this._parents,this._name,this._id)}function Tk(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,i=e._groups,r=t.length,c=i.length,h=Math.min(r,c),v=new Array(r),o=0;o<h;++o)for(var k=t[o],O=i[o],j=k.length,J=v[o]=new Array(j),oe,se=0;se<j;++se)(oe=k[se]||O[se])&&(J[se]=oe);for(;o<r;++o)v[o]=t[o];return new Gc(v,this._parents,this._name,this._id)}function kk(e){return(e+"").trim().split(/^|\s+/).every(function(t){var i=t.indexOf(".");return i>=0&&(t=t.slice(0,i)),!t||t==="start"})}function Mk(e,t,i){var r,c,h=kk(t)?zv:uc;return function(){var v=h(this,e),o=v.on;o!==r&&(c=(r=o).copy()).on(t,i),v.on=c}}function Pk(e,t){var i=this._id;return arguments.length<2?Nu(this.node(),i).on.on(e):this.each(Mk(i,e,t))}function Dk(e){return function(){var t=this.parentNode;for(var i in this.__transition)if(+i!==e)return;t&&t.removeChild(this)}}function Lk(){return this.on("end.remove",Dk(this._id))}function Bk(e){var t=this._name,i=this._id;typeof e!="function"&&(e=Pv(e));for(var r=this._groups,c=r.length,h=new Array(c),v=0;v<c;++v)for(var o=r[v],k=o.length,O=h[v]=new Array(k),j,J,oe=0;oe<k;++oe)(j=o[oe])&&(J=e.call(j,j.__data__,oe,o))&&("__data__"in j&&(J.__data__=j.__data__),O[oe]=J,t1(O[oe],t,i,oe,O,Nu(j,i)));return new Gc(h,this._parents,t,i)}function Rk(e){var t=this._name,i=this._id;typeof e!="function"&&(e=v3(e));for(var r=this._groups,c=r.length,h=[],v=[],o=0;o<c;++o)for(var k=r[o],O=k.length,j,J=0;J<O;++J)if(j=k[J]){for(var oe=e.call(j,j.__data__,J,k),se,be=Nu(j,i),qe=0,ke=oe.length;qe<ke;++qe)(se=oe[qe])&&t1(se,t,i,qe,oe,be);h.push(oe),v.push(j)}return new Gc(h,v,t,i)}var Ok=Ap.prototype.constructor;function zk(){return new Ok(this._groups,this._parents)}function Fk(e,t){var i,r,c;return function(){var h=h0(this,e),v=(this.style.removeProperty(e),h0(this,e));return h===v?null:h===i&&v===r?c:c=t(i=h,r=v)}}function U3(e){return function(){this.style.removeProperty(e)}}function Nk(e,t,i){var r,c=i+"",h;return function(){var v=h0(this,e);return v===c?null:v===r?h:h=t(r=v,i)}}function Vk(e,t,i){var r,c,h;return function(){var v=h0(this,e),o=i(this),k=o+"";return o==null&&(k=o=(this.style.removeProperty(e),h0(this,e))),v===k?null:v===r&&k===c?h:(c=k,h=t(r=v,o))}}function Uk(e,t){var i,r,c,h="style."+t,v="end."+h,o;return function(){var k=uc(this,e),O=k.on,j=k.value[h]==null?o||(o=U3(t)):void 0;(O!==i||c!==j)&&(r=(i=O).copy()).on(v,c=j),k.on=r}}function Gk(e,t,i){var r=(e+="")=="transform"?qT:V3;return t==null?this.styleTween(e,Fk(e,r)).on("end.style."+e,U3(e)):typeof t=="function"?this.styleTween(e,Vk(e,r,Fv(this,"style."+e,t))).each(Uk(this._id,e)):this.styleTween(e,Nk(e,r,t),i).on("end.style."+e,null)}function Hk(e,t,i){return function(r){this.style.setProperty(e,t.call(this,r),i)}}function Qk(e,t,i){var r,c;function h(){var v=t.apply(this,arguments);return v!==c&&(r=(c=v)&&Hk(e,v,i)),r}return h._value=t,h}function qk(e,t,i){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,Qk(e,t,i??""))}function Zk(e){return function(){this.textContent=e}}function jk(e){return function(){var t=e(this);this.textContent=t??""}}function Wk(e){return this.tween("text",typeof e=="function"?jk(Fv(this,"text",e)):Zk(e==null?"":e+""))}function Yk(e){return function(t){this.textContent=e.call(this,t)}}function Xk(e){var t,i;function r(){var c=e.apply(this,arguments);return c!==i&&(t=(i=c)&&Yk(c)),t}return r._value=e,r}function Kk(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Xk(e))}function Jk(){for(var e=this._name,t=this._id,i=G3(),r=this._groups,c=r.length,h=0;h<c;++h)for(var v=r[h],o=v.length,k,O=0;O<o;++O)if(k=v[O]){var j=Nu(k,t);t1(k,e,i,O,v,{time:j.time+j.delay+j.duration,delay:0,duration:j.duration,ease:j.ease})}return new Gc(r,this._parents,e,i)}function $k(){var e,t,i=this,r=i._id,c=i.size();return new Promise(function(h,v){var o={value:v},k={value:function(){--c===0&&h()}};i.each(function(){var O=uc(this,r),j=O.on;j!==e&&(t=(e=j).copy(),t._.cancel.push(o),t._.interrupt.push(o),t._.end.push(k)),O.on=t}),c===0&&h()})}var eM=0;function Gc(e,t,i,r){this._groups=e,this._parents=t,this._name=i,this._id=r}function G3(){return++eM}var Pc=Ap.prototype;Gc.prototype={constructor:Gc,select:Bk,selectAll:Rk,selectChild:Pc.selectChild,selectChildren:Pc.selectChildren,filter:Ik,merge:Tk,selection:zk,transition:Jk,call:Pc.call,nodes:Pc.nodes,node:Pc.node,size:Pc.size,empty:Pc.empty,each:Pc.each,on:Pk,attr:ck,attrTween:gk,style:Gk,styleTween:qk,text:Wk,textTween:Kk,remove:Lk,tween:rk,delay:vk,duration:xk,ease:Sk,easeVarying:Ek,end:$k,[Symbol.iterator]:Pc[Symbol.iterator]};function tM(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var iM={time:null,delay:0,duration:250,ease:tM};function nM(e,t){for(var i;!(i=e.__transition)||!(i=i[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return i}function rM(e){var t,i;e instanceof Gc?(t=e._id,e=e._name):(t=G3(),(i=iM).time=Ov(),e=e==null?null:e+"");for(var r=this._groups,c=r.length,h=0;h<c;++h)for(var v=r[h],o=v.length,k,O=0;O<o;++O)(k=v[O])&&t1(k,e,t,O,v,i||nM(k,t));return new Gc(r,this._parents,e,t)}Ap.prototype.interrupt=tk;Ap.prototype.transition=rM;const G2=Math.PI,H2=2*G2,Yh=1e-6,sM=H2-Yh;function H3(e){this._+=e[0];for(let t=1,i=e.length;t<i;++t)this._+=arguments[t]+e[t]}function aM(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return H3;const i=10**t;return function(r){this._+=r[0];for(let c=1,h=r.length;c<h;++c)this._+=Math.round(arguments[c]*i)/i+r[c]}}let oM=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?H3:aM(t)}moveTo(t,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+i}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,i){this._append`L${this._x1=+t},${this._y1=+i}`}quadraticCurveTo(t,i,r,c){this._append`Q${+t},${+i},${this._x1=+r},${this._y1=+c}`}bezierCurveTo(t,i,r,c,h,v){this._append`C${+t},${+i},${+r},${+c},${this._x1=+h},${this._y1=+v}`}arcTo(t,i,r,c,h){if(t=+t,i=+i,r=+r,c=+c,h=+h,h<0)throw new Error(`negative radius: ${h}`);let v=this._x1,o=this._y1,k=r-t,O=c-i,j=v-t,J=o-i,oe=j*j+J*J;if(this._x1===null)this._append`M${this._x1=t},${this._y1=i}`;else if(oe>Yh)if(!(Math.abs(J*k-O*j)>Yh)||!h)this._append`L${this._x1=t},${this._y1=i}`;else{let se=r-v,be=c-o,qe=k*k+O*O,ke=se*se+be*be,Qe=Math.sqrt(qe),We=Math.sqrt(oe),ct=h*Math.tan((G2-Math.acos((qe+oe-ke)/(2*Qe*We)))/2),St=ct/We,yt=ct/Qe;Math.abs(St-1)>Yh&&this._append`L${t+St*j},${i+St*J}`,this._append`A${h},${h},0,0,${+(J*se>j*be)},${this._x1=t+yt*k},${this._y1=i+yt*O}`}}arc(t,i,r,c,h,v){if(t=+t,i=+i,r=+r,v=!!v,r<0)throw new Error(`negative radius: ${r}`);let o=r*Math.cos(c),k=r*Math.sin(c),O=t+o,j=i+k,J=1^v,oe=v?c-h:h-c;this._x1===null?this._append`M${O},${j}`:(Math.abs(this._x1-O)>Yh||Math.abs(this._y1-j)>Yh)&&this._append`L${O},${j}`,r&&(oe<0&&(oe=oe%H2+H2),oe>sM?this._append`A${r},${r},0,1,${J},${t-o},${i-k}A${r},${r},0,1,${J},${this._x1=O},${this._y1=j}`:oe>Yh&&this._append`A${r},${r},0,${+(oe>=G2)},${J},${this._x1=t+r*Math.cos(h)},${this._y1=i+r*Math.sin(h)}`)}rect(t,i,r,c){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+i}h${r=+r}v${+c}h${-r}Z`}toString(){return this._}};function AM(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Tm(e,t){if((i=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var i,r=e.slice(0,i);return[r.length>1?r[0]+r.slice(2):r,+e.slice(i+1)]}function d0(e){return e=Tm(Math.abs(e)),e?e[1]:NaN}function lM(e,t){return function(i,r){for(var c=i.length,h=[],v=0,o=e[0],k=0;c>0&&o>0&&(k+o+1>r&&(o=Math.max(1,r-k)),h.push(i.substring(c-=o,c+o)),!((k+=o+1)>r));)o=e[v=(v+1)%e.length];return h.reverse().join(t)}}function uM(e){return function(t){return t.replace(/[0-9]/g,function(i){return e[+i]})}}var cM=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function km(e){if(!(t=cM.exec(e)))throw new Error("invalid format: "+e);var t;return new Nv({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}km.prototype=Nv.prototype;function Nv(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Nv.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function hM(e){e:for(var t=e.length,i=1,r=-1,c;i<t;++i)switch(e[i]){case".":r=c=i;break;case"0":r===0&&(r=i),c=i;break;default:if(!+e[i])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(c+1):e}var Q3;function fM(e,t){var i=Tm(e,t);if(!i)return e+"";var r=i[0],c=i[1],h=c-(Q3=Math.max(-8,Math.min(8,Math.floor(c/3)))*3)+1,v=r.length;return h===v?r:h>v?r+new Array(h-v+1).join("0"):h>0?r.slice(0,h)+"."+r.slice(h):"0."+new Array(1-h).join("0")+Tm(e,Math.max(0,t+h-1))[0]}function Qb(e,t){var i=Tm(e,t);if(!i)return e+"";var r=i[0],c=i[1];return c<0?"0."+new Array(-c).join("0")+r:r.length>c+1?r.slice(0,c+1)+"."+r.slice(c+1):r+new Array(c-r.length+2).join("0")}const qb={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:AM,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Qb(e*100,t),r:Qb,s:fM,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Zb(e){return e}var jb=Array.prototype.map,Wb=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function dM(e){var t=e.grouping===void 0||e.thousands===void 0?Zb:lM(jb.call(e.grouping,Number),e.thousands+""),i=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",c=e.decimal===void 0?".":e.decimal+"",h=e.numerals===void 0?Zb:uM(jb.call(e.numerals,String)),v=e.percent===void 0?"%":e.percent+"",o=e.minus===void 0?"−":e.minus+"",k=e.nan===void 0?"NaN":e.nan+"";function O(J){J=km(J);var oe=J.fill,se=J.align,be=J.sign,qe=J.symbol,ke=J.zero,Qe=J.width,We=J.comma,ct=J.precision,St=J.trim,yt=J.type;yt==="n"?(We=!0,yt="g"):qb[yt]||(ct===void 0&&(ct=12),St=!0,yt="g"),(ke||oe==="0"&&se==="=")&&(ke=!0,oe="0",se="=");var xe=qe==="$"?i:qe==="#"&&/[boxX]/.test(yt)?"0"+yt.toLowerCase():"",Gt=qe==="$"?r:/[%p]/.test(yt)?v:"",Ve=qb[yt],Je=/[defgprs%]/.test(yt);ct=ct===void 0?6:/[gprs]/.test(yt)?Math.max(1,Math.min(21,ct)):Math.max(0,Math.min(20,ct));function et(lt){var ut=xe,Ke=Gt,Me,Ze,Fe;if(yt==="c")Ke=Ve(lt)+Ke,lt="";else{lt=+lt;var vt=lt<0||1/lt<0;if(lt=isNaN(lt)?k:Ve(Math.abs(lt),ct),St&&(lt=hM(lt)),vt&&+lt==0&&be!=="+"&&(vt=!1),ut=(vt?be==="("?be:o:be==="-"||be==="("?"":be)+ut,Ke=(yt==="s"?Wb[8+Q3/3]:"")+Ke+(vt&&be==="("?")":""),Je){for(Me=-1,Ze=lt.length;++Me<Ze;)if(Fe=lt.charCodeAt(Me),48>Fe||Fe>57){Ke=(Fe===46?c+lt.slice(Me+1):lt.slice(Me))+Ke,lt=lt.slice(0,Me);break}}}We&&!ke&&(lt=t(lt,1/0));var dt=ut.length+lt.length+Ke.length,_t=dt<Qe?new Array(Qe-dt+1).join(oe):"";switch(We&&ke&&(lt=t(_t+lt,_t.length?Qe-Ke.length:1/0),_t=""),se){case"<":lt=ut+lt+Ke+_t;break;case"=":lt=ut+_t+lt+Ke;break;case"^":lt=_t.slice(0,dt=_t.length>>1)+ut+lt+Ke+_t.slice(dt);break;default:lt=_t+ut+lt+Ke;break}return h(lt)}return et.toString=function(){return J+""},et}function j(J,oe){var se=O((J=km(J),J.type="f",J)),be=Math.max(-8,Math.min(8,Math.floor(d0(oe)/3)))*3,qe=Math.pow(10,-be),ke=Wb[8+be/3];return function(Qe){return se(qe*Qe)+ke}}return{format:O,formatPrefix:j}}var Zg,q3,Z3;pM({thousands:",",grouping:[3],currency:["$",""]});function pM(e){return Zg=dM(e),q3=Zg.format,Z3=Zg.formatPrefix,Zg}function gM(e){return Math.max(0,-d0(Math.abs(e)))}function mM(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(d0(t)/3)))*3-d0(Math.abs(e)))}function _M(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,d0(t)-d0(e))+1}function vM(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function yM(e){return function(){return e}}function bM(e){return+e}var Yb=[0,1];function i0(e){return e}function Q2(e,t){return(t-=e=+e)?function(i){return(i-e)/t}:yM(isNaN(t)?NaN:.5)}function xM(e,t){var i;return e>t&&(i=e,e=t,t=i),function(r){return Math.max(e,Math.min(t,r))}}function wM(e,t,i){var r=e[0],c=e[1],h=t[0],v=t[1];return c<r?(r=Q2(c,r),h=i(v,h)):(r=Q2(r,c),h=i(h,v)),function(o){return h(r(o))}}function SM(e,t,i){var r=Math.min(e.length,t.length)-1,c=new Array(r),h=new Array(r),v=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++v<r;)c[v]=Q2(e[v],e[v+1]),h[v]=i(t[v],t[v+1]);return function(o){var k=CE(e,o,1,r)-1;return h[k](c[k](o))}}function CM(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function EM(){var e=Yb,t=Yb,i=Rv,r,c,h,v=i0,o,k,O;function j(){var oe=Math.min(e.length,t.length);return v!==i0&&(v=xM(e[0],e[oe-1])),o=oe>2?SM:wM,k=O=null,J}function J(oe){return oe==null||isNaN(oe=+oe)?h:(k||(k=o(e.map(r),t,i)))(r(v(oe)))}return J.invert=function(oe){return v(c((O||(O=o(t,e.map(r),Ru)))(oe)))},J.domain=function(oe){return arguments.length?(e=Array.from(oe,bM),j()):e.slice()},J.range=function(oe){return arguments.length?(t=Array.from(oe),j()):t.slice()},J.rangeRound=function(oe){return t=Array.from(oe),i=GT,j()},J.clamp=function(oe){return arguments.length?(v=oe?!0:i0,j()):v!==i0},J.interpolate=function(oe){return arguments.length?(i=oe,j()):i},J.unknown=function(oe){return arguments.length?(h=oe,J):h},function(oe,se){return r=oe,c=se,j()}}function IM(){return EM()(i0,i0)}function TM(e,t,i,r){var c=ME(e,t,i),h;switch(r=km(r??",f"),r.type){case"s":{var v=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(h=mM(c,v))&&(r.precision=h),Z3(r,v)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(h=_M(c,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=h-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(h=gM(c))&&(r.precision=h-(r.type==="%")*2);break}}return q3(r)}function kM(e){var t=e.domain;return e.ticks=function(i){var r=t();return kE(r[0],r[r.length-1],i??10)},e.tickFormat=function(i,r){var c=t();return TM(c[0],c[c.length-1],i??10,r)},e.nice=function(i){i==null&&(i=10);var r=t(),c=0,h=r.length-1,v=r[c],o=r[h],k,O,j=10;for(o<v&&(O=v,v=o,o=O,O=c,c=h,h=O);j-- >0;){if(O=L2(v,o,i),O===k)return r[c]=v,r[h]=o,t(r);if(O>0)v=Math.floor(v/O)*O,o=Math.ceil(o/O)*O;else if(O<0)v=Math.ceil(v*O)/O,o=Math.floor(o*O)/O;else break;k=O}return e},e}function q2(){var e=IM();return e.copy=function(){return CM(e,q2())},vM.apply(e,arguments),kM(e)}function uA(e){return function(){return e}}function j3(e){let t=3;return e.digits=function(i){if(!arguments.length)return t;if(i==null)t=null;else{const r=Math.floor(i);if(!(r>=0))throw new RangeError(`invalid digits: ${i}`);t=r}return e},()=>new oM(t)}function W3(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Y3(e){this._context=e}Y3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function X3(e){return new Y3(e)}function K3(e){return e[0]}function J3(e){return e[1]}function e0(e,t){var i=uA(!0),r=null,c=X3,h=null,v=j3(o);e=typeof e=="function"?e:e===void 0?K3:uA(e),t=typeof t=="function"?t:t===void 0?J3:uA(t);function o(k){var O,j=(k=W3(k)).length,J,oe=!1,se;for(r==null&&(h=c(se=v())),O=0;O<=j;++O)!(O<j&&i(J=k[O],O,k))===oe&&((oe=!oe)?h.lineStart():h.lineEnd()),oe&&h.point(+e(J,O,k),+t(J,O,k));if(se)return h=null,se+""||null}return o.x=function(k){return arguments.length?(e=typeof k=="function"?k:uA(+k),o):e},o.y=function(k){return arguments.length?(t=typeof k=="function"?k:uA(+k),o):t},o.defined=function(k){return arguments.length?(i=typeof k=="function"?k:uA(!!k),o):i},o.curve=function(k){return arguments.length?(c=k,r!=null&&(h=c(r)),o):c},o.context=function(k){return arguments.length?(k==null?r=h=null:h=c(r=k),o):r},o}function N_(e,t,i){var r=null,c=uA(!0),h=null,v=X3,o=null,k=j3(O);e=typeof e=="function"?e:e===void 0?K3:uA(+e),t=typeof t=="function"?t:uA(t===void 0?0:+t),i=typeof i=="function"?i:i===void 0?J3:uA(+i);function O(J){var oe,se,be,qe=(J=W3(J)).length,ke,Qe=!1,We,ct=new Array(qe),St=new Array(qe);for(h==null&&(o=v(We=k())),oe=0;oe<=qe;++oe){if(!(oe<qe&&c(ke=J[oe],oe,J))===Qe)if(Qe=!Qe)se=oe,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),be=oe-1;be>=se;--be)o.point(ct[be],St[be]);o.lineEnd(),o.areaEnd()}Qe&&(ct[oe]=+e(ke,oe,J),St[oe]=+t(ke,oe,J),o.point(r?+r(ke,oe,J):ct[oe],i?+i(ke,oe,J):St[oe]))}if(We)return o=null,We+""||null}function j(){return e0().defined(c).curve(v).context(h)}return O.x=function(J){return arguments.length?(e=typeof J=="function"?J:uA(+J),r=null,O):e},O.x0=function(J){return arguments.length?(e=typeof J=="function"?J:uA(+J),O):e},O.x1=function(J){return arguments.length?(r=J==null?null:typeof J=="function"?J:uA(+J),O):r},O.y=function(J){return arguments.length?(t=typeof J=="function"?J:uA(+J),i=null,O):t},O.y0=function(J){return arguments.length?(t=typeof J=="function"?J:uA(+J),O):t},O.y1=function(J){return arguments.length?(i=J==null?null:typeof J=="function"?J:uA(+J),O):i},O.lineX0=O.lineY0=function(){return j().x(e).y(t)},O.lineY1=function(){return j().x(e).y(i)},O.lineX1=function(){return j().x(r).y(t)},O.defined=function(J){return arguments.length?(c=typeof J=="function"?J:uA(!!J),O):c},O.curve=function(J){return arguments.length?(v=J,h!=null&&(o=v(h)),O):v},O.context=function(J){return arguments.length?(J==null?h=o=null:o=v(h=J),O):h},O}function Xb(e,t,i){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+i)/6)}function $3(e){this._context=e}$3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Xb(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Xb(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function MM(e){return new $3(e)}function Gd(e,t,i){this.k=e,this.x=t,this.y=i}Gd.prototype={constructor:Gd,scale:function(e){return e===1?this:new Gd(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Gd(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Gd.prototype;function Kb(e,t,i){const r=e.slice();return r[34]=t[i],r[36]=i,r}function Jb(e){let t,i,r=_m[e[5]]+"",c,h,v,o,k,O,j,J,oe,se,be,qe,ke,Qe,We,ct,St,yt,xe,Gt,Ve,Je,et,lt=nl(e[0]),ut=[];for(let Ke=0;Ke<lt.length;Ke+=1)ut[Ke]=$b(Kb(e,lt,Ke));return{c(){t=En("div"),i=En("h2"),c=ja(r),h=ja(" by tree size"),v=fr(),o=as("svg"),k=as("defs"),O=as("linearGradient"),j=as("stop"),J=as("stop"),oe=as("stop"),se=as("g"),qe=as("g"),Qe=as("path"),ct=as("g");for(let Ke=0;Ke<ut.length;Ke+=1)ut[Ke].c();St=as("text"),yt=ja(e[11]),Ve=as("text"),Je=ja(e[12]),this.h()},l(Ke){t=In(Ke,"DIV",{class:!0});var Me=en(t);i=In(Me,"H2",{class:!0});var Ze=en(i);c=Wa(Ze,r),h=Wa(Ze," by tree size"),Ze.forEach(li),v=dr(Me),o=os(Me,"svg",{id:!0,viewBox:!0,class:!0});var Fe=en(o);k=os(Fe,"defs",{});var vt=en(k);O=os(vt,"linearGradient",{id:!0,x1:!0,x2:!0,y1:!0,y2:!0});var dt=en(O);j=os(dt,"stop",{class:!0,offset:!0}),en(j).forEach(li),J=os(dt,"stop",{class:!0,offset:!0}),en(J).forEach(li),oe=os(dt,"stop",{class:!0,offset:!0}),en(oe).forEach(li),dt.forEach(li),vt.forEach(li),se=os(Fe,"g",{class:!0,transform:!0}),en(se).forEach(li),qe=os(Fe,"g",{class:!0,transform:!0}),en(qe).forEach(li),Qe=os(Fe,"path",{class:!0,fill:!0,stroke:!0,"stroke-width":!0,d:!0}),en(Qe).forEach(li),ct=os(Fe,"g",{class:!0,fill:!0,stroke:!0,"stroke-width":!0});var _t=en(ct);for(let yi=0;yi<ut.length;yi+=1)ut[yi].l(_t);_t.forEach(li),St=os(Fe,"text",{class:!0,"text-anchor":!0,x:!0,y:!0});var ei=en(St);yt=Wa(ei,e[11]),ei.forEach(li),Ve=os(Fe,"text",{class:!0,"text-anchor":!0,transform:!0,x:!0,y:!0});var di=en(Ve);Je=Wa(di,e[12]),di.forEach(li),Fe.forEach(li),Me.forEach(li),this.h()},h(){vi(i,"class","svelte-16r735n"),vi(j,"class","stop1 svelte-16r735n"),vi(j,"offset","0%"),vi(J,"class","stop2 svelte-16r735n"),vi(J,"offset","50%"),vi(oe,"class","stop3 svelte-16r735n"),vi(oe,"offset","100%"),vi(O,"id","Gradient1"),vi(O,"x1","0"),vi(O,"x2","0"),vi(O,"y1","0"),vi(O,"y2","0.2"),vi(se,"class","scale x svelte-16r735n"),vi(se,"transform",be="translate(0,"+(e[2]-e[3])+")"),vi(qe,"class","scale y svelte-16r735n"),vi(qe,"transform",ke="translate("+e[4]+",0)"),vi(Qe,"class","area ci svelte-16r735n"),vi(Qe,"fill",D2()[500]),vi(Qe,"stroke","currentColor"),vi(Qe,"stroke-width","0"),vi(Qe,"d",We=e[14](e[10])),vi(ct,"class","point"),vi(ct,"fill","white"),vi(ct,"stroke","currentColor"),vi(ct,"stroke-width","1.5"),vi(St,"class","axis-label svelte-16r735n"),vi(St,"text-anchor","center"),vi(St,"x",xe=e[1]/2),vi(St,"y",Gt=e[2]+12),vi(Ve,"class","axis-label svelte-16r735n"),vi(Ve,"text-anchor","center"),vi(Ve,"transform","rotate(-90)"),vi(Ve,"x",e[13]),vi(Ve,"y",-10),vi(o,"id","viz"),vi(o,"viewBox",et=`0 0 ${e[1]} ${e[2]}`),vi(o,"class","svelte-16r735n"),vi(t,"class","graph-container svelte-16r735n")},m(Ke,Me){vn(Ke,t,Me),Ri(t,i),Ri(i,c),Ri(i,h),Ri(t,v),Ri(t,o),Ri(o,k),Ri(k,O),Ri(O,j),Ri(O,J),Ri(O,oe),Ri(o,se),e[21](se),Ri(o,qe),e[22](qe),Ri(o,Qe),Ri(o,ct);for(let Ze=0;Ze<ut.length;Ze+=1)ut[Ze]&&ut[Ze].m(ct,null);Ri(o,St),Ri(St,yt),Ri(o,Ve),Ri(Ve,Je)},p(Ke,Me){if(Me[0]&32&&r!==(r=_m[Ke[5]]+"")&&Fu(c,r),Me[0]&12&&be!==(be="translate(0,"+(Ke[2]-Ke[3])+")")&&vi(se,"transform",be),Me[0]&16&&ke!==(ke="translate("+Ke[4]+",0)")&&vi(qe,"transform",ke),Me[0]&1024&&We!==(We=Ke[14](Ke[10]))&&vi(Qe,"d",We),Me[0]&769){lt=nl(Ke[0]);let Ze;for(Ze=0;Ze<lt.length;Ze+=1){const Fe=Kb(Ke,lt,Ze);ut[Ze]?ut[Ze].p(Fe,Me):(ut[Ze]=$b(Fe),ut[Ze].c(),ut[Ze].m(ct,null))}for(;Ze<ut.length;Ze+=1)ut[Ze].d(1);ut.length=lt.length}Me[0]&2048&&Fu(yt,Ke[11]),Me[0]&2&&xe!==(xe=Ke[1]/2)&&vi(St,"x",xe),Me[0]&4&&Gt!==(Gt=Ke[2]+12)&&vi(St,"y",Gt),Me[0]&4096&&Fu(Je,Ke[12]),Me[0]&8192&&vi(Ve,"x",Ke[13]),Me[0]&6&&et!==(et=`0 0 ${Ke[1]} ${Ke[2]}`)&&vi(o,"viewBox",et)},d(Ke){Ke&&li(t),e[21](null),e[22](null),ph(ut,Ke)}}}function $b(e){let t,i,r;return{c(){t=as("circle"),this.h()},l(c){t=os(c,"circle",{key:!0,cx:!0,cy:!0,r:!0,fill:!0,class:!0}),en(t).forEach(li),this.h()},h(){vi(t,"key",e[36]),vi(t,"cx",i=e[8](e[34][0])),vi(t,"cy",r=e[9](e[34][1])),vi(t,"r","5"),vi(t,"fill","white"),vi(t,"class","anim-point svelte-16r735n")},m(c,h){vn(c,t,h)},p(c,h){h[0]&257&&i!==(i=c[8](c[34][0]))&&vi(t,"cx",i),h[0]&513&&r!==(r=c[9](c[34][1]))&&vi(t,"cy",r)},d(c){c&&li(t)}}}function PM(e){let t,i=e[10]&&e[5]&&Jb(e);return{c(){i&&i.c(),t=Rr()},l(r){i&&i.l(r),t=Rr()},m(r,c){i&&i.m(r,c),vn(r,t,c)},p(r,c){r[10]&&r[5]?i?i.p(r,c):(i=Jb(r),i.c(),i.m(t.parentNode,t)):i&&(i.d(1),i=null)},i:_a,o:_a,d(r){r&&li(t),i&&i.d(r)}}}function DM(e,t,i){let{data:r}=t,{point:c}=t,{width:h=640}=t,{height:v=400}=t,{marginTop:o=20}=t,{marginRight:k=20}=t,{marginBottom:O=30}=t,{marginLeft:j=40}=t,{metric:J}=t,oe,se,be=null,qe=[0,10],ke=[0,10],Qe="",We="",ct=0,St,yt,{colorScheme:xe}=t,Gt;function Ve(Ke){Gt=eE(Ke),console.log(Gt),i(10,be=Gt.confidence),i(19,qe=Gt.yAxis),i(20,ke=Gt.xAxis),i(11,Qe=Gt.xAxisLabel),i(12,We=Gt.yAxisLabel),i(13,ct=Je(We))}function Je(Ke){return console.log("label length:",Ke.length),-1*(v/2)-Ke.length*2.5}const et=N_().x(Ke=>St(Ke.x)).y0(Ke=>yt(Math.max(Ke.low,qe[0]))).y1(Ke=>yt(Math.min(Ke.high,qe[1])));e0(Ke=>St(Ke.x),Ke=>yt(Ke.y)),e0(Ke=>St(Ke.x),Ke=>yt(Ke.low)),e0(Ke=>St(Ke.x),Ke=>yt(Ke.high)),N_().x(Ke=>St(Ke.x)).y0(Ke=>yt(Ke.high)).y1(Ke=>-1*yt(qe[1])),N_().x(Ke=>St(Ke.x)).y0(Ke=>yt(qe[0])).y1(Ke=>yt(Ke.low)),e0(Ke=>St(Ke.x),Ke=>yt(Ke.y)).curve(MM);function lt(Ke){ts[Ke?"unshift":"push"](()=>{oe=Ke,i(6,oe)})}function ut(Ke){ts[Ke?"unshift":"push"](()=>{se=Ke,i(7,se)})}return e.$$set=Ke=>{"data"in Ke&&i(15,r=Ke.data),"point"in Ke&&i(0,c=Ke.point),"width"in Ke&&i(1,h=Ke.width),"height"in Ke&&i(2,v=Ke.height),"marginTop"in Ke&&i(16,o=Ke.marginTop),"marginRight"in Ke&&i(17,k=Ke.marginRight),"marginBottom"in Ke&&i(3,O=Ke.marginBottom),"marginLeft"in Ke&&i(4,j=Ke.marginLeft),"metric"in Ke&&i(5,J=Ke.metric),"colorScheme"in Ke&&i(18,xe=Ke.colorScheme)},e.$$.update=()=>{e.$$.dirty[0]&262144&&iE(xe),e.$$.dirty[0]&32&&(Gt=Ve(J)),e.$$.dirty[0]&1179666&&i(8,St=q2(Ib(ke),[j,h-k])),e.$$.dirty[0]&589836&&i(9,yt=q2(Ib(qe),[v-O,o])),e.$$.dirty[0]&768&&e0((Ke,Me)=>St(Me),yt),e.$$.dirty[0]&640&&nm(se).call(FE(yt)),e.$$.dirty[0]&320&&nm(oe).call(zE(St)),e.$$.dirty[0]&6&&nm("svg").append("div").classed("svg-container",!0).append("svg").attr("preserveAspectRatio","xMinYMin meet").attr("viewBox",`0 0 ${h} ${v}`).classed("svg-content-responsive",!0),e.$$.dirty[0]&33&&console.log("relative:",tE(J,c[0][1],c[0][0]))},[c,h,v,O,j,J,oe,se,St,yt,be,Qe,We,ct,et,r,o,k,xe,qe,ke,lt,ut]}class LM extends Ds{constructor(t){super(),Ls(this,t,DM,PM,vs,{data:15,point:0,width:1,height:2,marginTop:16,marginRight:17,marginBottom:3,marginLeft:4,metric:5,colorScheme:18},null,[-1,-1])}}function e4(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function t4(e){let t=e,i=e;e.length===1&&(t=(v,o)=>e(v)-o,i=BM(e));function r(v,o,k,O){for(k==null&&(k=0),O==null&&(O=v.length);k<O;){const j=k+O>>>1;i(v[j],o)<0?k=j+1:O=j}return k}function c(v,o,k,O){for(k==null&&(k=0),O==null&&(O=v.length);k<O;){const j=k+O>>>1;i(v[j],o)>0?O=j:k=j+1}return k}function h(v,o,k,O){k==null&&(k=0),O==null&&(O=v.length);const j=r(v,o,k,O-1);return j>k&&t(v[j-1],o)>-t(v[j],o)?j-1:j}return{left:r,center:h,right:c}}function BM(e){return(t,i)=>e4(e(t),i)}function RM(e){return e===null?NaN:+e}const OM=t4(e4),zM=OM.right;t4(RM).center;var Z2=Math.sqrt(50),j2=Math.sqrt(10),W2=Math.sqrt(2);function FM(e,t,i){var r,c=-1,h,v,o;if(t=+t,e=+e,i=+i,e===t&&i>0)return[e];if((r=t<e)&&(h=e,e=t,t=h),(o=i4(e,t,i))===0||!isFinite(o))return[];if(o>0){let k=Math.round(e/o),O=Math.round(t/o);for(k*o<e&&++k,O*o>t&&--O,v=new Array(h=O-k+1);++c<h;)v[c]=(k+c)*o}else{o=-o;let k=Math.round(e*o),O=Math.round(t*o);for(k/o<e&&++k,O/o>t&&--O,v=new Array(h=O-k+1);++c<h;)v[c]=(k+c)/o}return r&&v.reverse(),v}function i4(e,t,i){var r=(t-e)/Math.max(0,i),c=Math.floor(Math.log(r)/Math.LN10),h=r/Math.pow(10,c);return c>=0?(h>=Z2?10:h>=j2?5:h>=W2?2:1)*Math.pow(10,c):-Math.pow(10,-c)/(h>=Z2?10:h>=j2?5:h>=W2?2:1)}function NM(e,t,i){var r=Math.abs(t-e)/Math.max(0,i),c=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),h=r/c;return h>=Z2?c*=10:h>=j2?c*=5:h>=W2&&(c*=2),t<e?-c:c}function VM(e,t){let i;if(t===void 0)for(const r of e)r!=null&&(i<r||i===void 0&&r>=r)&&(i=r);else{let r=-1;for(let c of e)(c=t(c,++r,e))!=null&&(i<c||i===void 0&&c>=c)&&(i=c)}return i}var V_=Array.prototype.slice;function UM(e){return e}var am=1,U_=2,ex=3,jg=4,tx=1e-6;function GM(e){return"translate("+e+",0)"}function HM(e){return"translate(0,"+e+")"}function QM(e){return t=>+e(t)}function qM(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),i=>+e(i)+t}function ZM(){return!this.__axis}function jM(e,t){var i=[],r=null,c=null,h=6,v=6,o=3,k=typeof window<"u"&&window.devicePixelRatio>1?0:.5,O=e===am||e===jg?-1:1,j=e===jg||e===U_?"x":"y",J=e===am||e===ex?GM:HM;function oe(se){var be=r??(t.ticks?t.ticks.apply(t,i):t.domain()),qe=c??(t.tickFormat?t.tickFormat.apply(t,i):UM),ke=Math.max(h,0)+o,Qe=t.range(),We=+Qe[0]+k,ct=+Qe[Qe.length-1]+k,St=(t.bandwidth?qM:QM)(t.copy(),k),yt=se.selection?se.selection():se,xe=yt.selectAll(".domain").data([null]),Gt=yt.selectAll(".tick").data(be,t).order(),Ve=Gt.exit(),Je=Gt.enter().append("g").attr("class","tick"),et=Gt.select("line"),lt=Gt.select("text");xe=xe.merge(xe.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),Gt=Gt.merge(Je),et=et.merge(Je.append("line").attr("stroke","currentColor").attr(j+"2",O*h)),lt=lt.merge(Je.append("text").attr("fill","currentColor").attr(j,O*ke).attr("dy",e===am?"0em":e===ex?"0.71em":"0.32em")),se!==yt&&(xe=xe.transition(se),Gt=Gt.transition(se),et=et.transition(se),lt=lt.transition(se),Ve=Ve.transition(se).attr("opacity",tx).attr("transform",function(ut){return isFinite(ut=St(ut))?J(ut+k):this.getAttribute("transform")}),Je.attr("opacity",tx).attr("transform",function(ut){var Ke=this.parentNode.__axis;return J((Ke&&isFinite(Ke=Ke(ut))?Ke:St(ut))+k)})),Ve.remove(),xe.attr("d",e===jg||e===U_?v?"M"+O*v+","+We+"H"+k+"V"+ct+"H"+O*v:"M"+k+","+We+"V"+ct:v?"M"+We+","+O*v+"V"+k+"H"+ct+"V"+O*v:"M"+We+","+k+"H"+ct),Gt.attr("opacity",1).attr("transform",function(ut){return J(St(ut)+k)}),et.attr(j+"2",O*h),lt.attr(j,O*ke).text(qe),yt.filter(ZM).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===U_?"start":e===jg?"end":"middle"),yt.each(function(){this.__axis=St})}return oe.scale=function(se){return arguments.length?(t=se,oe):t},oe.ticks=function(){return i=V_.call(arguments),oe},oe.tickArguments=function(se){return arguments.length?(i=se==null?[]:V_.call(se),oe):i.slice()},oe.tickValues=function(se){return arguments.length?(r=se==null?null:V_.call(se),oe):r&&r.slice()},oe.tickFormat=function(se){return arguments.length?(c=se,oe):c},oe.tickSize=function(se){return arguments.length?(h=v=+se,oe):h},oe.tickSizeInner=function(se){return arguments.length?(h=+se,oe):h},oe.tickSizeOuter=function(se){return arguments.length?(v=+se,oe):v},oe.tickPadding=function(se){return arguments.length?(o=+se,oe):o},oe.offset=function(se){return arguments.length?(k=+se,oe):k},oe}function WM(e){return jM(am,e)}var YM={value:()=>{}};function i1(){for(var e=0,t=arguments.length,i={},r;e<t;++e){if(!(r=arguments[e]+"")||r in i||/[\s.]/.test(r))throw new Error("illegal type: "+r);i[r]=[]}return new om(i)}function om(e){this._=e}function XM(e,t){return e.trim().split(/^|\s+/).map(function(i){var r="",c=i.indexOf(".");if(c>=0&&(r=i.slice(c+1),i=i.slice(0,c)),i&&!t.hasOwnProperty(i))throw new Error("unknown type: "+i);return{type:i,name:r}})}om.prototype=i1.prototype={constructor:om,on:function(e,t){var i=this._,r=XM(e+"",i),c,h=-1,v=r.length;if(arguments.length<2){for(;++h<v;)if((c=(e=r[h]).type)&&(c=KM(i[c],e.name)))return c;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++h<v;)if(c=(e=r[h]).type)i[c]=ix(i[c],e.name,t);else if(t==null)for(c in i)i[c]=ix(i[c],e.name,null);return this},copy:function(){var e={},t=this._;for(var i in t)e[i]=t[i].slice();return new om(e)},call:function(e,t){if((c=arguments.length-2)>0)for(var i=new Array(c),r=0,c,h;r<c;++r)i[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(h=this._[e],r=0,c=h.length;r<c;++r)h[r].value.apply(t,i)},apply:function(e,t,i){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],c=0,h=r.length;c<h;++c)r[c].value.apply(t,i)}};function KM(e,t){for(var i=0,r=e.length,c;i<r;++i)if((c=e[i]).name===t)return c.value}function ix(e,t,i){for(var r=0,c=e.length;r<c;++r)if(e[r].name===t){e[r]=YM,e=e.slice(0,r).concat(e.slice(r+1));break}return i!=null&&e.push({name:t,value:i}),e}var Y2="http://www.w3.org/1999/xhtml";const nx={svg:"http://www.w3.org/2000/svg",xhtml:Y2,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function n1(e){var t=e+="",i=t.indexOf(":");return i>=0&&(t=e.slice(0,i))!=="xmlns"&&(e=e.slice(i+1)),nx.hasOwnProperty(t)?{space:nx[t],local:e}:e}function JM(e){return function(){var t=this.ownerDocument,i=this.namespaceURI;return i===Y2&&t.documentElement.namespaceURI===Y2?t.createElement(e):t.createElementNS(i,e)}}function $M(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Vv(e){var t=n1(e);return(t.local?$M:JM)(t)}function e7(){}function Uv(e){return e==null?e7:function(){return this.querySelector(e)}}function t7(e){typeof e!="function"&&(e=Uv(e));for(var t=this._groups,i=t.length,r=new Array(i),c=0;c<i;++c)for(var h=t[c],v=h.length,o=r[c]=new Array(v),k,O,j=0;j<v;++j)(k=h[j])&&(O=e.call(k,k.__data__,j,h))&&("__data__"in k&&(O.__data__=k.__data__),o[j]=O);return new Tl(r,this._parents)}function n4(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function i7(){return[]}function r4(e){return e==null?i7:function(){return this.querySelectorAll(e)}}function n7(e){return function(){var t=e.apply(this,arguments);return t==null?[]:n4(t)}}function r7(e){typeof e=="function"?e=n7(e):e=r4(e);for(var t=this._groups,i=t.length,r=[],c=[],h=0;h<i;++h)for(var v=t[h],o=v.length,k,O=0;O<o;++O)(k=v[O])&&(r.push(e.call(k,k.__data__,O,v)),c.push(k));return new Tl(r,c)}function s4(e){return function(){return this.matches(e)}}function a4(e){return function(t){return t.matches(e)}}var s7=Array.prototype.find;function a7(e){return function(){return s7.call(this.children,e)}}function o7(){return this.firstElementChild}function A7(e){return this.select(e==null?o7:a7(typeof e=="function"?e:a4(e)))}var l7=Array.prototype.filter;function u7(){return this.children}function c7(e){return function(){return l7.call(this.children,e)}}function h7(e){return this.selectAll(e==null?u7:c7(typeof e=="function"?e:a4(e)))}function f7(e){typeof e!="function"&&(e=s4(e));for(var t=this._groups,i=t.length,r=new Array(i),c=0;c<i;++c)for(var h=t[c],v=h.length,o=r[c]=[],k,O=0;O<v;++O)(k=h[O])&&e.call(k,k.__data__,O,h)&&o.push(k);return new Tl(r,this._parents)}function o4(e){return new Array(e.length)}function d7(){return new Tl(this._enter||this._groups.map(o4),this._parents)}function Mm(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Mm.prototype={constructor:Mm,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function p7(e){return function(){return e}}function g7(e,t,i,r,c,h){for(var v=0,o,k=t.length,O=h.length;v<O;++v)(o=t[v])?(o.__data__=h[v],r[v]=o):i[v]=new Mm(e,h[v]);for(;v<k;++v)(o=t[v])&&(c[v]=o)}function m7(e,t,i,r,c,h,v){var o,k,O=new Map,j=t.length,J=h.length,oe=new Array(j),se;for(o=0;o<j;++o)(k=t[o])&&(oe[o]=se=v.call(k,k.__data__,o,t)+"",O.has(se)?c[o]=k:O.set(se,k));for(o=0;o<J;++o)se=v.call(e,h[o],o,h)+"",(k=O.get(se))?(r[o]=k,k.__data__=h[o],O.delete(se)):i[o]=new Mm(e,h[o]);for(o=0;o<j;++o)(k=t[o])&&O.get(oe[o])===k&&(c[o]=k)}function _7(e){return e.__data__}function v7(e,t){if(!arguments.length)return Array.from(this,_7);var i=t?m7:g7,r=this._parents,c=this._groups;typeof e!="function"&&(e=p7(e));for(var h=c.length,v=new Array(h),o=new Array(h),k=new Array(h),O=0;O<h;++O){var j=r[O],J=c[O],oe=J.length,se=n4(e.call(j,j&&j.__data__,O,r)),be=se.length,qe=o[O]=new Array(be),ke=v[O]=new Array(be),Qe=k[O]=new Array(oe);i(j,J,qe,ke,Qe,se,t);for(var We=0,ct=0,St,yt;We<be;++We)if(St=qe[We]){for(We>=ct&&(ct=We+1);!(yt=ke[ct])&&++ct<be;);St._next=yt||null}}return v=new Tl(v,r),v._enter=o,v._exit=k,v}function y7(){return new Tl(this._exit||this._groups.map(o4),this._parents)}function b7(e,t,i){var r=this.enter(),c=this,h=this.exit();return r=typeof e=="function"?e(r):r.append(e+""),t!=null&&(c=t(c)),i==null?h.remove():i(h),r&&c?r.merge(c).order():c}function x7(e){if(!(e instanceof Tl))throw new Error("invalid merge");for(var t=this._groups,i=e._groups,r=t.length,c=i.length,h=Math.min(r,c),v=new Array(r),o=0;o<h;++o)for(var k=t[o],O=i[o],j=k.length,J=v[o]=new Array(j),oe,se=0;se<j;++se)(oe=k[se]||O[se])&&(J[se]=oe);for(;o<r;++o)v[o]=t[o];return new Tl(v,this._parents)}function w7(){for(var e=this._groups,t=-1,i=e.length;++t<i;)for(var r=e[t],c=r.length-1,h=r[c],v;--c>=0;)(v=r[c])&&(h&&v.compareDocumentPosition(h)^4&&h.parentNode.insertBefore(v,h),h=v);return this}function S7(e){e||(e=C7);function t(J,oe){return J&&oe?e(J.__data__,oe.__data__):!J-!oe}for(var i=this._groups,r=i.length,c=new Array(r),h=0;h<r;++h){for(var v=i[h],o=v.length,k=c[h]=new Array(o),O,j=0;j<o;++j)(O=v[j])&&(k[j]=O);k.sort(t)}return new Tl(c,this._parents).order()}function C7(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function E7(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function I7(){return Array.from(this)}function T7(){for(var e=this._groups,t=0,i=e.length;t<i;++t)for(var r=e[t],c=0,h=r.length;c<h;++c){var v=r[c];if(v)return v}return null}function k7(){let e=0;for(const t of this)++e;return e}function M7(){return!this.node()}function P7(e){for(var t=this._groups,i=0,r=t.length;i<r;++i)for(var c=t[i],h=0,v=c.length,o;h<v;++h)(o=c[h])&&e.call(o,o.__data__,h,c);return this}function D7(e){return function(){this.removeAttribute(e)}}function L7(e){return function(){this.removeAttributeNS(e.space,e.local)}}function B7(e,t){return function(){this.setAttribute(e,t)}}function R7(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function O7(e,t){return function(){var i=t.apply(this,arguments);i==null?this.removeAttribute(e):this.setAttribute(e,i)}}function z7(e,t){return function(){var i=t.apply(this,arguments);i==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,i)}}function F7(e,t){var i=n1(e);if(arguments.length<2){var r=this.node();return i.local?r.getAttributeNS(i.space,i.local):r.getAttribute(i)}return this.each((t==null?i.local?L7:D7:typeof t=="function"?i.local?z7:O7:i.local?R7:B7)(i,t))}function A4(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function N7(e){return function(){this.style.removeProperty(e)}}function V7(e,t,i){return function(){this.style.setProperty(e,t,i)}}function U7(e,t,i){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,i)}}function G7(e,t,i){return arguments.length>1?this.each((t==null?N7:typeof t=="function"?U7:V7)(e,t,i??"")):p0(this.node(),e)}function p0(e,t){return e.style.getPropertyValue(t)||A4(e).getComputedStyle(e,null).getPropertyValue(t)}function H7(e){return function(){delete this[e]}}function Q7(e,t){return function(){this[e]=t}}function q7(e,t){return function(){var i=t.apply(this,arguments);i==null?delete this[e]:this[e]=i}}function Z7(e,t){return arguments.length>1?this.each((t==null?H7:typeof t=="function"?q7:Q7)(e,t)):this.node()[e]}function l4(e){return e.trim().split(/^|\s+/)}function Gv(e){return e.classList||new u4(e)}function u4(e){this._node=e,this._names=l4(e.getAttribute("class")||"")}u4.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function c4(e,t){for(var i=Gv(e),r=-1,c=t.length;++r<c;)i.add(t[r])}function h4(e,t){for(var i=Gv(e),r=-1,c=t.length;++r<c;)i.remove(t[r])}function j7(e){return function(){c4(this,e)}}function W7(e){return function(){h4(this,e)}}function Y7(e,t){return function(){(t.apply(this,arguments)?c4:h4)(this,e)}}function X7(e,t){var i=l4(e+"");if(arguments.length<2){for(var r=Gv(this.node()),c=-1,h=i.length;++c<h;)if(!r.contains(i[c]))return!1;return!0}return this.each((typeof t=="function"?Y7:t?j7:W7)(i,t))}function K7(){this.textContent=""}function J7(e){return function(){this.textContent=e}}function $7(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function e9(e){return arguments.length?this.each(e==null?K7:(typeof e=="function"?$7:J7)(e)):this.node().textContent}function t9(){this.innerHTML=""}function i9(e){return function(){this.innerHTML=e}}function n9(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function r9(e){return arguments.length?this.each(e==null?t9:(typeof e=="function"?n9:i9)(e)):this.node().innerHTML}function s9(){this.nextSibling&&this.parentNode.appendChild(this)}function a9(){return this.each(s9)}function o9(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function A9(){return this.each(o9)}function l9(e){var t=typeof e=="function"?e:Vv(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function u9(){return null}function c9(e,t){var i=typeof e=="function"?e:Vv(e),r=t==null?u9:typeof t=="function"?t:Uv(t);return this.select(function(){return this.insertBefore(i.apply(this,arguments),r.apply(this,arguments)||null)})}function h9(){var e=this.parentNode;e&&e.removeChild(this)}function f9(){return this.each(h9)}function d9(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function p9(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function g9(e){return this.select(e?p9:d9)}function m9(e){return arguments.length?this.property("__data__",e):this.node().__data__}function _9(e){return function(t){e.call(this,t,this.__data__)}}function v9(e){return e.trim().split(/^|\s+/).map(function(t){var i="",r=t.indexOf(".");return r>=0&&(i=t.slice(r+1),t=t.slice(0,r)),{type:t,name:i}})}function y9(e){return function(){var t=this.__on;if(t){for(var i=0,r=-1,c=t.length,h;i<c;++i)h=t[i],(!e.type||h.type===e.type)&&h.name===e.name?this.removeEventListener(h.type,h.listener,h.options):t[++r]=h;++r?t.length=r:delete this.__on}}}function b9(e,t,i){return function(){var r=this.__on,c,h=_9(t);if(r){for(var v=0,o=r.length;v<o;++v)if((c=r[v]).type===e.type&&c.name===e.name){this.removeEventListener(c.type,c.listener,c.options),this.addEventListener(c.type,c.listener=h,c.options=i),c.value=t;return}}this.addEventListener(e.type,h,i),c={type:e.type,name:e.name,value:t,listener:h,options:i},r?r.push(c):this.__on=[c]}}function x9(e,t,i){var r=v9(e+""),c,h=r.length,v;if(arguments.length<2){var o=this.node().__on;if(o){for(var k=0,O=o.length,j;k<O;++k)for(c=0,j=o[k];c<h;++c)if((v=r[c]).type===j.type&&v.name===j.name)return j.value}return}for(o=t?b9:y9,c=0;c<h;++c)this.each(o(r[c],t,i));return this}function f4(e,t,i){var r=A4(e),c=r.CustomEvent;typeof c=="function"?c=new c(t,i):(c=r.document.createEvent("Event"),i?(c.initEvent(t,i.bubbles,i.cancelable),c.detail=i.detail):c.initEvent(t,!1,!1)),e.dispatchEvent(c)}function w9(e,t){return function(){return f4(this,e,t)}}function S9(e,t){return function(){return f4(this,e,t.apply(this,arguments))}}function C9(e,t){return this.each((typeof t=="function"?S9:w9)(e,t))}function*E9(){for(var e=this._groups,t=0,i=e.length;t<i;++t)for(var r=e[t],c=0,h=r.length,v;c<h;++c)(v=r[c])&&(yield v)}var d4=[null];function Tl(e,t){this._groups=e,this._parents=t}function up(){return new Tl([[document.documentElement]],d4)}function I9(){return this}Tl.prototype=up.prototype={constructor:Tl,select:t7,selectAll:r7,selectChild:A7,selectChildren:h7,filter:f7,data:v7,enter:d7,exit:y7,join:b7,merge:x7,selection:I9,order:w7,sort:S7,call:E7,nodes:I7,node:T7,size:k7,empty:M7,each:P7,attr:F7,style:G7,property:Z7,classed:X7,text:e9,html:r9,raise:a9,lower:A9,append:l9,insert:c9,remove:f9,clone:g9,datum:m9,on:x9,dispatch:C9,[Symbol.iterator]:E9};function ma(e){return typeof e=="string"?new Tl([[document.querySelector(e)]],[document.documentElement]):new Tl([[e]],d4)}function T9(e){return ma(Vv(e).call(document.documentElement))}function k9(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Rc(e,t){if(e=k9(e),t===void 0&&(t=e.currentTarget),t){var i=t.ownerSVGElement||t;if(i.createSVGPoint){var r=i.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var c=t.getBoundingClientRect();return[e.clientX-c.left-t.clientLeft,e.clientY-c.top-t.clientTop]}}return[e.pageX,e.pageY]}function X2(e){e.preventDefault(),e.stopImmediatePropagation()}function p4(e){var t=e.document.documentElement,i=ma(e).on("dragstart.drag",X2,!0);"onselectstart"in t?i.on("selectstart.drag",X2,!0):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function g4(e,t){var i=e.document.documentElement,r=ma(e).on("dragstart.drag",null);t&&(r.on("click.drag",X2,!0),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in i?r.on("selectstart.drag",null):(i.style.MozUserSelect=i.__noselect,delete i.__noselect)}function Hv(e,t,i){e.prototype=t.prototype=i,i.constructor=e}function m4(e,t){var i=Object.create(e.prototype);for(var r in t)i[r]=t[r];return i}function cp(){}var Kd=.7,Pm=1/Kd,u0="\\s*([+-]?\\d+)\\s*",Jd="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",rc="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",M9=/^#([0-9a-f]{3,8})$/,P9=new RegExp("^rgb\\("+[u0,u0,u0]+"\\)$"),D9=new RegExp("^rgb\\("+[rc,rc,rc]+"\\)$"),L9=new RegExp("^rgba\\("+[u0,u0,u0,Jd]+"\\)$"),B9=new RegExp("^rgba\\("+[rc,rc,rc,Jd]+"\\)$"),R9=new RegExp("^hsl\\("+[Jd,rc,rc]+"\\)$"),O9=new RegExp("^hsla\\("+[Jd,rc,rc,Jd]+"\\)$"),rx={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Hv(cp,Af,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:sx,formatHex:sx,formatHsl:z9,formatRgb:ax,toString:ax});function sx(){return this.rgb().formatHex()}function z9(){return _4(this).formatHsl()}function ax(){return this.rgb().formatRgb()}function Af(e){var t,i;return e=(e+"").trim().toLowerCase(),(t=M9.exec(e))?(i=t[1].length,t=parseInt(t[1],16),i===6?ox(t):i===3?new jl(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):i===8?Wg(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):i===4?Wg(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=P9.exec(e))?new jl(t[1],t[2],t[3],1):(t=D9.exec(e))?new jl(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=L9.exec(e))?Wg(t[1],t[2],t[3],t[4]):(t=B9.exec(e))?Wg(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=R9.exec(e))?ux(t[1],t[2]/100,t[3]/100,1):(t=O9.exec(e))?ux(t[1],t[2]/100,t[3]/100,t[4]):rx.hasOwnProperty(e)?ox(rx[e]):e==="transparent"?new jl(NaN,NaN,NaN,0):null}function ox(e){return new jl(e>>16&255,e>>8&255,e&255,1)}function Wg(e,t,i,r){return r<=0&&(e=t=i=NaN),new jl(e,t,i,r)}function F9(e){return e instanceof cp||(e=Af(e)),e?(e=e.rgb(),new jl(e.r,e.g,e.b,e.opacity)):new jl}function K2(e,t,i,r){return arguments.length===1?F9(e):new jl(e,t,i,r??1)}function jl(e,t,i,r){this.r=+e,this.g=+t,this.b=+i,this.opacity=+r}Hv(jl,K2,m4(cp,{brighter:function(e){return e=e==null?Pm:Math.pow(Pm,e),new jl(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=e==null?Kd:Math.pow(Kd,e),new jl(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ax,formatHex:Ax,formatRgb:lx,toString:lx}));function Ax(){return"#"+G_(this.r)+G_(this.g)+G_(this.b)}function lx(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(e===1?")":", "+e+")")}function G_(e){return e=Math.max(0,Math.min(255,Math.round(e)||0)),(e<16?"0":"")+e.toString(16)}function ux(e,t,i,r){return r<=0?e=t=i=NaN:i<=0||i>=1?e=t=NaN:t<=0&&(e=NaN),new tc(e,t,i,r)}function _4(e){if(e instanceof tc)return new tc(e.h,e.s,e.l,e.opacity);if(e instanceof cp||(e=Af(e)),!e)return new tc;if(e instanceof tc)return e;e=e.rgb();var t=e.r/255,i=e.g/255,r=e.b/255,c=Math.min(t,i,r),h=Math.max(t,i,r),v=NaN,o=h-c,k=(h+c)/2;return o?(t===h?v=(i-r)/o+(i<r)*6:i===h?v=(r-t)/o+2:v=(t-i)/o+4,o/=k<.5?h+c:2-h-c,v*=60):o=k>0&&k<1?0:v,new tc(v,o,k,e.opacity)}function N9(e,t,i,r){return arguments.length===1?_4(e):new tc(e,t,i,r??1)}function tc(e,t,i,r){this.h=+e,this.s=+t,this.l=+i,this.opacity=+r}Hv(tc,N9,m4(cp,{brighter:function(e){return e=e==null?Pm:Math.pow(Pm,e),new tc(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=e==null?Kd:Math.pow(Kd,e),new tc(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,i=this.l,r=i+(i<.5?i:1-i)*t,c=2*i-r;return new jl(H_(e>=240?e-240:e+120,c,r),H_(e,c,r),H_(e<120?e+240:e-120,c,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(e===1?")":", "+e+")")}}));function H_(e,t,i){return(e<60?t+(i-t)*e/60:e<180?i:e<240?t+(i-t)*(240-e)/60:t)*255}const Qv=e=>()=>e;function V9(e,t){return function(i){return e+i*t}}function U9(e,t,i){return e=Math.pow(e,i),t=Math.pow(t,i)-e,i=1/i,function(r){return Math.pow(e+r*t,i)}}function G9(e){return(e=+e)==1?v4:function(t,i){return i-t?U9(t,i,e):Qv(isNaN(t)?i:t)}}function v4(e,t){var i=t-e;return i?V9(e,i):Qv(isNaN(e)?t:e)}const Dm=function e(t){var i=G9(t);function r(c,h){var v=i((c=K2(c)).r,(h=K2(h)).r),o=i(c.g,h.g),k=i(c.b,h.b),O=v4(c.opacity,h.opacity);return function(j){return c.r=v(j),c.g=o(j),c.b=k(j),c.opacity=O(j),c+""}}return r.gamma=e,r}(1);function H9(e,t){t||(t=[]);var i=e?Math.min(t.length,e.length):0,r=t.slice(),c;return function(h){for(c=0;c<i;++c)r[c]=e[c]*(1-h)+t[c]*h;return r}}function Q9(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function q9(e,t){var i=t?t.length:0,r=e?Math.min(i,e.length):0,c=new Array(r),h=new Array(i),v;for(v=0;v<r;++v)c[v]=r1(e[v],t[v]);for(;v<i;++v)h[v]=t[v];return function(o){for(v=0;v<r;++v)h[v]=c[v](o);return h}}function Z9(e,t){var i=new Date;return e=+e,t=+t,function(r){return i.setTime(e*(1-r)+t*r),i}}function Ou(e,t){return e=+e,t=+t,function(i){return e*(1-i)+t*i}}function j9(e,t){var i={},r={},c;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(c in t)c in e?i[c]=r1(e[c],t[c]):r[c]=t[c];return function(h){for(c in i)r[c]=i[c](h);return r}}var J2=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Q_=new RegExp(J2.source,"g");function W9(e){return function(){return e}}function Y9(e){return function(t){return e(t)+""}}function y4(e,t){var i=J2.lastIndex=Q_.lastIndex=0,r,c,h,v=-1,o=[],k=[];for(e=e+"",t=t+"";(r=J2.exec(e))&&(c=Q_.exec(t));)(h=c.index)>i&&(h=t.slice(i,h),o[v]?o[v]+=h:o[++v]=h),(r=r[0])===(c=c[0])?o[v]?o[v]+=c:o[++v]=c:(o[++v]=null,k.push({i:v,x:Ou(r,c)})),i=Q_.lastIndex;return i<t.length&&(h=t.slice(i),o[v]?o[v]+=h:o[++v]=h),o.length<2?k[0]?Y9(k[0].x):W9(t):(t=k.length,function(O){for(var j=0,J;j<t;++j)o[(J=k[j]).i]=J.x(O);return o.join("")})}function r1(e,t){var i=typeof t,r;return t==null||i==="boolean"?Qv(t):(i==="number"?Ou:i==="string"?(r=Af(t))?(t=r,Dm):y4:t instanceof Af?Dm:t instanceof Date?Z9:Q9(t)?H9:Array.isArray(t)?q9:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?j9:Ou)(e,t)}function X9(e,t){return e=+e,t=+t,function(i){return Math.round(e*(1-i)+t*i)}}var cx=180/Math.PI,$2={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function b4(e,t,i,r,c,h){var v,o,k;return(v=Math.sqrt(e*e+t*t))&&(e/=v,t/=v),(k=e*i+t*r)&&(i-=e*k,r-=t*k),(o=Math.sqrt(i*i+r*r))&&(i/=o,r/=o,k/=o),e*r<t*i&&(e=-e,t=-t,k=-k,v=-v),{translateX:c,translateY:h,rotate:Math.atan2(t,e)*cx,skewX:Math.atan(k)*cx,scaleX:v,scaleY:o}}var Yg;function K9(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?$2:b4(t.a,t.b,t.c,t.d,t.e,t.f)}function J9(e){return e==null||(Yg||(Yg=document.createElementNS("http://www.w3.org/2000/svg","g")),Yg.setAttribute("transform",e),!(e=Yg.transform.baseVal.consolidate()))?$2:(e=e.matrix,b4(e.a,e.b,e.c,e.d,e.e,e.f))}function x4(e,t,i,r){function c(O){return O.length?O.pop()+" ":""}function h(O,j,J,oe,se,be){if(O!==J||j!==oe){var qe=se.push("translate(",null,t,null,i);be.push({i:qe-4,x:Ou(O,J)},{i:qe-2,x:Ou(j,oe)})}else(J||oe)&&se.push("translate("+J+t+oe+i)}function v(O,j,J,oe){O!==j?(O-j>180?j+=360:j-O>180&&(O+=360),oe.push({i:J.push(c(J)+"rotate(",null,r)-2,x:Ou(O,j)})):j&&J.push(c(J)+"rotate("+j+r)}function o(O,j,J,oe){O!==j?oe.push({i:J.push(c(J)+"skewX(",null,r)-2,x:Ou(O,j)}):j&&J.push(c(J)+"skewX("+j+r)}function k(O,j,J,oe,se,be){if(O!==J||j!==oe){var qe=se.push(c(se)+"scale(",null,",",null,")");be.push({i:qe-4,x:Ou(O,J)},{i:qe-2,x:Ou(j,oe)})}else(J!==1||oe!==1)&&se.push(c(se)+"scale("+J+","+oe+")")}return function(O,j){var J=[],oe=[];return O=e(O),j=e(j),h(O.translateX,O.translateY,j.translateX,j.translateY,J,oe),v(O.rotate,j.rotate,J,oe),o(O.skewX,j.skewX,J,oe),k(O.scaleX,O.scaleY,j.scaleX,j.scaleY,J,oe),O=j=null,function(se){for(var be=-1,qe=oe.length,ke;++be<qe;)J[(ke=oe[be]).i]=ke.x(se);return J.join("")}}}var $9=x4(K9,"px, ","px)","deg)"),eP=x4(J9,", ",")",")"),tP=1e-12;function hx(e){return((e=Math.exp(e))+1/e)/2}function iP(e){return((e=Math.exp(e))-1/e)/2}function nP(e){return((e=Math.exp(2*e))-1)/(e+1)}const rP=function e(t,i,r){function c(h,v){var o=h[0],k=h[1],O=h[2],j=v[0],J=v[1],oe=v[2],se=j-o,be=J-k,qe=se*se+be*be,ke,Qe;if(qe<tP)Qe=Math.log(oe/O)/t,ke=function(Gt){return[o+Gt*se,k+Gt*be,O*Math.exp(t*Gt*Qe)]};else{var We=Math.sqrt(qe),ct=(oe*oe-O*O+r*qe)/(2*O*i*We),St=(oe*oe-O*O-r*qe)/(2*oe*i*We),yt=Math.log(Math.sqrt(ct*ct+1)-ct),xe=Math.log(Math.sqrt(St*St+1)-St);Qe=(xe-yt)/t,ke=function(Gt){var Ve=Gt*Qe,Je=hx(yt),et=O/(i*We)*(Je*nP(t*Ve+yt)-iP(yt));return[o+et*se,k+et*be,O*Je/hx(t*Ve+yt)]}}return ke.duration=Qe*1e3*t/Math.SQRT2,ke}return c.rho=function(h){var v=Math.max(.001,+h),o=v*v,k=o*o;return e(v,o,k)},c}(Math.SQRT2,2,4);var g0=0,Hd=0,kd=0,w4=1e3,Lm,Qd,Bm=0,lf=0,s1=0,$d=typeof performance=="object"&&performance.now?performance:Date,S4=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function qv(){return lf||(S4(sP),lf=$d.now()+s1)}function sP(){lf=0}function Rm(){this._call=this._time=this._next=null}Rm.prototype=C4.prototype={constructor:Rm,restart:function(e,t,i){if(typeof e!="function")throw new TypeError("callback is not a function");i=(i==null?qv():+i)+(t==null?0:+t),!this._next&&Qd!==this&&(Qd?Qd._next=this:Lm=this,Qd=this),this._call=e,this._time=i,ev()},stop:function(){this._call&&(this._call=null,this._time=1/0,ev())}};function C4(e,t,i){var r=new Rm;return r.restart(e,t,i),r}function aP(){qv(),++g0;for(var e=Lm,t;e;)(t=lf-e._time)>=0&&e._call.call(null,t),e=e._next;--g0}function fx(){lf=(Bm=$d.now())+s1,g0=Hd=0;try{aP()}finally{g0=0,AP(),lf=0}}function oP(){var e=$d.now(),t=e-Bm;t>w4&&(s1-=t,Bm=e)}function AP(){for(var e,t=Lm,i,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(i=t._next,t._next=null,t=e?e._next=i:Lm=i);Qd=e,ev(r)}function ev(e){if(!g0){Hd&&(Hd=clearTimeout(Hd));var t=e-lf;t>24?(e<1/0&&(Hd=setTimeout(fx,e-$d.now()-s1)),kd&&(kd=clearInterval(kd))):(kd||(Bm=$d.now(),kd=setInterval(oP,w4)),g0=1,S4(fx))}}function dx(e,t,i){var r=new Rm;return t=t==null?0:+t,r.restart(c=>{r.stop(),e(c+t)},t,i),r}var lP=i1("start","end","cancel","interrupt"),uP=[],E4=0,px=1,tv=2,Am=3,gx=4,iv=5,lm=6;function a1(e,t,i,r,c,h){var v=e.__transition;if(!v)e.__transition={};else if(i in v)return;cP(e,i,{name:t,index:r,group:c,on:lP,tween:uP,time:h.time,delay:h.delay,duration:h.duration,ease:h.ease,timer:null,state:E4})}function Zv(e,t){var i=Vu(e,t);if(i.state>E4)throw new Error("too late; already scheduled");return i}function cc(e,t){var i=Vu(e,t);if(i.state>Am)throw new Error("too late; already running");return i}function Vu(e,t){var i=e.__transition;if(!i||!(i=i[t]))throw new Error("transition not found");return i}function cP(e,t,i){var r=e.__transition,c;r[t]=i,i.timer=C4(h,0,i.time);function h(O){i.state=px,i.timer.restart(v,i.delay,i.time),i.delay<=O&&v(O-i.delay)}function v(O){var j,J,oe,se;if(i.state!==px)return k();for(j in r)if(se=r[j],se.name===i.name){if(se.state===Am)return dx(v);se.state===gx?(se.state=lm,se.timer.stop(),se.on.call("interrupt",e,e.__data__,se.index,se.group),delete r[j]):+j<t&&(se.state=lm,se.timer.stop(),se.on.call("cancel",e,e.__data__,se.index,se.group),delete r[j])}if(dx(function(){i.state===Am&&(i.state=gx,i.timer.restart(o,i.delay,i.time),o(O))}),i.state=tv,i.on.call("start",e,e.__data__,i.index,i.group),i.state===tv){for(i.state=Am,c=new Array(oe=i.tween.length),j=0,J=-1;j<oe;++j)(se=i.tween[j].value.call(e,e.__data__,i.index,i.group))&&(c[++J]=se);c.length=J+1}}function o(O){for(var j=O<i.duration?i.ease.call(null,O/i.duration):(i.timer.restart(k),i.state=iv,1),J=-1,oe=c.length;++J<oe;)c[J].call(e,j);i.state===iv&&(i.on.call("end",e,e.__data__,i.index,i.group),k())}function k(){i.state=lm,i.timer.stop(),delete r[t];for(var O in r)return;delete e.__transition}}function c0(e,t){var i=e.__transition,r,c,h=!0,v;if(i){t=t==null?null:t+"";for(v in i){if((r=i[v]).name!==t){h=!1;continue}c=r.state>tv&&r.state<iv,r.state=lm,r.timer.stop(),r.on.call(c?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete i[v]}h&&delete e.__transition}}function hP(e){return this.each(function(){c0(this,e)})}function fP(e,t){var i,r;return function(){var c=cc(this,e),h=c.tween;if(h!==i){r=i=h;for(var v=0,o=r.length;v<o;++v)if(r[v].name===t){r=r.slice(),r.splice(v,1);break}}c.tween=r}}function dP(e,t,i){var r,c;if(typeof i!="function")throw new Error;return function(){var h=cc(this,e),v=h.tween;if(v!==r){c=(r=v).slice();for(var o={name:t,value:i},k=0,O=c.length;k<O;++k)if(c[k].name===t){c[k]=o;break}k===O&&c.push(o)}h.tween=c}}function pP(e,t){var i=this._id;if(e+="",arguments.length<2){for(var r=Vu(this.node(),i).tween,c=0,h=r.length,v;c<h;++c)if((v=r[c]).name===e)return v.value;return null}return this.each((t==null?fP:dP)(i,e,t))}function jv(e,t,i){var r=e._id;return e.each(function(){var c=cc(this,r);(c.value||(c.value={}))[t]=i.apply(this,arguments)}),function(c){return Vu(c,r).value[t]}}function I4(e,t){var i;return(typeof t=="number"?Ou:t instanceof Af?Dm:(i=Af(t))?(t=i,Dm):y4)(e,t)}function gP(e){return function(){this.removeAttribute(e)}}function mP(e){return function(){this.removeAttributeNS(e.space,e.local)}}function _P(e,t,i){var r,c=i+"",h;return function(){var v=this.getAttribute(e);return v===c?null:v===r?h:h=t(r=v,i)}}function vP(e,t,i){var r,c=i+"",h;return function(){var v=this.getAttributeNS(e.space,e.local);return v===c?null:v===r?h:h=t(r=v,i)}}function yP(e,t,i){var r,c,h;return function(){var v,o=i(this),k;return o==null?void this.removeAttribute(e):(v=this.getAttribute(e),k=o+"",v===k?null:v===r&&k===c?h:(c=k,h=t(r=v,o)))}}function bP(e,t,i){var r,c,h;return function(){var v,o=i(this),k;return o==null?void this.removeAttributeNS(e.space,e.local):(v=this.getAttributeNS(e.space,e.local),k=o+"",v===k?null:v===r&&k===c?h:(c=k,h=t(r=v,o)))}}function xP(e,t){var i=n1(e),r=i==="transform"?eP:I4;return this.attrTween(e,typeof t=="function"?(i.local?bP:yP)(i,r,jv(this,"attr."+e,t)):t==null?(i.local?mP:gP)(i):(i.local?vP:_P)(i,r,t))}function wP(e,t){return function(i){this.setAttribute(e,t.call(this,i))}}function SP(e,t){return function(i){this.setAttributeNS(e.space,e.local,t.call(this,i))}}function CP(e,t){var i,r;function c(){var h=t.apply(this,arguments);return h!==r&&(i=(r=h)&&SP(e,h)),i}return c._value=t,c}function EP(e,t){var i,r;function c(){var h=t.apply(this,arguments);return h!==r&&(i=(r=h)&&wP(e,h)),i}return c._value=t,c}function IP(e,t){var i="attr."+e;if(arguments.length<2)return(i=this.tween(i))&&i._value;if(t==null)return this.tween(i,null);if(typeof t!="function")throw new Error;var r=n1(e);return this.tween(i,(r.local?CP:EP)(r,t))}function TP(e,t){return function(){Zv(this,e).delay=+t.apply(this,arguments)}}function kP(e,t){return t=+t,function(){Zv(this,e).delay=t}}function MP(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?TP:kP)(t,e)):Vu(this.node(),t).delay}function PP(e,t){return function(){cc(this,e).duration=+t.apply(this,arguments)}}function DP(e,t){return t=+t,function(){cc(this,e).duration=t}}function LP(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?PP:DP)(t,e)):Vu(this.node(),t).duration}function BP(e,t){if(typeof t!="function")throw new Error;return function(){cc(this,e).ease=t}}function RP(e){var t=this._id;return arguments.length?this.each(BP(t,e)):Vu(this.node(),t).ease}function OP(e,t){return function(){var i=t.apply(this,arguments);if(typeof i!="function")throw new Error;cc(this,e).ease=i}}function zP(e){if(typeof e!="function")throw new Error;return this.each(OP(this._id,e))}function FP(e){typeof e!="function"&&(e=s4(e));for(var t=this._groups,i=t.length,r=new Array(i),c=0;c<i;++c)for(var h=t[c],v=h.length,o=r[c]=[],k,O=0;O<v;++O)(k=h[O])&&e.call(k,k.__data__,O,h)&&o.push(k);return new Hc(r,this._parents,this._name,this._id)}function NP(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,i=e._groups,r=t.length,c=i.length,h=Math.min(r,c),v=new Array(r),o=0;o<h;++o)for(var k=t[o],O=i[o],j=k.length,J=v[o]=new Array(j),oe,se=0;se<j;++se)(oe=k[se]||O[se])&&(J[se]=oe);for(;o<r;++o)v[o]=t[o];return new Hc(v,this._parents,this._name,this._id)}function VP(e){return(e+"").trim().split(/^|\s+/).every(function(t){var i=t.indexOf(".");return i>=0&&(t=t.slice(0,i)),!t||t==="start"})}function UP(e,t,i){var r,c,h=VP(t)?Zv:cc;return function(){var v=h(this,e),o=v.on;o!==r&&(c=(r=o).copy()).on(t,i),v.on=c}}function GP(e,t){var i=this._id;return arguments.length<2?Vu(this.node(),i).on.on(e):this.each(UP(i,e,t))}function HP(e){return function(){var t=this.parentNode;for(var i in this.__transition)if(+i!==e)return;t&&t.removeChild(this)}}function QP(){return this.on("end.remove",HP(this._id))}function qP(e){var t=this._name,i=this._id;typeof e!="function"&&(e=Uv(e));for(var r=this._groups,c=r.length,h=new Array(c),v=0;v<c;++v)for(var o=r[v],k=o.length,O=h[v]=new Array(k),j,J,oe=0;oe<k;++oe)(j=o[oe])&&(J=e.call(j,j.__data__,oe,o))&&("__data__"in j&&(J.__data__=j.__data__),O[oe]=J,a1(O[oe],t,i,oe,O,Vu(j,i)));return new Hc(h,this._parents,t,i)}function ZP(e){var t=this._name,i=this._id;typeof e!="function"&&(e=r4(e));for(var r=this._groups,c=r.length,h=[],v=[],o=0;o<c;++o)for(var k=r[o],O=k.length,j,J=0;J<O;++J)if(j=k[J]){for(var oe=e.call(j,j.__data__,J,k),se,be=Vu(j,i),qe=0,ke=oe.length;qe<ke;++qe)(se=oe[qe])&&a1(se,t,i,qe,oe,be);h.push(oe),v.push(j)}return new Hc(h,v,t,i)}var jP=up.prototype.constructor;function WP(){return new jP(this._groups,this._parents)}function YP(e,t){var i,r,c;return function(){var h=p0(this,e),v=(this.style.removeProperty(e),p0(this,e));return h===v?null:h===i&&v===r?c:c=t(i=h,r=v)}}function T4(e){return function(){this.style.removeProperty(e)}}function XP(e,t,i){var r,c=i+"",h;return function(){var v=p0(this,e);return v===c?null:v===r?h:h=t(r=v,i)}}function KP(e,t,i){var r,c,h;return function(){var v=p0(this,e),o=i(this),k=o+"";return o==null&&(k=o=(this.style.removeProperty(e),p0(this,e))),v===k?null:v===r&&k===c?h:(c=k,h=t(r=v,o))}}function JP(e,t){var i,r,c,h="style."+t,v="end."+h,o;return function(){var k=cc(this,e),O=k.on,j=k.value[h]==null?o||(o=T4(t)):void 0;(O!==i||c!==j)&&(r=(i=O).copy()).on(v,c=j),k.on=r}}function $P(e,t,i){var r=(e+="")=="transform"?$9:I4;return t==null?this.styleTween(e,YP(e,r)).on("end.style."+e,T4(e)):typeof t=="function"?this.styleTween(e,KP(e,r,jv(this,"style."+e,t))).each(JP(this._id,e)):this.styleTween(e,XP(e,r,t),i).on("end.style."+e,null)}function eD(e,t,i){return function(r){this.style.setProperty(e,t.call(this,r),i)}}function tD(e,t,i){var r,c;function h(){var v=t.apply(this,arguments);return v!==c&&(r=(c=v)&&eD(e,v,i)),r}return h._value=t,h}function iD(e,t,i){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,tD(e,t,i??""))}function nD(e){return function(){this.textContent=e}}function rD(e){return function(){var t=e(this);this.textContent=t??""}}function sD(e){return this.tween("text",typeof e=="function"?rD(jv(this,"text",e)):nD(e==null?"":e+""))}function aD(e){return function(t){this.textContent=e.call(this,t)}}function oD(e){var t,i;function r(){var c=e.apply(this,arguments);return c!==i&&(t=(i=c)&&aD(c)),t}return r._value=e,r}function AD(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,oD(e))}function lD(){for(var e=this._name,t=this._id,i=k4(),r=this._groups,c=r.length,h=0;h<c;++h)for(var v=r[h],o=v.length,k,O=0;O<o;++O)if(k=v[O]){var j=Vu(k,t);a1(k,e,i,O,v,{time:j.time+j.delay+j.duration,delay:0,duration:j.duration,ease:j.ease})}return new Hc(r,this._parents,e,i)}function uD(){var e,t,i=this,r=i._id,c=i.size();return new Promise(function(h,v){var o={value:v},k={value:function(){--c===0&&h()}};i.each(function(){var O=cc(this,r),j=O.on;j!==e&&(t=(e=j).copy(),t._.cancel.push(o),t._.interrupt.push(o),t._.end.push(k)),O.on=t}),c===0&&h()})}var cD=0;function Hc(e,t,i,r){this._groups=e,this._parents=t,this._name=i,this._id=r}function k4(){return++cD}var jh=up.prototype;Hc.prototype={constructor:Hc,select:qP,selectAll:ZP,filter:FP,merge:NP,selection:WP,transition:lD,call:jh.call,nodes:jh.nodes,node:jh.node,size:jh.size,empty:jh.empty,each:jh.each,on:GP,attr:xP,attrTween:IP,style:$P,styleTween:iD,text:sD,textTween:AD,remove:QP,tween:pP,delay:MP,duration:LP,ease:RP,easeVarying:zP,end:uD,[Symbol.iterator]:jh[Symbol.iterator]};function hD(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var fD={time:null,delay:0,duration:250,ease:hD};function dD(e,t){for(var i;!(i=e.__transition)||!(i=i[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return i}function pD(e){var t,i;e instanceof Hc?(t=e._id,e=e._name):(t=k4(),(i=fD).time=qv(),e=e==null?null:e+"");for(var r=this._groups,c=r.length,h=0;h<c;++h)for(var v=r[h],o=v.length,k,O=0;O<o;++O)(k=v[O])&&a1(k,e,t,O,v,i||dD(k,t));return new Hc(r,this._parents,e,t)}up.prototype.interrupt=hP;up.prototype.transition=pD;const q_=e=>()=>e;function gD(e,{sourceEvent:t,target:i,selection:r,mode:c,dispatch:h}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:c,enumerable:!0,configurable:!0},_:{value:h}})}function mD(e){e.stopImmediatePropagation()}function Z_(e){e.preventDefault(),e.stopImmediatePropagation()}var mx={name:"drag"},j_={name:"space"},Xf={name:"handle"},Kf={name:"center"};const{abs:_x,max:LA,min:BA}=Math;function vx(e){return[+e[0],+e[1]]}function nv(e){return[vx(e[0]),vx(e[1])]}var W_={name:"x",handles:["w","e"].map(ep),input:function(e,t){return e==null?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},Y_={name:"y",handles:["n","s"].map(ep),input:function(e,t){return e==null?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},_D={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(ep),input:function(e){return e==null?null:nv(e)},output:function(e){return e}},Dc={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},yx={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},bx={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},vD={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},yD={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function ep(e){return{type:e}}function bD(e){return!e.ctrlKey&&!e.button}function xD(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function wD(){return navigator.maxTouchPoints||"ontouchstart"in this}function X_(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function SD(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function CD(){return ED(_D)}function ED(e){var t=xD,i=bD,r=wD,c=!0,h=i1("start","brush","end"),v=6,o;function k(ke){var Qe=ke.property("__brush",qe).selectAll(".overlay").data([ep("overlay")]);Qe.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Dc.overlay).merge(Qe).each(function(){var ct=X_(this).extent;ma(this).attr("x",ct[0][0]).attr("y",ct[0][1]).attr("width",ct[1][0]-ct[0][0]).attr("height",ct[1][1]-ct[0][1])}),ke.selectAll(".selection").data([ep("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Dc.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var We=ke.selectAll(".handle").data(e.handles,function(ct){return ct.type});We.exit().remove(),We.enter().append("rect").attr("class",function(ct){return"handle handle--"+ct.type}).attr("cursor",function(ct){return Dc[ct.type]}),ke.each(O).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",oe).filter(r).on("touchstart.brush",oe).on("touchmove.brush",se).on("touchend.brush touchcancel.brush",be).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}k.move=function(ke,Qe){ke.tween?ke.on("start.brush",function(We){j(this,arguments).beforestart().start(We)}).on("interrupt.brush end.brush",function(We){j(this,arguments).end(We)}).tween("brush",function(){var We=this,ct=We.__brush,St=j(We,arguments),yt=ct.selection,xe=e.input(typeof Qe=="function"?Qe.apply(this,arguments):Qe,ct.extent),Gt=r1(yt,xe);function Ve(Je){ct.selection=Je===1&&xe===null?null:Gt(Je),O.call(We),St.brush()}return yt!==null&&xe!==null?Ve:Ve(1)}):ke.each(function(){var We=this,ct=arguments,St=We.__brush,yt=e.input(typeof Qe=="function"?Qe.apply(We,ct):Qe,St.extent),xe=j(We,ct).beforestart();c0(We),St.selection=yt===null?null:yt,O.call(We),xe.start().brush().end()})},k.clear=function(ke){k.move(ke,null)};function O(){var ke=ma(this),Qe=X_(this).selection;Qe?(ke.selectAll(".selection").style("display",null).attr("x",Qe[0][0]).attr("y",Qe[0][1]).attr("width",Qe[1][0]-Qe[0][0]).attr("height",Qe[1][1]-Qe[0][1]),ke.selectAll(".handle").style("display",null).attr("x",function(We){return We.type[We.type.length-1]==="e"?Qe[1][0]-v/2:Qe[0][0]-v/2}).attr("y",function(We){return We.type[0]==="s"?Qe[1][1]-v/2:Qe[0][1]-v/2}).attr("width",function(We){return We.type==="n"||We.type==="s"?Qe[1][0]-Qe[0][0]+v:v}).attr("height",function(We){return We.type==="e"||We.type==="w"?Qe[1][1]-Qe[0][1]+v:v})):ke.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function j(ke,Qe,We){var ct=ke.__brush.emitter;return ct&&(!We||!ct.clean)?ct:new J(ke,Qe,We)}function J(ke,Qe,We){this.that=ke,this.args=Qe,this.state=ke.__brush,this.active=0,this.clean=We}J.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(ke,Qe){return this.starting?(this.starting=!1,this.emit("start",ke,Qe)):this.emit("brush",ke),this},brush:function(ke,Qe){return this.emit("brush",ke,Qe),this},end:function(ke,Qe){return--this.active===0&&(delete this.state.emitter,this.emit("end",ke,Qe)),this},emit:function(ke,Qe,We){var ct=ma(this.that).datum();h.call(ke,this.that,new gD(ke,{sourceEvent:Qe,target:k,selection:e.output(this.state.selection),mode:We,dispatch:h}),ct)}};function oe(ke){if(o&&!ke.touches||!i.apply(this,arguments))return;var Qe=this,We=ke.target.__data__.type,ct=(c&&ke.metaKey?We="overlay":We)==="selection"?mx:c&&ke.altKey?Kf:Xf,St=e===Y_?null:vD[We],yt=e===W_?null:yD[We],xe=X_(Qe),Gt=xe.extent,Ve=xe.selection,Je=Gt[0][0],et,lt,ut=Gt[0][1],Ke,Me,Ze=Gt[1][0],Fe,vt,dt=Gt[1][1],_t,ei,di=0,yi=0,Ti,Vi=St&&yt&&c&&ke.shiftKey,wi,mi,Wt=Array.from(ke.touches||[ke],ki=>{const sn=ki.identifier;return ki=Rc(ki,Qe),ki.point0=ki.slice(),ki.identifier=sn,ki});if(We==="overlay"){Ve&&(Ti=!0);const ki=[Wt[0],Wt[1]||Wt[0]];xe.selection=Ve=[[et=e===Y_?Je:BA(ki[0][0],ki[1][0]),Ke=e===W_?ut:BA(ki[0][1],ki[1][1])],[Fe=e===Y_?Ze:LA(ki[0][0],ki[1][0]),_t=e===W_?dt:LA(ki[0][1],ki[1][1])]],Wt.length>1&&Oi()}else et=Ve[0][0],Ke=Ve[0][1],Fe=Ve[1][0],_t=Ve[1][1];lt=et,Me=Ke,vt=Fe,ei=_t;var Di=ma(Qe).attr("pointer-events","none"),$t=Di.selectAll(".overlay").attr("cursor",Dc[We]);c0(Qe);var Lt=j(Qe,arguments,!0).beforestart();if(ke.touches)Lt.moved=si,Lt.ended=zi;else{var ni=ma(ke.view).on("mousemove.brush",si,!0).on("mouseup.brush",zi,!0);c&&ni.on("keydown.brush",oi,!0).on("keyup.brush",$i,!0),p4(ke.view)}O.call(Qe),Lt.start(ke,ct.name);function si(ki){for(const sn of ki.changedTouches||[ki])for(const ar of Wt)ar.identifier===sn.identifier&&(ar.cur=Rc(sn,Qe));if(Vi&&!wi&&!mi&&Wt.length===1){const sn=Wt[0];_x(sn.cur[0]-sn[0])>_x(sn.cur[1]-sn[1])?mi=!0:wi=!0}for(const sn of Wt)sn.cur&&(sn[0]=sn.cur[0],sn[1]=sn.cur[1]);Ti=!0,Z_(ki),Oi(ki)}function Oi(ki){const sn=Wt[0],ar=sn.point0;var ti;switch(di=sn[0]-ar[0],yi=sn[1]-ar[1],ct){case j_:case mx:{St&&(di=LA(Je-et,BA(Ze-Fe,di)),lt=et+di,vt=Fe+di),yt&&(yi=LA(ut-Ke,BA(dt-_t,yi)),Me=Ke+yi,ei=_t+yi);break}case Xf:{Wt[1]?(St&&(lt=LA(Je,BA(Ze,Wt[0][0])),vt=LA(Je,BA(Ze,Wt[1][0])),St=1),yt&&(Me=LA(ut,BA(dt,Wt[0][1])),ei=LA(ut,BA(dt,Wt[1][1])),yt=1)):(St<0?(di=LA(Je-et,BA(Ze-et,di)),lt=et+di,vt=Fe):St>0&&(di=LA(Je-Fe,BA(Ze-Fe,di)),lt=et,vt=Fe+di),yt<0?(yi=LA(ut-Ke,BA(dt-Ke,yi)),Me=Ke+yi,ei=_t):yt>0&&(yi=LA(ut-_t,BA(dt-_t,yi)),Me=Ke,ei=_t+yi));break}case Kf:{St&&(lt=LA(Je,BA(Ze,et-di*St)),vt=LA(Je,BA(Ze,Fe+di*St))),yt&&(Me=LA(ut,BA(dt,Ke-yi*yt)),ei=LA(ut,BA(dt,_t+yi*yt)));break}}vt<lt&&(St*=-1,ti=et,et=Fe,Fe=ti,ti=lt,lt=vt,vt=ti,We in yx&&$t.attr("cursor",Dc[We=yx[We]])),ei<Me&&(yt*=-1,ti=Ke,Ke=_t,_t=ti,ti=Me,Me=ei,ei=ti,We in bx&&$t.attr("cursor",Dc[We=bx[We]])),xe.selection&&(Ve=xe.selection),wi&&(lt=Ve[0][0],vt=Ve[1][0]),mi&&(Me=Ve[0][1],ei=Ve[1][1]),(Ve[0][0]!==lt||Ve[0][1]!==Me||Ve[1][0]!==vt||Ve[1][1]!==ei)&&(xe.selection=[[lt,Me],[vt,ei]],O.call(Qe),Lt.brush(ki,ct.name))}function zi(ki){if(mD(ki),ki.touches){if(ki.touches.length)return;o&&clearTimeout(o),o=setTimeout(function(){o=null},500)}else g4(ki.view,Ti),ni.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);Di.attr("pointer-events","all"),$t.attr("cursor",Dc.overlay),xe.selection&&(Ve=xe.selection),SD(Ve)&&(xe.selection=null,O.call(Qe)),Lt.end(ki,ct.name)}function oi(ki){switch(ki.keyCode){case 16:{Vi=St&&yt;break}case 18:{ct===Xf&&(St&&(Fe=vt-di*St,et=lt+di*St),yt&&(_t=ei-yi*yt,Ke=Me+yi*yt),ct=Kf,Oi());break}case 32:{(ct===Xf||ct===Kf)&&(St<0?Fe=vt-di:St>0&&(et=lt-di),yt<0?_t=ei-yi:yt>0&&(Ke=Me-yi),ct=j_,$t.attr("cursor",Dc.selection),Oi());break}default:return}Z_(ki)}function $i(ki){switch(ki.keyCode){case 16:{Vi&&(wi=mi=Vi=!1,Oi());break}case 18:{ct===Kf&&(St<0?Fe=vt:St>0&&(et=lt),yt<0?_t=ei:yt>0&&(Ke=Me),ct=Xf,Oi());break}case 32:{ct===j_&&(ki.altKey?(St&&(Fe=vt-di*St,et=lt+di*St),yt&&(_t=ei-yi*yt,Ke=Me+yi*yt),ct=Kf):(St<0?Fe=vt:St>0&&(et=lt),yt<0?_t=ei:yt>0&&(Ke=Me),ct=Xf),$t.attr("cursor",Dc[We]),Oi());break}default:return}Z_(ki)}}function se(ke){j(this,arguments).moved(ke)}function be(ke){j(this,arguments).ended(ke)}function qe(){var ke=this.__brush||{selection:null};return ke.extent=nv(t.apply(this,arguments)),ke.dim=e,ke}return k.extent=function(ke){return arguments.length?(t=typeof ke=="function"?ke:q_(nv(ke)),k):t},k.filter=function(ke){return arguments.length?(i=typeof ke=="function"?ke:q_(!!ke),k):i},k.touchable=function(ke){return arguments.length?(r=typeof ke=="function"?ke:q_(!!ke),k):r},k.handleSize=function(ke){return arguments.length?(v=+ke,k):v},k.keyModifiers=function(ke){return arguments.length?(c=!!ke,k):c},k.on=function(){var ke=h.on.apply(h,arguments);return ke===h?k:ke},k}const rv=Math.PI,sv=2*rv,Xh=1e-6,ID=sv-Xh;function av(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function M4(){return new av}av.prototype=M4.prototype={constructor:av,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,i,r){this._+="Q"+ +e+","+ +t+","+(this._x1=+i)+","+(this._y1=+r)},bezierCurveTo:function(e,t,i,r,c,h){this._+="C"+ +e+","+ +t+","+ +i+","+ +r+","+(this._x1=+c)+","+(this._y1=+h)},arcTo:function(e,t,i,r,c){e=+e,t=+t,i=+i,r=+r,c=+c;var h=this._x1,v=this._y1,o=i-e,k=r-t,O=h-e,j=v-t,J=O*O+j*j;if(c<0)throw new Error("negative radius: "+c);if(this._x1===null)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(J>Xh)if(!(Math.abs(j*o-k*O)>Xh)||!c)this._+="L"+(this._x1=e)+","+(this._y1=t);else{var oe=i-h,se=r-v,be=o*o+k*k,qe=oe*oe+se*se,ke=Math.sqrt(be),Qe=Math.sqrt(J),We=c*Math.tan((rv-Math.acos((be+J-qe)/(2*ke*Qe)))/2),ct=We/Qe,St=We/ke;Math.abs(ct-1)>Xh&&(this._+="L"+(e+ct*O)+","+(t+ct*j)),this._+="A"+c+","+c+",0,0,"+ +(j*oe>O*se)+","+(this._x1=e+St*o)+","+(this._y1=t+St*k)}},arc:function(e,t,i,r,c,h){e=+e,t=+t,i=+i,h=!!h;var v=i*Math.cos(r),o=i*Math.sin(r),k=e+v,O=t+o,j=1^h,J=h?r-c:c-r;if(i<0)throw new Error("negative radius: "+i);this._x1===null?this._+="M"+k+","+O:(Math.abs(this._x1-k)>Xh||Math.abs(this._y1-O)>Xh)&&(this._+="L"+k+","+O),i&&(J<0&&(J=J%sv+sv),J>ID?this._+="A"+i+","+i+",0,1,"+j+","+(e-v)+","+(t-o)+"A"+i+","+i+",0,1,"+j+","+(this._x1=k)+","+(this._y1=O):J>Xh&&(this._+="A"+i+","+i+",0,"+ +(J>=rv)+","+j+","+(this._x1=e+i*Math.cos(c))+","+(this._y1=t+i*Math.sin(c))))},rect:function(e,t,i,r){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +i+"v"+ +r+"h"+-i+"Z"},toString:function(){return this._}};function TD(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Om(e,t){if((i=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var i,r=e.slice(0,i);return[r.length>1?r[0]+r.slice(2):r,+e.slice(i+1)]}function m0(e){return e=Om(Math.abs(e)),e?e[1]:NaN}function kD(e,t){return function(i,r){for(var c=i.length,h=[],v=0,o=e[0],k=0;c>0&&o>0&&(k+o+1>r&&(o=Math.max(1,r-k)),h.push(i.substring(c-=o,c+o)),!((k+=o+1)>r));)o=e[v=(v+1)%e.length];return h.reverse().join(t)}}function MD(e){return function(t){return t.replace(/[0-9]/g,function(i){return e[+i]})}}var PD=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function zm(e){if(!(t=PD.exec(e)))throw new Error("invalid format: "+e);var t;return new Wv({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}zm.prototype=Wv.prototype;function Wv(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Wv.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function DD(e){e:for(var t=e.length,i=1,r=-1,c;i<t;++i)switch(e[i]){case".":r=c=i;break;case"0":r===0&&(r=i),c=i;break;default:if(!+e[i])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(c+1):e}var P4;function LD(e,t){var i=Om(e,t);if(!i)return e+"";var r=i[0],c=i[1],h=c-(P4=Math.max(-8,Math.min(8,Math.floor(c/3)))*3)+1,v=r.length;return h===v?r:h>v?r+new Array(h-v+1).join("0"):h>0?r.slice(0,h)+"."+r.slice(h):"0."+new Array(1-h).join("0")+Om(e,Math.max(0,t+h-1))[0]}function xx(e,t){var i=Om(e,t);if(!i)return e+"";var r=i[0],c=i[1];return c<0?"0."+new Array(-c).join("0")+r:r.length>c+1?r.slice(0,c+1)+"."+r.slice(c+1):r+new Array(c-r.length+2).join("0")}const wx={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:TD,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>xx(e*100,t),r:xx,s:LD,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Sx(e){return e}var Cx=Array.prototype.map,Ex=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function BD(e){var t=e.grouping===void 0||e.thousands===void 0?Sx:kD(Cx.call(e.grouping,Number),e.thousands+""),i=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",c=e.decimal===void 0?".":e.decimal+"",h=e.numerals===void 0?Sx:MD(Cx.call(e.numerals,String)),v=e.percent===void 0?"%":e.percent+"",o=e.minus===void 0?"−":e.minus+"",k=e.nan===void 0?"NaN":e.nan+"";function O(J){J=zm(J);var oe=J.fill,se=J.align,be=J.sign,qe=J.symbol,ke=J.zero,Qe=J.width,We=J.comma,ct=J.precision,St=J.trim,yt=J.type;yt==="n"?(We=!0,yt="g"):wx[yt]||(ct===void 0&&(ct=12),St=!0,yt="g"),(ke||oe==="0"&&se==="=")&&(ke=!0,oe="0",se="=");var xe=qe==="$"?i:qe==="#"&&/[boxX]/.test(yt)?"0"+yt.toLowerCase():"",Gt=qe==="$"?r:/[%p]/.test(yt)?v:"",Ve=wx[yt],Je=/[defgprs%]/.test(yt);ct=ct===void 0?6:/[gprs]/.test(yt)?Math.max(1,Math.min(21,ct)):Math.max(0,Math.min(20,ct));function et(lt){var ut=xe,Ke=Gt,Me,Ze,Fe;if(yt==="c")Ke=Ve(lt)+Ke,lt="";else{lt=+lt;var vt=lt<0||1/lt<0;if(lt=isNaN(lt)?k:Ve(Math.abs(lt),ct),St&&(lt=DD(lt)),vt&&+lt==0&&be!=="+"&&(vt=!1),ut=(vt?be==="("?be:o:be==="-"||be==="("?"":be)+ut,Ke=(yt==="s"?Ex[8+P4/3]:"")+Ke+(vt&&be==="("?")":""),Je){for(Me=-1,Ze=lt.length;++Me<Ze;)if(Fe=lt.charCodeAt(Me),48>Fe||Fe>57){Ke=(Fe===46?c+lt.slice(Me+1):lt.slice(Me))+Ke,lt=lt.slice(0,Me);break}}}We&&!ke&&(lt=t(lt,1/0));var dt=ut.length+lt.length+Ke.length,_t=dt<Qe?new Array(Qe-dt+1).join(oe):"";switch(We&&ke&&(lt=t(_t+lt,_t.length?Qe-Ke.length:1/0),_t=""),se){case"<":lt=ut+lt+Ke+_t;break;case"=":lt=ut+_t+lt+Ke;break;case"^":lt=_t.slice(0,dt=_t.length>>1)+ut+lt+Ke+_t.slice(dt);break;default:lt=_t+ut+lt+Ke;break}return h(lt)}return et.toString=function(){return J+""},et}function j(J,oe){var se=O((J=zm(J),J.type="f",J)),be=Math.max(-8,Math.min(8,Math.floor(m0(oe)/3)))*3,qe=Math.pow(10,-be),ke=Ex[8+be/3];return function(Qe){return se(qe*Qe)+ke}}return{format:O,formatPrefix:j}}var Xg,Yv,D4;RD({thousands:",",grouping:[3],currency:["$",""]});function RD(e){return Xg=BD(e),Yv=Xg.format,D4=Xg.formatPrefix,Xg}function OD(e){return Math.max(0,-m0(Math.abs(e)))}function zD(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(m0(t)/3)))*3-m0(Math.abs(e)))}function FD(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,m0(t)-m0(e))+1}function ND(e){var t=0,i=e.children,r=i&&i.length;if(!r)t=1;else for(;--r>=0;)t+=i[r].value;e.value=t}function VD(){return this.eachAfter(ND)}function UD(e,t){let i=-1;for(const r of this)e.call(t,r,++i,this);return this}function GD(e,t){for(var i=this,r=[i],c,h,v=-1;i=r.pop();)if(e.call(t,i,++v,this),c=i.children)for(h=c.length-1;h>=0;--h)r.push(c[h]);return this}function HD(e,t){for(var i=this,r=[i],c=[],h,v,o,k=-1;i=r.pop();)if(c.push(i),h=i.children)for(v=0,o=h.length;v<o;++v)r.push(h[v]);for(;i=c.pop();)e.call(t,i,++k,this);return this}function QD(e,t){let i=-1;for(const r of this)if(e.call(t,r,++i,this))return r}function qD(e){return this.eachAfter(function(t){for(var i=+e(t.data)||0,r=t.children,c=r&&r.length;--c>=0;)i+=r[c].value;t.value=i})}function ZD(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function jD(e){for(var t=this,i=WD(t,e),r=[t];t!==i;)t=t.parent,r.push(t);for(var c=r.length;e!==i;)r.splice(c,0,e),e=e.parent;return r}function WD(e,t){if(e===t)return e;var i=e.ancestors(),r=t.ancestors(),c=null;for(e=i.pop(),t=r.pop();e===t;)c=e,e=i.pop(),t=r.pop();return c}function YD(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function XD(){return Array.from(this)}function KD(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function JD(){var e=this,t=[];return e.each(function(i){i!==e&&t.push({source:i.parent,target:i})}),t}function*$D(){var e=this,t,i=[e],r,c,h;do for(t=i.reverse(),i=[];e=t.pop();)if(yield e,r=e.children)for(c=0,h=r.length;c<h;++c)i.push(r[c]);while(i.length)}function tf(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=iL)):t===void 0&&(t=tL);for(var i=new Fm(e),r,c=[i],h,v,o,k;r=c.pop();)if((v=t(r.data))&&(k=(v=Array.from(v)).length))for(r.children=v,o=k-1;o>=0;--o)c.push(h=v[o]=new Fm(v[o])),h.parent=r,h.depth=r.depth+1;return i.eachBefore(rL)}function eL(){return tf(this).eachBefore(nL)}function tL(e){return e.children}function iL(e){return Array.isArray(e)?e[1]:null}function nL(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function rL(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function Fm(e){this.data=e,this.depth=this.height=0,this.parent=null}Fm.prototype=tf.prototype={constructor:Fm,count:VD,each:UD,eachAfter:HD,eachBefore:GD,find:QD,sum:qD,sort:ZD,path:jD,ancestors:YD,descendants:XD,leaves:KD,links:JD,copy:eL,[Symbol.iterator]:$D};function sL(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function aL(e){return function(){return e}}function oL(e){return+e}var Ix=[0,1];function n0(e){return e}function ov(e,t){return(t-=e=+e)?function(i){return(i-e)/t}:aL(isNaN(t)?NaN:.5)}function AL(e,t){var i;return e>t&&(i=e,e=t,t=i),function(r){return Math.max(e,Math.min(t,r))}}function lL(e,t,i){var r=e[0],c=e[1],h=t[0],v=t[1];return c<r?(r=ov(c,r),h=i(v,h)):(r=ov(r,c),h=i(h,v)),function(o){return h(r(o))}}function uL(e,t,i){var r=Math.min(e.length,t.length)-1,c=new Array(r),h=new Array(r),v=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++v<r;)c[v]=ov(e[v],e[v+1]),h[v]=i(t[v],t[v+1]);return function(o){var k=zM(e,o,1,r)-1;return h[k](c[k](o))}}function cL(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function hL(){var e=Ix,t=Ix,i=r1,r,c,h,v=n0,o,k,O;function j(){var oe=Math.min(e.length,t.length);return v!==n0&&(v=AL(e[0],e[oe-1])),o=oe>2?uL:lL,k=O=null,J}function J(oe){return oe==null||isNaN(oe=+oe)?h:(k||(k=o(e.map(r),t,i)))(r(v(oe)))}return J.invert=function(oe){return v(c((O||(O=o(t,e.map(r),Ou)))(oe)))},J.domain=function(oe){return arguments.length?(e=Array.from(oe,oL),j()):e.slice()},J.range=function(oe){return arguments.length?(t=Array.from(oe),j()):t.slice()},J.rangeRound=function(oe){return t=Array.from(oe),i=X9,j()},J.clamp=function(oe){return arguments.length?(v=oe?!0:n0,j()):v!==n0},J.interpolate=function(oe){return arguments.length?(i=oe,j()):i},J.unknown=function(oe){return arguments.length?(h=oe,J):h},function(oe,se){return r=oe,c=se,j()}}function fL(){return hL()(n0,n0)}function dL(e,t,i,r){var c=NM(e,t,i),h;switch(r=zm(r??",f"),r.type){case"s":{var v=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(h=zD(c,v))&&(r.precision=h),D4(r,v)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(h=FD(c,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=h-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(h=OD(c))&&(r.precision=h-(r.type==="%")*2);break}}return Yv(r)}function pL(e){var t=e.domain;return e.ticks=function(i){var r=t();return FM(r[0],r[r.length-1],i??10)},e.tickFormat=function(i,r){var c=t();return dL(c[0],c[c.length-1],i??10,r)},e.nice=function(i){i==null&&(i=10);var r=t(),c=0,h=r.length-1,v=r[c],o=r[h],k,O,j=10;for(o<v&&(O=v,v=o,o=O,O=c,c=h,h=O);j-- >0;){if(O=i4(v,o,i),O===k)return r[c]=v,r[h]=o,t(r);if(O>0)v=Math.floor(v/O)*O,o=Math.ceil(o/O)*O;else if(O<0)v=Math.ceil(v*O)/O,o=Math.floor(o*O)/O;else break;k=O}return e},e}function L4(){var e=fL();return e.copy=function(){return cL(e,L4())},sL.apply(e,arguments),pL(e)}var K_=new Date,J_=new Date;function jc(e,t,i,r){function c(h){return e(h=arguments.length===0?new Date:new Date(+h)),h}return c.floor=function(h){return e(h=new Date(+h)),h},c.ceil=function(h){return e(h=new Date(h-1)),t(h,1),e(h),h},c.round=function(h){var v=c(h),o=c.ceil(h);return h-v<o-h?v:o},c.offset=function(h,v){return t(h=new Date(+h),v==null?1:Math.floor(v)),h},c.range=function(h,v,o){var k=[],O;if(h=c.ceil(h),o=o==null?1:Math.floor(o),!(h<v)||!(o>0))return k;do k.push(O=new Date(+h)),t(h,o),e(h);while(O<h&&h<v);return k},c.filter=function(h){return jc(function(v){if(v>=v)for(;e(v),!h(v);)v.setTime(v-1)},function(v,o){if(v>=v)if(o<0)for(;++o<=0;)for(;t(v,-1),!h(v););else for(;--o>=0;)for(;t(v,1),!h(v););})},i&&(c.count=function(h,v){return K_.setTime(+h),J_.setTime(+v),e(K_),e(J_),Math.floor(i(K_,J_))},c.every=function(h){return h=Math.floor(h),!isFinite(h)||!(h>0)?null:h>1?c.filter(r?function(v){return r(v)%h===0}:function(v){return c.count(0,v)%h===0}):c}),c}const gL=1e3,Xv=gL*60,mL=Xv*60,Kv=mL*24,B4=Kv*7;var Jv=jc(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Xv)/Kv,e=>e.getDate()-1);Jv.range;function pf(e){return jc(function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},function(t,i){t.setDate(t.getDate()+i*7)},function(t,i){return(i-t-(i.getTimezoneOffset()-t.getTimezoneOffset())*Xv)/B4})}var R4=pf(0),Nm=pf(1),_L=pf(2),vL=pf(3),_0=pf(4),yL=pf(5),bL=pf(6);R4.range;Nm.range;_L.range;vL.range;_0.range;yL.range;bL.range;var uf=jc(function(e){e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e,t){return t.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()});uf.every=function(e){return!isFinite(e=Math.floor(e))||!(e>0)?null:jc(function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,i){t.setFullYear(t.getFullYear()+i*e)})};uf.range;var $v=jc(function(e){e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t)},function(e,t){return(t-e)/Kv},function(e){return e.getUTCDate()-1});$v.range;function gf(e){return jc(function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},function(t,i){t.setUTCDate(t.getUTCDate()+i*7)},function(t,i){return(i-t)/B4})}var O4=gf(0),Vm=gf(1),xL=gf(2),wL=gf(3),v0=gf(4),SL=gf(5),CL=gf(6);O4.range;Vm.range;xL.range;wL.range;v0.range;SL.range;CL.range;var cf=jc(function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)},function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()});cf.every=function(e){return!isFinite(e=Math.floor(e))||!(e>0)?null:jc(function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,i){t.setUTCFullYear(t.getUTCFullYear()+i*e)})};cf.range;function $_(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function e2(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Md(e,t,i){return{y:e,m:t,d:i,H:0,M:0,S:0,L:0}}function EL(e){var t=e.dateTime,i=e.date,r=e.time,c=e.periods,h=e.days,v=e.shortDays,o=e.months,k=e.shortMonths,O=Pd(c),j=Dd(c),J=Pd(h),oe=Dd(h),se=Pd(v),be=Dd(v),qe=Pd(o),ke=Dd(o),Qe=Pd(k),We=Dd(k),ct={a:vt,A:dt,b:_t,B:ei,c:null,d:Lx,e:Lx,f:YL,g:sB,G:oB,H:ZL,I:jL,j:WL,L:z4,m:XL,M:KL,p:di,q:yi,Q:Ox,s:zx,S:JL,u:$L,U:eB,V:tB,w:iB,W:nB,x:null,X:null,y:rB,Y:aB,Z:AB,"%":Rx},St={a:Ti,A:Vi,b:wi,B:mi,c:null,d:Bx,e:Bx,f:hB,g:xB,G:SB,H:lB,I:uB,j:cB,L:N4,m:fB,M:dB,p:Wt,q:Di,Q:Ox,s:zx,S:pB,u:gB,U:mB,V:_B,w:vB,W:yB,x:null,X:null,y:bB,Y:wB,Z:CB,"%":Rx},yt={a:et,A:lt,b:ut,B:Ke,c:Me,d:Px,e:Px,f:GL,g:Mx,G:kx,H:Dx,I:Dx,j:FL,L:UL,m:zL,M:NL,p:Je,q:OL,Q:QL,s:qL,S:VL,u:PL,U:DL,V:LL,w:ML,W:BL,x:Ze,X:Fe,y:Mx,Y:kx,Z:RL,"%":HL};ct.x=xe(i,ct),ct.X=xe(r,ct),ct.c=xe(t,ct),St.x=xe(i,St),St.X=xe(r,St),St.c=xe(t,St);function xe($t,Lt){return function(ni){var si=[],Oi=-1,zi=0,oi=$t.length,$i,ki,sn;for(ni instanceof Date||(ni=new Date(+ni));++Oi<oi;)$t.charCodeAt(Oi)===37&&(si.push($t.slice(zi,Oi)),(ki=Tx[$i=$t.charAt(++Oi)])!=null?$i=$t.charAt(++Oi):ki=$i==="e"?" ":"0",(sn=Lt[$i])&&($i=sn(ni,ki)),si.push($i),zi=Oi+1);return si.push($t.slice(zi,Oi)),si.join("")}}function Gt($t,Lt){return function(ni){var si=Md(1900,void 0,1),Oi=Ve(si,$t,ni+="",0),zi,oi;if(Oi!=ni.length)return null;if("Q"in si)return new Date(si.Q);if("s"in si)return new Date(si.s*1e3+("L"in si?si.L:0));if(Lt&&!("Z"in si)&&(si.Z=0),"p"in si&&(si.H=si.H%12+si.p*12),si.m===void 0&&(si.m="q"in si?si.q:0),"V"in si){if(si.V<1||si.V>53)return null;"w"in si||(si.w=1),"Z"in si?(zi=e2(Md(si.y,0,1)),oi=zi.getUTCDay(),zi=oi>4||oi===0?Vm.ceil(zi):Vm(zi),zi=$v.offset(zi,(si.V-1)*7),si.y=zi.getUTCFullYear(),si.m=zi.getUTCMonth(),si.d=zi.getUTCDate()+(si.w+6)%7):(zi=$_(Md(si.y,0,1)),oi=zi.getDay(),zi=oi>4||oi===0?Nm.ceil(zi):Nm(zi),zi=Jv.offset(zi,(si.V-1)*7),si.y=zi.getFullYear(),si.m=zi.getMonth(),si.d=zi.getDate()+(si.w+6)%7)}else("W"in si||"U"in si)&&("w"in si||(si.w="u"in si?si.u%7:"W"in si?1:0),oi="Z"in si?e2(Md(si.y,0,1)).getUTCDay():$_(Md(si.y,0,1)).getDay(),si.m=0,si.d="W"in si?(si.w+6)%7+si.W*7-(oi+5)%7:si.w+si.U*7-(oi+6)%7);return"Z"in si?(si.H+=si.Z/100|0,si.M+=si.Z%100,e2(si)):$_(si)}}function Ve($t,Lt,ni,si){for(var Oi=0,zi=Lt.length,oi=ni.length,$i,ki;Oi<zi;){if(si>=oi)return-1;if($i=Lt.charCodeAt(Oi++),$i===37){if($i=Lt.charAt(Oi++),ki=yt[$i in Tx?Lt.charAt(Oi++):$i],!ki||(si=ki($t,ni,si))<0)return-1}else if($i!=ni.charCodeAt(si++))return-1}return si}function Je($t,Lt,ni){var si=O.exec(Lt.slice(ni));return si?($t.p=j.get(si[0].toLowerCase()),ni+si[0].length):-1}function et($t,Lt,ni){var si=se.exec(Lt.slice(ni));return si?($t.w=be.get(si[0].toLowerCase()),ni+si[0].length):-1}function lt($t,Lt,ni){var si=J.exec(Lt.slice(ni));return si?($t.w=oe.get(si[0].toLowerCase()),ni+si[0].length):-1}function ut($t,Lt,ni){var si=Qe.exec(Lt.slice(ni));return si?($t.m=We.get(si[0].toLowerCase()),ni+si[0].length):-1}function Ke($t,Lt,ni){var si=qe.exec(Lt.slice(ni));return si?($t.m=ke.get(si[0].toLowerCase()),ni+si[0].length):-1}function Me($t,Lt,ni){return Ve($t,t,Lt,ni)}function Ze($t,Lt,ni){return Ve($t,i,Lt,ni)}function Fe($t,Lt,ni){return Ve($t,r,Lt,ni)}function vt($t){return v[$t.getDay()]}function dt($t){return h[$t.getDay()]}function _t($t){return k[$t.getMonth()]}function ei($t){return o[$t.getMonth()]}function di($t){return c[+($t.getHours()>=12)]}function yi($t){return 1+~~($t.getMonth()/3)}function Ti($t){return v[$t.getUTCDay()]}function Vi($t){return h[$t.getUTCDay()]}function wi($t){return k[$t.getUTCMonth()]}function mi($t){return o[$t.getUTCMonth()]}function Wt($t){return c[+($t.getUTCHours()>=12)]}function Di($t){return 1+~~($t.getUTCMonth()/3)}return{format:function($t){var Lt=xe($t+="",ct);return Lt.toString=function(){return $t},Lt},parse:function($t){var Lt=Gt($t+="",!1);return Lt.toString=function(){return $t},Lt},utcFormat:function($t){var Lt=xe($t+="",St);return Lt.toString=function(){return $t},Lt},utcParse:function($t){var Lt=Gt($t+="",!0);return Lt.toString=function(){return $t},Lt}}}var Tx={"-":"",_:" ",0:"0"},cA=/^\s*\d+/,IL=/^%/,TL=/[\\^$*+?|[\]().{}]/g;function Es(e,t,i){var r=e<0?"-":"",c=(r?-e:e)+"",h=c.length;return r+(h<i?new Array(i-h+1).join(t)+c:c)}function kL(e){return e.replace(TL,"\\$&")}function Pd(e){return new RegExp("^(?:"+e.map(kL).join("|")+")","i")}function Dd(e){return new Map(e.map((t,i)=>[t.toLowerCase(),i]))}function ML(e,t,i){var r=cA.exec(t.slice(i,i+1));return r?(e.w=+r[0],i+r[0].length):-1}function PL(e,t,i){var r=cA.exec(t.slice(i,i+1));return r?(e.u=+r[0],i+r[0].length):-1}function DL(e,t,i){var r=cA.exec(t.slice(i,i+2));return r?(e.U=+r[0],i+r[0].length):-1}function LL(e,t,i){var r=cA.exec(t.slice(i,i+2));return r?(e.V=+r[0],i+r[0].length):-1}function BL(e,t,i){var r=cA.exec(t.slice(i,i+2));return r?(e.W=+r[0],i+r[0].length):-1}function kx(e,t,i){var r=cA.exec(t.slice(i,i+4));return r?(e.y=+r[0],i+r[0].length):-1}function Mx(e,t,i){var r=cA.exec(t.slice(i,i+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),i+r[0].length):-1}function RL(e,t,i){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(i,i+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),i+r[0].length):-1}function OL(e,t,i){var r=cA.exec(t.slice(i,i+1));return r?(e.q=r[0]*3-3,i+r[0].length):-1}function zL(e,t,i){var r=cA.exec(t.slice(i,i+2));return r?(e.m=r[0]-1,i+r[0].length):-1}function Px(e,t,i){var r=cA.exec(t.slice(i,i+2));return r?(e.d=+r[0],i+r[0].length):-1}function FL(e,t,i){var r=cA.exec(t.slice(i,i+3));return r?(e.m=0,e.d=+r[0],i+r[0].length):-1}function Dx(e,t,i){var r=cA.exec(t.slice(i,i+2));return r?(e.H=+r[0],i+r[0].length):-1}function NL(e,t,i){var r=cA.exec(t.slice(i,i+2));return r?(e.M=+r[0],i+r[0].length):-1}function VL(e,t,i){var r=cA.exec(t.slice(i,i+2));return r?(e.S=+r[0],i+r[0].length):-1}function UL(e,t,i){var r=cA.exec(t.slice(i,i+3));return r?(e.L=+r[0],i+r[0].length):-1}function GL(e,t,i){var r=cA.exec(t.slice(i,i+6));return r?(e.L=Math.floor(r[0]/1e3),i+r[0].length):-1}function HL(e,t,i){var r=IL.exec(t.slice(i,i+1));return r?i+r[0].length:-1}function QL(e,t,i){var r=cA.exec(t.slice(i));return r?(e.Q=+r[0],i+r[0].length):-1}function qL(e,t,i){var r=cA.exec(t.slice(i));return r?(e.s=+r[0],i+r[0].length):-1}function Lx(e,t){return Es(e.getDate(),t,2)}function ZL(e,t){return Es(e.getHours(),t,2)}function jL(e,t){return Es(e.getHours()%12||12,t,2)}function WL(e,t){return Es(1+Jv.count(uf(e),e),t,3)}function z4(e,t){return Es(e.getMilliseconds(),t,3)}function YL(e,t){return z4(e,t)+"000"}function XL(e,t){return Es(e.getMonth()+1,t,2)}function KL(e,t){return Es(e.getMinutes(),t,2)}function JL(e,t){return Es(e.getSeconds(),t,2)}function $L(e){var t=e.getDay();return t===0?7:t}function eB(e,t){return Es(R4.count(uf(e)-1,e),t,2)}function F4(e){var t=e.getDay();return t>=4||t===0?_0(e):_0.ceil(e)}function tB(e,t){return e=F4(e),Es(_0.count(uf(e),e)+(uf(e).getDay()===4),t,2)}function iB(e){return e.getDay()}function nB(e,t){return Es(Nm.count(uf(e)-1,e),t,2)}function rB(e,t){return Es(e.getFullYear()%100,t,2)}function sB(e,t){return e=F4(e),Es(e.getFullYear()%100,t,2)}function aB(e,t){return Es(e.getFullYear()%1e4,t,4)}function oB(e,t){var i=e.getDay();return e=i>=4||i===0?_0(e):_0.ceil(e),Es(e.getFullYear()%1e4,t,4)}function AB(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Es(t/60|0,"0",2)+Es(t%60,"0",2)}function Bx(e,t){return Es(e.getUTCDate(),t,2)}function lB(e,t){return Es(e.getUTCHours(),t,2)}function uB(e,t){return Es(e.getUTCHours()%12||12,t,2)}function cB(e,t){return Es(1+$v.count(cf(e),e),t,3)}function N4(e,t){return Es(e.getUTCMilliseconds(),t,3)}function hB(e,t){return N4(e,t)+"000"}function fB(e,t){return Es(e.getUTCMonth()+1,t,2)}function dB(e,t){return Es(e.getUTCMinutes(),t,2)}function pB(e,t){return Es(e.getUTCSeconds(),t,2)}function gB(e){var t=e.getUTCDay();return t===0?7:t}function mB(e,t){return Es(O4.count(cf(e)-1,e),t,2)}function V4(e){var t=e.getUTCDay();return t>=4||t===0?v0(e):v0.ceil(e)}function _B(e,t){return e=V4(e),Es(v0.count(cf(e),e)+(cf(e).getUTCDay()===4),t,2)}function vB(e){return e.getUTCDay()}function yB(e,t){return Es(Vm.count(cf(e)-1,e),t,2)}function bB(e,t){return Es(e.getUTCFullYear()%100,t,2)}function xB(e,t){return e=V4(e),Es(e.getUTCFullYear()%100,t,2)}function wB(e,t){return Es(e.getUTCFullYear()%1e4,t,4)}function SB(e,t){var i=e.getUTCDay();return e=i>=4||i===0?v0(e):v0.ceil(e),Es(e.getUTCFullYear()%1e4,t,4)}function CB(){return"+0000"}function Rx(){return"%"}function Ox(e){return+e}function zx(e){return Math.floor(+e/1e3)}var Jf,U4;EB({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function EB(e){return Jf=EL(e),Jf.format,U4=Jf.parse,Jf.utcFormat,Jf.utcParse,Jf}function $f(e){return function(){return e}}function IB(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function G4(e){this._context=e}G4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function TB(e){return new G4(e)}function kB(e){return e[0]}function MB(e){return e[1]}function Av(e,t){var i=$f(!0),r=null,c=TB,h=null;e=typeof e=="function"?e:e===void 0?kB:$f(e),t=typeof t=="function"?t:t===void 0?MB:$f(t);function v(o){var k,O=(o=IB(o)).length,j,J=!1,oe;for(r==null&&(h=c(oe=M4())),k=0;k<=O;++k)!(k<O&&i(j=o[k],k,o))===J&&((J=!J)?h.lineStart():h.lineEnd()),J&&h.point(+e(j,k,o),+t(j,k,o));if(oe)return h=null,oe+""||null}return v.x=function(o){return arguments.length?(e=typeof o=="function"?o:$f(+o),v):e},v.y=function(o){return arguments.length?(t=typeof o=="function"?o:$f(+o),v):t},v.defined=function(o){return arguments.length?(i=typeof o=="function"?o:$f(!!o),v):i},v.curve=function(o){return arguments.length?(c=o,r!=null&&(h=c(r)),v):c},v.context=function(o){return arguments.length?(o==null?r=h=null:h=c(r=o),v):r},v}function Fx(e,t,i){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+i)/6)}function H4(e){this._context=e}H4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Fx(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Fx(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Nx(e){return new H4(e)}function Q4(e,t){this._context=e,this._t=t}Q4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var i=this._x*(1-this._t)+e*this._t;this._context.lineTo(i,this._y),this._context.lineTo(i,t)}break}}this._x=e,this._y=t}};function PB(e){return new Q4(e,0)}const Kg=e=>()=>e;function DB(e,{sourceEvent:t,target:i,transform:r,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:c}})}function zc(e,t,i){this.k=e,this.x=t,this.y=i}zc.prototype={constructor:zc,scale:function(e){return e===1?this:new zc(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new zc(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var q4=new zc(1,0,0);zc.prototype;function t2(e){e.stopImmediatePropagation()}function Ld(e){e.preventDefault(),e.stopImmediatePropagation()}function LB(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function BB(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Vx(){return this.__zoom||q4}function RB(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function OB(){return navigator.maxTouchPoints||"ontouchstart"in this}function zB(e,t,i){var r=e.invertX(t[0][0])-i[0][0],c=e.invertX(t[1][0])-i[1][0],h=e.invertY(t[0][1])-i[0][1],v=e.invertY(t[1][1])-i[1][1];return e.translate(c>r?(r+c)/2:Math.min(0,r)||Math.max(0,c),v>h?(h+v)/2:Math.min(0,h)||Math.max(0,v))}function FB(){var e=LB,t=BB,i=zB,r=RB,c=OB,h=[0,1/0],v=[[-1/0,-1/0],[1/0,1/0]],o=250,k=rP,O=i1("start","zoom","end"),j,J,oe,se=500,be=150,qe=0,ke=10;function Qe(Me){Me.property("__zoom",Vx).on("wheel.zoom",Ve).on("mousedown.zoom",Je).on("dblclick.zoom",et).filter(c).on("touchstart.zoom",lt).on("touchmove.zoom",ut).on("touchend.zoom touchcancel.zoom",Ke).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}Qe.transform=function(Me,Ze,Fe,vt){var dt=Me.selection?Me.selection():Me;dt.property("__zoom",Vx),Me!==dt?yt(Me,Ze,Fe,vt):dt.interrupt().each(function(){xe(this,arguments).event(vt).start().zoom(null,typeof Ze=="function"?Ze.apply(this,arguments):Ze).end()})},Qe.scaleBy=function(Me,Ze,Fe,vt){Qe.scaleTo(Me,function(){var dt=this.__zoom.k,_t=typeof Ze=="function"?Ze.apply(this,arguments):Ze;return dt*_t},Fe,vt)},Qe.scaleTo=function(Me,Ze,Fe,vt){Qe.transform(Me,function(){var dt=t.apply(this,arguments),_t=this.__zoom,ei=Fe==null?St(dt):typeof Fe=="function"?Fe.apply(this,arguments):Fe,di=_t.invert(ei),yi=typeof Ze=="function"?Ze.apply(this,arguments):Ze;return i(ct(We(_t,yi),ei,di),dt,v)},Fe,vt)},Qe.translateBy=function(Me,Ze,Fe,vt){Qe.transform(Me,function(){return i(this.__zoom.translate(typeof Ze=="function"?Ze.apply(this,arguments):Ze,typeof Fe=="function"?Fe.apply(this,arguments):Fe),t.apply(this,arguments),v)},null,vt)},Qe.translateTo=function(Me,Ze,Fe,vt,dt){Qe.transform(Me,function(){var _t=t.apply(this,arguments),ei=this.__zoom,di=vt==null?St(_t):typeof vt=="function"?vt.apply(this,arguments):vt;return i(q4.translate(di[0],di[1]).scale(ei.k).translate(typeof Ze=="function"?-Ze.apply(this,arguments):-Ze,typeof Fe=="function"?-Fe.apply(this,arguments):-Fe),_t,v)},vt,dt)};function We(Me,Ze){return Ze=Math.max(h[0],Math.min(h[1],Ze)),Ze===Me.k?Me:new zc(Ze,Me.x,Me.y)}function ct(Me,Ze,Fe){var vt=Ze[0]-Fe[0]*Me.k,dt=Ze[1]-Fe[1]*Me.k;return vt===Me.x&&dt===Me.y?Me:new zc(Me.k,vt,dt)}function St(Me){return[(+Me[0][0]+ +Me[1][0])/2,(+Me[0][1]+ +Me[1][1])/2]}function yt(Me,Ze,Fe,vt){Me.on("start.zoom",function(){xe(this,arguments).event(vt).start()}).on("interrupt.zoom end.zoom",function(){xe(this,arguments).event(vt).end()}).tween("zoom",function(){var dt=this,_t=arguments,ei=xe(dt,_t).event(vt),di=t.apply(dt,_t),yi=Fe==null?St(di):typeof Fe=="function"?Fe.apply(dt,_t):Fe,Ti=Math.max(di[1][0]-di[0][0],di[1][1]-di[0][1]),Vi=dt.__zoom,wi=typeof Ze=="function"?Ze.apply(dt,_t):Ze,mi=k(Vi.invert(yi).concat(Ti/Vi.k),wi.invert(yi).concat(Ti/wi.k));return function(Wt){if(Wt===1)Wt=wi;else{var Di=mi(Wt),$t=Ti/Di[2];Wt=new zc($t,yi[0]-Di[0]*$t,yi[1]-Di[1]*$t)}ei.zoom(null,Wt)}})}function xe(Me,Ze,Fe){return!Fe&&Me.__zooming||new Gt(Me,Ze)}function Gt(Me,Ze){this.that=Me,this.args=Ze,this.active=0,this.sourceEvent=null,this.extent=t.apply(Me,Ze),this.taps=0}Gt.prototype={event:function(Me){return Me&&(this.sourceEvent=Me),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(Me,Ze){return this.mouse&&Me!=="mouse"&&(this.mouse[1]=Ze.invert(this.mouse[0])),this.touch0&&Me!=="touch"&&(this.touch0[1]=Ze.invert(this.touch0[0])),this.touch1&&Me!=="touch"&&(this.touch1[1]=Ze.invert(this.touch1[0])),this.that.__zoom=Ze,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(Me){var Ze=ma(this.that).datum();O.call(Me,this.that,new DB(Me,{sourceEvent:this.sourceEvent,target:Qe,type:Me,transform:this.that.__zoom,dispatch:O}),Ze)}};function Ve(Me,...Ze){if(!e.apply(this,arguments))return;var Fe=xe(this,Ze).event(Me),vt=this.__zoom,dt=Math.max(h[0],Math.min(h[1],vt.k*Math.pow(2,r.apply(this,arguments)))),_t=Rc(Me);if(Fe.wheel)(Fe.mouse[0][0]!==_t[0]||Fe.mouse[0][1]!==_t[1])&&(Fe.mouse[1]=vt.invert(Fe.mouse[0]=_t)),clearTimeout(Fe.wheel);else{if(vt.k===dt)return;Fe.mouse=[_t,vt.invert(_t)],c0(this),Fe.start()}Ld(Me),Fe.wheel=setTimeout(ei,be),Fe.zoom("mouse",i(ct(We(vt,dt),Fe.mouse[0],Fe.mouse[1]),Fe.extent,v));function ei(){Fe.wheel=null,Fe.end()}}function Je(Me,...Ze){if(oe||!e.apply(this,arguments))return;var Fe=xe(this,Ze,!0).event(Me),vt=ma(Me.view).on("mousemove.zoom",yi,!0).on("mouseup.zoom",Ti,!0),dt=Rc(Me,_t),_t=Me.currentTarget,ei=Me.clientX,di=Me.clientY;p4(Me.view),t2(Me),Fe.mouse=[dt,this.__zoom.invert(dt)],c0(this),Fe.start();function yi(Vi){if(Ld(Vi),!Fe.moved){var wi=Vi.clientX-ei,mi=Vi.clientY-di;Fe.moved=wi*wi+mi*mi>qe}Fe.event(Vi).zoom("mouse",i(ct(Fe.that.__zoom,Fe.mouse[0]=Rc(Vi,_t),Fe.mouse[1]),Fe.extent,v))}function Ti(Vi){vt.on("mousemove.zoom mouseup.zoom",null),g4(Vi.view,Fe.moved),Ld(Vi),Fe.event(Vi).end()}}function et(Me,...Ze){if(e.apply(this,arguments)){var Fe=this.__zoom,vt=Rc(Me.changedTouches?Me.changedTouches[0]:Me,this),dt=Fe.invert(vt),_t=Fe.k*(Me.shiftKey?.5:2),ei=i(ct(We(Fe,_t),vt,dt),t.apply(this,Ze),v);Ld(Me),o>0?ma(this).transition().duration(o).call(yt,ei,vt,Me):ma(this).call(Qe.transform,ei,vt,Me)}}function lt(Me,...Ze){if(e.apply(this,arguments)){var Fe=Me.touches,vt=Fe.length,dt=xe(this,Ze,Me.changedTouches.length===vt).event(Me),_t,ei,di,yi;for(t2(Me),ei=0;ei<vt;++ei)di=Fe[ei],yi=Rc(di,this),yi=[yi,this.__zoom.invert(yi),di.identifier],dt.touch0?!dt.touch1&&dt.touch0[2]!==yi[2]&&(dt.touch1=yi,dt.taps=0):(dt.touch0=yi,_t=!0,dt.taps=1+!!j);j&&(j=clearTimeout(j)),_t&&(dt.taps<2&&(J=yi[0],j=setTimeout(function(){j=null},se)),c0(this),dt.start())}}function ut(Me,...Ze){if(this.__zooming){var Fe=xe(this,Ze).event(Me),vt=Me.changedTouches,dt=vt.length,_t,ei,di,yi;for(Ld(Me),_t=0;_t<dt;++_t)ei=vt[_t],di=Rc(ei,this),Fe.touch0&&Fe.touch0[2]===ei.identifier?Fe.touch0[0]=di:Fe.touch1&&Fe.touch1[2]===ei.identifier&&(Fe.touch1[0]=di);if(ei=Fe.that.__zoom,Fe.touch1){var Ti=Fe.touch0[0],Vi=Fe.touch0[1],wi=Fe.touch1[0],mi=Fe.touch1[1],Wt=(Wt=wi[0]-Ti[0])*Wt+(Wt=wi[1]-Ti[1])*Wt,Di=(Di=mi[0]-Vi[0])*Di+(Di=mi[1]-Vi[1])*Di;ei=We(ei,Math.sqrt(Wt/Di)),di=[(Ti[0]+wi[0])/2,(Ti[1]+wi[1])/2],yi=[(Vi[0]+mi[0])/2,(Vi[1]+mi[1])/2]}else if(Fe.touch0)di=Fe.touch0[0],yi=Fe.touch0[1];else return;Fe.zoom("touch",i(ct(ei,di,yi),Fe.extent,v))}}function Ke(Me,...Ze){if(this.__zooming){var Fe=xe(this,Ze).event(Me),vt=Me.changedTouches,dt=vt.length,_t,ei;for(t2(Me),oe&&clearTimeout(oe),oe=setTimeout(function(){oe=null},se),_t=0;_t<dt;++_t)ei=vt[_t],Fe.touch0&&Fe.touch0[2]===ei.identifier?delete Fe.touch0:Fe.touch1&&Fe.touch1[2]===ei.identifier&&delete Fe.touch1;if(Fe.touch1&&!Fe.touch0&&(Fe.touch0=Fe.touch1,delete Fe.touch1),Fe.touch0)Fe.touch0[1]=this.__zoom.invert(Fe.touch0[0]);else if(Fe.end(),Fe.taps===2&&(ei=Rc(ei,this),Math.hypot(J[0]-ei[0],J[1]-ei[1])<ke)){var di=ma(this).on("dblclick.zoom");di&&di.apply(this,arguments)}}}return Qe.wheelDelta=function(Me){return arguments.length?(r=typeof Me=="function"?Me:Kg(+Me),Qe):r},Qe.filter=function(Me){return arguments.length?(e=typeof Me=="function"?Me:Kg(!!Me),Qe):e},Qe.touchable=function(Me){return arguments.length?(c=typeof Me=="function"?Me:Kg(!!Me),Qe):c},Qe.extent=function(Me){return arguments.length?(t=typeof Me=="function"?Me:Kg([[+Me[0][0],+Me[0][1]],[+Me[1][0],+Me[1][1]]]),Qe):t},Qe.scaleExtent=function(Me){return arguments.length?(h[0]=+Me[0],h[1]=+Me[1],Qe):[h[0],h[1]]},Qe.translateExtent=function(Me){return arguments.length?(v[0][0]=+Me[0][0],v[1][0]=+Me[1][0],v[0][1]=+Me[0][1],v[1][1]=+Me[1][1],Qe):[[v[0][0],v[0][1]],[v[1][0],v[1][1]]]},Qe.constrain=function(Me){return arguments.length?(i=Me,Qe):i},Qe.duration=function(Me){return arguments.length?(o=+Me,Qe):o},Qe.interpolate=function(Me){return arguments.length?(k=Me,Qe):k},Qe.on=function(){var Me=O.on.apply(O,arguments);return Me===O?Qe:Me},Qe.clickDistance=function(Me){return arguments.length?(qe=(Me=+Me)*Me,Qe):Math.sqrt(qe)},Qe.tapDistance=function(Me){return arguments.length?(ke=+Me,Qe):ke},Qe}var Z4="1.13.6",Ux=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||Function("return this")()||{},o1=Array.prototype,ey=Object.prototype,Gx=typeof Symbol<"u"?Symbol.prototype:null,NB=o1.push,hp=o1.slice,tp=ey.toString,VB=ey.hasOwnProperty,j4=typeof ArrayBuffer<"u",UB=typeof DataView<"u",GB=Array.isArray,Hx=Object.keys,Qx=Object.create,qx=j4&&ArrayBuffer.isView,HB=isNaN,QB=isFinite,W4=!{toString:null}.propertyIsEnumerable("toString"),Zx=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],qB=Math.pow(2,53)-1;function kl(e,t){return t=t==null?e.length-1:+t,function(){for(var i=Math.max(arguments.length-t,0),r=Array(i),c=0;c<i;c++)r[c]=arguments[c+t];switch(t){case 0:return e.call(this,r);case 1:return e.call(this,arguments[0],r);case 2:return e.call(this,arguments[0],arguments[1],r)}var h=Array(t+1);for(c=0;c<t;c++)h[c]=arguments[c];return h[t]=r,e.apply(this,h)}}function mf(e){var t=typeof e;return t==="function"||t==="object"&&!!e}function ZB(e){return e===null}function hf(e){return e===void 0}function Y4(e){return e===!0||e===!1||tp.call(e)==="[object Boolean]"}function jB(e){return!!(e&&e.nodeType===1)}function NA(e){var t="[object "+e+"]";return function(i){return tp.call(i)===t}}const A1=NA("String"),X4=NA("Number"),WB=NA("Date"),YB=NA("RegExp"),XB=NA("Error"),K4=NA("Symbol"),J4=NA("ArrayBuffer");var $4=NA("Function"),KB=Ux.document&&Ux.document.childNodes;typeof/./!="function"&&typeof Int8Array!="object"&&typeof KB!="function"&&($4=function(e){return typeof e=="function"||!1});const zA=$4,e5=NA("Object");var t5=UB&&e5(new DataView(new ArrayBuffer(8))),ty=typeof Map<"u"&&e5(new Map),JB=NA("DataView");function $B(e){return e!=null&&zA(e.getInt8)&&J4(e.buffer)}const Um=t5?$B:JB,_f=GB||NA("Array");function _h(e,t){return e!=null&&VB.call(e,t)}var lv=NA("Arguments");(function(){lv(arguments)||(lv=function(e){return _h(e,"callee")})})();const iy=lv;function eR(e){return!K4(e)&&QB(e)&&!isNaN(parseFloat(e))}function i5(e){return X4(e)&&HB(e)}function n5(e){return function(){return e}}function r5(e){return function(t){var i=e(t);return typeof i=="number"&&i>=0&&i<=qB}}function s5(e){return function(t){return t==null?void 0:t[e]}}const Gm=s5("byteLength"),tR=r5(Gm);var iR=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;function nR(e){return qx?qx(e)&&!Um(e):tR(e)&&iR.test(tp.call(e))}const a5=j4?nR:n5(!1),Ml=s5("length");function rR(e){for(var t={},i=e.length,r=0;r<i;++r)t[e[r]]=!0;return{contains:function(c){return t[c]===!0},push:function(c){return t[c]=!0,e.push(c)}}}function o5(e,t){t=rR(t);var i=Zx.length,r=e.constructor,c=zA(r)&&r.prototype||ey,h="constructor";for(_h(e,h)&&!t.contains(h)&&t.push(h);i--;)h=Zx[i],h in e&&e[h]!==c[h]&&!t.contains(h)&&t.push(h)}function Ro(e){if(!mf(e))return[];if(Hx)return Hx(e);var t=[];for(var i in e)_h(e,i)&&t.push(i);return W4&&o5(e,t),t}function sR(e){if(e==null)return!0;var t=Ml(e);return typeof t=="number"&&(_f(e)||A1(e)||iy(e))?t===0:Ml(Ro(e))===0}function A5(e,t){var i=Ro(t),r=i.length;if(e==null)return!r;for(var c=Object(e),h=0;h<r;h++){var v=i[h];if(t[v]!==c[v]||!(v in c))return!1}return!0}function zs(e){if(e instanceof zs)return e;if(!(this instanceof zs))return new zs(e);this._wrapped=e}zs.VERSION=Z4;zs.prototype.value=function(){return this._wrapped};zs.prototype.valueOf=zs.prototype.toJSON=zs.prototype.value;zs.prototype.toString=function(){return String(this._wrapped)};function jx(e){return new Uint8Array(e.buffer||e,e.byteOffset||0,Gm(e))}var Wx="[object DataView]";function uv(e,t,i,r){if(e===t)return e!==0||1/e===1/t;if(e==null||t==null)return!1;if(e!==e)return t!==t;var c=typeof e;return c!=="function"&&c!=="object"&&typeof t!="object"?!1:l5(e,t,i,r)}function l5(e,t,i,r){e instanceof zs&&(e=e._wrapped),t instanceof zs&&(t=t._wrapped);var c=tp.call(e);if(c!==tp.call(t))return!1;if(t5&&c=="[object Object]"&&Um(e)){if(!Um(t))return!1;c=Wx}switch(c){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:+e==0?1/+e===1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return Gx.valueOf.call(e)===Gx.valueOf.call(t);case"[object ArrayBuffer]":case Wx:return l5(jx(e),jx(t),i,r)}var h=c==="[object Array]";if(!h&&a5(e)){var v=Gm(e);if(v!==Gm(t))return!1;if(e.buffer===t.buffer&&e.byteOffset===t.byteOffset)return!0;h=!0}if(!h){if(typeof e!="object"||typeof t!="object")return!1;var o=e.constructor,k=t.constructor;if(o!==k&&!(zA(o)&&o instanceof o&&zA(k)&&k instanceof k)&&"constructor"in e&&"constructor"in t)return!1}i=i||[],r=r||[];for(var O=i.length;O--;)if(i[O]===e)return r[O]===t;if(i.push(e),r.push(t),h){if(O=e.length,O!==t.length)return!1;for(;O--;)if(!uv(e[O],t[O],i,r))return!1}else{var j=Ro(e),J;if(O=j.length,Ro(t).length!==O)return!1;for(;O--;)if(J=j[O],!(_h(t,J)&&uv(e[J],t[J],i,r)))return!1}return i.pop(),r.pop(),!0}function aR(e,t){return uv(e,t)}function fp(e){if(!mf(e))return[];var t=[];for(var i in e)t.push(i);return W4&&o5(e,t),t}function ny(e){var t=Ml(e);return function(i){if(i==null)return!1;var r=fp(i);if(Ml(r))return!1;for(var c=0;c<t;c++)if(!zA(i[e[c]]))return!1;return e!==h5||!zA(i[ry])}}var ry="forEach",u5="has",sy=["clear","delete"],c5=["get",u5,"set"],oR=sy.concat(ry,c5),h5=sy.concat(c5),AR=["add"].concat(sy,ry,u5);const lR=ty?ny(oR):NA("Map"),uR=ty?ny(h5):NA("WeakMap"),cR=ty?ny(AR):NA("Set"),hR=NA("WeakSet");function vf(e){for(var t=Ro(e),i=t.length,r=Array(i),c=0;c<i;c++)r[c]=e[t[c]];return r}function fR(e){for(var t=Ro(e),i=t.length,r=Array(i),c=0;c<i;c++)r[c]=[t[c],e[t[c]]];return r}function f5(e){for(var t={},i=Ro(e),r=0,c=i.length;r<c;r++)t[e[i[r]]]=i[r];return t}function cv(e){var t=[];for(var i in e)zA(e[i])&&t.push(i);return t.sort()}function ay(e,t){return function(i){var r=arguments.length;if(t&&(i=Object(i)),r<2||i==null)return i;for(var c=1;c<r;c++)for(var h=arguments[c],v=e(h),o=v.length,k=0;k<o;k++){var O=v[k];(!t||i[O]===void 0)&&(i[O]=h[O])}return i}}const Uu=ay(fp),ip=ay(Ro),oy=ay(fp,!0);function dR(){return function(){}}function d5(e){if(!mf(e))return{};if(Qx)return Qx(e);var t=dR();t.prototype=e;var i=new t;return t.prototype=null,i}function pR(e,t){var i=d5(e);return t&&ip(i,t),i}function p5(e){return mf(e)?_f(e)?e.slice():Uu({},e):e}function gR(e,t){return t(e),e}function g5(e){return _f(e)?e:[e]}zs.toPath=g5;function dp(e){return zs.toPath(e)}function Ay(e,t){for(var i=t.length,r=0;r<i;r++){if(e==null)return;e=e[t[r]]}return i?e:void 0}function m5(e,t,i){var r=Ay(e,dp(t));return hf(r)?i:r}function l1(e,t){t=dp(t);for(var i=t.length,r=0;r<i;r++){var c=t[r];if(!_h(e,c))return!1;e=e[c]}return!!i}function ly(e){return e}function np(e){return e=ip({},e),function(t){return A5(t,e)}}function uy(e){return e=dp(e),function(t){return Ay(t,e)}}function pp(e,t,i){if(t===void 0)return e;switch(i??3){case 1:return function(r){return e.call(t,r)};case 3:return function(r,c,h){return e.call(t,r,c,h)};case 4:return function(r,c,h,v){return e.call(t,r,c,h,v)}}return function(){return e.apply(t,arguments)}}function _5(e,t,i){return e==null?ly:zA(e)?pp(e,t,i):mf(e)&&!_f(e)?np(e):uy(e)}function cy(e,t){return _5(e,t,1/0)}zs.iteratee=cy;function Bl(e,t,i){return zs.iteratee!==cy?zs.iteratee(e,t):_5(e,t,i)}function v5(e,t,i){t=Bl(t,i);for(var r=Ro(e),c=r.length,h={},v=0;v<c;v++){var o=r[v];h[o]=t(e[o],o,e)}return h}function y5(){}function mR(e){return e==null?y5:function(t){return m5(e,t)}}function _R(e,t,i){var r=Array(Math.max(0,e));t=pp(t,i,1);for(var c=0;c<e;c++)r[c]=t(c);return r}function hv(e,t){return t==null&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))}const rp=Date.now||function(){return new Date().getTime()};function b5(e){var t=function(h){return e[h]},i="(?:"+Ro(e).join("|")+")",r=RegExp(i),c=RegExp(i,"g");return function(h){return h=h==null?"":""+h,r.test(h)?h.replace(c,t):h}}const x5={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},vR=b5(x5),yR=f5(x5),bR=b5(yR),xR=zs.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var i2=/(.)^/,wR={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},SR=/\\|'|\r|\n|\u2028|\u2029/g;function CR(e){return"\\"+wR[e]}var ER=/^\s*(\w|\$)+\s*$/;function IR(e,t,i){!t&&i&&(t=i),t=oy({},t,zs.templateSettings);var r=RegExp([(t.escape||i2).source,(t.interpolate||i2).source,(t.evaluate||i2).source].join("|")+"|$","g"),c=0,h="__p+='";e.replace(r,function(O,j,J,oe,se){return h+=e.slice(c,se).replace(SR,CR),c=se+O.length,j?h+=`'+
((__t=(`+j+`))==null?'':_.escape(__t))+
'`:J?h+=`'+
((__t=(`+J+`))==null?'':__t)+
'`:oe&&(h+=`';
`+oe+`
__p+='`),O}),h+=`';
`;var v=t.variable;if(v){if(!ER.test(v))throw new Error("variable is not a bare identifier: "+v)}else h=`with(obj||{}){
`+h+`}
`,v="obj";h=`var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};
`+h+`return __p;
`;var o;try{o=new Function(v,"_",h)}catch(O){throw O.source=h,O}var k=function(O){return o.call(this,O,zs)};return k.source="function("+v+`){
`+h+"}",k}function TR(e,t,i){t=dp(t);var r=t.length;if(!r)return zA(i)?i.call(e):i;for(var c=0;c<r;c++){var h=e==null?void 0:e[t[c]];h===void 0&&(h=i,c=r),e=zA(h)?h.call(e):h}return e}var kR=0;function MR(e){var t=++kR+"";return e?e+t:t}function PR(e){var t=zs(e);return t._chain=!0,t}function w5(e,t,i,r,c){if(!(r instanceof t))return e.apply(i,c);var h=d5(e.prototype),v=e.apply(h,c);return mf(v)?v:h}var Ac=kl(function(e,t){var i=Ac.placeholder,r=function(){for(var c=0,h=t.length,v=Array(h),o=0;o<h;o++)v[o]=t[o]===i?arguments[c++]:t[o];for(;c<arguments.length;)v.push(arguments[c++]);return w5(e,r,this,this,v)};return r});Ac.placeholder=zs;const S5=kl(function(e,t,i){if(!zA(e))throw new TypeError("Bind must be called on a function");var r=kl(function(c){return w5(e,r,t,this,i.concat(c))});return r}),$l=r5(Ml);function yf(e,t,i,r){if(r=r||[],!t&&t!==0)t=1/0;else if(t<=0)return r.concat(e);for(var c=r.length,h=0,v=Ml(e);h<v;h++){var o=e[h];if($l(o)&&(_f(o)||iy(o)))if(t>1)yf(o,t-1,i,r),c=r.length;else for(var k=0,O=o.length;k<O;)r[c++]=o[k++];else i||(r[c++]=o)}return r}const DR=kl(function(e,t){t=yf(t,!1,!1);var i=t.length;if(i<1)throw new Error("bindAll must be passed function names");for(;i--;){var r=t[i];e[r]=S5(e[r],e)}return e});function LR(e,t){var i=function(r){var c=i.cache,h=""+(t?t.apply(this,arguments):r);return _h(c,h)||(c[h]=e.apply(this,arguments)),c[h]};return i.cache={},i}const C5=kl(function(e,t,i){return setTimeout(function(){return e.apply(null,i)},t)}),BR=Ac(C5,zs,1);function RR(e,t,i){var r,c,h,v,o=0;i||(i={});var k=function(){o=i.leading===!1?0:rp(),r=null,v=e.apply(c,h),r||(c=h=null)},O=function(){var j=rp();!o&&i.leading===!1&&(o=j);var J=t-(j-o);return c=this,h=arguments,J<=0||J>t?(r&&(clearTimeout(r),r=null),o=j,v=e.apply(c,h),r||(c=h=null)):!r&&i.trailing!==!1&&(r=setTimeout(k,J)),v};return O.cancel=function(){clearTimeout(r),o=0,r=c=h=null},O}function OR(e,t,i){var r,c,h,v,o,k=function(){var j=rp()-c;t>j?r=setTimeout(k,t-j):(r=null,i||(v=e.apply(o,h)),r||(h=o=null))},O=kl(function(j){return o=this,h=j,c=rp(),r||(r=setTimeout(k,t),i&&(v=e.apply(o,h))),v});return O.cancel=function(){clearTimeout(r),r=h=o=null},O}function zR(e,t){return Ac(t,e)}function hy(e){return function(){return!e.apply(this,arguments)}}function FR(){var e=arguments,t=e.length-1;return function(){for(var i=t,r=e[t].apply(this,arguments);i--;)r=e[i].call(this,r);return r}}function NR(e,t){return function(){if(--e<1)return t.apply(this,arguments)}}function E5(e,t){var i;return function(){return--e>0&&(i=t.apply(this,arguments)),e<=1&&(t=null),i}}const VR=Ac(E5,2);function I5(e,t,i){t=Bl(t,i);for(var r=Ro(e),c,h=0,v=r.length;h<v;h++)if(c=r[h],t(e[c],c,e))return c}function T5(e){return function(t,i,r){i=Bl(i,r);for(var c=Ml(t),h=e>0?0:c-1;h>=0&&h<c;h+=e)if(i(t[h],h,t))return h;return-1}}const fy=T5(1),k5=T5(-1);function M5(e,t,i,r){i=Bl(i,r,1);for(var c=i(t),h=0,v=Ml(e);h<v;){var o=Math.floor((h+v)/2);i(e[o])<c?h=o+1:v=o}return h}function P5(e,t,i){return function(r,c,h){var v=0,o=Ml(r);if(typeof h=="number")e>0?v=h>=0?h:Math.max(h+o,v):o=h>=0?Math.min(h+1,o):h+o+1;else if(i&&h&&o)return h=i(r,c),r[h]===c?h:-1;if(c!==c)return h=t(hp.call(r,v,o),i5),h>=0?h+v:-1;for(h=e>0?v:o-1;h>=0&&h<o;h+=e)if(r[h]===c)return h;return-1}}const D5=P5(1,fy,M5),UR=P5(-1,k5);function fv(e,t,i){var r=$l(e)?fy:I5,c=r(e,t,i);if(c!==void 0&&c!==-1)return e[c]}function GR(e,t){return fv(e,np(t))}function Pl(e,t,i){t=pp(t,i);var r,c;if($l(e))for(r=0,c=e.length;r<c;r++)t(e[r],r,e);else{var h=Ro(e);for(r=0,c=h.length;r<c;r++)t(e[h[r]],h[r],e)}return e}function tl(e,t,i){t=Bl(t,i);for(var r=!$l(e)&&Ro(e),c=(r||e).length,h=Array(c),v=0;v<c;v++){var o=r?r[v]:v;h[v]=t(e[o],o,e)}return h}function L5(e){var t=function(i,r,c,h){var v=!$l(i)&&Ro(i),o=(v||i).length,k=e>0?0:o-1;for(h||(c=i[v?v[k]:k],k+=e);k>=0&&k<o;k+=e){var O=v?v[k]:k;c=r(c,i[O],O,i)}return c};return function(i,r,c,h){var v=arguments.length>=3;return t(i,pp(r,h,4),c,v)}}const n2=L5(1),Yx=L5(-1);function Yl(e,t,i){var r=[];return t=Bl(t,i),Pl(e,function(c,h,v){t(c,h,v)&&r.push(c)}),r}function B5(e,t,i){return Yl(e,hy(Bl(t)),i)}function dv(e,t,i){t=Bl(t,i);for(var r=!$l(e)&&Ro(e),c=(r||e).length,h=0;h<c;h++){var v=r?r[h]:h;if(!t(e[v],v,e))return!1}return!0}function Hm(e,t,i){t=Bl(t,i);for(var r=!$l(e)&&Ro(e),c=(r||e).length,h=0;h<c;h++){var v=r?r[h]:h;if(t(e[v],v,e))return!0}return!1}function sc(e,t,i,r){return $l(e)||(e=vf(e)),(typeof i!="number"||r)&&(i=0),D5(e,t,i)>=0}const HR=kl(function(e,t,i){var r,c;return zA(t)?c=t:(t=dp(t),r=t.slice(0,-1),t=t[t.length-1]),tl(e,function(h){var v=c;if(!v){if(r&&r.length&&(h=Ay(h,r)),h==null)return;v=h[t]}return v==null?v:v.apply(h,i)})});function u1(e,t){return tl(e,uy(t))}function QR(e,t){return Yl(e,np(t))}function dy(e,t,i){var r=-1/0,c=-1/0,h,v;if(t==null||typeof t=="number"&&typeof e[0]!="object"&&e!=null){e=$l(e)?e:vf(e);for(var o=0,k=e.length;o<k;o++)h=e[o],h!=null&&h>r&&(r=h)}else t=Bl(t,i),Pl(e,function(O,j,J){v=t(O,j,J),(v>c||v===-1/0&&r===-1/0)&&(r=O,c=v)});return r}function R5(e,t,i){var r=1/0,c=1/0,h,v;if(t==null||typeof t=="number"&&typeof e[0]!="object"&&e!=null){e=$l(e)?e:vf(e);for(var o=0,k=e.length;o<k;o++)h=e[o],h!=null&&h<r&&(r=h)}else t=Bl(t,i),Pl(e,function(O,j,J){v=t(O,j,J),(v<c||v===1/0&&r===1/0)&&(r=O,c=v)});return r}var qR=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function O5(e){return e?_f(e)?hp.call(e):A1(e)?e.match(qR):$l(e)?tl(e,ly):vf(e):[]}function z5(e,t,i){if(t==null||i)return $l(e)||(e=vf(e)),e[hv(e.length-1)];var r=O5(e),c=Ml(r);t=Math.max(Math.min(t,c),0);for(var h=c-1,v=0;v<t;v++){var o=hv(v,h),k=r[v];r[v]=r[o],r[o]=k}return r.slice(0,t)}function ZR(e){return z5(e,1/0)}function F5(e,t,i){var r=0;return t=Bl(t,i),u1(tl(e,function(c,h,v){return{value:c,index:r++,criteria:t(c,h,v)}}).sort(function(c,h){var v=c.criteria,o=h.criteria;if(v!==o){if(v>o||v===void 0)return 1;if(v<o||o===void 0)return-1}return c.index-h.index}),"value")}function c1(e,t){return function(i,r,c){var h=t?[[],[]]:{};return r=Bl(r,c),Pl(i,function(v,o){var k=r(v,o,i);e(h,v,k)}),h}}const jR=c1(function(e,t,i){_h(e,i)?e[i].push(t):e[i]=[t]}),WR=c1(function(e,t,i){e[i]=t}),YR=c1(function(e,t,i){_h(e,i)?e[i]++:e[i]=1}),XR=c1(function(e,t,i){e[i?0:1].push(t)},!0);function KR(e){return e==null?0:$l(e)?e.length:Ro(e).length}function JR(e,t,i){return t in i}const py=kl(function(e,t){var i={},r=t[0];if(e==null)return i;zA(r)?(t.length>1&&(r=pp(r,t[1])),t=fp(e)):(r=JR,t=yf(t,!1,!1),e=Object(e));for(var c=0,h=t.length;c<h;c++){var v=t[c],o=e[v];r(o,v,e)&&(i[v]=o)}return i}),$R=kl(function(e,t){var i=t[0],r;return zA(i)?(i=hy(i),t.length>1&&(r=t[1])):(t=tl(yf(t,!1,!1),String),i=function(c,h){return!sc(t,h)}),py(e,i,r)});function N5(e,t,i){return hp.call(e,0,Math.max(0,e.length-(t==null||i?1:t)))}function r2(e,t,i){return e==null||e.length<1?t==null||i?void 0:[]:t==null||i?e[0]:N5(e,e.length-t)}function nf(e,t,i){return hp.call(e,t==null||i?1:t)}function eO(e,t,i){return e==null||e.length<1?t==null||i?void 0:[]:t==null||i?e[e.length-1]:nf(e,Math.max(0,e.length-t))}function V5(e){return Yl(e,Boolean)}function tO(e,t){return yf(e,t,!1)}const U5=kl(function(e,t){return t=yf(t,!0,!0),Yl(e,function(i){return!sc(t,i)})}),iO=kl(function(e,t){return U5(e,t)});function pv(e,t,i,r){Y4(t)||(r=i,i=t,t=!1),i!=null&&(i=Bl(i,r));for(var c=[],h=[],v=0,o=Ml(e);v<o;v++){var k=e[v],O=i?i(k,v,e):k;t&&!i?((!v||h!==O)&&c.push(k),h=O):i?sc(h,O)||(h.push(O),c.push(k)):sc(c,k)||c.push(k)}return c}const G5=kl(function(e){return pv(yf(e,!0,!0))});function H5(e){for(var t=[],i=arguments.length,r=0,c=Ml(e);r<c;r++){var h=e[r];if(!sc(t,h)){var v;for(v=1;v<i&&sc(arguments[v],h);v++);v===i&&t.push(h)}}return t}function gv(e){for(var t=e&&dy(e,Ml).length||0,i=Array(t),r=0;r<t;r++)i[r]=u1(e,r);return i}const nO=kl(gv);function um(e,t){for(var i={},r=0,c=Ml(e);r<c;r++)t?i[e[r]]=t[r]:i[e[r][0]]=e[r][1];return i}function rO(e,t,i){t==null&&(t=e||0,e=0),i||(i=t<e?-1:1);for(var r=Math.max(Math.ceil((t-e)/i),0),c=Array(r),h=0;h<r;h++,e+=i)c[h]=e;return c}function sO(e,t){if(t==null||t<1)return[];for(var i=[],r=0,c=e.length;r<c;)i.push(hp.call(e,r,r+=t));return i}function gy(e,t){return e._chain?zs(t).chain():t}function Q5(e){return Pl(cv(e),function(t){var i=zs[t]=e[t];zs.prototype[t]=function(){var r=[this._wrapped];return NB.apply(r,arguments),gy(this,i.apply(zs,r))}}),zs}Pl(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=o1[e];zs.prototype[e]=function(){var i=this._wrapped;return i!=null&&(t.apply(i,arguments),(e==="shift"||e==="splice")&&i.length===0&&delete i[0]),gy(this,i)}});Pl(["concat","join","slice"],function(e){var t=o1[e];zs.prototype[e]=function(){var i=this._wrapped;return i!=null&&(i=t.apply(i,arguments)),gy(this,i)}});const aO=Object.freeze(Object.defineProperty({__proto__:null,VERSION:Z4,after:NR,all:dv,allKeys:fp,any:Hm,assign:ip,before:E5,bind:S5,bindAll:DR,chain:PR,chunk:sO,clone:p5,collect:tl,compact:V5,compose:FR,constant:n5,contains:sc,countBy:YR,create:pR,debounce:OR,default:zs,defaults:oy,defer:BR,delay:C5,detect:fv,difference:U5,drop:nf,each:Pl,escape:vR,every:dv,extend:Uu,extendOwn:ip,filter:Yl,find:fv,findIndex:fy,findKey:I5,findLastIndex:k5,findWhere:GR,first:r2,flatten:tO,foldl:n2,foldr:Yx,forEach:Pl,functions:cv,get:m5,groupBy:jR,has:l1,head:r2,identity:ly,include:sc,includes:sc,indexBy:WR,indexOf:D5,initial:N5,inject:n2,intersection:H5,invert:f5,invoke:HR,isArguments:iy,isArray:_f,isArrayBuffer:J4,isBoolean:Y4,isDataView:Um,isDate:WB,isElement:jB,isEmpty:sR,isEqual:aR,isError:XB,isFinite:eR,isFunction:zA,isMap:lR,isMatch:A5,isNaN:i5,isNull:ZB,isNumber:X4,isObject:mf,isRegExp:YB,isSet:cR,isString:A1,isSymbol:K4,isTypedArray:a5,isUndefined:hf,isWeakMap:uR,isWeakSet:hR,iteratee:cy,keys:Ro,last:eO,lastIndexOf:UR,map:tl,mapObject:v5,matcher:np,matches:np,max:dy,memoize:LR,methods:cv,min:R5,mixin:Q5,negate:hy,noop:y5,now:rp,object:um,omit:$R,once:VR,pairs:fR,partial:Ac,partition:XR,pick:py,pluck:u1,property:uy,propertyOf:mR,random:hv,range:rO,reduce:n2,reduceRight:Yx,reject:B5,rest:nf,restArguments:kl,result:TR,sample:z5,select:Yl,shuffle:ZR,size:KR,some:Hm,sortBy:F5,sortedIndex:M5,tail:nf,take:r2,tap:gR,template:IR,templateSettings:xR,throttle:RR,times:_R,toArray:O5,toPath:g5,transpose:gv,unescape:bR,union:G5,uniq:pv,unique:pv,uniqueId:MR,unzip:gv,values:vf,where:QR,without:iO,wrap:zR,zip:nO},Symbol.toStringTag,{value:"Module"}));var Xx=Q5(aO);Xx._=Xx;var oO=function(e,t){var i;return parseString(e,function(r,c){i=c["nex:nexml"].trees[0].tree.map(function(h){var v=h.node.map(J=>J.$),o=v.reduce(function(J,oe){return oe.edges=[],oe.name=oe.id,J[oe.id]=oe,J},{}),k=v.filter(J=>J.root),O=k>0?k[0].id:v[0].id;o[O].name="root",h.edge.map(J=>J.$).forEach(function(J){o[J.source].edges.push(J)});function j(J,oe){if(J.edges){var se=u1(J.edges,"target");J.children=vf(py(o,se)),J.children.forEach(function(be,qe){be.attribute=J.edges[qe].length||""}),J.children.forEach(j),J.annotation=""}}return j(o[O]),o[O]})}),i};function AO(e,t,i,r){let c=this.nodes.descendants();if(e.parent&&c.indexOf(e)>=0){let v=e.parent.children.indexOf(e),o={name:i,parent:e.parent,attribute:r?r[2]:null,original_child_order:e.original_child_order},k={name:t,parent:o,attribute:r?r[1]:null,original_child_order:2};o.children=[e,k],e.parent.children[v]=o,e.parent=o,e.attribute=r?r[0]:null,e.original_child_order=1}return this}function lO(e,t){return e.children?e.children.push(t):e.children=[t],e}function uO(e,t){return{data:{name:e,attribute:t?t[1]:null},parent:""}}function cO(e){let t=this.nodes.descendants();if(typeof e!="number")return this.deleteANode(t.indexOf(e));if(e>0&&e<t.length){let i=t[e];if(i.parent){let r=i.parent.children.indexOf(i);r>=0&&(t.splice(e,1),i.children&&i.children.forEach(function(c){c.original_child_order=i.parent.children.length,i.parent.children.push(c),c.parent=i.parent}),i.parent.children.length>2?i.parent.children.splice(r,1):i.parent.parent?(i.parent.parent.children[i.parent.parent.children.indexOf(i.parent)]=i.parent.children[1-r],i.parent.children[1-r].parent=i.parent.parent,t.splice(t.indexOf(i.parent),1)):(t.splice(0,1),t.parent=null,delete t.data.attribute,delete t.data.annotation,delete t.data.original_child_order,t.name="root",t.data.name="root"))}}return this}function hO(){return Yl(this.nodes.descendants(),e=>!l1(e,"children"))}function fO(){return Yl(this.nodes.descendants(),e=>l1(e,"children"))}function dO(){return this.nodes}function pO(){return this.nodes}function gO(e){return Yl(this.nodes.descendants(),t=>t.data.name==e)[0]}function mO(e){Pl(this.nodes.descendants(),function(t){t.data&&t.data.name in e&&(t.annotations=e[t.data.name])})}function ka(e){return!l1(e,"children")}function _O(e,t){return this.nodes.each(function(i){e in i&&(t&&(i[t]=i[e]),delete i[e])}),this}function vO(e){e||this.nodes.each(t=>{ka(t)||(t[this.selection_attribute_name]=!1,t.data.traits||(t.data.traits={}),t.data.traits[this.selection_attribute_name]=t[this.selection_attribute_name])})}function q5(e,t,i){let r=[];function c(h){ka(h)?t&&h!=e&&r.push(h):(i&&h!=e&&r.push(h),h.children.forEach(c))}return c(e),r}const yO=Object.freeze(Object.defineProperty({__proto__:null,addChild:lO,assignAttributes:mO,clearInternalNodes:vO,createNode:uO,deleteANode:cO,getInternals:fO,getNodeByName:gO,getNodes:pO,getRootNode:dO,getTips:hO,graftANode:AO,isLeafNode:ka,selectAllDescendants:q5,updateKeyName:_O},Symbol.toStringTag,{value:"Module"}));function sp(e,t={}){const i=/^-?\d+(\.\d+)?$/;let r=t.left_delimiter||"{",c=t.right_delimiter||"}",h=[];function v(){let ct={name:null},St=h[h.length-1];"children"in St||(St.children=[]),h.push(ct),St.children.push(h[h.length-1]),h[h.length-1].original_child_order=St.children.length}function o(){let ct=h.pop();ct.name=j,"children"in ct?ct.bootstrap_values=j:ct.name=j,ct.attribute=J,r=="["&&oe.includes("&&NHX")?oe.split(":").slice(1).forEach(St=>{const[yt,xe]=St.split("=");ct[yt]=i.test(xe)?+xe:xe}):ct.annotation=oe,j="",J="",oe=""}function k(ct){return{json:null,error:"Unexpected '"+e[ct]+"' in '"+e.substring(ct-20,ct+1)+"[ERROR HERE]"+e.substring(ct+1,ct+20)+"'"}}let O=0,j="",J="",oe="",se=null,be={"'":1,'"':1},qe={name:"root"};h.push(qe);for(var ke=/\s/,Qe=0;Qe<e.length;Qe++)try{var We=e[Qe];switch(O){case 0:{We=="("&&(v(),O=1);break}case 1:case 3:{if(We==":")O=3;else if(We==","||We==")")try{o(),O=1,We==","&&v()}catch{return k(Qe)}else if(We=="("){if(j.length>0)return k(Qe);v()}else if(We in be){if(O==1&&j.length===0&&J.length===0&&oe.length===0){O=2,se=We;continue}return k(Qe)}else if(We==r){if(oe.length)return k(Qe);O=4}else if(O==3)J+=We;else{if(ke.test(We))continue;if(We==";"){Qe=e.length;break}j+=We}break}case 2:{if(We==se){if(Qe<e.length-1&&e[Qe+1]==se){Qe++,j+=se;continue}se=0,O=1;continue}else j+=We;break}case 4:{if(We==c)O=3;else{if(We==r)return k(Qe);oe+=We}break}}}catch{return k(Qe)}return h.length!=1?k(e.length-1):{json:qe,error:null}}function bO(e,t){let i=this;e||(e=h=>"");function r(h){if(h.notshown)return;if(ka(h)||(c.push("("),h.children.forEach(function(o,k){k&&c.push(","),r(o)}),c.push(")")),h.data.name!=="root"){const o=h.data.name.replaceAll("'","''");/\W/.test(o)?c.push("'"+o+"'"):c.push(o)}c.push(e(h));let v=i.branch_length_accessor(h);v!==void 0&&c.push(":"+v)}let c=[];return e=e||"",r(t||this.nodes),c.join("")+";"}function xO(e){let t=e,i=t.toUpperCase().indexOf("BEGIN DATA;"),r=t.slice(i);if(r.length<2)return"";i=r.toUpperCase().indexOf("END;");let c=r.slice(0,i);r=tl(c.split(";"),k=>k.trim());let h=Yl(r,k=>k.toUpperCase().startsWith("DIMENSION"));h=h[0].split(" "),h=um(tl(nf(h),k=>k.split("=")));let v=Yl(r,k=>k.toUpperCase().startsWith("FORMAT"));v=v[0].split(" "),v=um(tl(nf(v),k=>k.split("="))),v.symbols=B5(v.symbols.split(""),k=>k=='"');let o=Yl(r,k=>k.toUpperCase().startsWith("MATRIX"));return o=o[0].split(`
`),o=um(tl(nf(o),k=>V5(k.split(" ")))),o=v5(o,(k,O)=>k=="?"?v.symbols:Array(k)),{dimensions:h,format:v,matrix:o}}function wO(e,t,i){Pl(e.getTips(),r=>{r.data.test=i.matrix[r.data.name]})}function Z5(e){let t=e,i=t.toUpperCase().indexOf("BEGIN TREES;"),r=t.slice(i);if(r.length<2)return"";i=r.toUpperCase().indexOf("END;");let h=r.slice(0,i).split(`
`);return h=Yl(h,v=>v.trim().toUpperCase().startsWith("TREE")),sp(h[0])}const SO=Object.freeze(Object.defineProperty({__proto__:null,default:Z5,loadAnnotations:wO,parseAnnotations:xO},Symbol.toStringTag,{value:"Module"}));function mv(e){var t={};if(e.nodeType==1){if(e.attributes.length>0){t["@attributes"]={};for(var i=0;i<e.attributes.length;i++){var r=e.attributes.item(i);t["@attributes"][r.nodeName]=r.nodeValue}}}else e.nodeType==3&&(t=e.nodeValue);if(e.hasChildNodes()&&e.childNodes.length===1&&e.childNodes[0].nodeType===3)t=e.childNodes[0].nodeValue;else if(e.hasChildNodes())for(var c=0;c<e.childNodes.length;c++){var h=e.childNodes.item(c),v=h.nodeName;if(typeof t[v]>"u")t[v]=mv(h);else{if(typeof t[v].push>"u"){var o=t[v];t[v]=[],t[v].push(o)}t[v].push(mv(h))}}return t}var j5=function(e,t){function i(c,h){c.clade&&(c.clade.forEach(i),c.children=c.clade,delete c.clade),c.annotation=1,c.attribute="0.01",c.branch_length&&(c.attribute=c.branch_length),c.taxonomy&&(c.name=c.taxonomy.scientific_name),c.annotation=""}var r;return e=mv(e),r=e.phyloxml.phylogeny.clade,r.name="root",i(r),{json:r,error:null}};function CO(e,t){t.left_delimiter="[",t.right_delimiter="]";const i=sp(e,t);function r(c){if(c.annotation){c.beast={};const v=c.annotation.split(/=|,|{|}/).filter(o=>o);for(var h=0;h<v.length;h+=2){let o=v[h].replace(/&|%/g,"");/[a-df-zA-DF-Z]+/.test(v[h+2])?c.beast[o]=+v[h+1]:(c.beast[o]=[+v[h+1],+v[h+2]],h++)}}c.annotation=void 0,c.children&&c.children.forEach(r)}return r(i.json),i}var s2={nexml:oO,phyloxml:j5,nexus:Z5,nwk:sp,nhx:sp,beast:CO};function EO(){let t=this.getTips(),i=tl(t,r=>({name:r.data.name,length:parseFloat(r.data.attribute)}));return i=F5(i,r=>-r.length),i}function IO(e,t){function i(c,h){if(h.mp=[[0,0],[!1,!1]],ka(h))h.mp[1][0]=h.mp[1][1]=h[c]||!1,h.mp[0][0]=h.mp[1][0]?1:0,h.mp[0][1]=1-h.mp[0][0];else{h.children.forEach(r);var v=h.children.reduce(function(k,O){return O.mp[0][0]+k},0),o=h.children.reduce(function(k,O){return O.mp[0][1]+k},0);h[c]?(h.mp[0][0]=o+1,h.mp[1][0]=!0,h.mp[0][1]=o,h.mp[1][1]=!0):(v<o+1?(h.mp[0][0]=v,h.mp[1][0]=!1):(h.mp[0][0]=o+1,h.mp[1][0]=!0),o<v+1?(h.mp[0][1]=o,h.mp[1][1]=!0):(h.mp[0][1]=v+1,h.mp[1][1]=!1))}}const r=Ac(i,t);r(this.nodes),this.nodes.each(c=>{c.parent?c.mp=c.mp[1][c.parent.mp?1:0]:c.mp=c.mp[1][c.mp[0][0]<c.mp[0][1]?0:1]}),this.display.modifySelection((c,h)=>ka(c.target)?c.target[t]:c.target.mp)}var Qm={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */Qm.exports;(function(e,t){(function(){var i,r="4.17.21",c=200,h="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",v="Expected a function",o="Invalid `variable` option passed into `_.template`",k="__lodash_hash_undefined__",O=500,j="__lodash_placeholder__",J=1,oe=2,se=4,be=1,qe=2,ke=1,Qe=2,We=4,ct=8,St=16,yt=32,xe=64,Gt=128,Ve=256,Je=512,et=30,lt="...",ut=800,Ke=16,Me=1,Ze=2,Fe=3,vt=1/0,dt=9007199254740991,_t=17976931348623157e292,ei=NaN,di=4294967295,yi=di-1,Ti=di>>>1,Vi=[["ary",Gt],["bind",ke],["bindKey",Qe],["curry",ct],["curryRight",St],["flip",Je],["partial",yt],["partialRight",xe],["rearg",Ve]],wi="[object Arguments]",mi="[object Array]",Wt="[object AsyncFunction]",Di="[object Boolean]",$t="[object Date]",Lt="[object DOMException]",ni="[object Error]",si="[object Function]",Oi="[object GeneratorFunction]",zi="[object Map]",oi="[object Number]",$i="[object Null]",ki="[object Object]",sn="[object Promise]",ar="[object Proxy]",ti="[object RegExp]",Wi="[object Set]",ir="[object String]",gn="[object Symbol]",kn="[object Undefined]",an="[object WeakMap]",d="[object WeakSet]",y="[object ArrayBuffer]",D="[object DataView]",U="[object Float32Array]",Q="[object Float64Array]",K="[object Int8Array]",ie="[object Int16Array]",Ae="[object Int32Array]",fe="[object Uint8Array]",ye="[object Uint8ClampedArray]",Le="[object Uint16Array]",we="[object Uint32Array]",Te=/\b__p \+= '';/g,Ce=/\b(__p \+=) '' \+/g,je=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ne=/&(?:amp|lt|gt|quot|#39);/g,Ue=/[&<>"']/g,de=RegExp(Ne.source),ue=RegExp(Ue.source),Y=/<%-([\s\S]+?)%>/g,ne=/<%([\s\S]+?)%>/g,he=/<%=([\s\S]+?)%>/g,me=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,pe=/^\w*$/,Oe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ze=/[\\^$.*+?()[\]{}|]/g,Be=RegExp(ze.source),Ye=/^\s+/,Xe=/\s/,ge=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ee=/\{\n\/\* \[wrapped with (.+)\] \*/,tt=/,? & /,pt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,n=/[()=,{}\[\]\/\s]/,ce=/\\(\\)?/g,Zt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Jt=/\w*$/,ui=/^[-+]0x[0-9a-f]+$/i,Vt=/^0b[01]+$/i,qt=/^\[object .+?Constructor\]$/,Ei=/^0o[0-7]+$/i,Ai=/^(?:0|[1-9]\d*)$/,pi=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Rt=/($^)/,Yi=/['\n\r\u2028\u2029\\]/g,Rn="\\ud800-\\udfff",wn="\\u0300-\\u036f",pn="\\ufe20-\\ufe2f",vr="\\u20d0-\\u20ff",Mi=wn+pn+vr,nr="\\u2700-\\u27bf",fn="a-z\\xdf-\\xf6\\xf8-\\xff",Pt="\\xac\\xb1\\xd7\\xf7",Fi="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",xt="\\u2000-\\u206f",nn=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Cr="A-Z\\xc0-\\xd6\\xd8-\\xde",ys="\\ufe0e\\ufe0f",Gr=Pt+Fi+xt+nn,Et="['’]",Hn="["+Rn+"]",ft="["+Gr+"]",gr="["+Mi+"]",Xs="\\d+",Ks="["+nr+"]",po="["+fn+"]",va="[^"+Rn+Gr+Xs+nr+fn+Cr+"]",$o="\\ud83c[\\udffb-\\udfff]",go="(?:"+gr+"|"+$o+")",Is="[^"+Rn+"]",bn="(?:\\ud83c[\\udde6-\\uddff]){2}",bs="[\\ud800-\\udbff][\\udc00-\\udfff]",Or="["+Cr+"]",ya="\\u200d",$a="(?:"+po+"|"+va+")",mo="(?:"+Or+"|"+va+")",ra="(?:"+Et+"(?:d|ll|m|re|s|t|ve))?",sa="(?:"+Et+"(?:D|LL|M|RE|S|T|VE))?",P=go+"?",re="["+ys+"]?",Re="(?:"+ya+"(?:"+[Is,bn,bs].join("|")+")"+re+P+")*",at="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",kt="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",ri=re+P+Re,_i="(?:"+[Ks,bn,bs].join("|")+")"+ri,Qi="(?:"+[Is+gr+"?",gr,bn,bs,Hn].join("|")+")",Xi=RegExp(Et,"g"),Nn=RegExp(gr,"g"),qn=RegExp($o+"(?="+$o+")|"+Qi+ri,"g"),yr=RegExp([Or+"?"+po+"+"+ra+"(?="+[ft,Or,"$"].join("|")+")",mo+"+"+sa+"(?="+[ft,Or+$a,"$"].join("|")+")",Or+"?"+$a+"+"+ra,Or+"+"+sa,kt,at,Xs,_i].join("|"),"g"),Ma=RegExp("["+ya+Rn+Mi+ys+"]"),Pa=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Da=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],_o=-1,or={};or[U]=or[Q]=or[K]=or[ie]=or[Ae]=or[fe]=or[ye]=or[Le]=or[we]=!0,or[wi]=or[mi]=or[y]=or[Di]=or[D]=or[$t]=or[ni]=or[si]=or[zi]=or[oi]=or[ki]=or[ti]=or[Wi]=or[ir]=or[an]=!1;var Ln={};Ln[wi]=Ln[mi]=Ln[y]=Ln[D]=Ln[Di]=Ln[$t]=Ln[U]=Ln[Q]=Ln[K]=Ln[ie]=Ln[Ae]=Ln[zi]=Ln[oi]=Ln[ki]=Ln[ti]=Ln[Wi]=Ln[ir]=Ln[gn]=Ln[fe]=Ln[ye]=Ln[Le]=Ln[we]=!0,Ln[ni]=Ln[si]=Ln[an]=!1;var jn={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},Er={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},xs={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Pr={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},eA=parseFloat,EA=parseInt,eo=typeof fh=="object"&&fh&&fh.Object===Object&&fh,Oo=typeof self=="object"&&self&&self.Object===Object&&self,ls=eo||Oo||Function("return this")(),fA=t&&!t.nodeType&&t,Ga=fA&&!0&&e&&!e.nodeType&&e,vo=Ga&&Ga.exports===fA,Ns=vo&&eo.process,Ts=function(){try{var Xt=Ga&&Ga.require&&Ga.require("util").types;return Xt||Ns&&Ns.binding&&Ns.binding("util")}catch{}}(),tA=Ts&&Ts.isArrayBuffer,aa=Ts&&Ts.isDate,La=Ts&&Ts.isMap,yo=Ts&&Ts.isRegExp,zo=Ts&&Ts.isSet,VA=Ts&&Ts.isTypedArray;function Dr(Xt,Si,gi){switch(gi.length){case 0:return Xt.call(Si);case 1:return Xt.call(Si,gi[0]);case 2:return Xt.call(Si,gi[0],gi[1]);case 3:return Xt.call(Si,gi[0],gi[1],gi[2])}return Xt.apply(Si,gi)}function gu(Xt,Si,gi,mt){for(var Bt=-1,ii=Xt==null?0:Xt.length;++Bt<ii;){var Ci=Xt[Bt];Si(mt,Ci,gi(Ci),Xt)}return mt}function oa(Xt,Si){for(var gi=-1,mt=Xt==null?0:Xt.length;++gi<mt&&Si(Xt[gi],gi,Xt)!==!1;);return Xt}function ba(Xt,Si){for(var gi=Xt==null?0:Xt.length;gi--&&Si(Xt[gi],gi,Xt)!==!1;);return Xt}function ll(Xt,Si){for(var gi=-1,mt=Xt==null?0:Xt.length;++gi<mt;)if(!Si(Xt[gi],gi,Xt))return!1;return!0}function to(Xt,Si){for(var gi=-1,mt=Xt==null?0:Xt.length,Bt=0,ii=[];++gi<mt;){var Ci=Xt[gi];Si(Ci,gi,Xt)&&(ii[Bt++]=Ci)}return ii}function bo(Xt,Si){var gi=Xt==null?0:Xt.length;return!!gi&&No(Xt,Si,0)>-1}function Fo(Xt,Si,gi){for(var mt=-1,Bt=Xt==null?0:Xt.length;++mt<Bt;)if(gi(Si,Xt[mt]))return!0;return!1}function us(Xt,Si){for(var gi=-1,mt=Xt==null?0:Xt.length,Bt=Array(mt);++gi<mt;)Bt[gi]=Si(Xt[gi],gi,Xt);return Bt}function io(Xt,Si){for(var gi=-1,mt=Si.length,Bt=Xt.length;++gi<mt;)Xt[Bt+gi]=Si[gi];return Xt}function xo(Xt,Si,gi,mt){var Bt=-1,ii=Xt==null?0:Xt.length;for(mt&&ii&&(gi=Xt[++Bt]);++Bt<ii;)gi=Si(gi,Xt[Bt],Bt,Xt);return gi}function IA(Xt,Si,gi,mt){var Bt=Xt==null?0:Xt.length;for(mt&&Bt&&(gi=Xt[--Bt]);Bt--;)gi=Si(gi,Xt[Bt],Bt,Xt);return gi}function Hs(Xt,Si){for(var gi=-1,mt=Xt==null?0:Xt.length;++gi<mt;)if(Si(Xt[gi],gi,Xt))return!0;return!1}var Ha=Qr("length");function gs(Xt){return Xt.split("")}function ul(Xt){return Xt.match(pt)||[]}function Kn(Xt,Si,gi){var mt;return gi(Xt,function(Bt,ii,Ci){if(Si(Bt,ii,Ci))return mt=ii,!1}),mt}function Xr(Xt,Si,gi,mt){for(var Bt=Xt.length,ii=gi+(mt?1:-1);mt?ii--:++ii<Bt;)if(Si(Xt[ii],ii,Xt))return ii;return-1}function No(Xt,Si,gi){return Si===Si?zr(Xt,Si,gi):Xr(Xt,Aa,gi)}function rr(Xt,Si,gi,mt){for(var Bt=gi-1,ii=Xt.length;++Bt<ii;)if(mt(Xt[Bt],Si))return Bt;return-1}function Aa(Xt){return Xt!==Xt}function Hr(Xt,Si){var gi=Xt==null?0:Xt.length;return gi?Vo(Xt,Si)/gi:ei}function Qr(Xt){return function(Si){return Si==null?i:Si[Xt]}}function xa(Xt){return function(Si){return Xt==null?i:Xt[Si]}}function mr(Xt,Si,gi,mt,Bt){return Bt(Xt,function(ii,Ci,ln){gi=mt?(mt=!1,ii):Si(gi,ii,Ci,ln)}),gi}function TA(Xt,Si){var gi=Xt.length;for(Xt.sort(Si);gi--;)Xt[gi]=Xt[gi].value;return Xt}function Vo(Xt,Si){for(var gi,mt=-1,Bt=Xt.length;++mt<Bt;){var ii=Si(Xt[mt]);ii!==i&&(gi=gi===i?ii:gi+ii)}return gi}function Uo(Xt,Si){for(var gi=-1,mt=Array(Xt);++gi<Xt;)mt[gi]=Si(gi);return mt}function ws(Xt,Si){return us(Si,function(gi){return[gi,Xt[gi]]})}function Ar(Xt){return Xt&&Xt.slice(0,qs(Xt)+1).replace(Ye,"")}function On(Xt){return function(Si){return Xt(Si)}}function wo(Xt,Si){return us(Si,function(gi){return Xt[gi]})}function Lr(Xt,Si){return Xt.has(Si)}function no(Xt,Si){for(var gi=-1,mt=Xt.length;++gi<mt&&No(Si,Xt[gi],0)>-1;);return gi}function iA(Xt,Si){for(var gi=Xt.length;gi--&&No(Si,Xt[gi],0)>-1;);return gi}function _r(Xt,Si){for(var gi=Xt.length,mt=0;gi--;)Xt[gi]===Si&&++mt;return mt}var Kr=xa(jn),Qs=xa(Er);function kA(Xt){return"\\"+Pr[Xt]}function ro(Xt,Si){return Xt==null?i:Xt[Si]}function dA(Xt){return Ma.test(Xt)}function wa(Xt){return Pa.test(Xt)}function Ss(Xt){for(var Si,gi=[];!(Si=Xt.next()).done;)gi.push(Si.value);return gi}function ms(Xt){var Si=-1,gi=Array(Xt.size);return Xt.forEach(function(mt,Bt){gi[++Si]=[Bt,mt]}),gi}function ha(Xt,Si){return function(gi){return Xt(Si(gi))}}function Qa(Xt,Si){for(var gi=-1,mt=Xt.length,Bt=0,ii=[];++gi<mt;){var Ci=Xt[gi];(Ci===Si||Ci===j)&&(Xt[gi]=j,ii[Bt++]=gi)}return ii}function br(Xt){var Si=-1,gi=Array(Xt.size);return Xt.forEach(function(mt){gi[++Si]=mt}),gi}function is(Xt){var Si=-1,gi=Array(Xt.size);return Xt.forEach(function(mt){gi[++Si]=[mt,mt]}),gi}function zr(Xt,Si,gi){for(var mt=gi-1,Bt=Xt.length;++mt<Bt;)if(Xt[mt]===Si)return mt;return-1}function pA(Xt,Si,gi){for(var mt=gi+1;mt--;)if(Xt[mt]===Si)return mt;return mt}function Ba(Xt){return dA(Xt)?So(Xt):Ha(Xt)}function Bs(Xt){return dA(Xt)?MA(Xt):gs(Xt)}function qs(Xt){for(var Si=Xt.length;Si--&&Xe.test(Xt.charAt(Si)););return Si}var so=xa(xs);function So(Xt){for(var Si=qn.lastIndex=0;qn.test(Xt);)++Si;return Si}function MA(Xt){return Xt.match(qn)||[]}function Rl(Xt){return Xt.match(yr)||[]}var nA=function Xt(Si){Si=Si==null?ls:Sa.defaults(ls.Object(),Si,Sa.pick(ls,Da));var gi=Si.Array,mt=Si.Date,Bt=Si.Error,ii=Si.Function,Ci=Si.Math,ln=Si.Object,Pn=Si.RegExp,Qn=Si.String,Bn=Si.TypeError,cs=gi.prototype,Zs=ii.prototype,Js=ln.prototype,fa=Si["__core-js_shared__"],cl=Zs.toString,jr=Js.hasOwnProperty,Hu=0,Ol=function(){var w=/[^.]+$/.exec(fa&&fa.keys&&fa.keys.IE_PROTO||"");return w?"Symbol(src)_1."+w:""}(),ao=Js.toString,rA=cl.call(ln),un=ls._,Co=Pn("^"+cl.call(jr).replace(ze,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Eo=vo?Si.Buffer:i,oo=Si.Symbol,zl=Si.Uint8Array,rn=Eo?Eo.allocUnsafe:i,hl=ha(ln.getPrototypeOf,ln),eu=ln.create,gA=Js.propertyIsEnumerable,UA=cs.splice,tu=oo?oo.isConcatSpreadable:i,GA=oo?oo.iterator:i,mA=oo?oo.toStringTag:i,ks=function(){try{var w=yc(ln,"defineProperty");return w({},"",{}),w}catch{}}(),mu=Si.clearTimeout!==ls.clearTimeout&&Si.clearTimeout,_u=mt&&mt.now!==ls.Date.now&&mt.now,vu=Si.setTimeout!==ls.setTimeout&&Si.setTimeout,HA=Ci.ceil,la=Ci.floor,Go=ln.getOwnPropertySymbols,fl=Eo?Eo.isBuffer:i,iu=Si.isFinite,dl=cs.join,nu=ha(ln.keys,ln),lr=Ci.max,ns=Ci.min,Jr=mt.now,da=Si.parseInt,zn=Ci.random,Io=cs.reverse,ru=yc(Si,"DataView"),sA=yc(Si,"Map"),Fl=yc(Si,"Promise"),Vs=yc(Si,"Set"),Ca=yc(Si,"WeakMap"),ci=yc(ln,"create"),Ii=Ca&&new Ca,Ho={},pl=Tu(ru),gl=Tu(sA),Wr=Tu(Fl),Qo=Tu(Vs),rs=Tu(Ca),_=oo?oo.prototype:i,S=_?_.valueOf:i,C=_?_.toString:i;function E(w){if(Dt(w)&&!u(w)&&!(w instanceof ae)){if(w instanceof Z)return w;if(jr.call(w,"__wrapped__"))return J0(w)}return new Z(w)}var H=function(){function w(){}return function(B){if(!Tt(B))return{};if(eu)return eu(B);w.prototype=B;var $=new w;return w.prototype=i,$}}();function W(){}function Z(w,B){this.__wrapped__=w,this.__actions__=[],this.__chain__=!!B,this.__index__=0,this.__values__=i}E.templateSettings={escape:Y,evaluate:ne,interpolate:he,variable:"",imports:{_:E}},E.prototype=W.prototype,E.prototype.constructor=E,Z.prototype=H(W.prototype),Z.prototype.constructor=Z;function ae(w){this.__wrapped__=w,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=di,this.__views__=[]}function Ie(){var w=new ae(this.__wrapped__);return w.__actions__=AA(this.__actions__),w.__dir__=this.__dir__,w.__filtered__=this.__filtered__,w.__iteratees__=AA(this.__iteratees__),w.__takeCount__=this.__takeCount__,w.__views__=AA(this.__views__),w}function $e(){if(this.__filtered__){var w=new ae(this);w.__dir__=-1,w.__filtered__=!0}else w=this.clone(),w.__dir__*=-1;return w}function ot(){var w=this.__wrapped__.value(),B=this.__dir__,$=u(w),Se=B<0,rt=$?w.length:0,bt=O1(0,rt,this.__views__),Ht=bt.start,jt=bt.end,ai=jt-Ht,Ni=Se?jt:Ht-1,Ui=this.__iteratees__,qi=Ui.length,Sn=0,Un=ns(ai,this.__takeCount__);if(!$||!Se&&rt==ai&&Un==ai)return D0(w,this.__actions__);var er=[];e:for(;ai--&&Sn<Un;){Ni+=B;for(var Zr=-1,tr=w[Ni];++Zr<qi;){var es=Ui[Zr],hs=es.iteratee,Ql=es.type,$A=hs(tr);if(Ql==Ze)tr=$A;else if(!$A){if(Ql==Me)continue e;break e}}er[Sn++]=tr}return er}ae.prototype=H(W.prototype),ae.prototype.constructor=ae;function Nt(w){var B=-1,$=w==null?0:w.length;for(this.clear();++B<$;){var Se=w[B];this.set(Se[0],Se[1])}}function wt(){this.__data__=ci?ci(null):{},this.size=0}function It(w){var B=this.has(w)&&delete this.__data__[w];return this.size-=B?1:0,B}function R(w){var B=this.__data__;if(ci){var $=B[w];return $===k?i:$}return jr.call(B,w)?B[w]:i}function s(w){var B=this.__data__;return ci?B[w]!==i:jr.call(B,w)}function g(w,B){var $=this.__data__;return this.size+=this.has(w)?0:1,$[w]=ci&&B===i?k:B,this}Nt.prototype.clear=wt,Nt.prototype.delete=It,Nt.prototype.get=R,Nt.prototype.has=s,Nt.prototype.set=g;function I(w){var B=-1,$=w==null?0:w.length;for(this.clear();++B<$;){var Se=w[B];this.set(Se[0],Se[1])}}function M(){this.__data__=[],this.size=0}function F(w){var B=this.__data__,$=xi(B,w);if($<0)return!1;var Se=B.length-1;return $==Se?B.pop():UA.call(B,$,1),--this.size,!0}function q(w){var B=this.__data__,$=xi(B,w);return $<0?i:B[$][1]}function A(w){return xi(this.__data__,w)>-1}function l(w,B){var $=this.__data__,Se=xi($,w);return Se<0?(++this.size,$.push([w,B])):$[Se][1]=B,this}I.prototype.clear=M,I.prototype.delete=F,I.prototype.get=q,I.prototype.has=A,I.prototype.set=l;function f(w){var B=-1,$=w==null?0:w.length;for(this.clear();++B<$;){var Se=w[B];this.set(Se[0],Se[1])}}function m(){this.size=0,this.__data__={hash:new Nt,map:new(sA||I),string:new Nt}}function b(w){var B=Rf(this,w).delete(w);return this.size-=B?1:0,B}function T(w){return Rf(this,w).get(w)}function z(w){return Rf(this,w).has(w)}function N(w,B){var $=Rf(this,w),Se=$.size;return $.set(w,B),this.size+=$.size==Se?0:1,this}f.prototype.clear=m,f.prototype.delete=b,f.prototype.get=T,f.prototype.has=z,f.prototype.set=N;function X(w){var B=-1,$=w==null?0:w.length;for(this.__data__=new f;++B<$;)this.add(w[B])}function te(w){return this.__data__.set(w,k),this}function ve(w){return this.__data__.has(w)}X.prototype.add=X.prototype.push=te,X.prototype.has=ve;function De(w){var B=this.__data__=new I(w);this.size=B.size}function He(){this.__data__=new I,this.size=0}function nt(w){var B=this.__data__,$=B.delete(w);return this.size=B.size,$}function st(w){return this.__data__.get(w)}function gt(w){return this.__data__.has(w)}function Ot(w,B){var $=this.__data__;if($ instanceof I){var Se=$.__data__;if(!sA||Se.length<c-1)return Se.push([w,B]),this.size=++$.size,this;$=this.__data__=new f(Se)}return $.set(w,B),this.size=$.size,this}De.prototype.clear=He,De.prototype.delete=nt,De.prototype.get=st,De.prototype.has=gt,De.prototype.set=Ot;function Ut(w,B){var $=u(w),Se=!$&&Cc(w),rt=!$&&!Se&&V(w),bt=!$&&!Se&&!rt&&xn(w),Ht=$||Se||rt||bt,jt=Ht?Uo(w.length,Qn):[],ai=jt.length;for(var Ni in w)(B||jr.call(w,Ni))&&!(Ht&&(Ni=="length"||rt&&(Ni=="offset"||Ni=="parent")||bt&&(Ni=="buffer"||Ni=="byteLength"||Ni=="byteOffset")||Iu(Ni,ai)))&&jt.push(Ni);return jt}function Mt(w){var B=w.length;return B?w[Xc(0,B-1)]:i}function zt(w,B){return Lh(AA(w),mn(B,0,w.length))}function Ft(w){return Lh(AA(w))}function Bi(w,B,$){($!==i&&!XA(w[B],$)||$===i&&!(B in w))&&tn(w,B,$)}function hi(w,B,$){var Se=w[B];(!(jr.call(w,B)&&XA(Se,$))||$===i&&!(B in w))&&tn(w,B,$)}function xi(w,B){for(var $=w.length;$--;)if(XA(w[$][0],B))return $;return-1}function bi(w,B,$,Se){return qr(w,function(rt,bt,Ht){B(Se,rt,$(rt),Ht)}),Se}function Dn(w,B){return w&&au(B,Ys(B),w)}function dn(w,B){return w&&au(B,SA(B),w)}function tn(w,B,$){B=="__proto__"&&ks?ks(w,B,{configurable:!0,enumerable:!0,value:$,writable:!0}):w[B]=$}function on(w,B){for(var $=-1,Se=B.length,rt=gi(Se),bt=w==null;++$<Se;)rt[$]=bt?i:Xo(w,B[$]);return rt}function mn(w,B,$){return w===w&&($!==i&&(w=w<=$?w:$),B!==i&&(w=w>=B?w:B)),w}function cn(w,B,$,Se,rt,bt){var Ht,jt=B&J,ai=B&oe,Ni=B&se;if($&&(Ht=rt?$(w,Se,rt,bt):$(w)),Ht!==i)return Ht;if(!Tt(w))return w;var Ui=u(w);if(Ui){if(Ht=F1(w),!jt)return AA(w,Ht)}else{var qi=Mo(w),Sn=qi==si||qi==Oi;if(V(w))return z0(w,jt);if(qi==ki||qi==wi||Sn&&!rt){if(Ht=ai||Sn?{}:Bp(w),!jt)return ai?D1(w,dn(Ht,w)):$c(w,Dn(Ht,w))}else{if(!Ln[qi])return rt?w:{};Ht=Ph(w,qi,jt)}}bt||(bt=new De);var Un=bt.get(w);if(Un)return Un;bt.set(w,Ht),Ji(w)?w.forEach(function(tr){Ht.add(cn(tr,B,$,tr,w,bt))}):Yt(w)&&w.forEach(function(tr,es){Ht.set(es,cn(tr,B,$,es,w,bt))});var er=Ni?ai?U0:Wu:ai?SA:Ys,Zr=Ui?i:er(w);return oa(Zr||w,function(tr,es){Zr&&(es=tr,tr=w[es]),hi(Ht,es,cn(tr,B,$,es,w,bt))}),Ht}function $n(w){var B=Ys(w);return function($){return Tn($,w,B)}}function Tn(w,B,$){var Se=$.length;if(w==null)return!Se;for(w=ln(w);Se--;){var rt=$[Se],bt=B[rt],Ht=w[rt];if(Ht===i&&!(rt in w)||!bt(Ht))return!1}return!0}function Wn(w,B,$){if(typeof w!="function")throw new Bn(v);return Dh(function(){w.apply(i,$)},B)}function $r(w,B,$,Se){var rt=-1,bt=bo,Ht=!0,jt=w.length,ai=[],Ni=B.length;if(!jt)return ai;$&&(B=us(B,On($))),Se?(bt=Fo,Ht=!1):B.length>=c&&(bt=Lr,Ht=!1,B=new X(B));e:for(;++rt<jt;){var Ui=w[rt],qi=$==null?Ui:$(Ui);if(Ui=Se||Ui!==0?Ui:0,Ht&&qi===qi){for(var Sn=Ni;Sn--;)if(B[Sn]===qi)continue e;ai.push(Ui)}else bt(B,qi,Se)||ai.push(Ui)}return ai}var qr=F0(ko),QA=F0(js,!0);function ml(w,B){var $=!0;return qr(w,function(Se,rt,bt){return $=!!B(Se,rt,bt),$}),$}function qA(w,B,$){for(var Se=-1,rt=w.length;++Se<rt;){var bt=w[Se],Ht=B(bt);if(Ht!=null&&(jt===i?Ht===Ht&&!yn(Ht):$(Ht,jt)))var jt=Ht,ai=bt}return ai}function yu(w,B,$,Se){var rt=w.length;for($=Vn($),$<0&&($=-$>rt?0:rt+$),Se=Se===i||Se>rt?rt:Vn(Se),Se<0&&(Se+=rt),Se=$>Se?0:Ao(Se);$<Se;)w[$++]=B;return w}function bu(w,B){var $=[];return qr(w,function(Se,rt,bt){B(Se,rt,bt)&&$.push(Se)}),$}function ss(w,B,$,Se,rt){var bt=-1,Ht=w.length;for($||($=N1),rt||(rt=[]);++bt<Ht;){var jt=w[bt];B>0&&$(jt)?B>1?ss(jt,B-1,$,Se,rt):io(rt,jt):Se||(rt[rt.length]=jt)}return rt}var Ra=Ch(),To=Ch(!0);function ko(w,B){return w&&Ra(w,B,Ys)}function js(w,B){return w&&To(w,B,Ys)}function ua(w,B){return to(B,function($){return At(w[$])})}function Ea(w,B){B=Zu(B,w);for(var $=0,Se=B.length;w!=null&&$<Se;)w=w[Br(B[$++])];return $&&$==Se?w:i}function $s(w,B,$){var Se=B(w);return u(w)?Se:io(Se,$(w))}function pa(w){return w==null?w===i?kn:$i:mA&&mA in ln(w)?R1(w):zp(w)}function Qu(w,B){return w>B}function xf(w,B){return w!=null&&jr.call(w,B)}function wf(w,B){return w!=null&&B in ln(w)}function C0(w,B,$){return w>=ns(B,$)&&w<lr(B,$)}function hc(w,B,$){for(var Se=$?Fo:bo,rt=w[0].length,bt=w.length,Ht=bt,jt=gi(bt),ai=1/0,Ni=[];Ht--;){var Ui=w[Ht];Ht&&B&&(Ui=us(Ui,On(B))),ai=ns(Ui.length,ai),jt[Ht]=!$&&(B||rt>=120&&Ui.length>=120)?new X(Ht&&Ui):i}Ui=w[0];var qi=-1,Sn=jt[0];e:for(;++qi<rt&&Ni.length<ai;){var Un=Ui[qi],er=B?B(Un):Un;if(Un=$||Un!==0?Un:0,!(Sn?Lr(Sn,er):Se(Ni,er,$))){for(Ht=bt;--Ht;){var Zr=jt[Ht];if(!(Zr?Lr(Zr,er):Se(w[Ht],er,$)))continue e}Sn&&Sn.push(er),Ni.push(Un)}}return Ni}function _l(w,B,$,Se){return ko(w,function(rt,bt,Ht){B(Se,$(rt),bt,Ht)}),Se}function ZA(w,B,$){B=Zu(B,w),w=Np(w,B);var Se=w==null?w:w[Br(WA(B))];return Se==null?i:Dr(Se,w,$)}function jA(w){return Dt(w)&&pa(w)==wi}function PA(w){return Dt(w)&&pa(w)==y}function vl(w){return Dt(w)&&pa(w)==$t}function xu(w,B,$,Se,rt){return w===B?!0:w==null||B==null||!Dt(w)&&!Dt(B)?w!==w&&B!==B:Nl(w,B,$,Se,xu,rt)}function Nl(w,B,$,Se,rt,bt){var Ht=u(w),jt=u(B),ai=Ht?mi:Mo(w),Ni=jt?mi:Mo(B);ai=ai==wi?ki:ai,Ni=Ni==wi?ki:Ni;var Ui=ai==ki,qi=Ni==ki,Sn=ai==Ni;if(Sn&&V(w)){if(!V(B))return!1;Ht=!0,Ui=!1}if(Sn&&!Ui)return bt||(bt=new De),Ht||xn(w)?Lp(w,B,$,Se,rt,bt):ju(w,B,ai,$,Se,rt,bt);if(!($&be)){var Un=Ui&&jr.call(w,"__wrapped__"),er=qi&&jr.call(B,"__wrapped__");if(Un||er){var Zr=Un?w.value():w,tr=er?B.value():B;return bt||(bt=new De),rt(Zr,tr,$,Se,bt)}}return Sn?(bt||(bt=new De),B1(w,B,$,Se,rt,bt)):!1}function w1(w){return Dt(w)&&Mo(w)==zi}function Sf(w,B,$,Se){var rt=$.length,bt=rt,Ht=!Se;if(w==null)return!bt;for(w=ln(w);rt--;){var jt=$[rt];if(Ht&&jt[2]?jt[1]!==w[jt[0]]:!(jt[0]in w))return!1}for(;++rt<bt;){jt=$[rt];var ai=jt[0],Ni=w[ai],Ui=jt[1];if(Ht&&jt[2]){if(Ni===i&&!(ai in w))return!1}else{var qi=new De;if(Se)var Sn=Se(Ni,Ui,ai,w,B,qi);if(!(Sn===i?xu(Ui,Ni,be|qe,Se,qi):Sn))return!1}}return!0}function ga(w){if(!Tt(w)||Op(w))return!1;var B=At(w)?Co:qt;return B.test(Tu(w))}function E0(w){return Dt(w)&&pa(w)==ti}function _p(w){return Dt(w)&&Mo(w)==Wi}function fc(w){return Dt(w)&&Ct(w.length)&&!!or[pa(w)]}function qu(w){return typeof w=="function"?w:w==null?wl:typeof w=="object"?u(w)?yp(w[0],w[1]):T0(w):Ry(w)}function Wc(w){if(!rh(w))return nu(w);var B=[];for(var $ in ln(w))jr.call(w,$)&&$!="constructor"&&B.push($);return B}function I0(w){if(!Tt(w))return G1(w);var B=rh(w),$=[];for(var Se in w)Se=="constructor"&&(B||!jr.call(w,Se))||$.push(Se);return $}function Cf(w,B){return w<B}function vp(w,B){var $=-1,Se=p(w)?gi(w.length):[];return qr(w,function(rt,bt,Ht){Se[++$]=B(rt,bt,Ht)}),Se}function T0(w){var B=H0(w);return B.length==1&&B[0][2]?Y0(B[0][0],B[0][1]):function($){return $===w||Sf($,w,B)}}function yp(w,B){return q0(w)&&W0(B)?Y0(Br(w),B):function($){var Se=Xo($,w);return Se===i&&Se===B?Ec($,w):xu(B,Se,be|qe)}}function Yc(w,B,$,Se,rt){w!==B&&Ra(B,function(bt,Ht){if(rt||(rt=new De),Tt(bt))S1(w,B,Ht,$,Yc,Se,rt);else{var jt=Se?Se(zf(w,Ht),bt,Ht+"",w,B,rt):i;jt===i&&(jt=bt),Bi(w,Ht,jt)}},SA)}function S1(w,B,$,Se,rt,bt,Ht){var jt=zf(w,$),ai=zf(B,$),Ni=Ht.get(ai);if(Ni){Bi(w,$,Ni);return}var Ui=bt?bt(jt,ai,$+"",w,B,Ht):i,qi=Ui===i;if(qi){var Sn=u(ai),Un=!Sn&&V(ai),er=!Sn&&!Un&&xn(ai);Ui=ai,Sn||Un||er?u(jt)?Ui=jt:x(jt)?Ui=AA(jt):Un?(qi=!1,Ui=z0(ai,!0)):er?(qi=!1,Ui=Sp(ai,!0)):Ui=[]:Ki(ai)||Cc(ai)?(Ui=jt,Cc(jt)?Ui=Zo(jt):(!Tt(jt)||At(jt))&&(Ui=Bp(ai))):qi=!1}qi&&(Ht.set(ai,Ui),rt(Ui,ai,Se,bt,Ht),Ht.delete(ai)),Bi(w,$,Ui)}function Ef(w,B){var $=w.length;if($)return B+=B<0?$:0,Iu(B,$)?w[B]:i}function k0(w,B,$){B.length?B=us(B,function(bt){return u(bt)?function(Ht){return Ea(Ht,bt.length===1?bt[0]:bt)}:bt}):B=[wl];var Se=-1;B=us(B,On(Yn()));var rt=vp(w,function(bt,Ht,jt){var ai=us(B,function(Ni){return Ni(bt)});return{criteria:ai,index:++Se,value:bt}});return TA(rt,function(bt,Ht){return P1(bt,Ht,$)})}function bp(w,B){return dc(w,B,function($,Se){return Ec(w,Se)})}function dc(w,B,$){for(var Se=-1,rt=B.length,bt={};++Se<rt;){var Ht=B[Se],jt=Ea(w,Ht);$(jt,Ht)&&gc(bt,Zu(Ht,w),jt)}return bt}function C1(w){return function(B){return Ea(B,w)}}function pc(w,B,$,Se){var rt=Se?rr:No,bt=-1,Ht=B.length,jt=w;for(w===B&&(B=AA(B)),$&&(jt=us(w,On($)));++bt<Ht;)for(var ai=0,Ni=B[bt],Ui=$?$(Ni):Ni;(ai=rt(jt,Ui,ai,Se))>-1;)jt!==w&&UA.call(jt,ai,1),UA.call(w,ai,1);return w}function vh(w,B){for(var $=w?B.length:0,Se=$-1;$--;){var rt=B[$];if($==Se||rt!==bt){var bt=rt;Iu(rt)?UA.call(w,rt,1):xh(w,rt)}}return w}function Xc(w,B){return w+la(zn()*(B-w+1))}function xp(w,B,$,Se){for(var rt=-1,bt=lr(HA((B-w)/($||1)),0),Ht=gi(bt);bt--;)Ht[Se?bt:++rt]=w,w+=$;return Ht}function If(w,B){var $="";if(!w||B<1||B>dt)return $;do B%2&&($+=w),B=la(B/2),B&&(w+=w);while(B);return $}function Fr(w,B){return bc(Fp(w,B,wl),w+"")}function aA(w){return Mt(xl(w))}function Kc(w,B){var $=xl(w);return Lh($,mn(B,0,$.length))}function gc(w,B,$,Se){if(!Tt(w))return w;B=Zu(B,w);for(var rt=-1,bt=B.length,Ht=bt-1,jt=w;jt!=null&&++rt<bt;){var ai=Br(B[rt]),Ni=$;if(ai==="__proto__"||ai==="constructor"||ai==="prototype")return w;if(rt!=Ht){var Ui=jt[ai];Ni=Se?Se(Ui,ai,jt):i,Ni===i&&(Ni=Tt(Ui)?Ui:Iu(B[rt+1])?[]:{})}hi(jt,ai,Ni),jt=jt[ai]}return w}var M0=Ii?function(w,B){return Ii.set(w,B),w}:wl,yh=ks?function(w,B){return ks(w,"toString",{configurable:!0,enumerable:!1,value:w_(B),writable:!0})}:wl;function E1(w){return Lh(xl(w))}function _A(w,B,$){var Se=-1,rt=w.length;B<0&&(B=-B>rt?0:rt+B),$=$>rt?rt:$,$<0&&($+=rt),rt=B>$?0:$-B>>>0,B>>>=0;for(var bt=gi(rt);++Se<rt;)bt[Se]=w[Se+B];return bt}function I1(w,B){var $;return qr(w,function(Se,rt,bt){return $=B(Se,rt,bt),!$}),!!$}function bh(w,B,$){var Se=0,rt=w==null?Se:w.length;if(typeof B=="number"&&B===B&&rt<=Ti){for(;Se<rt;){var bt=Se+rt>>>1,Ht=w[bt];Ht!==null&&!yn(Ht)&&($?Ht<=B:Ht<B)?Se=bt+1:rt=bt}return rt}return Tf(w,B,wl,$)}function Tf(w,B,$,Se){var rt=0,bt=w==null?0:w.length;if(bt===0)return 0;B=$(B);for(var Ht=B!==B,jt=B===null,ai=yn(B),Ni=B===i;rt<bt;){var Ui=la((rt+bt)/2),qi=$(w[Ui]),Sn=qi!==i,Un=qi===null,er=qi===qi,Zr=yn(qi);if(Ht)var tr=Se||er;else Ni?tr=er&&(Se||Sn):jt?tr=er&&Sn&&(Se||!Un):ai?tr=er&&Sn&&!Un&&(Se||!Zr):Un||Zr?tr=!1:tr=Se?qi<=B:qi<B;tr?rt=Ui+1:bt=Ui}return ns(bt,yi)}function P0(w,B){for(var $=-1,Se=w.length,rt=0,bt=[];++$<Se;){var Ht=w[$],jt=B?B(Ht):Ht;if(!$||!XA(jt,ai)){var ai=jt;bt[rt++]=Ht===0?0:Ht}}return bt}function wp(w){return typeof w=="number"?w:yn(w)?ei:+w}function vA(w){if(typeof w=="string")return w;if(u(w))return us(w,vA)+"";if(yn(w))return C?C.call(w):"";var B=w+"";return B=="0"&&1/w==-vt?"-0":B}function wu(w,B,$){var Se=-1,rt=bo,bt=w.length,Ht=!0,jt=[],ai=jt;if($)Ht=!1,rt=Fo;else if(bt>=c){var Ni=B?null:Mp(w);if(Ni)return br(Ni);Ht=!1,rt=Lr,ai=new X}else ai=B?[]:jt;e:for(;++Se<bt;){var Ui=w[Se],qi=B?B(Ui):Ui;if(Ui=$||Ui!==0?Ui:0,Ht&&qi===qi){for(var Sn=ai.length;Sn--;)if(ai[Sn]===qi)continue e;B&&ai.push(qi),jt.push(Ui)}else rt(ai,qi,$)||(ai!==jt&&ai.push(qi),jt.push(Ui))}return jt}function xh(w,B){return B=Zu(B,w),w=Np(w,B),w==null||delete w[Br(WA(B))]}function Jc(w,B,$,Se){return gc(w,B,$(Ea(w,B)),Se)}function oA(w,B,$,Se){for(var rt=w.length,bt=Se?rt:-1;(Se?bt--:++bt<rt)&&B(w[bt],bt,w););return $?_A(w,Se?0:bt,Se?bt+1:rt):_A(w,Se?bt+1:0,Se?rt:bt)}function D0(w,B){var $=w;return $ instanceof ae&&($=$.value()),xo(B,function(Se,rt){return rt.func.apply(rt.thisArg,io([Se],rt.args))},$)}function L0(w,B,$){var Se=w.length;if(Se<2)return Se?wu(w[0]):[];for(var rt=-1,bt=gi(Se);++rt<Se;)for(var Ht=w[rt],jt=-1;++jt<Se;)jt!=rt&&(bt[rt]=$r(bt[rt]||Ht,w[jt],B,$));return wu(ss(bt,1),B,$)}function B0(w,B,$){for(var Se=-1,rt=w.length,bt=B.length,Ht={};++Se<rt;){var jt=Se<bt?B[Se]:i;$(Ht,w[Se],jt)}return Ht}function R0(w){return x(w)?w:[]}function O0(w){return typeof w=="function"?w:wl}function Zu(w,B){return u(w)?w:q0(w,B)?[w]:K0(Jn(w))}var T1=Fr;function su(w,B,$){var Se=w.length;return $=$===i?Se:$,!B&&$>=Se?w:_A(w,B,$)}var wh=mu||function(w){return ls.clearTimeout(w)};function z0(w,B){if(B)return w.slice();var $=w.length,Se=rn?rn($):new w.constructor($);return w.copy(Se),Se}function Su(w){var B=new w.constructor(w.byteLength);return new zl(B).set(new zl(w)),B}function Sh(w,B){var $=B?Su(w.buffer):w.buffer;return new w.constructor($,w.byteOffset,w.byteLength)}function k1(w){var B=new w.constructor(w.source,Jt.exec(w));return B.lastIndex=w.lastIndex,B}function M1(w){return S?ln(S.call(w)):{}}function Sp(w,B){var $=B?Su(w.buffer):w.buffer;return new w.constructor($,w.byteOffset,w.length)}function Cp(w,B){if(w!==B){var $=w!==i,Se=w===null,rt=w===w,bt=yn(w),Ht=B!==i,jt=B===null,ai=B===B,Ni=yn(B);if(!jt&&!Ni&&!bt&&w>B||bt&&Ht&&ai&&!jt&&!Ni||Se&&Ht&&ai||!$&&ai||!rt)return 1;if(!Se&&!bt&&!Ni&&w<B||Ni&&$&&rt&&!Se&&!bt||jt&&$&&rt||!Ht&&rt||!ai)return-1}return 0}function P1(w,B,$){for(var Se=-1,rt=w.criteria,bt=B.criteria,Ht=rt.length,jt=$.length;++Se<Ht;){var ai=Cp(rt[Se],bt[Se]);if(ai){if(Se>=jt)return ai;var Ni=$[Se];return ai*(Ni=="desc"?-1:1)}}return w.index-B.index}function Ep(w,B,$,Se){for(var rt=-1,bt=w.length,Ht=$.length,jt=-1,ai=B.length,Ni=lr(bt-Ht,0),Ui=gi(ai+Ni),qi=!Se;++jt<ai;)Ui[jt]=B[jt];for(;++rt<Ht;)(qi||rt<bt)&&(Ui[$[rt]]=w[rt]);for(;Ni--;)Ui[jt++]=w[rt++];return Ui}function Ip(w,B,$,Se){for(var rt=-1,bt=w.length,Ht=-1,jt=$.length,ai=-1,Ni=B.length,Ui=lr(bt-jt,0),qi=gi(Ui+Ni),Sn=!Se;++rt<Ui;)qi[rt]=w[rt];for(var Un=rt;++ai<Ni;)qi[Un+ai]=B[ai];for(;++Ht<jt;)(Sn||rt<bt)&&(qi[Un+$[Ht]]=w[rt++]);return qi}function AA(w,B){var $=-1,Se=w.length;for(B||(B=gi(Se));++$<Se;)B[$]=w[$];return B}function au(w,B,$,Se){var rt=!$;$||($={});for(var bt=-1,Ht=B.length;++bt<Ht;){var jt=B[bt],ai=Se?Se($[jt],w[jt],jt,$,w):i;ai===i&&(ai=w[jt]),rt?tn($,jt,ai):hi($,jt,ai)}return $}function $c(w,B){return au(w,Mh(w),B)}function D1(w,B){return au(w,nh(w),B)}function Ws(w,B){return function($,Se){var rt=u($)?gu:bi,bt=B?B():{};return rt($,w,Yn(Se,2),bt)}}function Cu(w){return Fr(function(B,$){var Se=-1,rt=$.length,bt=rt>1?$[rt-1]:i,Ht=rt>2?$[2]:i;for(bt=w.length>3&&typeof bt=="function"?(rt--,bt):i,Ht&&yA($[0],$[1],Ht)&&(bt=rt<3?i:bt,rt=1),B=ln(B);++Se<rt;){var jt=$[Se];jt&&w(B,jt,Se,bt)}return B})}function F0(w,B){return function($,Se){if($==null)return $;if(!p($))return w($,Se);for(var rt=$.length,bt=B?rt:-1,Ht=ln($);(B?bt--:++bt<rt)&&Se(Ht[bt],bt,Ht)!==!1;);return $}}function Ch(w){return function(B,$,Se){for(var rt=-1,bt=ln(B),Ht=Se(B),jt=Ht.length;jt--;){var ai=Ht[w?jt:++rt];if($(bt[ai],ai,bt)===!1)break}return B}}function kf(w,B,$){var Se=B&ke,rt=th(w);function bt(){var Ht=this&&this!==ls&&this instanceof bt?rt:w;return Ht.apply(Se?$:this,arguments)}return bt}function eh(w){return function(B){B=Jn(B);var $=dA(B)?Bs(B):i,Se=$?$[0]:B.charAt(0),rt=$?su($,1).join(""):B.slice(1);return Se[w]()+rt}}function mc(w){return function(B){return xo(Ly(Dy(B).replace(Xi,"")),w,"")}}function th(w){return function(){var B=arguments;switch(B.length){case 0:return new w;case 1:return new w(B[0]);case 2:return new w(B[0],B[1]);case 3:return new w(B[0],B[1],B[2]);case 4:return new w(B[0],B[1],B[2],B[3]);case 5:return new w(B[0],B[1],B[2],B[3],B[4]);case 6:return new w(B[0],B[1],B[2],B[3],B[4],B[5]);case 7:return new w(B[0],B[1],B[2],B[3],B[4],B[5],B[6])}var $=H(w.prototype),Se=w.apply($,B);return Tt(Se)?Se:$}}function Eh(w,B,$){var Se=th(w);function rt(){for(var bt=arguments.length,Ht=gi(bt),jt=bt,ai=vc(rt);jt--;)Ht[jt]=arguments[jt];var Ni=bt<3&&Ht[0]!==ai&&Ht[bt-1]!==ai?[]:Qa(Ht,ai);if(bt-=Ni.length,bt<$)return Lf(w,B,Ih,rt.placeholder,i,Ht,Ni,i,i,$-bt);var Ui=this&&this!==ls&&this instanceof rt?Se:w;return Dr(Ui,this,Ht)}return rt}function Mf(w){return function(B,$,Se){var rt=ln(B);if(!p(B)){var bt=Yn($,3);B=Ys(B),$=function(jt){return bt(rt[jt],jt,rt)}}var Ht=w(B,$,Se);return Ht>-1?rt[bt?B[Ht]:Ht]:i}}function Pf(w){return ou(function(B){var $=B.length,Se=$,rt=Z.prototype.thru;for(w&&B.reverse();Se--;){var bt=B[Se];if(typeof bt!="function")throw new Bn(v);if(rt&&!Ht&&Bf(bt)=="wrapper")var Ht=new Z([],!0)}for(Se=Ht?Se:$;++Se<$;){bt=B[Se];var jt=Bf(bt),ai=jt=="wrapper"?G0(bt):i;ai&&Z0(ai[0])&&ai[1]==(Gt|ct|yt|Ve)&&!ai[4].length&&ai[9]==1?Ht=Ht[Bf(ai[0])].apply(Ht,ai[3]):Ht=bt.length==1&&Z0(bt)?Ht[jt]():Ht.thru(bt)}return function(){var Ni=arguments,Ui=Ni[0];if(Ht&&Ni.length==1&&u(Ui))return Ht.plant(Ui).value();for(var qi=0,Sn=$?B[qi].apply(this,Ni):Ui;++qi<$;)Sn=B[qi].call(this,Sn);return Sn}})}function Ih(w,B,$,Se,rt,bt,Ht,jt,ai,Ni){var Ui=B&Gt,qi=B&ke,Sn=B&Qe,Un=B&(ct|St),er=B&Je,Zr=Sn?i:th(w);function tr(){for(var es=arguments.length,hs=gi(es),Ql=es;Ql--;)hs[Ql]=arguments[Ql];if(Un)var $A=vc(tr),ql=_r(hs,$A);if(Se&&(hs=Ep(hs,Se,rt,Un)),bt&&(hs=Ip(hs,bt,Ht,Un)),es-=ql,Un&&es<Ni){var lo=Qa(hs,$A);return Lf(w,B,Ih,tr.placeholder,$,hs,lo,jt,ai,Ni-es)}var Du=qi?$:this,Tc=Sn?Du[w]:w;return es=hs.length,jt?hs=H1(hs,jt):er&&es>1&&hs.reverse(),Ui&&ai<es&&(hs.length=ai),this&&this!==ls&&this instanceof tr&&(Tc=Zr||th(Tc)),Tc.apply(Du,hs)}return tr}function Tp(w,B){return function($,Se){return _l($,w,B(Se),{})}}function Th(w,B){return function($,Se){var rt;if($===i&&Se===i)return B;if($!==i&&(rt=$),Se!==i){if(rt===i)return Se;typeof $=="string"||typeof Se=="string"?($=vA($),Se=vA(Se)):($=wp($),Se=wp(Se)),rt=w($,Se)}return rt}}function _c(w){return ou(function(B){return B=us(B,On(Yn())),Fr(function($){var Se=this;return w(B,function(rt){return Dr(rt,Se,$)})})})}function Df(w,B){B=B===i?" ":vA(B);var $=B.length;if($<2)return $?If(B,w):B;var Se=If(B,HA(w/Ba(B)));return dA(B)?su(Bs(Se),0,w).join(""):Se.slice(0,w)}function N0(w,B,$,Se){var rt=B&ke,bt=th(w);function Ht(){for(var jt=-1,ai=arguments.length,Ni=-1,Ui=Se.length,qi=gi(Ui+ai),Sn=this&&this!==ls&&this instanceof Ht?bt:w;++Ni<Ui;)qi[Ni]=Se[Ni];for(;ai--;)qi[Ni++]=arguments[++jt];return Dr(Sn,rt?$:this,qi)}return Ht}function kp(w){return function(B,$,Se){return Se&&typeof Se!="number"&&yA(B,$,Se)&&($=Se=i),B=Cs(B),$===i?($=B,B=0):$=Cs($),Se=Se===i?B<$?1:-1:Cs(Se),xp(B,$,Se,w)}}function ih(w){return function(B,$){return typeof B=="string"&&typeof $=="string"||(B=Gs(B),$=Gs($)),w(B,$)}}function Lf(w,B,$,Se,rt,bt,Ht,jt,ai,Ni){var Ui=B&ct,qi=Ui?Ht:i,Sn=Ui?i:Ht,Un=Ui?bt:i,er=Ui?i:bt;B|=Ui?yt:xe,B&=~(Ui?xe:yt),B&We||(B&=~(ke|Qe));var Zr=[w,B,rt,Un,qi,er,Sn,jt,ai,Ni],tr=$.apply(i,Zr);return Z0(w)&&Vp(tr,Zr),tr.placeholder=Se,Ia(tr,w,B)}function kh(w){var B=Ci[w];return function($,Se){if($=Gs($),Se=Se==null?0:ns(Vn(Se),292),Se&&iu($)){var rt=(Jn($)+"e").split("e"),bt=B(rt[0]+"e"+(+rt[1]+Se));return rt=(Jn(bt)+"e").split("e"),+(rt[0]+"e"+(+rt[1]-Se))}return B($)}}var Mp=Vs&&1/br(new Vs([,-0]))[1]==vt?function(w){return new Vs(w)}:E_;function V0(w){return function(B){var $=Mo(B);return $==zi?ms(B):$==Wi?is(B):ws(B,w(B))}}function Eu(w,B,$,Se,rt,bt,Ht,jt){var ai=B&Qe;if(!ai&&typeof w!="function")throw new Bn(v);var Ni=Se?Se.length:0;if(Ni||(B&=~(yt|xe),Se=rt=i),Ht=Ht===i?Ht:lr(Vn(Ht),0),jt=jt===i?jt:Vn(jt),Ni-=rt?rt.length:0,B&xe){var Ui=Se,qi=rt;Se=rt=i}var Sn=ai?i:G0(w),Un=[w,B,$,Se,rt,Ui,qi,bt,Ht,jt];if(Sn&&Of(Un,Sn),w=Un[0],B=Un[1],$=Un[2],Se=Un[3],rt=Un[4],jt=Un[9]=Un[9]===i?ai?0:w.length:lr(Un[9]-Ni,0),!jt&&B&(ct|St)&&(B&=~(ct|St)),!B||B==ke)var er=kf(w,B,$);else B==ct||B==St?er=Eh(w,B,jt):(B==yt||B==(ke|yt))&&!rt.length?er=N0(w,B,$,Se):er=Ih.apply(i,Un);var Zr=Sn?M0:Vp;return Ia(Zr(er,Un),w,B)}function Pp(w,B,$,Se){return w===i||XA(w,Js[$])&&!jr.call(Se,$)?B:w}function Dp(w,B,$,Se,rt,bt){return Tt(w)&&Tt(B)&&(bt.set(B,w),Yc(w,B,i,Dp,bt),bt.delete(B)),w}function L1(w){return Ki(w)?i:w}function Lp(w,B,$,Se,rt,bt){var Ht=$&be,jt=w.length,ai=B.length;if(jt!=ai&&!(Ht&&ai>jt))return!1;var Ni=bt.get(w),Ui=bt.get(B);if(Ni&&Ui)return Ni==B&&Ui==w;var qi=-1,Sn=!0,Un=$&qe?new X:i;for(bt.set(w,B),bt.set(B,w);++qi<jt;){var er=w[qi],Zr=B[qi];if(Se)var tr=Ht?Se(Zr,er,qi,B,w,bt):Se(er,Zr,qi,w,B,bt);if(tr!==i){if(tr)continue;Sn=!1;break}if(Un){if(!Hs(B,function(es,hs){if(!Lr(Un,hs)&&(er===es||rt(er,es,$,Se,bt)))return Un.push(hs)})){Sn=!1;break}}else if(!(er===Zr||rt(er,Zr,$,Se,bt))){Sn=!1;break}}return bt.delete(w),bt.delete(B),Sn}function ju(w,B,$,Se,rt,bt,Ht){switch($){case D:if(w.byteLength!=B.byteLength||w.byteOffset!=B.byteOffset)return!1;w=w.buffer,B=B.buffer;case y:return!(w.byteLength!=B.byteLength||!bt(new zl(w),new zl(B)));case Di:case $t:case oi:return XA(+w,+B);case ni:return w.name==B.name&&w.message==B.message;case ti:case ir:return w==B+"";case zi:var jt=ms;case Wi:var ai=Se&be;if(jt||(jt=br),w.size!=B.size&&!ai)return!1;var Ni=Ht.get(w);if(Ni)return Ni==B;Se|=qe,Ht.set(w,B);var Ui=Lp(jt(w),jt(B),Se,rt,bt,Ht);return Ht.delete(w),Ui;case gn:if(S)return S.call(w)==S.call(B)}return!1}function B1(w,B,$,Se,rt,bt){var Ht=$&be,jt=Wu(w),ai=jt.length,Ni=Wu(B),Ui=Ni.length;if(ai!=Ui&&!Ht)return!1;for(var qi=ai;qi--;){var Sn=jt[qi];if(!(Ht?Sn in B:jr.call(B,Sn)))return!1}var Un=bt.get(w),er=bt.get(B);if(Un&&er)return Un==B&&er==w;var Zr=!0;bt.set(w,B),bt.set(B,w);for(var tr=Ht;++qi<ai;){Sn=jt[qi];var es=w[Sn],hs=B[Sn];if(Se)var Ql=Ht?Se(hs,es,Sn,B,w,bt):Se(es,hs,Sn,w,B,bt);if(!(Ql===i?es===hs||rt(es,hs,$,Se,bt):Ql)){Zr=!1;break}tr||(tr=Sn=="constructor")}if(Zr&&!tr){var $A=w.constructor,ql=B.constructor;$A!=ql&&"constructor"in w&&"constructor"in B&&!(typeof $A=="function"&&$A instanceof $A&&typeof ql=="function"&&ql instanceof ql)&&(Zr=!1)}return bt.delete(w),bt.delete(B),Zr}function ou(w){return bc(Fp(w,i,xc),w+"")}function Wu(w){return $s(w,Ys,Mh)}function U0(w){return $s(w,SA,nh)}var G0=Ii?function(w){return Ii.get(w)}:E_;function Bf(w){for(var B=w.name+"",$=Ho[B],Se=jr.call(Ho,B)?$.length:0;Se--;){var rt=$[Se],bt=rt.func;if(bt==null||bt==w)return rt.name}return B}function vc(w){var B=jr.call(E,"placeholder")?E:w;return B.placeholder}function Yn(){var w=E.iteratee||S_;return w=w===S_?qu:w,arguments.length?w(arguments[0],arguments[1]):w}function Rf(w,B){var $=w.__data__;return V1(B)?$[typeof B=="string"?"string":"hash"]:$.map}function H0(w){for(var B=Ys(w),$=B.length;$--;){var Se=B[$],rt=w[Se];B[$]=[Se,rt,W0(rt)]}return B}function yc(w,B){var $=ro(w,B);return ga($)?$:i}function R1(w){var B=jr.call(w,mA),$=w[mA];try{w[mA]=i;var Se=!0}catch{}var rt=ao.call(w);return Se&&(B?w[mA]=$:delete w[mA]),rt}var Mh=Go?function(w){return w==null?[]:(w=ln(w),to(Go(w),function(B){return gA.call(w,B)}))}:I_,nh=Go?function(w){for(var B=[];w;)io(B,Mh(w)),w=hl(w);return B}:I_,Mo=pa;(ru&&Mo(new ru(new ArrayBuffer(1)))!=D||sA&&Mo(new sA)!=zi||Fl&&Mo(Fl.resolve())!=sn||Vs&&Mo(new Vs)!=Wi||Ca&&Mo(new Ca)!=an)&&(Mo=function(w){var B=pa(w),$=B==ki?w.constructor:i,Se=$?Tu($):"";if(Se)switch(Se){case pl:return D;case gl:return zi;case Wr:return sn;case Qo:return Wi;case rs:return an}return B});function O1(w,B,$){for(var Se=-1,rt=$.length;++Se<rt;){var bt=$[Se],Ht=bt.size;switch(bt.type){case"drop":w+=Ht;break;case"dropRight":B-=Ht;break;case"take":B=ns(B,w+Ht);break;case"takeRight":w=lr(w,B-Ht);break}}return{start:w,end:B}}function z1(w){var B=w.match(Ee);return B?B[1].split(tt):[]}function Q0(w,B,$){B=Zu(B,w);for(var Se=-1,rt=B.length,bt=!1;++Se<rt;){var Ht=Br(B[Se]);if(!(bt=w!=null&&$(w,Ht)))break;w=w[Ht]}return bt||++Se!=rt?bt:(rt=w==null?0:w.length,!!rt&&Ct(rt)&&Iu(Ht,rt)&&(u(w)||Cc(w)))}function F1(w){var B=w.length,$=new w.constructor(B);return B&&typeof w[0]=="string"&&jr.call(w,"index")&&($.index=w.index,$.input=w.input),$}function Bp(w){return typeof w.constructor=="function"&&!rh(w)?H(hl(w)):{}}function Ph(w,B,$){var Se=w.constructor;switch(B){case y:return Su(w);case Di:case $t:return new Se(+w);case D:return Sh(w,$);case U:case Q:case K:case ie:case Ae:case fe:case ye:case Le:case we:return Sp(w,$);case zi:return new Se;case oi:case ir:return new Se(w);case ti:return k1(w);case Wi:return new Se;case gn:return M1(w)}}function Rp(w,B){var $=B.length;if(!$)return w;var Se=$-1;return B[Se]=($>1?"& ":"")+B[Se],B=B.join($>2?", ":" "),w.replace(ge,`{
/* [wrapped with `+B+`] */
`)}function N1(w){return u(w)||Cc(w)||!!(tu&&w&&w[tu])}function Iu(w,B){var $=typeof w;return B=B??dt,!!B&&($=="number"||$!="symbol"&&Ai.test(w))&&w>-1&&w%1==0&&w<B}function yA(w,B,$){if(!Tt($))return!1;var Se=typeof B;return(Se=="number"?p($)&&Iu(B,$.length):Se=="string"&&B in $)?XA($[B],w):!1}function q0(w,B){if(u(w))return!1;var $=typeof w;return $=="number"||$=="symbol"||$=="boolean"||w==null||yn(w)?!0:pe.test(w)||!me.test(w)||B!=null&&w in ln(B)}function V1(w){var B=typeof w;return B=="string"||B=="number"||B=="symbol"||B=="boolean"?w!=="__proto__":w===null}function Z0(w){var B=Bf(w),$=E[B];if(typeof $!="function"||!(B in ae.prototype))return!1;if(w===$)return!0;var Se=G0($);return!!Se&&w===Se[0]}function Op(w){return!!Ol&&Ol in w}var j0=fa?At:T_;function rh(w){var B=w&&w.constructor,$=typeof B=="function"&&B.prototype||Js;return w===$}function W0(w){return w===w&&!Tt(w)}function Y0(w,B){return function($){return $==null?!1:$[w]===B&&(B!==i||w in ln($))}}function U1(w){var B=lh(w,function(Se){return $.size===O&&$.clear(),Se}),$=B.cache;return B}function Of(w,B){var $=w[1],Se=B[1],rt=$|Se,bt=rt<(ke|Qe|Gt),Ht=Se==Gt&&$==ct||Se==Gt&&$==Ve&&w[7].length<=B[8]||Se==(Gt|Ve)&&B[7].length<=B[8]&&$==ct;if(!(bt||Ht))return w;Se&ke&&(w[2]=B[2],rt|=$&ke?0:We);var jt=B[3];if(jt){var ai=w[3];w[3]=ai?Ep(ai,jt,B[4]):jt,w[4]=ai?Qa(w[3],j):B[4]}return jt=B[5],jt&&(ai=w[5],w[5]=ai?Ip(ai,jt,B[6]):jt,w[6]=ai?Qa(w[5],j):B[6]),jt=B[7],jt&&(w[7]=jt),Se&Gt&&(w[8]=w[8]==null?B[8]:ns(w[8],B[8])),w[9]==null&&(w[9]=B[9]),w[0]=B[0],w[1]=rt,w}function G1(w){var B=[];if(w!=null)for(var $ in ln(w))B.push($);return B}function zp(w){return ao.call(w)}function Fp(w,B,$){return B=lr(B===i?w.length-1:B,0),function(){for(var Se=arguments,rt=-1,bt=lr(Se.length-B,0),Ht=gi(bt);++rt<bt;)Ht[rt]=Se[B+rt];rt=-1;for(var jt=gi(B+1);++rt<B;)jt[rt]=Se[rt];return jt[B]=$(Ht),Dr(w,this,jt)}}function Np(w,B){return B.length<2?w:Ea(w,_A(B,0,-1))}function H1(w,B){for(var $=w.length,Se=ns(B.length,$),rt=AA(w);Se--;){var bt=B[Se];w[Se]=Iu(bt,$)?rt[bt]:i}return w}function zf(w,B){if(!(B==="constructor"&&typeof w[B]=="function")&&B!="__proto__")return w[B]}var Vp=X0(M0),Dh=vu||function(w,B){return ls.setTimeout(w,B)},bc=X0(yh);function Ia(w,B,$){var Se=B+"";return bc(w,Rp(Se,Up(z1(Se),$)))}function X0(w){var B=0,$=0;return function(){var Se=Jr(),rt=Ke-(Se-$);if($=Se,rt>0){if(++B>=ut)return arguments[0]}else B=0;return w.apply(i,arguments)}}function Lh(w,B){var $=-1,Se=w.length,rt=Se-1;for(B=B===i?Se:B;++$<B;){var bt=Xc($,rt),Ht=w[bt];w[bt]=w[$],w[$]=Ht}return w.length=B,w}var K0=U1(function(w){var B=[];return w.charCodeAt(0)===46&&B.push(""),w.replace(Oe,function($,Se,rt,bt){B.push(rt?bt.replace(ce,"$1"):Se||$)}),B});function Br(w){if(typeof w=="string"||yn(w))return w;var B=w+"";return B=="0"&&1/w==-vt?"-0":B}function Tu(w){if(w!=null){try{return cl.call(w)}catch{}try{return w+""}catch{}}return""}function Up(w,B){return oa(Vi,function($){var Se="_."+$[0];B&$[1]&&!bo(w,Se)&&w.push(Se)}),w.sort()}function J0(w){if(w instanceof ae)return w.clone();var B=new Z(w.__wrapped__,w.__chain__);return B.__actions__=AA(w.__actions__),B.__index__=w.__index__,B.__values__=w.__values__,B}function ku(w,B,$){($?yA(w,B,$):B===i)?B=1:B=lr(Vn(B),0);var Se=w==null?0:w.length;if(!Se||B<1)return[];for(var rt=0,bt=0,Ht=gi(HA(Se/B));rt<Se;)Ht[bt++]=_A(w,rt,rt+=B);return Ht}function sh(w){for(var B=-1,$=w==null?0:w.length,Se=0,rt=[];++B<$;){var bt=w[B];bt&&(rt[Se++]=bt)}return rt}function Gp(){var w=arguments.length;if(!w)return[];for(var B=gi(w-1),$=arguments[0],Se=w;Se--;)B[Se-1]=arguments[Se];return io(u($)?AA($):[$],ss(B,1))}var Q1=Fr(function(w,B){return x(w)?$r(w,ss(B,1,x,!0)):[]}),q1=Fr(function(w,B){var $=WA(B);return x($)&&($=i),x(w)?$r(w,ss(B,1,x,!0),Yn($,2)):[]}),Z1=Fr(function(w,B){var $=WA(B);return x($)&&($=i),x(w)?$r(w,ss(B,1,x,!0),i,$):[]});function j1(w,B,$){var Se=w==null?0:w.length;return Se?(B=$||B===i?1:Vn(B),_A(w,B<0?0:B,Se)):[]}function W1(w,B,$){var Se=w==null?0:w.length;return Se?(B=$||B===i?1:Vn(B),B=Se-B,_A(w,0,B<0?0:B)):[]}function Y1(w,B){return w&&w.length?oA(w,Yn(B,3),!0,!0):[]}function X1(w,B){return w&&w.length?oA(w,Yn(B,3),!0):[]}function K1(w,B,$,Se){var rt=w==null?0:w.length;return rt?($&&typeof $!="number"&&yA(w,B,$)&&($=0,Se=rt),yu(w,B,$,Se)):[]}function Hp(w,B,$){var Se=w==null?0:w.length;if(!Se)return-1;var rt=$==null?0:Vn($);return rt<0&&(rt=lr(Se+rt,0)),Xr(w,Yn(B,3),rt)}function Bh(w,B,$){var Se=w==null?0:w.length;if(!Se)return-1;var rt=Se-1;return $!==i&&(rt=Vn($),rt=$<0?lr(Se+rt,0):ns(rt,Se-1)),Xr(w,Yn(B,3),rt,!0)}function xc(w){var B=w==null?0:w.length;return B?ss(w,1):[]}function Qp(w){var B=w==null?0:w.length;return B?ss(w,vt):[]}function $0(w,B){var $=w==null?0:w.length;return $?(B=B===i?1:Vn(B),ss(w,B)):[]}function ed(w){for(var B=-1,$=w==null?0:w.length,Se={};++B<$;){var rt=w[B];Se[rt[0]]=rt[1]}return Se}function qp(w){return w&&w.length?w[0]:i}function J1(w,B,$){var Se=w==null?0:w.length;if(!Se)return-1;var rt=$==null?0:Vn($);return rt<0&&(rt=lr(Se+rt,0)),No(w,B,rt)}function $1(w){var B=w==null?0:w.length;return B?_A(w,0,-1):[]}var Zp=Fr(function(w){var B=us(w,R0);return B.length&&B[0]===w[0]?hc(B):[]}),jp=Fr(function(w){var B=WA(w),$=us(w,R0);return B===WA($)?B=i:$.pop(),$.length&&$[0]===w[0]?hc($,Yn(B,2)):[]}),bA=Fr(function(w){var B=WA(w),$=us(w,R0);return B=typeof B=="function"?B:i,B&&$.pop(),$.length&&$[0]===w[0]?hc($,i,B):[]});function td(w,B){return w==null?"":dl.call(w,B)}function WA(w){var B=w==null?0:w.length;return B?w[B-1]:i}function Yu(w,B,$){var Se=w==null?0:w.length;if(!Se)return-1;var rt=Se;return $!==i&&(rt=Vn($),rt=rt<0?lr(Se+rt,0):ns(rt,Se-1)),B===B?pA(w,B,rt):Xr(w,Aa,rt,!0)}function Rh(w,B){return w&&w.length?Ef(w,Vn(B)):i}var Oh=Fr(wc);function wc(w,B){return w&&w.length&&B&&B.length?pc(w,B):w}function Ff(w,B,$){return w&&w.length&&B&&B.length?pc(w,B,Yn($,2)):w}function Nf(w,B,$){return w&&w.length&&B&&B.length?pc(w,B,i,$):w}var e_=ou(function(w,B){var $=w==null?0:w.length,Se=on(w,B);return vh(w,us(B,function(rt){return Iu(rt,$)?+rt:rt}).sort(Cp)),Se});function Wp(w,B){var $=[];if(!(w&&w.length))return $;var Se=-1,rt=[],bt=w.length;for(B=Yn(B,3);++Se<bt;){var Ht=w[Se];B(Ht,Se,w)&&($.push(Ht),rt.push(Se))}return vh(w,rt),$}function Vf(w){return w==null?w:Io.call(w)}function t_(w,B,$){var Se=w==null?0:w.length;return Se?($&&typeof $!="number"&&yA(w,B,$)?(B=0,$=Se):(B=B==null?0:Vn(B),$=$===i?Se:Vn($)),_A(w,B,$)):[]}function Yp(w,B){return bh(w,B)}function Xp(w,B,$){return Tf(w,B,Yn($,2))}function id(w,B){var $=w==null?0:w.length;if($){var Se=bh(w,B);if(Se<$&&XA(w[Se],B))return Se}return-1}function nd(w,B){return bh(w,B,!0)}function i_(w,B,$){return Tf(w,B,Yn($,2),!0)}function n_(w,B){var $=w==null?0:w.length;if($){var Se=bh(w,B,!0)-1;if(XA(w[Se],B))return Se}return-1}function Kp(w){return w&&w.length?P0(w):[]}function zh(w,B){return w&&w.length?P0(w,Yn(B,2)):[]}function Au(w){var B=w==null?0:w.length;return B?_A(w,1,B):[]}function Xu(w,B,$){return w&&w.length?(B=$||B===i?1:Vn(B),_A(w,0,B<0?0:B)):[]}function Jp(w,B,$){var Se=w==null?0:w.length;return Se?(B=$||B===i?1:Vn(B),B=Se-B,_A(w,B<0?0:B,Se)):[]}function rd(w,B){return w&&w.length?oA(w,Yn(B,3),!1,!0):[]}function r_(w,B){return w&&w.length?oA(w,Yn(B,3)):[]}var s_=Fr(function(w){return wu(ss(w,1,x,!0))}),Uf=Fr(function(w){var B=WA(w);return x(B)&&(B=i),wu(ss(w,1,x,!0),Yn(B,2))}),sd=Fr(function(w){var B=WA(w);return B=typeof B=="function"?B:i,wu(ss(w,1,x,!0),i,B)});function a_(w){return w&&w.length?wu(w):[]}function ad(w,B){return w&&w.length?wu(w,Yn(B,2)):[]}function od(w,B){return B=typeof B=="function"?B:i,w&&w.length?wu(w,i,B):[]}function Ku(w){if(!(w&&w.length))return[];var B=0;return w=to(w,function($){if(x($))return B=lr($.length,B),!0}),Uo(B,function($){return us(w,Qr($))})}function Ad(w,B){if(!(w&&w.length))return[];var $=Ku(w);return B==null?$:us($,function(Se){return Dr(B,i,Se)})}var $p=Fr(function(w,B){return x(w)?$r(w,B):[]}),ld=Fr(function(w){return L0(to(w,x))}),eg=Fr(function(w){var B=WA(w);return x(B)&&(B=i),L0(to(w,x),Yn(B,2))}),Gf=Fr(function(w){var B=WA(w);return B=typeof B=="function"?B:i,L0(to(w,x),i,B)}),tg=Fr(Ku);function o_(w,B){return B0(w||[],B||[],hi)}function A_(w,B){return B0(w||[],B||[],gc)}var ig=Fr(function(w){var B=w.length,$=B>1?w[B-1]:i;return $=typeof $=="function"?(w.pop(),$):i,Ad(w,$)});function ng(w){var B=E(w);return B.__chain__=!0,B}function l_(w,B){return B(w),w}function Hf(w,B){return B(w)}var u_=ou(function(w){var B=w.length,$=B?w[0]:0,Se=this.__wrapped__,rt=function(bt){return on(bt,w)};return B>1||this.__actions__.length||!(Se instanceof ae)||!Iu($)?this.thru(rt):(Se=Se.slice($,+$+(B?1:0)),Se.__actions__.push({func:Hf,args:[rt],thisArg:i}),new Z(Se,this.__chain__).thru(function(bt){return B&&!bt.length&&bt.push(i),bt}))});function ud(){return ng(this)}function Ju(){return new Z(this.value(),this.__chain__)}function rg(){this.__values__===i&&(this.__values__=qo(this.value()));var w=this.__index__>=this.__values__.length,B=w?i:this.__values__[this.__index__++];return{done:w,value:B}}function sg(){return this}function ag(w){for(var B,$=this;$ instanceof W;){var Se=J0($);Se.__index__=0,Se.__values__=i,B?rt.__wrapped__=Se:B=Se;var rt=Se;$=$.__wrapped__}return rt.__wrapped__=w,B}function og(){var w=this.__wrapped__;if(w instanceof ae){var B=w;return this.__actions__.length&&(B=new ae(this)),B=B.reverse(),B.__actions__.push({func:Hf,args:[Vf],thisArg:i}),new Z(B,this.__chain__)}return this.thru(Vf)}function Ag(){return D0(this.__wrapped__,this.__actions__)}var lg=Ws(function(w,B,$){jr.call(w,$)?++w[$]:tn(w,$,1)});function cd(w,B,$){var Se=u(w)?ll:ml;return $&&yA(w,B,$)&&(B=i),Se(w,Yn(B,3))}function Qf(w,B){var $=u(w)?to:bu;return $(w,Yn(B,3))}var ug=Mf(Hp),hd=Mf(Bh);function cg(w,B){return ss(qf(w,B),1)}function YA(w,B){return ss(qf(w,B),vt)}function Fh(w,B,$){return $=$===i?1:Vn($),ss(qf(w,B),$)}function fd(w,B){var $=u(w)?oa:qr;return $(w,Yn(B,3))}function dd(w,B){var $=u(w)?ba:QA;return $(w,Yn(B,3))}var hg=Ws(function(w,B,$){jr.call(w,$)?w[$].push(B):tn(w,$,[B])});function fg(w,B,$,Se){w=p(w)?w:xl(w),$=$&&!Se?Vn($):0;var rt=w.length;return $<0&&($=lr(rt+$,0)),Gi(w)?$<=rt&&w.indexOf(B,$)>-1:!!rt&&No(w,B,$)>-1}var dg=Fr(function(w,B,$){var Se=-1,rt=typeof B=="function",bt=p(w)?gi(w.length):[];return qr(w,function(Ht){bt[++Se]=rt?Dr(B,Ht,$):ZA(Ht,B,$)}),bt}),pg=Ws(function(w,B,$){tn(w,$,B)});function qf(w,B){var $=u(w)?us:vp;return $(w,Yn(B,3))}function gg(w,B,$,Se){return w==null?[]:(u(B)||(B=B==null?[]:[B]),$=Se?i:$,u($)||($=$==null?[]:[$]),k0(w,B,$))}var $u=Ws(function(w,B,$){w[$?0:1].push(B)},function(){return[[],[]]});function mg(w,B,$){var Se=u(w)?xo:mr,rt=arguments.length<3;return Se(w,Yn(B,4),$,rt,qr)}function _g(w,B,$){var Se=u(w)?IA:mr,rt=arguments.length<3;return Se(w,Yn(B,4),$,rt,QA)}function vg(w,B){var $=u(w)?to:bu;return $(w,Uh(Yn(B,3)))}function yg(w){var B=u(w)?Mt:aA;return B(w)}function c_(w,B,$){($?yA(w,B,$):B===i)?B=1:B=Vn(B);var Se=u(w)?zt:Kc;return Se(w,B)}function h_(w){var B=u(w)?Ft:E1;return B(w)}function bg(w){if(w==null)return 0;if(p(w))return Gi(w)?Ba(w):w.length;var B=Mo(w);return B==zi||B==Wi?w.size:Wc(w).length}function ah(w,B,$){var Se=u(w)?Hs:I1;return $&&yA(w,B,$)&&(B=i),Se(w,Yn(B,3))}var xg=Fr(function(w,B){if(w==null)return[];var $=B.length;return $>1&&yA(w,B[0],B[1])?B=[]:$>2&&yA(B[0],B[1],B[2])&&(B=[B[0]]),k0(w,ss(B,1),[])}),Sc=_u||function(){return ls.Date.now()};function wg(w,B){if(typeof B!="function")throw new Bn(v);return w=Vn(w),function(){if(--w<1)return B.apply(this,arguments)}}function Nh(w,B,$){return B=$?i:B,B=w&&B==null?w.length:B,Eu(w,Gt,i,i,i,i,B)}function Vh(w,B){var $;if(typeof B!="function")throw new Bn(v);return w=Vn(w),function(){return--w>0&&($=B.apply(this,arguments)),w<=1&&(B=i),$}}var oh=Fr(function(w,B,$){var Se=ke;if($.length){var rt=Qa($,vc(oh));Se|=yt}return Eu(w,Se,B,$,rt)}),Sg=Fr(function(w,B,$){var Se=ke|Qe;if($.length){var rt=Qa($,vc(Sg));Se|=yt}return Eu(B,Se,w,$,rt)});function Cg(w,B,$){B=$?i:B;var Se=Eu(w,ct,i,i,i,i,i,B);return Se.placeholder=Cg.placeholder,Se}function Eg(w,B,$){B=$?i:B;var Se=Eu(w,St,i,i,i,i,i,B);return Se.placeholder=Eg.placeholder,Se}function Ig(w,B,$){var Se,rt,bt,Ht,jt,ai,Ni=0,Ui=!1,qi=!1,Sn=!0;if(typeof w!="function")throw new Bn(v);B=Gs(B)||0,Tt($)&&(Ui=!!$.leading,qi="maxWait"in $,bt=qi?lr(Gs($.maxWait)||0,B):bt,Sn="trailing"in $?!!$.trailing:Sn);function Un(lo){var Du=Se,Tc=rt;return Se=rt=i,Ni=lo,Ht=w.apply(Tc,Du),Ht}function er(lo){return Ni=lo,jt=Dh(es,B),Ui?Un(lo):Ht}function Zr(lo){var Du=lo-ai,Tc=lo-Ni,Oy=B-Du;return qi?ns(Oy,bt-Tc):Oy}function tr(lo){var Du=lo-ai,Tc=lo-Ni;return ai===i||Du>=B||Du<0||qi&&Tc>=bt}function es(){var lo=Sc();if(tr(lo))return hs(lo);jt=Dh(es,Zr(lo))}function hs(lo){return jt=i,Sn&&Se?Un(lo):(Se=rt=i,Ht)}function Ql(){jt!==i&&wh(jt),Ni=0,Se=ai=rt=jt=i}function $A(){return jt===i?Ht:hs(Sc())}function ql(){var lo=Sc(),Du=tr(lo);if(Se=arguments,rt=this,ai=lo,Du){if(jt===i)return er(ai);if(qi)return wh(jt),jt=Dh(es,B),Un(ai)}return jt===i&&(jt=Dh(es,B)),Ht}return ql.cancel=Ql,ql.flush=$A,ql}var Ah=Fr(function(w,B){return Wn(w,1,B)}),Po=Fr(function(w,B,$){return Wn(w,Gs(B)||0,$)});function ec(w){return Eu(w,Je)}function lh(w,B){if(typeof w!="function"||B!=null&&typeof B!="function")throw new Bn(v);var $=function(){var Se=arguments,rt=B?B.apply(this,Se):Se[0],bt=$.cache;if(bt.has(rt))return bt.get(rt);var Ht=w.apply(this,Se);return $.cache=bt.set(rt,Ht)||bt,Ht};return $.cache=new(lh.Cache||f),$}lh.Cache=f;function Uh(w){if(typeof w!="function")throw new Bn(v);return function(){var B=arguments;switch(B.length){case 0:return!w.call(this);case 1:return!w.call(this,B[0]);case 2:return!w.call(this,B[0],B[1]);case 3:return!w.call(this,B[0],B[1],B[2])}return!w.apply(this,B)}}function Tg(w){return Vh(2,w)}var pd=T1(function(w,B){B=B.length==1&&u(B[0])?us(B[0],On(Yn())):us(ss(B,1),On(Yn()));var $=B.length;return Fr(function(Se){for(var rt=-1,bt=ns(Se.length,$);++rt<bt;)Se[rt]=B[rt].call(this,Se[rt]);return Dr(w,this,Se)})}),gd=Fr(function(w,B){var $=Qa(B,vc(gd));return Eu(w,yt,i,B,$)}),md=Fr(function(w,B){var $=Qa(B,vc(md));return Eu(w,xe,i,B,$)}),kg=ou(function(w,B){return Eu(w,Ve,i,i,i,B)});function f_(w,B){if(typeof w!="function")throw new Bn(v);return B=B===i?B:Vn(B),Fr(w,B)}function Mg(w,B){if(typeof w!="function")throw new Bn(v);return B=B==null?0:lr(Vn(B),0),Fr(function($){var Se=$[B],rt=su($,0,B);return Se&&io(rt,Se),Dr(w,this,rt)})}function _d(w,B,$){var Se=!0,rt=!0;if(typeof w!="function")throw new Bn(v);return Tt($)&&(Se="leading"in $?!!$.leading:Se,rt="trailing"in $?!!$.trailing:rt),Ig(w,B,{leading:Se,maxWait:B,trailing:rt})}function vd(w){return Nh(w,1)}function Pg(w,B){return gd(O0(B),w)}function Gh(){if(!arguments.length)return[];var w=arguments[0];return u(w)?w:[w]}function yd(w){return cn(w,se)}function Dg(w,B){return B=typeof B=="function"?B:i,cn(w,se,B)}function bd(w){return cn(w,J|se)}function Zf(w,B){return B=typeof B=="function"?B:i,cn(w,J|se,B)}function Hh(w,B){return B==null||Tn(w,B,Ys(B))}function XA(w,B){return w===B||w!==w&&B!==B}var xd=ih(Qu),wd=ih(function(w,B){return w>=B}),Cc=jA(function(){return arguments}())?jA:function(w){return Dt(w)&&jr.call(w,"callee")&&!gA.call(w,"callee")},u=gi.isArray,a=tA?On(tA):PA;function p(w){return w!=null&&Ct(w.length)&&!At(w)}function x(w){return Dt(w)&&p(w)}function L(w){return w===!0||w===!1||Dt(w)&&pa(w)==Di}var V=fl||T_,G=aa?On(aa):vl;function ee(w){return Dt(w)&&w.nodeType===1&&!Ki(w)}function le(w){if(w==null)return!0;if(p(w)&&(u(w)||typeof w=="string"||typeof w.splice=="function"||V(w)||xn(w)||Cc(w)))return!w.length;var B=Mo(w);if(B==zi||B==Wi)return!w.size;if(rh(w))return!Wc(w).length;for(var $ in w)if(jr.call(w,$))return!1;return!0}function _e(w,B){return xu(w,B)}function Pe(w,B,$){$=typeof $=="function"?$:i;var Se=$?$(w,B):i;return Se===i?xu(w,B,i,$):!!Se}function Ge(w){if(!Dt(w))return!1;var B=pa(w);return B==ni||B==Lt||typeof w.message=="string"&&typeof w.name=="string"&&!Ki(w)}function it(w){return typeof w=="number"&&iu(w)}function At(w){if(!Tt(w))return!1;var B=pa(w);return B==si||B==Oi||B==Wt||B==ar}function ht(w){return typeof w=="number"&&w==Vn(w)}function Ct(w){return typeof w=="number"&&w>-1&&w%1==0&&w<=dt}function Tt(w){var B=typeof w;return w!=null&&(B=="object"||B=="function")}function Dt(w){return w!=null&&typeof w=="object"}var Yt=La?On(La):w1;function Qt(w,B){return w===B||Sf(w,B,H0(B))}function Kt(w,B,$){return $=typeof $=="function"?$:i,Sf(w,B,H0(B),$)}function fi(w){return An(w)&&w!=+w}function Li(w){if(j0(w))throw new Bt(h);return ga(w)}function hn(w){return w===null}function Cn(w){return w==null}function An(w){return typeof w=="number"||Dt(w)&&pa(w)==oi}function Ki(w){if(!Dt(w)||pa(w)!=ki)return!1;var B=hl(w);if(B===null)return!0;var $=jr.call(B,"constructor")&&B.constructor;return typeof $=="function"&&$ instanceof $&&cl.call($)==rA}var Zi=yo?On(yo):E0;function _n(w){return ht(w)&&w>=-dt&&w<=dt}var Ji=zo?On(zo):_p;function Gi(w){return typeof w=="string"||!u(w)&&Dt(w)&&pa(w)==ir}function yn(w){return typeof w=="symbol"||Dt(w)&&pa(w)==gn}var xn=VA?On(VA):fc;function pr(w){return w===i}function Rs(w){return Dt(w)&&Mo(w)==an}function Us(w){return Dt(w)&&pa(w)==d}var Oa=ih(Cf),DA=ih(function(w,B){return w<=B});function qo(w){if(!w)return[];if(p(w))return Gi(w)?Bs(w):AA(w);if(GA&&w[GA])return Ss(w[GA]());var B=Mo(w),$=B==zi?ms:B==Wi?br:xl;return $(w)}function Cs(w){if(!w)return w===0?w:0;if(w=Gs(w),w===vt||w===-vt){var B=w<0?-1:1;return B*_t}return w===w?w:0}function Vn(w){var B=Cs(w),$=B%1;return B===B?$?B-$:B:0}function Ao(w){return w?mn(Vn(w),0,di):0}function Gs(w){if(typeof w=="number")return w;if(yn(w))return ei;if(Tt(w)){var B=typeof w.valueOf=="function"?w.valueOf():w;w=Tt(B)?B+"":B}if(typeof w!="string")return w===0?w:+w;w=Ar(w);var $=Vt.test(w);return $||Ei.test(w)?EA(w.slice(2),$?2:8):ui.test(w)?ei:+w}function Zo(w){return au(w,SA(w))}function za(w){return w?mn(Vn(w),-dt,dt):w===0?w:0}function Jn(w){return w==null?"":vA(w)}var jo=Cu(function(w,B){if(rh(B)||p(B)){au(B,Ys(B),w);return}for(var $ in B)jr.call(B,$)&&hi(w,$,B[$])}),Wo=Cu(function(w,B){au(B,SA(B),w)}),qa=Cu(function(w,B,$,Se){au(B,SA(B),w,Se)}),xA=Cu(function(w,B,$,Se){au(B,Ys(B),w,Se)}),wA=ou(on);function Fa(w,B){var $=H(w);return B==null?$:Dn($,B)}var Ir=Fr(function(w,B){w=ln(w);var $=-1,Se=B.length,rt=Se>2?B[2]:i;for(rt&&yA(B[0],B[1],rt)&&(Se=1);++$<Se;)for(var bt=B[$],Ht=SA(bt),jt=-1,ai=Ht.length;++jt<ai;){var Ni=Ht[jt],Ui=w[Ni];(Ui===i||XA(Ui,Js[Ni])&&!jr.call(w,Ni))&&(w[Ni]=bt[Ni])}return w}),Yo=Fr(function(w){return w.push(i,Dp),Dr(Rg,i,w)});function Do(w,B){return Kn(w,Yn(B,3),ko)}function Na(w,B){return Kn(w,Yn(B,3),js)}function yl(w,B){return w==null?w:Ra(w,Yn(B,3),SA)}function Vl(w,B){return w==null?w:To(w,Yn(B,3),SA)}function Ul(w,B){return w&&ko(w,Yn(B,3))}function Mu(w,B){return w&&js(w,Yn(B,3))}function bl(w){return w==null?[]:ua(w,Ys(w))}function KA(w){return w==null?[]:ua(w,SA(w))}function Xo(w,B,$){var Se=w==null?i:Ea(w,B);return Se===i?$:Se}function Pu(w,B){return w!=null&&Q0(w,B,xf)}function Ec(w,B){return w!=null&&Q0(w,B,wf)}var Lg=Tp(function(w,B,$){B!=null&&typeof B.toString!="function"&&(B=ao.call(B)),w[B]=$},w_(wl)),Sd=Tp(function(w,B,$){B!=null&&typeof B.toString!="function"&&(B=ao.call(B)),jr.call(w,B)?w[B].push($):w[B]=[$]},Yn),Cd=Fr(ZA);function Ys(w){return p(w)?Ut(w):Wc(w)}function SA(w){return p(w)?Ut(w,!0):I0(w)}function Bg(w,B){var $={};return B=Yn(B,3),ko(w,function(Se,rt,bt){tn($,B(Se,rt,bt),Se)}),$}function d_(w,B){var $={};return B=Yn(B,3),ko(w,function(Se,rt,bt){tn($,rt,B(Se,rt,bt))}),$}var p_=Cu(function(w,B,$){Yc(w,B,$)}),Rg=Cu(function(w,B,$,Se){Yc(w,B,$,Se)}),g_=ou(function(w,B){var $={};if(w==null)return $;var Se=!1;B=us(B,function(bt){return bt=Zu(bt,w),Se||(Se=bt.length>1),bt}),au(w,U0(w),$),Se&&($=cn($,J|oe|se,L1));for(var rt=B.length;rt--;)xh($,B[rt]);return $});function m_(w,B){return Og(w,Uh(Yn(B)))}var __=ou(function(w,B){return w==null?{}:bp(w,B)});function Og(w,B){if(w==null)return{};var $=us(U0(w),function(Se){return[Se]});return B=Yn(B),dc(w,$,function(Se,rt){return B(Se,rt[0])})}function v_(w,B,$){B=Zu(B,w);var Se=-1,rt=B.length;for(rt||(rt=1,w=i);++Se<rt;){var bt=w==null?i:w[Br(B[Se])];bt===i&&(Se=rt,bt=$),w=At(bt)?bt.call(w):bt}return w}function Gl(w,B,$){return w==null?w:gc(w,B,$)}function jf(w,B,$,Se){return Se=typeof Se=="function"?Se:i,w==null?w:gc(w,B,$,Se)}var Ed=V0(Ys),zg=V0(SA);function y_(w,B,$){var Se=u(w),rt=Se||V(w)||xn(w);if(B=Yn(B,4),$==null){var bt=w&&w.constructor;rt?$=Se?new bt:[]:Tt(w)?$=At(bt)?H(hl(w)):{}:$={}}return(rt?oa:ko)(w,function(Ht,jt,ai){return B($,Ht,jt,ai)}),$}function b_(w,B){return w==null?!0:xh(w,B)}function Ko(w,B,$){return w==null?w:Jc(w,B,O0($))}function JA(w,B,$,Se){return Se=typeof Se=="function"?Se:i,w==null?w:Jc(w,B,O0($),Se)}function xl(w){return w==null?[]:wo(w,Ys(w))}function Hl(w){return w==null?[]:wo(w,SA(w))}function Ic(w,B,$){return $===i&&($=B,B=i),$!==i&&($=Gs($),$=$===$?$:0),B!==i&&(B=Gs(B),B=B===B?B:0),mn(Gs(w),B,$)}function lu(w,B,$){return B=Cs(B),$===i?($=B,B=0):$=Cs($),w=Gs(w),C0(w,B,$)}function N8(w,B,$){if($&&typeof $!="boolean"&&yA(w,B,$)&&(B=$=i),$===i&&(typeof B=="boolean"?($=B,B=i):typeof w=="boolean"&&($=w,w=i)),w===i&&B===i?(w=0,B=1):(w=Cs(w),B===i?(B=w,w=0):B=Cs(B)),w>B){var Se=w;w=B,B=Se}if($||w%1||B%1){var rt=zn();return ns(w+rt*(B-w+eA("1e-"+((rt+"").length-1))),B)}return Xc(w,B)}var V8=mc(function(w,B,$){return B=B.toLowerCase(),w+($?Py(B):B)});function Py(w){return x_(Jn(w).toLowerCase())}function Dy(w){return w=Jn(w),w&&w.replace(pi,Kr).replace(Nn,"")}function U8(w,B,$){w=Jn(w),B=vA(B);var Se=w.length;$=$===i?Se:mn(Vn($),0,Se);var rt=$;return $-=B.length,$>=0&&w.slice($,rt)==B}function G8(w){return w=Jn(w),w&&ue.test(w)?w.replace(Ue,Qs):w}function H8(w){return w=Jn(w),w&&Be.test(w)?w.replace(ze,"\\$&"):w}var Q8=mc(function(w,B,$){return w+($?"-":"")+B.toLowerCase()}),q8=mc(function(w,B,$){return w+($?" ":"")+B.toLowerCase()}),Z8=eh("toLowerCase");function j8(w,B,$){w=Jn(w),B=Vn(B);var Se=B?Ba(w):0;if(!B||Se>=B)return w;var rt=(B-Se)/2;return Df(la(rt),$)+w+Df(HA(rt),$)}function W8(w,B,$){w=Jn(w),B=Vn(B);var Se=B?Ba(w):0;return B&&Se<B?w+Df(B-Se,$):w}function Y8(w,B,$){w=Jn(w),B=Vn(B);var Se=B?Ba(w):0;return B&&Se<B?Df(B-Se,$)+w:w}function X8(w,B,$){return $||B==null?B=0:B&&(B=+B),da(Jn(w).replace(Ye,""),B||0)}function K8(w,B,$){return($?yA(w,B,$):B===i)?B=1:B=Vn(B),If(Jn(w),B)}function J8(){var w=arguments,B=Jn(w[0]);return w.length<3?B:B.replace(w[1],w[2])}var $8=mc(function(w,B,$){return w+($?"_":"")+B.toLowerCase()});function e6(w,B,$){return $&&typeof $!="number"&&yA(w,B,$)&&(B=$=i),$=$===i?di:$>>>0,$?(w=Jn(w),w&&(typeof B=="string"||B!=null&&!Zi(B))&&(B=vA(B),!B&&dA(w))?su(Bs(w),0,$):w.split(B,$)):[]}var t6=mc(function(w,B,$){return w+($?" ":"")+x_(B)});function i6(w,B,$){return w=Jn(w),$=$==null?0:mn(Vn($),0,w.length),B=vA(B),w.slice($,$+B.length)==B}function n6(w,B,$){var Se=E.templateSettings;$&&yA(w,B,$)&&(B=i),w=Jn(w),B=qa({},B,Se,Pp);var rt=qa({},B.imports,Se.imports,Pp),bt=Ys(rt),Ht=wo(rt,bt),jt,ai,Ni=0,Ui=B.interpolate||Rt,qi="__p += '",Sn=Pn((B.escape||Rt).source+"|"+Ui.source+"|"+(Ui===he?Zt:Rt).source+"|"+(B.evaluate||Rt).source+"|$","g"),Un="//# sourceURL="+(jr.call(B,"sourceURL")?(B.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++_o+"]")+`
`;w.replace(Sn,function(tr,es,hs,Ql,$A,ql){return hs||(hs=Ql),qi+=w.slice(Ni,ql).replace(Yi,kA),es&&(jt=!0,qi+=`' +
__e(`+es+`) +
'`),$A&&(ai=!0,qi+=`';
`+$A+`;
__p += '`),hs&&(qi+=`' +
((__t = (`+hs+`)) == null ? '' : __t) +
'`),Ni=ql+tr.length,tr}),qi+=`';
`;var er=jr.call(B,"variable")&&B.variable;if(!er)qi=`with (obj) {
`+qi+`
}
`;else if(n.test(er))throw new Bt(o);qi=(ai?qi.replace(Te,""):qi).replace(Ce,"$1").replace(je,"$1;"),qi="function("+(er||"obj")+`) {
`+(er?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(jt?", __e = _.escape":"")+(ai?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+qi+`return __p
}`;var Zr=By(function(){return ii(bt,Un+"return "+qi).apply(i,Ht)});if(Zr.source=qi,Ge(Zr))throw Zr;return Zr}function r6(w){return Jn(w).toLowerCase()}function s6(w){return Jn(w).toUpperCase()}function a6(w,B,$){if(w=Jn(w),w&&($||B===i))return Ar(w);if(!w||!(B=vA(B)))return w;var Se=Bs(w),rt=Bs(B),bt=no(Se,rt),Ht=iA(Se,rt)+1;return su(Se,bt,Ht).join("")}function o6(w,B,$){if(w=Jn(w),w&&($||B===i))return w.slice(0,qs(w)+1);if(!w||!(B=vA(B)))return w;var Se=Bs(w),rt=iA(Se,Bs(B))+1;return su(Se,0,rt).join("")}function A6(w,B,$){if(w=Jn(w),w&&($||B===i))return w.replace(Ye,"");if(!w||!(B=vA(B)))return w;var Se=Bs(w),rt=no(Se,Bs(B));return su(Se,rt).join("")}function l6(w,B){var $=et,Se=lt;if(Tt(B)){var rt="separator"in B?B.separator:rt;$="length"in B?Vn(B.length):$,Se="omission"in B?vA(B.omission):Se}w=Jn(w);var bt=w.length;if(dA(w)){var Ht=Bs(w);bt=Ht.length}if($>=bt)return w;var jt=$-Ba(Se);if(jt<1)return Se;var ai=Ht?su(Ht,0,jt).join(""):w.slice(0,jt);if(rt===i)return ai+Se;if(Ht&&(jt+=ai.length-jt),Zi(rt)){if(w.slice(jt).search(rt)){var Ni,Ui=ai;for(rt.global||(rt=Pn(rt.source,Jn(Jt.exec(rt))+"g")),rt.lastIndex=0;Ni=rt.exec(Ui);)var qi=Ni.index;ai=ai.slice(0,qi===i?jt:qi)}}else if(w.indexOf(vA(rt),jt)!=jt){var Sn=ai.lastIndexOf(rt);Sn>-1&&(ai=ai.slice(0,Sn))}return ai+Se}function u6(w){return w=Jn(w),w&&de.test(w)?w.replace(Ne,so):w}var c6=mc(function(w,B,$){return w+($?" ":"")+B.toUpperCase()}),x_=eh("toUpperCase");function Ly(w,B,$){return w=Jn(w),B=$?i:B,B===i?wa(w)?Rl(w):ul(w):w.match(B)||[]}var By=Fr(function(w,B){try{return Dr(w,i,B)}catch($){return Ge($)?$:new Bt($)}}),h6=ou(function(w,B){return oa(B,function($){$=Br($),tn(w,$,oh(w[$],w))}),w});function f6(w){var B=w==null?0:w.length,$=Yn();return w=B?us(w,function(Se){if(typeof Se[1]!="function")throw new Bn(v);return[$(Se[0]),Se[1]]}):[],Fr(function(Se){for(var rt=-1;++rt<B;){var bt=w[rt];if(Dr(bt[0],this,Se))return Dr(bt[1],this,Se)}})}function d6(w){return $n(cn(w,J))}function w_(w){return function(){return w}}function p6(w,B){return w==null||w!==w?B:w}var g6=Pf(),m6=Pf(!0);function wl(w){return w}function S_(w){return qu(typeof w=="function"?w:cn(w,J))}function _6(w){return T0(cn(w,J))}function v6(w,B){return yp(w,cn(B,J))}var y6=Fr(function(w,B){return function($){return ZA($,w,B)}}),b6=Fr(function(w,B){return function($){return ZA(w,$,B)}});function C_(w,B,$){var Se=Ys(B),rt=ua(B,Se);$==null&&!(Tt(B)&&(rt.length||!Se.length))&&($=B,B=w,w=this,rt=ua(B,Ys(B)));var bt=!(Tt($)&&"chain"in $)||!!$.chain,Ht=At(w);return oa(rt,function(jt){var ai=B[jt];w[jt]=ai,Ht&&(w.prototype[jt]=function(){var Ni=this.__chain__;if(bt||Ni){var Ui=w(this.__wrapped__),qi=Ui.__actions__=AA(this.__actions__);return qi.push({func:ai,args:arguments,thisArg:w}),Ui.__chain__=Ni,Ui}return ai.apply(w,io([this.value()],arguments))})}),w}function x6(){return ls._===this&&(ls._=un),this}function E_(){}function w6(w){return w=Vn(w),Fr(function(B){return Ef(B,w)})}var S6=_c(us),C6=_c(ll),E6=_c(Hs);function Ry(w){return q0(w)?Qr(Br(w)):C1(w)}function I6(w){return function(B){return w==null?i:Ea(w,B)}}var T6=kp(),k6=kp(!0);function I_(){return[]}function T_(){return!1}function M6(){return{}}function P6(){return""}function D6(){return!0}function L6(w,B){if(w=Vn(w),w<1||w>dt)return[];var $=di,Se=ns(w,di);B=Yn(B),w-=di;for(var rt=Uo(Se,B);++$<w;)B($);return rt}function B6(w){return u(w)?us(w,Br):yn(w)?[w]:AA(K0(Jn(w)))}function R6(w){var B=++Hu;return Jn(w)+B}var O6=Th(function(w,B){return w+B},0),z6=kh("ceil"),F6=Th(function(w,B){return w/B},1),N6=kh("floor");function V6(w){return w&&w.length?qA(w,wl,Qu):i}function U6(w,B){return w&&w.length?qA(w,Yn(B,2),Qu):i}function G6(w){return Hr(w,wl)}function H6(w,B){return Hr(w,Yn(B,2))}function Q6(w){return w&&w.length?qA(w,wl,Cf):i}function q6(w,B){return w&&w.length?qA(w,Yn(B,2),Cf):i}var Z6=Th(function(w,B){return w*B},1),j6=kh("round"),W6=Th(function(w,B){return w-B},0);function Y6(w){return w&&w.length?Vo(w,wl):0}function X6(w,B){return w&&w.length?Vo(w,Yn(B,2)):0}return E.after=wg,E.ary=Nh,E.assign=jo,E.assignIn=Wo,E.assignInWith=qa,E.assignWith=xA,E.at=wA,E.before=Vh,E.bind=oh,E.bindAll=h6,E.bindKey=Sg,E.castArray=Gh,E.chain=ng,E.chunk=ku,E.compact=sh,E.concat=Gp,E.cond=f6,E.conforms=d6,E.constant=w_,E.countBy=lg,E.create=Fa,E.curry=Cg,E.curryRight=Eg,E.debounce=Ig,E.defaults=Ir,E.defaultsDeep=Yo,E.defer=Ah,E.delay=Po,E.difference=Q1,E.differenceBy=q1,E.differenceWith=Z1,E.drop=j1,E.dropRight=W1,E.dropRightWhile=Y1,E.dropWhile=X1,E.fill=K1,E.filter=Qf,E.flatMap=cg,E.flatMapDeep=YA,E.flatMapDepth=Fh,E.flatten=xc,E.flattenDeep=Qp,E.flattenDepth=$0,E.flip=ec,E.flow=g6,E.flowRight=m6,E.fromPairs=ed,E.functions=bl,E.functionsIn=KA,E.groupBy=hg,E.initial=$1,E.intersection=Zp,E.intersectionBy=jp,E.intersectionWith=bA,E.invert=Lg,E.invertBy=Sd,E.invokeMap=dg,E.iteratee=S_,E.keyBy=pg,E.keys=Ys,E.keysIn=SA,E.map=qf,E.mapKeys=Bg,E.mapValues=d_,E.matches=_6,E.matchesProperty=v6,E.memoize=lh,E.merge=p_,E.mergeWith=Rg,E.method=y6,E.methodOf=b6,E.mixin=C_,E.negate=Uh,E.nthArg=w6,E.omit=g_,E.omitBy=m_,E.once=Tg,E.orderBy=gg,E.over=S6,E.overArgs=pd,E.overEvery=C6,E.overSome=E6,E.partial=gd,E.partialRight=md,E.partition=$u,E.pick=__,E.pickBy=Og,E.property=Ry,E.propertyOf=I6,E.pull=Oh,E.pullAll=wc,E.pullAllBy=Ff,E.pullAllWith=Nf,E.pullAt=e_,E.range=T6,E.rangeRight=k6,E.rearg=kg,E.reject=vg,E.remove=Wp,E.rest=f_,E.reverse=Vf,E.sampleSize=c_,E.set=Gl,E.setWith=jf,E.shuffle=h_,E.slice=t_,E.sortBy=xg,E.sortedUniq=Kp,E.sortedUniqBy=zh,E.split=e6,E.spread=Mg,E.tail=Au,E.take=Xu,E.takeRight=Jp,E.takeRightWhile=rd,E.takeWhile=r_,E.tap=l_,E.throttle=_d,E.thru=Hf,E.toArray=qo,E.toPairs=Ed,E.toPairsIn=zg,E.toPath=B6,E.toPlainObject=Zo,E.transform=y_,E.unary=vd,E.union=s_,E.unionBy=Uf,E.unionWith=sd,E.uniq=a_,E.uniqBy=ad,E.uniqWith=od,E.unset=b_,E.unzip=Ku,E.unzipWith=Ad,E.update=Ko,E.updateWith=JA,E.values=xl,E.valuesIn=Hl,E.without=$p,E.words=Ly,E.wrap=Pg,E.xor=ld,E.xorBy=eg,E.xorWith=Gf,E.zip=tg,E.zipObject=o_,E.zipObjectDeep=A_,E.zipWith=ig,E.entries=Ed,E.entriesIn=zg,E.extend=Wo,E.extendWith=qa,C_(E,E),E.add=O6,E.attempt=By,E.camelCase=V8,E.capitalize=Py,E.ceil=z6,E.clamp=Ic,E.clone=yd,E.cloneDeep=bd,E.cloneDeepWith=Zf,E.cloneWith=Dg,E.conformsTo=Hh,E.deburr=Dy,E.defaultTo=p6,E.divide=F6,E.endsWith=U8,E.eq=XA,E.escape=G8,E.escapeRegExp=H8,E.every=cd,E.find=ug,E.findIndex=Hp,E.findKey=Do,E.findLast=hd,E.findLastIndex=Bh,E.findLastKey=Na,E.floor=N6,E.forEach=fd,E.forEachRight=dd,E.forIn=yl,E.forInRight=Vl,E.forOwn=Ul,E.forOwnRight=Mu,E.get=Xo,E.gt=xd,E.gte=wd,E.has=Pu,E.hasIn=Ec,E.head=qp,E.identity=wl,E.includes=fg,E.indexOf=J1,E.inRange=lu,E.invoke=Cd,E.isArguments=Cc,E.isArray=u,E.isArrayBuffer=a,E.isArrayLike=p,E.isArrayLikeObject=x,E.isBoolean=L,E.isBuffer=V,E.isDate=G,E.isElement=ee,E.isEmpty=le,E.isEqual=_e,E.isEqualWith=Pe,E.isError=Ge,E.isFinite=it,E.isFunction=At,E.isInteger=ht,E.isLength=Ct,E.isMap=Yt,E.isMatch=Qt,E.isMatchWith=Kt,E.isNaN=fi,E.isNative=Li,E.isNil=Cn,E.isNull=hn,E.isNumber=An,E.isObject=Tt,E.isObjectLike=Dt,E.isPlainObject=Ki,E.isRegExp=Zi,E.isSafeInteger=_n,E.isSet=Ji,E.isString=Gi,E.isSymbol=yn,E.isTypedArray=xn,E.isUndefined=pr,E.isWeakMap=Rs,E.isWeakSet=Us,E.join=td,E.kebabCase=Q8,E.last=WA,E.lastIndexOf=Yu,E.lowerCase=q8,E.lowerFirst=Z8,E.lt=Oa,E.lte=DA,E.max=V6,E.maxBy=U6,E.mean=G6,E.meanBy=H6,E.min=Q6,E.minBy=q6,E.stubArray=I_,E.stubFalse=T_,E.stubObject=M6,E.stubString=P6,E.stubTrue=D6,E.multiply=Z6,E.nth=Rh,E.noConflict=x6,E.noop=E_,E.now=Sc,E.pad=j8,E.padEnd=W8,E.padStart=Y8,E.parseInt=X8,E.random=N8,E.reduce=mg,E.reduceRight=_g,E.repeat=K8,E.replace=J8,E.result=v_,E.round=j6,E.runInContext=Xt,E.sample=yg,E.size=bg,E.snakeCase=$8,E.some=ah,E.sortedIndex=Yp,E.sortedIndexBy=Xp,E.sortedIndexOf=id,E.sortedLastIndex=nd,E.sortedLastIndexBy=i_,E.sortedLastIndexOf=n_,E.startCase=t6,E.startsWith=i6,E.subtract=W6,E.sum=Y6,E.sumBy=X6,E.template=n6,E.times=L6,E.toFinite=Cs,E.toInteger=Vn,E.toLength=Ao,E.toLower=r6,E.toNumber=Gs,E.toSafeInteger=za,E.toString=Jn,E.toUpper=s6,E.trim=a6,E.trimEnd=o6,E.trimStart=A6,E.truncate=l6,E.unescape=u6,E.uniqueId=R6,E.upperCase=c6,E.upperFirst=x_,E.each=fd,E.eachRight=dd,E.first=qp,C_(E,function(){var w={};return ko(E,function(B,$){jr.call(E.prototype,$)||(w[$]=B)}),w}(),{chain:!1}),E.VERSION=r,oa(["bind","bindKey","curry","curryRight","partial","partialRight"],function(w){E[w].placeholder=E}),oa(["drop","take"],function(w,B){ae.prototype[w]=function($){$=$===i?1:lr(Vn($),0);var Se=this.__filtered__&&!B?new ae(this):this.clone();return Se.__filtered__?Se.__takeCount__=ns($,Se.__takeCount__):Se.__views__.push({size:ns($,di),type:w+(Se.__dir__<0?"Right":"")}),Se},ae.prototype[w+"Right"]=function($){return this.reverse()[w]($).reverse()}}),oa(["filter","map","takeWhile"],function(w,B){var $=B+1,Se=$==Me||$==Fe;ae.prototype[w]=function(rt){var bt=this.clone();return bt.__iteratees__.push({iteratee:Yn(rt,3),type:$}),bt.__filtered__=bt.__filtered__||Se,bt}}),oa(["head","last"],function(w,B){var $="take"+(B?"Right":"");ae.prototype[w]=function(){return this[$](1).value()[0]}}),oa(["initial","tail"],function(w,B){var $="drop"+(B?"":"Right");ae.prototype[w]=function(){return this.__filtered__?new ae(this):this[$](1)}}),ae.prototype.compact=function(){return this.filter(wl)},ae.prototype.find=function(w){return this.filter(w).head()},ae.prototype.findLast=function(w){return this.reverse().find(w)},ae.prototype.invokeMap=Fr(function(w,B){return typeof w=="function"?new ae(this):this.map(function($){return ZA($,w,B)})}),ae.prototype.reject=function(w){return this.filter(Uh(Yn(w)))},ae.prototype.slice=function(w,B){w=Vn(w);var $=this;return $.__filtered__&&(w>0||B<0)?new ae($):(w<0?$=$.takeRight(-w):w&&($=$.drop(w)),B!==i&&(B=Vn(B),$=B<0?$.dropRight(-B):$.take(B-w)),$)},ae.prototype.takeRightWhile=function(w){return this.reverse().takeWhile(w).reverse()},ae.prototype.toArray=function(){return this.take(di)},ko(ae.prototype,function(w,B){var $=/^(?:filter|find|map|reject)|While$/.test(B),Se=/^(?:head|last)$/.test(B),rt=E[Se?"take"+(B=="last"?"Right":""):B],bt=Se||/^find/.test(B);rt&&(E.prototype[B]=function(){var Ht=this.__wrapped__,jt=Se?[1]:arguments,ai=Ht instanceof ae,Ni=jt[0],Ui=ai||u(Ht),qi=function(es){var hs=rt.apply(E,io([es],jt));return Se&&Sn?hs[0]:hs};Ui&&$&&typeof Ni=="function"&&Ni.length!=1&&(ai=Ui=!1);var Sn=this.__chain__,Un=!!this.__actions__.length,er=bt&&!Sn,Zr=ai&&!Un;if(!bt&&Ui){Ht=Zr?Ht:new ae(this);var tr=w.apply(Ht,jt);return tr.__actions__.push({func:Hf,args:[qi],thisArg:i}),new Z(tr,Sn)}return er&&Zr?w.apply(this,jt):(tr=this.thru(qi),er?Se?tr.value()[0]:tr.value():tr)})}),oa(["pop","push","shift","sort","splice","unshift"],function(w){var B=cs[w],$=/^(?:push|sort|unshift)$/.test(w)?"tap":"thru",Se=/^(?:pop|shift)$/.test(w);E.prototype[w]=function(){var rt=arguments;if(Se&&!this.__chain__){var bt=this.value();return B.apply(u(bt)?bt:[],rt)}return this[$](function(Ht){return B.apply(u(Ht)?Ht:[],rt)})}}),ko(ae.prototype,function(w,B){var $=E[B];if($){var Se=$.name+"";jr.call(Ho,Se)||(Ho[Se]=[]),Ho[Se].push({name:B,func:$})}}),Ho[Ih(i,Qe).name]=[{name:"wrapper",func:i}],ae.prototype.clone=Ie,ae.prototype.reverse=$e,ae.prototype.value=ot,E.prototype.at=u_,E.prototype.chain=ud,E.prototype.commit=Ju,E.prototype.next=rg,E.prototype.plant=ag,E.prototype.reverse=og,E.prototype.toJSON=E.prototype.valueOf=E.prototype.value=Ag,E.prototype.first=E.prototype.head,GA&&(E.prototype[GA]=sg),E},Sa=nA();Ga?((Ga.exports=Sa)._=Sa,fA._=Sa):ls._=Sa}).call(fh)})(Qm,Qm.exports);var TO=Qm.exports;function W5(e,t,i){let r=[e],c=[],h,v,o;for(;e=r.pop();)if(!(i&&i(e))&&(c.push(e),h=e.children,h))for(v=0,o=h.length;v<o;++v)r.push(h[v]);for(;e=c.pop();)t(e);return e}function kO(e,t,i){let r=[e],c,h;for(;e=r.pop();)if(!(i&&i(e))&&(t(e),c=e.children,c))for(h=c.length-1;h>=0;--h)r.push(c[h]);return e}function MO(e,t,i){let r,c=[e],h,v,o;do for(r=c.reverse(),c=[];e=r.pop();)if(!(i&&i(e))&&(t(e),h=e.children,h))for(v=0,o=h.length;v<o;++v)c.push(h[v]);while(c.length);return e}function PO(e){return W5(e,function(r){r.children&&(r.children[0].data.multiway_parent=r,r.children[1].data.multiway_parent=r.parent)}),TO.map(e.descendants(),r=>{let c=r.data.multiway_parent,h="unknown";return c&&(h=c.data.name),{source:r.data.multiway_parent,target:r,name:h}})}function DO(){let e=this.branch_length;return e?dv(this.nodes.descendants(),function(t){return!t.parent||!hf(e(t))}):!1}function LO(){let e=this.branch_length;return tl(this.nodes.descendants(),t=>e(t))}function _v(e,t){let i=e.data;if("attribute"in i&&i.attribute&&i.attribute.length){t>0&&(i.attribute=String(t));let r=parseFloat(i.attribute);if(!isNaN(r))return Math.max(0,r)}if(i.name=="root")return 0;console.warn("Undefined branch length at "+i.name+"!")}function BO(e){return arguments.length?(this.branch_length_accessor=e||_v,this):this.branch_length_accessor}function RO(e){let t=this.branch_length,i=tl(this.nodes.descendants(),function(v){return t(v)?t(v):null});const r=dy(i),c=R5(i);let h=function(v){return(v-c)/(r-c)};return Pl(this.nodes.descendants(),v=>{let o=t(v);o&&t(v,h(o))}),this}function OO(e){let t=this.branch_length;return Pl(this.nodes.descendants(),i=>{let r=t(i);r&&t(i,e(r))}),this}function zO(e){return arguments.length?(this.nodeLabel=e,this):this.nodeLabel}function FO(e,t){if(!(e instanceof tf))throw new Error("node needs to be an instance of a d3.hierarchy node!");let i=this.nodes.copy();if(t=t!==void 0?t:.5,e.parent){var r=tf({name:"new_root"});r.children=[e.copy()],r.data.__mapped_bl=void 0,i.each(O=>{O.data.__mapped_bl=this.branch_length_accessor(O)}),this.setBranchLength(O=>O.data.__mapped_bl);let h=e,v=e.parent,o=void 0,k=e.data.__mapped_bl===void 0?void 0:e.data.__mapped_bl*t;o=v.data.__mapped_bl,v.data.__mapped_bl=e.data.__mapped_bl===void 0?void 0:e.data.__mapped_bl-k,e.data.__mapped_bl=k;var c;if(v.parent){for(r.children.push(v);v.parent;){c=v.children.indexOf(h),v.parent.parent?v.children.splice(c,1,v.parent):v.children.splice(c,1);let O=v.parent.data.__mapped_bl;O!==void 0&&(v.parent.data.__mapped_bl=o,o=O),h=v,v=v.parent}c=v.children.indexOf(h),v.children.splice(c,1)}else c=v.children.indexOf(h),v.children.splice(c,1),o=v.data.__mapped_bl,h=r;if(v.children.length==1)o&&(v.children[0].data.__mapped_bl+=o),h.children=h.children.concat(v.children);else{let O=new tf({name:"__reroot_top_clade",__mapped_bl:o});ip(r.children[0],e),O.data.__mapped_bl=o,O.children=v.children.map(function(j){return j.parent=O,j}),O.parent=h,h.children.push(O)}}if(this.update(r),this.traverse_and_compute(h=>{Pl(h.children,v=>{v.parent=h})},"pre-order"),!hf(this.display)){let h=this.display.options;ma(this.display.container).select("svg").remove();let v=this.display.selection_attribute_name;delete this.display;let o=this.render(h);o.selectionLabel(v),o.update(),ma(o.container).node().appendChild(o.show()),ma(this.display.container).dispatch("reroot")}return this}function NO(e,t){if(e=e||"attribute",t=t||"y_scaled","parent"in this){let i=parseFloat(this[e]);this[t]=this.parent[t]+(isNaN(i)?.1:i)}else this[t]=0;return this[t]}function VO(e){let t=[];for(;e;)t.push(e),e=e.parent;return t}const UO=Object.freeze(Object.defineProperty({__proto__:null,pathToRoot:VO,reroot:FO,rootpath:NO},Symbol.toStringTag,{value:"Module"}));function Fc(e){return e.y}function rf(e){return e.x}function qm(e,t,i){return{x:i+e*Math.sin(t),y:i+e*Math.cos(t)}}function Kx(e,t,i,r,c,h){e.radius=t*(e.radius+i),e.angle=2*Math.PI*e.x*c[0]/h[0];let v=qm(e.radius,e.angle,r);return e.x=v.x,e.y=v.y,e}function Jx(e,t){var i=qm(t[0].radius,t[0].angle,e),r=qm(t[0].radius,t[1].angle,e);return"M "+Fc(i)+","+rf(i)+" A "+t[0].radius+","+t[0].radius+" 0,0, "+(t[1].angle>t[0].angle?1:0)+" "+Fc(r)+","+rf(r)+" L "+Fc(t[1])+","+rf(t[1])}function GO(e,t,i){var r=qm(e.target.radius+(e.source.radius-e.target.radius)*t,e.target.angle,i);return{x:Fc(r),y:rf(r)}}var $x=Av().x(function(e){return Fc(e)}).y(function(e){return rf(e)}).curve(PB);function ew(e,t){return{x:Fc(e.target)+(Fc(e.source)-Fc(e.target))*t,y:rf(e.target)}}function my(e){return e.tag||!1}function _y(e,t){return e[t]||!1}const ta={"tree-container":"phylotree-container","tree-scale-bar":"tree-scale-bar",node:"node","internal-node":"internal-node","tagged-node":"node-tagged","selected-node":"node-selected","collapsed-node":"node-collapsed","root-node":"root-node",branch:"branch","selected-branch":"branch-selected","tagged-branch":"branch-tagged","tree-selection-brush":"tree-selection-brush","branch-tracer":"branch-tracer",clade:"clade",node_text:"phylotree-node-text"};function HO(e){return arguments.length?(this.options["internal-names"]=e,this):this.options["internal-names"]}function QO(e){return arguments.length?(this.options["is-radial"]=e,this):this.options["is-radial"]}function qO(e){return arguments.length?(this.options["align-tips"]=e,this):this.options["align-tips"]}function ZO(e){return this.options["draw-size-bubbles"]&&this.options["bubble-styler"]?this.options["bubble-styler"](e):this.options["draw-size-bubbles"]?this.relative_nodeSpan(e)*this.scales[0]*.25:0}function jO(e){return this.options["is-radial"]?[(e.text_align=="end"?-1:1)*(this.radius_pad_for_bubbles-e.radius),0]:this.options["right-to-left"]?[this.right_most_leaf-e.screen_x,0]:[this.right_most_leaf-e.screen_x,0]}function WO(e){return arguments.length?(this.layout_listener_handler=e,this):this.layout_listener_handler}function YO(e){return arguments.length?(this.selection_attribute_name=e,this.syncEdgeLabels(),this):this.selection_attribute_name}function cm(e){return arguments.length?(typeof e=="string"&&e=="equal"?cm=function(t){return 1}:cm=e,this):cm}var vv={all:e=>!0,none:e=>!1,"all-leaf-nodes":e=>ka(e.target),"all-internal-nodes":e=>!ka(e.target)};function XO(e){return e?(this.selectionCallback=e,this):this.selectionCallback}const KO=Object.freeze(Object.defineProperty({__proto__:null,alignTips:qO,css_classes:ta,internalNames:HO,layoutHandler:WO,nodeBubbleSize:ZO,get nodeSpan(){return cm},predefined_selecters:vv,radial:QO,selectionCallback:XO,selectionLabel:YO,shiftTip:jO},Symbol.toStringTag,{value:"Module"}));function JO(e){return this.radial()?[(e.text_align=="end"?-1:1)*(this.radius_pad_for_bubbles-e.radius),0]:this.options["right-to-left"]?[this.right_most_leaf-e.screen_x,0]:[this.right_most_leaf-e.screen_x,0]}function $O(e,t,i){e=ma(e);var r=ka(t);r&&(e=e.attr("data-node-name",t.data.name));var c=e.selectAll("text").data([t]),h=e.selectAll("line");if(r||this.showInternalName(t)&&!ff(t))if(c=c.enter().append("text").classed(this.css_classes.node_text,!0).merge(c).on("click",o=>{this.handle_node_click(t,o)}).attr("dy",o=>this.shown_font_size*.33).text(o=>this.options["show-labels"]?this._nodeLabel(o):"").style("font-size",o=>this.ensure_size_is_in_px(this.shown_font_size)),this.radial()?c=c.attr("transform",o=>this.d3PhylotreeSvgRotate(o.text_angle)+this.d3PhylotreeSvgTranslate(this.alignTips()?this.shiftTip(o):null)).attr("text-anchor",o=>o.text_align):c=c.attr("text-anchor","start").attr("transform",o=>this.options.layout=="right-to-left"?this.d3PhylotreeSvgTranslate([-20,0]):this.d3PhylotreeSvgTranslate(this.alignTips()?this.shiftTip(o):null)),this.alignTips()?(h=h.data([t]),i?h=h.enter().append("line").classed(this.css_classes["branch-tracer"],!0).merge(h).attr("x1",o=>(o.text_align=="end"?-1:1)*this.nodeBubbleSize(t)).attr("x2",0).attr("y1",0).attr("y2",0).attr("x2",o=>this.options.layout=="right-to-left"?o.screen_x:this.shiftTip(o)[0]).attr("transform",o=>this.d3PhylotreeSvgRotate(o.text_angle)).attr("x2",o=>this.options.layout=="right-to-left"?o.screen_x:this.shiftTip(o)[0]).attr("transform",o=>this.d3PhylotreeSvgRotate(o.text_angle)):(h=h.enter().append("line").classed(this.css_classes["branch-tracer"],!0).merge(h).attr("x1",o=>(o.text_align=="end"?-1:1)*this.nodeBubbleSize(t)).attr("y2",0).attr("y1",0).attr("x2",o=>this.shiftTip(o)[0]),h.attr("transform",o=>this.d3PhylotreeSvgRotate(o.text_angle)))):h.remove(),this.options["draw-size-bubbles"]){var v=this.nodeBubbleSize(t);e.selectAll("circle").data([v]).enter().append("circle").attr("r",function(k){return k}),this.shown_font_size>=5&&(c=c.attr("dx",k=>(k.text_align=="end"?-1:1)*((this.alignTips()?0:v)+this.shown_font_size*.33)))}else this.shown_font_size>=5&&(c=c.attr("dx",o=>(o.text_align=="end"?-1:1)*this.shown_font_size*.33));if(!r){let o=e.selectAll("circle").data([t]).enter().append("circle"),k=this.node_circle_size()(t);k>0?o.merge(o).attr("r",O=>Math.min(this.shown_font_size*.75,k)).on("click",O=>{this.handle_node_click(t,O)}):o.remove()}return this.node_styler&&this.node_styler(e,t),t}function ez(){let e=this.phylotree.nodes.descendants();for(let t=e.length-1;t>=0;t-=1)ka(e[t])?e[t].hasHiddenNodes=e[t].notshown:e[t].hasHiddenNodes=e[t].children.reduce(function(i,r){return r.notshown||i},!1);return this}function tz(e){const t=this.internalNames();return t?typeof t=="function"?t(e):t:!1}function iz(e){return arguments.length?(typeof e=="string"&&e=="equal"?this.nodeSpan=function(t){return 1}:this.nodeSpan=e,this):this.nodeSpan}function nz(e){let t=ta[ka(e)?"node":"internal-node"];return my(e)&&(t+=" "+ta["tagged-node"]),_y(e,this.selection_attribute_name)&&(t+=" "+ta["selected-node"]),e.parent||(t+=" "+ta["root-node"]),(ff(e)||vy(e))&&(t+=" "+ta["collapsed-node"]),t}function yv(e){return!(e.hidden||e.notshown)}function Y5(e){return e.notshown}function vy(e){return e.hasHiddenNodes||!1}function ff(e){return e.collapsed||!1}function X5(e){return[e.node,e["internal-node"],e["collapsed-node"],e["tagged-node"],e["root-node"]].reduce(function(t,i,r,c){return t+="g."+i+(r<c.length-1?",":"")},"")}function rz(e,t){this.phylotree.clearInternalNodes(t);for(var i=this.phylotree.nodes.descendants().length-1;i>=0;i--){var r=this.phylotree.nodes.descendants()[i];ka(r)||_y(r,this.selection_attribute_name)||(r[this.selection_attribute_name]=e(r.children))}this.modifySelection((c,h)=>ka(c.target)?c.target[this.selection_attribute_name]:c.target[this.selection_attribute_name])}function K5(e){return e=e.data,ka(e)?e.name||"":this.showInternalName(e)?e.name:""}function sz(e){return arguments.length?(this._nodeLabel=e||K5,this.update(),this):this._nodeLabel}const az=Object.freeze(Object.defineProperty({__proto__:null,defNodeLabel:K5,drawNode:$O,hasHiddenNodes:vy,internalLabel:rz,isNodeCollapsed:ff,nodeCssSelectors:X5,nodeLabel:sz,nodeNotshown:Y5,nodeSpan:iz,nodeVisible:yv,reclassNode:nz,shiftTip:JO,showInternalName:tz,updateHasHiddenNodes:ez},Symbol.toStringTag,{value:"Module"}));function J5(e){return[e.clade].reduce(function(t,i,r,c){return t+="path."+i+(r<c.length-1?",":"")},"")}function oz(e){let t=this.svg.selectAll("."+this.css_classes["tree-container"]);var i=0;let r=t.selectAll(J5(this.css_classes)).data(this.phylotree.nodes.descendants().filter(ff),function(v){return v.id||(v.id=++i)}),c=function(){},h=void 0;this.radial()?(c=Av().curve(Nx).y(function(v){return v[0]}).x(function(v){return v[1]}),h=function(v,o,k,O,j){return o?[k.screen_y+(v[0]-O)/50,k.screen_x+(v[1]-j)/50]:[k.screen_y,k.screen_x]}):(c=Av().y(function(v){return v[0]}).x(function(v){return v[1]}).curve(Nx),h=function(v,o,k,O,j){return o?[k.screen_y+(v[0]-O)/50,k.screen_x+(v[1]-j)/50]:[k.screen_y,k.screen_x]}),r.exit().each(function(v){v.collapsed_clade=null}).remove(),e?r.enter().insert("path",":first-child").attr("class",this.css_classes.clade).merge(r).attr("d",function(v){if(v.collapsed_clade)return v.collapsed_clade;let o=v.collapsed[0][0],k=v.collapsed[0][1];return c(v.collapsed.map(function(O,j){return h(O,j,v,o,k)}))}).attr("d",function(v){return v.collapsed_clade=c(v.collapsed)}):r.enter().insert("path",":first-child").attr("class",this.css_classes.clade).merge(r).attr("d",function(v){return v.collapsed_clade?v.collapsed_clade:v.collapsed_clade=c(v.collapsed)})}const Az=Object.freeze(Object.defineProperty({__proto__:null,cladeCssSelectors:J5,updateCollapsedClades:oz},Symbol.toStringTag,{value:"Module"}));function lz(e,t,i){e=ma(e),e=e.attr("class",v=>this.reclassEdge(v)).on("click",v=>{this.modifySelection([t.target],this.selection_attribute_name),this.update()});let r=this.draw_branch([t.source,t.target]);i&&e.datum().existing_path&&(e=e.attr("d",function(v){return v.existing_path})),e=e.attr("d",r),t.existing_path=r;var c=this.phylotree.branch_length_accessor(t.target);if(c!==void 0){var h=e.selectAll("title");h.empty()&&(h=e.append("title")),h.text("Length = "+c)}else e.selectAll("title").remove();return this.edge_styler&&this.edge_styler(e,t,i),this.phylotree}function uz(e){let t=ta.branch;return my(e)&&(t+=" "+ta["tagged-branch"]),_y(e,this.selection_attribute_name)&&(t+=" "+ta["selected-branch"]),t}function cz(){this.links.forEach(e=>{e.target.data.annotation&&(e.target[e.target.data.annotation]=e.target.data.annotation)})}function hz(){if(this.links.forEach(e=>{e[this.selection_attribute_name]=e.target[this.selection_attribute_name]||!1,e.tag=e.target.tag||!1}),this.countHandler()){let e={};e[this.selection_attribute_name]=this.links.reduce((t,i)=>t+(i[this.selection_attribute_name]?1:0),0),e.tagged=this.links.reduce(function(t,i){return t+(my(i)?1:0)},0),this.countUpdate(this,e,this.countHandler())}}function bv(e){return!(e.target.hidden||e.target.notshown)}function xv(e){return[e.branch,e["selected-branch"],e["tagged-branch"]].reduce(function(t,i,r,c){return t+="path."+i+(r<c.length-1?",":"")},"")}function fz(e,t){return this.edge_placer(e,t)}const dz=Object.freeze(Object.defineProperty({__proto__:null,drawEdge:lz,edgeCssSelectors:xv,edgeVisible:bv,initializeEdgeLabels:cz,placeAlongAnEdge:fz,reclassEdge:uz,syncEdgeLabels:hz},Symbol.toStringTag,{value:"Module"}));let h1="phylotree.event";function pz(e){if(e.collapsed){e.collapsed=!1;let t=function(i){ka(i)||i.collapsed||i.children.forEach(t),i.hidden=!1};t(e)}else e.collapsed=!0;return this.placenodes(),this}function gz(e,t,i){let r=this.size;if(this.radial()){let c=this.pad_width(),h=this.options["top-bottom-spacing"]!="fit-to-size"?this.pad_height():0;r=[r[1]+2*c,r[0]+2*c+h],t&&t.selectAll("."+ta["tree-container"]).attr("transform","translate ("+c+","+(c+h)+")")}else r=[r[0]+(this.options["top-bottom-spacing"]!="fit-to-size"?this.pad_height():0),r[1]+(this.options["left-right-spacing"]!="fit-to-size"?this.pad_width():0)];return t&&(i&&(t=t.transition(100)),t.attr("height",r[0]).attr("width",r[1])),this.size=r,r}function mz(e,t){t=t||"y_scaled",t in this&&(this[t]*=e)}function wv(e){var t=new CustomEvent(h1,{detail:["refresh",e]});document.dispatchEvent(t)}function $5(e,t){var i=new CustomEvent(h1,{detail:["countUpdate",t,e.countHandler()]});document.dispatchEvent(i)}function _z(e){var t=new CustomEvent(h1,{detail:["layout",e,e.layoutHandler()]});document.dispatchEvent(t)}function e8(e){switch(e.detail[0]){case"refresh":e.detail[1].refresh();break;case"countUpdate":e.detail[2](e.detail[1]);break;case"layout":e.detail[2](e.detail[1])}return!0}function t8(){document.addEventListener(h1,e8,!1)}function vz(e){return e&&(e[0]!==null||e[1]!==null)?"translate ("+(e[0]!==null?e[0]:0)+","+(e[1]!==null?e[1]:0)+") ":""}function yz(e){return e!==null?"rotate ("+e+") ":""}const bz=Object.freeze(Object.defineProperty({__proto__:null,countUpdate:$5,d3PhylotreeAddEventListener:t8,d3PhylotreeEventListener:e8,d3PhylotreeSvgRotate:yz,d3PhylotreeSvgTranslate:vz,d3PhylotreeTriggerLayout:_z,rescale:mz,resizeSvg:gz,toggleCollapse:pz,triggerRefresh:wv},Symbol.toStringTag,{value:"Module"}));let tw="d3_layout_phylotree_context_menu";function xz(e,t,i,r,c){let h=ma(t).select("#"+tw);if(h.empty()&&(h=ma(t).append("div").attr("id",tw).attr("class","dropdown-menu").attr("role","menu")),h.selectAll("a").remove(),h.selectAll("h6").remove(),h.selectAll("div").remove(),e){if(!Hm([!!e.menu_items,r.hide,r.selectable,r.collapsible])||!r["show-menu"])return;ka(e)||(r.collapsible&&(h.append("a").attr("class","dropdown-item").attr("tabindex","-1").text(ff(e)?"Expand Subtree":"Collapse Subtree").on("click",O=>{h.style("display","none"),this.toggleCollapse(e).update()}),r.selectable&&(h.append("div").attr("class","dropdown-divider"),h.append("h6").attr("class","dropdown-header").text("Toggle selection"))),r.selectable&&(h.append("a").attr("class","dropdown-item").attr("tabindex","-1").text("All descendant branches").on("click",function(O){h.style("display","none"),i.modifySelection(i.selectAllDescendants(e,!0,!0))}),h.append("a").attr("class","dropdown-item").attr("tabindex","-1").text("All terminal branches").on("click",function(O){h.style("display","none"),i.modifySelection(i.selectAllDescendants(e,!0,!1))}),h.append("a").attr("class","dropdown-item").attr("tabindex","-1").text("All internal branches").on("click",function(O){h.style("display","none"),i.modifySelection(i.selectAllDescendants(e,!1,!0))}))),e.parent&&(r.selectable&&(h.append("a").attr("class","dropdown-item").attr("tabindex","-1").text("Incident branch").on("click",function(O){h.style("display","none"),i.modifySelection([e])}),h.append("a").attr("class","dropdown-item").attr("tabindex","-1").text("Path to root").on("click",O=>{h.style("display","none"),this.modifySelection(this.phylotree.pathToRoot(e))}),(r.reroot||r.hide)&&h.append("div").attr("class","dropdown-divider")),r.reroot&&h.append("a").attr("class","dropdown-item").attr("tabindex","-1").text("Reroot on this node").on("click",O=>{h.style("display","none"),this.phylotree.reroot(e),this.update()}),r.hide&&h.append("a").attr("class","dropdown-item").attr("tabindex","-1").text("Hide this "+(ka(e)?"node":"subtree")).on("click",O=>{h.style("display","none"),this.modifySelection([e],"notshown",!0,!0).updateHasHiddenNodes().update()})),vy(e)&&h.append("a").attr("class","dropdown-item").attr("tabindex","-1").text("Show all descendant nodes").on("click",function(O){h.style("display","none"),i.modifySelection(i.selectAllDescendants(e,!0,!0),"notshown",!0,!0,"false").updateHasHiddenNodes().update()});var v=[];if("menu_items"in e&&typeof e.menu_items=="object"&&e.menu_items.forEach(function(O){O.length==3&&(!O[2]||O[2](e))&&v.push([O[0],O[1]])}),v.length){const O=[r.hide,r.selectable,r.collapsible];Hm(O)&&h.append("div").attr("class","dropdown-divider"),v.forEach(function(j){h.append("a").attr("class","dropdown-item").attr("tabindex","-1").text(j[0](e)).on("click",Ac(j[1],e))})}let k=document.querySelector(t).getBoundingClientRect();h.style("position","absolute").style("left",""+(c.clientX-k.x+12)+"px").style("top",""+(c.clientY-k.y)+"px").style("display","block")}else h.style("display","none")}function wz(e,t,i,r){"menu_items"in e||(e.menu_items=[]),e.menu_items.some(function(c){return c[0]==t&&c[1]==i&&c[2]==r})||e.menu_items.push([t,i,r])}function Sz(e,t,i,r,c){if(t=t||this.selection_attribute_name,c=c||"toggle",this.options["restricted-selectable"].length)if(sc(Ro(vv),e))e=vv[e];else return;if((this.options["restricted-selectable"]||this.options.selectable)&&!this.options["binary-selectable"]){var h=!1;typeof e=="function"?this.links.forEach(function(o){let k=e(o);o[t]=o[t]||!1,o[t]!=k&&(o[t]=k,h=!0,o.target[t]=k)}):(e.forEach(function(o){var k;switch(c){case"true":k=!0;break;case"false":k=!1;break;default:k=!o[t];break}o[t]!=k&&(o[t]=k,h=!0)}),this.links.forEach(function(o){o[t]=o.target[t]}));var v;h&&(r||wv(this),this.countHandler&&(v={},v[t]=this.links.reduce(function(o,k){return o+(k[t]?1:0)},0),$5(this,v,this.countHandler)),i&&this.placenodes())}else this.options["binary-selectable"]&&(typeof e=="function"?this.links.forEach(function(o){var k=e(o);o[t]=o[t]||!1,o[t]!=k&&(o[t]=k,h=!0,o.target[t]=k),this.options["attribute-list"].forEach(function(O){O!=t&&o[t]===!0&&(o[O]=!1,o.target[O]=!1)})}):(e.forEach(function(o){var k;k=!o[t],o[t]!=k&&(o[t]=k,h=!0)}),this.links.forEach(function(o){o[t]=o.target[t],this.options["attribute-list"].forEach(function(k){k!=t&&o[t]!==!0&&(o[k]=!1,o.target[k]=!1)})})),h&&(r||wv(this),this.countHandler()&&(v={},v[t]=this.links.reduce(function(o,k){return o+(k[t]?1:0)},0),this.countUpdate(this,v,this.countHandler())),i&&this.placenodes()));return this.selectionCallback&&t!="tag"&&this.selectionCallback(this.getSelection()),this.refresh(),this.update(),this}function Cz(){return this.nodes.filter(e=>e[this.selection_attribute_name])}function Ez(e,t,i){let r=[];function c(h){ka(h)?t&&h!=e&&r.push(h):(i&&h!=e&&r.push(h),h.children.forEach(c))}return c(e),r}function Iz(e){return e?(this.selectionCallback=e,this):this.selectionCallback}const Tz=Object.freeze(Object.defineProperty({__proto__:null,addCustomMenu:wz,getSelection:Cz,modifySelection:Sz,nodeDropdownMenu:xz,selectAllDescendants:Ez,selectionCallback:Iz},Symbol.toStringTag,{value:"Module"}));function iw(e){return function(){return e}}class bf{constructor(t,i={}){this.css_classes=ta,this.phylotree=t,this.container=i.container,this.separation=function(c,h){return 0},this._nodeLabel=this.defNodeLabel,this.svg=null,this.selectionCallback=null,this.scales=[1,1],this.size=[1,1],this.fixed_width=[14,30],this.scale_bar_font_size=12,this.draw_branch=$x,this.draw_scale_bar=null,this.edge_placer=ew,this.count_listener_handler=function(){},this.layout_listener_handler=function(){},this.node_styler=void 0,this.edge_styler=void 0,this.selection_attribute_name="selected",this.right_most_leaf=0,this.label_width=0,this.radial_center=0,this.radius=1,this.radius_pad_for_bubbles=0,this.rescale_nodeSpan=1,this.relative_nodeSpan=function(c){return this.nodeSpan(c)/this.rescale_nodeSpan};let r={layout:"left-to-right",logger:console,branches:"step",scaling:!0,bootstrap:!1,"color-fill":!0,"font-size":14,"internal-names":!1,selectable:!0,"restricted-selectable":!1,collapsible:!0,"left-right-spacing":"fixed-step","top-bottom-spacing":"fixed-step","left-offset":0,"show-scale":"top","draw-size-bubbles":!1,"bubble-styler":this.radius_pad_for_bubbles,"binary-selectable":!1,"is-radial":!1,"attribute-list":[],"max-radius":768,"annular-limit":.38196601125010515,compression:.2,"align-tips":!1,"maximum-per-node-spacing":100,"minimum-per-node-spacing":2,"maximum-per-level-spacing":100,"minimum-per-level-spacing":10,node_circle_size:iw(3),transitions:null,brush:!0,reroot:!0,hide:!0,"label-nodes-with-name":!1,zoom:!1,"show-menu":!0,"show-labels":!0,"node-styler":null,"edge-styler":null,"node-span":null};this.ensure_size_is_in_px=function(c){return typeof c=="number"?c+"px":c},this.options=oy(i,r),this.font_size=this.options["font-size"],this.offsets=[0,this.font_size/2],this.shown_font_size=this.font_size,this.width=this.options.width||800,this.height=this.options.height||600,this.node_styler=this.options["node-styler"],this.edge_styler=this.options["edge-styler"],this.nodeSpan=this.options["node-span"],this.nodeSpan||(this.nodeSpan=function(c){return 1}),this.rescale_nodeSpan=this.phylotree.nodes.children.map(c=>{if(ka(c)||this.showInternalName(c))return this.nodeSpan(c)}).reduce(function(c,h){return Math.min(h,c||1e200)},null)||1,this.initialize_svg(this.container),this.links=this.phylotree.nodes.links(),this.initializeEdgeLabels(),this.update(),t8()}pad_height(){return this.draw_scale_bar?this.scale_bar_font_size+25:0}pad_width(){this.label_width=this._label_width(this.shown_font_size);const t=this.options["show-labels"]?this.label_width:0;return this.offsets[1]+this.options["left-offset"]+t}collapse_node(t){ff(t)||(t.collapsed=!0)}set_size(t){if(!arguments.length)return this.size;let i=t;return this.options["top-bottom-spacing"]!="fixed-step"&&(this.size[0]=i[0]),this.options["left-right-spacing"]!="fixed-step"&&(this.size[1]=i[1]),this}initialize_svg(t){return this.svg!==t&&(ma(t).select("svg").remove(),this.svg=T9("svg").attr("width",this.width).attr("height",this.height),this.set_size([this.height,this.width]),this.css_classes["tree-container"]=="phylotree-container"&&(this.svg.selectAll("*").remove(),this.svg.append("defs")),ma(this.container).on("click",i=>{this.handle_node_click(null)},!0)),this}update_layout(t,i){i&&(this.nodes=tf(t),this.nodes.each(function(r){r.id=null})),this.update(),this.syncEdgeLabels()}update(t){var i=this;this.placenodes(),t=this.transitions(t);let r=0,c=this.svg.selectAll("."+ta["tree-container"]).data([0]);if(c=c.enter().append("g").attr("class",ta["tree-container"]).merge(c).attr("transform",O=>this.d3PhylotreeSvgTranslate([this.offsets[1]+this.options["left-offset"],this.pad_height()])),this.draw_scale_bar){let O=this.svg.selectAll("."+ta["tree-scale-bar"]).data([0]);O.enter().append("g").attr("class",ta["tree-scale-bar"]).style("font-size",this.ensure_size_is_in_px(this.scale_bar_font_size)).merge(O).attr("transform",j=>this.d3PhylotreeSvgTranslate([this.offsets[1]+this.options["left-offset"],this.pad_height()-10])).call(this.draw_scale_bar),O.selectAll("text").style("text-anchor","end")}else this.svg.selectAll("."+ta["tree-scale-bar"]).remove();c=this.svg.selectAll("."+ta["tree-container"]).data([0]),this.updateCollapsedClades(t);let h=c.selectAll(xv(ta)).data(this.links.filter(bv),O=>O.target.id||(O.target.id=++r));h.exit().remove(),h=h.enter().insert("path",":first-child").merge(h).each(function(O){i.drawEdge(this,O,t)});let v=c.selectAll(X5(ta)).data(this.phylotree.nodes.descendants().filter(yv),O=>O.id||(O.id=++r));if(v.exit().remove(),v=v.enter().append("g").attr("class",this.reclassNode).merge(v).attr("transform",O=>{const j=this.options.layout=="right-to-left"&&ka(O);return O.screen_x=Fc(O),O.screen_y=rf(O),this.d3PhylotreeSvgTranslate([j?0:O.screen_x,O.screen_y])}).each(function(O){i.drawNode(this,O,t)}).attr("transform",O=>{if(!hf(O.screen_x)&&!hf(O.screen_y))return"translate("+O.screen_x+","+O.screen_y+")"}),this.options["label-nodes-with-name"]&&(v=v.attr("id",O=>"node-"+O.name)),this.resizeSvg(this.phylotree,this.svg,t),this.options.brush){var o=c.selectAll("."+ta["tree-selection-brush"]).data([0]).enter().insert("g",":first-child").attr("class",ta["tree-selection-brush"]),k=CD().on("brush",(O,j)=>{var J=O.selection,oe=this.links.filter(bv),se=oe.filter((be,qe)=>be.source.screen_x>=J[0][0]&&be.source.screen_x<=J[1][0]&&be.source.screen_y>=J[0][1]&&be.source.screen_y<=J[1][1]&&be.target.screen_x>=J[0][0]&&be.target.screen_x<=J[1][0]&&be.target.screen_y>=J[0][1]&&be.target.screen_y<=J[1][1]).map(be=>be.target);this.modifySelection(this.phylotree.links.map(be=>be.target),"tag",!1,se.length>0,"false"),this.modifySelection(se,"tag",!1,!1,"true")}).on("end",()=>{});o.call(k)}if(this.syncEdgeLabels(),this.options.zoom){let O=FB().scaleExtent([.1,10]).on("zoom",j=>{ma("."+ta["tree-container"]).attr("transform",J=>j.transform),ma("."+ta["tree-scale-bar"]).attr("transform",J=>{let oe=j.transform;return oe.y-=10,oe})});this.svg.call(O)}return this}_handle_single_node_layout(t){let i=this.nodeSpan(t)/this.rescale_nodeSpan;this.x=t.x=this.x+this.separation(this.last_node,t)+(this.last_span+i)*.5,this._extents[1][1]=Math.max(this._extents[1][1],t.y),this._extents[1][0]=Math.min(this._extents[1][0],t.y-i*.5),this.is_under_collapsed_parent?this._extents[0][1]=Math.max(this._extents[0][1],this.save_x+(t.x-this.save_x)*this.options.compression+this.save_span+(i*.5+this.separation(this.last_node,t))*this.options.compression):this._extents[0][1]=Math.max(this._extents[0][1],this.x+i*.5+this.separation(this.last_node,t)),this.last_node=t,this.last_span=i}tree_layout(t){if(Y5(t))return;let i=ka(t);t.text_angle=null,t.text_align=null,t.radius=null,t.angle=null;let r=!1;if(t.parent)if(this.do_scaling){if(r)return 0;if(t.y=this.phylotree.branch_length_accessor(t),typeof t.y>"u")return r=!0,0;t.y+=t.parent.y}else t.y=i?this.max_depth:t.depth;else this.x=0,t.y=0,this.last_node=null,this.last_span=0,this._extents=[[0,0],[0,0]];if(i&&this._handle_single_node_layout(t),!i)if(ff(t)&&!this.is_under_collapsed_parent){if(this.save_x=this.x,this.save_span=this.last_span*.5,this.is_under_collapsed_parent=!0,this.process_internal_node(t),this.is_under_collapsed_parent=!1,typeof t.x=="number"){t.x=this.save_x+(t.x-this.save_x)*this.options.compression+this.save_span,t.collapsed=[[t.x,t.y]];var c=h=>{h.hidden=!0,ka(h)?(this.x=h.x=this.save_x+(h.x-this.save_x)*this.options.compression+this.save_span,t.collapsed.push([h.x,h.y])):h.children.map(c)};this.x=this.save_x,c(t),t.collapsed.splice(1,0,[this.save_x,t.y]),t.collapsed.push([this.x,t.y]),t.collapsed.push([t.x,t.y]),t.hidden=!1}}else this.process_internal_node(t);return t.x}process_internal_node(t){let i=0;if(this.showInternalName(t)){let r=t.children.length/2>>0,c=0,h=!1;for(let v=0;v<t.children.length;v++)typeof this.tree_layout(t.children[v])=="number"&&c++,c>=r&&!h&&(this._handle_single_node_layout(t),h=!0);c==0?(t.notshown=!0,t.x=void 0):h||this._handle_single_node_layout(t)}else t.x=t.children.map(this.tree_layout.bind(this)).reduce((r,c)=>typeof c=="number"?r+c:(i+=1,r),0),i==t.children.length?(t.notshown=!0,t.x=void 0):t.x/=t.children.length-i}do_lr(t){if(this.radial()&&t&&(this.offsets[1]=0),this.options["left-right-spacing"]=="fixed-step")this.size[1]=this.max_depth*this.fixed_width[1],this.scales[1]=(this.size[1]-this.offsets[1]-this.options["left-offset"])/this._extents[1][1],this.label_width=this._label_width(this.shown_font_size),this.radial()&&(this.label_width*=2);else{this.label_width=this._label_width(this.shown_font_size),t=!0;let i=this.size[1]-this.offsets[1]-this.options["left-offset"];i*.5<this.label_width&&(this.shown_font_size*=i*.5/this.label_width,this.label_width=i*.5),this.scales[1]=(this.size[1]-this.offsets[1]-this.options["left-offset"]-this.label_width)/this._extents[1][1]}}placenodes(){this._extents=[[0,0],[0,0]],this.x=0,this.last_span=0,this.last_node=null,this.last_span=0,this.save_x=this.x,this.save_span=this.last_span*.5,this.do_scaling=this.options.scaling;let t=!1;this.is_under_collapsed_parent=!1,this.max_depth=1,this.phylotree.nodes.x=this.tree_layout(this.phylotree.nodes,this.do_scaling),this.max_depth=VM(this.phylotree.nodes.descendants(),r=>r.depth),this.do_scaling&&t&&(this.do_scaling=!1,this.phylotree.nodes.x=this.tree_layout(this.phylotree.nodes));let i=!1;if(this.draw_scale_bar=this.options["show-scale"]&&this.do_scaling,this.offsets[1]=Math.max(this.font_size,-this._extents[1][0]*this.fixed_width[0]),this.options["top-bottom-spacing"]=="fixed-step"?(this.size[0]=this._extents[0][1]*this.fixed_width[0],this.scales[0]=this.fixed_width[0]):(this.scales[0]=(this.size[0]-this.pad_height())/this._extents[0][1],i=!0),this.shown_font_size=Math.min(this.font_size,this.scales[0]),this.radial()){this.draw_branch=Ac(Jx,this.radial_center),this.edge_placer=GO;let r=null,c=null,h=null,v=0,o=this._extents[0][1]*this.scales[0],k=function(oe,se,be,qe,ke){return ke=ke||0,Math.sqrt((se-oe)*(se-oe)+2*(oe+ke)*(se+ke)*(1-Math.cos(be-qe)))},O=0;this.phylotree.nodes.each(oe=>{let se=oe.x*this.scales[0];oe.angle=2*Math.PI*se/o,oe.text_angle=oe.angle-Math.PI/2,oe.text_angle=oe.text_angle>0&&oe.text_angle<Math.PI,oe.text_align=oe.text_angle?"end":"start",oe.text_angle=(oe.text_angle?180:0)+oe.angle*180/Math.PI}),this.do_lr(i),this.phylotree.nodes.each(oe=>{oe.radius=oe.y*this.scales[1]/this.size[1],O=Math.max(oe.radius,O)});let j=0;this.phylotree.nodes.each(oe=>{if(!oe.children){let se=oe.x*this.scales[0];if(r!==null){let be=se-c,qe=k(oe.radius,h,oe.angle,r,j),ke=qe>0?be/qe:10*this.options["max-radius"];if(ke>this.options["max-radius"]){let Qe=be/this.options["max-radius"],We=oe.radius+h,ct=oe.radius*h-(Qe*Qe-(h-oe.radius)*(h-oe.radius))/2/(1-Math.cos(r-oe.angle)),St=Math.sqrt(We*We-4*ct);j=Math.min(this.options["annular-limit"]*O,(-We+St)/2),v=this.options["max-radius"]}else v=Math.max(v,ke)}r=oe.angle,c=se,h=oe.radius}}),this.radius=Math.min(this.options["max-radius"],Math.max(o/2/Math.PI,v)),i&&(this.radius=Math.min(this.radius,(Math.min(o,this._extents[1][1]*this.scales[1])-this.label_width)*.5-this.radius*j)),this.radial_center=this.radius_pad_for_bubbles=this.radius,this.draw_branch=Ac(Jx,this.radial_center);let J=1;j&&(J=O/(O+j),this.radius*=J),this.phylotree.nodes.each(oe=>{if(Kx(oe,this.radius,j,this.radial_center,this.scales,this.size),O=Math.max(O,oe.radius),this.options["draw-size-bubbles"]?this.radius_pad_for_bubbles=Math.max(this.radius_pad_for_bubbles,oe.radius+this.nodeBubbleSize(oe)):this.radius_pad_for_bubbles=Math.max(this.radius_pad_for_bubbles,oe.radius),oe.collapsed){oe.collapsed=oe.collapsed.map(be=>{let qe={};return qe.x=be[0],qe.y=be[1],qe=Kx(qe,this.radius,j,this.radial_center,this.scales,this.size),[qe.x,qe.y]});let se=oe.collapsed[1];oe.collapsed=oe.collapsed.filter(function(be,qe){return qe<3||qe>oe.collapsed.length-4?!0:Math.sqrt(Math.pow(be[0]-se[0],2)+Math.pow(be[1]-se[1],2))>3?(se=be,!0):!1})}}),this.size[0]=this.radial_center+this.radius/J,this.size[1]=this.radial_center+this.radius/J}else this.do_lr(),this.draw_branch=$x,this.edge_placer=ew,this.right_most_leaf=0,this.phylotree.nodes.each(r=>{if(r.x*=this.scales[0],r.y*=this.scales[1]*.8,this.options.layout=="right-to-left"&&(r.y=this._extents[1][1]*this.scales[1]-r.y),ka(r)&&(this.right_most_leaf=Math.max(this.right_most_leaf,r.y+this.nodeBubbleSize(r))),r.collapsed){r.collapsed.forEach(h=>{h[0]*=this.scales[0],h[1]*=this.scales[1]*.8});let c=r.collapsed[1][0];r.collapsed=r.collapsed.filter(function(h,v){return v<3||v>r.collapsed.length-4?!0:h[0]-c>3?(c=h[0],!0):!1})}});if(this.draw_scale_bar){let r,c;if(this.radial()){if(c=Math.min(this.radius/5,50),r=Math.pow(10,Math.ceil(Math.log(this._extents[1][1]*c/this.radius)/Math.log(10))),c=r*(this.radius/this._extents[1][1]),c<30){let o=Math.ceil(30/c);c*=o,r*=o}}else r=this._extents[1][1],c=this.size[1]-this.offsets[1]-this.options["left-offset"]-this.shown_font_size;let h=L4().domain([0,r]).range([0,c]),v=Yv(".2f");if(this.draw_scale_bar=WM().scale(h).tickFormat(function(o){return o===0?"":v(o)}),this.radial())this.draw_scale_bar.tickValues([r]);else{let o=function(O,j){return j?Math.round(O*(j=Math.pow(10,j)))/j:Math.round(O)},k=h.ticks();k=k.length>1?k[1]:k[0],this.draw_scale_bar.ticks(Math.min(10,o(c/(this.shown_font_size*v(k).length*2),0)))}}else this.draw_scale_bar=null;return this}spacing_x(t,i){return arguments.length?(this.fixed_width[0]!=t&&t>=this.options["minimum-per-node-spacing"]&&t<=this.options["maximum-per-node-spacing"]&&(this.fixed_width[0]=t,i||this.placenodes()),this):this.fixed_width[0]}spacing_y(t,i){return arguments.length?(this.fixed_width[1]!=t&&t>=this.options["minimum-per-level-spacing"]&&t<=this.options["maximum-per-level-spacing"]&&(this.fixed_width[1]=t,i||this.placenodes()),this):this.fixed_width[1]}_label_width(t){t=t||this.shown_font_size;let i=0;return this.phylotree.nodes.descendants().filter(yv).forEach(r=>{let c=12+this._nodeLabel(r).length*t*.8;r.angle!==null&&(c*=Math.max(Math.abs(Math.cos(r.angle)),Math.abs(Math.sin(r.angle)))),i=Math.max(c,i)}),i}font_size(t){return arguments.length?(this.font_size=t===void 0?12:t,this):this.font_size}scale_bar_font_size(t){return arguments.length?(this.scale_bar_font_size=t===void 0?12:t,this):this.scale_bar_font_size}node_circle_size(t,i){return arguments.length?(this.options.node_circle_size=iw(t===void 0?3:t),this):this.options.node_circle_size}css(t){if(arguments.length===0)return this.css_classes;if(arguments.length>2){var i={};return i[t[0]]=t[1],this.css(i)}for(var r in ta)r in t&&t[r]!=ta[r]&&(ta[r]=t[r]);return this}transitions(t){return t!==void 0?t:this.options.transitions!==null?this.options.transitions:this.phylotree.nodes.descendants().length<=300}css_classes(t,i){if(!arguments.length)return this.css_classes;let r=!1;for(var c in ta)c in t&&t[c]!=this.css_classes[c]&&(r=!0,this.css_classes[c]=t[c]);return i&&r&&this.layout(),this}layout(t){return this.svg?(this.svg.selectAll("."+this.css_classes["tree-container"]+",."+this.css_classes["tree-scale-bar"]+",."+this.css_classes["tree-selection-brush"]),this.d3PhylotreeTriggerLayout(this),this.update()):(this.d3PhylotreeTriggerLayout(this),this)}handle_node_click(t,i){this.nodeDropdownMenu(t,this.container,this,this.options,i)}refresh(){if(this.svg){let i=this.svg.selectAll("."+this.css_classes["tree-container"]).selectAll(xv(this.css_classes)).attr("class",this.reclassEdge.bind(this));this.edge_styler&&i.each(r=>{this.edge_styler(ma(this),r)})}return this}countHandler(t){return arguments.length?(this.count_listener_handler=t,this):this.count_listener_handler}style_nodes(t){return arguments.length?(this.node_styler=t,this):this.node_styler}style_edges(t){return arguments.length?(this.edge_styler=t.bind(this),this):this.edge_styler}itemSelected(t,i){return t[i]||!1}show(){return this.svg.node()}}Uu(bf.prototype,Az);Uu(bf.prototype,az);Uu(bf.prototype,dz);Uu(bf.prototype,bz);Uu(bf.prototype,Tz);Uu(bf.prototype,KO);function kz(e,t,i){return this.nodes.sum(function(r){return r.value}).sort(e),this.display&&(this.display.update_layout(this.nodes),this.display.update()),this}function Mz(e){var t;return e=e.map(function(i){return typeof i=="string"?i:i.data.name}),this.traverse_and_compute(function(i){i.children?i.parent?(i.data.mrca=G5(...i.descendants().map(r=>r.data.mrca)),!t&&i.data.mrca.length==e.length&&(t=i)):t||(t=i):i.data.mrca=H5([i.data.name],e)}),t}let hA=class{constructor(e,t={}){this.newick_string="",this.nodes=[],this.links=[],this.parsed_tags=[],this.partitions=[],this.branch_length_accessor=_v,this.branch_length=_v,this.logger=t.logger||console,this.selection_attribute_name="selected";var i=t.type||void 0,r=[],c=this;if(A1(i))i in s2?r=s2[i](e,t):c.logger.error("type "+i+" not in registry! Available types are "+Ro(s2));else if(zA(i))try{r=i(e,t)}catch{c.logger.error("Could not parse custom format!")}else e.name=="root"?r={json:e,error:null}:typeof e!="string"?r=e:e.contentType=="application/xml"?r=j5(e):(this.newick_string=e,r=sp(e,t));if(!r.json)c.nodes=[];else{c.nodes=tf(r.json);let h={};c.nodes.each(v=>{v.data.annotation&&(h[v.data.annotation]=!0)}),c.parsed_tags=Object.keys(h)}return c.links=c.nodes.links(),this.hasBranchLengths()||(console.warn("Phylotree User Warning : NO BRANCH LENGTHS DETECTED, SETTING ALL LENGTHS TO 1"),this.setBranchLength(h=>1)),c}json(e){var t=0;this.traverse_and_compute(function(r){r.json_export_index=t++},e);var i=new Array(t);return t=0,this.traverse_and_compute(function(r){let c=p5(r);delete c.json_export_index,r.parent&&(c.parent=r.parent.json_export_index),r.children&&(c.children=tl(r.children,function(h){return h.json_export_index})),i[t++]=c},e),this.traverse_and_compute(function(r){delete r.json_export_index},e),JSON.stringify(i)}traverse_and_compute(e,t,i,r){t=t||"post-order";function c(o){hf(o)||W5(o,e,r)}function h(o){kO(o,e,r)}function v(o){MO(o,e,r)}return t=="pre-order"?t=h:t=="in-order"?t=v:t=c,t(i||this.nodes),this}get_parsed_tags(){return this.parsed_tags}update(e){this.nodes=e}render(e){return this.display=new bf(this,e),this.display}};hA.prototype.isLeafNode=ka;hA.prototype.selectAllDescendants=q5;hA.prototype.mrca=Mz;hA.prototype.hasBranchLengths=DO;hA.prototype.getBranchLengths=LO;hA.prototype.branchName=zO;hA.prototype.normalizeBranchLengths=RO;hA.prototype.scaleBranchLengths=OO;hA.prototype.getNewick=bO;hA.prototype.resortChildren=kz;hA.prototype.setBranchLength=BO;hA.prototype.maxParsimony=IO;hA.prototype.getTipLengths=EO;hA.prototype.leftChildRightSibling=PO;Uu(hA.prototype,yO);Uu(hA.prototype,UO);Uu(hA.prototype,SO);U4("%Y%m%d");function Pz(e){let t,i,r="Taxa found in this area",c,h,v,o,k,O,j;return{c(){t=En("div"),i=En("h2"),i.textContent=r,c=fr(),h=En("div"),v=En("div"),o=En("span"),k=ja(e[4]),this.h()},l(J){t=In(J,"DIV",{class:!0});var oe=en(t);i=In(oe,"H2",{class:!0,"data-svelte-h":!0}),Zl(i)!=="svelte-bg4wlc"&&(i.textContent=r),c=dr(oe),h=In(oe,"DIV",{id:!0,class:!0});var se=en(h);v=In(se,"DIV",{class:!0,style:!0});var be=en(v);o=In(be,"SPAN",{class:!0});var qe=en(o);k=Wa(qe,e[4]),qe.forEach(li),be.forEach(li),se.forEach(li),oe.forEach(li),this.h()},h(){vi(i,"class","svelte-crk79u"),vi(o,"class","svelte-crk79u"),vi(v,"class",O=Vc(`tree_tooltip ${e[3]?"shown":"hidden"} ${e[5]?"flip":""}`)+" svelte-crk79u"),vi(v,"style",j=`margin-top: calc(${e[2]}px - 2rem); left: ${e[1]}px;`),vi(h,"id","tree_container"),vi(h,"class","svelte-crk79u"),vi(t,"class","container svelte-crk79u")},m(J,oe){vn(J,t,oe),Ri(t,i),Ri(t,c),Ri(t,h),Ri(h,v),Ri(v,o),Ri(o,k),e[10](h)},p(J,[oe]){oe&16&&Fu(k,J[4]),oe&40&&O!==(O=Vc(`tree_tooltip ${J[3]?"shown":"hidden"} ${J[5]?"flip":""}`)+" svelte-crk79u")&&vi(v,"class",O),oe&6&&j!==(j=`margin-top: calc(${J[2]}px - 2rem); left: ${J[1]}px;`)&&vi(v,"style",j)},i:_a,o:_a,d(J){J&&li(t),e[10](null)}}}function Dz(e,t,i){let{newick:r}=t,{hex_id:c}=t,{clade:h}=t,v,o,k,O,j=!1,J="",oe=!1;function se(ke){let St="((((((((((((((((Tyrannus_melancholicus:0.619902,Tyrannus_couchii:0.619902):0.85678,Tyrannus_crassirostris:1.476682):0.29907,Tyrannus_savana:1.775751):0.825334,(Tyrannus_forficatus:0.749239,Tyrannus_verticalis:0.749239):1.851846):1.400348,(Tyrannus_tyrannus:3.53811,Tyrannus_vociferans:3.53811):0.463323):0.78852,Myiodynastes_luteiventris:4.789953):2.170634,(((Myiarchus_crinitus:1.804538,Myiarchus_cinerascens:1.804538):0.209707,Myiarchus_tyrannulus:2.014245):1.743441,Myiarchus_tuberculifer:3.757685):3.202901):1.597191,(((((((Empidonax_occidentalis:0.327604,Empidonax_difficilis:0.327604):2.426494,Empidonax_flaviventris:2.754098):1.696517,(((((Empidonax_oberholseri:2.161306,Empidonax_hammondii:2.161306):0.842122,Empidonax_minimus:3.003428):0.213631,Empidonax_wrightii:3.217059):0.333535,Empidonax_fulvifrons:3.550594):0.595988,(Empidonax_alnorum:1.979938,Empidonax_traillii:1.979938):2.166644):0.304032):0.148682,((Contopus_sordidulus:2.62665,Contopus_virens:2.626649):0.899922,Contopus_cooperi:3.526571):1.072725):0.325545,(Sayornis_saya:3.781439,(Sayornis_phoebe:1.096253,Sayornis_nigricans:1.096253):2.685186):1.143402):1.218483,Contopus_pertinax:6.143324):1.851513,Pyrocephalus_rubinus:7.994837):0.56294):19.243085,(((((((Zosterops_palpebrosus:11.24656,Chamaea_fasciata:11.246559):0.809274,Pycnonotus_jocosus:12.055832):0.37388,((((Riparia_riparia:6.967223,(Tachycineta_thalassina:4.679356,Tachycineta_bicolor:4.679355):2.287867):0.197341,(Stelgidopteryx_serripennis:6.278306,Progne_subis:6.278307):0.886257):0.999496,((Petrochelidon_pyrrhonota:2.705651,Petrochelidon_fulva:2.705651):4.890525,Hirundo_rustica:7.596175):0.567883):3.908347,(((Phylloscopus_fuscatus:7.144214,Phylloscopus_inornatus:7.144215):1.039892,Phylloscopus_borealis:8.184107):3.386782,Psaltriparus_minimus:11.57089):0.501517):0.357305):3.198033,(Alauda_arvensis:7.291984,Eremophila_alpestris:7.291985):8.33576):0.954938,(((Poecile_rufescens:3.381344,(Poecile_gambeli:2.366328,Poecile_atricapillus:2.366328):1.015016):2.5912,(Baeolophus_inornatus:1.885773,Baeolophus_ridgwayi:1.885773):4.086771):6.604761,Auriparus_flaviceps:12.577305):4.005378):1.204803,(((((((Oenanthe_oenanthe:8.401653,(Tarsiger_cyanurus:7.742944,Ficedula_albicilla:7.742944):0.658707):4.637699,Cinclus_mexicanus:13.03935):1.218385,((((Turdus_migratorius:3.909873,Turdus_obscurus:3.909873):0.383141,Turdus_rufopalliatus:4.293014):5.352109,((((Catharus_guttatus:3.89296,(Catharus_minimus:0.719248,Catharus_fuscescens:0.719248):3.173712):1.217916,Catharus_ustulatus:5.110876):2.898328,Hylocichla_mustelina:8.009204):0.832821,Ixoreus_naevius:8.842026):0.803098):2.400322,(Myadestes_townsendi:11.383646,(Sialia_currucoides:3.141333,Sialia_mexicana:3.141332):8.242315):0.661799):2.21229):0.472993,(Sturnus_vulgaris:11.154101,(((Mimus_polyglottos:5.122579,Oreoscoptes_montanus:5.12258):1.517727,((Toxostoma_curvirostre:4.120545,Toxostoma_rufum:4.120544):1.352213,(Toxostoma_bendirei:4.640856,((Toxostoma_lecontei:2.747447,Toxostoma_crissale:2.747447):0.857103,Toxostoma_redivivum:3.60455):1.036307):0.831901):1.167548):1.301648,Dumetella_carolinensis:7.941955):3.212146):3.576628):2.188836,((((((Campylorhynchus_brunneicapillus:6.585247,Thryomanes_bewickii:6.585247):0.601549,(Troglodytes_aedon:5.644158,(Cistothorus_platensis:4.091648,Cistothorus_palustris:4.091648):1.552511):1.542638):0.934231,(Catherpes_mexicanus:6.20663,Salpinctes_obsoletus:6.20663):1.914396):3.05437,((Polioptila_californica:1.690149,Polioptila_melanura:1.690149):1.702386,Polioptila_caerulea:3.392536):7.782861):2.80982,Certhia_americana:13.985217):1.128942,((Sitta_canadensis:6.561379,Sitta_pygmaea:6.56138):1.810662,Sitta_carolinensis:8.37204):6.742118):1.805406):0.407621,(((Bombycilla_garrulus:3.757978,Bombycilla_cedrorum:3.757978):8.174507,(Ptilogonys_cinereus:8.485107,Phainopepla_nitens:8.485108):3.447377):4.887578,(Regulus_calendula:7.083885,Regulus_satrapa:7.083885):9.736178):0.507124):0.145318,(((((((Sporophila_torqueola:8.419777,(((Spiza_americana:5.82027,(((Passerina_versicolor:1.374144,Passerina_ciris:1.374144):2.404035,(Passerina_caerulea:2.570987,Passerina_amoena:2.570987):1.207191):0.473037,Passerina_cyanea:4.251215):1.569056):1.286765,((((Piranga_ludoviciana:3.489746,Piranga_flava:3.489746):0.442277,Piranga_olivacea:3.932023):0.411935,Piranga_rubra:4.343958):2.254702,(Cardinalis_sinuatus:4.01511,Cardinalis_cardinalis:4.01511):2.583551):0.508374):0.258533,(Pheucticus_ludovicianus:2.914679,Pheucticus_melanocephalus:2.914679):4.450888):1.05421):0.750985,(((((((((Quiscalus_quiscula:1.355442,Quiscalus_mexicanus:1.355442):1.537226,(Euphagus_carolinus:2.263857,Euphagus_cyanocephalus:2.263857):0.628811):1.191256,(Molothrus_aeneus:1.212313,Molothrus_ater:1.212313):2.871611):0.187559,(Agelaius_phoeniceus:3.000792,Agelaius_tricolor:3.000792):1.270691):2.148377,((Icterus_spurius:2.256428,Icterus_cucullatus:2.256428):2.245507,(Icterus_parisorum:3.486088,((Icterus_bullockii:1.296631,Icterus_pustulatus:1.296631):0.372399,Icterus_galbula:1.66903):1.817059):1.015845):1.917926):0.524545,((Sturnella_neglecta:1.887192,Sturnella_magna:1.887192):4.476338,(Xanthocephalus_xanthocephalus:5.394765,Dolichonyx_oryzivorus:5.394765):0.968765):0.580875):0.481912,Icteria_virens:7.426317):0.371308,(Seiurus_aurocapilla:5.3139,((((((((((((((((Setophaga_virens:0.55378,(Setophaga_townsendi:0.205227,Setophaga_occidentalis:0.205227):0.348552):0.601999,(Setophaga_graciae:0.393728,Setophaga_nigrescens:0.393728):0.76205):0.347084,Setophaga_discolor:1.502861):0.578854,((Setophaga_pinus:1.670331,(Setophaga_coronata:1.537147,Setophaga_dominica:1.537147):0.133184):0.165304,Setophaga_palmarum:1.835635):0.246081):0.080749,Setophaga_caerulescens:2.162464):0.069445,((((Setophaga_petechia:1.220713,Setophaga_pensylvanica:1.220713):0.146616,Setophaga_striata:1.367329):0.597451,(Setophaga_castanea:1.781327,Setophaga_fusca:1.781327):0.183453):0.175384,Setophaga_magnolia:2.140164):0.091745):0.054758,Setophaga_cerulea:2.286667):0.160767,(Setophaga_americana:0.422318,Setophaga_pitiayumi:0.422318):2.025116):0.061881,Setophaga_tigrina:2.509315):0.142911,Setophaga_ruticilla:2.652226):0.113792,Setophaga_citrina:2.766018):1.230111,(((Cardellina_rubrifrons:2.573805,Cardellina_pusilla:2.573805):0.271427,Cardellina_canadensis:2.845232):0.450177,Myioborus_pictus:3.295408):0.700721):0.307199,(Geothlypis_trichas:3.17745,(Geothlypis_formosa:2.8138,(Oporornis_agilis:2.076081,(Geothlypis_tolmiei:0.877845,Geothlypis_philadelphia:0.877845):1.198236):0.73772):0.363649):1.125879):0.086537,Helmitheros_vermivorum:4.389866):0.161013,(Protonotaria_citrea:4.303031,((Parkesia_motacilla:2.097399,Parkesia_noveboracensis:2.097399):1.823707,Mniotilta_varia:3.921106):0.381926):0.247847):0.241013,(Vermivora_cyanoptera:1.250469,Vermivora_chrysoptera:1.250469):3.541423):0.522008):2.483725):0.860785,((((Ammodramus_savannarum:5.32378,Peucaea_cassinii:5.323781):1.90225,((((Spizella_pusilla:3.070337,Spizella_atrogularis:3.070337):0.256848,(Spizella_breweri:2.319898,Spizella_passerina:2.319898):1.007287):0.299515,Spizella_pallida:3.6267):3.119963,((Calamospiza_melanocorys:5.462612,Amphispiza_bilineata:5.462613):0.473245,Chondestes_grammacus:5.935857):0.810805):0.479369):0.284235,((((Ammodramus_leconteii:4.163338,Pooecetes_gramineus:4.163338):0.318831,(((Melospiza_lincolnii:1.264886,Melospiza_georgiana:1.264886):0.837596,Melospiza_melodia:2.102483):1.773568,Passerculus_sandwichensis:3.876051):0.606118):1.04583,((Pipilo_maculatus:2.033152,Pipilo_chlorurus:2.033153):2.918452,((Melozone_aberti:0.89701,Melozone_crissalis:0.89701):3.214586,Aimophila_ruficeps:4.111597):0.840007):0.576396):0.208553,((Junco_hyemalis:4.32944,((Zonotrichia_albicollis:1.15955,Zonotrichia_querula:1.15955):0.322813,(Zonotrichia_atricapilla:0.331305,Zonotrichia_leucophrys:0.331305):1.151058):2.847076):0.487674,Passerella_iliaca:4.817114):0.919439):1.773713):0.743769,(Emberiza_pusilla:3.209884,Emberiza_rustica:3.209884):5.04415):0.404376):0.512351):0.561069,(((Calcarius_ornatus:1.735516,Calcarius_pictus:1.735516):4.618411,(Plectrophenax_nivalis:5.426424,Calcarius_lapponicus:5.426425):0.927502):0.908811,Rhynchophanes_mccownii:7.262738):2.469093):1.359019,(((Chloris_sinica:5.358973,(((Spinus_pinus:3.142395,(Spinus_tristis:2.540467,(Spinus_psaltria:1.162173,Spinus_lawrencei:1.162173):1.378294):0.601928):1.090077,Carduelis_carduelis:4.232471):0.540023,((Loxia_leucoptera:1.210478,Loxia_curvirostra:1.210477):2.332016,Acanthis_flammea:3.542493):1.230001):0.586479):2.183821,((Leucosticte_tephrocotis:0.267407,Leucosticte_atrata:0.267407):6.156445,Pinicola_enucleator:6.423852):1.11894):2.79669,Fringilla_montifringilla:10.339483):0.751366):0.547327,((Motacilla_cinerea:3.178243,(Motacilla_alba:2.460116,(Motacilla_tschutschensis:1.809206,Motacilla_citreola:1.809207):0.650909):0.718127):4.53481,(((Anthus_rubescens:3.227962,Anthus_cervinus:3.227962):1.32247,Anthus_hodgsoni:4.550432):1.385479,Anthus_spragueii:5.935912):1.777141):3.925124):0.415079,Passer_domesticus:12.053257):1.148099,((Vidua_macroura:10.518889,(Estrilda_melpoda:6.721624,(Lonchura_punctulata:4.62458,Euodice_malabarica:4.62458):2.097043):3.797268):0.93593,Euplectes_franciscanus:11.454819):1.746534):4.27115):0.314981):2.469957,((((Vireo_flavoviridis:1.321439,Vireo_olivaceus:1.321439):1.199697,(Vireo_philadelphicus:1.956385,Vireo_gilvus:1.956385):0.564752):0.781661,((((Vireo_solitarius:0.707618,(Vireo_cassinii:0.402464,Vireo_plumbeus:0.402464):0.305154):0.801472,Vireo_flavifrons:1.50909):0.835561,(Vireo_vicinior:2.056349,Vireo_huttoni:2.056349):0.288302):0.466454,(Vireo_griseus:1.632751,Vireo_bellii:1.632751):1.178355):0.491692):12.019837,((Lanius_cristatus:5.837545,Lanius_ludovicianus:5.837545):5.571762,(((((Corvus_corax:4.701119,Corvus_brachyrhynchos:4.701119):1.990164,Nucifraga_columbiana:6.691283):1.298672,(Pica_nuttalli:0.392281,Pica_hudsonia:0.392281):7.597672):0.514906,(((Gymnorhinus_cyanocephalus:6.126222,((Aphelocoma_woodhouseii:0.76393,Aphelocoma_californica:0.76393):1.557404,Aphelocoma_insularis:2.321334):3.804888):0.683341,(Cyanocitta_stelleri:4.846486,Cyanocitta_cristata:4.846486):1.963078):0.455185,Calocitta_colliei:7.264749):1.240112):0.40107,Perisoreus_canadensis:8.905929):2.503378):3.913326):4.934811):7.543419):10.368133,(Psittacula_krameri:14.70458,((((Brotogeris_chiriri:1.035507,Brotogeris_versicolurus:1.035507):6.349329,Myiopsitta_monachus:7.384836):2.724171,(Amazona_albifrons:3.384577,((Amazona_autumnalis:2.541056,(Amazona_finschi:1.862114,Amazona_viridigenalis:1.862114):0.678941):0.625662,(Amazona_ochrocephala:1.165411,Amazona_aestiva:1.16541):2.001307):0.217859):6.72443):0.370969,(((Aratinga_acuticaudata:4.733532,Nandayus_nenday:4.733532):0.572154,Cyanoliseus_patagonus:5.305686):0.227193,Aratinga_mitrata:5.532878):4.947097):4.224603):23.464415):0.875789,((Falco_tinnunculus:6.236443,((Falco_mexicanus:3.250519,Falco_peregrinus:3.250519):1.551005,(Falco_columbarius:4.340078,Falco_sparverius:4.340078):0.461445):1.434919):11.560534,Caracara_plancus:17.796978):21.247806):18.167212,(((((Colaptes_auratus:7.439905,Dryocopus_pileatus:7.439906):2.995574,((((Sphyrapicus_ruber:0.691321,(Sphyrapicus_nuchalis:0.686021,Sphyrapicus_varius:0.686021):0.0053):4.673796,Sphyrapicus_thyroideus:5.365118):3.383365,(Melanerpes_uropygialis:7.684308,(Melanerpes_formicivorus:7.035306,(Melanerpes_lewis:6.403656,Melanerpes_erythrocephalus:6.403656):0.63165):0.649002):1.064176):0.729339,Picoides_arcticus:9.477822):0.957657):25.154227,Megaceryle_alcyon:35.589708):21.232651,(((((Megascops_kennicottii:9.535534,(Bubo_scandiacus:4.38794,Bubo_virginianus:4.38794):5.147594):0.399666,Strix_varia:9.935201):0.688896,(Asio_otus:6.154249,Asio_flammeus:6.154249):4.469847):2.862398,(((Glaucidium_gnoma:10.483593,Athene_cunicularia:10.483593):0.73703,Aegolius_acadicus:11.220624):0.978771,Micrathene_whitneyi:12.199394):1.2871):8.747286,Tyto_alba:22.233781):34.588578):0.214221,(((((Aquila_chrysaetos:7.964539,((((Buteogallus_anthracinus:4.536991,((((((Buteo_swainsoni:1.391803,(Buteo_albonotatus:1.258194,(Buteo_regalis:0.408815,Buteo_lagopus:0.408815):0.84938):0.13361):0.246285,Buteo_jamaicensis:1.638089):0.474275,Buteo_platypterus:2.112364):0.127968,Buteo_lineatus:2.240332):0.063671,Buteo_nitidus:2.304003):1.83132,Parabuteo_unicinctus:4.135322):0.401669):0.814523,Ictinia_mississippiensis:5.351515):1.030262,Haliaeetus_leucocephalus:6.381778):0.568816,(Accipiter_striatus:5.309671,(Circus_cyaneus:5.06055,(Accipiter_cooperii:3.903353,Accipiter_gentilis:3.903353):1.157197):0.24912):1.640922):1.013948):1.914107,Elanoides_forficatus:9.878649):1.074487,Elanus_leucurus:10.953135):1.124614,Pandion_haliaetus:12.07775):4.511346,((Coragyps_atratus:3.554197,Gymnogyps_californianus:3.554197):2.188988,Cathartes_aura:5.743185):10.84591):40.447484):0.175416):0.552342,((((((((((((((((Tryngites_subruficollis:3.158973,Calidris_bairdii:3.158973):1.069381,Calidris_melanotos:4.228355):0.721063,(Calidris_pusilla:2.559828,Calidris_mauri:2.559828):2.389589):0.443639,Calidris_himantopus:5.393057):0.153549,(((Calidris_alba:3.699876,Calidris_fuscicollis:3.699876):0.589353,Calidris_minuta:4.289229):0.510028,Calidris_minutilla:4.799257):0.747348):0.500986,Calidris_ferruginea:6.047591):0.427549,((Calidris_maritima:1.198421,Calidris_ptilocnemis:1.198421):3.144061,Calidris_alpina:4.342482):2.132658):0.368787,Calidris_subminuta:6.843928):0.480821,Philomachus_pugnax:7.324748):0.299471,(Calidris_acuminata:6.399253,(Calidris_canutus:5.09979,Aphriza_virgata:5.09979):1.299464):1.224966):3.509313,(Arenaria_interpres:3.533248,Arenaria_melanocephala:3.533248):7.600284):1.234303,((((Scolopax_minor:10.211308,(Gallinago_gallinago:3.83163,Gallinago_delicata:3.831629):6.379678):0.499977,(Limnodromus_griseus:5.529963,Limnodromus_scolopaceus:5.529963):5.181322):0.726366,Lymnocryptes_minimus:11.437651):0.649326,(((Tringa_solitaria:7.846535,((((Tringa_stagnatilis:3.841335,Tringa_glareola:3.841335):1.894987,((Tringa_nebularia:3.640261,Tringa_melanoleuca:3.640261):1.182161,Tringa_erythropus:4.822422):0.913899):0.484985,(Tringa_flavipes:5.250045,Tringa_semipalmata:5.250045):0.971262):0.372349,(Tringa_brevipes:3.111692,Tringa_incana:3.111692):3.481964):1.252879):2.273961,(((Phalaropus_fulicarius:3.166781,Phalaropus_lobatus:3.166781):4.461625,Phalaropus_tricolor:7.628406):1.797383,Xenus_cinereus:9.425789):0.694707):0.508933,Actitis_macularius:10.629429):1.457548):0.280858):0.808214,((Limosa_fedoa:4.758084,Limosa_haemastica:4.758084):2.792013,Limosa_lapponica:7.550097):5.625952):0.875709,(((Numenius_americanus:3.902998,Numenius_minutus:3.902999):3.114172,(Numenius_phaeopus:3.809099,Numenius_tahitiensis:3.809099):3.208071):3.460888,Bartramia_longicauda:10.478058):3.5737):7.503049,((((((((Chlidonias_niger:1.1619,Chlidonias_leucopterus:1.1619):3.555137,(((Sterna_paradisaea:2.604915,Sterna_hirundo:2.604915):1.016325,Sterna_forsteri:3.62124):0.268369,((Thalasseus_sandvicensis:0.607261,Thalasseus_elegans:0.607261):0.62365,Thalasseus_maximus:1.230912):2.658698):0.827428):0.955816,(Gelochelidon_nilotica:4.350884,Hydroprogne_caspia:4.350884):1.321968):1.505717,Sternula_antillarum:7.178569):0.558345,(Onychoprion_anaethetus:3.582945,Onychoprion_fuscatus:3.582945):4.153969):3.975227,Rynchops_niger:11.712141):0.654253,((((Chroicocephalus_ridibundus:1.999968,Chroicocephalus_philadelphia:1.999969):1.479186,((((((((((((Larus_hyperboreus:0.185546,(Larus_schistisagus:0.105983,Larus_glaucoides:0.105983):0.079563):0.003055,Larus_glaucescens:0.188601):0.155986,Larus_argentatus:0.344587):0.107021,Larus_californicus:0.451609):0.012053,Larus_dominicanus:0.463661):0.005221,Larus_fuscus:0.468882):0.150475,Larus_marinus:0.619357):0.206717,Larus_occidentalis:0.826074):0.18028,Larus_delawarensis:1.006355):0.196994,Larus_heermanni:1.203348):0.44514,(Larus_crassirostris:1.024276,Larus_belcheri:1.024276):0.624212):1.18797,(Leucophaeus_atricilla:0.919175,Leucophaeus_pipixcan:0.919175):1.917283):0.642696):0.981991,((Xema_sabini:2.721958,Pagophila_eburnea:2.721958):0.757049,(Rissa_tridactyla:2.551241,Rissa_brevirostris:2.551241):0.927766):0.982139):1.134354,((Hydrocoloeus_minutus:3.254208,Rhodostethia_rosea:3.254208):0.77621,Creagrus_furcatus:4.030417):1.565082):6.770894):0.839622,((((Cerorhinca_monocerata:4.962971,(Fratercula_corniculata:2.833483,Fratercula_cirrhata:2.833483):2.129488):4.069719,((Aethia_pusilla:3.348323,(Aethia_cristatella:2.915151,Aethia_psittacula:2.91515):0.433173):0.992254,Ptychoramphus_aleuticus:4.340578):4.692112):0.727745,((((Uria_lomvia:3.0028,Uria_aalge:3.0028):4.920853,(Synthliboramphus_antiquus:3.720373,(Synthliboramphus_hypoleucus:0.671056,Synthliboramphus_craveri:0.671056):3.049317):4.20328):0.407386,Cepphus_columba:8.331039):0.426139,(Brachyramphus_brevirostris:5.628663,(Brachyramphus_marmoratus:3.830719,Brachyramphus_perdix:3.830719):1.797944):3.128515):1.003257):1.771281,((Stercorarius_parasiticus:2.970954,Stercorarius_pomarinus:2.970954):1.751772,Stercorarius_longicaudus:4.722725):6.80899):1.6743):8.348792):1.743606,((((Charadrius_montanus:5.551928,((Charadrius_leschenaultii:0.169672,Charadrius_mongolus:0.169672):4.612515,Charadrius_wilsonia:4.782187):0.769741):4.443245,(((Charadrius_semipalmatus:5.377763,(Charadrius_melodus:3.821625,Charadrius_hiaticula:3.821625):1.556139):1.15835,Charadrius_vociferus:6.536113):2.319533,Charadrius_morinellus:8.855646):1.139527):1.702327,((Recurvirostra_americana:5.643946,Himantopus_mexicanus:5.643946):2.680725,(Haematopus_palliatus:0.491965,Haematopus_bachmani:0.491965):7.832705):3.37283):0.798071,((Pluvialis_fulva:2.455897,Pluvialis_dominica:2.455897):1.178289,Pluvialis_squatarola:3.634185):8.861386):10.802842):34.465924):0.473736,((((Columbina_inca:3.404918,(Columbina_talpacoti:2.266537,Columbina_passerina:2.266537):1.138381):8.482142,((Zenaida_asiatica:6.129893,Zenaida_macroura:6.129893):3.814154,((Columba_livia:6.40713,(Streptopelia_orientalis:4.04789,(Streptopelia_decaocto:0.772012,Streptopelia_roseogrisea:0.772012):3.275878):2.359239):1.408266,Patagioenas_fasciata:7.815396):2.128651):1.943014):22.893088,((Podilymbus_podiceps:7.533322,((((Podiceps_auritus:3.080437,Podiceps_grisegena:3.080437):1.451611,Podiceps_nigricollis:4.532048):0.835204,(Aechmophorus_clarkii:0.649792,Aechmophorus_occidentalis:0.649792):4.71746):0.982984,Tachybaptus_dominicus:6.350235):1.183087):15.975136,(Phaethon_lepturus:3.683466,Phaethon_aethereus:3.683465):19.824993):11.27169):0.63047,((((Cypseloides_niger:5.980303,Streptoprocne_zonaris:5.980303):4.57189,((Aeronautes_saxatalis:6.888602,Apus_apus:6.888602):0.820048,(Chaetura_vauxi:1.732059,Chaetura_pelagica:1.732059):5.97659):2.843543):21.460899,(((Eugenes_fulgens:10.670111,Lampornis_clemenciae:10.67011):0.56568,((Archilochus_colubris:1.306099,Archilochus_alexandri:1.306099):3.186673,(((Selasphorus_sasin:1.25153,(Selasphorus_calliope:0.828849,Selasphorus_rufus:0.828849):0.422681):0.256848,Selasphorus_platycercus:1.508378):0.915832,(Calypte_anna:1.752307,Calypte_costae:1.752307):0.671904):2.068562):6.743019):2.456092,Colibri_thalassinus:13.691884):18.321209):2.173856,(Phalaenoptilus_nuttallii:9.381208,(Chordeiles_acutipennis:4.827009,Chordeiles_minor:4.827009):4.554198):24.805739):1.223671):22.827456):3.416457,(((((((((Botaurus_lentiginosus:7.844435,Ixobrychus_exilis:7.844434):4.109641,(((((Bubulcus_ibis:5.166884,Ardea_alba:5.166884):0.893851,Ardea_herodias:6.060735):2.16869,Butorides_virescens:8.229425):0.603762,(Nyctanassa_violacea:8.188923,Nycticorax_nycticorax:8.188923):0.644264):0.574409,(((Egretta_rufescens:2.458797,Egretta_tricolor:2.458797):0.831606,Egretta_caerulea:3.290403):0.72769,Egretta_thula:4.018093):5.389502):2.546481):12.342126,(Pelecanus_erythrorhynchos:4.196515,Pelecanus_occidentalis:4.196516):20.099686):1.029739,((Platalea_ajaja:10.269775,(Plegadis_chihi:1.91568,Plegadis_falcinellus:1.915681):8.354095):2.358493,Eudocimus_albus:12.628269):12.697674):23.512005,(((((Phalacrocorax_auritus:1.697021,Phalacrocorax_brasilianus:1.697021):4.515643,Phalacrocorax_pelagicus:6.212664):4.997287,Anhinga_anhinga:11.209951):0.906335,(Morus_bassanus:9.617198,((Sula_leucogaster:2.47621,((Sula_dactylatra:0.004781,Sula_granti:0.004781):1.517391,Sula_nebouxii:1.522171):0.954038):2.140455,Sula_sula:4.616665):5.000533):2.499087):3.324854,((Fregata_magnificens:1.44266,Fregata_minor:1.44266):0.346144,Fregata_ariel:1.788804):13.652335):33.396807):1.031774,Mycteria_americana:49.869719):10.866735,((((((Pterodroma_macroptera:4.865339,((Pterodroma_sandwichensis:2.79345,Pterodroma_inexpectata:2.79345):1.365143,Pterodroma_cookii:4.158592):0.706747):4.068484,(((((Puffinus_newelli:1.381885,Puffinus_opisthomelas:1.381886):0.190289,Puffinus_puffinus:1.572175):3.181206,(Calonectris_leucomelas:1.592278,Calonectris_diomedea:1.592278):3.161103):1.064218,(((((Puffinus_carneipes:0.252926,Puffinus_creatopus:0.252926):0.973591,Puffinus_gravis:1.226516):0.48506,Puffinus_griseus:1.711576):0.09139,Puffinus_tenuirostris:1.802967):0.861427,(Puffinus_pacificus:1.416031,Puffinus_bulleri:1.416031):1.248363):3.153204):2.328164,(Procellaria_aequinoctialis:6.579741,Bulweria_bulwerii:6.579741):1.566021):0.788063):0.331096,Fulmarus_glacialis:9.26492):2.922377,((Oceanodroma_leucorhoa:7.765483,Oceanodroma_furcata:7.765483):0.356616,(Oceanodroma_microsoma:4.768379,Oceanodroma_tethys:4.768379):3.353719):4.065199):0.620175,Oceanites_oceanicus:12.807472):0.306744,(((Phoebastria_immutabilis:1.85668,Phoebastria_nigripes:1.85668):0.562903,Phoebastria_albatrus:2.419582):3.929057,((Thalassarche_cauta:0.262255,Diomedea_exulans:0.262255):0.760039,Thalassarche_eremita:1.022293):5.326347):6.765577):47.622239):0.137649,((((Gavia_adamsii:0.408341,Gavia_immer:0.408341):1.063572,Gavia_pacifica:1.471913):0.976038,Gavia_arctica:2.447951):3.809025,Gavia_stellata:6.256976):54.617128):0.372954,(((Cuculus_canorus:15.46785,(Coccyzus_erythropthalmus:9.696905,Coccyzus_americanus:9.696905):5.770947):5.16665,(Crotophaga_sulcirostris:16.315965,Geococcyx_californianus:16.315966):4.318537):10.43379,((Grus_canadensis:4.416436,(Grus_grus:3.717184,Anthropoides_virgo:3.717186):0.69925):19.831011,(((Fulica_americana:5.83685,Gallinula_chloropus:5.836849):3.314091,Porzana_carolina:9.15094):2.511697,((Coturnicops_noveboracensis:9.425769,Porphyrio_martinica:9.42577):1.910547,Rallus_limicola:11.336317):0.32632):12.584809):6.820845):30.178765):0.407474):2.979476,(((((((((Anas_clypeata:0.896522,(Anas_cyanoptera:0.02564,Anas_discors:0.02564):0.870882):1.980189,Anas_querquedula:2.876711):1.426198,Anas_formosa:4.302908):0.61938,(((Anas_rubripes:0.509299,Anas_platyrhynchos:0.509298):2.714019,(Anas_crecca:2.915976,Anas_acuta:2.915976):0.307342):0.754771,((Anas_falcata:0.775449,Anas_strepera:0.775449):1.386797,(Anas_americana:1.223151,Anas_penelope:1.223151):0.939095):1.815842):0.9442):0.899565,(((Aythya_marila:0.342269,Aythya_affinis:0.342269):0.646013,Aythya_fuligula:0.988282):0.508005,((Aythya_americana:0.805757,Aythya_collaris:0.805757):0.461603,(Aythya_valisineria:0.396165,Aythya_ferina:0.396165):0.871195):0.228926):4.325566):1.213051,((((Aix_sponsa:2.982111,Aix_galericulata:2.982111):1.486653,Cairina_moschata:4.468764):1.560604,Alopochen_aegyptiaca:6.029367):0.673042,((((Bucephala_albeola:3.701376,(Bucephala_clangula:1.11771,Bucephala_islandica:1.11771):2.583666):1.514894,(((Mergus_merganser:1.873201,Mergus_serrator:1.873201):1.916388,Lophodytes_cucullatus:3.789589):0.829361,Mergellus_albellus:4.618949):0.59732):0.502879,(Melanitta_nigra:4.674791,(Melanitta_fusca:2.340277,Melanitta_perspicillata:2.340277):2.334514):1.044358):0.771899,((((Somateria_mollissima:0.295178,Somateria_spectabilis:0.295178):3.689931,Polysticta_stelleri:3.985109):1.109118,Histrionicus_histrionicus:5.094227):0.811149,Clangula_hyemalis:5.905376):0.585672):0.211362):0.332494):2.655406,(((((Branta_hutchinsii:0.999185,Branta_canadensis:0.999184):2.080501,Branta_bernicla:3.079685):1.059406,((Chen_rossii:0.014032,Chen_caerulescens:0.014032):1.252823,((Anser_albifrons:0.492808,Anser_fabalis:0.492808):0.615209,Chen_canagica:1.108017):0.158837):2.872236):2.225437,(Cygnus_olor:4.159087,((Cygnus_cygnus:0.684532,Cygnus_columbianus:0.684532):0.189911,Cygnus_buccinator:0.874443):3.284644):2.205441):2.888657,Oxyura_jamaicensis:9.253185):0.437126):3.174907,(Dendrocygna_bicolor:9.39956,Dendrocygna_autumnalis:9.39956):3.465657):41.141001,((((((Lagopus_leucura:4.060241,Centrocercus_urophasianus:4.06024):1.450073,Bonasa_umbellus:5.510314):1.796859,Meleagris_gallopavo:7.307173):0.657843,Phasianus_colchicus:7.965017):3.942481,Alectoris_chukar:11.907496):3.85599,((Callipepla_californica:0.906981,Callipepla_gambelii:0.906981):6.06878,Oreortyx_pictus:6.975761):8.787725):38.242733):10.627788);",yt=new hA(St),xe=yt.render({height:2e3,width:2e3,"left-right-spacing":"fit-to-size","top-bottom-spacing":"fit-to-size","is-radial":!0,brush:!1,collapsible:!1,selectable:!1,reroot:!1,hide:!1,container:"#tree_container"});console.log(xe),console.log(yt.display),o&&xe.style_edges(function(Ve,Je){o[c].includes(Je.target.data.name)&&(Ve.style("stroke",D2()[500]),Ve.style("stroke-width","2px"))}),xe.update();let Gt=yt.display.show();if(Gt.querySelectorAll(".node-circle").forEach(Ve=>Ve.attr("r",0)),o)for(let Ve of o[c]){let Je=Gt.querySelector(`[data-node-name="${Ve}"]`);Je.firstChild,nm(Je).append("circle").classed("node-circle",!0).attr("r",3).attr("title",Ve).style("fill",D2()[500])}Gt.setAttribute("width",2e3),Gt.setAttribute("height",2e3),Gt.setAttribute("viewBox",`0 0 ${2e3/4} ${2e3/4}`),Gt.style.marginTop="-2rem",console.log(Gt),v.appendChild(Gt),console.log(v.querySelectorAll(".node-circle")),v.querySelectorAll(".node-circle").forEach(Ve=>{Ve.addEventListener("mouseover",Je=>{let et=document.querySelector("#tree_container").clientWidth;i(5,oe=!1),k>et/2&&i(5,oe=!0),i(3,j=!0),i(4,J=Je.target.attributes.title.value)}),Ve.addEventListener("mouseout",Je=>{i(3,j=!1)})}),Gt.addEventListener("mousemove",Ve=>{!Ve.target.localName!=="svg"&&(i(1,k=Ve.offsetX),i(2,O=Ve.offsetY))})}async function be(ke){return fetch(`/phast/data/${ke}_hex_species.json`).then(Qe=>Qe.json()).then(Qe=>(i(9,o=JSON.parse(Qe[0])),o))}Dl(async()=>{be(h).then(ke=>se()).then(()=>console.log("built node map"))});function qe(ke){ts[ke?"unshift":"push"](()=>{v=ke,i(0,v)})}return e.$$set=ke=>{"newick"in ke&&i(6,r=ke.newick),"hex_id"in ke&&i(7,c=ke.hex_id),"clade"in ke&&i(8,h=ke.clade)},e.$$.update=()=>{e.$$.dirty&321&&r&&v&&se(),e.$$.dirty&768&&h&&!o&&be(h)},[v,k,O,j,J,oe,r,c,h,o,qe]}class Lz extends Ds{constructor(t){super(),Ls(this,t,Dz,Pz,vs,{newick:6,hex_id:7,clade:8})}}function nw(e){let t;return{c(){t=En("div"),this.h()},l(i){t=In(i,"DIV",{class:!0}),en(t).forEach(li),this.h()},h(){vi(t,"class","mdc-button__touch")},m(i,r){vn(i,t,r)},d(i){i&&li(t)}}}function Bz(e){let t,i,r,c;const h=e[28].default,v=Ya(h,e,e[30],null);let o=e[6]&&nw();return{c(){t=En("div"),i=fr(),v&&v.c(),o&&o.c(),r=Rr(),this.h()},l(k){t=In(k,"DIV",{class:!0}),en(t).forEach(li),i=dr(k),v&&v.l(k),o&&o.l(k),r=Rr(),this.h()},h(){vi(t,"class","mdc-button__ripple")},m(k,O){vn(k,t,O),vn(k,i,O),v&&v.m(k,O),o&&o.m(k,O),vn(k,r,O),c=!0},p(k,O){v&&v.p&&(!c||O[0]&1073741824)&&Xa(v,h,k,k[30],c?Ja(h,k[30],O,null):Ka(k[30]),null),k[6]?o||(o=nw(),o.c(),o.m(r.parentNode,r)):o&&(o.d(1),o=null)},i(k){c||(Pi(v,k),c=!0)},o(k){Hi(v,k),c=!1},d(k){k&&(li(t),li(i),li(r)),v&&v.d(k),o&&o.d(k)}}}function Rz(e){let t,i,r;const c=[{tag:e[10]},{use:[[$h,{ripple:e[3],unbounded:!1,color:e[4],disabled:!!e[23].disabled,addClass:e[19],removeClass:e[20],addStyle:e[21]}],e[17],...e[0]]},{class:Mr({[e[1]]:!0,"mdc-button":!0,"mdc-button--raised":e[5]==="raised","mdc-button--unelevated":e[5]==="unelevated","mdc-button--outlined":e[5]==="outlined","smui-button--color-secondary":e[4]==="secondary","mdc-button--touch":e[6],"mdc-card__action":e[18]==="card:action","mdc-card__action--button":e[18]==="card:action","mdc-dialog__button":e[18]==="dialog:action","mdc-top-app-bar__navigation-icon":e[18]==="top-app-bar:navigation","mdc-top-app-bar__action-item":e[18]==="top-app-bar:action","mdc-snackbar__action":e[18]==="snackbar:actions","mdc-banner__secondary-action":e[18]==="banner"&&e[8],"mdc-banner__primary-action":e[18]==="banner"&&!e[8],"mdc-tooltip__action":e[18]==="tooltip:rich-actions",...e[12]})},{style:Object.entries(e[13]).map(a2).concat([e[2]]).join(" ")},e[16],e[15],e[14],{href:e[7]},e[23]];var h=e[9];function v(o,k){let O={$$slots:{default:[Bz]},$$scope:{ctx:o}};if(k!==void 0&&k[0]&12580351)O=fs(c,[k[0]&1024&&{tag:o[10]},k[0]&12189721&&{use:[[$h,{ripple:o[3],unbounded:!1,color:o[4],disabled:!!o[23].disabled,addClass:o[19],removeClass:o[20],addStyle:o[21]}],o[17],...o[0]]},k[0]&266610&&{class:Mr({[o[1]]:!0,"mdc-button":!0,"mdc-button--raised":o[5]==="raised","mdc-button--unelevated":o[5]==="unelevated","mdc-button--outlined":o[5]==="outlined","smui-button--color-secondary":o[4]==="secondary","mdc-button--touch":o[6],"mdc-card__action":o[18]==="card:action","mdc-card__action--button":o[18]==="card:action","mdc-dialog__button":o[18]==="dialog:action","mdc-top-app-bar__navigation-icon":o[18]==="top-app-bar:navigation","mdc-top-app-bar__action-item":o[18]==="top-app-bar:action","mdc-snackbar__action":o[18]==="snackbar:actions","mdc-banner__secondary-action":o[18]==="banner"&&o[8],"mdc-banner__primary-action":o[18]==="banner"&&!o[8],"mdc-tooltip__action":o[18]==="tooltip:rich-actions",...o[12]})},k[0]&8196&&{style:Object.entries(o[13]).map(a2).concat([o[2]]).join(" ")},k[0]&65536&&Vr(o[16]),k[0]&32768&&Vr(o[15]),k[0]&16384&&Vr(o[14]),k[0]&128&&{href:o[7]},k[0]&8388608&&Vr(o[23])]);else for(let j=0;j<c.length;j+=1)O=Gn(O,c[j]);return{props:O}}return h&&(t=ac(h,v(e)),e[29](t),t.$on("click",e[22])),{c(){t&&xr(t.$$.fragment),i=Rr()},l(o){t&&Yr(t.$$.fragment,o),i=Rr()},m(o,k){t&&wr(t,o,k),vn(o,i,k),r=!0},p(o,k){if(k[0]&512&&h!==(h=o[9])){if(t){ia();const O=t;Hi(O.$$.fragment,1,0,()=>{Sr(O,1)}),na()}h?(t=ac(h,v(o,k)),o[29](t),t.$on("click",o[22]),xr(t.$$.fragment),Pi(t.$$.fragment,1),wr(t,i.parentNode,i)):t=null}else if(h){const O=k[0]&12580351?fs(c,[k[0]&1024&&{tag:o[10]},k[0]&12189721&&{use:[[$h,{ripple:o[3],unbounded:!1,color:o[4],disabled:!!o[23].disabled,addClass:o[19],removeClass:o[20],addStyle:o[21]}],o[17],...o[0]]},k[0]&266610&&{class:Mr({[o[1]]:!0,"mdc-button":!0,"mdc-button--raised":o[5]==="raised","mdc-button--unelevated":o[5]==="unelevated","mdc-button--outlined":o[5]==="outlined","smui-button--color-secondary":o[4]==="secondary","mdc-button--touch":o[6],"mdc-card__action":o[18]==="card:action","mdc-card__action--button":o[18]==="card:action","mdc-dialog__button":o[18]==="dialog:action","mdc-top-app-bar__navigation-icon":o[18]==="top-app-bar:navigation","mdc-top-app-bar__action-item":o[18]==="top-app-bar:action","mdc-snackbar__action":o[18]==="snackbar:actions","mdc-banner__secondary-action":o[18]==="banner"&&o[8],"mdc-banner__primary-action":o[18]==="banner"&&!o[8],"mdc-tooltip__action":o[18]==="tooltip:rich-actions",...o[12]})},k[0]&8196&&{style:Object.entries(o[13]).map(a2).concat([o[2]]).join(" ")},k[0]&65536&&Vr(o[16]),k[0]&32768&&Vr(o[15]),k[0]&16384&&Vr(o[14]),k[0]&128&&{href:o[7]},k[0]&8388608&&Vr(o[23])]):{};k[0]&1073741888&&(O.$$scope={dirty:k,ctx:o}),t.$set(O)}},i(o){r||(t&&Pi(t.$$.fragment,o),r=!0)},o(o){t&&Hi(t.$$.fragment,o),r=!1},d(o){o&&li(i),e[29](null),t&&Sr(t,o)}}}const a2=([e,t])=>`${e}: ${t};`;function Oz(e,t,i){let r,c,h;const v=["use","class","style","ripple","color","variant","touch","href","action","defaultAction","secondary","component","tag","getElement"];let o=Fs(t,v),{$$slots:k={},$$scope:O}=t;const j=Al(sl());let{use:J=[]}=t,{class:oe=""}=t,{style:se=""}=t,{ripple:be=!0}=t,{color:qe="primary"}=t,{variant:ke="text"}=t,{touch:Qe=!1}=t,{href:We=void 0}=t,{action:ct="close"}=t,{defaultAction:St=!1}=t,{secondary:yt=!1}=t,xe,Gt={},Ve={},Je=Bo("SMUI:button:context"),{component:et=oc}=t,{tag:lt=et===oc?We==null?"button":"a":void 0}=t,ut=o.disabled;Za("SMUI:label:context","button"),Za("SMUI:icon:context","button");function Ke(_t){Gt[_t]||i(12,Gt[_t]=!0,Gt)}function Me(_t){(!(_t in Gt)||Gt[_t])&&i(12,Gt[_t]=!1,Gt)}function Ze(_t,ei){Ve[_t]!=ei&&(ei===""||ei==null?(delete Ve[_t],i(13,Ve)):i(13,Ve[_t]=ei,Ve))}function Fe(){Je==="banner"&&ho(vt(),yt?"SMUIBannerButton:secondaryActionClick":"SMUIBannerButton:primaryActionClick")}function vt(){return xe.getElement()}function dt(_t){ts[_t?"unshift":"push"](()=>{xe=_t,i(11,xe)})}return e.$$set=_t=>{i(31,t=Gn(Gn({},t),OA(_t))),i(23,o=Fs(t,v)),"use"in _t&&i(0,J=_t.use),"class"in _t&&i(1,oe=_t.class),"style"in _t&&i(2,se=_t.style),"ripple"in _t&&i(3,be=_t.ripple),"color"in _t&&i(4,qe=_t.color),"variant"in _t&&i(5,ke=_t.variant),"touch"in _t&&i(6,Qe=_t.touch),"href"in _t&&i(7,We=_t.href),"action"in _t&&i(24,ct=_t.action),"defaultAction"in _t&&i(25,St=_t.defaultAction),"secondary"in _t&&i(8,yt=_t.secondary),"component"in _t&&i(9,et=_t.component),"tag"in _t&&i(10,lt=_t.tag),"$$scope"in _t&&i(30,O=_t.$$scope)},e.$$.update=()=>{if(i(16,r=Je==="dialog:action"&&ct!=null?{"data-mdc-dialog-action":ct}:{action:t.action}),i(15,c=Je==="dialog:action"&&St?{"data-mdc-dialog-button-default":""}:{default:t.default}),i(14,h=Je==="banner"?{}:{secondary:t.secondary}),ut!==o.disabled){const _t=vt();"blur"in _t&&_t.blur(),i(27,ut=o.disabled)}},t=OA(t),[J,oe,se,be,qe,ke,Qe,We,yt,et,lt,xe,Gt,Ve,h,c,r,j,Je,Ke,Me,Ze,Fe,o,ct,St,vt,ut,k,dt,O]}class zz extends Ds{constructor(t){super(),Ls(this,t,Oz,Rz,vs,{use:0,class:1,style:2,ripple:3,color:4,variant:5,touch:6,href:7,action:24,defaultAction:25,secondary:8,component:9,tag:10,getElement:26},null,[-1,-1])}get getElement(){return this.$$.ctx[26]}}function rw(e,t,i){const r=e.slice();return r[12]=t[i],r}function sw(e,t,i){const r=e.slice();return r[12]=t[i],r}function aw(e,t,i){const r=e.slice();return r[12]=t[i],r}function Fz(e){let t=e[12].name+"",i;return{c(){i=ja(t)},l(r){i=Wa(r,t)},m(r,c){vn(r,i,c)},p:_a,d(r){r&&li(i)}}}function ow(e){let t,i;return t=new Jm({props:{value:e[12],$$slots:{default:[Fz]},$$scope:{ctx:e}}}),{c(){xr(t.$$.fragment)},l(r){Yr(t.$$.fragment,r)},m(r,c){wr(t,r,c),i=!0},p(r,c){const h={};c&524288&&(h.$$scope={dirty:c,ctx:r}),t.$set(h)},i(r){i||(Pi(t.$$.fragment,r),i=!0)},o(r){Hi(t.$$.fragment,r),i=!1},d(r){Sr(t,r)}}}function Nz(e){let t,i,r=nl(e[4]),c=[];for(let v=0;v<r.length;v+=1)c[v]=ow(aw(e,r,v));const h=v=>Hi(c[v],1,1,()=>{c[v]=null});return{c(){for(let v=0;v<c.length;v+=1)c[v].c();t=Rr()},l(v){for(let o=0;o<c.length;o+=1)c[o].l(v);t=Rr()},m(v,o){for(let k=0;k<c.length;k+=1)c[k]&&c[k].m(v,o);vn(v,t,o),i=!0},p(v,o){if(o&16){r=nl(v[4]);let k;for(k=0;k<r.length;k+=1){const O=aw(v,r,k);c[k]?(c[k].p(O,o),Pi(c[k],1)):(c[k]=ow(O),c[k].c(),Pi(c[k],1),c[k].m(t.parentNode,t))}for(ia(),k=r.length;k<c.length;k+=1)h(k);na()}},i(v){if(!i){for(let o=0;o<r.length;o+=1)Pi(c[o]);i=!0}},o(v){c=c.filter(Boolean);for(let o=0;o<c.length;o+=1)Hi(c[o]);i=!1},d(v){v&&li(t),ph(c,v)}}}function Aw(e){var be,qe;let t,i,r,c=((qe=(be=e[0])==null?void 0:be.next)==null?void 0:qe.name)+"",h,v,o,k,O,j,J;function oe(ke){e[8](ke)}let se={class:"shaped",variant:"filled",$$slots:{default:[Uz]},$$scope:{ctx:e}};return e[1]!==void 0&&(se.value=e[1]),k=new gm({props:se}),ts.push(()=>Uc(k,"value",oe)),{c(){t=En("div"),i=En("h2"),r=ja("Select which "),h=ja(c),v=ja(" to use"),o=fr(),xr(k.$$.fragment),this.h()},l(ke){t=In(ke,"DIV",{class:!0});var Qe=en(t);i=In(Qe,"H2",{class:!0});var We=en(i);r=Wa(We,"Select which "),h=Wa(We,c),v=Wa(We," to use"),We.forEach(li),o=dr(Qe),Yr(k.$$.fragment,Qe),Qe.forEach(li),this.h()},h(){var ke;vi(i,"class","svelte-n87391"),vi(t,"class",j=Vc(`step ${!((ke=e[0])!=null&&ke.next)&&"grayed"}`)+" svelte-n87391")},m(ke,Qe){vn(ke,t,Qe),Ri(t,i),Ri(i,r),Ri(i,h),Ri(i,v),Ri(t,o),wr(k,t,null),J=!0},p(ke,Qe){var ct,St,yt;(!J||Qe&1)&&c!==(c=((St=(ct=ke[0])==null?void 0:ct.next)==null?void 0:St.name)+"")&&Fu(h,c);const We={};Qe&524289&&(We.$$scope={dirty:Qe,ctx:ke}),!O&&Qe&2&&(O=!0,We.value=ke[1],Nc(()=>O=!1)),k.$set(We),(!J||Qe&1&&j!==(j=Vc(`step ${!((yt=ke[0])!=null&&yt.next)&&"grayed"}`)+" svelte-n87391"))&&vi(t,"class",j)},i(ke){J||(Pi(k.$$.fragment,ke),J=!0)},o(ke){Hi(k.$$.fragment,ke),J=!1},d(ke){ke&&li(t),Sr(k)}}}function Vz(e){let t=e[12].name+"",i;return{c(){i=ja(t)},l(r){i=Wa(r,t)},m(r,c){vn(r,i,c)},p(r,c){c&1&&t!==(t=r[12].name+"")&&Fu(i,t)},d(r){r&&li(i)}}}function lw(e){let t,i;return t=new Jm({props:{value:e[12],$$slots:{default:[Vz]},$$scope:{ctx:e}}}),{c(){xr(t.$$.fragment)},l(r){Yr(t.$$.fragment,r)},m(r,c){wr(t,r,c),i=!0},p(r,c){const h={};c&1&&(h.value=r[12]),c&524289&&(h.$$scope={dirty:c,ctx:r}),t.$set(h)},i(r){i||(Pi(t.$$.fragment,r),i=!0)},o(r){Hi(t.$$.fragment,r),i=!1},d(r){Sr(t,r)}}}function Uz(e){var v,o;let t,i,r=nl((o=(v=e[0])==null?void 0:v.next)==null?void 0:o.options),c=[];for(let k=0;k<r.length;k+=1)c[k]=lw(sw(e,r,k));const h=k=>Hi(c[k],1,1,()=>{c[k]=null});return{c(){for(let k=0;k<c.length;k+=1)c[k].c();t=Rr()},l(k){for(let O=0;O<c.length;O+=1)c[O].l(k);t=Rr()},m(k,O){for(let j=0;j<c.length;j+=1)c[j]&&c[j].m(k,O);vn(k,t,O),i=!0},p(k,O){var j,J;if(O&1){r=nl((J=(j=k[0])==null?void 0:j.next)==null?void 0:J.options);let oe;for(oe=0;oe<r.length;oe+=1){const se=sw(k,r,oe);c[oe]?(c[oe].p(se,O),Pi(c[oe],1)):(c[oe]=lw(se),c[oe].c(),Pi(c[oe],1),c[oe].m(t.parentNode,t))}for(ia(),oe=r.length;oe<c.length;oe+=1)h(oe);na()}},i(k){if(!i){for(let O=0;O<r.length;O+=1)Pi(c[O]);i=!0}},o(k){c=c.filter(Boolean);for(let O=0;O<c.length;O+=1)Hi(c[O]);i=!1},d(k){k&&li(t),ph(c,k)}}}function Gz(e){let t=e[12]+"",i;return{c(){i=ja(t)},l(r){i=Wa(r,t)},m(r,c){vn(r,i,c)},p:_a,d(r){r&&li(i)}}}function uw(e){let t,i;return t=new Jm({props:{value:e[12],$$slots:{default:[Gz]},$$scope:{ctx:e}}}),{c(){xr(t.$$.fragment)},l(r){Yr(t.$$.fragment,r)},m(r,c){wr(t,r,c),i=!0},p(r,c){const h={};c&524288&&(h.$$scope={dirty:c,ctx:r}),t.$set(h)},i(r){i||(Pi(t.$$.fragment,r),i=!0)},o(r){Hi(t.$$.fragment,r),i=!1},d(r){Sr(t,r)}}}function Hz(e){let t,i,r=nl(e[5]),c=[];for(let v=0;v<r.length;v+=1)c[v]=uw(rw(e,r,v));const h=v=>Hi(c[v],1,1,()=>{c[v]=null});return{c(){for(let v=0;v<c.length;v+=1)c[v].c();t=Rr()},l(v){for(let o=0;o<c.length;o+=1)c[o].l(v);t=Rr()},m(v,o){for(let k=0;k<c.length;k+=1)c[k]&&c[k].m(v,o);vn(v,t,o),i=!0},p(v,o){if(o&32){r=nl(v[5]);let k;for(k=0;k<r.length;k+=1){const O=rw(v,r,k);c[k]?(c[k].p(O,o),Pi(c[k],1)):(c[k]=uw(O),c[k].c(),Pi(c[k],1),c[k].m(t.parentNode,t))}for(ia(),k=r.length;k<c.length;k+=1)h(k);na()}},i(v){if(!i){for(let o=0;o<r.length;o+=1)Pi(c[o]);i=!0}},o(v){c=c.filter(Boolean);for(let o=0;o<c.length;o+=1)Hi(c[o]);i=!1},d(v){v&&li(t),ph(c,v)}}}function Qz(e){let t;return{c(){t=ja("Build")},l(i){t=Wa(i,"Build")},m(i,r){vn(i,t,r)},d(i){i&&li(t)}}}function qz(e){let t,i;return t=new JS({props:{$$slots:{default:[Qz]},$$scope:{ctx:e}}}),{c(){xr(t.$$.fragment)},l(r){Yr(t.$$.fragment,r)},m(r,c){wr(t,r,c),i=!0},p(r,c){const h={};c&524288&&(h.$$scope={dirty:c,ctx:r}),t.$set(h)},i(r){i||(Pi(t.$$.fragment,r),i=!0)},o(r){Hi(t.$$.fragment,r),i=!1},d(r){Sr(t,r)}}}function Zz(e){var Ke;let t,i,r,c,h,v,o,k="Select a null model",O,j,J,oe,se,be,qe,ke="Select a different region to compare",Qe,We,ct,St,yt,xe,Gt;r=new yE({});function Ve(Me){e[7](Me)}let Je={class:"shaped",variant:"filled",$$slots:{default:[Nz]},$$scope:{ctx:e}};e[0]!==void 0&&(Je.value=e[0]),j=new gm({props:Je}),ts.push(()=>Uc(j,"value",Ve));let et=((Ke=e[0])==null?void 0:Ke.next)&&Aw(e);function lt(Me){e[9](Me)}let ut={class:"shaped",variant:"filled",$$slots:{default:[Hz]},$$scope:{ctx:e}};return e[2]!==void 0&&(ut.value=e[2]),We=new gm({props:ut}),ts.push(()=>Uc(We,"value",lt)),xe=new zz({props:{class:"theme-button",variant:"raised",$$slots:{default:[qz]},$$scope:{ctx:e}}}),xe.$on("click",e[10]),{c(){t=En("div"),i=En("div"),xr(r.$$.fragment),c=fr(),h=En("div"),v=En("div"),o=En("h2"),o.textContent=k,O=fr(),xr(j.$$.fragment),oe=fr(),et&&et.c(),se=fr(),be=En("div"),qe=En("h2"),qe.textContent=ke,Qe=fr(),xr(We.$$.fragment),yt=fr(),xr(xe.$$.fragment),this.h()},l(Me){t=In(Me,"DIV",{class:!0});var Ze=en(t);i=In(Ze,"DIV",{class:!0});var Fe=en(i);Yr(r.$$.fragment,Fe),Fe.forEach(li),c=dr(Ze),h=In(Ze,"DIV",{class:!0});var vt=en(h);v=In(vt,"DIV",{class:!0});var dt=en(v);o=In(dt,"H2",{class:!0,"data-svelte-h":!0}),Zl(o)!=="svelte-1vw7qz9"&&(o.textContent=k),O=dr(dt),Yr(j.$$.fragment,dt),dt.forEach(li),oe=dr(vt),et&&et.l(vt),se=dr(vt),be=In(vt,"DIV",{class:!0});var _t=en(be);qe=In(_t,"H2",{class:!0,"data-svelte-h":!0}),Zl(qe)!=="svelte-1y5wjwe"&&(qe.textContent=ke),Qe=dr(_t),Yr(We.$$.fragment,_t),_t.forEach(li),yt=dr(vt),Yr(xe.$$.fragment,vt),vt.forEach(li),Ze.forEach(li),this.h()},h(){vi(i,"class","logo svelte-n87391"),vi(o,"class","svelte-n87391"),vi(v,"class","step svelte-n87391"),vi(qe,"class","svelte-n87391"),vi(be,"class",St=Vc(`step ${!e[0]&&"grayed"}`)+" svelte-n87391"),vi(h,"class","steps svelte-n87391"),vi(t,"class","builder svelte-n87391")},m(Me,Ze){vn(Me,t,Ze),Ri(t,i),wr(r,i,null),Ri(t,c),Ri(t,h),Ri(h,v),Ri(v,o),Ri(v,O),wr(j,v,null),Ri(h,oe),et&&et.m(h,null),Ri(h,se),Ri(h,be),Ri(be,qe),Ri(be,Qe),wr(We,be,null),Ri(h,yt),wr(xe,h,null),Gt=!0},p(Me,[Ze]){var _t;const Fe={};Ze&524288&&(Fe.$$scope={dirty:Ze,ctx:Me}),!J&&Ze&1&&(J=!0,Fe.value=Me[0],Nc(()=>J=!1)),j.$set(Fe),(_t=Me[0])!=null&&_t.next?et?(et.p(Me,Ze),Ze&1&&Pi(et,1)):(et=Aw(Me),et.c(),Pi(et,1),et.m(h,se)):et&&(ia(),Hi(et,1,1,()=>{et=null}),na());const vt={};Ze&524288&&(vt.$$scope={dirty:Ze,ctx:Me}),!ct&&Ze&4&&(ct=!0,vt.value=Me[2],Nc(()=>ct=!1)),We.$set(vt),(!Gt||Ze&1&&St!==(St=Vc(`step ${!Me[0]&&"grayed"}`)+" svelte-n87391"))&&vi(be,"class",St);const dt={};Ze&524288&&(dt.$$scope={dirty:Ze,ctx:Me}),xe.$set(dt)},i(Me){Gt||(Pi(r.$$.fragment,Me),Pi(j.$$.fragment,Me),Pi(et),Pi(We.$$.fragment,Me),Pi(xe.$$.fragment,Me),Gt=!0)},o(Me){Hi(r.$$.fragment,Me),Hi(j.$$.fragment,Me),Hi(et),Hi(We.$$.fragment,Me),Hi(xe.$$.fragment,Me),Gt=!1},d(Me){Me&&li(t),Sr(r),Sr(j),et&&et.d(),Sr(We),Sr(xe)}}}function jz(e,t,i){let{showEcoregions:r}=t,{build:c}=t,{nullRegion:h}=t;const v=[{name:"All of California",next:null},{name:"By Ecoregion",next:{name:"ecoregion",options:[{name:"Ecoregion 1"},{name:"Ecoregion 2"},{name:"Ecoregion 3"}]}},{name:"Surface",next:"object"}];let{subNullRegion:o}=t,{altRegion:k}=t;const O=v;function j(be){h=be,i(0,h)}function J(be){o=be,i(1,o)}function oe(be){k=be,i(2,k)}const se=()=>c();return e.$$set=be=>{"showEcoregions"in be&&i(6,r=be.showEcoregions),"build"in be&&i(3,c=be.build),"nullRegion"in be&&i(0,h=be.nullRegion),"subNullRegion"in be&&i(1,o=be.subNullRegion),"altRegion"in be&&i(2,k=be.altRegion)},e.$$.update=()=>{var be;e.$$.dirty&65&&(h&&((be=h.next)==null?void 0:be.name)==="ecoregion"?r(!0):r(!1))},[h,o,k,c,v,O,r,j,J,oe,se]}class Wz extends Ds{constructor(t){super(),Ls(this,t,jz,Zz,vs,{showEcoregions:6,build:3,nullRegion:0,subNullRegion:1,altRegion:2})}}function cw(e,t,i){const r=e.slice();return r[13]=t[i],r}function hw(e){let t,i,r,c,h,v,o="x",k,O,j,J,oe,se;function be(We){e[11](We)}let qe={class:"shaped",variant:"outlined",$$slots:{default:[Xz]},$$scope:{ctx:e}};e[0]!==void 0&&(qe.value=e[0]),i=new gm({props:qe}),ts.push(()=>Uc(i,"value",be));let ke=!e[9]&&dw(),Qe=e[9]&&pw(e);return{c(){t=En("div"),xr(i.$$.fragment),c=fr(),h=En("div"),v=En("button"),v.textContent=o,k=fr(),ke&&ke.c(),O=fr(),j=En("div"),Qe&&Qe.c(),this.h()},l(We){t=In(We,"DIV",{class:!0});var ct=en(t);Yr(i.$$.fragment,ct),c=dr(ct),h=In(ct,"DIV",{class:!0});var St=en(h);v=In(St,"BUTTON",{class:!0,"data-svelte-h":!0}),Zl(v)!=="svelte-18oet5b"&&(v.textContent=o),St.forEach(li),k=dr(ct),ke&&ke.l(ct),ct.forEach(li),O=dr(We),j=In(We,"DIV",{class:!0});var yt=en(j);Qe&&Qe.l(yt),yt.forEach(li),this.h()},h(){vi(v,"class","svelte-lyzbnh"),vi(h,"class","close svelte-lyzbnh"),vi(t,"class","header svelte-lyzbnh"),vi(j,"class","content svelte-lyzbnh")},m(We,ct){vn(We,t,ct),wr(i,t,null),Ri(t,c),Ri(t,h),Ri(h,v),Ri(t,k),ke&&ke.m(t,null),vn(We,O,ct),vn(We,j,ct),Qe&&Qe.m(j,null),J=!0,oe||(se=Os(v,"click",e[12]),oe=!0)},p(We,ct){const St={};ct&65568&&(St.$$scope={dirty:ct,ctx:We}),!r&&ct&1&&(r=!0,St.value=We[0],Nc(()=>r=!1)),i.$set(St),We[9]?ke&&(ke.d(1),ke=null):ke||(ke=dw(),ke.c(),ke.m(t,null)),We[9]?Qe?(Qe.p(We,ct),ct&512&&Pi(Qe,1)):(Qe=pw(We),Qe.c(),Pi(Qe,1),Qe.m(j,null)):Qe&&(ia(),Hi(Qe,1,1,()=>{Qe=null}),na())},i(We){J||(Pi(i.$$.fragment,We),Pi(Qe),J=!0)},o(We){Hi(i.$$.fragment,We),Hi(Qe),J=!1},d(We){We&&(li(t),li(O),li(j)),Sr(i),ke&&ke.d(),Qe&&Qe.d(),oe=!1,se()}}}function Yz(e){let t=e[13]+"",i;return{c(){i=ja(t)},l(r){i=Wa(r,t)},m(r,c){vn(r,i,c)},p(r,c){c&32&&t!==(t=r[13]+"")&&Fu(i,t)},d(r){r&&li(i)}}}function fw(e){let t,i;return t=new Jm({props:{value:e[13],$$slots:{default:[Yz]},$$scope:{ctx:e}}}),{c(){xr(t.$$.fragment)},l(r){Yr(t.$$.fragment,r)},m(r,c){wr(t,r,c),i=!0},p(r,c){const h={};c&32&&(h.value=r[13]),c&65568&&(h.$$scope={dirty:c,ctx:r}),t.$set(h)},i(r){i||(Pi(t.$$.fragment,r),i=!0)},o(r){Hi(t.$$.fragment,r),i=!1},d(r){Sr(t,r)}}}function Xz(e){let t,i,r=nl(e[5]),c=[];for(let v=0;v<r.length;v+=1)c[v]=fw(cw(e,r,v));const h=v=>Hi(c[v],1,1,()=>{c[v]=null});return{c(){for(let v=0;v<c.length;v+=1)c[v].c();t=Rr()},l(v){for(let o=0;o<c.length;o+=1)c[o].l(v);t=Rr()},m(v,o){for(let k=0;k<c.length;k+=1)c[k]&&c[k].m(v,o);vn(v,t,o),i=!0},p(v,o){if(o&32){r=nl(v[5]);let k;for(k=0;k<r.length;k+=1){const O=cw(v,r,k);c[k]?(c[k].p(O,o),Pi(c[k],1)):(c[k]=fw(O),c[k].c(),Pi(c[k],1),c[k].m(t.parentNode,t))}for(ia(),k=r.length;k<c.length;k+=1)h(k);na()}},i(v){if(!i){for(let o=0;o<r.length;o+=1)Pi(c[o]);i=!0}},o(v){c=c.filter(Boolean);for(let o=0;o<c.length;o+=1)Hi(c[o]);i=!1},d(v){v&&li(t),ph(c,v)}}}function dw(e){let t,i="<span>No data for this hexagon!</span>";return{c(){t=En("div"),t.innerHTML=i},l(r){t=In(r,"DIV",{"data-svelte-h":!0}),Zl(t)!=="svelte-3kl6sg"&&(t.innerHTML=i)},m(r,c){vn(r,t,c)},d(r){r&&li(t)}}}function pw(e){let t,i,r,c;return t=new LM({props:{colorScheme:e[4],metric:e[2],point:[[e[1].properties.tree_sizes,e[1].properties[e[2]]]]}}),r=new Lz({props:{clade:e[0],newick:e[1].properties.tree,hex_id:e[1].properties.id}}),{c(){xr(t.$$.fragment),i=fr(),xr(r.$$.fragment)},l(h){Yr(t.$$.fragment,h),i=dr(h),Yr(r.$$.fragment,h)},m(h,v){wr(t,h,v),vn(h,i,v),wr(r,h,v),c=!0},p(h,v){const o={};v&16&&(o.colorScheme=h[4]),v&4&&(o.metric=h[2]),v&6&&(o.point=[[h[1].properties.tree_sizes,h[1].properties[h[2]]]]),t.$set(o);const k={};v&1&&(k.clade=h[0]),v&2&&(k.newick=h[1].properties.tree),v&2&&(k.hex_id=h[1].properties.id),r.$set(k)},i(h){c||(Pi(t.$$.fragment,h),Pi(r.$$.fragment,h),c=!0)},o(h){Hi(t.$$.fragment,h),Hi(r.$$.fragment,h),c=!1},d(h){h&&li(i),Sr(t,h),Sr(r,h)}}}function gw(e){let t,i;return t=new Wz({props:{showEcoregions:e[7],build:e[8]}}),{c(){xr(t.$$.fragment)},l(r){Yr(t.$$.fragment,r)},m(r,c){wr(t,r,c),i=!0},p(r,c){const h={};c&128&&(h.showEcoregions=r[7]),c&256&&(h.build=r[8]),t.$set(h)},i(r){i||(Pi(t.$$.fragment,r),i=!0)},o(r){Hi(t.$$.fragment,r),i=!1},d(r){Sr(t,r)}}}function Kz(e){let t,i,r,c=e[6]&&hw(e),h=!e[6]&&gw(e);return{c(){t=En("div"),c&&c.c(),i=fr(),h&&h.c(),this.h()},l(v){t=In(v,"DIV",{class:!0});var o=en(t);c&&c.l(o),i=dr(o),h&&h.l(o),o.forEach(li),this.h()},h(){vi(t,"class",Vc("modal")+" svelte-lyzbnh")},m(v,o){vn(v,t,o),c&&c.m(t,null),Ri(t,i),h&&h.m(t,null),r=!0},p(v,[o]){v[6]?c?(c.p(v,o),o&64&&Pi(c,1)):(c=hw(v),c.c(),Pi(c,1),c.m(t,i)):c&&(ia(),Hi(c,1,1,()=>{c=null}),na()),v[6]?h&&(ia(),Hi(h,1,1,()=>{h=null}),na()):h?(h.p(v,o),o&64&&Pi(h,1)):(h=gw(v),h.c(),Pi(h,1),h.m(t,null))},i(v){r||(Pi(c),Pi(h),r=!0)},o(v){Hi(c),Hi(h),r=!1},d(v){v&&li(t),c&&c.d(),h&&h.d()}}}function Jz(e,t,i){let{selectionData:r}=t,{metric:c}=t,{updateData:h}=t,{colorScheme:v}=t,{clade:o}=t,{updateClade:k}=t,{clades:O}=t,{isBuilt:j}=t,{showEcoregions:J}=t,{build:oe}=t,se;function be(ke){o=ke,i(0,o)}const qe=()=>h(null);return e.$$set=ke=>{"selectionData"in ke&&i(1,r=ke.selectionData),"metric"in ke&&i(2,c=ke.metric),"updateData"in ke&&i(3,h=ke.updateData),"colorScheme"in ke&&i(4,v=ke.colorScheme),"clade"in ke&&i(0,o=ke.clade),"updateClade"in ke&&i(10,k=ke.updateClade),"clades"in ke&&i(5,O=ke.clades),"isBuilt"in ke&&i(6,j=ke.isBuilt),"showEcoregions"in ke&&i(7,J=ke.showEcoregions),"build"in ke&&i(8,oe=ke.build)},e.$$.update=()=>{e.$$.dirty&6&&r&&i(9,se=r.properties&&r.properties[c]!==-1),e.$$.dirty&1025&&k(o)},[o,r,c,h,v,O,j,J,oe,se,k,be,qe]}class $z extends Ds{constructor(t){super(),Ls(this,t,Jz,Kz,vs,{selectionData:1,metric:2,updateData:3,colorScheme:4,clade:0,updateClade:10,clades:5,isBuilt:6,showEcoregions:7,build:8})}}const yy=Symbol.for("svelte-maplibre");function gp(){return Bo(yy)}function eF(e){let t=new WeakMap;return i=>{var v;let r=t.get(i.originalEvent);if(r!==void 0)return r;let h=(v=i.target.queryRenderedFeatures(i.point).find(o=>{var k;return(k=e.get(o.layer.id))==null?void 0:k.interactive}))==null?void 0:v.layer.id;return t.set(i.originalEvent,h),h}}function tF(){let e=new Map;return Za(yy,{map:Bu(null),source:k_(null),layer:k_(null),popupTarget:k_(null),cluster:Bu(),loadedImages:Bu(new Set),minzoom:Bu(0),maxzoom:Bu(24),layerEvent:Bu(null),layerInfo:e,eventTopMost:eF(e)})}function mw(e){return{subscribe:e.subscribe}}function iF({key:e,setPopupTarget:t=!1,setCluster:i=!1,setMouseEvent:r=!1}){let c=gp(),h=Bu(null),v=mw(h),o={...c,[e]:mw(h)};if(t&&(o.popupTarget=v),r){let k=Bu(null);o.layerEvent=k,c.layerEvent=k}return i&&(o.cluster=Bu()),Za(yy,o),{...c,self:h}}function nF(){return iF({key:"popupTarget",setPopupTarget:!0,setMouseEvent:!0})}var i8={exports:{}};(function(e,t){(function(i,r){e.exports=r()})(fh,function(){var i,r,c;function h(o,k){if(!i)i=k;else if(!r)r=k;else{var O="var sharedChunk = {}; ("+i+")(sharedChunk); ("+r+")(sharedChunk);",j={};i(j),c=k(j),typeof window<"u"&&(c.workerUrl=window.URL.createObjectURL(new Blob([O],{type:"text/javascript"})))}}h(["exports"],function(o){function k(u,a,p,x){return new(p||(p=Promise))(function(L,V){function G(_e){try{le(x.next(_e))}catch(Pe){V(Pe)}}function ee(_e){try{le(x.throw(_e))}catch(Pe){V(Pe)}}function le(_e){var Pe;_e.done?L(_e.value):(Pe=_e.value,Pe instanceof p?Pe:new p(function(Ge){Ge(Pe)})).then(G,ee)}le((x=x.apply(u,a||[])).next())})}function O(u){return u&&u.__esModule&&Object.prototype.hasOwnProperty.call(u,"default")?u.default:u}typeof SuppressedError=="function"&&SuppressedError;var j=J;function J(u,a){this.x=u,this.y=a}J.prototype={clone:function(){return new J(this.x,this.y)},add:function(u){return this.clone()._add(u)},sub:function(u){return this.clone()._sub(u)},multByPoint:function(u){return this.clone()._multByPoint(u)},divByPoint:function(u){return this.clone()._divByPoint(u)},mult:function(u){return this.clone()._mult(u)},div:function(u){return this.clone()._div(u)},rotate:function(u){return this.clone()._rotate(u)},rotateAround:function(u,a){return this.clone()._rotateAround(u,a)},matMult:function(u){return this.clone()._matMult(u)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(u){return this.x===u.x&&this.y===u.y},dist:function(u){return Math.sqrt(this.distSqr(u))},distSqr:function(u){var a=u.x-this.x,p=u.y-this.y;return a*a+p*p},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(u){return Math.atan2(this.y-u.y,this.x-u.x)},angleWith:function(u){return this.angleWithSep(u.x,u.y)},angleWithSep:function(u,a){return Math.atan2(this.x*a-this.y*u,this.x*u+this.y*a)},_matMult:function(u){var a=u[2]*this.x+u[3]*this.y;return this.x=u[0]*this.x+u[1]*this.y,this.y=a,this},_add:function(u){return this.x+=u.x,this.y+=u.y,this},_sub:function(u){return this.x-=u.x,this.y-=u.y,this},_mult:function(u){return this.x*=u,this.y*=u,this},_div:function(u){return this.x/=u,this.y/=u,this},_multByPoint:function(u){return this.x*=u.x,this.y*=u.y,this},_divByPoint:function(u){return this.x/=u.x,this.y/=u.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var u=this.y;return this.y=this.x,this.x=-u,this},_rotate:function(u){var a=Math.cos(u),p=Math.sin(u),x=p*this.x+a*this.y;return this.x=a*this.x-p*this.y,this.y=x,this},_rotateAround:function(u,a){var p=Math.cos(u),x=Math.sin(u),L=a.y+x*(this.x-a.x)+p*(this.y-a.y);return this.x=a.x+p*(this.x-a.x)-x*(this.y-a.y),this.y=L,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},J.convert=function(u){return u instanceof J?u:Array.isArray(u)?new J(u[0],u[1]):u};var oe=O(j),se=be;function be(u,a,p,x){this.cx=3*u,this.bx=3*(p-u)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*a,this.by=3*(x-a)-this.cy,this.ay=1-this.cy-this.by,this.p1x=u,this.p1y=a,this.p2x=p,this.p2y=x}be.prototype={sampleCurveX:function(u){return((this.ax*u+this.bx)*u+this.cx)*u},sampleCurveY:function(u){return((this.ay*u+this.by)*u+this.cy)*u},sampleCurveDerivativeX:function(u){return(3*this.ax*u+2*this.bx)*u+this.cx},solveCurveX:function(u,a){if(a===void 0&&(a=1e-6),u<0)return 0;if(u>1)return 1;for(var p=u,x=0;x<8;x++){var L=this.sampleCurveX(p)-u;if(Math.abs(L)<a)return p;var V=this.sampleCurveDerivativeX(p);if(Math.abs(V)<1e-6)break;p-=L/V}var G=0,ee=1;for(p=u,x=0;x<20&&(L=this.sampleCurveX(p),!(Math.abs(L-u)<a));x++)u>L?G=p:ee=p,p=.5*(ee-G)+G;return p},solve:function(u,a){return this.sampleCurveY(this.solveCurveX(u,a))}};var qe=O(se);let ke,Qe;function We(){return ke==null&&(ke=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),ke}function ct(){if(Qe==null&&(Qe=!1,We())){const a=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(a){for(let x=0;x<5*5;x++){const L=4*x;a.fillStyle=`rgb(${L},${L+1},${L+2})`,a.fillRect(x%5,Math.floor(x/5),1,1)}const p=a.getImageData(0,0,5,5).data;for(let x=0;x<5*5*4;x++)if(x%4!=3&&p[x]!==x){Qe=!0;break}}}return Qe||!1}function St(u,a,p,x){const L=new qe(u,a,p,x);return function(V){return L.solve(V)}}const yt=St(.25,.1,.25,1);function xe(u,a,p){return Math.min(p,Math.max(a,u))}function Gt(u,a,p){const x=p-a,L=((u-a)%x+x)%x+a;return L===a?p:L}function Ve(u,...a){for(const p of a)for(const x in p)u[x]=p[x];return u}let Je=1;function et(u,a,p){const x={};for(const L in u)x[L]=a.call(p||this,u[L],L,u);return x}function lt(u,a,p){const x={};for(const L in u)a.call(p||this,u[L],L,u)&&(x[L]=u[L]);return x}function ut(u){return Array.isArray(u)?u.map(ut):typeof u=="object"&&u?et(u,ut):u}const Ke={};function Me(u){Ke[u]||(typeof console<"u"&&console.warn(u),Ke[u]=!0)}function Ze(u,a,p){return(p.y-u.y)*(a.x-u.x)>(a.y-u.y)*(p.x-u.x)}function Fe(u){let a=0;for(let p,x,L=0,V=u.length,G=V-1;L<V;G=L++)p=u[L],x=u[G],a+=(x.x-p.x)*(p.y+x.y);return a}function vt(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}let dt=null;function _t(u){return typeof ImageBitmap<"u"&&u instanceof ImageBitmap}const ei="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function di(u,a,p,x,L){return k(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const V=new VideoFrame(u,{timestamp:0});try{const G=V==null?void 0:V.format;if(!G||!G.startsWith("BGR")&&!G.startsWith("RGB"))throw new Error(`Unrecognized format ${G}`);const ee=G.startsWith("BGR"),le=new Uint8ClampedArray(x*L*4);if(yield V.copyTo(le,function(_e,Pe,Ge,it,At){const ht=4*Math.max(-Pe,0),Ct=(Math.max(0,Ge)-Ge)*it*4+ht,Tt=4*it,Dt=Math.max(0,Pe),Yt=Math.max(0,Ge);return{rect:{x:Dt,y:Yt,width:Math.min(_e.width,Pe+it)-Dt,height:Math.min(_e.height,Ge+At)-Yt},layout:[{offset:Ct,stride:Tt}]}}(u,a,p,x,L)),ee)for(let _e=0;_e<le.length;_e+=4){const Pe=le[_e];le[_e]=le[_e+2],le[_e+2]=Pe}return le}finally{V.close()}})}let yi,Ti,Vi,wi;const mi={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(u){const a=requestAnimationFrame(u);return{cancel:()=>cancelAnimationFrame(a)}},getImageData(u,a=0){return this.getImageCanvasContext(u).getImageData(-a,-a,u.width+2*a,u.height+2*a)},getImageCanvasContext(u){const a=window.document.createElement("canvas"),p=a.getContext("2d",{willReadFrequently:!0});if(!p)throw new Error("failed to create canvas 2d context");return a.width=u.width,a.height=u.height,p.drawImage(u,0,0,u.width,u.height),p},resolveURL:u=>(Vi||(Vi=document.createElement("a")),Vi.href=u,Vi.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(wi==null&&(wi=matchMedia("(prefers-reduced-motion: reduce)")),wi.matches)}},Wt={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};class Di extends Error{constructor(a,p,x,L){super(`AJAXError: ${p} (${a}): ${x}`),this.status=a,this.statusText=p,this.url=x,this.body=L}}const $t=vt()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href,Lt=u=>Wt.REGISTERED_PROTOCOLS[u.substring(0,u.indexOf("://"))];function ni(u,a){const p=new AbortController,x=new Request(u.url,{method:u.method||"GET",body:u.body,credentials:u.credentials,headers:u.headers,cache:u.cache,referrer:$t(),signal:p.signal});let L=!1,V=!1;return u.type==="json"&&x.headers.set("Accept","application/json"),V||fetch(x).then(G=>G.ok?(ee=>{(u.type==="arrayBuffer"||u.type==="image"?ee.arrayBuffer():u.type==="json"?ee.json():ee.text()).then(le=>{V||(L=!0,a(null,le,ee.headers.get("Cache-Control"),ee.headers.get("Expires")))}).catch(le=>{V||a(new Error(le.message))})})(G):G.blob().then(ee=>a(new Di(G.status,G.statusText,u.url,ee)))).catch(G=>{G.code!==20&&a(new Error(G.message))}),{cancel:()=>{V=!0,L||p.abort()}}}const si=function(u,a){if(/:\/\//.test(u.url)&&!/^https?:|^file:/.test(u.url)){if(vt()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",u,a);if(!vt())return(Lt(u.url)||ni)(u,a)}if(!(/^file:/.test(p=u.url)||/^file:/.test($t())&&!/^\w+:/.test(p))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return ni(u,a);if(vt()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",u,a,void 0,!0)}var p;return function(x,L){const V=new XMLHttpRequest;V.open(x.method||"GET",x.url,!0),x.type!=="arrayBuffer"&&x.type!=="image"||(V.responseType="arraybuffer");for(const G in x.headers)V.setRequestHeader(G,x.headers[G]);return x.type==="json"&&(V.responseType="text",V.setRequestHeader("Accept","application/json")),V.withCredentials=x.credentials==="include",V.onerror=()=>{L(new Error(V.statusText))},V.onload=()=>{if((V.status>=200&&V.status<300||V.status===0)&&V.response!==null){let G=V.response;if(x.type==="json")try{G=JSON.parse(V.response)}catch(ee){return L(ee)}L(null,G,V.getResponseHeader("Cache-Control"),V.getResponseHeader("Expires"))}else{const G=new Blob([V.response],{type:V.getResponseHeader("Content-Type")});L(new Di(V.status,V.statusText,x.url,G))}},V.send(x.body),{cancel:()=>V.abort()}}(u,a)},Oi=function(u,a){return si(Ve(u,{type:"arrayBuffer"}),a)};function zi(u){if(!u||u.indexOf("://")<=0||u.indexOf("data:image/")===0||u.indexOf("blob:")===0)return!0;const a=new URL(u),p=window.location;return a.protocol===p.protocol&&a.host===p.host}function oi(u,a,p){p[u]&&p[u].indexOf(a)!==-1||(p[u]=p[u]||[],p[u].push(a))}function $i(u,a,p){if(p&&p[u]){const x=p[u].indexOf(a);x!==-1&&p[u].splice(x,1)}}class ki{constructor(a,p={}){Ve(this,p),this.type=a}}class sn extends ki{constructor(a,p={}){super("error",Ve({error:a},p))}}class ar{on(a,p){return this._listeners=this._listeners||{},oi(a,p,this._listeners),this}off(a,p){return $i(a,p,this._listeners),$i(a,p,this._oneTimeListeners),this}once(a,p){return p?(this._oneTimeListeners=this._oneTimeListeners||{},oi(a,p,this._oneTimeListeners),this):new Promise(x=>this.once(a,x))}fire(a,p){typeof a=="string"&&(a=new ki(a,p||{}));const x=a.type;if(this.listens(x)){a.target=this;const L=this._listeners&&this._listeners[x]?this._listeners[x].slice():[];for(const ee of L)ee.call(this,a);const V=this._oneTimeListeners&&this._oneTimeListeners[x]?this._oneTimeListeners[x].slice():[];for(const ee of V)$i(x,ee,this._oneTimeListeners),ee.call(this,a);const G=this._eventedParent;G&&(Ve(a,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),G.fire(a))}else a instanceof sn&&console.error(a.error);return this}listens(a){return this._listeners&&this._listeners[a]&&this._listeners[a].length>0||this._oneTimeListeners&&this._oneTimeListeners[a]&&this._oneTimeListeners[a].length>0||this._eventedParent&&this._eventedParent.listens(a)}setEventedParent(a,p){return this._eventedParent=a,this._eventedParentData=p,this}}var ti={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const Wi=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function ir(u,a){const p={};for(const x in u)x!=="ref"&&(p[x]=u[x]);return Wi.forEach(x=>{x in a&&(p[x]=a[x])}),p}function gn(u,a){if(Array.isArray(u)){if(!Array.isArray(a)||u.length!==a.length)return!1;for(let p=0;p<u.length;p++)if(!gn(u[p],a[p]))return!1;return!0}if(typeof u=="object"&&u!==null&&a!==null){if(typeof a!="object"||Object.keys(u).length!==Object.keys(a).length)return!1;for(const p in u)if(!gn(u[p],a[p]))return!1;return!0}return u===a}const kn={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function an(u,a,p){p.push({command:kn.addSource,args:[u,a[u]]})}function d(u,a,p){a.push({command:kn.removeSource,args:[u]}),p[u]=!0}function y(u,a,p,x){d(u,p,x),an(u,a,p)}function D(u,a,p){let x;for(x in u[p])if(Object.prototype.hasOwnProperty.call(u[p],x)&&x!=="data"&&!gn(u[p][x],a[p][x]))return!1;for(x in a[p])if(Object.prototype.hasOwnProperty.call(a[p],x)&&x!=="data"&&!gn(u[p][x],a[p][x]))return!1;return!0}function U(u,a,p,x,L,V){let G;for(G in a=a||{},u=u||{})Object.prototype.hasOwnProperty.call(u,G)&&(gn(u[G],a[G])||p.push({command:V,args:[x,G,a[G],L]}));for(G in a)Object.prototype.hasOwnProperty.call(a,G)&&!Object.prototype.hasOwnProperty.call(u,G)&&(gn(u[G],a[G])||p.push({command:V,args:[x,G,a[G],L]}))}function Q(u){return u.id}function K(u,a){return u[a.id]=a,u}class ie{constructor(a,p,x,L){this.message=(a?`${a}: `:"")+x,L&&(this.identifier=L),p!=null&&p.__line__&&(this.line=p.__line__)}}function Ae(u,...a){for(const p of a)for(const x in p)u[x]=p[x];return u}class fe extends Error{constructor(a,p){super(p),this.message=p,this.key=a}}class ye{constructor(a,p=[]){this.parent=a,this.bindings={};for(const[x,L]of p)this.bindings[x]=L}concat(a){return new ye(this,a)}get(a){if(this.bindings[a])return this.bindings[a];if(this.parent)return this.parent.get(a);throw new Error(`${a} not found in scope.`)}has(a){return!!this.bindings[a]||!!this.parent&&this.parent.has(a)}}const Le={kind:"null"},we={kind:"number"},Te={kind:"string"},Ce={kind:"boolean"},je={kind:"color"},Ne={kind:"object"},Ue={kind:"value"},de={kind:"collator"},ue={kind:"formatted"},Y={kind:"padding"},ne={kind:"resolvedImage"},he={kind:"variableAnchorOffsetCollection"};function me(u,a){return{kind:"array",itemType:u,N:a}}function pe(u){if(u.kind==="array"){const a=pe(u.itemType);return typeof u.N=="number"?`array<${a}, ${u.N}>`:u.itemType.kind==="value"?"array":`array<${a}>`}return u.kind}const Oe=[Le,we,Te,Ce,je,ue,Ne,me(Ue),Y,ne,he];function ze(u,a){if(a.kind==="error")return null;if(u.kind==="array"){if(a.kind==="array"&&(a.N===0&&a.itemType.kind==="value"||!ze(u.itemType,a.itemType))&&(typeof u.N!="number"||u.N===a.N))return null}else{if(u.kind===a.kind)return null;if(u.kind==="value"){for(const p of Oe)if(!ze(p,a))return null}}return`Expected ${pe(u)} but found ${pe(a)} instead.`}function Be(u,a){return a.some(p=>p.kind===u.kind)}function Ye(u,a){return a.some(p=>p==="null"?u===null:p==="array"?Array.isArray(u):p==="object"?u&&!Array.isArray(u)&&typeof u=="object":p===typeof u)}function Xe(u,a){return u.kind==="array"&&a.kind==="array"?u.itemType.kind===a.itemType.kind&&typeof u.N=="number":u.kind===a.kind}const ge=.96422,Ee=.82521,tt=4/29,pt=6/29,n=3*pt*pt,ce=pt*pt*pt,Zt=Math.PI/180,Jt=180/Math.PI;function ui(u){return(u%=360)<0&&(u+=360),u}function Vt([u,a,p,x]){let L,V;const G=Ei((.2225045*(u=qt(u))+.7168786*(a=qt(a))+.0606169*(p=qt(p)))/1);u===a&&a===p?L=V=G:(L=Ei((.4360747*u+.3850649*a+.1430804*p)/ge),V=Ei((.0139322*u+.0971045*a+.7141733*p)/Ee));const ee=116*G-16;return[ee<0?0:ee,500*(L-G),200*(G-V),x]}function qt(u){return u<=.04045?u/12.92:Math.pow((u+.055)/1.055,2.4)}function Ei(u){return u>ce?Math.pow(u,1/3):u/n+tt}function Ai([u,a,p,x]){let L=(u+16)/116,V=isNaN(a)?L:L+a/500,G=isNaN(p)?L:L-p/200;return L=1*Rt(L),V=ge*Rt(V),G=Ee*Rt(G),[pi(3.1338561*V-1.6168667*L-.4906146*G),pi(-.9787684*V+1.9161415*L+.033454*G),pi(.0719453*V-.2289914*L+1.4052427*G),x]}function pi(u){return(u=u<=.00304?12.92*u:1.055*Math.pow(u,1/2.4)-.055)<0?0:u>1?1:u}function Rt(u){return u>pt?u*u*u:n*(u-tt)}function Yi(u){return parseInt(u.padEnd(2,u),16)/255}function Rn(u,a){return wn(a?u/100:u,0,1)}function wn(u,a,p){return Math.min(Math.max(a,u),p)}function pn(u){return!u.some(Number.isNaN)}const vr={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class Mi{constructor(a,p,x,L=1,V=!0){this.r=a,this.g=p,this.b=x,this.a=L,V||(this.r*=L,this.g*=L,this.b*=L,L||this.overwriteGetter("rgb",[a,p,x,L]))}static parse(a){if(a instanceof Mi)return a;if(typeof a!="string")return;const p=function(x){if((x=x.toLowerCase().trim())==="transparent")return[0,0,0,0];const L=vr[x];if(L){const[G,ee,le]=L;return[G/255,ee/255,le/255,1]}if(x.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(x)){const G=x.length<6?1:2;let ee=1;return[Yi(x.slice(ee,ee+=G)),Yi(x.slice(ee,ee+=G)),Yi(x.slice(ee,ee+=G)),Yi(x.slice(ee,ee+G)||"ff")]}if(x.startsWith("rgb")){const G=x.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(G){const[ee,le,_e,Pe,Ge,it,At,ht,Ct,Tt,Dt,Yt]=G,Qt=[Pe||" ",At||" ",Tt].join("");if(Qt==="  "||Qt==="  /"||Qt===",,"||Qt===",,,"){const Kt=[_e,it,Ct].join(""),fi=Kt==="%%%"?100:Kt===""?255:0;if(fi){const Li=[wn(+le/fi,0,1),wn(+Ge/fi,0,1),wn(+ht/fi,0,1),Dt?Rn(+Dt,Yt):1];if(pn(Li))return Li}}return}}const V=x.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(V){const[G,ee,le,_e,Pe,Ge,it,At,ht]=V,Ct=[le||" ",Pe||" ",it].join("");if(Ct==="  "||Ct==="  /"||Ct===",,"||Ct===",,,"){const Tt=[+ee,wn(+_e,0,100),wn(+Ge,0,100),At?Rn(+At,ht):1];if(pn(Tt))return function([Dt,Yt,Qt,Kt]){function fi(Li){const hn=(Li+Dt/30)%12,Cn=Yt*Math.min(Qt,1-Qt);return Qt-Cn*Math.max(-1,Math.min(hn-3,9-hn,1))}return Dt=ui(Dt),Yt/=100,Qt/=100,[fi(0),fi(8),fi(4),Kt]}(Tt)}}}(a);return p?new Mi(...p,!1):void 0}get rgb(){const{r:a,g:p,b:x,a:L}=this,V=L||1/0;return this.overwriteGetter("rgb",[a/V,p/V,x/V,L])}get hcl(){return this.overwriteGetter("hcl",function(a){const[p,x,L,V]=Vt(a),G=Math.sqrt(x*x+L*L);return[Math.round(1e4*G)?ui(Math.atan2(L,x)*Jt):NaN,G,p,V]}(this.rgb))}get lab(){return this.overwriteGetter("lab",Vt(this.rgb))}overwriteGetter(a,p){return Object.defineProperty(this,a,{value:p}),p}toString(){const[a,p,x,L]=this.rgb;return`rgba(${[a,p,x].map(V=>Math.round(255*V)).join(",")},${L})`}}Mi.black=new Mi(0,0,0,1),Mi.white=new Mi(1,1,1,1),Mi.transparent=new Mi(0,0,0,0),Mi.red=new Mi(1,0,0,1);class nr{constructor(a,p,x){this.sensitivity=a?p?"variant":"case":p?"accent":"base",this.locale=x,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(a,p){return this.collator.compare(a,p)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class fn{constructor(a,p,x,L,V){this.text=a,this.image=p,this.scale=x,this.fontStack=L,this.textColor=V}}class Pt{constructor(a){this.sections=a}static fromString(a){return new Pt([new fn(a,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(a=>a.text.length!==0||a.image&&a.image.name.length!==0)}static factory(a){return a instanceof Pt?a:Pt.fromString(a)}toString(){return this.sections.length===0?"":this.sections.map(a=>a.text).join("")}}class Fi{constructor(a){this.values=a.slice()}static parse(a){if(a instanceof Fi)return a;if(typeof a=="number")return new Fi([a,a,a,a]);if(Array.isArray(a)&&!(a.length<1||a.length>4)){for(const p of a)if(typeof p!="number")return;switch(a.length){case 1:a=[a[0],a[0],a[0],a[0]];break;case 2:a=[a[0],a[1],a[0],a[1]];break;case 3:a=[a[0],a[1],a[2],a[1]]}return new Fi(a)}}toString(){return JSON.stringify(this.values)}}const xt=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class nn{constructor(a){this.values=a.slice()}static parse(a){if(a instanceof nn)return a;if(Array.isArray(a)&&!(a.length<1)&&a.length%2==0){for(let p=0;p<a.length;p+=2){const x=a[p],L=a[p+1];if(typeof x!="string"||!xt.has(x)||!Array.isArray(L)||L.length!==2||typeof L[0]!="number"||typeof L[1]!="number")return}return new nn(a)}}toString(){return JSON.stringify(this.values)}}class Cr{constructor(a){this.name=a.name,this.available=a.available}toString(){return this.name}static fromString(a){return a?new Cr({name:a,available:!1}):null}}function ys(u,a,p,x){return typeof u=="number"&&u>=0&&u<=255&&typeof a=="number"&&a>=0&&a<=255&&typeof p=="number"&&p>=0&&p<=255?x===void 0||typeof x=="number"&&x>=0&&x<=1?null:`Invalid rgba value [${[u,a,p,x].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof x=="number"?[u,a,p,x]:[u,a,p]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Gr(u){if(u===null||typeof u=="string"||typeof u=="boolean"||typeof u=="number"||u instanceof Mi||u instanceof nr||u instanceof Pt||u instanceof Fi||u instanceof nn||u instanceof Cr)return!0;if(Array.isArray(u)){for(const a of u)if(!Gr(a))return!1;return!0}if(typeof u=="object"){for(const a in u)if(!Gr(u[a]))return!1;return!0}return!1}function Et(u){if(u===null)return Le;if(typeof u=="string")return Te;if(typeof u=="boolean")return Ce;if(typeof u=="number")return we;if(u instanceof Mi)return je;if(u instanceof nr)return de;if(u instanceof Pt)return ue;if(u instanceof Fi)return Y;if(u instanceof nn)return he;if(u instanceof Cr)return ne;if(Array.isArray(u)){const a=u.length;let p;for(const x of u){const L=Et(x);if(p){if(p===L)continue;p=Ue;break}p=L}return me(p||Ue,a)}return Ne}function Hn(u){const a=typeof u;return u===null?"":a==="string"||a==="number"||a==="boolean"?String(u):u instanceof Mi||u instanceof Pt||u instanceof Fi||u instanceof nn||u instanceof Cr?u.toString():JSON.stringify(u)}class ft{constructor(a,p){this.type=a,this.value=p}static parse(a,p){if(a.length!==2)return p.error(`'literal' expression requires exactly one argument, but found ${a.length-1} instead.`);if(!Gr(a[1]))return p.error("invalid value");const x=a[1];let L=Et(x);const V=p.expectedType;return L.kind!=="array"||L.N!==0||!V||V.kind!=="array"||typeof V.N=="number"&&V.N!==0||(L=V),new ft(L,x)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class gr{constructor(a){this.name="ExpressionEvaluationError",this.message=a}toJSON(){return this.message}}const Xs={string:Te,number:we,boolean:Ce,object:Ne};class Ks{constructor(a,p){this.type=a,this.args=p}static parse(a,p){if(a.length<2)return p.error("Expected at least one argument.");let x,L=1;const V=a[0];if(V==="array"){let ee,le;if(a.length>2){const _e=a[1];if(typeof _e!="string"||!(_e in Xs)||_e==="object")return p.error('The item type argument of "array" must be one of string, number, boolean',1);ee=Xs[_e],L++}else ee=Ue;if(a.length>3){if(a[2]!==null&&(typeof a[2]!="number"||a[2]<0||a[2]!==Math.floor(a[2])))return p.error('The length argument to "array" must be a positive integer literal',2);le=a[2],L++}x=me(ee,le)}else{if(!Xs[V])throw new Error(`Types doesn't contain name = ${V}`);x=Xs[V]}const G=[];for(;L<a.length;L++){const ee=p.parse(a[L],L,Ue);if(!ee)return null;G.push(ee)}return new Ks(x,G)}evaluate(a){for(let p=0;p<this.args.length;p++){const x=this.args[p].evaluate(a);if(!ze(this.type,Et(x)))return x;if(p===this.args.length-1)throw new gr(`Expected value to be of type ${pe(this.type)}, but found ${pe(Et(x))} instead.`)}throw new Error}eachChild(a){this.args.forEach(a)}outputDefined(){return this.args.every(a=>a.outputDefined())}}const po={"to-boolean":Ce,"to-color":je,"to-number":we,"to-string":Te};class va{constructor(a,p){this.type=a,this.args=p}static parse(a,p){if(a.length<2)return p.error("Expected at least one argument.");const x=a[0];if(!po[x])throw new Error(`Can't parse ${x} as it is not part of the known types`);if((x==="to-boolean"||x==="to-string")&&a.length!==2)return p.error("Expected one argument.");const L=po[x],V=[];for(let G=1;G<a.length;G++){const ee=p.parse(a[G],G,Ue);if(!ee)return null;V.push(ee)}return new va(L,V)}evaluate(a){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(a);case"color":{let p,x;for(const L of this.args){if(p=L.evaluate(a),x=null,p instanceof Mi)return p;if(typeof p=="string"){const V=a.parseColor(p);if(V)return V}else if(Array.isArray(p)&&(x=p.length<3||p.length>4?`Invalid rbga value ${JSON.stringify(p)}: expected an array containing either three or four numeric values.`:ys(p[0],p[1],p[2],p[3]),!x))return new Mi(p[0]/255,p[1]/255,p[2]/255,p[3])}throw new gr(x||`Could not parse color from value '${typeof p=="string"?p:JSON.stringify(p)}'`)}case"padding":{let p;for(const x of this.args){p=x.evaluate(a);const L=Fi.parse(p);if(L)return L}throw new gr(`Could not parse padding from value '${typeof p=="string"?p:JSON.stringify(p)}'`)}case"variableAnchorOffsetCollection":{let p;for(const x of this.args){p=x.evaluate(a);const L=nn.parse(p);if(L)return L}throw new gr(`Could not parse variableAnchorOffsetCollection from value '${typeof p=="string"?p:JSON.stringify(p)}'`)}case"number":{let p=null;for(const x of this.args){if(p=x.evaluate(a),p===null)return 0;const L=Number(p);if(!isNaN(L))return L}throw new gr(`Could not convert ${JSON.stringify(p)} to number.`)}case"formatted":return Pt.fromString(Hn(this.args[0].evaluate(a)));case"resolvedImage":return Cr.fromString(Hn(this.args[0].evaluate(a)));default:return Hn(this.args[0].evaluate(a))}}eachChild(a){this.args.forEach(a)}outputDefined(){return this.args.every(a=>a.outputDefined())}}const $o=["Unknown","Point","LineString","Polygon"];class go{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?$o[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(a){let p=this._parseColorCache[a];return p||(p=this._parseColorCache[a]=Mi.parse(a)),p}}class Is{constructor(a,p,x=[],L,V=new ye,G=[]){this.registry=a,this.path=x,this.key=x.map(ee=>`[${ee}]`).join(""),this.scope=V,this.errors=G,this.expectedType=L,this._isConstant=p}parse(a,p,x,L,V={}){return p?this.concat(p,x,L)._parse(a,V):this._parse(a,V)}_parse(a,p){function x(L,V,G){return G==="assert"?new Ks(V,[L]):G==="coerce"?new va(V,[L]):L}if(a!==null&&typeof a!="string"&&typeof a!="boolean"&&typeof a!="number"||(a=["literal",a]),Array.isArray(a)){if(a.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const L=a[0];if(typeof L!="string")return this.error(`Expression name must be a string, but found ${typeof L} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const V=this.registry[L];if(V){let G=V.parse(a,this);if(!G)return null;if(this.expectedType){const ee=this.expectedType,le=G.type;if(ee.kind!=="string"&&ee.kind!=="number"&&ee.kind!=="boolean"&&ee.kind!=="object"&&ee.kind!=="array"||le.kind!=="value")if(ee.kind!=="color"&&ee.kind!=="formatted"&&ee.kind!=="resolvedImage"||le.kind!=="value"&&le.kind!=="string")if(ee.kind!=="padding"||le.kind!=="value"&&le.kind!=="number"&&le.kind!=="array")if(ee.kind!=="variableAnchorOffsetCollection"||le.kind!=="value"&&le.kind!=="array"){if(this.checkSubtype(ee,le))return null}else G=x(G,ee,p.typeAnnotation||"coerce");else G=x(G,ee,p.typeAnnotation||"coerce");else G=x(G,ee,p.typeAnnotation||"coerce");else G=x(G,ee,p.typeAnnotation||"assert")}if(!(G instanceof ft)&&G.type.kind!=="resolvedImage"&&this._isConstant(G)){const ee=new go;try{G=new ft(G.type,G.evaluate(ee))}catch(le){return this.error(le.message),null}}return G}return this.error(`Unknown expression "${L}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(a===void 0?"'undefined' value invalid. Use null instead.":typeof a=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof a} instead.`)}concat(a,p,x){const L=typeof a=="number"?this.path.concat(a):this.path,V=x?this.scope.concat(x):this.scope;return new Is(this.registry,this._isConstant,L,p||null,V,this.errors)}error(a,...p){const x=`${this.key}${p.map(L=>`[${L}]`).join("")}`;this.errors.push(new fe(x,a))}checkSubtype(a,p){const x=ze(a,p);return x&&this.error(x),x}}class bn{constructor(a,p,x){this.type=de,this.locale=x,this.caseSensitive=a,this.diacriticSensitive=p}static parse(a,p){if(a.length!==2)return p.error("Expected one argument.");const x=a[1];if(typeof x!="object"||Array.isArray(x))return p.error("Collator options argument must be an object.");const L=p.parse(x["case-sensitive"]!==void 0&&x["case-sensitive"],1,Ce);if(!L)return null;const V=p.parse(x["diacritic-sensitive"]!==void 0&&x["diacritic-sensitive"],1,Ce);if(!V)return null;let G=null;return x.locale&&(G=p.parse(x.locale,1,Te),!G)?null:new bn(L,V,G)}evaluate(a){return new nr(this.caseSensitive.evaluate(a),this.diacriticSensitive.evaluate(a),this.locale?this.locale.evaluate(a):null)}eachChild(a){a(this.caseSensitive),a(this.diacriticSensitive),this.locale&&a(this.locale)}outputDefined(){return!1}}const bs=8192;function Or(u,a){u[0]=Math.min(u[0],a[0]),u[1]=Math.min(u[1],a[1]),u[2]=Math.max(u[2],a[0]),u[3]=Math.max(u[3],a[1])}function ya(u,a){return!(u[0]<=a[0]||u[2]>=a[2]||u[1]<=a[1]||u[3]>=a[3])}function $a(u,a){const p=(180+u[0])/360,x=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+u[1]*Math.PI/360)))/360,L=Math.pow(2,a.z);return[Math.round(p*L*bs),Math.round(x*L*bs)]}function mo(u,a,p){const x=u[0]-a[0],L=u[1]-a[1],V=u[0]-p[0],G=u[1]-p[1];return x*G-V*L==0&&x*V<=0&&L*G<=0}function ra(u,a){let p=!1;for(let G=0,ee=a.length;G<ee;G++){const le=a[G];for(let _e=0,Pe=le.length;_e<Pe-1;_e++){if(mo(u,le[_e],le[_e+1]))return!1;(L=le[_e])[1]>(x=u)[1]!=(V=le[_e+1])[1]>x[1]&&x[0]<(V[0]-L[0])*(x[1]-L[1])/(V[1]-L[1])+L[0]&&(p=!p)}}var x,L,V;return p}function sa(u,a){for(let p=0;p<a.length;p++)if(ra(u,a[p]))return!0;return!1}function P(u,a,p,x){const L=x[0]-p[0],V=x[1]-p[1],G=(u[0]-p[0])*V-L*(u[1]-p[1]),ee=(a[0]-p[0])*V-L*(a[1]-p[1]);return G>0&&ee<0||G<0&&ee>0}function re(u,a,p){for(const _e of p)for(let Pe=0;Pe<_e.length-1;++Pe)if((ee=[(G=_e[Pe+1])[0]-(V=_e[Pe])[0],G[1]-V[1]])[0]*(le=[(L=a)[0]-(x=u)[0],L[1]-x[1]])[1]-ee[1]*le[0]!=0&&P(x,L,V,G)&&P(V,G,x,L))return!0;var x,L,V,G,ee,le;return!1}function Re(u,a){for(let p=0;p<u.length;++p)if(!ra(u[p],a))return!1;for(let p=0;p<u.length-1;++p)if(re(u[p],u[p+1],a))return!1;return!0}function at(u,a){for(let p=0;p<a.length;p++)if(Re(u,a[p]))return!0;return!1}function kt(u,a,p){const x=[];for(let L=0;L<u.length;L++){const V=[];for(let G=0;G<u[L].length;G++){const ee=$a(u[L][G],p);Or(a,ee),V.push(ee)}x.push(V)}return x}function ri(u,a,p){const x=[];for(let L=0;L<u.length;L++){const V=kt(u[L],a,p);x.push(V)}return x}function _i(u,a,p,x){if(u[0]<p[0]||u[0]>p[2]){const L=.5*x;let V=u[0]-p[0]>L?-x:p[0]-u[0]>L?x:0;V===0&&(V=u[0]-p[2]>L?-x:p[2]-u[0]>L?x:0),u[0]+=V}Or(a,u)}function Qi(u,a,p,x){const L=Math.pow(2,x.z)*bs,V=[x.x*bs,x.y*bs],G=[];for(const ee of u)for(const le of ee){const _e=[le.x+V[0],le.y+V[1]];_i(_e,a,p,L),G.push(_e)}return G}function Xi(u,a,p,x){const L=Math.pow(2,x.z)*bs,V=[x.x*bs,x.y*bs],G=[];for(const le of u){const _e=[];for(const Pe of le){const Ge=[Pe.x+V[0],Pe.y+V[1]];Or(a,Ge),_e.push(Ge)}G.push(_e)}if(a[2]-a[0]<=L/2){(ee=a)[0]=ee[1]=1/0,ee[2]=ee[3]=-1/0;for(const le of G)for(const _e of le)_i(_e,a,p,L)}var ee;return G}class Nn{constructor(a,p){this.type=Ce,this.geojson=a,this.geometries=p}static parse(a,p){if(a.length!==2)return p.error(`'within' expression requires exactly one argument, but found ${a.length-1} instead.`);if(Gr(a[1])){const x=a[1];if(x.type==="FeatureCollection")for(let L=0;L<x.features.length;++L){const V=x.features[L].geometry.type;if(V==="Polygon"||V==="MultiPolygon")return new Nn(x,x.features[L].geometry)}else if(x.type==="Feature"){const L=x.geometry.type;if(L==="Polygon"||L==="MultiPolygon")return new Nn(x,x.geometry)}else if(x.type==="Polygon"||x.type==="MultiPolygon")return new Nn(x,x)}return p.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(a){if(a.geometry()!=null&&a.canonicalID()!=null){if(a.geometryType()==="Point")return function(p,x){const L=[1/0,1/0,-1/0,-1/0],V=[1/0,1/0,-1/0,-1/0],G=p.canonicalID();if(x.type==="Polygon"){const ee=kt(x.coordinates,V,G),le=Qi(p.geometry(),L,V,G);if(!ya(L,V))return!1;for(const _e of le)if(!ra(_e,ee))return!1}if(x.type==="MultiPolygon"){const ee=ri(x.coordinates,V,G),le=Qi(p.geometry(),L,V,G);if(!ya(L,V))return!1;for(const _e of le)if(!sa(_e,ee))return!1}return!0}(a,this.geometries);if(a.geometryType()==="LineString")return function(p,x){const L=[1/0,1/0,-1/0,-1/0],V=[1/0,1/0,-1/0,-1/0],G=p.canonicalID();if(x.type==="Polygon"){const ee=kt(x.coordinates,V,G),le=Xi(p.geometry(),L,V,G);if(!ya(L,V))return!1;for(const _e of le)if(!Re(_e,ee))return!1}if(x.type==="MultiPolygon"){const ee=ri(x.coordinates,V,G),le=Xi(p.geometry(),L,V,G);if(!ya(L,V))return!1;for(const _e of le)if(!at(_e,ee))return!1}return!0}(a,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class qn{constructor(a,p){this.type=p.type,this.name=a,this.boundExpression=p}static parse(a,p){if(a.length!==2||typeof a[1]!="string")return p.error("'var' expression requires exactly one string literal argument.");const x=a[1];return p.scope.has(x)?new qn(x,p.scope.get(x)):p.error(`Unknown variable "${x}". Make sure "${x}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(a){return this.boundExpression.evaluate(a)}eachChild(){}outputDefined(){return!1}}class yr{constructor(a,p,x,L){this.name=a,this.type=p,this._evaluate=x,this.args=L}evaluate(a){return this._evaluate(a,this.args)}eachChild(a){this.args.forEach(a)}outputDefined(){return!1}static parse(a,p){const x=a[0],L=yr.definitions[x];if(!L)return p.error(`Unknown expression "${x}". If you wanted a literal array, use ["literal", [...]].`,0);const V=Array.isArray(L)?L[0]:L.type,G=Array.isArray(L)?[[L[1],L[2]]]:L.overloads,ee=G.filter(([_e])=>!Array.isArray(_e)||_e.length===a.length-1);let le=null;for(const[_e,Pe]of ee){le=new Is(p.registry,Ma,p.path,null,p.scope);const Ge=[];let it=!1;for(let At=1;At<a.length;At++){const ht=a[At],Ct=Array.isArray(_e)?_e[At-1]:_e.type,Tt=le.parse(ht,1+Ge.length,Ct);if(!Tt){it=!0;break}Ge.push(Tt)}if(!it)if(Array.isArray(_e)&&_e.length!==Ge.length)le.error(`Expected ${_e.length} arguments, but found ${Ge.length} instead.`);else{for(let At=0;At<Ge.length;At++){const ht=Array.isArray(_e)?_e[At]:_e.type,Ct=Ge[At];le.concat(At+1).checkSubtype(ht,Ct.type)}if(le.errors.length===0)return new yr(x,V,Pe,Ge)}}if(ee.length===1)p.errors.push(...le.errors);else{const _e=(ee.length?ee:G).map(([Ge])=>{return it=Ge,Array.isArray(it)?`(${it.map(pe).join(", ")})`:`(${pe(it.type)}...)`;var it}).join(" | "),Pe=[];for(let Ge=1;Ge<a.length;Ge++){const it=p.parse(a[Ge],1+Pe.length);if(!it)return null;Pe.push(pe(it.type))}p.error(`Expected arguments of type ${_e}, but found (${Pe.join(", ")}) instead.`)}return null}static register(a,p){yr.definitions=p;for(const x in p)a[x]=yr}}function Ma(u){if(u instanceof qn)return Ma(u.boundExpression);if(u instanceof yr&&u.name==="error"||u instanceof bn||u instanceof Nn)return!1;const a=u instanceof va||u instanceof Ks;let p=!0;return u.eachChild(x=>{p=a?p&&Ma(x):p&&x instanceof ft}),!!p&&Pa(u)&&_o(u,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Pa(u){if(u instanceof yr&&(u.name==="get"&&u.args.length===1||u.name==="feature-state"||u.name==="has"&&u.args.length===1||u.name==="properties"||u.name==="geometry-type"||u.name==="id"||/^filter-/.test(u.name))||u instanceof Nn)return!1;let a=!0;return u.eachChild(p=>{a&&!Pa(p)&&(a=!1)}),a}function Da(u){if(u instanceof yr&&u.name==="feature-state")return!1;let a=!0;return u.eachChild(p=>{a&&!Da(p)&&(a=!1)}),a}function _o(u,a){if(u instanceof yr&&a.indexOf(u.name)>=0)return!1;let p=!0;return u.eachChild(x=>{p&&!_o(x,a)&&(p=!1)}),p}function or(u,a){const p=u.length-1;let x,L,V=0,G=p,ee=0;for(;V<=G;)if(ee=Math.floor((V+G)/2),x=u[ee],L=u[ee+1],x<=a){if(ee===p||a<L)return ee;V=ee+1}else{if(!(x>a))throw new gr("Input is not a number.");G=ee-1}return 0}class Ln{constructor(a,p,x){this.type=a,this.input=p,this.labels=[],this.outputs=[];for(const[L,V]of x)this.labels.push(L),this.outputs.push(V)}static parse(a,p){if(a.length-1<4)return p.error(`Expected at least 4 arguments, but found only ${a.length-1}.`);if((a.length-1)%2!=0)return p.error("Expected an even number of arguments.");const x=p.parse(a[1],1,we);if(!x)return null;const L=[];let V=null;p.expectedType&&p.expectedType.kind!=="value"&&(V=p.expectedType);for(let G=1;G<a.length;G+=2){const ee=G===1?-1/0:a[G],le=a[G+1],_e=G,Pe=G+1;if(typeof ee!="number")return p.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',_e);if(L.length&&L[L.length-1][0]>=ee)return p.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',_e);const Ge=p.parse(le,Pe,V);if(!Ge)return null;V=V||Ge.type,L.push([ee,Ge])}return new Ln(V,x,L)}evaluate(a){const p=this.labels,x=this.outputs;if(p.length===1)return x[0].evaluate(a);const L=this.input.evaluate(a);if(L<=p[0])return x[0].evaluate(a);const V=p.length;return L>=p[V-1]?x[V-1].evaluate(a):x[or(p,L)].evaluate(a)}eachChild(a){a(this.input);for(const p of this.outputs)a(p)}outputDefined(){return this.outputs.every(a=>a.outputDefined())}}function jn(u,a,p){return u+p*(a-u)}function Er(u,a,p){return u.map((x,L)=>jn(x,a[L],p))}const xs={number:jn,color:function(u,a,p,x="rgb"){switch(x){case"rgb":{const[L,V,G,ee]=Er(u.rgb,a.rgb,p);return new Mi(L,V,G,ee,!1)}case"hcl":{const[L,V,G,ee]=u.hcl,[le,_e,Pe,Ge]=a.hcl;let it,At;if(isNaN(L)||isNaN(le))isNaN(L)?isNaN(le)?it=NaN:(it=le,G!==1&&G!==0||(At=_e)):(it=L,Pe!==1&&Pe!==0||(At=V));else{let Yt=le-L;le>L&&Yt>180?Yt-=360:le<L&&L-le>180&&(Yt+=360),it=L+p*Yt}const[ht,Ct,Tt,Dt]=function([Yt,Qt,Kt,fi]){return Yt=isNaN(Yt)?0:Yt*Zt,Ai([Kt,Math.cos(Yt)*Qt,Math.sin(Yt)*Qt,fi])}([it,At??jn(V,_e,p),jn(G,Pe,p),jn(ee,Ge,p)]);return new Mi(ht,Ct,Tt,Dt,!1)}case"lab":{const[L,V,G,ee]=Ai(Er(u.lab,a.lab,p));return new Mi(L,V,G,ee,!1)}}},array:Er,padding:function(u,a,p){return new Fi(Er(u.values,a.values,p))},variableAnchorOffsetCollection:function(u,a,p){const x=u.values,L=a.values;if(x.length!==L.length)throw new gr(`Cannot interpolate values of different length. from: ${u.toString()}, to: ${a.toString()}`);const V=[];for(let G=0;G<x.length;G+=2){if(x[G]!==L[G])throw new gr(`Cannot interpolate values containing mismatched anchors. from[${G}]: ${x[G]}, to[${G}]: ${L[G]}`);V.push(x[G]);const[ee,le]=x[G+1],[_e,Pe]=L[G+1];V.push([jn(ee,_e,p),jn(le,Pe,p)])}return new nn(V)}};class Pr{constructor(a,p,x,L,V){this.type=a,this.operator=p,this.interpolation=x,this.input=L,this.labels=[],this.outputs=[];for(const[G,ee]of V)this.labels.push(G),this.outputs.push(ee)}static interpolationFactor(a,p,x,L){let V=0;if(a.name==="exponential")V=eA(p,a.base,x,L);else if(a.name==="linear")V=eA(p,1,x,L);else if(a.name==="cubic-bezier"){const G=a.controlPoints;V=new qe(G[0],G[1],G[2],G[3]).solve(eA(p,1,x,L))}return V}static parse(a,p){let[x,L,V,...G]=a;if(!Array.isArray(L)||L.length===0)return p.error("Expected an interpolation type expression.",1);if(L[0]==="linear")L={name:"linear"};else if(L[0]==="exponential"){const _e=L[1];if(typeof _e!="number")return p.error("Exponential interpolation requires a numeric base.",1,1);L={name:"exponential",base:_e}}else{if(L[0]!=="cubic-bezier")return p.error(`Unknown interpolation type ${String(L[0])}`,1,0);{const _e=L.slice(1);if(_e.length!==4||_e.some(Pe=>typeof Pe!="number"||Pe<0||Pe>1))return p.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);L={name:"cubic-bezier",controlPoints:_e}}}if(a.length-1<4)return p.error(`Expected at least 4 arguments, but found only ${a.length-1}.`);if((a.length-1)%2!=0)return p.error("Expected an even number of arguments.");if(V=p.parse(V,2,we),!V)return null;const ee=[];let le=null;x==="interpolate-hcl"||x==="interpolate-lab"?le=je:p.expectedType&&p.expectedType.kind!=="value"&&(le=p.expectedType);for(let _e=0;_e<G.length;_e+=2){const Pe=G[_e],Ge=G[_e+1],it=_e+3,At=_e+4;if(typeof Pe!="number")return p.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',it);if(ee.length&&ee[ee.length-1][0]>=Pe)return p.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',it);const ht=p.parse(Ge,At,le);if(!ht)return null;le=le||ht.type,ee.push([Pe,ht])}return Xe(le,we)||Xe(le,je)||Xe(le,Y)||Xe(le,he)||Xe(le,me(we))?new Pr(le,x,L,V,ee):p.error(`Type ${pe(le)} is not interpolatable.`)}evaluate(a){const p=this.labels,x=this.outputs;if(p.length===1)return x[0].evaluate(a);const L=this.input.evaluate(a);if(L<=p[0])return x[0].evaluate(a);const V=p.length;if(L>=p[V-1])return x[V-1].evaluate(a);const G=or(p,L),ee=Pr.interpolationFactor(this.interpolation,L,p[G],p[G+1]),le=x[G].evaluate(a),_e=x[G+1].evaluate(a);switch(this.operator){case"interpolate":return xs[this.type.kind](le,_e,ee);case"interpolate-hcl":return xs.color(le,_e,ee,"hcl");case"interpolate-lab":return xs.color(le,_e,ee,"lab")}}eachChild(a){a(this.input);for(const p of this.outputs)a(p)}outputDefined(){return this.outputs.every(a=>a.outputDefined())}}function eA(u,a,p,x){const L=x-p,V=u-p;return L===0?0:a===1?V/L:(Math.pow(a,V)-1)/(Math.pow(a,L)-1)}class EA{constructor(a,p){this.type=a,this.args=p}static parse(a,p){if(a.length<2)return p.error("Expectected at least one argument.");let x=null;const L=p.expectedType;L&&L.kind!=="value"&&(x=L);const V=[];for(const ee of a.slice(1)){const le=p.parse(ee,1+V.length,x,void 0,{typeAnnotation:"omit"});if(!le)return null;x=x||le.type,V.push(le)}if(!x)throw new Error("No output type");const G=L&&V.some(ee=>ze(L,ee.type));return new EA(G?Ue:x,V)}evaluate(a){let p,x=null,L=0;for(const V of this.args)if(L++,x=V.evaluate(a),x&&x instanceof Cr&&!x.available&&(p||(p=x.name),x=null,L===this.args.length&&(x=p)),x!==null)break;return x}eachChild(a){this.args.forEach(a)}outputDefined(){return this.args.every(a=>a.outputDefined())}}class eo{constructor(a,p){this.type=p.type,this.bindings=[].concat(a),this.result=p}evaluate(a){return this.result.evaluate(a)}eachChild(a){for(const p of this.bindings)a(p[1]);a(this.result)}static parse(a,p){if(a.length<4)return p.error(`Expected at least 3 arguments, but found ${a.length-1} instead.`);const x=[];for(let V=1;V<a.length-1;V+=2){const G=a[V];if(typeof G!="string")return p.error(`Expected string, but found ${typeof G} instead.`,V);if(/[^a-zA-Z0-9_]/.test(G))return p.error("Variable names must contain only alphanumeric characters or '_'.",V);const ee=p.parse(a[V+1],V+1);if(!ee)return null;x.push([G,ee])}const L=p.parse(a[a.length-1],a.length-1,p.expectedType,x);return L?new eo(x,L):null}outputDefined(){return this.result.outputDefined()}}class Oo{constructor(a,p,x){this.type=a,this.index=p,this.input=x}static parse(a,p){if(a.length!==3)return p.error(`Expected 2 arguments, but found ${a.length-1} instead.`);const x=p.parse(a[1],1,we),L=p.parse(a[2],2,me(p.expectedType||Ue));return x&&L?new Oo(L.type.itemType,x,L):null}evaluate(a){const p=this.index.evaluate(a),x=this.input.evaluate(a);if(p<0)throw new gr(`Array index out of bounds: ${p} < 0.`);if(p>=x.length)throw new gr(`Array index out of bounds: ${p} > ${x.length-1}.`);if(p!==Math.floor(p))throw new gr(`Array index must be an integer, but found ${p} instead.`);return x[p]}eachChild(a){a(this.index),a(this.input)}outputDefined(){return!1}}class ls{constructor(a,p){this.type=Ce,this.needle=a,this.haystack=p}static parse(a,p){if(a.length!==3)return p.error(`Expected 2 arguments, but found ${a.length-1} instead.`);const x=p.parse(a[1],1,Ue),L=p.parse(a[2],2,Ue);return x&&L?Be(x.type,[Ce,Te,we,Le,Ue])?new ls(x,L):p.error(`Expected first argument to be of type boolean, string, number or null, but found ${pe(x.type)} instead`):null}evaluate(a){const p=this.needle.evaluate(a),x=this.haystack.evaluate(a);if(!x)return!1;if(!Ye(p,["boolean","string","number","null"]))throw new gr(`Expected first argument to be of type boolean, string, number or null, but found ${pe(Et(p))} instead.`);if(!Ye(x,["string","array"]))throw new gr(`Expected second argument to be of type array or string, but found ${pe(Et(x))} instead.`);return x.indexOf(p)>=0}eachChild(a){a(this.needle),a(this.haystack)}outputDefined(){return!0}}class fA{constructor(a,p,x){this.type=we,this.needle=a,this.haystack=p,this.fromIndex=x}static parse(a,p){if(a.length<=2||a.length>=5)return p.error(`Expected 3 or 4 arguments, but found ${a.length-1} instead.`);const x=p.parse(a[1],1,Ue),L=p.parse(a[2],2,Ue);if(!x||!L)return null;if(!Be(x.type,[Ce,Te,we,Le,Ue]))return p.error(`Expected first argument to be of type boolean, string, number or null, but found ${pe(x.type)} instead`);if(a.length===4){const V=p.parse(a[3],3,we);return V?new fA(x,L,V):null}return new fA(x,L)}evaluate(a){const p=this.needle.evaluate(a),x=this.haystack.evaluate(a);if(!Ye(p,["boolean","string","number","null"]))throw new gr(`Expected first argument to be of type boolean, string, number or null, but found ${pe(Et(p))} instead.`);if(!Ye(x,["string","array"]))throw new gr(`Expected second argument to be of type array or string, but found ${pe(Et(x))} instead.`);if(this.fromIndex){const L=this.fromIndex.evaluate(a);return x.indexOf(p,L)}return x.indexOf(p)}eachChild(a){a(this.needle),a(this.haystack),this.fromIndex&&a(this.fromIndex)}outputDefined(){return!1}}class Ga{constructor(a,p,x,L,V,G){this.inputType=a,this.type=p,this.input=x,this.cases=L,this.outputs=V,this.otherwise=G}static parse(a,p){if(a.length<5)return p.error(`Expected at least 4 arguments, but found only ${a.length-1}.`);if(a.length%2!=1)return p.error("Expected an even number of arguments.");let x,L;p.expectedType&&p.expectedType.kind!=="value"&&(L=p.expectedType);const V={},G=[];for(let _e=2;_e<a.length-1;_e+=2){let Pe=a[_e];const Ge=a[_e+1];Array.isArray(Pe)||(Pe=[Pe]);const it=p.concat(_e);if(Pe.length===0)return it.error("Expected at least one branch label.");for(const ht of Pe){if(typeof ht!="number"&&typeof ht!="string")return it.error("Branch labels must be numbers or strings.");if(typeof ht=="number"&&Math.abs(ht)>Number.MAX_SAFE_INTEGER)return it.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof ht=="number"&&Math.floor(ht)!==ht)return it.error("Numeric branch labels must be integer values.");if(x){if(it.checkSubtype(x,Et(ht)))return null}else x=Et(ht);if(V[String(ht)]!==void 0)return it.error("Branch labels must be unique.");V[String(ht)]=G.length}const At=p.parse(Ge,_e,L);if(!At)return null;L=L||At.type,G.push(At)}const ee=p.parse(a[1],1,Ue);if(!ee)return null;const le=p.parse(a[a.length-1],a.length-1,L);return le?ee.type.kind!=="value"&&p.concat(1).checkSubtype(x,ee.type)?null:new Ga(x,L,ee,V,G,le):null}evaluate(a){const p=this.input.evaluate(a);return(Et(p)===this.inputType&&this.outputs[this.cases[p]]||this.otherwise).evaluate(a)}eachChild(a){a(this.input),this.outputs.forEach(a),a(this.otherwise)}outputDefined(){return this.outputs.every(a=>a.outputDefined())&&this.otherwise.outputDefined()}}class vo{constructor(a,p,x){this.type=a,this.branches=p,this.otherwise=x}static parse(a,p){if(a.length<4)return p.error(`Expected at least 3 arguments, but found only ${a.length-1}.`);if(a.length%2!=0)return p.error("Expected an odd number of arguments.");let x;p.expectedType&&p.expectedType.kind!=="value"&&(x=p.expectedType);const L=[];for(let G=1;G<a.length-1;G+=2){const ee=p.parse(a[G],G,Ce);if(!ee)return null;const le=p.parse(a[G+1],G+1,x);if(!le)return null;L.push([ee,le]),x=x||le.type}const V=p.parse(a[a.length-1],a.length-1,x);if(!V)return null;if(!x)throw new Error("Can't infer output type");return new vo(x,L,V)}evaluate(a){for(const[p,x]of this.branches)if(p.evaluate(a))return x.evaluate(a);return this.otherwise.evaluate(a)}eachChild(a){for(const[p,x]of this.branches)a(p),a(x);a(this.otherwise)}outputDefined(){return this.branches.every(([a,p])=>p.outputDefined())&&this.otherwise.outputDefined()}}class Ns{constructor(a,p,x,L){this.type=a,this.input=p,this.beginIndex=x,this.endIndex=L}static parse(a,p){if(a.length<=2||a.length>=5)return p.error(`Expected 3 or 4 arguments, but found ${a.length-1} instead.`);const x=p.parse(a[1],1,Ue),L=p.parse(a[2],2,we);if(!x||!L)return null;if(!Be(x.type,[me(Ue),Te,Ue]))return p.error(`Expected first argument to be of type array or string, but found ${pe(x.type)} instead`);if(a.length===4){const V=p.parse(a[3],3,we);return V?new Ns(x.type,x,L,V):null}return new Ns(x.type,x,L)}evaluate(a){const p=this.input.evaluate(a),x=this.beginIndex.evaluate(a);if(!Ye(p,["string","array"]))throw new gr(`Expected first argument to be of type array or string, but found ${pe(Et(p))} instead.`);if(this.endIndex){const L=this.endIndex.evaluate(a);return p.slice(x,L)}return p.slice(x)}eachChild(a){a(this.input),a(this.beginIndex),this.endIndex&&a(this.endIndex)}outputDefined(){return!1}}function Ts(u,a){return u==="=="||u==="!="?a.kind==="boolean"||a.kind==="string"||a.kind==="number"||a.kind==="null"||a.kind==="value":a.kind==="string"||a.kind==="number"||a.kind==="value"}function tA(u,a,p,x){return x.compare(a,p)===0}function aa(u,a,p){const x=u!=="=="&&u!=="!=";return class n8{constructor(V,G,ee){this.type=Ce,this.lhs=V,this.rhs=G,this.collator=ee,this.hasUntypedArgument=V.type.kind==="value"||G.type.kind==="value"}static parse(V,G){if(V.length!==3&&V.length!==4)return G.error("Expected two or three arguments.");const ee=V[0];let le=G.parse(V[1],1,Ue);if(!le)return null;if(!Ts(ee,le.type))return G.concat(1).error(`"${ee}" comparisons are not supported for type '${pe(le.type)}'.`);let _e=G.parse(V[2],2,Ue);if(!_e)return null;if(!Ts(ee,_e.type))return G.concat(2).error(`"${ee}" comparisons are not supported for type '${pe(_e.type)}'.`);if(le.type.kind!==_e.type.kind&&le.type.kind!=="value"&&_e.type.kind!=="value")return G.error(`Cannot compare types '${pe(le.type)}' and '${pe(_e.type)}'.`);x&&(le.type.kind==="value"&&_e.type.kind!=="value"?le=new Ks(_e.type,[le]):le.type.kind!=="value"&&_e.type.kind==="value"&&(_e=new Ks(le.type,[_e])));let Pe=null;if(V.length===4){if(le.type.kind!=="string"&&_e.type.kind!=="string"&&le.type.kind!=="value"&&_e.type.kind!=="value")return G.error("Cannot use collator to compare non-string types.");if(Pe=G.parse(V[3],3,de),!Pe)return null}return new n8(le,_e,Pe)}evaluate(V){const G=this.lhs.evaluate(V),ee=this.rhs.evaluate(V);if(x&&this.hasUntypedArgument){const le=Et(G),_e=Et(ee);if(le.kind!==_e.kind||le.kind!=="string"&&le.kind!=="number")throw new gr(`Expected arguments for "${u}" to be (string, string) or (number, number), but found (${le.kind}, ${_e.kind}) instead.`)}if(this.collator&&!x&&this.hasUntypedArgument){const le=Et(G),_e=Et(ee);if(le.kind!=="string"||_e.kind!=="string")return a(V,G,ee)}return this.collator?p(V,G,ee,this.collator.evaluate(V)):a(V,G,ee)}eachChild(V){V(this.lhs),V(this.rhs),this.collator&&V(this.collator)}outputDefined(){return!0}}}const La=aa("==",function(u,a,p){return a===p},tA),yo=aa("!=",function(u,a,p){return a!==p},function(u,a,p,x){return!tA(0,a,p,x)}),zo=aa("<",function(u,a,p){return a<p},function(u,a,p,x){return x.compare(a,p)<0}),VA=aa(">",function(u,a,p){return a>p},function(u,a,p,x){return x.compare(a,p)>0}),Dr=aa("<=",function(u,a,p){return a<=p},function(u,a,p,x){return x.compare(a,p)<=0}),gu=aa(">=",function(u,a,p){return a>=p},function(u,a,p,x){return x.compare(a,p)>=0});class oa{constructor(a,p,x,L,V){this.type=Te,this.number=a,this.locale=p,this.currency=x,this.minFractionDigits=L,this.maxFractionDigits=V}static parse(a,p){if(a.length!==3)return p.error("Expected two arguments.");const x=p.parse(a[1],1,we);if(!x)return null;const L=a[2];if(typeof L!="object"||Array.isArray(L))return p.error("NumberFormat options argument must be an object.");let V=null;if(L.locale&&(V=p.parse(L.locale,1,Te),!V))return null;let G=null;if(L.currency&&(G=p.parse(L.currency,1,Te),!G))return null;let ee=null;if(L["min-fraction-digits"]&&(ee=p.parse(L["min-fraction-digits"],1,we),!ee))return null;let le=null;return L["max-fraction-digits"]&&(le=p.parse(L["max-fraction-digits"],1,we),!le)?null:new oa(x,V,G,ee,le)}evaluate(a){return new Intl.NumberFormat(this.locale?this.locale.evaluate(a):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(a):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(a):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(a):void 0}).format(this.number.evaluate(a))}eachChild(a){a(this.number),this.locale&&a(this.locale),this.currency&&a(this.currency),this.minFractionDigits&&a(this.minFractionDigits),this.maxFractionDigits&&a(this.maxFractionDigits)}outputDefined(){return!1}}class ba{constructor(a){this.type=ue,this.sections=a}static parse(a,p){if(a.length<2)return p.error("Expected at least one argument.");const x=a[1];if(!Array.isArray(x)&&typeof x=="object")return p.error("First argument must be an image or text section.");const L=[];let V=!1;for(let G=1;G<=a.length-1;++G){const ee=a[G];if(V&&typeof ee=="object"&&!Array.isArray(ee)){V=!1;let le=null;if(ee["font-scale"]&&(le=p.parse(ee["font-scale"],1,we),!le))return null;let _e=null;if(ee["text-font"]&&(_e=p.parse(ee["text-font"],1,me(Te)),!_e))return null;let Pe=null;if(ee["text-color"]&&(Pe=p.parse(ee["text-color"],1,je),!Pe))return null;const Ge=L[L.length-1];Ge.scale=le,Ge.font=_e,Ge.textColor=Pe}else{const le=p.parse(a[G],1,Ue);if(!le)return null;const _e=le.type.kind;if(_e!=="string"&&_e!=="value"&&_e!=="null"&&_e!=="resolvedImage")return p.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");V=!0,L.push({content:le,scale:null,font:null,textColor:null})}}return new ba(L)}evaluate(a){return new Pt(this.sections.map(p=>{const x=p.content.evaluate(a);return Et(x)===ne?new fn("",x,null,null,null):new fn(Hn(x),null,p.scale?p.scale.evaluate(a):null,p.font?p.font.evaluate(a).join(","):null,p.textColor?p.textColor.evaluate(a):null)}))}eachChild(a){for(const p of this.sections)a(p.content),p.scale&&a(p.scale),p.font&&a(p.font),p.textColor&&a(p.textColor)}outputDefined(){return!1}}class ll{constructor(a){this.type=ne,this.input=a}static parse(a,p){if(a.length!==2)return p.error("Expected two arguments.");const x=p.parse(a[1],1,Te);return x?new ll(x):p.error("No image name provided.")}evaluate(a){const p=this.input.evaluate(a),x=Cr.fromString(p);return x&&a.availableImages&&(x.available=a.availableImages.indexOf(p)>-1),x}eachChild(a){a(this.input)}outputDefined(){return!1}}class to{constructor(a){this.type=we,this.input=a}static parse(a,p){if(a.length!==2)return p.error(`Expected 1 argument, but found ${a.length-1} instead.`);const x=p.parse(a[1],1);return x?x.type.kind!=="array"&&x.type.kind!=="string"&&x.type.kind!=="value"?p.error(`Expected argument of type string or array, but found ${pe(x.type)} instead.`):new to(x):null}evaluate(a){const p=this.input.evaluate(a);if(typeof p=="string"||Array.isArray(p))return p.length;throw new gr(`Expected value to be of type string or array, but found ${pe(Et(p))} instead.`)}eachChild(a){a(this.input)}outputDefined(){return!1}}const bo={"==":La,"!=":yo,">":VA,"<":zo,">=":gu,"<=":Dr,array:Ks,at:Oo,boolean:Ks,case:vo,coalesce:EA,collator:bn,format:ba,image:ll,in:ls,"index-of":fA,interpolate:Pr,"interpolate-hcl":Pr,"interpolate-lab":Pr,length:to,let:eo,literal:ft,match:Ga,number:Ks,"number-format":oa,object:Ks,slice:Ns,step:Ln,string:Ks,"to-boolean":va,"to-color":va,"to-number":va,"to-string":va,var:qn,within:Nn};function Fo(u,[a,p,x,L]){a=a.evaluate(u),p=p.evaluate(u),x=x.evaluate(u);const V=L?L.evaluate(u):1,G=ys(a,p,x,V);if(G)throw new gr(G);return new Mi(a/255,p/255,x/255,V,!1)}function us(u,a){return u in a}function io(u,a){const p=a[u];return p===void 0?null:p}function xo(u){return{type:u}}function IA(u){return{result:"success",value:u}}function Hs(u){return{result:"error",value:u}}function Ha(u){return u["property-type"]==="data-driven"||u["property-type"]==="cross-faded-data-driven"}function gs(u){return!!u.expression&&u.expression.parameters.indexOf("zoom")>-1}function ul(u){return!!u.expression&&u.expression.interpolated}function Kn(u){return u instanceof Number?"number":u instanceof String?"string":u instanceof Boolean?"boolean":Array.isArray(u)?"array":u===null?"null":typeof u}function Xr(u){return typeof u=="object"&&u!==null&&!Array.isArray(u)}function No(u){return u}function rr(u,a){const p=a.type==="color",x=u.stops&&typeof u.stops[0][0]=="object",L=x||!(x||u.property!==void 0),V=u.type||(ul(a)?"exponential":"interval");if(p||a.type==="padding"){const Pe=p?Mi.parse:Fi.parse;(u=Ae({},u)).stops&&(u.stops=u.stops.map(Ge=>[Ge[0],Pe(Ge[1])])),u.default=Pe(u.default?u.default:a.default)}if(u.colorSpace&&(G=u.colorSpace)!=="rgb"&&G!=="hcl"&&G!=="lab")throw new Error(`Unknown color space: "${u.colorSpace}"`);var G;let ee,le,_e;if(V==="exponential")ee=xa;else if(V==="interval")ee=Qr;else if(V==="categorical"){ee=Hr,le=Object.create(null);for(const Pe of u.stops)le[Pe[0]]=Pe[1];_e=typeof u.stops[0][0]}else{if(V!=="identity")throw new Error(`Unknown function type "${V}"`);ee=mr}if(x){const Pe={},Ge=[];for(let ht=0;ht<u.stops.length;ht++){const Ct=u.stops[ht],Tt=Ct[0].zoom;Pe[Tt]===void 0&&(Pe[Tt]={zoom:Tt,type:u.type,property:u.property,default:u.default,stops:[]},Ge.push(Tt)),Pe[Tt].stops.push([Ct[0].value,Ct[1]])}const it=[];for(const ht of Ge)it.push([Pe[ht].zoom,rr(Pe[ht],a)]);const At={name:"linear"};return{kind:"composite",interpolationType:At,interpolationFactor:Pr.interpolationFactor.bind(void 0,At),zoomStops:it.map(ht=>ht[0]),evaluate:({zoom:ht},Ct)=>xa({stops:it,base:u.base},a,ht).evaluate(ht,Ct)}}if(L){const Pe=V==="exponential"?{name:"exponential",base:u.base!==void 0?u.base:1}:null;return{kind:"camera",interpolationType:Pe,interpolationFactor:Pr.interpolationFactor.bind(void 0,Pe),zoomStops:u.stops.map(Ge=>Ge[0]),evaluate:({zoom:Ge})=>ee(u,a,Ge,le,_e)}}return{kind:"source",evaluate(Pe,Ge){const it=Ge&&Ge.properties?Ge.properties[u.property]:void 0;return it===void 0?Aa(u.default,a.default):ee(u,a,it,le,_e)}}}function Aa(u,a,p){return u!==void 0?u:a!==void 0?a:p!==void 0?p:void 0}function Hr(u,a,p,x,L){return Aa(typeof p===L?x[p]:void 0,u.default,a.default)}function Qr(u,a,p){if(Kn(p)!=="number")return Aa(u.default,a.default);const x=u.stops.length;if(x===1||p<=u.stops[0][0])return u.stops[0][1];if(p>=u.stops[x-1][0])return u.stops[x-1][1];const L=or(u.stops.map(V=>V[0]),p);return u.stops[L][1]}function xa(u,a,p){const x=u.base!==void 0?u.base:1;if(Kn(p)!=="number")return Aa(u.default,a.default);const L=u.stops.length;if(L===1||p<=u.stops[0][0])return u.stops[0][1];if(p>=u.stops[L-1][0])return u.stops[L-1][1];const V=or(u.stops.map(Pe=>Pe[0]),p),G=function(Pe,Ge,it,At){const ht=At-it,Ct=Pe-it;return ht===0?0:Ge===1?Ct/ht:(Math.pow(Ge,Ct)-1)/(Math.pow(Ge,ht)-1)}(p,x,u.stops[V][0],u.stops[V+1][0]),ee=u.stops[V][1],le=u.stops[V+1][1],_e=xs[a.type]||No;return typeof ee.evaluate=="function"?{evaluate(...Pe){const Ge=ee.evaluate.apply(void 0,Pe),it=le.evaluate.apply(void 0,Pe);if(Ge!==void 0&&it!==void 0)return _e(Ge,it,G,u.colorSpace)}}:_e(ee,le,G,u.colorSpace)}function mr(u,a,p){switch(a.type){case"color":p=Mi.parse(p);break;case"formatted":p=Pt.fromString(p.toString());break;case"resolvedImage":p=Cr.fromString(p.toString());break;case"padding":p=Fi.parse(p);break;default:Kn(p)===a.type||a.type==="enum"&&a.values[p]||(p=void 0)}return Aa(p,u.default,a.default)}yr.register(bo,{error:[{kind:"error"},[Te],(u,[a])=>{throw new gr(a.evaluate(u))}],typeof:[Te,[Ue],(u,[a])=>pe(Et(a.evaluate(u)))],"to-rgba":[me(we,4),[je],(u,[a])=>{const[p,x,L,V]=a.evaluate(u).rgb;return[255*p,255*x,255*L,V]}],rgb:[je,[we,we,we],Fo],rgba:[je,[we,we,we,we],Fo],has:{type:Ce,overloads:[[[Te],(u,[a])=>us(a.evaluate(u),u.properties())],[[Te,Ne],(u,[a,p])=>us(a.evaluate(u),p.evaluate(u))]]},get:{type:Ue,overloads:[[[Te],(u,[a])=>io(a.evaluate(u),u.properties())],[[Te,Ne],(u,[a,p])=>io(a.evaluate(u),p.evaluate(u))]]},"feature-state":[Ue,[Te],(u,[a])=>io(a.evaluate(u),u.featureState||{})],properties:[Ne,[],u=>u.properties()],"geometry-type":[Te,[],u=>u.geometryType()],id:[Ue,[],u=>u.id()],zoom:[we,[],u=>u.globals.zoom],"heatmap-density":[we,[],u=>u.globals.heatmapDensity||0],"line-progress":[we,[],u=>u.globals.lineProgress||0],accumulated:[Ue,[],u=>u.globals.accumulated===void 0?null:u.globals.accumulated],"+":[we,xo(we),(u,a)=>{let p=0;for(const x of a)p+=x.evaluate(u);return p}],"*":[we,xo(we),(u,a)=>{let p=1;for(const x of a)p*=x.evaluate(u);return p}],"-":{type:we,overloads:[[[we,we],(u,[a,p])=>a.evaluate(u)-p.evaluate(u)],[[we],(u,[a])=>-a.evaluate(u)]]},"/":[we,[we,we],(u,[a,p])=>a.evaluate(u)/p.evaluate(u)],"%":[we,[we,we],(u,[a,p])=>a.evaluate(u)%p.evaluate(u)],ln2:[we,[],()=>Math.LN2],pi:[we,[],()=>Math.PI],e:[we,[],()=>Math.E],"^":[we,[we,we],(u,[a,p])=>Math.pow(a.evaluate(u),p.evaluate(u))],sqrt:[we,[we],(u,[a])=>Math.sqrt(a.evaluate(u))],log10:[we,[we],(u,[a])=>Math.log(a.evaluate(u))/Math.LN10],ln:[we,[we],(u,[a])=>Math.log(a.evaluate(u))],log2:[we,[we],(u,[a])=>Math.log(a.evaluate(u))/Math.LN2],sin:[we,[we],(u,[a])=>Math.sin(a.evaluate(u))],cos:[we,[we],(u,[a])=>Math.cos(a.evaluate(u))],tan:[we,[we],(u,[a])=>Math.tan(a.evaluate(u))],asin:[we,[we],(u,[a])=>Math.asin(a.evaluate(u))],acos:[we,[we],(u,[a])=>Math.acos(a.evaluate(u))],atan:[we,[we],(u,[a])=>Math.atan(a.evaluate(u))],min:[we,xo(we),(u,a)=>Math.min(...a.map(p=>p.evaluate(u)))],max:[we,xo(we),(u,a)=>Math.max(...a.map(p=>p.evaluate(u)))],abs:[we,[we],(u,[a])=>Math.abs(a.evaluate(u))],round:[we,[we],(u,[a])=>{const p=a.evaluate(u);return p<0?-Math.round(-p):Math.round(p)}],floor:[we,[we],(u,[a])=>Math.floor(a.evaluate(u))],ceil:[we,[we],(u,[a])=>Math.ceil(a.evaluate(u))],"filter-==":[Ce,[Te,Ue],(u,[a,p])=>u.properties()[a.value]===p.value],"filter-id-==":[Ce,[Ue],(u,[a])=>u.id()===a.value],"filter-type-==":[Ce,[Te],(u,[a])=>u.geometryType()===a.value],"filter-<":[Ce,[Te,Ue],(u,[a,p])=>{const x=u.properties()[a.value],L=p.value;return typeof x==typeof L&&x<L}],"filter-id-<":[Ce,[Ue],(u,[a])=>{const p=u.id(),x=a.value;return typeof p==typeof x&&p<x}],"filter->":[Ce,[Te,Ue],(u,[a,p])=>{const x=u.properties()[a.value],L=p.value;return typeof x==typeof L&&x>L}],"filter-id->":[Ce,[Ue],(u,[a])=>{const p=u.id(),x=a.value;return typeof p==typeof x&&p>x}],"filter-<=":[Ce,[Te,Ue],(u,[a,p])=>{const x=u.properties()[a.value],L=p.value;return typeof x==typeof L&&x<=L}],"filter-id-<=":[Ce,[Ue],(u,[a])=>{const p=u.id(),x=a.value;return typeof p==typeof x&&p<=x}],"filter->=":[Ce,[Te,Ue],(u,[a,p])=>{const x=u.properties()[a.value],L=p.value;return typeof x==typeof L&&x>=L}],"filter-id->=":[Ce,[Ue],(u,[a])=>{const p=u.id(),x=a.value;return typeof p==typeof x&&p>=x}],"filter-has":[Ce,[Ue],(u,[a])=>a.value in u.properties()],"filter-has-id":[Ce,[],u=>u.id()!==null&&u.id()!==void 0],"filter-type-in":[Ce,[me(Te)],(u,[a])=>a.value.indexOf(u.geometryType())>=0],"filter-id-in":[Ce,[me(Ue)],(u,[a])=>a.value.indexOf(u.id())>=0],"filter-in-small":[Ce,[Te,me(Ue)],(u,[a,p])=>p.value.indexOf(u.properties()[a.value])>=0],"filter-in-large":[Ce,[Te,me(Ue)],(u,[a,p])=>function(x,L,V,G){for(;V<=G;){const ee=V+G>>1;if(L[ee]===x)return!0;L[ee]>x?G=ee-1:V=ee+1}return!1}(u.properties()[a.value],p.value,0,p.value.length-1)],all:{type:Ce,overloads:[[[Ce,Ce],(u,[a,p])=>a.evaluate(u)&&p.evaluate(u)],[xo(Ce),(u,a)=>{for(const p of a)if(!p.evaluate(u))return!1;return!0}]]},any:{type:Ce,overloads:[[[Ce,Ce],(u,[a,p])=>a.evaluate(u)||p.evaluate(u)],[xo(Ce),(u,a)=>{for(const p of a)if(p.evaluate(u))return!0;return!1}]]},"!":[Ce,[Ce],(u,[a])=>!a.evaluate(u)],"is-supported-script":[Ce,[Te],(u,[a])=>{const p=u.globals&&u.globals.isSupportedScript;return!p||p(a.evaluate(u))}],upcase:[Te,[Te],(u,[a])=>a.evaluate(u).toUpperCase()],downcase:[Te,[Te],(u,[a])=>a.evaluate(u).toLowerCase()],concat:[Te,xo(Ue),(u,a)=>a.map(p=>Hn(p.evaluate(u))).join("")],"resolved-locale":[Te,[de],(u,[a])=>a.evaluate(u).resolvedLocale()]});class TA{constructor(a,p){var x;this.expression=a,this._warningHistory={},this._evaluator=new go,this._defaultValue=p?(x=p).type==="color"&&Xr(x.default)?new Mi(0,0,0,0):x.type==="color"?Mi.parse(x.default)||null:x.type==="padding"?Fi.parse(x.default)||null:x.type==="variableAnchorOffsetCollection"?nn.parse(x.default)||null:x.default===void 0?null:x.default:null,this._enumValues=p&&p.type==="enum"?p.values:null}evaluateWithoutErrorHandling(a,p,x,L,V,G){return this._evaluator.globals=a,this._evaluator.feature=p,this._evaluator.featureState=x,this._evaluator.canonical=L,this._evaluator.availableImages=V||null,this._evaluator.formattedSection=G,this.expression.evaluate(this._evaluator)}evaluate(a,p,x,L,V,G){this._evaluator.globals=a,this._evaluator.feature=p||null,this._evaluator.featureState=x||null,this._evaluator.canonical=L,this._evaluator.availableImages=V||null,this._evaluator.formattedSection=G||null;try{const ee=this.expression.evaluate(this._evaluator);if(ee==null||typeof ee=="number"&&ee!=ee)return this._defaultValue;if(this._enumValues&&!(ee in this._enumValues))throw new gr(`Expected value to be one of ${Object.keys(this._enumValues).map(le=>JSON.stringify(le)).join(", ")}, but found ${JSON.stringify(ee)} instead.`);return ee}catch(ee){return this._warningHistory[ee.message]||(this._warningHistory[ee.message]=!0,typeof console<"u"&&console.warn(ee.message)),this._defaultValue}}}function Vo(u){return Array.isArray(u)&&u.length>0&&typeof u[0]=="string"&&u[0]in bo}function Uo(u,a){const p=new Is(bo,Ma,[],a?function(L){const V={color:je,string:Te,number:we,enum:Te,boolean:Ce,formatted:ue,padding:Y,resolvedImage:ne,variableAnchorOffsetCollection:he};return L.type==="array"?me(V[L.value]||Ue,L.length):V[L.type]}(a):void 0),x=p.parse(u,void 0,void 0,void 0,a&&a.type==="string"?{typeAnnotation:"coerce"}:void 0);return x?IA(new TA(x,a)):Hs(p.errors)}class ws{constructor(a,p){this.kind=a,this._styleExpression=p,this.isStateDependent=a!=="constant"&&!Da(p.expression)}evaluateWithoutErrorHandling(a,p,x,L,V,G){return this._styleExpression.evaluateWithoutErrorHandling(a,p,x,L,V,G)}evaluate(a,p,x,L,V,G){return this._styleExpression.evaluate(a,p,x,L,V,G)}}class Ar{constructor(a,p,x,L){this.kind=a,this.zoomStops=x,this._styleExpression=p,this.isStateDependent=a!=="camera"&&!Da(p.expression),this.interpolationType=L}evaluateWithoutErrorHandling(a,p,x,L,V,G){return this._styleExpression.evaluateWithoutErrorHandling(a,p,x,L,V,G)}evaluate(a,p,x,L,V,G){return this._styleExpression.evaluate(a,p,x,L,V,G)}interpolationFactor(a,p,x){return this.interpolationType?Pr.interpolationFactor(this.interpolationType,a,p,x):0}}function On(u,a){const p=Uo(u,a);if(p.result==="error")return p;const x=p.value.expression,L=Pa(x);if(!L&&!Ha(a))return Hs([new fe("","data expressions not supported")]);const V=_o(x,["zoom"]);if(!V&&!gs(a))return Hs([new fe("","zoom expressions not supported")]);const G=Lr(x);return G||V?G instanceof fe?Hs([G]):G instanceof Pr&&!ul(a)?Hs([new fe("",'"interpolate" expressions cannot be used with this property')]):IA(G?new Ar(L?"camera":"composite",p.value,G.labels,G instanceof Pr?G.interpolation:void 0):new ws(L?"constant":"source",p.value)):Hs([new fe("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class wo{constructor(a,p){this._parameters=a,this._specification=p,Ae(this,rr(this._parameters,this._specification))}static deserialize(a){return new wo(a._parameters,a._specification)}static serialize(a){return{_parameters:a._parameters,_specification:a._specification}}}function Lr(u){let a=null;if(u instanceof eo)a=Lr(u.result);else if(u instanceof EA){for(const p of u.args)if(a=Lr(p),a)break}else(u instanceof Ln||u instanceof Pr)&&u.input instanceof yr&&u.input.name==="zoom"&&(a=u);return a instanceof fe||u.eachChild(p=>{const x=Lr(p);x instanceof fe?a=x:!a&&x?a=new fe("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):a&&x&&a!==x&&(a=new fe("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),a}function no(u){if(u===!0||u===!1)return!0;if(!Array.isArray(u)||u.length===0)return!1;switch(u[0]){case"has":return u.length>=2&&u[1]!=="$id"&&u[1]!=="$type";case"in":return u.length>=3&&(typeof u[1]!="string"||Array.isArray(u[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return u.length!==3||Array.isArray(u[1])||Array.isArray(u[2]);case"any":case"all":for(const a of u.slice(1))if(!no(a)&&typeof a!="boolean")return!1;return!0;default:return!0}}const iA={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function _r(u){if(u==null)return{filter:()=>!0,needGeometry:!1};no(u)||(u=kA(u));const a=Uo(u,iA);if(a.result==="error")throw new Error(a.value.map(p=>`${p.key}: ${p.message}`).join(", "));return{filter:(p,x,L)=>a.value.evaluate(p,x,{},L),needGeometry:Qs(u)}}function Kr(u,a){return u<a?-1:u>a?1:0}function Qs(u){if(!Array.isArray(u))return!1;if(u[0]==="within")return!0;for(let a=1;a<u.length;a++)if(Qs(u[a]))return!0;return!1}function kA(u){if(!u)return!0;const a=u[0];return u.length<=1?a!=="any":a==="=="?ro(u[1],u[2],"=="):a==="!="?Ss(ro(u[1],u[2],"==")):a==="<"||a===">"||a==="<="||a===">="?ro(u[1],u[2],a):a==="any"?(p=u.slice(1),["any"].concat(p.map(kA))):a==="all"?["all"].concat(u.slice(1).map(kA)):a==="none"?["all"].concat(u.slice(1).map(kA).map(Ss)):a==="in"?dA(u[1],u.slice(2)):a==="!in"?Ss(dA(u[1],u.slice(2))):a==="has"?wa(u[1]):a==="!has"?Ss(wa(u[1])):a!=="within"||u;var p}function ro(u,a,p){switch(u){case"$type":return[`filter-type-${p}`,a];case"$id":return[`filter-id-${p}`,a];default:return[`filter-${p}`,u,a]}}function dA(u,a){if(a.length===0)return!1;switch(u){case"$type":return["filter-type-in",["literal",a]];case"$id":return["filter-id-in",["literal",a]];default:return a.length>200&&!a.some(p=>typeof p!=typeof a[0])?["filter-in-large",u,["literal",a.sort(Kr)]]:["filter-in-small",u,["literal",a]]}}function wa(u){switch(u){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",u]}}function Ss(u){return["!",u]}function ms(u){const a=typeof u;if(a==="number"||a==="boolean"||a==="string"||u==null)return JSON.stringify(u);if(Array.isArray(u)){let L="[";for(const V of u)L+=`${ms(V)},`;return`${L}]`}const p=Object.keys(u).sort();let x="{";for(let L=0;L<p.length;L++)x+=`${JSON.stringify(p[L])}:${ms(u[p[L]])},`;return`${x}}`}function ha(u){let a="";for(const p of Wi)a+=`/${ms(u[p])}`;return a}function Qa(u){const a=u.value;return a?[new ie(u.key,a,"constants have been deprecated as of v8")]:[]}function br(u){return u instanceof Number||u instanceof String||u instanceof Boolean?u.valueOf():u}function is(u){if(Array.isArray(u))return u.map(is);if(u instanceof Object&&!(u instanceof Number||u instanceof String||u instanceof Boolean)){const a={};for(const p in u)a[p]=is(u[p]);return a}return br(u)}function zr(u){const a=u.key,p=u.value,x=u.valueSpec||{},L=u.objectElementValidators||{},V=u.style,G=u.styleSpec,ee=u.validateSpec;let le=[];const _e=Kn(p);if(_e!=="object")return[new ie(a,p,`object expected, ${_e} found`)];for(const Pe in p){const Ge=Pe.split(".")[0],it=x[Ge]||x["*"];let At;if(L[Ge])At=L[Ge];else if(x[Ge])At=ee;else if(L["*"])At=L["*"];else{if(!x["*"]){le.push(new ie(a,p[Pe],`unknown property "${Pe}"`));continue}At=ee}le=le.concat(At({key:(a&&`${a}.`)+Pe,value:p[Pe],valueSpec:it,style:V,styleSpec:G,object:p,objectKey:Pe,validateSpec:ee},p))}for(const Pe in x)L[Pe]||x[Pe].required&&x[Pe].default===void 0&&p[Pe]===void 0&&le.push(new ie(a,p,`missing required property "${Pe}"`));return le}function pA(u){const a=u.value,p=u.valueSpec,x=u.style,L=u.styleSpec,V=u.key,G=u.arrayElementValidator||u.validateSpec;if(Kn(a)!=="array")return[new ie(V,a,`array expected, ${Kn(a)} found`)];if(p.length&&a.length!==p.length)return[new ie(V,a,`array length ${p.length} expected, length ${a.length} found`)];if(p["min-length"]&&a.length<p["min-length"])return[new ie(V,a,`array length at least ${p["min-length"]} expected, length ${a.length} found`)];let ee={type:p.value,values:p.values};L.$version<7&&(ee.function=p.function),Kn(p.value)==="object"&&(ee=p.value);let le=[];for(let _e=0;_e<a.length;_e++)le=le.concat(G({array:a,arrayIndex:_e,value:a[_e],valueSpec:ee,validateSpec:u.validateSpec,style:x,styleSpec:L,key:`${V}[${_e}]`}));return le}function Ba(u){const a=u.key,p=u.value,x=u.valueSpec;let L=Kn(p);return L==="number"&&p!=p&&(L="NaN"),L!=="number"?[new ie(a,p,`number expected, ${L} found`)]:"minimum"in x&&p<x.minimum?[new ie(a,p,`${p} is less than the minimum value ${x.minimum}`)]:"maximum"in x&&p>x.maximum?[new ie(a,p,`${p} is greater than the maximum value ${x.maximum}`)]:[]}function Bs(u){const a=u.valueSpec,p=br(u.value.type);let x,L,V,G={};const ee=p!=="categorical"&&u.value.property===void 0,le=!ee,_e=Kn(u.value.stops)==="array"&&Kn(u.value.stops[0])==="array"&&Kn(u.value.stops[0][0])==="object",Pe=zr({key:u.key,value:u.value,valueSpec:u.styleSpec.function,validateSpec:u.validateSpec,style:u.style,styleSpec:u.styleSpec,objectElementValidators:{stops:function(At){if(p==="identity")return[new ie(At.key,At.value,'identity function may not have a "stops" property')];let ht=[];const Ct=At.value;return ht=ht.concat(pA({key:At.key,value:Ct,valueSpec:At.valueSpec,validateSpec:At.validateSpec,style:At.style,styleSpec:At.styleSpec,arrayElementValidator:Ge})),Kn(Ct)==="array"&&Ct.length===0&&ht.push(new ie(At.key,Ct,"array must have at least one stop")),ht},default:function(At){return At.validateSpec({key:At.key,value:At.value,valueSpec:a,validateSpec:At.validateSpec,style:At.style,styleSpec:At.styleSpec})}}});return p==="identity"&&ee&&Pe.push(new ie(u.key,u.value,'missing required property "property"')),p==="identity"||u.value.stops||Pe.push(new ie(u.key,u.value,'missing required property "stops"')),p==="exponential"&&u.valueSpec.expression&&!ul(u.valueSpec)&&Pe.push(new ie(u.key,u.value,"exponential functions not supported")),u.styleSpec.$version>=8&&(le&&!Ha(u.valueSpec)?Pe.push(new ie(u.key,u.value,"property functions not supported")):ee&&!gs(u.valueSpec)&&Pe.push(new ie(u.key,u.value,"zoom functions not supported"))),p!=="categorical"&&!_e||u.value.property!==void 0||Pe.push(new ie(u.key,u.value,'"property" property is required')),Pe;function Ge(At){let ht=[];const Ct=At.value,Tt=At.key;if(Kn(Ct)!=="array")return[new ie(Tt,Ct,`array expected, ${Kn(Ct)} found`)];if(Ct.length!==2)return[new ie(Tt,Ct,`array length 2 expected, length ${Ct.length} found`)];if(_e){if(Kn(Ct[0])!=="object")return[new ie(Tt,Ct,`object expected, ${Kn(Ct[0])} found`)];if(Ct[0].zoom===void 0)return[new ie(Tt,Ct,"object stop key must have zoom")];if(Ct[0].value===void 0)return[new ie(Tt,Ct,"object stop key must have value")];if(V&&V>br(Ct[0].zoom))return[new ie(Tt,Ct[0].zoom,"stop zoom values must appear in ascending order")];br(Ct[0].zoom)!==V&&(V=br(Ct[0].zoom),L=void 0,G={}),ht=ht.concat(zr({key:`${Tt}[0]`,value:Ct[0],valueSpec:{zoom:{}},validateSpec:At.validateSpec,style:At.style,styleSpec:At.styleSpec,objectElementValidators:{zoom:Ba,value:it}}))}else ht=ht.concat(it({key:`${Tt}[0]`,value:Ct[0],valueSpec:{},validateSpec:At.validateSpec,style:At.style,styleSpec:At.styleSpec},Ct));return Vo(is(Ct[1]))?ht.concat([new ie(`${Tt}[1]`,Ct[1],"expressions are not allowed in function stops.")]):ht.concat(At.validateSpec({key:`${Tt}[1]`,value:Ct[1],valueSpec:a,validateSpec:At.validateSpec,style:At.style,styleSpec:At.styleSpec}))}function it(At,ht){const Ct=Kn(At.value),Tt=br(At.value),Dt=At.value!==null?At.value:ht;if(x){if(Ct!==x)return[new ie(At.key,Dt,`${Ct} stop domain type must match previous stop domain type ${x}`)]}else x=Ct;if(Ct!=="number"&&Ct!=="string"&&Ct!=="boolean")return[new ie(At.key,Dt,"stop domain value must be a number, string, or boolean")];if(Ct!=="number"&&p!=="categorical"){let Yt=`number expected, ${Ct} found`;return Ha(a)&&p===void 0&&(Yt+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new ie(At.key,Dt,Yt)]}return p!=="categorical"||Ct!=="number"||isFinite(Tt)&&Math.floor(Tt)===Tt?p!=="categorical"&&Ct==="number"&&L!==void 0&&Tt<L?[new ie(At.key,Dt,"stop domain values must appear in ascending order")]:(L=Tt,p==="categorical"&&Tt in G?[new ie(At.key,Dt,"stop domain values must be unique")]:(G[Tt]=!0,[])):[new ie(At.key,Dt,`integer expected, found ${Tt}`)]}}function qs(u){const a=(u.expressionContext==="property"?On:Uo)(is(u.value),u.valueSpec);if(a.result==="error")return a.value.map(x=>new ie(`${u.key}${x.key}`,u.value,x.message));const p=a.value.expression||a.value._styleExpression.expression;if(u.expressionContext==="property"&&u.propertyKey==="text-font"&&!p.outputDefined())return[new ie(u.key,u.value,`Invalid data expression for "${u.propertyKey}". Output values must be contained as literals within the expression.`)];if(u.expressionContext==="property"&&u.propertyType==="layout"&&!Da(p))return[new ie(u.key,u.value,'"feature-state" data expressions are not supported with layout properties.')];if(u.expressionContext==="filter"&&!Da(p))return[new ie(u.key,u.value,'"feature-state" data expressions are not supported with filters.')];if(u.expressionContext&&u.expressionContext.indexOf("cluster")===0){if(!_o(p,["zoom","feature-state"]))return[new ie(u.key,u.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(u.expressionContext==="cluster-initial"&&!Pa(p))return[new ie(u.key,u.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function so(u){const a=u.key,p=u.value,x=u.valueSpec,L=[];return Array.isArray(x.values)?x.values.indexOf(br(p))===-1&&L.push(new ie(a,p,`expected one of [${x.values.join(", ")}], ${JSON.stringify(p)} found`)):Object.keys(x.values).indexOf(br(p))===-1&&L.push(new ie(a,p,`expected one of [${Object.keys(x.values).join(", ")}], ${JSON.stringify(p)} found`)),L}function So(u){return no(is(u.value))?qs(Ae({},u,{expressionContext:"filter",valueSpec:{value:"boolean"}})):MA(u)}function MA(u){const a=u.value,p=u.key;if(Kn(a)!=="array")return[new ie(p,a,`array expected, ${Kn(a)} found`)];const x=u.styleSpec;let L,V=[];if(a.length<1)return[new ie(p,a,"filter array must have at least 1 element")];switch(V=V.concat(so({key:`${p}[0]`,value:a[0],valueSpec:x.filter_operator,style:u.style,styleSpec:u.styleSpec})),br(a[0])){case"<":case"<=":case">":case">=":a.length>=2&&br(a[1])==="$type"&&V.push(new ie(p,a,`"$type" cannot be use with operator "${a[0]}"`));case"==":case"!=":a.length!==3&&V.push(new ie(p,a,`filter array for operator "${a[0]}" must have 3 elements`));case"in":case"!in":a.length>=2&&(L=Kn(a[1]),L!=="string"&&V.push(new ie(`${p}[1]`,a[1],`string expected, ${L} found`)));for(let G=2;G<a.length;G++)L=Kn(a[G]),br(a[1])==="$type"?V=V.concat(so({key:`${p}[${G}]`,value:a[G],valueSpec:x.geometry_type,style:u.style,styleSpec:u.styleSpec})):L!=="string"&&L!=="number"&&L!=="boolean"&&V.push(new ie(`${p}[${G}]`,a[G],`string, number, or boolean expected, ${L} found`));break;case"any":case"all":case"none":for(let G=1;G<a.length;G++)V=V.concat(MA({key:`${p}[${G}]`,value:a[G],style:u.style,styleSpec:u.styleSpec}));break;case"has":case"!has":L=Kn(a[1]),a.length!==2?V.push(new ie(p,a,`filter array for "${a[0]}" operator must have 2 elements`)):L!=="string"&&V.push(new ie(`${p}[1]`,a[1],`string expected, ${L} found`));break;case"within":L=Kn(a[1]),a.length!==2?V.push(new ie(p,a,`filter array for "${a[0]}" operator must have 2 elements`)):L!=="object"&&V.push(new ie(`${p}[1]`,a[1],`object expected, ${L} found`))}return V}function Rl(u,a){const p=u.key,x=u.validateSpec,L=u.style,V=u.styleSpec,G=u.value,ee=u.objectKey,le=V[`${a}_${u.layerType}`];if(!le)return[];const _e=ee.match(/^(.*)-transition$/);if(a==="paint"&&_e&&le[_e[1]]&&le[_e[1]].transition)return x({key:p,value:G,valueSpec:V.transition,style:L,styleSpec:V});const Pe=u.valueSpec||le[ee];if(!Pe)return[new ie(p,G,`unknown property "${ee}"`)];let Ge;if(Kn(G)==="string"&&Ha(Pe)&&!Pe.tokens&&(Ge=/^{([^}]+)}$/.exec(G)))return[new ie(p,G,`"${ee}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(Ge[1])} }\`.`)];const it=[];return u.layerType==="symbol"&&(ee==="text-field"&&L&&!L.glyphs&&it.push(new ie(p,G,'use of "text-field" requires a style "glyphs" property')),ee==="text-font"&&Xr(is(G))&&br(G.type)==="identity"&&it.push(new ie(p,G,'"text-font" does not support identity functions'))),it.concat(x({key:u.key,value:G,valueSpec:Pe,style:L,styleSpec:V,expressionContext:"property",propertyType:a,propertyKey:ee}))}function nA(u){return Rl(u,"paint")}function Sa(u){return Rl(u,"layout")}function Xt(u){let a=[];const p=u.value,x=u.key,L=u.style,V=u.styleSpec;p.type||p.ref||a.push(new ie(x,p,'either "type" or "ref" is required'));let G=br(p.type);const ee=br(p.ref);if(p.id){const le=br(p.id);for(let _e=0;_e<u.arrayIndex;_e++){const Pe=L.layers[_e];br(Pe.id)===le&&a.push(new ie(x,p.id,`duplicate layer id "${p.id}", previously used at line ${Pe.id.__line__}`))}}if("ref"in p){let le;["type","source","source-layer","filter","layout"].forEach(_e=>{_e in p&&a.push(new ie(x,p[_e],`"${_e}" is prohibited for ref layers`))}),L.layers.forEach(_e=>{br(_e.id)===ee&&(le=_e)}),le?le.ref?a.push(new ie(x,p.ref,"ref cannot reference another ref layer")):G=br(le.type):a.push(new ie(x,p.ref,`ref layer "${ee}" not found`))}else if(G!=="background")if(p.source){const le=L.sources&&L.sources[p.source],_e=le&&br(le.type);le?_e==="vector"&&G==="raster"?a.push(new ie(x,p.source,`layer "${p.id}" requires a raster source`)):_e!=="raster-dem"&&G==="hillshade"?a.push(new ie(x,p.source,`layer "${p.id}" requires a raster-dem source`)):_e==="raster"&&G!=="raster"?a.push(new ie(x,p.source,`layer "${p.id}" requires a vector source`)):_e!=="vector"||p["source-layer"]?_e==="raster-dem"&&G!=="hillshade"?a.push(new ie(x,p.source,"raster-dem source can only be used with layer type 'hillshade'.")):G!=="line"||!p.paint||!p.paint["line-gradient"]||_e==="geojson"&&le.lineMetrics||a.push(new ie(x,p,`layer "${p.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):a.push(new ie(x,p,`layer "${p.id}" must specify a "source-layer"`)):a.push(new ie(x,p.source,`source "${p.source}" not found`))}else a.push(new ie(x,p,'missing required property "source"'));return a=a.concat(zr({key:x,value:p,valueSpec:V.layer,style:u.style,styleSpec:u.styleSpec,validateSpec:u.validateSpec,objectElementValidators:{"*":()=>[],type:()=>u.validateSpec({key:`${x}.type`,value:p.type,valueSpec:V.layer.type,style:u.style,styleSpec:u.styleSpec,validateSpec:u.validateSpec,object:p,objectKey:"type"}),filter:So,layout:le=>zr({layer:p,key:le.key,value:le.value,style:le.style,styleSpec:le.styleSpec,validateSpec:le.validateSpec,objectElementValidators:{"*":_e=>Sa(Ae({layerType:G},_e))}}),paint:le=>zr({layer:p,key:le.key,value:le.value,style:le.style,styleSpec:le.styleSpec,validateSpec:le.validateSpec,objectElementValidators:{"*":_e=>nA(Ae({layerType:G},_e))}})}})),a}function Si(u){const a=u.value,p=u.key,x=Kn(a);return x!=="string"?[new ie(p,a,`string expected, ${x} found`)]:[]}const gi={promoteId:function({key:u,value:a}){if(Kn(a)==="string")return Si({key:u,value:a});{const p=[];for(const x in a)p.push(...Si({key:`${u}.${x}`,value:a[x]}));return p}}};function mt(u){const a=u.value,p=u.key,x=u.styleSpec,L=u.style,V=u.validateSpec;if(!a.type)return[new ie(p,a,'"type" is required')];const G=br(a.type);let ee;switch(G){case"vector":case"raster":return ee=zr({key:p,value:a,valueSpec:x[`source_${G.replace("-","_")}`],style:u.style,styleSpec:x,objectElementValidators:gi,validateSpec:V}),ee;case"raster-dem":return ee=function(le){var _e;const Pe=(_e=le.sourceName)!==null&&_e!==void 0?_e:"",Ge=le.value,it=le.styleSpec,At=it.source_raster_dem,ht=le.style;let Ct=[];const Tt=Kn(Ge);if(Ge===void 0)return Ct;if(Tt!=="object")return Ct.push(new ie("source_raster_dem",Ge,`object expected, ${Tt} found`)),Ct;const Dt=br(Ge.encoding)==="custom",Yt=["redFactor","greenFactor","blueFactor","baseShift"],Qt=le.value.encoding?`"${le.value.encoding}"`:"Default";for(const Kt in Ge)!Dt&&Yt.includes(Kt)?Ct.push(new ie(Kt,Ge[Kt],`In "${Pe}": "${Kt}" is only valid when "encoding" is set to "custom". ${Qt} encoding found`)):At[Kt]?Ct=Ct.concat(le.validateSpec({key:Kt,value:Ge[Kt],valueSpec:At[Kt],validateSpec:le.validateSpec,style:ht,styleSpec:it})):Ct.push(new ie(Kt,Ge[Kt],`unknown property "${Kt}"`));return Ct}({sourceName:p,value:a,style:u.style,styleSpec:x,validateSpec:V}),ee;case"geojson":if(ee=zr({key:p,value:a,valueSpec:x.source_geojson,style:L,styleSpec:x,validateSpec:V,objectElementValidators:gi}),a.cluster)for(const le in a.clusterProperties){const[_e,Pe]=a.clusterProperties[le],Ge=typeof _e=="string"?[_e,["accumulated"],["get",le]]:_e;ee.push(...qs({key:`${p}.${le}.map`,value:Pe,validateSpec:V,expressionContext:"cluster-map"})),ee.push(...qs({key:`${p}.${le}.reduce`,value:Ge,validateSpec:V,expressionContext:"cluster-reduce"}))}return ee;case"video":return zr({key:p,value:a,valueSpec:x.source_video,style:L,validateSpec:V,styleSpec:x});case"image":return zr({key:p,value:a,valueSpec:x.source_image,style:L,validateSpec:V,styleSpec:x});case"canvas":return[new ie(p,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return so({key:`${p}.type`,value:a.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:L,validateSpec:V,styleSpec:x})}}function Bt(u){const a=u.value,p=u.styleSpec,x=p.light,L=u.style;let V=[];const G=Kn(a);if(a===void 0)return V;if(G!=="object")return V=V.concat([new ie("light",a,`object expected, ${G} found`)]),V;for(const ee in a){const le=ee.match(/^(.*)-transition$/);V=V.concat(le&&x[le[1]]&&x[le[1]].transition?u.validateSpec({key:ee,value:a[ee],valueSpec:p.transition,validateSpec:u.validateSpec,style:L,styleSpec:p}):x[ee]?u.validateSpec({key:ee,value:a[ee],valueSpec:x[ee],validateSpec:u.validateSpec,style:L,styleSpec:p}):[new ie(ee,a[ee],`unknown property "${ee}"`)])}return V}function ii(u){const a=u.value,p=u.styleSpec,x=p.terrain,L=u.style;let V=[];const G=Kn(a);if(a===void 0)return V;if(G!=="object")return V=V.concat([new ie("terrain",a,`object expected, ${G} found`)]),V;for(const ee in a)V=V.concat(x[ee]?u.validateSpec({key:ee,value:a[ee],valueSpec:x[ee],validateSpec:u.validateSpec,style:L,styleSpec:p}):[new ie(ee,a[ee],`unknown property "${ee}"`)]);return V}function Ci(u){let a=[];const p=u.value,x=u.key;if(Array.isArray(p)){const L=[],V=[];for(const G in p)p[G].id&&L.includes(p[G].id)&&a.push(new ie(x,p,`all the sprites' ids must be unique, but ${p[G].id} is duplicated`)),L.push(p[G].id),p[G].url&&V.includes(p[G].url)&&a.push(new ie(x,p,`all the sprites' URLs must be unique, but ${p[G].url} is duplicated`)),V.push(p[G].url),a=a.concat(zr({key:`${x}[${G}]`,value:p[G],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:u.validateSpec}));return a}return Si({key:x,value:p})}const ln={"*":()=>[],array:pA,boolean:function(u){const a=u.value,p=u.key,x=Kn(a);return x!=="boolean"?[new ie(p,a,`boolean expected, ${x} found`)]:[]},number:Ba,color:function(u){const a=u.key,p=u.value,x=Kn(p);return x!=="string"?[new ie(a,p,`color expected, ${x} found`)]:Mi.parse(String(p))?[]:[new ie(a,p,`color expected, "${p}" found`)]},constants:Qa,enum:so,filter:So,function:Bs,layer:Xt,object:zr,source:mt,light:Bt,terrain:ii,string:Si,formatted:function(u){return Si(u).length===0?[]:qs(u)},resolvedImage:function(u){return Si(u).length===0?[]:qs(u)},padding:function(u){const a=u.key,p=u.value;if(Kn(p)==="array"){if(p.length<1||p.length>4)return[new ie(a,p,`padding requires 1 to 4 values; ${p.length} values found`)];const x={type:"number"};let L=[];for(let V=0;V<p.length;V++)L=L.concat(u.validateSpec({key:`${a}[${V}]`,value:p[V],validateSpec:u.validateSpec,valueSpec:x}));return L}return Ba({key:a,value:p,valueSpec:{}})},variableAnchorOffsetCollection:function(u){const a=u.key,p=u.value,x=Kn(p),L=u.styleSpec;if(x!=="array"||p.length<1||p.length%2!=0)return[new ie(a,p,"variableAnchorOffsetCollection requires a non-empty array of even length")];let V=[];for(let G=0;G<p.length;G+=2)V=V.concat(so({key:`${a}[${G}]`,value:p[G],valueSpec:L.layout_symbol["text-anchor"]})),V=V.concat(pA({key:`${a}[${G+1}]`,value:p[G+1],valueSpec:{length:2,value:"number"},validateSpec:u.validateSpec,style:u.style,styleSpec:L}));return V},sprite:Ci};function Pn(u){const a=u.value,p=u.valueSpec,x=u.styleSpec;return u.validateSpec=Pn,p.expression&&Xr(br(a))?Bs(u):p.expression&&Vo(is(a))?qs(u):p.type&&ln[p.type]?ln[p.type](u):zr(Ae({},u,{valueSpec:p.type?x[p.type]:p}))}function Qn(u){const a=u.value,p=u.key,x=Si(u);return x.length||(a.indexOf("{fontstack}")===-1&&x.push(new ie(p,a,'"glyphs" url must include a "{fontstack}" token')),a.indexOf("{range}")===-1&&x.push(new ie(p,a,'"glyphs" url must include a "{range}" token'))),x}function Bn(u,a=ti){let p=[];return p=p.concat(Pn({key:"",value:u,valueSpec:a.$root,styleSpec:a,style:u,validateSpec:Pn,objectElementValidators:{glyphs:Qn,"*":()=>[]}})),u.constants&&(p=p.concat(Qa({key:"constants",value:u.constants,style:u,styleSpec:a,validateSpec:Pn}))),Zs(p)}function cs(u){return function(a){return u({...a,validateSpec:Pn})}}function Zs(u){return[].concat(u).sort((a,p)=>a.line-p.line)}function Js(u){return function(...a){return Zs(u.apply(this,a))}}Bn.source=Js(cs(mt)),Bn.sprite=Js(cs(Ci)),Bn.glyphs=Js(cs(Qn)),Bn.light=Js(cs(Bt)),Bn.terrain=Js(cs(ii)),Bn.layer=Js(cs(Xt)),Bn.filter=Js(cs(So)),Bn.paintProperty=Js(cs(nA)),Bn.layoutProperty=Js(cs(Sa));const fa=Bn,cl=fa.light,jr=fa.paintProperty,Hu=fa.layoutProperty;function Ol(u,a){let p=!1;if(a&&a.length)for(const x of a)u.fire(new sn(new Error(x.message))),p=!0;return p}class ao{constructor(a,p,x){const L=this.cells=[];if(a instanceof ArrayBuffer){this.arrayBuffer=a;const G=new Int32Array(this.arrayBuffer);a=G[0],this.d=(p=G[1])+2*(x=G[2]);for(let le=0;le<this.d*this.d;le++){const _e=G[3+le],Pe=G[3+le+1];L.push(_e===Pe?null:G.subarray(_e,Pe))}const ee=G[3+L.length+1];this.keys=G.subarray(G[3+L.length],ee),this.bboxes=G.subarray(ee),this.insert=this._insertReadonly}else{this.d=p+2*x;for(let G=0;G<this.d*this.d;G++)L.push([]);this.keys=[],this.bboxes=[]}this.n=p,this.extent=a,this.padding=x,this.scale=p/a,this.uid=0;const V=x/p*a;this.min=-V,this.max=a+V}insert(a,p,x,L,V){this._forEachCell(p,x,L,V,this._insertCell,this.uid++,void 0,void 0),this.keys.push(a),this.bboxes.push(p),this.bboxes.push(x),this.bboxes.push(L),this.bboxes.push(V)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(a,p,x,L,V,G){this.cells[V].push(G)}query(a,p,x,L,V){const G=this.min,ee=this.max;if(a<=G&&p<=G&&ee<=x&&ee<=L&&!V)return Array.prototype.slice.call(this.keys);{const le=[];return this._forEachCell(a,p,x,L,this._queryCell,le,{},V),le}}_queryCell(a,p,x,L,V,G,ee,le){const _e=this.cells[V];if(_e!==null){const Pe=this.keys,Ge=this.bboxes;for(let it=0;it<_e.length;it++){const At=_e[it];if(ee[At]===void 0){const ht=4*At;(le?le(Ge[ht+0],Ge[ht+1],Ge[ht+2],Ge[ht+3]):a<=Ge[ht+2]&&p<=Ge[ht+3]&&x>=Ge[ht+0]&&L>=Ge[ht+1])?(ee[At]=!0,G.push(Pe[At])):ee[At]=!1}}}}_forEachCell(a,p,x,L,V,G,ee,le){const _e=this._convertToCellCoord(a),Pe=this._convertToCellCoord(p),Ge=this._convertToCellCoord(x),it=this._convertToCellCoord(L);for(let At=_e;At<=Ge;At++)for(let ht=Pe;ht<=it;ht++){const Ct=this.d*ht+At;if((!le||le(this._convertFromCellCoord(At),this._convertFromCellCoord(ht),this._convertFromCellCoord(At+1),this._convertFromCellCoord(ht+1)))&&V.call(this,a,p,x,L,Ct,G,ee,le))return}}_convertFromCellCoord(a){return(a-this.padding)/this.scale}_convertToCellCoord(a){return Math.max(0,Math.min(this.d-1,Math.floor(a*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const a=this.cells,p=3+this.cells.length+1+1;let x=0;for(let G=0;G<this.cells.length;G++)x+=this.cells[G].length;const L=new Int32Array(p+x+this.keys.length+this.bboxes.length);L[0]=this.extent,L[1]=this.n,L[2]=this.padding;let V=p;for(let G=0;G<a.length;G++){const ee=a[G];L[3+G]=V,L.set(ee,V),V+=ee.length}return L[3+a.length]=V,L.set(this.keys,V),V+=this.keys.length,L[3+a.length+1]=V,L.set(this.bboxes,V),V+=this.bboxes.length,L.buffer}static serialize(a,p){const x=a.toArrayBuffer();return p&&p.push(x),{buffer:x}}static deserialize(a){return new ao(a.buffer)}}const rA={};function un(u,a,p={}){if(rA[u])throw new Error(`${u} is already registered.`);Object.defineProperty(a,"_classRegistryKey",{value:u,writeable:!1}),rA[u]={klass:a,omit:p.omit||[],shallow:p.shallow||[]}}un("Object",Object),un("TransferableGridIndex",ao),un("Color",Mi),un("Error",Error),un("AJAXError",Di),un("ResolvedImage",Cr),un("StylePropertyFunction",wo),un("StyleExpression",TA,{omit:["_evaluator"]}),un("ZoomDependentExpression",Ar),un("ZoomConstantExpression",ws),un("CompoundExpression",yr,{omit:["_evaluate"]});for(const u in bo)bo[u]._classRegistryKey||un(`Expression_${u}`,bo[u]);function Co(u){return u&&typeof ArrayBuffer<"u"&&(u instanceof ArrayBuffer||u.constructor&&u.constructor.name==="ArrayBuffer")}function Eo(u,a){if(u==null||typeof u=="boolean"||typeof u=="number"||typeof u=="string"||u instanceof Boolean||u instanceof Number||u instanceof String||u instanceof Date||u instanceof RegExp||u instanceof Blob)return u;if(Co(u)||_t(u))return a&&a.push(u),u;if(ArrayBuffer.isView(u)){const p=u;return a&&a.push(p.buffer),p}if(u instanceof ImageData)return a&&a.push(u.data.buffer),u;if(Array.isArray(u)){const p=[];for(const x of u)p.push(Eo(x,a));return p}if(typeof u=="object"){const p=u.constructor,x=p._classRegistryKey;if(!x)throw new Error("can't serialize object of unregistered class");if(!rA[x])throw new Error(`${x} is not registered.`);const L=p.serialize?p.serialize(u,a):{};if(p.serialize){if(a&&L===a[a.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const V in u){if(!u.hasOwnProperty(V)||rA[x].omit.indexOf(V)>=0)continue;const G=u[V];L[V]=rA[x].shallow.indexOf(V)>=0?G:Eo(G,a)}u instanceof Error&&(L.message=u.message)}if(L.$name)throw new Error("$name property is reserved for worker serialization logic.");return x!=="Object"&&(L.$name=x),L}throw new Error("can't serialize object of type "+typeof u)}function oo(u){if(u==null||typeof u=="boolean"||typeof u=="number"||typeof u=="string"||u instanceof Boolean||u instanceof Number||u instanceof String||u instanceof Date||u instanceof RegExp||u instanceof Blob||Co(u)||_t(u)||ArrayBuffer.isView(u)||u instanceof ImageData)return u;if(Array.isArray(u))return u.map(oo);if(typeof u=="object"){const a=u.$name||"Object";if(!rA[a])throw new Error(`can't deserialize unregistered class ${a}`);const{klass:p}=rA[a];if(!p)throw new Error(`can't deserialize unregistered class ${a}`);if(p.deserialize)return p.deserialize(u);const x=Object.create(p.prototype);for(const L of Object.keys(u)){if(L==="$name")continue;const V=u[L];x[L]=rA[a].shallow.indexOf(L)>=0?V:oo(V)}return x}throw new Error("can't deserialize object of type "+typeof u)}class zl{constructor(){this.first=!0}update(a,p){const x=Math.floor(a);return this.first?(this.first=!1,this.lastIntegerZoom=x,this.lastIntegerZoomTime=0,this.lastZoom=a,this.lastFloorZoom=x,!0):(this.lastFloorZoom>x?(this.lastIntegerZoom=x+1,this.lastIntegerZoomTime=p):this.lastFloorZoom<x&&(this.lastIntegerZoom=x,this.lastIntegerZoomTime=p),a!==this.lastZoom&&(this.lastZoom=a,this.lastFloorZoom=x,!0))}}const rn={"Latin-1 Supplement":u=>u>=128&&u<=255,Arabic:u=>u>=1536&&u<=1791,"Arabic Supplement":u=>u>=1872&&u<=1919,"Arabic Extended-A":u=>u>=2208&&u<=2303,"Hangul Jamo":u=>u>=4352&&u<=4607,"Unified Canadian Aboriginal Syllabics":u=>u>=5120&&u<=5759,Khmer:u=>u>=6016&&u<=6143,"Unified Canadian Aboriginal Syllabics Extended":u=>u>=6320&&u<=6399,"General Punctuation":u=>u>=8192&&u<=8303,"Letterlike Symbols":u=>u>=8448&&u<=8527,"Number Forms":u=>u>=8528&&u<=8591,"Miscellaneous Technical":u=>u>=8960&&u<=9215,"Control Pictures":u=>u>=9216&&u<=9279,"Optical Character Recognition":u=>u>=9280&&u<=9311,"Enclosed Alphanumerics":u=>u>=9312&&u<=9471,"Geometric Shapes":u=>u>=9632&&u<=9727,"Miscellaneous Symbols":u=>u>=9728&&u<=9983,"Miscellaneous Symbols and Arrows":u=>u>=11008&&u<=11263,"CJK Radicals Supplement":u=>u>=11904&&u<=12031,"Kangxi Radicals":u=>u>=12032&&u<=12255,"Ideographic Description Characters":u=>u>=12272&&u<=12287,"CJK Symbols and Punctuation":u=>u>=12288&&u<=12351,Hiragana:u=>u>=12352&&u<=12447,Katakana:u=>u>=12448&&u<=12543,Bopomofo:u=>u>=12544&&u<=12591,"Hangul Compatibility Jamo":u=>u>=12592&&u<=12687,Kanbun:u=>u>=12688&&u<=12703,"Bopomofo Extended":u=>u>=12704&&u<=12735,"CJK Strokes":u=>u>=12736&&u<=12783,"Katakana Phonetic Extensions":u=>u>=12784&&u<=12799,"Enclosed CJK Letters and Months":u=>u>=12800&&u<=13055,"CJK Compatibility":u=>u>=13056&&u<=13311,"CJK Unified Ideographs Extension A":u=>u>=13312&&u<=19903,"Yijing Hexagram Symbols":u=>u>=19904&&u<=19967,"CJK Unified Ideographs":u=>u>=19968&&u<=40959,"Yi Syllables":u=>u>=40960&&u<=42127,"Yi Radicals":u=>u>=42128&&u<=42191,"Hangul Jamo Extended-A":u=>u>=43360&&u<=43391,"Hangul Syllables":u=>u>=44032&&u<=55215,"Hangul Jamo Extended-B":u=>u>=55216&&u<=55295,"Private Use Area":u=>u>=57344&&u<=63743,"CJK Compatibility Ideographs":u=>u>=63744&&u<=64255,"Arabic Presentation Forms-A":u=>u>=64336&&u<=65023,"Vertical Forms":u=>u>=65040&&u<=65055,"CJK Compatibility Forms":u=>u>=65072&&u<=65103,"Small Form Variants":u=>u>=65104&&u<=65135,"Arabic Presentation Forms-B":u=>u>=65136&&u<=65279,"Halfwidth and Fullwidth Forms":u=>u>=65280&&u<=65519};function hl(u){for(const a of u)if(UA(a.charCodeAt(0)))return!0;return!1}function eu(u){for(const a of u)if(!gA(a.charCodeAt(0)))return!1;return!0}function gA(u){return!(rn.Arabic(u)||rn["Arabic Supplement"](u)||rn["Arabic Extended-A"](u)||rn["Arabic Presentation Forms-A"](u)||rn["Arabic Presentation Forms-B"](u))}function UA(u){return!(u!==746&&u!==747&&(u<4352||!(rn["Bopomofo Extended"](u)||rn.Bopomofo(u)||rn["CJK Compatibility Forms"](u)&&!(u>=65097&&u<=65103)||rn["CJK Compatibility Ideographs"](u)||rn["CJK Compatibility"](u)||rn["CJK Radicals Supplement"](u)||rn["CJK Strokes"](u)||!(!rn["CJK Symbols and Punctuation"](u)||u>=12296&&u<=12305||u>=12308&&u<=12319||u===12336)||rn["CJK Unified Ideographs Extension A"](u)||rn["CJK Unified Ideographs"](u)||rn["Enclosed CJK Letters and Months"](u)||rn["Hangul Compatibility Jamo"](u)||rn["Hangul Jamo Extended-A"](u)||rn["Hangul Jamo Extended-B"](u)||rn["Hangul Jamo"](u)||rn["Hangul Syllables"](u)||rn.Hiragana(u)||rn["Ideographic Description Characters"](u)||rn.Kanbun(u)||rn["Kangxi Radicals"](u)||rn["Katakana Phonetic Extensions"](u)||rn.Katakana(u)&&u!==12540||!(!rn["Halfwidth and Fullwidth Forms"](u)||u===65288||u===65289||u===65293||u>=65306&&u<=65310||u===65339||u===65341||u===65343||u>=65371&&u<=65503||u===65507||u>=65512&&u<=65519)||!(!rn["Small Form Variants"](u)||u>=65112&&u<=65118||u>=65123&&u<=65126)||rn["Unified Canadian Aboriginal Syllabics"](u)||rn["Unified Canadian Aboriginal Syllabics Extended"](u)||rn["Vertical Forms"](u)||rn["Yijing Hexagram Symbols"](u)||rn["Yi Syllables"](u)||rn["Yi Radicals"](u))))}function tu(u){return!(UA(u)||function(a){return!!(rn["Latin-1 Supplement"](a)&&(a===167||a===169||a===174||a===177||a===188||a===189||a===190||a===215||a===247)||rn["General Punctuation"](a)&&(a===8214||a===8224||a===8225||a===8240||a===8241||a===8251||a===8252||a===8258||a===8263||a===8264||a===8265||a===8273)||rn["Letterlike Symbols"](a)||rn["Number Forms"](a)||rn["Miscellaneous Technical"](a)&&(a>=8960&&a<=8967||a>=8972&&a<=8991||a>=8996&&a<=9e3||a===9003||a>=9085&&a<=9114||a>=9150&&a<=9165||a===9167||a>=9169&&a<=9179||a>=9186&&a<=9215)||rn["Control Pictures"](a)&&a!==9251||rn["Optical Character Recognition"](a)||rn["Enclosed Alphanumerics"](a)||rn["Geometric Shapes"](a)||rn["Miscellaneous Symbols"](a)&&!(a>=9754&&a<=9759)||rn["Miscellaneous Symbols and Arrows"](a)&&(a>=11026&&a<=11055||a>=11088&&a<=11097||a>=11192&&a<=11243)||rn["CJK Symbols and Punctuation"](a)||rn.Katakana(a)||rn["Private Use Area"](a)||rn["CJK Compatibility Forms"](a)||rn["Small Form Variants"](a)||rn["Halfwidth and Fullwidth Forms"](a)||a===8734||a===8756||a===8757||a>=9984&&a<=10087||a>=10102&&a<=10131||a===65532||a===65533)}(u))}function GA(u){return u>=1424&&u<=2303||rn["Arabic Presentation Forms-A"](u)||rn["Arabic Presentation Forms-B"](u)}function mA(u,a){return!(!a&&GA(u)||u>=2304&&u<=3583||u>=3840&&u<=4255||rn.Khmer(u))}function ks(u){for(const a of u)if(GA(a.charCodeAt(0)))return!0;return!1}const mu="deferred",_u="loading",vu="loaded";let HA=null,la="unavailable",Go=null;const fl=function(u){u&&typeof u=="string"&&u.indexOf("NetworkError")>-1&&(la="error"),HA&&HA(u)};function iu(){dl.fire(new ki("pluginStateChange",{pluginStatus:la,pluginURL:Go}))}const dl=new ar,nu=function(){return la},lr=function(){if(la!==mu||!Go)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");la=_u,iu(),Go&&Oi({url:Go},u=>{u?fl(u):(la=vu,iu())})},ns={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>la===vu||ns.applyArabicShaping!=null,isLoading:()=>la===_u,setState(u){if(!vt())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");la=u.pluginStatus,Go=u.pluginURL},isParsed(){if(!vt())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return ns.applyArabicShaping!=null&&ns.processBidirectionalText!=null&&ns.processStyledBidirectionalText!=null},getPluginURL(){if(!vt())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return Go}};class Jr{constructor(a,p){this.zoom=a,p?(this.now=p.now,this.fadeDuration=p.fadeDuration,this.zoomHistory=p.zoomHistory,this.transition=p.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new zl,this.transition={})}isSupportedScript(a){return function(p,x){for(const L of p)if(!mA(L.charCodeAt(0),x))return!1;return!0}(a,ns.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const a=this.zoom,p=a-Math.floor(a),x=this.crossFadingFactor();return a>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:p+(1-p)*x}:{fromScale:.5,toScale:1,t:1-(1-x)*p}}}class da{constructor(a,p){this.property=a,this.value=p,this.expression=function(x,L){if(Xr(x))return new wo(x,L);if(Vo(x)){const V=On(x,L);if(V.result==="error")throw new Error(V.value.map(G=>`${G.key}: ${G.message}`).join(", "));return V.value}{let V=x;return L.type==="color"&&typeof x=="string"?V=Mi.parse(x):L.type!=="padding"||typeof x!="number"&&!Array.isArray(x)?L.type==="variableAnchorOffsetCollection"&&Array.isArray(x)&&(V=nn.parse(x)):V=Fi.parse(x),{kind:"constant",evaluate:()=>V}}}(p===void 0?a.specification.default:p,a.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(a,p,x){return this.property.possiblyEvaluate(this,a,p,x)}}class zn{constructor(a){this.property=a,this.value=new da(a,void 0)}transitioned(a,p){return new ru(this.property,this.value,p,Ve({},a.transition,this.transition),a.now)}untransitioned(){return new ru(this.property,this.value,null,{},0)}}class Io{constructor(a){this._properties=a,this._values=Object.create(a.defaultTransitionablePropertyValues)}getValue(a){return ut(this._values[a].value.value)}setValue(a,p){Object.prototype.hasOwnProperty.call(this._values,a)||(this._values[a]=new zn(this._values[a].property)),this._values[a].value=new da(this._values[a].property,p===null?void 0:ut(p))}getTransition(a){return ut(this._values[a].transition)}setTransition(a,p){Object.prototype.hasOwnProperty.call(this._values,a)||(this._values[a]=new zn(this._values[a].property)),this._values[a].transition=ut(p)||void 0}serialize(){const a={};for(const p of Object.keys(this._values)){const x=this.getValue(p);x!==void 0&&(a[p]=x);const L=this.getTransition(p);L!==void 0&&(a[`${p}-transition`]=L)}return a}transitioned(a,p){const x=new sA(this._properties);for(const L of Object.keys(this._values))x._values[L]=this._values[L].transitioned(a,p._values[L]);return x}untransitioned(){const a=new sA(this._properties);for(const p of Object.keys(this._values))a._values[p]=this._values[p].untransitioned();return a}}class ru{constructor(a,p,x,L,V){this.property=a,this.value=p,this.begin=V+L.delay||0,this.end=this.begin+L.duration||0,a.specification.transition&&(L.delay||L.duration)&&(this.prior=x)}possiblyEvaluate(a,p,x){const L=a.now||0,V=this.value.possiblyEvaluate(a,p,x),G=this.prior;if(G){if(L>this.end)return this.prior=null,V;if(this.value.isDataDriven())return this.prior=null,V;if(L<this.begin)return G.possiblyEvaluate(a,p,x);{const ee=(L-this.begin)/(this.end-this.begin);return this.property.interpolate(G.possiblyEvaluate(a,p,x),V,function(le){if(le<=0)return 0;if(le>=1)return 1;const _e=le*le,Pe=_e*le;return 4*(le<.5?Pe:3*(le-_e)+Pe-.75)}(ee))}}return V}}class sA{constructor(a){this._properties=a,this._values=Object.create(a.defaultTransitioningPropertyValues)}possiblyEvaluate(a,p,x){const L=new Ca(this._properties);for(const V of Object.keys(this._values))L._values[V]=this._values[V].possiblyEvaluate(a,p,x);return L}hasTransition(){for(const a of Object.keys(this._values))if(this._values[a].prior)return!0;return!1}}class Fl{constructor(a){this._properties=a,this._values=Object.create(a.defaultPropertyValues)}hasValue(a){return this._values[a].value!==void 0}getValue(a){return ut(this._values[a].value)}setValue(a,p){this._values[a]=new da(this._values[a].property,p===null?void 0:ut(p))}serialize(){const a={};for(const p of Object.keys(this._values)){const x=this.getValue(p);x!==void 0&&(a[p]=x)}return a}possiblyEvaluate(a,p,x){const L=new Ca(this._properties);for(const V of Object.keys(this._values))L._values[V]=this._values[V].possiblyEvaluate(a,p,x);return L}}class Vs{constructor(a,p,x){this.property=a,this.value=p,this.parameters=x}isConstant(){return this.value.kind==="constant"}constantOr(a){return this.value.kind==="constant"?this.value.value:a}evaluate(a,p,x,L){return this.property.evaluate(this.value,this.parameters,a,p,x,L)}}class Ca{constructor(a){this._properties=a,this._values=Object.create(a.defaultPossiblyEvaluatedValues)}get(a){return this._values[a]}}class ci{constructor(a){this.specification=a}possiblyEvaluate(a,p){if(a.isDataDriven())throw new Error("Value should not be data driven");return a.expression.evaluate(p)}interpolate(a,p,x){const L=xs[this.specification.type];return L?L(a,p,x):a}}class Ii{constructor(a,p){this.specification=a,this.overrides=p}possiblyEvaluate(a,p,x,L){return new Vs(this,a.expression.kind==="constant"||a.expression.kind==="camera"?{kind:"constant",value:a.expression.evaluate(p,null,{},x,L)}:a.expression,p)}interpolate(a,p,x){if(a.value.kind!=="constant"||p.value.kind!=="constant")return a;if(a.value.value===void 0||p.value.value===void 0)return new Vs(this,{kind:"constant",value:void 0},a.parameters);const L=xs[this.specification.type];if(L){const V=L(a.value.value,p.value.value,x);return new Vs(this,{kind:"constant",value:V},a.parameters)}return a}evaluate(a,p,x,L,V,G){return a.kind==="constant"?a.value:a.evaluate(p,x,L,V,G)}}class Ho extends Ii{possiblyEvaluate(a,p,x,L){if(a.value===void 0)return new Vs(this,{kind:"constant",value:void 0},p);if(a.expression.kind==="constant"){const V=a.expression.evaluate(p,null,{},x,L),G=a.property.specification.type==="resolvedImage"&&typeof V!="string"?V.name:V,ee=this._calculate(G,G,G,p);return new Vs(this,{kind:"constant",value:ee},p)}if(a.expression.kind==="camera"){const V=this._calculate(a.expression.evaluate({zoom:p.zoom-1}),a.expression.evaluate({zoom:p.zoom}),a.expression.evaluate({zoom:p.zoom+1}),p);return new Vs(this,{kind:"constant",value:V},p)}return new Vs(this,a.expression,p)}evaluate(a,p,x,L,V,G){if(a.kind==="source"){const ee=a.evaluate(p,x,L,V,G);return this._calculate(ee,ee,ee,p)}return a.kind==="composite"?this._calculate(a.evaluate({zoom:Math.floor(p.zoom)-1},x,L),a.evaluate({zoom:Math.floor(p.zoom)},x,L),a.evaluate({zoom:Math.floor(p.zoom)+1},x,L),p):a.value}_calculate(a,p,x,L){return L.zoom>L.zoomHistory.lastIntegerZoom?{from:a,to:p}:{from:x,to:p}}interpolate(a){return a}}class pl{constructor(a){this.specification=a}possiblyEvaluate(a,p,x,L){if(a.value!==void 0){if(a.expression.kind==="constant"){const V=a.expression.evaluate(p,null,{},x,L);return this._calculate(V,V,V,p)}return this._calculate(a.expression.evaluate(new Jr(Math.floor(p.zoom-1),p)),a.expression.evaluate(new Jr(Math.floor(p.zoom),p)),a.expression.evaluate(new Jr(Math.floor(p.zoom+1),p)),p)}}_calculate(a,p,x,L){return L.zoom>L.zoomHistory.lastIntegerZoom?{from:a,to:p}:{from:x,to:p}}interpolate(a){return a}}class gl{constructor(a){this.specification=a}possiblyEvaluate(a,p,x,L){return!!a.expression.evaluate(p,null,{},x,L)}interpolate(){return!1}}class Wr{constructor(a){this.properties=a,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const p in a){const x=a[p];x.specification.overridable&&this.overridableProperties.push(p);const L=this.defaultPropertyValues[p]=new da(x,void 0),V=this.defaultTransitionablePropertyValues[p]=new zn(x);this.defaultTransitioningPropertyValues[p]=V.untransitioned(),this.defaultPossiblyEvaluatedValues[p]=L.possiblyEvaluate({})}}}un("DataDrivenProperty",Ii),un("DataConstantProperty",ci),un("CrossFadedDataDrivenProperty",Ho),un("CrossFadedProperty",pl),un("ColorRampProperty",gl);const Qo="-transition";class rs extends ar{constructor(a,p){if(super(),this.id=a.id,this.type=a.type,this._featureFilter={filter:()=>!0,needGeometry:!1},a.type!=="custom"&&(this.metadata=a.metadata,this.minzoom=a.minzoom,this.maxzoom=a.maxzoom,a.type!=="background"&&(this.source=a.source,this.sourceLayer=a["source-layer"],this.filter=a.filter),p.layout&&(this._unevaluatedLayout=new Fl(p.layout)),p.paint)){this._transitionablePaint=new Io(p.paint);for(const x in a.paint)this.setPaintProperty(x,a.paint[x],{validate:!1});for(const x in a.layout)this.setLayoutProperty(x,a.layout[x],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Ca(p.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(a){return a==="visibility"?this.visibility:this._unevaluatedLayout.getValue(a)}setLayoutProperty(a,p,x={}){p!=null&&this._validate(Hu,`layers.${this.id}.layout.${a}`,a,p,x)||(a!=="visibility"?this._unevaluatedLayout.setValue(a,p):this.visibility=p)}getPaintProperty(a){return a.endsWith(Qo)?this._transitionablePaint.getTransition(a.slice(0,-11)):this._transitionablePaint.getValue(a)}setPaintProperty(a,p,x={}){if(p!=null&&this._validate(jr,`layers.${this.id}.paint.${a}`,a,p,x))return!1;if(a.endsWith(Qo))return this._transitionablePaint.setTransition(a.slice(0,-11),p||void 0),!1;{const L=this._transitionablePaint._values[a],V=L.property.specification["property-type"]==="cross-faded-data-driven",G=L.value.isDataDriven(),ee=L.value;this._transitionablePaint.setValue(a,p),this._handleSpecialPaintPropertyUpdate(a);const le=this._transitionablePaint._values[a].value;return le.isDataDriven()||G||V||this._handleOverridablePaintPropertyUpdate(a,ee,le)}}_handleSpecialPaintPropertyUpdate(a){}_handleOverridablePaintPropertyUpdate(a,p,x){return!1}isHidden(a){return!!(this.minzoom&&a<this.minzoom)||!!(this.maxzoom&&a>=this.maxzoom)||this.visibility==="none"}updateTransitions(a){this._transitioningPaint=this._transitionablePaint.transitioned(a,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(a,p){a.getCrossfadeParameters&&(this._crossfadeParameters=a.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(a,void 0,p)),this.paint=this._transitioningPaint.possiblyEvaluate(a,void 0,p)}serialize(){const a={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(a.layout=a.layout||{},a.layout.visibility=this.visibility),lt(a,(p,x)=>!(p===void 0||x==="layout"&&!Object.keys(p).length||x==="paint"&&!Object.keys(p).length))}_validate(a,p,x,L,V={}){return(!V||V.validate!==!1)&&Ol(this,a.call(fa,{key:p,layerType:this.type,objectKey:x,value:L,styleSpec:ti,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const a in this.paint._values){const p=this.paint.get(a);if(p instanceof Vs&&Ha(p.property.specification)&&(p.value.kind==="source"||p.value.kind==="composite")&&p.value.isStateDependent)return!0}return!1}}const _={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class S{constructor(a,p){this._structArray=a,this._pos1=p*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class C{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(a,p){return a._trim(),p&&(a.isTransferred=!0,p.push(a.arrayBuffer)),{length:a.length,arrayBuffer:a.arrayBuffer}}static deserialize(a){const p=Object.create(this.prototype);return p.arrayBuffer=a.arrayBuffer,p.length=a.length,p.capacity=a.arrayBuffer.byteLength/p.bytesPerElement,p._refreshViews(),p}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(a){this.reserve(a),this.length=a}reserve(a){if(a>this.capacity){this.capacity=Math.max(a,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const p=this.uint8;this._refreshViews(),p&&this.uint8.set(p)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function E(u,a=1){let p=0,x=0;return{members:u.map(L=>{const V=_[L.type].BYTES_PER_ELEMENT,G=p=H(p,Math.max(a,V)),ee=L.components||1;return x=Math.max(x,V),p+=V*ee,{name:L.name,type:L.type,components:ee,offset:G}}),size:H(p,Math.max(x,a)),alignment:a}}function H(u,a){return Math.ceil(u/a)*a}class W extends C{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,p){const x=this.length;return this.resize(x+1),this.emplace(x,a,p)}emplace(a,p,x){const L=2*a;return this.int16[L+0]=p,this.int16[L+1]=x,a}}W.prototype.bytesPerElement=4,un("StructArrayLayout2i4",W);class Z extends C{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,p,x){const L=this.length;return this.resize(L+1),this.emplace(L,a,p,x)}emplace(a,p,x,L){const V=3*a;return this.int16[V+0]=p,this.int16[V+1]=x,this.int16[V+2]=L,a}}Z.prototype.bytesPerElement=6,un("StructArrayLayout3i6",Z);class ae extends C{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,p,x,L){const V=this.length;return this.resize(V+1),this.emplace(V,a,p,x,L)}emplace(a,p,x,L,V){const G=4*a;return this.int16[G+0]=p,this.int16[G+1]=x,this.int16[G+2]=L,this.int16[G+3]=V,a}}ae.prototype.bytesPerElement=8,un("StructArrayLayout4i8",ae);class Ie extends C{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,p,x,L,V,G){const ee=this.length;return this.resize(ee+1),this.emplace(ee,a,p,x,L,V,G)}emplace(a,p,x,L,V,G,ee){const le=6*a;return this.int16[le+0]=p,this.int16[le+1]=x,this.int16[le+2]=L,this.int16[le+3]=V,this.int16[le+4]=G,this.int16[le+5]=ee,a}}Ie.prototype.bytesPerElement=12,un("StructArrayLayout2i4i12",Ie);class $e extends C{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,p,x,L,V,G){const ee=this.length;return this.resize(ee+1),this.emplace(ee,a,p,x,L,V,G)}emplace(a,p,x,L,V,G,ee){const le=4*a,_e=8*a;return this.int16[le+0]=p,this.int16[le+1]=x,this.uint8[_e+4]=L,this.uint8[_e+5]=V,this.uint8[_e+6]=G,this.uint8[_e+7]=ee,a}}$e.prototype.bytesPerElement=8,un("StructArrayLayout2i4ub8",$e);class ot extends C{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,p){const x=this.length;return this.resize(x+1),this.emplace(x,a,p)}emplace(a,p,x){const L=2*a;return this.float32[L+0]=p,this.float32[L+1]=x,a}}ot.prototype.bytesPerElement=8,un("StructArrayLayout2f8",ot);class Nt extends C{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,p,x,L,V,G,ee,le,_e,Pe){const Ge=this.length;return this.resize(Ge+1),this.emplace(Ge,a,p,x,L,V,G,ee,le,_e,Pe)}emplace(a,p,x,L,V,G,ee,le,_e,Pe,Ge){const it=10*a;return this.uint16[it+0]=p,this.uint16[it+1]=x,this.uint16[it+2]=L,this.uint16[it+3]=V,this.uint16[it+4]=G,this.uint16[it+5]=ee,this.uint16[it+6]=le,this.uint16[it+7]=_e,this.uint16[it+8]=Pe,this.uint16[it+9]=Ge,a}}Nt.prototype.bytesPerElement=20,un("StructArrayLayout10ui20",Nt);class wt extends C{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,p,x,L,V,G,ee,le,_e,Pe,Ge,it){const At=this.length;return this.resize(At+1),this.emplace(At,a,p,x,L,V,G,ee,le,_e,Pe,Ge,it)}emplace(a,p,x,L,V,G,ee,le,_e,Pe,Ge,it,At){const ht=12*a;return this.int16[ht+0]=p,this.int16[ht+1]=x,this.int16[ht+2]=L,this.int16[ht+3]=V,this.uint16[ht+4]=G,this.uint16[ht+5]=ee,this.uint16[ht+6]=le,this.uint16[ht+7]=_e,this.int16[ht+8]=Pe,this.int16[ht+9]=Ge,this.int16[ht+10]=it,this.int16[ht+11]=At,a}}wt.prototype.bytesPerElement=24,un("StructArrayLayout4i4ui4i24",wt);class It extends C{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,p,x){const L=this.length;return this.resize(L+1),this.emplace(L,a,p,x)}emplace(a,p,x,L){const V=3*a;return this.float32[V+0]=p,this.float32[V+1]=x,this.float32[V+2]=L,a}}It.prototype.bytesPerElement=12,un("StructArrayLayout3f12",It);class R extends C{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(a){const p=this.length;return this.resize(p+1),this.emplace(p,a)}emplace(a,p){return this.uint32[1*a+0]=p,a}}R.prototype.bytesPerElement=4,un("StructArrayLayout1ul4",R);class s extends C{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,p,x,L,V,G,ee,le,_e){const Pe=this.length;return this.resize(Pe+1),this.emplace(Pe,a,p,x,L,V,G,ee,le,_e)}emplace(a,p,x,L,V,G,ee,le,_e,Pe){const Ge=10*a,it=5*a;return this.int16[Ge+0]=p,this.int16[Ge+1]=x,this.int16[Ge+2]=L,this.int16[Ge+3]=V,this.int16[Ge+4]=G,this.int16[Ge+5]=ee,this.uint32[it+3]=le,this.uint16[Ge+8]=_e,this.uint16[Ge+9]=Pe,a}}s.prototype.bytesPerElement=20,un("StructArrayLayout6i1ul2ui20",s);class g extends C{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,p,x,L,V,G){const ee=this.length;return this.resize(ee+1),this.emplace(ee,a,p,x,L,V,G)}emplace(a,p,x,L,V,G,ee){const le=6*a;return this.int16[le+0]=p,this.int16[le+1]=x,this.int16[le+2]=L,this.int16[le+3]=V,this.int16[le+4]=G,this.int16[le+5]=ee,a}}g.prototype.bytesPerElement=12,un("StructArrayLayout2i2i2i12",g);class I extends C{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,p,x,L,V){const G=this.length;return this.resize(G+1),this.emplace(G,a,p,x,L,V)}emplace(a,p,x,L,V,G){const ee=4*a,le=8*a;return this.float32[ee+0]=p,this.float32[ee+1]=x,this.float32[ee+2]=L,this.int16[le+6]=V,this.int16[le+7]=G,a}}I.prototype.bytesPerElement=16,un("StructArrayLayout2f1f2i16",I);class M extends C{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,p,x,L){const V=this.length;return this.resize(V+1),this.emplace(V,a,p,x,L)}emplace(a,p,x,L,V){const G=12*a,ee=3*a;return this.uint8[G+0]=p,this.uint8[G+1]=x,this.float32[ee+1]=L,this.float32[ee+2]=V,a}}M.prototype.bytesPerElement=12,un("StructArrayLayout2ub2f12",M);class F extends C{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,p,x){const L=this.length;return this.resize(L+1),this.emplace(L,a,p,x)}emplace(a,p,x,L){const V=3*a;return this.uint16[V+0]=p,this.uint16[V+1]=x,this.uint16[V+2]=L,a}}F.prototype.bytesPerElement=6,un("StructArrayLayout3ui6",F);class q extends C{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,p,x,L,V,G,ee,le,_e,Pe,Ge,it,At,ht,Ct,Tt,Dt){const Yt=this.length;return this.resize(Yt+1),this.emplace(Yt,a,p,x,L,V,G,ee,le,_e,Pe,Ge,it,At,ht,Ct,Tt,Dt)}emplace(a,p,x,L,V,G,ee,le,_e,Pe,Ge,it,At,ht,Ct,Tt,Dt,Yt){const Qt=24*a,Kt=12*a,fi=48*a;return this.int16[Qt+0]=p,this.int16[Qt+1]=x,this.uint16[Qt+2]=L,this.uint16[Qt+3]=V,this.uint32[Kt+2]=G,this.uint32[Kt+3]=ee,this.uint32[Kt+4]=le,this.uint16[Qt+10]=_e,this.uint16[Qt+11]=Pe,this.uint16[Qt+12]=Ge,this.float32[Kt+7]=it,this.float32[Kt+8]=At,this.uint8[fi+36]=ht,this.uint8[fi+37]=Ct,this.uint8[fi+38]=Tt,this.uint32[Kt+10]=Dt,this.int16[Qt+22]=Yt,a}}q.prototype.bytesPerElement=48,un("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",q);class A extends C{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,p,x,L,V,G,ee,le,_e,Pe,Ge,it,At,ht,Ct,Tt,Dt,Yt,Qt,Kt,fi,Li,hn,Cn,An,Ki,Zi,_n){const Ji=this.length;return this.resize(Ji+1),this.emplace(Ji,a,p,x,L,V,G,ee,le,_e,Pe,Ge,it,At,ht,Ct,Tt,Dt,Yt,Qt,Kt,fi,Li,hn,Cn,An,Ki,Zi,_n)}emplace(a,p,x,L,V,G,ee,le,_e,Pe,Ge,it,At,ht,Ct,Tt,Dt,Yt,Qt,Kt,fi,Li,hn,Cn,An,Ki,Zi,_n,Ji){const Gi=32*a,yn=16*a;return this.int16[Gi+0]=p,this.int16[Gi+1]=x,this.int16[Gi+2]=L,this.int16[Gi+3]=V,this.int16[Gi+4]=G,this.int16[Gi+5]=ee,this.int16[Gi+6]=le,this.int16[Gi+7]=_e,this.uint16[Gi+8]=Pe,this.uint16[Gi+9]=Ge,this.uint16[Gi+10]=it,this.uint16[Gi+11]=At,this.uint16[Gi+12]=ht,this.uint16[Gi+13]=Ct,this.uint16[Gi+14]=Tt,this.uint16[Gi+15]=Dt,this.uint16[Gi+16]=Yt,this.uint16[Gi+17]=Qt,this.uint16[Gi+18]=Kt,this.uint16[Gi+19]=fi,this.uint16[Gi+20]=Li,this.uint16[Gi+21]=hn,this.uint16[Gi+22]=Cn,this.uint32[yn+12]=An,this.float32[yn+13]=Ki,this.float32[yn+14]=Zi,this.uint16[Gi+30]=_n,this.uint16[Gi+31]=Ji,a}}A.prototype.bytesPerElement=64,un("StructArrayLayout8i15ui1ul2f2ui64",A);class l extends C{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a){const p=this.length;return this.resize(p+1),this.emplace(p,a)}emplace(a,p){return this.float32[1*a+0]=p,a}}l.prototype.bytesPerElement=4,un("StructArrayLayout1f4",l);class f extends C{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,p,x){const L=this.length;return this.resize(L+1),this.emplace(L,a,p,x)}emplace(a,p,x,L){const V=3*a;return this.uint16[6*a+0]=p,this.float32[V+1]=x,this.float32[V+2]=L,a}}f.prototype.bytesPerElement=12,un("StructArrayLayout1ui2f12",f);class m extends C{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,p,x){const L=this.length;return this.resize(L+1),this.emplace(L,a,p,x)}emplace(a,p,x,L){const V=4*a;return this.uint32[2*a+0]=p,this.uint16[V+2]=x,this.uint16[V+3]=L,a}}m.prototype.bytesPerElement=8,un("StructArrayLayout1ul2ui8",m);class b extends C{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,p){const x=this.length;return this.resize(x+1),this.emplace(x,a,p)}emplace(a,p,x){const L=2*a;return this.uint16[L+0]=p,this.uint16[L+1]=x,a}}b.prototype.bytesPerElement=4,un("StructArrayLayout2ui4",b);class T extends C{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a){const p=this.length;return this.resize(p+1),this.emplace(p,a)}emplace(a,p){return this.uint16[1*a+0]=p,a}}T.prototype.bytesPerElement=2,un("StructArrayLayout1ui2",T);class z extends C{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,p,x,L){const V=this.length;return this.resize(V+1),this.emplace(V,a,p,x,L)}emplace(a,p,x,L,V){const G=4*a;return this.float32[G+0]=p,this.float32[G+1]=x,this.float32[G+2]=L,this.float32[G+3]=V,a}}z.prototype.bytesPerElement=16,un("StructArrayLayout4f16",z);class N extends S{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new oe(this.anchorPointX,this.anchorPointY)}}N.prototype.size=20;class X extends s{get(a){return new N(this,a)}}un("CollisionBoxArray",X);class te extends S{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(a){this._structArray.uint8[this._pos1+37]=a}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(a){this._structArray.uint8[this._pos1+38]=a}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(a){this._structArray.uint32[this._pos4+10]=a}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}te.prototype.size=48;class ve extends q{get(a){return new te(this,a)}}un("PlacedSymbolArray",ve);class De extends S{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(a){this._structArray.uint32[this._pos4+12]=a}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}De.prototype.size=64;class He extends A{get(a){return new De(this,a)}}un("SymbolInstanceArray",He);class nt extends l{getoffsetX(a){return this.float32[1*a+0]}}un("GlyphOffsetArray",nt);class st extends Z{getx(a){return this.int16[3*a+0]}gety(a){return this.int16[3*a+1]}gettileUnitDistanceFromAnchor(a){return this.int16[3*a+2]}}un("SymbolLineVertexArray",st);class gt extends S{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}gt.prototype.size=12;class Ot extends f{get(a){return new gt(this,a)}}un("TextAnchorOffsetArray",Ot);class Ut extends S{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Ut.prototype.size=8;class Mt extends m{get(a){return new Ut(this,a)}}un("FeatureIndexArray",Mt);class zt extends W{}class Ft extends W{}class Bi extends W{}class hi extends Ie{}class xi extends $e{}class bi extends ot{}class Dn extends Nt{}class dn extends wt{}class tn extends It{}class on extends R{}class mn extends g{}class cn extends M{}class $n extends F{}class Tn extends b{}const Wn=E([{name:"a_pos",components:2,type:"Int16"}],4),{members:$r}=Wn;class qr{constructor(a=[]){this.segments=a}prepareSegment(a,p,x,L){let V=this.segments[this.segments.length-1];return a>qr.MAX_VERTEX_ARRAY_LENGTH&&Me(`Max vertices per segment is ${qr.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${a}`),(!V||V.vertexLength+a>qr.MAX_VERTEX_ARRAY_LENGTH||V.sortKey!==L)&&(V={vertexOffset:p.length,primitiveOffset:x.length,vertexLength:0,primitiveLength:0},L!==void 0&&(V.sortKey=L),this.segments.push(V)),V}get(){return this.segments}destroy(){for(const a of this.segments)for(const p in a.vaos)a.vaos[p].destroy()}static simpleSegment(a,p,x,L){return new qr([{vertexOffset:a,primitiveOffset:p,vertexLength:x,primitiveLength:L,vaos:{},sortKey:0}])}}function QA(u,a){return 256*(u=xe(Math.floor(u),0,255))+xe(Math.floor(a),0,255)}qr.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,un("SegmentVector",qr);const ml=E([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var qA={exports:{}},yu={exports:{}};yu.exports=function(u,a){var p,x,L,V,G,ee,le,_e;for(x=u.length-(p=3&u.length),L=a,G=3432918353,ee=461845907,_e=0;_e<x;)le=255&u.charCodeAt(_e)|(255&u.charCodeAt(++_e))<<8|(255&u.charCodeAt(++_e))<<16|(255&u.charCodeAt(++_e))<<24,++_e,L=27492+(65535&(V=5*(65535&(L=(L^=le=(65535&(le=(le=(65535&le)*G+(((le>>>16)*G&65535)<<16)&4294967295)<<15|le>>>17))*ee+(((le>>>16)*ee&65535)<<16)&4294967295)<<13|L>>>19))+((5*(L>>>16)&65535)<<16)&4294967295))+((58964+(V>>>16)&65535)<<16);switch(le=0,p){case 3:le^=(255&u.charCodeAt(_e+2))<<16;case 2:le^=(255&u.charCodeAt(_e+1))<<8;case 1:L^=le=(65535&(le=(le=(65535&(le^=255&u.charCodeAt(_e)))*G+(((le>>>16)*G&65535)<<16)&4294967295)<<15|le>>>17))*ee+(((le>>>16)*ee&65535)<<16)&4294967295}return L^=u.length,L=2246822507*(65535&(L^=L>>>16))+((2246822507*(L>>>16)&65535)<<16)&4294967295,L=3266489909*(65535&(L^=L>>>13))+((3266489909*(L>>>16)&65535)<<16)&4294967295,(L^=L>>>16)>>>0};var bu=yu.exports,ss={exports:{}};ss.exports=function(u,a){for(var p,x=u.length,L=a^x,V=0;x>=4;)p=1540483477*(65535&(p=255&u.charCodeAt(V)|(255&u.charCodeAt(++V))<<8|(255&u.charCodeAt(++V))<<16|(255&u.charCodeAt(++V))<<24))+((1540483477*(p>>>16)&65535)<<16),L=1540483477*(65535&L)+((1540483477*(L>>>16)&65535)<<16)^(p=1540483477*(65535&(p^=p>>>24))+((1540483477*(p>>>16)&65535)<<16)),x-=4,++V;switch(x){case 3:L^=(255&u.charCodeAt(V+2))<<16;case 2:L^=(255&u.charCodeAt(V+1))<<8;case 1:L=1540483477*(65535&(L^=255&u.charCodeAt(V)))+((1540483477*(L>>>16)&65535)<<16)}return L=1540483477*(65535&(L^=L>>>13))+((1540483477*(L>>>16)&65535)<<16),(L^=L>>>15)>>>0};var Ra=bu,To=ss.exports;qA.exports=Ra,qA.exports.murmur3=Ra,qA.exports.murmur2=To;var ko=O(qA.exports);class js{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(a,p,x,L){this.ids.push(ua(a)),this.positions.push(p,x,L)}getPositions(a){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const p=ua(a);let x=0,L=this.ids.length-1;for(;x<L;){const G=x+L>>1;this.ids[G]>=p?L=G:x=G+1}const V=[];for(;this.ids[x]===p;)V.push({index:this.positions[3*x],start:this.positions[3*x+1],end:this.positions[3*x+2]}),x++;return V}static serialize(a,p){const x=new Float64Array(a.ids),L=new Uint32Array(a.positions);return Ea(x,L,0,x.length-1),p&&p.push(x.buffer,L.buffer),{ids:x,positions:L}}static deserialize(a){const p=new js;return p.ids=a.ids,p.positions=a.positions,p.indexed=!0,p}}function ua(u){const a=+u;return!isNaN(a)&&a<=Number.MAX_SAFE_INTEGER?a:ko(String(u))}function Ea(u,a,p,x){for(;p<x;){const L=u[p+x>>1];let V=p-1,G=x+1;for(;;){do V++;while(u[V]<L);do G--;while(u[G]>L);if(V>=G)break;$s(u,V,G),$s(a,3*V,3*G),$s(a,3*V+1,3*G+1),$s(a,3*V+2,3*G+2)}G-p<x-G?(Ea(u,a,p,G),p=G+1):(Ea(u,a,G+1,x),x=G)}}function $s(u,a,p){const x=u[a];u[a]=u[p],u[p]=x}un("FeaturePositionMap",js);class pa{constructor(a,p){this.gl=a.gl,this.location=p}}class Qu extends pa{constructor(a,p){super(a,p),this.current=0}set(a){this.current!==a&&(this.current=a,this.gl.uniform1f(this.location,a))}}class xf extends pa{constructor(a,p){super(a,p),this.current=[0,0,0,0]}set(a){a[0]===this.current[0]&&a[1]===this.current[1]&&a[2]===this.current[2]&&a[3]===this.current[3]||(this.current=a,this.gl.uniform4f(this.location,a[0],a[1],a[2],a[3]))}}class wf extends pa{constructor(a,p){super(a,p),this.current=Mi.transparent}set(a){a.r===this.current.r&&a.g===this.current.g&&a.b===this.current.b&&a.a===this.current.a||(this.current=a,this.gl.uniform4f(this.location,a.r,a.g,a.b,a.a))}}const C0=new Float32Array(16);function hc(u){return[QA(255*u.r,255*u.g),QA(255*u.b,255*u.a)]}class _l{constructor(a,p,x){this.value=a,this.uniformNames=p.map(L=>`u_${L}`),this.type=x}setUniform(a,p,x){a.set(x.constantOr(this.value))}getBinding(a,p,x){return this.type==="color"?new wf(a,p):new Qu(a,p)}}class ZA{constructor(a,p){this.uniformNames=p.map(x=>`u_${x}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(a,p){this.pixelRatioFrom=p.pixelRatio,this.pixelRatioTo=a.pixelRatio,this.patternFrom=p.tlbr,this.patternTo=a.tlbr}setUniform(a,p,x,L){const V=L==="u_pattern_to"?this.patternTo:L==="u_pattern_from"?this.patternFrom:L==="u_pixel_ratio_to"?this.pixelRatioTo:L==="u_pixel_ratio_from"?this.pixelRatioFrom:null;V&&a.set(V)}getBinding(a,p,x){return x.substr(0,9)==="u_pattern"?new xf(a,p):new Qu(a,p)}}class jA{constructor(a,p,x,L){this.expression=a,this.type=x,this.maxValue=0,this.paintVertexAttributes=p.map(V=>({name:`a_${V}`,type:"Float32",components:x==="color"?2:1,offset:0})),this.paintVertexArray=new L}populatePaintArray(a,p,x,L,V){const G=this.paintVertexArray.length,ee=this.expression.evaluate(new Jr(0),p,{},L,[],V);this.paintVertexArray.resize(a),this._setPaintValue(G,a,ee)}updatePaintArray(a,p,x,L){const V=this.expression.evaluate({zoom:0},x,L);this._setPaintValue(a,p,V)}_setPaintValue(a,p,x){if(this.type==="color"){const L=hc(x);for(let V=a;V<p;V++)this.paintVertexArray.emplace(V,L[0],L[1])}else{for(let L=a;L<p;L++)this.paintVertexArray.emplace(L,x);this.maxValue=Math.max(this.maxValue,Math.abs(x))}}upload(a){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=a.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class PA{constructor(a,p,x,L,V,G){this.expression=a,this.uniformNames=p.map(ee=>`u_${ee}_t`),this.type=x,this.useIntegerZoom=L,this.zoom=V,this.maxValue=0,this.paintVertexAttributes=p.map(ee=>({name:`a_${ee}`,type:"Float32",components:x==="color"?4:2,offset:0})),this.paintVertexArray=new G}populatePaintArray(a,p,x,L,V){const G=this.expression.evaluate(new Jr(this.zoom),p,{},L,[],V),ee=this.expression.evaluate(new Jr(this.zoom+1),p,{},L,[],V),le=this.paintVertexArray.length;this.paintVertexArray.resize(a),this._setPaintValue(le,a,G,ee)}updatePaintArray(a,p,x,L){const V=this.expression.evaluate({zoom:this.zoom},x,L),G=this.expression.evaluate({zoom:this.zoom+1},x,L);this._setPaintValue(a,p,V,G)}_setPaintValue(a,p,x,L){if(this.type==="color"){const V=hc(x),G=hc(L);for(let ee=a;ee<p;ee++)this.paintVertexArray.emplace(ee,V[0],V[1],G[0],G[1])}else{for(let V=a;V<p;V++)this.paintVertexArray.emplace(V,x,L);this.maxValue=Math.max(this.maxValue,Math.abs(x),Math.abs(L))}}upload(a){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=a.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(a,p){const x=this.useIntegerZoom?Math.floor(p.zoom):p.zoom,L=xe(this.expression.interpolationFactor(x,this.zoom,this.zoom+1),0,1);a.set(L)}getBinding(a,p,x){return new Qu(a,p)}}class vl{constructor(a,p,x,L,V,G){this.expression=a,this.type=p,this.useIntegerZoom=x,this.zoom=L,this.layerId=G,this.zoomInPaintVertexArray=new V,this.zoomOutPaintVertexArray=new V}populatePaintArray(a,p,x){const L=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(a),this.zoomOutPaintVertexArray.resize(a),this._setPaintValues(L,a,p.patterns&&p.patterns[this.layerId],x)}updatePaintArray(a,p,x,L,V){this._setPaintValues(a,p,x.patterns&&x.patterns[this.layerId],V)}_setPaintValues(a,p,x,L){if(!L||!x)return;const{min:V,mid:G,max:ee}=x,le=L[V],_e=L[G],Pe=L[ee];if(le&&_e&&Pe)for(let Ge=a;Ge<p;Ge++)this.zoomInPaintVertexArray.emplace(Ge,_e.tl[0],_e.tl[1],_e.br[0],_e.br[1],le.tl[0],le.tl[1],le.br[0],le.br[1],_e.pixelRatio,le.pixelRatio),this.zoomOutPaintVertexArray.emplace(Ge,_e.tl[0],_e.tl[1],_e.br[0],_e.br[1],Pe.tl[0],Pe.tl[1],Pe.br[0],Pe.br[1],_e.pixelRatio,Pe.pixelRatio)}upload(a){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=a.createVertexBuffer(this.zoomInPaintVertexArray,ml.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=a.createVertexBuffer(this.zoomOutPaintVertexArray,ml.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class xu{constructor(a,p,x){this.binders={},this._buffers=[];const L=[];for(const V in a.paint._values){if(!x(V))continue;const G=a.paint.get(V);if(!(G instanceof Vs&&Ha(G.property.specification)))continue;const ee=w1(V,a.type),le=G.value,_e=G.property.specification.type,Pe=G.property.useIntegerZoom,Ge=G.property.specification["property-type"],it=Ge==="cross-faded"||Ge==="cross-faded-data-driven";if(le.kind==="constant")this.binders[V]=it?new ZA(le.value,ee):new _l(le.value,ee,_e),L.push(`/u_${V}`);else if(le.kind==="source"||it){const At=Sf(V,_e,"source");this.binders[V]=it?new vl(le,_e,Pe,p,At,a.id):new jA(le,ee,_e,At),L.push(`/a_${V}`)}else{const At=Sf(V,_e,"composite");this.binders[V]=new PA(le,ee,_e,Pe,p,At),L.push(`/z_${V}`)}}this.cacheKey=L.sort().join("")}getMaxValue(a){const p=this.binders[a];return p instanceof jA||p instanceof PA?p.maxValue:0}populatePaintArrays(a,p,x,L,V){for(const G in this.binders){const ee=this.binders[G];(ee instanceof jA||ee instanceof PA||ee instanceof vl)&&ee.populatePaintArray(a,p,x,L,V)}}setConstantPatternPositions(a,p){for(const x in this.binders){const L=this.binders[x];L instanceof ZA&&L.setConstantPatternPositions(a,p)}}updatePaintArrays(a,p,x,L,V){let G=!1;for(const ee in a){const le=p.getPositions(ee);for(const _e of le){const Pe=x.feature(_e.index);for(const Ge in this.binders){const it=this.binders[Ge];if((it instanceof jA||it instanceof PA||it instanceof vl)&&it.expression.isStateDependent===!0){const At=L.paint.get(Ge);it.expression=At.value,it.updatePaintArray(_e.start,_e.end,Pe,a[ee],V),G=!0}}}}return G}defines(){const a=[];for(const p in this.binders){const x=this.binders[p];(x instanceof _l||x instanceof ZA)&&a.push(...x.uniformNames.map(L=>`#define HAS_UNIFORM_${L}`))}return a}getBinderAttributes(){const a=[];for(const p in this.binders){const x=this.binders[p];if(x instanceof jA||x instanceof PA)for(let L=0;L<x.paintVertexAttributes.length;L++)a.push(x.paintVertexAttributes[L].name);else if(x instanceof vl)for(let L=0;L<ml.members.length;L++)a.push(ml.members[L].name)}return a}getBinderUniforms(){const a=[];for(const p in this.binders){const x=this.binders[p];if(x instanceof _l||x instanceof ZA||x instanceof PA)for(const L of x.uniformNames)a.push(L)}return a}getPaintVertexBuffers(){return this._buffers}getUniforms(a,p){const x=[];for(const L in this.binders){const V=this.binders[L];if(V instanceof _l||V instanceof ZA||V instanceof PA){for(const G of V.uniformNames)if(p[G]){const ee=V.getBinding(a,p[G],G);x.push({name:G,property:L,binding:ee})}}}return x}setUniforms(a,p,x,L){for(const{name:V,property:G,binding:ee}of p)this.binders[G].setUniform(ee,L,x.get(G),V)}updatePaintBuffers(a){this._buffers=[];for(const p in this.binders){const x=this.binders[p];if(a&&x instanceof vl){const L=a.fromScale===2?x.zoomInPaintVertexBuffer:x.zoomOutPaintVertexBuffer;L&&this._buffers.push(L)}else(x instanceof jA||x instanceof PA)&&x.paintVertexBuffer&&this._buffers.push(x.paintVertexBuffer)}}upload(a){for(const p in this.binders){const x=this.binders[p];(x instanceof jA||x instanceof PA||x instanceof vl)&&x.upload(a)}this.updatePaintBuffers()}destroy(){for(const a in this.binders){const p=this.binders[a];(p instanceof jA||p instanceof PA||p instanceof vl)&&p.destroy()}}}class Nl{constructor(a,p,x=()=>!0){this.programConfigurations={};for(const L of a)this.programConfigurations[L.id]=new xu(L,p,x);this.needsUpload=!1,this._featureMap=new js,this._bufferOffset=0}populatePaintArrays(a,p,x,L,V,G){for(const ee in this.programConfigurations)this.programConfigurations[ee].populatePaintArrays(a,p,L,V,G);p.id!==void 0&&this._featureMap.add(p.id,x,this._bufferOffset,a),this._bufferOffset=a,this.needsUpload=!0}updatePaintArrays(a,p,x,L){for(const V of x)this.needsUpload=this.programConfigurations[V.id].updatePaintArrays(a,this._featureMap,p,V,L)||this.needsUpload}get(a){return this.programConfigurations[a]}upload(a){if(this.needsUpload){for(const p in this.programConfigurations)this.programConfigurations[p].upload(a);this.needsUpload=!1}}destroy(){for(const a in this.programConfigurations)this.programConfigurations[a].destroy()}}function w1(u,a){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[u]||[u.replace(`${a}-`,"").replace(/-/g,"_")]}function Sf(u,a,p){const x={color:{source:ot,composite:z},number:{source:l,composite:ot}},L=function(V){return{"line-pattern":{source:Dn,composite:Dn},"fill-pattern":{source:Dn,composite:Dn},"fill-extrusion-pattern":{source:Dn,composite:Dn}}[V]}(u);return L&&L[p]||x[a][p]}un("ConstantBinder",_l),un("CrossFadedConstantBinder",ZA),un("SourceExpressionBinder",jA),un("CrossFadedCompositeBinder",vl),un("CompositeExpressionBinder",PA),un("ProgramConfiguration",xu,{omit:["_buffers"]}),un("ProgramConfigurationSet",Nl);const ga=8192,E0=Math.pow(2,14)-1,_p=-E0-1;function fc(u){const a=ga/u.extent,p=u.loadGeometry();for(let x=0;x<p.length;x++){const L=p[x];for(let V=0;V<L.length;V++){const G=L[V],ee=Math.round(G.x*a),le=Math.round(G.y*a);G.x=xe(ee,_p,E0),G.y=xe(le,_p,E0),(ee<G.x||ee>G.x+1||le<G.y||le>G.y+1)&&Me("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return p}function qu(u,a){return{type:u.type,id:u.id,properties:u.properties,geometry:a?fc(u):[]}}function Wc(u,a,p,x,L){u.emplaceBack(2*a+(x+1)/2,2*p+(L+1)/2)}class I0{constructor(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(p=>p.id),this.index=a.index,this.hasPattern=!1,this.layoutVertexArray=new Ft,this.indexArray=new $n,this.segments=new qr,this.programConfigurations=new Nl(a.layers,a.zoom),this.stateDependentLayerIds=this.layers.filter(p=>p.isStateDependent()).map(p=>p.id)}populate(a,p,x){const L=this.layers[0],V=[];let G=null,ee=!1;L.type==="circle"&&(G=L.layout.get("circle-sort-key"),ee=!G.isConstant());for(const{feature:le,id:_e,index:Pe,sourceLayerIndex:Ge}of a){const it=this.layers[0]._featureFilter.needGeometry,At=qu(le,it);if(!this.layers[0]._featureFilter.filter(new Jr(this.zoom),At,x))continue;const ht=ee?G.evaluate(At,{},x):void 0,Ct={id:_e,properties:le.properties,type:le.type,sourceLayerIndex:Ge,index:Pe,geometry:it?At.geometry:fc(le),patterns:{},sortKey:ht};V.push(Ct)}ee&&V.sort((le,_e)=>le.sortKey-_e.sortKey);for(const le of V){const{geometry:_e,index:Pe,sourceLayerIndex:Ge}=le,it=a[Pe].feature;this.addFeature(le,_e,Pe,x),p.featureIndex.insert(it,_e,Pe,Ge,this.index)}}update(a,p,x){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,p,this.stateDependentLayers,x)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,$r),this.indexBuffer=a.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(a),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(a,p,x,L){for(const V of p)for(const G of V){const ee=G.x,le=G.y;if(ee<0||ee>=ga||le<0||le>=ga)continue;const _e=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,a.sortKey),Pe=_e.vertexLength;Wc(this.layoutVertexArray,ee,le,-1,-1),Wc(this.layoutVertexArray,ee,le,1,-1),Wc(this.layoutVertexArray,ee,le,1,1),Wc(this.layoutVertexArray,ee,le,-1,1),this.indexArray.emplaceBack(Pe,Pe+1,Pe+2),this.indexArray.emplaceBack(Pe,Pe+3,Pe+2),_e.vertexLength+=4,_e.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,x,{},L)}}function Cf(u,a){for(let p=0;p<u.length;p++)if(dc(a,u[p]))return!0;for(let p=0;p<a.length;p++)if(dc(u,a[p]))return!0;return!!Yc(u,a)}function vp(u,a,p){return!!dc(u,a)||!!Ef(a,u,p)}function T0(u,a){if(u.length===1)return bp(a,u[0]);for(let p=0;p<a.length;p++){const x=a[p];for(let L=0;L<x.length;L++)if(dc(u,x[L]))return!0}for(let p=0;p<u.length;p++)if(bp(a,u[p]))return!0;for(let p=0;p<a.length;p++)if(Yc(u,a[p]))return!0;return!1}function yp(u,a,p){if(u.length>1){if(Yc(u,a))return!0;for(let x=0;x<a.length;x++)if(Ef(a[x],u,p))return!0}for(let x=0;x<u.length;x++)if(Ef(u[x],a,p))return!0;return!1}function Yc(u,a){if(u.length===0||a.length===0)return!1;for(let p=0;p<u.length-1;p++){const x=u[p],L=u[p+1];for(let V=0;V<a.length-1;V++)if(S1(x,L,a[V],a[V+1]))return!0}return!1}function S1(u,a,p,x){return Ze(u,p,x)!==Ze(a,p,x)&&Ze(u,a,p)!==Ze(u,a,x)}function Ef(u,a,p){const x=p*p;if(a.length===1)return u.distSqr(a[0])<x;for(let L=1;L<a.length;L++)if(k0(u,a[L-1],a[L])<x)return!0;return!1}function k0(u,a,p){const x=a.distSqr(p);if(x===0)return u.distSqr(a);const L=((u.x-a.x)*(p.x-a.x)+(u.y-a.y)*(p.y-a.y))/x;return u.distSqr(L<0?a:L>1?p:p.sub(a)._mult(L)._add(a))}function bp(u,a){let p,x,L,V=!1;for(let G=0;G<u.length;G++){p=u[G];for(let ee=0,le=p.length-1;ee<p.length;le=ee++)x=p[ee],L=p[le],x.y>a.y!=L.y>a.y&&a.x<(L.x-x.x)*(a.y-x.y)/(L.y-x.y)+x.x&&(V=!V)}return V}function dc(u,a){let p=!1;for(let x=0,L=u.length-1;x<u.length;L=x++){const V=u[x],G=u[L];V.y>a.y!=G.y>a.y&&a.x<(G.x-V.x)*(a.y-V.y)/(G.y-V.y)+V.x&&(p=!p)}return p}function C1(u,a,p){const x=p[0],L=p[2];if(u.x<x.x&&a.x<x.x||u.x>L.x&&a.x>L.x||u.y<x.y&&a.y<x.y||u.y>L.y&&a.y>L.y)return!1;const V=Ze(u,a,p[0]);return V!==Ze(u,a,p[1])||V!==Ze(u,a,p[2])||V!==Ze(u,a,p[3])}function pc(u,a,p){const x=a.paint.get(u).value;return x.kind==="constant"?x.value:p.programConfigurations.get(a.id).getMaxValue(u)}function vh(u){return Math.sqrt(u[0]*u[0]+u[1]*u[1])}function Xc(u,a,p,x,L){if(!a[0]&&!a[1])return u;const V=oe.convert(a)._mult(L);p==="viewport"&&V._rotate(-x);const G=[];for(let ee=0;ee<u.length;ee++)G.push(u[ee].sub(V));return G}let xp,If;un("CircleBucket",I0,{omit:["layers"]});var Fr={get paint(){return If=If||new Wr({"circle-radius":new Ii(ti.paint_circle["circle-radius"]),"circle-color":new Ii(ti.paint_circle["circle-color"]),"circle-blur":new Ii(ti.paint_circle["circle-blur"]),"circle-opacity":new Ii(ti.paint_circle["circle-opacity"]),"circle-translate":new ci(ti.paint_circle["circle-translate"]),"circle-translate-anchor":new ci(ti.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new ci(ti.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new ci(ti.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Ii(ti.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Ii(ti.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Ii(ti.paint_circle["circle-stroke-opacity"])})},get layout(){return xp=xp||new Wr({"circle-sort-key":new Ii(ti.layout_circle["circle-sort-key"])})}},aA=1e-6,Kc=typeof Float32Array<"u"?Float32Array:Array;function gc(u){return u[0]=1,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=1,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=1,u[11]=0,u[12]=0,u[13]=0,u[14]=0,u[15]=1,u}function M0(u,a,p){var x=a[0],L=a[1],V=a[2],G=a[3],ee=a[4],le=a[5],_e=a[6],Pe=a[7],Ge=a[8],it=a[9],At=a[10],ht=a[11],Ct=a[12],Tt=a[13],Dt=a[14],Yt=a[15],Qt=p[0],Kt=p[1],fi=p[2],Li=p[3];return u[0]=Qt*x+Kt*ee+fi*Ge+Li*Ct,u[1]=Qt*L+Kt*le+fi*it+Li*Tt,u[2]=Qt*V+Kt*_e+fi*At+Li*Dt,u[3]=Qt*G+Kt*Pe+fi*ht+Li*Yt,u[4]=(Qt=p[4])*x+(Kt=p[5])*ee+(fi=p[6])*Ge+(Li=p[7])*Ct,u[5]=Qt*L+Kt*le+fi*it+Li*Tt,u[6]=Qt*V+Kt*_e+fi*At+Li*Dt,u[7]=Qt*G+Kt*Pe+fi*ht+Li*Yt,u[8]=(Qt=p[8])*x+(Kt=p[9])*ee+(fi=p[10])*Ge+(Li=p[11])*Ct,u[9]=Qt*L+Kt*le+fi*it+Li*Tt,u[10]=Qt*V+Kt*_e+fi*At+Li*Dt,u[11]=Qt*G+Kt*Pe+fi*ht+Li*Yt,u[12]=(Qt=p[12])*x+(Kt=p[13])*ee+(fi=p[14])*Ge+(Li=p[15])*Ct,u[13]=Qt*L+Kt*le+fi*it+Li*Tt,u[14]=Qt*V+Kt*_e+fi*At+Li*Dt,u[15]=Qt*G+Kt*Pe+fi*ht+Li*Yt,u}Math.hypot||(Math.hypot=function(){for(var u=0,a=arguments.length;a--;)u+=arguments[a]*arguments[a];return Math.sqrt(u)});var yh,E1=M0;function _A(u,a,p){var x=a[0],L=a[1],V=a[2],G=a[3];return u[0]=p[0]*x+p[4]*L+p[8]*V+p[12]*G,u[1]=p[1]*x+p[5]*L+p[9]*V+p[13]*G,u[2]=p[2]*x+p[6]*L+p[10]*V+p[14]*G,u[3]=p[3]*x+p[7]*L+p[11]*V+p[15]*G,u}yh=new Kc(4),Kc!=Float32Array&&(yh[0]=0,yh[1]=0,yh[2]=0,yh[3]=0);class I1 extends rs{constructor(a){super(a,Fr)}createBucket(a){return new I0(a)}queryRadius(a){const p=a;return pc("circle-radius",this,p)+pc("circle-stroke-width",this,p)+vh(this.paint.get("circle-translate"))}queryIntersectsFeature(a,p,x,L,V,G,ee,le){const _e=Xc(a,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),G.angle,ee),Pe=this.paint.get("circle-radius").evaluate(p,x)+this.paint.get("circle-stroke-width").evaluate(p,x),Ge=this.paint.get("circle-pitch-alignment")==="map",it=Ge?_e:function(ht,Ct){return ht.map(Tt=>bh(Tt,Ct))}(_e,le),At=Ge?Pe*ee:Pe;for(const ht of L)for(const Ct of ht){const Tt=Ge?Ct:bh(Ct,le);let Dt=At;const Yt=_A([],[Ct.x,Ct.y,0,1],le);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Dt*=Yt[3]/G.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Dt*=G.cameraToCenterDistance/Yt[3]),vp(it,Tt,Dt))return!0}return!1}}function bh(u,a){const p=_A([],[u.x,u.y,0,1],a);return new oe(p[0]/p[3],p[1]/p[3])}class Tf extends I0{}let P0;un("HeatmapBucket",Tf,{omit:["layers"]});var wp={get paint(){return P0=P0||new Wr({"heatmap-radius":new Ii(ti.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Ii(ti.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new ci(ti.paint_heatmap["heatmap-intensity"]),"heatmap-color":new gl(ti.paint_heatmap["heatmap-color"]),"heatmap-opacity":new ci(ti.paint_heatmap["heatmap-opacity"])})}};function vA(u,{width:a,height:p},x,L){if(L){if(L instanceof Uint8ClampedArray)L=new Uint8Array(L.buffer);else if(L.length!==a*p*x)throw new RangeError(`mismatched image size. expected: ${L.length} but got: ${a*p*x}`)}else L=new Uint8Array(a*p*x);return u.width=a,u.height=p,u.data=L,u}function wu(u,{width:a,height:p},x){if(a===u.width&&p===u.height)return;const L=vA({},{width:a,height:p},x);xh(u,L,{x:0,y:0},{x:0,y:0},{width:Math.min(u.width,a),height:Math.min(u.height,p)},x),u.width=a,u.height=p,u.data=L.data}function xh(u,a,p,x,L,V){if(L.width===0||L.height===0)return a;if(L.width>u.width||L.height>u.height||p.x>u.width-L.width||p.y>u.height-L.height)throw new RangeError("out of range source coordinates for image copy");if(L.width>a.width||L.height>a.height||x.x>a.width-L.width||x.y>a.height-L.height)throw new RangeError("out of range destination coordinates for image copy");const G=u.data,ee=a.data;if(G===ee)throw new Error("srcData equals dstData, so image is already copied");for(let le=0;le<L.height;le++){const _e=((p.y+le)*u.width+p.x)*V,Pe=((x.y+le)*a.width+x.x)*V;for(let Ge=0;Ge<L.width*V;Ge++)ee[Pe+Ge]=G[_e+Ge]}return a}class Jc{constructor(a,p){vA(this,a,1,p)}resize(a){wu(this,a,1)}clone(){return new Jc({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(a,p,x,L,V){xh(a,p,x,L,V,1)}}class oA{constructor(a,p){vA(this,a,4,p)}resize(a){wu(this,a,4)}replace(a,p){p?this.data.set(a):this.data=a instanceof Uint8ClampedArray?new Uint8Array(a.buffer):a}clone(){return new oA({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(a,p,x,L,V){xh(a,p,x,L,V,4)}}function D0(u){const a={},p=u.resolution||256,x=u.clips?u.clips.length:1,L=u.image||new oA({width:p,height:x});if(Math.log(p)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${p}`);const V=(G,ee,le)=>{a[u.evaluationKey]=le;const _e=u.expression.evaluate(a);L.data[G+ee+0]=Math.floor(255*_e.r/_e.a),L.data[G+ee+1]=Math.floor(255*_e.g/_e.a),L.data[G+ee+2]=Math.floor(255*_e.b/_e.a),L.data[G+ee+3]=Math.floor(255*_e.a)};if(u.clips)for(let G=0,ee=0;G<x;++G,ee+=4*p)for(let le=0,_e=0;le<p;le++,_e+=4){const Pe=le/(p-1),{start:Ge,end:it}=u.clips[G];V(ee,_e,Ge*(1-Pe)+it*Pe)}else for(let G=0,ee=0;G<p;G++,ee+=4)V(0,ee,G/(p-1));return L}un("AlphaImage",Jc),un("RGBAImage",oA);class L0 extends rs{createBucket(a){return new Tf(a)}constructor(a){super(a,wp),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(a){a==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=D0({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let B0;var R0={get paint(){return B0=B0||new Wr({"hillshade-illumination-direction":new ci(ti.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new ci(ti.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new ci(ti.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new ci(ti.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new ci(ti.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new ci(ti.paint_hillshade["hillshade-accent-color"])})}};class O0 extends rs{constructor(a){super(a,R0)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const Zu=E([{name:"a_pos",components:2,type:"Int16"}],4),{members:T1}=Zu;var su={exports:{}};function wh(u,a,p){p=p||2;var x,L,V,G,ee,le,_e,Pe=a&&a.length,Ge=Pe?a[0]*p:u.length,it=z0(u,0,Ge,p,!0),At=[];if(!it||it.next===it.prev)return At;if(Pe&&(it=function(Ct,Tt,Dt,Yt){var Qt,Kt,fi,Li=[];for(Qt=0,Kt=Tt.length;Qt<Kt;Qt++)(fi=z0(Ct,Tt[Qt]*Yt,Qt<Kt-1?Tt[Qt+1]*Yt:Ct.length,Yt,!1))===fi.next&&(fi.steiner=!0),Li.push(au(fi));for(Li.sort(P1),Qt=0;Qt<Li.length;Qt++)Dt=Ep(Li[Qt],Dt);return Dt}(u,a,it,p)),u.length>80*p){x=V=u[0],L=G=u[1];for(var ht=p;ht<Ge;ht+=p)(ee=u[ht])<x&&(x=ee),(le=u[ht+1])<L&&(L=le),ee>V&&(V=ee),le>G&&(G=le);_e=(_e=Math.max(V-x,G-L))!==0?32767/_e:0}return Sh(it,At,p,x,L,_e,0),At}function z0(u,a,p,x,L){var V,G;if(L===Pf(u,a,p,x)>0)for(V=a;V<p;V+=x)G=th(V,u[V],u[V+1],G);else for(V=p-x;V>=a;V-=x)G=th(V,u[V],u[V+1],G);return G&&Cu(G,G.next)&&(Eh(G),G=G.next),G}function Su(u,a){if(!u)return u;a||(a=u);var p,x=u;do if(p=!1,x.steiner||!Cu(x,x.next)&&Ws(x.prev,x,x.next)!==0)x=x.next;else{if(Eh(x),(x=a=x.prev)===x.next)break;p=!0}while(p||x!==a);return a}function Sh(u,a,p,x,L,V,G){if(u){!G&&V&&function(Pe,Ge,it,At){var ht=Pe;do ht.z===0&&(ht.z=AA(ht.x,ht.y,Ge,it,At)),ht.prevZ=ht.prev,ht.nextZ=ht.next,ht=ht.next;while(ht!==Pe);ht.prevZ.nextZ=null,ht.prevZ=null,function(Ct){var Tt,Dt,Yt,Qt,Kt,fi,Li,hn,Cn=1;do{for(Dt=Ct,Ct=null,Kt=null,fi=0;Dt;){for(fi++,Yt=Dt,Li=0,Tt=0;Tt<Cn&&(Li++,Yt=Yt.nextZ);Tt++);for(hn=Cn;Li>0||hn>0&&Yt;)Li!==0&&(hn===0||!Yt||Dt.z<=Yt.z)?(Qt=Dt,Dt=Dt.nextZ,Li--):(Qt=Yt,Yt=Yt.nextZ,hn--),Kt?Kt.nextZ=Qt:Ct=Qt,Qt.prevZ=Kt,Kt=Qt;Dt=Yt}Kt.nextZ=null,Cn*=2}while(fi>1)}(ht)}(u,x,L,V);for(var ee,le,_e=u;u.prev!==u.next;)if(ee=u.prev,le=u.next,V?M1(u,x,L,V):k1(u))a.push(ee.i/p|0),a.push(u.i/p|0),a.push(le.i/p|0),Eh(u),u=le.next,_e=le.next;else if((u=le)===_e){G?G===1?Sh(u=Sp(Su(u),a,p),a,p,x,L,V,2):G===2&&Cp(u,a,p,x,L,V):Sh(Su(u),a,p,x,L,V,1);break}}}function k1(u){var a=u.prev,p=u,x=u.next;if(Ws(a,p,x)>=0)return!1;for(var L=a.x,V=p.x,G=x.x,ee=a.y,le=p.y,_e=x.y,Pe=L<V?L<G?L:G:V<G?V:G,Ge=ee<le?ee<_e?ee:_e:le<_e?le:_e,it=L>V?L>G?L:G:V>G?V:G,At=ee>le?ee>_e?ee:_e:le>_e?le:_e,ht=x.next;ht!==a;){if(ht.x>=Pe&&ht.x<=it&&ht.y>=Ge&&ht.y<=At&&$c(L,ee,V,le,G,_e,ht.x,ht.y)&&Ws(ht.prev,ht,ht.next)>=0)return!1;ht=ht.next}return!0}function M1(u,a,p,x){var L=u.prev,V=u,G=u.next;if(Ws(L,V,G)>=0)return!1;for(var ee=L.x,le=V.x,_e=G.x,Pe=L.y,Ge=V.y,it=G.y,At=ee<le?ee<_e?ee:_e:le<_e?le:_e,ht=Pe<Ge?Pe<it?Pe:it:Ge<it?Ge:it,Ct=ee>le?ee>_e?ee:_e:le>_e?le:_e,Tt=Pe>Ge?Pe>it?Pe:it:Ge>it?Ge:it,Dt=AA(At,ht,a,p,x),Yt=AA(Ct,Tt,a,p,x),Qt=u.prevZ,Kt=u.nextZ;Qt&&Qt.z>=Dt&&Kt&&Kt.z<=Yt;){if(Qt.x>=At&&Qt.x<=Ct&&Qt.y>=ht&&Qt.y<=Tt&&Qt!==L&&Qt!==G&&$c(ee,Pe,le,Ge,_e,it,Qt.x,Qt.y)&&Ws(Qt.prev,Qt,Qt.next)>=0||(Qt=Qt.prevZ,Kt.x>=At&&Kt.x<=Ct&&Kt.y>=ht&&Kt.y<=Tt&&Kt!==L&&Kt!==G&&$c(ee,Pe,le,Ge,_e,it,Kt.x,Kt.y)&&Ws(Kt.prev,Kt,Kt.next)>=0))return!1;Kt=Kt.nextZ}for(;Qt&&Qt.z>=Dt;){if(Qt.x>=At&&Qt.x<=Ct&&Qt.y>=ht&&Qt.y<=Tt&&Qt!==L&&Qt!==G&&$c(ee,Pe,le,Ge,_e,it,Qt.x,Qt.y)&&Ws(Qt.prev,Qt,Qt.next)>=0)return!1;Qt=Qt.prevZ}for(;Kt&&Kt.z<=Yt;){if(Kt.x>=At&&Kt.x<=Ct&&Kt.y>=ht&&Kt.y<=Tt&&Kt!==L&&Kt!==G&&$c(ee,Pe,le,Ge,_e,it,Kt.x,Kt.y)&&Ws(Kt.prev,Kt,Kt.next)>=0)return!1;Kt=Kt.nextZ}return!0}function Sp(u,a,p){var x=u;do{var L=x.prev,V=x.next.next;!Cu(L,V)&&F0(L,x,x.next,V)&&eh(L,V)&&eh(V,L)&&(a.push(L.i/p|0),a.push(x.i/p|0),a.push(V.i/p|0),Eh(x),Eh(x.next),x=u=V),x=x.next}while(x!==u);return Su(x)}function Cp(u,a,p,x,L,V){var G=u;do{for(var ee=G.next.next;ee!==G.prev;){if(G.i!==ee.i&&D1(G,ee)){var le=mc(G,ee);return G=Su(G,G.next),le=Su(le,le.next),Sh(G,a,p,x,L,V,0),void Sh(le,a,p,x,L,V,0)}ee=ee.next}G=G.next}while(G!==u)}function P1(u,a){return u.x-a.x}function Ep(u,a){var p=function(L,V){var G,ee=V,le=L.x,_e=L.y,Pe=-1/0;do{if(_e<=ee.y&&_e>=ee.next.y&&ee.next.y!==ee.y){var Ge=ee.x+(_e-ee.y)*(ee.next.x-ee.x)/(ee.next.y-ee.y);if(Ge<=le&&Ge>Pe&&(Pe=Ge,G=ee.x<ee.next.x?ee:ee.next,Ge===le))return G}ee=ee.next}while(ee!==V);if(!G)return null;var it,At=G,ht=G.x,Ct=G.y,Tt=1/0;ee=G;do le>=ee.x&&ee.x>=ht&&le!==ee.x&&$c(_e<Ct?le:Pe,_e,ht,Ct,_e<Ct?Pe:le,_e,ee.x,ee.y)&&(it=Math.abs(_e-ee.y)/(le-ee.x),eh(ee,L)&&(it<Tt||it===Tt&&(ee.x>G.x||ee.x===G.x&&Ip(G,ee)))&&(G=ee,Tt=it)),ee=ee.next;while(ee!==At);return G}(u,a);if(!p)return a;var x=mc(p,u);return Su(x,x.next),Su(p,p.next)}function Ip(u,a){return Ws(u.prev,u,a.prev)<0&&Ws(a.next,u,u.next)<0}function AA(u,a,p,x,L){return(u=1431655765&((u=858993459&((u=252645135&((u=16711935&((u=(u-p)*L|0)|u<<8))|u<<4))|u<<2))|u<<1))|(a=1431655765&((a=858993459&((a=252645135&((a=16711935&((a=(a-x)*L|0)|a<<8))|a<<4))|a<<2))|a<<1))<<1}function au(u){var a=u,p=u;do(a.x<p.x||a.x===p.x&&a.y<p.y)&&(p=a),a=a.next;while(a!==u);return p}function $c(u,a,p,x,L,V,G,ee){return(L-G)*(a-ee)>=(u-G)*(V-ee)&&(u-G)*(x-ee)>=(p-G)*(a-ee)&&(p-G)*(V-ee)>=(L-G)*(x-ee)}function D1(u,a){return u.next.i!==a.i&&u.prev.i!==a.i&&!function(p,x){var L=p;do{if(L.i!==p.i&&L.next.i!==p.i&&L.i!==x.i&&L.next.i!==x.i&&F0(L,L.next,p,x))return!0;L=L.next}while(L!==p);return!1}(u,a)&&(eh(u,a)&&eh(a,u)&&function(p,x){var L=p,V=!1,G=(p.x+x.x)/2,ee=(p.y+x.y)/2;do L.y>ee!=L.next.y>ee&&L.next.y!==L.y&&G<(L.next.x-L.x)*(ee-L.y)/(L.next.y-L.y)+L.x&&(V=!V),L=L.next;while(L!==p);return V}(u,a)&&(Ws(u.prev,u,a.prev)||Ws(u,a.prev,a))||Cu(u,a)&&Ws(u.prev,u,u.next)>0&&Ws(a.prev,a,a.next)>0)}function Ws(u,a,p){return(a.y-u.y)*(p.x-a.x)-(a.x-u.x)*(p.y-a.y)}function Cu(u,a){return u.x===a.x&&u.y===a.y}function F0(u,a,p,x){var L=kf(Ws(u,a,p)),V=kf(Ws(u,a,x)),G=kf(Ws(p,x,u)),ee=kf(Ws(p,x,a));return L!==V&&G!==ee||!(L!==0||!Ch(u,p,a))||!(V!==0||!Ch(u,x,a))||!(G!==0||!Ch(p,u,x))||!(ee!==0||!Ch(p,a,x))}function Ch(u,a,p){return a.x<=Math.max(u.x,p.x)&&a.x>=Math.min(u.x,p.x)&&a.y<=Math.max(u.y,p.y)&&a.y>=Math.min(u.y,p.y)}function kf(u){return u>0?1:u<0?-1:0}function eh(u,a){return Ws(u.prev,u,u.next)<0?Ws(u,a,u.next)>=0&&Ws(u,u.prev,a)>=0:Ws(u,a,u.prev)<0||Ws(u,u.next,a)<0}function mc(u,a){var p=new Mf(u.i,u.x,u.y),x=new Mf(a.i,a.x,a.y),L=u.next,V=a.prev;return u.next=a,a.prev=u,p.next=L,L.prev=p,x.next=p,p.prev=x,V.next=x,x.prev=V,x}function th(u,a,p,x){var L=new Mf(u,a,p);return x?(L.next=x.next,L.prev=x,x.next.prev=L,x.next=L):(L.prev=L,L.next=L),L}function Eh(u){u.next.prev=u.prev,u.prev.next=u.next,u.prevZ&&(u.prevZ.nextZ=u.nextZ),u.nextZ&&(u.nextZ.prevZ=u.prevZ)}function Mf(u,a,p){this.i=u,this.x=a,this.y=p,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Pf(u,a,p,x){for(var L=0,V=a,G=p-x;V<p;V+=x)L+=(u[G]-u[V])*(u[V+1]+u[G+1]),G=V;return L}su.exports=wh,su.exports.default=wh,wh.deviation=function(u,a,p,x){var L=a&&a.length,V=Math.abs(Pf(u,0,L?a[0]*p:u.length,p));if(L)for(var G=0,ee=a.length;G<ee;G++)V-=Math.abs(Pf(u,a[G]*p,G<ee-1?a[G+1]*p:u.length,p));var le=0;for(G=0;G<x.length;G+=3){var _e=x[G]*p,Pe=x[G+1]*p,Ge=x[G+2]*p;le+=Math.abs((u[_e]-u[Ge])*(u[Pe+1]-u[_e+1])-(u[_e]-u[Pe])*(u[Ge+1]-u[_e+1]))}return V===0&&le===0?0:Math.abs((le-V)/V)},wh.flatten=function(u){for(var a=u[0][0].length,p={vertices:[],holes:[],dimensions:a},x=0,L=0;L<u.length;L++){for(var V=0;V<u[L].length;V++)for(var G=0;G<a;G++)p.vertices.push(u[L][V][G]);L>0&&p.holes.push(x+=u[L-1].length)}return p};var Ih=O(su.exports);function Tp(u,a,p,x,L){Th(u,a,p||0,x||u.length-1,L||Df)}function Th(u,a,p,x,L){for(;x>p;){if(x-p>600){var V=x-p+1,G=a-p+1,ee=Math.log(V),le=.5*Math.exp(2*ee/3),_e=.5*Math.sqrt(ee*le*(V-le)/V)*(G-V/2<0?-1:1);Th(u,a,Math.max(p,Math.floor(a-G*le/V+_e)),Math.min(x,Math.floor(a+(V-G)*le/V+_e)),L)}var Pe=u[a],Ge=p,it=x;for(_c(u,p,a),L(u[x],Pe)>0&&_c(u,p,x);Ge<it;){for(_c(u,Ge,it),Ge++,it--;L(u[Ge],Pe)<0;)Ge++;for(;L(u[it],Pe)>0;)it--}L(u[p],Pe)===0?_c(u,p,it):_c(u,++it,x),it<=a&&(p=it+1),a<=it&&(x=it-1)}}function _c(u,a,p){var x=u[a];u[a]=u[p],u[p]=x}function Df(u,a){return u<a?-1:u>a?1:0}function N0(u,a){const p=u.length;if(p<=1)return[u];const x=[];let L,V;for(let G=0;G<p;G++){const ee=Fe(u[G]);ee!==0&&(u[G].area=Math.abs(ee),V===void 0&&(V=ee<0),V===ee<0?(L&&x.push(L),L=[u[G]]):L.push(u[G]))}if(L&&x.push(L),a>1)for(let G=0;G<x.length;G++)x[G].length<=a||(Tp(x[G],a,1,x[G].length-1,kp),x[G]=x[G].slice(0,a));return x}function kp(u,a){return a.area-u.area}function ih(u,a,p){const x=p.patternDependencies;let L=!1;for(const V of a){const G=V.paint.get(`${u}-pattern`);G.isConstant()||(L=!0);const ee=G.constantOr(null);ee&&(L=!0,x[ee.to]=!0,x[ee.from]=!0)}return L}function Lf(u,a,p,x,L){const V=L.patternDependencies;for(const G of a){const ee=G.paint.get(`${u}-pattern`).value;if(ee.kind!=="constant"){let le=ee.evaluate({zoom:x-1},p,{},L.availableImages),_e=ee.evaluate({zoom:x},p,{},L.availableImages),Pe=ee.evaluate({zoom:x+1},p,{},L.availableImages);le=le&&le.name?le.name:le,_e=_e&&_e.name?_e.name:_e,Pe=Pe&&Pe.name?Pe.name:Pe,V[le]=!0,V[_e]=!0,V[Pe]=!0,p.patterns[G.id]={min:le,mid:_e,max:Pe}}}return p}class kh{constructor(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(p=>p.id),this.index=a.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Bi,this.indexArray=new $n,this.indexArray2=new Tn,this.programConfigurations=new Nl(a.layers,a.zoom),this.segments=new qr,this.segments2=new qr,this.stateDependentLayerIds=this.layers.filter(p=>p.isStateDependent()).map(p=>p.id)}populate(a,p,x){this.hasPattern=ih("fill",this.layers,p);const L=this.layers[0].layout.get("fill-sort-key"),V=!L.isConstant(),G=[];for(const{feature:ee,id:le,index:_e,sourceLayerIndex:Pe}of a){const Ge=this.layers[0]._featureFilter.needGeometry,it=qu(ee,Ge);if(!this.layers[0]._featureFilter.filter(new Jr(this.zoom),it,x))continue;const At=V?L.evaluate(it,{},x,p.availableImages):void 0,ht={id:le,properties:ee.properties,type:ee.type,sourceLayerIndex:Pe,index:_e,geometry:Ge?it.geometry:fc(ee),patterns:{},sortKey:At};G.push(ht)}V&&G.sort((ee,le)=>ee.sortKey-le.sortKey);for(const ee of G){const{geometry:le,index:_e,sourceLayerIndex:Pe}=ee;if(this.hasPattern){const Ge=Lf("fill",this.layers,ee,this.zoom,p);this.patternFeatures.push(Ge)}else this.addFeature(ee,le,_e,x,{});p.featureIndex.insert(a[_e].feature,le,_e,Pe,this.index)}}update(a,p,x){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,p,this.stateDependentLayers,x)}addFeatures(a,p,x){for(const L of this.patternFeatures)this.addFeature(L,L.geometry,L.index,p,x)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,T1),this.indexBuffer=a.createIndexBuffer(this.indexArray),this.indexBuffer2=a.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(a),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(a,p,x,L,V){for(const G of N0(p,500)){let ee=0;for(const At of G)ee+=At.length;const le=this.segments.prepareSegment(ee,this.layoutVertexArray,this.indexArray),_e=le.vertexLength,Pe=[],Ge=[];for(const At of G){if(At.length===0)continue;At!==G[0]&&Ge.push(Pe.length/2);const ht=this.segments2.prepareSegment(At.length,this.layoutVertexArray,this.indexArray2),Ct=ht.vertexLength;this.layoutVertexArray.emplaceBack(At[0].x,At[0].y),this.indexArray2.emplaceBack(Ct+At.length-1,Ct),Pe.push(At[0].x),Pe.push(At[0].y);for(let Tt=1;Tt<At.length;Tt++)this.layoutVertexArray.emplaceBack(At[Tt].x,At[Tt].y),this.indexArray2.emplaceBack(Ct+Tt-1,Ct+Tt),Pe.push(At[Tt].x),Pe.push(At[Tt].y);ht.vertexLength+=At.length,ht.primitiveLength+=At.length}const it=Ih(Pe,Ge);for(let At=0;At<it.length;At+=3)this.indexArray.emplaceBack(_e+it[At],_e+it[At+1],_e+it[At+2]);le.vertexLength+=ee,le.primitiveLength+=it.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,x,V,L)}}let Mp,V0;un("FillBucket",kh,{omit:["layers","patternFeatures"]});var Eu={get paint(){return V0=V0||new Wr({"fill-antialias":new ci(ti.paint_fill["fill-antialias"]),"fill-opacity":new Ii(ti.paint_fill["fill-opacity"]),"fill-color":new Ii(ti.paint_fill["fill-color"]),"fill-outline-color":new Ii(ti.paint_fill["fill-outline-color"]),"fill-translate":new ci(ti.paint_fill["fill-translate"]),"fill-translate-anchor":new ci(ti.paint_fill["fill-translate-anchor"]),"fill-pattern":new Ho(ti.paint_fill["fill-pattern"])})},get layout(){return Mp=Mp||new Wr({"fill-sort-key":new Ii(ti.layout_fill["fill-sort-key"])})}};class Pp extends rs{constructor(a){super(a,Eu)}recalculate(a,p){super.recalculate(a,p);const x=this.paint._values["fill-outline-color"];x.value.kind==="constant"&&x.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(a){return new kh(a)}queryRadius(){return vh(this.paint.get("fill-translate"))}queryIntersectsFeature(a,p,x,L,V,G,ee){return T0(Xc(a,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),G.angle,ee),L)}isTileClipped(){return!0}}const Dp=E([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),L1=E([{name:"a_centroid",components:2,type:"Int16"}],4),{members:Lp}=Dp;var ju={},B1=j,ou=Wu;function Wu(u,a,p,x,L){this.properties={},this.extent=p,this.type=0,this._pbf=u,this._geometry=-1,this._keys=x,this._values=L,u.readFields(U0,this,a)}function U0(u,a,p){u==1?a.id=p.readVarint():u==2?function(x,L){for(var V=x.readVarint()+x.pos;x.pos<V;){var G=L._keys[x.readVarint()],ee=L._values[x.readVarint()];L.properties[G]=ee}}(p,a):u==3?a.type=p.readVarint():u==4&&(a._geometry=p.pos)}function G0(u){for(var a,p,x=0,L=0,V=u.length,G=V-1;L<V;G=L++)x+=((p=u[G]).x-(a=u[L]).x)*(a.y+p.y);return x}Wu.types=["Unknown","Point","LineString","Polygon"],Wu.prototype.loadGeometry=function(){var u=this._pbf;u.pos=this._geometry;for(var a,p=u.readVarint()+u.pos,x=1,L=0,V=0,G=0,ee=[];u.pos<p;){if(L<=0){var le=u.readVarint();x=7&le,L=le>>3}if(L--,x===1||x===2)V+=u.readSVarint(),G+=u.readSVarint(),x===1&&(a&&ee.push(a),a=[]),a.push(new B1(V,G));else{if(x!==7)throw new Error("unknown command "+x);a&&a.push(a[0].clone())}}return a&&ee.push(a),ee},Wu.prototype.bbox=function(){var u=this._pbf;u.pos=this._geometry;for(var a=u.readVarint()+u.pos,p=1,x=0,L=0,V=0,G=1/0,ee=-1/0,le=1/0,_e=-1/0;u.pos<a;){if(x<=0){var Pe=u.readVarint();p=7&Pe,x=Pe>>3}if(x--,p===1||p===2)(L+=u.readSVarint())<G&&(G=L),L>ee&&(ee=L),(V+=u.readSVarint())<le&&(le=V),V>_e&&(_e=V);else if(p!==7)throw new Error("unknown command "+p)}return[G,le,ee,_e]},Wu.prototype.toGeoJSON=function(u,a,p){var x,L,V=this.extent*Math.pow(2,p),G=this.extent*u,ee=this.extent*a,le=this.loadGeometry(),_e=Wu.types[this.type];function Pe(At){for(var ht=0;ht<At.length;ht++){var Ct=At[ht];At[ht]=[360*(Ct.x+G)/V-180,360/Math.PI*Math.atan(Math.exp((180-360*(Ct.y+ee)/V)*Math.PI/180))-90]}}switch(this.type){case 1:var Ge=[];for(x=0;x<le.length;x++)Ge[x]=le[x][0];Pe(le=Ge);break;case 2:for(x=0;x<le.length;x++)Pe(le[x]);break;case 3:for(le=function(At){var ht=At.length;if(ht<=1)return[At];for(var Ct,Tt,Dt=[],Yt=0;Yt<ht;Yt++){var Qt=G0(At[Yt]);Qt!==0&&(Tt===void 0&&(Tt=Qt<0),Tt===Qt<0?(Ct&&Dt.push(Ct),Ct=[At[Yt]]):Ct.push(At[Yt]))}return Ct&&Dt.push(Ct),Dt}(le),x=0;x<le.length;x++)for(L=0;L<le[x].length;L++)Pe(le[x][L])}le.length===1?le=le[0]:_e="Multi"+_e;var it={type:"Feature",geometry:{type:_e,coordinates:le},properties:this.properties};return"id"in this&&(it.id=this.id),it};var Bf=ou,vc=Yn;function Yn(u,a){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=u,this._keys=[],this._values=[],this._features=[],u.readFields(Rf,this,a),this.length=this._features.length}function Rf(u,a,p){u===15?a.version=p.readVarint():u===1?a.name=p.readString():u===5?a.extent=p.readVarint():u===2?a._features.push(p.pos):u===3?a._keys.push(p.readString()):u===4&&a._values.push(function(x){for(var L=null,V=x.readVarint()+x.pos;x.pos<V;){var G=x.readVarint()>>3;L=G===1?x.readString():G===2?x.readFloat():G===3?x.readDouble():G===4?x.readVarint64():G===5?x.readVarint():G===6?x.readSVarint():G===7?x.readBoolean():null}return L}(p))}Yn.prototype.feature=function(u){if(u<0||u>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[u];var a=this._pbf.readVarint()+this._pbf.pos;return new Bf(this._pbf,a,this.extent,this._keys,this._values)};var H0=vc;function yc(u,a,p){if(u===3){var x=new H0(p,p.readVarint()+p.pos);x.length&&(a[x.name]=x)}}ju.VectorTile=function(u,a){this.layers=u.readFields(yc,{},a)},ju.VectorTileFeature=ou,ju.VectorTileLayer=vc;const R1=ju.VectorTileFeature.types,Mh=Math.pow(2,13);function nh(u,a,p,x,L,V,G,ee){u.emplaceBack(a,p,2*Math.floor(x*Mh)+G,L*Mh*2,V*Mh*2,Math.round(ee))}class Mo{constructor(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(p=>p.id),this.index=a.index,this.hasPattern=!1,this.layoutVertexArray=new hi,this.centroidVertexArray=new zt,this.indexArray=new $n,this.programConfigurations=new Nl(a.layers,a.zoom),this.segments=new qr,this.stateDependentLayerIds=this.layers.filter(p=>p.isStateDependent()).map(p=>p.id)}populate(a,p,x){this.features=[],this.hasPattern=ih("fill-extrusion",this.layers,p);for(const{feature:L,id:V,index:G,sourceLayerIndex:ee}of a){const le=this.layers[0]._featureFilter.needGeometry,_e=qu(L,le);if(!this.layers[0]._featureFilter.filter(new Jr(this.zoom),_e,x))continue;const Pe={id:V,sourceLayerIndex:ee,index:G,geometry:le?_e.geometry:fc(L),properties:L.properties,type:L.type,patterns:{}};this.hasPattern?this.features.push(Lf("fill-extrusion",this.layers,Pe,this.zoom,p)):this.addFeature(Pe,Pe.geometry,G,x,{}),p.featureIndex.insert(L,Pe.geometry,G,ee,this.index,!0)}}addFeatures(a,p,x){for(const L of this.features){const{geometry:V}=L;this.addFeature(L,V,L.index,p,x)}}update(a,p,x){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,p,this.stateDependentLayers,x)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,Lp),this.centroidVertexBuffer=a.createVertexBuffer(this.centroidVertexArray,L1.members,!0),this.indexBuffer=a.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(a),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(a,p,x,L,V){const G={x:0,y:0,vertexCount:0};for(const ee of N0(p,500)){let le=0;for(const ht of ee)le+=ht.length;let _e=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const ht of ee){if(ht.length===0||z1(ht))continue;let Ct=0;for(let Tt=0;Tt<ht.length;Tt++){const Dt=ht[Tt];if(Tt>=1){const Yt=ht[Tt-1];if(!O1(Dt,Yt)){_e.vertexLength+4>qr.MAX_VERTEX_ARRAY_LENGTH&&(_e=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const Qt=Dt.sub(Yt)._perp()._unit(),Kt=Yt.dist(Dt);Ct+Kt>32768&&(Ct=0),nh(this.layoutVertexArray,Dt.x,Dt.y,Qt.x,Qt.y,0,0,Ct),nh(this.layoutVertexArray,Dt.x,Dt.y,Qt.x,Qt.y,0,1,Ct),G.x+=2*Dt.x,G.y+=2*Dt.y,G.vertexCount+=2,Ct+=Kt,nh(this.layoutVertexArray,Yt.x,Yt.y,Qt.x,Qt.y,0,0,Ct),nh(this.layoutVertexArray,Yt.x,Yt.y,Qt.x,Qt.y,0,1,Ct),G.x+=2*Yt.x,G.y+=2*Yt.y,G.vertexCount+=2;const fi=_e.vertexLength;this.indexArray.emplaceBack(fi,fi+2,fi+1),this.indexArray.emplaceBack(fi+1,fi+2,fi+3),_e.vertexLength+=4,_e.primitiveLength+=2}}}}if(_e.vertexLength+le>qr.MAX_VERTEX_ARRAY_LENGTH&&(_e=this.segments.prepareSegment(le,this.layoutVertexArray,this.indexArray)),R1[a.type]!=="Polygon")continue;const Pe=[],Ge=[],it=_e.vertexLength;for(const ht of ee)if(ht.length!==0){ht!==ee[0]&&Ge.push(Pe.length/2);for(let Ct=0;Ct<ht.length;Ct++){const Tt=ht[Ct];nh(this.layoutVertexArray,Tt.x,Tt.y,0,0,1,1,0),G.x+=Tt.x,G.y+=Tt.y,G.vertexCount+=1,Pe.push(Tt.x),Pe.push(Tt.y)}}const At=Ih(Pe,Ge);for(let ht=0;ht<At.length;ht+=3)this.indexArray.emplaceBack(it+At[ht],it+At[ht+2],it+At[ht+1]);_e.primitiveLength+=At.length/3,_e.vertexLength+=le}for(let ee=0;ee<G.vertexCount;ee++)this.centroidVertexArray.emplaceBack(Math.floor(G.x/G.vertexCount),Math.floor(G.y/G.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,x,V,L)}}function O1(u,a){return u.x===a.x&&(u.x<0||u.x>ga)||u.y===a.y&&(u.y<0||u.y>ga)}function z1(u){return u.every(a=>a.x<0)||u.every(a=>a.x>ga)||u.every(a=>a.y<0)||u.every(a=>a.y>ga)}let Q0;un("FillExtrusionBucket",Mo,{omit:["layers","features"]});var F1={get paint(){return Q0=Q0||new Wr({"fill-extrusion-opacity":new ci(ti["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Ii(ti["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new ci(ti["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new ci(ti["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Ho(ti["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Ii(ti["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Ii(ti["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new ci(ti["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class Bp extends rs{constructor(a){super(a,F1)}createBucket(a){return new Mo(a)}queryRadius(){return vh(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(a,p,x,L,V,G,ee,le){const _e=Xc(a,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),G.angle,ee),Pe=this.paint.get("fill-extrusion-height").evaluate(p,x),Ge=this.paint.get("fill-extrusion-base").evaluate(p,x),it=function(ht,Ct,Tt,Dt){const Yt=[];for(const Qt of ht){const Kt=[Qt.x,Qt.y,0,1];_A(Kt,Kt,Ct),Yt.push(new oe(Kt[0]/Kt[3],Kt[1]/Kt[3]))}return Yt}(_e,le),At=function(ht,Ct,Tt,Dt){const Yt=[],Qt=[],Kt=Dt[8]*Ct,fi=Dt[9]*Ct,Li=Dt[10]*Ct,hn=Dt[11]*Ct,Cn=Dt[8]*Tt,An=Dt[9]*Tt,Ki=Dt[10]*Tt,Zi=Dt[11]*Tt;for(const _n of ht){const Ji=[],Gi=[];for(const yn of _n){const xn=yn.x,pr=yn.y,Rs=Dt[0]*xn+Dt[4]*pr+Dt[12],Us=Dt[1]*xn+Dt[5]*pr+Dt[13],Oa=Dt[2]*xn+Dt[6]*pr+Dt[14],DA=Dt[3]*xn+Dt[7]*pr+Dt[15],qo=Oa+Li,Cs=DA+hn,Vn=Rs+Cn,Ao=Us+An,Gs=Oa+Ki,Zo=DA+Zi,za=new oe((Rs+Kt)/Cs,(Us+fi)/Cs);za.z=qo/Cs,Ji.push(za);const Jn=new oe(Vn/Zo,Ao/Zo);Jn.z=Gs/Zo,Gi.push(Jn)}Yt.push(Ji),Qt.push(Gi)}return[Yt,Qt]}(L,Ge,Pe,le);return function(ht,Ct,Tt){let Dt=1/0;T0(Tt,Ct)&&(Dt=Rp(Tt,Ct[0]));for(let Yt=0;Yt<Ct.length;Yt++){const Qt=Ct[Yt],Kt=ht[Yt];for(let fi=0;fi<Qt.length-1;fi++){const Li=Qt[fi],hn=[Li,Qt[fi+1],Kt[fi+1],Kt[fi],Li];Cf(Tt,hn)&&(Dt=Math.min(Dt,Rp(Tt,hn)))}}return Dt!==1/0&&Dt}(At[0],At[1],it)}}function Ph(u,a){return u.x*a.x+u.y*a.y}function Rp(u,a){if(u.length===1){let p=0;const x=a[p++];let L;for(;!L||x.equals(L);)if(L=a[p++],!L)return 1/0;for(;p<a.length;p++){const V=a[p],G=u[0],ee=L.sub(x),le=V.sub(x),_e=G.sub(x),Pe=Ph(ee,ee),Ge=Ph(ee,le),it=Ph(le,le),At=Ph(_e,ee),ht=Ph(_e,le),Ct=Pe*it-Ge*Ge,Tt=(it*At-Ge*ht)/Ct,Dt=(Pe*ht-Ge*At)/Ct,Yt=x.z*(1-Tt-Dt)+L.z*Tt+V.z*Dt;if(isFinite(Yt))return Yt}return 1/0}{let p=1/0;for(const x of a)p=Math.min(p,x.z);return p}}const N1=E([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:Iu}=N1,yA=E([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:q0}=yA,V1=ju.VectorTileFeature.types,Z0=Math.cos(Math.PI/180*37.5),Op=Math.pow(2,14)/.5;class j0{constructor(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(p=>p.id),this.index=a.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(p=>{this.gradients[p.id]={}}),this.layoutVertexArray=new xi,this.layoutVertexArray2=new bi,this.indexArray=new $n,this.programConfigurations=new Nl(a.layers,a.zoom),this.segments=new qr,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(p=>p.isStateDependent()).map(p=>p.id)}populate(a,p,x){this.hasPattern=ih("line",this.layers,p);const L=this.layers[0].layout.get("line-sort-key"),V=!L.isConstant(),G=[];for(const{feature:ee,id:le,index:_e,sourceLayerIndex:Pe}of a){const Ge=this.layers[0]._featureFilter.needGeometry,it=qu(ee,Ge);if(!this.layers[0]._featureFilter.filter(new Jr(this.zoom),it,x))continue;const At=V?L.evaluate(it,{},x):void 0,ht={id:le,properties:ee.properties,type:ee.type,sourceLayerIndex:Pe,index:_e,geometry:Ge?it.geometry:fc(ee),patterns:{},sortKey:At};G.push(ht)}V&&G.sort((ee,le)=>ee.sortKey-le.sortKey);for(const ee of G){const{geometry:le,index:_e,sourceLayerIndex:Pe}=ee;if(this.hasPattern){const Ge=Lf("line",this.layers,ee,this.zoom,p);this.patternFeatures.push(Ge)}else this.addFeature(ee,le,_e,x,{});p.featureIndex.insert(a[_e].feature,le,_e,Pe,this.index)}}update(a,p,x){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,p,this.stateDependentLayers,x)}addFeatures(a,p,x){for(const L of this.patternFeatures)this.addFeature(L,L.geometry,L.index,p,x)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=a.createVertexBuffer(this.layoutVertexArray2,q0)),this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,Iu),this.indexBuffer=a.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(a),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(a){if(a.properties&&Object.prototype.hasOwnProperty.call(a.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(a.properties,"mapbox_clip_end"))return{start:+a.properties.mapbox_clip_start,end:+a.properties.mapbox_clip_end}}addFeature(a,p,x,L,V){const G=this.layers[0].layout,ee=G.get("line-join").evaluate(a,{}),le=G.get("line-cap"),_e=G.get("line-miter-limit"),Pe=G.get("line-round-limit");this.lineClips=this.lineFeatureClips(a);for(const Ge of p)this.addLine(Ge,a,ee,le,_e,Pe);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,x,V,L)}addLine(a,p,x,L,V,G){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Dt=0;Dt<a.length-1;Dt++)this.totalDistance+=a[Dt].dist(a[Dt+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const ee=V1[p.type]==="Polygon";let le=a.length;for(;le>=2&&a[le-1].equals(a[le-2]);)le--;let _e=0;for(;_e<le-1&&a[_e].equals(a[_e+1]);)_e++;if(le<(ee?3:2))return;x==="bevel"&&(V=1.05);const Pe=this.overscaling<=16?15*ga/(512*this.overscaling):0,Ge=this.segments.prepareSegment(10*le,this.layoutVertexArray,this.indexArray);let it,At,ht,Ct,Tt;this.e1=this.e2=-1,ee&&(it=a[le-2],Tt=a[_e].sub(it)._unit()._perp());for(let Dt=_e;Dt<le;Dt++){if(ht=Dt===le-1?ee?a[_e+1]:void 0:a[Dt+1],ht&&a[Dt].equals(ht))continue;Tt&&(Ct=Tt),it&&(At=it),it=a[Dt],Tt=ht?ht.sub(it)._unit()._perp():Ct,Ct=Ct||Tt;let Yt=Ct.add(Tt);Yt.x===0&&Yt.y===0||Yt._unit();const Qt=Ct.x*Tt.x+Ct.y*Tt.y,Kt=Yt.x*Tt.x+Yt.y*Tt.y,fi=Kt!==0?1/Kt:1/0,Li=2*Math.sqrt(2-2*Kt),hn=Kt<Z0&&At&&ht,Cn=Ct.x*Tt.y-Ct.y*Tt.x>0;if(hn&&Dt>_e){const Zi=it.dist(At);if(Zi>2*Pe){const _n=it.sub(it.sub(At)._mult(Pe/Zi)._round());this.updateDistance(At,_n),this.addCurrentVertex(_n,Ct,0,0,Ge),At=_n}}const An=At&&ht;let Ki=An?x:ee?"butt":L;if(An&&Ki==="round"&&(fi<G?Ki="miter":fi<=2&&(Ki="fakeround")),Ki==="miter"&&fi>V&&(Ki="bevel"),Ki==="bevel"&&(fi>2&&(Ki="flipbevel"),fi<V&&(Ki="miter")),At&&this.updateDistance(At,it),Ki==="miter")Yt._mult(fi),this.addCurrentVertex(it,Yt,0,0,Ge);else if(Ki==="flipbevel"){if(fi>100)Yt=Tt.mult(-1);else{const Zi=fi*Ct.add(Tt).mag()/Ct.sub(Tt).mag();Yt._perp()._mult(Zi*(Cn?-1:1))}this.addCurrentVertex(it,Yt,0,0,Ge),this.addCurrentVertex(it,Yt.mult(-1),0,0,Ge)}else if(Ki==="bevel"||Ki==="fakeround"){const Zi=-Math.sqrt(fi*fi-1),_n=Cn?Zi:0,Ji=Cn?0:Zi;if(At&&this.addCurrentVertex(it,Ct,_n,Ji,Ge),Ki==="fakeround"){const Gi=Math.round(180*Li/Math.PI/20);for(let yn=1;yn<Gi;yn++){let xn=yn/Gi;if(xn!==.5){const Rs=xn-.5;xn+=xn*Rs*(xn-1)*((1.0904+Qt*(Qt*(3.55645-1.43519*Qt)-3.2452))*Rs*Rs+(.848013+Qt*(.215638*Qt-1.06021)))}const pr=Tt.sub(Ct)._mult(xn)._add(Ct)._unit()._mult(Cn?-1:1);this.addHalfVertex(it,pr.x,pr.y,!1,Cn,0,Ge)}}ht&&this.addCurrentVertex(it,Tt,-_n,-Ji,Ge)}else if(Ki==="butt")this.addCurrentVertex(it,Yt,0,0,Ge);else if(Ki==="square"){const Zi=At?1:-1;this.addCurrentVertex(it,Yt,Zi,Zi,Ge)}else Ki==="round"&&(At&&(this.addCurrentVertex(it,Ct,0,0,Ge),this.addCurrentVertex(it,Ct,1,1,Ge,!0)),ht&&(this.addCurrentVertex(it,Tt,-1,-1,Ge,!0),this.addCurrentVertex(it,Tt,0,0,Ge)));if(hn&&Dt<le-1){const Zi=it.dist(ht);if(Zi>2*Pe){const _n=it.add(ht.sub(it)._mult(Pe/Zi)._round());this.updateDistance(it,_n),this.addCurrentVertex(_n,Tt,0,0,Ge),it=_n}}}}addCurrentVertex(a,p,x,L,V,G=!1){const ee=p.y*L-p.x,le=-p.y-p.x*L;this.addHalfVertex(a,p.x+p.y*x,p.y-p.x*x,G,!1,x,V),this.addHalfVertex(a,ee,le,G,!0,-L,V),this.distance>Op/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(a,p,x,L,V,G))}addHalfVertex({x:a,y:p},x,L,V,G,ee,le){const _e=.5*(this.lineClips?this.scaledDistance*(Op-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((a<<1)+(V?1:0),(p<<1)+(G?1:0),Math.round(63*x)+128,Math.round(63*L)+128,1+(ee===0?0:ee<0?-1:1)|(63&_e)<<2,_e>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const Pe=le.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,Pe),le.primitiveLength++),G?this.e2=Pe:this.e1=Pe}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(a,p){this.distance+=a.dist(p),this.updateScaledDistance()}}let rh,W0;un("LineBucket",j0,{omit:["layers","patternFeatures"]});var Y0={get paint(){return W0=W0||new Wr({"line-opacity":new Ii(ti.paint_line["line-opacity"]),"line-color":new Ii(ti.paint_line["line-color"]),"line-translate":new ci(ti.paint_line["line-translate"]),"line-translate-anchor":new ci(ti.paint_line["line-translate-anchor"]),"line-width":new Ii(ti.paint_line["line-width"]),"line-gap-width":new Ii(ti.paint_line["line-gap-width"]),"line-offset":new Ii(ti.paint_line["line-offset"]),"line-blur":new Ii(ti.paint_line["line-blur"]),"line-dasharray":new pl(ti.paint_line["line-dasharray"]),"line-pattern":new Ho(ti.paint_line["line-pattern"]),"line-gradient":new gl(ti.paint_line["line-gradient"])})},get layout(){return rh=rh||new Wr({"line-cap":new ci(ti.layout_line["line-cap"]),"line-join":new Ii(ti.layout_line["line-join"]),"line-miter-limit":new ci(ti.layout_line["line-miter-limit"]),"line-round-limit":new ci(ti.layout_line["line-round-limit"]),"line-sort-key":new Ii(ti.layout_line["line-sort-key"])})}};class U1 extends Ii{possiblyEvaluate(a,p){return p=new Jr(Math.floor(p.zoom),{now:p.now,fadeDuration:p.fadeDuration,zoomHistory:p.zoomHistory,transition:p.transition}),super.possiblyEvaluate(a,p)}evaluate(a,p,x,L){return p=Ve({},p,{zoom:Math.floor(p.zoom)}),super.evaluate(a,p,x,L)}}let Of;class G1 extends rs{constructor(a){super(a,Y0),this.gradientVersion=0,Of||(Of=new U1(Y0.paint.properties["line-width"].specification),Of.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(a){if(a==="line-gradient"){const p=this.gradientExpression();this.stepInterpolant=!!function(x){return x._styleExpression!==void 0}(p)&&p._styleExpression.expression instanceof Ln,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(a,p){super.recalculate(a,p),this.paint._values["line-floorwidth"]=Of.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,a)}createBucket(a){return new j0(a)}queryRadius(a){const p=a,x=zp(pc("line-width",this,p),pc("line-gap-width",this,p)),L=pc("line-offset",this,p);return x/2+Math.abs(L)+vh(this.paint.get("line-translate"))}queryIntersectsFeature(a,p,x,L,V,G,ee){const le=Xc(a,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),G.angle,ee),_e=ee/2*zp(this.paint.get("line-width").evaluate(p,x),this.paint.get("line-gap-width").evaluate(p,x)),Pe=this.paint.get("line-offset").evaluate(p,x);return Pe&&(L=function(Ge,it){const At=[];for(let ht=0;ht<Ge.length;ht++){const Ct=Ge[ht],Tt=[];for(let Dt=0;Dt<Ct.length;Dt++){const Yt=Ct[Dt-1],Qt=Ct[Dt],Kt=Ct[Dt+1],fi=Dt===0?new oe(0,0):Qt.sub(Yt)._unit()._perp(),Li=Dt===Ct.length-1?new oe(0,0):Kt.sub(Qt)._unit()._perp(),hn=fi._add(Li)._unit(),Cn=hn.x*Li.x+hn.y*Li.y;Cn!==0&&hn._mult(1/Cn),Tt.push(hn._mult(it)._add(Qt))}At.push(Tt)}return At}(L,Pe*ee)),function(Ge,it,At){for(let ht=0;ht<it.length;ht++){const Ct=it[ht];if(Ge.length>=3){for(let Tt=0;Tt<Ct.length;Tt++)if(dc(Ge,Ct[Tt]))return!0}if(yp(Ge,Ct,At))return!0}return!1}(le,L,_e)}isTileClipped(){return!0}}function zp(u,a){return a>0?a+2*u:u}const Fp=E([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Np=E([{name:"a_projected_pos",components:3,type:"Float32"}],4);E([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const H1=E([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);E([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const zf=E([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Vp=E([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Dh(u,a,p){return u.sections.forEach(x=>{x.text=function(L,V,G){const ee=V.layout.get("text-transform").evaluate(G,{});return ee==="uppercase"?L=L.toLocaleUpperCase():ee==="lowercase"&&(L=L.toLocaleLowerCase()),ns.applyArabicShaping&&(L=ns.applyArabicShaping(L)),L}(x.text,a,p)}),u}E([{name:"triangle",components:3,type:"Uint16"}]),E([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),E([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),E([{type:"Float32",name:"offsetX"}]),E([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),E([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const bc={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var Ia=24,X0=Br,Lh=function(u,a,p,x,L){var V,G,ee=8*L-x-1,le=(1<<ee)-1,_e=le>>1,Pe=-7,Ge=p?L-1:0,it=p?-1:1,At=u[a+Ge];for(Ge+=it,V=At&(1<<-Pe)-1,At>>=-Pe,Pe+=ee;Pe>0;V=256*V+u[a+Ge],Ge+=it,Pe-=8);for(G=V&(1<<-Pe)-1,V>>=-Pe,Pe+=x;Pe>0;G=256*G+u[a+Ge],Ge+=it,Pe-=8);if(V===0)V=1-_e;else{if(V===le)return G?NaN:1/0*(At?-1:1);G+=Math.pow(2,x),V-=_e}return(At?-1:1)*G*Math.pow(2,V-x)},K0=function(u,a,p,x,L,V){var G,ee,le,_e=8*V-L-1,Pe=(1<<_e)-1,Ge=Pe>>1,it=L===23?Math.pow(2,-24)-Math.pow(2,-77):0,At=x?0:V-1,ht=x?1:-1,Ct=a<0||a===0&&1/a<0?1:0;for(a=Math.abs(a),isNaN(a)||a===1/0?(ee=isNaN(a)?1:0,G=Pe):(G=Math.floor(Math.log(a)/Math.LN2),a*(le=Math.pow(2,-G))<1&&(G--,le*=2),(a+=G+Ge>=1?it/le:it*Math.pow(2,1-Ge))*le>=2&&(G++,le/=2),G+Ge>=Pe?(ee=0,G=Pe):G+Ge>=1?(ee=(a*le-1)*Math.pow(2,L),G+=Ge):(ee=a*Math.pow(2,Ge-1)*Math.pow(2,L),G=0));L>=8;u[p+At]=255&ee,At+=ht,ee/=256,L-=8);for(G=G<<L|ee,_e+=L;_e>0;u[p+At]=255&G,At+=ht,G/=256,_e-=8);u[p+At-ht]|=128*Ct};function Br(u){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(u)?u:new Uint8Array(u||0),this.pos=0,this.type=0,this.length=this.buf.length}Br.Varint=0,Br.Fixed64=1,Br.Bytes=2,Br.Fixed32=5;var Tu=4294967296,Up=1/Tu,J0=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function ku(u){return u.type===Br.Bytes?u.readVarint()+u.pos:u.pos+1}function sh(u,a,p){return p?4294967296*a+(u>>>0):4294967296*(a>>>0)+(u>>>0)}function Gp(u,a,p){var x=a<=16383?1:a<=2097151?2:a<=268435455?3:Math.floor(Math.log(a)/(7*Math.LN2));p.realloc(x);for(var L=p.pos-1;L>=u;L--)p.buf[L+x]=p.buf[L]}function Q1(u,a){for(var p=0;p<u.length;p++)a.writeVarint(u[p])}function q1(u,a){for(var p=0;p<u.length;p++)a.writeSVarint(u[p])}function Z1(u,a){for(var p=0;p<u.length;p++)a.writeFloat(u[p])}function j1(u,a){for(var p=0;p<u.length;p++)a.writeDouble(u[p])}function W1(u,a){for(var p=0;p<u.length;p++)a.writeBoolean(u[p])}function Y1(u,a){for(var p=0;p<u.length;p++)a.writeFixed32(u[p])}function X1(u,a){for(var p=0;p<u.length;p++)a.writeSFixed32(u[p])}function K1(u,a){for(var p=0;p<u.length;p++)a.writeFixed64(u[p])}function Hp(u,a){for(var p=0;p<u.length;p++)a.writeSFixed64(u[p])}function Bh(u,a){return(u[a]|u[a+1]<<8|u[a+2]<<16)+16777216*u[a+3]}function xc(u,a,p){u[p]=a,u[p+1]=a>>>8,u[p+2]=a>>>16,u[p+3]=a>>>24}function Qp(u,a){return(u[a]|u[a+1]<<8|u[a+2]<<16)+(u[a+3]<<24)}Br.prototype={destroy:function(){this.buf=null},readFields:function(u,a,p){for(p=p||this.length;this.pos<p;){var x=this.readVarint(),L=x>>3,V=this.pos;this.type=7&x,u(L,a,this),this.pos===V&&this.skip(x)}return a},readMessage:function(u,a){return this.readFields(u,a,this.readVarint()+this.pos)},readFixed32:function(){var u=Bh(this.buf,this.pos);return this.pos+=4,u},readSFixed32:function(){var u=Qp(this.buf,this.pos);return this.pos+=4,u},readFixed64:function(){var u=Bh(this.buf,this.pos)+Bh(this.buf,this.pos+4)*Tu;return this.pos+=8,u},readSFixed64:function(){var u=Bh(this.buf,this.pos)+Qp(this.buf,this.pos+4)*Tu;return this.pos+=8,u},readFloat:function(){var u=Lh(this.buf,this.pos,!0,23,4);return this.pos+=4,u},readDouble:function(){var u=Lh(this.buf,this.pos,!0,52,8);return this.pos+=8,u},readVarint:function(u){var a,p,x=this.buf;return a=127&(p=x[this.pos++]),p<128?a:(a|=(127&(p=x[this.pos++]))<<7,p<128?a:(a|=(127&(p=x[this.pos++]))<<14,p<128?a:(a|=(127&(p=x[this.pos++]))<<21,p<128?a:function(L,V,G){var ee,le,_e=G.buf;if(ee=(112&(le=_e[G.pos++]))>>4,le<128||(ee|=(127&(le=_e[G.pos++]))<<3,le<128)||(ee|=(127&(le=_e[G.pos++]))<<10,le<128)||(ee|=(127&(le=_e[G.pos++]))<<17,le<128)||(ee|=(127&(le=_e[G.pos++]))<<24,le<128)||(ee|=(1&(le=_e[G.pos++]))<<31,le<128))return sh(L,ee,V);throw new Error("Expected varint not more than 10 bytes")}(a|=(15&(p=x[this.pos]))<<28,u,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var u=this.readVarint();return u%2==1?(u+1)/-2:u/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var u=this.readVarint()+this.pos,a=this.pos;return this.pos=u,u-a>=12&&J0?function(p,x,L){return J0.decode(p.subarray(x,L))}(this.buf,a,u):function(p,x,L){for(var V="",G=x;G<L;){var ee,le,_e,Pe=p[G],Ge=null,it=Pe>239?4:Pe>223?3:Pe>191?2:1;if(G+it>L)break;it===1?Pe<128&&(Ge=Pe):it===2?(192&(ee=p[G+1]))==128&&(Ge=(31&Pe)<<6|63&ee)<=127&&(Ge=null):it===3?(le=p[G+2],(192&(ee=p[G+1]))==128&&(192&le)==128&&((Ge=(15&Pe)<<12|(63&ee)<<6|63&le)<=2047||Ge>=55296&&Ge<=57343)&&(Ge=null)):it===4&&(le=p[G+2],_e=p[G+3],(192&(ee=p[G+1]))==128&&(192&le)==128&&(192&_e)==128&&((Ge=(15&Pe)<<18|(63&ee)<<12|(63&le)<<6|63&_e)<=65535||Ge>=1114112)&&(Ge=null)),Ge===null?(Ge=65533,it=1):Ge>65535&&(Ge-=65536,V+=String.fromCharCode(Ge>>>10&1023|55296),Ge=56320|1023&Ge),V+=String.fromCharCode(Ge),G+=it}return V}(this.buf,a,u)},readBytes:function(){var u=this.readVarint()+this.pos,a=this.buf.subarray(this.pos,u);return this.pos=u,a},readPackedVarint:function(u,a){if(this.type!==Br.Bytes)return u.push(this.readVarint(a));var p=ku(this);for(u=u||[];this.pos<p;)u.push(this.readVarint(a));return u},readPackedSVarint:function(u){if(this.type!==Br.Bytes)return u.push(this.readSVarint());var a=ku(this);for(u=u||[];this.pos<a;)u.push(this.readSVarint());return u},readPackedBoolean:function(u){if(this.type!==Br.Bytes)return u.push(this.readBoolean());var a=ku(this);for(u=u||[];this.pos<a;)u.push(this.readBoolean());return u},readPackedFloat:function(u){if(this.type!==Br.Bytes)return u.push(this.readFloat());var a=ku(this);for(u=u||[];this.pos<a;)u.push(this.readFloat());return u},readPackedDouble:function(u){if(this.type!==Br.Bytes)return u.push(this.readDouble());var a=ku(this);for(u=u||[];this.pos<a;)u.push(this.readDouble());return u},readPackedFixed32:function(u){if(this.type!==Br.Bytes)return u.push(this.readFixed32());var a=ku(this);for(u=u||[];this.pos<a;)u.push(this.readFixed32());return u},readPackedSFixed32:function(u){if(this.type!==Br.Bytes)return u.push(this.readSFixed32());var a=ku(this);for(u=u||[];this.pos<a;)u.push(this.readSFixed32());return u},readPackedFixed64:function(u){if(this.type!==Br.Bytes)return u.push(this.readFixed64());var a=ku(this);for(u=u||[];this.pos<a;)u.push(this.readFixed64());return u},readPackedSFixed64:function(u){if(this.type!==Br.Bytes)return u.push(this.readSFixed64());var a=ku(this);for(u=u||[];this.pos<a;)u.push(this.readSFixed64());return u},skip:function(u){var a=7&u;if(a===Br.Varint)for(;this.buf[this.pos++]>127;);else if(a===Br.Bytes)this.pos=this.readVarint()+this.pos;else if(a===Br.Fixed32)this.pos+=4;else{if(a!==Br.Fixed64)throw new Error("Unimplemented type: "+a);this.pos+=8}},writeTag:function(u,a){this.writeVarint(u<<3|a)},realloc:function(u){for(var a=this.length||16;a<this.pos+u;)a*=2;if(a!==this.length){var p=new Uint8Array(a);p.set(this.buf),this.buf=p,this.length=a}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(u){this.realloc(4),xc(this.buf,u,this.pos),this.pos+=4},writeSFixed32:function(u){this.realloc(4),xc(this.buf,u,this.pos),this.pos+=4},writeFixed64:function(u){this.realloc(8),xc(this.buf,-1&u,this.pos),xc(this.buf,Math.floor(u*Up),this.pos+4),this.pos+=8},writeSFixed64:function(u){this.realloc(8),xc(this.buf,-1&u,this.pos),xc(this.buf,Math.floor(u*Up),this.pos+4),this.pos+=8},writeVarint:function(u){(u=+u||0)>268435455||u<0?function(a,p){var x,L;if(a>=0?(x=a%4294967296|0,L=a/4294967296|0):(L=~(-a/4294967296),4294967295^(x=~(-a%4294967296))?x=x+1|0:(x=0,L=L+1|0)),a>=18446744073709552e3||a<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");p.realloc(10),function(V,G,ee){ee.buf[ee.pos++]=127&V|128,V>>>=7,ee.buf[ee.pos++]=127&V|128,V>>>=7,ee.buf[ee.pos++]=127&V|128,V>>>=7,ee.buf[ee.pos++]=127&V|128,ee.buf[ee.pos]=127&(V>>>=7)}(x,0,p),function(V,G){var ee=(7&V)<<4;G.buf[G.pos++]|=ee|((V>>>=3)?128:0),V&&(G.buf[G.pos++]=127&V|((V>>>=7)?128:0),V&&(G.buf[G.pos++]=127&V|((V>>>=7)?128:0),V&&(G.buf[G.pos++]=127&V|((V>>>=7)?128:0),V&&(G.buf[G.pos++]=127&V|((V>>>=7)?128:0),V&&(G.buf[G.pos++]=127&V)))))}(L,p)}(u,this):(this.realloc(4),this.buf[this.pos++]=127&u|(u>127?128:0),u<=127||(this.buf[this.pos++]=127&(u>>>=7)|(u>127?128:0),u<=127||(this.buf[this.pos++]=127&(u>>>=7)|(u>127?128:0),u<=127||(this.buf[this.pos++]=u>>>7&127))))},writeSVarint:function(u){this.writeVarint(u<0?2*-u-1:2*u)},writeBoolean:function(u){this.writeVarint(!!u)},writeString:function(u){u=String(u),this.realloc(4*u.length),this.pos++;var a=this.pos;this.pos=function(x,L,V){for(var G,ee,le=0;le<L.length;le++){if((G=L.charCodeAt(le))>55295&&G<57344){if(!ee){G>56319||le+1===L.length?(x[V++]=239,x[V++]=191,x[V++]=189):ee=G;continue}if(G<56320){x[V++]=239,x[V++]=191,x[V++]=189,ee=G;continue}G=ee-55296<<10|G-56320|65536,ee=null}else ee&&(x[V++]=239,x[V++]=191,x[V++]=189,ee=null);G<128?x[V++]=G:(G<2048?x[V++]=G>>6|192:(G<65536?x[V++]=G>>12|224:(x[V++]=G>>18|240,x[V++]=G>>12&63|128),x[V++]=G>>6&63|128),x[V++]=63&G|128)}return V}(this.buf,u,this.pos);var p=this.pos-a;p>=128&&Gp(a,p,this),this.pos=a-1,this.writeVarint(p),this.pos+=p},writeFloat:function(u){this.realloc(4),K0(this.buf,u,this.pos,!0,23,4),this.pos+=4},writeDouble:function(u){this.realloc(8),K0(this.buf,u,this.pos,!0,52,8),this.pos+=8},writeBytes:function(u){var a=u.length;this.writeVarint(a),this.realloc(a);for(var p=0;p<a;p++)this.buf[this.pos++]=u[p]},writeRawMessage:function(u,a){this.pos++;var p=this.pos;u(a,this);var x=this.pos-p;x>=128&&Gp(p,x,this),this.pos=p-1,this.writeVarint(x),this.pos+=x},writeMessage:function(u,a,p){this.writeTag(u,Br.Bytes),this.writeRawMessage(a,p)},writePackedVarint:function(u,a){a.length&&this.writeMessage(u,Q1,a)},writePackedSVarint:function(u,a){a.length&&this.writeMessage(u,q1,a)},writePackedBoolean:function(u,a){a.length&&this.writeMessage(u,W1,a)},writePackedFloat:function(u,a){a.length&&this.writeMessage(u,Z1,a)},writePackedDouble:function(u,a){a.length&&this.writeMessage(u,j1,a)},writePackedFixed32:function(u,a){a.length&&this.writeMessage(u,Y1,a)},writePackedSFixed32:function(u,a){a.length&&this.writeMessage(u,X1,a)},writePackedFixed64:function(u,a){a.length&&this.writeMessage(u,K1,a)},writePackedSFixed64:function(u,a){a.length&&this.writeMessage(u,Hp,a)},writeBytesField:function(u,a){this.writeTag(u,Br.Bytes),this.writeBytes(a)},writeFixed32Field:function(u,a){this.writeTag(u,Br.Fixed32),this.writeFixed32(a)},writeSFixed32Field:function(u,a){this.writeTag(u,Br.Fixed32),this.writeSFixed32(a)},writeFixed64Field:function(u,a){this.writeTag(u,Br.Fixed64),this.writeFixed64(a)},writeSFixed64Field:function(u,a){this.writeTag(u,Br.Fixed64),this.writeSFixed64(a)},writeVarintField:function(u,a){this.writeTag(u,Br.Varint),this.writeVarint(a)},writeSVarintField:function(u,a){this.writeTag(u,Br.Varint),this.writeSVarint(a)},writeStringField:function(u,a){this.writeTag(u,Br.Bytes),this.writeString(a)},writeFloatField:function(u,a){this.writeTag(u,Br.Fixed32),this.writeFloat(a)},writeDoubleField:function(u,a){this.writeTag(u,Br.Fixed64),this.writeDouble(a)},writeBooleanField:function(u,a){this.writeVarintField(u,!!a)}};var $0=O(X0);const ed=3;function qp(u,a,p){u===1&&p.readMessage(J1,a)}function J1(u,a,p){if(u===3){const{id:x,bitmap:L,width:V,height:G,left:ee,top:le,advance:_e}=p.readMessage($1,{});a.push({id:x,bitmap:new Jc({width:V+2*ed,height:G+2*ed},L),metrics:{width:V,height:G,left:ee,top:le,advance:_e}})}}function $1(u,a,p){u===1?a.id=p.readVarint():u===2?a.bitmap=p.readBytes():u===3?a.width=p.readVarint():u===4?a.height=p.readVarint():u===5?a.left=p.readSVarint():u===6?a.top=p.readSVarint():u===7&&(a.advance=p.readVarint())}const Zp=ed;function jp(u){let a=0,p=0;for(const G of u)a+=G.w*G.h,p=Math.max(p,G.w);u.sort((G,ee)=>ee.h-G.h);const x=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(a/.95)),p),h:1/0}];let L=0,V=0;for(const G of u)for(let ee=x.length-1;ee>=0;ee--){const le=x[ee];if(!(G.w>le.w||G.h>le.h)){if(G.x=le.x,G.y=le.y,V=Math.max(V,G.y+G.h),L=Math.max(L,G.x+G.w),G.w===le.w&&G.h===le.h){const _e=x.pop();ee<x.length&&(x[ee]=_e)}else G.h===le.h?(le.x+=G.w,le.w-=G.w):G.w===le.w?(le.y+=G.h,le.h-=G.h):(x.push({x:le.x+G.w,y:le.y,w:le.w-G.w,h:G.h}),le.y+=G.h,le.h-=G.h);break}}return{w:L,h:V,fill:a/(L*V)||0}}const bA=1;class td{constructor(a,{pixelRatio:p,version:x,stretchX:L,stretchY:V,content:G}){this.paddedRect=a,this.pixelRatio=p,this.stretchX=L,this.stretchY=V,this.content=G,this.version=x}get tl(){return[this.paddedRect.x+bA,this.paddedRect.y+bA]}get br(){return[this.paddedRect.x+this.paddedRect.w-bA,this.paddedRect.y+this.paddedRect.h-bA]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*bA)/this.pixelRatio,(this.paddedRect.h-2*bA)/this.pixelRatio]}}class WA{constructor(a,p){const x={},L={};this.haveRenderCallbacks=[];const V=[];this.addImages(a,x,V),this.addImages(p,L,V);const{w:G,h:ee}=jp(V),le=new oA({width:G||1,height:ee||1});for(const _e in a){const Pe=a[_e],Ge=x[_e].paddedRect;oA.copy(Pe.data,le,{x:0,y:0},{x:Ge.x+bA,y:Ge.y+bA},Pe.data)}for(const _e in p){const Pe=p[_e],Ge=L[_e].paddedRect,it=Ge.x+bA,At=Ge.y+bA,ht=Pe.data.width,Ct=Pe.data.height;oA.copy(Pe.data,le,{x:0,y:0},{x:it,y:At},Pe.data),oA.copy(Pe.data,le,{x:0,y:Ct-1},{x:it,y:At-1},{width:ht,height:1}),oA.copy(Pe.data,le,{x:0,y:0},{x:it,y:At+Ct},{width:ht,height:1}),oA.copy(Pe.data,le,{x:ht-1,y:0},{x:it-1,y:At},{width:1,height:Ct}),oA.copy(Pe.data,le,{x:0,y:0},{x:it+ht,y:At},{width:1,height:Ct})}this.image=le,this.iconPositions=x,this.patternPositions=L}addImages(a,p,x){for(const L in a){const V=a[L],G={x:0,y:0,w:V.data.width+2*bA,h:V.data.height+2*bA};x.push(G),p[L]=new td(G,V),V.hasRenderCallback&&this.haveRenderCallbacks.push(L)}}patchUpdatedImages(a,p){a.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const x in a.updatedImages)this.patchUpdatedImage(this.iconPositions[x],a.getImage(x),p),this.patchUpdatedImage(this.patternPositions[x],a.getImage(x),p)}patchUpdatedImage(a,p,x){if(!a||!p||a.version===p.version)return;a.version=p.version;const[L,V]=a.tl;x.update(p.data,void 0,{x:L,y:V})}}var Yu;un("ImagePosition",td),un("ImageAtlas",WA),o.ai=void 0,(Yu=o.ai||(o.ai={}))[Yu.none=0]="none",Yu[Yu.horizontal=1]="horizontal",Yu[Yu.vertical=2]="vertical",Yu[Yu.horizontalOnly=3]="horizontalOnly";const Rh=-17;class Oh{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(a,p){const x=new Oh;return x.scale=a||1,x.fontStack=p,x}static forImage(a){const p=new Oh;return p.imageName=a,p}}class wc{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(a,p){const x=new wc;for(let L=0;L<a.sections.length;L++){const V=a.sections[L];V.image?x.addImageSection(V):x.addTextSection(V,p)}return x}length(){return this.text.length}getSection(a){return this.sections[this.sectionIndex[a]]}getSectionIndex(a){return this.sectionIndex[a]}getCharCode(a){return this.text.charCodeAt(a)}verticalizePunctuation(){this.text=function(a){let p="";for(let x=0;x<a.length;x++){const L=a.charCodeAt(x+1)||null,V=a.charCodeAt(x-1)||null;p+=L&&tu(L)&&!bc[a[x+1]]||V&&tu(V)&&!bc[a[x-1]]||!bc[a[x]]?a[x]:bc[a[x]]}return p}(this.text)}trim(){let a=0;for(let x=0;x<this.text.length&&Nf[this.text.charCodeAt(x)];x++)a++;let p=this.text.length;for(let x=this.text.length-1;x>=0&&x>=a&&Nf[this.text.charCodeAt(x)];x--)p--;this.text=this.text.substring(a,p),this.sectionIndex=this.sectionIndex.slice(a,p)}substring(a,p){const x=new wc;return x.text=this.text.substring(a,p),x.sectionIndex=this.sectionIndex.slice(a,p),x.sections=this.sections,x}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((a,p)=>Math.max(a,this.sections[p].scale),0)}addTextSection(a,p){this.text+=a.text,this.sections.push(Oh.forText(a.scale,a.fontStack||p));const x=this.sections.length-1;for(let L=0;L<a.text.length;++L)this.sectionIndex.push(x)}addImageSection(a){const p=a.image?a.image.name:"";if(p.length===0)return void Me("Can't add FormattedSection with an empty image.");const x=this.getNextImageSectionCharCode();x?(this.text+=String.fromCharCode(x),this.sections.push(Oh.forImage(p)),this.sectionIndex.push(this.sections.length-1)):Me("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Ff(u,a,p,x,L,V,G,ee,le,_e,Pe,Ge,it,At,ht,Ct){const Tt=wc.fromFeature(u,L);let Dt;Ge===o.ai.vertical&&Tt.verticalizePunctuation();const{processBidirectionalText:Yt,processStyledBidirectionalText:Qt}=ns;if(Yt&&Tt.sections.length===1){Dt=[];const Li=Yt(Tt.toString(),id(Tt,_e,V,a,x,At,ht));for(const hn of Li){const Cn=new wc;Cn.text=hn,Cn.sections=Tt.sections;for(let An=0;An<hn.length;An++)Cn.sectionIndex.push(0);Dt.push(Cn)}}else if(Qt){Dt=[];const Li=Qt(Tt.text,Tt.sectionIndex,id(Tt,_e,V,a,x,At,ht));for(const hn of Li){const Cn=new wc;Cn.text=hn[0],Cn.sectionIndex=hn[1],Cn.sections=Tt.sections,Dt.push(Cn)}}else Dt=function(Li,hn){const Cn=[],An=Li.text;let Ki=0;for(const Zi of hn)Cn.push(Li.substring(Ki,Zi)),Ki=Zi;return Ki<An.length&&Cn.push(Li.substring(Ki,An.length)),Cn}(Tt,id(Tt,_e,V,a,x,At,ht));const Kt=[],fi={positionedLines:Kt,text:Tt.toString(),top:Pe[1],bottom:Pe[1],left:Pe[0],right:Pe[0],writingMode:Ge,iconsInText:!1,verticalizable:!1};return function(Li,hn,Cn,An,Ki,Zi,_n,Ji,Gi,yn,xn,pr){let Rs=0,Us=Rh,Oa=0,DA=0;const qo=Ji==="right"?1:Ji==="left"?0:.5;let Cs=0;for(const za of Ki){za.trim();const Jn=za.getMaxScale(),jo=(Jn-1)*Ia,Wo={positionedGlyphs:[],lineOffset:0};Li.positionedLines[Cs]=Wo;const qa=Wo.positionedGlyphs;let xA=0;if(!za.length()){Us+=Zi,++Cs;continue}for(let Fa=0;Fa<za.length();Fa++){const Ir=za.getSection(Fa),Yo=za.getSectionIndex(Fa),Do=za.getCharCode(Fa);let Na=0,yl=null,Vl=null,Ul=null,Mu=Ia;const bl=!(Gi===o.ai.horizontal||!xn&&!UA(Do)||xn&&(Nf[Do]||(Vn=Do,rn.Arabic(Vn)||rn["Arabic Supplement"](Vn)||rn["Arabic Extended-A"](Vn)||rn["Arabic Presentation Forms-A"](Vn)||rn["Arabic Presentation Forms-B"](Vn))));if(Ir.imageName){const KA=An[Ir.imageName];if(!KA)continue;Ul=Ir.imageName,Li.iconsInText=Li.iconsInText||!0,Vl=KA.paddedRect;const Xo=KA.displaySize;Ir.scale=Ir.scale*Ia/pr,yl={width:Xo[0],height:Xo[1],left:bA,top:-Zp,advance:bl?Xo[1]:Xo[0]},Na=jo+(Ia-Xo[1]*Ir.scale),Mu=yl.advance;const Pu=bl?Xo[0]*Ir.scale-Ia*Jn:Xo[1]*Ir.scale-Ia*Jn;Pu>0&&Pu>xA&&(xA=Pu)}else{const KA=Cn[Ir.fontStack],Xo=KA&&KA[Do];if(Xo&&Xo.rect)Vl=Xo.rect,yl=Xo.metrics;else{const Pu=hn[Ir.fontStack],Ec=Pu&&Pu[Do];if(!Ec)continue;yl=Ec.metrics}Na=(Jn-Ir.scale)*Ia}bl?(Li.verticalizable=!0,qa.push({glyph:Do,imageName:Ul,x:Rs,y:Us+Na,vertical:bl,scale:Ir.scale,fontStack:Ir.fontStack,sectionIndex:Yo,metrics:yl,rect:Vl}),Rs+=Mu*Ir.scale+yn):(qa.push({glyph:Do,imageName:Ul,x:Rs,y:Us+Na,vertical:bl,scale:Ir.scale,fontStack:Ir.fontStack,sectionIndex:Yo,metrics:yl,rect:Vl}),Rs+=yl.advance*Ir.scale+yn)}qa.length!==0&&(Oa=Math.max(Rs-yn,Oa),i_(qa,0,qa.length-1,qo,xA)),Rs=0;const wA=Zi*Jn+xA;Wo.lineOffset=Math.max(xA,jo),Us+=wA,DA=Math.max(wA,DA),++Cs}var Vn;const Ao=Us-Rh,{horizontalAlign:Gs,verticalAlign:Zo}=nd(_n);(function(za,Jn,jo,Wo,qa,xA,wA,Fa,Ir){const Yo=(Jn-jo)*qa;let Do=0;Do=xA!==wA?-Fa*Wo-Rh:(-Wo*Ir+.5)*wA;for(const Na of za)for(const yl of Na.positionedGlyphs)yl.x+=Yo,yl.y+=Do})(Li.positionedLines,qo,Gs,Zo,Oa,DA,Zi,Ao,Ki.length),Li.top+=-Zo*Ao,Li.bottom=Li.top+Ao,Li.left+=-Gs*Oa,Li.right=Li.left+Oa}(fi,a,p,x,Dt,G,ee,le,Ge,_e,it,Ct),!function(Li){for(const hn of Li)if(hn.positionedGlyphs.length!==0)return!1;return!0}(Kt)&&fi}const Nf={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},e_={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function Wp(u,a,p,x,L,V){if(a.imageName){const G=x[a.imageName];return G?G.displaySize[0]*a.scale*Ia/V+L:0}{const G=p[a.fontStack],ee=G&&G[u];return ee?ee.metrics.advance*a.scale+L:0}}function Vf(u,a,p,x){const L=Math.pow(u-a,2);return x?u<a?L/2:2*L:L+Math.abs(p)*p}function t_(u,a,p){let x=0;return u===10&&(x-=1e4),p&&(x+=150),u!==40&&u!==65288||(x+=50),a!==41&&a!==65289||(x+=50),x}function Yp(u,a,p,x,L,V){let G=null,ee=Vf(a,p,L,V);for(const le of x){const _e=Vf(a-le.x,p,L,V)+le.badness;_e<=ee&&(G=le,ee=_e)}return{index:u,x:a,priorBreak:G,badness:ee}}function Xp(u){return u?Xp(u.priorBreak).concat(u.index):[]}function id(u,a,p,x,L,V,G){if(V!=="point")return[];if(!u)return[];const ee=[],le=function(it,At,ht,Ct,Tt,Dt){let Yt=0;for(let Qt=0;Qt<it.length();Qt++){const Kt=it.getSection(Qt);Yt+=Wp(it.getCharCode(Qt),Kt,Ct,Tt,At,Dt)}return Yt/Math.max(1,Math.ceil(Yt/ht))}(u,a,p,x,L,G),_e=u.text.indexOf("​")>=0;let Pe=0;for(let it=0;it<u.length();it++){const At=u.getSection(it),ht=u.getCharCode(it);if(Nf[ht]||(Pe+=Wp(ht,At,x,L,a,G)),it<u.length()-1){const Ct=!((Ge=ht)<11904||!(rn["Bopomofo Extended"](Ge)||rn.Bopomofo(Ge)||rn["CJK Compatibility Forms"](Ge)||rn["CJK Compatibility Ideographs"](Ge)||rn["CJK Compatibility"](Ge)||rn["CJK Radicals Supplement"](Ge)||rn["CJK Strokes"](Ge)||rn["CJK Symbols and Punctuation"](Ge)||rn["CJK Unified Ideographs Extension A"](Ge)||rn["CJK Unified Ideographs"](Ge)||rn["Enclosed CJK Letters and Months"](Ge)||rn["Halfwidth and Fullwidth Forms"](Ge)||rn.Hiragana(Ge)||rn["Ideographic Description Characters"](Ge)||rn["Kangxi Radicals"](Ge)||rn["Katakana Phonetic Extensions"](Ge)||rn.Katakana(Ge)||rn["Vertical Forms"](Ge)||rn["Yi Radicals"](Ge)||rn["Yi Syllables"](Ge)));(e_[ht]||Ct||At.imageName)&&ee.push(Yp(it+1,Pe,le,ee,t_(ht,u.getCharCode(it+1),Ct&&_e),!1))}}var Ge;return Xp(Yp(u.length(),Pe,le,ee,0,!0))}function nd(u){let a=.5,p=.5;switch(u){case"right":case"top-right":case"bottom-right":a=1;break;case"left":case"top-left":case"bottom-left":a=0}switch(u){case"bottom":case"bottom-right":case"bottom-left":p=1;break;case"top":case"top-right":case"top-left":p=0}return{horizontalAlign:a,verticalAlign:p}}function i_(u,a,p,x,L){if(!x&&!L)return;const V=u[p],G=(u[p].x+V.metrics.advance*V.scale)*x;for(let ee=a;ee<=p;ee++)u[ee].x-=G,u[ee].y+=L}function n_(u,a,p){const{horizontalAlign:x,verticalAlign:L}=nd(p),V=a[0]-u.displaySize[0]*x,G=a[1]-u.displaySize[1]*L;return{image:u,top:G,bottom:G+u.displaySize[1],left:V,right:V+u.displaySize[0]}}function Kp(u,a,p,x,L,V){const G=u.image;let ee;if(G.content){const Tt=G.content,Dt=G.pixelRatio||1;ee=[Tt[0]/Dt,Tt[1]/Dt,G.displaySize[0]-Tt[2]/Dt,G.displaySize[1]-Tt[3]/Dt]}const le=a.left*V,_e=a.right*V;let Pe,Ge,it,At;p==="width"||p==="both"?(At=L[0]+le-x[3],Ge=L[0]+_e+x[1]):(At=L[0]+(le+_e-G.displaySize[0])/2,Ge=At+G.displaySize[0]);const ht=a.top*V,Ct=a.bottom*V;return p==="height"||p==="both"?(Pe=L[1]+ht-x[0],it=L[1]+Ct+x[2]):(Pe=L[1]+(ht+Ct-G.displaySize[1])/2,it=Pe+G.displaySize[1]),{image:G,top:Pe,right:Ge,bottom:it,left:At,collisionPadding:ee}}const zh=255,Au=128,Xu=zh*Au;function Jp(u,a){const{expression:p}=a;if(p.kind==="constant")return{kind:"constant",layoutSize:p.evaluate(new Jr(u+1))};if(p.kind==="source")return{kind:"source"};{const{zoomStops:x,interpolationType:L}=p;let V=0;for(;V<x.length&&x[V]<=u;)V++;V=Math.max(0,V-1);let G=V;for(;G<x.length&&x[G]<u+1;)G++;G=Math.min(x.length-1,G);const ee=x[V],le=x[G];return p.kind==="composite"?{kind:"composite",minZoom:ee,maxZoom:le,interpolationType:L}:{kind:"camera",minZoom:ee,maxZoom:le,minSize:p.evaluate(new Jr(ee)),maxSize:p.evaluate(new Jr(le)),interpolationType:L}}}function rd(u,a,p){let x="never";const L=u.get(a);return L?x=L:u.get(p)&&(x="always"),x}const r_=ju.VectorTileFeature.types,s_=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Uf(u,a,p,x,L,V,G,ee,le,_e,Pe,Ge,it){const At=ee?Math.min(Xu,Math.round(ee[0])):0,ht=ee?Math.min(Xu,Math.round(ee[1])):0;u.emplaceBack(a,p,Math.round(32*x),Math.round(32*L),V,G,(At<<1)+(le?1:0),ht,16*_e,16*Pe,256*Ge,256*it)}function sd(u,a,p){u.emplaceBack(a.x,a.y,p),u.emplaceBack(a.x,a.y,p),u.emplaceBack(a.x,a.y,p),u.emplaceBack(a.x,a.y,p)}function a_(u){for(const a of u.sections)if(ks(a.text))return!0;return!1}class ad{constructor(a){this.layoutVertexArray=new dn,this.indexArray=new $n,this.programConfigurations=a,this.segments=new qr,this.dynamicLayoutVertexArray=new tn,this.opacityVertexArray=new on,this.hasVisibleVertices=!1,this.placedSymbolArray=new ve}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(a,p,x,L){this.isEmpty()||(x&&(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,Fp.members),this.indexBuffer=a.createIndexBuffer(this.indexArray,p),this.dynamicLayoutVertexBuffer=a.createVertexBuffer(this.dynamicLayoutVertexArray,Np.members,!0),this.opacityVertexBuffer=a.createVertexBuffer(this.opacityVertexArray,s_,!0),this.opacityVertexBuffer.itemSize=1),(x||L)&&this.programConfigurations.upload(a))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}un("SymbolBuffers",ad);class od{constructor(a,p,x){this.layoutVertexArray=new a,this.layoutAttributes=p,this.indexArray=new x,this.segments=new qr,this.collisionVertexArray=new cn}upload(a){this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=a.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=a.createVertexBuffer(this.collisionVertexArray,H1.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}un("CollisionBuffers",od);class Ku{constructor(a){this.collisionBoxArray=a.collisionBoxArray,this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(G=>G.id),this.index=a.index,this.pixelRatio=a.pixelRatio,this.sourceLayerIndex=a.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=gc([]),this.placementViewportMatrix=gc([]);const p=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Jp(this.zoom,p["text-size"]),this.iconSizeData=Jp(this.zoom,p["icon-size"]);const x=this.layers[0].layout,L=x.get("symbol-sort-key"),V=x.get("symbol-z-order");this.canOverlap=rd(x,"text-overlap","text-allow-overlap")!=="never"||rd(x,"icon-overlap","icon-allow-overlap")!=="never"||x.get("text-ignore-placement")||x.get("icon-ignore-placement"),this.sortFeaturesByKey=V!=="viewport-y"&&!L.isConstant(),this.sortFeaturesByY=(V==="viewport-y"||V==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,x.get("symbol-placement")==="point"&&(this.writingModes=x.get("text-writing-mode").map(G=>o.ai[G])),this.stateDependentLayerIds=this.layers.filter(G=>G.isStateDependent()).map(G=>G.id),this.sourceID=a.sourceID}createArrays(){this.text=new ad(new Nl(this.layers,this.zoom,a=>/^text/.test(a))),this.icon=new ad(new Nl(this.layers,this.zoom,a=>/^icon/.test(a))),this.glyphOffsetArray=new nt,this.lineVertexArray=new st,this.symbolInstances=new He,this.textAnchorOffsets=new Ot}calculateGlyphDependencies(a,p,x,L,V){for(let G=0;G<a.length;G++)if(p[a.charCodeAt(G)]=!0,(x||L)&&V){const ee=bc[a.charAt(G)];ee&&(p[ee.charCodeAt(0)]=!0)}}populate(a,p,x){const L=this.layers[0],V=L.layout,G=V.get("text-font"),ee=V.get("text-field"),le=V.get("icon-image"),_e=(ee.value.kind!=="constant"||ee.value.value instanceof Pt&&!ee.value.value.isEmpty()||ee.value.value.toString().length>0)&&(G.value.kind!=="constant"||G.value.value.length>0),Pe=le.value.kind!=="constant"||!!le.value.value||Object.keys(le.parameters).length>0,Ge=V.get("symbol-sort-key");if(this.features=[],!_e&&!Pe)return;const it=p.iconDependencies,At=p.glyphDependencies,ht=p.availableImages,Ct=new Jr(this.zoom);for(const{feature:Tt,id:Dt,index:Yt,sourceLayerIndex:Qt}of a){const Kt=L._featureFilter.needGeometry,fi=qu(Tt,Kt);if(!L._featureFilter.filter(Ct,fi,x))continue;let Li,hn;if(Kt||(fi.geometry=fc(Tt)),_e){const An=L.getValueAndResolveTokens("text-field",fi,x,ht),Ki=Pt.factory(An);a_(Ki)&&(this.hasRTLText=!0),(!this.hasRTLText||nu()==="unavailable"||this.hasRTLText&&ns.isParsed())&&(Li=Dh(Ki,L,fi))}if(Pe){const An=L.getValueAndResolveTokens("icon-image",fi,x,ht);hn=An instanceof Cr?An:Cr.fromString(An)}if(!Li&&!hn)continue;const Cn=this.sortFeaturesByKey?Ge.evaluate(fi,{},x):void 0;if(this.features.push({id:Dt,text:Li,icon:hn,index:Yt,sourceLayerIndex:Qt,geometry:fi.geometry,properties:Tt.properties,type:r_[Tt.type],sortKey:Cn}),hn&&(it[hn.name]=!0),Li){const An=G.evaluate(fi,{},x).join(","),Ki=V.get("text-rotation-alignment")!=="viewport"&&V.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(o.ai.vertical)>=0;for(const Zi of Li.sections)if(Zi.image)it[Zi.image.name]=!0;else{const _n=hl(Li.toString()),Ji=Zi.fontStack||An,Gi=At[Ji]=At[Ji]||{};this.calculateGlyphDependencies(Zi.text,Gi,Ki,this.allowVerticalPlacement,_n)}}}V.get("symbol-placement")==="line"&&(this.features=function(Tt){const Dt={},Yt={},Qt=[];let Kt=0;function fi(An){Qt.push(Tt[An]),Kt++}function Li(An,Ki,Zi){const _n=Yt[An];return delete Yt[An],Yt[Ki]=_n,Qt[_n].geometry[0].pop(),Qt[_n].geometry[0]=Qt[_n].geometry[0].concat(Zi[0]),_n}function hn(An,Ki,Zi){const _n=Dt[Ki];return delete Dt[Ki],Dt[An]=_n,Qt[_n].geometry[0].shift(),Qt[_n].geometry[0]=Zi[0].concat(Qt[_n].geometry[0]),_n}function Cn(An,Ki,Zi){const _n=Zi?Ki[0][Ki[0].length-1]:Ki[0][0];return`${An}:${_n.x}:${_n.y}`}for(let An=0;An<Tt.length;An++){const Ki=Tt[An],Zi=Ki.geometry,_n=Ki.text?Ki.text.toString():null;if(!_n){fi(An);continue}const Ji=Cn(_n,Zi),Gi=Cn(_n,Zi,!0);if(Ji in Yt&&Gi in Dt&&Yt[Ji]!==Dt[Gi]){const yn=hn(Ji,Gi,Zi),xn=Li(Ji,Gi,Qt[yn].geometry);delete Dt[Ji],delete Yt[Gi],Yt[Cn(_n,Qt[xn].geometry,!0)]=xn,Qt[yn].geometry=null}else Ji in Yt?Li(Ji,Gi,Zi):Gi in Dt?hn(Ji,Gi,Zi):(fi(An),Dt[Ji]=Kt-1,Yt[Gi]=Kt-1)}return Qt.filter(An=>An.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Tt,Dt)=>Tt.sortKey-Dt.sortKey)}update(a,p,x){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(a,p,this.layers,x),this.icon.programConfigurations.updatePaintArrays(a,p,this.layers,x))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(a){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(a),this.iconCollisionBox.upload(a)),this.text.upload(a,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(a,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(a,p){const x=this.lineVertexArray.length;if(a.segment!==void 0){let L=a.dist(p[a.segment+1]),V=a.dist(p[a.segment]);const G={};for(let ee=a.segment+1;ee<p.length;ee++)G[ee]={x:p[ee].x,y:p[ee].y,tileUnitDistanceFromAnchor:L},ee<p.length-1&&(L+=p[ee+1].dist(p[ee]));for(let ee=a.segment||0;ee>=0;ee--)G[ee]={x:p[ee].x,y:p[ee].y,tileUnitDistanceFromAnchor:V},ee>0&&(V+=p[ee-1].dist(p[ee]));for(let ee=0;ee<p.length;ee++){const le=G[ee];this.lineVertexArray.emplaceBack(le.x,le.y,le.tileUnitDistanceFromAnchor)}}return{lineStartIndex:x,lineLength:this.lineVertexArray.length-x}}addSymbols(a,p,x,L,V,G,ee,le,_e,Pe,Ge,it){const At=a.indexArray,ht=a.layoutVertexArray,Ct=a.segments.prepareSegment(4*p.length,ht,At,this.canOverlap?G.sortKey:void 0),Tt=this.glyphOffsetArray.length,Dt=Ct.vertexLength,Yt=this.allowVerticalPlacement&&ee===o.ai.vertical?Math.PI/2:0,Qt=G.text&&G.text.sections;for(let Kt=0;Kt<p.length;Kt++){const{tl:fi,tr:Li,bl:hn,br:Cn,tex:An,pixelOffsetTL:Ki,pixelOffsetBR:Zi,minFontScaleX:_n,minFontScaleY:Ji,glyphOffset:Gi,isSDF:yn,sectionIndex:xn}=p[Kt],pr=Ct.vertexLength,Rs=Gi[1];Uf(ht,le.x,le.y,fi.x,Rs+fi.y,An.x,An.y,x,yn,Ki.x,Ki.y,_n,Ji),Uf(ht,le.x,le.y,Li.x,Rs+Li.y,An.x+An.w,An.y,x,yn,Zi.x,Ki.y,_n,Ji),Uf(ht,le.x,le.y,hn.x,Rs+hn.y,An.x,An.y+An.h,x,yn,Ki.x,Zi.y,_n,Ji),Uf(ht,le.x,le.y,Cn.x,Rs+Cn.y,An.x+An.w,An.y+An.h,x,yn,Zi.x,Zi.y,_n,Ji),sd(a.dynamicLayoutVertexArray,le,Yt),At.emplaceBack(pr,pr+1,pr+2),At.emplaceBack(pr+1,pr+2,pr+3),Ct.vertexLength+=4,Ct.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Gi[0]),Kt!==p.length-1&&xn===p[Kt+1].sectionIndex||a.programConfigurations.populatePaintArrays(ht.length,G,G.index,{},it,Qt&&Qt[xn])}a.placedSymbolArray.emplaceBack(le.x,le.y,Tt,this.glyphOffsetArray.length-Tt,Dt,_e,Pe,le.segment,x?x[0]:0,x?x[1]:0,L[0],L[1],ee,0,!1,0,Ge)}_addCollisionDebugVertex(a,p,x,L,V,G){return p.emplaceBack(0,0),a.emplaceBack(x.x,x.y,L,V,Math.round(G.x),Math.round(G.y))}addCollisionDebugVertices(a,p,x,L,V,G,ee){const le=V.segments.prepareSegment(4,V.layoutVertexArray,V.indexArray),_e=le.vertexLength,Pe=V.layoutVertexArray,Ge=V.collisionVertexArray,it=ee.anchorX,At=ee.anchorY;this._addCollisionDebugVertex(Pe,Ge,G,it,At,new oe(a,p)),this._addCollisionDebugVertex(Pe,Ge,G,it,At,new oe(x,p)),this._addCollisionDebugVertex(Pe,Ge,G,it,At,new oe(x,L)),this._addCollisionDebugVertex(Pe,Ge,G,it,At,new oe(a,L)),le.vertexLength+=4;const ht=V.indexArray;ht.emplaceBack(_e,_e+1),ht.emplaceBack(_e+1,_e+2),ht.emplaceBack(_e+2,_e+3),ht.emplaceBack(_e+3,_e),le.primitiveLength+=4}addDebugCollisionBoxes(a,p,x,L){for(let V=a;V<p;V++){const G=this.collisionBoxArray.get(V);this.addCollisionDebugVertices(G.x1,G.y1,G.x2,G.y2,L?this.textCollisionBox:this.iconCollisionBox,G.anchorPoint,x)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new od(mn,zf.members,Tn),this.iconCollisionBox=new od(mn,zf.members,Tn);for(let a=0;a<this.symbolInstances.length;a++){const p=this.symbolInstances.get(a);this.addDebugCollisionBoxes(p.textBoxStartIndex,p.textBoxEndIndex,p,!0),this.addDebugCollisionBoxes(p.verticalTextBoxStartIndex,p.verticalTextBoxEndIndex,p,!0),this.addDebugCollisionBoxes(p.iconBoxStartIndex,p.iconBoxEndIndex,p,!1),this.addDebugCollisionBoxes(p.verticalIconBoxStartIndex,p.verticalIconBoxEndIndex,p,!1)}}_deserializeCollisionBoxesForSymbol(a,p,x,L,V,G,ee,le,_e){const Pe={};for(let Ge=p;Ge<x;Ge++){const it=a.get(Ge);Pe.textBox={x1:it.x1,y1:it.y1,x2:it.x2,y2:it.y2,anchorPointX:it.anchorPointX,anchorPointY:it.anchorPointY},Pe.textFeatureIndex=it.featureIndex;break}for(let Ge=L;Ge<V;Ge++){const it=a.get(Ge);Pe.verticalTextBox={x1:it.x1,y1:it.y1,x2:it.x2,y2:it.y2,anchorPointX:it.anchorPointX,anchorPointY:it.anchorPointY},Pe.verticalTextFeatureIndex=it.featureIndex;break}for(let Ge=G;Ge<ee;Ge++){const it=a.get(Ge);Pe.iconBox={x1:it.x1,y1:it.y1,x2:it.x2,y2:it.y2,anchorPointX:it.anchorPointX,anchorPointY:it.anchorPointY},Pe.iconFeatureIndex=it.featureIndex;break}for(let Ge=le;Ge<_e;Ge++){const it=a.get(Ge);Pe.verticalIconBox={x1:it.x1,y1:it.y1,x2:it.x2,y2:it.y2,anchorPointX:it.anchorPointX,anchorPointY:it.anchorPointY},Pe.verticalIconFeatureIndex=it.featureIndex;break}return Pe}deserializeCollisionBoxes(a){this.collisionArrays=[];for(let p=0;p<this.symbolInstances.length;p++){const x=this.symbolInstances.get(p);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(a,x.textBoxStartIndex,x.textBoxEndIndex,x.verticalTextBoxStartIndex,x.verticalTextBoxEndIndex,x.iconBoxStartIndex,x.iconBoxEndIndex,x.verticalIconBoxStartIndex,x.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(a,p){const x=a.placedSymbolArray.get(p),L=x.vertexStartIndex+4*x.numGlyphs;for(let V=x.vertexStartIndex;V<L;V+=4)a.indexArray.emplaceBack(V,V+1,V+2),a.indexArray.emplaceBack(V+1,V+2,V+3)}getSortedSymbolIndexes(a){if(this.sortedAngle===a&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const p=Math.sin(a),x=Math.cos(a),L=[],V=[],G=[];for(let ee=0;ee<this.symbolInstances.length;++ee){G.push(ee);const le=this.symbolInstances.get(ee);L.push(0|Math.round(p*le.anchorX+x*le.anchorY)),V.push(le.featureIndex)}return G.sort((ee,le)=>L[ee]-L[le]||V[le]-V[ee]),G}addToSortKeyRanges(a,p){const x=this.sortKeyRanges[this.sortKeyRanges.length-1];x&&x.sortKey===p?x.symbolInstanceEnd=a+1:this.sortKeyRanges.push({sortKey:p,symbolInstanceStart:a,symbolInstanceEnd:a+1})}sortFeatures(a){if(this.sortFeaturesByY&&this.sortedAngle!==a&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(a),this.sortedAngle=a,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const p of this.symbolInstanceIndexes){const x=this.symbolInstances.get(p);this.featureSortOrder.push(x.featureIndex),[x.rightJustifiedTextSymbolIndex,x.centerJustifiedTextSymbolIndex,x.leftJustifiedTextSymbolIndex].forEach((L,V,G)=>{L>=0&&G.indexOf(L)===V&&this.addIndicesForPlacedSymbol(this.text,L)}),x.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,x.verticalPlacedTextSymbolIndex),x.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,x.placedIconSymbolIndex),x.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,x.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let Ad,$p;un("SymbolBucket",Ku,{omit:["layers","collisionBoxArray","features","compareText"]}),Ku.MAX_GLYPHS=65535,Ku.addDynamicAttributes=sd;var ld={get paint(){return $p=$p||new Wr({"icon-opacity":new Ii(ti.paint_symbol["icon-opacity"]),"icon-color":new Ii(ti.paint_symbol["icon-color"]),"icon-halo-color":new Ii(ti.paint_symbol["icon-halo-color"]),"icon-halo-width":new Ii(ti.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Ii(ti.paint_symbol["icon-halo-blur"]),"icon-translate":new ci(ti.paint_symbol["icon-translate"]),"icon-translate-anchor":new ci(ti.paint_symbol["icon-translate-anchor"]),"text-opacity":new Ii(ti.paint_symbol["text-opacity"]),"text-color":new Ii(ti.paint_symbol["text-color"],{runtimeType:je,getOverride:u=>u.textColor,hasOverride:u=>!!u.textColor}),"text-halo-color":new Ii(ti.paint_symbol["text-halo-color"]),"text-halo-width":new Ii(ti.paint_symbol["text-halo-width"]),"text-halo-blur":new Ii(ti.paint_symbol["text-halo-blur"]),"text-translate":new ci(ti.paint_symbol["text-translate"]),"text-translate-anchor":new ci(ti.paint_symbol["text-translate-anchor"])})},get layout(){return Ad=Ad||new Wr({"symbol-placement":new ci(ti.layout_symbol["symbol-placement"]),"symbol-spacing":new ci(ti.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new ci(ti.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Ii(ti.layout_symbol["symbol-sort-key"]),"symbol-z-order":new ci(ti.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new ci(ti.layout_symbol["icon-allow-overlap"]),"icon-overlap":new ci(ti.layout_symbol["icon-overlap"]),"icon-ignore-placement":new ci(ti.layout_symbol["icon-ignore-placement"]),"icon-optional":new ci(ti.layout_symbol["icon-optional"]),"icon-rotation-alignment":new ci(ti.layout_symbol["icon-rotation-alignment"]),"icon-size":new Ii(ti.layout_symbol["icon-size"]),"icon-text-fit":new ci(ti.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new ci(ti.layout_symbol["icon-text-fit-padding"]),"icon-image":new Ii(ti.layout_symbol["icon-image"]),"icon-rotate":new Ii(ti.layout_symbol["icon-rotate"]),"icon-padding":new Ii(ti.layout_symbol["icon-padding"]),"icon-keep-upright":new ci(ti.layout_symbol["icon-keep-upright"]),"icon-offset":new Ii(ti.layout_symbol["icon-offset"]),"icon-anchor":new Ii(ti.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new ci(ti.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new ci(ti.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new ci(ti.layout_symbol["text-rotation-alignment"]),"text-field":new Ii(ti.layout_symbol["text-field"]),"text-font":new Ii(ti.layout_symbol["text-font"]),"text-size":new Ii(ti.layout_symbol["text-size"]),"text-max-width":new Ii(ti.layout_symbol["text-max-width"]),"text-line-height":new ci(ti.layout_symbol["text-line-height"]),"text-letter-spacing":new Ii(ti.layout_symbol["text-letter-spacing"]),"text-justify":new Ii(ti.layout_symbol["text-justify"]),"text-radial-offset":new Ii(ti.layout_symbol["text-radial-offset"]),"text-variable-anchor":new ci(ti.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new Ii(ti.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new Ii(ti.layout_symbol["text-anchor"]),"text-max-angle":new ci(ti.layout_symbol["text-max-angle"]),"text-writing-mode":new ci(ti.layout_symbol["text-writing-mode"]),"text-rotate":new Ii(ti.layout_symbol["text-rotate"]),"text-padding":new ci(ti.layout_symbol["text-padding"]),"text-keep-upright":new ci(ti.layout_symbol["text-keep-upright"]),"text-transform":new Ii(ti.layout_symbol["text-transform"]),"text-offset":new Ii(ti.layout_symbol["text-offset"]),"text-allow-overlap":new ci(ti.layout_symbol["text-allow-overlap"]),"text-overlap":new ci(ti.layout_symbol["text-overlap"]),"text-ignore-placement":new ci(ti.layout_symbol["text-ignore-placement"]),"text-optional":new ci(ti.layout_symbol["text-optional"])})}};class eg{constructor(a){if(a.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=a.property.overrides?a.property.overrides.runtimeType:Le,this.defaultValue=a}evaluate(a){if(a.formattedSection){const p=this.defaultValue.property.overrides;if(p&&p.hasOverride(a.formattedSection))return p.getOverride(a.formattedSection)}return a.feature&&a.featureState?this.defaultValue.evaluate(a.feature,a.featureState):this.defaultValue.property.specification.default}eachChild(a){this.defaultValue.isConstant()||a(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}un("FormatSectionOverride",eg,{omit:["defaultValue"]});class Gf extends rs{constructor(a){super(a,ld)}recalculate(a,p){if(super.recalculate(a,p),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const x=this.layout.get("text-writing-mode");if(x){const L=[];for(const V of x)L.indexOf(V)<0&&L.push(V);this.layout._values["text-writing-mode"]=L}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(a,p,x,L){const V=this.layout.get(a).evaluate(p,{},x,L),G=this._unevaluatedLayout._values[a];return G.isDataDriven()||Vo(G.value)||!V?V:function(ee,le){return le.replace(/{([^{}]+)}/g,(_e,Pe)=>ee&&Pe in ee?String(ee[Pe]):"")}(p.properties,V)}createBucket(a){return new Ku(a)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const a of ld.paint.overridableProperties){if(!Gf.hasPaintOverride(this.layout,a))continue;const p=this.paint.get(a),x=new eg(p),L=new TA(x,p.property.specification);let V=null;V=p.value.kind==="constant"||p.value.kind==="source"?new ws("source",L):new Ar("composite",L,p.value.zoomStops),this.paint._values[a]=new Vs(p.property,V,p.parameters)}}_handleOverridablePaintPropertyUpdate(a,p,x){return!(!this.layout||p.isDataDriven()||x.isDataDriven())&&Gf.hasPaintOverride(this.layout,a)}static hasPaintOverride(a,p){const x=a.get("text-field"),L=ld.paint.properties[p];let V=!1;const G=ee=>{for(const le of ee)if(L.overrides&&L.overrides.hasOverride(le))return void(V=!0)};if(x.value.kind==="constant"&&x.value.value instanceof Pt)G(x.value.value.sections);else if(x.value.kind==="source"){const ee=_e=>{V||(_e instanceof ft&&Et(_e.value)===ue?G(_e.value.sections):_e instanceof ba?G(_e.sections):_e.eachChild(ee))},le=x.value;le._styleExpression&&ee(le._styleExpression.expression)}return V}}let tg;var o_={get paint(){return tg=tg||new Wr({"background-color":new ci(ti.paint_background["background-color"]),"background-pattern":new pl(ti.paint_background["background-pattern"]),"background-opacity":new ci(ti.paint_background["background-opacity"])})}};class A_ extends rs{constructor(a){super(a,o_)}}let ig;var ng={get paint(){return ig=ig||new Wr({"raster-opacity":new ci(ti.paint_raster["raster-opacity"]),"raster-hue-rotate":new ci(ti.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new ci(ti.paint_raster["raster-brightness-min"]),"raster-brightness-max":new ci(ti.paint_raster["raster-brightness-max"]),"raster-saturation":new ci(ti.paint_raster["raster-saturation"]),"raster-contrast":new ci(ti.paint_raster["raster-contrast"]),"raster-resampling":new ci(ti.paint_raster["raster-resampling"]),"raster-fade-duration":new ci(ti.paint_raster["raster-fade-duration"])})}};class l_ extends rs{constructor(a){super(a,ng)}}class Hf extends rs{constructor(a){super(a,{}),this.onAdd=p=>{this.implementation.onAdd&&this.implementation.onAdd(p,p.painter.context.gl)},this.onRemove=p=>{this.implementation.onRemove&&this.implementation.onRemove(p,p.painter.context.gl)},this.implementation=a}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class u_{constructor(a){this._callback=a,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const ud=63710088e-1;class Ju{constructor(a,p){if(isNaN(a)||isNaN(p))throw new Error(`Invalid LngLat object: (${a}, ${p})`);if(this.lng=+a,this.lat=+p,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Ju(Gt(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(a){const p=Math.PI/180,x=this.lat*p,L=a.lat*p,V=Math.sin(x)*Math.sin(L)+Math.cos(x)*Math.cos(L)*Math.cos((a.lng-this.lng)*p);return ud*Math.acos(Math.min(V,1))}static convert(a){if(a instanceof Ju)return a;if(Array.isArray(a)&&(a.length===2||a.length===3))return new Ju(Number(a[0]),Number(a[1]));if(!Array.isArray(a)&&typeof a=="object"&&a!==null)return new Ju(Number("lng"in a?a.lng:a.lon),Number(a.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const rg=2*Math.PI*ud;function sg(u){return rg*Math.cos(u*Math.PI/180)}function ag(u){return(180+u)/360}function og(u){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+u*Math.PI/360)))/360}function Ag(u,a){return u/sg(a)}function lg(u){return 360*u-180}function cd(u){return 360/Math.PI*Math.atan(Math.exp((180-360*u)*Math.PI/180))-90}class Qf{constructor(a,p,x=0){this.x=+a,this.y=+p,this.z=+x}static fromLngLat(a,p=0){const x=Ju.convert(a);return new Qf(ag(x.lng),og(x.lat),Ag(p,x.lat))}toLngLat(){return new Ju(lg(this.x),cd(this.y))}toAltitude(){return this.z*sg(cd(this.y))}meterInMercatorCoordinateUnits(){return 1/rg*(a=cd(this.y),1/Math.cos(a*Math.PI/180));var a}}function ug(u,a,p){var x=2*Math.PI*6378137/256/Math.pow(2,p);return[u*x-2*Math.PI*6378137/2,a*x-2*Math.PI*6378137/2]}class hd{constructor(a,p,x){if(a<0||a>25||x<0||x>=Math.pow(2,a)||p<0||p>=Math.pow(2,a))throw new Error(`x=${p}, y=${x}, z=${a} outside of bounds. 0<=x<${Math.pow(2,a)}, 0<=y<${Math.pow(2,a)} 0<=z<=25 `);this.z=a,this.x=p,this.y=x,this.key=Fh(0,a,a,p,x)}equals(a){return this.z===a.z&&this.x===a.x&&this.y===a.y}url(a,p,x){const L=(G=this.y,ee=this.z,le=ug(256*(V=this.x),256*(G=Math.pow(2,ee)-G-1),ee),_e=ug(256*(V+1),256*(G+1),ee),le[0]+","+le[1]+","+_e[0]+","+_e[1]);var V,G,ee,le,_e;const Pe=function(Ge,it,At){let ht,Ct="";for(let Tt=Ge;Tt>0;Tt--)ht=1<<Tt-1,Ct+=(it&ht?1:0)+(At&ht?2:0);return Ct}(this.z,this.x,this.y);return a[(this.x+this.y)%a.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(x==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,p>1?"@2x":"").replace(/{quadkey}/g,Pe).replace(/{bbox-epsg-3857}/g,L)}isChildOf(a){const p=this.z-a.z;return p>0&&a.x===this.x>>p&&a.y===this.y>>p}getTilePoint(a){const p=Math.pow(2,this.z);return new oe((a.x*p-this.x)*ga,(a.y*p-this.y)*ga)}toString(){return`${this.z}/${this.x}/${this.y}`}}class cg{constructor(a,p){this.wrap=a,this.canonical=p,this.key=Fh(a,p.z,p.z,p.x,p.y)}}class YA{constructor(a,p,x,L,V){if(a<x)throw new Error(`overscaledZ should be >= z; overscaledZ = ${a}; z = ${x}`);this.overscaledZ=a,this.wrap=p,this.canonical=new hd(x,+L,+V),this.key=Fh(p,a,x,L,V)}clone(){return new YA(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(a){return this.overscaledZ===a.overscaledZ&&this.wrap===a.wrap&&this.canonical.equals(a.canonical)}scaledTo(a){if(a>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${a}; overscaledZ = ${this.overscaledZ}`);const p=this.canonical.z-a;return a>this.canonical.z?new YA(a,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new YA(a,this.wrap,a,this.canonical.x>>p,this.canonical.y>>p)}calculateScaledKey(a,p){if(a>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${a}; overscaledZ = ${this.overscaledZ}`);const x=this.canonical.z-a;return a>this.canonical.z?Fh(this.wrap*+p,a,this.canonical.z,this.canonical.x,this.canonical.y):Fh(this.wrap*+p,a,a,this.canonical.x>>x,this.canonical.y>>x)}isChildOf(a){if(a.wrap!==this.wrap)return!1;const p=this.canonical.z-a.canonical.z;return a.overscaledZ===0||a.overscaledZ<this.overscaledZ&&a.canonical.x===this.canonical.x>>p&&a.canonical.y===this.canonical.y>>p}children(a){if(this.overscaledZ>=a)return[new YA(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const p=this.canonical.z+1,x=2*this.canonical.x,L=2*this.canonical.y;return[new YA(p,this.wrap,p,x,L),new YA(p,this.wrap,p,x+1,L),new YA(p,this.wrap,p,x,L+1),new YA(p,this.wrap,p,x+1,L+1)]}isLessThan(a){return this.wrap<a.wrap||!(this.wrap>a.wrap)&&(this.overscaledZ<a.overscaledZ||!(this.overscaledZ>a.overscaledZ)&&(this.canonical.x<a.canonical.x||!(this.canonical.x>a.canonical.x)&&this.canonical.y<a.canonical.y))}wrapped(){return new YA(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(a){return new YA(this.overscaledZ,a,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new cg(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(a){return this.canonical.getTilePoint(new Qf(a.x-this.wrap,a.y))}}function Fh(u,a,p,x,L){(u*=2)<0&&(u=-1*u-1);const V=1<<p;return(V*V*u+V*L+x).toString(36)+p.toString(36)+a.toString(36)}un("CanonicalTileID",hd),un("OverscaledTileID",YA,{omit:["posMatrix"]});class fd{constructor(a,p,x,L=1,V=1,G=1,ee=0){if(this.uid=a,p.height!==p.width)throw new RangeError("DEM tiles must be square");if(x&&!["mapbox","terrarium","custom"].includes(x))return void Me(`"${x}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=p.height;const le=this.dim=p.height-2;switch(this.data=new Uint32Array(p.data.buffer),x){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=L,this.greenFactor=V,this.blueFactor=G,this.baseShift=ee;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let _e=0;_e<le;_e++)this.data[this._idx(-1,_e)]=this.data[this._idx(0,_e)],this.data[this._idx(le,_e)]=this.data[this._idx(le-1,_e)],this.data[this._idx(_e,-1)]=this.data[this._idx(_e,0)],this.data[this._idx(_e,le)]=this.data[this._idx(_e,le-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(le,-1)]=this.data[this._idx(le-1,0)],this.data[this._idx(-1,le)]=this.data[this._idx(0,le-1)],this.data[this._idx(le,le)]=this.data[this._idx(le-1,le-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let _e=0;_e<le;_e++)for(let Pe=0;Pe<le;Pe++){const Ge=this.get(_e,Pe);Ge>this.max&&(this.max=Ge),Ge<this.min&&(this.min=Ge)}}get(a,p){const x=new Uint8Array(this.data.buffer),L=4*this._idx(a,p);return this.unpack(x[L],x[L+1],x[L+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(a,p){if(a<-1||a>=this.dim+1||p<-1||p>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(p+1)*this.stride+(a+1)}unpack(a,p,x){return a*this.redFactor+p*this.greenFactor+x*this.blueFactor-this.baseShift}getPixels(){return new oA({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(a,p,x){if(this.dim!==a.dim)throw new Error("dem dimension mismatch");let L=p*this.dim,V=p*this.dim+this.dim,G=x*this.dim,ee=x*this.dim+this.dim;switch(p){case-1:L=V-1;break;case 1:V=L+1}switch(x){case-1:G=ee-1;break;case 1:ee=G+1}const le=-p*this.dim,_e=-x*this.dim;for(let Pe=G;Pe<ee;Pe++)for(let Ge=L;Ge<V;Ge++)this.data[this._idx(Ge,Pe)]=a.data[this._idx(Ge+le,Pe+_e)]}}un("DEMData",fd);class dd{constructor(a){this._stringToNumber={},this._numberToString=[];for(let p=0;p<a.length;p++){const x=a[p];this._stringToNumber[x]=p,this._numberToString[p]=x}}encode(a){return this._stringToNumber[a]}decode(a){if(a>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${a} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[a]}}class hg{constructor(a,p,x,L,V){this.type="Feature",this._vectorTileFeature=a,a._z=p,a._x=x,a._y=L,this.properties=a.properties,this.id=V}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(a){this._geometry=a}toJSON(){const a={geometry:this.geometry};for(const p in this)p!=="_geometry"&&p!=="_vectorTileFeature"&&(a[p]=this[p]);return a}}class fg{constructor(a,p){this.tileID=a,this.x=a.canonical.x,this.y=a.canonical.y,this.z=a.canonical.z,this.grid=new ao(ga,16,0),this.grid3D=new ao(ga,16,0),this.featureIndexArray=new Mt,this.promoteId=p}insert(a,p,x,L,V,G){const ee=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(x,L,V);const le=G?this.grid3D:this.grid;for(let _e=0;_e<p.length;_e++){const Pe=p[_e],Ge=[1/0,1/0,-1/0,-1/0];for(let it=0;it<Pe.length;it++){const At=Pe[it];Ge[0]=Math.min(Ge[0],At.x),Ge[1]=Math.min(Ge[1],At.y),Ge[2]=Math.max(Ge[2],At.x),Ge[3]=Math.max(Ge[3],At.y)}Ge[0]<ga&&Ge[1]<ga&&Ge[2]>=0&&Ge[3]>=0&&le.insert(ee,Ge[0],Ge[1],Ge[2],Ge[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new ju.VectorTile(new $0(this.rawTileData)).layers,this.sourceLayerCoder=new dd(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(a,p,x,L){this.loadVTLayers();const V=a.params||{},G=ga/a.tileSize/a.scale,ee=_r(V.filter),le=a.queryGeometry,_e=a.queryPadding*G,Pe=pg(le),Ge=this.grid.query(Pe.minX-_e,Pe.minY-_e,Pe.maxX+_e,Pe.maxY+_e),it=pg(a.cameraQueryGeometry),At=this.grid3D.query(it.minX-_e,it.minY-_e,it.maxX+_e,it.maxY+_e,(Tt,Dt,Yt,Qt)=>function(Kt,fi,Li,hn,Cn){for(const Ki of Kt)if(fi<=Ki.x&&Li<=Ki.y&&hn>=Ki.x&&Cn>=Ki.y)return!0;const An=[new oe(fi,Li),new oe(fi,Cn),new oe(hn,Cn),new oe(hn,Li)];if(Kt.length>2){for(const Ki of An)if(dc(Kt,Ki))return!0}for(let Ki=0;Ki<Kt.length-1;Ki++)if(C1(Kt[Ki],Kt[Ki+1],An))return!0;return!1}(a.cameraQueryGeometry,Tt-_e,Dt-_e,Yt+_e,Qt+_e));for(const Tt of At)Ge.push(Tt);Ge.sort(qf);const ht={};let Ct;for(let Tt=0;Tt<Ge.length;Tt++){const Dt=Ge[Tt];if(Dt===Ct)continue;Ct=Dt;const Yt=this.featureIndexArray.get(Dt);let Qt=null;this.loadMatchingFeature(ht,Yt.bucketIndex,Yt.sourceLayerIndex,Yt.featureIndex,ee,V.layers,V.availableImages,p,x,L,(Kt,fi,Li)=>(Qt||(Qt=fc(Kt)),fi.queryIntersectsFeature(le,Kt,Li,Qt,this.z,a.transform,G,a.pixelPosMatrix)))}return ht}loadMatchingFeature(a,p,x,L,V,G,ee,le,_e,Pe,Ge){const it=this.bucketLayerIDs[p];if(G&&!function(Tt,Dt){for(let Yt=0;Yt<Tt.length;Yt++)if(Dt.indexOf(Tt[Yt])>=0)return!0;return!1}(G,it))return;const At=this.sourceLayerCoder.decode(x),ht=this.vtLayers[At].feature(L);if(V.needGeometry){const Tt=qu(ht,!0);if(!V.filter(new Jr(this.tileID.overscaledZ),Tt,this.tileID.canonical))return}else if(!V.filter(new Jr(this.tileID.overscaledZ),ht))return;const Ct=this.getId(ht,At);for(let Tt=0;Tt<it.length;Tt++){const Dt=it[Tt];if(G&&G.indexOf(Dt)<0)continue;const Yt=le[Dt];if(!Yt)continue;let Qt={};Ct&&Pe&&(Qt=Pe.getState(Yt.sourceLayer||"_geojsonTileLayer",Ct));const Kt=Ve({},_e[Dt]);Kt.paint=dg(Kt.paint,Yt.paint,ht,Qt,ee),Kt.layout=dg(Kt.layout,Yt.layout,ht,Qt,ee);const fi=!Ge||Ge(ht,Yt,Qt);if(!fi)continue;const Li=new hg(ht,this.z,this.x,this.y,Ct);Li.layer=Kt;let hn=a[Dt];hn===void 0&&(hn=a[Dt]=[]),hn.push({featureIndex:L,feature:Li,intersectionZ:fi})}}lookupSymbolFeatures(a,p,x,L,V,G,ee,le){const _e={};this.loadVTLayers();const Pe=_r(V);for(const Ge of a)this.loadMatchingFeature(_e,x,L,Ge,Pe,G,ee,le,p);return _e}hasLayer(a){for(const p of this.bucketLayerIDs)for(const x of p)if(a===x)return!0;return!1}getId(a,p){let x=a.id;return this.promoteId&&(x=a.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[p]],typeof x=="boolean"&&(x=Number(x))),x}}function dg(u,a,p,x,L){return et(u,(V,G)=>{const ee=a instanceof Ca?a.get(G):null;return ee&&ee.evaluate?ee.evaluate(p,x,L):ee})}function pg(u){let a=1/0,p=1/0,x=-1/0,L=-1/0;for(const V of u)a=Math.min(a,V.x),p=Math.min(p,V.y),x=Math.max(x,V.x),L=Math.max(L,V.y);return{minX:a,minY:p,maxX:x,maxY:L}}function qf(u,a){return a-u}function gg(u,a,p,x,L){const V=[];for(let G=0;G<u.length;G++){const ee=u[G];let le;for(let _e=0;_e<ee.length-1;_e++){let Pe=ee[_e],Ge=ee[_e+1];Pe.x<a&&Ge.x<a||(Pe.x<a?Pe=new oe(a,Pe.y+(a-Pe.x)/(Ge.x-Pe.x)*(Ge.y-Pe.y))._round():Ge.x<a&&(Ge=new oe(a,Pe.y+(a-Pe.x)/(Ge.x-Pe.x)*(Ge.y-Pe.y))._round()),Pe.y<p&&Ge.y<p||(Pe.y<p?Pe=new oe(Pe.x+(p-Pe.y)/(Ge.y-Pe.y)*(Ge.x-Pe.x),p)._round():Ge.y<p&&(Ge=new oe(Pe.x+(p-Pe.y)/(Ge.y-Pe.y)*(Ge.x-Pe.x),p)._round()),Pe.x>=x&&Ge.x>=x||(Pe.x>=x?Pe=new oe(x,Pe.y+(x-Pe.x)/(Ge.x-Pe.x)*(Ge.y-Pe.y))._round():Ge.x>=x&&(Ge=new oe(x,Pe.y+(x-Pe.x)/(Ge.x-Pe.x)*(Ge.y-Pe.y))._round()),Pe.y>=L&&Ge.y>=L||(Pe.y>=L?Pe=new oe(Pe.x+(L-Pe.y)/(Ge.y-Pe.y)*(Ge.x-Pe.x),L)._round():Ge.y>=L&&(Ge=new oe(Pe.x+(L-Pe.y)/(Ge.y-Pe.y)*(Ge.x-Pe.x),L)._round()),le&&Pe.equals(le[le.length-1])||(le=[Pe],V.push(le)),le.push(Ge)))))}}return V}un("FeatureIndex",fg,{omit:["rawTileData","sourceLayerCoder"]});class $u extends oe{constructor(a,p,x,L){super(a,p),this.angle=x,L!==void 0&&(this.segment=L)}clone(){return new $u(this.x,this.y,this.angle,this.segment)}}function mg(u,a,p,x,L){if(a.segment===void 0||p===0)return!0;let V=a,G=a.segment+1,ee=0;for(;ee>-p/2;){if(G--,G<0)return!1;ee-=u[G].dist(V),V=u[G]}ee+=u[G].dist(u[G+1]),G++;const le=[];let _e=0;for(;ee<p/2;){const Pe=u[G],Ge=u[G+1];if(!Ge)return!1;let it=u[G-1].angleTo(Pe)-Pe.angleTo(Ge);for(it=Math.abs((it+3*Math.PI)%(2*Math.PI)-Math.PI),le.push({distance:ee,angleDelta:it}),_e+=it;ee-le[0].distance>x;)_e-=le.shift().angleDelta;if(_e>L)return!1;G++,ee+=Pe.dist(Ge)}return!0}function _g(u){let a=0;for(let p=0;p<u.length-1;p++)a+=u[p].dist(u[p+1]);return a}function vg(u,a,p){return u?.6*a*p:0}function yg(u,a){return Math.max(u?u.right-u.left:0,a?a.right-a.left:0)}function c_(u,a,p,x,L,V){const G=vg(p,L,V),ee=yg(p,x)*V;let le=0;const _e=_g(u)/2;for(let Pe=0;Pe<u.length-1;Pe++){const Ge=u[Pe],it=u[Pe+1],At=Ge.dist(it);if(le+At>_e){const ht=(_e-le)/At,Ct=xs.number(Ge.x,it.x,ht),Tt=xs.number(Ge.y,it.y,ht),Dt=new $u(Ct,Tt,it.angleTo(Ge),Pe);return Dt._round(),!G||mg(u,Dt,ee,G,a)?Dt:void 0}le+=At}}function h_(u,a,p,x,L,V,G,ee,le){const _e=vg(x,V,G),Pe=yg(x,L),Ge=Pe*G,it=u[0].x===0||u[0].x===le||u[0].y===0||u[0].y===le;return a-Ge<a/4&&(a=Ge+a/4),bg(u,it?a/2*ee%a:(Pe/2+2*V)*G*ee%a,a,_e,p,Ge,it,!1,le)}function bg(u,a,p,x,L,V,G,ee,le){const _e=V/2,Pe=_g(u);let Ge=0,it=a-p,At=[];for(let ht=0;ht<u.length-1;ht++){const Ct=u[ht],Tt=u[ht+1],Dt=Ct.dist(Tt),Yt=Tt.angleTo(Ct);for(;it+p<Ge+Dt;){it+=p;const Qt=(it-Ge)/Dt,Kt=xs.number(Ct.x,Tt.x,Qt),fi=xs.number(Ct.y,Tt.y,Qt);if(Kt>=0&&Kt<le&&fi>=0&&fi<le&&it-_e>=0&&it+_e<=Pe){const Li=new $u(Kt,fi,Yt,ht);Li._round(),x&&!mg(u,Li,V,x,L)||At.push(Li)}}Ge+=Dt}return ee||At.length||G||(At=bg(u,Ge/2,p,x,L,V,G,!0,le)),At}un("Anchor",$u);const ah=bA;function xg(u,a,p,x){const L=[],V=u.image,G=V.pixelRatio,ee=V.paddedRect.w-2*ah,le=V.paddedRect.h-2*ah,_e=u.right-u.left,Pe=u.bottom-u.top,Ge=V.stretchX||[[0,ee]],it=V.stretchY||[[0,le]],At=(Zi,_n)=>Zi+_n[1]-_n[0],ht=Ge.reduce(At,0),Ct=it.reduce(At,0),Tt=ee-ht,Dt=le-Ct;let Yt=0,Qt=ht,Kt=0,fi=Ct,Li=0,hn=Tt,Cn=0,An=Dt;if(V.content&&x){const Zi=V.content;Yt=Sc(Ge,0,Zi[0]),Kt=Sc(it,0,Zi[1]),Qt=Sc(Ge,Zi[0],Zi[2]),fi=Sc(it,Zi[1],Zi[3]),Li=Zi[0]-Yt,Cn=Zi[1]-Kt,hn=Zi[2]-Zi[0]-Qt,An=Zi[3]-Zi[1]-fi}const Ki=(Zi,_n,Ji,Gi)=>{const yn=Nh(Zi.stretch-Yt,Qt,_e,u.left),xn=Vh(Zi.fixed-Li,hn,Zi.stretch,ht),pr=Nh(_n.stretch-Kt,fi,Pe,u.top),Rs=Vh(_n.fixed-Cn,An,_n.stretch,Ct),Us=Nh(Ji.stretch-Yt,Qt,_e,u.left),Oa=Vh(Ji.fixed-Li,hn,Ji.stretch,ht),DA=Nh(Gi.stretch-Kt,fi,Pe,u.top),qo=Vh(Gi.fixed-Cn,An,Gi.stretch,Ct),Cs=new oe(yn,pr),Vn=new oe(Us,pr),Ao=new oe(Us,DA),Gs=new oe(yn,DA),Zo=new oe(xn/G,Rs/G),za=new oe(Oa/G,qo/G),Jn=a*Math.PI/180;if(Jn){const qa=Math.sin(Jn),xA=Math.cos(Jn),wA=[xA,-qa,qa,xA];Cs._matMult(wA),Vn._matMult(wA),Gs._matMult(wA),Ao._matMult(wA)}const jo=Zi.stretch+Zi.fixed,Wo=_n.stretch+_n.fixed;return{tl:Cs,tr:Vn,bl:Gs,br:Ao,tex:{x:V.paddedRect.x+ah+jo,y:V.paddedRect.y+ah+Wo,w:Ji.stretch+Ji.fixed-jo,h:Gi.stretch+Gi.fixed-Wo},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Zo,pixelOffsetBR:za,minFontScaleX:hn/G/_e,minFontScaleY:An/G/Pe,isSDF:p}};if(x&&(V.stretchX||V.stretchY)){const Zi=wg(Ge,Tt,ht),_n=wg(it,Dt,Ct);for(let Ji=0;Ji<Zi.length-1;Ji++){const Gi=Zi[Ji],yn=Zi[Ji+1];for(let xn=0;xn<_n.length-1;xn++)L.push(Ki(Gi,_n[xn],yn,_n[xn+1]))}}else L.push(Ki({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:ee+1},{fixed:0,stretch:le+1}));return L}function Sc(u,a,p){let x=0;for(const L of u)x+=Math.max(a,Math.min(p,L[1]))-Math.max(a,Math.min(p,L[0]));return x}function wg(u,a,p){const x=[{fixed:-ah,stretch:0}];for(const[L,V]of u){const G=x[x.length-1];x.push({fixed:L-G.stretch,stretch:G.stretch}),x.push({fixed:L-G.stretch,stretch:G.stretch+(V-L)})}return x.push({fixed:a+ah,stretch:p}),x}function Nh(u,a,p,x){return u/a*p+x}function Vh(u,a,p,x){return u-a*p/x}class oh{constructor(a,p,x,L,V,G,ee,le,_e,Pe){if(this.boxStartIndex=a.length,_e){let Ge=G.top,it=G.bottom;const At=G.collisionPadding;At&&(Ge-=At[1],it+=At[3]);let ht=it-Ge;ht>0&&(ht=Math.max(10,ht),this.circleDiameter=ht)}else{let Ge=G.top*ee-le[0],it=G.bottom*ee+le[2],At=G.left*ee-le[3],ht=G.right*ee+le[1];const Ct=G.collisionPadding;if(Ct&&(At-=Ct[0]*ee,Ge-=Ct[1]*ee,ht+=Ct[2]*ee,it+=Ct[3]*ee),Pe){const Tt=new oe(At,Ge),Dt=new oe(ht,Ge),Yt=new oe(At,it),Qt=new oe(ht,it),Kt=Pe*Math.PI/180;Tt._rotate(Kt),Dt._rotate(Kt),Yt._rotate(Kt),Qt._rotate(Kt),At=Math.min(Tt.x,Dt.x,Yt.x,Qt.x),ht=Math.max(Tt.x,Dt.x,Yt.x,Qt.x),Ge=Math.min(Tt.y,Dt.y,Yt.y,Qt.y),it=Math.max(Tt.y,Dt.y,Yt.y,Qt.y)}a.emplaceBack(p.x,p.y,At,Ge,ht,it,x,L,V)}this.boxEndIndex=a.length}}class Sg{constructor(a=[],p=Cg){if(this.data=a,this.length=this.data.length,this.compare=p,this.length>0)for(let x=(this.length>>1)-1;x>=0;x--)this._down(x)}push(a){this.data.push(a),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const a=this.data[0],p=this.data.pop();return this.length--,this.length>0&&(this.data[0]=p,this._down(0)),a}peek(){return this.data[0]}_up(a){const{data:p,compare:x}=this,L=p[a];for(;a>0;){const V=a-1>>1,G=p[V];if(x(L,G)>=0)break;p[a]=G,a=V}p[a]=L}_down(a){const{data:p,compare:x}=this,L=this.length>>1,V=p[a];for(;a<L;){let G=1+(a<<1),ee=p[G];const le=G+1;if(le<this.length&&x(p[le],ee)<0&&(G=le,ee=p[le]),x(ee,V)>=0)break;p[a]=ee,a=G}p[a]=V}}function Cg(u,a){return u<a?-1:u>a?1:0}function Eg(u,a=1,p=!1){let x=1/0,L=1/0,V=-1/0,G=-1/0;const ee=u[0];for(let At=0;At<ee.length;At++){const ht=ee[At];(!At||ht.x<x)&&(x=ht.x),(!At||ht.y<L)&&(L=ht.y),(!At||ht.x>V)&&(V=ht.x),(!At||ht.y>G)&&(G=ht.y)}const le=Math.min(V-x,G-L);let _e=le/2;const Pe=new Sg([],Ig);if(le===0)return new oe(x,L);for(let At=x;At<V;At+=le)for(let ht=L;ht<G;ht+=le)Pe.push(new Ah(At+_e,ht+_e,_e,u));let Ge=function(At){let ht=0,Ct=0,Tt=0;const Dt=At[0];for(let Yt=0,Qt=Dt.length,Kt=Qt-1;Yt<Qt;Kt=Yt++){const fi=Dt[Yt],Li=Dt[Kt],hn=fi.x*Li.y-Li.x*fi.y;Ct+=(fi.x+Li.x)*hn,Tt+=(fi.y+Li.y)*hn,ht+=3*hn}return new Ah(Ct/ht,Tt/ht,0,At)}(u),it=Pe.length;for(;Pe.length;){const At=Pe.pop();(At.d>Ge.d||!Ge.d)&&(Ge=At,p&&console.log("found best %d after %d probes",Math.round(1e4*At.d)/1e4,it)),At.max-Ge.d<=a||(_e=At.h/2,Pe.push(new Ah(At.p.x-_e,At.p.y-_e,_e,u)),Pe.push(new Ah(At.p.x+_e,At.p.y-_e,_e,u)),Pe.push(new Ah(At.p.x-_e,At.p.y+_e,_e,u)),Pe.push(new Ah(At.p.x+_e,At.p.y+_e,_e,u)),it+=4)}return p&&(console.log(`num probes: ${it}`),console.log(`best distance: ${Ge.d}`)),Ge.p}function Ig(u,a){return a.max-u.max}function Ah(u,a,p,x){this.p=new oe(u,a),this.h=p,this.d=function(L,V){let G=!1,ee=1/0;for(let le=0;le<V.length;le++){const _e=V[le];for(let Pe=0,Ge=_e.length,it=Ge-1;Pe<Ge;it=Pe++){const At=_e[Pe],ht=_e[it];At.y>L.y!=ht.y>L.y&&L.x<(ht.x-At.x)*(L.y-At.y)/(ht.y-At.y)+At.x&&(G=!G),ee=Math.min(ee,k0(L,At,ht))}}return(G?1:-1)*Math.sqrt(ee)}(this.p,x),this.max=this.d+this.h*Math.SQRT2}var Po;o.aq=void 0,(Po=o.aq||(o.aq={}))[Po.center=1]="center",Po[Po.left=2]="left",Po[Po.right=3]="right",Po[Po.top=4]="top",Po[Po.bottom=5]="bottom",Po[Po["top-left"]=6]="top-left",Po[Po["top-right"]=7]="top-right",Po[Po["bottom-left"]=8]="bottom-left",Po[Po["bottom-right"]=9]="bottom-right";const ec=7,lh=Number.POSITIVE_INFINITY;function Uh(u,a){return a[1]!==lh?function(p,x,L){let V=0,G=0;switch(x=Math.abs(x),L=Math.abs(L),p){case"top-right":case"top-left":case"top":G=L-ec;break;case"bottom-right":case"bottom-left":case"bottom":G=-L+ec}switch(p){case"top-right":case"bottom-right":case"right":V=-x;break;case"top-left":case"bottom-left":case"left":V=x}return[V,G]}(u,a[0],a[1]):function(p,x){let L=0,V=0;x<0&&(x=0);const G=x/Math.SQRT2;switch(p){case"top-right":case"top-left":V=G-ec;break;case"bottom-right":case"bottom-left":V=-G+ec;break;case"bottom":V=-x+ec;break;case"top":V=x-ec}switch(p){case"top-right":case"bottom-right":L=-G;break;case"top-left":case"bottom-left":L=G;break;case"left":L=x;break;case"right":L=-x}return[L,V]}(u,a[0])}function Tg(u,a,p){var x;const L=u.layout,V=(x=L.get("text-variable-anchor-offset"))===null||x===void 0?void 0:x.evaluate(a,{},p);if(V){const ee=V.values,le=[];for(let _e=0;_e<ee.length;_e+=2){const Pe=le[_e]=ee[_e],Ge=ee[_e+1].map(it=>it*Ia);Pe.startsWith("top")?Ge[1]-=ec:Pe.startsWith("bottom")&&(Ge[1]+=ec),le[_e+1]=Ge}return new nn(le)}const G=L.get("text-variable-anchor");if(G){let ee;ee=u._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[L.get("text-radial-offset").evaluate(a,{},p)*Ia,lh]:L.get("text-offset").evaluate(a,{},p).map(_e=>_e*Ia);const le=[];for(const _e of G)le.push(_e,Uh(_e,ee));return new nn(le)}return null}function pd(u){switch(u){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function gd(u,a,p,x,L,V,G,ee,le,_e,Pe){let Ge=V.textMaxSize.evaluate(a,{});Ge===void 0&&(Ge=G);const it=u.layers[0].layout,At=it.get("icon-offset").evaluate(a,{},Pe),ht=kg(p.horizontal),Ct=G/24,Tt=u.tilePixelRatio*Ct,Dt=u.tilePixelRatio*Ge/24,Yt=u.tilePixelRatio*ee,Qt=u.tilePixelRatio*it.get("symbol-spacing"),Kt=it.get("text-padding")*u.tilePixelRatio,fi=function(Gi,yn,xn,pr=1){const Rs=Gi.get("icon-padding").evaluate(yn,{},xn),Us=Rs&&Rs.values;return[Us[0]*pr,Us[1]*pr,Us[2]*pr,Us[3]*pr]}(it,a,Pe,u.tilePixelRatio),Li=it.get("text-max-angle")/180*Math.PI,hn=it.get("text-rotation-alignment")!=="viewport"&&it.get("symbol-placement")!=="point",Cn=it.get("icon-rotation-alignment")==="map"&&it.get("symbol-placement")!=="point",An=it.get("symbol-placement"),Ki=Qt/2,Zi=it.get("icon-text-fit");let _n;x&&Zi!=="none"&&(u.allowVerticalPlacement&&p.vertical&&(_n=Kp(x,p.vertical,Zi,it.get("icon-text-fit-padding"),At,Ct)),ht&&(x=Kp(x,ht,Zi,it.get("icon-text-fit-padding"),At,Ct)));const Ji=(Gi,yn)=>{yn.x<0||yn.x>=ga||yn.y<0||yn.y>=ga||function(xn,pr,Rs,Us,Oa,DA,qo,Cs,Vn,Ao,Gs,Zo,za,Jn,jo,Wo,qa,xA,wA,Fa,Ir,Yo,Do,Na,yl){const Vl=xn.addToLineVertexArray(pr,Rs);let Ul,Mu,bl,KA,Xo=0,Pu=0,Ec=0,Lg=0,Sd=-1,Cd=-1;const Ys={};let SA=ko("");if(xn.allowVerticalPlacement&&Us.vertical){const Ko=Cs.layout.get("text-rotate").evaluate(Ir,{},Na)+90;bl=new oh(Vn,pr,Ao,Gs,Zo,Us.vertical,za,Jn,jo,Ko),qo&&(KA=new oh(Vn,pr,Ao,Gs,Zo,qo,qa,xA,jo,Ko))}if(Oa){const Ko=Cs.layout.get("icon-rotate").evaluate(Ir,{}),JA=Cs.layout.get("icon-text-fit")!=="none",xl=xg(Oa,Ko,Do,JA),Hl=qo?xg(qo,Ko,Do,JA):void 0;Mu=new oh(Vn,pr,Ao,Gs,Zo,Oa,qa,xA,!1,Ko),Xo=4*xl.length;const Ic=xn.iconSizeData;let lu=null;Ic.kind==="source"?(lu=[Au*Cs.layout.get("icon-size").evaluate(Ir,{})],lu[0]>Xu&&Me(`${xn.layerIds[0]}: Value for "icon-size" is >= ${zh}. Reduce your "icon-size".`)):Ic.kind==="composite"&&(lu=[Au*Yo.compositeIconSizes[0].evaluate(Ir,{},Na),Au*Yo.compositeIconSizes[1].evaluate(Ir,{},Na)],(lu[0]>Xu||lu[1]>Xu)&&Me(`${xn.layerIds[0]}: Value for "icon-size" is >= ${zh}. Reduce your "icon-size".`)),xn.addSymbols(xn.icon,xl,lu,Fa,wA,Ir,o.ai.none,pr,Vl.lineStartIndex,Vl.lineLength,-1,Na),Sd=xn.icon.placedSymbolArray.length-1,Hl&&(Pu=4*Hl.length,xn.addSymbols(xn.icon,Hl,lu,Fa,wA,Ir,o.ai.vertical,pr,Vl.lineStartIndex,Vl.lineLength,-1,Na),Cd=xn.icon.placedSymbolArray.length-1)}const Bg=Object.keys(Us.horizontal);for(const Ko of Bg){const JA=Us.horizontal[Ko];if(!Ul){SA=ko(JA.text);const Hl=Cs.layout.get("text-rotate").evaluate(Ir,{},Na);Ul=new oh(Vn,pr,Ao,Gs,Zo,JA,za,Jn,jo,Hl)}const xl=JA.positionedLines.length===1;if(Ec+=md(xn,pr,JA,DA,Cs,jo,Ir,Wo,Vl,Us.vertical?o.ai.horizontal:o.ai.horizontalOnly,xl?Bg:[Ko],Ys,Sd,Yo,Na),xl)break}Us.vertical&&(Lg+=md(xn,pr,Us.vertical,DA,Cs,jo,Ir,Wo,Vl,o.ai.vertical,["vertical"],Ys,Cd,Yo,Na));const d_=Ul?Ul.boxStartIndex:xn.collisionBoxArray.length,p_=Ul?Ul.boxEndIndex:xn.collisionBoxArray.length,Rg=bl?bl.boxStartIndex:xn.collisionBoxArray.length,g_=bl?bl.boxEndIndex:xn.collisionBoxArray.length,m_=Mu?Mu.boxStartIndex:xn.collisionBoxArray.length,__=Mu?Mu.boxEndIndex:xn.collisionBoxArray.length,Og=KA?KA.boxStartIndex:xn.collisionBoxArray.length,v_=KA?KA.boxEndIndex:xn.collisionBoxArray.length;let Gl=-1;const jf=(Ko,JA)=>Ko&&Ko.circleDiameter?Math.max(Ko.circleDiameter,JA):JA;Gl=jf(Ul,Gl),Gl=jf(bl,Gl),Gl=jf(Mu,Gl),Gl=jf(KA,Gl);const Ed=Gl>-1?1:0;Ed&&(Gl*=yl/Ia),xn.glyphOffsetArray.length>=Ku.MAX_GLYPHS&&Me("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Ir.sortKey!==void 0&&xn.addToSortKeyRanges(xn.symbolInstances.length,Ir.sortKey);const zg=Tg(Cs,Ir,Na),[y_,b_]=function(Ko,JA){const xl=Ko.length,Hl=JA==null?void 0:JA.values;if((Hl==null?void 0:Hl.length)>0)for(let Ic=0;Ic<Hl.length;Ic+=2){const lu=Hl[Ic+1];Ko.emplaceBack(o.aq[Hl[Ic]],lu[0],lu[1])}return[xl,Ko.length]}(xn.textAnchorOffsets,zg);xn.symbolInstances.emplaceBack(pr.x,pr.y,Ys.right>=0?Ys.right:-1,Ys.center>=0?Ys.center:-1,Ys.left>=0?Ys.left:-1,Ys.vertical||-1,Sd,Cd,SA,d_,p_,Rg,g_,m_,__,Og,v_,Ao,Ec,Lg,Xo,Pu,Ed,0,za,Gl,y_,b_)}(u,yn,Gi,p,x,L,_n,u.layers[0],u.collisionBoxArray,a.index,a.sourceLayerIndex,u.index,Tt,[Kt,Kt,Kt,Kt],hn,le,Yt,fi,Cn,At,a,V,_e,Pe,G)};if(An==="line")for(const Gi of gg(a.geometry,0,0,ga,ga)){const yn=h_(Gi,Qt,Li,p.vertical||ht,x,24,Dt,u.overscaling,ga);for(const xn of yn)ht&&f_(u,ht.text,Ki,xn)||Ji(Gi,xn)}else if(An==="line-center"){for(const Gi of a.geometry)if(Gi.length>1){const yn=c_(Gi,Li,p.vertical||ht,x,24,Dt);yn&&Ji(Gi,yn)}}else if(a.type==="Polygon")for(const Gi of N0(a.geometry,0)){const yn=Eg(Gi,16);Ji(Gi[0],new $u(yn.x,yn.y,0))}else if(a.type==="LineString")for(const Gi of a.geometry)Ji(Gi,new $u(Gi[0].x,Gi[0].y,0));else if(a.type==="Point")for(const Gi of a.geometry)for(const yn of Gi)Ji([yn],new $u(yn.x,yn.y,0))}function md(u,a,p,x,L,V,G,ee,le,_e,Pe,Ge,it,At,ht){const Ct=function(Yt,Qt,Kt,fi,Li,hn,Cn,An){const Ki=fi.layout.get("text-rotate").evaluate(hn,{})*Math.PI/180,Zi=[];for(const _n of Qt.positionedLines)for(const Ji of _n.positionedGlyphs){if(!Ji.rect)continue;const Gi=Ji.rect||{};let yn=Zp+1,xn=!0,pr=1,Rs=0;const Us=(Li||An)&&Ji.vertical,Oa=Ji.metrics.advance*Ji.scale/2;if(An&&Qt.verticalizable&&(Rs=_n.lineOffset/2-(Ji.imageName?-(Ia-Ji.metrics.width*Ji.scale)/2:(Ji.scale-1)*Ia)),Ji.imageName){const Fa=Cn[Ji.imageName];xn=Fa.sdf,pr=Fa.pixelRatio,yn=bA/pr}const DA=Li?[Ji.x+Oa,Ji.y]:[0,0];let qo=Li?[0,0]:[Ji.x+Oa+Kt[0],Ji.y+Kt[1]-Rs],Cs=[0,0];Us&&(Cs=qo,qo=[0,0]);const Vn=Ji.metrics.isDoubleResolution?2:1,Ao=(Ji.metrics.left-yn)*Ji.scale-Oa+qo[0],Gs=(-Ji.metrics.top-yn)*Ji.scale+qo[1],Zo=Ao+Gi.w/Vn*Ji.scale/pr,za=Gs+Gi.h/Vn*Ji.scale/pr,Jn=new oe(Ao,Gs),jo=new oe(Zo,Gs),Wo=new oe(Ao,za),qa=new oe(Zo,za);if(Us){const Fa=new oe(-Oa,Oa-Rh),Ir=-Math.PI/2,Yo=Ia/2-Oa,Do=new oe(5-Rh-Yo,-(Ji.imageName?Yo:0)),Na=new oe(...Cs);Jn._rotateAround(Ir,Fa)._add(Do)._add(Na),jo._rotateAround(Ir,Fa)._add(Do)._add(Na),Wo._rotateAround(Ir,Fa)._add(Do)._add(Na),qa._rotateAround(Ir,Fa)._add(Do)._add(Na)}if(Ki){const Fa=Math.sin(Ki),Ir=Math.cos(Ki),Yo=[Ir,-Fa,Fa,Ir];Jn._matMult(Yo),jo._matMult(Yo),Wo._matMult(Yo),qa._matMult(Yo)}const xA=new oe(0,0),wA=new oe(0,0);Zi.push({tl:Jn,tr:jo,bl:Wo,br:qa,tex:Gi,writingMode:Qt.writingMode,glyphOffset:DA,sectionIndex:Ji.sectionIndex,isSDF:xn,pixelOffsetTL:xA,pixelOffsetBR:wA,minFontScaleX:0,minFontScaleY:0})}return Zi}(0,p,ee,L,V,G,x,u.allowVerticalPlacement),Tt=u.textSizeData;let Dt=null;Tt.kind==="source"?(Dt=[Au*L.layout.get("text-size").evaluate(G,{})],Dt[0]>Xu&&Me(`${u.layerIds[0]}: Value for "text-size" is >= ${zh}. Reduce your "text-size".`)):Tt.kind==="composite"&&(Dt=[Au*At.compositeTextSizes[0].evaluate(G,{},ht),Au*At.compositeTextSizes[1].evaluate(G,{},ht)],(Dt[0]>Xu||Dt[1]>Xu)&&Me(`${u.layerIds[0]}: Value for "text-size" is >= ${zh}. Reduce your "text-size".`)),u.addSymbols(u.text,Ct,Dt,ee,V,G,_e,a,le.lineStartIndex,le.lineLength,it,ht);for(const Yt of Pe)Ge[Yt]=u.text.placedSymbolArray.length-1;return 4*Ct.length}function kg(u){for(const a in u)return u[a];return null}function f_(u,a,p,x){const L=u.compareText;if(a in L){const V=L[a];for(let G=V.length-1;G>=0;G--)if(x.dist(V[G])<p)return!0}else L[a]=[];return L[a].push(x),!1}const Mg=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class _d{static from(a){if(!(a instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[p,x]=new Uint8Array(a,0,2);if(p!==219)throw new Error("Data does not appear to be in a KDBush format.");const L=x>>4;if(L!==1)throw new Error(`Got v${L} data when expected v1.`);const V=Mg[15&x];if(!V)throw new Error("Unrecognized array type.");const[G]=new Uint16Array(a,2,1),[ee]=new Uint32Array(a,4,1);return new _d(ee,G,V,a)}constructor(a,p=64,x=Float64Array,L){if(isNaN(a)||a<0)throw new Error(`Unpexpected numItems value: ${a}.`);this.numItems=+a,this.nodeSize=Math.min(Math.max(+p,2),65535),this.ArrayType=x,this.IndexArrayType=a<65536?Uint16Array:Uint32Array;const V=Mg.indexOf(this.ArrayType),G=2*a*this.ArrayType.BYTES_PER_ELEMENT,ee=a*this.IndexArrayType.BYTES_PER_ELEMENT,le=(8-ee%8)%8;if(V<0)throw new Error(`Unexpected typed array class: ${x}.`);L&&L instanceof ArrayBuffer?(this.data=L,this.ids=new this.IndexArrayType(this.data,8,a),this.coords=new this.ArrayType(this.data,8+ee+le,2*a),this._pos=2*a,this._finished=!0):(this.data=new ArrayBuffer(8+G+ee+le),this.ids=new this.IndexArrayType(this.data,8,a),this.coords=new this.ArrayType(this.data,8+ee+le,2*a),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+V]),new Uint16Array(this.data,2,1)[0]=p,new Uint32Array(this.data,4,1)[0]=a)}add(a,p){const x=this._pos>>1;return this.ids[x]=x,this.coords[this._pos++]=a,this.coords[this._pos++]=p,x}finish(){const a=this._pos>>1;if(a!==this.numItems)throw new Error(`Added ${a} items when expected ${this.numItems}.`);return vd(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(a,p,x,L){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:V,coords:G,nodeSize:ee}=this,le=[0,V.length-1,0],_e=[];for(;le.length;){const Pe=le.pop()||0,Ge=le.pop()||0,it=le.pop()||0;if(Ge-it<=ee){for(let Tt=it;Tt<=Ge;Tt++){const Dt=G[2*Tt],Yt=G[2*Tt+1];Dt>=a&&Dt<=x&&Yt>=p&&Yt<=L&&_e.push(V[Tt])}continue}const At=it+Ge>>1,ht=G[2*At],Ct=G[2*At+1];ht>=a&&ht<=x&&Ct>=p&&Ct<=L&&_e.push(V[At]),(Pe===0?a<=ht:p<=Ct)&&(le.push(it),le.push(At-1),le.push(1-Pe)),(Pe===0?x>=ht:L>=Ct)&&(le.push(At+1),le.push(Ge),le.push(1-Pe))}return _e}within(a,p,x){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:L,coords:V,nodeSize:G}=this,ee=[0,L.length-1,0],le=[],_e=x*x;for(;ee.length;){const Pe=ee.pop()||0,Ge=ee.pop()||0,it=ee.pop()||0;if(Ge-it<=G){for(let Tt=it;Tt<=Ge;Tt++)Dg(V[2*Tt],V[2*Tt+1],a,p)<=_e&&le.push(L[Tt]);continue}const At=it+Ge>>1,ht=V[2*At],Ct=V[2*At+1];Dg(ht,Ct,a,p)<=_e&&le.push(L[At]),(Pe===0?a-x<=ht:p-x<=Ct)&&(ee.push(it),ee.push(At-1),ee.push(1-Pe)),(Pe===0?a+x>=ht:p+x>=Ct)&&(ee.push(At+1),ee.push(Ge),ee.push(1-Pe))}return le}}function vd(u,a,p,x,L,V){if(L-x<=p)return;const G=x+L>>1;Pg(u,a,G,x,L,V),vd(u,a,p,x,G-1,1-V),vd(u,a,p,G+1,L,1-V)}function Pg(u,a,p,x,L,V){for(;L>x;){if(L-x>600){const _e=L-x+1,Pe=p-x+1,Ge=Math.log(_e),it=.5*Math.exp(2*Ge/3),At=.5*Math.sqrt(Ge*it*(_e-it)/_e)*(Pe-_e/2<0?-1:1);Pg(u,a,p,Math.max(x,Math.floor(p-Pe*it/_e+At)),Math.min(L,Math.floor(p+(_e-Pe)*it/_e+At)),V)}const G=a[2*p+V];let ee=x,le=L;for(Gh(u,a,x,p),a[2*L+V]>G&&Gh(u,a,x,L);ee<le;){for(Gh(u,a,ee,le),ee++,le--;a[2*ee+V]<G;)ee++;for(;a[2*le+V]>G;)le--}a[2*x+V]===G?Gh(u,a,x,le):(le++,Gh(u,a,le,L)),le<=p&&(x=le+1),p<=le&&(L=le-1)}}function Gh(u,a,p,x){yd(u,p,x),yd(a,2*p,2*x),yd(a,2*p+1,2*x+1)}function yd(u,a,p){const x=u[a];u[a]=u[p],u[p]=x}function Dg(u,a,p,x){const L=u-p,V=a-x;return L*L+V*V}var bd;o.bh=void 0,(bd=o.bh||(o.bh={})).create="create",bd.load="load",bd.fullLoad="fullLoad";let Zf=null,Hh=[];const XA=1e3/60,xd="loadTime",wd="fullLoadTime",Cc={mark(u){performance.mark(u)},frame(u){const a=u;Zf!=null&&Hh.push(a-Zf),Zf=a},clearMetrics(){Zf=null,Hh=[],performance.clearMeasures(xd),performance.clearMeasures(wd);for(const u in o.bh)performance.clearMarks(o.bh[u])},getPerformanceMetrics(){performance.measure(xd,o.bh.create,o.bh.load),performance.measure(wd,o.bh.create,o.bh.fullLoad);const u=performance.getEntriesByName(xd)[0].duration,a=performance.getEntriesByName(wd)[0].duration,p=Hh.length,x=1/(Hh.reduce((V,G)=>V+G,0)/p/1e3),L=Hh.filter(V=>V>XA).reduce((V,G)=>V+(G-XA)/XA,0);return{loadTime:u,fullLoadTime:a,fps:x,percentDroppedFrames:L/(p+L)*100,totalFrames:p}}};o.$=function(u,a,p){var x,L,V,G,ee,le,_e,Pe,Ge,it,At,ht,Ct=p[0],Tt=p[1],Dt=p[2];return a===u?(u[12]=a[0]*Ct+a[4]*Tt+a[8]*Dt+a[12],u[13]=a[1]*Ct+a[5]*Tt+a[9]*Dt+a[13],u[14]=a[2]*Ct+a[6]*Tt+a[10]*Dt+a[14],u[15]=a[3]*Ct+a[7]*Tt+a[11]*Dt+a[15]):(L=a[1],V=a[2],G=a[3],ee=a[4],le=a[5],_e=a[6],Pe=a[7],Ge=a[8],it=a[9],At=a[10],ht=a[11],u[0]=x=a[0],u[1]=L,u[2]=V,u[3]=G,u[4]=ee,u[5]=le,u[6]=_e,u[7]=Pe,u[8]=Ge,u[9]=it,u[10]=At,u[11]=ht,u[12]=x*Ct+ee*Tt+Ge*Dt+a[12],u[13]=L*Ct+le*Tt+it*Dt+a[13],u[14]=V*Ct+_e*Tt+At*Dt+a[14],u[15]=G*Ct+Pe*Tt+ht*Dt+a[15]),u},o.A=Kc,o.B=xs,o.C=class{constructor(u,a,p){this.receive=x=>{const L=x.data,V=L.id;if(V&&(!L.targetMapId||this.mapId===L.targetMapId))if(L.type==="<cancel>"){delete this.tasks[V];const G=this.cancelCallbacks[V];delete this.cancelCallbacks[V],G&&G()}else vt()||L.mustQueue?(this.tasks[V]=L,this.taskQueue.push(V),this.invoker.trigger()):this.processTask(V,L)},this.process=()=>{if(!this.taskQueue.length)return;const x=this.taskQueue.shift(),L=this.tasks[x];delete this.tasks[x],this.taskQueue.length&&this.invoker.trigger(),L&&this.processTask(x,L)},this.target=u,this.parent=a,this.mapId=p,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},this.invoker=new u_(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=vt()?u:window}send(u,a,p,x,L=!1){const V=Math.round(1e18*Math.random()).toString(36).substring(0,10);p&&(this.callbacks[V]=p);const G=[],ee={id:V,type:u,hasCallback:!!p,targetMapId:x,mustQueue:L,sourceMapId:this.mapId,data:Eo(a,G)};return this.target.postMessage(ee,{transfer:G}),{cancel:()=>{p&&delete this.callbacks[V],this.target.postMessage({id:V,type:"<cancel>",targetMapId:x,sourceMapId:this.mapId})}}}processTask(u,a){if(a.type==="<response>"){const p=this.callbacks[u];delete this.callbacks[u],p&&(a.error?p(oo(a.error)):p(null,oo(a.data)))}else{let p=!1;const x=[],L=a.hasCallback?(ee,le)=>{p=!0,delete this.cancelCallbacks[u];const _e={id:u,type:"<response>",sourceMapId:this.mapId,error:ee?Eo(ee):null,data:Eo(le,x)};this.target.postMessage(_e,{transfer:x})}:ee=>{p=!0};let V=null;const G=oo(a.data);if(this.parent[a.type])V=this.parent[a.type](a.sourceMapId,G,L);else if("getWorkerSource"in this.parent){const ee=a.type.split(".");V=this.parent.getWorkerSource(a.sourceMapId,ee[0],G.source)[ee[1]](G,L)}else L(new Error(`Could not find function ${a.type}`));!p&&V&&V.cancel&&(this.cancelCallbacks[u]=V.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},o.D=ci,o.E=ar,o.F=function(u,a){const p={};for(let x=0;x<a.length;x++){const L=a[x];L in u&&(p[L]=u[L])}return p},o.G=ag,o.H=og,o.I=td,o.J=We,o.K=ct,o.L=Ju,o.M=di,o.N=ga,o.O=YA,o.P=oe,o.Q=E,o.R=oA,o.S=qr,o.T=Io,o.U=Qf,o.V=class extends ae{},o.W=hd,o.X=function(u,a){const p=window.document.createElement("video");p.muted=!0,p.onloadstart=function(){a(null,p)};for(let x=0;x<u.length;x++){const L=window.document.createElement("source");zi(u[x])||(p.crossOrigin="Anonymous"),L.src=u[x],p.appendChild(L)}return{cancel:()=>{}}},o.Y=ie,o.Z=function(){var u=new Kc(16);return Kc!=Float32Array&&(u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[11]=0,u[12]=0,u[13]=0,u[14]=0),u[0]=1,u[5]=1,u[10]=1,u[15]=1,u},o._=k,o.a=_t,o.a$=class extends T{},o.a0=function(u,a,p){var x=p[0],L=p[1],V=p[2];return u[0]=a[0]*x,u[1]=a[1]*x,u[2]=a[2]*x,u[3]=a[3]*x,u[4]=a[4]*L,u[5]=a[5]*L,u[6]=a[6]*L,u[7]=a[7]*L,u[8]=a[8]*V,u[9]=a[9]*V,u[10]=a[10]*V,u[11]=a[11]*V,u[12]=a[12],u[13]=a[13],u[14]=a[14],u[15]=a[15],u},o.a1=M0,o.a2=function(){return Je++},o.a3=X,o.a4=Ku,o.a5=function(){ns.isLoading()||ns.isLoaded()||nu()!=="deferred"||lr()},o.a6=_r,o.a7=qu,o.a8=Jr,o.a9=hg,o.aA=fl,o.aB=function(u){u=u.slice();const a=Object.create(null);for(let p=0;p<u.length;p++)a[u[p].id]=u[p];for(let p=0;p<u.length;p++)"ref"in u[p]&&(u[p]=ir(u[p],a[u[p].ref]));return u},o.aC=function(u){if(u.type==="custom")return new Hf(u);switch(u.type){case"background":return new A_(u);case"circle":return new I1(u);case"fill":return new Pp(u);case"fill-extrusion":return new Bp(u);case"heatmap":return new L0(u);case"hillshade":return new O0(u);case"line":return new G1(u);case"raster":return new l_(u);case"symbol":return new Gf(u)}},o.aD=ut,o.aE=function(u,a){if(!u)return[{command:kn.setStyle,args:[a]}];let p=[];try{if(!gn(u.version,a.version))return[{command:kn.setStyle,args:[a]}];gn(u.center,a.center)||p.push({command:kn.setCenter,args:[a.center]}),gn(u.zoom,a.zoom)||p.push({command:kn.setZoom,args:[a.zoom]}),gn(u.bearing,a.bearing)||p.push({command:kn.setBearing,args:[a.bearing]}),gn(u.pitch,a.pitch)||p.push({command:kn.setPitch,args:[a.pitch]}),gn(u.sprite,a.sprite)||p.push({command:kn.setSprite,args:[a.sprite]}),gn(u.glyphs,a.glyphs)||p.push({command:kn.setGlyphs,args:[a.glyphs]}),gn(u.transition,a.transition)||p.push({command:kn.setTransition,args:[a.transition]}),gn(u.light,a.light)||p.push({command:kn.setLight,args:[a.light]});const x={},L=[];(function(G,ee,le,_e){let Pe;for(Pe in ee=ee||{},G=G||{})Object.prototype.hasOwnProperty.call(G,Pe)&&(Object.prototype.hasOwnProperty.call(ee,Pe)||d(Pe,le,_e));for(Pe in ee)Object.prototype.hasOwnProperty.call(ee,Pe)&&(Object.prototype.hasOwnProperty.call(G,Pe)?gn(G[Pe],ee[Pe])||(G[Pe].type==="geojson"&&ee[Pe].type==="geojson"&&D(G,ee,Pe)?le.push({command:kn.setGeoJSONSourceData,args:[Pe,ee[Pe].data]}):y(Pe,ee,le,_e)):an(Pe,ee,le))})(u.sources,a.sources,L,x);const V=[];u.layers&&u.layers.forEach(G=>{x[G.source]?p.push({command:kn.removeLayer,args:[G.id]}):V.push(G)}),p=p.concat(L),function(G,ee,le){ee=ee||[];const _e=(G=G||[]).map(Q),Pe=ee.map(Q),Ge=G.reduce(K,{}),it=ee.reduce(K,{}),At=_e.slice(),ht=Object.create(null);let Ct,Tt,Dt,Yt,Qt,Kt,fi;for(Ct=0,Tt=0;Ct<_e.length;Ct++)Dt=_e[Ct],Object.prototype.hasOwnProperty.call(it,Dt)?Tt++:(le.push({command:kn.removeLayer,args:[Dt]}),At.splice(At.indexOf(Dt,Tt),1));for(Ct=0,Tt=0;Ct<Pe.length;Ct++)Dt=Pe[Pe.length-1-Ct],At[At.length-1-Ct]!==Dt&&(Object.prototype.hasOwnProperty.call(Ge,Dt)?(le.push({command:kn.removeLayer,args:[Dt]}),At.splice(At.lastIndexOf(Dt,At.length-Tt),1)):Tt++,Kt=At[At.length-Ct],le.push({command:kn.addLayer,args:[it[Dt],Kt]}),At.splice(At.length-Ct,0,Dt),ht[Dt]=!0);for(Ct=0;Ct<Pe.length;Ct++)if(Dt=Pe[Ct],Yt=Ge[Dt],Qt=it[Dt],!ht[Dt]&&!gn(Yt,Qt))if(gn(Yt.source,Qt.source)&&gn(Yt["source-layer"],Qt["source-layer"])&&gn(Yt.type,Qt.type)){for(fi in U(Yt.layout,Qt.layout,le,Dt,null,kn.setLayoutProperty),U(Yt.paint,Qt.paint,le,Dt,null,kn.setPaintProperty),gn(Yt.filter,Qt.filter)||le.push({command:kn.setFilter,args:[Dt,Qt.filter]}),gn(Yt.minzoom,Qt.minzoom)&&gn(Yt.maxzoom,Qt.maxzoom)||le.push({command:kn.setLayerZoomRange,args:[Dt,Qt.minzoom,Qt.maxzoom]}),Yt)Object.prototype.hasOwnProperty.call(Yt,fi)&&fi!=="layout"&&fi!=="paint"&&fi!=="filter"&&fi!=="metadata"&&fi!=="minzoom"&&fi!=="maxzoom"&&(fi.indexOf("paint.")===0?U(Yt[fi],Qt[fi],le,Dt,fi.slice(6),kn.setPaintProperty):gn(Yt[fi],Qt[fi])||le.push({command:kn.setLayerProperty,args:[Dt,fi,Qt[fi]]}));for(fi in Qt)Object.prototype.hasOwnProperty.call(Qt,fi)&&!Object.prototype.hasOwnProperty.call(Yt,fi)&&fi!=="layout"&&fi!=="paint"&&fi!=="filter"&&fi!=="metadata"&&fi!=="minzoom"&&fi!=="maxzoom"&&(fi.indexOf("paint.")===0?U(Yt[fi],Qt[fi],le,Dt,fi.slice(6),kn.setPaintProperty):gn(Yt[fi],Qt[fi])||le.push({command:kn.setLayerProperty,args:[Dt,fi,Qt[fi]]}))}else le.push({command:kn.removeLayer,args:[Dt]}),Kt=At[At.lastIndexOf(Dt)+1],le.push({command:kn.addLayer,args:[Qt,Kt]})}(V,a.layers,p)}catch(x){console.warn("Unable to compute style diff:",x),p=[{command:kn.setStyle,args:[a]}]}return p},o.aF=function(u){const a=[],p=u.id;return p===void 0&&a.push({message:`layers.${p}: missing required property "id"`}),u.render===void 0&&a.push({message:`layers.${p}: missing required method "render"`}),u.renderingMode&&u.renderingMode!=="2d"&&u.renderingMode!=="3d"&&a.push({message:`layers.${p}: property "renderingMode" must be either "2d" or "3d"`}),a},o.aG=function u(a,p){if(Array.isArray(a)){if(!Array.isArray(p)||a.length!==p.length)return!1;for(let x=0;x<a.length;x++)if(!u(a[x],p[x]))return!1;return!0}if(typeof a=="object"&&a!==null&&p!==null){if(typeof p!="object"||Object.keys(a).length!==Object.keys(p).length)return!1;for(const x in a)if(!u(a[x],p[x]))return!1;return!0}return a===p},o.aH=et,o.aI=lt,o.aJ=dl,o.aK=function(u){return u({pluginStatus:la,pluginURL:Go}),dl.on("pluginStateChange",u),u},o.aL=class extends pa{constructor(u,a){super(u,a),this.current=0}set(u){this.current!==u&&(this.current=u,this.gl.uniform1i(this.location,u))}},o.aM=Qu,o.aN=class extends pa{constructor(u,a){super(u,a),this.current=C0}set(u){if(u[12]!==this.current[12]||u[0]!==this.current[0])return this.current=u,void this.gl.uniformMatrix4fv(this.location,!1,u);for(let a=1;a<16;a++)if(u[a]!==this.current[a]){this.current=u,this.gl.uniformMatrix4fv(this.location,!1,u);break}}},o.aO=xf,o.aP=class extends pa{constructor(u,a){super(u,a),this.current=[0,0,0]}set(u){u[0]===this.current[0]&&u[1]===this.current[1]&&u[2]===this.current[2]||(this.current=u,this.gl.uniform3f(this.location,u[0],u[1],u[2]))}},o.aQ=class extends pa{constructor(u,a){super(u,a),this.current=[0,0]}set(u){u[0]===this.current[0]&&u[1]===this.current[1]||(this.current=u,this.gl.uniform2f(this.location,u[0],u[1]))}},o.aR=wf,o.aS=function(u,a,p,x,L,V,G){var ee=1/(a-p),le=1/(x-L),_e=1/(V-G);return u[0]=-2*ee,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=-2*le,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=2*_e,u[11]=0,u[12]=(a+p)*ee,u[13]=(L+x)*le,u[14]=(G+V)*_e,u[15]=1,u},o.aT=Mi,o.aU=E1,o.aV=class extends I{},o.aW=Vp,o.aX=class extends F{},o.aY=function(u){return u<=1?1:Math.pow(2,Math.ceil(Math.log(u)/Math.LN2))},o.aZ=D0,o.a_=zt,o.aa=function(u){const a={};if(u.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(p,x,L,V)=>{const G=L||V;return a[x]=!G||G.toLowerCase(),""}),a["max-age"]){const p=parseInt(a["max-age"],10);isNaN(p)?delete a["max-age"]:a["max-age"]=p}return a},o.ab=function(u,a){const p=[];for(const x in u)x in a||p.push(x);return p},o.ac=function(u){if(dt==null){const a=u.navigator?u.navigator.userAgent:null;dt=!!u.safari||!(!a||!(/\b(iPad|iPhone|iPod)\b/.test(a)||a.match("Safari")&&!a.match("Chrome")))}return dt},o.ad=xe,o.ae=function(u,a,p){var x=Math.sin(p),L=Math.cos(p),V=a[0],G=a[1],ee=a[2],le=a[3],_e=a[4],Pe=a[5],Ge=a[6],it=a[7];return a!==u&&(u[8]=a[8],u[9]=a[9],u[10]=a[10],u[11]=a[11],u[12]=a[12],u[13]=a[13],u[14]=a[14],u[15]=a[15]),u[0]=V*L+_e*x,u[1]=G*L+Pe*x,u[2]=ee*L+Ge*x,u[3]=le*L+it*x,u[4]=_e*L-V*x,u[5]=Pe*L-G*x,u[6]=Ge*L-ee*x,u[7]=it*L-le*x,u},o.af=function(u){var a=new Kc(16);return a[0]=u[0],a[1]=u[1],a[2]=u[2],a[3]=u[3],a[4]=u[4],a[5]=u[5],a[6]=u[6],a[7]=u[7],a[8]=u[8],a[9]=u[9],a[10]=u[10],a[11]=u[11],a[12]=u[12],a[13]=u[13],a[14]=u[14],a[15]=u[15],a},o.ag=_A,o.ah=function(u,a){let p=0,x=0;if(u.kind==="constant")x=u.layoutSize;else if(u.kind!=="source"){const{interpolationType:L,minZoom:V,maxZoom:G}=u,ee=L?xe(Pr.interpolationFactor(L,a,V,G),0,1):0;u.kind==="camera"?x=xs.number(u.minSize,u.maxSize,ee):p=ee}return{uSizeT:p,uSize:x}},o.aj=function(u,{uSize:a,uSizeT:p},{lowerSize:x,upperSize:L}){return u.kind==="source"?x/Au:u.kind==="composite"?xs.number(x/Au,L/Au,p):a},o.ak=sd,o.al=function(u,a,p,x){const L=a.y-u.y,V=a.x-u.x,G=x.y-p.y,ee=x.x-p.x,le=G*V-ee*L;if(le===0)return null;const _e=(ee*(u.y-p.y)-G*(u.x-p.x))/le;return new oe(u.x+_e*V,u.y+_e*L)},o.am=gg,o.an=Cf,o.ao=gc,o.ap=Ia,o.ar=rd,o.as=function(u,a){var p=a[0],x=a[1],L=a[2],V=a[3],G=a[4],ee=a[5],le=a[6],_e=a[7],Pe=a[8],Ge=a[9],it=a[10],At=a[11],ht=a[12],Ct=a[13],Tt=a[14],Dt=a[15],Yt=p*ee-x*G,Qt=p*le-L*G,Kt=p*_e-V*G,fi=x*le-L*ee,Li=x*_e-V*ee,hn=L*_e-V*le,Cn=Pe*Ct-Ge*ht,An=Pe*Tt-it*ht,Ki=Pe*Dt-At*ht,Zi=Ge*Tt-it*Ct,_n=Ge*Dt-At*Ct,Ji=it*Dt-At*Tt,Gi=Yt*Ji-Qt*_n+Kt*Zi+fi*Ki-Li*An+hn*Cn;return Gi?(u[0]=(ee*Ji-le*_n+_e*Zi)*(Gi=1/Gi),u[1]=(L*_n-x*Ji-V*Zi)*Gi,u[2]=(Ct*hn-Tt*Li+Dt*fi)*Gi,u[3]=(it*Li-Ge*hn-At*fi)*Gi,u[4]=(le*Ki-G*Ji-_e*An)*Gi,u[5]=(p*Ji-L*Ki+V*An)*Gi,u[6]=(Tt*Kt-ht*hn-Dt*Qt)*Gi,u[7]=(Pe*hn-it*Kt+At*Qt)*Gi,u[8]=(G*_n-ee*Ki+_e*Cn)*Gi,u[9]=(x*Ki-p*_n-V*Cn)*Gi,u[10]=(ht*Li-Ct*Kt+Dt*Yt)*Gi,u[11]=(Ge*Kt-Pe*Li-At*Yt)*Gi,u[12]=(ee*An-G*Zi-le*Cn)*Gi,u[13]=(p*Zi-x*An+L*Cn)*Gi,u[14]=(Ct*Qt-ht*fi-Tt*Yt)*Gi,u[15]=(Pe*fi-Ge*Qt+it*Yt)*Gi,u):null},o.at=pd,o.au=nd,o.av=_d,o.aw=function(){const u={},a=ti.$version;for(const p in ti.$root){const x=ti.$root[p];if(x.required){let L=null;L=p==="version"?a:x.type==="array"?[]:{},L!=null&&(u[p]=L)}}return u},o.ax=kn,o.ay=zl,o.az=$t,o.b=function(u,a){const p=new Blob([new Uint8Array(u)],{type:"image/png"});createImageBitmap(p).then(x=>{a(null,x)}).catch(x=>{a(new Error(`Could not load image because of ${x.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})},o.b0=$n,o.b1=function(u,a){var p=u[0],x=u[1],L=u[2],V=u[3],G=u[4],ee=u[5],le=u[6],_e=u[7],Pe=u[8],Ge=u[9],it=u[10],At=u[11],ht=u[12],Ct=u[13],Tt=u[14],Dt=u[15],Yt=a[0],Qt=a[1],Kt=a[2],fi=a[3],Li=a[4],hn=a[5],Cn=a[6],An=a[7],Ki=a[8],Zi=a[9],_n=a[10],Ji=a[11],Gi=a[12],yn=a[13],xn=a[14],pr=a[15];return Math.abs(p-Yt)<=aA*Math.max(1,Math.abs(p),Math.abs(Yt))&&Math.abs(x-Qt)<=aA*Math.max(1,Math.abs(x),Math.abs(Qt))&&Math.abs(L-Kt)<=aA*Math.max(1,Math.abs(L),Math.abs(Kt))&&Math.abs(V-fi)<=aA*Math.max(1,Math.abs(V),Math.abs(fi))&&Math.abs(G-Li)<=aA*Math.max(1,Math.abs(G),Math.abs(Li))&&Math.abs(ee-hn)<=aA*Math.max(1,Math.abs(ee),Math.abs(hn))&&Math.abs(le-Cn)<=aA*Math.max(1,Math.abs(le),Math.abs(Cn))&&Math.abs(_e-An)<=aA*Math.max(1,Math.abs(_e),Math.abs(An))&&Math.abs(Pe-Ki)<=aA*Math.max(1,Math.abs(Pe),Math.abs(Ki))&&Math.abs(Ge-Zi)<=aA*Math.max(1,Math.abs(Ge),Math.abs(Zi))&&Math.abs(it-_n)<=aA*Math.max(1,Math.abs(it),Math.abs(_n))&&Math.abs(At-Ji)<=aA*Math.max(1,Math.abs(At),Math.abs(Ji))&&Math.abs(ht-Gi)<=aA*Math.max(1,Math.abs(ht),Math.abs(Gi))&&Math.abs(Ct-yn)<=aA*Math.max(1,Math.abs(Ct),Math.abs(yn))&&Math.abs(Tt-xn)<=aA*Math.max(1,Math.abs(Tt),Math.abs(xn))&&Math.abs(Dt-pr)<=aA*Math.max(1,Math.abs(Dt),Math.abs(pr))},o.b2=function(u,a){return u[0]=a[0],u[1]=a[1],u[2]=a[2],u[3]=a[3],u[4]=a[4],u[5]=a[5],u[6]=a[6],u[7]=a[7],u[8]=a[8],u[9]=a[9],u[10]=a[10],u[11]=a[11],u[12]=a[12],u[13]=a[13],u[14]=a[14],u[15]=a[15],u},o.b3=function(u,a,p){return u[0]=a[0]*p[0],u[1]=a[1]*p[1],u[2]=a[2]*p[2],u[3]=a[3]*p[3],u},o.b4=function(u,a){return u[0]*a[0]+u[1]*a[1]+u[2]*a[2]+u[3]*a[3]},o.b5=Gt,o.b6=cg,o.b7=Ag,o.b8=function(u,a,p,x,L){var V,G=1/Math.tan(a/2);return u[0]=G/p,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=G,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[11]=-1,u[12]=0,u[13]=0,u[15]=0,L!=null&&L!==1/0?(u[10]=(L+x)*(V=1/(x-L)),u[14]=2*L*x*V):(u[10]=-1,u[14]=-2*x),u},o.b9=function(u,a,p){var x=Math.sin(p),L=Math.cos(p),V=a[4],G=a[5],ee=a[6],le=a[7],_e=a[8],Pe=a[9],Ge=a[10],it=a[11];return a!==u&&(u[0]=a[0],u[1]=a[1],u[2]=a[2],u[3]=a[3],u[12]=a[12],u[13]=a[13],u[14]=a[14],u[15]=a[15]),u[4]=V*L+_e*x,u[5]=G*L+Pe*x,u[6]=ee*L+Ge*x,u[7]=le*L+it*x,u[8]=_e*L-V*x,u[9]=Pe*L-G*x,u[10]=Ge*L-ee*x,u[11]=it*L-le*x,u},o.bA=j,o.bB=X0,o.bC=Uo,o.bD=ns,o.ba=St,o.bb=yt,o.bc=function(u,a){return u[0]=a[0],u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=a[1],u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=a[2],u[11]=0,u[12]=0,u[13]=0,u[14]=0,u[15]=1,u},o.bd=class extends Z{},o.be=ud,o.bf=lg,o.bg=Cc,o.bi=Di,o.bj=function(u,a,p=!1){if(la===mu||la===_u||la===vu)throw new Error("setRTLTextPlugin cannot be called multiple times.");Go=mi.resolveURL(u),la=mu,HA=a,iu(),p||lr()},o.bk=nu,o.bl=function(u,a){const p={};for(let L=0;L<u.length;L++){const V=a&&a[u[L].id]||ha(u[L]);a&&(a[u[L].id]=V);let G=p[V];G||(G=p[V]=[]),G.push(u[L])}const x=[];for(const L in p)x.push(p[L]);return x},o.bm=un,o.bn=dd,o.bo=fg,o.bp=WA,o.bq=function(u){u.bucket.createArrays(),u.bucket.tilePixelRatio=ga/(512*u.bucket.overscaling),u.bucket.compareText={},u.bucket.iconsNeedLinear=!1;const a=u.bucket.layers[0],p=a.layout,x=a._unevaluatedLayout._values,L={layoutIconSize:x["icon-size"].possiblyEvaluate(new Jr(u.bucket.zoom+1),u.canonical),layoutTextSize:x["text-size"].possiblyEvaluate(new Jr(u.bucket.zoom+1),u.canonical),textMaxSize:x["text-size"].possiblyEvaluate(new Jr(18))};if(u.bucket.textSizeData.kind==="composite"){const{minZoom:_e,maxZoom:Pe}=u.bucket.textSizeData;L.compositeTextSizes=[x["text-size"].possiblyEvaluate(new Jr(_e),u.canonical),x["text-size"].possiblyEvaluate(new Jr(Pe),u.canonical)]}if(u.bucket.iconSizeData.kind==="composite"){const{minZoom:_e,maxZoom:Pe}=u.bucket.iconSizeData;L.compositeIconSizes=[x["icon-size"].possiblyEvaluate(new Jr(_e),u.canonical),x["icon-size"].possiblyEvaluate(new Jr(Pe),u.canonical)]}const V=p.get("text-line-height")*Ia,G=p.get("text-rotation-alignment")!=="viewport"&&p.get("symbol-placement")!=="point",ee=p.get("text-keep-upright"),le=p.get("text-size");for(const _e of u.bucket.features){const Pe=p.get("text-font").evaluate(_e,{},u.canonical).join(","),Ge=le.evaluate(_e,{},u.canonical),it=L.layoutTextSize.evaluate(_e,{},u.canonical),At=L.layoutIconSize.evaluate(_e,{},u.canonical),ht={horizontal:{},vertical:void 0},Ct=_e.text;let Tt,Dt=[0,0];if(Ct){const Kt=Ct.toString(),fi=p.get("text-letter-spacing").evaluate(_e,{},u.canonical)*Ia,Li=eu(Kt)?fi:0,hn=p.get("text-anchor").evaluate(_e,{},u.canonical),Cn=Tg(a,_e,u.canonical);if(!Cn){const Ji=p.get("text-radial-offset").evaluate(_e,{},u.canonical);Dt=Ji?Uh(hn,[Ji*Ia,lh]):p.get("text-offset").evaluate(_e,{},u.canonical).map(Gi=>Gi*Ia)}let An=G?"center":p.get("text-justify").evaluate(_e,{},u.canonical);const Ki=p.get("symbol-placement"),Zi=Ki==="point"?p.get("text-max-width").evaluate(_e,{},u.canonical)*Ia:0,_n=()=>{u.bucket.allowVerticalPlacement&&hl(Kt)&&(ht.vertical=Ff(Ct,u.glyphMap,u.glyphPositions,u.imagePositions,Pe,Zi,V,hn,"left",Li,Dt,o.ai.vertical,!0,Ki,it,Ge))};if(!G&&Cn){const Ji=new Set;if(An==="auto")for(let yn=0;yn<Cn.values.length;yn+=2)Ji.add(pd(Cn.values[yn]));else Ji.add(An);let Gi=!1;for(const yn of Ji)if(!ht.horizontal[yn])if(Gi)ht.horizontal[yn]=ht.horizontal[0];else{const xn=Ff(Ct,u.glyphMap,u.glyphPositions,u.imagePositions,Pe,Zi,V,"center",yn,Li,Dt,o.ai.horizontal,!1,Ki,it,Ge);xn&&(ht.horizontal[yn]=xn,Gi=xn.positionedLines.length===1)}_n()}else{An==="auto"&&(An=pd(hn));const Ji=Ff(Ct,u.glyphMap,u.glyphPositions,u.imagePositions,Pe,Zi,V,hn,An,Li,Dt,o.ai.horizontal,!1,Ki,it,Ge);Ji&&(ht.horizontal[An]=Ji),_n(),hl(Kt)&&G&&ee&&(ht.vertical=Ff(Ct,u.glyphMap,u.glyphPositions,u.imagePositions,Pe,Zi,V,hn,An,Li,Dt,o.ai.vertical,!1,Ki,it,Ge))}}let Yt=!1;if(_e.icon&&_e.icon.name){const Kt=u.imageMap[_e.icon.name];Kt&&(Tt=n_(u.imagePositions[_e.icon.name],p.get("icon-offset").evaluate(_e,{},u.canonical),p.get("icon-anchor").evaluate(_e,{},u.canonical)),Yt=!!Kt.sdf,u.bucket.sdfIcons===void 0?u.bucket.sdfIcons=Yt:u.bucket.sdfIcons!==Yt&&Me("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Kt.pixelRatio!==u.bucket.pixelRatio||p.get("icon-rotate").constantOr(1)!==0)&&(u.bucket.iconsNeedLinear=!0))}const Qt=kg(ht.horizontal)||ht.vertical;u.bucket.iconsInText=!!Qt&&Qt.iconsInText,(Qt||Tt)&&gd(u.bucket,_e,ht,Tt,u.imageMap,L,it,At,Dt,Yt,u.canonical)}u.showCollisionBoxes&&u.bucket.generateCollisionDebugBuffers()},o.br=j0,o.bs=kh,o.bt=Mo,o.bu=class{constructor(u){this._marks={start:[u.url,"start"].join("#"),end:[u.url,"end"].join("#"),measure:u.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let u=performance.getEntriesByName(this._marks.measure);return u.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),u=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),u}},o.bv=$0,o.bw=ju,o.bx=function(u,a,p,x,L){return k(this,void 0,void 0,function*(){if(ct())try{return yield di(u,a,p,x,L)}catch{}return function(V,G,ee,le,_e){const Pe=V.width,Ge=V.height;yi&&Ti||(yi=new OffscreenCanvas(Pe,Ge),Ti=yi.getContext("2d",{willReadFrequently:!0})),yi.width=Pe,yi.height=Ge,Ti.drawImage(V,0,0,Pe,Ge);const it=Ti.getImageData(G,ee,le,_e);return Ti.clearRect(0,0,Pe,Ge),it.data}(u,a,p,x,L)})},o.by=fd,o.bz=O,o.c=Wt,o.d=function(u,a){const p=new Image;p.onload=()=>{a(null,p),URL.revokeObjectURL(p.src),p.onload=null,window.requestAnimationFrame(()=>{p.src=ei})},p.onerror=()=>a(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const x=new Blob([new Uint8Array(u)],{type:"image/png"});p.src=u.byteLength?URL.createObjectURL(x):ei},o.e=Ve,o.f=function(u,a){return si(Ve(u,{type:"json"}),a)},o.g=Lt,o.h=mi,o.i=vt,o.j=sn,o.k=ki,o.l=Oi,o.m=si,o.n=function(u){return new $0(u).readFields(qp,[])},o.o=function(u,a,p){if(!u.length)return p(null,[]);let x=u.length;const L=new Array(u.length);let V=null;u.forEach((G,ee)=>{a(G,(le,_e)=>{le&&(V=le),L[ee]=_e,--x==0&&p(V,L)})})},o.p=jp,o.q=Jc,o.r=Wr,o.s=zi,o.t=cl,o.u=rn,o.v=ti,o.w=Me,o.x=Ol,o.y=fa,o.z=function([u,a,p]){return a+=90,a*=Math.PI/180,p*=Math.PI/180,{x:u*Math.cos(a)*Math.sin(p),y:u*Math.sin(a)*Math.sin(p),z:u*Math.cos(p)}}}),h(["./shared"],function(o){class k{constructor(Y){this.keyCache={},Y&&this.replace(Y)}replace(Y){this._layerConfigs={},this._layers={},this.update(Y,[])}update(Y,ne){for(const me of Y){this._layerConfigs[me.id]=me;const pe=this._layers[me.id]=o.aC(me);pe._featureFilter=o.a6(pe.filter),this.keyCache[me.id]&&delete this.keyCache[me.id]}for(const me of ne)delete this.keyCache[me],delete this._layerConfigs[me],delete this._layers[me];this.familiesBySource={};const he=o.bl(Object.values(this._layerConfigs),this.keyCache);for(const me of he){const pe=me.map(ge=>this._layers[ge.id]),Oe=pe[0];if(Oe.visibility==="none")continue;const ze=Oe.source||"";let Be=this.familiesBySource[ze];Be||(Be=this.familiesBySource[ze]={});const Ye=Oe.sourceLayer||"_geojsonTileLayer";let Xe=Be[Ye];Xe||(Xe=Be[Ye]=[]),Xe.push(pe)}}}class O{constructor(Y){const ne={},he=[];for(const ze in Y){const Be=Y[ze],Ye=ne[ze]={};for(const Xe in Be){const ge=Be[+Xe];if(!ge||ge.bitmap.width===0||ge.bitmap.height===0)continue;const Ee={x:0,y:0,w:ge.bitmap.width+2,h:ge.bitmap.height+2};he.push(Ee),Ye[Xe]={rect:Ee,metrics:ge.metrics}}}const{w:me,h:pe}=o.p(he),Oe=new o.q({width:me||1,height:pe||1});for(const ze in Y){const Be=Y[ze];for(const Ye in Be){const Xe=Be[+Ye];if(!Xe||Xe.bitmap.width===0||Xe.bitmap.height===0)continue;const ge=ne[ze][Ye].rect;o.q.copy(Xe.bitmap,Oe,{x:0,y:0},{x:ge.x+1,y:ge.y+1},Xe.bitmap)}}this.image=Oe,this.positions=ne}}o.bm("GlyphAtlas",O);class j{constructor(Y){this.tileID=new o.O(Y.tileID.overscaledZ,Y.tileID.wrap,Y.tileID.canonical.z,Y.tileID.canonical.x,Y.tileID.canonical.y),this.uid=Y.uid,this.zoom=Y.zoom,this.pixelRatio=Y.pixelRatio,this.tileSize=Y.tileSize,this.source=Y.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=Y.showCollisionBoxes,this.collectResourceTiming=!!Y.collectResourceTiming,this.returnDependencies=!!Y.returnDependencies,this.promoteId=Y.promoteId,this.inFlightDependencies=[],this.dependencySentinel=-1}parse(Y,ne,he,me,pe){this.status="parsing",this.data=Y,this.collisionBoxArray=new o.a3;const Oe=new o.bn(Object.keys(Y.layers).sort()),ze=new o.bo(this.tileID,this.promoteId);ze.bucketLayerIDs=[];const Be={},Ye={featureIndex:ze,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:he},Xe=ne.familiesBySource[this.source];for(const Vt in Xe){const qt=Y.layers[Vt];if(!qt)continue;qt.version===1&&o.w(`Vector tile source "${this.source}" layer "${Vt}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Ei=Oe.encode(Vt),Ai=[];for(let pi=0;pi<qt.length;pi++){const Rt=qt.feature(pi),Yi=ze.getId(Rt,Vt);Ai.push({feature:Rt,id:Yi,index:pi,sourceLayerIndex:Ei})}for(const pi of Xe[Vt]){const Rt=pi[0];Rt.source!==this.source&&o.w(`layer.source = ${Rt.source} does not equal this.source = ${this.source}`),Rt.minzoom&&this.zoom<Math.floor(Rt.minzoom)||Rt.maxzoom&&this.zoom>=Rt.maxzoom||Rt.visibility!=="none"&&(J(pi,this.zoom,he),(Be[Rt.id]=Rt.createBucket({index:ze.bucketLayerIDs.length,layers:pi,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Ei,sourceID:this.source})).populate(Ai,Ye,this.tileID.canonical),ze.bucketLayerIDs.push(pi.map(Yi=>Yi.id)))}}let ge,Ee,tt,pt;const n=o.aH(Ye.glyphDependencies,Vt=>Object.keys(Vt).map(Number));this.inFlightDependencies.forEach(Vt=>Vt==null?void 0:Vt.cancel()),this.inFlightDependencies=[];const ce=++this.dependencySentinel;Object.keys(n).length?this.inFlightDependencies.push(me.send("getGlyphs",{uid:this.uid,stacks:n,source:this.source,tileID:this.tileID,type:"glyphs"},(Vt,qt)=>{ce===this.dependencySentinel&&(ge||(ge=Vt,Ee=qt,ui.call(this)))})):Ee={};const Zt=Object.keys(Ye.iconDependencies);Zt.length?this.inFlightDependencies.push(me.send("getImages",{icons:Zt,source:this.source,tileID:this.tileID,type:"icons"},(Vt,qt)=>{ce===this.dependencySentinel&&(ge||(ge=Vt,tt=qt,ui.call(this)))})):tt={};const Jt=Object.keys(Ye.patternDependencies);function ui(){if(ge)return pe(ge);if(Ee&&tt&&pt){const Vt=new O(Ee),qt=new o.bp(tt,pt);for(const Ei in Be){const Ai=Be[Ei];Ai instanceof o.a4?(J(Ai.layers,this.zoom,he),o.bq({bucket:Ai,glyphMap:Ee,glyphPositions:Vt.positions,imageMap:tt,imagePositions:qt.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):Ai.hasPattern&&(Ai instanceof o.br||Ai instanceof o.bs||Ai instanceof o.bt)&&(J(Ai.layers,this.zoom,he),Ai.addFeatures(Ye,this.tileID.canonical,qt.patternPositions))}this.status="done",pe(null,{buckets:Object.values(Be).filter(Ei=>!Ei.isEmpty()),featureIndex:ze,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Vt.image,imageAtlas:qt,glyphMap:this.returnDependencies?Ee:null,iconMap:this.returnDependencies?tt:null,glyphPositions:this.returnDependencies?Vt.positions:null})}}Jt.length?this.inFlightDependencies.push(me.send("getImages",{icons:Jt,source:this.source,tileID:this.tileID,type:"patterns"},(Vt,qt)=>{ce===this.dependencySentinel&&(ge||(ge=Vt,pt=qt,ui.call(this)))})):pt={},ui.call(this)}}function J(ue,Y,ne){const he=new o.a8(Y);for(const me of ue)me.recalculate(he,ne)}function oe(ue,Y){const ne=o.l(ue.request,(he,me,pe,Oe)=>{if(he)Y(he);else if(me)try{const ze=new o.bw.VectorTile(new o.bv(me));Y(null,{vectorTile:ze,rawData:me,cacheControl:pe,expires:Oe})}catch(ze){const Be=new Uint8Array(me);let Ye=`Unable to parse the tile at ${ue.request.url}, `;Ye+=Be[0]===31&&Be[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${ze.messge}`,Y(new Error(Ye))}});return()=>{ne.cancel(),Y()}}class se{constructor(Y,ne,he,me){this.actor=Y,this.layerIndex=ne,this.availableImages=he,this.loadVectorData=me||oe,this.fetching={},this.loading={},this.loaded={}}loadTile(Y,ne){const he=Y.uid;this.loading||(this.loading={});const me=!!(Y&&Y.request&&Y.request.collectResourceTiming)&&new o.bu(Y.request),pe=this.loading[he]=new j(Y);pe.abort=this.loadVectorData(Y,(Oe,ze)=>{if(delete this.loading[he],Oe||!ze)return pe.status="done",this.loaded[he]=pe,ne(Oe);const Be=ze.rawData,Ye={};ze.expires&&(Ye.expires=ze.expires),ze.cacheControl&&(Ye.cacheControl=ze.cacheControl);const Xe={};if(me){const ge=me.finish();ge&&(Xe.resourceTiming=JSON.parse(JSON.stringify(ge)))}pe.vectorTile=ze.vectorTile,pe.parse(ze.vectorTile,this.layerIndex,this.availableImages,this.actor,(ge,Ee)=>{if(delete this.fetching[he],ge||!Ee)return ne(ge);ne(null,o.e({rawTileData:Be.slice(0)},Ee,Ye,Xe))}),this.loaded=this.loaded||{},this.loaded[he]=pe,this.fetching[he]={rawTileData:Be,cacheControl:Ye,resourceTiming:Xe}})}reloadTile(Y,ne){const he=this.loaded,me=Y.uid;if(he&&he[me]){const pe=he[me];pe.showCollisionBoxes=Y.showCollisionBoxes,pe.status==="parsing"?pe.parse(pe.vectorTile,this.layerIndex,this.availableImages,this.actor,(Oe,ze)=>{if(Oe||!ze)return ne(Oe,ze);let Be;if(this.fetching[me]){const{rawTileData:Ye,cacheControl:Xe,resourceTiming:ge}=this.fetching[me];delete this.fetching[me],Be=o.e({rawTileData:Ye.slice(0)},ze,Xe,ge)}else Be=ze;ne(null,Be)}):pe.status==="done"&&(pe.vectorTile?pe.parse(pe.vectorTile,this.layerIndex,this.availableImages,this.actor,ne):ne())}}abortTile(Y,ne){const he=this.loading,me=Y.uid;he&&he[me]&&he[me].abort&&(he[me].abort(),delete he[me]),ne()}removeTile(Y,ne){const he=this.loaded,me=Y.uid;he&&he[me]&&delete he[me],ne()}}class be{constructor(){this.loaded={}}loadTile(Y,ne){return o._(this,void 0,void 0,function*(){const{uid:he,encoding:me,rawImageData:pe,redFactor:Oe,greenFactor:ze,blueFactor:Be,baseShift:Ye}=Y,Xe=pe.width+2,ge=pe.height+2,Ee=o.a(pe)?new o.R({width:Xe,height:ge},yield o.bx(pe,-1,-1,Xe,ge)):pe,tt=new o.by(he,Ee,me,Oe,ze,Be,Ye);this.loaded=this.loaded||{},this.loaded[he]=tt,ne(null,tt)})}removeTile(Y){const ne=this.loaded,he=Y.uid;ne&&ne[he]&&delete ne[he]}}function qe(ue,Y){if(ue.length!==0){ke(ue[0],Y);for(var ne=1;ne<ue.length;ne++)ke(ue[ne],!Y)}}function ke(ue,Y){for(var ne=0,he=0,me=0,pe=ue.length,Oe=pe-1;me<pe;Oe=me++){var ze=(ue[me][0]-ue[Oe][0])*(ue[Oe][1]+ue[me][1]),Be=ne+ze;he+=Math.abs(ne)>=Math.abs(ze)?ne-Be+ze:ze-Be+ne,ne=Be}ne+he>=0!=!!Y&&ue.reverse()}var Qe=o.bz(function ue(Y,ne){var he,me=Y&&Y.type;if(me==="FeatureCollection")for(he=0;he<Y.features.length;he++)ue(Y.features[he],ne);else if(me==="GeometryCollection")for(he=0;he<Y.geometries.length;he++)ue(Y.geometries[he],ne);else if(me==="Feature")ue(Y.geometry,ne);else if(me==="Polygon")qe(Y.coordinates,ne);else if(me==="MultiPolygon")for(he=0;he<Y.coordinates.length;he++)qe(Y.coordinates[he],ne);return Y});const We=o.bw.VectorTileFeature.prototype.toGeoJSON;var ct={exports:{}},St=o.bA,yt=o.bw.VectorTileFeature,xe=Gt;function Gt(ue,Y){this.options=Y||{},this.features=ue,this.length=ue.length}function Ve(ue,Y){this.id=typeof ue.id=="number"?ue.id:void 0,this.type=ue.type,this.rawGeometry=ue.type===1?[ue.geometry]:ue.geometry,this.properties=ue.tags,this.extent=Y||4096}Gt.prototype.feature=function(ue){return new Ve(this.features[ue],this.options.extent)},Ve.prototype.loadGeometry=function(){var ue=this.rawGeometry;this.geometry=[];for(var Y=0;Y<ue.length;Y++){for(var ne=ue[Y],he=[],me=0;me<ne.length;me++)he.push(new St(ne[me][0],ne[me][1]));this.geometry.push(he)}return this.geometry},Ve.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var ue=this.geometry,Y=1/0,ne=-1/0,he=1/0,me=-1/0,pe=0;pe<ue.length;pe++)for(var Oe=ue[pe],ze=0;ze<Oe.length;ze++){var Be=Oe[ze];Y=Math.min(Y,Be.x),ne=Math.max(ne,Be.x),he=Math.min(he,Be.y),me=Math.max(me,Be.y)}return[Y,he,ne,me]},Ve.prototype.toGeoJSON=yt.prototype.toGeoJSON;var Je=o.bB,et=xe;function lt(ue){var Y=new Je;return function(ne,he){for(var me in ne.layers)he.writeMessage(3,ut,ne.layers[me])}(ue,Y),Y.finish()}function ut(ue,Y){var ne;Y.writeVarintField(15,ue.version||1),Y.writeStringField(1,ue.name||""),Y.writeVarintField(5,ue.extent||4096);var he={keys:[],values:[],keycache:{},valuecache:{}};for(ne=0;ne<ue.length;ne++)he.feature=ue.feature(ne),Y.writeMessage(2,Ke,he);var me=he.keys;for(ne=0;ne<me.length;ne++)Y.writeStringField(3,me[ne]);var pe=he.values;for(ne=0;ne<pe.length;ne++)Y.writeMessage(4,dt,pe[ne])}function Ke(ue,Y){var ne=ue.feature;ne.id!==void 0&&Y.writeVarintField(1,ne.id),Y.writeMessage(2,Me,ue),Y.writeVarintField(3,ne.type),Y.writeMessage(4,vt,ne)}function Me(ue,Y){var ne=ue.feature,he=ue.keys,me=ue.values,pe=ue.keycache,Oe=ue.valuecache;for(var ze in ne.properties){var Be=ne.properties[ze],Ye=pe[ze];if(Be!==null){Ye===void 0&&(he.push(ze),pe[ze]=Ye=he.length-1),Y.writeVarint(Ye);var Xe=typeof Be;Xe!=="string"&&Xe!=="boolean"&&Xe!=="number"&&(Be=JSON.stringify(Be));var ge=Xe+":"+Be,Ee=Oe[ge];Ee===void 0&&(me.push(Be),Oe[ge]=Ee=me.length-1),Y.writeVarint(Ee)}}}function Ze(ue,Y){return(Y<<3)+(7&ue)}function Fe(ue){return ue<<1^ue>>31}function vt(ue,Y){for(var ne=ue.loadGeometry(),he=ue.type,me=0,pe=0,Oe=ne.length,ze=0;ze<Oe;ze++){var Be=ne[ze],Ye=1;he===1&&(Ye=Be.length),Y.writeVarint(Ze(1,Ye));for(var Xe=he===3?Be.length-1:Be.length,ge=0;ge<Xe;ge++){ge===1&&he!==1&&Y.writeVarint(Ze(2,Xe-1));var Ee=Be[ge].x-me,tt=Be[ge].y-pe;Y.writeVarint(Fe(Ee)),Y.writeVarint(Fe(tt)),me+=Ee,pe+=tt}he===3&&Y.writeVarint(Ze(7,1))}}function dt(ue,Y){var ne=typeof ue;ne==="string"?Y.writeStringField(1,ue):ne==="boolean"?Y.writeBooleanField(7,ue):ne==="number"&&(ue%1!=0?Y.writeDoubleField(3,ue):ue<0?Y.writeSVarintField(6,ue):Y.writeVarintField(5,ue))}ct.exports=lt,ct.exports.fromVectorTileJs=lt,ct.exports.fromGeojsonVt=function(ue,Y){Y=Y||{};var ne={};for(var he in ue)ne[he]=new et(ue[he].features,Y),ne[he].name=he,ne[he].version=Y.version,ne[he].extent=Y.extent;return lt({layers:ne})},ct.exports.GeoJSONWrapper=et;var _t=o.bz(ct.exports);const ei={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:ue=>ue},di=Math.fround||(yi=new Float32Array(1),ue=>(yi[0]=+ue,yi[0]));var yi;const Ti=3,Vi=5,wi=6;class mi{constructor(Y){this.options=Object.assign(Object.create(ei),Y),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(Y){const{log:ne,minZoom:he,maxZoom:me}=this.options;ne&&console.time("total time");const pe=`prepare ${Y.length} points`;ne&&console.time(pe),this.points=Y;const Oe=[];for(let Be=0;Be<Y.length;Be++){const Ye=Y[Be];if(!Ye.geometry)continue;const[Xe,ge]=Ye.geometry.coordinates,Ee=di($t(Xe)),tt=di(Lt(ge));Oe.push(Ee,tt,1/0,Be,-1,1),this.options.reduce&&Oe.push(0)}let ze=this.trees[me+1]=this._createTree(Oe);ne&&console.timeEnd(pe);for(let Be=me;Be>=he;Be--){const Ye=+Date.now();ze=this.trees[Be]=this._createTree(this._cluster(ze,Be)),ne&&console.log("z%d: %d clusters in %dms",Be,ze.numItems,+Date.now()-Ye)}return ne&&console.timeEnd("total time"),this}getClusters(Y,ne){let he=((Y[0]+180)%360+360)%360-180;const me=Math.max(-90,Math.min(90,Y[1]));let pe=Y[2]===180?180:((Y[2]+180)%360+360)%360-180;const Oe=Math.max(-90,Math.min(90,Y[3]));if(Y[2]-Y[0]>=360)he=-180,pe=180;else if(he>pe){const ge=this.getClusters([he,me,180,Oe],ne),Ee=this.getClusters([-180,me,pe,Oe],ne);return ge.concat(Ee)}const ze=this.trees[this._limitZoom(ne)],Be=ze.range($t(he),Lt(Oe),$t(pe),Lt(me)),Ye=ze.data,Xe=[];for(const ge of Be){const Ee=this.stride*ge;Xe.push(Ye[Ee+Vi]>1?Wt(Ye,Ee,this.clusterProps):this.points[Ye[Ee+Ti]])}return Xe}getChildren(Y){const ne=this._getOriginId(Y),he=this._getOriginZoom(Y),me="No cluster with the specified id.",pe=this.trees[he];if(!pe)throw new Error(me);const Oe=pe.data;if(ne*this.stride>=Oe.length)throw new Error(me);const ze=this.options.radius/(this.options.extent*Math.pow(2,he-1)),Be=pe.within(Oe[ne*this.stride],Oe[ne*this.stride+1],ze),Ye=[];for(const Xe of Be){const ge=Xe*this.stride;Oe[ge+4]===Y&&Ye.push(Oe[ge+Vi]>1?Wt(Oe,ge,this.clusterProps):this.points[Oe[ge+Ti]])}if(Ye.length===0)throw new Error(me);return Ye}getLeaves(Y,ne,he){const me=[];return this._appendLeaves(me,Y,ne=ne||10,he=he||0,0),me}getTile(Y,ne,he){const me=this.trees[this._limitZoom(Y)],pe=Math.pow(2,Y),{extent:Oe,radius:ze}=this.options,Be=ze/Oe,Ye=(he-Be)/pe,Xe=(he+1+Be)/pe,ge={features:[]};return this._addTileFeatures(me.range((ne-Be)/pe,Ye,(ne+1+Be)/pe,Xe),me.data,ne,he,pe,ge),ne===0&&this._addTileFeatures(me.range(1-Be/pe,Ye,1,Xe),me.data,pe,he,pe,ge),ne===pe-1&&this._addTileFeatures(me.range(0,Ye,Be/pe,Xe),me.data,-1,he,pe,ge),ge.features.length?ge:null}getClusterExpansionZoom(Y){let ne=this._getOriginZoom(Y)-1;for(;ne<=this.options.maxZoom;){const he=this.getChildren(Y);if(ne++,he.length!==1)break;Y=he[0].properties.cluster_id}return ne}_appendLeaves(Y,ne,he,me,pe){const Oe=this.getChildren(ne);for(const ze of Oe){const Be=ze.properties;if(Be&&Be.cluster?pe+Be.point_count<=me?pe+=Be.point_count:pe=this._appendLeaves(Y,Be.cluster_id,he,me,pe):pe<me?pe++:Y.push(ze),Y.length===he)break}return pe}_createTree(Y){const ne=new o.av(Y.length/this.stride|0,this.options.nodeSize,Float32Array);for(let he=0;he<Y.length;he+=this.stride)ne.add(Y[he],Y[he+1]);return ne.finish(),ne.data=Y,ne}_addTileFeatures(Y,ne,he,me,pe,Oe){for(const ze of Y){const Be=ze*this.stride,Ye=ne[Be+Vi]>1;let Xe,ge,Ee;if(Ye)Xe=Di(ne,Be,this.clusterProps),ge=ne[Be],Ee=ne[Be+1];else{const n=this.points[ne[Be+Ti]];Xe=n.properties;const[ce,Zt]=n.geometry.coordinates;ge=$t(ce),Ee=Lt(Zt)}const tt={type:1,geometry:[[Math.round(this.options.extent*(ge*pe-he)),Math.round(this.options.extent*(Ee*pe-me))]],tags:Xe};let pt;pt=Ye||this.options.generateId?ne[Be+Ti]:this.points[ne[Be+Ti]].id,pt!==void 0&&(tt.id=pt),Oe.features.push(tt)}}_limitZoom(Y){return Math.max(this.options.minZoom,Math.min(Math.floor(+Y),this.options.maxZoom+1))}_cluster(Y,ne){const{radius:he,extent:me,reduce:pe,minPoints:Oe}=this.options,ze=he/(me*Math.pow(2,ne)),Be=Y.data,Ye=[],Xe=this.stride;for(let ge=0;ge<Be.length;ge+=Xe){if(Be[ge+2]<=ne)continue;Be[ge+2]=ne;const Ee=Be[ge],tt=Be[ge+1],pt=Y.within(Be[ge],Be[ge+1],ze),n=Be[ge+Vi];let ce=n;for(const Zt of pt){const Jt=Zt*Xe;Be[Jt+2]>ne&&(ce+=Be[Jt+Vi])}if(ce>n&&ce>=Oe){let Zt,Jt=Ee*n,ui=tt*n,Vt=-1;const qt=((ge/Xe|0)<<5)+(ne+1)+this.points.length;for(const Ei of pt){const Ai=Ei*Xe;if(Be[Ai+2]<=ne)continue;Be[Ai+2]=ne;const pi=Be[Ai+Vi];Jt+=Be[Ai]*pi,ui+=Be[Ai+1]*pi,Be[Ai+4]=qt,pe&&(Zt||(Zt=this._map(Be,ge,!0),Vt=this.clusterProps.length,this.clusterProps.push(Zt)),pe(Zt,this._map(Be,Ai)))}Be[ge+4]=qt,Ye.push(Jt/ce,ui/ce,1/0,qt,-1,ce),pe&&Ye.push(Vt)}else{for(let Zt=0;Zt<Xe;Zt++)Ye.push(Be[ge+Zt]);if(ce>1)for(const Zt of pt){const Jt=Zt*Xe;if(!(Be[Jt+2]<=ne)){Be[Jt+2]=ne;for(let ui=0;ui<Xe;ui++)Ye.push(Be[Jt+ui])}}}}return Ye}_getOriginId(Y){return Y-this.points.length>>5}_getOriginZoom(Y){return(Y-this.points.length)%32}_map(Y,ne,he){if(Y[ne+Vi]>1){const Oe=this.clusterProps[Y[ne+wi]];return he?Object.assign({},Oe):Oe}const me=this.points[Y[ne+Ti]].properties,pe=this.options.map(me);return he&&pe===me?Object.assign({},pe):pe}}function Wt(ue,Y,ne){return{type:"Feature",id:ue[Y+Ti],properties:Di(ue,Y,ne),geometry:{type:"Point",coordinates:[(he=ue[Y],360*(he-.5)),ni(ue[Y+1])]}};var he}function Di(ue,Y,ne){const he=ue[Y+Vi],me=he>=1e4?`${Math.round(he/1e3)}k`:he>=1e3?Math.round(he/100)/10+"k":he,pe=ue[Y+wi],Oe=pe===-1?{}:Object.assign({},ne[pe]);return Object.assign(Oe,{cluster:!0,cluster_id:ue[Y+Ti],point_count:he,point_count_abbreviated:me})}function $t(ue){return ue/360+.5}function Lt(ue){const Y=Math.sin(ue*Math.PI/180),ne=.5-.25*Math.log((1+Y)/(1-Y))/Math.PI;return ne<0?0:ne>1?1:ne}function ni(ue){const Y=(180-360*ue)*Math.PI/180;return 360*Math.atan(Math.exp(Y))/Math.PI-90}function si(ue,Y,ne,he){for(var me,pe=he,Oe=ne-Y>>1,ze=ne-Y,Be=ue[Y],Ye=ue[Y+1],Xe=ue[ne],ge=ue[ne+1],Ee=Y+3;Ee<ne;Ee+=3){var tt=Oi(ue[Ee],ue[Ee+1],Be,Ye,Xe,ge);if(tt>pe)me=Ee,pe=tt;else if(tt===pe){var pt=Math.abs(Ee-Oe);pt<ze&&(me=Ee,ze=pt)}}pe>he&&(me-Y>3&&si(ue,Y,me,he),ue[me+2]=pe,ne-me>3&&si(ue,me,ne,he))}function Oi(ue,Y,ne,he,me,pe){var Oe=me-ne,ze=pe-he;if(Oe!==0||ze!==0){var Be=((ue-ne)*Oe+(Y-he)*ze)/(Oe*Oe+ze*ze);Be>1?(ne=me,he=pe):Be>0&&(ne+=Oe*Be,he+=ze*Be)}return(Oe=ue-ne)*Oe+(ze=Y-he)*ze}function zi(ue,Y,ne,he){var me={id:ue===void 0?null:ue,type:Y,geometry:ne,tags:he,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(pe){var Oe=pe.geometry,ze=pe.type;if(ze==="Point"||ze==="MultiPoint"||ze==="LineString")oi(pe,Oe);else if(ze==="Polygon"||ze==="MultiLineString")for(var Be=0;Be<Oe.length;Be++)oi(pe,Oe[Be]);else if(ze==="MultiPolygon")for(Be=0;Be<Oe.length;Be++)for(var Ye=0;Ye<Oe[Be].length;Ye++)oi(pe,Oe[Be][Ye])}(me),me}function oi(ue,Y){for(var ne=0;ne<Y.length;ne+=3)ue.minX=Math.min(ue.minX,Y[ne]),ue.minY=Math.min(ue.minY,Y[ne+1]),ue.maxX=Math.max(ue.maxX,Y[ne]),ue.maxY=Math.max(ue.maxY,Y[ne+1])}function $i(ue,Y,ne,he){if(Y.geometry){var me=Y.geometry.coordinates,pe=Y.geometry.type,Oe=Math.pow(ne.tolerance/((1<<ne.maxZoom)*ne.extent),2),ze=[],Be=Y.id;if(ne.promoteId?Be=Y.properties[ne.promoteId]:ne.generateId&&(Be=he||0),pe==="Point")ki(me,ze);else if(pe==="MultiPoint")for(var Ye=0;Ye<me.length;Ye++)ki(me[Ye],ze);else if(pe==="LineString")sn(me,ze,Oe,!1);else if(pe==="MultiLineString"){if(ne.lineMetrics){for(Ye=0;Ye<me.length;Ye++)sn(me[Ye],ze=[],Oe,!1),ue.push(zi(Be,"LineString",ze,Y.properties));return}ar(me,ze,Oe,!1)}else if(pe==="Polygon")ar(me,ze,Oe,!0);else{if(pe!=="MultiPolygon"){if(pe==="GeometryCollection"){for(Ye=0;Ye<Y.geometry.geometries.length;Ye++)$i(ue,{id:Be,geometry:Y.geometry.geometries[Ye],properties:Y.properties},ne,he);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Ye=0;Ye<me.length;Ye++){var Xe=[];ar(me[Ye],Xe,Oe,!0),ze.push(Xe)}}ue.push(zi(Be,pe,ze,Y.properties))}}function ki(ue,Y){Y.push(ti(ue[0])),Y.push(Wi(ue[1])),Y.push(0)}function sn(ue,Y,ne,he){for(var me,pe,Oe=0,ze=0;ze<ue.length;ze++){var Be=ti(ue[ze][0]),Ye=Wi(ue[ze][1]);Y.push(Be),Y.push(Ye),Y.push(0),ze>0&&(Oe+=he?(me*Ye-Be*pe)/2:Math.sqrt(Math.pow(Be-me,2)+Math.pow(Ye-pe,2))),me=Be,pe=Ye}var Xe=Y.length-3;Y[2]=1,si(Y,0,Xe,ne),Y[Xe+2]=1,Y.size=Math.abs(Oe),Y.start=0,Y.end=Y.size}function ar(ue,Y,ne,he){for(var me=0;me<ue.length;me++){var pe=[];sn(ue[me],pe,ne,he),Y.push(pe)}}function ti(ue){return ue/360+.5}function Wi(ue){var Y=Math.sin(ue*Math.PI/180),ne=.5-.25*Math.log((1+Y)/(1-Y))/Math.PI;return ne<0?0:ne>1?1:ne}function ir(ue,Y,ne,he,me,pe,Oe,ze){if(he/=Y,pe>=(ne/=Y)&&Oe<he)return ue;if(Oe<ne||pe>=he)return null;for(var Be=[],Ye=0;Ye<ue.length;Ye++){var Xe=ue[Ye],ge=Xe.geometry,Ee=Xe.type,tt=me===0?Xe.minX:Xe.minY,pt=me===0?Xe.maxX:Xe.maxY;if(tt>=ne&&pt<he)Be.push(Xe);else if(!(pt<ne||tt>=he)){var n=[];if(Ee==="Point"||Ee==="MultiPoint")gn(ge,n,ne,he,me);else if(Ee==="LineString")kn(ge,n,ne,he,me,!1,ze.lineMetrics);else if(Ee==="MultiLineString")d(ge,n,ne,he,me,!1);else if(Ee==="Polygon")d(ge,n,ne,he,me,!0);else if(Ee==="MultiPolygon")for(var ce=0;ce<ge.length;ce++){var Zt=[];d(ge[ce],Zt,ne,he,me,!0),Zt.length&&n.push(Zt)}if(n.length){if(ze.lineMetrics&&Ee==="LineString"){for(ce=0;ce<n.length;ce++)Be.push(zi(Xe.id,Ee,n[ce],Xe.tags));continue}Ee!=="LineString"&&Ee!=="MultiLineString"||(n.length===1?(Ee="LineString",n=n[0]):Ee="MultiLineString"),Ee!=="Point"&&Ee!=="MultiPoint"||(Ee=n.length===3?"Point":"MultiPoint"),Be.push(zi(Xe.id,Ee,n,Xe.tags))}}}return Be.length?Be:null}function gn(ue,Y,ne,he,me){for(var pe=0;pe<ue.length;pe+=3){var Oe=ue[pe+me];Oe>=ne&&Oe<=he&&(Y.push(ue[pe]),Y.push(ue[pe+1]),Y.push(ue[pe+2]))}}function kn(ue,Y,ne,he,me,pe,Oe){for(var ze,Be,Ye=an(ue),Xe=me===0?D:U,ge=ue.start,Ee=0;Ee<ue.length-3;Ee+=3){var tt=ue[Ee],pt=ue[Ee+1],n=ue[Ee+2],ce=ue[Ee+3],Zt=ue[Ee+4],Jt=me===0?tt:pt,ui=me===0?ce:Zt,Vt=!1;Oe&&(ze=Math.sqrt(Math.pow(tt-ce,2)+Math.pow(pt-Zt,2))),Jt<ne?ui>ne&&(Be=Xe(Ye,tt,pt,ce,Zt,ne),Oe&&(Ye.start=ge+ze*Be)):Jt>he?ui<he&&(Be=Xe(Ye,tt,pt,ce,Zt,he),Oe&&(Ye.start=ge+ze*Be)):y(Ye,tt,pt,n),ui<ne&&Jt>=ne&&(Be=Xe(Ye,tt,pt,ce,Zt,ne),Vt=!0),ui>he&&Jt<=he&&(Be=Xe(Ye,tt,pt,ce,Zt,he),Vt=!0),!pe&&Vt&&(Oe&&(Ye.end=ge+ze*Be),Y.push(Ye),Ye=an(ue)),Oe&&(ge+=ze)}var qt=ue.length-3;tt=ue[qt],pt=ue[qt+1],n=ue[qt+2],(Jt=me===0?tt:pt)>=ne&&Jt<=he&&y(Ye,tt,pt,n),qt=Ye.length-3,pe&&qt>=3&&(Ye[qt]!==Ye[0]||Ye[qt+1]!==Ye[1])&&y(Ye,Ye[0],Ye[1],Ye[2]),Ye.length&&Y.push(Ye)}function an(ue){var Y=[];return Y.size=ue.size,Y.start=ue.start,Y.end=ue.end,Y}function d(ue,Y,ne,he,me,pe){for(var Oe=0;Oe<ue.length;Oe++)kn(ue[Oe],Y,ne,he,me,pe,!1)}function y(ue,Y,ne,he){ue.push(Y),ue.push(ne),ue.push(he)}function D(ue,Y,ne,he,me,pe){var Oe=(pe-Y)/(he-Y);return ue.push(pe),ue.push(ne+(me-ne)*Oe),ue.push(1),Oe}function U(ue,Y,ne,he,me,pe){var Oe=(pe-ne)/(me-ne);return ue.push(Y+(he-Y)*Oe),ue.push(pe),ue.push(1),Oe}function Q(ue,Y){for(var ne=[],he=0;he<ue.length;he++){var me,pe=ue[he],Oe=pe.type;if(Oe==="Point"||Oe==="MultiPoint"||Oe==="LineString")me=K(pe.geometry,Y);else if(Oe==="MultiLineString"||Oe==="Polygon"){me=[];for(var ze=0;ze<pe.geometry.length;ze++)me.push(K(pe.geometry[ze],Y))}else if(Oe==="MultiPolygon")for(me=[],ze=0;ze<pe.geometry.length;ze++){for(var Be=[],Ye=0;Ye<pe.geometry[ze].length;Ye++)Be.push(K(pe.geometry[ze][Ye],Y));me.push(Be)}ne.push(zi(pe.id,Oe,me,pe.tags))}return ne}function K(ue,Y){var ne=[];ne.size=ue.size,ue.start!==void 0&&(ne.start=ue.start,ne.end=ue.end);for(var he=0;he<ue.length;he+=3)ne.push(ue[he]+Y,ue[he+1],ue[he+2]);return ne}function ie(ue,Y){if(ue.transformed)return ue;var ne,he,me,pe=1<<ue.z,Oe=ue.x,ze=ue.y;for(ne=0;ne<ue.features.length;ne++){var Be=ue.features[ne],Ye=Be.geometry,Xe=Be.type;if(Be.geometry=[],Xe===1)for(he=0;he<Ye.length;he+=2)Be.geometry.push(Ae(Ye[he],Ye[he+1],Y,pe,Oe,ze));else for(he=0;he<Ye.length;he++){var ge=[];for(me=0;me<Ye[he].length;me+=2)ge.push(Ae(Ye[he][me],Ye[he][me+1],Y,pe,Oe,ze));Be.geometry.push(ge)}}return ue.transformed=!0,ue}function Ae(ue,Y,ne,he,me,pe){return[Math.round(ne*(ue*he-me)),Math.round(ne*(Y*he-pe))]}function fe(ue,Y,ne,he,me){for(var pe=Y===me.maxZoom?0:me.tolerance/((1<<Y)*me.extent),Oe={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:ne,y:he,z:Y,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},ze=0;ze<ue.length;ze++){Oe.numFeatures++,ye(Oe,ue[ze],pe,me);var Be=ue[ze].minX,Ye=ue[ze].minY,Xe=ue[ze].maxX,ge=ue[ze].maxY;Be<Oe.minX&&(Oe.minX=Be),Ye<Oe.minY&&(Oe.minY=Ye),Xe>Oe.maxX&&(Oe.maxX=Xe),ge>Oe.maxY&&(Oe.maxY=ge)}return Oe}function ye(ue,Y,ne,he){var me=Y.geometry,pe=Y.type,Oe=[];if(pe==="Point"||pe==="MultiPoint")for(var ze=0;ze<me.length;ze+=3)Oe.push(me[ze]),Oe.push(me[ze+1]),ue.numPoints++,ue.numSimplified++;else if(pe==="LineString")Le(Oe,me,ue,ne,!1,!1);else if(pe==="MultiLineString"||pe==="Polygon")for(ze=0;ze<me.length;ze++)Le(Oe,me[ze],ue,ne,pe==="Polygon",ze===0);else if(pe==="MultiPolygon")for(var Be=0;Be<me.length;Be++){var Ye=me[Be];for(ze=0;ze<Ye.length;ze++)Le(Oe,Ye[ze],ue,ne,!0,ze===0)}if(Oe.length){var Xe=Y.tags||null;if(pe==="LineString"&&he.lineMetrics){for(var ge in Xe={},Y.tags)Xe[ge]=Y.tags[ge];Xe.mapbox_clip_start=me.start/me.size,Xe.mapbox_clip_end=me.end/me.size}var Ee={geometry:Oe,type:pe==="Polygon"||pe==="MultiPolygon"?3:pe==="LineString"||pe==="MultiLineString"?2:1,tags:Xe};Y.id!==null&&(Ee.id=Y.id),ue.features.push(Ee)}}function Le(ue,Y,ne,he,me,pe){var Oe=he*he;if(he>0&&Y.size<(me?Oe:he))ne.numPoints+=Y.length/3;else{for(var ze=[],Be=0;Be<Y.length;Be+=3)(he===0||Y[Be+2]>Oe)&&(ne.numSimplified++,ze.push(Y[Be]),ze.push(Y[Be+1])),ne.numPoints++;me&&function(Ye,Xe){for(var ge=0,Ee=0,tt=Ye.length,pt=tt-2;Ee<tt;pt=Ee,Ee+=2)ge+=(Ye[Ee]-Ye[pt])*(Ye[Ee+1]+Ye[pt+1]);if(ge>0===Xe)for(Ee=0,tt=Ye.length;Ee<tt/2;Ee+=2){var n=Ye[Ee],ce=Ye[Ee+1];Ye[Ee]=Ye[tt-2-Ee],Ye[Ee+1]=Ye[tt-1-Ee],Ye[tt-2-Ee]=n,Ye[tt-1-Ee]=ce}}(ze,pe),ue.push(ze)}}function we(ue,Y){var ne=(Y=this.options=function(me,pe){for(var Oe in pe)me[Oe]=pe[Oe];return me}(Object.create(this.options),Y)).debug;if(ne&&console.time("preprocess data"),Y.maxZoom<0||Y.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Y.promoteId&&Y.generateId)throw new Error("promoteId and generateId cannot be used together.");var he=function(me,pe){var Oe=[];if(me.type==="FeatureCollection")for(var ze=0;ze<me.features.length;ze++)$i(Oe,me.features[ze],pe,ze);else $i(Oe,me.type==="Feature"?me:{geometry:me},pe);return Oe}(ue,Y);this.tiles={},this.tileCoords=[],ne&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Y.indexMaxZoom,Y.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),he=function(me,pe){var Oe=pe.buffer/pe.extent,ze=me,Be=ir(me,1,-1-Oe,Oe,0,-1,2,pe),Ye=ir(me,1,1-Oe,2+Oe,0,-1,2,pe);return(Be||Ye)&&(ze=ir(me,1,-Oe,1+Oe,0,-1,2,pe)||[],Be&&(ze=Q(Be,1).concat(ze)),Ye&&(ze=ze.concat(Q(Ye,-1)))),ze}(he,Y),he.length&&this.splitTile(he,0,0,0),ne&&(he.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Te(ue,Y,ne){return 32*((1<<ue)*ne+Y)+ue}function Ce(ue,Y){return Y?ue.properties[Y]:ue.id}function je(ue,Y){if(ue==null)return!0;if(ue.type==="Feature")return Ce(ue,Y)!=null;if(ue.type==="FeatureCollection"){const ne=new Set;for(const he of ue.features){const me=Ce(he,Y);if(me==null||ne.has(me))return!1;ne.add(me)}return!0}return!1}function Ne(ue,Y){const ne=new Map;if(ue!=null)if(ue.type==="Feature")ne.set(Ce(ue,Y),ue);else for(const he of ue.features)ne.set(Ce(he,Y),he);return ne}we.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},we.prototype.splitTile=function(ue,Y,ne,he,me,pe,Oe){for(var ze=[ue,Y,ne,he],Be=this.options,Ye=Be.debug;ze.length;){he=ze.pop(),ne=ze.pop(),Y=ze.pop(),ue=ze.pop();var Xe=1<<Y,ge=Te(Y,ne,he),Ee=this.tiles[ge];if(!Ee&&(Ye>1&&console.time("creation"),Ee=this.tiles[ge]=fe(ue,Y,ne,he,Be),this.tileCoords.push({z:Y,x:ne,y:he}),Ye)){Ye>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Y,ne,he,Ee.numFeatures,Ee.numPoints,Ee.numSimplified),console.timeEnd("creation"));var tt="z"+Y;this.stats[tt]=(this.stats[tt]||0)+1,this.total++}if(Ee.source=ue,me){if(Y===Be.maxZoom||Y===me)continue;var pt=1<<me-Y;if(ne!==Math.floor(pe/pt)||he!==Math.floor(Oe/pt))continue}else if(Y===Be.indexMaxZoom||Ee.numPoints<=Be.indexMaxPoints)continue;if(Ee.source=null,ue.length!==0){Ye>1&&console.time("clipping");var n,ce,Zt,Jt,ui,Vt,qt=.5*Be.buffer/Be.extent,Ei=.5-qt,Ai=.5+qt,pi=1+qt;n=ce=Zt=Jt=null,ui=ir(ue,Xe,ne-qt,ne+Ai,0,Ee.minX,Ee.maxX,Be),Vt=ir(ue,Xe,ne+Ei,ne+pi,0,Ee.minX,Ee.maxX,Be),ue=null,ui&&(n=ir(ui,Xe,he-qt,he+Ai,1,Ee.minY,Ee.maxY,Be),ce=ir(ui,Xe,he+Ei,he+pi,1,Ee.minY,Ee.maxY,Be),ui=null),Vt&&(Zt=ir(Vt,Xe,he-qt,he+Ai,1,Ee.minY,Ee.maxY,Be),Jt=ir(Vt,Xe,he+Ei,he+pi,1,Ee.minY,Ee.maxY,Be),Vt=null),Ye>1&&console.timeEnd("clipping"),ze.push(n||[],Y+1,2*ne,2*he),ze.push(ce||[],Y+1,2*ne,2*he+1),ze.push(Zt||[],Y+1,2*ne+1,2*he),ze.push(Jt||[],Y+1,2*ne+1,2*he+1)}}},we.prototype.getTile=function(ue,Y,ne){var he=this.options,me=he.extent,pe=he.debug;if(ue<0||ue>24)return null;var Oe=1<<ue,ze=Te(ue,Y=(Y%Oe+Oe)%Oe,ne);if(this.tiles[ze])return ie(this.tiles[ze],me);pe>1&&console.log("drilling down to z%d-%d-%d",ue,Y,ne);for(var Be,Ye=ue,Xe=Y,ge=ne;!Be&&Ye>0;)Ye--,Xe=Math.floor(Xe/2),ge=Math.floor(ge/2),Be=this.tiles[Te(Ye,Xe,ge)];return Be&&Be.source?(pe>1&&console.log("found parent tile z%d-%d-%d",Ye,Xe,ge),pe>1&&console.time("drilling down"),this.splitTile(Be.source,Ye,Xe,ge,ue,Y,ne),pe>1&&console.timeEnd("drilling down"),this.tiles[ze]?ie(this.tiles[ze],me):null):null};class Ue extends se{constructor(Y,ne,he,me){super(Y,ne,he),this._dataUpdateable=new Map,this.loadGeoJSON=(pe,Oe)=>{const{promoteId:ze}=pe;if(pe.request)return o.f(pe.request,(Be,Ye,Xe,ge)=>{this._dataUpdateable=je(Ye,ze)?Ne(Ye,ze):void 0,Oe(Be,Ye,Xe,ge)});if(typeof pe.data=="string")try{const Be=JSON.parse(pe.data);this._dataUpdateable=je(Be,ze)?Ne(Be,ze):void 0,Oe(null,Be)}catch{Oe(new Error(`Input data given to '${pe.source}' is not a valid GeoJSON object.`))}else pe.dataDiff?this._dataUpdateable?(function(Be,Ye,Xe){var ge,Ee,tt,pt;if(Ye.removeAll&&Be.clear(),Ye.remove)for(const n of Ye.remove)Be.delete(n);if(Ye.add)for(const n of Ye.add){const ce=Ce(n,Xe);ce!=null&&Be.set(ce,n)}if(Ye.update)for(const n of Ye.update){let ce=Be.get(n.id);if(ce==null)continue;const Zt=!n.removeAllProperties&&(((ge=n.removeProperties)===null||ge===void 0?void 0:ge.length)>0||((Ee=n.addOrUpdateProperties)===null||Ee===void 0?void 0:Ee.length)>0);if((n.newGeometry||n.removeAllProperties||Zt)&&(ce=Object.assign({},ce),Be.set(n.id,ce),Zt&&(ce.properties=Object.assign({},ce.properties))),n.newGeometry&&(ce.geometry=n.newGeometry),n.removeAllProperties)ce.properties={};else if(((tt=n.removeProperties)===null||tt===void 0?void 0:tt.length)>0)for(const Jt of n.removeProperties)Object.prototype.hasOwnProperty.call(ce.properties,Jt)&&delete ce.properties[Jt];if(((pt=n.addOrUpdateProperties)===null||pt===void 0?void 0:pt.length)>0)for(const{key:Jt,value:ui}of n.addOrUpdateProperties)ce.properties[Jt]=ui}}(this._dataUpdateable,pe.dataDiff,ze),Oe(null,{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())})):Oe(new Error(`Cannot update existing geojson data in ${pe.source}`)):Oe(new Error(`Input data given to '${pe.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}},this.loadVectorData=this.loadGeoJSONTile,me&&(this.loadGeoJSON=me)}loadGeoJSONTile(Y,ne){const he=Y.tileID.canonical;if(!this._geoJSONIndex)return ne(null,null);const me=this._geoJSONIndex.getTile(he.z,he.x,he.y);if(!me)return ne(null,null);const pe=new class{constructor(ze){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=o.N,this.length=ze.length,this._features=ze}feature(ze){return new class{constructor(Be){this._feature=Be,this.extent=o.N,this.type=Be.type,this.properties=Be.tags,"id"in Be&&!isNaN(Be.id)&&(this.id=parseInt(Be.id,10))}loadGeometry(){if(this._feature.type===1){const Be=[];for(const Ye of this._feature.geometry)Be.push([new o.P(Ye[0],Ye[1])]);return Be}{const Be=[];for(const Ye of this._feature.geometry){const Xe=[];for(const ge of Ye)Xe.push(new o.P(ge[0],ge[1]));Be.push(Xe)}return Be}}toGeoJSON(Be,Ye,Xe){return We.call(this,Be,Ye,Xe)}}(this._features[ze])}}(me.features);let Oe=_t(pe);Oe.byteOffset===0&&Oe.byteLength===Oe.buffer.byteLength||(Oe=new Uint8Array(Oe)),ne(null,{vectorTile:pe,rawData:Oe.buffer})}loadData(Y,ne){var he;(he=this._pendingRequest)===null||he===void 0||he.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const me=!!(Y&&Y.request&&Y.request.collectResourceTiming)&&new o.bu(Y.request);this._pendingCallback=ne,this._pendingRequest=this.loadGeoJSON(Y,(pe,Oe)=>{if(delete this._pendingCallback,delete this._pendingRequest,pe||!Oe)return ne(pe);if(typeof Oe!="object")return ne(new Error(`Input data given to '${Y.source}' is not a valid GeoJSON object.`));{Qe(Oe,!0);try{if(Y.filter){const Be=o.bC(Y.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Be.result==="error")throw new Error(Be.value.map(Xe=>`${Xe.key}: ${Xe.message}`).join(", "));Oe={type:"FeatureCollection",features:Oe.features.filter(Xe=>Be.value.evaluate({zoom:0},Xe))}}this._geoJSONIndex=Y.cluster?new mi(function({superclusterOptions:Be,clusterProperties:Ye}){if(!Ye||!Be)return Be;const Xe={},ge={},Ee={accumulated:null,zoom:0},tt={properties:null},pt=Object.keys(Ye);for(const n of pt){const[ce,Zt]=Ye[n],Jt=o.bC(Zt),ui=o.bC(typeof ce=="string"?[ce,["accumulated"],["get",n]]:ce);Xe[n]=Jt.value,ge[n]=ui.value}return Be.map=n=>{tt.properties=n;const ce={};for(const Zt of pt)ce[Zt]=Xe[Zt].evaluate(Ee,tt);return ce},Be.reduce=(n,ce)=>{tt.properties=ce;for(const Zt of pt)Ee.accumulated=n[Zt],n[Zt]=ge[Zt].evaluate(Ee,tt)},Be}(Y)).load(Oe.features):function(Be,Ye){return new we(Be,Ye)}(Oe,Y.geojsonVtOptions)}catch(Be){return ne(Be)}this.loaded={};const ze={};if(me){const Be=me.finish();Be&&(ze.resourceTiming={},ze.resourceTiming[Y.source]=JSON.parse(JSON.stringify(Be)))}ne(null,ze)}})}reloadTile(Y,ne){const he=this.loaded;return he&&he[Y.uid]?super.reloadTile(Y,ne):this.loadTile(Y,ne)}removeSource(Y,ne){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),ne()}getClusterExpansionZoom(Y,ne){try{ne(null,this._geoJSONIndex.getClusterExpansionZoom(Y.clusterId))}catch(he){ne(he)}}getClusterChildren(Y,ne){try{ne(null,this._geoJSONIndex.getChildren(Y.clusterId))}catch(he){ne(he)}}getClusterLeaves(Y,ne){try{ne(null,this._geoJSONIndex.getLeaves(Y.clusterId,Y.limit,Y.offset))}catch(he){ne(he)}}}class de{constructor(Y){this.self=Y,this.actor=new o.C(Y,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:se,geojson:Ue},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(ne,he)=>{if(this.workerSourceTypes[ne])throw new Error(`Worker source with name "${ne}" already registered.`);this.workerSourceTypes[ne]=he},this.self.registerRTLTextPlugin=ne=>{if(o.bD.isParsed())throw new Error("RTL text plugin already registered.");o.bD.applyArabicShaping=ne.applyArabicShaping,o.bD.processBidirectionalText=ne.processBidirectionalText,o.bD.processStyledBidirectionalText=ne.processStyledBidirectionalText}}setReferrer(Y,ne){this.referrer=ne}setImages(Y,ne,he){this.availableImages[Y]=ne;for(const me in this.workerSources[Y]){const pe=this.workerSources[Y][me];for(const Oe in pe)pe[Oe].availableImages=ne}he()}setLayers(Y,ne,he){this.getLayerIndex(Y).replace(ne),he()}updateLayers(Y,ne,he){this.getLayerIndex(Y).update(ne.layers,ne.removedIds),he()}loadTile(Y,ne,he){this.getWorkerSource(Y,ne.type,ne.source).loadTile(ne,he)}loadDEMTile(Y,ne,he){this.getDEMWorkerSource(Y,ne.source).loadTile(ne,he)}reloadTile(Y,ne,he){this.getWorkerSource(Y,ne.type,ne.source).reloadTile(ne,he)}abortTile(Y,ne,he){this.getWorkerSource(Y,ne.type,ne.source).abortTile(ne,he)}removeTile(Y,ne,he){this.getWorkerSource(Y,ne.type,ne.source).removeTile(ne,he)}removeDEMTile(Y,ne){this.getDEMWorkerSource(Y,ne.source).removeTile(ne)}removeSource(Y,ne,he){if(!this.workerSources[Y]||!this.workerSources[Y][ne.type]||!this.workerSources[Y][ne.type][ne.source])return;const me=this.workerSources[Y][ne.type][ne.source];delete this.workerSources[Y][ne.type][ne.source],me.removeSource!==void 0?me.removeSource(ne,he):he()}loadWorkerSource(Y,ne,he){try{this.self.importScripts(ne.url),he()}catch(me){he(me.toString())}}syncRTLPluginState(Y,ne,he){try{o.bD.setState(ne);const me=o.bD.getPluginURL();if(o.bD.isLoaded()&&!o.bD.isParsed()&&me!=null){this.self.importScripts(me);const pe=o.bD.isParsed();he(pe?void 0:new Error(`RTL Text Plugin failed to import scripts from ${me}`),pe)}}catch(me){he(me.toString())}}getAvailableImages(Y){let ne=this.availableImages[Y];return ne||(ne=[]),ne}getLayerIndex(Y){let ne=this.layerIndexes[Y];return ne||(ne=this.layerIndexes[Y]=new k),ne}getWorkerSource(Y,ne,he){return this.workerSources[Y]||(this.workerSources[Y]={}),this.workerSources[Y][ne]||(this.workerSources[Y][ne]={}),this.workerSources[Y][ne][he]||(this.workerSources[Y][ne][he]=new this.workerSourceTypes[ne]({send:(me,pe,Oe)=>{this.actor.send(me,pe,Oe,Y)}},this.getLayerIndex(Y),this.getAvailableImages(Y))),this.workerSources[Y][ne][he]}getDEMWorkerSource(Y,ne){return this.demWorkerSources[Y]||(this.demWorkerSources[Y]={}),this.demWorkerSources[Y][ne]||(this.demWorkerSources[Y][ne]=new be),this.demWorkerSources[Y][ne]}}return o.i()&&(self.worker=new de(self)),de}),h(["./shared"],function(o){var k="3.6.2";class O{static testProp(s){if(!O.docStyle)return s[0];for(let g=0;g<s.length;g++)if(s[g]in O.docStyle)return s[g];return s[0]}static create(s,g,I){const M=window.document.createElement(s);return g!==void 0&&(M.className=g),I&&I.appendChild(M),M}static createNS(s,g){return window.document.createElementNS(s,g)}static disableDrag(){O.docStyle&&O.selectProp&&(O.userSelect=O.docStyle[O.selectProp],O.docStyle[O.selectProp]="none")}static enableDrag(){O.docStyle&&O.selectProp&&(O.docStyle[O.selectProp]=O.userSelect)}static setTransform(s,g){s.style[O.transformProp]=g}static addEventListener(s,g,I,M={}){s.addEventListener(g,I,"passive"in M?M:M.capture)}static removeEventListener(s,g,I,M={}){s.removeEventListener(g,I,"passive"in M?M:M.capture)}static suppressClickInternal(s){s.preventDefault(),s.stopPropagation(),window.removeEventListener("click",O.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",O.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",O.suppressClickInternal,!0)},0)}static mousePos(s,g){const I=s.getBoundingClientRect();return new o.P(g.clientX-I.left-s.clientLeft,g.clientY-I.top-s.clientTop)}static touchPos(s,g){const I=s.getBoundingClientRect(),M=[];for(let F=0;F<g.length;F++)M.push(new o.P(g[F].clientX-I.left-s.clientLeft,g[F].clientY-I.top-s.clientTop));return M}static mouseButton(s){return s.button}static remove(s){s.parentNode&&s.parentNode.removeChild(s)}}O.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,O.selectProp=O.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),O.transformProp=O.testProp(["transform","WebkitTransform"]);const j={supported:!1,testSupport:function(R){!se&&oe&&(be?qe(R):J=R)}};let J,oe,se=!1,be=!1;function qe(R){const s=R.createTexture();R.bindTexture(R.TEXTURE_2D,s);try{if(R.texImage2D(R.TEXTURE_2D,0,R.RGBA,R.RGBA,R.UNSIGNED_BYTE,oe),R.isContextLost())return;j.supported=!0}catch{}R.deleteTexture(s),se=!0}var ke,Qe;typeof document<"u"&&(oe=document.createElement("img"),oe.onload=function(){J&&qe(J),J=null,be=!0},oe.onerror=function(){se=!0,J=null},oe.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(R){let s,g,I,M;R.resetRequestQueue=()=>{s=[],g=0,I=0,M={}},R.addThrottleControl=f=>{const m=I++;return M[m]=f,m},R.removeThrottleControl=f=>{delete M[f],A()},R.getImage=(f,m,b=!0)=>{j.supported&&(f.headers||(f.headers={}),f.headers.accept="image/webp,*/*");const T={requestParameters:f,supportImageRefresh:b,callback:m,cancelled:!1,completed:!1,cancel:()=>{T.completed||T.cancelled||(T.cancelled=!0,T.innerRequest&&(T.innerRequest.cancel(),g--),A())}};return s.push(T),A(),T};const F=f=>{const{requestParameters:m,supportImageRefresh:b,callback:T}=f;return o.e(m,{type:"image"}),(b!==!1||o.i()||o.g(m.url)||m.headers&&!Object.keys(m.headers).reduce((z,N)=>z&&N==="accept",!0)?o.m:l)(m,(z,N,X,te)=>{q(f,T,z,N,X,te)})},q=(f,m,b,T,z,N)=>{b?m(b):T instanceof HTMLImageElement||o.a(T)?m(null,T):T&&((X,te)=>{typeof createImageBitmap=="function"?o.b(X,te):o.d(X,te)})(T,(X,te)=>{X!=null?m(X):te!=null&&m(null,te,{cacheControl:z,expires:N})}),f.cancelled||(f.completed=!0,g--,A())},A=()=>{const f=(()=>{const m=Object.keys(M);let b=!1;if(m.length>0){for(const T of m)if(b=M[T](),b)break}return b})()?o.c.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:o.c.MAX_PARALLEL_IMAGE_REQUESTS;for(let m=g;m<f&&s.length>0;m++){const b=s.shift();if(b.cancelled){m--;continue}const T=F(b);g++,b.innerRequest=T}},l=(f,m)=>{const b=new Image,T=f.url;let z=!1;const N=f.credentials;return N&&N==="include"?b.crossOrigin="use-credentials":(N&&N==="same-origin"||!o.s(T))&&(b.crossOrigin="anonymous"),b.fetchPriority="high",b.onload=()=>{m(null,b),b.onerror=b.onload=null},b.onerror=()=>{z||m(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")),b.onerror=b.onload=null},b.src=T,{cancel:()=>{z=!0,b.src=""}}}}(ke||(ke={})),ke.resetRequestQueue(),function(R){R.Glyphs="Glyphs",R.Image="Image",R.Source="Source",R.SpriteImage="SpriteImage",R.SpriteJSON="SpriteJSON",R.Style="Style",R.Tile="Tile",R.Unknown="Unknown"}(Qe||(Qe={}));class We{constructor(s){this._transformRequestFn=s}transformRequest(s,g){return this._transformRequestFn&&this._transformRequestFn(s,g)||{url:s}}normalizeSpriteURL(s,g,I){const M=function(F){const q=F.match(ct);if(!q)throw new Error(`Unable to parse URL "${F}"`);return{protocol:q[1],authority:q[2],path:q[3]||"/",params:q[4]?q[4].split("&"):[]}}(s);return M.path+=`${g}${I}`,function(F){const q=F.params.length?`?${F.params.join("&")}`:"";return`${F.protocol}://${F.authority}${F.path}${q}`}(M)}setTransformRequest(s){this._transformRequestFn=s}}const ct=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function St(R){var s=new o.A(3);return s[0]=R[0],s[1]=R[1],s[2]=R[2],s}var yt,xe=function(R,s,g){return R[0]=s[0]-g[0],R[1]=s[1]-g[1],R[2]=s[2]-g[2],R};yt=new o.A(3),o.A!=Float32Array&&(yt[0]=0,yt[1]=0,yt[2]=0);var Gt=function(R){var s=R[0],g=R[1];return s*s+g*g};function Ve(R){const s=[];if(typeof R=="string")s.push({id:"default",url:R});else if(R&&R.length>0){const g=[];for(const{id:I,url:M}of R){const F=`${I}${M}`;g.indexOf(F)===-1&&(g.push(F),s.push({id:I,url:M}))}}return s}function Je(R,s,g,I,M){if(I)return void R(I);if(M!==Object.values(s).length||M!==Object.values(g).length)return;const F={};for(const q in s){F[q]={};const A=o.h.getImageCanvasContext(g[q]),l=s[q];for(const f in l){const{width:m,height:b,x:T,y:z,sdf:N,pixelRatio:X,stretchX:te,stretchY:ve,content:De}=l[f];F[q][f]={data:null,pixelRatio:X,sdf:N,stretchX:te,stretchY:ve,content:De,spriteData:{width:m,height:b,x:T,y:z,context:A}}}}R(null,F)}(function(){var R=new o.A(2);o.A!=Float32Array&&(R[0]=0,R[1]=0)})();class et{constructor(s,g,I,M){this.context=s,this.format=I,this.texture=s.gl.createTexture(),this.update(g,M)}update(s,g,I){const{width:M,height:F}=s,q=!(this.size&&this.size[0]===M&&this.size[1]===F||I),{context:A}=this,{gl:l}=A;if(this.useMipmap=!!(g&&g.useMipmap),l.bindTexture(l.TEXTURE_2D,this.texture),A.pixelStoreUnpackFlipY.set(!1),A.pixelStoreUnpack.set(1),A.pixelStoreUnpackPremultiplyAlpha.set(this.format===l.RGBA&&(!g||g.premultiply!==!1)),q)this.size=[M,F],s instanceof HTMLImageElement||s instanceof HTMLCanvasElement||s instanceof HTMLVideoElement||s instanceof ImageData||o.a(s)?l.texImage2D(l.TEXTURE_2D,0,this.format,this.format,l.UNSIGNED_BYTE,s):l.texImage2D(l.TEXTURE_2D,0,this.format,M,F,0,this.format,l.UNSIGNED_BYTE,s.data);else{const{x:f,y:m}=I||{x:0,y:0};s instanceof HTMLImageElement||s instanceof HTMLCanvasElement||s instanceof HTMLVideoElement||s instanceof ImageData||o.a(s)?l.texSubImage2D(l.TEXTURE_2D,0,f,m,l.RGBA,l.UNSIGNED_BYTE,s):l.texSubImage2D(l.TEXTURE_2D,0,f,m,M,F,l.RGBA,l.UNSIGNED_BYTE,s.data)}this.useMipmap&&this.isSizePowerOfTwo()&&l.generateMipmap(l.TEXTURE_2D)}bind(s,g,I){const{context:M}=this,{gl:F}=M;F.bindTexture(F.TEXTURE_2D,this.texture),I!==F.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(I=F.LINEAR),s!==this.filter&&(F.texParameteri(F.TEXTURE_2D,F.TEXTURE_MAG_FILTER,s),F.texParameteri(F.TEXTURE_2D,F.TEXTURE_MIN_FILTER,I||s),this.filter=s),g!==this.wrap&&(F.texParameteri(F.TEXTURE_2D,F.TEXTURE_WRAP_S,g),F.texParameteri(F.TEXTURE_2D,F.TEXTURE_WRAP_T,g),this.wrap=g)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:s}=this.context;s.deleteTexture(this.texture),this.texture=null}}function lt(R){const{userImage:s}=R;return!!(s&&s.render&&s.render())&&(R.data.replace(new Uint8Array(s.data.buffer)),!0)}class ut extends o.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new o.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(s){if(this.loaded!==s&&(this.loaded=s,s)){for(const{ids:g,callback:I}of this.requestors)this._notify(g,I);this.requestors=[]}}getImage(s){const g=this.images[s];if(g&&!g.data&&g.spriteData){const I=g.spriteData;g.data=new o.R({width:I.width,height:I.height},I.context.getImageData(I.x,I.y,I.width,I.height).data),g.spriteData=null}return g}addImage(s,g){if(this.images[s])throw new Error(`Image id ${s} already exist, use updateImage instead`);this._validate(s,g)&&(this.images[s]=g)}_validate(s,g){let I=!0;const M=g.data||g.spriteData;return this._validateStretch(g.stretchX,M&&M.width)||(this.fire(new o.j(new Error(`Image "${s}" has invalid "stretchX" value`))),I=!1),this._validateStretch(g.stretchY,M&&M.height)||(this.fire(new o.j(new Error(`Image "${s}" has invalid "stretchY" value`))),I=!1),this._validateContent(g.content,g)||(this.fire(new o.j(new Error(`Image "${s}" has invalid "content" value`))),I=!1),I}_validateStretch(s,g){if(!s)return!0;let I=0;for(const M of s){if(M[0]<I||M[1]<M[0]||g<M[1])return!1;I=M[1]}return!0}_validateContent(s,g){if(!s)return!0;if(s.length!==4)return!1;const I=g.spriteData,M=I&&I.width||g.data.width,F=I&&I.height||g.data.height;return!(s[0]<0||M<s[0]||s[1]<0||F<s[1]||s[2]<0||M<s[2]||s[3]<0||F<s[3]||s[2]<s[0]||s[3]<s[1])}updateImage(s,g,I=!0){const M=this.getImage(s);if(I&&(M.data.width!==g.data.width||M.data.height!==g.data.height))throw new Error(`size mismatch between old image (${M.data.width}x${M.data.height}) and new image (${g.data.width}x${g.data.height}).`);g.version=M.version+1,this.images[s]=g,this.updatedImages[s]=!0}removeImage(s){const g=this.images[s];delete this.images[s],delete this.patterns[s],g.userImage&&g.userImage.onRemove&&g.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(s,g){let I=!0;if(!this.isLoaded())for(const M of s)this.images[M]||(I=!1);this.isLoaded()||I?this._notify(s,g):this.requestors.push({ids:s,callback:g})}_notify(s,g){const I={};for(const M of s){let F=this.getImage(M);F||(this.fire(new o.k("styleimagemissing",{id:M})),F=this.getImage(M)),F?I[M]={data:F.data.clone(),pixelRatio:F.pixelRatio,sdf:F.sdf,version:F.version,stretchX:F.stretchX,stretchY:F.stretchY,content:F.content,hasRenderCallback:!!(F.userImage&&F.userImage.render)}:o.w(`Image "${M}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}g(null,I)}getPixelSize(){const{width:s,height:g}=this.atlasImage;return{width:s,height:g}}getPattern(s){const g=this.patterns[s],I=this.getImage(s);if(!I)return null;if(g&&g.position.version===I.version)return g.position;if(g)g.position.version=I.version;else{const M={w:I.data.width+2,h:I.data.height+2,x:0,y:0},F=new o.I(M,I);this.patterns[s]={bin:M,position:F}}return this._updatePatternAtlas(),this.patterns[s].position}bind(s){const g=s.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new et(s,this.atlasImage,g.RGBA),this.atlasTexture.bind(g.LINEAR,g.CLAMP_TO_EDGE)}_updatePatternAtlas(){const s=[];for(const F in this.patterns)s.push(this.patterns[F].bin);const{w:g,h:I}=o.p(s),M=this.atlasImage;M.resize({width:g||1,height:I||1});for(const F in this.patterns){const{bin:q}=this.patterns[F],A=q.x+1,l=q.y+1,f=this.getImage(F).data,m=f.width,b=f.height;o.R.copy(f,M,{x:0,y:0},{x:A,y:l},{width:m,height:b}),o.R.copy(f,M,{x:0,y:b-1},{x:A,y:l-1},{width:m,height:1}),o.R.copy(f,M,{x:0,y:0},{x:A,y:l+b},{width:m,height:1}),o.R.copy(f,M,{x:m-1,y:0},{x:A-1,y:l},{width:1,height:b}),o.R.copy(f,M,{x:0,y:0},{x:A+m,y:l},{width:1,height:b})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(s){for(const g of s){if(this.callbackDispatchedThisFrame[g])continue;this.callbackDispatchedThisFrame[g]=!0;const I=this.getImage(g);I||o.w(`Image with ID: "${g}" was not found`),lt(I)&&this.updateImage(g,I)}}}const Ke=1e20;function Me(R,s,g,I,M,F,q,A,l){for(let f=s;f<s+I;f++)Ze(R,g*F+f,F,M,q,A,l);for(let f=g;f<g+M;f++)Ze(R,f*F+s,1,I,q,A,l)}function Ze(R,s,g,I,M,F,q){F[0]=0,q[0]=-Ke,q[1]=Ke,M[0]=R[s];for(let A=1,l=0,f=0;A<I;A++){M[A]=R[s+A*g];const m=A*A;do{const b=F[l];f=(M[A]-M[b]+m-b*b)/(A-b)/2}while(f<=q[l]&&--l>-1);l++,F[l]=A,q[l]=f,q[l+1]=Ke}for(let A=0,l=0;A<I;A++){for(;q[l+1]<A;)l++;const f=F[l],m=A-f;R[s+A*g]=M[f]+m*m}}class Fe{constructor(s,g){this.requestManager=s,this.localIdeographFontFamily=g,this.entries={}}setURL(s){this.url=s}getGlyphs(s,g){const I=[];for(const M in s)for(const F of s[M])I.push({stack:M,id:F});o.o(I,({stack:M,id:F},q)=>{let A=this.entries[M];A||(A=this.entries[M]={glyphs:{},requests:{},ranges:{}});let l=A.glyphs[F];if(l!==void 0)return void q(null,{stack:M,id:F,glyph:l});if(l=this._tinySDF(A,M,F),l)return A.glyphs[F]=l,void q(null,{stack:M,id:F,glyph:l});const f=Math.floor(F/256);if(256*f>65535)return void q(new Error("glyphs > 65535 not supported"));if(A.ranges[f])return void q(null,{stack:M,id:F,glyph:l});if(!this.url)return void q(new Error("glyphsUrl is not set"));let m=A.requests[f];m||(m=A.requests[f]=[],Fe.loadGlyphRange(M,f,this.url,this.requestManager,(b,T)=>{if(T){for(const z in T)this._doesCharSupportLocalGlyph(+z)||(A.glyphs[+z]=T[+z]);A.ranges[f]=!0}for(const z of m)z(b,T);delete A.requests[f]})),m.push((b,T)=>{b?q(b):T&&q(null,{stack:M,id:F,glyph:T[F]||null})})},(M,F)=>{if(M)g(M);else if(F){const q={};for(const{stack:A,id:l,glyph:f}of F)(q[A]||(q[A]={}))[l]=f&&{id:f.id,bitmap:f.bitmap.clone(),metrics:f.metrics};g(null,q)}})}_doesCharSupportLocalGlyph(s){return!!this.localIdeographFontFamily&&(o.u["CJK Unified Ideographs"](s)||o.u["Hangul Syllables"](s)||o.u.Hiragana(s)||o.u.Katakana(s))}_tinySDF(s,g,I){const M=this.localIdeographFontFamily;if(!M||!this._doesCharSupportLocalGlyph(I))return;let F=s.tinySDF;if(!F){let A="400";/bold/i.test(g)?A="900":/medium/i.test(g)?A="500":/light/i.test(g)&&(A="200"),F=s.tinySDF=new Fe.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:M,fontWeight:A})}const q=F.draw(String.fromCharCode(I));return{id:I,bitmap:new o.q({width:q.width||60,height:q.height||60},q.data),metrics:{width:q.glyphWidth/2||24,height:q.glyphHeight/2||24,left:q.glyphLeft/2+.5||0,top:q.glyphTop/2-27.5||-8,advance:q.glyphAdvance/2||24,isDoubleResolution:!0}}}}Fe.loadGlyphRange=function(R,s,g,I,M){const F=256*s,q=F+255,A=I.transformRequest(g.replace("{fontstack}",R).replace("{range}",`${F}-${q}`),Qe.Glyphs);o.l(A,(l,f)=>{if(l)M(l);else if(f){const m={};for(const b of o.n(f))m[b.id]=b;M(null,m)}})},Fe.TinySDF=class{constructor({fontSize:R=24,buffer:s=3,radius:g=8,cutoff:I=.25,fontFamily:M="sans-serif",fontWeight:F="normal",fontStyle:q="normal"}={}){this.buffer=s,this.cutoff=I,this.radius=g;const A=this.size=R+4*s,l=this._createCanvas(A),f=this.ctx=l.getContext("2d",{willReadFrequently:!0});f.font=`${q} ${F} ${R}px ${M}`,f.textBaseline="alphabetic",f.textAlign="left",f.fillStyle="black",this.gridOuter=new Float64Array(A*A),this.gridInner=new Float64Array(A*A),this.f=new Float64Array(A),this.z=new Float64Array(A+1),this.v=new Uint16Array(A)}_createCanvas(R){const s=document.createElement("canvas");return s.width=s.height=R,s}draw(R){const{width:s,actualBoundingBoxAscent:g,actualBoundingBoxDescent:I,actualBoundingBoxLeft:M,actualBoundingBoxRight:F}=this.ctx.measureText(R),q=Math.ceil(g),A=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(F-M))),l=Math.min(this.size-this.buffer,q+Math.ceil(I)),f=A+2*this.buffer,m=l+2*this.buffer,b=Math.max(f*m,0),T=new Uint8ClampedArray(b),z={data:T,width:f,height:m,glyphWidth:A,glyphHeight:l,glyphTop:q,glyphLeft:0,glyphAdvance:s};if(A===0||l===0)return z;const{ctx:N,buffer:X,gridInner:te,gridOuter:ve}=this;N.clearRect(X,X,A,l),N.fillText(R,X,X+q);const De=N.getImageData(X,X,A,l);ve.fill(Ke,0,b),te.fill(0,0,b);for(let He=0;He<l;He++)for(let nt=0;nt<A;nt++){const st=De.data[4*(He*A+nt)+3]/255;if(st===0)continue;const gt=(He+X)*f+nt+X;if(st===1)ve[gt]=0,te[gt]=Ke;else{const Ot=.5-st;ve[gt]=Ot>0?Ot*Ot:0,te[gt]=Ot<0?Ot*Ot:0}}Me(ve,0,0,f,m,f,this.f,this.v,this.z),Me(te,X,X,A,l,f,this.f,this.v,this.z);for(let He=0;He<b;He++){const nt=Math.sqrt(ve[He])-Math.sqrt(te[He]);T[He]=Math.round(255-255*(nt/this.radius+this.cutoff))}return z}};class vt{constructor(){this.specification=o.v.light.position}possiblyEvaluate(s,g){return o.z(s.expression.evaluate(g))}interpolate(s,g,I){return{x:o.B.number(s.x,g.x,I),y:o.B.number(s.y,g.y,I),z:o.B.number(s.z,g.z,I)}}}let dt;class _t extends o.E{constructor(s){super(),dt=dt||new o.r({anchor:new o.D(o.v.light.anchor),position:new vt,color:new o.D(o.v.light.color),intensity:new o.D(o.v.light.intensity)}),this._transitionable=new o.T(dt),this.setLight(s),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(s,g={}){if(!this._validate(o.t,s,g))for(const I in s){const M=s[I];I.endsWith("-transition")?this._transitionable.setTransition(I.slice(0,-11),M):this._transitionable.setValue(I,M)}}updateTransitions(s){this._transitioning=this._transitionable.transitioned(s,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(s){this.properties=this._transitioning.possiblyEvaluate(s)}_validate(s,g,I){return(!I||I.validate!==!1)&&o.x(this,s.call(o.y,o.e({value:g,style:{glyphs:!0,sprite:!0},styleSpec:o.v})))}}class ei{constructor(s,g){this.width=s,this.height=g,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(s,g){const I=s.join(",")+String(g);return this.dashEntry[I]||(this.dashEntry[I]=this.addDash(s,g)),this.dashEntry[I]}getDashRanges(s,g,I){const M=[];let F=s.length%2==1?-s[s.length-1]*I:0,q=s[0]*I,A=!0;M.push({left:F,right:q,isDash:A,zeroLength:s[0]===0});let l=s[0];for(let f=1;f<s.length;f++){A=!A;const m=s[f];F=l*I,l+=m,q=l*I,M.push({left:F,right:q,isDash:A,zeroLength:m===0})}return M}addRoundDash(s,g,I){const M=g/2;for(let F=-I;F<=I;F++){const q=this.width*(this.nextRow+I+F);let A=0,l=s[A];for(let f=0;f<this.width;f++){f/l.right>1&&(l=s[++A]);const m=Math.abs(f-l.left),b=Math.abs(f-l.right),T=Math.min(m,b);let z;const N=F/I*(M+1);if(l.isDash){const X=M-Math.abs(N);z=Math.sqrt(T*T+X*X)}else z=M-Math.sqrt(T*T+N*N);this.data[q+f]=Math.max(0,Math.min(255,z+128))}}}addRegularDash(s){for(let A=s.length-1;A>=0;--A){const l=s[A],f=s[A+1];l.zeroLength?s.splice(A,1):f&&f.isDash===l.isDash&&(f.left=l.left,s.splice(A,1))}const g=s[0],I=s[s.length-1];g.isDash===I.isDash&&(g.left=I.left-this.width,I.right=g.right+this.width);const M=this.width*this.nextRow;let F=0,q=s[F];for(let A=0;A<this.width;A++){A/q.right>1&&(q=s[++F]);const l=Math.abs(A-q.left),f=Math.abs(A-q.right),m=Math.min(l,f);this.data[M+A]=Math.max(0,Math.min(255,(q.isDash?m:-m)+128))}}addDash(s,g){const I=g?7:0,M=2*I+1;if(this.nextRow+M>this.height)return o.w("LineAtlas out of space"),null;let F=0;for(let A=0;A<s.length;A++)F+=s[A];if(F!==0){const A=this.width/F,l=this.getDashRanges(s,this.width,A);g?this.addRoundDash(l,A,I):this.addRegularDash(l)}const q={y:(this.nextRow+I+.5)/this.height,height:2*I/this.height,width:F};return this.nextRow+=M,this.dirty=!0,q}bind(s){const g=s.gl;this.texture?(g.bindTexture(g.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,g.texSubImage2D(g.TEXTURE_2D,0,0,0,this.width,this.height,g.ALPHA,g.UNSIGNED_BYTE,this.data))):(this.texture=g.createTexture(),g.bindTexture(g.TEXTURE_2D,this.texture),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.REPEAT),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,g.REPEAT),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,g.LINEAR),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.LINEAR),g.texImage2D(g.TEXTURE_2D,0,g.ALPHA,this.width,this.height,0,g.ALPHA,g.UNSIGNED_BYTE,this.data))}}class di{constructor(s,g,I){this.workerPool=s,this.actors=[],this.currentActor=0,this.id=I;const M=this.workerPool.acquire(I);for(let F=0;F<M.length;F++){const q=new o.C(M[F],g,I);q.name=`Worker ${F}`,this.actors.push(q)}if(!this.actors.length)throw new Error("No actors found")}broadcast(s,g,I){o.o(this.actors,(M,F)=>{M.send(s,g,F)},I=I||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(s=!0){this.actors.forEach(g=>{g.remove()}),this.actors=[],s&&this.workerPool.release(this.id)}}function yi(R,s,g){const I=function(M,F){if(M)return g(M);if(F){const q=o.F(o.e(F,R),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);F.vector_layers&&(q.vectorLayers=F.vector_layers,q.vectorLayerIds=q.vectorLayers.map(A=>A.id)),g(null,q)}};return R.url?o.f(s.transformRequest(R.url,Qe.Source),I):o.h.frame(()=>I(null,R))}class Ti{constructor(s,g){s&&(g?this.setSouthWest(s).setNorthEast(g):Array.isArray(s)&&(s.length===4?this.setSouthWest([s[0],s[1]]).setNorthEast([s[2],s[3]]):this.setSouthWest(s[0]).setNorthEast(s[1])))}setNorthEast(s){return this._ne=s instanceof o.L?new o.L(s.lng,s.lat):o.L.convert(s),this}setSouthWest(s){return this._sw=s instanceof o.L?new o.L(s.lng,s.lat):o.L.convert(s),this}extend(s){const g=this._sw,I=this._ne;let M,F;if(s instanceof o.L)M=s,F=s;else{if(!(s instanceof Ti))return Array.isArray(s)?s.length===4||s.every(Array.isArray)?this.extend(Ti.convert(s)):this.extend(o.L.convert(s)):s&&("lng"in s||"lon"in s)&&"lat"in s?this.extend(o.L.convert(s)):this;if(M=s._sw,F=s._ne,!M||!F)return this}return g||I?(g.lng=Math.min(M.lng,g.lng),g.lat=Math.min(M.lat,g.lat),I.lng=Math.max(F.lng,I.lng),I.lat=Math.max(F.lat,I.lat)):(this._sw=new o.L(M.lng,M.lat),this._ne=new o.L(F.lng,F.lat)),this}getCenter(){return new o.L((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new o.L(this.getWest(),this.getNorth())}getSouthEast(){return new o.L(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(s){const{lng:g,lat:I}=o.L.convert(s);let M=this._sw.lng<=g&&g<=this._ne.lng;return this._sw.lng>this._ne.lng&&(M=this._sw.lng>=g&&g>=this._ne.lng),this._sw.lat<=I&&I<=this._ne.lat&&M}static convert(s){return s instanceof Ti?s:s&&new Ti(s)}static fromLngLat(s,g=0){const I=360*g/40075017,M=I/Math.cos(Math.PI/180*s.lat);return new Ti(new o.L(s.lng-M,s.lat-I),new o.L(s.lng+M,s.lat+I))}}class Vi{constructor(s,g,I){this.bounds=Ti.convert(this.validateBounds(s)),this.minzoom=g||0,this.maxzoom=I||24}validateBounds(s){return Array.isArray(s)&&s.length===4?[Math.max(-180,s[0]),Math.max(-90,s[1]),Math.min(180,s[2]),Math.min(90,s[3])]:[-180,-90,180,90]}contains(s){const g=Math.pow(2,s.z),I=Math.floor(o.G(this.bounds.getWest())*g),M=Math.floor(o.H(this.bounds.getNorth())*g),F=Math.ceil(o.G(this.bounds.getEast())*g),q=Math.ceil(o.H(this.bounds.getSouth())*g);return s.x>=I&&s.x<F&&s.y>=M&&s.y<q}}class wi extends o.E{constructor(s,g,I,M){if(super(),this.load=()=>{this._loaded=!1,this.fire(new o.k("dataloading",{dataType:"source"})),this._tileJSONRequest=yi(this._options,this.map._requestManager,(F,q)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),F?this.fire(new o.j(F)):q&&(o.e(this,q),q.bounds&&(this.tileBounds=new Vi(q.bounds,this.minzoom,this.maxzoom)),this.fire(new o.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.k("data",{dataType:"source",sourceDataType:"content"})))})},this.serialize=()=>o.e({},this._options),this.id=s,this.dispatcher=I,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,o.e(this,o.F(g,["url","scheme","tileSize","promoteId"])),this._options=o.e({type:"vector"},g),this._collectResourceTiming=g.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(M)}loaded(){return this._loaded}hasTile(s){return!this.tileBounds||this.tileBounds.contains(s.canonical)}onAdd(s){this.map=s,this.load()}setSourceProperty(s){this._tileJSONRequest&&this._tileJSONRequest.cancel(),s(),this.load()}setTiles(s){return this.setSourceProperty(()=>{this._options.tiles=s}),this}setUrl(s){return this.setSourceProperty(()=>{this.url=s,this._options.url=s}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}loadTile(s,g){const I=s.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),M={request:this.map._requestManager.transformRequest(I,Qe.Tile),uid:s.uid,tileID:s.tileID,zoom:s.tileID.overscaledZ,tileSize:this.tileSize*s.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function F(q,A){return delete s.request,s.aborted?g(null):q&&q.status!==404?g(q):(A&&A.resourceTiming&&(s.resourceTiming=A.resourceTiming),this.map._refreshExpiredTiles&&A&&s.setExpiryData(A),s.loadVectorData(A,this.map.painter),g(null),void(s.reloadCallback&&(this.loadTile(s,s.reloadCallback),s.reloadCallback=null)))}M.request.collectResourceTiming=this._collectResourceTiming,s.actor&&s.state!=="expired"?s.state==="loading"?s.reloadCallback=g:s.request=s.actor.send("reloadTile",M,F.bind(this)):(s.actor=this.dispatcher.getActor(),s.request=s.actor.send("loadTile",M,F.bind(this)))}abortTile(s){s.request&&(s.request.cancel(),delete s.request),s.actor&&s.actor.send("abortTile",{uid:s.uid,type:this.type,source:this.id},void 0)}unloadTile(s){s.unloadVectorData(),s.actor&&s.actor.send("removeTile",{uid:s.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class mi extends o.E{constructor(s,g,I,M){super(),this.id=s,this.dispatcher=I,this.setEventedParent(M),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=o.e({type:"raster"},g),o.e(this,o.F(g,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new o.k("dataloading",{dataType:"source"})),this._tileJSONRequest=yi(this._options,this.map._requestManager,(s,g)=>{this._tileJSONRequest=null,this._loaded=!0,s?this.fire(new o.j(s)):g&&(o.e(this,g),g.bounds&&(this.tileBounds=new Vi(g.bounds,this.minzoom,this.maxzoom)),this.fire(new o.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.k("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(s){this.map=s,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}setSourceProperty(s){this._tileJSONRequest&&this._tileJSONRequest.cancel(),s(),this.load()}setTiles(s){return this.setSourceProperty(()=>{this._options.tiles=s}),this}serialize(){return o.e({},this._options)}hasTile(s){return!this.tileBounds||this.tileBounds.contains(s.canonical)}loadTile(s,g){const I=s.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);s.request=ke.getImage(this.map._requestManager.transformRequest(I,Qe.Tile),(M,F,q)=>{if(delete s.request,s.aborted)s.state="unloaded",g(null);else if(M)s.state="errored",g(M);else if(F){this.map._refreshExpiredTiles&&q&&s.setExpiryData(q);const A=this.map.painter.context,l=A.gl;s.texture=this.map.painter.getTileTexture(F.width),s.texture?s.texture.update(F,{useMipmap:!0}):(s.texture=new et(A,F,l.RGBA,{useMipmap:!0}),s.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE,l.LINEAR_MIPMAP_NEAREST),A.extTextureFilterAnisotropic&&l.texParameterf(l.TEXTURE_2D,A.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,A.extTextureFilterAnisotropicMax)),s.state="loaded",g(null)}},this.map._refreshExpiredTiles)}abortTile(s,g){s.request&&(s.request.cancel(),delete s.request),g()}unloadTile(s,g){s.texture&&this.map.painter.saveTileTexture(s.texture),g()}hasTransition(){return!1}}class Wt extends mi{constructor(s,g,I,M){super(s,g,I,M),this.type="raster-dem",this.maxzoom=22,this._options=o.e({type:"raster-dem"},g),this.encoding=g.encoding||"mapbox",this.redFactor=g.redFactor,this.greenFactor=g.greenFactor,this.blueFactor=g.blueFactor,this.baseShift=g.baseShift}loadTile(s,g){const I=s.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),M=this.map._requestManager.transformRequest(I,Qe.Tile);function F(q,A){q&&(s.state="errored",g(q)),A&&(s.dem=A,s.needsHillshadePrepare=!0,s.needsTerrainPrepare=!0,s.state="loaded",g(null))}s.neighboringTiles=this._getNeighboringTiles(s.tileID),s.request=ke.getImage(M,(q,A,l)=>o._(this,void 0,void 0,function*(){if(delete s.request,s.aborted)s.state="unloaded",g(null);else if(q)s.state="errored",g(q);else if(A){this.map._refreshExpiredTiles&&s.setExpiryData(l);const f=o.a(A)&&o.J()?A:yield function(b){return o._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&o.K()){const T=b.width+2,z=b.height+2;try{return new o.R({width:T,height:z},yield o.M(b,-1,-1,T,z))}catch{}}return o.h.getImageData(b,1)})}(A),m={uid:s.uid,coord:s.tileID,source:this.id,rawImageData:f,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};s.actor&&s.state!=="expired"||(s.actor=this.dispatcher.getActor(),s.actor.send("loadDEMTile",m,F))}}),this.map._refreshExpiredTiles)}_getNeighboringTiles(s){const g=s.canonical,I=Math.pow(2,g.z),M=(g.x-1+I)%I,F=g.x===0?s.wrap-1:s.wrap,q=(g.x+1+I)%I,A=g.x+1===I?s.wrap+1:s.wrap,l={};return l[new o.O(s.overscaledZ,F,g.z,M,g.y).key]={backfilled:!1},l[new o.O(s.overscaledZ,A,g.z,q,g.y).key]={backfilled:!1},g.y>0&&(l[new o.O(s.overscaledZ,F,g.z,M,g.y-1).key]={backfilled:!1},l[new o.O(s.overscaledZ,s.wrap,g.z,g.x,g.y-1).key]={backfilled:!1},l[new o.O(s.overscaledZ,A,g.z,q,g.y-1).key]={backfilled:!1}),g.y+1<I&&(l[new o.O(s.overscaledZ,F,g.z,M,g.y+1).key]={backfilled:!1},l[new o.O(s.overscaledZ,s.wrap,g.z,g.x,g.y+1).key]={backfilled:!1},l[new o.O(s.overscaledZ,A,g.z,q,g.y+1).key]={backfilled:!1}),l}unloadTile(s){s.demTexture&&this.map.painter.saveTileTexture(s.demTexture),s.fbo&&(s.fbo.destroy(),delete s.fbo),s.dem&&delete s.dem,delete s.neighboringTiles,s.state="unloaded",s.actor&&s.actor.send("removeDEMTile",{uid:s.uid,source:this.id})}}class Di extends o.E{constructor(s,g,I,M){super(),this.load=()=>{this._updateWorkerData()},this.serialize=()=>o.e({},this._options,{type:this.type,data:this._data}),this.id=s,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=I.getActor(),this.setEventedParent(M),this._data=g.data,this._options=o.e({},g),this._collectResourceTiming=g.collectResourceTiming,g.maxzoom!==void 0&&(this.maxzoom=g.maxzoom),g.type&&(this.type=g.type),g.attribution&&(this.attribution=g.attribution),this.promoteId=g.promoteId;const F=o.N/this.tileSize;this.workerOptions=o.e({source:this.id,cluster:g.cluster||!1,geojsonVtOptions:{buffer:(g.buffer!==void 0?g.buffer:128)*F,tolerance:(g.tolerance!==void 0?g.tolerance:.375)*F,extent:o.N,maxZoom:this.maxzoom,lineMetrics:g.lineMetrics||!1,generateId:g.generateId||!1},superclusterOptions:{maxZoom:g.clusterMaxZoom!==void 0?g.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,g.clusterMinPoints||2),extent:o.N,radius:(g.clusterRadius||50)*F,log:!1,generateId:g.generateId||!1},clusterProperties:g.clusterProperties,filter:g.filter},g.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}onAdd(s){this.map=s,this.load()}setData(s){return this._data=s,this._updateWorkerData(),this}updateData(s){return this._updateWorkerData(s),this}setClusterOptions(s){return this.workerOptions.cluster=s.cluster,s&&(s.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=s.clusterRadius),s.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=s.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(s,g){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:s,source:this.id},g),this}getClusterChildren(s,g){return this.actor.send("geojson.getClusterChildren",{clusterId:s,source:this.id},g),this}getClusterLeaves(s,g,I,M){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:s,limit:g,offset:I},M),this}_updateWorkerData(s){const g=o.e({},this.workerOptions);s?g.dataDiff=s:typeof this._data=="string"?(g.request=this.map._requestManager.transformRequest(o.h.resolveURL(this._data),Qe.Source),g.request.collectResourceTiming=this._collectResourceTiming):g.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new o.k("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,g,(I,M)=>{if(this._pendingLoads--,this._removed||M&&M.abandoned)return void this.fire(new o.k("dataabort",{dataType:"source"}));let F=null;if(M&&M.resourceTiming&&M.resourceTiming[this.id]&&(F=M.resourceTiming[this.id].slice(0)),I)return void this.fire(new o.j(I));const q={dataType:"source"};this._collectResourceTiming&&F&&F.length>0&&o.e(q,{resourceTiming:F}),this.fire(new o.k("data",Object.assign(Object.assign({},q),{sourceDataType:"metadata"}))),this.fire(new o.k("data",Object.assign(Object.assign({},q),{sourceDataType:"content"})))})}loaded(){return this._pendingLoads===0}loadTile(s,g){const I=s.actor?"reloadTile":"loadTile";s.actor=this.actor;const M={type:this.type,uid:s.uid,tileID:s.tileID,zoom:s.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};s.request=this.actor.send(I,M,(F,q)=>(delete s.request,s.unloadVectorData(),s.aborted?g(null):F?g(F):(s.loadVectorData(q,this.map.painter,I==="reloadTile"),g(null))))}abortTile(s){s.request&&(s.request.cancel(),delete s.request),s.aborted=!0}unloadTile(s){s.unloadVectorData(),this.actor.send("removeTile",{uid:s.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}hasTransition(){return!1}}var $t=o.Q([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Lt extends o.E{constructor(s,g,I,M){super(),this.load=(F,q)=>{this._loaded=!1,this.fire(new o.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=ke.getImage(this.map._requestManager.transformRequest(this.url,Qe.Image),(A,l)=>{this._request=null,this._loaded=!0,A?this.fire(new o.j(A)):l&&(this.image=l,F&&(this.coordinates=F),q&&q(),this._finishLoading())})},this.prepare=()=>{if(Object.keys(this.tiles).length===0||!this.image)return;const F=this.map.painter.context,q=F.gl;this.boundsBuffer||(this.boundsBuffer=F.createVertexBuffer(this._boundsArray,$t.members)),this.boundsSegments||(this.boundsSegments=o.S.simpleSegment(0,0,4,2)),this.texture||(this.texture=new et(F,this.image,q.RGBA),this.texture.bind(q.LINEAR,q.CLAMP_TO_EDGE));let A=!1;for(const l in this.tiles){const f=this.tiles[l];f.state!=="loaded"&&(f.state="loaded",f.texture=this.texture,A=!0)}A&&this.fire(new o.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"image",url:this.options.url,coordinates:this.coordinates}),this.id=s,this.dispatcher=I,this.coordinates=g.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(M),this.options=g}loaded(){return this._loaded}updateImage(s){return s.url?(this._request&&(this._request.cancel(),this._request=null),this.options.url=s.url,this.load(s.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new o.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(s){this.map=s,this.load()}onRemove(){this._request&&(this._request.cancel(),this._request=null)}setCoordinates(s){this.coordinates=s;const g=s.map(o.U.fromLngLat);this.tileID=function(M){let F=1/0,q=1/0,A=-1/0,l=-1/0;for(const T of M)F=Math.min(F,T.x),q=Math.min(q,T.y),A=Math.max(A,T.x),l=Math.max(l,T.y);const f=Math.max(A-F,l-q),m=Math.max(0,Math.floor(-Math.log(f)/Math.LN2)),b=Math.pow(2,m);return new o.W(m,Math.floor((F+A)/2*b),Math.floor((q+l)/2*b))}(g),this.minzoom=this.maxzoom=this.tileID.z;const I=g.map(M=>this.tileID.getTilePoint(M)._round());return this._boundsArray=new o.V,this._boundsArray.emplaceBack(I[0].x,I[0].y,0,0),this._boundsArray.emplaceBack(I[1].x,I[1].y,o.N,0),this._boundsArray.emplaceBack(I[3].x,I[3].y,0,o.N),this._boundsArray.emplaceBack(I[2].x,I[2].y,o.N,o.N),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new o.k("data",{dataType:"source",sourceDataType:"content"})),this}loadTile(s,g){this.tileID&&this.tileID.equals(s.tileID.canonical)?(this.tiles[String(s.tileID.wrap)]=s,s.buckets={},g(null)):(s.state="errored",g(null))}hasTransition(){return!1}}class ni extends Lt{constructor(s,g,I,M){super(s,g,I,M),this.load=()=>{this._loaded=!1;const F=this.options;this.urls=[];for(const q of F.urls)this.urls.push(this.map._requestManager.transformRequest(q,Qe.Source).url);o.X(this.urls,(q,A)=>{this._loaded=!0,q?this.fire(new o.j(q)):A&&(this.video=A,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})},this.prepare=()=>{if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const F=this.map.painter.context,q=F.gl;this.boundsBuffer||(this.boundsBuffer=F.createVertexBuffer(this._boundsArray,$t.members)),this.boundsSegments||(this.boundsSegments=o.S.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(q.LINEAR,q.CLAMP_TO_EDGE),q.texSubImage2D(q.TEXTURE_2D,0,0,0,q.RGBA,q.UNSIGNED_BYTE,this.video)):(this.texture=new et(F,this.video,q.RGBA),this.texture.bind(q.LINEAR,q.CLAMP_TO_EDGE));let A=!1;for(const l in this.tiles){const f=this.tiles[l];f.state!=="loaded"&&(f.state="loaded",f.texture=this.texture,A=!0)}A&&this.fire(new o.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"video",urls:this.urls,coordinates:this.coordinates}),this.roundZoom=!0,this.type="video",this.options=g}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(s){if(this.video){const g=this.video.seekable;s<g.start(0)||s>g.end(0)?this.fire(new o.j(new o.Y(`sources.${this.id}`,null,`Playback for this video can be set only between the ${g.start(0)} and ${g.end(0)}-second mark.`))):this.video.currentTime=s}}getVideo(){return this.video}onAdd(s){this.map||(this.map=s,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}hasTransition(){return this.video&&!this.video.paused}}class si extends Lt{constructor(s,g,I,M){super(s,g,I,M),this.load=()=>{this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new o.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},this.prepare=()=>{let F=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,F=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,F=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const q=this.map.painter.context,A=q.gl;this.boundsBuffer||(this.boundsBuffer=q.createVertexBuffer(this._boundsArray,$t.members)),this.boundsSegments||(this.boundsSegments=o.S.simpleSegment(0,0,4,2)),this.texture?(F||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new et(q,this.canvas,A.RGBA,{premultiply:!0});let l=!1;for(const f in this.tiles){const m=this.tiles[f];m.state!=="loaded"&&(m.state="loaded",m.texture=this.texture,l=!0)}l&&this.fire(new o.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"canvas",coordinates:this.coordinates}),g.coordinates?Array.isArray(g.coordinates)&&g.coordinates.length===4&&!g.coordinates.some(F=>!Array.isArray(F)||F.length!==2||F.some(q=>typeof q!="number"))||this.fire(new o.j(new o.Y(`sources.${s}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new o.j(new o.Y(`sources.${s}`,null,'missing required property "coordinates"'))),g.animate&&typeof g.animate!="boolean"&&this.fire(new o.j(new o.Y(`sources.${s}`,null,'optional "animate" property must be a boolean value'))),g.canvas?typeof g.canvas=="string"||g.canvas instanceof HTMLCanvasElement||this.fire(new o.j(new o.Y(`sources.${s}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new o.j(new o.Y(`sources.${s}`,null,'missing required property "canvas"'))),this.options=g,this.animate=g.animate===void 0||g.animate}getCanvas(){return this.canvas}onAdd(s){this.map=s,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const s of[this.canvas.width,this.canvas.height])if(isNaN(s)||s<=0)return!0;return!1}}const Oi={},zi=R=>{switch(R){case"geojson":return Di;case"image":return Lt;case"raster":return mi;case"raster-dem":return Wt;case"vector":return wi;case"video":return ni;case"canvas":return si}return Oi[R]};function oi(R,s){const g=o.Z();return o.$(g,g,[1,1,0]),o.a0(g,g,[.5*R.width,.5*R.height,1]),o.a1(g,g,R.calculatePosMatrix(s.toUnwrapped()))}function $i(R,s,g,I,M,F){const q=function(b,T,z){if(b)for(const N of b){const X=T[N];if(X&&X.source===z&&X.type==="fill-extrusion")return!0}else for(const N in T){const X=T[N];if(X.source===z&&X.type==="fill-extrusion")return!0}return!1}(M&&M.layers,s,R.id),A=F.maxPitchScaleFactor(),l=R.tilesIn(I,A,q);l.sort(ki);const f=[];for(const b of l)f.push({wrappedTileID:b.tileID.wrapped().key,queryResults:b.tile.queryRenderedFeatures(s,g,R._state,b.queryGeometry,b.cameraQueryGeometry,b.scale,M,F,A,oi(R.transform,b.tileID))});const m=function(b){const T={},z={};for(const N of b){const X=N.queryResults,te=N.wrappedTileID,ve=z[te]=z[te]||{};for(const De in X){const He=X[De],nt=ve[De]=ve[De]||{},st=T[De]=T[De]||[];for(const gt of He)nt[gt.featureIndex]||(nt[gt.featureIndex]=!0,st.push(gt))}}return T}(f);for(const b in m)m[b].forEach(T=>{const z=T.feature,N=R.getFeatureState(z.layer["source-layer"],z.id);z.source=z.layer.source,z.layer["source-layer"]&&(z.sourceLayer=z.layer["source-layer"]),z.state=N});return m}function ki(R,s){const g=R.tileID,I=s.tileID;return g.overscaledZ-I.overscaledZ||g.canonical.y-I.canonical.y||g.wrap-I.wrap||g.canonical.x-I.canonical.x}class sn{constructor(s,g){this.timeAdded=0,this.fadeEndTime=0,this.tileID=s,this.uid=o.a2(),this.uses=0,this.tileSize=g,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(s){const g=s+this.timeAdded;g<this.fadeEndTime||(this.fadeEndTime=g)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(s){this.demTexture&&s.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(s,g,I){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",s){s.featureIndex&&(this.latestFeatureIndex=s.featureIndex,s.rawTileData?(this.latestRawTileData=s.rawTileData,this.latestFeatureIndex.rawTileData=s.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=s.collisionBoxArray,this.buckets=function(M,F){const q={};if(!F)return q;for(const A of M){const l=A.layerIds.map(f=>F.getLayer(f)).filter(Boolean);if(l.length!==0){A.layers=l,A.stateDependentLayerIds&&(A.stateDependentLayers=A.stateDependentLayerIds.map(f=>l.filter(m=>m.id===f)[0]));for(const f of l)q[f.id]=A}}return q}(s.buckets,g.style),this.hasSymbolBuckets=!1;for(const M in this.buckets){const F=this.buckets[M];if(F instanceof o.a4){if(this.hasSymbolBuckets=!0,!I)break;F.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const M in this.buckets){const F=this.buckets[M];if(F instanceof o.a4&&F.hasRTLText){this.hasRTLText=!0,o.a5();break}}this.queryPadding=0;for(const M in this.buckets){const F=this.buckets[M];this.queryPadding=Math.max(this.queryPadding,g.style.getLayer(M).queryRadius(F))}s.imageAtlas&&(this.imageAtlas=s.imageAtlas),s.glyphAtlasImage&&(this.glyphAtlasImage=s.glyphAtlasImage)}else this.collisionBoxArray=new o.a3}unloadVectorData(){for(const s in this.buckets)this.buckets[s].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(s){return this.buckets[s.id]}upload(s){for(const I in this.buckets){const M=this.buckets[I];M.uploadPending()&&M.upload(s)}const g=s.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new et(s,this.imageAtlas.image,g.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new et(s,this.glyphAtlasImage,g.ALPHA),this.glyphAtlasImage=null)}prepare(s){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(s,this.imageAtlasTexture)}queryRenderedFeatures(s,g,I,M,F,q,A,l,f,m){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:M,cameraQueryGeometry:F,scale:q,tileSize:this.tileSize,pixelPosMatrix:m,transform:l,params:A,queryPadding:this.queryPadding*f},s,g,I):{}}querySourceFeatures(s,g){const I=this.latestFeatureIndex;if(!I||!I.rawTileData)return;const M=I.loadVTLayers(),F=g&&g.sourceLayer?g.sourceLayer:"",q=M._geojsonTileLayer||M[F];if(!q)return;const A=o.a6(g&&g.filter),{z:l,x:f,y:m}=this.tileID.canonical,b={z:l,x:f,y:m};for(let T=0;T<q.length;T++){const z=q.feature(T);if(A.needGeometry){const te=o.a7(z,!0);if(!A.filter(new o.a8(this.tileID.overscaledZ),te,this.tileID.canonical))continue}else if(!A.filter(new o.a8(this.tileID.overscaledZ),z))continue;const N=I.getId(z,F),X=new o.a9(z,l,f,m,N);X.tile=b,s.push(X)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(s){const g=this.expirationTime;if(s.cacheControl){const I=o.aa(s.cacheControl);I["max-age"]&&(this.expirationTime=Date.now()+1e3*I["max-age"])}else s.expires&&(this.expirationTime=new Date(s.expires).getTime());if(this.expirationTime){const I=Date.now();let M=!1;if(this.expirationTime>I)M=!1;else if(g)if(this.expirationTime<g)M=!0;else{const F=this.expirationTime-g;F?this.expirationTime=I+Math.max(F,3e4):M=!0}else M=!0;M?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(s,g){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(s).length===0)return;const I=this.latestFeatureIndex.loadVTLayers();for(const M in this.buckets){if(!g.style.hasLayer(M))continue;const F=this.buckets[M],q=F.layers[0].sourceLayer||"_geojsonTileLayer",A=I[q],l=s[q];if(!A||!l||Object.keys(l).length===0)continue;F.update(l,A,this.imageAtlas&&this.imageAtlas.patternPositions||{});const f=g&&g.style&&g.style.getLayer(M);f&&(this.queryPadding=Math.max(this.queryPadding,f.queryRadius(F)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<o.h.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(s){this.symbolFadeHoldUntil=o.h.now()+s}setDependencies(s,g){const I={};for(const M of g)I[M]=!0;this.dependencies[s]=I}hasDependency(s,g){for(const I of s){const M=this.dependencies[I];if(M){for(const F of g)if(M[F])return!0}}return!1}}class ar{constructor(s,g){this.max=s,this.onRemove=g,this.reset()}reset(){for(const s in this.data)for(const g of this.data[s])g.timeout&&clearTimeout(g.timeout),this.onRemove(g.value);return this.data={},this.order=[],this}add(s,g,I){const M=s.wrapped().key;this.data[M]===void 0&&(this.data[M]=[]);const F={value:g,timeout:void 0};if(I!==void 0&&(F.timeout=setTimeout(()=>{this.remove(s,F)},I)),this.data[M].push(F),this.order.push(M),this.order.length>this.max){const q=this._getAndRemoveByKey(this.order[0]);q&&this.onRemove(q)}return this}has(s){return s.wrapped().key in this.data}getAndRemove(s){return this.has(s)?this._getAndRemoveByKey(s.wrapped().key):null}_getAndRemoveByKey(s){const g=this.data[s].shift();return g.timeout&&clearTimeout(g.timeout),this.data[s].length===0&&delete this.data[s],this.order.splice(this.order.indexOf(s),1),g.value}getByKey(s){const g=this.data[s];return g?g[0].value:null}get(s){return this.has(s)?this.data[s.wrapped().key][0].value:null}remove(s,g){if(!this.has(s))return this;const I=s.wrapped().key,M=g===void 0?0:this.data[I].indexOf(g),F=this.data[I][M];return this.data[I].splice(M,1),F.timeout&&clearTimeout(F.timeout),this.data[I].length===0&&delete this.data[I],this.onRemove(F.value),this.order.splice(this.order.indexOf(I),1),this}setMaxSize(s){for(this.max=s;this.order.length>this.max;){const g=this._getAndRemoveByKey(this.order[0]);g&&this.onRemove(g)}return this}filter(s){const g=[];for(const I in this.data)for(const M of this.data[I])s(M.value)||g.push(M);for(const I of g)this.remove(I.value.tileID,I)}}class ti{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(s,g,I){const M=String(g);if(this.stateChanges[s]=this.stateChanges[s]||{},this.stateChanges[s][M]=this.stateChanges[s][M]||{},o.e(this.stateChanges[s][M],I),this.deletedStates[s]===null){this.deletedStates[s]={};for(const F in this.state[s])F!==M&&(this.deletedStates[s][F]=null)}else if(this.deletedStates[s]&&this.deletedStates[s][M]===null){this.deletedStates[s][M]={};for(const F in this.state[s][M])I[F]||(this.deletedStates[s][M][F]=null)}else for(const F in I)this.deletedStates[s]&&this.deletedStates[s][M]&&this.deletedStates[s][M][F]===null&&delete this.deletedStates[s][M][F]}removeFeatureState(s,g,I){if(this.deletedStates[s]===null)return;const M=String(g);if(this.deletedStates[s]=this.deletedStates[s]||{},I&&g!==void 0)this.deletedStates[s][M]!==null&&(this.deletedStates[s][M]=this.deletedStates[s][M]||{},this.deletedStates[s][M][I]=null);else if(g!==void 0)if(this.stateChanges[s]&&this.stateChanges[s][M])for(I in this.deletedStates[s][M]={},this.stateChanges[s][M])this.deletedStates[s][M][I]=null;else this.deletedStates[s][M]=null;else this.deletedStates[s]=null}getState(s,g){const I=String(g),M=o.e({},(this.state[s]||{})[I],(this.stateChanges[s]||{})[I]);if(this.deletedStates[s]===null)return{};if(this.deletedStates[s]){const F=this.deletedStates[s][g];if(F===null)return{};for(const q in F)delete M[q]}return M}initializeTileState(s,g){s.setFeatureState(this.state,g)}coalesceChanges(s,g){const I={};for(const M in this.stateChanges){this.state[M]=this.state[M]||{};const F={};for(const q in this.stateChanges[M])this.state[M][q]||(this.state[M][q]={}),o.e(this.state[M][q],this.stateChanges[M][q]),F[q]=this.state[M][q];I[M]=F}for(const M in this.deletedStates){this.state[M]=this.state[M]||{};const F={};if(this.deletedStates[M]===null)for(const q in this.state[M])F[q]={},this.state[M][q]={};else for(const q in this.deletedStates[M]){if(this.deletedStates[M][q]===null)this.state[M][q]={};else for(const A of Object.keys(this.deletedStates[M][q]))delete this.state[M][q][A];F[q]=this.state[M][q]}I[M]=I[M]||{},o.e(I[M],F)}if(this.stateChanges={},this.deletedStates={},Object.keys(I).length!==0)for(const M in s)s[M].setFeatureState(I,g)}}class Wi extends o.E{constructor(s,g,I){super(),this.id=s,this.dispatcher=I,this.on("data",M=>{M.dataType==="source"&&M.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&M.dataType==="source"&&M.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((M,F,q,A)=>{const l=new(zi(F.type))(M,F,q,A);if(l.id!==M)throw new Error(`Expected Source id to be ${M} instead of ${l.id}`);return l})(s,g,I,this),this._tiles={},this._cache=new ar(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new ti,this._didEmitContent=!1,this._updated=!1}onAdd(s){this.map=s,this._maxTileCacheSize=s?s._maxTileCacheSize:null,this._maxTileCacheZoomLevels=s?s._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(s)}onRemove(s){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(s)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const s in this._tiles){const g=this._tiles[s];if(g.state!=="loaded"&&g.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const s=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,s&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(s,g){return this._source.loadTile(s,g)}_unloadTile(s){if(this._source.unloadTile)return this._source.unloadTile(s,()=>{})}_abortTile(s){this._source.abortTile&&this._source.abortTile(s,()=>{}),this._source.fire(new o.k("dataabort",{tile:s,coord:s.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(s){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const g in this._tiles){const I=this._tiles[g];I.upload(s),I.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(s=>s.tileID).sort(ir).map(s=>s.key)}getRenderableIds(s){const g=[];for(const I in this._tiles)this._isIdRenderable(I,s)&&g.push(this._tiles[I]);return s?g.sort((I,M)=>{const F=I.tileID,q=M.tileID,A=new o.P(F.canonical.x,F.canonical.y)._rotate(this.transform.angle),l=new o.P(q.canonical.x,q.canonical.y)._rotate(this.transform.angle);return F.overscaledZ-q.overscaledZ||l.y-A.y||l.x-A.x}).map(I=>I.tileID.key):g.map(I=>I.tileID).sort(ir).map(I=>I.key)}hasRenderableParent(s){const g=this.findLoadedParent(s,0);return!!g&&this._isIdRenderable(g.tileID.key)}_isIdRenderable(s,g){return this._tiles[s]&&this._tiles[s].hasData()&&!this._coveredTiles[s]&&(g||!this._tiles[s].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const s in this._tiles)this._tiles[s].state!=="errored"&&this._reloadTile(s,"reloading")}}_reloadTile(s,g){const I=this._tiles[s];I&&(I.state!=="loading"&&(I.state=g),this._loadTile(I,this._tileLoaded.bind(this,I,s,g)))}_tileLoaded(s,g,I,M){if(M)return s.state="errored",void(M.status!==404?this._source.fire(new o.j(M,{tile:s})):this.update(this.transform,this.terrain));s.timeAdded=o.h.now(),I==="expired"&&(s.refreshedUponExpiration=!0),this._setTileReloadTimer(g,s),this.getSource().type==="raster-dem"&&s.dem&&this._backfillDEM(s),this._state.initializeTileState(s,this.map?this.map.painter:null),s.aborted||this._source.fire(new o.k("data",{dataType:"source",tile:s,coord:s.tileID}))}_backfillDEM(s){const g=this.getRenderableIds();for(let M=0;M<g.length;M++){const F=g[M];if(s.neighboringTiles&&s.neighboringTiles[F]){const q=this.getTileByID(F);I(s,q),I(q,s)}}function I(M,F){M.needsHillshadePrepare=!0,M.needsTerrainPrepare=!0;let q=F.tileID.canonical.x-M.tileID.canonical.x;const A=F.tileID.canonical.y-M.tileID.canonical.y,l=Math.pow(2,M.tileID.canonical.z),f=F.tileID.key;q===0&&A===0||Math.abs(A)>1||(Math.abs(q)>1&&(Math.abs(q+l)===1?q+=l:Math.abs(q-l)===1&&(q-=l)),F.dem&&M.dem&&(M.dem.backfillBorder(F.dem,q,A),M.neighboringTiles&&M.neighboringTiles[f]&&(M.neighboringTiles[f].backfilled=!0)))}}getTile(s){return this.getTileByID(s.key)}getTileByID(s){return this._tiles[s]}_retainLoadedChildren(s,g,I,M){for(const F in this._tiles){let q=this._tiles[F];if(M[F]||!q.hasData()||q.tileID.overscaledZ<=g||q.tileID.overscaledZ>I)continue;let A=q.tileID;for(;q&&q.tileID.overscaledZ>g+1;){const f=q.tileID.scaledTo(q.tileID.overscaledZ-1);q=this._tiles[f.key],q&&q.hasData()&&(A=f)}let l=A;for(;l.overscaledZ>g;)if(l=l.scaledTo(l.overscaledZ-1),s[l.key]){M[A.key]=A;break}}}findLoadedParent(s,g){if(s.key in this._loadedParentTiles){const I=this._loadedParentTiles[s.key];return I&&I.tileID.overscaledZ>=g?I:null}for(let I=s.overscaledZ-1;I>=g;I--){const M=s.scaledTo(I),F=this._getLoadedTile(M);if(F)return F}}_getLoadedTile(s){const g=this._tiles[s.key];return g&&g.hasData()?g:this._cache.getByKey(s.wrapped().key)}updateCacheSize(s){const g=Math.ceil(s.width/this._source.tileSize)+1,I=Math.ceil(s.height/this._source.tileSize)+1,M=Math.floor(g*I*(this._maxTileCacheZoomLevels===null?o.c.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),F=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,M):M;this._cache.setMaxSize(F)}handleWrapJump(s){const g=Math.round((s-(this._prevLng===void 0?s:this._prevLng))/360);if(this._prevLng=s,g){const I={};for(const M in this._tiles){const F=this._tiles[M];F.tileID=F.tileID.unwrapTo(F.tileID.wrap+g),I[F.tileID.key]=F}this._tiles=I;for(const M in this._timers)clearTimeout(this._timers[M]),delete this._timers[M];for(const M in this._tiles)this._setTileReloadTimer(M,this._tiles[M])}}update(s,g){if(this.transform=s,this.terrain=g,!this._sourceLoaded||this._paused)return;let I;this.updateCacheSize(s),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?I=s.getVisibleUnwrappedCoordinates(this._source.tileID).map(m=>new o.O(m.canonical.z,m.wrap,m.canonical.z,m.canonical.x,m.canonical.y)):(I=s.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:g}),this._source.hasTile&&(I=I.filter(m=>this._source.hasTile(m)))):I=[];const M=s.coveringZoomLevel(this._source),F=Math.max(M-Wi.maxOverzooming,this._source.minzoom),q=Math.max(M+Wi.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const m={};for(const b of I)if(b.canonical.z>this._source.minzoom){const T=b.scaledTo(b.canonical.z-1);m[T.key]=T;const z=b.scaledTo(Math.max(this._source.minzoom,Math.min(b.canonical.z,5)));m[z.key]=z}I=I.concat(Object.values(m))}const A=I.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,A&&this.fire(new o.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const l=this._updateRetainedTiles(I,M);if(gn(this._source.type)){const m={},b={},T=Object.keys(l),z=o.h.now();for(const N of T){const X=l[N],te=this._tiles[N];if(!te||te.fadeEndTime!==0&&te.fadeEndTime<=z)continue;const ve=this.findLoadedParent(X,F);ve&&(this._addTile(ve.tileID),m[ve.tileID.key]=ve.tileID),b[N]=X}this._retainLoadedChildren(b,M,q,l);for(const N in m)l[N]||(this._coveredTiles[N]=!0,l[N]=m[N]);if(g){const N={},X={};for(const te of I)this._tiles[te.key].hasData()?N[te.key]=te:X[te.key]=te;for(const te in X){const ve=X[te].children(this._source.maxzoom);this._tiles[ve[0].key]&&this._tiles[ve[1].key]&&this._tiles[ve[2].key]&&this._tiles[ve[3].key]&&(N[ve[0].key]=l[ve[0].key]=ve[0],N[ve[1].key]=l[ve[1].key]=ve[1],N[ve[2].key]=l[ve[2].key]=ve[2],N[ve[3].key]=l[ve[3].key]=ve[3],delete X[te])}for(const te in X){const ve=this.findLoadedParent(X[te],this._source.minzoom);if(ve){N[ve.tileID.key]=l[ve.tileID.key]=ve.tileID;for(const De in N)N[De].isChildOf(ve.tileID)&&delete N[De]}}for(const te in this._tiles)N[te]||(this._coveredTiles[te]=!0)}}for(const m in l)this._tiles[m].clearFadeHold();const f=o.ab(this._tiles,l);for(const m of f){const b=this._tiles[m];b.hasSymbolBuckets&&!b.holdingForFade()?b.setHoldDuration(this.map._fadeDuration):b.hasSymbolBuckets&&!b.symbolFadeFinished()||this._removeTile(m)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const s in this._tiles)this._tiles[s].holdingForFade()&&this._removeTile(s)}_updateRetainedTiles(s,g){const I={},M={},F=Math.max(g-Wi.maxOverzooming,this._source.minzoom),q=Math.max(g+Wi.maxUnderzooming,this._source.minzoom),A={};for(const l of s){const f=this._addTile(l);I[l.key]=l,f.hasData()||g<this._source.maxzoom&&(A[l.key]=l)}this._retainLoadedChildren(A,g,q,I);for(const l of s){let f=this._tiles[l.key];if(f.hasData())continue;if(g+1>this._source.maxzoom){const b=l.children(this._source.maxzoom)[0],T=this.getTile(b);if(T&&T.hasData()){I[b.key]=b;continue}}else{const b=l.children(this._source.maxzoom);if(I[b[0].key]&&I[b[1].key]&&I[b[2].key]&&I[b[3].key])continue}let m=f.wasRequested();for(let b=l.overscaledZ-1;b>=F;--b){const T=l.scaledTo(b);if(M[T.key])break;if(M[T.key]=!0,f=this.getTile(T),!f&&m&&(f=this._addTile(T)),f){const z=f.hasData();if((m||z)&&(I[T.key]=T),m=f.wasRequested(),z)break}}}return I}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const s in this._tiles){const g=[];let I,M=this._tiles[s].tileID;for(;M.overscaledZ>0;){if(M.key in this._loadedParentTiles){I=this._loadedParentTiles[M.key];break}g.push(M.key);const F=M.scaledTo(M.overscaledZ-1);if(I=this._getLoadedTile(F),I)break;M=F}for(const F of g)this._loadedParentTiles[F]=I}}_addTile(s){let g=this._tiles[s.key];if(g)return g;g=this._cache.getAndRemove(s),g&&(this._setTileReloadTimer(s.key,g),g.tileID=s,this._state.initializeTileState(g,this.map?this.map.painter:null),this._cacheTimers[s.key]&&(clearTimeout(this._cacheTimers[s.key]),delete this._cacheTimers[s.key],this._setTileReloadTimer(s.key,g)));const I=g;return g||(g=new sn(s,this._source.tileSize*s.overscaleFactor()),this._loadTile(g,this._tileLoaded.bind(this,g,s.key,g.state))),g.uses++,this._tiles[s.key]=g,I||this._source.fire(new o.k("dataloading",{tile:g,coord:g.tileID,dataType:"source"})),g}_setTileReloadTimer(s,g){s in this._timers&&(clearTimeout(this._timers[s]),delete this._timers[s]);const I=g.getExpiryTimeout();I&&(this._timers[s]=setTimeout(()=>{this._reloadTile(s,"expired"),delete this._timers[s]},I))}_removeTile(s){const g=this._tiles[s];g&&(g.uses--,delete this._tiles[s],this._timers[s]&&(clearTimeout(this._timers[s]),delete this._timers[s]),g.uses>0||(g.hasData()&&g.state!=="reloading"?this._cache.add(g.tileID,g,g.getExpiryTimeout()):(g.aborted=!0,this._abortTile(g),this._unloadTile(g))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const s in this._tiles)this._removeTile(s);this._cache.reset()}tilesIn(s,g,I){const M=[],F=this.transform;if(!F)return M;const q=I?F.getCameraQueryGeometry(s):s,A=s.map(N=>F.pointCoordinate(N,this.terrain)),l=q.map(N=>F.pointCoordinate(N,this.terrain)),f=this.getIds();let m=1/0,b=1/0,T=-1/0,z=-1/0;for(const N of l)m=Math.min(m,N.x),b=Math.min(b,N.y),T=Math.max(T,N.x),z=Math.max(z,N.y);for(let N=0;N<f.length;N++){const X=this._tiles[f[N]];if(X.holdingForFade())continue;const te=X.tileID,ve=Math.pow(2,F.zoom-X.tileID.overscaledZ),De=g*X.queryPadding*o.N/X.tileSize/ve,He=[te.getTilePoint(new o.U(m,b)),te.getTilePoint(new o.U(T,z))];if(He[0].x-De<o.N&&He[0].y-De<o.N&&He[1].x+De>=0&&He[1].y+De>=0){const nt=A.map(gt=>te.getTilePoint(gt)),st=l.map(gt=>te.getTilePoint(gt));M.push({tile:X,tileID:te,queryGeometry:nt,cameraQueryGeometry:st,scale:ve})}}return M}getVisibleCoordinates(s){const g=this.getRenderableIds(s).map(I=>this._tiles[I].tileID);for(const I of g)I.posMatrix=this.transform.calculatePosMatrix(I.toUnwrapped());return g}hasTransition(){if(this._source.hasTransition())return!0;if(gn(this._source.type)){const s=o.h.now();for(const g in this._tiles)if(this._tiles[g].fadeEndTime>=s)return!0}return!1}setFeatureState(s,g,I){this._state.updateState(s=s||"_geojsonTileLayer",g,I)}removeFeatureState(s,g,I){this._state.removeFeatureState(s=s||"_geojsonTileLayer",g,I)}getFeatureState(s,g){return this._state.getState(s=s||"_geojsonTileLayer",g)}setDependencies(s,g,I){const M=this._tiles[s];M&&M.setDependencies(g,I)}reloadTilesForDependencies(s,g){for(const I in this._tiles)this._tiles[I].hasDependency(s,g)&&this._reloadTile(I,"reloading");this._cache.filter(I=>!I.hasDependency(s,g))}}function ir(R,s){const g=Math.abs(2*R.wrap)-+(R.wrap<0),I=Math.abs(2*s.wrap)-+(s.wrap<0);return R.overscaledZ-s.overscaledZ||I-g||s.canonical.y-R.canonical.y||s.canonical.x-R.canonical.x}function gn(R){return R==="raster"||R==="image"||R==="video"}Wi.maxOverzooming=10,Wi.maxUnderzooming=3;const kn="mapboxgl_preloaded_worker_pool";class an{constructor(){this.active={}}acquire(s){if(!this.workers)for(this.workers=[];this.workers.length<an.workerCount;)this.workers.push(new Worker(o.c.WORKER_URL));return this.active[s]=!0,this.workers.slice()}release(s){delete this.active[s],this.numActive()===0&&(this.workers.forEach(g=>{g.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[kn]}numActive(){return Object.keys(this.active).length}}const d=Math.floor(o.h.hardwareConcurrency/2);let y;function D(){return y||(y=new an),y}an.workerCount=o.ac(globalThis)?Math.max(Math.min(d,3),1):1;class U{constructor(s,g){this.reset(s,g)}reset(s,g){this.points=s||[],this._distances=[0];for(let I=1;I<this.points.length;I++)this._distances[I]=this._distances[I-1]+this.points[I].dist(this.points[I-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(g||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(s){if(this.points.length===1)return this.points[0];s=o.ad(s,0,1);let g=1,I=this._distances[g];const M=s*this.paddedLength+this.padding;for(;I<M&&g<this._distances.length;)I=this._distances[++g];const F=g-1,q=this._distances[F],A=I-q,l=A>0?(M-q)/A:0;return this.points[F].mult(1-l).add(this.points[g].mult(l))}}function Q(R,s){let g=!0;return R==="always"||R!=="never"&&s!=="never"||(g=!1),g}class K{constructor(s,g,I){const M=this.boxCells=[],F=this.circleCells=[];this.xCellCount=Math.ceil(s/I),this.yCellCount=Math.ceil(g/I);for(let q=0;q<this.xCellCount*this.yCellCount;q++)M.push([]),F.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=s,this.height=g,this.xScale=this.xCellCount/s,this.yScale=this.yCellCount/g,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(s,g,I,M,F){this._forEachCell(g,I,M,F,this._insertBoxCell,this.boxUid++),this.boxKeys.push(s),this.bboxes.push(g),this.bboxes.push(I),this.bboxes.push(M),this.bboxes.push(F)}insertCircle(s,g,I,M){this._forEachCell(g-M,I-M,g+M,I+M,this._insertCircleCell,this.circleUid++),this.circleKeys.push(s),this.circles.push(g),this.circles.push(I),this.circles.push(M)}_insertBoxCell(s,g,I,M,F,q){this.boxCells[F].push(q)}_insertCircleCell(s,g,I,M,F,q){this.circleCells[F].push(q)}_query(s,g,I,M,F,q,A){if(I<0||s>this.width||M<0||g>this.height)return[];const l=[];if(s<=0&&g<=0&&this.width<=I&&this.height<=M){if(F)return[{key:null,x1:s,y1:g,x2:I,y2:M}];for(let f=0;f<this.boxKeys.length;f++)l.push({key:this.boxKeys[f],x1:this.bboxes[4*f],y1:this.bboxes[4*f+1],x2:this.bboxes[4*f+2],y2:this.bboxes[4*f+3]});for(let f=0;f<this.circleKeys.length;f++){const m=this.circles[3*f],b=this.circles[3*f+1],T=this.circles[3*f+2];l.push({key:this.circleKeys[f],x1:m-T,y1:b-T,x2:m+T,y2:b+T})}}else this._forEachCell(s,g,I,M,this._queryCell,l,{hitTest:F,overlapMode:q,seenUids:{box:{},circle:{}}},A);return l}query(s,g,I,M){return this._query(s,g,I,M,!1,null)}hitTest(s,g,I,M,F,q){return this._query(s,g,I,M,!0,F,q).length>0}hitTestCircle(s,g,I,M,F){const q=s-I,A=s+I,l=g-I,f=g+I;if(A<0||q>this.width||f<0||l>this.height)return!1;const m=[];return this._forEachCell(q,l,A,f,this._queryCellCircle,m,{hitTest:!0,overlapMode:M,circle:{x:s,y:g,radius:I},seenUids:{box:{},circle:{}}},F),m.length>0}_queryCell(s,g,I,M,F,q,A,l){const{seenUids:f,hitTest:m,overlapMode:b}=A,T=this.boxCells[F];if(T!==null){const N=this.bboxes;for(const X of T)if(!f.box[X]){f.box[X]=!0;const te=4*X,ve=this.boxKeys[X];if(s<=N[te+2]&&g<=N[te+3]&&I>=N[te+0]&&M>=N[te+1]&&(!l||l(ve))&&(!m||!Q(b,ve.overlapMode))&&(q.push({key:ve,x1:N[te],y1:N[te+1],x2:N[te+2],y2:N[te+3]}),m))return!0}}const z=this.circleCells[F];if(z!==null){const N=this.circles;for(const X of z)if(!f.circle[X]){f.circle[X]=!0;const te=3*X,ve=this.circleKeys[X];if(this._circleAndRectCollide(N[te],N[te+1],N[te+2],s,g,I,M)&&(!l||l(ve))&&(!m||!Q(b,ve.overlapMode))){const De=N[te],He=N[te+1],nt=N[te+2];if(q.push({key:ve,x1:De-nt,y1:He-nt,x2:De+nt,y2:He+nt}),m)return!0}}}return!1}_queryCellCircle(s,g,I,M,F,q,A,l){const{circle:f,seenUids:m,overlapMode:b}=A,T=this.boxCells[F];if(T!==null){const N=this.bboxes;for(const X of T)if(!m.box[X]){m.box[X]=!0;const te=4*X,ve=this.boxKeys[X];if(this._circleAndRectCollide(f.x,f.y,f.radius,N[te+0],N[te+1],N[te+2],N[te+3])&&(!l||l(ve))&&!Q(b,ve.overlapMode))return q.push(!0),!0}}const z=this.circleCells[F];if(z!==null){const N=this.circles;for(const X of z)if(!m.circle[X]){m.circle[X]=!0;const te=3*X,ve=this.circleKeys[X];if(this._circlesCollide(N[te],N[te+1],N[te+2],f.x,f.y,f.radius)&&(!l||l(ve))&&!Q(b,ve.overlapMode))return q.push(!0),!0}}}_forEachCell(s,g,I,M,F,q,A,l){const f=this._convertToXCellCoord(s),m=this._convertToYCellCoord(g),b=this._convertToXCellCoord(I),T=this._convertToYCellCoord(M);for(let z=f;z<=b;z++)for(let N=m;N<=T;N++)if(F.call(this,s,g,I,M,this.xCellCount*N+z,q,A,l))return}_convertToXCellCoord(s){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(s*this.xScale)))}_convertToYCellCoord(s){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(s*this.yScale)))}_circlesCollide(s,g,I,M,F,q){const A=M-s,l=F-g,f=I+q;return f*f>A*A+l*l}_circleAndRectCollide(s,g,I,M,F,q,A){const l=(q-M)/2,f=Math.abs(s-(M+l));if(f>l+I)return!1;const m=(A-F)/2,b=Math.abs(g-(F+m));if(b>m+I)return!1;if(f<=l||b<=m)return!0;const T=f-l,z=b-m;return T*T+z*z<=I*I}}function ie(R,s,g,I,M){const F=o.Z();return s?(o.a0(F,F,[1/M,1/M,1]),g||o.ae(F,F,I.angle)):o.a1(F,I.labelPlaneMatrix,R),F}function Ae(R,s,g,I,M){if(s){const F=o.af(R);return o.a0(F,F,[M,M,1]),g||o.ae(F,F,-I.angle),F}return I.glCoordMatrix}function fe(R,s,g){let I;g?(I=[R.x,R.y,g(R.x,R.y),1],o.ag(I,I,s)):(I=[R.x,R.y,0,1],me(I,I,s));const M=I[3];return{point:new o.P(I[0]/M,I[1]/M),signedDistanceFromCamera:M}}function ye(R,s){return .5+R/s*.5}function Le(R,s){const g=R[0]/R[3],I=R[1]/R[3];return g>=-s[0]&&g<=s[0]&&I>=-s[1]&&I<=s[1]}function we(R,s,g,I,M,F,q,A,l,f){const m=I?R.textSizeData:R.iconSizeData,b=o.ah(m,g.transform.zoom),T=[256/g.width*2+1,256/g.height*2+1],z=I?R.text.dynamicLayoutVertexArray:R.icon.dynamicLayoutVertexArray;z.clear();const N=R.lineVertexArray,X=I?R.text.placedSymbolArray:R.icon.placedSymbolArray,te=g.transform.width/g.transform.height;let ve=!1;for(let De=0;De<X.length;De++){const He=X.get(De);if(He.hidden||He.writingMode===o.ai.vertical&&!ve){he(He.numGlyphs,z);continue}let nt;if(ve=!1,f?(nt=[He.anchorX,He.anchorY,f(He.anchorX,He.anchorY),1],o.ag(nt,nt,s)):(nt=[He.anchorX,He.anchorY,0,1],me(nt,nt,s)),!Le(nt,T)){he(He.numGlyphs,z);continue}const st=ye(g.transform.cameraToCenterDistance,nt[3]),gt=o.aj(m,b,He),Ot=q?gt/st:gt*st,Ut=new o.P(He.anchorX,He.anchorY),Mt=fe(Ut,M,f).point,zt={projections:{},offsets:{}},Ft=je(He,Ot,!1,A,s,M,F,R.glyphOffsetArray,N,z,Mt,Ut,zt,te,l,f);ve=Ft.useVertical,(Ft.notEnoughRoom||ve||Ft.needsFlipping&&je(He,Ot,!0,A,s,M,F,R.glyphOffsetArray,N,z,Mt,Ut,zt,te,l,f).notEnoughRoom)&&he(He.numGlyphs,z)}I?R.text.dynamicLayoutVertexBuffer.updateData(z):R.icon.dynamicLayoutVertexBuffer.updateData(z)}function Te(R,s,g,I,M,F,q,A,l,f,m,b,T){const z=A.glyphStartIndex+A.numGlyphs,N=A.lineStartIndex,X=A.lineStartIndex+A.lineLength,te=s.getoffsetX(A.glyphStartIndex),ve=s.getoffsetX(z-1),De=Y(R*te,g,I,M,F,q,A.segment,N,X,l,f,m,b,T);if(!De)return null;const He=Y(R*ve,g,I,M,F,q,A.segment,N,X,l,f,m,b,T);return He?{first:De,last:He}:null}function Ce(R,s,g,I){return R===o.ai.horizontal&&Math.abs(g.y-s.y)>Math.abs(g.x-s.x)*I?{useVertical:!0}:(R===o.ai.vertical?s.y<g.y:s.x>g.x)?{needsFlipping:!0}:null}function je(R,s,g,I,M,F,q,A,l,f,m,b,T,z,N,X){const te=s/24,ve=R.lineOffsetX*te,De=R.lineOffsetY*te;let He;if(R.numGlyphs>1){const nt=R.glyphStartIndex+R.numGlyphs,st=R.lineStartIndex,gt=R.lineStartIndex+R.lineLength,Ot=Te(te,A,ve,De,g,m,b,R,l,F,T,N,X);if(!Ot)return{notEnoughRoom:!0};const Ut=fe(Ot.first.point,q,X).point,Mt=fe(Ot.last.point,q,X).point;if(I&&!g){const zt=Ce(R.writingMode,Ut,Mt,z);if(zt)return zt}He=[Ot.first];for(let zt=R.glyphStartIndex+1;zt<nt-1;zt++)He.push(Y(te*A.getoffsetX(zt),ve,De,g,m,b,R.segment,st,gt,l,F,T,N,X));He.push(Ot.last)}else{if(I&&!g){const st=fe(b,M,X).point,gt=R.lineStartIndex+R.segment+1,Ot=new o.P(l.getx(gt),l.gety(gt)),Ut=fe(Ot,M,X),Mt=Ut.signedDistanceFromCamera>0?Ut.point:Ne(b,Ot,st,1,M,X),zt=Ce(R.writingMode,st,Mt,z);if(zt)return zt}const nt=Y(te*A.getoffsetX(R.glyphStartIndex),ve,De,g,m,b,R.segment,R.lineStartIndex,R.lineStartIndex+R.lineLength,l,F,T,N,X);if(!nt)return{notEnoughRoom:!0};He=[nt]}for(const nt of He)o.ak(f,nt.point,nt.angle);return{}}function Ne(R,s,g,I,M,F){const q=fe(R.add(R.sub(s)._unit()),M,F).point,A=g.sub(q);return g.add(A._mult(I/A.mag()))}function Ue(R,s){const{projectionCache:g,lineVertexArray:I,labelPlaneMatrix:M,tileAnchorPoint:F,distanceFromAnchor:q,getElevation:A,previousVertex:l,direction:f,absOffsetX:m}=s;if(g.projections[R])return g.projections[R];const b=new o.P(I.getx(R),I.gety(R)),T=fe(b,M,A);if(T.signedDistanceFromCamera>0)return g.projections[R]=T.point,T.point;const z=R-f;return Ne(q===0?F:new o.P(I.getx(z),I.gety(z)),b,l,m-q+1,M,A)}function de(R,s,g){return R._unit()._perp()._mult(s*g)}function ue(R,s,g,I,M,F,q,A){const{projectionCache:l,direction:f}=A;if(l.offsets[R])return l.offsets[R];const m=g.add(s);if(R+f<I||R+f>=M)return l.offsets[R]=m,m;const b=Ue(R+f,A),T=de(b.sub(g),q,f),z=g.add(T),N=b.add(T);return l.offsets[R]=o.al(F,m,z,N)||m,l.offsets[R]}function Y(R,s,g,I,M,F,q,A,l,f,m,b,T,z){const N=I?R-s:R+s;let X=N>0?1:-1,te=0;I&&(X*=-1,te=Math.PI),X<0&&(te+=Math.PI);let ve,De,He=X>0?A+q:A+q+1,nt=M,st=M,gt=0,Ot=0;const Ut=Math.abs(N),Mt=[];let zt;for(;gt+Ot<=Ut;){if(He+=X,He<A||He>=l)return null;gt+=Ot,st=nt,De=ve;const hi={projectionCache:b,lineVertexArray:f,labelPlaneMatrix:m,tileAnchorPoint:F,distanceFromAnchor:gt,getElevation:z,previousVertex:st,direction:X,absOffsetX:Ut};if(nt=Ue(He,hi),g===0)Mt.push(st),zt=nt.sub(st);else{let xi;const bi=nt.sub(st);xi=bi.mag()===0?de(Ue(He+X,hi).sub(nt),g,X):de(bi,g,X),De||(De=st.add(xi)),ve=ue(He,xi,nt,A,l,De,g,hi),Mt.push(De),zt=ve.sub(De)}Ot=zt.mag()}const Ft=zt._mult((Ut-gt)/Ot)._add(De||st),Bi=te+Math.atan2(nt.y-st.y,nt.x-st.x);return Mt.push(Ft),{point:Ft,angle:T?Bi:0,path:Mt}}const ne=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function he(R,s){for(let g=0;g<R;g++){const I=s.length;s.resize(I+4),s.float32.set(ne,3*I)}}function me(R,s,g){const I=s[0],M=s[1];return R[0]=g[0]*I+g[4]*M+g[12],R[1]=g[1]*I+g[5]*M+g[13],R[3]=g[3]*I+g[7]*M+g[15],R}const pe=100;class Oe{constructor(s,g=new K(s.width+200,s.height+200,25),I=new K(s.width+200,s.height+200,25)){this.transform=s,this.grid=g,this.ignoredGrid=I,this.pitchfactor=Math.cos(s._pitch)*s.cameraToCenterDistance,this.screenRightBoundary=s.width+pe,this.screenBottomBoundary=s.height+pe,this.gridRightBoundary=s.width+200,this.gridBottomBoundary=s.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(s,g,I,M,F,q){const A=this.projectAndGetPerspectiveRatio(M,s.anchorPointX,s.anchorPointY,q),l=I*A.perspectiveRatio,f=s.x1*l+A.point.x,m=s.y1*l+A.point.y,b=s.x2*l+A.point.x,T=s.y2*l+A.point.y;return!this.isInsideGrid(f,m,b,T)||g!=="always"&&this.grid.hitTest(f,m,b,T,g,F)||A.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[f,m,b,T],offscreen:this.isOffscreen(f,m,b,T)}}placeCollisionCircles(s,g,I,M,F,q,A,l,f,m,b,T,z,N){const X=[],te=new o.P(g.anchorX,g.anchorY),ve=fe(te,q,N),De=ye(this.transform.cameraToCenterDistance,ve.signedDistanceFromCamera),He=(m?F/De:F*De)/o.ap,nt=fe(te,A,N).point,st=Te(He,M,g.lineOffsetX*He,g.lineOffsetY*He,!1,nt,te,g,I,A,{projections:{},offsets:{}},!1,N);let gt=!1,Ot=!1,Ut=!0;if(st){const Mt=.5*T*De+z,zt=new o.P(-100,-100),Ft=new o.P(this.screenRightBoundary,this.screenBottomBoundary),Bi=new U,hi=st.first,xi=st.last;let bi=[];for(let tn=hi.path.length-1;tn>=1;tn--)bi.push(hi.path[tn]);for(let tn=1;tn<xi.path.length;tn++)bi.push(xi.path[tn]);const Dn=2.5*Mt;if(l){const tn=bi.map(on=>fe(on,l,N));bi=tn.some(on=>on.signedDistanceFromCamera<=0)?[]:tn.map(on=>on.point)}let dn=[];if(bi.length>0){const tn=bi[0].clone(),on=bi[0].clone();for(let mn=1;mn<bi.length;mn++)tn.x=Math.min(tn.x,bi[mn].x),tn.y=Math.min(tn.y,bi[mn].y),on.x=Math.max(on.x,bi[mn].x),on.y=Math.max(on.y,bi[mn].y);dn=tn.x>=zt.x&&on.x<=Ft.x&&tn.y>=zt.y&&on.y<=Ft.y?[bi]:on.x<zt.x||tn.x>Ft.x||on.y<zt.y||tn.y>Ft.y?[]:o.am([bi],zt.x,zt.y,Ft.x,Ft.y)}for(const tn of dn){Bi.reset(tn,.25*Mt);let on=0;on=Bi.length<=.5*Mt?1:Math.ceil(Bi.paddedLength/Dn)+1;for(let mn=0;mn<on;mn++){const cn=mn/Math.max(on-1,1),$n=Bi.lerp(cn),Tn=$n.x+pe,Wn=$n.y+pe;X.push(Tn,Wn,Mt,0);const $r=Tn-Mt,qr=Wn-Mt,QA=Tn+Mt,ml=Wn+Mt;if(Ut=Ut&&this.isOffscreen($r,qr,QA,ml),Ot=Ot||this.isInsideGrid($r,qr,QA,ml),s!=="always"&&this.grid.hitTestCircle(Tn,Wn,Mt,s,b)&&(gt=!0,!f))return{circles:[],offscreen:!1,collisionDetected:gt}}}}return{circles:!f&&gt||!Ot||De<this.perspectiveRatioCutoff?[]:X,offscreen:Ut,collisionDetected:gt}}queryRenderedSymbols(s){if(s.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const g=[];let I=1/0,M=1/0,F=-1/0,q=-1/0;for(const m of s){const b=new o.P(m.x+pe,m.y+pe);I=Math.min(I,b.x),M=Math.min(M,b.y),F=Math.max(F,b.x),q=Math.max(q,b.y),g.push(b)}const A=this.grid.query(I,M,F,q).concat(this.ignoredGrid.query(I,M,F,q)),l={},f={};for(const m of A){const b=m.key;if(l[b.bucketInstanceId]===void 0&&(l[b.bucketInstanceId]={}),l[b.bucketInstanceId][b.featureIndex])continue;const T=[new o.P(m.x1,m.y1),new o.P(m.x2,m.y1),new o.P(m.x2,m.y2),new o.P(m.x1,m.y2)];o.an(g,T)&&(l[b.bucketInstanceId][b.featureIndex]=!0,f[b.bucketInstanceId]===void 0&&(f[b.bucketInstanceId]=[]),f[b.bucketInstanceId].push(b.featureIndex))}return f}insertCollisionBox(s,g,I,M,F,q){(I?this.ignoredGrid:this.grid).insert({bucketInstanceId:M,featureIndex:F,collisionGroupID:q,overlapMode:g},s[0],s[1],s[2],s[3])}insertCollisionCircles(s,g,I,M,F,q){const A=I?this.ignoredGrid:this.grid,l={bucketInstanceId:M,featureIndex:F,collisionGroupID:q,overlapMode:g};for(let f=0;f<s.length;f+=4)A.insertCircle(l,s[f],s[f+1],s[f+2])}projectAndGetPerspectiveRatio(s,g,I,M){let F;return M?(F=[g,I,M(g,I),1],o.ag(F,F,s)):(F=[g,I,0,1],me(F,F,s)),{point:new o.P((F[0]/F[3]+1)/2*this.transform.width+pe,(-F[1]/F[3]+1)/2*this.transform.height+pe),perspectiveRatio:.5+this.transform.cameraToCenterDistance/F[3]*.5}}isOffscreen(s,g,I,M){return I<pe||s>=this.screenRightBoundary||M<pe||g>this.screenBottomBoundary}isInsideGrid(s,g,I,M){return I>=0&&s<this.gridRightBoundary&&M>=0&&g<this.gridBottomBoundary}getViewportMatrix(){const s=o.ao([]);return o.$(s,s,[-100,-100,0]),s}}function ze(R,s,g){return s*(o.N/(R.tileSize*Math.pow(2,g-R.tileID.overscaledZ)))}class Be{constructor(s,g,I,M){this.opacity=s?Math.max(0,Math.min(1,s.opacity+(s.placed?g:-g))):M&&I?1:0,this.placed=I}isHidden(){return this.opacity===0&&!this.placed}}class Ye{constructor(s,g,I,M,F){this.text=new Be(s?s.text:null,g,I,F),this.icon=new Be(s?s.icon:null,g,M,F)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Xe{constructor(s,g,I){this.text=s,this.icon=g,this.skipFade=I}}class ge{constructor(){this.invProjMatrix=o.Z(),this.viewportMatrix=o.Z(),this.circles=[]}}class Ee{constructor(s,g,I,M,F){this.bucketInstanceId=s,this.featureIndex=g,this.sourceLayerIndex=I,this.bucketIndex=M,this.tileID=F}}class tt{constructor(s){this.crossSourceCollisions=s,this.maxGroupID=0,this.collisionGroups={}}get(s){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[s]){const g=++this.maxGroupID;this.collisionGroups[s]={ID:g,predicate:I=>I.collisionGroupID===g}}return this.collisionGroups[s]}}function pt(R,s,g,I,M){const{horizontalAlign:F,verticalAlign:q}=o.au(R);return new o.P(-(F-.5)*s+I[0]*M,-(q-.5)*g+I[1]*M)}function n(R,s,g,I,M,F){const{x1:q,x2:A,y1:l,y2:f,anchorPointX:m,anchorPointY:b}=R,T=new o.P(s,g);return I&&T._rotate(M?F:-F),{x1:q+T.x,y1:l+T.y,x2:A+T.x,y2:f+T.y,anchorPointX:m,anchorPointY:b}}class ce{constructor(s,g,I,M,F){this.transform=s.clone(),this.terrain=g,this.collisionIndex=new Oe(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=I,this.retainedQueryData={},this.collisionGroups=new tt(M),this.collisionCircleArrays={},this.prevPlacement=F,F&&(F.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(s,g,I,M){const F=I.getBucket(g),q=I.latestFeatureIndex;if(!F||!q||g.id!==F.layerIds[0])return;const A=I.collisionBoxArray,l=F.layers[0].layout,f=Math.pow(2,this.transform.zoom-I.tileID.overscaledZ),m=I.tileSize/o.N,b=this.transform.calculatePosMatrix(I.tileID.toUnwrapped()),T=l.get("text-pitch-alignment")==="map",z=l.get("text-rotation-alignment")==="map",N=ze(I,1,this.transform.zoom),X=ie(b,T,z,this.transform,N);let te=null;if(T){const De=Ae(b,T,z,this.transform,N);te=o.a1([],this.transform.labelPlaneMatrix,De)}this.retainedQueryData[F.bucketInstanceId]=new Ee(F.bucketInstanceId,q,F.sourceLayerIndex,F.index,I.tileID);const ve={bucket:F,layout:l,posMatrix:b,textLabelPlaneMatrix:X,labelToScreenMatrix:te,scale:f,textPixelRatio:m,holdingForFade:I.holdingForFade(),collisionBoxArray:A,partiallyEvaluatedTextSize:o.ah(F.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(F.sourceID)};if(M)for(const De of F.sortKeyRanges){const{sortKey:He,symbolInstanceStart:nt,symbolInstanceEnd:st}=De;s.push({sortKey:He,symbolInstanceStart:nt,symbolInstanceEnd:st,parameters:ve})}else s.push({symbolInstanceStart:0,symbolInstanceEnd:F.symbolInstances.length,parameters:ve})}attemptAnchorPlacement(s,g,I,M,F,q,A,l,f,m,b,T,z,N,X,te){const ve=o.aq[s.textAnchor],De=[s.textOffset0,s.textOffset1],He=pt(ve,I,M,De,F),nt=this.collisionIndex.placeCollisionBox(n(g,He.x,He.y,q,A,this.transform.angle),b,l,f,m.predicate,te);if((!X||this.collisionIndex.placeCollisionBox(n(X,He.x,He.y,q,A,this.transform.angle),b,l,f,m.predicate,te).box.length!==0)&&nt.box.length>0){let st;if(this.prevPlacement&&this.prevPlacement.variableOffsets[T.crossTileID]&&this.prevPlacement.placements[T.crossTileID]&&this.prevPlacement.placements[T.crossTileID].text&&(st=this.prevPlacement.variableOffsets[T.crossTileID].anchor),T.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[T.crossTileID]={textOffset:De,width:I,height:M,anchor:ve,textBoxScale:F,prevAnchor:st},this.markUsedJustification(z,ve,T,N),z.allowVerticalPlacement&&(this.markUsedOrientation(z,N,T),this.placedOrientations[T.crossTileID]=N),{shift:He,placedGlyphBoxes:nt}}}placeLayerBucketPart(s,g,I){const{bucket:M,layout:F,posMatrix:q,textLabelPlaneMatrix:A,labelToScreenMatrix:l,textPixelRatio:f,holdingForFade:m,collisionBoxArray:b,partiallyEvaluatedTextSize:T,collisionGroup:z}=s.parameters,N=F.get("text-optional"),X=F.get("icon-optional"),te=o.ar(F,"text-overlap","text-allow-overlap"),ve=te==="always",De=o.ar(F,"icon-overlap","icon-allow-overlap"),He=De==="always",nt=F.get("text-rotation-alignment")==="map",st=F.get("text-pitch-alignment")==="map",gt=F.get("icon-text-fit")!=="none",Ot=F.get("symbol-z-order")==="viewport-y",Ut=ve&&(He||!M.hasIconData()||X),Mt=He&&(ve||!M.hasTextData()||N);!M.collisionArrays&&b&&M.deserializeCollisionBoxes(b);const zt=this.retainedQueryData[M.bucketInstanceId].tileID,Ft=this.terrain?(hi,xi)=>this.terrain.getElevation(zt,hi,xi):null,Bi=(hi,xi)=>{var bi,Dn;if(g[hi.crossTileID])return;if(m)return void(this.placements[hi.crossTileID]=new Xe(!1,!1,!1));let dn=!1,tn=!1,on=!0,mn=null,cn={box:null,offscreen:null},$n={box:null,offscreen:null},Tn=null,Wn=null,$r=null,qr=0,QA=0,ml=0;xi.textFeatureIndex?qr=xi.textFeatureIndex:hi.useRuntimeCollisionCircles&&(qr=hi.featureIndex),xi.verticalTextFeatureIndex&&(QA=xi.verticalTextFeatureIndex);const qA=xi.textBox;if(qA){const ss=js=>{let ua=o.ai.horizontal;if(M.allowVerticalPlacement&&!js&&this.prevPlacement){const Ea=this.prevPlacement.placedOrientations[hi.crossTileID];Ea&&(this.placedOrientations[hi.crossTileID]=Ea,ua=Ea,this.markUsedOrientation(M,ua,hi))}return ua},Ra=(js,ua)=>{if(M.allowVerticalPlacement&&hi.numVerticalGlyphVertices>0&&xi.verticalTextBox){for(const Ea of M.writingModes)if(Ea===o.ai.vertical?(cn=ua(),$n=cn):cn=js(),cn&&cn.box&&cn.box.length)break}else cn=js()},To=hi.textAnchorOffsetStartIndex,ko=hi.textAnchorOffsetEndIndex;if(ko===To){const js=(ua,Ea)=>{const $s=this.collisionIndex.placeCollisionBox(ua,te,f,q,z.predicate,Ft);return $s&&$s.box&&$s.box.length&&(this.markUsedOrientation(M,Ea,hi),this.placedOrientations[hi.crossTileID]=Ea),$s};Ra(()=>js(qA,o.ai.horizontal),()=>{const ua=xi.verticalTextBox;return M.allowVerticalPlacement&&hi.numVerticalGlyphVertices>0&&ua?js(ua,o.ai.vertical):{box:null,offscreen:null}}),ss(cn&&cn.box&&cn.box.length)}else{let js=o.aq[(Dn=(bi=this.prevPlacement)===null||bi===void 0?void 0:bi.variableOffsets[hi.crossTileID])===null||Dn===void 0?void 0:Dn.anchor];const ua=($s,pa,Qu)=>{const xf=$s.x2-$s.x1,wf=$s.y2-$s.y1,C0=hi.textBoxScale,hc=gt&&De==="never"?pa:null;let _l={box:[],offscreen:!1},ZA=te==="never"?1:2,jA="never";js&&ZA++;for(let PA=0;PA<ZA;PA++){for(let vl=To;vl<ko;vl++){const xu=M.textAnchorOffsets.get(vl);if(js&&xu.textAnchor!==js)continue;const Nl=this.attemptAnchorPlacement(xu,$s,xf,wf,C0,nt,st,f,q,z,jA,hi,M,Qu,hc,Ft);if(Nl&&(_l=Nl.placedGlyphBoxes,_l&&_l.box&&_l.box.length))return dn=!0,mn=Nl.shift,_l}js?js=null:jA=te}return _l};Ra(()=>ua(qA,xi.iconBox,o.ai.horizontal),()=>{const $s=xi.verticalTextBox;return M.allowVerticalPlacement&&!(cn&&cn.box&&cn.box.length)&&hi.numVerticalGlyphVertices>0&&$s?ua($s,xi.verticalIconBox,o.ai.vertical):{box:null,offscreen:null}}),cn&&(dn=cn.box,on=cn.offscreen);const Ea=ss(cn&&cn.box);if(!dn&&this.prevPlacement){const $s=this.prevPlacement.variableOffsets[hi.crossTileID];$s&&(this.variableOffsets[hi.crossTileID]=$s,this.markUsedJustification(M,$s.anchor,hi,Ea))}}}if(Tn=cn,dn=Tn&&Tn.box&&Tn.box.length>0,on=Tn&&Tn.offscreen,hi.useRuntimeCollisionCircles){const ss=M.text.placedSymbolArray.get(hi.centerJustifiedTextSymbolIndex),Ra=o.aj(M.textSizeData,T,ss),To=F.get("text-padding");Wn=this.collisionIndex.placeCollisionCircles(te,ss,M.lineVertexArray,M.glyphOffsetArray,Ra,q,A,l,I,st,z.predicate,hi.collisionCircleDiameter,To,Ft),Wn.circles.length&&Wn.collisionDetected&&!I&&o.w("Collisions detected, but collision boxes are not shown"),dn=ve||Wn.circles.length>0&&!Wn.collisionDetected,on=on&&Wn.offscreen}if(xi.iconFeatureIndex&&(ml=xi.iconFeatureIndex),xi.iconBox){const ss=Ra=>{const To=gt&&mn?n(Ra,mn.x,mn.y,nt,st,this.transform.angle):Ra;return this.collisionIndex.placeCollisionBox(To,De,f,q,z.predicate,Ft)};$n&&$n.box&&$n.box.length&&xi.verticalIconBox?($r=ss(xi.verticalIconBox),tn=$r.box.length>0):($r=ss(xi.iconBox),tn=$r.box.length>0),on=on&&$r.offscreen}const yu=N||hi.numHorizontalGlyphVertices===0&&hi.numVerticalGlyphVertices===0,bu=X||hi.numIconVertices===0;if(yu||bu?bu?yu||(tn=tn&&dn):dn=tn&&dn:tn=dn=tn&&dn,dn&&Tn&&Tn.box&&this.collisionIndex.insertCollisionBox(Tn.box,te,F.get("text-ignore-placement"),M.bucketInstanceId,$n&&$n.box&&QA?QA:qr,z.ID),tn&&$r&&this.collisionIndex.insertCollisionBox($r.box,De,F.get("icon-ignore-placement"),M.bucketInstanceId,ml,z.ID),Wn&&(dn&&this.collisionIndex.insertCollisionCircles(Wn.circles,te,F.get("text-ignore-placement"),M.bucketInstanceId,qr,z.ID),I)){const ss=M.bucketInstanceId;let Ra=this.collisionCircleArrays[ss];Ra===void 0&&(Ra=this.collisionCircleArrays[ss]=new ge);for(let To=0;To<Wn.circles.length;To+=4)Ra.circles.push(Wn.circles[To+0]),Ra.circles.push(Wn.circles[To+1]),Ra.circles.push(Wn.circles[To+2]),Ra.circles.push(Wn.collisionDetected?1:0)}if(hi.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(M.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[hi.crossTileID]=new Xe(dn||Ut,tn||Mt,on||M.justReloaded),g[hi.crossTileID]=!0};if(Ot){if(s.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const hi=M.getSortedSymbolIndexes(this.transform.angle);for(let xi=hi.length-1;xi>=0;--xi){const bi=hi[xi];Bi(M.symbolInstances.get(bi),M.collisionArrays[bi])}}else for(let hi=s.symbolInstanceStart;hi<s.symbolInstanceEnd;hi++)Bi(M.symbolInstances.get(hi),M.collisionArrays[hi]);if(I&&M.bucketInstanceId in this.collisionCircleArrays){const hi=this.collisionCircleArrays[M.bucketInstanceId];o.as(hi.invProjMatrix,q),hi.viewportMatrix=this.collisionIndex.getViewportMatrix()}M.justReloaded=!1}markUsedJustification(s,g,I,M){let F;F=M===o.ai.vertical?I.verticalPlacedTextSymbolIndex:{left:I.leftJustifiedTextSymbolIndex,center:I.centerJustifiedTextSymbolIndex,right:I.rightJustifiedTextSymbolIndex}[o.at(g)];const q=[I.leftJustifiedTextSymbolIndex,I.centerJustifiedTextSymbolIndex,I.rightJustifiedTextSymbolIndex,I.verticalPlacedTextSymbolIndex];for(const A of q)A>=0&&(s.text.placedSymbolArray.get(A).crossTileID=F>=0&&A!==F?0:I.crossTileID)}markUsedOrientation(s,g,I){const M=g===o.ai.horizontal||g===o.ai.horizontalOnly?g:0,F=g===o.ai.vertical?g:0,q=[I.leftJustifiedTextSymbolIndex,I.centerJustifiedTextSymbolIndex,I.rightJustifiedTextSymbolIndex];for(const A of q)s.text.placedSymbolArray.get(A).placedOrientation=M;I.verticalPlacedTextSymbolIndex&&(s.text.placedSymbolArray.get(I.verticalPlacedTextSymbolIndex).placedOrientation=F)}commit(s){this.commitTime=s,this.zoomAtLastRecencyCheck=this.transform.zoom;const g=this.prevPlacement;let I=!1;this.prevZoomAdjustment=g?g.zoomAdjustment(this.transform.zoom):0;const M=g?g.symbolFadeChange(s):1,F=g?g.opacities:{},q=g?g.variableOffsets:{},A=g?g.placedOrientations:{};for(const l in this.placements){const f=this.placements[l],m=F[l];m?(this.opacities[l]=new Ye(m,M,f.text,f.icon),I=I||f.text!==m.text.placed||f.icon!==m.icon.placed):(this.opacities[l]=new Ye(null,M,f.text,f.icon,f.skipFade),I=I||f.text||f.icon)}for(const l in F){const f=F[l];if(!this.opacities[l]){const m=new Ye(f,M,!1,!1);m.isHidden()||(this.opacities[l]=m,I=I||f.text.placed||f.icon.placed)}}for(const l in q)this.variableOffsets[l]||!this.opacities[l]||this.opacities[l].isHidden()||(this.variableOffsets[l]=q[l]);for(const l in A)this.placedOrientations[l]||!this.opacities[l]||this.opacities[l].isHidden()||(this.placedOrientations[l]=A[l]);if(g&&g.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");I?this.lastPlacementChangeTime=s:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=g?g.lastPlacementChangeTime:s)}updateLayerOpacities(s,g){const I={};for(const M of g){const F=M.getBucket(s);F&&M.latestFeatureIndex&&s.id===F.layerIds[0]&&this.updateBucketOpacities(F,I,M.collisionBoxArray)}}updateBucketOpacities(s,g,I){s.hasTextData()&&(s.text.opacityVertexArray.clear(),s.text.hasVisibleVertices=!1),s.hasIconData()&&(s.icon.opacityVertexArray.clear(),s.icon.hasVisibleVertices=!1),s.hasIconCollisionBoxData()&&s.iconCollisionBox.collisionVertexArray.clear(),s.hasTextCollisionBoxData()&&s.textCollisionBox.collisionVertexArray.clear();const M=s.layers[0],F=M.layout,q=new Ye(null,0,!1,!1,!0),A=F.get("text-allow-overlap"),l=F.get("icon-allow-overlap"),f=M._unevaluatedLayout.hasValue("text-variable-anchor")||M._unevaluatedLayout.hasValue("text-variable-anchor-offset"),m=F.get("text-rotation-alignment")==="map",b=F.get("text-pitch-alignment")==="map",T=F.get("icon-text-fit")!=="none",z=new Ye(null,0,A&&(l||!s.hasIconData()||F.get("icon-optional")),l&&(A||!s.hasTextData()||F.get("text-optional")),!0);!s.collisionArrays&&I&&(s.hasIconCollisionBoxData()||s.hasTextCollisionBoxData())&&s.deserializeCollisionBoxes(I);const N=(X,te,ve)=>{for(let De=0;De<te/4;De++)X.opacityVertexArray.emplaceBack(ve);X.hasVisibleVertices=X.hasVisibleVertices||ve!==Yi};for(let X=0;X<s.symbolInstances.length;X++){const te=s.symbolInstances.get(X),{numHorizontalGlyphVertices:ve,numVerticalGlyphVertices:De,crossTileID:He}=te;let nt=this.opacities[He];g[He]?nt=q:nt||(nt=z,this.opacities[He]=nt),g[He]=!0;const st=te.numIconVertices>0,gt=this.placedOrientations[te.crossTileID],Ot=gt===o.ai.vertical,Ut=gt===o.ai.horizontal||gt===o.ai.horizontalOnly;if(ve>0||De>0){const Mt=Rt(nt.text);N(s.text,ve,Ot?Yi:Mt),N(s.text,De,Ut?Yi:Mt);const zt=nt.text.isHidden();[te.rightJustifiedTextSymbolIndex,te.centerJustifiedTextSymbolIndex,te.leftJustifiedTextSymbolIndex].forEach(hi=>{hi>=0&&(s.text.placedSymbolArray.get(hi).hidden=zt||Ot?1:0)}),te.verticalPlacedTextSymbolIndex>=0&&(s.text.placedSymbolArray.get(te.verticalPlacedTextSymbolIndex).hidden=zt||Ut?1:0);const Ft=this.variableOffsets[te.crossTileID];Ft&&this.markUsedJustification(s,Ft.anchor,te,gt);const Bi=this.placedOrientations[te.crossTileID];Bi&&(this.markUsedJustification(s,"left",te,Bi),this.markUsedOrientation(s,Bi,te))}if(st){const Mt=Rt(nt.icon),zt=!(T&&te.verticalPlacedIconSymbolIndex&&Ot);te.placedIconSymbolIndex>=0&&(N(s.icon,te.numIconVertices,zt?Mt:Yi),s.icon.placedSymbolArray.get(te.placedIconSymbolIndex).hidden=nt.icon.isHidden()),te.verticalPlacedIconSymbolIndex>=0&&(N(s.icon,te.numVerticalIconVertices,zt?Yi:Mt),s.icon.placedSymbolArray.get(te.verticalPlacedIconSymbolIndex).hidden=nt.icon.isHidden())}if(s.hasIconCollisionBoxData()||s.hasTextCollisionBoxData()){const Mt=s.collisionArrays[X];if(Mt){let zt=new o.P(0,0);if(Mt.textBox||Mt.verticalTextBox){let Bi=!0;if(f){const hi=this.variableOffsets[He];hi?(zt=pt(hi.anchor,hi.width,hi.height,hi.textOffset,hi.textBoxScale),m&&zt._rotate(b?this.transform.angle:-this.transform.angle)):Bi=!1}Mt.textBox&&Zt(s.textCollisionBox.collisionVertexArray,nt.text.placed,!Bi||Ot,zt.x,zt.y),Mt.verticalTextBox&&Zt(s.textCollisionBox.collisionVertexArray,nt.text.placed,!Bi||Ut,zt.x,zt.y)}const Ft=!!(!Ut&&Mt.verticalIconBox);Mt.iconBox&&Zt(s.iconCollisionBox.collisionVertexArray,nt.icon.placed,Ft,T?zt.x:0,T?zt.y:0),Mt.verticalIconBox&&Zt(s.iconCollisionBox.collisionVertexArray,nt.icon.placed,!Ft,T?zt.x:0,T?zt.y:0)}}}if(s.sortFeatures(this.transform.angle),this.retainedQueryData[s.bucketInstanceId]&&(this.retainedQueryData[s.bucketInstanceId].featureSortOrder=s.featureSortOrder),s.hasTextData()&&s.text.opacityVertexBuffer&&s.text.opacityVertexBuffer.updateData(s.text.opacityVertexArray),s.hasIconData()&&s.icon.opacityVertexBuffer&&s.icon.opacityVertexBuffer.updateData(s.icon.opacityVertexArray),s.hasIconCollisionBoxData()&&s.iconCollisionBox.collisionVertexBuffer&&s.iconCollisionBox.collisionVertexBuffer.updateData(s.iconCollisionBox.collisionVertexArray),s.hasTextCollisionBoxData()&&s.textCollisionBox.collisionVertexBuffer&&s.textCollisionBox.collisionVertexBuffer.updateData(s.textCollisionBox.collisionVertexArray),s.text.opacityVertexArray.length!==s.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${s.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${s.text.layoutVertexArray.length}) / 4`);if(s.icon.opacityVertexArray.length!==s.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${s.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${s.icon.layoutVertexArray.length}) / 4`);if(s.bucketInstanceId in this.collisionCircleArrays){const X=this.collisionCircleArrays[s.bucketInstanceId];s.placementInvProjMatrix=X.invProjMatrix,s.placementViewportMatrix=X.viewportMatrix,s.collisionCircleArray=X.circles,delete this.collisionCircleArrays[s.bucketInstanceId]}}symbolFadeChange(s){return this.fadeDuration===0?1:(s-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(s){return Math.max(0,(this.transform.zoom-s)/1.5)}hasTransitions(s){return this.stale||s-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(s,g){const I=this.zoomAtLastRecencyCheck===g?1-this.zoomAdjustment(g):1;return this.zoomAtLastRecencyCheck=g,this.commitTime+this.fadeDuration*I>s}setStale(){this.stale=!0}}function Zt(R,s,g,I,M){R.emplaceBack(s?1:0,g?1:0,I||0,M||0),R.emplaceBack(s?1:0,g?1:0,I||0,M||0),R.emplaceBack(s?1:0,g?1:0,I||0,M||0),R.emplaceBack(s?1:0,g?1:0,I||0,M||0)}const Jt=Math.pow(2,25),ui=Math.pow(2,24),Vt=Math.pow(2,17),qt=Math.pow(2,16),Ei=Math.pow(2,9),Ai=Math.pow(2,8),pi=Math.pow(2,1);function Rt(R){if(R.opacity===0&&!R.placed)return 0;if(R.opacity===1&&R.placed)return 4294967295;const s=R.placed?1:0,g=Math.floor(127*R.opacity);return g*Jt+s*ui+g*Vt+s*qt+g*Ei+s*Ai+g*pi+s}const Yi=0;class Rn{constructor(s){this._sortAcrossTiles=s.layout.get("symbol-z-order")!=="viewport-y"&&!s.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(s,g,I,M,F){const q=this._bucketParts;for(;this._currentTileIndex<s.length;)if(g.getBucketParts(q,M,s[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,F())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,q.sort((A,l)=>A.sortKey-l.sortKey));this._currentPartIndex<q.length;)if(g.placeLayerBucketPart(q[this._currentPartIndex],this._seenCrossTileIDs,I),this._currentPartIndex++,F())return!0;return!1}}class wn{constructor(s,g,I,M,F,q,A,l){this.placement=new ce(s,g,q,A,l),this._currentPlacementIndex=I.length-1,this._forceFullPlacement=M,this._showCollisionBoxes=F,this._done=!1}isDone(){return this._done}continuePlacement(s,g,I){const M=o.h.now(),F=()=>!this._forceFullPlacement&&o.h.now()-M>2;for(;this._currentPlacementIndex>=0;){const q=g[s[this._currentPlacementIndex]],A=this.placement.collisionIndex.transform.zoom;if(q.type==="symbol"&&(!q.minzoom||q.minzoom<=A)&&(!q.maxzoom||q.maxzoom>A)){if(this._inProgressLayer||(this._inProgressLayer=new Rn(q)),this._inProgressLayer.continuePlacement(I[q.source],this.placement,this._showCollisionBoxes,q,F))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(s){return this.placement.commit(s),this.placement}}const pn=512/o.N/2;class vr{constructor(s,g,I){this.tileID=s,this.bucketInstanceId=I,this._symbolsByKey={};const M=new Map;for(let F=0;F<g.length;F++){const q=g.get(F),A=q.key,l=M.get(A);l?l.push(q):M.set(A,[q])}for(const[F,q]of M){const A={positions:q.map(l=>({x:Math.floor(l.anchorX*pn),y:Math.floor(l.anchorY*pn)})),crossTileIDs:q.map(l=>l.crossTileID)};if(A.positions.length>128){const l=new o.av(A.positions.length,16,Uint16Array);for(const{x:f,y:m}of A.positions)l.add(f,m);l.finish(),delete A.positions,A.index=l}this._symbolsByKey[F]=A}}getScaledCoordinates(s,g){const{x:I,y:M,z:F}=this.tileID.canonical,{x:q,y:A,z:l}=g.canonical,f=pn/Math.pow(2,l-F),m=(A*o.N+s.anchorY)*f,b=M*o.N*pn;return{x:Math.floor((q*o.N+s.anchorX)*f-I*o.N*pn),y:Math.floor(m-b)}}findMatches(s,g,I){const M=this.tileID.canonical.z<g.canonical.z?1:Math.pow(2,this.tileID.canonical.z-g.canonical.z);for(let F=0;F<s.length;F++){const q=s.get(F);if(q.crossTileID)continue;const A=this._symbolsByKey[q.key];if(!A)continue;const l=this.getScaledCoordinates(q,g);if(A.index){const f=A.index.range(l.x-M,l.y-M,l.x+M,l.y+M).sort();for(const m of f){const b=A.crossTileIDs[m];if(!I[b]){I[b]=!0,q.crossTileID=b;break}}}else if(A.positions)for(let f=0;f<A.positions.length;f++){const m=A.positions[f],b=A.crossTileIDs[f];if(Math.abs(m.x-l.x)<=M&&Math.abs(m.y-l.y)<=M&&!I[b]){I[b]=!0,q.crossTileID=b;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:s})=>s)}}class Mi{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class nr{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(s){const g=Math.round((s-this.lng)/360);if(g!==0)for(const I in this.indexes){const M=this.indexes[I],F={};for(const q in M){const A=M[q];A.tileID=A.tileID.unwrapTo(A.tileID.wrap+g),F[A.tileID.key]=A}this.indexes[I]=F}this.lng=s}addBucket(s,g,I){if(this.indexes[s.overscaledZ]&&this.indexes[s.overscaledZ][s.key]){if(this.indexes[s.overscaledZ][s.key].bucketInstanceId===g.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(s.overscaledZ,this.indexes[s.overscaledZ][s.key])}for(let F=0;F<g.symbolInstances.length;F++)g.symbolInstances.get(F).crossTileID=0;this.usedCrossTileIDs[s.overscaledZ]||(this.usedCrossTileIDs[s.overscaledZ]={});const M=this.usedCrossTileIDs[s.overscaledZ];for(const F in this.indexes){const q=this.indexes[F];if(Number(F)>s.overscaledZ)for(const A in q){const l=q[A];l.tileID.isChildOf(s)&&l.findMatches(g.symbolInstances,s,M)}else{const A=q[s.scaledTo(Number(F)).key];A&&A.findMatches(g.symbolInstances,s,M)}}for(let F=0;F<g.symbolInstances.length;F++){const q=g.symbolInstances.get(F);q.crossTileID||(q.crossTileID=I.generate(),M[q.crossTileID]=!0)}return this.indexes[s.overscaledZ]===void 0&&(this.indexes[s.overscaledZ]={}),this.indexes[s.overscaledZ][s.key]=new vr(s,g.symbolInstances,g.bucketInstanceId),!0}removeBucketCrossTileIDs(s,g){for(const I of g.getCrossTileIDsLists())for(const M of I)delete this.usedCrossTileIDs[s][M]}removeStaleBuckets(s){let g=!1;for(const I in this.indexes){const M=this.indexes[I];for(const F in M)s[M[F].bucketInstanceId]||(this.removeBucketCrossTileIDs(I,M[F]),delete M[F],g=!0)}return g}}class fn{constructor(){this.layerIndexes={},this.crossTileIDs=new Mi,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(s,g,I){let M=this.layerIndexes[s.id];M===void 0&&(M=this.layerIndexes[s.id]=new nr);let F=!1;const q={};M.handleWrapJump(I);for(const A of g){const l=A.getBucket(s);l&&s.id===l.layerIds[0]&&(l.bucketInstanceId||(l.bucketInstanceId=++this.maxBucketInstanceId),M.addBucket(A.tileID,l,this.crossTileIDs)&&(F=!0),q[l.bucketInstanceId]=!0)}return M.removeStaleBuckets(q)&&(F=!0),F}pruneUnusedLayers(s){const g={};s.forEach(I=>{g[I]=!0});for(const I in this.layerIndexes)g[I]||delete this.layerIndexes[I]}}const Pt=(R,s)=>o.x(R,s&&s.filter(g=>g.identifier!=="source.canvas")),Fi=o.F(o.ax,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setGlyphs","setSprite"]),xt=o.F(o.ax,["setCenter","setZoom","setBearing","setPitch"]),nn=o.aw();class Cr extends o.E{constructor(s,g={}){super(),this.map=s,this.dispatcher=new di(D(),this,s._getMapId()),this.imageManager=new ut,this.imageManager.setEventedParent(this),this.glyphManager=new Fe(s._requestManager,g.localIdeographFontFamily),this.lineAtlas=new ei(256,512),this.crossTileSymbolIndex=new fn,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new o.ay,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",o.az());const I=this;this._rtlTextPluginCallback=Cr.registerForPluginStateChange(M=>{I.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:M.pluginStatus,pluginURL:M.pluginURL},(F,q)=>{if(o.aA(F),q&&q.every(A=>A))for(const A in I.sourceCaches){const l=I.sourceCaches[A].getSource().type;l!=="vector"&&l!=="geojson"||I.sourceCaches[A].reload()}})}),this.on("data",M=>{if(M.dataType!=="source"||M.sourceDataType!=="metadata")return;const F=this.sourceCaches[M.sourceId];if(!F)return;const q=F.getSource();if(q&&q.vectorLayerIds)for(const A in this._layers){const l=this._layers[A];l.source===q.id&&this._validateLayer(l)}})}loadURL(s,g={},I){this.fire(new o.k("dataloading",{dataType:"style"})),g.validate=typeof g.validate!="boolean"||g.validate;const M=this.map._requestManager.transformRequest(s,Qe.Style);this._request=o.f(M,(F,q)=>{this._request=null,F?this.fire(new o.j(F)):q&&this._load(q,g,I)})}loadJSON(s,g={},I){this.fire(new o.k("dataloading",{dataType:"style"})),this._request=o.h.frame(()=>{this._request=null,g.validate=g.validate!==!1,this._load(s,g,I)})}loadEmpty(){this.fire(new o.k("dataloading",{dataType:"style"})),this._load(nn,{validate:!1})}_load(s,g,I){var M;const F=g.transformStyle?g.transformStyle(I,s):s;if(!g.validate||!Pt(this,o.y(F))){this._loaded=!0,this.stylesheet=F;for(const q in F.sources)this.addSource(q,F.sources[q],{validate:!1});F.sprite?this._loadSprite(F.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(F.glyphs),this._createLayers(),this.light=new _t(this.stylesheet.light),this.map.setTerrain((M=this.stylesheet.terrain)!==null&&M!==void 0?M:null),this.fire(new o.k("data",{dataType:"style"})),this.fire(new o.k("style.load"))}}_createLayers(){const s=o.aB(this.stylesheet.layers);this.dispatcher.broadcast("setLayers",s),this._order=s.map(g=>g.id),this._layers={},this._serializedLayers=null;for(const g of s){const I=o.aC(g);I.setEventedParent(this,{layer:{id:g.id}}),this._layers[g.id]=I}}_loadSprite(s,g=!1,I=void 0){this.imageManager.setLoaded(!1),this._spriteRequest=function(M,F,q,A){const l=Ve(M),f=l.length,m=q>1?"@2x":"",b={},T={},z={};for(const{id:N,url:X}of l){const te=F.transformRequest(F.normalizeSpriteURL(X,m,".json"),Qe.SpriteJSON),ve=`${N}_${te.url}`;b[ve]=o.f(te,(nt,st)=>{delete b[ve],T[N]=st,Je(A,T,z,nt,f)});const De=F.transformRequest(F.normalizeSpriteURL(X,m,".png"),Qe.SpriteImage),He=`${N}_${De.url}`;b[He]=ke.getImage(De,(nt,st)=>{delete b[He],z[N]=st,Je(A,T,z,nt,f)})}return{cancel(){for(const N of Object.values(b))N.cancel()}}}(s,this.map._requestManager,this.map.getPixelRatio(),(M,F)=>{if(this._spriteRequest=null,M)this.fire(new o.j(M));else if(F)for(const q in F){this._spritesImagesIds[q]=[];const A=this._spritesImagesIds[q]?this._spritesImagesIds[q].filter(l=>!(l in F)):[];for(const l of A)this.imageManager.removeImage(l),this._changedImages[l]=!0;for(const l in F[q]){const f=q==="default"?l:`${q}:${l}`;this._spritesImagesIds[q].push(f),f in this.imageManager.images?this.imageManager.updateImage(f,F[q][l],!1):this.imageManager.addImage(f,F[q][l]),g&&(this._changedImages[f]=!0)}}this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),g&&(this._changed=!0),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new o.k("data",{dataType:"style"})),I&&I(M)})}_unloadSprite(){for(const s of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(s),this._changedImages[s]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new o.k("data",{dataType:"style"}))}_validateLayer(s){const g=this.sourceCaches[s.source];if(!g)return;const I=s.sourceLayer;if(!I)return;const M=g.getSource();(M.type==="geojson"||M.vectorLayerIds&&M.vectorLayerIds.indexOf(I)===-1)&&this.fire(new o.j(new Error(`Source layer "${I}" does not exist on source "${M.id}" as specified by style layer "${s.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const s in this.sourceCaches)if(!this.sourceCaches[s].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(s){const g=this._serializedAllLayers();if(!s||s.length===0)return Object.values(g);const I=[];for(const M of s)g[M]&&I.push(g[M]);return I}_serializedAllLayers(){let s=this._serializedLayers;if(s)return s;s=this._serializedLayers={};const g=Object.keys(this._layers);for(const I of g){const M=this._layers[I];M.type!=="custom"&&(s[I]=M.serialize())}return s}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const s in this.sourceCaches)if(this.sourceCaches[s].hasTransition())return!0;for(const s in this._layers)if(this._layers[s].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(s){if(!this._loaded)return;const g=this._changed;if(this._changed){const M=Object.keys(this._updatedLayers),F=Object.keys(this._removedLayers);(M.length||F.length)&&this._updateWorkerLayers(M,F);for(const q in this._updatedSources){const A=this._updatedSources[q];if(A==="reload")this._reloadSource(q);else{if(A!=="clear")throw new Error(`Invalid action ${A}`);this._clearSource(q)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const q in this._updatedPaintProps)this._layers[q].updateTransitions(s);this.light.updateTransitions(s),this._resetUpdates()}const I={};for(const M in this.sourceCaches){const F=this.sourceCaches[M];I[M]=F.used,F.used=!1}for(const M of this._order){const F=this._layers[M];F.recalculate(s,this._availableImages),!F.isHidden(s.zoom)&&F.source&&(this.sourceCaches[F.source].used=!0)}for(const M in I){const F=this.sourceCaches[M];I[M]!==F.used&&F.fire(new o.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:M}))}this.light.recalculate(s),this.z=s.zoom,g&&this.fire(new o.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const s=Object.keys(this._changedImages);if(s.length){for(const g in this.sourceCaches)this.sourceCaches[g].reloadTilesForDependencies(["icons","patterns"],s);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const s in this.sourceCaches)this.sourceCaches[s].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(s,g){this.dispatcher.broadcast("updateLayers",{layers:this._serializeByIds(s),removedIds:g})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(s,g={}){this._checkLoaded();const I=this.serialize();if(s=g.transformStyle?g.transformStyle(I,s):s,Pt(this,o.y(s)))return!1;(s=o.aD(s)).layers=o.aB(s.layers);const M=o.aE(I,s).filter(q=>!(q.command in xt));if(M.length===0)return!1;const F=M.filter(q=>!(q.command in Fi));if(F.length>0)throw new Error(`Unimplemented: ${F.map(q=>q.command).join(", ")}.`);for(const q of M)q.command!=="setTransition"&&this[q.command].apply(this,q.args);return this.stylesheet=s,this._serializedLayers=null,!0}addImage(s,g){if(this.getImage(s))return this.fire(new o.j(new Error(`An image named "${s}" already exists.`)));this.imageManager.addImage(s,g),this._afterImageUpdated(s)}updateImage(s,g){this.imageManager.updateImage(s,g)}getImage(s){return this.imageManager.getImage(s)}removeImage(s){if(!this.getImage(s))return this.fire(new o.j(new Error(`An image named "${s}" does not exist.`)));this.imageManager.removeImage(s),this._afterImageUpdated(s)}_afterImageUpdated(s){this._availableImages=this.imageManager.listImages(),this._changedImages[s]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new o.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(s,g,I={}){if(this._checkLoaded(),this.sourceCaches[s]!==void 0)throw new Error(`Source "${s}" already exists.`);if(!g.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(g).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(g.type)>=0&&this._validate(o.y.source,`sources.${s}`,g,null,I))return;this.map&&this.map._collectResourceTiming&&(g.collectResourceTiming=!0);const M=this.sourceCaches[s]=new Wi(s,g,this.dispatcher);M.style=this,M.setEventedParent(this,()=>({isSourceLoaded:M.loaded(),source:M.serialize(),sourceId:s})),M.onAdd(this.map),this._changed=!0}removeSource(s){if(this._checkLoaded(),this.sourceCaches[s]===void 0)throw new Error("There is no source with this ID");for(const I in this._layers)if(this._layers[I].source===s)return this.fire(new o.j(new Error(`Source "${s}" cannot be removed while layer "${I}" is using it.`)));const g=this.sourceCaches[s];delete this.sourceCaches[s],delete this._updatedSources[s],g.fire(new o.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:s})),g.setEventedParent(null),g.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(s,g){if(this._checkLoaded(),this.sourceCaches[s]===void 0)throw new Error(`There is no source with this ID=${s}`);const I=this.sourceCaches[s].getSource();if(I.type!=="geojson")throw new Error(`geojsonSource.type is ${I.type}, which is !== 'geojson`);I.setData(g),this._changed=!0}getSource(s){return this.sourceCaches[s]&&this.sourceCaches[s].getSource()}addLayer(s,g,I={}){this._checkLoaded();const M=s.id;if(this.getLayer(M))return void this.fire(new o.j(new Error(`Layer "${M}" already exists on this map.`)));let F;if(s.type==="custom"){if(Pt(this,o.aF(s)))return;F=o.aC(s)}else{if("source"in s&&typeof s.source=="object"&&(this.addSource(M,s.source),s=o.aD(s),s=o.e(s,{source:M})),this._validate(o.y.layer,`layers.${M}`,s,{arrayIndex:-1},I))return;F=o.aC(s),this._validateLayer(F),F.setEventedParent(this,{layer:{id:M}})}const q=g?this._order.indexOf(g):this._order.length;if(g&&q===-1)this.fire(new o.j(new Error(`Cannot add layer "${M}" before non-existing layer "${g}".`)));else{if(this._order.splice(q,0,M),this._layerOrderChanged=!0,this._layers[M]=F,this._removedLayers[M]&&F.source&&F.type!=="custom"){const A=this._removedLayers[M];delete this._removedLayers[M],A.type!==F.type?this._updatedSources[F.source]="clear":(this._updatedSources[F.source]="reload",this.sourceCaches[F.source].pause())}this._updateLayer(F),F.onAdd&&F.onAdd(this.map)}}moveLayer(s,g){if(this._checkLoaded(),this._changed=!0,!this._layers[s])return void this.fire(new o.j(new Error(`The layer '${s}' does not exist in the map's style and cannot be moved.`)));if(s===g)return;const I=this._order.indexOf(s);this._order.splice(I,1);const M=g?this._order.indexOf(g):this._order.length;g&&M===-1?this.fire(new o.j(new Error(`Cannot move layer "${s}" before non-existing layer "${g}".`))):(this._order.splice(M,0,s),this._layerOrderChanged=!0)}removeLayer(s){this._checkLoaded();const g=this._layers[s];if(!g)return void this.fire(new o.j(new Error(`Cannot remove non-existing layer "${s}".`)));g.setEventedParent(null);const I=this._order.indexOf(s);this._order.splice(I,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[s]=g,delete this._layers[s],this._serializedLayers&&delete this._serializedLayers[s],delete this._updatedLayers[s],delete this._updatedPaintProps[s],g.onRemove&&g.onRemove(this.map)}getLayer(s){return this._layers[s]}getLayersOrder(){return[...this._order]}hasLayer(s){return s in this._layers}setLayerZoomRange(s,g,I){this._checkLoaded();const M=this.getLayer(s);M?M.minzoom===g&&M.maxzoom===I||(g!=null&&(M.minzoom=g),I!=null&&(M.maxzoom=I),this._updateLayer(M)):this.fire(new o.j(new Error(`Cannot set the zoom range of non-existing layer "${s}".`)))}setFilter(s,g,I={}){this._checkLoaded();const M=this.getLayer(s);if(M){if(!o.aG(M.filter,g))return g==null?(M.filter=void 0,void this._updateLayer(M)):void(this._validate(o.y.filter,`layers.${M.id}.filter`,g,null,I)||(M.filter=o.aD(g),this._updateLayer(M)))}else this.fire(new o.j(new Error(`Cannot filter non-existing layer "${s}".`)))}getFilter(s){return o.aD(this.getLayer(s).filter)}setLayoutProperty(s,g,I,M={}){this._checkLoaded();const F=this.getLayer(s);F?o.aG(F.getLayoutProperty(g),I)||(F.setLayoutProperty(g,I,M),this._updateLayer(F)):this.fire(new o.j(new Error(`Cannot style non-existing layer "${s}".`)))}getLayoutProperty(s,g){const I=this.getLayer(s);if(I)return I.getLayoutProperty(g);this.fire(new o.j(new Error(`Cannot get style of non-existing layer "${s}".`)))}setPaintProperty(s,g,I,M={}){this._checkLoaded();const F=this.getLayer(s);F?o.aG(F.getPaintProperty(g),I)||(F.setPaintProperty(g,I,M)&&this._updateLayer(F),this._changed=!0,this._updatedPaintProps[s]=!0):this.fire(new o.j(new Error(`Cannot style non-existing layer "${s}".`)))}getPaintProperty(s,g){return this.getLayer(s).getPaintProperty(g)}setFeatureState(s,g){this._checkLoaded();const I=s.source,M=s.sourceLayer,F=this.sourceCaches[I];if(F===void 0)return void this.fire(new o.j(new Error(`The source '${I}' does not exist in the map's style.`)));const q=F.getSource().type;q==="geojson"&&M?this.fire(new o.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):q!=="vector"||M?(s.id===void 0&&this.fire(new o.j(new Error("The feature id parameter must be provided."))),F.setFeatureState(M,s.id,g)):this.fire(new o.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(s,g){this._checkLoaded();const I=s.source,M=this.sourceCaches[I];if(M===void 0)return void this.fire(new o.j(new Error(`The source '${I}' does not exist in the map's style.`)));const F=M.getSource().type,q=F==="vector"?s.sourceLayer:void 0;F!=="vector"||q?g&&typeof s.id!="string"&&typeof s.id!="number"?this.fire(new o.j(new Error("A feature id is required to remove its specific state property."))):M.removeFeatureState(q,s.id,g):this.fire(new o.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(s){this._checkLoaded();const g=s.source,I=s.sourceLayer,M=this.sourceCaches[g];if(M!==void 0)return M.getSource().type!=="vector"||I?(s.id===void 0&&this.fire(new o.j(new Error("The feature id parameter must be provided."))),M.getFeatureState(I,s.id)):void this.fire(new o.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new o.j(new Error(`The source '${g}' does not exist in the map's style.`)))}getTransition(){return o.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const s=o.aH(this.sourceCaches,F=>F.serialize()),g=this._serializeByIds(this._order),I=this.map.getTerrain()||void 0,M=this.stylesheet;return o.aI({version:M.version,name:M.name,metadata:M.metadata,light:M.light,center:M.center,zoom:M.zoom,bearing:M.bearing,pitch:M.pitch,sprite:M.sprite,glyphs:M.glyphs,transition:M.transition,sources:s,layers:g,terrain:I},F=>F!==void 0)}_updateLayer(s){this._updatedLayers[s.id]=!0,s.source&&!this._updatedSources[s.source]&&this.sourceCaches[s.source].getSource().type!=="raster"&&(this._updatedSources[s.source]="reload",this.sourceCaches[s.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(s){const g=q=>this._layers[q].type==="fill-extrusion",I={},M=[];for(let q=this._order.length-1;q>=0;q--){const A=this._order[q];if(g(A)){I[A]=q;for(const l of s){const f=l[A];if(f)for(const m of f)M.push(m)}}}M.sort((q,A)=>A.intersectionZ-q.intersectionZ);const F=[];for(let q=this._order.length-1;q>=0;q--){const A=this._order[q];if(g(A))for(let l=M.length-1;l>=0;l--){const f=M[l].feature;if(I[f.layer.id]<q)break;F.push(f),M.pop()}else for(const l of s){const f=l[A];if(f)for(const m of f)F.push(m.feature)}}return F}queryRenderedFeatures(s,g,I){g&&g.filter&&this._validate(o.y.filter,"queryRenderedFeatures.filter",g.filter,null,g);const M={};if(g&&g.layers){if(!Array.isArray(g.layers))return this.fire(new o.j(new Error("parameters.layers must be an Array."))),[];for(const A of g.layers){const l=this._layers[A];if(!l)return this.fire(new o.j(new Error(`The layer '${A}' does not exist in the map's style and cannot be queried for features.`))),[];M[l.source]=!0}}const F=[];g.availableImages=this._availableImages;const q=this._serializedAllLayers();for(const A in this.sourceCaches)g.layers&&!M[A]||F.push($i(this.sourceCaches[A],this._layers,q,s,g,I));return this.placement&&F.push(function(A,l,f,m,b,T,z){const N={},X=T.queryRenderedSymbols(m),te=[];for(const ve of Object.keys(X).map(Number))te.push(z[ve]);te.sort(ki);for(const ve of te){const De=ve.featureIndex.lookupSymbolFeatures(X[ve.bucketInstanceId],l,ve.bucketIndex,ve.sourceLayerIndex,b.filter,b.layers,b.availableImages,A);for(const He in De){const nt=N[He]=N[He]||[],st=De[He];st.sort((gt,Ot)=>{const Ut=ve.featureSortOrder;if(Ut){const Mt=Ut.indexOf(gt.featureIndex);return Ut.indexOf(Ot.featureIndex)-Mt}return Ot.featureIndex-gt.featureIndex});for(const gt of st)nt.push(gt)}}for(const ve in N)N[ve].forEach(De=>{const He=De.feature,nt=f[A[ve].source].getFeatureState(He.layer["source-layer"],He.id);He.source=He.layer.source,He.layer["source-layer"]&&(He.sourceLayer=He.layer["source-layer"]),He.state=nt});return N}(this._layers,q,this.sourceCaches,s,g,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(F)}querySourceFeatures(s,g){g&&g.filter&&this._validate(o.y.filter,"querySourceFeatures.filter",g.filter,null,g);const I=this.sourceCaches[s];return I?function(M,F){const q=M.getRenderableIds().map(f=>M.getTileByID(f)),A=[],l={};for(let f=0;f<q.length;f++){const m=q[f],b=m.tileID.canonical.key;l[b]||(l[b]=!0,m.querySourceFeatures(A,F))}return A}(I,g):[]}addSourceType(s,g,I){return zi(s)?I(new Error(`A source type called "${s}" already exists.`)):(((M,F)=>{Oi[M]=F})(s,g),g.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:s,url:g.workerSourceURL},I):I(null,null))}getLight(){return this.light.getLight()}setLight(s,g={}){this._checkLoaded();const I=this.light.getLight();let M=!1;for(const q in s)if(!o.aG(s[q],I[q])){M=!0;break}if(!M)return;const F={now:o.h.now(),transition:o.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(s,g),this.light.updateTransitions(F)}_validate(s,g,I,M,F={}){return(!F||F.validate!==!1)&&Pt(this,s.call(o.y,o.e({key:g,style:this.serialize(),value:I,styleSpec:o.v},M)))}_remove(s=!0){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),o.aJ.off("pluginStateChange",this._rtlTextPluginCallback);for(const g in this._layers)this._layers[g].setEventedParent(null);for(const g in this.sourceCaches){const I=this.sourceCaches[g];I.setEventedParent(null),I.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove(s)}_clearSource(s){this.sourceCaches[s].clearTiles()}_reloadSource(s){this.sourceCaches[s].resume(),this.sourceCaches[s].reload()}_updateSources(s){for(const g in this.sourceCaches)this.sourceCaches[g].update(s,this.map.terrain)}_generateCollisionBoxes(){for(const s in this.sourceCaches)this._reloadSource(s)}_updatePlacement(s,g,I,M,F=!1){let q=!1,A=!1;const l={};for(const f of this._order){const m=this._layers[f];if(m.type!=="symbol")continue;if(!l[m.source]){const T=this.sourceCaches[m.source];l[m.source]=T.getRenderableIds(!0).map(z=>T.getTileByID(z)).sort((z,N)=>N.tileID.overscaledZ-z.tileID.overscaledZ||(z.tileID.isLessThan(N.tileID)?-1:1))}const b=this.crossTileSymbolIndex.addLayer(m,l[m.source],s.center.lng);q=q||b}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((F=F||this._layerOrderChanged||I===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(o.h.now(),s.zoom))&&(this.pauseablePlacement=new wn(s,this.map.terrain,this._order,F,g,I,M,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,l),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(o.h.now()),A=!0),q&&this.pauseablePlacement.placement.setStale()),A||q)for(const f of this._order){const m=this._layers[f];m.type==="symbol"&&this.placement.updateLayerOpacities(m,l[m.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(o.h.now())}_releaseSymbolFadeTiles(){for(const s in this.sourceCaches)this.sourceCaches[s].releaseSymbolFadeTiles()}getImages(s,g,I){this.imageManager.getImages(g.icons,I),this._updateTilesForChangedImages();const M=this.sourceCaches[g.source];M&&M.setDependencies(g.tileID.key,g.type,g.icons)}getGlyphs(s,g,I){this.glyphManager.getGlyphs(g.stacks,I);const M=this.sourceCaches[g.source];M&&M.setDependencies(g.tileID.key,g.type,[""])}getResource(s,g,I){return o.m(g,I)}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(s,g={}){this._checkLoaded(),s&&this._validate(o.y.glyphs,"glyphs",s,null,g)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=s,this.glyphManager.entries={},this.glyphManager.setURL(s))}addSprite(s,g,I={},M){this._checkLoaded();const F=[{id:s,url:g}],q=[...Ve(this.stylesheet.sprite),...F];this._validate(o.y.sprite,"sprite",q,null,I)||(this.stylesheet.sprite=q,this._loadSprite(F,!0,M))}removeSprite(s){this._checkLoaded();const g=Ve(this.stylesheet.sprite);if(g.find(I=>I.id===s)){if(this._spritesImagesIds[s])for(const I of this._spritesImagesIds[s])this.imageManager.removeImage(I),this._changedImages[I]=!0;g.splice(g.findIndex(I=>I.id===s),1),this.stylesheet.sprite=g.length>0?g:void 0,delete this._spritesImagesIds[s],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new o.k("data",{dataType:"style"}))}else this.fire(new o.j(new Error(`Sprite "${s}" doesn't exists on this map.`)))}getSprite(){return Ve(this.stylesheet.sprite)}setSprite(s,g={},I){this._checkLoaded(),s&&this._validate(o.y.sprite,"sprite",s,null,g)||(this.stylesheet.sprite=s,s?this._loadSprite(s,!0,I):(this._unloadSprite(),I&&I(null)))}}Cr.registerForPluginStateChange=o.aK;var ys=o.Q([{name:"a_pos",type:"Int16",components:2}]),Gr="attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_depth;void main() {float extent=8192.0;float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/extent;gl_Position=u_matrix*vec4(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}";const Et={prelude:Hn(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:Hn(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:Hn(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Hn(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Hn("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Hn(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:Hn(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Hn("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Hn("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Hn("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:Hn(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:Hn(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:Hn(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:Hn(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Hn(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Hn(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Hn(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Hn(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:Hn(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Hn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Hn(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Hn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Hn(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:Hn(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Hn(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Hn(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Hn("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",Gr),terrainDepth:Hn("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",Gr),terrainCoords:Hn("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",Gr)};function Hn(R,s){const g=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,I=s.match(/attribute ([\w]+) ([\w]+)/g),M=R.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),F=s.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),q=F?F.concat(M):M,A={};return{fragmentSource:R=R.replace(g,(l,f,m,b,T)=>(A[T]=!0,f==="define"?`
#ifndef HAS_UNIFORM_u_${T}
varying ${m} ${b} ${T};
#else
uniform ${m} ${b} u_${T};
#endif
`:`
#ifdef HAS_UNIFORM_u_${T}
    ${m} ${b} ${T} = u_${T};
#endif
`)),vertexSource:s=s.replace(g,(l,f,m,b,T)=>{const z=b==="float"?"vec2":"vec4",N=T.match(/color/)?"color":z;return A[T]?f==="define"?`
#ifndef HAS_UNIFORM_u_${T}
uniform lowp float u_${T}_t;
attribute ${m} ${z} a_${T};
varying ${m} ${b} ${T};
#else
uniform ${m} ${b} u_${T};
#endif
`:N==="vec4"?`
#ifndef HAS_UNIFORM_u_${T}
    ${T} = a_${T};
#else
    ${m} ${b} ${T} = u_${T};
#endif
`:`
#ifndef HAS_UNIFORM_u_${T}
    ${T} = unpack_mix_${N}(a_${T}, u_${T}_t);
#else
    ${m} ${b} ${T} = u_${T};
#endif
`:f==="define"?`
#ifndef HAS_UNIFORM_u_${T}
uniform lowp float u_${T}_t;
attribute ${m} ${z} a_${T};
#else
uniform ${m} ${b} u_${T};
#endif
`:N==="vec4"?`
#ifndef HAS_UNIFORM_u_${T}
    ${m} ${b} ${T} = a_${T};
#else
    ${m} ${b} ${T} = u_${T};
#endif
`:`
#ifndef HAS_UNIFORM_u_${T}
    ${m} ${b} ${T} = unpack_mix_${N}(a_${T}, u_${T}_t);
#else
    ${m} ${b} ${T} = u_${T};
#endif
`}),staticAttributes:I,staticUniforms:q}}class ft{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(s,g,I,M,F,q,A,l,f){this.context=s;let m=this.boundPaintVertexBuffers.length!==M.length;for(let b=0;!m&&b<M.length;b++)this.boundPaintVertexBuffers[b]!==M[b]&&(m=!0);!this.vao||this.boundProgram!==g||this.boundLayoutVertexBuffer!==I||m||this.boundIndexBuffer!==F||this.boundVertexOffset!==q||this.boundDynamicVertexBuffer!==A||this.boundDynamicVertexBuffer2!==l||this.boundDynamicVertexBuffer3!==f?this.freshBind(g,I,M,F,q,A,l,f):(s.bindVertexArray.set(this.vao),A&&A.bind(),F&&F.dynamicDraw&&F.bind(),l&&l.bind(),f&&f.bind())}freshBind(s,g,I,M,F,q,A,l){const f=s.numAttributes,m=this.context,b=m.gl;this.vao&&this.destroy(),this.vao=m.createVertexArray(),m.bindVertexArray.set(this.vao),this.boundProgram=s,this.boundLayoutVertexBuffer=g,this.boundPaintVertexBuffers=I,this.boundIndexBuffer=M,this.boundVertexOffset=F,this.boundDynamicVertexBuffer=q,this.boundDynamicVertexBuffer2=A,this.boundDynamicVertexBuffer3=l,g.enableAttributes(b,s);for(const T of I)T.enableAttributes(b,s);q&&q.enableAttributes(b,s),A&&A.enableAttributes(b,s),l&&l.enableAttributes(b,s),g.bind(),g.setVertexAttribPointers(b,s,F);for(const T of I)T.bind(),T.setVertexAttribPointers(b,s,F);q&&(q.bind(),q.setVertexAttribPointers(b,s,F)),M&&M.bind(),A&&(A.bind(),A.setVertexAttribPointers(b,s,F)),l&&(l.bind(),l.setVertexAttribPointers(b,s,F)),m.currentNumAttributes=f}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}function gr(R){const s=[];for(let g=0;g<R.length;g++){if(R[g]===null)continue;const I=R[g].split(" ");s.push(I.pop())}return s}class Xs{constructor(s,g,I,M,F,q){const A=s.gl;this.program=A.createProgram();const l=gr(g.staticAttributes),f=I?I.getBinderAttributes():[],m=l.concat(f),b=Et.prelude.staticUniforms?gr(Et.prelude.staticUniforms):[],T=g.staticUniforms?gr(g.staticUniforms):[],z=I?I.getBinderUniforms():[],N=b.concat(T).concat(z),X=[];for(const gt of N)X.indexOf(gt)<0&&X.push(gt);const te=I?I.defines():[];F&&te.push("#define OVERDRAW_INSPECTOR;"),q&&te.push("#define TERRAIN3D;");const ve=te.concat(Et.prelude.fragmentSource,g.fragmentSource).join(`
`),De=te.concat(Et.prelude.vertexSource,g.vertexSource).join(`
`),He=A.createShader(A.FRAGMENT_SHADER);if(A.isContextLost())return void(this.failedToCreate=!0);if(A.shaderSource(He,ve),A.compileShader(He),!A.getShaderParameter(He,A.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${A.getShaderInfoLog(He)}`);A.attachShader(this.program,He);const nt=A.createShader(A.VERTEX_SHADER);if(A.isContextLost())return void(this.failedToCreate=!0);if(A.shaderSource(nt,De),A.compileShader(nt),!A.getShaderParameter(nt,A.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${A.getShaderInfoLog(nt)}`);A.attachShader(this.program,nt),this.attributes={};const st={};this.numAttributes=m.length;for(let gt=0;gt<this.numAttributes;gt++)m[gt]&&(A.bindAttribLocation(this.program,gt,m[gt]),this.attributes[m[gt]]=gt);if(A.linkProgram(this.program),!A.getProgramParameter(this.program,A.LINK_STATUS))throw new Error(`Program failed to link: ${A.getProgramInfoLog(this.program)}`);A.deleteShader(nt),A.deleteShader(He);for(let gt=0;gt<X.length;gt++){const Ot=X[gt];if(Ot&&!st[Ot]){const Ut=A.getUniformLocation(this.program,Ot);Ut&&(st[Ot]=Ut)}}this.fixedUniforms=M(s,st),this.terrainUniforms=((gt,Ot)=>({u_depth:new o.aL(gt,Ot.u_depth),u_terrain:new o.aL(gt,Ot.u_terrain),u_terrain_dim:new o.aM(gt,Ot.u_terrain_dim),u_terrain_matrix:new o.aN(gt,Ot.u_terrain_matrix),u_terrain_unpack:new o.aO(gt,Ot.u_terrain_unpack),u_terrain_exaggeration:new o.aM(gt,Ot.u_terrain_exaggeration)}))(s,st),this.binderUniforms=I?I.getUniforms(s,st):[]}draw(s,g,I,M,F,q,A,l,f,m,b,T,z,N,X,te,ve,De){const He=s.gl;if(this.failedToCreate)return;if(s.program.set(this.program),s.setDepthMode(I),s.setStencilMode(M),s.setColorMode(F),s.setCullFace(q),l){s.activeTexture.set(He.TEXTURE2),He.bindTexture(He.TEXTURE_2D,l.depthTexture),s.activeTexture.set(He.TEXTURE3),He.bindTexture(He.TEXTURE_2D,l.texture);for(const st in this.terrainUniforms)this.terrainUniforms[st].set(l[st])}for(const st in this.fixedUniforms)this.fixedUniforms[st].set(A[st]);X&&X.setUniforms(s,this.binderUniforms,z,{zoom:N});let nt=0;switch(g){case He.LINES:nt=2;break;case He.TRIANGLES:nt=3;break;case He.LINE_STRIP:nt=1}for(const st of T.get()){const gt=st.vaos||(st.vaos={});(gt[f]||(gt[f]=new ft)).bind(s,this,m,X?X.getPaintVertexBuffers():[],b,st.vertexOffset,te,ve,De),He.drawElements(g,st.primitiveLength*nt,He.UNSIGNED_SHORT,st.primitiveOffset*nt*2)}}}function Ks(R,s,g){const I=1/ze(g,1,s.transform.tileZoom),M=Math.pow(2,g.tileID.overscaledZ),F=g.tileSize*Math.pow(2,s.transform.tileZoom)/M,q=F*(g.tileID.canonical.x+g.tileID.wrap*M),A=F*g.tileID.canonical.y;return{u_image:0,u_texsize:g.imageAtlasTexture.size,u_scale:[I,R.fromScale,R.toScale],u_fade:R.t,u_pixel_coord_upper:[q>>16,A>>16],u_pixel_coord_lower:[65535&q,65535&A]}}const po=(R,s,g,I)=>{const M=s.style.light,F=M.properties.get("position"),q=[F.x,F.y,F.z],A=function(){var f=new o.A(9);return o.A!=Float32Array&&(f[1]=0,f[2]=0,f[3]=0,f[5]=0,f[6]=0,f[7]=0),f[0]=1,f[4]=1,f[8]=1,f}();M.properties.get("anchor")==="viewport"&&function(f,m){var b=Math.sin(m),T=Math.cos(m);f[0]=T,f[1]=b,f[2]=0,f[3]=-b,f[4]=T,f[5]=0,f[6]=0,f[7]=0,f[8]=1}(A,-s.transform.angle),function(f,m,b){var T=m[0],z=m[1],N=m[2];f[0]=T*b[0]+z*b[3]+N*b[6],f[1]=T*b[1]+z*b[4]+N*b[7],f[2]=T*b[2]+z*b[5]+N*b[8]}(q,q,A);const l=M.properties.get("color");return{u_matrix:R,u_lightpos:q,u_lightintensity:M.properties.get("intensity"),u_lightcolor:[l.r,l.g,l.b],u_vertical_gradient:+g,u_opacity:I}},va=(R,s,g,I,M,F,q)=>o.e(po(R,s,g,I),Ks(F,s,q),{u_height_factor:-Math.pow(2,M.overscaledZ)/q.tileSize/8}),$o=R=>({u_matrix:R}),go=(R,s,g,I)=>o.e($o(R),Ks(g,s,I)),Is=(R,s)=>({u_matrix:R,u_world:s}),bn=(R,s,g,I,M)=>o.e(go(R,s,g,I),{u_world:M}),bs=(R,s,g,I)=>{const M=R.transform;let F,q;if(I.paint.get("circle-pitch-alignment")==="map"){const A=ze(g,1,M.zoom);F=!0,q=[A,A]}else F=!1,q=M.pixelsToGLUnits;return{u_camera_to_center_distance:M.cameraToCenterDistance,u_scale_with_map:+(I.paint.get("circle-pitch-scale")==="map"),u_matrix:R.translatePosMatrix(s.posMatrix,g,I.paint.get("circle-translate"),I.paint.get("circle-translate-anchor")),u_pitch_with_map:+F,u_device_pixel_ratio:R.pixelRatio,u_extrude_scale:q}},Or=(R,s,g)=>{const I=ze(g,1,s.zoom),M=Math.pow(2,s.zoom-g.tileID.overscaledZ),F=g.tileID.overscaleFactor();return{u_matrix:R,u_camera_to_center_distance:s.cameraToCenterDistance,u_pixels_to_tile_units:I,u_extrude_scale:[s.pixelsToGLUnits[0]/(I*M),s.pixelsToGLUnits[1]/(I*M)],u_overscale_factor:F}},ya=(R,s,g=1)=>({u_matrix:R,u_color:s,u_overlay:0,u_overlay_scale:g}),$a=R=>({u_matrix:R}),mo=(R,s,g,I)=>({u_matrix:R,u_extrude_scale:ze(s,1,g),u_intensity:I});function ra(R,s){const g=Math.pow(2,s.canonical.z),I=s.canonical.y;return[new o.U(0,I/g).toLngLat().lat,new o.U(0,(I+1)/g).toLngLat().lat]}const sa=(R,s,g,I)=>{const M=R.transform;return{u_matrix:kt(R,s,g,I),u_ratio:1/ze(s,1,M.zoom),u_device_pixel_ratio:R.pixelRatio,u_units_to_pixels:[1/M.pixelsToGLUnits[0],1/M.pixelsToGLUnits[1]]}},P=(R,s,g,I,M)=>o.e(sa(R,s,g,M),{u_image:0,u_image_height:I}),re=(R,s,g,I,M)=>{const F=R.transform,q=at(s,F);return{u_matrix:kt(R,s,g,M),u_texsize:s.imageAtlasTexture.size,u_ratio:1/ze(s,1,F.zoom),u_device_pixel_ratio:R.pixelRatio,u_image:0,u_scale:[q,I.fromScale,I.toScale],u_fade:I.t,u_units_to_pixels:[1/F.pixelsToGLUnits[0],1/F.pixelsToGLUnits[1]]}},Re=(R,s,g,I,M,F)=>{const q=R.lineAtlas,A=at(s,R.transform),l=g.layout.get("line-cap")==="round",f=q.getDash(I.from,l),m=q.getDash(I.to,l),b=f.width*M.fromScale,T=m.width*M.toScale;return o.e(sa(R,s,g,F),{u_patternscale_a:[A/b,-f.height/2],u_patternscale_b:[A/T,-m.height/2],u_sdfgamma:q.width/(256*Math.min(b,T)*R.pixelRatio)/2,u_image:0,u_tex_y_a:f.y,u_tex_y_b:m.y,u_mix:M.t})};function at(R,s){return 1/ze(R,1,s.tileZoom)}function kt(R,s,g,I){return R.translatePosMatrix(I?I.posMatrix:s.tileID.posMatrix,s,g.paint.get("line-translate"),g.paint.get("line-translate-anchor"))}const ri=(R,s,g,I,M)=>{return{u_matrix:R,u_tl_parent:s,u_scale_parent:g,u_buffer_scale:1,u_fade_t:I.mix,u_opacity:I.opacity*M.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:M.paint.get("raster-brightness-min"),u_brightness_high:M.paint.get("raster-brightness-max"),u_saturation_factor:(q=M.paint.get("raster-saturation"),q>0?1-1/(1.001-q):-q),u_contrast_factor:(F=M.paint.get("raster-contrast"),F>0?1/(1-F):1+F),u_spin_weights:_i(M.paint.get("raster-hue-rotate"))};var F,q};function _i(R){R*=Math.PI/180;const s=Math.sin(R),g=Math.cos(R);return[(2*g+1)/3,(-Math.sqrt(3)*s-g+1)/3,(Math.sqrt(3)*s-g+1)/3]}const Qi=(R,s,g,I,M,F,q,A,l,f)=>{const m=M.transform;return{u_is_size_zoom_constant:+(R==="constant"||R==="source"),u_is_size_feature_constant:+(R==="constant"||R==="camera"),u_size_t:s?s.uSizeT:0,u_size:s?s.uSize:0,u_camera_to_center_distance:m.cameraToCenterDistance,u_pitch:m.pitch/360*2*Math.PI,u_rotate_symbol:+g,u_aspect_ratio:m.width/m.height,u_fade_change:M.options.fadeDuration?M.symbolFadeChange:1,u_matrix:F,u_label_plane_matrix:q,u_coord_matrix:A,u_is_text:+l,u_pitch_with_map:+I,u_texsize:f,u_texture:0}},Xi=(R,s,g,I,M,F,q,A,l,f,m)=>{const b=M.transform;return o.e(Qi(R,s,g,I,M,F,q,A,l,f),{u_gamma_scale:I?Math.cos(b._pitch)*b.cameraToCenterDistance:1,u_device_pixel_ratio:M.pixelRatio,u_is_halo:+m})},Nn=(R,s,g,I,M,F,q,A,l,f)=>o.e(Xi(R,s,g,I,M,F,q,A,!0,l,!0),{u_texsize_icon:f,u_texture_icon:1}),qn=(R,s,g)=>({u_matrix:R,u_opacity:s,u_color:g}),yr=(R,s,g,I,M,F)=>o.e(function(q,A,l,f){const m=l.imageManager.getPattern(q.from.toString()),b=l.imageManager.getPattern(q.to.toString()),{width:T,height:z}=l.imageManager.getPixelSize(),N=Math.pow(2,f.tileID.overscaledZ),X=f.tileSize*Math.pow(2,l.transform.tileZoom)/N,te=X*(f.tileID.canonical.x+f.tileID.wrap*N),ve=X*f.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:m.tl,u_pattern_br_a:m.br,u_pattern_tl_b:b.tl,u_pattern_br_b:b.br,u_texsize:[T,z],u_mix:A.t,u_pattern_size_a:m.displaySize,u_pattern_size_b:b.displaySize,u_scale_a:A.fromScale,u_scale_b:A.toScale,u_tile_units_to_pixels:1/ze(f,1,l.transform.tileZoom),u_pixel_coord_upper:[te>>16,ve>>16],u_pixel_coord_lower:[65535&te,65535&ve]}}(I,F,g,M),{u_matrix:R,u_opacity:s}),Ma={fillExtrusion:(R,s)=>({u_matrix:new o.aN(R,s.u_matrix),u_lightpos:new o.aP(R,s.u_lightpos),u_lightintensity:new o.aM(R,s.u_lightintensity),u_lightcolor:new o.aP(R,s.u_lightcolor),u_vertical_gradient:new o.aM(R,s.u_vertical_gradient),u_opacity:new o.aM(R,s.u_opacity)}),fillExtrusionPattern:(R,s)=>({u_matrix:new o.aN(R,s.u_matrix),u_lightpos:new o.aP(R,s.u_lightpos),u_lightintensity:new o.aM(R,s.u_lightintensity),u_lightcolor:new o.aP(R,s.u_lightcolor),u_vertical_gradient:new o.aM(R,s.u_vertical_gradient),u_height_factor:new o.aM(R,s.u_height_factor),u_image:new o.aL(R,s.u_image),u_texsize:new o.aQ(R,s.u_texsize),u_pixel_coord_upper:new o.aQ(R,s.u_pixel_coord_upper),u_pixel_coord_lower:new o.aQ(R,s.u_pixel_coord_lower),u_scale:new o.aP(R,s.u_scale),u_fade:new o.aM(R,s.u_fade),u_opacity:new o.aM(R,s.u_opacity)}),fill:(R,s)=>({u_matrix:new o.aN(R,s.u_matrix)}),fillPattern:(R,s)=>({u_matrix:new o.aN(R,s.u_matrix),u_image:new o.aL(R,s.u_image),u_texsize:new o.aQ(R,s.u_texsize),u_pixel_coord_upper:new o.aQ(R,s.u_pixel_coord_upper),u_pixel_coord_lower:new o.aQ(R,s.u_pixel_coord_lower),u_scale:new o.aP(R,s.u_scale),u_fade:new o.aM(R,s.u_fade)}),fillOutline:(R,s)=>({u_matrix:new o.aN(R,s.u_matrix),u_world:new o.aQ(R,s.u_world)}),fillOutlinePattern:(R,s)=>({u_matrix:new o.aN(R,s.u_matrix),u_world:new o.aQ(R,s.u_world),u_image:new o.aL(R,s.u_image),u_texsize:new o.aQ(R,s.u_texsize),u_pixel_coord_upper:new o.aQ(R,s.u_pixel_coord_upper),u_pixel_coord_lower:new o.aQ(R,s.u_pixel_coord_lower),u_scale:new o.aP(R,s.u_scale),u_fade:new o.aM(R,s.u_fade)}),circle:(R,s)=>({u_camera_to_center_distance:new o.aM(R,s.u_camera_to_center_distance),u_scale_with_map:new o.aL(R,s.u_scale_with_map),u_pitch_with_map:new o.aL(R,s.u_pitch_with_map),u_extrude_scale:new o.aQ(R,s.u_extrude_scale),u_device_pixel_ratio:new o.aM(R,s.u_device_pixel_ratio),u_matrix:new o.aN(R,s.u_matrix)}),collisionBox:(R,s)=>({u_matrix:new o.aN(R,s.u_matrix),u_camera_to_center_distance:new o.aM(R,s.u_camera_to_center_distance),u_pixels_to_tile_units:new o.aM(R,s.u_pixels_to_tile_units),u_extrude_scale:new o.aQ(R,s.u_extrude_scale),u_overscale_factor:new o.aM(R,s.u_overscale_factor)}),collisionCircle:(R,s)=>({u_matrix:new o.aN(R,s.u_matrix),u_inv_matrix:new o.aN(R,s.u_inv_matrix),u_camera_to_center_distance:new o.aM(R,s.u_camera_to_center_distance),u_viewport_size:new o.aQ(R,s.u_viewport_size)}),debug:(R,s)=>({u_color:new o.aR(R,s.u_color),u_matrix:new o.aN(R,s.u_matrix),u_overlay:new o.aL(R,s.u_overlay),u_overlay_scale:new o.aM(R,s.u_overlay_scale)}),clippingMask:(R,s)=>({u_matrix:new o.aN(R,s.u_matrix)}),heatmap:(R,s)=>({u_extrude_scale:new o.aM(R,s.u_extrude_scale),u_intensity:new o.aM(R,s.u_intensity),u_matrix:new o.aN(R,s.u_matrix)}),heatmapTexture:(R,s)=>({u_matrix:new o.aN(R,s.u_matrix),u_world:new o.aQ(R,s.u_world),u_image:new o.aL(R,s.u_image),u_color_ramp:new o.aL(R,s.u_color_ramp),u_opacity:new o.aM(R,s.u_opacity)}),hillshade:(R,s)=>({u_matrix:new o.aN(R,s.u_matrix),u_image:new o.aL(R,s.u_image),u_latrange:new o.aQ(R,s.u_latrange),u_light:new o.aQ(R,s.u_light),u_shadow:new o.aR(R,s.u_shadow),u_highlight:new o.aR(R,s.u_highlight),u_accent:new o.aR(R,s.u_accent)}),hillshadePrepare:(R,s)=>({u_matrix:new o.aN(R,s.u_matrix),u_image:new o.aL(R,s.u_image),u_dimension:new o.aQ(R,s.u_dimension),u_zoom:new o.aM(R,s.u_zoom),u_unpack:new o.aO(R,s.u_unpack)}),line:(R,s)=>({u_matrix:new o.aN(R,s.u_matrix),u_ratio:new o.aM(R,s.u_ratio),u_device_pixel_ratio:new o.aM(R,s.u_device_pixel_ratio),u_units_to_pixels:new o.aQ(R,s.u_units_to_pixels)}),lineGradient:(R,s)=>({u_matrix:new o.aN(R,s.u_matrix),u_ratio:new o.aM(R,s.u_ratio),u_device_pixel_ratio:new o.aM(R,s.u_device_pixel_ratio),u_units_to_pixels:new o.aQ(R,s.u_units_to_pixels),u_image:new o.aL(R,s.u_image),u_image_height:new o.aM(R,s.u_image_height)}),linePattern:(R,s)=>({u_matrix:new o.aN(R,s.u_matrix),u_texsize:new o.aQ(R,s.u_texsize),u_ratio:new o.aM(R,s.u_ratio),u_device_pixel_ratio:new o.aM(R,s.u_device_pixel_ratio),u_image:new o.aL(R,s.u_image),u_units_to_pixels:new o.aQ(R,s.u_units_to_pixels),u_scale:new o.aP(R,s.u_scale),u_fade:new o.aM(R,s.u_fade)}),lineSDF:(R,s)=>({u_matrix:new o.aN(R,s.u_matrix),u_ratio:new o.aM(R,s.u_ratio),u_device_pixel_ratio:new o.aM(R,s.u_device_pixel_ratio),u_units_to_pixels:new o.aQ(R,s.u_units_to_pixels),u_patternscale_a:new o.aQ(R,s.u_patternscale_a),u_patternscale_b:new o.aQ(R,s.u_patternscale_b),u_sdfgamma:new o.aM(R,s.u_sdfgamma),u_image:new o.aL(R,s.u_image),u_tex_y_a:new o.aM(R,s.u_tex_y_a),u_tex_y_b:new o.aM(R,s.u_tex_y_b),u_mix:new o.aM(R,s.u_mix)}),raster:(R,s)=>({u_matrix:new o.aN(R,s.u_matrix),u_tl_parent:new o.aQ(R,s.u_tl_parent),u_scale_parent:new o.aM(R,s.u_scale_parent),u_buffer_scale:new o.aM(R,s.u_buffer_scale),u_fade_t:new o.aM(R,s.u_fade_t),u_opacity:new o.aM(R,s.u_opacity),u_image0:new o.aL(R,s.u_image0),u_image1:new o.aL(R,s.u_image1),u_brightness_low:new o.aM(R,s.u_brightness_low),u_brightness_high:new o.aM(R,s.u_brightness_high),u_saturation_factor:new o.aM(R,s.u_saturation_factor),u_contrast_factor:new o.aM(R,s.u_contrast_factor),u_spin_weights:new o.aP(R,s.u_spin_weights)}),symbolIcon:(R,s)=>({u_is_size_zoom_constant:new o.aL(R,s.u_is_size_zoom_constant),u_is_size_feature_constant:new o.aL(R,s.u_is_size_feature_constant),u_size_t:new o.aM(R,s.u_size_t),u_size:new o.aM(R,s.u_size),u_camera_to_center_distance:new o.aM(R,s.u_camera_to_center_distance),u_pitch:new o.aM(R,s.u_pitch),u_rotate_symbol:new o.aL(R,s.u_rotate_symbol),u_aspect_ratio:new o.aM(R,s.u_aspect_ratio),u_fade_change:new o.aM(R,s.u_fade_change),u_matrix:new o.aN(R,s.u_matrix),u_label_plane_matrix:new o.aN(R,s.u_label_plane_matrix),u_coord_matrix:new o.aN(R,s.u_coord_matrix),u_is_text:new o.aL(R,s.u_is_text),u_pitch_with_map:new o.aL(R,s.u_pitch_with_map),u_texsize:new o.aQ(R,s.u_texsize),u_texture:new o.aL(R,s.u_texture)}),symbolSDF:(R,s)=>({u_is_size_zoom_constant:new o.aL(R,s.u_is_size_zoom_constant),u_is_size_feature_constant:new o.aL(R,s.u_is_size_feature_constant),u_size_t:new o.aM(R,s.u_size_t),u_size:new o.aM(R,s.u_size),u_camera_to_center_distance:new o.aM(R,s.u_camera_to_center_distance),u_pitch:new o.aM(R,s.u_pitch),u_rotate_symbol:new o.aL(R,s.u_rotate_symbol),u_aspect_ratio:new o.aM(R,s.u_aspect_ratio),u_fade_change:new o.aM(R,s.u_fade_change),u_matrix:new o.aN(R,s.u_matrix),u_label_plane_matrix:new o.aN(R,s.u_label_plane_matrix),u_coord_matrix:new o.aN(R,s.u_coord_matrix),u_is_text:new o.aL(R,s.u_is_text),u_pitch_with_map:new o.aL(R,s.u_pitch_with_map),u_texsize:new o.aQ(R,s.u_texsize),u_texture:new o.aL(R,s.u_texture),u_gamma_scale:new o.aM(R,s.u_gamma_scale),u_device_pixel_ratio:new o.aM(R,s.u_device_pixel_ratio),u_is_halo:new o.aL(R,s.u_is_halo)}),symbolTextAndIcon:(R,s)=>({u_is_size_zoom_constant:new o.aL(R,s.u_is_size_zoom_constant),u_is_size_feature_constant:new o.aL(R,s.u_is_size_feature_constant),u_size_t:new o.aM(R,s.u_size_t),u_size:new o.aM(R,s.u_size),u_camera_to_center_distance:new o.aM(R,s.u_camera_to_center_distance),u_pitch:new o.aM(R,s.u_pitch),u_rotate_symbol:new o.aL(R,s.u_rotate_symbol),u_aspect_ratio:new o.aM(R,s.u_aspect_ratio),u_fade_change:new o.aM(R,s.u_fade_change),u_matrix:new o.aN(R,s.u_matrix),u_label_plane_matrix:new o.aN(R,s.u_label_plane_matrix),u_coord_matrix:new o.aN(R,s.u_coord_matrix),u_is_text:new o.aL(R,s.u_is_text),u_pitch_with_map:new o.aL(R,s.u_pitch_with_map),u_texsize:new o.aQ(R,s.u_texsize),u_texsize_icon:new o.aQ(R,s.u_texsize_icon),u_texture:new o.aL(R,s.u_texture),u_texture_icon:new o.aL(R,s.u_texture_icon),u_gamma_scale:new o.aM(R,s.u_gamma_scale),u_device_pixel_ratio:new o.aM(R,s.u_device_pixel_ratio),u_is_halo:new o.aL(R,s.u_is_halo)}),background:(R,s)=>({u_matrix:new o.aN(R,s.u_matrix),u_opacity:new o.aM(R,s.u_opacity),u_color:new o.aR(R,s.u_color)}),backgroundPattern:(R,s)=>({u_matrix:new o.aN(R,s.u_matrix),u_opacity:new o.aM(R,s.u_opacity),u_image:new o.aL(R,s.u_image),u_pattern_tl_a:new o.aQ(R,s.u_pattern_tl_a),u_pattern_br_a:new o.aQ(R,s.u_pattern_br_a),u_pattern_tl_b:new o.aQ(R,s.u_pattern_tl_b),u_pattern_br_b:new o.aQ(R,s.u_pattern_br_b),u_texsize:new o.aQ(R,s.u_texsize),u_mix:new o.aM(R,s.u_mix),u_pattern_size_a:new o.aQ(R,s.u_pattern_size_a),u_pattern_size_b:new o.aQ(R,s.u_pattern_size_b),u_scale_a:new o.aM(R,s.u_scale_a),u_scale_b:new o.aM(R,s.u_scale_b),u_pixel_coord_upper:new o.aQ(R,s.u_pixel_coord_upper),u_pixel_coord_lower:new o.aQ(R,s.u_pixel_coord_lower),u_tile_units_to_pixels:new o.aM(R,s.u_tile_units_to_pixels)}),terrain:(R,s)=>({u_matrix:new o.aN(R,s.u_matrix),u_texture:new o.aL(R,s.u_texture),u_ele_delta:new o.aM(R,s.u_ele_delta)}),terrainDepth:(R,s)=>({u_matrix:new o.aN(R,s.u_matrix),u_ele_delta:new o.aM(R,s.u_ele_delta)}),terrainCoords:(R,s)=>({u_matrix:new o.aN(R,s.u_matrix),u_texture:new o.aL(R,s.u_texture),u_terrain_coords_id:new o.aM(R,s.u_terrain_coords_id),u_ele_delta:new o.aM(R,s.u_ele_delta)})};class Pa{constructor(s,g,I){this.context=s;const M=s.gl;this.buffer=M.createBuffer(),this.dynamicDraw=!!I,this.context.unbindVAO(),s.bindElementBuffer.set(this.buffer),M.bufferData(M.ELEMENT_ARRAY_BUFFER,g.arrayBuffer,this.dynamicDraw?M.DYNAMIC_DRAW:M.STATIC_DRAW),this.dynamicDraw||delete g.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(s){const g=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),g.bufferSubData(g.ELEMENT_ARRAY_BUFFER,0,s.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Da={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class _o{constructor(s,g,I,M){this.length=g.length,this.attributes=I,this.itemSize=g.bytesPerElement,this.dynamicDraw=M,this.context=s;const F=s.gl;this.buffer=F.createBuffer(),s.bindVertexBuffer.set(this.buffer),F.bufferData(F.ARRAY_BUFFER,g.arrayBuffer,this.dynamicDraw?F.DYNAMIC_DRAW:F.STATIC_DRAW),this.dynamicDraw||delete g.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(s){if(s.length!==this.length)throw new Error(`Length of new data is ${s.length}, which doesn't match current length of ${this.length}`);const g=this.context.gl;this.bind(),g.bufferSubData(g.ARRAY_BUFFER,0,s.arrayBuffer)}enableAttributes(s,g){for(let I=0;I<this.attributes.length;I++){const M=g.attributes[this.attributes[I].name];M!==void 0&&s.enableVertexAttribArray(M)}}setVertexAttribPointers(s,g,I){for(let M=0;M<this.attributes.length;M++){const F=this.attributes[M],q=g.attributes[F.name];q!==void 0&&s.vertexAttribPointer(q,F.components,s[Da[F.type]],!1,this.itemSize,F.offset+this.itemSize*(I||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const or=new WeakMap;function Ln(R){var s;if(or.has(R))return or.get(R);{const g=(s=R.getParameter(R.VERSION))===null||s===void 0?void 0:s.startsWith("WebGL 2.0");return or.set(R,g),g}}class jn{constructor(s){this.gl=s.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(s){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Er extends jn{getDefault(){return o.aT.transparent}set(s){const g=this.current;(s.r!==g.r||s.g!==g.g||s.b!==g.b||s.a!==g.a||this.dirty)&&(this.gl.clearColor(s.r,s.g,s.b,s.a),this.current=s,this.dirty=!1)}}class xs extends jn{getDefault(){return 1}set(s){(s!==this.current||this.dirty)&&(this.gl.clearDepth(s),this.current=s,this.dirty=!1)}}class Pr extends jn{getDefault(){return 0}set(s){(s!==this.current||this.dirty)&&(this.gl.clearStencil(s),this.current=s,this.dirty=!1)}}class eA extends jn{getDefault(){return[!0,!0,!0,!0]}set(s){const g=this.current;(s[0]!==g[0]||s[1]!==g[1]||s[2]!==g[2]||s[3]!==g[3]||this.dirty)&&(this.gl.colorMask(s[0],s[1],s[2],s[3]),this.current=s,this.dirty=!1)}}class EA extends jn{getDefault(){return!0}set(s){(s!==this.current||this.dirty)&&(this.gl.depthMask(s),this.current=s,this.dirty=!1)}}class eo extends jn{getDefault(){return 255}set(s){(s!==this.current||this.dirty)&&(this.gl.stencilMask(s),this.current=s,this.dirty=!1)}}class Oo extends jn{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(s){const g=this.current;(s.func!==g.func||s.ref!==g.ref||s.mask!==g.mask||this.dirty)&&(this.gl.stencilFunc(s.func,s.ref,s.mask),this.current=s,this.dirty=!1)}}class ls extends jn{getDefault(){const s=this.gl;return[s.KEEP,s.KEEP,s.KEEP]}set(s){const g=this.current;(s[0]!==g[0]||s[1]!==g[1]||s[2]!==g[2]||this.dirty)&&(this.gl.stencilOp(s[0],s[1],s[2]),this.current=s,this.dirty=!1)}}class fA extends jn{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const g=this.gl;s?g.enable(g.STENCIL_TEST):g.disable(g.STENCIL_TEST),this.current=s,this.dirty=!1}}class Ga extends jn{getDefault(){return[0,1]}set(s){const g=this.current;(s[0]!==g[0]||s[1]!==g[1]||this.dirty)&&(this.gl.depthRange(s[0],s[1]),this.current=s,this.dirty=!1)}}class vo extends jn{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const g=this.gl;s?g.enable(g.DEPTH_TEST):g.disable(g.DEPTH_TEST),this.current=s,this.dirty=!1}}class Ns extends jn{getDefault(){return this.gl.LESS}set(s){(s!==this.current||this.dirty)&&(this.gl.depthFunc(s),this.current=s,this.dirty=!1)}}class Ts extends jn{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const g=this.gl;s?g.enable(g.BLEND):g.disable(g.BLEND),this.current=s,this.dirty=!1}}class tA extends jn{getDefault(){const s=this.gl;return[s.ONE,s.ZERO]}set(s){const g=this.current;(s[0]!==g[0]||s[1]!==g[1]||this.dirty)&&(this.gl.blendFunc(s[0],s[1]),this.current=s,this.dirty=!1)}}class aa extends jn{getDefault(){return o.aT.transparent}set(s){const g=this.current;(s.r!==g.r||s.g!==g.g||s.b!==g.b||s.a!==g.a||this.dirty)&&(this.gl.blendColor(s.r,s.g,s.b,s.a),this.current=s,this.dirty=!1)}}class La extends jn{getDefault(){return this.gl.FUNC_ADD}set(s){(s!==this.current||this.dirty)&&(this.gl.blendEquation(s),this.current=s,this.dirty=!1)}}class yo extends jn{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const g=this.gl;s?g.enable(g.CULL_FACE):g.disable(g.CULL_FACE),this.current=s,this.dirty=!1}}class zo extends jn{getDefault(){return this.gl.BACK}set(s){(s!==this.current||this.dirty)&&(this.gl.cullFace(s),this.current=s,this.dirty=!1)}}class VA extends jn{getDefault(){return this.gl.CCW}set(s){(s!==this.current||this.dirty)&&(this.gl.frontFace(s),this.current=s,this.dirty=!1)}}class Dr extends jn{getDefault(){return null}set(s){(s!==this.current||this.dirty)&&(this.gl.useProgram(s),this.current=s,this.dirty=!1)}}class gu extends jn{getDefault(){return this.gl.TEXTURE0}set(s){(s!==this.current||this.dirty)&&(this.gl.activeTexture(s),this.current=s,this.dirty=!1)}}class oa extends jn{getDefault(){const s=this.gl;return[0,0,s.drawingBufferWidth,s.drawingBufferHeight]}set(s){const g=this.current;(s[0]!==g[0]||s[1]!==g[1]||s[2]!==g[2]||s[3]!==g[3]||this.dirty)&&(this.gl.viewport(s[0],s[1],s[2],s[3]),this.current=s,this.dirty=!1)}}class ba extends jn{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const g=this.gl;g.bindFramebuffer(g.FRAMEBUFFER,s),this.current=s,this.dirty=!1}}class ll extends jn{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const g=this.gl;g.bindRenderbuffer(g.RENDERBUFFER,s),this.current=s,this.dirty=!1}}class to extends jn{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const g=this.gl;g.bindTexture(g.TEXTURE_2D,s),this.current=s,this.dirty=!1}}class bo extends jn{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const g=this.gl;g.bindBuffer(g.ARRAY_BUFFER,s),this.current=s,this.dirty=!1}}class Fo extends jn{getDefault(){return null}set(s){const g=this.gl;g.bindBuffer(g.ELEMENT_ARRAY_BUFFER,s),this.current=s,this.dirty=!1}}class us extends jn{getDefault(){return null}set(s){var g;if(s===this.current&&!this.dirty)return;const I=this.gl;Ln(I)?I.bindVertexArray(s):(g=I.getExtension("OES_vertex_array_object"))===null||g===void 0||g.bindVertexArrayOES(s),this.current=s,this.dirty=!1}}class io extends jn{getDefault(){return 4}set(s){if(s===this.current&&!this.dirty)return;const g=this.gl;g.pixelStorei(g.UNPACK_ALIGNMENT,s),this.current=s,this.dirty=!1}}class xo extends jn{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const g=this.gl;g.pixelStorei(g.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s),this.current=s,this.dirty=!1}}class IA extends jn{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const g=this.gl;g.pixelStorei(g.UNPACK_FLIP_Y_WEBGL,s),this.current=s,this.dirty=!1}}class Hs extends jn{constructor(s,g){super(s),this.context=s,this.parent=g}getDefault(){return null}}class Ha extends Hs{setDirty(){this.dirty=!0}set(s){if(s===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const g=this.gl;g.framebufferTexture2D(g.FRAMEBUFFER,g.COLOR_ATTACHMENT0,g.TEXTURE_2D,s,0),this.current=s,this.dirty=!1}}class gs extends Hs{set(s){if(s===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const g=this.gl;g.framebufferRenderbuffer(g.FRAMEBUFFER,g.DEPTH_ATTACHMENT,g.RENDERBUFFER,s),this.current=s,this.dirty=!1}}class ul extends Hs{set(s){if(s===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const g=this.gl;g.framebufferRenderbuffer(g.FRAMEBUFFER,g.DEPTH_STENCIL_ATTACHMENT,g.RENDERBUFFER,s),this.current=s,this.dirty=!1}}class Kn{constructor(s,g,I,M,F){this.context=s,this.width=g,this.height=I;const q=s.gl,A=this.framebuffer=q.createFramebuffer();if(this.colorAttachment=new Ha(s,A),M)this.depthAttachment=F?new ul(s,A):new gs(s,A);else if(F)throw new Error("Stencil cannot be setted without depth");if(q.checkFramebufferStatus(q.FRAMEBUFFER)!==q.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const s=this.context.gl,g=this.colorAttachment.get();if(g&&s.deleteTexture(g),this.depthAttachment){const I=this.depthAttachment.get();I&&s.deleteRenderbuffer(I)}s.deleteFramebuffer(this.framebuffer)}}class Xr{constructor(s,g,I){this.blendFunction=s,this.blendColor=g,this.mask=I}}Xr.Replace=[1,0],Xr.disabled=new Xr(Xr.Replace,o.aT.transparent,[!1,!1,!1,!1]),Xr.unblended=new Xr(Xr.Replace,o.aT.transparent,[!0,!0,!0,!0]),Xr.alphaBlended=new Xr([1,771],o.aT.transparent,[!0,!0,!0,!0]);class No{constructor(s){var g,I;if(this.gl=s,this.clearColor=new Er(this),this.clearDepth=new xs(this),this.clearStencil=new Pr(this),this.colorMask=new eA(this),this.depthMask=new EA(this),this.stencilMask=new eo(this),this.stencilFunc=new Oo(this),this.stencilOp=new ls(this),this.stencilTest=new fA(this),this.depthRange=new Ga(this),this.depthTest=new vo(this),this.depthFunc=new Ns(this),this.blend=new Ts(this),this.blendFunc=new tA(this),this.blendColor=new aa(this),this.blendEquation=new La(this),this.cullFace=new yo(this),this.cullFaceSide=new zo(this),this.frontFace=new VA(this),this.program=new Dr(this),this.activeTexture=new gu(this),this.viewport=new oa(this),this.bindFramebuffer=new ba(this),this.bindRenderbuffer=new ll(this),this.bindTexture=new to(this),this.bindVertexBuffer=new bo(this),this.bindElementBuffer=new Fo(this),this.bindVertexArray=new us(this),this.pixelStoreUnpack=new io(this),this.pixelStoreUnpackPremultiplyAlpha=new xo(this),this.pixelStoreUnpackFlipY=new IA(this),this.extTextureFilterAnisotropic=s.getExtension("EXT_texture_filter_anisotropic")||s.getExtension("MOZ_EXT_texture_filter_anisotropic")||s.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=s.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=s.getParameter(s.MAX_TEXTURE_SIZE),Ln(s)){this.HALF_FLOAT=s.HALF_FLOAT;const M=s.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(g=s.RGBA16F)!==null&&g!==void 0?g:M==null?void 0:M.RGBA16F_EXT,this.RGB16F=(I=s.RGB16F)!==null&&I!==void 0?I:M==null?void 0:M.RGB16F_EXT,s.getExtension("EXT_color_buffer_float")}else{s.getExtension("EXT_color_buffer_half_float"),s.getExtension("OES_texture_half_float_linear");const M=s.getExtension("OES_texture_half_float");this.HALF_FLOAT=M==null?void 0:M.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(s,g){return new Pa(this,s,g)}createVertexBuffer(s,g,I){return new _o(this,s,g,I)}createRenderbuffer(s,g,I){const M=this.gl,F=M.createRenderbuffer();return this.bindRenderbuffer.set(F),M.renderbufferStorage(M.RENDERBUFFER,s,g,I),this.bindRenderbuffer.set(null),F}createFramebuffer(s,g,I,M){return new Kn(this,s,g,I,M)}clear({color:s,depth:g,stencil:I}){const M=this.gl;let F=0;s&&(F|=M.COLOR_BUFFER_BIT,this.clearColor.set(s),this.colorMask.set([!0,!0,!0,!0])),g!==void 0&&(F|=M.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(g),this.depthMask.set(!0)),I!==void 0&&(F|=M.STENCIL_BUFFER_BIT,this.clearStencil.set(I),this.stencilMask.set(255)),M.clear(F)}setCullFace(s){s.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(s.mode),this.frontFace.set(s.frontFace))}setDepthMode(s){s.func!==this.gl.ALWAYS||s.mask?(this.depthTest.set(!0),this.depthFunc.set(s.func),this.depthMask.set(s.mask),this.depthRange.set(s.range)):this.depthTest.set(!1)}setStencilMode(s){s.test.func!==this.gl.ALWAYS||s.mask?(this.stencilTest.set(!0),this.stencilMask.set(s.mask),this.stencilOp.set([s.fail,s.depthFail,s.pass]),this.stencilFunc.set({func:s.test.func,ref:s.ref,mask:s.test.mask})):this.stencilTest.set(!1)}setColorMode(s){o.aG(s.blendFunction,Xr.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(s.blendFunction),this.blendColor.set(s.blendColor)),this.colorMask.set(s.mask)}createVertexArray(){var s;return Ln(this.gl)?this.gl.createVertexArray():(s=this.gl.getExtension("OES_vertex_array_object"))===null||s===void 0?void 0:s.createVertexArrayOES()}deleteVertexArray(s){var g;return Ln(this.gl)?this.gl.deleteVertexArray(s):(g=this.gl.getExtension("OES_vertex_array_object"))===null||g===void 0?void 0:g.deleteVertexArrayOES(s)}unbindVAO(){this.bindVertexArray.set(null)}}class rr{constructor(s,g,I){this.func=s,this.mask=g,this.range=I}}rr.ReadOnly=!1,rr.ReadWrite=!0,rr.disabled=new rr(519,rr.ReadOnly,[0,1]);const Aa=7680;class Hr{constructor(s,g,I,M,F,q){this.test=s,this.ref=g,this.mask=I,this.fail=M,this.depthFail=F,this.pass=q}}Hr.disabled=new Hr({func:519,mask:0},0,0,Aa,Aa,Aa);class Qr{constructor(s,g,I){this.enable=s,this.mode=g,this.frontFace=I}}let xa;function mr(R,s,g,I,M,F,q){const A=R.context,l=A.gl,f=R.useProgram("collisionBox"),m=[];let b=0,T=0;for(let He=0;He<I.length;He++){const nt=I[He],st=s.getTile(nt),gt=st.getBucket(g);if(!gt)continue;let Ot=nt.posMatrix;M[0]===0&&M[1]===0||(Ot=R.translatePosMatrix(nt.posMatrix,st,M,F));const Ut=q?gt.textCollisionBox:gt.iconCollisionBox,Mt=gt.collisionCircleArray;if(Mt.length>0){const zt=o.Z(),Ft=Ot;o.aU(zt,gt.placementInvProjMatrix,R.transform.glCoordMatrix),o.aU(zt,zt,gt.placementViewportMatrix),m.push({circleArray:Mt,circleOffset:T,transform:Ft,invTransform:zt,coord:nt}),b+=Mt.length/4,T=b}Ut&&f.draw(A,l.LINES,rr.disabled,Hr.disabled,R.colorModeForRenderPass(),Qr.disabled,Or(Ot,R.transform,st),R.style.map.terrain&&R.style.map.terrain.getTerrainData(nt),g.id,Ut.layoutVertexBuffer,Ut.indexBuffer,Ut.segments,null,R.transform.zoom,null,null,Ut.collisionVertexBuffer)}if(!q||!m.length)return;const z=R.useProgram("collisionCircle"),N=new o.aV;N.resize(4*b),N._trim();let X=0;for(const He of m)for(let nt=0;nt<He.circleArray.length/4;nt++){const st=4*nt,gt=He.circleArray[st+0],Ot=He.circleArray[st+1],Ut=He.circleArray[st+2],Mt=He.circleArray[st+3];N.emplace(X++,gt,Ot,Ut,Mt,0),N.emplace(X++,gt,Ot,Ut,Mt,1),N.emplace(X++,gt,Ot,Ut,Mt,2),N.emplace(X++,gt,Ot,Ut,Mt,3)}(!xa||xa.length<2*b)&&(xa=function(He){const nt=2*He,st=new o.aX;st.resize(nt),st._trim();for(let gt=0;gt<nt;gt++){const Ot=6*gt;st.uint16[Ot+0]=4*gt+0,st.uint16[Ot+1]=4*gt+1,st.uint16[Ot+2]=4*gt+2,st.uint16[Ot+3]=4*gt+2,st.uint16[Ot+4]=4*gt+3,st.uint16[Ot+5]=4*gt+0}return st}(b));const te=A.createIndexBuffer(xa,!0),ve=A.createVertexBuffer(N,o.aW.members,!0);for(const He of m){const nt={u_matrix:He.transform,u_inv_matrix:He.invTransform,u_camera_to_center_distance:(De=R.transform).cameraToCenterDistance,u_viewport_size:[De.width,De.height]};z.draw(A,l.TRIANGLES,rr.disabled,Hr.disabled,R.colorModeForRenderPass(),Qr.disabled,nt,R.style.map.terrain&&R.style.map.terrain.getTerrainData(He.coord),g.id,ve,te,o.S.simpleSegment(0,2*He.circleOffset,He.circleArray.length,He.circleArray.length/2),null,R.transform.zoom,null,null,null)}var De;ve.destroy(),te.destroy()}Qr.disabled=new Qr(!1,1029,2305),Qr.backCCW=new Qr(!0,1029,2305);const TA=o.ao(new Float32Array(16));function Vo(R,s,g,I,M,F){const{horizontalAlign:q,verticalAlign:A}=o.au(R);return new o.P((-(q-.5)*s/M+I[0])*F,(-(A-.5)*g/M+I[1])*F)}function Uo(R,s,g,I,M,F,q,A,l,f,m){const b=R.text.placedSymbolArray,T=R.text.dynamicLayoutVertexArray,z=R.icon.dynamicLayoutVertexArray,N={};T.clear();for(let X=0;X<b.length;X++){const te=b.get(X),ve=te.hidden||!te.crossTileID||R.allowVerticalPlacement&&!te.placedOrientation?null:I[te.crossTileID];if(ve){const De=new o.P(te.anchorX,te.anchorY),He=fe(De,g?q:F,m),nt=ye(M.cameraToCenterDistance,He.signedDistanceFromCamera);let st=o.aj(R.textSizeData,l,te)*nt/o.ap;g&&(st*=R.tilePixelRatio/A);const{width:gt,height:Ot,anchor:Ut,textOffset:Mt,textBoxScale:zt}=ve,Ft=Vo(Ut,gt,Ot,Mt,zt,st),Bi=g?fe(De.add(Ft),F,m).point:He.point.add(s?Ft.rotate(-M.angle):Ft),hi=R.allowVerticalPlacement&&te.placedOrientation===o.ai.vertical?Math.PI/2:0;for(let xi=0;xi<te.numGlyphs;xi++)o.ak(T,Bi,hi);f&&te.associatedIconIndex>=0&&(N[te.associatedIconIndex]={shiftedAnchor:Bi,angle:hi})}else he(te.numGlyphs,T)}if(f){z.clear();const X=R.icon.placedSymbolArray;for(let te=0;te<X.length;te++){const ve=X.get(te);if(ve.hidden)he(ve.numGlyphs,z);else{const De=N[te];if(De)for(let He=0;He<ve.numGlyphs;He++)o.ak(z,De.shiftedAnchor,De.angle);else he(ve.numGlyphs,z)}}R.icon.dynamicLayoutVertexBuffer.updateData(z)}R.text.dynamicLayoutVertexBuffer.updateData(T)}function ws(R,s,g){return g.iconsInText&&s?"symbolTextAndIcon":R?"symbolSDF":"symbolIcon"}function Ar(R,s,g,I,M,F,q,A,l,f,m,b){const T=R.context,z=T.gl,N=R.transform,X=A==="map",te=l==="map",ve=A!=="viewport"&&g.layout.get("symbol-placement")!=="point",De=X&&!te&&!ve,He=!g.layout.get("symbol-sort-key").isConstant();let nt=!1;const st=R.depthModeForSublayer(0,rr.ReadOnly),gt=g._unevaluatedLayout.hasValue("text-variable-anchor")||g._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Ot=[];for(const Ut of I){const Mt=s.getTile(Ut),zt=Mt.getBucket(g);if(!zt)continue;const Ft=M?zt.text:zt.icon;if(!Ft||!Ft.segments.get().length||!Ft.hasVisibleVertices)continue;const Bi=Ft.programConfigurations.get(g.id),hi=M||zt.sdfIcons,xi=M?zt.textSizeData:zt.iconSizeData,bi=te||N.pitch!==0,Dn=R.useProgram(ws(hi,M,zt),Bi),dn=o.ah(xi,N.zoom),tn=R.style.map.terrain&&R.style.map.terrain.getTerrainData(Ut);let on,mn,cn,$n,Tn=[0,0],Wn=null;if(M)mn=Mt.glyphAtlasTexture,cn=z.LINEAR,on=Mt.glyphAtlasTexture.size,zt.iconsInText&&(Tn=Mt.imageAtlasTexture.size,Wn=Mt.imageAtlasTexture,$n=bi||R.options.rotating||R.options.zooming||xi.kind==="composite"||xi.kind==="camera"?z.LINEAR:z.NEAREST);else{const js=g.layout.get("icon-size").constantOr(0)!==1||zt.iconsNeedLinear;mn=Mt.imageAtlasTexture,cn=hi||R.options.rotating||R.options.zooming||js||bi?z.LINEAR:z.NEAREST,on=Mt.imageAtlasTexture.size}const $r=ze(Mt,1,R.transform.zoom),qr=ie(Ut.posMatrix,te,X,R.transform,$r),QA=Ae(Ut.posMatrix,te,X,R.transform,$r),ml=gt&&zt.hasTextData(),qA=g.layout.get("icon-text-fit")!=="none"&&ml&&zt.hasIconData();if(ve){const js=R.style.map.terrain?(Ea,$s)=>R.style.map.terrain.getElevation(Ut,Ea,$s):null,ua=g.layout.get("text-rotation-alignment")==="map";we(zt,Ut.posMatrix,R,M,qr,QA,te,f,ua,js)}const yu=R.translatePosMatrix(Ut.posMatrix,Mt,F,q),bu=ve||M&&gt||qA?TA:qr,ss=R.translatePosMatrix(QA,Mt,F,q,!0),Ra=hi&&g.paint.get(M?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let To;To=hi?zt.iconsInText?Nn(xi.kind,dn,De,te,R,yu,bu,ss,on,Tn):Xi(xi.kind,dn,De,te,R,yu,bu,ss,M,on,!0):Qi(xi.kind,dn,De,te,R,yu,bu,ss,M,on);const ko={program:Dn,buffers:Ft,uniformValues:To,atlasTexture:mn,atlasTextureIcon:Wn,atlasInterpolation:cn,atlasInterpolationIcon:$n,isSDF:hi,hasHalo:Ra};if(He&&zt.canOverlap){nt=!0;const js=Ft.segments.get();for(const ua of js)Ot.push({segments:new o.S([ua]),sortKey:ua.sortKey,state:ko,terrainData:tn})}else Ot.push({segments:Ft.segments,sortKey:0,state:ko,terrainData:tn})}nt&&Ot.sort((Ut,Mt)=>Ut.sortKey-Mt.sortKey);for(const Ut of Ot){const Mt=Ut.state;if(T.activeTexture.set(z.TEXTURE0),Mt.atlasTexture.bind(Mt.atlasInterpolation,z.CLAMP_TO_EDGE),Mt.atlasTextureIcon&&(T.activeTexture.set(z.TEXTURE1),Mt.atlasTextureIcon&&Mt.atlasTextureIcon.bind(Mt.atlasInterpolationIcon,z.CLAMP_TO_EDGE)),Mt.isSDF){const zt=Mt.uniformValues;Mt.hasHalo&&(zt.u_is_halo=1,On(Mt.buffers,Ut.segments,g,R,Mt.program,st,m,b,zt,Ut.terrainData)),zt.u_is_halo=0}On(Mt.buffers,Ut.segments,g,R,Mt.program,st,m,b,Mt.uniformValues,Ut.terrainData)}}function On(R,s,g,I,M,F,q,A,l,f){const m=I.context;M.draw(m,m.gl.TRIANGLES,F,q,A,Qr.disabled,l,f,g.id,R.layoutVertexBuffer,R.indexBuffer,s,g.paint,I.transform.zoom,R.programConfigurations.get(g.id),R.dynamicLayoutVertexBuffer,R.opacityVertexBuffer)}function wo(R,s,g,I,M){if(!g||!I||!I.imageAtlas)return;const F=I.imageAtlas.patternPositions;let q=F[g.to.toString()],A=F[g.from.toString()];if(!q&&A&&(q=A),!A&&q&&(A=q),!q||!A){const l=M.getPaintProperty(s);q=F[l],A=F[l]}q&&A&&R.setConstantPatternPositions(q,A)}function Lr(R,s,g,I,M,F,q){const A=R.context.gl,l="fill-pattern",f=g.paint.get(l),m=f&&f.constantOr(1),b=g.getCrossfadeParameters();let T,z,N,X,te;q?(z=m&&!g.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",T=A.LINES):(z=m?"fillPattern":"fill",T=A.TRIANGLES);const ve=f.constantOr(null);for(const De of I){const He=s.getTile(De);if(m&&!He.patternsLoaded())continue;const nt=He.getBucket(g);if(!nt)continue;const st=nt.programConfigurations.get(g.id),gt=R.useProgram(z,st),Ot=R.style.map.terrain&&R.style.map.terrain.getTerrainData(De);m&&(R.context.activeTexture.set(A.TEXTURE0),He.imageAtlasTexture.bind(A.LINEAR,A.CLAMP_TO_EDGE),st.updatePaintBuffers(b)),wo(st,l,ve,He,g);const Ut=Ot?De:null,Mt=R.translatePosMatrix(Ut?Ut.posMatrix:De.posMatrix,He,g.paint.get("fill-translate"),g.paint.get("fill-translate-anchor"));if(q){X=nt.indexBuffer2,te=nt.segments2;const zt=[A.drawingBufferWidth,A.drawingBufferHeight];N=z==="fillOutlinePattern"&&m?bn(Mt,R,b,He,zt):Is(Mt,zt)}else X=nt.indexBuffer,te=nt.segments,N=m?go(Mt,R,b,He):$o(Mt);gt.draw(R.context,T,M,R.stencilModeForClipping(De),F,Qr.disabled,N,Ot,g.id,nt.layoutVertexBuffer,X,te,g.paint,R.transform.zoom,st)}}function no(R,s,g,I,M,F,q){const A=R.context,l=A.gl,f="fill-extrusion-pattern",m=g.paint.get(f),b=m.constantOr(1),T=g.getCrossfadeParameters(),z=g.paint.get("fill-extrusion-opacity"),N=m.constantOr(null);for(const X of I){const te=s.getTile(X),ve=te.getBucket(g);if(!ve)continue;const De=R.style.map.terrain&&R.style.map.terrain.getTerrainData(X),He=ve.programConfigurations.get(g.id),nt=R.useProgram(b?"fillExtrusionPattern":"fillExtrusion",He);b&&(R.context.activeTexture.set(l.TEXTURE0),te.imageAtlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE),He.updatePaintBuffers(T)),wo(He,f,N,te,g);const st=R.translatePosMatrix(X.posMatrix,te,g.paint.get("fill-extrusion-translate"),g.paint.get("fill-extrusion-translate-anchor")),gt=g.paint.get("fill-extrusion-vertical-gradient"),Ot=b?va(st,R,gt,z,X,T,te):po(st,R,gt,z);nt.draw(A,A.gl.TRIANGLES,M,F,q,Qr.backCCW,Ot,De,g.id,ve.layoutVertexBuffer,ve.indexBuffer,ve.segments,g.paint,R.transform.zoom,He,R.style.map.terrain&&ve.centroidVertexBuffer)}}function iA(R,s,g,I,M,F,q){const A=R.context,l=A.gl,f=g.fbo;if(!f)return;const m=R.useProgram("hillshade"),b=R.style.map.terrain&&R.style.map.terrain.getTerrainData(s);A.activeTexture.set(l.TEXTURE0),l.bindTexture(l.TEXTURE_2D,f.colorAttachment.get()),m.draw(A,l.TRIANGLES,M,F,q,Qr.disabled,((T,z,N,X)=>{const te=N.paint.get("hillshade-shadow-color"),ve=N.paint.get("hillshade-highlight-color"),De=N.paint.get("hillshade-accent-color");let He=N.paint.get("hillshade-illumination-direction")*(Math.PI/180);N.paint.get("hillshade-illumination-anchor")==="viewport"&&(He-=T.transform.angle);const nt=!T.options.moving;return{u_matrix:X?X.posMatrix:T.transform.calculatePosMatrix(z.tileID.toUnwrapped(),nt),u_image:0,u_latrange:ra(0,z.tileID),u_light:[N.paint.get("hillshade-exaggeration"),He],u_shadow:te,u_highlight:ve,u_accent:De}})(R,g,I,b?s:null),b,I.id,R.rasterBoundsBuffer,R.quadTriangleIndexBuffer,R.rasterBoundsSegments)}function _r(R,s,g,I,M,F){const q=R.context,A=q.gl,l=s.dem;if(l&&l.data){const f=l.dim,m=l.stride,b=l.getPixels();if(q.activeTexture.set(A.TEXTURE1),q.pixelStoreUnpackPremultiplyAlpha.set(!1),s.demTexture=s.demTexture||R.getTileTexture(m),s.demTexture){const z=s.demTexture;z.update(b,{premultiply:!1}),z.bind(A.NEAREST,A.CLAMP_TO_EDGE)}else s.demTexture=new et(q,b,A.RGBA,{premultiply:!1}),s.demTexture.bind(A.NEAREST,A.CLAMP_TO_EDGE);q.activeTexture.set(A.TEXTURE0);let T=s.fbo;if(!T){const z=new et(q,{width:f,height:f,data:null},A.RGBA);z.bind(A.LINEAR,A.CLAMP_TO_EDGE),T=s.fbo=q.createFramebuffer(f,f,!0,!1),T.colorAttachment.set(z.texture)}q.bindFramebuffer.set(T.framebuffer),q.viewport.set([0,0,f,f]),R.useProgram("hillshadePrepare").draw(q,A.TRIANGLES,I,M,F,Qr.disabled,((z,N)=>{const X=N.stride,te=o.Z();return o.aS(te,0,o.N,-o.N,0,0,1),o.$(te,te,[0,-o.N,0]),{u_matrix:te,u_image:1,u_dimension:[X,X],u_zoom:z.overscaledZ,u_unpack:N.getUnpackVector()}})(s.tileID,l),null,g.id,R.rasterBoundsBuffer,R.quadTriangleIndexBuffer,R.rasterBoundsSegments),s.needsHillshadePrepare=!1}}function Kr(R,s,g,I,M,F){const q=I.paint.get("raster-fade-duration");if(!F&&q>0){const A=o.h.now(),l=(A-R.timeAdded)/q,f=s?(A-s.timeAdded)/q:-1,m=g.getSource(),b=M.coveringZoomLevel({tileSize:m.tileSize,roundZoom:m.roundZoom}),T=!s||Math.abs(s.tileID.overscaledZ-b)>Math.abs(R.tileID.overscaledZ-b),z=T&&R.refreshedUponExpiration?1:o.ad(T?l:1-f,0,1);return R.refreshedUponExpiration&&l>=1&&(R.refreshedUponExpiration=!1),s?{opacity:1,mix:1-z}:{opacity:z,mix:0}}return{opacity:1,mix:0}}const Qs=new o.aT(1,0,0,1),kA=new o.aT(0,1,0,1),ro=new o.aT(0,0,1,1),dA=new o.aT(1,0,1,1),wa=new o.aT(0,1,1,1);function Ss(R,s,g,I){ha(R,0,s+g/2,R.transform.width,g,I)}function ms(R,s,g,I){ha(R,s-g/2,0,g,R.transform.height,I)}function ha(R,s,g,I,M,F){const q=R.context,A=q.gl;A.enable(A.SCISSOR_TEST),A.scissor(s*R.pixelRatio,g*R.pixelRatio,I*R.pixelRatio,M*R.pixelRatio),q.clear({color:F}),A.disable(A.SCISSOR_TEST)}function Qa(R,s,g){const I=R.context,M=I.gl,F=g.posMatrix,q=R.useProgram("debug"),A=rr.disabled,l=Hr.disabled,f=R.colorModeForRenderPass(),m="$debug",b=R.style.map.terrain&&R.style.map.terrain.getTerrainData(g);I.activeTexture.set(M.TEXTURE0);const T=s.getTileByID(g.key).latestRawTileData,z=Math.floor((T&&T.byteLength||0)/1024),N=s.getTile(g).tileSize,X=512/Math.min(N,512)*(g.overscaledZ/R.transform.zoom)*.5;let te=g.canonical.toString();g.overscaledZ!==g.canonical.z&&(te+=` => ${g.overscaledZ}`),function(ve,De){ve.initDebugOverlayCanvas();const He=ve.debugOverlayCanvas,nt=ve.context.gl,st=ve.debugOverlayCanvas.getContext("2d");st.clearRect(0,0,He.width,He.height),st.shadowColor="white",st.shadowBlur=2,st.lineWidth=1.5,st.strokeStyle="white",st.textBaseline="top",st.font="bold 36px Open Sans, sans-serif",st.fillText(De,5,5),st.strokeText(De,5,5),ve.debugOverlayTexture.update(He),ve.debugOverlayTexture.bind(nt.LINEAR,nt.CLAMP_TO_EDGE)}(R,`${te} ${z}kB`),q.draw(I,M.TRIANGLES,A,l,Xr.alphaBlended,Qr.disabled,ya(F,o.aT.transparent,X),null,m,R.debugBuffer,R.quadTriangleIndexBuffer,R.debugSegments),q.draw(I,M.LINE_STRIP,A,l,f,Qr.disabled,ya(F,o.aT.red),b,m,R.debugBuffer,R.tileBorderIndexBuffer,R.debugSegments)}function br(R,s,g){const I=R.context,M=I.gl,F=R.colorModeForRenderPass(),q=new rr(M.LEQUAL,rr.ReadWrite,R.depthRangeFor3D),A=R.useProgram("terrain"),l=s.getTerrainMesh();I.bindFramebuffer.set(null),I.viewport.set([0,0,R.width,R.height]);for(const f of g){const m=R.renderToTexture.getTexture(f),b=s.getTerrainData(f.tileID);I.activeTexture.set(M.TEXTURE0),M.bindTexture(M.TEXTURE_2D,m.texture);const T={u_matrix:R.transform.calculatePosMatrix(f.tileID.toUnwrapped()),u_texture:0,u_ele_delta:s.getMeshFrameDelta(R.transform.zoom)};A.draw(I,M.TRIANGLES,q,Hr.disabled,F,Qr.backCCW,T,b,"terrain",l.vertexBuffer,l.indexBuffer,l.segments)}}class is{constructor(s,g){this.context=new No(s),this.transform=g,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:o.Z(),renderTime:0},this.setup(),this.numSublayers=Wi.maxUnderzooming+Wi.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new fn}resize(s,g,I){if(this.width=Math.floor(s*I),this.height=Math.floor(g*I),this.pixelRatio=I,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const M of this.style._order)this.style._layers[M].resize()}setup(){const s=this.context,g=new o.a_;g.emplaceBack(0,0),g.emplaceBack(o.N,0),g.emplaceBack(0,o.N),g.emplaceBack(o.N,o.N),this.tileExtentBuffer=s.createVertexBuffer(g,ys.members),this.tileExtentSegments=o.S.simpleSegment(0,0,4,2);const I=new o.a_;I.emplaceBack(0,0),I.emplaceBack(o.N,0),I.emplaceBack(0,o.N),I.emplaceBack(o.N,o.N),this.debugBuffer=s.createVertexBuffer(I,ys.members),this.debugSegments=o.S.simpleSegment(0,0,4,5);const M=new o.V;M.emplaceBack(0,0,0,0),M.emplaceBack(o.N,0,o.N,0),M.emplaceBack(0,o.N,0,o.N),M.emplaceBack(o.N,o.N,o.N,o.N),this.rasterBoundsBuffer=s.createVertexBuffer(M,$t.members),this.rasterBoundsSegments=o.S.simpleSegment(0,0,4,2);const F=new o.a_;F.emplaceBack(0,0),F.emplaceBack(1,0),F.emplaceBack(0,1),F.emplaceBack(1,1),this.viewportBuffer=s.createVertexBuffer(F,ys.members),this.viewportSegments=o.S.simpleSegment(0,0,4,2);const q=new o.a$;q.emplaceBack(0),q.emplaceBack(1),q.emplaceBack(3),q.emplaceBack(2),q.emplaceBack(0),this.tileBorderIndexBuffer=s.createIndexBuffer(q);const A=new o.b0;A.emplaceBack(0,1,2),A.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=s.createIndexBuffer(A);const l=this.context.gl;this.stencilClearMode=new Hr({func:l.ALWAYS,mask:0},0,255,l.ZERO,l.ZERO,l.ZERO)}clearStencil(){const s=this.context,g=s.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const I=o.Z();o.aS(I,0,this.width,this.height,0,0,1),o.a0(I,I,[g.drawingBufferWidth,g.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(s,g.TRIANGLES,rr.disabled,this.stencilClearMode,Xr.disabled,Qr.disabled,$a(I),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(s,g){if(this.currentStencilSource===s.source||!s.isTileClipped()||!g||!g.length)return;this.currentStencilSource=s.source;const I=this.context,M=I.gl;this.nextStencilID+g.length>256&&this.clearStencil(),I.setColorMode(Xr.disabled),I.setDepthMode(rr.disabled);const F=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const q of g){const A=this._tileClippingMaskIDs[q.key]=this.nextStencilID++,l=this.style.map.terrain&&this.style.map.terrain.getTerrainData(q);F.draw(I,M.TRIANGLES,rr.disabled,new Hr({func:M.ALWAYS,mask:0},A,255,M.KEEP,M.KEEP,M.REPLACE),Xr.disabled,Qr.disabled,$a(q.posMatrix),l,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const s=this.nextStencilID++,g=this.context.gl;return new Hr({func:g.NOTEQUAL,mask:255},s,255,g.KEEP,g.KEEP,g.REPLACE)}stencilModeForClipping(s){const g=this.context.gl;return new Hr({func:g.EQUAL,mask:255},this._tileClippingMaskIDs[s.key],0,g.KEEP,g.KEEP,g.REPLACE)}stencilConfigForOverlap(s){const g=this.context.gl,I=s.sort((q,A)=>A.overscaledZ-q.overscaledZ),M=I[I.length-1].overscaledZ,F=I[0].overscaledZ-M+1;if(F>1){this.currentStencilSource=void 0,this.nextStencilID+F>256&&this.clearStencil();const q={};for(let A=0;A<F;A++)q[A+M]=new Hr({func:g.GEQUAL,mask:255},A+this.nextStencilID,255,g.KEEP,g.KEEP,g.REPLACE);return this.nextStencilID+=F,[q,I]}return[{[M]:Hr.disabled},I]}colorModeForRenderPass(){const s=this.context.gl;return this._showOverdrawInspector?new Xr([s.CONSTANT_COLOR,s.ONE],new o.aT(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Xr.unblended:Xr.alphaBlended}depthModeForSublayer(s,g,I){if(!this.opaquePassEnabledForLayer())return rr.disabled;const M=1-((1+this.currentLayer)*this.numSublayers+s)*this.depthEpsilon;return new rr(I||this.context.gl.LEQUAL,g,[M,M])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(s,g){this.style=s,this.options=g,this.lineAtlas=s.lineAtlas,this.imageManager=s.imageManager,this.glyphManager=s.glyphManager,this.symbolFadeChange=s.placement.symbolFadeChange(o.h.now()),this.imageManager.beginFrame();const I=this.style._order,M=this.style.sourceCaches,F={},q={},A={};for(const l in M){const f=M[l];f.used&&f.prepare(this.context),F[l]=f.getVisibleCoordinates(),q[l]=F[l].slice().reverse(),A[l]=f.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let l=0;l<I.length;l++)if(this.style._layers[I[l]].is3D()){this.opaquePassCutoff=l;break}if(this.renderToTexture){this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0;const l=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!o.b1(this.terrainFacilitator.matrix,this.transform.projMatrix)||l.length)&&(o.b2(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(f,m){const b=f.context,T=b.gl,z=Xr.unblended,N=new rr(T.LEQUAL,rr.ReadWrite,[0,1]),X=m.getTerrainMesh(),te=m.sourceCache.getRenderableTiles(),ve=f.useProgram("terrainDepth");b.bindFramebuffer.set(m.getFramebuffer("depth").framebuffer),b.viewport.set([0,0,f.width/devicePixelRatio,f.height/devicePixelRatio]),b.clear({color:o.aT.transparent,depth:1});for(const De of te){const He=m.getTerrainData(De.tileID),nt={u_matrix:f.transform.calculatePosMatrix(De.tileID.toUnwrapped()),u_ele_delta:m.getMeshFrameDelta(f.transform.zoom)};ve.draw(b,T.TRIANGLES,N,Hr.disabled,z,Qr.backCCW,nt,He,"terrain",X.vertexBuffer,X.indexBuffer,X.segments)}b.bindFramebuffer.set(null),b.viewport.set([0,0,f.width,f.height])}(this,this.style.map.terrain),function(f,m){const b=f.context,T=b.gl,z=Xr.unblended,N=new rr(T.LEQUAL,rr.ReadWrite,[0,1]),X=m.getTerrainMesh(),te=m.getCoordsTexture(),ve=m.sourceCache.getRenderableTiles(),De=f.useProgram("terrainCoords");b.bindFramebuffer.set(m.getFramebuffer("coords").framebuffer),b.viewport.set([0,0,f.width/devicePixelRatio,f.height/devicePixelRatio]),b.clear({color:o.aT.transparent,depth:1}),m.coordsIndex=[];for(const He of ve){const nt=m.getTerrainData(He.tileID);b.activeTexture.set(T.TEXTURE0),T.bindTexture(T.TEXTURE_2D,te.texture);const st={u_matrix:f.transform.calculatePosMatrix(He.tileID.toUnwrapped()),u_terrain_coords_id:(255-m.coordsIndex.length)/255,u_texture:0,u_ele_delta:m.getMeshFrameDelta(f.transform.zoom)};De.draw(b,T.TRIANGLES,N,Hr.disabled,z,Qr.backCCW,st,nt,"terrain",X.vertexBuffer,X.indexBuffer,X.segments),m.coordsIndex.push(He.tileID.key)}b.bindFramebuffer.set(null),b.viewport.set([0,0,f.width,f.height])}(this,this.style.map.terrain))}this.renderPass="offscreen";for(const l of I){const f=this.style._layers[l];if(!f.hasOffscreenPass()||f.isHidden(this.transform.zoom))continue;const m=q[f.source];(f.type==="custom"||m.length)&&this.renderLayer(this,M[f.source],f,m)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:g.showOverdrawInspector?o.aT.black:o.aT.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=g.showOverdrawInspector,this.depthRangeFor3D=[0,1-(s._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=I.length-1;this.currentLayer>=0;this.currentLayer--){const l=this.style._layers[I[this.currentLayer]],f=M[l.source],m=F[l.source];this._renderTileClippingMasks(l,m),this.renderLayer(this,f,l,m)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<I.length;this.currentLayer++){const l=this.style._layers[I[this.currentLayer]],f=M[l.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(l))continue;const m=(l.type==="symbol"?A:q)[l.source];this._renderTileClippingMasks(l,F[l.source]),this.renderLayer(this,f,l,m)}if(this.options.showTileBoundaries){const l=function(f,m){let b=null;const T=Object.values(f._layers).flatMap(te=>te.source&&!te.isHidden(m)?[f.sourceCaches[te.source]]:[]),z=T.filter(te=>te.getSource().type==="vector"),N=T.filter(te=>te.getSource().type!=="vector"),X=te=>{(!b||b.getSource().maxzoom<te.getSource().maxzoom)&&(b=te)};return z.forEach(te=>X(te)),b||N.forEach(te=>X(te)),b}(this.style,this.transform.zoom);l&&function(f,m,b){for(let T=0;T<b.length;T++)Qa(f,m,b[T])}(this,l,l.getVisibleCoordinates())}this.options.showPadding&&function(l){const f=l.transform.padding;Ss(l,l.transform.height-(f.top||0),3,Qs),Ss(l,f.bottom||0,3,kA),ms(l,f.left||0,3,ro),ms(l,l.transform.width-(f.right||0),3,dA);const m=l.transform.centerPoint;(function(b,T,z,N){ha(b,T-1,z-10,2,20,N),ha(b,T-10,z-1,20,2,N)})(l,m.x,l.transform.height-m.y,wa)}(this),this.context.setDefault()}renderLayer(s,g,I,M){if(!I.isHidden(this.transform.zoom)&&(I.type==="background"||I.type==="custom"||(M||[]).length))switch(this.id=I.id,I.type){case"symbol":(function(F,q,A,l,f){if(F.renderPass!=="translucent")return;const m=Hr.disabled,b=F.colorModeForRenderPass();(A._unevaluatedLayout.hasValue("text-variable-anchor")||A._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(T,z,N,X,te,ve,De){const He=z.transform,nt=te==="map",st=ve==="map";for(const gt of T){const Ot=X.getTile(gt),Ut=Ot.getBucket(N);if(!Ut||!Ut.text||!Ut.text.segments.get().length)continue;const Mt=o.ah(Ut.textSizeData,He.zoom),zt=ze(Ot,1,z.transform.zoom),Ft=ie(gt.posMatrix,st,nt,z.transform,zt),Bi=N.layout.get("icon-text-fit")!=="none"&&Ut.hasIconData();if(Mt){const hi=Math.pow(2,He.zoom-Ot.tileID.overscaledZ);Uo(Ut,nt,st,De,He,Ft,gt.posMatrix,hi,Mt,Bi,z.style.map.terrain?(xi,bi)=>z.style.map.terrain.getElevation(gt,xi,bi):null)}}}(l,F,A,q,A.layout.get("text-rotation-alignment"),A.layout.get("text-pitch-alignment"),f),A.paint.get("icon-opacity").constantOr(1)!==0&&Ar(F,q,A,l,!1,A.paint.get("icon-translate"),A.paint.get("icon-translate-anchor"),A.layout.get("icon-rotation-alignment"),A.layout.get("icon-pitch-alignment"),A.layout.get("icon-keep-upright"),m,b),A.paint.get("text-opacity").constantOr(1)!==0&&Ar(F,q,A,l,!0,A.paint.get("text-translate"),A.paint.get("text-translate-anchor"),A.layout.get("text-rotation-alignment"),A.layout.get("text-pitch-alignment"),A.layout.get("text-keep-upright"),m,b),q.map.showCollisionBoxes&&(mr(F,q,A,l,A.paint.get("text-translate"),A.paint.get("text-translate-anchor"),!0),mr(F,q,A,l,A.paint.get("icon-translate"),A.paint.get("icon-translate-anchor"),!1))})(s,g,I,M,this.style.placement.variableOffsets);break;case"circle":(function(F,q,A,l){if(F.renderPass!=="translucent")return;const f=A.paint.get("circle-opacity"),m=A.paint.get("circle-stroke-width"),b=A.paint.get("circle-stroke-opacity"),T=!A.layout.get("circle-sort-key").isConstant();if(f.constantOr(1)===0&&(m.constantOr(1)===0||b.constantOr(1)===0))return;const z=F.context,N=z.gl,X=F.depthModeForSublayer(0,rr.ReadOnly),te=Hr.disabled,ve=F.colorModeForRenderPass(),De=[];for(let He=0;He<l.length;He++){const nt=l[He],st=q.getTile(nt),gt=st.getBucket(A);if(!gt)continue;const Ot=gt.programConfigurations.get(A.id),Ut=F.useProgram("circle",Ot),Mt=gt.layoutVertexBuffer,zt=gt.indexBuffer,Ft=F.style.map.terrain&&F.style.map.terrain.getTerrainData(nt),Bi={programConfiguration:Ot,program:Ut,layoutVertexBuffer:Mt,indexBuffer:zt,uniformValues:bs(F,nt,st,A),terrainData:Ft};if(T){const hi=gt.segments.get();for(const xi of hi)De.push({segments:new o.S([xi]),sortKey:xi.sortKey,state:Bi})}else De.push({segments:gt.segments,sortKey:0,state:Bi})}T&&De.sort((He,nt)=>He.sortKey-nt.sortKey);for(const He of De){const{programConfiguration:nt,program:st,layoutVertexBuffer:gt,indexBuffer:Ot,uniformValues:Ut,terrainData:Mt}=He.state;st.draw(z,N.TRIANGLES,X,te,ve,Qr.disabled,Ut,Mt,A.id,gt,Ot,He.segments,A.paint,F.transform.zoom,nt)}})(s,g,I,M);break;case"heatmap":(function(F,q,A,l){if(A.paint.get("heatmap-opacity")!==0)if(F.renderPass==="offscreen"){const f=F.context,m=f.gl,b=Hr.disabled,T=new Xr([m.ONE,m.ONE],o.aT.transparent,[!0,!0,!0,!0]);(function(z,N,X){const te=z.gl;z.activeTexture.set(te.TEXTURE1),z.viewport.set([0,0,N.width/4,N.height/4]);let ve=X.heatmapFbo;if(ve)te.bindTexture(te.TEXTURE_2D,ve.colorAttachment.get()),z.bindFramebuffer.set(ve.framebuffer);else{const De=te.createTexture();te.bindTexture(te.TEXTURE_2D,De),te.texParameteri(te.TEXTURE_2D,te.TEXTURE_WRAP_S,te.CLAMP_TO_EDGE),te.texParameteri(te.TEXTURE_2D,te.TEXTURE_WRAP_T,te.CLAMP_TO_EDGE),te.texParameteri(te.TEXTURE_2D,te.TEXTURE_MIN_FILTER,te.LINEAR),te.texParameteri(te.TEXTURE_2D,te.TEXTURE_MAG_FILTER,te.LINEAR),ve=X.heatmapFbo=z.createFramebuffer(N.width/4,N.height/4,!1,!1),function(He,nt,st,gt){var Ot,Ut;const Mt=He.gl,zt=(Ot=He.HALF_FLOAT)!==null&&Ot!==void 0?Ot:Mt.UNSIGNED_BYTE,Ft=(Ut=He.RGBA16F)!==null&&Ut!==void 0?Ut:Mt.RGBA;Mt.texImage2D(Mt.TEXTURE_2D,0,Ft,nt.width/4,nt.height/4,0,Mt.RGBA,zt,null),gt.colorAttachment.set(st)}(z,N,De,ve)}})(f,F,A),f.clear({color:o.aT.transparent});for(let z=0;z<l.length;z++){const N=l[z];if(q.hasRenderableParent(N))continue;const X=q.getTile(N),te=X.getBucket(A);if(!te)continue;const ve=te.programConfigurations.get(A.id),De=F.useProgram("heatmap",ve),{zoom:He}=F.transform;De.draw(f,m.TRIANGLES,rr.disabled,b,T,Qr.disabled,mo(N.posMatrix,X,He,A.paint.get("heatmap-intensity")),null,A.id,te.layoutVertexBuffer,te.indexBuffer,te.segments,A.paint,F.transform.zoom,ve)}f.viewport.set([0,0,F.width,F.height])}else F.renderPass==="translucent"&&(F.context.setColorMode(F.colorModeForRenderPass()),function(f,m){const b=f.context,T=b.gl,z=m.heatmapFbo;if(!z)return;b.activeTexture.set(T.TEXTURE0),T.bindTexture(T.TEXTURE_2D,z.colorAttachment.get()),b.activeTexture.set(T.TEXTURE1);let N=m.colorRampTexture;N||(N=m.colorRampTexture=new et(b,m.colorRamp,T.RGBA)),N.bind(T.LINEAR,T.CLAMP_TO_EDGE),f.useProgram("heatmapTexture").draw(b,T.TRIANGLES,rr.disabled,Hr.disabled,f.colorModeForRenderPass(),Qr.disabled,((X,te,ve,De)=>{const He=o.Z();o.aS(He,0,X.width,X.height,0,0,1);const nt=X.context.gl;return{u_matrix:He,u_world:[nt.drawingBufferWidth,nt.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:te.paint.get("heatmap-opacity")}})(f,m),null,m.id,f.viewportBuffer,f.quadTriangleIndexBuffer,f.viewportSegments,m.paint,f.transform.zoom)}(F,A))})(s,g,I,M);break;case"line":(function(F,q,A,l){if(F.renderPass!=="translucent")return;const f=A.paint.get("line-opacity"),m=A.paint.get("line-width");if(f.constantOr(1)===0||m.constantOr(1)===0)return;const b=F.depthModeForSublayer(0,rr.ReadOnly),T=F.colorModeForRenderPass(),z=A.paint.get("line-dasharray"),N=A.paint.get("line-pattern"),X=N.constantOr(1),te=A.paint.get("line-gradient"),ve=A.getCrossfadeParameters(),De=X?"linePattern":z?"lineSDF":te?"lineGradient":"line",He=F.context,nt=He.gl;let st=!0;for(const gt of l){const Ot=q.getTile(gt);if(X&&!Ot.patternsLoaded())continue;const Ut=Ot.getBucket(A);if(!Ut)continue;const Mt=Ut.programConfigurations.get(A.id),zt=F.context.program.get(),Ft=F.useProgram(De,Mt),Bi=st||Ft.program!==zt,hi=F.style.map.terrain&&F.style.map.terrain.getTerrainData(gt),xi=N.constantOr(null);if(xi&&Ot.imageAtlas){const dn=Ot.imageAtlas,tn=dn.patternPositions[xi.to.toString()],on=dn.patternPositions[xi.from.toString()];tn&&on&&Mt.setConstantPatternPositions(tn,on)}const bi=hi?gt:null,Dn=X?re(F,Ot,A,ve,bi):z?Re(F,Ot,A,z,ve,bi):te?P(F,Ot,A,Ut.lineClipsArray.length,bi):sa(F,Ot,A,bi);if(X)He.activeTexture.set(nt.TEXTURE0),Ot.imageAtlasTexture.bind(nt.LINEAR,nt.CLAMP_TO_EDGE),Mt.updatePaintBuffers(ve);else if(z&&(Bi||F.lineAtlas.dirty))He.activeTexture.set(nt.TEXTURE0),F.lineAtlas.bind(He);else if(te){const dn=Ut.gradients[A.id];let tn=dn.texture;if(A.gradientVersion!==dn.version){let on=256;if(A.stepInterpolant){const mn=q.getSource().maxzoom,cn=gt.canonical.z===mn?Math.ceil(1<<F.transform.maxZoom-gt.canonical.z):1;on=o.ad(o.aY(Ut.maxLineLength/o.N*1024*cn),256,He.maxTextureSize)}dn.gradient=o.aZ({expression:A.gradientExpression(),evaluationKey:"lineProgress",resolution:on,image:dn.gradient||void 0,clips:Ut.lineClipsArray}),dn.texture?dn.texture.update(dn.gradient):dn.texture=new et(He,dn.gradient,nt.RGBA),dn.version=A.gradientVersion,tn=dn.texture}He.activeTexture.set(nt.TEXTURE0),tn.bind(A.stepInterpolant?nt.NEAREST:nt.LINEAR,nt.CLAMP_TO_EDGE)}Ft.draw(He,nt.TRIANGLES,b,F.stencilModeForClipping(gt),T,Qr.disabled,Dn,hi,A.id,Ut.layoutVertexBuffer,Ut.indexBuffer,Ut.segments,A.paint,F.transform.zoom,Mt,Ut.layoutVertexBuffer2),st=!1}})(s,g,I,M);break;case"fill":(function(F,q,A,l){const f=A.paint.get("fill-color"),m=A.paint.get("fill-opacity");if(m.constantOr(1)===0)return;const b=F.colorModeForRenderPass(),T=A.paint.get("fill-pattern"),z=F.opaquePassEnabledForLayer()&&!T.constantOr(1)&&f.constantOr(o.aT.transparent).a===1&&m.constantOr(0)===1?"opaque":"translucent";if(F.renderPass===z){const N=F.depthModeForSublayer(1,F.renderPass==="opaque"?rr.ReadWrite:rr.ReadOnly);Lr(F,q,A,l,N,b,!1)}if(F.renderPass==="translucent"&&A.paint.get("fill-antialias")){const N=F.depthModeForSublayer(A.getPaintProperty("fill-outline-color")?2:0,rr.ReadOnly);Lr(F,q,A,l,N,b,!0)}})(s,g,I,M);break;case"fill-extrusion":(function(F,q,A,l){const f=A.paint.get("fill-extrusion-opacity");if(f!==0&&F.renderPass==="translucent"){const m=new rr(F.context.gl.LEQUAL,rr.ReadWrite,F.depthRangeFor3D);if(f!==1||A.paint.get("fill-extrusion-pattern").constantOr(1))no(F,q,A,l,m,Hr.disabled,Xr.disabled),no(F,q,A,l,m,F.stencilModeFor3D(),F.colorModeForRenderPass());else{const b=F.colorModeForRenderPass();no(F,q,A,l,m,Hr.disabled,b)}}})(s,g,I,M);break;case"hillshade":(function(F,q,A,l){if(F.renderPass!=="offscreen"&&F.renderPass!=="translucent")return;const f=F.context,m=F.depthModeForSublayer(0,rr.ReadOnly),b=F.colorModeForRenderPass(),[T,z]=F.renderPass==="translucent"?F.stencilConfigForOverlap(l):[{},l];for(const N of z){const X=q.getTile(N);X.needsHillshadePrepare!==void 0&&X.needsHillshadePrepare&&F.renderPass==="offscreen"?_r(F,X,A,m,Hr.disabled,b):F.renderPass==="translucent"&&iA(F,N,X,A,m,T[N.overscaledZ],b)}f.viewport.set([0,0,F.width,F.height])})(s,g,I,M);break;case"raster":(function(F,q,A,l){if(F.renderPass!=="translucent"||A.paint.get("raster-opacity")===0||!l.length)return;const f=F.context,m=f.gl,b=q.getSource(),T=F.useProgram("raster"),z=F.colorModeForRenderPass(),[N,X]=b instanceof Lt?[{},l]:F.stencilConfigForOverlap(l),te=X[X.length-1].overscaledZ,ve=!F.options.moving;for(const De of X){const He=F.depthModeForSublayer(De.overscaledZ-te,A.paint.get("raster-opacity")===1?rr.ReadWrite:rr.ReadOnly,m.LESS),nt=q.getTile(De);nt.registerFadeDuration(A.paint.get("raster-fade-duration"));const st=q.findLoadedParent(De,0),gt=Kr(nt,st,q,A,F.transform,F.style.map.terrain);let Ot,Ut;const Mt=A.paint.get("raster-resampling")==="nearest"?m.NEAREST:m.LINEAR;f.activeTexture.set(m.TEXTURE0),nt.texture.bind(Mt,m.CLAMP_TO_EDGE,m.LINEAR_MIPMAP_NEAREST),f.activeTexture.set(m.TEXTURE1),st?(st.texture.bind(Mt,m.CLAMP_TO_EDGE,m.LINEAR_MIPMAP_NEAREST),Ot=Math.pow(2,st.tileID.overscaledZ-nt.tileID.overscaledZ),Ut=[nt.tileID.canonical.x*Ot%1,nt.tileID.canonical.y*Ot%1]):nt.texture.bind(Mt,m.CLAMP_TO_EDGE,m.LINEAR_MIPMAP_NEAREST);const zt=F.style.map.terrain&&F.style.map.terrain.getTerrainData(De),Ft=zt?De:null,Bi=Ft?Ft.posMatrix:F.transform.calculatePosMatrix(De.toUnwrapped(),ve),hi=ri(Bi,Ut||[0,0],Ot||1,gt,A);b instanceof Lt?T.draw(f,m.TRIANGLES,He,Hr.disabled,z,Qr.disabled,hi,zt,A.id,b.boundsBuffer,F.quadTriangleIndexBuffer,b.boundsSegments):T.draw(f,m.TRIANGLES,He,N[De.overscaledZ],z,Qr.disabled,hi,zt,A.id,F.rasterBoundsBuffer,F.quadTriangleIndexBuffer,F.rasterBoundsSegments)}})(s,g,I,M);break;case"background":(function(F,q,A,l){const f=A.paint.get("background-color"),m=A.paint.get("background-opacity");if(m===0)return;const b=F.context,T=b.gl,z=F.transform,N=z.tileSize,X=A.paint.get("background-pattern");if(F.isPatternMissing(X))return;const te=!X&&f.a===1&&m===1&&F.opaquePassEnabledForLayer()?"opaque":"translucent";if(F.renderPass!==te)return;const ve=Hr.disabled,De=F.depthModeForSublayer(0,te==="opaque"?rr.ReadWrite:rr.ReadOnly),He=F.colorModeForRenderPass(),nt=F.useProgram(X?"backgroundPattern":"background"),st=l||z.coveringTiles({tileSize:N,terrain:F.style.map.terrain});X&&(b.activeTexture.set(T.TEXTURE0),F.imageManager.bind(F.context));const gt=A.getCrossfadeParameters();for(const Ot of st){const Ut=l?Ot.posMatrix:F.transform.calculatePosMatrix(Ot.toUnwrapped()),Mt=X?yr(Ut,m,F,X,{tileID:Ot,tileSize:N},gt):qn(Ut,m,f),zt=F.style.map.terrain&&F.style.map.terrain.getTerrainData(Ot);nt.draw(b,T.TRIANGLES,De,ve,He,Qr.disabled,Mt,zt,A.id,F.tileExtentBuffer,F.quadTriangleIndexBuffer,F.tileExtentSegments)}})(s,0,I,M);break;case"custom":(function(F,q,A){const l=F.context,f=A.implementation;if(F.renderPass==="offscreen"){const m=f.prerender;m&&(F.setCustomLayerDefaults(),l.setColorMode(F.colorModeForRenderPass()),m.call(f,l.gl,F.transform.customLayerMatrix()),l.setDirty(),F.setBaseState())}else if(F.renderPass==="translucent"){F.setCustomLayerDefaults(),l.setColorMode(F.colorModeForRenderPass()),l.setStencilMode(Hr.disabled);const m=f.renderingMode==="3d"?new rr(F.context.gl.LEQUAL,rr.ReadWrite,F.depthRangeFor3D):F.depthModeForSublayer(0,rr.ReadOnly);l.setDepthMode(m),f.render(l.gl,F.transform.customLayerMatrix()),l.setDirty(),F.setBaseState(),l.bindFramebuffer.set(null)}})(s,0,I)}}translatePosMatrix(s,g,I,M,F){if(!I[0]&&!I[1])return s;const q=F?M==="map"?this.transform.angle:0:M==="viewport"?-this.transform.angle:0;if(q){const f=Math.sin(q),m=Math.cos(q);I=[I[0]*m-I[1]*f,I[0]*f+I[1]*m]}const A=[F?I[0]:ze(g,I[0],this.transform.zoom),F?I[1]:ze(g,I[1],this.transform.zoom),0],l=new Float32Array(16);return o.$(l,s,A),l}saveTileTexture(s){const g=this._tileTextures[s.size[0]];g?g.push(s):this._tileTextures[s.size[0]]=[s]}getTileTexture(s){const g=this._tileTextures[s];return g&&g.length>0?g.pop():null}isPatternMissing(s){if(!s)return!1;if(!s.from||!s.to)return!0;const g=this.imageManager.getPattern(s.from.toString()),I=this.imageManager.getPattern(s.to.toString());return!g||!I}useProgram(s,g){this.cache=this.cache||{};const I=s+(g?g.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[I]||(this.cache[I]=new Xs(this.context,Et[s],g,Ma[s],this._showOverdrawInspector,this.style.map.terrain)),this.cache[I]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const s=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(s.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new et(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:s,drawingBufferHeight:g}=this.context.gl;return this.width!==s||this.height!==g}}class zr{constructor(s,g){this.points=s,this.planes=g}static fromInvProjectionMatrix(s,g,I){const M=Math.pow(2,I),F=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(A=>{const l=1/(A=o.ag([],A,s))[3]/g*M;return o.b3(A,A,[l,l,1/A[3],l])}),q=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(A=>{const l=function(T,z){var N=z[0],X=z[1],te=z[2],ve=N*N+X*X+te*te;return ve>0&&(ve=1/Math.sqrt(ve)),T[0]=z[0]*ve,T[1]=z[1]*ve,T[2]=z[2]*ve,T}([],function(T,z,N){var X=z[0],te=z[1],ve=z[2],De=N[0],He=N[1],nt=N[2];return T[0]=te*nt-ve*He,T[1]=ve*De-X*nt,T[2]=X*He-te*De,T}([],xe([],F[A[0]],F[A[1]]),xe([],F[A[2]],F[A[1]]))),f=-((m=l)[0]*(b=F[A[1]])[0]+m[1]*b[1]+m[2]*b[2]);var m,b;return l.concat(f)});return new zr(F,q)}}class pA{constructor(s,g){this.min=s,this.max=g,this.center=function(I,M,F){return I[0]=.5*M[0],I[1]=.5*M[1],I[2]=.5*M[2],I}([],function(I,M,F){return I[0]=M[0]+F[0],I[1]=M[1]+F[1],I[2]=M[2]+F[2],I}([],this.min,this.max))}quadrant(s){const g=[s%2==0,s<2],I=St(this.min),M=St(this.max);for(let F=0;F<g.length;F++)I[F]=g[F]?this.min[F]:this.center[F],M[F]=g[F]?this.center[F]:this.max[F];return M[2]=this.max[2],new pA(I,M)}distanceX(s){return Math.max(Math.min(this.max[0],s[0]),this.min[0])-s[0]}distanceY(s){return Math.max(Math.min(this.max[1],s[1]),this.min[1])-s[1]}intersects(s){const g=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let I=!0;for(let M=0;M<s.planes.length;M++){const F=s.planes[M];let q=0;for(let A=0;A<g.length;A++)o.b4(F,g[A])>=0&&q++;if(q===0)return 0;q!==g.length&&(I=!1)}if(I)return 2;for(let M=0;M<3;M++){let F=Number.MAX_VALUE,q=-Number.MAX_VALUE;for(let A=0;A<s.points.length;A++){const l=s.points[A][M]-this.min[M];F=Math.min(F,l),q=Math.max(q,l)}if(q<0||F>this.max[M]-this.min[M])return 0}return 1}}class Ba{constructor(s=0,g=0,I=0,M=0){if(isNaN(s)||s<0||isNaN(g)||g<0||isNaN(I)||I<0||isNaN(M)||M<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=s,this.bottom=g,this.left=I,this.right=M}interpolate(s,g,I){return g.top!=null&&s.top!=null&&(this.top=o.B.number(s.top,g.top,I)),g.bottom!=null&&s.bottom!=null&&(this.bottom=o.B.number(s.bottom,g.bottom,I)),g.left!=null&&s.left!=null&&(this.left=o.B.number(s.left,g.left,I)),g.right!=null&&s.right!=null&&(this.right=o.B.number(s.right,g.right,I)),this}getCenter(s,g){const I=o.ad((this.left+s-this.right)/2,0,s),M=o.ad((this.top+g-this.bottom)/2,0,g);return new o.P(I,M)}equals(s){return this.top===s.top&&this.bottom===s.bottom&&this.left===s.left&&this.right===s.right}clone(){return new Ba(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class Bs{constructor(s,g,I,M,F){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=F===void 0||!!F,this._minZoom=s||0,this._maxZoom=g||22,this._minPitch=I??0,this._maxPitch=M??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new o.L(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Ba,this._posMatrixCache={},this._alignedPosMatrixCache={},this._minEleveationForCurrentTile=0}clone(){const s=new Bs(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return s.apply(this),s}apply(s){this.tileSize=s.tileSize,this.latRange=s.latRange,this.width=s.width,this.height=s.height,this._center=s._center,this._elevation=s._elevation,this._minEleveationForCurrentTile=s._minEleveationForCurrentTile,this.zoom=s.zoom,this.angle=s.angle,this._fov=s._fov,this._pitch=s._pitch,this._unmodified=s._unmodified,this._edgeInsets=s._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(s){this._minZoom!==s&&(this._minZoom=s,this.zoom=Math.max(this.zoom,s))}get maxZoom(){return this._maxZoom}set maxZoom(s){this._maxZoom!==s&&(this._maxZoom=s,this.zoom=Math.min(this.zoom,s))}get minPitch(){return this._minPitch}set minPitch(s){this._minPitch!==s&&(this._minPitch=s,this.pitch=Math.max(this.pitch,s))}get maxPitch(){return this._maxPitch}set maxPitch(s){this._maxPitch!==s&&(this._maxPitch=s,this.pitch=Math.min(this.pitch,s))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(s){s===void 0?s=!0:s===null&&(s=!1),this._renderWorldCopies=s}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new o.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(s){const g=-o.b5(s,-180,180)*Math.PI/180;this.angle!==g&&(this._unmodified=!1,this.angle=g,this._calcMatrices(),this.rotationMatrix=function(){var I=new o.A(4);return o.A!=Float32Array&&(I[1]=0,I[2]=0),I[0]=1,I[3]=1,I}(),function(I,M,F){var q=M[0],A=M[1],l=M[2],f=M[3],m=Math.sin(F),b=Math.cos(F);I[0]=q*b+l*m,I[1]=A*b+f*m,I[2]=q*-m+l*b,I[3]=A*-m+f*b}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(s){const g=o.ad(s,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==g&&(this._unmodified=!1,this._pitch=g,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(s){s=Math.max(.01,Math.min(60,s)),this._fov!==s&&(this._unmodified=!1,this._fov=s/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(s){const g=Math.min(Math.max(s,this.minZoom),this.maxZoom);this._zoom!==g&&(this._unmodified=!1,this._zoom=g,this.tileZoom=Math.max(0,Math.floor(g)),this.scale=this.zoomScale(g),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(s){s.lat===this._center.lat&&s.lng===this._center.lng||(this._unmodified=!1,this._center=s,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(s){s!==this._elevation&&(this._elevation=s,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(s){this._edgeInsets.equals(s)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,s,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(s){return this._edgeInsets.equals(s)}interpolatePadding(s,g,I){this._unmodified=!1,this._edgeInsets.interpolate(s,g,I),this._constrain(),this._calcMatrices()}coveringZoomLevel(s){const g=(s.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/s.tileSize));return Math.max(0,g)}getVisibleUnwrappedCoordinates(s){const g=[new o.b6(0,s)];if(this._renderWorldCopies){const I=this.pointCoordinate(new o.P(0,0)),M=this.pointCoordinate(new o.P(this.width,0)),F=this.pointCoordinate(new o.P(this.width,this.height)),q=this.pointCoordinate(new o.P(0,this.height)),A=Math.floor(Math.min(I.x,M.x,F.x,q.x)),l=Math.floor(Math.max(I.x,M.x,F.x,q.x)),f=1;for(let m=A-f;m<=l+f;m++)m!==0&&g.push(new o.b6(m,s))}return g}coveringTiles(s){var g,I;let M=this.coveringZoomLevel(s);const F=M;if(s.minzoom!==void 0&&M<s.minzoom)return[];s.maxzoom!==void 0&&M>s.maxzoom&&(M=s.maxzoom);const q=this.pointCoordinate(this.getCameraPoint()),A=o.U.fromLngLat(this.center),l=Math.pow(2,M),f=[l*q.x,l*q.y,0],m=[l*A.x,l*A.y,0],b=zr.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,M);let T=s.minzoom||0;!s.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(T=M);const z=s.terrain?2/Math.min(this.tileSize,s.tileSize)*this.tileSize:3,N=He=>({aabb:new pA([He*l,0,0],[(He+1)*l,l,0]),zoom:0,x:0,y:0,wrap:He,fullyVisible:!1}),X=[],te=[],ve=M,De=s.reparseOverscaled?F:M;if(this._renderWorldCopies)for(let He=1;He<=3;He++)X.push(N(-He)),X.push(N(He));for(X.push(N(0));X.length>0;){const He=X.pop(),nt=He.x,st=He.y;let gt=He.fullyVisible;if(!gt){const Ft=He.aabb.intersects(b);if(Ft===0)continue;gt=Ft===2}const Ot=s.terrain?f:m,Ut=He.aabb.distanceX(Ot),Mt=He.aabb.distanceY(Ot),zt=Math.max(Math.abs(Ut),Math.abs(Mt));if(He.zoom===ve||zt>z+(1<<ve-He.zoom)-2&&He.zoom>=T){const Ft=ve-He.zoom,Bi=f[0]-.5-(nt<<Ft),hi=f[1]-.5-(st<<Ft);te.push({tileID:new o.O(He.zoom===ve?De:He.zoom,He.wrap,He.zoom,nt,st),distanceSq:Gt([m[0]-.5-nt,m[1]-.5-st]),tileDistanceToCamera:Math.sqrt(Bi*Bi+hi*hi)})}else for(let Ft=0;Ft<4;Ft++){const Bi=(nt<<1)+Ft%2,hi=(st<<1)+(Ft>>1),xi=He.zoom+1;let bi=He.aabb.quadrant(Ft);if(s.terrain){const Dn=new o.O(xi,He.wrap,xi,Bi,hi),dn=s.terrain.getMinMaxElevation(Dn),tn=(g=dn.minElevation)!==null&&g!==void 0?g:this.elevation,on=(I=dn.maxElevation)!==null&&I!==void 0?I:this.elevation;bi=new pA([bi.min[0],bi.min[1],tn],[bi.max[0],bi.max[1],on])}X.push({aabb:bi,zoom:xi,x:Bi,y:hi,wrap:He.wrap,fullyVisible:gt})}}return te.sort((He,nt)=>He.distanceSq-nt.distanceSq).map(He=>He.tileID)}resize(s,g){this.width=s,this.height=g,this.pixelsToGLUnits=[2/s,-2/g],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(s){return Math.pow(2,s)}scaleZoom(s){return Math.log(s)/Math.LN2}project(s){const g=o.ad(s.lat,-this.maxValidLatitude,this.maxValidLatitude);return new o.P(o.G(s.lng)*this.worldSize,o.H(g)*this.worldSize)}unproject(s){return new o.U(s.x/this.worldSize,s.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(s){const g=this.pointLocation(this.centerPoint,s),I=s.getElevationForLngLatZoom(g,this.tileZoom);if(!(this.elevation-I))return;const M=this.getCameraPosition(),F=o.U.fromLngLat(M.lngLat,M.altitude),q=o.U.fromLngLat(g,I),A=F.x-q.x,l=F.y-q.y,f=F.z-q.z,m=Math.sqrt(A*A+l*l+f*f),b=this.scaleZoom(this.cameraToCenterDistance/m/this.tileSize);this._elevation=I,this._center=g,this.zoom=b}setLocationAtPoint(s,g){const I=this.pointCoordinate(g),M=this.pointCoordinate(this.centerPoint),F=this.locationCoordinate(s),q=new o.U(F.x-(I.x-M.x),F.y-(I.y-M.y));this.center=this.coordinateLocation(q),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(s,g){return g?this.coordinatePoint(this.locationCoordinate(s),g.getElevationForLngLatZoom(s,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(s))}pointLocation(s,g){return this.coordinateLocation(this.pointCoordinate(s,g))}locationCoordinate(s){return o.U.fromLngLat(s)}coordinateLocation(s){return s&&s.toLngLat()}pointCoordinate(s,g){if(g){const T=g.pointCoordinate(s);if(T!=null)return T}const I=[s.x,s.y,0,1],M=[s.x,s.y,1,1];o.ag(I,I,this.pixelMatrixInverse),o.ag(M,M,this.pixelMatrixInverse);const F=I[3],q=M[3],A=I[1]/F,l=M[1]/q,f=I[2]/F,m=M[2]/q,b=f===m?0:(0-f)/(m-f);return new o.U(o.B.number(I[0]/F,M[0]/q,b)/this.worldSize,o.B.number(A,l,b)/this.worldSize)}coordinatePoint(s,g=0,I=this.pixelMatrix){const M=[s.x*this.worldSize,s.y*this.worldSize,g,1];return o.ag(M,M,I),new o.P(M[0]/M[3],M[1]/M[3])}getBounds(){const s=Math.max(0,this.height/2-this.getHorizon());return new Ti().extend(this.pointLocation(new o.P(0,s))).extend(this.pointLocation(new o.P(this.width,s))).extend(this.pointLocation(new o.P(this.width,this.height))).extend(this.pointLocation(new o.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new Ti([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(s){s?(this.lngRange=[s.getWest(),s.getEast()],this.latRange=[s.getSouth(),s.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(s,g=!1){const I=s.key,M=g?this._alignedPosMatrixCache:this._posMatrixCache;if(M[I])return M[I];const F=s.canonical,q=this.worldSize/this.zoomScale(F.z),A=F.x+Math.pow(2,F.z)*s.wrap,l=o.ao(new Float64Array(16));return o.$(l,l,[A*q,F.y*q,0]),o.a0(l,l,[q/o.N,q/o.N,1]),o.a1(l,g?this.alignedProjMatrix:this.projMatrix,l),M[I]=new Float32Array(l),M[I]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let s,g,I,M,F=-90,q=90,A=-180,l=180;const f=this.size,m=this._unmodified;if(this.latRange){const z=this.latRange;F=o.H(z[1])*this.worldSize,q=o.H(z[0])*this.worldSize,s=q-F<f.y?f.y/(q-F):0}if(this.lngRange){const z=this.lngRange;A=o.b5(o.G(z[0])*this.worldSize,0,this.worldSize),l=o.b5(o.G(z[1])*this.worldSize,0,this.worldSize),l<A&&(l+=this.worldSize),g=l-A<f.x?f.x/(l-A):0}const b=this.point,T=Math.max(g||0,s||0);if(T)return this.center=this.unproject(new o.P(g?(l+A)/2:b.x,s?(q+F)/2:b.y)),this.zoom+=this.scaleZoom(T),this._unmodified=m,void(this._constraining=!1);if(this.latRange){const z=b.y,N=f.y/2;z-N<F&&(M=F+N),z+N>q&&(M=q-N)}if(this.lngRange){const z=(A+l)/2,N=o.b5(b.x,z-this.worldSize/2,z+this.worldSize/2),X=f.x/2;N-X<A&&(I=A+X),N+X>l&&(I=l-X)}I===void 0&&M===void 0||(this.center=this.unproject(new o.P(I!==void 0?I:b.x,M!==void 0?M:b.y)).wrap()),this._unmodified=m,this._constraining=!1}_calcMatrices(){if(!this.height)return;const s=this.centerOffset,g=this.point.x,I=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=o.b7(1,this.center.lat)*this.worldSize;let M=o.ao(new Float64Array(16));o.a0(M,M,[this.width/2,-this.height/2,1]),o.$(M,M,[1,-1,0]),this.labelPlaneMatrix=M,M=o.ao(new Float64Array(16)),o.a0(M,M,[1,-1,1]),o.$(M,M,[-1,-1,0]),o.a0(M,M,[2/this.width,2/this.height,1]),this.glCoordMatrix=M;const F=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),q=Math.min(this.elevation,this._minEleveationForCurrentTile),A=F-q*this._pixelPerMeter/Math.cos(this._pitch),l=q<0?A:F,f=Math.PI/2+this._pitch,m=this._fov*(.5+s.y/this.height),b=Math.sin(m)*l/Math.sin(o.ad(Math.PI-f-m,.01,Math.PI-.01)),T=this.getHorizon(),z=2*Math.atan(T/this.cameraToCenterDistance)*(.5+s.y/(2*T)),N=Math.sin(z)*l/Math.sin(o.ad(Math.PI-f-z,.01,Math.PI-.01)),X=Math.min(b,N),te=1.01*(Math.cos(Math.PI/2-this._pitch)*X+l),ve=this.height/50;M=new Float64Array(16),o.b8(M,this._fov,this.width/this.height,ve,te),M[8]=2*-s.x/this.width,M[9]=2*s.y/this.height,o.a0(M,M,[1,-1,1]),o.$(M,M,[0,0,-this.cameraToCenterDistance]),o.b9(M,M,this._pitch),o.ae(M,M,this.angle),o.$(M,M,[-g,-I,0]),this.mercatorMatrix=o.a0([],M,[this.worldSize,this.worldSize,this.worldSize]),o.a0(M,M,[1,1,this._pixelPerMeter]),this.pixelMatrix=o.a1(new Float64Array(16),this.labelPlaneMatrix,M),o.$(M,M,[0,0,-this.elevation]),this.projMatrix=M,this.invProjMatrix=o.as([],M),this.pixelMatrix3D=o.a1(new Float64Array(16),this.labelPlaneMatrix,M);const De=this.width%2/2,He=this.height%2/2,nt=Math.cos(this.angle),st=Math.sin(this.angle),gt=g-Math.round(g)+nt*De+st*He,Ot=I-Math.round(I)+nt*He+st*De,Ut=new Float64Array(M);if(o.$(Ut,Ut,[gt>.5?gt-1:gt,Ot>.5?Ot-1:Ot,0]),this.alignedProjMatrix=Ut,M=o.as(new Float64Array(16),this.pixelMatrix),!M)throw new Error("failed to invert matrix");this.pixelMatrixInverse=M,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const s=this.pointCoordinate(new o.P(0,0)),g=[s.x*this.worldSize,s.y*this.worldSize,0,1];return o.ag(g,g,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const s=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new o.P(0,s))}getCameraQueryGeometry(s){const g=this.getCameraPoint();if(s.length===1)return[s[0],g];{let I=g.x,M=g.y,F=g.x,q=g.y;for(const A of s)I=Math.min(I,A.x),M=Math.min(M,A.y),F=Math.max(F,A.x),q=Math.max(q,A.y);return[new o.P(I,M),new o.P(F,M),new o.P(F,q),new o.P(I,q),new o.P(I,M)]}}}function qs(R,s){let g,I=!1,M=null,F=null;const q=()=>{M=null,I&&(R.apply(F,g),M=setTimeout(q,s),I=!1)};return(...A)=>(I=!0,F=this,g=A,M||q(),M)}class so{constructor(s){this._getCurrentHash=()=>{const g=window.location.hash.replace("#","");if(this._hashName){let I;return g.split("&").map(M=>M.split("=")).forEach(M=>{M[0]===this._hashName&&(I=M)}),(I&&I[1]||"").split("/")}return g.split("/")},this._onHashChange=()=>{const g=this._getCurrentHash();if(g.length>=3&&!g.some(I=>isNaN(I))){const I=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(g[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+g[2],+g[1]],zoom:+g[0],bearing:I,pitch:+(g[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const g=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,g)}catch{}},this._updateHash=qs(this._updateHashUnthrottled,300),this._hashName=s&&encodeURIComponent(s)}addTo(s){return this._map=s,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(s){const g=this._map.getCenter(),I=Math.round(100*this._map.getZoom())/100,M=Math.ceil((I*Math.LN2+Math.log(512/360/.5))/Math.LN10),F=Math.pow(10,M),q=Math.round(g.lng*F)/F,A=Math.round(g.lat*F)/F,l=this._map.getBearing(),f=this._map.getPitch();let m="";if(m+=s?`/${q}/${A}/${I}`:`${I}/${A}/${q}`,(l||f)&&(m+="/"+Math.round(10*l)/10),f&&(m+=`/${Math.round(f)}`),this._hashName){const b=this._hashName;let T=!1;const z=window.location.hash.slice(1).split("&").map(N=>{const X=N.split("=")[0];return X===b?(T=!0,`${X}=${m}`):N}).filter(N=>N);return T||z.push(`${b}=${m}`),`#${z.join("&")}`}return`#${m}`}}const So={linearity:.3,easing:o.ba(0,0,.3,1)},MA=o.e({deceleration:2500,maxSpeed:1400},So),Rl=o.e({deceleration:20,maxSpeed:1400},So),nA=o.e({deceleration:1e3,maxSpeed:360},So),Sa=o.e({deceleration:1e3,maxSpeed:90},So);class Xt{constructor(s){this._map=s,this.clear()}clear(){this._inertiaBuffer=[]}record(s){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:o.h.now(),settings:s})}_drainInertiaBuffer(){const s=this._inertiaBuffer,g=o.h.now();for(;s.length>0&&g-s[0].time>160;)s.shift()}_onMoveEnd(s){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const g={zoom:0,bearing:0,pitch:0,pan:new o.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:F}of this._inertiaBuffer)g.zoom+=F.zoomDelta||0,g.bearing+=F.bearingDelta||0,g.pitch+=F.pitchDelta||0,F.panDelta&&g.pan._add(F.panDelta),F.around&&(g.around=F.around),F.pinchAround&&(g.pinchAround=F.pinchAround);const I=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,M={};if(g.pan.mag()){const F=gi(g.pan.mag(),I,o.e({},MA,s||{}));M.offset=g.pan.mult(F.amount/g.pan.mag()),M.center=this._map.transform.center,Si(M,F)}if(g.zoom){const F=gi(g.zoom,I,Rl);M.zoom=this._map.transform.zoom+F.amount,Si(M,F)}if(g.bearing){const F=gi(g.bearing,I,nA);M.bearing=this._map.transform.bearing+o.ad(F.amount,-179,179),Si(M,F)}if(g.pitch){const F=gi(g.pitch,I,Sa);M.pitch=this._map.transform.pitch+F.amount,Si(M,F)}if(M.zoom||M.bearing){const F=g.pinchAround===void 0?g.around:g.pinchAround;M.around=F?this._map.unproject(F):this._map.getCenter()}return this.clear(),o.e(M,{noMoveStart:!0})}}function Si(R,s){(!R.duration||R.duration<s.duration)&&(R.duration=s.duration,R.easing=s.easing)}function gi(R,s,g){const{maxSpeed:I,linearity:M,deceleration:F}=g,q=o.ad(R*M/(s/1e3),-I,I),A=Math.abs(q)/(F*M);return{easing:g.easing,duration:1e3*A,amount:q*(A/2)}}class mt extends o.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(s,g,I,M={}){const F=O.mousePos(g.getCanvasContainer(),I),q=g.unproject(F);super(s,o.e({point:F,lngLat:q,originalEvent:I},M)),this._defaultPrevented=!1,this.target=g}}class Bt extends o.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(s,g,I){const M=s==="touchend"?I.changedTouches:I.touches,F=O.touchPos(g.getCanvasContainer(),M),q=F.map(l=>g.unproject(l)),A=F.reduce((l,f,m,b)=>l.add(f.div(b.length)),new o.P(0,0));super(s,{points:F,point:A,lngLats:q,lngLat:g.unproject(A),originalEvent:I}),this._defaultPrevented=!1}}class ii extends o.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(s,g,I){super(s,{originalEvent:I}),this._defaultPrevented=!1}}class Ci{constructor(s,g){this._map=s,this._clickTolerance=g.clickTolerance}reset(){delete this._mousedownPos}wheel(s){return this._firePreventable(new ii(s.type,this._map,s))}mousedown(s,g){return this._mousedownPos=g,this._firePreventable(new mt(s.type,this._map,s))}mouseup(s){this._map.fire(new mt(s.type,this._map,s))}click(s,g){this._mousedownPos&&this._mousedownPos.dist(g)>=this._clickTolerance||this._map.fire(new mt(s.type,this._map,s))}dblclick(s){return this._firePreventable(new mt(s.type,this._map,s))}mouseover(s){this._map.fire(new mt(s.type,this._map,s))}mouseout(s){this._map.fire(new mt(s.type,this._map,s))}touchstart(s){return this._firePreventable(new Bt(s.type,this._map,s))}touchmove(s){this._map.fire(new Bt(s.type,this._map,s))}touchend(s){this._map.fire(new Bt(s.type,this._map,s))}touchcancel(s){this._map.fire(new Bt(s.type,this._map,s))}_firePreventable(s){if(this._map.fire(s),s.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class ln{constructor(s){this._map=s}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(s){this._map.fire(new mt(s.type,this._map,s))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new mt("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(s){this._delayContextMenu?this._contextMenuEvent=s:this._ignoreContextMenu||this._map.fire(new mt(s.type,this._map,s)),this._map.listens("contextmenu")&&s.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Pn{constructor(s){this._map=s}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(s){return this.transform.pointLocation(o.P.convert(s),this._map.terrain)}}class Qn{constructor(s,g){this._map=s,this._tr=new Pn(s),this._el=s.getCanvasContainer(),this._container=s.getContainer(),this._clickTolerance=g.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(s,g){this.isEnabled()&&s.shiftKey&&s.button===0&&(O.disableDrag(),this._startPos=this._lastPos=g,this._active=!0)}mousemoveWindow(s,g){if(!this._active)return;const I=g;if(this._lastPos.equals(I)||!this._box&&I.dist(this._startPos)<this._clickTolerance)return;const M=this._startPos;this._lastPos=I,this._box||(this._box=O.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",s));const F=Math.min(M.x,I.x),q=Math.max(M.x,I.x),A=Math.min(M.y,I.y),l=Math.max(M.y,I.y);O.setTransform(this._box,`translate(${F}px,${A}px)`),this._box.style.width=q-F+"px",this._box.style.height=l-A+"px"}mouseupWindow(s,g){if(!this._active||s.button!==0)return;const I=this._startPos,M=g;if(this.reset(),O.suppressClick(),I.x!==M.x||I.y!==M.y)return this._map.fire(new o.k("boxzoomend",{originalEvent:s})),{cameraAnimation:F=>F.fitScreenCoordinates(I,M,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",s)}keydown(s){this._active&&s.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",s))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(O.remove(this._box),this._box=null),O.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(s,g){return this._map.fire(new o.k(s,{originalEvent:g}))}}function Bn(R,s){if(R.length!==s.length)throw new Error(`The number of touches and points are not equal - touches ${R.length}, points ${s.length}`);const g={};for(let I=0;I<R.length;I++)g[R[I].identifier]=s[I];return g}class cs{constructor(s){this.reset(),this.numTouches=s.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(s,g,I){(this.centroid||I.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=s.timeStamp),I.length===this.numTouches&&(this.centroid=function(M){const F=new o.P(0,0);for(const q of M)F._add(q);return F.div(M.length)}(g),this.touches=Bn(I,g)))}touchmove(s,g,I){if(this.aborted||!this.centroid)return;const M=Bn(I,g);for(const F in this.touches){const q=M[F];(!q||q.dist(this.touches[F])>30)&&(this.aborted=!0)}}touchend(s,g,I){if((!this.centroid||s.timeStamp-this.startTime>500)&&(this.aborted=!0),I.length===0){const M=!this.aborted&&this.centroid;if(this.reset(),M)return M}}}class Zs{constructor(s){this.singleTap=new cs(s),this.numTaps=s.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(s,g,I){this.singleTap.touchstart(s,g,I)}touchmove(s,g,I){this.singleTap.touchmove(s,g,I)}touchend(s,g,I){const M=this.singleTap.touchend(s,g,I);if(M){const F=s.timeStamp-this.lastTime<500,q=!this.lastTap||this.lastTap.dist(M)<30;if(F&&q||this.reset(),this.count++,this.lastTime=s.timeStamp,this.lastTap=M,this.count===this.numTaps)return this.reset(),M}}}class Js{constructor(s){this._tr=new Pn(s),this._zoomIn=new Zs({numTouches:1,numTaps:2}),this._zoomOut=new Zs({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(s,g,I){this._zoomIn.touchstart(s,g,I),this._zoomOut.touchstart(s,g,I)}touchmove(s,g,I){this._zoomIn.touchmove(s,g,I),this._zoomOut.touchmove(s,g,I)}touchend(s,g,I){const M=this._zoomIn.touchend(s,g,I),F=this._zoomOut.touchend(s,g,I),q=this._tr;return M?(this._active=!0,s.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:A=>A.easeTo({duration:300,zoom:q.zoom+1,around:q.unproject(M)},{originalEvent:s})}):F?(this._active=!0,s.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:A=>A.easeTo({duration:300,zoom:q.zoom-1,around:q.unproject(F)},{originalEvent:s})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class fa{constructor(s){this._enabled=!!s.enable,this._moveStateManager=s.moveStateManager,this._clickTolerance=s.clickTolerance||1,this._moveFunction=s.move,this._activateOnStart=!!s.activateOnStart,s.assignEvents(this),this.reset()}reset(s){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(s)}_move(...s){const g=this._moveFunction(...s);if(g.bearingDelta||g.pitchDelta||g.around||g.panDelta)return this._active=!0,g}dragStart(s,g){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(s)&&(this._moveStateManager.startMove(s),this._lastPoint=g.length?g[0]:g,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(s,g){if(!this.isEnabled())return;const I=this._lastPoint;if(!I)return;if(s.preventDefault(),!this._moveStateManager.isValidMoveEvent(s))return void this.reset(s);const M=g.length?g[0]:g;return!this._moved&&M.dist(I)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=M,this._move(I,M))}dragEnd(s){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(s)&&(this._moved&&O.suppressClick(),this.reset(s))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const cl={0:1,2:2};class jr{constructor(s){this._correctEvent=s.checkCorrectEvent}startMove(s){const g=O.mouseButton(s);this._eventButton=g}endMove(s){delete this._eventButton}isValidStartEvent(s){return this._correctEvent(s)}isValidMoveEvent(s){return!function(g,I){const M=cl[I];return g.buttons===void 0||(g.buttons&M)!==M}(s,this._eventButton)}isValidEndEvent(s){return O.mouseButton(s)===this._eventButton}}class Hu{constructor(){this._firstTouch=void 0}_isOneFingerTouch(s){return s.targetTouches.length===1}_isSameTouchEvent(s){return s.targetTouches[0].identifier===this._firstTouch}startMove(s){this._firstTouch=s.targetTouches[0].identifier}endMove(s){delete this._firstTouch}isValidStartEvent(s){return this._isOneFingerTouch(s)}isValidMoveEvent(s){return this._isOneFingerTouch(s)&&this._isSameTouchEvent(s)}isValidEndEvent(s){return this._isOneFingerTouch(s)&&this._isSameTouchEvent(s)}}const Ol=R=>{R.mousedown=R.dragStart,R.mousemoveWindow=R.dragMove,R.mouseup=R.dragEnd,R.contextmenu=function(s){s.preventDefault()}},ao=({enable:R,clickTolerance:s,bearingDegreesPerPixelMoved:g=.8})=>{const I=new jr({checkCorrectEvent:M=>O.mouseButton(M)===0&&M.ctrlKey||O.mouseButton(M)===2});return new fa({clickTolerance:s,move:(M,F)=>({bearingDelta:(F.x-M.x)*g}),moveStateManager:I,enable:R,assignEvents:Ol})},rA=({enable:R,clickTolerance:s,pitchDegreesPerPixelMoved:g=-.5})=>{const I=new jr({checkCorrectEvent:M=>O.mouseButton(M)===0&&M.ctrlKey||O.mouseButton(M)===2});return new fa({clickTolerance:s,move:(M,F)=>({pitchDelta:(F.y-M.y)*g}),moveStateManager:I,enable:R,assignEvents:Ol})};class un{constructor(s,g){this._minTouches=s.cooperativeGestures?2:1,this._clickTolerance=s.clickTolerance||1,this._map=g,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new o.P(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(s,g,I){return this._calculateTransform(s,g,I)}touchmove(s,g,I){if(this._map._cooperativeGestures&&(this._minTouches===2&&I.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(s,!1,I.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(I.length<this._minTouches))return s.preventDefault(),this._calculateTransform(s,g,I)}touchend(s,g,I){this._calculateTransform(s,g,I),this._active&&I.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(s,g,I){I.length>0&&(this._active=!0);const M=Bn(I,g),F=new o.P(0,0),q=new o.P(0,0);let A=0;for(const f in M){const m=M[f],b=this._touches[f];b&&(F._add(m),q._add(m.sub(b)),A++,M[f]=m)}if(this._touches=M,A<this._minTouches||!q.mag())return;const l=q.div(A);return this._sum._add(l),this._sum.mag()<this._clickTolerance?void 0:{around:F.div(A),panDelta:l}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Co{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(s,g,I){this._firstTwoTouches||I.length<2||(this._firstTwoTouches=[I[0].identifier,I[1].identifier],this._start([g[0],g[1]]))}touchmove(s,g,I){if(!this._firstTwoTouches)return;s.preventDefault();const[M,F]=this._firstTwoTouches,q=Eo(I,g,M),A=Eo(I,g,F);if(!q||!A)return;const l=this._aroundCenter?null:q.add(A).div(2);return this._move([q,A],l,s)}touchend(s,g,I){if(!this._firstTwoTouches)return;const[M,F]=this._firstTwoTouches,q=Eo(I,g,M),A=Eo(I,g,F);q&&A||(this._active&&O.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(s){this._enabled=!0,this._aroundCenter=!!s&&s.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Eo(R,s,g){for(let I=0;I<R.length;I++)if(R[I].identifier===g)return s[I]}function oo(R,s){return Math.log(R/s)/Math.LN2}class zl extends Co{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(s){this._startDistance=this._distance=s[0].dist(s[1])}_move(s,g){const I=this._distance;if(this._distance=s[0].dist(s[1]),this._active||!(Math.abs(oo(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:oo(this._distance,I),pinchAround:g}}}function rn(R,s){return 180*R.angleWith(s)/Math.PI}class hl extends Co{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(s){this._startVector=this._vector=s[0].sub(s[1]),this._minDiameter=s[0].dist(s[1])}_move(s,g){const I=this._vector;if(this._vector=s[0].sub(s[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:rn(this._vector,I),pinchAround:g}}_isBelowThreshold(s){this._minDiameter=Math.min(this._minDiameter,s.mag());const g=25/(Math.PI*this._minDiameter)*360,I=rn(s,this._startVector);return Math.abs(I)<g}}function eu(R){return Math.abs(R.y)>Math.abs(R.x)}class gA extends Co{constructor(s){super(),this._map=s}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(s,g,I){super.touchstart(s,g,I),this._currentTouchCount=I.length}_start(s){this._lastPoints=s,eu(s[0].sub(s[1]))&&(this._valid=!1)}_move(s,g,I){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const M=s[0].sub(this._lastPoints[0]),F=s[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(M,F,I.timeStamp),this._valid?(this._lastPoints=s,this._active=!0,{pitchDelta:(M.y+F.y)/2*-.5}):void 0}gestureBeginsVertically(s,g,I){if(this._valid!==void 0)return this._valid;const M=s.mag()>=2,F=g.mag()>=2;if(!M&&!F)return;if(!M||!F)return this._firstMove===void 0&&(this._firstMove=I),I-this._firstMove<100&&void 0;const q=s.y>0==g.y>0;return eu(s)&&eu(g)&&q}}const UA={panStep:100,bearingStep:15,pitchStep:10};class tu{constructor(s){this._tr=new Pn(s);const g=UA;this._panStep=g.panStep,this._bearingStep=g.bearingStep,this._pitchStep=g.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(s){if(s.altKey||s.ctrlKey||s.metaKey)return;let g=0,I=0,M=0,F=0,q=0;switch(s.keyCode){case 61:case 107:case 171:case 187:g=1;break;case 189:case 109:case 173:g=-1;break;case 37:s.shiftKey?I=-1:(s.preventDefault(),F=-1);break;case 39:s.shiftKey?I=1:(s.preventDefault(),F=1);break;case 38:s.shiftKey?M=1:(s.preventDefault(),q=-1);break;case 40:s.shiftKey?M=-1:(s.preventDefault(),q=1);break;default:return}return this._rotationDisabled&&(I=0,M=0),{cameraAnimation:A=>{const l=this._tr;A.easeTo({duration:300,easeId:"keyboardHandler",easing:GA,zoom:g?Math.round(l.zoom)+g*(s.shiftKey?2:1):l.zoom,bearing:l.bearing+I*this._bearingStep,pitch:l.pitch+M*this._pitchStep,offset:[-F*this._panStep,-q*this._panStep],center:l.center},{originalEvent:s})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function GA(R){return R*(2-R)}const mA=4.000244140625;class ks{constructor(s,g){this._onTimeout=I=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(I)},this._map=s,this._tr=new Pn(s),this._el=s.getCanvasContainer(),this._triggerRenderFrame=g,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(s){this._defaultZoomRate=s}setWheelZoomRate(s){this._wheelZoomRate=s}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(s){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!s&&s.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(s){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!s[this._map._metaKey])return;s.preventDefault()}let g=s.deltaMode===WheelEvent.DOM_DELTA_LINE?40*s.deltaY:s.deltaY;const I=o.h.now(),M=I-(this._lastWheelEventTime||0);this._lastWheelEventTime=I,g!==0&&g%mA==0?this._type="wheel":g!==0&&Math.abs(g)<4?this._type="trackpad":M>400?(this._type=null,this._lastValue=g,this._timeout=setTimeout(this._onTimeout,40,s)):this._type||(this._type=Math.abs(M*g)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,g+=this._lastValue)),s.shiftKey&&g&&(g/=4),this._type&&(this._lastWheelEvent=s,this._delta-=g,this._active||this._start(s)),s.preventDefault()}_start(s){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const g=O.mousePos(this._el,s),I=this._tr;this._around=o.L.convert(this._aroundCenter?I.center:I.unproject(g)),this._aroundPoint=I.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const s=this._tr.transform;if(this._delta!==0){const A=this._type==="wheel"&&Math.abs(this._delta)>mA?this._wheelZoomRate:this._defaultZoomRate;let l=2/(1+Math.exp(-Math.abs(this._delta*A)));this._delta<0&&l!==0&&(l=1/l);const f=typeof this._targetZoom=="number"?s.zoomScale(this._targetZoom):s.scale;this._targetZoom=Math.min(s.maxZoom,Math.max(s.minZoom,s.scaleZoom(f*l))),this._type==="wheel"&&(this._startZoom=s.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const g=typeof this._targetZoom=="number"?this._targetZoom:s.zoom,I=this._startZoom,M=this._easing;let F,q=!1;if(this._type==="wheel"&&I&&M){const A=Math.min((o.h.now()-this._lastWheelEventTime)/200,1),l=M(A);F=o.B.number(I,g,l),A<1?this._frameId||(this._frameId=!0):q=!0}else F=g,q=!0;return this._active=!0,q&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!q,zoomDelta:F-s.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(s){let g=o.bb;if(this._prevEase){const I=this._prevEase,M=(o.h.now()-I.start)/I.duration,F=I.easing(M+.01)-I.easing(M),q=.27/Math.sqrt(F*F+1e-4)*.01,A=Math.sqrt(.0729-q*q);g=o.ba(q,A,.25,1)}return this._prevEase={start:o.h.now(),duration:s,easing:g},g}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class mu{constructor(s,g){this._clickZoom=s,this._tapZoom=g}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class _u{constructor(s){this._tr=new Pn(s),this.reset()}reset(){this._active=!1}dblclick(s,g){return s.preventDefault(),{cameraAnimation:I=>{I.easeTo({duration:300,zoom:this._tr.zoom+(s.shiftKey?-1:1),around:this._tr.unproject(g)},{originalEvent:s})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class vu{constructor(){this._tap=new Zs({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(s,g,I){if(!this._swipePoint)if(this._tapTime){const M=g[0],F=s.timeStamp-this._tapTime<500,q=this._tapPoint.dist(M)<30;F&&q?I.length>0&&(this._swipePoint=M,this._swipeTouch=I[0].identifier):this.reset()}else this._tap.touchstart(s,g,I)}touchmove(s,g,I){if(this._tapTime){if(this._swipePoint){if(I[0].identifier!==this._swipeTouch)return;const M=g[0],F=M.y-this._swipePoint.y;return this._swipePoint=M,s.preventDefault(),this._active=!0,{zoomDelta:F/128}}}else this._tap.touchmove(s,g,I)}touchend(s,g,I){if(this._tapTime)this._swipePoint&&I.length===0&&this.reset();else{const M=this._tap.touchend(s,g,I);M&&(this._tapTime=s.timeStamp,this._tapPoint=M)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class HA{constructor(s,g,I){this._el=s,this._mousePan=g,this._touchPan=I}enable(s){this._inertiaOptions=s||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class la{constructor(s,g,I){this._pitchWithRotate=s.pitchWithRotate,this._mouseRotate=g,this._mousePitch=I}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Go{constructor(s,g,I,M){this._el=s,this._touchZoom=g,this._touchRotate=I,this._tapDragZoom=M,this._rotationDisabled=!1,this._enabled=!0}enable(s){this._touchZoom.enable(s),this._rotationDisabled||this._touchRotate.enable(s),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const fl=R=>R.zoom||R.drag||R.pitch||R.rotate;class iu extends o.k{}function dl(R){return R.panDelta&&R.panDelta.mag()||R.zoomDelta||R.bearingDelta||R.pitchDelta}class nu{constructor(s,g){this.handleWindowEvent=M=>{this.handleEvent(M,`${M.type}Window`)},this.handleEvent=(M,F)=>{if(M.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const q=M.type==="renderFrame"?void 0:M,A={needsRenderFrame:!1},l={},f={},m=M.touches,b=m?this._getMapTouches(m):void 0,T=b?O.touchPos(this._el,b):O.mousePos(this._el,M);for(const{handlerName:X,handler:te,allowed:ve}of this._handlers){if(!te.isEnabled())continue;let De;this._blockedByActive(f,ve,X)?te.reset():te[F||M.type]&&(De=te[F||M.type](M,T,b),this.mergeHandlerResult(A,l,De,X,q),De&&De.needsRenderFrame&&this._triggerRenderFrame()),(De||te.isActive())&&(f[X]=te)}const z={};for(const X in this._previousActiveHandlers)f[X]||(z[X]=q);this._previousActiveHandlers=f,(Object.keys(z).length||dl(A))&&(this._changes.push([A,l,z]),this._triggerRenderFrame()),(Object.keys(f).length||dl(A))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:N}=A;N&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],N(this._map))},this._map=s,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Xt(s),this._bearingSnap=g.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(g);const I=this._el;this._listeners=[[I,"touchstart",{passive:!0}],[I,"touchmove",{passive:!1}],[I,"touchend",void 0],[I,"touchcancel",void 0],[I,"mousedown",void 0],[I,"mousemove",void 0],[I,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[I,"mouseover",void 0],[I,"mouseout",void 0],[I,"dblclick",void 0],[I,"click",void 0],[I,"keydown",{capture:!1}],[I,"keyup",void 0],[I,"wheel",{passive:!1}],[I,"contextmenu",void 0],[window,"blur",void 0]];for(const[M,F,q]of this._listeners)O.addEventListener(M,F,M===document?this.handleWindowEvent:this.handleEvent,q)}destroy(){for(const[s,g,I]of this._listeners)O.removeEventListener(s,g,s===document?this.handleWindowEvent:this.handleEvent,I)}_addDefaultHandlers(s){const g=this._map,I=g.getCanvasContainer();this._add("mapEvent",new Ci(g,s));const M=g.boxZoom=new Qn(g,s);this._add("boxZoom",M),s.interactive&&s.boxZoom&&M.enable();const F=new Js(g),q=new _u(g);g.doubleClickZoom=new mu(q,F),this._add("tapZoom",F),this._add("clickZoom",q),s.interactive&&s.doubleClickZoom&&g.doubleClickZoom.enable();const A=new vu;this._add("tapDragZoom",A);const l=g.touchPitch=new gA(g);this._add("touchPitch",l),s.interactive&&s.touchPitch&&g.touchPitch.enable(s.touchPitch);const f=ao(s),m=rA(s);g.dragRotate=new la(s,f,m),this._add("mouseRotate",f,["mousePitch"]),this._add("mousePitch",m,["mouseRotate"]),s.interactive&&s.dragRotate&&g.dragRotate.enable();const b=(({enable:ve,clickTolerance:De})=>{const He=new jr({checkCorrectEvent:nt=>O.mouseButton(nt)===0&&!nt.ctrlKey});return new fa({clickTolerance:De,move:(nt,st)=>({around:st,panDelta:st.sub(nt)}),activateOnStart:!0,moveStateManager:He,enable:ve,assignEvents:Ol})})(s),T=new un(s,g);g.dragPan=new HA(I,b,T),this._add("mousePan",b),this._add("touchPan",T,["touchZoom","touchRotate"]),s.interactive&&s.dragPan&&g.dragPan.enable(s.dragPan);const z=new hl,N=new zl;g.touchZoomRotate=new Go(I,N,z,A),this._add("touchRotate",z,["touchPan","touchZoom"]),this._add("touchZoom",N,["touchPan","touchRotate"]),s.interactive&&s.touchZoomRotate&&g.touchZoomRotate.enable(s.touchZoomRotate);const X=g.scrollZoom=new ks(g,()=>this._triggerRenderFrame());this._add("scrollZoom",X,["mousePan"]),s.interactive&&s.scrollZoom&&g.scrollZoom.enable(s.scrollZoom);const te=g.keyboard=new tu(g);this._add("keyboard",te),s.interactive&&s.keyboard&&g.keyboard.enable(),this._add("blockableMapEvent",new ln(g))}_add(s,g,I){this._handlers.push({handlerName:s,handler:g,allowed:I}),this._handlersById[s]=g}stop(s){if(!this._updatingCamera){for(const{handler:g}of this._handlers)g.reset();this._inertia.clear(),this._fireEvents({},{},s),this._changes=[]}}isActive(){for(const{handler:s}of this._handlers)if(s.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!fl(this._eventsInProgress)||this.isZooming()}_blockedByActive(s,g,I){for(const M in s)if(M!==I&&(!g||g.indexOf(M)<0))return!0;return!1}_getMapTouches(s){const g=[];for(const I of s)this._el.contains(I.target)&&g.push(I);return g}mergeHandlerResult(s,g,I,M,F){if(!I)return;o.e(s,I);const q={handlerName:M,originalEvent:I.originalEvent||F};I.zoomDelta!==void 0&&(g.zoom=q),I.panDelta!==void 0&&(g.drag=q),I.pitchDelta!==void 0&&(g.pitch=q),I.bearingDelta!==void 0&&(g.rotate=q)}_applyChanges(){const s={},g={},I={};for(const[M,F,q]of this._changes)M.panDelta&&(s.panDelta=(s.panDelta||new o.P(0,0))._add(M.panDelta)),M.zoomDelta&&(s.zoomDelta=(s.zoomDelta||0)+M.zoomDelta),M.bearingDelta&&(s.bearingDelta=(s.bearingDelta||0)+M.bearingDelta),M.pitchDelta&&(s.pitchDelta=(s.pitchDelta||0)+M.pitchDelta),M.around!==void 0&&(s.around=M.around),M.pinchAround!==void 0&&(s.pinchAround=M.pinchAround),M.noInertia&&(s.noInertia=M.noInertia),o.e(g,F),o.e(I,q);this._updateMapTransform(s,g,I),this._changes=[]}_updateMapTransform(s,g,I){const M=this._map,F=M._getTransformForUpdate(),q=M.terrain;if(!(dl(s)||q&&this._terrainMovement))return this._fireEvents(g,I,!0);let{panDelta:A,zoomDelta:l,bearingDelta:f,pitchDelta:m,around:b,pinchAround:T}=s;T!==void 0&&(b=T),M._stop(!0),b=b||M.transform.centerPoint;const z=F.pointLocation(A?b.sub(A):b);f&&(F.bearing+=f),m&&(F.pitch+=m),l&&(F.zoom+=l),q?this._terrainMovement||!g.drag&&!g.zoom?g.drag&&this._terrainMovement?F.center=F.pointLocation(F.centerPoint.sub(A)):F.setLocationAtPoint(z,b):(this._terrainMovement=!0,this._map._elevationFreeze=!0,F.setLocationAtPoint(z,b),this._map.once("moveend",()=>{this._map._elevationFreeze=!1,this._terrainMovement=!1,F.recalculateZoom(M.terrain)})):F.setLocationAtPoint(z,b),M._applyUpdatedTransform(F),this._map._update(),s.noInertia||this._inertia.record(s),this._fireEvents(g,I,!0)}_fireEvents(s,g,I){const M=fl(this._eventsInProgress),F=fl(s),q={};for(const m in s){const{originalEvent:b}=s[m];this._eventsInProgress[m]||(q[`${m}start`]=b),this._eventsInProgress[m]=s[m]}!M&&F&&this._fireEvent("movestart",F.originalEvent);for(const m in q)this._fireEvent(m,q[m]);F&&this._fireEvent("move",F.originalEvent);for(const m in s){const{originalEvent:b}=s[m];this._fireEvent(m,b)}const A={};let l;for(const m in this._eventsInProgress){const{handlerName:b,originalEvent:T}=this._eventsInProgress[m];this._handlersById[b].isActive()||(delete this._eventsInProgress[m],l=g[b]||T,A[`${m}end`]=l)}for(const m in A)this._fireEvent(m,A[m]);const f=fl(this._eventsInProgress);if(I&&(M||F)&&!f){this._updatingCamera=!0;const m=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),b=T=>T!==0&&-this._bearingSnap<T&&T<this._bearingSnap;!m||!m.essential&&o.h.prefersReducedMotion?(this._map.fire(new o.k("moveend",{originalEvent:l})),b(this._map.getBearing())&&this._map.resetNorth()):(b(m.bearing||this._map.getBearing())&&(m.bearing=0),m.freezeElevation=!0,this._map.easeTo(m,{originalEvent:l})),this._updatingCamera=!1}}_fireEvent(s,g){this._map.fire(new o.k(s,g?{originalEvent:g}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(s=>{delete this._frameId,this.handleEvent(new iu("renderFrame",{timeStamp:s})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class lr extends o.E{constructor(s,g){super(),this._renderFrameCallback=()=>{const I=Math.min((o.h.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(I)),I<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=s,this._bearingSnap=g.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new o.L(this.transform.center.lng,this.transform.center.lat)}setCenter(s,g){return this.jumpTo({center:s},g)}panBy(s,g,I){return s=o.P.convert(s).mult(-1),this.panTo(this.transform.center,o.e({offset:s},g),I)}panTo(s,g,I){return this.easeTo(o.e({center:s},g),I)}getZoom(){return this.transform.zoom}setZoom(s,g){return this.jumpTo({zoom:s},g),this}zoomTo(s,g,I){return this.easeTo(o.e({zoom:s},g),I)}zoomIn(s,g){return this.zoomTo(this.getZoom()+1,s,g),this}zoomOut(s,g){return this.zoomTo(this.getZoom()-1,s,g),this}getBearing(){return this.transform.bearing}setBearing(s,g){return this.jumpTo({bearing:s},g),this}getPadding(){return this.transform.padding}setPadding(s,g){return this.jumpTo({padding:s},g),this}rotateTo(s,g,I){return this.easeTo(o.e({bearing:s},g),I)}resetNorth(s,g){return this.rotateTo(0,o.e({duration:1e3},s),g),this}resetNorthPitch(s,g){return this.easeTo(o.e({bearing:0,pitch:0,duration:1e3},s),g),this}snapToNorth(s,g){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(s,g):this}getPitch(){return this.transform.pitch}setPitch(s,g){return this.jumpTo({pitch:s},g),this}cameraForBounds(s,g){s=Ti.convert(s);const I=g&&g.bearing||0;return this._cameraForBoxAndBearing(s.getNorthWest(),s.getSouthEast(),I,g)}_cameraForBoxAndBearing(s,g,I,M){const F={top:0,bottom:0,right:0,left:0};if(typeof(M=o.e({padding:F,offset:[0,0],maxZoom:this.transform.maxZoom},M)).padding=="number"){const st=M.padding;M.padding={top:st,bottom:st,right:st,left:st}}M.padding=o.e(F,M.padding);const q=this.transform,A=q.padding,l=q.project(o.L.convert(s)),f=q.project(o.L.convert(g)),m=l.rotate(-I*Math.PI/180),b=f.rotate(-I*Math.PI/180),T=new o.P(Math.max(m.x,b.x),Math.max(m.y,b.y)),z=new o.P(Math.min(m.x,b.x),Math.min(m.y,b.y)),N=T.sub(z),X=(q.width-(A.left+A.right+M.padding.left+M.padding.right))/N.x,te=(q.height-(A.top+A.bottom+M.padding.top+M.padding.bottom))/N.y;if(te<0||X<0)return void o.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const ve=Math.min(q.scaleZoom(q.scale*Math.min(X,te)),M.maxZoom),De=o.P.convert(M.offset),He=new o.P((M.padding.left-M.padding.right)/2,(M.padding.top-M.padding.bottom)/2).rotate(I*Math.PI/180),nt=De.add(He).mult(q.scale/q.zoomScale(ve));return{center:q.unproject(l.add(f).div(2).sub(nt)),zoom:ve,bearing:I}}fitBounds(s,g,I){return this._fitInternal(this.cameraForBounds(s,g),g,I)}fitScreenCoordinates(s,g,I,M,F){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(o.P.convert(s)),this.transform.pointLocation(o.P.convert(g)),I,M),M,F)}_fitInternal(s,g,I){return s?(delete(g=o.e(s,g)).padding,g.linear?this.easeTo(g,I):this.flyTo(g,I)):this}jumpTo(s,g){this.stop();const I=this._getTransformForUpdate();let M=!1,F=!1,q=!1;return"zoom"in s&&I.zoom!==+s.zoom&&(M=!0,I.zoom=+s.zoom),s.center!==void 0&&(I.center=o.L.convert(s.center)),"bearing"in s&&I.bearing!==+s.bearing&&(F=!0,I.bearing=+s.bearing),"pitch"in s&&I.pitch!==+s.pitch&&(q=!0,I.pitch=+s.pitch),s.padding==null||I.isPaddingEqual(s.padding)||(I.padding=s.padding),this._applyUpdatedTransform(I),this.fire(new o.k("movestart",g)).fire(new o.k("move",g)),M&&this.fire(new o.k("zoomstart",g)).fire(new o.k("zoom",g)).fire(new o.k("zoomend",g)),F&&this.fire(new o.k("rotatestart",g)).fire(new o.k("rotate",g)).fire(new o.k("rotateend",g)),q&&this.fire(new o.k("pitchstart",g)).fire(new o.k("pitch",g)).fire(new o.k("pitchend",g)),this.fire(new o.k("moveend",g))}calculateCameraOptionsFromTo(s,g,I,M=0){const F=o.U.fromLngLat(s,g),q=o.U.fromLngLat(I,M),A=q.x-F.x,l=q.y-F.y,f=q.z-F.z,m=Math.hypot(A,l,f);if(m===0)throw new Error("Can't calculate camera options with same From and To");const b=Math.hypot(A,l),T=this.transform.scaleZoom(this.transform.cameraToCenterDistance/m/this.transform.tileSize),z=180*Math.atan2(A,-l)/Math.PI;let N=180*Math.acos(b/m)/Math.PI;return N=f<0?90-N:90+N,{center:q.toLngLat(),zoom:T,pitch:N,bearing:z}}easeTo(s,g){this._stop(!1,s.easeId),((s=o.e({offset:[0,0],duration:500,easing:o.bb},s)).animate===!1||!s.essential&&o.h.prefersReducedMotion)&&(s.duration=0);const I=this._getTransformForUpdate(),M=this.getZoom(),F=this.getBearing(),q=this.getPitch(),A=this.getPadding(),l="zoom"in s?+s.zoom:M,f="bearing"in s?this._normalizeBearing(s.bearing,F):F,m="pitch"in s?+s.pitch:q,b="padding"in s?s.padding:I.padding,T=o.P.convert(s.offset);let z=I.centerPoint.add(T);const N=I.pointLocation(z),X=o.L.convert(s.center||N);this._normalizeCenter(X);const te=I.project(N),ve=I.project(X).sub(te),De=I.zoomScale(l-M);let He,nt;s.around&&(He=o.L.convert(s.around),nt=I.locationPoint(He));const st={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||l!==M,this._rotating=this._rotating||F!==f,this._pitching=this._pitching||m!==q,this._padding=!I.isPaddingEqual(b),this._easeId=s.easeId,this._prepareEase(g,s.noMoveStart,st),this.terrain&&this._prepareElevation(X),this._ease(gt=>{if(this._zooming&&(I.zoom=o.B.number(M,l,gt)),this._rotating&&(I.bearing=o.B.number(F,f,gt)),this._pitching&&(I.pitch=o.B.number(q,m,gt)),this._padding&&(I.interpolatePadding(A,b,gt),z=I.centerPoint.add(T)),this.terrain&&!s.freezeElevation&&this._updateElevation(gt),He)I.setLocationAtPoint(He,nt);else{const Ot=I.zoomScale(I.zoom-M),Ut=l>M?Math.min(2,De):Math.max(.5,De),Mt=Math.pow(Ut,1-gt),zt=I.unproject(te.add(ve.mult(gt*Mt)).mult(Ot));I.setLocationAtPoint(I.renderWorldCopies?zt.wrap():zt,z)}this._applyUpdatedTransform(I),this._fireMoveEvents(g)},gt=>{this.terrain&&this._finalizeElevation(),this._afterEase(g,gt)},s),this}_prepareEase(s,g,I={}){this._moving=!0,g||I.moving||this.fire(new o.k("movestart",s)),this._zooming&&!I.zooming&&this.fire(new o.k("zoomstart",s)),this._rotating&&!I.rotating&&this.fire(new o.k("rotatestart",s)),this._pitching&&!I.pitching&&this.fire(new o.k("pitchstart",s))}_prepareElevation(s){this._elevationCenter=s,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(s,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(s){this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const g=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(s<1&&g!==this._elevationTarget){const I=this._elevationTarget-this._elevationStart;this._elevationStart+=s*(I-(g-(I*s+this._elevationStart))/(1-s)),this._elevationTarget=g}this.transform.elevation=o.B.number(this._elevationStart,this._elevationTarget,s)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(s){if(!this.transformCameraUpdate)return;const g=s.clone(),{center:I,zoom:M,pitch:F,bearing:q,elevation:A}=this.transformCameraUpdate(g);I&&(g.center=I),M!==void 0&&(g.zoom=M),F!==void 0&&(g.pitch=F),q!==void 0&&(g.bearing=q),A!==void 0&&(g.elevation=A),this.transform.apply(g)}_fireMoveEvents(s){this.fire(new o.k("move",s)),this._zooming&&this.fire(new o.k("zoom",s)),this._rotating&&this.fire(new o.k("rotate",s)),this._pitching&&this.fire(new o.k("pitch",s))}_afterEase(s,g){if(this._easeId&&g&&this._easeId===g)return;delete this._easeId;const I=this._zooming,M=this._rotating,F=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,I&&this.fire(new o.k("zoomend",s)),M&&this.fire(new o.k("rotateend",s)),F&&this.fire(new o.k("pitchend",s)),this.fire(new o.k("moveend",s))}flyTo(s,g){if(!s.essential&&o.h.prefersReducedMotion){const bi=o.F(s,["center","zoom","bearing","pitch","around"]);return this.jumpTo(bi,g)}this.stop(),s=o.e({offset:[0,0],speed:1.2,curve:1.42,easing:o.bb},s);const I=this._getTransformForUpdate(),M=this.getZoom(),F=this.getBearing(),q=this.getPitch(),A=this.getPadding(),l="zoom"in s?o.ad(+s.zoom,I.minZoom,I.maxZoom):M,f="bearing"in s?this._normalizeBearing(s.bearing,F):F,m="pitch"in s?+s.pitch:q,b="padding"in s?s.padding:I.padding,T=I.zoomScale(l-M),z=o.P.convert(s.offset);let N=I.centerPoint.add(z);const X=I.pointLocation(N),te=o.L.convert(s.center||X);this._normalizeCenter(te);const ve=I.project(X),De=I.project(te).sub(ve);let He=s.curve;const nt=Math.max(I.width,I.height),st=nt/T,gt=De.mag();if("minZoom"in s){const bi=o.ad(Math.min(s.minZoom,M,l),I.minZoom,I.maxZoom),Dn=nt/I.zoomScale(bi-M);He=Math.sqrt(Dn/gt*2)}const Ot=He*He;function Ut(bi){const Dn=(st*st-nt*nt+(bi?-1:1)*Ot*Ot*gt*gt)/(2*(bi?st:nt)*Ot*gt);return Math.log(Math.sqrt(Dn*Dn+1)-Dn)}function Mt(bi){return(Math.exp(bi)-Math.exp(-bi))/2}function zt(bi){return(Math.exp(bi)+Math.exp(-bi))/2}const Ft=Ut(!1);let Bi=function(bi){return zt(Ft)/zt(Ft+He*bi)},hi=function(bi){return nt*((zt(Ft)*(Mt(Dn=Ft+He*bi)/zt(Dn))-Mt(Ft))/Ot)/gt;var Dn},xi=(Ut(!0)-Ft)/He;if(Math.abs(gt)<1e-6||!isFinite(xi)){if(Math.abs(nt-st)<1e-6)return this.easeTo(s,g);const bi=st<nt?-1:1;xi=Math.abs(Math.log(st/nt))/He,hi=function(){return 0},Bi=function(Dn){return Math.exp(bi*He*Dn)}}return s.duration="duration"in s?+s.duration:1e3*xi/("screenSpeed"in s?+s.screenSpeed/He:+s.speed),s.maxDuration&&s.duration>s.maxDuration&&(s.duration=0),this._zooming=!0,this._rotating=F!==f,this._pitching=m!==q,this._padding=!I.isPaddingEqual(b),this._prepareEase(g,!1),this.terrain&&this._prepareElevation(te),this._ease(bi=>{const Dn=bi*xi,dn=1/Bi(Dn);I.zoom=bi===1?l:M+I.scaleZoom(dn),this._rotating&&(I.bearing=o.B.number(F,f,bi)),this._pitching&&(I.pitch=o.B.number(q,m,bi)),this._padding&&(I.interpolatePadding(A,b,bi),N=I.centerPoint.add(z)),this.terrain&&!s.freezeElevation&&this._updateElevation(bi);const tn=bi===1?te:I.unproject(ve.add(De.mult(hi(Dn))).mult(dn));I.setLocationAtPoint(I.renderWorldCopies?tn.wrap():tn,N),this._applyUpdatedTransform(I),this._fireMoveEvents(g)},()=>{this.terrain&&this._finalizeElevation(),this._afterEase(g)},s),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(s,g){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const I=this._onEaseEnd;delete this._onEaseEnd,I.call(this,g)}if(!s){const I=this.handlers;I&&I.stop(!1)}return this}_ease(s,g,I){I.animate===!1||I.duration===0?(s(1),g()):(this._easeStart=o.h.now(),this._easeOptions=I,this._onEaseFrame=s,this._onEaseEnd=g,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(s,g){s=o.b5(s,-180,180);const I=Math.abs(s-g);return Math.abs(s-360-g)<I&&(s-=360),Math.abs(s+360-g)<I&&(s+=360),s}_normalizeCenter(s){const g=this.transform;if(!g.renderWorldCopies||g.lngRange)return;const I=s.lng-g.center.lng;s.lng+=I>180?-360:I<-180?360:0}queryTerrainElevation(s){return this.terrain?this.terrain.getElevationForLngLatZoom(o.L.convert(s),this.transform.tileZoom)-this.transform.elevation:null}}class ns{constructor(s={}){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=g=>{!g||g.sourceDataType!=="metadata"&&g.sourceDataType!=="visibility"&&g.dataType!=="style"&&g.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=s}getDefaultPosition(){return"bottom-right"}onAdd(s){return this._map=s,this._compact=this.options&&this.options.compact,this._container=O.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=O.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=O.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){O.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(s,g){const I=this._map._getUIString(`AttributionControl.${g}`);s.title=I,s.setAttribute("aria-label",I)}_updateAttributions(){if(!this._map.style)return;let s=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?s=s.concat(this.options.customAttribution.map(M=>typeof M!="string"?"":M)):typeof this.options.customAttribution=="string"&&s.push(this.options.customAttribution)),this._map.style.stylesheet){const M=this._map.style.stylesheet;this.styleOwner=M.owner,this.styleId=M.id}const g=this._map.style.sourceCaches;for(const M in g){const F=g[M];if(F.used||F.usedForTerrain){const q=F.getSource();q.attribution&&s.indexOf(q.attribution)<0&&s.push(q.attribution)}}s=s.filter(M=>String(M).trim()),s.sort((M,F)=>M.length-F.length),s=s.filter((M,F)=>{for(let q=F+1;q<s.length;q++)if(s[q].indexOf(M)>=0)return!1;return!0});const I=s.join(" | ");I!==this._attribHTML&&(this._attribHTML=I,s.length?(this._innerContainer.innerHTML=I,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Jr{constructor(s={}){this._updateCompact=()=>{const g=this._container.children;if(g.length){const I=g[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&I.classList.add("maplibregl-compact"):I.classList.remove("maplibregl-compact")}},this.options=s}getDefaultPosition(){return"bottom-left"}onAdd(s){this._map=s,this._compact=this.options&&this.options.compact,this._container=O.create("div","maplibregl-ctrl");const g=O.create("a","maplibregl-ctrl-logo");return g.target="_blank",g.rel="noopener nofollow",g.href="https://maplibre.org/",g.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),g.setAttribute("rel","noopener nofollow"),this._container.appendChild(g),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){O.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class da{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(s){const g=++this._id;return this._queue.push({callback:s,id:g,cancelled:!1}),g}remove(s){const g=this._currentlyRunning,I=g?this._queue.concat(g):this._queue;for(const M of I)if(M.id===s)return void(M.cancelled=!0)}run(s=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const g=this._currentlyRunning=this._queue;this._queue=[];for(const I of g)if(!I.cancelled&&(I.callback(s),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const zn={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"};var Io=o.Q([{name:"a_pos3d",type:"Int16",components:3}]);class ru extends o.E{constructor(s){super(),this.sourceCache=s,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,s.usedForTerrain=!0,s.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(s,g){this.sourceCache.update(s,g),this._renderableTilesKeys=[];const I={};for(const M of s.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:g}))I[M.key]=!0,this._renderableTilesKeys.push(M.key),this._tiles[M.key]||(M.posMatrix=new Float64Array(16),o.aS(M.posMatrix,0,o.N,0,o.N,0,1),this._tiles[M.key]=new sn(M,this.tileSize));for(const M in this._tiles)I[M]||delete this._tiles[M]}freeRtt(s){for(const g in this._tiles){const I=this._tiles[g];(!s||I.tileID.equals(s)||I.tileID.isChildOf(s)||s.isChildOf(I.tileID))&&(I.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(s=>this.getTileByID(s))}getTileByID(s){return this._tiles[s]}getTerrainCoords(s){const g={};for(const I of this._renderableTilesKeys){const M=this._tiles[I].tileID;if(M.canonical.equals(s.canonical)){const F=s.clone();F.posMatrix=new Float64Array(16),o.aS(F.posMatrix,0,o.N,0,o.N,0,1),g[I]=F}else if(M.canonical.isChildOf(s.canonical)){const F=s.clone();F.posMatrix=new Float64Array(16);const q=M.canonical.z-s.canonical.z,A=M.canonical.x-(M.canonical.x>>q<<q),l=M.canonical.y-(M.canonical.y>>q<<q),f=o.N>>q;o.aS(F.posMatrix,0,f,0,f,0,1),o.$(F.posMatrix,F.posMatrix,[-A*f,-l*f,0]),g[I]=F}else if(s.canonical.isChildOf(M.canonical)){const F=s.clone();F.posMatrix=new Float64Array(16);const q=s.canonical.z-M.canonical.z,A=s.canonical.x-(s.canonical.x>>q<<q),l=s.canonical.y-(s.canonical.y>>q<<q),f=o.N>>q;o.aS(F.posMatrix,0,o.N,0,o.N,0,1),o.$(F.posMatrix,F.posMatrix,[A*f,l*f,0]),o.a0(F.posMatrix,F.posMatrix,[1/2**q,1/2**q,0]),g[I]=F}}return g}getSourceTile(s,g){const I=this.sourceCache._source;let M=s.overscaledZ-this.deltaZoom;if(M>I.maxzoom&&(M=I.maxzoom),M<I.minzoom)return null;this._sourceTileCache[s.key]||(this._sourceTileCache[s.key]=s.scaledTo(M).key);let F=this.sourceCache.getTileByID(this._sourceTileCache[s.key]);if((!F||!F.dem)&&g)for(;M>=I.minzoom&&(!F||!F.dem);)F=this.sourceCache.getTileByID(s.scaledTo(M--).key);return F}tilesAfterTime(s=Date.now()){return Object.values(this._tiles).filter(g=>g.timeAdded>=s)}}class sA{constructor(s,g,I){this.painter=s,this.sourceCache=new ru(g),this.options=I,this.exaggeration=typeof I.exaggeration=="number"?I.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(s,g,I,M=o.N){var F;if(!(g>=0&&g<M&&I>=0&&I<M))return 0;const q=this.getTerrainData(s),A=(F=q.tile)===null||F===void 0?void 0:F.dem;if(!A)return 0;const l=function(N,X,te){var ve=X[0],De=X[1];return N[0]=te[0]*ve+te[4]*De+te[12],N[1]=te[1]*ve+te[5]*De+te[13],N}([],[g/M*o.N,I/M*o.N],q.u_terrain_matrix),f=[l[0]*A.dim,l[1]*A.dim],m=Math.floor(f[0]),b=Math.floor(f[1]),T=f[0]-m,z=f[1]-b;return A.get(m,b)*(1-T)*(1-z)+A.get(m+1,b)*T*(1-z)+A.get(m,b+1)*(1-T)*z+A.get(m+1,b+1)*T*z}getElevationForLngLatZoom(s,g){const{tileID:I,mercatorX:M,mercatorY:F}=this._getOverscaledTileIDFromLngLatZoom(s,g);return this.getElevation(I,M%o.N,F%o.N,o.N)}getElevation(s,g,I,M=o.N){return this.getDEMElevation(s,g,I,M)*this.exaggeration}getTerrainData(s){if(!this._emptyDemTexture){const M=this.painter.context,F=new o.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new et(M,F,M.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new et(M,new o.R({width:1,height:1}),M.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(M.gl.NEAREST,M.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=o.ao([])}const g=this.sourceCache.getSourceTile(s,!0);if(g&&g.dem&&(!g.demTexture||g.needsTerrainPrepare)){const M=this.painter.context;g.demTexture=this.painter.getTileTexture(g.dem.stride),g.demTexture?g.demTexture.update(g.dem.getPixels(),{premultiply:!1}):g.demTexture=new et(M,g.dem.getPixels(),M.gl.RGBA,{premultiply:!1}),g.demTexture.bind(M.gl.NEAREST,M.gl.CLAMP_TO_EDGE),g.needsTerrainPrepare=!1}const I=g&&g+g.tileID.key+s.key;if(I&&!this._demMatrixCache[I]){const M=this.sourceCache.sourceCache._source.maxzoom;let F=s.canonical.z-g.tileID.canonical.z;s.overscaledZ>s.canonical.z&&(s.canonical.z>=M?F=s.canonical.z-M:o.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const q=s.canonical.x-(s.canonical.x>>F<<F),A=s.canonical.y-(s.canonical.y>>F<<F),l=o.bc(new Float64Array(16),[1/(o.N<<F),1/(o.N<<F),0]);o.$(l,l,[q*o.N,A*o.N,0]),this._demMatrixCache[s.key]={matrix:l,coord:s}}return{u_depth:2,u_terrain:3,u_terrain_dim:g&&g.dem&&g.dem.dim||1,u_terrain_matrix:I?this._demMatrixCache[s.key].matrix:this._emptyDemMatrix,u_terrain_unpack:g&&g.dem&&g.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(g&&g.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:g}}getFramebuffer(s){const g=this.painter,I=g.width/devicePixelRatio,M=g.height/devicePixelRatio;return!this._fbo||this._fbo.width===I&&this._fbo.height===M||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new et(g.context,{width:I,height:M,data:null},g.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(g.context.gl.NEAREST,g.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new et(g.context,{width:I,height:M,data:null},g.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(g.context.gl.NEAREST,g.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=g.context.createFramebuffer(I,M,!0,!1),this._fbo.depthAttachment.set(g.context.createRenderbuffer(g.context.gl.DEPTH_COMPONENT16,I,M))),this._fbo.colorAttachment.set(s==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const s=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const g=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let F=0,q=0;F<this._coordsTextureSize;F++)for(let A=0;A<this._coordsTextureSize;A++,q+=4)g[q+0]=255&A,g[q+1]=255&F,g[q+2]=A>>8<<4|F>>8,g[q+3]=0;const I=new o.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(g.buffer)),M=new et(s,I,s.gl.RGBA,{premultiply:!1});return M.bind(s.gl.NEAREST,s.gl.CLAMP_TO_EDGE),this._coordsTexture=M,M}pointCoordinate(s){const g=new Uint8Array(4),I=this.painter.context,M=I.gl;I.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),M.readPixels(s.x,this.painter.height/devicePixelRatio-s.y-1,1,1,M.RGBA,M.UNSIGNED_BYTE,g),I.bindFramebuffer.set(null);const F=g[0]+(g[2]>>4<<8),q=g[1]+((15&g[2])<<8),A=this.coordsIndex[255-g[3]],l=A&&this.sourceCache.getTileByID(A);if(!l)return null;const f=this._coordsTextureSize,m=(1<<l.tileID.canonical.z)*f;return new o.U(this._allowMercatorOverflow(s,(l.tileID.canonical.x*f+F)/m),(l.tileID.canonical.y*f+q)/m,this.getElevation(l.tileID,F,q,f))}getTerrainMesh(){if(this._mesh)return this._mesh;const s=this.painter.context,g=new o.bd,I=new o.b0,M=this.meshSize,F=o.N/M,q=M*M;for(let b=0;b<=M;b++)for(let T=0;T<=M;T++)g.emplaceBack(T*F,b*F,0);for(let b=0;b<q;b+=M+1)for(let T=0;T<M;T++)I.emplaceBack(T+b,M+T+b+1,M+T+b+2),I.emplaceBack(T+b,M+T+b+2,T+b+1);const A=g.length,l=A+2*(M+1);for(const b of[0,1])for(let T=0;T<=M;T++)for(const z of[0,1])g.emplaceBack(T*F,b*o.N,z);for(let b=0;b<2*M;b+=2)I.emplaceBack(l+b,l+b+1,l+b+3),I.emplaceBack(l+b,l+b+3,l+b+2),I.emplaceBack(A+b,A+b+3,A+b+1),I.emplaceBack(A+b,A+b+2,A+b+3);const f=g.length,m=f+2*(M+1);for(const b of[0,1])for(let T=0;T<=M;T++)for(const z of[0,1])g.emplaceBack(b*o.N,T*F,z);for(let b=0;b<2*M;b+=2)I.emplaceBack(f+b,f+b+1,f+b+3),I.emplaceBack(f+b,f+b+3,f+b+2),I.emplaceBack(m+b,m+b+3,m+b+1),I.emplaceBack(m+b,m+b+2,m+b+3);return this._mesh={indexBuffer:s.createIndexBuffer(I),vertexBuffer:s.createVertexBuffer(g,Io.members),segments:o.S.simpleSegment(0,0,g.length,I.length)},this._mesh}getMeshFrameDelta(s){return 2*Math.PI*o.be/Math.pow(2,s)/5}getMinTileElevationForLngLatZoom(s,g){var I;const{tileID:M}=this._getOverscaledTileIDFromLngLatZoom(s,g);return(I=this.getMinMaxElevation(M).minElevation)!==null&&I!==void 0?I:0}getMinMaxElevation(s){const g=this.getTerrainData(s).tile,I={minElevation:null,maxElevation:null};return g&&g.dem&&(I.minElevation=g.dem.min*this.exaggeration,I.maxElevation=g.dem.max*this.exaggeration),I}_getOverscaledTileIDFromLngLatZoom(s,g){const I=o.U.fromLngLat(s.wrap()),M=(1<<g)*o.N,F=I.x*M,q=I.y*M,A=Math.floor(F/o.N),l=Math.floor(q/o.N);return{tileID:new o.O(g,0,g,A,l),mercatorX:F,mercatorY:q}}_allowMercatorOverflow(s,g){const I=s.x<this.painter.width/2;let M=o.bf(g);const F=this.painter.transform.center.lng;return I&&Math.sign(M)>0&&Math.sign(F)<0||!I&&Math.sign(M)<0&&Math.sign(F)>0?(M=360*Math.sign(F)+M,o.G(M)):g}}class Fl{constructor(s,g,I){this._context=s,this._size=g,this._tileSize=I,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const s of this._objects)s.texture.destroy(),s.fbo.destroy()}_createObject(s){const g=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),I=new et(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return I.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),g.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),g.colorAttachment.set(I.texture),{id:s,fbo:g,texture:I,stamp:-1,inUse:!1}}getObjectForId(s){return this._objects[s]}useObject(s){s.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(g=>s.id!==g),this._recentlyUsed.push(s.id)}stampObject(s){s.stamp=++this._stamp}getOrCreateFreeObject(){for(const g of this._recentlyUsed)if(!this._objects[g].inUse)return this._objects[g];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const s=this._createObject(this._objects.length);return this._objects.push(s),s}freeObject(s){s.inUse=!1}freeAllObjects(){for(const s of this._objects)this.freeObject(s)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(s=>!s.inUse)===!1}}const Vs={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class Ca{constructor(s,g){this.painter=s,this.terrain=g,this.pool=new Fl(s.context,30,g.sourceCache.tileSize*g.qualityFactor)}destruct(){this.pool.destruct()}getTexture(s){return this.pool.getObjectForId(s.rtt[this._stacks.length-1].id).texture}prepareForRender(s,g){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=s._order.filter(I=>!s._layers[I].isHidden(g)),this._coordsDescendingInv={};for(const I in s.sourceCaches){this._coordsDescendingInv[I]={};const M=s.sourceCaches[I].getVisibleCoordinates();for(const F of M){const q=this.terrain.sourceCache.getTerrainCoords(F);for(const A in q)this._coordsDescendingInv[I][A]||(this._coordsDescendingInv[I][A]=[]),this._coordsDescendingInv[I][A].push(q[A])}}this._coordsDescendingInvStr={};for(const I of s._order){const M=s._layers[I],F=M.source;if(Vs[M.type]&&!this._coordsDescendingInvStr[F]){this._coordsDescendingInvStr[F]={};for(const q in this._coordsDescendingInv[F])this._coordsDescendingInvStr[F][q]=this._coordsDescendingInv[F][q].map(A=>A.key).sort().join()}}for(const I of this._renderableTiles)for(const M in this._coordsDescendingInvStr){const F=this._coordsDescendingInvStr[M][I.tileID.key];F&&F!==I.rttCoords[M]&&(I.rtt=[])}}renderLayer(s){if(s.isHidden(this.painter.transform.zoom))return!1;const g=s.type,I=this.painter,M=this._renderableLayerIds[this._renderableLayerIds.length-1]===s.id;if(Vs[g]&&(this._prevType&&Vs[this._prevType]||this._stacks.push([]),this._prevType=g,this._stacks[this._stacks.length-1].push(s.id),!M))return!0;if(Vs[this._prevType]||Vs[g]&&M){this._prevType=g;const F=this._stacks.length-1,q=this._stacks[F]||[];for(const A of this._renderableTiles){if(this.pool.isFull()&&(br(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(A),A.rtt[F]){const f=this.pool.getObjectForId(A.rtt[F].id);if(f.stamp===A.rtt[F].stamp){this.pool.useObject(f);continue}}const l=this.pool.getOrCreateFreeObject();this.pool.useObject(l),this.pool.stampObject(l),A.rtt[F]={id:l.id,stamp:l.stamp},I.context.bindFramebuffer.set(l.fbo.framebuffer),I.context.clear({color:o.aT.transparent,stencil:0}),I.currentStencilSource=void 0;for(let f=0;f<q.length;f++){const m=I.style._layers[q[f]],b=m.source?this._coordsDescendingInv[m.source][A.tileID.key]:[A.tileID];I.context.viewport.set([0,0,l.fbo.width,l.fbo.height]),I._renderTileClippingMasks(m,b),I.renderLayer(I,I.style.sourceCaches[m.source],m,b),m.source&&(A.rttCoords[m.source]=this._coordsDescendingInvStr[m.source][A.tileID.key])}}return br(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),Vs[g]}return!1}}const ci=k,Ii={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:o.c.MAX_TILE_CACHE_ZOOM_LEVELS,localIdeographFontFamily:"sans-serif",transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,validateStyle:!0,maxCanvasSize:[4096,4096]},Ho=R=>{R.touchstart=R.dragStart,R.touchmoveWindow=R.dragMove,R.touchend=R.dragEnd},pl={showCompass:!0,showZoom:!0,visualizePitch:!1};class gl{constructor(s,g,I=!1){this.mousedown=q=>{this.startMouse(o.e({},q,{ctrlKey:!0,preventDefault:()=>q.preventDefault()}),O.mousePos(this.element,q)),O.addEventListener(window,"mousemove",this.mousemove),O.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=q=>{this.moveMouse(q,O.mousePos(this.element,q))},this.mouseup=q=>{this.mouseRotate.dragEnd(q),this.mousePitch&&this.mousePitch.dragEnd(q),this.offTemp()},this.touchstart=q=>{q.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=O.touchPos(this.element,q.targetTouches)[0],this.startTouch(q,this._startPos),O.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),O.addEventListener(window,"touchend",this.touchend))},this.touchmove=q=>{q.targetTouches.length!==1?this.reset():(this._lastPos=O.touchPos(this.element,q.targetTouches)[0],this.moveTouch(q,this._lastPos))},this.touchend=q=>{q.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const M=s.dragRotate._mouseRotate.getClickTolerance(),F=s.dragRotate._mousePitch.getClickTolerance();this.element=g,this.mouseRotate=ao({clickTolerance:M,enable:!0}),this.touchRotate=(({enable:q,clickTolerance:A,bearingDegreesPerPixelMoved:l=.8})=>{const f=new Hu;return new fa({clickTolerance:A,move:(m,b)=>({bearingDelta:(b.x-m.x)*l}),moveStateManager:f,enable:q,assignEvents:Ho})})({clickTolerance:M,enable:!0}),this.map=s,I&&(this.mousePitch=rA({clickTolerance:F,enable:!0}),this.touchPitch=(({enable:q,clickTolerance:A,pitchDegreesPerPixelMoved:l=-.5})=>{const f=new Hu;return new fa({clickTolerance:A,move:(m,b)=>({pitchDelta:(b.y-m.y)*l}),moveStateManager:f,enable:q,assignEvents:Ho})})({clickTolerance:F,enable:!0})),O.addEventListener(g,"mousedown",this.mousedown),O.addEventListener(g,"touchstart",this.touchstart,{passive:!1}),O.addEventListener(g,"touchcancel",this.reset)}startMouse(s,g){this.mouseRotate.dragStart(s,g),this.mousePitch&&this.mousePitch.dragStart(s,g),O.disableDrag()}startTouch(s,g){this.touchRotate.dragStart(s,g),this.touchPitch&&this.touchPitch.dragStart(s,g),O.disableDrag()}moveMouse(s,g){const I=this.map,{bearingDelta:M}=this.mouseRotate.dragMove(s,g)||{};if(M&&I.setBearing(I.getBearing()+M),this.mousePitch){const{pitchDelta:F}=this.mousePitch.dragMove(s,g)||{};F&&I.setPitch(I.getPitch()+F)}}moveTouch(s,g){const I=this.map,{bearingDelta:M}=this.touchRotate.dragMove(s,g)||{};if(M&&I.setBearing(I.getBearing()+M),this.touchPitch){const{pitchDelta:F}=this.touchPitch.dragMove(s,g)||{};F&&I.setPitch(I.getPitch()+F)}}off(){const s=this.element;O.removeEventListener(s,"mousedown",this.mousedown),O.removeEventListener(s,"touchstart",this.touchstart,{passive:!1}),O.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),O.removeEventListener(window,"touchend",this.touchend),O.removeEventListener(s,"touchcancel",this.reset),this.offTemp()}offTemp(){O.enableDrag(),O.removeEventListener(window,"mousemove",this.mousemove),O.removeEventListener(window,"mouseup",this.mouseup),O.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),O.removeEventListener(window,"touchend",this.touchend)}}let Wr;function Qo(R,s,g){if(R=new o.L(R.lng,R.lat),s){const I=new o.L(R.lng-360,R.lat),M=new o.L(R.lng+360,R.lat),F=g.locationPoint(R).distSqr(s);g.locationPoint(I).distSqr(s)<F?R=I:g.locationPoint(M).distSqr(s)<F&&(R=M)}for(;Math.abs(R.lng-g.center.lng)>180;){const I=g.locationPoint(R);if(I.x>=0&&I.y>=0&&I.x<=g.width&&I.y<=g.height)break;R.lng>g.center.lng?R.lng-=360:R.lng+=360}return R}const rs={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function _(R,s,g){const I=R.classList;for(const M in rs)I.remove(`maplibregl-${g}-anchor-${M}`);I.add(`maplibregl-${g}-anchor-${s}`)}class S extends o.E{constructor(s){if(super(),this._onKeyPress=g=>{const I=g.code,M=g.charCode||g.keyCode;I!=="Space"&&I!=="Enter"&&M!==32&&M!==13||this.togglePopup()},this._onMapClick=g=>{const I=g.originalEvent.target,M=this._element;this._popup&&(I===M||M.contains(I))&&this.togglePopup()},this._update=g=>{if(!this._map)return;const I=this._map.loaded()&&!this._map.isMoving();((g==null?void 0:g.type)==="terrain"||(g==null?void 0:g.type)==="render"&&!I)&&this._map.once("render",this._update),this._map.transform.renderWorldCopies&&(this._lngLat=Qo(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let M="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?M=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(M=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let F="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?F="rotateX(0deg)":this._pitchAlignment==="map"&&(F=`rotateX(${this._map.getPitch()}deg)`),g&&g.type!=="moveend"||(this._pos=this._pos.round()),O.setTransform(this._element,`${rs[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${F} ${M}`),this._map.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{const q=this._map.unproject(this._pos),A=40075016686e-3*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=q.distanceTo(this._lngLat)>20*A?"0.2":"1.0",this._opacityTimeout=null},100))},this._onMove=g=>{if(!this._isDragging){const I=this._clickTolerance||this._map._clickTolerance;this._isDragging=g.point.dist(this._pointerdownPos)>=I}this._isDragging&&(this._pos=g.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new o.k("dragstart"))),this.fire(new o.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new o.k("dragend")),this._state="inactive"},this._addDragHandler=g=>{this._element.contains(g.originalEvent.target)&&(g.preventDefault(),this._positionDelta=g.point.sub(this._pos).add(this._offset),this._pointerdownPos=g.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=s&&s.anchor||"center",this._color=s&&s.color||"#3FB1CE",this._scale=s&&s.scale||1,this._draggable=s&&s.draggable||!1,this._clickTolerance=s&&s.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=s&&s.rotation||0,this._rotationAlignment=s&&s.rotationAlignment||"auto",this._pitchAlignment=s&&s.pitchAlignment&&s.pitchAlignment!=="auto"?s.pitchAlignment:this._rotationAlignment,s&&s.element)this._element=s.element,this._offset=o.P.convert(s&&s.offset||[0,0]);else{this._defaultMarker=!0,this._element=O.create("div"),this._element.setAttribute("aria-label","Map marker");const g=O.createNS("http://www.w3.org/2000/svg","svg"),I=41,M=27;g.setAttributeNS(null,"display","block"),g.setAttributeNS(null,"height",`${I}px`),g.setAttributeNS(null,"width",`${M}px`),g.setAttributeNS(null,"viewBox",`0 0 ${M} ${I}`);const F=O.createNS("http://www.w3.org/2000/svg","g");F.setAttributeNS(null,"stroke","none"),F.setAttributeNS(null,"stroke-width","1"),F.setAttributeNS(null,"fill","none"),F.setAttributeNS(null,"fill-rule","evenodd");const q=O.createNS("http://www.w3.org/2000/svg","g");q.setAttributeNS(null,"fill-rule","nonzero");const A=O.createNS("http://www.w3.org/2000/svg","g");A.setAttributeNS(null,"transform","translate(3.0, 29.0)"),A.setAttributeNS(null,"fill","#000000");const l=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const ve of l){const De=O.createNS("http://www.w3.org/2000/svg","ellipse");De.setAttributeNS(null,"opacity","0.04"),De.setAttributeNS(null,"cx","10.5"),De.setAttributeNS(null,"cy","5.80029008"),De.setAttributeNS(null,"rx",ve.rx),De.setAttributeNS(null,"ry",ve.ry),A.appendChild(De)}const f=O.createNS("http://www.w3.org/2000/svg","g");f.setAttributeNS(null,"fill",this._color);const m=O.createNS("http://www.w3.org/2000/svg","path");m.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),f.appendChild(m);const b=O.createNS("http://www.w3.org/2000/svg","g");b.setAttributeNS(null,"opacity","0.25"),b.setAttributeNS(null,"fill","#000000");const T=O.createNS("http://www.w3.org/2000/svg","path");T.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),b.appendChild(T);const z=O.createNS("http://www.w3.org/2000/svg","g");z.setAttributeNS(null,"transform","translate(6.0, 7.0)"),z.setAttributeNS(null,"fill","#FFFFFF");const N=O.createNS("http://www.w3.org/2000/svg","g");N.setAttributeNS(null,"transform","translate(8.0, 8.0)");const X=O.createNS("http://www.w3.org/2000/svg","circle");X.setAttributeNS(null,"fill","#000000"),X.setAttributeNS(null,"opacity","0.25"),X.setAttributeNS(null,"cx","5.5"),X.setAttributeNS(null,"cy","5.5"),X.setAttributeNS(null,"r","5.4999962");const te=O.createNS("http://www.w3.org/2000/svg","circle");te.setAttributeNS(null,"fill","#FFFFFF"),te.setAttributeNS(null,"cx","5.5"),te.setAttributeNS(null,"cy","5.5"),te.setAttributeNS(null,"r","5.4999962"),N.appendChild(X),N.appendChild(te),q.appendChild(A),q.appendChild(f),q.appendChild(b),q.appendChild(z),q.appendChild(N),g.appendChild(q),g.setAttributeNS(null,"height",I*this._scale+"px"),g.setAttributeNS(null,"width",M*this._scale+"px"),this._element.appendChild(g),this._offset=o.P.convert(s&&s.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",g=>{g.preventDefault()}),this._element.addEventListener("mousedown",g=>{g.preventDefault()}),_(this._element,this._anchor,"marker"),s&&s.className)for(const g of s.className.split(" "))this._element.classList.add(g);this._popup=null}addTo(s){return this.remove(),this._map=s,s.getCanvasContainer().appendChild(this._element),s.on("move",this._update),s.on("moveend",this._update),s.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),O.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(s){return this._lngLat=o.L.convert(s),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(s){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),s){if(!("offset"in s.options)){const M=Math.abs(13.5)/Math.SQRT2;s.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[M,-1*(38.1-13.5+M)],"bottom-right":[-M,-1*(38.1-13.5+M)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=s,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}getPopup(){return this._popup}togglePopup(){const s=this._popup;return s?(s.isOpen()?s.remove():s.addTo(this._map),this):this}getOffset(){return this._offset}setOffset(s){return this._offset=o.P.convert(s),this._update(),this}addClassName(s){this._element.classList.add(s)}removeClassName(s){this._element.classList.remove(s)}toggleClassName(s){return this._element.classList.toggle(s)}setDraggable(s){return this._draggable=!!s,this._map&&(s?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(s){return this._rotation=s||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(s){return this._rotationAlignment=s||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(s){return this._pitchAlignment=s&&s!=="auto"?s:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const C={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let E=0,H=!1;const W={maxWidth:100,unit:"metric"};function Z(R,s,g){const I=g&&g.maxWidth||100,M=R._container.clientHeight/2,F=R.unproject([0,M]),q=R.unproject([I,M]),A=F.distanceTo(q);if(g&&g.unit==="imperial"){const l=3.2808*A;l>5280?ae(s,I,l/5280,R._getUIString("ScaleControl.Miles")):ae(s,I,l,R._getUIString("ScaleControl.Feet"))}else g&&g.unit==="nautical"?ae(s,I,A/1852,R._getUIString("ScaleControl.NauticalMiles")):A>=1e3?ae(s,I,A/1e3,R._getUIString("ScaleControl.Kilometers")):ae(s,I,A,R._getUIString("ScaleControl.Meters"))}function ae(R,s,g,I){const M=function(F){const q=Math.pow(10,`${Math.floor(F)}`.length-1);let A=F/q;return A=A>=10?10:A>=5?5:A>=3?3:A>=2?2:A>=1?1:function(l){const f=Math.pow(10,Math.ceil(-Math.log(l)/Math.LN10));return Math.round(l*f)/f}(A),q*A}(g);R.style.width=s*(M/g)+"px",R.innerHTML=`${M}&nbsp;${I}`}const Ie={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},$e=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function ot(R){if(R){if(typeof R=="number"){const s=Math.round(Math.abs(R)/Math.SQRT2);return{center:new o.P(0,0),top:new o.P(0,R),"top-left":new o.P(s,s),"top-right":new o.P(-s,s),bottom:new o.P(0,-R),"bottom-left":new o.P(s,-s),"bottom-right":new o.P(-s,-s),left:new o.P(R,0),right:new o.P(-R,0)}}if(R instanceof o.P||Array.isArray(R)){const s=o.P.convert(R);return{center:s,top:s,"top-left":s,"top-right":s,bottom:s,"bottom-left":s,"bottom-right":s,left:s,right:s}}return{center:o.P.convert(R.center||[0,0]),top:o.P.convert(R.top||[0,0]),"top-left":o.P.convert(R["top-left"]||[0,0]),"top-right":o.P.convert(R["top-right"]||[0,0]),bottom:o.P.convert(R.bottom||[0,0]),"bottom-left":o.P.convert(R["bottom-left"]||[0,0]),"bottom-right":o.P.convert(R["bottom-right"]||[0,0]),left:o.P.convert(R.left||[0,0]),right:o.P.convert(R.right||[0,0])}}return ot(new o.P(0,0))}const Nt={extend:(R,...s)=>o.e(R,...s),run(R){R()},logToElement(R,s=!1,g="log"){const I=window.document.getElementById(g);I&&(s&&(I.innerHTML=""),I.innerHTML+=`<br>${R}`)}},wt=k;class It{static get version(){return wt}static get workerCount(){return an.workerCount}static set workerCount(s){an.workerCount=s}static get maxParallelImageRequests(){return o.c.MAX_PARALLEL_IMAGE_REQUESTS}static set maxParallelImageRequests(s){o.c.MAX_PARALLEL_IMAGE_REQUESTS=s}static get workerUrl(){return o.c.WORKER_URL}static set workerUrl(s){o.c.WORKER_URL=s}static addProtocol(s,g){o.c.REGISTERED_PROTOCOLS[s]=g}static removeProtocol(s){delete o.c.REGISTERED_PROTOCOLS[s]}}return It.Map=class extends lr{constructor(R){if(o.bg.mark(o.bh.create),(R=o.e({},Ii,R)).minZoom!=null&&R.maxZoom!=null&&R.minZoom>R.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(R.minPitch!=null&&R.maxPitch!=null&&R.minPitch>R.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(R.minPitch!=null&&R.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(R.maxPitch!=null&&R.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Bs(R.minZoom,R.maxZoom,R.minPitch,R.maxPitch,R.renderWorldCopies),{bearingSnap:R.bearingSnap}),this._cooperativeGesturesOnWheel=s=>{this._onCooperativeGesture(s,s[this._metaKey],1)},this._contextLost=s=>{s.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new o.k("webglcontextlost",{originalEvent:s}))},this._contextRestored=s=>{this._setupPainter(),this.resize(),this._update(),this.fire(new o.k("webglcontextrestored",{originalEvent:s}))},this._onMapScroll=s=>{if(s.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=R.interactive,this._cooperativeGestures=R.cooperativeGestures,this._metaKey=navigator.platform.indexOf("Mac")===0?"metaKey":"ctrlKey",this._maxTileCacheSize=R.maxTileCacheSize,this._maxTileCacheZoomLevels=R.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=R.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=R.preserveDrawingBuffer,this._antialias=R.antialias,this._trackResize=R.trackResize,this._bearingSnap=R.bearingSnap,this._refreshExpiredTiles=R.refreshExpiredTiles,this._fadeDuration=R.fadeDuration,this._crossSourceCollisions=R.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=R.collectResourceTiming,this._renderTaskQueue=new da,this._controls=[],this._mapId=o.a2(),this._locale=o.e({},zn,R.locale),this._clickTolerance=R.clickTolerance,this._overridePixelRatio=R.pixelRatio,this._maxCanvasSize=R.maxCanvasSize,this.transformCameraUpdate=R.transformCameraUpdate,this._imageQueueHandle=ke.addThrottleControl(()=>this.isMoving()),this._requestManager=new We(R.transformRequest),typeof R.container=="string"){if(this._container=document.getElementById(R.container),!this._container)throw new Error(`Container '${R.container}' not found.`)}else{if(!(R.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=R.container}if(R.maxBounds&&this.setMaxBounds(R.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let s=!1;const g=qs(I=>{this._trackResize&&!this._removed&&this.resize(I)._update()},50);this._resizeObserver=new ResizeObserver(I=>{s?g(I):s=!0}),this._resizeObserver.observe(this._container)}this.handlers=new nu(this,R),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=R.hash&&new so(typeof R.hash=="string"&&R.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:R.center,zoom:R.zoom,bearing:R.bearing,pitch:R.pitch}),R.bounds&&(this.resize(),this.fitBounds(R.bounds,o.e({},R.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=R.localIdeographFontFamily,this._validateStyle=R.validateStyle,R.style&&this.setStyle(R.style,{localIdeographFontFamily:R.localIdeographFontFamily}),R.attributionControl&&this.addControl(new ns({customAttribution:R.customAttribution})),R.maplibreLogo&&this.addControl(new Jr,R.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",s=>{this._update(s.dataType==="style"),this.fire(new o.k(`${s.dataType}data`,s))}),this.on("dataloading",s=>{this.fire(new o.k(`${s.dataType}dataloading`,s))}),this.on("dataabort",s=>{this.fire(new o.k("sourcedataabort",s))})}_getMapId(){return this._mapId}addControl(R,s){if(s===void 0&&(s=R.getDefaultPosition?R.getDefaultPosition():"top-right"),!R||!R.onAdd)return this.fire(new o.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const g=R.onAdd(this);this._controls.push(R);const I=this._controlPositions[s];return s.indexOf("bottom")!==-1?I.insertBefore(g,I.firstChild):I.appendChild(g),this}removeControl(R){if(!R||!R.onRemove)return this.fire(new o.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const s=this._controls.indexOf(R);return s>-1&&this._controls.splice(s,1),R.onRemove(this),this}hasControl(R){return this._controls.indexOf(R)>-1}calculateCameraOptionsFromTo(R,s,g,I){return I==null&&this.terrain&&(I=this.terrain.getElevationForLngLatZoom(g,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(R,s,g,I)}resize(R){var s;const g=this._containerDimensions(),I=g[0],M=g[1],F=this._getClampedPixelRatio(I,M);if(this._resizeCanvas(I,M,F),this.painter.resize(I,M,F),this.painter.overLimit()){const A=this.painter.context.gl;this._maxCanvasSize=[A.drawingBufferWidth,A.drawingBufferHeight];const l=this._getClampedPixelRatio(I,M);this._resizeCanvas(I,M,l),this.painter.resize(I,M,l)}this.transform.resize(I,M),(s=this._requestedCameraState)===null||s===void 0||s.resize(I,M);const q=!this._moving;return q&&(this.stop(),this.fire(new o.k("movestart",R)).fire(new o.k("move",R))),this.fire(new o.k("resize",R)),q&&this.fire(new o.k("moveend",R)),this}_getClampedPixelRatio(R,s){const{0:g,1:I}=this._maxCanvasSize,M=this.getPixelRatio(),F=R*M,q=s*M;return Math.min(F>g?g/F:1,q>I?I/q:1)*M}getPixelRatio(){var R;return(R=this._overridePixelRatio)!==null&&R!==void 0?R:devicePixelRatio}setPixelRatio(R){this._overridePixelRatio=R,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(R){return this.transform.setMaxBounds(Ti.convert(R)),this._update()}setMinZoom(R){if((R=R??-2)>=-2&&R<=this.transform.maxZoom)return this.transform.minZoom=R,this._update(),this.getZoom()<R&&this.setZoom(R),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(R){if((R=R??22)>=this.transform.minZoom)return this.transform.maxZoom=R,this._update(),this.getZoom()>R&&this.setZoom(R),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(R){if((R=R??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(R>=0&&R<=this.transform.maxPitch)return this.transform.minPitch=R,this._update(),this.getPitch()<R&&this.setPitch(R),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(R){if((R=R??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(R>=this.transform.minPitch)return this.transform.maxPitch=R,this._update(),this.getPitch()>R&&this.setPitch(R),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(R){return this.transform.renderWorldCopies=R,this._update()}getCooperativeGestures(){return this._cooperativeGestures}setCooperativeGestures(R){return this._cooperativeGestures=R,this._cooperativeGestures?this._setupCooperativeGestures():this._destroyCooperativeGestures(),this}project(R){return this.transform.locationPoint(o.L.convert(R),this.style&&this.terrain)}unproject(R){return this.transform.pointLocation(o.P.convert(R),this.terrain)}isMoving(){var R;return this._moving||((R=this.handlers)===null||R===void 0?void 0:R.isMoving())}isZooming(){var R;return this._zooming||((R=this.handlers)===null||R===void 0?void 0:R.isZooming())}isRotating(){var R;return this._rotating||((R=this.handlers)===null||R===void 0?void 0:R.isRotating())}_createDelegatedListener(R,s,g){if(R==="mouseenter"||R==="mouseover"){let I=!1;return{layer:s,listener:g,delegates:{mousemove:F=>{const q=this.getLayer(s)?this.queryRenderedFeatures(F.point,{layers:[s]}):[];q.length?I||(I=!0,g.call(this,new mt(R,this,F.originalEvent,{features:q}))):I=!1},mouseout:()=>{I=!1}}}}if(R==="mouseleave"||R==="mouseout"){let I=!1;return{layer:s,listener:g,delegates:{mousemove:q=>{(this.getLayer(s)?this.queryRenderedFeatures(q.point,{layers:[s]}):[]).length?I=!0:I&&(I=!1,g.call(this,new mt(R,this,q.originalEvent)))},mouseout:q=>{I&&(I=!1,g.call(this,new mt(R,this,q.originalEvent)))}}}}{const I=M=>{const F=this.getLayer(s)?this.queryRenderedFeatures(M.point,{layers:[s]}):[];F.length&&(M.features=F,g.call(this,M),delete M.features)};return{layer:s,listener:g,delegates:{[R]:I}}}}on(R,s,g){if(g===void 0)return super.on(R,s);const I=this._createDelegatedListener(R,s,g);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[R]=this._delegatedListeners[R]||[],this._delegatedListeners[R].push(I);for(const M in I.delegates)this.on(M,I.delegates[M]);return this}once(R,s,g){if(g===void 0)return super.once(R,s);const I=this._createDelegatedListener(R,s,g);for(const M in I.delegates)this.once(M,I.delegates[M]);return this}off(R,s,g){return g===void 0?super.off(R,s):(this._delegatedListeners&&this._delegatedListeners[R]&&(I=>{const M=this._delegatedListeners[R];for(let F=0;F<M.length;F++){const q=M[F];if(q.layer===s&&q.listener===g){for(const A in q.delegates)this.off(A,q.delegates[A]);return M.splice(F,1),this}}})(),this)}queryRenderedFeatures(R,s){if(!this.style)return[];let g;const I=R instanceof o.P||Array.isArray(R),M=I?R:[[0,0],[this.transform.width,this.transform.height]];if(s=s||(I?{}:R)||{},M instanceof o.P||typeof M[0]=="number")g=[o.P.convert(M)];else{const F=o.P.convert(M[0]),q=o.P.convert(M[1]);g=[F,new o.P(q.x,F.y),q,new o.P(F.x,q.y),F]}return this.style.queryRenderedFeatures(g,s,this.transform)}querySourceFeatures(R,s){return this.style.querySourceFeatures(R,s)}setStyle(R,s){return(s=o.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},s)).diff!==!1&&s.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&R?(this._diffStyle(R,s),this):(this._localIdeographFontFamily=s.localIdeographFontFamily,this._updateStyle(R,s))}setTransformRequest(R){return this._requestManager.setTransformRequest(R),this}_getUIString(R){const s=this._locale[R];if(s==null)throw new Error(`Missing UI string '${R}'`);return s}_updateStyle(R,s){if(s.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(R,s));const g=this.style&&s.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!R)),R?(this.style=new Cr(this,s||{}),this.style.setEventedParent(this,{style:this.style}),typeof R=="string"?this.style.loadURL(R,s,g):this.style.loadJSON(R,s,g),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Cr(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(R,s){if(typeof R=="string"){const g=this._requestManager.transformRequest(R,Qe.Style);o.f(g,(I,M)=>{I?this.fire(new o.j(I)):M&&this._updateDiff(M,s)})}else typeof R=="object"&&this._updateDiff(R,s)}_updateDiff(R,s){try{this.style.setState(R,s)&&this._update(!0)}catch(g){o.w(`Unable to perform style diff: ${g.message||g.error||g}.  Rebuilding the style from scratch.`),this._updateStyle(R,s)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():o.w("There is no style added to the map.")}addSource(R,s){return this._lazyInitEmptyStyle(),this.style.addSource(R,s),this._update(!0)}isSourceLoaded(R){const s=this.style&&this.style.sourceCaches[R];if(s!==void 0)return s.loaded();this.fire(new o.j(new Error(`There is no source with ID '${R}'`)))}setTerrain(R){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),R){const s=this.style.sourceCaches[R.source];if(!s)throw new Error(`cannot load terrain, because there exists no source with ID: ${R.source}`);for(const g in this.style._layers){const I=this.style._layers[g];I.type==="hillshade"&&I.source===R.source&&o.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new sA(this.painter,s,R),this.painter.renderToTexture=new Ca(this.painter,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=g=>{g.dataType==="style"?this.terrain.sourceCache.freeRtt():g.dataType==="source"&&g.tile&&(g.sourceId!==R.source||this._elevationFreeze||(this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(g.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0;return this.fire(new o.k("terrain",{terrain:R})),this}getTerrain(){var R,s;return(s=(R=this.terrain)===null||R===void 0?void 0:R.options)!==null&&s!==void 0?s:null}areTilesLoaded(){const R=this.style&&this.style.sourceCaches;for(const s in R){const g=R[s]._tiles;for(const I in g){const M=g[I];if(M.state!=="loaded"&&M.state!=="errored")return!1}}return!0}addSourceType(R,s,g){return this._lazyInitEmptyStyle(),this.style.addSourceType(R,s,g)}removeSource(R){return this.style.removeSource(R),this._update(!0)}getSource(R){return this.style.getSource(R)}addImage(R,s,g={}){const{pixelRatio:I=1,sdf:M=!1,stretchX:F,stretchY:q,content:A}=g;if(this._lazyInitEmptyStyle(),!(s instanceof HTMLImageElement||o.a(s))){if(s.width===void 0||s.height===void 0)return this.fire(new o.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:l,height:f,data:m}=s,b=s;return this.style.addImage(R,{data:new o.R({width:l,height:f},new Uint8Array(m)),pixelRatio:I,stretchX:F,stretchY:q,content:A,sdf:M,version:0,userImage:b}),b.onAdd&&b.onAdd(this,R),this}}{const{width:l,height:f,data:m}=o.h.getImageData(s);this.style.addImage(R,{data:new o.R({width:l,height:f},m),pixelRatio:I,stretchX:F,stretchY:q,content:A,sdf:M,version:0})}}updateImage(R,s){const g=this.style.getImage(R);if(!g)return this.fire(new o.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const I=s instanceof HTMLImageElement||o.a(s)?o.h.getImageData(s):s,{width:M,height:F,data:q}=I;if(M===void 0||F===void 0)return this.fire(new o.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(M!==g.data.width||F!==g.data.height)return this.fire(new o.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const A=!(s instanceof HTMLImageElement||o.a(s));return g.data.replace(q,A),this.style.updateImage(R,g),this}getImage(R){return this.style.getImage(R)}hasImage(R){return R?!!this.style.getImage(R):(this.fire(new o.j(new Error("Missing required image id"))),!1)}removeImage(R){this.style.removeImage(R)}loadImage(R,s){ke.getImage(this._requestManager.transformRequest(R,Qe.Image),s)}listImages(){return this.style.listImages()}addLayer(R,s){return this._lazyInitEmptyStyle(),this.style.addLayer(R,s),this._update(!0)}moveLayer(R,s){return this.style.moveLayer(R,s),this._update(!0)}removeLayer(R){return this.style.removeLayer(R),this._update(!0)}getLayer(R){return this.style.getLayer(R)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(R,s,g){return this.style.setLayerZoomRange(R,s,g),this._update(!0)}setFilter(R,s,g={}){return this.style.setFilter(R,s,g),this._update(!0)}getFilter(R){return this.style.getFilter(R)}setPaintProperty(R,s,g,I={}){return this.style.setPaintProperty(R,s,g,I),this._update(!0)}getPaintProperty(R,s){return this.style.getPaintProperty(R,s)}setLayoutProperty(R,s,g,I={}){return this.style.setLayoutProperty(R,s,g,I),this._update(!0)}getLayoutProperty(R,s){return this.style.getLayoutProperty(R,s)}setGlyphs(R,s={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(R,s),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(R,s,g={}){return this._lazyInitEmptyStyle(),this.style.addSprite(R,s,g,I=>{I||this._update(!0)}),this}removeSprite(R){return this._lazyInitEmptyStyle(),this.style.removeSprite(R),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(R,s={}){return this._lazyInitEmptyStyle(),this.style.setSprite(R,s,g=>{g||this._update(!0)}),this}setLight(R,s={}){return this._lazyInitEmptyStyle(),this.style.setLight(R,s),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(R,s){return this.style.setFeatureState(R,s),this._update()}removeFeatureState(R,s){return this.style.removeFeatureState(R,s),this._update()}getFeatureState(R){return this.style.getFeatureState(R)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let R=0,s=0;return this._container&&(R=this._container.clientWidth||400,s=this._container.clientHeight||300),[R,s]}_setupContainer(){const R=this._container;R.classList.add("maplibregl-map");const s=this._canvasContainer=O.create("div","maplibregl-canvas-container",R);this._interactive&&s.classList.add("maplibregl-interactive"),this._canvas=O.create("canvas","maplibregl-canvas",s),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const g=this._containerDimensions(),I=this._getClampedPixelRatio(g[0],g[1]);this._resizeCanvas(g[0],g[1],I);const M=this._controlContainer=O.create("div","maplibregl-control-container",R),F=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(q=>{F[q]=O.create("div",`maplibregl-ctrl-${q} `,M)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_setupCooperativeGestures(){this._cooperativeGesturesScreen=O.create("div","maplibregl-cooperative-gesture-screen",this._container);let R=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";navigator.platform.indexOf("Mac")===0&&(R=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use ⌘ + scroll to zoom the map"),this._cooperativeGesturesScreen.innerHTML=`
            <div class="maplibregl-desktop-message">${R}</div>
            <div class="maplibregl-mobile-message">${typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>
        `,this._cooperativeGesturesScreen.setAttribute("aria-hidden","true"),this._canvasContainer.addEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.add("maplibregl-cooperative-gestures")}_destroyCooperativeGestures(){O.remove(this._cooperativeGesturesScreen),this._canvasContainer.removeEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.remove("maplibregl-cooperative-gestures")}_resizeCanvas(R,s,g){this._canvas.width=Math.floor(g*R),this._canvas.height=Math.floor(g*s),this._canvas.style.width=`${R}px`,this._canvas.style.height=`${s}px`}_setupPainter(){const R={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let s=null;this._canvas.addEventListener("webglcontextcreationerror",I=>{s={requestedAttributes:R},I&&(s.statusMessage=I.statusMessage,s.type=I.type)},{once:!0});const g=this._canvas.getContext("webgl2",R)||this._canvas.getContext("webgl",R);if(!g){const I="Failed to initialize WebGL";throw s?(s.message=I,new Error(JSON.stringify(s))):new Error(I)}this.painter=new is(g,this.transform),j.testSupport(g)}_onCooperativeGesture(R,s,g){return!s&&g<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(R){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||R,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(R){return this._update(),this._renderTaskQueue.add(R)}_cancelRenderFrame(R){this._renderTaskQueue.remove(R)}_render(R){const s=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(R),this._removed)return;let g=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const M=this.transform.zoom,F=o.h.now();this.style.zoomHistory.update(M,F);const q=new o.a8(M,{now:F,fadeDuration:s,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),A=q.crossFadingFactor();A===1&&A===this._crossFadingFactor||(g=!0,this._crossFadingFactor=A),this.style.update(q)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,s,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:s,showPadding:this.showPadding}),this.fire(new o.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,o.bg.mark(o.bh.load),this.fire(new o.k("load"))),this.style&&(this.style.hasTransitions()||g)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const I=this._sourcesDirty||this._styleDirty||this._placementDirty;return I||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new o.k("idle")),!this._loaded||this._fullyLoaded||I||(this._fullyLoaded=!0,o.bg.mark(o.bh.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){var R;this._hash&&this._hash.remove();for(const g of this._controls)g.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),ke.removeThrottleControl(this._imageQueueHandle),(R=this._resizeObserver)===null||R===void 0||R.disconnect();const s=this.painter.context.gl.getExtension("WEBGL_lose_context");s&&s.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),O.remove(this._canvasContainer),O.remove(this._controlContainer),this._cooperativeGestures&&this._destroyCooperativeGestures(),this._container.classList.remove("maplibregl-map"),o.bg.clearMetrics(),this._removed=!0,this.fire(new o.k("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=o.h.frame(R=>{o.bg.frame(R),this._frame=null,this._render(R)}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(R){this._showTileBoundaries!==R&&(this._showTileBoundaries=R,this._update())}get showPadding(){return!!this._showPadding}set showPadding(R){this._showPadding!==R&&(this._showPadding=R,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(R){this._showCollisionBoxes!==R&&(this._showCollisionBoxes=R,R?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(R){this._showOverdrawInspector!==R&&(this._showOverdrawInspector=R,this._update())}get repaint(){return!!this._repaint}set repaint(R){this._repaint!==R&&(this._repaint=R,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(R){this._vertices=R,this._update()}get version(){return ci}getCameraTargetElevation(){return this.transform.elevation}},It.NavigationControl=class{constructor(R){this._updateZoomButtons=()=>{const s=this._map.getZoom(),g=s===this._map.getMaxZoom(),I=s===this._map.getMinZoom();this._zoomInButton.disabled=g,this._zoomOutButton.disabled=I,this._zoomInButton.setAttribute("aria-disabled",g.toString()),this._zoomOutButton.setAttribute("aria-disabled",I.toString())},this._rotateCompassArrow=()=>{const s=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=s},this._setButtonTitle=(s,g)=>{const I=this._map._getUIString(`NavigationControl.${g}`);s.title=I,s.setAttribute("aria-label",I)},this.options=o.e({},pl,R),this._container=O.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",s=>s.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",s=>this._map.zoomIn({},{originalEvent:s})),O.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",s=>this._map.zoomOut({},{originalEvent:s})),O.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",s=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:s}):this._map.resetNorth({},{originalEvent:s})}),this._compassIcon=O.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(R){return this._map=R,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new gl(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){O.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(R,s){const g=O.create("button",R,this._container);return g.type="button",g.addEventListener("click",s),g}},It.GeolocateControl=class extends o.E{constructor(R){super(),this._onSuccess=s=>{if(this._map){if(this._isOutOfMapMaxBounds(s))return this._setErrorState(),this.fire(new o.k("outofmaxbounds",s)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=s,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(s),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(s),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new o.k("geolocate",s)),this._finish()}},this._updateCamera=s=>{const g=new o.L(s.coords.longitude,s.coords.latitude),I=s.coords.accuracy,M=this._map.getBearing(),F=o.e({bearing:M},this.options.fitBoundsOptions),q=Ti.fromLngLat(g,I);this._map.fitBounds(q,F,{geolocateSource:!0})},this._updateMarker=s=>{if(s){const g=new o.L(s.coords.longitude,s.coords.latitude);this._accuracyCircleMarker.setLngLat(g).addTo(this._map),this._userLocationDotMarker.setLngLat(g).addTo(this._map),this._accuracy=s.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=s=>{if(this._map){if(this.options.trackUserLocation)if(s.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const g=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=g,this._geolocateButton.setAttribute("aria-label",g),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(s.code===3&&H)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new o.k("error",s)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=s=>{if(this._map){if(this._container.addEventListener("contextmenu",g=>g.preventDefault()),this._geolocateButton=O.create("button","maplibregl-ctrl-geolocate",this._container),O.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",s===!1){o.w("Geolocation support is not available so the GeolocateControl will be disabled.");const g=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=g,this._geolocateButton.setAttribute("aria-label",g)}else{const g=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=g,this._geolocateButton.setAttribute("aria-label",g)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=O.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new S({element:this._dotElement}),this._circleElement=O.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new S({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",g=>{g.geolocateSource||this._watchState!=="ACTIVE_LOCK"||g.originalEvent&&g.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new o.k("trackuserlocationend")))})}},this.options=o.e({},C,R)}onAdd(R){return this._map=R,this._container=O.create("div","maplibregl-ctrl maplibregl-ctrl-group"),function(s,g=!1){Wr===void 0||g?window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(I=>{Wr=I.state!=="denied",s(Wr)}).catch(()=>{Wr=!!window.navigator.geolocation,s(Wr)}):(Wr=!!window.navigator.geolocation,s(Wr)):s(Wr)}(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),O.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,E=0,H=!1}_isOutOfMapMaxBounds(R){const s=this._map.getMaxBounds(),g=R.coords;return s&&(g.longitude<s.getWest()||g.longitude>s.getEast()||g.latitude<s.getSouth()||g.latitude>s.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const R=this._map.getBounds(),s=R.getSouthEast(),g=R.getNorthEast(),I=s.distanceTo(g),M=Math.ceil(this._accuracy/(I/this._map._container.clientHeight)*2);this._circleElement.style.width=`${M}px`,this._circleElement.style.height=`${M}px`}trigger(){if(!this._setup)return o.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new o.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":E--,H=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new o.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new o.k("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let R;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),E++,E>1?(R={maximumAge:6e5,timeout:0},H=!0):(R=this.options.positionOptions,H=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,R)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},It.AttributionControl=ns,It.LogoControl=Jr,It.ScaleControl=class{constructor(R){this._onMove=()=>{Z(this._map,this._container,this.options)},this.setUnit=s=>{this.options.unit=s,Z(this._map,this._container,this.options)},this.options=o.e({},W,R)}getDefaultPosition(){return"bottom-left"}onAdd(R){return this._map=R,this._container=O.create("div","maplibregl-ctrl maplibregl-ctrl-scale",R.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){O.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},It.FullscreenControl=class extends o.E{constructor(R={}){super(),this._onFullscreenChange=()=>{(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,R&&R.container&&(R.container instanceof HTMLElement?this._container=R.container:o.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(R){return this._map=R,this._container||(this._container=this._map.getContainer()),this._controlContainer=O.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){O.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const R=this._fullscreenButton=O.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);O.create("span","maplibregl-ctrl-icon",R).setAttribute("aria-hidden","true"),R.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const R=this._getTitle();this._fullscreenButton.setAttribute("aria-label",R),this._fullscreenButton.title=R}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new o.k("fullscreenstart")),this._map._cooperativeGestures&&(this._prevCooperativeGestures=this._map._cooperativeGestures,this._map.setCooperativeGestures())):(this.fire(new o.k("fullscreenend")),this._prevCooperativeGestures&&(this._map.setCooperativeGestures(this._prevCooperativeGestures),delete this._prevCooperativeGestures))}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},It.TerrainControl=class{constructor(R){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))},this.options=R}onAdd(R){return this._map=R,this._container=O.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=O.create("button","maplibregl-ctrl-terrain",this._container),O.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){O.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},It.Popup=class extends o.E{constructor(R){super(),this.remove=()=>(this._content&&O.remove(this._content),this._container&&(O.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new o.k("close")),this),this._onMouseUp=s=>{this._update(s.point)},this._onMouseMove=s=>{this._update(s.point)},this._onDrag=s=>{this._update(s.point)},this._update=s=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=O.create("div","maplibregl-popup",this._map.getContainer()),this._tip=O.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const q of this.options.className.split(" "))this._container.classList.add(q);this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Qo(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!s)return;const g=this._pos=this._trackPointer&&s?s:this._map.project(this._lngLat);let I=this.options.anchor;const M=ot(this.options.offset);if(!I){const q=this._container.offsetWidth,A=this._container.offsetHeight;let l;l=g.y+M.bottom.y<A?["top"]:g.y>this._map.transform.height-A?["bottom"]:[],g.x<q/2?l.push("left"):g.x>this._map.transform.width-q/2&&l.push("right"),I=l.length===0?"bottom":l.join("-")}const F=g.add(M[I]).round();O.setTransform(this._container,`${rs[I]} translate(${F.x}px,${F.y}px)`),_(this._container,I,"popup")},this._onClose=()=>{this.remove()},this.options=o.e(Object.create(Ie),R)}addTo(R){return this._map&&this.remove(),this._map=R,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new o.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(R){return this._lngLat=o.L.convert(R),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(R){return this.setDOMContent(document.createTextNode(R))}setHTML(R){const s=document.createDocumentFragment(),g=document.createElement("body");let I;for(g.innerHTML=R;I=g.firstChild,I;)s.appendChild(I);return this.setDOMContent(s)}getMaxWidth(){var R;return(R=this._container)===null||R===void 0?void 0:R.style.maxWidth}setMaxWidth(R){return this.options.maxWidth=R,this._update(),this}setDOMContent(R){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=O.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(R),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(R){this._container&&this._container.classList.add(R)}removeClassName(R){this._container&&this._container.classList.remove(R)}setOffset(R){return this.options.offset=R,this._update(),this}toggleClassName(R){if(this._container)return this._container.classList.toggle(R)}_createCloseButton(){this.options.closeButton&&(this._closeButton=O.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const R=this._container.querySelector($e);R&&R.focus()}},It.Marker=S,It.Style=Cr,It.LngLat=o.L,It.LngLatBounds=Ti,It.Point=o.P,It.MercatorCoordinate=o.U,It.Evented=o.E,It.AJAXError=o.bi,It.config=o.c,It.CanvasSource=si,It.GeoJSONSource=Di,It.ImageSource=Lt,It.RasterDEMTileSource=Wt,It.RasterTileSource=mi,It.VectorTileSource=wi,It.VideoSource=ni,It.setRTLTextPlugin=o.bj,It.getRTLTextPluginStatus=o.bk,It.prewarm=function(){D().acquire(kn)},It.clearPrewarmedResources=function(){const R=y;R&&(R.isPreloaded()&&R.numActive()===1?(R.release(kn),y=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},Nt.extend(It,{isSafari:o.ac,getPerformanceMetrics:o.bg.getPerformanceMetrics}),It});var v=c;return v})})(i8);var rF=i8.exports;const b0=AE(rF);var sF=aF;function aF(e){var t,i,r;if(e){if(Array.isArray(e)){for(t=[],i=e.length,r=0;r<i;r++){var c=e[r];c!=null&&t.push(c)}return t}if(typeof e=="object"){t={};var h=Object.keys(e);for(i=h.length,r=0;r<i;r++){var v=h[r],o=e[v];o!=null&&(t[v]=o)}return t}}}function oF(e,t,i){let r;const{map:c}=gp();Wl(e,c,k=>i(4,r=k));let{position:h="top-left"}=t,{container:v=void 0}=t,o=null;return lc(()=>{r!=null&&r.loaded()&&o&&r.removeControl(o)}),e.$$set=k=>{"position"in k&&i(1,h=k.position),"container"in k&&i(2,v=k.container)},e.$$.update=()=>{if(e.$$.dirty&30&&r&&!o){let k;typeof v=="string"?k=document.querySelector(v)??void 0:k=v,i(3,o=new b0.FullscreenControl({container:k})),r.addControl(o,h)}},[c,h,v,o,r]}class AF extends Ds{constructor(t){super(),Ls(this,t,oF,null,vs,{position:1,container:2})}}function lF(e,t,i){let r;const{map:c}=gp();Wl(e,c,oe=>i(8,r=oe));let{position:h="top-left"}=t,{positionOptions:v=void 0}=t,{fitBoundsOptions:o=void 0}=t,{trackUserLocation:k=!1}=t,{showAccuracyCircle:O=!0}=t,{showUserLocation:j=!0}=t,J=null;return lc(()=>{r!=null&&r.loaded()&&J&&r.removeControl(J)}),e.$$set=oe=>{"position"in oe&&i(1,h=oe.position),"positionOptions"in oe&&i(2,v=oe.positionOptions),"fitBoundsOptions"in oe&&i(3,o=oe.fitBoundsOptions),"trackUserLocation"in oe&&i(4,k=oe.trackUserLocation),"showAccuracyCircle"in oe&&i(5,O=oe.showAccuracyCircle),"showUserLocation"in oe&&i(6,j=oe.showUserLocation)},e.$$.update=()=>{e.$$.dirty&510&&r&&!J&&(i(7,J=new b0.GeolocateControl({positionOptions:v,fitBoundsOptions:o,trackUserLocation:k,showAccuracyCircle:O,showUserLocation:j})),r.addControl(J,h))},[c,h,v,o,k,O,j,J,r]}class uF extends Ds{constructor(t){super(),Ls(this,t,lF,null,vs,{position:1,positionOptions:2,fitBoundsOptions:3,trackUserLocation:4,showAccuracyCircle:5,showUserLocation:6})}}function cF(e){let t=e.getCenter(),i=Math.round(e.getZoom()*100)/100,r=Math.ceil((i*Math.LN2+Math.log(512/360/.5))/Math.LN10),c=Math.pow(10,r),h=Math.round(t.lat*c)/c,v=Math.round(t.lng*c)/c,o=`${i}/${h}/${v}`,k=e.getBearing(),O=e.getPitch();return(k||O)&&(o+=`/${Math.round(k*10)/10}`),O&&(o+=`/${Math.round(O)}`),`#${o}`}function hF(e){return e.replace("#","").split("/").map(parseFloat)}var Jg=by;function by(e,t){return e===t||e!==e&&t!==t?!0:typeof e!=typeof t||{}.toString.call(e)!={}.toString.call(t)||e!==Object(e)||!e?!1:Array.isArray(e)?_w(e,t):{}.toString.call(e)=="[object Set]"?_w(Array.from(e),Array.from(t)):{}.toString.call(e)=="[object Object]"?dF(e,t):fF(e,t)}function fF(e,t){return e.toString()===t.toString()}function _w(e,t){var i=e.length;if(i!=t.length)return!1;for(var r=0;r<i;r++)if(!by(e[r],t[r]))return!1;return!0}function dF(e,t){var i=Object.keys(e),r=i.length;if(r!=Object.keys(t).length)return!1;for(var c=0;c<r;c++){var h=i[c];if(!(t.hasOwnProperty(h)&&by(e[h],t[h])))return!1}return!0}function pF(e,t,i){let r;const{map:c}=gp();Wl(e,c,j=>i(6,r=j));let{position:h="top-left"}=t,{showCompass:v=!0}=t,{showZoom:o=!0}=t,{visualizePitch:k=!1}=t,O=null;return lc(()=>{r!=null&&r.loaded()&&O&&r.removeControl(O)}),e.$$set=j=>{"position"in j&&i(1,h=j.position),"showCompass"in j&&i(2,v=j.showCompass),"showZoom"in j&&i(3,o=j.showZoom),"visualizePitch"in j&&i(4,k=j.visualizePitch)},e.$$.update=()=>{e.$$.dirty&126&&r&&!O&&(i(5,O=new b0.NavigationControl({showCompass:v,showZoom:o,visualizePitch:k})),r.addControl(O,h))},[c,h,v,o,k,O,r]}class gF extends Ds{constructor(t){super(),Ls(this,t,pF,null,vs,{position:1,showCompass:2,showZoom:3,visualizePitch:4})}}function mF(e,t,i){let r;const{map:c}=gp();Wl(e,c,O=>i(5,r=O));let{position:h="bottom-left"}=t,{maxWidth:v=void 0}=t,{unit:o="metric"}=t,k=null;return lc(()=>{r!=null&&r.loaded()&&k&&r.removeControl(k)}),e.$$set=O=>{"position"in O&&i(1,h=O.position),"maxWidth"in O&&i(2,v=O.maxWidth),"unit"in O&&i(3,o=O.unit)},e.$$.update=()=>{e.$$.dirty&62&&r&&!k&&(i(4,k=new b0.ScaleControl({maxWidth:v,unit:o})),r.addControl(k,h))},[c,h,v,o,k,r]}class _F extends Ds{constructor(t){super(),Ls(this,t,mF,null,vs,{position:1,maxWidth:2,unit:3})}}const vF=e=>({map:e[0]&8,loadedImages:e[0]&16,allImagesLoaded:e[0]&32}),vw=e=>({map:e[3],loadedImages:e[4],allImagesLoaded:e[5]});function yw(e){let t,i,r=e[2]&&bw(e);const c=e[34].default,h=Ya(c,e,e[33],vw);return{c(){r&&r.c(),t=fr(),h&&h.c()},l(v){r&&r.l(v),t=dr(v),h&&h.l(v)},m(v,o){r&&r.m(v,o),vn(v,t,o),h&&h.m(v,o),i=!0},p(v,o){v[2]?r?(r.p(v,o),o[0]&4&&Pi(r,1)):(r=bw(v),r.c(),Pi(r,1),r.m(t.parentNode,t)):r&&(ia(),Hi(r,1,1,()=>{r=null}),na()),h&&h.p&&(!i||o[0]&56|o[1]&4)&&Xa(h,c,v,v[33],i?Ja(c,v[33],o,vF):Ka(v[33]),vw)},i(v){i||(Pi(r),Pi(h,v),i=!0)},o(v){Hi(r),Hi(h,v),i=!1},d(v){v&&li(t),r&&r.d(v),h&&h.d(v)}}}function bw(e){let t,i,r,c,h,v,o,k;return t=new gF({props:{position:e[6]}}),r=new uF({props:{position:e[6],fitBoundsOptions:{maxZoom:12}}}),h=new AF({props:{position:e[6]}}),o=new _F({props:{position:e[6]}}),{c(){xr(t.$$.fragment),i=fr(),xr(r.$$.fragment),c=fr(),xr(h.$$.fragment),v=fr(),xr(o.$$.fragment)},l(O){Yr(t.$$.fragment,O),i=dr(O),Yr(r.$$.fragment,O),c=dr(O),Yr(h.$$.fragment,O),v=dr(O),Yr(o.$$.fragment,O)},m(O,j){wr(t,O,j),vn(O,i,j),wr(r,O,j),vn(O,c,j),wr(h,O,j),vn(O,v,j),wr(o,O,j),k=!0},p(O,j){const J={};j[0]&64&&(J.position=O[6]),t.$set(J);const oe={};j[0]&64&&(oe.position=O[6]),r.$set(oe);const se={};j[0]&64&&(se.position=O[6]),h.$set(se);const be={};j[0]&64&&(be.position=O[6]),o.$set(be)},i(O){k||(Pi(t.$$.fragment,O),Pi(r.$$.fragment,O),Pi(h.$$.fragment,O),Pi(o.$$.fragment,O),k=!0)},o(O){Hi(t.$$.fragment,O),Hi(r.$$.fragment,O),Hi(h.$$.fragment,O),Hi(o.$$.fragment,O),k=!1},d(O){O&&(li(i),li(c),li(v)),Sr(t,O),Sr(r,O),Sr(h,O),Sr(o,O)}}}function yF(e){let t,i,r,c,h,v=e[3]&&e[0]&&yw(e);return{c(){t=En("div"),v&&v.c(),this.h()},l(o){t=In(o,"DIV",{class:!0});var k=en(t);v&&v.l(k),k.forEach(li),this.h()},h(){vi(t,"class",i=Vc(e[1])+" svelte-p00lfq"),Uy(t,"expand-map",!e[1])},m(o,k){vn(o,t,k),v&&v.m(t,null),r=!0,c||(h=Ms(e[9].call(null,t)),c=!0)},p(o,k){o[3]&&o[0]?v?(v.p(o,k),k[0]&9&&Pi(v,1)):(v=yw(o),v.c(),Pi(v,1),v.m(t,null)):v&&(ia(),Hi(v,1,1,()=>{v=null}),na()),(!r||k[0]&2&&i!==(i=Vc(o[1])+" svelte-p00lfq"))&&vi(t,"class",i),(!r||k[0]&2)&&Uy(t,"expand-map",!o[1])},i(o){r||(Pi(v),r=!0)},o(o){Hi(v),r=!1},d(o){o&&li(t),v&&v.d(),c=!1,h()}}}function bF(e,t,i){let r,c,h,v,{$$slots:o={},$$scope:k}=t,{map:O=null}=t,{class:j=void 0}=t,{style:J}=t,{diffStyleUpdates:oe=!1}=t,{center:se=void 0}=t,{zoom:be=void 0}=t,{pitch:qe=0}=t,{bearing:ke=0}=t,{bounds:Qe=void 0}=t,{hash:We=!1}=t,{loaded:ct=!1}=t,{minZoom:St=0}=t,{maxZoom:yt=22}=t,{zoomOnDoubleClick:xe=!0}=t,{interactive:Gt=!0}=t,{attributionControl:Ve=!0}=t,{cooperativeGestures:Je=!1}=t,{preserveDrawingBuffer:et=!1}=t,{maxBounds:lt=void 0}=t,{images:ut=[]}=t,{standardControls:Ke=!1}=t,{filterLayers:Me=void 0}=t,{transformRequest:Ze=void 0}=t;const Fe=A3(),{map:vt,loadedImages:dt}=tF();Wl(e,vt,Wt=>i(3,h=Wt)),Wl(e,dt,Wt=>i(4,v=Wt));let _t=new Set;function ei(Wt){h!=null&&h.loaded()&&("url"in Wt?(_t.add(Wt.id),h.loadImage(Wt.url,(Di,$t)=>{_t.delete(Wt.id),Di?Fe("error",Di):$t&&(h==null||h.addImage(Wt.id,$t,Wt.options),v.add(Wt.id),dt.set(v))})):(h.addImage(Wt.id,Wt.data,Wt.options),v.add(Wt.id),dt.set(v)))}let di,yi,Ti,Vi;function wi(Wt){if(We){let Di=hF(window.location.hash);Di.length>=3&&(i(11,be=Di[0]),i(10,se=[Di[2],Di[1]])),Di.length==5&&(i(15,ke=Di[3]),i(14,qe=Di[4]))}return sf(vt,h=new b0.Map(sF({container:Wt,style:J,center:se,zoom:be,pitch:qe,bearing:ke,minZoom:St,maxZoom:yt,interactive:Gt,preserveDrawingBuffer:et,maxBounds:lt,bounds:Qe,attributionControl:Ve,transformRequest:Ze,cooperativeGestures:Je})),h),h.on("load",Di=>{i(0,ct=!0),Fe("load",h)}),h.on("error",Di=>Fe("error",{...Di,map:h})),h.on("movestart",Di=>Fe("movestart",{...Di,map:h})),h.on("moveend",Di=>{if(i(10,se=Di.target.getCenter()),i(11,be=Di.target.getZoom()),i(12,Qe=Di.target.getBounds()),Fe("moveend",{...Di,map:h}),We){let $t=window.location.href.replace(/(#.+)?$/,cF(h));window.history.replaceState(window.history.state,"",$t)}}),h.on("zoomstart",Di=>Fe("zoomstart",{...Di,map:h})),h.on("zoom",Di=>{i(11,be=Di.target.getZoom()),Fe("zoom",{...Di,map:h})}),h.on("zoomend",Di=>{i(11,be=Di.target.getZoom()),Fe("zoomend",{...Di,map:h})}),h.on("style.load",()=>{if(h){const Di=h.getStyle();if(i(30,di=Di.layers.map($t=>$t.id)),i(31,yi=Object.keys(Di.sources)),Vi)for(const[$t,Lt]of Object.entries(Vi))h.addSource($t,Lt);if(Ti)for(const $t of Ti)h.addLayer($t)}}),h.on("styledata",Di=>{if(h&&Me){const $t=h.getStyle().layers;if($t)for(let Lt of $t)Me(Lt)||h.setLayoutProperty(Lt.id,"visibility","none")}Fe("styledata",{...Di,map:h})}),{destroy(){i(0,ct=!1),h==null||h.remove(),sf(vt,h=null,h)}}}let mi=J;return e.$$set=Wt=>{"map"in Wt&&i(13,O=Wt.map),"class"in Wt&&i(1,j=Wt.class),"style"in Wt&&i(16,J=Wt.style),"diffStyleUpdates"in Wt&&i(17,oe=Wt.diffStyleUpdates),"center"in Wt&&i(10,se=Wt.center),"zoom"in Wt&&i(11,be=Wt.zoom),"pitch"in Wt&&i(14,qe=Wt.pitch),"bearing"in Wt&&i(15,ke=Wt.bearing),"bounds"in Wt&&i(12,Qe=Wt.bounds),"hash"in Wt&&i(18,We=Wt.hash),"loaded"in Wt&&i(0,ct=Wt.loaded),"minZoom"in Wt&&i(19,St=Wt.minZoom),"maxZoom"in Wt&&i(20,yt=Wt.maxZoom),"zoomOnDoubleClick"in Wt&&i(21,xe=Wt.zoomOnDoubleClick),"interactive"in Wt&&i(22,Gt=Wt.interactive),"attributionControl"in Wt&&i(23,Ve=Wt.attributionControl),"cooperativeGestures"in Wt&&i(24,Je=Wt.cooperativeGestures),"preserveDrawingBuffer"in Wt&&i(25,et=Wt.preserveDrawingBuffer),"maxBounds"in Wt&&i(26,lt=Wt.maxBounds),"images"in Wt&&i(27,ut=Wt.images),"standardControls"in Wt&&i(2,Ke=Wt.standardControls),"filterLayers"in Wt&&i(28,Me=Wt.filterLayers),"transformRequest"in Wt&&i(29,Ze=Wt.transformRequest),"$$scope"in Wt&&i(33,k=Wt.$$scope)},e.$$.update=()=>{if(e.$$.dirty[0]&4&&i(6,r=typeof Ke=="boolean"?void 0:Ke),e.$$.dirty[0]&8&&i(13,O=h),e.$$.dirty[0]&134217737&&ct&&h!=null&&h.loaded())for(let Wt of ut)!_t.has(Wt.id)&&!h.hasImage(Wt.id)&&ei(Wt);if(e.$$.dirty[0]&134217744&&i(5,c=ut.every(Wt=>v.has(Wt.id))),e.$$.dirty[0]&1073938440|e.$$.dirty[1]&3&&h&&!Jg(J,mi)){const Wt=h.getStyle();if(di&&(Ti=Wt.layers.filter(Di=>!di.includes(Di.id))),yi){const Di=Object.keys(Wt.sources).filter($t=>!yi.includes($t));Vi={};for(const $t of Di)Vi[$t]=Wt.sources[$t]}i(32,mi=J),h.setStyle(J,{diff:oe})}e.$$.dirty[0]&1032&&se&&!Jg(se,h==null?void 0:h.getCenter())&&(h==null||h.panTo(se)),e.$$.dirty[0]&2056&&be&&!Jg(be,h==null?void 0:h.getZoom())&&(h==null||h.zoomTo(be)),e.$$.dirty[0]&4104&&Qe&&!Jg(Qe,h==null?void 0:h.getBounds())&&(h==null||h.fitBounds(Qe)),e.$$.dirty[0]&2097160&&(xe?h==null||h.doubleClickZoom.enable():h==null||h.doubleClickZoom.disable())},[ct,j,Ke,h,v,c,r,vt,dt,wi,se,be,Qe,O,qe,ke,J,oe,We,St,yt,xe,Gt,Ve,Je,et,lt,ut,Me,Ze,di,yi,mi,k,o]}class xF extends Ds{constructor(t){super(),Ls(this,t,bF,yF,vs,{map:13,class:1,style:16,diffStyleUpdates:17,center:10,zoom:11,pitch:14,bearing:15,bounds:12,hash:18,loaded:0,minZoom:19,maxZoom:20,zoomOnDoubleClick:21,interactive:22,attributionControl:23,cooperativeGestures:24,preserveDrawingBuffer:25,maxBounds:26,images:27,standardControls:2,filterLayers:28,transformRequest:29},null,[-1,-1])}}function wF(e){let t,i,r,c,h,v,o;const k=e[17].default,O=Ya(k,e,e[16],null);return{c(){t=En("div"),O&&O.c(),this.h()},l(j){t=In(j,"DIV",{tabindex:!0,role:!0});var J=en(t);O&&O.l(J),J.forEach(li),this.h()},h(){vi(t,"tabindex",i=e[1]?0:void 0),vi(t,"role",r=e[1]?"button":void 0),Gy(t,"z-index",e[2])},m(j,J){vn(j,t,J),O&&O.m(t,null),h=!0,v||(o=[Ms(e[6].call(null,t)),Ms(c=SF.call(null,t,e[0])),Os(t,"click",e[18]),Os(t,"dblclick",e[19]),Os(t,"contextmenu",e[20]),Os(t,"mouseenter",e[21]),Os(t,"mouseleave",e[22]),Os(t,"mousemove",e[23]),Os(t,"keydown",e[7])],v=!0)},p(j,[J]){O&&O.p&&(!h||J&65536)&&Xa(O,k,j,j[16],h?Ja(k,j[16],J,null):Ka(j[16]),null),(!h||J&2&&i!==(i=j[1]?0:void 0))&&vi(t,"tabindex",i),(!h||J&2&&r!==(r=j[1]?"button":void 0))&&vi(t,"role",r),c&&Jo(c.update)&&J&1&&c.update.call(null,j[0]),J&4&&Gy(t,"z-index",j[2])},i(j){h||(Pi(O,j),h=!0)},o(j){Hi(O,j),h=!1},d(j){j&&li(t),O&&O.d(j),v=!1,Jl(o)}}}function SF(e,t){const i=e.className;function r(c){c?e.className=`${i} ${c}`:e.className=i}return r(t),{update:r}}function CF(e,t,i){let r,c,h,{$$slots:v={},$$scope:o}=t,{lngLat:k}=t,{class:O=void 0}=t,{interactive:j=!0}=t,{asButton:J=!1}=t,{draggable:oe=!1}=t,{feature:se=null}=t,{offset:be=void 0}=t,{zIndex:qe=void 0}=t,{rotation:ke=0}=t;const Qe=A3(),{map:We,layerEvent:ct,self:St}=nF();Wl(e,We,Ze=>i(25,h=Ze)),Wl(e,ct,Ze=>i(24,r=Ze)),Wl(e,St,Ze=>i(15,c=Ze));function yt(Ze){sf(St,c=new b0.Marker({element:Ze,rotation:ke,draggable:oe,offset:be}).setLngLat(k).addTo(h),c);const Fe=()=>Ve("dragstart"),vt=()=>{xe(),Ve("drag")},dt=()=>{xe(),Ve("dragend")};return oe&&(c.on("dragstart",Fe),c.on("drag",vt),c.on("dragend",dt)),{destroy(){oe&&(c==null||c.off("dragstart",Fe),c==null||c.off("drag",vt),c==null||c.off("dragend",dt)),c==null||c.remove()}}}function xe(){let Ze=c==null?void 0:c.getLngLat();Ze&&(Array.isArray(k)?i(9,k=[Ze.lng,Ze.lat]):k&&"lon"in k?i(9,k={lon:Ze.lng,lat:Ze.lat}):i(9,k=Ze))}function Gt(Ze){Ze.key===" "&&(Ze.preventDefault(),Ze.stopPropagation(),Ve("click"))}function Ve(Ze){if(!j)return;let Fe=c==null?void 0:c.getLngLat();if(!Fe)return;const vt=[Fe.lng,Fe.lat];let dt={map:h,marker:c,lngLat:vt,features:[{type:"Feature",properties:(se==null?void 0:se.properties)??{},geometry:{type:"Point",coordinates:vt}}]};sf(ct,r={...dt,layerType:"marker",type:Ze},r),Qe(Ze,dt)}const Je=()=>Ve("click"),et=()=>Ve("dblclick"),lt=()=>Ve("contextmenu"),ut=Ze=>{Ve("mouseenter")},Ke=()=>{Ve("mouseleave")},Me=()=>Ve("mousemove");return e.$$set=Ze=>{"lngLat"in Ze&&i(9,k=Ze.lngLat),"class"in Ze&&i(0,O=Ze.class),"interactive"in Ze&&i(10,j=Ze.interactive),"asButton"in Ze&&i(1,J=Ze.asButton),"draggable"in Ze&&i(11,oe=Ze.draggable),"feature"in Ze&&i(12,se=Ze.feature),"offset"in Ze&&i(13,be=Ze.offset),"zIndex"in Ze&&i(2,qe=Ze.zIndex),"rotation"in Ze&&i(14,ke=Ze.rotation),"$$scope"in Ze&&i(16,o=Ze.$$scope)},e.$$.update=()=>{e.$$.dirty&33280&&(c==null||c.setLngLat(k)),e.$$.dirty&40960&&(c==null||c.setOffset(be??[0,0])),e.$$.dirty&49152&&(c==null||c.setRotation(ke))},[O,J,qe,We,ct,St,yt,Gt,Ve,k,j,oe,se,be,ke,c,o,v,Je,et,lt,ut,Ke,Me]}class EF extends Ds{constructor(t){super(),Ls(this,t,CF,wF,vs,{lngLat:9,class:0,interactive:10,asButton:1,draggable:11,feature:12,offset:13,zIndex:2,rotation:14})}}var mp=Uint8Array,r8=Uint16Array,IF=Int32Array,TF=new mp([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),kF=new mp([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),s8=function(e,t){for(var i=new r8(31),r=0;r<31;++r)i[r]=t+=1<<e[r-1];for(var c=new IF(i[30]),r=1;r<30;++r)for(var h=i[r];h<i[r+1];++h)c[h]=h-i[r]<<5|r;return{b:i,r:c}},a8=s8(TF,2),MF=a8.b,PF=a8.r;MF[28]=258,PF[258]=28;s8(kF,0);var DF=new r8(32768);for(Ps=0;Ps<32768;++Ps)Lc=(Ps&43690)>>1|(Ps&21845)<<1,Lc=(Lc&52428)>>2|(Lc&13107)<<2,Lc=(Lc&61680)>>4|(Lc&3855)<<4,DF[Ps]=((Lc&65280)>>8|(Lc&255)<<8)>>1;var Lc,Ps,f1=new mp(288);for(Ps=0;Ps<144;++Ps)f1[Ps]=8;var Ps;for(Ps=144;Ps<256;++Ps)f1[Ps]=9;var Ps;for(Ps=256;Ps<280;++Ps)f1[Ps]=7;var Ps;for(Ps=280;Ps<288;++Ps)f1[Ps]=8;var Ps,LF=new mp(32);for(Ps=0;Ps<32;++Ps)LF[Ps]=5;var Ps,BF=new mp(0),RF=typeof TextDecoder<"u"&&new TextDecoder,OF=0;try{RF.decode(BF,{stream:!0}),OF=1}catch{}var xy={exports:{}},zF=NF,FF={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"};function NF(e){if(!e||!e.type)return null;var t=FF[e.type];if(!t)return null;if(t==="geometry")return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:e}]};if(t==="feature")return{type:"FeatureCollection",features:[e]};if(t==="featurecollection")return e}function hm(e){switch(e&&e.type||null){case"FeatureCollection":return e.features=e.features.reduce(function(t,i){return t.concat(hm(i))},[]),e;case"Feature":return e.geometry?hm(e.geometry).map(function(t){var i={type:"Feature",properties:JSON.parse(JSON.stringify(e.properties)),geometry:t};return e.id!==void 0&&(i.id=e.id),i}):[e];case"MultiPoint":return e.coordinates.map(function(t){return{type:"Point",coordinates:t}});case"MultiPolygon":return e.coordinates.map(function(t){return{type:"Polygon",coordinates:t}});case"MultiLineString":return e.coordinates.map(function(t){return{type:"LineString",coordinates:t}});case"GeometryCollection":return e.geometries.map(hm).reduce(function(t,i){return t.concat(i)},[]);case"Point":case"Polygon":case"LineString":return[e]}}const VF=Object.freeze(Object.defineProperty({__proto__:null,default:hm},Symbol.toStringTag,{value:"Module"})),UF=Mv(VF);var GF=function(t){return i(t);function i(r){return Array.isArray(r)&&r.length&&typeof r[0]=="number"?[r]:r.reduce(function(c,h){return Array.isArray(h)&&Array.isArray(h[0])?c.concat(i(h)):(c.push(h),c)},[])}},HF=zF,fm=UF,QF=GF;fm instanceof Function||(fm=fm.default);var qF=function(e){if(!e)return[];var t=fm(HF(e)),i=[];return t.features.forEach(function(r){r.geometry&&(i=i.concat(QF(r.geometry.coordinates)))}),i};function x0(e){return Object.prototype.toString.call(e)}function ZF(e){return x0(e)==="[object Date]"}function jF(e){return x0(e)==="[object RegExp]"}function WF(e){return x0(e)==="[object Error]"}function YF(e){return x0(e)==="[object Boolean]"}function XF(e){return x0(e)==="[object Number]"}function KF(e){return x0(e)==="[object String]"}var o8=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};function d1(e,t){if(e.forEach)return e.forEach(t);for(var i=0;i<e.length;i++)t(e[i],i,e)}var JF=Object.keys||function(t){var i=[];for(var r in t)i.push(r);return i},$F=Object.prototype.propertyIsEnumerable,xw=Object.getOwnPropertySymbols;function p1(e){var t=JF(e);if(xw)for(var i=xw(e),r=0;r<i.length;r++)$F.call(e,i[r])&&t.push(i[r]);return t}var g1=Object.prototype.hasOwnProperty||function(e,t){return t in e};function A8(e){if(typeof e=="object"&&e!==null){var t;if(o8(e))t=[];else if(ZF(e))t=new Date(e.getTime?e.getTime():e);else if(jF(e))t=new RegExp(e);else if(WF(e))t={message:e.message};else if(YF(e)||XF(e)||KF(e))t=Object(e);else if(Object.create&&Object.getPrototypeOf)t=Object.create(Object.getPrototypeOf(e));else if(e.constructor===Object)t={};else{var i=e.constructor&&e.constructor.prototype||e.__proto__||{},r=function(){};r.prototype=i,t=new r}return d1(p1(e),function(c){t[c]=e[c]}),t}return e}function l8(e,t,i){var r=[],c=[],h=!0;return function v(o){var k=i?A8(o):o,O={},j=!0,J={node:k,node_:o,path:[].concat(r),parent:c[c.length-1],parents:c,key:r[r.length-1],isRoot:r.length===0,level:r.length,circular:null,update:function(be,qe){J.isRoot||(J.parent.node[J.key]=be),J.node=be,qe&&(j=!1)},delete:function(be){delete J.parent.node[J.key],be&&(j=!1)},remove:function(be){o8(J.parent.node)?J.parent.node.splice(J.key,1):delete J.parent.node[J.key],be&&(j=!1)},keys:null,before:function(be){O.before=be},after:function(be){O.after=be},pre:function(be){O.pre=be},post:function(be){O.post=be},stop:function(){h=!1},block:function(){j=!1}};if(!h)return J;function oe(){if(typeof J.node=="object"&&J.node!==null){(!J.keys||J.node_!==J.node)&&(J.keys=p1(J.node)),J.isLeaf=J.keys.length===0;for(var be=0;be<c.length;be++)if(c[be].node_===o){J.circular=c[be];break}}else J.isLeaf=!0,J.keys=null;J.notLeaf=!J.isLeaf,J.notRoot=!J.isRoot}oe();var se=t.call(J,J.node);return se!==void 0&&J.update&&J.update(se),O.before&&O.before.call(J,J.node),j&&(typeof J.node=="object"&&J.node!==null&&!J.circular&&(c.push(J),oe(),d1(J.keys,function(be,qe){r.push(be),O.pre&&O.pre.call(J,J.node[be],be);var ke=v(J.node[be]);i&&g1.call(J.node,be)&&(J.node[be]=ke.node),ke.isLast=qe===J.keys.length-1,ke.isFirst=qe===0,O.post&&O.post.call(J,ke),r.pop()}),c.pop()),O.after&&O.after.call(J,J.node)),J}(e).node}function pu(e){this.value=e}pu.prototype.get=function(e){for(var t=this.value,i=0;i<e.length;i++){var r=e[i];if(!t||!g1.call(t,r))return;t=t[r]}return t};pu.prototype.has=function(e){for(var t=this.value,i=0;i<e.length;i++){var r=e[i];if(!t||!g1.call(t,r))return!1;t=t[r]}return!0};pu.prototype.set=function(e,t){for(var i=this.value,r=0;r<e.length-1;r++){var c=e[r];g1.call(i,c)||(i[c]={}),i=i[c]}return i[e[r]]=t,t};pu.prototype.map=function(e){return l8(this.value,e,!0)};pu.prototype.forEach=function(e){return this.value=l8(this.value,e,!1),this.value};pu.prototype.reduce=function(e,t){var i=arguments.length===1,r=i?this.value:t;return this.forEach(function(c){(!this.isRoot||!i)&&(r=e.call(this,r,c))}),r};pu.prototype.paths=function(){var e=[];return this.forEach(function(){e.push(this.path)}),e};pu.prototype.nodes=function(){var e=[];return this.forEach(function(){e.push(this.node)}),e};pu.prototype.clone=function(){var e=[],t=[];return function i(r){for(var c=0;c<e.length;c++)if(e[c]===r)return t[c];if(typeof r=="object"&&r!==null){var h=A8(r);return e.push(r),t.push(h),d1(p1(r),function(v){h[v]=i(r[v])}),e.pop(),t.pop(),h}return r}(this.value)};function u8(e){return new pu(e)}d1(p1(pu.prototype),function(e){u8[e]=function(t){var i=[].slice.call(arguments,1),r=new pu(t);return r[e].apply(r,i)}});var eN=u8,tN=rl;function rl(e){if(!(this instanceof rl))return new rl(e);this._bbox=e||[1/0,1/0,-1/0,-1/0],this._valid=!!e}rl.prototype.include=function(e){return this._valid=!0,this._bbox[0]=Math.min(this._bbox[0],e[0]),this._bbox[1]=Math.min(this._bbox[1],e[1]),this._bbox[2]=Math.max(this._bbox[2],e[0]),this._bbox[3]=Math.max(this._bbox[3],e[1]),this};rl.prototype.equals=function(e){var t;return e instanceof rl?t=e.bbox():t=e,this._bbox[0]==t[0]&&this._bbox[1]==t[1]&&this._bbox[2]==t[2]&&this._bbox[3]==t[3]};rl.prototype.center=function(e){return this._valid?[(this._bbox[0]+this._bbox[2])/2,(this._bbox[1]+this._bbox[3])/2]:null};rl.prototype.union=function(e){this._valid=!0;var t;return e instanceof rl?t=e.bbox():t=e,this._bbox[0]=Math.min(this._bbox[0],t[0]),this._bbox[1]=Math.min(this._bbox[1],t[1]),this._bbox[2]=Math.max(this._bbox[2],t[2]),this._bbox[3]=Math.max(this._bbox[3],t[3]),this};rl.prototype.bbox=function(){return this._valid?this._bbox:null};rl.prototype.contains=function(e){if(!e)return this._fastContains();if(!this._valid)return null;var t=e[0],i=e[1];return this._bbox[0]<=t&&this._bbox[1]<=i&&this._bbox[2]>=t&&this._bbox[3]>=i};rl.prototype.intersect=function(e){if(!this._valid)return null;var t;return e instanceof rl?t=e.bbox():t=e,!(this._bbox[0]>t[2]||this._bbox[2]<t[0]||this._bbox[3]<t[1]||this._bbox[1]>t[3])};rl.prototype._fastContains=function(){if(!this._valid)return new Function("return null;");var e="return "+this._bbox[0]+"<= ll[0] &&"+this._bbox[1]+"<= ll[1] &&"+this._bbox[2]+">= ll[0] &&"+this._bbox[3]+">= ll[1]";return new Function("ll",e)};rl.prototype.polygon=function(){return this._valid?{type:"Polygon",coordinates:[[[this._bbox[0],this._bbox[1]],[this._bbox[2],this._bbox[1]],[this._bbox[2],this._bbox[3]],[this._bbox[0],this._bbox[3]],[this._bbox[0],this._bbox[1]]]]}:null};var iN=qF,nN=eN,rN=tN,c8={features:["FeatureCollection"],coordinates:["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],geometry:["Feature"],geometries:["GeometryCollection"]},sN=Object.keys(c8);xy.exports=function(e){return wy(e).bbox()};xy.exports.polygon=function(e){return wy(e).polygon()};xy.exports.bboxify=function(e){return nN(e).map(function(t){if(t){var i=sN.some(function(r){return t[r]?c8[r].indexOf(t.type)!==-1:!1});i&&(t.bbox=wy(t).bbox(),this.update(t))}})};function wy(e){for(var t=rN(),i=iN(e),r=0;r<i.length;r++)t.include(i[r]);return t}var ji=function(e){e=e||{};var t=typeof e<"u"?e:{},i={},r;for(r in t)t.hasOwnProperty(r)&&(i[r]=t[r]);var c="";function h(ge){return t.locateFile?t.locateFile(ge,c):c+ge}var v;document.currentScript&&(c=document.currentScript.src),c.indexOf("blob:")!==0?c=c.substr(0,c.lastIndexOf("/")+1):c="",v=function(Ee,tt,pt){var n=new XMLHttpRequest;n.open("GET",Ee,!0),n.responseType="arraybuffer",n.onload=function(){if(n.status==200||n.status==0&&n.response){tt(n.response);return}var Zt=je(Ee);if(Zt){tt(Zt.buffer);return}pt()},n.onerror=pt,n.send(null)};var o=t.print||console.log.bind(console),k=t.printErr||console.warn.bind(console);for(r in i)i.hasOwnProperty(r)&&(t[r]=i[r]);i=null,t.arguments&&t.arguments;var O=0,j=function(ge){O=ge},J=function(){return O},oe=8;function se(ge,Ee,tt,pt){switch(tt=tt||"i8",tt.charAt(tt.length-1)==="*"&&(tt="i32"),tt){case"i1":ut[ge>>0]=Ee;break;case"i8":ut[ge>>0]=Ee;break;case"i16":Me[ge>>1]=Ee;break;case"i32":Ze[ge>>2]=Ee;break;case"i64":an=[Ee>>>0,(kn=Ee,+Oi(kn)>=1?kn>0?($i(+oi(kn/4294967296),4294967295)|0)>>>0:~~+zi((kn-+(~~kn>>>0))/4294967296)>>>0:0)],Ze[ge>>2]=an[0],Ze[ge+4>>2]=an[1];break;case"float":Fe[ge>>2]=Ee;break;case"double":vt[ge>>3]=Ee;break;default:Xe("invalid type for setValue: "+tt)}}function be(ge,Ee,tt){switch(Ee=Ee||"i8",Ee.charAt(Ee.length-1)==="*"&&(Ee="i32"),Ee){case"i1":return ut[ge>>0];case"i8":return ut[ge>>0];case"i16":return Me[ge>>1];case"i32":return Ze[ge>>2];case"i64":return Ze[ge>>2];case"float":return Fe[ge>>2];case"double":return vt[ge>>3];default:Xe("invalid type for getValue: "+Ee)}return null}var qe=!1;function ke(ge,Ee){ge||Xe("Assertion failed: "+Ee)}function Qe(ge){var Ee=t["_"+ge];return ke(Ee,"Cannot call unknown function "+ge+", make sure it is exported"),Ee}function We(ge,Ee,tt,pt,n){var ce={string:function(pi){var Rt=0;if(pi!=null&&pi!==0){var Yi=(pi.length<<2)+1;Rt=Y(Yi),Ve(pi,Rt,Yi)}return Rt},array:function(pi){var Rt=Y(pi.length);return Je(pi,Rt),Rt}};function Zt(pi){return Ee==="string"?xe(pi):Ee==="boolean"?!!pi:pi}var Jt=Qe(ge),ui=[],Vt=0;if(pt)for(var qt=0;qt<pt.length;qt++){var Ei=ce[tt[qt]];Ei?(Vt===0&&(Vt=he()),ui[qt]=Ei(pt[qt])):ui[qt]=pt[qt]}var Ai=Jt.apply(null,ui);return Ai=Zt(Ai),Vt!==0&&ne(Vt),Ai}function ct(ge,Ee,tt,pt){tt=tt||[];var n=tt.every(function(Zt){return Zt==="number"}),ce=Ee!=="string";return ce&&n&&!pt?Qe(ge):function(){return We(ge,Ee,tt,arguments)}}var St=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function yt(ge,Ee,tt){for(var pt=Ee+tt,n=Ee;ge[n]&&!(n>=pt);)++n;if(n-Ee>16&&ge.subarray&&St)return St.decode(ge.subarray(Ee,n));for(var ce="";Ee<n;){var Zt=ge[Ee++];if(!(Zt&128)){ce+=String.fromCharCode(Zt);continue}var Jt=ge[Ee++]&63;if((Zt&224)==192){ce+=String.fromCharCode((Zt&31)<<6|Jt);continue}var ui=ge[Ee++]&63;if((Zt&240)==224?Zt=(Zt&15)<<12|Jt<<6|ui:Zt=(Zt&7)<<18|Jt<<12|ui<<6|ge[Ee++]&63,Zt<65536)ce+=String.fromCharCode(Zt);else{var Vt=Zt-65536;ce+=String.fromCharCode(55296|Vt>>10,56320|Vt&1023)}}return ce}function xe(ge,Ee){return ge?yt(Ke,ge,Ee):""}function Gt(ge,Ee,tt,pt){if(!(pt>0))return 0;for(var n=tt,ce=tt+pt-1,Zt=0;Zt<ge.length;++Zt){var Jt=ge.charCodeAt(Zt);if(Jt>=55296&&Jt<=57343){var ui=ge.charCodeAt(++Zt);Jt=65536+((Jt&1023)<<10)|ui&1023}if(Jt<=127){if(tt>=ce)break;Ee[tt++]=Jt}else if(Jt<=2047){if(tt+1>=ce)break;Ee[tt++]=192|Jt>>6,Ee[tt++]=128|Jt&63}else if(Jt<=65535){if(tt+2>=ce)break;Ee[tt++]=224|Jt>>12,Ee[tt++]=128|Jt>>6&63,Ee[tt++]=128|Jt&63}else{if(tt+3>=ce)break;Ee[tt++]=240|Jt>>18,Ee[tt++]=128|Jt>>12&63,Ee[tt++]=128|Jt>>6&63,Ee[tt++]=128|Jt&63}}return Ee[tt]=0,tt-n}function Ve(ge,Ee,tt){return Gt(ge,Ke,Ee,tt)}typeof TextDecoder<"u"&&new TextDecoder("utf-16le");function Je(ge,Ee){ut.set(ge,Ee)}function et(ge,Ee){return ge%Ee>0&&(ge+=Ee-ge%Ee),ge}var lt,ut,Ke,Me,Ze,Fe,vt;function dt(ge){lt=ge,t.HEAP8=ut=new Int8Array(ge),t.HEAP16=Me=new Int16Array(ge),t.HEAP32=Ze=new Int32Array(ge),t.HEAPU8=Ke=new Uint8Array(ge),t.HEAPU16=new Uint16Array(ge),t.HEAPU32=new Uint32Array(ge),t.HEAPF32=Fe=new Float32Array(ge),t.HEAPF64=vt=new Float64Array(ge)}var _t=5266928,ei=24016,di=t.TOTAL_MEMORY||33554432;t.buffer?lt=t.buffer:lt=new ArrayBuffer(di),di=lt.byteLength,dt(lt),Ze[ei>>2]=_t;function yi(ge){for(;ge.length>0;){var Ee=ge.shift();if(typeof Ee=="function"){Ee();continue}var tt=Ee.func;typeof tt=="number"?Ee.arg===void 0?t.dynCall_v(tt):t.dynCall_vi(tt,Ee.arg):tt(Ee.arg===void 0?null:Ee.arg)}}var Ti=[],Vi=[],wi=[],mi=[];function Wt(){if(t.preRun)for(typeof t.preRun=="function"&&(t.preRun=[t.preRun]);t.preRun.length;)ni(t.preRun.shift());yi(Ti)}function Di(){yi(Vi)}function $t(){yi(wi)}function Lt(){if(t.postRun)for(typeof t.postRun=="function"&&(t.postRun=[t.postRun]);t.postRun.length;)si(t.postRun.shift());yi(mi)}function ni(ge){Ti.unshift(ge)}function si(ge){mi.unshift(ge)}var Oi=Math.abs,zi=Math.ceil,oi=Math.floor,$i=Math.min,ki=0,sn=null;function ar(ge){ki++,t.monitorRunDependencies&&t.monitorRunDependencies(ki)}function ti(ge){if(ki--,t.monitorRunDependencies&&t.monitorRunDependencies(ki),ki==0&&sn){var Ee=sn;sn=null,Ee()}}t.preloadedImages={},t.preloadedAudios={};var Wi=null,ir="data:application/octet-stream;base64,";function gn(ge){return String.prototype.startsWith?ge.startsWith(ir):ge.indexOf(ir)===0}var kn,an;Wi="data:application/octet-stream;base64,AAAAAAAAAAACAAAAAwAAAAEAAAAFAAAABAAAAAYAAAAAAAAAAAAAAAAAAAABAAAAAgAAAAMAAAAEAAAABQAAAAYAAAABAAAABAAAAAMAAAAGAAAABQAAAAIAAAAAAAAAAgAAAAMAAAABAAAABAAAAAYAAAAAAAAABQAAAAMAAAAGAAAABAAAAAUAAAAAAAAAAQAAAAIAAAAEAAAABQAAAAYAAAAAAAAAAgAAAAMAAAABAAAABQAAAAIAAAAAAAAAAQAAAAMAAAAGAAAABAAAAAYAAAAAAAAABQAAAAIAAAABAAAABAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAgAAAAMAAAAAAAAAAAAAAAIAAAAAAAAAAQAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAEAAAABgAAAAAAAAAFAAAAAAAAAAAAAAAEAAAABQAAAAAAAAAAAAAAAAAAAAIAAAAAAAAABgAAAAAAAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAACAAAAAwAAAAQAAAAFAAAABgAAAAEAAAACAAAAAwAAAAQAAAAFAAAABgAAAAAAAAACAAAAAwAAAAQAAAAFAAAABgAAAAAAAAABAAAAAwAAAAQAAAAFAAAABgAAAAAAAAABAAAAAgAAAAQAAAAFAAAABgAAAAAAAAABAAAAAgAAAAMAAAAFAAAABgAAAAAAAAABAAAAAgAAAAMAAAAEAAAABgAAAAAAAAABAAAAAgAAAAMAAAAEAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAADAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAACAAAAAgAAAAAAAAAAAAAABgAAAAAAAAADAAAAAgAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAUAAAAEAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAAAAAAABgAAAAAAAAAEAAAAAAAAAAYAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAUAAAACAAAABAAAAAMAAAAIAAAAAQAAAAcAAAAGAAAACQAAAAAAAAADAAAAAgAAAAIAAAAGAAAACgAAAAsAAAAAAAAAAQAAAAUAAAADAAAADQAAAAEAAAAHAAAABAAAAAwAAAAAAAAABAAAAH8AAAAPAAAACAAAAAMAAAAAAAAADAAAAAUAAAACAAAAEgAAAAoAAAAIAAAAAAAAABAAAAAGAAAADgAAAAsAAAARAAAAAQAAAAkAAAACAAAABwAAABUAAAAJAAAAEwAAAAMAAAANAAAAAQAAAAgAAAAFAAAAFgAAABAAAAAEAAAAAAAAAA8AAAAJAAAAEwAAAA4AAAAUAAAAAQAAAAcAAAAGAAAACgAAAAsAAAAYAAAAFwAAAAUAAAACAAAAEgAAAAsAAAARAAAAFwAAABkAAAACAAAABgAAAAoAAAAMAAAAHAAAAA0AAAAaAAAABAAAAA8AAAADAAAADQAAABoAAAAVAAAAHQAAAAMAAAAMAAAABwAAAA4AAAB/AAAAEQAAABsAAAAJAAAAFAAAAAYAAAAPAAAAFgAAABwAAAAfAAAABAAAAAgAAAAMAAAAEAAAABIAAAAhAAAAHgAAAAgAAAAFAAAAFgAAABEAAAALAAAADgAAAAYAAAAjAAAAGQAAABsAAAASAAAAGAAAAB4AAAAgAAAABQAAAAoAAAAQAAAAEwAAACIAAAAUAAAAJAAAAAcAAAAVAAAACQAAABQAAAAOAAAAEwAAAAkAAAAoAAAAGwAAACQAAAAVAAAAJgAAABMAAAAiAAAADQAAAB0AAAAHAAAAFgAAABAAAAApAAAAIQAAAA8AAAAIAAAAHwAAABcAAAAYAAAACwAAAAoAAAAnAAAAJQAAABkAAAAYAAAAfwAAACAAAAAlAAAACgAAABcAAAASAAAAGQAAABcAAAARAAAACwAAAC0AAAAnAAAAIwAAABoAAAAqAAAAHQAAACsAAAAMAAAAHAAAAA0AAAAbAAAAKAAAACMAAAAuAAAADgAAABQAAAARAAAAHAAAAB8AAAAqAAAALAAAAAwAAAAPAAAAGgAAAB0AAAArAAAAJgAAAC8AAAANAAAAGgAAABUAAAAeAAAAIAAAADAAAAAyAAAAEAAAABIAAAAhAAAAHwAAACkAAAAsAAAANQAAAA8AAAAWAAAAHAAAACAAAAAeAAAAGAAAABIAAAA0AAAAMgAAACUAAAAhAAAAHgAAADEAAAAwAAAAFgAAABAAAAApAAAAIgAAABMAAAAmAAAAFQAAADYAAAAkAAAAMwAAACMAAAAuAAAALQAAADgAAAARAAAAGwAAABkAAAAkAAAAFAAAACIAAAATAAAANwAAACgAAAA2AAAAJQAAACcAAAA0AAAAOQAAABgAAAAXAAAAIAAAACYAAAB/AAAAIgAAADMAAAAdAAAALwAAABUAAAAnAAAAJQAAABkAAAAXAAAAOwAAADkAAAAtAAAAKAAAABsAAAAkAAAAFAAAADwAAAAuAAAANwAAACkAAAAxAAAANQAAAD0AAAAWAAAAIQAAAB8AAAAqAAAAOgAAACsAAAA+AAAAHAAAACwAAAAaAAAAKwAAAD4AAAAvAAAAQAAAABoAAAAqAAAAHQAAACwAAAA1AAAAOgAAAEEAAAAcAAAAHwAAACoAAAAtAAAAJwAAACMAAAAZAAAAPwAAADsAAAA4AAAALgAAADwAAAA4AAAARAAAABsAAAAoAAAAIwAAAC8AAAAmAAAAKwAAAB0AAABFAAAAMwAAAEAAAAAwAAAAMQAAAB4AAAAhAAAAQwAAAEIAAAAyAAAAMQAAAH8AAAA9AAAAQgAAACEAAAAwAAAAKQAAADIAAAAwAAAAIAAAAB4AAABGAAAAQwAAADQAAAAzAAAARQAAADYAAABHAAAAJgAAAC8AAAAiAAAANAAAADkAAABGAAAASgAAACAAAAAlAAAAMgAAADUAAAA9AAAAQQAAAEsAAAAfAAAAKQAAACwAAAA2AAAARwAAADcAAABJAAAAIgAAADMAAAAkAAAANwAAACgAAAA2AAAAJAAAAEgAAAA8AAAASQAAADgAAABEAAAAPwAAAE0AAAAjAAAALgAAAC0AAAA5AAAAOwAAAEoAAABOAAAAJQAAACcAAAA0AAAAOgAAAH8AAAA+AAAATAAAACwAAABBAAAAKgAAADsAAAA/AAAATgAAAE8AAAAnAAAALQAAADkAAAA8AAAASAAAAEQAAABQAAAAKAAAADcAAAAuAAAAPQAAADUAAAAxAAAAKQAAAFEAAABLAAAAQgAAAD4AAAArAAAAOgAAACoAAABSAAAAQAAAAEwAAAA/AAAAfwAAADgAAAAtAAAATwAAADsAAABNAAAAQAAAAC8AAAA+AAAAKwAAAFQAAABFAAAAUgAAAEEAAAA6AAAANQAAACwAAABWAAAATAAAAEsAAABCAAAAQwAAAFEAAABVAAAAMQAAADAAAAA9AAAAQwAAAEIAAAAyAAAAMAAAAFcAAABVAAAARgAAAEQAAAA4AAAAPAAAAC4AAABaAAAATQAAAFAAAABFAAAAMwAAAEAAAAAvAAAAWQAAAEcAAABUAAAARgAAAEMAAAA0AAAAMgAAAFMAAABXAAAASgAAAEcAAABZAAAASQAAAFsAAAAzAAAARQAAADYAAABIAAAAfwAAAEkAAAA3AAAAUAAAADwAAABYAAAASQAAAFsAAABIAAAAWAAAADYAAABHAAAANwAAAEoAAABOAAAAUwAAAFwAAAA0AAAAOQAAAEYAAABLAAAAQQAAAD0AAAA1AAAAXgAAAFYAAABRAAAATAAAAFYAAABSAAAAYAAAADoAAABBAAAAPgAAAE0AAAA/AAAARAAAADgAAABdAAAATwAAAFoAAABOAAAASgAAADsAAAA5AAAAXwAAAFwAAABPAAAATwAAAE4AAAA/AAAAOwAAAF0AAABfAAAATQAAAFAAAABEAAAASAAAADwAAABjAAAAWgAAAFgAAABRAAAAVQAAAF4AAABlAAAAPQAAAEIAAABLAAAAUgAAAGAAAABUAAAAYgAAAD4AAABMAAAAQAAAAFMAAAB/AAAASgAAAEYAAABkAAAAVwAAAFwAAABUAAAARQAAAFIAAABAAAAAYQAAAFkAAABiAAAAVQAAAFcAAABlAAAAZgAAAEIAAABDAAAAUQAAAFYAAABMAAAASwAAAEEAAABoAAAAYAAAAF4AAABXAAAAUwAAAGYAAABkAAAAQwAAAEYAAABVAAAAWAAAAEgAAABbAAAASQAAAGMAAABQAAAAaQAAAFkAAABhAAAAWwAAAGcAAABFAAAAVAAAAEcAAABaAAAATQAAAFAAAABEAAAAagAAAF0AAABjAAAAWwAAAEkAAABZAAAARwAAAGkAAABYAAAAZwAAAFwAAABTAAAATgAAAEoAAABsAAAAZAAAAF8AAABdAAAATwAAAFoAAABNAAAAbQAAAF8AAABqAAAAXgAAAFYAAABRAAAASwAAAGsAAABoAAAAZQAAAF8AAABcAAAATwAAAE4AAABtAAAAbAAAAF0AAABgAAAAaAAAAGIAAABuAAAATAAAAFYAAABSAAAAYQAAAH8AAABiAAAAVAAAAGcAAABZAAAAbwAAAGIAAABuAAAAYQAAAG8AAABSAAAAYAAAAFQAAABjAAAAUAAAAGkAAABYAAAAagAAAFoAAABxAAAAZAAAAGYAAABTAAAAVwAAAGwAAAByAAAAXAAAAGUAAABmAAAAawAAAHAAAABRAAAAVQAAAF4AAABmAAAAZQAAAFcAAABVAAAAcgAAAHAAAABkAAAAZwAAAFsAAABhAAAAWQAAAHQAAABpAAAAbwAAAGgAAABrAAAAbgAAAHMAAABWAAAAXgAAAGAAAABpAAAAWAAAAGcAAABbAAAAcQAAAGMAAAB0AAAAagAAAF0AAABjAAAAWgAAAHUAAABtAAAAcQAAAGsAAAB/AAAAZQAAAF4AAABzAAAAaAAAAHAAAABsAAAAZAAAAF8AAABcAAAAdgAAAHIAAABtAAAAbQAAAGwAAABdAAAAXwAAAHUAAAB2AAAAagAAAG4AAABiAAAAaAAAAGAAAAB3AAAAbwAAAHMAAABvAAAAYQAAAG4AAABiAAAAdAAAAGcAAAB3AAAAcAAAAGsAAABmAAAAZQAAAHgAAABzAAAAcgAAAHEAAABjAAAAdAAAAGkAAAB1AAAAagAAAHkAAAByAAAAcAAAAGQAAABmAAAAdgAAAHgAAABsAAAAcwAAAG4AAABrAAAAaAAAAHgAAAB3AAAAcAAAAHQAAABnAAAAdwAAAG8AAABxAAAAaQAAAHkAAAB1AAAAfwAAAG0AAAB2AAAAcQAAAHkAAABqAAAAdgAAAHgAAABsAAAAcgAAAHUAAAB5AAAAbQAAAHcAAABvAAAAcwAAAG4AAAB5AAAAdAAAAHgAAAB4AAAAcwAAAHIAAABwAAAAeQAAAHcAAAB2AAAAeQAAAHQAAAB4AAAAdwAAAHUAAABxAAAAdgAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAEAAAAFAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAIAAAAFAAAAAQAAAAAAAAD/////AQAAAAAAAAADAAAABAAAAAIAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAUAAAABAAAAAAAAAAAAAAABAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAAFAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAQAAAAFAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAADAAAAAAAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAABAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAADAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAADAAAABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAAAAAAAAAAABAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAMAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAQAAAAMAAAABAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAMAAAABAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAADAAAABQAAAAEAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAEAAAABQAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAgAAAAUAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAMAAAABAAAAAAAAAAEAAAAAAAAABQAAAAAAAAAAAAAABQAAAAUAAAAAAAAAAAAAAP////8BAAAAAAAAAAMAAAAEAAAAAgAAAAAAAAAAAAAAAQAAAAAAAAAAAAAABQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABAAAABQAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAQAAAP//////////AQAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAMAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAIAAAAAAAAAAAAAAAEAAAACAAAABgAAAAQAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAABwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABgAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAoAAAACAAAAAAAAAAAAAAABAAAAAQAAAAUAAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAIAAAAAAAAAAAAAAAEAAAADAAAABwAAAAYAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAHAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAABAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAOAAAAAgAAAAAAAAAAAAAAAQAAAAAAAAAJAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAwAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAgAAAAAAAAAAAAAAAQAAAAQAAAAIAAAACgAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAsAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAJAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAACAAAAAAAAAAAAAAABAAAACwAAAA8AAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACQAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAA4AAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAgAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAFAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAACAAAAAAAAAAAAAAABAAAADAAAABAAAAAMAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAACgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAA8AAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAPAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAEAAAAKAAAAEwAAAAgAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACQAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAADwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAJAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA0AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAgAAAAAAAAAAAAAAAQAAAA0AAAARAAAADQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABEAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAATAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABMAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACQAAAAIAAAAAAAAAAAAAAAEAAAAOAAAAEgAAAA8AAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAPAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAABIAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAATAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAASAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABMAAAACAAAAAAAAAAAAAAABAAAA//////////8TAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABMAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAASAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABIAAAAAAAAAGAAAAAAAAAAhAAAAAAAAAB4AAAAAAAAAIAAAAAMAAAAxAAAAAQAAADAAAAADAAAAMgAAAAMAAAAIAAAAAAAAAAUAAAAFAAAACgAAAAUAAAAWAAAAAAAAABAAAAAAAAAAEgAAAAAAAAApAAAAAQAAACEAAAAAAAAAHgAAAAAAAAAEAAAAAAAAAAAAAAAFAAAAAgAAAAUAAAAPAAAAAQAAAAgAAAAAAAAABQAAAAUAAAAfAAAAAQAAABYAAAAAAAAAEAAAAAAAAAACAAAAAAAAAAYAAAAAAAAADgAAAAAAAAAKAAAAAAAAAAsAAAAAAAAAEQAAAAMAAAAYAAAAAQAAABcAAAADAAAAGQAAAAMAAAAAAAAAAAAAAAEAAAAFAAAACQAAAAUAAAAFAAAAAAAAAAIAAAAAAAAABgAAAAAAAAASAAAAAQAAAAoAAAAAAAAACwAAAAAAAAAEAAAAAQAAAAMAAAAFAAAABwAAAAUAAAAIAAAAAQAAAAAAAAAAAAAAAQAAAAUAAAAQAAAAAQAAAAUAAAAAAAAAAgAAAAAAAAAHAAAAAAAAABUAAAAAAAAAJgAAAAAAAAAJAAAAAAAAABMAAAAAAAAAIgAAAAMAAAAOAAAAAQAAABQAAAADAAAAJAAAAAMAAAADAAAAAAAAAA0AAAAFAAAAHQAAAAUAAAABAAAAAAAAAAcAAAAAAAAAFQAAAAAAAAAGAAAAAQAAAAkAAAAAAAAAEwAAAAAAAAAEAAAAAgAAAAwAAAAFAAAAGgAAAAUAAAAAAAAAAQAAAAMAAAAAAAAADQAAAAUAAAACAAAAAQAAAAEAAAAAAAAABwAAAAAAAAAaAAAAAAAAACoAAAAAAAAAOgAAAAAAAAAdAAAAAAAAACsAAAAAAAAAPgAAAAMAAAAmAAAAAQAAAC8AAAADAAAAQAAAAAMAAAAMAAAAAAAAABwAAAAFAAAALAAAAAUAAAANAAAAAAAAABoAAAAAAAAAKgAAAAAAAAAVAAAAAQAAAB0AAAAAAAAAKwAAAAAAAAAEAAAAAwAAAA8AAAAFAAAAHwAAAAUAAAADAAAAAQAAAAwAAAAAAAAAHAAAAAUAAAAHAAAAAQAAAA0AAAAAAAAAGgAAAAAAAAAfAAAAAAAAACkAAAAAAAAAMQAAAAAAAAAsAAAAAAAAADUAAAAAAAAAPQAAAAMAAAA6AAAAAQAAAEEAAAADAAAASwAAAAMAAAAPAAAAAAAAABYAAAAFAAAAIQAAAAUAAAAcAAAAAAAAAB8AAAAAAAAAKQAAAAAAAAAqAAAAAQAAACwAAAAAAAAANQAAAAAAAAAEAAAABAAAAAgAAAAFAAAAEAAAAAUAAAAMAAAAAQAAAA8AAAAAAAAAFgAAAAUAAAAaAAAAAQAAABwAAAAAAAAAHwAAAAAAAAAyAAAAAAAAADAAAAAAAAAAMQAAAAMAAAAgAAAAAAAAAB4AAAADAAAAIQAAAAMAAAAYAAAAAwAAABIAAAADAAAAEAAAAAMAAABGAAAAAAAAAEMAAAAAAAAAQgAAAAMAAAA0AAAAAwAAADIAAAAAAAAAMAAAAAAAAAAlAAAAAwAAACAAAAAAAAAAHgAAAAMAAABTAAAAAAAAAFcAAAADAAAAVQAAAAMAAABKAAAAAwAAAEYAAAAAAAAAQwAAAAAAAAA5AAAAAQAAADQAAAADAAAAMgAAAAAAAAAZAAAAAAAAABcAAAAAAAAAGAAAAAMAAAARAAAAAAAAAAsAAAADAAAACgAAAAMAAAAOAAAAAwAAAAYAAAADAAAAAgAAAAMAAAAtAAAAAAAAACcAAAAAAAAAJQAAAAMAAAAjAAAAAwAAABkAAAAAAAAAFwAAAAAAAAAbAAAAAwAAABEAAAAAAAAACwAAAAMAAAA/AAAAAAAAADsAAAADAAAAOQAAAAMAAAA4AAAAAwAAAC0AAAAAAAAAJwAAAAAAAAAuAAAAAwAAACMAAAADAAAAGQAAAAAAAAAkAAAAAAAAABQAAAAAAAAADgAAAAMAAAAiAAAAAAAAABMAAAADAAAACQAAAAMAAAAmAAAAAwAAABUAAAADAAAABwAAAAMAAAA3AAAAAAAAACgAAAAAAAAAGwAAAAMAAAA2AAAAAwAAACQAAAAAAAAAFAAAAAAAAAAzAAAAAwAAACIAAAAAAAAAEwAAAAMAAABIAAAAAAAAADwAAAADAAAALgAAAAMAAABJAAAAAwAAADcAAAAAAAAAKAAAAAAAAABHAAAAAwAAADYAAAADAAAAJAAAAAAAAABAAAAAAAAAAC8AAAAAAAAAJgAAAAMAAAA+AAAAAAAAACsAAAADAAAAHQAAAAMAAAA6AAAAAwAAACoAAAADAAAAGgAAAAMAAABUAAAAAAAAAEUAAAAAAAAAMwAAAAMAAABSAAAAAwAAAEAAAAAAAAAALwAAAAAAAABMAAAAAwAAAD4AAAAAAAAAKwAAAAMAAABhAAAAAAAAAFkAAAADAAAARwAAAAMAAABiAAAAAwAAAFQAAAAAAAAARQAAAAAAAABgAAAAAwAAAFIAAAADAAAAQAAAAAAAAABLAAAAAAAAAEEAAAAAAAAAOgAAAAMAAAA9AAAAAAAAADUAAAADAAAALAAAAAMAAAAxAAAAAwAAACkAAAADAAAAHwAAAAMAAABeAAAAAAAAAFYAAAAAAAAATAAAAAMAAABRAAAAAwAAAEsAAAAAAAAAQQAAAAAAAABCAAAAAwAAAD0AAAAAAAAANQAAAAMAAABrAAAAAAAAAGgAAAADAAAAYAAAAAMAAABlAAAAAwAAAF4AAAAAAAAAVgAAAAAAAABVAAAAAwAAAFEAAAADAAAASwAAAAAAAAA5AAAAAAAAADsAAAAAAAAAPwAAAAMAAABKAAAAAAAAAE4AAAADAAAATwAAAAMAAABTAAAAAwAAAFwAAAADAAAAXwAAAAMAAAAlAAAAAAAAACcAAAADAAAALQAAAAMAAAA0AAAAAAAAADkAAAAAAAAAOwAAAAAAAABGAAAAAwAAAEoAAAAAAAAATgAAAAMAAAAYAAAAAAAAABcAAAADAAAAGQAAAAMAAAAgAAAAAwAAACUAAAAAAAAAJwAAAAMAAAAyAAAAAwAAADQAAAAAAAAAOQAAAAAAAAAuAAAAAAAAADwAAAAAAAAASAAAAAMAAAA4AAAAAAAAAEQAAAADAAAAUAAAAAMAAAA/AAAAAwAAAE0AAAADAAAAWgAAAAMAAAAbAAAAAAAAACgAAAADAAAANwAAAAMAAAAjAAAAAAAAAC4AAAAAAAAAPAAAAAAAAAAtAAAAAwAAADgAAAAAAAAARAAAAAMAAAAOAAAAAAAAABQAAAADAAAAJAAAAAMAAAARAAAAAwAAABsAAAAAAAAAKAAAAAMAAAAZAAAAAwAAACMAAAAAAAAALgAAAAAAAABHAAAAAAAAAFkAAAAAAAAAYQAAAAMAAABJAAAAAAAAAFsAAAADAAAAZwAAAAMAAABIAAAAAwAAAFgAAAADAAAAaQAAAAMAAAAzAAAAAAAAAEUAAAADAAAAVAAAAAMAAAA2AAAAAAAAAEcAAAAAAAAAWQAAAAAAAAA3AAAAAwAAAEkAAAAAAAAAWwAAAAMAAAAmAAAAAAAAAC8AAAADAAAAQAAAAAMAAAAiAAAAAwAAADMAAAAAAAAARQAAAAMAAAAkAAAAAwAAADYAAAAAAAAARwAAAAAAAABgAAAAAAAAAGgAAAAAAAAAawAAAAMAAABiAAAAAAAAAG4AAAADAAAAcwAAAAMAAABhAAAAAwAAAG8AAAADAAAAdwAAAAMAAABMAAAAAAAAAFYAAAADAAAAXgAAAAMAAABSAAAAAAAAAGAAAAAAAAAAaAAAAAAAAABUAAAAAwAAAGIAAAAAAAAAbgAAAAMAAAA6AAAAAAAAAEEAAAADAAAASwAAAAMAAAA+AAAAAwAAAEwAAAAAAAAAVgAAAAMAAABAAAAAAwAAAFIAAAAAAAAAYAAAAAAAAABVAAAAAAAAAFcAAAAAAAAAUwAAAAMAAABlAAAAAAAAAGYAAAADAAAAZAAAAAMAAABrAAAAAwAAAHAAAAADAAAAcgAAAAMAAABCAAAAAAAAAEMAAAADAAAARgAAAAMAAABRAAAAAAAAAFUAAAAAAAAAVwAAAAAAAABeAAAAAwAAAGUAAAAAAAAAZgAAAAMAAAAxAAAAAAAAADAAAAADAAAAMgAAAAMAAAA9AAAAAwAAAEIAAAAAAAAAQwAAAAMAAABLAAAAAwAAAFEAAAAAAAAAVQAAAAAAAABfAAAAAAAAAFwAAAAAAAAAUwAAAAAAAABPAAAAAAAAAE4AAAAAAAAASgAAAAMAAAA/AAAAAQAAADsAAAADAAAAOQAAAAMAAABtAAAAAAAAAGwAAAAAAAAAZAAAAAUAAABdAAAAAQAAAF8AAAAAAAAAXAAAAAAAAABNAAAAAQAAAE8AAAAAAAAATgAAAAAAAAB1AAAABAAAAHYAAAAFAAAAcgAAAAUAAABqAAAAAQAAAG0AAAAAAAAAbAAAAAAAAABaAAAAAQAAAF0AAAABAAAAXwAAAAAAAABaAAAAAAAAAE0AAAAAAAAAPwAAAAAAAABQAAAAAAAAAEQAAAAAAAAAOAAAAAMAAABIAAAAAQAAADwAAAADAAAALgAAAAMAAABqAAAAAAAAAF0AAAAAAAAATwAAAAUAAABjAAAAAQAAAFoAAAAAAAAATQAAAAAAAABYAAAAAQAAAFAAAAAAAAAARAAAAAAAAAB1AAAAAwAAAG0AAAAFAAAAXwAAAAUAAABxAAAAAQAAAGoAAAAAAAAAXQAAAAAAAABpAAAAAQAAAGMAAAABAAAAWgAAAAAAAABpAAAAAAAAAFgAAAAAAAAASAAAAAAAAABnAAAAAAAAAFsAAAAAAAAASQAAAAMAAABhAAAAAQAAAFkAAAADAAAARwAAAAMAAABxAAAAAAAAAGMAAAAAAAAAUAAAAAUAAAB0AAAAAQAAAGkAAAAAAAAAWAAAAAAAAABvAAAAAQAAAGcAAAAAAAAAWwAAAAAAAAB1AAAAAgAAAGoAAAAFAAAAWgAAAAUAAAB5AAAAAQAAAHEAAAAAAAAAYwAAAAAAAAB3AAAAAQAAAHQAAAABAAAAaQAAAAAAAAB3AAAAAAAAAG8AAAAAAAAAYQAAAAAAAABzAAAAAAAAAG4AAAAAAAAAYgAAAAMAAABrAAAAAQAAAGgAAAADAAAAYAAAAAMAAAB5AAAAAAAAAHQAAAAAAAAAZwAAAAUAAAB4AAAAAQAAAHcAAAAAAAAAbwAAAAAAAABwAAAAAQAAAHMAAAAAAAAAbgAAAAAAAAB1AAAAAQAAAHEAAAAFAAAAaQAAAAUAAAB2AAAAAQAAAHkAAAAAAAAAdAAAAAAAAAByAAAAAQAAAHgAAAABAAAAdwAAAAAAAAByAAAAAAAAAHAAAAAAAAAAawAAAAAAAABkAAAAAAAAAGYAAAAAAAAAZQAAAAMAAABTAAAAAQAAAFcAAAADAAAAVQAAAAMAAAB2AAAAAAAAAHgAAAAAAAAAcwAAAAUAAABsAAAAAQAAAHIAAAAAAAAAcAAAAAAAAABcAAAAAQAAAGQAAAAAAAAAZgAAAAAAAAB1AAAAAAAAAHkAAAAFAAAAdwAAAAUAAABtAAAAAQAAAHYAAAAAAAAAeAAAAAAAAABfAAAAAQAAAGwAAAABAAAAcgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAEAAAABAAAAAAAAAAAAAAABAAAAAAAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAB+ogX28rbpPxqumpJv+fM/165tC4ns9D+XaEnTqUsEQFrOtNlC4PA/3U+0XG6P9b9TdUUBxTTjP4PUp8ex1ty/B1rD/EN43z+lcDi6LLrZP/a45NWEHMY/oJ5ijLDZ+j/xw3rjxWPjP2B8A46ioQdAotff3wla2z+FMSpA1jj+v6b5Y1mtPbS/cIu8K0F457/2esiyJpDNv98k5Ts2NeA/pvljWa09tD88ClUJ60MDQPZ6yLImkM0/4ONKxa0UBcD2uOTVhBzGv5G7JRxGave/8cN648Vj47+HCwtkjAXIv6LX398JWtu/qyheaCAL9D9TdUUBxTTjv4gyTxslhwVAB1rD/EN4378EH/28teoFwH6iBfbytum/F6ztFYdK/r/Xrm0Liez0vwcS6wNGWeO/Ws602ULg8L9TCtRLiLT8P8pi5RexJsw/BlIKPVwR5T95Wyu0/QjnP5PjoT7YYcu/mBhKZ6zrwj8wRYS7NebuP3qW6geh+Ls/SLrixebL3r+pcyymN9XrPwmkNHp7xec/GWNMZVAA17+82s+x2BLiPwn2ytbJ9ek/LgEH1sMS1j8yp/2LhTfeP+SnWwtQBbu/d38gkp5X7z8ytsuHaADGPzUYObdf1+m/7IauECWhwz+cjSACjzniP76Z+wUhN9K/1+GEKzup67+/GYr/04baPw6idWOvsuc/ZedTWsRa5b/EJQOuRzi0v/OncYhHPes/h49PixY53j+i8wWfC03Nvw2idWOvsue/ZedTWsRa5T/EJQOuRzi0P/KncYhHPeu/iY9PixY53r+i8wWfC03NP9anWwtQBbs/d38gkp5X778ytsuHaADGvzUYObdf1+k/74auECWhw7+cjSACjzniv8CZ+wUhN9I/1uGEKzup6z+/GYr/04bavwmkNHp7xee/F2NMZVAA1z+82s+x2BLivwr2ytbJ9em/KwEH1sMS1r8yp/2LhTfev81i5RexJsy/BlIKPVwR5b95Wyu0/Qjnv5DjoT7YYcs/nBhKZ6zrwr8wRYS7Nebuv3OW6geh+Lu/SLrixebL3j+pcyymN9Xrv8rHIFfWehZAMBwUdlo0DECTUc17EOb2PxpVB1SWChdAzjbhb9pTDUDQhmdvECX5P9FlMKCC9+g/IIAzjELgE0DajDngMv8GQFhWDmDPjNs/y1guLh96EkAxPi8k7DIEQJCc4URlhRhA3eLKKLwkEECqpNAyTBD/P6xpjXcDiwVAFtl//cQm4z+Ibt3XKiYTQM7mCLUb3QdAoM1t8yVv7D8aLZv2Nk8UQEAJPV5nQwxAtSsfTCoE9z9TPjXLXIIWQBVanC5W9AtAYM3d7Adm9j++5mQz1FoWQBUThyaVBghAwH5muQsV7T89Q1qv82MUQJoWGOfNuBdAzrkClkmwDkDQjKq77t37Py+g0dtitsE/ZwAMTwVPEUBojepluNwBQGYbtuW+t9w/HNWIJs6MEkDTNuQUSlgEQKxktPP5TcQ/ixbLB8JjEUCwuWjXMQYCQAS/R09FkRdAowpiZjhhDkB7LmlczD/7P01iQmhhsAVAnrtTwDy84z/Z6jfQ2TgTQChOCXMnWwpAhrW3daoz8z/HYJvVPI4VQLT3ik5FcA5Angi7LOZd+z+NNVzDy5gXQBXdvVTFUA1AYNMgOeYe+T8+qHXGCwkXQKQTOKwa5AJA8gFVoEMW0T+FwzJyttIRQAEAAAD/////BwAAAP////8xAAAA/////1cBAAD/////YQkAAP////+nQQAA/////5HLAQD/////95AMAP/////B9lcAAAAAAAAAAAAAAAAAAgAAAP////8OAAAA/////2IAAAD/////rgIAAP/////CEgAA/////06DAAD/////IpcDAP/////uIRkA/////4LtrwAAAAAAAAAAAAAAAAAAAAAAAgAAAP//////////AQAAAAMAAAD//////////////////////////////////////////////////////////////////////////wEAAAAAAAAAAgAAAP///////////////wMAAAD//////////////////////////////////////////////////////////////////////////wEAAAAAAAAAAgAAAP///////////////wMAAAD//////////////////////////////////////////////////////////////////////////wEAAAAAAAAAAgAAAP///////////////wMAAAD//////////////////////////////////////////////////////////wIAAAD//////////wEAAAAAAAAA/////////////////////wMAAAD/////////////////////////////////////////////////////AwAAAP////////////////////8AAAAA/////////////////////wEAAAD///////////////8CAAAA////////////////////////////////AwAAAP////////////////////8AAAAA////////////////AgAAAAEAAAD/////////////////////////////////////////////////////AwAAAP////////////////////8AAAAA////////////////AgAAAAEAAAD/////////////////////////////////////////////////////AwAAAP////////////////////8AAAAA////////////////AgAAAAEAAAD/////////////////////////////////////////////////////AwAAAP////////////////////8AAAAA////////////////AgAAAAEAAAD/////////////////////////////////////////////////////AQAAAAIAAAD///////////////8AAAAA/////////////////////wMAAAD/////////////////////////////////////////////////////AQAAAAIAAAD///////////////8AAAAA/////////////////////wMAAAD/////////////////////////////////////////////////////AQAAAAIAAAD///////////////8AAAAA/////////////////////wMAAAD/////////////////////////////////////////////////////AQAAAAIAAAD///////////////8AAAAA/////////////////////wMAAAD///////////////////////////////8CAAAA////////////////AQAAAP////////////////////8AAAAA/////////////////////wMAAAD/////////////////////////////////////////////////////AwAAAP////////////////////8AAAAAAQAAAP//////////AgAAAP//////////////////////////////////////////////////////////AwAAAP///////////////wIAAAAAAAAAAQAAAP//////////////////////////////////////////////////////////////////////////AwAAAP///////////////wIAAAAAAAAAAQAAAP//////////////////////////////////////////////////////////////////////////AwAAAP///////////////wIAAAAAAAAAAQAAAP//////////////////////////////////////////////////////////////////////////AwAAAAEAAAD//////////wIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAgAAAAAAAAACAAAAAQAAAAEAAAACAAAAAgAAAAAAAAAFAAAABQAAAAAAAAACAAAAAgAAAAMAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAIAAAABAAAAAgAAAAIAAAACAAAAAAAAAAUAAAAGAAAAAAAAAAIAAAACAAAAAwAAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAIAAAAAAAAAAgAAAAEAAAADAAAAAgAAAAIAAAAAAAAABQAAAAcAAAAAAAAAAgAAAAIAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAgAAAAAAAAACAAAAAQAAAAQAAAACAAAAAgAAAAAAAAAFAAAACAAAAAAAAAACAAAAAgAAAAMAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAACAAAAAAAAAAIAAAABAAAAAAAAAAIAAAACAAAAAAAAAAUAAAAJAAAAAAAAAAIAAAACAAAAAwAAAAUAAAAAAAAAAAAAAAAAAAAAAAAACgAAAAIAAAACAAAAAAAAAAMAAAAOAAAAAgAAAAAAAAACAAAAAwAAAAAAAAAAAAAAAgAAAAIAAAADAAAABgAAAAAAAAAAAAAAAAAAAAAAAAALAAAAAgAAAAIAAAAAAAAAAwAAAAoAAAACAAAAAAAAAAIAAAADAAAAAQAAAAAAAAACAAAAAgAAAAMAAAAHAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAACAAAAAgAAAAAAAAADAAAACwAAAAIAAAAAAAAAAgAAAAMAAAACAAAAAAAAAAIAAAACAAAAAwAAAAgAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAIAAAACAAAAAAAAAAMAAAAMAAAAAgAAAAAAAAACAAAAAwAAAAMAAAAAAAAAAgAAAAIAAAADAAAACQAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAgAAAAIAAAAAAAAAAwAAAA0AAAACAAAAAAAAAAIAAAADAAAABAAAAAAAAAACAAAAAgAAAAMAAAAKAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAACAAAAAgAAAAAAAAADAAAABgAAAAIAAAAAAAAAAgAAAAMAAAAPAAAAAAAAAAIAAAACAAAAAwAAAAsAAAAAAAAAAAAAAAAAAAAAAAAABgAAAAIAAAACAAAAAAAAAAMAAAAHAAAAAgAAAAAAAAACAAAAAwAAABAAAAAAAAAAAgAAAAIAAAADAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAgAAAAIAAAAAAAAAAwAAAAgAAAACAAAAAAAAAAIAAAADAAAAEQAAAAAAAAACAAAAAgAAAAMAAAANAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAACAAAAAgAAAAAAAAADAAAACQAAAAIAAAAAAAAAAgAAAAMAAAASAAAAAAAAAAIAAAACAAAAAwAAAA4AAAAAAAAAAAAAAAAAAAAAAAAACQAAAAIAAAACAAAAAAAAAAMAAAAFAAAAAgAAAAAAAAACAAAAAwAAABMAAAAAAAAAAgAAAAIAAAADAAAADwAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAgAAAAAAAAACAAAAAQAAABMAAAACAAAAAgAAAAAAAAAFAAAACgAAAAAAAAACAAAAAgAAAAMAAAAQAAAAAAAAAAAAAAAAAAAAAAAAABEAAAACAAAAAAAAAAIAAAABAAAADwAAAAIAAAACAAAAAAAAAAUAAAALAAAAAAAAAAIAAAACAAAAAwAAABEAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAIAAAAAAAAAAgAAAAEAAAAQAAAAAgAAAAIAAAAAAAAABQAAAAwAAAAAAAAAAgAAAAIAAAADAAAAEgAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAgAAAAAAAAACAAAAAQAAABEAAAACAAAAAgAAAAAAAAAFAAAADQAAAAAAAAACAAAAAgAAAAMAAAATAAAAAAAAAAAAAAAAAAAAAAAAAA8AAAACAAAAAAAAAAIAAAABAAAAEgAAAAIAAAACAAAAAAAAAAUAAAAOAAAAAAAAAAIAAAACAAAAAwAAAAIAAAABAAAAAAAAAAEAAAACAAAAAAAAAAAAAAACAAAAAQAAAAAAAAABAAAAAgAAAAEAAAAAAAAAAgAAAAAAAAAFAAAABAAAAAAAAAABAAAABQAAAAAAAAAAAAAABQAAAAQAAAAAAAAAAQAAAAUAAAAEAAAAAAAAAAUAAAAAAAAAAgAAAAEAAAAAAAAAAQAAAAIAAAAAAAAAAAAAAAIAAAABAAAAAAAAAAEAAAACAAAAAQAAAAAAAAACAAAAAgAAAAAAAAABAAAAAAAAAAAAAAAFAAAABAAAAAAAAAABAAAABQAAAAAAAAAAAAAABQAAAAQAAAAAAAAAAQAAAAUAAAAEAAAAAAAAAAUAAAAFAAAAAAAAAAEAAAAAAAAAAAAAAMuhRbbsNlBBYqHW9OmHIkF9XBuqnS31QAK37uYhNMhAOSo3UUupm0DC+6pc6JxvQHV9eseEEEJAzURsCyqlFEB8BQ4NMJjnPyy3tBoS97o/xawXQznRjj89J2K2CZxhP6vX43RIIDQ/S8isgygEBz+LvFHQkmzaPjFFFO7wMq4+AADMLkTtjkIAAOgkJqxhQgAAU7B0MjRCAADwpBcVB0IAAACYP2HaQQAAAIn/Ja5BzczM4Eg6gUHNzMxMU7BTQTMzMzNfgCZBAAAAAEi3+UAAAAAAwGPNQDMzMzMzy6BAmpmZmZkxc0AzMzMzM/NFQDMzMzMzMxlAzczMzMzM7D+ygXSx2U6RQKimJOvQKnpA23hmONTHY0A/AGcxyudNQNb3K647mzZA+S56rrwWIUAm4kUQ+9UJQKre9hGzh/M/BLvoy9WG3T+LmqMf8VHGP2m3nYNV37A/gbFHcyeCmT+cBPWBckiDP61tZACjKW0/q2RbYVUYVj8uDypVyLNAP6jGS5cA5zBBwcqhBdCNGUEGEhQ/JVEDQT6WPnRbNO1AB/AWSJgT1kDfUWNCNLDAQNk+5C33OqlAchWL34QSk0DKvtDIrNV8QNF0G3kFzGVASSeWhBl6UED+/0mNGuk4QGjA/dm/1CJALPLPMql6DEDSHoDrwpP1P2jouzWST+A/egAAAAAAAABKAwAAAAAAAPoWAAAAAAAAyqAAAAAAAAB6ZQQAAAAAAErGHgAAAAAA+mvXAAAAAADK8+MFAAAAAHqqOykAAAAASqmhIAEAAAD6oGvkBwAAAMpm8T43AAAAes+ZuIIBAABKrDQMkwoAAPq1cFUFSgAAyvkUViUGAgAAAAAAAwAAAAYAAAACAAAABQAAAAEAAAAEAAAAAAAAAAAAAAAFAAAAAwAAAAEAAAAGAAAABAAAAAIAAAAAAAAAAAAAAP////8AAAAAAAAAAAAAAAAAAAAAAAAAAP////////////////////////////////////8AAAAA/////wAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAP////8AAAAAAAAAAAEAAAABAAAAAAAAAAAAAAD/////AAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAA/////wUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAP////8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/////////////////////////////////////AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/////////////////////////////////////wAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAUAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP////////////////////////////////////8AAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAABAAAAAAAAAAAAAAABAAAAAQAAAAEAAAAAAAAAAQAAAAAAAAAFAAAAAQAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAAAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEBAAAAAAABAAEAAAEBAAAAAAABAAAAAQAAAAEAAQAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAAAAAACAAAAAQAAAAMAAAAOAAAABgAAAAsAAAACAAAABwAAAAEAAAAYAAAABQAAAAoAAAABAAAABgAAAAAAAAAmAAAABwAAAAwAAAADAAAACAAAAAIAAAAxAAAACQAAAA4AAAAAAAAABQAAAAQAAAA6AAAACAAAAA0AAAAEAAAACQAAAAMAAAA/AAAACwAAAAYAAAAPAAAACgAAABAAAABIAAAADAAAAAcAAAAQAAAACwAAABEAAABTAAAACgAAAAUAAAATAAAADgAAAA8AAABhAAAADQAAAAgAAAARAAAADAAAABIAAABrAAAADgAAAAkAAAASAAAADQAAABMAAAB1AAAADwAAABMAAAARAAAAEgAAABAAAAAHAAAABwAAAAEAAAACAAAABAAAAAMAAAAAAAAAAAAAAAcAAAADAAAAAQAAAAIAAAAFAAAABAAAAAAAAAAAAAAAYWxnb3MuYwBfcG9seWZpbGxJbnRlcm5hbABhZGphY2VudEZhY2VEaXJbdG1wRmlqay5mYWNlXVtmaWprLmZhY2VdID09IEtJAGZhY2VpamsuYwBfZmFjZUlqa1BlbnRUb0dlb0JvdW5kYXJ5AGFkamFjZW50RmFjZURpcltjZW50ZXJJSksuZmFjZV1bZmFjZTJdID09IEtJAF9mYWNlSWprVG9HZW9Cb3VuZGFyeQBwb2x5Z29uLT5uZXh0ID09IE5VTEwAbGlua2VkR2VvLmMAYWRkTmV3TGlua2VkUG9seWdvbgBuZXh0ICE9IE5VTEwAbG9vcCAhPSBOVUxMAGFkZE5ld0xpbmtlZExvb3AAcG9seWdvbi0+Zmlyc3QgPT0gTlVMTABhZGRMaW5rZWRMb29wAGNvb3JkICE9IE5VTEwAYWRkTGlua2VkQ29vcmQAbG9vcC0+Zmlyc3QgPT0gTlVMTABpbm5lckxvb3BzICE9IE5VTEwAbm9ybWFsaXplTXVsdGlQb2x5Z29uAGJib3hlcyAhPSBOVUxMAGNhbmRpZGF0ZXMgIT0gTlVMTABmaW5kUG9seWdvbkZvckhvbGUAY2FuZGlkYXRlQkJveGVzICE9IE5VTEwAcmV2RGlyICE9IElOVkFMSURfRElHSVQAbG9jYWxpai5jAGgzVG9Mb2NhbElqawBiYXNlQ2VsbCAhPSBvcmlnaW5CYXNlQ2VsbAAhKG9yaWdpbk9uUGVudCAmJiBpbmRleE9uUGVudCkAcGVudGFnb25Sb3RhdGlvbnMgPj0gMABkaXJlY3Rpb25Sb3RhdGlvbnMgPj0gMABiYXNlQ2VsbCA9PSBvcmlnaW5CYXNlQ2VsbABiYXNlQ2VsbCAhPSBJTlZBTElEX0JBU0VfQ0VMTABsb2NhbElqa1RvSDMAIV9pc0Jhc2VDZWxsUGVudGFnb24oYmFzZUNlbGwpAGJhc2VDZWxsUm90YXRpb25zID49IDAAd2l0aGluUGVudGFnb25Sb3RhdGlvbnMgPj0gMABncmFwaC0+YnVja2V0cyAhPSBOVUxMAHZlcnRleEdyYXBoLmMAaW5pdFZlcnRleEdyYXBoAG5vZGUgIT0gTlVMTABhZGRWZXJ0ZXhOb2Rl";var d=24032;function y(ge){return ge}function D(ge){var Ee=/\b__Z[\w\d_]+/g;return ge.replace(Ee,function(tt){var pt=tt;return tt===pt?tt:pt+" ["+tt+"]"})}function U(){var ge=new Error;if(!ge.stack){try{throw new Error(0)}catch(Ee){ge=Ee}if(!ge.stack)return"(no stack trace available)"}return ge.stack.toString()}function Q(){var ge=U();return t.extraStackTrace&&(ge+=`
`+t.extraStackTrace()),D(ge)}function K(ge,Ee,tt,pt){Xe("Assertion failed: "+xe(ge)+", at: "+[Ee?xe(Ee):"unknown filename",tt,pt?xe(pt):"unknown function"])}function ie(){return ut.length}function Ae(ge,Ee,tt){Ke.set(Ke.subarray(Ee,Ee+tt),ge)}function fe(ge){return t.___errno_location&&(Ze[t.___errno_location()>>2]=ge),ge}function ye(ge){Xe("OOM")}function Le(ge){try{var Ee=new ArrayBuffer(ge);return Ee.byteLength!=ge?void 0:(new Int8Array(Ee).set(ut),ue(Ee),dt(Ee),1)}catch{}}function we(ge){var Ee=ie(),tt=16777216,pt=2147483648-tt;if(ge>pt)return!1;for(var n=16777216,ce=Math.max(Ee,n);ce<ge;)ce<=536870912?ce=et(2*ce,tt):ce=Math.min(et((3*ce+2147483648)/4,tt),pt);var Zt=Le(ce);return!!Zt}var Te=typeof atob=="function"?atob:function(ge){var Ee="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",tt="",pt,n,ce,Zt,Jt,ui,Vt,qt=0;ge=ge.replace(/[^A-Za-z0-9\+\/\=]/g,"");do Zt=Ee.indexOf(ge.charAt(qt++)),Jt=Ee.indexOf(ge.charAt(qt++)),ui=Ee.indexOf(ge.charAt(qt++)),Vt=Ee.indexOf(ge.charAt(qt++)),pt=Zt<<2|Jt>>4,n=(Jt&15)<<4|ui>>2,ce=(ui&3)<<6|Vt,tt=tt+String.fromCharCode(pt),ui!==64&&(tt=tt+String.fromCharCode(n)),Vt!==64&&(tt=tt+String.fromCharCode(ce));while(qt<ge.length);return tt};function Ce(ge){try{for(var Ee=Te(ge),tt=new Uint8Array(Ee.length),pt=0;pt<Ee.length;++pt)tt[pt]=Ee.charCodeAt(pt);return tt}catch{throw new Error("Converting base64 string to bytes failed.")}}function je(ge){if(gn(ge))return Ce(ge.slice(ir.length))}var Ne={Math,Int8Array,Int32Array,Uint8Array,Float32Array,Float64Array},Ue={a:Xe,b:j,c:J,d:K,e:fe,f:ie,g:Ae,h:we,i:ye,j:y,k:D,l:Le,m:U,n:Q,o:d,p:ei},de=function(ge,Ee,tt){"almost asm";var pt=new ge.Int8Array(tt),n=new ge.Int32Array(tt);new ge.Uint8Array(tt),new ge.Float32Array(tt);var ce=new ge.Float64Array(tt),Zt=Ee.p|0,Jt=ge.Math.floor,ui=ge.Math.abs,Vt=ge.Math.sqrt,qt=ge.Math.pow,Ei=ge.Math.cos,Ai=ge.Math.sin,pi=ge.Math.tan,Rt=ge.Math.acos,Yi=ge.Math.asin,Rn=ge.Math.atan,wn=ge.Math.atan2,pn=ge.Math.ceil,vr=ge.Math.imul,Mi=ge.Math.min,nr=ge.Math.clz32,fn=Ee.b,Pt=Ee.c,Fi=Ee.d,xt=Ee.e,nn=Ee.f,Cr=Ee.g,ys=Ee.h,Gr=Ee.i,Et=24048;function Hn(_){return pt=new Int8Array(_),n=new Int32Array(_),ce=new Float64Array(_),tt=_,!0}function ft(_){_=_|0;var S=0;return S=Et,Et=Et+_|0,Et=Et+15&-16,S|0}function gr(){return Et|0}function Xs(_){_=_|0,Et=_}function Ks(_,S){_=_|0,Et=_}function po(_){return _=_|0,(vr(_*3|0,_+1|0)|0)+1|0}function va(_,S,C,E){_=_|0,S=S|0,C=C|0,E=E|0;var H=0,W=0;go(_,S,C,E,0)|0&&(W=(vr(C*3|0,C+1|0)|0)+1|0,Wr(E|0,0,W<<3|0)|0,H=Io(W,4)|0,H&&(Is(_,S,C,E,H,W,0),zn(H)))}function $o(_,S,C,E,H){_=_|0,S=S|0,C=C|0,E=E|0,H=H|0;var W=0;if(go(_,S,C,E,H)|0){if(W=(vr(C*3|0,C+1|0)|0)+1|0,Wr(E|0,0,W<<3|0)|0,H|0){Wr(H|0,0,W<<2|0)|0,Is(_,S,C,E,H,W,0);return}H=Io(W,4)|0,H&&(Is(_,S,C,E,H,W,0),zn(H))}}function go(_,S,C,E,H){_=_|0,S=S|0,C=C|0,E=E|0,H=H|0;var W=0,Z=0,ae=0,Ie=0,$e=0,ot=0,Nt=0,wt=0,It=0;if(It=Et,Et=Et+16|0,wt=It,W=E,n[W>>2]=_,n[W+4>>2]=S,W=(H|0)!=0,W&&(n[H>>2]=0),Kr(_,S)|0)return wt=1,Et=It,wt|0;n[wt>>2]=0;e:do if((C|0)>=1)if(W)for($e=0,ot=1,Nt=1,Z=0,W=_;;){if(!(Z|$e)){if(W=bn(W,S,4,wt)|0,S=Pt()|0,(W|0)==0&(S|0)==0){W=2;break e}if(Kr(W,S)|0){W=1;break e}}if(W=bn(W,S,n[16+($e<<2)>>2]|0,wt)|0,S=Pt()|0,(W|0)==0&(S|0)==0){W=2;break e}if(_=E+(Nt<<3)|0,n[_>>2]=W,n[_+4>>2]=S,n[H+(Nt<<2)>>2]=ot,Z=Z+1|0,_=(Z|0)==(ot|0),ae=$e+1|0,Ie=(ae|0)==6,Kr(W,S)|0){W=1;break e}if(ot=ot+(Ie&_&1)|0,(ot|0)>(C|0)){W=0;break}else $e=_?Ie?0:ae:$e,Nt=Nt+1|0,Z=_?0:Z}else for($e=0,ot=1,Nt=1,Z=0,W=_;;){if(!(Z|$e)){if(W=bn(W,S,4,wt)|0,S=Pt()|0,(W|0)==0&(S|0)==0){W=2;break e}if(Kr(W,S)|0){W=1;break e}}if(W=bn(W,S,n[16+($e<<2)>>2]|0,wt)|0,S=Pt()|0,(W|0)==0&(S|0)==0){W=2;break e}if(_=E+(Nt<<3)|0,n[_>>2]=W,n[_+4>>2]=S,Z=Z+1|0,_=(Z|0)==(ot|0),ae=$e+1|0,Ie=(ae|0)==6,Kr(W,S)|0){W=1;break e}if(ot=ot+(Ie&_&1)|0,(ot|0)>(C|0)){W=0;break}else $e=_?Ie?0:ae:$e,Nt=Nt+1|0,Z=_?0:Z}else W=0;while(!1);return wt=W,Et=It,wt|0}function Is(_,S,C,E,H,W,Z){_=_|0,S=S|0,C=C|0,E=E|0,H=H|0,W=W|0,Z=Z|0;var ae=0,Ie=0,$e=0,ot=0,Nt=0,wt=0,It=0;if(Nt=Et,Et=Et+16|0,ot=Nt,(_|0)==0&(S|0)==0){Et=Nt;return}if(ae=Ca(_|0,S|0,W|0,((W|0)<0)<<31>>31|0)|0,Pt()|0,Ie=E+(ae<<3)|0,wt=Ie,It=n[wt>>2]|0,wt=n[wt+4>>2]|0,$e=(It|0)==(_|0)&(wt|0)==(S|0),!((It|0)==0&(wt|0)==0|$e))do ae=(ae+1|0)%(W|0)|0,Ie=E+(ae<<3)|0,It=Ie,wt=n[It>>2]|0,It=n[It+4>>2]|0,$e=(wt|0)==(_|0)&(It|0)==(S|0);while(!((wt|0)==0&(It|0)==0|$e));if(ae=H+(ae<<2)|0,$e&&(n[ae>>2]|0)<=(Z|0)){Et=Nt;return}if(It=Ie,n[It>>2]=_,n[It+4>>2]=S,n[ae>>2]=Z,(Z|0)>=(C|0)){Et=Nt;return}It=Z+1|0,n[ot>>2]=0,wt=bn(_,S,2,ot)|0,Is(wt,Pt()|0,C,E,H,W,It),n[ot>>2]=0,wt=bn(_,S,3,ot)|0,Is(wt,Pt()|0,C,E,H,W,It),n[ot>>2]=0,wt=bn(_,S,1,ot)|0,Is(wt,Pt()|0,C,E,H,W,It),n[ot>>2]=0,wt=bn(_,S,5,ot)|0,Is(wt,Pt()|0,C,E,H,W,It),n[ot>>2]=0,wt=bn(_,S,4,ot)|0,Is(wt,Pt()|0,C,E,H,W,It),n[ot>>2]=0,wt=bn(_,S,6,ot)|0,Is(wt,Pt()|0,C,E,H,W,It),Et=Nt}function bn(_,S,C,E){_=_|0,S=S|0,C=C|0,E=E|0;var H=0,W=0,Z=0,ae=0,Ie=0,$e=0,ot=0,Nt=0,wt=0,It=0;if((n[E>>2]|0)>0){H=0;do C=Ns(C)|0,H=H+1|0;while((H|0)<(n[E>>2]|0))}ae=ci(_|0,S|0,45)|0,Pt()|0,Ie=ae&127,W=Ss(_,S)|0,H=ci(_|0,S|0,52)|0,Pt()|0,H=H&15;e:do if(!H)Z=6;else for(;;){if(Nt=(15-H|0)*3|0,wt=ci(_|0,S|0,Nt|0)|0,Pt()|0,wt=wt&7,It=(zr(H)|0)==0,H=H+-1|0,ot=Ii(7,0,Nt|0)|0,S=S&~(Pt()|0),Nt=Ii(n[(It?464:48)+(wt*28|0)+(C<<2)>>2]|0,0,Nt|0)|0,$e=Pt()|0,C=n[(It?672:256)+(wt*28|0)+(C<<2)>>2]|0,_=Nt|_&~ot,S=$e|S,!C){C=0;break e}if(!H){Z=6;break}}while(!1);(Z|0)==6&&(It=n[880+(Ie*28|0)+(C<<2)>>2]|0,wt=Ii(It|0,0,45)|0,_=wt|_,S=Pt()|0|S&-1040385,C=n[4304+(Ie*28|0)+(C<<2)>>2]|0,(It&127|0)==127&&(It=Ii(n[880+(Ie*28|0)+20>>2]|0,0,45)|0,S=Pt()|0|S&-1040385,C=n[4304+(Ie*28|0)+20>>2]|0,_=ha(It|_,S)|0,S=Pt()|0,n[E>>2]=(n[E>>2]|0)+1)),Z=ci(_|0,S|0,45)|0,Pt()|0,Z=Z&127;e:do if(P(Z)|0){t:do if((Ss(_,S)|0)==1){if((Ie|0)!=(Z|0))if(_i(Z,n[7728+(Ie*28|0)>>2]|0)|0){_=br(_,S)|0,W=1,S=Pt()|0;break}else{_=ha(_,S)|0,W=1,S=Pt()|0;break}switch(W|0){case 5:{_=br(_,S)|0,S=Pt()|0,n[E>>2]=(n[E>>2]|0)+5,W=0;break t}case 3:{_=ha(_,S)|0,S=Pt()|0,n[E>>2]=(n[E>>2]|0)+1,W=0;break t}default:return wt=0,It=0,fn(wt|0),It|0}}else W=0;while(!1);if((C|0)>0){H=0;do _=ms(_,S)|0,S=Pt()|0,H=H+1|0;while((H|0)!=(C|0))}if((Ie|0)!=(Z|0)){if(!(re(Z)|0)){if((W|0)!=0|(Ss(_,S)|0)!=5)break;n[E>>2]=(n[E>>2]|0)+1;break}switch(ae&127){case 8:case 118:break e}(Ss(_,S)|0)!=3&&(n[E>>2]=(n[E>>2]|0)+1)}}else if((C|0)>0){H=0;do _=ha(_,S)|0,S=Pt()|0,H=H+1|0;while((H|0)!=(C|0))}while(!1);return n[E>>2]=((n[E>>2]|0)+C|0)%6|0,wt=S,It=_,fn(wt|0),It|0}function bs(_,S,C,E){_=_|0,S=S|0,C=C|0,E=E|0;var H=0,W=0,Z=0,ae=0,Ie=0,$e=0,ot=0,Nt=0;if(Nt=Et,Et=Et+16|0,ot=Nt,!C)return ot=E,n[ot>>2]=_,n[ot+4>>2]=S,ot=0,Et=Nt,ot|0;n[ot>>2]=0;e:do if(Kr(_,S)|0)_=1;else{if(W=(C|0)>0,W){H=0,$e=_;do{if($e=bn($e,S,4,ot)|0,S=Pt()|0,($e|0)==0&(S|0)==0){_=2;break e}if(H=H+1|0,Kr($e,S)|0){_=1;break e}}while((H|0)<(C|0));if(Ie=E,n[Ie>>2]=$e,n[Ie+4>>2]=S,Ie=C+-1|0,W){W=0,Z=1,H=$e,_=S;do{if(H=bn(H,_,2,ot)|0,_=Pt()|0,(H|0)==0&(_|0)==0){_=2;break e}if(ae=E+(Z<<3)|0,n[ae>>2]=H,n[ae+4>>2]=_,Z=Z+1|0,Kr(H,_)|0){_=1;break e}W=W+1|0}while((W|0)<(C|0));ae=0,W=Z;do{if(H=bn(H,_,3,ot)|0,_=Pt()|0,(H|0)==0&(_|0)==0){_=2;break e}if(Z=E+(W<<3)|0,n[Z>>2]=H,n[Z+4>>2]=_,W=W+1|0,Kr(H,_)|0){_=1;break e}ae=ae+1|0}while((ae|0)<(C|0));Z=0;do{if(H=bn(H,_,1,ot)|0,_=Pt()|0,(H|0)==0&(_|0)==0){_=2;break e}if(ae=E+(W<<3)|0,n[ae>>2]=H,n[ae+4>>2]=_,W=W+1|0,Kr(H,_)|0){_=1;break e}Z=Z+1|0}while((Z|0)<(C|0));Z=0;do{if(H=bn(H,_,5,ot)|0,_=Pt()|0,(H|0)==0&(_|0)==0){_=2;break e}if(ae=E+(W<<3)|0,n[ae>>2]=H,n[ae+4>>2]=_,W=W+1|0,Kr(H,_)|0){_=1;break e}Z=Z+1|0}while((Z|0)<(C|0));Z=0;do{if(H=bn(H,_,4,ot)|0,_=Pt()|0,(H|0)==0&(_|0)==0){_=2;break e}if(ae=E+(W<<3)|0,n[ae>>2]=H,n[ae+4>>2]=_,W=W+1|0,Kr(H,_)|0){_=1;break e}Z=Z+1|0}while((Z|0)<(C|0));for(Z=0;;){if(H=bn(H,_,6,ot)|0,_=Pt()|0,(H|0)==0&(_|0)==0){_=2;break e}if((Z|0)!=(Ie|0))if(ae=E+(W<<3)|0,n[ae>>2]=H,n[ae+4>>2]=_,!(Kr(H,_)|0))W=W+1|0;else{_=1;break e}if(Z=Z+1|0,(Z|0)>=(C|0)){Z=$e,W=S;break}}}else Z=$e,H=$e,W=S,_=S}else Z=E,n[Z>>2]=_,n[Z+4>>2]=S,Z=_,H=_,W=S,_=S;_=((Z|0)!=(H|0)|(W|0)!=(_|0))&1}while(!1);return ot=_,Et=Nt,ot|0}function Or(_,S){_=_|0,S=S|0;var C=0,E=0,H=0,W=0,Z=0,ae=0;if(W=Et,Et=Et+48|0,H=W+8|0,E=W,ae=_,Z=n[ae+4>>2]|0,C=E,n[C>>2]=n[ae>>2],n[C+4>>2]=Z,un(E,H),H=Pa(H,S)|0,S=n[E>>2]|0,E=n[_+8>>2]|0,(E|0)<=0)return ae=S,Z=(H|0)<(ae|0),ae=Z?ae:H,ae=ae+12|0,Et=W,ae|0;C=n[_+12>>2]|0,_=0;do S=(n[C+(_<<3)>>2]|0)+S|0,_=_+1|0;while((_|0)<(E|0));return ae=(H|0)<(S|0),ae=ae?S:H,ae=ae+12|0,Et=W,ae|0}function ya(_,S,C){_=_|0,S=S|0,C=C|0;var E=0,H=0,W=0,Z=0,ae=0,Ie=0;if(ae=Et,Et=Et+48|0,E=ae+8|0,H=ae,!($a(_,S,C)|0)){Et=ae;return}if(Ie=_,W=n[Ie+4>>2]|0,Z=H,n[Z>>2]=n[Ie>>2],n[Z+4>>2]=W,un(H,E),Z=Pa(E,S)|0,S=n[H>>2]|0,W=n[_+8>>2]|0,(W|0)>0){H=n[_+12>>2]|0,E=0;do S=(n[H+(E<<3)>>2]|0)+S|0,E=E+1|0;while((E|0)!=(W|0))}if(S=(Z|0)<(S|0)?S:Z,(S|0)<=-12){Et=ae;return}Ie=S+11|0,Wr(C|0,0,(((Ie|0)>0?Ie:0)<<3)+8|0)|0,Et=ae}function $a(_,S,C){_=_|0,S=S|0,C=C|0;var E=0,H=0,W=0,Z=0,ae=0,Ie=0,$e=0,ot=0,Nt=0,wt=0,It=0,R=0,s=0,g=0,I=0,M=0,F=0,q=0,A=0,l=0,f=0,m=0,b=0,T=0,z=0,N=0,X=0,te=0,ve=0,De=0;if(De=Et,Et=Et+112|0,N=De+80|0,Ie=De+72|0,X=De,te=De+56|0,$e=_+8|0,ve=da((n[$e>>2]<<5)+32|0)|0,ve||Fi(22848,22448,800,22456),Co(_,ve),W=_,E=n[W+4>>2]|0,ae=Ie,n[ae>>2]=n[W>>2],n[ae+4>>2]=E,un(Ie,N),ae=Pa(N,S)|0,E=n[Ie>>2]|0,W=n[$e>>2]|0,(W|0)>0){Z=n[_+12>>2]|0,H=0;do E=(n[Z+(H<<3)>>2]|0)+E|0,H=H+1|0;while((H|0)!=(W|0))}if(ae=(ae|0)<(E|0)?E:ae,z=ae+12|0,H=Io(z,8)|0,ot=Io(z,8)|0,n[N>>2]=0,b=_,T=n[b+4>>2]|0,E=Ie,n[E>>2]=n[b>>2],n[E+4>>2]=T,E=mo(Ie,z,S,N,H,ot)|0,E|0)return zn(H),zn(ot),zn(ve),ve=E,Et=De,ve|0;e:do if((n[$e>>2]|0)>0){for(W=_+12|0,E=0;Z=mo((n[W>>2]|0)+(E<<3)|0,z,S,N,H,ot)|0,E=E+1|0,!(Z|0);)if((E|0)>=(n[$e>>2]|0))break e;return zn(H),zn(ot),zn(ve),ve=Z,Et=De,ve|0}while(!1);(ae|0)>-12&&Wr(ot|0,0,((z|0)>1?z:1)<<3|0)|0;e:do if((n[N>>2]|0)>0){T=((z|0)<0)<<31>>31,q=H,A=ot,l=H,f=H,m=ot,b=H,E=H,g=H,I=ot,M=ot,F=ot,H=ot;t:for(;;){for(s=n[N>>2]|0,It=0,R=0,W=0;;){Z=X,ae=Z+56|0;do n[Z>>2]=0,Z=Z+4|0;while((Z|0)<(ae|0));if(S=q+(It<<3)|0,Ie=n[S>>2]|0,S=n[S+4>>2]|0,go(Ie,S,1,X,0)|0){Z=X,ae=Z+56|0;do n[Z>>2]=0,Z=Z+4|0;while((Z|0)<(ae|0));Z=Io(7,4)|0,Z|0&&(Is(Ie,S,1,X,Z,7,0),zn(Z))}wt=0;do{Nt=X+(wt<<3)|0,ot=n[Nt>>2]|0,Nt=n[Nt+4>>2]|0;i:do if(!((ot|0)==0&(Nt|0)==0)){if(Ie=Ca(ot|0,Nt|0,z|0,T|0)|0,Pt()|0,Z=C+(Ie<<3)|0,ae=Z,S=n[ae>>2]|0,ae=n[ae+4>>2]|0,!((S|0)==0&(ae|0)==0))for($e=0;;){if(($e|0)>(z|0))break t;if((S|0)==(ot|0)&(ae|0)==(Nt|0))break i;if(Ie=(Ie+1|0)%(z|0)|0,Z=C+(Ie<<3)|0,ae=Z,S=n[ae>>2]|0,ae=n[ae+4>>2]|0,(S|0)==0&(ae|0)==0)break;$e=$e+1|0}(ot|0)==0&(Nt|0)==0||(qs(ot,Nt,te),Eo(_,ve,te)|0&&($e=Z,n[$e>>2]=ot,n[$e+4>>2]=Nt,$e=A+(W<<3)|0,n[$e>>2]=ot,n[$e+4>>2]=Nt,W=W+1|0))}while(!1);wt=wt+1|0}while(wt>>>0<7);if(R=R+1|0,(R|0)>=(s|0))break;It=It+1|0}if((s|0)>0&&Wr(l|0,0,s<<3|0)|0,n[N>>2]=W,(W|0)>0)ot=H,Nt=F,wt=b,It=M,R=I,s=A,H=g,F=E,M=f,I=l,g=ot,E=Nt,b=m,m=wt,f=It,l=R,A=q,q=s;else break e}return zn(f),zn(m),zn(ve),ve=-1,Et=De,ve|0}else E=ot;while(!1);return zn(ve),zn(H),zn(E),ve=0,Et=De,ve|0}function mo(_,S,C,E,H,W){_=_|0,S=S|0,C=C|0,E=E|0,H=H|0,W=W|0;var Z=0,ae=0,Ie=0,$e=0,ot=0,Nt=0,wt=0,It=0,R=0,s=0,g=0,I=0,M=0,F=0,q=0,A=0,l=0,f=0,m=0,b=0,T=0,z=0,N=0;if(T=Et,Et=Et+48|0,l=T+32|0,f=T+16|0,m=T,Z=n[_>>2]|0,(Z|0)<=0)return b=0,Et=T,b|0;I=_+4|0,M=l+8|0,F=f+8|0,q=m+8|0,A=((S|0)<0)<<31>>31,g=0;e:for(;;){ae=n[I>>2]|0,R=ae+(g<<4)|0,n[l>>2]=n[R>>2],n[l+4>>2]=n[R+4>>2],n[l+8>>2]=n[R+8>>2],n[l+12>>2]=n[R+12>>2],(g|0)==(Z+-1|0)?(n[f>>2]=n[ae>>2],n[f+4>>2]=n[ae+4>>2],n[f+8>>2]=n[ae+8>>2],n[f+12>>2]=n[ae+12>>2]):(R=ae+(g+1<<4)|0,n[f>>2]=n[R>>2],n[f+4>>2]=n[R+4>>2],n[f+8>>2]=n[R+8>>2],n[f+12>>2]=n[R+12>>2]),R=Da(l,f,C)|0;t:do if((R|0)>0){s=+(R|0),It=0;i:for(;;){N=+(R-It|0),z=+(It|0),ce[m>>3]=+ce[l>>3]*N/s+ +ce[f>>3]*z/s,ce[q>>3]=+ce[M>>3]*N/s+ +ce[F>>3]*z/s,Nt=pA(m,C)|0,wt=Pt()|0,ae=Ca(Nt|0,wt|0,S|0,A|0)|0,Pt()|0,Z=W+(ae<<3)|0,Ie=Z,$e=n[Ie>>2]|0,Ie=n[Ie+4>>2]|0;n:do if(($e|0)==0&(Ie|0)==0)b=14;else for(ot=0;;){if((ot|0)>(S|0)){Z=1;break n}if(($e|0)==(Nt|0)&(Ie|0)==(wt|0)){Z=7;break n}if(ae=(ae+1|0)%(S|0)|0,Z=W+(ae<<3)|0,Ie=Z,$e=n[Ie>>2]|0,Ie=n[Ie+4>>2]|0,($e|0)==0&(Ie|0)==0){b=14;break}else ot=ot+1|0}while(!1);switch((b|0)==14&&(b=0,(Nt|0)==0&(wt|0)==0?Z=7:(n[Z>>2]=Nt,n[Z+4>>2]=wt,Z=n[E>>2]|0,ot=H+(Z<<3)|0,n[ot>>2]=Nt,n[ot+4>>2]=wt,n[E>>2]=Z+1,Z=0)),Z&7){case 7:case 0:break;default:break i}if(It=It+1|0,(R|0)<=(It|0)){b=8;break t}}if(Z|0){Z=-1,b=20;break e}}else b=8;while(!1);if((b|0)==8&&(b=0),g=g+1|0,Z=n[_>>2]|0,(g|0)>=(Z|0)){Z=0,b=20;break}}return(b|0)==20?(Et=T,Z|0):0}function ra(_,S,C){_=_|0,S=S|0,C=C|0;var E=0,H=0,W=0,Z=0,ae=0,Ie=0,$e=0;if($e=Et,Et=Et+176|0,Ie=$e,(S|0)<1){HA(C,0,0),Et=$e;return}Z=_,Z=ci(n[Z>>2]|0,n[Z+4>>2]|0,52)|0,Pt()|0,HA(C,(S|0)>6?S:6,Z&15),Z=0;do{if(E=_+(Z<<3)|0,so(n[E>>2]|0,n[E+4>>2]|0,Ie),E=n[Ie>>2]|0,(E|0)>0){ae=0;do W=Ie+8+(ae<<4)|0,ae=ae+1|0,E=Ie+8+(((ae|0)%(E|0)|0)<<4)|0,H=dl(C,E,W)|0,H?fl(C,H)|0:iu(C,W,E)|0,E=n[Ie>>2]|0;while((ae|0)<(E|0))}Z=Z+1|0}while((Z|0)!=(S|0));Et=$e}function sa(_,S,C){_=_|0,S=S|0,C=C|0;var E=0,H=0,W=0,Z=0;if(W=Et,Et=Et+32|0,E=W,H=W+16|0,ra(_,S,H),n[C>>2]=0,n[C+4>>2]=0,n[C+8>>2]=0,_=Go(H)|0,!_){Bn(C)|0,la(H),Et=W;return}do{S=ln(C)|0;do Pn(S,_)|0,Z=_+16|0,n[E>>2]=n[Z>>2],n[E+4>>2]=n[Z+4>>2],n[E+8>>2]=n[Z+8>>2],n[E+12>>2]=n[Z+12>>2],fl(H,_)|0,_=nu(H,E)|0;while(_|0);_=Go(H)|0}while(_|0);Bn(C)|0,la(H),Et=W}function P(_){return _=_|0,n[7728+(_*28|0)+16>>2]|0}function re(_){return _=_|0,(_|0)==4|(_|0)==117|0}function Re(_){return _=_|0,n[11152+((n[_>>2]|0)*216|0)+((n[_+4>>2]|0)*72|0)+((n[_+8>>2]|0)*24|0)+(n[_+12>>2]<<3)>>2]|0}function at(_){return _=_|0,n[11152+((n[_>>2]|0)*216|0)+((n[_+4>>2]|0)*72|0)+((n[_+8>>2]|0)*24|0)+(n[_+12>>2]<<3)+4>>2]|0}function kt(_,S){_=_|0,S=S|0,_=7728+(_*28|0)|0,n[S>>2]=n[_>>2],n[S+4>>2]=n[_+4>>2],n[S+8>>2]=n[_+8>>2],n[S+12>>2]=n[_+12>>2]}function ri(_,S){_=_|0,S=S|0;var C=0,E=0;if(S>>>0>20)return S=-1,S|0;do if((n[11152+(S*216|0)>>2]|0)!=(_|0))if((n[11152+(S*216|0)+8>>2]|0)!=(_|0))if((n[11152+(S*216|0)+16>>2]|0)!=(_|0))if((n[11152+(S*216|0)+24>>2]|0)!=(_|0))if((n[11152+(S*216|0)+32>>2]|0)!=(_|0))if((n[11152+(S*216|0)+40>>2]|0)!=(_|0))if((n[11152+(S*216|0)+48>>2]|0)!=(_|0))if((n[11152+(S*216|0)+56>>2]|0)!=(_|0))if((n[11152+(S*216|0)+64>>2]|0)!=(_|0))if((n[11152+(S*216|0)+72>>2]|0)!=(_|0))if((n[11152+(S*216|0)+80>>2]|0)!=(_|0))if((n[11152+(S*216|0)+88>>2]|0)!=(_|0))if((n[11152+(S*216|0)+96>>2]|0)!=(_|0))if((n[11152+(S*216|0)+104>>2]|0)!=(_|0))if((n[11152+(S*216|0)+112>>2]|0)!=(_|0))if((n[11152+(S*216|0)+120>>2]|0)!=(_|0))if((n[11152+(S*216|0)+128>>2]|0)!=(_|0))if((n[11152+(S*216|0)+136>>2]|0)==(_|0))_=2,C=1,E=2;else{if((n[11152+(S*216|0)+144>>2]|0)==(_|0)){_=0,C=2,E=0;break}if((n[11152+(S*216|0)+152>>2]|0)==(_|0)){_=0,C=2,E=1;break}if((n[11152+(S*216|0)+160>>2]|0)==(_|0)){_=0,C=2,E=2;break}if((n[11152+(S*216|0)+168>>2]|0)==(_|0)){_=1,C=2,E=0;break}if((n[11152+(S*216|0)+176>>2]|0)==(_|0)){_=1,C=2,E=1;break}if((n[11152+(S*216|0)+184>>2]|0)==(_|0)){_=1,C=2,E=2;break}if((n[11152+(S*216|0)+192>>2]|0)==(_|0)){_=2,C=2,E=0;break}if((n[11152+(S*216|0)+200>>2]|0)==(_|0)){_=2,C=2,E=1;break}if((n[11152+(S*216|0)+208>>2]|0)==(_|0)){_=2,C=2,E=2;break}else _=-1;return _|0}else _=2,C=1,E=1;else _=2,C=1,E=0;else _=1,C=1,E=2;else _=1,C=1,E=1;else _=1,C=1,E=0;else _=0,C=1,E=2;else _=0,C=1,E=1;else _=0,C=1,E=0;else _=2,C=0,E=2;else _=2,C=0,E=1;else _=2,C=0,E=0;else _=1,C=0,E=2;else _=1,C=0,E=1;else _=1,C=0,E=0;else _=0,C=0,E=2;else _=0,C=0,E=1;else _=0,C=0,E=0;while(!1);return S=n[11152+(S*216|0)+(C*72|0)+(_*24|0)+(E<<3)+4>>2]|0,S|0}function _i(_,S){return _=_|0,S=S|0,(n[7728+(_*28|0)+20>>2]|0)==(S|0)?(S=1,S|0):(S=(n[7728+(_*28|0)+24>>2]|0)==(S|0),S|0)}function Qi(_,S){return _=_|0,S=S|0,n[880+(_*28|0)+(S<<2)>>2]|0}function Xi(_,S){return _=_|0,S=S|0,(n[880+(_*28|0)>>2]|0)==(S|0)?(S=0,S|0):(n[880+(_*28|0)+4>>2]|0)==(S|0)?(S=1,S|0):(n[880+(_*28|0)+8>>2]|0)==(S|0)?(S=2,S|0):(n[880+(_*28|0)+12>>2]|0)==(S|0)?(S=3,S|0):(n[880+(_*28|0)+16>>2]|0)==(S|0)?(S=4,S|0):(n[880+(_*28|0)+20>>2]|0)==(S|0)?(S=5,S|0):((n[880+(_*28|0)+24>>2]|0)==(S|0)?6:7)|0}function Nn(){return 122}function qn(_){_=_|0;var S=0,C=0,E=0;S=0;do Ii(S|0,0,45)|0,E=Pt()|0|134225919,C=_+(S<<3)|0,n[C>>2]=-1,n[C+4>>2]=E,S=S+1|0;while((S|0)!=122)}function yr(_){return _=_|0,+ce[_+16>>3]<+ce[_+24>>3]|0}function Ma(_,S){_=_|0,S=S|0;var C=0,E=0,H=0;return C=+ce[S>>3],!(C>=+ce[_+8>>3])||!(C<=+ce[_>>3])?(S=0,S|0):(E=+ce[_+16>>3],C=+ce[_+24>>3],H=+ce[S+8>>3],S=H>=C,_=H<=E&1,E<C?S&&(_=1):S||(_=0),S=(_|0)!=0,S|0)}function Pa(_,S){_=_|0,S=S|0;var C=0,E=0,H=0,W=0,Z=0,ae=0,Ie=0,$e=0;Z=Et,Et=Et+288|0,C=Z+264|0,E=Z+96|0,H=Z,W=H,ae=W+96|0;do n[W>>2]=0,W=W+4|0;while((W|0)<(ae|0));return nA(S,H),W=H,ae=n[W>>2]|0,W=n[W+4>>2]|0,qs(ae,W,C),so(ae,W,E),Ie=+gs(C,E+8|0),ce[C>>3]=+ce[_>>3],W=C+8|0,ce[W>>3]=+ce[_+16>>3],ce[E>>3]=+ce[_+8>>3],ae=E+8|0,ce[ae>>3]=+ce[_+24>>3],$e=+gs(C,E),ae=~~+pn(+($e*$e/+Ho(+ +ui(+((+ce[W>>3]-+ce[ae>>3])/(+ce[C>>3]-+ce[E>>3]))),3)/(Ie*(Ie*2.59807621135)*.8))),Et=Z,(ae|0?ae:1)|0}function Da(_,S,C){_=_|0,S=S|0,C=C|0;var E=0,H=0,W=0,Z=0,ae=0,Ie=0,$e=0;ae=Et,Et=Et+288|0,E=ae+264|0,H=ae+96|0,W=ae,Z=W,Ie=Z+96|0;do n[Z>>2]=0,Z=Z+4|0;while((Z|0)<(Ie|0));return nA(C,W),Ie=W,Z=n[Ie>>2]|0,Ie=n[Ie+4>>2]|0,qs(Z,Ie,E),so(Z,Ie,H),$e=+gs(E,H+8|0),Ie=~~+pn(+(+gs(_,S)/($e*2))),Et=ae,(Ie|0?Ie:1)|0}function _o(_,S,C,E){_=_|0,S=S|0,C=C|0,E=E|0,n[_>>2]=S,n[_+4>>2]=C,n[_+8>>2]=E}function or(_,S){_=_|0,S=S|0;var C=0,E=0,H=0,W=0,Z=0,ae=0,Ie=0,$e=0,ot=0,Nt=0,wt=0;Nt=S+8|0,n[Nt>>2]=0,Ie=+ce[_>>3],Z=+ui(+Ie),$e=+ce[_+8>>3],ae=+ui(+$e)/.8660254037844386,Z=Z+ae*.5,C=~~Z,_=~~ae,Z=Z-+(C|0),ae=ae-+(_|0);do if(Z<.5)if(Z<.3333333333333333)if(n[S>>2]=C,ae<(Z+1)*.5){n[S+4>>2]=_;break}else{_=_+1|0,n[S+4>>2]=_;break}else if(wt=1-Z,_=(!(ae<wt)&1)+_|0,n[S+4>>2]=_,wt<=ae&ae<Z*2){C=C+1|0,n[S>>2]=C;break}else{n[S>>2]=C;break}else{if(!(Z<.6666666666666666))if(C=C+1|0,n[S>>2]=C,ae<Z*.5){n[S+4>>2]=_;break}else{_=_+1|0,n[S+4>>2]=_;break}if(ae<1-Z){if(n[S+4>>2]=_,Z*2+-1<ae){n[S>>2]=C;break}}else _=_+1|0,n[S+4>>2]=_;C=C+1|0,n[S>>2]=C}while(!1);do if(Ie<0)if(_&1){ot=(_+1|0)/2|0,ot=sA(C|0,((C|0)<0)<<31>>31|0,ot|0,((ot|0)<0)<<31>>31|0)|0,C=~~(+(C|0)-((+(ot>>>0)+4294967296*+(Pt()|0))*2+1)),n[S>>2]=C;break}else{ot=(_|0)/2|0,ot=sA(C|0,((C|0)<0)<<31>>31|0,ot|0,((ot|0)<0)<<31>>31|0)|0,C=~~(+(C|0)-(+(ot>>>0)+4294967296*+(Pt()|0))*2),n[S>>2]=C;break}while(!1);ot=S+4|0,$e<0&&(C=C-((_<<1|1|0)/2|0)|0,n[S>>2]=C,_=0-_|0,n[ot>>2]=_),E=_-C|0,(C|0)<0?(H=0-C|0,n[ot>>2]=E,n[Nt>>2]=H,n[S>>2]=0,_=E,C=0):H=0,(_|0)<0&&(C=C-_|0,n[S>>2]=C,H=H-_|0,n[Nt>>2]=H,n[ot>>2]=0,_=0),W=C-H|0,E=_-H|0,(H|0)<0&&(n[S>>2]=W,n[ot>>2]=E,n[Nt>>2]=0,_=E,C=W,H=0),E=(_|0)<(C|0)?_:C,E=(H|0)<(E|0)?H:E,!((E|0)<=0)&&(n[S>>2]=C-E,n[ot>>2]=_-E,n[Nt>>2]=H-E)}function Ln(_){_=_|0;var S=0,C=0,E=0,H=0,W=0,Z=0;S=n[_>>2]|0,Z=_+4|0,C=n[Z>>2]|0,(S|0)<0&&(C=C-S|0,n[Z>>2]=C,W=_+8|0,n[W>>2]=(n[W>>2]|0)-S,n[_>>2]=0,S=0),(C|0)<0?(S=S-C|0,n[_>>2]=S,W=_+8|0,H=(n[W>>2]|0)-C|0,n[W>>2]=H,n[Z>>2]=0,C=0):(H=_+8|0,W=H,H=n[H>>2]|0),(H|0)<0&&(S=S-H|0,n[_>>2]=S,C=C-H|0,n[Z>>2]=C,n[W>>2]=0,H=0),E=(C|0)<(S|0)?C:S,E=(H|0)<(E|0)?H:E,!((E|0)<=0)&&(n[_>>2]=S-E,n[Z>>2]=C-E,n[W>>2]=H-E)}function jn(_,S){_=_|0,S=S|0;var C=0,E=0;E=n[_+8>>2]|0,C=+((n[_+4>>2]|0)-E|0),ce[S>>3]=+((n[_>>2]|0)-E|0)-C*.5,ce[S+8>>3]=C*.8660254037844386}function Er(_,S,C){_=_|0,S=S|0,C=C|0,n[C>>2]=(n[S>>2]|0)+(n[_>>2]|0),n[C+4>>2]=(n[S+4>>2]|0)+(n[_+4>>2]|0),n[C+8>>2]=(n[S+8>>2]|0)+(n[_+8>>2]|0)}function xs(_,S,C){_=_|0,S=S|0,C=C|0,n[C>>2]=(n[_>>2]|0)-(n[S>>2]|0),n[C+4>>2]=(n[_+4>>2]|0)-(n[S+4>>2]|0),n[C+8>>2]=(n[_+8>>2]|0)-(n[S+8>>2]|0)}function Pr(_,S){_=_|0,S=S|0;var C=0,E=0;C=vr(n[_>>2]|0,S)|0,n[_>>2]=C,C=_+4|0,E=vr(n[C>>2]|0,S)|0,n[C>>2]=E,_=_+8|0,S=vr(n[_>>2]|0,S)|0,n[_>>2]=S}function eA(_){_=_|0;var S=0,C=0,E=0,H=0,W=0,Z=0,ae=0;Z=n[_>>2]|0,ae=(Z|0)<0,E=(n[_+4>>2]|0)-(ae?Z:0)|0,W=(E|0)<0,H=(W?0-E|0:0)+((n[_+8>>2]|0)-(ae?Z:0))|0,C=(H|0)<0,_=C?0:H,S=(W?0:E)-(C?H:0)|0,H=(ae?0:Z)-(W?E:0)-(C?H:0)|0,C=(S|0)<(H|0)?S:H,C=(_|0)<(C|0)?_:C,E=(C|0)>0,_=_-(E?C:0)|0,S=S-(E?C:0)|0;e:do switch(H-(E?C:0)|0){case 0:switch(S|0){case 0:return ae=_|0?(_|0)==1?1:7:0,ae|0;case 1:return ae=_|0?(_|0)==1?3:7:2,ae|0;default:break e}case 1:switch(S|0){case 0:return ae=_|0?(_|0)==1?5:7:4,ae|0;case 1:{if(!_)_=6;else break e;return _|0}default:break e}}while(!1);return ae=7,ae|0}function EA(_){_=_|0;var S=0,C=0,E=0,H=0,W=0,Z=0,ae=0;Z=_+8|0,C=n[Z>>2]|0,S=(n[_>>2]|0)-C|0,ae=_+4|0,C=(n[ae>>2]|0)-C|0,E=Jr(+((S*3|0)-C|0)/7)|0,n[_>>2]=E,S=Jr(+((C<<1)+S|0)/7)|0,n[ae>>2]=S,n[Z>>2]=0,C=S-E|0,(E|0)<0?(W=0-E|0,n[ae>>2]=C,n[Z>>2]=W,n[_>>2]=0,S=C,E=0,C=W):C=0,(S|0)<0&&(E=E-S|0,n[_>>2]=E,C=C-S|0,n[Z>>2]=C,n[ae>>2]=0,S=0),W=E-C|0,H=S-C|0,(C|0)<0?(n[_>>2]=W,n[ae>>2]=H,n[Z>>2]=0,S=H,H=W,C=0):H=E,E=(S|0)<(H|0)?S:H,E=(C|0)<(E|0)?C:E,!((E|0)<=0)&&(n[_>>2]=H-E,n[ae>>2]=S-E,n[Z>>2]=C-E)}function eo(_){_=_|0;var S=0,C=0,E=0,H=0,W=0,Z=0,ae=0;Z=_+8|0,C=n[Z>>2]|0,S=(n[_>>2]|0)-C|0,ae=_+4|0,C=(n[ae>>2]|0)-C|0,E=Jr(+((S<<1)+C|0)/7)|0,n[_>>2]=E,S=Jr(+((C*3|0)-S|0)/7)|0,n[ae>>2]=S,n[Z>>2]=0,C=S-E|0,(E|0)<0?(W=0-E|0,n[ae>>2]=C,n[Z>>2]=W,n[_>>2]=0,S=C,E=0,C=W):C=0,(S|0)<0&&(E=E-S|0,n[_>>2]=E,C=C-S|0,n[Z>>2]=C,n[ae>>2]=0,S=0),W=E-C|0,H=S-C|0,(C|0)<0?(n[_>>2]=W,n[ae>>2]=H,n[Z>>2]=0,S=H,H=W,C=0):H=E,E=(S|0)<(H|0)?S:H,E=(C|0)<(E|0)?C:E,!((E|0)<=0)&&(n[_>>2]=H-E,n[ae>>2]=S-E,n[Z>>2]=C-E)}function Oo(_){_=_|0;var S=0,C=0,E=0,H=0,W=0,Z=0,ae=0;S=n[_>>2]|0,Z=_+4|0,C=n[Z>>2]|0,ae=_+8|0,E=n[ae>>2]|0,H=C+(S*3|0)|0,n[_>>2]=H,C=E+(C*3|0)|0,n[Z>>2]=C,S=(E*3|0)+S|0,n[ae>>2]=S,E=C-H|0,(H|0)<0?(S=S-H|0,n[Z>>2]=E,n[ae>>2]=S,n[_>>2]=0,C=E,E=0):E=H,(C|0)<0&&(E=E-C|0,n[_>>2]=E,S=S-C|0,n[ae>>2]=S,n[Z>>2]=0,C=0),W=E-S|0,H=C-S|0,(S|0)<0?(n[_>>2]=W,n[Z>>2]=H,n[ae>>2]=0,E=W,S=0):H=C,C=(H|0)<(E|0)?H:E,C=(S|0)<(C|0)?S:C,!((C|0)<=0)&&(n[_>>2]=E-C,n[Z>>2]=H-C,n[ae>>2]=S-C)}function ls(_){_=_|0;var S=0,C=0,E=0,H=0,W=0,Z=0,ae=0;H=n[_>>2]|0,Z=_+4|0,S=n[Z>>2]|0,ae=_+8|0,C=n[ae>>2]|0,E=(S*3|0)+H|0,H=C+(H*3|0)|0,n[_>>2]=H,n[Z>>2]=E,S=(C*3|0)+S|0,n[ae>>2]=S,C=E-H|0,(H|0)<0?(S=S-H|0,n[Z>>2]=C,n[ae>>2]=S,n[_>>2]=0,H=0):C=E,(C|0)<0&&(H=H-C|0,n[_>>2]=H,S=S-C|0,n[ae>>2]=S,n[Z>>2]=0,C=0),W=H-S|0,E=C-S|0,(S|0)<0?(n[_>>2]=W,n[Z>>2]=E,n[ae>>2]=0,H=W,S=0):E=C,C=(E|0)<(H|0)?E:H,C=(S|0)<(C|0)?S:C,!((C|0)<=0)&&(n[_>>2]=H-C,n[Z>>2]=E-C,n[ae>>2]=S-C)}function fA(_,S){_=_|0,S=S|0;var C=0,E=0,H=0,W=0,Z=0,ae=0;(S+-1|0)>>>0>=6||(H=(n[15472+(S*12|0)>>2]|0)+(n[_>>2]|0)|0,n[_>>2]=H,ae=_+4|0,E=(n[15472+(S*12|0)+4>>2]|0)+(n[ae>>2]|0)|0,n[ae>>2]=E,Z=_+8|0,S=(n[15472+(S*12|0)+8>>2]|0)+(n[Z>>2]|0)|0,n[Z>>2]=S,C=E-H|0,(H|0)<0?(S=S-H|0,n[ae>>2]=C,n[Z>>2]=S,n[_>>2]=0,E=0):(C=E,E=H),(C|0)<0&&(E=E-C|0,n[_>>2]=E,S=S-C|0,n[Z>>2]=S,n[ae>>2]=0,C=0),W=E-S|0,H=C-S|0,(S|0)<0?(n[_>>2]=W,n[ae>>2]=H,n[Z>>2]=0,E=W,S=0):H=C,C=(H|0)<(E|0)?H:E,C=(S|0)<(C|0)?S:C,!((C|0)<=0)&&(n[_>>2]=E-C,n[ae>>2]=H-C,n[Z>>2]=S-C))}function Ga(_){_=_|0;var S=0,C=0,E=0,H=0,W=0,Z=0,ae=0;H=n[_>>2]|0,Z=_+4|0,S=n[Z>>2]|0,ae=_+8|0,C=n[ae>>2]|0,E=S+H|0,H=C+H|0,n[_>>2]=H,n[Z>>2]=E,S=C+S|0,n[ae>>2]=S,C=E-H|0,(H|0)<0?(S=S-H|0,n[Z>>2]=C,n[ae>>2]=S,n[_>>2]=0,E=0):(C=E,E=H),(C|0)<0&&(E=E-C|0,n[_>>2]=E,S=S-C|0,n[ae>>2]=S,n[Z>>2]=0,C=0),W=E-S|0,H=C-S|0,(S|0)<0?(n[_>>2]=W,n[Z>>2]=H,n[ae>>2]=0,E=W,S=0):H=C,C=(H|0)<(E|0)?H:E,C=(S|0)<(C|0)?S:C,!((C|0)<=0)&&(n[_>>2]=E-C,n[Z>>2]=H-C,n[ae>>2]=S-C)}function vo(_){_=_|0;var S=0,C=0,E=0,H=0,W=0,Z=0,ae=0;S=n[_>>2]|0,Z=_+4|0,E=n[Z>>2]|0,ae=_+8|0,C=n[ae>>2]|0,H=E+S|0,n[_>>2]=H,E=C+E|0,n[Z>>2]=E,S=C+S|0,n[ae>>2]=S,C=E-H|0,(H|0)<0?(S=S-H|0,n[Z>>2]=C,n[ae>>2]=S,n[_>>2]=0,E=0):(C=E,E=H),(C|0)<0&&(E=E-C|0,n[_>>2]=E,S=S-C|0,n[ae>>2]=S,n[Z>>2]=0,C=0),W=E-S|0,H=C-S|0,(S|0)<0?(n[_>>2]=W,n[Z>>2]=H,n[ae>>2]=0,E=W,S=0):H=C,C=(H|0)<(E|0)?H:E,C=(S|0)<(C|0)?S:C,!((C|0)<=0)&&(n[_>>2]=E-C,n[Z>>2]=H-C,n[ae>>2]=S-C)}function Ns(_){switch(_=_|0,_|0){case 1:{_=5;break}case 5:{_=4;break}case 4:{_=6;break}case 6:{_=2;break}case 2:{_=3;break}case 3:{_=1;break}}return _|0}function Ts(_){switch(_=_|0,_|0){case 1:{_=3;break}case 3:{_=2;break}case 2:{_=6;break}case 6:{_=4;break}case 4:{_=5;break}case 5:{_=1;break}}return _|0}function tA(_){_=_|0;var S=0,C=0,E=0,H=0,W=0,Z=0,ae=0;S=n[_>>2]|0,Z=_+4|0,C=n[Z>>2]|0,ae=_+8|0,E=n[ae>>2]|0,H=C+(S<<1)|0,n[_>>2]=H,C=E+(C<<1)|0,n[Z>>2]=C,S=(E<<1)+S|0,n[ae>>2]=S,E=C-H|0,(H|0)<0?(S=S-H|0,n[Z>>2]=E,n[ae>>2]=S,n[_>>2]=0,C=E,E=0):E=H,(C|0)<0&&(E=E-C|0,n[_>>2]=E,S=S-C|0,n[ae>>2]=S,n[Z>>2]=0,C=0),W=E-S|0,H=C-S|0,(S|0)<0?(n[_>>2]=W,n[Z>>2]=H,n[ae>>2]=0,E=W,S=0):H=C,C=(H|0)<(E|0)?H:E,C=(S|0)<(C|0)?S:C,!((C|0)<=0)&&(n[_>>2]=E-C,n[Z>>2]=H-C,n[ae>>2]=S-C)}function aa(_){_=_|0;var S=0,C=0,E=0,H=0,W=0,Z=0,ae=0;H=n[_>>2]|0,Z=_+4|0,S=n[Z>>2]|0,ae=_+8|0,C=n[ae>>2]|0,E=(S<<1)+H|0,H=C+(H<<1)|0,n[_>>2]=H,n[Z>>2]=E,S=(C<<1)+S|0,n[ae>>2]=S,C=E-H|0,(H|0)<0?(S=S-H|0,n[Z>>2]=C,n[ae>>2]=S,n[_>>2]=0,H=0):C=E,(C|0)<0&&(H=H-C|0,n[_>>2]=H,S=S-C|0,n[ae>>2]=S,n[Z>>2]=0,C=0),W=H-S|0,E=C-S|0,(S|0)<0?(n[_>>2]=W,n[Z>>2]=E,n[ae>>2]=0,H=W,S=0):E=C,C=(E|0)<(H|0)?E:H,C=(S|0)<(C|0)?S:C,!((C|0)<=0)&&(n[_>>2]=H-C,n[Z>>2]=E-C,n[ae>>2]=S-C)}function La(_,S){_=_|0,S=S|0;var C=0,E=0,H=0,W=0,Z=0,ae=0;return Z=(n[_>>2]|0)-(n[S>>2]|0)|0,ae=(Z|0)<0,E=(n[_+4>>2]|0)-(n[S+4>>2]|0)-(ae?Z:0)|0,W=(E|0)<0,H=(ae?0-Z|0:0)+(n[_+8>>2]|0)-(n[S+8>>2]|0)+(W?0-E|0:0)|0,_=(H|0)<0,S=_?0:H,C=(W?0:E)-(_?H:0)|0,H=(ae?0:Z)-(W?E:0)-(_?H:0)|0,_=(C|0)<(H|0)?C:H,_=(S|0)<(_|0)?S:_,E=(_|0)>0,S=S-(E?_:0)|0,C=C-(E?_:0)|0,_=H-(E?_:0)|0,_=(_|0)>-1?_:0-_|0,C=(C|0)>-1?C:0-C|0,S=(S|0)>-1?S:0-S|0,S=(C|0)>(S|0)?C:S,((_|0)>(S|0)?_:S)|0}function yo(_,S){_=_|0,S=S|0;var C=0;C=n[_+8>>2]|0,n[S>>2]=(n[_>>2]|0)-C,n[S+4>>2]=(n[_+4>>2]|0)-C}function zo(_,S){_=_|0,S=S|0;var C=0,E=0,H=0,W=0,Z=0,ae=0;E=n[_>>2]|0,n[S>>2]=E,_=n[_+4>>2]|0,Z=S+4|0,n[Z>>2]=_,ae=S+8|0,n[ae>>2]=0,C=_-E|0,(E|0)<0?(_=0-E|0,n[Z>>2]=C,n[ae>>2]=_,n[S>>2]=0,E=0):(C=_,_=0),(C|0)<0&&(E=E-C|0,n[S>>2]=E,_=_-C|0,n[ae>>2]=_,n[Z>>2]=0,C=0),W=E-_|0,H=C-_|0,(_|0)<0?(n[S>>2]=W,n[Z>>2]=H,n[ae>>2]=0,C=H,H=W,_=0):H=E,E=(C|0)<(H|0)?C:H,E=(_|0)<(E|0)?_:E,!((E|0)<=0)&&(n[S>>2]=H-E,n[Z>>2]=C-E,n[ae>>2]=_-E)}function VA(_){_=_|0;var S=0,C=0,E=0,H=0;S=_+8|0,H=n[S>>2]|0,C=H-(n[_>>2]|0)|0,n[_>>2]=C,E=_+4|0,_=(n[E>>2]|0)-H|0,n[E>>2]=_,n[S>>2]=0-(_+C)}function Dr(_){_=_|0;var S=0,C=0,E=0,H=0,W=0,Z=0,ae=0;C=n[_>>2]|0,S=0-C|0,n[_>>2]=S,Z=_+8|0,n[Z>>2]=0,ae=_+4|0,E=n[ae>>2]|0,H=E+C|0,(C|0)>0?(n[ae>>2]=H,n[Z>>2]=C,n[_>>2]=0,S=0,E=H):C=0,(E|0)<0?(W=S-E|0,n[_>>2]=W,C=C-E|0,n[Z>>2]=C,n[ae>>2]=0,H=W-C|0,S=0-C|0,(C|0)<0?(n[_>>2]=H,n[ae>>2]=S,n[Z>>2]=0,E=S,C=0):(E=0,H=W)):H=S,S=(E|0)<(H|0)?E:H,S=(C|0)<(S|0)?C:S,!((S|0)<=0)&&(n[_>>2]=H-S,n[ae>>2]=E-S,n[Z>>2]=C-S)}function gu(_,S,C){_=_|0,S=S|0,C=C|0;var E=0,H=0;E=Et,Et=Et+16|0,H=E,oa(_,S,C,H),or(H,C+4|0),Et=E}function oa(_,S,C,E){_=_|0,S=S|0,C=C|0,E=E|0;var H=0,W=0,Z=0,ae=0,Ie=0;if(Ie=Et,Et=Et+32|0,W=Ie,mu(_,W),n[C>>2]=0,H=+ks(15888,W),Z=+ks(15912,W),Z<H&&(n[C>>2]=1,H=Z),Z=+ks(15936,W),Z<H&&(n[C>>2]=2,H=Z),Z=+ks(15960,W),Z<H&&(n[C>>2]=3,H=Z),Z=+ks(15984,W),Z<H&&(n[C>>2]=4,H=Z),Z=+ks(16008,W),Z<H&&(n[C>>2]=5,H=Z),Z=+ks(16032,W),Z<H&&(n[C>>2]=6,H=Z),Z=+ks(16056,W),Z<H&&(n[C>>2]=7,H=Z),Z=+ks(16080,W),Z<H&&(n[C>>2]=8,H=Z),Z=+ks(16104,W),Z<H&&(n[C>>2]=9,H=Z),Z=+ks(16128,W),Z<H&&(n[C>>2]=10,H=Z),Z=+ks(16152,W),Z<H&&(n[C>>2]=11,H=Z),Z=+ks(16176,W),Z<H&&(n[C>>2]=12,H=Z),Z=+ks(16200,W),Z<H&&(n[C>>2]=13,H=Z),Z=+ks(16224,W),Z<H&&(n[C>>2]=14,H=Z),Z=+ks(16248,W),Z<H&&(n[C>>2]=15,H=Z),Z=+ks(16272,W),Z<H&&(n[C>>2]=16,H=Z),Z=+ks(16296,W),Z<H&&(n[C>>2]=17,H=Z),Z=+ks(16320,W),Z<H&&(n[C>>2]=18,H=Z),Z=+ks(16344,W),Z<H&&(n[C>>2]=19,H=Z),Z=+Rt(+(1-H*.5)),Z<1e-16){n[E>>2]=0,n[E+4>>2]=0,n[E+8>>2]=0,n[E+12>>2]=0,Et=Ie;return}if(C=n[C>>2]|0,H=+ce[16368+(C*24|0)>>3],H=+IA(H-+IA(+Kn(15568+(C<<4)|0,_))),zr(S)|0?ae=+IA(H+-.3334731722518321):ae=H,H=+pi(+Z)/.381966011250105,(S|0)>0){W=0;do H=H*2.6457513110645907,W=W+1|0;while((W|0)!=(S|0))}Z=+Ei(+ae)*H,ce[E>>3]=Z,ae=+Ai(+ae)*H,ce[E+8>>3]=ae,Et=Ie}function ba(_,S,C,E,H){_=_|0,S=S|0,C=C|0,E=E|0,H=H|0;var W=0,Z=0;if(W=+tu(_),W<1e-16){S=15568+(S<<4)|0,n[H>>2]=n[S>>2],n[H+4>>2]=n[S+4>>2],n[H+8>>2]=n[S+8>>2],n[H+12>>2]=n[S+12>>2];return}if(Z=+wn(+ +ce[_+8>>3],+ +ce[_>>3]),(C|0)>0){_=0;do W=W/2.6457513110645907,_=_+1|0;while((_|0)!=(C|0))}E?(W=W/3,C=(zr(C)|0)==0,W=+Rn(+((C?W:W/2.6457513110645907)*.381966011250105))):(W=+Rn(+(W*.381966011250105)),zr(C)|0&&(Z=+IA(Z+.3334731722518321))),Xr(15568+(S<<4)|0,+IA(+ce[16368+(S*24|0)>>3]-Z),W,H)}function ll(_,S,C){_=_|0,S=S|0,C=C|0;var E=0,H=0;E=Et,Et=Et+16|0,H=E,jn(_+4|0,H),ba(H,n[_>>2]|0,S,0,C),Et=E}function to(_,S,C,E,H){_=_|0,S=S|0,C=C|0,E=E|0,H=H|0;var W=0,Z=0,ae=0,Ie=0,$e=0,ot=0,Nt=0,wt=0,It=0,R=0,s=0,g=0,I=0,M=0,F=0,q=0,A=0,l=0,f=0,m=0,b=0,T=0,z=0,N=0,X=0,te=0,ve=0,De=0;if(te=Et,Et=Et+272|0,W=te+256|0,M=te+240|0,z=te,N=te+224|0,X=te+208|0,F=te+176|0,q=te+160|0,A=te+192|0,l=te+144|0,f=te+128|0,m=te+112|0,b=te+96|0,T=te+80|0,n[W>>2]=S,n[M>>2]=n[_>>2],n[M+4>>2]=n[_+4>>2],n[M+8>>2]=n[_+8>>2],n[M+12>>2]=n[_+12>>2],bo(M,W,z),n[H>>2]=0,M=E+C+((E|0)==5&1)|0,(M|0)<=(C|0)){Et=te;return}Ie=n[W>>2]|0,$e=N+4|0,ot=F+4|0,Nt=C+5|0,wt=16848+(Ie<<2)|0,It=16928+(Ie<<2)|0,R=f+8|0,s=m+8|0,g=b+8|0,I=X+4|0,ae=C;e:for(;;){Z=z+(((ae|0)%5|0)<<4)|0,n[X>>2]=n[Z>>2],n[X+4>>2]=n[Z+4>>2],n[X+8>>2]=n[Z+8>>2],n[X+12>>2]=n[Z+12>>2];do;while((Fo(X,Ie,0,1)|0)==2);if((ae|0)>(C|0)&(zr(S)|0)!=0){if(n[F>>2]=n[X>>2],n[F+4>>2]=n[X+4>>2],n[F+8>>2]=n[X+8>>2],n[F+12>>2]=n[X+12>>2],jn($e,q),E=n[F>>2]|0,W=n[17008+(E*80|0)+(n[N>>2]<<2)>>2]|0,n[F>>2]=n[18608+(E*80|0)+(W*20|0)>>2],Z=n[18608+(E*80|0)+(W*20|0)+16>>2]|0,(Z|0)>0){_=0;do Ga(ot),_=_+1|0;while((_|0)<(Z|0))}switch(Z=18608+(E*80|0)+(W*20|0)+4|0,n[A>>2]=n[Z>>2],n[A+4>>2]=n[Z+4>>2],n[A+8>>2]=n[Z+8>>2],Pr(A,(n[wt>>2]|0)*3|0),Er(ot,A,ot),Ln(ot),jn(ot,l),ve=+(n[It>>2]|0),ce[f>>3]=ve*3,ce[R>>3]=0,De=ve*-1.5,ce[m>>3]=De,ce[s>>3]=ve*2.598076211353316,ce[b>>3]=De,ce[g>>3]=ve*-2.598076211353316,n[17008+((n[F>>2]|0)*80|0)+(n[X>>2]<<2)>>2]|0){case 1:{_=m,E=f;break}case 3:{_=b,E=m;break}case 2:{_=f,E=b;break}default:{_=12;break e}}GA(q,l,E,_,T),ba(T,n[F>>2]|0,Ie,1,H+8+(n[H>>2]<<4)|0),n[H>>2]=(n[H>>2]|0)+1}if((ae|0)<(Nt|0)&&(jn(I,F),ba(F,n[X>>2]|0,Ie,1,H+8+(n[H>>2]<<4)|0),n[H>>2]=(n[H>>2]|0)+1),n[N>>2]=n[X>>2],n[N+4>>2]=n[X+4>>2],n[N+8>>2]=n[X+8>>2],n[N+12>>2]=n[X+12>>2],ae=ae+1|0,(ae|0)>=(M|0)){_=3;break}}if((_|0)==3){Et=te;return}else(_|0)==12&&Fi(22474,22521,581,22531)}function bo(_,S,C){_=_|0,S=S|0,C=C|0;var E=0,H=0,W=0,Z=0,ae=0,Ie=0;Ie=Et,Et=Et+128|0,E=Ie+64|0,H=Ie,W=E,Z=20208,ae=W+60|0;do n[W>>2]=n[Z>>2],W=W+4|0,Z=Z+4|0;while((W|0)<(ae|0));W=H,Z=20272,ae=W+60|0;do n[W>>2]=n[Z>>2],W=W+4|0,Z=Z+4|0;while((W|0)<(ae|0));ae=(zr(n[S>>2]|0)|0)==0,E=ae?E:H,H=_+4|0,tA(H),aa(H),zr(n[S>>2]|0)|0&&(ls(H),n[S>>2]=(n[S>>2]|0)+1),n[C>>2]=n[_>>2],S=C+4|0,Er(H,E,S),Ln(S),n[C+16>>2]=n[_>>2],S=C+20|0,Er(H,E+12|0,S),Ln(S),n[C+32>>2]=n[_>>2],S=C+36|0,Er(H,E+24|0,S),Ln(S),n[C+48>>2]=n[_>>2],S=C+52|0,Er(H,E+36|0,S),Ln(S),n[C+64>>2]=n[_>>2],C=C+68|0,Er(H,E+48|0,C),Ln(C),Et=Ie}function Fo(_,S,C,E){_=_|0,S=S|0,C=C|0,E=E|0;var H=0,W=0,Z=0,ae=0,Ie=0,$e=0,ot=0,Nt=0,wt=0,It=0,R=0;if(R=Et,Et=Et+32|0,wt=R+12|0,ae=R,It=_+4|0,Nt=n[16928+(S<<2)>>2]|0,ot=(E|0)!=0,Nt=ot?Nt*3|0:Nt,H=n[It>>2]|0,$e=_+8|0,Z=n[$e>>2]|0,ot){if(W=_+12|0,E=n[W>>2]|0,H=Z+H+E|0,(H|0)==(Nt|0))return It=1,Et=R,It|0;Ie=W}else Ie=_+12|0,E=n[Ie>>2]|0,H=Z+H+E|0;if((H|0)<=(Nt|0))return It=0,Et=R,It|0;do if((E|0)>0){if(E=n[_>>2]|0,(Z|0)>0){W=18608+(E*80|0)+60|0,E=_;break}E=18608+(E*80|0)+40|0,C?(_o(wt,Nt,0,0),xs(It,wt,ae),vo(ae),Er(ae,wt,It),W=E,E=_):(W=E,E=_)}else W=18608+((n[_>>2]|0)*80|0)+20|0,E=_;while(!1);if(n[E>>2]=n[W>>2],H=W+16|0,(n[H>>2]|0)>0){E=0;do Ga(It),E=E+1|0;while((E|0)<(n[H>>2]|0))}return _=W+4|0,n[wt>>2]=n[_>>2],n[wt+4>>2]=n[_+4>>2],n[wt+8>>2]=n[_+8>>2],S=n[16848+(S<<2)>>2]|0,Pr(wt,ot?S*3|0:S),Er(It,wt,It),Ln(It),ot?E=((n[$e>>2]|0)+(n[It>>2]|0)+(n[Ie>>2]|0)|0)==(Nt|0)?1:2:E=2,It=E,Et=R,It|0}function us(_,S){_=_|0,S=S|0;var C=0;do C=Fo(_,S,0,1)|0;while((C|0)==2);return C|0}function io(_,S,C,E,H){_=_|0,S=S|0,C=C|0,E=E|0,H=H|0;var W=0,Z=0,ae=0,Ie=0,$e=0,ot=0,Nt=0,wt=0,It=0,R=0,s=0,g=0,I=0,M=0,F=0,q=0,A=0,l=0,f=0,m=0,b=0,T=0,z=0;if(b=Et,Et=Et+240|0,W=b+224|0,A=b+208|0,l=b,f=b+192|0,m=b+176|0,g=b+160|0,I=b+144|0,M=b+128|0,F=b+112|0,q=b+96|0,n[W>>2]=S,n[A>>2]=n[_>>2],n[A+4>>2]=n[_+4>>2],n[A+8>>2]=n[_+8>>2],n[A+12>>2]=n[_+12>>2],xo(A,W,l),n[H>>2]=0,s=E+C+((E|0)==6&1)|0,(s|0)<=(C|0)){Et=b;return}Ie=n[W>>2]|0,$e=C+6|0,ot=16928+(Ie<<2)|0,Nt=I+8|0,wt=M+8|0,It=F+8|0,R=f+4|0,Z=0,ae=C,E=-1;e:for(;;){if(W=(ae|0)%6|0,_=l+(W<<4)|0,n[f>>2]=n[_>>2],n[f+4>>2]=n[_+4>>2],n[f+8>>2]=n[_+8>>2],n[f+12>>2]=n[_+12>>2],_=Z,Z=Fo(f,Ie,0,1)|0,(ae|0)>(C|0)&(zr(S)|0)!=0&&(_|0)!=1&&(n[f>>2]|0)!=(E|0)){switch(jn(l+(((W+5|0)%6|0)<<4)+4|0,m),jn(l+(W<<4)+4|0,g),T=+(n[ot>>2]|0),ce[I>>3]=T*3,ce[Nt>>3]=0,z=T*-1.5,ce[M>>3]=z,ce[wt>>3]=T*2.598076211353316,ce[F>>3]=z,ce[It>>3]=T*-2.598076211353316,W=n[A>>2]|0,n[17008+(W*80|0)+(((E|0)==(W|0)?n[f>>2]|0:E)<<2)>>2]|0){case 1:{_=M,E=I;break}case 3:{_=F,E=M;break}case 2:{_=I,E=F;break}default:{_=8;break e}}GA(m,g,E,_,q),!(mA(m,q)|0)&&!(mA(g,q)|0)&&(ba(q,n[A>>2]|0,Ie,1,H+8+(n[H>>2]<<4)|0),n[H>>2]=(n[H>>2]|0)+1)}if((ae|0)<($e|0)&&(jn(R,m),ba(m,n[f>>2]|0,Ie,1,H+8+(n[H>>2]<<4)|0),n[H>>2]=(n[H>>2]|0)+1),ae=ae+1|0,(ae|0)>=(s|0)){_=3;break}else E=n[f>>2]|0}if((_|0)==3){Et=b;return}else(_|0)==8&&Fi(22557,22521,746,22602)}function xo(_,S,C){_=_|0,S=S|0,C=C|0;var E=0,H=0,W=0,Z=0,ae=0,Ie=0;Ie=Et,Et=Et+160|0,E=Ie+80|0,H=Ie,W=E,Z=20336,ae=W+72|0;do n[W>>2]=n[Z>>2],W=W+4|0,Z=Z+4|0;while((W|0)<(ae|0));W=H,Z=20416,ae=W+72|0;do n[W>>2]=n[Z>>2],W=W+4|0,Z=Z+4|0;while((W|0)<(ae|0));ae=(zr(n[S>>2]|0)|0)==0,E=ae?E:H,H=_+4|0,tA(H),aa(H),zr(n[S>>2]|0)|0&&(ls(H),n[S>>2]=(n[S>>2]|0)+1),n[C>>2]=n[_>>2],S=C+4|0,Er(H,E,S),Ln(S),n[C+16>>2]=n[_>>2],S=C+20|0,Er(H,E+12|0,S),Ln(S),n[C+32>>2]=n[_>>2],S=C+36|0,Er(H,E+24|0,S),Ln(S),n[C+48>>2]=n[_>>2],S=C+52|0,Er(H,E+36|0,S),Ln(S),n[C+64>>2]=n[_>>2],S=C+68|0,Er(H,E+48|0,S),Ln(S),n[C+80>>2]=n[_>>2],C=C+84|0,Er(H,E+60|0,C),Ln(C),Et=Ie}function IA(_){_=+_;var S=0;return S=_<0?_+6.283185307179586:_,+(_>=6.283185307179586?S+-6.283185307179586:S)}function Hs(_,S){return _=_|0,S=S|0,+ui(+(+ce[_>>3]-+ce[S>>3]))<17453292519943298e-27?(S=+ui(+(+ce[_+8>>3]-+ce[S+8>>3]))<17453292519943298e-27,S|0):(S=0,S|0)}function Ha(_,S){_=_|0,S=S|0;var C=0,E=0,H=0,W=0;return H=+ce[S>>3],E=+ce[_>>3],W=+Ai(+((H-E)*.5)),C=+Ai(+((+ce[S+8>>3]-+ce[_+8>>3])*.5)),C=W*W+C*(+Ei(+H)*+Ei(+E)*C),+(+wn(+ +Vt(+C),+ +Vt(+(1-C)))*2)}function gs(_,S){_=_|0,S=S|0;var C=0,E=0,H=0,W=0;return H=+ce[S>>3],E=+ce[_>>3],W=+Ai(+((H-E)*.5)),C=+Ai(+((+ce[S+8>>3]-+ce[_+8>>3])*.5)),C=W*W+C*(+Ei(+H)*+Ei(+E)*C),+(+wn(+ +Vt(+C),+ +Vt(+(1-C)))*2*6371.007180918475)}function ul(_,S){_=_|0,S=S|0;var C=0,E=0,H=0,W=0;return H=+ce[S>>3],E=+ce[_>>3],W=+Ai(+((H-E)*.5)),C=+Ai(+((+ce[S+8>>3]-+ce[_+8>>3])*.5)),C=W*W+C*(+Ei(+H)*+Ei(+E)*C),+(+wn(+ +Vt(+C),+ +Vt(+(1-C)))*2*6371.007180918475*1e3)}function Kn(_,S){_=_|0,S=S|0;var C=0,E=0,H=0,W=0,Z=0;return W=+ce[S>>3],E=+Ei(+W),H=+ce[S+8>>3]-+ce[_+8>>3],Z=E*+Ai(+H),C=+ce[_>>3],+ +wn(+Z,+(+Ai(+W)*+Ei(+C)-+Ei(+H)*(E*+Ai(+C))))}function Xr(_,S,C,E){_=_|0,S=+S,C=+C,E=E|0;var H=0,W=0,Z=0,ae=0;if(C<1e-16){n[E>>2]=n[_>>2],n[E+4>>2]=n[_+4>>2],n[E+8>>2]=n[_+8>>2],n[E+12>>2]=n[_+12>>2];return}W=S<0?S+6.283185307179586:S,W=S>=6.283185307179586?W+-6.283185307179586:W;do if(W<1e-16)S=+ce[_>>3]+C,ce[E>>3]=S,H=E;else{if(H=+ui(+(W+-3.141592653589793))<1e-16,S=+ce[_>>3],H){S=S-C,ce[E>>3]=S,H=E;break}if(Z=+Ei(+C),C=+Ai(+C),S=Z*+Ai(+S)+ +Ei(+W)*(C*+Ei(+S)),S=S>1?1:S,S=+Yi(+(S<-1?-1:S)),ce[E>>3]=S,+ui(+(S+-1.5707963267948966))<1e-16){ce[E>>3]=1.5707963267948966,ce[E+8>>3]=0;return}if(+ui(+(S+1.5707963267948966))<1e-16){ce[E>>3]=-1.5707963267948966,ce[E+8>>3]=0;return}if(ae=+Ei(+S),W=C*+Ai(+W)/ae,C=+ce[_>>3],S=(Z-+Ai(+S)*+Ai(+C))/+Ei(+C)/ae,Z=W>1?1:W,S=S>1?1:S,S=+ce[_+8>>3]+ +wn(+(Z<-1?-1:Z),+(S<-1?-1:S)),S>3.141592653589793)do S=S+-6.283185307179586;while(S>3.141592653589793);if(S<-3.141592653589793)do S=S+6.283185307179586;while(S<-3.141592653589793);ce[E+8>>3]=S;return}while(!1);if(+ui(+(S+-1.5707963267948966))<1e-16){ce[H>>3]=1.5707963267948966,ce[E+8>>3]=0;return}if(+ui(+(S+1.5707963267948966))<1e-16){ce[H>>3]=-1.5707963267948966,ce[E+8>>3]=0;return}if(S=+ce[_+8>>3],S>3.141592653589793)do S=S+-6.283185307179586;while(S>3.141592653589793);if(S<-3.141592653589793)do S=S+6.283185307179586;while(S<-3.141592653589793);ce[E+8>>3]=S}function No(_){return _=_|0,+ +ce[20496+(_<<3)>>3]}function rr(_){return _=_|0,+ +ce[20624+(_<<3)>>3]}function Aa(_){return _=_|0,+ +ce[20752+(_<<3)>>3]}function Hr(_){return _=_|0,+ +ce[20880+(_<<3)>>3]}function Qr(_){_=_|0;var S=0;return S=21008+(_<<3)|0,_=n[S>>2]|0,fn(n[S+4>>2]|0),_|0}function xa(_,S,C){_=_|0,S=S|0,C=C|0;var E=0,H=0,W=0,Z=0,ae=0,Ie=0,$e=0,ot=0,Nt=0,wt=0;return wt=+ce[S>>3],ot=+ce[_>>3],Ie=+Ai(+((wt-ot)*.5)),W=+ce[S+8>>3],$e=+ce[_+8>>3],Z=+Ai(+((W-$e)*.5)),ae=+Ei(+ot),Nt=+Ei(+wt),Z=Ie*Ie+Z*(Nt*ae*Z),Z=+wn(+ +Vt(+Z),+ +Vt(+(1-Z)))*2,Ie=+ce[C>>3],wt=+Ai(+((Ie-wt)*.5)),E=+ce[C+8>>3],W=+Ai(+((E-W)*.5)),H=+Ei(+Ie),W=wt*wt+W*(Nt*H*W),W=+wn(+ +Vt(+W),+ +Vt(+(1-W)))*2,Ie=+Ai(+((ot-Ie)*.5)),E=+Ai(+(($e-E)*.5)),E=Ie*Ie+E*(ae*H*E),E=+wn(+ +Vt(+E),+ +Vt(+(1-E)))*2,H=(Z+W+E)*.5,+(+Rn(+ +Vt(+(+pi(+(H*.5))*+pi(+((H-Z)*.5))*+pi(+((H-W)*.5))*+pi(+((H-E)*.5)))))*4)}function mr(_,S){_=_|0,S=S|0;var C=0,E=0,H=0,W=0,Z=0;if(W=Et,Et=Et+192|0,E=W+168|0,H=W,qs(_,S,E),so(_,S,H),S=n[H>>2]|0,(S|0)<=0)return C=0,Et=W,+C;if(C=+xa(H+8|0,H+8+(((S|0)!=1&1)<<4)|0,E)+0,(S|0)==1)return Et=W,+C;_=1;do Z=_,_=_+1|0,C=C+ +xa(H+8+(Z<<4)|0,H+8+(((_|0)%(S|0)|0)<<4)|0,E);while((_|0)<(S|0));return Et=W,+C}function TA(_,S){_=_|0,S=S|0;var C=0,E=0,H=0,W=0,Z=0;if(W=Et,Et=Et+192|0,E=W+168|0,H=W,qs(_,S,E),so(_,S,H),S=n[H>>2]|0,(S|0)>0){if(C=+xa(H+8|0,H+8+(((S|0)!=1&1)<<4)|0,E)+0,(S|0)!=1){_=1;do Z=_,_=_+1|0,C=C+ +xa(H+8+(Z<<4)|0,H+8+(((_|0)%(S|0)|0)<<4)|0,E);while((_|0)<(S|0))}}else C=0;return Et=W,+(C*6371.007180918475*6371.007180918475)}function Vo(_,S){_=_|0,S=S|0;var C=0,E=0,H=0,W=0,Z=0;if(W=Et,Et=Et+192|0,E=W+168|0,H=W,qs(_,S,E),so(_,S,H),S=n[H>>2]|0,(S|0)>0){if(C=+xa(H+8|0,H+8+(((S|0)!=1&1)<<4)|0,E)+0,(S|0)!=1){_=1;do Z=_,_=_+1|0,C=C+ +xa(H+8+(Z<<4)|0,H+8+(((_|0)%(S|0)|0)<<4)|0,E);while((_|0)<(S|0))}}else C=0;return Et=W,+(C*6371.007180918475*6371.007180918475*1e3*1e3)}function Uo(_,S){_=_|0,S=S|0;var C=0,E=0,H=0,W=0,Z=0,ae=0,Ie=0,$e=0;if(Z=Et,Et=Et+176|0,W=Z,Ci(_,S,W),_=n[W>>2]|0,(_|0)<=1)return H=0,Et=Z,+H;S=_+-1|0,_=0,C=0,E=+ce[W+8>>3],H=+ce[W+16>>3];do _=_+1|0,Ie=E,E=+ce[W+8+(_<<4)>>3],$e=+Ai(+((E-Ie)*.5)),ae=H,H=+ce[W+8+(_<<4)+8>>3],ae=+Ai(+((H-ae)*.5)),ae=$e*$e+ae*(+Ei(+E)*+Ei(+Ie)*ae),C=C+ +wn(+ +Vt(+ae),+ +Vt(+(1-ae)))*2;while((_|0)<(S|0));return Et=Z,+C}function ws(_,S){_=_|0,S=S|0;var C=0,E=0,H=0,W=0,Z=0,ae=0,Ie=0,$e=0;if(Z=Et,Et=Et+176|0,W=Z,Ci(_,S,W),_=n[W>>2]|0,(_|0)<=1)return H=0,Et=Z,+H;S=_+-1|0,_=0,C=0,E=+ce[W+8>>3],H=+ce[W+16>>3];do _=_+1|0,Ie=E,E=+ce[W+8+(_<<4)>>3],$e=+Ai(+((E-Ie)*.5)),ae=H,H=+ce[W+8+(_<<4)+8>>3],ae=+Ai(+((H-ae)*.5)),ae=$e*$e+ae*(+Ei(+Ie)*+Ei(+E)*ae),C=C+ +wn(+ +Vt(+ae),+ +Vt(+(1-ae)))*2;while((_|0)!=(S|0));return $e=C*6371.007180918475,Et=Z,+$e}function Ar(_,S){_=_|0,S=S|0;var C=0,E=0,H=0,W=0,Z=0,ae=0,Ie=0,$e=0;if(Z=Et,Et=Et+176|0,W=Z,Ci(_,S,W),_=n[W>>2]|0,(_|0)<=1)return H=0,Et=Z,+H;S=_+-1|0,_=0,C=0,E=+ce[W+8>>3],H=+ce[W+16>>3];do _=_+1|0,Ie=E,E=+ce[W+8+(_<<4)>>3],$e=+Ai(+((E-Ie)*.5)),ae=H,H=+ce[W+8+(_<<4)+8>>3],ae=+Ai(+((H-ae)*.5)),ae=$e*$e+ae*(+Ei(+Ie)*+Ei(+E)*ae),C=C+ +wn(+ +Vt(+ae),+ +Vt(+(1-ae)))*2;while((_|0)!=(S|0));return $e=C*6371.007180918475*1e3,Et=Z,+$e}function On(_,S){return _=_|0,S=S|0,S=ci(_|0,S|0,52)|0,Pt()|0,S&15|0}function wo(_,S){return _=_|0,S=S|0,S=ci(_|0,S|0,45)|0,Pt()|0,S&127|0}function Lr(_,S){_=_|0,S=S|0;var C=0,E=0,H=0,W=0,Z=0,ae=0;if(!(!0&(S&-16777216|0)==134217728)||(Z=ci(_|0,S|0,45)|0,Pt()|0,Z=Z&127,Z>>>0>121))return S=0,S|0;C=ci(_|0,S|0,52)|0,Pt()|0,C=C&15;do if(C|0){for(H=1,E=0;;){if(W=ci(_|0,S|0,(15-H|0)*3|0)|0,Pt()|0,W=W&7,(W|0)!=0&(E^1))if((W|0)==1&(P(Z)|0)!=0){ae=0,E=13;break}else E=1;if((W|0)==7){ae=0,E=13;break}if(H>>>0<C>>>0)H=H+1|0;else{E=9;break}}if((E|0)==9){if((C|0)==15)ae=1;else break;return ae|0}else if((E|0)==13)return ae|0}while(!1);for(;;){if(ae=ci(_|0,S|0,(14-C|0)*3|0)|0,Pt()|0,!((ae&7|0)==7&!0)){ae=0,E=13;break}if(C>>>0<14)C=C+1|0;else{ae=1,E=13;break}}return(E|0)==13?ae|0:0}function no(_,S,C){_=_|0,S=S|0,C=C|0;var E=0,H=0;if(E=ci(_|0,S|0,52)|0,Pt()|0,E=E&15,(E|0)>=(C|0)){if((E|0)!=(C|0))if(C>>>0<=15){if(H=Ii(C|0,0,52)|0,_=H|_,S=Pt()|0|S&-15728641,(E|0)>(C|0))do H=Ii(7,0,(14-C|0)*3|0)|0,C=C+1|0,_=H|_,S=Pt()|0|S;while((C|0)<(E|0))}else S=0,_=0}else S=0,_=0;return fn(S|0),_|0}function iA(_,S,C){return _=_|0,S=S|0,C=C|0,_=ci(_|0,S|0,52)|0,Pt()|0,_=_&15,(C|0)<16&(_|0)<=(C|0)?(C=ao(7,C-_|0)|0,C|0):(C=0,C|0)}function _r(_,S,C,E){_=_|0,S=S|0,C=C|0,E=E|0;var H=0,W=0,Z=0,ae=0,Ie=0,$e=0,ot=0;if(Z=ci(_|0,S|0,52)|0,Pt()|0,Z=Z&15,!!((C|0)<16&(Z|0)<=(C|0))){if((Z|0)==(C|0)){C=E,n[C>>2]=_,n[C+4>>2]=S;return}if(Ie=ao(7,C-Z|0)|0,$e=(Ie|0)/7|0,ae=ci(_|0,S|0,45)|0,Pt()|0,!(P(ae&127)|0))W=0;else{e:do if(!Z)H=0;else for(W=1;;){if(H=ci(_|0,S|0,(15-W|0)*3|0)|0,Pt()|0,H=H&7,H|0)break e;if(W>>>0<Z>>>0)W=W+1|0;else{H=0;break}}while(!1);W=(H|0)==0}if(ot=Ii(Z+1|0,0,52)|0,H=Pt()|0|S&-15728641,ae=(14-Z|0)*3|0,S=Ii(7,0,ae|0)|0,S=(ot|_)&~S,Z=H&~(Pt()|0),_r(S,Z,C,E),H=E+($e<<3)|0,!W){ot=Ii(1,0,ae|0)|0,_r(ot|S,Pt()|0|Z,C,H),ot=H+($e<<3)|0,Ie=Ii(2,0,ae|0)|0,_r(Ie|S,Pt()|0|Z,C,ot),ot=ot+($e<<3)|0,Ie=Ii(3,0,ae|0)|0,_r(Ie|S,Pt()|0|Z,C,ot),ot=ot+($e<<3)|0,Ie=Ii(4,0,ae|0)|0,_r(Ie|S,Pt()|0|Z,C,ot),ot=ot+($e<<3)|0,Ie=Ii(5,0,ae|0)|0,_r(Ie|S,Pt()|0|Z,C,ot),Ie=Ii(6,0,ae|0)|0,_r(Ie|S,Pt()|0|Z,C,ot+($e<<3)|0);return}W=H+($e<<3)|0,(Ie|0)>6&&(Ie=H+8|0,ot=(W>>>0>Ie>>>0?W:Ie)+-1+(0-H)|0,Wr(H|0,0,ot+8&-8|0)|0,H=Ie+(ot>>>3<<3)|0),ot=Ii(2,0,ae|0)|0,_r(ot|S,Pt()|0|Z,C,H),ot=H+($e<<3)|0,Ie=Ii(3,0,ae|0)|0,_r(Ie|S,Pt()|0|Z,C,ot),ot=ot+($e<<3)|0,Ie=Ii(4,0,ae|0)|0,_r(Ie|S,Pt()|0|Z,C,ot),ot=ot+($e<<3)|0,Ie=Ii(5,0,ae|0)|0,_r(Ie|S,Pt()|0|Z,C,ot),Ie=Ii(6,0,ae|0)|0,_r(Ie|S,Pt()|0|Z,C,ot+($e<<3)|0)}}function Kr(_,S){_=_|0,S=S|0;var C=0,E=0,H=0;if(H=ci(_|0,S|0,45)|0,Pt()|0,!(P(H&127)|0))return H=0,H|0;H=ci(_|0,S|0,52)|0,Pt()|0,H=H&15;e:do if(!H)C=0;else for(E=1;;){if(C=ci(_|0,S|0,(15-E|0)*3|0)|0,Pt()|0,C=C&7,C|0)break e;if(E>>>0<H>>>0)E=E+1|0;else{C=0;break}}while(!1);return H=(C|0)==0&1,H|0}function Qs(_,S,C){_=_|0,S=S|0,C=C|0;var E=0,H=0;if(E=ci(_|0,S|0,52)|0,Pt()|0,E=E&15,(C|0)<16&(E|0)<=(C|0)){if((E|0)!=(C|0)&&(H=Ii(C|0,0,52)|0,_=H|_,S=Pt()|0|S&-15728641,(E|0)<(C|0)))do H=Ii(7,0,(14-E|0)*3|0)|0,E=E+1|0,_=_&~H,S=S&~(Pt()|0);while((E|0)<(C|0))}else S=0,_=0;return fn(S|0),_|0}function kA(_,S,C){_=_|0,S=S|0,C=C|0;var E=0,H=0,W=0,Z=0,ae=0,Ie=0,$e=0,ot=0,Nt=0,wt=0,It=0,R=0,s=0,g=0,I=0,M=0,F=0,q=0,A=0,l=0,f=0,m=0;if(!C)return f=0,f|0;if(H=_,E=n[H>>2]|0,H=n[H+4>>2]|0,!0&(H&15728640|0)==0){if((C|0)<=0||(f=S,n[f>>2]=E,n[f+4>>2]=H,(C|0)==1))return f=0,f|0;E=1;do A=_+(E<<3)|0,l=n[A+4>>2]|0,f=S+(E<<3)|0,n[f>>2]=n[A>>2],n[f+4>>2]=l,E=E+1|0;while((E|0)!=(C|0));return E=0,E|0}if(A=C<<3,l=da(A)|0,!l)return f=-3,f|0;if(gl(l|0,_|0,A|0)|0,q=Io(C,8)|0,!q)return zn(l),f=-3,f|0;E=C;e:for(;;){Z=l,ot=n[Z>>2]|0,Z=n[Z+4>>2]|0,M=ci(ot|0,Z|0,52)|0,Pt()|0,M=M&15,F=M+-1|0,I=(E|0)>0;t:do if(I){if(g=((E|0)<0)<<31>>31,R=Ii(F|0,0,52)|0,s=Pt()|0,F>>>0>15)for(H=0,_=ot,C=Z;;){if(!((_|0)==0&(C|0)==0)){if(W=ci(_|0,C|0,52)|0,Pt()|0,W=W&15,ae=(W|0)<(F|0),W=(W|0)==(F|0),$e=ae?0:W?_:0,_=ae?0:W?C:0,C=Ca($e|0,_|0,E|0,g|0)|0,Pt()|0,W=q+(C<<3)|0,ae=W,Ie=n[ae>>2]|0,ae=n[ae+4>>2]|0,(Ie|0)==0&(ae|0)==0)C=$e;else for(R=0,It=C,wt=ae,C=$e;;){if((R|0)>(E|0)){f=41;break e}if((Ie|0)==(C|0)&(wt&-117440513|0)==(_|0)){$e=ci(Ie|0,wt|0,56)|0,Pt()|0,$e=$e&7,Nt=$e+1|0,s=ci(Ie|0,wt|0,45)|0,Pt()|0;i:do if(!(P(s&127)|0))ae=7;else{if(Ie=ci(Ie|0,wt|0,52)|0,Pt()|0,Ie=Ie&15,!Ie){ae=6;break}for(ae=1;;){if(s=Ii(7,0,(15-ae|0)*3|0)|0,!((s&C|0)==0&((Pt()|0)&_|0)==0)){ae=7;break i}if(ae>>>0<Ie>>>0)ae=ae+1|0;else{ae=6;break}}}while(!1);if(($e+2|0)>>>0>ae>>>0){f=51;break e}s=Ii(Nt|0,0,56)|0,_=Pt()|0|_&-117440513,ae=W,n[ae>>2]=0,n[ae+4>>2]=0,ae=It,C=s|C}else ae=(It+1|0)%(E|0)|0;if(W=q+(ae<<3)|0,wt=W,Ie=n[wt>>2]|0,wt=n[wt+4>>2]|0,(Ie|0)==0&(wt|0)==0)break;R=R+1|0,It=ae}s=W,n[s>>2]=C,n[s+4>>2]=_}if(H=H+1|0,(H|0)>=(E|0))break t;C=l+(H<<3)|0,_=n[C>>2]|0,C=n[C+4>>2]|0}for(H=0,_=ot,C=Z;;){if(!((_|0)==0&(C|0)==0)){if(ae=ci(_|0,C|0,52)|0,Pt()|0,ae=ae&15,(ae|0)>=(F|0)){if((ae|0)!=(F|0)&&(_=_|R,C=C&-15728641|s,ae>>>0>=M>>>0)){W=F;do It=Ii(7,0,(14-W|0)*3|0)|0,W=W+1|0,_=It|_,C=Pt()|0|C;while(W>>>0<ae>>>0)}}else _=0,C=0;if(ae=Ca(_|0,C|0,E|0,g|0)|0,Pt()|0,W=q+(ae<<3)|0,Ie=W,$e=n[Ie>>2]|0,Ie=n[Ie+4>>2]|0,!(($e|0)==0&(Ie|0)==0))for(It=0;;){if((It|0)>(E|0)){f=41;break e}if(($e|0)==(_|0)&(Ie&-117440513|0)==(C|0)){Nt=ci($e|0,Ie|0,56)|0,Pt()|0,Nt=Nt&7,wt=Nt+1|0,m=ci($e|0,Ie|0,45)|0,Pt()|0;i:do if(!(P(m&127)|0))Ie=7;else{if($e=ci($e|0,Ie|0,52)|0,Pt()|0,$e=$e&15,!$e){Ie=6;break}for(Ie=1;;){if(m=Ii(7,0,(15-Ie|0)*3|0)|0,!((m&_|0)==0&((Pt()|0)&C|0)==0)){Ie=7;break i}if(Ie>>>0<$e>>>0)Ie=Ie+1|0;else{Ie=6;break}}}while(!1);if((Nt+2|0)>>>0>Ie>>>0){f=51;break e}m=Ii(wt|0,0,56)|0,C=Pt()|0|C&-117440513,wt=W,n[wt>>2]=0,n[wt+4>>2]=0,_=m|_}else ae=(ae+1|0)%(E|0)|0;if(W=q+(ae<<3)|0,Ie=W,$e=n[Ie>>2]|0,Ie=n[Ie+4>>2]|0,($e|0)==0&(Ie|0)==0)break;It=It+1|0}m=W,n[m>>2]=_,n[m+4>>2]=C}if(H=H+1|0,(H|0)>=(E|0))break t;C=l+(H<<3)|0,_=n[C>>2]|0,C=n[C+4>>2]|0}}while(!1);if((E+5|0)>>>0<11){f=99;break}if(s=Io((E|0)/6|0,8)|0,!s){f=58;break}t:do if(I){It=0,wt=0;do{if(ae=q+(It<<3)|0,_=ae,H=n[_>>2]|0,_=n[_+4>>2]|0,!((H|0)==0&(_|0)==0)){Ie=ci(H|0,_|0,56)|0,Pt()|0,Ie=Ie&7,C=Ie+1|0,$e=_&-117440513,m=ci(H|0,_|0,45)|0,Pt()|0;i:do if(P(m&127)|0){if(Nt=ci(H|0,_|0,52)|0,Pt()|0,Nt=Nt&15,Nt|0)for(W=1;;){if(m=Ii(7,0,(15-W|0)*3|0)|0,!((H&m|0)==0&($e&(Pt()|0)|0)==0))break i;if(W>>>0<Nt>>>0)W=W+1|0;else break}_=Ii(C|0,0,56)|0,H=_|H,_=Pt()|0|$e,C=ae,n[C>>2]=H,n[C+4>>2]=_,C=Ie+2|0}while(!1);(C|0)==7&&(m=s+(wt<<3)|0,n[m>>2]=H,n[m+4>>2]=_&-117440513,wt=wt+1|0)}It=It+1|0}while((It|0)!=(E|0));if(I){if(R=((E|0)<0)<<31>>31,Nt=Ii(F|0,0,52)|0,It=Pt()|0,F>>>0>15)for(_=0,H=0;;){do if(!((ot|0)==0&(Z|0)==0)){for(Ie=ci(ot|0,Z|0,52)|0,Pt()|0,Ie=Ie&15,W=(Ie|0)<(F|0),Ie=(Ie|0)==(F|0),ae=W?0:Ie?ot:0,Ie=W?0:Ie?Z:0,W=Ca(ae|0,Ie|0,E|0,R|0)|0,Pt()|0,C=0;;){if((C|0)>(E|0)){f=98;break e}if(m=q+(W<<3)|0,$e=n[m+4>>2]|0,($e&-117440513|0)==(Ie|0)&&(n[m>>2]|0)==(ae|0)){f=70;break}if(W=(W+1|0)%(E|0)|0,m=q+(W<<3)|0,(n[m>>2]|0)==(ae|0)&&(n[m+4>>2]|0)==(Ie|0))break;C=C+1|0}if((f|0)==70&&(f=0,!0&($e&117440512|0)==100663296))break;m=S+(H<<3)|0,n[m>>2]=ot,n[m+4>>2]=Z,H=H+1|0}while(!1);if(_=_+1|0,(_|0)>=(E|0)){E=wt;break t}Z=l+(_<<3)|0,ot=n[Z>>2]|0,Z=n[Z+4>>2]|0}for(_=0,H=0;;){do if(!((ot|0)==0&(Z|0)==0)){if(Ie=ci(ot|0,Z|0,52)|0,Pt()|0,Ie=Ie&15,(Ie|0)>=(F|0))if((Ie|0)!=(F|0))if(C=ot|Nt,W=Z&-15728641|It,Ie>>>0<M>>>0)Ie=W;else{ae=F;do m=Ii(7,0,(14-ae|0)*3|0)|0,ae=ae+1|0,C=m|C,W=Pt()|0|W;while(ae>>>0<Ie>>>0);Ie=W}else C=ot,Ie=Z;else C=0,Ie=0;for(ae=Ca(C|0,Ie|0,E|0,R|0)|0,Pt()|0,W=0;;){if((W|0)>(E|0)){f=98;break e}if(m=q+(ae<<3)|0,$e=n[m+4>>2]|0,($e&-117440513|0)==(Ie|0)&&(n[m>>2]|0)==(C|0)){f=93;break}if(ae=(ae+1|0)%(E|0)|0,m=q+(ae<<3)|0,(n[m>>2]|0)==(C|0)&&(n[m+4>>2]|0)==(Ie|0))break;W=W+1|0}if((f|0)==93&&(f=0,!0&($e&117440512|0)==100663296))break;m=S+(H<<3)|0,n[m>>2]=ot,n[m+4>>2]=Z,H=H+1|0}while(!1);if(_=_+1|0,(_|0)>=(E|0)){E=wt;break t}Z=l+(_<<3)|0,ot=n[Z>>2]|0,Z=n[Z+4>>2]|0}}else H=0,E=wt}else H=0,E=0;while(!1);if(Wr(q|0,0,A|0)|0,gl(l|0,s|0,E<<3|0)|0,zn(s),E)S=S+(H<<3)|0;else break}return(f|0)==41?(zn(l),zn(q),m=-1,m|0):(f|0)==51?(zn(l),zn(q),m=-2,m|0):(f|0)==58?(zn(l),zn(q),m=-3,m|0):(f|0)==98?(zn(s),zn(l),zn(q),m=-1,m|0):((f|0)==99&&gl(S|0,l|0,E<<3|0)|0,zn(l),zn(q),m=0,m|0)}function ro(_,S,C,E,H){_=_|0,S=S|0,C=C|0,E=E|0,H=H|0;var W=0,Z=0,ae=0,Ie=0,$e=0,ot=0;if((S|0)<=0)return H=0,H|0;if((H|0)>=16){for(W=0;;){if(ot=_+(W<<3)|0,!((n[ot>>2]|0)==0&(n[ot+4>>2]|0)==0)){W=14;break}if(W=W+1|0,(W|0)>=(S|0)){Z=0,W=16;break}}if((W|0)==14)return((E|0)>0?-2:-1)|0;if((W|0)==16)return Z|0}W=0,ot=0;e:for(;;){$e=_+(ot<<3)|0,ae=$e,Z=n[ae>>2]|0,ae=n[ae+4>>2]|0;do if(!((Z|0)==0&(ae|0)==0)){if((W|0)>=(E|0)){Z=-1,W=16;break e}if(Ie=ci(Z|0,ae|0,52)|0,Pt()|0,Ie=Ie&15,(Ie|0)>(H|0)){Z=-2,W=16;break e}if((Ie|0)==(H|0)){$e=C+(W<<3)|0,n[$e>>2]=Z,n[$e+4>>2]=ae,W=W+1|0;break}if(Z=(ao(7,H-Ie|0)|0)+W|0,(Z|0)>(E|0)){Z=-1,W=16;break e}_r(n[$e>>2]|0,n[$e+4>>2]|0,H,C+(W<<3)|0),W=Z}while(!1);if(ot=ot+1|0,(ot|0)>=(S|0)){Z=0,W=16;break}}return(W|0)==16?Z|0:0}function dA(_,S,C){_=_|0,S=S|0,C=C|0;var E=0,H=0,W=0,Z=0;if((S|0)<=0)return C=0,C|0;if((C|0)>=16){for(E=0;;){if(Z=_+(E<<3)|0,!((n[Z>>2]|0)==0&(n[Z+4>>2]|0)==0)){E=-1,H=13;break}if(E=E+1|0,(E|0)>=(S|0)){E=0,H=13;break}}if((H|0)==13)return E|0}E=0,Z=0;e:for(;;){H=_+(Z<<3)|0,W=n[H>>2]|0,H=n[H+4>>2]|0;do if(!((W|0)==0&(H|0)==0)){if(H=ci(W|0,H|0,52)|0,Pt()|0,H=H&15,(H|0)>(C|0)){E=-1,H=13;break e}if((H|0)==(C|0)){E=E+1|0;break}else{E=(ao(7,C-H|0)|0)+E|0;break}}while(!1);if(Z=Z+1|0,(Z|0)>=(S|0)){H=13;break}}return(H|0)==13?E|0:0}function wa(_,S){return _=_|0,S=S|0,S=ci(_|0,S|0,52)|0,Pt()|0,S&1|0}function Ss(_,S){_=_|0,S=S|0;var C=0,E=0,H=0;if(H=ci(_|0,S|0,52)|0,Pt()|0,H=H&15,!H)return H=0,H|0;for(E=1;;){if(C=ci(_|0,S|0,(15-E|0)*3|0)|0,Pt()|0,C=C&7,C|0){E=5;break}if(E>>>0<H>>>0)E=E+1|0;else{C=0,E=5;break}}return(E|0)==5?C|0:0}function ms(_,S){_=_|0,S=S|0;var C=0,E=0,H=0,W=0,Z=0,ae=0,Ie=0;if(Ie=ci(_|0,S|0,52)|0,Pt()|0,Ie=Ie&15,!Ie)return ae=S,Ie=_,fn(ae|0),Ie|0;for(ae=1,C=0;;){W=(15-ae|0)*3|0,E=Ii(7,0,W|0)|0,H=Pt()|0,Z=ci(_|0,S|0,W|0)|0,Pt()|0,W=Ii(Ns(Z&7)|0,0,W|0)|0,Z=Pt()|0,_=W|_&~E,S=Z|S&~H;e:do if(!C)if((W&E|0)==0&(Z&H|0)==0)C=0;else if(E=ci(_|0,S|0,52)|0,Pt()|0,E=E&15,!E)C=1;else{C=1;t:for(;;){switch(Z=ci(_|0,S|0,(15-C|0)*3|0)|0,Pt()|0,Z&7){case 1:break t;case 0:break;default:{C=1;break e}}if(C>>>0<E>>>0)C=C+1|0;else{C=1;break e}}for(C=1;;)if(Z=(15-C|0)*3|0,H=ci(_|0,S|0,Z|0)|0,Pt()|0,W=Ii(7,0,Z|0)|0,S=S&~(Pt()|0),Z=Ii(Ns(H&7)|0,0,Z|0)|0,_=_&~W|Z,S=S|(Pt()|0),C>>>0<E>>>0)C=C+1|0;else{C=1;break}}while(!1);if(ae>>>0<Ie>>>0)ae=ae+1|0;else break}return fn(S|0),_|0}function ha(_,S){_=_|0,S=S|0;var C=0,E=0,H=0,W=0,Z=0;if(E=ci(_|0,S|0,52)|0,Pt()|0,E=E&15,!E)return C=S,E=_,fn(C|0),E|0;for(C=1;W=(15-C|0)*3|0,Z=ci(_|0,S|0,W|0)|0,Pt()|0,H=Ii(7,0,W|0)|0,S=S&~(Pt()|0),W=Ii(Ns(Z&7)|0,0,W|0)|0,_=W|_&~H,S=Pt()|0|S,C>>>0<E>>>0;)C=C+1|0;return fn(S|0),_|0}function Qa(_,S){_=_|0,S=S|0;var C=0,E=0,H=0,W=0,Z=0,ae=0,Ie=0;if(Ie=ci(_|0,S|0,52)|0,Pt()|0,Ie=Ie&15,!Ie)return ae=S,Ie=_,fn(ae|0),Ie|0;for(ae=1,C=0;;){W=(15-ae|0)*3|0,E=Ii(7,0,W|0)|0,H=Pt()|0,Z=ci(_|0,S|0,W|0)|0,Pt()|0,W=Ii(Ts(Z&7)|0,0,W|0)|0,Z=Pt()|0,_=W|_&~E,S=Z|S&~H;e:do if(!C)if((W&E|0)==0&(Z&H|0)==0)C=0;else if(E=ci(_|0,S|0,52)|0,Pt()|0,E=E&15,!E)C=1;else{C=1;t:for(;;){switch(Z=ci(_|0,S|0,(15-C|0)*3|0)|0,Pt()|0,Z&7){case 1:break t;case 0:break;default:{C=1;break e}}if(C>>>0<E>>>0)C=C+1|0;else{C=1;break e}}for(C=1;;)if(H=(15-C|0)*3|0,W=Ii(7,0,H|0)|0,Z=S&~(Pt()|0),S=ci(_|0,S|0,H|0)|0,Pt()|0,S=Ii(Ts(S&7)|0,0,H|0)|0,_=_&~W|S,S=Z|(Pt()|0),C>>>0<E>>>0)C=C+1|0;else{C=1;break}}while(!1);if(ae>>>0<Ie>>>0)ae=ae+1|0;else break}return fn(S|0),_|0}function br(_,S){_=_|0,S=S|0;var C=0,E=0,H=0,W=0,Z=0;if(E=ci(_|0,S|0,52)|0,Pt()|0,E=E&15,!E)return C=S,E=_,fn(C|0),E|0;for(C=1;Z=(15-C|0)*3|0,W=Ii(7,0,Z|0)|0,H=S&~(Pt()|0),S=ci(_|0,S|0,Z|0)|0,Pt()|0,S=Ii(Ts(S&7)|0,0,Z|0)|0,_=S|_&~W,S=Pt()|0|H,C>>>0<E>>>0;)C=C+1|0;return fn(S|0),_|0}function is(_,S){_=_|0,S=S|0;var C=0,E=0,H=0,W=0,Z=0,ae=0,Ie=0,$e=0,ot=0;if(Ie=Et,Et=Et+64|0,ae=Ie+40|0,E=Ie+24|0,H=Ie+12|0,W=Ie,Ii(S|0,0,52)|0,C=Pt()|0|134225919,!S)return(n[_+4>>2]|0)>2||(n[_+8>>2]|0)>2||(n[_+12>>2]|0)>2?(Z=0,ae=0,fn(Z|0),Et=Ie,ae|0):(Ii(Re(_)|0,0,45)|0,Z=Pt()|0|C,ae=-1,fn(Z|0),Et=Ie,ae|0);if(n[ae>>2]=n[_>>2],n[ae+4>>2]=n[_+4>>2],n[ae+8>>2]=n[_+8>>2],n[ae+12>>2]=n[_+12>>2],Z=ae+4|0,(S|0)>0)for(_=-1;n[E>>2]=n[Z>>2],n[E+4>>2]=n[Z+4>>2],n[E+8>>2]=n[Z+8>>2],S&1?(EA(Z),n[H>>2]=n[Z>>2],n[H+4>>2]=n[Z+4>>2],n[H+8>>2]=n[Z+8>>2],Oo(H)):(eo(Z),n[H>>2]=n[Z>>2],n[H+4>>2]=n[Z+4>>2],n[H+8>>2]=n[Z+8>>2],ls(H)),xs(E,H,W),Ln(W),ot=(15-S|0)*3|0,$e=Ii(7,0,ot|0)|0,C=C&~(Pt()|0),ot=Ii(eA(W)|0,0,ot|0)|0,_=ot|_&~$e,C=Pt()|0|C,(S|0)>1;)S=S+-1|0;else _=-1;e:do if((n[Z>>2]|0)<=2&&(n[ae+8>>2]|0)<=2&&(n[ae+12>>2]|0)<=2){if(E=Re(ae)|0,S=Ii(E|0,0,45)|0,S=S|_,_=Pt()|0|C&-1040385,W=at(ae)|0,!(P(E)|0)){if((W|0)<=0)break;for(H=0;;){if(E=ci(S|0,_|0,52)|0,Pt()|0,E=E&15,E)for(C=1;ot=(15-C|0)*3|0,ae=ci(S|0,_|0,ot|0)|0,Pt()|0,$e=Ii(7,0,ot|0)|0,_=_&~(Pt()|0),ot=Ii(Ns(ae&7)|0,0,ot|0)|0,S=S&~$e|ot,_=_|(Pt()|0),C>>>0<E>>>0;)C=C+1|0;if(H=H+1|0,(H|0)==(W|0))break e}}H=ci(S|0,_|0,52)|0,Pt()|0,H=H&15;t:do if(H){C=1;i:for(;;){switch(ot=ci(S|0,_|0,(15-C|0)*3|0)|0,Pt()|0,ot&7){case 1:break i;case 0:break;default:break t}if(C>>>0<H>>>0)C=C+1|0;else break t}if(_i(E,n[ae>>2]|0)|0)for(C=1;ae=(15-C|0)*3|0,$e=Ii(7,0,ae|0)|0,ot=_&~(Pt()|0),_=ci(S|0,_|0,ae|0)|0,Pt()|0,_=Ii(Ts(_&7)|0,0,ae|0)|0,S=S&~$e|_,_=ot|(Pt()|0),C>>>0<H>>>0;)C=C+1|0;else for(C=1;ot=(15-C|0)*3|0,ae=ci(S|0,_|0,ot|0)|0,Pt()|0,$e=Ii(7,0,ot|0)|0,_=_&~(Pt()|0),ot=Ii(Ns(ae&7)|0,0,ot|0)|0,S=S&~$e|ot,_=_|(Pt()|0),C>>>0<H>>>0;)C=C+1|0}while(!1);if((W|0)>0){C=0;do S=ms(S,_)|0,_=Pt()|0,C=C+1|0;while((C|0)!=(W|0))}}else S=0,_=0;while(!1);return $e=_,ot=S,fn($e|0),Et=Ie,ot|0}function zr(_){return _=_|0,(_|0)%2|0|0}function pA(_,S){_=_|0,S=S|0;var C=0,E=0;return E=Et,Et=Et+16|0,C=E,S>>>0<=15&&(n[_+4>>2]&2146435072|0)!=2146435072&&(n[_+8+4>>2]&2146435072|0)!=2146435072?(gu(_,S,C),S=is(C,S)|0,_=Pt()|0):(_=0,S=0),fn(_|0),Et=E,S|0}function Ba(_,S,C){_=_|0,S=S|0,C=C|0;var E=0,H=0,W=0,Z=0;if(H=C+4|0,W=ci(_|0,S|0,52)|0,Pt()|0,W=W&15,Z=ci(_|0,S|0,45)|0,Pt()|0,E=(W|0)==0,P(Z&127)|0){if(E)return Z=1,Z|0;E=1}else{if(E)return Z=0,Z|0;!(n[H>>2]|0)&&!(n[C+8>>2]|0)?E=(n[C+12>>2]|0)!=0&1:E=1}for(C=1;C&1?Oo(H):ls(H),Z=ci(_|0,S|0,(15-C|0)*3|0)|0,Pt()|0,fA(H,Z&7),C>>>0<W>>>0;)C=C+1|0;return E|0}function Bs(_,S,C){_=_|0,S=S|0,C=C|0;var E=0,H=0,W=0,Z=0,ae=0,Ie=0,$e=0,ot=0;ot=Et,Et=Et+16|0,Ie=ot,$e=ci(_|0,S|0,45)|0,Pt()|0,$e=$e&127;e:do if(P($e)|0&&(W=ci(_|0,S|0,52)|0,Pt()|0,W=W&15,(W|0)!=0)){E=1;t:for(;;){switch(ae=ci(_|0,S|0,(15-E|0)*3|0)|0,Pt()|0,ae&7){case 5:break t;case 0:break;default:{E=S;break e}}if(E>>>0<W>>>0)E=E+1|0;else{E=S;break e}}for(H=1,E=S;S=(15-H|0)*3|0,Z=Ii(7,0,S|0)|0,ae=E&~(Pt()|0),E=ci(_|0,E|0,S|0)|0,Pt()|0,E=Ii(Ts(E&7)|0,0,S|0)|0,_=_&~Z|E,E=ae|(Pt()|0),H>>>0<W>>>0;)H=H+1|0}else E=S;while(!1);if(ae=7728+($e*28|0)|0,n[C>>2]=n[ae>>2],n[C+4>>2]=n[ae+4>>2],n[C+8>>2]=n[ae+8>>2],n[C+12>>2]=n[ae+12>>2],!(Ba(_,E,C)|0)){Et=ot;return}if(Z=C+4|0,n[Ie>>2]=n[Z>>2],n[Ie+4>>2]=n[Z+4>>2],n[Ie+8>>2]=n[Z+8>>2],W=ci(_|0,E|0,52)|0,Pt()|0,ae=W&15,W&1?(ls(Z),W=ae+1|0):W=ae,!(P($e)|0))E=0;else{e:do if(!ae)E=0;else for(S=1;;){if(H=ci(_|0,E|0,(15-S|0)*3|0)|0,Pt()|0,H=H&7,H|0){E=H;break e}if(S>>>0<ae>>>0)S=S+1|0;else{E=0;break}}while(!1);E=(E|0)==4&1}if(!(Fo(C,W,E,0)|0))(W|0)!=(ae|0)&&(n[Z>>2]=n[Ie>>2],n[Z+4>>2]=n[Ie+4>>2],n[Z+8>>2]=n[Ie+8>>2]);else{if(P($e)|0)do;while(Fo(C,W,0,0)|0);(W|0)!=(ae|0)&&eo(Z)}Et=ot}function qs(_,S,C){_=_|0,S=S|0,C=C|0;var E=0,H=0;E=Et,Et=Et+16|0,H=E,Bs(_,S,H),S=ci(_|0,S|0,52)|0,Pt()|0,ll(H,S&15,C),Et=E}function so(_,S,C){_=_|0,S=S|0,C=C|0;var E=0,H=0,W=0,Z=0,ae=0;Z=Et,Et=Et+16|0,W=Z,Bs(_,S,W),E=ci(_|0,S|0,45)|0,Pt()|0,E=(P(E&127)|0)==0,H=ci(_|0,S|0,52)|0,Pt()|0,H=H&15;e:do if(!E){if(H|0)for(E=1;;){if(ae=Ii(7,0,(15-E|0)*3|0)|0,!((ae&_|0)==0&((Pt()|0)&S|0)==0))break e;if(E>>>0<H>>>0)E=E+1|0;else break}to(W,H,0,5,C),Et=Z;return}while(!1);io(W,H,0,6,C),Et=Z}function So(_,S){_=_|0,S=S|0;var C=0,E=0,H=0;if(E=ci(_|0,S|0,45)|0,Pt()|0,!(P(E&127)|0))return E=2,E|0;if(E=ci(_|0,S|0,52)|0,Pt()|0,E=E&15,!E)return E=5,E|0;for(C=1;;){if(H=Ii(7,0,(15-C|0)*3|0)|0,!((H&_|0)==0&((Pt()|0)&S|0)==0)){C=2,_=6;break}if(C>>>0<E>>>0)C=C+1|0;else{C=5,_=6;break}}return(_|0)==6?C|0:0}function MA(_,S,C){_=_|0,S=S|0,C=C|0;var E=0,H=0,W=0,Z=0,ae=0,Ie=0,$e=0,ot=0,Nt=0;Nt=Et,Et=Et+128|0,$e=Nt+112|0,W=Nt+96|0,ot=Nt,H=ci(_|0,S|0,52)|0,Pt()|0,ae=H&15,n[$e>>2]=ae,Z=ci(_|0,S|0,45)|0,Pt()|0,Z=Z&127;e:do if(P(Z)|0){if(ae|0)for(E=1;;){if(Ie=Ii(7,0,(15-E|0)*3|0)|0,!((Ie&_|0)==0&((Pt()|0)&S|0)==0)){H=0;break e}if(E>>>0<ae>>>0)E=E+1|0;else break}if(H&1)H=1;else{Ie=Ii(ae+1|0,0,52)|0,ot=Pt()|0|S&-15728641,$e=Ii(7,0,(14-ae|0)*3|0)|0,MA((Ie|_)&~$e,ot&~(Pt()|0),C),Et=Nt;return}}else H=0;while(!1);Bs(_,S,W),H?(bo(W,$e,ot),Ie=5):(xo(W,$e,ot),Ie=6);e:do if(P(Z)|0)if(!ae)E=20;else for(E=1;;){if(Z=Ii(7,0,(15-E|0)*3|0)|0,!((Z&_|0)==0&((Pt()|0)&S|0)==0)){E=8;break e}if(E>>>0<ae>>>0)E=E+1|0;else{E=20;break}}else E=8;while(!1);if(Wr(C|0,-1,E|0)|0,H){H=0;do{for(W=ot+(H<<4)|0,us(W,n[$e>>2]|0)|0,W=n[W>>2]|0,E=0;Z=C+(E<<2)|0,ae=n[Z>>2]|0,!((ae|0)==-1|(ae|0)==(W|0));)E=E+1|0;n[Z>>2]=W,H=H+1|0}while((H|0)!=(Ie|0))}else{H=0;do{for(W=ot+(H<<4)|0,Fo(W,n[$e>>2]|0,0,1)|0,W=n[W>>2]|0,E=0;Z=C+(E<<2)|0,ae=n[Z>>2]|0,!((ae|0)==-1|(ae|0)==(W|0));)E=E+1|0;n[Z>>2]=W,H=H+1|0}while((H|0)!=(Ie|0))}Et=Nt}function Rl(){return 12}function nA(_,S){_=_|0,S=S|0;var C=0,E=0,H=0,W=0,Z=0,ae=0,Ie=0;if(Ii(_|0,0,52)|0,ae=Pt()|0|134225919,(_|0)<1){E=0,C=0;do P(E)|0&&(Ii(E|0,0,45)|0,Z=ae|(Pt()|0),_=S+(C<<3)|0,n[_>>2]=-1,n[_+4>>2]=Z,C=C+1|0),E=E+1|0;while((E|0)!=122);return}Z=0,C=0;do{if(P(Z)|0){for(Ii(Z|0,0,45)|0,E=1,H=-1,W=ae|(Pt()|0);Ie=Ii(7,0,(15-E|0)*3|0)|0,H=H&~Ie,W=W&~(Pt()|0),(E|0)!=(_|0);)E=E+1|0;Ie=S+(C<<3)|0,n[Ie>>2]=H,n[Ie+4>>2]=W,C=C+1|0}Z=Z+1|0}while((Z|0)!=122)}function Sa(_,S,C,E){_=_|0,S=S|0,C=C|0,E=E|0;var H=0,W=0,Z=0,ae=0,Ie=0,$e=0;if(ae=Et,Et=Et+64|0,Z=ae,(_|0)==(C|0)&(S|0)==(E|0)|(!1|(S&2013265920|0)!=134217728|(!1|(E&2013265920|0)!=134217728))||(H=ci(_|0,S|0,52)|0,Pt()|0,H=H&15,W=ci(C|0,E|0,52)|0,Pt()|0,(H|0)!=(W&15|0)))return Z=0,Et=ae,Z|0;if(W=H+-1|0,H>>>0>1&&($e=no(_,S,W)|0,Ie=Pt()|0,W=no(C,E,W)|0,($e|0)==(W|0)&(Ie|0)==(Pt()|0))&&(W=(H^15)*3|0,H=ci(_|0,S|0,W|0)|0,Pt()|0,H=H&7,W=ci(C|0,E|0,W|0)|0,Pt()|0,W=W&7,(H|0)==0|(W|0)==0||(n[21136+(H<<2)>>2]|0)==(W|0)||(n[21168+(H<<2)>>2]|0)==(W|0)))return $e=1,Et=ae,$e|0;H=Z,W=H+56|0;do n[H>>2]=0,H=H+4|0;while((H|0)<(W|0));return va(_,S,1,Z),$e=Z,!((n[$e>>2]|0)==(C|0)&&(n[$e+4>>2]|0)==(E|0))&&($e=Z+8|0,!((n[$e>>2]|0)==(C|0)&&(n[$e+4>>2]|0)==(E|0)))&&($e=Z+16|0,!((n[$e>>2]|0)==(C|0)&&(n[$e+4>>2]|0)==(E|0)))&&($e=Z+24|0,!((n[$e>>2]|0)==(C|0)&&(n[$e+4>>2]|0)==(E|0)))&&($e=Z+32|0,!((n[$e>>2]|0)==(C|0)&&(n[$e+4>>2]|0)==(E|0)))&&($e=Z+40|0,!((n[$e>>2]|0)==(C|0)&&(n[$e+4>>2]|0)==(E|0)))?(H=Z+48|0,H=((n[H>>2]|0)==(C|0)?(n[H+4>>2]|0)==(E|0):0)&1):H=1,$e=H,Et=ae,$e|0}function Xt(_,S,C,E){_=_|0,S=S|0,C=C|0,E=E|0;var H=0,W=0,Z=0,ae=0,Ie=0,$e=0,ot=0;if($e=Et,Et=Et+16|0,Z=$e,!(Sa(_,S,C,E)|0))return ae=0,Ie=0,fn(ae|0),Et=$e,Ie|0;for(ae=S&-2130706433,H=(Kr(_,S)|0)==0,H=H?1:2;n[Z>>2]=0,ot=bn(_,S,H,Z)|0,W=H+1|0,!((ot|0)==(C|0)&(Pt()|0)==(E|0));)if(W>>>0<7)H=W;else{H=0,_=0,Ie=6;break}return(Ie|0)==6?(fn(H|0),Et=$e,_|0):(ot=Ii(H|0,0,56)|0,Ie=ae|(Pt()|0)|268435456,ot=_|ot,fn(Ie|0),Et=$e,ot|0)}function Si(_,S){_=_|0,S=S|0;var C=0;return C=!0&(S&2013265920|0)==268435456,fn((C?S&-2130706433|134217728:0)|0),(C?_:0)|0}function gi(_,S){_=_|0,S=S|0;var C=0,E=0,H=0;return E=Et,Et=Et+16|0,C=E,!0&(S&2013265920|0)==268435456?(H=ci(_|0,S|0,56)|0,Pt()|0,n[C>>2]=0,C=bn(_,S&-2130706433|134217728,H&7,C)|0,S=Pt()|0,fn(S|0),Et=E,C|0):(S=0,C=0,fn(S|0),Et=E,C|0)}function mt(_,S){_=_|0,S=S|0;var C=0;if(!(!0&(S&2013265920|0)==268435456))return C=0,C|0;switch(C=ci(_|0,S|0,56)|0,Pt()|0,C&7){case 0:case 7:return C=0,C|0}return C=S&-2130706433|134217728,!0&(S&117440512|0)==16777216&(Kr(_,C)|0)!=0?(C=0,C|0):(C=Lr(_,C)|0,C|0)}function Bt(_,S,C){_=_|0,S=S|0,C=C|0;var E=0,H=0,W=0,Z=0,ae=0;W=Et,Et=Et+16|0,E=W,Z=!0&(S&2013265920|0)==268435456,H=S&-2130706433|134217728,ae=C,n[ae>>2]=Z?_:0,n[ae+4>>2]=Z?H:0,Z?(S=ci(_|0,S|0,56)|0,Pt()|0,n[E>>2]=0,_=bn(_,H,S&7,E)|0,S=Pt()|0):(_=0,S=0),ae=C+8|0,n[ae>>2]=_,n[ae+4>>2]=S,Et=W}function ii(_,S,C){_=_|0,S=S|0,C=C|0;var E=0,H=0;H=(Kr(_,S)|0)==0,S=S&-2130706433,E=C,n[E>>2]=H?_:0,n[E+4>>2]=H?S|285212672:0,E=C+8|0,n[E>>2]=_,n[E+4>>2]=S|301989888,E=C+16|0,n[E>>2]=_,n[E+4>>2]=S|318767104,E=C+24|0,n[E>>2]=_,n[E+4>>2]=S|335544320,E=C+32|0,n[E>>2]=_,n[E+4>>2]=S|352321536,C=C+40|0,n[C>>2]=_,n[C+4>>2]=S|369098752}function Ci(_,S,C){_=_|0,S=S|0,C=C|0;var E=0,H=0,W=0,Z=0,ae=0;if(Z=Et,Et=Et+16|0,W=Z,E=ci(_|0,S|0,56)|0,Pt()|0,ae=!0&(S&2013265920|0)==268435456,H=ae?_:0,_=ae?S&-2130706433|134217728:0,S=vu(H,_,E&7)|0,(S|0)==-1){n[C>>2]=0,Et=Z;return}Bs(H,_,W),E=ci(H|0,_|0,52)|0,Pt()|0,E=E&15,Kr(H,_)|0?to(W,E,S,2,C):io(W,E,S,2,C),Et=Z}function ln(_){_=_|0;var S=0,C=0,E=0;return S=Io(1,12)|0,S||Fi(22691,22646,49,22704),C=_+4|0,E=n[C>>2]|0,E|0?(E=E+8|0,n[E>>2]=S,n[C>>2]=S,S|0):(n[_>>2]|0&&Fi(22721,22646,61,22744),E=_,n[E>>2]=S,n[C>>2]=S,S|0)}function Pn(_,S){_=_|0,S=S|0;var C=0,E=0;return E=da(24)|0,E||Fi(22758,22646,78,22772),n[E>>2]=n[S>>2],n[E+4>>2]=n[S+4>>2],n[E+8>>2]=n[S+8>>2],n[E+12>>2]=n[S+12>>2],n[E+16>>2]=0,S=_+4|0,C=n[S>>2]|0,C|0?(n[C+16>>2]=E,n[S>>2]=E,E|0):(n[_>>2]|0&&Fi(22787,22646,82,22772),n[_>>2]=E,n[S>>2]=E,E|0)}function Qn(_){_=_|0;var S=0,C=0,E=0,H=0;if(_)for(E=1;;){if(S=n[_>>2]|0,S|0)do{if(C=n[S>>2]|0,C|0)do H=C,C=n[C+16>>2]|0,zn(H);while(C|0);H=S,S=n[S+8>>2]|0,zn(H)}while(S|0);if(S=_,_=n[_+8>>2]|0,E||zn(S),_)E=0;else break}}function Bn(_){_=_|0;var S=0,C=0,E=0,H=0,W=0,Z=0,ae=0,Ie=0,$e=0,ot=0,Nt=0,wt=0,It=0,R=0,s=0,g=0,I=0,M=0,F=0,q=0,A=0,l=0,f=0,m=0,b=0,T=0,z=0,N=0,X=0,te=0,ve=0,De=0;if(H=_+8|0,n[H>>2]|0)return De=1,De|0;if(E=n[_>>2]|0,!E)return De=0,De|0;S=E,C=0;do C=C+1|0,S=n[S+8>>2]|0;while(S|0);if(C>>>0<2)return De=0,De|0;te=da(C<<2)|0,te||Fi(22807,22646,317,22826),X=da(C<<5)|0,X||Fi(22848,22646,321,22826),n[_>>2]=0,l=_+4|0,n[l>>2]=0,n[H>>2]=0,C=0,N=0,A=0,Nt=0;e:for(;;){if(ot=n[E>>2]|0,ot){W=0,Z=ot;do{if(Ie=+ce[Z+8>>3],S=Z,Z=n[Z+16>>2]|0,$e=(Z|0)==0,H=$e?ot:Z,ae=+ce[H+8>>3],+ui(+(Ie-ae))>3.141592653589793){De=14;break}W=W+(ae-Ie)*(+ce[S>>3]+ +ce[H>>3])}while(!$e);if((De|0)==14){De=0,W=0,S=ot;do q=+ce[S+8>>3],z=S+16|0,T=n[z>>2]|0,T=T|0?T:ot,F=+ce[T+8>>3],W=W+(+ce[S>>3]+ +ce[T>>3])*((F<0?F+6.283185307179586:F)-(q<0?q+6.283185307179586:q)),S=n[(S|0?z:E)>>2]|0;while(S|0)}W>0?(n[te+(N<<2)>>2]=E,N=N+1|0,H=A,S=Nt):De=19}else De=19;if((De|0)==19){De=0;do if(C){if(S=C+8|0,n[S>>2]|0){De=21;break e}if(C=Io(1,12)|0,!C){De=23;break e}n[S>>2]=C,H=C+4|0,Z=C,S=Nt}else if(Nt){H=l,Z=Nt+8|0,S=E,C=_;break}else if(n[_>>2]|0){De=27;break e}else{H=l,Z=_,S=E,C=_;break}while(!1);if(n[Z>>2]=E,n[H>>2]=E,Z=X+(A<<5)|0,$e=n[E>>2]|0,$e){for(ot=X+(A<<5)+8|0,ce[ot>>3]=17976931348623157e292,Nt=X+(A<<5)+24|0,ce[Nt>>3]=17976931348623157e292,ce[Z>>3]=-17976931348623157e292,wt=X+(A<<5)+16|0,ce[wt>>3]=-17976931348623157e292,I=17976931348623157e292,M=-17976931348623157e292,H=0,It=$e,Ie=17976931348623157e292,s=17976931348623157e292,g=-17976931348623157e292,ae=-17976931348623157e292;W=+ce[It>>3],q=+ce[It+8>>3],It=n[It+16>>2]|0,R=(It|0)==0,F=+ce[(R?$e:It)+8>>3],W<Ie&&(ce[ot>>3]=W,Ie=W),q<s&&(ce[Nt>>3]=q,s=q),W>g?ce[Z>>3]=W:W=g,q>ae&&(ce[wt>>3]=q,ae=q),I=q>0&q<I?q:I,M=q<0&q>M?q:M,H=H|+ui(+(q-F))>3.141592653589793,!R;)g=W;H&&(ce[wt>>3]=M,ce[Nt>>3]=I)}else n[Z>>2]=0,n[Z+4>>2]=0,n[Z+8>>2]=0,n[Z+12>>2]=0,n[Z+16>>2]=0,n[Z+20>>2]=0,n[Z+24>>2]=0,n[Z+28>>2]=0;H=A+1|0}if(z=E+8|0,E=n[z>>2]|0,n[z>>2]=0,E)A=H,Nt=S;else{De=45;break}}if((De|0)==21)Fi(22624,22646,35,22658);else if((De|0)==23)Fi(22678,22646,37,22658);else if((De|0)==27)Fi(22721,22646,61,22744);else if((De|0)==45){e:do if((N|0)>0){for(z=(H|0)==0,b=H<<2,T=(_|0)==0,m=0,S=0;;){if(f=n[te+(m<<2)>>2]|0,z)De=73;else{if(A=da(b)|0,!A){De=50;break}if(l=da(b)|0,!l){De=52;break}t:do if(T)C=0;else{for(H=0,C=0,Z=_;E=X+(H<<5)|0,cs(n[Z>>2]|0,E,n[f>>2]|0)|0?(n[A+(C<<2)>>2]=Z,n[l+(C<<2)>>2]=E,R=C+1|0):R=C,Z=n[Z+8>>2]|0,Z;)H=H+1|0,C=R;if((R|0)>0)if(E=n[A>>2]|0,(R|0)==1)C=E;else for(wt=0,It=-1,C=E,Nt=E;;){for($e=n[Nt>>2]|0,E=0,Z=0;H=n[n[A+(Z<<2)>>2]>>2]|0,(H|0)==($e|0)?ot=E:ot=E+((cs(H,n[l+(Z<<2)>>2]|0,n[$e>>2]|0)|0)&1)|0,Z=Z+1|0,(Z|0)!=(R|0);)E=ot;if(H=(ot|0)>(It|0),C=H?Nt:C,E=wt+1|0,(E|0)==(R|0))break t;wt=E,It=H?ot:It,Nt=n[A+(E<<2)>>2]|0}else C=0}while(!1);if(zn(A),zn(l),C){if(H=C+4|0,E=n[H>>2]|0,E)C=E+8|0;else if(n[C>>2]|0){De=70;break}n[C>>2]=f,n[H>>2]=f}else De=73}if((De|0)==73){if(De=0,S=n[f>>2]|0,S|0)do l=S,S=n[S+16>>2]|0,zn(l);while(S|0);zn(f),S=2}if(m=m+1|0,(m|0)>=(N|0)){ve=S;break e}}(De|0)==50?Fi(22863,22646,249,22882):(De|0)==52?Fi(22901,22646,252,22882):(De|0)==70&&Fi(22721,22646,61,22744)}else ve=0;while(!1);return zn(te),zn(X),De=ve,De|0}return 0}function cs(_,S,C){_=_|0,S=S|0,C=C|0;var E=0,H=0,W=0,Z=0,ae=0,Ie=0,$e=0,ot=0;if(!(Ma(S,C)|0)||(S=yr(S)|0,$e=+ce[C>>3],E=+ce[C+8>>3],E=S&E<0?E+6.283185307179586:E,_=n[_>>2]|0,!_))return _=0,_|0;if(S){S=0,C=_;e:for(;;){for(;Z=+ce[C>>3],Ie=+ce[C+8>>3],C=C+16|0,ot=n[C>>2]|0,ot=ot|0?ot:_,W=+ce[ot>>3],H=+ce[ot+8>>3],Z>W?(ae=Z,Z=Ie):(ae=W,W=Z,Z=H,H=Ie),!!($e<W|$e>ae);)if(C=n[C>>2]|0,!C){C=22;break e}if(Ie=H<0?H+6.283185307179586:H,Z=Z<0?Z+6.283185307179586:Z,E=Z==E|Ie==E?E+-2220446049250313e-31:E,Ie=Ie+($e-W)/(ae-W)*(Z-Ie),(Ie<0?Ie+6.283185307179586:Ie)>E&&(S=S^1),C=n[C>>2]|0,!C){C=22;break}}if((C|0)==22)return S|0}else{S=0,C=_;e:for(;;){for(;Z=+ce[C>>3],Ie=+ce[C+8>>3],C=C+16|0,ot=n[C>>2]|0,ot=ot|0?ot:_,W=+ce[ot>>3],H=+ce[ot+8>>3],Z>W?(ae=Z,Z=Ie):(ae=W,W=Z,Z=H,H=Ie),!!($e<W|$e>ae);)if(C=n[C>>2]|0,!C){C=22;break e}if(E=Z==E|H==E?E+-2220446049250313e-31:E,H+($e-W)/(ae-W)*(Z-H)>E&&(S=S^1),C=n[C>>2]|0,!C){C=22;break}}if((C|0)==22)return S|0}return 0}function Zs(_,S,C,E,H){_=_|0,S=S|0,C=C|0,E=E|0,H=H|0;var W=0,Z=0,ae=0,Ie=0,$e=0,ot=0,Nt=0,wt=0,It=0,R=0,s=0,g=0,I=0,M=0;if(M=Et,Et=Et+32|0,I=M+16|0,g=M,W=ci(_|0,S|0,52)|0,Pt()|0,W=W&15,It=ci(C|0,E|0,52)|0,Pt()|0,(W|0)!=(It&15|0))return I=1,Et=M,I|0;if($e=ci(_|0,S|0,45)|0,Pt()|0,$e=$e&127,ot=ci(C|0,E|0,45)|0,Pt()|0,ot=ot&127,It=($e|0)!=(ot|0),It){if(ae=Xi($e,ot)|0,(ae|0)==7)return I=2,Et=M,I|0;Ie=Xi(ot,$e)|0,(Ie|0)==7?Fi(22925,22949,151,22959):(R=ae,Z=Ie)}else R=0,Z=0;Nt=P($e)|0,wt=P(ot)|0,n[I>>2]=0,n[I+4>>2]=0,n[I+8>>2]=0,n[I+12>>2]=0;do if(R){if(ot=n[4304+($e*28|0)+(R<<2)>>2]|0,ae=(ot|0)>0,wt)if(ae){$e=0,Ie=C,ae=E;do Ie=Qa(Ie,ae)|0,ae=Pt()|0,Z=Ts(Z)|0,(Z|0)==1&&(Z=Ts(1)|0),$e=$e+1|0;while(($e|0)!=(ot|0));ot=Z,$e=Ie,Ie=ae}else ot=Z,$e=C,Ie=E;else if(ae){$e=0,Ie=C,ae=E;do Ie=br(Ie,ae)|0,ae=Pt()|0,Z=Ts(Z)|0,$e=$e+1|0;while(($e|0)!=(ot|0));ot=Z,$e=Ie,Ie=ae}else ot=Z,$e=C,Ie=E;if(Ba($e,Ie,I)|0,It||Fi(22972,22949,181,22959),ae=(Nt|0)!=0,Z=(wt|0)!=0,ae&Z&&Fi(22999,22949,182,22959),ae){if(Z=Ss(_,S)|0,pt[22032+(Z*7|0)+R>>0]|0){W=3;break}Ie=n[21200+(Z*28|0)+(R<<2)>>2]|0,$e=Ie,s=26}else if(Z){if(Z=Ss($e,Ie)|0,pt[22032+(Z*7|0)+ot>>0]|0){W=4;break}$e=0,Ie=n[21200+(ot*28|0)+(Z<<2)>>2]|0,s=26}else Z=0;if((s|0)==26)if((Ie|0)<=-1&&Fi(23030,22949,212,22959),($e|0)<=-1&&Fi(23053,22949,213,22959),(Ie|0)>0){ae=I+4|0,Z=0;do vo(ae),Z=Z+1|0;while((Z|0)!=(Ie|0));Z=$e}else Z=$e;if(n[g>>2]=0,n[g+4>>2]=0,n[g+8>>2]=0,fA(g,R),W|0)for(;zr(W)|0?Oo(g):ls(g),(W|0)>1;)W=W+-1|0;if((Z|0)>0){W=0;do vo(g),W=W+1|0;while((W|0)!=(Z|0))}s=I+4|0,Er(s,g,s),Ln(s),s=50}else if(Ba(C,E,I)|0,(Nt|0)!=0&(wt|0)!=0)if((ot|0)!=($e|0)&&Fi(23077,22949,243,22959),Z=Ss(_,S)|0,W=Ss(C,E)|0,pt[22032+(Z*7|0)+W>>0]|0)W=5;else if(Z=n[21200+(Z*28|0)+(W<<2)>>2]|0,(Z|0)>0){ae=I+4|0,W=0;do vo(ae),W=W+1|0;while((W|0)!=(Z|0));s=50}else s=50;else s=50;while(!1);return(s|0)==50&&(W=I+4|0,n[H>>2]=n[W>>2],n[H+4>>2]=n[W+4>>2],n[H+8>>2]=n[W+8>>2],W=0),I=W,Et=M,I|0}function Js(_,S,C,E){_=_|0,S=S|0,C=C|0,E=E|0;var H=0,W=0,Z=0,ae=0,Ie=0,$e=0,ot=0,Nt=0,wt=0,It=0,R=0,s=0,g=0,I=0,M=0;if(R=Et,Et=Et+48|0,Z=R+36|0,ae=R+24|0,Ie=R+12|0,$e=R,W=ci(_|0,S|0,52)|0,Pt()|0,W=W&15,wt=ci(_|0,S|0,45)|0,Pt()|0,wt=wt&127,ot=P(wt)|0,Ii(W|0,0,52)|0,g=Pt()|0|134225919,s=E,n[s>>2]=-1,n[s+4>>2]=g,!W)return(n[C>>2]|0)>1||(n[C+4>>2]|0)>1||(n[C+8>>2]|0)>1||(H=Qi(wt,eA(C)|0)|0,(H|0)==127)?(g=1,Et=R,g|0):(It=Ii(H|0,0,45)|0,s=Pt()|0,wt=E,s=n[wt+4>>2]&-1040385|s,g=E,n[g>>2]=n[wt>>2]|It,n[g+4>>2]=s,g=0,Et=R,g|0);for(n[Z>>2]=n[C>>2],n[Z+4>>2]=n[C+4>>2],n[Z+8>>2]=n[C+8>>2];n[ae>>2]=n[Z>>2],n[ae+4>>2]=n[Z+4>>2],n[ae+8>>2]=n[Z+8>>2],zr(W)|0?(EA(Z),n[Ie>>2]=n[Z>>2],n[Ie+4>>2]=n[Z+4>>2],n[Ie+8>>2]=n[Z+8>>2],Oo(Ie)):(eo(Z),n[Ie>>2]=n[Z>>2],n[Ie+4>>2]=n[Z+4>>2],n[Ie+8>>2]=n[Z+8>>2],ls(Ie)),xs(ae,Ie,$e),Ln($e),s=E,I=n[s>>2]|0,s=n[s+4>>2]|0,M=(15-W|0)*3|0,C=Ii(7,0,M|0)|0,s=s&~(Pt()|0),M=Ii(eA($e)|0,0,M|0)|0,s=Pt()|0|s,g=E,n[g>>2]=M|I&~C,n[g+4>>2]=s,(W|0)>1;)W=W+-1|0;e:do if((n[Z>>2]|0)<=1&&(n[Z+4>>2]|0)<=1&&(n[Z+8>>2]|0)<=1){W=eA(Z)|0,ae=Qi(wt,W)|0,(ae|0)==127?$e=0:$e=P(ae)|0;t:do if(W){if(ot){if(Z=21408+((Ss(_,S)|0)*28|0)+(W<<2)|0,Z=n[Z>>2]|0,(Z|0)>0){C=0;do W=Ns(W)|0,C=C+1|0;while((C|0)!=(Z|0))}if((W|0)==1){H=3;break e}C=Qi(wt,W)|0,(C|0)==127&&Fi(23104,22949,376,23134),P(C)|0?Fi(23147,22949,377,23134):(It=Z,Nt=W,H=C)}else It=0,Nt=W,H=ae;if(Ie=n[4304+(wt*28|0)+(Nt<<2)>>2]|0,(Ie|0)<=-1&&Fi(23178,22949,384,23134),!$e){if((It|0)<=-1&&Fi(23030,22949,417,23134),It|0){Z=E,W=0,C=n[Z>>2]|0,Z=n[Z+4>>2]|0;do C=ha(C,Z)|0,Z=Pt()|0,M=E,n[M>>2]=C,n[M+4>>2]=Z,W=W+1|0;while((W|0)<(It|0))}if((Ie|0)<=0){W=54;break}for(Z=E,W=0,C=n[Z>>2]|0,Z=n[Z+4>>2]|0;;)if(C=ha(C,Z)|0,Z=Pt()|0,M=E,n[M>>2]=C,n[M+4>>2]=Z,W=W+1|0,(W|0)==(Ie|0)){W=54;break t}}if(ae=Xi(H,wt)|0,(ae|0)==7&&Fi(22925,22949,393,23134),W=E,C=n[W>>2]|0,W=n[W+4>>2]|0,(Ie|0)>0){Z=0;do C=ha(C,W)|0,W=Pt()|0,M=E,n[M>>2]=C,n[M+4>>2]=W,Z=Z+1|0;while((Z|0)!=(Ie|0))}if(C=Ss(C,W)|0,M=re(H)|0,C=n[(M?21824:21616)+(ae*28|0)+(C<<2)>>2]|0,(C|0)<=-1&&Fi(23030,22949,412,23134),!C)W=54;else{ae=E,W=0,Z=n[ae>>2]|0,ae=n[ae+4>>2]|0;do Z=ms(Z,ae)|0,ae=Pt()|0,M=E,n[M>>2]=Z,n[M+4>>2]=ae,W=W+1|0;while((W|0)<(C|0));W=54}}else if((ot|0)!=0&($e|0)!=0)if(M=Ss(_,S)|0,W=E,W=21408+(M*28|0)+((Ss(n[W>>2]|0,n[W+4>>2]|0)|0)<<2)|0,W=n[W>>2]|0,(W|0)<=-1&&Fi(23201,22949,433,23134),!W)H=ae,W=55;else{Z=E,H=0,C=n[Z>>2]|0,Z=n[Z+4>>2]|0;do C=ha(C,Z)|0,Z=Pt()|0,M=E,n[M>>2]=C,n[M+4>>2]=Z,H=H+1|0;while((H|0)<(W|0));H=ae,W=54}else H=ae,W=54;while(!1);if((W|0)==54&&$e&&(W=55),(W|0)==55&&(M=E,(Ss(n[M>>2]|0,n[M+4>>2]|0)|0)==1)){H=4;break}M=E,g=n[M>>2]|0,M=n[M+4>>2]&-1040385,I=Ii(H|0,0,45)|0,M=M|(Pt()|0),H=E,n[H>>2]=g|I,n[H+4>>2]=M,H=0}else H=2;while(!1);return M=H,Et=R,M|0}function fa(_,S,C,E,H){_=_|0,S=S|0,C=C|0,E=E|0,H=H|0;var W=0,Z=0;return Z=Et,Et=Et+16|0,W=Z,_=Zs(_,S,C,E,W)|0,_||(yo(W,H),_=0),Et=Z,_|0}function cl(_,S,C,E){_=_|0,S=S|0,C=C|0,E=E|0;var H=0,W=0;return H=Et,Et=Et+16|0,W=H,zo(C,W),E=Js(_,S,W,E)|0,Et=H,E|0}function jr(_,S,C,E){_=_|0,S=S|0,C=C|0,E=E|0;var H=0,W=0,Z=0;return Z=Et,Et=Et+32|0,H=Z+12|0,W=Z,!(Zs(_,S,_,S,H)|0)&&!(Zs(_,S,C,E,W)|0)?_=La(H,W)|0:_=-1,Et=Z,_|0}function Hu(_,S,C,E){_=_|0,S=S|0,C=C|0,E=E|0;var H=0,W=0,Z=0;return Z=Et,Et=Et+32|0,H=Z+12|0,W=Z,!(Zs(_,S,_,S,H)|0)&&!(Zs(_,S,C,E,W)|0)?_=La(H,W)|0:_=-1,Et=Z,(_>>>31^1)+_|0}function Ol(_,S,C,E,H){_=_|0,S=S|0,C=C|0,E=E|0,H=H|0;var W=0,Z=0,ae=0,Ie=0,$e=0,ot=0,Nt=0,wt=0,It=0,R=0,s=0,g=0,I=0,M=0,F=0,q=0,A=0,l=0;if(A=Et,Et=Et+48|0,W=A+24|0,Z=A+12|0,q=A,!(Zs(_,S,_,S,W)|0)&&!(Zs(_,S,C,E,Z)|0)){if(F=La(W,Z)|0,(F|0)<0)return q=F,Et=A,q|0;for(n[W>>2]=0,n[W+4>>2]=0,n[W+8>>2]=0,n[Z>>2]=0,n[Z+4>>2]=0,n[Z+8>>2]=0,Zs(_,S,_,S,W)|0,Zs(_,S,C,E,Z)|0,VA(W),VA(Z),F?(ot=n[W>>2]|0,It=+(F|0),g=W+4|0,Nt=n[g>>2]|0,I=W+8|0,wt=n[I>>2]|0,M=W,C=ot,E=Nt,W=wt,R=+((n[Z>>2]|0)-ot|0)/It,s=+((n[Z+4>>2]|0)-Nt|0)/It,It=+((n[Z+8>>2]|0)-wt|0)/It):(E=W+4|0,wt=W+8|0,g=E,I=wt,M=W,C=n[W>>2]|0,E=n[E>>2]|0,W=n[wt>>2]|0,R=0,s=0,It=0),n[q>>2]=C,wt=q+4|0,n[wt>>2]=E,Nt=q+8|0,n[Nt>>2]=W,ot=0;;){Ie=+(ot|0),l=R*Ie+ +(C|0),ae=s*Ie+ +(n[g>>2]|0),Ie=It*Ie+ +(n[I>>2]|0),E=~~+pl(+l),Z=~~+pl(+ae),C=~~+pl(+Ie),l=+ui(+(+(E|0)-l)),ae=+ui(+(+(Z|0)-ae)),Ie=+ui(+(+(C|0)-Ie));do if(l>ae&l>Ie)E=0-(Z+C)|0,W=Z;else if($e=0-E|0,ae>Ie){W=$e-C|0;break}else{W=Z,C=$e-Z|0;break}while(!1);if(n[q>>2]=E,n[wt>>2]=W,n[Nt>>2]=C,Dr(q),Js(_,S,q,H+(ot<<3)|0)|0,(ot|0)==(F|0))break;ot=ot+1|0,C=n[M>>2]|0}return q=0,Et=A,q|0}return q=-1,Et=A,q|0}function ao(_,S){_=_|0,S=S|0;var C=0;if(!S)return C=1,C|0;C=_,_=1;do _=vr(S&1|0?C:1,_)|0,S=S>>1,C=vr(C,C)|0;while(S|0);return _|0}function rA(_,S,C){_=_|0,S=S|0,C=C|0;var E=0,H=0,W=0,Z=0,ae=0,Ie=0,$e=0,ot=0,Nt=0,wt=0;if(!(Ma(S,C)|0)||(S=yr(S)|0,wt=+ce[C>>3],E=+ce[C+8>>3],E=S&E<0?E+6.283185307179586:E,Nt=n[_>>2]|0,(Nt|0)<=0))return Nt=0,Nt|0;if(ot=n[_+4>>2]|0,S){S=0,C=-1,_=0;e:for(;;){for($e=_;Z=+ce[ot+($e<<4)>>3],Ie=+ce[ot+($e<<4)+8>>3],_=(C+2|0)%(Nt|0)|0,W=+ce[ot+(_<<4)>>3],H=+ce[ot+(_<<4)+8>>3],Z>W?(ae=Z,Z=Ie):(ae=W,W=Z,Z=H,H=Ie),!!(wt<W|wt>ae);)if(C=$e+1|0,(C|0)<(Nt|0))_=$e,$e=C,C=_;else{C=22;break e}if(Ie=H<0?H+6.283185307179586:H,Z=Z<0?Z+6.283185307179586:Z,E=Z==E|Ie==E?E+-2220446049250313e-31:E,Ie=Ie+(wt-W)/(ae-W)*(Z-Ie),(Ie<0?Ie+6.283185307179586:Ie)>E&&(S=S^1),_=$e+1|0,(_|0)>=(Nt|0)){C=22;break}else C=$e}if((C|0)==22)return S|0}else{S=0,C=-1,_=0;e:for(;;){for($e=_;Z=+ce[ot+($e<<4)>>3],Ie=+ce[ot+($e<<4)+8>>3],_=(C+2|0)%(Nt|0)|0,W=+ce[ot+(_<<4)>>3],H=+ce[ot+(_<<4)+8>>3],Z>W?(ae=Z,Z=Ie):(ae=W,W=Z,Z=H,H=Ie),!!(wt<W|wt>ae);)if(C=$e+1|0,(C|0)<(Nt|0))_=$e,$e=C,C=_;else{C=22;break e}if(E=Z==E|H==E?E+-2220446049250313e-31:E,H+(wt-W)/(ae-W)*(Z-H)>E&&(S=S^1),_=$e+1|0,(_|0)>=(Nt|0)){C=22;break}else C=$e}if((C|0)==22)return S|0}return 0}function un(_,S){_=_|0,S=S|0;var C=0,E=0,H=0,W=0,Z=0,ae=0,Ie=0,$e=0,ot=0,Nt=0,wt=0,It=0,R=0,s=0,g=0,I=0,M=0;if(R=n[_>>2]|0,!R){n[S>>2]=0,n[S+4>>2]=0,n[S+8>>2]=0,n[S+12>>2]=0,n[S+16>>2]=0,n[S+20>>2]=0,n[S+24>>2]=0,n[S+28>>2]=0;return}if(s=S+8|0,ce[s>>3]=17976931348623157e292,g=S+24|0,ce[g>>3]=17976931348623157e292,ce[S>>3]=-17976931348623157e292,I=S+16|0,ce[I>>3]=-17976931348623157e292,!((R|0)<=0)){for(wt=n[_+4>>2]|0,$e=17976931348623157e292,ot=-17976931348623157e292,Nt=0,_=-1,W=17976931348623157e292,Z=17976931348623157e292,Ie=-17976931348623157e292,E=-17976931348623157e292,It=0;C=+ce[wt+(It<<4)>>3],ae=+ce[wt+(It<<4)+8>>3],_=_+2|0,H=+ce[wt+(((_|0)==(R|0)?0:_)<<4)+8>>3],C<W&&(ce[s>>3]=C,W=C),ae<Z&&(ce[g>>3]=ae,Z=ae),C>Ie?ce[S>>3]=C:C=Ie,ae>E&&(ce[I>>3]=ae,E=ae),$e=ae>0&ae<$e?ae:$e,ot=ae<0&ae>ot?ae:ot,Nt=Nt|+ui(+(ae-H))>3.141592653589793,_=It+1|0,(_|0)!=(R|0);)M=It,Ie=C,It=_,_=M;Nt&&(ce[I>>3]=ot,ce[g>>3]=$e)}}function Co(_,S){_=_|0,S=S|0;var C=0,E=0,H=0,W=0,Z=0,ae=0,Ie=0,$e=0,ot=0,Nt=0,wt=0,It=0,R=0,s=0,g=0,I=0,M=0,F=0,q=0,A=0,l=0,f=0;if(R=n[_>>2]|0,R){if(s=S+8|0,ce[s>>3]=17976931348623157e292,g=S+24|0,ce[g>>3]=17976931348623157e292,ce[S>>3]=-17976931348623157e292,I=S+16|0,ce[I>>3]=-17976931348623157e292,(R|0)>0){for(H=n[_+4>>2]|0,wt=17976931348623157e292,It=-17976931348623157e292,E=0,C=-1,Ie=17976931348623157e292,$e=17976931348623157e292,Nt=-17976931348623157e292,Z=-17976931348623157e292,M=0;W=+ce[H+(M<<4)>>3],ot=+ce[H+(M<<4)+8>>3],l=C+2|0,ae=+ce[H+(((l|0)==(R|0)?0:l)<<4)+8>>3],W<Ie&&(ce[s>>3]=W,Ie=W),ot<$e&&(ce[g>>3]=ot,$e=ot),W>Nt?ce[S>>3]=W:W=Nt,ot>Z&&(ce[I>>3]=ot,Z=ot),wt=ot>0&ot<wt?ot:wt,It=ot<0&ot>It?ot:It,E=E|+ui(+(ot-ae))>3.141592653589793,C=M+1|0,(C|0)!=(R|0);)l=M,Nt=W,M=C,C=l;E&&(ce[I>>3]=It,ce[g>>3]=wt)}}else n[S>>2]=0,n[S+4>>2]=0,n[S+8>>2]=0,n[S+12>>2]=0,n[S+16>>2]=0,n[S+20>>2]=0,n[S+24>>2]=0,n[S+28>>2]=0;if(l=_+8|0,C=n[l>>2]|0,!((C|0)<=0)){A=_+12|0,q=0;do if(H=n[A>>2]|0,E=q,q=q+1|0,g=S+(q<<5)|0,I=n[H+(E<<3)>>2]|0,I){if(M=S+(q<<5)+8|0,ce[M>>3]=17976931348623157e292,_=S+(q<<5)+24|0,ce[_>>3]=17976931348623157e292,ce[g>>3]=-17976931348623157e292,F=S+(q<<5)+16|0,ce[F>>3]=-17976931348623157e292,(I|0)>0){for(R=n[H+(E<<3)+4>>2]|0,wt=17976931348623157e292,It=-17976931348623157e292,H=0,E=-1,s=0,Ie=17976931348623157e292,$e=17976931348623157e292,ot=-17976931348623157e292,Z=-17976931348623157e292;W=+ce[R+(s<<4)>>3],Nt=+ce[R+(s<<4)+8>>3],E=E+2|0,ae=+ce[R+(((E|0)==(I|0)?0:E)<<4)+8>>3],W<Ie&&(ce[M>>3]=W,Ie=W),Nt<$e&&(ce[_>>3]=Nt,$e=Nt),W>ot?ce[g>>3]=W:W=ot,Nt>Z&&(ce[F>>3]=Nt,Z=Nt),wt=Nt>0&Nt<wt?Nt:wt,It=Nt<0&Nt>It?Nt:It,H=H|+ui(+(Nt-ae))>3.141592653589793,E=s+1|0,(E|0)!=(I|0);)f=s,s=E,ot=W,E=f;H&&(ce[F>>3]=It,ce[_>>3]=wt)}}else n[g>>2]=0,n[g+4>>2]=0,n[g+8>>2]=0,n[g+12>>2]=0,n[g+16>>2]=0,n[g+20>>2]=0,n[g+24>>2]=0,n[g+28>>2]=0,C=n[l>>2]|0;while((q|0)<(C|0))}}function Eo(_,S,C){_=_|0,S=S|0,C=C|0;var E=0,H=0,W=0;if(!(rA(_,S,C)|0))return H=0,H|0;if(H=_+8|0,(n[H>>2]|0)<=0)return H=1,H|0;for(E=_+12|0,_=0;;){if(W=_,_=_+1|0,rA((n[E>>2]|0)+(W<<3)|0,S+(_<<5)|0,C)|0){_=0,E=6;break}if((_|0)>=(n[H>>2]|0)){_=1,E=6;break}}return(E|0)==6?_|0:0}function oo(){return 8}function zl(){return 16}function rn(){return 168}function hl(){return 8}function eu(){return 16}function gA(){return 12}function UA(){return 8}function tu(_){_=_|0;var S=0,C=0;return C=+ce[_>>3],S=+ce[_+8>>3],+ +Vt(+(C*C+S*S))}function GA(_,S,C,E,H){_=_|0,S=S|0,C=C|0,E=E|0,H=H|0;var W=0,Z=0,ae=0,Ie=0,$e=0,ot=0,Nt=0,wt=0;$e=+ce[_>>3],Ie=+ce[S>>3]-$e,ae=+ce[_+8>>3],Z=+ce[S+8>>3]-ae,Nt=+ce[C>>3],W=+ce[E>>3]-Nt,wt=+ce[C+8>>3],ot=+ce[E+8>>3]-wt,W=(W*(ae-wt)-($e-Nt)*ot)/(Ie*ot-Z*W),ce[H>>3]=$e+Ie*W,ce[H+8>>3]=ae+Z*W}function mA(_,S){return _=_|0,S=S|0,+ce[_>>3]!=+ce[S>>3]?(S=0,S|0):(S=+ce[_+8>>3]==+ce[S+8>>3],S|0)}function ks(_,S){_=_|0,S=S|0;var C=0,E=0,H=0;return H=+ce[_>>3]-+ce[S>>3],E=+ce[_+8>>3]-+ce[S+8>>3],C=+ce[_+16>>3]-+ce[S+16>>3],+(H*H+E*E+C*C)}function mu(_,S){_=_|0,S=S|0;var C=0,E=0,H=0;C=+ce[_>>3],E=+Ei(+C),C=+Ai(+C),ce[S+16>>3]=C,C=+ce[_+8>>3],H=E*+Ei(+C),ce[S>>3]=H,C=E*+Ai(+C),ce[S+8>>3]=C}function _u(_,S){_=_|0,S=S|0;var C=0,E=0,H=0,W=0,Z=0,ae=0,Ie=0,$e=0;if($e=Et,Et=Et+32|0,H=$e+16|0,W=$e,Bs(_,S,H),Z=wo(_,S)|0,Ie=Ss(_,S)|0,kt(Z,W),S=ri(Z,n[H>>2]|0)|0,!(P(Z)|0))return Ie=S,Et=$e,Ie|0;do switch(Z|0){case 4:{_=0,C=14;break}case 14:{_=1,C=14;break}case 24:{_=2,C=14;break}case 38:{_=3,C=14;break}case 49:{_=4,C=14;break}case 58:{_=5,C=14;break}case 63:{_=6,C=14;break}case 72:{_=7,C=14;break}case 83:{_=8,C=14;break}case 97:{_=9,C=14;break}case 107:{_=10,C=14;break}case 117:{_=11,C=14;break}default:ae=0,E=0}while(!1);return(C|0)==14&&(ae=n[22096+(_*24|0)+8>>2]|0,E=n[22096+(_*24|0)+16>>2]|0),_=n[H>>2]|0,(_|0)!=(n[W>>2]|0)&&(Z=re(Z)|0,_=n[H>>2]|0,Z|(_|0)==(E|0)&&(S=(S+1|0)%6|0)),(Ie|0)==3&(_|0)==(E|0)?(Ie=(S+5|0)%6|0,Et=$e,Ie|0):(Ie|0)==5&(_|0)==(ae|0)?(Ie=(S+1|0)%6|0,Et=$e,Ie|0):(Ie=S,Et=$e,Ie|0)}function vu(_,S,C){_=_|0,S=S|0,C=C|0;var E=0,H=0;return E=Kr(_,S)|0,(C+-1|0)>>>0>5||(H=(E|0)!=0,(C|0)==1&H)?(C=-1,C|0):(E=_u(_,S)|0,H?(C=(5-E+(n[22384+(C<<2)>>2]|0)|0)%5|0,C|0):(C=(6-E+(n[22416+(C<<2)>>2]|0)|0)%6|0,C|0))}function HA(_,S,C){_=_|0,S=S|0,C=C|0;var E=0;(S|0)>0?(E=Io(S,4)|0,n[_>>2]=E,E||Fi(23230,23253,40,23267)):n[_>>2]=0,n[_+4>>2]=S,n[_+8>>2]=0,n[_+12>>2]=C}function la(_){_=_|0;var S=0,C=0,E=0,H=0,W=0,Z=0,ae=0;H=_+4|0,W=_+12|0,Z=_+8|0;e:for(;;){for(C=n[H>>2]|0,S=0;;){if((S|0)>=(C|0))break e;if(E=n[_>>2]|0,ae=n[E+(S<<2)>>2]|0,!ae)S=S+1|0;else break}S=E+(~~(+ui(+(+qt(10,+ +(15-(n[W>>2]|0)|0))*(+ce[ae>>3]+ +ce[ae+8>>3])))%+(C|0))>>>0<<2)|0,C=n[S>>2]|0;t:do if(C|0){if(E=ae+32|0,(C|0)==(ae|0))n[S>>2]=n[E>>2];else{if(C=C+32|0,S=n[C>>2]|0,!S)break;for(;(S|0)!=(ae|0);)if(C=S+32|0,S=n[C>>2]|0,!S)break t;n[C>>2]=n[E>>2]}zn(ae),n[Z>>2]=(n[Z>>2]|0)+-1}while(!1)}zn(n[_>>2]|0)}function Go(_){_=_|0;var S=0,C=0,E=0;for(E=n[_+4>>2]|0,C=0;;){if((C|0)>=(E|0)){S=0,C=4;break}if(S=n[(n[_>>2]|0)+(C<<2)>>2]|0,!S)C=C+1|0;else{C=4;break}}return(C|0)==4?S|0:0}function fl(_,S){_=_|0,S=S|0;var C=0,E=0,H=0,W=0;if(C=~~(+ui(+(+qt(10,+ +(15-(n[_+12>>2]|0)|0))*(+ce[S>>3]+ +ce[S+8>>3])))%+(n[_+4>>2]|0))>>>0,C=(n[_>>2]|0)+(C<<2)|0,E=n[C>>2]|0,!E)return W=1,W|0;W=S+32|0;do if((E|0)!=(S|0)){if(C=n[E+32>>2]|0,!C)return W=1,W|0;for(H=C;;){if((H|0)==(S|0)){H=8;break}if(C=n[H+32>>2]|0,C)E=H,H=C;else{C=1,H=10;break}}if((H|0)==8){n[E+32>>2]=n[W>>2];break}else if((H|0)==10)return C|0}else n[C>>2]=n[W>>2];while(!1);return zn(S),W=_+8|0,n[W>>2]=(n[W>>2]|0)+-1,W=0,W|0}function iu(_,S,C){_=_|0,S=S|0,C=C|0;var E=0,H=0,W=0,Z=0;W=da(40)|0,W||Fi(23283,23253,98,23296),n[W>>2]=n[S>>2],n[W+4>>2]=n[S+4>>2],n[W+8>>2]=n[S+8>>2],n[W+12>>2]=n[S+12>>2],H=W+16|0,n[H>>2]=n[C>>2],n[H+4>>2]=n[C+4>>2],n[H+8>>2]=n[C+8>>2],n[H+12>>2]=n[C+12>>2],n[W+32>>2]=0,H=~~(+ui(+(+qt(10,+ +(15-(n[_+12>>2]|0)|0))*(+ce[S>>3]+ +ce[S+8>>3])))%+(n[_+4>>2]|0))>>>0,H=(n[_>>2]|0)+(H<<2)|0,E=n[H>>2]|0;do if(!E)n[H>>2]=W;else{for(;!(Hs(E,S)|0&&Hs(E+16|0,C)|0);)if(H=n[E+32>>2]|0,E=H|0?H:E,!(n[E+32>>2]|0)){Z=10;break}if((Z|0)==10){n[E+32>>2]=W;break}return zn(W),Z=E,Z|0}while(!1);return Z=_+8|0,n[Z>>2]=(n[Z>>2]|0)+1,Z=W,Z|0}function dl(_,S,C){_=_|0,S=S|0,C=C|0;var E=0,H=0;if(H=~~(+ui(+(+qt(10,+ +(15-(n[_+12>>2]|0)|0))*(+ce[S>>3]+ +ce[S+8>>3])))%+(n[_+4>>2]|0))>>>0,H=n[(n[_>>2]|0)+(H<<2)>>2]|0,!H)return C=0,C|0;if(!C){for(_=H;;){if(Hs(_,S)|0){E=10;break}if(_=n[_+32>>2]|0,!_){_=0,E=10;break}}if((E|0)==10)return _|0}for(_=H;;){if(Hs(_,S)|0&&Hs(_+16|0,C)|0){E=10;break}if(_=n[_+32>>2]|0,!_){_=0,E=10;break}}return(E|0)==10?_|0:0}function nu(_,S){_=_|0,S=S|0;var C=0;if(C=~~(+ui(+(+qt(10,+ +(15-(n[_+12>>2]|0)|0))*(+ce[S>>3]+ +ce[S+8>>3])))%+(n[_+4>>2]|0))>>>0,_=n[(n[_>>2]|0)+(C<<2)>>2]|0,!_)return C=0,C|0;for(;;){if(Hs(_,S)|0){S=5;break}if(_=n[_+32>>2]|0,!_){_=0,S=5;break}}return(S|0)==5?_|0:0}function lr(){return 23312}function ns(_){return _=+_,+ +Qo(+_)}function Jr(_){return _=+_,~~+ns(_)|0}function da(_){_=_|0;var S=0,C=0,E=0,H=0,W=0,Z=0,ae=0,Ie=0,$e=0,ot=0,Nt=0,wt=0,It=0,R=0,s=0,g=0,I=0,M=0,F=0,q=0,A=0;A=Et,Et=Et+16|0,wt=A;do if(_>>>0<245){if($e=_>>>0<11?16:_+11&-8,_=$e>>>3,Nt=n[5829]|0,C=Nt>>>_,C&3|0)return S=(C&1^1)+_|0,_=23356+(S<<1<<2)|0,C=_+8|0,E=n[C>>2]|0,H=E+8|0,W=n[H>>2]|0,(W|0)==(_|0)?n[5829]=Nt&~(1<<S):(n[W+12>>2]=_,n[C>>2]=W),q=S<<3,n[E+4>>2]=q|3,q=E+q+4|0,n[q>>2]=n[q>>2]|1,q=H,Et=A,q|0;if(ot=n[5831]|0,$e>>>0>ot>>>0){if(C|0)return S=2<<_,S=C<<_&(S|0-S),S=(S&0-S)+-1|0,ae=S>>>12&16,S=S>>>ae,C=S>>>5&8,S=S>>>C,W=S>>>2&4,S=S>>>W,_=S>>>1&2,S=S>>>_,E=S>>>1&1,E=(C|ae|W|_|E)+(S>>>E)|0,S=23356+(E<<1<<2)|0,_=S+8|0,W=n[_>>2]|0,ae=W+8|0,C=n[ae>>2]|0,(C|0)==(S|0)?(_=Nt&~(1<<E),n[5829]=_):(n[C+12>>2]=S,n[_>>2]=C,_=Nt),q=E<<3,Z=q-$e|0,n[W+4>>2]=$e|3,H=W+$e|0,n[H+4>>2]=Z|1,n[W+q>>2]=Z,ot|0&&(E=n[5834]|0,S=ot>>>3,C=23356+(S<<1<<2)|0,S=1<<S,_&S?(_=C+8|0,S=n[_>>2]|0):(n[5829]=_|S,S=C,_=C+8|0),n[_>>2]=E,n[S+12>>2]=E,n[E+8>>2]=S,n[E+12>>2]=C),n[5831]=Z,n[5834]=H,q=ae,Et=A,q|0;if(W=n[5830]|0,W){for(C=(W&0-W)+-1|0,H=C>>>12&16,C=C>>>H,E=C>>>5&8,C=C>>>E,Z=C>>>2&4,C=C>>>Z,ae=C>>>1&2,C=C>>>ae,Ie=C>>>1&1,Ie=n[23620+((E|H|Z|ae|Ie)+(C>>>Ie)<<2)>>2]|0,C=Ie,ae=Ie,Ie=(n[Ie+4>>2]&-8)-$e|0;_=n[C+16>>2]|0,!(!_&&(_=n[C+20>>2]|0,!_));)Z=(n[_+4>>2]&-8)-$e|0,H=Z>>>0<Ie>>>0,C=_,ae=H?_:ae,Ie=H?Z:Ie;if(Z=ae+$e|0,Z>>>0>ae>>>0){H=n[ae+24>>2]|0,S=n[ae+12>>2]|0;do if((S|0)==(ae|0)){if(_=ae+20|0,S=n[_>>2]|0,!S&&(_=ae+16|0,S=n[_>>2]|0,!S)){C=0;break}for(;;)if(E=S+20|0,C=n[E>>2]|0,C)S=C,_=E;else if(E=S+16|0,C=n[E>>2]|0,C)S=C,_=E;else break;n[_>>2]=0,C=S}else C=n[ae+8>>2]|0,n[C+12>>2]=S,n[S+8>>2]=C,C=S;while(!1);do if(H|0){if(S=n[ae+28>>2]|0,_=23620+(S<<2)|0,(ae|0)==(n[_>>2]|0)){if(n[_>>2]=C,!C){n[5830]=W&~(1<<S);break}}else if(q=H+16|0,n[((n[q>>2]|0)==(ae|0)?q:H+20|0)>>2]=C,!C)break;n[C+24>>2]=H,S=n[ae+16>>2]|0,S|0&&(n[C+16>>2]=S,n[S+24>>2]=C),S=n[ae+20>>2]|0,S|0&&(n[C+20>>2]=S,n[S+24>>2]=C)}while(!1);return Ie>>>0<16?(q=Ie+$e|0,n[ae+4>>2]=q|3,q=ae+q+4|0,n[q>>2]=n[q>>2]|1):(n[ae+4>>2]=$e|3,n[Z+4>>2]=Ie|1,n[Z+Ie>>2]=Ie,ot|0&&(E=n[5834]|0,S=ot>>>3,C=23356+(S<<1<<2)|0,S=1<<S,S&Nt?(_=C+8|0,S=n[_>>2]|0):(n[5829]=S|Nt,S=C,_=C+8|0),n[_>>2]=E,n[S+12>>2]=E,n[E+8>>2]=S,n[E+12>>2]=C),n[5831]=Ie,n[5834]=Z),q=ae+8|0,Et=A,q|0}else Nt=$e}else Nt=$e}else Nt=$e}else if(_>>>0<=4294967231)if(_=_+11|0,$e=_&-8,E=n[5830]|0,E){H=0-$e|0,_=_>>>8,_?$e>>>0>16777215?Ie=31:(Nt=(_+1048320|0)>>>16&8,s=_<<Nt,ae=(s+520192|0)>>>16&4,s=s<<ae,Ie=(s+245760|0)>>>16&2,Ie=14-(ae|Nt|Ie)+(s<<Ie>>>15)|0,Ie=$e>>>(Ie+7|0)&1|Ie<<1):Ie=0,C=n[23620+(Ie<<2)>>2]|0;e:do if(!C)C=0,_=0,s=61;else for(_=0,ae=$e<<((Ie|0)==31?0:25-(Ie>>>1)|0),W=0;;){if(Z=(n[C+4>>2]&-8)-$e|0,Z>>>0<H>>>0)if(Z)_=C,H=Z;else{_=C,H=0,s=65;break e}if(s=n[C+20>>2]|0,C=n[C+16+(ae>>>31<<2)>>2]|0,W=(s|0)==0|(s|0)==(C|0)?W:s,C)ae=ae<<1;else{C=W,s=61;break}}while(!1);if((s|0)==61){if((C|0)==0&(_|0)==0){if(_=2<<Ie,_=(_|0-_)&E,!_){Nt=$e;break}Nt=(_&0-_)+-1|0,Z=Nt>>>12&16,Nt=Nt>>>Z,W=Nt>>>5&8,Nt=Nt>>>W,ae=Nt>>>2&4,Nt=Nt>>>ae,Ie=Nt>>>1&2,Nt=Nt>>>Ie,C=Nt>>>1&1,_=0,C=n[23620+((W|Z|ae|Ie|C)+(Nt>>>C)<<2)>>2]|0}C?s=65:(ae=_,Z=H)}if((s|0)==65)for(W=C;;)if(Nt=(n[W+4>>2]&-8)-$e|0,C=Nt>>>0<H>>>0,H=C?Nt:H,_=C?W:_,C=n[W+16>>2]|0,C||(C=n[W+20>>2]|0),C)W=C;else{ae=_,Z=H;break}if(ae|0&&Z>>>0<((n[5831]|0)-$e|0)>>>0&&(ot=ae+$e|0,ot>>>0>ae>>>0)){W=n[ae+24>>2]|0,S=n[ae+12>>2]|0;do if((S|0)==(ae|0)){if(_=ae+20|0,S=n[_>>2]|0,!S&&(_=ae+16|0,S=n[_>>2]|0,!S)){S=0;break}for(;;)if(H=S+20|0,C=n[H>>2]|0,C)S=C,_=H;else if(H=S+16|0,C=n[H>>2]|0,C)S=C,_=H;else break;n[_>>2]=0}else q=n[ae+8>>2]|0,n[q+12>>2]=S,n[S+8>>2]=q;while(!1);do if(W){if(_=n[ae+28>>2]|0,C=23620+(_<<2)|0,(ae|0)==(n[C>>2]|0)){if(n[C>>2]=S,!S){E=E&~(1<<_),n[5830]=E;break}}else if(q=W+16|0,n[((n[q>>2]|0)==(ae|0)?q:W+20|0)>>2]=S,!S)break;n[S+24>>2]=W,_=n[ae+16>>2]|0,_|0&&(n[S+16>>2]=_,n[_+24>>2]=S),_=n[ae+20>>2]|0,_&&(n[S+20>>2]=_,n[_+24>>2]=S)}while(!1);e:do if(Z>>>0<16)q=Z+$e|0,n[ae+4>>2]=q|3,q=ae+q+4|0,n[q>>2]=n[q>>2]|1;else{if(n[ae+4>>2]=$e|3,n[ot+4>>2]=Z|1,n[ot+Z>>2]=Z,S=Z>>>3,Z>>>0<256){C=23356+(S<<1<<2)|0,_=n[5829]|0,S=1<<S,_&S?(_=C+8|0,S=n[_>>2]|0):(n[5829]=_|S,S=C,_=C+8|0),n[_>>2]=ot,n[S+12>>2]=ot,n[ot+8>>2]=S,n[ot+12>>2]=C;break}if(S=Z>>>8,S?Z>>>0>16777215?C=31:(F=(S+1048320|0)>>>16&8,q=S<<F,M=(q+520192|0)>>>16&4,q=q<<M,C=(q+245760|0)>>>16&2,C=14-(M|F|C)+(q<<C>>>15)|0,C=Z>>>(C+7|0)&1|C<<1):C=0,S=23620+(C<<2)|0,n[ot+28>>2]=C,_=ot+16|0,n[_+4>>2]=0,n[_>>2]=0,_=1<<C,!(E&_)){n[5830]=E|_,n[S>>2]=ot,n[ot+24>>2]=S,n[ot+12>>2]=ot,n[ot+8>>2]=ot;break}S=n[S>>2]|0;t:do if((n[S+4>>2]&-8|0)!=(Z|0)){for(E=Z<<((C|0)==31?0:25-(C>>>1)|0);C=S+16+(E>>>31<<2)|0,_=n[C>>2]|0,!!_;)if((n[_+4>>2]&-8|0)==(Z|0)){S=_;break t}else E=E<<1,S=_;n[C>>2]=ot,n[ot+24>>2]=S,n[ot+12>>2]=ot,n[ot+8>>2]=ot;break e}while(!1);F=S+8|0,q=n[F>>2]|0,n[q+12>>2]=ot,n[F>>2]=ot,n[ot+8>>2]=q,n[ot+12>>2]=S,n[ot+24>>2]=0}while(!1);return q=ae+8|0,Et=A,q|0}else Nt=$e}else Nt=$e;else Nt=-1;while(!1);if(C=n[5831]|0,C>>>0>=Nt>>>0)return S=C-Nt|0,_=n[5834]|0,S>>>0>15?(q=_+Nt|0,n[5834]=q,n[5831]=S,n[q+4>>2]=S|1,n[_+C>>2]=S,n[_+4>>2]=Nt|3):(n[5831]=0,n[5834]=0,n[_+4>>2]=C|3,q=_+C+4|0,n[q>>2]=n[q>>2]|1),q=_+8|0,Et=A,q|0;if(Z=n[5832]|0,Z>>>0>Nt>>>0)return M=Z-Nt|0,n[5832]=M,q=n[5835]|0,F=q+Nt|0,n[5835]=F,n[F+4>>2]=M|1,n[q+4>>2]=Nt|3,q=q+8|0,Et=A,q|0;if(n[5947]|0?_=n[5949]|0:(n[5949]=4096,n[5948]=4096,n[5950]=-1,n[5951]=-1,n[5952]=0,n[5940]=0,n[5947]=wt&-16^1431655768,_=4096),ae=Nt+48|0,Ie=Nt+47|0,W=_+Ie|0,H=0-_|0,$e=W&H,$e>>>0<=Nt>>>0||(_=n[5939]|0,_|0&&(ot=n[5937]|0,wt=ot+$e|0,wt>>>0<=ot>>>0|wt>>>0>_>>>0)))return q=0,Et=A,q|0;e:do if(n[5940]&4)S=0,s=143;else{C=n[5835]|0;t:do if(C){for(E=23764;wt=n[E>>2]|0,!(wt>>>0<=C>>>0&&(wt+(n[E+4>>2]|0)|0)>>>0>C>>>0);)if(_=n[E+8>>2]|0,_)E=_;else{s=128;break t}if(S=W-Z&H,S>>>0<2147483647)if(_=rs(S|0)|0,(_|0)==((n[E>>2]|0)+(n[E+4>>2]|0)|0)){if((_|0)!=-1){Z=S,W=_,s=145;break e}}else E=_,s=136;else S=0}else s=128;while(!1);do if((s|0)==128)if(C=rs(0)|0,(C|0)!=-1&&(S=C,It=n[5948]|0,R=It+-1|0,S=(R&S|0?(R+S&0-It)-S|0:0)+$e|0,It=n[5937]|0,R=S+It|0,S>>>0>Nt>>>0&S>>>0<2147483647)){if(wt=n[5939]|0,wt|0&&R>>>0<=It>>>0|R>>>0>wt>>>0){S=0;break}if(_=rs(S|0)|0,(_|0)==(C|0)){Z=S,W=C,s=145;break e}else E=_,s=136}else S=0;while(!1);do if((s|0)==136){if(C=0-S|0,!(ae>>>0>S>>>0&(S>>>0<2147483647&(E|0)!=-1)))if((E|0)==-1){S=0;break}else{Z=S,W=E,s=145;break e}if(_=n[5949]|0,_=Ie-S+_&0-_,_>>>0>=2147483647){Z=S,W=E,s=145;break e}if((rs(_|0)|0)==-1){rs(C|0)|0,S=0;break}else{Z=_+S|0,W=E,s=145;break e}}while(!1);n[5940]=n[5940]|4,s=143}while(!1);if((s|0)==143&&$e>>>0<2147483647&&(M=rs($e|0)|0,R=rs(0)|0,g=R-M|0,I=g>>>0>(Nt+40|0)>>>0,!((M|0)==-1|I^1|M>>>0<R>>>0&((M|0)!=-1&(R|0)!=-1)^1))&&(Z=I?g:S,W=M,s=145),(s|0)==145){S=(n[5937]|0)+Z|0,n[5937]=S,S>>>0>(n[5938]|0)>>>0&&(n[5938]=S),Ie=n[5835]|0;e:do if(Ie){for(S=23764;;){if(_=n[S>>2]|0,C=n[S+4>>2]|0,(W|0)==(_+C|0)){s=154;break}if(E=n[S+8>>2]|0,E)S=E;else break}if((s|0)==154&&(F=S+4|0,(n[S+12>>2]&8|0)==0)&&W>>>0>Ie>>>0&_>>>0<=Ie>>>0){n[F>>2]=C+Z,q=(n[5832]|0)+Z|0,M=Ie+8|0,M=M&7|0?0-M&7:0,F=Ie+M|0,M=q-M|0,n[5835]=F,n[5832]=M,n[F+4>>2]=M|1,n[Ie+q+4>>2]=40,n[5836]=n[5951];break}for(W>>>0<(n[5833]|0)>>>0&&(n[5833]=W),C=W+Z|0,S=23764;;){if((n[S>>2]|0)==(C|0)){s=162;break}if(_=n[S+8>>2]|0,_)S=_;else break}if((s|0)==162&&!(n[S+12>>2]&8|0)){n[S>>2]=W,ot=S+4|0,n[ot>>2]=(n[ot>>2]|0)+Z,ot=W+8|0,ot=W+(ot&7|0?0-ot&7:0)|0,S=C+8|0,S=C+(S&7|0?0-S&7:0)|0,$e=ot+Nt|0,ae=S-ot-Nt|0,n[ot+4>>2]=Nt|3;t:do if((Ie|0)==(S|0))q=(n[5832]|0)+ae|0,n[5832]=q,n[5835]=$e,n[$e+4>>2]=q|1;else{if((n[5834]|0)==(S|0)){q=(n[5831]|0)+ae|0,n[5831]=q,n[5834]=$e,n[$e+4>>2]=q|1,n[$e+q>>2]=q;break}if(_=n[S+4>>2]|0,(_&3|0)==1){Z=_&-8,E=_>>>3;i:do if(_>>>0<256)if(_=n[S+8>>2]|0,C=n[S+12>>2]|0,(C|0)==(_|0)){n[5829]=n[5829]&~(1<<E);break}else{n[_+12>>2]=C,n[C+8>>2]=_;break}else{W=n[S+24>>2]|0,_=n[S+12>>2]|0;do if((_|0)==(S|0)){if(C=S+16|0,E=C+4|0,_=n[E>>2]|0,_)C=E;else if(_=n[C>>2]|0,!_){_=0;break}for(;;)if(H=_+20|0,E=n[H>>2]|0,E)_=E,C=H;else if(H=_+16|0,E=n[H>>2]|0,E)_=E,C=H;else break;n[C>>2]=0}else q=n[S+8>>2]|0,n[q+12>>2]=_,n[_+8>>2]=q;while(!1);if(!W)break;C=n[S+28>>2]|0,E=23620+(C<<2)|0;do if((n[E>>2]|0)!=(S|0)){if(q=W+16|0,n[((n[q>>2]|0)==(S|0)?q:W+20|0)>>2]=_,!_)break i}else{if(n[E>>2]=_,_|0)break;n[5830]=n[5830]&~(1<<C);break i}while(!1);if(n[_+24>>2]=W,C=S+16|0,E=n[C>>2]|0,E|0&&(n[_+16>>2]=E,n[E+24>>2]=_),C=n[C+4>>2]|0,!C)break;n[_+20>>2]=C,n[C+24>>2]=_}while(!1);S=S+Z|0,H=Z+ae|0}else H=ae;if(S=S+4|0,n[S>>2]=n[S>>2]&-2,n[$e+4>>2]=H|1,n[$e+H>>2]=H,S=H>>>3,H>>>0<256){C=23356+(S<<1<<2)|0,_=n[5829]|0,S=1<<S,_&S?(_=C+8|0,S=n[_>>2]|0):(n[5829]=_|S,S=C,_=C+8|0),n[_>>2]=$e,n[S+12>>2]=$e,n[$e+8>>2]=S,n[$e+12>>2]=C;break}S=H>>>8;do if(!S)E=0;else{if(H>>>0>16777215){E=31;break}F=(S+1048320|0)>>>16&8,q=S<<F,M=(q+520192|0)>>>16&4,q=q<<M,E=(q+245760|0)>>>16&2,E=14-(M|F|E)+(q<<E>>>15)|0,E=H>>>(E+7|0)&1|E<<1}while(!1);if(S=23620+(E<<2)|0,n[$e+28>>2]=E,_=$e+16|0,n[_+4>>2]=0,n[_>>2]=0,_=n[5830]|0,C=1<<E,!(_&C)){n[5830]=_|C,n[S>>2]=$e,n[$e+24>>2]=S,n[$e+12>>2]=$e,n[$e+8>>2]=$e;break}S=n[S>>2]|0;i:do if((n[S+4>>2]&-8|0)!=(H|0)){for(E=H<<((E|0)==31?0:25-(E>>>1)|0);C=S+16+(E>>>31<<2)|0,_=n[C>>2]|0,!!_;)if((n[_+4>>2]&-8|0)==(H|0)){S=_;break i}else E=E<<1,S=_;n[C>>2]=$e,n[$e+24>>2]=S,n[$e+12>>2]=$e,n[$e+8>>2]=$e;break t}while(!1);F=S+8|0,q=n[F>>2]|0,n[q+12>>2]=$e,n[F>>2]=$e,n[$e+8>>2]=q,n[$e+12>>2]=S,n[$e+24>>2]=0}while(!1);return q=ot+8|0,Et=A,q|0}for(S=23764;_=n[S>>2]|0,!(_>>>0<=Ie>>>0&&(q=_+(n[S+4>>2]|0)|0,q>>>0>Ie>>>0));)S=n[S+8>>2]|0;H=q+-47|0,_=H+8|0,_=H+(_&7|0?0-_&7:0)|0,H=Ie+16|0,_=_>>>0<H>>>0?Ie:_,S=_+8|0,C=Z+-40|0,M=W+8|0,M=M&7|0?0-M&7:0,F=W+M|0,M=C-M|0,n[5835]=F,n[5832]=M,n[F+4>>2]=M|1,n[W+C+4>>2]=40,n[5836]=n[5951],C=_+4|0,n[C>>2]=27,n[S>>2]=n[5941],n[S+4>>2]=n[5942],n[S+8>>2]=n[5943],n[S+12>>2]=n[5944],n[5941]=W,n[5942]=Z,n[5944]=0,n[5943]=S,S=_+24|0;do F=S,S=S+4|0,n[S>>2]=7;while((F+8|0)>>>0<q>>>0);if((_|0)!=(Ie|0)){if(W=_-Ie|0,n[C>>2]=n[C>>2]&-2,n[Ie+4>>2]=W|1,n[_>>2]=W,S=W>>>3,W>>>0<256){C=23356+(S<<1<<2)|0,_=n[5829]|0,S=1<<S,_&S?(_=C+8|0,S=n[_>>2]|0):(n[5829]=_|S,S=C,_=C+8|0),n[_>>2]=Ie,n[S+12>>2]=Ie,n[Ie+8>>2]=S,n[Ie+12>>2]=C;break}if(S=W>>>8,S?W>>>0>16777215?E=31:(F=(S+1048320|0)>>>16&8,q=S<<F,M=(q+520192|0)>>>16&4,q=q<<M,E=(q+245760|0)>>>16&2,E=14-(M|F|E)+(q<<E>>>15)|0,E=W>>>(E+7|0)&1|E<<1):E=0,C=23620+(E<<2)|0,n[Ie+28>>2]=E,n[Ie+20>>2]=0,n[H>>2]=0,S=n[5830]|0,_=1<<E,!(S&_)){n[5830]=S|_,n[C>>2]=Ie,n[Ie+24>>2]=C,n[Ie+12>>2]=Ie,n[Ie+8>>2]=Ie;break}S=n[C>>2]|0;t:do if((n[S+4>>2]&-8|0)!=(W|0)){for(E=W<<((E|0)==31?0:25-(E>>>1)|0);C=S+16+(E>>>31<<2)|0,_=n[C>>2]|0,!!_;)if((n[_+4>>2]&-8|0)==(W|0)){S=_;break t}else E=E<<1,S=_;n[C>>2]=Ie,n[Ie+24>>2]=S,n[Ie+12>>2]=Ie,n[Ie+8>>2]=Ie;break e}while(!1);F=S+8|0,q=n[F>>2]|0,n[q+12>>2]=Ie,n[F>>2]=Ie,n[Ie+8>>2]=q,n[Ie+12>>2]=S,n[Ie+24>>2]=0}}else q=n[5833]|0,(q|0)==0|W>>>0<q>>>0&&(n[5833]=W),n[5941]=W,n[5942]=Z,n[5944]=0,n[5838]=n[5947],n[5837]=-1,n[5842]=23356,n[5841]=23356,n[5844]=23364,n[5843]=23364,n[5846]=23372,n[5845]=23372,n[5848]=23380,n[5847]=23380,n[5850]=23388,n[5849]=23388,n[5852]=23396,n[5851]=23396,n[5854]=23404,n[5853]=23404,n[5856]=23412,n[5855]=23412,n[5858]=23420,n[5857]=23420,n[5860]=23428,n[5859]=23428,n[5862]=23436,n[5861]=23436,n[5864]=23444,n[5863]=23444,n[5866]=23452,n[5865]=23452,n[5868]=23460,n[5867]=23460,n[5870]=23468,n[5869]=23468,n[5872]=23476,n[5871]=23476,n[5874]=23484,n[5873]=23484,n[5876]=23492,n[5875]=23492,n[5878]=23500,n[5877]=23500,n[5880]=23508,n[5879]=23508,n[5882]=23516,n[5881]=23516,n[5884]=23524,n[5883]=23524,n[5886]=23532,n[5885]=23532,n[5888]=23540,n[5887]=23540,n[5890]=23548,n[5889]=23548,n[5892]=23556,n[5891]=23556,n[5894]=23564,n[5893]=23564,n[5896]=23572,n[5895]=23572,n[5898]=23580,n[5897]=23580,n[5900]=23588,n[5899]=23588,n[5902]=23596,n[5901]=23596,n[5904]=23604,n[5903]=23604,q=Z+-40|0,M=W+8|0,M=M&7|0?0-M&7:0,F=W+M|0,M=q-M|0,n[5835]=F,n[5832]=M,n[F+4>>2]=M|1,n[W+q+4>>2]=40,n[5836]=n[5951];while(!1);if(S=n[5832]|0,S>>>0>Nt>>>0)return M=S-Nt|0,n[5832]=M,q=n[5835]|0,F=q+Nt|0,n[5835]=F,n[F+4>>2]=M|1,n[q+4>>2]=Nt|3,q=q+8|0,Et=A,q|0}return q=lr()|0,n[q>>2]=12,q=0,Et=A,q|0}function zn(_){_=_|0;var S=0,C=0,E=0,H=0,W=0,Z=0,ae=0,Ie=0;if(_){C=_+-8|0,H=n[5833]|0,_=n[_+-4>>2]|0,S=_&-8,Ie=C+S|0;do if(_&1)ae=C,Z=C;else{if(E=n[C>>2]|0,!(_&3)||(Z=C+(0-E)|0,W=E+S|0,Z>>>0<H>>>0))return;if((n[5834]|0)==(Z|0)){if(_=Ie+4|0,S=n[_>>2]|0,(S&3|0)!=3){ae=Z,S=W;break}n[5831]=W,n[_>>2]=S&-2,n[Z+4>>2]=W|1,n[Z+W>>2]=W;return}if(C=E>>>3,E>>>0<256)if(_=n[Z+8>>2]|0,S=n[Z+12>>2]|0,(S|0)==(_|0)){n[5829]=n[5829]&~(1<<C),ae=Z,S=W;break}else{n[_+12>>2]=S,n[S+8>>2]=_,ae=Z,S=W;break}H=n[Z+24>>2]|0,_=n[Z+12>>2]|0;do if((_|0)==(Z|0)){if(S=Z+16|0,C=S+4|0,_=n[C>>2]|0,_)S=C;else if(_=n[S>>2]|0,!_){_=0;break}for(;;)if(E=_+20|0,C=n[E>>2]|0,C)_=C,S=E;else if(E=_+16|0,C=n[E>>2]|0,C)_=C,S=E;else break;n[S>>2]=0}else ae=n[Z+8>>2]|0,n[ae+12>>2]=_,n[_+8>>2]=ae;while(!1);if(H){if(S=n[Z+28>>2]|0,C=23620+(S<<2)|0,(n[C>>2]|0)==(Z|0)){if(n[C>>2]=_,!_){n[5830]=n[5830]&~(1<<S),ae=Z,S=W;break}}else if(ae=H+16|0,n[((n[ae>>2]|0)==(Z|0)?ae:H+20|0)>>2]=_,!_){ae=Z,S=W;break}n[_+24>>2]=H,S=Z+16|0,C=n[S>>2]|0,C|0&&(n[_+16>>2]=C,n[C+24>>2]=_),S=n[S+4>>2]|0,S?(n[_+20>>2]=S,n[S+24>>2]=_,ae=Z,S=W):(ae=Z,S=W)}else ae=Z,S=W}while(!1);if(!(Z>>>0>=Ie>>>0)&&(_=Ie+4|0,E=n[_>>2]|0,!!(E&1))){if(E&2)n[_>>2]=E&-2,n[ae+4>>2]=S|1,n[Z+S>>2]=S,H=S;else{if((n[5835]|0)==(Ie|0)){if(Ie=(n[5832]|0)+S|0,n[5832]=Ie,n[5835]=ae,n[ae+4>>2]=Ie|1,(ae|0)!=(n[5834]|0))return;n[5834]=0,n[5831]=0;return}if((n[5834]|0)==(Ie|0)){Ie=(n[5831]|0)+S|0,n[5831]=Ie,n[5834]=Z,n[ae+4>>2]=Ie|1,n[Z+Ie>>2]=Ie;return}H=(E&-8)+S|0,C=E>>>3;do if(E>>>0<256)if(S=n[Ie+8>>2]|0,_=n[Ie+12>>2]|0,(_|0)==(S|0)){n[5829]=n[5829]&~(1<<C);break}else{n[S+12>>2]=_,n[_+8>>2]=S;break}else{W=n[Ie+24>>2]|0,_=n[Ie+12>>2]|0;do if((_|0)==(Ie|0)){if(S=Ie+16|0,C=S+4|0,_=n[C>>2]|0,_)S=C;else if(_=n[S>>2]|0,!_){C=0;break}for(;;)if(E=_+20|0,C=n[E>>2]|0,C)_=C,S=E;else if(E=_+16|0,C=n[E>>2]|0,C)_=C,S=E;else break;n[S>>2]=0,C=_}else C=n[Ie+8>>2]|0,n[C+12>>2]=_,n[_+8>>2]=C,C=_;while(!1);if(W|0){if(_=n[Ie+28>>2]|0,S=23620+(_<<2)|0,(n[S>>2]|0)==(Ie|0)){if(n[S>>2]=C,!C){n[5830]=n[5830]&~(1<<_);break}}else if(E=W+16|0,n[((n[E>>2]|0)==(Ie|0)?E:W+20|0)>>2]=C,!C)break;n[C+24>>2]=W,_=Ie+16|0,S=n[_>>2]|0,S|0&&(n[C+16>>2]=S,n[S+24>>2]=C),_=n[_+4>>2]|0,_|0&&(n[C+20>>2]=_,n[_+24>>2]=C)}}while(!1);if(n[ae+4>>2]=H|1,n[Z+H>>2]=H,(ae|0)==(n[5834]|0)){n[5831]=H;return}}if(_=H>>>3,H>>>0<256){C=23356+(_<<1<<2)|0,S=n[5829]|0,_=1<<_,S&_?(S=C+8|0,_=n[S>>2]|0):(n[5829]=S|_,_=C,S=C+8|0),n[S>>2]=ae,n[_+12>>2]=ae,n[ae+8>>2]=_,n[ae+12>>2]=C;return}_=H>>>8,_?H>>>0>16777215?E=31:(Z=(_+1048320|0)>>>16&8,Ie=_<<Z,W=(Ie+520192|0)>>>16&4,Ie=Ie<<W,E=(Ie+245760|0)>>>16&2,E=14-(W|Z|E)+(Ie<<E>>>15)|0,E=H>>>(E+7|0)&1|E<<1):E=0,_=23620+(E<<2)|0,n[ae+28>>2]=E,n[ae+20>>2]=0,n[ae+16>>2]=0,S=n[5830]|0,C=1<<E;e:do if(!(S&C))n[5830]=S|C,n[_>>2]=ae,n[ae+24>>2]=_,n[ae+12>>2]=ae,n[ae+8>>2]=ae;else{_=n[_>>2]|0;t:do if((n[_+4>>2]&-8|0)!=(H|0)){for(E=H<<((E|0)==31?0:25-(E>>>1)|0);C=_+16+(E>>>31<<2)|0,S=n[C>>2]|0,!!S;)if((n[S+4>>2]&-8|0)==(H|0)){_=S;break t}else E=E<<1,_=S;n[C>>2]=ae,n[ae+24>>2]=_,n[ae+12>>2]=ae,n[ae+8>>2]=ae;break e}while(!1);Z=_+8|0,Ie=n[Z>>2]|0,n[Ie+12>>2]=ae,n[Z>>2]=ae,n[ae+8>>2]=Ie,n[ae+12>>2]=_,n[ae+24>>2]=0}while(!1);if(Ie=(n[5837]|0)+-1|0,n[5837]=Ie,!(Ie|0)){for(_=23772;_=n[_>>2]|0,_;)_=_+8|0;n[5837]=-1}}}}function Io(_,S){_=_|0,S=S|0;var C=0;return _?(C=vr(S,_)|0,(S|_)>>>0>65535&&(C=((C>>>0)/(_>>>0)|0|0)==(S|0)?C:-1)):C=0,_=da(C)|0,!_||!(n[_+-4>>2]&3)||Wr(_|0,0,C|0)|0,_|0}function ru(_,S,C,E){return _=_|0,S=S|0,C=C|0,E=E|0,C=_+C>>>0,fn(S+E+(C>>>0<_>>>0|0)>>>0|0),C|0|0}function sA(_,S,C,E){return _=_|0,S=S|0,C=C|0,E=E|0,E=S-E-(C>>>0>_>>>0|0)>>>0,fn(E|0),_-C>>>0|0|0}function Fl(_){return _=_|0,(_?31-(nr(_^_-1)|0)|0:32)|0}function Vs(_,S,C,E,H){_=_|0,S=S|0,C=C|0,E=E|0,H=H|0;var W=0,Z=0,ae=0,Ie=0,$e=0,ot=0,Nt=0,wt=0,It=0,R=0;if(ot=_,Ie=S,$e=Ie,Z=C,wt=E,ae=wt,!$e)return W=(H|0)!=0,ae?W?(n[H>>2]=_|0,n[H+4>>2]=S&0,wt=0,H=0,fn(wt|0),H|0):(wt=0,H=0,fn(wt|0),H|0):(W&&(n[H>>2]=(ot>>>0)%(Z>>>0),n[H+4>>2]=0),wt=0,H=(ot>>>0)/(Z>>>0)>>>0,fn(wt|0),H|0);W=(ae|0)==0;do if(Z){if(!W){if(W=(nr(ae|0)|0)-(nr($e|0)|0)|0,W>>>0<=31){Nt=W+1|0,ae=31-W|0,S=W-31>>31,Z=Nt,_=ot>>>(Nt>>>0)&S|$e<<ae,S=$e>>>(Nt>>>0)&S,W=0,ae=ot<<ae;break}return H?(n[H>>2]=_|0,n[H+4>>2]=Ie|S&0,wt=0,H=0,fn(wt|0),H|0):(wt=0,H=0,fn(wt|0),H|0)}if(W=Z-1|0,W&Z|0){ae=(nr(Z|0)|0)+33-(nr($e|0)|0)|0,R=64-ae|0,Nt=32-ae|0,Ie=Nt>>31,It=ae-32|0,S=It>>31,Z=ae,_=Nt-1>>31&$e>>>(It>>>0)|($e<<Nt|ot>>>(ae>>>0))&S,S=S&$e>>>(ae>>>0),W=ot<<R&Ie,ae=($e<<R|ot>>>(It>>>0))&Ie|ot<<Nt&ae-33>>31;break}return H|0&&(n[H>>2]=W&ot,n[H+4>>2]=0),(Z|0)==1?(It=Ie|S&0,R=_|0|0,fn(It|0),R|0):(R=Fl(Z|0)|0,It=$e>>>(R>>>0)|0,R=$e<<32-R|ot>>>(R>>>0)|0,fn(It|0),R|0)}else{if(W)return H|0&&(n[H>>2]=($e>>>0)%(Z>>>0),n[H+4>>2]=0),It=0,R=($e>>>0)/(Z>>>0)>>>0,fn(It|0),R|0;if(!ot)return H|0&&(n[H>>2]=0,n[H+4>>2]=($e>>>0)%(ae>>>0)),It=0,R=($e>>>0)/(ae>>>0)>>>0,fn(It|0),R|0;if(W=ae-1|0,!(W&ae))return H|0&&(n[H>>2]=_|0,n[H+4>>2]=W&$e|S&0),It=0,R=$e>>>((Fl(ae|0)|0)>>>0),fn(It|0),R|0;if(W=(nr(ae|0)|0)-(nr($e|0)|0)|0,W>>>0<=30){S=W+1|0,ae=31-W|0,Z=S,_=$e<<ae|ot>>>(S>>>0),S=$e>>>(S>>>0),W=0,ae=ot<<ae;break}return H?(n[H>>2]=_|0,n[H+4>>2]=Ie|S&0,It=0,R=0,fn(It|0),R|0):(It=0,R=0,fn(It|0),R|0)}while(!1);if(!Z)$e=ae,Ie=0,ae=0;else{Nt=C|0|0,ot=wt|E&0,$e=ru(Nt|0,ot|0,-1,-1)|0,C=Pt()|0,Ie=ae,ae=0;do E=Ie,Ie=W>>>31|Ie<<1,W=ae|W<<1,E=_<<1|E>>>31|0,wt=_>>>31|S<<1|0,sA($e|0,C|0,E|0,wt|0)|0,R=Pt()|0,It=R>>31|((R|0)<0?-1:0)<<1,ae=It&1,_=sA(E|0,wt|0,It&Nt|0,(((R|0)<0?-1:0)>>31|((R|0)<0?-1:0)<<1)&ot|0)|0,S=Pt()|0,Z=Z-1|0;while(Z|0);$e=Ie,Ie=0}return Z=0,H|0&&(n[H>>2]=_,n[H+4>>2]=S),It=(W|0)>>>31|($e|Z)<<1|(Z<<1|W>>>31)&0|Ie,R=(W<<1|0)&-2|ae,fn(It|0),R|0}function Ca(_,S,C,E){_=_|0,S=S|0,C=C|0,E=E|0;var H=0,W=0;return W=Et,Et=Et+16|0,H=W|0,Vs(_,S,C,E,H)|0,Et=W,fn(n[H+4>>2]|0),n[H>>2]|0|0}function ci(_,S,C){return _=_|0,S=S|0,C=C|0,(C|0)<32?(fn(S>>>C|0),_>>>C|(S&(1<<C)-1)<<32-C):(fn(0),S>>>C-32|0)}function Ii(_,S,C){return _=_|0,S=S|0,C=C|0,(C|0)<32?(fn(S<<C|(_&(1<<C)-1<<32-C)>>>32-C|0),_<<C):(fn(_<<C-32|0),0)}function Ho(_,S){return _=+_,S=+S,_!=_?+S:S!=S?+_:+Mi(+_,+S)}function pl(_){return _=+_,_>=0?+Jt(_+.5):+pn(_-.5)}function gl(_,S,C){_=_|0,S=S|0,C=C|0;var E=0,H=0,W=0;if((C|0)>=8192)return Cr(_|0,S|0,C|0)|0,_|0;if(W=_|0,H=_+C|0,(_&3)==(S&3)){for(;_&3;){if(!C)return W|0;pt[_>>0]=pt[S>>0]|0,_=_+1|0,S=S+1|0,C=C-1|0}for(C=H&-4|0,E=C-64|0;(_|0)<=(E|0);)n[_>>2]=n[S>>2],n[_+4>>2]=n[S+4>>2],n[_+8>>2]=n[S+8>>2],n[_+12>>2]=n[S+12>>2],n[_+16>>2]=n[S+16>>2],n[_+20>>2]=n[S+20>>2],n[_+24>>2]=n[S+24>>2],n[_+28>>2]=n[S+28>>2],n[_+32>>2]=n[S+32>>2],n[_+36>>2]=n[S+36>>2],n[_+40>>2]=n[S+40>>2],n[_+44>>2]=n[S+44>>2],n[_+48>>2]=n[S+48>>2],n[_+52>>2]=n[S+52>>2],n[_+56>>2]=n[S+56>>2],n[_+60>>2]=n[S+60>>2],_=_+64|0,S=S+64|0;for(;(_|0)<(C|0);)n[_>>2]=n[S>>2],_=_+4|0,S=S+4|0}else for(C=H-4|0;(_|0)<(C|0);)pt[_>>0]=pt[S>>0]|0,pt[_+1>>0]=pt[S+1>>0]|0,pt[_+2>>0]=pt[S+2>>0]|0,pt[_+3>>0]=pt[S+3>>0]|0,_=_+4|0,S=S+4|0;for(;(_|0)<(H|0);)pt[_>>0]=pt[S>>0]|0,_=_+1|0,S=S+1|0;return W|0}function Wr(_,S,C){_=_|0,S=S|0,C=C|0;var E=0,H=0,W=0,Z=0;if(W=_+C|0,S=S&255,(C|0)>=67){for(;_&3;)pt[_>>0]=S,_=_+1|0;for(E=W&-4|0,Z=S|S<<8|S<<16|S<<24,H=E-64|0;(_|0)<=(H|0);)n[_>>2]=Z,n[_+4>>2]=Z,n[_+8>>2]=Z,n[_+12>>2]=Z,n[_+16>>2]=Z,n[_+20>>2]=Z,n[_+24>>2]=Z,n[_+28>>2]=Z,n[_+32>>2]=Z,n[_+36>>2]=Z,n[_+40>>2]=Z,n[_+44>>2]=Z,n[_+48>>2]=Z,n[_+52>>2]=Z,n[_+56>>2]=Z,n[_+60>>2]=Z,_=_+64|0;for(;(_|0)<(E|0);)n[_>>2]=Z,_=_+4|0}for(;(_|0)<(W|0);)pt[_>>0]=S,_=_+1|0;return W-C|0}function Qo(_){return _=+_,_>=0?+Jt(_+.5):+pn(_-.5)}function rs(_){_=_|0;var S=0,C=0,E=0;return E=nn()|0,C=n[Zt>>2]|0,S=C+_|0,(_|0)>0&(S|0)<(C|0)|(S|0)<0?(Gr(S|0)|0,xt(12),-1):(S|0)>(E|0)&&!(ys(S|0)|0)?(xt(12),-1):(n[Zt>>2]=S,C|0)}return{___uremdi3:Ca,_bitshift64Lshr:ci,_bitshift64Shl:Ii,_calloc:Io,_cellAreaKm2:TA,_cellAreaM2:Vo,_cellAreaRads2:mr,_compact:kA,_destroyLinkedPolygon:Qn,_edgeLengthKm:Aa,_edgeLengthM:Hr,_emscripten_replace_memory:Hn,_exactEdgeLengthKm:ws,_exactEdgeLengthM:Ar,_exactEdgeLengthRads:Uo,_experimentalH3ToLocalIj:fa,_experimentalLocalIjToH3:cl,_free:zn,_geoToH3:pA,_getDestinationH3IndexFromUnidirectionalEdge:gi,_getH3IndexesFromUnidirectionalEdge:Bt,_getH3UnidirectionalEdge:Xt,_getH3UnidirectionalEdgeBoundary:Ci,_getH3UnidirectionalEdgesFromHexagon:ii,_getOriginH3IndexFromUnidirectionalEdge:Si,_getPentagonIndexes:nA,_getRes0Indexes:qn,_h3Distance:jr,_h3GetBaseCell:wo,_h3GetFaces:MA,_h3GetResolution:On,_h3IndexesAreNeighbors:Sa,_h3IsPentagon:Kr,_h3IsResClassIII:wa,_h3IsValid:Lr,_h3Line:Ol,_h3LineSize:Hu,_h3SetToLinkedGeo:sa,_h3ToCenterChild:Qs,_h3ToChildren:_r,_h3ToGeo:qs,_h3ToGeoBoundary:so,_h3ToParent:no,_h3UnidirectionalEdgeIsValid:mt,_hexAreaKm2:No,_hexAreaM2:rr,_hexRing:bs,_i64Subtract:sA,_kRing:va,_kRingDistances:$o,_llvm_minnum_f64:Ho,_llvm_round_f64:pl,_malloc:da,_maxFaceCount:So,_maxH3ToChildrenSize:iA,_maxKringSize:po,_maxPolyfillSize:Or,_maxUncompactSize:dA,_memcpy:gl,_memset:Wr,_numHexagons:Qr,_pentagonIndexCount:Rl,_pointDistKm:gs,_pointDistM:ul,_pointDistRads:Ha,_polyfill:ya,_res0IndexCount:Nn,_round:Qo,_sbrk:rs,_sizeOfCoordIJ:UA,_sizeOfGeoBoundary:rn,_sizeOfGeoCoord:zl,_sizeOfGeoPolygon:eu,_sizeOfGeofence:hl,_sizeOfH3Index:oo,_sizeOfLinkedGeoPolygon:gA,_uncompact:ro,establishStackSpace:Ks,stackAlloc:ft,stackRestore:Xs,stackSave:gr}}(Ne,Ue,lt);t.___uremdi3=de.___uremdi3,t._bitshift64Lshr=de._bitshift64Lshr,t._bitshift64Shl=de._bitshift64Shl,t._calloc=de._calloc,t._cellAreaKm2=de._cellAreaKm2,t._cellAreaM2=de._cellAreaM2,t._cellAreaRads2=de._cellAreaRads2,t._compact=de._compact,t._destroyLinkedPolygon=de._destroyLinkedPolygon,t._edgeLengthKm=de._edgeLengthKm,t._edgeLengthM=de._edgeLengthM;var ue=t._emscripten_replace_memory=de._emscripten_replace_memory;t._exactEdgeLengthKm=de._exactEdgeLengthKm,t._exactEdgeLengthM=de._exactEdgeLengthM,t._exactEdgeLengthRads=de._exactEdgeLengthRads,t._experimentalH3ToLocalIj=de._experimentalH3ToLocalIj,t._experimentalLocalIjToH3=de._experimentalLocalIjToH3,t._free=de._free,t._geoToH3=de._geoToH3,t._getDestinationH3IndexFromUnidirectionalEdge=de._getDestinationH3IndexFromUnidirectionalEdge,t._getH3IndexesFromUnidirectionalEdge=de._getH3IndexesFromUnidirectionalEdge,t._getH3UnidirectionalEdge=de._getH3UnidirectionalEdge,t._getH3UnidirectionalEdgeBoundary=de._getH3UnidirectionalEdgeBoundary,t._getH3UnidirectionalEdgesFromHexagon=de._getH3UnidirectionalEdgesFromHexagon,t._getOriginH3IndexFromUnidirectionalEdge=de._getOriginH3IndexFromUnidirectionalEdge,t._getPentagonIndexes=de._getPentagonIndexes,t._getRes0Indexes=de._getRes0Indexes,t._h3Distance=de._h3Distance,t._h3GetBaseCell=de._h3GetBaseCell,t._h3GetFaces=de._h3GetFaces,t._h3GetResolution=de._h3GetResolution,t._h3IndexesAreNeighbors=de._h3IndexesAreNeighbors,t._h3IsPentagon=de._h3IsPentagon,t._h3IsResClassIII=de._h3IsResClassIII,t._h3IsValid=de._h3IsValid,t._h3Line=de._h3Line,t._h3LineSize=de._h3LineSize,t._h3SetToLinkedGeo=de._h3SetToLinkedGeo,t._h3ToCenterChild=de._h3ToCenterChild,t._h3ToChildren=de._h3ToChildren,t._h3ToGeo=de._h3ToGeo,t._h3ToGeoBoundary=de._h3ToGeoBoundary,t._h3ToParent=de._h3ToParent,t._h3UnidirectionalEdgeIsValid=de._h3UnidirectionalEdgeIsValid,t._hexAreaKm2=de._hexAreaKm2,t._hexAreaM2=de._hexAreaM2,t._hexRing=de._hexRing,t._i64Subtract=de._i64Subtract,t._kRing=de._kRing,t._kRingDistances=de._kRingDistances,t._llvm_minnum_f64=de._llvm_minnum_f64,t._llvm_round_f64=de._llvm_round_f64,t._malloc=de._malloc,t._maxFaceCount=de._maxFaceCount,t._maxH3ToChildrenSize=de._maxH3ToChildrenSize,t._maxKringSize=de._maxKringSize,t._maxPolyfillSize=de._maxPolyfillSize,t._maxUncompactSize=de._maxUncompactSize,t._memcpy=de._memcpy,t._memset=de._memset,t._numHexagons=de._numHexagons,t._pentagonIndexCount=de._pentagonIndexCount,t._pointDistKm=de._pointDistKm,t._pointDistM=de._pointDistM,t._pointDistRads=de._pointDistRads,t._polyfill=de._polyfill,t._res0IndexCount=de._res0IndexCount,t._round=de._round,t._sbrk=de._sbrk,t._sizeOfCoordIJ=de._sizeOfCoordIJ,t._sizeOfGeoBoundary=de._sizeOfGeoBoundary,t._sizeOfGeoCoord=de._sizeOfGeoCoord,t._sizeOfGeoPolygon=de._sizeOfGeoPolygon,t._sizeOfGeofence=de._sizeOfGeofence,t._sizeOfH3Index=de._sizeOfH3Index,t._sizeOfLinkedGeoPolygon=de._sizeOfLinkedGeoPolygon,t._uncompact=de._uncompact,t.establishStackSpace=de.establishStackSpace;var Y=t.stackAlloc=de.stackAlloc,ne=t.stackRestore=de.stackRestore,he=t.stackSave=de.stackSave;if(t.asm=de,t.cwrap=ct,t.setValue=se,t.getValue=be,t.getTempRet0=J,Wi){gn(Wi)||(Wi=h(Wi));{ar();var me=function(ge){ge.byteLength&&(ge=new Uint8Array(ge)),Ke.set(ge,oe),t.memoryInitializerRequest&&delete t.memoryInitializerRequest.response,ti()},pe=function(){v(Wi,me,function(){throw"could not load memory initializer "+Wi})},Oe=je(Wi);if(Oe)me(Oe.buffer);else if(t.memoryInitializerRequest){var ze=function(){var ge=t.memoryInitializerRequest,Ee=ge.response;if(ge.status!==200&&ge.status!==0){var tt=je(t.memoryInitializerRequestURL);if(tt)Ee=tt.buffer;else{console.warn("a problem seems to have happened with Module.memoryInitializerRequest, status: "+ge.status+", retrying "+Wi),pe();return}}me(Ee)};t.memoryInitializerRequest.response?setTimeout(ze,0):t.memoryInitializerRequest.addEventListener("load",ze)}else pe()}}var Be;sn=function ge(){Be||Ye(),Be||(sn=ge)};function Ye(ge){if(ki>0||(Wt(),ki>0))return;function Ee(){Be||(Be=!0,!qe&&(Di(),$t(),t.onRuntimeInitialized&&t.onRuntimeInitialized(),Lt()))}t.setStatus?(t.setStatus("Running..."),setTimeout(function(){setTimeout(function(){t.setStatus("")},1),Ee()},1)):Ee()}t.run=Ye;function Xe(ge){throw t.onAbort&&t.onAbort(ge),ge+="",o(ge),k(ge),qe=!0,"abort("+ge+"). Build with -s ASSERTIONS=1 for more info."}if(t.abort=Xe,t.preInit)for(typeof t.preInit=="function"&&(t.preInit=[t.preInit]);t.preInit.length>0;)t.preInit.pop()();return Ye(),e}(typeof ji=="object"?ji:{}),Xn="number",Bd=Xn,ur=Xn,Nr=Xn,Sl=Xn,ps=Xn,aN=[["sizeOfH3Index",Xn],["sizeOfGeoCoord",Xn],["sizeOfGeoBoundary",Xn],["sizeOfGeoPolygon",Xn],["sizeOfGeofence",Xn],["sizeOfLinkedGeoPolygon",Xn],["sizeOfCoordIJ",Xn],["h3IsValid",Bd,[ur,Nr]],["geoToH3",ur,[Xn,Xn,Sl]],["h3ToGeo",null,[ur,Nr,ps]],["h3ToGeoBoundary",null,[ur,Nr,ps]],["maxKringSize",Xn,[Xn]],["kRing",null,[ur,Nr,Xn,ps]],["kRingDistances",null,[ur,Nr,Xn,ps,ps]],["hexRing",null,[ur,Nr,Xn,ps]],["maxPolyfillSize",Xn,[ps,Sl]],["polyfill",null,[ps,Sl,ps]],["h3SetToLinkedGeo",null,[ps,Xn,ps]],["destroyLinkedPolygon",null,[ps]],["compact",Xn,[ps,ps,Xn]],["uncompact",Xn,[ps,Xn,ps,Xn,Sl]],["maxUncompactSize",Xn,[ps,Xn,Sl]],["h3IsPentagon",Bd,[ur,Nr]],["h3IsResClassIII",Bd,[ur,Nr]],["h3GetBaseCell",Xn,[ur,Nr]],["h3GetResolution",Xn,[ur,Nr]],["maxFaceCount",Xn,[ur,Nr]],["h3GetFaces",null,[ur,Nr,ps]],["h3ToParent",ur,[ur,Nr,Sl]],["h3ToChildren",null,[ur,Nr,Sl,ps]],["h3ToCenterChild",ur,[ur,Nr,Sl]],["maxH3ToChildrenSize",Xn,[ur,Nr,Sl]],["h3IndexesAreNeighbors",Bd,[ur,Nr,ur,Nr]],["getH3UnidirectionalEdge",ur,[ur,Nr,ur,Nr]],["getOriginH3IndexFromUnidirectionalEdge",ur,[ur,Nr]],["getDestinationH3IndexFromUnidirectionalEdge",ur,[ur,Nr]],["h3UnidirectionalEdgeIsValid",Bd,[ur,Nr]],["getH3IndexesFromUnidirectionalEdge",null,[ur,Nr,ps]],["getH3UnidirectionalEdgesFromHexagon",null,[ur,Nr,ps]],["getH3UnidirectionalEdgeBoundary",null,[ur,Nr,ps]],["h3Distance",Xn,[ur,Nr,ur,Nr]],["h3Line",Xn,[ur,Nr,ur,Nr,ps]],["h3LineSize",Xn,[ur,Nr,ur,Nr]],["experimentalH3ToLocalIj",Xn,[ur,Nr,ur,Nr,ps]],["experimentalLocalIjToH3",Xn,[ur,Nr,ps,ps]],["hexAreaM2",Xn,[Sl]],["hexAreaKm2",Xn,[Sl]],["edgeLengthM",Xn,[Sl]],["edgeLengthKm",Xn,[Sl]],["pointDistM",Xn,[ps,ps]],["pointDistKm",Xn,[ps,ps]],["pointDistRads",Xn,[ps,ps]],["cellAreaM2",Xn,[ur,Nr]],["cellAreaKm2",Xn,[ur,Nr]],["cellAreaRads2",Xn,[ur,Nr]],["exactEdgeLengthM",Xn,[ur,Nr]],["exactEdgeLengthKm",Xn,[ur,Nr]],["exactEdgeLengthRads",Xn,[ur,Nr]],["numHexagons",Xn,[Sl]],["getRes0Indexes",null,[ps]],["res0IndexCount",Xn],["getPentagonIndexes",null,[Xn,ps]],["pentagonIndexCount",Xn]],Mn={};aN.forEach(function(t){Mn[t[0]]=ji.cwrap.apply(ji,t)});var r0=16,il=4,ww=4,gh=8,FA=Mn.sizeOfH3Index(),m1=Mn.sizeOfGeoCoord(),h8=Mn.sizeOfGeoBoundary(),oN=Mn.sizeOfGeoPolygon(),Zd=Mn.sizeOfGeofence(),AN=Mn.sizeOfLinkedGeoPolygon(),f8=Mn.sizeOfCoordIJ(),Il={m:"m",m2:"m2",km:"km",km2:"km2",rads:"rads",rads2:"rads2"};function w0(e){if(typeof e!="number"||e<0||e>15||Math.floor(e)!==e)throw new Error("Invalid resolution: "+e)}var lN=/[^0-9a-fA-F]/;function ds(e){if(Array.isArray(e)&&e.length===2&&Number.isInteger(e[0])&&Number.isInteger(e[1]))return e;if(typeof e!="string"||lN.test(e))return[0,0];var t=parseInt(e.substring(0,e.length-8),r0),i=parseInt(e.substring(e.length-8),r0);return[i,t]}function Sw(e){if(e>=0)return e.toString(r0);e=e&2147483647;var t=d8(8,e.toString(r0)),i=(parseInt(t[0],r0)+8).toString(r0);return t=i+t.substring(1),t}function _1(e,t){return Sw(t)+d8(8,Sw(e))}function d8(e,t){for(var i=e-t.length,r="",c=0;c<i;c++)r+="0";return r=r+t,r}function Cw(e,t,i){for(var r=e.length,c=ji._calloc(r,m1),h=i?1:0,v=i?0:1,o=0;o<r*2;o+=2)ji.HEAPF64.set([e[o/2][h],e[o/2][v]].map(v1),c/gh+o);return ji.HEAPU32.set([r,c],t/il),t}function uN(e,t){var i=e.length-1,r=ji._calloc(oN),c=0,h=c+Zd,v=h+il;Cw(e[0],r+c,t);var o;if(i>0){o=ji._calloc(i,Zd);for(var k=0;k<i;k++)Cw(e[k+1],o+Zd*k,t)}return ji.setValue(r+h,i,"i32"),ji.setValue(r+v,o,"i32"),r}function cN(e){var t=0,i=t+Zd,r=i+il,c=il;ji._free(ji.getValue(e+t+c,"i8*"));var h=ji.getValue(e+i,"i32");if(h>0){for(var v=ji.getValue(e+r,"i32"),o=0;o<h;o++)ji._free(ji.getValue(v+Zd*o+c,"i8*"));ji._free(v)}ji._free(e)}function p8(e){var t=ji.getTempRet0();return[e,t]}function S0(e){var t=p8(e),i=t[0],r=t[1];return r?_1(i,r):null}function g8(e,t){t===void 0&&(t=0);var i=ji.getValue(e+il*t*2,"i32"),r=ji.getValue(e+il*(t*2+1),"i32");return r?_1(i,r):null}function hN(e,t,i){ji.HEAPU32.set(ds(e),t/il+2*i)}function Gu(e,t){for(var i=[],r=0;r<t;r++){var c=g8(e,r);c!==null&&i.push(c)}return i}function Sy(e,t){for(var i=t.length,r=0;r<i;r++)hN(t[r],e,r)}function Ew(e,t){var i=ji._calloc(1,m1);return ji.HEAPF64.set([e,t].map(v1),i/gh),i}function Zm(e){return y8(ji.getValue(e,"double"))}function Cy(e){return[Zm(e),Zm(e+gh)]}function m8(e){return[Zm(e+gh),Zm(e)]}function _8(e,t,i){for(var r=ji.getValue(e,"i32"),c=e+gh,h=[],v=t?m8:Cy,o=0;o<r*2;o+=2)h.push(v(c+gh*o));return i&&h.push(h[0]),h}function fN(e,t){for(var i=[],r=t?m8:Cy,c,h,v,o;e;){for(i.push(c=[]),h=ji.getValue(e,"i8*");h;){for(c.push(v=[]),o=ji.getValue(h,"i8*");o;)v.push(r(o)),o=ji.getValue(o+gh*2,"i8*");t&&v.push(v[0]),h=ji.getValue(h+ww*2,"i8*")}e=ji.getValue(e+ww*2,"i8*")}return i}function dN(e){return{i:ji.getValue(e,"i32"),j:ji.getValue(e+il,"i32")}}function pN(e,t){var i=t.i,r=t.j;ji.setValue(e,i,"i32"),ji.setValue(e+il,r,"i32")}function gN(e,t){for(var i=[],r=0;r<t;r++){var c=ji.getValue(e+il*r,"i32");c>=0&&i.push(c)}return i}function v8(e){var t=ds(e),i=t[0],r=t[1];return!!Mn.h3IsValid(i,r)}function mN(e){var t=ds(e),i=t[0],r=t[1];return!!Mn.h3IsPentagon(i,r)}function _N(e){var t=ds(e),i=t[0],r=t[1];return!!Mn.h3IsResClassIII(i,r)}function vN(e){var t=ds(e),i=t[0],r=t[1];return Mn.h3GetBaseCell(i,r)}function yN(e){var t=ds(e),i=t[0],r=t[1],c=Mn.maxFaceCount(i,r),h=ji._malloc(il*c);Mn.h3GetFaces(i,r,h);var v=gN(h,c);return ji._free(h),v}function bN(e){var t=ds(e),i=t[0],r=t[1];return Mn.h3IsValid(i,r)?Mn.h3GetResolution(i,r):-1}function xN(e,t,i){var r=ji._malloc(m1);ji.HEAPF64.set([e,t].map(v1),r/gh);var c=S0(Mn.geoToH3(r,i));return ji._free(r),c}function wN(e){var t=ji._malloc(m1),i=ds(e),r=i[0],c=i[1];Mn.h3ToGeo(r,c,t);var h=Cy(t);return ji._free(t),h}function SN(e,t){var i=ji._malloc(h8),r=ds(e),c=r[0],h=r[1];Mn.h3ToGeoBoundary(c,h,i);var v=_8(i,t,t);return ji._free(i),v}function CN(e,t){var i=ds(e),r=i[0],c=i[1];return S0(Mn.h3ToParent(r,c,t))}function EN(e,t){if(!v8(e))return[];var i=ds(e),r=i[0],c=i[1],h=Mn.maxH3ToChildrenSize(r,c,t),v=ji._calloc(h,FA);Mn.h3ToChildren(r,c,t,v);var o=Gu(v,h);return ji._free(v),o}function IN(e,t){var i=ds(e),r=i[0],c=i[1];return S0(Mn.h3ToCenterChild(r,c,t))}function TN(e,t){var i=ds(e),r=i[0],c=i[1],h=Mn.maxKringSize(t),v=ji._calloc(h,FA);Mn.kRing(r,c,t,v);var o=Gu(v,h);return ji._free(v),o}function kN(e,t){var i=ds(e),r=i[0],c=i[1],h=Mn.maxKringSize(t),v=ji._calloc(h,FA),o=ji._calloc(h,il);Mn.kRingDistances(r,c,t,v,o);for(var k=[],O=0;O<t+1;O++)k.push([]);for(var j=0;j<h*2;j+=2){var J=ji.getValue(v+il*j,"i32"),oe=ji.getValue(v+il*(j+1),"i32"),se=ji.getValue(o+il*(j/2),"i32");(J!==0||oe!==0)&&k[se].push(_1(J,oe))}return ji._free(v),ji._free(o),k}function MN(e,t){var i=t===0?1:6*t,r=ji._calloc(i,FA),c=Mn.hexRing.apply(Mn,ds(e).concat([t],[r]));if(c!==0)throw ji._free(r),new Error("Failed to get hexRing (encountered a pentagon?)");var h=Gu(r,i);return ji._free(r),h}function PN(e,t,i){if(w0(t),i=!!i,e.length===0||e[0].length===0)return[];typeof e[0][0]=="number"&&(e=[e]);var r=uN(e,i),c=Mn.maxPolyfillSize(r,t),h=ji._calloc(c,FA);Mn.polyfill(r,t,h);var v=Gu(h,c);return ji._free(h),cN(r),v}function DN(e,t){if(!e||!e.length)return[];var i=e.length,r=ji._calloc(i,FA);Sy(r,e);var c=ji._calloc(AN),h=c;Mn.h3SetToLinkedGeo(r,i,c);var v=fN(c,t);return Mn.destroyLinkedPolygon(h),ji._free(h),ji._free(r),v}function LN(e){if(!e||!e.length)return[];var t=e.length,i=ji._calloc(t,FA);Sy(i,e);var r=ji._calloc(t,FA),c=Mn.compact(i,r,t);if(c!==0)throw ji._free(i),ji._free(r),new Error("Failed to compact, malformed input data (duplicate hexagons?)");var h=Gu(r,t);return ji._free(i),ji._free(r),h}function BN(e,t){if(w0(t),!e||!e.length)return[];var i=e.length,r=ji._calloc(i,FA);Sy(r,e);var c=Mn.maxUncompactSize(r,i,t),h=ji._calloc(c,FA),v=Mn.uncompact(r,i,h,c,t);if(v!==0)throw ji._free(r),ji._free(h),new Error("Failed to uncompact (bad resolution?)");var o=Gu(h,c);return ji._free(r),ji._free(h),o}function RN(e,t){var i=ds(e),r=i[0],c=i[1],h=ds(t),v=h[0],o=h[1];return!!Mn.h3IndexesAreNeighbors(r,c,v,o)}function ON(e,t){var i=ds(e),r=i[0],c=i[1],h=ds(t),v=h[0],o=h[1];return S0(Mn.getH3UnidirectionalEdge(r,c,v,o))}function zN(e){var t=ds(e),i=t[0],r=t[1];return S0(Mn.getOriginH3IndexFromUnidirectionalEdge(i,r))}function FN(e){var t=ds(e),i=t[0],r=t[1];return S0(Mn.getDestinationH3IndexFromUnidirectionalEdge(i,r))}function NN(e){var t=ds(e),i=t[0],r=t[1];return!!Mn.h3UnidirectionalEdgeIsValid(i,r)}function VN(e){var t=ds(e),i=t[0],r=t[1],c=2,h=ji._calloc(c,FA);Mn.getH3IndexesFromUnidirectionalEdge(i,r,h);var v=Gu(h,c);return ji._free(h),v}function UN(e){var t=ds(e),i=t[0],r=t[1],c=6,h=ji._calloc(c,FA);Mn.getH3UnidirectionalEdgesFromHexagon(i,r,h);var v=Gu(h,c);return ji._free(h),v}function GN(e,t){var i=ji._malloc(h8),r=ds(e),c=r[0],h=r[1];Mn.getH3UnidirectionalEdgeBoundary(c,h,i);var v=_8(i,t);return ji._free(i),v}function HN(e,t){var i=ds(e),r=i[0],c=i[1],h=ds(t),v=h[0],o=h[1];return Mn.h3Distance(r,c,v,o)}function QN(e,t){var i=ds(e),r=i[0],c=i[1],h=ds(t),v=h[0],o=h[1],k=Mn.h3LineSize(r,c,v,o);if(k<0)throw new Error("Line cannot be calculated");var O=ji._calloc(k,FA);Mn.h3Line(r,c,v,o,O);var j=Gu(O,k);return ji._free(O),j}function qN(e,t){var i=ji._malloc(f8),r=Mn.experimentalH3ToLocalIj.apply(Mn,ds(e).concat(ds(t),[i])),c=dN(i);switch(ji._free(i),r){case 0:return c;case 1:throw new Error("Incompatible origin and index.");case 2:default:throw new Error("Local IJ coordinates undefined for this origin and index pair. The index may be too far from the origin.");case 3:case 4:case 5:throw new Error("Encountered possible pentagon distortion")}}function ZN(e,t){if(!t||typeof t.i!="number"||typeof t.j!="number")throw new Error("Coordinates must be provided as an {i, j} object");var i=ji._malloc(f8),r=ji._malloc(FA);pN(i,t);var c=Mn.experimentalLocalIjToH3.apply(Mn,ds(e).concat([i],[r])),h=g8(r);if(ji._free(i),ji._free(r),c!==0)throw new Error("Index not defined for this origin and IJ coordinates pair. IJ coordinates may be too far from origin, or a pentagon distortion was encountered.");return h}function jN(e,t,i){var r=Ew(e[0],e[1]),c=Ew(t[0],t[1]),h;switch(i){case Il.m:h=Mn.pointDistM(r,c);break;case Il.km:h=Mn.pointDistKm(r,c);break;case Il.rads:h=Mn.pointDistRads(r,c);break;default:h=null}if(ji._free(r),ji._free(c),h===null)throw new Error("Unknown unit: "+i);return h}function WN(e,t){var i=ds(e),r=i[0],c=i[1];switch(t){case Il.m2:return Mn.cellAreaM2(r,c);case Il.km2:return Mn.cellAreaKm2(r,c);case Il.rads2:return Mn.cellAreaRads2(r,c);default:throw new Error("Unknown unit: "+t)}}function YN(e,t){var i=ds(e),r=i[0],c=i[1];switch(t){case Il.m:return Mn.exactEdgeLengthM(r,c);case Il.km:return Mn.exactEdgeLengthKm(r,c);case Il.rads:return Mn.exactEdgeLengthRads(r,c);default:throw new Error("Unknown unit: "+t)}}function XN(e,t){switch(w0(e),t){case Il.m2:return Mn.hexAreaM2(e);case Il.km2:return Mn.hexAreaKm2(e);default:throw new Error("Unknown unit: "+t)}}function KN(e,t){switch(w0(e),t){case Il.m:return Mn.edgeLengthM(e);case Il.km:return Mn.edgeLengthKm(e);default:throw new Error("Unknown unit: "+t)}}function JN(e){w0(e);var t=p8(Mn.numHexagons(e)),i=t[0],r=t[1];return r?r*Math.pow(2,32)+i:i}function $N(){var e=Mn.res0IndexCount(),t=ji._malloc(FA*e);Mn.getRes0Indexes(t);var i=Gu(t,e);return ji._free(t),i}function eV(e){w0(e);var t=Mn.pentagonIndexCount(),i=ji._malloc(FA*t);Mn.getPentagonIndexes(e,i);var r=Gu(i,t);return ji._free(i),r}function v1(e){return e*Math.PI/180}function y8(e){return e*180/Math.PI}const tV=Object.freeze(Object.defineProperty({__proto__:null,UNITS:Il,cellArea:WN,compact:LN,degsToRads:v1,edgeLength:KN,exactEdgeLength:YN,experimentalH3ToLocalIj:qN,experimentalLocalIjToH3:ZN,geoToH3:xN,getDestinationH3IndexFromUnidirectionalEdge:FN,getH3IndexesFromUnidirectionalEdge:VN,getH3UnidirectionalEdge:ON,getH3UnidirectionalEdgeBoundary:GN,getH3UnidirectionalEdgesFromHexagon:UN,getOriginH3IndexFromUnidirectionalEdge:zN,getPentagonIndexes:eV,getRes0Indexes:$N,h3Distance:HN,h3GetBaseCell:vN,h3GetFaces:yN,h3GetResolution:bN,h3IndexToSplitLong:ds,h3IndexesAreNeighbors:RN,h3IsPentagon:mN,h3IsResClassIII:_N,h3IsValid:v8,h3Line:QN,h3SetToMultiPolygon:DN,h3ToCenterChild:IN,h3ToChildren:EN,h3ToGeo:wN,h3ToGeoBoundary:SN,h3ToParent:CN,h3UnidirectionalEdgeIsValid:NN,hexArea:XN,hexRing:MN,kRing:TN,kRingDistances:kN,numHexagons:JN,pointDist:jN,polyfill:PN,radsToDegs:y8,splitLongToh3Index:_1,uncompact:BN},Symbol.toStringTag,{value:"Module"})),iV=Mv(tV);var ap=iV,y1="Feature",b8="FeatureCollection",jm="Polygon",Ey="MultiPolygon";function x8(e){for(var t=null,i=0;i<e.length;i++)if(t!==null)for(var r=0;r<e[i].length;r++)t.push(e[i][r]);else t=e[i];return Array.from(new Set(t))}function nV(e){for(var t=0,i=0,r=0,c=e[0],h=0;h<c.length;h++)t+=c[h][0],i+=c[h][1],r++;return[t/r,i/r]}function rV(e,t){var i=e.features;if(!i)throw new Error("No features found");return x8(i.map(function(r){return w8(r,t)}))}function w8(e,t,i){i===void 0&&(i={});var r=e.type,c=e.geometry,h=c&&c.type;if(r===b8)return rV(e,t);if(r!==y1)throw new Error("Unhandled type: "+r);if(h!==jm&&h!==Ey)throw new Error("Unhandled geometry type: "+h);var v=h===jm?[c.coordinates]:c.coordinates;return x8(v.map(function(o){var k=ap.polyfill(o,t,!0);if(k.length||!i.ensureOutput)return k;var O=nV(o),j=O[0],J=O[1];return[ap.geoToH3(J,j,t)]}))}function S8(e,t){t===void 0&&(t={});var i=[ap.h3ToGeoBoundary(e,!0)];return{type:y1,id:e,properties:t,geometry:{type:jm,coordinates:i}}}function sV(e,t){t===void 0&&(t={});var i=ap.h3SetToMultiPolygon(e,!0),r=i.length>1,c=r?Ey:jm,h=r?i:i[0]||[];return{type:y1,properties:t,geometry:{type:c,coordinates:h}}}function aV(e,t){t===void 0&&(t={});var i=e.map(function(r){return[ap.h3ToGeoBoundary(r,{geoJson:!0})]});return{type:y1,properties:t,geometry:{type:Ey,coordinates:i}}}function oV(e,t){for(var i=[],r=0;r<e.length;r++){var c=e[r],h=t?t(c):{};i.push(S8(c,h))}return{type:b8,features:i}}var AV={featureToH3Set:w8,h3ToFeature:S8,h3SetToFeature:sV,h3SetToMultiPolygonFeature:aV,h3SetToFeatureCollection:oV},lV=AV,_s=function(e){e=e||{};var t=typeof e<"u"?e:{},i={},r;for(r in t)t.hasOwnProperty(r)&&(i[r]=t[r]);var c="";function h(ge){return t.locateFile?t.locateFile(ge,c):c+ge}var v;typeof document<"u"&&document.currentScript&&(c=document.currentScript.src),c.indexOf("blob:")!==0?c=c.substr(0,c.lastIndexOf("/")+1):c="",v=function(Ee,tt,pt){var n=new XMLHttpRequest;n.open("GET",Ee,!0),n.responseType="arraybuffer",n.onload=function(){if(n.status==200||n.status==0&&n.response){tt(n.response);return}var Zt=je(Ee);if(Zt){tt(Zt.buffer);return}pt()},n.onerror=pt,n.send(null)};var o=t.print||console.log.bind(console),k=t.printErr||console.warn.bind(console);for(r in i)i.hasOwnProperty(r)&&(t[r]=i[r]);i=null,t.arguments&&t.arguments;var O=0,j=function(ge){O=ge},J=function(){return O},oe=8;function se(ge,Ee,tt,pt){switch(tt=tt||"i8",tt.charAt(tt.length-1)==="*"&&(tt="i32"),tt){case"i1":ut[ge>>0]=Ee;break;case"i8":ut[ge>>0]=Ee;break;case"i16":Me[ge>>1]=Ee;break;case"i32":Ze[ge>>2]=Ee;break;case"i64":an=[Ee>>>0,(kn=Ee,+Oi(kn)>=1?kn>0?($i(+oi(kn/4294967296),4294967295)|0)>>>0:~~+zi((kn-+(~~kn>>>0))/4294967296)>>>0:0)],Ze[ge>>2]=an[0],Ze[ge+4>>2]=an[1];break;case"float":Fe[ge>>2]=Ee;break;case"double":vt[ge>>3]=Ee;break;default:Xe("invalid type for setValue: "+tt)}}function be(ge,Ee,tt){switch(Ee=Ee||"i8",Ee.charAt(Ee.length-1)==="*"&&(Ee="i32"),Ee){case"i1":return ut[ge>>0];case"i8":return ut[ge>>0];case"i16":return Me[ge>>1];case"i32":return Ze[ge>>2];case"i64":return Ze[ge>>2];case"float":return Fe[ge>>2];case"double":return vt[ge>>3];default:Xe("invalid type for getValue: "+Ee)}return null}var qe=!1;function ke(ge,Ee){ge||Xe("Assertion failed: "+Ee)}function Qe(ge){var Ee=t["_"+ge];return ke(Ee,"Cannot call unknown function "+ge+", make sure it is exported"),Ee}function We(ge,Ee,tt,pt,n){var ce={string:function(pi){var Rt=0;if(pi!=null&&pi!==0){var Yi=(pi.length<<2)+1;Rt=Y(Yi),Ve(pi,Rt,Yi)}return Rt},array:function(pi){var Rt=Y(pi.length);return Je(pi,Rt),Rt}};function Zt(pi){return Ee==="string"?xe(pi):Ee==="boolean"?!!pi:pi}var Jt=Qe(ge),ui=[],Vt=0;if(pt)for(var qt=0;qt<pt.length;qt++){var Ei=ce[tt[qt]];Ei?(Vt===0&&(Vt=he()),ui[qt]=Ei(pt[qt])):ui[qt]=pt[qt]}var Ai=Jt.apply(null,ui);return Ai=Zt(Ai),Vt!==0&&ne(Vt),Ai}function ct(ge,Ee,tt,pt){tt=tt||[];var n=tt.every(function(Zt){return Zt==="number"}),ce=Ee!=="string";return ce&&n&&!pt?Qe(ge):function(){return We(ge,Ee,tt,arguments)}}var St=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function yt(ge,Ee,tt){for(var pt=Ee+tt,n=Ee;ge[n]&&!(n>=pt);)++n;if(n-Ee>16&&ge.subarray&&St)return St.decode(ge.subarray(Ee,n));for(var ce="";Ee<n;){var Zt=ge[Ee++];if(!(Zt&128)){ce+=String.fromCharCode(Zt);continue}var Jt=ge[Ee++]&63;if((Zt&224)==192){ce+=String.fromCharCode((Zt&31)<<6|Jt);continue}var ui=ge[Ee++]&63;if((Zt&240)==224?Zt=(Zt&15)<<12|Jt<<6|ui:Zt=(Zt&7)<<18|Jt<<12|ui<<6|ge[Ee++]&63,Zt<65536)ce+=String.fromCharCode(Zt);else{var Vt=Zt-65536;ce+=String.fromCharCode(55296|Vt>>10,56320|Vt&1023)}}return ce}function xe(ge,Ee){return ge?yt(Ke,ge,Ee):""}function Gt(ge,Ee,tt,pt){if(!(pt>0))return 0;for(var n=tt,ce=tt+pt-1,Zt=0;Zt<ge.length;++Zt){var Jt=ge.charCodeAt(Zt);if(Jt>=55296&&Jt<=57343){var ui=ge.charCodeAt(++Zt);Jt=65536+((Jt&1023)<<10)|ui&1023}if(Jt<=127){if(tt>=ce)break;Ee[tt++]=Jt}else if(Jt<=2047){if(tt+1>=ce)break;Ee[tt++]=192|Jt>>6,Ee[tt++]=128|Jt&63}else if(Jt<=65535){if(tt+2>=ce)break;Ee[tt++]=224|Jt>>12,Ee[tt++]=128|Jt>>6&63,Ee[tt++]=128|Jt&63}else{if(tt+3>=ce)break;Ee[tt++]=240|Jt>>18,Ee[tt++]=128|Jt>>12&63,Ee[tt++]=128|Jt>>6&63,Ee[tt++]=128|Jt&63}}return Ee[tt]=0,tt-n}function Ve(ge,Ee,tt){return Gt(ge,Ke,Ee,tt)}typeof TextDecoder<"u"&&new TextDecoder("utf-16le");function Je(ge,Ee){ut.set(ge,Ee)}function et(ge,Ee){return ge%Ee>0&&(ge+=Ee-ge%Ee),ge}var lt,ut,Ke,Me,Ze,Fe,vt;function dt(ge){lt=ge,t.HEAP8=ut=new Int8Array(ge),t.HEAP16=Me=new Int16Array(ge),t.HEAP32=Ze=new Int32Array(ge),t.HEAPU8=Ke=new Uint8Array(ge),t.HEAPU16=new Uint16Array(ge),t.HEAPU32=new Uint32Array(ge),t.HEAPF32=Fe=new Float32Array(ge),t.HEAPF64=vt=new Float64Array(ge)}var _t=5267040,ei=24128,di=t.TOTAL_MEMORY||33554432;t.buffer?lt=t.buffer:lt=new ArrayBuffer(di),di=lt.byteLength,dt(lt),Ze[ei>>2]=_t;function yi(ge){for(;ge.length>0;){var Ee=ge.shift();if(typeof Ee=="function"){Ee();continue}var tt=Ee.func;typeof tt=="number"?Ee.arg===void 0?t.dynCall_v(tt):t.dynCall_vi(tt,Ee.arg):tt(Ee.arg===void 0?null:Ee.arg)}}var Ti=[],Vi=[],wi=[],mi=[];function Wt(){if(t.preRun)for(typeof t.preRun=="function"&&(t.preRun=[t.preRun]);t.preRun.length;)ni(t.preRun.shift());yi(Ti)}function Di(){yi(Vi)}function $t(){yi(wi)}function Lt(){if(t.postRun)for(typeof t.postRun=="function"&&(t.postRun=[t.postRun]);t.postRun.length;)si(t.postRun.shift());yi(mi)}function ni(ge){Ti.unshift(ge)}function si(ge){mi.unshift(ge)}var Oi=Math.abs,zi=Math.ceil,oi=Math.floor,$i=Math.min,ki=0,sn=null;function ar(ge){ki++,t.monitorRunDependencies&&t.monitorRunDependencies(ki)}function ti(ge){if(ki--,t.monitorRunDependencies&&t.monitorRunDependencies(ki),ki==0&&sn){var Ee=sn;sn=null,Ee()}}t.preloadedImages={},t.preloadedAudios={};var Wi=null,ir="data:application/octet-stream;base64,";function gn(ge){return String.prototype.startsWith?ge.startsWith(ir):ge.indexOf(ir)===0}var kn,an;Wi="data:application/octet-stream;base64,AAAAAAAAAAAAAAAAAQAAAAIAAAADAAAABAAAAAUAAAAGAAAAAQAAAAQAAAADAAAABgAAAAUAAAACAAAAAAAAAAIAAAADAAAAAQAAAAQAAAAGAAAAAAAAAAUAAAADAAAABgAAAAQAAAAFAAAAAAAAAAEAAAACAAAABAAAAAUAAAAGAAAAAAAAAAIAAAADAAAAAQAAAAUAAAACAAAAAAAAAAEAAAADAAAABgAAAAQAAAAGAAAAAAAAAAUAAAACAAAAAQAAAAQAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAIAAAADAAAAAAAAAAAAAAACAAAAAAAAAAEAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAYAAAAAAAAABQAAAAAAAAAAAAAABAAAAAUAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAYAAAAAAAAABgAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAgAAAAMAAAAEAAAABQAAAAYAAAABAAAAAgAAAAMAAAAEAAAABQAAAAYAAAAAAAAAAgAAAAMAAAAEAAAABQAAAAYAAAAAAAAAAQAAAAMAAAAEAAAABQAAAAYAAAAAAAAAAQAAAAIAAAAEAAAABQAAAAYAAAAAAAAAAQAAAAIAAAADAAAABQAAAAYAAAAAAAAAAQAAAAIAAAADAAAABAAAAAYAAAAAAAAAAQAAAAIAAAADAAAABAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAgAAAAIAAAAAAAAAAAAAAAYAAAAAAAAAAwAAAAIAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAFAAAABAAAAAAAAAABAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAYAAAAAAAAABAAAAAAAAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAgAAAAQAAAADAAAACAAAAAEAAAAHAAAABgAAAAkAAAAAAAAAAwAAAAIAAAACAAAABgAAAAoAAAALAAAAAAAAAAEAAAAFAAAAAwAAAA0AAAABAAAABwAAAAQAAAAMAAAAAAAAAAQAAAB/AAAADwAAAAgAAAADAAAAAAAAAAwAAAAFAAAAAgAAABIAAAAKAAAACAAAAAAAAAAQAAAABgAAAA4AAAALAAAAEQAAAAEAAAAJAAAAAgAAAAcAAAAVAAAACQAAABMAAAADAAAADQAAAAEAAAAIAAAABQAAABYAAAAQAAAABAAAAAAAAAAPAAAACQAAABMAAAAOAAAAFAAAAAEAAAAHAAAABgAAAAoAAAALAAAAGAAAABcAAAAFAAAAAgAAABIAAAALAAAAEQAAABcAAAAZAAAAAgAAAAYAAAAKAAAADAAAABwAAAANAAAAGgAAAAQAAAAPAAAAAwAAAA0AAAAaAAAAFQAAAB0AAAADAAAADAAAAAcAAAAOAAAAfwAAABEAAAAbAAAACQAAABQAAAAGAAAADwAAABYAAAAcAAAAHwAAAAQAAAAIAAAADAAAABAAAAASAAAAIQAAAB4AAAAIAAAABQAAABYAAAARAAAACwAAAA4AAAAGAAAAIwAAABkAAAAbAAAAEgAAABgAAAAeAAAAIAAAAAUAAAAKAAAAEAAAABMAAAAiAAAAFAAAACQAAAAHAAAAFQAAAAkAAAAUAAAADgAAABMAAAAJAAAAKAAAABsAAAAkAAAAFQAAACYAAAATAAAAIgAAAA0AAAAdAAAABwAAABYAAAAQAAAAKQAAACEAAAAPAAAACAAAAB8AAAAXAAAAGAAAAAsAAAAKAAAAJwAAACUAAAAZAAAAGAAAAH8AAAAgAAAAJQAAAAoAAAAXAAAAEgAAABkAAAAXAAAAEQAAAAsAAAAtAAAAJwAAACMAAAAaAAAAKgAAAB0AAAArAAAADAAAABwAAAANAAAAGwAAACgAAAAjAAAALgAAAA4AAAAUAAAAEQAAABwAAAAfAAAAKgAAACwAAAAMAAAADwAAABoAAAAdAAAAKwAAACYAAAAvAAAADQAAABoAAAAVAAAAHgAAACAAAAAwAAAAMgAAABAAAAASAAAAIQAAAB8AAAApAAAALAAAADUAAAAPAAAAFgAAABwAAAAgAAAAHgAAABgAAAASAAAANAAAADIAAAAlAAAAIQAAAB4AAAAxAAAAMAAAABYAAAAQAAAAKQAAACIAAAATAAAAJgAAABUAAAA2AAAAJAAAADMAAAAjAAAALgAAAC0AAAA4AAAAEQAAABsAAAAZAAAAJAAAABQAAAAiAAAAEwAAADcAAAAoAAAANgAAACUAAAAnAAAANAAAADkAAAAYAAAAFwAAACAAAAAmAAAAfwAAACIAAAAzAAAAHQAAAC8AAAAVAAAAJwAAACUAAAAZAAAAFwAAADsAAAA5AAAALQAAACgAAAAbAAAAJAAAABQAAAA8AAAALgAAADcAAAApAAAAMQAAADUAAAA9AAAAFgAAACEAAAAfAAAAKgAAADoAAAArAAAAPgAAABwAAAAsAAAAGgAAACsAAAA+AAAALwAAAEAAAAAaAAAAKgAAAB0AAAAsAAAANQAAADoAAABBAAAAHAAAAB8AAAAqAAAALQAAACcAAAAjAAAAGQAAAD8AAAA7AAAAOAAAAC4AAAA8AAAAOAAAAEQAAAAbAAAAKAAAACMAAAAvAAAAJgAAACsAAAAdAAAARQAAADMAAABAAAAAMAAAADEAAAAeAAAAIQAAAEMAAABCAAAAMgAAADEAAAB/AAAAPQAAAEIAAAAhAAAAMAAAACkAAAAyAAAAMAAAACAAAAAeAAAARgAAAEMAAAA0AAAAMwAAAEUAAAA2AAAARwAAACYAAAAvAAAAIgAAADQAAAA5AAAARgAAAEoAAAAgAAAAJQAAADIAAAA1AAAAPQAAAEEAAABLAAAAHwAAACkAAAAsAAAANgAAAEcAAAA3AAAASQAAACIAAAAzAAAAJAAAADcAAAAoAAAANgAAACQAAABIAAAAPAAAAEkAAAA4AAAARAAAAD8AAABNAAAAIwAAAC4AAAAtAAAAOQAAADsAAABKAAAATgAAACUAAAAnAAAANAAAADoAAAB/AAAAPgAAAEwAAAAsAAAAQQAAACoAAAA7AAAAPwAAAE4AAABPAAAAJwAAAC0AAAA5AAAAPAAAAEgAAABEAAAAUAAAACgAAAA3AAAALgAAAD0AAAA1AAAAMQAAACkAAABRAAAASwAAAEIAAAA+AAAAKwAAADoAAAAqAAAAUgAAAEAAAABMAAAAPwAAAH8AAAA4AAAALQAAAE8AAAA7AAAATQAAAEAAAAAvAAAAPgAAACsAAABUAAAARQAAAFIAAABBAAAAOgAAADUAAAAsAAAAVgAAAEwAAABLAAAAQgAAAEMAAABRAAAAVQAAADEAAAAwAAAAPQAAAEMAAABCAAAAMgAAADAAAABXAAAAVQAAAEYAAABEAAAAOAAAADwAAAAuAAAAWgAAAE0AAABQAAAARQAAADMAAABAAAAALwAAAFkAAABHAAAAVAAAAEYAAABDAAAANAAAADIAAABTAAAAVwAAAEoAAABHAAAAWQAAAEkAAABbAAAAMwAAAEUAAAA2AAAASAAAAH8AAABJAAAANwAAAFAAAAA8AAAAWAAAAEkAAABbAAAASAAAAFgAAAA2AAAARwAAADcAAABKAAAATgAAAFMAAABcAAAANAAAADkAAABGAAAASwAAAEEAAAA9AAAANQAAAF4AAABWAAAAUQAAAEwAAABWAAAAUgAAAGAAAAA6AAAAQQAAAD4AAABNAAAAPwAAAEQAAAA4AAAAXQAAAE8AAABaAAAATgAAAEoAAAA7AAAAOQAAAF8AAABcAAAATwAAAE8AAABOAAAAPwAAADsAAABdAAAAXwAAAE0AAABQAAAARAAAAEgAAAA8AAAAYwAAAFoAAABYAAAAUQAAAFUAAABeAAAAZQAAAD0AAABCAAAASwAAAFIAAABgAAAAVAAAAGIAAAA+AAAATAAAAEAAAABTAAAAfwAAAEoAAABGAAAAZAAAAFcAAABcAAAAVAAAAEUAAABSAAAAQAAAAGEAAABZAAAAYgAAAFUAAABXAAAAZQAAAGYAAABCAAAAQwAAAFEAAABWAAAATAAAAEsAAABBAAAAaAAAAGAAAABeAAAAVwAAAFMAAABmAAAAZAAAAEMAAABGAAAAVQAAAFgAAABIAAAAWwAAAEkAAABjAAAAUAAAAGkAAABZAAAAYQAAAFsAAABnAAAARQAAAFQAAABHAAAAWgAAAE0AAABQAAAARAAAAGoAAABdAAAAYwAAAFsAAABJAAAAWQAAAEcAAABpAAAAWAAAAGcAAABcAAAAUwAAAE4AAABKAAAAbAAAAGQAAABfAAAAXQAAAE8AAABaAAAATQAAAG0AAABfAAAAagAAAF4AAABWAAAAUQAAAEsAAABrAAAAaAAAAGUAAABfAAAAXAAAAE8AAABOAAAAbQAAAGwAAABdAAAAYAAAAGgAAABiAAAAbgAAAEwAAABWAAAAUgAAAGEAAAB/AAAAYgAAAFQAAABnAAAAWQAAAG8AAABiAAAAbgAAAGEAAABvAAAAUgAAAGAAAABUAAAAYwAAAFAAAABpAAAAWAAAAGoAAABaAAAAcQAAAGQAAABmAAAAUwAAAFcAAABsAAAAcgAAAFwAAABlAAAAZgAAAGsAAABwAAAAUQAAAFUAAABeAAAAZgAAAGUAAABXAAAAVQAAAHIAAABwAAAAZAAAAGcAAABbAAAAYQAAAFkAAAB0AAAAaQAAAG8AAABoAAAAawAAAG4AAABzAAAAVgAAAF4AAABgAAAAaQAAAFgAAABnAAAAWwAAAHEAAABjAAAAdAAAAGoAAABdAAAAYwAAAFoAAAB1AAAAbQAAAHEAAABrAAAAfwAAAGUAAABeAAAAcwAAAGgAAABwAAAAbAAAAGQAAABfAAAAXAAAAHYAAAByAAAAbQAAAG0AAABsAAAAXQAAAF8AAAB1AAAAdgAAAGoAAABuAAAAYgAAAGgAAABgAAAAdwAAAG8AAABzAAAAbwAAAGEAAABuAAAAYgAAAHQAAABnAAAAdwAAAHAAAABrAAAAZgAAAGUAAAB4AAAAcwAAAHIAAABxAAAAYwAAAHQAAABpAAAAdQAAAGoAAAB5AAAAcgAAAHAAAABkAAAAZgAAAHYAAAB4AAAAbAAAAHMAAABuAAAAawAAAGgAAAB4AAAAdwAAAHAAAAB0AAAAZwAAAHcAAABvAAAAcQAAAGkAAAB5AAAAdQAAAH8AAABtAAAAdgAAAHEAAAB5AAAAagAAAHYAAAB4AAAAbAAAAHIAAAB1AAAAeQAAAG0AAAB3AAAAbwAAAHMAAABuAAAAeQAAAHQAAAB4AAAAeAAAAHMAAAByAAAAcAAAAHkAAAB3AAAAdgAAAHkAAAB0AAAAeAAAAHcAAAB1AAAAcQAAAHYAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAABAAAABQAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAACAAAABQAAAAEAAAAAAAAA/////wEAAAAAAAAAAwAAAAQAAAACAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAFAAAAAQAAAAAAAAAAAAAAAQAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAADAAAAAAAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAADAAAABQAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAEAAAABQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAABAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAQAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAADAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAAAAAABAAAAAwAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAADAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAUAAAABAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAABAAAAAUAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAIAAAAFAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAD/////AQAAAAAAAAADAAAABAAAAAIAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAUAAAABAAAAAAAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAAAAAAEAAAD//////////wEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAADAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAACAAAAAAAAAAAAAAABAAAAAgAAAAYAAAAEAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAcAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAKAAAAAgAAAAAAAAAAAAAAAQAAAAEAAAAFAAAABgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACgAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAACAAAAAAAAAAAAAAABAAAAAwAAAAcAAAAGAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAABwAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAGAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAADgAAAAIAAAAAAAAAAAAAAAEAAAAAAAAACQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACgAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAMAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAIAAAAAAAAAAAAAAAEAAAAEAAAACAAAAAoAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAALAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAACQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAGAAAAAgAAAAAAAAAAAAAAAQAAAAsAAAAPAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAOAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAIAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAABQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAgAAAAAAAAAAAAAAAQAAAAwAAAAQAAAADAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAoAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAJAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAPAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAADwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAACAAAAAAAAAAAAAAABAAAACgAAABMAAAAIAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEQAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEQAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAA8AAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAQAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAACQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAIAAAAAAAAAAAAAAAEAAAANAAAAEQAAAA0AAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAARAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAEQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAA0AAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAACAAAAAAAAAAAAAAABAAAADgAAABIAAAAPAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAADwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABIAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAASAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABIAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAATAAAAAgAAAAAAAAAAAAAAAQAAAP//////////EwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEgAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAASAAAAAAAAABgAAAAAAAAAIQAAAAAAAAAeAAAAAAAAACAAAAADAAAAMQAAAAEAAAAwAAAAAwAAADIAAAADAAAACAAAAAAAAAAFAAAABQAAAAoAAAAFAAAAFgAAAAAAAAAQAAAAAAAAABIAAAAAAAAAKQAAAAEAAAAhAAAAAAAAAB4AAAAAAAAABAAAAAAAAAAAAAAABQAAAAIAAAAFAAAADwAAAAEAAAAIAAAAAAAAAAUAAAAFAAAAHwAAAAEAAAAWAAAAAAAAABAAAAAAAAAAAgAAAAAAAAAGAAAAAAAAAA4AAAAAAAAACgAAAAAAAAALAAAAAAAAABEAAAADAAAAGAAAAAEAAAAXAAAAAwAAABkAAAADAAAAAAAAAAAAAAABAAAABQAAAAkAAAAFAAAABQAAAAAAAAACAAAAAAAAAAYAAAAAAAAAEgAAAAEAAAAKAAAAAAAAAAsAAAAAAAAABAAAAAEAAAADAAAABQAAAAcAAAAFAAAACAAAAAEAAAAAAAAAAAAAAAEAAAAFAAAAEAAAAAEAAAAFAAAAAAAAAAIAAAAAAAAABwAAAAAAAAAVAAAAAAAAACYAAAAAAAAACQAAAAAAAAATAAAAAAAAACIAAAADAAAADgAAAAEAAAAUAAAAAwAAACQAAAADAAAAAwAAAAAAAAANAAAABQAAAB0AAAAFAAAAAQAAAAAAAAAHAAAAAAAAABUAAAAAAAAABgAAAAEAAAAJAAAAAAAAABMAAAAAAAAABAAAAAIAAAAMAAAABQAAABoAAAAFAAAAAAAAAAEAAAADAAAAAAAAAA0AAAAFAAAAAgAAAAEAAAABAAAAAAAAAAcAAAAAAAAAGgAAAAAAAAAqAAAAAAAAADoAAAAAAAAAHQAAAAAAAAArAAAAAAAAAD4AAAADAAAAJgAAAAEAAAAvAAAAAwAAAEAAAAADAAAADAAAAAAAAAAcAAAABQAAACwAAAAFAAAADQAAAAAAAAAaAAAAAAAAACoAAAAAAAAAFQAAAAEAAAAdAAAAAAAAACsAAAAAAAAABAAAAAMAAAAPAAAABQAAAB8AAAAFAAAAAwAAAAEAAAAMAAAAAAAAABwAAAAFAAAABwAAAAEAAAANAAAAAAAAABoAAAAAAAAAHwAAAAAAAAApAAAAAAAAADEAAAAAAAAALAAAAAAAAAA1AAAAAAAAAD0AAAADAAAAOgAAAAEAAABBAAAAAwAAAEsAAAADAAAADwAAAAAAAAAWAAAABQAAACEAAAAFAAAAHAAAAAAAAAAfAAAAAAAAACkAAAAAAAAAKgAAAAEAAAAsAAAAAAAAADUAAAAAAAAABAAAAAQAAAAIAAAABQAAABAAAAAFAAAADAAAAAEAAAAPAAAAAAAAABYAAAAFAAAAGgAAAAEAAAAcAAAAAAAAAB8AAAAAAAAAMgAAAAAAAAAwAAAAAAAAADEAAAADAAAAIAAAAAAAAAAeAAAAAwAAACEAAAADAAAAGAAAAAMAAAASAAAAAwAAABAAAAADAAAARgAAAAAAAABDAAAAAAAAAEIAAAADAAAANAAAAAMAAAAyAAAAAAAAADAAAAAAAAAAJQAAAAMAAAAgAAAAAAAAAB4AAAADAAAAUwAAAAAAAABXAAAAAwAAAFUAAAADAAAASgAAAAMAAABGAAAAAAAAAEMAAAAAAAAAOQAAAAEAAAA0AAAAAwAAADIAAAAAAAAAGQAAAAAAAAAXAAAAAAAAABgAAAADAAAAEQAAAAAAAAALAAAAAwAAAAoAAAADAAAADgAAAAMAAAAGAAAAAwAAAAIAAAADAAAALQAAAAAAAAAnAAAAAAAAACUAAAADAAAAIwAAAAMAAAAZAAAAAAAAABcAAAAAAAAAGwAAAAMAAAARAAAAAAAAAAsAAAADAAAAPwAAAAAAAAA7AAAAAwAAADkAAAADAAAAOAAAAAMAAAAtAAAAAAAAACcAAAAAAAAALgAAAAMAAAAjAAAAAwAAABkAAAAAAAAAJAAAAAAAAAAUAAAAAAAAAA4AAAADAAAAIgAAAAAAAAATAAAAAwAAAAkAAAADAAAAJgAAAAMAAAAVAAAAAwAAAAcAAAADAAAANwAAAAAAAAAoAAAAAAAAABsAAAADAAAANgAAAAMAAAAkAAAAAAAAABQAAAAAAAAAMwAAAAMAAAAiAAAAAAAAABMAAAADAAAASAAAAAAAAAA8AAAAAwAAAC4AAAADAAAASQAAAAMAAAA3AAAAAAAAACgAAAAAAAAARwAAAAMAAAA2AAAAAwAAACQAAAAAAAAAQAAAAAAAAAAvAAAAAAAAACYAAAADAAAAPgAAAAAAAAArAAAAAwAAAB0AAAADAAAAOgAAAAMAAAAqAAAAAwAAABoAAAADAAAAVAAAAAAAAABFAAAAAAAAADMAAAADAAAAUgAAAAMAAABAAAAAAAAAAC8AAAAAAAAATAAAAAMAAAA+AAAAAAAAACsAAAADAAAAYQAAAAAAAABZAAAAAwAAAEcAAAADAAAAYgAAAAMAAABUAAAAAAAAAEUAAAAAAAAAYAAAAAMAAABSAAAAAwAAAEAAAAAAAAAASwAAAAAAAABBAAAAAAAAADoAAAADAAAAPQAAAAAAAAA1AAAAAwAAACwAAAADAAAAMQAAAAMAAAApAAAAAwAAAB8AAAADAAAAXgAAAAAAAABWAAAAAAAAAEwAAAADAAAAUQAAAAMAAABLAAAAAAAAAEEAAAAAAAAAQgAAAAMAAAA9AAAAAAAAADUAAAADAAAAawAAAAAAAABoAAAAAwAAAGAAAAADAAAAZQAAAAMAAABeAAAAAAAAAFYAAAAAAAAAVQAAAAMAAABRAAAAAwAAAEsAAAAAAAAAOQAAAAAAAAA7AAAAAAAAAD8AAAADAAAASgAAAAAAAABOAAAAAwAAAE8AAAADAAAAUwAAAAMAAABcAAAAAwAAAF8AAAADAAAAJQAAAAAAAAAnAAAAAwAAAC0AAAADAAAANAAAAAAAAAA5AAAAAAAAADsAAAAAAAAARgAAAAMAAABKAAAAAAAAAE4AAAADAAAAGAAAAAAAAAAXAAAAAwAAABkAAAADAAAAIAAAAAMAAAAlAAAAAAAAACcAAAADAAAAMgAAAAMAAAA0AAAAAAAAADkAAAAAAAAALgAAAAAAAAA8AAAAAAAAAEgAAAADAAAAOAAAAAAAAABEAAAAAwAAAFAAAAADAAAAPwAAAAMAAABNAAAAAwAAAFoAAAADAAAAGwAAAAAAAAAoAAAAAwAAADcAAAADAAAAIwAAAAAAAAAuAAAAAAAAADwAAAAAAAAALQAAAAMAAAA4AAAAAAAAAEQAAAADAAAADgAAAAAAAAAUAAAAAwAAACQAAAADAAAAEQAAAAMAAAAbAAAAAAAAACgAAAADAAAAGQAAAAMAAAAjAAAAAAAAAC4AAAAAAAAARwAAAAAAAABZAAAAAAAAAGEAAAADAAAASQAAAAAAAABbAAAAAwAAAGcAAAADAAAASAAAAAMAAABYAAAAAwAAAGkAAAADAAAAMwAAAAAAAABFAAAAAwAAAFQAAAADAAAANgAAAAAAAABHAAAAAAAAAFkAAAAAAAAANwAAAAMAAABJAAAAAAAAAFsAAAADAAAAJgAAAAAAAAAvAAAAAwAAAEAAAAADAAAAIgAAAAMAAAAzAAAAAAAAAEUAAAADAAAAJAAAAAMAAAA2AAAAAAAAAEcAAAAAAAAAYAAAAAAAAABoAAAAAAAAAGsAAAADAAAAYgAAAAAAAABuAAAAAwAAAHMAAAADAAAAYQAAAAMAAABvAAAAAwAAAHcAAAADAAAATAAAAAAAAABWAAAAAwAAAF4AAAADAAAAUgAAAAAAAABgAAAAAAAAAGgAAAAAAAAAVAAAAAMAAABiAAAAAAAAAG4AAAADAAAAOgAAAAAAAABBAAAAAwAAAEsAAAADAAAAPgAAAAMAAABMAAAAAAAAAFYAAAADAAAAQAAAAAMAAABSAAAAAAAAAGAAAAAAAAAAVQAAAAAAAABXAAAAAAAAAFMAAAADAAAAZQAAAAAAAABmAAAAAwAAAGQAAAADAAAAawAAAAMAAABwAAAAAwAAAHIAAAADAAAAQgAAAAAAAABDAAAAAwAAAEYAAAADAAAAUQAAAAAAAABVAAAAAAAAAFcAAAAAAAAAXgAAAAMAAABlAAAAAAAAAGYAAAADAAAAMQAAAAAAAAAwAAAAAwAAADIAAAADAAAAPQAAAAMAAABCAAAAAAAAAEMAAAADAAAASwAAAAMAAABRAAAAAAAAAFUAAAAAAAAAXwAAAAAAAABcAAAAAAAAAFMAAAAAAAAATwAAAAAAAABOAAAAAAAAAEoAAAADAAAAPwAAAAEAAAA7AAAAAwAAADkAAAADAAAAbQAAAAAAAABsAAAAAAAAAGQAAAAFAAAAXQAAAAEAAABfAAAAAAAAAFwAAAAAAAAATQAAAAEAAABPAAAAAAAAAE4AAAAAAAAAdQAAAAQAAAB2AAAABQAAAHIAAAAFAAAAagAAAAEAAABtAAAAAAAAAGwAAAAAAAAAWgAAAAEAAABdAAAAAQAAAF8AAAAAAAAAWgAAAAAAAABNAAAAAAAAAD8AAAAAAAAAUAAAAAAAAABEAAAAAAAAADgAAAADAAAASAAAAAEAAAA8AAAAAwAAAC4AAAADAAAAagAAAAAAAABdAAAAAAAAAE8AAAAFAAAAYwAAAAEAAABaAAAAAAAAAE0AAAAAAAAAWAAAAAEAAABQAAAAAAAAAEQAAAAAAAAAdQAAAAMAAABtAAAABQAAAF8AAAAFAAAAcQAAAAEAAABqAAAAAAAAAF0AAAAAAAAAaQAAAAEAAABjAAAAAQAAAFoAAAAAAAAAaQAAAAAAAABYAAAAAAAAAEgAAAAAAAAAZwAAAAAAAABbAAAAAAAAAEkAAAADAAAAYQAAAAEAAABZAAAAAwAAAEcAAAADAAAAcQAAAAAAAABjAAAAAAAAAFAAAAAFAAAAdAAAAAEAAABpAAAAAAAAAFgAAAAAAAAAbwAAAAEAAABnAAAAAAAAAFsAAAAAAAAAdQAAAAIAAABqAAAABQAAAFoAAAAFAAAAeQAAAAEAAABxAAAAAAAAAGMAAAAAAAAAdwAAAAEAAAB0AAAAAQAAAGkAAAAAAAAAdwAAAAAAAABvAAAAAAAAAGEAAAAAAAAAcwAAAAAAAABuAAAAAAAAAGIAAAADAAAAawAAAAEAAABoAAAAAwAAAGAAAAADAAAAeQAAAAAAAAB0AAAAAAAAAGcAAAAFAAAAeAAAAAEAAAB3AAAAAAAAAG8AAAAAAAAAcAAAAAEAAABzAAAAAAAAAG4AAAAAAAAAdQAAAAEAAABxAAAABQAAAGkAAAAFAAAAdgAAAAEAAAB5AAAAAAAAAHQAAAAAAAAAcgAAAAEAAAB4AAAAAQAAAHcAAAAAAAAAcgAAAAAAAABwAAAAAAAAAGsAAAAAAAAAZAAAAAAAAABmAAAAAAAAAGUAAAADAAAAUwAAAAEAAABXAAAAAwAAAFUAAAADAAAAdgAAAAAAAAB4AAAAAAAAAHMAAAAFAAAAbAAAAAEAAAByAAAAAAAAAHAAAAAAAAAAXAAAAAEAAABkAAAAAAAAAGYAAAAAAAAAdQAAAAAAAAB5AAAABQAAAHcAAAAFAAAAbQAAAAEAAAB2AAAAAAAAAHgAAAAAAAAAXwAAAAEAAABsAAAAAQAAAHIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAGAAAAAgAAAAUAAAABAAAABAAAAAAAAAAAAAAABQAAAAMAAAABAAAABgAAAAQAAAACAAAAAAAAAH6iBfbytuk/Gq6akm/58z/Xrm0Liez0P5doSdOpSwRAWs602ULg8D/dT7Rcbo/1v1N1RQHFNOM/g9Snx7HW3L8HWsP8Q3jfP6VwOLosutk/9rjk1YQcxj+gnmKMsNn6P/HDeuPFY+M/YHwDjqKhB0Ci19/fCVrbP4UxKkDWOP6/pvljWa09tL9wi7wrQXjnv/Z6yLImkM2/3yTlOzY14D+m+WNZrT20PzwKVQnrQwNA9nrIsiaQzT/g40rFrRQFwPa45NWEHMa/kbslHEZq97/xw3rjxWPjv4cLC2SMBci/otff3wla27+rKF5oIAv0P1N1RQHFNOO/iDJPGyWHBUAHWsP8Q3jfvwQf/by16gXAfqIF9vK26b8XrO0Vh0r+v9eubQuJ7PS/BxLrA0ZZ479azrTZQuDwv1MK1EuItPw/yscgV9Z6FkAwHBR2WjQMQJNRzXsQ5vY/GlUHVJYKF0DONuFv2lMNQNCGZ28QJfk/0WUwoIL36D8ggDOMQuATQNqMOeAy/wZAWFYOYM+M2z/LWC4uH3oSQDE+LyTsMgRAkJzhRGWFGEDd4soovCQQQKqk0DJMEP8/rGmNdwOLBUAW2X/9xCbjP4hu3dcqJhNAzuYItRvdB0CgzW3zJW/sPxotm/Y2TxRAQAk9XmdDDEC1Kx9MKgT3P1M+NctcghZAFVqcLlb0C0Bgzd3sB2b2P77mZDPUWhZAFROHJpUGCEDAfma5CxXtPz1DWq/zYxRAmhYY5824F0DOuQKWSbAOQNCMqrvu3fs/L6DR22K2wT9nAAxPBU8RQGiN6mW43AFAZhu25b633D8c1YgmzowSQNM25BRKWARArGS08/lNxD+LFssHwmMRQLC5aNcxBgJABL9HT0WRF0CjCmJmOGEOQHsuaVzMP/s/TWJCaGGwBUCeu1PAPLzjP9nqN9DZOBNAKE4JcydbCkCGtbd1qjPzP8dgm9U8jhVAtPeKTkVwDkCeCLss5l37P401XMPLmBdAFd29VMVQDUBg0yA55h75Pz6odcYLCRdApBM4rBrkAkDyAVWgQxbRP4XDMnK20hFAymLlF7EmzD8GUgo9XBHlP3lbK7T9COc/k+OhPthhy7+YGEpnrOvCPzBFhLs15u4/epbqB6H4uz9IuuLF5svev6lzLKY31es/CaQ0envF5z8ZY0xlUADXv7zaz7HYEuI/CfbK1sn16T8uAQfWwxLWPzKn/YuFN94/5KdbC1AFu793fyCSnlfvPzK2y4doAMY/NRg5t1/X6b/shq4QJaHDP5yNIAKPOeI/vpn7BSE30r/X4YQrO6nrv78Ziv/Thto/DqJ1Y6+y5z9l51NaxFrlv8QlA65HOLS/86dxiEc96z+Hj0+LFjneP6LzBZ8LTc2/DaJ1Y6+y579l51NaxFrlP8QlA65HOLQ/8qdxiEc967+Jj0+LFjnev6LzBZ8LTc0/1qdbC1AFuz93fyCSnlfvvzK2y4doAMa/NRg5t1/X6T/vhq4QJaHDv5yNIAKPOeK/wJn7BSE30j/W4YQrO6nrP78Ziv/Thtq/CaQ0envF578XY0xlUADXP7zaz7HYEuK/CvbK1sn16b8rAQfWwxLWvzKn/YuFN96/zWLlF7EmzL8GUgo9XBHlv3lbK7T9COe/kOOhPthhyz+cGEpnrOvCvzBFhLs15u6/c5bqB6H4u79IuuLF5sveP6lzLKY31eu/AQAAAP////8HAAAA/////zEAAAD/////VwEAAP////9hCQAA/////6dBAAD/////kcsBAP/////3kAwA/////8H2VwAAAAAAAAAAAAAAAAACAAAA/////w4AAAD/////YgAAAP////+uAgAA/////8ISAAD/////ToMAAP////8ilwMA/////+4hGQD/////gu2vAAAAAAAAAAAAAAAAAAAAAAACAAAA//////////8BAAAAAwAAAP//////////////////////////////////////////////////////////////////////////AQAAAAAAAAACAAAA////////////////AwAAAP//////////////////////////////////////////////////////////////////////////AQAAAAAAAAACAAAA////////////////AwAAAP//////////////////////////////////////////////////////////////////////////AQAAAAAAAAACAAAA////////////////AwAAAP//////////////////////////////////////////////////////////AgAAAP//////////AQAAAAAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD/////////////////////AQAAAP///////////////wIAAAD///////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP///////////////////////////////wIAAAD///////////////8BAAAA/////////////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAABAAAA//////////8CAAAA//////////////////////////////////////////////////////////8DAAAA////////////////AgAAAAAAAAABAAAA//////////////////////////////////////////////////////////////////////////8DAAAA////////////////AgAAAAAAAAABAAAA//////////////////////////////////////////////////////////////////////////8DAAAA////////////////AgAAAAAAAAABAAAA//////////////////////////////////////////////////////////////////////////8DAAAAAQAAAP//////////AgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAACAAAAAAAAAAIAAAABAAAAAQAAAAIAAAACAAAAAAAAAAUAAAAFAAAAAAAAAAIAAAACAAAAAwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAgAAAAEAAAACAAAAAgAAAAIAAAAAAAAABQAAAAYAAAAAAAAAAgAAAAIAAAADAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAgAAAAAAAAACAAAAAQAAAAMAAAACAAAAAgAAAAAAAAAFAAAABwAAAAAAAAACAAAAAgAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAACAAAAAAAAAAIAAAABAAAABAAAAAIAAAACAAAAAAAAAAUAAAAIAAAAAAAAAAIAAAACAAAAAwAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAIAAAAAAAAAAgAAAAEAAAAAAAAAAgAAAAIAAAAAAAAABQAAAAkAAAAAAAAAAgAAAAIAAAADAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAgAAAAIAAAAAAAAAAwAAAA4AAAACAAAAAAAAAAIAAAADAAAAAAAAAAAAAAACAAAAAgAAAAMAAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAACAAAAAgAAAAAAAAADAAAACgAAAAIAAAAAAAAAAgAAAAMAAAABAAAAAAAAAAIAAAACAAAAAwAAAAcAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAIAAAACAAAAAAAAAAMAAAALAAAAAgAAAAAAAAACAAAAAwAAAAIAAAAAAAAAAgAAAAIAAAADAAAACAAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAgAAAAIAAAAAAAAAAwAAAAwAAAACAAAAAAAAAAIAAAADAAAAAwAAAAAAAAACAAAAAgAAAAMAAAAJAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAACAAAAAgAAAAAAAAADAAAADQAAAAIAAAAAAAAAAgAAAAMAAAAEAAAAAAAAAAIAAAACAAAAAwAAAAoAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAIAAAACAAAAAAAAAAMAAAAGAAAAAgAAAAAAAAACAAAAAwAAAA8AAAAAAAAAAgAAAAIAAAADAAAACwAAAAAAAAAAAAAAAAAAAAAAAAAGAAAAAgAAAAIAAAAAAAAAAwAAAAcAAAACAAAAAAAAAAIAAAADAAAAEAAAAAAAAAACAAAAAgAAAAMAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAACAAAAAgAAAAAAAAADAAAACAAAAAIAAAAAAAAAAgAAAAMAAAARAAAAAAAAAAIAAAACAAAAAwAAAA0AAAAAAAAAAAAAAAAAAAAAAAAACAAAAAIAAAACAAAAAAAAAAMAAAAJAAAAAgAAAAAAAAACAAAAAwAAABIAAAAAAAAAAgAAAAIAAAADAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAJAAAAAgAAAAIAAAAAAAAAAwAAAAUAAAACAAAAAAAAAAIAAAADAAAAEwAAAAAAAAACAAAAAgAAAAMAAAAPAAAAAAAAAAAAAAAAAAAAAAAAABAAAAACAAAAAAAAAAIAAAABAAAAEwAAAAIAAAACAAAAAAAAAAUAAAAKAAAAAAAAAAIAAAACAAAAAwAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEQAAAAIAAAAAAAAAAgAAAAEAAAAPAAAAAgAAAAIAAAAAAAAABQAAAAsAAAAAAAAAAgAAAAIAAAADAAAAEQAAAAAAAAAAAAAAAAAAAAAAAAASAAAAAgAAAAAAAAACAAAAAQAAABAAAAACAAAAAgAAAAAAAAAFAAAADAAAAAAAAAACAAAAAgAAAAMAAAASAAAAAAAAAAAAAAAAAAAAAAAAABMAAAACAAAAAAAAAAIAAAABAAAAEQAAAAIAAAACAAAAAAAAAAUAAAANAAAAAAAAAAIAAAACAAAAAwAAABMAAAAAAAAAAAAAAAAAAAAAAAAADwAAAAIAAAAAAAAAAgAAAAEAAAASAAAAAgAAAAIAAAAAAAAABQAAAA4AAAAAAAAAAgAAAAIAAAADAAAAAgAAAAEAAAAAAAAAAQAAAAIAAAAAAAAAAAAAAAIAAAABAAAAAAAAAAEAAAACAAAAAQAAAAAAAAACAAAAAAAAAAUAAAAEAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAFAAAABAAAAAAAAAABAAAABQAAAAQAAAAAAAAABQAAAAAAAAACAAAAAQAAAAAAAAABAAAAAgAAAAAAAAAAAAAAAgAAAAEAAAAAAAAAAQAAAAIAAAABAAAAAAAAAAIAAAACAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAAEAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAFAAAABAAAAAAAAAABAAAABQAAAAQAAAAAAAAABQAAAAUAAAAAAAAAAQAAAAAAAAAAAAAAOgehWlKfUEEz1zLi+JsiQa2og3wcMfVAWCbHorc0yEDi+Yn/Y6mbQJ11/mfsnG9At6bnG4UQQkBvMCQWKqUUQJVmwwswmOc/3hVgVBL3uj//qqOEOdGOPw/WDN4gnGE/H3ANkCUgND+AA8btKgAHPwTXBqJVSdo+XfRQAqsKrj4fc+zLYbSPQklEmCZHv2FCUP+uDso1NEKYtPhwphUHQptxnyFXYdpB7CddZAMmrkGAt1AxSTqBQUibBVdTsFNBSuX3MV+AJkFocv82SLf5QAqmgj7AY81A23VDSEnLoEDGEJVSeDFzQDYrqvBk70VA8U157pcRGUBWfEF+ZKbsP7KBdLHZTpFAqKYk69AqekDbeGY41MdjQD8AZzHK501A1vcrrjubNkD5LnquvBYhQCbiRRD71QlAqt72EbOH8z8Eu+jL1YbdP4uaox/xUcY/abedg1XfsD+BsUdzJ4KZP5wE9YFySIM/rW1kAKMpbT+rZFthVRhWPy4PKlXIs0A/qMZLlwDnMEHByqEF0I0ZQQYSFD8lUQNBPpY+dFs07UAH8BZImBPWQN9RY0I0sMBA2T7kLfc6qUByFYvfhBKTQMq+0Mis1XxA0XQbeQXMZUBJJ5aEGXpQQP7/SY0a6ThAaMD92b/UIkAs8s8yqXoMQNIegOvCk/U/aOi7NZJP4D8AAAAA/////wAAAAAAAAAAAAAAAAAAAAAAAAAA/////////////////////////////////////wAAAAD/////AAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAA/////wAAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAP////8AAAAABQAAAAAAAAAAAAAAAAAAAAAAAAD/////BQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAA/////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP////////////////////////////////////8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/////////////////////////////////////AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAABQAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/////////////////////////////////////wAAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAQAAAAAAAAABAAAAAAAAAAUAAAABAAAAAQAAAAAAAAAAAAAAAQAAAAEAAAAAAAAAAQAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAEAAQAAAQEAAAAAAAEAAAABAAAAAQABAAAAAAAAAAAAAAAAAAAAAAcAAAAHAAAAAQAAAAIAAAAEAAAAAwAAAAAAAAAAAAAABwAAAAMAAAABAAAAAgAAAAUAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAAAAAACAAAAAQAAAAMAAAAOAAAABgAAAAsAAAACAAAABwAAAAEAAAAYAAAABQAAAAoAAAABAAAABgAAAAAAAAAmAAAABwAAAAwAAAADAAAACAAAAAIAAAAxAAAACQAAAA4AAAAAAAAABQAAAAQAAAA6AAAACAAAAA0AAAAEAAAACQAAAAMAAAA/AAAACwAAAAYAAAAPAAAACgAAABAAAABIAAAADAAAAAcAAAAQAAAACwAAABEAAABTAAAACgAAAAUAAAATAAAADgAAAA8AAABhAAAADQAAAAgAAAARAAAADAAAABIAAABrAAAADgAAAAkAAAASAAAADQAAABMAAAB1AAAADwAAABMAAAARAAAAEgAAABAAAAAGAAAAAgAAAAMAAAAFAAAABAAAAAAAAAAAAAAAAAAAAAYAAAACAAAAAwAAAAEAAAAFAAAABAAAAAAAAAAAAAAABwAAAAUAAAADAAAABAAAAAEAAAAAAAAAAgAAAAAAAAACAAAAAwAAAAEAAAAFAAAABAAAAAYAAAAAAAAAAAAAAGFsZ29zLmMAaDNOZWlnaGJvclJvdGF0aW9ucwBjb29yZGlqay5jAF91cEFwN0NoZWNrZWQAX3VwQXA3ckNoZWNrZWQAZGlyZWN0ZWRFZGdlLmMAZGlyZWN0ZWRFZGdlVG9Cb3VuZGFyeQBhZGphY2VudEZhY2VEaXJbdG1wRmlqay5mYWNlXVtmaWprLmZhY2VdID09IEtJAGZhY2VpamsuYwBfZmFjZUlqa1BlbnRUb0NlbGxCb3VuZGFyeQBhZGphY2VudEZhY2VEaXJbY2VudGVySUpLLmZhY2VdW2ZhY2UyXSA9PSBLSQBfZmFjZUlqa1RvQ2VsbEJvdW5kYXJ5AGgzSW5kZXguYwBjb21wYWN0Q2VsbHMAbGF0TG5nVG9DZWxsAGNlbGxUb0NoaWxkUG9zAHZhbGlkYXRlQ2hpbGRQb3MAbGF0TG5nLmMAY2VsbEFyZWFSYWRzMgBwb2x5Z29uLT5uZXh0ID09IE5VTEwAbGlua2VkR2VvLmMAYWRkTmV3TGlua2VkUG9seWdvbgBuZXh0ICE9IE5VTEwAbG9vcCAhPSBOVUxMAGFkZE5ld0xpbmtlZExvb3AAcG9seWdvbi0+Zmlyc3QgPT0gTlVMTABhZGRMaW5rZWRMb29wAGNvb3JkICE9IE5VTEwAYWRkTGlua2VkQ29vcmQAbG9vcC0+Zmlyc3QgPT0gTlVMTABpbm5lckxvb3BzICE9IE5VTEwAbm9ybWFsaXplTXVsdGlQb2x5Z29uAGJib3hlcyAhPSBOVUxMAGNhbmRpZGF0ZXMgIT0gTlVMTABmaW5kUG9seWdvbkZvckhvbGUAY2FuZGlkYXRlQkJveGVzICE9IE5VTEwAcmV2RGlyICE9IElOVkFMSURfRElHSVQAbG9jYWxpai5jAGNlbGxUb0xvY2FsSWprAGJhc2VDZWxsICE9IG9yaWdpbkJhc2VDZWxsACEob3JpZ2luT25QZW50ICYmIGluZGV4T25QZW50KQBiYXNlQ2VsbCA9PSBvcmlnaW5CYXNlQ2VsbABiYXNlQ2VsbCAhPSBJTlZBTElEX0JBU0VfQ0VMTABsb2NhbElqa1RvQ2VsbAAhX2lzQmFzZUNlbGxQZW50YWdvbihiYXNlQ2VsbCkAYmFzZUNlbGxSb3RhdGlvbnMgPj0gMABncmlkUGF0aENlbGxzADAAdmVydGV4LmMAY2VsbFRvVmVydGV4AGdyYXBoLT5idWNrZXRzICE9IE5VTEwAdmVydGV4R3JhcGguYwBpbml0VmVydGV4R3JhcGgAbm9kZSAhPSBOVUxMAGFkZFZlcnRleE5vZGU=";var d=24144;function y(ge){return ge}function D(ge){var Ee=/\b__Z[\w\d_]+/g;return ge.replace(Ee,function(tt){var pt=tt;return tt===pt?tt:pt+" ["+tt+"]"})}function U(){var ge=new Error;if(!ge.stack){try{throw new Error(0)}catch(Ee){ge=Ee}if(!ge.stack)return"(no stack trace available)"}return ge.stack.toString()}function Q(){var ge=U();return t.extraStackTrace&&(ge+=`
`+t.extraStackTrace()),D(ge)}function K(ge,Ee,tt,pt){Xe("Assertion failed: "+xe(ge)+", at: "+[Ee?xe(Ee):"unknown filename",tt,pt?xe(pt):"unknown function"])}function ie(){return ut.length}function Ae(ge,Ee,tt){Ke.set(Ke.subarray(Ee,Ee+tt),ge)}function fe(ge){return t.___errno_location&&(Ze[t.___errno_location()>>2]=ge),ge}function ye(ge){Xe("OOM")}function Le(ge){try{var Ee=new ArrayBuffer(ge);return Ee.byteLength!=ge?void 0:(new Int8Array(Ee).set(ut),ue(Ee),dt(Ee),1)}catch{}}function we(ge){var Ee=ie(),tt=16777216,pt=2147483648-tt;if(ge>pt)return!1;for(var n=16777216,ce=Math.max(Ee,n);ce<ge;)ce<=536870912?ce=et(2*ce,tt):ce=Math.min(et((3*ce+2147483648)/4,tt),pt);var Zt=Le(ce);return!!Zt}var Te=typeof atob=="function"?atob:function(ge){var Ee="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",tt="",pt,n,ce,Zt,Jt,ui,Vt,qt=0;ge=ge.replace(/[^A-Za-z0-9\+\/\=]/g,"");do Zt=Ee.indexOf(ge.charAt(qt++)),Jt=Ee.indexOf(ge.charAt(qt++)),ui=Ee.indexOf(ge.charAt(qt++)),Vt=Ee.indexOf(ge.charAt(qt++)),pt=Zt<<2|Jt>>4,n=(Jt&15)<<4|ui>>2,ce=(ui&3)<<6|Vt,tt=tt+String.fromCharCode(pt),ui!==64&&(tt=tt+String.fromCharCode(n)),Vt!==64&&(tt=tt+String.fromCharCode(ce));while(qt<ge.length);return tt};function Ce(ge){try{for(var Ee=Te(ge),tt=new Uint8Array(Ee.length),pt=0;pt<Ee.length;++pt)tt[pt]=Ee.charCodeAt(pt);return tt}catch{throw new Error("Converting base64 string to bytes failed.")}}function je(ge){if(gn(ge))return Ce(ge.slice(ir.length))}var Ne={Math,Int8Array,Int32Array,Uint8Array,Float32Array,Float64Array},Ue={a:Xe,b:j,c:J,d:K,e:fe,f:ie,g:Ae,h:we,i:ye,j:y,k:D,l:Le,m:U,n:Q,o:d,p:ei},de=function(ge,Ee,tt){"almost asm";var pt=new ge.Int8Array(tt),n=new ge.Int32Array(tt);new ge.Uint8Array(tt),new ge.Float32Array(tt);var ce=new ge.Float64Array(tt),Zt=Ee.o|0,Jt=Ee.p|0,ui=ge.Math.floor,Vt=ge.Math.abs,qt=ge.Math.sqrt,Ei=ge.Math.pow,Ai=ge.Math.cos,pi=ge.Math.sin,Rt=ge.Math.tan,Yi=ge.Math.acos,Rn=ge.Math.asin,wn=ge.Math.atan,pn=ge.Math.atan2,vr=ge.Math.ceil,Mi=ge.Math.imul,nr=ge.Math.min,fn=ge.Math.max,Pt=ge.Math.clz32,Fi=Ee.b,xt=Ee.c,nn=Ee.d,Cr=Ee.e,ys=Ee.f,Gr=Ee.g,Et=Ee.h,Hn=Ee.i,ft=24160;function gr(A){return pt=new Int8Array(A),n=new Int32Array(A),ce=new Float64Array(A),tt=A,!0}function Xs(A){A=A|0;var l=0;return l=ft,ft=ft+A|0,ft=ft+15&-16,l|0}function Ks(){return ft|0}function po(A){A=A|0,ft=A}function va(A,l){A=A|0,ft=A}function $o(A,l){A=A|0,l=l|0;var f=0,m=0,b=0;return(A|0)<0?(l=2,l|0):(A|0)>13780509?(l=Qn(15,l)|0,l|0):(f=((A|0)<0)<<31>>31,b=Ie(A|0,f|0,3,0)|0,m=xt()|0,f=C(A|0,f|0,1,0)|0,f=Ie(b|0,m|0,f|0,xt()|0)|0,f=C(f|0,xt()|0,1,0)|0,A=xt()|0,n[l>>2]=f,n[l+4>>2]=A,l=0,l|0)}function go(A,l,f,m){return A=A|0,l=l|0,f=f|0,m=m|0,Is(A,l,f,m,0)|0}function Is(A,l,f,m,b){A=A|0,l=l|0,f=f|0,m=m|0,b=b|0;var T=0,z=0,N=0,X=0,te=0;if(X=ft,ft=ft+16|0,z=X,!(bn(A,l,f,m,b)|0))return m=0,ft=X,m|0;do if((f|0)>=0){if((f|0)>13780509){if(T=Qn(15,z)|0,T|0)break;N=z,z=n[N>>2]|0,N=n[N+4>>2]|0}else T=((f|0)<0)<<31>>31,te=Ie(f|0,T|0,3,0)|0,N=xt()|0,T=C(f|0,T|0,1,0)|0,T=Ie(te|0,N|0,T|0,xt()|0)|0,T=C(T|0,xt()|0,1,0)|0,N=xt()|0,n[z>>2]=T,n[z+4>>2]=N,z=T;if(M(m|0,0,z<<3|0)|0,b|0){M(b|0,0,z<<2|0)|0,T=bs(A,l,f,m,b,z,N,0)|0;break}T=S(z,4)|0,T?(te=bs(A,l,f,m,T,z,N,0)|0,_(T),T=te):T=13}else T=2;while(!1);return te=T,ft=X,te|0}function bn(A,l,f,m,b){A=A|0,l=l|0,f=f|0,m=m|0,b=b|0;var T=0,z=0,N=0,X=0,te=0,ve=0,De=0,He=0,nt=0,st=0,gt=0;if(gt=ft,ft=ft+16|0,nt=gt,st=gt+8|0,He=nt,n[He>>2]=A,n[He+4>>2]=l,(f|0)<0)return st=2,ft=gt,st|0;if(T=m,n[T>>2]=A,n[T+4>>2]=l,T=(b|0)!=0,T&&(n[b>>2]=0),Ar(A,l)|0)return st=9,ft=gt,st|0;n[st>>2]=0;e:do if((f|0)>=1)if(T)for(ve=1,te=0,De=0,He=1,T=A;;){if(!(te|De)){if(T=Or(T,l,4,st,nt)|0,T|0)break e;if(l=nt,T=n[l>>2]|0,l=n[l+4>>2]|0,Ar(T,l)|0){T=9;break e}}if(T=Or(T,l,n[22384+(De<<2)>>2]|0,st,nt)|0,T|0)break e;if(l=nt,T=n[l>>2]|0,l=n[l+4>>2]|0,A=m+(ve<<3)|0,n[A>>2]=T,n[A+4>>2]=l,n[b+(ve<<2)>>2]=He,A=te+1|0,z=(A|0)==(He|0),N=De+1|0,X=(N|0)==6,Ar(T,l)|0){T=9;break e}if(He=He+(X&z&1)|0,(He|0)>(f|0)){T=0;break}else ve=ve+1|0,te=z?0:A,De=z?X?0:N:De}else for(ve=1,te=0,De=0,He=1,T=A;;){if(!(te|De)){if(T=Or(T,l,4,st,nt)|0,T|0)break e;if(l=nt,T=n[l>>2]|0,l=n[l+4>>2]|0,Ar(T,l)|0){T=9;break e}}if(T=Or(T,l,n[22384+(De<<2)>>2]|0,st,nt)|0,T|0)break e;if(l=nt,T=n[l>>2]|0,l=n[l+4>>2]|0,A=m+(ve<<3)|0,n[A>>2]=T,n[A+4>>2]=l,A=te+1|0,z=(A|0)==(He|0),N=De+1|0,X=(N|0)==6,Ar(T,l)|0){T=9;break e}if(He=He+(X&z&1)|0,(He|0)>(f|0)){T=0;break}else ve=ve+1|0,te=z?0:A,De=z?X?0:N:De}else T=0;while(!1);return st=T,ft=gt,st|0}function bs(A,l,f,m,b,T,z,N){A=A|0,l=l|0,f=f|0,m=m|0,b=b|0,T=T|0,z=z|0,N=N|0;var X=0,te=0,ve=0,De=0,He=0,nt=0,st=0,gt=0,Ot=0,Ut=0;if(gt=ft,ft=ft+16|0,nt=gt+8|0,st=gt,X=ot(A|0,l|0,T|0,z|0)|0,ve=xt()|0,De=m+(X<<3)|0,Ot=De,Ut=n[Ot>>2]|0,Ot=n[Ot+4>>2]|0,te=(Ut|0)==(A|0)&(Ot|0)==(l|0),!((Ut|0)==0&(Ot|0)==0|te))do X=C(X|0,ve|0,1,0)|0,X=$e(X|0,xt()|0,T|0,z|0)|0,ve=xt()|0,De=m+(X<<3)|0,Ut=De,Ot=n[Ut>>2]|0,Ut=n[Ut+4>>2]|0,te=(Ot|0)==(A|0)&(Ut|0)==(l|0);while(!((Ot|0)==0&(Ut|0)==0|te));if(X=b+(X<<2)|0,te&&(n[X>>2]|0)<=(N|0)||(Ut=De,n[Ut>>2]=A,n[Ut+4>>2]=l,n[X>>2]=N,(N|0)>=(f|0)))return Ut=0,ft=gt,Ut|0;switch(te=N+1|0,n[nt>>2]=0,X=Or(A,l,2,nt,st)|0,X|0){case 9:{He=9;break}case 0:{X=st,X=bs(n[X>>2]|0,n[X+4>>2]|0,f,m,b,T,z,te)|0,X||(He=9);break}}e:do if((He|0)==9){switch(n[nt>>2]=0,X=Or(A,l,3,nt,st)|0,X|0){case 9:break;case 0:{if(X=st,X=bs(n[X>>2]|0,n[X+4>>2]|0,f,m,b,T,z,te)|0,X|0)break e;break}default:break e}switch(n[nt>>2]=0,X=Or(A,l,1,nt,st)|0,X|0){case 9:break;case 0:{if(X=st,X=bs(n[X>>2]|0,n[X+4>>2]|0,f,m,b,T,z,te)|0,X|0)break e;break}default:break e}switch(n[nt>>2]=0,X=Or(A,l,5,nt,st)|0,X|0){case 9:break;case 0:{if(X=st,X=bs(n[X>>2]|0,n[X+4>>2]|0,f,m,b,T,z,te)|0,X|0)break e;break}default:break e}switch(n[nt>>2]=0,X=Or(A,l,4,nt,st)|0,X|0){case 9:break;case 0:{if(X=st,X=bs(n[X>>2]|0,n[X+4>>2]|0,f,m,b,T,z,te)|0,X|0)break e;break}default:break e}switch(n[nt>>2]=0,X=Or(A,l,6,nt,st)|0,X|0){case 9:break;case 0:{if(X=st,X=bs(n[X>>2]|0,n[X+4>>2]|0,f,m,b,T,z,te)|0,X|0)break e;break}default:break e}return Ut=0,ft=gt,Ut|0}while(!1);return Ut=X,ft=gt,Ut|0}function Or(A,l,f,m,b){A=A|0,l=l|0,f=f|0,m=m|0,b=b|0;var T=0,z=0,N=0,X=0,te=0,ve=0,De=0,He=0,nt=0,st=0;if(f>>>0>6)return b=1,b|0;if(De=(n[m>>2]|0)%6|0,n[m>>2]=De,(De|0)>0){T=0;do f=La(f)|0,T=T+1|0;while((T|0)<(n[m>>2]|0))}if(De=wt(A|0,l|0,45)|0,xt()|0,ve=De&127,ve>>>0>121)return b=5,b|0;X=Qs(A,l)|0,T=wt(A|0,l|0,52)|0,xt()|0,T=T&15;e:do if(!T)te=8;else{for(;;){if(z=(15-T|0)*3|0,N=wt(A|0,l|0,z|0)|0,xt()|0,N=N&7,(N|0)==7){l=5;break}if(st=(ms(T)|0)==0,T=T+-1|0,He=It(7,0,z|0)|0,l=l&~(xt()|0),nt=It(n[(st?432:16)+(N*28|0)+(f<<2)>>2]|0,0,z|0)|0,z=xt()|0,f=n[(st?640:224)+(N*28|0)+(f<<2)>>2]|0,A=nt|A&~He,l=z|l,!f){f=0;break e}if(!T){te=8;break e}}return l|0}while(!1);(te|0)==8&&(st=n[848+(ve*28|0)+(f<<2)>>2]|0,nt=It(st|0,0,45)|0,A=nt|A,l=xt()|0|l&-1040385,f=n[4272+(ve*28|0)+(f<<2)>>2]|0,(st&127|0)==127&&(st=It(n[848+(ve*28|0)+20>>2]|0,0,45)|0,l=xt()|0|l&-1040385,f=n[4272+(ve*28|0)+20>>2]|0,A=ro(st|A,l)|0,l=xt()|0,n[m>>2]=(n[m>>2]|0)+1)),N=wt(A|0,l|0,45)|0,xt()|0,N=N&127;e:do if(Re(N)|0){t:do if((Qs(A,l)|0)==1){if((ve|0)!=(N|0))if(Xi(N,n[7696+(ve*28|0)>>2]|0)|0){A=wa(A,l)|0,z=1,l=xt()|0;break}else nn(23313,22416,436,22424);switch(X|0){case 3:{A=ro(A,l)|0,l=xt()|0,n[m>>2]=(n[m>>2]|0)+1,z=0;break t}case 5:{A=wa(A,l)|0,l=xt()|0,n[m>>2]=(n[m>>2]|0)+5,z=0;break t}case 0:return st=9,st|0;default:return st=1,st|0}}else z=0;while(!1);if((f|0)>0){T=0;do A=kA(A,l)|0,l=xt()|0,T=T+1|0;while((T|0)!=(f|0))}if((ve|0)!=(N|0)){if(!(at(N)|0)){if((z|0)!=0|(Qs(A,l)|0)!=5)break;n[m>>2]=(n[m>>2]|0)+1;break}switch(De&127){case 8:case 118:break e}(Qs(A,l)|0)!=3&&(n[m>>2]=(n[m>>2]|0)+1)}}else if((f|0)>0){T=0;do A=ro(A,l)|0,l=xt()|0,T=T+1|0;while((T|0)!=(f|0))}while(!1);return n[m>>2]=((n[m>>2]|0)+f|0)%6|0,st=b,n[st>>2]=A,n[st+4>>2]=l,st=0,st|0}function ya(A,l,f,m){A=A|0,l=l|0,f=f|0,m=m|0;var b=0,T=0,z=0,N=0,X=0,te=0;for(N=ft,ft=ft+16|0,T=N,z=N+8|0,b=(Ar(A,l)|0)==0,b=b?1:2;;){if(n[z>>2]=0,te=(Or(A,l,b,z,T)|0)==0,X=T,te&((n[X>>2]|0)==(f|0)?(n[X+4>>2]|0)==(m|0):0)){A=4;break}if(b=b+1|0,b>>>0>=7){b=7,A=4;break}}return(A|0)==4?(ft=N,b|0):0}function $a(A,l,f,m){A=A|0,l=l|0,f=f|0,m=m|0;var b=0,T=0,z=0,N=0,X=0,te=0,ve=0,De=0,He=0,nt=0,st=0;if(st=ft,ft=ft+16|0,He=st,nt=st+8|0,De=He,n[De>>2]=A,n[De+4>>2]=l,!f)return nt=m,n[nt>>2]=A,n[nt+4>>2]=l,nt=0,ft=st,nt|0;n[nt>>2]=0;e:do if(Ar(A,l)|0)A=9;else{if(T=(f|0)>0,T){b=0,De=A;do{if(A=Or(De,l,4,nt,He)|0,A|0)break e;if(l=He,De=n[l>>2]|0,l=n[l+4>>2]|0,b=b+1|0,Ar(De,l)|0){A=9;break e}}while((b|0)<(f|0));if(ve=m,n[ve>>2]=De,n[ve+4>>2]=l,ve=f+-1|0,T){te=0,A=1;do{if(b=22384+(te<<2)|0,(te|0)==5)for(z=n[b>>2]|0,T=0,b=A;;){if(A=He,A=Or(n[A>>2]|0,n[A+4>>2]|0,z,nt,He)|0,A|0)break e;if((T|0)!=(ve|0))if(X=He,N=n[X>>2]|0,X=n[X+4>>2]|0,A=m+(b<<3)|0,n[A>>2]=N,n[A+4>>2]=X,!(Ar(N,X)|0))A=b+1|0;else{A=9;break e}else A=b;if(T=T+1|0,(T|0)>=(f|0))break;b=A}else for(z=He,X=n[b>>2]|0,N=0,b=A,T=n[z>>2]|0,z=n[z+4>>2]|0;;){if(A=Or(T,z,X,nt,He)|0,A|0)break e;if(z=He,T=n[z>>2]|0,z=n[z+4>>2]|0,A=m+(b<<3)|0,n[A>>2]=T,n[A+4>>2]=z,A=b+1|0,Ar(T,z)|0){A=9;break e}if(N=N+1|0,(N|0)>=(f|0))break;b=A}te=te+1|0}while(te>>>0<6);A=He,z=De,b=n[A>>2]|0,T=l,A=n[A+4>>2]|0}else z=De,b=De,T=l,A=l}else z=m,n[z>>2]=A,n[z+4>>2]=l,z=A,b=A,T=l,A=l;A=(z|0)==(b|0)&(T|0)==(A|0)?0:9}while(!1);return nt=A,ft=st,nt|0}function mo(A,l,f,m){A=A|0,l=l|0,f=f|0,m=m|0;var b=0,T=0,z=0,N=0,X=0,te=0;if(N=ft,ft=ft+48|0,b=N+16|0,T=N+8|0,z=N,f|0)return z=15,ft=N,z|0;if(te=A,X=n[te+4>>2]|0,f=T,n[f>>2]=n[te>>2],n[f+4>>2]=X,tu(T,b),l=_o(b,l,z)|0,!l){if(f=n[T>>2]|0,T=n[A+8>>2]|0,(T|0)>0){b=n[A+12>>2]|0,l=0;do f=(n[b+(l<<3)>>2]|0)+f|0,l=l+1|0;while((l|0)<(T|0))}l=z,b=n[l>>2]|0,l=n[l+4>>2]|0,T=((f|0)<0)<<31>>31,(l|0)<(T|0)|(l|0)==(T|0)&b>>>0<f>>>0?(l=z,n[l>>2]=f,n[l+4>>2]=T,l=T):f=b,X=C(f|0,l|0,12,0)|0,te=xt()|0,l=z,n[l>>2]=X,n[l+4>>2]=te,l=m,n[l>>2]=X,n[l+4>>2]=te,l=0}return te=l,ft=N,te|0}function ra(A,l,f,m,b,T,z){A=A|0,l=l|0,f=f|0,m=m|0,b=b|0,T=T|0,z=z|0;var N=0,X=0,te=0,ve=0,De=0,He=0,nt=0,st=0,gt=0,Ot=0,Ut=0,Mt=0,zt=0,Ft=0,Bi=0,hi=0,xi=0,bi=0,Dn=0,dn=0,tn=0,on=0,mn=0,cn=0,$n=0,Tn=0,Wn=0,$r=0,qr=0;if($n=ft,ft=ft+64|0,tn=$n+48|0,on=$n+32|0,mn=$n+24|0,Bi=$n+8|0,hi=$n,X=n[A>>2]|0,(X|0)<=0)return cn=0,ft=$n,cn|0;for(xi=A+4|0,bi=tn+8|0,Dn=on+8|0,dn=Bi+8|0,N=0,zt=0;;){te=n[xi>>2]|0,Mt=te+(zt<<4)|0,n[tn>>2]=n[Mt>>2],n[tn+4>>2]=n[Mt+4>>2],n[tn+8>>2]=n[Mt+8>>2],n[tn+12>>2]=n[Mt+12>>2],(zt|0)==(X+-1|0)?(n[on>>2]=n[te>>2],n[on+4>>2]=n[te+4>>2],n[on+8>>2]=n[te+8>>2],n[on+12>>2]=n[te+12>>2]):(Mt=te+(zt+1<<4)|0,n[on>>2]=n[Mt>>2],n[on+4>>2]=n[Mt+4>>2],n[on+8>>2]=n[Mt+8>>2],n[on+12>>2]=n[Mt+12>>2]),X=or(tn,on,m,mn)|0;e:do if(X)te=0,N=X;else if(te=mn,X=n[te>>2]|0,te=n[te+4>>2]|0,(te|0)>0|(te|0)==0&X>>>0>0){Ut=0,Mt=0;t:for(;;){if(qr=+ce[tn>>3],Ot=E(X|0,te|0,Ut|0,Mt|0)|0,$r=+(Ot>>>0)+4294967296*+(xt()|0),Tn=+(X>>>0)+4294967296*+(te|0),Wn=+(Ut>>>0)+4294967296*+(Mt|0),ce[Bi>>3]=qr*$r/Tn+ +ce[on>>3]*Wn/Tn,ce[dn>>3]=+ce[bi>>3]*$r/Tn+ +ce[Dn>>3]*Wn/Tn,X=ha(Bi,m,hi)|0,X|0){N=X;break}Ot=hi,gt=n[Ot>>2]|0,Ot=n[Ot+4>>2]|0,He=ot(gt|0,Ot|0,l|0,f|0)|0,ve=xt()|0,X=z+(He<<3)|0,De=X,te=n[De>>2]|0,De=n[De+4>>2]|0;i:do if((te|0)==0&(De|0)==0)Ft=X,cn=16;else for(nt=0,st=0;;){if((nt|0)>(f|0)|(nt|0)==(f|0)&st>>>0>l>>>0){N=1;break t}if((te|0)==(gt|0)&(De|0)==(Ot|0))break i;if(X=C(He|0,ve|0,1,0)|0,He=$e(X|0,xt()|0,l|0,f|0)|0,ve=xt()|0,st=C(st|0,nt|0,1,0)|0,nt=xt()|0,X=z+(He<<3)|0,De=X,te=n[De>>2]|0,De=n[De+4>>2]|0,(te|0)==0&(De|0)==0){Ft=X,cn=16;break}}while(!1);if((cn|0)==16&&(cn=0,!((gt|0)==0&(Ot|0)==0))&&(st=Ft,n[st>>2]=gt,n[st+4>>2]=Ot,st=T+(n[b>>2]<<3)|0,n[st>>2]=gt,n[st+4>>2]=Ot,st=b,st=C(n[st>>2]|0,n[st+4>>2]|0,1,0)|0,gt=xt()|0,Ot=b,n[Ot>>2]=st,n[Ot+4>>2]=gt),Ut=C(Ut|0,Mt|0,1,0)|0,Mt=xt()|0,te=mn,X=n[te>>2]|0,te=n[te+4>>2]|0,!((te|0)>(Mt|0)|(te|0)==(Mt|0)&X>>>0>Ut>>>0)){te=1;break e}}te=0}else te=1;while(!1);if(zt=zt+1|0,!te){cn=21;break}if(X=n[A>>2]|0,(zt|0)>=(X|0)){N=0,cn=21;break}}return(cn|0)==21?(ft=$n,N|0):0}function sa(A,l,f,m){A=A|0,l=l|0,f=f|0,m=m|0;var b=0,T=0,z=0,N=0,X=0,te=0,ve=0,De=0,He=0,nt=0,st=0,gt=0,Ot=0,Ut=0,Mt=0,zt=0,Ft=0,Bi=0,hi=0,xi=0,bi=0,Dn=0,dn=0,tn=0,on=0,mn=0,cn=0,$n=0,Tn=0,Wn=0,$r=0;if($r=ft,ft=ft+112|0,cn=$r+80|0,X=$r+72|0,$n=$r,Tn=$r+56|0,f|0)return Wn=15,ft=$r,Wn|0;if(te=A+8|0,Wn=rs((n[te>>2]<<5)+32|0)|0,!Wn)return Wn=13,ft=$r,Wn|0;if(GA(A,Wn),on=A,mn=n[on+4>>2]|0,f=X,n[f>>2]=n[on>>2],n[f+4>>2]=mn,tu(X,cn),f=_o(cn,l,$n)|0,f)on=0,mn=0;else{if(f=n[X>>2]|0,T=n[te>>2]|0,(T|0)>0){z=n[A+12>>2]|0,b=0;do f=(n[z+(b<<3)>>2]|0)+f|0,b=b+1|0;while((b|0)!=(T|0));b=f}else b=f;f=$n,T=n[f>>2]|0,f=n[f+4>>2]|0,z=((b|0)<0)<<31>>31,(f|0)<(z|0)|(f|0)==(z|0)&T>>>0<b>>>0?(f=$n,n[f>>2]=b,n[f+4>>2]=z,f=z):b=T,on=C(b|0,f|0,12,0)|0,mn=xt()|0,f=$n,n[f>>2]=on,n[f+4>>2]=mn,f=0}if(f|0)return _(Wn),Wn=f,ft=$r,Wn|0;if(b=S(on,8)|0,!b)return _(Wn),Wn=13,ft=$r,Wn|0;if(N=S(on,8)|0,!N)return _(Wn),_(b),Wn=13,ft=$r,Wn|0;dn=cn,n[dn>>2]=0,n[dn+4>>2]=0,dn=A,tn=n[dn+4>>2]|0,f=X,n[f>>2]=n[dn>>2],n[f+4>>2]=tn,f=ra(X,on,mn,l,cn,b,N)|0;e:do if(f)_(b),_(N),_(Wn);else{t:do if((n[te>>2]|0)>0){for(z=A+12|0,T=0;f=ra((n[z>>2]|0)+(T<<3)|0,on,mn,l,cn,b,N)|0,T=T+1|0,!(f|0);)if((T|0)>=(n[te>>2]|0))break t;_(b),_(N),_(Wn);break e}while(!1);(mn|0)>0|(mn|0)==0&on>>>0>0&&M(N|0,0,on<<3|0)|0,tn=cn,dn=n[tn+4>>2]|0;t:do if((dn|0)>0|(dn|0)==0&(n[tn>>2]|0)>>>0>0){xi=b,bi=N,Dn=b,dn=N,tn=b,f=b,Ft=b,Bi=N,hi=N,b=N;i:for(;;){for(Ot=0,Ut=0,Mt=0,zt=0,T=0,z=0;;){N=$n,X=N+56|0;do n[N>>2]=0,N=N+4|0;while((N|0)<(X|0));if(l=xi+(Ot<<3)|0,te=n[l>>2]|0,l=n[l+4>>2]|0,bn(te,l,1,$n,0)|0){N=$n,X=N+56|0;do n[N>>2]=0,N=N+4|0;while((N|0)<(X|0));N=S(7,4)|0,N|0&&(bs(te,l,1,$n,N,7,0,0)|0,_(N))}for(gt=0;;){st=$n+(gt<<3)|0,nt=n[st>>2]|0,st=n[st+4>>2]|0;n:do if((nt|0)==0&(st|0)==0)N=T,X=z;else{if(ve=ot(nt|0,st|0,on|0,mn|0)|0,te=xt()|0,N=m+(ve<<3)|0,l=N,X=n[l>>2]|0,l=n[l+4>>2]|0,!((X|0)==0&(l|0)==0)){De=0,He=0;do{if((De|0)>(mn|0)|(De|0)==(mn|0)&He>>>0>on>>>0)break i;if((X|0)==(nt|0)&(l|0)==(st|0)){N=T,X=z;break n}N=C(ve|0,te|0,1,0)|0,ve=$e(N|0,xt()|0,on|0,mn|0)|0,te=xt()|0,He=C(He|0,De|0,1,0)|0,De=xt()|0,N=m+(ve<<3)|0,l=N,X=n[l>>2]|0,l=n[l+4>>2]|0}while(!((X|0)==0&(l|0)==0))}(nt|0)==0&(st|0)==0?(N=T,X=z):(is(nt,st,Tn)|0,mA(A,Wn,Tn)|0&&(He=C(T|0,z|0,1,0)|0,z=xt()|0,De=N,n[De>>2]=nt,n[De+4>>2]=st,T=bi+(T<<3)|0,n[T>>2]=nt,n[T+4>>2]=st,T=He),N=T,X=z)}while(!1);if(gt=gt+1|0,gt>>>0>=7)break;T=N,z=X}if(Ot=C(Ot|0,Ut|0,1,0)|0,Ut=xt()|0,Mt=C(Mt|0,zt|0,1,0)|0,zt=xt()|0,z=cn,T=n[z>>2]|0,z=n[z+4>>2]|0,(zt|0)<(z|0)|(zt|0)==(z|0)&Mt>>>0<T>>>0)T=N,z=X;else break}if((z|0)>0|(z|0)==0&T>>>0>0){T=0,z=0;do zt=xi+(T<<3)|0,n[zt>>2]=0,n[zt+4>>2]=0,T=C(T|0,z|0,1,0)|0,z=xt()|0,zt=cn,Mt=n[zt+4>>2]|0;while((z|0)<(Mt|0)|((z|0)==(Mt|0)?T>>>0<(n[zt>>2]|0)>>>0:0))}if(zt=cn,n[zt>>2]=N,n[zt+4>>2]=X,(X|0)>0|(X|0)==0&N>>>0>0)gt=b,Ot=hi,Ut=tn,Mt=Bi,zt=bi,b=Ft,hi=f,Bi=Dn,Ft=gt,f=Ot,tn=dn,dn=Ut,Dn=Mt,bi=xi,xi=zt;else break t}_(Dn),_(dn),_(Wn),f=1;break e}else f=N;while(!1);_(Wn),_(b),_(f),f=0}while(!1);return Wn=f,ft=$r,Wn|0}function P(A,l,f){A=A|0,l=l|0,f=f|0;var m=0,b=0,T=0,z=0,N=0,X=0,te=0,ve=0;if(ve=ft,ft=ft+176|0,X=ve,(l|0)<1)return Fl(f,0,0),te=0,ft=ve,te|0;for(N=A,N=wt(n[N>>2]|0,n[N+4>>2]|0,52)|0,xt()|0,Fl(f,(l|0)>6?l:6,N&15),N=0;m=A+(N<<3)|0,m=zr(n[m>>2]|0,n[m+4>>2]|0,X)|0,!(m|0);){if(m=n[X>>2]|0,(m|0)>0){z=0;do T=X+8+(z<<4)|0,z=z+1|0,m=X+8+(((z|0)%(m|0)|0)<<4)|0,b=Ho(f,m,T)|0,b?ci(f,b)|0:Ii(f,T,m)|0,m=n[X>>2]|0;while((z|0)<(m|0))}if(N=N+1|0,(N|0)>=(l|0)){m=0,te=13;break}}return(te|0)==13?(ft=ve,m|0):(Vs(f),te=m,ft=ve,te|0)}function re(A,l,f){A=A|0,l=l|0,f=f|0;var m=0,b=0,T=0,z=0;if(T=ft,ft=ft+32|0,m=T,b=T+16|0,A=P(A,l,b)|0,A|0)return f=A,ft=T,f|0;if(n[f>>2]=0,n[f+4>>2]=0,n[f+8>>2]=0,A=Ca(b)|0,A|0)do{l=Hu(f)|0;do Ol(l,A)|0,z=A+16|0,n[m>>2]=n[z>>2],n[m+4>>2]=n[z+4>>2],n[m+8>>2]=n[z+8>>2],n[m+12>>2]=n[z+12>>2],ci(b,A)|0,A=pl(b,m)|0;while(A|0);A=Ca(b)|0}while(A|0);return Vs(b),A=rA(f)|0,A?(ao(f),z=A,ft=T,z|0):(z=0,ft=T,z|0)}function Re(A){return A=A|0,A>>>0>121?(A=0,A|0):(A=n[7696+(A*28|0)+16>>2]|0,A|0)}function at(A){return A=A|0,(A|0)==4|(A|0)==117|0}function kt(A){return A=A|0,n[11120+((n[A>>2]|0)*216|0)+((n[A+4>>2]|0)*72|0)+((n[A+8>>2]|0)*24|0)+(n[A+12>>2]<<3)>>2]|0}function ri(A){return A=A|0,n[11120+((n[A>>2]|0)*216|0)+((n[A+4>>2]|0)*72|0)+((n[A+8>>2]|0)*24|0)+(n[A+12>>2]<<3)+4>>2]|0}function _i(A,l){A=A|0,l=l|0,A=7696+(A*28|0)|0,n[l>>2]=n[A>>2],n[l+4>>2]=n[A+4>>2],n[l+8>>2]=n[A+8>>2],n[l+12>>2]=n[A+12>>2]}function Qi(A,l){A=A|0,l=l|0;var f=0,m=0;if(l>>>0>20)return l=-1,l|0;do if((n[11120+(l*216|0)>>2]|0)!=(A|0))if((n[11120+(l*216|0)+8>>2]|0)!=(A|0))if((n[11120+(l*216|0)+16>>2]|0)!=(A|0))if((n[11120+(l*216|0)+24>>2]|0)!=(A|0))if((n[11120+(l*216|0)+32>>2]|0)!=(A|0))if((n[11120+(l*216|0)+40>>2]|0)!=(A|0))if((n[11120+(l*216|0)+48>>2]|0)!=(A|0))if((n[11120+(l*216|0)+56>>2]|0)!=(A|0))if((n[11120+(l*216|0)+64>>2]|0)!=(A|0))if((n[11120+(l*216|0)+72>>2]|0)!=(A|0))if((n[11120+(l*216|0)+80>>2]|0)!=(A|0))if((n[11120+(l*216|0)+88>>2]|0)!=(A|0))if((n[11120+(l*216|0)+96>>2]|0)!=(A|0))if((n[11120+(l*216|0)+104>>2]|0)!=(A|0))if((n[11120+(l*216|0)+112>>2]|0)!=(A|0))if((n[11120+(l*216|0)+120>>2]|0)!=(A|0))if((n[11120+(l*216|0)+128>>2]|0)!=(A|0))if((n[11120+(l*216|0)+136>>2]|0)==(A|0))A=2,f=1,m=2;else{if((n[11120+(l*216|0)+144>>2]|0)==(A|0)){A=0,f=2,m=0;break}if((n[11120+(l*216|0)+152>>2]|0)==(A|0)){A=0,f=2,m=1;break}if((n[11120+(l*216|0)+160>>2]|0)==(A|0)){A=0,f=2,m=2;break}if((n[11120+(l*216|0)+168>>2]|0)==(A|0)){A=1,f=2,m=0;break}if((n[11120+(l*216|0)+176>>2]|0)==(A|0)){A=1,f=2,m=1;break}if((n[11120+(l*216|0)+184>>2]|0)==(A|0)){A=1,f=2,m=2;break}if((n[11120+(l*216|0)+192>>2]|0)==(A|0)){A=2,f=2,m=0;break}if((n[11120+(l*216|0)+200>>2]|0)==(A|0)){A=2,f=2,m=1;break}if((n[11120+(l*216|0)+208>>2]|0)==(A|0)){A=2,f=2,m=2;break}else A=-1;return A|0}else A=2,f=1,m=1;else A=2,f=1,m=0;else A=1,f=1,m=2;else A=1,f=1,m=1;else A=1,f=1,m=0;else A=0,f=1,m=2;else A=0,f=1,m=1;else A=0,f=1,m=0;else A=2,f=0,m=2;else A=2,f=0,m=1;else A=2,f=0,m=0;else A=1,f=0,m=2;else A=1,f=0,m=1;else A=1,f=0,m=0;else A=0,f=0,m=2;else A=0,f=0,m=1;else A=0,f=0,m=0;while(!1);return l=n[11120+(l*216|0)+(f*72|0)+(A*24|0)+(m<<3)+4>>2]|0,l|0}function Xi(A,l){return A=A|0,l=l|0,(n[7696+(A*28|0)+20>>2]|0)==(l|0)?(l=1,l|0):(l=(n[7696+(A*28|0)+24>>2]|0)==(l|0),l|0)}function Nn(A,l){return A=A|0,l=l|0,n[848+(A*28|0)+(l<<2)>>2]|0}function qn(A,l){return A=A|0,l=l|0,(n[848+(A*28|0)>>2]|0)==(l|0)?(l=0,l|0):(n[848+(A*28|0)+4>>2]|0)==(l|0)?(l=1,l|0):(n[848+(A*28|0)+8>>2]|0)==(l|0)?(l=2,l|0):(n[848+(A*28|0)+12>>2]|0)==(l|0)?(l=3,l|0):(n[848+(A*28|0)+16>>2]|0)==(l|0)?(l=4,l|0):(n[848+(A*28|0)+20>>2]|0)==(l|0)?(l=5,l|0):((n[848+(A*28|0)+24>>2]|0)==(l|0)?6:7)|0}function yr(){return 122}function Ma(A){A=A|0;var l=0,f=0,m=0;l=0;do It(l|0,0,45)|0,m=xt()|0|134225919,f=A+(l<<3)|0,n[f>>2]=-1,n[f+4>>2]=m,l=l+1|0;while((l|0)!=122);return 0}function Pa(A){return A=A|0,+ce[A+16>>3]<+ce[A+24>>3]|0}function Da(A,l){A=A|0,l=l|0;var f=0,m=0,b=0;return f=+ce[l>>3],!(f>=+ce[A+8>>3])||!(f<=+ce[A>>3])?(l=0,l|0):(m=+ce[A+16>>3],f=+ce[A+24>>3],b=+ce[l+8>>3],l=b>=f,A=b<=m&1,m<f?l&&(A=1):l||(A=0),l=(A|0)!=0,l|0)}function _o(A,l,f){A=A|0,l=l|0,f=f|0;var m=0,b=0,T=0,z=0,N=0,X=0,te=0,ve=0,De=0,He=0,nt=0,st=0,gt=0,Ot=0;st=ft,ft=ft+288|0,ve=st+264|0,De=st+96|0,te=st,N=te,X=N+96|0;do n[N>>2]=0,N=N+4|0;while((N|0)<(X|0));return l=qs(l,te)|0,l|0?(nt=l,ft=st,nt|0):(X=te,te=n[X>>2]|0,X=n[X+4>>2]|0,is(te,X,ve)|0,zr(te,X,De)|0,z=+Si(ve,De+8|0),ce[ve>>3]=+ce[A>>3],X=ve+8|0,ce[X>>3]=+ce[A+16>>3],ce[De>>3]=+ce[A+8>>3],te=De+8|0,ce[te>>3]=+ce[A+24>>3],b=+Si(ve,De),Ot=+ce[X>>3]-+ce[te>>3],T=+Vt(+Ot),gt=+ce[ve>>3]-+ce[De>>3],m=+Vt(+gt),!(Ot==0|gt==0)&&(Ot=+R(+T,+m),Ot=+vr(+(b*b/+s(+(Ot/+s(+T,+m)),3)/(z*(z*2.59807621135)*.8))),ce[Zt>>3]=Ot,He=~~Ot>>>0,nt=+Vt(Ot)>=1?Ot>0?~~+nr(+ui(Ot/4294967296),4294967295)>>>0:~~+vr((Ot-+(~~Ot>>>0))/4294967296)>>>0:0,(n[Zt+4>>2]&2146435072|0)!=2146435072)?(De=(He|0)==0&(nt|0)==0,l=f,n[l>>2]=De?1:He,n[l+4>>2]=De?0:nt,l=0):l=1,nt=l,ft=st,nt|0)}function or(A,l,f,m){A=A|0,l=l|0,f=f|0,m=m|0;var b=0,T=0,z=0,N=0,X=0,te=0,ve=0;te=ft,ft=ft+288|0,z=te+264|0,N=te+96|0,X=te,b=X,T=b+96|0;do n[b>>2]=0,b=b+4|0;while((b|0)<(T|0));return f=qs(f,X)|0,f|0?(m=f,ft=te,m|0):(f=X,b=n[f>>2]|0,f=n[f+4>>2]|0,is(b,f,z)|0,zr(b,f,N)|0,ve=+Si(z,N+8|0),ve=+vr(+(+Si(A,l)/(ve*2))),ce[Zt>>3]=ve,f=~~ve>>>0,b=+Vt(ve)>=1?ve>0?~~+nr(+ui(ve/4294967296),4294967295)>>>0:~~+vr((ve-+(~~ve>>>0))/4294967296)>>>0:0,(n[Zt+4>>2]&2146435072|0)==2146435072?(m=1,ft=te,m|0):(X=(f|0)==0&(b|0)==0,n[m>>2]=X?1:f,n[m+4>>2]=X?0:b,m=0,ft=te,m|0))}function Ln(A,l,f,m){A=A|0,l=l|0,f=f|0,m=m|0,n[A>>2]=l,n[A+4>>2]=f,n[A+8>>2]=m}function jn(A,l){A=A|0,l=l|0;var f=0,m=0,b=0,T=0,z=0,N=0,X=0,te=0,ve=0,De=0,He=0;De=l+8|0,n[De>>2]=0,X=+ce[A>>3],z=+Vt(+X),te=+ce[A+8>>3],N=+Vt(+te)/.8660254037844386,z=z+N*.5,f=~~z,A=~~N,z=z-+(f|0),N=N-+(A|0);do if(z<.5)if(z<.3333333333333333)if(n[l>>2]=f,N<(z+1)*.5){n[l+4>>2]=A;break}else{A=A+1|0,n[l+4>>2]=A;break}else if(He=1-z,A=(!(N<He)&1)+A|0,n[l+4>>2]=A,He<=N&N<z*2){f=f+1|0,n[l>>2]=f;break}else{n[l>>2]=f;break}else{if(!(z<.6666666666666666))if(f=f+1|0,n[l>>2]=f,N<z*.5){n[l+4>>2]=A;break}else{A=A+1|0,n[l+4>>2]=A;break}if(N<1-z){if(n[l+4>>2]=A,z*2+-1<N){n[l>>2]=f;break}}else A=A+1|0,n[l+4>>2]=A;f=f+1|0,n[l>>2]=f}while(!1);do if(X<0)if(A&1){ve=(A+1|0)/2|0,ve=E(f|0,((f|0)<0)<<31>>31|0,ve|0,((ve|0)<0)<<31>>31|0)|0,f=~~(+(f|0)-((+(ve>>>0)+4294967296*+(xt()|0))*2+1)),n[l>>2]=f;break}else{ve=(A|0)/2|0,ve=E(f|0,((f|0)<0)<<31>>31|0,ve|0,((ve|0)<0)<<31>>31|0)|0,f=~~(+(f|0)-(+(ve>>>0)+4294967296*+(xt()|0))*2),n[l>>2]=f;break}while(!1);ve=l+4|0,te<0&&(f=f-((A<<1|1|0)/2|0)|0,n[l>>2]=f,A=0-A|0,n[ve>>2]=A),m=A-f|0,(f|0)<0?(b=0-f|0,n[ve>>2]=m,n[De>>2]=b,n[l>>2]=0,A=m,f=0):b=0,(A|0)<0&&(f=f-A|0,n[l>>2]=f,b=b-A|0,n[De>>2]=b,n[ve>>2]=0,A=0),T=f-b|0,m=A-b|0,(b|0)<0&&(n[l>>2]=T,n[ve>>2]=m,n[De>>2]=0,A=m,f=T,b=0),m=(A|0)<(f|0)?A:f,m=(b|0)<(m|0)?b:m,!((m|0)<=0)&&(n[l>>2]=f-m,n[ve>>2]=A-m,n[De>>2]=b-m)}function Er(A){A=A|0;var l=0,f=0,m=0,b=0,T=0,z=0;l=n[A>>2]|0,z=A+4|0,f=n[z>>2]|0,(l|0)<0&&(f=f-l|0,n[z>>2]=f,T=A+8|0,n[T>>2]=(n[T>>2]|0)-l,n[A>>2]=0,l=0),(f|0)<0?(l=l-f|0,n[A>>2]=l,T=A+8|0,b=(n[T>>2]|0)-f|0,n[T>>2]=b,n[z>>2]=0,f=0):(b=A+8|0,T=b,b=n[b>>2]|0),(b|0)<0&&(l=l-b|0,n[A>>2]=l,f=f-b|0,n[z>>2]=f,n[T>>2]=0,b=0),m=(f|0)<(l|0)?f:l,m=(b|0)<(m|0)?b:m,!((m|0)<=0)&&(n[A>>2]=l-m,n[z>>2]=f-m,n[T>>2]=b-m)}function xs(A,l){A=A|0,l=l|0;var f=0,m=0;m=n[A+8>>2]|0,f=+((n[A+4>>2]|0)-m|0),ce[l>>3]=+((n[A>>2]|0)-m|0)-f*.5,ce[l+8>>3]=f*.8660254037844386}function Pr(A,l,f){A=A|0,l=l|0,f=f|0,n[f>>2]=(n[l>>2]|0)+(n[A>>2]|0),n[f+4>>2]=(n[l+4>>2]|0)+(n[A+4>>2]|0),n[f+8>>2]=(n[l+8>>2]|0)+(n[A+8>>2]|0)}function eA(A,l,f){A=A|0,l=l|0,f=f|0,n[f>>2]=(n[A>>2]|0)-(n[l>>2]|0),n[f+4>>2]=(n[A+4>>2]|0)-(n[l+4>>2]|0),n[f+8>>2]=(n[A+8>>2]|0)-(n[l+8>>2]|0)}function EA(A,l){A=A|0,l=l|0;var f=0,m=0;f=Mi(n[A>>2]|0,l)|0,n[A>>2]=f,f=A+4|0,m=Mi(n[f>>2]|0,l)|0,n[f>>2]=m,A=A+8|0,l=Mi(n[A>>2]|0,l)|0,n[A>>2]=l}function eo(A){A=A|0;var l=0,f=0,m=0,b=0,T=0,z=0,N=0;z=n[A>>2]|0,N=(z|0)<0,m=(n[A+4>>2]|0)-(N?z:0)|0,T=(m|0)<0,b=(T?0-m|0:0)+((n[A+8>>2]|0)-(N?z:0))|0,f=(b|0)<0,A=f?0:b,l=(T?0:m)-(f?b:0)|0,b=(N?0:z)-(T?m:0)-(f?b:0)|0,f=(l|0)<(b|0)?l:b,f=(A|0)<(f|0)?A:f,m=(f|0)>0,A=A-(m?f:0)|0,l=l-(m?f:0)|0;e:do switch(b-(m?f:0)|0){case 0:switch(l|0){case 0:return N=A|0?(A|0)==1?1:7:0,N|0;case 1:return N=A|0?(A|0)==1?3:7:2,N|0;default:break e}case 1:switch(l|0){case 0:return N=A|0?(A|0)==1?5:7:4,N|0;case 1:{if(!A)A=6;else break e;return A|0}default:break e}}while(!1);return N=7,N|0}function Oo(A){A=A|0;var l=0,f=0,m=0,b=0,T=0,z=0,N=0;z=A+8|0,b=n[z>>2]|0,T=(n[A>>2]|0)-b|0,N=A+4|0,b=(n[N>>2]|0)-b|0;do if(T>>>0>715827881|b>>>0>715827881){if(f=(T|0)>0,f){if((2147483647-T|0)<(T|0)||(2147483647-(T<<1)|0)<(T|0))return N=1,N|0}else if((-2147483648-T|0)>(T|0)||(-2147483648-(T<<1)|0)>(T|0))return N=1,N|0;if(l=T*3|0,(b|0)>0){if((2147483647-b|0)<(b|0))return N=1,N|0}else if((-2147483648-b|0)>(b|0))return N=1,N|0;if(m=b<<1,(T|0)>-1){if((l|-2147483648|0)>=(b|0))return N=1,N|0}else if((l^-2147483648|0)<(b|0))return N=1,N|0;if(f){if((2147483647-T|0)<(m|0))l=1;else{f=m;break}return l|0}else{if((-2147483648-T|0)>(m|0))l=1;else{f=m;break}return l|0}}else f=b<<1,l=T*3|0;while(!1);m=Qo(+(l-b|0)/7)|0,n[A>>2]=m,b=Qo(+(f+T|0)/7)|0,n[N>>2]=b,n[z>>2]=0,f=(b|0)<(m|0),l=f?m:b,f=f?b:m;do if((f|0)<0){if((l|0)>0){if((l|-2147483648|0)<(f|0)&((f|0)!=-2147483648&(2147483647-l|0)>=(f|0)))break;nn(23313,22444,355,22455)}if((f|0)==-2147483648|(-2147483648-l|0)>(f|0)&&nn(23313,22444,355,22455),(l|0)>-1){if((l|-2147483648|0)<(f|0))break;nn(23313,22444,355,22455)}else{if((l^-2147483648|0)>=(f|0))break;nn(23313,22444,355,22455)}}while(!1);return l=b-m|0,(m|0)<0?(f=0-m|0,n[N>>2]=l,n[z>>2]=f,n[A>>2]=0,m=0):(l=b,f=0),(l|0)<0&&(m=m-l|0,n[A>>2]=m,f=f-l|0,n[z>>2]=f,n[N>>2]=0,l=0),T=m-f|0,b=l-f|0,(f|0)<0?(n[A>>2]=T,n[N>>2]=b,n[z>>2]=0,l=b,b=T,f=0):b=m,m=(l|0)<(b|0)?l:b,m=(f|0)<(m|0)?f:m,(m|0)<=0?(N=0,N|0):(n[A>>2]=b-m,n[N>>2]=l-m,n[z>>2]=f-m,N=0,N|0)}function ls(A){A=A|0;var l=0,f=0,m=0,b=0,T=0,z=0,N=0;z=A+8|0,b=n[z>>2]|0,T=(n[A>>2]|0)-b|0,N=A+4|0,b=(n[N>>2]|0)-b|0;do if(T>>>0>715827881|b>>>0>715827881){if(f=(T|0)>0,f){if((2147483647-T|0)<(T|0))return N=1,N|0}else if((-2147483648-T|0)>(T|0))return N=1,N|0;if(l=T<<1,(b|0)>0){if((2147483647-b|0)<(b|0)||(2147483647-(b<<1)|0)<(b|0))return N=1,N|0}else if((-2147483648-b|0)>(b|0)||(-2147483648-(b<<1)|0)>(b|0))return N=1,N|0;if(m=b*3|0,f){if((2147483647-l|0)<(b|0))return N=1,N|0}else if((-2147483648-l|0)>(b|0))return N=1,N|0;if((b|0)>-1){if((m|-2147483648|0)<(T|0)){f=m;break}else l=1;return l|0}else{if((m^-2147483648|0)<(T|0))l=1;else{f=m;break}return l|0}}else f=b*3|0,l=T<<1;while(!1);m=Qo(+(l+b|0)/7)|0,n[A>>2]=m,b=Qo(+(f-T|0)/7)|0,n[N>>2]=b,n[z>>2]=0,f=(b|0)<(m|0),l=f?m:b,f=f?b:m;do if((f|0)<0){if((l|0)>0){if((l|-2147483648|0)<(f|0)&((f|0)!=-2147483648&(2147483647-l|0)>=(f|0)))break;nn(23313,22444,404,22469)}if((f|0)==-2147483648|(-2147483648-l|0)>(f|0)&&nn(23313,22444,404,22469),(l|0)>-1){if((l|-2147483648|0)<(f|0))break;nn(23313,22444,404,22469)}else{if((l^-2147483648|0)>=(f|0))break;nn(23313,22444,404,22469)}}while(!1);return l=b-m|0,(m|0)<0?(f=0-m|0,n[N>>2]=l,n[z>>2]=f,n[A>>2]=0,m=0):(l=b,f=0),(l|0)<0&&(m=m-l|0,n[A>>2]=m,f=f-l|0,n[z>>2]=f,n[N>>2]=0,l=0),T=m-f|0,b=l-f|0,(f|0)<0?(n[A>>2]=T,n[N>>2]=b,n[z>>2]=0,l=b,b=T,f=0):b=m,m=(l|0)<(b|0)?l:b,m=(f|0)<(m|0)?f:m,(m|0)<=0?(N=0,N|0):(n[A>>2]=b-m,n[N>>2]=l-m,n[z>>2]=f-m,N=0,N|0)}function fA(A){A=A|0;var l=0,f=0,m=0,b=0,T=0,z=0,N=0;z=A+8|0,f=n[z>>2]|0,l=(n[A>>2]|0)-f|0,N=A+4|0,f=(n[N>>2]|0)-f|0,m=Qo(+((l*3|0)-f|0)/7)|0,n[A>>2]=m,l=Qo(+((f<<1)+l|0)/7)|0,n[N>>2]=l,n[z>>2]=0,f=l-m|0,(m|0)<0?(T=0-m|0,n[N>>2]=f,n[z>>2]=T,n[A>>2]=0,l=f,m=0,f=T):f=0,(l|0)<0&&(m=m-l|0,n[A>>2]=m,f=f-l|0,n[z>>2]=f,n[N>>2]=0,l=0),T=m-f|0,b=l-f|0,(f|0)<0?(n[A>>2]=T,n[N>>2]=b,n[z>>2]=0,l=b,b=T,f=0):b=m,m=(l|0)<(b|0)?l:b,m=(f|0)<(m|0)?f:m,!((m|0)<=0)&&(n[A>>2]=b-m,n[N>>2]=l-m,n[z>>2]=f-m)}function Ga(A){A=A|0;var l=0,f=0,m=0,b=0,T=0,z=0,N=0;z=A+8|0,f=n[z>>2]|0,l=(n[A>>2]|0)-f|0,N=A+4|0,f=(n[N>>2]|0)-f|0,m=Qo(+((l<<1)+f|0)/7)|0,n[A>>2]=m,l=Qo(+((f*3|0)-l|0)/7)|0,n[N>>2]=l,n[z>>2]=0,f=l-m|0,(m|0)<0?(T=0-m|0,n[N>>2]=f,n[z>>2]=T,n[A>>2]=0,l=f,m=0,f=T):f=0,(l|0)<0&&(m=m-l|0,n[A>>2]=m,f=f-l|0,n[z>>2]=f,n[N>>2]=0,l=0),T=m-f|0,b=l-f|0,(f|0)<0?(n[A>>2]=T,n[N>>2]=b,n[z>>2]=0,l=b,b=T,f=0):b=m,m=(l|0)<(b|0)?l:b,m=(f|0)<(m|0)?f:m,!((m|0)<=0)&&(n[A>>2]=b-m,n[N>>2]=l-m,n[z>>2]=f-m)}function vo(A){A=A|0;var l=0,f=0,m=0,b=0,T=0,z=0,N=0;l=n[A>>2]|0,z=A+4|0,f=n[z>>2]|0,N=A+8|0,m=n[N>>2]|0,b=f+(l*3|0)|0,n[A>>2]=b,f=m+(f*3|0)|0,n[z>>2]=f,l=(m*3|0)+l|0,n[N>>2]=l,m=f-b|0,(b|0)<0?(l=l-b|0,n[z>>2]=m,n[N>>2]=l,n[A>>2]=0,f=m,m=0):m=b,(f|0)<0&&(m=m-f|0,n[A>>2]=m,l=l-f|0,n[N>>2]=l,n[z>>2]=0,f=0),T=m-l|0,b=f-l|0,(l|0)<0?(n[A>>2]=T,n[z>>2]=b,n[N>>2]=0,m=T,l=0):b=f,f=(b|0)<(m|0)?b:m,f=(l|0)<(f|0)?l:f,!((f|0)<=0)&&(n[A>>2]=m-f,n[z>>2]=b-f,n[N>>2]=l-f)}function Ns(A){A=A|0;var l=0,f=0,m=0,b=0,T=0,z=0,N=0;b=n[A>>2]|0,z=A+4|0,l=n[z>>2]|0,N=A+8|0,f=n[N>>2]|0,m=(l*3|0)+b|0,b=f+(b*3|0)|0,n[A>>2]=b,n[z>>2]=m,l=(f*3|0)+l|0,n[N>>2]=l,f=m-b|0,(b|0)<0?(l=l-b|0,n[z>>2]=f,n[N>>2]=l,n[A>>2]=0,b=0):f=m,(f|0)<0&&(b=b-f|0,n[A>>2]=b,l=l-f|0,n[N>>2]=l,n[z>>2]=0,f=0),T=b-l|0,m=f-l|0,(l|0)<0?(n[A>>2]=T,n[z>>2]=m,n[N>>2]=0,b=T,l=0):m=f,f=(m|0)<(b|0)?m:b,f=(l|0)<(f|0)?l:f,!((f|0)<=0)&&(n[A>>2]=b-f,n[z>>2]=m-f,n[N>>2]=l-f)}function Ts(A,l){A=A|0,l=l|0;var f=0,m=0,b=0,T=0,z=0,N=0;(l+-1|0)>>>0>=6||(b=(n[15440+(l*12|0)>>2]|0)+(n[A>>2]|0)|0,n[A>>2]=b,N=A+4|0,m=(n[15440+(l*12|0)+4>>2]|0)+(n[N>>2]|0)|0,n[N>>2]=m,z=A+8|0,l=(n[15440+(l*12|0)+8>>2]|0)+(n[z>>2]|0)|0,n[z>>2]=l,f=m-b|0,(b|0)<0?(l=l-b|0,n[N>>2]=f,n[z>>2]=l,n[A>>2]=0,m=0):(f=m,m=b),(f|0)<0&&(m=m-f|0,n[A>>2]=m,l=l-f|0,n[z>>2]=l,n[N>>2]=0,f=0),T=m-l|0,b=f-l|0,(l|0)<0?(n[A>>2]=T,n[N>>2]=b,n[z>>2]=0,m=T,l=0):b=f,f=(b|0)<(m|0)?b:m,f=(l|0)<(f|0)?l:f,!((f|0)<=0)&&(n[A>>2]=m-f,n[N>>2]=b-f,n[z>>2]=l-f))}function tA(A){A=A|0;var l=0,f=0,m=0,b=0,T=0,z=0,N=0;b=n[A>>2]|0,z=A+4|0,l=n[z>>2]|0,N=A+8|0,f=n[N>>2]|0,m=l+b|0,b=f+b|0,n[A>>2]=b,n[z>>2]=m,l=f+l|0,n[N>>2]=l,f=m-b|0,(b|0)<0?(l=l-b|0,n[z>>2]=f,n[N>>2]=l,n[A>>2]=0,m=0):(f=m,m=b),(f|0)<0&&(m=m-f|0,n[A>>2]=m,l=l-f|0,n[N>>2]=l,n[z>>2]=0,f=0),T=m-l|0,b=f-l|0,(l|0)<0?(n[A>>2]=T,n[z>>2]=b,n[N>>2]=0,m=T,l=0):b=f,f=(b|0)<(m|0)?b:m,f=(l|0)<(f|0)?l:f,!((f|0)<=0)&&(n[A>>2]=m-f,n[z>>2]=b-f,n[N>>2]=l-f)}function aa(A){A=A|0;var l=0,f=0,m=0,b=0,T=0,z=0,N=0;l=n[A>>2]|0,z=A+4|0,m=n[z>>2]|0,N=A+8|0,f=n[N>>2]|0,b=m+l|0,n[A>>2]=b,m=f+m|0,n[z>>2]=m,l=f+l|0,n[N>>2]=l,f=m-b|0,(b|0)<0?(l=l-b|0,n[z>>2]=f,n[N>>2]=l,n[A>>2]=0,m=0):(f=m,m=b),(f|0)<0&&(m=m-f|0,n[A>>2]=m,l=l-f|0,n[N>>2]=l,n[z>>2]=0,f=0),T=m-l|0,b=f-l|0,(l|0)<0?(n[A>>2]=T,n[z>>2]=b,n[N>>2]=0,m=T,l=0):b=f,f=(b|0)<(m|0)?b:m,f=(l|0)<(f|0)?l:f,!((f|0)<=0)&&(n[A>>2]=m-f,n[z>>2]=b-f,n[N>>2]=l-f)}function La(A){switch(A=A|0,A|0){case 1:{A=5;break}case 5:{A=4;break}case 4:{A=6;break}case 6:{A=2;break}case 2:{A=3;break}case 3:{A=1;break}}return A|0}function yo(A){switch(A=A|0,A|0){case 1:{A=3;break}case 3:{A=2;break}case 2:{A=6;break}case 6:{A=4;break}case 4:{A=5;break}case 5:{A=1;break}}return A|0}function zo(A){A=A|0;var l=0,f=0,m=0,b=0,T=0,z=0,N=0;l=n[A>>2]|0,z=A+4|0,f=n[z>>2]|0,N=A+8|0,m=n[N>>2]|0,b=f+(l<<1)|0,n[A>>2]=b,f=m+(f<<1)|0,n[z>>2]=f,l=(m<<1)+l|0,n[N>>2]=l,m=f-b|0,(b|0)<0?(l=l-b|0,n[z>>2]=m,n[N>>2]=l,n[A>>2]=0,f=m,m=0):m=b,(f|0)<0&&(m=m-f|0,n[A>>2]=m,l=l-f|0,n[N>>2]=l,n[z>>2]=0,f=0),T=m-l|0,b=f-l|0,(l|0)<0?(n[A>>2]=T,n[z>>2]=b,n[N>>2]=0,m=T,l=0):b=f,f=(b|0)<(m|0)?b:m,f=(l|0)<(f|0)?l:f,!((f|0)<=0)&&(n[A>>2]=m-f,n[z>>2]=b-f,n[N>>2]=l-f)}function VA(A){A=A|0;var l=0,f=0,m=0,b=0,T=0,z=0,N=0;b=n[A>>2]|0,z=A+4|0,l=n[z>>2]|0,N=A+8|0,f=n[N>>2]|0,m=(l<<1)+b|0,b=f+(b<<1)|0,n[A>>2]=b,n[z>>2]=m,l=(f<<1)+l|0,n[N>>2]=l,f=m-b|0,(b|0)<0?(l=l-b|0,n[z>>2]=f,n[N>>2]=l,n[A>>2]=0,b=0):f=m,(f|0)<0&&(b=b-f|0,n[A>>2]=b,l=l-f|0,n[N>>2]=l,n[z>>2]=0,f=0),T=b-l|0,m=f-l|0,(l|0)<0?(n[A>>2]=T,n[z>>2]=m,n[N>>2]=0,b=T,l=0):m=f,f=(m|0)<(b|0)?m:b,f=(l|0)<(f|0)?l:f,!((f|0)<=0)&&(n[A>>2]=b-f,n[z>>2]=m-f,n[N>>2]=l-f)}function Dr(A,l){A=A|0,l=l|0;var f=0,m=0,b=0,T=0,z=0,N=0;return z=(n[A>>2]|0)-(n[l>>2]|0)|0,N=(z|0)<0,m=(n[A+4>>2]|0)-(n[l+4>>2]|0)-(N?z:0)|0,T=(m|0)<0,b=(N?0-z|0:0)+(n[A+8>>2]|0)-(n[l+8>>2]|0)+(T?0-m|0:0)|0,A=(b|0)<0,l=A?0:b,f=(T?0:m)-(A?b:0)|0,b=(N?0:z)-(T?m:0)-(A?b:0)|0,A=(f|0)<(b|0)?f:b,A=(l|0)<(A|0)?l:A,m=(A|0)>0,l=l-(m?A:0)|0,f=f-(m?A:0)|0,A=b-(m?A:0)|0,A=(A|0)>-1?A:0-A|0,f=(f|0)>-1?f:0-f|0,l=(l|0)>-1?l:0-l|0,l=(f|0)>(l|0)?f:l,((A|0)>(l|0)?A:l)|0}function gu(A,l){A=A|0,l=l|0;var f=0;f=n[A+8>>2]|0,n[l>>2]=(n[A>>2]|0)-f,n[l+4>>2]=(n[A+4>>2]|0)-f}function oa(A,l){A=A|0,l=l|0;var f=0,m=0,b=0,T=0,z=0,N=0;m=n[A>>2]|0,n[l>>2]=m,b=n[A+4>>2]|0,z=l+4|0,n[z>>2]=b,N=l+8|0,n[N>>2]=0,f=(b|0)<(m|0),A=f?m:b,f=f?b:m;do if((f|0)<0){if((A|0)>0){if((A|-2147483648|0)<(f|0)&((f|0)!=-2147483648&(2147483647-A|0)>=(f|0)))break;return A=1,A|0}if((f|0)==-2147483648|(-2147483648-A|0)>(f|0))return l=1,l|0;if((A|0)>-1){if((A|-2147483648|0)<(f|0))break;return A=1,A|0}else{if((A^-2147483648|0)<(f|0))A=1;else break;return A|0}}while(!1);return A=b-m|0,(m|0)<0?(f=0-m|0,n[z>>2]=A,n[N>>2]=f,n[l>>2]=0,m=0):(A=b,f=0),(A|0)<0&&(m=m-A|0,n[l>>2]=m,f=f-A|0,n[N>>2]=f,n[z>>2]=0,A=0),T=m-f|0,b=A-f|0,(f|0)<0?(n[l>>2]=T,n[z>>2]=b,n[N>>2]=0,A=b,b=T,f=0):b=m,m=(A|0)<(b|0)?A:b,m=(f|0)<(m|0)?f:m,(m|0)<=0?(l=0,l|0):(n[l>>2]=b-m,n[z>>2]=A-m,n[N>>2]=f-m,l=0,l|0)}function ba(A){A=A|0;var l=0,f=0,m=0,b=0;l=A+8|0,b=n[l>>2]|0,f=b-(n[A>>2]|0)|0,n[A>>2]=f,m=A+4|0,A=(n[m>>2]|0)-b|0,n[m>>2]=A,n[l>>2]=0-(A+f)}function ll(A){A=A|0;var l=0,f=0,m=0,b=0,T=0,z=0,N=0;f=n[A>>2]|0,l=0-f|0,n[A>>2]=l,z=A+8|0,n[z>>2]=0,N=A+4|0,m=n[N>>2]|0,b=m+f|0,(f|0)>0?(n[N>>2]=b,n[z>>2]=f,n[A>>2]=0,l=0,m=b):f=0,(m|0)<0?(T=l-m|0,n[A>>2]=T,f=f-m|0,n[z>>2]=f,n[N>>2]=0,b=T-f|0,l=0-f|0,(f|0)<0?(n[A>>2]=b,n[N>>2]=l,n[z>>2]=0,m=l,f=0):(m=0,b=T)):b=l,l=(m|0)<(b|0)?m:b,l=(f|0)<(l|0)?f:l,!((l|0)<=0)&&(n[A>>2]=b-l,n[N>>2]=m-l,n[z>>2]=f-l)}function to(A,l,f,m,b){A=A|0,l=l|0,f=f|0,m=m|0,b=b|0;var T=0,z=0,N=0,X=0,te=0,ve=0,De=0;if(De=ft,ft=ft+64|0,ve=De,N=De+56|0,!(!0&(l&2013265920|0)==134217728&(!0&(m&2013265920|0)==134217728)))return b=5,ft=De,b|0;if((A|0)==(f|0)&(l|0)==(m|0))return n[b>>2]=0,b=0,ft=De,b|0;if(z=wt(A|0,l|0,52)|0,xt()|0,z=z&15,te=wt(f|0,m|0,52)|0,xt()|0,(z|0)!=(te&15|0))return b=12,ft=De,b|0;if(T=z+-1|0,z>>>0>1){Uo(A,l,T,ve)|0,Uo(f,m,T,N)|0,te=ve,X=n[te>>2]|0,te=n[te+4>>2]|0;e:do if((X|0)==(n[N>>2]|0)&&(te|0)==(n[N+4>>2]|0)){z=(z^15)*3|0,T=wt(A|0,l|0,z|0)|0,xt()|0,T=T&7,z=wt(f|0,m|0,z|0)|0,xt()|0,z=z&7;do if((T|0)==0|(z|0)==0)n[b>>2]=1,T=0;else if((T|0)==7)T=5;else{if((T|0)==1|(z|0)==1&&Ar(X,te)|0){T=5;break}if((n[15536+(T<<2)>>2]|0)!=(z|0)&&(n[15568+(T<<2)>>2]|0)!=(z|0))break e;n[b>>2]=1,T=0}while(!1);return b=T,ft=De,b|0}while(!1)}T=ve,z=T+56|0;do n[T>>2]=0,T=T+4|0;while((T|0)<(z|0));return go(A,l,1,ve)|0,l=ve,!((n[l>>2]|0)==(f|0)&&(n[l+4>>2]|0)==(m|0))&&(l=ve+8|0,!((n[l>>2]|0)==(f|0)&&(n[l+4>>2]|0)==(m|0)))&&(l=ve+16|0,!((n[l>>2]|0)==(f|0)&&(n[l+4>>2]|0)==(m|0)))&&(l=ve+24|0,!((n[l>>2]|0)==(f|0)&&(n[l+4>>2]|0)==(m|0)))&&(l=ve+32|0,!((n[l>>2]|0)==(f|0)&&(n[l+4>>2]|0)==(m|0)))&&(l=ve+40|0,!((n[l>>2]|0)==(f|0)&&(n[l+4>>2]|0)==(m|0)))?(T=ve+48|0,T=((n[T>>2]|0)==(f|0)?(n[T+4>>2]|0)==(m|0):0)&1):T=1,n[b>>2]=T,b=0,ft=De,b|0}function bo(A,l,f,m,b){return A=A|0,l=l|0,f=f|0,m=m|0,b=b|0,f=ya(A,l,f,m)|0,(f|0)==7?(b=11,b|0):(m=It(f|0,0,56)|0,l=l&-2130706433|(xt()|0)|268435456,n[b>>2]=A|m,n[b+4>>2]=l,b=0,b|0)}function Fo(A,l,f){return A=A|0,l=l|0,f=f|0,!0&(l&2013265920|0)==268435456?(n[f>>2]=A,n[f+4>>2]=l&-2130706433|134217728,f=0,f|0):(f=6,f|0)}function us(A,l,f){A=A|0,l=l|0,f=f|0;var m=0,b=0,T=0;return b=ft,ft=ft+16|0,m=b,n[m>>2]=0,!0&(l&2013265920|0)==268435456?(T=wt(A|0,l|0,56)|0,xt()|0,m=Or(A,l&-2130706433|134217728,T&7,m,f)|0,ft=b,m|0):(m=6,ft=b,m|0)}function io(A,l){A=A|0,l=l|0;var f=0;switch(f=wt(A|0,l|0,56)|0,xt()|0,f&7){case 0:case 7:return f=0,f|0}return f=l&-2130706433|134217728,!(!0&(l&2013265920|0)==268435456)||!0&(l&117440512|0)==16777216&(Ar(A,f)|0)!=0?(f=0,f|0):(f=Vo(A,f)|0,f|0)}function xo(A,l,f){A=A|0,l=l|0,f=f|0;var m=0,b=0,T=0,z=0;return b=ft,ft=ft+16|0,m=b,!0&(l&2013265920|0)==268435456?(T=l&-2130706433|134217728,z=f,n[z>>2]=A,n[z+4>>2]=T,n[m>>2]=0,l=wt(A|0,l|0,56)|0,xt()|0,m=Or(A,T,l&7,m,f+8|0)|0,ft=b,m|0):(m=6,ft=b,m|0)}function IA(A,l,f){A=A|0,l=l|0,f=f|0;var m=0,b=0;return b=(Ar(A,l)|0)==0,l=l&-2130706433,m=f,n[m>>2]=b?A:0,n[m+4>>2]=b?l|285212672:0,m=f+8|0,n[m>>2]=A,n[m+4>>2]=l|301989888,m=f+16|0,n[m>>2]=A,n[m+4>>2]=l|318767104,m=f+24|0,n[m>>2]=A,n[m+4>>2]=l|335544320,m=f+32|0,n[m>>2]=A,n[m+4>>2]=l|352321536,f=f+40|0,n[f>>2]=A,n[f+4>>2]=l|369098752,0}function Hs(A,l,f){A=A|0,l=l|0,f=f|0;var m=0,b=0,T=0,z=0;return z=ft,ft=ft+16|0,b=z,T=l&-2130706433|134217728,!0&(l&2013265920|0)==268435456?(m=wt(A|0,l|0,56)|0,xt()|0,m=Jr(A,T,m&7)|0,(m|0)==-1?(n[f>>2]=0,T=6,ft=z,T|0):(br(A,T,b)|0&&nn(23313,22484,282,22499),l=wt(A|0,l|0,52)|0,xt()|0,l=l&15,Ar(A,T)|0?No(b,l,m,2,f):Qr(b,l,m,2,f),T=0,ft=z,T|0)):(T=6,ft=z,T|0)}function Ha(A,l,f){A=A|0,l=l|0,f=f|0;var m=0,b=0;m=ft,ft=ft+16|0,b=m,gs(A,l,f,b),jn(b,f+4|0),ft=m}function gs(A,l,f,m){A=A|0,l=l|0,f=f|0,m=m|0;var b=0,T=0,z=0,N=0,X=0;if(N=ft,ft=ft+16|0,X=N,ul(A,f,X),T=+Yi(+(1-+ce[X>>3]*.5)),T<1e-16){n[m>>2]=0,n[m+4>>2]=0,n[m+8>>2]=0,n[m+12>>2]=0,ft=N;return}if(X=n[f>>2]|0,b=+ce[15920+(X*24|0)>>3],b=+nA(b-+nA(+mt(15600+(X<<4)|0,A))),ms(l)|0?z=+nA(b+-.3334731722518321):z=b,b=+Rt(+T)/.381966011250105,(l|0)>0){A=0;do b=b*2.6457513110645907,A=A+1|0;while((A|0)!=(l|0))}T=+Ai(+z)*b,ce[m>>3]=T,z=+pi(+z)*b,ce[m+8>>3]=z,ft=N}function ul(A,l,f){A=A|0,l=l|0,f=f|0;var m=0,b=0,T=0;if(T=ft,ft=ft+32|0,b=T,ns(A,b),n[l>>2]=0,ce[f>>3]=5,m=+lr(16400,b),m<+ce[f>>3]&&(n[l>>2]=0,ce[f>>3]=m),m=+lr(16424,b),m<+ce[f>>3]&&(n[l>>2]=1,ce[f>>3]=m),m=+lr(16448,b),m<+ce[f>>3]&&(n[l>>2]=2,ce[f>>3]=m),m=+lr(16472,b),m<+ce[f>>3]&&(n[l>>2]=3,ce[f>>3]=m),m=+lr(16496,b),m<+ce[f>>3]&&(n[l>>2]=4,ce[f>>3]=m),m=+lr(16520,b),m<+ce[f>>3]&&(n[l>>2]=5,ce[f>>3]=m),m=+lr(16544,b),m<+ce[f>>3]&&(n[l>>2]=6,ce[f>>3]=m),m=+lr(16568,b),m<+ce[f>>3]&&(n[l>>2]=7,ce[f>>3]=m),m=+lr(16592,b),m<+ce[f>>3]&&(n[l>>2]=8,ce[f>>3]=m),m=+lr(16616,b),m<+ce[f>>3]&&(n[l>>2]=9,ce[f>>3]=m),m=+lr(16640,b),m<+ce[f>>3]&&(n[l>>2]=10,ce[f>>3]=m),m=+lr(16664,b),m<+ce[f>>3]&&(n[l>>2]=11,ce[f>>3]=m),m=+lr(16688,b),m<+ce[f>>3]&&(n[l>>2]=12,ce[f>>3]=m),m=+lr(16712,b),m<+ce[f>>3]&&(n[l>>2]=13,ce[f>>3]=m),m=+lr(16736,b),m<+ce[f>>3]&&(n[l>>2]=14,ce[f>>3]=m),m=+lr(16760,b),m<+ce[f>>3]&&(n[l>>2]=15,ce[f>>3]=m),m=+lr(16784,b),m<+ce[f>>3]&&(n[l>>2]=16,ce[f>>3]=m),m=+lr(16808,b),m<+ce[f>>3]&&(n[l>>2]=17,ce[f>>3]=m),m=+lr(16832,b),m<+ce[f>>3]&&(n[l>>2]=18,ce[f>>3]=m),m=+lr(16856,b),!(m<+ce[f>>3])){ft=T;return}n[l>>2]=19,ce[f>>3]=m,ft=T}function Kn(A,l,f,m,b){A=A|0,l=l|0,f=f|0,m=m|0,b=b|0;var T=0,z=0;if(T=+iu(A),T<1e-16){l=15600+(l<<4)|0,n[b>>2]=n[l>>2],n[b+4>>2]=n[l+4>>2],n[b+8>>2]=n[l+8>>2],n[b+12>>2]=n[l+12>>2];return}if(z=+pn(+ +ce[A+8>>3],+ +ce[A>>3]),(f|0)>0){A=0;do T=T/2.6457513110645907,A=A+1|0;while((A|0)!=(f|0))}m?(T=T/3,f=(ms(f)|0)==0,T=+wn(+((f?T:T/2.6457513110645907)*.381966011250105))):(T=+wn(+(T*.381966011250105)),ms(f)|0&&(z=+nA(z+.3334731722518321))),Bt(15600+(l<<4)|0,+nA(+ce[15920+(l*24|0)>>3]-z),T,b)}function Xr(A,l,f){A=A|0,l=l|0,f=f|0;var m=0,b=0;m=ft,ft=ft+16|0,b=m,xs(A+4|0,b),Kn(b,n[A>>2]|0,l,0,f),ft=m}function No(A,l,f,m,b){A=A|0,l=l|0,f=f|0,m=m|0,b=b|0;var T=0,z=0,N=0,X=0,te=0,ve=0,De=0,He=0,nt=0,st=0,gt=0,Ot=0,Ut=0,Mt=0,zt=0,Ft=0,Bi=0,hi=0,xi=0,bi=0,Dn=0,dn=0,tn=0,on=0,mn=0,cn=0,$n=0,Tn=0;if(cn=ft,ft=ft+272|0,T=cn+256|0,Mt=cn+240|0,tn=cn,on=cn+224|0,mn=cn+208|0,zt=cn+176|0,Ft=cn+160|0,Bi=cn+192|0,hi=cn+144|0,xi=cn+128|0,bi=cn+112|0,Dn=cn+96|0,dn=cn+80|0,n[T>>2]=l,n[Mt>>2]=n[A>>2],n[Mt+4>>2]=n[A+4>>2],n[Mt+8>>2]=n[A+8>>2],n[Mt+12>>2]=n[A+12>>2],rr(Mt,T,tn),n[b>>2]=0,Mt=m+f+((m|0)==5&1)|0,(Mt|0)<=(f|0)){ft=cn;return}X=n[T>>2]|0,te=on+4|0,ve=zt+4|0,De=f+5|0,He=16880+(X<<2)|0,nt=16960+(X<<2)|0,st=xi+8|0,gt=bi+8|0,Ot=Dn+8|0,Ut=mn+4|0,N=f;e:for(;;){z=tn+(((N|0)%5|0)<<4)|0,n[mn>>2]=n[z>>2],n[mn+4>>2]=n[z+4>>2],n[mn+8>>2]=n[z+8>>2],n[mn+12>>2]=n[z+12>>2];do;while((Aa(mn,X,0,1)|0)==2);if((N|0)>(f|0)&(ms(l)|0)!=0){if(n[zt>>2]=n[mn>>2],n[zt+4>>2]=n[mn+4>>2],n[zt+8>>2]=n[mn+8>>2],n[zt+12>>2]=n[mn+12>>2],xs(te,Ft),m=n[zt>>2]|0,T=n[17040+(m*80|0)+(n[on>>2]<<2)>>2]|0,n[zt>>2]=n[18640+(m*80|0)+(T*20|0)>>2],z=n[18640+(m*80|0)+(T*20|0)+16>>2]|0,(z|0)>0){A=0;do tA(ve),A=A+1|0;while((A|0)<(z|0))}switch(z=18640+(m*80|0)+(T*20|0)+4|0,n[Bi>>2]=n[z>>2],n[Bi+4>>2]=n[z+4>>2],n[Bi+8>>2]=n[z+8>>2],EA(Bi,(n[He>>2]|0)*3|0),Pr(ve,Bi,ve),Er(ve),xs(ve,hi),$n=+(n[nt>>2]|0),ce[xi>>3]=$n*3,ce[st>>3]=0,Tn=$n*-1.5,ce[bi>>3]=Tn,ce[gt>>3]=$n*2.598076211353316,ce[Dn>>3]=Tn,ce[Ot>>3]=$n*-2.598076211353316,n[17040+((n[zt>>2]|0)*80|0)+(n[mn>>2]<<2)>>2]|0){case 1:{A=bi,m=xi;break}case 3:{A=Dn,m=bi;break}case 2:{A=xi,m=Dn;break}default:{A=12;break e}}dl(Ft,hi,m,A,dn),Kn(dn,n[zt>>2]|0,X,1,b+8+(n[b>>2]<<4)|0),n[b>>2]=(n[b>>2]|0)+1}if((N|0)<(De|0)&&(xs(Ut,zt),Kn(zt,n[mn>>2]|0,X,1,b+8+(n[b>>2]<<4)|0),n[b>>2]=(n[b>>2]|0)+1),n[on>>2]=n[mn>>2],n[on+4>>2]=n[mn+4>>2],n[on+8>>2]=n[mn+8>>2],n[on+12>>2]=n[mn+12>>2],N=N+1|0,(N|0)>=(Mt|0)){A=3;break}}if((A|0)==3){ft=cn;return}else(A|0)==12&&nn(22522,22569,571,22579)}function rr(A,l,f){A=A|0,l=l|0,f=f|0;var m=0,b=0,T=0,z=0,N=0,X=0;X=ft,ft=ft+128|0,m=X+64|0,b=X,T=m,z=20240,N=T+60|0;do n[T>>2]=n[z>>2],T=T+4|0,z=z+4|0;while((T|0)<(N|0));T=b,z=20304,N=T+60|0;do n[T>>2]=n[z>>2],T=T+4|0,z=z+4|0;while((T|0)<(N|0));N=(ms(n[l>>2]|0)|0)==0,m=N?m:b,b=A+4|0,zo(b),VA(b),ms(n[l>>2]|0)|0&&(Ns(b),n[l>>2]=(n[l>>2]|0)+1),n[f>>2]=n[A>>2],l=f+4|0,Pr(b,m,l),Er(l),n[f+16>>2]=n[A>>2],l=f+20|0,Pr(b,m+12|0,l),Er(l),n[f+32>>2]=n[A>>2],l=f+36|0,Pr(b,m+24|0,l),Er(l),n[f+48>>2]=n[A>>2],l=f+52|0,Pr(b,m+36|0,l),Er(l),n[f+64>>2]=n[A>>2],f=f+68|0,Pr(b,m+48|0,f),Er(f),ft=X}function Aa(A,l,f,m){A=A|0,l=l|0,f=f|0,m=m|0;var b=0,T=0,z=0,N=0,X=0,te=0,ve=0,De=0,He=0,nt=0,st=0;if(st=ft,ft=ft+32|0,He=st+12|0,N=st,nt=A+4|0,De=n[16960+(l<<2)>>2]|0,ve=(m|0)!=0,De=ve?De*3|0:De,b=n[nt>>2]|0,te=A+8|0,z=n[te>>2]|0,ve){if(T=A+12|0,m=n[T>>2]|0,b=z+b+m|0,(b|0)==(De|0))return nt=1,ft=st,nt|0;X=T}else X=A+12|0,m=n[X>>2]|0,b=z+b+m|0;if((b|0)<=(De|0))return nt=0,ft=st,nt|0;do if((m|0)>0){if(m=n[A>>2]|0,(z|0)>0){T=18640+(m*80|0)+60|0,m=A;break}m=18640+(m*80|0)+40|0,f?(Ln(He,De,0,0),eA(nt,He,N),aa(N),Pr(N,He,nt),T=m,m=A):(T=m,m=A)}else T=18640+((n[A>>2]|0)*80|0)+20|0,m=A;while(!1);if(n[m>>2]=n[T>>2],b=T+16|0,(n[b>>2]|0)>0){m=0;do tA(nt),m=m+1|0;while((m|0)<(n[b>>2]|0))}return A=T+4|0,n[He>>2]=n[A>>2],n[He+4>>2]=n[A+4>>2],n[He+8>>2]=n[A+8>>2],l=n[16880+(l<<2)>>2]|0,EA(He,ve?l*3|0:l),Pr(nt,He,nt),Er(nt),ve?m=((n[te>>2]|0)+(n[nt>>2]|0)+(n[X>>2]|0)|0)==(De|0)?1:2:m=2,nt=m,ft=st,nt|0}function Hr(A,l){A=A|0,l=l|0;var f=0;do f=Aa(A,l,0,1)|0;while((f|0)==2);return f|0}function Qr(A,l,f,m,b){A=A|0,l=l|0,f=f|0,m=m|0,b=b|0;var T=0,z=0,N=0,X=0,te=0,ve=0,De=0,He=0,nt=0,st=0,gt=0,Ot=0,Ut=0,Mt=0,zt=0,Ft=0,Bi=0,hi=0,xi=0,bi=0,Dn=0,dn=0,tn=0;if(Dn=ft,ft=ft+240|0,T=Dn+224|0,Bi=Dn+208|0,hi=Dn,xi=Dn+192|0,bi=Dn+176|0,Ot=Dn+160|0,Ut=Dn+144|0,Mt=Dn+128|0,zt=Dn+112|0,Ft=Dn+96|0,n[T>>2]=l,n[Bi>>2]=n[A>>2],n[Bi+4>>2]=n[A+4>>2],n[Bi+8>>2]=n[A+8>>2],n[Bi+12>>2]=n[A+12>>2],xa(Bi,T,hi),n[b>>2]=0,gt=m+f+((m|0)==6&1)|0,(gt|0)<=(f|0)){ft=Dn;return}X=n[T>>2]|0,te=f+6|0,ve=16960+(X<<2)|0,De=Ut+8|0,He=Mt+8|0,nt=zt+8|0,st=xi+4|0,z=0,N=f,m=-1;e:for(;;){if(T=(N|0)%6|0,A=hi+(T<<4)|0,n[xi>>2]=n[A>>2],n[xi+4>>2]=n[A+4>>2],n[xi+8>>2]=n[A+8>>2],n[xi+12>>2]=n[A+12>>2],A=z,z=Aa(xi,X,0,1)|0,(N|0)>(f|0)&(ms(l)|0)!=0&&(A|0)!=1&&(n[xi>>2]|0)!=(m|0)){switch(xs(hi+(((T+5|0)%6|0)<<4)+4|0,bi),xs(hi+(T<<4)+4|0,Ot),dn=+(n[ve>>2]|0),ce[Ut>>3]=dn*3,ce[De>>3]=0,tn=dn*-1.5,ce[Mt>>3]=tn,ce[He>>3]=dn*2.598076211353316,ce[zt>>3]=tn,ce[nt>>3]=dn*-2.598076211353316,T=n[Bi>>2]|0,n[17040+(T*80|0)+(((m|0)==(T|0)?n[xi>>2]|0:m)<<2)>>2]|0){case 1:{A=Mt,m=Ut;break}case 3:{A=zt,m=Mt;break}case 2:{A=Ut,m=zt;break}default:{A=8;break e}}dl(bi,Ot,m,A,Ft),!(nu(bi,Ft)|0)&&!(nu(Ot,Ft)|0)&&(Kn(Ft,n[Bi>>2]|0,X,1,b+8+(n[b>>2]<<4)|0),n[b>>2]=(n[b>>2]|0)+1)}if((N|0)<(te|0)&&(xs(st,bi),Kn(bi,n[xi>>2]|0,X,1,b+8+(n[b>>2]<<4)|0),n[b>>2]=(n[b>>2]|0)+1),N=N+1|0,(N|0)>=(gt|0)){A=3;break}else m=n[xi>>2]|0}if((A|0)==3){ft=Dn;return}else(A|0)==8&&nn(22606,22569,736,22651)}function xa(A,l,f){A=A|0,l=l|0,f=f|0;var m=0,b=0,T=0,z=0,N=0,X=0;X=ft,ft=ft+160|0,m=X+80|0,b=X,T=m,z=20368,N=T+72|0;do n[T>>2]=n[z>>2],T=T+4|0,z=z+4|0;while((T|0)<(N|0));T=b,z=20448,N=T+72|0;do n[T>>2]=n[z>>2],T=T+4|0,z=z+4|0;while((T|0)<(N|0));N=(ms(n[l>>2]|0)|0)==0,m=N?m:b,b=A+4|0,zo(b),VA(b),ms(n[l>>2]|0)|0&&(Ns(b),n[l>>2]=(n[l>>2]|0)+1),n[f>>2]=n[A>>2],l=f+4|0,Pr(b,m,l),Er(l),n[f+16>>2]=n[A>>2],l=f+20|0,Pr(b,m+12|0,l),Er(l),n[f+32>>2]=n[A>>2],l=f+36|0,Pr(b,m+24|0,l),Er(l),n[f+48>>2]=n[A>>2],l=f+52|0,Pr(b,m+36|0,l),Er(l),n[f+64>>2]=n[A>>2],l=f+68|0,Pr(b,m+48|0,l),Er(l),n[f+80>>2]=n[A>>2],f=f+84|0,Pr(b,m+60|0,f),Er(f),ft=X}function mr(A,l){return A=A|0,l=l|0,l=wt(A|0,l|0,52)|0,xt()|0,l&15|0}function TA(A,l){return A=A|0,l=l|0,l=wt(A|0,l|0,45)|0,xt()|0,l&127|0}function Vo(A,l){A=A|0,l=l|0;var f=0,m=0,b=0,T=0,z=0,N=0;if(!(!0&(l&-16777216|0)==134217728)||(z=wt(A|0,l|0,45)|0,xt()|0,z=z&127,z>>>0>121))return l=0,l|0;f=wt(A|0,l|0,52)|0,xt()|0,f=f&15;do if(f|0){for(b=1,m=0;;){if(T=wt(A|0,l|0,(15-b|0)*3|0)|0,xt()|0,T=T&7,(T|0)!=0&(m^1))if((T|0)==1&(Re(z)|0)!=0){N=0,m=13;break}else m=1;if((T|0)==7){N=0,m=13;break}if(b>>>0<f>>>0)b=b+1|0;else{m=9;break}}if((m|0)==9){if((f|0)==15)N=1;else break;return N|0}else if((m|0)==13)return N|0}while(!1);for(;;){if(N=wt(A|0,l|0,(14-f|0)*3|0)|0,xt()|0,!((N&7|0)==7&!0)){N=0,m=13;break}if(f>>>0<14)f=f+1|0;else{N=1,m=13;break}}return(m|0)==13?N|0:0}function Uo(A,l,f,m){A=A|0,l=l|0,f=f|0,m=m|0;var b=0,T=0;if(T=wt(A|0,l|0,52)|0,xt()|0,T=T&15,f>>>0>15)return m=4,m|0;if((T|0)<(f|0))return m=12,m|0;if((T|0)==(f|0))return n[m>>2]=A,n[m+4>>2]=l,m=0,m|0;if(b=It(f|0,0,52)|0,b=b|A,A=xt()|0|l&-15728641,(T|0)>(f|0))do l=It(7,0,(14-f|0)*3|0)|0,f=f+1|0,b=l|b,A=xt()|0|A;while((f|0)<(T|0));return n[m>>2]=b,n[m+4>>2]=A,m=0,m|0}function ws(A,l,f,m){A=A|0,l=l|0,f=f|0,m=m|0;var b=0,T=0,z=0;if(T=wt(A|0,l|0,52)|0,xt()|0,T=T&15,!((f|0)<16&(T|0)<=(f|0)))return m=4,m|0;b=f-T|0,f=wt(A|0,l|0,45)|0,xt()|0;e:do if(!(Re(f&127)|0))f=gA(7,0,b,((b|0)<0)<<31>>31)|0,b=xt()|0;else{t:do if(T|0){for(f=1;z=It(7,0,(15-f|0)*3|0)|0,!!((z&A|0)==0&((xt()|0)&l|0)==0);)if(f>>>0<T>>>0)f=f+1|0;else break t;f=gA(7,0,b,((b|0)<0)<<31>>31)|0,b=xt()|0;break e}while(!1);f=gA(7,0,b,((b|0)<0)<<31>>31)|0,f=Ie(f|0,xt()|0,5,0)|0,f=C(f|0,xt()|0,-5,-1)|0,f=Z(f|0,xt()|0,6,0)|0,f=C(f|0,xt()|0,1,0)|0,b=xt()|0}while(!1);return z=m,n[z>>2]=f,n[z+4>>2]=b,z=0,z|0}function Ar(A,l){A=A|0,l=l|0;var f=0,m=0,b=0;if(b=wt(A|0,l|0,45)|0,xt()|0,!(Re(b&127)|0))return b=0,b|0;b=wt(A|0,l|0,52)|0,xt()|0,b=b&15;e:do if(!b)f=0;else for(m=1;;){if(f=wt(A|0,l|0,(15-m|0)*3|0)|0,xt()|0,f=f&7,f|0)break e;if(m>>>0<b>>>0)m=m+1|0;else{f=0;break}}while(!1);return b=(f|0)==0&1,b|0}function On(A,l,f,m){A=A|0,l=l|0,f=f|0,m=m|0;var b=0,T=0,z=0,N=0;if(z=ft,ft=ft+16|0,T=z,MA(T,A,l,f),l=T,A=n[l>>2]|0,l=n[l+4>>2]|0,(A|0)==0&(l|0)==0)return ft=z,0;b=0,f=0;do N=m+(b<<3)|0,n[N>>2]=A,n[N+4>>2]=l,b=C(b|0,f|0,1,0)|0,f=xt()|0,Rl(T),N=T,A=n[N>>2]|0,l=n[N+4>>2]|0;while(!((A|0)==0&(l|0)==0));return ft=z,0}function wo(A,l,f,m){return A=A|0,l=l|0,f=f|0,m=m|0,(m|0)<(f|0)?(f=l,m=A,Fi(f|0),m|0):(f=It(-1,-1,((m-f|0)*3|0)+3|0)|0,m=It(~f|0,~(xt()|0)|0,(15-m|0)*3|0)|0,f=~(xt()|0)&l,m=~m&A,Fi(f|0),m|0)}function Lr(A,l,f,m){A=A|0,l=l|0,f=f|0,m=m|0;var b=0;return b=wt(A|0,l|0,52)|0,xt()|0,b=b&15,(f|0)<16&(b|0)<=(f|0)?((b|0)<(f|0)&&(b=It(-1,-1,((f+-1-b|0)*3|0)+3|0)|0,b=It(~b|0,~(xt()|0)|0,(15-f|0)*3|0)|0,l=~(xt()|0)&l,A=~b&A),b=It(f|0,0,52)|0,f=l&-15728641|(xt()|0),n[m>>2]=A|b,n[m+4>>2]=f,m=0,m|0):(m=4,m|0)}function no(A,l,f,m){A=A|0,l=l|0,f=f|0,m=m|0;var b=0,T=0,z=0,N=0,X=0,te=0,ve=0,De=0,He=0,nt=0,st=0,gt=0,Ot=0,Ut=0,Mt=0,zt=0,Ft=0,Bi=0,hi=0,xi=0,bi=0;if((f|0)==0&(m|0)==0)return xi=0,xi|0;if(b=A,T=n[b>>2]|0,b=n[b+4>>2]|0,!0&(b&15728640|0)==0){if(!((m|0)>0|(m|0)==0&f>>>0>0)||(xi=l,n[xi>>2]=T,n[xi+4>>2]=b,(f|0)==1&(m|0)==0))return xi=0,xi|0;b=1;do Bi=A+(b<<3)|0,hi=n[Bi+4>>2]|0,xi=l+(b<<3)|0,n[xi>>2]=n[Bi>>2],n[xi+4>>2]=hi,b=b+1|0;while(0<(m|0)|(m|0)==0&b>>>0<f>>>0);return b=0,b|0}if(Ft=f<<3,hi=rs(Ft)|0,!hi)return xi=13,xi|0;if(I(hi|0,A|0,Ft|0)|0,Bi=S(f,8)|0,!Bi)return _(hi),xi=13,xi|0;e:do if(f|0){t:for(;;){b=hi,Ut=n[b>>2]|0,b=n[b+4>>2]|0,Mt=wt(Ut|0,b|0,52)|0,xt()|0,Mt=Mt&15,zt=Mt+-1|0,Ot=(f|0)>0;i:do if((Mt|0)!=0&Ot){if(nt=((f|0)<0)<<31>>31,st=It(zt|0,0,52)|0,gt=xt()|0,zt>>>0>15){if(!((Ut|0)==0&(b|0)==0)){xi=17;break t}for(T=0;;){if(T=T+1|0,(T|0)>=(f|0))break i;if(m=hi+(T<<3)|0,gt=n[m>>2]|0,m=n[m+4>>2]|0,!((gt|0)==0&(m|0)==0)){b=m,xi=17;break t}}}for(T=0,A=Ut,m=b;;){if(!((A|0)==0&(m|0)==0)){if(!(!0&(m&117440512|0)==0)){xi=22;break t}if(N=wt(A|0,m|0,52)|0,xt()|0,N=N&15,(N|0)<(zt|0)){b=12,xi=28;break t}if((N|0)!=(zt|0)&&(A=A|st,m=m&-15728641|gt,N>>>0>=Mt>>>0)){z=zt;do He=It(7,0,(14-z|0)*3|0)|0,z=z+1|0,A=He|A,m=xt()|0|m;while(z>>>0<N>>>0)}if(z=ot(A|0,m|0,f|0,nt|0)|0,xt()|0,te=Bi+(z<<3)|0,N=te,X=n[N>>2]|0,N=n[N+4>>2]|0,(X|0)==0&(N|0)==0)z=te;else for(He=0;;){if((He|0)>(f|0)){xi=32;break t}if((X|0)==(A|0)&(N&-117440513|0)==(m|0)){ve=wt(X|0,N|0,56)|0,xt()|0,ve=ve&7,De=ve+1|0,bi=wt(X|0,N|0,45)|0,xt()|0;n:do if(!(Re(bi&127)|0))N=7;else{if(X=wt(X|0,N|0,52)|0,xt()|0,X=X&15,!X){N=6;break}for(N=1;;){if(bi=It(7,0,(15-N|0)*3|0)|0,!((bi&A|0)==0&((xt()|0)&m|0)==0)){N=7;break n}if(N>>>0<X>>>0)N=N+1|0;else{N=6;break}}}while(!1);if((ve+2|0)>>>0>N>>>0){xi=42;break t}bi=It(De|0,0,56)|0,m=xt()|0|m&-117440513,De=te,n[De>>2]=0,n[De+4>>2]=0,A=bi|A}else z=(z+1|0)%(f|0)|0;if(te=Bi+(z<<3)|0,N=te,X=n[N>>2]|0,N=n[N+4>>2]|0,(X|0)==0&(N|0)==0){z=te;break}else He=He+1|0}bi=z,n[bi>>2]=A,n[bi+4>>2]=m}if(T=T+1|0,(T|0)>=(f|0))break i;m=hi+(T<<3)|0,A=n[m>>2]|0,m=n[m+4>>2]|0}}while(!1);if((f+5|0)>>>0<11){xi=85;break}if(gt=S((f|0)/6|0,8)|0,!gt){xi=49;break}i:do if(Ot){He=0,De=0;do{if(N=Bi+(He<<3)|0,m=N,T=n[m>>2]|0,m=n[m+4>>2]|0,!((T|0)==0&(m|0)==0)){X=wt(T|0,m|0,56)|0,xt()|0,X=X&7,A=X+1|0,te=m&-117440513,bi=wt(T|0,m|0,45)|0,xt()|0;n:do if(Re(bi&127)|0){if(ve=wt(T|0,m|0,52)|0,xt()|0,ve=ve&15,ve|0)for(z=1;;){if(bi=It(7,0,(15-z|0)*3|0)|0,!((T&bi|0)==0&(te&(xt()|0)|0)==0))break n;if(z>>>0<ve>>>0)z=z+1|0;else break}m=It(A|0,0,56)|0,T=m|T,m=xt()|0|te,A=N,n[A>>2]=T,n[A+4>>2]=m,A=X+2|0}while(!1);(A|0)==7&&(bi=gt+(De<<3)|0,n[bi>>2]=T,n[bi+4>>2]=m&-117440513,De=De+1|0)}He=He+1|0}while((He|0)!=(f|0));if(Ot){if(He=((f|0)<0)<<31>>31,nt=It(zt|0,0,52)|0,st=xt()|0,zt>>>0>15){if(!((Ut|0)==0&(b|0)==0)){b=4,xi=84;break t}for(b=0;;){if(b=b+1|0,(b|0)>=(f|0)){T=0,b=De;break i}if(bi=hi+(b<<3)|0,!((n[bi>>2]|0)==0&(n[bi+4>>2]|0)==0)){b=4,xi=84;break t}}}for(ve=0,T=0,te=Ut;;){do if(!((te|0)==0&(b|0)==0)){if(N=wt(te|0,b|0,52)|0,xt()|0,N=N&15,(N|0)<(zt|0)){b=12,xi=84;break t}do if((N|0)==(zt|0))m=te,N=b;else{if(m=te|nt,A=b&-15728641|st,N>>>0<Mt>>>0){N=A;break}z=zt;do bi=It(7,0,(14-z|0)*3|0)|0,z=z+1|0,m=bi|m,A=xt()|0|A;while(z>>>0<N>>>0);N=A}while(!1);for(z=ot(m|0,N|0,f|0,He|0)|0,xt()|0,A=0;;){if((A|0)>(f|0)){xi=77;break t}if(bi=Bi+(z<<3)|0,X=n[bi+4>>2]|0,(X&-117440513|0)==(N|0)&&(n[bi>>2]|0)==(m|0)){xi=79;break}if(z=(z+1|0)%(f|0)|0,bi=Bi+(z<<3)|0,(n[bi>>2]|0)==(m|0)&&(n[bi+4>>2]|0)==(N|0))break;A=A+1|0}if((xi|0)==79&&(xi=0,!0&(X&117440512|0)==100663296))break;bi=l+(T<<3)|0,n[bi>>2]=te,n[bi+4>>2]=b,T=T+1|0}while(!1);if(b=ve+1|0,(b|0)>=(f|0)){b=De;break i}bi=hi+(b<<3)|0,ve=b,te=n[bi>>2]|0,b=n[bi+4>>2]|0}}else T=0,b=De}else T=0,b=0;while(!1);if(M(Bi|0,0,Ft|0)|0,I(hi|0,gt|0,b<<3|0)|0,_(gt),b)l=l+(T<<3)|0,f=b;else break e}if((xi|0)==17)!0&(b&117440512|0)==0?(b=4,xi=28):xi=22;else if((xi|0)==32)nn(23313,22674,362,22684);else{if((xi|0)==42)return _(hi),_(Bi),bi=10,bi|0;if((xi|0)==49)return _(hi),_(Bi),bi=13,bi|0;if((xi|0)==77)nn(23313,22674,462,22684);else{if((xi|0)==84)return _(gt),_(hi),_(Bi),bi=b,bi|0;if((xi|0)==85){I(l|0,hi|0,f<<3|0)|0;break}}}if((xi|0)==22)return _(hi),_(Bi),bi=5,bi|0;if((xi|0)==28)return _(hi),_(Bi),bi=b,bi|0}while(!1);return _(hi),_(Bi),bi=0,bi|0}function iA(A,l,f,m,b,T,z){A=A|0,l=l|0,f=f|0,m=m|0,b=b|0,T=T|0,z=z|0;var N=0,X=0,te=0,ve=0,De=0,He=0,nt=0,st=0,gt=0;if(gt=ft,ft=ft+16|0,st=gt,!((f|0)>0|(f|0)==0&l>>>0>0))return st=0,ft=gt,st|0;if((z|0)>=16)return st=12,ft=gt,st|0;He=0,nt=0,De=0,N=0;e:for(;;){if(te=A+(He<<3)|0,X=n[te>>2]|0,te=n[te+4>>2]|0,ve=wt(X|0,te|0,52)|0,xt()|0,(ve&15|0)>(z|0)){N=12,X=11;break}if(MA(st,X,te,z),ve=st,te=n[ve>>2]|0,ve=n[ve+4>>2]|0,(te|0)==0&(ve|0)==0)X=De;else{X=De;do{if(!((N|0)<(T|0)|(N|0)==(T|0)&X>>>0<b>>>0)){X=10;break e}De=m+(X<<3)|0,n[De>>2]=te,n[De+4>>2]=ve,X=C(X|0,N|0,1,0)|0,N=xt()|0,Rl(st),De=st,te=n[De>>2]|0,ve=n[De+4>>2]|0}while(!((te|0)==0&(ve|0)==0))}if(He=C(He|0,nt|0,1,0)|0,nt=xt()|0,(nt|0)<(f|0)|(nt|0)==(f|0)&He>>>0<l>>>0)De=X;else{N=0,X=11;break}}return(X|0)==10?(st=14,ft=gt,st|0):(X|0)==11?(ft=gt,N|0):0}function _r(A,l,f,m,b){A=A|0,l=l|0,f=f|0,m=m|0,b=b|0;var T=0,z=0,N=0,X=0,te=0,ve=0,De=0,He=0;He=ft,ft=ft+16|0,De=He;e:do if((f|0)>0|(f|0)==0&l>>>0>0){for(te=0,z=0,T=0,ve=0;;){if(X=A+(te<<3)|0,N=n[X>>2]|0,X=n[X+4>>2]|0,!((N|0)==0&(X|0)==0)&&(X=(ws(N,X,m,De)|0)==0,N=De,z=C(n[N>>2]|0,n[N+4>>2]|0,z|0,T|0)|0,T=xt()|0,!X)){T=12;break}if(te=C(te|0,ve|0,1,0)|0,ve=xt()|0,!((ve|0)<(f|0)|(ve|0)==(f|0)&te>>>0<l>>>0))break e}return ft=He,T|0}else z=0,T=0;while(!1);return n[b>>2]=z,n[b+4>>2]=T,b=0,ft=He,b|0}function Kr(A,l){return A=A|0,l=l|0,l=wt(A|0,l|0,52)|0,xt()|0,l&1|0}function Qs(A,l){A=A|0,l=l|0;var f=0,m=0,b=0;if(b=wt(A|0,l|0,52)|0,xt()|0,b=b&15,!b)return b=0,b|0;for(m=1;;){if(f=wt(A|0,l|0,(15-m|0)*3|0)|0,xt()|0,f=f&7,f|0){m=5;break}if(m>>>0<b>>>0)m=m+1|0;else{f=0,m=5;break}}return(m|0)==5?f|0:0}function kA(A,l){A=A|0,l=l|0;var f=0,m=0,b=0,T=0,z=0,N=0,X=0;if(X=wt(A|0,l|0,52)|0,xt()|0,X=X&15,!X)return N=l,X=A,Fi(N|0),X|0;for(N=1,f=0;;){T=(15-N|0)*3|0,m=It(7,0,T|0)|0,b=xt()|0,z=wt(A|0,l|0,T|0)|0,xt()|0,T=It(La(z&7)|0,0,T|0)|0,z=xt()|0,A=T|A&~m,l=z|l&~b;e:do if(!f)if((T&m|0)==0&(z&b|0)==0)f=0;else if(m=wt(A|0,l|0,52)|0,xt()|0,m=m&15,!m)f=1;else{f=1;t:for(;;){switch(z=wt(A|0,l|0,(15-f|0)*3|0)|0,xt()|0,z&7){case 1:break t;case 0:break;default:{f=1;break e}}if(f>>>0<m>>>0)f=f+1|0;else{f=1;break e}}for(f=1;;)if(z=(15-f|0)*3|0,b=wt(A|0,l|0,z|0)|0,xt()|0,T=It(7,0,z|0)|0,l=l&~(xt()|0),z=It(La(b&7)|0,0,z|0)|0,A=A&~T|z,l=l|(xt()|0),f>>>0<m>>>0)f=f+1|0;else{f=1;break}}while(!1);if(N>>>0<X>>>0)N=N+1|0;else break}return Fi(l|0),A|0}function ro(A,l){A=A|0,l=l|0;var f=0,m=0,b=0,T=0,z=0;if(m=wt(A|0,l|0,52)|0,xt()|0,m=m&15,!m)return f=l,m=A,Fi(f|0),m|0;for(f=1;T=(15-f|0)*3|0,z=wt(A|0,l|0,T|0)|0,xt()|0,b=It(7,0,T|0)|0,l=l&~(xt()|0),T=It(La(z&7)|0,0,T|0)|0,A=T|A&~b,l=xt()|0|l,f>>>0<m>>>0;)f=f+1|0;return Fi(l|0),A|0}function dA(A,l){A=A|0,l=l|0;var f=0,m=0,b=0,T=0,z=0,N=0,X=0;if(X=wt(A|0,l|0,52)|0,xt()|0,X=X&15,!X)return N=l,X=A,Fi(N|0),X|0;for(N=1,f=0;;){T=(15-N|0)*3|0,m=It(7,0,T|0)|0,b=xt()|0,z=wt(A|0,l|0,T|0)|0,xt()|0,T=It(yo(z&7)|0,0,T|0)|0,z=xt()|0,A=T|A&~m,l=z|l&~b;e:do if(!f)if((T&m|0)==0&(z&b|0)==0)f=0;else if(m=wt(A|0,l|0,52)|0,xt()|0,m=m&15,!m)f=1;else{f=1;t:for(;;){switch(z=wt(A|0,l|0,(15-f|0)*3|0)|0,xt()|0,z&7){case 1:break t;case 0:break;default:{f=1;break e}}if(f>>>0<m>>>0)f=f+1|0;else{f=1;break e}}for(f=1;;)if(b=(15-f|0)*3|0,T=It(7,0,b|0)|0,z=l&~(xt()|0),l=wt(A|0,l|0,b|0)|0,xt()|0,l=It(yo(l&7)|0,0,b|0)|0,A=A&~T|l,l=z|(xt()|0),f>>>0<m>>>0)f=f+1|0;else{f=1;break}}while(!1);if(N>>>0<X>>>0)N=N+1|0;else break}return Fi(l|0),A|0}function wa(A,l){A=A|0,l=l|0;var f=0,m=0,b=0,T=0,z=0;if(m=wt(A|0,l|0,52)|0,xt()|0,m=m&15,!m)return f=l,m=A,Fi(f|0),m|0;for(f=1;z=(15-f|0)*3|0,T=It(7,0,z|0)|0,b=l&~(xt()|0),l=wt(A|0,l|0,z|0)|0,xt()|0,l=It(yo(l&7)|0,0,z|0)|0,A=l|A&~T,l=xt()|0|b,f>>>0<m>>>0;)f=f+1|0;return Fi(l|0),A|0}function Ss(A,l){A=A|0,l=l|0;var f=0,m=0,b=0,T=0,z=0,N=0,X=0,te=0,ve=0;if(X=ft,ft=ft+64|0,N=X+40|0,m=X+24|0,b=X+12|0,T=X,It(l|0,0,52)|0,f=xt()|0|134225919,!l)return(n[A+4>>2]|0)>2||(n[A+8>>2]|0)>2||(n[A+12>>2]|0)>2?(z=0,N=0,Fi(z|0),ft=X,N|0):(It(kt(A)|0,0,45)|0,z=xt()|0|f,N=-1,Fi(z|0),ft=X,N|0);if(n[N>>2]=n[A>>2],n[N+4>>2]=n[A+4>>2],n[N+8>>2]=n[A+8>>2],n[N+12>>2]=n[A+12>>2],z=N+4|0,(l|0)>0)for(A=-1;n[m>>2]=n[z>>2],n[m+4>>2]=n[z+4>>2],n[m+8>>2]=n[z+8>>2],l&1?(fA(z),n[b>>2]=n[z>>2],n[b+4>>2]=n[z+4>>2],n[b+8>>2]=n[z+8>>2],vo(b)):(Ga(z),n[b>>2]=n[z>>2],n[b+4>>2]=n[z+4>>2],n[b+8>>2]=n[z+8>>2],Ns(b)),eA(m,b,T),Er(T),ve=(15-l|0)*3|0,te=It(7,0,ve|0)|0,f=f&~(xt()|0),ve=It(eo(T)|0,0,ve|0)|0,A=ve|A&~te,f=xt()|0|f,(l|0)>1;)l=l+-1|0;else A=-1;e:do if((n[z>>2]|0)<=2&&(n[N+8>>2]|0)<=2&&(n[N+12>>2]|0)<=2){if(m=kt(N)|0,l=It(m|0,0,45)|0,l=l|A,A=xt()|0|f&-1040385,T=ri(N)|0,!(Re(m)|0)){if((T|0)<=0)break;for(b=0;;){if(m=wt(l|0,A|0,52)|0,xt()|0,m=m&15,m)for(f=1;ve=(15-f|0)*3|0,N=wt(l|0,A|0,ve|0)|0,xt()|0,te=It(7,0,ve|0)|0,A=A&~(xt()|0),ve=It(La(N&7)|0,0,ve|0)|0,l=l&~te|ve,A=A|(xt()|0),f>>>0<m>>>0;)f=f+1|0;if(b=b+1|0,(b|0)==(T|0))break e}}b=wt(l|0,A|0,52)|0,xt()|0,b=b&15;t:do if(b){f=1;i:for(;;){switch(ve=wt(l|0,A|0,(15-f|0)*3|0)|0,xt()|0,ve&7){case 1:break i;case 0:break;default:break t}if(f>>>0<b>>>0)f=f+1|0;else break t}if(Xi(m,n[N>>2]|0)|0)for(f=1;N=(15-f|0)*3|0,te=It(7,0,N|0)|0,ve=A&~(xt()|0),A=wt(l|0,A|0,N|0)|0,xt()|0,A=It(yo(A&7)|0,0,N|0)|0,l=l&~te|A,A=ve|(xt()|0),f>>>0<b>>>0;)f=f+1|0;else for(f=1;ve=(15-f|0)*3|0,N=wt(l|0,A|0,ve|0)|0,xt()|0,te=It(7,0,ve|0)|0,A=A&~(xt()|0),ve=It(La(N&7)|0,0,ve|0)|0,l=l&~te|ve,A=A|(xt()|0),f>>>0<b>>>0;)f=f+1|0}while(!1);if((T|0)>0){f=0;do l=kA(l,A)|0,A=xt()|0,f=f+1|0;while((f|0)!=(T|0))}}else l=0,A=0;while(!1);return te=A,ve=l,Fi(te|0),ft=X,ve|0}function ms(A){return A=A|0,(A|0)%2|0|0}function ha(A,l,f){A=A|0,l=l|0,f=f|0;var m=0,b=0;return b=ft,ft=ft+16|0,m=b,l>>>0>15?(m=4,ft=b,m|0):(n[A+4>>2]&2146435072|0)==2146435072||(n[A+8+4>>2]&2146435072|0)==2146435072?(m=3,ft=b,m|0):(Ha(A,l,m),l=Ss(m,l)|0,m=xt()|0,n[f>>2]=l,n[f+4>>2]=m,(l|0)==0&(m|0)==0&&nn(23313,22674,786,22697),m=0,ft=b,m|0)}function Qa(A,l,f){A=A|0,l=l|0,f=f|0;var m=0,b=0,T=0,z=0;if(b=f+4|0,T=wt(A|0,l|0,52)|0,xt()|0,T=T&15,z=wt(A|0,l|0,45)|0,xt()|0,m=(T|0)==0,Re(z&127)|0){if(m)return z=1,z|0;m=1}else{if(m)return z=0,z|0;!(n[b>>2]|0)&&!(n[f+8>>2]|0)?m=(n[f+12>>2]|0)!=0&1:m=1}for(f=1;f&1?vo(b):Ns(b),z=wt(A|0,l|0,(15-f|0)*3|0)|0,xt()|0,Ts(b,z&7),f>>>0<T>>>0;)f=f+1|0;return m|0}function br(A,l,f){A=A|0,l=l|0,f=f|0;var m=0,b=0,T=0,z=0,N=0,X=0,te=0,ve=0;if(ve=ft,ft=ft+16|0,X=ve,te=wt(A|0,l|0,45)|0,xt()|0,te=te&127,te>>>0>121)return n[f>>2]=0,n[f+4>>2]=0,n[f+8>>2]=0,n[f+12>>2]=0,te=5,ft=ve,te|0;e:do if(Re(te)|0&&(T=wt(A|0,l|0,52)|0,xt()|0,T=T&15,(T|0)!=0)){m=1;t:for(;;){switch(N=wt(A|0,l|0,(15-m|0)*3|0)|0,xt()|0,N&7){case 5:break t;case 0:break;default:{m=l;break e}}if(m>>>0<T>>>0)m=m+1|0;else{m=l;break e}}for(b=1,m=l;l=(15-b|0)*3|0,z=It(7,0,l|0)|0,N=m&~(xt()|0),m=wt(A|0,m|0,l|0)|0,xt()|0,m=It(yo(m&7)|0,0,l|0)|0,A=A&~z|m,m=N|(xt()|0),b>>>0<T>>>0;)b=b+1|0}else m=l;while(!1);if(N=7696+(te*28|0)|0,n[f>>2]=n[N>>2],n[f+4>>2]=n[N+4>>2],n[f+8>>2]=n[N+8>>2],n[f+12>>2]=n[N+12>>2],!(Qa(A,m,f)|0))return te=0,ft=ve,te|0;if(z=f+4|0,n[X>>2]=n[z>>2],n[X+4>>2]=n[z+4>>2],n[X+8>>2]=n[z+8>>2],T=wt(A|0,m|0,52)|0,xt()|0,N=T&15,T&1?(Ns(z),T=N+1|0):T=N,!(Re(te)|0))m=0;else{e:do if(!N)m=0;else for(l=1;;){if(b=wt(A|0,m|0,(15-l|0)*3|0)|0,xt()|0,b=b&7,b|0){m=b;break e}if(l>>>0<N>>>0)l=l+1|0;else{m=0;break}}while(!1);m=(m|0)==4&1}if(!(Aa(f,T,m,0)|0))(T|0)!=(N|0)&&(n[z>>2]=n[X>>2],n[z+4>>2]=n[X+4>>2],n[z+8>>2]=n[X+8>>2]);else{if(Re(te)|0)do;while(Aa(f,T,0,0)|0);(T|0)!=(N|0)&&Ga(z)}return te=0,ft=ve,te|0}function is(A,l,f){A=A|0,l=l|0,f=f|0;var m=0,b=0,T=0;return T=ft,ft=ft+16|0,m=T,b=br(A,l,m)|0,b|0?(ft=T,b|0):(b=wt(A|0,l|0,52)|0,xt()|0,Xr(m,b&15,f),b=0,ft=T,b|0)}function zr(A,l,f){A=A|0,l=l|0,f=f|0;var m=0,b=0,T=0,z=0,N=0;if(z=ft,ft=ft+16|0,T=z,m=br(A,l,T)|0,m|0)return T=m,ft=z,T|0;m=wt(A|0,l|0,45)|0,xt()|0,m=(Re(m&127)|0)==0,b=wt(A|0,l|0,52)|0,xt()|0,b=b&15;e:do if(!m){if(b|0)for(m=1;;){if(N=It(7,0,(15-m|0)*3|0)|0,!((N&A|0)==0&((xt()|0)&l|0)==0))break e;if(m>>>0<b>>>0)m=m+1|0;else break}return No(T,b,0,5,f),N=0,ft=z,N|0}while(!1);return Qr(T,b,0,6,f),N=0,ft=z,N|0}function pA(A,l,f){A=A|0,l=l|0,f=f|0;var m=0,b=0,T=0;if(b=wt(A|0,l|0,45)|0,xt()|0,!(Re(b&127)|0))return b=2,n[f>>2]=b,0;if(b=wt(A|0,l|0,52)|0,xt()|0,b=b&15,!b)return b=5,n[f>>2]=b,0;for(m=1;;){if(T=It(7,0,(15-m|0)*3|0)|0,!((T&A|0)==0&((xt()|0)&l|0)==0)){m=2,A=6;break}if(m>>>0<b>>>0)m=m+1|0;else{m=5,A=6;break}}return(A|0)==6&&(n[f>>2]=m),0}function Ba(A,l,f){A=A|0,l=l|0,f=f|0;var m=0,b=0,T=0,z=0,N=0,X=0,te=0,ve=0,De=0;De=ft,ft=ft+128|0,te=De+112|0,T=De+96|0,ve=De,b=wt(A|0,l|0,52)|0,xt()|0,N=b&15,n[te>>2]=N,z=wt(A|0,l|0,45)|0,xt()|0,z=z&127;e:do if(Re(z)|0){if(N|0)for(m=1;;){if(X=It(7,0,(15-m|0)*3|0)|0,!((X&A|0)==0&((xt()|0)&l|0)==0)){b=0;break e}if(m>>>0<N>>>0)m=m+1|0;else break}if(b&1)b=1;else return X=It(N+1|0,0,52)|0,ve=xt()|0|l&-15728641,te=It(7,0,(14-N|0)*3|0)|0,ve=Ba((X|A)&~te,ve&~(xt()|0),f)|0,ft=De,ve|0}else b=0;while(!1);if(m=br(A,l,T)|0,!m){b?(rr(T,te,ve),X=5):(xa(T,te,ve),X=6);e:do if(Re(z)|0)if(!N)A=5;else for(m=1;;){if(z=It(7,0,(15-m|0)*3|0)|0,!((z&A|0)==0&((xt()|0)&l|0)==0)){A=2;break e}if(m>>>0<N>>>0)m=m+1|0;else{A=5;break}}else A=2;while(!1);M(f|0,-1,A<<2|0)|0;e:do if(b)for(T=0;;){if(z=ve+(T<<4)|0,Hr(z,n[te>>2]|0)|0,z=n[z>>2]|0,N=n[f>>2]|0,(N|0)==-1|(N|0)==(z|0))m=f;else{b=0;do{if(b=b+1|0,b>>>0>=A>>>0){m=1;break e}m=f+(b<<2)|0,N=n[m>>2]|0}while(!((N|0)==-1|(N|0)==(z|0)))}if(n[m>>2]=z,T=T+1|0,T>>>0>=X>>>0){m=0;break}}else for(T=0;;){if(z=ve+(T<<4)|0,Aa(z,n[te>>2]|0,0,1)|0,z=n[z>>2]|0,N=n[f>>2]|0,(N|0)==-1|(N|0)==(z|0))m=f;else{b=0;do{if(b=b+1|0,b>>>0>=A>>>0){m=1;break e}m=f+(b<<2)|0,N=n[m>>2]|0}while(!((N|0)==-1|(N|0)==(z|0)))}if(n[m>>2]=z,T=T+1|0,T>>>0>=X>>>0){m=0;break}}while(!1)}return ve=m,ft=De,ve|0}function Bs(){return 12}function qs(A,l){A=A|0,l=l|0;var f=0,m=0,b=0,T=0,z=0,N=0,X=0;if(A>>>0>15)return N=4,N|0;if(It(A|0,0,52)|0,N=xt()|0|134225919,!A){f=0,m=0;do Re(m)|0&&(It(m|0,0,45)|0,z=N|(xt()|0),A=l+(f<<3)|0,n[A>>2]=-1,n[A+4>>2]=z,f=f+1|0),m=m+1|0;while((m|0)!=122);return f=0,f|0}f=0,z=0;do{if(Re(z)|0){for(It(z|0,0,45)|0,m=1,b=-1,T=N|(xt()|0);X=It(7,0,(15-m|0)*3|0)|0,b=b&~X,T=T&~(xt()|0),(m|0)!=(A|0);)m=m+1|0;X=l+(f<<3)|0,n[X>>2]=b,n[X+4>>2]=T,f=f+1|0}z=z+1|0}while((z|0)!=122);return f=0,f|0}function so(A,l,f,m){A=A|0,l=l|0,f=f|0,m=m|0;var b=0,T=0,z=0,N=0,X=0,te=0,ve=0,De=0,He=0,nt=0,st=0,gt=0,Ot=0,Ut=0,Mt=0;if(Mt=ft,ft=ft+16|0,Ot=Mt,Ut=wt(A|0,l|0,52)|0,xt()|0,Ut=Ut&15,f>>>0>15)return Ut=4,ft=Mt,Ut|0;if((Ut|0)<(f|0))return Ut=12,ft=Mt,Ut|0;if((Ut|0)!=(f|0))if(T=It(f|0,0,52)|0,T=T|A,N=xt()|0|l&-15728641,(Ut|0)>(f|0)){X=f;do gt=It(7,0,(14-X|0)*3|0)|0,X=X+1|0,T=gt|T,N=xt()|0|N;while((X|0)<(Ut|0));gt=T}else gt=T;else gt=A,N=l;st=wt(gt|0,N|0,45)|0,xt()|0;e:do if(Re(st&127)|0){if(X=wt(gt|0,N|0,52)|0,xt()|0,X=X&15,X|0)for(T=1;;){if(st=It(7,0,(15-T|0)*3|0)|0,!((st&gt|0)==0&((xt()|0)&N|0)==0)){te=33;break e}if(T>>>0<X>>>0)T=T+1|0;else break}if(st=m,n[st>>2]=0,n[st+4>>2]=0,(Ut|0)>(f|0)){for(st=l&-15728641,nt=Ut;;){if(He=nt,nt=nt+-1|0,nt>>>0>15|(Ut|0)<(nt|0)){te=19;break}if((Ut|0)!=(nt|0))if(T=It(nt|0,0,52)|0,T=T|A,X=xt()|0|st,(Ut|0)<(He|0))De=T;else{te=nt;do De=It(7,0,(14-te|0)*3|0)|0,te=te+1|0,T=De|T,X=xt()|0|X;while((te|0)<(Ut|0));De=T}else De=A,X=l;if(ve=wt(De|0,X|0,45)|0,xt()|0,!(Re(ve&127)|0))T=0;else{ve=wt(De|0,X|0,52)|0,xt()|0,ve=ve&15;t:do if(!ve)T=0;else for(te=1;;){if(T=wt(De|0,X|0,(15-te|0)*3|0)|0,xt()|0,T=T&7,T|0)break t;if(te>>>0<ve>>>0)te=te+1|0;else{T=0;break}}while(!1);T=(T|0)==0&1}if(X=wt(A|0,l|0,(15-He|0)*3|0)|0,xt()|0,X=X&7,(X|0)==7){b=5,te=42;break}if(T=(T|0)!=0,(X|0)==1&T){b=5,te=42;break}if(De=X+(((X|0)!=0&T)<<31>>31)|0,De|0&&(te=Ut-He|0,te=gA(7,0,te,((te|0)<0)<<31>>31)|0,ve=xt()|0,T?(T=Ie(te|0,ve|0,5,0)|0,T=C(T|0,xt()|0,-5,-1)|0,T=Z(T|0,xt()|0,6,0)|0,T=C(T|0,xt()|0,1,0)|0,X=xt()|0):(T=te,X=ve),He=De+-1|0,He=Ie(te|0,ve|0,He|0,((He|0)<0)<<31>>31|0)|0,He=C(T|0,X|0,He|0,xt()|0)|0,De=xt()|0,ve=m,ve=C(He|0,De|0,n[ve>>2]|0,n[ve+4>>2]|0)|0,De=xt()|0,He=m,n[He>>2]=ve,n[He+4>>2]=De),(nt|0)<=(f|0)){te=37;break}}if((te|0)==19)nn(23313,22674,1099,22710);else if((te|0)==37){z=m,b=n[z+4>>2]|0,z=n[z>>2]|0;break}else if((te|0)==42)return ft=Mt,b|0}else b=0,z=0}else te=33;while(!1);e:do if((te|0)==33)if(st=m,n[st>>2]=0,n[st+4>>2]=0,(Ut|0)>(f|0)){for(T=Ut;;){if(b=wt(A|0,l|0,(15-T|0)*3|0)|0,xt()|0,b=b&7,(b|0)==7){b=5;break}if(z=Ut-T|0,z=gA(7,0,z,((z|0)<0)<<31>>31)|0,b=Ie(z|0,xt()|0,b|0,0)|0,z=xt()|0,st=m,z=C(n[st>>2]|0,n[st+4>>2]|0,b|0,z|0)|0,b=xt()|0,st=m,n[st>>2]=z,n[st+4>>2]=b,T=T+-1|0,(T|0)<=(f|0))break e}return ft=Mt,b|0}else b=0,z=0;while(!1);return ws(gt,N,Ut,Ot)|0&&nn(23313,22674,1063,22725),Ut=Ot,Ot=n[Ut+4>>2]|0,((b|0)>-1|(b|0)==-1&z>>>0>4294967295)&((Ot|0)>(b|0)|((Ot|0)==(b|0)?(n[Ut>>2]|0)>>>0>z>>>0:0))?(Ut=0,ft=Mt,Ut|0):(nn(23313,22674,1139,22710),0)}function So(A,l,f,m,b,T){A=A|0,l=l|0,f=f|0,m=m|0,b=b|0,T=T|0;var z=0,N=0,X=0,te=0,ve=0,De=0,He=0,nt=0,st=0,gt=0;if(De=ft,ft=ft+16|0,z=De,b>>>0>15)return T=4,ft=De,T|0;if(N=wt(f|0,m|0,52)|0,xt()|0,N=N&15,(N|0)>(b|0))return T=12,ft=De,T|0;if(ws(f,m,b,z)|0&&nn(23313,22674,1063,22725),ve=z,te=n[ve+4>>2]|0,!(((l|0)>-1|(l|0)==-1&A>>>0>4294967295)&((te|0)>(l|0)|((te|0)==(l|0)?(n[ve>>2]|0)>>>0>A>>>0:0))))return T=2,ft=De,T|0;ve=b-N|0,b=It(b|0,0,52)|0,X=xt()|0|m&-15728641,te=T,n[te>>2]=b|f,n[te+4>>2]=X,te=wt(f|0,m|0,45)|0,xt()|0;e:do if(Re(te&127)|0){if(N|0)for(z=1;;){if(te=It(7,0,(15-z|0)*3|0)|0,!((te&f|0)==0&((xt()|0)&m|0)==0))break e;if(z>>>0<N>>>0)z=z+1|0;else break}if((ve|0)<1)return T=0,ft=De,T|0;for(te=N^15,m=-1,X=1,z=1;;){N=ve-X|0,N=gA(7,0,N,((N|0)<0)<<31>>31)|0,f=xt()|0;do if(z)if(z=Ie(N|0,f|0,5,0)|0,z=C(z|0,xt()|0,-5,-1)|0,z=Z(z|0,xt()|0,6,0)|0,b=xt()|0,(l|0)>(b|0)|(l|0)==(b|0)&A>>>0>z>>>0){l=C(A|0,l|0,-1,-1)|0,l=E(l|0,xt()|0,z|0,b|0)|0,z=xt()|0,He=T,st=n[He>>2]|0,He=n[He+4>>2]|0,gt=(te+m|0)*3|0,nt=It(7,0,gt|0)|0,He=He&~(xt()|0),m=Z(l|0,z|0,N|0,f|0)|0,A=xt()|0,b=C(m|0,A|0,2,0)|0,gt=It(b|0,xt()|0,gt|0)|0,He=xt()|0|He,b=T,n[b>>2]=gt|st&~nt,n[b+4>>2]=He,A=Ie(m|0,A|0,N|0,f|0)|0,A=E(l|0,z|0,A|0,xt()|0)|0,z=0,l=xt()|0;break}else{gt=T,nt=n[gt>>2]|0,gt=n[gt+4>>2]|0,st=It(7,0,(te+m|0)*3|0)|0,gt=gt&~(xt()|0),z=T,n[z>>2]=nt&~st,n[z+4>>2]=gt,z=1;break}else nt=T,b=n[nt>>2]|0,nt=n[nt+4>>2]|0,m=(te+m|0)*3|0,He=It(7,0,m|0)|0,nt=nt&~(xt()|0),gt=Z(A|0,l|0,N|0,f|0)|0,z=xt()|0,m=It(gt|0,z|0,m|0)|0,nt=xt()|0|nt,st=T,n[st>>2]=m|b&~He,n[st+4>>2]=nt,z=Ie(gt|0,z|0,N|0,f|0)|0,A=E(A|0,l|0,z|0,xt()|0)|0,z=0,l=xt()|0;while(!1);if((ve|0)>(X|0))m=~X,X=X+1|0;else{l=0;break}}return ft=De,l|0}while(!1);if((ve|0)<1)return gt=0,ft=De,gt|0;for(b=N^15,z=1;;)if(st=ve-z|0,st=gA(7,0,st,((st|0)<0)<<31>>31)|0,gt=xt()|0,X=T,f=n[X>>2]|0,X=n[X+4>>2]|0,N=(b-z|0)*3|0,m=It(7,0,N|0)|0,X=X&~(xt()|0),He=Z(A|0,l|0,st|0,gt|0)|0,nt=xt()|0,N=It(He|0,nt|0,N|0)|0,X=xt()|0|X,te=T,n[te>>2]=N|f&~m,n[te+4>>2]=X,gt=Ie(He|0,nt|0,st|0,gt|0)|0,A=E(A|0,l|0,gt|0,xt()|0)|0,l=xt()|0,(ve|0)<=(z|0)){l=0;break}else z=z+1|0;return ft=De,l|0}function MA(A,l,f,m){A=A|0,l=l|0,f=f|0,m=m|0;var b=0,T=0;b=wt(l|0,f|0,52)|0,xt()|0,b=b&15,(l|0)==0&(f|0)==0|((m|0)>15|(b|0)>(m|0))?(m=-1,b=-1,l=0,f=0):(T=wo(l,f,b+1|0,m)|0,f=(xt()|0)&-15728641,l=It(m|0,0,52)|0,l=T|l,f=f|(xt()|0),T=(Ar(l,f)|0)==0,m=T?-1:m),T=A,n[T>>2]=l,n[T+4>>2]=f,n[A+8>>2]=b,n[A+12>>2]=m}function Rl(A){A=A|0;var l=0,f=0,m=0,b=0,T=0,z=0,N=0,X=0,te=0;if(f=A,l=n[f>>2]|0,f=n[f+4>>2]|0,!((l|0)==0&(f|0)==0)&&(m=wt(l|0,f|0,52)|0,xt()|0,m=m&15,N=It(1,0,(m^15)*3|0)|0,l=C(N|0,xt()|0,l|0,f|0)|0,f=xt()|0,N=A,n[N>>2]=l,n[N+4>>2]=f,N=A+8|0,z=n[N>>2]|0,!((m|0)<(z|0)))){for(X=A+12|0,T=m;;){if((T|0)==(z|0)){m=5;break}if(te=(T|0)==(n[X>>2]|0),b=(15-T|0)*3|0,m=wt(l|0,f|0,b|0)|0,xt()|0,m=m&7,te&((m|0)==1&!0)){m=7;break}if(!((m|0)==7&!0)){m=10;break}if(te=It(1,0,b|0)|0,l=C(l|0,f|0,te|0,xt()|0)|0,f=xt()|0,te=A,n[te>>2]=l,n[te+4>>2]=f,(T|0)>(z|0))T=T+-1|0;else{m=10;break}}if((m|0)==5){te=A,n[te>>2]=0,n[te+4>>2]=0,n[N>>2]=-1,n[X>>2]=-1;return}else if((m|0)==7){z=It(1,0,b|0)|0,z=C(l|0,f|0,z|0,xt()|0)|0,N=xt()|0,te=A,n[te>>2]=z,n[te+4>>2]=N,n[X>>2]=T+-1;return}else if((m|0)==10)return}}function nA(A){A=+A;var l=0;return l=A<0?A+6.283185307179586:A,+(A>=6.283185307179586?l+-6.283185307179586:l)}function Sa(A,l){return A=A|0,l=l|0,+Vt(+(+ce[A>>3]-+ce[l>>3]))<17453292519943298e-27?(l=+Vt(+(+ce[A+8>>3]-+ce[l+8>>3]))<17453292519943298e-27,l|0):(l=0,l|0)}function Xt(A,l){A=A|0,l=l|0;var f=0,m=0,b=0,T=0;return b=+ce[l>>3],m=+ce[A>>3],T=+pi(+((b-m)*.5)),f=+pi(+((+ce[l+8>>3]-+ce[A+8>>3])*.5)),f=T*T+f*(+Ai(+b)*+Ai(+m)*f),+(+pn(+ +qt(+f),+ +qt(+(1-f)))*2)}function Si(A,l){A=A|0,l=l|0;var f=0,m=0,b=0,T=0;return b=+ce[l>>3],m=+ce[A>>3],T=+pi(+((b-m)*.5)),f=+pi(+((+ce[l+8>>3]-+ce[A+8>>3])*.5)),f=T*T+f*(+Ai(+b)*+Ai(+m)*f),+(+pn(+ +qt(+f),+ +qt(+(1-f)))*2*6371.007180918475)}function gi(A,l){A=A|0,l=l|0;var f=0,m=0,b=0,T=0;return b=+ce[l>>3],m=+ce[A>>3],T=+pi(+((b-m)*.5)),f=+pi(+((+ce[l+8>>3]-+ce[A+8>>3])*.5)),f=T*T+f*(+Ai(+b)*+Ai(+m)*f),+(+pn(+ +qt(+f),+ +qt(+(1-f)))*2*6371.007180918475*1e3)}function mt(A,l){A=A|0,l=l|0;var f=0,m=0,b=0,T=0,z=0;return T=+ce[l>>3],m=+Ai(+T),b=+ce[l+8>>3]-+ce[A+8>>3],z=m*+pi(+b),f=+ce[A>>3],+ +pn(+z,+(+pi(+T)*+Ai(+f)-+Ai(+b)*(m*+pi(+f))))}function Bt(A,l,f,m){A=A|0,l=+l,f=+f,m=m|0;var b=0,T=0,z=0,N=0;if(f<1e-16){n[m>>2]=n[A>>2],n[m+4>>2]=n[A+4>>2],n[m+8>>2]=n[A+8>>2],n[m+12>>2]=n[A+12>>2];return}T=l<0?l+6.283185307179586:l,T=l>=6.283185307179586?T+-6.283185307179586:T;do if(T<1e-16)l=+ce[A>>3]+f,ce[m>>3]=l,b=m;else{if(b=+Vt(+(T+-3.141592653589793))<1e-16,l=+ce[A>>3],b){l=l-f,ce[m>>3]=l,b=m;break}if(z=+Ai(+f),f=+pi(+f),l=z*+pi(+l)+ +Ai(+T)*(f*+Ai(+l)),l=l>1?1:l,l=+Rn(+(l<-1?-1:l)),ce[m>>3]=l,+Vt(+(l+-1.5707963267948966))<1e-16){ce[m>>3]=1.5707963267948966,ce[m+8>>3]=0;return}if(+Vt(+(l+1.5707963267948966))<1e-16){ce[m>>3]=-1.5707963267948966,ce[m+8>>3]=0;return}if(N=+Ai(+l),T=f*+pi(+T)/N,f=+ce[A>>3],l=(z-+pi(+l)*+pi(+f))/+Ai(+f)/N,z=T>1?1:T,l=l>1?1:l,l=+ce[A+8>>3]+ +pn(+(z<-1?-1:z),+(l<-1?-1:l)),l>3.141592653589793)do l=l+-6.283185307179586;while(l>3.141592653589793);if(l<-3.141592653589793)do l=l+6.283185307179586;while(l<-3.141592653589793);ce[m+8>>3]=l;return}while(!1);if(+Vt(+(l+-1.5707963267948966))<1e-16){ce[b>>3]=1.5707963267948966,ce[m+8>>3]=0;return}if(+Vt(+(l+1.5707963267948966))<1e-16){ce[b>>3]=-1.5707963267948966,ce[m+8>>3]=0;return}if(l=+ce[A+8>>3],l>3.141592653589793)do l=l+-6.283185307179586;while(l>3.141592653589793);if(l<-3.141592653589793)do l=l+6.283185307179586;while(l<-3.141592653589793);ce[m+8>>3]=l}function ii(A,l){return A=A|0,l=l|0,A>>>0>15?(l=4,l|0):(ce[l>>3]=+ce[20528+(A<<3)>>3],l=0,l|0)}function Ci(A,l){return A=A|0,l=l|0,A>>>0>15?(l=4,l|0):(ce[l>>3]=+ce[20656+(A<<3)>>3],l=0,l|0)}function ln(A,l){return A=A|0,l=l|0,A>>>0>15?(l=4,l|0):(ce[l>>3]=+ce[20784+(A<<3)>>3],l=0,l|0)}function Pn(A,l){return A=A|0,l=l|0,A>>>0>15?(l=4,l|0):(ce[l>>3]=+ce[20912+(A<<3)>>3],l=0,l|0)}function Qn(A,l){A=A|0,l=l|0;var f=0;return A>>>0>15?(l=4,l|0):(f=gA(7,0,A,((A|0)<0)<<31>>31)|0,f=Ie(f|0,xt()|0,120,0)|0,A=xt()|0,n[l>>2]=f|2,n[l+4>>2]=A,l=0,l|0)}function Bn(A,l,f){A=A|0,l=l|0,f=f|0;var m=0,b=0,T=0,z=0,N=0,X=0,te=0,ve=0,De=0,He=0;return He=+ce[l>>3],ve=+ce[A>>3],X=+pi(+((He-ve)*.5)),T=+ce[l+8>>3],te=+ce[A+8>>3],z=+pi(+((T-te)*.5)),N=+Ai(+ve),De=+Ai(+He),z=X*X+z*(De*N*z),z=+pn(+ +qt(+z),+ +qt(+(1-z)))*2,X=+ce[f>>3],He=+pi(+((X-He)*.5)),m=+ce[f+8>>3],T=+pi(+((m-T)*.5)),b=+Ai(+X),T=He*He+T*(De*b*T),T=+pn(+ +qt(+T),+ +qt(+(1-T)))*2,X=+pi(+((ve-X)*.5)),m=+pi(+((te-m)*.5)),m=X*X+m*(N*b*m),m=+pn(+ +qt(+m),+ +qt(+(1-m)))*2,b=(z+T+m)*.5,+(+wn(+ +qt(+(+Rt(+(b*.5))*+Rt(+((b-z)*.5))*+Rt(+((b-T)*.5))*+Rt(+((b-m)*.5)))))*4)}function cs(A,l,f){A=A|0,l=l|0,f=f|0;var m=0,b=0,T=0,z=0,N=0;if(N=ft,ft=ft+192|0,T=N+168|0,z=N,b=is(A,l,T)|0,b|0)return f=b,ft=N,f|0;if(zr(A,l,z)|0&&nn(23313,22742,386,22751),l=n[z>>2]|0,(l|0)>0){if(m=+Bn(z+8|0,z+8+(((l|0)!=1&1)<<4)|0,T)+0,(l|0)!=1){A=1;do b=A,A=A+1|0,m=m+ +Bn(z+8+(b<<4)|0,z+8+(((A|0)%(l|0)|0)<<4)|0,T);while((A|0)<(l|0))}}else m=0;return ce[f>>3]=m,f=0,ft=N,f|0}function Zs(A,l,f){return A=A|0,l=l|0,f=f|0,A=cs(A,l,f)|0,A|0||(ce[f>>3]=+ce[f>>3]*6371.007180918475*6371.007180918475),A|0}function Js(A,l,f){return A=A|0,l=l|0,f=f|0,A=cs(A,l,f)|0,A|0||(ce[f>>3]=+ce[f>>3]*6371.007180918475*6371.007180918475*1e3*1e3),A|0}function fa(A,l,f){A=A|0,l=l|0,f=f|0;var m=0,b=0,T=0,z=0,N=0,X=0,te=0,ve=0;if(N=ft,ft=ft+176|0,z=N,A=Hs(A,l,z)|0,A|0)return z=A,ft=N,z|0;if(ce[f>>3]=0,A=n[z>>2]|0,(A|0)<=1)return z=0,ft=N,z|0;l=A+-1|0,A=0,m=+ce[z+8>>3],b=+ce[z+16>>3],T=0;do A=A+1|0,te=m,m=+ce[z+8+(A<<4)>>3],ve=+pi(+((m-te)*.5)),X=b,b=+ce[z+8+(A<<4)+8>>3],X=+pi(+((b-X)*.5)),X=ve*ve+X*(+Ai(+m)*+Ai(+te)*X),T=T+ +pn(+ +qt(+X),+ +qt(+(1-X)))*2;while((A|0)<(l|0));return ce[f>>3]=T,z=0,ft=N,z|0}function cl(A,l,f){A=A|0,l=l|0,f=f|0;var m=0,b=0,T=0,z=0,N=0,X=0,te=0,ve=0;if(N=ft,ft=ft+176|0,z=N,A=Hs(A,l,z)|0,A|0)return z=A,T=+ce[f>>3],T=T*6371.007180918475,ce[f>>3]=T,ft=N,z|0;if(ce[f>>3]=0,A=n[z>>2]|0,(A|0)<=1)return z=0,T=0,T=T*6371.007180918475,ce[f>>3]=T,ft=N,z|0;l=A+-1|0,A=0,m=+ce[z+8>>3],b=+ce[z+16>>3],T=0;do A=A+1|0,te=m,m=+ce[z+8+(A<<4)>>3],ve=+pi(+((m-te)*.5)),X=b,b=+ce[z+8+(A<<4)+8>>3],X=+pi(+((b-X)*.5)),X=ve*ve+X*(+Ai(+te)*+Ai(+m)*X),T=T+ +pn(+ +qt(+X),+ +qt(+(1-X)))*2;while((A|0)!=(l|0));return ce[f>>3]=T,z=0,ve=T,ve=ve*6371.007180918475,ce[f>>3]=ve,ft=N,z|0}function jr(A,l,f){A=A|0,l=l|0,f=f|0;var m=0,b=0,T=0,z=0,N=0,X=0,te=0,ve=0;if(N=ft,ft=ft+176|0,z=N,A=Hs(A,l,z)|0,A|0)return z=A,T=+ce[f>>3],T=T*6371.007180918475,T=T*1e3,ce[f>>3]=T,ft=N,z|0;if(ce[f>>3]=0,A=n[z>>2]|0,(A|0)<=1)return z=0,T=0,T=T*6371.007180918475,T=T*1e3,ce[f>>3]=T,ft=N,z|0;l=A+-1|0,A=0,m=+ce[z+8>>3],b=+ce[z+16>>3],T=0;do A=A+1|0,te=m,m=+ce[z+8+(A<<4)>>3],ve=+pi(+((m-te)*.5)),X=b,b=+ce[z+8+(A<<4)+8>>3],X=+pi(+((b-X)*.5)),X=ve*ve+X*(+Ai(+te)*+Ai(+m)*X),T=T+ +pn(+ +qt(+X),+ +qt(+(1-X)))*2;while((A|0)!=(l|0));return ce[f>>3]=T,z=0,ve=T,ve=ve*6371.007180918475,ve=ve*1e3,ce[f>>3]=ve,ft=N,z|0}function Hu(A){A=A|0;var l=0,f=0,m=0;return l=S(1,12)|0,l||nn(22832,22787,49,22845),f=A+4|0,m=n[f>>2]|0,m|0?(m=m+8|0,n[m>>2]=l,n[f>>2]=l,l|0):(n[A>>2]|0&&nn(22862,22787,61,22885),m=A,n[m>>2]=l,n[f>>2]=l,l|0)}function Ol(A,l){A=A|0,l=l|0;var f=0,m=0;return m=rs(24)|0,m||nn(22899,22787,78,22913),n[m>>2]=n[l>>2],n[m+4>>2]=n[l+4>>2],n[m+8>>2]=n[l+8>>2],n[m+12>>2]=n[l+12>>2],n[m+16>>2]=0,l=A+4|0,f=n[l>>2]|0,f|0?(n[f+16>>2]=m,n[l>>2]=m,m|0):(n[A>>2]|0&&nn(22928,22787,82,22913),n[A>>2]=m,n[l>>2]=m,m|0)}function ao(A){A=A|0;var l=0,f=0,m=0,b=0;if(A)for(m=1;;){if(l=n[A>>2]|0,l|0)do{if(f=n[l>>2]|0,f|0)do b=f,f=n[f+16>>2]|0,_(b);while(f|0);b=l,l=n[l+8>>2]|0,_(b)}while(l|0);if(l=A,A=n[A+8>>2]|0,m||_(l),A)m=0;else break}}function rA(A){A=A|0;var l=0,f=0,m=0,b=0,T=0,z=0,N=0,X=0,te=0,ve=0,De=0,He=0,nt=0,st=0,gt=0,Ot=0,Ut=0,Mt=0,zt=0,Ft=0,Bi=0,hi=0,xi=0,bi=0,Dn=0,dn=0,tn=0,on=0,mn=0,cn=0,$n=0,Tn=0;if(b=A+8|0,n[b>>2]|0)return Tn=1,Tn|0;if(m=n[A>>2]|0,!m)return Tn=0,Tn|0;l=m,f=0;do f=f+1|0,l=n[l+8>>2]|0;while(l|0);if(f>>>0<2)return Tn=0,Tn|0;cn=rs(f<<2)|0,cn||nn(22948,22787,317,22967),mn=rs(f<<5)|0,mn||nn(22989,22787,321,22967),n[A>>2]=0,hi=A+4|0,n[hi>>2]=0,n[b>>2]=0,f=0,on=0,Bi=0,De=0;e:for(;;){if(ve=n[m>>2]|0,ve){T=0,z=ve;do{if(X=+ce[z+8>>3],l=z,z=n[z+16>>2]|0,te=(z|0)==0,b=te?ve:z,N=+ce[b+8>>3],+Vt(+(X-N))>3.141592653589793){Tn=14;break}T=T+(N-X)*(+ce[l>>3]+ +ce[b>>3])}while(!te);if((Tn|0)==14){Tn=0,T=0,l=ve;do Ft=+ce[l+8>>3],tn=l+16|0,dn=n[tn>>2]|0,dn=dn|0?dn:ve,zt=+ce[dn+8>>3],T=T+(+ce[l>>3]+ +ce[dn>>3])*((zt<0?zt+6.283185307179586:zt)-(Ft<0?Ft+6.283185307179586:Ft)),l=n[(l|0?tn:m)>>2]|0;while(l|0)}T>0?(n[cn+(on<<2)>>2]=m,on=on+1|0,b=Bi,l=De):Tn=19}else Tn=19;if((Tn|0)==19){Tn=0;do if(f){if(l=f+8|0,n[l>>2]|0){Tn=21;break e}if(f=S(1,12)|0,!f){Tn=23;break e}n[l>>2]=f,b=f+4|0,z=f,l=De}else if(De){b=hi,z=De+8|0,l=m,f=A;break}else if(n[A>>2]|0){Tn=27;break e}else{b=hi,z=A,l=m,f=A;break}while(!1);if(n[z>>2]=m,n[b>>2]=m,z=mn+(Bi<<5)|0,te=n[m>>2]|0,te){for(ve=mn+(Bi<<5)+8|0,ce[ve>>3]=17976931348623157e292,De=mn+(Bi<<5)+24|0,ce[De>>3]=17976931348623157e292,ce[z>>3]=-17976931348623157e292,He=mn+(Bi<<5)+16|0,ce[He>>3]=-17976931348623157e292,Ut=17976931348623157e292,Mt=-17976931348623157e292,b=0,nt=te,X=17976931348623157e292,gt=17976931348623157e292,Ot=-17976931348623157e292,N=-17976931348623157e292;T=+ce[nt>>3],Ft=+ce[nt+8>>3],nt=n[nt+16>>2]|0,st=(nt|0)==0,zt=+ce[(st?te:nt)+8>>3],T<X&&(ce[ve>>3]=T,X=T),Ft<gt&&(ce[De>>3]=Ft,gt=Ft),T>Ot?ce[z>>3]=T:T=Ot,Ft>N&&(ce[He>>3]=Ft,N=Ft),Ut=Ft>0&Ft<Ut?Ft:Ut,Mt=Ft<0&Ft>Mt?Ft:Mt,b=b|+Vt(+(Ft-zt))>3.141592653589793,!st;)Ot=T;b&&(ce[He>>3]=Mt,ce[De>>3]=Ut)}else n[z>>2]=0,n[z+4>>2]=0,n[z+8>>2]=0,n[z+12>>2]=0,n[z+16>>2]=0,n[z+20>>2]=0,n[z+24>>2]=0,n[z+28>>2]=0;b=Bi+1|0}if(tn=m+8|0,m=n[tn>>2]|0,n[tn>>2]=0,m)Bi=b,De=l;else{Tn=45;break}}if((Tn|0)==21)nn(22765,22787,35,22799);else if((Tn|0)==23)nn(22819,22787,37,22799);else if((Tn|0)==27)nn(22862,22787,61,22885);else if((Tn|0)==45){e:do if((on|0)>0){for(tn=(b|0)==0,Dn=b<<2,dn=(A|0)==0,bi=0,l=0;;){if(xi=n[cn+(bi<<2)>>2]|0,tn)Tn=73;else{if(Bi=rs(Dn)|0,!Bi){Tn=50;break}if(hi=rs(Dn)|0,!hi){Tn=52;break}t:do if(dn)f=0;else{for(b=0,f=0,z=A;m=mn+(b<<5)|0,un(n[z>>2]|0,m,n[xi>>2]|0)|0?(n[Bi+(f<<2)>>2]=z,n[hi+(f<<2)>>2]=m,st=f+1|0):st=f,z=n[z+8>>2]|0,z;)b=b+1|0,f=st;if((st|0)>0)if(m=n[Bi>>2]|0,(st|0)==1)f=m;else for(He=0,nt=-1,f=m,De=m;;){for(te=n[De>>2]|0,m=0,z=0;b=n[n[Bi+(z<<2)>>2]>>2]|0,(b|0)==(te|0)?ve=m:ve=m+((un(b,n[hi+(z<<2)>>2]|0,n[te>>2]|0)|0)&1)|0,z=z+1|0,(z|0)!=(st|0);)m=ve;if(b=(ve|0)>(nt|0),f=b?De:f,m=He+1|0,(m|0)==(st|0))break t;He=m,nt=b?ve:nt,De=n[Bi+(m<<2)>>2]|0}else f=0}while(!1);if(_(Bi),_(hi),f){if(b=f+4|0,m=n[b>>2]|0,m)f=m+8|0;else if(n[f>>2]|0){Tn=70;break}n[f>>2]=xi,n[b>>2]=xi}else Tn=73}if((Tn|0)==73){if(Tn=0,l=n[xi>>2]|0,l|0)do hi=l,l=n[l+16>>2]|0,_(hi);while(l|0);_(xi),l=1}if(bi=bi+1|0,(bi|0)>=(on|0)){$n=l;break e}}(Tn|0)==50?nn(23004,22787,249,23023):(Tn|0)==52?nn(23042,22787,252,23023):(Tn|0)==70&&nn(22862,22787,61,22885)}else $n=0;while(!1);return _(cn),_(mn),Tn=$n,Tn|0}return 0}function un(A,l,f){A=A|0,l=l|0,f=f|0;var m=0,b=0,T=0,z=0,N=0,X=0,te=0,ve=0;if(!(Da(l,f)|0)||(l=Pa(l)|0,m=+ce[f>>3],b=+ce[f+8>>3],b=l&b<0?b+6.283185307179586:b,A=n[A>>2]|0,!A))return A=0,A|0;if(l){l=0,te=b,f=A;e:for(;;){for(;z=+ce[f>>3],b=+ce[f+8>>3],f=f+16|0,ve=n[f>>2]|0,ve=ve|0?ve:A,T=+ce[ve>>3],N=+ce[ve+8>>3],z>T?(X=z,z=N):(X=T,T=z,z=b,b=N),m=m==T|m==X?m+2220446049250313e-31:m,!!(m<T|m>X);)if(f=n[f>>2]|0,!f){f=22;break e}if(N=z<0?z+6.283185307179586:z,z=b<0?b+6.283185307179586:b,te=N==te|z==te?te+-2220446049250313e-31:te,X=N+(z-N)*((m-T)/(X-T)),(X<0?X+6.283185307179586:X)>te&&(l=l^1),f=n[f>>2]|0,!f){f=22;break}}if((f|0)==22)return l|0}else{l=0,te=b,f=A;e:for(;;){for(;z=+ce[f>>3],b=+ce[f+8>>3],f=f+16|0,ve=n[f>>2]|0,ve=ve|0?ve:A,T=+ce[ve>>3],N=+ce[ve+8>>3],z>T?(X=z,z=N):(X=T,T=z,z=b,b=N),m=m==T|m==X?m+2220446049250313e-31:m,!!(m<T|m>X);)if(f=n[f>>2]|0,!f){f=22;break e}if(te=z==te|b==te?te+-2220446049250313e-31:te,z+(b-z)*((m-T)/(X-T))>te&&(l=l^1),f=n[f>>2]|0,!f){f=22;break}}if((f|0)==22)return l|0}return 0}function Co(A,l,f,m,b){A=A|0,l=l|0,f=f|0,m=m|0,b=b|0;var T=0,z=0,N=0,X=0,te=0,ve=0,De=0,He=0,nt=0,st=0,gt=0,Ot=0,Ut=0,Mt=0;if(Mt=ft,ft=ft+32|0,Ut=Mt+16|0,Ot=Mt,T=wt(A|0,l|0,52)|0,xt()|0,T=T&15,nt=wt(f|0,m|0,52)|0,xt()|0,(T|0)!=(nt&15|0))return Ut=12,ft=Mt,Ut|0;if(te=wt(A|0,l|0,45)|0,xt()|0,te=te&127,ve=wt(f|0,m|0,45)|0,xt()|0,ve=ve&127,te>>>0>121|ve>>>0>121)return Ut=5,ft=Mt,Ut|0;if(nt=(te|0)!=(ve|0),nt){if(N=qn(te,ve)|0,(N|0)==7)return Ut=1,ft=Mt,Ut|0;X=qn(ve,te)|0,(X|0)==7?nn(23066,23090,161,23100):(st=N,z=X)}else st=0,z=0;De=Re(te)|0,He=Re(ve)|0,n[Ut>>2]=0,n[Ut+4>>2]=0,n[Ut+8>>2]=0,n[Ut+12>>2]=0;do if(st){if(ve=n[4272+(te*28|0)+(st<<2)>>2]|0,N=(ve|0)>0,He)if(N){te=0,X=f,N=m;do X=dA(X,N)|0,N=xt()|0,z=yo(z)|0,(z|0)==1&&(z=yo(1)|0),te=te+1|0;while((te|0)!=(ve|0));ve=z,te=X,X=N}else ve=z,te=f,X=m;else if(N){te=0,X=f,N=m;do X=wa(X,N)|0,N=xt()|0,z=yo(z)|0,te=te+1|0;while((te|0)!=(ve|0));ve=z,te=X,X=N}else ve=z,te=f,X=m;if(Qa(te,X,Ut)|0,nt||nn(23115,23090,191,23100),N=(De|0)!=0,z=(He|0)!=0,N&z&&nn(23142,23090,192,23100),N){if(z=Qs(A,l)|0,(z|0)==7){T=5;break}if(pt[21872+(z*7|0)+st>>0]|0){T=1;break}X=n[21040+(z*28|0)+(st<<2)>>2]|0,te=X}else if(z){if(z=Qs(te,X)|0,(z|0)==7){T=5;break}if(pt[21872+(z*7|0)+ve>>0]|0){T=1;break}te=0,X=n[21040+(ve*28|0)+(z<<2)>>2]|0}else te=0,X=0;if((te|X|0)<0)T=5;else{if((X|0)>0){N=Ut+4|0,z=0;do aa(N),z=z+1|0;while((z|0)!=(X|0))}if(n[Ot>>2]=0,n[Ot+4>>2]=0,n[Ot+8>>2]=0,Ts(Ot,st),T|0)for(;ms(T)|0?vo(Ot):Ns(Ot),(T|0)>1;)T=T+-1|0;if((te|0)>0){T=0;do aa(Ot),T=T+1|0;while((T|0)!=(te|0))}gt=Ut+4|0,Pr(gt,Ot,gt),Er(gt),gt=51}}else if(Qa(f,m,Ut)|0,(De|0)!=0&(He|0)!=0)if((ve|0)!=(te|0)&&nn(23173,23090,261,23100),z=Qs(A,l)|0,T=Qs(f,m)|0,(z|0)==7|(T|0)==7)T=5;else if(pt[21872+(z*7|0)+T>>0]|0)T=1;else if(z=n[21040+(z*28|0)+(T<<2)>>2]|0,(z|0)>0){N=Ut+4|0,T=0;do aa(N),T=T+1|0;while((T|0)!=(z|0));gt=51}else gt=51;else gt=51;while(!1);return(gt|0)==51&&(T=Ut+4|0,n[b>>2]=n[T>>2],n[b+4>>2]=n[T+4>>2],n[b+8>>2]=n[T+8>>2],T=0),Ut=T,ft=Mt,Ut|0}function Eo(A,l,f,m){A=A|0,l=l|0,f=f|0,m=m|0;var b=0,T=0,z=0,N=0,X=0,te=0,ve=0,De=0,He=0,nt=0,st=0,gt=0,Ot=0,Ut=0,Mt=0,zt=0;if(gt=ft,ft=ft+48|0,te=gt+36|0,z=gt+24|0,N=gt+12|0,X=gt,b=wt(A|0,l|0,52)|0,xt()|0,b=b&15,He=wt(A|0,l|0,45)|0,xt()|0,He=He&127,He>>>0>121)return m=5,ft=gt,m|0;if(ve=Re(He)|0,It(b|0,0,52)|0,Ot=xt()|0|134225919,T=m,n[T>>2]=-1,n[T+4>>2]=Ot,!b)return b=eo(f)|0,(b|0)==7||(b=Nn(He,b)|0,(b|0)==127)?(Ot=1,ft=gt,Ot|0):(nt=It(b|0,0,45)|0,st=xt()|0,He=m,st=n[He+4>>2]&-1040385|st,Ot=m,n[Ot>>2]=n[He>>2]|nt,n[Ot+4>>2]=st,Ot=0,ft=gt,Ot|0);for(n[te>>2]=n[f>>2],n[te+4>>2]=n[f+4>>2],n[te+8>>2]=n[f+8>>2],f=b;;){if(T=f,f=f+-1|0,n[z>>2]=n[te>>2],n[z+4>>2]=n[te+4>>2],n[z+8>>2]=n[te+8>>2],ms(T)|0){if(b=Oo(te)|0,b|0){f=13;break}n[N>>2]=n[te>>2],n[N+4>>2]=n[te+4>>2],n[N+8>>2]=n[te+8>>2],vo(N)}else{if(b=ls(te)|0,b|0){f=13;break}n[N>>2]=n[te>>2],n[N+4>>2]=n[te+4>>2],n[N+8>>2]=n[te+8>>2],Ns(N)}if(eA(z,N,X),Er(X),b=m,Mt=n[b>>2]|0,b=n[b+4>>2]|0,zt=(15-T|0)*3|0,Ut=It(7,0,zt|0)|0,b=b&~(xt()|0),zt=It(eo(X)|0,0,zt|0)|0,b=xt()|0|b,Ot=m,n[Ot>>2]=zt|Mt&~Ut,n[Ot+4>>2]=b,(T|0)<=1){f=14;break}}e:do if((f|0)!=13&&(f|0)==14)if((n[te>>2]|0)<=1&&(n[te+4>>2]|0)<=1&&(n[te+8>>2]|0)<=1){f=eo(te)|0,b=Nn(He,f)|0,(b|0)==127?X=0:X=Re(b)|0;t:do if(f){if(ve){if(b=Qs(A,l)|0,(b|0)==7){b=5;break e}if(T=n[21248+(b*28|0)+(f<<2)>>2]|0,(T|0)>0){b=f,f=0;do b=La(b)|0,f=f+1|0;while((f|0)!=(T|0))}else b=f;if((b|0)==1){b=9;break e}f=Nn(He,b)|0,(f|0)==127&&nn(23200,23090,411,23230),Re(f)|0?nn(23245,23090,412,23230):(st=f,nt=T,De=b)}else st=b,nt=0,De=f;if(N=n[4272+(He*28|0)+(De<<2)>>2]|0,(N|0)<=-1&&nn(23276,23090,419,23230),!X){if((nt|0)<0){b=5;break e}if(nt|0){T=m,b=0,f=n[T>>2]|0,T=n[T+4>>2]|0;do f=ro(f,T)|0,T=xt()|0,zt=m,n[zt>>2]=f,n[zt+4>>2]=T,b=b+1|0;while((b|0)<(nt|0))}if((N|0)<=0){b=st,f=58;break}for(T=m,b=0,f=n[T>>2]|0,T=n[T+4>>2]|0;;)if(f=ro(f,T)|0,T=xt()|0,zt=m,n[zt>>2]=f,n[zt+4>>2]=T,b=b+1|0,(b|0)==(N|0)){b=st,f=58;break t}}if(z=qn(st,He)|0,(z|0)==7&&nn(23066,23090,428,23230),b=m,f=n[b>>2]|0,b=n[b+4>>2]|0,(N|0)>0){T=0;do f=ro(f,b)|0,b=xt()|0,zt=m,n[zt>>2]=f,n[zt+4>>2]=b,T=T+1|0;while((T|0)!=(N|0))}if(b=Qs(f,b)|0,(b|0)==7&&nn(23313,23090,440,23230),f=at(st)|0,f=n[(f?21664:21456)+(z*28|0)+(b<<2)>>2]|0,(f|0)<0&&nn(23313,23090,454,23230),!f)b=st,f=58;else{z=m,b=0,T=n[z>>2]|0,z=n[z+4>>2]|0;do T=kA(T,z)|0,z=xt()|0,zt=m,n[zt>>2]=T,n[zt+4>>2]=z,b=b+1|0;while((b|0)<(f|0));b=st,f=58}}else if((ve|0)!=0&(X|0)!=0){if(f=Qs(A,l)|0,T=m,T=Qs(n[T>>2]|0,n[T+4>>2]|0)|0,(f|0)==7|(T|0)==7){b=5;break e}if(T=n[21248+(f*28|0)+(T<<2)>>2]|0,(T|0)<0){b=5;break e}if(!T)f=59;else{N=m,f=0,z=n[N>>2]|0,N=n[N+4>>2]|0;do z=ro(z,N)|0,N=xt()|0,zt=m,n[zt>>2]=z,n[zt+4>>2]=N,f=f+1|0;while((f|0)<(T|0));f=58}}else f=58;while(!1);if((f|0)==58&&X&&(f=59),(f|0)==59&&(zt=m,(Qs(n[zt>>2]|0,n[zt+4>>2]|0)|0)==1)){b=9;break}zt=m,Ut=n[zt>>2]|0,zt=n[zt+4>>2]&-1040385,Mt=It(b|0,0,45)|0,zt=zt|(xt()|0),b=m,n[b>>2]=Ut|Mt,n[b+4>>2]=zt,b=0}else b=1;while(!1);return zt=b,ft=gt,zt|0}function oo(A,l,f,m,b,T){A=A|0,l=l|0,f=f|0,m=m|0,b=b|0,T=T|0;var z=0,N=0;return N=ft,ft=ft+16|0,z=N,b?A=15:(A=Co(A,l,f,m,z)|0,A||(gu(z,T),A=0)),ft=N,A|0}function zl(A,l,f,m,b){A=A|0,l=l|0,f=f|0,m=m|0,b=b|0;var T=0,z=0;return z=ft,ft=ft+16|0,T=z,m?f=15:(f=oa(f,T)|0,f||(f=Eo(A,l,T,b)|0)),ft=z,f|0}function rn(A,l,f,m,b){A=A|0,l=l|0,f=f|0,m=m|0,b=b|0;var T=0,z=0,N=0,X=0;return X=ft,ft=ft+32|0,z=X+12|0,N=X,T=Co(A,l,A,l,z)|0,T|0?(N=T,ft=X,N|0):(A=Co(A,l,f,m,N)|0,A|0?(N=A,ft=X,N|0):(z=Dr(z,N)|0,N=b,n[N>>2]=z,n[N+4>>2]=((z|0)<0)<<31>>31,N=0,ft=X,N|0))}function hl(A,l,f,m,b){A=A|0,l=l|0,f=f|0,m=m|0,b=b|0;var T=0,z=0,N=0,X=0;return X=ft,ft=ft+32|0,z=X+12|0,N=X,T=Co(A,l,A,l,z)|0,!T&&(T=Co(A,l,f,m,N)|0,!T)?(m=Dr(z,N)|0,m=C(m|0,((m|0)<0)<<31>>31|0,1,0)|0,z=xt()|0,N=b,n[N>>2]=m,n[N+4>>2]=z,N=0,ft=X,N|0):(N=T,ft=X,N|0)}function eu(A,l,f,m,b){A=A|0,l=l|0,f=f|0,m=m|0,b=b|0;var T=0,z=0,N=0,X=0,te=0,ve=0,De=0,He=0,nt=0,st=0,gt=0,Ot=0,Ut=0,Mt=0,zt=0,Ft=0,Bi=0,hi=0,xi=0,bi=0;if(xi=ft,ft=ft+48|0,z=xi+24|0,N=xi+12|0,hi=xi,T=Co(A,l,A,l,z)|0,!T&&(T=Co(A,l,f,m,N)|0,!T)){Ft=Dr(z,N)|0,Bi=((Ft|0)<0)<<31>>31,n[z>>2]=0,n[z+4>>2]=0,n[z+8>>2]=0,n[N>>2]=0,n[N+4>>2]=0,n[N+8>>2]=0,Co(A,l,A,l,z)|0&&nn(23313,23090,691,23299),Co(A,l,f,m,N)|0&&nn(23313,23090,696,23299),ba(z),ba(N),Ft?(De=n[z>>2]|0,st=+(Ft|0),Ut=z+4|0,He=n[Ut>>2]|0,Mt=z+8|0,nt=n[Mt>>2]|0,zt=z,m=De,T=He,f=nt,gt=+((n[N>>2]|0)-De|0)/st,Ot=+((n[N+4>>2]|0)-He|0)/st,st=+((n[N+8>>2]|0)-nt|0)/st):(T=z+4|0,f=z+8|0,Ut=T,Mt=f,zt=z,m=n[z>>2]|0,T=n[T>>2]|0,f=n[f>>2]|0,gt=0,Ot=0,st=0),n[hi>>2]=m,nt=hi+4|0,n[nt>>2]=T,He=hi+8|0,n[He>>2]=f;e:do if((Ft|0)<0)T=0;else for(ve=0,De=0,T=m;;){te=+(De>>>0)+4294967296*+(ve|0),bi=gt*te+ +(T|0),X=Ot*te+ +(n[Ut>>2]|0),te=st*te+ +(n[Mt>>2]|0),f=~~+g(+bi),z=~~+g(+X),T=~~+g(+te),bi=+Vt(+(+(f|0)-bi)),X=+Vt(+(+(z|0)-X)),te=+Vt(+(+(T|0)-te));do if(bi>X&bi>te)f=0-(z+T)|0,m=z;else if(N=0-f|0,X>te){m=N-T|0;break}else{m=z,T=N-z|0;break}while(!1);if(n[hi>>2]=f,n[nt>>2]=m,n[He>>2]=T,ll(hi),T=Eo(A,l,hi,b+(De<<3)|0)|0,T|0)break e;if(!((ve|0)<(Bi|0)|(ve|0)==(Bi|0)&De>>>0<Ft>>>0)){T=0;break e}T=C(De|0,ve|0,1,0)|0,N=xt()|0,ve=N,De=T,T=n[zt>>2]|0}while(!1);return hi=T,ft=xi,hi|0}return hi=T,ft=xi,hi|0}function gA(A,l,f,m){A=A|0,l=l|0,f=f|0,m=m|0;var b=0,T=0,z=0;if((f|0)==0&(m|0)==0)return b=0,T=1,Fi(b|0),T|0;T=A,b=l,A=1,l=0;do z=(f&1|0)==0&!0,A=Ie((z?1:T)|0,(z?0:b)|0,A|0,l|0)|0,l=xt()|0,f=Nt(f|0,m|0,1)|0,m=xt()|0,T=Ie(T|0,b|0,T|0,b|0)|0,b=xt()|0;while(!((f|0)==0&(m|0)==0));return Fi(l|0),A|0}function UA(A,l,f){A=A|0,l=l|0,f=f|0;var m=0,b=0,T=0,z=0,N=0,X=0,te=0,ve=0,De=0,He=0;if(!(Da(l,f)|0)||(l=Pa(l)|0,m=+ce[f>>3],b=+ce[f+8>>3],b=l&b<0?b+6.283185307179586:b,He=n[A>>2]|0,(He|0)<=0))return He=0,He|0;if(De=n[A+4>>2]|0,l){l=0,ve=b,f=-1,A=0;e:for(;;){for(te=A;z=+ce[De+(te<<4)>>3],b=+ce[De+(te<<4)+8>>3],A=(f+2|0)%(He|0)|0,T=+ce[De+(A<<4)>>3],N=+ce[De+(A<<4)+8>>3],z>T?(X=z,z=N):(X=T,T=z,z=b,b=N),m=m==T|m==X?m+2220446049250313e-31:m,!!(m<T|m>X);)if(f=te+1|0,(f|0)>=(He|0)){f=22;break e}else A=te,te=f,f=A;if(N=z<0?z+6.283185307179586:z,z=b<0?b+6.283185307179586:b,ve=N==ve|z==ve?ve+-2220446049250313e-31:ve,X=N+(z-N)*((m-T)/(X-T)),(X<0?X+6.283185307179586:X)>ve&&(l=l^1),A=te+1|0,(A|0)>=(He|0)){f=22;break}else f=te}if((f|0)==22)return l|0}else{l=0,ve=b,f=-1,A=0;e:for(;;){for(te=A;z=+ce[De+(te<<4)>>3],b=+ce[De+(te<<4)+8>>3],A=(f+2|0)%(He|0)|0,T=+ce[De+(A<<4)>>3],N=+ce[De+(A<<4)+8>>3],z>T?(X=z,z=N):(X=T,T=z,z=b,b=N),m=m==T|m==X?m+2220446049250313e-31:m,!!(m<T|m>X);)if(f=te+1|0,(f|0)>=(He|0)){f=22;break e}else A=te,te=f,f=A;if(ve=z==ve|b==ve?ve+-2220446049250313e-31:ve,z+(b-z)*((m-T)/(X-T))>ve&&(l=l^1),A=te+1|0,(A|0)>=(He|0)){f=22;break}else f=te}if((f|0)==22)return l|0}return 0}function tu(A,l){A=A|0,l=l|0;var f=0,m=0,b=0,T=0,z=0,N=0,X=0,te=0,ve=0,De=0,He=0,nt=0,st=0,gt=0,Ot=0,Ut=0,Mt=0;if(st=n[A>>2]|0,!st){n[l>>2]=0,n[l+4>>2]=0,n[l+8>>2]=0,n[l+12>>2]=0,n[l+16>>2]=0,n[l+20>>2]=0,n[l+24>>2]=0,n[l+28>>2]=0;return}if(gt=l+8|0,ce[gt>>3]=17976931348623157e292,Ot=l+24|0,ce[Ot>>3]=17976931348623157e292,ce[l>>3]=-17976931348623157e292,Ut=l+16|0,ce[Ut>>3]=-17976931348623157e292,!((st|0)<=0)){for(He=n[A+4>>2]|0,te=17976931348623157e292,ve=-17976931348623157e292,De=0,A=-1,T=17976931348623157e292,z=17976931348623157e292,X=-17976931348623157e292,m=-17976931348623157e292,nt=0;f=+ce[He+(nt<<4)>>3],N=+ce[He+(nt<<4)+8>>3],A=A+2|0,b=+ce[He+(((A|0)==(st|0)?0:A)<<4)+8>>3],f<T&&(ce[gt>>3]=f,T=f),N<z&&(ce[Ot>>3]=N,z=N),f>X?ce[l>>3]=f:f=X,N>m&&(ce[Ut>>3]=N,m=N),te=N>0&N<te?N:te,ve=N<0&N>ve?N:ve,De=De|+Vt(+(N-b))>3.141592653589793,A=nt+1|0,(A|0)!=(st|0);)Mt=nt,X=f,nt=A,A=Mt;De&&(ce[Ut>>3]=ve,ce[Ot>>3]=te)}}function GA(A,l){A=A|0,l=l|0;var f=0,m=0,b=0,T=0,z=0,N=0,X=0,te=0,ve=0,De=0,He=0,nt=0,st=0,gt=0,Ot=0,Ut=0,Mt=0,zt=0,Ft=0,Bi=0,hi=0,xi=0;if(st=n[A>>2]|0,st){if(gt=l+8|0,ce[gt>>3]=17976931348623157e292,Ot=l+24|0,ce[Ot>>3]=17976931348623157e292,ce[l>>3]=-17976931348623157e292,Ut=l+16|0,ce[Ut>>3]=-17976931348623157e292,(st|0)>0){for(b=n[A+4>>2]|0,He=17976931348623157e292,nt=-17976931348623157e292,m=0,f=-1,X=17976931348623157e292,te=17976931348623157e292,De=-17976931348623157e292,z=-17976931348623157e292,Mt=0;T=+ce[b+(Mt<<4)>>3],ve=+ce[b+(Mt<<4)+8>>3],hi=f+2|0,N=+ce[b+(((hi|0)==(st|0)?0:hi)<<4)+8>>3],T<X&&(ce[gt>>3]=T,X=T),ve<te&&(ce[Ot>>3]=ve,te=ve),T>De?ce[l>>3]=T:T=De,ve>z&&(ce[Ut>>3]=ve,z=ve),He=ve>0&ve<He?ve:He,nt=ve<0&ve>nt?ve:nt,m=m|+Vt(+(ve-N))>3.141592653589793,f=Mt+1|0,(f|0)!=(st|0);)hi=Mt,De=T,Mt=f,f=hi;m&&(ce[Ut>>3]=nt,ce[Ot>>3]=He)}}else n[l>>2]=0,n[l+4>>2]=0,n[l+8>>2]=0,n[l+12>>2]=0,n[l+16>>2]=0,n[l+20>>2]=0,n[l+24>>2]=0,n[l+28>>2]=0;if(hi=A+8|0,f=n[hi>>2]|0,!((f|0)<=0)){Bi=A+12|0,Ft=0;do if(b=n[Bi>>2]|0,m=Ft,Ft=Ft+1|0,Ot=l+(Ft<<5)|0,Ut=n[b+(m<<3)>>2]|0,Ut){if(Mt=l+(Ft<<5)+8|0,ce[Mt>>3]=17976931348623157e292,A=l+(Ft<<5)+24|0,ce[A>>3]=17976931348623157e292,ce[Ot>>3]=-17976931348623157e292,zt=l+(Ft<<5)+16|0,ce[zt>>3]=-17976931348623157e292,(Ut|0)>0){for(st=n[b+(m<<3)+4>>2]|0,He=17976931348623157e292,nt=-17976931348623157e292,b=0,m=-1,gt=0,X=17976931348623157e292,te=17976931348623157e292,ve=-17976931348623157e292,z=-17976931348623157e292;T=+ce[st+(gt<<4)>>3],De=+ce[st+(gt<<4)+8>>3],m=m+2|0,N=+ce[st+(((m|0)==(Ut|0)?0:m)<<4)+8>>3],T<X&&(ce[Mt>>3]=T,X=T),De<te&&(ce[A>>3]=De,te=De),T>ve?ce[Ot>>3]=T:T=ve,De>z&&(ce[zt>>3]=De,z=De),He=De>0&De<He?De:He,nt=De<0&De>nt?De:nt,b=b|+Vt(+(De-N))>3.141592653589793,m=gt+1|0,(m|0)!=(Ut|0);)xi=gt,gt=m,ve=T,m=xi;b&&(ce[zt>>3]=nt,ce[A>>3]=He)}}else n[Ot>>2]=0,n[Ot+4>>2]=0,n[Ot+8>>2]=0,n[Ot+12>>2]=0,n[Ot+16>>2]=0,n[Ot+20>>2]=0,n[Ot+24>>2]=0,n[Ot+28>>2]=0,f=n[hi>>2]|0;while((Ft|0)<(f|0))}}function mA(A,l,f){A=A|0,l=l|0,f=f|0;var m=0,b=0,T=0;if(!(UA(A,l,f)|0))return b=0,b|0;if(b=A+8|0,(n[b>>2]|0)<=0)return b=1,b|0;for(m=A+12|0,A=0;;){if(T=A,A=A+1|0,UA((n[m>>2]|0)+(T<<3)|0,l+(A<<5)|0,f)|0){A=0,m=6;break}if((A|0)>=(n[b>>2]|0)){A=1,m=6;break}}return(m|0)==6?A|0:0}function ks(){return 8}function mu(){return 16}function _u(){return 168}function vu(){return 8}function HA(){return 16}function la(){return 12}function Go(){return 8}function fl(A){return A=A|0,+(+((n[A>>2]|0)>>>0)+4294967296*+(n[A+4>>2]|0))}function iu(A){A=A|0;var l=0,f=0;return f=+ce[A>>3],l=+ce[A+8>>3],+ +qt(+(f*f+l*l))}function dl(A,l,f,m,b){A=A|0,l=l|0,f=f|0,m=m|0,b=b|0;var T=0,z=0,N=0,X=0,te=0,ve=0,De=0,He=0;te=+ce[A>>3],X=+ce[l>>3]-te,N=+ce[A+8>>3],z=+ce[l+8>>3]-N,De=+ce[f>>3],T=+ce[m>>3]-De,He=+ce[f+8>>3],ve=+ce[m+8>>3]-He,T=(T*(N-He)-(te-De)*ve)/(X*ve-z*T),ce[b>>3]=te+X*T,ce[b+8>>3]=N+z*T}function nu(A,l){return A=A|0,l=l|0,+Vt(+(+ce[A>>3]-+ce[l>>3]))<11920928955078125e-23?(l=+Vt(+(+ce[A+8>>3]-+ce[l+8>>3]))<11920928955078125e-23,l|0):(l=0,l|0)}function lr(A,l){A=A|0,l=l|0;var f=0,m=0,b=0;return b=+ce[A>>3]-+ce[l>>3],m=+ce[A+8>>3]-+ce[l+8>>3],f=+ce[A+16>>3]-+ce[l+16>>3],+(b*b+m*m+f*f)}function ns(A,l){A=A|0,l=l|0;var f=0,m=0,b=0;f=+ce[A>>3],m=+Ai(+f),f=+pi(+f),ce[l+16>>3]=f,f=+ce[A+8>>3],b=m*+Ai(+f),ce[l>>3]=b,f=m*+pi(+f),ce[l+8>>3]=f}function Jr(A,l,f){A=A|0,l=l|0,f=f|0;var m=0,b=0,T=0;if(T=ft,ft=ft+16|0,b=T,m=Ar(A,l)|0,(f+-1|0)>>>0>5||(m=(m|0)!=0,(f|0)==1&m))return b=-1,ft=T,b|0;do if(da(A,l,b)|0)m=-1;else if(m){m=((n[21936+(f<<2)>>2]|0)+5-(n[b>>2]|0)|0)%5|0;break}else{m=((n[21968+(f<<2)>>2]|0)+6-(n[b>>2]|0)|0)%6|0;break}while(!1);return b=m,ft=T,b|0}function da(A,l,f){A=A|0,l=l|0,f=f|0;var m=0,b=0,T=0,z=0,N=0,X=0,te=0;if(te=ft,ft=ft+32|0,z=te+16|0,N=te,m=br(A,l,z)|0,m|0)return f=m,ft=te,f|0;T=TA(A,l)|0,X=Qs(A,l)|0,_i(T,N),m=Qi(T,n[z>>2]|0)|0;e:do if(Re(T)|0){do switch(T|0){case 4:{A=0;break}case 14:{A=1;break}case 24:{A=2;break}case 38:{A=3;break}case 49:{A=4;break}case 58:{A=5;break}case 63:{A=6;break}case 72:{A=7;break}case 83:{A=8;break}case 97:{A=9;break}case 107:{A=10;break}case 117:{A=11;break}default:{m=1;break e}}while(!1);if(b=n[22e3+(A*24|0)+8>>2]|0,l=n[22e3+(A*24|0)+16>>2]|0,A=n[z>>2]|0,(A|0)!=(n[N>>2]|0)&&(N=at(T)|0,A=n[z>>2]|0,N|(A|0)==(l|0)&&(m=(m+1|0)%6|0)),(X|0)==3&(A|0)==(l|0)){m=(m+5|0)%6|0,b=22;break}(X|0)==5&(A|0)==(b|0)&&(m=(m+1|0)%6|0),b=22}else b=22;while(!1);return(b|0)==22&&(n[f>>2]=m,m=0),f=m,ft=te,f|0}function zn(A,l,f,m){A=A|0,l=l|0,f=f|0,m=m|0;var b=0,T=0,z=0,N=0,X=0,te=0,ve=0,De=0,He=0,nt=0,st=0,gt=0,Ot=0,Ut=0,Mt=0,zt=0;if(zt=ft,ft=ft+32|0,Mt=zt+24|0,Ot=zt+20|0,st=zt+8|0,nt=zt+16|0,He=zt,X=(Ar(A,l)|0)==0,X=X?6:5,ve=wt(A|0,l|0,52)|0,xt()|0,ve=ve&15,X>>>0<=f>>>0)return m=2,ft=zt,m|0;De=(ve|0)==0,!De&&(gt=It(7,0,(ve^15)*3|0)|0,(gt&A|0)==0&((xt()|0)&l|0)==0)?b=f:T=4;e:do if((T|0)==4){if(b=(Ar(A,l)|0)!=0,((b?4:5)|0)<(f|0)||da(A,l,Mt)|0||(T=(n[Mt>>2]|0)+f|0,b?b=22288+(((T|0)%5|0)<<2)|0:b=22320+(((T|0)%6|0)<<2)|0,gt=n[b>>2]|0,(gt|0)==7))return m=1,ft=zt,m|0;n[Ot>>2]=0,b=Or(A,l,gt,Ot,st)|0;do if(!b){if(N=st,te=n[N>>2]|0,N=n[N+4>>2]|0,z=N>>>0<l>>>0|(N|0)==(l|0)&te>>>0<A>>>0,T=z?te:A,z=z?N:l,!De&&(De=It(7,0,(ve^15)*3|0)|0,(te&De|0)==0&(N&(xt()|0)|0)==0))b=f;else{if(N=(f+-1+X|0)%(X|0)|0,b=Ar(A,l)|0,(N|0)<0&&nn(23313,23315,245,23324),X=(b|0)!=0,((X?4:5)|0)<(N|0)&&nn(23313,23315,245,23324),da(A,l,Mt)|0&&nn(23313,23315,245,23324),b=(n[Mt>>2]|0)+N|0,X?b=22288+(((b|0)%5|0)<<2)|0:b=22320+(((b|0)%6|0)<<2)|0,N=n[b>>2]|0,(N|0)==7&&nn(23313,23315,245,23324),n[nt>>2]=0,b=Or(A,l,N,nt,He)|0,b|0)break;te=He,X=n[te>>2]|0,te=n[te+4>>2]|0;do if(te>>>0<z>>>0|(te|0)==(z|0)&X>>>0<T>>>0){if(Ar(X,te)|0?T=ya(X,te,A,l)|0:T=n[22384+((((n[nt>>2]|0)+(n[22352+(N<<2)>>2]|0)|0)%6|0)<<2)>>2]|0,b=Ar(X,te)|0,(T+-1|0)>>>0>5){b=-1,T=X,z=te;break}if(b=(b|0)!=0,(T|0)==1&b){b=-1,T=X,z=te;break}do if(da(X,te,Mt)|0)b=-1;else if(b){b=((n[21936+(T<<2)>>2]|0)+5-(n[Mt>>2]|0)|0)%5|0;break}else{b=((n[21968+(T<<2)>>2]|0)+6-(n[Mt>>2]|0)|0)%6|0;break}while(!1);T=X,z=te}else b=f;while(!1);N=st,te=n[N>>2]|0,N=n[N+4>>2]|0}if((T|0)==(te|0)&(z|0)==(N|0)){if(X=(Ar(te,N)|0)!=0,X?A=ya(te,N,A,l)|0:A=n[22384+((((n[Ot>>2]|0)+(n[22352+(gt<<2)>>2]|0)|0)%6|0)<<2)>>2]|0,b=Ar(te,N)|0,(A+-1|0)>>>0<=5&&(Ut=(b|0)!=0,!((A|0)==1&Ut)))do if(da(te,N,Mt)|0)b=-1;else if(Ut){b=((n[21936+(A<<2)>>2]|0)+5-(n[Mt>>2]|0)|0)%5|0;break}else{b=((n[21968+(A<<2)>>2]|0)+6-(n[Mt>>2]|0)|0)%6|0;break}while(!1);else b=-1;b=b+1|0,b=(b|0)==6|X&(b|0)==5?0:b}l=z,A=T;break e}while(!1);return m=b,ft=zt,m|0}while(!1);return Ut=It(b|0,0,56)|0,Mt=xt()|0|l&-2130706433|536870912,n[m>>2]=Ut|A,n[m+4>>2]=Mt,m=0,ft=zt,m|0}function Io(A,l,f){A=A|0,l=l|0,f=f|0;var m=0,b=0,T=0;return T=(Ar(A,l)|0)==0,m=zn(A,l,0,f)|0,b=(m|0)==0,T?!b||(m=zn(A,l,1,f+8|0)|0,m|0)||(m=zn(A,l,2,f+16|0)|0,m|0)||(m=zn(A,l,3,f+24|0)|0,m|0)||(m=zn(A,l,4,f+32|0)|0,m)?(T=m,T|0):zn(A,l,5,f+40|0)|0:!b||(m=zn(A,l,1,f+8|0)|0,m|0)||(m=zn(A,l,2,f+16|0)|0,m|0)||(m=zn(A,l,3,f+24|0)|0,m|0)||(m=zn(A,l,4,f+32|0)|0,m|0)?(T=m,T|0):(T=f+40|0,n[T>>2]=0,n[T+4>>2]=0,T=0,T|0)}function ru(A,l,f){A=A|0,l=l|0,f=f|0;var m=0,b=0,T=0,z=0,N=0,X=0;return X=ft,ft=ft+192|0,b=X,T=X+168|0,z=wt(A|0,l|0,56)|0,xt()|0,z=z&7,N=l&-2130706433|134217728,m=br(A,N,T)|0,m|0?(N=m,ft=X,N|0):(l=wt(A|0,l|0,52)|0,xt()|0,l=l&15,Ar(A,N)|0?No(T,l,z,1,b):Qr(T,l,z,1,b),N=b+8|0,n[f>>2]=n[N>>2],n[f+4>>2]=n[N+4>>2],n[f+8>>2]=n[N+8>>2],n[f+12>>2]=n[N+12>>2],N=0,ft=X,N|0)}function sA(A,l){A=A|0,l=l|0;var f=0,m=0,b=0,T=0;return b=ft,ft=ft+16|0,f=b,!(!0&(l&2013265920|0)==536870912)||(m=l&-2130706433|134217728,!(Vo(A,m)|0))?(m=0,ft=b,m|0):(T=wt(A|0,l|0,56)|0,xt()|0,T=(zn(A,m,T&7,f)|0)==0,m=f,m=T&((n[m>>2]|0)==(A|0)?(n[m+4>>2]|0)==(l|0):0)&1,ft=b,m|0)}function Fl(A,l,f){A=A|0,l=l|0,f=f|0;var m=0;(l|0)>0?(m=S(l,4)|0,n[A>>2]=m,m||nn(23337,23360,40,23374)):n[A>>2]=0,n[A+4>>2]=l,n[A+8>>2]=0,n[A+12>>2]=f}function Vs(A){A=A|0;var l=0,f=0,m=0,b=0,T=0,z=0,N=0;b=A+4|0,T=A+12|0,z=A+8|0;e:for(;;){for(f=n[b>>2]|0,l=0;;){if((l|0)>=(f|0))break e;if(m=n[A>>2]|0,N=n[m+(l<<2)>>2]|0,!N)l=l+1|0;else break}l=m+(~~(+Vt(+(+Ei(10,+ +(15-(n[T>>2]|0)|0))*(+ce[N>>3]+ +ce[N+8>>3])))%+(f|0))>>>0<<2)|0,f=n[l>>2]|0;t:do if(f|0){if(m=N+32|0,(f|0)==(N|0))n[l>>2]=n[m>>2];else{if(f=f+32|0,l=n[f>>2]|0,!l)break;for(;(l|0)!=(N|0);)if(f=l+32|0,l=n[f>>2]|0,!l)break t;n[f>>2]=n[m>>2]}_(N),n[z>>2]=(n[z>>2]|0)+-1}while(!1)}_(n[A>>2]|0)}function Ca(A){A=A|0;var l=0,f=0,m=0;for(m=n[A+4>>2]|0,f=0;;){if((f|0)>=(m|0)){l=0,f=4;break}if(l=n[(n[A>>2]|0)+(f<<2)>>2]|0,!l)f=f+1|0;else{f=4;break}}return(f|0)==4?l|0:0}function ci(A,l){A=A|0,l=l|0;var f=0,m=0,b=0,T=0;if(f=~~(+Vt(+(+Ei(10,+ +(15-(n[A+12>>2]|0)|0))*(+ce[l>>3]+ +ce[l+8>>3])))%+(n[A+4>>2]|0))>>>0,f=(n[A>>2]|0)+(f<<2)|0,m=n[f>>2]|0,!m)return T=1,T|0;T=l+32|0;do if((m|0)!=(l|0)){if(f=n[m+32>>2]|0,!f)return T=1,T|0;for(b=f;;){if((b|0)==(l|0)){b=8;break}if(f=n[b+32>>2]|0,f)m=b,b=f;else{f=1,b=10;break}}if((b|0)==8){n[m+32>>2]=n[T>>2];break}else if((b|0)==10)return f|0}else n[f>>2]=n[T>>2];while(!1);return _(l),T=A+8|0,n[T>>2]=(n[T>>2]|0)+-1,T=0,T|0}function Ii(A,l,f){A=A|0,l=l|0,f=f|0;var m=0,b=0,T=0,z=0;T=rs(40)|0,T||nn(23390,23360,98,23403),n[T>>2]=n[l>>2],n[T+4>>2]=n[l+4>>2],n[T+8>>2]=n[l+8>>2],n[T+12>>2]=n[l+12>>2],b=T+16|0,n[b>>2]=n[f>>2],n[b+4>>2]=n[f+4>>2],n[b+8>>2]=n[f+8>>2],n[b+12>>2]=n[f+12>>2],n[T+32>>2]=0,b=~~(+Vt(+(+Ei(10,+ +(15-(n[A+12>>2]|0)|0))*(+ce[l>>3]+ +ce[l+8>>3])))%+(n[A+4>>2]|0))>>>0,b=(n[A>>2]|0)+(b<<2)|0,m=n[b>>2]|0;do if(!m)n[b>>2]=T;else{for(;!(Sa(m,l)|0&&Sa(m+16|0,f)|0);)if(b=n[m+32>>2]|0,m=b|0?b:m,!(n[m+32>>2]|0)){z=10;break}if((z|0)==10){n[m+32>>2]=T;break}return _(T),z=m,z|0}while(!1);return z=A+8|0,n[z>>2]=(n[z>>2]|0)+1,z=T,z|0}function Ho(A,l,f){A=A|0,l=l|0,f=f|0;var m=0,b=0;if(b=~~(+Vt(+(+Ei(10,+ +(15-(n[A+12>>2]|0)|0))*(+ce[l>>3]+ +ce[l+8>>3])))%+(n[A+4>>2]|0))>>>0,b=n[(n[A>>2]|0)+(b<<2)>>2]|0,!b)return f=0,f|0;if(!f){for(A=b;;){if(Sa(A,l)|0){m=10;break}if(A=n[A+32>>2]|0,!A){A=0,m=10;break}}if((m|0)==10)return A|0}for(A=b;;){if(Sa(A,l)|0&&Sa(A+16|0,f)|0){m=10;break}if(A=n[A+32>>2]|0,!A){A=0,m=10;break}}return(m|0)==10?A|0:0}function pl(A,l){A=A|0,l=l|0;var f=0;if(f=~~(+Vt(+(+Ei(10,+ +(15-(n[A+12>>2]|0)|0))*(+ce[l>>3]+ +ce[l+8>>3])))%+(n[A+4>>2]|0))>>>0,A=n[(n[A>>2]|0)+(f<<2)>>2]|0,!A)return f=0,f|0;for(;;){if(Sa(A,l)|0){l=5;break}if(A=n[A+32>>2]|0,!A){A=0,l=5;break}}return(l|0)==5?A|0:0}function gl(){return 23424}function Wr(A){return A=+A,+ +F(+A)}function Qo(A){return A=+A,~~+Wr(A)|0}function rs(A){A=A|0;var l=0,f=0,m=0,b=0,T=0,z=0,N=0,X=0,te=0,ve=0,De=0,He=0,nt=0,st=0,gt=0,Ot=0,Ut=0,Mt=0,zt=0,Ft=0,Bi=0;Bi=ft,ft=ft+16|0,He=Bi;do if(A>>>0<245){if(te=A>>>0<11?16:A+11&-8,A=te>>>3,De=n[5857]|0,f=De>>>A,f&3|0)return l=(f&1^1)+A|0,A=23468+(l<<1<<2)|0,f=A+8|0,m=n[f>>2]|0,b=m+8|0,T=n[b>>2]|0,(T|0)==(A|0)?n[5857]=De&~(1<<l):(n[T+12>>2]=A,n[f>>2]=T),Ft=l<<3,n[m+4>>2]=Ft|3,Ft=m+Ft+4|0,n[Ft>>2]=n[Ft>>2]|1,Ft=b,ft=Bi,Ft|0;if(ve=n[5859]|0,te>>>0>ve>>>0){if(f|0)return l=2<<A,l=f<<A&(l|0-l),l=(l&0-l)+-1|0,N=l>>>12&16,l=l>>>N,f=l>>>5&8,l=l>>>f,T=l>>>2&4,l=l>>>T,A=l>>>1&2,l=l>>>A,m=l>>>1&1,m=(f|N|T|A|m)+(l>>>m)|0,l=23468+(m<<1<<2)|0,A=l+8|0,T=n[A>>2]|0,N=T+8|0,f=n[N>>2]|0,(f|0)==(l|0)?(A=De&~(1<<m),n[5857]=A):(n[f+12>>2]=l,n[A>>2]=f,A=De),Ft=m<<3,z=Ft-te|0,n[T+4>>2]=te|3,b=T+te|0,n[b+4>>2]=z|1,n[T+Ft>>2]=z,ve|0&&(m=n[5862]|0,l=ve>>>3,f=23468+(l<<1<<2)|0,l=1<<l,A&l?(A=f+8|0,l=n[A>>2]|0):(n[5857]=A|l,l=f,A=f+8|0),n[A>>2]=m,n[l+12>>2]=m,n[m+8>>2]=l,n[m+12>>2]=f),n[5859]=z,n[5862]=b,Ft=N,ft=Bi,Ft|0;if(T=n[5858]|0,T){for(f=(T&0-T)+-1|0,b=f>>>12&16,f=f>>>b,m=f>>>5&8,f=f>>>m,z=f>>>2&4,f=f>>>z,N=f>>>1&2,f=f>>>N,X=f>>>1&1,X=n[23732+((m|b|z|N|X)+(f>>>X)<<2)>>2]|0,f=X,N=X,X=(n[X+4>>2]&-8)-te|0;A=n[f+16>>2]|0,!(!A&&(A=n[f+20>>2]|0,!A));)z=(n[A+4>>2]&-8)-te|0,b=z>>>0<X>>>0,f=A,N=b?A:N,X=b?z:X;if(z=N+te|0,z>>>0>N>>>0){b=n[N+24>>2]|0,l=n[N+12>>2]|0;do if((l|0)==(N|0)){if(A=N+20|0,l=n[A>>2]|0,!l&&(A=N+16|0,l=n[A>>2]|0,!l)){f=0;break}for(;;)if(m=l+20|0,f=n[m>>2]|0,f)l=f,A=m;else if(m=l+16|0,f=n[m>>2]|0,f)l=f,A=m;else break;n[A>>2]=0,f=l}else f=n[N+8>>2]|0,n[f+12>>2]=l,n[l+8>>2]=f,f=l;while(!1);do if(b|0){if(l=n[N+28>>2]|0,A=23732+(l<<2)|0,(N|0)==(n[A>>2]|0)){if(n[A>>2]=f,!f){n[5858]=T&~(1<<l);break}}else if(Ft=b+16|0,n[((n[Ft>>2]|0)==(N|0)?Ft:b+20|0)>>2]=f,!f)break;n[f+24>>2]=b,l=n[N+16>>2]|0,l|0&&(n[f+16>>2]=l,n[l+24>>2]=f),l=n[N+20>>2]|0,l|0&&(n[f+20>>2]=l,n[l+24>>2]=f)}while(!1);return X>>>0<16?(Ft=X+te|0,n[N+4>>2]=Ft|3,Ft=N+Ft+4|0,n[Ft>>2]=n[Ft>>2]|1):(n[N+4>>2]=te|3,n[z+4>>2]=X|1,n[z+X>>2]=X,ve|0&&(m=n[5862]|0,l=ve>>>3,f=23468+(l<<1<<2)|0,l=1<<l,l&De?(A=f+8|0,l=n[A>>2]|0):(n[5857]=l|De,l=f,A=f+8|0),n[A>>2]=m,n[l+12>>2]=m,n[m+8>>2]=l,n[m+12>>2]=f),n[5859]=X,n[5862]=z),Ft=N+8|0,ft=Bi,Ft|0}else De=te}else De=te}else De=te}else if(A>>>0<=4294967231)if(A=A+11|0,te=A&-8,m=n[5858]|0,m){b=0-te|0,A=A>>>8,A?te>>>0>16777215?X=31:(De=(A+1048320|0)>>>16&8,gt=A<<De,N=(gt+520192|0)>>>16&4,gt=gt<<N,X=(gt+245760|0)>>>16&2,X=14-(N|De|X)+(gt<<X>>>15)|0,X=te>>>(X+7|0)&1|X<<1):X=0,f=n[23732+(X<<2)>>2]|0;e:do if(!f)f=0,A=0,gt=61;else for(A=0,N=te<<((X|0)==31?0:25-(X>>>1)|0),T=0;;){if(z=(n[f+4>>2]&-8)-te|0,z>>>0<b>>>0)if(z)A=f,b=z;else{A=f,b=0,gt=65;break e}if(gt=n[f+20>>2]|0,f=n[f+16+(N>>>31<<2)>>2]|0,T=(gt|0)==0|(gt|0)==(f|0)?T:gt,f)N=N<<1;else{f=T,gt=61;break}}while(!1);if((gt|0)==61){if((f|0)==0&(A|0)==0){if(A=2<<X,A=(A|0-A)&m,!A){De=te;break}De=(A&0-A)+-1|0,z=De>>>12&16,De=De>>>z,T=De>>>5&8,De=De>>>T,N=De>>>2&4,De=De>>>N,X=De>>>1&2,De=De>>>X,f=De>>>1&1,A=0,f=n[23732+((T|z|N|X|f)+(De>>>f)<<2)>>2]|0}f?gt=65:(N=A,z=b)}if((gt|0)==65)for(T=f;;)if(De=(n[T+4>>2]&-8)-te|0,f=De>>>0<b>>>0,b=f?De:b,A=f?T:A,f=n[T+16>>2]|0,f||(f=n[T+20>>2]|0),f)T=f;else{N=A,z=b;break}if(N|0&&z>>>0<((n[5859]|0)-te|0)>>>0&&(ve=N+te|0,ve>>>0>N>>>0)){T=n[N+24>>2]|0,l=n[N+12>>2]|0;do if((l|0)==(N|0)){if(A=N+20|0,l=n[A>>2]|0,!l&&(A=N+16|0,l=n[A>>2]|0,!l)){l=0;break}for(;;)if(b=l+20|0,f=n[b>>2]|0,f)l=f,A=b;else if(b=l+16|0,f=n[b>>2]|0,f)l=f,A=b;else break;n[A>>2]=0}else Ft=n[N+8>>2]|0,n[Ft+12>>2]=l,n[l+8>>2]=Ft;while(!1);do if(T){if(A=n[N+28>>2]|0,f=23732+(A<<2)|0,(N|0)==(n[f>>2]|0)){if(n[f>>2]=l,!l){m=m&~(1<<A),n[5858]=m;break}}else if(Ft=T+16|0,n[((n[Ft>>2]|0)==(N|0)?Ft:T+20|0)>>2]=l,!l)break;n[l+24>>2]=T,A=n[N+16>>2]|0,A|0&&(n[l+16>>2]=A,n[A+24>>2]=l),A=n[N+20>>2]|0,A&&(n[l+20>>2]=A,n[A+24>>2]=l)}while(!1);e:do if(z>>>0<16)Ft=z+te|0,n[N+4>>2]=Ft|3,Ft=N+Ft+4|0,n[Ft>>2]=n[Ft>>2]|1;else{if(n[N+4>>2]=te|3,n[ve+4>>2]=z|1,n[ve+z>>2]=z,l=z>>>3,z>>>0<256){f=23468+(l<<1<<2)|0,A=n[5857]|0,l=1<<l,A&l?(A=f+8|0,l=n[A>>2]|0):(n[5857]=A|l,l=f,A=f+8|0),n[A>>2]=ve,n[l+12>>2]=ve,n[ve+8>>2]=l,n[ve+12>>2]=f;break}if(l=z>>>8,l?z>>>0>16777215?f=31:(zt=(l+1048320|0)>>>16&8,Ft=l<<zt,Mt=(Ft+520192|0)>>>16&4,Ft=Ft<<Mt,f=(Ft+245760|0)>>>16&2,f=14-(Mt|zt|f)+(Ft<<f>>>15)|0,f=z>>>(f+7|0)&1|f<<1):f=0,l=23732+(f<<2)|0,n[ve+28>>2]=f,A=ve+16|0,n[A+4>>2]=0,n[A>>2]=0,A=1<<f,!(m&A)){n[5858]=m|A,n[l>>2]=ve,n[ve+24>>2]=l,n[ve+12>>2]=ve,n[ve+8>>2]=ve;break}l=n[l>>2]|0;t:do if((n[l+4>>2]&-8|0)!=(z|0)){for(m=z<<((f|0)==31?0:25-(f>>>1)|0);f=l+16+(m>>>31<<2)|0,A=n[f>>2]|0,!!A;)if((n[A+4>>2]&-8|0)==(z|0)){l=A;break t}else m=m<<1,l=A;n[f>>2]=ve,n[ve+24>>2]=l,n[ve+12>>2]=ve,n[ve+8>>2]=ve;break e}while(!1);zt=l+8|0,Ft=n[zt>>2]|0,n[Ft+12>>2]=ve,n[zt>>2]=ve,n[ve+8>>2]=Ft,n[ve+12>>2]=l,n[ve+24>>2]=0}while(!1);return Ft=N+8|0,ft=Bi,Ft|0}else De=te}else De=te;else De=-1;while(!1);if(f=n[5859]|0,f>>>0>=De>>>0)return l=f-De|0,A=n[5862]|0,l>>>0>15?(Ft=A+De|0,n[5862]=Ft,n[5859]=l,n[Ft+4>>2]=l|1,n[A+f>>2]=l,n[A+4>>2]=De|3):(n[5859]=0,n[5862]=0,n[A+4>>2]=f|3,Ft=A+f+4|0,n[Ft>>2]=n[Ft>>2]|1),Ft=A+8|0,ft=Bi,Ft|0;if(z=n[5860]|0,z>>>0>De>>>0)return Mt=z-De|0,n[5860]=Mt,Ft=n[5863]|0,zt=Ft+De|0,n[5863]=zt,n[zt+4>>2]=Mt|1,n[Ft+4>>2]=De|3,Ft=Ft+8|0,ft=Bi,Ft|0;if(n[5975]|0?A=n[5977]|0:(n[5977]=4096,n[5976]=4096,n[5978]=-1,n[5979]=-1,n[5980]=0,n[5968]=0,n[5975]=He&-16^1431655768,A=4096),N=De+48|0,X=De+47|0,T=A+X|0,b=0-A|0,te=T&b,te>>>0<=De>>>0||(A=n[5967]|0,A|0&&(ve=n[5965]|0,He=ve+te|0,He>>>0<=ve>>>0|He>>>0>A>>>0)))return Ft=0,ft=Bi,Ft|0;e:do if(n[5968]&4)l=0,gt=143;else{f=n[5863]|0;t:do if(f){for(m=23876;He=n[m>>2]|0,!(He>>>0<=f>>>0&&(He+(n[m+4>>2]|0)|0)>>>0>f>>>0);)if(A=n[m+8>>2]|0,A)m=A;else{gt=128;break t}if(l=T-z&b,l>>>0<2147483647)if(A=q(l|0)|0,(A|0)==((n[m>>2]|0)+(n[m+4>>2]|0)|0)){if((A|0)!=-1){z=l,T=A,gt=145;break e}}else m=A,gt=136;else l=0}else gt=128;while(!1);do if((gt|0)==128)if(f=q(0)|0,(f|0)!=-1&&(l=f,nt=n[5976]|0,st=nt+-1|0,l=(st&l|0?(st+l&0-nt)-l|0:0)+te|0,nt=n[5965]|0,st=l+nt|0,l>>>0>De>>>0&l>>>0<2147483647)){if(He=n[5967]|0,He|0&&st>>>0<=nt>>>0|st>>>0>He>>>0){l=0;break}if(A=q(l|0)|0,(A|0)==(f|0)){z=l,T=f,gt=145;break e}else m=A,gt=136}else l=0;while(!1);do if((gt|0)==136){if(f=0-l|0,!(N>>>0>l>>>0&(l>>>0<2147483647&(m|0)!=-1)))if((m|0)==-1){l=0;break}else{z=l,T=m,gt=145;break e}if(A=n[5977]|0,A=X-l+A&0-A,A>>>0>=2147483647){z=l,T=m,gt=145;break e}if((q(A|0)|0)==-1){q(f|0)|0,l=0;break}else{z=A+l|0,T=m,gt=145;break e}}while(!1);n[5968]=n[5968]|4,gt=143}while(!1);if((gt|0)==143&&te>>>0<2147483647&&(Mt=q(te|0)|0,st=q(0)|0,Ot=st-Mt|0,Ut=Ot>>>0>(De+40|0)>>>0,!((Mt|0)==-1|Ut^1|Mt>>>0<st>>>0&((Mt|0)!=-1&(st|0)!=-1)^1))&&(z=Ut?Ot:l,T=Mt,gt=145),(gt|0)==145){l=(n[5965]|0)+z|0,n[5965]=l,l>>>0>(n[5966]|0)>>>0&&(n[5966]=l),X=n[5863]|0;e:do if(X){for(l=23876;;){if(A=n[l>>2]|0,f=n[l+4>>2]|0,(T|0)==(A+f|0)){gt=154;break}if(m=n[l+8>>2]|0,m)l=m;else break}if((gt|0)==154&&(zt=l+4|0,(n[l+12>>2]&8|0)==0)&&T>>>0>X>>>0&A>>>0<=X>>>0){n[zt>>2]=f+z,Ft=(n[5860]|0)+z|0,Mt=X+8|0,Mt=Mt&7|0?0-Mt&7:0,zt=X+Mt|0,Mt=Ft-Mt|0,n[5863]=zt,n[5860]=Mt,n[zt+4>>2]=Mt|1,n[X+Ft+4>>2]=40,n[5864]=n[5979];break}for(T>>>0<(n[5861]|0)>>>0&&(n[5861]=T),f=T+z|0,l=23876;;){if((n[l>>2]|0)==(f|0)){gt=162;break}if(A=n[l+8>>2]|0,A)l=A;else break}if((gt|0)==162&&!(n[l+12>>2]&8|0)){n[l>>2]=T,ve=l+4|0,n[ve>>2]=(n[ve>>2]|0)+z,ve=T+8|0,ve=T+(ve&7|0?0-ve&7:0)|0,l=f+8|0,l=f+(l&7|0?0-l&7:0)|0,te=ve+De|0,N=l-ve-De|0,n[ve+4>>2]=De|3;t:do if((X|0)==(l|0))Ft=(n[5860]|0)+N|0,n[5860]=Ft,n[5863]=te,n[te+4>>2]=Ft|1;else{if((n[5862]|0)==(l|0)){Ft=(n[5859]|0)+N|0,n[5859]=Ft,n[5862]=te,n[te+4>>2]=Ft|1,n[te+Ft>>2]=Ft;break}if(A=n[l+4>>2]|0,(A&3|0)==1){z=A&-8,m=A>>>3;i:do if(A>>>0<256)if(A=n[l+8>>2]|0,f=n[l+12>>2]|0,(f|0)==(A|0)){n[5857]=n[5857]&~(1<<m);break}else{n[A+12>>2]=f,n[f+8>>2]=A;break}else{T=n[l+24>>2]|0,A=n[l+12>>2]|0;do if((A|0)==(l|0)){if(f=l+16|0,m=f+4|0,A=n[m>>2]|0,A)f=m;else if(A=n[f>>2]|0,!A){A=0;break}for(;;)if(b=A+20|0,m=n[b>>2]|0,m)A=m,f=b;else if(b=A+16|0,m=n[b>>2]|0,m)A=m,f=b;else break;n[f>>2]=0}else Ft=n[l+8>>2]|0,n[Ft+12>>2]=A,n[A+8>>2]=Ft;while(!1);if(!T)break;f=n[l+28>>2]|0,m=23732+(f<<2)|0;do if((n[m>>2]|0)!=(l|0)){if(Ft=T+16|0,n[((n[Ft>>2]|0)==(l|0)?Ft:T+20|0)>>2]=A,!A)break i}else{if(n[m>>2]=A,A|0)break;n[5858]=n[5858]&~(1<<f);break i}while(!1);if(n[A+24>>2]=T,f=l+16|0,m=n[f>>2]|0,m|0&&(n[A+16>>2]=m,n[m+24>>2]=A),f=n[f+4>>2]|0,!f)break;n[A+20>>2]=f,n[f+24>>2]=A}while(!1);l=l+z|0,b=z+N|0}else b=N;if(l=l+4|0,n[l>>2]=n[l>>2]&-2,n[te+4>>2]=b|1,n[te+b>>2]=b,l=b>>>3,b>>>0<256){f=23468+(l<<1<<2)|0,A=n[5857]|0,l=1<<l,A&l?(A=f+8|0,l=n[A>>2]|0):(n[5857]=A|l,l=f,A=f+8|0),n[A>>2]=te,n[l+12>>2]=te,n[te+8>>2]=l,n[te+12>>2]=f;break}l=b>>>8;do if(!l)m=0;else{if(b>>>0>16777215){m=31;break}zt=(l+1048320|0)>>>16&8,Ft=l<<zt,Mt=(Ft+520192|0)>>>16&4,Ft=Ft<<Mt,m=(Ft+245760|0)>>>16&2,m=14-(Mt|zt|m)+(Ft<<m>>>15)|0,m=b>>>(m+7|0)&1|m<<1}while(!1);if(l=23732+(m<<2)|0,n[te+28>>2]=m,A=te+16|0,n[A+4>>2]=0,n[A>>2]=0,A=n[5858]|0,f=1<<m,!(A&f)){n[5858]=A|f,n[l>>2]=te,n[te+24>>2]=l,n[te+12>>2]=te,n[te+8>>2]=te;break}l=n[l>>2]|0;i:do if((n[l+4>>2]&-8|0)!=(b|0)){for(m=b<<((m|0)==31?0:25-(m>>>1)|0);f=l+16+(m>>>31<<2)|0,A=n[f>>2]|0,!!A;)if((n[A+4>>2]&-8|0)==(b|0)){l=A;break i}else m=m<<1,l=A;n[f>>2]=te,n[te+24>>2]=l,n[te+12>>2]=te,n[te+8>>2]=te;break t}while(!1);zt=l+8|0,Ft=n[zt>>2]|0,n[Ft+12>>2]=te,n[zt>>2]=te,n[te+8>>2]=Ft,n[te+12>>2]=l,n[te+24>>2]=0}while(!1);return Ft=ve+8|0,ft=Bi,Ft|0}for(l=23876;A=n[l>>2]|0,!(A>>>0<=X>>>0&&(Ft=A+(n[l+4>>2]|0)|0,Ft>>>0>X>>>0));)l=n[l+8>>2]|0;b=Ft+-47|0,A=b+8|0,A=b+(A&7|0?0-A&7:0)|0,b=X+16|0,A=A>>>0<b>>>0?X:A,l=A+8|0,f=z+-40|0,Mt=T+8|0,Mt=Mt&7|0?0-Mt&7:0,zt=T+Mt|0,Mt=f-Mt|0,n[5863]=zt,n[5860]=Mt,n[zt+4>>2]=Mt|1,n[T+f+4>>2]=40,n[5864]=n[5979],f=A+4|0,n[f>>2]=27,n[l>>2]=n[5969],n[l+4>>2]=n[5970],n[l+8>>2]=n[5971],n[l+12>>2]=n[5972],n[5969]=T,n[5970]=z,n[5972]=0,n[5971]=l,l=A+24|0;do zt=l,l=l+4|0,n[l>>2]=7;while((zt+8|0)>>>0<Ft>>>0);if((A|0)!=(X|0)){if(T=A-X|0,n[f>>2]=n[f>>2]&-2,n[X+4>>2]=T|1,n[A>>2]=T,l=T>>>3,T>>>0<256){f=23468+(l<<1<<2)|0,A=n[5857]|0,l=1<<l,A&l?(A=f+8|0,l=n[A>>2]|0):(n[5857]=A|l,l=f,A=f+8|0),n[A>>2]=X,n[l+12>>2]=X,n[X+8>>2]=l,n[X+12>>2]=f;break}if(l=T>>>8,l?T>>>0>16777215?m=31:(zt=(l+1048320|0)>>>16&8,Ft=l<<zt,Mt=(Ft+520192|0)>>>16&4,Ft=Ft<<Mt,m=(Ft+245760|0)>>>16&2,m=14-(Mt|zt|m)+(Ft<<m>>>15)|0,m=T>>>(m+7|0)&1|m<<1):m=0,f=23732+(m<<2)|0,n[X+28>>2]=m,n[X+20>>2]=0,n[b>>2]=0,l=n[5858]|0,A=1<<m,!(l&A)){n[5858]=l|A,n[f>>2]=X,n[X+24>>2]=f,n[X+12>>2]=X,n[X+8>>2]=X;break}l=n[f>>2]|0;t:do if((n[l+4>>2]&-8|0)!=(T|0)){for(m=T<<((m|0)==31?0:25-(m>>>1)|0);f=l+16+(m>>>31<<2)|0,A=n[f>>2]|0,!!A;)if((n[A+4>>2]&-8|0)==(T|0)){l=A;break t}else m=m<<1,l=A;n[f>>2]=X,n[X+24>>2]=l,n[X+12>>2]=X,n[X+8>>2]=X;break e}while(!1);zt=l+8|0,Ft=n[zt>>2]|0,n[Ft+12>>2]=X,n[zt>>2]=X,n[X+8>>2]=Ft,n[X+12>>2]=l,n[X+24>>2]=0}}else Ft=n[5861]|0,(Ft|0)==0|T>>>0<Ft>>>0&&(n[5861]=T),n[5969]=T,n[5970]=z,n[5972]=0,n[5866]=n[5975],n[5865]=-1,n[5870]=23468,n[5869]=23468,n[5872]=23476,n[5871]=23476,n[5874]=23484,n[5873]=23484,n[5876]=23492,n[5875]=23492,n[5878]=23500,n[5877]=23500,n[5880]=23508,n[5879]=23508,n[5882]=23516,n[5881]=23516,n[5884]=23524,n[5883]=23524,n[5886]=23532,n[5885]=23532,n[5888]=23540,n[5887]=23540,n[5890]=23548,n[5889]=23548,n[5892]=23556,n[5891]=23556,n[5894]=23564,n[5893]=23564,n[5896]=23572,n[5895]=23572,n[5898]=23580,n[5897]=23580,n[5900]=23588,n[5899]=23588,n[5902]=23596,n[5901]=23596,n[5904]=23604,n[5903]=23604,n[5906]=23612,n[5905]=23612,n[5908]=23620,n[5907]=23620,n[5910]=23628,n[5909]=23628,n[5912]=23636,n[5911]=23636,n[5914]=23644,n[5913]=23644,n[5916]=23652,n[5915]=23652,n[5918]=23660,n[5917]=23660,n[5920]=23668,n[5919]=23668,n[5922]=23676,n[5921]=23676,n[5924]=23684,n[5923]=23684,n[5926]=23692,n[5925]=23692,n[5928]=23700,n[5927]=23700,n[5930]=23708,n[5929]=23708,n[5932]=23716,n[5931]=23716,Ft=z+-40|0,Mt=T+8|0,Mt=Mt&7|0?0-Mt&7:0,zt=T+Mt|0,Mt=Ft-Mt|0,n[5863]=zt,n[5860]=Mt,n[zt+4>>2]=Mt|1,n[T+Ft+4>>2]=40,n[5864]=n[5979];while(!1);if(l=n[5860]|0,l>>>0>De>>>0)return Mt=l-De|0,n[5860]=Mt,Ft=n[5863]|0,zt=Ft+De|0,n[5863]=zt,n[zt+4>>2]=Mt|1,n[Ft+4>>2]=De|3,Ft=Ft+8|0,ft=Bi,Ft|0}return Ft=gl()|0,n[Ft>>2]=12,Ft=0,ft=Bi,Ft|0}function _(A){A=A|0;var l=0,f=0,m=0,b=0,T=0,z=0,N=0,X=0;if(A){f=A+-8|0,b=n[5861]|0,A=n[A+-4>>2]|0,l=A&-8,X=f+l|0;do if(A&1)N=f,z=f;else{if(m=n[f>>2]|0,!(A&3)||(z=f+(0-m)|0,T=m+l|0,z>>>0<b>>>0))return;if((n[5862]|0)==(z|0)){if(A=X+4|0,l=n[A>>2]|0,(l&3|0)!=3){N=z,l=T;break}n[5859]=T,n[A>>2]=l&-2,n[z+4>>2]=T|1,n[z+T>>2]=T;return}if(f=m>>>3,m>>>0<256)if(A=n[z+8>>2]|0,l=n[z+12>>2]|0,(l|0)==(A|0)){n[5857]=n[5857]&~(1<<f),N=z,l=T;break}else{n[A+12>>2]=l,n[l+8>>2]=A,N=z,l=T;break}b=n[z+24>>2]|0,A=n[z+12>>2]|0;do if((A|0)==(z|0)){if(l=z+16|0,f=l+4|0,A=n[f>>2]|0,A)l=f;else if(A=n[l>>2]|0,!A){A=0;break}for(;;)if(m=A+20|0,f=n[m>>2]|0,f)A=f,l=m;else if(m=A+16|0,f=n[m>>2]|0,f)A=f,l=m;else break;n[l>>2]=0}else N=n[z+8>>2]|0,n[N+12>>2]=A,n[A+8>>2]=N;while(!1);if(b){if(l=n[z+28>>2]|0,f=23732+(l<<2)|0,(n[f>>2]|0)==(z|0)){if(n[f>>2]=A,!A){n[5858]=n[5858]&~(1<<l),N=z,l=T;break}}else if(N=b+16|0,n[((n[N>>2]|0)==(z|0)?N:b+20|0)>>2]=A,!A){N=z,l=T;break}n[A+24>>2]=b,l=z+16|0,f=n[l>>2]|0,f|0&&(n[A+16>>2]=f,n[f+24>>2]=A),l=n[l+4>>2]|0,l?(n[A+20>>2]=l,n[l+24>>2]=A,N=z,l=T):(N=z,l=T)}else N=z,l=T}while(!1);if(!(z>>>0>=X>>>0)&&(A=X+4|0,m=n[A>>2]|0,!!(m&1))){if(m&2)n[A>>2]=m&-2,n[N+4>>2]=l|1,n[z+l>>2]=l,b=l;else{if((n[5863]|0)==(X|0)){if(X=(n[5860]|0)+l|0,n[5860]=X,n[5863]=N,n[N+4>>2]=X|1,(N|0)!=(n[5862]|0))return;n[5862]=0,n[5859]=0;return}if((n[5862]|0)==(X|0)){X=(n[5859]|0)+l|0,n[5859]=X,n[5862]=z,n[N+4>>2]=X|1,n[z+X>>2]=X;return}b=(m&-8)+l|0,f=m>>>3;do if(m>>>0<256)if(l=n[X+8>>2]|0,A=n[X+12>>2]|0,(A|0)==(l|0)){n[5857]=n[5857]&~(1<<f);break}else{n[l+12>>2]=A,n[A+8>>2]=l;break}else{T=n[X+24>>2]|0,A=n[X+12>>2]|0;do if((A|0)==(X|0)){if(l=X+16|0,f=l+4|0,A=n[f>>2]|0,A)l=f;else if(A=n[l>>2]|0,!A){f=0;break}for(;;)if(m=A+20|0,f=n[m>>2]|0,f)A=f,l=m;else if(m=A+16|0,f=n[m>>2]|0,f)A=f,l=m;else break;n[l>>2]=0,f=A}else f=n[X+8>>2]|0,n[f+12>>2]=A,n[A+8>>2]=f,f=A;while(!1);if(T|0){if(A=n[X+28>>2]|0,l=23732+(A<<2)|0,(n[l>>2]|0)==(X|0)){if(n[l>>2]=f,!f){n[5858]=n[5858]&~(1<<A);break}}else if(m=T+16|0,n[((n[m>>2]|0)==(X|0)?m:T+20|0)>>2]=f,!f)break;n[f+24>>2]=T,A=X+16|0,l=n[A>>2]|0,l|0&&(n[f+16>>2]=l,n[l+24>>2]=f),A=n[A+4>>2]|0,A|0&&(n[f+20>>2]=A,n[A+24>>2]=f)}}while(!1);if(n[N+4>>2]=b|1,n[z+b>>2]=b,(N|0)==(n[5862]|0)){n[5859]=b;return}}if(A=b>>>3,b>>>0<256){f=23468+(A<<1<<2)|0,l=n[5857]|0,A=1<<A,l&A?(l=f+8|0,A=n[l>>2]|0):(n[5857]=l|A,A=f,l=f+8|0),n[l>>2]=N,n[A+12>>2]=N,n[N+8>>2]=A,n[N+12>>2]=f;return}A=b>>>8,A?b>>>0>16777215?m=31:(z=(A+1048320|0)>>>16&8,X=A<<z,T=(X+520192|0)>>>16&4,X=X<<T,m=(X+245760|0)>>>16&2,m=14-(T|z|m)+(X<<m>>>15)|0,m=b>>>(m+7|0)&1|m<<1):m=0,A=23732+(m<<2)|0,n[N+28>>2]=m,n[N+20>>2]=0,n[N+16>>2]=0,l=n[5858]|0,f=1<<m;e:do if(!(l&f))n[5858]=l|f,n[A>>2]=N,n[N+24>>2]=A,n[N+12>>2]=N,n[N+8>>2]=N;else{A=n[A>>2]|0;t:do if((n[A+4>>2]&-8|0)!=(b|0)){for(m=b<<((m|0)==31?0:25-(m>>>1)|0);f=A+16+(m>>>31<<2)|0,l=n[f>>2]|0,!!l;)if((n[l+4>>2]&-8|0)==(b|0)){A=l;break t}else m=m<<1,A=l;n[f>>2]=N,n[N+24>>2]=A,n[N+12>>2]=N,n[N+8>>2]=N;break e}while(!1);z=A+8|0,X=n[z>>2]|0,n[X+12>>2]=N,n[z>>2]=N,n[N+8>>2]=X,n[N+12>>2]=A,n[N+24>>2]=0}while(!1);if(X=(n[5865]|0)+-1|0,n[5865]=X,!(X|0)){for(A=23884;A=n[A>>2]|0,A;)A=A+8|0;n[5865]=-1}}}}function S(A,l){A=A|0,l=l|0;var f=0;return A?(f=Mi(l,A)|0,(l|A)>>>0>65535&&(f=((f>>>0)/(A>>>0)|0|0)==(l|0)?f:-1)):f=0,A=rs(f)|0,!A||!(n[A+-4>>2]&3)||M(A|0,0,f|0)|0,A|0}function C(A,l,f,m){return A=A|0,l=l|0,f=f|0,m=m|0,f=A+f>>>0,Fi(l+m+(f>>>0<A>>>0|0)>>>0|0),f|0|0}function E(A,l,f,m){return A=A|0,l=l|0,f=f|0,m=m|0,m=l-m-(f>>>0>A>>>0|0)>>>0,Fi(m|0),A-f>>>0|0|0}function H(A){return A=A|0,(A?31-(Pt(A^A-1)|0)|0:32)|0}function W(A,l,f,m,b){A=A|0,l=l|0,f=f|0,m=m|0,b=b|0;var T=0,z=0,N=0,X=0,te=0,ve=0,De=0,He=0,nt=0,st=0;if(ve=A,X=l,te=X,z=f,He=m,N=He,!te)return T=(b|0)!=0,N?T?(n[b>>2]=A|0,n[b+4>>2]=l&0,He=0,b=0,Fi(He|0),b|0):(He=0,b=0,Fi(He|0),b|0):(T&&(n[b>>2]=(ve>>>0)%(z>>>0),n[b+4>>2]=0),He=0,b=(ve>>>0)/(z>>>0)>>>0,Fi(He|0),b|0);T=(N|0)==0;do if(z){if(!T){if(T=(Pt(N|0)|0)-(Pt(te|0)|0)|0,T>>>0<=31){De=T+1|0,N=31-T|0,l=T-31>>31,z=De,A=ve>>>(De>>>0)&l|te<<N,l=te>>>(De>>>0)&l,T=0,N=ve<<N;break}return b?(n[b>>2]=A|0,n[b+4>>2]=X|l&0,He=0,b=0,Fi(He|0),b|0):(He=0,b=0,Fi(He|0),b|0)}if(T=z-1|0,T&z|0){N=(Pt(z|0)|0)+33-(Pt(te|0)|0)|0,st=64-N|0,De=32-N|0,X=De>>31,nt=N-32|0,l=nt>>31,z=N,A=De-1>>31&te>>>(nt>>>0)|(te<<De|ve>>>(N>>>0))&l,l=l&te>>>(N>>>0),T=ve<<st&X,N=(te<<st|ve>>>(nt>>>0))&X|ve<<De&N-33>>31;break}return b|0&&(n[b>>2]=T&ve,n[b+4>>2]=0),(z|0)==1?(nt=X|l&0,st=A|0|0,Fi(nt|0),st|0):(st=H(z|0)|0,nt=te>>>(st>>>0)|0,st=te<<32-st|ve>>>(st>>>0)|0,Fi(nt|0),st|0)}else{if(T)return b|0&&(n[b>>2]=(te>>>0)%(z>>>0),n[b+4>>2]=0),nt=0,st=(te>>>0)/(z>>>0)>>>0,Fi(nt|0),st|0;if(!ve)return b|0&&(n[b>>2]=0,n[b+4>>2]=(te>>>0)%(N>>>0)),nt=0,st=(te>>>0)/(N>>>0)>>>0,Fi(nt|0),st|0;if(T=N-1|0,!(T&N))return b|0&&(n[b>>2]=A|0,n[b+4>>2]=T&te|l&0),nt=0,st=te>>>((H(N|0)|0)>>>0),Fi(nt|0),st|0;if(T=(Pt(N|0)|0)-(Pt(te|0)|0)|0,T>>>0<=30){l=T+1|0,N=31-T|0,z=l,A=te<<N|ve>>>(l>>>0),l=te>>>(l>>>0),T=0,N=ve<<N;break}return b?(n[b>>2]=A|0,n[b+4>>2]=X|l&0,nt=0,st=0,Fi(nt|0),st|0):(nt=0,st=0,Fi(nt|0),st|0)}while(!1);if(!z)te=N,X=0,N=0;else{De=f|0|0,ve=He|m&0,te=C(De|0,ve|0,-1,-1)|0,f=xt()|0,X=N,N=0;do m=X,X=T>>>31|X<<1,T=N|T<<1,m=A<<1|m>>>31|0,He=A>>>31|l<<1|0,E(te|0,f|0,m|0,He|0)|0,st=xt()|0,nt=st>>31|((st|0)<0?-1:0)<<1,N=nt&1,A=E(m|0,He|0,nt&De|0,(((st|0)<0?-1:0)>>31|((st|0)<0?-1:0)<<1)&ve|0)|0,l=xt()|0,z=z-1|0;while(z|0);te=X,X=0}return z=0,b|0&&(n[b>>2]=A,n[b+4>>2]=l),nt=(T|0)>>>31|(te|z)<<1|(z<<1|T>>>31)&0|X,st=(T<<1|0)&-2|N,Fi(nt|0),st|0}function Z(A,l,f,m){A=A|0,l=l|0,f=f|0,m=m|0;var b=0,T=0,z=0,N=0,X=0,te=0;return te=l>>31|((l|0)<0?-1:0)<<1,X=((l|0)<0?-1:0)>>31|((l|0)<0?-1:0)<<1,T=m>>31|((m|0)<0?-1:0)<<1,b=((m|0)<0?-1:0)>>31|((m|0)<0?-1:0)<<1,N=E(te^A|0,X^l|0,te|0,X|0)|0,z=xt()|0,A=T^te,l=b^X,E((W(N,z,E(T^f|0,b^m|0,T|0,b|0)|0,xt()|0,0)|0)^A|0,(xt()|0)^l|0,A|0,l|0)|0}function ae(A,l){A=A|0,l=l|0;var f=0,m=0,b=0,T=0;return T=A&65535,b=l&65535,f=Mi(b,T)|0,m=A>>>16,A=(f>>>16)+(Mi(b,m)|0)|0,b=l>>>16,l=Mi(b,T)|0,Fi((A>>>16)+(Mi(b,m)|0)+(((A&65535)+l|0)>>>16)|0),A+l<<16|f&65535|0|0}function Ie(A,l,f,m){A=A|0,l=l|0,f=f|0,m=m|0;var b=0,T=0;return b=A,T=f,f=ae(b,T)|0,A=xt()|0,Fi((Mi(l,T)|0)+(Mi(m,b)|0)+A|A&0|0),f|0|0|0}function $e(A,l,f,m){A=A|0,l=l|0,f=f|0,m=m|0;var b=0,T=0,z=0,N=0,X=0,te=0;return b=ft,ft=ft+16|0,N=b|0,z=l>>31|((l|0)<0?-1:0)<<1,T=((l|0)<0?-1:0)>>31|((l|0)<0?-1:0)<<1,te=m>>31|((m|0)<0?-1:0)<<1,X=((m|0)<0?-1:0)>>31|((m|0)<0?-1:0)<<1,A=E(z^A|0,T^l|0,z|0,T|0)|0,l=xt()|0,W(A,l,E(te^f|0,X^m|0,te|0,X|0)|0,xt()|0,N)|0,m=E(n[N>>2]^z|0,n[N+4>>2]^T|0,z|0,T|0)|0,f=xt()|0,ft=b,Fi(f|0),m|0}function ot(A,l,f,m){A=A|0,l=l|0,f=f|0,m=m|0;var b=0,T=0;return T=ft,ft=ft+16|0,b=T|0,W(A,l,f,m,b)|0,ft=T,Fi(n[b+4>>2]|0),n[b>>2]|0|0}function Nt(A,l,f){return A=A|0,l=l|0,f=f|0,(f|0)<32?(Fi(l>>f|0),A>>>f|(l&(1<<f)-1)<<32-f):(Fi(((l|0)<0?-1:0)|0),l>>f-32|0)}function wt(A,l,f){return A=A|0,l=l|0,f=f|0,(f|0)<32?(Fi(l>>>f|0),A>>>f|(l&(1<<f)-1)<<32-f):(Fi(0),l>>>f-32|0)}function It(A,l,f){return A=A|0,l=l|0,f=f|0,(f|0)<32?(Fi(l<<f|(A&(1<<f)-1<<32-f)>>>32-f|0),A<<f):(Fi(A<<f-32|0),0)}function R(A,l){return A=+A,l=+l,A!=A?+l:l!=l?+A:+fn(+A,+l)}function s(A,l){return A=+A,l=+l,A!=A?+l:l!=l?+A:+nr(+A,+l)}function g(A){return A=+A,A>=0?+ui(A+.5):+vr(A-.5)}function I(A,l,f){A=A|0,l=l|0,f=f|0;var m=0,b=0,T=0;if((f|0)>=8192)return Gr(A|0,l|0,f|0)|0,A|0;if(T=A|0,b=A+f|0,(A&3)==(l&3)){for(;A&3;){if(!f)return T|0;pt[A>>0]=pt[l>>0]|0,A=A+1|0,l=l+1|0,f=f-1|0}for(f=b&-4|0,m=f-64|0;(A|0)<=(m|0);)n[A>>2]=n[l>>2],n[A+4>>2]=n[l+4>>2],n[A+8>>2]=n[l+8>>2],n[A+12>>2]=n[l+12>>2],n[A+16>>2]=n[l+16>>2],n[A+20>>2]=n[l+20>>2],n[A+24>>2]=n[l+24>>2],n[A+28>>2]=n[l+28>>2],n[A+32>>2]=n[l+32>>2],n[A+36>>2]=n[l+36>>2],n[A+40>>2]=n[l+40>>2],n[A+44>>2]=n[l+44>>2],n[A+48>>2]=n[l+48>>2],n[A+52>>2]=n[l+52>>2],n[A+56>>2]=n[l+56>>2],n[A+60>>2]=n[l+60>>2],A=A+64|0,l=l+64|0;for(;(A|0)<(f|0);)n[A>>2]=n[l>>2],A=A+4|0,l=l+4|0}else for(f=b-4|0;(A|0)<(f|0);)pt[A>>0]=pt[l>>0]|0,pt[A+1>>0]=pt[l+1>>0]|0,pt[A+2>>0]=pt[l+2>>0]|0,pt[A+3>>0]=pt[l+3>>0]|0,A=A+4|0,l=l+4|0;for(;(A|0)<(b|0);)pt[A>>0]=pt[l>>0]|0,A=A+1|0,l=l+1|0;return T|0}function M(A,l,f){A=A|0,l=l|0,f=f|0;var m=0,b=0,T=0,z=0;if(T=A+f|0,l=l&255,(f|0)>=67){for(;A&3;)pt[A>>0]=l,A=A+1|0;for(m=T&-4|0,z=l|l<<8|l<<16|l<<24,b=m-64|0;(A|0)<=(b|0);)n[A>>2]=z,n[A+4>>2]=z,n[A+8>>2]=z,n[A+12>>2]=z,n[A+16>>2]=z,n[A+20>>2]=z,n[A+24>>2]=z,n[A+28>>2]=z,n[A+32>>2]=z,n[A+36>>2]=z,n[A+40>>2]=z,n[A+44>>2]=z,n[A+48>>2]=z,n[A+52>>2]=z,n[A+56>>2]=z,n[A+60>>2]=z,A=A+64|0;for(;(A|0)<(m|0);)n[A>>2]=z,A=A+4|0}for(;(A|0)<(T|0);)pt[A>>0]=l,A=A+1|0;return T-f|0}function F(A){return A=+A,A>=0?+ui(A+.5):+vr(A-.5)}function q(A){A=A|0;var l=0,f=0,m=0;return m=ys()|0,f=n[Jt>>2]|0,l=f+A|0,(A|0)>0&(l|0)<(f|0)|(l|0)<0?(Hn(l|0)|0,Cr(12),-1):(l|0)>(m|0)&&!(Et(l|0)|0)?(Cr(12),-1):(n[Jt>>2]=l,f|0)}return{___divdi3:Z,___muldi3:Ie,___remdi3:$e,___uremdi3:ot,_areNeighborCells:to,_bitshift64Ashr:Nt,_bitshift64Lshr:wt,_bitshift64Shl:It,_calloc:S,_cellAreaKm2:Zs,_cellAreaM2:Js,_cellAreaRads2:cs,_cellToBoundary:zr,_cellToCenterChild:Lr,_cellToChildPos:so,_cellToChildren:On,_cellToChildrenSize:ws,_cellToLatLng:is,_cellToLocalIj:oo,_cellToParent:Uo,_cellToVertex:zn,_cellToVertexes:Io,_cellsToDirectedEdge:bo,_cellsToLinkedMultiPolygon:re,_childPosToCell:So,_compactCells:no,_destroyLinkedMultiPolygon:ao,_directedEdgeToBoundary:Hs,_directedEdgeToCells:xo,_edgeLengthKm:cl,_edgeLengthM:jr,_edgeLengthRads:fa,_emscripten_replace_memory:gr,_free:_,_getBaseCellNumber:TA,_getDirectedEdgeDestination:us,_getDirectedEdgeOrigin:Fo,_getHexagonAreaAvgKm2:ii,_getHexagonAreaAvgM2:Ci,_getHexagonEdgeLengthAvgKm:ln,_getHexagonEdgeLengthAvgM:Pn,_getIcosahedronFaces:Ba,_getNumCells:Qn,_getPentagons:qs,_getRes0Cells:Ma,_getResolution:mr,_greatCircleDistanceKm:Si,_greatCircleDistanceM:gi,_greatCircleDistanceRads:Xt,_gridDisk:go,_gridDiskDistances:Is,_gridDistance:rn,_gridPathCells:eu,_gridPathCellsSize:hl,_gridRingUnsafe:$a,_i64Add:C,_i64Subtract:E,_isPentagon:Ar,_isResClassIII:Kr,_isValidCell:Vo,_isValidDirectedEdge:io,_isValidVertex:sA,_latLngToCell:ha,_llvm_maxnum_f64:R,_llvm_minnum_f64:s,_llvm_round_f64:g,_localIjToCell:zl,_malloc:rs,_maxFaceCount:pA,_maxGridDiskSize:$o,_maxPolygonToCellsSize:mo,_memcpy:I,_memset:M,_originToDirectedEdges:IA,_pentagonCount:Bs,_polygonToCells:sa,_readInt64AsDoubleFromPointer:fl,_res0CellCount:yr,_round:F,_sbrk:q,_sizeOfCellBoundary:_u,_sizeOfCoordIJ:Go,_sizeOfGeoLoop:vu,_sizeOfGeoPolygon:HA,_sizeOfH3Index:ks,_sizeOfLatLng:mu,_sizeOfLinkedGeoPolygon:la,_uncompactCells:iA,_uncompactCellsSize:_r,_vertexToLatLng:ru,establishStackSpace:va,stackAlloc:Xs,stackRestore:po,stackSave:Ks}}(Ne,Ue,lt);t.___divdi3=de.___divdi3,t.___muldi3=de.___muldi3,t.___remdi3=de.___remdi3,t.___uremdi3=de.___uremdi3,t._areNeighborCells=de._areNeighborCells,t._bitshift64Ashr=de._bitshift64Ashr,t._bitshift64Lshr=de._bitshift64Lshr,t._bitshift64Shl=de._bitshift64Shl,t._calloc=de._calloc,t._cellAreaKm2=de._cellAreaKm2,t._cellAreaM2=de._cellAreaM2,t._cellAreaRads2=de._cellAreaRads2,t._cellToBoundary=de._cellToBoundary,t._cellToCenterChild=de._cellToCenterChild,t._cellToChildPos=de._cellToChildPos,t._cellToChildren=de._cellToChildren,t._cellToChildrenSize=de._cellToChildrenSize,t._cellToLatLng=de._cellToLatLng,t._cellToLocalIj=de._cellToLocalIj,t._cellToParent=de._cellToParent,t._cellToVertex=de._cellToVertex,t._cellToVertexes=de._cellToVertexes,t._cellsToDirectedEdge=de._cellsToDirectedEdge,t._cellsToLinkedMultiPolygon=de._cellsToLinkedMultiPolygon,t._childPosToCell=de._childPosToCell,t._compactCells=de._compactCells,t._destroyLinkedMultiPolygon=de._destroyLinkedMultiPolygon,t._directedEdgeToBoundary=de._directedEdgeToBoundary,t._directedEdgeToCells=de._directedEdgeToCells,t._edgeLengthKm=de._edgeLengthKm,t._edgeLengthM=de._edgeLengthM,t._edgeLengthRads=de._edgeLengthRads;var ue=t._emscripten_replace_memory=de._emscripten_replace_memory;t._free=de._free,t._getBaseCellNumber=de._getBaseCellNumber,t._getDirectedEdgeDestination=de._getDirectedEdgeDestination,t._getDirectedEdgeOrigin=de._getDirectedEdgeOrigin,t._getHexagonAreaAvgKm2=de._getHexagonAreaAvgKm2,t._getHexagonAreaAvgM2=de._getHexagonAreaAvgM2,t._getHexagonEdgeLengthAvgKm=de._getHexagonEdgeLengthAvgKm,t._getHexagonEdgeLengthAvgM=de._getHexagonEdgeLengthAvgM,t._getIcosahedronFaces=de._getIcosahedronFaces,t._getNumCells=de._getNumCells,t._getPentagons=de._getPentagons,t._getRes0Cells=de._getRes0Cells,t._getResolution=de._getResolution,t._greatCircleDistanceKm=de._greatCircleDistanceKm,t._greatCircleDistanceM=de._greatCircleDistanceM,t._greatCircleDistanceRads=de._greatCircleDistanceRads,t._gridDisk=de._gridDisk,t._gridDiskDistances=de._gridDiskDistances,t._gridDistance=de._gridDistance,t._gridPathCells=de._gridPathCells,t._gridPathCellsSize=de._gridPathCellsSize,t._gridRingUnsafe=de._gridRingUnsafe,t._i64Add=de._i64Add,t._i64Subtract=de._i64Subtract,t._isPentagon=de._isPentagon,t._isResClassIII=de._isResClassIII,t._isValidCell=de._isValidCell,t._isValidDirectedEdge=de._isValidDirectedEdge,t._isValidVertex=de._isValidVertex,t._latLngToCell=de._latLngToCell,t._llvm_maxnum_f64=de._llvm_maxnum_f64,t._llvm_minnum_f64=de._llvm_minnum_f64,t._llvm_round_f64=de._llvm_round_f64,t._localIjToCell=de._localIjToCell,t._malloc=de._malloc,t._maxFaceCount=de._maxFaceCount,t._maxGridDiskSize=de._maxGridDiskSize,t._maxPolygonToCellsSize=de._maxPolygonToCellsSize,t._memcpy=de._memcpy,t._memset=de._memset,t._originToDirectedEdges=de._originToDirectedEdges,t._pentagonCount=de._pentagonCount,t._polygonToCells=de._polygonToCells,t._readInt64AsDoubleFromPointer=de._readInt64AsDoubleFromPointer,t._res0CellCount=de._res0CellCount,t._round=de._round,t._sbrk=de._sbrk,t._sizeOfCellBoundary=de._sizeOfCellBoundary,t._sizeOfCoordIJ=de._sizeOfCoordIJ,t._sizeOfGeoLoop=de._sizeOfGeoLoop,t._sizeOfGeoPolygon=de._sizeOfGeoPolygon,t._sizeOfH3Index=de._sizeOfH3Index,t._sizeOfLatLng=de._sizeOfLatLng,t._sizeOfLinkedGeoPolygon=de._sizeOfLinkedGeoPolygon,t._uncompactCells=de._uncompactCells,t._uncompactCellsSize=de._uncompactCellsSize,t._vertexToLatLng=de._vertexToLatLng,t.establishStackSpace=de.establishStackSpace;var Y=t.stackAlloc=de.stackAlloc,ne=t.stackRestore=de.stackRestore,he=t.stackSave=de.stackSave;if(t.asm=de,t.cwrap=ct,t.setValue=se,t.getValue=be,Wi){gn(Wi)||(Wi=h(Wi));{ar();var me=function(ge){ge.byteLength&&(ge=new Uint8Array(ge)),Ke.set(ge,oe),t.memoryInitializerRequest&&delete t.memoryInitializerRequest.response,ti()},pe=function(){v(Wi,me,function(){throw"could not load memory initializer "+Wi})},Oe=je(Wi);if(Oe)me(Oe.buffer);else if(t.memoryInitializerRequest){var ze=function(){var ge=t.memoryInitializerRequest,Ee=ge.response;if(ge.status!==200&&ge.status!==0){var tt=je(t.memoryInitializerRequestURL);if(tt)Ee=tt.buffer;else{console.warn("a problem seems to have happened with Module.memoryInitializerRequest, status: "+ge.status+", retrying "+Wi),pe();return}}me(Ee)};t.memoryInitializerRequest.response?setTimeout(ze,0):t.memoryInitializerRequest.addEventListener("load",ze)}else pe()}}var Be;sn=function ge(){Be||Ye(),Be||(sn=ge)};function Ye(ge){if(ki>0||(Wt(),ki>0))return;function Ee(){Be||(Be=!0,!qe&&(Di(),$t(),t.onRuntimeInitialized&&t.onRuntimeInitialized(),Lt()))}t.setStatus?(t.setStatus("Running..."),setTimeout(function(){setTimeout(function(){t.setStatus("")},1),Ee()},1)):Ee()}t.run=Ye;function Xe(ge){throw t.onAbort&&t.onAbort(ge),ge+="",o(ge),k(ge),qe=!0,"abort("+ge+"). Build with -s ASSERTIONS=1 for more info."}if(t.abort=Xe,t.preInit)for(typeof t.preInit=="function"&&(t.preInit=[t.preInit]);t.preInit.length>0;)t.preInit.pop()();return Ye(),e}(typeof _s=="object"?_s:{}),kr="number",sr=kr,Rd=kr,cr=kr,hr=kr,RA=kr,Fn=kr,uV=[["sizeOfH3Index",kr],["sizeOfLatLng",kr],["sizeOfCellBoundary",kr],["sizeOfGeoLoop",kr],["sizeOfGeoPolygon",kr],["sizeOfLinkedGeoPolygon",kr],["sizeOfCoordIJ",kr],["readInt64AsDoubleFromPointer",kr],["isValidCell",Rd,[cr,hr]],["latLngToCell",sr,[kr,kr,RA,Fn]],["cellToLatLng",sr,[cr,hr,Fn]],["cellToBoundary",sr,[cr,hr,Fn]],["maxGridDiskSize",sr,[kr,Fn]],["gridDisk",sr,[cr,hr,kr,Fn]],["gridDiskDistances",sr,[cr,hr,kr,Fn,Fn]],["gridRingUnsafe",sr,[cr,hr,kr,Fn]],["maxPolygonToCellsSize",sr,[Fn,RA,kr,Fn]],["polygonToCells",sr,[Fn,RA,kr,Fn]],["cellsToLinkedMultiPolygon",sr,[Fn,kr,Fn]],["destroyLinkedMultiPolygon",null,[Fn]],["compactCells",sr,[Fn,Fn,kr,kr]],["uncompactCells",sr,[Fn,kr,kr,Fn,kr,RA]],["uncompactCellsSize",sr,[Fn,kr,kr,RA,Fn]],["isPentagon",Rd,[cr,hr]],["isResClassIII",Rd,[cr,hr]],["getBaseCellNumber",kr,[cr,hr]],["getResolution",kr,[cr,hr]],["maxFaceCount",sr,[cr,hr,Fn]],["getIcosahedronFaces",sr,[cr,hr,Fn]],["cellToParent",sr,[cr,hr,RA,Fn]],["cellToChildren",sr,[cr,hr,RA,Fn]],["cellToCenterChild",sr,[cr,hr,RA,Fn]],["cellToChildrenSize",sr,[cr,hr,RA,Fn]],["cellToChildPos",sr,[cr,hr,RA,Fn]],["childPosToCell",sr,[kr,kr,cr,hr,RA,Fn]],["areNeighborCells",sr,[cr,hr,cr,hr,Fn]],["cellsToDirectedEdge",sr,[cr,hr,cr,hr,Fn]],["getDirectedEdgeOrigin",sr,[cr,hr,Fn]],["getDirectedEdgeDestination",sr,[cr,hr,Fn]],["isValidDirectedEdge",Rd,[cr,hr]],["directedEdgeToCells",sr,[cr,hr,Fn]],["originToDirectedEdges",sr,[cr,hr,Fn]],["directedEdgeToBoundary",sr,[cr,hr,Fn]],["gridDistance",sr,[cr,hr,cr,hr,Fn]],["gridPathCells",sr,[cr,hr,cr,hr,Fn]],["gridPathCellsSize",sr,[cr,hr,cr,hr,Fn]],["cellToLocalIj",sr,[cr,hr,cr,hr,kr,Fn]],["localIjToCell",sr,[cr,hr,Fn,kr,Fn]],["getHexagonAreaAvgM2",sr,[RA,Fn]],["getHexagonAreaAvgKm2",sr,[RA,Fn]],["getHexagonEdgeLengthAvgM",sr,[RA,Fn]],["getHexagonEdgeLengthAvgKm",sr,[RA,Fn]],["greatCircleDistanceM",kr,[Fn,Fn]],["greatCircleDistanceKm",kr,[Fn,Fn]],["greatCircleDistanceRads",kr,[Fn,Fn]],["cellAreaM2",sr,[cr,hr,Fn]],["cellAreaKm2",sr,[cr,hr,Fn]],["cellAreaRads2",sr,[cr,hr,Fn]],["edgeLengthM",sr,[cr,hr,Fn]],["edgeLengthKm",sr,[cr,hr,Fn]],["edgeLengthRads",sr,[cr,hr,Fn]],["getNumCells",sr,[RA,Fn]],["getRes0Cells",sr,[Fn]],["res0CellCount",kr],["getPentagons",sr,[kr,Fn]],["pentagonCount",kr],["cellToVertex",sr,[cr,hr,kr,Fn]],["cellToVertexes",sr,[cr,hr,Fn]],["vertexToLatLng",sr,[cr,hr,Fn]],["isValidVertex",Rd,[cr,hr]]],cV=0,hV=1,fV=2,dV=3,C8=4,pV=5,gV=6,mV=7,_V=8,vV=9,yV=10,bV=11,xV=12,wV=13,SV=14,CV=15,CA={};CA[cV]="Success";CA[hV]="The operation failed but a more specific error is not available";CA[fV]="Argument was outside of acceptable range";CA[dV]="Latitude or longitude arguments were outside of acceptable range";CA[C8]="Resolution argument was outside of acceptable range";CA[pV]="Cell argument was not valid";CA[gV]="Directed edge argument was not valid";CA[mV]="Undirected edge argument was not valid";CA[_V]="Vertex argument was not valid";CA[vV]="Pentagon distortion was encountered";CA[yV]="Duplicate input";CA[bV]="Cell arguments were not neighbors";CA[xV]="Cell arguments had incompatible resolutions";CA[wV]="Memory allocation failed";CA[SV]="Bounds of provided memory were insufficient";CA[CV]="Mode or flags argument was not valid";var EV=1e3,E8=1001,I8=1002,b1={};b1[EV]="Unknown unit";b1[E8]="Array length out of bounds";b1[I8]="Got unexpected null value for H3 index";var IV="Unknown error";function T8(e,t,i){var r=i&&"value"in i,c=new Error((e[t]||IV)+" (code: "+t+(r?", value: "+i.value:"")+")");return c.code=t,c}function k8(e,t){var i=arguments.length===2?{value:t}:{};return T8(CA,e,i)}function M8(e,t){var i=arguments.length===2?{value:t}:{};return T8(b1,e,i)}function Wm(e){if(e!==0)throw k8(e)}var Kl={};uV.forEach(function(t){Kl[t[0]]=_s.cwrap.apply(_s,t)});var s0=16,op=4,Iy=8,TV=8,Ym=Kl.sizeOfH3Index(),Ty=Kl.sizeOfLatLng();Kl.sizeOfCellBoundary();var kV=Kl.sizeOfGeoPolygon(),jd=Kl.sizeOfGeoLoop();Kl.sizeOfLinkedGeoPolygon();Kl.sizeOfCoordIJ();function MV(e){if(typeof e!="number"||e<0||e>15||Math.floor(e)!==e)throw k8(C8,e);return e}function PV(e){if(!e)throw M8(I8);return e}var DV=Math.pow(2,32)-1;function LV(e){if(e>DV)throw M8(E8,e);return e}var BV=/[^0-9a-fA-F]/;function RV(e){if(Array.isArray(e)&&e.length===2&&Number.isInteger(e[0])&&Number.isInteger(e[1]))return e;if(typeof e!="string"||BV.test(e))return[0,0];var t=parseInt(e.substring(0,e.length-8),s0),i=parseInt(e.substring(e.length-8),s0);return[i,t]}function Iw(e){if(e>=0)return e.toString(s0);e=e&2147483647;var t=P8(8,e.toString(s0)),i=(parseInt(t[0],s0)+8).toString(s0);return t=i+t.substring(1),t}function OV(e,t){return Iw(t)+P8(8,Iw(e))}function P8(e,t){for(var i=e-t.length,r="",c=0;c<i;c++)r+="0";return r=r+t,r}function Tw(e,t,i){for(var r=e.length,c=_s._calloc(r,Ty),h=i?1:0,v=i?0:1,o=0;o<r*2;o+=2)_s.HEAPF64.set([e[o/2][h],e[o/2][v]].map(L8),c/Iy+o);return _s.HEAPU32.set([r,c],t/op),t}function zV(e,t){var i=e.length-1,r=_s._calloc(kV),c=0,h=c+jd,v=h+op;Tw(e[0],r+c,t);var o;if(i>0){o=_s._calloc(i,jd);for(var k=0;k<i;k++)Tw(e[k+1],o+jd*k,t)}return _s.setValue(r+h,i,"i32"),_s.setValue(r+v,o,"i32"),r}function FV(e){var t=0,i=t+jd,r=i+op,c=op;_s._free(_s.getValue(e+t+c,"i8*"));var h=_s.getValue(e+i,"i32");if(h>0){for(var v=_s.getValue(e+r,"i32"),o=0;o<h;o++)_s._free(_s.getValue(v+jd*o+c,"i8*"));_s._free(v)}_s._free(e)}function D8(e,t){t===void 0&&(t=0);var i=_s.getValue(e+Ym*t,"i32"),r=_s.getValue(e+Ym*t+op,"i32");return r?OV(i,r):null}function NV(e){return Kl.readInt64AsDoubleFromPointer(e)}function VV(e,t){for(var i=[],r=0;r<t;r++){var c=D8(e,r);c!==null&&i.push(c)}return i}function kw(e){return QV(_s.getValue(e,"double"))}function UV(e){return[kw(e),kw(e+Iy)]}function GV(e,t,i){var r=_s._malloc(Ty);_s.HEAPF64.set([e,t].map(L8),r/Iy);var c=_s._malloc(Ym);try{return Wm(Kl.latLngToCell(r,i,c)),PV(D8(c))}finally{_s._free(c),_s._free(r)}}function Mw(e){var t=_s._malloc(Ty),i=RV(e),r=i[0],c=i[1];try{return Wm(Kl.cellToLatLng(r,c,t)),UV(t)}finally{_s._free(t)}}function HV(e,t,i){if(MV(t),i=!!i,e.length===0||e[0].length===0)return[];var r=typeof e[0][0]=="number"?[e]:e,c=zV(r,i),h=_s._malloc(TV);try{Wm(Kl.maxPolygonToCellsSize(c,t,0,h));var v=LV(NV(h)),o=_s._calloc(v,Ym);try{return Wm(Kl.polygonToCells(c,t,0,o)),VV(o,v)}finally{_s._free(o)}}finally{_s._free(h),FV(c)}}function L8(e){return e*Math.PI/180}function QV(e){return e*180/Math.PI}function qV(e,t,i){i===void 0&&(i={});var r={type:"Feature"};return(i.id===0||i.id)&&(r.id=i.id),i.bbox&&(r.bbox=i.bbox),r.properties=t||{},r.geometry=e,r}function ZV(e,t){t===void 0&&(t={});var i={type:"FeatureCollection"};return t.id&&(i.id=t.id),t.bbox&&(i.bbox=t.bbox),i.features=e,i}function jV(e,t){if(e.type==="Feature")t(e,0);else if(e.type==="FeatureCollection")for(var i=0;i<e.features.length&&t(e.features[i],i)!==!1;i++);}function WV(e){var t={MultiPoint:{coordinates:[],properties:[]},MultiLineString:{coordinates:[],properties:[]},MultiPolygon:{coordinates:[],properties:[]}};return jV(e,function(i){var r,c,h,v;switch((v=i.geometry)===null||v===void 0?void 0:v.type){case"Point":t.MultiPoint.coordinates.push(i.geometry.coordinates),t.MultiPoint.properties.push(i.properties);break;case"MultiPoint":(r=t.MultiPoint.coordinates).push.apply(r,i.geometry.coordinates),t.MultiPoint.properties.push(i.properties);break;case"LineString":t.MultiLineString.coordinates.push(i.geometry.coordinates),t.MultiLineString.properties.push(i.properties);break;case"MultiLineString":(c=t.MultiLineString.coordinates).push.apply(c,i.geometry.coordinates),t.MultiLineString.properties.push(i.properties);break;case"Polygon":t.MultiPolygon.coordinates.push(i.geometry.coordinates),t.MultiPolygon.properties.push(i.properties);break;case"MultiPolygon":(h=t.MultiPolygon.coordinates).push.apply(h,i.geometry.coordinates),t.MultiPolygon.properties.push(i.properties);break}}),ZV(Object.keys(t).filter(function(i){return t[i].coordinates.length}).sort().map(function(i){var r={type:i,coordinates:t[i].coordinates},c={collectedProperties:t[i].properties};return qV(r,c)}))}const B8=e=>()=>e,Sv=e=>{const t=e?(i,r)=>r.minus(i).abs().isLessThanOrEqualTo(e):B8(!1);return(i,r)=>t(i,r)?0:i.comparedTo(r)};function YV(e){const t=e?(i,r,c,h,v)=>i.exponentiatedBy(2).isLessThanOrEqualTo(h.minus(r).exponentiatedBy(2).plus(v.minus(c).exponentiatedBy(2)).times(e)):B8(!1);return(i,r,c)=>{const h=i.x,v=i.y,o=c.x,k=c.y,O=v.minus(k).times(r.x.minus(o)).minus(h.minus(o).times(r.y.minus(k)));return t(O,h,v,o,k)?0:O.comparedTo(0)}}var XV=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,o2=Math.ceil,cu=Math.floor,Cl="[BigNumber Error] ",Pw=Cl+"Number primitive has more than 15 significant digits: ",Lu=1e14,Tr=14,A2=9007199254740991,l2=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],hh=1e7,lA=1e9;function R8(e){var t,i,r,c=We.prototype={constructor:We,toString:null,valueOf:null},h=new We(1),v=20,o=4,k=-7,O=21,j=-1e7,J=1e7,oe=!1,se=1,be=0,qe={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},ke="0123456789abcdefghijklmnopqrstuvwxyz",Qe=!0;function We(Ve,Je){var et,lt,ut,Ke,Me,Ze,Fe,vt,dt=this;if(!(dt instanceof We))return new We(Ve,Je);if(Je==null){if(Ve&&Ve._isBigNumber===!0){dt.s=Ve.s,!Ve.c||Ve.e>J?dt.c=dt.e=null:Ve.e<j?dt.c=[dt.e=0]:(dt.e=Ve.e,dt.c=Ve.c.slice());return}if((Ze=typeof Ve=="number")&&Ve*0==0){if(dt.s=1/Ve<0?(Ve=-Ve,-1):1,Ve===~~Ve){for(Ke=0,Me=Ve;Me>=10;Me/=10,Ke++);Ke>J?dt.c=dt.e=null:(dt.e=Ke,dt.c=[Ve]);return}vt=String(Ve)}else{if(!XV.test(vt=String(Ve)))return r(dt,vt,Ze);dt.s=vt.charCodeAt(0)==45?(vt=vt.slice(1),-1):1}(Ke=vt.indexOf("."))>-1&&(vt=vt.replace(".","")),(Me=vt.search(/e/i))>0?(Ke<0&&(Ke=Me),Ke+=+vt.slice(Me+1),vt=vt.substring(0,Me)):Ke<0&&(Ke=vt.length)}else{if(Ua(Je,2,ke.length,"Base"),Je==10&&Qe)return dt=new We(Ve),xe(dt,v+dt.e+1,o);if(vt=String(Ve),Ze=typeof Ve=="number"){if(Ve*0!=0)return r(dt,vt,Ze,Je);if(dt.s=1/Ve<0?(vt=vt.slice(1),-1):1,We.DEBUG&&vt.replace(/^0\.0*|\./,"").length>15)throw Error(Pw+Ve)}else dt.s=vt.charCodeAt(0)===45?(vt=vt.slice(1),-1):1;for(et=ke.slice(0,Je),Ke=Me=0,Fe=vt.length;Me<Fe;Me++)if(et.indexOf(lt=vt.charAt(Me))<0){if(lt=="."){if(Me>Ke){Ke=Fe;continue}}else if(!ut&&(vt==vt.toUpperCase()&&(vt=vt.toLowerCase())||vt==vt.toLowerCase()&&(vt=vt.toUpperCase()))){ut=!0,Me=-1,Ke=0;continue}return r(dt,String(Ve),Ze,Je)}Ze=!1,vt=i(vt,Je,10,dt.s),(Ke=vt.indexOf("."))>-1?vt=vt.replace(".",""):Ke=vt.length}for(Me=0;vt.charCodeAt(Me)===48;Me++);for(Fe=vt.length;vt.charCodeAt(--Fe)===48;);if(vt=vt.slice(Me,++Fe)){if(Fe-=Me,Ze&&We.DEBUG&&Fe>15&&(Ve>A2||Ve!==cu(Ve)))throw Error(Pw+dt.s*Ve);if((Ke=Ke-Me-1)>J)dt.c=dt.e=null;else if(Ke<j)dt.c=[dt.e=0];else{if(dt.e=Ke,dt.c=[],Me=(Ke+1)%Tr,Ke<0&&(Me+=Tr),Me<Fe){for(Me&&dt.c.push(+vt.slice(0,Me)),Fe-=Tr;Me<Fe;)dt.c.push(+vt.slice(Me,Me+=Tr));Me=Tr-(vt=vt.slice(Me)).length}else Me-=Fe;for(;Me--;vt+="0");dt.c.push(+vt)}}else dt.c=[dt.e=0]}We.clone=R8,We.ROUND_UP=0,We.ROUND_DOWN=1,We.ROUND_CEIL=2,We.ROUND_FLOOR=3,We.ROUND_HALF_UP=4,We.ROUND_HALF_DOWN=5,We.ROUND_HALF_EVEN=6,We.ROUND_HALF_CEIL=7,We.ROUND_HALF_FLOOR=8,We.EUCLID=9,We.config=We.set=function(Ve){var Je,et;if(Ve!=null)if(typeof Ve=="object"){if(Ve.hasOwnProperty(Je="DECIMAL_PLACES")&&(et=Ve[Je],Ua(et,0,lA,Je),v=et),Ve.hasOwnProperty(Je="ROUNDING_MODE")&&(et=Ve[Je],Ua(et,0,8,Je),o=et),Ve.hasOwnProperty(Je="EXPONENTIAL_AT")&&(et=Ve[Je],et&&et.pop?(Ua(et[0],-lA,0,Je),Ua(et[1],0,lA,Je),k=et[0],O=et[1]):(Ua(et,-lA,lA,Je),k=-(O=et<0?-et:et))),Ve.hasOwnProperty(Je="RANGE"))if(et=Ve[Je],et&&et.pop)Ua(et[0],-lA,-1,Je),Ua(et[1],1,lA,Je),j=et[0],J=et[1];else if(Ua(et,-lA,lA,Je),et)j=-(J=et<0?-et:et);else throw Error(Cl+Je+" cannot be zero: "+et);if(Ve.hasOwnProperty(Je="CRYPTO"))if(et=Ve[Je],et===!!et)if(et)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))oe=et;else throw oe=!et,Error(Cl+"crypto unavailable");else oe=et;else throw Error(Cl+Je+" not true or false: "+et);if(Ve.hasOwnProperty(Je="MODULO_MODE")&&(et=Ve[Je],Ua(et,0,9,Je),se=et),Ve.hasOwnProperty(Je="POW_PRECISION")&&(et=Ve[Je],Ua(et,0,lA,Je),be=et),Ve.hasOwnProperty(Je="FORMAT"))if(et=Ve[Je],typeof et=="object")qe=et;else throw Error(Cl+Je+" not an object: "+et);if(Ve.hasOwnProperty(Je="ALPHABET"))if(et=Ve[Je],typeof et=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(et))Qe=et.slice(0,10)=="0123456789",ke=et;else throw Error(Cl+Je+" invalid: "+et)}else throw Error(Cl+"Object expected: "+Ve);return{DECIMAL_PLACES:v,ROUNDING_MODE:o,EXPONENTIAL_AT:[k,O],RANGE:[j,J],CRYPTO:oe,MODULO_MODE:se,POW_PRECISION:be,FORMAT:qe,ALPHABET:ke}},We.isBigNumber=function(Ve){if(!Ve||Ve._isBigNumber!==!0)return!1;if(!We.DEBUG)return!0;var Je,et,lt=Ve.c,ut=Ve.e,Ke=Ve.s;e:if({}.toString.call(lt)=="[object Array]"){if((Ke===1||Ke===-1)&&ut>=-lA&&ut<=lA&&ut===cu(ut)){if(lt[0]===0){if(ut===0&&lt.length===1)return!0;break e}if(Je=(ut+1)%Tr,Je<1&&(Je+=Tr),String(lt[0]).length==Je){for(Je=0;Je<lt.length;Je++)if(et=lt[Je],et<0||et>=Lu||et!==cu(et))break e;if(et!==0)return!0}}}else if(lt===null&&ut===null&&(Ke===null||Ke===1||Ke===-1))return!0;throw Error(Cl+"Invalid BigNumber: "+Ve)},We.maximum=We.max=function(){return St(arguments,-1)},We.minimum=We.min=function(){return St(arguments,1)},We.random=function(){var Ve=9007199254740992,Je=Math.random()*Ve&2097151?function(){return cu(Math.random()*Ve)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(et){var lt,ut,Ke,Me,Ze,Fe=0,vt=[],dt=new We(h);if(et==null?et=v:Ua(et,0,lA),Me=o2(et/Tr),oe)if(crypto.getRandomValues){for(lt=crypto.getRandomValues(new Uint32Array(Me*=2));Fe<Me;)Ze=lt[Fe]*131072+(lt[Fe+1]>>>11),Ze>=9e15?(ut=crypto.getRandomValues(new Uint32Array(2)),lt[Fe]=ut[0],lt[Fe+1]=ut[1]):(vt.push(Ze%1e14),Fe+=2);Fe=Me/2}else if(crypto.randomBytes){for(lt=crypto.randomBytes(Me*=7);Fe<Me;)Ze=(lt[Fe]&31)*281474976710656+lt[Fe+1]*1099511627776+lt[Fe+2]*4294967296+lt[Fe+3]*16777216+(lt[Fe+4]<<16)+(lt[Fe+5]<<8)+lt[Fe+6],Ze>=9e15?crypto.randomBytes(7).copy(lt,Fe):(vt.push(Ze%1e14),Fe+=7);Fe=Me/7}else throw oe=!1,Error(Cl+"crypto unavailable");if(!oe)for(;Fe<Me;)Ze=Je(),Ze<9e15&&(vt[Fe++]=Ze%1e14);for(Me=vt[--Fe],et%=Tr,Me&&et&&(Ze=l2[Tr-et],vt[Fe]=cu(Me/Ze)*Ze);vt[Fe]===0;vt.pop(),Fe--);if(Fe<0)vt=[Ke=0];else{for(Ke=-1;vt[0]===0;vt.splice(0,1),Ke-=Tr);for(Fe=1,Ze=vt[0];Ze>=10;Ze/=10,Fe++);Fe<Tr&&(Ke-=Tr-Fe)}return dt.e=Ke,dt.c=vt,dt}}(),We.sum=function(){for(var Ve=1,Je=arguments,et=new We(Je[0]);Ve<Je.length;)et=et.plus(Je[Ve++]);return et},i=function(){var Ve="0123456789";function Je(et,lt,ut,Ke){for(var Me,Ze=[0],Fe,vt=0,dt=et.length;vt<dt;){for(Fe=Ze.length;Fe--;Ze[Fe]*=lt);for(Ze[0]+=Ke.indexOf(et.charAt(vt++)),Me=0;Me<Ze.length;Me++)Ze[Me]>ut-1&&(Ze[Me+1]==null&&(Ze[Me+1]=0),Ze[Me+1]+=Ze[Me]/ut|0,Ze[Me]%=ut)}return Ze.reverse()}return function(et,lt,ut,Ke,Me){var Ze,Fe,vt,dt,_t,ei,di,yi,Ti=et.indexOf("."),Vi=v,wi=o;for(Ti>=0&&(dt=be,be=0,et=et.replace(".",""),yi=new We(lt),ei=yi.pow(et.length-Ti),be=dt,yi.c=Je(Bc(uu(ei.c),ei.e,"0"),10,ut,Ve),yi.e=yi.c.length),di=Je(et,lt,ut,Me?(Ze=ke,Ve):(Ze=Ve,ke)),vt=dt=di.length;di[--dt]==0;di.pop());if(!di[0])return Ze.charAt(0);if(Ti<0?--vt:(ei.c=di,ei.e=vt,ei.s=Ke,ei=t(ei,yi,Vi,wi,ut),di=ei.c,_t=ei.r,vt=ei.e),Fe=vt+Vi+1,Ti=di[Fe],dt=ut/2,_t=_t||Fe<0||di[Fe+1]!=null,_t=wi<4?(Ti!=null||_t)&&(wi==0||wi==(ei.s<0?3:2)):Ti>dt||Ti==dt&&(wi==4||_t||wi==6&&di[Fe-1]&1||wi==(ei.s<0?8:7)),Fe<1||!di[0])et=_t?Bc(Ze.charAt(1),-Vi,Ze.charAt(0)):Ze.charAt(0);else{if(di.length=Fe,_t)for(--ut;++di[--Fe]>ut;)di[Fe]=0,Fe||(++vt,di=[1].concat(di));for(dt=di.length;!di[--dt];);for(Ti=0,et="";Ti<=dt;et+=Ze.charAt(di[Ti++]));et=Bc(et,vt,Ze.charAt(0))}return et}}(),t=function(){function Ve(lt,ut,Ke){var Me,Ze,Fe,vt,dt=0,_t=lt.length,ei=ut%hh,di=ut/hh|0;for(lt=lt.slice();_t--;)Fe=lt[_t]%hh,vt=lt[_t]/hh|0,Me=di*Fe+vt*ei,Ze=ei*Fe+Me%hh*hh+dt,dt=(Ze/Ke|0)+(Me/hh|0)+di*vt,lt[_t]=Ze%Ke;return dt&&(lt=[dt].concat(lt)),lt}function Je(lt,ut,Ke,Me){var Ze,Fe;if(Ke!=Me)Fe=Ke>Me?1:-1;else for(Ze=Fe=0;Ze<Ke;Ze++)if(lt[Ze]!=ut[Ze]){Fe=lt[Ze]>ut[Ze]?1:-1;break}return Fe}function et(lt,ut,Ke,Me){for(var Ze=0;Ke--;)lt[Ke]-=Ze,Ze=lt[Ke]<ut[Ke]?1:0,lt[Ke]=Ze*Me+lt[Ke]-ut[Ke];for(;!lt[0]&&lt.length>1;lt.splice(0,1));}return function(lt,ut,Ke,Me,Ze){var Fe,vt,dt,_t,ei,di,yi,Ti,Vi,wi,mi,Wt,Di,$t,Lt,ni,si,Oi=lt.s==ut.s?1:-1,zi=lt.c,oi=ut.c;if(!zi||!zi[0]||!oi||!oi[0])return new We(!lt.s||!ut.s||(zi?oi&&zi[0]==oi[0]:!oi)?NaN:zi&&zi[0]==0||!oi?Oi*0:Oi/0);for(Ti=new We(Oi),Vi=Ti.c=[],vt=lt.e-ut.e,Oi=Ke+vt+1,Ze||(Ze=Lu,vt=hu(lt.e/Tr)-hu(ut.e/Tr),Oi=Oi/Tr|0),dt=0;oi[dt]==(zi[dt]||0);dt++);if(oi[dt]>(zi[dt]||0)&&vt--,Oi<0)Vi.push(1),_t=!0;else{for($t=zi.length,ni=oi.length,dt=0,Oi+=2,ei=cu(Ze/(oi[0]+1)),ei>1&&(oi=Ve(oi,ei,Ze),zi=Ve(zi,ei,Ze),ni=oi.length,$t=zi.length),Di=ni,wi=zi.slice(0,ni),mi=wi.length;mi<ni;wi[mi++]=0);si=oi.slice(),si=[0].concat(si),Lt=oi[0],oi[1]>=Ze/2&&Lt++;do{if(ei=0,Fe=Je(oi,wi,ni,mi),Fe<0){if(Wt=wi[0],ni!=mi&&(Wt=Wt*Ze+(wi[1]||0)),ei=cu(Wt/Lt),ei>1)for(ei>=Ze&&(ei=Ze-1),di=Ve(oi,ei,Ze),yi=di.length,mi=wi.length;Je(di,wi,yi,mi)==1;)ei--,et(di,ni<yi?si:oi,yi,Ze),yi=di.length,Fe=1;else ei==0&&(Fe=ei=1),di=oi.slice(),yi=di.length;if(yi<mi&&(di=[0].concat(di)),et(wi,di,mi,Ze),mi=wi.length,Fe==-1)for(;Je(oi,wi,ni,mi)<1;)ei++,et(wi,ni<mi?si:oi,mi,Ze),mi=wi.length}else Fe===0&&(ei++,wi=[0]);Vi[dt++]=ei,wi[0]?wi[mi++]=zi[Di]||0:(wi=[zi[Di]],mi=1)}while((Di++<$t||wi[0]!=null)&&Oi--);_t=wi[0]!=null,Vi[0]||Vi.splice(0,1)}if(Ze==Lu){for(dt=1,Oi=Vi[0];Oi>=10;Oi/=10,dt++);xe(Ti,Ke+(Ti.e=dt+vt*Tr-1)+1,Me,_t)}else Ti.e=vt,Ti.r=+_t;return Ti}}();function ct(Ve,Je,et,lt){var ut,Ke,Me,Ze,Fe;if(et==null?et=o:Ua(et,0,8),!Ve.c)return Ve.toString();if(ut=Ve.c[0],Me=Ve.e,Je==null)Fe=uu(Ve.c),Fe=lt==1||lt==2&&(Me<=k||Me>=O)?em(Fe,Me):Bc(Fe,Me,"0");else if(Ve=xe(new We(Ve),Je,et),Ke=Ve.e,Fe=uu(Ve.c),Ze=Fe.length,lt==1||lt==2&&(Je<=Ke||Ke<=k)){for(;Ze<Je;Fe+="0",Ze++);Fe=em(Fe,Ke)}else if(Je-=Me,Fe=Bc(Fe,Ke,"0"),Ke+1>Ze){if(--Je>0)for(Fe+=".";Je--;Fe+="0");}else if(Je+=Ke-Ze,Je>0)for(Ke+1==Ze&&(Fe+=".");Je--;Fe+="0");return Ve.s<0&&ut?"-"+Fe:Fe}function St(Ve,Je){for(var et,lt,ut=1,Ke=new We(Ve[0]);ut<Ve.length;ut++)lt=new We(Ve[ut]),(!lt.s||(et=Wh(Ke,lt))===Je||et===0&&Ke.s===Je)&&(Ke=lt);return Ke}function yt(Ve,Je,et){for(var lt=1,ut=Je.length;!Je[--ut];Je.pop());for(ut=Je[0];ut>=10;ut/=10,lt++);return(et=lt+et*Tr-1)>J?Ve.c=Ve.e=null:et<j?Ve.c=[Ve.e=0]:(Ve.e=et,Ve.c=Je),Ve}r=function(){var Ve=/^(-?)0([xbo])(?=\w[\w.]*$)/i,Je=/^([^.]+)\.$/,et=/^\.([^.]+)$/,lt=/^-?(Infinity|NaN)$/,ut=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(Ke,Me,Ze,Fe){var vt,dt=Ze?Me:Me.replace(ut,"");if(lt.test(dt))Ke.s=isNaN(dt)?null:dt<0?-1:1;else{if(!Ze&&(dt=dt.replace(Ve,function(_t,ei,di){return vt=(di=di.toLowerCase())=="x"?16:di=="b"?2:8,!Fe||Fe==vt?ei:_t}),Fe&&(vt=Fe,dt=dt.replace(Je,"$1").replace(et,"0.$1")),Me!=dt))return new We(dt,vt);if(We.DEBUG)throw Error(Cl+"Not a"+(Fe?" base "+Fe:"")+" number: "+Me);Ke.s=null}Ke.c=Ke.e=null}}();function xe(Ve,Je,et,lt){var ut,Ke,Me,Ze,Fe,vt,dt,_t=Ve.c,ei=l2;if(_t){e:{for(ut=1,Ze=_t[0];Ze>=10;Ze/=10,ut++);if(Ke=Je-ut,Ke<0)Ke+=Tr,Me=Je,Fe=_t[vt=0],dt=cu(Fe/ei[ut-Me-1]%10);else if(vt=o2((Ke+1)/Tr),vt>=_t.length)if(lt){for(;_t.length<=vt;_t.push(0));Fe=dt=0,ut=1,Ke%=Tr,Me=Ke-Tr+1}else break e;else{for(Fe=Ze=_t[vt],ut=1;Ze>=10;Ze/=10,ut++);Ke%=Tr,Me=Ke-Tr+ut,dt=Me<0?0:cu(Fe/ei[ut-Me-1]%10)}if(lt=lt||Je<0||_t[vt+1]!=null||(Me<0?Fe:Fe%ei[ut-Me-1]),lt=et<4?(dt||lt)&&(et==0||et==(Ve.s<0?3:2)):dt>5||dt==5&&(et==4||lt||et==6&&(Ke>0?Me>0?Fe/ei[ut-Me]:0:_t[vt-1])%10&1||et==(Ve.s<0?8:7)),Je<1||!_t[0])return _t.length=0,lt?(Je-=Ve.e+1,_t[0]=ei[(Tr-Je%Tr)%Tr],Ve.e=-Je||0):_t[0]=Ve.e=0,Ve;if(Ke==0?(_t.length=vt,Ze=1,vt--):(_t.length=vt+1,Ze=ei[Tr-Ke],_t[vt]=Me>0?cu(Fe/ei[ut-Me]%ei[Me])*Ze:0),lt)for(;;)if(vt==0){for(Ke=1,Me=_t[0];Me>=10;Me/=10,Ke++);for(Me=_t[0]+=Ze,Ze=1;Me>=10;Me/=10,Ze++);Ke!=Ze&&(Ve.e++,_t[0]==Lu&&(_t[0]=1));break}else{if(_t[vt]+=Ze,_t[vt]!=Lu)break;_t[vt--]=0,Ze=1}for(Ke=_t.length;_t[--Ke]===0;_t.pop());}Ve.e>J?Ve.c=Ve.e=null:Ve.e<j&&(Ve.c=[Ve.e=0])}return Ve}function Gt(Ve){var Je,et=Ve.e;return et===null?Ve.toString():(Je=uu(Ve.c),Je=et<=k||et>=O?em(Je,et):Bc(Je,et,"0"),Ve.s<0?"-"+Je:Je)}return c.absoluteValue=c.abs=function(){var Ve=new We(this);return Ve.s<0&&(Ve.s=1),Ve},c.comparedTo=function(Ve,Je){return Wh(this,new We(Ve,Je))},c.decimalPlaces=c.dp=function(Ve,Je){var et,lt,ut,Ke=this;if(Ve!=null)return Ua(Ve,0,lA),Je==null?Je=o:Ua(Je,0,8),xe(new We(Ke),Ve+Ke.e+1,Je);if(!(et=Ke.c))return null;if(lt=((ut=et.length-1)-hu(this.e/Tr))*Tr,ut=et[ut])for(;ut%10==0;ut/=10,lt--);return lt<0&&(lt=0),lt},c.dividedBy=c.div=function(Ve,Je){return t(this,new We(Ve,Je),v,o)},c.dividedToIntegerBy=c.idiv=function(Ve,Je){return t(this,new We(Ve,Je),0,1)},c.exponentiatedBy=c.pow=function(Ve,Je){var et,lt,ut,Ke,Me,Ze,Fe,vt,dt,_t=this;if(Ve=new We(Ve),Ve.c&&!Ve.isInteger())throw Error(Cl+"Exponent not an integer: "+Gt(Ve));if(Je!=null&&(Je=new We(Je)),Ze=Ve.e>14,!_t.c||!_t.c[0]||_t.c[0]==1&&!_t.e&&_t.c.length==1||!Ve.c||!Ve.c[0])return dt=new We(Math.pow(+Gt(_t),Ze?Ve.s*(2-$g(Ve)):+Gt(Ve))),Je?dt.mod(Je):dt;if(Fe=Ve.s<0,Je){if(Je.c?!Je.c[0]:!Je.s)return new We(NaN);lt=!Fe&&_t.isInteger()&&Je.isInteger(),lt&&(_t=_t.mod(Je))}else{if(Ve.e>9&&(_t.e>0||_t.e<-1||(_t.e==0?_t.c[0]>1||Ze&&_t.c[1]>=24e7:_t.c[0]<8e13||Ze&&_t.c[0]<=9999975e7)))return Ke=_t.s<0&&$g(Ve)?-0:0,_t.e>-1&&(Ke=1/Ke),new We(Fe?1/Ke:Ke);be&&(Ke=o2(be/Tr+2))}for(Ze?(et=new We(.5),Fe&&(Ve.s=1),vt=$g(Ve)):(ut=Math.abs(+Gt(Ve)),vt=ut%2),dt=new We(h);;){if(vt){if(dt=dt.times(_t),!dt.c)break;Ke?dt.c.length>Ke&&(dt.c.length=Ke):lt&&(dt=dt.mod(Je))}if(ut){if(ut=cu(ut/2),ut===0)break;vt=ut%2}else if(Ve=Ve.times(et),xe(Ve,Ve.e+1,1),Ve.e>14)vt=$g(Ve);else{if(ut=+Gt(Ve),ut===0)break;vt=ut%2}_t=_t.times(_t),Ke?_t.c&&_t.c.length>Ke&&(_t.c.length=Ke):lt&&(_t=_t.mod(Je))}return lt?dt:(Fe&&(dt=h.div(dt)),Je?dt.mod(Je):Ke?xe(dt,be,o,Me):dt)},c.integerValue=function(Ve){var Je=new We(this);return Ve==null?Ve=o:Ua(Ve,0,8),xe(Je,Je.e+1,Ve)},c.isEqualTo=c.eq=function(Ve,Je){return Wh(this,new We(Ve,Je))===0},c.isFinite=function(){return!!this.c},c.isGreaterThan=c.gt=function(Ve,Je){return Wh(this,new We(Ve,Je))>0},c.isGreaterThanOrEqualTo=c.gte=function(Ve,Je){return(Je=Wh(this,new We(Ve,Je)))===1||Je===0},c.isInteger=function(){return!!this.c&&hu(this.e/Tr)>this.c.length-2},c.isLessThan=c.lt=function(Ve,Je){return Wh(this,new We(Ve,Je))<0},c.isLessThanOrEqualTo=c.lte=function(Ve,Je){return(Je=Wh(this,new We(Ve,Je)))===-1||Je===0},c.isNaN=function(){return!this.s},c.isNegative=function(){return this.s<0},c.isPositive=function(){return this.s>0},c.isZero=function(){return!!this.c&&this.c[0]==0},c.minus=function(Ve,Je){var et,lt,ut,Ke,Me=this,Ze=Me.s;if(Ve=new We(Ve,Je),Je=Ve.s,!Ze||!Je)return new We(NaN);if(Ze!=Je)return Ve.s=-Je,Me.plus(Ve);var Fe=Me.e/Tr,vt=Ve.e/Tr,dt=Me.c,_t=Ve.c;if(!Fe||!vt){if(!dt||!_t)return dt?(Ve.s=-Je,Ve):new We(_t?Me:NaN);if(!dt[0]||!_t[0])return _t[0]?(Ve.s=-Je,Ve):new We(dt[0]?Me:o==3?-0:0)}if(Fe=hu(Fe),vt=hu(vt),dt=dt.slice(),Ze=Fe-vt){for((Ke=Ze<0)?(Ze=-Ze,ut=dt):(vt=Fe,ut=_t),ut.reverse(),Je=Ze;Je--;ut.push(0));ut.reverse()}else for(lt=(Ke=(Ze=dt.length)<(Je=_t.length))?Ze:Je,Ze=Je=0;Je<lt;Je++)if(dt[Je]!=_t[Je]){Ke=dt[Je]<_t[Je];break}if(Ke&&(ut=dt,dt=_t,_t=ut,Ve.s=-Ve.s),Je=(lt=_t.length)-(et=dt.length),Je>0)for(;Je--;dt[et++]=0);for(Je=Lu-1;lt>Ze;){if(dt[--lt]<_t[lt]){for(et=lt;et&&!dt[--et];dt[et]=Je);--dt[et],dt[lt]+=Lu}dt[lt]-=_t[lt]}for(;dt[0]==0;dt.splice(0,1),--vt);return dt[0]?yt(Ve,dt,vt):(Ve.s=o==3?-1:1,Ve.c=[Ve.e=0],Ve)},c.modulo=c.mod=function(Ve,Je){var et,lt,ut=this;return Ve=new We(Ve,Je),!ut.c||!Ve.s||Ve.c&&!Ve.c[0]?new We(NaN):!Ve.c||ut.c&&!ut.c[0]?new We(ut):(se==9?(lt=Ve.s,Ve.s=1,et=t(ut,Ve,0,3),Ve.s=lt,et.s*=lt):et=t(ut,Ve,0,se),Ve=ut.minus(et.times(Ve)),!Ve.c[0]&&se==1&&(Ve.s=ut.s),Ve)},c.multipliedBy=c.times=function(Ve,Je){var et,lt,ut,Ke,Me,Ze,Fe,vt,dt,_t,ei,di,yi,Ti,Vi,wi=this,mi=wi.c,Wt=(Ve=new We(Ve,Je)).c;if(!mi||!Wt||!mi[0]||!Wt[0])return!wi.s||!Ve.s||mi&&!mi[0]&&!Wt||Wt&&!Wt[0]&&!mi?Ve.c=Ve.e=Ve.s=null:(Ve.s*=wi.s,!mi||!Wt?Ve.c=Ve.e=null:(Ve.c=[0],Ve.e=0)),Ve;for(lt=hu(wi.e/Tr)+hu(Ve.e/Tr),Ve.s*=wi.s,Fe=mi.length,_t=Wt.length,Fe<_t&&(yi=mi,mi=Wt,Wt=yi,ut=Fe,Fe=_t,_t=ut),ut=Fe+_t,yi=[];ut--;yi.push(0));for(Ti=Lu,Vi=hh,ut=_t;--ut>=0;){for(et=0,ei=Wt[ut]%Vi,di=Wt[ut]/Vi|0,Me=Fe,Ke=ut+Me;Ke>ut;)vt=mi[--Me]%Vi,dt=mi[Me]/Vi|0,Ze=di*vt+dt*ei,vt=ei*vt+Ze%Vi*Vi+yi[Ke]+et,et=(vt/Ti|0)+(Ze/Vi|0)+di*dt,yi[Ke--]=vt%Ti;yi[Ke]=et}return et?++lt:yi.splice(0,1),yt(Ve,yi,lt)},c.negated=function(){var Ve=new We(this);return Ve.s=-Ve.s||null,Ve},c.plus=function(Ve,Je){var et,lt=this,ut=lt.s;if(Ve=new We(Ve,Je),Je=Ve.s,!ut||!Je)return new We(NaN);if(ut!=Je)return Ve.s=-Je,lt.minus(Ve);var Ke=lt.e/Tr,Me=Ve.e/Tr,Ze=lt.c,Fe=Ve.c;if(!Ke||!Me){if(!Ze||!Fe)return new We(ut/0);if(!Ze[0]||!Fe[0])return Fe[0]?Ve:new We(Ze[0]?lt:ut*0)}if(Ke=hu(Ke),Me=hu(Me),Ze=Ze.slice(),ut=Ke-Me){for(ut>0?(Me=Ke,et=Fe):(ut=-ut,et=Ze),et.reverse();ut--;et.push(0));et.reverse()}for(ut=Ze.length,Je=Fe.length,ut-Je<0&&(et=Fe,Fe=Ze,Ze=et,Je=ut),ut=0;Je;)ut=(Ze[--Je]=Ze[Je]+Fe[Je]+ut)/Lu|0,Ze[Je]=Lu===Ze[Je]?0:Ze[Je]%Lu;return ut&&(Ze=[ut].concat(Ze),++Me),yt(Ve,Ze,Me)},c.precision=c.sd=function(Ve,Je){var et,lt,ut,Ke=this;if(Ve!=null&&Ve!==!!Ve)return Ua(Ve,1,lA),Je==null?Je=o:Ua(Je,0,8),xe(new We(Ke),Ve,Je);if(!(et=Ke.c))return null;if(ut=et.length-1,lt=ut*Tr+1,ut=et[ut]){for(;ut%10==0;ut/=10,lt--);for(ut=et[0];ut>=10;ut/=10,lt++);}return Ve&&Ke.e+1>lt&&(lt=Ke.e+1),lt},c.shiftedBy=function(Ve){return Ua(Ve,-A2,A2),this.times("1e"+Ve)},c.squareRoot=c.sqrt=function(){var Ve,Je,et,lt,ut,Ke=this,Me=Ke.c,Ze=Ke.s,Fe=Ke.e,vt=v+4,dt=new We("0.5");if(Ze!==1||!Me||!Me[0])return new We(!Ze||Ze<0&&(!Me||Me[0])?NaN:Me?Ke:1/0);if(Ze=Math.sqrt(+Gt(Ke)),Ze==0||Ze==1/0?(Je=uu(Me),(Je.length+Fe)%2==0&&(Je+="0"),Ze=Math.sqrt(+Je),Fe=hu((Fe+1)/2)-(Fe<0||Fe%2),Ze==1/0?Je="5e"+Fe:(Je=Ze.toExponential(),Je=Je.slice(0,Je.indexOf("e")+1)+Fe),et=new We(Je)):et=new We(Ze+""),et.c[0]){for(Fe=et.e,Ze=Fe+vt,Ze<3&&(Ze=0);;)if(ut=et,et=dt.times(ut.plus(t(Ke,ut,vt,1))),uu(ut.c).slice(0,Ze)===(Je=uu(et.c)).slice(0,Ze))if(et.e<Fe&&--Ze,Je=Je.slice(Ze-3,Ze+1),Je=="9999"||!lt&&Je=="4999"){if(!lt&&(xe(ut,ut.e+v+2,0),ut.times(ut).eq(Ke))){et=ut;break}vt+=4,Ze+=4,lt=1}else{(!+Je||!+Je.slice(1)&&Je.charAt(0)=="5")&&(xe(et,et.e+v+2,1),Ve=!et.times(et).eq(Ke));break}}return xe(et,et.e+v+1,o,Ve)},c.toExponential=function(Ve,Je){return Ve!=null&&(Ua(Ve,0,lA),Ve++),ct(this,Ve,Je,1)},c.toFixed=function(Ve,Je){return Ve!=null&&(Ua(Ve,0,lA),Ve=Ve+this.e+1),ct(this,Ve,Je)},c.toFormat=function(Ve,Je,et){var lt,ut=this;if(et==null)Ve!=null&&Je&&typeof Je=="object"?(et=Je,Je=null):Ve&&typeof Ve=="object"?(et=Ve,Ve=Je=null):et=qe;else if(typeof et!="object")throw Error(Cl+"Argument not an object: "+et);if(lt=ut.toFixed(Ve,Je),ut.c){var Ke,Me=lt.split("."),Ze=+et.groupSize,Fe=+et.secondaryGroupSize,vt=et.groupSeparator||"",dt=Me[0],_t=Me[1],ei=ut.s<0,di=ei?dt.slice(1):dt,yi=di.length;if(Fe&&(Ke=Ze,Ze=Fe,Fe=Ke,yi-=Ke),Ze>0&&yi>0){for(Ke=yi%Ze||Ze,dt=di.substr(0,Ke);Ke<yi;Ke+=Ze)dt+=vt+di.substr(Ke,Ze);Fe>0&&(dt+=vt+di.slice(Ke)),ei&&(dt="-"+dt)}lt=_t?dt+(et.decimalSeparator||"")+((Fe=+et.fractionGroupSize)?_t.replace(new RegExp("\\d{"+Fe+"}\\B","g"),"$&"+(et.fractionGroupSeparator||"")):_t):dt}return(et.prefix||"")+lt+(et.suffix||"")},c.toFraction=function(Ve){var Je,et,lt,ut,Ke,Me,Ze,Fe,vt,dt,_t,ei,di=this,yi=di.c;if(Ve!=null&&(Ze=new We(Ve),!Ze.isInteger()&&(Ze.c||Ze.s!==1)||Ze.lt(h)))throw Error(Cl+"Argument "+(Ze.isInteger()?"out of range: ":"not an integer: ")+Gt(Ze));if(!yi)return new We(di);for(Je=new We(h),vt=et=new We(h),lt=Fe=new We(h),ei=uu(yi),Ke=Je.e=ei.length-di.e-1,Je.c[0]=l2[(Me=Ke%Tr)<0?Tr+Me:Me],Ve=!Ve||Ze.comparedTo(Je)>0?Ke>0?Je:vt:Ze,Me=J,J=1/0,Ze=new We(ei),Fe.c[0]=0;dt=t(Ze,Je,0,1),ut=et.plus(dt.times(lt)),ut.comparedTo(Ve)!=1;)et=lt,lt=ut,vt=Fe.plus(dt.times(ut=vt)),Fe=ut,Je=Ze.minus(dt.times(ut=Je)),Ze=ut;return ut=t(Ve.minus(et),lt,0,1),Fe=Fe.plus(ut.times(vt)),et=et.plus(ut.times(lt)),Fe.s=vt.s=di.s,Ke=Ke*2,_t=t(vt,lt,Ke,o).minus(di).abs().comparedTo(t(Fe,et,Ke,o).minus(di).abs())<1?[vt,lt]:[Fe,et],J=Me,_t},c.toNumber=function(){return+Gt(this)},c.toPrecision=function(Ve,Je){return Ve!=null&&Ua(Ve,1,lA),ct(this,Ve,Je,2)},c.toString=function(Ve){var Je,et=this,lt=et.s,ut=et.e;return ut===null?lt?(Je="Infinity",lt<0&&(Je="-"+Je)):Je="NaN":(Ve==null?Je=ut<=k||ut>=O?em(uu(et.c),ut):Bc(uu(et.c),ut,"0"):Ve===10&&Qe?(et=xe(new We(et),v+ut+1,o),Je=Bc(uu(et.c),et.e,"0")):(Ua(Ve,2,ke.length,"Base"),Je=i(Bc(uu(et.c),ut,"0"),10,Ve,lt,!0)),lt<0&&et.c[0]&&(Je="-"+Je)),Je},c.valueOf=c.toJSON=function(){return Gt(this)},c._isBigNumber=!0,c[Symbol.toStringTag]="BigNumber",c[Symbol.for("nodejs.util.inspect.custom")]=c.valueOf,e!=null&&We.set(e),We}function hu(e){var t=e|0;return e>0||e===t?t:t-1}function uu(e){for(var t,i,r=1,c=e.length,h=e[0]+"";r<c;){for(t=e[r++]+"",i=Tr-t.length;i--;t="0"+t);h+=t}for(c=h.length;h.charCodeAt(--c)===48;);return h.slice(0,c+1||1)}function Wh(e,t){var i,r,c=e.c,h=t.c,v=e.s,o=t.s,k=e.e,O=t.e;if(!v||!o)return null;if(i=c&&!c[0],r=h&&!h[0],i||r)return i?r?0:-o:v;if(v!=o)return v;if(i=v<0,r=k==O,!c||!h)return r?0:!c^i?1:-1;if(!r)return k>O^i?1:-1;for(o=(k=c.length)<(O=h.length)?k:O,v=0;v<o;v++)if(c[v]!=h[v])return c[v]>h[v]^i?1:-1;return k==O?0:k>O^i?1:-1}function Ua(e,t,i,r){if(e<t||e>i||e!==cu(e))throw Error(Cl+(r||"Argument")+(typeof e=="number"?e<t||e>i?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function $g(e){var t=e.c.length-1;return hu(e.e/Tr)==t&&e.c[t]%2!=0}function em(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function Bc(e,t,i){var r,c;if(t<0){for(c=i+".";++t;c+=i);e=c+e}else if(r=e.length,++t>r){for(c=i,t-=r;--t;c+=i);e+=c}else t<r&&(e=e.slice(0,t)+"."+e.slice(t));return e}var ic=R8();class KV{constructor(t){Zn(this,"key");Zn(this,"left",null);Zn(this,"right",null);this.key=t}}class Od extends KV{constructor(t){super(t)}}class JV{constructor(){Zn(this,"size",0);Zn(this,"modificationCount",0);Zn(this,"splayCount",0)}splay(t){const i=this.root;if(i==null)return this.compare(t,t),-1;let r=null,c=null,h=null,v=null,o=i;const k=this.compare;let O;for(;;)if(O=k(o.key,t),O>0){let j=o.left;if(j==null||(O=k(j.key,t),O>0&&(o.left=j.right,j.right=o,o=j,j=o.left,j==null)))break;r==null?c=o:r.left=o,r=o,o=j}else if(O<0){let j=o.right;if(j==null||(O=k(j.key,t),O<0&&(o.right=j.left,j.left=o,o=j,j=o.right,j==null)))break;h==null?v=o:h.right=o,h=o,o=j}else break;return h!=null&&(h.right=o.left,o.left=v),r!=null&&(r.left=o.right,o.right=c),this.root!==o&&(this.root=o,this.splayCount++),O}splayMin(t){let i=t,r=i.left;for(;r!=null;){const c=r;i.left=c.right,c.right=i,i=c,r=i.left}return i}splayMax(t){let i=t,r=i.right;for(;r!=null;){const c=r;i.right=c.left,c.left=i,i=c,r=i.right}return i}_delete(t){if(this.root==null||this.splay(t)!=0)return null;let r=this.root;const c=r,h=r.left;if(this.size--,h==null)this.root=r.right;else{const v=r.right;r=this.splayMax(h),r.right=v,this.root=r}return this.modificationCount++,c}addNewRoot(t,i){this.size++,this.modificationCount++;const r=this.root;if(r==null){this.root=t;return}i<0?(t.left=r,t.right=r.right,r.right=null):(t.right=r,t.left=r.left,r.left=null),this.root=t}_first(){const t=this.root;return t==null?null:(this.root=this.splayMin(t),this.root)}_last(){const t=this.root;return t==null?null:(this.root=this.splayMax(t),this.root)}clear(){this.root=null,this.size=0,this.modificationCount++}has(t){return this.validKey(t)&&this.splay(t)==0}defaultCompare(){return(t,i)=>t<i?-1:t>i?1:0}wrap(){return{getRoot:()=>this.root,setRoot:t=>{this.root=t},getSize:()=>this.size,getModificationCount:()=>this.modificationCount,getSplayCount:()=>this.splayCount,setSplayCount:t=>{this.splayCount=t},splay:t=>this.splay(t),has:t=>this.has(t)}}}var zU;const a0=class a0 extends JV{constructor(i,r){super();Zn(this,"root",null);Zn(this,"compare");Zn(this,"validKey");Zn(this,zU,"[object Set]");this.compare=i??this.defaultCompare(),this.validKey=r??(c=>c!=null&&c!=null)}delete(i){return this.validKey(i)?this._delete(i)!=null:!1}deleteAll(i){for(const r of i)this.delete(r)}forEach(i){const r=this[Symbol.iterator]();let c;for(;c=r.next(),!c.done;)i(c.value,c.value,this)}add(i){const r=this.splay(i);return r!=0&&this.addNewRoot(new Od(i),r),this}addAndReturn(i){const r=this.splay(i);return r!=0&&this.addNewRoot(new Od(i),r),this.root.key}addAll(i){for(const r of i)this.add(r)}isEmpty(){return this.root==null}isNotEmpty(){return this.root!=null}single(){if(this.size==0)throw"Bad state: No element";if(this.size>1)throw"Bad state: Too many element";return this.root.key}first(){if(this.size==0)throw"Bad state: No element";return this._first().key}last(){if(this.size==0)throw"Bad state: No element";return this._last().key}lastBefore(i){if(i==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(i)<0)return this.root.key;let c=this.root.left;if(c==null)return null;let h=c.right;for(;h!=null;)c=h,h=c.right;return c.key}firstAfter(i){if(i==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(i)>0)return this.root.key;let c=this.root.right;if(c==null)return null;let h=c.left;for(;h!=null;)c=h,h=c.left;return c.key}retainAll(i){const r=new a0(this.compare,this.validKey),c=this.modificationCount;for(const h of i){if(c!=this.modificationCount)throw"Concurrent modification during iteration.";this.validKey(h)&&this.splay(h)==0&&r.add(this.root.key)}r.size!=this.size&&(this.root=r.root,this.size=r.size,this.modificationCount++)}lookup(i){return!this.validKey(i)||this.splay(i)!=0?null:this.root.key}intersection(i){const r=new a0(this.compare,this.validKey);for(const c of this)i.has(c)&&r.add(c);return r}difference(i){const r=new a0(this.compare,this.validKey);for(const c of this)i.has(c)||r.add(c);return r}union(i){const r=this.clone();return r.addAll(i),r}clone(){const i=new a0(this.compare,this.validKey);return i.size=this.size,i.root=this.copyNode(this.root),i}copyNode(i){if(i==null)return null;function r(h,v){let o,k;do{if(o=h.left,k=h.right,o!=null){const O=new Od(o.key);v.left=O,r(o,O)}if(k!=null){const O=new Od(k.key);v.right=O,h=k,v=O}}while(k!=null)}const c=new Od(i.key);return r(i,c),c}toSet(){return this.clone()}entries(){return new eU(this.wrap())}keys(){return this[Symbol.iterator]()}values(){return this[Symbol.iterator]()}[Symbol.iterator](){return new $V(this.wrap())}};zU=Symbol.toStringTag;let y0=a0;class O8{constructor(t){Zn(this,"tree");Zn(this,"path",new Array);Zn(this,"modificationCount",null);Zn(this,"splayCount");this.tree=t,this.splayCount=t.getSplayCount()}[Symbol.iterator](){return this}next(){return this.moveNext()?{done:!1,value:this.current()}:{done:!0,value:null}}current(){if(!this.path.length)return null;const t=this.path[this.path.length-1];return this.getValue(t)}rebuildPath(t){this.path.splice(0,this.path.length),this.tree.splay(t),this.path.push(this.tree.getRoot()),this.splayCount=this.tree.getSplayCount()}findLeftMostDescendent(t){for(;t!=null;)this.path.push(t),t=t.left}moveNext(){if(this.modificationCount!=this.tree.getModificationCount()){if(this.modificationCount==null){this.modificationCount=this.tree.getModificationCount();let r=this.tree.getRoot();for(;r!=null;)this.path.push(r),r=r.left;return this.path.length>0}throw"Concurrent modification during iteration."}if(!this.path.length)return!1;this.splayCount!=this.tree.getSplayCount()&&this.rebuildPath(this.path[this.path.length-1].key);let t=this.path[this.path.length-1],i=t.right;if(i!=null){for(;i!=null;)this.path.push(i),i=i.left;return!0}for(this.path.pop();this.path.length&&this.path[this.path.length-1].right===t;)t=this.path.pop();return this.path.length>0}}class $V extends O8{getValue(t){return t.key}}class eU extends O8{getValue(t){return[t.key,t.key]}}const tU=e=>e,iU=e=>{if(e){const t=new y0(Sv(e)),i=new y0(Sv(e)),r=(h,v)=>v.addAndReturn(h),c=h=>({x:r(h.x,t),y:r(h.y,i)});return c({x:new ic(0),y:new ic(0)}),c}return tU},Cv=e=>({set:t=>{Qc=Cv(t)},reset:()=>Cv(e),compare:Sv(e),snap:iU(e),orient:YV(e)});let Qc=Cv();const zd=(e,t)=>e.ll.x.isLessThanOrEqualTo(t.x)&&t.x.isLessThanOrEqualTo(e.ur.x)&&e.ll.y.isLessThanOrEqualTo(t.y)&&t.y.isLessThanOrEqualTo(e.ur.y),Ev=(e,t)=>{if(t.ur.x.isLessThan(e.ll.x)||e.ur.x.isLessThan(t.ll.x)||t.ur.y.isLessThan(e.ll.y)||e.ur.y.isLessThan(t.ll.y))return null;const i=e.ll.x.isLessThan(t.ll.x)?t.ll.x:e.ll.x,r=e.ur.x.isLessThan(t.ur.x)?e.ur.x:t.ur.x,c=e.ll.y.isLessThan(t.ll.y)?t.ll.y:e.ll.y,h=e.ur.y.isLessThan(t.ur.y)?e.ur.y:t.ur.y;return{ll:{x:i,y:c},ur:{x:r,y:h}}},dm=(e,t)=>e.x.times(t.y).minus(e.y.times(t.x)),z8=(e,t)=>e.x.times(t.x).plus(e.y.times(t.y)),Xm=e=>z8(e,e).sqrt(),nU=(e,t,i)=>{const r={x:t.x.minus(e.x),y:t.y.minus(e.y)},c={x:i.x.minus(e.x),y:i.y.minus(e.y)};return dm(c,r).div(Xm(c)).div(Xm(r))},rU=(e,t,i)=>{const r={x:t.x.minus(e.x),y:t.y.minus(e.y)},c={x:i.x.minus(e.x),y:i.y.minus(e.y)};return z8(c,r).div(Xm(c)).div(Xm(r))},Dw=(e,t,i)=>t.y.isZero()?null:{x:e.x.plus(t.x.div(t.y).times(i.minus(e.y))),y:i},Lw=(e,t,i)=>t.x.isZero()?null:{x:i,y:e.y.plus(t.y.div(t.x).times(i.minus(e.x)))},sU=(e,t,i,r)=>{if(t.x.isZero())return Lw(i,r,e.x);if(r.x.isZero())return Lw(e,t,i.x);if(t.y.isZero())return Dw(i,r,e.y);if(r.y.isZero())return Dw(e,t,i.y);const c=dm(t,r);if(c.isZero())return null;const h={x:i.x.minus(e.x),y:i.y.minus(e.y)},v=dm(h,t).div(c),o=dm(h,r).div(c),k=e.x.plus(o.times(t.x)),O=i.x.plus(v.times(r.x)),j=e.y.plus(o.times(t.y)),J=i.y.plus(v.times(r.y)),oe=k.plus(O).div(2),se=j.plus(J).div(2);return{x:oe,y:se}};class du{constructor(t,i){Zn(this,"point");Zn(this,"isLeft");Zn(this,"segment");Zn(this,"otherSE");Zn(this,"consumedBy");t.events===void 0?t.events=[this]:t.events.push(this),this.point=t,this.isLeft=i}static compare(t,i){const r=du.comparePoints(t.point,i.point);return r!==0?r:(t.point!==i.point&&t.link(i),t.isLeft!==i.isLeft?t.isLeft?1:-1:dh.compare(t.segment,i.segment))}static comparePoints(t,i){return t.x.isLessThan(i.x)?-1:t.x.isGreaterThan(i.x)?1:t.y.isLessThan(i.y)?-1:t.y.isGreaterThan(i.y)?1:0}link(t){if(t.point===this.point)throw new Error("Tried to link already linked events");const i=t.point.events;for(let r=0,c=i.length;r<c;r++){const h=i[r];this.point.events.push(h),h.point=this.point}this.checkForConsuming()}checkForConsuming(){const t=this.point.events.length;for(let i=0;i<t;i++){const r=this.point.events[i];if(r.segment.consumedBy===void 0)for(let c=i+1;c<t;c++){const h=this.point.events[c];h.consumedBy===void 0&&r.otherSE.point.events===h.otherSE.point.events&&r.segment.consume(h.segment)}}}getAvailableLinkedEvents(){const t=[];for(let i=0,r=this.point.events.length;i<r;i++){const c=this.point.events[i];c!==this&&!c.segment.ringOut&&c.segment.isInResult()&&t.push(c)}return t}getLeftmostComparator(t){const i=new Map,r=c=>{const h=c.otherSE;i.set(c,{sine:nU(this.point,t.point,h.point),cosine:rU(this.point,t.point,h.point)})};return(c,h)=>{i.has(c)||r(c),i.has(h)||r(h);const{sine:v,cosine:o}=i.get(c),{sine:k,cosine:O}=i.get(h);return v.isGreaterThanOrEqualTo(0)&&k.isGreaterThanOrEqualTo(0)?o.isLessThan(O)?1:o.isGreaterThan(O)?-1:0:v.isLessThan(0)&&k.isLessThan(0)?o.isLessThan(O)?-1:o.isGreaterThan(O)?1:0:k.isLessThan(v)?-1:k.isGreaterThan(v)?1:0}}}let aU=0;class dh{constructor(t,i,r,c){Zn(this,"id");Zn(this,"leftSE");Zn(this,"rightSE");Zn(this,"rings");Zn(this,"windings");Zn(this,"ringOut");Zn(this,"consumedBy");Zn(this,"prev");Zn(this,"_prevInResult");Zn(this,"_beforeState");Zn(this,"_afterState");Zn(this,"_isInResult");this.id=++aU,this.leftSE=t,t.segment=this,t.otherSE=i,this.rightSE=i,i.segment=this,i.otherSE=t,this.rings=r,this.windings=c}static compare(t,i){const r=t.leftSE.point.x,c=i.leftSE.point.x,h=t.rightSE.point.x,v=i.rightSE.point.x;if(v.isLessThan(r))return 1;if(h.isLessThan(c))return-1;const o=t.leftSE.point.y,k=i.leftSE.point.y,O=t.rightSE.point.y,j=i.rightSE.point.y;if(r.isLessThan(c)){if(k.isLessThan(o)&&k.isLessThan(O))return 1;if(k.isGreaterThan(o)&&k.isGreaterThan(O))return-1;const J=t.comparePoint(i.leftSE.point);if(J<0)return 1;if(J>0)return-1;const oe=i.comparePoint(t.rightSE.point);return oe!==0?oe:-1}if(r.isGreaterThan(c)){if(o.isLessThan(k)&&o.isLessThan(j))return-1;if(o.isGreaterThan(k)&&o.isGreaterThan(j))return 1;const J=i.comparePoint(t.leftSE.point);if(J!==0)return J;const oe=t.comparePoint(i.rightSE.point);return oe<0?1:oe>0?-1:1}if(o.isLessThan(k))return-1;if(o.isGreaterThan(k))return 1;if(h.isLessThan(v)){const J=i.comparePoint(t.rightSE.point);if(J!==0)return J}if(h.isGreaterThan(v)){const J=t.comparePoint(i.rightSE.point);if(J<0)return 1;if(J>0)return-1}if(!h.eq(v)){const J=O.minus(o),oe=h.minus(r),se=j.minus(k),be=v.minus(c);if(J.isGreaterThan(oe)&&se.isLessThan(be))return 1;if(J.isLessThan(oe)&&se.isGreaterThan(be))return-1}return h.isGreaterThan(v)?1:h.isLessThan(v)||O.isLessThan(j)?-1:O.isGreaterThan(j)?1:t.id<i.id?-1:t.id>i.id?1:0}static fromRing(t,i,r){let c,h,v;const o=du.comparePoints(t,i);if(o<0)c=t,h=i,v=1;else if(o>0)c=i,h=t,v=-1;else throw new Error(`Tried to create degenerate segment at [${t.x}, ${t.y}]`);const k=new du(c,!0),O=new du(h,!1);return new dh(k,O,[r],[v])}replaceRightSE(t){this.rightSE=t,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){const t=this.leftSE.point.y,i=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:t.isLessThan(i)?t:i},ur:{x:this.rightSE.point.x,y:t.isGreaterThan(i)?t:i}}}vector(){return{x:this.rightSE.point.x.minus(this.leftSE.point.x),y:this.rightSE.point.y.minus(this.leftSE.point.y)}}isAnEndpoint(t){return t.x.eq(this.leftSE.point.x)&&t.y.eq(this.leftSE.point.y)||t.x.eq(this.rightSE.point.x)&&t.y.eq(this.rightSE.point.y)}comparePoint(t){return Qc.orient(this.leftSE.point,t,this.rightSE.point)}getIntersection(t){const i=this.bbox(),r=t.bbox(),c=Ev(i,r);if(c===null)return null;const h=this.leftSE.point,v=this.rightSE.point,o=t.leftSE.point,k=t.rightSE.point,O=zd(i,o)&&this.comparePoint(o)===0,j=zd(r,h)&&t.comparePoint(h)===0,J=zd(i,k)&&this.comparePoint(k)===0,oe=zd(r,v)&&t.comparePoint(v)===0;if(j&&O)return oe&&!J?v:!oe&&J?k:null;if(j)return J&&h.x.eq(k.x)&&h.y.eq(k.y)?null:h;if(O)return oe&&v.x.eq(o.x)&&v.y.eq(o.y)?null:o;if(oe&&J)return null;if(oe)return v;if(J)return k;const se=sU(h,this.vector(),o,t.vector());return se===null||!zd(c,se)?null:Qc.snap(se)}split(t){const i=[],r=t.events!==void 0,c=new du(t,!0),h=new du(t,!1),v=this.rightSE;this.replaceRightSE(h),i.push(h),i.push(c);const o=new dh(c,v,this.rings.slice(),this.windings.slice());return du.comparePoints(o.leftSE.point,o.rightSE.point)>0&&o.swapEvents(),du.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),r&&(c.checkForConsuming(),h.checkForConsuming()),i}swapEvents(){const t=this.rightSE;this.rightSE=this.leftSE,this.leftSE=t,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let i=0,r=this.windings.length;i<r;i++)this.windings[i]*=-1}consume(t){let i=this,r=t;for(;i.consumedBy;)i=i.consumedBy;for(;r.consumedBy;)r=r.consumedBy;const c=dh.compare(i,r);if(c!==0){if(c>0){const h=i;i=r,r=h}if(i.prev===r){const h=i;i=r,r=h}for(let h=0,v=r.rings.length;h<v;h++){const o=r.rings[h],k=r.windings[h],O=i.rings.indexOf(o);O===-1?(i.rings.push(o),i.windings.push(k)):i.windings[O]+=k}r.rings=null,r.windings=null,r.consumedBy=i,r.leftSE.consumedBy=i.leftSE,r.rightSE.consumedBy=i.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{const t=this.prev.consumedBy||this.prev;this._beforeState=t.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;const t=this.beforeState();this._afterState={rings:t.rings.slice(0),windings:t.windings.slice(0),multiPolys:[]};const i=this._afterState.rings,r=this._afterState.windings,c=this._afterState.multiPolys;for(let o=0,k=this.rings.length;o<k;o++){const O=this.rings[o],j=this.windings[o],J=i.indexOf(O);J===-1?(i.push(O),r.push(j)):r[J]+=j}const h=[],v=[];for(let o=0,k=i.length;o<k;o++){if(r[o]===0)continue;const O=i[o],j=O.poly;if(v.indexOf(j)===-1)if(O.isExterior)h.push(j);else{v.indexOf(j)===-1&&v.push(j);const J=h.indexOf(O.poly);J!==-1&&h.splice(J,1)}}for(let o=0,k=h.length;o<k;o++){const O=h[o].multiPoly;c.indexOf(O)===-1&&c.push(O)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;const t=this.beforeState().multiPolys,i=this.afterState().multiPolys;switch(Iv.type){case"union":{const r=t.length===0,c=i.length===0;this._isInResult=r!==c;break}case"intersection":{let r,c;t.length<i.length?(r=t.length,c=i.length):(r=i.length,c=t.length),this._isInResult=c===Iv.numMultiPolys&&r<c;break}case"xor":{const r=Math.abs(t.length-i.length);this._isInResult=r%2===1;break}case"difference":{const r=c=>c.length===1&&c[0].isSubject;this._isInResult=r(t)!==r(i);break}}return this._isInResult}}class Bw{constructor(t,i,r){Zn(this,"poly");Zn(this,"isExterior");Zn(this,"segments");Zn(this,"bbox");if(!Array.isArray(t)||t.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=i,this.isExterior=r,this.segments=[],typeof t[0][0]!="number"||typeof t[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");const c=Qc.snap({x:new ic(t[0][0]),y:new ic(t[0][1])});this.bbox={ll:{x:c.x,y:c.y},ur:{x:c.x,y:c.y}};let h=c;for(let v=1,o=t.length;v<o;v++){if(typeof t[v][0]!="number"||typeof t[v][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");const k=Qc.snap({x:new ic(t[v][0]),y:new ic(t[v][1])});k.x.eq(h.x)&&k.y.eq(h.y)||(this.segments.push(dh.fromRing(h,k,this)),k.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=k.x),k.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=k.y),k.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=k.x),k.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=k.y),h=k)}(!c.x.eq(h.x)||!c.y.eq(h.y))&&this.segments.push(dh.fromRing(h,c,this))}getSweepEvents(){const t=[];for(let i=0,r=this.segments.length;i<r;i++){const c=this.segments[i];t.push(c.leftSE),t.push(c.rightSE)}return t}}class oU{constructor(t,i){Zn(this,"multiPoly");Zn(this,"exteriorRing");Zn(this,"interiorRings");Zn(this,"bbox");if(!Array.isArray(t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new Bw(t[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let r=1,c=t.length;r<c;r++){const h=new Bw(t[r],this,!1);h.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=h.bbox.ll.x),h.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=h.bbox.ll.y),h.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=h.bbox.ur.x),h.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=h.bbox.ur.y),this.interiorRings.push(h)}this.multiPoly=i}getSweepEvents(){const t=this.exteriorRing.getSweepEvents();for(let i=0,r=this.interiorRings.length;i<r;i++){const c=this.interiorRings[i].getSweepEvents();for(let h=0,v=c.length;h<v;h++)t.push(c[h])}return t}}class Rw{constructor(t,i){Zn(this,"isSubject");Zn(this,"polys");Zn(this,"bbox");if(!Array.isArray(t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof t[0][0][0]=="number"&&(t=[t])}catch{}this.polys=[],this.bbox={ll:{x:new ic(Number.POSITIVE_INFINITY),y:new ic(Number.POSITIVE_INFINITY)},ur:{x:new ic(Number.NEGATIVE_INFINITY),y:new ic(Number.NEGATIVE_INFINITY)}};for(let r=0,c=t.length;r<c;r++){const h=new oU(t[r],this);h.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=h.bbox.ll.x),h.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=h.bbox.ll.y),h.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=h.bbox.ur.x),h.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=h.bbox.ur.y),this.polys.push(h)}this.isSubject=i}getSweepEvents(){const t=[];for(let i=0,r=this.polys.length;i<r;i++){const c=this.polys[i].getSweepEvents();for(let h=0,v=c.length;h<v;h++)t.push(c[h])}return t}}class Km{constructor(t){Zn(this,"events");Zn(this,"poly");Zn(this,"_isExteriorRing");Zn(this,"_enclosingRing");this.events=t;for(let i=0,r=t.length;i<r;i++)t[i].segment.ringOut=this;this.poly=null}static factory(t){const i=[];for(let r=0,c=t.length;r<c;r++){const h=t[r];if(!h.isInResult()||h.ringOut)continue;let v=null,o=h.leftSE,k=h.rightSE;const O=[o],j=o.point,J=[];for(;v=o,o=k,O.push(o),o.point!==j;)for(;;){const oe=o.getAvailableLinkedEvents();if(oe.length===0){const qe=O[0].point,ke=O[O.length-1].point;throw new Error(`Unable to complete output ring starting at [${qe.x}, ${qe.y}]. Last matching segment found ends at [${ke.x}, ${ke.y}].`)}if(oe.length===1){k=oe[0].otherSE;break}let se=null;for(let qe=0,ke=J.length;qe<ke;qe++)if(J[qe].point===o.point){se=qe;break}if(se!==null){const qe=J.splice(se)[0],ke=O.splice(qe.index);ke.unshift(ke[0].otherSE),i.push(new Km(ke.reverse()));continue}J.push({index:O.length,point:o.point});const be=o.getLeftmostComparator(v);k=oe.sort(be)[0].otherSE;break}i.push(new Km(O))}return i}getGeom(){let t=this.events[0].point;const i=[t];for(let O=1,j=this.events.length-1;O<j;O++){const J=this.events[O].point,oe=this.events[O+1].point;Qc.orient(J,t,oe)!==0&&(i.push(J),t=J)}if(i.length===1)return null;const r=i[0],c=i[1];Qc.orient(r,t,c)===0&&i.shift(),i.push(i[0]);const h=this.isExteriorRing()?1:-1,v=this.isExteriorRing()?0:i.length-1,o=this.isExteriorRing()?i.length:-1,k=[];for(let O=v;O!=o;O+=h)k.push([i[O].x.toNumber(),i[O].y.toNumber()]);return k}isExteriorRing(){if(this._isExteriorRing===void 0){const t=this.enclosingRing();this._isExteriorRing=t?!t.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){var c,h;let t=this.events[0];for(let v=1,o=this.events.length;v<o;v++){const k=this.events[v];du.compare(t,k)>0&&(t=k)}let i=t.segment.prevInResult(),r=i?i.prevInResult():null;for(;;){if(!i)return null;if(!r)return i.ringOut;if(r.ringOut!==i.ringOut)return((c=r.ringOut)==null?void 0:c.enclosingRing())!==i.ringOut?i.ringOut:(h=i.ringOut)==null?void 0:h.enclosingRing();i=r.prevInResult(),r=i?i.prevInResult():null}}}class Ow{constructor(t){Zn(this,"exteriorRing");Zn(this,"interiorRings");this.exteriorRing=t,t.poly=this,this.interiorRings=[]}addInterior(t){this.interiorRings.push(t),t.poly=this}getGeom(){const t=[this.exteriorRing.getGeom()];if(t[0]===null)return null;for(let i=0,r=this.interiorRings.length;i<r;i++){const c=this.interiorRings[i].getGeom();c!==null&&t.push(c)}return t}}class AU{constructor(t){Zn(this,"rings");Zn(this,"polys");this.rings=t,this.polys=this._composePolys(t)}getGeom(){const t=[];for(let i=0,r=this.polys.length;i<r;i++){const c=this.polys[i].getGeom();c!==null&&t.push(c)}return t}_composePolys(t){var r;const i=[];for(let c=0,h=t.length;c<h;c++){const v=t[c];if(!v.poly)if(v.isExteriorRing())i.push(new Ow(v));else{const o=v.enclosingRing();o!=null&&o.poly||i.push(new Ow(o)),(r=o==null?void 0:o.poly)==null||r.addInterior(v)}}return i}}class lU{constructor(t,i=dh.compare){Zn(this,"queue");Zn(this,"tree");Zn(this,"segments");this.queue=t,this.tree=new y0(i),this.segments=[]}process(t){const i=t.segment,r=[];if(t.consumedBy)return t.isLeft?this.queue.delete(t.otherSE):this.tree.delete(i),r;t.isLeft&&this.tree.add(i);let c=i,h=i;do c=this.tree.lastBefore(c);while(c!=null&&c.consumedBy!=null);do h=this.tree.firstAfter(h);while(h!=null&&h.consumedBy!=null);if(t.isLeft){let v=null;if(c){const k=c.getIntersection(i);if(k!==null&&(i.isAnEndpoint(k)||(v=k),!c.isAnEndpoint(k))){const O=this._splitSafely(c,k);for(let j=0,J=O.length;j<J;j++)r.push(O[j])}}let o=null;if(h){const k=h.getIntersection(i);if(k!==null&&(i.isAnEndpoint(k)||(o=k),!h.isAnEndpoint(k))){const O=this._splitSafely(h,k);for(let j=0,J=O.length;j<J;j++)r.push(O[j])}}if(v!==null||o!==null){let k=null;v===null?k=o:o===null?k=v:k=du.comparePoints(v,o)<=0?v:o,this.queue.delete(i.rightSE),r.push(i.rightSE);const O=i.split(k);for(let j=0,J=O.length;j<J;j++)r.push(O[j])}r.length>0?(this.tree.delete(i),r.push(t)):(this.segments.push(i),i.prev=c)}else{if(c&&h){const v=c.getIntersection(h);if(v!==null){if(!c.isAnEndpoint(v)){const o=this._splitSafely(c,v);for(let k=0,O=o.length;k<O;k++)r.push(o[k])}if(!h.isAnEndpoint(v)){const o=this._splitSafely(h,v);for(let k=0,O=o.length;k<O;k++)r.push(o[k])}}}this.tree.delete(i)}return r}_splitSafely(t,i){this.tree.delete(t);const r=t.rightSE;this.queue.delete(r);const c=t.split(i);return c.push(r),t.consumedBy===void 0&&this.tree.add(t),c}}class uU{constructor(){Zn(this,"type");Zn(this,"numMultiPolys")}run(t,i,r){qd.type=t;const c=[new Rw(i,!0)];for(let j=0,J=r.length;j<J;j++)c.push(new Rw(r[j],!1));if(qd.numMultiPolys=c.length,qd.type==="difference"){const j=c[0];let J=1;for(;J<c.length;)Ev(c[J].bbox,j.bbox)!==null?J++:c.splice(J,1)}if(qd.type==="intersection")for(let j=0,J=c.length;j<J;j++){const oe=c[j];for(let se=j+1,be=c.length;se<be;se++)if(Ev(oe.bbox,c[se].bbox)===null)return[]}const h=new y0(du.compare);for(let j=0,J=c.length;j<J;j++){const oe=c[j].getSweepEvents();for(let se=0,be=oe.length;se<be;se++)h.add(oe[se])}const v=new lU(h);let o=null;for(h.size!=0&&(o=h.first(),h.delete(o));o;){const j=v.process(o);for(let J=0,oe=j.length;J<oe;J++){const se=j[J];se.consumedBy===void 0&&h.add(se)}h.size!=0?(o=h.first(),h.delete(o)):o=null}Qc.reset();const k=Km.factory(v.segments);return new AU(k).getGeom()}}const qd=new uU,Iv=qd,cU=(e,...t)=>Iv.run("intersection",e,t);Qc.set;var hU={exports:{}},u2,zw;function fU(){return zw||(zw=1,u2=function(t){return function i(r){return arguments.length===0||r!=null&&r["@@functional/placeholder"]===!0?i:t.apply(this,arguments)}}),u2}var c2,Fw;function dU(){if(Fw)return c2;Fw=1;var e=fU();return c2=e(function(i){return i===null?"Null":i===void 0?"Undefined":Object.prototype.toString.call(i).slice(8,-1)}),c2}var h2,Nw;function ky(){if(Nw)return h2;Nw=1;function e(t){var i=typeof t;return!!t&&(i=="object"||i=="function")}return h2=e,h2}var f2,Vw;function pU(){if(Vw)return f2;Vw=1;var e=ky();function t(i){return e(i)?i:Object(i)}return f2=t,f2}var d2,Uw;function gU(){if(Uw)return d2;Uw=1;var e=pU();function t(i){return function(r,c,h){for(var v=e(r),o=h(r),k=o.length,O=i?k:-1;i?O--:++O<k;){var j=o[O];if(c(v[j],j,v)===!1)break}return r}}return d2=t,d2}var p2,Gw;function mU(){if(Gw)return p2;Gw=1;var e=gU(),t=e();return p2=t,p2}var g2,Hw;function _U(){if(Hw)return g2;Hw=1;function e(t){return function(i){return i==null?void 0:i[t]}}return g2=e,g2}var m2,Qw;function vU(){if(Qw)return m2;Qw=1;var e=_U(),t=e("length");return m2=t,m2}var _2,qw;function My(){if(qw)return _2;qw=1;var e=9007199254740991;function t(i){return typeof i=="number"&&i>-1&&i%1==0&&i<=e}return _2=t,_2}var v2,Zw;function yU(){if(Zw)return v2;Zw=1;var e=vU(),t=My();function i(r){return r!=null&&t(e(r))}return v2=i,v2}var y2,jw;function x1(){if(jw)return y2;jw=1;function e(t){return!!t&&typeof t=="object"}return y2=e,y2}var b2,Ww;function F8(){if(Ww)return b2;Ww=1;var e=yU(),t=x1(),i=Object.prototype,r=i.hasOwnProperty,c=i.propertyIsEnumerable;function h(v){return t(v)&&e(v)&&r.call(v,"callee")&&!c.call(v,"callee")}return b2=h,b2}var x2,Yw;function bU(){if(Yw)return x2;Yw=1;var e=ky(),t="[object Function]",i=Object.prototype,r=i.toString;function c(h){return e(h)&&r.call(h)==t}return x2=c,x2}var w2,Xw;function xU(){if(Xw)return w2;Xw=1;var e=bU(),t=x1(),i=/^\[object .+?Constructor\]$/,r=Object.prototype,c=Function.prototype.toString,h=r.hasOwnProperty,v=RegExp("^"+c.call(h).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function o(k){return k==null?!1:e(k)?v.test(c.call(k)):t(k)&&i.test(k)}return w2=o,w2}var S2,Kw;function wU(){if(Kw)return S2;Kw=1;var e=xU();function t(i,r){var c=i==null?void 0:i[r];return e(c)?c:void 0}return S2=t,S2}var C2,Jw;function SU(){if(Jw)return C2;Jw=1;var e=wU(),t=My(),i=x1(),r="[object Array]",c=Object.prototype,h=c.toString,v=e(Array,"isArray"),o=v||function(k){return i(k)&&t(k.length)&&h.call(k)==r};return C2=o,C2}var E2,$w;function CU(){if($w)return E2;$w=1;var e=/^\d+$/,t=9007199254740991;function i(r,c){return r=typeof r=="number"||e.test(r)?+r:-1,c=c??t,r>-1&&r%1==0&&r<c}return E2=i,E2}var I2,e3;function EU(){if(e3)return I2;e3=1;var e=F8(),t=SU(),i=CU(),r=My(),c=ky(),h=Object.prototype,v=h.hasOwnProperty;function o(k){if(k==null)return[];c(k)||(k=Object(k));var O=k.length;O=O&&r(O)&&(t(k)||e(k))&&O||0;for(var j=k.constructor,J=-1,oe=typeof j=="function"&&j.prototype===k,se=Array(O),be=O>0;++J<O;)se[J]=J+"";for(var qe in k)!(be&&i(qe,O))&&!(qe=="constructor"&&(oe||!v.call(k,qe)))&&se.push(qe);return se}return I2=o,I2}var T2,t3;function IU(){if(t3)return T2;t3=1;var e=mU(),t=EU();function i(r,c){return e(r,c,t)}return T2=i,T2}var k2,i3;function TU(){if(i3)return k2;i3=1;var e=IU(),t=F8(),i=x1(),r="[object Object]",c=Object.prototype,h=c.hasOwnProperty,v=c.toString;function o(k){var O;if(!(i(k)&&v.call(k)==r&&!t(k))||!h.call(k,"constructor")&&(O=k.constructor,typeof O=="function"&&!(O instanceof O)))return!1;var j;return e(k,function(J,oe){j=oe}),j===void 0||h.call(k,j)}return k2=o,k2}(function(e){e.exports=function(t){var i={};function r(c){if(i[c])return i[c].exports;var h=i[c]={exports:{},id:c,loaded:!1};return t[c].call(h.exports,h,h.exports,r),h.loaded=!0,h.exports}return r.m=t,r.c=i,r.p="/lib/",r(0)}([function(t,i,r){t.exports=r(1)},function(t,i,r){Object.defineProperty(i,"__esModule",{value:!0}),i.union=r(2).default,i.any=r(12).default,i.nil=r(14).default,i.mapOf=r(16).default,i.arrayOf=r(18).default,i.record=r(20).default,i.optional=r(23).default,i.validate=r(25).default,i.deferred=r(26).default,i.createValidator=r(4).default,i.isValid=r(28).default},function(t,i,r){Object.defineProperty(i,"__esModule",{value:!0}),i.default=o;var c=r(3),h=v(c);function v(k){return k&&k.__esModule?k:{default:k}}function o(){for(var k=arguments.length,O=Array(k),j=0;j<k;j++)O[j]=arguments[j];return new h.default(O)}},function(t,i,r){var c=function(){function j(J,oe){for(var se=0;se<oe.length;se++){var be=oe[se];be.enumerable=be.enumerable||!1,be.configurable=!0,"value"in be&&(be.writable=!0),Object.defineProperty(J,be.key,be)}}return function(J,oe,se){return oe&&j(J.prototype,oe),se&&j(J,se),J}}();Object.defineProperty(i,"__esModule",{value:!0});var h=r(4),v=o(h);r(5),r(6);function o(j){return j&&j.__esModule?j:{default:j}}function k(j,J){if(!(j instanceof J))throw new TypeError("Cannot call a class as a function")}var O=function(){function j(J){k(this,j),this.validators=[];var oe=!0,se=!1,be=void 0;try{for(var qe=J[Symbol.iterator](),ke;!(oe=(ke=qe.next()).done);oe=!0){var Qe=ke.value;this.validators.push((0,v.default)(Qe))}}catch(We){se=!0,be=We}finally{try{!oe&&qe.return&&qe.return()}finally{if(se)throw be}}}return c(j,[{key:"isValid",value:function(oe){var se=!0,be=!1,qe=void 0;try{for(var ke=this.validators[Symbol.iterator](),Qe;!(se=(Qe=ke.next()).done);se=!0){var We=Qe.value;if(We.isValid(oe))return!0}}catch(ct){be=!0,qe=ct}finally{try{!se&&ke.return&&ke.return()}finally{if(be)throw qe}}return!1}},{key:"getValidationResult",value:function(oe){if(this.isValid(oe))return{isValid:"true"};var se=this._getValidationDetails(oe);return{isValid:"false",message:`Value doesn't match any of the expected variants.
Value: `+JSON.stringify(oe)+`
Details: 
`+se.message,score:se.score}}},{key:"_getValidationDetails",value:function(oe){var se=[],be=!0,qe=!1,ke=void 0;try{for(var Qe=this.validators[Symbol.iterator](),We;!(be=(We=Qe.next()).done);be=!0){var ct=We.value;se.push(ct.getValidationResult(oe))}}catch(yt){qe=!0,ke=yt}finally{try{!be&&Qe.return&&Qe.return()}finally{if(qe)throw ke}}se.sort(function(yt,xe){return yt.score<xe.score?1:yt.score>xe.score?-1:0}),se.length>3&&(se.length=3);var St=se.map(function(yt){return yt.message}).join(`
`);return{message:St,score:se[0].score}}}]),j}();i.default=O},function(t,i,r){Object.defineProperty(i,"__esModule",{value:!0}),i.default=qe,r(5);var c=r(7),h=se(c),v=r(9),o=se(v),k=r(10),O=se(k),j=r(3);se(j);var J=r(11),oe=se(J);function se(ke){return ke&&ke.__esModule?ke:{default:ke}}function be(ke){return ke&&typeof Symbol<"u"&&ke.constructor===Symbol?"symbol":typeof ke}function qe(ke){if(ke==null)throw Error("Null cannot be a valid validation descriptor");if(ke===String)return h.default;if(ke===Number)return o.default;if(ke===Boolean)return O.default;if((typeof ke>"u"?"undefined":be(ke))==="object"&&ke&&typeof ke.isValid=="function"&&typeof ke.getValidationResult=="function")return ke;if(typeof ke=="string"||typeof ke=="number"||typeof ke=="boolean")return new oe.default(ke);throw new Error("Can't recognize this descriptor: "+ke)}},function(t,i,r){r(6)},function(t,i){},function(t,i,r){Object.defineProperty(i,"__esModule",{value:!0});var c=r(8),h=v(c);r(6),r(5);function v(k){return k&&k.__esModule?k:{default:k}}var o={isValid:function(O){return typeof O=="string"},getValidationResult:function(O){return o.isValid(O)?{isValid:"true"}:{isValid:"false",message:"String expected, "+(0,h.default)(O)+" given.",score:0}}};i.default=o},function(t,i){t.exports=dU()},function(t,i,r){Object.defineProperty(i,"__esModule",{value:!0});var c=r(8),h=v(c);r(6),r(5);function v(k){return k&&k.__esModule?k:{default:k}}var o={isValid:function(O){return typeof O=="number"},getValidationResult:function(O){return o.isValid(O)?{isValid:"true"}:{isValid:"false",message:"Number expected. '"+(0,h.default)(O)+"' given.",score:0}}};i.default=o},function(t,i,r){Object.defineProperty(i,"__esModule",{value:!0});var c=r(8),h=v(c);r(6),r(5);function v(k){return k&&k.__esModule?k:{default:k}}var o={isValid:function(O){return typeof O=="boolean"},getValidationResult:function(O){return o.isValid(O)?{isValid:"true"}:{isValid:"false",message:"Boolean expected. "+(0,h.default)(O)+" given.",score:0}}};i.default=o},function(t,i,r){var c=function(){function O(j,J){for(var oe=0;oe<J.length;oe++){var se=J[oe];se.enumerable=se.enumerable||!1,se.configurable=!0,"value"in se&&(se.writable=!0),Object.defineProperty(j,se.key,se)}}return function(j,J,oe){return J&&O(j.prototype,J),oe&&O(j,oe),j}}();Object.defineProperty(i,"__esModule",{value:!0});var h=r(4);v(h),r(5),r(6);function v(O){return O&&O.__esModule?O:{default:O}}function o(O,j){if(!(O instanceof j))throw new TypeError("Cannot call a class as a function")}var k=function(){function O(j){o(this,O),this.expectedValue=j}return c(O,[{key:"isValid",value:function(J){return J===this.expectedValue}},{key:"getValidationResult",value:function(J){return this.isValid(J)?{isValid:"true"}:{isValid:"false",message:"Expected: "+JSON.stringify(this.expectedValue)+". Given: "+J,score:0}}}]),O}();i.default=k},function(t,i,r){Object.defineProperty(i,"__esModule",{value:!0});var c=r(13),h=v(c);function v(o){return o&&o.__esModule?o:{default:o}}i.default=h.default},function(t,i,r){Object.defineProperty(i,"__esModule",{value:!0});var c=r(8);h(c),r(6),r(5);function h(o){return o&&o.__esModule?o:{default:o}}var v={isValid:function(k){return!0},getValidationResult:function(k){return{isValid:"true"}}};i.default=v},function(t,i,r){Object.defineProperty(i,"__esModule",{value:!0});var c=r(15),h=v(c);function v(o){return o&&o.__esModule?o:{default:o}}i.default=h.default},function(t,i,r){Object.defineProperty(i,"__esModule",{value:!0});var c=r(8),h=v(c);r(6),r(5);function v(k){return k&&k.__esModule?k:{default:k}}var o={isValid:function(O){return O==null},getValidationResult:function(O){return o.isValid(O)?{isValid:"true"}:{isValid:"false",message:"Null expected. "+(0,h.default)(O)+" given.",score:0}}};i.default=o},function(t,i,r){Object.defineProperty(i,"__esModule",{value:!0}),i.default=o;var c=r(17),h=v(c);function v(k){return k&&k.__esModule?k:{default:k}}function o(k){return new h.default(k)}},function(t,i,r){var c=function(){function se(be,qe){for(var ke=0;ke<qe.length;ke++){var Qe=qe[ke];Qe.enumerable=Qe.enumerable||!1,Qe.configurable=!0,"value"in Qe&&(Qe.writable=!0),Object.defineProperty(be,Qe.key,Qe)}}return function(be,qe,ke){return qe&&se(be.prototype,qe),ke&&se(be,ke),be}}();Object.defineProperty(i,"__esModule",{value:!0});var h=r(8),v=O(h),o=r(4),k=O(o);r(6),r(5);function O(se){return se&&se.__esModule?se:{default:se}}function j(se,be){if(!(se instanceof be))throw new TypeError("Cannot call a class as a function")}function J(se){return se&&typeof Symbol<"u"&&se.constructor===Symbol?"symbol":typeof se}var oe=function(){function se(be){j(this,se),this.validator=(0,k.default)(be)}return c(se,[{key:"isValid",value:function(qe){if(!((typeof qe>"u"?"undefined":J(qe))==="object"&&qe))return!1;var ke=Object.keys(qe),Qe=!0,We=!1,ct=void 0;try{for(var St=ke[Symbol.iterator](),yt;!(Qe=(yt=St.next()).done);Qe=!0){var xe=yt.value,Gt=qe[xe];if(this.validator.isValid(Gt)===!1)return!1}}catch(Ve){We=!0,ct=Ve}finally{try{!Qe&&St.return&&St.return()}finally{if(We)throw ct}}return!0}},{key:"getValidationResult",value:function(qe){if(!((typeof qe>"u"?"undefined":J(qe))==="object"&&qe))return{isValid:"false",message:"Object expected. "+(0,v.default)(qe)+" given.",score:0};var ke=Object.keys(qe),Qe=!0,We=!1,ct=void 0;try{for(var St=ke[Symbol.iterator](),yt;!(Qe=(yt=St.next()).done);Qe=!0){var xe=yt.value,Gt=qe[xe],Ve=this.validator.getValidationResult(Gt);if(Ve.isValid==="false")return{isValid:"false",message:"Validation failed for key '"+xe+"': "+Ve.message,score:1}}}catch(Je){We=!0,ct=Je}finally{try{!Qe&&St.return&&St.return()}finally{if(We)throw ct}}return{isValid:"true"}}}]),se}();i.default=oe},function(t,i,r){Object.defineProperty(i,"__esModule",{value:!0}),i.default=o;var c=r(19),h=v(c);function v(k){return k&&k.__esModule?k:{default:k}}function o(k){return new h.default(k)}},function(t,i,r){var c=function(){function oe(se,be){for(var qe=0;qe<be.length;qe++){var ke=be[qe];ke.enumerable=ke.enumerable||!1,ke.configurable=!0,"value"in ke&&(ke.writable=!0),Object.defineProperty(se,ke.key,ke)}}return function(se,be,qe){return be&&oe(se.prototype,be),qe&&oe(se,qe),se}}();Object.defineProperty(i,"__esModule",{value:!0});var h=r(8),v=O(h),o=r(4),k=O(o);r(6),r(5);function O(oe){return oe&&oe.__esModule?oe:{default:oe}}function j(oe,se){if(!(oe instanceof se))throw new TypeError("Cannot call a class as a function")}var J=function(){function oe(se){j(this,oe),this.validator=(0,k.default)(se)}return c(oe,[{key:"isValid",value:function(be){if(!Array.isArray(be))return!1;var qe=!0,ke=!1,Qe=void 0;try{for(var We=be[Symbol.iterator](),ct;!(qe=(ct=We.next()).done);qe=!0){var St=ct.value;if(this.validator.isValid(St)===!1)return!1}}catch(yt){ke=!0,Qe=yt}finally{try{!qe&&We.return&&We.return()}finally{if(ke)throw Qe}}return!0}},{key:"getValidationResult",value:function(be){if(!Array.isArray(be))return{isValid:"false",message:"Array expected. "+(0,v.default)(be)+" given.",score:0};for(var qe=0;qe<be.length;qe++){var ke=be[qe],Qe=this.validator.getValidationResult(ke);if(Qe.isValid==="false")return{isValid:"false",message:"Validation failed on item #"+qe+": "+Qe.message,score:1}}return{isValid:"true"}}}]),oe}();i.default=J},function(t,i,r){Object.defineProperty(i,"__esModule",{value:!0}),i.default=o;var c=r(21),h=v(c);function v(k){return k&&k.__esModule?k:{default:k}}function o(k){return new h.default(k)}},function(t,i,r){var c=function(){function qe(ke,Qe){for(var We=0;We<Qe.length;We++){var ct=Qe[We];ct.enumerable=ct.enumerable||!1,ct.configurable=!0,"value"in ct&&(ct.writable=!0),Object.defineProperty(ke,ct.key,ct)}}return function(ke,Qe,We){return Qe&&qe(ke.prototype,Qe),We&&qe(ke,We),ke}}();Object.defineProperty(i,"__esModule",{value:!0});var h=r(8),v=J(h),o=r(22),k=J(o),O=r(4),j=J(O);r(5),r(6);function J(qe){return qe&&qe.__esModule?qe:{default:qe}}function oe(qe,ke){if(!(qe instanceof ke))throw new TypeError("Cannot call a class as a function")}function se(qe){return qe&&typeof Symbol<"u"&&qe.constructor===Symbol?"symbol":typeof qe}var be=function(){function qe(ke){if(oe(this,qe),!((typeof ke>"u"?"undefined":se(ke))==="object"&&ke&&(0,k.default)(ke)))throw Error("A record must be defined by an object.");this.shape={};var Qe=!0,We=!1,ct=void 0;try{for(var St=Object.getOwnPropertyNames(ke)[Symbol.iterator](),yt;!(Qe=(yt=St.next()).done);Qe=!0){var xe=yt.value;try{this.shape[xe]=(0,j.default)(ke[xe])}catch(Je){var Gt=xe,Ve=Je.stack;throw Je.originalStack?(Ve=Je.originalStack,Gt+="."+Je.propertyName,Je.propertyName=Gt):Je.originalStack=Je.stack,Je.stack="Error defining prop '"+Gt+"': "+Je.originalStack,Je}}}catch(Je){We=!0,ct=Je}finally{try{!Qe&&St.return&&St.return()}finally{if(We)throw ct}}}return c(qe,[{key:"isValid",value:function(Qe){if(!((typeof Qe>"u"?"undefined":se(Qe))==="object"&&Qe))return!1;var We=!0,ct=!1,St=void 0;try{for(var yt=Object.keys(this.shape)[Symbol.iterator](),xe;!(We=(xe=yt.next()).done);We=!0){var Gt=xe.value,Ve=this.shape[Gt];if(Ve.isValid(Qe[Gt])===!1)return!1}}catch(Je){ct=!0,St=Je}finally{try{!We&&yt.return&&yt.return()}finally{if(ct)throw St}}return!0}},{key:"getValidationResult",value:function(Qe){if(!((typeof Qe>"u"?"undefined":se(Qe))==="object"&&Qe))return{isValid:"false",message:"Object expected, "+(0,v.default)(Qe)+" given.",score:0};var We=0,ct=!0,St=!1,yt=void 0;try{for(var xe=Object.keys(this.shape)[Symbol.iterator](),Gt;!(ct=(Gt=xe.next()).done);ct=!0){var Ve=Gt.value,Je=this.shape[Ve],et=Je.getValidationResult(Qe[Ve]);if(et.isValid==="false")return{isValid:"false",message:"Error validating prop "+Ve+`:
 `+et.message,score:1+We};We++}}catch(lt){St=!0,yt=lt}finally{try{!ct&&xe.return&&xe.return()}finally{if(St)throw yt}}return{isValid:"true"}}}]),qe}();i.default=be},function(t,i){t.exports=TU()},function(t,i,r){Object.defineProperty(i,"__esModule",{value:!0}),i.default=o;var c=r(24),h=v(c);function v(k){return k&&k.__esModule?k:{default:k}}function o(k){return new h.default(k)}},function(t,i,r){var c=function(){function j(J,oe){for(var se=0;se<oe.length;se++){var be=oe[se];be.enumerable=be.enumerable||!1,be.configurable=!0,"value"in be&&(be.writable=!0),Object.defineProperty(J,be.key,be)}}return function(J,oe,se){return oe&&j(J.prototype,oe),se&&j(J,se),J}}();Object.defineProperty(i,"__esModule",{value:!0});var h=r(4),v=o(h);r(6),r(5);function o(j){return j&&j.__esModule?j:{default:j}}function k(j,J){if(!(j instanceof J))throw new TypeError("Cannot call a class as a function")}var O=function(){function j(J){k(this,j),this.validator=(0,v.default)(J)}return c(j,[{key:"isValid",value:function(oe){return oe?this.validator.isValid(oe):!0}},{key:"getValidationResult",value:function(oe){return oe?this.validator.getValidationResult(oe):{isValid:"true"}}}]),j}();i.default=O},function(t,i,r){Object.defineProperty(i,"__esModule",{value:!0}),i.default=o;var c=r(4),h=v(c);function v(k){return k&&k.__esModule?k:{default:k}}function o(k,O){var j=(0,h.default)(k),J=j.getValidationResult(O);if(J.isValid==="false")throw Error(J.message);return O}},function(t,i,r){Object.defineProperty(i,"__esModule",{value:!0}),i.default=o;var c=r(27),h=v(c);function v(k){return k&&k.__esModule?k:{default:k}}function o(k){return new h.default(k)}},function(t,i,r){var c=function(){function J(oe,se){for(var be=0;be<se.length;be++){var qe=se[be];qe.enumerable=qe.enumerable||!1,qe.configurable=!0,"value"in qe&&(qe.writable=!0),Object.defineProperty(oe,qe.key,qe)}}return function(oe,se,be){return se&&J(oe.prototype,se),be&&J(oe,be),oe}}();Object.defineProperty(i,"__esModule",{value:!0});var h=r(8),v=k(h),o=r(4);k(o),r(6),r(5);function k(J){return J&&J.__esModule?J:{default:J}}function O(J,oe){if(!(J instanceof oe))throw new TypeError("Cannot call a class as a function")}var j=function(){function J(oe){if(O(this,J),typeof oe!="function")throw Error("Deferred validator only accepts a function. "+(0,v.default)(oe)+" given");this.deferredValidator=oe}return c(J,[{key:"isValid",value:function(se){return this._getValidator().isValid(se)}},{key:"getValidationResult",value:function(se){return this._getValidator().getValidationResult(se)}},{key:"_getValidator",value:function(){return this.validator||(this.validator=this.deferredValidator()),this.validator}}]),J}();i.default=j},function(t,i,r){Object.defineProperty(i,"__esModule",{value:!0}),i.default=o;var c=r(4),h=v(c);function v(k){return k&&k.__esModule?k:{default:k}}function o(k,O){var j=(0,h.default)(k);return j.isValid(O)}}])})(hU);function n3(e){let t,i,r={lngLat:e[4],class:"hex-marker",$$slots:{default:[kU]},$$scope:{ctx:e}};return t=new EF({props:r}),e[19](t),{c(){xr(t.$$.fragment)},l(c){Yr(t.$$.fragment,c)},m(c,h){wr(t,c,h),i=!0},p(c,h){const v={};h[0]&16&&(v.lngLat=c[4]),h[1]&16384&&(v.$$scope={dirty:h,ctx:c}),t.$set(v)},i(c){i||(Pi(t.$$.fragment,c),i=!0)},o(c){Hi(t.$$.fragment,c),i=!1},d(c){e[19](null),Sr(t,c)}}}function kU(e){let t,i,r,c,h,v,o,k;return{c(){t=as("svg"),i=as("defs"),r=as("style"),c=ja(`.fill {\r
                    fill: #000;\r
                    stroke: solid 1px red;\r
                }\r
                .stroke {\r
                    stroke: #fff;\r
                }\r
            `),h=as("g"),v=as("g"),o=as("path"),k=as("path"),this.h()},l(O){t=os(O,"svg",{class:!0,id:!0,"data-name":!0,xmlns:!0,viewBox:!0});var j=en(t);i=os(j,"defs",{});var J=en(i);r=os(J,"style",{});var oe=en(r);c=Wa(oe,`.fill {\r
                    fill: #000;\r
                    stroke: solid 1px red;\r
                }\r
                .stroke {\r
                    stroke: #fff;\r
                }\r
            `),oe.forEach(li),J.forEach(li),h=os(j,"g",{id:!0,"data-name":!0});var se=en(h);v=os(se,"g",{});var be=en(v);o=os(be,"path",{class:!0,d:!0}),en(o).forEach(li),k=os(be,"path",{d:!0}),en(k).forEach(li),be.forEach(li),se.forEach(li),j.forEach(li),this.h()},h(){vi(o,"class","fill"),vi(o,"d","m35.23,60.88c-1.81,0-3.43-.93-4.33-2.5L2.68,9.5c-.9-1.57-.9-3.44,0-5,.9-1.57,2.52-2.5,4.33-2.5h56.44c1.81,0,3.43.93,4.33,2.5.9,1.56.9,3.43,0,5l-28.22,48.88c-.9,1.57-2.52,2.5-4.33,2.5Z"),vi(k,"d","m63.45,4c1.56,0,2.34,1.05,2.6,1.5.26.45.78,1.65,0,3l-28.22,48.88c-.78,1.35-2.08,1.5-2.6,1.5s-1.82-.15-2.6-1.5L4.41,8.5c-.78-1.35-.26-2.55,0-3,.26-.45,1.03-1.5,2.6-1.5h56.44m0-4H7.01C1.62,0-1.75,5.83.95,10.5l28.22,48.88c1.35,2.33,3.7,3.5,6.06,3.5s4.72-1.17,6.06-3.5l28.22-48.88c2.69-4.67-.67-10.5-6.06-10.5h0Z"),vi(h,"id","Layer_1-2"),vi(h,"data-name","Layer 1"),vi(t,"class","marker-svg"),vi(t,"id","Layer_2"),vi(t,"data-name","Layer 2"),vi(t,"xmlns","http://www.w3.org/2000/svg"),vi(t,"viewBox","0 0 70.46 62.88")},m(O,j){vn(O,t,j),Ri(t,i),Ri(i,r),Ri(r,c),Ri(t,h),Ri(h,v),Ri(v,o),Ri(v,k)},p:_a,d(O){O&&li(t)}}}function MU(e){var c;let t,i,r=((c=e[0])==null?void 0:c.hex)&&n3(e);return{c(){r&&r.c(),t=Rr()},l(h){r&&r.l(h),t=Rr()},m(h,v){r&&r.m(h,v),vn(h,t,v),i=!0},p(h,v){var o;(o=h[0])!=null&&o.hex?r?(r.p(h,v),v[0]&1&&Pi(r,1)):(r=n3(h),r.c(),Pi(r,1),r.m(t.parentNode,t)):r&&(ia(),Hi(r,1,1,()=>{r=null}),na())},i(h){i||(Pi(r),i=!0)},o(h){Hi(r),i=!1},d(h){h&&li(t),r&&r.d(h)}}}function PU(e){let t,i,r,c;function h(k){e[20](k)}function v(k){e[21](k)}let o={style:"https://basemaps.cartocdn.com/gl/"+e[6]+"-gl-style/style.json",standardControls:!0,center:e[5],zoom:4,$$slots:{default:[MU]},$$scope:{ctx:e}};return e[1]!==void 0&&(o.map=e[1]),e[2]!==void 0&&(o.loaded=e[2]),t=new xF({props:o}),ts.push(()=>Uc(t,"map",h)),ts.push(()=>Uc(t,"loaded",v)),{c(){xr(t.$$.fragment)},l(k){Yr(t.$$.fragment,k)},m(k,O){wr(t,k,O),c=!0},p(k,O){const j={};O[0]&25|O[1]&16384&&(j.$$scope={dirty:O,ctx:k}),!i&&O[0]&2&&(i=!0,j.map=k[1],Nc(()=>i=!1)),!r&&O[0]&4&&(r=!0,j.loaded=k[2],Nc(()=>r=!1)),t.$set(j)},i(k){c||(Pi(t.$$.fragment,k),c=!0)},o(k){Hi(t.$$.fragment,k),c=!1},d(k){Sr(t,k)}}}let r3=6;const DU=500;function LU(e,t,i){const r=[-119.449444,37.166111];let{metric:c}=t,{colorScheme:h}=t,{selectionData:v}=t,{showCounties:o}=t,{showEcoregions:k}=t,{drawnPath:O}=t,{clade:j}=t,{clades:J}=t;const oe=[-124.40971816218747,32.534154544948464,-114.13120909272375,42.009518182466415];let se=null,be,qe=!1,ke,Qe,We,ct=[-119.449444,37.166111],{built:St}=t;function yt(Lt){if(!be.getStyle())return;console.log(be.getStyle().layers);let ni=be.getStyle().layers.filter(si=>{var zi;let Oi=(zi=si.source)==null?void 0:zi.split("-");return Oi&&Oi[0]==="hexlayer"&&Oi[1]!==Lt});for(let si of ni)be.setPaintProperty(si.id,"fill-opacity",0)}async function xe(Lt){if(!Me)return;if(console.log(Lt),Lt===null){try{be.removeLayer("drawLayer"),be.removeSource("drawnPolygon")}catch(ki){console.log(ki)}return}console.log(be.transform),console.log(Lt[0]),console.log(be.transform.pointLocation({x:10,y:10})),console.log(be.transform.pointLocation(Lt[0]));let ni=[];for(let ki of Lt){let sn=be.transform.pointLocation(ki);ni.push([sn.lat,sn.lng])}let si=HV(ni,r3),Oi=lV.h3SetToMultiPolygonFeature(si);console.log(Oi),console.log(Me);let zi=WV(Me);console.log(zi),console.log(Oi.geometry),console.log(zi.features[0].geometry);let oi=cU(Oi.geometry.coordinates,zi.features[0].geometry.coordinates);console.log(oi);let $i={type:"Feature",properties:{},geometry:{type:"MultiPolygon",coordinates:oi}};try{be.removeLayer("drawLayer"),be.removeSource("drawnPolygon")}catch(ki){console.log(ki)}be.addSource("drawnPolygon",{type:"geojson",data:$i}),be.addLayer({id:"drawLayer",type:"fill",source:"drawnPolygon",layout:{},paint:{"fill-color":"#00ffff","fill-opacity":.75,"fill-color-transition":{duration:500,delay:0}}},Qe)}function Gt(Lt,ni){let si=`hex-${Lt}-${ni}`;console.log(Lt),be.moveLayer(si,"place_hamlet"),setTimeout(()=>{Ve([si])},DU/4),be.setPaintProperty(si,"fill-opacity",1)}function Ve(Lt=[]){let ni=be.getStyle().layers.filter(si=>{var Oi;return((Oi=si.source)==null?void 0:Oi.includes("hexlayer"))&&!Lt.includes(si.id)});for(let si of ni)be.setPaintProperty(si.id,"fill-opacity",0)}function Je(Lt){let ni=be.getStyle().layers.filter(si=>si.source===`hexlayer-${j}`);for(let si of ni){let Oi=si.id.split("-")[1],zi=dt(Oi,Lt,!0);console.log("palette:",zi),be.setPaintProperty(si.id,"fill-color",zi)}}function et(Lt){Lt?be.setPaintProperty("counties","line-opacity",1):be.setPaintProperty("counties","line-opacity",0)}function lt(Lt){console.log("ecoregions",Lt),Lt?(be.setPaintProperty("ecoregions-line","line-opacity",1),be.setPaintProperty("ecoregions-fill","fill-opacity",.75)):(be.setPaintProperty("ecoregions-line","line-opacity",0),be.setPaintProperty("ecoregions-fill","fill-opacity",0))}function ut(Lt){Lt?(be.setPaintProperty("california-line","line-opacity",1),be.setPaintProperty("california-fill","fill-opacity",.75)):(be.setPaintProperty("california-line","line-opacity",0),be.setPaintProperty("california-fill","fill-opacity",0))}let Ke,Me,Ze,Fe,vt=vm(0,5e3,h);function dt(Lt,ni,si=!0){if(!(!Ze||!Fe))if(console.log("generating for ",Lt),si){vt=vm(Fe[Lt],Ze[Lt],ni),console.log(vt),vt.length;let Oi=vt.map((zi,oi)=>[zi[0],zi[1]]);return Oi=Oi.flat(),console.log(Oi),["interpolate",["linear"],["get",Lt],...Oi]}else return["step",["get",Lt],"#ccc",0,"#fc4e2a",600,"#00E676",1300,"#2a4e9b"]}let{update:_t}=t;async function ei(Lt,ni){var si,Oi;console.log(Lt),console.log((si=be==null?void 0:be.getStyle())==null?void 0:si.sources),!(be&&((Oi=be==null?void 0:be.getStyle())!=null&&Oi.sources[`hexlayer-${Lt}`]))&&fetch(`/phast/${Lt}_hex.json`).then(zi=>zi.json()).then(zi=>Me=zi).then(()=>{var ki,sn;Ze=(ki=Me.properties)==null?void 0:ki.maxes,Fe=(sn=Me.properties)==null?void 0:sn.mins;let oi=be.getStyle().layers[71].id;be.addSource(`hexlayer-${Lt}`,{type:"geojson",data:Me});for(let ar of mm){let ti=`hex-${ar}-${Lt}`;be.addLayer({id:ti,type:"fill",source:`hexlayer-${Lt}`,layout:{},paint:{"fill-color":dt(ar,h,!0),"fill-opacity":.75,"fill-color-transition":{duration:500,delay:0}}},oi),console.log("added layer ",ti)}let $i=`hex-${mm[0]}-${Lt}`;be.on("click",$i,ar=>{console.log(ar);let ti=GV(ar.lngLat.lat,ar.lngLat.lng,ni);if(wi(ti,be),ti===(v==null?void 0:v.hex)){_t(null);return}console.log(be.getStyle().layers);let Wi=Mw(ti);i(4,ct={lng:Wi[1],lat:Wi[0]}),console.log(ti),_t({latlng:ar.lngLat,hex:ti,properties:ar.features[0].properties})}),be.on("mouseenter",$i,()=>{be.getCanvas().style.cursor="pointer"}),be.on("mouseleave",$i,()=>{be.getCanvas().style.cursor=""}),be.on("dragstart",$i,()=>{be.getCanvas().style.cursor="grabbing"}),be.on("dragend",$i,()=>{be.getCanvas().style.cursor="pointer"})})}async function di(){be&&fetch("/phast/data/ecoregions.geojson").then(Lt=>Lt.json()).then(Lt=>{console.log(Lt),be.addSource("ecoregions",{type:"geojson",data:Lt,generateId:!0}),be.addLayer({id:"ecoregions-fill",type:"fill",source:"ecoregions",layout:{},paint:{"fill-opacity":0,"fill-color":["case",["boolean",["feature-state","hover"],!1],"#29abe2","#e9f6fb"],"fill-color-transition":{duration:500,delay:0}}}),be.addLayer({id:"ecoregions-line",type:"line",source:"ecoregions",layout:{},paint:{"line-color":"#555555","line-width":.25,"line-opacity":0}}),be.on("mousemove","ecoregions-fill",ni=>{ni.features.length>0&&(se&&be.setFeatureState({source:"ecoregions",id:se},{hover:!1}),se=ni.features[0].id,be.setFeatureState({source:"ecoregions",id:se},{hover:!0}))}),be.on("mouseleave","ecoregions-fill",()=>{se&&be.setFeatureState({source:"ecoregions",id:se},{hover:!1}),se=null}),console.log("added ecoregions")})}async function yi(){be&&fetch("/phast/data/california.geojson").then(Lt=>Lt.json()).then(Lt=>{console.log(Lt),be.addSource("california",{type:"geojson",data:Lt,generateId:!0}),be.addLayer({id:"california-fill",type:"fill",source:"california",layout:{},paint:{"fill-opacity":.75,"fill-color":["case",["boolean",["feature-state","hover"],!1],"#29abe2","#e9f6fb"],"fill-color-transition":{duration:500,delay:0}}}),be.addLayer({id:"california-line",type:"line",source:"california",layout:{},paint:{"line-color":"#555555","line-width":.25,"line-opacity":1}})})}function Ti(Lt){if(Lt){for(let ni of J)ei(ni,r3);lt(!1),ut(!1)}}Dl(()=>{di(),yi(),be.on("load",()=>{console.log("loaded"),Vi()}),setTimeout(()=>{console.log("no load on timeout"),i(1,be._canvas.style.filter="none",be),qe||Vi()},3e3)});async function Vi(){let Lt=oe;Ke=window.innerWidth/3,be.fitBounds(Lt,{padding:{top:50,left:10,bottom:50,right:Ke}}),i(1,be._canvas.style.filter="none",be)}function wi(Lt,ni){let si=Mw(Lt);console.log(si),Ke=2*window.innerWidth/5,ni.flyTo({center:[si[1],si[0]],essential:!0,padding:{right:Ke},duration:750})}let mi="positron";function Wt(Lt){ts[Lt?"unshift":"push"](()=>{We=Lt,i(3,We)})}function Di(Lt){be=Lt,i(1,be)}function $t(Lt){qe=Lt,i(2,qe)}return e.$$set=Lt=>{"metric"in Lt&&i(7,c=Lt.metric),"colorScheme"in Lt&&i(8,h=Lt.colorScheme),"selectionData"in Lt&&i(0,v=Lt.selectionData),"showCounties"in Lt&&i(9,o=Lt.showCounties),"showEcoregions"in Lt&&i(10,k=Lt.showEcoregions),"drawnPath"in Lt&&i(11,O=Lt.drawnPath),"clade"in Lt&&i(12,j=Lt.clade),"clades"in Lt&&i(13,J=Lt.clades),"built"in Lt&&i(14,St=Lt.built),"update"in Lt&&i(17,_t=Lt.update)},e.$$.update=()=>{e.$$.dirty[0]&262150&&be&&qe&&(i(18,ke=be.getStyle().layers.filter(Lt=>Lt["source-layer"]==="place")),console.log(ke)),e.$$.dirty[0]&4230&&be&&qe&&Gt(c,j),e.$$.dirty[0]&262&&be&&qe&&Je(h),e.$$.dirty[0]&518&&be&&qe&&et(o),e.$$.dirty[0]&1030&&be&&qe&&lt(k),e.$$.dirty[0]&2054&&be&&qe&&xe(O),e.$$.dirty[0]&4102&&be&&qe&&yt(j),e.$$.dirty[0]&16390&&be&&qe&&Ti(St)},[v,be,qe,We,ct,r,mi,c,h,o,k,O,j,J,St,lt,ut,_t,ke,Wt,Di,$t]}let BU=class extends Ds{constructor(t){super(),Ls(this,t,LU,PU,vs,{metric:7,colorScheme:8,selectionData:0,showCounties:9,showEcoregions:10,drawnPath:11,clade:12,clades:13,built:14,updateShowEcoregions:15,updateShowCalifornia:16,update:17},null,[-1,-1])}get updateShowEcoregions(){return this.$$.ctx[15]}get updateShowCalifornia(){return this.$$.ctx[16]}};function s3(e){let t,i,r,c,h;return i=new oE({props:{updateMetricLayer:e[10],updateColorScheme:e[11],updateShowCounties:e[12],updateShowEcoregions:e[13],updateDrawing:e[14],drawing:e[5],updateDrawnPath:e[15]}}),c=new _E({props:{colorScheme:e[2],metric:e[1]}}),{c(){t=En("div"),xr(i.$$.fragment),r=fr(),xr(c.$$.fragment),this.h()},l(v){t=In(v,"DIV",{class:!0});var o=en(t);Yr(i.$$.fragment,o),r=dr(o),Yr(c.$$.fragment,o),o.forEach(li),this.h()},h(){vi(t,"class","control-container svelte-c2izy0")},m(v,o){vn(v,t,o),wr(i,t,null),Ri(t,r),wr(c,t,null),h=!0},p(v,o){const k={};o&32&&(k.drawing=v[5]),i.$set(k);const O={};o&4&&(O.colorScheme=v[2]),o&2&&(O.metric=v[1]),c.$set(O)},i(v){h||(Pi(i.$$.fragment,v),Pi(c.$$.fragment,v),h=!0)},o(v){Hi(i.$$.fragment,v),Hi(c.$$.fragment,v),h=!1},d(v){v&&li(t),Sr(i),Sr(c)}}}function a3(e){let t,i;return t=new pE({props:{updatePath:e[15],updateIsDrawing:e[14],isDrawing:e[5]}}),{c(){xr(t.$$.fragment)},l(r){Yr(t.$$.fragment,r)},m(r,c){wr(t,r,c),i=!0},p(r,c){const h={};c&32&&(h.isDrawing=r[5]),t.$set(h)},i(r){i||(Pi(t.$$.fragment,r),i=!0)},o(r){Hi(t.$$.fragment,r),i=!1},d(r){Sr(t,r)}}}function RU(e){let t,i,r,c,h,v,o;t=new BU({props:{built:e[8],update:e[9],metric:e[1],colorScheme:e[2],selectionData:e[0],showCounties:e[3],showEcoregions:e[4],drawnPath:e[6],clade:e[7],clades:e[17]}}),r=new $z({props:{isBuilt:e[8],build:e[18],showEcoregions:e[13],colorScheme:e[2],selectionData:e[0],metric:e[1],updateData:e[9],clade:e[7],clades:e[17],updateClade:e[16]}});let k=e[8]&&s3(e),O=e[5]&&a3(e);return{c(){xr(t.$$.fragment),i=fr(),xr(r.$$.fragment),c=fr(),k&&k.c(),h=fr(),O&&O.c(),v=Rr()},l(j){Yr(t.$$.fragment,j),i=dr(j),Yr(r.$$.fragment,j),c=dr(j),k&&k.l(j),h=dr(j),O&&O.l(j),v=Rr()},m(j,J){wr(t,j,J),vn(j,i,J),wr(r,j,J),vn(j,c,J),k&&k.m(j,J),vn(j,h,J),O&&O.m(j,J),vn(j,v,J),o=!0},p(j,[J]){const oe={};J&256&&(oe.built=j[8]),J&2&&(oe.metric=j[1]),J&4&&(oe.colorScheme=j[2]),J&1&&(oe.selectionData=j[0]),J&8&&(oe.showCounties=j[3]),J&16&&(oe.showEcoregions=j[4]),J&64&&(oe.drawnPath=j[6]),J&128&&(oe.clade=j[7]),t.$set(oe);const se={};J&256&&(se.isBuilt=j[8]),J&4&&(se.colorScheme=j[2]),J&1&&(se.selectionData=j[0]),J&2&&(se.metric=j[1]),J&128&&(se.clade=j[7]),r.$set(se),j[8]?k?(k.p(j,J),J&256&&Pi(k,1)):(k=s3(j),k.c(),Pi(k,1),k.m(h.parentNode,h)):k&&(ia(),Hi(k,1,1,()=>{k=null}),na()),j[5]?O?(O.p(j,J),J&32&&Pi(O,1)):(O=a3(j),O.c(),Pi(O,1),O.m(v.parentNode,v)):O&&(ia(),Hi(O,1,1,()=>{O=null}),na())},i(j){o||(Pi(t.$$.fragment,j),Pi(r.$$.fragment,j),Pi(k),Pi(O),o=!0)},o(j){Hi(t.$$.fragment,j),Hi(r.$$.fragment,j),Hi(k),Hi(O),o=!1},d(j){j&&(li(i),li(c),li(h),li(v)),Sr(t,j),Sr(r,j),k&&k.d(j),O&&O.d(j)}}}function OU(e,t,i){let r=null;function c(xe){console.log("updating!!"),i(0,r=xe)}let h="pd";function v(xe){i(1,h=xe)}let o="*ibm_flip";function k(xe){i(2,o=xe)}let O=!1;function j(xe){i(3,O=xe)}let J=!1;function oe(xe){i(4,J=xe)}let se=!1;function be(xe){i(5,se=xe)}let qe=null;function ke(xe){i(6,qe=xe)}let Qe="Birds";function We(xe){i(7,Qe=xe)}const ct=["Birds","Plants"];let St=!1;function yt(){i(8,St=!0)}return[r,h,o,O,J,se,qe,Qe,St,c,v,k,j,oe,be,ke,We,ct,yt]}class QU extends Ds{constructor(t){super(),Ls(this,t,OU,RU,vs,{})}}export{QU as component};
